System.register(["jimu-core","jimu-ui","jimu-layouts/layout-runtime","jimu-core/react","jimu-ui/basic/sql-expression-runtime"], function(__WEBPACK_DYNAMIC_EXPORT__, __system_context__) {
	var __WEBPACK_EXTERNAL_MODULE_jimu_core__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_ui__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__ = {};
	var __WEBPACK_EXTERNAL_MODULE_react__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__ = {};
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_core__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_ui__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_react__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__, "__esModule", { value: true });
	return {
		setters: [
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_core__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_ui__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_react__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__[key] = module[key];
				});
			}
		],
		execute: function() {
			__WEBPACK_DYNAMIC_EXPORT__(
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/memoize-one/dist/memoize-one.esm.js":
/*!**********************************************************!*\
  !*** ./node_modules/memoize-one/dist/memoize-one.esm.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
var safeIsNaN = Number.isNaN ||
    function ponyfill(value) {
        return typeof value === 'number' && value !== value;
    };
function isEqual(first, second) {
    if (first === second) {
        return true;
    }
    if (safeIsNaN(first) && safeIsNaN(second)) {
        return true;
    }
    return false;
}
function areInputsEqual(newInputs, lastInputs) {
    if (newInputs.length !== lastInputs.length) {
        return false;
    }
    for (var i = 0; i < newInputs.length; i++) {
        if (!isEqual(newInputs[i], lastInputs[i])) {
            return false;
        }
    }
    return true;
}

function memoizeOne(resultFn, isEqual) {
    if (isEqual === void 0) { isEqual = areInputsEqual; }
    var lastThis;
    var lastArgs = [];
    var lastResult;
    var calledOnce = false;
    function memoized() {
        var newArgs = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            newArgs[_i] = arguments[_i];
        }
        if (calledOnce && lastThis === this && isEqual(newArgs, lastArgs)) {
            return lastResult;
        }
        lastResult = resultFn.apply(this, newArgs);
        calledOnce = true;
        lastThis = this;
        lastArgs = newArgs;
        return lastResult;
    }
    return memoized;
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (memoizeOne);


/***/ }),

/***/ "./node_modules/react-window/dist/index.esm.js":
/*!*****************************************************!*\
  !*** ./node_modules/react-window/dist/index.esm.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "FixedSizeGrid": () => (/* binding */ FixedSizeGrid),
/* harmony export */   "FixedSizeList": () => (/* binding */ FixedSizeList),
/* harmony export */   "VariableSizeGrid": () => (/* binding */ VariableSizeGrid),
/* harmony export */   "VariableSizeList": () => (/* binding */ VariableSizeList),
/* harmony export */   "areEqual": () => (/* binding */ areEqual),
/* harmony export */   "shouldComponentUpdate": () => (/* binding */ shouldComponentUpdate)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "./node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var memoize_one__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! memoize-one */ "./node_modules/memoize-one/dist/memoize-one.esm.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var _babel_runtime_helpers_esm_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectWithoutPropertiesLoose */ "./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js");







// Animation frame based implementation of setTimeout.
// Inspired by Joe Lambert, https://gist.github.com/joelambert/1002116#file-requesttimeout-js
var hasNativePerformanceNow = typeof performance === 'object' && typeof performance.now === 'function';
var now = hasNativePerformanceNow ? function () {
  return performance.now();
} : function () {
  return Date.now();
};
function cancelTimeout(timeoutID) {
  cancelAnimationFrame(timeoutID.id);
}
function requestTimeout(callback, delay) {
  var start = now();

  function tick() {
    if (now() - start >= delay) {
      callback.call(null);
    } else {
      timeoutID.id = requestAnimationFrame(tick);
    }
  }

  var timeoutID = {
    id: requestAnimationFrame(tick)
  };
  return timeoutID;
}

var size = -1; // This utility copied from "dom-helpers" package.

function getScrollbarSize(recalculate) {
  if (recalculate === void 0) {
    recalculate = false;
  }

  if (size === -1 || recalculate) {
    var div = document.createElement('div');
    var style = div.style;
    style.width = '50px';
    style.height = '50px';
    style.overflow = 'scroll';
    document.body.appendChild(div);
    size = div.offsetWidth - div.clientWidth;
    document.body.removeChild(div);
  }

  return size;
}
var cachedRTLResult = null; // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.
// Chrome does not seem to adhere; its scrollLeft values are positive (measured relative to the left).
// Safari's elastic bounce makes detecting this even more complicated wrt potential false positives.
// The safest way to check this is to intentionally set a negative offset,
// and then verify that the subsequent "scroll" event matches the negative offset.
// If it does not match, then we can assume a non-standard RTL scroll implementation.

function getRTLOffsetType(recalculate) {
  if (recalculate === void 0) {
    recalculate = false;
  }

  if (cachedRTLResult === null || recalculate) {
    var outerDiv = document.createElement('div');
    var outerStyle = outerDiv.style;
    outerStyle.width = '50px';
    outerStyle.height = '50px';
    outerStyle.overflow = 'scroll';
    outerStyle.direction = 'rtl';
    var innerDiv = document.createElement('div');
    var innerStyle = innerDiv.style;
    innerStyle.width = '100px';
    innerStyle.height = '100px';
    outerDiv.appendChild(innerDiv);
    document.body.appendChild(outerDiv);

    if (outerDiv.scrollLeft > 0) {
      cachedRTLResult = 'positive-descending';
    } else {
      outerDiv.scrollLeft = 1;

      if (outerDiv.scrollLeft === 0) {
        cachedRTLResult = 'negative';
      } else {
        cachedRTLResult = 'positive-ascending';
      }
    }

    document.body.removeChild(outerDiv);
    return cachedRTLResult;
  }

  return cachedRTLResult;
}

var IS_SCROLLING_DEBOUNCE_INTERVAL = 150;

var defaultItemKey = function defaultItemKey(_ref) {
  var columnIndex = _ref.columnIndex,
      data = _ref.data,
      rowIndex = _ref.rowIndex;
  return rowIndex + ":" + columnIndex;
}; // In DEV mode, this Set helps us only log a warning once per component instance.
// This avoids spamming the console every time a render happens.


var devWarningsOverscanCount = null;
var devWarningsOverscanRowsColumnsCount = null;
var devWarningsTagName = null;

if (true) {
  if (typeof window !== 'undefined' && typeof window.WeakSet !== 'undefined') {
    devWarningsOverscanCount = /*#__PURE__*/new WeakSet();
    devWarningsOverscanRowsColumnsCount = /*#__PURE__*/new WeakSet();
    devWarningsTagName = /*#__PURE__*/new WeakSet();
  }
}

function createGridComponent(_ref2) {
  var _class;

  var getColumnOffset = _ref2.getColumnOffset,
      getColumnStartIndexForOffset = _ref2.getColumnStartIndexForOffset,
      getColumnStopIndexForStartIndex = _ref2.getColumnStopIndexForStartIndex,
      getColumnWidth = _ref2.getColumnWidth,
      getEstimatedTotalHeight = _ref2.getEstimatedTotalHeight,
      getEstimatedTotalWidth = _ref2.getEstimatedTotalWidth,
      getOffsetForColumnAndAlignment = _ref2.getOffsetForColumnAndAlignment,
      getOffsetForRowAndAlignment = _ref2.getOffsetForRowAndAlignment,
      getRowHeight = _ref2.getRowHeight,
      getRowOffset = _ref2.getRowOffset,
      getRowStartIndexForOffset = _ref2.getRowStartIndexForOffset,
      getRowStopIndexForStartIndex = _ref2.getRowStopIndexForStartIndex,
      initInstanceProps = _ref2.initInstanceProps,
      shouldResetStyleCacheOnItemSizeChange = _ref2.shouldResetStyleCacheOnItemSizeChange,
      validateProps = _ref2.validateProps;
  return _class = /*#__PURE__*/function (_PureComponent) {
    (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_2__["default"])(Grid, _PureComponent);

    // Always use explicit constructor for React components.
    // It produces less code after transpilation. (#26)
    // eslint-disable-next-line no-useless-constructor
    function Grid(props) {
      var _this;

      _this = _PureComponent.call(this, props) || this;
      _this._instanceProps = initInstanceProps(_this.props, (0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_1__["default"])(_this));
      _this._resetIsScrollingTimeoutId = null;
      _this._outerRef = void 0;
      _this.state = {
        instance: (0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_1__["default"])(_this),
        isScrolling: false,
        horizontalScrollDirection: 'forward',
        scrollLeft: typeof _this.props.initialScrollLeft === 'number' ? _this.props.initialScrollLeft : 0,
        scrollTop: typeof _this.props.initialScrollTop === 'number' ? _this.props.initialScrollTop : 0,
        scrollUpdateWasRequested: false,
        verticalScrollDirection: 'forward'
      };
      _this._callOnItemsRendered = void 0;
      _this._callOnItemsRendered = (0,memoize_one__WEBPACK_IMPORTED_MODULE_5__["default"])(function (overscanColumnStartIndex, overscanColumnStopIndex, overscanRowStartIndex, overscanRowStopIndex, visibleColumnStartIndex, visibleColumnStopIndex, visibleRowStartIndex, visibleRowStopIndex) {
        return _this.props.onItemsRendered({
          overscanColumnStartIndex: overscanColumnStartIndex,
          overscanColumnStopIndex: overscanColumnStopIndex,
          overscanRowStartIndex: overscanRowStartIndex,
          overscanRowStopIndex: overscanRowStopIndex,
          visibleColumnStartIndex: visibleColumnStartIndex,
          visibleColumnStopIndex: visibleColumnStopIndex,
          visibleRowStartIndex: visibleRowStartIndex,
          visibleRowStopIndex: visibleRowStopIndex
        });
      });
      _this._callOnScroll = void 0;
      _this._callOnScroll = (0,memoize_one__WEBPACK_IMPORTED_MODULE_5__["default"])(function (scrollLeft, scrollTop, horizontalScrollDirection, verticalScrollDirection, scrollUpdateWasRequested) {
        return _this.props.onScroll({
          horizontalScrollDirection: horizontalScrollDirection,
          scrollLeft: scrollLeft,
          scrollTop: scrollTop,
          verticalScrollDirection: verticalScrollDirection,
          scrollUpdateWasRequested: scrollUpdateWasRequested
        });
      });
      _this._getItemStyle = void 0;

      _this._getItemStyle = function (rowIndex, columnIndex) {
        var _this$props = _this.props,
            columnWidth = _this$props.columnWidth,
            direction = _this$props.direction,
            rowHeight = _this$props.rowHeight;

        var itemStyleCache = _this._getItemStyleCache(shouldResetStyleCacheOnItemSizeChange && columnWidth, shouldResetStyleCacheOnItemSizeChange && direction, shouldResetStyleCacheOnItemSizeChange && rowHeight);

        var key = rowIndex + ":" + columnIndex;
        var style;

        if (itemStyleCache.hasOwnProperty(key)) {
          style = itemStyleCache[key];
        } else {
          var _offset = getColumnOffset(_this.props, columnIndex, _this._instanceProps);

          var isRtl = direction === 'rtl';
          itemStyleCache[key] = style = {
            position: 'absolute',
            left: isRtl ? undefined : _offset,
            right: isRtl ? _offset : undefined,
            top: getRowOffset(_this.props, rowIndex, _this._instanceProps),
            height: getRowHeight(_this.props, rowIndex, _this._instanceProps),
            width: getColumnWidth(_this.props, columnIndex, _this._instanceProps)
          };
        }

        return style;
      };

      _this._getItemStyleCache = void 0;
      _this._getItemStyleCache = (0,memoize_one__WEBPACK_IMPORTED_MODULE_5__["default"])(function (_, __, ___) {
        return {};
      });

      _this._onScroll = function (event) {
        var _event$currentTarget = event.currentTarget,
            clientHeight = _event$currentTarget.clientHeight,
            clientWidth = _event$currentTarget.clientWidth,
            scrollLeft = _event$currentTarget.scrollLeft,
            scrollTop = _event$currentTarget.scrollTop,
            scrollHeight = _event$currentTarget.scrollHeight,
            scrollWidth = _event$currentTarget.scrollWidth;

        _this.setState(function (prevState) {
          if (prevState.scrollLeft === scrollLeft && prevState.scrollTop === scrollTop) {
            // Scroll position may have been updated by cDM/cDU,
            // In which case we don't need to trigger another render,
            // And we don't want to update state.isScrolling.
            return null;
          }

          var direction = _this.props.direction; // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.
          // This is not the case for all browsers though (e.g. Chrome reports values as positive, measured relative to the left).
          // It's also easier for this component if we convert offsets to the same format as they would be in for ltr.
          // So the simplest solution is to determine which browser behavior we're dealing with, and convert based on it.

          var calculatedScrollLeft = scrollLeft;

          if (direction === 'rtl') {
            switch (getRTLOffsetType()) {
              case 'negative':
                calculatedScrollLeft = -scrollLeft;
                break;

              case 'positive-descending':
                calculatedScrollLeft = scrollWidth - clientWidth - scrollLeft;
                break;
            }
          } // Prevent Safari's elastic scrolling from causing visual shaking when scrolling past bounds.


          calculatedScrollLeft = Math.max(0, Math.min(calculatedScrollLeft, scrollWidth - clientWidth));
          var calculatedScrollTop = Math.max(0, Math.min(scrollTop, scrollHeight - clientHeight));
          return {
            isScrolling: true,
            horizontalScrollDirection: prevState.scrollLeft < scrollLeft ? 'forward' : 'backward',
            scrollLeft: calculatedScrollLeft,
            scrollTop: calculatedScrollTop,
            verticalScrollDirection: prevState.scrollTop < scrollTop ? 'forward' : 'backward',
            scrollUpdateWasRequested: false
          };
        }, _this._resetIsScrollingDebounced);
      };

      _this._outerRefSetter = function (ref) {
        var outerRef = _this.props.outerRef;
        _this._outerRef = ref;

        if (typeof outerRef === 'function') {
          outerRef(ref);
        } else if (outerRef != null && typeof outerRef === 'object' && outerRef.hasOwnProperty('current')) {
          outerRef.current = ref;
        }
      };

      _this._resetIsScrollingDebounced = function () {
        if (_this._resetIsScrollingTimeoutId !== null) {
          cancelTimeout(_this._resetIsScrollingTimeoutId);
        }

        _this._resetIsScrollingTimeoutId = requestTimeout(_this._resetIsScrolling, IS_SCROLLING_DEBOUNCE_INTERVAL);
      };

      _this._resetIsScrolling = function () {
        _this._resetIsScrollingTimeoutId = null;

        _this.setState({
          isScrolling: false
        }, function () {
          // Clear style cache after state update has been committed.
          // This way we don't break pure sCU for items that don't use isScrolling param.
          _this._getItemStyleCache(-1);
        });
      };

      return _this;
    }

    Grid.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {
      validateSharedProps(nextProps, prevState);
      validateProps(nextProps);
      return null;
    };

    var _proto = Grid.prototype;

    _proto.scrollTo = function scrollTo(_ref3) {
      var scrollLeft = _ref3.scrollLeft,
          scrollTop = _ref3.scrollTop;

      if (scrollLeft !== undefined) {
        scrollLeft = Math.max(0, scrollLeft);
      }

      if (scrollTop !== undefined) {
        scrollTop = Math.max(0, scrollTop);
      }

      this.setState(function (prevState) {
        if (scrollLeft === undefined) {
          scrollLeft = prevState.scrollLeft;
        }

        if (scrollTop === undefined) {
          scrollTop = prevState.scrollTop;
        }

        if (prevState.scrollLeft === scrollLeft && prevState.scrollTop === scrollTop) {
          return null;
        }

        return {
          horizontalScrollDirection: prevState.scrollLeft < scrollLeft ? 'forward' : 'backward',
          scrollLeft: scrollLeft,
          scrollTop: scrollTop,
          scrollUpdateWasRequested: true,
          verticalScrollDirection: prevState.scrollTop < scrollTop ? 'forward' : 'backward'
        };
      }, this._resetIsScrollingDebounced);
    };

    _proto.scrollToItem = function scrollToItem(_ref4) {
      var _ref4$align = _ref4.align,
          align = _ref4$align === void 0 ? 'auto' : _ref4$align,
          columnIndex = _ref4.columnIndex,
          rowIndex = _ref4.rowIndex;
      var _this$props2 = this.props,
          columnCount = _this$props2.columnCount,
          height = _this$props2.height,
          rowCount = _this$props2.rowCount,
          width = _this$props2.width;
      var _this$state = this.state,
          scrollLeft = _this$state.scrollLeft,
          scrollTop = _this$state.scrollTop;
      var scrollbarSize = getScrollbarSize();

      if (columnIndex !== undefined) {
        columnIndex = Math.max(0, Math.min(columnIndex, columnCount - 1));
      }

      if (rowIndex !== undefined) {
        rowIndex = Math.max(0, Math.min(rowIndex, rowCount - 1));
      }

      var estimatedTotalHeight = getEstimatedTotalHeight(this.props, this._instanceProps);
      var estimatedTotalWidth = getEstimatedTotalWidth(this.props, this._instanceProps); // The scrollbar size should be considered when scrolling an item into view,
      // to ensure it's fully visible.
      // But we only need to account for its size when it's actually visible.

      var horizontalScrollbarSize = estimatedTotalWidth > width ? scrollbarSize : 0;
      var verticalScrollbarSize = estimatedTotalHeight > height ? scrollbarSize : 0;
      this.scrollTo({
        scrollLeft: columnIndex !== undefined ? getOffsetForColumnAndAlignment(this.props, columnIndex, align, scrollLeft, this._instanceProps, verticalScrollbarSize) : scrollLeft,
        scrollTop: rowIndex !== undefined ? getOffsetForRowAndAlignment(this.props, rowIndex, align, scrollTop, this._instanceProps, horizontalScrollbarSize) : scrollTop
      });
    };

    _proto.componentDidMount = function componentDidMount() {
      var _this$props3 = this.props,
          initialScrollLeft = _this$props3.initialScrollLeft,
          initialScrollTop = _this$props3.initialScrollTop;

      if (this._outerRef != null) {
        var outerRef = this._outerRef;

        if (typeof initialScrollLeft === 'number') {
          outerRef.scrollLeft = initialScrollLeft;
        }

        if (typeof initialScrollTop === 'number') {
          outerRef.scrollTop = initialScrollTop;
        }
      }

      this._callPropsCallbacks();
    };

    _proto.componentDidUpdate = function componentDidUpdate() {
      var direction = this.props.direction;
      var _this$state2 = this.state,
          scrollLeft = _this$state2.scrollLeft,
          scrollTop = _this$state2.scrollTop,
          scrollUpdateWasRequested = _this$state2.scrollUpdateWasRequested;

      if (scrollUpdateWasRequested && this._outerRef != null) {
        // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.
        // This is not the case for all browsers though (e.g. Chrome reports values as positive, measured relative to the left).
        // So we need to determine which browser behavior we're dealing with, and mimic it.
        var outerRef = this._outerRef;

        if (direction === 'rtl') {
          switch (getRTLOffsetType()) {
            case 'negative':
              outerRef.scrollLeft = -scrollLeft;
              break;

            case 'positive-ascending':
              outerRef.scrollLeft = scrollLeft;
              break;

            default:
              var clientWidth = outerRef.clientWidth,
                  scrollWidth = outerRef.scrollWidth;
              outerRef.scrollLeft = scrollWidth - clientWidth - scrollLeft;
              break;
          }
        } else {
          outerRef.scrollLeft = Math.max(0, scrollLeft);
        }

        outerRef.scrollTop = Math.max(0, scrollTop);
      }

      this._callPropsCallbacks();
    };

    _proto.componentWillUnmount = function componentWillUnmount() {
      if (this._resetIsScrollingTimeoutId !== null) {
        cancelTimeout(this._resetIsScrollingTimeoutId);
      }
    };

    _proto.render = function render() {
      var _this$props4 = this.props,
          children = _this$props4.children,
          className = _this$props4.className,
          columnCount = _this$props4.columnCount,
          direction = _this$props4.direction,
          height = _this$props4.height,
          innerRef = _this$props4.innerRef,
          innerElementType = _this$props4.innerElementType,
          innerTagName = _this$props4.innerTagName,
          itemData = _this$props4.itemData,
          _this$props4$itemKey = _this$props4.itemKey,
          itemKey = _this$props4$itemKey === void 0 ? defaultItemKey : _this$props4$itemKey,
          outerElementType = _this$props4.outerElementType,
          outerTagName = _this$props4.outerTagName,
          rowCount = _this$props4.rowCount,
          style = _this$props4.style,
          useIsScrolling = _this$props4.useIsScrolling,
          width = _this$props4.width;
      var isScrolling = this.state.isScrolling;

      var _this$_getHorizontalR = this._getHorizontalRangeToRender(),
          columnStartIndex = _this$_getHorizontalR[0],
          columnStopIndex = _this$_getHorizontalR[1];

      var _this$_getVerticalRan = this._getVerticalRangeToRender(),
          rowStartIndex = _this$_getVerticalRan[0],
          rowStopIndex = _this$_getVerticalRan[1];

      var items = [];

      if (columnCount > 0 && rowCount) {
        for (var _rowIndex = rowStartIndex; _rowIndex <= rowStopIndex; _rowIndex++) {
          for (var _columnIndex = columnStartIndex; _columnIndex <= columnStopIndex; _columnIndex++) {
            items.push((0,react__WEBPACK_IMPORTED_MODULE_3__.createElement)(children, {
              columnIndex: _columnIndex,
              data: itemData,
              isScrolling: useIsScrolling ? isScrolling : undefined,
              key: itemKey({
                columnIndex: _columnIndex,
                data: itemData,
                rowIndex: _rowIndex
              }),
              rowIndex: _rowIndex,
              style: this._getItemStyle(_rowIndex, _columnIndex)
            }));
          }
        }
      } // Read this value AFTER items have been created,
      // So their actual sizes (if variable) are taken into consideration.


      var estimatedTotalHeight = getEstimatedTotalHeight(this.props, this._instanceProps);
      var estimatedTotalWidth = getEstimatedTotalWidth(this.props, this._instanceProps);
      return (0,react__WEBPACK_IMPORTED_MODULE_3__.createElement)(outerElementType || outerTagName || 'div', {
        className: className,
        onScroll: this._onScroll,
        ref: this._outerRefSetter,
        style: (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({
          position: 'relative',
          height: height,
          width: width,
          overflow: 'auto',
          WebkitOverflowScrolling: 'touch',
          willChange: 'transform',
          direction: direction
        }, style)
      }, (0,react__WEBPACK_IMPORTED_MODULE_3__.createElement)(innerElementType || innerTagName || 'div', {
        children: items,
        ref: innerRef,
        style: {
          height: estimatedTotalHeight,
          pointerEvents: isScrolling ? 'none' : undefined,
          width: estimatedTotalWidth
        }
      }));
    };

    _proto._callPropsCallbacks = function _callPropsCallbacks() {
      var _this$props5 = this.props,
          columnCount = _this$props5.columnCount,
          onItemsRendered = _this$props5.onItemsRendered,
          onScroll = _this$props5.onScroll,
          rowCount = _this$props5.rowCount;

      if (typeof onItemsRendered === 'function') {
        if (columnCount > 0 && rowCount > 0) {
          var _this$_getHorizontalR2 = this._getHorizontalRangeToRender(),
              _overscanColumnStartIndex = _this$_getHorizontalR2[0],
              _overscanColumnStopIndex = _this$_getHorizontalR2[1],
              _visibleColumnStartIndex = _this$_getHorizontalR2[2],
              _visibleColumnStopIndex = _this$_getHorizontalR2[3];

          var _this$_getVerticalRan2 = this._getVerticalRangeToRender(),
              _overscanRowStartIndex = _this$_getVerticalRan2[0],
              _overscanRowStopIndex = _this$_getVerticalRan2[1],
              _visibleRowStartIndex = _this$_getVerticalRan2[2],
              _visibleRowStopIndex = _this$_getVerticalRan2[3];

          this._callOnItemsRendered(_overscanColumnStartIndex, _overscanColumnStopIndex, _overscanRowStartIndex, _overscanRowStopIndex, _visibleColumnStartIndex, _visibleColumnStopIndex, _visibleRowStartIndex, _visibleRowStopIndex);
        }
      }

      if (typeof onScroll === 'function') {
        var _this$state3 = this.state,
            _horizontalScrollDirection = _this$state3.horizontalScrollDirection,
            _scrollLeft = _this$state3.scrollLeft,
            _scrollTop = _this$state3.scrollTop,
            _scrollUpdateWasRequested = _this$state3.scrollUpdateWasRequested,
            _verticalScrollDirection = _this$state3.verticalScrollDirection;

        this._callOnScroll(_scrollLeft, _scrollTop, _horizontalScrollDirection, _verticalScrollDirection, _scrollUpdateWasRequested);
      }
    } // Lazily create and cache item styles while scrolling,
    // So that pure component sCU will prevent re-renders.
    // We maintain this cache, and pass a style prop rather than index,
    // So that List can clear cached styles and force item re-render if necessary.
    ;

    _proto._getHorizontalRangeToRender = function _getHorizontalRangeToRender() {
      var _this$props6 = this.props,
          columnCount = _this$props6.columnCount,
          overscanColumnCount = _this$props6.overscanColumnCount,
          overscanColumnsCount = _this$props6.overscanColumnsCount,
          overscanCount = _this$props6.overscanCount,
          rowCount = _this$props6.rowCount;
      var _this$state4 = this.state,
          horizontalScrollDirection = _this$state4.horizontalScrollDirection,
          isScrolling = _this$state4.isScrolling,
          scrollLeft = _this$state4.scrollLeft;
      var overscanCountResolved = overscanColumnCount || overscanColumnsCount || overscanCount || 1;

      if (columnCount === 0 || rowCount === 0) {
        return [0, 0, 0, 0];
      }

      var startIndex = getColumnStartIndexForOffset(this.props, scrollLeft, this._instanceProps);
      var stopIndex = getColumnStopIndexForStartIndex(this.props, startIndex, scrollLeft, this._instanceProps); // Overscan by one item in each direction so that tab/focus works.
      // If there isn't at least one extra item, tab loops back around.

      var overscanBackward = !isScrolling || horizontalScrollDirection === 'backward' ? Math.max(1, overscanCountResolved) : 1;
      var overscanForward = !isScrolling || horizontalScrollDirection === 'forward' ? Math.max(1, overscanCountResolved) : 1;
      return [Math.max(0, startIndex - overscanBackward), Math.max(0, Math.min(columnCount - 1, stopIndex + overscanForward)), startIndex, stopIndex];
    };

    _proto._getVerticalRangeToRender = function _getVerticalRangeToRender() {
      var _this$props7 = this.props,
          columnCount = _this$props7.columnCount,
          overscanCount = _this$props7.overscanCount,
          overscanRowCount = _this$props7.overscanRowCount,
          overscanRowsCount = _this$props7.overscanRowsCount,
          rowCount = _this$props7.rowCount;
      var _this$state5 = this.state,
          isScrolling = _this$state5.isScrolling,
          verticalScrollDirection = _this$state5.verticalScrollDirection,
          scrollTop = _this$state5.scrollTop;
      var overscanCountResolved = overscanRowCount || overscanRowsCount || overscanCount || 1;

      if (columnCount === 0 || rowCount === 0) {
        return [0, 0, 0, 0];
      }

      var startIndex = getRowStartIndexForOffset(this.props, scrollTop, this._instanceProps);
      var stopIndex = getRowStopIndexForStartIndex(this.props, startIndex, scrollTop, this._instanceProps); // Overscan by one item in each direction so that tab/focus works.
      // If there isn't at least one extra item, tab loops back around.

      var overscanBackward = !isScrolling || verticalScrollDirection === 'backward' ? Math.max(1, overscanCountResolved) : 1;
      var overscanForward = !isScrolling || verticalScrollDirection === 'forward' ? Math.max(1, overscanCountResolved) : 1;
      return [Math.max(0, startIndex - overscanBackward), Math.max(0, Math.min(rowCount - 1, stopIndex + overscanForward)), startIndex, stopIndex];
    };

    return Grid;
  }(react__WEBPACK_IMPORTED_MODULE_3__.PureComponent), _class.defaultProps = {
    direction: 'ltr',
    itemData: undefined,
    useIsScrolling: false
  }, _class;
}

var validateSharedProps = function validateSharedProps(_ref5, _ref6) {
  var children = _ref5.children,
      direction = _ref5.direction,
      height = _ref5.height,
      innerTagName = _ref5.innerTagName,
      outerTagName = _ref5.outerTagName,
      overscanColumnsCount = _ref5.overscanColumnsCount,
      overscanCount = _ref5.overscanCount,
      overscanRowsCount = _ref5.overscanRowsCount,
      width = _ref5.width;
  var instance = _ref6.instance;

  if (true) {
    if (typeof overscanCount === 'number') {
      if (devWarningsOverscanCount && !devWarningsOverscanCount.has(instance)) {
        devWarningsOverscanCount.add(instance);
        console.warn('The overscanCount prop has been deprecated. ' + 'Please use the overscanColumnCount and overscanRowCount props instead.');
      }
    }

    if (typeof overscanColumnsCount === 'number' || typeof overscanRowsCount === 'number') {
      if (devWarningsOverscanRowsColumnsCount && !devWarningsOverscanRowsColumnsCount.has(instance)) {
        devWarningsOverscanRowsColumnsCount.add(instance);
        console.warn('The overscanColumnsCount and overscanRowsCount props have been deprecated. ' + 'Please use the overscanColumnCount and overscanRowCount props instead.');
      }
    }

    if (innerTagName != null || outerTagName != null) {
      if (devWarningsTagName && !devWarningsTagName.has(instance)) {
        devWarningsTagName.add(instance);
        console.warn('The innerTagName and outerTagName props have been deprecated. ' + 'Please use the innerElementType and outerElementType props instead.');
      }
    }

    if (children == null) {
      throw Error('An invalid "children" prop has been specified. ' + 'Value should be a React component. ' + ("\"" + (children === null ? 'null' : typeof children) + "\" was specified."));
    }

    switch (direction) {
      case 'ltr':
      case 'rtl':
        // Valid values
        break;

      default:
        throw Error('An invalid "direction" prop has been specified. ' + 'Value should be either "ltr" or "rtl". ' + ("\"" + direction + "\" was specified."));
    }

    if (typeof width !== 'number') {
      throw Error('An invalid "width" prop has been specified. ' + 'Grids must specify a number for width. ' + ("\"" + (width === null ? 'null' : typeof width) + "\" was specified."));
    }

    if (typeof height !== 'number') {
      throw Error('An invalid "height" prop has been specified. ' + 'Grids must specify a number for height. ' + ("\"" + (height === null ? 'null' : typeof height) + "\" was specified."));
    }
  }
};

var DEFAULT_ESTIMATED_ITEM_SIZE = 50;

var getEstimatedTotalHeight = function getEstimatedTotalHeight(_ref, _ref2) {
  var rowCount = _ref.rowCount;
  var rowMetadataMap = _ref2.rowMetadataMap,
      estimatedRowHeight = _ref2.estimatedRowHeight,
      lastMeasuredRowIndex = _ref2.lastMeasuredRowIndex;
  var totalSizeOfMeasuredRows = 0; // Edge case check for when the number of items decreases while a scroll is in progress.
  // https://github.com/bvaughn/react-window/pull/138

  if (lastMeasuredRowIndex >= rowCount) {
    lastMeasuredRowIndex = rowCount - 1;
  }

  if (lastMeasuredRowIndex >= 0) {
    var itemMetadata = rowMetadataMap[lastMeasuredRowIndex];
    totalSizeOfMeasuredRows = itemMetadata.offset + itemMetadata.size;
  }

  var numUnmeasuredItems = rowCount - lastMeasuredRowIndex - 1;
  var totalSizeOfUnmeasuredItems = numUnmeasuredItems * estimatedRowHeight;
  return totalSizeOfMeasuredRows + totalSizeOfUnmeasuredItems;
};

var getEstimatedTotalWidth = function getEstimatedTotalWidth(_ref3, _ref4) {
  var columnCount = _ref3.columnCount;
  var columnMetadataMap = _ref4.columnMetadataMap,
      estimatedColumnWidth = _ref4.estimatedColumnWidth,
      lastMeasuredColumnIndex = _ref4.lastMeasuredColumnIndex;
  var totalSizeOfMeasuredRows = 0; // Edge case check for when the number of items decreases while a scroll is in progress.
  // https://github.com/bvaughn/react-window/pull/138

  if (lastMeasuredColumnIndex >= columnCount) {
    lastMeasuredColumnIndex = columnCount - 1;
  }

  if (lastMeasuredColumnIndex >= 0) {
    var itemMetadata = columnMetadataMap[lastMeasuredColumnIndex];
    totalSizeOfMeasuredRows = itemMetadata.offset + itemMetadata.size;
  }

  var numUnmeasuredItems = columnCount - lastMeasuredColumnIndex - 1;
  var totalSizeOfUnmeasuredItems = numUnmeasuredItems * estimatedColumnWidth;
  return totalSizeOfMeasuredRows + totalSizeOfUnmeasuredItems;
};

var getItemMetadata = function getItemMetadata(itemType, props, index, instanceProps) {
  var itemMetadataMap, itemSize, lastMeasuredIndex;

  if (itemType === 'column') {
    itemMetadataMap = instanceProps.columnMetadataMap;
    itemSize = props.columnWidth;
    lastMeasuredIndex = instanceProps.lastMeasuredColumnIndex;
  } else {
    itemMetadataMap = instanceProps.rowMetadataMap;
    itemSize = props.rowHeight;
    lastMeasuredIndex = instanceProps.lastMeasuredRowIndex;
  }

  if (index > lastMeasuredIndex) {
    var offset = 0;

    if (lastMeasuredIndex >= 0) {
      var itemMetadata = itemMetadataMap[lastMeasuredIndex];
      offset = itemMetadata.offset + itemMetadata.size;
    }

    for (var i = lastMeasuredIndex + 1; i <= index; i++) {
      var size = itemSize(i);
      itemMetadataMap[i] = {
        offset: offset,
        size: size
      };
      offset += size;
    }

    if (itemType === 'column') {
      instanceProps.lastMeasuredColumnIndex = index;
    } else {
      instanceProps.lastMeasuredRowIndex = index;
    }
  }

  return itemMetadataMap[index];
};

var findNearestItem = function findNearestItem(itemType, props, instanceProps, offset) {
  var itemMetadataMap, lastMeasuredIndex;

  if (itemType === 'column') {
    itemMetadataMap = instanceProps.columnMetadataMap;
    lastMeasuredIndex = instanceProps.lastMeasuredColumnIndex;
  } else {
    itemMetadataMap = instanceProps.rowMetadataMap;
    lastMeasuredIndex = instanceProps.lastMeasuredRowIndex;
  }

  var lastMeasuredItemOffset = lastMeasuredIndex > 0 ? itemMetadataMap[lastMeasuredIndex].offset : 0;

  if (lastMeasuredItemOffset >= offset) {
    // If we've already measured items within this range just use a binary search as it's faster.
    return findNearestItemBinarySearch(itemType, props, instanceProps, lastMeasuredIndex, 0, offset);
  } else {
    // If we haven't yet measured this high, fallback to an exponential search with an inner binary search.
    // The exponential search avoids pre-computing sizes for the full set of items as a binary search would.
    // The overall complexity for this approach is O(log n).
    return findNearestItemExponentialSearch(itemType, props, instanceProps, Math.max(0, lastMeasuredIndex), offset);
  }
};

var findNearestItemBinarySearch = function findNearestItemBinarySearch(itemType, props, instanceProps, high, low, offset) {
  while (low <= high) {
    var middle = low + Math.floor((high - low) / 2);
    var currentOffset = getItemMetadata(itemType, props, middle, instanceProps).offset;

    if (currentOffset === offset) {
      return middle;
    } else if (currentOffset < offset) {
      low = middle + 1;
    } else if (currentOffset > offset) {
      high = middle - 1;
    }
  }

  if (low > 0) {
    return low - 1;
  } else {
    return 0;
  }
};

var findNearestItemExponentialSearch = function findNearestItemExponentialSearch(itemType, props, instanceProps, index, offset) {
  var itemCount = itemType === 'column' ? props.columnCount : props.rowCount;
  var interval = 1;

  while (index < itemCount && getItemMetadata(itemType, props, index, instanceProps).offset < offset) {
    index += interval;
    interval *= 2;
  }

  return findNearestItemBinarySearch(itemType, props, instanceProps, Math.min(index, itemCount - 1), Math.floor(index / 2), offset);
};

var getOffsetForIndexAndAlignment = function getOffsetForIndexAndAlignment(itemType, props, index, align, scrollOffset, instanceProps, scrollbarSize) {
  var size = itemType === 'column' ? props.width : props.height;
  var itemMetadata = getItemMetadata(itemType, props, index, instanceProps); // Get estimated total size after ItemMetadata is computed,
  // To ensure it reflects actual measurements instead of just estimates.

  var estimatedTotalSize = itemType === 'column' ? getEstimatedTotalWidth(props, instanceProps) : getEstimatedTotalHeight(props, instanceProps);
  var maxOffset = Math.max(0, Math.min(estimatedTotalSize - size, itemMetadata.offset));
  var minOffset = Math.max(0, itemMetadata.offset - size + scrollbarSize + itemMetadata.size);

  if (align === 'smart') {
    if (scrollOffset >= minOffset - size && scrollOffset <= maxOffset + size) {
      align = 'auto';
    } else {
      align = 'center';
    }
  }

  switch (align) {
    case 'start':
      return maxOffset;

    case 'end':
      return minOffset;

    case 'center':
      return Math.round(minOffset + (maxOffset - minOffset) / 2);

    case 'auto':
    default:
      if (scrollOffset >= minOffset && scrollOffset <= maxOffset) {
        return scrollOffset;
      } else if (minOffset > maxOffset) {
        // Because we only take into account the scrollbar size when calculating minOffset
        // this value can be larger than maxOffset when at the end of the list
        return minOffset;
      } else if (scrollOffset < minOffset) {
        return minOffset;
      } else {
        return maxOffset;
      }

  }
};

var VariableSizeGrid = /*#__PURE__*/createGridComponent({
  getColumnOffset: function getColumnOffset(props, index, instanceProps) {
    return getItemMetadata('column', props, index, instanceProps).offset;
  },
  getColumnStartIndexForOffset: function getColumnStartIndexForOffset(props, scrollLeft, instanceProps) {
    return findNearestItem('column', props, instanceProps, scrollLeft);
  },
  getColumnStopIndexForStartIndex: function getColumnStopIndexForStartIndex(props, startIndex, scrollLeft, instanceProps) {
    var columnCount = props.columnCount,
        width = props.width;
    var itemMetadata = getItemMetadata('column', props, startIndex, instanceProps);
    var maxOffset = scrollLeft + width;
    var offset = itemMetadata.offset + itemMetadata.size;
    var stopIndex = startIndex;

    while (stopIndex < columnCount - 1 && offset < maxOffset) {
      stopIndex++;
      offset += getItemMetadata('column', props, stopIndex, instanceProps).size;
    }

    return stopIndex;
  },
  getColumnWidth: function getColumnWidth(props, index, instanceProps) {
    return instanceProps.columnMetadataMap[index].size;
  },
  getEstimatedTotalHeight: getEstimatedTotalHeight,
  getEstimatedTotalWidth: getEstimatedTotalWidth,
  getOffsetForColumnAndAlignment: function getOffsetForColumnAndAlignment(props, index, align, scrollOffset, instanceProps, scrollbarSize) {
    return getOffsetForIndexAndAlignment('column', props, index, align, scrollOffset, instanceProps, scrollbarSize);
  },
  getOffsetForRowAndAlignment: function getOffsetForRowAndAlignment(props, index, align, scrollOffset, instanceProps, scrollbarSize) {
    return getOffsetForIndexAndAlignment('row', props, index, align, scrollOffset, instanceProps, scrollbarSize);
  },
  getRowOffset: function getRowOffset(props, index, instanceProps) {
    return getItemMetadata('row', props, index, instanceProps).offset;
  },
  getRowHeight: function getRowHeight(props, index, instanceProps) {
    return instanceProps.rowMetadataMap[index].size;
  },
  getRowStartIndexForOffset: function getRowStartIndexForOffset(props, scrollTop, instanceProps) {
    return findNearestItem('row', props, instanceProps, scrollTop);
  },
  getRowStopIndexForStartIndex: function getRowStopIndexForStartIndex(props, startIndex, scrollTop, instanceProps) {
    var rowCount = props.rowCount,
        height = props.height;
    var itemMetadata = getItemMetadata('row', props, startIndex, instanceProps);
    var maxOffset = scrollTop + height;
    var offset = itemMetadata.offset + itemMetadata.size;
    var stopIndex = startIndex;

    while (stopIndex < rowCount - 1 && offset < maxOffset) {
      stopIndex++;
      offset += getItemMetadata('row', props, stopIndex, instanceProps).size;
    }

    return stopIndex;
  },
  initInstanceProps: function initInstanceProps(props, instance) {
    var _ref5 = props,
        estimatedColumnWidth = _ref5.estimatedColumnWidth,
        estimatedRowHeight = _ref5.estimatedRowHeight;
    var instanceProps = {
      columnMetadataMap: {},
      estimatedColumnWidth: estimatedColumnWidth || DEFAULT_ESTIMATED_ITEM_SIZE,
      estimatedRowHeight: estimatedRowHeight || DEFAULT_ESTIMATED_ITEM_SIZE,
      lastMeasuredColumnIndex: -1,
      lastMeasuredRowIndex: -1,
      rowMetadataMap: {}
    };

    instance.resetAfterColumnIndex = function (columnIndex, shouldForceUpdate) {
      if (shouldForceUpdate === void 0) {
        shouldForceUpdate = true;
      }

      instance.resetAfterIndices({
        columnIndex: columnIndex,
        shouldForceUpdate: shouldForceUpdate
      });
    };

    instance.resetAfterRowIndex = function (rowIndex, shouldForceUpdate) {
      if (shouldForceUpdate === void 0) {
        shouldForceUpdate = true;
      }

      instance.resetAfterIndices({
        rowIndex: rowIndex,
        shouldForceUpdate: shouldForceUpdate
      });
    };

    instance.resetAfterIndices = function (_ref6) {
      var columnIndex = _ref6.columnIndex,
          rowIndex = _ref6.rowIndex,
          _ref6$shouldForceUpda = _ref6.shouldForceUpdate,
          shouldForceUpdate = _ref6$shouldForceUpda === void 0 ? true : _ref6$shouldForceUpda;

      if (typeof columnIndex === 'number') {
        instanceProps.lastMeasuredColumnIndex = Math.min(instanceProps.lastMeasuredColumnIndex, columnIndex - 1);
      }

      if (typeof rowIndex === 'number') {
        instanceProps.lastMeasuredRowIndex = Math.min(instanceProps.lastMeasuredRowIndex, rowIndex - 1);
      } // We could potentially optimize further by only evicting styles after this index,
      // But since styles are only cached while scrolling is in progress-
      // It seems an unnecessary optimization.
      // It's unlikely that resetAfterIndex() will be called while a user is scrolling.


      instance._getItemStyleCache(-1);

      if (shouldForceUpdate) {
        instance.forceUpdate();
      }
    };

    return instanceProps;
  },
  shouldResetStyleCacheOnItemSizeChange: false,
  validateProps: function validateProps(_ref7) {
    var columnWidth = _ref7.columnWidth,
        rowHeight = _ref7.rowHeight;

    if (true) {
      if (typeof columnWidth !== 'function') {
        throw Error('An invalid "columnWidth" prop has been specified. ' + 'Value should be a function. ' + ("\"" + (columnWidth === null ? 'null' : typeof columnWidth) + "\" was specified."));
      } else if (typeof rowHeight !== 'function') {
        throw Error('An invalid "rowHeight" prop has been specified. ' + 'Value should be a function. ' + ("\"" + (rowHeight === null ? 'null' : typeof rowHeight) + "\" was specified."));
      }
    }
  }
});

var IS_SCROLLING_DEBOUNCE_INTERVAL$1 = 150;

var defaultItemKey$1 = function defaultItemKey(index, data) {
  return index;
}; // In DEV mode, this Set helps us only log a warning once per component instance.
// This avoids spamming the console every time a render happens.


var devWarningsDirection = null;
var devWarningsTagName$1 = null;

if (true) {
  if (typeof window !== 'undefined' && typeof window.WeakSet !== 'undefined') {
    devWarningsDirection = /*#__PURE__*/new WeakSet();
    devWarningsTagName$1 = /*#__PURE__*/new WeakSet();
  }
}

function createListComponent(_ref) {
  var _class;

  var getItemOffset = _ref.getItemOffset,
      getEstimatedTotalSize = _ref.getEstimatedTotalSize,
      getItemSize = _ref.getItemSize,
      getOffsetForIndexAndAlignment = _ref.getOffsetForIndexAndAlignment,
      getStartIndexForOffset = _ref.getStartIndexForOffset,
      getStopIndexForStartIndex = _ref.getStopIndexForStartIndex,
      initInstanceProps = _ref.initInstanceProps,
      shouldResetStyleCacheOnItemSizeChange = _ref.shouldResetStyleCacheOnItemSizeChange,
      validateProps = _ref.validateProps;
  return _class = /*#__PURE__*/function (_PureComponent) {
    (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_2__["default"])(List, _PureComponent);

    // Always use explicit constructor for React components.
    // It produces less code after transpilation. (#26)
    // eslint-disable-next-line no-useless-constructor
    function List(props) {
      var _this;

      _this = _PureComponent.call(this, props) || this;
      _this._instanceProps = initInstanceProps(_this.props, (0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_1__["default"])(_this));
      _this._outerRef = void 0;
      _this._resetIsScrollingTimeoutId = null;
      _this.state = {
        instance: (0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_1__["default"])(_this),
        isScrolling: false,
        scrollDirection: 'forward',
        scrollOffset: typeof _this.props.initialScrollOffset === 'number' ? _this.props.initialScrollOffset : 0,
        scrollUpdateWasRequested: false
      };
      _this._callOnItemsRendered = void 0;
      _this._callOnItemsRendered = (0,memoize_one__WEBPACK_IMPORTED_MODULE_5__["default"])(function (overscanStartIndex, overscanStopIndex, visibleStartIndex, visibleStopIndex) {
        return _this.props.onItemsRendered({
          overscanStartIndex: overscanStartIndex,
          overscanStopIndex: overscanStopIndex,
          visibleStartIndex: visibleStartIndex,
          visibleStopIndex: visibleStopIndex
        });
      });
      _this._callOnScroll = void 0;
      _this._callOnScroll = (0,memoize_one__WEBPACK_IMPORTED_MODULE_5__["default"])(function (scrollDirection, scrollOffset, scrollUpdateWasRequested) {
        return _this.props.onScroll({
          scrollDirection: scrollDirection,
          scrollOffset: scrollOffset,
          scrollUpdateWasRequested: scrollUpdateWasRequested
        });
      });
      _this._getItemStyle = void 0;

      _this._getItemStyle = function (index) {
        var _this$props = _this.props,
            direction = _this$props.direction,
            itemSize = _this$props.itemSize,
            layout = _this$props.layout;

        var itemStyleCache = _this._getItemStyleCache(shouldResetStyleCacheOnItemSizeChange && itemSize, shouldResetStyleCacheOnItemSizeChange && layout, shouldResetStyleCacheOnItemSizeChange && direction);

        var style;

        if (itemStyleCache.hasOwnProperty(index)) {
          style = itemStyleCache[index];
        } else {
          var _offset = getItemOffset(_this.props, index, _this._instanceProps);

          var size = getItemSize(_this.props, index, _this._instanceProps); // TODO Deprecate direction "horizontal"

          var isHorizontal = direction === 'horizontal' || layout === 'horizontal';
          var isRtl = direction === 'rtl';
          var offsetHorizontal = isHorizontal ? _offset : 0;
          itemStyleCache[index] = style = {
            position: 'absolute',
            left: isRtl ? undefined : offsetHorizontal,
            right: isRtl ? offsetHorizontal : undefined,
            top: !isHorizontal ? _offset : 0,
            height: !isHorizontal ? size : '100%',
            width: isHorizontal ? size : '100%'
          };
        }

        return style;
      };

      _this._getItemStyleCache = void 0;
      _this._getItemStyleCache = (0,memoize_one__WEBPACK_IMPORTED_MODULE_5__["default"])(function (_, __, ___) {
        return {};
      });

      _this._onScrollHorizontal = function (event) {
        var _event$currentTarget = event.currentTarget,
            clientWidth = _event$currentTarget.clientWidth,
            scrollLeft = _event$currentTarget.scrollLeft,
            scrollWidth = _event$currentTarget.scrollWidth;

        _this.setState(function (prevState) {
          if (prevState.scrollOffset === scrollLeft) {
            // Scroll position may have been updated by cDM/cDU,
            // In which case we don't need to trigger another render,
            // And we don't want to update state.isScrolling.
            return null;
          }

          var direction = _this.props.direction;
          var scrollOffset = scrollLeft;

          if (direction === 'rtl') {
            // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.
            // This is not the case for all browsers though (e.g. Chrome reports values as positive, measured relative to the left).
            // It's also easier for this component if we convert offsets to the same format as they would be in for ltr.
            // So the simplest solution is to determine which browser behavior we're dealing with, and convert based on it.
            switch (getRTLOffsetType()) {
              case 'negative':
                scrollOffset = -scrollLeft;
                break;

              case 'positive-descending':
                scrollOffset = scrollWidth - clientWidth - scrollLeft;
                break;
            }
          } // Prevent Safari's elastic scrolling from causing visual shaking when scrolling past bounds.


          scrollOffset = Math.max(0, Math.min(scrollOffset, scrollWidth - clientWidth));
          return {
            isScrolling: true,
            scrollDirection: prevState.scrollOffset < scrollLeft ? 'forward' : 'backward',
            scrollOffset: scrollOffset,
            scrollUpdateWasRequested: false
          };
        }, _this._resetIsScrollingDebounced);
      };

      _this._onScrollVertical = function (event) {
        var _event$currentTarget2 = event.currentTarget,
            clientHeight = _event$currentTarget2.clientHeight,
            scrollHeight = _event$currentTarget2.scrollHeight,
            scrollTop = _event$currentTarget2.scrollTop;

        _this.setState(function (prevState) {
          if (prevState.scrollOffset === scrollTop) {
            // Scroll position may have been updated by cDM/cDU,
            // In which case we don't need to trigger another render,
            // And we don't want to update state.isScrolling.
            return null;
          } // Prevent Safari's elastic scrolling from causing visual shaking when scrolling past bounds.


          var scrollOffset = Math.max(0, Math.min(scrollTop, scrollHeight - clientHeight));
          return {
            isScrolling: true,
            scrollDirection: prevState.scrollOffset < scrollOffset ? 'forward' : 'backward',
            scrollOffset: scrollOffset,
            scrollUpdateWasRequested: false
          };
        }, _this._resetIsScrollingDebounced);
      };

      _this._outerRefSetter = function (ref) {
        var outerRef = _this.props.outerRef;
        _this._outerRef = ref;

        if (typeof outerRef === 'function') {
          outerRef(ref);
        } else if (outerRef != null && typeof outerRef === 'object' && outerRef.hasOwnProperty('current')) {
          outerRef.current = ref;
        }
      };

      _this._resetIsScrollingDebounced = function () {
        if (_this._resetIsScrollingTimeoutId !== null) {
          cancelTimeout(_this._resetIsScrollingTimeoutId);
        }

        _this._resetIsScrollingTimeoutId = requestTimeout(_this._resetIsScrolling, IS_SCROLLING_DEBOUNCE_INTERVAL$1);
      };

      _this._resetIsScrolling = function () {
        _this._resetIsScrollingTimeoutId = null;

        _this.setState({
          isScrolling: false
        }, function () {
          // Clear style cache after state update has been committed.
          // This way we don't break pure sCU for items that don't use isScrolling param.
          _this._getItemStyleCache(-1, null);
        });
      };

      return _this;
    }

    List.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {
      validateSharedProps$1(nextProps, prevState);
      validateProps(nextProps);
      return null;
    };

    var _proto = List.prototype;

    _proto.scrollTo = function scrollTo(scrollOffset) {
      scrollOffset = Math.max(0, scrollOffset);
      this.setState(function (prevState) {
        if (prevState.scrollOffset === scrollOffset) {
          return null;
        }

        return {
          scrollDirection: prevState.scrollOffset < scrollOffset ? 'forward' : 'backward',
          scrollOffset: scrollOffset,
          scrollUpdateWasRequested: true
        };
      }, this._resetIsScrollingDebounced);
    };

    _proto.scrollToItem = function scrollToItem(index, align) {
      if (align === void 0) {
        align = 'auto';
      }

      var _this$props2 = this.props,
          itemCount = _this$props2.itemCount,
          layout = _this$props2.layout;
      var scrollOffset = this.state.scrollOffset;
      index = Math.max(0, Math.min(index, itemCount - 1)); // The scrollbar size should be considered when scrolling an item into view, to ensure it's fully visible.
      // But we only need to account for its size when it's actually visible.
      // This is an edge case for lists; normally they only scroll in the dominant direction.

      var scrollbarSize = 0;

      if (this._outerRef) {
        var outerRef = this._outerRef;

        if (layout === 'vertical') {
          scrollbarSize = outerRef.scrollWidth > outerRef.clientWidth ? getScrollbarSize() : 0;
        } else {
          scrollbarSize = outerRef.scrollHeight > outerRef.clientHeight ? getScrollbarSize() : 0;
        }
      }

      this.scrollTo(getOffsetForIndexAndAlignment(this.props, index, align, scrollOffset, this._instanceProps, scrollbarSize));
    };

    _proto.componentDidMount = function componentDidMount() {
      var _this$props3 = this.props,
          direction = _this$props3.direction,
          initialScrollOffset = _this$props3.initialScrollOffset,
          layout = _this$props3.layout;

      if (typeof initialScrollOffset === 'number' && this._outerRef != null) {
        var outerRef = this._outerRef; // TODO Deprecate direction "horizontal"

        if (direction === 'horizontal' || layout === 'horizontal') {
          outerRef.scrollLeft = initialScrollOffset;
        } else {
          outerRef.scrollTop = initialScrollOffset;
        }
      }

      this._callPropsCallbacks();
    };

    _proto.componentDidUpdate = function componentDidUpdate() {
      var _this$props4 = this.props,
          direction = _this$props4.direction,
          layout = _this$props4.layout;
      var _this$state = this.state,
          scrollOffset = _this$state.scrollOffset,
          scrollUpdateWasRequested = _this$state.scrollUpdateWasRequested;

      if (scrollUpdateWasRequested && this._outerRef != null) {
        var outerRef = this._outerRef; // TODO Deprecate direction "horizontal"

        if (direction === 'horizontal' || layout === 'horizontal') {
          if (direction === 'rtl') {
            // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.
            // This is not the case for all browsers though (e.g. Chrome reports values as positive, measured relative to the left).
            // So we need to determine which browser behavior we're dealing with, and mimic it.
            switch (getRTLOffsetType()) {
              case 'negative':
                outerRef.scrollLeft = -scrollOffset;
                break;

              case 'positive-ascending':
                outerRef.scrollLeft = scrollOffset;
                break;

              default:
                var clientWidth = outerRef.clientWidth,
                    scrollWidth = outerRef.scrollWidth;
                outerRef.scrollLeft = scrollWidth - clientWidth - scrollOffset;
                break;
            }
          } else {
            outerRef.scrollLeft = scrollOffset;
          }
        } else {
          outerRef.scrollTop = scrollOffset;
        }
      }

      this._callPropsCallbacks();
    };

    _proto.componentWillUnmount = function componentWillUnmount() {
      if (this._resetIsScrollingTimeoutId !== null) {
        cancelTimeout(this._resetIsScrollingTimeoutId);
      }
    };

    _proto.render = function render() {
      var _this$props5 = this.props,
          children = _this$props5.children,
          className = _this$props5.className,
          direction = _this$props5.direction,
          height = _this$props5.height,
          innerRef = _this$props5.innerRef,
          innerElementType = _this$props5.innerElementType,
          innerTagName = _this$props5.innerTagName,
          itemCount = _this$props5.itemCount,
          itemData = _this$props5.itemData,
          _this$props5$itemKey = _this$props5.itemKey,
          itemKey = _this$props5$itemKey === void 0 ? defaultItemKey$1 : _this$props5$itemKey,
          layout = _this$props5.layout,
          outerElementType = _this$props5.outerElementType,
          outerTagName = _this$props5.outerTagName,
          style = _this$props5.style,
          useIsScrolling = _this$props5.useIsScrolling,
          width = _this$props5.width;
      var isScrolling = this.state.isScrolling; // TODO Deprecate direction "horizontal"

      var isHorizontal = direction === 'horizontal' || layout === 'horizontal';
      var onScroll = isHorizontal ? this._onScrollHorizontal : this._onScrollVertical;

      var _this$_getRangeToRend = this._getRangeToRender(),
          startIndex = _this$_getRangeToRend[0],
          stopIndex = _this$_getRangeToRend[1];

      var items = [];

      if (itemCount > 0) {
        for (var _index = startIndex; _index <= stopIndex; _index++) {
          items.push((0,react__WEBPACK_IMPORTED_MODULE_3__.createElement)(children, {
            data: itemData,
            key: itemKey(_index, itemData),
            index: _index,
            isScrolling: useIsScrolling ? isScrolling : undefined,
            style: this._getItemStyle(_index)
          }));
        }
      } // Read this value AFTER items have been created,
      // So their actual sizes (if variable) are taken into consideration.


      var estimatedTotalSize = getEstimatedTotalSize(this.props, this._instanceProps);
      return (0,react__WEBPACK_IMPORTED_MODULE_3__.createElement)(outerElementType || outerTagName || 'div', {
        className: className,
        onScroll: onScroll,
        ref: this._outerRefSetter,
        style: (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({
          position: 'relative',
          height: height,
          width: width,
          overflow: 'auto',
          WebkitOverflowScrolling: 'touch',
          willChange: 'transform',
          direction: direction
        }, style)
      }, (0,react__WEBPACK_IMPORTED_MODULE_3__.createElement)(innerElementType || innerTagName || 'div', {
        children: items,
        ref: innerRef,
        style: {
          height: isHorizontal ? '100%' : estimatedTotalSize,
          pointerEvents: isScrolling ? 'none' : undefined,
          width: isHorizontal ? estimatedTotalSize : '100%'
        }
      }));
    };

    _proto._callPropsCallbacks = function _callPropsCallbacks() {
      if (typeof this.props.onItemsRendered === 'function') {
        var itemCount = this.props.itemCount;

        if (itemCount > 0) {
          var _this$_getRangeToRend2 = this._getRangeToRender(),
              _overscanStartIndex = _this$_getRangeToRend2[0],
              _overscanStopIndex = _this$_getRangeToRend2[1],
              _visibleStartIndex = _this$_getRangeToRend2[2],
              _visibleStopIndex = _this$_getRangeToRend2[3];

          this._callOnItemsRendered(_overscanStartIndex, _overscanStopIndex, _visibleStartIndex, _visibleStopIndex);
        }
      }

      if (typeof this.props.onScroll === 'function') {
        var _this$state2 = this.state,
            _scrollDirection = _this$state2.scrollDirection,
            _scrollOffset = _this$state2.scrollOffset,
            _scrollUpdateWasRequested = _this$state2.scrollUpdateWasRequested;

        this._callOnScroll(_scrollDirection, _scrollOffset, _scrollUpdateWasRequested);
      }
    } // Lazily create and cache item styles while scrolling,
    // So that pure component sCU will prevent re-renders.
    // We maintain this cache, and pass a style prop rather than index,
    // So that List can clear cached styles and force item re-render if necessary.
    ;

    _proto._getRangeToRender = function _getRangeToRender() {
      var _this$props6 = this.props,
          itemCount = _this$props6.itemCount,
          overscanCount = _this$props6.overscanCount;
      var _this$state3 = this.state,
          isScrolling = _this$state3.isScrolling,
          scrollDirection = _this$state3.scrollDirection,
          scrollOffset = _this$state3.scrollOffset;

      if (itemCount === 0) {
        return [0, 0, 0, 0];
      }

      var startIndex = getStartIndexForOffset(this.props, scrollOffset, this._instanceProps);
      var stopIndex = getStopIndexForStartIndex(this.props, startIndex, scrollOffset, this._instanceProps); // Overscan by one item in each direction so that tab/focus works.
      // If there isn't at least one extra item, tab loops back around.

      var overscanBackward = !isScrolling || scrollDirection === 'backward' ? Math.max(1, overscanCount) : 1;
      var overscanForward = !isScrolling || scrollDirection === 'forward' ? Math.max(1, overscanCount) : 1;
      return [Math.max(0, startIndex - overscanBackward), Math.max(0, Math.min(itemCount - 1, stopIndex + overscanForward)), startIndex, stopIndex];
    };

    return List;
  }(react__WEBPACK_IMPORTED_MODULE_3__.PureComponent), _class.defaultProps = {
    direction: 'ltr',
    itemData: undefined,
    layout: 'vertical',
    overscanCount: 2,
    useIsScrolling: false
  }, _class;
} // NOTE: I considered further wrapping individual items with a pure ListItem component.
// This would avoid ever calling the render function for the same index more than once,
// But it would also add the overhead of a lot of components/fibers.
// I assume people already do this (render function returning a class component),
// So my doing it would just unnecessarily double the wrappers.

var validateSharedProps$1 = function validateSharedProps(_ref2, _ref3) {
  var children = _ref2.children,
      direction = _ref2.direction,
      height = _ref2.height,
      layout = _ref2.layout,
      innerTagName = _ref2.innerTagName,
      outerTagName = _ref2.outerTagName,
      width = _ref2.width;
  var instance = _ref3.instance;

  if (true) {
    if (innerTagName != null || outerTagName != null) {
      if (devWarningsTagName$1 && !devWarningsTagName$1.has(instance)) {
        devWarningsTagName$1.add(instance);
        console.warn('The innerTagName and outerTagName props have been deprecated. ' + 'Please use the innerElementType and outerElementType props instead.');
      }
    } // TODO Deprecate direction "horizontal"


    var isHorizontal = direction === 'horizontal' || layout === 'horizontal';

    switch (direction) {
      case 'horizontal':
      case 'vertical':
        if (devWarningsDirection && !devWarningsDirection.has(instance)) {
          devWarningsDirection.add(instance);
          console.warn('The direction prop should be either "ltr" (default) or "rtl". ' + 'Please use the layout prop to specify "vertical" (default) or "horizontal" orientation.');
        }

        break;

      case 'ltr':
      case 'rtl':
        // Valid values
        break;

      default:
        throw Error('An invalid "direction" prop has been specified. ' + 'Value should be either "ltr" or "rtl". ' + ("\"" + direction + "\" was specified."));
    }

    switch (layout) {
      case 'horizontal':
      case 'vertical':
        // Valid values
        break;

      default:
        throw Error('An invalid "layout" prop has been specified. ' + 'Value should be either "horizontal" or "vertical". ' + ("\"" + layout + "\" was specified."));
    }

    if (children == null) {
      throw Error('An invalid "children" prop has been specified. ' + 'Value should be a React component. ' + ("\"" + (children === null ? 'null' : typeof children) + "\" was specified."));
    }

    if (isHorizontal && typeof width !== 'number') {
      throw Error('An invalid "width" prop has been specified. ' + 'Horizontal lists must specify a number for width. ' + ("\"" + (width === null ? 'null' : typeof width) + "\" was specified."));
    } else if (!isHorizontal && typeof height !== 'number') {
      throw Error('An invalid "height" prop has been specified. ' + 'Vertical lists must specify a number for height. ' + ("\"" + (height === null ? 'null' : typeof height) + "\" was specified."));
    }
  }
};

var DEFAULT_ESTIMATED_ITEM_SIZE$1 = 50;

var getItemMetadata$1 = function getItemMetadata(props, index, instanceProps) {
  var _ref = props,
      itemSize = _ref.itemSize;
  var itemMetadataMap = instanceProps.itemMetadataMap,
      lastMeasuredIndex = instanceProps.lastMeasuredIndex;

  if (index > lastMeasuredIndex) {
    var offset = 0;

    if (lastMeasuredIndex >= 0) {
      var itemMetadata = itemMetadataMap[lastMeasuredIndex];
      offset = itemMetadata.offset + itemMetadata.size;
    }

    for (var i = lastMeasuredIndex + 1; i <= index; i++) {
      var size = itemSize(i);
      itemMetadataMap[i] = {
        offset: offset,
        size: size
      };
      offset += size;
    }

    instanceProps.lastMeasuredIndex = index;
  }

  return itemMetadataMap[index];
};

var findNearestItem$1 = function findNearestItem(props, instanceProps, offset) {
  var itemMetadataMap = instanceProps.itemMetadataMap,
      lastMeasuredIndex = instanceProps.lastMeasuredIndex;
  var lastMeasuredItemOffset = lastMeasuredIndex > 0 ? itemMetadataMap[lastMeasuredIndex].offset : 0;

  if (lastMeasuredItemOffset >= offset) {
    // If we've already measured items within this range just use a binary search as it's faster.
    return findNearestItemBinarySearch$1(props, instanceProps, lastMeasuredIndex, 0, offset);
  } else {
    // If we haven't yet measured this high, fallback to an exponential search with an inner binary search.
    // The exponential search avoids pre-computing sizes for the full set of items as a binary search would.
    // The overall complexity for this approach is O(log n).
    return findNearestItemExponentialSearch$1(props, instanceProps, Math.max(0, lastMeasuredIndex), offset);
  }
};

var findNearestItemBinarySearch$1 = function findNearestItemBinarySearch(props, instanceProps, high, low, offset) {
  while (low <= high) {
    var middle = low + Math.floor((high - low) / 2);
    var currentOffset = getItemMetadata$1(props, middle, instanceProps).offset;

    if (currentOffset === offset) {
      return middle;
    } else if (currentOffset < offset) {
      low = middle + 1;
    } else if (currentOffset > offset) {
      high = middle - 1;
    }
  }

  if (low > 0) {
    return low - 1;
  } else {
    return 0;
  }
};

var findNearestItemExponentialSearch$1 = function findNearestItemExponentialSearch(props, instanceProps, index, offset) {
  var itemCount = props.itemCount;
  var interval = 1;

  while (index < itemCount && getItemMetadata$1(props, index, instanceProps).offset < offset) {
    index += interval;
    interval *= 2;
  }

  return findNearestItemBinarySearch$1(props, instanceProps, Math.min(index, itemCount - 1), Math.floor(index / 2), offset);
};

var getEstimatedTotalSize = function getEstimatedTotalSize(_ref2, _ref3) {
  var itemCount = _ref2.itemCount;
  var itemMetadataMap = _ref3.itemMetadataMap,
      estimatedItemSize = _ref3.estimatedItemSize,
      lastMeasuredIndex = _ref3.lastMeasuredIndex;
  var totalSizeOfMeasuredItems = 0; // Edge case check for when the number of items decreases while a scroll is in progress.
  // https://github.com/bvaughn/react-window/pull/138

  if (lastMeasuredIndex >= itemCount) {
    lastMeasuredIndex = itemCount - 1;
  }

  if (lastMeasuredIndex >= 0) {
    var itemMetadata = itemMetadataMap[lastMeasuredIndex];
    totalSizeOfMeasuredItems = itemMetadata.offset + itemMetadata.size;
  }

  var numUnmeasuredItems = itemCount - lastMeasuredIndex - 1;
  var totalSizeOfUnmeasuredItems = numUnmeasuredItems * estimatedItemSize;
  return totalSizeOfMeasuredItems + totalSizeOfUnmeasuredItems;
};

var VariableSizeList = /*#__PURE__*/createListComponent({
  getItemOffset: function getItemOffset(props, index, instanceProps) {
    return getItemMetadata$1(props, index, instanceProps).offset;
  },
  getItemSize: function getItemSize(props, index, instanceProps) {
    return instanceProps.itemMetadataMap[index].size;
  },
  getEstimatedTotalSize: getEstimatedTotalSize,
  getOffsetForIndexAndAlignment: function getOffsetForIndexAndAlignment(props, index, align, scrollOffset, instanceProps, scrollbarSize) {
    var direction = props.direction,
        height = props.height,
        layout = props.layout,
        width = props.width; // TODO Deprecate direction "horizontal"

    var isHorizontal = direction === 'horizontal' || layout === 'horizontal';
    var size = isHorizontal ? width : height;
    var itemMetadata = getItemMetadata$1(props, index, instanceProps); // Get estimated total size after ItemMetadata is computed,
    // To ensure it reflects actual measurements instead of just estimates.

    var estimatedTotalSize = getEstimatedTotalSize(props, instanceProps);
    var maxOffset = Math.max(0, Math.min(estimatedTotalSize - size, itemMetadata.offset));
    var minOffset = Math.max(0, itemMetadata.offset - size + itemMetadata.size + scrollbarSize);

    if (align === 'smart') {
      if (scrollOffset >= minOffset - size && scrollOffset <= maxOffset + size) {
        align = 'auto';
      } else {
        align = 'center';
      }
    }

    switch (align) {
      case 'start':
        return maxOffset;

      case 'end':
        return minOffset;

      case 'center':
        return Math.round(minOffset + (maxOffset - minOffset) / 2);

      case 'auto':
      default:
        if (scrollOffset >= minOffset && scrollOffset <= maxOffset) {
          return scrollOffset;
        } else if (scrollOffset < minOffset) {
          return minOffset;
        } else {
          return maxOffset;
        }

    }
  },
  getStartIndexForOffset: function getStartIndexForOffset(props, offset, instanceProps) {
    return findNearestItem$1(props, instanceProps, offset);
  },
  getStopIndexForStartIndex: function getStopIndexForStartIndex(props, startIndex, scrollOffset, instanceProps) {
    var direction = props.direction,
        height = props.height,
        itemCount = props.itemCount,
        layout = props.layout,
        width = props.width; // TODO Deprecate direction "horizontal"

    var isHorizontal = direction === 'horizontal' || layout === 'horizontal';
    var size = isHorizontal ? width : height;
    var itemMetadata = getItemMetadata$1(props, startIndex, instanceProps);
    var maxOffset = scrollOffset + size;
    var offset = itemMetadata.offset + itemMetadata.size;
    var stopIndex = startIndex;

    while (stopIndex < itemCount - 1 && offset < maxOffset) {
      stopIndex++;
      offset += getItemMetadata$1(props, stopIndex, instanceProps).size;
    }

    return stopIndex;
  },
  initInstanceProps: function initInstanceProps(props, instance) {
    var _ref4 = props,
        estimatedItemSize = _ref4.estimatedItemSize;
    var instanceProps = {
      itemMetadataMap: {},
      estimatedItemSize: estimatedItemSize || DEFAULT_ESTIMATED_ITEM_SIZE$1,
      lastMeasuredIndex: -1
    };

    instance.resetAfterIndex = function (index, shouldForceUpdate) {
      if (shouldForceUpdate === void 0) {
        shouldForceUpdate = true;
      }

      instanceProps.lastMeasuredIndex = Math.min(instanceProps.lastMeasuredIndex, index - 1); // We could potentially optimize further by only evicting styles after this index,
      // But since styles are only cached while scrolling is in progress-
      // It seems an unnecessary optimization.
      // It's unlikely that resetAfterIndex() will be called while a user is scrolling.

      instance._getItemStyleCache(-1);

      if (shouldForceUpdate) {
        instance.forceUpdate();
      }
    };

    return instanceProps;
  },
  shouldResetStyleCacheOnItemSizeChange: false,
  validateProps: function validateProps(_ref5) {
    var itemSize = _ref5.itemSize;

    if (true) {
      if (typeof itemSize !== 'function') {
        throw Error('An invalid "itemSize" prop has been specified. ' + 'Value should be a function. ' + ("\"" + (itemSize === null ? 'null' : typeof itemSize) + "\" was specified."));
      }
    }
  }
});

var FixedSizeGrid = /*#__PURE__*/createGridComponent({
  getColumnOffset: function getColumnOffset(_ref, index) {
    var columnWidth = _ref.columnWidth;
    return index * columnWidth;
  },
  getColumnWidth: function getColumnWidth(_ref2, index) {
    var columnWidth = _ref2.columnWidth;
    return columnWidth;
  },
  getRowOffset: function getRowOffset(_ref3, index) {
    var rowHeight = _ref3.rowHeight;
    return index * rowHeight;
  },
  getRowHeight: function getRowHeight(_ref4, index) {
    var rowHeight = _ref4.rowHeight;
    return rowHeight;
  },
  getEstimatedTotalHeight: function getEstimatedTotalHeight(_ref5) {
    var rowCount = _ref5.rowCount,
        rowHeight = _ref5.rowHeight;
    return rowHeight * rowCount;
  },
  getEstimatedTotalWidth: function getEstimatedTotalWidth(_ref6) {
    var columnCount = _ref6.columnCount,
        columnWidth = _ref6.columnWidth;
    return columnWidth * columnCount;
  },
  getOffsetForColumnAndAlignment: function getOffsetForColumnAndAlignment(_ref7, columnIndex, align, scrollLeft, instanceProps, scrollbarSize) {
    var columnCount = _ref7.columnCount,
        columnWidth = _ref7.columnWidth,
        width = _ref7.width;
    var lastColumnOffset = Math.max(0, columnCount * columnWidth - width);
    var maxOffset = Math.min(lastColumnOffset, columnIndex * columnWidth);
    var minOffset = Math.max(0, columnIndex * columnWidth - width + scrollbarSize + columnWidth);

    if (align === 'smart') {
      if (scrollLeft >= minOffset - width && scrollLeft <= maxOffset + width) {
        align = 'auto';
      } else {
        align = 'center';
      }
    }

    switch (align) {
      case 'start':
        return maxOffset;

      case 'end':
        return minOffset;

      case 'center':
        // "Centered" offset is usually the average of the min and max.
        // But near the edges of the list, this doesn't hold true.
        var middleOffset = Math.round(minOffset + (maxOffset - minOffset) / 2);

        if (middleOffset < Math.ceil(width / 2)) {
          return 0; // near the beginning
        } else if (middleOffset > lastColumnOffset + Math.floor(width / 2)) {
          return lastColumnOffset; // near the end
        } else {
          return middleOffset;
        }

      case 'auto':
      default:
        if (scrollLeft >= minOffset && scrollLeft <= maxOffset) {
          return scrollLeft;
        } else if (minOffset > maxOffset) {
          // Because we only take into account the scrollbar size when calculating minOffset
          // this value can be larger than maxOffset when at the end of the list
          return minOffset;
        } else if (scrollLeft < minOffset) {
          return minOffset;
        } else {
          return maxOffset;
        }

    }
  },
  getOffsetForRowAndAlignment: function getOffsetForRowAndAlignment(_ref8, rowIndex, align, scrollTop, instanceProps, scrollbarSize) {
    var rowHeight = _ref8.rowHeight,
        height = _ref8.height,
        rowCount = _ref8.rowCount;
    var lastRowOffset = Math.max(0, rowCount * rowHeight - height);
    var maxOffset = Math.min(lastRowOffset, rowIndex * rowHeight);
    var minOffset = Math.max(0, rowIndex * rowHeight - height + scrollbarSize + rowHeight);

    if (align === 'smart') {
      if (scrollTop >= minOffset - height && scrollTop <= maxOffset + height) {
        align = 'auto';
      } else {
        align = 'center';
      }
    }

    switch (align) {
      case 'start':
        return maxOffset;

      case 'end':
        return minOffset;

      case 'center':
        // "Centered" offset is usually the average of the min and max.
        // But near the edges of the list, this doesn't hold true.
        var middleOffset = Math.round(minOffset + (maxOffset - minOffset) / 2);

        if (middleOffset < Math.ceil(height / 2)) {
          return 0; // near the beginning
        } else if (middleOffset > lastRowOffset + Math.floor(height / 2)) {
          return lastRowOffset; // near the end
        } else {
          return middleOffset;
        }

      case 'auto':
      default:
        if (scrollTop >= minOffset && scrollTop <= maxOffset) {
          return scrollTop;
        } else if (minOffset > maxOffset) {
          // Because we only take into account the scrollbar size when calculating minOffset
          // this value can be larger than maxOffset when at the end of the list
          return minOffset;
        } else if (scrollTop < minOffset) {
          return minOffset;
        } else {
          return maxOffset;
        }

    }
  },
  getColumnStartIndexForOffset: function getColumnStartIndexForOffset(_ref9, scrollLeft) {
    var columnWidth = _ref9.columnWidth,
        columnCount = _ref9.columnCount;
    return Math.max(0, Math.min(columnCount - 1, Math.floor(scrollLeft / columnWidth)));
  },
  getColumnStopIndexForStartIndex: function getColumnStopIndexForStartIndex(_ref10, startIndex, scrollLeft) {
    var columnWidth = _ref10.columnWidth,
        columnCount = _ref10.columnCount,
        width = _ref10.width;
    var left = startIndex * columnWidth;
    var numVisibleColumns = Math.ceil((width + scrollLeft - left) / columnWidth);
    return Math.max(0, Math.min(columnCount - 1, startIndex + numVisibleColumns - 1 // -1 is because stop index is inclusive
    ));
  },
  getRowStartIndexForOffset: function getRowStartIndexForOffset(_ref11, scrollTop) {
    var rowHeight = _ref11.rowHeight,
        rowCount = _ref11.rowCount;
    return Math.max(0, Math.min(rowCount - 1, Math.floor(scrollTop / rowHeight)));
  },
  getRowStopIndexForStartIndex: function getRowStopIndexForStartIndex(_ref12, startIndex, scrollTop) {
    var rowHeight = _ref12.rowHeight,
        rowCount = _ref12.rowCount,
        height = _ref12.height;
    var top = startIndex * rowHeight;
    var numVisibleRows = Math.ceil((height + scrollTop - top) / rowHeight);
    return Math.max(0, Math.min(rowCount - 1, startIndex + numVisibleRows - 1 // -1 is because stop index is inclusive
    ));
  },
  initInstanceProps: function initInstanceProps(props) {// Noop
  },
  shouldResetStyleCacheOnItemSizeChange: true,
  validateProps: function validateProps(_ref13) {
    var columnWidth = _ref13.columnWidth,
        rowHeight = _ref13.rowHeight;

    if (true) {
      if (typeof columnWidth !== 'number') {
        throw Error('An invalid "columnWidth" prop has been specified. ' + 'Value should be a number. ' + ("\"" + (columnWidth === null ? 'null' : typeof columnWidth) + "\" was specified."));
      }

      if (typeof rowHeight !== 'number') {
        throw Error('An invalid "rowHeight" prop has been specified. ' + 'Value should be a number. ' + ("\"" + (rowHeight === null ? 'null' : typeof rowHeight) + "\" was specified."));
      }
    }
  }
});

var FixedSizeList = /*#__PURE__*/createListComponent({
  getItemOffset: function getItemOffset(_ref, index) {
    var itemSize = _ref.itemSize;
    return index * itemSize;
  },
  getItemSize: function getItemSize(_ref2, index) {
    var itemSize = _ref2.itemSize;
    return itemSize;
  },
  getEstimatedTotalSize: function getEstimatedTotalSize(_ref3) {
    var itemCount = _ref3.itemCount,
        itemSize = _ref3.itemSize;
    return itemSize * itemCount;
  },
  getOffsetForIndexAndAlignment: function getOffsetForIndexAndAlignment(_ref4, index, align, scrollOffset, instanceProps, scrollbarSize) {
    var direction = _ref4.direction,
        height = _ref4.height,
        itemCount = _ref4.itemCount,
        itemSize = _ref4.itemSize,
        layout = _ref4.layout,
        width = _ref4.width;
    // TODO Deprecate direction "horizontal"
    var isHorizontal = direction === 'horizontal' || layout === 'horizontal';
    var size = isHorizontal ? width : height;
    var lastItemOffset = Math.max(0, itemCount * itemSize - size);
    var maxOffset = Math.min(lastItemOffset, index * itemSize);
    var minOffset = Math.max(0, index * itemSize - size + itemSize + scrollbarSize);

    if (align === 'smart') {
      if (scrollOffset >= minOffset - size && scrollOffset <= maxOffset + size) {
        align = 'auto';
      } else {
        align = 'center';
      }
    }

    switch (align) {
      case 'start':
        return maxOffset;

      case 'end':
        return minOffset;

      case 'center':
        {
          // "Centered" offset is usually the average of the min and max.
          // But near the edges of the list, this doesn't hold true.
          var middleOffset = Math.round(minOffset + (maxOffset - minOffset) / 2);

          if (middleOffset < Math.ceil(size / 2)) {
            return 0; // near the beginning
          } else if (middleOffset > lastItemOffset + Math.floor(size / 2)) {
            return lastItemOffset; // near the end
          } else {
            return middleOffset;
          }
        }

      case 'auto':
      default:
        if (scrollOffset >= minOffset && scrollOffset <= maxOffset) {
          return scrollOffset;
        } else if (scrollOffset < minOffset) {
          return minOffset;
        } else {
          return maxOffset;
        }

    }
  },
  getStartIndexForOffset: function getStartIndexForOffset(_ref5, offset) {
    var itemCount = _ref5.itemCount,
        itemSize = _ref5.itemSize;
    return Math.max(0, Math.min(itemCount - 1, Math.floor(offset / itemSize)));
  },
  getStopIndexForStartIndex: function getStopIndexForStartIndex(_ref6, startIndex, scrollOffset) {
    var direction = _ref6.direction,
        height = _ref6.height,
        itemCount = _ref6.itemCount,
        itemSize = _ref6.itemSize,
        layout = _ref6.layout,
        width = _ref6.width;
    // TODO Deprecate direction "horizontal"
    var isHorizontal = direction === 'horizontal' || layout === 'horizontal';
    var offset = startIndex * itemSize;
    var size = isHorizontal ? width : height;
    var numVisibleItems = Math.ceil((size + scrollOffset - offset) / itemSize);
    return Math.max(0, Math.min(itemCount - 1, startIndex + numVisibleItems - 1 // -1 is because stop index is inclusive
    ));
  },
  initInstanceProps: function initInstanceProps(props) {// Noop
  },
  shouldResetStyleCacheOnItemSizeChange: true,
  validateProps: function validateProps(_ref7) {
    var itemSize = _ref7.itemSize;

    if (true) {
      if (typeof itemSize !== 'number') {
        throw Error('An invalid "itemSize" prop has been specified. ' + 'Value should be a number. ' + ("\"" + (itemSize === null ? 'null' : typeof itemSize) + "\" was specified."));
      }
    }
  }
});

// Pulled from react-compat
// https://github.com/developit/preact-compat/blob/7c5de00e7c85e2ffd011bf3af02899b63f699d3a/src/index.js#L349
function shallowDiffers(prev, next) {
  for (var attribute in prev) {
    if (!(attribute in next)) {
      return true;
    }
  }

  for (var _attribute in next) {
    if (prev[_attribute] !== next[_attribute]) {
      return true;
    }
  }

  return false;
}

var _excluded = ["style"],
    _excluded2 = ["style"];
// It knows to compare individual style props and ignore the wrapper object.
// See https://reactjs.org/docs/react-api.html#reactmemo

function areEqual(prevProps, nextProps) {
  var prevStyle = prevProps.style,
      prevRest = (0,_babel_runtime_helpers_esm_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_4__["default"])(prevProps, _excluded);

  var nextStyle = nextProps.style,
      nextRest = (0,_babel_runtime_helpers_esm_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_4__["default"])(nextProps, _excluded2);

  return !shallowDiffers(prevStyle, nextStyle) && !shallowDiffers(prevRest, nextRest);
}

// It knows to compare individual style props and ignore the wrapper object.
// See https://reactjs.org/docs/react-component.html#shouldcomponentupdate

function shouldComponentUpdate(nextProps, nextState) {
  return !areEqual(this.props, nextProps) || shallowDiffers(this.state, nextState);
}


//# sourceMappingURL=index.esm.js.map


/***/ }),

/***/ "./jimu-icons/svg/outlined/brand/widget-filter.svg":
/*!*********************************************************!*\
  !*** ./jimu-icons/svg/outlined/brand/widget-filter.svg ***!
  \*********************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 20 20\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M18.5.995c0-.55-.43-.995-.96-.995H2.46a.94.94 0 0 0-.605.223 1.02 1.02 0 0 0-.14 1.4L6.5 7.72c.122.156.196.347.212.548l.835 10.815c.007.092.027.183.058.27a.951.951 0 0 0 1.237.582l2.112-.82a.99.99 0 0 0 .615-.797l1.325-10.062c.025-.193.105-.374.228-.52l5.141-6.087c.154-.181.238-.414.238-.655ZM2.5 1h14.999l-5.141 6.09-.117.153a2.016 2.016 0 0 0-.34.883l-1.325 10.062-2.035.792-.833-10.788-.02-.169a2.012 2.012 0 0 0-.402-.92L2.502 1.006 2.5 1Z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/brand/widget-list.svg":
/*!*******************************************************!*\
  !*** ./jimu-icons/svg/outlined/brand/widget-list.svg ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 20 20\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M6 0a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h4Zm0 1H2a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1Z\" clip-rule=\"evenodd\"></path><path fill=\"#000\" d=\"M10.5 2a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1h-9ZM10 5.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Z\"></path><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M6 12a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h4Zm0 1H2a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1Z\" clip-rule=\"evenodd\"></path><path fill=\"#000\" d=\"M10 14.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5ZM10.5 17a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1h-9Z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/arrow-left.svg":
/*!************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/arrow-left.svg ***!
  \************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M15 7.5a.522.522 0 0 1-.516.527H2.976L6.473 11.6a.535.535 0 0 1 0 .746.508.508 0 0 1-.73 0L1 7.5l4.743-4.846a.508.508 0 0 1 .73 0 .535.535 0 0 1 0 .746L2.976 6.973h11.508c.285 0 .516.236.516.527Z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/down.svg":
/*!******************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/down.svg ***!
  \******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M2.146 4.653a.485.485 0 0 1 .708 0L8 10.24l5.146-5.587a.485.485 0 0 1 .708 0 .538.538 0 0 1 0 .738l-5.5 5.956a.485.485 0 0 1-.708 0l-5.5-5.956a.538.538 0 0 1 0-.738Z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/left.svg":
/*!******************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/left.svg ***!
  \******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M11.347 2.146a.485.485 0 0 1 0 .708L5.76 8l5.587 5.146a.486.486 0 0 1 0 .708.538.538 0 0 1-.738 0l-5.956-5.5a.485.485 0 0 1 0-.708l5.956-5.5a.538.538 0 0 1 .738 0Z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/right.svg":
/*!*******************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/right.svg ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M4.653 13.854a.485.485 0 0 1 0-.708L10.24 8 4.653 2.854a.485.485 0 0 1 0-.708.538.538 0 0 1 .738 0l5.956 5.5a.485.485 0 0 1 0 .708l-5.956 5.5a.538.538 0 0 1-.738 0Z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/up.svg":
/*!****************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/up.svg ***!
  \****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M13.854 11.347a.486.486 0 0 1-.708 0L8 5.76l-5.146 5.587a.485.485 0 0 1-.708 0 .538.538 0 0 1 0-.738l5.5-5.956a.485.485 0 0 1 .708 0l5.5 5.956a.538.538 0 0 1 0 .738Z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/close.svg":
/*!**************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/close.svg ***!
  \**************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"m8.745 8 6.1 6.1a.527.527 0 1 1-.745.746L8 8.746l-6.1 6.1a.527.527 0 1 1-.746-.746l6.1-6.1-6.1-6.1a.527.527 0 0 1 .746-.746l6.1 6.1 6.1-6.1a.527.527 0 0 1 .746.746L8.746 8Z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/menu.svg":
/*!*************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/menu.svg ***!
  \*************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M.438 1C.196 1 0 1.224 0 1.5s.196.5.438.5h15.124c.242 0 .438-.224.438-.5s-.196-.5-.438-.5H.438ZM0 7.5c0-.276.196-.5.438-.5h15.124c.242 0 .438.224.438.5s-.196.5-.438.5H.438C.196 8 0 7.776 0 7.5ZM0 13.5c0-.276.196-.5.438-.5h15.124c.242 0 .438.224.438.5s-.196.5-.438.5H.438C.196 14 0 13.776 0 13.5Z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/reset.svg":
/*!**************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/reset.svg ***!
  \**************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M14.938 8A7 7 0 0 1 1.01 9H0a8.001 8.001 0 0 0 15.938-1A8 8 0 0 0 1.02 3.98L1 .702a.5.5 0 1 0-1 .006L.031 5.9l5.128-.826a.5.5 0 0 0-.16-.987L1.819 4.6A7 7 0 0 1 14.938 8Z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/search.svg":
/*!***************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/search.svg ***!
  \***************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0Zm-1.27 4.936a6.5 6.5 0 1 1 .707-.707l4.136 4.137a.5.5 0 1 1-.707.707l-4.137-4.137Z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/show-selection--rtl.svg":
/*!****************************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/show-selection--rtl.svg ***!
  \****************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M15.88 2.825a.5.5 0 0 0-.759-.65l-2.323 2.71-1.265-1.265a.5.5 0 1 0-.707.707l1.265 1.265a1 1 0 0 0 1.466-.056l2.323-2.71Zm0 8a.5.5 0 0 0-.759-.65l-2.323 2.71-1.265-1.265a.5.5 0 1 0-.707.708l1.265 1.264a1 1 0 0 0 1.466-.056l2.323-2.71ZM9 4.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1 0-1h8a.5.5 0 0 1 .5.5ZM8.5 13a.5.5 0 0 0 0-1h-8a.5.5 0 0 0 0 1h8Z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/show-selection.svg":
/*!***********************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/show-selection.svg ***!
  \***********************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M16 4.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1 0-1h8a.5.5 0 0 1 .5.5ZM16 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1 0-1h8a.5.5 0 0 1 .5.5ZM5.146 2.12a.5.5 0 0 1 .055.705l-2.324 2.71a1 1 0 0 1-1.466.057L.146 4.327a.5.5 0 0 1 .708-.707l1.264 1.265 2.323-2.71a.5.5 0 0 1 .705-.055ZM5.146 10.12a.5.5 0 0 1 .055.705l-2.324 2.71a1 1 0 0 1-1.466.057L.146 12.328a.5.5 0 1 1 .708-.708l1.264 1.265 2.323-2.71a.5.5 0 0 1 .705-.055Z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/sync-off.svg":
/*!*****************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/sync-off.svg ***!
  \*****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"m2.116 1.5.969 1.678H1.05v3H0l1.5 2 1.5-2h-.951v-2h1.614l4.618 8H2.049v-2H1.05v3h7.809l1.257 2.178.866-.5L2.982 1l-.866.5Zm9.982 8.678h.95v2h-2.611l.576 1h3.036v-3h1.05l-1.501-2-1.5 2Zm.951-4v-2H5.817l-.578-1h8.81v3h-1Z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/sync-on.svg":
/*!****************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/sync-on.svg ***!
  \****************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M1.049 6V3h13v3h-1V4h-11v2H3L1.5 7.999 0 6h1.049Zm12 4h-.952l1.5-2 1.5 2h-1.049v3H1.05v-3h1v2h11v-2Z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/trash-check.svg":
/*!********************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/trash-check.svg ***!
  \********************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"m11.366 7.841-.732-.682-3.125 3.349-1.635-1.84-.748.664 2.365 2.66 3.875-4.15Z\"></path><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M4.5 3V1.167C4.5.469 5.204 0 6 0h4c.796 0 1.5.47 1.5 1.167V3h4a.5.5 0 0 1 0 1H14l-.929 11.077a1 1 0 0 1-.997.923H3.926a1 1 0 0 1-.997-.923L2 4H.5a.5.5 0 0 1 0-1h4ZM3.003 4h9.994l-.923 11H3.926L3.003 4ZM10.5 1v2h-5V1c0-.04 5-.04 5 0Z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/suggested/warning.svg":
/*!*******************************************************!*\
  !*** ./jimu-icons/svg/outlined/suggested/warning.svg ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M8 2.125 14.334 14H1.667L8 2.125Zm-.882-.47a1 1 0 0 1 1.765 0l6.333 11.874A1 1 0 0 1 14.334 15H1.667a1 1 0 0 1-.882-1.47L7.118 1.653ZM8 4.874a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0L8.9 5.87a.905.905 0 0 0-.9-.995Zm1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./your-extensions/widgets/list-112/src/runtime/assets/icon.svg":
/*!**********************************************************************!*\
  !*** ./your-extensions/widgets/list-112/src/runtime/assets/icon.svg ***!
  \**********************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill=\"#FFF\" fill-rule=\"nonzero\" d=\"M2 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm0 1a2 2 0 1 1 0-4 2 2 0 0 1 0 4Zm5-3a1 1 0 0 0 0 2h7a1 1 0 0 0 0-2H7Zm0-1h7a2 2 0 1 1 0 4H7a2 2 0 1 1 0-4Zm0 7a1 1 0 0 0 0 2h7a1 1 0 0 0 0-2H7Zm0-1h7a2 2 0 1 1 0 4H7a2 2 0 1 1 0-4Zm0 7a1 1 0 0 0 0 2h7a1 1 0 0 0 0-2H7Zm0-1h7a2 2 0 1 1 0 4H7a2 2 0 1 1 0-4ZM2 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm0 1a2 2 0 1 1 0-4 2 2 0 0 1 0 4Zm0 5a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm0 1a2 2 0 1 1 0-4 2 2 0 0 1 0 4Z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/outlined/brand/widget-filter.tsx":
/*!*****************************************************!*\
  !*** ./jimu-icons/outlined/brand/widget-filter.tsx ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WidgetFilterOutlined": () => (/* binding */ WidgetFilterOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_brand_widget_filter_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/outlined/brand/widget-filter.svg */ "./jimu-icons/svg/outlined/brand/widget-filter.svg");
/* harmony import */ var _svg_outlined_brand_widget_filter_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_brand_widget_filter_svg__WEBPACK_IMPORTED_MODULE_1__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


const WidgetFilterOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_outlined_brand_widget_filter_svg__WEBPACK_IMPORTED_MODULE_1___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/arrow-left.tsx":
/*!********************************************************!*\
  !*** ./jimu-icons/outlined/directional/arrow-left.tsx ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ArrowLeftOutlined": () => (/* binding */ ArrowLeftOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/outlined/directional/arrow-left.svg */ "./jimu-icons/svg/outlined/directional/arrow-left.svg");
/* harmony import */ var _svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_1__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


const ArrowLeftOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_1___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/down.tsx":
/*!**************************************************!*\
  !*** ./jimu-icons/outlined/directional/down.tsx ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DownOutlined": () => (/* binding */ DownOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_down_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/outlined/directional/down.svg */ "./jimu-icons/svg/outlined/directional/down.svg");
/* harmony import */ var _svg_outlined_directional_down_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_down_svg__WEBPACK_IMPORTED_MODULE_1__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


const DownOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_down_svg__WEBPACK_IMPORTED_MODULE_1___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/left.tsx":
/*!**************************************************!*\
  !*** ./jimu-icons/outlined/directional/left.tsx ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "LeftOutlined": () => (/* binding */ LeftOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_left_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/outlined/directional/left.svg */ "./jimu-icons/svg/outlined/directional/left.svg");
/* harmony import */ var _svg_outlined_directional_left_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_left_svg__WEBPACK_IMPORTED_MODULE_1__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


const LeftOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_left_svg__WEBPACK_IMPORTED_MODULE_1___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/right.tsx":
/*!***************************************************!*\
  !*** ./jimu-icons/outlined/directional/right.tsx ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RightOutlined": () => (/* binding */ RightOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/outlined/directional/right.svg */ "./jimu-icons/svg/outlined/directional/right.svg");
/* harmony import */ var _svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_1__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


const RightOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_1___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/up.tsx":
/*!************************************************!*\
  !*** ./jimu-icons/outlined/directional/up.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "UpOutlined": () => (/* binding */ UpOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_up_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/outlined/directional/up.svg */ "./jimu-icons/svg/outlined/directional/up.svg");
/* harmony import */ var _svg_outlined_directional_up_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_up_svg__WEBPACK_IMPORTED_MODULE_1__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


const UpOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_up_svg__WEBPACK_IMPORTED_MODULE_1___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/editor/close.tsx":
/*!**********************************************!*\
  !*** ./jimu-icons/outlined/editor/close.tsx ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CloseOutlined": () => (/* binding */ CloseOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_editor_close_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/outlined/editor/close.svg */ "./jimu-icons/svg/outlined/editor/close.svg");
/* harmony import */ var _svg_outlined_editor_close_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_editor_close_svg__WEBPACK_IMPORTED_MODULE_1__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


const CloseOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_outlined_editor_close_svg__WEBPACK_IMPORTED_MODULE_1___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/editor/menu.tsx":
/*!*********************************************!*\
  !*** ./jimu-icons/outlined/editor/menu.tsx ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MenuOutlined": () => (/* binding */ MenuOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_editor_menu_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/outlined/editor/menu.svg */ "./jimu-icons/svg/outlined/editor/menu.svg");
/* harmony import */ var _svg_outlined_editor_menu_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_editor_menu_svg__WEBPACK_IMPORTED_MODULE_1__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


const MenuOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_outlined_editor_menu_svg__WEBPACK_IMPORTED_MODULE_1___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/editor/reset.tsx":
/*!**********************************************!*\
  !*** ./jimu-icons/outlined/editor/reset.tsx ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ResetOutlined": () => (/* binding */ ResetOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_editor_reset_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/outlined/editor/reset.svg */ "./jimu-icons/svg/outlined/editor/reset.svg");
/* harmony import */ var _svg_outlined_editor_reset_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_editor_reset_svg__WEBPACK_IMPORTED_MODULE_1__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


const ResetOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_outlined_editor_reset_svg__WEBPACK_IMPORTED_MODULE_1___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/editor/search.tsx":
/*!***********************************************!*\
  !*** ./jimu-icons/outlined/editor/search.tsx ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SearchOutlined": () => (/* binding */ SearchOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_editor_search_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/outlined/editor/search.svg */ "./jimu-icons/svg/outlined/editor/search.svg");
/* harmony import */ var _svg_outlined_editor_search_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_editor_search_svg__WEBPACK_IMPORTED_MODULE_1__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


const SearchOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_outlined_editor_search_svg__WEBPACK_IMPORTED_MODULE_1___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/editor/show-selection.tsx":
/*!*******************************************************!*\
  !*** ./jimu-icons/outlined/editor/show-selection.tsx ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ShowSelectionOutlined": () => (/* binding */ ShowSelectionOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_editor_show_selection_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/outlined/editor/show-selection.svg */ "./jimu-icons/svg/outlined/editor/show-selection.svg");
/* harmony import */ var _svg_outlined_editor_show_selection_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_editor_show_selection_svg__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _svg_outlined_editor_show_selection_rtl_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/editor/show-selection--rtl.svg */ "./jimu-icons/svg/outlined/editor/show-selection--rtl.svg");
/* harmony import */ var _svg_outlined_editor_show_selection_rtl_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_editor_show_selection_rtl_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const ShowSelectionOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component has-rtl-svg', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_outlined_editor_show_selection_svg__WEBPACK_IMPORTED_MODULE_1___default()), srcRTL: (_svg_outlined_editor_show_selection_rtl_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/editor/sync-off.tsx":
/*!*************************************************!*\
  !*** ./jimu-icons/outlined/editor/sync-off.tsx ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SyncOffOutlined": () => (/* binding */ SyncOffOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_editor_sync_off_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/outlined/editor/sync-off.svg */ "./jimu-icons/svg/outlined/editor/sync-off.svg");
/* harmony import */ var _svg_outlined_editor_sync_off_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_editor_sync_off_svg__WEBPACK_IMPORTED_MODULE_1__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


const SyncOffOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_outlined_editor_sync_off_svg__WEBPACK_IMPORTED_MODULE_1___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/editor/sync-on.tsx":
/*!************************************************!*\
  !*** ./jimu-icons/outlined/editor/sync-on.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SyncOnOutlined": () => (/* binding */ SyncOnOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_editor_sync_on_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/outlined/editor/sync-on.svg */ "./jimu-icons/svg/outlined/editor/sync-on.svg");
/* harmony import */ var _svg_outlined_editor_sync_on_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_editor_sync_on_svg__WEBPACK_IMPORTED_MODULE_1__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


const SyncOnOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_outlined_editor_sync_on_svg__WEBPACK_IMPORTED_MODULE_1___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/editor/trash-check.tsx":
/*!****************************************************!*\
  !*** ./jimu-icons/outlined/editor/trash-check.tsx ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TrashCheckOutlined": () => (/* binding */ TrashCheckOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_editor_trash_check_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/outlined/editor/trash-check.svg */ "./jimu-icons/svg/outlined/editor/trash-check.svg");
/* harmony import */ var _svg_outlined_editor_trash_check_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_editor_trash_check_svg__WEBPACK_IMPORTED_MODULE_1__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


const TrashCheckOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_outlined_editor_trash_check_svg__WEBPACK_IMPORTED_MODULE_1___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/suggested/warning.tsx":
/*!***************************************************!*\
  !*** ./jimu-icons/outlined/suggested/warning.tsx ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WarningOutlined": () => (/* binding */ WarningOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/outlined/suggested/warning.svg */ "./jimu-icons/svg/outlined/suggested/warning.svg");
/* harmony import */ var _svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_1__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


const WarningOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_1___default()) }, others));
};


/***/ }),

/***/ "./your-extensions/widgets/list-112/src/config.ts":
/*!********************************************************!*\
  !*** ./your-extensions/widgets/list-112/src/config.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AlignType": () => (/* binding */ AlignType),
/* harmony export */   "BOTTOM_TOOL_H": () => (/* binding */ BOTTOM_TOOL_H),
/* harmony export */   "BOTTOM_TOOL_TOP_PADDING": () => (/* binding */ BOTTOM_TOOL_TOP_PADDING),
/* harmony export */   "COMMON_PADDING": () => (/* binding */ COMMON_PADDING),
/* harmony export */   "DEFAULT_CARD_SIZE": () => (/* binding */ DEFAULT_CARD_SIZE),
/* harmony export */   "DEFAULT_SPACE": () => (/* binding */ DEFAULT_SPACE),
/* harmony export */   "DS_TOOL_BOTTOM_PADDING": () => (/* binding */ DS_TOOL_BOTTOM_PADDING),
/* harmony export */   "DS_TOOL_H": () => (/* binding */ DS_TOOL_H),
/* harmony export */   "DirectionType": () => (/* binding */ DirectionType),
/* harmony export */   "HoverType": () => (/* binding */ HoverType),
/* harmony export */   "ItemStyle": () => (/* binding */ ItemStyle),
/* harmony export */   "LIST_CARD_MIN_SIZE": () => (/* binding */ LIST_CARD_MIN_SIZE),
/* harmony export */   "LIST_CARD_PADDING": () => (/* binding */ LIST_CARD_PADDING),
/* harmony export */   "LIST_TOOL_MIN_SIZE_DATA_ACTION": () => (/* binding */ LIST_TOOL_MIN_SIZE_DATA_ACTION),
/* harmony export */   "LIST_TOOL_MIN_SIZE_NO_DATA_ACTION": () => (/* binding */ LIST_TOOL_MIN_SIZE_NO_DATA_ACTION),
/* harmony export */   "ListLayout": () => (/* binding */ ListLayout),
/* harmony export */   "ListLayoutType": () => (/* binding */ ListLayoutType),
/* harmony export */   "PageStyle": () => (/* binding */ PageStyle),
/* harmony export */   "PageTransitonType": () => (/* binding */ PageTransitonType),
/* harmony export */   "SCROLL_BAR_WIDTH": () => (/* binding */ SCROLL_BAR_WIDTH),
/* harmony export */   "SelectedStyle": () => (/* binding */ SelectedStyle),
/* harmony export */   "SelectionModeType": () => (/* binding */ SelectionModeType),
/* harmony export */   "SettingCollapseType": () => (/* binding */ SettingCollapseType),
/* harmony export */   "Status": () => (/* binding */ Status)
/* harmony export */ });
const LIST_CARD_PADDING = 0;
const LIST_CARD_MIN_SIZE = 20;
const DS_TOOL_H = 42;
const BOTTOM_TOOL_H = 40;
const COMMON_PADDING = 0;
const DS_TOOL_BOTTOM_PADDING = 14;
const BOTTOM_TOOL_TOP_PADDING = 14;
const LIST_TOOL_MIN_SIZE_NO_DATA_ACTION = 175;
const LIST_TOOL_MIN_SIZE_DATA_ACTION = 220;
const DEFAULT_CARD_SIZE = 200;
const DEFAULT_SPACE = 10;
const SCROLL_BAR_WIDTH = 8;
var SettingCollapseType;
(function (SettingCollapseType) {
    SettingCollapseType["None"] = "NONE";
    SettingCollapseType["Arrangement"] = "ARRANGEMENT";
    SettingCollapseType["States"] = "STATES";
    SettingCollapseType["Tools"] = "TOOLS";
})(SettingCollapseType || (SettingCollapseType = {}));
var ListLayout;
(function (ListLayout) {
    ListLayout["AUTO"] = "Auto";
    ListLayout["CUSTOM"] = "Custom";
})(ListLayout || (ListLayout = {}));
var SelectionModeType;
(function (SelectionModeType) {
    SelectionModeType["None"] = "NONE";
    SelectionModeType["Single"] = "SINGLE";
    SelectionModeType["Multiple"] = "MULTIPLE";
})(SelectionModeType || (SelectionModeType = {}));
var PageStyle;
(function (PageStyle) {
    PageStyle["Scroll"] = "SCROLL";
    PageStyle["MultiPage"] = "MULTIPAGE";
})(PageStyle || (PageStyle = {}));
var AlignType;
(function (AlignType) {
    AlignType["Start"] = "FLEX-START";
    AlignType["Center"] = "CENTER";
    AlignType["End"] = "FLEX-END";
})(AlignType || (AlignType = {}));
var DirectionType;
(function (DirectionType) {
    DirectionType["Horizon"] = "HORIZON";
    DirectionType["Vertical"] = "VERTICAL";
})(DirectionType || (DirectionType = {}));
var ListLayoutType;
(function (ListLayoutType) {
    ListLayoutType["Row"] = "ROW";
    ListLayoutType["Column"] = "COLUMN";
    ListLayoutType["GRID"] = "GRID";
})(ListLayoutType || (ListLayoutType = {}));
var PageTransitonType;
(function (PageTransitonType) {
    PageTransitonType["Glide"] = "GLIDE";
    PageTransitonType["Fade"] = "FADE";
    PageTransitonType["Float"] = "FLOAT";
})(PageTransitonType || (PageTransitonType = {}));
var HoverType;
(function (HoverType) {
    HoverType["Hover0"] = "HOVER0";
    HoverType["Hover1"] = "HOVER1";
    HoverType["Hover2"] = "HOVER2";
    HoverType["Hover3"] = "HOVER3";
})(HoverType || (HoverType = {}));
var SelectedStyle;
(function (SelectedStyle) {
    SelectedStyle["Style0"] = "STYLE0";
    SelectedStyle["Style1"] = "STYLE1";
    SelectedStyle["Style2"] = "STYLE2";
    SelectedStyle["Style3"] = "STYLE3";
})(SelectedStyle || (SelectedStyle = {}));
var ItemStyle;
(function (ItemStyle) {
    ItemStyle["Style0"] = "STYLE0";
    ItemStyle["Style1"] = "STYLE1";
    ItemStyle["Style2"] = "STYLE2";
    ItemStyle["Style3"] = "STYLE3";
    ItemStyle["Style4"] = "STYLE4";
    ItemStyle["Style5"] = "STYLE5";
    ItemStyle["Style6"] = "STYLE6";
    ItemStyle["Style7"] = "STYLE7";
    ItemStyle["Style8"] = "STYLE8";
    ItemStyle["Style9"] = "STYLE9";
})(ItemStyle || (ItemStyle = {}));
var Status;
(function (Status) {
    Status["Regular"] = "REGULAR";
    Status["Selected"] = "SELECTED";
    Status["Hover"] = "HOVER";
})(Status || (Status = {}));


/***/ }),

/***/ "./your-extensions/widgets/list-112/src/runtime/components/bottom-tools.tsx":
/*!**********************************************************************************!*\
  !*** ./your-extensions/widgets/list-112/src/runtime/components/bottom-tools.tsx ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ListBottomTools": () => (/* binding */ ListBottomTools)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../config */ "./your-extensions/widgets/list-112/src/config.ts");
/* harmony import */ var jimu_icons_outlined_directional_left__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/outlined/directional/left */ "./jimu-icons/outlined/directional/left.tsx");
/* harmony import */ var jimu_icons_outlined_directional_up__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/outlined/directional/up */ "./jimu-icons/outlined/directional/up.tsx");
/* harmony import */ var jimu_icons_outlined_directional_right__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/outlined/directional/right */ "./jimu-icons/outlined/directional/right.tsx");
/* harmony import */ var jimu_icons_outlined_directional_down__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jimu-icons/outlined/directional/down */ "./jimu-icons/outlined/directional/down.tsx");







function ListBottomTools(props) {
    const { isRTL, totalPage, pageStyle, currentPage, scrollStatus, isScrollEnd, isEditing, showLoading, layoutType, handleScrollDown, handleScrollUp, handleSwitchPage, formatMessage } = props;
    return (jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", { className: 'bottom-tools w-100 d-flex align-items-center justify-content-center pl-2 pr-2' },
        pageStyle === _config__WEBPACK_IMPORTED_MODULE_2__.PageStyle.MultiPage
            ? (jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Pagination, { size: 'sm', totalPage: totalPage, current: currentPage, onChangePage: handleSwitchPage, disabled: showLoading }))
            : (jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", { className: 'd-flex scroll-navigator' },
                jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { title: formatMessage('previous'), disabled: scrollStatus === 'start', type: 'secondary', size: 'sm', icon: true, onClick: handleScrollUp }, layoutType === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Column ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_icons_outlined_directional_left__WEBPACK_IMPORTED_MODULE_3__.LeftOutlined, { size: 12 }) : jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_icons_outlined_directional_up__WEBPACK_IMPORTED_MODULE_4__.UpOutlined, { size: 12 })),
                jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { title: formatMessage('next'), disabled: scrollStatus === 'end' || isScrollEnd, type: 'secondary', size: 'sm', style: isRTL
                        ? { marginRight: jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(10) }
                        : { marginLeft: jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(10) }, icon: true, onClick: handleScrollDown }, layoutType === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Column ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_icons_outlined_directional_right__WEBPACK_IMPORTED_MODULE_5__.RightOutlined, null) : jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_icons_outlined_directional_down__WEBPACK_IMPORTED_MODULE_6__.DownOutlined, null)))),
        window.jimuConfig.isInBuilder && isEditing && (jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", { className: 'editing-mask-bottom-tool' }))));
}


/***/ }),

/***/ "./your-extensions/widgets/list-112/src/runtime/components/filter-picker.tsx":
/*!***********************************************************************************!*\
  !*** ./your-extensions/widgets/list-112/src/runtime/components/filter-picker.tsx ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ FilterPicker)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui/basic/sql-expression-runtime */ "jimu-ui/basic/sql-expression-runtime");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var jimu_icons_outlined_brand_widget_filter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/outlined/brand/widget-filter */ "./jimu-icons/outlined/brand/widget-filter.tsx");
/* harmony import */ var jimu_icons_outlined_editor_reset__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/outlined/editor/reset */ "./jimu-icons/outlined/editor/reset.tsx");
/** @jsx jsx */






const popperOffset = [0, 5];
const popperModifiers = [
    {
        name: 'flip',
        options: {
            boundary: document.body,
            fallbackPlacements: ['bottom-start', 'right-end', 'top-start', 'left-start']
        }
    }
];
class FilterPicker extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.formatMessage = (id, values) => {
            return this.props.formatMessage(id, values);
        };
        this.onPopperToggle = evt => {
            const { filter } = this.props;
            const { isOpen } = this.state;
            if (!isOpen) {
                // will open
                this.setState({
                    currentFilter: filter
                });
            }
            this.setState({ isOpen: !isOpen });
        };
        this.onItemClick = (evt, item) => {
            this.setState({ isOpen: false });
            evt.stopPropagation();
            evt.nativeEvent.stopImmediatePropagation();
        };
        this.handleFilterChange = (sqlExprObj) => {
            this.setState({
                currentFilter: sqlExprObj
            });
        };
        this.handleApplyClick = evt => {
            const { currentFilter } = this.state;
            const { handleFilterApplyChange, handleFilterChange } = this.props;
            handleFilterChange(currentFilter);
            handleFilterApplyChange(true);
            this.setState({
                isOpen: false
            });
        };
        this.handleResetClick = evt => {
            const { handleFilterApplyChange, handleFilterChange } = this.props;
            handleFilterApplyChange(false);
            handleFilterChange(this.props.filterInConfig);
            this.setState({
                currentFilter: this.props.filterInConfig
            });
        };
        this.handleClearClick = evt => {
            const { handleFilterApplyChange } = this.props;
            handleFilterApplyChange(false);
            this.setState({
                isOpen: false
            });
        };
        this.getStyle = () => {
            const { theme } = this.props;
            return jimu_core__WEBPACK_IMPORTED_MODULE_0__.css `
      position: relative;
      .dot {
        position: absolute;
        width: 6px;
        height: 6px;
        right: -2px;
        top: 0px;
        .dot-bottom {
          width: 6px;
          height: 6px;
          background-color: transparent;
          .dot-top {
            width: 4px;
            height: 4px;
            background-color: ${theme.colors.palette.dark[600]};
          }
        }
      }
      :hover {
        .dot-top {
          background-color: ${theme.colors.palette.primary[500]};
        }
      }
      & .active {
        .dot-top {
          background-color: ${theme.colors.white};
        }
        :hover {
          .dot-top {
            background-color: ${theme.colors.white};
          }
        }
      }
    `;
        };
        this.getPopperStyle = () => {
            return jimu_core__WEBPACK_IMPORTED_MODULE_0__.css `
      .filter-button-con  {
        & {
          text-align: right;
        }
        button {
          max-width: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(92)};
          overflow: hidden;
          text-overflow: ellipsis;
          white-space: nowrap;
        }
        button svg {
          margin-right: 0 !important;
        }
        .reset-button {
          padding-left: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(5)};
          padding-right: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(5)};
        }
      }
      .clear-button, .reset-button {
        margin-left: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(8)};
      }
    `;
        };
        this.toggleRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createRef();
        this.state = {
            isOpen: false,
            currentFilter: props.filter
        };
    }
    componentDidUpdate(preProps) {
        const { filter, appMode } = this.props;
        if (filter !== preProps.filter) {
            this.setState({
                currentFilter: filter
            });
        }
        if (appMode !== preProps.appMode) {
            if (appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design) {
                this.setState({
                    isOpen: false
                });
            }
        }
    }
    render() {
        const { filter, selectedDs, widgetId, title, applied } = this.props;
        const { isOpen, currentFilter } = this.state;
        const isHadApply = applied && (filter === null || filter === void 0 ? void 0 : filter.sql) === (currentFilter === null || currentFilter === void 0 ? void 0 : currentFilter.sql);
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(react__WEBPACK_IMPORTED_MODULE_3__.Fragment, null,
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { css: this.getStyle(), size: 'sm', type: 'tertiary', icon: true, title: title, ref: this.toggleRef, onClick: this.onPopperToggle },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_brand_widget_filter__WEBPACK_IMPORTED_MODULE_4__.WidgetFilterOutlined, { size: 16 }),
                applied && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'dot align-items-center justify-content-center' },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'dot-bottom rounded-circle' },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'dot-top rounded-circle' }))))),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Popper, { placement: 'bottom-start', reference: this.toggleRef.current, offset: popperOffset, toggle: this.onPopperToggle, css: this.getPopperStyle(), open: isOpen, modifiers: popperModifiers },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { style: { padding: jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(20), width: jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(250) } },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", null,
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_2__.SqlExpressionRuntime, { widgetId: widgetId, dataSource: selectedDs, expression: currentFilter, onChange: this.handleFilterChange })),
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'w-100 mt-3 filter-button-con' },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { disabled: isHadApply, onClick: this.handleApplyClick, type: 'primary', title: this.formatMessage('apply'), size: 'sm' }, this.formatMessage('apply')),
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { disabled: !applied, onClick: this.handleClearClick, title: this.formatMessage('commonModalCancel'), className: "clear-button", size: 'sm' }, this.formatMessage('commonModalCancel')),
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { onClick: this.handleResetClick, title: this.formatMessage('resetFilters'), className: "reset-button", size: 'sm' },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_reset__WEBPACK_IMPORTED_MODULE_5__.ResetOutlined, { size: 's' })))))));
    }
}


/***/ }),

/***/ "./your-extensions/widgets/list-112/src/runtime/components/list-card-base.tsx":
/*!************************************************************************************!*\
  !*** ./your-extensions/widgets/list-112/src/runtime/components/list-card-base.tsx ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ListCard)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/** @jsx jsx */

class ListCard extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.Component {
    constructor() {
        super(...arguments);
        this.getNewProviderData = () => {
            const { widgetId, datasourceId, index, record } = this.props;
            return {
                widgetId: widgetId,
                dataSourceId: datasourceId,
                recordIndex: index,
                record: record
            };
        };
        this.shouldComponentUpdateExcept = (nextProps, nextStats, exceptPropKeys, exceptStatKeys = []) => {
            let shouldUpdate = false;
            this.props &&
                Object.keys(this.props).some(key => {
                    if (exceptPropKeys.includes(key))
                        return false;
                    if (this.props[key] !== nextProps[key]) {
                        // console.log(`props has changed: ${key}`)
                        shouldUpdate = true;
                        return true;
                    }
                    else {
                        return false;
                    }
                });
            this.state &&
                Object.keys(this.state).some(key => {
                    if (exceptStatKeys.includes(key))
                        return false;
                    if (this.state[key] !== nextStats[key]) {
                        // console.log(`states has changed: ${key}`)
                        shouldUpdate = true;
                        return true;
                    }
                    else {
                        return false;
                    }
                });
            return shouldUpdate;
        };
        this.isProviderEqual = (providerData, oldProviderData) => {
            let isEqual = true;
            if (providerData) {
                Object.keys(providerData).some(key => {
                    if (!oldProviderData) {
                        isEqual = false;
                        return true;
                    }
                    const data = providerData[key];
                    const oldData = oldProviderData[key];
                    if (data !== oldData) {
                        isEqual = false;
                        return true;
                    }
                    return false;
                });
            }
            else if (oldProviderData) {
                return false;
            }
            return isEqual;
        };
        this.formatMessage = (id, values) => {
            return this.props.formatMessage(id, values);
        };
        this.getStyle = (status) => {
            const { widgetId, selectable, appMode } = this.props;
            const isBackgroundTransparent = this.checkIsBackgroundTransparent(status);
            return jimu_core__WEBPACK_IMPORTED_MODULE_0__.css `
      ${'&.list-card-' + widgetId} {
        padding: 0;
        border: 0;
        background-color: transparent;
        .list-card-content {
          width: 100%;
          height: 100%;
        }
      }
      &.surface-1 {
        border: none !important;
        background: ${isBackgroundTransparent && 'none !important'};
      }
      .list-clear-background {
        background: transparent !important;
      }
      .list-link {
        position: absolute;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
      }
      .list-item-con {
        overflow: hidden;
      }
      ${'&.list-card-' + widgetId}:hover {
        ${(!window.jimuConfig.isInBuilder || appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Run) &&
                selectable
                ? 'cursor: pointer;'
                : ''}
      }
      .card-editor-mask {
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        z-index: 100;
      }
      .jimu-link {
        text-align: left;
      }
    `;
        };
    }
    checkIsBackgroundTransparent(status) {
        var _a, _b, _c;
        const { cardConfigs } = this.props;
        return ((_c = (_b = (_a = cardConfigs === null || cardConfigs === void 0 ? void 0 : cardConfigs[status]) === null || _a === void 0 ? void 0 : _a.backgroundStyle) === null || _b === void 0 ? void 0 : _b.background) === null || _c === void 0 ? void 0 : _c.color) === 'rgba(0,0,0,0)';
    }
}


/***/ }),

/***/ "./your-extensions/widgets/list-112/src/runtime/components/list-card-editor.tsx":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/list-112/src/runtime/components/list-card-editor.tsx ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../config */ "./your-extensions/widgets/list-112/src/config.ts");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _list_card_base__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./list-card-base */ "./your-extensions/widgets/list-112/src/runtime/components/list-card-base.tsx");
/* harmony import */ var jimu_icons_outlined_editor_sync_on__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/outlined/editor/sync-on */ "./jimu-icons/outlined/editor/sync-on.tsx");
/* harmony import */ var jimu_icons_outlined_editor_sync_off__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jimu-icons/outlined/editor/sync-off */ "./jimu-icons/outlined/editor/sync-off.tsx");
/** @jsx jsx */







const cornerSize = 12;
const cornerPosition = -10;
const sideSize = 16;
const sidePosition = -10;
const zindexHandle = 20;
const statesPopperOffset = [0, 5];
const statesModifiers = [
    {
        name: 'flip',
        options: {
            boundary: document.body,
            fallbackPlacements: ['right-start', 'left-start', 'bottom-start', 'top-end', 'top-start']
        }
    }
];
const applyPopperModifiers = [
    {
        name: 'offset',
        options: {
            offset: [0, 10]
        }
    },
    {
        name: 'arrow',
        enabled: true
    }
];
class _ListCardEditor extends _list_card_base__WEBPACK_IMPORTED_MODULE_4__["default"] {
    constructor(props) {
        super(props);
        this.lastResizeCall = null;
        this.getNewCardSize = (rect, isResizing = false) => {
            const { keepAspectRatio, layoutType, gridItemSizeRatio, horizontalSpace, isWidthPercentage } = this.props;
            let newCardSize;
            let width = rect.right - rect.left;
            if (!isResizing && isWidthPercentage) {
                width = rect.right - rect.left + horizontalSpace;
            }
            if (layoutType === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID && keepAspectRatio) {
                newCardSize = {
                    width: width,
                    height: width * gridItemSizeRatio
                };
            }
            else {
                newCardSize = {
                    width: width,
                    height: rect.bottom - rect.top
                };
            }
            return newCardSize;
        };
        this.handleItemClick = evt => {
            const { selectCard } = this.props;
            if (evt) {
                evt.stopPropagation();
            }
            selectCard();
        };
        this.handleCopyTo = (evt, status, selectedLayoutItem, linked) => {
            if (!selectedLayoutItem)
                return;
            const { layouts, builderSupportModules, browserSizeMode, builderStatus } = this.props;
            const action = builderSupportModules.jimuForBuilderLib.getAppConfigAction();
            const appConfig = action.appConfig;
            const originLayoutId = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.searchUtils.findLayoutId(layouts[builderStatus], browserSizeMode, appConfig.mainSizeMode);
            const desLayoutId = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.searchUtils.findLayoutId(layouts[status], browserSizeMode, appConfig.mainSizeMode);
            if (linked) {
                const searchUtils = builderSupportModules.widgetModules.searchUtils;
                const layoutItem = searchUtils.getContainerLayoutItem(appConfig.layouts[desLayoutId], selectedLayoutItem.widgetId, jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget);
                !!layoutItem &&
                    action.removeLayoutItem({ layoutId: desLayoutId, layoutItemId: layoutItem.id }, false);
            }
            action.duplicateLayoutItem(originLayoutId, desLayoutId, selectedLayoutItem.id, false, linked);
            //After `duplicateLayoutItems`, the structure of the layout is wrong, we need to call the `buildLayoutStructure` method again to reconstruct it
            action.clearLayoutStructure(desLayoutId, browserSizeMode, true);
            action.buildLayoutStructure(desLayoutId, browserSizeMode, true);
            action.exec();
            evt.stopPropagation();
            evt.nativeEvent.stopImmediatePropagation();
        };
        this.editStatus = (name, value) => {
            const { dispatch, widgetId } = this.props;
            dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.widgetStatePropChange(widgetId, name, value));
        };
        this.handleBreakLink = evt => {
            const { builderSupportModules, browserSizeMode, selection, builderStatus, dispatch, widgetId } = this.props;
            const action = builderSupportModules.jimuForBuilderLib.getAppConfigAction();
            const appConfig = action.appConfig;
            const selectedLayoutItem = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.searchUtils.findLayoutItem(appConfig, selection);
            if (!selectedLayoutItem)
                return;
            const currentLayoutId = appConfig.widgets[widgetId].layouts[builderStatus][browserSizeMode];
            action.duplicateLayoutItem(currentLayoutId, currentLayoutId, selectedLayoutItem.id, true);
            action.removeLayoutItem({ layoutId: currentLayoutId, layoutItemId: selectedLayoutItem.id }, false);
            //After `duplicateLayoutItems`, the structure of the layout is wrong, we need to call the `buildLayoutStructure` method again to reconstruct it
            const listLayouts = appConfig.widgets[widgetId].layouts;
            for (const status in listLayouts) {
                const layoutId = listLayouts[status][browserSizeMode];
                action.clearLayoutStructure(layoutId, browserSizeMode, true);
                action.buildLayoutStructure(layoutId, browserSizeMode, true);
            }
            action.exec();
            if (selection.layoutId === currentLayoutId &&
                selection.layoutItemId === selectedLayoutItem.id) {
                dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.selectionChanged(null));
            }
            const content = action.appConfig.layouts[currentLayoutId].content;
            const newItemKey = Object.keys(content)[Object.keys(content).length - 1];
            if (newItemKey) {
                const newItem = content[newItemKey];
                dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.selectionChanged({
                    layoutId: currentLayoutId,
                    layoutItemId: newItem.id
                }));
                const ItemWidgetJson = action.appConfig.widgets[newItem.widgetId];
                //When breaking link, the parent of the newly generated widget still has another layout,
                //which is wrong. Currently, the widget needs to handle it by itself.
                const newItemWidgetJson = this.initParentOfNewWidgetAfterIsolate(ItemWidgetJson, currentLayoutId);
                action
                    .editWidget(newItemWidgetJson)
                    .exec();
            }
            evt.stopPropagation();
            evt.nativeEvent.stopImmediatePropagation();
        };
        this.initParentOfNewWidgetAfterIsolate = (widgetJson, currentLayoutId) => {
            const { browserSizeMode } = this.props;
            const parent = widgetJson.parent;
            const newItemCurrentParent = parent[browserSizeMode];
            const newParent = newItemCurrentParent === null || newItemCurrentParent === void 0 ? void 0 : newItemCurrentParent.filter(layout => layout.layoutId === currentLayoutId);
            return widgetJson.setIn(['parent', browserSizeMode], newParent);
        };
        this.getCopyDropdownItems = (showBreak) => {
            var _a, _b;
            const { cardConfigs, layouts, browserSizeMode, selection, builderStatus, builderSupportModules } = this.props;
            const action = builderSupportModules.jimuForBuilderLib.getAppConfigAction();
            const appConfig = action.appConfig;
            const selectedLayoutItem = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.searchUtils.findLayoutItem(appConfig, selection);
            if (!selection || !selectedLayoutItem || !window.jimuConfig.isInBuilder) {
                return {
                    items: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)([]),
                    title: ''
                };
            }
            const items = [];
            let title = '';
            let linkedToRegular = true;
            let linkedToSelect = cardConfigs[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Selected].selectionMode !== _config__WEBPACK_IMPORTED_MODULE_2__.SelectionModeType.None;
            let linkedToHover = !!cardConfigs[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Hover].enable;
            const isWidgetInLayout = (layoutId, widgetId) => {
                const searchUtils = builderSupportModules.widgetModules.searchUtils;
                const widgets = searchUtils.getContentsInLayoutWithRecrusiveLayouts(appConfig, layoutId, jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget, browserSizeMode);
                return widgets.indexOf(widgetId) > -1;
            };
            const isShowApplyToHover = ((_a = cardConfigs[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Hover]) === null || _a === void 0 ? void 0 : _a.listLayout) !== (_config__WEBPACK_IMPORTED_MODULE_2__.ListLayout === null || _config__WEBPACK_IMPORTED_MODULE_2__.ListLayout === void 0 ? void 0 : _config__WEBPACK_IMPORTED_MODULE_2__.ListLayout.AUTO);
            const isShowApplyToSelected = ((_b = cardConfigs[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Selected]) === null || _b === void 0 ? void 0 : _b.listLayout) !== (_config__WEBPACK_IMPORTED_MODULE_2__.ListLayout === null || _config__WEBPACK_IMPORTED_MODULE_2__.ListLayout === void 0 ? void 0 : _config__WEBPACK_IMPORTED_MODULE_2__.ListLayout.AUTO);
            const syncToHover = () => {
                if (cardConfigs[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Hover].enable) {
                    const layoutId = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.searchUtils.findLayoutId(layouts[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Hover], browserSizeMode, appConfig.mainSizeMode);
                    if (!isWidgetInLayout(layoutId, appConfig.layouts[selection.layoutId].content[selection.layoutItemId].widgetId)) {
                        linkedToHover = false;
                    }
                    items.push({
                        label: this.formatMessage('applyTo', {
                            status: this.formatMessage('hover').toLocaleLowerCase()
                        }),
                        event: evt => {
                            this.handleCopyTo(evt, _config__WEBPACK_IMPORTED_MODULE_2__.Status.Hover, selectedLayoutItem, linkedToHover);
                        }
                    });
                }
            };
            const syncToSelected = () => {
                if (cardConfigs[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Selected].selectionMode !== _config__WEBPACK_IMPORTED_MODULE_2__.SelectionModeType.None) {
                    const layoutId = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.searchUtils.findLayoutId(layouts[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Selected], browserSizeMode, appConfig.mainSizeMode);
                    if (!isWidgetInLayout(layoutId, appConfig.layouts[selection.layoutId].content[selection.layoutItemId].widgetId)) {
                        linkedToSelect = false;
                    }
                    items.push({
                        label: this.formatMessage('applyTo', {
                            status: this.formatMessage('selected').toLocaleLowerCase()
                        }),
                        event: evt => {
                            this.handleCopyTo(evt, _config__WEBPACK_IMPORTED_MODULE_2__.Status.Selected, selectedLayoutItem, linkedToSelect);
                        }
                    });
                }
            };
            const syncToRegular = () => {
                const layoutId = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.searchUtils.findLayoutId(layouts[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Regular], browserSizeMode, appConfig.mainSizeMode);
                if (!isWidgetInLayout(layoutId, appConfig.layouts[selection.layoutId].content[selection.layoutItemId]
                    .widgetId)) {
                    linkedToRegular = false;
                }
                items.push({
                    label: this.formatMessage('applyTo', {
                        status: this.formatMessage('default').toLocaleLowerCase()
                    }),
                    event: evt => {
                        this.handleCopyTo(evt, _config__WEBPACK_IMPORTED_MODULE_2__.Status.Regular, selectedLayoutItem, linkedToRegular);
                    }
                });
            };
            if (builderStatus === _config__WEBPACK_IMPORTED_MODULE_2__.Status.Regular) {
                isShowApplyToHover && syncToHover();
                isShowApplyToSelected && syncToSelected();
                if (linkedToHover && linkedToSelect) {
                    title = this.formatMessage('linkedToAnd', {
                        where1: this.formatMessage('selected').toLocaleLowerCase(),
                        where2: this.formatMessage('hover').toLocaleLowerCase()
                    });
                }
                else if (linkedToHover) {
                    title = this.formatMessage('linkedTo', {
                        where: this.formatMessage('hover').toLocaleLowerCase()
                    });
                }
                else if (linkedToSelect) {
                    title = this.formatMessage('linkedTo', {
                        where: this.formatMessage('selected').toLocaleLowerCase()
                    });
                }
            }
            else if (builderStatus === _config__WEBPACK_IMPORTED_MODULE_2__.Status.Hover) {
                syncToRegular();
                syncToSelected();
                if (linkedToRegular && linkedToSelect) {
                    title = this.formatMessage('linkedToAnd', {
                        where1: this.formatMessage('default').toLocaleLowerCase(),
                        where2: this.formatMessage('selected').toLocaleLowerCase()
                    });
                }
                else if (linkedToRegular) {
                    title = this.formatMessage('linkedTo', {
                        where: this.formatMessage('default').toLocaleLowerCase()
                    });
                }
                else if (linkedToSelect) {
                    title = this.formatMessage('linkedTo', {
                        where: this.formatMessage('selected').toLocaleLowerCase()
                    });
                }
            }
            else {
                syncToRegular();
                syncToHover();
                if (linkedToRegular && linkedToHover) {
                    title = this.formatMessage('linkedToAnd', {
                        where1: this.formatMessage('default').toLocaleLowerCase(),
                        where2: this.formatMessage('hover').toLocaleLowerCase()
                    });
                }
                else if (linkedToRegular) {
                    title = this.formatMessage('linkedTo', {
                        where: this.formatMessage('default').toLocaleLowerCase()
                    });
                }
                else if (linkedToHover) {
                    title = this.formatMessage('linkedTo', {
                        where: this.formatMessage('hover').toLocaleLowerCase()
                    });
                }
            }
            if (showBreak) {
                items.push({
                    label: this.formatMessage('isolate'),
                    event: this.handleBreakLink
                });
            }
            else {
                title = this.formatMessage('isolate');
            }
            return {
                items: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)(items),
                title: title
            };
        };
        this._renderAction = () => {
            const handlers = [];
            const { theme, layoutType, keepAspectRatio } = this.props;
            const sideHandle = jimu_core__WEBPACK_IMPORTED_MODULE_0__.css `
      box-shadow: none;

      &:after {
        position: absolute;
        content: '';
        width: ${cornerSize}px;
        height: ${cornerSize}px;
        background-color: ${theme.colors.palette.primary[500]};
        border: 2px solid ${theme.colors.white};
        border-radius: 50%;
        z-index: ${zindexHandle};
      }
    `;
            const bottomSideLine = jimu_core__WEBPACK_IMPORTED_MODULE_0__.css `
      box-shadow: none;
      height: ${sideSize}px;
      left: 0px;
      right: 0px;
      bottom: ${-1 * (sideSize / 2)}px;
      &:after {
        position: absolute;
        content: '';
        bottom: 50%;
        left: 0;
        right: 0;
        height: 2px;
        background-color: ${theme.colors.palette.primary[300]};
        z-index: ${zindexHandle};
      }
    `;
            const rightSideLine = jimu_core__WEBPACK_IMPORTED_MODULE_0__.css `
      box-shadow: none;
      width: ${sideSize}px;
      top: 0px;
      bottom: 0px;
      right: ${-1 * (sideSize / 2)}px;
      &:after {
        position: absolute;
        content: '';
        right: 50%;
        top: 0;
        bottom: 0;
        width: 2px;
        background-color: ${theme.colors.palette.primary[300]};
        z-index: ${zindexHandle};
      }
    `;
            const handle = jimu_core__WEBPACK_IMPORTED_MODULE_0__.css `
      position: absolute;
    `;
            const rightSideCursor = jimu_core__WEBPACK_IMPORTED_MODULE_0__.css `
      width: ${sideSize}px;
      top: ${-1 * sidePosition}px;
      bottom: ${-1 * sidePosition}px;
      right: ${-1 * (sideSize / 2)}px;

      &:after {
        top: 50%;
        right: 50%;
        margin-top: ${cornerPosition / 2}px;
        margin-right: ${cornerPosition / 2}px;
      }
    `;
            const bottomSideCursor = jimu_core__WEBPACK_IMPORTED_MODULE_0__.css `
      height: ${sideSize}px;
      left: ${-1 * sidePosition}px;
      right: ${-1 * sidePosition}px;
      bottom: ${-1 * (sideSize / 2)}px;

      &:after {
        left: 50%;
        bottom: 50%;
        margin-left: ${cornerPosition / 2}px;
        margin-bottom: ${cornerPosition / 2}px;
      }
    `;
            switch (layoutType) {
                case _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Column:
                    handlers.push((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { key: '10', className: 'list-card-rnd-resize-left-line', css: [handle, rightSideLine] }));
                    handlers.push((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { key: '4', className: 'list-card-rnd-resize-right', css: [handle, sideHandle, rightSideCursor] }));
                    break;
                case _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Row:
                    handlers.push((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { key: '9', className: 'list-card-rnd-resize-bottom-line', css: [handle, bottomSideLine] }));
                    handlers.push((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { key: '6', className: 'list-card-rnd-resize-bottom', css: [handle, sideHandle, bottomSideCursor] }));
                    break;
                case _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID:
                    handlers.push((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { key: '10', className: 'list-card-rnd-resize-left-line', css: [handle, rightSideLine] }));
                    handlers.push((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { key: '4', className: 'list-card-rnd-resize-right', css: [handle, sideHandle, rightSideCursor] }));
                    if (!keepAspectRatio) {
                        handlers.push((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { key: '9', className: 'list-card-rnd-resize-bottom-line', css: [handle, bottomSideLine] }));
                        handlers.push((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { key: '6', className: 'list-card-rnd-resize-bottom', css: [handle, sideHandle, bottomSideCursor] }));
                    }
                    break;
            }
            return handlers;
        };
        this.getCardToolsStyle = (theme) => {
            return jimu_core__WEBPACK_IMPORTED_MODULE_0__.css `
      width: 100%;
      .btn {
        width: 100%;
      }
      .dropdown-toggle {
        justify-content: center;
      }
    `;
        };
        this.renderCardTools = () => {
            const { index } = this.props;
            const isInBuilder = window.jimuConfig.isInBuilder;
            if (!isInBuilder || index > 0)
                return;
            const { cardConfigs, appMode, builderSupportModules, datasourceId, selectionIsInList, selectionIsList, hideCardTool } = this.props;
            let showTools = true;
            const { BuilderPopper, GLOBAL_RESIZING_CLASS_NAME, GLOBAL_H5_DRAGGING_CLASS_NAME, GLOBAL_DRAGGING_CLASS_NAME } = builderSupportModules.widgetModules;
            const isInList = selectionIsInList;
            const isSelf = selectionIsList;
            if ((!isInList && !isSelf) ||
                appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Run ||
                hideCardTool ||
                !datasourceId) {
                showTools = false;
            }
            return (showTools &&
                this.props.isEditing &&
                (cardConfigs[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Hover].enable ||
                    cardConfigs[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Selected].selectionMode !==
                        _config__WEBPACK_IMPORTED_MODULE_2__.SelectionModeType.None) && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(BuilderPopper, { placement: 'left-start', trapFocus: false, autoFocus: false, css: jimu_core__WEBPACK_IMPORTED_MODULE_0__.css `
            .${GLOBAL_DRAGGING_CLASS_NAME} &,
            .${GLOBAL_RESIZING_CLASS_NAME} &,
            .${GLOBAL_H5_DRAGGING_CLASS_NAME} & {
              &.popper {
                display: none;
              }
            }
          `, reference: this.resizeRef.current, offset: statesPopperOffset, modifiers: statesModifiers, open: showTools }, this.getCardMenuElement())));
        };
        this.getCardMenuElement = () => {
            var _a;
            const { index } = this.props;
            const isInBuilder = window.jimuConfig.isInBuilder;
            if (!isInBuilder || index > 0)
                return;
            const { cardConfigs, selection, widgetId, builderSupportModules, browserSizeMode, builderStatus, selectionIsList } = this.props;
            const action = builderSupportModules.jimuForBuilderLib.getAppConfigAction();
            const appConfig = action.appConfig;
            const { searchUtils, BuilderDropDown, BuilderButton, withBuilderTheme } = builderSupportModules.widgetModules;
            const isSelf = selectionIsList;
            const showBreak = !isSelf &&
                selection &&
                searchUtils &&
                searchUtils.getRelatedLayoutItemsInWidgetByLayoutInfo(appConfig, selection, widgetId, browserSizeMode).length > 1;
            const { items: syncItems, title: syncTitle } = this.getCopyDropdownItems(showBreak);
            const showSync = syncItems && syncItems.length > 0;
            const listLayout = ((_a = cardConfigs[builderStatus]) === null || _a === void 0 ? void 0 : _a.listLayout) || _config__WEBPACK_IMPORTED_MODULE_2__.ListLayout.CUSTOM;
            const isShowSyncOrBreak = showSync || showBreak;
            const isShowCopyPopper = !isSelf && isShowSyncOrBreak && listLayout === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayout.CUSTOM;
            const CardMenu = withBuilderTheme(theme => {
                return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'status-group d-flex flex-column align-items-center p-2', css: this.getCardToolsStyle(theme) },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(BuilderButton, { active: builderStatus === _config__WEBPACK_IMPORTED_MODULE_2__.Status.Regular, onClick: evt => { this.handleBuilderStatusChange(evt, _config__WEBPACK_IMPORTED_MODULE_2__.Status.Regular); } }, this.formatMessage('default')),
                    cardConfigs[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Hover].enable && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(BuilderButton, { active: builderStatus === _config__WEBPACK_IMPORTED_MODULE_2__.Status.Hover, className: 'mt-1', onClick: evt => { this.handleBuilderStatusChange(evt, _config__WEBPACK_IMPORTED_MODULE_2__.Status.Hover); } }, this.formatMessage('hover'))),
                    cardConfigs[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Selected].selectionMode !==
                        _config__WEBPACK_IMPORTED_MODULE_2__.SelectionModeType.None && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(BuilderButton, { active: builderStatus === _config__WEBPACK_IMPORTED_MODULE_2__.Status.Selected, className: 'mt-1', onClick: evt => { this.handleBuilderStatusChange(evt, _config__WEBPACK_IMPORTED_MODULE_2__.Status.Selected); } }, this.formatMessage('selected'))),
                    isShowCopyPopper && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(BuilderDropDown, { className: 'mt-1 w-100', toggleIsIcon: true, toggleTitle: syncTitle, toggleType: 'default', direction: 'left', toggleArrow: false, toggleContent: theme => (showBreak ? (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_sync_on__WEBPACK_IMPORTED_MODULE_5__.SyncOnOutlined, { size: 16 }) : (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_sync_off__WEBPACK_IMPORTED_MODULE_6__.SyncOffOutlined, { size: 16 })), modifiers: applyPopperModifiers, items: syncItems }))));
            });
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(CardMenu, null));
        };
        this.isItemAccept = (item, isPlaceholder) => {
            var _a, _b;
            if (!item)
                return false;
            const { isEditing } = this.props;
            const supportRepeat = (_b = (_a = item.manifest) === null || _a === void 0 ? void 0 : _a.properties) === null || _b === void 0 ? void 0 : _b.supportRepeat;
            // if(!supportRepeat && item.itemType === LayoutItemType.Widget && !item.id){//support placeholder
            //   supportRepeat = true;
            // }
            const { builderSupportModules, widgetId } = this.props;
            const action = builderSupportModules.jimuForBuilderLib.getAppConfigAction();
            const appConfig = action.appConfig;
            const selectionInList = builderSupportModules.widgetModules.selectionInList;
            return (isEditing &&
                supportRepeat &&
                (!item.layoutInfo ||
                    (item.layoutInfo &&
                        selectionInList(item.layoutInfo, widgetId, appConfig, false))));
        };
        this.getEditorStyle = () => {
            return jimu_core__WEBPACK_IMPORTED_MODULE_0__.css `
      &.list-card-content {
        .fixed-layout {
          border: 0 !important;
        }
      }
    `;
        };
        this.state = {
            didMount: false
        };
        this.resizeRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createRef();
        this.providerData = this.getNewProviderData();
    }
    shouldComponentUpdate(nextProps, nextStats) {
        let shouldUpdate = this.shouldComponentUpdateExcept(nextProps, nextStats, [
            'listStyle',
            'selection'
        ]);
        shouldUpdate =
            shouldUpdate ||
                !jimu_core__WEBPACK_IMPORTED_MODULE_0__.utils.isDeepEqual(this.props.listStyle, nextProps.listStyle);
        if (!shouldUpdate) {
            const { selectionIsInList, selectionIsList } = this.props;
            if (selectionIsList || selectionIsInList) {
                shouldUpdate = !jimu_core__WEBPACK_IMPORTED_MODULE_0__.utils.isDeepEqual(this.props.selection, nextProps.selection);
            }
        }
        return shouldUpdate;
    }
    componentDidUpdate(preProps) {
        const { selectionIsInList, isEditing, layoutType, isRTL, lockItemRatio, keepAspectRatio, index } = this.props;
        if (window.jimuConfig.isInBuilder && index === 0) {
            if (this.interactable) {
                if (isEditing && !selectionIsInList) {
                    if (layoutType === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID) {
                        this.interactable.resizable({
                            edges: {
                                top: false,
                                left: isRTL,
                                bottom: !keepAspectRatio,
                                right: !isRTL
                            }
                        });
                        this.interactable.resizable(true);
                    }
                    else {
                        if (!lockItemRatio) {
                            this.interactable.resizable({
                                edges: {
                                    top: false,
                                    left: layoutType === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Column && isRTL,
                                    bottom: layoutType === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Row,
                                    right: layoutType === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Column && !isRTL
                                }
                            });
                            this.interactable.resizable(true);
                        }
                        else {
                            this.interactable.resizable(false);
                        }
                    }
                }
                else {
                    this.interactable.resizable(false);
                }
            }
        }
    }
    componentDidMount() {
        const { index, layoutType, updateCardToolPosition, keepAspectRatio } = this.props;
        if (index === 0 &&
            window.jimuConfig.isInBuilder &&
            this.resizeRef.current) {
            const { interact, handleResizeCard, isRTL, lockItemRatio } = this.props;
            this.interactable = interact(this.resizeRef.current).resizable({
                // resize from all edges and corners
                edges: {
                    top: false,
                    left: (layoutType === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Column || layoutType === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID) && isRTL,
                    bottom: ((layoutType === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Row && !lockItemRatio) || (layoutType === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID && !keepAspectRatio)),
                    right: ((layoutType === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Column && !lockItemRatio) || layoutType === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID) && !isRTL
                },
                modifiers: [
                    // keep the edges inside the parent
                    interact.modifiers.restrictEdges({
                        endOnly: true
                    }),
                    // minimum size
                    interact.modifiers.restrictSize({
                        min: { width: _config__WEBPACK_IMPORTED_MODULE_2__.LIST_CARD_MIN_SIZE, height: _config__WEBPACK_IMPORTED_MODULE_2__.LIST_CARD_MIN_SIZE }
                    })
                ],
                inertia: false,
                onstart: (event) => {
                    const { changeIsResizingCard } = this.props;
                    if (changeIsResizingCard) {
                        changeIsResizingCard(true);
                    }
                    event.stopPropagation();
                },
                onmove: (event) => {
                    event.stopPropagation();
                    if (this.lastResizeCall) {
                        cancelAnimationFrame(this.lastResizeCall);
                    }
                    const rect = event.rect;
                    const newCardSize = this.getNewCardSize(rect, true);
                    updateCardToolPosition();
                    this.lastResizeCall = requestAnimationFrame(() => {
                        const edges = {}; // event.interaction.edges;
                        handleResizeCard(newCardSize, false, edges.top, edges.left);
                    });
                },
                onend: (event) => {
                    event.stopPropagation();
                    if (this.lastResizeCall) {
                        cancelAnimationFrame(this.lastResizeCall);
                    }
                    this.lastResizeCall = requestAnimationFrame(() => {
                        const rect = event.rect;
                        const newCardSize = this.getNewCardSize(rect);
                        handleResizeCard(newCardSize, true);
                        const { changeIsResizingCard } = this.props;
                        if (changeIsResizingCard) {
                            changeIsResizingCard(false);
                        }
                    });
                }
            });
        }
        this.setState({
            didMount: true
        });
    }
    componentWillUnMount() {
        if (this.lastResizeCall) {
            cancelAnimationFrame(this.lastResizeCall);
        }
        if (this.interactable) {
            this.interactable.unset();
            this.interactable = null;
        }
    }
    handleBuilderStatusChange(evt, status) {
        this.editStatus('showCardSetting', status);
        this.editStatus('builderStatus', status);
        const { selectCard } = this.props;
        selectCard();
        evt.stopPropagation();
        evt.nativeEvent.stopImmediatePropagation();
    }
    render() {
        var _a;
        const { selectable, active, cardConfigs, LayoutEntry, selectionIsInList, isEditing, widgetId, listStyle, lockItemRatio, builderStatus, layouts, layoutType } = this.props;
        const { didMount } = this.state;
        const layout = layouts[builderStatus];
        const listLayout = ((_a = cardConfigs[builderStatus]) === null || _a === void 0 ? void 0 : _a.listLayout) || _config__WEBPACK_IMPORTED_MODULE_2__.ListLayout.CUSTOM;
        const regularLayout = layouts[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Regular];
        const showLayout = listLayout === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayout.AUTO ? regularLayout : layout;
        const bgStyle = cardConfigs[builderStatus].backgroundStyle;
        const isShowMask = listLayout === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayout.AUTO && builderStatus !== _config__WEBPACK_IMPORTED_MODULE_2__.Status.Regular;
        const mergedStyle = Object.assign({}, jimu_ui__WEBPACK_IMPORTED_MODULE_1__.styleUtils.toCSSStyle(bgStyle || {}));
        const cardContentStyle = Object.assign({}, jimu_ui__WEBPACK_IMPORTED_MODULE_1__.styleUtils.toCSSStyle({
            borderRadius: (bgStyle === null || bgStyle === void 0 ? void 0 : bgStyle.borderRadius) || 0
        } || {}));
        const newProviderData = this.getNewProviderData();
        if (!this.isProviderEqual(newProviderData, this.providerData)) {
            this.providerData = newProviderData;
        }
        const isLockItemRatio = layoutType !== _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID && lockItemRatio;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.RepeatedDataSourceProvider, { data: this.providerData },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.ListGroupItem, { active: selectable && active, css: this.getStyle(builderStatus), style: Object.assign(Object.assign({}, cardContentStyle), listStyle), className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('surface-1', `list-card-${widgetId}`), onClick: this.handleItemClick, role: 'listCardEditor' },
                isShowMask && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'card-editor-mask position-absolute' }),
                didMount && this.renderCardTools(),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'list-card-content d-flex', style: mergedStyle, css: this.getEditorStyle(), ref: this.resizeRef },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(LayoutEntry, { isItemAccepted: this.isItemAccept, isRepeat: true, layouts: showLayout, isInWidget: true }),
                    isEditing &&
                        !selectionIsInList &&
                        !isLockItemRatio &&
                        this._renderAction()))));
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.connect((state, props) => {
    var _a;
    const { selectionIsList, builderSupportModules, appMode, widgetId, browserSizeMode } = props;
    if (!window.jimuConfig.isInBuilder || appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Run) {
        return {
            selection: undefined,
            showBreak: false
        };
    }
    const searchUtils = (_a = builderSupportModules === null || builderSupportModules === void 0 ? void 0 : builderSupportModules.widgetModules) === null || _a === void 0 ? void 0 : _a.searchUtils;
    const action = builderSupportModules.jimuForBuilderLib.getAppConfigAction();
    const appConfig = action.appConfig;
    const selection = props.index === 0 &&
        props.selectionIsInList &&
        state &&
        state.appRuntimeInfo &&
        state.appRuntimeInfo.selection;
    const showBreak = !selectionIsList &&
        selection &&
        searchUtils &&
        searchUtils.getRelatedLayoutItemsInWidgetByLayoutInfo(appConfig, selection, widgetId, browserSizeMode).length > 1;
    return {
        selection,
        showBreak
    };
})(_ListCardEditor));


/***/ }),

/***/ "./your-extensions/widgets/list-112/src/runtime/components/list-card-viewer.tsx":
/*!**************************************************************************************!*\
  !*** ./your-extensions/widgets/list-112/src/runtime/components/list-card-viewer.tsx ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ListCardViewer)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../config */ "./your-extensions/widgets/list-112/src/config.ts");
/* harmony import */ var _list_card_base__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./list-card-base */ "./your-extensions/widgets/list-112/src/runtime/components/list-card-base.tsx");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react */ "react");
/** @jsx jsx */






class ListCardViewer extends _list_card_base__WEBPACK_IMPORTED_MODULE_4__["default"] {
    constructor(props) {
        super(props);
        this.updateExpressionRecords = () => {
            var _a, _b;
            this.expressionRecords = {};
            if (((_a = this.providerData) === null || _a === void 0 ? void 0 : _a.dataSourceId) && ((_b = this.providerData) === null || _b === void 0 ? void 0 : _b.record)) {
                this.expressionRecords[this.providerData.dataSourceId] = this.providerData.record;
            }
        };
        this.onUrlExpResolveChange = result => {
            if (result.isSuccessful) {
                this.setState({ url: result.value });
            }
            else {
                const res = '';
                // const errorCode = result.value
                // if (errorCode === ExpressionResolverErrorCode.Failed) {
                // }
                this.setState({ url: res });
            }
        };
        // componentDidUpdate(preProps, preState){
        //   Object.keys(this.props).forEach(key => {
        //     if(this.props[key] !== preProps[key])
        //       console.log(`props has changed: ${key}`)
        //   })
        // }
        this.handleItemClick = evt => {
            const { onChange, active } = this.props;
            const { providerData, linkRef } = this;
            const tagName = (evt.target && evt.target.tagName) || '';
            if (!(tagName.toLowerCase() === 'a' ||
                tagName.toLowerCase() === 'button' ||
                evt.exbEventType === 'linkClick') &&
                !active) {
                if (linkRef.current) {
                    // Must stopPropagation from link click, or this method will be called twice.
                    linkRef.current.click();
                }
            }
            // if click sub widget event, don't un select
            if (active) {
                const tagName = (evt.target && evt.target.tagName) || '';
                if (!(tagName.toLowerCase() === 'a' ||
                    tagName.toLowerCase() === 'button' ||
                    evt.exbEventType === 'linkClick')) {
                    onChange(providerData && providerData.record);
                }
            }
            else {
                onChange(providerData && providerData.record);
            }
            if (evt.exbEventType === 'linkClick') {
                delete evt.exbEventType;
            }
        };
        this.handleItemKeyDown = evt => {
            if (evt.key === 'Enter' || evt.key === ' ') {
                this.handleItemClick(evt);
            }
        };
        this.handleLinkClick = evt => {
            evt.stopPropagation();
        };
        this.state = {
            url: ''
        };
        this.providerData = this.getNewProviderData();
        this.updateExpressionRecords();
        this.layoutRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createRef();
        this.linkRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createRef();
    }
    shouldComponentUpdate(nextProps, nextStats) {
        let shouldUpdate = this.shouldComponentUpdateExcept(nextProps, nextStats, [
            'listStyle'
        ]);
        shouldUpdate =
            shouldUpdate ||
                !jimu_core__WEBPACK_IMPORTED_MODULE_0__.utils.isDeepEqual(this.props.listStyle, nextProps.listStyle);
        return shouldUpdate;
    }
    render() {
        var _a;
        const { selectable, active, cardConfigs, widgetId, listStyle, layouts, hoverLayoutOpen, appMode, isHover, linkParam, useDataSources, itemIdex, handleListMouseLeave, handleListMouseMove } = this.props;
        let { queryObject } = this.props;
        const { url } = this.state;
        let currentStatus = _config__WEBPACK_IMPORTED_MODULE_3__.Status.Regular;
        const isInBuilder = window.jimuConfig.isInBuilder;
        let layout;
        let bgStyle;
        let target;
        let linkTo;
        if (isInBuilder && appMode !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Run) {
            bgStyle = cardConfigs[_config__WEBPACK_IMPORTED_MODULE_3__.Status.Regular].backgroundStyle;
            layout = layouts[_config__WEBPACK_IMPORTED_MODULE_3__.Status.Regular];
        }
        else {
            layout = layouts[_config__WEBPACK_IMPORTED_MODULE_3__.Status.Regular];
            bgStyle = cardConfigs[_config__WEBPACK_IMPORTED_MODULE_3__.Status.Regular].backgroundStyle;
            if (linkParam && linkParam.linkType) {
                target = linkParam.openType;
                linkTo = {
                    linkType: linkParam.linkType
                };
                if (linkParam.linkType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LinkType.WebAddress) {
                    linkTo.value = url;
                    queryObject = undefined;
                }
                else {
                    linkTo.value = linkParam.value;
                }
            }
            if (hoverLayoutOpen && isHover && layouts[_config__WEBPACK_IMPORTED_MODULE_3__.Status.Hover]) {
                currentStatus = _config__WEBPACK_IMPORTED_MODULE_3__.Status.Hover;
                layout = layouts === null || layouts === void 0 ? void 0 : layouts[_config__WEBPACK_IMPORTED_MODULE_3__.Status.Hover];
                bgStyle = cardConfigs[_config__WEBPACK_IMPORTED_MODULE_3__.Status.Hover].backgroundStyle;
            }
            if (selectable && active && layouts[_config__WEBPACK_IMPORTED_MODULE_3__.Status.Selected]) {
                currentStatus = _config__WEBPACK_IMPORTED_MODULE_3__.Status.Selected;
                layout = layouts === null || layouts === void 0 ? void 0 : layouts[_config__WEBPACK_IMPORTED_MODULE_3__.Status.Selected];
                bgStyle = cardConfigs[_config__WEBPACK_IMPORTED_MODULE_3__.Status.Selected].backgroundStyle;
                queryObject = undefined;
                linkTo = undefined;
                target = undefined;
            }
        }
        const currentLayoutType = ((_a = cardConfigs[currentStatus]) === null || _a === void 0 ? void 0 : _a.listLayout) || _config__WEBPACK_IMPORTED_MODULE_3__.ListLayout.CUSTOM;
        const regularLayout = layouts[_config__WEBPACK_IMPORTED_MODULE_3__.Status.Regular];
        const showLayout = currentLayoutType === _config__WEBPACK_IMPORTED_MODULE_3__.ListLayout.AUTO ? regularLayout : layout;
        const mergedStyle = Object.assign({}, jimu_ui__WEBPACK_IMPORTED_MODULE_1__.styleUtils.toCSSStyle(bgStyle || {}));
        const cardContentStyle = Object.assign({}, jimu_ui__WEBPACK_IMPORTED_MODULE_1__.styleUtils.toCSSStyle({
            borderRadius: (bgStyle === null || bgStyle === void 0 ? void 0 : bgStyle.borderRadius) || 0
        } || {}));
        const newProviderData = this.getNewProviderData();
        if (!this.isProviderEqual(newProviderData, this.providerData)) {
            this.providerData = newProviderData;
            this.updateExpressionRecords();
        }
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.RepeatedDataSourceProvider, { data: this.providerData },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.ListGroupItem, { active: selectable && active, css: this.getStyle(currentStatus), style: Object.assign(Object.assign({}, listStyle), cardContentStyle), tabIndex: 0, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('surface-1 jimu-outline-inside', `list-card-${widgetId}`), onClick: this.handleItemClick, role: 'option', onKeyDown: this.handleItemKeyDown, "aria-describedby": 'describeByMessage', "aria-selected": selectable && active },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'list-card-content d-flex', onMouseLeave: handleListMouseLeave, onMouseMove: () => { handleListMouseMove(itemIdex); }, style: mergedStyle },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'position-relative h-100 w-100' },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(react__WEBPACK_IMPORTED_MODULE_5__.Fragment, null,
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__._Link, { className: 'p-0 w-100 h-100 border-0 list-clear-background list-link', ref: this.linkRef, to: linkTo, target: target, tabIndex: -1, queryObject: queryObject, onClick: this.handleLinkClick }),
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex w-100 h-100 list-item-con', ref: this.layoutRef },
                                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.LayoutEntry, { layouts: showLayout }))))),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.ExpressionResolverComponent, { useDataSources: useDataSources, expression: linkParam === null || linkParam === void 0 ? void 0 : linkParam.expression, 
                    /* records={this.expressionRecords}  */ onChange: this.onUrlExpResolveChange, widgetId: this.props.widgetId }))));
    }
}


/***/ }),

/***/ "./your-extensions/widgets/list-112/src/runtime/components/my-dropdown.tsx":
/*!*********************************************************************************!*\
  !*** ./your-extensions/widgets/list-112/src/runtime/components/my-dropdown.tsx ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ MyDropDown)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/** @jsx jsx */


class MyDropDown extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.onDropDownToggle = evt => {
            evt.stopPropagation();
            const { isDropDownOpen, onDropDownOpenChange } = this.props;
            if (isDropDownOpen !== undefined) {
                onDropDownOpenChange && onDropDownOpenChange(!isDropDownOpen);
            }
            else {
                const { isOpen } = this.state;
                this.setState({ isOpen: !isOpen });
            }
        };
        this.onItemClick = (evt, item) => {
            const { isDropDownOpen, onDropDownOpenChange } = this.props;
            if (isDropDownOpen !== undefined) {
                onDropDownOpenChange && onDropDownOpenChange(false);
            }
            else {
                this.setState({ isOpen: false });
            }
            item.event(evt, item);
            evt.stopPropagation();
            evt.nativeEvent.stopImmediatePropagation();
        };
        this.onDropDownMouseClick = evt => {
            evt.stopPropagation();
            evt.nativeEvent.stopImmediatePropagation();
        };
        this.getStyle = () => {
            var _a, _b, _c, _d, _e, _f;
            const { theme } = this.props;
            return jimu_core__WEBPACK_IMPORTED_MODULE_0__.css `
      & button {
        padding: 0;
      }
      .list-toggle-button {
        background: ${(_c = (_b = (_a = theme.colors) === null || _a === void 0 ? void 0 : _a.palette) === null || _b === void 0 ? void 0 : _b.light) === null || _c === void 0 ? void 0 : _c[500]};
        border: none;
        &:hover, &[aria-expanded="true"] {
          background: ${(_f = (_e = (_d = theme.colors) === null || _d === void 0 ? void 0 : _d.palette) === null || _e === void 0 ? void 0 : _e.light) === null || _f === void 0 ? void 0 : _f[800]};
        }
      }
    `;
        };
        this.state = {
            isOpen: false
        };
        const { withBuilderStyle } = props;
        this.MyDropdown = withBuilderStyle ? withBuilderStyle(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Dropdown) : jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Dropdown;
        this.MyDropdownButton = withBuilderStyle
            ? withBuilderStyle(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.DropdownButton)
            : jimu_ui__WEBPACK_IMPORTED_MODULE_1__.DropdownButton;
        this.MyDropdownMenu = withBuilderStyle
            ? withBuilderStyle(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.DropdownMenu)
            : jimu_ui__WEBPACK_IMPORTED_MODULE_1__.DropdownMenu;
        this.MyDropdownItem = withBuilderStyle
            ? withBuilderStyle(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.DropdownItem)
            : jimu_ui__WEBPACK_IMPORTED_MODULE_1__.DropdownItem;
    }
    render() {
        const { items, toggleContent, caret, toggleType, toggleArrow, menuContent, appMode, modifiers, toggleIsIcon, theme, isDropDownOpen, size, appendToBody, toggleTitle, direction, menuCss, className, showActive, activeLabel, fluid } = this.props;
        let { isOpen } = this.state;
        isOpen = isDropDownOpen === undefined ? isOpen : isDropDownOpen;
        const { MyDropdown, MyDropdownButton, MyDropdownMenu, MyDropdownItem } = this;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(MyDropdown, { size: size, toggle: this.onDropDownToggle, direction: direction, fluid: fluid, isOpen: isOpen && appMode !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design, className: `my-dropdown ${className}`, css: this.getStyle() },
            toggleContent && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(MyDropdownButton, { icon: toggleIsIcon, title: toggleTitle, size: size, type: toggleType, caret: caret, className: 'list-toggle-button', arrow: toggleArrow }, toggleContent && toggleContent(theme))),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(MyDropdownMenu, { appendToBody: appendToBody, modifiers: modifiers, css: menuCss && menuCss(theme) }, menuContent
                ? menuContent(theme)
                : items &&
                    items.asMutable().map((item, i) => {
                        return (!item.hide && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(MyDropdownItem, { key: i, className: 'no-user-select', title: item.label, active: showActive && item.label === activeLabel, onClick: evt => { this.onItemClick(evt, item); } }, item.label)));
                    }))));
    }
}


/***/ }),

/***/ "./your-extensions/widgets/list-112/src/runtime/components/search-box.tsx":
/*!********************************************************************************!*\
  !*** ./your-extensions/widgets/list-112/src/runtime/components/search-box.tsx ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ SearchBox)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_icons_outlined_editor_close__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-icons/outlined/editor/close */ "./jimu-icons/outlined/editor/close.tsx");
/* harmony import */ var jimu_icons_outlined_editor_search__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/outlined/editor/search */ "./jimu-icons/outlined/editor/search.tsx");
/* harmony import */ var jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/outlined/directional/arrow-left */ "./jimu-icons/outlined/directional/arrow-left.tsx");
/** @jsx jsx */





const Sanitizer = jimu_core__WEBPACK_IMPORTED_MODULE_0__.esri.Sanitizer;
const sanitizer = new Sanitizer();
class SearchBox extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.handleChange = searchText => {
            this.setState({
                searchText: searchText,
                isShowSuggestion: (searchText === null || searchText === void 0 ? void 0 : searchText.length) > 2
            }, () => {
                const { onSearchTextChange } = this.props;
                if (onSearchTextChange) {
                    onSearchTextChange(searchText);
                }
            });
        };
        this.handleSubmit = (value, isEnter = false) => {
            const { onSubmit } = this.props;
            if (onSubmit) {
                onSubmit(value, isEnter);
            }
        };
        this.onKeyUp = evt => {
            if (!evt || !evt.target)
                return;
            const { isShowSuggestion } = this.state;
            if (evt.key === 'Enter') {
                this.setState({
                    isShowSuggestion: false
                });
                this.handleSubmit(evt.target.value, true);
            }
            if (isShowSuggestion) {
                const items = this.getMenuItems() || [];
                const itemLength = (items === null || items === void 0 ? void 0 : items.length) - 1;
                if (evt.key === 'ArrowUp') {
                    setTimeout(() => {
                        var _a;
                        (_a = items[itemLength]) === null || _a === void 0 ? void 0 : _a.focus();
                    });
                }
                else if (evt.key === 'ArrowDown') {
                    setTimeout(() => {
                        var _a, _b;
                        (_a = this.containerRef) === null || _a === void 0 ? void 0 : _a.focus();
                        (_b = items[0]) === null || _b === void 0 ? void 0 : _b.focus();
                    });
                }
            }
        };
        this.onSuggestionConfirm = suggestion => {
            this.setState({
                searchText: suggestion,
                isShowSuggestion: false
            }, () => {
                var _a;
                this.handleSubmit(suggestion);
                (_a = this.props) === null || _a === void 0 ? void 0 : _a.toggleSearchBoxVisible(true);
            });
        };
        this.handleClear = evt => {
            this.setState({
                searchText: ''
            });
            evt.stopPropagation();
        };
        this.getStyle = () => {
            var _a, _b, _c, _d, _e, _f, _g, _h, _j;
            const { theme } = this.props;
            return jimu_core__WEBPACK_IMPORTED_MODULE_0__.css `
      position: relative;
      .search-input {
        margin-bottom: -1px;
        padding-left: 3px;
        border: 0;
        // border-bottom-width: 1px;
        // border-bottom-style: solid;
        // border-color: ${theme.colors.primary};
        background: transparent;
        height: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(26)};
        min-width: 0;
        .input-wrapper {
          background: transparent;
          border: none;
          padding: 0;
          height: 100%;
        }
      }
      .search-input:focus {
        background: transparent;
      }
      .search-loading-con {
        @keyframes loading {
          0% {transform: rotate(0deg); };
          100% {transform: rotate(360deg)};
        }
        width: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(13)};
        height: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(13)};
        min-width: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(13)};
        border: 2px solid ${(_c = (_b = (_a = theme === null || theme === void 0 ? void 0 : theme.colors) === null || _a === void 0 ? void 0 : _a.palette) === null || _b === void 0 ? void 0 : _b.secondary) === null || _c === void 0 ? void 0 : _c[300]};
        border-radius: 50%;
        border-top: 2px solid ${(_f = (_e = (_d = theme === null || theme === void 0 ? void 0 : theme.colors) === null || _d === void 0 ? void 0 : _d.palette) === null || _e === void 0 ? void 0 : _e.primary) === null || _f === void 0 ? void 0 : _f[500]};
        box-sizing: border-box;
        animation:loading 2s infinite linear;
        margin-right: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(4)};
      }
      .clear-search, .search-back {
        cursor: pointer;
        padding: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(6)};
        background: none;
        border: none;
        color: ${(_j = (_h = (_g = theme === null || theme === void 0 ? void 0 : theme.colors) === null || _g === void 0 ? void 0 : _g.palette) === null || _h === void 0 ? void 0 : _h.dark) === null || _j === void 0 ? void 0 : _j[800]}
      }
      .search-back {
        margin-left: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(-6)};
      }
      .clear-search:hover {
        background: none;
      }
    `;
        };
        this.getSuggestionListStyle = () => {
            const { suggestionWidth } = this.props;
            return jimu_core__WEBPACK_IMPORTED_MODULE_0__.css `
      & {
        max-height: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(300)};
        min-width: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(suggestionWidth)};
        overflow: auto;
      }
      button {
        display: block;
        width: 100%;
        text-align: left;
        border: none;
        border-radius: 0;
      }
      .suggestion-item:focus {
        background: var(--primary-500);
        color: var(--white);
      }
      button:hover {
        border: none;
      }
    `;
        };
        this.clearSearchText = () => {
            const { searchText } = this.state;
            if (searchText) {
                this.handleChange('');
                this.setState({
                    isShowSuggestion: false
                });
            }
        };
        this.getMenuItems = () => {
            return this.containerRef ? Array.prototype.slice.call(this.containerRef.querySelectorAll('[role="button"]')).filter(item => !item.disabled) : [];
        };
        this.getTextInputSuffixElement = () => {
            const { theme, showLoading, formatMessage } = this.props;
            const { searchText } = this.state;
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex align-items-center' },
                showLoading && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'search-loading-con' }),
                searchText && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { color: 'tertiary', className: 'clear-search', icon: true, size: 'sm', onClick: this.clearSearchText, title: formatMessage('clearSearch') },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_close__WEBPACK_IMPORTED_MODULE_2__.CloseOutlined, { size: 14, color: theme.colors.palette.dark[800] })))));
        };
        this.getTextInputPrefixElement = () => {
            const { theme, formatMessage } = this.props;
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { type: 'tertiary', icon: true, size: 'sm', title: formatMessage('SearchLabel'), onClick: evt => { this.handleSubmit(this.state.searchText); } },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_search__WEBPACK_IMPORTED_MODULE_3__.SearchOutlined, { size: 16, color: theme.colors.palette.light[800] })));
        };
        this.handlePopperKeyDown = (e) => {
            const { isShowSuggestion } = this.state;
            if (!isShowSuggestion) {
                return;
            }
            const isTargetMenuItem = e.target.getAttribute('role') === 'button';
            if (!['Tab', 'ArrowUp', 'ArrowDown'].includes(e.key)) {
                return;
            }
            if (((e.which >= 48) && (e.which <= 90)) || e.key === 'Tab') {
                e.preventDefault();
            }
            if (isShowSuggestion && isTargetMenuItem) {
                if (e.key === 'Escape') {
                    this.handleEscEvent(e);
                }
                else if (['ArrowUp', 'ArrowDown'].includes(e.key) || (['n', 'p'].includes(e.key) && e.ctrlKey)) {
                    const $menuitems = this.getMenuItems();
                    let index = $menuitems.indexOf(e.target);
                    let isArrowUp = false;
                    if (e.key === 'ArrowUp' || (e.key === 'p' && e.ctrlKey)) {
                        index = index !== 0 ? index - 1 : $menuitems.length - 1;
                        isArrowUp = true;
                    }
                    else if (e.key === 'ArrowDown' || (e.key === 'n' && e.ctrlKey)) {
                        isArrowUp = false;
                        index = index === $menuitems.length - 1 ? 0 : index + 1;
                    }
                    const isArrowUpToInput = (index === 0 && !isArrowUp);
                    const isArrowDownToInput = (index === $menuitems.length - 1 && isArrowUp);
                    clearTimeout(this.focusTimeout);
                    if (isArrowUpToInput || isArrowDownToInput) {
                        this.focusTimeout = setTimeout(() => {
                            var _a;
                            (_a = this.searchInputRef) === null || _a === void 0 ? void 0 : _a.focus();
                        });
                    }
                    else {
                        this.focusTimeout = setTimeout(() => {
                            var _a;
                            (_a = this.containerRef) === null || _a === void 0 ? void 0 : _a.focus();
                            $menuitems[index].focus();
                        });
                    }
                }
                else if (e.key === 'End') {
                    const $menuitems = this.getMenuItems();
                    $menuitems[$menuitems.length - 1].focus();
                }
                else if (e.key === 'Home') {
                    const $menuitems = this.getMenuItems();
                    $menuitems[0].focus();
                }
                else if ((e.which >= 48) && (e.which <= 90)) {
                    const $menuitems = this.getMenuItems();
                    const charPressed = String.fromCharCode(e.which).toLowerCase();
                    for (let i = 0; i < $menuitems.length; i += 1) {
                        const firstLetter = $menuitems[i].textContent && $menuitems[i].textContent[0].toLowerCase();
                        if (firstLetter === charPressed) {
                            $menuitems[i].focus();
                            break;
                        }
                    }
                }
            }
        };
        this.handleEscEvent = (e) => {
            var _a;
            const { isShowSuggestion } = this.state;
            e.preventDefault();
            this.setState({ isShowSuggestion: !isShowSuggestion });
            (_a = this.searchInputRef) === null || _a === void 0 ? void 0 : _a.focus();
        };
        this.setInputRef = (ref) => {
            const { inputRef } = this.props;
            this.searchInputRef = ref;
            inputRef && inputRef(ref);
        };
        this.state = {
            searchText: props.searchText || '',
            isShowSuggestion: false
        };
    }
    componentDidUpdate(preProps) {
        var _a;
        if (this.props.searchText !== preProps.searchText &&
            this.props.searchText !== this.state.searchText) {
            const { searchText } = this.props;
            this.setState({
                searchText: searchText
            });
        }
        if (((_a = this.props) === null || _a === void 0 ? void 0 : _a.appMode) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design && this.state.isShowSuggestion) {
            this.setState({
                isShowSuggestion: false,
                searchText: ''
            });
        }
    }
    render() {
        const { placeholder, className, showClear, hideSearchIcon, onFocus, onBlur, theme, searchSuggestion, formatMessage, isShowBackButton } = this.props;
        const { searchText, isShowSuggestion } = this.state;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { ref: ref => (this.reference = ref) },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: this.getStyle(), className: `d-flex align-items-center ${className}` },
                isShowBackButton && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { color: 'tertiary', className: 'search-back', icon: true, size: 'sm', onClick: evt => {
                        var _a;
                        (_a = this.props) === null || _a === void 0 ? void 0 : _a.toggleSearchBoxVisible(false);
                    }, title: formatMessage('topToolBack') },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_4__.ArrowLeftOutlined, { size: 20, color: theme.colors.palette.dark[800] }))),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.TextInput, { className: 'search-input flex-grow-1', ref: ref => { this.setInputRef(ref); }, placeholder: placeholder, onChange: e => { this.handleChange(e.target.value); }, onBlur: onBlur, onFocus: onFocus, title: searchText || placeholder, value: searchText || '', onKeyDown: e => { this.onKeyUp(e); }, prefix: (!hideSearchIcon && !isShowBackButton) && this.getTextInputPrefixElement(), suffix: this.getTextInputSuffixElement() }),
                showClear && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { id: 'test-focus', color: 'tertiary', icon: true, size: 'sm', onClick: this.handleSubmit },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_close__WEBPACK_IMPORTED_MODULE_2__.CloseOutlined, { size: 12, color: theme.colors.palette.dark[800] })))),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", null,
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Popper, { css: this.getSuggestionListStyle(), placement: 'bottom-start', reference: this.reference, offset: [0, 8], open: isShowSuggestion, autoFocus: false, toggle: e => {
                        this.setState({ isShowSuggestion: !isShowSuggestion });
                    } },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { ref: ref => (this.containerRef = ref), onKeyDown: this.handlePopperKeyDown }, searchSuggestion.map((suggestion, index) => {
                        const suggestionHtml = sanitizer.sanitize(suggestion.suggestionHtml);
                        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { key: index, type: 'secondary', size: 'sm', role: 'button', title: suggestion === null || suggestion === void 0 ? void 0 : suggestion.suggestion, className: 'suggestion-item', onClick: () => {
                                this.onSuggestionConfirm(suggestion.suggestion);
                            }, dangerouslySetInnerHTML: { __html: suggestionHtml } }));
                    }))))));
    }
}


/***/ }),

/***/ "./your-extensions/widgets/list-112/src/runtime/styles/style.tsx":
/*!***********************************************************************!*\
  !*** ./your-extensions/widgets/list-112/src/runtime/styles/style.tsx ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getSearchToolStyle": () => (/* binding */ getSearchToolStyle),
/* harmony export */   "getStyle": () => (/* binding */ getStyle),
/* harmony export */   "getToolsPopperStyle": () => (/* binding */ getToolsPopperStyle),
/* harmony export */   "getTopToolStyle": () => (/* binding */ getTopToolStyle),
/* harmony export */   "listStyle": () => (/* binding */ listStyle)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../config */ "./your-extensions/widgets/list-112/src/config.ts");


const listStyle = jimu_core__WEBPACK_IMPORTED_MODULE_0__.utils.memoize(function (options) {
    const { showTopTools, bottomToolH, topRightToolW, hasRecords, currentCardSize, pageStyle, scrollBarOpen, appMode, theme, isHeightAuto, isWidthAuto, listTemplateDefaultCardSize, layoutType, listLeftPadding } = options;
    const topToolsH = showTopTools ? _config__WEBPACK_IMPORTED_MODULE_1__.DS_TOOL_H : 0;
    const direction = layoutType === _config__WEBPACK_IMPORTED_MODULE_1__.ListLayoutType.Column ? _config__WEBPACK_IMPORTED_MODULE_1__.DirectionType.Horizon : _config__WEBPACK_IMPORTED_MODULE_1__.DirectionType.Vertical;
    const isHorizon = layoutType === _config__WEBPACK_IMPORTED_MODULE_1__.ListLayoutType.Column;
    const flexDirection = layoutType === _config__WEBPACK_IMPORTED_MODULE_1__.ListLayoutType.Column ? 'column' : 'row';
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.css `
    &.list-container {
      /* position: ${isHeightAuto ? 'absolute' : 'relative'}; */
      position: relative;
      z-index: 0;
      overflow: hidden;
      .bottom-boundary {
        height: 2px;
        width: 2px;
        position: absolute;
        bottom: 0;
        right: 0;
        opacity: 0;
      }
      ${direction === _config__WEBPACK_IMPORTED_MODULE_1__.DirectionType.Horizon
        ? `
          margin-left: ${_config__WEBPACK_IMPORTED_MODULE_1__.LIST_CARD_PADDING + 'px'};
          height: ${isHeightAuto ? 'auto' : 'calc(100% - 1px)'};
          width: ${isWidthAuto ? 'auto' : `calc(100% - ${_config__WEBPACK_IMPORTED_MODULE_1__.LIST_CARD_PADDING + 'px'})`};
        `
        : `
          margin-top: ${_config__WEBPACK_IMPORTED_MODULE_1__.LIST_CARD_PADDING + 'px'};
          width: ${isWidthAuto ? 'auto' : 'calc(100% - 1px)'};
          height: ${isHeightAuto ? 'auto' : `calc(100% - ${_config__WEBPACK_IMPORTED_MODULE_1__.LIST_CARD_PADDING + 'px'})`};
        `}

      .editing-mask-con {
        &:before {
          content: '';
          position: absolute;
          left: 0;
          top: ${topToolsH}px;
          z-index: 10;
          height: ${currentCardSize.height}px;
          width: ${listLeftPadding}px;
          background-color: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(theme.colors.black, 0.2)};
        }
        .editing-mask-list-grid {
          position: absolute;
          left: ${currentCardSize.width + listLeftPadding}px;
          top: ${topToolsH}px;
          right: 0;
          z-index: 10;
          height: ${currentCardSize.height}px;
          background-color: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(theme.colors.black, 0.2)};
        }
      }
      .editing-mask-list {
        position: absolute;
        top: ${layoutType !== _config__WEBPACK_IMPORTED_MODULE_1__.ListLayoutType.Column && hasRecords
        ? currentCardSize.height + topToolsH
        : topToolsH}px;
        left: ${layoutType === _config__WEBPACK_IMPORTED_MODULE_1__.ListLayoutType.Column && hasRecords
        ? currentCardSize.width
        : 0}px;
        bottom: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(bottomToolH)};
        right: 0;
        z-index: 10;
        background-color: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(theme.colors.black, 0.2)};
      }

      .editing-mask-ds-tool {
        position: absolute;
        z-index: 10;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        background-color: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(theme.colors.black, 0.2)};
      }

      .editing-mask-bottom-tool {
        position: absolute;
        z-index: 10;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        background-color: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(theme.colors.black, 0.2)};
      }

      .empty-con {
        position: absolute;
        top: 50%;
        left: 0;
        right: 0;
        z-index: 10;
        transform: translateY(-50%);
        padding-top: ${topToolsH}px;
        .jimu-icon {
          color: ${theme.colors.palette.warning[900]};
        }
        .discribtion {
          margin: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(9)} 0 ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(8)} 0;
          font-size: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(14)};
          color: ${theme.colors.black}
        }
        .clear-message-action-button {
          width: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(65)};
        }
      }

      .datasource-tools {
        position: relative;
        height: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(topToolsH)};
        padding: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(4)} ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(4)} ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(_config__WEBPACK_IMPORTED_MODULE_1__.DS_TOOL_BOTTOM_PADDING)} ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(4)};
        .list-sort-con {
          margin-right: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(4)};
        }
        .sort-fields-input {
          width: 200px;
          margin-left: 8px;
          margin-right: 16px;
        }

        .tool-row {
          height: ${_config__WEBPACK_IMPORTED_MODULE_1__.DS_TOOL_H - _config__WEBPACK_IMPORTED_MODULE_1__.DS_TOOL_BOTTOM_PADDING}px;
        }
        .ds-tools-line {
          width: 100%;
          height: 1px;
          margin-top: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(6)};
          background-color: ${theme.colors.palette.light[500]};
        }
        .ds-tools-line-blue {
          background-color: ${theme.colors.palette.info[500]};
        }
        .list-search-div {
          width: calc(100% - ${topRightToolW}px);
          .list-search {
            margin-bottom: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(-4)};
            width: 100%;
          }
        }

      }
      .tools-menu {
        color: ${theme.colors.palette.light[800]};
      }
      .tools-menu:hover {
        color: ${theme.colors.palette.info[500]};
      }
      .bottom-tools {
        position: relative;
        padding-top: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(_config__WEBPACK_IMPORTED_MODULE_1__.BOTTOM_TOOL_TOP_PADDING)};
        min-height: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(_config__WEBPACK_IMPORTED_MODULE_1__.BOTTOM_TOOL_H)};
        .scroll-navigator {
          .btn {
            border-radius: ${theme.borderRadiuses.circle};
          }
        }
      }

      .widget-list-list:focus {
        outline: none;
      }
      .widget-list-list {
        & {
          padding: 0;
          position: relative;
          padding-left: ${`${listLeftPadding}px`};
        }
        &>div {
          position: relative;
          flex: 1;
          box-sizing: content-box;
        }
        /* box-sizing: border-box; */
        ${!window.jimuConfig.isInBuilder || appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Run
        ? `overflow-${isHorizon ? 'y' : 'x'}: hidden !important;`
        : 'overflow: hidden !important;'}
        height: ${isHeightAuto
        ? 'auto'
        : `calc(100% - ${topToolsH}px - ${bottomToolH}px)`} !important;
        width: ${isWidthAuto ? 'auto' : '100%'} !important;
        display: flex;
        ${`flex-direction: ${flexDirection}`};
        ${isHeightAuto && `min-height: ${listTemplateDefaultCardSize.height}px;`};
        ${isWidthAuto && `min-width: ${listTemplateDefaultCardSize.width}px;`};
        ${isHorizon
        ? `
              ${`max-width: ${options.mexSize.maxWidth}`};
            `
        : `
              ${`max-height: calc(${options.mexSize.maxHeight} - ${topToolsH}px - ${bottomToolH}px)`};
            `}
      }
      .hide-list {
        overflow: hidden !important;
      }
      ${pageStyle === _config__WEBPACK_IMPORTED_MODULE_1__.PageStyle.Scroll && !scrollBarOpen
        ? `
          .widget-list-list::-webkit-scrollbar {
            display: none; //Safari and Chrome
          }
          .widget-list-list {
              -ms-overflow-style: none; //IE 10+
              overflow: -moz-scrollbars-none; //Firefox
              scrollbar-width: none; /* Firefox */
          }
        `
        : ''}
      .placeholder-alert-con {
        position: absolute;
        bottom: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(8)};
        right: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(8)};
        z-index: 11;
      }
    }
  `;
});
function getStyle(props, isEditing, showBottomTool) {
    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;
    const { config, id, appMode, isHeightAuto, isWidthAuto, theme } = props;
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.css `
    ${'&.list-widget-' + id} {
      overflow: visible;
      background-color: transparent;
      border: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(_config__WEBPACK_IMPORTED_MODULE_1__.COMMON_PADDING)} solid ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(theme.colors.black, window.jimuConfig.isInBuilder && isEditing ? 0.2 : 0)};
      height: ${isHeightAuto ? 'auto' : '100%'};
      width: ${isWidthAuto ? 'auto' : '100%'};
      .list-with-mask {
        position: absolute;
        left: 0;
        right: 0;
        bottom: 0;
        top: 0;
        background-color: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(theme.colors.black, 0)};
        z-index: 1;
      }
      .list-toggle-button {
        background: none;
      }
      .list-loading-con {
        min-height: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(120)};
        min-width: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(160)};
      }
      .list-error-con {
        .alert-panel {
          border-radius: 0;
          text-align: left;
          left: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(4)};
          right: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(4)};
          bottom: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(4)};
          width: auto;
        }
      }
      .refresh-loading-con {
        right: 0;
        bottom:${showBottomTool ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(_config__WEBPACK_IMPORTED_MODULE_1__.BOTTOM_TOOL_H) : 0};
        align-items: center;
        height: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(24)};
        .auto-refresh-loading {
          background: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba((_c = (_b = (_a = theme.colors) === null || _a === void 0 ? void 0 : _a.palette) === null || _b === void 0 ? void 0 : _b.dark) === null || _c === void 0 ? void 0 : _c[100], 0.2)};
          color: ${(_d = theme.colors) === null || _d === void 0 ? void 0 : _d.black};
          font-size: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(12)};
          line-height: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(24)};
          padding: 0 ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(7)};
        }
        &.horizon-loading {
          bottom:${showBottomTool ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(_config__WEBPACK_IMPORTED_MODULE_1__.BOTTOM_TOOL_H + 6) : jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(6)};
        }
        &.vertical-loading {
          right: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(6)};
        }
      }
      .loading-con {
        @keyframes loading {
          0% {transform: rotate(0deg); };
          100% {transform: rotate(360deg)};
        }
        width: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(16)};
        height: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(16)};
        border: 1px solid ${(_g = (_f = (_e = theme === null || theme === void 0 ? void 0 : theme.colors) === null || _e === void 0 ? void 0 : _e.palette) === null || _f === void 0 ? void 0 : _f.dark) === null || _g === void 0 ? void 0 : _g[100]};
        border-radius: 50%;
        border-top: 1px solid ${(_k = (_j = (_h = theme === null || theme === void 0 ? void 0 : theme.colors) === null || _h === void 0 ? void 0 : _h.palette) === null || _j === void 0 ? void 0 : _j.dark) === null || _k === void 0 ? void 0 : _k[800]};
        box-sizing: border-box;
        animation:loading 2s infinite linear;
        margin-right: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(4)};
      }
      .widget-list {
        overflow: ${window.jimuConfig.isInBuilder && appMode !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Run
        ? 'hidden'
        : 'auto'};
        height: ${isHeightAuto ? 'auto' : '100%'};
        width: ${isWidthAuto ? 'auto' : '100%'};
        /* align-items: ${config.alignType};
        justify-content: ${config.alignType}; */
        ${config.direction === _config__WEBPACK_IMPORTED_MODULE_1__.DirectionType.Horizon
        ? `
            overflow-y: hidden;
          `
        : `
            overflow-x: hidden;
          `}
      }
    }

  `;
}
function getToolsPopperStyle(props) {
    const { theme } = props;
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.css `
    & {
      padding: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(6)} ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(11)};
      height: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(40)};
    }
    .list-toggle-button {
      background: none;
    }
    .list-sort-con, .list-search-icon {
      margin-right: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(4)};
    }
    .ds-tools-line {
      width: 100%;
      height: 1px;
      background-color: ${theme.colors.palette.light[500]};
    }
    .ds-tools-line-blue {
      background-color: ${theme.colors.palette.info[500]};
    }
    .close-search {
      margin-top: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(-6)};
    }
  `;
}
function getSearchToolStyle(props) {
    const { theme } = props;
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.css `
    .close-search {
      border: 1px solid ${theme.colors.palette.light[500]};
      box-sizing: border-box;
      background-color: ${theme.colors.white};
    }
    .search-box-content {
      flex-direction: column;
      align-items: flex-start;
    }
  `;
}
function getTopToolStyle(props, showTopTools) {
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.css `
    .list-data-action {
      & {
        padding-left: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(4)};
      }
      &::after {
        content: '';
        position: absolute;
        left: 0;
        top: 50%;
        transform: translateY(-50%);
        height: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(16)};
        border-left: 1px solid ${showTopTools ? 'var(--light-400)' : 'transparent'}
      }
    }
    .m-left {
      margin-left: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(4)};
    }
  `;
}


/***/ }),

/***/ "./your-extensions/widgets/list-112/src/runtime/translations/default.ts":
/*!******************************************************************************!*\
  !*** ./your-extensions/widgets/list-112/src/runtime/translations/default.ts ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    _widgetLabel: 'List',
    _widgetDescription: 'A widget to display data in a list view.',
    _action_filter_label: 'Filter',
    _layout_REGULAR_label: 'Regular',
    _layout_HOVER_label: 'Hover',
    _layout_SELECTED_label: 'Selected',
    applyTo: 'Apply to {status}',
    listLoading: 'Loading',
    pleaseSelect: 'Please select',
    listNoData: 'No data',
    selectSortFields: 'Select sorting fields',
    clearFilter: 'Clear filter',
    isolate: 'Isolate',
    linkedToAnd: 'Linked to {where1} and {where2}',
    linkedTo: 'Linked to {where}',
    placeHolderTip: 'Please select a list template.',
    showSelected: 'Show selected',
    clearSelected: 'Clear selected',
    listSorting: 'Sorting',
    listSort: 'Sort',
    // guide
    guideStep2Title: 'Template',
    guideStep2Content: 'Click on a template and click start.',
    guideStep3Title: 'Data',
    guideStep3Content: 'Click on select data to add a data source.',
    guideStep4Title: 'Add new data',
    guideStep4Content: 'Click add new data to select a web map.',
    guideStep5Title: 'Select data',
    guideStep5Content: 'Click the feature layer in the select data panel and close the panel.',
    guideStep6Title: 'Data',
    guideStep6Content: 'Specifies the data source, allows you to filter the data and limit the number of features that appear in the list.',
    guideStep7Title: 'Arrangement',
    guideStep7Content: 'Click the expand icon to explore the Arrangement section. In here, it allows you to define the direction, height, spacing, and paging style for your list.',
    guideStep8Title: 'States',
    guideStep8Content: 'Click the expand icon to explore the available States. In this section, it provides a visual representation to communicate the state of the list items. There are three states: regular, selected, and hover. By default, the selected state is always on.',
    guideStep9Title: 'Tools',
    guideStep9Content: 'Click the expand icon to explore the available Tools. In here, you can include search, sort, filter, and show selected tools in your list.',
    guideStep10Title: 'Select image',
    guideStep10Content: 'Click the image widget to configure it in the content panel.',
    guideStep10Title2: 'Image settings',
    guideStep10Content2: 'Allows you to select the image source and other settings for your widget.',
    guideStep11Title: 'Select text',
    guideStep11Content: 'Click the text widget to add attributes in the widget toolbar.',
    guideStep11Title2: 'Text settings',
    guideStep11Content2: 'Provides the configurations and style, including adding dynamic content from the widget toolbar. ',
    guideStep12Title: 'End of tour',
    guideStep12Content: 'Add other widgets to enhance your experience.',
    clearSearch: 'Clear search',
    minimize: 'Minimize',
    topToolBack: 'Back',
    showAllListRecords: 'Show all records',
    listDataActionLabel: '{layer} list selection',
    searchResult: 'Search result',
    describeMessage: 'List item'
});


/***/ }),

/***/ "./your-extensions/widgets/list-112/src/runtime/utils/list-service.tsx":
/*!*****************************************************************************!*\
  !*** ./your-extensions/widgets/list-112/src/runtime/utils/list-service.tsx ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "compareQueryOptionsExceptPaging": () => (/* binding */ compareQueryOptionsExceptPaging),
/* harmony export */   "fetchSuggestionRecords": () => (/* binding */ fetchSuggestionRecords),
/* harmony export */   "getQueryOptions": () => (/* binding */ getQueryOptions)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

function getQueryOptions(state, props, pageSize) {
    var _a, _b;
    const options = {
        returnGeometry: true
    };
    const { config, useDataSources } = props;
    const { sortOptionName, searchText, currentFilter, filterApplied, datasource } = state;
    const useDS = useDataSources && useDataSources[0];
    if (!datasource || !useDS)
        return null;
    if (!datasource.query) {
        // not queryiable data source, return
        return null;
    }
    // sort
    let sortOption;
    if (config.sortOpen && config.sorts) {
        sortOption = config.sorts.find((sort) => sort.ruleOptionName === sortOptionName);
        sortOption = sortOption || config.sorts[0];
        if (!((_b = (_a = sortOption === null || sortOption === void 0 ? void 0 : sortOption.rule) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.jimuFieldName)) {
            sortOption = undefined;
        }
        if (sortOption) {
            const orderBys = [];
            sortOption.rule.forEach(sortData => {
                if (sortData.jimuFieldName) {
                    orderBys.push(`${sortData.jimuFieldName} ${sortData.order}`);
                }
            });
            options.orderByFields = orderBys;
        }
    }
    // filter
    if (config.filterOpen &&
        filterApplied &&
        config.filter &&
        currentFilter &&
        currentFilter.sql) {
        options.where = currentFilter.sql;
        options.sqlExpression = currentFilter;
    }
    // search
    if (config.searchOpen && config.searchFields && searchText) {
        const sqlExpr = getSQL(searchText, config, datasource);
        if (options.where) { // has filter
            const mergedExpr = jimu_core__WEBPACK_IMPORTED_MODULE_0__.dataSourceUtils.getMergedSQLExpressions([options.sqlExpression.asMutable({ deep: true }), sqlExpr], datasource);
            options.where = mergedExpr.sql;
            options.sqlExpression = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)(mergedExpr);
        }
        else {
            options.where = sqlExpr.sql;
            options.sqlExpression = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)(sqlExpr);
        }
    }
    // paging
    if (pageSize > 0) {
        options.page = state.page;
        options.pageSize = pageSize;
    }
    // Compare if query changed except paging
    const newQuery = options;
    return newQuery;
}
function fetchSuggestionRecords(searchText, config, datasource) {
    return __awaiter(this, void 0, void 0, function* () {
        const searchFields = config.searchFields.split(',');
        const queryParams = {
            page: 1,
            pageSize: 10,
            outFields: searchFields,
            returnDistinctValues: true,
            orderByFields: null
        };
        if (config.searchOpen && config.searchFields) {
            const sqlExpr = getSQL(searchText, config, datasource, true);
            queryParams.where = sqlExpr.sql;
            queryParams.sqlExpression = sqlExpr;
        }
        const searchReg = new RegExp(`(${escapeRegex(searchText)})`, 'gi');
        return queryRecords(queryParams, datasource).then((records) => __awaiter(this, void 0, void 0, function* () {
            let searchSuggestion = [];
            searchFields.forEach(attrName => {
                records.forEach(el => {
                    var _a;
                    const suggestionItem = (_a = el === null || el === void 0 ? void 0 : el.feature) === null || _a === void 0 ? void 0 : _a.attributes[attrName];
                    if (suggestionItem &&
                        !searchSuggestion.includes(suggestionItem) &&
                        suggestionItem.match(searchReg)) {
                        const suggestion = {
                            suggestionHtml: getSuggestionItem(suggestionItem, searchText),
                            suggestion: suggestionItem
                        };
                        searchSuggestion.push(suggestion);
                    }
                });
            });
            searchSuggestion = uniqueJson(searchSuggestion, 'suggestion');
            return Promise.resolve(searchSuggestion);
        }));
    });
}
function escapeRegex(string) {
    return string.replace(/[-[\]{}()*+!<=:?.\/\\^$|#\s,]/g, '\\$&');
}
function uniqueJson(jsonArr, key) {
    const result = jsonArr[0] ? [jsonArr[0]] : [];
    for (let i = 1; i < jsonArr.length; i++) {
        const item = jsonArr[i];
        let repeat = false;
        for (let j = 0; j < result.length; j++) {
            if (item[key] === result[j][key]) {
                repeat = true;
                break;
            }
        }
        if (!repeat) {
            result.push(item);
        }
    }
    return result;
}
function getSQL(searchText, config, datasource, fetchSuggestion = false) {
    const searchFields = config.searchFields.split(',');
    const searchExact = fetchSuggestion ? false : config.searchExact;
    const clauseOperator = searchExact ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.ClauseOperator.StringOperatorIs : jimu_core__WEBPACK_IMPORTED_MODULE_0__.ClauseOperator.StringOperatorContains;
    if (config.searchOpen && config.searchFields) {
        const clauses = searchFields.map(field => {
            let newSearchText = searchText;
            const codedValues = datasource === null || datasource === void 0 ? void 0 : datasource.getFieldCodedValueList(field);
            if (codedValues) {
                codedValues === null || codedValues === void 0 ? void 0 : codedValues.forEach(item => {
                    if (newSearchText === (item === null || item === void 0 ? void 0 : item.label)) {
                        newSearchText = item === null || item === void 0 ? void 0 : item.value;
                    }
                });
            }
            return jimu_core__WEBPACK_IMPORTED_MODULE_0__.dataSourceUtils.createSQLClause(field, clauseOperator, newSearchText);
        });
        const clauseSet = jimu_core__WEBPACK_IMPORTED_MODULE_0__.dataSourceUtils.createSQLClauseSet(jimu_core__WEBPACK_IMPORTED_MODULE_0__.ClauseLogic.Or, clauses);
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.dataSourceUtils.createSQLExpression(jimu_core__WEBPACK_IMPORTED_MODULE_0__.ClauseLogic.And, [clauseSet], datasource);
    }
}
function getSuggestionItem(suggestion, searchText) {
    if (!searchText)
        return suggestion;
    const replaceReg = new RegExp(`(${escapeRegex(searchText)})`, 'gi');
    return suggestion.replace(replaceReg, '<strong >$1</strong>');
}
function queryRecords(q, ds) {
    return __awaiter(this, void 0, void 0, function* () {
        if (!ds)
            return yield Promise.resolve([]);
        return yield ds
            .query(q, { scope: jimu_core__WEBPACK_IMPORTED_MODULE_0__.QueryScope.InRuntimeView })
            .then((queryResult) => __awaiter(this, void 0, void 0, function* () { return yield queryRecordsResult(q, queryResult); }));
    });
}
function queryRecordsResult(q, queryResult) {
    return __awaiter(this, void 0, void 0, function* () {
        return yield Promise.resolve((queryResult === null || queryResult === void 0 ? void 0 : queryResult.records) || []);
    });
}
function compareQueryOptionsExceptPaging(query1, query2, datasource) {
    // const isEqual = true;
    if (!datasource)
        return false;
    query1 = datasource.getRealQueryParams(query1, 'query');
    query2 = datasource.getRealQueryParams(query2, 'query');
    if (!query1 || !query2) {
        return false;
    }
    delete query1.page;
    delete query1.pageSize;
    delete query1.resultOffset;
    delete query1.resultRecordCount;
    delete query2.page;
    delete query2.pageSize;
    delete query2.resultOffset;
    delete query2.resultRecordCount;
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.utils.isDeepEqual(query1, query2);
}


/***/ }),

/***/ "./your-extensions/widgets/list-112/src/runtime/utils/utils.tsx":
/*!**********************************************************************!*\
  !*** ./your-extensions/widgets/list-112/src/runtime/utils/utils.tsx ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "checkIsShowDataAction": () => (/* binding */ checkIsShowDataAction),
/* harmony export */   "checkIsShowListToolsOnly": () => (/* binding */ checkIsShowListToolsOnly),
/* harmony export */   "createOutputDs": () => (/* binding */ createOutputDs),
/* harmony export */   "getBottomToolH": () => (/* binding */ getBottomToolH),
/* harmony export */   "getCardSizeConfig": () => (/* binding */ getCardSizeConfig),
/* harmony export */   "getCardSizeNumberInConfig": () => (/* binding */ getCardSizeNumberInConfig),
/* harmony export */   "getCardSizeWidthUnitInConfig": () => (/* binding */ getCardSizeWidthUnitInConfig),
/* harmony export */   "getDefaultMinListSize": () => (/* binding */ getDefaultMinListSize),
/* harmony export */   "getListHeight": () => (/* binding */ getListHeight),
/* harmony export */   "getPageSize": () => (/* binding */ getPageSize),
/* harmony export */   "initCardSize": () => (/* binding */ initCardSize),
/* harmony export */   "intersectionObserver": () => (/* binding */ intersectionObserver),
/* harmony export */   "isDsConfigured": () => (/* binding */ isDsConfigured),
/* harmony export */   "isEqualCardSizeByListLayout": () => (/* binding */ isEqualCardSizeByListLayout),
/* harmony export */   "isEqualNumber": () => (/* binding */ isEqualNumber),
/* harmony export */   "isScrollStart": () => (/* binding */ isScrollStart),
/* harmony export */   "showBottomTools": () => (/* binding */ showBottomTools),
/* harmony export */   "showClearSelected": () => (/* binding */ showClearSelected),
/* harmony export */   "showDisplaySelectedOnly": () => (/* binding */ showDisplaySelectedOnly),
/* harmony export */   "showFilter": () => (/* binding */ showFilter),
/* harmony export */   "showSearch": () => (/* binding */ showSearch),
/* harmony export */   "showSort": () => (/* binding */ showSort),
/* harmony export */   "showTopTools": () => (/* binding */ showTopTools)
/* harmony export */ });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../config */ "./your-extensions/widgets/list-112/src/config.ts");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");



function isScrollStart(listDiv, lastScrollOffset) {
    if (!listDiv)
        return true;
    const scrollTOrL = lastScrollOffset;
    const isStart = scrollTOrL < 2;
    return isStart;
}
function isEqualCardSizeByListLayout(cardSize1, cardSize2, layoutType) {
    if (layoutType === _config__WEBPACK_IMPORTED_MODULE_0__.ListLayoutType.Column) {
        return isEqualNumber(cardSize1.width, cardSize2.width);
    }
    else if (layoutType === _config__WEBPACK_IMPORTED_MODULE_0__.ListLayoutType.Row) {
        return isEqualNumber(cardSize1.height, cardSize2.height);
    }
    else {
        return isEqualNumber(cardSize1.width, cardSize2.width) && isEqualNumber(cardSize1.height, cardSize2.height);
    }
}
function isEqualNumber(num1, num2) {
    if (Math.abs(num1 - num2) < 0.0001) {
        return true;
    }
    else {
        return false;
    }
}
function createOutputDs(records, outputDsId, useDs) {
    if (!outputDsId || !useDs)
        return;
    const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance();
    if (dsManager.getDataSource(outputDsId)) {
        if (dsManager.getDataSource(outputDsId).getDataSourceJson()
            .originDataSources[0].dataSourceId !== useDs.dataSourceId) {
            dsManager.destroyDataSource(outputDsId);
            dsManager.createDataSource(outputDsId).then(ods => {
                ods.setRecords(records);
            });
        }
        else {
            const ods = dsManager.getDataSource(outputDsId);
            ods.setRecords(records);
        }
    }
    else {
        dsManager.createDataSource(outputDsId).then(ods => {
            ods.setRecords(records);
        });
    }
}
function getCardSizeNumberInConfig(props, widgetRect) {
    const { config } = props;
    const cardSizeInConfig = getCardSizeConfig(props);
    const widthLinearUnit = jimu_ui__WEBPACK_IMPORTED_MODULE_2__.utils.toLinearUnit(cardSizeInConfig.width);
    let width = initCardSize(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.utils.toLinearUnit(cardSizeInConfig.width), widgetRect.width + config.horizontalSpace - _config__WEBPACK_IMPORTED_MODULE_0__.SCROLL_BAR_WIDTH);
    //The width in percentage includes space, the width in px does not include
    if (widthLinearUnit.unit === jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DistanceUnits.PERCENTAGE) {
        width = (width - config.horizontalSpace) > 0 ? width - config.horizontalSpace : _config__WEBPACK_IMPORTED_MODULE_0__.LIST_CARD_MIN_SIZE;
    }
    let height = initCardSize(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.utils.toLinearUnit(cardSizeInConfig.height), widgetRect.height);
    if (config.keepAspectRatio && (config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_0__.ListLayoutType.GRID) {
        height = width * (config === null || config === void 0 ? void 0 : config.gridItemSizeRatio);
    }
    const cardSize = {
        width: width,
        height: height
    };
    return cardSize;
}
function getCardSizeConfig(props) {
    var _a;
    const { config, builderStatus, browserSizeMode } = props;
    let cardConfigs = config === null || config === void 0 ? void 0 : config.asMutable({ deep: true }).cardConfigs[builderStatus];
    if (!cardConfigs || !cardConfigs.cardSize) {
        cardConfigs = config === null || config === void 0 ? void 0 : config.asMutable({ deep: true }).cardConfigs[_config__WEBPACK_IMPORTED_MODULE_0__.Status.Regular];
    }
    let cardSizeInConfig = (_a = cardConfigs === null || cardConfigs === void 0 ? void 0 : cardConfigs.cardSize) === null || _a === void 0 ? void 0 : _a[browserSizeMode];
    if (!cardSizeInConfig) {
        cardSizeInConfig = cardConfigs.cardSize[Object.keys(cardConfigs.cardSize)[0]];
    }
    return cardSizeInConfig;
}
function getDefaultMinListSize(props) {
    const cardSizeInConfig = getCardSizeConfig(props);
    const listMinSize = {
        width: _config__WEBPACK_IMPORTED_MODULE_0__.LIST_CARD_MIN_SIZE,
        height: _config__WEBPACK_IMPORTED_MODULE_0__.LIST_CARD_MIN_SIZE
    };
    const cardSizeUnit = {
        width: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.utils.toLinearUnit(cardSizeInConfig.width),
        height: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.utils.toLinearUnit(cardSizeInConfig.height)
    };
    if (cardSizeUnit.width.unit === jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DistanceUnits.PERCENTAGE) {
        listMinSize.width = (_config__WEBPACK_IMPORTED_MODULE_0__.LIST_CARD_MIN_SIZE + 30) / cardSizeUnit.width.distance * 100;
    }
    if (cardSizeUnit.height.unit === jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DistanceUnits.PERCENTAGE) {
        listMinSize.height = (_config__WEBPACK_IMPORTED_MODULE_0__.LIST_CARD_MIN_SIZE + 30) / cardSizeUnit.height.distance * 100;
    }
    return listMinSize;
}
function getCardSizeWidthUnitInConfig(props) {
    const { config } = props;
    const cardSizeInConfig = getCardSizeConfig(props);
    const width = jimu_ui__WEBPACK_IMPORTED_MODULE_2__.utils.toLinearUnit(cardSizeInConfig.width);
    if (width.unit === jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DistanceUnits.PERCENTAGE) {
        width.distance = (width.distance - config.horizontalSpace) > 0 ? width.distance - config.horizontalSpace : _config__WEBPACK_IMPORTED_MODULE_0__.LIST_CARD_MIN_SIZE;
    }
    const cardSizeWidthUnit = {
        width: width,
        height: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.utils.toLinearUnit(cardSizeInConfig.height)
    };
    return cardSizeWidthUnit;
}
function initCardSize(sizeUnit, widgetSize) {
    if (sizeUnit.unit === jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DistanceUnits.PERCENTAGE) {
        return (sizeUnit.distance / 100) * widgetSize;
    }
    else {
        return sizeUnit.distance;
    }
}
function getPageSize(widgetRect, listHeight, props, columnCount) {
    const cardSize = getCardSizeNumberInConfig(props, widgetRect);
    const { config, isHeightAuto, isWidthAuto } = props;
    let pageSize;
    if (config.pageStyle === _config__WEBPACK_IMPORTED_MODULE_0__.PageStyle.Scroll) {
        if (!widgetRect) {
            return 0;
        }
        switch (config === null || config === void 0 ? void 0 : config.layoutType) {
            case _config__WEBPACK_IMPORTED_MODULE_0__.ListLayoutType.Row:
                if (widgetRect.height === 0)
                    return 0;
                if (isHeightAuto) {
                    listHeight = document.body.scrollHeight;
                }
                pageSize = Math.ceil((listHeight + config.space) / (cardSize.height + config.space)) + 1;
                break;
            case _config__WEBPACK_IMPORTED_MODULE_0__.ListLayoutType.Column:
                if (widgetRect.width === 0)
                    return 0;
                let listWidth = widgetRect.width;
                if (isWidthAuto) {
                    listWidth = document.body.scrollWidth;
                }
                pageSize = Math.ceil((listWidth + config.space) / (cardSize.width + config.space)) + 1;
                break;
            case _config__WEBPACK_IMPORTED_MODULE_0__.ListLayoutType.GRID:
                if (widgetRect.height === 0)
                    return 0;
                if (isHeightAuto) {
                    listHeight = document.body.scrollHeight;
                }
                pageSize = Math.ceil((listHeight + (config === null || config === void 0 ? void 0 : config.verticalSpace)) / (cardSize.height + config.space)) * columnCount;
                break;
        }
        if (config.navigatorOpen) {
            pageSize = Math.max(pageSize, config.scrollStep);
        }
    }
    else {
        pageSize = config.itemsPerPage;
    }
    return pageSize;
}
function getBottomToolH(paginatorDiv, showBottomTools) {
    let bottomToolH = _config__WEBPACK_IMPORTED_MODULE_0__.BOTTOM_TOOL_H;
    if (paginatorDiv) {
        bottomToolH = paginatorDiv.clientHeight;
    }
    bottomToolH = showBottomTools ? bottomToolH : 0;
    return bottomToolH;
}
function getListHeight(widgetRect, bottomToolH, showTopTool) {
    const dsToolH = showTopTool ? _config__WEBPACK_IMPORTED_MODULE_0__.DS_TOOL_H : 0;
    if (!widgetRect)
        return 0;
    const height = widgetRect.height - dsToolH - bottomToolH;
    return height < 0 ? 0 : height;
}
function showBottomTools(props, state) {
    const { config } = props;
    const { datasource } = state;
    return (!!datasource &&
        !(config.pageStyle === _config__WEBPACK_IMPORTED_MODULE_0__.PageStyle.Scroll && !config.navigatorOpen));
}
function showTopTools(props) {
    return (checkIsShowListToolsOnly(props) || checkIsShowDataAction(props));
}
function checkIsShowListToolsOnly(props) {
    return (showSort(props) ||
        showDisplaySelectedOnly(props) ||
        showClearSelected(props) ||
        showFilter(props) ||
        showSearch(props));
}
function isDsConfigured(props) {
    const { useDataSources } = props;
    return !!useDataSources && !!useDataSources[0];
}
function checkIsShowDataAction(props) {
    var _a, _b, _c;
    const { id } = props;
    const appConfig = (_b = (_a = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.getAppStore)()) === null || _a === void 0 ? void 0 : _a.getState()) === null || _b === void 0 ? void 0 : _b.appConfig;
    const widgetJson = (_c = appConfig === null || appConfig === void 0 ? void 0 : appConfig.widgets) === null || _c === void 0 ? void 0 : _c[id];
    const enableDataAction = (widgetJson === null || widgetJson === void 0 ? void 0 : widgetJson.enableDataAction) === undefined ? true : widgetJson === null || widgetJson === void 0 ? void 0 : widgetJson.enableDataAction;
    return enableDataAction && isDsConfigured(props);
}
function showSort(props) {
    const { config } = props;
    if (!config.sortOpen || !config.sorts || config.sorts.length < 1)
        return false;
    const sorts = config.sorts;
    let isValid = false;
    sorts.some((sort) => {
        sort.rule &&
            sort.rule.some(sortData => {
                if (sortData && !!sortData.jimuFieldName) {
                    isValid = true;
                }
                return isValid;
            });
        return isValid;
    });
    return isValid;
}
function showSearch(props) {
    const { config } = props;
    return config.searchOpen && config.searchFields && config.searchFields !== '';
}
function showFilter(props) {
    const { config } = props;
    return config.filterOpen && !!config.filter;
}
function showDisplaySelectedOnly(props) {
    const { config } = props;
    return (config.showSelectedOnlyOpen &&
        config.cardConfigs[_config__WEBPACK_IMPORTED_MODULE_0__.Status.Selected].selectionMode !== _config__WEBPACK_IMPORTED_MODULE_0__.SelectionModeType.None);
}
function showClearSelected(props) {
    const { config } = props;
    return (config.showClearSelected &&
        config.cardConfigs[_config__WEBPACK_IMPORTED_MODULE_0__.Status.Selected].selectionMode !== _config__WEBPACK_IMPORTED_MODULE_0__.SelectionModeType.None);
}
function intersectionObserver(ref, rootElement, onChange, options) {
    const option = options || { root: rootElement };
    const callback = function (entries, observer) {
        const isIn = entries[0].intersectionRatio > 0;
        onChange && onChange(isIn);
    };
    const observer = new IntersectionObserver(callback, option);
    observer.observe(ref);
    return observer;
}


/***/ }),

/***/ "./your-extensions/widgets/list-112/src/version-manager.ts":
/*!*****************************************************************!*\
  !*** ./your-extensions/widgets/list-112/src/version-manager.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "versionManager": () => (/* binding */ versionManager)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui/basic/sql-expression-runtime */ "jimu-ui/basic/sql-expression-runtime");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./config */ "./your-extensions/widgets/list-112/src/config.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const getDs = function (filter, widgetId) {
    var _a, _b, _c, _d;
    return __awaiter(this, void 0, void 0, function* () {
        let ds;
        const dataSource = (_d = (_c = (_b = (_a = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState()) === null || _a === void 0 ? void 0 : _a.appConfig) === null || _b === void 0 ? void 0 : _b.widgets[widgetId]) === null || _c === void 0 ? void 0 : _c.useDataSources) === null || _d === void 0 ? void 0 : _d[0];
        const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceManager.getInstance();
        if (filter && dataSource) {
            ds = dsManager.createDataSourceByUseDataSource(Object.assign({}, dataSource, {
                mainDataSourceId: dataSource.mainDataSourceId
            }), 'localId');
        }
        return yield Promise.resolve(ds);
    });
};
const checkIsShowAutoRefreshSetting = (datasource) => {
    if (!datasource)
        return false;
    const interval = (datasource === null || datasource === void 0 ? void 0 : datasource.getAutoRefreshInterval()) || 0;
    return interval > 0;
};
class VersionManager extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.BaseVersionManager {
    constructor() {
        super(...arguments);
        this.versions = [
            {
                version: '1.1.0',
                description: '',
                upgrader: (oldConfig, id) => __awaiter(this, void 0, void 0, function* () {
                    const filter = oldConfig.filter;
                    return yield getDs(filter, id).then(ds => {
                        let newConfig = oldConfig;
                        const newFItems = filter
                            ? (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_1__.updateSQLExpressionByVersion)(filter, '1.1.0', ds)
                            : null;
                        newConfig = newConfig.set('filter', newFItems);
                        return newConfig;
                    });
                })
            },
            {
                version: '1.5.0',
                description: '1.5.0',
                upgrader: (oldConfig, id) => __awaiter(this, void 0, void 0, function* () {
                    const filter = oldConfig.filter;
                    return yield getDs(filter, id).then(ds => {
                        let newConfig = oldConfig;
                        if (typeof (oldConfig === null || oldConfig === void 0 ? void 0 : oldConfig.isShowAutoRefresh) !== 'boolean') {
                            const isShowAutoRefresh = checkIsShowAutoRefreshSetting(ds);
                            newConfig = newConfig.set('isShowAutoRefresh', isShowAutoRefresh);
                        }
                        return newConfig;
                    });
                })
            },
            {
                version: '1.8.0',
                description: '1.8.0',
                upgrader: (oldConfig, id) => __awaiter(this, void 0, void 0, function* () {
                    let newConfig = oldConfig;
                    if ((oldConfig === null || oldConfig === void 0 ? void 0 : oldConfig.direction) && !(oldConfig === null || oldConfig === void 0 ? void 0 : oldConfig.layoutType)) {
                        const layoutType = (oldConfig === null || oldConfig === void 0 ? void 0 : oldConfig.direction) === _config__WEBPACK_IMPORTED_MODULE_2__.DirectionType.Horizon ? _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Column : _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Row;
                        newConfig = newConfig.set('layoutType', layoutType).set('keepAspectRatio', false);
                    }
                    return newConfig;
                })
            }
        ];
    }
}
const versionManager = new VersionManager();


/***/ }),

/***/ "jimu-core":
/*!****************************!*\
  !*** external "jimu-core" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_core__;

/***/ }),

/***/ "react":
/*!**********************************!*\
  !*** external "jimu-core/react" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_react__;

/***/ }),

/***/ "jimu-layouts/layout-runtime":
/*!**********************************************!*\
  !*** external "jimu-layouts/layout-runtime" ***!
  \**********************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__;

/***/ }),

/***/ "jimu-ui":
/*!**************************!*\
  !*** external "jimu-ui" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_ui__;

/***/ }),

/***/ "jimu-ui/basic/sql-expression-runtime":
/*!*******************************************************!*\
  !*** external "jimu-ui/basic/sql-expression-runtime" ***!
  \*******************************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__;

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _assertThisInitialized)
/* harmony export */ });
function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }
  return self;
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/extends.js":
/*!************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/extends.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _extends)
/* harmony export */ });
function _extends() {
  _extends = Object.assign ? Object.assign.bind() : function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends.apply(this, arguments);
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js":
/*!******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _inheritsLoose)
/* harmony export */ });
/* harmony import */ var _setPrototypeOf_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./setPrototypeOf.js */ "./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js");

function _inheritsLoose(subClass, superClass) {
  subClass.prototype = Object.create(superClass.prototype);
  subClass.prototype.constructor = subClass;
  (0,_setPrototypeOf_js__WEBPACK_IMPORTED_MODULE_0__["default"])(subClass, superClass);
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _objectWithoutPropertiesLoose)
/* harmony export */ });
function _objectWithoutPropertiesLoose(source, excluded) {
  if (source == null) return {};
  var target = {};
  var sourceKeys = Object.keys(source);
  var key, i;
  for (i = 0; i < sourceKeys.length; i++) {
    key = sourceKeys[i];
    if (excluded.indexOf(key) >= 0) continue;
    target[key] = source[key];
  }
  return target;
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _setPrototypeOf)
/* harmony export */ });
function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };
  return _setPrototypeOf(o, p);
}

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/publicPath */
/******/ 	(() => {
/******/ 		__webpack_require__.p = "";
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other entry modules.
(() => {
/*!******************************************!*\
  !*** ./jimu-core/lib/set-public-path.ts ***!
  \******************************************/
/**
 * Webpack will replace __webpack_public_path__ with __webpack_require__.p to set the public path dynamically.
 * The reason why we can't set the publicPath in webpack config is: we change the publicPath when download.
 * */
// eslint-disable-next-line
// @ts-ignore
__webpack_require__.p = window.jimuConfig.baseUrl;

})();

// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";
/*!*****************************************************************!*\
  !*** ./your-extensions/widgets/list-112/src/runtime/widget.tsx ***!
  \*****************************************************************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Widget": () => (/* binding */ Widget),
/* harmony export */   "__set_webpack_public_path__": () => (/* binding */ __set_webpack_public_path__),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config */ "./your-extensions/widgets/list-112/src/config.ts");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _utils_list_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utils/list-service */ "./your-extensions/widgets/list-112/src/runtime/utils/list-service.tsx");
/* harmony import */ var _styles_style__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./styles/style */ "./your-extensions/widgets/list-112/src/runtime/styles/style.tsx");
/* harmony import */ var _components_list_card_editor__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./components/list-card-editor */ "./your-extensions/widgets/list-112/src/runtime/components/list-card-editor.tsx");
/* harmony import */ var _components_list_card_viewer__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./components/list-card-viewer */ "./your-extensions/widgets/list-112/src/runtime/components/list-card-viewer.tsx");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./translations/default */ "./your-extensions/widgets/list-112/src/runtime/translations/default.ts");
/* harmony import */ var _components_search_box__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./components/search-box */ "./your-extensions/widgets/list-112/src/runtime/components/search-box.tsx");
/* harmony import */ var react_window__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! react-window */ "./node_modules/react-window/dist/index.esm.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var _components_my_dropdown__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./components/my-dropdown */ "./your-extensions/widgets/list-112/src/runtime/components/my-dropdown.tsx");
/* harmony import */ var _components_filter_picker__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./components/filter-picker */ "./your-extensions/widgets/list-112/src/runtime/components/filter-picker.tsx");
/* harmony import */ var _components_bottom_tools__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./components/bottom-tools */ "./your-extensions/widgets/list-112/src/runtime/components/bottom-tools.tsx");
/* harmony import */ var _version_manager__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../version-manager */ "./your-extensions/widgets/list-112/src/version-manager.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./utils/utils */ "./your-extensions/widgets/list-112/src/runtime/utils/utils.tsx");
/* harmony import */ var jimu_icons_outlined_editor_menu__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! jimu-icons/outlined/editor/menu */ "./jimu-icons/outlined/editor/menu.tsx");
/* harmony import */ var jimu_icons_outlined_editor_search__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! jimu-icons/outlined/editor/search */ "./jimu-icons/outlined/editor/search.tsx");
/* harmony import */ var jimu_icons_outlined_editor_show_selection__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! jimu-icons/outlined/editor/show-selection */ "./jimu-icons/outlined/editor/show-selection.tsx");
/* harmony import */ var jimu_icons_outlined_editor_trash_check__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! jimu-icons/outlined/editor/trash-check */ "./jimu-icons/outlined/editor/trash-check.tsx");
/* harmony import */ var jimu_icons_outlined_suggested_warning__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! jimu-icons/outlined/suggested/warning */ "./jimu-icons/outlined/suggested/warning.tsx");
/* harmony import */ var jimu_icons_svg_outlined_brand_widget_list_svg__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! jimu-icons/svg/outlined/brand/widget-list.svg */ "./jimu-icons/svg/outlined/brand/widget-list.svg");
/* harmony import */ var jimu_icons_svg_outlined_brand_widget_list_svg__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(jimu_icons_svg_outlined_brand_widget_list_svg__WEBPACK_IMPORTED_MODULE_21__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
/** @jsx jsx */























const defaultRecordsItem = { fake: true };
const MESSAGES = Object.assign({}, _translations_default__WEBPACK_IMPORTED_MODULE_8__["default"], jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages, jimu_core__WEBPACK_IMPORTED_MODULE_0__.defaultMessages);
const { SELECTION_DATA_VIEW_ID } = jimu_core__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS;
class Widget extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.isFirstLoad = true;
        this.isHasScrolled = false; /* Whether the List has scrolled */
        this.isHasRenderList = false;
        this.isHasPublishMessageAction = false;
        this.isSetlayout = false;
        this.resetTimeout = null;
        this.isHasInitCurrentCardSize = false;
        this.needAutoScrollToSelectedItemWhenLoadPage = false;
        this.autoScrollIndex = null;
        this.isScrollToNextStep = false;
        this.updateWidgetRectTimeout = undefined;
        this.updatePageWhenPrePageSizeChange = (preConfig) => {
            var _a, _b;
            if (!((_a = this.props.config) === null || _a === void 0 ? void 0 : _a.itemsPerPage)) {
                return false;
            }
            if ((preConfig === null || preConfig === void 0 ? void 0 : preConfig.itemsPerPage) !== ((_b = this.props.config) === null || _b === void 0 ? void 0 : _b.itemsPerPage)) {
                this.setState({
                    page: 1
                });
            }
        };
        this.checkIsRecordsChange = (records, preRecords) => {
            var _a;
            const recordsId = (records === null || records === void 0 ? void 0 : records.map(record => record === null || record === void 0 ? void 0 : record.getId())) || [];
            const preRecordsId = (preRecords === null || preRecords === void 0 ? void 0 : preRecords.map(record => record === null || record === void 0 ? void 0 : record.getId())) || [];
            if ((recordsId === null || recordsId === void 0 ? void 0 : recordsId.length) !== preRecordsId) {
                return true;
            }
            else {
                return ((_a = recordsId === null || recordsId === void 0 ? void 0 : recordsId.filter(id => !(preRecordsId === null || preRecordsId === void 0 ? void 0 : preRecordsId.includes(id)))) === null || _a === void 0 ? void 0 : _a.length) > 0;
            }
        };
        this.resetAfterIndices = () => {
            var _a, _b, _c, _d;
            ((_b = (_a = this.listRef) === null || _a === void 0 ? void 0 : _a.current) === null || _b === void 0 ? void 0 : _b.resetAfterIndices) && ((_d = (_c = this.listRef) === null || _c === void 0 ? void 0 : _c.current) === null || _d === void 0 ? void 0 : _d.resetAfterIndices({
                columnIndex: 0,
                rowIndex: 0,
                shouldForceUpdate: false
            }));
        };
        this.setListLayoutInWidgetState = () => {
            const { layoutId, layoutItemId, id, selectionIsSelf } = this.props;
            if (layoutId && id && layoutItemId && !this.isSetlayout && selectionIsSelf) {
                this.props.dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.widgetStatePropChange(id, 'layoutInfo', {
                    layoutId,
                    layoutItemId
                }));
                this.isSetlayout = true;
            }
        };
        this.setListParentSizeInWidgetState = () => {
            const { browserSizeMode, id, parentSize, layoutId } = this.props;
            const appConfig = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig;
            const viewportSize = jimu_core__WEBPACK_IMPORTED_MODULE_0__.utils.findViewportSize(appConfig, browserSizeMode);
            const selector = `div.layout[data-layoutid=${layoutId}]`;
            const parentElement = document.querySelector(selector);
            const newParentSize = {
                width: (parentElement === null || parentElement === void 0 ? void 0 : parentElement.clientWidth) || viewportSize.width,
                height: (parentElement === null || parentElement === void 0 ? void 0 : parentElement.clientHeight) || viewportSize.height
            };
            if (!parentSize || parentSize.height !== newParentSize.height || parentSize.width !== newParentSize.width) {
                this.props.dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.widgetStatePropChange(id, 'parentSize', newParentSize));
            }
        };
        this.getBodySize = () => {
            this.bodySize = {
                scrollWidth: document.documentElement.scrollWidth,
                scrollHeight: document.documentElement.scrollHeight,
                clientWidth: document.documentElement.clientWidth,
                clientHeight: document.documentElement.clientHeight
            };
        };
        this.updateListInBuilder = (preProps, preState) => {
            var _a;
            const { config } = this.props;
            if (!window.jimuConfig.isInBuilder) {
                return false;
            }
            const currentCardSize = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getCardSizeNumberInConfig(this.props, (_a = this.state) === null || _a === void 0 ? void 0 : _a.widgetRect);
            // listen layout properties change and then update list
            let hideCardTool = this.layoutPropertiesChange(preProps, preState);
            this.updateScrollContentSize(preProps.config);
            // listen paging type change
            this.pageTypeChange(preProps);
            // listen useDatasources change
            this.useDatasourcesChange(preProps);
            // listening listDiv size's change
            hideCardTool = this.listDivSizeChange(preProps, preState, currentCardSize, hideCardTool);
            if (hideCardTool) {
                this.updateCardToolPosition();
            }
            // listen sort change
            this.listSortChange(preProps);
            // listen filter change
            this.listFilterChange(preProps);
            const isSelectionModeChange = config.cardConfigs[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Selected].selectionMode !==
                preProps.config.cardConfigs[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Selected].selectionMode;
            if (isSelectionModeChange) {
                this.selectRecords([]);
            }
        };
        this.layoutPropertiesChange = (preProps, preState) => {
            var _a, _b;
            const { config, top, left } = this.props;
            let hideCardTool = false;
            if (!window.jimuConfig.isInBuilder) {
                return false;
            }
            let refreshList = false;
            // listen layout properties change and then update list
            const currentCardSize = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getCardSizeNumberInConfig(this.props, this.state.widgetRect);
            const oldCardSize = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getCardSizeNumberInConfig(preProps, preState === null || preState === void 0 ? void 0 : preState.widgetRect);
            this.updateScrollContentSize(preProps.config);
            const isWidgetPositionChange = top !== preProps.top || left !== preProps.left;
            const isListLayoutChange = (config === null || config === void 0 ? void 0 : config.layoutType) !== preProps.config.layoutType;
            const isEqualCardSizeByListLayout = !_utils_utils__WEBPACK_IMPORTED_MODULE_15__.isEqualCardSizeByListLayout(oldCardSize, currentCardSize, config.layoutType); // for change template
            if (isListLayoutChange ||
                isEqualCardSizeByListLayout ||
                isWidgetPositionChange) {
                hideCardTool = true;
                if (isEqualCardSizeByListLayout) {
                    const newState = {
                        currentCardSize
                    };
                    refreshList = true;
                    this.setState(newState, () => {
                        if (refreshList)
                            this.refreshList();
                    });
                }
                else if (isListLayoutChange) {
                    this.handleResizeCard(this.state.currentCardSize, true, false, false, true);
                }
            }
            if (!refreshList) {
                const isSpaceNotChange = (config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID
                    ? _utils_utils__WEBPACK_IMPORTED_MODULE_15__.isEqualNumber(config === null || config === void 0 ? void 0 : config.horizontalSpace, (_a = preProps.config) === null || _a === void 0 ? void 0 : _a.horizontalSpace) && _utils_utils__WEBPACK_IMPORTED_MODULE_15__.isEqualNumber(config === null || config === void 0 ? void 0 : config.verticalSpace, (_b = preProps.config) === null || _b === void 0 ? void 0 : _b.verticalSpace)
                    : _utils_utils__WEBPACK_IMPORTED_MODULE_15__.isEqualNumber(config.space, preProps.config.space);
                if (!isSpaceNotChange || config.layoutType !== preProps.config.layoutType) {
                    refreshList = true;
                    this.refreshList();
                }
            }
            return hideCardTool;
        };
        this.listDivSizeChange = (preProps, preState, currentCardSize, hideCardTool) => {
            var _a;
            const { config, isHeightAuto } = this.props;
            const { listDivSize } = this.state;
            const showBT = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.showBottomTools(this.props, this.state);
            const oldShowBT = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.showBottomTools(preProps, preState);
            const showDS = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.showTopTools(this.props);
            const oldShowDS = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.showTopTools(preProps);
            if (showBT !== oldShowBT || showDS !== oldShowDS) {
                if (!isHeightAuto) {
                    if (config.layoutType === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Column) {
                        let cardH = ((_a = this.state.widgetRect) === null || _a === void 0 ? void 0 : _a.height) || (listDivSize === null || listDivSize === void 0 ? void 0 : listDivSize.clientHeight);
                        cardH -=
                            _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getBottomToolH(this.paginatorDiv.current, showBT) +
                                (showDS ? 1 : 0) * _config__WEBPACK_IMPORTED_MODULE_2__.DS_TOOL_H;
                        if (cardH < _config__WEBPACK_IMPORTED_MODULE_2__.LIST_CARD_MIN_SIZE)
                            return;
                        const cardSize = {
                            height: cardH,
                            width: currentCardSize.width
                        };
                        this.handleResizeCard(cardSize, true, false, false, true);
                    }
                }
                else {
                    hideCardTool = true;
                }
            }
            return hideCardTool;
        };
        this.appModeChange = preProps => {
            const { appMode, selectionIsSelf, selectionStatus, builderStatus } = this.props;
            if (preProps.appMode !== appMode) {
                if (appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Run) {
                    this.editBuilderAndSettingStatus(_config__WEBPACK_IMPORTED_MODULE_2__.Status.Regular);
                }
                else {
                    if (selectionStatus !== builderStatus) {
                        // change status by toc
                        if (!selectionStatus) {
                            if (!selectionIsSelf) {
                                this.editBuilderAndSettingStatus(_config__WEBPACK_IMPORTED_MODULE_2__.Status.Regular);
                            }
                        }
                        else {
                            this.editBuilderAndSettingStatus(selectionStatus);
                        }
                    }
                    this.setState({
                        showSelectionOnly: false,
                        searchText: undefined,
                        filterApplied: false,
                        hoverIndex: -1
                    }, () => {
                        this.scrollToIndex(0);
                    });
                }
            }
        };
        this.pageTypeChange = preProps => {
            const { pageStyle } = this.props.config;
            const oldPageStyle = preProps.config.pageStyle;
            if (pageStyle !== oldPageStyle) {
                this.setState({
                    page: 1
                });
            }
        };
        this.useDatasourcesChange = preProps => {
            const { useDataSources } = this.props;
            const oldUseDataSources = preProps.useDataSources;
            if (useDataSources && useDataSources[0]) {
                const oldUseDataSource = oldUseDataSources && oldUseDataSources[0];
                if (!oldUseDataSource ||
                    oldUseDataSource.dataSourceId !== useDataSources[0].dataSourceId) {
                    // reset querysStart
                    this.setState({
                        page: 1
                    });
                }
            }
            else {
                // remove ds maybe
                this.setState({
                    datasource: undefined
                });
            }
        };
        this.listSortChange = preProps => {
            const { config } = this.props;
            if (config.sortOpen) {
                const sorts = config.sorts;
                const oldSorts = preProps.config.sorts;
                if (sorts !== oldSorts) {
                    this.setState({
                        sortOptionName: undefined
                    });
                }
            }
        };
        this.listFilterChange = preProps => {
            const { config } = this.props;
            if (config.filterOpen) {
                const filter = config.filter;
                const oldFilter = preProps.config.filter;
                if (filter !== oldFilter) {
                    this.setState({
                        currentFilter: undefined,
                        filterApplied: false
                    });
                }
            }
        };
        this.setSelectionStatus = () => {
            const { id, selectionIsInSelf } = this.props;
            this.props.dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.widgetStatePropChange(id, 'selectionIsInSelf', selectionIsInSelf));
        };
        this.updateScrollContentSize = preConfig => {
            const { config } = this.props;
            const isSpaceNotChange = (config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID
                ? _utils_utils__WEBPACK_IMPORTED_MODULE_15__.isEqualNumber(config === null || config === void 0 ? void 0 : config.horizontalSpace, preConfig === null || preConfig === void 0 ? void 0 : preConfig.horizontalSpace) && _utils_utils__WEBPACK_IMPORTED_MODULE_15__.isEqualNumber(config === null || config === void 0 ? void 0 : config.verticalSpace, preConfig === null || preConfig === void 0 ? void 0 : preConfig.verticalSpace)
                : _utils_utils__WEBPACK_IMPORTED_MODULE_15__.isEqualNumber(config.space, preConfig.space);
            if (config.layoutType !== preConfig.layoutType || !isSpaceNotChange) {
                this.setScrollContentSize();
            }
        };
        this.scrollToSelectedItems = (datasource) => {
            var _a;
            const selectedRecordIds = datasource.getSelectedRecordIds();
            if (this.isMySelected) {
                this.isMySelected = false;
                this.lastSelectedRecordIds = selectedRecordIds || [];
                return;
            }
            const isSelectedRecordsChange = this.checkIsSelectRecordsChange(datasource);
            if (selectedRecordIds && selectedRecordIds.length > 0 && isSelectedRecordsChange) {
                if (isSelectedRecordsChange || this.needScroll) {
                    const newAddedSelectedRecordsId = this.getNewAddedSelectedRecordsId(datasource);
                    const neewScrollToSelectedRecordsId = (newAddedSelectedRecordsId === null || newAddedSelectedRecordsId === void 0 ? void 0 : newAddedSelectedRecordsId.length) > 0 ? newAddedSelectedRecordsId : selectedRecordIds;
                    let index = -1;
                    (_a = this === null || this === void 0 ? void 0 : this.records) === null || _a === void 0 ? void 0 : _a.find((record, i) => {
                        var _a;
                        if (!(record === null || record === void 0 ? void 0 : record.getId)) {
                            return false;
                        }
                        const recordId = (_a = record === null || record === void 0 ? void 0 : record.getId) === null || _a === void 0 ? void 0 : _a.call(record);
                        if (neewScrollToSelectedRecordsId === null || neewScrollToSelectedRecordsId === void 0 ? void 0 : neewScrollToSelectedRecordsId.includes(recordId)) {
                            index = i;
                            return true;
                        }
                        else {
                            return false;
                        }
                    });
                    if (index === -1) {
                        // Can't find it, need to search in all records again
                        const records = datasource.getRecords();
                        records &&
                            records.find((record, i) => {
                                var _a;
                                if (((_a = record.getId) === null || _a === void 0 ? void 0 : _a.call(record)) === selectedRecordIds[0]) {
                                    index = i;
                                    return true;
                                }
                                else {
                                    return false;
                                }
                            });
                        if (index > -1) {
                            const newPage = Math.ceil((index + 1) / this.getPageSize());
                            this.needScroll = true;
                            this.setState({
                                page: newPage
                            });
                        }
                    }
                    else {
                        this.scrollToIndex(index);
                        this.needScroll = false;
                        //loadMore may be triggered during scrollToItem, and the scrollToIndex logic in handleScrollDown will be triggered at this time,
                        //but this logic is not needed when automatically jumping to the currently selected records
                        this.autoScrollIndex = index;
                        this.needAutoScrollToSelectedItemWhenLoadPage = true;
                        this.lastSelectedRecordIds = selectedRecordIds || [];
                    }
                }
            }
        };
        this.checkIsSelectRecordsChange = (datasource) => {
            var _a;
            const selectedRecordIds = (datasource === null || datasource === void 0 ? void 0 : datasource.getSelectedRecordIds()) || [];
            const lastSelectedRecordIds = (this === null || this === void 0 ? void 0 : this.lastSelectedRecordIds) || [];
            if ((selectedRecordIds === null || selectedRecordIds === void 0 ? void 0 : selectedRecordIds.length) !== (lastSelectedRecordIds === null || lastSelectedRecordIds === void 0 ? void 0 : lastSelectedRecordIds.length)) {
                return true;
            }
            else {
                return ((_a = selectedRecordIds === null || selectedRecordIds === void 0 ? void 0 : selectedRecordIds.filter(id => !(lastSelectedRecordIds === null || lastSelectedRecordIds === void 0 ? void 0 : lastSelectedRecordIds.includes(id)))) === null || _a === void 0 ? void 0 : _a.length) > 0;
            }
        };
        this.getNewAddedSelectedRecordsId = (datasource) => {
            const lastSelectedRecordIds = this.lastSelectedRecordIds || [];
            const selectedRecordIds = datasource.getSelectedRecordIds() || [];
            const newAddedSelectedRecords = selectedRecordIds === null || selectedRecordIds === void 0 ? void 0 : selectedRecordIds.filter(id => {
                return !(lastSelectedRecordIds === null || lastSelectedRecordIds === void 0 ? void 0 : lastSelectedRecordIds.includes(id));
            });
            return newAddedSelectedRecords;
        };
        this.onDSCreated = (ds) => {
            this.setState({
                datasource: ds,
                createDataSourceFailed: false
            });
        };
        this.onResize = (width, height) => {
            const newWidgetRect = {
                width,
                height
            };
            const { config } = this.props;
            const { isResizingCard, currentCardSize } = this.state;
            if (isResizingCard) {
                return;
            }
            const showBottomTool = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.showBottomTools(this.props, this.state);
            const bottomToolH = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getBottomToolH(this.paginatorDiv.current, showBottomTool);
            const showTopTool = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.showTopTools(this.props);
            const listH = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getListHeight(newWidgetRect, bottomToolH, showTopTool);
            const oldCardSize = this.getOldCardSizeWhenResize(newWidgetRect);
            const newDefaultCardSize = config.layoutType === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID ? _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getCardSizeNumberInConfig(this.props, newWidgetRect) : currentCardSize;
            const cardSize = {
                width: newDefaultCardSize.width,
                height: newDefaultCardSize.height
            };
            let needRefreshList = !_utils_utils__WEBPACK_IMPORTED_MODULE_15__.isEqualNumber(currentCardSize === null || currentCardSize === void 0 ? void 0 : currentCardSize.width, newDefaultCardSize === null || newDefaultCardSize === void 0 ? void 0 : newDefaultCardSize.width) || !_utils_utils__WEBPACK_IMPORTED_MODULE_15__.isEqualNumber(currentCardSize === null || currentCardSize === void 0 ? void 0 : currentCardSize.height, newDefaultCardSize === null || newDefaultCardSize === void 0 ? void 0 : newDefaultCardSize.height);
            if (config.lockItemRatio && config.layoutType !== _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID) {
                const ratio = cardSize.width / cardSize.height;
                switch (config === null || config === void 0 ? void 0 : config.layoutType) {
                    case _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Column:
                        cardSize.height = listH;
                        cardSize.width = listH * ratio;
                        if (!_utils_utils__WEBPACK_IMPORTED_MODULE_15__.isEqualNumber(cardSize.width, oldCardSize.width)) {
                            needRefreshList = true;
                        }
                        break;
                    case _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Row:
                        cardSize.height = width / ratio;
                        cardSize.width = width;
                        if (!_utils_utils__WEBPACK_IMPORTED_MODULE_15__.isEqualNumber(cardSize.height, oldCardSize.height)) {
                            needRefreshList = true;
                        }
                        break;
                }
            }
            else {
                switch (config === null || config === void 0 ? void 0 : config.layoutType) {
                    case _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Column:
                        cardSize.height = listH;
                        break;
                    case _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Row:
                        cardSize.width = width;
                        break;
                }
            }
            const notResetCardSize = cardSize.width < _config__WEBPACK_IMPORTED_MODULE_2__.LIST_CARD_MIN_SIZE || cardSize.height < _config__WEBPACK_IMPORTED_MODULE_2__.LIST_CARD_MIN_SIZE || newWidgetRect.width === 0 || newWidgetRect.height === 0;
            if (notResetCardSize) {
                return;
            }
            this.setState({
                widgetRect: newWidgetRect,
                currentCardSize: cardSize
            }, () => {
                this.isHasInitCurrentCardSize = true;
                this.editListSizeInRunTime(newWidgetRect);
                if (needRefreshList) {
                    this.refreshList();
                }
            });
            if (this.resizeTimeout) {
                clearTimeout(this.resizeTimeout);
                this.resizeTimeout = undefined;
            }
            if (config.lockItemRatio) {
                this.resizeTimeout = setTimeout(() => {
                    this.handleResizeCard(cardSize, true, false, false, true);
                }, 500);
            }
            this.updateCardToolPosition();
            this.setListDivSize();
        };
        this.getOldCardSizeWhenResize = (newWidgetRect) => {
            //When the width and height are percentages, the Onresize method will be automatically called once when the List is loaded. At this time, the current List size should be used to obtain the oldCardSize
            const { currentCardSize } = this.state;
            if (!this.isHasInitCurrentCardSize) {
                return _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getCardSizeNumberInConfig(this.props, newWidgetRect);
            }
            else {
                return currentCardSize;
            }
        };
        this.updateCardToolPosition = () => {
            const { selectionIsSelf } = this.props;
            const { hideCardTool } = this.state;
            if (!selectionIsSelf || hideCardTool)
                return;
            this.setState({
                hideCardTool: true
            });
            if (this.updateCardToolTimeout) {
                clearTimeout(this.updateCardToolTimeout);
                this.updateCardToolTimeout = undefined;
            }
            this.updateCardToolTimeout = setTimeout(() => {
                this.setState({
                    hideCardTool: false
                });
            }, 500);
        };
        this.refreshList = (shouldForceUpdate = true) => {
            var _a, _b, _c, _d, _e;
            if (this.listRef.current) {
                if (((_a = this.props.config) === null || _a === void 0 ? void 0 : _a.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID) {
                    //VariableSizeGrid caches offsets and measurements for each item for performance purposes.
                    //This method clears that cached data for all items after (and including) the specified indices. It should be called whenever an items size changes.
                    //https://react-window.vercel.app/#/api/VariableSizeGrid
                    this.resetAfterIndices();
                }
                else {
                    //VariableSizeList caches offsets and measurements for each index for performance purposes.
                    //This method clears that cached data for all items after (and including) the specified index. It should be called whenever a item's size changes.
                    ((_c = (_b = this.listRef) === null || _b === void 0 ? void 0 : _b.current) === null || _c === void 0 ? void 0 : _c.resetAfterIndex) && ((_e = (_d = this.listRef) === null || _d === void 0 ? void 0 : _d.current) === null || _e === void 0 ? void 0 : _e.resetAfterIndex(0, shouldForceUpdate));
                }
            }
        };
        this.isDsConfigured = () => {
            const { useDataSources } = this.props;
            return !!useDataSources && !!useDataSources[0];
        };
        this.selectRecords = (records) => {
            const { datasource } = this.state;
            if (datasource) {
                jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(this.props.id, records));
                if (records) {
                    this.isMySelected = true;
                    this.isHasPublishMessageAction = true;
                    datasource.selectRecordsByIds(records.map(record => record.getId()));
                    const outputDs = this.getOutputDs();
                    outputDs &&
                        outputDs.selectRecordsByIds(records.map(record => record.getId()));
                }
                else {
                    this.isHasPublishMessageAction = false;
                }
            }
        };
        this.formatMessage = (id, values) => {
            return this.props.intl.formatMessage({ id: id, defaultMessage: MESSAGES[id] }, values);
        };
        // call exec manuly
        this.editStatus = (name, value) => {
            const { dispatch, id } = this.props;
            dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.widgetStatePropChange(id, name, value));
        };
        this.editWidgetConfig = newConfig => {
            if (!window.jimuConfig.isInBuilder)
                return;
            const appConfigAction = this.props.builderSupportModules.jimuForBuilderLib.getAppConfigAction();
            appConfigAction.editWidgetConfig(this.props.id, newConfig).exec();
        };
        this.scrollToIndex = (index, type = 'start') => {
            const { config } = this.props;
            if (this.listRef.current) {
                if ((config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID) {
                    const columnCount = this.getItemColumnCount();
                    const rowIndex = Math.floor(index / columnCount);
                    this.listRef.current.scrollToItem({
                        columnIndex: index - rowIndex * columnCount,
                        rowIndex: rowIndex,
                        align: type
                    });
                }
                else {
                    this.listRef.current.scrollToItem(index, type);
                }
            }
        };
        this.isEditing = () => {
            const { appMode, config, selectionIsSelf, selectionIsInSelf } = this.props;
            if (!window.jimuConfig.isInBuilder)
                return false;
            return ((selectionIsSelf || selectionIsInSelf) &&
                window.jimuConfig.isInBuilder &&
                appMode !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Run &&
                config.isItemStyleConfirm);
        };
        this.handleItemChange = (itemRecord) => {
            const { config } = this.props;
            const { datasource } = this.state;
            if (!datasource || !itemRecord)
                return;
            let selectedRecords = datasource.getSelectedRecords() || [];
            if (config.cardConfigs[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Selected].selectionMode &&
                config.cardConfigs[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Selected].selectionMode !==
                    _config__WEBPACK_IMPORTED_MODULE_2__.SelectionModeType.None) {
                const recordId = itemRecord === null || itemRecord === void 0 ? void 0 : itemRecord.getId();
                const record = selectedRecords.find(record => record.getId() === recordId);
                if (config.cardConfigs[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Selected].selectionMode ===
                    _config__WEBPACK_IMPORTED_MODULE_2__.SelectionModeType.Single) {
                    if (record) {
                        this.selectRecords([]);
                        this.setState({ showSelectionOnly: false });
                    }
                    else {
                        this.selectRecords([itemRecord]);
                    }
                }
                else {
                    if (record) {
                        selectedRecords = selectedRecords.filter(record => record.getId() !== recordId);
                    }
                    else {
                        selectedRecords = [itemRecord].concat(selectedRecords);
                    }
                    this.selectRecords(selectedRecords);
                }
            }
        };
        this.handleListPointerDown = evt => {
            this.setState({
                forceShowMask: true
            });
            if (this.mouseClickTimeout) {
                clearTimeout(this.mouseClickTimeout);
                this.mouseClickTimeout = undefined;
            }
            this.mouseClickTimeout = setTimeout(() => {
                this.setState({
                    forceShowMask: false
                });
            }, 200);
        };
        this.handleScrollUp = e => {
            if (e) {
                this.isScrollToNextStep = true;
            }
            const scrollStep = this.getScrollStep();
            const listVisibleStartIndex = this.getListVisibleStartIndex();
            let toIndex = listVisibleStartIndex - scrollStep;
            if (toIndex < 0) {
                toIndex = 0;
            }
            this.scrollToIndex(toIndex, 'start');
            this.isScrollToNextStep = false;
        };
        this.handleScrollDown = e => {
            let listVisibleEndIndex = 0;
            if (e) {
                //Click the Next Button to trigger, after clicking, jump according to the last visible line
                listVisibleEndIndex = this.getListVisibleEndIndex();
                this.isScrollToNextStep = true;
            }
            else {
                //Execute after Record load, jump according to the first visible line
                listVisibleEndIndex = this.getListVisibleStartIndex();
            }
            const scrollStep = this.getScrollStep();
            const { listVisibleStopIndex } = this;
            if (listVisibleStopIndex + scrollStep >= this.records.length - 1 &&
                this.records.length < this.getTotalCount()) {
                this.isSwitchPage = true;
                this.setState({
                    page: this.state.page + 1
                });
            }
            else {
                if (this.needAutoScrollToSelectedItemWhenLoadPage) {
                    this.scrollToIndex(this.autoScrollIndex);
                }
                else {
                    this.scrollToIndex(listVisibleEndIndex + scrollStep, 'start');
                }
            }
        };
        this.getScrollStep = () => {
            const { scrollStep, layoutType } = this.props.config;
            const step = this.isScrollToNextStep ? scrollStep : 0;
            const columnCount = this.getItemColumnCount();
            return layoutType === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID ? step * columnCount : step;
        };
        this.handleSwitchPage = (pageNum) => {
            const totalPages = this.getTotalPage();
            if (pageNum < 1 || pageNum > totalPages)
                return;
            if (pageNum !== this.state.page) {
                this.isSwitchPage = true;
                this.lastQueryStart = this.state.page;
                this.setState({
                    page: pageNum
                });
            }
        };
        this.handleListMouseLeave = () => {
            if (this.isEditing())
                return;
            this.setState({
                hoverIndex: -1
            });
        };
        this.handleListMouseMove = (itemIndex) => {
            if (this.isEditing())
                return;
            if (itemIndex === this.state.hoverIndex)
                return;
            this.setState({
                hoverIndex: itemIndex
            });
        };
        this.lastScrollOffset = 0;
        this.handleListScroll = ({ scrollDirection, scrollOffset, scrollTop, scrollUpdateWasRequested }) => {
            var _a, _b;
            const { appMode, config } = this.props;
            const listDiv = this.listOutDivRef;
            const { datasource, scrollStatus } = this.state;
            this.lastScrollOffset = (config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID ? scrollTop : scrollOffset;
            if (!listDiv || ((_b = (_a = this.records) === null || _a === void 0 ? void 0 : _a.length) !== null && _b !== void 0 ? _b : 0) < 1)
                return;
            if (config.pageStyle === _config__WEBPACK_IMPORTED_MODULE_2__.PageStyle.Scroll &&
                this.queryStatus !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.Loading &&
                datasource &&
                (!window.jimuConfig.isInBuilder || appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Run)) {
                this.isHasScrolled = true;
                if (_utils_utils__WEBPACK_IMPORTED_MODULE_15__.isScrollStart(listDiv, this.lastScrollOffset)) {
                    if (scrollStatus !== 'start') {
                        this.setState({
                            scrollStatus: 'start'
                        });
                    }
                }
                else {
                    if (scrollStatus !== 'mid') {
                        this.setState({
                            scrollStatus: 'mid'
                        });
                    }
                }
            }
        };
        this.getTotalPage = () => {
            const { totalCount } = this;
            const { config } = this.props;
            const total = totalCount;
            const totalPage = Math.floor(total / config.itemsPerPage);
            const mode = total % config.itemsPerPage;
            return mode === 0 ? totalPage : totalPage + 1;
        };
        this.getListVisibleStartIndex = () => {
            const { lastScrollOffset } = this;
            const { config } = this.props;
            const itemSize = this.itemSize(0);
            const base = (lastScrollOffset * 1.0) / itemSize;
            let index = Math.floor(base);
            const mo = (base - index) * itemSize;
            const space = (config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID ? config === null || config === void 0 ? void 0 : config.verticalSpace : config === null || config === void 0 ? void 0 : config.space;
            const columnCount = this.getItemColumnCount();
            index = (config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID ? index * columnCount : index;
            if (mo > itemSize - space) {
                index = (config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID ? index + columnCount : index + 1;
            }
            return index;
        };
        this.getListVisibleEndIndex = () => {
            const { lastScrollOffset } = this;
            const { config } = this.props;
            const itemSize = this.itemSize(0);
            const isHorizon = (config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Column;
            const listItemContentSize = this.getListSize();
            const contentSize = isHorizon ? listItemContentSize.width : listItemContentSize.height;
            const base = ((lastScrollOffset + contentSize) * 1.0) / itemSize;
            let index = Math.floor(base);
            const mo = (base - index) * itemSize;
            const space = (config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID ? config === null || config === void 0 ? void 0 : config.verticalSpace : config === null || config === void 0 ? void 0 : config.space;
            const columnCount = this.getItemColumnCount();
            index = (config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID ? index * columnCount - 1 : index;
            if (index < 0) {
                index = 0;
            }
            if (mo > itemSize - space) {
                index = (config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID ? index + columnCount : index + 1;
            }
            return index;
        };
        this.handleSortOptionChange = (evt, item) => {
            this.setState({
                sortOptionName: item.label,
                page: 1
            }, () => {
                // this.selectRecords([])
            });
        };
        this.handleSearchTextChange = searchText => {
            if (searchText === '' || !searchText) {
                this.handleSearchSubmit(undefined);
            }
            this.setState({
                searchSuggestion: []
            });
            clearTimeout(this.suggestionsQueryTimeout);
            this.suggestionsQueryTimeout = setTimeout(() => {
                this.getSearchSuggestions(searchText);
            }, 200);
        };
        this.getSearchSuggestions = searchText => {
            const { config } = this.props;
            const { datasource } = this.state;
            if ((searchText === null || searchText === void 0 ? void 0 : searchText.length) < 3) {
                return false;
            }
            (0,_utils_list_service__WEBPACK_IMPORTED_MODULE_4__.fetchSuggestionRecords)(searchText, config, datasource).then(searchSuggestion => {
                this.setState({
                    searchSuggestion: searchSuggestion
                });
            });
        };
        this.handleSearchSubmit = (searchText, isEnter = false) => {
            const oldSearchText = this.state.searchText;
            if (oldSearchText === searchText && !isEnter) {
                return;
            }
            this.setState({
                searchText: searchText,
                page: 1
            }, () => {
                // this.selectRecords([])
            });
        };
        this.initNewCardSize = (newCardSize) => {
            const { config } = this.props;
            //If the original width and height are percentages, px will be converted to percentages during resize, and then set to config
            const { widgetRect } = this.state;
            let cardSize = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)(newCardSize);
            const cardSizeWidthUnit = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getCardSizeWidthUnitInConfig(this.props);
            if (cardSizeWidthUnit.width.unit === jimu_ui__WEBPACK_IMPORTED_MODULE_1__.DistanceUnits.PERCENTAGE) {
                cardSize = cardSize.set('width', `${(newCardSize.width * 100) / (widgetRect.width + (config === null || config === void 0 ? void 0 : config.horizontalSpace) - _config__WEBPACK_IMPORTED_MODULE_2__.SCROLL_BAR_WIDTH)}%`);
            }
            if (cardSizeWidthUnit.height.unit === jimu_ui__WEBPACK_IMPORTED_MODULE_1__.DistanceUnits.PERCENTAGE) {
                cardSize = cardSize.set('height', `${newCardSize.height * 100 / widgetRect.height}%`);
            }
            return cardSize === null || cardSize === void 0 ? void 0 : cardSize.asMutable({ deep: true });
        };
        this.handleFilterChange = (sqlExprObj) => {
            this.setState({
                currentFilter: sqlExprObj,
                page: 1
            }, () => {
                // this.selectRecords([])
            });
        };
        this.handleFilterApplyChange = (applied) => {
            const alterState = {
                filterApplied: applied,
                queryStart: 0
            };
            if (!applied) {
                // alterState.currentFilter = undefined
            }
            this.setState(alterState, () => {
                // this.selectRecords([])
            });
        };
        this.handleShowSelectionClick = evt => {
            const { showSelectionOnly } = this.state;
            this.setState({ showSelectionOnly: !showSelectionOnly });
        };
        this.handleClearSelectionClick = () => {
            this.setState({ showSelectionOnly: false });
            this.selectRecords([]);
        };
        this.resetShowSelectionStatus = () => {
            const { showSelectionOnly } = this.state;
            if (showSelectionOnly) {
                this.setState({ showSelectionOnly: false });
            }
        };
        this._getCurrentPage = () => {
            return this.state.page;
        };
        this.getTotalCount = () => {
            const total = this.totalCount || 0;
            return total;
        };
        this.selectCard = () => {
            const { selectionIsInSelf } = this.props;
            if (selectionIsInSelf) {
                this.selectSelf();
            }
        };
        this.editBuilderAndSettingStatus = (status) => {
            this.editStatus('showCardSetting', status);
            this.editStatus('builderStatus', status);
        };
        this.editListSizeInRunTime = (widgetRect) => {
            const { id, dispatch } = this.props;
            dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.widgetStatePropChange(id, 'widgetRect', widgetRect));
        };
        this.getSortItems = () => {
            const { config } = this.props;
            const options = [];
            if (config.sorts) {
                config.sorts.forEach(sort => {
                    sort.rule &&
                        sort.rule.forEach(sortData => {
                            if (sortData && !!sortData.jimuFieldName) {
                                options.push({
                                    label: sort.ruleOptionName,
                                    event: this.handleSortOptionChange
                                });
                            }
                        });
                });
            }
            return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)(options);
        };
        this.renderListTopTools = (ds, queryStatus, selectRecords) => {
            const { widgetRect, isSearchBoxVisible, isOpenTopToolsPopper } = this.state;
            const listWidth = (widgetRect === null || widgetRect === void 0 ? void 0 : widgetRect.width) || 620;
            const isShowDataAction = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.checkIsShowDataAction(this.props);
            const isShowListToolsOnly = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.checkIsShowListToolsOnly(this.props);
            const dataName = this.formatMessage('listDataActionLabel', { layer: (ds === null || ds === void 0 ? void 0 : ds.getLabel()) || '' });
            const LIST_TOOL_MIN_SIZE = isShowDataAction ? _config__WEBPACK_IMPORTED_MODULE_2__.LIST_TOOL_MIN_SIZE_DATA_ACTION : _config__WEBPACK_IMPORTED_MODULE_2__.LIST_TOOL_MIN_SIZE_NO_DATA_ACTION;
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'datasource-tools w-100', css: (0,_styles_style__WEBPACK_IMPORTED_MODULE_5__.getTopToolStyle)(this.props, isShowListToolsOnly) },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "d-flex align-items-center" },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "flex-grow-1 tool-row" }, isShowListToolsOnly && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", null,
                        listWidth >= LIST_TOOL_MIN_SIZE && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'tool-row row1 d-flex align-items-center w-100 justify-content-between' },
                            this.renderSearchTools(ds, queryStatus),
                            (!isSearchBoxVisible || listWidth >= 360) &&
                                this.renderTopRightTools(ds, queryStatus))),
                        listWidth < LIST_TOOL_MIN_SIZE && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'float-right', ref: ref => (this.reference = ref) },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { type: 'tertiary', icon: true, size: 'sm', className: 'tools-menu', title: this.formatMessage('guideStep9Title'), onClick: evt => {
                                    this.setState({ isOpenTopToolsPopper: !isOpenTopToolsPopper });
                                } },
                                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_menu__WEBPACK_IMPORTED_MODULE_16__.MenuOutlined, { size: 16 })),
                            this.renderListTopToolsInPoper(ds, queryStatus))))),
                    (ds && isShowDataAction) && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('list-data-action position-relative', { 'm-left': listWidth < LIST_TOOL_MIN_SIZE }), "data-testid": "data-action" },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.DataActionDropDown, { type: 'tertiary', widgetId: this.props.id, dataSet: { dataSource: ds, records: selectRecords, name: dataName }, size: "sm" }))),
                window.jimuConfig.isInBuilder && this.isEditing() && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'editing-mask-ds-tool' }))));
        };
        this.renderListTopToolsInPoper = (ds, queryStatus) => {
            const { widgetRect, isSearchBoxVisible, isOpenTopToolsPopper } = this.state;
            const toolsDisabled = this.isEditing();
            const listWidth = (widgetRect === null || widgetRect === void 0 ? void 0 : widgetRect.width) || 620;
            const LIST_TOOL_MIN_SIZE = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.checkIsShowDataAction(this.props) ? _config__WEBPACK_IMPORTED_MODULE_2__.LIST_TOOL_MIN_SIZE_DATA_ACTION : _config__WEBPACK_IMPORTED_MODULE_2__.LIST_TOOL_MIN_SIZE_NO_DATA_ACTION;
            const isOpen = listWidth < LIST_TOOL_MIN_SIZE && isOpenTopToolsPopper && !toolsDisabled;
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", null,
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Popper, { placement: 'bottom-start', reference: this.reference, offset: [-10, 0], open: isOpen, showArrow: true, toggle: e => {
                        this.setState({ isOpenTopToolsPopper: !isOpen });
                    } },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'tool-row row1 d-flex align-items-end justify-content-between', css: (0,_styles_style__WEBPACK_IMPORTED_MODULE_5__.getToolsPopperStyle)(this.props) },
                        this.renderSearchTools(ds, queryStatus),
                        !isSearchBoxVisible && this.renderTopRightTools(ds, queryStatus)))));
        };
        this.renderSearchTools = (ds, queryStatus) => {
            const toolsDisabled = this.isEditing() || !ds || queryStatus !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.Loaded;
            const { searchText, widgetRect, isSearchBoxVisible, showLoading } = this.state;
            const listWidth = (widgetRect === null || widgetRect === void 0 ? void 0 : widgetRect.width) || 620;
            const { theme, config, appMode } = this.props;
            const toolLineClassName = listWidth < 360 ? 'ds-tools-line-blue' : '';
            const placeholder = (config === null || config === void 0 ? void 0 : config.searchHint) || this.formatMessage('search');
            const isShowBackButton = listWidth < 360 && isSearchBoxVisible;
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'list-search-div flex-grow-1', css: (0,_styles_style__WEBPACK_IMPORTED_MODULE_5__.getSearchToolStyle)(this.props) }, _utils_utils__WEBPACK_IMPORTED_MODULE_15__.showSearch(this.props) && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex search-box-content' },
                (listWidth >= 360 || isSearchBoxVisible) && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'flex-grow-1 w-100' },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_search_box__WEBPACK_IMPORTED_MODULE_9__["default"], { theme: theme, placeholder: placeholder, searchText: searchText, onSearchTextChange: this.handleSearchTextChange, onSubmit: this.handleSearchSubmit, disabled: toolsDisabled, searchSuggestion: this.state.searchSuggestion, suggestionWidth: listWidth, showLoading: showLoading, formatMessage: this.formatMessage, isShowBackButton: isShowBackButton, toggleSearchBoxVisible: this.toggleSearchBoxVisible, className: 'list-search ', appMode: appMode }),
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('ds-tools-line', toolLineClassName) }))),
                listWidth < 360 && !isSearchBoxVisible && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { type: 'tertiary', icon: true, size: 'sm', onClick: evt => {
                        this.toggleSearchBoxVisible(true);
                    }, className: 'list-search-icon', title: this.formatMessage('search') },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_search__WEBPACK_IMPORTED_MODULE_17__.SearchOutlined, { size: 16, color: theme.colors.palette.light[800] })))))));
        };
        this.toggleSearchBoxVisible = (isVisible = false) => {
            const { widgetRect } = this.state;
            this.setState({
                isSearchBoxVisible: isVisible
            });
            const LIST_TOOL_MIN_SIZE = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.checkIsShowDataAction(this.props) ? _config__WEBPACK_IMPORTED_MODULE_2__.LIST_TOOL_MIN_SIZE_DATA_ACTION : _config__WEBPACK_IMPORTED_MODULE_2__.LIST_TOOL_MIN_SIZE_NO_DATA_ACTION;
            const listWidth = (widgetRect === null || widgetRect === void 0 ? void 0 : widgetRect.width) || 620;
            if (listWidth < LIST_TOOL_MIN_SIZE) {
                clearTimeout(this.showPopperTimeOut);
                this.showPopperTimeOut = setTimeout(() => {
                    this.setState({
                        isOpenTopToolsPopper: true
                    });
                });
            }
        };
        this.getPageSize = () => {
            const { widgetRect } = this.state;
            const { config } = this.props;
            const showBottomTool = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.showBottomTools(this.props, this.state);
            const bottomToolH = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getBottomToolH(this.paginatorDiv.current, showBottomTool);
            const showTopTools = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.showTopTools(this.props);
            const listHeight = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getListHeight(widgetRect, bottomToolH, showTopTools) || 1;
            const columnCount = (config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID ? this.getItemColumnCount() : null;
            const recordSizePerPage = Math.max(_utils_utils__WEBPACK_IMPORTED_MODULE_15__.getPageSize(widgetRect, listHeight, this.props, columnCount), 1);
            return recordSizePerPage;
        };
        this.renderTopRightTools = (ds, queryStatus) => {
            const { sortOptionName, showSelectionOnly, currentFilter, filterApplied } = this.state;
            const { config, theme, id, appMode } = this.props;
            const sortItems = this.getSortItems();
            const selectedRecords = ds && ds.getSelectedRecords();
            const hasSelection = selectedRecords && selectedRecords.length > 0;
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex align-items-center mr-1', ref: this.listTopRightToolsDiv },
                _utils_utils__WEBPACK_IMPORTED_MODULE_15__.showSort(this.props) && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'list-sort-con' },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_my_dropdown__WEBPACK_IMPORTED_MODULE_11__["default"], { theme: theme, items: sortItems, appMode: appMode, toggleType: 'tertiary', toggleArrow: true, toggleContent: theme => sortOptionName || (sortItems && sortItems[0].label), size: 'sm', caret: true, showActive: true, toggleTitle: this.formatMessage('listSort'), activeLabel: sortOptionName || (sortItems && sortItems[0].label) }))),
                _utils_utils__WEBPACK_IMPORTED_MODULE_15__.showFilter(this.props) && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_filter_picker__WEBPACK_IMPORTED_MODULE_12__["default"], { filter: currentFilter || config.filter, filterInConfig: config.filter, appMode: appMode, applied: filterApplied, title: this.formatMessage('filter'), selectedDs: this.state.datasource, handleFilterChange: this.handleFilterChange, handleFilterApplyChange: this.handleFilterApplyChange, formatMessage: this.formatMessage, theme: theme, widgetId: id })),
                _utils_utils__WEBPACK_IMPORTED_MODULE_15__.showDisplaySelectedOnly(this.props) && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { disabled: !hasSelection, type: 'tertiary', title: showSelectionOnly
                        ? this.formatMessage('showAll')
                        : this.formatMessage('showSelection'), icon: true, size: 'sm', onClick: this.handleShowSelectionClick }, showSelectionOnly ? (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_menu__WEBPACK_IMPORTED_MODULE_16__.MenuOutlined, { size: 16 }) : (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_show_selection__WEBPACK_IMPORTED_MODULE_18__.ShowSelectionOutlined, { size: 16 }))),
                _utils_utils__WEBPACK_IMPORTED_MODULE_15__.showClearSelected(this.props) && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { disabled: !hasSelection, type: 'tertiary', title: this.formatMessage('clearSelection'), icon: true, size: 'sm', onClick: this.handleClearSelectionClick },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_trash_check__WEBPACK_IMPORTED_MODULE_19__.TrashCheckOutlined, { size: 16 })))));
        };
        this.getListSize = () => {
            const { widgetRect } = this.state;
            const showTopTools = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.showTopTools(this.props);
            //get list tool`s show status
            const showBottomTool = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.showBottomTools(this.props, this.state);
            //get list bottom tool`s height
            const bottomToolH = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getBottomToolH(this.paginatorDiv.current, showBottomTool);
            //get list size
            const listHeight = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getListHeight(widgetRect, bottomToolH, showTopTools) || 1;
            const listWidth = (widgetRect && widgetRect.width) || _config__WEBPACK_IMPORTED_MODULE_2__.LIST_CARD_MIN_SIZE;
            return {
                width: listWidth,
                height: listHeight
            };
        };
        this.renderList = (ds, dsInfo) => {
            const { widgetRect, isMount, currentCardSize } = this.state;
            const { config, isRTL } = this.props;
            const queryStatus = dsInfo === null || dsInfo === void 0 ? void 0 : dsInfo.status;
            this.queryStatus = queryStatus;
            this.isHasRenderList = true;
            if (!isMount) {
                return false;
            }
            //get total count
            if (queryStatus === jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.Unloaded) {
                ds = undefined;
            }
            this.getDsTotalCount(ds, queryStatus);
            //get loading status
            const showLoading = this.getLoadingStatus(ds, queryStatus);
            const interval = (ds === null || ds === void 0 ? void 0 : ds.getAutoRefreshInterval()) || 0;
            //toggle auto refresh loading status
            this.toggleAutoRefreshLoading(ds, showLoading);
            //get list tool`s show status
            const showBottomTool = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.showBottomTools(this.props, this.state);
            const showTopTools = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.showTopTools(this.props);
            //get list bottom tool`s height
            const bottomToolH = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getBottomToolH(this.paginatorDiv.current, showBottomTool);
            //get list size
            const listHeight = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getListHeight(widgetRect, bottomToolH, showTopTools) || 1;
            const listWidth = (widgetRect && widgetRect.width) || _config__WEBPACK_IMPORTED_MODULE_2__.LIST_CARD_MIN_SIZE;
            const overscanCount = this.getOverscanCount(listHeight);
            // get new records
            const selectRecords = this.getDsSelectRecords(ds);
            const records = this.getDsRecords(ds, showLoading, listHeight);
            this.isFirstLoad = false;
            // when record.length == 0, should reset show selection button status in list top tools
            if (records.length === 0) {
                // this.scrollToIndex(0, 'start');
                this.resetShowSelectionStatus();
            }
            this.getlistInnerElementType();
            const listStyles = this.getListStyle();
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { "data-testid": 'listContainer', className: 'list-container animation', css: listStyles, onKeyDown: this.handleListKeyDown },
                showTopTools && this.renderListTopTools(ds, queryStatus, selectRecords),
                ((config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID) &&
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_window__WEBPACK_IMPORTED_MODULE_22__.VariableSizeGrid, { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('widget-list-list', { 'hide-list': !records || (records === null || records === void 0 ? void 0 : records.length) === 0 }), ref: this.listRef, useIsScrolling: true, outerRef: this.setListOutDivRef, direction: isRTL ? 'rtl' : 'ltr', itemCount: this.records.length, overscanCount: overscanCount, itemKey: this.gridItemIndex, columnCount: this.getItemColumnCount(), columnWidth: index => this.columnWidth(index, currentCardSize.width, config === null || config === void 0 ? void 0 : config.horizontalSpace), rowCount: this.getItemRowCount(), rowHeight: index => this.rowHeight(index, currentCardSize.height, config === null || config === void 0 ? void 0 : config.verticalSpace), width: listWidth, height: listHeight, onItemsRendered: this.onItemsRendered, itemData: this.getItemsByRecords(this.records), innerElementType: this.innerElementType, onScroll: this.handleListScroll, role: 'listbox' }, this.itemRender),
                ((config === null || config === void 0 ? void 0 : config.layoutType) !== _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID) && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_window__WEBPACK_IMPORTED_MODULE_22__.VariableSizeList, { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('widget-list-list', { 'hide-list': !records || (records === null || records === void 0 ? void 0 : records.length) === 0 }), ref: this.listRef, useIsScrolling: true, outerRef: this.setListOutDivRef, direction: isRTL ? 'rtl' : 'ltr', role: 'listbox', layout: config.layoutType === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Column
                        ? 'horizontal'
                        : 'vertical', itemCount: this.records.length, overscanCount: overscanCount, itemKey: this.itemKey, width: listWidth, height: listHeight, onItemsRendered: this.onItemsRendered, itemData: this.getItemsByRecords(this.records), innerElementType: this.innerElementType, itemSize: this.itemSize, onScroll: this.handleListScroll }, this.itemRender),
                this.checkIsShowListMask(showLoading, records) && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'editing-mask-con' },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'editing-mask-list' }),
                    (config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'editing-mask-list-grid' }))),
                showBottomTool && this.renderBottomTools(showLoading),
                this.renderEmptyElement(showLoading),
                queryStatus === jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady && this.renderNotReadyTips(ds),
                (showLoading || interval > 0) && this.renderLoading(showLoading, interval),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { id: 'describeByMessage', className: 'sr-only' }, this.formatMessage('describeMessage')),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'sr-only', tabIndex: 0, ref: ref => { this.jumpOutNodeOfList = ref; } })));
        };
        this.handleListKeyDown = (e) => {
            if (e.key === 'Escape') {
                this.jumpOutNodeOfList.focus();
            }
        };
        this.renderEmptyElement = (showLoading) => {
            var _a;
            const isNoData = !this.records || this.records.length < 1;
            const noDataMessage = ((_a = this.props.config) === null || _a === void 0 ? void 0 : _a.noDataMessage) || this.formatMessage('noData');
            // const isShowClearActionButton = isNoData && this.isHasPublishMessageAction
            return (!showLoading && isNoData) && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'empty-con text-center' },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_warning__WEBPACK_IMPORTED_MODULE_20__.WarningOutlined, { size: 16 }),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "discribtion" }, noDataMessage)));
        };
        this.clearMessageAction = () => {
            this.handleClearSelectionClick();
            jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(this.props.id, []));
        };
        this.renderLoading = (showLoading, interval) => {
            const { autoRefreshLoadingString } = this.state;
            const { config } = this.props;
            let isShowAutoRefresh = config === null || config === void 0 ? void 0 : config.isShowAutoRefresh;
            if (typeof (isShowAutoRefresh) !== 'boolean') {
                isShowAutoRefresh = true;
            }
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('position-absolute refresh-loading-con d-flex align-items-center', this.getRefreshLoadingClass()) },
                showLoading && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'loading-con' }),
                (interval > 0 && isShowAutoRefresh) && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'flex-grow-1 auto-refresh-loading' }, autoRefreshLoadingString))));
        };
        this.renderNotReadyTips = (ds) => {
            var _a, _b, _c, _d, _e;
            const dataSourceLabel = ds === null || ds === void 0 ? void 0 : ds.getLabel();
            const outputDsWidgetId = jimu_core__WEBPACK_IMPORTED_MODULE_0__.appConfigUtils === null || jimu_core__WEBPACK_IMPORTED_MODULE_0__.appConfigUtils === void 0 ? void 0 : jimu_core__WEBPACK_IMPORTED_MODULE_0__.appConfigUtils.getWidgetIdByOutputDataSource((_b = (_a = this.props) === null || _a === void 0 ? void 0 : _a.useDataSources) === null || _b === void 0 ? void 0 : _b[0]);
            const appConfig = (_c = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState()) === null || _c === void 0 ? void 0 : _c.appConfig;
            const widgetLabel = (_e = (_d = appConfig === null || appConfig === void 0 ? void 0 : appConfig.widgets) === null || _d === void 0 ? void 0 : _d[outputDsWidgetId]) === null || _e === void 0 ? void 0 : _e.label;
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'placeholder-alert-con' },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Alert, { form: 'tooltip', size: 'small', type: 'warning', text: this.formatMessage('outputDataIsNotGenerated', { outputDsLabel: dataSourceLabel, sourceWidgetName: widgetLabel }) })));
        };
        this.renderBottomTools = (showLoading) => {
            const { scrollStatus, isScrollEnd } = this.state;
            const { config, isRTL } = this.props;
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { ref: this.paginatorDiv },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_bottom_tools__WEBPACK_IMPORTED_MODULE_13__.ListBottomTools, { isRTL: isRTL, totalPage: this.getTotalPage(), currentPage: this._getCurrentPage(), isEditing: this.isEditing(), isScrollEnd: isScrollEnd, pageStyle: config.pageStyle, layoutType: config === null || config === void 0 ? void 0 : config.layoutType, scrollStatus: scrollStatus, handleScrollUp: this.handleScrollUp, handleScrollDown: this.handleScrollDown, handleSwitchPage: this.handleSwitchPage, formatMessage: this.formatMessage, showLoading: showLoading })));
        };
        this.getDsTotalCount = (ds, queryStatus) => {
            const count = ds === null || ds === void 0 ? void 0 : ds.count;
            this.queryStatus = queryStatus;
            // total count
            if (queryStatus === jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.Loaded && count !== null) {
                if (this.totalCount !== count) {
                    this.setPageTimeout = setTimeout(() => {
                        this.setState({
                            page: 1
                        });
                    }, 1);
                }
                this.totalCount = count;
            }
        };
        this.getLoadingStatus = (ds, queryStatus) => {
            const { LayoutEntry } = this.state;
            const { showLoading: mustLoading } = this.props;
            // loading
            let showLoading = false;
            if (mustLoading ||
                (window.jimuConfig.isInBuilder && !LayoutEntry) ||
                (ds && queryStatus === jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.Loading)) {
                showLoading = true;
            }
            return showLoading;
        };
        this.toggleAutoRefreshLoading = (ds, showLoading) => {
            const interval = (ds === null || ds === void 0 ? void 0 : ds.getAutoRefreshInterval()) || 0;
            this.resetAutoRefreshTimes(interval, showLoading);
            if (interval > 0) {
                this.setRefreshLoadingString(showLoading);
            }
        };
        this.setListOutDivRef = current => {
            if (!current)
                return;
            const bottomBoundaryId = `bottomBoundary${this.props.id}`;
            this.listOutDivRef = current;
            this.setListDivSize();
            const bottomBoundary = document.createElement('div');
            bottomBoundary.id = bottomBoundaryId;
            bottomBoundary.className = 'bottom-boundary';
            const listScrollContent = this.listOutDivRef.getElementsByTagName('div')[0];
            this.setScrollContentSize();
            listScrollContent.appendChild(bottomBoundary);
            _utils_utils__WEBPACK_IMPORTED_MODULE_15__.intersectionObserver(document.getElementById(bottomBoundaryId), this.listOutDivRef, this.intersectionObserverCallback);
        };
        this.getDsRecords = (ds, showLoading, listHeight) => {
            const { showSelectionOnly, widgetRect } = this.state;
            const { config, appMode } = this.props;
            const columnCount = (config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID ? this.getItemColumnCount() : null;
            const recordSizePerPage = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getPageSize(widgetRect, listHeight, this.props, columnCount);
            const defaultRecords = this.getDefaultRecords(recordSizePerPage);
            // get new records
            let records = defaultRecords;
            const selectRecords = this.getDsSelectRecords(ds);
            if (ds && config.isItemStyleConfirm) {
                const isSelectionView = (ds === null || ds === void 0 ? void 0 : ds.dataViewId) === SELECTION_DATA_VIEW_ID;
                if (isSelectionView) {
                    records =
                        (ds &&
                            (config.pageStyle === _config__WEBPACK_IMPORTED_MODULE_2__.PageStyle.Scroll
                                ? ds.getRecordsByPage(1, recordSizePerPage * this.state.page)
                                : ds.getRecordsByPage(this.state.page, recordSizePerPage))) ||
                            [];
                }
                else {
                    records =
                        (ds &&
                            (config.pageStyle === _config__WEBPACK_IMPORTED_MODULE_2__.PageStyle.Scroll
                                ? ds.getRecordsByPageWithSelection(1, recordSizePerPage * this.state.page)
                                : ds.getRecordsByPageWithSelection(this.state.page, recordSizePerPage))) ||
                            [];
                }
                if (showSelectionOnly) {
                    records = selectRecords;
                }
            }
            if (window.jimuConfig.isInBuilder &&
                appMode !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Run &&
                !showLoading &&
                records.length < 1) {
                records = defaultRecords;
            }
            if (!showLoading || this.isFirstLoad) {
                // this.resetListAfterRecordChange(records)
                this.records = records;
            }
            return records;
        };
        this.resetGridListAfterRowIndex = (newRecords) => {
            var _a, _b, _c, _d, _e;
            if ((this === null || this === void 0 ? void 0 : this.records) && (((_a = this.records) === null || _a === void 0 ? void 0 : _a.length) !== (newRecords === null || newRecords === void 0 ? void 0 : newRecords.length))) {
                let preRowNumber = this.getItemRowCount() - 1;
                preRowNumber = preRowNumber > -1 ? preRowNumber : 0;
                ((_c = (_b = this.listRef) === null || _b === void 0 ? void 0 : _b.current) === null || _c === void 0 ? void 0 : _c.resetAfterIndices) && ((_e = (_d = this.listRef) === null || _d === void 0 ? void 0 : _d.current) === null || _e === void 0 ? void 0 : _e.resetAfterRowIndex(preRowNumber, true));
            }
        };
        this.resetListAfterRecordChange = (newRecords) => {
            var _a, _b, _c, _d, _e, _f;
            //When loading again, the same records are not necessarily the same index.
            //For example, when the extent of the map changes, the record of the list changes. The original first record may
            //change to the fifth of the new records, so all can only be reset. A list guarantees an update to the list size
            if ((this === null || this === void 0 ? void 0 : this.records) && (((_a = this.records) === null || _a === void 0 ? void 0 : _a.length) !== (newRecords === null || newRecords === void 0 ? void 0 : newRecords.length))) {
                if (this.listRef.current) {
                    if (((_b = this.props.config) === null || _b === void 0 ? void 0 : _b.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID) {
                        //VariableSizeGrid caches offsets and measurements for each item for performance purposes.
                        //This method clears that cached data for all items after (and including) the specified indices. It should be called whenever an items size changes.
                        //https://react-window.vercel.app/#/api/VariableSizeGrid
                        // this.resetGridListAfterRowIndex(newRecords)
                        ((_d = (_c = this.listRef) === null || _c === void 0 ? void 0 : _c.current) === null || _d === void 0 ? void 0 : _d.resetAfterIndices) && ((_f = (_e = this.listRef) === null || _e === void 0 ? void 0 : _e.current) === null || _f === void 0 ? void 0 : _f.resetAfterRowIndex(0, true));
                    }
                    else {
                        //VariableSizeList caches offsets and measurements for each index for performance purposes.
                        //This method clears that cached data for all items after (and including) the specified index. It should be called whenever a item's size changes.
                        // let restStartIndex = newRecords?.length - 1
                        // restStartIndex = restStartIndex < 0 ? 0 : restStartIndex
                        //
                        this.resetTimeout && clearTimeout(this.resetTimeout);
                        this.resetTimeout = setTimeout(() => {
                            var _a, _b, _c, _d;
                            ((_b = (_a = this.listRef) === null || _a === void 0 ? void 0 : _a.current) === null || _b === void 0 ? void 0 : _b.resetAfterIndex) && ((_d = (_c = this.listRef) === null || _c === void 0 ? void 0 : _c.current) === null || _d === void 0 ? void 0 : _d.resetAfterIndex(0, false));
                        }, 300);
                    }
                }
            }
        };
        this.getDefaultRecords = (pageSize = 3) => {
            pageSize = (pageSize && pageSize > 1) ? pageSize : 3;
            const defaultRecords = [];
            for (let i = 0; i < pageSize; i++) {
                defaultRecords.push(defaultRecordsItem);
            }
            return defaultRecords;
        };
        this.getDsSelectRecords = (ds) => {
            const { config } = this.props;
            // get select records
            let selectRecords;
            if (ds && config.isItemStyleConfirm) {
                selectRecords = ds.getSelectedRecords();
            }
            return selectRecords;
        };
        this.getlistInnerElementType = () => {
            const { config } = this.props;
            const space = (config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID ? config === null || config === void 0 ? void 0 : config.verticalSpace : config === null || config === void 0 ? void 0 : config.space;
            if (this.lastSpace !== space) {
                this.lastSpace = space;
                this.innerElementType = (0,react__WEBPACK_IMPORTED_MODULE_10__.forwardRef)((_a, ref) => {
                    var { style } = _a, rest = __rest(_a, ["style"]);
                    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", Object.assign({ ref: ref, style: Object.assign(Object.assign({}, style), { height: `${parseFloat(style.height) -
                                (config.layoutType === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Column
                                    ? 0
                                    : space)}px`, width: `${parseFloat(style.width) -
                                (config.layoutType !== _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Column
                                    ? 0
                                    : space)}px` }) }, rest)));
                });
            }
        };
        this.getListStyle = () => {
            var _a, _b;
            const { toolsDivWidth, currentCardSize, widgetRect } = this.state;
            const { config, appMode, theme, isHeightAuto, isWidthAuto } = this.props;
            const showBottomTool = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.showBottomTools(this.props, this.state);
            const bottomToolH = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getBottomToolH(this.paginatorDiv.current, showBottomTool);
            const showTopTools = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.showTopTools(this.props);
            const listTemplateDefaultCardSize = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getCardSizeNumberInConfig(this.props, widgetRect);
            const listStyleOption = {
                pageStyle: config === null || config === void 0 ? void 0 : config.pageStyle,
                scrollBarOpen: config === null || config === void 0 ? void 0 : config.scrollBarOpen,
                direction: config === null || config === void 0 ? void 0 : config.direction,
                appMode: appMode,
                theme: theme,
                isHeightAuto: isHeightAuto,
                isWidthAuto: isWidthAuto,
                currentCardSize: currentCardSize,
                listTemplateDefaultCardSize: listTemplateDefaultCardSize,
                showTopTools: showTopTools,
                bottomToolH: bottomToolH,
                topRightToolW: toolsDivWidth,
                hasRecords: ((_b = (_a = this.records) === null || _a === void 0 ? void 0 : _a.length) !== null && _b !== void 0 ? _b : 0) > 0,
                mexSize: this.getListMaxSize(),
                layoutType: config === null || config === void 0 ? void 0 : config.layoutType,
                listLeftPadding: this.getListContentLeftPadding()
            };
            return (0,_styles_style__WEBPACK_IMPORTED_MODULE_5__.listStyle)(listStyleOption);
        };
        this.checkIsShowListMask = (showLoading, records) => {
            const { isInBuilder } = window.jimuConfig;
            const isEditing = this.isEditing();
            const isNoData = !records || records.length < 1;
            const isDataLoadedAndHasData = !(!showLoading && isNoData);
            return isInBuilder && isEditing && isDataLoadedAndHasData;
        };
        this.getOverscanCount = (listHeight) => {
            const { widgetRect } = this.state;
            const { appMode, config } = this.props;
            const columnCount = (config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID ? this.getItemColumnCount() : null;
            const recordSizePerPage = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getPageSize(widgetRect, listHeight, this.props, columnCount);
            const overscanCount = window.jimuConfig.isInBuilder && appMode !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Run
                ? 0
                : recordSizePerPage;
            return overscanCount;
        };
        this.setScrollContentSize = () => {
            var _a;
            if (!this.listOutDivRef)
                return;
            const { layoutType } = (_a = this.props) === null || _a === void 0 ? void 0 : _a.config;
            const listScrollContent = this.listOutDivRef.getElementsByTagName('div')[0];
            if (layoutType === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Column) {
                listScrollContent.style.height = '100%';
            }
            else {
                listScrollContent.style.width = '100%';
            }
        };
        this.intersectionObserverCallback = (isScrollEnd) => {
            var _a, _b;
            const { appMode, config } = this.props;
            const listDiv = this.listOutDivRef;
            const { datasource } = this.state;
            this.setState({
                isScrollEnd: isScrollEnd
            });
            if (!listDiv || ((_b = (_a = this.records) === null || _a === void 0 ? void 0 : _a.length) !== null && _b !== void 0 ? _b : 0) < 1)
                return;
            if (config.pageStyle === _config__WEBPACK_IMPORTED_MODULE_2__.PageStyle.Scroll &&
                this.queryStatus !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.Loading &&
                datasource &&
                (!window.jimuConfig.isInBuilder ||
                    (appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Run && isScrollEnd)) &&
                this.isHasScrolled) {
                if (this.records.length < this.getTotalCount()) {
                    this.setState({
                        page: this.state.page + 1
                    });
                    this.isSwitchPage = true;
                }
                else {
                    if (isScrollEnd) {
                        this.setState({
                            scrollStatus: 'end'
                        });
                    }
                }
            }
        };
        this.setListDivSize = () => {
            var _a;
            const listDiv = this.listOutDivRef;
            const clientWidth = (listDiv === null || listDiv === void 0 ? void 0 : listDiv.clientWidth) || null;
            const clientHeight = (listDiv === null || listDiv === void 0 ? void 0 : listDiv.clientHeight) || null;
            const toolsDivWidth = ((_a = this.listTopRightToolsDiv.current) === null || _a === void 0 ? void 0 : _a.clientWidth) || 0;
            const listDivBoundRect = (listDiv === null || listDiv === void 0 ? void 0 : listDiv.getBoundingClientRect()) || null;
            const listDivSize = {
                clientWidth: clientWidth,
                clientHeight: clientHeight
            };
            this.setState({
                listDivSize: listDivSize,
                toolsDivWidth: toolsDivWidth,
                listDivBoundRect: listDivBoundRect
            });
        };
        this.getContentLayout = () => {
            const { layoutId, browserSizeMode } = this.props;
            const appConfig = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig;
            const contentWidgetId = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.searchUtils.getWidgetIdThatUseTheLayoutId(appConfig, layoutId);
            const contentLayoutsInfo = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.searchUtils.getContentLayoutInfosInOneSizeMode(appConfig, contentWidgetId, jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget, browserSizeMode);
            return contentLayoutsInfo;
        };
        this.getContentLayoutSetting = () => {
            var _a, _b, _c, _d, _e;
            const appConfig = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig;
            const { layouts } = appConfig;
            const contentLayoutsInfo = this.getContentLayout();
            const contentLayoutId = (_a = contentLayoutsInfo === null || contentLayoutsInfo === void 0 ? void 0 : contentLayoutsInfo[0]) === null || _a === void 0 ? void 0 : _a.layoutId;
            const contentLayoutItemId = (_b = contentLayoutsInfo === null || contentLayoutsInfo === void 0 ? void 0 : contentLayoutsInfo[0]) === null || _b === void 0 ? void 0 : _b.layoutItemId;
            const setting = (_e = (_d = (_c = layouts === null || layouts === void 0 ? void 0 : layouts[contentLayoutId]) === null || _c === void 0 ? void 0 : _c.content) === null || _d === void 0 ? void 0 : _d[contentLayoutItemId]) === null || _e === void 0 ? void 0 : _e.setting;
            return setting;
        };
        this.getListMaxSize = () => {
            var _a, _b, _c, _d, _e;
            const { boundingBox, heightLayoutItemSizeModes, layoutId, appMode, pageMode } = this.props;
            const isListHeightCustom = heightLayoutItemSizeModes === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.LayoutItemSizeModes.Custom && (boundingBox === null || boundingBox === void 0 ? void 0 : boundingBox.height);
            const setting = this.getContentLayoutSetting();
            const isContentWidthAuto = ((_a = setting === null || setting === void 0 ? void 0 : setting.autoProps) === null || _a === void 0 ? void 0 : _a.width) === 'auto' || (setting === null || setting === void 0 ? void 0 : setting.widthMode) === 'auto';
            const isContentHeightAuto = ((_b = setting === null || setting === void 0 ? void 0 : setting.autoProps) === null || _b === void 0 ? void 0 : _b.height) === 'auto' || (setting === null || setting === void 0 ? void 0 : setting.heightMode) === 'auto' || !setting;
            // const isUse600 = (pageMode === PageMode.AutoScroll && (isContentHeightAuto || !setting?.autoProps?.width))
            const DESIGN_SIZE = (pageMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.PageMode.AutoScroll && isContentHeightAuto) ? 600 : this.bodySize.clientHeight;
            const bodyHeight = appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design ? DESIGN_SIZE : this.bodySize.clientHeight;
            const maxheight = isListHeightCustom ? boundingBox === null || boundingBox === void 0 ? void 0 : boundingBox.height : bodyHeight;
            const isListHeightCustomUnitPX = isListHeightCustom && !(((_c = boundingBox === null || boundingBox === void 0 ? void 0 : boundingBox.height) === null || _c === void 0 ? void 0 : _c.includes) && ((_d = boundingBox === null || boundingBox === void 0 ? void 0 : boundingBox.height) === null || _d === void 0 ? void 0 : _d.includes('%')));
            let maxSize = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({
                maxWidth: this.bodySize.scrollWidth,
                maxHeight: maxheight
            });
            const appConfig = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig;
            const { layouts } = appConfig;
            const type = (_e = layouts[layoutId]) === null || _e === void 0 ? void 0 : _e.type;
            if (type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.ColumnLayout && isContentWidthAuto) {
                maxSize = maxSize.set('maxWidth', this.bodySize.clientWidth);
            }
            if (type === 'ROW' && isContentHeightAuto && !isListHeightCustomUnitPX) {
                const maxHeight = appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design ? DESIGN_SIZE : this.bodySize.clientHeight;
                maxSize = maxSize.set('maxHeight', maxHeight);
            }
            maxSize = maxSize.set('maxHeight', this.initElementSize(maxSize.maxHeight));
            maxSize = maxSize.set('maxWidth', this.initElementSize(maxSize.maxWidth));
            return maxSize;
        };
        this.initElementSize = (size) => {
            if (Number(size)) {
                return `${size}px`;
            }
            else if (typeof (size) === 'string') {
                if ((size === null || size === void 0 ? void 0 : size.includes('px')) || (size === null || size === void 0 ? void 0 : size.includes('rem'))) {
                    return size;
                }
                else if (size === null || size === void 0 ? void 0 : size.includes('%')) {
                    return '100%';
                }
            }
            else {
                return size;
            }
        };
        this.getRefreshLoadingClass = () => {
            const { config, appMode } = this.props;
            const { scrollBarOpen, layoutType } = config;
            const isEditor = window.jimuConfig.isInBuilder && appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design;
            if (!scrollBarOpen || isEditor) {
                return '';
            }
            if (layoutType === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Column) {
                return 'horizon-loading';
            }
            else {
                return 'vertical-loading';
            }
        };
        this.resetAutoRefreshTimes = (interval, showLoading = false) => {
            clearTimeout(this.resetAutoRefreshTime);
            if (interval <= 0) {
                clearInterval(this.autoRefreshLoadingTime);
            }
            this.resetAutoRefreshTime = setTimeout(() => {
                if (showLoading && interval > 0) {
                    this.setState({
                        autoRefreshLoadingString: this.formatMessage('lastUpdateAFewTime')
                    });
                }
                this.setState({
                    showLoading: showLoading
                });
            }, 0);
        };
        this.setRefreshLoadingString = (showLoading = false) => {
            if (!showLoading) {
                return false;
            }
            let time = 0;
            clearInterval(this.autoRefreshLoadingTime);
            this.autoRefreshLoadingTime = setInterval(() => {
                time++;
                this.setState({
                    autoRefreshLoadingString: this.getLoadingString(time)
                });
            }, 60000);
        };
        this.getLoadingString = (time) => {
            let loadingString = this.formatMessage('lastUpdateAFewTime');
            if (time > 1 && time <= 2) {
                loadingString = this.formatMessage('lastUpdateAMinute');
            }
            else if (time > 2) {
                loadingString = this.formatMessage('lastUpdateTime', { updateTime: time });
            }
            return loadingString;
        };
        this.onItemsRendered = ({ overscanStartIndex, overscanStopIndex, visibleStartIndex, visibleStopIndex, visibleColumnStartIndex, visibleColumnStopIndex, visibleRowStartIndex, visibleRowStopIndex }) => {
            const { config } = this.props;
            // All index params are numbers.
            this.listVisibleStartIndex = (config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID ? this.getItemIndexByRowAndColumnIndex(visibleRowStartIndex, visibleColumnStartIndex) : visibleStartIndex;
            this.listVisibleStopIndex = (config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID ? this.getItemIndexByRowAndColumnIndex(visibleRowStopIndex, visibleColumnStopIndex) : visibleStopIndex;
            if (this.needRefreshListOnListRendered) {
                this.needRefreshListOnListRendered = false;
                this.refreshList();
            }
            if (this.isSwitchPage) {
                if (config.pageStyle === _config__WEBPACK_IMPORTED_MODULE_2__.PageStyle.Scroll) {
                    if (this.records.length > this.listVisibleStopIndex + 1) {
                        this.isSwitchPage = false;
                        this.onItemsRenderedTimeout = setTimeout(() => {
                            this.handleScrollDown(null);
                            if (this.isScrollToNextStep) {
                                this.isScrollToNextStep = false;
                            }
                        }, 500);
                    }
                }
                else {
                    this.isSwitchPage = false;
                }
            }
        };
        this.getItemIndexByRowAndColumnIndex = (rowIndex, columnIndex) => {
            const columnCount = this.getItemColumnCount();
            return rowIndex * columnCount + columnIndex;
        };
        this.itemSize = index => {
            const { config } = this.props;
            const { currentCardSize } = this.state;
            const isHorizon = (config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Column;
            const space = (config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID ? config === null || config === void 0 ? void 0 : config.verticalSpace : config === null || config === void 0 ? void 0 : config.space;
            const itemWidth = currentCardSize.width + space;
            const itemHeight = currentCardSize.height + space;
            const size = isHorizon ? itemWidth : itemHeight;
            return size;
        };
        this.columnWidth = (index, cardWidth, space = 0) => {
            return cardWidth + space;
        };
        this.rowHeight = (rowIndex, cardHeight, space = 0) => {
            return cardHeight + space;
        };
        this.getItemsByRecords = records => {
            const { config, selectionIsInSelf, selectionIsSelf, builderStatus, appMode, queryObject, useDataSources } = this.props;
            const { datasource, hoverIndex } = this.state;
            const selectedRecordIds = (!datasource || !config.isItemStyleConfirm
                ? []
                : datasource.getSelectedRecordIds()).map(v => v + '');
            return (records &&
                records.map((record, index) => {
                    const isEditor = index === 0 &&
                        window.jimuConfig.isInBuilder &&
                        appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design;
                    const editProps = isEditor
                        ? {
                            hideCardTool: this.state.hideCardTool,
                            selectionIsList: selectionIsSelf,
                            selectionIsInList: selectionIsInSelf,
                            isEditing: this.isEditing(),
                            builderStatus: builderStatus,
                            lockItemRatio: config.lockItemRatio,
                            changeIsResizingCard: this.changeIsResizingCard
                        }
                        : {
                            linkParam: config.linkParam,
                            queryObject: queryObject,
                            useDataSources
                        };
                    return Object.assign(Object.assign({ index, isHover: hoverIndex === index, record: config.isItemStyleConfirm ? record : undefined, active: !record.fake &&
                            config.isItemStyleConfirm &&
                            datasource &&
                            selectedRecordIds.includes(record.getId()) }, this.getOtherProps()), editProps);
                }));
        };
        this.getOtherProps = () => {
            var _a, _b;
            const { config, theme, id, appMode, builderSupportModules, layouts, browserSizeMode, dispatch, isRTL } = this.props;
            const { datasource } = this.state;
            const isWidthPercentage = ((_b = (_a = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getCardSizeWidthUnitInConfig(this.props)) === null || _a === void 0 ? void 0 : _a.width) === null || _b === void 0 ? void 0 : _b.unit) === jimu_ui__WEBPACK_IMPORTED_MODULE_1__.DistanceUnits.PERCENTAGE;
            return {
                browserSizeMode: browserSizeMode,
                space: config.space,
                isRTL: isRTL,
                builderSupportModules: builderSupportModules,
                formatMessage: this.formatMessage,
                dispatch: dispatch,
                widgetId: id,
                interact: window.jimuConfig.isInBuilder &&
                    builderSupportModules.widgetModules.interact,
                selectCard: this.selectCard,
                handleResizeCard: this.handleResizeCard,
                appMode: appMode,
                onChange: this.handleItemChange,
                hoverLayoutOpen: config.cardConfigs[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Hover].enable,
                selectable: config.cardConfigs[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Selected].selectionMode !==
                    _config__WEBPACK_IMPORTED_MODULE_2__.SelectionModeType.None,
                direction: config.direction,
                theme: theme,
                LayoutEntry: this.state.LayoutEntry,
                layouts: layouts,
                layoutType: config === null || config === void 0 ? void 0 : config.layoutType,
                keepAspectRatio: config === null || config === void 0 ? void 0 : config.keepAspectRatio,
                gridItemSizeRatio: config === null || config === void 0 ? void 0 : config.gridItemSizeRatio,
                cardConfigs: config.cardConfigs,
                datasourceId: datasource && datasource.id,
                updateCardToolPosition: this.updateCardToolPosition,
                isWidthPercentage: isWidthPercentage,
                horizontalSpace: config === null || config === void 0 ? void 0 : config.horizontalSpace
            };
        };
        this.itemRender = props => {
            var _a;
            const { appMode, config } = this.props;
            let style = props.style;
            const columnIndex = (props === null || props === void 0 ? void 0 : props.columnIndex) || 0;
            const rowIndex = (props === null || props === void 0 ? void 0 : props.rowIndex) || 0;
            const rowCount = this.getItemRowCount();
            const columnCount = this.getItemColumnCount();
            const index = (config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID ? this.getItemIndexByRowAndColumnIndex(rowIndex, columnIndex) : props.index;
            const items = props.data;
            const recordLength = ((_a = this.records) === null || _a === void 0 ? void 0 : _a.length) || 0;
            const isLastItem = recordLength - 1 === index;
            let listItemStyle;
            switch (config === null || config === void 0 ? void 0 : config.layoutType) {
                case _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Column:
                    listItemStyle = {
                        width: `${parseFloat(style.width) - config.space}px`,
                        height: '100%'
                    };
                    break;
                case _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Row:
                    listItemStyle = {
                        width: '100%',
                        height: `${parseFloat(style.height) - config.space}px`
                    };
                    break;
                case _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID:
                    listItemStyle = {
                        height: `${parseFloat(style.height) - (config === null || config === void 0 ? void 0 : config.verticalSpace)}px`,
                        width: `${parseFloat(style === null || style === void 0 ? void 0 : style.width) - (config === null || config === void 0 ? void 0 : config.horizontalSpace)}px`
                    };
                    break;
            }
            //The size of list item content
            switch (config === null || config === void 0 ? void 0 : config.layoutType) {
                case _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Column:
                    style = Object.assign(Object.assign({}, style), { width: isLastItem ? `${parseFloat(style.width) - config.space}px` : `${parseFloat(style.width)}px` });
                    break;
                case _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Row:
                    style = Object.assign(Object.assign({}, style), { height: isLastItem ? `${parseFloat(style.height) - config.space}px` : `${parseFloat(style.height)}px` });
                    break;
                case _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID:
                    style = Object.assign(Object.assign({}, style), { height: rowCount === (rowIndex + 1) ? `${parseFloat(style.height) - (config === null || config === void 0 ? void 0 : config.verticalSpace)}px` : `${parseFloat(style.height)}px`, width: columnCount === (columnIndex + 1) ? `${parseFloat(style === null || style === void 0 ? void 0 : style.width) - (config === null || config === void 0 ? void 0 : config.horizontalSpace)}px` : `${parseFloat(style === null || style === void 0 ? void 0 : style.width)}px` });
                    break;
            }
            const isEditor = index === 0 && window.jimuConfig.isInBuilder && appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design;
            const ListCard = isEditor ? _components_list_card_editor__WEBPACK_IMPORTED_MODULE_6__["default"] : _components_list_card_viewer__WEBPACK_IMPORTED_MODULE_7__["default"];
            if ((items === null || items === void 0 ? void 0 : items.length) < index + 1)
                return null;
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { style: style },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(ListCard, Object.assign({ listStyle: listItemStyle, widgetId: this.props.id }, items[index], { handleListMouseMove: this.handleListMouseMove, handleListMouseLeave: this.handleListMouseLeave, itemIdex: index }))));
        };
        this.itemKey = index => {
            const item = this.records[index];
            return `${((item === null || item === void 0 ? void 0 : item.getId) && (item === null || item === void 0 ? void 0 : item.getId())) || index}`;
        };
        this.gridItemIndex = indexOption => {
            const { columnIndex, rowIndex } = indexOption;
            const index = this.getItemIndexByRowAndColumnIndex(rowIndex, columnIndex);
            const item = this.records[index];
            return `${((item === null || item === void 0 ? void 0 : item.getId) && (item === null || item === void 0 ? void 0 : item.getId())) || index + 100}`;
        };
        this.getItemColumnCount = () => {
            const { widgetRect, currentCardSize } = this.state;
            const { config } = this.props;
            let listWidth = (widgetRect && widgetRect.width) || _config__WEBPACK_IMPORTED_MODULE_2__.LIST_CARD_MIN_SIZE;
            listWidth = listWidth - _config__WEBPACK_IMPORTED_MODULE_2__.SCROLL_BAR_WIDTH;
            const cardWidth = currentCardSize.width + (config === null || config === void 0 ? void 0 : config.horizontalSpace);
            //The actual width of the last column is currentCardSize.width
            //'listWidth-4' is for the width of the scroll bar
            //The space in the last column should be removed
            return Math.floor((listWidth - currentCardSize.width) / cardWidth + 1) || 1;
            // return Math.floor((listWidth + config?.horizontalSpace) / (currentCardSize.width + config?.horizontalSpace)) || 1
        };
        this.getItemRowCount = () => {
            return Math.ceil(this.records.length / this.getItemColumnCount()) || 1;
        };
        this.getListContentLeftPadding = () => {
            const { widgetRect, currentCardSize } = this.state;
            const { config } = this.props;
            const listWidth = (widgetRect && widgetRect.width) || _config__WEBPACK_IMPORTED_MODULE_2__.LIST_CARD_MIN_SIZE;
            const rowWidth = this.getItemColumnCount() * (currentCardSize.width + (config === null || config === void 0 ? void 0 : config.horizontalSpace)) - (config === null || config === void 0 ? void 0 : config.horizontalSpace);
            let padding;
            switch (config === null || config === void 0 ? void 0 : config.gridAlignment) {
                case jimu_ui__WEBPACK_IMPORTED_MODULE_1__.TextAlignValue.LEFT:
                    padding = 0;
                    break;
                case jimu_ui__WEBPACK_IMPORTED_MODULE_1__.TextAlignValue.RIGHT:
                    padding = listWidth - rowWidth - _config__WEBPACK_IMPORTED_MODULE_2__.SCROLL_BAR_WIDTH;
                    break;
                default:
                    padding = (listWidth - rowWidth - _config__WEBPACK_IMPORTED_MODULE_2__.SCROLL_BAR_WIDTH) / 2;
                    break;
            }
            if ((config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID) {
                return padding > 0 ? padding : 0;
            }
            else {
                return 0;
            }
        };
        this.onCreateDataSourceFailed = (err) => {
            this.setState({
                createDataSourceFailed: true
            });
        };
        this.renderWidgetPlaceholder = () => {
            return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.WidgetPlaceholder, { icon: (jimu_icons_svg_outlined_brand_widget_list_svg__WEBPACK_IMPORTED_MODULE_21___default()), widgetId: this.props.id, message: '' });
        };
        this.onListContainerMouseMove = () => {
            if (this.needAutoScrollToSelectedItemWhenLoadPage && this.records) {
                this.needAutoScrollToSelectedItemWhenLoadPage = false;
            }
        };
        const { config } = props;
        this.paginatorDiv = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createRef();
        this.listTopRightToolsDiv = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createRef();
        const stateObj = {
            LayoutEntry: null,
            page: 1,
            sortOptionName: config.sorts && config.sorts[0] && config.sorts[0].ruleOptionName,
            currentCardSize: _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getCardSizeNumberInConfig(props, _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getDefaultMinListSize(props)),
            forceShowMask: false,
            widgetRect: _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getDefaultMinListSize(props),
            showList: true,
            searchText: '',
            currentFilter: undefined,
            filterApplied: false,
            showSelectionOnly: false,
            hideCardTool: false,
            scrollStatus: 'start',
            datasource: undefined,
            hoverIndex: -1,
            isScrolling: false,
            isScrollSpeedOver: false,
            isResizingCard: false,
            searchSuggestion: [],
            isSearchBoxVisible: false,
            isOpenTopToolsPopper: false,
            latestUpdateTime: 0,
            showLoading: false,
            autoRefreshLoadingString: '',
            listDivSize: {
                clientWidth: null,
                clientHeight: null
            },
            toolsDivWidth: null,
            listDivBoundRect: null,
            isScrollEnd: false,
            isMount: false,
            createDataSourceFailed: false
        };
        this.selectSelf = this.selectSelf.bind(this);
        this.handleResizeCard = this.handleResizeCard.bind(this);
        this.listRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createRef();
        if (window.jimuConfig.isInBuilder) {
            stateObj.LayoutEntry = this.props.builderSupportModules.LayoutEntry;
        }
        else {
            stateObj.LayoutEntry = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.LayoutEntry;
        }
        this.state = stateObj;
        this.onResize = this.onResize.bind(this);
        this.changeIsResizingCard = this.changeIsResizingCard.bind(this);
        this.setRefreshLoadingString = this.setRefreshLoadingString.bind(this);
        this.resetAutoRefreshTimes = this.resetAutoRefreshTimes.bind(this);
        this.debounceOnResize = jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.debounce((width, height) => { this.onResize(width, height); }, 200);
        this.debounceResetAfterIndices = jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.debounce(() => { this.resetAfterIndices(); }, 200);
    }
    componentDidMount() {
        this.setState({
            isMount: true
        });
        this.getBodySize();
        window.addEventListener('resize', this.getBodySize);
        // const {outputDataSources, useDataSources} = this.props
        // if(this.records != defaultRecords){
        //   listUtils.createOutputDs(this.records, outputDataSources?.[0], useDataSources?.[0]);
        // }
    }
    componentWillUnmount() {
        clearTimeout(this.resizeTimeout);
        clearTimeout(this.updateCardToolTimeout);
        clearTimeout(this.mouseClickTimeout);
        clearTimeout(this.suggestionsQueryTimeout);
        clearTimeout(this.showPopperTimeOut);
        clearTimeout(this.resetAutoRefreshTime);
        clearTimeout(this.setPageTimeout);
        clearTimeout(this.onItemsRenderedTimeout);
        clearInterval(this.autoRefreshLoadingTime);
    }
    componentDidUpdate(preProps, preState) {
        var _a;
        const { config, appMode } = this.props;
        const { datasource } = this.state;
        if (!window.jimuConfig.isInBuilder || appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Run) {
            const isOpenSelectionMode = config.cardConfigs[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Selected].selectionMode !== _config__WEBPACK_IMPORTED_MODULE_2__.SelectionModeType.None;
            // Listen selected records change from outside
            if (datasource && isOpenSelectionMode) {
                this.scrollToSelectedItems(datasource);
            }
        }
        // updade list in builder
        this.updateListInBuilder(preProps, preState);
        // listen appMode change
        this.appModeChange(preProps);
        if ((preProps === null || preProps === void 0 ? void 0 : preProps.selectionIsInSelf) !== ((_a = this.props) === null || _a === void 0 ? void 0 : _a.selectionIsInSelf)) {
            this.setSelectionStatus();
        }
        this.setListLayoutInWidgetState();
        this.setListParentSizeInWidgetState();
        this.updatePageWhenPrePageSizeChange(preProps.config);
        // update output ds
        // if(this.records != defaultRecords){
        //   listUtils.createOutputDs(this.records, outputDataSources?.[0], useDataSources?.[0]);
        // }
    }
    changeIsResizingCard(isResizingCard) {
        this.setState({
            isResizingCard: isResizingCard
        });
    }
    handleResizeCard(newCardSize, resizeEnd = false, isTop, isLeft, isReplace = false) {
        if (resizeEnd) {
            const cardSize = this.initNewCardSize(newCardSize);
            window.jimuConfig.isInBuilder &&
                this.props.builderSupportModules.widgetModules.handleResizeCard(this.props, cardSize, isTop, isLeft, resizeEnd, isReplace);
        }
        else {
            this.setState({
                currentCardSize: newCardSize
            }, () => {
                this.refreshList(false);
            });
        }
    }
    selectSelf() {
        window.jimuConfig.isInBuilder &&
            this.props.builderSupportModules.widgetModules.selectSelf(this.props);
    }
    getOutputDs() {
        const outputDsId = this.props.outputDataSources && this.props.outputDataSources[0];
        const useDs = this.props.useDataSources && this.props.useDataSources[0];
        if (!outputDsId || !useDs)
            return;
        const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceManager.getInstance();
        return dsManager.getDataSource(outputDsId);
    }
    render() {
        const { config, id, appMode, browserSizeMode, selectionIsInSelf, selectionIsSelf, useDataSources, builderStatus, layouts } = this.props;
        const appConfig = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig;
        const { forceShowMask, datasource, widgetRect, page, createDataSourceFailed } = this.state;
        const isInBuilder = window.jimuConfig.isInBuilder;
        const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-widget', 'widget-list', 'list-widget-' + id);
        if (!config.itemStyle) {
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.WidgetPlaceholder, { widgetId: this.props.id, icon: __webpack_require__(/*! ./assets/icon.svg */ "./your-extensions/widgets/list-112/src/runtime/assets/icon.svg"), message: this.formatMessage('placeHolderTip') }));
        }
        const showBottomTool = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.showBottomTools(this.props, this.state);
        const bottomToolH = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getBottomToolH(this.paginatorDiv.current, showBottomTool);
        const showTopTools = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.showTopTools(this.props);
        const listHeight = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getListHeight(widgetRect, bottomToolH, showTopTools);
        const columnCount = (config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID ? this.getItemColumnCount() : null;
        const pageSize = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getPageSize(widgetRect, listHeight, this.props, columnCount);
        this.pageSize = pageSize;
        const queryPageSize = pageSize;
        let query = (0,_utils_list_service__WEBPACK_IMPORTED_MODULE_4__.getQueryOptions)(this.state, this.props, queryPageSize);
        if (!(0,_utils_list_service__WEBPACK_IMPORTED_MODULE_4__.compareQueryOptionsExceptPaging)(query, this.lastQuery, datasource) && datasource) {
            const temp = query;
            if (page !== 1) {
                query = this.lastQuery;
                this.lastQuery = temp;
                this.setState({
                    page: 1
                });
            }
            else {
                this.lastQuery = temp;
            }
        }
        const currentLayout = appConfig === null || appConfig === void 0 ? void 0 : appConfig.layouts[jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.searchUtils.findLayoutId(layouts[builderStatus], browserSizeMode, appConfig.mainSizeMode)];
        const currentLayoutType = currentLayout && currentLayout.type;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: classes, css: (0,_styles_style__WEBPACK_IMPORTED_MODULE_5__.getStyle)(this.props, this.isEditing(), showBottomTool), onPointerDown: evt => {
                isInBuilder &&
                    appMode !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Run &&
                    !selectionIsSelf &&
                    !selectionIsInSelf &&
                    this.handleListPointerDown(evt);
            } },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'widget-list d-flex', onMouseMove: this.onListContainerMouseMove },
                this.isDsConfigured()
                    ? ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceComponent, { query: datasource ? query : null, useDataSource: useDataSources && useDataSources[0], onDataSourceCreated: this.onDSCreated, onCreateDataSourceFailed: this.onCreateDataSourceFailed, widgetId: this.props.id, queryCount: true }, this.renderList))
                    : (this.renderList()),
                (!this.isHasRenderList && !createDataSourceFailed) && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'list-loading-con w-100 h-100' },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'jimu-secondary-loading' }))),
                createDataSourceFailed && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'list-error-con position-relative w-100 h-100' },
                    this.renderWidgetPlaceholder(),
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Alert, { className: 'position-absolute', type: 'warning', withIcon: true, text: this.formatMessage('dataSourceCreateError') }))),
            isInBuilder &&
                appMode !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Run &&
                (forceShowMask ||
                    (!selectionIsInSelf && !selectionIsSelf) ||
                    (!config.isItemStyleConfirm && currentLayoutType)) && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'list-with-mask' })),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactResizeDetector, { handleWidth: true, handleHeight: true, onResize: this.debounceOnResize })));
    }
}
Widget.versionManager = _version_manager__WEBPACK_IMPORTED_MODULE_14__.versionManager;
Widget.mapExtraStateProps = (state, props) => {
    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x;
    const appConfig = state && state.appConfig;
    const { layouts, layoutId, layoutItemId, builderSupportModules, id } = props;
    const browserSizeMode = state && state.browserSizeMode;
    const builderStatus = (state &&
        state.widgetsState &&
        state.widgetsState[props.id] &&
        state.widgetsState[props.id].builderStatus) ||
        _config__WEBPACK_IMPORTED_MODULE_2__.Status.Regular;
    let subLayoutType;
    if (appConfig) {
        const subLayout = appConfig &&
            state.appConfig.layouts &&
            state.appConfig.layouts[jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.searchUtils.findLayoutId(layouts[builderStatus], browserSizeMode, appConfig.mainSizeMode)];
        subLayoutType = subLayout && subLayout.type;
    }
    const layout = (_a = appConfig.layouts) === null || _a === void 0 ? void 0 : _a[layoutId];
    const layoutSetting = (_c = (_b = layout === null || layout === void 0 ? void 0 : layout.content) === null || _b === void 0 ? void 0 : _b[layoutItemId]) === null || _c === void 0 ? void 0 : _c.setting;
    const isHeightAuto = ((_d = layoutSetting === null || layoutSetting === void 0 ? void 0 : layoutSetting.autoProps) === null || _d === void 0 ? void 0 : _d.height) === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.LayoutItemSizeModes.Auto ||
        ((_e = layoutSetting === null || layoutSetting === void 0 ? void 0 : layoutSetting.autoProps) === null || _e === void 0 ? void 0 : _e.height) === true;
    const isWidthAuto = ((_f = layoutSetting === null || layoutSetting === void 0 ? void 0 : layoutSetting.autoProps) === null || _f === void 0 ? void 0 : _f.width) === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.LayoutItemSizeModes.Auto ||
        ((_g = layoutSetting === null || layoutSetting === void 0 ? void 0 : layoutSetting.autoProps) === null || _g === void 0 ? void 0 : _g.width) === true;
    let widgetPosition;
    if (window.jimuConfig.isInBuilder) {
        const bbox = (_l = (_k = (_j = (_h = appConfig.layouts) === null || _h === void 0 ? void 0 : _h[layoutId]) === null || _j === void 0 ? void 0 : _j.content) === null || _k === void 0 ? void 0 : _k[layoutItemId]) === null || _l === void 0 ? void 0 : _l.bbox;
        widgetPosition = bbox && {
            left: bbox.left,
            top: bbox.top
        };
    }
    const selection = state && state.appRuntimeInfo && state.appRuntimeInfo.selection;
    const selectionIsInSelf = selection &&
        builderSupportModules &&
        builderSupportModules.widgetModules &&
        builderSupportModules.widgetModules.selectionInList(selection, id, appConfig, false);
    let selectionStatus;
    if (selectionIsInSelf) {
        selectionStatus = Object.keys(layouts).find(status => jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.searchUtils.findLayoutId(layouts[status], browserSizeMode, appConfig.mainSizeMode) === selection.layoutId);
    }
    const selectionIsSelf = !!(selection &&
        selection.layoutId === layoutId &&
        selection.layoutItemId === layoutItemId);
    const currentPageId = (_m = state === null || state === void 0 ? void 0 : state.appRuntimeInfo) === null || _m === void 0 ? void 0 : _m.currentPageId;
    const pageMode = (_q = (_p = (_o = state === null || state === void 0 ? void 0 : state.appConfig) === null || _o === void 0 ? void 0 : _o.pages) === null || _p === void 0 ? void 0 : _p[currentPageId]) === null || _q === void 0 ? void 0 : _q.mode;
    return {
        selectionIsSelf: selectionIsSelf,
        selectionIsInSelf: !!selectionIsInSelf,
        selectionStatus,
        appMode: (_r = state === null || state === void 0 ? void 0 : state.appRuntimeInfo) === null || _r === void 0 ? void 0 : _r.appMode,
        browserSizeMode: state && state.browserSizeMode,
        builderStatus: (state &&
            state.widgetsState &&
            state.widgetsState[props.id] &&
            state.widgetsState[props.id].builderStatus) ||
            _config__WEBPACK_IMPORTED_MODULE_2__.Status.Regular,
        showLoading: (_t = (_s = state === null || state === void 0 ? void 0 : state.widgetsState) === null || _s === void 0 ? void 0 : _s[props.id]) === null || _t === void 0 ? void 0 : _t.showLoading,
        isRTL: state && state.appContext && state.appContext.isRTL,
        subLayoutType,
        left: widgetPosition && widgetPosition.left,
        top: widgetPosition && widgetPosition.top,
        isHeightAuto,
        isWidthAuto,
        queryObject: state.queryObject,
        boundingBox: (_v = (_u = layout === null || layout === void 0 ? void 0 : layout.content) === null || _u === void 0 ? void 0 : _u[layoutItemId]) === null || _v === void 0 ? void 0 : _v.bbox,
        heightLayoutItemSizeModes: (_w = layoutSetting === null || layoutSetting === void 0 ? void 0 : layoutSetting.autoProps) === null || _w === void 0 ? void 0 : _w.height,
        parentSize: ((_x = state.widgetsState[props.id]) === null || _x === void 0 ? void 0 : _x.parentSize) || null,
        pageMode: pageMode
    };
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Widget);
function __set_webpack_public_path__(url) { __webpack_require__.p = url; }

})();

/******/ 	return __webpack_exports__;
/******/ })()

			);
		}
	};
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9saXN0LTExMi9kaXN0L3J1bnRpbWUvd2lkZ2V0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHNCQUFzQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxpRUFBZSxVQUFVLEVBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2hEZ0M7QUFDNEI7QUFDaEI7QUFDakM7QUFDZ0I7QUFDK0M7O0FBRXBHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGVBQWU7O0FBRWY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QixtQ0FBbUM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjs7QUFFQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOzs7QUFHQTtBQUNBO0FBQ0E7O0FBRUEsSUFBSSxJQUFxQztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksb0ZBQWM7O0FBRWxCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw0REFBNEQsNEZBQXNCO0FBQ2xGO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiw0RkFBc0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyx1REFBVTtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0EsNEJBQTRCLHVEQUFVO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLGlDQUFpQyx1REFBVTtBQUMzQztBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxpREFBaUQ7QUFDakQ7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZOzs7QUFHWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHlGQUF5RjtBQUN6RjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSw0Q0FBNEMsMkJBQTJCO0FBQ3ZFLG9EQUFvRCxpQ0FBaUM7QUFDckYsdUJBQXVCLG9EQUFhO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLFFBQVE7QUFDUjs7O0FBR0E7QUFDQTtBQUNBLGFBQWEsb0RBQWE7QUFDMUI7QUFDQTtBQUNBO0FBQ0EsZUFBZSw4RUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPLEVBQUUsb0RBQWE7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGdIQUFnSDtBQUNoSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsNEdBQTRHO0FBQzVHOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRyxDQUFDLGdEQUFhO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE1BQU0sSUFBcUM7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkM7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkM7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx3Q0FBd0MsWUFBWTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw2RUFBNkU7QUFDN0U7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxRQUFRO0FBQ1I7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBOzs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxRQUFRLElBQXFDO0FBQzdDO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7OztBQUdBO0FBQ0E7O0FBRUEsSUFBSSxJQUFxQztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLG9GQUFjOztBQUVsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsNERBQTRELDRGQUFzQjtBQUNsRjtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsNEZBQXNCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyx1REFBVTtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBLDRCQUE0Qix1REFBVTtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsVUFBVTtBQUNWOztBQUVBLDRFQUE0RTs7QUFFNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxpQ0FBaUMsdURBQVU7QUFDM0M7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZOzs7QUFHWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7OztBQUdaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJEO0FBQzNEO0FBQ0EseUNBQXlDOztBQUV6Qzs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHVDQUF1Qzs7QUFFdkM7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHVDQUF1Qzs7QUFFdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdEOztBQUVoRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLHNDQUFzQyxxQkFBcUI7QUFDM0QscUJBQXFCLG9EQUFhO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQSxRQUFRO0FBQ1I7OztBQUdBO0FBQ0EsYUFBYSxvREFBYTtBQUMxQjtBQUNBO0FBQ0E7QUFDQSxlQUFlLDhFQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU8sRUFBRSxvREFBYTtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw0R0FBNEc7QUFDNUc7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHLENBQUMsZ0RBQWE7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE1BQU0sSUFBcUM7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07OztBQUdOOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsd0NBQXdDLFlBQVk7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQztBQUNwQzs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qjs7QUFFN0I7QUFDQTtBQUNBLHVFQUF1RTtBQUN2RTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7O0FBRUE7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCOztBQUU3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDhGQUE4RjtBQUM5RjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBLFFBQVEsSUFBcUM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG9CQUFvQjtBQUNwQixVQUFVO0FBQ1YsbUNBQW1DO0FBQ25DLFVBQVU7QUFDVjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLFVBQVU7QUFDVjtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxvQkFBb0I7QUFDcEIsVUFBVTtBQUNWLGdDQUFnQztBQUNoQyxVQUFVO0FBQ1Y7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQSxVQUFVO0FBQ1Y7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsd0RBQXdEO0FBQ3hELEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxRQUFRLElBQXFDO0FBQzdDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esc0JBQXNCO0FBQ3RCLFlBQVk7QUFDWixtQ0FBbUM7QUFDbkMsWUFBWTtBQUNaO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLFVBQVU7QUFDVjtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsd0RBQXdEO0FBQ3hELEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUEsUUFBUSxJQUFxQztBQUM3QztBQUNBO0FBQ0E7QUFD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LEdBQUc7UUFDekMsWUFBWTtRQUNaLFdBQVc7UUFDWCxXQUFXLEVBQUUsS0FBSyxDQUFDLFdBQVc7UUFDOUIsV0FBVyxFQUFFLGtCQUFNLGFBQU4sTUFBTSx1QkFBTixNQUFNLENBQUUsT0FBTywwQ0FBRyxZQUFZLENBQUMsMENBQUUsSUFBSTtRQUNsRCx5QkFBeUIsRUFBRSxtQkFBYSxhQUFiLGFBQWEsdUJBQWIsYUFBYSxDQUFFLFNBQVMsMENBQUUsTUFBTTtRQUMzRCxVQUFVLEVBQUUsWUFBSyxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLDBDQUFFLFVBQVUsS0FBSSxJQUFJO1FBQzVELFFBQVEsRUFBRSxRQUFRO0tBQ25CO0FBQ0gsQ0FBQztBQXdoRkgsaUVBQWUsTUFBTTtBQUViLFNBQVMsMkJBQTJCLENBQUMsR0FBRyxJQUFJLHFCQUF1QixHQUFHLEdBQUcsRUFBQyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9tZW1vaXplLW9uZS9kaXN0L21lbW9pemUtb25lLmVzbS5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL3JlYWN0LXdpbmRvdy9kaXN0L2luZGV4LmVzbS5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvYnJhbmQvd2lkZ2V0LWZpbHRlci5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2JyYW5kL3dpZGdldC1saXN0LnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvYXJyb3ctbGVmdC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL2Rvd24uc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9sZWZ0LnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvcmlnaHQuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC91cC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2VkaXRvci9jbG9zZS5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2VkaXRvci9tZW51LnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZWRpdG9yL3Jlc2V0LnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZWRpdG9yL3NlYXJjaC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2VkaXRvci9zaG93LXNlbGVjdGlvbi0tcnRsLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZWRpdG9yL3Nob3ctc2VsZWN0aW9uLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZWRpdG9yL3N5bmMtb2ZmLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZWRpdG9yL3N5bmMtb24uc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9lZGl0b3IvdHJhc2gtY2hlY2suc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9zdWdnZXN0ZWQvd2FybmluZy5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL2xpc3QtMTEyL3NyYy9ydW50aW1lL2Fzc2V0cy9pY29uLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9icmFuZC93aWRnZXQtZmlsdGVyLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9hcnJvdy1sZWZ0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9kb3duLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9sZWZ0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9yaWdodC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvb3V0bGluZWQvZGlyZWN0aW9uYWwvdXAudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL291dGxpbmVkL2VkaXRvci9jbG9zZS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvb3V0bGluZWQvZWRpdG9yL21lbnUudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL291dGxpbmVkL2VkaXRvci9yZXNldC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvb3V0bGluZWQvZWRpdG9yL3NlYXJjaC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvb3V0bGluZWQvZWRpdG9yL3Nob3ctc2VsZWN0aW9uLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9lZGl0b3Ivc3luYy1vZmYudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL291dGxpbmVkL2VkaXRvci9zeW5jLW9uLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9lZGl0b3IvdHJhc2gtY2hlY2sudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL291dGxpbmVkL3N1Z2dlc3RlZC93YXJuaW5nLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvbGlzdC0xMTIvc3JjL2NvbmZpZy50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvbGlzdC0xMTIvc3JjL3J1bnRpbWUvY29tcG9uZW50cy9ib3R0b20tdG9vbHMudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9saXN0LTExMi9zcmMvcnVudGltZS9jb21wb25lbnRzL2ZpbHRlci1waWNrZXIudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9saXN0LTExMi9zcmMvcnVudGltZS9jb21wb25lbnRzL2xpc3QtY2FyZC1iYXNlLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvbGlzdC0xMTIvc3JjL3J1bnRpbWUvY29tcG9uZW50cy9saXN0LWNhcmQtZWRpdG9yLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvbGlzdC0xMTIvc3JjL3J1bnRpbWUvY29tcG9uZW50cy9saXN0LWNhcmQtdmlld2VyLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4veW91ci1leHRlbnNpb25zL3dpZGdldHMvbGlzdC0xMTIvc3JjL3J1bnRpbWUvY29tcG9uZW50cy9teS1kcm9wZG93bi50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL2xpc3QtMTEyL3NyYy9ydW50aW1lL2NvbXBvbmVudHMvc2VhcmNoLWJveC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL2xpc3QtMTEyL3NyYy9ydW50aW1lL3N0eWxlcy9zdHlsZS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL2xpc3QtMTEyL3NyYy9ydW50aW1lL3RyYW5zbGF0aW9ucy9kZWZhdWx0LnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9saXN0LTExMi9zcmMvcnVudGltZS91dGlscy9saXN0LXNlcnZpY2UudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9saXN0LTExMi9zcmMvcnVudGltZS91dGlscy91dGlscy50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL2xpc3QtMTEyL3NyYy92ZXJzaW9uLW1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LWNvcmVcIiIsIndlYnBhY2s6Ly9leGItY2xpZW50L2V4dGVybmFsIHN5c3RlbSBcImppbXUtY29yZS9yZWFjdFwiIiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwiamltdS1sYXlvdXRzL2xheW91dC1ydW50aW1lXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LXVpXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LXVpL2Jhc2ljL3NxbC1leHByZXNzaW9uLXJ1bnRpbWVcIiIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2Fzc2VydFRoaXNJbml0aWFsaXplZC5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHMuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0c0xvb3NlLmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZS5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NldFByb3RvdHlwZU9mLmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly9leGItY2xpZW50L3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9leGItY2xpZW50L3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL2V4Yi1jbGllbnQvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtY29yZS9saWIvc2V0LXB1YmxpYy1wYXRoLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9saXN0LTExMi9zcmMvcnVudGltZS93aWRnZXQudHN4Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBzYWZlSXNOYU4gPSBOdW1iZXIuaXNOYU4gfHxcbiAgICBmdW5jdGlvbiBwb255ZmlsbCh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyAmJiB2YWx1ZSAhPT0gdmFsdWU7XG4gICAgfTtcbmZ1bmN0aW9uIGlzRXF1YWwoZmlyc3QsIHNlY29uZCkge1xuICAgIGlmIChmaXJzdCA9PT0gc2Vjb25kKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoc2FmZUlzTmFOKGZpcnN0KSAmJiBzYWZlSXNOYU4oc2Vjb25kKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gYXJlSW5wdXRzRXF1YWwobmV3SW5wdXRzLCBsYXN0SW5wdXRzKSB7XG4gICAgaWYgKG5ld0lucHV0cy5sZW5ndGggIT09IGxhc3RJbnB1dHMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuZXdJbnB1dHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKCFpc0VxdWFsKG5ld0lucHV0c1tpXSwgbGFzdElucHV0c1tpXSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gbWVtb2l6ZU9uZShyZXN1bHRGbiwgaXNFcXVhbCkge1xuICAgIGlmIChpc0VxdWFsID09PSB2b2lkIDApIHsgaXNFcXVhbCA9IGFyZUlucHV0c0VxdWFsOyB9XG4gICAgdmFyIGxhc3RUaGlzO1xuICAgIHZhciBsYXN0QXJncyA9IFtdO1xuICAgIHZhciBsYXN0UmVzdWx0O1xuICAgIHZhciBjYWxsZWRPbmNlID0gZmFsc2U7XG4gICAgZnVuY3Rpb24gbWVtb2l6ZWQoKSB7XG4gICAgICAgIHZhciBuZXdBcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBuZXdBcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNhbGxlZE9uY2UgJiYgbGFzdFRoaXMgPT09IHRoaXMgJiYgaXNFcXVhbChuZXdBcmdzLCBsYXN0QXJncykpIHtcbiAgICAgICAgICAgIHJldHVybiBsYXN0UmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGxhc3RSZXN1bHQgPSByZXN1bHRGbi5hcHBseSh0aGlzLCBuZXdBcmdzKTtcbiAgICAgICAgY2FsbGVkT25jZSA9IHRydWU7XG4gICAgICAgIGxhc3RUaGlzID0gdGhpcztcbiAgICAgICAgbGFzdEFyZ3MgPSBuZXdBcmdzO1xuICAgICAgICByZXR1cm4gbGFzdFJlc3VsdDtcbiAgICB9XG4gICAgcmV0dXJuIG1lbW9pemVkO1xufVxuXG5leHBvcnQgZGVmYXVsdCBtZW1vaXplT25lO1xuIiwiaW1wb3J0IF9leHRlbmRzIGZyb20gJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHMnO1xuaW1wb3J0IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQgZnJvbSAnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXNzZXJ0VGhpc0luaXRpYWxpemVkJztcbmltcG9ydCBfaW5oZXJpdHNMb29zZSBmcm9tICdAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0c0xvb3NlJztcbmltcG9ydCBtZW1vaXplT25lIGZyb20gJ21lbW9pemUtb25lJztcbmltcG9ydCB7IGNyZWF0ZUVsZW1lbnQsIFB1cmVDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UgZnJvbSAnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZSc7XG5cbi8vIEFuaW1hdGlvbiBmcmFtZSBiYXNlZCBpbXBsZW1lbnRhdGlvbiBvZiBzZXRUaW1lb3V0LlxuLy8gSW5zcGlyZWQgYnkgSm9lIExhbWJlcnQsIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL2pvZWxhbWJlcnQvMTAwMjExNiNmaWxlLXJlcXVlc3R0aW1lb3V0LWpzXG52YXIgaGFzTmF0aXZlUGVyZm9ybWFuY2VOb3cgPSB0eXBlb2YgcGVyZm9ybWFuY2UgPT09ICdvYmplY3QnICYmIHR5cGVvZiBwZXJmb3JtYW5jZS5ub3cgPT09ICdmdW5jdGlvbic7XG52YXIgbm93ID0gaGFzTmF0aXZlUGVyZm9ybWFuY2VOb3cgPyBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBwZXJmb3JtYW5jZS5ub3coKTtcbn0gOiBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBEYXRlLm5vdygpO1xufTtcbmZ1bmN0aW9uIGNhbmNlbFRpbWVvdXQodGltZW91dElEKSB7XG4gIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRpbWVvdXRJRC5pZCk7XG59XG5mdW5jdGlvbiByZXF1ZXN0VGltZW91dChjYWxsYmFjaywgZGVsYXkpIHtcbiAgdmFyIHN0YXJ0ID0gbm93KCk7XG5cbiAgZnVuY3Rpb24gdGljaygpIHtcbiAgICBpZiAobm93KCkgLSBzdGFydCA+PSBkZWxheSkge1xuICAgICAgY2FsbGJhY2suY2FsbChudWxsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGltZW91dElELmlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRpY2spO1xuICAgIH1cbiAgfVxuXG4gIHZhciB0aW1lb3V0SUQgPSB7XG4gICAgaWQ6IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aWNrKVxuICB9O1xuICByZXR1cm4gdGltZW91dElEO1xufVxuXG52YXIgc2l6ZSA9IC0xOyAvLyBUaGlzIHV0aWxpdHkgY29waWVkIGZyb20gXCJkb20taGVscGVyc1wiIHBhY2thZ2UuXG5cbmZ1bmN0aW9uIGdldFNjcm9sbGJhclNpemUocmVjYWxjdWxhdGUpIHtcbiAgaWYgKHJlY2FsY3VsYXRlID09PSB2b2lkIDApIHtcbiAgICByZWNhbGN1bGF0ZSA9IGZhbHNlO1xuICB9XG5cbiAgaWYgKHNpemUgPT09IC0xIHx8IHJlY2FsY3VsYXRlKSB7XG4gICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHZhciBzdHlsZSA9IGRpdi5zdHlsZTtcbiAgICBzdHlsZS53aWR0aCA9ICc1MHB4JztcbiAgICBzdHlsZS5oZWlnaHQgPSAnNTBweCc7XG4gICAgc3R5bGUub3ZlcmZsb3cgPSAnc2Nyb2xsJztcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRpdik7XG4gICAgc2l6ZSA9IGRpdi5vZmZzZXRXaWR0aCAtIGRpdi5jbGllbnRXaWR0aDtcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGRpdik7XG4gIH1cblxuICByZXR1cm4gc2l6ZTtcbn1cbnZhciBjYWNoZWRSVExSZXN1bHQgPSBudWxsOyAvLyBUUklDS1kgQWNjb3JkaW5nIHRvIHRoZSBzcGVjLCBzY3JvbGxMZWZ0IHNob3VsZCBiZSBuZWdhdGl2ZSBmb3IgUlRMIGFsaWduZWQgZWxlbWVudHMuXG4vLyBDaHJvbWUgZG9lcyBub3Qgc2VlbSB0byBhZGhlcmU7IGl0cyBzY3JvbGxMZWZ0IHZhbHVlcyBhcmUgcG9zaXRpdmUgKG1lYXN1cmVkIHJlbGF0aXZlIHRvIHRoZSBsZWZ0KS5cbi8vIFNhZmFyaSdzIGVsYXN0aWMgYm91bmNlIG1ha2VzIGRldGVjdGluZyB0aGlzIGV2ZW4gbW9yZSBjb21wbGljYXRlZCB3cnQgcG90ZW50aWFsIGZhbHNlIHBvc2l0aXZlcy5cbi8vIFRoZSBzYWZlc3Qgd2F5IHRvIGNoZWNrIHRoaXMgaXMgdG8gaW50ZW50aW9uYWxseSBzZXQgYSBuZWdhdGl2ZSBvZmZzZXQsXG4vLyBhbmQgdGhlbiB2ZXJpZnkgdGhhdCB0aGUgc3Vic2VxdWVudCBcInNjcm9sbFwiIGV2ZW50IG1hdGNoZXMgdGhlIG5lZ2F0aXZlIG9mZnNldC5cbi8vIElmIGl0IGRvZXMgbm90IG1hdGNoLCB0aGVuIHdlIGNhbiBhc3N1bWUgYSBub24tc3RhbmRhcmQgUlRMIHNjcm9sbCBpbXBsZW1lbnRhdGlvbi5cblxuZnVuY3Rpb24gZ2V0UlRMT2Zmc2V0VHlwZShyZWNhbGN1bGF0ZSkge1xuICBpZiAocmVjYWxjdWxhdGUgPT09IHZvaWQgMCkge1xuICAgIHJlY2FsY3VsYXRlID0gZmFsc2U7XG4gIH1cblxuICBpZiAoY2FjaGVkUlRMUmVzdWx0ID09PSBudWxsIHx8IHJlY2FsY3VsYXRlKSB7XG4gICAgdmFyIG91dGVyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdmFyIG91dGVyU3R5bGUgPSBvdXRlckRpdi5zdHlsZTtcbiAgICBvdXRlclN0eWxlLndpZHRoID0gJzUwcHgnO1xuICAgIG91dGVyU3R5bGUuaGVpZ2h0ID0gJzUwcHgnO1xuICAgIG91dGVyU3R5bGUub3ZlcmZsb3cgPSAnc2Nyb2xsJztcbiAgICBvdXRlclN0eWxlLmRpcmVjdGlvbiA9ICdydGwnO1xuICAgIHZhciBpbm5lckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHZhciBpbm5lclN0eWxlID0gaW5uZXJEaXYuc3R5bGU7XG4gICAgaW5uZXJTdHlsZS53aWR0aCA9ICcxMDBweCc7XG4gICAgaW5uZXJTdHlsZS5oZWlnaHQgPSAnMTAwcHgnO1xuICAgIG91dGVyRGl2LmFwcGVuZENoaWxkKGlubmVyRGl2KTtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG91dGVyRGl2KTtcblxuICAgIGlmIChvdXRlckRpdi5zY3JvbGxMZWZ0ID4gMCkge1xuICAgICAgY2FjaGVkUlRMUmVzdWx0ID0gJ3Bvc2l0aXZlLWRlc2NlbmRpbmcnO1xuICAgIH0gZWxzZSB7XG4gICAgICBvdXRlckRpdi5zY3JvbGxMZWZ0ID0gMTtcblxuICAgICAgaWYgKG91dGVyRGl2LnNjcm9sbExlZnQgPT09IDApIHtcbiAgICAgICAgY2FjaGVkUlRMUmVzdWx0ID0gJ25lZ2F0aXZlJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNhY2hlZFJUTFJlc3VsdCA9ICdwb3NpdGl2ZS1hc2NlbmRpbmcnO1xuICAgICAgfVxuICAgIH1cblxuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQob3V0ZXJEaXYpO1xuICAgIHJldHVybiBjYWNoZWRSVExSZXN1bHQ7XG4gIH1cblxuICByZXR1cm4gY2FjaGVkUlRMUmVzdWx0O1xufVxuXG52YXIgSVNfU0NST0xMSU5HX0RFQk9VTkNFX0lOVEVSVkFMID0gMTUwO1xuXG52YXIgZGVmYXVsdEl0ZW1LZXkgPSBmdW5jdGlvbiBkZWZhdWx0SXRlbUtleShfcmVmKSB7XG4gIHZhciBjb2x1bW5JbmRleCA9IF9yZWYuY29sdW1uSW5kZXgsXG4gICAgICBkYXRhID0gX3JlZi5kYXRhLFxuICAgICAgcm93SW5kZXggPSBfcmVmLnJvd0luZGV4O1xuICByZXR1cm4gcm93SW5kZXggKyBcIjpcIiArIGNvbHVtbkluZGV4O1xufTsgLy8gSW4gREVWIG1vZGUsIHRoaXMgU2V0IGhlbHBzIHVzIG9ubHkgbG9nIGEgd2FybmluZyBvbmNlIHBlciBjb21wb25lbnQgaW5zdGFuY2UuXG4vLyBUaGlzIGF2b2lkcyBzcGFtbWluZyB0aGUgY29uc29sZSBldmVyeSB0aW1lIGEgcmVuZGVyIGhhcHBlbnMuXG5cblxudmFyIGRldldhcm5pbmdzT3ZlcnNjYW5Db3VudCA9IG51bGw7XG52YXIgZGV2V2FybmluZ3NPdmVyc2NhblJvd3NDb2x1bW5zQ291bnQgPSBudWxsO1xudmFyIGRldldhcm5pbmdzVGFnTmFtZSA9IG51bGw7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygd2luZG93LldlYWtTZXQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgZGV2V2FybmluZ3NPdmVyc2NhbkNvdW50ID0gLyojX19QVVJFX18qL25ldyBXZWFrU2V0KCk7XG4gICAgZGV2V2FybmluZ3NPdmVyc2NhblJvd3NDb2x1bW5zQ291bnQgPSAvKiNfX1BVUkVfXyovbmV3IFdlYWtTZXQoKTtcbiAgICBkZXZXYXJuaW5nc1RhZ05hbWUgPSAvKiNfX1BVUkVfXyovbmV3IFdlYWtTZXQoKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVHcmlkQ29tcG9uZW50KF9yZWYyKSB7XG4gIHZhciBfY2xhc3M7XG5cbiAgdmFyIGdldENvbHVtbk9mZnNldCA9IF9yZWYyLmdldENvbHVtbk9mZnNldCxcbiAgICAgIGdldENvbHVtblN0YXJ0SW5kZXhGb3JPZmZzZXQgPSBfcmVmMi5nZXRDb2x1bW5TdGFydEluZGV4Rm9yT2Zmc2V0LFxuICAgICAgZ2V0Q29sdW1uU3RvcEluZGV4Rm9yU3RhcnRJbmRleCA9IF9yZWYyLmdldENvbHVtblN0b3BJbmRleEZvclN0YXJ0SW5kZXgsXG4gICAgICBnZXRDb2x1bW5XaWR0aCA9IF9yZWYyLmdldENvbHVtbldpZHRoLFxuICAgICAgZ2V0RXN0aW1hdGVkVG90YWxIZWlnaHQgPSBfcmVmMi5nZXRFc3RpbWF0ZWRUb3RhbEhlaWdodCxcbiAgICAgIGdldEVzdGltYXRlZFRvdGFsV2lkdGggPSBfcmVmMi5nZXRFc3RpbWF0ZWRUb3RhbFdpZHRoLFxuICAgICAgZ2V0T2Zmc2V0Rm9yQ29sdW1uQW5kQWxpZ25tZW50ID0gX3JlZjIuZ2V0T2Zmc2V0Rm9yQ29sdW1uQW5kQWxpZ25tZW50LFxuICAgICAgZ2V0T2Zmc2V0Rm9yUm93QW5kQWxpZ25tZW50ID0gX3JlZjIuZ2V0T2Zmc2V0Rm9yUm93QW5kQWxpZ25tZW50LFxuICAgICAgZ2V0Um93SGVpZ2h0ID0gX3JlZjIuZ2V0Um93SGVpZ2h0LFxuICAgICAgZ2V0Um93T2Zmc2V0ID0gX3JlZjIuZ2V0Um93T2Zmc2V0LFxuICAgICAgZ2V0Um93U3RhcnRJbmRleEZvck9mZnNldCA9IF9yZWYyLmdldFJvd1N0YXJ0SW5kZXhGb3JPZmZzZXQsXG4gICAgICBnZXRSb3dTdG9wSW5kZXhGb3JTdGFydEluZGV4ID0gX3JlZjIuZ2V0Um93U3RvcEluZGV4Rm9yU3RhcnRJbmRleCxcbiAgICAgIGluaXRJbnN0YW5jZVByb3BzID0gX3JlZjIuaW5pdEluc3RhbmNlUHJvcHMsXG4gICAgICBzaG91bGRSZXNldFN0eWxlQ2FjaGVPbkl0ZW1TaXplQ2hhbmdlID0gX3JlZjIuc2hvdWxkUmVzZXRTdHlsZUNhY2hlT25JdGVtU2l6ZUNoYW5nZSxcbiAgICAgIHZhbGlkYXRlUHJvcHMgPSBfcmVmMi52YWxpZGF0ZVByb3BzO1xuICByZXR1cm4gX2NsYXNzID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfUHVyZUNvbXBvbmVudCkge1xuICAgIF9pbmhlcml0c0xvb3NlKEdyaWQsIF9QdXJlQ29tcG9uZW50KTtcblxuICAgIC8vIEFsd2F5cyB1c2UgZXhwbGljaXQgY29uc3RydWN0b3IgZm9yIFJlYWN0IGNvbXBvbmVudHMuXG4gICAgLy8gSXQgcHJvZHVjZXMgbGVzcyBjb2RlIGFmdGVyIHRyYW5zcGlsYXRpb24uICgjMjYpXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVzZWxlc3MtY29uc3RydWN0b3JcbiAgICBmdW5jdGlvbiBHcmlkKHByb3BzKSB7XG4gICAgICB2YXIgX3RoaXM7XG5cbiAgICAgIF90aGlzID0gX1B1cmVDb21wb25lbnQuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICAgIF90aGlzLl9pbnN0YW5jZVByb3BzID0gaW5pdEluc3RhbmNlUHJvcHMoX3RoaXMucHJvcHMsIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICAgIF90aGlzLl9yZXNldElzU2Nyb2xsaW5nVGltZW91dElkID0gbnVsbDtcbiAgICAgIF90aGlzLl9vdXRlclJlZiA9IHZvaWQgMDtcbiAgICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgICBpbnN0YW5jZTogX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksXG4gICAgICAgIGlzU2Nyb2xsaW5nOiBmYWxzZSxcbiAgICAgICAgaG9yaXpvbnRhbFNjcm9sbERpcmVjdGlvbjogJ2ZvcndhcmQnLFxuICAgICAgICBzY3JvbGxMZWZ0OiB0eXBlb2YgX3RoaXMucHJvcHMuaW5pdGlhbFNjcm9sbExlZnQgPT09ICdudW1iZXInID8gX3RoaXMucHJvcHMuaW5pdGlhbFNjcm9sbExlZnQgOiAwLFxuICAgICAgICBzY3JvbGxUb3A6IHR5cGVvZiBfdGhpcy5wcm9wcy5pbml0aWFsU2Nyb2xsVG9wID09PSAnbnVtYmVyJyA/IF90aGlzLnByb3BzLmluaXRpYWxTY3JvbGxUb3AgOiAwLFxuICAgICAgICBzY3JvbGxVcGRhdGVXYXNSZXF1ZXN0ZWQ6IGZhbHNlLFxuICAgICAgICB2ZXJ0aWNhbFNjcm9sbERpcmVjdGlvbjogJ2ZvcndhcmQnXG4gICAgICB9O1xuICAgICAgX3RoaXMuX2NhbGxPbkl0ZW1zUmVuZGVyZWQgPSB2b2lkIDA7XG4gICAgICBfdGhpcy5fY2FsbE9uSXRlbXNSZW5kZXJlZCA9IG1lbW9pemVPbmUoZnVuY3Rpb24gKG92ZXJzY2FuQ29sdW1uU3RhcnRJbmRleCwgb3ZlcnNjYW5Db2x1bW5TdG9wSW5kZXgsIG92ZXJzY2FuUm93U3RhcnRJbmRleCwgb3ZlcnNjYW5Sb3dTdG9wSW5kZXgsIHZpc2libGVDb2x1bW5TdGFydEluZGV4LCB2aXNpYmxlQ29sdW1uU3RvcEluZGV4LCB2aXNpYmxlUm93U3RhcnRJbmRleCwgdmlzaWJsZVJvd1N0b3BJbmRleCkge1xuICAgICAgICByZXR1cm4gX3RoaXMucHJvcHMub25JdGVtc1JlbmRlcmVkKHtcbiAgICAgICAgICBvdmVyc2NhbkNvbHVtblN0YXJ0SW5kZXg6IG92ZXJzY2FuQ29sdW1uU3RhcnRJbmRleCxcbiAgICAgICAgICBvdmVyc2NhbkNvbHVtblN0b3BJbmRleDogb3ZlcnNjYW5Db2x1bW5TdG9wSW5kZXgsXG4gICAgICAgICAgb3ZlcnNjYW5Sb3dTdGFydEluZGV4OiBvdmVyc2NhblJvd1N0YXJ0SW5kZXgsXG4gICAgICAgICAgb3ZlcnNjYW5Sb3dTdG9wSW5kZXg6IG92ZXJzY2FuUm93U3RvcEluZGV4LFxuICAgICAgICAgIHZpc2libGVDb2x1bW5TdGFydEluZGV4OiB2aXNpYmxlQ29sdW1uU3RhcnRJbmRleCxcbiAgICAgICAgICB2aXNpYmxlQ29sdW1uU3RvcEluZGV4OiB2aXNpYmxlQ29sdW1uU3RvcEluZGV4LFxuICAgICAgICAgIHZpc2libGVSb3dTdGFydEluZGV4OiB2aXNpYmxlUm93U3RhcnRJbmRleCxcbiAgICAgICAgICB2aXNpYmxlUm93U3RvcEluZGV4OiB2aXNpYmxlUm93U3RvcEluZGV4XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBfdGhpcy5fY2FsbE9uU2Nyb2xsID0gdm9pZCAwO1xuICAgICAgX3RoaXMuX2NhbGxPblNjcm9sbCA9IG1lbW9pemVPbmUoZnVuY3Rpb24gKHNjcm9sbExlZnQsIHNjcm9sbFRvcCwgaG9yaXpvbnRhbFNjcm9sbERpcmVjdGlvbiwgdmVydGljYWxTY3JvbGxEaXJlY3Rpb24sIHNjcm9sbFVwZGF0ZVdhc1JlcXVlc3RlZCkge1xuICAgICAgICByZXR1cm4gX3RoaXMucHJvcHMub25TY3JvbGwoe1xuICAgICAgICAgIGhvcml6b250YWxTY3JvbGxEaXJlY3Rpb246IGhvcml6b250YWxTY3JvbGxEaXJlY3Rpb24sXG4gICAgICAgICAgc2Nyb2xsTGVmdDogc2Nyb2xsTGVmdCxcbiAgICAgICAgICBzY3JvbGxUb3A6IHNjcm9sbFRvcCxcbiAgICAgICAgICB2ZXJ0aWNhbFNjcm9sbERpcmVjdGlvbjogdmVydGljYWxTY3JvbGxEaXJlY3Rpb24sXG4gICAgICAgICAgc2Nyb2xsVXBkYXRlV2FzUmVxdWVzdGVkOiBzY3JvbGxVcGRhdGVXYXNSZXF1ZXN0ZWRcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIF90aGlzLl9nZXRJdGVtU3R5bGUgPSB2b2lkIDA7XG5cbiAgICAgIF90aGlzLl9nZXRJdGVtU3R5bGUgPSBmdW5jdGlvbiAocm93SW5kZXgsIGNvbHVtbkluZGV4KSB7XG4gICAgICAgIHZhciBfdGhpcyRwcm9wcyA9IF90aGlzLnByb3BzLFxuICAgICAgICAgICAgY29sdW1uV2lkdGggPSBfdGhpcyRwcm9wcy5jb2x1bW5XaWR0aCxcbiAgICAgICAgICAgIGRpcmVjdGlvbiA9IF90aGlzJHByb3BzLmRpcmVjdGlvbixcbiAgICAgICAgICAgIHJvd0hlaWdodCA9IF90aGlzJHByb3BzLnJvd0hlaWdodDtcblxuICAgICAgICB2YXIgaXRlbVN0eWxlQ2FjaGUgPSBfdGhpcy5fZ2V0SXRlbVN0eWxlQ2FjaGUoc2hvdWxkUmVzZXRTdHlsZUNhY2hlT25JdGVtU2l6ZUNoYW5nZSAmJiBjb2x1bW5XaWR0aCwgc2hvdWxkUmVzZXRTdHlsZUNhY2hlT25JdGVtU2l6ZUNoYW5nZSAmJiBkaXJlY3Rpb24sIHNob3VsZFJlc2V0U3R5bGVDYWNoZU9uSXRlbVNpemVDaGFuZ2UgJiYgcm93SGVpZ2h0KTtcblxuICAgICAgICB2YXIga2V5ID0gcm93SW5kZXggKyBcIjpcIiArIGNvbHVtbkluZGV4O1xuICAgICAgICB2YXIgc3R5bGU7XG5cbiAgICAgICAgaWYgKGl0ZW1TdHlsZUNhY2hlLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICBzdHlsZSA9IGl0ZW1TdHlsZUNhY2hlW2tleV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIF9vZmZzZXQgPSBnZXRDb2x1bW5PZmZzZXQoX3RoaXMucHJvcHMsIGNvbHVtbkluZGV4LCBfdGhpcy5faW5zdGFuY2VQcm9wcyk7XG5cbiAgICAgICAgICB2YXIgaXNSdGwgPSBkaXJlY3Rpb24gPT09ICdydGwnO1xuICAgICAgICAgIGl0ZW1TdHlsZUNhY2hlW2tleV0gPSBzdHlsZSA9IHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICAgICAgbGVmdDogaXNSdGwgPyB1bmRlZmluZWQgOiBfb2Zmc2V0LFxuICAgICAgICAgICAgcmlnaHQ6IGlzUnRsID8gX29mZnNldCA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHRvcDogZ2V0Um93T2Zmc2V0KF90aGlzLnByb3BzLCByb3dJbmRleCwgX3RoaXMuX2luc3RhbmNlUHJvcHMpLFxuICAgICAgICAgICAgaGVpZ2h0OiBnZXRSb3dIZWlnaHQoX3RoaXMucHJvcHMsIHJvd0luZGV4LCBfdGhpcy5faW5zdGFuY2VQcm9wcyksXG4gICAgICAgICAgICB3aWR0aDogZ2V0Q29sdW1uV2lkdGgoX3RoaXMucHJvcHMsIGNvbHVtbkluZGV4LCBfdGhpcy5faW5zdGFuY2VQcm9wcylcbiAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN0eWxlO1xuICAgICAgfTtcblxuICAgICAgX3RoaXMuX2dldEl0ZW1TdHlsZUNhY2hlID0gdm9pZCAwO1xuICAgICAgX3RoaXMuX2dldEl0ZW1TdHlsZUNhY2hlID0gbWVtb2l6ZU9uZShmdW5jdGlvbiAoXywgX18sIF9fXykge1xuICAgICAgICByZXR1cm4ge307XG4gICAgICB9KTtcblxuICAgICAgX3RoaXMuX29uU2Nyb2xsID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHZhciBfZXZlbnQkY3VycmVudFRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQsXG4gICAgICAgICAgICBjbGllbnRIZWlnaHQgPSBfZXZlbnQkY3VycmVudFRhcmdldC5jbGllbnRIZWlnaHQsXG4gICAgICAgICAgICBjbGllbnRXaWR0aCA9IF9ldmVudCRjdXJyZW50VGFyZ2V0LmNsaWVudFdpZHRoLFxuICAgICAgICAgICAgc2Nyb2xsTGVmdCA9IF9ldmVudCRjdXJyZW50VGFyZ2V0LnNjcm9sbExlZnQsXG4gICAgICAgICAgICBzY3JvbGxUb3AgPSBfZXZlbnQkY3VycmVudFRhcmdldC5zY3JvbGxUb3AsXG4gICAgICAgICAgICBzY3JvbGxIZWlnaHQgPSBfZXZlbnQkY3VycmVudFRhcmdldC5zY3JvbGxIZWlnaHQsXG4gICAgICAgICAgICBzY3JvbGxXaWR0aCA9IF9ldmVudCRjdXJyZW50VGFyZ2V0LnNjcm9sbFdpZHRoO1xuXG4gICAgICAgIF90aGlzLnNldFN0YXRlKGZ1bmN0aW9uIChwcmV2U3RhdGUpIHtcbiAgICAgICAgICBpZiAocHJldlN0YXRlLnNjcm9sbExlZnQgPT09IHNjcm9sbExlZnQgJiYgcHJldlN0YXRlLnNjcm9sbFRvcCA9PT0gc2Nyb2xsVG9wKSB7XG4gICAgICAgICAgICAvLyBTY3JvbGwgcG9zaXRpb24gbWF5IGhhdmUgYmVlbiB1cGRhdGVkIGJ5IGNETS9jRFUsXG4gICAgICAgICAgICAvLyBJbiB3aGljaCBjYXNlIHdlIGRvbid0IG5lZWQgdG8gdHJpZ2dlciBhbm90aGVyIHJlbmRlcixcbiAgICAgICAgICAgIC8vIEFuZCB3ZSBkb24ndCB3YW50IHRvIHVwZGF0ZSBzdGF0ZS5pc1Njcm9sbGluZy5cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSBfdGhpcy5wcm9wcy5kaXJlY3Rpb247IC8vIFRSSUNLWSBBY2NvcmRpbmcgdG8gdGhlIHNwZWMsIHNjcm9sbExlZnQgc2hvdWxkIGJlIG5lZ2F0aXZlIGZvciBSVEwgYWxpZ25lZCBlbGVtZW50cy5cbiAgICAgICAgICAvLyBUaGlzIGlzIG5vdCB0aGUgY2FzZSBmb3IgYWxsIGJyb3dzZXJzIHRob3VnaCAoZS5nLiBDaHJvbWUgcmVwb3J0cyB2YWx1ZXMgYXMgcG9zaXRpdmUsIG1lYXN1cmVkIHJlbGF0aXZlIHRvIHRoZSBsZWZ0KS5cbiAgICAgICAgICAvLyBJdCdzIGFsc28gZWFzaWVyIGZvciB0aGlzIGNvbXBvbmVudCBpZiB3ZSBjb252ZXJ0IG9mZnNldHMgdG8gdGhlIHNhbWUgZm9ybWF0IGFzIHRoZXkgd291bGQgYmUgaW4gZm9yIGx0ci5cbiAgICAgICAgICAvLyBTbyB0aGUgc2ltcGxlc3Qgc29sdXRpb24gaXMgdG8gZGV0ZXJtaW5lIHdoaWNoIGJyb3dzZXIgYmVoYXZpb3Igd2UncmUgZGVhbGluZyB3aXRoLCBhbmQgY29udmVydCBiYXNlZCBvbiBpdC5cblxuICAgICAgICAgIHZhciBjYWxjdWxhdGVkU2Nyb2xsTGVmdCA9IHNjcm9sbExlZnQ7XG5cbiAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAncnRsJykge1xuICAgICAgICAgICAgc3dpdGNoIChnZXRSVExPZmZzZXRUeXBlKCkpIHtcbiAgICAgICAgICAgICAgY2FzZSAnbmVnYXRpdmUnOlxuICAgICAgICAgICAgICAgIGNhbGN1bGF0ZWRTY3JvbGxMZWZ0ID0gLXNjcm9sbExlZnQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAncG9zaXRpdmUtZGVzY2VuZGluZyc6XG4gICAgICAgICAgICAgICAgY2FsY3VsYXRlZFNjcm9sbExlZnQgPSBzY3JvbGxXaWR0aCAtIGNsaWVudFdpZHRoIC0gc2Nyb2xsTGVmdDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IC8vIFByZXZlbnQgU2FmYXJpJ3MgZWxhc3RpYyBzY3JvbGxpbmcgZnJvbSBjYXVzaW5nIHZpc3VhbCBzaGFraW5nIHdoZW4gc2Nyb2xsaW5nIHBhc3QgYm91bmRzLlxuXG5cbiAgICAgICAgICBjYWxjdWxhdGVkU2Nyb2xsTGVmdCA9IE1hdGgubWF4KDAsIE1hdGgubWluKGNhbGN1bGF0ZWRTY3JvbGxMZWZ0LCBzY3JvbGxXaWR0aCAtIGNsaWVudFdpZHRoKSk7XG4gICAgICAgICAgdmFyIGNhbGN1bGF0ZWRTY3JvbGxUb3AgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihzY3JvbGxUb3AsIHNjcm9sbEhlaWdodCAtIGNsaWVudEhlaWdodCkpO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpc1Njcm9sbGluZzogdHJ1ZSxcbiAgICAgICAgICAgIGhvcml6b250YWxTY3JvbGxEaXJlY3Rpb246IHByZXZTdGF0ZS5zY3JvbGxMZWZ0IDwgc2Nyb2xsTGVmdCA/ICdmb3J3YXJkJyA6ICdiYWNrd2FyZCcsXG4gICAgICAgICAgICBzY3JvbGxMZWZ0OiBjYWxjdWxhdGVkU2Nyb2xsTGVmdCxcbiAgICAgICAgICAgIHNjcm9sbFRvcDogY2FsY3VsYXRlZFNjcm9sbFRvcCxcbiAgICAgICAgICAgIHZlcnRpY2FsU2Nyb2xsRGlyZWN0aW9uOiBwcmV2U3RhdGUuc2Nyb2xsVG9wIDwgc2Nyb2xsVG9wID8gJ2ZvcndhcmQnIDogJ2JhY2t3YXJkJyxcbiAgICAgICAgICAgIHNjcm9sbFVwZGF0ZVdhc1JlcXVlc3RlZDogZmFsc2VcbiAgICAgICAgICB9O1xuICAgICAgICB9LCBfdGhpcy5fcmVzZXRJc1Njcm9sbGluZ0RlYm91bmNlZCk7XG4gICAgICB9O1xuXG4gICAgICBfdGhpcy5fb3V0ZXJSZWZTZXR0ZXIgPSBmdW5jdGlvbiAocmVmKSB7XG4gICAgICAgIHZhciBvdXRlclJlZiA9IF90aGlzLnByb3BzLm91dGVyUmVmO1xuICAgICAgICBfdGhpcy5fb3V0ZXJSZWYgPSByZWY7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBvdXRlclJlZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIG91dGVyUmVmKHJlZik7XG4gICAgICAgIH0gZWxzZSBpZiAob3V0ZXJSZWYgIT0gbnVsbCAmJiB0eXBlb2Ygb3V0ZXJSZWYgPT09ICdvYmplY3QnICYmIG91dGVyUmVmLmhhc093blByb3BlcnR5KCdjdXJyZW50JykpIHtcbiAgICAgICAgICBvdXRlclJlZi5jdXJyZW50ID0gcmVmO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBfdGhpcy5fcmVzZXRJc1Njcm9sbGluZ0RlYm91bmNlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKF90aGlzLl9yZXNldElzU2Nyb2xsaW5nVGltZW91dElkICE9PSBudWxsKSB7XG4gICAgICAgICAgY2FuY2VsVGltZW91dChfdGhpcy5fcmVzZXRJc1Njcm9sbGluZ1RpbWVvdXRJZCk7XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpcy5fcmVzZXRJc1Njcm9sbGluZ1RpbWVvdXRJZCA9IHJlcXVlc3RUaW1lb3V0KF90aGlzLl9yZXNldElzU2Nyb2xsaW5nLCBJU19TQ1JPTExJTkdfREVCT1VOQ0VfSU5URVJWQUwpO1xuICAgICAgfTtcblxuICAgICAgX3RoaXMuX3Jlc2V0SXNTY3JvbGxpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF90aGlzLl9yZXNldElzU2Nyb2xsaW5nVGltZW91dElkID0gbnVsbDtcblxuICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgaXNTY3JvbGxpbmc6IGZhbHNlXG4gICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAvLyBDbGVhciBzdHlsZSBjYWNoZSBhZnRlciBzdGF0ZSB1cGRhdGUgaGFzIGJlZW4gY29tbWl0dGVkLlxuICAgICAgICAgIC8vIFRoaXMgd2F5IHdlIGRvbid0IGJyZWFrIHB1cmUgc0NVIGZvciBpdGVtcyB0aGF0IGRvbid0IHVzZSBpc1Njcm9sbGluZyBwYXJhbS5cbiAgICAgICAgICBfdGhpcy5fZ2V0SXRlbVN0eWxlQ2FjaGUoLTEpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG5cbiAgICBHcmlkLmdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyA9IGZ1bmN0aW9uIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyhuZXh0UHJvcHMsIHByZXZTdGF0ZSkge1xuICAgICAgdmFsaWRhdGVTaGFyZWRQcm9wcyhuZXh0UHJvcHMsIHByZXZTdGF0ZSk7XG4gICAgICB2YWxpZGF0ZVByb3BzKG5leHRQcm9wcyk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuXG4gICAgdmFyIF9wcm90byA9IEdyaWQucHJvdG90eXBlO1xuXG4gICAgX3Byb3RvLnNjcm9sbFRvID0gZnVuY3Rpb24gc2Nyb2xsVG8oX3JlZjMpIHtcbiAgICAgIHZhciBzY3JvbGxMZWZ0ID0gX3JlZjMuc2Nyb2xsTGVmdCxcbiAgICAgICAgICBzY3JvbGxUb3AgPSBfcmVmMy5zY3JvbGxUb3A7XG5cbiAgICAgIGlmIChzY3JvbGxMZWZ0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgc2Nyb2xsTGVmdCA9IE1hdGgubWF4KDAsIHNjcm9sbExlZnQpO1xuICAgICAgfVxuXG4gICAgICBpZiAoc2Nyb2xsVG9wICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgc2Nyb2xsVG9wID0gTWF0aC5tYXgoMCwgc2Nyb2xsVG9wKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5zZXRTdGF0ZShmdW5jdGlvbiAocHJldlN0YXRlKSB7XG4gICAgICAgIGlmIChzY3JvbGxMZWZ0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBzY3JvbGxMZWZ0ID0gcHJldlN0YXRlLnNjcm9sbExlZnQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2Nyb2xsVG9wID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBzY3JvbGxUb3AgPSBwcmV2U3RhdGUuc2Nyb2xsVG9wO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHByZXZTdGF0ZS5zY3JvbGxMZWZ0ID09PSBzY3JvbGxMZWZ0ICYmIHByZXZTdGF0ZS5zY3JvbGxUb3AgPT09IHNjcm9sbFRvcCkge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBob3Jpem9udGFsU2Nyb2xsRGlyZWN0aW9uOiBwcmV2U3RhdGUuc2Nyb2xsTGVmdCA8IHNjcm9sbExlZnQgPyAnZm9yd2FyZCcgOiAnYmFja3dhcmQnLFxuICAgICAgICAgIHNjcm9sbExlZnQ6IHNjcm9sbExlZnQsXG4gICAgICAgICAgc2Nyb2xsVG9wOiBzY3JvbGxUb3AsXG4gICAgICAgICAgc2Nyb2xsVXBkYXRlV2FzUmVxdWVzdGVkOiB0cnVlLFxuICAgICAgICAgIHZlcnRpY2FsU2Nyb2xsRGlyZWN0aW9uOiBwcmV2U3RhdGUuc2Nyb2xsVG9wIDwgc2Nyb2xsVG9wID8gJ2ZvcndhcmQnIDogJ2JhY2t3YXJkJ1xuICAgICAgICB9O1xuICAgICAgfSwgdGhpcy5fcmVzZXRJc1Njcm9sbGluZ0RlYm91bmNlZCk7XG4gICAgfTtcblxuICAgIF9wcm90by5zY3JvbGxUb0l0ZW0gPSBmdW5jdGlvbiBzY3JvbGxUb0l0ZW0oX3JlZjQpIHtcbiAgICAgIHZhciBfcmVmNCRhbGlnbiA9IF9yZWY0LmFsaWduLFxuICAgICAgICAgIGFsaWduID0gX3JlZjQkYWxpZ24gPT09IHZvaWQgMCA/ICdhdXRvJyA6IF9yZWY0JGFsaWduLFxuICAgICAgICAgIGNvbHVtbkluZGV4ID0gX3JlZjQuY29sdW1uSW5kZXgsXG4gICAgICAgICAgcm93SW5kZXggPSBfcmVmNC5yb3dJbmRleDtcbiAgICAgIHZhciBfdGhpcyRwcm9wczIgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGNvbHVtbkNvdW50ID0gX3RoaXMkcHJvcHMyLmNvbHVtbkNvdW50LFxuICAgICAgICAgIGhlaWdodCA9IF90aGlzJHByb3BzMi5oZWlnaHQsXG4gICAgICAgICAgcm93Q291bnQgPSBfdGhpcyRwcm9wczIucm93Q291bnQsXG4gICAgICAgICAgd2lkdGggPSBfdGhpcyRwcm9wczIud2lkdGg7XG4gICAgICB2YXIgX3RoaXMkc3RhdGUgPSB0aGlzLnN0YXRlLFxuICAgICAgICAgIHNjcm9sbExlZnQgPSBfdGhpcyRzdGF0ZS5zY3JvbGxMZWZ0LFxuICAgICAgICAgIHNjcm9sbFRvcCA9IF90aGlzJHN0YXRlLnNjcm9sbFRvcDtcbiAgICAgIHZhciBzY3JvbGxiYXJTaXplID0gZ2V0U2Nyb2xsYmFyU2l6ZSgpO1xuXG4gICAgICBpZiAoY29sdW1uSW5kZXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb2x1bW5JbmRleCA9IE1hdGgubWF4KDAsIE1hdGgubWluKGNvbHVtbkluZGV4LCBjb2x1bW5Db3VudCAtIDEpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHJvd0luZGV4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcm93SW5kZXggPSBNYXRoLm1heCgwLCBNYXRoLm1pbihyb3dJbmRleCwgcm93Q291bnQgLSAxKSk7XG4gICAgICB9XG5cbiAgICAgIHZhciBlc3RpbWF0ZWRUb3RhbEhlaWdodCA9IGdldEVzdGltYXRlZFRvdGFsSGVpZ2h0KHRoaXMucHJvcHMsIHRoaXMuX2luc3RhbmNlUHJvcHMpO1xuICAgICAgdmFyIGVzdGltYXRlZFRvdGFsV2lkdGggPSBnZXRFc3RpbWF0ZWRUb3RhbFdpZHRoKHRoaXMucHJvcHMsIHRoaXMuX2luc3RhbmNlUHJvcHMpOyAvLyBUaGUgc2Nyb2xsYmFyIHNpemUgc2hvdWxkIGJlIGNvbnNpZGVyZWQgd2hlbiBzY3JvbGxpbmcgYW4gaXRlbSBpbnRvIHZpZXcsXG4gICAgICAvLyB0byBlbnN1cmUgaXQncyBmdWxseSB2aXNpYmxlLlxuICAgICAgLy8gQnV0IHdlIG9ubHkgbmVlZCB0byBhY2NvdW50IGZvciBpdHMgc2l6ZSB3aGVuIGl0J3MgYWN0dWFsbHkgdmlzaWJsZS5cblxuICAgICAgdmFyIGhvcml6b250YWxTY3JvbGxiYXJTaXplID0gZXN0aW1hdGVkVG90YWxXaWR0aCA+IHdpZHRoID8gc2Nyb2xsYmFyU2l6ZSA6IDA7XG4gICAgICB2YXIgdmVydGljYWxTY3JvbGxiYXJTaXplID0gZXN0aW1hdGVkVG90YWxIZWlnaHQgPiBoZWlnaHQgPyBzY3JvbGxiYXJTaXplIDogMDtcbiAgICAgIHRoaXMuc2Nyb2xsVG8oe1xuICAgICAgICBzY3JvbGxMZWZ0OiBjb2x1bW5JbmRleCAhPT0gdW5kZWZpbmVkID8gZ2V0T2Zmc2V0Rm9yQ29sdW1uQW5kQWxpZ25tZW50KHRoaXMucHJvcHMsIGNvbHVtbkluZGV4LCBhbGlnbiwgc2Nyb2xsTGVmdCwgdGhpcy5faW5zdGFuY2VQcm9wcywgdmVydGljYWxTY3JvbGxiYXJTaXplKSA6IHNjcm9sbExlZnQsXG4gICAgICAgIHNjcm9sbFRvcDogcm93SW5kZXggIT09IHVuZGVmaW5lZCA/IGdldE9mZnNldEZvclJvd0FuZEFsaWdubWVudCh0aGlzLnByb3BzLCByb3dJbmRleCwgYWxpZ24sIHNjcm9sbFRvcCwgdGhpcy5faW5zdGFuY2VQcm9wcywgaG9yaXpvbnRhbFNjcm9sbGJhclNpemUpIDogc2Nyb2xsVG9wXG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICB2YXIgX3RoaXMkcHJvcHMzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBpbml0aWFsU2Nyb2xsTGVmdCA9IF90aGlzJHByb3BzMy5pbml0aWFsU2Nyb2xsTGVmdCxcbiAgICAgICAgICBpbml0aWFsU2Nyb2xsVG9wID0gX3RoaXMkcHJvcHMzLmluaXRpYWxTY3JvbGxUb3A7XG5cbiAgICAgIGlmICh0aGlzLl9vdXRlclJlZiAhPSBudWxsKSB7XG4gICAgICAgIHZhciBvdXRlclJlZiA9IHRoaXMuX291dGVyUmVmO1xuXG4gICAgICAgIGlmICh0eXBlb2YgaW5pdGlhbFNjcm9sbExlZnQgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgb3V0ZXJSZWYuc2Nyb2xsTGVmdCA9IGluaXRpYWxTY3JvbGxMZWZ0O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiBpbml0aWFsU2Nyb2xsVG9wID09PSAnbnVtYmVyJykge1xuICAgICAgICAgIG91dGVyUmVmLnNjcm9sbFRvcCA9IGluaXRpYWxTY3JvbGxUb3A7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5fY2FsbFByb3BzQ2FsbGJhY2tzKCk7XG4gICAgfTtcblxuICAgIF9wcm90by5jb21wb25lbnREaWRVcGRhdGUgPSBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUoKSB7XG4gICAgICB2YXIgZGlyZWN0aW9uID0gdGhpcy5wcm9wcy5kaXJlY3Rpb247XG4gICAgICB2YXIgX3RoaXMkc3RhdGUyID0gdGhpcy5zdGF0ZSxcbiAgICAgICAgICBzY3JvbGxMZWZ0ID0gX3RoaXMkc3RhdGUyLnNjcm9sbExlZnQsXG4gICAgICAgICAgc2Nyb2xsVG9wID0gX3RoaXMkc3RhdGUyLnNjcm9sbFRvcCxcbiAgICAgICAgICBzY3JvbGxVcGRhdGVXYXNSZXF1ZXN0ZWQgPSBfdGhpcyRzdGF0ZTIuc2Nyb2xsVXBkYXRlV2FzUmVxdWVzdGVkO1xuXG4gICAgICBpZiAoc2Nyb2xsVXBkYXRlV2FzUmVxdWVzdGVkICYmIHRoaXMuX291dGVyUmVmICE9IG51bGwpIHtcbiAgICAgICAgLy8gVFJJQ0tZIEFjY29yZGluZyB0byB0aGUgc3BlYywgc2Nyb2xsTGVmdCBzaG91bGQgYmUgbmVnYXRpdmUgZm9yIFJUTCBhbGlnbmVkIGVsZW1lbnRzLlxuICAgICAgICAvLyBUaGlzIGlzIG5vdCB0aGUgY2FzZSBmb3IgYWxsIGJyb3dzZXJzIHRob3VnaCAoZS5nLiBDaHJvbWUgcmVwb3J0cyB2YWx1ZXMgYXMgcG9zaXRpdmUsIG1lYXN1cmVkIHJlbGF0aXZlIHRvIHRoZSBsZWZ0KS5cbiAgICAgICAgLy8gU28gd2UgbmVlZCB0byBkZXRlcm1pbmUgd2hpY2ggYnJvd3NlciBiZWhhdmlvciB3ZSdyZSBkZWFsaW5nIHdpdGgsIGFuZCBtaW1pYyBpdC5cbiAgICAgICAgdmFyIG91dGVyUmVmID0gdGhpcy5fb3V0ZXJSZWY7XG5cbiAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ3J0bCcpIHtcbiAgICAgICAgICBzd2l0Y2ggKGdldFJUTE9mZnNldFR5cGUoKSkge1xuICAgICAgICAgICAgY2FzZSAnbmVnYXRpdmUnOlxuICAgICAgICAgICAgICBvdXRlclJlZi5zY3JvbGxMZWZ0ID0gLXNjcm9sbExlZnQ7XG4gICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlICdwb3NpdGl2ZS1hc2NlbmRpbmcnOlxuICAgICAgICAgICAgICBvdXRlclJlZi5zY3JvbGxMZWZ0ID0gc2Nyb2xsTGVmdDtcbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgIHZhciBjbGllbnRXaWR0aCA9IG91dGVyUmVmLmNsaWVudFdpZHRoLFxuICAgICAgICAgICAgICAgICAgc2Nyb2xsV2lkdGggPSBvdXRlclJlZi5zY3JvbGxXaWR0aDtcbiAgICAgICAgICAgICAgb3V0ZXJSZWYuc2Nyb2xsTGVmdCA9IHNjcm9sbFdpZHRoIC0gY2xpZW50V2lkdGggLSBzY3JvbGxMZWZ0O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb3V0ZXJSZWYuc2Nyb2xsTGVmdCA9IE1hdGgubWF4KDAsIHNjcm9sbExlZnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgb3V0ZXJSZWYuc2Nyb2xsVG9wID0gTWF0aC5tYXgoMCwgc2Nyb2xsVG9wKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fY2FsbFByb3BzQ2FsbGJhY2tzKCk7XG4gICAgfTtcblxuICAgIF9wcm90by5jb21wb25lbnRXaWxsVW5tb3VudCA9IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgaWYgKHRoaXMuX3Jlc2V0SXNTY3JvbGxpbmdUaW1lb3V0SWQgIT09IG51bGwpIHtcbiAgICAgICAgY2FuY2VsVGltZW91dCh0aGlzLl9yZXNldElzU2Nyb2xsaW5nVGltZW91dElkKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3Byb3RvLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBfdGhpcyRwcm9wczQgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGNoaWxkcmVuID0gX3RoaXMkcHJvcHM0LmNoaWxkcmVuLFxuICAgICAgICAgIGNsYXNzTmFtZSA9IF90aGlzJHByb3BzNC5jbGFzc05hbWUsXG4gICAgICAgICAgY29sdW1uQ291bnQgPSBfdGhpcyRwcm9wczQuY29sdW1uQ291bnQsXG4gICAgICAgICAgZGlyZWN0aW9uID0gX3RoaXMkcHJvcHM0LmRpcmVjdGlvbixcbiAgICAgICAgICBoZWlnaHQgPSBfdGhpcyRwcm9wczQuaGVpZ2h0LFxuICAgICAgICAgIGlubmVyUmVmID0gX3RoaXMkcHJvcHM0LmlubmVyUmVmLFxuICAgICAgICAgIGlubmVyRWxlbWVudFR5cGUgPSBfdGhpcyRwcm9wczQuaW5uZXJFbGVtZW50VHlwZSxcbiAgICAgICAgICBpbm5lclRhZ05hbWUgPSBfdGhpcyRwcm9wczQuaW5uZXJUYWdOYW1lLFxuICAgICAgICAgIGl0ZW1EYXRhID0gX3RoaXMkcHJvcHM0Lml0ZW1EYXRhLFxuICAgICAgICAgIF90aGlzJHByb3BzNCRpdGVtS2V5ID0gX3RoaXMkcHJvcHM0Lml0ZW1LZXksXG4gICAgICAgICAgaXRlbUtleSA9IF90aGlzJHByb3BzNCRpdGVtS2V5ID09PSB2b2lkIDAgPyBkZWZhdWx0SXRlbUtleSA6IF90aGlzJHByb3BzNCRpdGVtS2V5LFxuICAgICAgICAgIG91dGVyRWxlbWVudFR5cGUgPSBfdGhpcyRwcm9wczQub3V0ZXJFbGVtZW50VHlwZSxcbiAgICAgICAgICBvdXRlclRhZ05hbWUgPSBfdGhpcyRwcm9wczQub3V0ZXJUYWdOYW1lLFxuICAgICAgICAgIHJvd0NvdW50ID0gX3RoaXMkcHJvcHM0LnJvd0NvdW50LFxuICAgICAgICAgIHN0eWxlID0gX3RoaXMkcHJvcHM0LnN0eWxlLFxuICAgICAgICAgIHVzZUlzU2Nyb2xsaW5nID0gX3RoaXMkcHJvcHM0LnVzZUlzU2Nyb2xsaW5nLFxuICAgICAgICAgIHdpZHRoID0gX3RoaXMkcHJvcHM0LndpZHRoO1xuICAgICAgdmFyIGlzU2Nyb2xsaW5nID0gdGhpcy5zdGF0ZS5pc1Njcm9sbGluZztcblxuICAgICAgdmFyIF90aGlzJF9nZXRIb3Jpem9udGFsUiA9IHRoaXMuX2dldEhvcml6b250YWxSYW5nZVRvUmVuZGVyKCksXG4gICAgICAgICAgY29sdW1uU3RhcnRJbmRleCA9IF90aGlzJF9nZXRIb3Jpem9udGFsUlswXSxcbiAgICAgICAgICBjb2x1bW5TdG9wSW5kZXggPSBfdGhpcyRfZ2V0SG9yaXpvbnRhbFJbMV07XG5cbiAgICAgIHZhciBfdGhpcyRfZ2V0VmVydGljYWxSYW4gPSB0aGlzLl9nZXRWZXJ0aWNhbFJhbmdlVG9SZW5kZXIoKSxcbiAgICAgICAgICByb3dTdGFydEluZGV4ID0gX3RoaXMkX2dldFZlcnRpY2FsUmFuWzBdLFxuICAgICAgICAgIHJvd1N0b3BJbmRleCA9IF90aGlzJF9nZXRWZXJ0aWNhbFJhblsxXTtcblxuICAgICAgdmFyIGl0ZW1zID0gW107XG5cbiAgICAgIGlmIChjb2x1bW5Db3VudCA+IDAgJiYgcm93Q291bnQpIHtcbiAgICAgICAgZm9yICh2YXIgX3Jvd0luZGV4ID0gcm93U3RhcnRJbmRleDsgX3Jvd0luZGV4IDw9IHJvd1N0b3BJbmRleDsgX3Jvd0luZGV4KyspIHtcbiAgICAgICAgICBmb3IgKHZhciBfY29sdW1uSW5kZXggPSBjb2x1bW5TdGFydEluZGV4OyBfY29sdW1uSW5kZXggPD0gY29sdW1uU3RvcEluZGV4OyBfY29sdW1uSW5kZXgrKykge1xuICAgICAgICAgICAgaXRlbXMucHVzaChjcmVhdGVFbGVtZW50KGNoaWxkcmVuLCB7XG4gICAgICAgICAgICAgIGNvbHVtbkluZGV4OiBfY29sdW1uSW5kZXgsXG4gICAgICAgICAgICAgIGRhdGE6IGl0ZW1EYXRhLFxuICAgICAgICAgICAgICBpc1Njcm9sbGluZzogdXNlSXNTY3JvbGxpbmcgPyBpc1Njcm9sbGluZyA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAga2V5OiBpdGVtS2V5KHtcbiAgICAgICAgICAgICAgICBjb2x1bW5JbmRleDogX2NvbHVtbkluZGV4LFxuICAgICAgICAgICAgICAgIGRhdGE6IGl0ZW1EYXRhLFxuICAgICAgICAgICAgICAgIHJvd0luZGV4OiBfcm93SW5kZXhcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIHJvd0luZGV4OiBfcm93SW5kZXgsXG4gICAgICAgICAgICAgIHN0eWxlOiB0aGlzLl9nZXRJdGVtU3R5bGUoX3Jvd0luZGV4LCBfY29sdW1uSW5kZXgpXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IC8vIFJlYWQgdGhpcyB2YWx1ZSBBRlRFUiBpdGVtcyBoYXZlIGJlZW4gY3JlYXRlZCxcbiAgICAgIC8vIFNvIHRoZWlyIGFjdHVhbCBzaXplcyAoaWYgdmFyaWFibGUpIGFyZSB0YWtlbiBpbnRvIGNvbnNpZGVyYXRpb24uXG5cblxuICAgICAgdmFyIGVzdGltYXRlZFRvdGFsSGVpZ2h0ID0gZ2V0RXN0aW1hdGVkVG90YWxIZWlnaHQodGhpcy5wcm9wcywgdGhpcy5faW5zdGFuY2VQcm9wcyk7XG4gICAgICB2YXIgZXN0aW1hdGVkVG90YWxXaWR0aCA9IGdldEVzdGltYXRlZFRvdGFsV2lkdGgodGhpcy5wcm9wcywgdGhpcy5faW5zdGFuY2VQcm9wcyk7XG4gICAgICByZXR1cm4gY3JlYXRlRWxlbWVudChvdXRlckVsZW1lbnRUeXBlIHx8IG91dGVyVGFnTmFtZSB8fCAnZGl2Jywge1xuICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSxcbiAgICAgICAgb25TY3JvbGw6IHRoaXMuX29uU2Nyb2xsLFxuICAgICAgICByZWY6IHRoaXMuX291dGVyUmVmU2V0dGVyLFxuICAgICAgICBzdHlsZTogX2V4dGVuZHMoe1xuICAgICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgICAgIGhlaWdodDogaGVpZ2h0LFxuICAgICAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgICAgICBvdmVyZmxvdzogJ2F1dG8nLFxuICAgICAgICAgIFdlYmtpdE92ZXJmbG93U2Nyb2xsaW5nOiAndG91Y2gnLFxuICAgICAgICAgIHdpbGxDaGFuZ2U6ICd0cmFuc2Zvcm0nLFxuICAgICAgICAgIGRpcmVjdGlvbjogZGlyZWN0aW9uXG4gICAgICAgIH0sIHN0eWxlKVxuICAgICAgfSwgY3JlYXRlRWxlbWVudChpbm5lckVsZW1lbnRUeXBlIHx8IGlubmVyVGFnTmFtZSB8fCAnZGl2Jywge1xuICAgICAgICBjaGlsZHJlbjogaXRlbXMsXG4gICAgICAgIHJlZjogaW5uZXJSZWYsXG4gICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgaGVpZ2h0OiBlc3RpbWF0ZWRUb3RhbEhlaWdodCxcbiAgICAgICAgICBwb2ludGVyRXZlbnRzOiBpc1Njcm9sbGluZyA/ICdub25lJyA6IHVuZGVmaW5lZCxcbiAgICAgICAgICB3aWR0aDogZXN0aW1hdGVkVG90YWxXaWR0aFxuICAgICAgICB9XG4gICAgICB9KSk7XG4gICAgfTtcblxuICAgIF9wcm90by5fY2FsbFByb3BzQ2FsbGJhY2tzID0gZnVuY3Rpb24gX2NhbGxQcm9wc0NhbGxiYWNrcygpIHtcbiAgICAgIHZhciBfdGhpcyRwcm9wczUgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGNvbHVtbkNvdW50ID0gX3RoaXMkcHJvcHM1LmNvbHVtbkNvdW50LFxuICAgICAgICAgIG9uSXRlbXNSZW5kZXJlZCA9IF90aGlzJHByb3BzNS5vbkl0ZW1zUmVuZGVyZWQsXG4gICAgICAgICAgb25TY3JvbGwgPSBfdGhpcyRwcm9wczUub25TY3JvbGwsXG4gICAgICAgICAgcm93Q291bnQgPSBfdGhpcyRwcm9wczUucm93Q291bnQ7XG5cbiAgICAgIGlmICh0eXBlb2Ygb25JdGVtc1JlbmRlcmVkID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGlmIChjb2x1bW5Db3VudCA+IDAgJiYgcm93Q291bnQgPiAwKSB7XG4gICAgICAgICAgdmFyIF90aGlzJF9nZXRIb3Jpem9udGFsUjIgPSB0aGlzLl9nZXRIb3Jpem9udGFsUmFuZ2VUb1JlbmRlcigpLFxuICAgICAgICAgICAgICBfb3ZlcnNjYW5Db2x1bW5TdGFydEluZGV4ID0gX3RoaXMkX2dldEhvcml6b250YWxSMlswXSxcbiAgICAgICAgICAgICAgX292ZXJzY2FuQ29sdW1uU3RvcEluZGV4ID0gX3RoaXMkX2dldEhvcml6b250YWxSMlsxXSxcbiAgICAgICAgICAgICAgX3Zpc2libGVDb2x1bW5TdGFydEluZGV4ID0gX3RoaXMkX2dldEhvcml6b250YWxSMlsyXSxcbiAgICAgICAgICAgICAgX3Zpc2libGVDb2x1bW5TdG9wSW5kZXggPSBfdGhpcyRfZ2V0SG9yaXpvbnRhbFIyWzNdO1xuXG4gICAgICAgICAgdmFyIF90aGlzJF9nZXRWZXJ0aWNhbFJhbjIgPSB0aGlzLl9nZXRWZXJ0aWNhbFJhbmdlVG9SZW5kZXIoKSxcbiAgICAgICAgICAgICAgX292ZXJzY2FuUm93U3RhcnRJbmRleCA9IF90aGlzJF9nZXRWZXJ0aWNhbFJhbjJbMF0sXG4gICAgICAgICAgICAgIF9vdmVyc2NhblJvd1N0b3BJbmRleCA9IF90aGlzJF9nZXRWZXJ0aWNhbFJhbjJbMV0sXG4gICAgICAgICAgICAgIF92aXNpYmxlUm93U3RhcnRJbmRleCA9IF90aGlzJF9nZXRWZXJ0aWNhbFJhbjJbMl0sXG4gICAgICAgICAgICAgIF92aXNpYmxlUm93U3RvcEluZGV4ID0gX3RoaXMkX2dldFZlcnRpY2FsUmFuMlszXTtcblxuICAgICAgICAgIHRoaXMuX2NhbGxPbkl0ZW1zUmVuZGVyZWQoX292ZXJzY2FuQ29sdW1uU3RhcnRJbmRleCwgX292ZXJzY2FuQ29sdW1uU3RvcEluZGV4LCBfb3ZlcnNjYW5Sb3dTdGFydEluZGV4LCBfb3ZlcnNjYW5Sb3dTdG9wSW5kZXgsIF92aXNpYmxlQ29sdW1uU3RhcnRJbmRleCwgX3Zpc2libGVDb2x1bW5TdG9wSW5kZXgsIF92aXNpYmxlUm93U3RhcnRJbmRleCwgX3Zpc2libGVSb3dTdG9wSW5kZXgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2Ygb25TY3JvbGwgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdmFyIF90aGlzJHN0YXRlMyA9IHRoaXMuc3RhdGUsXG4gICAgICAgICAgICBfaG9yaXpvbnRhbFNjcm9sbERpcmVjdGlvbiA9IF90aGlzJHN0YXRlMy5ob3Jpem9udGFsU2Nyb2xsRGlyZWN0aW9uLFxuICAgICAgICAgICAgX3Njcm9sbExlZnQgPSBfdGhpcyRzdGF0ZTMuc2Nyb2xsTGVmdCxcbiAgICAgICAgICAgIF9zY3JvbGxUb3AgPSBfdGhpcyRzdGF0ZTMuc2Nyb2xsVG9wLFxuICAgICAgICAgICAgX3Njcm9sbFVwZGF0ZVdhc1JlcXVlc3RlZCA9IF90aGlzJHN0YXRlMy5zY3JvbGxVcGRhdGVXYXNSZXF1ZXN0ZWQsXG4gICAgICAgICAgICBfdmVydGljYWxTY3JvbGxEaXJlY3Rpb24gPSBfdGhpcyRzdGF0ZTMudmVydGljYWxTY3JvbGxEaXJlY3Rpb247XG5cbiAgICAgICAgdGhpcy5fY2FsbE9uU2Nyb2xsKF9zY3JvbGxMZWZ0LCBfc2Nyb2xsVG9wLCBfaG9yaXpvbnRhbFNjcm9sbERpcmVjdGlvbiwgX3ZlcnRpY2FsU2Nyb2xsRGlyZWN0aW9uLCBfc2Nyb2xsVXBkYXRlV2FzUmVxdWVzdGVkKTtcbiAgICAgIH1cbiAgICB9IC8vIExhemlseSBjcmVhdGUgYW5kIGNhY2hlIGl0ZW0gc3R5bGVzIHdoaWxlIHNjcm9sbGluZyxcbiAgICAvLyBTbyB0aGF0IHB1cmUgY29tcG9uZW50IHNDVSB3aWxsIHByZXZlbnQgcmUtcmVuZGVycy5cbiAgICAvLyBXZSBtYWludGFpbiB0aGlzIGNhY2hlLCBhbmQgcGFzcyBhIHN0eWxlIHByb3AgcmF0aGVyIHRoYW4gaW5kZXgsXG4gICAgLy8gU28gdGhhdCBMaXN0IGNhbiBjbGVhciBjYWNoZWQgc3R5bGVzIGFuZCBmb3JjZSBpdGVtIHJlLXJlbmRlciBpZiBuZWNlc3NhcnkuXG4gICAgO1xuXG4gICAgX3Byb3RvLl9nZXRIb3Jpem9udGFsUmFuZ2VUb1JlbmRlciA9IGZ1bmN0aW9uIF9nZXRIb3Jpem9udGFsUmFuZ2VUb1JlbmRlcigpIHtcbiAgICAgIHZhciBfdGhpcyRwcm9wczYgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGNvbHVtbkNvdW50ID0gX3RoaXMkcHJvcHM2LmNvbHVtbkNvdW50LFxuICAgICAgICAgIG92ZXJzY2FuQ29sdW1uQ291bnQgPSBfdGhpcyRwcm9wczYub3ZlcnNjYW5Db2x1bW5Db3VudCxcbiAgICAgICAgICBvdmVyc2NhbkNvbHVtbnNDb3VudCA9IF90aGlzJHByb3BzNi5vdmVyc2NhbkNvbHVtbnNDb3VudCxcbiAgICAgICAgICBvdmVyc2NhbkNvdW50ID0gX3RoaXMkcHJvcHM2Lm92ZXJzY2FuQ291bnQsXG4gICAgICAgICAgcm93Q291bnQgPSBfdGhpcyRwcm9wczYucm93Q291bnQ7XG4gICAgICB2YXIgX3RoaXMkc3RhdGU0ID0gdGhpcy5zdGF0ZSxcbiAgICAgICAgICBob3Jpem9udGFsU2Nyb2xsRGlyZWN0aW9uID0gX3RoaXMkc3RhdGU0Lmhvcml6b250YWxTY3JvbGxEaXJlY3Rpb24sXG4gICAgICAgICAgaXNTY3JvbGxpbmcgPSBfdGhpcyRzdGF0ZTQuaXNTY3JvbGxpbmcsXG4gICAgICAgICAgc2Nyb2xsTGVmdCA9IF90aGlzJHN0YXRlNC5zY3JvbGxMZWZ0O1xuICAgICAgdmFyIG92ZXJzY2FuQ291bnRSZXNvbHZlZCA9IG92ZXJzY2FuQ29sdW1uQ291bnQgfHwgb3ZlcnNjYW5Db2x1bW5zQ291bnQgfHwgb3ZlcnNjYW5Db3VudCB8fCAxO1xuXG4gICAgICBpZiAoY29sdW1uQ291bnQgPT09IDAgfHwgcm93Q291bnQgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIFswLCAwLCAwLCAwXTtcbiAgICAgIH1cblxuICAgICAgdmFyIHN0YXJ0SW5kZXggPSBnZXRDb2x1bW5TdGFydEluZGV4Rm9yT2Zmc2V0KHRoaXMucHJvcHMsIHNjcm9sbExlZnQsIHRoaXMuX2luc3RhbmNlUHJvcHMpO1xuICAgICAgdmFyIHN0b3BJbmRleCA9IGdldENvbHVtblN0b3BJbmRleEZvclN0YXJ0SW5kZXgodGhpcy5wcm9wcywgc3RhcnRJbmRleCwgc2Nyb2xsTGVmdCwgdGhpcy5faW5zdGFuY2VQcm9wcyk7IC8vIE92ZXJzY2FuIGJ5IG9uZSBpdGVtIGluIGVhY2ggZGlyZWN0aW9uIHNvIHRoYXQgdGFiL2ZvY3VzIHdvcmtzLlxuICAgICAgLy8gSWYgdGhlcmUgaXNuJ3QgYXQgbGVhc3Qgb25lIGV4dHJhIGl0ZW0sIHRhYiBsb29wcyBiYWNrIGFyb3VuZC5cblxuICAgICAgdmFyIG92ZXJzY2FuQmFja3dhcmQgPSAhaXNTY3JvbGxpbmcgfHwgaG9yaXpvbnRhbFNjcm9sbERpcmVjdGlvbiA9PT0gJ2JhY2t3YXJkJyA/IE1hdGgubWF4KDEsIG92ZXJzY2FuQ291bnRSZXNvbHZlZCkgOiAxO1xuICAgICAgdmFyIG92ZXJzY2FuRm9yd2FyZCA9ICFpc1Njcm9sbGluZyB8fCBob3Jpem9udGFsU2Nyb2xsRGlyZWN0aW9uID09PSAnZm9yd2FyZCcgPyBNYXRoLm1heCgxLCBvdmVyc2NhbkNvdW50UmVzb2x2ZWQpIDogMTtcbiAgICAgIHJldHVybiBbTWF0aC5tYXgoMCwgc3RhcnRJbmRleCAtIG92ZXJzY2FuQmFja3dhcmQpLCBNYXRoLm1heCgwLCBNYXRoLm1pbihjb2x1bW5Db3VudCAtIDEsIHN0b3BJbmRleCArIG92ZXJzY2FuRm9yd2FyZCkpLCBzdGFydEluZGV4LCBzdG9wSW5kZXhdO1xuICAgIH07XG5cbiAgICBfcHJvdG8uX2dldFZlcnRpY2FsUmFuZ2VUb1JlbmRlciA9IGZ1bmN0aW9uIF9nZXRWZXJ0aWNhbFJhbmdlVG9SZW5kZXIoKSB7XG4gICAgICB2YXIgX3RoaXMkcHJvcHM3ID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBjb2x1bW5Db3VudCA9IF90aGlzJHByb3BzNy5jb2x1bW5Db3VudCxcbiAgICAgICAgICBvdmVyc2NhbkNvdW50ID0gX3RoaXMkcHJvcHM3Lm92ZXJzY2FuQ291bnQsXG4gICAgICAgICAgb3ZlcnNjYW5Sb3dDb3VudCA9IF90aGlzJHByb3BzNy5vdmVyc2NhblJvd0NvdW50LFxuICAgICAgICAgIG92ZXJzY2FuUm93c0NvdW50ID0gX3RoaXMkcHJvcHM3Lm92ZXJzY2FuUm93c0NvdW50LFxuICAgICAgICAgIHJvd0NvdW50ID0gX3RoaXMkcHJvcHM3LnJvd0NvdW50O1xuICAgICAgdmFyIF90aGlzJHN0YXRlNSA9IHRoaXMuc3RhdGUsXG4gICAgICAgICAgaXNTY3JvbGxpbmcgPSBfdGhpcyRzdGF0ZTUuaXNTY3JvbGxpbmcsXG4gICAgICAgICAgdmVydGljYWxTY3JvbGxEaXJlY3Rpb24gPSBfdGhpcyRzdGF0ZTUudmVydGljYWxTY3JvbGxEaXJlY3Rpb24sXG4gICAgICAgICAgc2Nyb2xsVG9wID0gX3RoaXMkc3RhdGU1LnNjcm9sbFRvcDtcbiAgICAgIHZhciBvdmVyc2NhbkNvdW50UmVzb2x2ZWQgPSBvdmVyc2NhblJvd0NvdW50IHx8IG92ZXJzY2FuUm93c0NvdW50IHx8IG92ZXJzY2FuQ291bnQgfHwgMTtcblxuICAgICAgaWYgKGNvbHVtbkNvdW50ID09PSAwIHx8IHJvd0NvdW50ID09PSAwKSB7XG4gICAgICAgIHJldHVybiBbMCwgMCwgMCwgMF07XG4gICAgICB9XG5cbiAgICAgIHZhciBzdGFydEluZGV4ID0gZ2V0Um93U3RhcnRJbmRleEZvck9mZnNldCh0aGlzLnByb3BzLCBzY3JvbGxUb3AsIHRoaXMuX2luc3RhbmNlUHJvcHMpO1xuICAgICAgdmFyIHN0b3BJbmRleCA9IGdldFJvd1N0b3BJbmRleEZvclN0YXJ0SW5kZXgodGhpcy5wcm9wcywgc3RhcnRJbmRleCwgc2Nyb2xsVG9wLCB0aGlzLl9pbnN0YW5jZVByb3BzKTsgLy8gT3ZlcnNjYW4gYnkgb25lIGl0ZW0gaW4gZWFjaCBkaXJlY3Rpb24gc28gdGhhdCB0YWIvZm9jdXMgd29ya3MuXG4gICAgICAvLyBJZiB0aGVyZSBpc24ndCBhdCBsZWFzdCBvbmUgZXh0cmEgaXRlbSwgdGFiIGxvb3BzIGJhY2sgYXJvdW5kLlxuXG4gICAgICB2YXIgb3ZlcnNjYW5CYWNrd2FyZCA9ICFpc1Njcm9sbGluZyB8fCB2ZXJ0aWNhbFNjcm9sbERpcmVjdGlvbiA9PT0gJ2JhY2t3YXJkJyA/IE1hdGgubWF4KDEsIG92ZXJzY2FuQ291bnRSZXNvbHZlZCkgOiAxO1xuICAgICAgdmFyIG92ZXJzY2FuRm9yd2FyZCA9ICFpc1Njcm9sbGluZyB8fCB2ZXJ0aWNhbFNjcm9sbERpcmVjdGlvbiA9PT0gJ2ZvcndhcmQnID8gTWF0aC5tYXgoMSwgb3ZlcnNjYW5Db3VudFJlc29sdmVkKSA6IDE7XG4gICAgICByZXR1cm4gW01hdGgubWF4KDAsIHN0YXJ0SW5kZXggLSBvdmVyc2NhbkJhY2t3YXJkKSwgTWF0aC5tYXgoMCwgTWF0aC5taW4ocm93Q291bnQgLSAxLCBzdG9wSW5kZXggKyBvdmVyc2NhbkZvcndhcmQpKSwgc3RhcnRJbmRleCwgc3RvcEluZGV4XTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEdyaWQ7XG4gIH0oUHVyZUNvbXBvbmVudCksIF9jbGFzcy5kZWZhdWx0UHJvcHMgPSB7XG4gICAgZGlyZWN0aW9uOiAnbHRyJyxcbiAgICBpdGVtRGF0YTogdW5kZWZpbmVkLFxuICAgIHVzZUlzU2Nyb2xsaW5nOiBmYWxzZVxuICB9LCBfY2xhc3M7XG59XG5cbnZhciB2YWxpZGF0ZVNoYXJlZFByb3BzID0gZnVuY3Rpb24gdmFsaWRhdGVTaGFyZWRQcm9wcyhfcmVmNSwgX3JlZjYpIHtcbiAgdmFyIGNoaWxkcmVuID0gX3JlZjUuY2hpbGRyZW4sXG4gICAgICBkaXJlY3Rpb24gPSBfcmVmNS5kaXJlY3Rpb24sXG4gICAgICBoZWlnaHQgPSBfcmVmNS5oZWlnaHQsXG4gICAgICBpbm5lclRhZ05hbWUgPSBfcmVmNS5pbm5lclRhZ05hbWUsXG4gICAgICBvdXRlclRhZ05hbWUgPSBfcmVmNS5vdXRlclRhZ05hbWUsXG4gICAgICBvdmVyc2NhbkNvbHVtbnNDb3VudCA9IF9yZWY1Lm92ZXJzY2FuQ29sdW1uc0NvdW50LFxuICAgICAgb3ZlcnNjYW5Db3VudCA9IF9yZWY1Lm92ZXJzY2FuQ291bnQsXG4gICAgICBvdmVyc2NhblJvd3NDb3VudCA9IF9yZWY1Lm92ZXJzY2FuUm93c0NvdW50LFxuICAgICAgd2lkdGggPSBfcmVmNS53aWR0aDtcbiAgdmFyIGluc3RhbmNlID0gX3JlZjYuaW5zdGFuY2U7XG5cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBpZiAodHlwZW9mIG92ZXJzY2FuQ291bnQgPT09ICdudW1iZXInKSB7XG4gICAgICBpZiAoZGV2V2FybmluZ3NPdmVyc2NhbkNvdW50ICYmICFkZXZXYXJuaW5nc092ZXJzY2FuQ291bnQuaGFzKGluc3RhbmNlKSkge1xuICAgICAgICBkZXZXYXJuaW5nc092ZXJzY2FuQ291bnQuYWRkKGluc3RhbmNlKTtcbiAgICAgICAgY29uc29sZS53YXJuKCdUaGUgb3ZlcnNjYW5Db3VudCBwcm9wIGhhcyBiZWVuIGRlcHJlY2F0ZWQuICcgKyAnUGxlYXNlIHVzZSB0aGUgb3ZlcnNjYW5Db2x1bW5Db3VudCBhbmQgb3ZlcnNjYW5Sb3dDb3VudCBwcm9wcyBpbnN0ZWFkLicpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0eXBlb2Ygb3ZlcnNjYW5Db2x1bW5zQ291bnQgPT09ICdudW1iZXInIHx8IHR5cGVvZiBvdmVyc2NhblJvd3NDb3VudCA9PT0gJ251bWJlcicpIHtcbiAgICAgIGlmIChkZXZXYXJuaW5nc092ZXJzY2FuUm93c0NvbHVtbnNDb3VudCAmJiAhZGV2V2FybmluZ3NPdmVyc2NhblJvd3NDb2x1bW5zQ291bnQuaGFzKGluc3RhbmNlKSkge1xuICAgICAgICBkZXZXYXJuaW5nc092ZXJzY2FuUm93c0NvbHVtbnNDb3VudC5hZGQoaW5zdGFuY2UpO1xuICAgICAgICBjb25zb2xlLndhcm4oJ1RoZSBvdmVyc2NhbkNvbHVtbnNDb3VudCBhbmQgb3ZlcnNjYW5Sb3dzQ291bnQgcHJvcHMgaGF2ZSBiZWVuIGRlcHJlY2F0ZWQuICcgKyAnUGxlYXNlIHVzZSB0aGUgb3ZlcnNjYW5Db2x1bW5Db3VudCBhbmQgb3ZlcnNjYW5Sb3dDb3VudCBwcm9wcyBpbnN0ZWFkLicpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChpbm5lclRhZ05hbWUgIT0gbnVsbCB8fCBvdXRlclRhZ05hbWUgIT0gbnVsbCkge1xuICAgICAgaWYgKGRldldhcm5pbmdzVGFnTmFtZSAmJiAhZGV2V2FybmluZ3NUYWdOYW1lLmhhcyhpbnN0YW5jZSkpIHtcbiAgICAgICAgZGV2V2FybmluZ3NUYWdOYW1lLmFkZChpbnN0YW5jZSk7XG4gICAgICAgIGNvbnNvbGUud2FybignVGhlIGlubmVyVGFnTmFtZSBhbmQgb3V0ZXJUYWdOYW1lIHByb3BzIGhhdmUgYmVlbiBkZXByZWNhdGVkLiAnICsgJ1BsZWFzZSB1c2UgdGhlIGlubmVyRWxlbWVudFR5cGUgYW5kIG91dGVyRWxlbWVudFR5cGUgcHJvcHMgaW5zdGVhZC4nKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY2hpbGRyZW4gPT0gbnVsbCkge1xuICAgICAgdGhyb3cgRXJyb3IoJ0FuIGludmFsaWQgXCJjaGlsZHJlblwiIHByb3AgaGFzIGJlZW4gc3BlY2lmaWVkLiAnICsgJ1ZhbHVlIHNob3VsZCBiZSBhIFJlYWN0IGNvbXBvbmVudC4gJyArIChcIlxcXCJcIiArIChjaGlsZHJlbiA9PT0gbnVsbCA/ICdudWxsJyA6IHR5cGVvZiBjaGlsZHJlbikgKyBcIlxcXCIgd2FzIHNwZWNpZmllZC5cIikpO1xuICAgIH1cblxuICAgIHN3aXRjaCAoZGlyZWN0aW9uKSB7XG4gICAgICBjYXNlICdsdHInOlxuICAgICAgY2FzZSAncnRsJzpcbiAgICAgICAgLy8gVmFsaWQgdmFsdWVzXG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBFcnJvcignQW4gaW52YWxpZCBcImRpcmVjdGlvblwiIHByb3AgaGFzIGJlZW4gc3BlY2lmaWVkLiAnICsgJ1ZhbHVlIHNob3VsZCBiZSBlaXRoZXIgXCJsdHJcIiBvciBcInJ0bFwiLiAnICsgKFwiXFxcIlwiICsgZGlyZWN0aW9uICsgXCJcXFwiIHdhcyBzcGVjaWZpZWQuXCIpKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHdpZHRoICE9PSAnbnVtYmVyJykge1xuICAgICAgdGhyb3cgRXJyb3IoJ0FuIGludmFsaWQgXCJ3aWR0aFwiIHByb3AgaGFzIGJlZW4gc3BlY2lmaWVkLiAnICsgJ0dyaWRzIG11c3Qgc3BlY2lmeSBhIG51bWJlciBmb3Igd2lkdGguICcgKyAoXCJcXFwiXCIgKyAod2lkdGggPT09IG51bGwgPyAnbnVsbCcgOiB0eXBlb2Ygd2lkdGgpICsgXCJcXFwiIHdhcyBzcGVjaWZpZWQuXCIpKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGhlaWdodCAhPT0gJ251bWJlcicpIHtcbiAgICAgIHRocm93IEVycm9yKCdBbiBpbnZhbGlkIFwiaGVpZ2h0XCIgcHJvcCBoYXMgYmVlbiBzcGVjaWZpZWQuICcgKyAnR3JpZHMgbXVzdCBzcGVjaWZ5IGEgbnVtYmVyIGZvciBoZWlnaHQuICcgKyAoXCJcXFwiXCIgKyAoaGVpZ2h0ID09PSBudWxsID8gJ251bGwnIDogdHlwZW9mIGhlaWdodCkgKyBcIlxcXCIgd2FzIHNwZWNpZmllZC5cIikpO1xuICAgIH1cbiAgfVxufTtcblxudmFyIERFRkFVTFRfRVNUSU1BVEVEX0lURU1fU0laRSA9IDUwO1xuXG52YXIgZ2V0RXN0aW1hdGVkVG90YWxIZWlnaHQgPSBmdW5jdGlvbiBnZXRFc3RpbWF0ZWRUb3RhbEhlaWdodChfcmVmLCBfcmVmMikge1xuICB2YXIgcm93Q291bnQgPSBfcmVmLnJvd0NvdW50O1xuICB2YXIgcm93TWV0YWRhdGFNYXAgPSBfcmVmMi5yb3dNZXRhZGF0YU1hcCxcbiAgICAgIGVzdGltYXRlZFJvd0hlaWdodCA9IF9yZWYyLmVzdGltYXRlZFJvd0hlaWdodCxcbiAgICAgIGxhc3RNZWFzdXJlZFJvd0luZGV4ID0gX3JlZjIubGFzdE1lYXN1cmVkUm93SW5kZXg7XG4gIHZhciB0b3RhbFNpemVPZk1lYXN1cmVkUm93cyA9IDA7IC8vIEVkZ2UgY2FzZSBjaGVjayBmb3Igd2hlbiB0aGUgbnVtYmVyIG9mIGl0ZW1zIGRlY3JlYXNlcyB3aGlsZSBhIHNjcm9sbCBpcyBpbiBwcm9ncmVzcy5cbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2J2YXVnaG4vcmVhY3Qtd2luZG93L3B1bGwvMTM4XG5cbiAgaWYgKGxhc3RNZWFzdXJlZFJvd0luZGV4ID49IHJvd0NvdW50KSB7XG4gICAgbGFzdE1lYXN1cmVkUm93SW5kZXggPSByb3dDb3VudCAtIDE7XG4gIH1cblxuICBpZiAobGFzdE1lYXN1cmVkUm93SW5kZXggPj0gMCkge1xuICAgIHZhciBpdGVtTWV0YWRhdGEgPSByb3dNZXRhZGF0YU1hcFtsYXN0TWVhc3VyZWRSb3dJbmRleF07XG4gICAgdG90YWxTaXplT2ZNZWFzdXJlZFJvd3MgPSBpdGVtTWV0YWRhdGEub2Zmc2V0ICsgaXRlbU1ldGFkYXRhLnNpemU7XG4gIH1cblxuICB2YXIgbnVtVW5tZWFzdXJlZEl0ZW1zID0gcm93Q291bnQgLSBsYXN0TWVhc3VyZWRSb3dJbmRleCAtIDE7XG4gIHZhciB0b3RhbFNpemVPZlVubWVhc3VyZWRJdGVtcyA9IG51bVVubWVhc3VyZWRJdGVtcyAqIGVzdGltYXRlZFJvd0hlaWdodDtcbiAgcmV0dXJuIHRvdGFsU2l6ZU9mTWVhc3VyZWRSb3dzICsgdG90YWxTaXplT2ZVbm1lYXN1cmVkSXRlbXM7XG59O1xuXG52YXIgZ2V0RXN0aW1hdGVkVG90YWxXaWR0aCA9IGZ1bmN0aW9uIGdldEVzdGltYXRlZFRvdGFsV2lkdGgoX3JlZjMsIF9yZWY0KSB7XG4gIHZhciBjb2x1bW5Db3VudCA9IF9yZWYzLmNvbHVtbkNvdW50O1xuICB2YXIgY29sdW1uTWV0YWRhdGFNYXAgPSBfcmVmNC5jb2x1bW5NZXRhZGF0YU1hcCxcbiAgICAgIGVzdGltYXRlZENvbHVtbldpZHRoID0gX3JlZjQuZXN0aW1hdGVkQ29sdW1uV2lkdGgsXG4gICAgICBsYXN0TWVhc3VyZWRDb2x1bW5JbmRleCA9IF9yZWY0Lmxhc3RNZWFzdXJlZENvbHVtbkluZGV4O1xuICB2YXIgdG90YWxTaXplT2ZNZWFzdXJlZFJvd3MgPSAwOyAvLyBFZGdlIGNhc2UgY2hlY2sgZm9yIHdoZW4gdGhlIG51bWJlciBvZiBpdGVtcyBkZWNyZWFzZXMgd2hpbGUgYSBzY3JvbGwgaXMgaW4gcHJvZ3Jlc3MuXG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9idmF1Z2huL3JlYWN0LXdpbmRvdy9wdWxsLzEzOFxuXG4gIGlmIChsYXN0TWVhc3VyZWRDb2x1bW5JbmRleCA+PSBjb2x1bW5Db3VudCkge1xuICAgIGxhc3RNZWFzdXJlZENvbHVtbkluZGV4ID0gY29sdW1uQ291bnQgLSAxO1xuICB9XG5cbiAgaWYgKGxhc3RNZWFzdXJlZENvbHVtbkluZGV4ID49IDApIHtcbiAgICB2YXIgaXRlbU1ldGFkYXRhID0gY29sdW1uTWV0YWRhdGFNYXBbbGFzdE1lYXN1cmVkQ29sdW1uSW5kZXhdO1xuICAgIHRvdGFsU2l6ZU9mTWVhc3VyZWRSb3dzID0gaXRlbU1ldGFkYXRhLm9mZnNldCArIGl0ZW1NZXRhZGF0YS5zaXplO1xuICB9XG5cbiAgdmFyIG51bVVubWVhc3VyZWRJdGVtcyA9IGNvbHVtbkNvdW50IC0gbGFzdE1lYXN1cmVkQ29sdW1uSW5kZXggLSAxO1xuICB2YXIgdG90YWxTaXplT2ZVbm1lYXN1cmVkSXRlbXMgPSBudW1Vbm1lYXN1cmVkSXRlbXMgKiBlc3RpbWF0ZWRDb2x1bW5XaWR0aDtcbiAgcmV0dXJuIHRvdGFsU2l6ZU9mTWVhc3VyZWRSb3dzICsgdG90YWxTaXplT2ZVbm1lYXN1cmVkSXRlbXM7XG59O1xuXG52YXIgZ2V0SXRlbU1ldGFkYXRhID0gZnVuY3Rpb24gZ2V0SXRlbU1ldGFkYXRhKGl0ZW1UeXBlLCBwcm9wcywgaW5kZXgsIGluc3RhbmNlUHJvcHMpIHtcbiAgdmFyIGl0ZW1NZXRhZGF0YU1hcCwgaXRlbVNpemUsIGxhc3RNZWFzdXJlZEluZGV4O1xuXG4gIGlmIChpdGVtVHlwZSA9PT0gJ2NvbHVtbicpIHtcbiAgICBpdGVtTWV0YWRhdGFNYXAgPSBpbnN0YW5jZVByb3BzLmNvbHVtbk1ldGFkYXRhTWFwO1xuICAgIGl0ZW1TaXplID0gcHJvcHMuY29sdW1uV2lkdGg7XG4gICAgbGFzdE1lYXN1cmVkSW5kZXggPSBpbnN0YW5jZVByb3BzLmxhc3RNZWFzdXJlZENvbHVtbkluZGV4O1xuICB9IGVsc2Uge1xuICAgIGl0ZW1NZXRhZGF0YU1hcCA9IGluc3RhbmNlUHJvcHMucm93TWV0YWRhdGFNYXA7XG4gICAgaXRlbVNpemUgPSBwcm9wcy5yb3dIZWlnaHQ7XG4gICAgbGFzdE1lYXN1cmVkSW5kZXggPSBpbnN0YW5jZVByb3BzLmxhc3RNZWFzdXJlZFJvd0luZGV4O1xuICB9XG5cbiAgaWYgKGluZGV4ID4gbGFzdE1lYXN1cmVkSW5kZXgpIHtcbiAgICB2YXIgb2Zmc2V0ID0gMDtcblxuICAgIGlmIChsYXN0TWVhc3VyZWRJbmRleCA+PSAwKSB7XG4gICAgICB2YXIgaXRlbU1ldGFkYXRhID0gaXRlbU1ldGFkYXRhTWFwW2xhc3RNZWFzdXJlZEluZGV4XTtcbiAgICAgIG9mZnNldCA9IGl0ZW1NZXRhZGF0YS5vZmZzZXQgKyBpdGVtTWV0YWRhdGEuc2l6ZTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gbGFzdE1lYXN1cmVkSW5kZXggKyAxOyBpIDw9IGluZGV4OyBpKyspIHtcbiAgICAgIHZhciBzaXplID0gaXRlbVNpemUoaSk7XG4gICAgICBpdGVtTWV0YWRhdGFNYXBbaV0gPSB7XG4gICAgICAgIG9mZnNldDogb2Zmc2V0LFxuICAgICAgICBzaXplOiBzaXplXG4gICAgICB9O1xuICAgICAgb2Zmc2V0ICs9IHNpemU7XG4gICAgfVxuXG4gICAgaWYgKGl0ZW1UeXBlID09PSAnY29sdW1uJykge1xuICAgICAgaW5zdGFuY2VQcm9wcy5sYXN0TWVhc3VyZWRDb2x1bW5JbmRleCA9IGluZGV4O1xuICAgIH0gZWxzZSB7XG4gICAgICBpbnN0YW5jZVByb3BzLmxhc3RNZWFzdXJlZFJvd0luZGV4ID0gaW5kZXg7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGl0ZW1NZXRhZGF0YU1hcFtpbmRleF07XG59O1xuXG52YXIgZmluZE5lYXJlc3RJdGVtID0gZnVuY3Rpb24gZmluZE5lYXJlc3RJdGVtKGl0ZW1UeXBlLCBwcm9wcywgaW5zdGFuY2VQcm9wcywgb2Zmc2V0KSB7XG4gIHZhciBpdGVtTWV0YWRhdGFNYXAsIGxhc3RNZWFzdXJlZEluZGV4O1xuXG4gIGlmIChpdGVtVHlwZSA9PT0gJ2NvbHVtbicpIHtcbiAgICBpdGVtTWV0YWRhdGFNYXAgPSBpbnN0YW5jZVByb3BzLmNvbHVtbk1ldGFkYXRhTWFwO1xuICAgIGxhc3RNZWFzdXJlZEluZGV4ID0gaW5zdGFuY2VQcm9wcy5sYXN0TWVhc3VyZWRDb2x1bW5JbmRleDtcbiAgfSBlbHNlIHtcbiAgICBpdGVtTWV0YWRhdGFNYXAgPSBpbnN0YW5jZVByb3BzLnJvd01ldGFkYXRhTWFwO1xuICAgIGxhc3RNZWFzdXJlZEluZGV4ID0gaW5zdGFuY2VQcm9wcy5sYXN0TWVhc3VyZWRSb3dJbmRleDtcbiAgfVxuXG4gIHZhciBsYXN0TWVhc3VyZWRJdGVtT2Zmc2V0ID0gbGFzdE1lYXN1cmVkSW5kZXggPiAwID8gaXRlbU1ldGFkYXRhTWFwW2xhc3RNZWFzdXJlZEluZGV4XS5vZmZzZXQgOiAwO1xuXG4gIGlmIChsYXN0TWVhc3VyZWRJdGVtT2Zmc2V0ID49IG9mZnNldCkge1xuICAgIC8vIElmIHdlJ3ZlIGFscmVhZHkgbWVhc3VyZWQgaXRlbXMgd2l0aGluIHRoaXMgcmFuZ2UganVzdCB1c2UgYSBiaW5hcnkgc2VhcmNoIGFzIGl0J3MgZmFzdGVyLlxuICAgIHJldHVybiBmaW5kTmVhcmVzdEl0ZW1CaW5hcnlTZWFyY2goaXRlbVR5cGUsIHByb3BzLCBpbnN0YW5jZVByb3BzLCBsYXN0TWVhc3VyZWRJbmRleCwgMCwgb2Zmc2V0KTtcbiAgfSBlbHNlIHtcbiAgICAvLyBJZiB3ZSBoYXZlbid0IHlldCBtZWFzdXJlZCB0aGlzIGhpZ2gsIGZhbGxiYWNrIHRvIGFuIGV4cG9uZW50aWFsIHNlYXJjaCB3aXRoIGFuIGlubmVyIGJpbmFyeSBzZWFyY2guXG4gICAgLy8gVGhlIGV4cG9uZW50aWFsIHNlYXJjaCBhdm9pZHMgcHJlLWNvbXB1dGluZyBzaXplcyBmb3IgdGhlIGZ1bGwgc2V0IG9mIGl0ZW1zIGFzIGEgYmluYXJ5IHNlYXJjaCB3b3VsZC5cbiAgICAvLyBUaGUgb3ZlcmFsbCBjb21wbGV4aXR5IGZvciB0aGlzIGFwcHJvYWNoIGlzIE8obG9nIG4pLlxuICAgIHJldHVybiBmaW5kTmVhcmVzdEl0ZW1FeHBvbmVudGlhbFNlYXJjaChpdGVtVHlwZSwgcHJvcHMsIGluc3RhbmNlUHJvcHMsIE1hdGgubWF4KDAsIGxhc3RNZWFzdXJlZEluZGV4KSwgb2Zmc2V0KTtcbiAgfVxufTtcblxudmFyIGZpbmROZWFyZXN0SXRlbUJpbmFyeVNlYXJjaCA9IGZ1bmN0aW9uIGZpbmROZWFyZXN0SXRlbUJpbmFyeVNlYXJjaChpdGVtVHlwZSwgcHJvcHMsIGluc3RhbmNlUHJvcHMsIGhpZ2gsIGxvdywgb2Zmc2V0KSB7XG4gIHdoaWxlIChsb3cgPD0gaGlnaCkge1xuICAgIHZhciBtaWRkbGUgPSBsb3cgKyBNYXRoLmZsb29yKChoaWdoIC0gbG93KSAvIDIpO1xuICAgIHZhciBjdXJyZW50T2Zmc2V0ID0gZ2V0SXRlbU1ldGFkYXRhKGl0ZW1UeXBlLCBwcm9wcywgbWlkZGxlLCBpbnN0YW5jZVByb3BzKS5vZmZzZXQ7XG5cbiAgICBpZiAoY3VycmVudE9mZnNldCA9PT0gb2Zmc2V0KSB7XG4gICAgICByZXR1cm4gbWlkZGxlO1xuICAgIH0gZWxzZSBpZiAoY3VycmVudE9mZnNldCA8IG9mZnNldCkge1xuICAgICAgbG93ID0gbWlkZGxlICsgMTtcbiAgICB9IGVsc2UgaWYgKGN1cnJlbnRPZmZzZXQgPiBvZmZzZXQpIHtcbiAgICAgIGhpZ2ggPSBtaWRkbGUgLSAxO1xuICAgIH1cbiAgfVxuXG4gIGlmIChsb3cgPiAwKSB7XG4gICAgcmV0dXJuIGxvdyAtIDE7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cbn07XG5cbnZhciBmaW5kTmVhcmVzdEl0ZW1FeHBvbmVudGlhbFNlYXJjaCA9IGZ1bmN0aW9uIGZpbmROZWFyZXN0SXRlbUV4cG9uZW50aWFsU2VhcmNoKGl0ZW1UeXBlLCBwcm9wcywgaW5zdGFuY2VQcm9wcywgaW5kZXgsIG9mZnNldCkge1xuICB2YXIgaXRlbUNvdW50ID0gaXRlbVR5cGUgPT09ICdjb2x1bW4nID8gcHJvcHMuY29sdW1uQ291bnQgOiBwcm9wcy5yb3dDb3VudDtcbiAgdmFyIGludGVydmFsID0gMTtcblxuICB3aGlsZSAoaW5kZXggPCBpdGVtQ291bnQgJiYgZ2V0SXRlbU1ldGFkYXRhKGl0ZW1UeXBlLCBwcm9wcywgaW5kZXgsIGluc3RhbmNlUHJvcHMpLm9mZnNldCA8IG9mZnNldCkge1xuICAgIGluZGV4ICs9IGludGVydmFsO1xuICAgIGludGVydmFsICo9IDI7XG4gIH1cblxuICByZXR1cm4gZmluZE5lYXJlc3RJdGVtQmluYXJ5U2VhcmNoKGl0ZW1UeXBlLCBwcm9wcywgaW5zdGFuY2VQcm9wcywgTWF0aC5taW4oaW5kZXgsIGl0ZW1Db3VudCAtIDEpLCBNYXRoLmZsb29yKGluZGV4IC8gMiksIG9mZnNldCk7XG59O1xuXG52YXIgZ2V0T2Zmc2V0Rm9ySW5kZXhBbmRBbGlnbm1lbnQgPSBmdW5jdGlvbiBnZXRPZmZzZXRGb3JJbmRleEFuZEFsaWdubWVudChpdGVtVHlwZSwgcHJvcHMsIGluZGV4LCBhbGlnbiwgc2Nyb2xsT2Zmc2V0LCBpbnN0YW5jZVByb3BzLCBzY3JvbGxiYXJTaXplKSB7XG4gIHZhciBzaXplID0gaXRlbVR5cGUgPT09ICdjb2x1bW4nID8gcHJvcHMud2lkdGggOiBwcm9wcy5oZWlnaHQ7XG4gIHZhciBpdGVtTWV0YWRhdGEgPSBnZXRJdGVtTWV0YWRhdGEoaXRlbVR5cGUsIHByb3BzLCBpbmRleCwgaW5zdGFuY2VQcm9wcyk7IC8vIEdldCBlc3RpbWF0ZWQgdG90YWwgc2l6ZSBhZnRlciBJdGVtTWV0YWRhdGEgaXMgY29tcHV0ZWQsXG4gIC8vIFRvIGVuc3VyZSBpdCByZWZsZWN0cyBhY3R1YWwgbWVhc3VyZW1lbnRzIGluc3RlYWQgb2YganVzdCBlc3RpbWF0ZXMuXG5cbiAgdmFyIGVzdGltYXRlZFRvdGFsU2l6ZSA9IGl0ZW1UeXBlID09PSAnY29sdW1uJyA/IGdldEVzdGltYXRlZFRvdGFsV2lkdGgocHJvcHMsIGluc3RhbmNlUHJvcHMpIDogZ2V0RXN0aW1hdGVkVG90YWxIZWlnaHQocHJvcHMsIGluc3RhbmNlUHJvcHMpO1xuICB2YXIgbWF4T2Zmc2V0ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oZXN0aW1hdGVkVG90YWxTaXplIC0gc2l6ZSwgaXRlbU1ldGFkYXRhLm9mZnNldCkpO1xuICB2YXIgbWluT2Zmc2V0ID0gTWF0aC5tYXgoMCwgaXRlbU1ldGFkYXRhLm9mZnNldCAtIHNpemUgKyBzY3JvbGxiYXJTaXplICsgaXRlbU1ldGFkYXRhLnNpemUpO1xuXG4gIGlmIChhbGlnbiA9PT0gJ3NtYXJ0Jykge1xuICAgIGlmIChzY3JvbGxPZmZzZXQgPj0gbWluT2Zmc2V0IC0gc2l6ZSAmJiBzY3JvbGxPZmZzZXQgPD0gbWF4T2Zmc2V0ICsgc2l6ZSkge1xuICAgICAgYWxpZ24gPSAnYXV0byc7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFsaWduID0gJ2NlbnRlcic7XG4gICAgfVxuICB9XG5cbiAgc3dpdGNoIChhbGlnbikge1xuICAgIGNhc2UgJ3N0YXJ0JzpcbiAgICAgIHJldHVybiBtYXhPZmZzZXQ7XG5cbiAgICBjYXNlICdlbmQnOlxuICAgICAgcmV0dXJuIG1pbk9mZnNldDtcblxuICAgIGNhc2UgJ2NlbnRlcic6XG4gICAgICByZXR1cm4gTWF0aC5yb3VuZChtaW5PZmZzZXQgKyAobWF4T2Zmc2V0IC0gbWluT2Zmc2V0KSAvIDIpO1xuXG4gICAgY2FzZSAnYXV0byc6XG4gICAgZGVmYXVsdDpcbiAgICAgIGlmIChzY3JvbGxPZmZzZXQgPj0gbWluT2Zmc2V0ICYmIHNjcm9sbE9mZnNldCA8PSBtYXhPZmZzZXQpIHtcbiAgICAgICAgcmV0dXJuIHNjcm9sbE9mZnNldDtcbiAgICAgIH0gZWxzZSBpZiAobWluT2Zmc2V0ID4gbWF4T2Zmc2V0KSB7XG4gICAgICAgIC8vIEJlY2F1c2Ugd2Ugb25seSB0YWtlIGludG8gYWNjb3VudCB0aGUgc2Nyb2xsYmFyIHNpemUgd2hlbiBjYWxjdWxhdGluZyBtaW5PZmZzZXRcbiAgICAgICAgLy8gdGhpcyB2YWx1ZSBjYW4gYmUgbGFyZ2VyIHRoYW4gbWF4T2Zmc2V0IHdoZW4gYXQgdGhlIGVuZCBvZiB0aGUgbGlzdFxuICAgICAgICByZXR1cm4gbWluT2Zmc2V0O1xuICAgICAgfSBlbHNlIGlmIChzY3JvbGxPZmZzZXQgPCBtaW5PZmZzZXQpIHtcbiAgICAgICAgcmV0dXJuIG1pbk9mZnNldDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBtYXhPZmZzZXQ7XG4gICAgICB9XG5cbiAgfVxufTtcblxudmFyIFZhcmlhYmxlU2l6ZUdyaWQgPSAvKiNfX1BVUkVfXyovY3JlYXRlR3JpZENvbXBvbmVudCh7XG4gIGdldENvbHVtbk9mZnNldDogZnVuY3Rpb24gZ2V0Q29sdW1uT2Zmc2V0KHByb3BzLCBpbmRleCwgaW5zdGFuY2VQcm9wcykge1xuICAgIHJldHVybiBnZXRJdGVtTWV0YWRhdGEoJ2NvbHVtbicsIHByb3BzLCBpbmRleCwgaW5zdGFuY2VQcm9wcykub2Zmc2V0O1xuICB9LFxuICBnZXRDb2x1bW5TdGFydEluZGV4Rm9yT2Zmc2V0OiBmdW5jdGlvbiBnZXRDb2x1bW5TdGFydEluZGV4Rm9yT2Zmc2V0KHByb3BzLCBzY3JvbGxMZWZ0LCBpbnN0YW5jZVByb3BzKSB7XG4gICAgcmV0dXJuIGZpbmROZWFyZXN0SXRlbSgnY29sdW1uJywgcHJvcHMsIGluc3RhbmNlUHJvcHMsIHNjcm9sbExlZnQpO1xuICB9LFxuICBnZXRDb2x1bW5TdG9wSW5kZXhGb3JTdGFydEluZGV4OiBmdW5jdGlvbiBnZXRDb2x1bW5TdG9wSW5kZXhGb3JTdGFydEluZGV4KHByb3BzLCBzdGFydEluZGV4LCBzY3JvbGxMZWZ0LCBpbnN0YW5jZVByb3BzKSB7XG4gICAgdmFyIGNvbHVtbkNvdW50ID0gcHJvcHMuY29sdW1uQ291bnQsXG4gICAgICAgIHdpZHRoID0gcHJvcHMud2lkdGg7XG4gICAgdmFyIGl0ZW1NZXRhZGF0YSA9IGdldEl0ZW1NZXRhZGF0YSgnY29sdW1uJywgcHJvcHMsIHN0YXJ0SW5kZXgsIGluc3RhbmNlUHJvcHMpO1xuICAgIHZhciBtYXhPZmZzZXQgPSBzY3JvbGxMZWZ0ICsgd2lkdGg7XG4gICAgdmFyIG9mZnNldCA9IGl0ZW1NZXRhZGF0YS5vZmZzZXQgKyBpdGVtTWV0YWRhdGEuc2l6ZTtcbiAgICB2YXIgc3RvcEluZGV4ID0gc3RhcnRJbmRleDtcblxuICAgIHdoaWxlIChzdG9wSW5kZXggPCBjb2x1bW5Db3VudCAtIDEgJiYgb2Zmc2V0IDwgbWF4T2Zmc2V0KSB7XG4gICAgICBzdG9wSW5kZXgrKztcbiAgICAgIG9mZnNldCArPSBnZXRJdGVtTWV0YWRhdGEoJ2NvbHVtbicsIHByb3BzLCBzdG9wSW5kZXgsIGluc3RhbmNlUHJvcHMpLnNpemU7XG4gICAgfVxuXG4gICAgcmV0dXJuIHN0b3BJbmRleDtcbiAgfSxcbiAgZ2V0Q29sdW1uV2lkdGg6IGZ1bmN0aW9uIGdldENvbHVtbldpZHRoKHByb3BzLCBpbmRleCwgaW5zdGFuY2VQcm9wcykge1xuICAgIHJldHVybiBpbnN0YW5jZVByb3BzLmNvbHVtbk1ldGFkYXRhTWFwW2luZGV4XS5zaXplO1xuICB9LFxuICBnZXRFc3RpbWF0ZWRUb3RhbEhlaWdodDogZ2V0RXN0aW1hdGVkVG90YWxIZWlnaHQsXG4gIGdldEVzdGltYXRlZFRvdGFsV2lkdGg6IGdldEVzdGltYXRlZFRvdGFsV2lkdGgsXG4gIGdldE9mZnNldEZvckNvbHVtbkFuZEFsaWdubWVudDogZnVuY3Rpb24gZ2V0T2Zmc2V0Rm9yQ29sdW1uQW5kQWxpZ25tZW50KHByb3BzLCBpbmRleCwgYWxpZ24sIHNjcm9sbE9mZnNldCwgaW5zdGFuY2VQcm9wcywgc2Nyb2xsYmFyU2l6ZSkge1xuICAgIHJldHVybiBnZXRPZmZzZXRGb3JJbmRleEFuZEFsaWdubWVudCgnY29sdW1uJywgcHJvcHMsIGluZGV4LCBhbGlnbiwgc2Nyb2xsT2Zmc2V0LCBpbnN0YW5jZVByb3BzLCBzY3JvbGxiYXJTaXplKTtcbiAgfSxcbiAgZ2V0T2Zmc2V0Rm9yUm93QW5kQWxpZ25tZW50OiBmdW5jdGlvbiBnZXRPZmZzZXRGb3JSb3dBbmRBbGlnbm1lbnQocHJvcHMsIGluZGV4LCBhbGlnbiwgc2Nyb2xsT2Zmc2V0LCBpbnN0YW5jZVByb3BzLCBzY3JvbGxiYXJTaXplKSB7XG4gICAgcmV0dXJuIGdldE9mZnNldEZvckluZGV4QW5kQWxpZ25tZW50KCdyb3cnLCBwcm9wcywgaW5kZXgsIGFsaWduLCBzY3JvbGxPZmZzZXQsIGluc3RhbmNlUHJvcHMsIHNjcm9sbGJhclNpemUpO1xuICB9LFxuICBnZXRSb3dPZmZzZXQ6IGZ1bmN0aW9uIGdldFJvd09mZnNldChwcm9wcywgaW5kZXgsIGluc3RhbmNlUHJvcHMpIHtcbiAgICByZXR1cm4gZ2V0SXRlbU1ldGFkYXRhKCdyb3cnLCBwcm9wcywgaW5kZXgsIGluc3RhbmNlUHJvcHMpLm9mZnNldDtcbiAgfSxcbiAgZ2V0Um93SGVpZ2h0OiBmdW5jdGlvbiBnZXRSb3dIZWlnaHQocHJvcHMsIGluZGV4LCBpbnN0YW5jZVByb3BzKSB7XG4gICAgcmV0dXJuIGluc3RhbmNlUHJvcHMucm93TWV0YWRhdGFNYXBbaW5kZXhdLnNpemU7XG4gIH0sXG4gIGdldFJvd1N0YXJ0SW5kZXhGb3JPZmZzZXQ6IGZ1bmN0aW9uIGdldFJvd1N0YXJ0SW5kZXhGb3JPZmZzZXQocHJvcHMsIHNjcm9sbFRvcCwgaW5zdGFuY2VQcm9wcykge1xuICAgIHJldHVybiBmaW5kTmVhcmVzdEl0ZW0oJ3JvdycsIHByb3BzLCBpbnN0YW5jZVByb3BzLCBzY3JvbGxUb3ApO1xuICB9LFxuICBnZXRSb3dTdG9wSW5kZXhGb3JTdGFydEluZGV4OiBmdW5jdGlvbiBnZXRSb3dTdG9wSW5kZXhGb3JTdGFydEluZGV4KHByb3BzLCBzdGFydEluZGV4LCBzY3JvbGxUb3AsIGluc3RhbmNlUHJvcHMpIHtcbiAgICB2YXIgcm93Q291bnQgPSBwcm9wcy5yb3dDb3VudCxcbiAgICAgICAgaGVpZ2h0ID0gcHJvcHMuaGVpZ2h0O1xuICAgIHZhciBpdGVtTWV0YWRhdGEgPSBnZXRJdGVtTWV0YWRhdGEoJ3JvdycsIHByb3BzLCBzdGFydEluZGV4LCBpbnN0YW5jZVByb3BzKTtcbiAgICB2YXIgbWF4T2Zmc2V0ID0gc2Nyb2xsVG9wICsgaGVpZ2h0O1xuICAgIHZhciBvZmZzZXQgPSBpdGVtTWV0YWRhdGEub2Zmc2V0ICsgaXRlbU1ldGFkYXRhLnNpemU7XG4gICAgdmFyIHN0b3BJbmRleCA9IHN0YXJ0SW5kZXg7XG5cbiAgICB3aGlsZSAoc3RvcEluZGV4IDwgcm93Q291bnQgLSAxICYmIG9mZnNldCA8IG1heE9mZnNldCkge1xuICAgICAgc3RvcEluZGV4Kys7XG4gICAgICBvZmZzZXQgKz0gZ2V0SXRlbU1ldGFkYXRhKCdyb3cnLCBwcm9wcywgc3RvcEluZGV4LCBpbnN0YW5jZVByb3BzKS5zaXplO1xuICAgIH1cblxuICAgIHJldHVybiBzdG9wSW5kZXg7XG4gIH0sXG4gIGluaXRJbnN0YW5jZVByb3BzOiBmdW5jdGlvbiBpbml0SW5zdGFuY2VQcm9wcyhwcm9wcywgaW5zdGFuY2UpIHtcbiAgICB2YXIgX3JlZjUgPSBwcm9wcyxcbiAgICAgICAgZXN0aW1hdGVkQ29sdW1uV2lkdGggPSBfcmVmNS5lc3RpbWF0ZWRDb2x1bW5XaWR0aCxcbiAgICAgICAgZXN0aW1hdGVkUm93SGVpZ2h0ID0gX3JlZjUuZXN0aW1hdGVkUm93SGVpZ2h0O1xuICAgIHZhciBpbnN0YW5jZVByb3BzID0ge1xuICAgICAgY29sdW1uTWV0YWRhdGFNYXA6IHt9LFxuICAgICAgZXN0aW1hdGVkQ29sdW1uV2lkdGg6IGVzdGltYXRlZENvbHVtbldpZHRoIHx8IERFRkFVTFRfRVNUSU1BVEVEX0lURU1fU0laRSxcbiAgICAgIGVzdGltYXRlZFJvd0hlaWdodDogZXN0aW1hdGVkUm93SGVpZ2h0IHx8IERFRkFVTFRfRVNUSU1BVEVEX0lURU1fU0laRSxcbiAgICAgIGxhc3RNZWFzdXJlZENvbHVtbkluZGV4OiAtMSxcbiAgICAgIGxhc3RNZWFzdXJlZFJvd0luZGV4OiAtMSxcbiAgICAgIHJvd01ldGFkYXRhTWFwOiB7fVxuICAgIH07XG5cbiAgICBpbnN0YW5jZS5yZXNldEFmdGVyQ29sdW1uSW5kZXggPSBmdW5jdGlvbiAoY29sdW1uSW5kZXgsIHNob3VsZEZvcmNlVXBkYXRlKSB7XG4gICAgICBpZiAoc2hvdWxkRm9yY2VVcGRhdGUgPT09IHZvaWQgMCkge1xuICAgICAgICBzaG91bGRGb3JjZVVwZGF0ZSA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIGluc3RhbmNlLnJlc2V0QWZ0ZXJJbmRpY2VzKHtcbiAgICAgICAgY29sdW1uSW5kZXg6IGNvbHVtbkluZGV4LFxuICAgICAgICBzaG91bGRGb3JjZVVwZGF0ZTogc2hvdWxkRm9yY2VVcGRhdGVcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBpbnN0YW5jZS5yZXNldEFmdGVyUm93SW5kZXggPSBmdW5jdGlvbiAocm93SW5kZXgsIHNob3VsZEZvcmNlVXBkYXRlKSB7XG4gICAgICBpZiAoc2hvdWxkRm9yY2VVcGRhdGUgPT09IHZvaWQgMCkge1xuICAgICAgICBzaG91bGRGb3JjZVVwZGF0ZSA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIGluc3RhbmNlLnJlc2V0QWZ0ZXJJbmRpY2VzKHtcbiAgICAgICAgcm93SW5kZXg6IHJvd0luZGV4LFxuICAgICAgICBzaG91bGRGb3JjZVVwZGF0ZTogc2hvdWxkRm9yY2VVcGRhdGVcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBpbnN0YW5jZS5yZXNldEFmdGVySW5kaWNlcyA9IGZ1bmN0aW9uIChfcmVmNikge1xuICAgICAgdmFyIGNvbHVtbkluZGV4ID0gX3JlZjYuY29sdW1uSW5kZXgsXG4gICAgICAgICAgcm93SW5kZXggPSBfcmVmNi5yb3dJbmRleCxcbiAgICAgICAgICBfcmVmNiRzaG91bGRGb3JjZVVwZGEgPSBfcmVmNi5zaG91bGRGb3JjZVVwZGF0ZSxcbiAgICAgICAgICBzaG91bGRGb3JjZVVwZGF0ZSA9IF9yZWY2JHNob3VsZEZvcmNlVXBkYSA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9yZWY2JHNob3VsZEZvcmNlVXBkYTtcblxuICAgICAgaWYgKHR5cGVvZiBjb2x1bW5JbmRleCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgaW5zdGFuY2VQcm9wcy5sYXN0TWVhc3VyZWRDb2x1bW5JbmRleCA9IE1hdGgubWluKGluc3RhbmNlUHJvcHMubGFzdE1lYXN1cmVkQ29sdW1uSW5kZXgsIGNvbHVtbkluZGV4IC0gMSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2Ygcm93SW5kZXggPT09ICdudW1iZXInKSB7XG4gICAgICAgIGluc3RhbmNlUHJvcHMubGFzdE1lYXN1cmVkUm93SW5kZXggPSBNYXRoLm1pbihpbnN0YW5jZVByb3BzLmxhc3RNZWFzdXJlZFJvd0luZGV4LCByb3dJbmRleCAtIDEpO1xuICAgICAgfSAvLyBXZSBjb3VsZCBwb3RlbnRpYWxseSBvcHRpbWl6ZSBmdXJ0aGVyIGJ5IG9ubHkgZXZpY3Rpbmcgc3R5bGVzIGFmdGVyIHRoaXMgaW5kZXgsXG4gICAgICAvLyBCdXQgc2luY2Ugc3R5bGVzIGFyZSBvbmx5IGNhY2hlZCB3aGlsZSBzY3JvbGxpbmcgaXMgaW4gcHJvZ3Jlc3MtXG4gICAgICAvLyBJdCBzZWVtcyBhbiB1bm5lY2Vzc2FyeSBvcHRpbWl6YXRpb24uXG4gICAgICAvLyBJdCdzIHVubGlrZWx5IHRoYXQgcmVzZXRBZnRlckluZGV4KCkgd2lsbCBiZSBjYWxsZWQgd2hpbGUgYSB1c2VyIGlzIHNjcm9sbGluZy5cblxuXG4gICAgICBpbnN0YW5jZS5fZ2V0SXRlbVN0eWxlQ2FjaGUoLTEpO1xuXG4gICAgICBpZiAoc2hvdWxkRm9yY2VVcGRhdGUpIHtcbiAgICAgICAgaW5zdGFuY2UuZm9yY2VVcGRhdGUoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIGluc3RhbmNlUHJvcHM7XG4gIH0sXG4gIHNob3VsZFJlc2V0U3R5bGVDYWNoZU9uSXRlbVNpemVDaGFuZ2U6IGZhbHNlLFxuICB2YWxpZGF0ZVByb3BzOiBmdW5jdGlvbiB2YWxpZGF0ZVByb3BzKF9yZWY3KSB7XG4gICAgdmFyIGNvbHVtbldpZHRoID0gX3JlZjcuY29sdW1uV2lkdGgsXG4gICAgICAgIHJvd0hlaWdodCA9IF9yZWY3LnJvd0hlaWdodDtcblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBpZiAodHlwZW9mIGNvbHVtbldpZHRoICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRocm93IEVycm9yKCdBbiBpbnZhbGlkIFwiY29sdW1uV2lkdGhcIiBwcm9wIGhhcyBiZWVuIHNwZWNpZmllZC4gJyArICdWYWx1ZSBzaG91bGQgYmUgYSBmdW5jdGlvbi4gJyArIChcIlxcXCJcIiArIChjb2x1bW5XaWR0aCA9PT0gbnVsbCA/ICdudWxsJyA6IHR5cGVvZiBjb2x1bW5XaWR0aCkgKyBcIlxcXCIgd2FzIHNwZWNpZmllZC5cIikpO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygcm93SGVpZ2h0ICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRocm93IEVycm9yKCdBbiBpbnZhbGlkIFwicm93SGVpZ2h0XCIgcHJvcCBoYXMgYmVlbiBzcGVjaWZpZWQuICcgKyAnVmFsdWUgc2hvdWxkIGJlIGEgZnVuY3Rpb24uICcgKyAoXCJcXFwiXCIgKyAocm93SGVpZ2h0ID09PSBudWxsID8gJ251bGwnIDogdHlwZW9mIHJvd0hlaWdodCkgKyBcIlxcXCIgd2FzIHNwZWNpZmllZC5cIikpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufSk7XG5cbnZhciBJU19TQ1JPTExJTkdfREVCT1VOQ0VfSU5URVJWQUwkMSA9IDE1MDtcblxudmFyIGRlZmF1bHRJdGVtS2V5JDEgPSBmdW5jdGlvbiBkZWZhdWx0SXRlbUtleShpbmRleCwgZGF0YSkge1xuICByZXR1cm4gaW5kZXg7XG59OyAvLyBJbiBERVYgbW9kZSwgdGhpcyBTZXQgaGVscHMgdXMgb25seSBsb2cgYSB3YXJuaW5nIG9uY2UgcGVyIGNvbXBvbmVudCBpbnN0YW5jZS5cbi8vIFRoaXMgYXZvaWRzIHNwYW1taW5nIHRoZSBjb25zb2xlIGV2ZXJ5IHRpbWUgYSByZW5kZXIgaGFwcGVucy5cblxuXG52YXIgZGV2V2FybmluZ3NEaXJlY3Rpb24gPSBudWxsO1xudmFyIGRldldhcm5pbmdzVGFnTmFtZSQxID0gbnVsbDtcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiB3aW5kb3cuV2Vha1NldCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBkZXZXYXJuaW5nc0RpcmVjdGlvbiA9IC8qI19fUFVSRV9fKi9uZXcgV2Vha1NldCgpO1xuICAgIGRldldhcm5pbmdzVGFnTmFtZSQxID0gLyojX19QVVJFX18qL25ldyBXZWFrU2V0KCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlTGlzdENvbXBvbmVudChfcmVmKSB7XG4gIHZhciBfY2xhc3M7XG5cbiAgdmFyIGdldEl0ZW1PZmZzZXQgPSBfcmVmLmdldEl0ZW1PZmZzZXQsXG4gICAgICBnZXRFc3RpbWF0ZWRUb3RhbFNpemUgPSBfcmVmLmdldEVzdGltYXRlZFRvdGFsU2l6ZSxcbiAgICAgIGdldEl0ZW1TaXplID0gX3JlZi5nZXRJdGVtU2l6ZSxcbiAgICAgIGdldE9mZnNldEZvckluZGV4QW5kQWxpZ25tZW50ID0gX3JlZi5nZXRPZmZzZXRGb3JJbmRleEFuZEFsaWdubWVudCxcbiAgICAgIGdldFN0YXJ0SW5kZXhGb3JPZmZzZXQgPSBfcmVmLmdldFN0YXJ0SW5kZXhGb3JPZmZzZXQsXG4gICAgICBnZXRTdG9wSW5kZXhGb3JTdGFydEluZGV4ID0gX3JlZi5nZXRTdG9wSW5kZXhGb3JTdGFydEluZGV4LFxuICAgICAgaW5pdEluc3RhbmNlUHJvcHMgPSBfcmVmLmluaXRJbnN0YW5jZVByb3BzLFxuICAgICAgc2hvdWxkUmVzZXRTdHlsZUNhY2hlT25JdGVtU2l6ZUNoYW5nZSA9IF9yZWYuc2hvdWxkUmVzZXRTdHlsZUNhY2hlT25JdGVtU2l6ZUNoYW5nZSxcbiAgICAgIHZhbGlkYXRlUHJvcHMgPSBfcmVmLnZhbGlkYXRlUHJvcHM7XG4gIHJldHVybiBfY2xhc3MgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9QdXJlQ29tcG9uZW50KSB7XG4gICAgX2luaGVyaXRzTG9vc2UoTGlzdCwgX1B1cmVDb21wb25lbnQpO1xuXG4gICAgLy8gQWx3YXlzIHVzZSBleHBsaWNpdCBjb25zdHJ1Y3RvciBmb3IgUmVhY3QgY29tcG9uZW50cy5cbiAgICAvLyBJdCBwcm9kdWNlcyBsZXNzIGNvZGUgYWZ0ZXIgdHJhbnNwaWxhdGlvbi4gKCMyNilcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdXNlbGVzcy1jb25zdHJ1Y3RvclxuICAgIGZ1bmN0aW9uIExpc3QocHJvcHMpIHtcbiAgICAgIHZhciBfdGhpcztcblxuICAgICAgX3RoaXMgPSBfUHVyZUNvbXBvbmVudC5jYWxsKHRoaXMsIHByb3BzKSB8fCB0aGlzO1xuICAgICAgX3RoaXMuX2luc3RhbmNlUHJvcHMgPSBpbml0SW5zdGFuY2VQcm9wcyhfdGhpcy5wcm9wcywgX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgICAgX3RoaXMuX291dGVyUmVmID0gdm9pZCAwO1xuICAgICAgX3RoaXMuX3Jlc2V0SXNTY3JvbGxpbmdUaW1lb3V0SWQgPSBudWxsO1xuICAgICAgX3RoaXMuc3RhdGUgPSB7XG4gICAgICAgIGluc3RhbmNlOiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSxcbiAgICAgICAgaXNTY3JvbGxpbmc6IGZhbHNlLFxuICAgICAgICBzY3JvbGxEaXJlY3Rpb246ICdmb3J3YXJkJyxcbiAgICAgICAgc2Nyb2xsT2Zmc2V0OiB0eXBlb2YgX3RoaXMucHJvcHMuaW5pdGlhbFNjcm9sbE9mZnNldCA9PT0gJ251bWJlcicgPyBfdGhpcy5wcm9wcy5pbml0aWFsU2Nyb2xsT2Zmc2V0IDogMCxcbiAgICAgICAgc2Nyb2xsVXBkYXRlV2FzUmVxdWVzdGVkOiBmYWxzZVxuICAgICAgfTtcbiAgICAgIF90aGlzLl9jYWxsT25JdGVtc1JlbmRlcmVkID0gdm9pZCAwO1xuICAgICAgX3RoaXMuX2NhbGxPbkl0ZW1zUmVuZGVyZWQgPSBtZW1vaXplT25lKGZ1bmN0aW9uIChvdmVyc2NhblN0YXJ0SW5kZXgsIG92ZXJzY2FuU3RvcEluZGV4LCB2aXNpYmxlU3RhcnRJbmRleCwgdmlzaWJsZVN0b3BJbmRleCkge1xuICAgICAgICByZXR1cm4gX3RoaXMucHJvcHMub25JdGVtc1JlbmRlcmVkKHtcbiAgICAgICAgICBvdmVyc2NhblN0YXJ0SW5kZXg6IG92ZXJzY2FuU3RhcnRJbmRleCxcbiAgICAgICAgICBvdmVyc2NhblN0b3BJbmRleDogb3ZlcnNjYW5TdG9wSW5kZXgsXG4gICAgICAgICAgdmlzaWJsZVN0YXJ0SW5kZXg6IHZpc2libGVTdGFydEluZGV4LFxuICAgICAgICAgIHZpc2libGVTdG9wSW5kZXg6IHZpc2libGVTdG9wSW5kZXhcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIF90aGlzLl9jYWxsT25TY3JvbGwgPSB2b2lkIDA7XG4gICAgICBfdGhpcy5fY2FsbE9uU2Nyb2xsID0gbWVtb2l6ZU9uZShmdW5jdGlvbiAoc2Nyb2xsRGlyZWN0aW9uLCBzY3JvbGxPZmZzZXQsIHNjcm9sbFVwZGF0ZVdhc1JlcXVlc3RlZCkge1xuICAgICAgICByZXR1cm4gX3RoaXMucHJvcHMub25TY3JvbGwoe1xuICAgICAgICAgIHNjcm9sbERpcmVjdGlvbjogc2Nyb2xsRGlyZWN0aW9uLFxuICAgICAgICAgIHNjcm9sbE9mZnNldDogc2Nyb2xsT2Zmc2V0LFxuICAgICAgICAgIHNjcm9sbFVwZGF0ZVdhc1JlcXVlc3RlZDogc2Nyb2xsVXBkYXRlV2FzUmVxdWVzdGVkXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBfdGhpcy5fZ2V0SXRlbVN0eWxlID0gdm9pZCAwO1xuXG4gICAgICBfdGhpcy5fZ2V0SXRlbVN0eWxlID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgIHZhciBfdGhpcyRwcm9wcyA9IF90aGlzLnByb3BzLFxuICAgICAgICAgICAgZGlyZWN0aW9uID0gX3RoaXMkcHJvcHMuZGlyZWN0aW9uLFxuICAgICAgICAgICAgaXRlbVNpemUgPSBfdGhpcyRwcm9wcy5pdGVtU2l6ZSxcbiAgICAgICAgICAgIGxheW91dCA9IF90aGlzJHByb3BzLmxheW91dDtcblxuICAgICAgICB2YXIgaXRlbVN0eWxlQ2FjaGUgPSBfdGhpcy5fZ2V0SXRlbVN0eWxlQ2FjaGUoc2hvdWxkUmVzZXRTdHlsZUNhY2hlT25JdGVtU2l6ZUNoYW5nZSAmJiBpdGVtU2l6ZSwgc2hvdWxkUmVzZXRTdHlsZUNhY2hlT25JdGVtU2l6ZUNoYW5nZSAmJiBsYXlvdXQsIHNob3VsZFJlc2V0U3R5bGVDYWNoZU9uSXRlbVNpemVDaGFuZ2UgJiYgZGlyZWN0aW9uKTtcblxuICAgICAgICB2YXIgc3R5bGU7XG5cbiAgICAgICAgaWYgKGl0ZW1TdHlsZUNhY2hlLmhhc093blByb3BlcnR5KGluZGV4KSkge1xuICAgICAgICAgIHN0eWxlID0gaXRlbVN0eWxlQ2FjaGVbaW5kZXhdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBfb2Zmc2V0ID0gZ2V0SXRlbU9mZnNldChfdGhpcy5wcm9wcywgaW5kZXgsIF90aGlzLl9pbnN0YW5jZVByb3BzKTtcblxuICAgICAgICAgIHZhciBzaXplID0gZ2V0SXRlbVNpemUoX3RoaXMucHJvcHMsIGluZGV4LCBfdGhpcy5faW5zdGFuY2VQcm9wcyk7IC8vIFRPRE8gRGVwcmVjYXRlIGRpcmVjdGlvbiBcImhvcml6b250YWxcIlxuXG4gICAgICAgICAgdmFyIGlzSG9yaXpvbnRhbCA9IGRpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnIHx8IGxheW91dCA9PT0gJ2hvcml6b250YWwnO1xuICAgICAgICAgIHZhciBpc1J0bCA9IGRpcmVjdGlvbiA9PT0gJ3J0bCc7XG4gICAgICAgICAgdmFyIG9mZnNldEhvcml6b250YWwgPSBpc0hvcml6b250YWwgPyBfb2Zmc2V0IDogMDtcbiAgICAgICAgICBpdGVtU3R5bGVDYWNoZVtpbmRleF0gPSBzdHlsZSA9IHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICAgICAgbGVmdDogaXNSdGwgPyB1bmRlZmluZWQgOiBvZmZzZXRIb3Jpem9udGFsLFxuICAgICAgICAgICAgcmlnaHQ6IGlzUnRsID8gb2Zmc2V0SG9yaXpvbnRhbCA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHRvcDogIWlzSG9yaXpvbnRhbCA/IF9vZmZzZXQgOiAwLFxuICAgICAgICAgICAgaGVpZ2h0OiAhaXNIb3Jpem9udGFsID8gc2l6ZSA6ICcxMDAlJyxcbiAgICAgICAgICAgIHdpZHRoOiBpc0hvcml6b250YWwgPyBzaXplIDogJzEwMCUnXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzdHlsZTtcbiAgICAgIH07XG5cbiAgICAgIF90aGlzLl9nZXRJdGVtU3R5bGVDYWNoZSA9IHZvaWQgMDtcbiAgICAgIF90aGlzLl9nZXRJdGVtU3R5bGVDYWNoZSA9IG1lbW9pemVPbmUoZnVuY3Rpb24gKF8sIF9fLCBfX18pIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgfSk7XG5cbiAgICAgIF90aGlzLl9vblNjcm9sbEhvcml6b250YWwgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIF9ldmVudCRjdXJyZW50VGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldCxcbiAgICAgICAgICAgIGNsaWVudFdpZHRoID0gX2V2ZW50JGN1cnJlbnRUYXJnZXQuY2xpZW50V2lkdGgsXG4gICAgICAgICAgICBzY3JvbGxMZWZ0ID0gX2V2ZW50JGN1cnJlbnRUYXJnZXQuc2Nyb2xsTGVmdCxcbiAgICAgICAgICAgIHNjcm9sbFdpZHRoID0gX2V2ZW50JGN1cnJlbnRUYXJnZXQuc2Nyb2xsV2lkdGg7XG5cbiAgICAgICAgX3RoaXMuc2V0U3RhdGUoZnVuY3Rpb24gKHByZXZTdGF0ZSkge1xuICAgICAgICAgIGlmIChwcmV2U3RhdGUuc2Nyb2xsT2Zmc2V0ID09PSBzY3JvbGxMZWZ0KSB7XG4gICAgICAgICAgICAvLyBTY3JvbGwgcG9zaXRpb24gbWF5IGhhdmUgYmVlbiB1cGRhdGVkIGJ5IGNETS9jRFUsXG4gICAgICAgICAgICAvLyBJbiB3aGljaCBjYXNlIHdlIGRvbid0IG5lZWQgdG8gdHJpZ2dlciBhbm90aGVyIHJlbmRlcixcbiAgICAgICAgICAgIC8vIEFuZCB3ZSBkb24ndCB3YW50IHRvIHVwZGF0ZSBzdGF0ZS5pc1Njcm9sbGluZy5cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSBfdGhpcy5wcm9wcy5kaXJlY3Rpb247XG4gICAgICAgICAgdmFyIHNjcm9sbE9mZnNldCA9IHNjcm9sbExlZnQ7XG5cbiAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAncnRsJykge1xuICAgICAgICAgICAgLy8gVFJJQ0tZIEFjY29yZGluZyB0byB0aGUgc3BlYywgc2Nyb2xsTGVmdCBzaG91bGQgYmUgbmVnYXRpdmUgZm9yIFJUTCBhbGlnbmVkIGVsZW1lbnRzLlxuICAgICAgICAgICAgLy8gVGhpcyBpcyBub3QgdGhlIGNhc2UgZm9yIGFsbCBicm93c2VycyB0aG91Z2ggKGUuZy4gQ2hyb21lIHJlcG9ydHMgdmFsdWVzIGFzIHBvc2l0aXZlLCBtZWFzdXJlZCByZWxhdGl2ZSB0byB0aGUgbGVmdCkuXG4gICAgICAgICAgICAvLyBJdCdzIGFsc28gZWFzaWVyIGZvciB0aGlzIGNvbXBvbmVudCBpZiB3ZSBjb252ZXJ0IG9mZnNldHMgdG8gdGhlIHNhbWUgZm9ybWF0IGFzIHRoZXkgd291bGQgYmUgaW4gZm9yIGx0ci5cbiAgICAgICAgICAgIC8vIFNvIHRoZSBzaW1wbGVzdCBzb2x1dGlvbiBpcyB0byBkZXRlcm1pbmUgd2hpY2ggYnJvd3NlciBiZWhhdmlvciB3ZSdyZSBkZWFsaW5nIHdpdGgsIGFuZCBjb252ZXJ0IGJhc2VkIG9uIGl0LlxuICAgICAgICAgICAgc3dpdGNoIChnZXRSVExPZmZzZXRUeXBlKCkpIHtcbiAgICAgICAgICAgICAgY2FzZSAnbmVnYXRpdmUnOlxuICAgICAgICAgICAgICAgIHNjcm9sbE9mZnNldCA9IC1zY3JvbGxMZWZ0O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgJ3Bvc2l0aXZlLWRlc2NlbmRpbmcnOlxuICAgICAgICAgICAgICAgIHNjcm9sbE9mZnNldCA9IHNjcm9sbFdpZHRoIC0gY2xpZW50V2lkdGggLSBzY3JvbGxMZWZ0O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gLy8gUHJldmVudCBTYWZhcmkncyBlbGFzdGljIHNjcm9sbGluZyBmcm9tIGNhdXNpbmcgdmlzdWFsIHNoYWtpbmcgd2hlbiBzY3JvbGxpbmcgcGFzdCBib3VuZHMuXG5cblxuICAgICAgICAgIHNjcm9sbE9mZnNldCA9IE1hdGgubWF4KDAsIE1hdGgubWluKHNjcm9sbE9mZnNldCwgc2Nyb2xsV2lkdGggLSBjbGllbnRXaWR0aCkpO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpc1Njcm9sbGluZzogdHJ1ZSxcbiAgICAgICAgICAgIHNjcm9sbERpcmVjdGlvbjogcHJldlN0YXRlLnNjcm9sbE9mZnNldCA8IHNjcm9sbExlZnQgPyAnZm9yd2FyZCcgOiAnYmFja3dhcmQnLFxuICAgICAgICAgICAgc2Nyb2xsT2Zmc2V0OiBzY3JvbGxPZmZzZXQsXG4gICAgICAgICAgICBzY3JvbGxVcGRhdGVXYXNSZXF1ZXN0ZWQ6IGZhbHNlXG4gICAgICAgICAgfTtcbiAgICAgICAgfSwgX3RoaXMuX3Jlc2V0SXNTY3JvbGxpbmdEZWJvdW5jZWQpO1xuICAgICAgfTtcblxuICAgICAgX3RoaXMuX29uU2Nyb2xsVmVydGljYWwgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIF9ldmVudCRjdXJyZW50VGFyZ2V0MiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQsXG4gICAgICAgICAgICBjbGllbnRIZWlnaHQgPSBfZXZlbnQkY3VycmVudFRhcmdldDIuY2xpZW50SGVpZ2h0LFxuICAgICAgICAgICAgc2Nyb2xsSGVpZ2h0ID0gX2V2ZW50JGN1cnJlbnRUYXJnZXQyLnNjcm9sbEhlaWdodCxcbiAgICAgICAgICAgIHNjcm9sbFRvcCA9IF9ldmVudCRjdXJyZW50VGFyZ2V0Mi5zY3JvbGxUb3A7XG5cbiAgICAgICAgX3RoaXMuc2V0U3RhdGUoZnVuY3Rpb24gKHByZXZTdGF0ZSkge1xuICAgICAgICAgIGlmIChwcmV2U3RhdGUuc2Nyb2xsT2Zmc2V0ID09PSBzY3JvbGxUb3ApIHtcbiAgICAgICAgICAgIC8vIFNjcm9sbCBwb3NpdGlvbiBtYXkgaGF2ZSBiZWVuIHVwZGF0ZWQgYnkgY0RNL2NEVSxcbiAgICAgICAgICAgIC8vIEluIHdoaWNoIGNhc2Ugd2UgZG9uJ3QgbmVlZCB0byB0cmlnZ2VyIGFub3RoZXIgcmVuZGVyLFxuICAgICAgICAgICAgLy8gQW5kIHdlIGRvbid0IHdhbnQgdG8gdXBkYXRlIHN0YXRlLmlzU2Nyb2xsaW5nLlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgfSAvLyBQcmV2ZW50IFNhZmFyaSdzIGVsYXN0aWMgc2Nyb2xsaW5nIGZyb20gY2F1c2luZyB2aXN1YWwgc2hha2luZyB3aGVuIHNjcm9sbGluZyBwYXN0IGJvdW5kcy5cblxuXG4gICAgICAgICAgdmFyIHNjcm9sbE9mZnNldCA9IE1hdGgubWF4KDAsIE1hdGgubWluKHNjcm9sbFRvcCwgc2Nyb2xsSGVpZ2h0IC0gY2xpZW50SGVpZ2h0KSk7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlzU2Nyb2xsaW5nOiB0cnVlLFxuICAgICAgICAgICAgc2Nyb2xsRGlyZWN0aW9uOiBwcmV2U3RhdGUuc2Nyb2xsT2Zmc2V0IDwgc2Nyb2xsT2Zmc2V0ID8gJ2ZvcndhcmQnIDogJ2JhY2t3YXJkJyxcbiAgICAgICAgICAgIHNjcm9sbE9mZnNldDogc2Nyb2xsT2Zmc2V0LFxuICAgICAgICAgICAgc2Nyb2xsVXBkYXRlV2FzUmVxdWVzdGVkOiBmYWxzZVxuICAgICAgICAgIH07XG4gICAgICAgIH0sIF90aGlzLl9yZXNldElzU2Nyb2xsaW5nRGVib3VuY2VkKTtcbiAgICAgIH07XG5cbiAgICAgIF90aGlzLl9vdXRlclJlZlNldHRlciA9IGZ1bmN0aW9uIChyZWYpIHtcbiAgICAgICAgdmFyIG91dGVyUmVmID0gX3RoaXMucHJvcHMub3V0ZXJSZWY7XG4gICAgICAgIF90aGlzLl9vdXRlclJlZiA9IHJlZjtcblxuICAgICAgICBpZiAodHlwZW9mIG91dGVyUmVmID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgb3V0ZXJSZWYocmVmKTtcbiAgICAgICAgfSBlbHNlIGlmIChvdXRlclJlZiAhPSBudWxsICYmIHR5cGVvZiBvdXRlclJlZiA9PT0gJ29iamVjdCcgJiYgb3V0ZXJSZWYuaGFzT3duUHJvcGVydHkoJ2N1cnJlbnQnKSkge1xuICAgICAgICAgIG91dGVyUmVmLmN1cnJlbnQgPSByZWY7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIF90aGlzLl9yZXNldElzU2Nyb2xsaW5nRGVib3VuY2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoX3RoaXMuX3Jlc2V0SXNTY3JvbGxpbmdUaW1lb3V0SWQgIT09IG51bGwpIHtcbiAgICAgICAgICBjYW5jZWxUaW1lb3V0KF90aGlzLl9yZXNldElzU2Nyb2xsaW5nVGltZW91dElkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIF90aGlzLl9yZXNldElzU2Nyb2xsaW5nVGltZW91dElkID0gcmVxdWVzdFRpbWVvdXQoX3RoaXMuX3Jlc2V0SXNTY3JvbGxpbmcsIElTX1NDUk9MTElOR19ERUJPVU5DRV9JTlRFUlZBTCQxKTtcbiAgICAgIH07XG5cbiAgICAgIF90aGlzLl9yZXNldElzU2Nyb2xsaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpcy5fcmVzZXRJc1Njcm9sbGluZ1RpbWVvdXRJZCA9IG51bGw7XG5cbiAgICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIGlzU2Nyb2xsaW5nOiBmYWxzZVxuICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgLy8gQ2xlYXIgc3R5bGUgY2FjaGUgYWZ0ZXIgc3RhdGUgdXBkYXRlIGhhcyBiZWVuIGNvbW1pdHRlZC5cbiAgICAgICAgICAvLyBUaGlzIHdheSB3ZSBkb24ndCBicmVhayBwdXJlIHNDVSBmb3IgaXRlbXMgdGhhdCBkb24ndCB1c2UgaXNTY3JvbGxpbmcgcGFyYW0uXG4gICAgICAgICAgX3RoaXMuX2dldEl0ZW1TdHlsZUNhY2hlKC0xLCBudWxsKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgTGlzdC5nZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMgPSBmdW5jdGlvbiBnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMobmV4dFByb3BzLCBwcmV2U3RhdGUpIHtcbiAgICAgIHZhbGlkYXRlU2hhcmVkUHJvcHMkMShuZXh0UHJvcHMsIHByZXZTdGF0ZSk7XG4gICAgICB2YWxpZGF0ZVByb3BzKG5leHRQcm9wcyk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuXG4gICAgdmFyIF9wcm90byA9IExpc3QucHJvdG90eXBlO1xuXG4gICAgX3Byb3RvLnNjcm9sbFRvID0gZnVuY3Rpb24gc2Nyb2xsVG8oc2Nyb2xsT2Zmc2V0KSB7XG4gICAgICBzY3JvbGxPZmZzZXQgPSBNYXRoLm1heCgwLCBzY3JvbGxPZmZzZXQpO1xuICAgICAgdGhpcy5zZXRTdGF0ZShmdW5jdGlvbiAocHJldlN0YXRlKSB7XG4gICAgICAgIGlmIChwcmV2U3RhdGUuc2Nyb2xsT2Zmc2V0ID09PSBzY3JvbGxPZmZzZXQpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc2Nyb2xsRGlyZWN0aW9uOiBwcmV2U3RhdGUuc2Nyb2xsT2Zmc2V0IDwgc2Nyb2xsT2Zmc2V0ID8gJ2ZvcndhcmQnIDogJ2JhY2t3YXJkJyxcbiAgICAgICAgICBzY3JvbGxPZmZzZXQ6IHNjcm9sbE9mZnNldCxcbiAgICAgICAgICBzY3JvbGxVcGRhdGVXYXNSZXF1ZXN0ZWQ6IHRydWVcbiAgICAgICAgfTtcbiAgICAgIH0sIHRoaXMuX3Jlc2V0SXNTY3JvbGxpbmdEZWJvdW5jZWQpO1xuICAgIH07XG5cbiAgICBfcHJvdG8uc2Nyb2xsVG9JdGVtID0gZnVuY3Rpb24gc2Nyb2xsVG9JdGVtKGluZGV4LCBhbGlnbikge1xuICAgICAgaWYgKGFsaWduID09PSB2b2lkIDApIHtcbiAgICAgICAgYWxpZ24gPSAnYXV0byc7XG4gICAgICB9XG5cbiAgICAgIHZhciBfdGhpcyRwcm9wczIgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGl0ZW1Db3VudCA9IF90aGlzJHByb3BzMi5pdGVtQ291bnQsXG4gICAgICAgICAgbGF5b3V0ID0gX3RoaXMkcHJvcHMyLmxheW91dDtcbiAgICAgIHZhciBzY3JvbGxPZmZzZXQgPSB0aGlzLnN0YXRlLnNjcm9sbE9mZnNldDtcbiAgICAgIGluZGV4ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oaW5kZXgsIGl0ZW1Db3VudCAtIDEpKTsgLy8gVGhlIHNjcm9sbGJhciBzaXplIHNob3VsZCBiZSBjb25zaWRlcmVkIHdoZW4gc2Nyb2xsaW5nIGFuIGl0ZW0gaW50byB2aWV3LCB0byBlbnN1cmUgaXQncyBmdWxseSB2aXNpYmxlLlxuICAgICAgLy8gQnV0IHdlIG9ubHkgbmVlZCB0byBhY2NvdW50IGZvciBpdHMgc2l6ZSB3aGVuIGl0J3MgYWN0dWFsbHkgdmlzaWJsZS5cbiAgICAgIC8vIFRoaXMgaXMgYW4gZWRnZSBjYXNlIGZvciBsaXN0czsgbm9ybWFsbHkgdGhleSBvbmx5IHNjcm9sbCBpbiB0aGUgZG9taW5hbnQgZGlyZWN0aW9uLlxuXG4gICAgICB2YXIgc2Nyb2xsYmFyU2l6ZSA9IDA7XG5cbiAgICAgIGlmICh0aGlzLl9vdXRlclJlZikge1xuICAgICAgICB2YXIgb3V0ZXJSZWYgPSB0aGlzLl9vdXRlclJlZjtcblxuICAgICAgICBpZiAobGF5b3V0ID09PSAndmVydGljYWwnKSB7XG4gICAgICAgICAgc2Nyb2xsYmFyU2l6ZSA9IG91dGVyUmVmLnNjcm9sbFdpZHRoID4gb3V0ZXJSZWYuY2xpZW50V2lkdGggPyBnZXRTY3JvbGxiYXJTaXplKCkgOiAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNjcm9sbGJhclNpemUgPSBvdXRlclJlZi5zY3JvbGxIZWlnaHQgPiBvdXRlclJlZi5jbGllbnRIZWlnaHQgPyBnZXRTY3JvbGxiYXJTaXplKCkgOiAwO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc2Nyb2xsVG8oZ2V0T2Zmc2V0Rm9ySW5kZXhBbmRBbGlnbm1lbnQodGhpcy5wcm9wcywgaW5kZXgsIGFsaWduLCBzY3JvbGxPZmZzZXQsIHRoaXMuX2luc3RhbmNlUHJvcHMsIHNjcm9sbGJhclNpemUpKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICB2YXIgX3RoaXMkcHJvcHMzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBkaXJlY3Rpb24gPSBfdGhpcyRwcm9wczMuZGlyZWN0aW9uLFxuICAgICAgICAgIGluaXRpYWxTY3JvbGxPZmZzZXQgPSBfdGhpcyRwcm9wczMuaW5pdGlhbFNjcm9sbE9mZnNldCxcbiAgICAgICAgICBsYXlvdXQgPSBfdGhpcyRwcm9wczMubGF5b3V0O1xuXG4gICAgICBpZiAodHlwZW9mIGluaXRpYWxTY3JvbGxPZmZzZXQgPT09ICdudW1iZXInICYmIHRoaXMuX291dGVyUmVmICE9IG51bGwpIHtcbiAgICAgICAgdmFyIG91dGVyUmVmID0gdGhpcy5fb3V0ZXJSZWY7IC8vIFRPRE8gRGVwcmVjYXRlIGRpcmVjdGlvbiBcImhvcml6b250YWxcIlxuXG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdob3Jpem9udGFsJyB8fCBsYXlvdXQgPT09ICdob3Jpem9udGFsJykge1xuICAgICAgICAgIG91dGVyUmVmLnNjcm9sbExlZnQgPSBpbml0aWFsU2Nyb2xsT2Zmc2V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG91dGVyUmVmLnNjcm9sbFRvcCA9IGluaXRpYWxTY3JvbGxPZmZzZXQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5fY2FsbFByb3BzQ2FsbGJhY2tzKCk7XG4gICAgfTtcblxuICAgIF9wcm90by5jb21wb25lbnREaWRVcGRhdGUgPSBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUoKSB7XG4gICAgICB2YXIgX3RoaXMkcHJvcHM0ID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBkaXJlY3Rpb24gPSBfdGhpcyRwcm9wczQuZGlyZWN0aW9uLFxuICAgICAgICAgIGxheW91dCA9IF90aGlzJHByb3BzNC5sYXlvdXQ7XG4gICAgICB2YXIgX3RoaXMkc3RhdGUgPSB0aGlzLnN0YXRlLFxuICAgICAgICAgIHNjcm9sbE9mZnNldCA9IF90aGlzJHN0YXRlLnNjcm9sbE9mZnNldCxcbiAgICAgICAgICBzY3JvbGxVcGRhdGVXYXNSZXF1ZXN0ZWQgPSBfdGhpcyRzdGF0ZS5zY3JvbGxVcGRhdGVXYXNSZXF1ZXN0ZWQ7XG5cbiAgICAgIGlmIChzY3JvbGxVcGRhdGVXYXNSZXF1ZXN0ZWQgJiYgdGhpcy5fb3V0ZXJSZWYgIT0gbnVsbCkge1xuICAgICAgICB2YXIgb3V0ZXJSZWYgPSB0aGlzLl9vdXRlclJlZjsgLy8gVE9ETyBEZXByZWNhdGUgZGlyZWN0aW9uIFwiaG9yaXpvbnRhbFwiXG5cbiAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnIHx8IGxheW91dCA9PT0gJ2hvcml6b250YWwnKSB7XG4gICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ3J0bCcpIHtcbiAgICAgICAgICAgIC8vIFRSSUNLWSBBY2NvcmRpbmcgdG8gdGhlIHNwZWMsIHNjcm9sbExlZnQgc2hvdWxkIGJlIG5lZ2F0aXZlIGZvciBSVEwgYWxpZ25lZCBlbGVtZW50cy5cbiAgICAgICAgICAgIC8vIFRoaXMgaXMgbm90IHRoZSBjYXNlIGZvciBhbGwgYnJvd3NlcnMgdGhvdWdoIChlLmcuIENocm9tZSByZXBvcnRzIHZhbHVlcyBhcyBwb3NpdGl2ZSwgbWVhc3VyZWQgcmVsYXRpdmUgdG8gdGhlIGxlZnQpLlxuICAgICAgICAgICAgLy8gU28gd2UgbmVlZCB0byBkZXRlcm1pbmUgd2hpY2ggYnJvd3NlciBiZWhhdmlvciB3ZSdyZSBkZWFsaW5nIHdpdGgsIGFuZCBtaW1pYyBpdC5cbiAgICAgICAgICAgIHN3aXRjaCAoZ2V0UlRMT2Zmc2V0VHlwZSgpKSB7XG4gICAgICAgICAgICAgIGNhc2UgJ25lZ2F0aXZlJzpcbiAgICAgICAgICAgICAgICBvdXRlclJlZi5zY3JvbGxMZWZ0ID0gLXNjcm9sbE9mZnNldDtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlICdwb3NpdGl2ZS1hc2NlbmRpbmcnOlxuICAgICAgICAgICAgICAgIG91dGVyUmVmLnNjcm9sbExlZnQgPSBzY3JvbGxPZmZzZXQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB2YXIgY2xpZW50V2lkdGggPSBvdXRlclJlZi5jbGllbnRXaWR0aCxcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsV2lkdGggPSBvdXRlclJlZi5zY3JvbGxXaWR0aDtcbiAgICAgICAgICAgICAgICBvdXRlclJlZi5zY3JvbGxMZWZ0ID0gc2Nyb2xsV2lkdGggLSBjbGllbnRXaWR0aCAtIHNjcm9sbE9mZnNldDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb3V0ZXJSZWYuc2Nyb2xsTGVmdCA9IHNjcm9sbE9mZnNldDtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb3V0ZXJSZWYuc2Nyb2xsVG9wID0gc2Nyb2xsT2Zmc2V0O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2NhbGxQcm9wc0NhbGxiYWNrcygpO1xuICAgIH07XG5cbiAgICBfcHJvdG8uY29tcG9uZW50V2lsbFVubW91bnQgPSBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgIGlmICh0aGlzLl9yZXNldElzU2Nyb2xsaW5nVGltZW91dElkICE9PSBudWxsKSB7XG4gICAgICAgIGNhbmNlbFRpbWVvdXQodGhpcy5fcmVzZXRJc1Njcm9sbGluZ1RpbWVvdXRJZCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9wcm90by5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3RoaXMkcHJvcHM1ID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBjaGlsZHJlbiA9IF90aGlzJHByb3BzNS5jaGlsZHJlbixcbiAgICAgICAgICBjbGFzc05hbWUgPSBfdGhpcyRwcm9wczUuY2xhc3NOYW1lLFxuICAgICAgICAgIGRpcmVjdGlvbiA9IF90aGlzJHByb3BzNS5kaXJlY3Rpb24sXG4gICAgICAgICAgaGVpZ2h0ID0gX3RoaXMkcHJvcHM1LmhlaWdodCxcbiAgICAgICAgICBpbm5lclJlZiA9IF90aGlzJHByb3BzNS5pbm5lclJlZixcbiAgICAgICAgICBpbm5lckVsZW1lbnRUeXBlID0gX3RoaXMkcHJvcHM1LmlubmVyRWxlbWVudFR5cGUsXG4gICAgICAgICAgaW5uZXJUYWdOYW1lID0gX3RoaXMkcHJvcHM1LmlubmVyVGFnTmFtZSxcbiAgICAgICAgICBpdGVtQ291bnQgPSBfdGhpcyRwcm9wczUuaXRlbUNvdW50LFxuICAgICAgICAgIGl0ZW1EYXRhID0gX3RoaXMkcHJvcHM1Lml0ZW1EYXRhLFxuICAgICAgICAgIF90aGlzJHByb3BzNSRpdGVtS2V5ID0gX3RoaXMkcHJvcHM1Lml0ZW1LZXksXG4gICAgICAgICAgaXRlbUtleSA9IF90aGlzJHByb3BzNSRpdGVtS2V5ID09PSB2b2lkIDAgPyBkZWZhdWx0SXRlbUtleSQxIDogX3RoaXMkcHJvcHM1JGl0ZW1LZXksXG4gICAgICAgICAgbGF5b3V0ID0gX3RoaXMkcHJvcHM1LmxheW91dCxcbiAgICAgICAgICBvdXRlckVsZW1lbnRUeXBlID0gX3RoaXMkcHJvcHM1Lm91dGVyRWxlbWVudFR5cGUsXG4gICAgICAgICAgb3V0ZXJUYWdOYW1lID0gX3RoaXMkcHJvcHM1Lm91dGVyVGFnTmFtZSxcbiAgICAgICAgICBzdHlsZSA9IF90aGlzJHByb3BzNS5zdHlsZSxcbiAgICAgICAgICB1c2VJc1Njcm9sbGluZyA9IF90aGlzJHByb3BzNS51c2VJc1Njcm9sbGluZyxcbiAgICAgICAgICB3aWR0aCA9IF90aGlzJHByb3BzNS53aWR0aDtcbiAgICAgIHZhciBpc1Njcm9sbGluZyA9IHRoaXMuc3RhdGUuaXNTY3JvbGxpbmc7IC8vIFRPRE8gRGVwcmVjYXRlIGRpcmVjdGlvbiBcImhvcml6b250YWxcIlxuXG4gICAgICB2YXIgaXNIb3Jpem9udGFsID0gZGlyZWN0aW9uID09PSAnaG9yaXpvbnRhbCcgfHwgbGF5b3V0ID09PSAnaG9yaXpvbnRhbCc7XG4gICAgICB2YXIgb25TY3JvbGwgPSBpc0hvcml6b250YWwgPyB0aGlzLl9vblNjcm9sbEhvcml6b250YWwgOiB0aGlzLl9vblNjcm9sbFZlcnRpY2FsO1xuXG4gICAgICB2YXIgX3RoaXMkX2dldFJhbmdlVG9SZW5kID0gdGhpcy5fZ2V0UmFuZ2VUb1JlbmRlcigpLFxuICAgICAgICAgIHN0YXJ0SW5kZXggPSBfdGhpcyRfZ2V0UmFuZ2VUb1JlbmRbMF0sXG4gICAgICAgICAgc3RvcEluZGV4ID0gX3RoaXMkX2dldFJhbmdlVG9SZW5kWzFdO1xuXG4gICAgICB2YXIgaXRlbXMgPSBbXTtcblxuICAgICAgaWYgKGl0ZW1Db3VudCA+IDApIHtcbiAgICAgICAgZm9yICh2YXIgX2luZGV4ID0gc3RhcnRJbmRleDsgX2luZGV4IDw9IHN0b3BJbmRleDsgX2luZGV4KyspIHtcbiAgICAgICAgICBpdGVtcy5wdXNoKGNyZWF0ZUVsZW1lbnQoY2hpbGRyZW4sIHtcbiAgICAgICAgICAgIGRhdGE6IGl0ZW1EYXRhLFxuICAgICAgICAgICAga2V5OiBpdGVtS2V5KF9pbmRleCwgaXRlbURhdGEpLFxuICAgICAgICAgICAgaW5kZXg6IF9pbmRleCxcbiAgICAgICAgICAgIGlzU2Nyb2xsaW5nOiB1c2VJc1Njcm9sbGluZyA/IGlzU2Nyb2xsaW5nIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgc3R5bGU6IHRoaXMuX2dldEl0ZW1TdHlsZShfaW5kZXgpXG4gICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICB9IC8vIFJlYWQgdGhpcyB2YWx1ZSBBRlRFUiBpdGVtcyBoYXZlIGJlZW4gY3JlYXRlZCxcbiAgICAgIC8vIFNvIHRoZWlyIGFjdHVhbCBzaXplcyAoaWYgdmFyaWFibGUpIGFyZSB0YWtlbiBpbnRvIGNvbnNpZGVyYXRpb24uXG5cblxuICAgICAgdmFyIGVzdGltYXRlZFRvdGFsU2l6ZSA9IGdldEVzdGltYXRlZFRvdGFsU2l6ZSh0aGlzLnByb3BzLCB0aGlzLl9pbnN0YW5jZVByb3BzKTtcbiAgICAgIHJldHVybiBjcmVhdGVFbGVtZW50KG91dGVyRWxlbWVudFR5cGUgfHwgb3V0ZXJUYWdOYW1lIHx8ICdkaXYnLCB7XG4gICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lLFxuICAgICAgICBvblNjcm9sbDogb25TY3JvbGwsXG4gICAgICAgIHJlZjogdGhpcy5fb3V0ZXJSZWZTZXR0ZXIsXG4gICAgICAgIHN0eWxlOiBfZXh0ZW5kcyh7XG4gICAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICAgICAgaGVpZ2h0OiBoZWlnaHQsXG4gICAgICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgICAgIG92ZXJmbG93OiAnYXV0bycsXG4gICAgICAgICAgV2Via2l0T3ZlcmZsb3dTY3JvbGxpbmc6ICd0b3VjaCcsXG4gICAgICAgICAgd2lsbENoYW5nZTogJ3RyYW5zZm9ybScsXG4gICAgICAgICAgZGlyZWN0aW9uOiBkaXJlY3Rpb25cbiAgICAgICAgfSwgc3R5bGUpXG4gICAgICB9LCBjcmVhdGVFbGVtZW50KGlubmVyRWxlbWVudFR5cGUgfHwgaW5uZXJUYWdOYW1lIHx8ICdkaXYnLCB7XG4gICAgICAgIGNoaWxkcmVuOiBpdGVtcyxcbiAgICAgICAgcmVmOiBpbm5lclJlZixcbiAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICBoZWlnaHQ6IGlzSG9yaXpvbnRhbCA/ICcxMDAlJyA6IGVzdGltYXRlZFRvdGFsU2l6ZSxcbiAgICAgICAgICBwb2ludGVyRXZlbnRzOiBpc1Njcm9sbGluZyA/ICdub25lJyA6IHVuZGVmaW5lZCxcbiAgICAgICAgICB3aWR0aDogaXNIb3Jpem9udGFsID8gZXN0aW1hdGVkVG90YWxTaXplIDogJzEwMCUnXG4gICAgICAgIH1cbiAgICAgIH0pKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLl9jYWxsUHJvcHNDYWxsYmFja3MgPSBmdW5jdGlvbiBfY2FsbFByb3BzQ2FsbGJhY2tzKCkge1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLnByb3BzLm9uSXRlbXNSZW5kZXJlZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB2YXIgaXRlbUNvdW50ID0gdGhpcy5wcm9wcy5pdGVtQ291bnQ7XG5cbiAgICAgICAgaWYgKGl0ZW1Db3VudCA+IDApIHtcbiAgICAgICAgICB2YXIgX3RoaXMkX2dldFJhbmdlVG9SZW5kMiA9IHRoaXMuX2dldFJhbmdlVG9SZW5kZXIoKSxcbiAgICAgICAgICAgICAgX292ZXJzY2FuU3RhcnRJbmRleCA9IF90aGlzJF9nZXRSYW5nZVRvUmVuZDJbMF0sXG4gICAgICAgICAgICAgIF9vdmVyc2NhblN0b3BJbmRleCA9IF90aGlzJF9nZXRSYW5nZVRvUmVuZDJbMV0sXG4gICAgICAgICAgICAgIF92aXNpYmxlU3RhcnRJbmRleCA9IF90aGlzJF9nZXRSYW5nZVRvUmVuZDJbMl0sXG4gICAgICAgICAgICAgIF92aXNpYmxlU3RvcEluZGV4ID0gX3RoaXMkX2dldFJhbmdlVG9SZW5kMlszXTtcblxuICAgICAgICAgIHRoaXMuX2NhbGxPbkl0ZW1zUmVuZGVyZWQoX292ZXJzY2FuU3RhcnRJbmRleCwgX292ZXJzY2FuU3RvcEluZGV4LCBfdmlzaWJsZVN0YXJ0SW5kZXgsIF92aXNpYmxlU3RvcEluZGV4KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIHRoaXMucHJvcHMub25TY3JvbGwgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdmFyIF90aGlzJHN0YXRlMiA9IHRoaXMuc3RhdGUsXG4gICAgICAgICAgICBfc2Nyb2xsRGlyZWN0aW9uID0gX3RoaXMkc3RhdGUyLnNjcm9sbERpcmVjdGlvbixcbiAgICAgICAgICAgIF9zY3JvbGxPZmZzZXQgPSBfdGhpcyRzdGF0ZTIuc2Nyb2xsT2Zmc2V0LFxuICAgICAgICAgICAgX3Njcm9sbFVwZGF0ZVdhc1JlcXVlc3RlZCA9IF90aGlzJHN0YXRlMi5zY3JvbGxVcGRhdGVXYXNSZXF1ZXN0ZWQ7XG5cbiAgICAgICAgdGhpcy5fY2FsbE9uU2Nyb2xsKF9zY3JvbGxEaXJlY3Rpb24sIF9zY3JvbGxPZmZzZXQsIF9zY3JvbGxVcGRhdGVXYXNSZXF1ZXN0ZWQpO1xuICAgICAgfVxuICAgIH0gLy8gTGF6aWx5IGNyZWF0ZSBhbmQgY2FjaGUgaXRlbSBzdHlsZXMgd2hpbGUgc2Nyb2xsaW5nLFxuICAgIC8vIFNvIHRoYXQgcHVyZSBjb21wb25lbnQgc0NVIHdpbGwgcHJldmVudCByZS1yZW5kZXJzLlxuICAgIC8vIFdlIG1haW50YWluIHRoaXMgY2FjaGUsIGFuZCBwYXNzIGEgc3R5bGUgcHJvcCByYXRoZXIgdGhhbiBpbmRleCxcbiAgICAvLyBTbyB0aGF0IExpc3QgY2FuIGNsZWFyIGNhY2hlZCBzdHlsZXMgYW5kIGZvcmNlIGl0ZW0gcmUtcmVuZGVyIGlmIG5lY2Vzc2FyeS5cbiAgICA7XG5cbiAgICBfcHJvdG8uX2dldFJhbmdlVG9SZW5kZXIgPSBmdW5jdGlvbiBfZ2V0UmFuZ2VUb1JlbmRlcigpIHtcbiAgICAgIHZhciBfdGhpcyRwcm9wczYgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGl0ZW1Db3VudCA9IF90aGlzJHByb3BzNi5pdGVtQ291bnQsXG4gICAgICAgICAgb3ZlcnNjYW5Db3VudCA9IF90aGlzJHByb3BzNi5vdmVyc2NhbkNvdW50O1xuICAgICAgdmFyIF90aGlzJHN0YXRlMyA9IHRoaXMuc3RhdGUsXG4gICAgICAgICAgaXNTY3JvbGxpbmcgPSBfdGhpcyRzdGF0ZTMuaXNTY3JvbGxpbmcsXG4gICAgICAgICAgc2Nyb2xsRGlyZWN0aW9uID0gX3RoaXMkc3RhdGUzLnNjcm9sbERpcmVjdGlvbixcbiAgICAgICAgICBzY3JvbGxPZmZzZXQgPSBfdGhpcyRzdGF0ZTMuc2Nyb2xsT2Zmc2V0O1xuXG4gICAgICBpZiAoaXRlbUNvdW50ID09PSAwKSB7XG4gICAgICAgIHJldHVybiBbMCwgMCwgMCwgMF07XG4gICAgICB9XG5cbiAgICAgIHZhciBzdGFydEluZGV4ID0gZ2V0U3RhcnRJbmRleEZvck9mZnNldCh0aGlzLnByb3BzLCBzY3JvbGxPZmZzZXQsIHRoaXMuX2luc3RhbmNlUHJvcHMpO1xuICAgICAgdmFyIHN0b3BJbmRleCA9IGdldFN0b3BJbmRleEZvclN0YXJ0SW5kZXgodGhpcy5wcm9wcywgc3RhcnRJbmRleCwgc2Nyb2xsT2Zmc2V0LCB0aGlzLl9pbnN0YW5jZVByb3BzKTsgLy8gT3ZlcnNjYW4gYnkgb25lIGl0ZW0gaW4gZWFjaCBkaXJlY3Rpb24gc28gdGhhdCB0YWIvZm9jdXMgd29ya3MuXG4gICAgICAvLyBJZiB0aGVyZSBpc24ndCBhdCBsZWFzdCBvbmUgZXh0cmEgaXRlbSwgdGFiIGxvb3BzIGJhY2sgYXJvdW5kLlxuXG4gICAgICB2YXIgb3ZlcnNjYW5CYWNrd2FyZCA9ICFpc1Njcm9sbGluZyB8fCBzY3JvbGxEaXJlY3Rpb24gPT09ICdiYWNrd2FyZCcgPyBNYXRoLm1heCgxLCBvdmVyc2NhbkNvdW50KSA6IDE7XG4gICAgICB2YXIgb3ZlcnNjYW5Gb3J3YXJkID0gIWlzU2Nyb2xsaW5nIHx8IHNjcm9sbERpcmVjdGlvbiA9PT0gJ2ZvcndhcmQnID8gTWF0aC5tYXgoMSwgb3ZlcnNjYW5Db3VudCkgOiAxO1xuICAgICAgcmV0dXJuIFtNYXRoLm1heCgwLCBzdGFydEluZGV4IC0gb3ZlcnNjYW5CYWNrd2FyZCksIE1hdGgubWF4KDAsIE1hdGgubWluKGl0ZW1Db3VudCAtIDEsIHN0b3BJbmRleCArIG92ZXJzY2FuRm9yd2FyZCkpLCBzdGFydEluZGV4LCBzdG9wSW5kZXhdO1xuICAgIH07XG5cbiAgICByZXR1cm4gTGlzdDtcbiAgfShQdXJlQ29tcG9uZW50KSwgX2NsYXNzLmRlZmF1bHRQcm9wcyA9IHtcbiAgICBkaXJlY3Rpb246ICdsdHInLFxuICAgIGl0ZW1EYXRhOiB1bmRlZmluZWQsXG4gICAgbGF5b3V0OiAndmVydGljYWwnLFxuICAgIG92ZXJzY2FuQ291bnQ6IDIsXG4gICAgdXNlSXNTY3JvbGxpbmc6IGZhbHNlXG4gIH0sIF9jbGFzcztcbn0gLy8gTk9URTogSSBjb25zaWRlcmVkIGZ1cnRoZXIgd3JhcHBpbmcgaW5kaXZpZHVhbCBpdGVtcyB3aXRoIGEgcHVyZSBMaXN0SXRlbSBjb21wb25lbnQuXG4vLyBUaGlzIHdvdWxkIGF2b2lkIGV2ZXIgY2FsbGluZyB0aGUgcmVuZGVyIGZ1bmN0aW9uIGZvciB0aGUgc2FtZSBpbmRleCBtb3JlIHRoYW4gb25jZSxcbi8vIEJ1dCBpdCB3b3VsZCBhbHNvIGFkZCB0aGUgb3ZlcmhlYWQgb2YgYSBsb3Qgb2YgY29tcG9uZW50cy9maWJlcnMuXG4vLyBJIGFzc3VtZSBwZW9wbGUgYWxyZWFkeSBkbyB0aGlzIChyZW5kZXIgZnVuY3Rpb24gcmV0dXJuaW5nIGEgY2xhc3MgY29tcG9uZW50KSxcbi8vIFNvIG15IGRvaW5nIGl0IHdvdWxkIGp1c3QgdW5uZWNlc3NhcmlseSBkb3VibGUgdGhlIHdyYXBwZXJzLlxuXG52YXIgdmFsaWRhdGVTaGFyZWRQcm9wcyQxID0gZnVuY3Rpb24gdmFsaWRhdGVTaGFyZWRQcm9wcyhfcmVmMiwgX3JlZjMpIHtcbiAgdmFyIGNoaWxkcmVuID0gX3JlZjIuY2hpbGRyZW4sXG4gICAgICBkaXJlY3Rpb24gPSBfcmVmMi5kaXJlY3Rpb24sXG4gICAgICBoZWlnaHQgPSBfcmVmMi5oZWlnaHQsXG4gICAgICBsYXlvdXQgPSBfcmVmMi5sYXlvdXQsXG4gICAgICBpbm5lclRhZ05hbWUgPSBfcmVmMi5pbm5lclRhZ05hbWUsXG4gICAgICBvdXRlclRhZ05hbWUgPSBfcmVmMi5vdXRlclRhZ05hbWUsXG4gICAgICB3aWR0aCA9IF9yZWYyLndpZHRoO1xuICB2YXIgaW5zdGFuY2UgPSBfcmVmMy5pbnN0YW5jZTtcblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGlmIChpbm5lclRhZ05hbWUgIT0gbnVsbCB8fCBvdXRlclRhZ05hbWUgIT0gbnVsbCkge1xuICAgICAgaWYgKGRldldhcm5pbmdzVGFnTmFtZSQxICYmICFkZXZXYXJuaW5nc1RhZ05hbWUkMS5oYXMoaW5zdGFuY2UpKSB7XG4gICAgICAgIGRldldhcm5pbmdzVGFnTmFtZSQxLmFkZChpbnN0YW5jZSk7XG4gICAgICAgIGNvbnNvbGUud2FybignVGhlIGlubmVyVGFnTmFtZSBhbmQgb3V0ZXJUYWdOYW1lIHByb3BzIGhhdmUgYmVlbiBkZXByZWNhdGVkLiAnICsgJ1BsZWFzZSB1c2UgdGhlIGlubmVyRWxlbWVudFR5cGUgYW5kIG91dGVyRWxlbWVudFR5cGUgcHJvcHMgaW5zdGVhZC4nKTtcbiAgICAgIH1cbiAgICB9IC8vIFRPRE8gRGVwcmVjYXRlIGRpcmVjdGlvbiBcImhvcml6b250YWxcIlxuXG5cbiAgICB2YXIgaXNIb3Jpem9udGFsID0gZGlyZWN0aW9uID09PSAnaG9yaXpvbnRhbCcgfHwgbGF5b3V0ID09PSAnaG9yaXpvbnRhbCc7XG5cbiAgICBzd2l0Y2ggKGRpcmVjdGlvbikge1xuICAgICAgY2FzZSAnaG9yaXpvbnRhbCc6XG4gICAgICBjYXNlICd2ZXJ0aWNhbCc6XG4gICAgICAgIGlmIChkZXZXYXJuaW5nc0RpcmVjdGlvbiAmJiAhZGV2V2FybmluZ3NEaXJlY3Rpb24uaGFzKGluc3RhbmNlKSkge1xuICAgICAgICAgIGRldldhcm5pbmdzRGlyZWN0aW9uLmFkZChpbnN0YW5jZSk7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdUaGUgZGlyZWN0aW9uIHByb3Agc2hvdWxkIGJlIGVpdGhlciBcImx0clwiIChkZWZhdWx0KSBvciBcInJ0bFwiLiAnICsgJ1BsZWFzZSB1c2UgdGhlIGxheW91dCBwcm9wIHRvIHNwZWNpZnkgXCJ2ZXJ0aWNhbFwiIChkZWZhdWx0KSBvciBcImhvcml6b250YWxcIiBvcmllbnRhdGlvbi4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdsdHInOlxuICAgICAgY2FzZSAncnRsJzpcbiAgICAgICAgLy8gVmFsaWQgdmFsdWVzXG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBFcnJvcignQW4gaW52YWxpZCBcImRpcmVjdGlvblwiIHByb3AgaGFzIGJlZW4gc3BlY2lmaWVkLiAnICsgJ1ZhbHVlIHNob3VsZCBiZSBlaXRoZXIgXCJsdHJcIiBvciBcInJ0bFwiLiAnICsgKFwiXFxcIlwiICsgZGlyZWN0aW9uICsgXCJcXFwiIHdhcyBzcGVjaWZpZWQuXCIpKTtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKGxheW91dCkge1xuICAgICAgY2FzZSAnaG9yaXpvbnRhbCc6XG4gICAgICBjYXNlICd2ZXJ0aWNhbCc6XG4gICAgICAgIC8vIFZhbGlkIHZhbHVlc1xuICAgICAgICBicmVhaztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgRXJyb3IoJ0FuIGludmFsaWQgXCJsYXlvdXRcIiBwcm9wIGhhcyBiZWVuIHNwZWNpZmllZC4gJyArICdWYWx1ZSBzaG91bGQgYmUgZWl0aGVyIFwiaG9yaXpvbnRhbFwiIG9yIFwidmVydGljYWxcIi4gJyArIChcIlxcXCJcIiArIGxheW91dCArIFwiXFxcIiB3YXMgc3BlY2lmaWVkLlwiKSk7XG4gICAgfVxuXG4gICAgaWYgKGNoaWxkcmVuID09IG51bGwpIHtcbiAgICAgIHRocm93IEVycm9yKCdBbiBpbnZhbGlkIFwiY2hpbGRyZW5cIiBwcm9wIGhhcyBiZWVuIHNwZWNpZmllZC4gJyArICdWYWx1ZSBzaG91bGQgYmUgYSBSZWFjdCBjb21wb25lbnQuICcgKyAoXCJcXFwiXCIgKyAoY2hpbGRyZW4gPT09IG51bGwgPyAnbnVsbCcgOiB0eXBlb2YgY2hpbGRyZW4pICsgXCJcXFwiIHdhcyBzcGVjaWZpZWQuXCIpKTtcbiAgICB9XG5cbiAgICBpZiAoaXNIb3Jpem9udGFsICYmIHR5cGVvZiB3aWR0aCAhPT0gJ251bWJlcicpIHtcbiAgICAgIHRocm93IEVycm9yKCdBbiBpbnZhbGlkIFwid2lkdGhcIiBwcm9wIGhhcyBiZWVuIHNwZWNpZmllZC4gJyArICdIb3Jpem9udGFsIGxpc3RzIG11c3Qgc3BlY2lmeSBhIG51bWJlciBmb3Igd2lkdGguICcgKyAoXCJcXFwiXCIgKyAod2lkdGggPT09IG51bGwgPyAnbnVsbCcgOiB0eXBlb2Ygd2lkdGgpICsgXCJcXFwiIHdhcyBzcGVjaWZpZWQuXCIpKTtcbiAgICB9IGVsc2UgaWYgKCFpc0hvcml6b250YWwgJiYgdHlwZW9mIGhlaWdodCAhPT0gJ251bWJlcicpIHtcbiAgICAgIHRocm93IEVycm9yKCdBbiBpbnZhbGlkIFwiaGVpZ2h0XCIgcHJvcCBoYXMgYmVlbiBzcGVjaWZpZWQuICcgKyAnVmVydGljYWwgbGlzdHMgbXVzdCBzcGVjaWZ5IGEgbnVtYmVyIGZvciBoZWlnaHQuICcgKyAoXCJcXFwiXCIgKyAoaGVpZ2h0ID09PSBudWxsID8gJ251bGwnIDogdHlwZW9mIGhlaWdodCkgKyBcIlxcXCIgd2FzIHNwZWNpZmllZC5cIikpO1xuICAgIH1cbiAgfVxufTtcblxudmFyIERFRkFVTFRfRVNUSU1BVEVEX0lURU1fU0laRSQxID0gNTA7XG5cbnZhciBnZXRJdGVtTWV0YWRhdGEkMSA9IGZ1bmN0aW9uIGdldEl0ZW1NZXRhZGF0YShwcm9wcywgaW5kZXgsIGluc3RhbmNlUHJvcHMpIHtcbiAgdmFyIF9yZWYgPSBwcm9wcyxcbiAgICAgIGl0ZW1TaXplID0gX3JlZi5pdGVtU2l6ZTtcbiAgdmFyIGl0ZW1NZXRhZGF0YU1hcCA9IGluc3RhbmNlUHJvcHMuaXRlbU1ldGFkYXRhTWFwLFxuICAgICAgbGFzdE1lYXN1cmVkSW5kZXggPSBpbnN0YW5jZVByb3BzLmxhc3RNZWFzdXJlZEluZGV4O1xuXG4gIGlmIChpbmRleCA+IGxhc3RNZWFzdXJlZEluZGV4KSB7XG4gICAgdmFyIG9mZnNldCA9IDA7XG5cbiAgICBpZiAobGFzdE1lYXN1cmVkSW5kZXggPj0gMCkge1xuICAgICAgdmFyIGl0ZW1NZXRhZGF0YSA9IGl0ZW1NZXRhZGF0YU1hcFtsYXN0TWVhc3VyZWRJbmRleF07XG4gICAgICBvZmZzZXQgPSBpdGVtTWV0YWRhdGEub2Zmc2V0ICsgaXRlbU1ldGFkYXRhLnNpemU7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IGxhc3RNZWFzdXJlZEluZGV4ICsgMTsgaSA8PSBpbmRleDsgaSsrKSB7XG4gICAgICB2YXIgc2l6ZSA9IGl0ZW1TaXplKGkpO1xuICAgICAgaXRlbU1ldGFkYXRhTWFwW2ldID0ge1xuICAgICAgICBvZmZzZXQ6IG9mZnNldCxcbiAgICAgICAgc2l6ZTogc2l6ZVxuICAgICAgfTtcbiAgICAgIG9mZnNldCArPSBzaXplO1xuICAgIH1cblxuICAgIGluc3RhbmNlUHJvcHMubGFzdE1lYXN1cmVkSW5kZXggPSBpbmRleDtcbiAgfVxuXG4gIHJldHVybiBpdGVtTWV0YWRhdGFNYXBbaW5kZXhdO1xufTtcblxudmFyIGZpbmROZWFyZXN0SXRlbSQxID0gZnVuY3Rpb24gZmluZE5lYXJlc3RJdGVtKHByb3BzLCBpbnN0YW5jZVByb3BzLCBvZmZzZXQpIHtcbiAgdmFyIGl0ZW1NZXRhZGF0YU1hcCA9IGluc3RhbmNlUHJvcHMuaXRlbU1ldGFkYXRhTWFwLFxuICAgICAgbGFzdE1lYXN1cmVkSW5kZXggPSBpbnN0YW5jZVByb3BzLmxhc3RNZWFzdXJlZEluZGV4O1xuICB2YXIgbGFzdE1lYXN1cmVkSXRlbU9mZnNldCA9IGxhc3RNZWFzdXJlZEluZGV4ID4gMCA/IGl0ZW1NZXRhZGF0YU1hcFtsYXN0TWVhc3VyZWRJbmRleF0ub2Zmc2V0IDogMDtcblxuICBpZiAobGFzdE1lYXN1cmVkSXRlbU9mZnNldCA+PSBvZmZzZXQpIHtcbiAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IG1lYXN1cmVkIGl0ZW1zIHdpdGhpbiB0aGlzIHJhbmdlIGp1c3QgdXNlIGEgYmluYXJ5IHNlYXJjaCBhcyBpdCdzIGZhc3Rlci5cbiAgICByZXR1cm4gZmluZE5lYXJlc3RJdGVtQmluYXJ5U2VhcmNoJDEocHJvcHMsIGluc3RhbmNlUHJvcHMsIGxhc3RNZWFzdXJlZEluZGV4LCAwLCBvZmZzZXQpO1xuICB9IGVsc2Uge1xuICAgIC8vIElmIHdlIGhhdmVuJ3QgeWV0IG1lYXN1cmVkIHRoaXMgaGlnaCwgZmFsbGJhY2sgdG8gYW4gZXhwb25lbnRpYWwgc2VhcmNoIHdpdGggYW4gaW5uZXIgYmluYXJ5IHNlYXJjaC5cbiAgICAvLyBUaGUgZXhwb25lbnRpYWwgc2VhcmNoIGF2b2lkcyBwcmUtY29tcHV0aW5nIHNpemVzIGZvciB0aGUgZnVsbCBzZXQgb2YgaXRlbXMgYXMgYSBiaW5hcnkgc2VhcmNoIHdvdWxkLlxuICAgIC8vIFRoZSBvdmVyYWxsIGNvbXBsZXhpdHkgZm9yIHRoaXMgYXBwcm9hY2ggaXMgTyhsb2cgbikuXG4gICAgcmV0dXJuIGZpbmROZWFyZXN0SXRlbUV4cG9uZW50aWFsU2VhcmNoJDEocHJvcHMsIGluc3RhbmNlUHJvcHMsIE1hdGgubWF4KDAsIGxhc3RNZWFzdXJlZEluZGV4KSwgb2Zmc2V0KTtcbiAgfVxufTtcblxudmFyIGZpbmROZWFyZXN0SXRlbUJpbmFyeVNlYXJjaCQxID0gZnVuY3Rpb24gZmluZE5lYXJlc3RJdGVtQmluYXJ5U2VhcmNoKHByb3BzLCBpbnN0YW5jZVByb3BzLCBoaWdoLCBsb3csIG9mZnNldCkge1xuICB3aGlsZSAobG93IDw9IGhpZ2gpIHtcbiAgICB2YXIgbWlkZGxlID0gbG93ICsgTWF0aC5mbG9vcigoaGlnaCAtIGxvdykgLyAyKTtcbiAgICB2YXIgY3VycmVudE9mZnNldCA9IGdldEl0ZW1NZXRhZGF0YSQxKHByb3BzLCBtaWRkbGUsIGluc3RhbmNlUHJvcHMpLm9mZnNldDtcblxuICAgIGlmIChjdXJyZW50T2Zmc2V0ID09PSBvZmZzZXQpIHtcbiAgICAgIHJldHVybiBtaWRkbGU7XG4gICAgfSBlbHNlIGlmIChjdXJyZW50T2Zmc2V0IDwgb2Zmc2V0KSB7XG4gICAgICBsb3cgPSBtaWRkbGUgKyAxO1xuICAgIH0gZWxzZSBpZiAoY3VycmVudE9mZnNldCA+IG9mZnNldCkge1xuICAgICAgaGlnaCA9IG1pZGRsZSAtIDE7XG4gICAgfVxuICB9XG5cbiAgaWYgKGxvdyA+IDApIHtcbiAgICByZXR1cm4gbG93IC0gMTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gMDtcbiAgfVxufTtcblxudmFyIGZpbmROZWFyZXN0SXRlbUV4cG9uZW50aWFsU2VhcmNoJDEgPSBmdW5jdGlvbiBmaW5kTmVhcmVzdEl0ZW1FeHBvbmVudGlhbFNlYXJjaChwcm9wcywgaW5zdGFuY2VQcm9wcywgaW5kZXgsIG9mZnNldCkge1xuICB2YXIgaXRlbUNvdW50ID0gcHJvcHMuaXRlbUNvdW50O1xuICB2YXIgaW50ZXJ2YWwgPSAxO1xuXG4gIHdoaWxlIChpbmRleCA8IGl0ZW1Db3VudCAmJiBnZXRJdGVtTWV0YWRhdGEkMShwcm9wcywgaW5kZXgsIGluc3RhbmNlUHJvcHMpLm9mZnNldCA8IG9mZnNldCkge1xuICAgIGluZGV4ICs9IGludGVydmFsO1xuICAgIGludGVydmFsICo9IDI7XG4gIH1cblxuICByZXR1cm4gZmluZE5lYXJlc3RJdGVtQmluYXJ5U2VhcmNoJDEocHJvcHMsIGluc3RhbmNlUHJvcHMsIE1hdGgubWluKGluZGV4LCBpdGVtQ291bnQgLSAxKSwgTWF0aC5mbG9vcihpbmRleCAvIDIpLCBvZmZzZXQpO1xufTtcblxudmFyIGdldEVzdGltYXRlZFRvdGFsU2l6ZSA9IGZ1bmN0aW9uIGdldEVzdGltYXRlZFRvdGFsU2l6ZShfcmVmMiwgX3JlZjMpIHtcbiAgdmFyIGl0ZW1Db3VudCA9IF9yZWYyLml0ZW1Db3VudDtcbiAgdmFyIGl0ZW1NZXRhZGF0YU1hcCA9IF9yZWYzLml0ZW1NZXRhZGF0YU1hcCxcbiAgICAgIGVzdGltYXRlZEl0ZW1TaXplID0gX3JlZjMuZXN0aW1hdGVkSXRlbVNpemUsXG4gICAgICBsYXN0TWVhc3VyZWRJbmRleCA9IF9yZWYzLmxhc3RNZWFzdXJlZEluZGV4O1xuICB2YXIgdG90YWxTaXplT2ZNZWFzdXJlZEl0ZW1zID0gMDsgLy8gRWRnZSBjYXNlIGNoZWNrIGZvciB3aGVuIHRoZSBudW1iZXIgb2YgaXRlbXMgZGVjcmVhc2VzIHdoaWxlIGEgc2Nyb2xsIGlzIGluIHByb2dyZXNzLlxuICAvLyBodHRwczovL2dpdGh1Yi5jb20vYnZhdWdobi9yZWFjdC13aW5kb3cvcHVsbC8xMzhcblxuICBpZiAobGFzdE1lYXN1cmVkSW5kZXggPj0gaXRlbUNvdW50KSB7XG4gICAgbGFzdE1lYXN1cmVkSW5kZXggPSBpdGVtQ291bnQgLSAxO1xuICB9XG5cbiAgaWYgKGxhc3RNZWFzdXJlZEluZGV4ID49IDApIHtcbiAgICB2YXIgaXRlbU1ldGFkYXRhID0gaXRlbU1ldGFkYXRhTWFwW2xhc3RNZWFzdXJlZEluZGV4XTtcbiAgICB0b3RhbFNpemVPZk1lYXN1cmVkSXRlbXMgPSBpdGVtTWV0YWRhdGEub2Zmc2V0ICsgaXRlbU1ldGFkYXRhLnNpemU7XG4gIH1cblxuICB2YXIgbnVtVW5tZWFzdXJlZEl0ZW1zID0gaXRlbUNvdW50IC0gbGFzdE1lYXN1cmVkSW5kZXggLSAxO1xuICB2YXIgdG90YWxTaXplT2ZVbm1lYXN1cmVkSXRlbXMgPSBudW1Vbm1lYXN1cmVkSXRlbXMgKiBlc3RpbWF0ZWRJdGVtU2l6ZTtcbiAgcmV0dXJuIHRvdGFsU2l6ZU9mTWVhc3VyZWRJdGVtcyArIHRvdGFsU2l6ZU9mVW5tZWFzdXJlZEl0ZW1zO1xufTtcblxudmFyIFZhcmlhYmxlU2l6ZUxpc3QgPSAvKiNfX1BVUkVfXyovY3JlYXRlTGlzdENvbXBvbmVudCh7XG4gIGdldEl0ZW1PZmZzZXQ6IGZ1bmN0aW9uIGdldEl0ZW1PZmZzZXQocHJvcHMsIGluZGV4LCBpbnN0YW5jZVByb3BzKSB7XG4gICAgcmV0dXJuIGdldEl0ZW1NZXRhZGF0YSQxKHByb3BzLCBpbmRleCwgaW5zdGFuY2VQcm9wcykub2Zmc2V0O1xuICB9LFxuICBnZXRJdGVtU2l6ZTogZnVuY3Rpb24gZ2V0SXRlbVNpemUocHJvcHMsIGluZGV4LCBpbnN0YW5jZVByb3BzKSB7XG4gICAgcmV0dXJuIGluc3RhbmNlUHJvcHMuaXRlbU1ldGFkYXRhTWFwW2luZGV4XS5zaXplO1xuICB9LFxuICBnZXRFc3RpbWF0ZWRUb3RhbFNpemU6IGdldEVzdGltYXRlZFRvdGFsU2l6ZSxcbiAgZ2V0T2Zmc2V0Rm9ySW5kZXhBbmRBbGlnbm1lbnQ6IGZ1bmN0aW9uIGdldE9mZnNldEZvckluZGV4QW5kQWxpZ25tZW50KHByb3BzLCBpbmRleCwgYWxpZ24sIHNjcm9sbE9mZnNldCwgaW5zdGFuY2VQcm9wcywgc2Nyb2xsYmFyU2l6ZSkge1xuICAgIHZhciBkaXJlY3Rpb24gPSBwcm9wcy5kaXJlY3Rpb24sXG4gICAgICAgIGhlaWdodCA9IHByb3BzLmhlaWdodCxcbiAgICAgICAgbGF5b3V0ID0gcHJvcHMubGF5b3V0LFxuICAgICAgICB3aWR0aCA9IHByb3BzLndpZHRoOyAvLyBUT0RPIERlcHJlY2F0ZSBkaXJlY3Rpb24gXCJob3Jpem9udGFsXCJcblxuICAgIHZhciBpc0hvcml6b250YWwgPSBkaXJlY3Rpb24gPT09ICdob3Jpem9udGFsJyB8fCBsYXlvdXQgPT09ICdob3Jpem9udGFsJztcbiAgICB2YXIgc2l6ZSA9IGlzSG9yaXpvbnRhbCA/IHdpZHRoIDogaGVpZ2h0O1xuICAgIHZhciBpdGVtTWV0YWRhdGEgPSBnZXRJdGVtTWV0YWRhdGEkMShwcm9wcywgaW5kZXgsIGluc3RhbmNlUHJvcHMpOyAvLyBHZXQgZXN0aW1hdGVkIHRvdGFsIHNpemUgYWZ0ZXIgSXRlbU1ldGFkYXRhIGlzIGNvbXB1dGVkLFxuICAgIC8vIFRvIGVuc3VyZSBpdCByZWZsZWN0cyBhY3R1YWwgbWVhc3VyZW1lbnRzIGluc3RlYWQgb2YganVzdCBlc3RpbWF0ZXMuXG5cbiAgICB2YXIgZXN0aW1hdGVkVG90YWxTaXplID0gZ2V0RXN0aW1hdGVkVG90YWxTaXplKHByb3BzLCBpbnN0YW5jZVByb3BzKTtcbiAgICB2YXIgbWF4T2Zmc2V0ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oZXN0aW1hdGVkVG90YWxTaXplIC0gc2l6ZSwgaXRlbU1ldGFkYXRhLm9mZnNldCkpO1xuICAgIHZhciBtaW5PZmZzZXQgPSBNYXRoLm1heCgwLCBpdGVtTWV0YWRhdGEub2Zmc2V0IC0gc2l6ZSArIGl0ZW1NZXRhZGF0YS5zaXplICsgc2Nyb2xsYmFyU2l6ZSk7XG5cbiAgICBpZiAoYWxpZ24gPT09ICdzbWFydCcpIHtcbiAgICAgIGlmIChzY3JvbGxPZmZzZXQgPj0gbWluT2Zmc2V0IC0gc2l6ZSAmJiBzY3JvbGxPZmZzZXQgPD0gbWF4T2Zmc2V0ICsgc2l6ZSkge1xuICAgICAgICBhbGlnbiA9ICdhdXRvJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFsaWduID0gJ2NlbnRlcic7XG4gICAgICB9XG4gICAgfVxuXG4gICAgc3dpdGNoIChhbGlnbikge1xuICAgICAgY2FzZSAnc3RhcnQnOlxuICAgICAgICByZXR1cm4gbWF4T2Zmc2V0O1xuXG4gICAgICBjYXNlICdlbmQnOlxuICAgICAgICByZXR1cm4gbWluT2Zmc2V0O1xuXG4gICAgICBjYXNlICdjZW50ZXInOlxuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChtaW5PZmZzZXQgKyAobWF4T2Zmc2V0IC0gbWluT2Zmc2V0KSAvIDIpO1xuXG4gICAgICBjYXNlICdhdXRvJzpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChzY3JvbGxPZmZzZXQgPj0gbWluT2Zmc2V0ICYmIHNjcm9sbE9mZnNldCA8PSBtYXhPZmZzZXQpIHtcbiAgICAgICAgICByZXR1cm4gc2Nyb2xsT2Zmc2V0O1xuICAgICAgICB9IGVsc2UgaWYgKHNjcm9sbE9mZnNldCA8IG1pbk9mZnNldCkge1xuICAgICAgICAgIHJldHVybiBtaW5PZmZzZXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIG1heE9mZnNldDtcbiAgICAgICAgfVxuXG4gICAgfVxuICB9LFxuICBnZXRTdGFydEluZGV4Rm9yT2Zmc2V0OiBmdW5jdGlvbiBnZXRTdGFydEluZGV4Rm9yT2Zmc2V0KHByb3BzLCBvZmZzZXQsIGluc3RhbmNlUHJvcHMpIHtcbiAgICByZXR1cm4gZmluZE5lYXJlc3RJdGVtJDEocHJvcHMsIGluc3RhbmNlUHJvcHMsIG9mZnNldCk7XG4gIH0sXG4gIGdldFN0b3BJbmRleEZvclN0YXJ0SW5kZXg6IGZ1bmN0aW9uIGdldFN0b3BJbmRleEZvclN0YXJ0SW5kZXgocHJvcHMsIHN0YXJ0SW5kZXgsIHNjcm9sbE9mZnNldCwgaW5zdGFuY2VQcm9wcykge1xuICAgIHZhciBkaXJlY3Rpb24gPSBwcm9wcy5kaXJlY3Rpb24sXG4gICAgICAgIGhlaWdodCA9IHByb3BzLmhlaWdodCxcbiAgICAgICAgaXRlbUNvdW50ID0gcHJvcHMuaXRlbUNvdW50LFxuICAgICAgICBsYXlvdXQgPSBwcm9wcy5sYXlvdXQsXG4gICAgICAgIHdpZHRoID0gcHJvcHMud2lkdGg7IC8vIFRPRE8gRGVwcmVjYXRlIGRpcmVjdGlvbiBcImhvcml6b250YWxcIlxuXG4gICAgdmFyIGlzSG9yaXpvbnRhbCA9IGRpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnIHx8IGxheW91dCA9PT0gJ2hvcml6b250YWwnO1xuICAgIHZhciBzaXplID0gaXNIb3Jpem9udGFsID8gd2lkdGggOiBoZWlnaHQ7XG4gICAgdmFyIGl0ZW1NZXRhZGF0YSA9IGdldEl0ZW1NZXRhZGF0YSQxKHByb3BzLCBzdGFydEluZGV4LCBpbnN0YW5jZVByb3BzKTtcbiAgICB2YXIgbWF4T2Zmc2V0ID0gc2Nyb2xsT2Zmc2V0ICsgc2l6ZTtcbiAgICB2YXIgb2Zmc2V0ID0gaXRlbU1ldGFkYXRhLm9mZnNldCArIGl0ZW1NZXRhZGF0YS5zaXplO1xuICAgIHZhciBzdG9wSW5kZXggPSBzdGFydEluZGV4O1xuXG4gICAgd2hpbGUgKHN0b3BJbmRleCA8IGl0ZW1Db3VudCAtIDEgJiYgb2Zmc2V0IDwgbWF4T2Zmc2V0KSB7XG4gICAgICBzdG9wSW5kZXgrKztcbiAgICAgIG9mZnNldCArPSBnZXRJdGVtTWV0YWRhdGEkMShwcm9wcywgc3RvcEluZGV4LCBpbnN0YW5jZVByb3BzKS5zaXplO1xuICAgIH1cblxuICAgIHJldHVybiBzdG9wSW5kZXg7XG4gIH0sXG4gIGluaXRJbnN0YW5jZVByb3BzOiBmdW5jdGlvbiBpbml0SW5zdGFuY2VQcm9wcyhwcm9wcywgaW5zdGFuY2UpIHtcbiAgICB2YXIgX3JlZjQgPSBwcm9wcyxcbiAgICAgICAgZXN0aW1hdGVkSXRlbVNpemUgPSBfcmVmNC5lc3RpbWF0ZWRJdGVtU2l6ZTtcbiAgICB2YXIgaW5zdGFuY2VQcm9wcyA9IHtcbiAgICAgIGl0ZW1NZXRhZGF0YU1hcDoge30sXG4gICAgICBlc3RpbWF0ZWRJdGVtU2l6ZTogZXN0aW1hdGVkSXRlbVNpemUgfHwgREVGQVVMVF9FU1RJTUFURURfSVRFTV9TSVpFJDEsXG4gICAgICBsYXN0TWVhc3VyZWRJbmRleDogLTFcbiAgICB9O1xuXG4gICAgaW5zdGFuY2UucmVzZXRBZnRlckluZGV4ID0gZnVuY3Rpb24gKGluZGV4LCBzaG91bGRGb3JjZVVwZGF0ZSkge1xuICAgICAgaWYgKHNob3VsZEZvcmNlVXBkYXRlID09PSB2b2lkIDApIHtcbiAgICAgICAgc2hvdWxkRm9yY2VVcGRhdGUgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpbnN0YW5jZVByb3BzLmxhc3RNZWFzdXJlZEluZGV4ID0gTWF0aC5taW4oaW5zdGFuY2VQcm9wcy5sYXN0TWVhc3VyZWRJbmRleCwgaW5kZXggLSAxKTsgLy8gV2UgY291bGQgcG90ZW50aWFsbHkgb3B0aW1pemUgZnVydGhlciBieSBvbmx5IGV2aWN0aW5nIHN0eWxlcyBhZnRlciB0aGlzIGluZGV4LFxuICAgICAgLy8gQnV0IHNpbmNlIHN0eWxlcyBhcmUgb25seSBjYWNoZWQgd2hpbGUgc2Nyb2xsaW5nIGlzIGluIHByb2dyZXNzLVxuICAgICAgLy8gSXQgc2VlbXMgYW4gdW5uZWNlc3Nhcnkgb3B0aW1pemF0aW9uLlxuICAgICAgLy8gSXQncyB1bmxpa2VseSB0aGF0IHJlc2V0QWZ0ZXJJbmRleCgpIHdpbGwgYmUgY2FsbGVkIHdoaWxlIGEgdXNlciBpcyBzY3JvbGxpbmcuXG5cbiAgICAgIGluc3RhbmNlLl9nZXRJdGVtU3R5bGVDYWNoZSgtMSk7XG5cbiAgICAgIGlmIChzaG91bGRGb3JjZVVwZGF0ZSkge1xuICAgICAgICBpbnN0YW5jZS5mb3JjZVVwZGF0ZSgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gaW5zdGFuY2VQcm9wcztcbiAgfSxcbiAgc2hvdWxkUmVzZXRTdHlsZUNhY2hlT25JdGVtU2l6ZUNoYW5nZTogZmFsc2UsXG4gIHZhbGlkYXRlUHJvcHM6IGZ1bmN0aW9uIHZhbGlkYXRlUHJvcHMoX3JlZjUpIHtcbiAgICB2YXIgaXRlbVNpemUgPSBfcmVmNS5pdGVtU2l6ZTtcblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBpZiAodHlwZW9mIGl0ZW1TaXplICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRocm93IEVycm9yKCdBbiBpbnZhbGlkIFwiaXRlbVNpemVcIiBwcm9wIGhhcyBiZWVuIHNwZWNpZmllZC4gJyArICdWYWx1ZSBzaG91bGQgYmUgYSBmdW5jdGlvbi4gJyArIChcIlxcXCJcIiArIChpdGVtU2l6ZSA9PT0gbnVsbCA/ICdudWxsJyA6IHR5cGVvZiBpdGVtU2l6ZSkgKyBcIlxcXCIgd2FzIHNwZWNpZmllZC5cIikpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufSk7XG5cbnZhciBGaXhlZFNpemVHcmlkID0gLyojX19QVVJFX18qL2NyZWF0ZUdyaWRDb21wb25lbnQoe1xuICBnZXRDb2x1bW5PZmZzZXQ6IGZ1bmN0aW9uIGdldENvbHVtbk9mZnNldChfcmVmLCBpbmRleCkge1xuICAgIHZhciBjb2x1bW5XaWR0aCA9IF9yZWYuY29sdW1uV2lkdGg7XG4gICAgcmV0dXJuIGluZGV4ICogY29sdW1uV2lkdGg7XG4gIH0sXG4gIGdldENvbHVtbldpZHRoOiBmdW5jdGlvbiBnZXRDb2x1bW5XaWR0aChfcmVmMiwgaW5kZXgpIHtcbiAgICB2YXIgY29sdW1uV2lkdGggPSBfcmVmMi5jb2x1bW5XaWR0aDtcbiAgICByZXR1cm4gY29sdW1uV2lkdGg7XG4gIH0sXG4gIGdldFJvd09mZnNldDogZnVuY3Rpb24gZ2V0Um93T2Zmc2V0KF9yZWYzLCBpbmRleCkge1xuICAgIHZhciByb3dIZWlnaHQgPSBfcmVmMy5yb3dIZWlnaHQ7XG4gICAgcmV0dXJuIGluZGV4ICogcm93SGVpZ2h0O1xuICB9LFxuICBnZXRSb3dIZWlnaHQ6IGZ1bmN0aW9uIGdldFJvd0hlaWdodChfcmVmNCwgaW5kZXgpIHtcbiAgICB2YXIgcm93SGVpZ2h0ID0gX3JlZjQucm93SGVpZ2h0O1xuICAgIHJldHVybiByb3dIZWlnaHQ7XG4gIH0sXG4gIGdldEVzdGltYXRlZFRvdGFsSGVpZ2h0OiBmdW5jdGlvbiBnZXRFc3RpbWF0ZWRUb3RhbEhlaWdodChfcmVmNSkge1xuICAgIHZhciByb3dDb3VudCA9IF9yZWY1LnJvd0NvdW50LFxuICAgICAgICByb3dIZWlnaHQgPSBfcmVmNS5yb3dIZWlnaHQ7XG4gICAgcmV0dXJuIHJvd0hlaWdodCAqIHJvd0NvdW50O1xuICB9LFxuICBnZXRFc3RpbWF0ZWRUb3RhbFdpZHRoOiBmdW5jdGlvbiBnZXRFc3RpbWF0ZWRUb3RhbFdpZHRoKF9yZWY2KSB7XG4gICAgdmFyIGNvbHVtbkNvdW50ID0gX3JlZjYuY29sdW1uQ291bnQsXG4gICAgICAgIGNvbHVtbldpZHRoID0gX3JlZjYuY29sdW1uV2lkdGg7XG4gICAgcmV0dXJuIGNvbHVtbldpZHRoICogY29sdW1uQ291bnQ7XG4gIH0sXG4gIGdldE9mZnNldEZvckNvbHVtbkFuZEFsaWdubWVudDogZnVuY3Rpb24gZ2V0T2Zmc2V0Rm9yQ29sdW1uQW5kQWxpZ25tZW50KF9yZWY3LCBjb2x1bW5JbmRleCwgYWxpZ24sIHNjcm9sbExlZnQsIGluc3RhbmNlUHJvcHMsIHNjcm9sbGJhclNpemUpIHtcbiAgICB2YXIgY29sdW1uQ291bnQgPSBfcmVmNy5jb2x1bW5Db3VudCxcbiAgICAgICAgY29sdW1uV2lkdGggPSBfcmVmNy5jb2x1bW5XaWR0aCxcbiAgICAgICAgd2lkdGggPSBfcmVmNy53aWR0aDtcbiAgICB2YXIgbGFzdENvbHVtbk9mZnNldCA9IE1hdGgubWF4KDAsIGNvbHVtbkNvdW50ICogY29sdW1uV2lkdGggLSB3aWR0aCk7XG4gICAgdmFyIG1heE9mZnNldCA9IE1hdGgubWluKGxhc3RDb2x1bW5PZmZzZXQsIGNvbHVtbkluZGV4ICogY29sdW1uV2lkdGgpO1xuICAgIHZhciBtaW5PZmZzZXQgPSBNYXRoLm1heCgwLCBjb2x1bW5JbmRleCAqIGNvbHVtbldpZHRoIC0gd2lkdGggKyBzY3JvbGxiYXJTaXplICsgY29sdW1uV2lkdGgpO1xuXG4gICAgaWYgKGFsaWduID09PSAnc21hcnQnKSB7XG4gICAgICBpZiAoc2Nyb2xsTGVmdCA+PSBtaW5PZmZzZXQgLSB3aWR0aCAmJiBzY3JvbGxMZWZ0IDw9IG1heE9mZnNldCArIHdpZHRoKSB7XG4gICAgICAgIGFsaWduID0gJ2F1dG8nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWxpZ24gPSAnY2VudGVyJztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzd2l0Y2ggKGFsaWduKSB7XG4gICAgICBjYXNlICdzdGFydCc6XG4gICAgICAgIHJldHVybiBtYXhPZmZzZXQ7XG5cbiAgICAgIGNhc2UgJ2VuZCc6XG4gICAgICAgIHJldHVybiBtaW5PZmZzZXQ7XG5cbiAgICAgIGNhc2UgJ2NlbnRlcic6XG4gICAgICAgIC8vIFwiQ2VudGVyZWRcIiBvZmZzZXQgaXMgdXN1YWxseSB0aGUgYXZlcmFnZSBvZiB0aGUgbWluIGFuZCBtYXguXG4gICAgICAgIC8vIEJ1dCBuZWFyIHRoZSBlZGdlcyBvZiB0aGUgbGlzdCwgdGhpcyBkb2Vzbid0IGhvbGQgdHJ1ZS5cbiAgICAgICAgdmFyIG1pZGRsZU9mZnNldCA9IE1hdGgucm91bmQobWluT2Zmc2V0ICsgKG1heE9mZnNldCAtIG1pbk9mZnNldCkgLyAyKTtcblxuICAgICAgICBpZiAobWlkZGxlT2Zmc2V0IDwgTWF0aC5jZWlsKHdpZHRoIC8gMikpIHtcbiAgICAgICAgICByZXR1cm4gMDsgLy8gbmVhciB0aGUgYmVnaW5uaW5nXG4gICAgICAgIH0gZWxzZSBpZiAobWlkZGxlT2Zmc2V0ID4gbGFzdENvbHVtbk9mZnNldCArIE1hdGguZmxvb3Iod2lkdGggLyAyKSkge1xuICAgICAgICAgIHJldHVybiBsYXN0Q29sdW1uT2Zmc2V0OyAvLyBuZWFyIHRoZSBlbmRcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gbWlkZGxlT2Zmc2V0O1xuICAgICAgICB9XG5cbiAgICAgIGNhc2UgJ2F1dG8nOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKHNjcm9sbExlZnQgPj0gbWluT2Zmc2V0ICYmIHNjcm9sbExlZnQgPD0gbWF4T2Zmc2V0KSB7XG4gICAgICAgICAgcmV0dXJuIHNjcm9sbExlZnQ7XG4gICAgICAgIH0gZWxzZSBpZiAobWluT2Zmc2V0ID4gbWF4T2Zmc2V0KSB7XG4gICAgICAgICAgLy8gQmVjYXVzZSB3ZSBvbmx5IHRha2UgaW50byBhY2NvdW50IHRoZSBzY3JvbGxiYXIgc2l6ZSB3aGVuIGNhbGN1bGF0aW5nIG1pbk9mZnNldFxuICAgICAgICAgIC8vIHRoaXMgdmFsdWUgY2FuIGJlIGxhcmdlciB0aGFuIG1heE9mZnNldCB3aGVuIGF0IHRoZSBlbmQgb2YgdGhlIGxpc3RcbiAgICAgICAgICByZXR1cm4gbWluT2Zmc2V0O1xuICAgICAgICB9IGVsc2UgaWYgKHNjcm9sbExlZnQgPCBtaW5PZmZzZXQpIHtcbiAgICAgICAgICByZXR1cm4gbWluT2Zmc2V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBtYXhPZmZzZXQ7XG4gICAgICAgIH1cblxuICAgIH1cbiAgfSxcbiAgZ2V0T2Zmc2V0Rm9yUm93QW5kQWxpZ25tZW50OiBmdW5jdGlvbiBnZXRPZmZzZXRGb3JSb3dBbmRBbGlnbm1lbnQoX3JlZjgsIHJvd0luZGV4LCBhbGlnbiwgc2Nyb2xsVG9wLCBpbnN0YW5jZVByb3BzLCBzY3JvbGxiYXJTaXplKSB7XG4gICAgdmFyIHJvd0hlaWdodCA9IF9yZWY4LnJvd0hlaWdodCxcbiAgICAgICAgaGVpZ2h0ID0gX3JlZjguaGVpZ2h0LFxuICAgICAgICByb3dDb3VudCA9IF9yZWY4LnJvd0NvdW50O1xuICAgIHZhciBsYXN0Um93T2Zmc2V0ID0gTWF0aC5tYXgoMCwgcm93Q291bnQgKiByb3dIZWlnaHQgLSBoZWlnaHQpO1xuICAgIHZhciBtYXhPZmZzZXQgPSBNYXRoLm1pbihsYXN0Um93T2Zmc2V0LCByb3dJbmRleCAqIHJvd0hlaWdodCk7XG4gICAgdmFyIG1pbk9mZnNldCA9IE1hdGgubWF4KDAsIHJvd0luZGV4ICogcm93SGVpZ2h0IC0gaGVpZ2h0ICsgc2Nyb2xsYmFyU2l6ZSArIHJvd0hlaWdodCk7XG5cbiAgICBpZiAoYWxpZ24gPT09ICdzbWFydCcpIHtcbiAgICAgIGlmIChzY3JvbGxUb3AgPj0gbWluT2Zmc2V0IC0gaGVpZ2h0ICYmIHNjcm9sbFRvcCA8PSBtYXhPZmZzZXQgKyBoZWlnaHQpIHtcbiAgICAgICAgYWxpZ24gPSAnYXV0byc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhbGlnbiA9ICdjZW50ZXInO1xuICAgICAgfVxuICAgIH1cblxuICAgIHN3aXRjaCAoYWxpZ24pIHtcbiAgICAgIGNhc2UgJ3N0YXJ0JzpcbiAgICAgICAgcmV0dXJuIG1heE9mZnNldDtcblxuICAgICAgY2FzZSAnZW5kJzpcbiAgICAgICAgcmV0dXJuIG1pbk9mZnNldDtcblxuICAgICAgY2FzZSAnY2VudGVyJzpcbiAgICAgICAgLy8gXCJDZW50ZXJlZFwiIG9mZnNldCBpcyB1c3VhbGx5IHRoZSBhdmVyYWdlIG9mIHRoZSBtaW4gYW5kIG1heC5cbiAgICAgICAgLy8gQnV0IG5lYXIgdGhlIGVkZ2VzIG9mIHRoZSBsaXN0LCB0aGlzIGRvZXNuJ3QgaG9sZCB0cnVlLlxuICAgICAgICB2YXIgbWlkZGxlT2Zmc2V0ID0gTWF0aC5yb3VuZChtaW5PZmZzZXQgKyAobWF4T2Zmc2V0IC0gbWluT2Zmc2V0KSAvIDIpO1xuXG4gICAgICAgIGlmIChtaWRkbGVPZmZzZXQgPCBNYXRoLmNlaWwoaGVpZ2h0IC8gMikpIHtcbiAgICAgICAgICByZXR1cm4gMDsgLy8gbmVhciB0aGUgYmVnaW5uaW5nXG4gICAgICAgIH0gZWxzZSBpZiAobWlkZGxlT2Zmc2V0ID4gbGFzdFJvd09mZnNldCArIE1hdGguZmxvb3IoaGVpZ2h0IC8gMikpIHtcbiAgICAgICAgICByZXR1cm4gbGFzdFJvd09mZnNldDsgLy8gbmVhciB0aGUgZW5kXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIG1pZGRsZU9mZnNldDtcbiAgICAgICAgfVxuXG4gICAgICBjYXNlICdhdXRvJzpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChzY3JvbGxUb3AgPj0gbWluT2Zmc2V0ICYmIHNjcm9sbFRvcCA8PSBtYXhPZmZzZXQpIHtcbiAgICAgICAgICByZXR1cm4gc2Nyb2xsVG9wO1xuICAgICAgICB9IGVsc2UgaWYgKG1pbk9mZnNldCA+IG1heE9mZnNldCkge1xuICAgICAgICAgIC8vIEJlY2F1c2Ugd2Ugb25seSB0YWtlIGludG8gYWNjb3VudCB0aGUgc2Nyb2xsYmFyIHNpemUgd2hlbiBjYWxjdWxhdGluZyBtaW5PZmZzZXRcbiAgICAgICAgICAvLyB0aGlzIHZhbHVlIGNhbiBiZSBsYXJnZXIgdGhhbiBtYXhPZmZzZXQgd2hlbiBhdCB0aGUgZW5kIG9mIHRoZSBsaXN0XG4gICAgICAgICAgcmV0dXJuIG1pbk9mZnNldDtcbiAgICAgICAgfSBlbHNlIGlmIChzY3JvbGxUb3AgPCBtaW5PZmZzZXQpIHtcbiAgICAgICAgICByZXR1cm4gbWluT2Zmc2V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBtYXhPZmZzZXQ7XG4gICAgICAgIH1cblxuICAgIH1cbiAgfSxcbiAgZ2V0Q29sdW1uU3RhcnRJbmRleEZvck9mZnNldDogZnVuY3Rpb24gZ2V0Q29sdW1uU3RhcnRJbmRleEZvck9mZnNldChfcmVmOSwgc2Nyb2xsTGVmdCkge1xuICAgIHZhciBjb2x1bW5XaWR0aCA9IF9yZWY5LmNvbHVtbldpZHRoLFxuICAgICAgICBjb2x1bW5Db3VudCA9IF9yZWY5LmNvbHVtbkNvdW50O1xuICAgIHJldHVybiBNYXRoLm1heCgwLCBNYXRoLm1pbihjb2x1bW5Db3VudCAtIDEsIE1hdGguZmxvb3Ioc2Nyb2xsTGVmdCAvIGNvbHVtbldpZHRoKSkpO1xuICB9LFxuICBnZXRDb2x1bW5TdG9wSW5kZXhGb3JTdGFydEluZGV4OiBmdW5jdGlvbiBnZXRDb2x1bW5TdG9wSW5kZXhGb3JTdGFydEluZGV4KF9yZWYxMCwgc3RhcnRJbmRleCwgc2Nyb2xsTGVmdCkge1xuICAgIHZhciBjb2x1bW5XaWR0aCA9IF9yZWYxMC5jb2x1bW5XaWR0aCxcbiAgICAgICAgY29sdW1uQ291bnQgPSBfcmVmMTAuY29sdW1uQ291bnQsXG4gICAgICAgIHdpZHRoID0gX3JlZjEwLndpZHRoO1xuICAgIHZhciBsZWZ0ID0gc3RhcnRJbmRleCAqIGNvbHVtbldpZHRoO1xuICAgIHZhciBudW1WaXNpYmxlQ29sdW1ucyA9IE1hdGguY2VpbCgod2lkdGggKyBzY3JvbGxMZWZ0IC0gbGVmdCkgLyBjb2x1bW5XaWR0aCk7XG4gICAgcmV0dXJuIE1hdGgubWF4KDAsIE1hdGgubWluKGNvbHVtbkNvdW50IC0gMSwgc3RhcnRJbmRleCArIG51bVZpc2libGVDb2x1bW5zIC0gMSAvLyAtMSBpcyBiZWNhdXNlIHN0b3AgaW5kZXggaXMgaW5jbHVzaXZlXG4gICAgKSk7XG4gIH0sXG4gIGdldFJvd1N0YXJ0SW5kZXhGb3JPZmZzZXQ6IGZ1bmN0aW9uIGdldFJvd1N0YXJ0SW5kZXhGb3JPZmZzZXQoX3JlZjExLCBzY3JvbGxUb3ApIHtcbiAgICB2YXIgcm93SGVpZ2h0ID0gX3JlZjExLnJvd0hlaWdodCxcbiAgICAgICAgcm93Q291bnQgPSBfcmVmMTEucm93Q291bnQ7XG4gICAgcmV0dXJuIE1hdGgubWF4KDAsIE1hdGgubWluKHJvd0NvdW50IC0gMSwgTWF0aC5mbG9vcihzY3JvbGxUb3AgLyByb3dIZWlnaHQpKSk7XG4gIH0sXG4gIGdldFJvd1N0b3BJbmRleEZvclN0YXJ0SW5kZXg6IGZ1bmN0aW9uIGdldFJvd1N0b3BJbmRleEZvclN0YXJ0SW5kZXgoX3JlZjEyLCBzdGFydEluZGV4LCBzY3JvbGxUb3ApIHtcbiAgICB2YXIgcm93SGVpZ2h0ID0gX3JlZjEyLnJvd0hlaWdodCxcbiAgICAgICAgcm93Q291bnQgPSBfcmVmMTIucm93Q291bnQsXG4gICAgICAgIGhlaWdodCA9IF9yZWYxMi5oZWlnaHQ7XG4gICAgdmFyIHRvcCA9IHN0YXJ0SW5kZXggKiByb3dIZWlnaHQ7XG4gICAgdmFyIG51bVZpc2libGVSb3dzID0gTWF0aC5jZWlsKChoZWlnaHQgKyBzY3JvbGxUb3AgLSB0b3ApIC8gcm93SGVpZ2h0KTtcbiAgICByZXR1cm4gTWF0aC5tYXgoMCwgTWF0aC5taW4ocm93Q291bnQgLSAxLCBzdGFydEluZGV4ICsgbnVtVmlzaWJsZVJvd3MgLSAxIC8vIC0xIGlzIGJlY2F1c2Ugc3RvcCBpbmRleCBpcyBpbmNsdXNpdmVcbiAgICApKTtcbiAgfSxcbiAgaW5pdEluc3RhbmNlUHJvcHM6IGZ1bmN0aW9uIGluaXRJbnN0YW5jZVByb3BzKHByb3BzKSB7Ly8gTm9vcFxuICB9LFxuICBzaG91bGRSZXNldFN0eWxlQ2FjaGVPbkl0ZW1TaXplQ2hhbmdlOiB0cnVlLFxuICB2YWxpZGF0ZVByb3BzOiBmdW5jdGlvbiB2YWxpZGF0ZVByb3BzKF9yZWYxMykge1xuICAgIHZhciBjb2x1bW5XaWR0aCA9IF9yZWYxMy5jb2x1bW5XaWR0aCxcbiAgICAgICAgcm93SGVpZ2h0ID0gX3JlZjEzLnJvd0hlaWdodDtcblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBpZiAodHlwZW9mIGNvbHVtbldpZHRoICE9PSAnbnVtYmVyJykge1xuICAgICAgICB0aHJvdyBFcnJvcignQW4gaW52YWxpZCBcImNvbHVtbldpZHRoXCIgcHJvcCBoYXMgYmVlbiBzcGVjaWZpZWQuICcgKyAnVmFsdWUgc2hvdWxkIGJlIGEgbnVtYmVyLiAnICsgKFwiXFxcIlwiICsgKGNvbHVtbldpZHRoID09PSBudWxsID8gJ251bGwnIDogdHlwZW9mIGNvbHVtbldpZHRoKSArIFwiXFxcIiB3YXMgc3BlY2lmaWVkLlwiKSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2Ygcm93SGVpZ2h0ICE9PSAnbnVtYmVyJykge1xuICAgICAgICB0aHJvdyBFcnJvcignQW4gaW52YWxpZCBcInJvd0hlaWdodFwiIHByb3AgaGFzIGJlZW4gc3BlY2lmaWVkLiAnICsgJ1ZhbHVlIHNob3VsZCBiZSBhIG51bWJlci4gJyArIChcIlxcXCJcIiArIChyb3dIZWlnaHQgPT09IG51bGwgPyAnbnVsbCcgOiB0eXBlb2Ygcm93SGVpZ2h0KSArIFwiXFxcIiB3YXMgc3BlY2lmaWVkLlwiKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59KTtcblxudmFyIEZpeGVkU2l6ZUxpc3QgPSAvKiNfX1BVUkVfXyovY3JlYXRlTGlzdENvbXBvbmVudCh7XG4gIGdldEl0ZW1PZmZzZXQ6IGZ1bmN0aW9uIGdldEl0ZW1PZmZzZXQoX3JlZiwgaW5kZXgpIHtcbiAgICB2YXIgaXRlbVNpemUgPSBfcmVmLml0ZW1TaXplO1xuICAgIHJldHVybiBpbmRleCAqIGl0ZW1TaXplO1xuICB9LFxuICBnZXRJdGVtU2l6ZTogZnVuY3Rpb24gZ2V0SXRlbVNpemUoX3JlZjIsIGluZGV4KSB7XG4gICAgdmFyIGl0ZW1TaXplID0gX3JlZjIuaXRlbVNpemU7XG4gICAgcmV0dXJuIGl0ZW1TaXplO1xuICB9LFxuICBnZXRFc3RpbWF0ZWRUb3RhbFNpemU6IGZ1bmN0aW9uIGdldEVzdGltYXRlZFRvdGFsU2l6ZShfcmVmMykge1xuICAgIHZhciBpdGVtQ291bnQgPSBfcmVmMy5pdGVtQ291bnQsXG4gICAgICAgIGl0ZW1TaXplID0gX3JlZjMuaXRlbVNpemU7XG4gICAgcmV0dXJuIGl0ZW1TaXplICogaXRlbUNvdW50O1xuICB9LFxuICBnZXRPZmZzZXRGb3JJbmRleEFuZEFsaWdubWVudDogZnVuY3Rpb24gZ2V0T2Zmc2V0Rm9ySW5kZXhBbmRBbGlnbm1lbnQoX3JlZjQsIGluZGV4LCBhbGlnbiwgc2Nyb2xsT2Zmc2V0LCBpbnN0YW5jZVByb3BzLCBzY3JvbGxiYXJTaXplKSB7XG4gICAgdmFyIGRpcmVjdGlvbiA9IF9yZWY0LmRpcmVjdGlvbixcbiAgICAgICAgaGVpZ2h0ID0gX3JlZjQuaGVpZ2h0LFxuICAgICAgICBpdGVtQ291bnQgPSBfcmVmNC5pdGVtQ291bnQsXG4gICAgICAgIGl0ZW1TaXplID0gX3JlZjQuaXRlbVNpemUsXG4gICAgICAgIGxheW91dCA9IF9yZWY0LmxheW91dCxcbiAgICAgICAgd2lkdGggPSBfcmVmNC53aWR0aDtcbiAgICAvLyBUT0RPIERlcHJlY2F0ZSBkaXJlY3Rpb24gXCJob3Jpem9udGFsXCJcbiAgICB2YXIgaXNIb3Jpem9udGFsID0gZGlyZWN0aW9uID09PSAnaG9yaXpvbnRhbCcgfHwgbGF5b3V0ID09PSAnaG9yaXpvbnRhbCc7XG4gICAgdmFyIHNpemUgPSBpc0hvcml6b250YWwgPyB3aWR0aCA6IGhlaWdodDtcbiAgICB2YXIgbGFzdEl0ZW1PZmZzZXQgPSBNYXRoLm1heCgwLCBpdGVtQ291bnQgKiBpdGVtU2l6ZSAtIHNpemUpO1xuICAgIHZhciBtYXhPZmZzZXQgPSBNYXRoLm1pbihsYXN0SXRlbU9mZnNldCwgaW5kZXggKiBpdGVtU2l6ZSk7XG4gICAgdmFyIG1pbk9mZnNldCA9IE1hdGgubWF4KDAsIGluZGV4ICogaXRlbVNpemUgLSBzaXplICsgaXRlbVNpemUgKyBzY3JvbGxiYXJTaXplKTtcblxuICAgIGlmIChhbGlnbiA9PT0gJ3NtYXJ0Jykge1xuICAgICAgaWYgKHNjcm9sbE9mZnNldCA+PSBtaW5PZmZzZXQgLSBzaXplICYmIHNjcm9sbE9mZnNldCA8PSBtYXhPZmZzZXQgKyBzaXplKSB7XG4gICAgICAgIGFsaWduID0gJ2F1dG8nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWxpZ24gPSAnY2VudGVyJztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzd2l0Y2ggKGFsaWduKSB7XG4gICAgICBjYXNlICdzdGFydCc6XG4gICAgICAgIHJldHVybiBtYXhPZmZzZXQ7XG5cbiAgICAgIGNhc2UgJ2VuZCc6XG4gICAgICAgIHJldHVybiBtaW5PZmZzZXQ7XG5cbiAgICAgIGNhc2UgJ2NlbnRlcic6XG4gICAgICAgIHtcbiAgICAgICAgICAvLyBcIkNlbnRlcmVkXCIgb2Zmc2V0IGlzIHVzdWFsbHkgdGhlIGF2ZXJhZ2Ugb2YgdGhlIG1pbiBhbmQgbWF4LlxuICAgICAgICAgIC8vIEJ1dCBuZWFyIHRoZSBlZGdlcyBvZiB0aGUgbGlzdCwgdGhpcyBkb2Vzbid0IGhvbGQgdHJ1ZS5cbiAgICAgICAgICB2YXIgbWlkZGxlT2Zmc2V0ID0gTWF0aC5yb3VuZChtaW5PZmZzZXQgKyAobWF4T2Zmc2V0IC0gbWluT2Zmc2V0KSAvIDIpO1xuXG4gICAgICAgICAgaWYgKG1pZGRsZU9mZnNldCA8IE1hdGguY2VpbChzaXplIC8gMikpIHtcbiAgICAgICAgICAgIHJldHVybiAwOyAvLyBuZWFyIHRoZSBiZWdpbm5pbmdcbiAgICAgICAgICB9IGVsc2UgaWYgKG1pZGRsZU9mZnNldCA+IGxhc3RJdGVtT2Zmc2V0ICsgTWF0aC5mbG9vcihzaXplIC8gMikpIHtcbiAgICAgICAgICAgIHJldHVybiBsYXN0SXRlbU9mZnNldDsgLy8gbmVhciB0aGUgZW5kXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBtaWRkbGVPZmZzZXQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgIGNhc2UgJ2F1dG8nOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKHNjcm9sbE9mZnNldCA+PSBtaW5PZmZzZXQgJiYgc2Nyb2xsT2Zmc2V0IDw9IG1heE9mZnNldCkge1xuICAgICAgICAgIHJldHVybiBzY3JvbGxPZmZzZXQ7XG4gICAgICAgIH0gZWxzZSBpZiAoc2Nyb2xsT2Zmc2V0IDwgbWluT2Zmc2V0KSB7XG4gICAgICAgICAgcmV0dXJuIG1pbk9mZnNldDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gbWF4T2Zmc2V0O1xuICAgICAgICB9XG5cbiAgICB9XG4gIH0sXG4gIGdldFN0YXJ0SW5kZXhGb3JPZmZzZXQ6IGZ1bmN0aW9uIGdldFN0YXJ0SW5kZXhGb3JPZmZzZXQoX3JlZjUsIG9mZnNldCkge1xuICAgIHZhciBpdGVtQ291bnQgPSBfcmVmNS5pdGVtQ291bnQsXG4gICAgICAgIGl0ZW1TaXplID0gX3JlZjUuaXRlbVNpemU7XG4gICAgcmV0dXJuIE1hdGgubWF4KDAsIE1hdGgubWluKGl0ZW1Db3VudCAtIDEsIE1hdGguZmxvb3Iob2Zmc2V0IC8gaXRlbVNpemUpKSk7XG4gIH0sXG4gIGdldFN0b3BJbmRleEZvclN0YXJ0SW5kZXg6IGZ1bmN0aW9uIGdldFN0b3BJbmRleEZvclN0YXJ0SW5kZXgoX3JlZjYsIHN0YXJ0SW5kZXgsIHNjcm9sbE9mZnNldCkge1xuICAgIHZhciBkaXJlY3Rpb24gPSBfcmVmNi5kaXJlY3Rpb24sXG4gICAgICAgIGhlaWdodCA9IF9yZWY2LmhlaWdodCxcbiAgICAgICAgaXRlbUNvdW50ID0gX3JlZjYuaXRlbUNvdW50LFxuICAgICAgICBpdGVtU2l6ZSA9IF9yZWY2Lml0ZW1TaXplLFxuICAgICAgICBsYXlvdXQgPSBfcmVmNi5sYXlvdXQsXG4gICAgICAgIHdpZHRoID0gX3JlZjYud2lkdGg7XG4gICAgLy8gVE9ETyBEZXByZWNhdGUgZGlyZWN0aW9uIFwiaG9yaXpvbnRhbFwiXG4gICAgdmFyIGlzSG9yaXpvbnRhbCA9IGRpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnIHx8IGxheW91dCA9PT0gJ2hvcml6b250YWwnO1xuICAgIHZhciBvZmZzZXQgPSBzdGFydEluZGV4ICogaXRlbVNpemU7XG4gICAgdmFyIHNpemUgPSBpc0hvcml6b250YWwgPyB3aWR0aCA6IGhlaWdodDtcbiAgICB2YXIgbnVtVmlzaWJsZUl0ZW1zID0gTWF0aC5jZWlsKChzaXplICsgc2Nyb2xsT2Zmc2V0IC0gb2Zmc2V0KSAvIGl0ZW1TaXplKTtcbiAgICByZXR1cm4gTWF0aC5tYXgoMCwgTWF0aC5taW4oaXRlbUNvdW50IC0gMSwgc3RhcnRJbmRleCArIG51bVZpc2libGVJdGVtcyAtIDEgLy8gLTEgaXMgYmVjYXVzZSBzdG9wIGluZGV4IGlzIGluY2x1c2l2ZVxuICAgICkpO1xuICB9LFxuICBpbml0SW5zdGFuY2VQcm9wczogZnVuY3Rpb24gaW5pdEluc3RhbmNlUHJvcHMocHJvcHMpIHsvLyBOb29wXG4gIH0sXG4gIHNob3VsZFJlc2V0U3R5bGVDYWNoZU9uSXRlbVNpemVDaGFuZ2U6IHRydWUsXG4gIHZhbGlkYXRlUHJvcHM6IGZ1bmN0aW9uIHZhbGlkYXRlUHJvcHMoX3JlZjcpIHtcbiAgICB2YXIgaXRlbVNpemUgPSBfcmVmNy5pdGVtU2l6ZTtcblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBpZiAodHlwZW9mIGl0ZW1TaXplICE9PSAnbnVtYmVyJykge1xuICAgICAgICB0aHJvdyBFcnJvcignQW4gaW52YWxpZCBcIml0ZW1TaXplXCIgcHJvcCBoYXMgYmVlbiBzcGVjaWZpZWQuICcgKyAnVmFsdWUgc2hvdWxkIGJlIGEgbnVtYmVyLiAnICsgKFwiXFxcIlwiICsgKGl0ZW1TaXplID09PSBudWxsID8gJ251bGwnIDogdHlwZW9mIGl0ZW1TaXplKSArIFwiXFxcIiB3YXMgc3BlY2lmaWVkLlwiKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59KTtcblxuLy8gUHVsbGVkIGZyb20gcmVhY3QtY29tcGF0XG4vLyBodHRwczovL2dpdGh1Yi5jb20vZGV2ZWxvcGl0L3ByZWFjdC1jb21wYXQvYmxvYi83YzVkZTAwZTdjODVlMmZmZDAxMWJmM2FmMDI4OTliNjNmNjk5ZDNhL3NyYy9pbmRleC5qcyNMMzQ5XG5mdW5jdGlvbiBzaGFsbG93RGlmZmVycyhwcmV2LCBuZXh0KSB7XG4gIGZvciAodmFyIGF0dHJpYnV0ZSBpbiBwcmV2KSB7XG4gICAgaWYgKCEoYXR0cmlidXRlIGluIG5leHQpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBmb3IgKHZhciBfYXR0cmlidXRlIGluIG5leHQpIHtcbiAgICBpZiAocHJldltfYXR0cmlidXRlXSAhPT0gbmV4dFtfYXR0cmlidXRlXSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG52YXIgX2V4Y2x1ZGVkID0gW1wic3R5bGVcIl0sXG4gICAgX2V4Y2x1ZGVkMiA9IFtcInN0eWxlXCJdO1xuLy8gSXQga25vd3MgdG8gY29tcGFyZSBpbmRpdmlkdWFsIHN0eWxlIHByb3BzIGFuZCBpZ25vcmUgdGhlIHdyYXBwZXIgb2JqZWN0LlxuLy8gU2VlIGh0dHBzOi8vcmVhY3Rqcy5vcmcvZG9jcy9yZWFjdC1hcGkuaHRtbCNyZWFjdG1lbW9cblxuZnVuY3Rpb24gYXJlRXF1YWwocHJldlByb3BzLCBuZXh0UHJvcHMpIHtcbiAgdmFyIHByZXZTdHlsZSA9IHByZXZQcm9wcy5zdHlsZSxcbiAgICAgIHByZXZSZXN0ID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UocHJldlByb3BzLCBfZXhjbHVkZWQpO1xuXG4gIHZhciBuZXh0U3R5bGUgPSBuZXh0UHJvcHMuc3R5bGUsXG4gICAgICBuZXh0UmVzdCA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKG5leHRQcm9wcywgX2V4Y2x1ZGVkMik7XG5cbiAgcmV0dXJuICFzaGFsbG93RGlmZmVycyhwcmV2U3R5bGUsIG5leHRTdHlsZSkgJiYgIXNoYWxsb3dEaWZmZXJzKHByZXZSZXN0LCBuZXh0UmVzdCk7XG59XG5cbi8vIEl0IGtub3dzIHRvIGNvbXBhcmUgaW5kaXZpZHVhbCBzdHlsZSBwcm9wcyBhbmQgaWdub3JlIHRoZSB3cmFwcGVyIG9iamVjdC5cbi8vIFNlZSBodHRwczovL3JlYWN0anMub3JnL2RvY3MvcmVhY3QtY29tcG9uZW50Lmh0bWwjc2hvdWxkY29tcG9uZW50dXBkYXRlXG5cbmZ1bmN0aW9uIHNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHMsIG5leHRTdGF0ZSkge1xuICByZXR1cm4gIWFyZUVxdWFsKHRoaXMucHJvcHMsIG5leHRQcm9wcykgfHwgc2hhbGxvd0RpZmZlcnModGhpcy5zdGF0ZSwgbmV4dFN0YXRlKTtcbn1cblxuZXhwb3J0IHsgRml4ZWRTaXplR3JpZCwgRml4ZWRTaXplTGlzdCwgVmFyaWFibGVTaXplR3JpZCwgVmFyaWFibGVTaXplTGlzdCwgYXJlRXF1YWwsIHNob3VsZENvbXBvbmVudFVwZGF0ZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtLmpzLm1hcFxuIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMjAgMjBcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTE4LjUuOTk1YzAtLjU1LS40My0uOTk1LS45Ni0uOTk1SDIuNDZhLjk0Ljk0IDAgMCAwLS42MDUuMjIzIDEuMDIgMS4wMiAwIDAgMC0uMTQgMS40TDYuNSA3LjcyYy4xMjIuMTU2LjE5Ni4zNDcuMjEyLjU0OGwuODM1IDEwLjgxNWMuMDA3LjA5Mi4wMjcuMTgzLjA1OC4yN2EuOTUxLjk1MSAwIDAgMCAxLjIzNy41ODJsMi4xMTItLjgyYS45OS45OSAwIDAgMCAuNjE1LS43OTdsMS4zMjUtMTAuMDYyYy4wMjUtLjE5My4xMDUtLjM3NC4yMjgtLjUybDUuMTQxLTYuMDg3Yy4xNTQtLjE4MS4yMzgtLjQxNC4yMzgtLjY1NVpNMi41IDFoMTQuOTk5bC01LjE0MSA2LjA5LS4xMTcuMTUzYTIuMDE2IDIuMDE2IDAgMCAwLS4zNC44ODNsLTEuMzI1IDEwLjA2Mi0yLjAzNS43OTItLjgzMy0xMC43ODgtLjAyLS4xNjlhMi4wMTIgMi4wMTIgMCAwIDAtLjQwMi0uOTJMMi41MDIgMS4wMDYgMi41IDFaXFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDIwIDIwXFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk02IDBhMiAyIDAgMCAxIDIgMnY0YTIgMiAwIDAgMS0yIDJIMmEyIDIgMCAwIDEtMi0yVjJhMiAyIDAgMCAxIDItMmg0Wm0wIDFIMmExIDEgMCAwIDAtMSAxdjRhMSAxIDAgMCAwIDEgMWg0YTEgMSAwIDAgMCAxLTFWMmExIDEgMCAwIDAtMS0xWlxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIj48L3BhdGg+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZD1cXFwiTTEwLjUgMmEuNS41IDAgMCAwIDAgMWg5YS41LjUgMCAwIDAgMC0xaC05Wk0xMCA1LjVhLjUuNSAwIDAgMSAuNS0uNWg5YS41LjUgMCAwIDEgMCAxaC05YS41LjUgMCAwIDEtLjUtLjVaXFxcIj48L3BhdGg+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNNiAxMmEyIDIgMCAwIDEgMiAydjRhMiAyIDAgMCAxLTIgMkgyYTIgMiAwIDAgMS0yLTJ2LTRhMiAyIDAgMCAxIDItMmg0Wm0wIDFIMmExIDEgMCAwIDAtMSAxdjRhMSAxIDAgMCAwIDEgMWg0YTEgMSAwIDAgMCAxLTF2LTRhMSAxIDAgMCAwLTEtMVpcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIk0xMCAxNC41YS41LjUgMCAwIDEgLjUtLjVoOWEuNS41IDAgMCAxIDAgMWgtOWEuNS41IDAgMCAxLS41LS41Wk0xMC41IDE3YS41LjUgMCAwIDAgMCAxaDlhLjUuNSAwIDAgMCAwLTFoLTlaXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZD1cXFwiTTE1IDcuNWEuNTIyLjUyMiAwIDAgMS0uNTE2LjUyN0gyLjk3Nkw2LjQ3MyAxMS42YS41MzUuNTM1IDAgMCAxIDAgLjc0Ni41MDguNTA4IDAgMCAxLS43MyAwTDEgNy41bDQuNzQzLTQuODQ2YS41MDguNTA4IDAgMCAxIC43MyAwIC41MzUuNTM1IDAgMCAxIDAgLjc0NkwyLjk3NiA2Ljk3M2gxMS41MDhjLjI4NSAwIC41MTYuMjM2LjUxNi41MjdaXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNMi4xNDYgNC42NTNhLjQ4NS40ODUgMCAwIDEgLjcwOCAwTDggMTAuMjRsNS4xNDYtNS41ODdhLjQ4NS40ODUgMCAwIDEgLjcwOCAwIC41MzguNTM4IDAgMCAxIDAgLjczOGwtNS41IDUuOTU2YS40ODUuNDg1IDAgMCAxLS43MDggMGwtNS41LTUuOTU2YS41MzguNTM4IDAgMCAxIDAtLjczOFpcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTExLjM0NyAyLjE0NmEuNDg1LjQ4NSAwIDAgMSAwIC43MDhMNS43NiA4bDUuNTg3IDUuMTQ2YS40ODYuNDg2IDAgMCAxIDAgLjcwOC41MzguNTM4IDAgMCAxLS43MzggMGwtNS45NTYtNS41YS40ODUuNDg1IDAgMCAxIDAtLjcwOGw1Ljk1Ni01LjVhLjUzOC41MzggMCAwIDEgLjczOCAwWlxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNNC42NTMgMTMuODU0YS40ODUuNDg1IDAgMCAxIDAtLjcwOEwxMC4yNCA4IDQuNjUzIDIuODU0YS40ODUuNDg1IDAgMCAxIDAtLjcwOC41MzguNTM4IDAgMCAxIC43MzggMGw1Ljk1NiA1LjVhLjQ4NS40ODUgMCAwIDEgMCAuNzA4bC01Ljk1NiA1LjVhLjUzOC41MzggMCAwIDEtLjczOCAwWlxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNMTMuODU0IDExLjM0N2EuNDg2LjQ4NiAwIDAgMS0uNzA4IDBMOCA1Ljc2bC01LjE0NiA1LjU4N2EuNDg1LjQ4NSAwIDAgMS0uNzA4IDAgLjUzOC41MzggMCAwIDEgMC0uNzM4bDUuNS01Ljk1NmEuNDg1LjQ4NSAwIDAgMSAuNzA4IDBsNS41IDUuOTU2YS41MzguNTM4IDAgMCAxIDAgLjczOFpcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIm04Ljc0NSA4IDYuMSA2LjFhLjUyNy41MjcgMCAxIDEtLjc0NS43NDZMOCA4Ljc0NmwtNi4xIDYuMWEuNTI3LjUyNyAwIDEgMS0uNzQ2LS43NDZsNi4xLTYuMS02LjEtNi4xYS41MjcuNTI3IDAgMCAxIC43NDYtLjc0Nmw2LjEgNi4xIDYuMS02LjFhLjUyNy41MjcgMCAwIDEgLjc0Ni43NDZMOC43NDYgOFpcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJNLjQzOCAxQy4xOTYgMSAwIDEuMjI0IDAgMS41cy4xOTYuNS40MzguNWgxNS4xMjRjLjI0MiAwIC40MzgtLjIyNC40MzgtLjVzLS4xOTYtLjUtLjQzOC0uNUguNDM4Wk0wIDcuNWMwLS4yNzYuMTk2LS41LjQzOC0uNWgxNS4xMjRjLjI0MiAwIC40MzguMjI0LjQzOC41cy0uMTk2LjUtLjQzOC41SC40MzhDLjE5NiA4IDAgNy43NzYgMCA3LjVaTTAgMTMuNWMwLS4yNzYuMTk2LS41LjQzOC0uNWgxNS4xMjRjLjI0MiAwIC40MzguMjI0LjQzOC41cy0uMTk2LjUtLjQzOC41SC40MzhDLjE5NiAxNCAwIDEzLjc3NiAwIDEzLjVaXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZD1cXFwiTTE0LjkzOCA4QTcgNyAwIDAgMSAxLjAxIDlIMGE4LjAwMSA4LjAwMSAwIDAgMCAxNS45MzgtMUE4IDggMCAwIDAgMS4wMiAzLjk4TDEgLjcwMmEuNS41IDAgMSAwLTEgLjAwNkwuMDMxIDUuOWw1LjEyOC0uODI2YS41LjUgMCAwIDAtLjE2LS45ODdMMS44MTkgNC42QTcgNyAwIDAgMSAxNC45MzggOFpcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk0xMiA2LjVhNS41IDUuNSAwIDEgMS0xMSAwIDUuNSA1LjUgMCAwIDEgMTEgMFptLTEuMjcgNC45MzZhNi41IDYuNSAwIDEgMSAuNzA3LS43MDdsNC4xMzYgNC4xMzdhLjUuNSAwIDEgMS0uNzA3LjcwN2wtNC4xMzctNC4xMzdaXFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk0xNS44OCAyLjgyNWEuNS41IDAgMCAwLS43NTktLjY1bC0yLjMyMyAyLjcxLTEuMjY1LTEuMjY1YS41LjUgMCAxIDAtLjcwNy43MDdsMS4yNjUgMS4yNjVhMSAxIDAgMCAwIDEuNDY2LS4wNTZsMi4zMjMtMi43MVptMCA4YS41LjUgMCAwIDAtLjc1OS0uNjVsLTIuMzIzIDIuNzEtMS4yNjUtMS4yNjVhLjUuNSAwIDEgMC0uNzA3LjcwOGwxLjI2NSAxLjI2NGExIDEgMCAwIDAgMS40NjYtLjA1NmwyLjMyMy0yLjcxWk05IDQuNWEuNS41IDAgMCAxLS41LjVoLThhLjUuNSAwIDAgMSAwLTFoOGEuNS41IDAgMCAxIC41LjVaTTguNSAxM2EuNS41IDAgMCAwIDAtMWgtOGEuNS41IDAgMCAwIDAgMWg4WlxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNMTYgNC41YS41LjUgMCAwIDEtLjUuNWgtOGEuNS41IDAgMCAxIDAtMWg4YS41LjUgMCAwIDEgLjUuNVpNMTYgMTIuNWEuNS41IDAgMCAxLS41LjVoLThhLjUuNSAwIDAgMSAwLTFoOGEuNS41IDAgMCAxIC41LjVaTTUuMTQ2IDIuMTJhLjUuNSAwIDAgMSAuMDU1LjcwNWwtMi4zMjQgMi43MWExIDEgMCAwIDEtMS40NjYuMDU3TC4xNDYgNC4zMjdhLjUuNSAwIDAgMSAuNzA4LS43MDdsMS4yNjQgMS4yNjUgMi4zMjMtMi43MWEuNS41IDAgMCAxIC43MDUtLjA1NVpNNS4xNDYgMTAuMTJhLjUuNSAwIDAgMSAuMDU1LjcwNWwtMi4zMjQgMi43MWExIDEgMCAwIDEtMS40NjYuMDU3TC4xNDYgMTIuMzI4YS41LjUgMCAxIDEgLjcwOC0uNzA4bDEuMjY0IDEuMjY1IDIuMzIzLTIuNzFhLjUuNSAwIDAgMSAuNzA1LS4wNTVaXFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIm0yLjExNiAxLjUuOTY5IDEuNjc4SDEuMDV2M0gwbDEuNSAyIDEuNS0yaC0uOTUxdi0yaDEuNjE0bDQuNjE4IDhIMi4wNDl2LTJIMS4wNXYzaDcuODA5bDEuMjU3IDIuMTc4Ljg2Ni0uNUwyLjk4MiAxbC0uODY2LjVabTkuOTgyIDguNjc4aC45NXYyaC0yLjYxMWwuNTc2IDFoMy4wMzZ2LTNoMS4wNWwtMS41MDEtMi0xLjUgMlptLjk1MS00di0ySDUuODE3bC0uNTc4LTFoOC44MXYzaC0xWlxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNMS4wNDkgNlYzaDEzdjNoLTFWNGgtMTF2MkgzTDEuNSA3Ljk5OSAwIDZoMS4wNDlabTEyIDRoLS45NTJsMS41LTIgMS41IDJoLTEuMDQ5djNIMS4wNXYtM2gxdjJoMTF2LTJaXFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgZmlsbD1cXFwibm9uZVxcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBkPVxcXCJtMTEuMzY2IDcuODQxLS43MzItLjY4Mi0zLjEyNSAzLjM0OS0xLjYzNS0xLjg0LS43NDguNjY0IDIuMzY1IDIuNjYgMy44NzUtNC4xNVpcXFwiPjwvcGF0aD48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk00LjUgM1YxLjE2N0M0LjUuNDY5IDUuMjA0IDAgNiAwaDRjLjc5NiAwIDEuNS40NyAxLjUgMS4xNjdWM2g0YS41LjUgMCAwIDEgMCAxSDE0bC0uOTI5IDExLjA3N2ExIDEgMCAwIDEtLjk5Ny45MjNIMy45MjZhMSAxIDAgMCAxLS45OTctLjkyM0wyIDRILjVhLjUuNSAwIDAgMSAwLTFoNFpNMy4wMDMgNGg5Ljk5NGwtLjkyMyAxMUgzLjkyNkwzLjAwMyA0Wk0xMC41IDF2MmgtNVYxYzAtLjA0IDUtLjA0IDUgMFpcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTggMi4xMjUgMTQuMzM0IDE0SDEuNjY3TDggMi4xMjVabS0uODgyLS40N2ExIDEgMCAwIDEgMS43NjUgMGw2LjMzMyAxMS44NzRBMSAxIDAgMCAxIDE0LjMzNCAxNUgxLjY2N2ExIDEgMCAwIDEtLjg4Mi0xLjQ3TDcuMTE4IDEuNjUzWk04IDQuODc0YS45MDUuOTA1IDAgMCAwLS45Ljk5NWwuMzUgMy41MDdhLjU1Mi41NTIgMCAwIDAgMS4xIDBMOC45IDUuODdhLjkwNS45MDUgMCAwIDAtLjktLjk5NVptMSA3YTEgMSAwIDEgMS0yIDAgMSAxIDAgMCAxIDIgMFpcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiNGRkZcXFwiIGZpbGwtcnVsZT1cXFwibm9uemVyb1xcXCIgZD1cXFwiTTIgM2ExIDEgMCAxIDAgMC0yIDEgMSAwIDAgMCAwIDJabTAgMWEyIDIgMCAxIDEgMC00IDIgMiAwIDAgMSAwIDRabTUtM2ExIDEgMCAwIDAgMCAyaDdhMSAxIDAgMCAwIDAtMkg3Wm0wLTFoN2EyIDIgMCAxIDEgMCA0SDdhMiAyIDAgMSAxIDAtNFptMCA3YTEgMSAwIDAgMCAwIDJoN2ExIDEgMCAwIDAgMC0ySDdabTAtMWg3YTIgMiAwIDEgMSAwIDRIN2EyIDIgMCAxIDEgMC00Wm0wIDdhMSAxIDAgMCAwIDAgMmg3YTEgMSAwIDAgMCAwLTJIN1ptMC0xaDdhMiAyIDAgMSAxIDAgNEg3YTIgMiAwIDEgMSAwLTRaTTIgOWExIDEgMCAxIDAgMC0yIDEgMSAwIDAgMCAwIDJabTAgMWEyIDIgMCAxIDEgMC00IDIgMiAwIDAgMSAwIDRabTAgNWExIDEgMCAxIDAgMC0yIDEgMSAwIDAgMCAwIDJabTAgMWEyIDIgMCAxIDEgMC00IDIgMiAwIDAgMSAwIDRaXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHsgdHlwZSBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL2JyYW5kL3dpZGdldC1maWx0ZXIuc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IFdpZGdldEZpbHRlck91dGxpbmVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xyXG4gIGNvbnN0IFNWRyA9IHdpbmRvdy5TVkdcclxuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xyXG5cclxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXHJcbiAgaWYgKCFTVkcpIHJldHVybiA8c3ZnIGNsYXNzTmFtZT17Y2xhc3Nlc30gey4uLm90aGVycyBhcyBhbnl9IC8+XHJcbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cclxufVxyXG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHsgdHlwZSBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL2Fycm93LWxlZnQuc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IEFycm93TGVmdE91dGxpbmVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xyXG4gIGNvbnN0IFNWRyA9IHdpbmRvdy5TVkdcclxuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xyXG5cclxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXHJcbiAgaWYgKCFTVkcpIHJldHVybiA8c3ZnIGNsYXNzTmFtZT17Y2xhc3Nlc30gey4uLm90aGVycyBhcyBhbnl9IC8+XHJcbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cclxufVxyXG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHsgdHlwZSBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL2Rvd24uc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IERvd25PdXRsaW5lZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcclxuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXHJcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcclxuXHJcbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxyXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxyXG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XHJcbn1cclxuIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB7IHR5cGUgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9sZWZ0LnN2ZydcclxuXHJcbmV4cG9ydCBjb25zdCBMZWZ0T3V0bGluZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XHJcbiAgY29uc3QgU1ZHID0gd2luZG93LlNWR1xyXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXHJcblxyXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcclxuICBpZiAoIVNWRykgcmV0dXJuIDxzdmcgY2xhc3NOYW1lPXtjbGFzc2VzfSB7Li4ub3RoZXJzIGFzIGFueX0gLz5cclxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxyXG59XHJcbiIsImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgeyB0eXBlIFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvcmlnaHQuc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IFJpZ2h0T3V0bGluZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XHJcbiAgY29uc3QgU1ZHID0gd2luZG93LlNWR1xyXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXHJcblxyXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcclxuICBpZiAoIVNWRykgcmV0dXJuIDxzdmcgY2xhc3NOYW1lPXtjbGFzc2VzfSB7Li4ub3RoZXJzIGFzIGFueX0gLz5cclxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxyXG59XHJcbiIsImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgeyB0eXBlIFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvdXAuc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IFVwT3V0bGluZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XHJcbiAgY29uc3QgU1ZHID0gd2luZG93LlNWR1xyXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXHJcblxyXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcclxuICBpZiAoIVNWRykgcmV0dXJuIDxzdmcgY2xhc3NOYW1lPXtjbGFzc2VzfSB7Li4ub3RoZXJzIGFzIGFueX0gLz5cclxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxyXG59XHJcbiIsImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgeyB0eXBlIFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvb3V0bGluZWQvZWRpdG9yL2Nsb3NlLnN2ZydcclxuXHJcbmV4cG9ydCBjb25zdCBDbG9zZU91dGxpbmVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xyXG4gIGNvbnN0IFNWRyA9IHdpbmRvdy5TVkdcclxuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xyXG5cclxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXHJcbiAgaWYgKCFTVkcpIHJldHVybiA8c3ZnIGNsYXNzTmFtZT17Y2xhc3Nlc30gey4uLm90aGVycyBhcyBhbnl9IC8+XHJcbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cclxufVxyXG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHsgdHlwZSBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL2VkaXRvci9tZW51LnN2ZydcclxuXHJcbmV4cG9ydCBjb25zdCBNZW51T3V0bGluZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XHJcbiAgY29uc3QgU1ZHID0gd2luZG93LlNWR1xyXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXHJcblxyXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcclxuICBpZiAoIVNWRykgcmV0dXJuIDxzdmcgY2xhc3NOYW1lPXtjbGFzc2VzfSB7Li4ub3RoZXJzIGFzIGFueX0gLz5cclxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxyXG59XHJcbiIsImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgeyB0eXBlIFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvb3V0bGluZWQvZWRpdG9yL3Jlc2V0LnN2ZydcclxuXHJcbmV4cG9ydCBjb25zdCBSZXNldE91dGxpbmVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xyXG4gIGNvbnN0IFNWRyA9IHdpbmRvdy5TVkdcclxuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xyXG5cclxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXHJcbiAgaWYgKCFTVkcpIHJldHVybiA8c3ZnIGNsYXNzTmFtZT17Y2xhc3Nlc30gey4uLm90aGVycyBhcyBhbnl9IC8+XHJcbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cclxufVxyXG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHsgdHlwZSBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL2VkaXRvci9zZWFyY2guc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IFNlYXJjaE91dGxpbmVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xyXG4gIGNvbnN0IFNWRyA9IHdpbmRvdy5TVkdcclxuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xyXG5cclxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXHJcbiAgaWYgKCFTVkcpIHJldHVybiA8c3ZnIGNsYXNzTmFtZT17Y2xhc3Nlc30gey4uLm90aGVycyBhcyBhbnl9IC8+XHJcbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cclxufVxyXG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHsgdHlwZSBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL2VkaXRvci9zaG93LXNlbGVjdGlvbi5zdmcnXHJcbmltcG9ydCBzcmNSVEwgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL2VkaXRvci9zaG93LXNlbGVjdGlvbi0tcnRsLnN2ZydcclxuXHJcbmV4cG9ydCBjb25zdCBTaG93U2VsZWN0aW9uT3V0bGluZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XHJcbiAgY29uc3QgU1ZHID0gd2luZG93LlNWR1xyXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXHJcblxyXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCBoYXMtcnRsLXN2ZycsIGNsYXNzTmFtZSlcclxuICBpZiAoIVNWRykgcmV0dXJuIDxzdmcgY2xhc3NOYW1lPXtjbGFzc2VzfSB7Li4ub3RoZXJzIGFzIGFueX0gLz5cclxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSBzcmNSVEw9e3NyY1JUTH0gey4uLm90aGVyc30gLz5cclxufVxyXG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHsgdHlwZSBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL2VkaXRvci9zeW5jLW9mZi5zdmcnXHJcblxyXG5leHBvcnQgY29uc3QgU3luY09mZk91dGxpbmVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xyXG4gIGNvbnN0IFNWRyA9IHdpbmRvdy5TVkdcclxuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xyXG5cclxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXHJcbiAgaWYgKCFTVkcpIHJldHVybiA8c3ZnIGNsYXNzTmFtZT17Y2xhc3Nlc30gey4uLm90aGVycyBhcyBhbnl9IC8+XHJcbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cclxufVxyXG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHsgdHlwZSBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL2VkaXRvci9zeW5jLW9uLnN2ZydcclxuXHJcbmV4cG9ydCBjb25zdCBTeW5jT25PdXRsaW5lZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcclxuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXHJcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcclxuXHJcbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxyXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxyXG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XHJcbn1cclxuIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB7IHR5cGUgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9vdXRsaW5lZC9lZGl0b3IvdHJhc2gtY2hlY2suc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IFRyYXNoQ2hlY2tPdXRsaW5lZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcclxuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXHJcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcclxuXHJcbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxyXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxyXG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XHJcbn1cclxuIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB7IHR5cGUgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9vdXRsaW5lZC9zdWdnZXN0ZWQvd2FybmluZy5zdmcnXHJcblxyXG5leHBvcnQgY29uc3QgV2FybmluZ091dGxpbmVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xyXG4gIGNvbnN0IFNWRyA9IHdpbmRvdy5TVkdcclxuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xyXG5cclxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXHJcbiAgaWYgKCFTVkcpIHJldHVybiA8c3ZnIGNsYXNzTmFtZT17Y2xhc3Nlc30gey4uLm90aGVycyBhcyBhbnl9IC8+XHJcbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cclxufVxyXG4iLCJpbXBvcnQgeyB0eXBlIEltbXV0YWJsZU9iamVjdCB9IGZyb20gJ3NlYW1sZXNzLWltbXV0YWJsZSdcclxuaW1wb3J0IHtcclxuICB0eXBlIEltYWdlUHJvcHMsXHJcbiAgdHlwZSBGaWxsVHlwZSxcclxuICB0eXBlIEltYWdlUGFyYW0sXHJcbiAgdHlwZSBCb3JkZXJTdHlsZSxcclxuICB0eXBlIEZvdXJTaWRlc1VuaXQsXHJcbiAgdHlwZSBCb3hTaGFkb3dTdHlsZSxcclxuICB0eXBlIExpbmVhclVuaXQsXHJcbiAgdHlwZSBUZXh0QWxpZ25WYWx1ZVxyXG59IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCB7IHR5cGUgU3FsRXhwcmVzc2lvbiB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHtcclxuICB0eXBlIFNvcnRTZXR0aW5nT3B0aW9uLFxyXG4gIHR5cGUgSU1MaW5rUGFyYW1cclxufSBmcm9tICdqaW11LXVpL2FkdmFuY2VkL3NldHRpbmctY29tcG9uZW50cydcclxuXHJcbi8vIFRPRE86IG1vdmUgdG8gY29yZVxyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvblxyXG5leHBvcnQgaW50ZXJmYWNlIGdvdG9Qcm9wcyB7XHJcbiAgdmlld3M6IHN0cmluZ1tdXHJcbn1cclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lICBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb25cclxuZXhwb3J0IGludGVyZmFjZSBnb3RvQWN0aW9uIHtcclxuICBnb3RvOiBnb3RvUHJvcHNcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTdWdnZXN0aW9uIHtcclxuICBzdWdnZXN0aW9uSHRtbDogc3RyaW5nIHwgRWxlbWVudFxyXG4gIHN1Z2dlc3Rpb246IHN0cmluZ1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgTElTVF9DQVJEX1BBRERJTkcgPSAwXHJcbmV4cG9ydCBjb25zdCBMSVNUX0NBUkRfTUlOX1NJWkUgPSAyMFxyXG5leHBvcnQgY29uc3QgRFNfVE9PTF9IID0gNDJcclxuZXhwb3J0IGNvbnN0IEJPVFRPTV9UT09MX0ggPSA0MFxyXG5leHBvcnQgY29uc3QgQ09NTU9OX1BBRERJTkcgPSAwXHJcbmV4cG9ydCBjb25zdCBEU19UT09MX0JPVFRPTV9QQURESU5HID0gMTRcclxuZXhwb3J0IGNvbnN0IEJPVFRPTV9UT09MX1RPUF9QQURESU5HID0gMTRcclxuZXhwb3J0IGNvbnN0IExJU1RfVE9PTF9NSU5fU0laRV9OT19EQVRBX0FDVElPTiA9IDE3NVxyXG5leHBvcnQgY29uc3QgTElTVF9UT09MX01JTl9TSVpFX0RBVEFfQUNUSU9OID0gMjIwXHJcbmV4cG9ydCBjb25zdCBERUZBVUxUX0NBUkRfU0laRSA9IDIwMFxyXG5leHBvcnQgY29uc3QgREVGQVVMVF9TUEFDRSA9IDEwXHJcbmV4cG9ydCBjb25zdCBTQ1JPTExfQkFSX1dJRFRIID0gOFxyXG5cclxuZXhwb3J0IGVudW0gU2V0dGluZ0NvbGxhcHNlVHlwZSB7XHJcbiAgTm9uZSA9ICdOT05FJyxcclxuICBBcnJhbmdlbWVudCA9ICdBUlJBTkdFTUVOVCcsXHJcbiAgU3RhdGVzID0gJ1NUQVRFUycsXHJcbiAgVG9vbHMgPSAnVE9PTFMnXHJcbn1cclxuXHJcbmludGVyZmFjZSBXaWRnZXRIZWFkZXJUaXRsZSB7XHJcbiAgdGV4dDogc3RyaW5nXHJcbiAgLy8gQWRkIGNvbG9yLCBzaXplLCBhbGlnbm1lbnQsIGV0Yy5cclxuICAvLyBBZGQgYW4gb3B0aW9uIHRvIGJpbmQgdGV4dCB0byBhIGZpZWxkXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgV2lkZ2V0SGVhZGVyIHtcclxuICB0aXRsZTogSW1tdXRhYmxlT2JqZWN0PFdpZGdldEhlYWRlclRpdGxlPlxyXG4gIC8vIFRPRE86XHJcbiAgLy8gQWRkIFwiYWN0aW9uXCIgc3VjaCBhcyBmaWx0ZXJcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBMaXN0RGl2U2l6ZSB7XHJcbiAgY2xpZW50V2lkdGg6IG51bWJlclxyXG4gIGNsaWVudEhlaWdodDogbnVtYmVyXHJcbn1cclxuXHJcbmludGVyZmFjZSBXaWRnZXRTdHlsZSB7XHJcbiAgaWQ6IHN0cmluZ1xyXG59XHJcbi8vIEVORDogVE9ET1xyXG5cclxuaW50ZXJmYWNlIExpc3RJdGVtQ29tcG9uZW50IHtcclxuICBmaWVsZDogc3RyaW5nXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgTGlzdEl0ZW1UaXRsZUNvbXBvbmVudCBleHRlbmRzIExpc3RJdGVtQ29tcG9uZW50IHt9XHJcbmV4cG9ydCBpbnRlcmZhY2UgTGlzdEl0ZW1EZXNjcmlwdGlvbkNvbXBvbmVudCBleHRlbmRzIExpc3RJdGVtQ29tcG9uZW50IHt9XHJcbmV4cG9ydCBpbnRlcmZhY2UgTGlzdEl0ZW1TZWxlY3Rpb25Nb2RlQ29tcG9uZW50IGV4dGVuZHMgTGlzdEl0ZW1Db21wb25lbnQge31cclxuZXhwb3J0IGludGVyZmFjZSBMaXN0SXRlbUltYWdlQ29tcG9uZW50IGV4dGVuZHMgTGlzdEl0ZW1Db21wb25lbnQsIEltYWdlUHJvcHMge31cclxuXHJcbmV4cG9ydCBlbnVtIExpc3RMYXlvdXQge1xyXG4gIEFVVE8gPSAnQXV0bycsXHJcbiAgQ1VTVE9NID0gJ0N1c3RvbSdcclxufVxyXG5cclxuZXhwb3J0IGVudW0gU2VsZWN0aW9uTW9kZVR5cGUge1xyXG4gIE5vbmUgPSAnTk9ORScsXHJcbiAgU2luZ2xlID0gJ1NJTkdMRScsXHJcbiAgTXVsdGlwbGUgPSAnTVVMVElQTEUnXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFBhZ2VTdHlsZSB7XHJcbiAgU2Nyb2xsID0gJ1NDUk9MTCcsXHJcbiAgTXVsdGlQYWdlID0gJ01VTFRJUEFHRSdcclxufVxyXG5cclxuZXhwb3J0IGVudW0gQWxpZ25UeXBlIHtcclxuICBTdGFydCA9ICdGTEVYLVNUQVJUJyxcclxuICBDZW50ZXIgPSAnQ0VOVEVSJyxcclxuICBFbmQgPSAnRkxFWC1FTkQnXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIERpcmVjdGlvblR5cGUge1xyXG4gIEhvcml6b24gPSAnSE9SSVpPTicsXHJcbiAgVmVydGljYWwgPSAnVkVSVElDQUwnXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIExpc3RMYXlvdXRUeXBlIHtcclxuICBSb3cgPSAnUk9XJyxcclxuICBDb2x1bW4gPSAnQ09MVU1OJyxcclxuICBHUklEID0gJ0dSSUQnXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFBhZ2VUcmFuc2l0b25UeXBlIHtcclxuICBHbGlkZSA9ICdHTElERScsXHJcbiAgRmFkZSA9ICdGQURFJyxcclxuICBGbG9hdCA9ICdGTE9BVCdcclxufVxyXG5cclxuZXhwb3J0IGVudW0gSG92ZXJUeXBlIHtcclxuICBIb3ZlcjAgPSAnSE9WRVIwJyxcclxuICBIb3ZlcjEgPSAnSE9WRVIxJyxcclxuICBIb3ZlcjIgPSAnSE9WRVIyJyxcclxuICBIb3ZlcjMgPSAnSE9WRVIzJ1xyXG59XHJcblxyXG5leHBvcnQgZW51bSBTZWxlY3RlZFN0eWxlIHtcclxuICBTdHlsZTAgPSAnU1RZTEUwJyxcclxuICBTdHlsZTEgPSAnU1RZTEUxJyxcclxuICBTdHlsZTIgPSAnU1RZTEUyJyxcclxuICBTdHlsZTMgPSAnU1RZTEUzJ1xyXG59XHJcblxyXG5leHBvcnQgZW51bSBJdGVtU3R5bGUge1xyXG4gIFN0eWxlMCA9ICdTVFlMRTAnLFxyXG4gIFN0eWxlMSA9ICdTVFlMRTEnLFxyXG4gIFN0eWxlMiA9ICdTVFlMRTInLFxyXG4gIFN0eWxlMyA9ICdTVFlMRTMnLFxyXG4gIFN0eWxlNCA9ICdTVFlMRTQnLFxyXG4gIFN0eWxlNSA9ICdTVFlMRTUnLFxyXG4gIFN0eWxlNiA9ICdTVFlMRTYnLFxyXG4gIFN0eWxlNyA9ICdTVFlMRTcnLFxyXG4gIFN0eWxlOCA9ICdTVFlMRTgnLFxyXG4gIFN0eWxlOSA9ICdTVFlMRTknXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFN0YXR1cyB7XHJcbiAgUmVndWxhciA9ICdSRUdVTEFSJyxcclxuICBTZWxlY3RlZCA9ICdTRUxFQ1RFRCcsXHJcbiAgSG92ZXIgPSAnSE9WRVInXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZFNpemUge1xyXG4gIGhlaWdodDogbnVtYmVyIHwgc3RyaW5nXHJcbiAgd2lkdGg6IG51bWJlciB8IHN0cmluZ1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEVsZW1lbnRTaXplIHtcclxuICBoZWlnaHQ6IG51bWJlclxyXG4gIHdpZHRoOiBudW1iZXJcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBFbGVtZW50U2l6ZVVuaXQge1xyXG4gIGhlaWdodDogTGluZWFyVW5pdFxyXG4gIHdpZHRoOiBMaW5lYXJVbml0XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRGV2aWNlQ2FyZFNpemUge1xyXG4gIFtkZXZpY2VNb2RlOiBzdHJpbmddOiBDYXJkU2l6ZVxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENhcmRCYWNrZ3JvdW5kU3R5bGUge1xyXG4gIGJhY2tncm91bmQ6IHtcclxuICAgIGNvbG9yOiBzdHJpbmdcclxuICAgIGZpbGxUeXBlOiBGaWxsVHlwZVxyXG4gICAgaW1hZ2U6IEltYWdlUGFyYW1cclxuICB9XHJcbiAgYm9yZGVyOiBCb3JkZXJTdHlsZVxyXG4gIGJvcmRlclJhZGl1czogRm91clNpZGVzVW5pdFxyXG4gIGJveFNoYWRvdzogQm94U2hhZG93U3R5bGVcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBDYXJkQ29uZmlnIHtcclxuICBiYWNrZ3JvdW5kU3R5bGU/OiBDYXJkQmFja2dyb3VuZFN0eWxlXHJcbiAgZW5hYmxlPzogYm9vbGVhblxyXG4gIHNlbGVjdGlvbk1vZGU/OiBTZWxlY3Rpb25Nb2RlVHlwZVxyXG4gIGNhcmRTaXplPzogRGV2aWNlQ2FyZFNpemVcclxuICBsaXN0TGF5b3V0PzogTGlzdExheW91dFxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBJTUNhcmRDb25maWcgPSBJbW11dGFibGVPYmplY3Q8Q2FyZENvbmZpZz5cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ29uZmlnIHtcclxuICBwYWdlVHJhbnNpdGlvbj86IFBhZ2VUcmFuc2l0b25UeXBlXHJcbiAgaG92ZXJUeXBlPzogSG92ZXJUeXBlXHJcbiAgc2VsZWN0ZWRTdHlsZT86IFNlbGVjdGVkU3R5bGVcclxuICBkaWZmZXJlbnRPZGRFdmVuPzogYm9vbGVhblxyXG4gIGl0ZW1TdHlsZT86IEl0ZW1TdHlsZVxyXG4gIGlzQ2hlY2tFbXB0eVRlbXBsYXRlPzogYm9vbGVhblxyXG4gIGlzSXRlbVN0eWxlQ29uZmlybT86IGJvb2xlYW5cclxuICBkaXJlY3Rpb24/OiBEaXJlY3Rpb25UeXBlXHJcbiAgYWxpZ25UeXBlPzogQWxpZ25UeXBlXHJcbiAgc3BhY2U/OiBudW1iZXJcclxuICBob3Jpem9udGFsU3BhY2U/OiBudW1iZXJcclxuICB2ZXJ0aWNhbFNwYWNlPzogbnVtYmVyXHJcbiAgaXRlbXNQZXJQYWdlPzogbnVtYmVyXHJcbiAgcGFnZVN0eWxlPzogUGFnZVN0eWxlXHJcbiAgc2Nyb2xsQmFyT3Blbj86IGJvb2xlYW5cclxuICBuYXZpZ2F0b3JPcGVuPzogYm9vbGVhblxyXG4gIHNjcm9sbFN0ZXA/OiBudW1iZXJcclxuICBzdHlsZT86IEltbXV0YWJsZU9iamVjdDxXaWRnZXRTdHlsZT5cclxuICBpc0luaXRpYWxlZD86IGJvb2xlYW5cclxuICBsb2NrSXRlbVJhdGlvPzogYm9vbGVhblxyXG4gIHNob3dTZWxlY3RlZE9ubHlPcGVuPzogYm9vbGVhblxyXG4gIHNob3dDbGVhclNlbGVjdGVkPzogYm9vbGVhblxyXG4gIGdyaWRBbGlnbm1lbnQ/OiBUZXh0QWxpZ25WYWx1ZVxyXG5cclxuICAvLyBsaW5rXHJcbiAgbGlua1BhcmFtPzogSU1MaW5rUGFyYW1cclxuXHJcbiAgLy8gc2VhcmNoXHJcbiAgc2VhcmNoT3Blbj86IGJvb2xlYW5cclxuICBzZWFyY2hGaWVsZHM/OiBzdHJpbmdcclxuICBzZWFyY2hFeGFjdD86IGJvb2xlYW5cclxuICAvLyBmaWx0ZXJcclxuICBmaWx0ZXJPcGVuPzogYm9vbGVhblxyXG4gIGZpbHRlcj86IFNxbEV4cHJlc3Npb25cclxuICAvLyBzb3J0XHJcbiAgc29ydE9wZW4/OiBib29sZWFuXHJcbiAgc29ydHM/OiBTb3J0U2V0dGluZ09wdGlvbltdXHJcblxyXG4gIC8vIGNhcmQgYmFja2dyb3VuZFxyXG4gIGNhcmRDb25maWdzPzogSW1tdXRhYmxlT2JqZWN0PHsgW3N0YXR1czogc3RyaW5nXTogQ2FyZENvbmZpZyB9PlxyXG4gIHNlYXJjaEhpbnQ/OiBzdHJpbmdcclxuXHJcbiAgaXNTaG93QXV0b1JlZnJlc2g/OiBib29sZWFuXHJcbiAgbm9EYXRhTWVzc2FnZT86IHN0cmluZ1xyXG4gIGxheW91dFR5cGU/OiBMaXN0TGF5b3V0VHlwZVxyXG4gIGtlZXBBc3BlY3RSYXRpbz86IGJvb2xlYW5cclxuICBncmlkSXRlbVNpemVSYXRpbz86IG51bWJlclxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBJTUNvbmZpZyA9IEltbXV0YWJsZU9iamVjdDxDb25maWc+XHJcbiIsImltcG9ydCB7IFJlYWN0LCBwb2xpc2hlZCB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHsgUGFnaW5hdGlvbiwgQnV0dG9uIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHsgUGFnZVN0eWxlLCBMaXN0TGF5b3V0VHlwZSB9IGZyb20gJy4uLy4uL2NvbmZpZydcclxuaW1wb3J0IHsgTGVmdE91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9sZWZ0J1xyXG5pbXBvcnQgeyBVcE91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC91cCdcclxuaW1wb3J0IHsgUmlnaHRPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZGlyZWN0aW9uYWwvcmlnaHQnXHJcbmltcG9ydCB7IERvd25PdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZGlyZWN0aW9uYWwvZG93bidcclxuXHJcbmludGVyZmFjZSBMaXN0Qm90dG9tVG9vbFByb3BzIHtcclxuICBpc1JUTDogYm9vbGVhblxyXG4gIHRvdGFsUGFnZTogbnVtYmVyXHJcbiAgY3VycmVudFBhZ2U6IG51bWJlclxyXG4gIHBhZ2VTdHlsZTogUGFnZVN0eWxlXHJcbiAgc2Nyb2xsU3RhdHVzOiAnc3RhcnQnIHwgJ2VuZCcgfCAnbWlkJ1xyXG4gIGlzRWRpdGluZzogYm9vbGVhblxyXG4gIGlzU2Nyb2xsRW5kOiBib29sZWFuXHJcbiAgc2hvd0xvYWRpbmc6IGJvb2xlYW5cclxuICBsYXlvdXRUeXBlOiBMaXN0TGF5b3V0VHlwZVxyXG4gIGhhbmRsZVNjcm9sbFVwOiAoZXZ0OiBSZWFjdC5Nb3VzZUV2ZW50KSA9PiB2b2lkXHJcbiAgaGFuZGxlU2Nyb2xsRG93bjogKGV2dDogUmVhY3QuTW91c2VFdmVudCkgPT4gdm9pZFxyXG4gIGhhbmRsZVN3aXRjaFBhZ2U6IChwYWdlTnVtOiBudW1iZXIpID0+IHZvaWRcclxuICBmb3JtYXRNZXNzYWdlOiAoaWQ6IHN0cmluZywgdmFsdWVzPzogeyBba2V5OiBzdHJpbmddOiBhbnkgfSkgPT4gc3RyaW5nXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBMaXN0Qm90dG9tVG9vbHMgKHByb3BzOiBMaXN0Qm90dG9tVG9vbFByb3BzKSB7XHJcbiAgY29uc3Qge1xyXG4gICAgaXNSVEwsXHJcbiAgICB0b3RhbFBhZ2UsXHJcbiAgICBwYWdlU3R5bGUsXHJcbiAgICBjdXJyZW50UGFnZSxcclxuICAgIHNjcm9sbFN0YXR1cyxcclxuICAgIGlzU2Nyb2xsRW5kLFxyXG4gICAgaXNFZGl0aW5nLFxyXG4gICAgc2hvd0xvYWRpbmcsXHJcbiAgICBsYXlvdXRUeXBlLFxyXG4gICAgaGFuZGxlU2Nyb2xsRG93bixcclxuICAgIGhhbmRsZVNjcm9sbFVwLFxyXG4gICAgaGFuZGxlU3dpdGNoUGFnZSxcclxuICAgIGZvcm1hdE1lc3NhZ2VcclxuICB9ID0gcHJvcHNcclxuICByZXR1cm4gKFxyXG4gICAgPGRpdiBjbGFzc05hbWU9J2JvdHRvbS10b29scyB3LTEwMCBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyIGp1c3RpZnktY29udGVudC1jZW50ZXIgcGwtMiBwci0yJz5cclxuICAgICAge3BhZ2VTdHlsZSA9PT0gUGFnZVN0eWxlLk11bHRpUGFnZVxyXG4gICAgICAgID8gKFxyXG4gICAgICAgICAgPFBhZ2luYXRpb25cclxuICAgICAgICAgICAgc2l6ZT0nc20nXHJcbiAgICAgICAgICAgIHRvdGFsUGFnZT17dG90YWxQYWdlfVxyXG4gICAgICAgICAgICBjdXJyZW50PXtjdXJyZW50UGFnZX1cclxuICAgICAgICAgICAgb25DaGFuZ2VQYWdlPXtoYW5kbGVTd2l0Y2hQYWdlfVxyXG4gICAgICAgICAgICBkaXNhYmxlZD17c2hvd0xvYWRpbmd9XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgICAgKVxyXG4gICAgICAgIDogKFxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2QtZmxleCBzY3JvbGwtbmF2aWdhdG9yJz5cclxuICAgICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICAgIHRpdGxlPXtmb3JtYXRNZXNzYWdlKCdwcmV2aW91cycpfVxyXG4gICAgICAgICAgICAgIGRpc2FibGVkPXtzY3JvbGxTdGF0dXMgPT09ICdzdGFydCd9XHJcbiAgICAgICAgICAgICAgdHlwZT0nc2Vjb25kYXJ5J1xyXG4gICAgICAgICAgICAgIHNpemU9J3NtJ1xyXG4gICAgICAgICAgICAgIGljb25cclxuICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVTY3JvbGxVcH1cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgIHtsYXlvdXRUeXBlID09PSBMaXN0TGF5b3V0VHlwZS5Db2x1bW4gPyA8TGVmdE91dGxpbmVkIHNpemU9ezEyfS8+IDogPFVwT3V0bGluZWQgc2l6ZT17MTJ9Lz59XHJcbiAgICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgICAgdGl0bGU9e2Zvcm1hdE1lc3NhZ2UoJ25leHQnKX1cclxuICAgICAgICAgICAgICBkaXNhYmxlZD17c2Nyb2xsU3RhdHVzID09PSAnZW5kJyB8fCBpc1Njcm9sbEVuZH1cclxuICAgICAgICAgICAgICB0eXBlPSdzZWNvbmRhcnknXHJcbiAgICAgICAgICAgICAgc2l6ZT0nc20nXHJcbiAgICAgICAgICAgICAgc3R5bGU9e1xyXG4gICAgICAgICAgICAgICAgaXNSVExcclxuICAgICAgICAgICAgICAgICAgPyB7IG1hcmdpblJpZ2h0OiBwb2xpc2hlZC5yZW0oMTApIH1cclxuICAgICAgICAgICAgICAgICAgOiB7IG1hcmdpbkxlZnQ6IHBvbGlzaGVkLnJlbSgxMCkgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBpY29uXHJcbiAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlU2Nyb2xsRG93bn1cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgIHtsYXlvdXRUeXBlID09PSBMaXN0TGF5b3V0VHlwZS5Db2x1bW4gPyA8UmlnaHRPdXRsaW5lZC8+IDogPERvd25PdXRsaW5lZC8+fVxyXG4gICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgKX1cclxuICAgICAge3dpbmRvdy5qaW11Q29uZmlnLmlzSW5CdWlsZGVyICYmIGlzRWRpdGluZyAmJiAoXHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J2VkaXRpbmctbWFzay1ib3R0b20tdG9vbCcgLz5cclxuICAgICAgKX1cclxuICAgIDwvZGl2PlxyXG4gIClcclxufVxyXG4iLCIvKiogQGpzeCBqc3ggKi9cclxuaW1wb3J0IHtcclxuICBSZWFjdCxcclxuICBqc3gsXHJcbiAgdHlwZSBJTVNxbEV4cHJlc3Npb24sXHJcbiAgdHlwZSBEYXRhU291cmNlLFxyXG4gIHR5cGUgSU1UaGVtZVZhcmlhYmxlcyxcclxuICBwb2xpc2hlZCxcclxuICBjc3MsXHJcbiAgQXBwTW9kZSxcclxuICB0eXBlIFNlcmlhbGl6ZWRTdHlsZXNcclxufSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB7IEJ1dHRvbiwgUG9wcGVyIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHsgU3FsRXhwcmVzc2lvblJ1bnRpbWUgfSBmcm9tICdqaW11LXVpL2Jhc2ljL3NxbC1leHByZXNzaW9uLXJ1bnRpbWUnXHJcbmltcG9ydCB7IEZyYWdtZW50IH0gZnJvbSAncmVhY3QnXHJcbmltcG9ydCB7IFdpZGdldEZpbHRlck91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9icmFuZC93aWRnZXQtZmlsdGVyJ1xyXG5pbXBvcnQgeyBSZXNldE91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9lZGl0b3IvcmVzZXQnXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgYXBwTW9kZTogQXBwTW9kZVxyXG4gIGZpbHRlcjogSU1TcWxFeHByZXNzaW9uXHJcbiAgZmlsdGVySW5Db25maWc6IElNU3FsRXhwcmVzc2lvblxyXG4gIHNlbGVjdGVkRHM6IERhdGFTb3VyY2VcclxuICB3aWRnZXRJZDogc3RyaW5nXHJcbiAgdGl0bGU6IHN0cmluZ1xyXG4gIGFwcGxpZWQ6IGJvb2xlYW5cclxuICBoYW5kbGVGaWx0ZXJDaGFuZ2U6IChzcWxFeHByT2JqOiBJTVNxbEV4cHJlc3Npb24pID0+IHZvaWRcclxuICBoYW5kbGVGaWx0ZXJBcHBseUNoYW5nZTogKGFwcGx5OiBib29sZWFuKSA9PiB2b2lkXHJcbiAgZm9ybWF0TWVzc2FnZTogKGlkOiBzdHJpbmcsIHZhbHVlcz86IHsgW2tleTogc3RyaW5nXTogYW55IH0pID0+IHN0cmluZ1xyXG4gIHRoZW1lOiBJTVRoZW1lVmFyaWFibGVzXHJcbn1cclxuXHJcbmludGVyZmFjZSBTdGF0cyB7XHJcbiAgaXNPcGVuOiBib29sZWFuXHJcbiAgY3VycmVudEZpbHRlcjogSU1TcWxFeHByZXNzaW9uXHJcbn1cclxuXHJcbmNvbnN0IHBvcHBlck9mZnNldCA9IFswLCA1XVxyXG5jb25zdCBwb3BwZXJNb2RpZmllcnMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogJ2ZsaXAnLFxyXG4gICAgb3B0aW9uczoge1xyXG4gICAgICBib3VuZGFyeTogZG9jdW1lbnQuYm9keSxcclxuICAgICAgZmFsbGJhY2tQbGFjZW1lbnRzOiBbJ2JvdHRvbS1zdGFydCcsICdyaWdodC1lbmQnLCAndG9wLXN0YXJ0JywgJ2xlZnQtc3RhcnQnXVxyXG4gICAgfVxyXG4gIH1cclxuXVxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGaWx0ZXJQaWNrZXIgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PFByb3BzLCBTdGF0cz4ge1xyXG4gIHRvZ2dsZVJlZjogUmVhY3QuUmVmT2JqZWN0PEhUTUxCdXR0b25FbGVtZW50PlxyXG5cclxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKVxyXG5cclxuICAgIHRoaXMudG9nZ2xlUmVmID0gUmVhY3QuY3JlYXRlUmVmKClcclxuICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIGlzT3BlbjogZmFsc2UsXHJcbiAgICAgIGN1cnJlbnRGaWx0ZXI6IHByb3BzLmZpbHRlclxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50RGlkVXBkYXRlIChwcmVQcm9wczogUHJvcHMpIHtcclxuICAgIGNvbnN0IHsgZmlsdGVyLCBhcHBNb2RlIH0gPSB0aGlzLnByb3BzXHJcbiAgICBpZiAoZmlsdGVyICE9PSBwcmVQcm9wcy5maWx0ZXIpIHtcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgY3VycmVudEZpbHRlcjogZmlsdGVyXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBpZiAoYXBwTW9kZSAhPT0gcHJlUHJvcHMuYXBwTW9kZSkge1xyXG4gICAgICBpZiAoYXBwTW9kZSA9PT0gQXBwTW9kZS5EZXNpZ24pIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgIGlzT3BlbjogZmFsc2VcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmb3JtYXRNZXNzYWdlID0gKGlkOiBzdHJpbmcsIHZhbHVlcz86IHsgW2tleTogc3RyaW5nXTogYW55IH0pID0+IHtcclxuICAgIHJldHVybiB0aGlzLnByb3BzLmZvcm1hdE1lc3NhZ2UoaWQsIHZhbHVlcylcclxuICB9XHJcblxyXG4gIG9uUG9wcGVyVG9nZ2xlID0gZXZ0ID0+IHtcclxuICAgIGNvbnN0IHsgZmlsdGVyIH0gPSB0aGlzLnByb3BzXHJcbiAgICBjb25zdCB7IGlzT3BlbiB9ID0gdGhpcy5zdGF0ZVxyXG4gICAgaWYgKCFpc09wZW4pIHtcclxuICAgICAgLy8gd2lsbCBvcGVuXHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgIGN1cnJlbnRGaWx0ZXI6IGZpbHRlclxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gICAgdGhpcy5zZXRTdGF0ZSh7IGlzT3BlbjogIWlzT3BlbiB9KVxyXG4gIH1cclxuXHJcbiAgb25JdGVtQ2xpY2sgPSAoZXZ0LCBpdGVtKSA9PiB7XHJcbiAgICB0aGlzLnNldFN0YXRlKHsgaXNPcGVuOiBmYWxzZSB9KVxyXG4gICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpXHJcbiAgICBldnQubmF0aXZlRXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKClcclxuICB9XHJcblxyXG4gIGhhbmRsZUZpbHRlckNoYW5nZSA9IChzcWxFeHByT2JqOiBJTVNxbEV4cHJlc3Npb24pID0+IHtcclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICBjdXJyZW50RmlsdGVyOiBzcWxFeHByT2JqXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlQXBwbHlDbGljayA9IGV2dCA9PiB7XHJcbiAgICBjb25zdCB7IGN1cnJlbnRGaWx0ZXIgfSA9IHRoaXMuc3RhdGVcclxuICAgIGNvbnN0IHsgaGFuZGxlRmlsdGVyQXBwbHlDaGFuZ2UsIGhhbmRsZUZpbHRlckNoYW5nZSB9ID0gdGhpcy5wcm9wc1xyXG4gICAgaGFuZGxlRmlsdGVyQ2hhbmdlKGN1cnJlbnRGaWx0ZXIpXHJcbiAgICBoYW5kbGVGaWx0ZXJBcHBseUNoYW5nZSh0cnVlKVxyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIGlzT3BlbjogZmFsc2VcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBoYW5kbGVSZXNldENsaWNrID0gZXZ0ID0+IHtcclxuICAgIGNvbnN0IHsgaGFuZGxlRmlsdGVyQXBwbHlDaGFuZ2UsIGhhbmRsZUZpbHRlckNoYW5nZSB9ID0gdGhpcy5wcm9wc1xyXG4gICAgaGFuZGxlRmlsdGVyQXBwbHlDaGFuZ2UoZmFsc2UpXHJcbiAgICBoYW5kbGVGaWx0ZXJDaGFuZ2UodGhpcy5wcm9wcy5maWx0ZXJJbkNvbmZpZylcclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICBjdXJyZW50RmlsdGVyOiB0aGlzLnByb3BzLmZpbHRlckluQ29uZmlnXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlQ2xlYXJDbGljayA9IGV2dCA9PiB7XHJcbiAgICBjb25zdCB7IGhhbmRsZUZpbHRlckFwcGx5Q2hhbmdlIH0gPSB0aGlzLnByb3BzXHJcbiAgICBoYW5kbGVGaWx0ZXJBcHBseUNoYW5nZShmYWxzZSlcclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICBpc09wZW46IGZhbHNlXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgZ2V0U3R5bGUgPSAoKTogU2VyaWFsaXplZFN0eWxlcyA9PiB7XHJcbiAgICBjb25zdCB7IHRoZW1lIH0gPSB0aGlzLnByb3BzXHJcbiAgICByZXR1cm4gY3NzYFxyXG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgICAgIC5kb3Qge1xyXG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgICAgICB3aWR0aDogNnB4O1xyXG4gICAgICAgIGhlaWdodDogNnB4O1xyXG4gICAgICAgIHJpZ2h0OiAtMnB4O1xyXG4gICAgICAgIHRvcDogMHB4O1xyXG4gICAgICAgIC5kb3QtYm90dG9tIHtcclxuICAgICAgICAgIHdpZHRoOiA2cHg7XHJcbiAgICAgICAgICBoZWlnaHQ6IDZweDtcclxuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xyXG4gICAgICAgICAgLmRvdC10b3Age1xyXG4gICAgICAgICAgICB3aWR0aDogNHB4O1xyXG4gICAgICAgICAgICBoZWlnaHQ6IDRweDtcclxuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt0aGVtZS5jb2xvcnMucGFsZXR0ZS5kYXJrWzYwMF19O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICA6aG92ZXIge1xyXG4gICAgICAgIC5kb3QtdG9wIHtcclxuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7dGhlbWUuY29sb3JzLnBhbGV0dGUucHJpbWFyeVs1MDBdfTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgJiAuYWN0aXZlIHtcclxuICAgICAgICAuZG90LXRvcCB7XHJcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3RoZW1lLmNvbG9ycy53aGl0ZX07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIDpob3ZlciB7XHJcbiAgICAgICAgICAuZG90LXRvcCB7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7dGhlbWUuY29sb3JzLndoaXRlfTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIGBcclxuICB9XHJcblxyXG4gIGdldFBvcHBlclN0eWxlID0gKCkgPT4ge1xyXG4gICAgcmV0dXJuIGNzc2BcclxuICAgICAgLmZpbHRlci1idXR0b24tY29uICB7XHJcbiAgICAgICAgJiB7XHJcbiAgICAgICAgICB0ZXh0LWFsaWduOiByaWdodDtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnV0dG9uIHtcclxuICAgICAgICAgIG1heC13aWR0aDogJHtwb2xpc2hlZC5yZW0oOTIpfTtcclxuICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XHJcbiAgICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcclxuICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJ1dHRvbiBzdmcge1xyXG4gICAgICAgICAgbWFyZ2luLXJpZ2h0OiAwICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC5yZXNldC1idXR0b24ge1xyXG4gICAgICAgICAgcGFkZGluZy1sZWZ0OiAke3BvbGlzaGVkLnJlbSg1KX07XHJcbiAgICAgICAgICBwYWRkaW5nLXJpZ2h0OiAke3BvbGlzaGVkLnJlbSg1KX07XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIC5jbGVhci1idXR0b24sIC5yZXNldC1idXR0b24ge1xyXG4gICAgICAgIG1hcmdpbi1sZWZ0OiAke3BvbGlzaGVkLnJlbSg4KX07XHJcbiAgICAgIH1cclxuICAgIGBcclxuICB9XHJcblxyXG4gIHJlbmRlciAoKSB7XHJcbiAgICBjb25zdCB7IGZpbHRlciwgc2VsZWN0ZWREcywgd2lkZ2V0SWQsIHRpdGxlLCBhcHBsaWVkIH0gPSB0aGlzLnByb3BzXHJcbiAgICBjb25zdCB7IGlzT3BlbiwgY3VycmVudEZpbHRlciB9ID0gdGhpcy5zdGF0ZVxyXG4gICAgY29uc3QgaXNIYWRBcHBseSA9IGFwcGxpZWQgJiYgZmlsdGVyPy5zcWwgPT09IGN1cnJlbnRGaWx0ZXI/LnNxbFxyXG4gICAgcmV0dXJuIChcclxuICAgICAgPEZyYWdtZW50PlxyXG4gICAgICAgIDxCdXR0b25cclxuICAgICAgICAgIGNzcz17dGhpcy5nZXRTdHlsZSgpfVxyXG4gICAgICAgICAgc2l6ZT0nc20nXHJcbiAgICAgICAgICB0eXBlPSd0ZXJ0aWFyeSdcclxuICAgICAgICAgIGljb25cclxuICAgICAgICAgIHRpdGxlPXt0aXRsZX1cclxuICAgICAgICAgIHJlZj17dGhpcy50b2dnbGVSZWZ9XHJcbiAgICAgICAgICBvbkNsaWNrPXt0aGlzLm9uUG9wcGVyVG9nZ2xlfVxyXG4gICAgICAgID5cclxuICAgICAgICAgIDxXaWRnZXRGaWx0ZXJPdXRsaW5lZCBzaXplPXsxNn0vPlxyXG4gICAgICAgICAge2FwcGxpZWQgJiYgKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZG90IGFsaWduLWl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyJz5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZG90LWJvdHRvbSByb3VuZGVkLWNpcmNsZSc+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZG90LXRvcCByb3VuZGVkLWNpcmNsZScgLz5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICApfVxyXG4gICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgIDxQb3BwZXJcclxuICAgICAgICAgIHBsYWNlbWVudD0nYm90dG9tLXN0YXJ0J1xyXG4gICAgICAgICAgcmVmZXJlbmNlPXt0aGlzLnRvZ2dsZVJlZi5jdXJyZW50fVxyXG4gICAgICAgICAgb2Zmc2V0PXtwb3BwZXJPZmZzZXR9XHJcbiAgICAgICAgICB0b2dnbGU9e3RoaXMub25Qb3BwZXJUb2dnbGV9XHJcbiAgICAgICAgICBjc3M9e3RoaXMuZ2V0UG9wcGVyU3R5bGUoKX1cclxuICAgICAgICAgIG9wZW49e2lzT3Blbn1cclxuICAgICAgICAgIG1vZGlmaWVycz17cG9wcGVyTW9kaWZpZXJzfVxyXG4gICAgICAgID5cclxuICAgICAgICAgIDxkaXYgc3R5bGU9e3sgcGFkZGluZzogcG9saXNoZWQucmVtKDIwKSwgd2lkdGg6IHBvbGlzaGVkLnJlbSgyNTApIH19PlxyXG4gICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgIDxTcWxFeHByZXNzaW9uUnVudGltZVxyXG4gICAgICAgICAgICAgICAgd2lkZ2V0SWQ9e3dpZGdldElkfVxyXG4gICAgICAgICAgICAgICAgZGF0YVNvdXJjZT17c2VsZWN0ZWREc31cclxuICAgICAgICAgICAgICAgIGV4cHJlc3Npb249e2N1cnJlbnRGaWx0ZXJ9XHJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVGaWx0ZXJDaGFuZ2V9XHJcbiAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd3LTEwMCBtdC0zIGZpbHRlci1idXR0b24tY29uJz5cclxuICAgICAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17aXNIYWRBcHBseX1cclxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuaGFuZGxlQXBwbHlDbGlja31cclxuICAgICAgICAgICAgICAgIHR5cGU9J3ByaW1hcnknXHJcbiAgICAgICAgICAgICAgICB0aXRsZT17dGhpcy5mb3JtYXRNZXNzYWdlKCdhcHBseScpfVxyXG4gICAgICAgICAgICAgICAgc2l6ZT0nc20nXHJcbiAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAge3RoaXMuZm9ybWF0TWVzc2FnZSgnYXBwbHknKX1cclxuICAgICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17IWFwcGxpZWR9XHJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmhhbmRsZUNsZWFyQ2xpY2t9XHJcbiAgICAgICAgICAgICAgICB0aXRsZT17dGhpcy5mb3JtYXRNZXNzYWdlKCdjb21tb25Nb2RhbENhbmNlbCcpfVxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiY2xlYXItYnV0dG9uXCJcclxuICAgICAgICAgICAgICAgIHNpemU9J3NtJ1xyXG4gICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIHt0aGlzLmZvcm1hdE1lc3NhZ2UoJ2NvbW1vbk1vZGFsQ2FuY2VsJyl9XHJcbiAgICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5oYW5kbGVSZXNldENsaWNrfVxyXG4gICAgICAgICAgICAgICAgdGl0bGU9e3RoaXMuZm9ybWF0TWVzc2FnZSgncmVzZXRGaWx0ZXJzJyl9XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyZXNldC1idXR0b25cIlxyXG4gICAgICAgICAgICAgICAgc2l6ZT0nc20nXHJcbiAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPFJlc2V0T3V0bGluZWQgc2l6ZT0ncycvPlxyXG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvUG9wcGVyPlxyXG4gICAgICA8L0ZyYWdtZW50PlxyXG4gICAgKVxyXG4gIH1cclxufVxyXG4iLCIvKiogQGpzeCBqc3ggKi9cclxuaW1wb3J0IHtcclxuICBSZWFjdCxcclxuICBjc3MsXHJcbiAgdHlwZSBJTVRoZW1lVmFyaWFibGVzLFxyXG4gIHR5cGUgUmVwZWF0ZWREYXRhU291cmNlLFxyXG4gIEFwcE1vZGUsXHJcbiAgdHlwZSBCcm93c2VyU2l6ZU1vZGUsXHJcbiAgdHlwZSBEYXRhUmVjb3JkXHJcbn0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgeyB0eXBlIFN0YXR1cywgdHlwZSBMaXN0TGF5b3V0VHlwZSB9IGZyb20gJy4uLy4uL2NvbmZpZydcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgTGlzdENhcmRQcm9wcyB7XHJcbiAgaXNIb3ZlcjogYm9vbGVhblxyXG4gIGlzU2Nyb2xsaW5nOiBib29sZWFuXHJcbiAgdGhlbWU6IElNVGhlbWVWYXJpYWJsZXNcclxuICBpbmRleDogbnVtYmVyXHJcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xyXG4gIHJlY29yZDogRGF0YVJlY29yZFxyXG4gIGRhdGFzb3VyY2VJZDogc3RyaW5nXHJcbiAgbGlzdFN0eWxlOiBhbnlcclxuICBsYXlvdXRzOiBhbnlcclxuICBzcGFjZTogbnVtYmVyXHJcbiAgYWN0aXZlOiBib29sZWFuXHJcbiAgc2VsZWN0YWJsZTogYm9vbGVhblxyXG4gIGhvdmVyTGF5b3V0T3BlbjogYm9vbGVhblxyXG4gIGJyb3dzZXJTaXplTW9kZTogQnJvd3NlclNpemVNb2RlXHJcbiAgbGF5b3V0VHlwZTogTGlzdExheW91dFR5cGVcclxuICBmb3JtYXRNZXNzYWdlOiAoaWQ6IHN0cmluZywgdmFsdWVzPzogeyBba2V5OiBzdHJpbmddOiBhbnkgfSkgPT4gc3RyaW5nXHJcbiAgYXBwTW9kZTogQXBwTW9kZVxyXG4gIG9uQ2hhbmdlOiAoaXRlbVJlY29yZDogRGF0YVJlY29yZCkgPT4gdm9pZFxyXG4gIGNhcmRDb25maWdzPzogYW55XHJcbiAgaXRlbUlkZXg6IG51bWJlclxyXG4gIGhhbmRsZUxpc3RNb3VzZU1vdmU6IChpdGVtSW5kZXg6IG51bWJlcikgPT4gdm9pZFxyXG4gIGhhbmRsZUxpc3RNb3VzZUxlYXZlOiAoKSA9PiB2b2lkXHJcbiAgdXBkYXRlQ2FyZFRvb2xQb3NpdGlvbjogKCkgPT4gdm9pZFxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIExpc3RDYXJkU3RhdGVzIHtcclxuICBba2V5OiBzdHJpbmddOiBhbnlcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGlzdENhcmQ8XHJcbiAgUCBleHRlbmRzIExpc3RDYXJkUHJvcHMgPSBMaXN0Q2FyZFByb3BzLFxyXG4gIFMgZXh0ZW5kcyBMaXN0Q2FyZFN0YXRlcyA9IExpc3RDYXJkU3RhdGVzXHJcbj4gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UCwgUz4ge1xyXG4gIHByb3ZpZGVyRGF0YTogUmVwZWF0ZWREYXRhU291cmNlXHJcblxyXG4gIGdldE5ld1Byb3ZpZGVyRGF0YSA9ICgpID0+IHtcclxuICAgIGNvbnN0IHsgd2lkZ2V0SWQsIGRhdGFzb3VyY2VJZCwgaW5kZXgsIHJlY29yZCB9ID0gdGhpcy5wcm9wc1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgd2lkZ2V0SWQ6IHdpZGdldElkLFxyXG4gICAgICBkYXRhU291cmNlSWQ6IGRhdGFzb3VyY2VJZCxcclxuICAgICAgcmVjb3JkSW5kZXg6IGluZGV4LFxyXG4gICAgICByZWNvcmQ6IHJlY29yZFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2hvdWxkQ29tcG9uZW50VXBkYXRlRXhjZXB0ID0gKFxyXG4gICAgbmV4dFByb3BzLFxyXG4gICAgbmV4dFN0YXRzLFxyXG4gICAgZXhjZXB0UHJvcEtleXM6IHN0cmluZ1tdLFxyXG4gICAgZXhjZXB0U3RhdEtleXM6IHN0cmluZ1tdID0gW11cclxuICApID0+IHtcclxuICAgIGxldCBzaG91bGRVcGRhdGUgPSBmYWxzZVxyXG4gICAgdGhpcy5wcm9wcyAmJlxyXG4gICAgICBPYmplY3Qua2V5cyh0aGlzLnByb3BzKS5zb21lKGtleSA9PiB7XHJcbiAgICAgICAgaWYgKGV4Y2VwdFByb3BLZXlzLmluY2x1ZGVzKGtleSkpIHJldHVybiBmYWxzZVxyXG4gICAgICAgIGlmICh0aGlzLnByb3BzW2tleV0gIT09IG5leHRQcm9wc1trZXldKSB7XHJcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgcHJvcHMgaGFzIGNoYW5nZWQ6ICR7a2V5fWApXHJcbiAgICAgICAgICBzaG91bGRVcGRhdGUgPSB0cnVlXHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICB0aGlzLnN0YXRlICYmXHJcbiAgICAgIE9iamVjdC5rZXlzKHRoaXMuc3RhdGUpLnNvbWUoa2V5ID0+IHtcclxuICAgICAgICBpZiAoZXhjZXB0U3RhdEtleXMuaW5jbHVkZXMoa2V5KSkgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGVba2V5XSAhPT0gbmV4dFN0YXRzW2tleV0pIHtcclxuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGBzdGF0ZXMgaGFzIGNoYW5nZWQ6ICR7a2V5fWApXHJcbiAgICAgICAgICBzaG91bGRVcGRhdGUgPSB0cnVlXHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcblxyXG4gICAgcmV0dXJuIHNob3VsZFVwZGF0ZVxyXG4gIH1cclxuXHJcbiAgaXNQcm92aWRlckVxdWFsID0gKFxyXG4gICAgcHJvdmlkZXJEYXRhOiBSZXBlYXRlZERhdGFTb3VyY2UsXHJcbiAgICBvbGRQcm92aWRlckRhdGE6IFJlcGVhdGVkRGF0YVNvdXJjZVxyXG4gICk6IGJvb2xlYW4gPT4ge1xyXG4gICAgbGV0IGlzRXF1YWwgPSB0cnVlXHJcbiAgICBpZiAocHJvdmlkZXJEYXRhKSB7XHJcbiAgICAgIE9iamVjdC5rZXlzKHByb3ZpZGVyRGF0YSkuc29tZShrZXkgPT4ge1xyXG4gICAgICAgIGlmICghb2xkUHJvdmlkZXJEYXRhKSB7XHJcbiAgICAgICAgICBpc0VxdWFsID0gZmFsc2VcclxuICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBwcm92aWRlckRhdGFba2V5XVxyXG4gICAgICAgIGNvbnN0IG9sZERhdGEgPSBvbGRQcm92aWRlckRhdGFba2V5XVxyXG4gICAgICAgIGlmIChkYXRhICE9PSBvbGREYXRhKSB7XHJcbiAgICAgICAgICBpc0VxdWFsID0gZmFsc2VcclxuICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICB9KVxyXG4gICAgfSBlbHNlIGlmIChvbGRQcm92aWRlckRhdGEpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGlzRXF1YWxcclxuICB9XHJcblxyXG4gIGZvcm1hdE1lc3NhZ2UgPSAoaWQ6IHN0cmluZywgdmFsdWVzPzogeyBba2V5OiBzdHJpbmddOiBhbnkgfSkgPT4ge1xyXG4gICAgcmV0dXJuIHRoaXMucHJvcHMuZm9ybWF0TWVzc2FnZShpZCwgdmFsdWVzKVxyXG4gIH1cclxuXHJcbiAgY2hlY2tJc0JhY2tncm91bmRUcmFuc3BhcmVudCAoc3RhdHVzOiBTdGF0dXMpOiBib29sZWFuIHtcclxuICAgIGNvbnN0IHsgY2FyZENvbmZpZ3MgfSA9IHRoaXMucHJvcHNcclxuICAgIHJldHVybiBjYXJkQ29uZmlncz8uW3N0YXR1c10/LmJhY2tncm91bmRTdHlsZT8uYmFja2dyb3VuZD8uY29sb3IgPT09ICdyZ2JhKDAsMCwwLDApJ1xyXG4gIH1cclxuXHJcbiAgZ2V0U3R5bGUgPSAoc3RhdHVzOiBTdGF0dXMpID0+IHtcclxuICAgIGNvbnN0IHsgd2lkZ2V0SWQsIHNlbGVjdGFibGUsIGFwcE1vZGUgfSA9IHRoaXMucHJvcHNcclxuICAgIGNvbnN0IGlzQmFja2dyb3VuZFRyYW5zcGFyZW50ID0gdGhpcy5jaGVja0lzQmFja2dyb3VuZFRyYW5zcGFyZW50KHN0YXR1cylcclxuICAgIHJldHVybiBjc3NgXHJcbiAgICAgICR7JyYubGlzdC1jYXJkLScgKyB3aWRnZXRJZH0ge1xyXG4gICAgICAgIHBhZGRpbmc6IDA7XHJcbiAgICAgICAgYm9yZGVyOiAwO1xyXG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xyXG4gICAgICAgIC5saXN0LWNhcmQtY29udGVudCB7XHJcbiAgICAgICAgICB3aWR0aDogMTAwJTtcclxuICAgICAgICAgIGhlaWdodDogMTAwJTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgJi5zdXJmYWNlLTEge1xyXG4gICAgICAgIGJvcmRlcjogbm9uZSAhaW1wb3J0YW50O1xyXG4gICAgICAgIGJhY2tncm91bmQ6ICR7aXNCYWNrZ3JvdW5kVHJhbnNwYXJlbnQgJiYgJ25vbmUgIWltcG9ydGFudCd9O1xyXG4gICAgICB9XHJcbiAgICAgIC5saXN0LWNsZWFyLWJhY2tncm91bmQge1xyXG4gICAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7XHJcbiAgICAgIH1cclxuICAgICAgLmxpc3QtbGluayB7XHJcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgIGxlZnQ6IDA7XHJcbiAgICAgICAgdG9wOiAwO1xyXG4gICAgICAgIHJpZ2h0OiAwO1xyXG4gICAgICAgIGJvdHRvbTogMDtcclxuICAgICAgfVxyXG4gICAgICAubGlzdC1pdGVtLWNvbiB7XHJcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICAgICAgfVxyXG4gICAgICAkeycmLmxpc3QtY2FyZC0nICsgd2lkZ2V0SWR9OmhvdmVyIHtcclxuICAgICAgICAkeyghd2luZG93LmppbXVDb25maWcuaXNJbkJ1aWxkZXIgfHwgYXBwTW9kZSA9PT0gQXBwTW9kZS5SdW4pICYmXHJcbiAgICAgICAgc2VsZWN0YWJsZVxyXG4gICAgICAgICAgPyAnY3Vyc29yOiBwb2ludGVyOydcclxuICAgICAgICAgIDogJyd9XHJcbiAgICAgIH1cclxuICAgICAgLmNhcmQtZWRpdG9yLW1hc2sge1xyXG4gICAgICAgIHRvcDogMDtcclxuICAgICAgICBib3R0b206IDA7XHJcbiAgICAgICAgbGVmdDogMDtcclxuICAgICAgICByaWdodDogMDtcclxuICAgICAgICB6LWluZGV4OiAxMDA7XHJcbiAgICAgIH1cclxuICAgICAgLmppbXUtbGluayB7XHJcbiAgICAgICAgdGV4dC1hbGlnbjogbGVmdDtcclxuICAgICAgfVxyXG4gICAgYFxyXG4gIH1cclxufVxyXG4iLCIvKiogQGpzeCBqc3ggKi9cclxuaW1wb3J0IHtcclxuICBSZWFjdCxcclxuICBSZXBlYXRlZERhdGFTb3VyY2VQcm92aWRlcixcclxuICBqc3gsXHJcbiAgY3NzLFxyXG4gIHR5cGUgSU1UaGVtZVZhcmlhYmxlcyxcclxuICBBcHBNb2RlLFxyXG4gIHR5cGUgTGF5b3V0SW5mbyxcclxuICB1dGlscyxcclxuICBMYXlvdXRJdGVtVHlwZSxcclxuICBhcHBBY3Rpb25zLFxyXG4gIEltbXV0YWJsZSxcclxuICB0eXBlIEltbXV0YWJsZUFycmF5LFxyXG4gIHR5cGUgTGF5b3V0SXRlbUNvbnN0cnVjdG9yUHJvcHMsXHJcbiAgUmVhY3RSZWR1eCxcclxuICB0eXBlIElNU3RhdGUsXHJcbiAgY2xhc3NOYW1lcyxcclxuICB0eXBlIElNV2lkZ2V0SnNvblxyXG59IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHsgTGlzdEdyb3VwSXRlbSwgc3R5bGVVdGlscyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCB7XHJcbiAgdHlwZSBDYXJkU2l6ZSxcclxuICBTdGF0dXMsXHJcbiAgU2VsZWN0aW9uTW9kZVR5cGUsXHJcbiAgTElTVF9DQVJEX01JTl9TSVpFLFxyXG4gIExpc3RMYXlvdXQsXHJcbiAgTGlzdExheW91dFR5cGUsXHJcbiAgdHlwZSBJTUNhcmRDb25maWdcclxufSBmcm9tICcuLi8uLi9jb25maWcnXHJcbmltcG9ydCB7IHNlYXJjaFV0aWxzIH0gZnJvbSAnamltdS1sYXlvdXRzL2xheW91dC1ydW50aW1lJ1xyXG5pbXBvcnQgeyB0eXBlIE15RHJvcERvd25JdGVtIH0gZnJvbSAnLi9teS1kcm9wZG93bidcclxuaW1wb3J0IExpc3RDYXJkLCB7IHR5cGUgTGlzdENhcmRQcm9wcywgdHlwZSBMaXN0Q2FyZFN0YXRlcyB9IGZyb20gJy4vbGlzdC1jYXJkLWJhc2UnXHJcblxyXG5pbXBvcnQgeyBTeW5jT25PdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZWRpdG9yL3N5bmMtb24nXHJcbmltcG9ydCB7IFN5bmNPZmZPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZWRpdG9yL3N5bmMtb2ZmJ1xyXG5cclxuY29uc3QgY29ybmVyU2l6ZSA9IDEyXHJcbmNvbnN0IGNvcm5lclBvc2l0aW9uID0gLTEwXHJcbmNvbnN0IHNpZGVTaXplID0gMTZcclxuY29uc3Qgc2lkZVBvc2l0aW9uID0gLTEwXHJcbmNvbnN0IHppbmRleEhhbmRsZSA9IDIwXHJcblxyXG5pbnRlcmZhY2UgRXh0cmFQcm9wcyB7XHJcbiAgc2VsZWN0aW9uOiBMYXlvdXRJbmZvXHJcbiAgc2hvd0JyZWFrOiBib29sZWFuXHJcbiAgaG9yaXpvbnRhbFNwYWNlPzogbnVtYmVyXHJcbiAgaXNXaWR0aFBlcmNlbnRhZ2U/OiBib29sZWFuXHJcbn1cclxuXHJcbmNvbnN0IHN0YXRlc1BvcHBlck9mZnNldCA9IFswLCA1XVxyXG5jb25zdCBzdGF0ZXNNb2RpZmllcnMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogJ2ZsaXAnLFxyXG4gICAgb3B0aW9uczoge1xyXG4gICAgICBib3VuZGFyeTogZG9jdW1lbnQuYm9keSxcclxuICAgICAgZmFsbGJhY2tQbGFjZW1lbnRzOiBbJ3JpZ2h0LXN0YXJ0JywgJ2xlZnQtc3RhcnQnLCAnYm90dG9tLXN0YXJ0JywgJ3RvcC1lbmQnLCAndG9wLXN0YXJ0J11cclxuICAgIH1cclxuICB9XHJcbl1cclxuY29uc3QgYXBwbHlQb3BwZXJNb2RpZmllcnMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogJ29mZnNldCcsXHJcbiAgICBvcHRpb25zOiB7XHJcbiAgICAgIG9mZnNldDogWzAsIDEwXVxyXG4gICAgfVxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogJ2Fycm93JyxcclxuICAgIGVuYWJsZWQ6IHRydWVcclxuICB9XHJcbl1cclxuXHJcbmludGVyZmFjZSBMaXN0Q2FyZEVkaXRvclByb3BzIGV4dGVuZHMgTGlzdENhcmRQcm9wcyB7XHJcbiAgYnVpbGRlclN1cHBvcnRNb2R1bGVzPzogYW55XHJcbiAgaXNFZGl0aW5nPzogYm9vbGVhblxyXG4gIExheW91dEVudHJ5PzogYW55XHJcbiAgc2VsZWN0aW9uSXNMaXN0PzogYm9vbGVhblxyXG4gIHNlbGVjdGlvbklzSW5MaXN0PzogYm9vbGVhblxyXG4gIGJ1aWxkZXJTdGF0dXM/OiBTdGF0dXNcclxuICBpbnRlcmFjdD86IGFueVxyXG4gIGRpc3BhdGNoPzogYW55XHJcbiAgaXNSVEw/OiBib29sZWFuXHJcbiAgbG9ja0l0ZW1SYXRpbz86IGJvb2xlYW5cclxuICBrZWVwQXNwZWN0UmF0aW8/OiBib29sZWFuXHJcbiAgZ3JpZEl0ZW1TaXplUmF0aW8/OiBudW1iZXJcclxuICBoaWRlQ2FyZFRvb2w/OiBib29sZWFuXHJcbiAgY2FyZENvbmZpZ3M/OiBJTUNhcmRDb25maWdcclxuICBjaGFuZ2VJc1Jlc2l6aW5nQ2FyZDogKGlzUmVzaXppbmc6IGJvb2xlYW4pID0+IHZvaWRcclxuICBoYW5kbGVSZXNpemVDYXJkPzogKFxyXG4gICAgbmV3Q2FyZFNpemU6IENhcmRTaXplLFxyXG4gICAgcmVzaXplRW5kPzogYm9vbGVhbixcclxuICAgIGlzTGVmdD86IGJvb2xlYW4sXHJcbiAgICBpc1RvcD86IGJvb2xlYW4sXHJcbiAgICBpc0VuZD86IGJvb2xlYW5cclxuICApID0+IHZvaWRcclxuICBzZWxlY3RDYXJkPzogKCkgPT4gdm9pZFxyXG59XHJcblxyXG5pbnRlcmZhY2UgTGlzdENhcmRFZGl0b3JTdGF0ZXMgZXh0ZW5kcyBMaXN0Q2FyZFN0YXRlcyB7XHJcbiAgZGlkTW91bnQ6IGJvb2xlYW5cclxufVxyXG5cclxuY2xhc3MgX0xpc3RDYXJkRWRpdG9yIGV4dGVuZHMgTGlzdENhcmQ8XHJcbkxpc3RDYXJkRWRpdG9yUHJvcHMgJiBFeHRyYVByb3BzLFxyXG5MaXN0Q2FyZEVkaXRvclN0YXRlc1xyXG4+IHtcclxuICBpbnRlcmFjdGFibGU6IEludGVyYWN0LkludGVyYWN0YWJsZVxyXG4gIHJlc2l6ZVJlZjogUmVhY3QuUmVmT2JqZWN0PEhUTUxEaXZFbGVtZW50PlxyXG4gIGxhc3RSZXNpemVDYWxsID0gbnVsbFxyXG5cclxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKVxyXG5cclxuICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIGRpZE1vdW50OiBmYWxzZVxyXG4gICAgfVxyXG4gICAgdGhpcy5yZXNpemVSZWYgPSBSZWFjdC5jcmVhdGVSZWYoKVxyXG5cclxuICAgIHRoaXMucHJvdmlkZXJEYXRhID0gdGhpcy5nZXROZXdQcm92aWRlckRhdGEoKVxyXG4gIH1cclxuXHJcbiAgc2hvdWxkQ29tcG9uZW50VXBkYXRlIChuZXh0UHJvcHMsIG5leHRTdGF0cykge1xyXG4gICAgbGV0IHNob3VsZFVwZGF0ZSA9IHRoaXMuc2hvdWxkQ29tcG9uZW50VXBkYXRlRXhjZXB0KG5leHRQcm9wcywgbmV4dFN0YXRzLCBbXHJcbiAgICAgICdsaXN0U3R5bGUnLFxyXG4gICAgICAnc2VsZWN0aW9uJ1xyXG4gICAgXSlcclxuICAgIHNob3VsZFVwZGF0ZSA9XHJcbiAgICAgIHNob3VsZFVwZGF0ZSB8fFxyXG4gICAgICAhdXRpbHMuaXNEZWVwRXF1YWwodGhpcy5wcm9wcy5saXN0U3R5bGUsIG5leHRQcm9wcy5saXN0U3R5bGUpXHJcbiAgICBpZiAoIXNob3VsZFVwZGF0ZSkge1xyXG4gICAgICBjb25zdCB7IHNlbGVjdGlvbklzSW5MaXN0LCBzZWxlY3Rpb25Jc0xpc3QgfSA9IHRoaXMucHJvcHNcclxuICAgICAgaWYgKHNlbGVjdGlvbklzTGlzdCB8fCBzZWxlY3Rpb25Jc0luTGlzdCkge1xyXG4gICAgICAgIHNob3VsZFVwZGF0ZSA9ICF1dGlscy5pc0RlZXBFcXVhbChcclxuICAgICAgICAgIHRoaXMucHJvcHMuc2VsZWN0aW9uLFxyXG4gICAgICAgICAgbmV4dFByb3BzLnNlbGVjdGlvblxyXG4gICAgICAgIClcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHNob3VsZFVwZGF0ZVxyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50RGlkVXBkYXRlIChwcmVQcm9wcykge1xyXG4gICAgY29uc3Qge1xyXG4gICAgICBzZWxlY3Rpb25Jc0luTGlzdCxcclxuICAgICAgaXNFZGl0aW5nLFxyXG4gICAgICBsYXlvdXRUeXBlLFxyXG4gICAgICBpc1JUTCxcclxuICAgICAgbG9ja0l0ZW1SYXRpbyxcclxuICAgICAga2VlcEFzcGVjdFJhdGlvLFxyXG4gICAgICBpbmRleFxyXG4gICAgfSA9IHRoaXMucHJvcHNcclxuICAgIGlmICh3aW5kb3cuamltdUNvbmZpZy5pc0luQnVpbGRlciAmJiBpbmRleCA9PT0gMCkge1xyXG4gICAgICBpZiAodGhpcy5pbnRlcmFjdGFibGUpIHtcclxuICAgICAgICBpZiAoaXNFZGl0aW5nICYmICFzZWxlY3Rpb25Jc0luTGlzdCkge1xyXG4gICAgICAgICAgaWYgKGxheW91dFR5cGUgPT09IExpc3RMYXlvdXRUeXBlLkdSSUQpIHtcclxuICAgICAgICAgICAgdGhpcy5pbnRlcmFjdGFibGUucmVzaXphYmxlKHtcclxuICAgICAgICAgICAgICBlZGdlczoge1xyXG4gICAgICAgICAgICAgICAgdG9wOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGxlZnQ6IGlzUlRMLFxyXG4gICAgICAgICAgICAgICAgYm90dG9tOiAha2VlcEFzcGVjdFJhdGlvLFxyXG4gICAgICAgICAgICAgICAgcmlnaHQ6ICFpc1JUTFxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgdGhpcy5pbnRlcmFjdGFibGUucmVzaXphYmxlKHRydWUpXHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoIWxvY2tJdGVtUmF0aW8pIHtcclxuICAgICAgICAgICAgICB0aGlzLmludGVyYWN0YWJsZS5yZXNpemFibGUoe1xyXG4gICAgICAgICAgICAgICAgZWRnZXM6IHtcclxuICAgICAgICAgICAgICAgICAgdG9wOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgbGVmdDogbGF5b3V0VHlwZSA9PT0gTGlzdExheW91dFR5cGUuQ29sdW1uICYmIGlzUlRMLFxyXG4gICAgICAgICAgICAgICAgICBib3R0b206IGxheW91dFR5cGUgPT09IExpc3RMYXlvdXRUeXBlLlJvdyxcclxuICAgICAgICAgICAgICAgICAgcmlnaHQ6IGxheW91dFR5cGUgPT09IExpc3RMYXlvdXRUeXBlLkNvbHVtbiAmJiAhaXNSVExcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIHRoaXMuaW50ZXJhY3RhYmxlLnJlc2l6YWJsZSh0cnVlKVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHRoaXMuaW50ZXJhY3RhYmxlLnJlc2l6YWJsZShmYWxzZSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLmludGVyYWN0YWJsZS5yZXNpemFibGUoZmFsc2UpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnREaWRNb3VudCAoKSB7XHJcbiAgICBjb25zdCB7IGluZGV4LCBsYXlvdXRUeXBlLCB1cGRhdGVDYXJkVG9vbFBvc2l0aW9uLCBrZWVwQXNwZWN0UmF0aW8gfSA9IHRoaXMucHJvcHNcclxuICAgIGlmIChcclxuICAgICAgaW5kZXggPT09IDAgJiZcclxuICAgICAgd2luZG93LmppbXVDb25maWcuaXNJbkJ1aWxkZXIgJiZcclxuICAgICAgdGhpcy5yZXNpemVSZWYuY3VycmVudFxyXG4gICAgKSB7XHJcbiAgICAgIGNvbnN0IHsgaW50ZXJhY3QsIGhhbmRsZVJlc2l6ZUNhcmQsIGlzUlRMLCBsb2NrSXRlbVJhdGlvIH0gPSB0aGlzLnByb3BzXHJcbiAgICAgIHRoaXMuaW50ZXJhY3RhYmxlID0gaW50ZXJhY3QodGhpcy5yZXNpemVSZWYuY3VycmVudCkucmVzaXphYmxlKHtcclxuICAgICAgICAvLyByZXNpemUgZnJvbSBhbGwgZWRnZXMgYW5kIGNvcm5lcnNcclxuICAgICAgICBlZGdlczoge1xyXG4gICAgICAgICAgdG9wOiBmYWxzZSxcclxuICAgICAgICAgIGxlZnQ6IChsYXlvdXRUeXBlID09PSBMaXN0TGF5b3V0VHlwZS5Db2x1bW4gfHwgbGF5b3V0VHlwZSA9PT0gTGlzdExheW91dFR5cGUuR1JJRCkgJiYgaXNSVEwsXHJcbiAgICAgICAgICBib3R0b206ICgobGF5b3V0VHlwZSA9PT0gTGlzdExheW91dFR5cGUuUm93ICYmICFsb2NrSXRlbVJhdGlvKSB8fCAobGF5b3V0VHlwZSA9PT0gTGlzdExheW91dFR5cGUuR1JJRCAmJiAha2VlcEFzcGVjdFJhdGlvKSksXHJcbiAgICAgICAgICByaWdodDogKChsYXlvdXRUeXBlID09PSBMaXN0TGF5b3V0VHlwZS5Db2x1bW4gJiYgIWxvY2tJdGVtUmF0aW8pIHx8IGxheW91dFR5cGUgPT09IExpc3RMYXlvdXRUeXBlLkdSSUQpICYmICFpc1JUTFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbW9kaWZpZXJzOiBbXHJcbiAgICAgICAgICAvLyBrZWVwIHRoZSBlZGdlcyBpbnNpZGUgdGhlIHBhcmVudFxyXG4gICAgICAgICAgaW50ZXJhY3QubW9kaWZpZXJzLnJlc3RyaWN0RWRnZXMoe1xyXG4gICAgICAgICAgICBlbmRPbmx5OiB0cnVlXHJcbiAgICAgICAgICB9KSxcclxuXHJcbiAgICAgICAgICAvLyBtaW5pbXVtIHNpemVcclxuICAgICAgICAgIGludGVyYWN0Lm1vZGlmaWVycy5yZXN0cmljdFNpemUoe1xyXG4gICAgICAgICAgICBtaW46IHsgd2lkdGg6IExJU1RfQ0FSRF9NSU5fU0laRSwgaGVpZ2h0OiBMSVNUX0NBUkRfTUlOX1NJWkUgfVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICBdLFxyXG4gICAgICAgIGluZXJ0aWE6IGZhbHNlLFxyXG4gICAgICAgIG9uc3RhcnQ6IChldmVudDogSW50ZXJhY3QuSW50ZXJhY3RFdmVudCkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgeyBjaGFuZ2VJc1Jlc2l6aW5nQ2FyZCB9ID0gdGhpcy5wcm9wc1xyXG4gICAgICAgICAgaWYgKGNoYW5nZUlzUmVzaXppbmdDYXJkKSB7XHJcbiAgICAgICAgICAgIGNoYW5nZUlzUmVzaXppbmdDYXJkKHRydWUpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb25tb3ZlOiAoZXZlbnQ6IEludGVyYWN0LlJlc2l6ZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxyXG5cclxuICAgICAgICAgIGlmICh0aGlzLmxhc3RSZXNpemVDYWxsKSB7XHJcbiAgICAgICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMubGFzdFJlc2l6ZUNhbGwpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBjb25zdCByZWN0ID0gZXZlbnQucmVjdFxyXG4gICAgICAgICAgY29uc3QgbmV3Q2FyZFNpemUgPSB0aGlzLmdldE5ld0NhcmRTaXplKHJlY3QsIHRydWUpXHJcbiAgICAgICAgICB1cGRhdGVDYXJkVG9vbFBvc2l0aW9uKClcclxuICAgICAgICAgIHRoaXMubGFzdFJlc2l6ZUNhbGwgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBlZGdlcyA9IHt9IGFzIGFueSAvLyBldmVudC5pbnRlcmFjdGlvbi5lZGdlcztcclxuICAgICAgICAgICAgaGFuZGxlUmVzaXplQ2FyZChuZXdDYXJkU2l6ZSwgZmFsc2UsIGVkZ2VzLnRvcCwgZWRnZXMubGVmdClcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfSxcclxuICAgICAgICBvbmVuZDogKGV2ZW50OiBJbnRlcmFjdC5SZXNpemVFdmVudCkgPT4ge1xyXG4gICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcclxuICAgICAgICAgIGlmICh0aGlzLmxhc3RSZXNpemVDYWxsKSB7XHJcbiAgICAgICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMubGFzdFJlc2l6ZUNhbGwpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aGlzLmxhc3RSZXNpemVDYWxsID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmVjdCA9IGV2ZW50LnJlY3RcclxuICAgICAgICAgICAgY29uc3QgbmV3Q2FyZFNpemUgPSB0aGlzLmdldE5ld0NhcmRTaXplKHJlY3QpXHJcbiAgICAgICAgICAgIGhhbmRsZVJlc2l6ZUNhcmQobmV3Q2FyZFNpemUsIHRydWUpXHJcbiAgICAgICAgICAgIGNvbnN0IHsgY2hhbmdlSXNSZXNpemluZ0NhcmQgfSA9IHRoaXMucHJvcHNcclxuICAgICAgICAgICAgaWYgKGNoYW5nZUlzUmVzaXppbmdDYXJkKSB7XHJcbiAgICAgICAgICAgICAgY2hhbmdlSXNSZXNpemluZ0NhcmQoZmFsc2UpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIGRpZE1vdW50OiB0cnVlXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgZ2V0TmV3Q2FyZFNpemUgPSAocmVjdCwgaXNSZXNpemluZzogYm9vbGVhbiA9IGZhbHNlKSA9PiB7XHJcbiAgICBjb25zdCB7IGtlZXBBc3BlY3RSYXRpbywgbGF5b3V0VHlwZSwgZ3JpZEl0ZW1TaXplUmF0aW8sIGhvcml6b250YWxTcGFjZSwgaXNXaWR0aFBlcmNlbnRhZ2UgfSA9IHRoaXMucHJvcHNcclxuICAgIGxldCBuZXdDYXJkU2l6ZVxyXG4gICAgbGV0IHdpZHRoID0gcmVjdC5yaWdodCAtIHJlY3QubGVmdFxyXG4gICAgaWYgKCFpc1Jlc2l6aW5nICYmIGlzV2lkdGhQZXJjZW50YWdlKSB7XHJcbiAgICAgIHdpZHRoID0gcmVjdC5yaWdodCAtIHJlY3QubGVmdCArIGhvcml6b250YWxTcGFjZVxyXG4gICAgfVxyXG4gICAgaWYgKGxheW91dFR5cGUgPT09IExpc3RMYXlvdXRUeXBlLkdSSUQgJiYga2VlcEFzcGVjdFJhdGlvKSB7XHJcbiAgICAgIG5ld0NhcmRTaXplID0ge1xyXG4gICAgICAgIHdpZHRoOiB3aWR0aCxcclxuICAgICAgICBoZWlnaHQ6IHdpZHRoICogZ3JpZEl0ZW1TaXplUmF0aW9cclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbmV3Q2FyZFNpemUgPSB7XHJcbiAgICAgICAgd2lkdGg6IHdpZHRoLFxyXG4gICAgICAgIGhlaWdodDogcmVjdC5ib3R0b20gLSByZWN0LnRvcFxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3Q2FyZFNpemVcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudFdpbGxVbk1vdW50ICgpIHtcclxuICAgIGlmICh0aGlzLmxhc3RSZXNpemVDYWxsKSB7XHJcbiAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMubGFzdFJlc2l6ZUNhbGwpXHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5pbnRlcmFjdGFibGUpIHtcclxuICAgICAgdGhpcy5pbnRlcmFjdGFibGUudW5zZXQoKVxyXG4gICAgICB0aGlzLmludGVyYWN0YWJsZSA9IG51bGxcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGhhbmRsZUl0ZW1DbGljayA9IGV2dCA9PiB7XHJcbiAgICBjb25zdCB7IHNlbGVjdENhcmQgfSA9IHRoaXMucHJvcHNcclxuICAgIGlmIChldnQpIHtcclxuICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpXHJcbiAgICB9XHJcbiAgICBzZWxlY3RDYXJkKClcclxuICB9XHJcblxyXG4gIGhhbmRsZUNvcHlUbyA9IChldnQsIHN0YXR1czogU3RhdHVzLCBzZWxlY3RlZExheW91dEl0ZW0sIGxpbmtlZDogYm9vbGVhbikgPT4ge1xyXG4gICAgaWYgKCFzZWxlY3RlZExheW91dEl0ZW0pIHJldHVyblxyXG4gICAgY29uc3Qge1xyXG4gICAgICBsYXlvdXRzLFxyXG4gICAgICBidWlsZGVyU3VwcG9ydE1vZHVsZXMsXHJcbiAgICAgIGJyb3dzZXJTaXplTW9kZSxcclxuICAgICAgYnVpbGRlclN0YXR1c1xyXG4gICAgfSA9IHRoaXMucHJvcHNcclxuICAgIGNvbnN0IGFjdGlvbiA9IGJ1aWxkZXJTdXBwb3J0TW9kdWxlcy5qaW11Rm9yQnVpbGRlckxpYi5nZXRBcHBDb25maWdBY3Rpb24oKVxyXG4gICAgY29uc3QgYXBwQ29uZmlnID0gYWN0aW9uLmFwcENvbmZpZ1xyXG4gICAgY29uc3Qgb3JpZ2luTGF5b3V0SWQgPSBzZWFyY2hVdGlscy5maW5kTGF5b3V0SWQoXHJcbiAgICAgIGxheW91dHNbYnVpbGRlclN0YXR1c10sXHJcbiAgICAgIGJyb3dzZXJTaXplTW9kZSxcclxuICAgICAgYXBwQ29uZmlnLm1haW5TaXplTW9kZVxyXG4gICAgKVxyXG4gICAgY29uc3QgZGVzTGF5b3V0SWQgPSBzZWFyY2hVdGlscy5maW5kTGF5b3V0SWQoXHJcbiAgICAgIGxheW91dHNbc3RhdHVzXSxcclxuICAgICAgYnJvd3NlclNpemVNb2RlLFxyXG4gICAgICBhcHBDb25maWcubWFpblNpemVNb2RlXHJcbiAgICApXHJcbiAgICBpZiAobGlua2VkKSB7XHJcbiAgICAgIGNvbnN0IHNlYXJjaFV0aWxzID0gYnVpbGRlclN1cHBvcnRNb2R1bGVzLndpZGdldE1vZHVsZXMuc2VhcmNoVXRpbHNcclxuICAgICAgY29uc3QgbGF5b3V0SXRlbSA9IHNlYXJjaFV0aWxzLmdldENvbnRhaW5lckxheW91dEl0ZW0oXHJcbiAgICAgICAgYXBwQ29uZmlnLmxheW91dHNbZGVzTGF5b3V0SWRdLFxyXG4gICAgICAgIHNlbGVjdGVkTGF5b3V0SXRlbS53aWRnZXRJZCxcclxuICAgICAgICBMYXlvdXRJdGVtVHlwZS5XaWRnZXRcclxuICAgICAgKVxyXG4gICAgICAhIWxheW91dEl0ZW0gJiZcclxuICAgICAgICBhY3Rpb24ucmVtb3ZlTGF5b3V0SXRlbShcclxuICAgICAgICAgIHsgbGF5b3V0SWQ6IGRlc0xheW91dElkLCBsYXlvdXRJdGVtSWQ6IGxheW91dEl0ZW0uaWQgfSxcclxuICAgICAgICAgIGZhbHNlXHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG4gICAgYWN0aW9uLmR1cGxpY2F0ZUxheW91dEl0ZW0oXHJcbiAgICAgIG9yaWdpbkxheW91dElkLFxyXG4gICAgICBkZXNMYXlvdXRJZCxcclxuICAgICAgc2VsZWN0ZWRMYXlvdXRJdGVtLmlkLFxyXG4gICAgICBmYWxzZSxcclxuICAgICAgbGlua2VkXHJcbiAgICApXHJcbiAgICAvL0FmdGVyIGBkdXBsaWNhdGVMYXlvdXRJdGVtc2AsIHRoZSBzdHJ1Y3R1cmUgb2YgdGhlIGxheW91dCBpcyB3cm9uZywgd2UgbmVlZCB0byBjYWxsIHRoZSBgYnVpbGRMYXlvdXRTdHJ1Y3R1cmVgIG1ldGhvZCBhZ2FpbiB0byByZWNvbnN0cnVjdCBpdFxyXG4gICAgYWN0aW9uLmNsZWFyTGF5b3V0U3RydWN0dXJlKGRlc0xheW91dElkLCBicm93c2VyU2l6ZU1vZGUsIHRydWUpXHJcbiAgICBhY3Rpb24uYnVpbGRMYXlvdXRTdHJ1Y3R1cmUoZGVzTGF5b3V0SWQsIGJyb3dzZXJTaXplTW9kZSwgdHJ1ZSlcclxuICAgIGFjdGlvbi5leGVjKClcclxuICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKVxyXG4gICAgZXZ0Lm5hdGl2ZUV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpXHJcbiAgfVxyXG5cclxuICBlZGl0U3RhdHVzID0gKG5hbWUsIHZhbHVlKSA9PiB7XHJcbiAgICBjb25zdCB7IGRpc3BhdGNoLCB3aWRnZXRJZCB9ID0gdGhpcy5wcm9wc1xyXG4gICAgZGlzcGF0Y2goYXBwQWN0aW9ucy53aWRnZXRTdGF0ZVByb3BDaGFuZ2Uod2lkZ2V0SWQsIG5hbWUsIHZhbHVlKSlcclxuICB9XHJcblxyXG4gIGhhbmRsZUJ1aWxkZXJTdGF0dXNDaGFuZ2UgKGV2dCwgc3RhdHVzKSB7XHJcbiAgICB0aGlzLmVkaXRTdGF0dXMoJ3Nob3dDYXJkU2V0dGluZycsIHN0YXR1cylcclxuICAgIHRoaXMuZWRpdFN0YXR1cygnYnVpbGRlclN0YXR1cycsIHN0YXR1cylcclxuXHJcbiAgICBjb25zdCB7IHNlbGVjdENhcmQgfSA9IHRoaXMucHJvcHNcclxuICAgIHNlbGVjdENhcmQoKVxyXG5cclxuICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKVxyXG4gICAgZXZ0Lm5hdGl2ZUV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpXHJcbiAgfVxyXG5cclxuICBoYW5kbGVCcmVha0xpbmsgPSBldnQgPT4ge1xyXG4gICAgY29uc3Qge1xyXG4gICAgICBidWlsZGVyU3VwcG9ydE1vZHVsZXMsXHJcbiAgICAgIGJyb3dzZXJTaXplTW9kZSxcclxuICAgICAgc2VsZWN0aW9uLFxyXG4gICAgICBidWlsZGVyU3RhdHVzLFxyXG4gICAgICBkaXNwYXRjaCxcclxuICAgICAgd2lkZ2V0SWRcclxuICAgIH0gPSB0aGlzLnByb3BzXHJcbiAgICBjb25zdCBhY3Rpb24gPSBidWlsZGVyU3VwcG9ydE1vZHVsZXMuamltdUZvckJ1aWxkZXJMaWIuZ2V0QXBwQ29uZmlnQWN0aW9uKClcclxuICAgIGNvbnN0IGFwcENvbmZpZyA9IGFjdGlvbi5hcHBDb25maWdcclxuICAgIGNvbnN0IHNlbGVjdGVkTGF5b3V0SXRlbSA9IHNlYXJjaFV0aWxzLmZpbmRMYXlvdXRJdGVtKGFwcENvbmZpZywgc2VsZWN0aW9uKVxyXG4gICAgaWYgKCFzZWxlY3RlZExheW91dEl0ZW0pIHJldHVyblxyXG4gICAgY29uc3QgY3VycmVudExheW91dElkID0gYXBwQ29uZmlnLndpZGdldHNbd2lkZ2V0SWRdLmxheW91dHNbYnVpbGRlclN0YXR1c11bYnJvd3NlclNpemVNb2RlXVxyXG4gICAgYWN0aW9uLmR1cGxpY2F0ZUxheW91dEl0ZW0oXHJcbiAgICAgIGN1cnJlbnRMYXlvdXRJZCxcclxuICAgICAgY3VycmVudExheW91dElkLFxyXG4gICAgICBzZWxlY3RlZExheW91dEl0ZW0uaWQsXHJcbiAgICAgIHRydWVcclxuICAgIClcclxuICAgIGFjdGlvbi5yZW1vdmVMYXlvdXRJdGVtKFxyXG4gICAgICB7IGxheW91dElkOiBjdXJyZW50TGF5b3V0SWQsIGxheW91dEl0ZW1JZDogc2VsZWN0ZWRMYXlvdXRJdGVtLmlkIH0sXHJcbiAgICAgIGZhbHNlXHJcbiAgICApXHJcbiAgICAvL0FmdGVyIGBkdXBsaWNhdGVMYXlvdXRJdGVtc2AsIHRoZSBzdHJ1Y3R1cmUgb2YgdGhlIGxheW91dCBpcyB3cm9uZywgd2UgbmVlZCB0byBjYWxsIHRoZSBgYnVpbGRMYXlvdXRTdHJ1Y3R1cmVgIG1ldGhvZCBhZ2FpbiB0byByZWNvbnN0cnVjdCBpdFxyXG4gICAgY29uc3QgbGlzdExheW91dHMgPSBhcHBDb25maWcud2lkZ2V0c1t3aWRnZXRJZF0ubGF5b3V0c1xyXG4gICAgZm9yIChjb25zdCBzdGF0dXMgaW4gbGlzdExheW91dHMpIHtcclxuICAgICAgY29uc3QgbGF5b3V0SWQgPSBsaXN0TGF5b3V0c1tzdGF0dXNdW2Jyb3dzZXJTaXplTW9kZV1cclxuICAgICAgYWN0aW9uLmNsZWFyTGF5b3V0U3RydWN0dXJlKGxheW91dElkLCBicm93c2VyU2l6ZU1vZGUsIHRydWUpXHJcbiAgICAgIGFjdGlvbi5idWlsZExheW91dFN0cnVjdHVyZShsYXlvdXRJZCwgYnJvd3NlclNpemVNb2RlLCB0cnVlKVxyXG4gICAgfVxyXG4gICAgYWN0aW9uLmV4ZWMoKVxyXG5cclxuICAgIGlmIChcclxuICAgICAgc2VsZWN0aW9uLmxheW91dElkID09PSBjdXJyZW50TGF5b3V0SWQgJiZcclxuICAgICAgc2VsZWN0aW9uLmxheW91dEl0ZW1JZCA9PT0gc2VsZWN0ZWRMYXlvdXRJdGVtLmlkXHJcbiAgICApIHtcclxuICAgICAgZGlzcGF0Y2goYXBwQWN0aW9ucy5zZWxlY3Rpb25DaGFuZ2VkKG51bGwpKVxyXG4gICAgfVxyXG4gICAgY29uc3QgY29udGVudCA9IGFjdGlvbi5hcHBDb25maWcubGF5b3V0c1tjdXJyZW50TGF5b3V0SWRdLmNvbnRlbnRcclxuICAgIGNvbnN0IG5ld0l0ZW1LZXkgPSBPYmplY3Qua2V5cyhjb250ZW50KVtPYmplY3Qua2V5cyhjb250ZW50KS5sZW5ndGggLSAxXVxyXG4gICAgaWYgKG5ld0l0ZW1LZXkpIHtcclxuICAgICAgY29uc3QgbmV3SXRlbSA9IGNvbnRlbnRbbmV3SXRlbUtleV1cclxuICAgICAgZGlzcGF0Y2goXHJcbiAgICAgICAgYXBwQWN0aW9ucy5zZWxlY3Rpb25DaGFuZ2VkKHtcclxuICAgICAgICAgIGxheW91dElkOiBjdXJyZW50TGF5b3V0SWQsXHJcbiAgICAgICAgICBsYXlvdXRJdGVtSWQ6IG5ld0l0ZW0uaWRcclxuICAgICAgICB9KVxyXG4gICAgICApXHJcbiAgICAgIGNvbnN0IEl0ZW1XaWRnZXRKc29uID0gYWN0aW9uLmFwcENvbmZpZy53aWRnZXRzW25ld0l0ZW0ud2lkZ2V0SWRdXHJcbiAgICAgIC8vV2hlbiBicmVha2luZyBsaW5rLCB0aGUgcGFyZW50IG9mIHRoZSBuZXdseSBnZW5lcmF0ZWQgd2lkZ2V0IHN0aWxsIGhhcyBhbm90aGVyIGxheW91dCxcclxuICAgICAgLy93aGljaCBpcyB3cm9uZy4gQ3VycmVudGx5LCB0aGUgd2lkZ2V0IG5lZWRzIHRvIGhhbmRsZSBpdCBieSBpdHNlbGYuXHJcbiAgICAgIGNvbnN0IG5ld0l0ZW1XaWRnZXRKc29uID0gdGhpcy5pbml0UGFyZW50T2ZOZXdXaWRnZXRBZnRlcklzb2xhdGUoSXRlbVdpZGdldEpzb24sIGN1cnJlbnRMYXlvdXRJZClcclxuICAgICAgYWN0aW9uXHJcbiAgICAgICAgLmVkaXRXaWRnZXQobmV3SXRlbVdpZGdldEpzb24pXHJcbiAgICAgICAgLmV4ZWMoKVxyXG4gICAgfVxyXG5cclxuICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKVxyXG4gICAgZXZ0Lm5hdGl2ZUV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpXHJcbiAgfVxyXG5cclxuICBpbml0UGFyZW50T2ZOZXdXaWRnZXRBZnRlcklzb2xhdGUgPSAod2lkZ2V0SnNvbjogSU1XaWRnZXRKc29uLCBjdXJyZW50TGF5b3V0SWQ6IHN0cmluZyk6IElNV2lkZ2V0SnNvbiA9PiB7XHJcbiAgICBjb25zdCB7IGJyb3dzZXJTaXplTW9kZSB9ID0gdGhpcy5wcm9wc1xyXG4gICAgY29uc3QgcGFyZW50ID0gd2lkZ2V0SnNvbi5wYXJlbnRcclxuICAgIGNvbnN0IG5ld0l0ZW1DdXJyZW50UGFyZW50ID0gcGFyZW50W2Jyb3dzZXJTaXplTW9kZV1cclxuICAgIGNvbnN0IG5ld1BhcmVudCA9IG5ld0l0ZW1DdXJyZW50UGFyZW50Py5maWx0ZXIobGF5b3V0ID0+IGxheW91dC5sYXlvdXRJZCA9PT0gY3VycmVudExheW91dElkKVxyXG4gICAgcmV0dXJuIHdpZGdldEpzb24uc2V0SW4oWydwYXJlbnQnLCBicm93c2VyU2l6ZU1vZGVdLCBuZXdQYXJlbnQpXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHJlYWRvbmx5IGdldENvcHlEcm9wZG93bkl0ZW1zID0gKFxyXG4gICAgc2hvd0JyZWFrOiBib29sZWFuXHJcbiAgKTogeyBpdGVtczogSW1tdXRhYmxlQXJyYXk8TXlEcm9wRG93bkl0ZW0+LCB0aXRsZTogc3RyaW5nIH0gPT4ge1xyXG4gICAgY29uc3Qge1xyXG4gICAgICBjYXJkQ29uZmlncyxcclxuICAgICAgbGF5b3V0cyxcclxuICAgICAgYnJvd3NlclNpemVNb2RlLFxyXG4gICAgICBzZWxlY3Rpb24sXHJcbiAgICAgIGJ1aWxkZXJTdGF0dXMsXHJcbiAgICAgIGJ1aWxkZXJTdXBwb3J0TW9kdWxlc1xyXG4gICAgfSA9IHRoaXMucHJvcHNcclxuICAgIGNvbnN0IGFjdGlvbiA9IGJ1aWxkZXJTdXBwb3J0TW9kdWxlcy5qaW11Rm9yQnVpbGRlckxpYi5nZXRBcHBDb25maWdBY3Rpb24oKVxyXG4gICAgY29uc3QgYXBwQ29uZmlnID0gYWN0aW9uLmFwcENvbmZpZ1xyXG4gICAgY29uc3Qgc2VsZWN0ZWRMYXlvdXRJdGVtID0gc2VhcmNoVXRpbHMuZmluZExheW91dEl0ZW0oYXBwQ29uZmlnLCBzZWxlY3Rpb24pXHJcbiAgICBpZiAoIXNlbGVjdGlvbiB8fCAhc2VsZWN0ZWRMYXlvdXRJdGVtIHx8ICF3aW5kb3cuamltdUNvbmZpZy5pc0luQnVpbGRlcikge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGl0ZW1zOiBJbW11dGFibGUoW10pLFxyXG4gICAgICAgIHRpdGxlOiAnJ1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBpdGVtcyA9IFtdIGFzIGFueVxyXG4gICAgbGV0IHRpdGxlID0gJydcclxuICAgIGxldCBsaW5rZWRUb1JlZ3VsYXIgPSB0cnVlXHJcbiAgICBsZXQgbGlua2VkVG9TZWxlY3QgPVxyXG4gICAgICBjYXJkQ29uZmlnc1tTdGF0dXMuU2VsZWN0ZWRdLnNlbGVjdGlvbk1vZGUgIT09IFNlbGVjdGlvbk1vZGVUeXBlLk5vbmVcclxuICAgIGxldCBsaW5rZWRUb0hvdmVyID0gISFjYXJkQ29uZmlnc1tTdGF0dXMuSG92ZXJdLmVuYWJsZVxyXG4gICAgY29uc3QgaXNXaWRnZXRJbkxheW91dCA9IChsYXlvdXRJZDogc3RyaW5nLCB3aWRnZXRJZDogc3RyaW5nKTogYm9vbGVhbiA9PiB7XHJcbiAgICAgIGNvbnN0IHNlYXJjaFV0aWxzID0gYnVpbGRlclN1cHBvcnRNb2R1bGVzLndpZGdldE1vZHVsZXMuc2VhcmNoVXRpbHNcclxuICAgICAgY29uc3Qgd2lkZ2V0cyA9IHNlYXJjaFV0aWxzLmdldENvbnRlbnRzSW5MYXlvdXRXaXRoUmVjcnVzaXZlTGF5b3V0cyhcclxuICAgICAgICBhcHBDb25maWcsXHJcbiAgICAgICAgbGF5b3V0SWQsXHJcbiAgICAgICAgTGF5b3V0SXRlbVR5cGUuV2lkZ2V0LFxyXG4gICAgICAgIGJyb3dzZXJTaXplTW9kZVxyXG4gICAgICApXHJcbiAgICAgIHJldHVybiB3aWRnZXRzLmluZGV4T2Yod2lkZ2V0SWQpID4gLTFcclxuICAgIH1cclxuICAgIGNvbnN0IGlzU2hvd0FwcGx5VG9Ib3ZlciA9IGNhcmRDb25maWdzW1N0YXR1cy5Ib3Zlcl0/Lmxpc3RMYXlvdXQgIT09IExpc3RMYXlvdXQ/LkFVVE9cclxuICAgIGNvbnN0IGlzU2hvd0FwcGx5VG9TZWxlY3RlZCA9IGNhcmRDb25maWdzW1N0YXR1cy5TZWxlY3RlZF0/Lmxpc3RMYXlvdXQgIT09IExpc3RMYXlvdXQ/LkFVVE9cclxuXHJcbiAgICBjb25zdCBzeW5jVG9Ib3ZlciA9ICgpID0+IHtcclxuICAgICAgaWYgKGNhcmRDb25maWdzW1N0YXR1cy5Ib3Zlcl0uZW5hYmxlKSB7XHJcbiAgICAgICAgY29uc3QgbGF5b3V0SWQgPSBzZWFyY2hVdGlscy5maW5kTGF5b3V0SWQoXHJcbiAgICAgICAgICBsYXlvdXRzW1N0YXR1cy5Ib3Zlcl0sXHJcbiAgICAgICAgICBicm93c2VyU2l6ZU1vZGUsXHJcbiAgICAgICAgICBhcHBDb25maWcubWFpblNpemVNb2RlXHJcbiAgICAgICAgKVxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICFpc1dpZGdldEluTGF5b3V0KFxyXG4gICAgICAgICAgICBsYXlvdXRJZCxcclxuICAgICAgICAgICAgYXBwQ29uZmlnLmxheW91dHNbc2VsZWN0aW9uLmxheW91dElkXS5jb250ZW50W1xyXG4gICAgICAgICAgICAgIHNlbGVjdGlvbi5sYXlvdXRJdGVtSWRcclxuICAgICAgICAgICAgXS53aWRnZXRJZFxyXG4gICAgICAgICAgKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgbGlua2VkVG9Ib3ZlciA9IGZhbHNlXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGl0ZW1zLnB1c2goe1xyXG4gICAgICAgICAgbGFiZWw6IHRoaXMuZm9ybWF0TWVzc2FnZSgnYXBwbHlUbycsIHtcclxuICAgICAgICAgICAgc3RhdHVzOiB0aGlzLmZvcm1hdE1lc3NhZ2UoJ2hvdmVyJykudG9Mb2NhbGVMb3dlckNhc2UoKVxyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgICBldmVudDogZXZ0ID0+IHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVDb3B5VG8oXHJcbiAgICAgICAgICAgICAgZXZ0LFxyXG4gICAgICAgICAgICAgIFN0YXR1cy5Ib3ZlcixcclxuICAgICAgICAgICAgICBzZWxlY3RlZExheW91dEl0ZW0sXHJcbiAgICAgICAgICAgICAgbGlua2VkVG9Ib3ZlclxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHN5bmNUb1NlbGVjdGVkID0gKCkgPT4ge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgY2FyZENvbmZpZ3NbU3RhdHVzLlNlbGVjdGVkXS5zZWxlY3Rpb25Nb2RlICE9PSBTZWxlY3Rpb25Nb2RlVHlwZS5Ob25lXHJcbiAgICAgICkge1xyXG4gICAgICAgIGNvbnN0IGxheW91dElkID0gc2VhcmNoVXRpbHMuZmluZExheW91dElkKFxyXG4gICAgICAgICAgbGF5b3V0c1tTdGF0dXMuU2VsZWN0ZWRdLFxyXG4gICAgICAgICAgYnJvd3NlclNpemVNb2RlLFxyXG4gICAgICAgICAgYXBwQ29uZmlnLm1haW5TaXplTW9kZVxyXG4gICAgICAgIClcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAhaXNXaWRnZXRJbkxheW91dChcclxuICAgICAgICAgICAgbGF5b3V0SWQsXHJcbiAgICAgICAgICAgIGFwcENvbmZpZy5sYXlvdXRzW3NlbGVjdGlvbi5sYXlvdXRJZF0uY29udGVudFtcclxuICAgICAgICAgICAgICBzZWxlY3Rpb24ubGF5b3V0SXRlbUlkXHJcbiAgICAgICAgICAgIF0ud2lkZ2V0SWRcclxuICAgICAgICAgIClcclxuICAgICAgICApIHtcclxuICAgICAgICAgIGxpbmtlZFRvU2VsZWN0ID0gZmFsc2VcclxuICAgICAgICB9XHJcbiAgICAgICAgaXRlbXMucHVzaCh7XHJcbiAgICAgICAgICBsYWJlbDogdGhpcy5mb3JtYXRNZXNzYWdlKCdhcHBseVRvJywge1xyXG4gICAgICAgICAgICBzdGF0dXM6IHRoaXMuZm9ybWF0TWVzc2FnZSgnc2VsZWN0ZWQnKS50b0xvY2FsZUxvd2VyQ2FzZSgpXHJcbiAgICAgICAgICB9KSxcclxuICAgICAgICAgIGV2ZW50OiBldnQgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZUNvcHlUbyhcclxuICAgICAgICAgICAgICBldnQsXHJcbiAgICAgICAgICAgICAgU3RhdHVzLlNlbGVjdGVkLFxyXG4gICAgICAgICAgICAgIHNlbGVjdGVkTGF5b3V0SXRlbSxcclxuICAgICAgICAgICAgICBsaW5rZWRUb1NlbGVjdFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHN5bmNUb1JlZ3VsYXIgPSAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGxheW91dElkID0gc2VhcmNoVXRpbHMuZmluZExheW91dElkKFxyXG4gICAgICAgIGxheW91dHNbU3RhdHVzLlJlZ3VsYXJdLFxyXG4gICAgICAgIGJyb3dzZXJTaXplTW9kZSxcclxuICAgICAgICBhcHBDb25maWcubWFpblNpemVNb2RlXHJcbiAgICAgIClcclxuICAgICAgaWYgKFxyXG4gICAgICAgICFpc1dpZGdldEluTGF5b3V0KFxyXG4gICAgICAgICAgbGF5b3V0SWQsXHJcbiAgICAgICAgICBhcHBDb25maWcubGF5b3V0c1tzZWxlY3Rpb24ubGF5b3V0SWRdLmNvbnRlbnRbc2VsZWN0aW9uLmxheW91dEl0ZW1JZF1cclxuICAgICAgICAgICAgLndpZGdldElkXHJcbiAgICAgICAgKVxyXG4gICAgICApIHtcclxuICAgICAgICBsaW5rZWRUb1JlZ3VsYXIgPSBmYWxzZVxyXG4gICAgICB9XHJcbiAgICAgIGl0ZW1zLnB1c2goe1xyXG4gICAgICAgIGxhYmVsOiB0aGlzLmZvcm1hdE1lc3NhZ2UoJ2FwcGx5VG8nLCB7XHJcbiAgICAgICAgICBzdGF0dXM6IHRoaXMuZm9ybWF0TWVzc2FnZSgnZGVmYXVsdCcpLnRvTG9jYWxlTG93ZXJDYXNlKClcclxuICAgICAgICB9KSxcclxuICAgICAgICBldmVudDogZXZ0ID0+IHtcclxuICAgICAgICAgIHRoaXMuaGFuZGxlQ29weVRvKFxyXG4gICAgICAgICAgICBldnQsXHJcbiAgICAgICAgICAgIFN0YXR1cy5SZWd1bGFyLFxyXG4gICAgICAgICAgICBzZWxlY3RlZExheW91dEl0ZW0sXHJcbiAgICAgICAgICAgIGxpbmtlZFRvUmVndWxhclxyXG4gICAgICAgICAgKVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBpZiAoYnVpbGRlclN0YXR1cyA9PT0gU3RhdHVzLlJlZ3VsYXIpIHtcclxuICAgICAgaXNTaG93QXBwbHlUb0hvdmVyICYmIHN5bmNUb0hvdmVyKClcclxuICAgICAgaXNTaG93QXBwbHlUb1NlbGVjdGVkICYmIHN5bmNUb1NlbGVjdGVkKClcclxuICAgICAgaWYgKGxpbmtlZFRvSG92ZXIgJiYgbGlua2VkVG9TZWxlY3QpIHtcclxuICAgICAgICB0aXRsZSA9IHRoaXMuZm9ybWF0TWVzc2FnZSgnbGlua2VkVG9BbmQnLCB7XHJcbiAgICAgICAgICB3aGVyZTE6IHRoaXMuZm9ybWF0TWVzc2FnZSgnc2VsZWN0ZWQnKS50b0xvY2FsZUxvd2VyQ2FzZSgpLFxyXG4gICAgICAgICAgd2hlcmUyOiB0aGlzLmZvcm1hdE1lc3NhZ2UoJ2hvdmVyJykudG9Mb2NhbGVMb3dlckNhc2UoKVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0gZWxzZSBpZiAobGlua2VkVG9Ib3Zlcikge1xyXG4gICAgICAgIHRpdGxlID0gdGhpcy5mb3JtYXRNZXNzYWdlKCdsaW5rZWRUbycsIHtcclxuICAgICAgICAgIHdoZXJlOiB0aGlzLmZvcm1hdE1lc3NhZ2UoJ2hvdmVyJykudG9Mb2NhbGVMb3dlckNhc2UoKVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0gZWxzZSBpZiAobGlua2VkVG9TZWxlY3QpIHtcclxuICAgICAgICB0aXRsZSA9IHRoaXMuZm9ybWF0TWVzc2FnZSgnbGlua2VkVG8nLCB7XHJcbiAgICAgICAgICB3aGVyZTogdGhpcy5mb3JtYXRNZXNzYWdlKCdzZWxlY3RlZCcpLnRvTG9jYWxlTG93ZXJDYXNlKClcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKGJ1aWxkZXJTdGF0dXMgPT09IFN0YXR1cy5Ib3Zlcikge1xyXG4gICAgICBzeW5jVG9SZWd1bGFyKClcclxuICAgICAgc3luY1RvU2VsZWN0ZWQoKVxyXG4gICAgICBpZiAobGlua2VkVG9SZWd1bGFyICYmIGxpbmtlZFRvU2VsZWN0KSB7XHJcbiAgICAgICAgdGl0bGUgPSB0aGlzLmZvcm1hdE1lc3NhZ2UoJ2xpbmtlZFRvQW5kJywge1xyXG4gICAgICAgICAgd2hlcmUxOiB0aGlzLmZvcm1hdE1lc3NhZ2UoJ2RlZmF1bHQnKS50b0xvY2FsZUxvd2VyQ2FzZSgpLFxyXG4gICAgICAgICAgd2hlcmUyOiB0aGlzLmZvcm1hdE1lc3NhZ2UoJ3NlbGVjdGVkJykudG9Mb2NhbGVMb3dlckNhc2UoKVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0gZWxzZSBpZiAobGlua2VkVG9SZWd1bGFyKSB7XHJcbiAgICAgICAgdGl0bGUgPSB0aGlzLmZvcm1hdE1lc3NhZ2UoJ2xpbmtlZFRvJywge1xyXG4gICAgICAgICAgd2hlcmU6IHRoaXMuZm9ybWF0TWVzc2FnZSgnZGVmYXVsdCcpLnRvTG9jYWxlTG93ZXJDYXNlKClcclxuICAgICAgICB9KVxyXG4gICAgICB9IGVsc2UgaWYgKGxpbmtlZFRvU2VsZWN0KSB7XHJcbiAgICAgICAgdGl0bGUgPSB0aGlzLmZvcm1hdE1lc3NhZ2UoJ2xpbmtlZFRvJywge1xyXG4gICAgICAgICAgd2hlcmU6IHRoaXMuZm9ybWF0TWVzc2FnZSgnc2VsZWN0ZWQnKS50b0xvY2FsZUxvd2VyQ2FzZSgpXHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc3luY1RvUmVndWxhcigpXHJcbiAgICAgIHN5bmNUb0hvdmVyKClcclxuICAgICAgaWYgKGxpbmtlZFRvUmVndWxhciAmJiBsaW5rZWRUb0hvdmVyKSB7XHJcbiAgICAgICAgdGl0bGUgPSB0aGlzLmZvcm1hdE1lc3NhZ2UoJ2xpbmtlZFRvQW5kJywge1xyXG4gICAgICAgICAgd2hlcmUxOiB0aGlzLmZvcm1hdE1lc3NhZ2UoJ2RlZmF1bHQnKS50b0xvY2FsZUxvd2VyQ2FzZSgpLFxyXG4gICAgICAgICAgd2hlcmUyOiB0aGlzLmZvcm1hdE1lc3NhZ2UoJ2hvdmVyJykudG9Mb2NhbGVMb3dlckNhc2UoKVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0gZWxzZSBpZiAobGlua2VkVG9SZWd1bGFyKSB7XHJcbiAgICAgICAgdGl0bGUgPSB0aGlzLmZvcm1hdE1lc3NhZ2UoJ2xpbmtlZFRvJywge1xyXG4gICAgICAgICAgd2hlcmU6IHRoaXMuZm9ybWF0TWVzc2FnZSgnZGVmYXVsdCcpLnRvTG9jYWxlTG93ZXJDYXNlKClcclxuICAgICAgICB9KVxyXG4gICAgICB9IGVsc2UgaWYgKGxpbmtlZFRvSG92ZXIpIHtcclxuICAgICAgICB0aXRsZSA9IHRoaXMuZm9ybWF0TWVzc2FnZSgnbGlua2VkVG8nLCB7XHJcbiAgICAgICAgICB3aGVyZTogdGhpcy5mb3JtYXRNZXNzYWdlKCdob3ZlcicpLnRvTG9jYWxlTG93ZXJDYXNlKClcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoc2hvd0JyZWFrKSB7XHJcbiAgICAgIGl0ZW1zLnB1c2goe1xyXG4gICAgICAgIGxhYmVsOiB0aGlzLmZvcm1hdE1lc3NhZ2UoJ2lzb2xhdGUnKSxcclxuICAgICAgICBldmVudDogdGhpcy5oYW5kbGVCcmVha0xpbmtcclxuICAgICAgfSlcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRpdGxlID0gdGhpcy5mb3JtYXRNZXNzYWdlKCdpc29sYXRlJylcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpdGVtczogSW1tdXRhYmxlKGl0ZW1zKSxcclxuICAgICAgdGl0bGU6IHRpdGxlXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfcmVuZGVyQWN0aW9uID0gKCkgPT4ge1xyXG4gICAgY29uc3QgaGFuZGxlcnMgPSBbXVxyXG4gICAgY29uc3QgeyB0aGVtZSwgbGF5b3V0VHlwZSwga2VlcEFzcGVjdFJhdGlvIH0gPSB0aGlzLnByb3BzXHJcbiAgICBjb25zdCBzaWRlSGFuZGxlID0gY3NzYFxyXG4gICAgICBib3gtc2hhZG93OiBub25lO1xyXG5cclxuICAgICAgJjphZnRlciB7XHJcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgIGNvbnRlbnQ6ICcnO1xyXG4gICAgICAgIHdpZHRoOiAke2Nvcm5lclNpemV9cHg7XHJcbiAgICAgICAgaGVpZ2h0OiAke2Nvcm5lclNpemV9cHg7XHJcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt0aGVtZS5jb2xvcnMucGFsZXR0ZS5wcmltYXJ5WzUwMF19O1xyXG4gICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICR7dGhlbWUuY29sb3JzLndoaXRlfTtcclxuICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XHJcbiAgICAgICAgei1pbmRleDogJHt6aW5kZXhIYW5kbGV9O1xyXG4gICAgICB9XHJcbiAgICBgXHJcblxyXG4gICAgY29uc3QgYm90dG9tU2lkZUxpbmUgPSBjc3NgXHJcbiAgICAgIGJveC1zaGFkb3c6IG5vbmU7XHJcbiAgICAgIGhlaWdodDogJHtzaWRlU2l6ZX1weDtcclxuICAgICAgbGVmdDogMHB4O1xyXG4gICAgICByaWdodDogMHB4O1xyXG4gICAgICBib3R0b206ICR7LTEgKiAoc2lkZVNpemUgLyAyKX1weDtcclxuICAgICAgJjphZnRlciB7XHJcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgIGNvbnRlbnQ6ICcnO1xyXG4gICAgICAgIGJvdHRvbTogNTAlO1xyXG4gICAgICAgIGxlZnQ6IDA7XHJcbiAgICAgICAgcmlnaHQ6IDA7XHJcbiAgICAgICAgaGVpZ2h0OiAycHg7XHJcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt0aGVtZS5jb2xvcnMucGFsZXR0ZS5wcmltYXJ5WzMwMF19O1xyXG4gICAgICAgIHotaW5kZXg6ICR7emluZGV4SGFuZGxlfTtcclxuICAgICAgfVxyXG4gICAgYFxyXG5cclxuICAgIGNvbnN0IHJpZ2h0U2lkZUxpbmUgPSBjc3NgXHJcbiAgICAgIGJveC1zaGFkb3c6IG5vbmU7XHJcbiAgICAgIHdpZHRoOiAke3NpZGVTaXplfXB4O1xyXG4gICAgICB0b3A6IDBweDtcclxuICAgICAgYm90dG9tOiAwcHg7XHJcbiAgICAgIHJpZ2h0OiAkey0xICogKHNpZGVTaXplIC8gMil9cHg7XHJcbiAgICAgICY6YWZ0ZXIge1xyXG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgICAgICBjb250ZW50OiAnJztcclxuICAgICAgICByaWdodDogNTAlO1xyXG4gICAgICAgIHRvcDogMDtcclxuICAgICAgICBib3R0b206IDA7XHJcbiAgICAgICAgd2lkdGg6IDJweDtcclxuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3RoZW1lLmNvbG9ycy5wYWxldHRlLnByaW1hcnlbMzAwXX07XHJcbiAgICAgICAgei1pbmRleDogJHt6aW5kZXhIYW5kbGV9O1xyXG4gICAgICB9XHJcbiAgICBgXHJcblxyXG4gICAgY29uc3QgaGFuZGxlID0gY3NzYFxyXG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICBgXHJcblxyXG4gICAgY29uc3QgcmlnaHRTaWRlQ3Vyc29yID0gY3NzYFxyXG4gICAgICB3aWR0aDogJHtzaWRlU2l6ZX1weDtcclxuICAgICAgdG9wOiAkey0xICogc2lkZVBvc2l0aW9ufXB4O1xyXG4gICAgICBib3R0b206ICR7LTEgKiBzaWRlUG9zaXRpb259cHg7XHJcbiAgICAgIHJpZ2h0OiAkey0xICogKHNpZGVTaXplIC8gMil9cHg7XHJcblxyXG4gICAgICAmOmFmdGVyIHtcclxuICAgICAgICB0b3A6IDUwJTtcclxuICAgICAgICByaWdodDogNTAlO1xyXG4gICAgICAgIG1hcmdpbi10b3A6ICR7Y29ybmVyUG9zaXRpb24gLyAyfXB4O1xyXG4gICAgICAgIG1hcmdpbi1yaWdodDogJHtjb3JuZXJQb3NpdGlvbiAvIDJ9cHg7XHJcbiAgICAgIH1cclxuICAgIGBcclxuICAgIGNvbnN0IGJvdHRvbVNpZGVDdXJzb3IgPSBjc3NgXHJcbiAgICAgIGhlaWdodDogJHtzaWRlU2l6ZX1weDtcclxuICAgICAgbGVmdDogJHstMSAqIHNpZGVQb3NpdGlvbn1weDtcclxuICAgICAgcmlnaHQ6ICR7LTEgKiBzaWRlUG9zaXRpb259cHg7XHJcbiAgICAgIGJvdHRvbTogJHstMSAqIChzaWRlU2l6ZSAvIDIpfXB4O1xyXG5cclxuICAgICAgJjphZnRlciB7XHJcbiAgICAgICAgbGVmdDogNTAlO1xyXG4gICAgICAgIGJvdHRvbTogNTAlO1xyXG4gICAgICAgIG1hcmdpbi1sZWZ0OiAke2Nvcm5lclBvc2l0aW9uIC8gMn1weDtcclxuICAgICAgICBtYXJnaW4tYm90dG9tOiAke2Nvcm5lclBvc2l0aW9uIC8gMn1weDtcclxuICAgICAgfVxyXG4gICAgYFxyXG4gICAgc3dpdGNoIChsYXlvdXRUeXBlKSB7XHJcbiAgICAgIGNhc2UgTGlzdExheW91dFR5cGUuQ29sdW1uOlxyXG4gICAgICAgIGhhbmRsZXJzLnB1c2goXHJcbiAgICAgICAgICA8c3BhblxyXG4gICAgICAgICAgICBrZXk9JzEwJ1xyXG4gICAgICAgICAgICBjbGFzc05hbWU9J2xpc3QtY2FyZC1ybmQtcmVzaXplLWxlZnQtbGluZSdcclxuICAgICAgICAgICAgY3NzPXtbaGFuZGxlLCByaWdodFNpZGVMaW5lXX1cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgKVxyXG4gICAgICAgIGhhbmRsZXJzLnB1c2goXHJcbiAgICAgICAgICA8c3BhblxyXG4gICAgICAgICAgICBrZXk9JzQnXHJcbiAgICAgICAgICAgIGNsYXNzTmFtZT0nbGlzdC1jYXJkLXJuZC1yZXNpemUtcmlnaHQnXHJcbiAgICAgICAgICAgIGNzcz17W2hhbmRsZSwgc2lkZUhhbmRsZSwgcmlnaHRTaWRlQ3Vyc29yXX1cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgKVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgTGlzdExheW91dFR5cGUuUm93OlxyXG4gICAgICAgIGhhbmRsZXJzLnB1c2goXHJcbiAgICAgICAgICA8c3BhblxyXG4gICAgICAgICAgICBrZXk9JzknXHJcbiAgICAgICAgICAgIGNsYXNzTmFtZT0nbGlzdC1jYXJkLXJuZC1yZXNpemUtYm90dG9tLWxpbmUnXHJcbiAgICAgICAgICAgIGNzcz17W2hhbmRsZSwgYm90dG9tU2lkZUxpbmVdfVxyXG4gICAgICAgICAgLz5cclxuICAgICAgICApXHJcbiAgICAgICAgaGFuZGxlcnMucHVzaChcclxuICAgICAgICAgIDxzcGFuXHJcbiAgICAgICAgICAgIGtleT0nNidcclxuICAgICAgICAgICAgY2xhc3NOYW1lPSdsaXN0LWNhcmQtcm5kLXJlc2l6ZS1ib3R0b20nXHJcbiAgICAgICAgICAgIGNzcz17W2hhbmRsZSwgc2lkZUhhbmRsZSwgYm90dG9tU2lkZUN1cnNvcl19XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgIClcclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlIExpc3RMYXlvdXRUeXBlLkdSSUQ6XHJcbiAgICAgICAgaGFuZGxlcnMucHVzaChcclxuICAgICAgICAgIDxzcGFuXHJcbiAgICAgICAgICAgIGtleT0nMTAnXHJcbiAgICAgICAgICAgIGNsYXNzTmFtZT0nbGlzdC1jYXJkLXJuZC1yZXNpemUtbGVmdC1saW5lJ1xyXG4gICAgICAgICAgICBjc3M9e1toYW5kbGUsIHJpZ2h0U2lkZUxpbmVdfVxyXG4gICAgICAgICAgLz5cclxuICAgICAgICApXHJcbiAgICAgICAgaGFuZGxlcnMucHVzaChcclxuICAgICAgICAgIDxzcGFuXHJcbiAgICAgICAgICAgIGtleT0nNCdcclxuICAgICAgICAgICAgY2xhc3NOYW1lPSdsaXN0LWNhcmQtcm5kLXJlc2l6ZS1yaWdodCdcclxuICAgICAgICAgICAgY3NzPXtbaGFuZGxlLCBzaWRlSGFuZGxlLCByaWdodFNpZGVDdXJzb3JdfVxyXG4gICAgICAgICAgLz5cclxuICAgICAgICApXHJcbiAgICAgICAgaWYgKCFrZWVwQXNwZWN0UmF0aW8pIHtcclxuICAgICAgICAgIGhhbmRsZXJzLnB1c2goXHJcbiAgICAgICAgICAgIDxzcGFuXHJcbiAgICAgICAgICAgICAga2V5PSc5J1xyXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT0nbGlzdC1jYXJkLXJuZC1yZXNpemUtYm90dG9tLWxpbmUnXHJcbiAgICAgICAgICAgICAgY3NzPXtbaGFuZGxlLCBib3R0b21TaWRlTGluZV19XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICApXHJcbiAgICAgICAgICBoYW5kbGVycy5wdXNoKFxyXG4gICAgICAgICAgICA8c3BhblxyXG4gICAgICAgICAgICAgIGtleT0nNidcclxuICAgICAgICAgICAgICBjbGFzc05hbWU9J2xpc3QtY2FyZC1ybmQtcmVzaXplLWJvdHRvbSdcclxuICAgICAgICAgICAgICBjc3M9e1toYW5kbGUsIHNpZGVIYW5kbGUsIGJvdHRvbVNpZGVDdXJzb3JdfVxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICAgKVxyXG4gICAgICAgIH1cclxuICAgICAgICBicmVha1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGhhbmRsZXJzXHJcbiAgfVxyXG5cclxuICBnZXRDYXJkVG9vbHNTdHlsZSA9ICh0aGVtZTogSU1UaGVtZVZhcmlhYmxlcykgPT4ge1xyXG4gICAgcmV0dXJuIGNzc2BcclxuICAgICAgd2lkdGg6IDEwMCU7XHJcbiAgICAgIC5idG4ge1xyXG4gICAgICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgICB9XHJcbiAgICAgIC5kcm9wZG93bi10b2dnbGUge1xyXG4gICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gICAgICB9XHJcbiAgICBgXHJcbiAgfVxyXG5cclxuICByZW5kZXJDYXJkVG9vbHMgPSAoKSA9PiB7XHJcbiAgICBjb25zdCB7IGluZGV4IH0gPSB0aGlzLnByb3BzXHJcbiAgICBjb25zdCBpc0luQnVpbGRlciA9IHdpbmRvdy5qaW11Q29uZmlnLmlzSW5CdWlsZGVyXHJcbiAgICBpZiAoIWlzSW5CdWlsZGVyIHx8IGluZGV4ID4gMCkgcmV0dXJuXHJcbiAgICBjb25zdCB7XHJcbiAgICAgIGNhcmRDb25maWdzLFxyXG4gICAgICBhcHBNb2RlLFxyXG4gICAgICBidWlsZGVyU3VwcG9ydE1vZHVsZXMsXHJcbiAgICAgIGRhdGFzb3VyY2VJZCxcclxuICAgICAgc2VsZWN0aW9uSXNJbkxpc3QsXHJcbiAgICAgIHNlbGVjdGlvbklzTGlzdCxcclxuICAgICAgaGlkZUNhcmRUb29sXHJcbiAgICB9ID0gdGhpcy5wcm9wc1xyXG5cclxuICAgIGxldCBzaG93VG9vbHMgPSB0cnVlXHJcbiAgICBjb25zdCB7XHJcbiAgICAgIEJ1aWxkZXJQb3BwZXIsXHJcbiAgICAgIEdMT0JBTF9SRVNJWklOR19DTEFTU19OQU1FLFxyXG4gICAgICBHTE9CQUxfSDVfRFJBR0dJTkdfQ0xBU1NfTkFNRSxcclxuICAgICAgR0xPQkFMX0RSQUdHSU5HX0NMQVNTX05BTUVcclxuICAgIH0gPSBidWlsZGVyU3VwcG9ydE1vZHVsZXMud2lkZ2V0TW9kdWxlc1xyXG5cclxuICAgIGNvbnN0IGlzSW5MaXN0ID0gc2VsZWN0aW9uSXNJbkxpc3RcclxuICAgIGNvbnN0IGlzU2VsZiA9IHNlbGVjdGlvbklzTGlzdFxyXG4gICAgaWYgKFxyXG4gICAgICAoIWlzSW5MaXN0ICYmICFpc1NlbGYpIHx8XHJcbiAgICAgIGFwcE1vZGUgPT09IEFwcE1vZGUuUnVuIHx8XHJcbiAgICAgIGhpZGVDYXJkVG9vbCB8fFxyXG4gICAgICAhZGF0YXNvdXJjZUlkXHJcbiAgICApIHtcclxuICAgICAgc2hvd1Rvb2xzID0gZmFsc2VcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICBzaG93VG9vbHMgJiZcclxuICAgICAgdGhpcy5wcm9wcy5pc0VkaXRpbmcgJiZcclxuICAgICAgKGNhcmRDb25maWdzW1N0YXR1cy5Ib3Zlcl0uZW5hYmxlIHx8XHJcbiAgICAgICAgY2FyZENvbmZpZ3NbU3RhdHVzLlNlbGVjdGVkXS5zZWxlY3Rpb25Nb2RlICE9PVxyXG4gICAgICAgICAgU2VsZWN0aW9uTW9kZVR5cGUuTm9uZSkgJiYgKFxyXG4gICAgICAgIDxCdWlsZGVyUG9wcGVyXHJcbiAgICAgICAgICBwbGFjZW1lbnQ9J2xlZnQtc3RhcnQnXHJcbiAgICAgICAgICB0cmFwRm9jdXM9e2ZhbHNlfVxyXG4gICAgICAgICAgYXV0b0ZvY3VzPXtmYWxzZX1cclxuICAgICAgICAgIGNzcz17Y3NzYFxyXG4gICAgICAgICAgICAuJHtHTE9CQUxfRFJBR0dJTkdfQ0xBU1NfTkFNRX0gJixcclxuICAgICAgICAgICAgLiR7R0xPQkFMX1JFU0laSU5HX0NMQVNTX05BTUV9ICYsXHJcbiAgICAgICAgICAgIC4ke0dMT0JBTF9INV9EUkFHR0lOR19DTEFTU19OQU1FfSAmIHtcclxuICAgICAgICAgICAgICAmLnBvcHBlciB7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBub25lO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgYH1cclxuICAgICAgICAgIHJlZmVyZW5jZT17dGhpcy5yZXNpemVSZWYuY3VycmVudH1cclxuICAgICAgICAgIG9mZnNldD17c3RhdGVzUG9wcGVyT2Zmc2V0fVxyXG4gICAgICAgICAgbW9kaWZpZXJzPXtzdGF0ZXNNb2RpZmllcnN9XHJcbiAgICAgICAgICBvcGVuPXtzaG93VG9vbHN9XHJcbiAgICAgICAgPlxyXG4gICAgICAgICAge3RoaXMuZ2V0Q2FyZE1lbnVFbGVtZW50KCl9XHJcbiAgICAgICAgPC9CdWlsZGVyUG9wcGVyPlxyXG4gICAgICApXHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBnZXRDYXJkTWVudUVsZW1lbnQgPSAoKSA9PiB7XHJcbiAgICBjb25zdCB7IGluZGV4IH0gPSB0aGlzLnByb3BzXHJcbiAgICBjb25zdCBpc0luQnVpbGRlciA9IHdpbmRvdy5qaW11Q29uZmlnLmlzSW5CdWlsZGVyXHJcbiAgICBpZiAoIWlzSW5CdWlsZGVyIHx8IGluZGV4ID4gMCkgcmV0dXJuXHJcbiAgICBjb25zdCB7XHJcbiAgICAgIGNhcmRDb25maWdzLFxyXG4gICAgICBzZWxlY3Rpb24sXHJcbiAgICAgIHdpZGdldElkLFxyXG4gICAgICBidWlsZGVyU3VwcG9ydE1vZHVsZXMsXHJcbiAgICAgIGJyb3dzZXJTaXplTW9kZSxcclxuICAgICAgYnVpbGRlclN0YXR1cyxcclxuICAgICAgc2VsZWN0aW9uSXNMaXN0XHJcbiAgICB9ID0gdGhpcy5wcm9wc1xyXG5cclxuICAgIGNvbnN0IGFjdGlvbiA9IGJ1aWxkZXJTdXBwb3J0TW9kdWxlcy5qaW11Rm9yQnVpbGRlckxpYi5nZXRBcHBDb25maWdBY3Rpb24oKVxyXG4gICAgY29uc3QgYXBwQ29uZmlnID0gYWN0aW9uLmFwcENvbmZpZ1xyXG5cclxuICAgIGNvbnN0IHtcclxuICAgICAgc2VhcmNoVXRpbHMsXHJcbiAgICAgIEJ1aWxkZXJEcm9wRG93bixcclxuICAgICAgQnVpbGRlckJ1dHRvbixcclxuICAgICAgd2l0aEJ1aWxkZXJUaGVtZVxyXG4gICAgfSA9IGJ1aWxkZXJTdXBwb3J0TW9kdWxlcy53aWRnZXRNb2R1bGVzXHJcblxyXG4gICAgY29uc3QgaXNTZWxmID0gc2VsZWN0aW9uSXNMaXN0XHJcblxyXG4gICAgY29uc3Qgc2hvd0JyZWFrID1cclxuICAgICAgIWlzU2VsZiAmJlxyXG4gICAgICBzZWxlY3Rpb24gJiZcclxuICAgICAgc2VhcmNoVXRpbHMgJiZcclxuICAgICAgc2VhcmNoVXRpbHMuZ2V0UmVsYXRlZExheW91dEl0ZW1zSW5XaWRnZXRCeUxheW91dEluZm8oXHJcbiAgICAgICAgYXBwQ29uZmlnLFxyXG4gICAgICAgIHNlbGVjdGlvbixcclxuICAgICAgICB3aWRnZXRJZCxcclxuICAgICAgICBicm93c2VyU2l6ZU1vZGVcclxuICAgICAgKS5sZW5ndGggPiAxXHJcbiAgICBjb25zdCB7IGl0ZW1zOiBzeW5jSXRlbXMsIHRpdGxlOiBzeW5jVGl0bGUgfSA9IHRoaXMuZ2V0Q29weURyb3Bkb3duSXRlbXMoXHJcbiAgICAgIHNob3dCcmVha1xyXG4gICAgKVxyXG4gICAgY29uc3Qgc2hvd1N5bmMgPSBzeW5jSXRlbXMgJiYgc3luY0l0ZW1zLmxlbmd0aCA+IDBcclxuICAgIGNvbnN0IGxpc3RMYXlvdXQgPSBjYXJkQ29uZmlnc1tidWlsZGVyU3RhdHVzXT8ubGlzdExheW91dCB8fCBMaXN0TGF5b3V0LkNVU1RPTVxyXG4gICAgY29uc3QgaXNTaG93U3luY09yQnJlYWsgPSBzaG93U3luYyB8fCBzaG93QnJlYWtcclxuICAgIGNvbnN0IGlzU2hvd0NvcHlQb3BwZXIgPSAhaXNTZWxmICYmIGlzU2hvd1N5bmNPckJyZWFrICYmIGxpc3RMYXlvdXQgPT09IExpc3RMYXlvdXQuQ1VTVE9NXHJcbiAgICBjb25zdCBDYXJkTWVudSA9IHdpdGhCdWlsZGVyVGhlbWUodGhlbWUgPT4ge1xyXG4gICAgICByZXR1cm4gKFxyXG4gICAgICAgIDxkaXZcclxuICAgICAgICAgIGNsYXNzTmFtZT0nc3RhdHVzLWdyb3VwIGQtZmxleCBmbGV4LWNvbHVtbiBhbGlnbi1pdGVtcy1jZW50ZXIgcC0yJ1xyXG4gICAgICAgICAgY3NzPXt0aGlzLmdldENhcmRUb29sc1N0eWxlKHRoZW1lKX1cclxuICAgICAgICA+XHJcbiAgICAgICAgICA8QnVpbGRlckJ1dHRvblxyXG4gICAgICAgICAgICBhY3RpdmU9e2J1aWxkZXJTdGF0dXMgPT09IFN0YXR1cy5SZWd1bGFyfVxyXG4gICAgICAgICAgICBvbkNsaWNrPXtldnQgPT4geyB0aGlzLmhhbmRsZUJ1aWxkZXJTdGF0dXNDaGFuZ2UoZXZ0LCBTdGF0dXMuUmVndWxhcikgfX1cclxuICAgICAgICAgID5cclxuICAgICAgICAgICAge3RoaXMuZm9ybWF0TWVzc2FnZSgnZGVmYXVsdCcpfVxyXG4gICAgICAgICAgPC9CdWlsZGVyQnV0dG9uPlxyXG4gICAgICAgICAge2NhcmRDb25maWdzW1N0YXR1cy5Ib3Zlcl0uZW5hYmxlICYmIChcclxuICAgICAgICAgICAgPEJ1aWxkZXJCdXR0b25cclxuICAgICAgICAgICAgICBhY3RpdmU9e2J1aWxkZXJTdGF0dXMgPT09IFN0YXR1cy5Ib3Zlcn1cclxuICAgICAgICAgICAgICBjbGFzc05hbWU9J210LTEnXHJcbiAgICAgICAgICAgICAgb25DbGljaz17ZXZ0ID0+IHsgdGhpcy5oYW5kbGVCdWlsZGVyU3RhdHVzQ2hhbmdlKGV2dCwgU3RhdHVzLkhvdmVyKSB9fVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAge3RoaXMuZm9ybWF0TWVzc2FnZSgnaG92ZXInKX1cclxuICAgICAgICAgICAgPC9CdWlsZGVyQnV0dG9uPlxyXG4gICAgICAgICAgKX1cclxuICAgICAgICAgIHtjYXJkQ29uZmlnc1tTdGF0dXMuU2VsZWN0ZWRdLnNlbGVjdGlvbk1vZGUgIT09XHJcbiAgICAgICAgICAgIFNlbGVjdGlvbk1vZGVUeXBlLk5vbmUgJiYgKFxyXG4gICAgICAgICAgICA8QnVpbGRlckJ1dHRvblxyXG4gICAgICAgICAgICAgIGFjdGl2ZT17YnVpbGRlclN0YXR1cyA9PT0gU3RhdHVzLlNlbGVjdGVkfVxyXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT0nbXQtMSdcclxuICAgICAgICAgICAgICBvbkNsaWNrPXtldnQgPT4geyB0aGlzLmhhbmRsZUJ1aWxkZXJTdGF0dXNDaGFuZ2UoZXZ0LCBTdGF0dXMuU2VsZWN0ZWQpIH19XHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICB7dGhpcy5mb3JtYXRNZXNzYWdlKCdzZWxlY3RlZCcpfVxyXG4gICAgICAgICAgICA8L0J1aWxkZXJCdXR0b24+XHJcbiAgICAgICAgICApfVxyXG4gICAgICAgICAge2lzU2hvd0NvcHlQb3BwZXIgJiYgKFxyXG4gICAgICAgICAgICA8QnVpbGRlckRyb3BEb3duXHJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPSdtdC0xIHctMTAwJ1xyXG4gICAgICAgICAgICAgIHRvZ2dsZUlzSWNvblxyXG4gICAgICAgICAgICAgIHRvZ2dsZVRpdGxlPXtzeW5jVGl0bGV9XHJcbiAgICAgICAgICAgICAgdG9nZ2xlVHlwZT0nZGVmYXVsdCdcclxuICAgICAgICAgICAgICBkaXJlY3Rpb249J2xlZnQnXHJcbiAgICAgICAgICAgICAgdG9nZ2xlQXJyb3c9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgIHRvZ2dsZUNvbnRlbnQ9e3RoZW1lID0+IChcclxuICAgICAgICAgICAgICAgIHNob3dCcmVhayA/IDxTeW5jT25PdXRsaW5lZCBzaXplPXsxNn0vPiA6IDxTeW5jT2ZmT3V0bGluZWQgc2l6ZT17MTZ9Lz5cclxuICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgIG1vZGlmaWVycz17YXBwbHlQb3BwZXJNb2RpZmllcnN9XHJcbiAgICAgICAgICAgICAgaXRlbXM9e3N5bmNJdGVtc31cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICAgICl9XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIClcclxuICAgIH0pXHJcbiAgICByZXR1cm4gKDxDYXJkTWVudS8+KVxyXG4gIH1cclxuXHJcbiAgaXNJdGVtQWNjZXB0ID0gKFxyXG4gICAgaXRlbTogTGF5b3V0SXRlbUNvbnN0cnVjdG9yUHJvcHMsXHJcbiAgICBpc1BsYWNlaG9sZGVyOiBib29sZWFuXHJcbiAgKTogYm9vbGVhbiA9PiB7XHJcbiAgICBpZiAoIWl0ZW0pIHJldHVybiBmYWxzZVxyXG4gICAgY29uc3QgeyBpc0VkaXRpbmcgfSA9IHRoaXMucHJvcHNcclxuICAgIGNvbnN0IHN1cHBvcnRSZXBlYXQgPSBpdGVtLm1hbmlmZXN0Py5wcm9wZXJ0aWVzPy5zdXBwb3J0UmVwZWF0XHJcbiAgICAvLyBpZighc3VwcG9ydFJlcGVhdCAmJiBpdGVtLml0ZW1UeXBlID09PSBMYXlvdXRJdGVtVHlwZS5XaWRnZXQgJiYgIWl0ZW0uaWQpey8vc3VwcG9ydCBwbGFjZWhvbGRlclxyXG4gICAgLy8gICBzdXBwb3J0UmVwZWF0ID0gdHJ1ZTtcclxuICAgIC8vIH1cclxuICAgIGNvbnN0IHsgYnVpbGRlclN1cHBvcnRNb2R1bGVzLCB3aWRnZXRJZCB9ID0gdGhpcy5wcm9wc1xyXG4gICAgY29uc3QgYWN0aW9uID0gYnVpbGRlclN1cHBvcnRNb2R1bGVzLmppbXVGb3JCdWlsZGVyTGliLmdldEFwcENvbmZpZ0FjdGlvbigpXHJcbiAgICBjb25zdCBhcHBDb25maWcgPSBhY3Rpb24uYXBwQ29uZmlnXHJcbiAgICBjb25zdCBzZWxlY3Rpb25Jbkxpc3QgPSBidWlsZGVyU3VwcG9ydE1vZHVsZXMud2lkZ2V0TW9kdWxlcy5zZWxlY3Rpb25Jbkxpc3RcclxuICAgIHJldHVybiAoXHJcbiAgICAgIGlzRWRpdGluZyAmJlxyXG4gICAgICBzdXBwb3J0UmVwZWF0ICYmXHJcbiAgICAgICghaXRlbS5sYXlvdXRJbmZvIHx8XHJcbiAgICAgICAgKGl0ZW0ubGF5b3V0SW5mbyAmJlxyXG4gICAgICAgICAgc2VsZWN0aW9uSW5MaXN0KGl0ZW0ubGF5b3V0SW5mbywgd2lkZ2V0SWQsIGFwcENvbmZpZywgZmFsc2UpKSlcclxuICAgIClcclxuICB9XHJcblxyXG4gIGdldEVkaXRvclN0eWxlID0gKCkgPT4ge1xyXG4gICAgcmV0dXJuIGNzc2BcclxuICAgICAgJi5saXN0LWNhcmQtY29udGVudCB7XHJcbiAgICAgICAgLmZpeGVkLWxheW91dCB7XHJcbiAgICAgICAgICBib3JkZXI6IDAgIWltcG9ydGFudDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIGBcclxuICB9XHJcblxyXG4gIHJlbmRlciAoKSB7XHJcbiAgICBjb25zdCB7XHJcbiAgICAgIHNlbGVjdGFibGUsXHJcbiAgICAgIGFjdGl2ZSxcclxuICAgICAgY2FyZENvbmZpZ3MsXHJcbiAgICAgIExheW91dEVudHJ5LFxyXG4gICAgICBzZWxlY3Rpb25Jc0luTGlzdCxcclxuICAgICAgaXNFZGl0aW5nLFxyXG4gICAgICB3aWRnZXRJZCxcclxuICAgICAgbGlzdFN0eWxlLFxyXG4gICAgICBsb2NrSXRlbVJhdGlvLFxyXG4gICAgICBidWlsZGVyU3RhdHVzLFxyXG4gICAgICBsYXlvdXRzLFxyXG4gICAgICBsYXlvdXRUeXBlXHJcbiAgICB9ID0gdGhpcy5wcm9wc1xyXG4gICAgY29uc3QgeyBkaWRNb3VudCB9ID0gdGhpcy5zdGF0ZVxyXG4gICAgY29uc3QgbGF5b3V0ID0gbGF5b3V0c1tidWlsZGVyU3RhdHVzXVxyXG4gICAgY29uc3QgbGlzdExheW91dCA9IGNhcmRDb25maWdzW2J1aWxkZXJTdGF0dXNdPy5saXN0TGF5b3V0IHx8IExpc3RMYXlvdXQuQ1VTVE9NXHJcbiAgICBjb25zdCByZWd1bGFyTGF5b3V0ID0gbGF5b3V0c1tTdGF0dXMuUmVndWxhcl1cclxuICAgIGNvbnN0IHNob3dMYXlvdXQgPSBsaXN0TGF5b3V0ID09PSBMaXN0TGF5b3V0LkFVVE8gPyByZWd1bGFyTGF5b3V0IDogbGF5b3V0XHJcbiAgICBjb25zdCBiZ1N0eWxlID0gY2FyZENvbmZpZ3NbYnVpbGRlclN0YXR1c10uYmFja2dyb3VuZFN0eWxlXHJcbiAgICBjb25zdCBpc1Nob3dNYXNrID0gbGlzdExheW91dCA9PT0gTGlzdExheW91dC5BVVRPICYmIGJ1aWxkZXJTdGF0dXMgIT09IFN0YXR1cy5SZWd1bGFyXHJcbiAgICBjb25zdCBtZXJnZWRTdHlsZTogYW55ID0ge1xyXG4gICAgICAuLi5zdHlsZVV0aWxzLnRvQ1NTU3R5bGUoYmdTdHlsZSB8fCAoe30gYXMgYW55KSlcclxuICAgIH1cclxuICAgIGNvbnN0IGNhcmRDb250ZW50U3R5bGU6IGFueSA9IHtcclxuICAgICAgLi4uc3R5bGVVdGlscy50b0NTU1N0eWxlKFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGJvcmRlclJhZGl1czogYmdTdHlsZT8uYm9yZGVyUmFkaXVzIHx8IDBcclxuICAgICAgICB9IHx8ICh7fSBhcyBhbnkpXHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBuZXdQcm92aWRlckRhdGEgPSB0aGlzLmdldE5ld1Byb3ZpZGVyRGF0YSgpXHJcbiAgICBpZiAoIXRoaXMuaXNQcm92aWRlckVxdWFsKG5ld1Byb3ZpZGVyRGF0YSwgdGhpcy5wcm92aWRlckRhdGEpKSB7XHJcbiAgICAgIHRoaXMucHJvdmlkZXJEYXRhID0gbmV3UHJvdmlkZXJEYXRhXHJcbiAgICB9XHJcbiAgICBjb25zdCBpc0xvY2tJdGVtUmF0aW8gPSBsYXlvdXRUeXBlICE9PSBMaXN0TGF5b3V0VHlwZS5HUklEICYmIGxvY2tJdGVtUmF0aW9cclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxSZXBlYXRlZERhdGFTb3VyY2VQcm92aWRlciBkYXRhPXt0aGlzLnByb3ZpZGVyRGF0YX0+XHJcbiAgICAgICAgPExpc3RHcm91cEl0ZW1cclxuICAgICAgICAgIGFjdGl2ZT17c2VsZWN0YWJsZSAmJiBhY3RpdmV9XHJcbiAgICAgICAgICBjc3M9e3RoaXMuZ2V0U3R5bGUoYnVpbGRlclN0YXR1cyl9XHJcbiAgICAgICAgICBzdHlsZT17eyAuLi5jYXJkQ29udGVudFN0eWxlLCAuLi5saXN0U3R5bGUgfX1cclxuICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnc3VyZmFjZS0xJywgYGxpc3QtY2FyZC0ke3dpZGdldElkfWApfVxyXG4gICAgICAgICAgb25DbGljaz17dGhpcy5oYW5kbGVJdGVtQ2xpY2t9XHJcbiAgICAgICAgICByb2xlPSdsaXN0Q2FyZEVkaXRvcidcclxuICAgICAgICA+XHJcbiAgICAgICAgICB7aXNTaG93TWFzayAmJiA8ZGl2IGNsYXNzTmFtZT0nY2FyZC1lZGl0b3ItbWFzayBwb3NpdGlvbi1hYnNvbHV0ZSc+PC9kaXY+fVxyXG4gICAgICAgICAge2RpZE1vdW50ICYmIHRoaXMucmVuZGVyQ2FyZFRvb2xzKCl9XHJcbiAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgIGNsYXNzTmFtZT0nbGlzdC1jYXJkLWNvbnRlbnQgZC1mbGV4J1xyXG4gICAgICAgICAgICBzdHlsZT17bWVyZ2VkU3R5bGV9XHJcbiAgICAgICAgICAgIGNzcz17dGhpcy5nZXRFZGl0b3JTdHlsZSgpfVxyXG4gICAgICAgICAgICByZWY9e3RoaXMucmVzaXplUmVmfVxyXG4gICAgICAgICAgPlxyXG4gICAgICAgICAgICA8TGF5b3V0RW50cnlcclxuICAgICAgICAgICAgICBpc0l0ZW1BY2NlcHRlZD17dGhpcy5pc0l0ZW1BY2NlcHR9XHJcbiAgICAgICAgICAgICAgaXNSZXBlYXRcclxuICAgICAgICAgICAgICBsYXlvdXRzPXtzaG93TGF5b3V0fVxyXG4gICAgICAgICAgICAgIGlzSW5XaWRnZXRcclxuICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAge2lzRWRpdGluZyAmJlxyXG4gICAgICAgICAgICAgICFzZWxlY3Rpb25Jc0luTGlzdCAmJlxyXG4gICAgICAgICAgICAgICFpc0xvY2tJdGVtUmF0aW8gJiZcclxuICAgICAgICAgICAgICB0aGlzLl9yZW5kZXJBY3Rpb24oKX1cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvTGlzdEdyb3VwSXRlbT5cclxuICAgICAgPC9SZXBlYXRlZERhdGFTb3VyY2VQcm92aWRlcj5cclxuICAgIClcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFJlYWN0UmVkdXguY29ubmVjdDxFeHRyYVByb3BzLCB1bmtub3duLCBMaXN0Q2FyZEVkaXRvclByb3BzPihcclxuICAoc3RhdGU6IElNU3RhdGUsIHByb3BzOiBMaXN0Q2FyZEVkaXRvclByb3BzKSA9PiB7XHJcbiAgICBjb25zdCB7XHJcbiAgICAgIHNlbGVjdGlvbklzTGlzdCxcclxuICAgICAgYnVpbGRlclN1cHBvcnRNb2R1bGVzLFxyXG4gICAgICBhcHBNb2RlLFxyXG4gICAgICB3aWRnZXRJZCxcclxuICAgICAgYnJvd3NlclNpemVNb2RlXHJcbiAgICB9ID0gcHJvcHNcclxuICAgIGlmICghd2luZG93LmppbXVDb25maWcuaXNJbkJ1aWxkZXIgfHwgYXBwTW9kZSA9PT0gQXBwTW9kZS5SdW4pIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzZWxlY3Rpb246IHVuZGVmaW5lZCxcclxuICAgICAgICBzaG93QnJlYWs6IGZhbHNlXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IHNlYXJjaFV0aWxzID0gYnVpbGRlclN1cHBvcnRNb2R1bGVzPy53aWRnZXRNb2R1bGVzPy5zZWFyY2hVdGlsc1xyXG4gICAgY29uc3QgYWN0aW9uID0gYnVpbGRlclN1cHBvcnRNb2R1bGVzLmppbXVGb3JCdWlsZGVyTGliLmdldEFwcENvbmZpZ0FjdGlvbigpXHJcbiAgICBjb25zdCBhcHBDb25maWcgPSBhY3Rpb24uYXBwQ29uZmlnXHJcbiAgICBjb25zdCBzZWxlY3Rpb24gPVxyXG4gICAgICBwcm9wcy5pbmRleCA9PT0gMCAmJlxyXG4gICAgICBwcm9wcy5zZWxlY3Rpb25Jc0luTGlzdCAmJlxyXG4gICAgICBzdGF0ZSAmJlxyXG4gICAgICBzdGF0ZS5hcHBSdW50aW1lSW5mbyAmJlxyXG4gICAgICBzdGF0ZS5hcHBSdW50aW1lSW5mby5zZWxlY3Rpb25cclxuICAgIGNvbnN0IHNob3dCcmVhayA9XHJcbiAgICAgICFzZWxlY3Rpb25Jc0xpc3QgJiZcclxuICAgICAgc2VsZWN0aW9uICYmXHJcbiAgICAgIHNlYXJjaFV0aWxzICYmXHJcbiAgICAgIHNlYXJjaFV0aWxzLmdldFJlbGF0ZWRMYXlvdXRJdGVtc0luV2lkZ2V0QnlMYXlvdXRJbmZvKFxyXG4gICAgICAgIGFwcENvbmZpZyxcclxuICAgICAgICBzZWxlY3Rpb24sXHJcbiAgICAgICAgd2lkZ2V0SWQsXHJcbiAgICAgICAgYnJvd3NlclNpemVNb2RlXHJcbiAgICAgICkubGVuZ3RoID4gMVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc2VsZWN0aW9uLFxyXG4gICAgICBzaG93QnJlYWtcclxuICAgIH1cclxuICB9XHJcbikoX0xpc3RDYXJkRWRpdG9yKVxyXG4iLCIvKiogQGpzeCBqc3ggKi9cclxuaW1wb3J0IHtcclxuICBSZXBlYXRlZERhdGFTb3VyY2VQcm92aWRlcixcclxuICBqc3gsXHJcbiAgQXBwTW9kZSxcclxuICBSZWFjdCxcclxuICBFeHByZXNzaW9uUmVzb2x2ZXJDb21wb25lbnQsXHJcbiAgdHlwZSBEYXRhUmVjb3JkLFxyXG4gIHR5cGUgSW1tdXRhYmxlQXJyYXksXHJcbiAgdHlwZSBVc2VEYXRhU291cmNlLFxyXG4gIHR5cGUgTGlua1RvLFxyXG4gIHR5cGUgTGlua1Jlc3VsdCxcclxuICBMaW5rVHlwZSxcclxuICB0eXBlIEltbXV0YWJsZU9iamVjdCxcclxuICB0eXBlIFVybFBhcmFtZXRlcnMsXHJcbiAgdXRpbHMsXHJcbiAgY2xhc3NOYW1lc1xyXG59IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHsgTGlzdEdyb3VwSXRlbSwgc3R5bGVVdGlscywgX0xpbmsgYXMgTGluaywgdHlwZSBMaW5rVGFyZ2V0IH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHsgTGF5b3V0RW50cnkgfSBmcm9tICdqaW11LWxheW91dHMvbGF5b3V0LXJ1bnRpbWUnXHJcbmltcG9ydCB7IFN0YXR1cywgTGlzdExheW91dCB9IGZyb20gJy4uLy4uL2NvbmZpZydcclxuaW1wb3J0IExpc3RDYXJkLCB7IHR5cGUgTGlzdENhcmRQcm9wcywgdHlwZSBMaXN0Q2FyZFN0YXRlcyB9IGZyb20gJy4vbGlzdC1jYXJkLWJhc2UnXHJcbmltcG9ydCB7IHR5cGUgSU1MaW5rUGFyYW0gfSBmcm9tICdqaW11LXVpL2FkdmFuY2VkL3NldHRpbmctY29tcG9uZW50cydcclxuaW1wb3J0IHsgRnJhZ21lbnQgfSBmcm9tICdyZWFjdCdcclxuXHJcbmludGVyZmFjZSBMaXN0Q2FyZFZpZXdlclByb3BzIGV4dGVuZHMgTGlzdENhcmRQcm9wcyB7XHJcbiAgdXNlRGF0YVNvdXJjZXM6IEltbXV0YWJsZUFycmF5PFVzZURhdGFTb3VyY2U+XHJcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xyXG4gIC8qKlxyXG4gICAqIG9uZSBvciBtb3JlIGV4cHJlc3Npb25zXHJcbiAgICovXHJcbiAgbGlua1BhcmFtOiBJTUxpbmtQYXJhbVxyXG4gIHF1ZXJ5T2JqZWN0OiBJbW11dGFibGVPYmplY3Q8VXJsUGFyYW1ldGVycz5cclxufVxyXG5cclxuaW50ZXJmYWNlIExpc3RDYXJkVmlld2VyU3RhdGVzIGV4dGVuZHMgTGlzdENhcmRTdGF0ZXMge1xyXG4gIHVybDogc3RyaW5nXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExpc3RDYXJkVmlld2VyIGV4dGVuZHMgTGlzdENhcmQ8XHJcbkxpc3RDYXJkVmlld2VyUHJvcHMsXHJcbkxpc3RDYXJkVmlld2VyU3RhdGVzXHJcbj4ge1xyXG4gIGxheW91dFJlZjogYW55XHJcbiAgbGlua1JlZjogUmVhY3QuUmVmT2JqZWN0PEhUTUxCdXR0b25FbGVtZW50PlxyXG4gIGV4cHJlc3Npb25SZWNvcmRzOiB7IFtrZXk6IHN0cmluZ106IERhdGFSZWNvcmQgfVxyXG4gIGNvbnN0cnVjdG9yIChwcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpXHJcblxyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgdXJsOiAnJ1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMucHJvdmlkZXJEYXRhID0gdGhpcy5nZXROZXdQcm92aWRlckRhdGEoKVxyXG4gICAgdGhpcy51cGRhdGVFeHByZXNzaW9uUmVjb3JkcygpXHJcbiAgICB0aGlzLmxheW91dFJlZiA9IFJlYWN0LmNyZWF0ZVJlZigpXHJcbiAgICB0aGlzLmxpbmtSZWYgPSBSZWFjdC5jcmVhdGVSZWY8SFRNTEJ1dHRvbkVsZW1lbnQ+KClcclxuICB9XHJcblxyXG4gIHByaXZhdGUgcmVhZG9ubHkgdXBkYXRlRXhwcmVzc2lvblJlY29yZHMgPSAoKSA9PiB7XHJcbiAgICB0aGlzLmV4cHJlc3Npb25SZWNvcmRzID0ge31cclxuICAgIGlmICh0aGlzLnByb3ZpZGVyRGF0YT8uZGF0YVNvdXJjZUlkICYmIHRoaXMucHJvdmlkZXJEYXRhPy5yZWNvcmQpIHtcclxuICAgICAgdGhpcy5leHByZXNzaW9uUmVjb3Jkc1tcclxuICAgICAgICB0aGlzLnByb3ZpZGVyRGF0YS5kYXRhU291cmNlSWRcclxuICAgICAgXSA9IHRoaXMucHJvdmlkZXJEYXRhLnJlY29yZFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25VcmxFeHBSZXNvbHZlQ2hhbmdlID0gcmVzdWx0ID0+IHtcclxuICAgIGlmIChyZXN1bHQuaXNTdWNjZXNzZnVsKSB7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyB1cmw6IHJlc3VsdC52YWx1ZSB9KVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgcmVzOiBzdHJpbmcgPSAnJ1xyXG4gICAgICAvLyBjb25zdCBlcnJvckNvZGUgPSByZXN1bHQudmFsdWVcclxuICAgICAgLy8gaWYgKGVycm9yQ29kZSA9PT0gRXhwcmVzc2lvblJlc29sdmVyRXJyb3JDb2RlLkZhaWxlZCkge1xyXG4gICAgICAvLyB9XHJcblxyXG4gICAgICB0aGlzLnNldFN0YXRlKHsgdXJsOiByZXMgfSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNob3VsZENvbXBvbmVudFVwZGF0ZSAobmV4dFByb3BzLCBuZXh0U3RhdHMpIHtcclxuICAgIGxldCBzaG91bGRVcGRhdGUgPSB0aGlzLnNob3VsZENvbXBvbmVudFVwZGF0ZUV4Y2VwdChuZXh0UHJvcHMsIG5leHRTdGF0cywgW1xyXG4gICAgICAnbGlzdFN0eWxlJ1xyXG4gICAgXSlcclxuICAgIHNob3VsZFVwZGF0ZSA9XHJcbiAgICAgIHNob3VsZFVwZGF0ZSB8fFxyXG4gICAgICAhdXRpbHMuaXNEZWVwRXF1YWwodGhpcy5wcm9wcy5saXN0U3R5bGUsIG5leHRQcm9wcy5saXN0U3R5bGUpXHJcbiAgICByZXR1cm4gc2hvdWxkVXBkYXRlXHJcbiAgfVxyXG5cclxuICAvLyBjb21wb25lbnREaWRVcGRhdGUocHJlUHJvcHMsIHByZVN0YXRlKXtcclxuICAvLyAgIE9iamVjdC5rZXlzKHRoaXMucHJvcHMpLmZvckVhY2goa2V5ID0+IHtcclxuICAvLyAgICAgaWYodGhpcy5wcm9wc1trZXldICE9PSBwcmVQcm9wc1trZXldKVxyXG4gIC8vICAgICAgIGNvbnNvbGUubG9nKGBwcm9wcyBoYXMgY2hhbmdlZDogJHtrZXl9YClcclxuICAvLyAgIH0pXHJcbiAgLy8gfVxyXG5cclxuICBoYW5kbGVJdGVtQ2xpY2sgPSBldnQgPT4ge1xyXG4gICAgY29uc3QgeyBvbkNoYW5nZSwgYWN0aXZlIH0gPSB0aGlzLnByb3BzXHJcbiAgICBjb25zdCB7IHByb3ZpZGVyRGF0YSwgbGlua1JlZiB9ID0gdGhpc1xyXG5cclxuICAgIGNvbnN0IHRhZ05hbWUgPSAoZXZ0LnRhcmdldCAmJiBldnQudGFyZ2V0LnRhZ05hbWUpIHx8ICcnXHJcbiAgICBpZiAoXHJcbiAgICAgICEoXHJcbiAgICAgICAgdGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnYScgfHxcclxuICAgICAgICB0YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdidXR0b24nIHx8XHJcbiAgICAgICAgZXZ0LmV4YkV2ZW50VHlwZSA9PT0gJ2xpbmtDbGljaydcclxuICAgICAgKSAmJlxyXG4gICAgICAhYWN0aXZlXHJcbiAgICApIHtcclxuICAgICAgaWYgKGxpbmtSZWYuY3VycmVudCkge1xyXG4gICAgICAgIC8vIE11c3Qgc3RvcFByb3BhZ2F0aW9uIGZyb20gbGluayBjbGljaywgb3IgdGhpcyBtZXRob2Qgd2lsbCBiZSBjYWxsZWQgdHdpY2UuXHJcbiAgICAgICAgbGlua1JlZi5jdXJyZW50LmNsaWNrKClcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGlmIGNsaWNrIHN1YiB3aWRnZXQgZXZlbnQsIGRvbid0IHVuIHNlbGVjdFxyXG4gICAgaWYgKGFjdGl2ZSkge1xyXG4gICAgICBjb25zdCB0YWdOYW1lID0gKGV2dC50YXJnZXQgJiYgZXZ0LnRhcmdldC50YWdOYW1lKSB8fCAnJ1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgIShcclxuICAgICAgICAgIHRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2EnIHx8XHJcbiAgICAgICAgICB0YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdidXR0b24nIHx8XHJcbiAgICAgICAgICBldnQuZXhiRXZlbnRUeXBlID09PSAnbGlua0NsaWNrJ1xyXG4gICAgICAgIClcclxuICAgICAgKSB7XHJcbiAgICAgICAgb25DaGFuZ2UocHJvdmlkZXJEYXRhICYmIHByb3ZpZGVyRGF0YS5yZWNvcmQpXHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG9uQ2hhbmdlKHByb3ZpZGVyRGF0YSAmJiBwcm92aWRlckRhdGEucmVjb3JkKVxyXG4gICAgfVxyXG4gICAgaWYgKGV2dC5leGJFdmVudFR5cGUgPT09ICdsaW5rQ2xpY2snKSB7XHJcbiAgICAgIGRlbGV0ZSBldnQuZXhiRXZlbnRUeXBlXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBoYW5kbGVJdGVtS2V5RG93biA9IGV2dCA9PiB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gJ0VudGVyJyB8fCBldnQua2V5ID09PSAnICcpIHtcclxuICAgICAgdGhpcy5oYW5kbGVJdGVtQ2xpY2soZXZ0KVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlTGlua0NsaWNrID0gZXZ0ID0+IHtcclxuICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyICgpIHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgc2VsZWN0YWJsZSxcclxuICAgICAgYWN0aXZlLFxyXG4gICAgICBjYXJkQ29uZmlncyxcclxuICAgICAgd2lkZ2V0SWQsXHJcbiAgICAgIGxpc3RTdHlsZSxcclxuICAgICAgbGF5b3V0cyxcclxuICAgICAgaG92ZXJMYXlvdXRPcGVuLFxyXG4gICAgICBhcHBNb2RlLFxyXG4gICAgICBpc0hvdmVyLFxyXG4gICAgICBsaW5rUGFyYW0sXHJcbiAgICAgIHVzZURhdGFTb3VyY2VzLFxyXG4gICAgICBpdGVtSWRleCxcclxuICAgICAgaGFuZGxlTGlzdE1vdXNlTGVhdmUsXHJcbiAgICAgIGhhbmRsZUxpc3RNb3VzZU1vdmVcclxuICAgIH0gPSB0aGlzLnByb3BzXHJcbiAgICBsZXQgeyBxdWVyeU9iamVjdCB9ID0gdGhpcy5wcm9wc1xyXG4gICAgY29uc3QgeyB1cmwgfSA9IHRoaXMuc3RhdGVcclxuICAgIGxldCBjdXJyZW50U3RhdHVzOiBTdGF0dXMgPSBTdGF0dXMuUmVndWxhclxyXG4gICAgY29uc3QgaXNJbkJ1aWxkZXIgPSB3aW5kb3cuamltdUNvbmZpZy5pc0luQnVpbGRlclxyXG4gICAgbGV0IGxheW91dFxyXG4gICAgbGV0IGJnU3R5bGVcclxuICAgIGxldCB0YXJnZXQ6IExpbmtUYXJnZXRcclxuICAgIGxldCBsaW5rVG86IExpbmtUb1xyXG4gICAgaWYgKGlzSW5CdWlsZGVyICYmIGFwcE1vZGUgIT09IEFwcE1vZGUuUnVuKSB7XHJcbiAgICAgIGJnU3R5bGUgPSBjYXJkQ29uZmlnc1tTdGF0dXMuUmVndWxhcl0uYmFja2dyb3VuZFN0eWxlXHJcbiAgICAgIGxheW91dCA9IGxheW91dHNbU3RhdHVzLlJlZ3VsYXJdXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBsYXlvdXQgPSBsYXlvdXRzW1N0YXR1cy5SZWd1bGFyXVxyXG4gICAgICBiZ1N0eWxlID0gY2FyZENvbmZpZ3NbU3RhdHVzLlJlZ3VsYXJdLmJhY2tncm91bmRTdHlsZVxyXG4gICAgICBpZiAobGlua1BhcmFtICYmIGxpbmtQYXJhbS5saW5rVHlwZSkge1xyXG4gICAgICAgIHRhcmdldCA9IGxpbmtQYXJhbS5vcGVuVHlwZVxyXG4gICAgICAgIGxpbmtUbyA9IHtcclxuICAgICAgICAgIGxpbmtUeXBlOiBsaW5rUGFyYW0ubGlua1R5cGVcclxuICAgICAgICB9IGFzIExpbmtSZXN1bHRcclxuXHJcbiAgICAgICAgaWYgKGxpbmtQYXJhbS5saW5rVHlwZSA9PT0gTGlua1R5cGUuV2ViQWRkcmVzcykge1xyXG4gICAgICAgICAgbGlua1RvLnZhbHVlID0gdXJsXHJcbiAgICAgICAgICBxdWVyeU9iamVjdCA9IHVuZGVmaW5lZFxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBsaW5rVG8udmFsdWUgPSBsaW5rUGFyYW0udmFsdWVcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGhvdmVyTGF5b3V0T3BlbiAmJiBpc0hvdmVyICYmIGxheW91dHNbU3RhdHVzLkhvdmVyXSkge1xyXG4gICAgICAgIGN1cnJlbnRTdGF0dXMgPSBTdGF0dXMuSG92ZXJcclxuICAgICAgICBsYXlvdXQgPSBsYXlvdXRzPy5bU3RhdHVzLkhvdmVyXVxyXG4gICAgICAgIGJnU3R5bGUgPSBjYXJkQ29uZmlnc1tTdGF0dXMuSG92ZXJdLmJhY2tncm91bmRTdHlsZVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChzZWxlY3RhYmxlICYmIGFjdGl2ZSAmJiBsYXlvdXRzW1N0YXR1cy5TZWxlY3RlZF0pIHtcclxuICAgICAgICBjdXJyZW50U3RhdHVzID0gU3RhdHVzLlNlbGVjdGVkXHJcbiAgICAgICAgbGF5b3V0ID0gbGF5b3V0cz8uW1N0YXR1cy5TZWxlY3RlZF1cclxuICAgICAgICBiZ1N0eWxlID0gY2FyZENvbmZpZ3NbU3RhdHVzLlNlbGVjdGVkXS5iYWNrZ3JvdW5kU3R5bGVcclxuICAgICAgICBxdWVyeU9iamVjdCA9IHVuZGVmaW5lZFxyXG4gICAgICAgIGxpbmtUbyA9IHVuZGVmaW5lZFxyXG4gICAgICAgIHRhcmdldCA9IHVuZGVmaW5lZFxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBjdXJyZW50TGF5b3V0VHlwZSA9IGNhcmRDb25maWdzW2N1cnJlbnRTdGF0dXNdPy5saXN0TGF5b3V0IHx8IExpc3RMYXlvdXQuQ1VTVE9NXHJcbiAgICBjb25zdCByZWd1bGFyTGF5b3V0ID0gbGF5b3V0c1tTdGF0dXMuUmVndWxhcl1cclxuICAgIGNvbnN0IHNob3dMYXlvdXQgPSBjdXJyZW50TGF5b3V0VHlwZSA9PT0gTGlzdExheW91dC5BVVRPID8gcmVndWxhckxheW91dCA6IGxheW91dFxyXG5cclxuICAgIGNvbnN0IG1lcmdlZFN0eWxlOiBhbnkgPSB7XHJcbiAgICAgIC4uLnN0eWxlVXRpbHMudG9DU1NTdHlsZShiZ1N0eWxlIHx8ICh7fSBhcyBhbnkpKVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGNhcmRDb250ZW50U3R5bGU6IGFueSA9IHtcclxuICAgICAgLi4uc3R5bGVVdGlscy50b0NTU1N0eWxlKFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGJvcmRlclJhZGl1czogYmdTdHlsZT8uYm9yZGVyUmFkaXVzIHx8IDBcclxuICAgICAgICB9IHx8ICh7fSBhcyBhbnkpXHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBuZXdQcm92aWRlckRhdGEgPSB0aGlzLmdldE5ld1Byb3ZpZGVyRGF0YSgpXHJcbiAgICBpZiAoIXRoaXMuaXNQcm92aWRlckVxdWFsKG5ld1Byb3ZpZGVyRGF0YSwgdGhpcy5wcm92aWRlckRhdGEpKSB7XHJcbiAgICAgIHRoaXMucHJvdmlkZXJEYXRhID0gbmV3UHJvdmlkZXJEYXRhXHJcbiAgICAgIHRoaXMudXBkYXRlRXhwcmVzc2lvblJlY29yZHMoKVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxSZXBlYXRlZERhdGFTb3VyY2VQcm92aWRlciBkYXRhPXt0aGlzLnByb3ZpZGVyRGF0YX0+XHJcbiAgICAgICAgPExpc3RHcm91cEl0ZW1cclxuICAgICAgICAgIGFjdGl2ZT17c2VsZWN0YWJsZSAmJiBhY3RpdmV9XHJcbiAgICAgICAgICBjc3M9e3RoaXMuZ2V0U3R5bGUoY3VycmVudFN0YXR1cyl9XHJcbiAgICAgICAgICBzdHlsZT17eyAuLi5saXN0U3R5bGUsIC4uLmNhcmRDb250ZW50U3R5bGUgfX1cclxuICAgICAgICAgIHRhYkluZGV4PXswfVxyXG4gICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdzdXJmYWNlLTEgamltdS1vdXRsaW5lLWluc2lkZScsIGBsaXN0LWNhcmQtJHt3aWRnZXRJZH1gKX1cclxuICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuaGFuZGxlSXRlbUNsaWNrfVxyXG4gICAgICAgICAgcm9sZT0nb3B0aW9uJ1xyXG4gICAgICAgICAgb25LZXlEb3duPXt0aGlzLmhhbmRsZUl0ZW1LZXlEb3dufVxyXG4gICAgICAgICAgYXJpYS1kZXNjcmliZWRieT0nZGVzY3JpYmVCeU1lc3NhZ2UnXHJcbiAgICAgICAgICBhcmlhLXNlbGVjdGVkPXtzZWxlY3RhYmxlICYmIGFjdGl2ZX1cclxuICAgICAgICA+XHJcbiAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgIGNsYXNzTmFtZT0nbGlzdC1jYXJkLWNvbnRlbnQgZC1mbGV4J1xyXG4gICAgICAgICAgICBvbk1vdXNlTGVhdmU9e2hhbmRsZUxpc3RNb3VzZUxlYXZlfVxyXG4gICAgICAgICAgICBvbk1vdXNlTW92ZT17KCkgPT4geyBoYW5kbGVMaXN0TW91c2VNb3ZlKGl0ZW1JZGV4KSB9fVxyXG4gICAgICAgICAgICBzdHlsZT17bWVyZ2VkU3R5bGV9PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncG9zaXRpb24tcmVsYXRpdmUgaC0xMDAgdy0xMDAnPlxyXG4gICAgICAgICAgICAgIDxGcmFnbWVudD5cclxuICAgICAgICAgICAgICAgIDxMaW5rXHJcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0ncC0wIHctMTAwIGgtMTAwIGJvcmRlci0wIGxpc3QtY2xlYXItYmFja2dyb3VuZCBsaXN0LWxpbmsnXHJcbiAgICAgICAgICAgICAgICAgIHJlZj17dGhpcy5saW5rUmVmfVxyXG4gICAgICAgICAgICAgICAgICB0bz17bGlua1RvfVxyXG4gICAgICAgICAgICAgICAgICB0YXJnZXQ9e3RhcmdldH1cclxuICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9ey0xfVxyXG4gICAgICAgICAgICAgICAgICBxdWVyeU9iamVjdD17cXVlcnlPYmplY3R9XHJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuaGFuZGxlTGlua0NsaWNrfVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkLWZsZXggdy0xMDAgaC0xMDAgbGlzdC1pdGVtLWNvbicgcmVmPXt0aGlzLmxheW91dFJlZn0+XHJcbiAgICAgICAgICAgICAgICAgIDxMYXlvdXRFbnRyeSBsYXlvdXRzPXtzaG93TGF5b3V0fSAvPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgPC9GcmFnbWVudD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDxFeHByZXNzaW9uUmVzb2x2ZXJDb21wb25lbnRcclxuICAgICAgICAgICAgdXNlRGF0YVNvdXJjZXM9e3VzZURhdGFTb3VyY2VzfVxyXG4gICAgICAgICAgICBleHByZXNzaW9uPXtsaW5rUGFyYW0/LmV4cHJlc3Npb259XHJcbiAgICAgICAgICAgIC8qIHJlY29yZHM9e3RoaXMuZXhwcmVzc2lvblJlY29yZHN9ICAqLyBvbkNoYW5nZT17XHJcbiAgICAgICAgICAgICAgdGhpcy5vblVybEV4cFJlc29sdmVDaGFuZ2VcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB3aWRnZXRJZD17dGhpcy5wcm9wcy53aWRnZXRJZH1cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgPC9MaXN0R3JvdXBJdGVtPlxyXG4gICAgICA8L1JlcGVhdGVkRGF0YVNvdXJjZVByb3ZpZGVyPlxyXG4gICAgKVxyXG4gIH1cclxufVxyXG4iLCIvKiogQGpzeCBqc3ggKi9cclxuaW1wb3J0IHtcclxuICBSZWFjdCxcclxuICBqc3gsXHJcbiAgdHlwZSBJbW11dGFibGVBcnJheSxcclxuICB0eXBlIFNlcmlhbGl6ZWRTdHlsZXMsXHJcbiAgdHlwZSBJTVRoZW1lVmFyaWFibGVzLFxyXG4gIEFwcE1vZGUsXHJcbiAgY3NzXHJcbn0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQge1xyXG4gIERyb3Bkb3duLFxyXG4gIERyb3Bkb3duQnV0dG9uLFxyXG4gIERyb3Bkb3duTWVudSxcclxuICBEcm9wZG93bkl0ZW0sXHJcbiAgdHlwZSBEaXJlY3Rpb24sXHJcbiAgdHlwZSBNb2RpZmllcnNcclxufSBmcm9tICdqaW11LXVpJ1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBNeURyb3BEb3duSXRlbSB7XHJcbiAgbGFiZWw6IHN0cmluZ1xyXG4gIGV2ZW50OiAoZXZ0LCBpdGVtPzogTXlEcm9wRG93bkl0ZW0pID0+IHZvaWRcclxuICBoaWRlPzogYm9vbGVhblxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIE15RHJvcGRvd25Qcm9wcyB7XHJcbiAgYXBwTW9kZTogQXBwTW9kZVxyXG4gIHRoZW1lPzogSU1UaGVtZVZhcmlhYmxlc1xyXG4gIHRvZ2dsZVRpdGxlPzogc3RyaW5nXHJcbiAgdG9nZ2xlSXNJY29uPzogYm9vbGVhblxyXG4gIHRvZ2dsZVR5cGU/OiBzdHJpbmdcclxuICB0b2dnbGVBcnJvdz86IGJvb2xlYW5cclxuICBpdGVtcz86IEltbXV0YWJsZUFycmF5PE15RHJvcERvd25JdGVtPlxyXG4gIGZsdWlkPzogYm9vbGVhblxyXG4gIHNpemU/OiBzdHJpbmdcclxuICBhcHBlbmRUb0JvZHk/OiBib29sZWFuXHJcbiAgY2FyZXQ/OiBib29sZWFuXHJcbiAgbW9kaWZpZXJzPzogTW9kaWZpZXJzXHJcbiAgaXNEcm9wRG93bk9wZW4/OiBib29sZWFuXHJcbiAgZGlyZWN0aW9uPzogRGlyZWN0aW9uXHJcbiAgY2xhc3NOYW1lPzogc3RyaW5nXHJcbiAgd2l0aEJ1aWxkZXJTdHlsZT86IGFueVxyXG4gIHNob3dBY3RpdmU/OiBib29sZWFuXHJcbiAgYWN0aXZlTGFiZWw/OiBzdHJpbmdcclxuICBtZW51Q3NzPzogKHRoZW1lOiBJTVRoZW1lVmFyaWFibGVzKSA9PiBTZXJpYWxpemVkU3R5bGVzXHJcbiAgbWVudUNvbnRlbnQ/OiAodGhlbWU6IElNVGhlbWVWYXJpYWJsZXMpID0+IGFueVxyXG4gIHRvZ2dsZUNvbnRlbnQ/OiAodGhlbWU6IElNVGhlbWVWYXJpYWJsZXMpID0+IGFueVxyXG4gIG9uRHJvcERvd25PcGVuQ2hhbmdlPzogKGlzT3BlbjogYm9vbGVhbikgPT4gdm9pZFxyXG59XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE15RHJvcERvd24gZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PFxyXG5NeURyb3Bkb3duUHJvcHMsXHJcbnsgaXNPcGVuOiBib29sZWFuIH1cclxuPiB7XHJcbiAgTXlEcm9wZG93bjogYW55XHJcbiAgTXlEcm9wZG93bkJ1dHRvbjogYW55XHJcbiAgTXlEcm9wZG93bk1lbnU6IGFueVxyXG4gIE15RHJvcGRvd25JdGVtOiBhbnlcclxuXHJcbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcylcclxuICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIGlzT3BlbjogZmFsc2VcclxuICAgIH1cclxuICAgIGNvbnN0IHsgd2l0aEJ1aWxkZXJTdHlsZSB9ID0gcHJvcHNcclxuICAgIHRoaXMuTXlEcm9wZG93biA9IHdpdGhCdWlsZGVyU3R5bGUgPyB3aXRoQnVpbGRlclN0eWxlKERyb3Bkb3duKSA6IERyb3Bkb3duXHJcbiAgICB0aGlzLk15RHJvcGRvd25CdXR0b24gPSB3aXRoQnVpbGRlclN0eWxlXHJcbiAgICAgID8gd2l0aEJ1aWxkZXJTdHlsZShEcm9wZG93bkJ1dHRvbilcclxuICAgICAgOiBEcm9wZG93bkJ1dHRvblxyXG4gICAgdGhpcy5NeURyb3Bkb3duTWVudSA9IHdpdGhCdWlsZGVyU3R5bGVcclxuICAgICAgPyB3aXRoQnVpbGRlclN0eWxlKERyb3Bkb3duTWVudSlcclxuICAgICAgOiBEcm9wZG93bk1lbnVcclxuICAgIHRoaXMuTXlEcm9wZG93bkl0ZW0gPSB3aXRoQnVpbGRlclN0eWxlXHJcbiAgICAgID8gd2l0aEJ1aWxkZXJTdHlsZShEcm9wZG93bkl0ZW0pXHJcbiAgICAgIDogRHJvcGRvd25JdGVtXHJcbiAgfVxyXG5cclxuICBvbkRyb3BEb3duVG9nZ2xlID0gZXZ0ID0+IHtcclxuICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKVxyXG5cclxuICAgIGNvbnN0IHsgaXNEcm9wRG93bk9wZW4sIG9uRHJvcERvd25PcGVuQ2hhbmdlIH0gPSB0aGlzLnByb3BzXHJcbiAgICBpZiAoaXNEcm9wRG93bk9wZW4gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBvbkRyb3BEb3duT3BlbkNoYW5nZSAmJiBvbkRyb3BEb3duT3BlbkNoYW5nZSghaXNEcm9wRG93bk9wZW4pXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCB7IGlzT3BlbiB9ID0gdGhpcy5zdGF0ZVxyXG4gICAgICB0aGlzLnNldFN0YXRlKHsgaXNPcGVuOiAhaXNPcGVuIH0pXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbkl0ZW1DbGljayA9IChldnQsIGl0ZW0pID0+IHtcclxuICAgIGNvbnN0IHsgaXNEcm9wRG93bk9wZW4sIG9uRHJvcERvd25PcGVuQ2hhbmdlIH0gPSB0aGlzLnByb3BzXHJcbiAgICBpZiAoaXNEcm9wRG93bk9wZW4gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBvbkRyb3BEb3duT3BlbkNoYW5nZSAmJiBvbkRyb3BEb3duT3BlbkNoYW5nZShmYWxzZSlcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBpc09wZW46IGZhbHNlIH0pXHJcbiAgICB9XHJcbiAgICBpdGVtLmV2ZW50KGV2dCwgaXRlbSlcclxuICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKVxyXG4gICAgZXZ0Lm5hdGl2ZUV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpXHJcbiAgfVxyXG5cclxuICBvbkRyb3BEb3duTW91c2VDbGljayA9IGV2dCA9PiB7XHJcbiAgICBldnQuc3RvcFByb3BhZ2F0aW9uKClcclxuICAgIGV2dC5uYXRpdmVFdmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKVxyXG4gIH1cclxuXHJcbiAgZ2V0U3R5bGUgPSAoKSA9PiB7XHJcbiAgICBjb25zdCB7IHRoZW1lIH0gPSB0aGlzLnByb3BzXHJcbiAgICByZXR1cm4gY3NzYFxyXG4gICAgICAmIGJ1dHRvbiB7XHJcbiAgICAgICAgcGFkZGluZzogMDtcclxuICAgICAgfVxyXG4gICAgICAubGlzdC10b2dnbGUtYnV0dG9uIHtcclxuICAgICAgICBiYWNrZ3JvdW5kOiAke3RoZW1lLmNvbG9ycz8ucGFsZXR0ZT8ubGlnaHQ/Lls1MDBdfTtcclxuICAgICAgICBib3JkZXI6IG5vbmU7XHJcbiAgICAgICAgJjpob3ZlciwgJlthcmlhLWV4cGFuZGVkPVwidHJ1ZVwiXSB7XHJcbiAgICAgICAgICBiYWNrZ3JvdW5kOiAke3RoZW1lLmNvbG9ycz8ucGFsZXR0ZT8ubGlnaHQ/Lls4MDBdfTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIGBcclxuICB9XHJcblxyXG4gIHJlbmRlciAoKSB7XHJcbiAgICBjb25zdCB7XHJcbiAgICAgIGl0ZW1zLFxyXG4gICAgICB0b2dnbGVDb250ZW50LFxyXG4gICAgICBjYXJldCxcclxuICAgICAgdG9nZ2xlVHlwZSxcclxuICAgICAgdG9nZ2xlQXJyb3csXHJcbiAgICAgIG1lbnVDb250ZW50LFxyXG4gICAgICBhcHBNb2RlLFxyXG4gICAgICBtb2RpZmllcnMsXHJcbiAgICAgIHRvZ2dsZUlzSWNvbixcclxuICAgICAgdGhlbWUsXHJcbiAgICAgIGlzRHJvcERvd25PcGVuLFxyXG4gICAgICBzaXplLFxyXG4gICAgICBhcHBlbmRUb0JvZHksXHJcbiAgICAgIHRvZ2dsZVRpdGxlLFxyXG4gICAgICBkaXJlY3Rpb24sXHJcbiAgICAgIG1lbnVDc3MsXHJcbiAgICAgIGNsYXNzTmFtZSxcclxuICAgICAgc2hvd0FjdGl2ZSxcclxuICAgICAgYWN0aXZlTGFiZWwsXHJcbiAgICAgIGZsdWlkXHJcbiAgICB9ID0gdGhpcy5wcm9wc1xyXG4gICAgbGV0IHsgaXNPcGVuIH0gPSB0aGlzLnN0YXRlXHJcbiAgICBpc09wZW4gPSBpc0Ryb3BEb3duT3BlbiA9PT0gdW5kZWZpbmVkID8gaXNPcGVuIDogaXNEcm9wRG93bk9wZW5cclxuICAgIGNvbnN0IHtcclxuICAgICAgTXlEcm9wZG93bixcclxuICAgICAgTXlEcm9wZG93bkJ1dHRvbixcclxuICAgICAgTXlEcm9wZG93bk1lbnUsXHJcbiAgICAgIE15RHJvcGRvd25JdGVtXHJcbiAgICB9ID0gdGhpc1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgPE15RHJvcGRvd25cclxuICAgICAgICBzaXplPXtzaXplfVxyXG4gICAgICAgIHRvZ2dsZT17dGhpcy5vbkRyb3BEb3duVG9nZ2xlfVxyXG4gICAgICAgIGRpcmVjdGlvbj17ZGlyZWN0aW9ufVxyXG4gICAgICAgIGZsdWlkPXtmbHVpZH1cclxuICAgICAgICBpc09wZW49e2lzT3BlbiAmJiBhcHBNb2RlICE9PSBBcHBNb2RlLkRlc2lnbn1cclxuICAgICAgICBjbGFzc05hbWU9e2BteS1kcm9wZG93biAke2NsYXNzTmFtZX1gfVxyXG4gICAgICAgIGNzcz17dGhpcy5nZXRTdHlsZSgpfVxyXG4gICAgICA+XHJcbiAgICAgICAge3RvZ2dsZUNvbnRlbnQgJiYgKFxyXG4gICAgICAgICAgPE15RHJvcGRvd25CdXR0b25cclxuICAgICAgICAgICAgaWNvbj17dG9nZ2xlSXNJY29ufVxyXG4gICAgICAgICAgICB0aXRsZT17dG9nZ2xlVGl0bGV9XHJcbiAgICAgICAgICAgIHNpemU9e3NpemV9XHJcbiAgICAgICAgICAgIHR5cGU9e3RvZ2dsZVR5cGV9XHJcbiAgICAgICAgICAgIGNhcmV0PXtjYXJldH1cclxuICAgICAgICAgICAgY2xhc3NOYW1lPSdsaXN0LXRvZ2dsZS1idXR0b24nXHJcbiAgICAgICAgICAgIGFycm93PXt0b2dnbGVBcnJvd31cclxuICAgICAgICAgID5cclxuICAgICAgICAgICAge3RvZ2dsZUNvbnRlbnQgJiYgdG9nZ2xlQ29udGVudCh0aGVtZSl9XHJcbiAgICAgICAgICA8L015RHJvcGRvd25CdXR0b24+XHJcbiAgICAgICAgKX1cclxuICAgICAgICA8TXlEcm9wZG93bk1lbnVcclxuICAgICAgICAgIGFwcGVuZFRvQm9keT17YXBwZW5kVG9Cb2R5fVxyXG4gICAgICAgICAgbW9kaWZpZXJzPXttb2RpZmllcnN9XHJcbiAgICAgICAgICBjc3M9e21lbnVDc3MgJiYgbWVudUNzcyh0aGVtZSl9XHJcbiAgICAgICAgPlxyXG4gICAgICAgICAge21lbnVDb250ZW50XHJcbiAgICAgICAgICAgID8gbWVudUNvbnRlbnQodGhlbWUpXHJcbiAgICAgICAgICAgIDogaXRlbXMgJiZcclxuICAgICAgICAgICAgICBpdGVtcy5hc011dGFibGUoKS5tYXAoKGl0ZW06IE15RHJvcERvd25JdGVtLCBpOiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICFpdGVtLmhpZGUgJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgIDxNeURyb3Bkb3duSXRlbVxyXG4gICAgICAgICAgICAgICAgICAgICAga2V5PXtpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSduby11c2VyLXNlbGVjdCdcclxuICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtpdGVtLmxhYmVsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgYWN0aXZlPXtzaG93QWN0aXZlICYmIGl0ZW0ubGFiZWwgPT09IGFjdGl2ZUxhYmVsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17ZXZ0ID0+IHsgdGhpcy5vbkl0ZW1DbGljayhldnQsIGl0ZW0pIH19XHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAge2l0ZW0ubGFiZWx9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9NeURyb3Bkb3duSXRlbT5cclxuICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgIH0pfVxyXG4gICAgICAgIDwvTXlEcm9wZG93bk1lbnU+XHJcbiAgICAgIDwvTXlEcm9wZG93bj5cclxuICAgIClcclxuICB9XHJcbn1cclxuIiwiLyoqIEBqc3gganN4ICovXHJcbmltcG9ydCB7XHJcbiAgUmVhY3QsXHJcbiAgdHlwZSBJTVRoZW1lVmFyaWFibGVzLFxyXG4gIHR5cGUgU2VyaWFsaXplZFN0eWxlcyxcclxuICBjc3MsXHJcbiAganN4LFxyXG4gIHBvbGlzaGVkLFxyXG4gIGVzcmksXHJcbiAgQXBwTW9kZVxyXG59IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHsgVGV4dElucHV0LCBCdXR0b24sIHR5cGUgSW5wdXRQcm9wcywgUG9wcGVyIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHsgdHlwZSBTdWdnZXN0aW9uIH0gZnJvbSAnLi4vLi4vY29uZmlnJ1xyXG5pbXBvcnQgeyBDbG9zZU91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9lZGl0b3IvY2xvc2UnXHJcbmltcG9ydCB7IFNlYXJjaE91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9lZGl0b3Ivc2VhcmNoJ1xyXG5pbXBvcnQgeyBBcnJvd0xlZnRPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZGlyZWN0aW9uYWwvYXJyb3ctbGVmdCdcclxuY29uc3QgU2FuaXRpemVyID0gZXNyaS5TYW5pdGl6ZXJcclxuY29uc3Qgc2FuaXRpemVyID0gbmV3IFNhbml0aXplcigpXHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHRoZW1lOiBJTVRoZW1lVmFyaWFibGVzXHJcbiAgcGxhY2Vob2xkZXI/OiBzdHJpbmdcclxuICBzZWFyY2hUZXh0Pzogc3RyaW5nXHJcbiAgb25TZWFyY2hUZXh0Q2hhbmdlPzogKHNlYXJjaFRleHQ6IHN0cmluZykgPT4gdm9pZFxyXG4gIGZvcm1hdE1lc3NhZ2U/OiAoaWQ6IHN0cmluZykgPT4gc3RyaW5nXHJcbiAgb25TdWJtaXQ/OiAoc2VhcmNoVGV4dDogc3RyaW5nLCBpc0VudGVyOiBib29sZWFuKSA9PiB2b2lkXHJcbiAgc2hvd0NsZWFyPzogYm9vbGVhblxyXG4gIGhpZGVTZWFyY2hJY29uPzogYm9vbGVhblxyXG4gIGlucHV0UmVmPzogKHJlZjogSFRNTElucHV0RWxlbWVudCkgPT4gdm9pZFxyXG4gIHNlYXJjaFN1Z2dlc3Rpb246IFN1Z2dlc3Rpb25bXVxyXG4gIHN1Z2dlc3Rpb25XaWR0aDogbnVtYmVyXHJcbiAgc2hvd0xvYWRpbmc6IGJvb2xlYW5cclxuICBpc1Nob3dCYWNrQnV0dG9uPzogYm9vbGVhblxyXG4gIGFwcE1vZGU6IEFwcE1vZGVcclxuICB0b2dnbGVTZWFyY2hCb3hWaXNpYmxlPzogKGlzVmlzaWJsZTogYm9vbGVhbikgPT4gdm9pZFxyXG59XHJcblxyXG5pbnRlcmZhY2UgU3RhdHMge1xyXG4gIHNlYXJjaFRleHQ6IHN0cmluZ1xyXG4gIGlzU2hvd1N1Z2dlc3Rpb246IGJvb2xlYW5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VhcmNoQm94IGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxcclxuUHJvcHMgJiBJbnB1dFByb3BzLFxyXG5TdGF0c1xyXG4+IHtcclxuICByZWZlcmVuY2U6IEhUTUxEaXZFbGVtZW50XHJcbiAgc3VnZ2VzdGlvblJlcXVlc3RUaW1lb3V0OiBhbnlcclxuICBjb250YWluZXJSZWY6IEhUTUxEaXZFbGVtZW50XHJcbiAgc2VhcmNoSW5wdXRSZWY6IEhUTUxFbGVtZW50XHJcbiAgZm9jdXNUaW1lb3V0OiBhbnlcclxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKVxyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgc2VhcmNoVGV4dDogcHJvcHMuc2VhcmNoVGV4dCB8fCAnJyxcclxuICAgICAgaXNTaG93U3VnZ2VzdGlvbjogZmFsc2VcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbXBvbmVudERpZFVwZGF0ZSAocHJlUHJvcHMpIHtcclxuICAgIGlmIChcclxuICAgICAgdGhpcy5wcm9wcy5zZWFyY2hUZXh0ICE9PSBwcmVQcm9wcy5zZWFyY2hUZXh0ICYmXHJcbiAgICAgIHRoaXMucHJvcHMuc2VhcmNoVGV4dCAhPT0gdGhpcy5zdGF0ZS5zZWFyY2hUZXh0XHJcbiAgICApIHtcclxuICAgICAgY29uc3QgeyBzZWFyY2hUZXh0IH0gPSB0aGlzLnByb3BzXHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgIHNlYXJjaFRleHQ6IHNlYXJjaFRleHRcclxuICAgICAgfSlcclxuICAgIH1cclxuICAgIGlmICh0aGlzLnByb3BzPy5hcHBNb2RlID09PSBBcHBNb2RlLkRlc2lnbiAmJiB0aGlzLnN0YXRlLmlzU2hvd1N1Z2dlc3Rpb24pIHtcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgaXNTaG93U3VnZ2VzdGlvbjogZmFsc2UsXHJcbiAgICAgICAgc2VhcmNoVGV4dDogJydcclxuICAgICAgfSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGhhbmRsZUNoYW5nZSA9IHNlYXJjaFRleHQgPT4ge1xyXG4gICAgdGhpcy5zZXRTdGF0ZShcclxuICAgICAge1xyXG4gICAgICAgIHNlYXJjaFRleHQ6IHNlYXJjaFRleHQsXHJcbiAgICAgICAgaXNTaG93U3VnZ2VzdGlvbjogc2VhcmNoVGV4dD8ubGVuZ3RoID4gMlxyXG4gICAgICB9LFxyXG4gICAgICAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyBvblNlYXJjaFRleHRDaGFuZ2UgfSA9IHRoaXMucHJvcHNcclxuICAgICAgICBpZiAob25TZWFyY2hUZXh0Q2hhbmdlKSB7XHJcbiAgICAgICAgICBvblNlYXJjaFRleHRDaGFuZ2Uoc2VhcmNoVGV4dClcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIClcclxuICB9XHJcblxyXG4gIGhhbmRsZVN1Ym1pdCA9ICh2YWx1ZSwgaXNFbnRlciA9IGZhbHNlKSA9PiB7XHJcbiAgICBjb25zdCB7IG9uU3VibWl0IH0gPSB0aGlzLnByb3BzXHJcbiAgICBpZiAob25TdWJtaXQpIHtcclxuICAgICAgb25TdWJtaXQodmFsdWUsIGlzRW50ZXIpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbktleVVwID0gZXZ0ID0+IHtcclxuICAgIGlmICghZXZ0IHx8ICFldnQudGFyZ2V0KSByZXR1cm5cclxuICAgIGNvbnN0IHsgaXNTaG93U3VnZ2VzdGlvbiB9ID0gdGhpcy5zdGF0ZVxyXG4gICAgaWYgKGV2dC5rZXkgPT09ICdFbnRlcicpIHtcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgaXNTaG93U3VnZ2VzdGlvbjogZmFsc2VcclxuICAgICAgfSlcclxuICAgICAgdGhpcy5oYW5kbGVTdWJtaXQoZXZ0LnRhcmdldC52YWx1ZSwgdHJ1ZSlcclxuICAgIH1cclxuICAgIGlmIChpc1Nob3dTdWdnZXN0aW9uKSB7XHJcbiAgICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5nZXRNZW51SXRlbXMoKSB8fCBbXVxyXG4gICAgICBjb25zdCBpdGVtTGVuZ3RoID0gaXRlbXM/Lmxlbmd0aCAtIDFcclxuICAgICAgaWYgKGV2dC5rZXkgPT09ICdBcnJvd1VwJykge1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgaXRlbXNbaXRlbUxlbmd0aF0/LmZvY3VzKClcclxuICAgICAgICB9KVxyXG4gICAgICB9IGVsc2UgaWYgKGV2dC5rZXkgPT09ICdBcnJvd0Rvd24nKSB7XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLmNvbnRhaW5lclJlZj8uZm9jdXMoKVxyXG4gICAgICAgICAgaXRlbXNbMF0/LmZvY3VzKClcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvblN1Z2dlc3Rpb25Db25maXJtID0gc3VnZ2VzdGlvbiA9PiB7XHJcbiAgICB0aGlzLnNldFN0YXRlKFxyXG4gICAgICB7XHJcbiAgICAgICAgc2VhcmNoVGV4dDogc3VnZ2VzdGlvbixcclxuICAgICAgICBpc1Nob3dTdWdnZXN0aW9uOiBmYWxzZVxyXG4gICAgICB9LFxyXG4gICAgICAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVTdWJtaXQoc3VnZ2VzdGlvbilcclxuICAgICAgICB0aGlzLnByb3BzPy50b2dnbGVTZWFyY2hCb3hWaXNpYmxlKHRydWUpXHJcbiAgICAgIH1cclxuICAgIClcclxuICB9XHJcblxyXG4gIGhhbmRsZUNsZWFyID0gZXZ0ID0+IHtcclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICBzZWFyY2hUZXh0OiAnJ1xyXG4gICAgfSlcclxuICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKVxyXG4gIH1cclxuXHJcbiAgZ2V0U3R5bGUgPSAoKTogU2VyaWFsaXplZFN0eWxlcyA9PiB7XHJcbiAgICBjb25zdCB7IHRoZW1lIH0gPSB0aGlzLnByb3BzXHJcblxyXG4gICAgcmV0dXJuIGNzc2BcclxuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgICAuc2VhcmNoLWlucHV0IHtcclxuICAgICAgICBtYXJnaW4tYm90dG9tOiAtMXB4O1xyXG4gICAgICAgIHBhZGRpbmctbGVmdDogM3B4O1xyXG4gICAgICAgIGJvcmRlcjogMDtcclxuICAgICAgICAvLyBib3JkZXItYm90dG9tLXdpZHRoOiAxcHg7XHJcbiAgICAgICAgLy8gYm9yZGVyLWJvdHRvbS1zdHlsZTogc29saWQ7XHJcbiAgICAgICAgLy8gYm9yZGVyLWNvbG9yOiAke3RoZW1lLmNvbG9ycy5wcmltYXJ5fTtcclxuICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcclxuICAgICAgICBoZWlnaHQ6ICR7cG9saXNoZWQucmVtKDI2KX07XHJcbiAgICAgICAgbWluLXdpZHRoOiAwO1xyXG4gICAgICAgIC5pbnB1dC13cmFwcGVyIHtcclxuICAgICAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xyXG4gICAgICAgICAgYm9yZGVyOiBub25lO1xyXG4gICAgICAgICAgcGFkZGluZzogMDtcclxuICAgICAgICAgIGhlaWdodDogMTAwJTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgLnNlYXJjaC1pbnB1dDpmb2N1cyB7XHJcbiAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XHJcbiAgICAgIH1cclxuICAgICAgLnNlYXJjaC1sb2FkaW5nLWNvbiB7XHJcbiAgICAgICAgQGtleWZyYW1lcyBsb2FkaW5nIHtcclxuICAgICAgICAgIDAlIHt0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsgfTtcclxuICAgICAgICAgIDEwMCUge3RyYW5zZm9ybTogcm90YXRlKDM2MGRlZyl9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB3aWR0aDogJHtwb2xpc2hlZC5yZW0oMTMpfTtcclxuICAgICAgICBoZWlnaHQ6ICR7cG9saXNoZWQucmVtKDEzKX07XHJcbiAgICAgICAgbWluLXdpZHRoOiAke3BvbGlzaGVkLnJlbSgxMyl9O1xyXG4gICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICR7dGhlbWU/LmNvbG9ycz8ucGFsZXR0ZT8uc2Vjb25kYXJ5Py5bMzAwXX07XHJcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xyXG4gICAgICAgIGJvcmRlci10b3A6IDJweCBzb2xpZCAke3RoZW1lPy5jb2xvcnM/LnBhbGV0dGU/LnByaW1hcnk/Lls1MDBdfTtcclxuICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gICAgICAgIGFuaW1hdGlvbjpsb2FkaW5nIDJzIGluZmluaXRlIGxpbmVhcjtcclxuICAgICAgICBtYXJnaW4tcmlnaHQ6ICR7cG9saXNoZWQucmVtKDQpfTtcclxuICAgICAgfVxyXG4gICAgICAuY2xlYXItc2VhcmNoLCAuc2VhcmNoLWJhY2sge1xyXG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICAgICAgICBwYWRkaW5nOiAke3BvbGlzaGVkLnJlbSg2KX07XHJcbiAgICAgICAgYmFja2dyb3VuZDogbm9uZTtcclxuICAgICAgICBib3JkZXI6IG5vbmU7XHJcbiAgICAgICAgY29sb3I6ICR7dGhlbWU/LmNvbG9ycz8ucGFsZXR0ZT8uZGFyaz8uWzgwMF19XHJcbiAgICAgIH1cclxuICAgICAgLnNlYXJjaC1iYWNrIHtcclxuICAgICAgICBtYXJnaW4tbGVmdDogJHtwb2xpc2hlZC5yZW0oLTYpfTtcclxuICAgICAgfVxyXG4gICAgICAuY2xlYXItc2VhcmNoOmhvdmVyIHtcclxuICAgICAgICBiYWNrZ3JvdW5kOiBub25lO1xyXG4gICAgICB9XHJcbiAgICBgXHJcbiAgfVxyXG5cclxuICBnZXRTdWdnZXN0aW9uTGlzdFN0eWxlID0gKCk6IFNlcmlhbGl6ZWRTdHlsZXMgPT4ge1xyXG4gICAgY29uc3QgeyBzdWdnZXN0aW9uV2lkdGggfSA9IHRoaXMucHJvcHNcclxuICAgIHJldHVybiBjc3NgXHJcbiAgICAgICYge1xyXG4gICAgICAgIG1heC1oZWlnaHQ6ICR7cG9saXNoZWQucmVtKDMwMCl9O1xyXG4gICAgICAgIG1pbi13aWR0aDogJHtwb2xpc2hlZC5yZW0oc3VnZ2VzdGlvbldpZHRoKX07XHJcbiAgICAgICAgb3ZlcmZsb3c6IGF1dG87XHJcbiAgICAgIH1cclxuICAgICAgYnV0dG9uIHtcclxuICAgICAgICBkaXNwbGF5OiBibG9jaztcclxuICAgICAgICB3aWR0aDogMTAwJTtcclxuICAgICAgICB0ZXh0LWFsaWduOiBsZWZ0O1xyXG4gICAgICAgIGJvcmRlcjogbm9uZTtcclxuICAgICAgICBib3JkZXItcmFkaXVzOiAwO1xyXG4gICAgICB9XHJcbiAgICAgIC5zdWdnZXN0aW9uLWl0ZW06Zm9jdXMge1xyXG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLXByaW1hcnktNTAwKTtcclxuICAgICAgICBjb2xvcjogdmFyKC0td2hpdGUpO1xyXG4gICAgICB9XHJcbiAgICAgIGJ1dHRvbjpob3ZlciB7XHJcbiAgICAgICAgYm9yZGVyOiBub25lO1xyXG4gICAgICB9XHJcbiAgICBgXHJcbiAgfVxyXG5cclxuICBjbGVhclNlYXJjaFRleHQgPSAoKSA9PiB7XHJcbiAgICBjb25zdCB7IHNlYXJjaFRleHQgfSA9IHRoaXMuc3RhdGVcclxuICAgIGlmIChzZWFyY2hUZXh0KSB7XHJcbiAgICAgIHRoaXMuaGFuZGxlQ2hhbmdlKCcnKVxyXG4gICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICBpc1Nob3dTdWdnZXN0aW9uOiBmYWxzZVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0TWVudUl0ZW1zID0gKCkgPT4ge1xyXG4gICAgcmV0dXJuIHRoaXMuY29udGFpbmVyUmVmID8gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5jb250YWluZXJSZWYucXVlcnlTZWxlY3RvckFsbCgnW3JvbGU9XCJidXR0b25cIl0nKSkuZmlsdGVyKGl0ZW0gPT4gIWl0ZW0uZGlzYWJsZWQpIDogW11cclxuICB9XHJcblxyXG4gIGdldFRleHRJbnB1dFN1ZmZpeEVsZW1lbnQgPSAoKSA9PiB7XHJcbiAgICBjb25zdCB7IHRoZW1lLCBzaG93TG9hZGluZywgZm9ybWF0TWVzc2FnZSB9ID0gdGhpcy5wcm9wc1xyXG4gICAgY29uc3QgeyBzZWFyY2hUZXh0IH0gPSB0aGlzLnN0YXRlXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlcic+XHJcbiAgICAgICAge3Nob3dMb2FkaW5nICYmIDxkaXYgY2xhc3NOYW1lPSdzZWFyY2gtbG9hZGluZy1jb24nIC8+fVxyXG4gICAgICAgIHtzZWFyY2hUZXh0ICYmIChcclxuICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgY29sb3I9J3RlcnRpYXJ5J1xyXG4gICAgICAgICAgICBjbGFzc05hbWU9J2NsZWFyLXNlYXJjaCdcclxuICAgICAgICAgICAgaWNvblxyXG4gICAgICAgICAgICBzaXplPSdzbSdcclxuICAgICAgICAgICAgb25DbGljaz17dGhpcy5jbGVhclNlYXJjaFRleHR9XHJcbiAgICAgICAgICAgIHRpdGxlPXtmb3JtYXRNZXNzYWdlKCdjbGVhclNlYXJjaCcpfVxyXG4gICAgICAgICAgPlxyXG4gICAgICAgICAgICA8Q2xvc2VPdXRsaW5lZCBzaXplPXsxNH0gY29sb3I9e3RoZW1lLmNvbG9ycy5wYWxldHRlLmRhcmtbODAwXX0vPlxyXG4gICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgKX1cclxuICAgICAgPC9kaXY+XHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBnZXRUZXh0SW5wdXRQcmVmaXhFbGVtZW50ID0gKCkgPT4ge1xyXG4gICAgY29uc3QgeyB0aGVtZSwgZm9ybWF0TWVzc2FnZSB9ID0gdGhpcy5wcm9wc1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgPEJ1dHRvblxyXG4gICAgICAgIHR5cGU9J3RlcnRpYXJ5J1xyXG4gICAgICAgIGljb25cclxuICAgICAgICBzaXplPSdzbSdcclxuICAgICAgICB0aXRsZT17Zm9ybWF0TWVzc2FnZSgnU2VhcmNoTGFiZWwnKX1cclxuICAgICAgICBvbkNsaWNrPXtldnQgPT4geyB0aGlzLmhhbmRsZVN1Ym1pdCh0aGlzLnN0YXRlLnNlYXJjaFRleHQpIH19XHJcbiAgICAgID5cclxuICAgICAgICA8U2VhcmNoT3V0bGluZWQgc2l6ZT17MTZ9IGNvbG9yPXt0aGVtZS5jb2xvcnMucGFsZXR0ZS5saWdodFs4MDBdfS8+XHJcbiAgICAgIDwvQnV0dG9uPlxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlUG9wcGVyS2V5RG93biA9IChlKSA9PiB7XHJcbiAgICBjb25zdCB7IGlzU2hvd1N1Z2dlc3Rpb24gfSA9IHRoaXMuc3RhdGVcclxuICAgIGlmICghaXNTaG93U3VnZ2VzdGlvbikge1xyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIGNvbnN0IGlzVGFyZ2V0TWVudUl0ZW0gPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ3JvbGUnKSA9PT0gJ2J1dHRvbidcclxuICAgIGlmICghWydUYWInLCAnQXJyb3dVcCcsICdBcnJvd0Rvd24nXS5pbmNsdWRlcyhlLmtleSkpIHtcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCgoZS53aGljaCA+PSA0OCkgJiYgKGUud2hpY2ggPD0gOTApKSB8fCBlLmtleSA9PT0gJ1RhYicpIHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGlzU2hvd1N1Z2dlc3Rpb24gJiYgaXNUYXJnZXRNZW51SXRlbSkge1xyXG4gICAgICBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVFc2NFdmVudChlKVxyXG4gICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgIFsnQXJyb3dVcCcsICdBcnJvd0Rvd24nXS5pbmNsdWRlcyhlLmtleSkgfHwgKFsnbicsICdwJ10uaW5jbHVkZXMoZS5rZXkpICYmIGUuY3RybEtleSlcclxuICAgICAgKSB7XHJcbiAgICAgICAgY29uc3QgJG1lbnVpdGVtcyA9IHRoaXMuZ2V0TWVudUl0ZW1zKClcclxuICAgICAgICBsZXQgaW5kZXggPSAkbWVudWl0ZW1zLmluZGV4T2YoZS50YXJnZXQpXHJcbiAgICAgICAgbGV0IGlzQXJyb3dVcCA9IGZhbHNlXHJcbiAgICAgICAgaWYgKGUua2V5ID09PSAnQXJyb3dVcCcgfHwgKGUua2V5ID09PSAncCcgJiYgZS5jdHJsS2V5KSkge1xyXG4gICAgICAgICAgaW5kZXggPSBpbmRleCAhPT0gMCA/IGluZGV4IC0gMSA6ICRtZW51aXRlbXMubGVuZ3RoIC0gMVxyXG4gICAgICAgICAgaXNBcnJvd1VwID0gdHJ1ZVxyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09ICdBcnJvd0Rvd24nIHx8IChlLmtleSA9PT0gJ24nICYmIGUuY3RybEtleSkpIHtcclxuICAgICAgICAgIGlzQXJyb3dVcCA9IGZhbHNlXHJcbiAgICAgICAgICBpbmRleCA9IGluZGV4ID09PSAkbWVudWl0ZW1zLmxlbmd0aCAtIDEgPyAwIDogaW5kZXggKyAxXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBpc0Fycm93VXBUb0lucHV0ID0gKGluZGV4ID09PSAwICYmICFpc0Fycm93VXApXHJcbiAgICAgICAgY29uc3QgaXNBcnJvd0Rvd25Ub0lucHV0ID0gKGluZGV4ID09PSAkbWVudWl0ZW1zLmxlbmd0aCAtIDEgJiYgaXNBcnJvd1VwKVxyXG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmZvY3VzVGltZW91dClcclxuICAgICAgICBpZiAoaXNBcnJvd1VwVG9JbnB1dCB8fCBpc0Fycm93RG93blRvSW5wdXQpIHtcclxuICAgICAgICAgIHRoaXMuZm9jdXNUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoSW5wdXRSZWY/LmZvY3VzKClcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuZm9jdXNUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyUmVmPy5mb2N1cygpXHJcbiAgICAgICAgICAgICRtZW51aXRlbXNbaW5kZXhdLmZvY3VzKClcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2UgaWYgKGUua2V5ID09PSAnRW5kJykge1xyXG4gICAgICAgIGNvbnN0ICRtZW51aXRlbXMgPSB0aGlzLmdldE1lbnVJdGVtcygpXHJcbiAgICAgICAgJG1lbnVpdGVtc1skbWVudWl0ZW1zLmxlbmd0aCAtIDFdLmZvY3VzKClcclxuICAgICAgfSBlbHNlIGlmIChlLmtleSA9PT0gJ0hvbWUnKSB7XHJcbiAgICAgICAgY29uc3QgJG1lbnVpdGVtcyA9IHRoaXMuZ2V0TWVudUl0ZW1zKClcclxuICAgICAgICAkbWVudWl0ZW1zWzBdLmZvY3VzKClcclxuICAgICAgfSBlbHNlIGlmICgoZS53aGljaCA+PSA0OCkgJiYgKGUud2hpY2ggPD0gOTApKSB7XHJcbiAgICAgICAgY29uc3QgJG1lbnVpdGVtcyA9IHRoaXMuZ2V0TWVudUl0ZW1zKClcclxuICAgICAgICBjb25zdCBjaGFyUHJlc3NlZCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoZS53aGljaCkudG9Mb3dlckNhc2UoKVxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgJG1lbnVpdGVtcy5sZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICAgICAgY29uc3QgZmlyc3RMZXR0ZXIgPSAkbWVudWl0ZW1zW2ldLnRleHRDb250ZW50ICYmICRtZW51aXRlbXNbaV0udGV4dENvbnRlbnRbMF0udG9Mb3dlckNhc2UoKVxyXG4gICAgICAgICAgaWYgKGZpcnN0TGV0dGVyID09PSBjaGFyUHJlc3NlZCkge1xyXG4gICAgICAgICAgICAkbWVudWl0ZW1zW2ldLmZvY3VzKClcclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGhhbmRsZUVzY0V2ZW50ID0gKGUpID0+IHtcclxuICAgIGNvbnN0IHsgaXNTaG93U3VnZ2VzdGlvbiB9ID0gdGhpcy5zdGF0ZVxyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICB0aGlzLnNldFN0YXRlKHsgaXNTaG93U3VnZ2VzdGlvbjogIWlzU2hvd1N1Z2dlc3Rpb24gfSlcclxuICAgIHRoaXMuc2VhcmNoSW5wdXRSZWY/LmZvY3VzKClcclxuICB9XHJcblxyXG4gIHNldElucHV0UmVmID0gKHJlZikgPT4ge1xyXG4gICAgY29uc3QgeyBpbnB1dFJlZiB9ID0gdGhpcy5wcm9wc1xyXG4gICAgdGhpcy5zZWFyY2hJbnB1dFJlZiA9IHJlZlxyXG4gICAgaW5wdXRSZWYgJiYgaW5wdXRSZWYocmVmKVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyICgpIHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgcGxhY2Vob2xkZXIsXHJcbiAgICAgIGNsYXNzTmFtZSxcclxuICAgICAgc2hvd0NsZWFyLFxyXG4gICAgICBoaWRlU2VhcmNoSWNvbixcclxuICAgICAgb25Gb2N1cyxcclxuICAgICAgb25CbHVyLFxyXG4gICAgICB0aGVtZSxcclxuICAgICAgc2VhcmNoU3VnZ2VzdGlvbixcclxuICAgICAgZm9ybWF0TWVzc2FnZSxcclxuICAgICAgaXNTaG93QmFja0J1dHRvblxyXG4gICAgfSA9IHRoaXMucHJvcHNcclxuICAgIGNvbnN0IHsgc2VhcmNoVGV4dCwgaXNTaG93U3VnZ2VzdGlvbiB9ID0gdGhpcy5zdGF0ZVxyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXYgcmVmPXtyZWYgPT4gKHRoaXMucmVmZXJlbmNlID0gcmVmKX0+XHJcbiAgICAgICAgPGRpdlxyXG4gICAgICAgICAgY3NzPXt0aGlzLmdldFN0eWxlKCl9XHJcbiAgICAgICAgICBjbGFzc05hbWU9e2BkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyICR7Y2xhc3NOYW1lfWB9XHJcbiAgICAgICAgPlxyXG4gICAgICAgICAge2lzU2hvd0JhY2tCdXR0b24gJiYgKFxyXG4gICAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgICAgY29sb3I9J3RlcnRpYXJ5J1xyXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT0nc2VhcmNoLWJhY2snXHJcbiAgICAgICAgICAgICAgaWNvblxyXG4gICAgICAgICAgICAgIHNpemU9J3NtJ1xyXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e2V2dCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzPy50b2dnbGVTZWFyY2hCb3hWaXNpYmxlKGZhbHNlKVxyXG4gICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgdGl0bGU9e2Zvcm1hdE1lc3NhZ2UoJ3RvcFRvb2xCYWNrJyl9XHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICA8QXJyb3dMZWZ0T3V0bGluZWQgc2l6ZT17MjB9IGNvbG9yPXt0aGVtZS5jb2xvcnMucGFsZXR0ZS5kYXJrWzgwMF19Lz5cclxuICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICApfVxyXG4gICAgICAgICAgPFRleHRJbnB1dFxyXG4gICAgICAgICAgICBjbGFzc05hbWU9J3NlYXJjaC1pbnB1dCBmbGV4LWdyb3ctMSdcclxuICAgICAgICAgICAgcmVmPXtyZWYgPT4geyB0aGlzLnNldElucHV0UmVmKHJlZikgfX1cclxuICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3BsYWNlaG9sZGVyfVxyXG4gICAgICAgICAgICBvbkNoYW5nZT17ZSA9PiB7IHRoaXMuaGFuZGxlQ2hhbmdlKGUudGFyZ2V0LnZhbHVlKSB9fVxyXG4gICAgICAgICAgICBvbkJsdXI9e29uQmx1cn1cclxuICAgICAgICAgICAgb25Gb2N1cz17b25Gb2N1c31cclxuICAgICAgICAgICAgdGl0bGU9e3NlYXJjaFRleHQgfHwgcGxhY2Vob2xkZXJ9XHJcbiAgICAgICAgICAgIHZhbHVlPXtzZWFyY2hUZXh0IHx8ICcnfVxyXG4gICAgICAgICAgICBvbktleURvd249e2UgPT4geyB0aGlzLm9uS2V5VXAoZSkgfX1cclxuICAgICAgICAgICAgcHJlZml4PXsoIWhpZGVTZWFyY2hJY29uICYmICFpc1Nob3dCYWNrQnV0dG9uKSAmJiB0aGlzLmdldFRleHRJbnB1dFByZWZpeEVsZW1lbnQoKX1cclxuICAgICAgICAgICAgc3VmZml4PXt0aGlzLmdldFRleHRJbnB1dFN1ZmZpeEVsZW1lbnQoKX1cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgICB7c2hvd0NsZWFyICYmIChcclxuICAgICAgICAgICAgPEJ1dHRvbiBpZD0ndGVzdC1mb2N1cycgY29sb3I9J3RlcnRpYXJ5JyBpY29uIHNpemU9J3NtJyBvbkNsaWNrPXt0aGlzLmhhbmRsZVN1Ym1pdH0+XHJcbiAgICAgICAgICAgICAgPENsb3NlT3V0bGluZWQgc2l6ZT17MTJ9IGNvbG9yPXt0aGVtZS5jb2xvcnMucGFsZXR0ZS5kYXJrWzgwMF19Lz5cclxuICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICApfVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXY+XHJcbiAgICAgICAgICA8UG9wcGVyXHJcbiAgICAgICAgICAgIGNzcz17dGhpcy5nZXRTdWdnZXN0aW9uTGlzdFN0eWxlKCl9XHJcbiAgICAgICAgICAgIHBsYWNlbWVudD0nYm90dG9tLXN0YXJ0J1xyXG4gICAgICAgICAgICByZWZlcmVuY2U9e3RoaXMucmVmZXJlbmNlfVxyXG4gICAgICAgICAgICBvZmZzZXQ9e1swLCA4XX1cclxuICAgICAgICAgICAgb3Blbj17aXNTaG93U3VnZ2VzdGlvbn1cclxuICAgICAgICAgICAgYXV0b0ZvY3VzPXtmYWxzZX1cclxuICAgICAgICAgICAgdG9nZ2xlPXtlID0+IHtcclxuICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgaXNTaG93U3VnZ2VzdGlvbjogIWlzU2hvd1N1Z2dlc3Rpb24gfSlcclxuICAgICAgICAgICAgfX1cclxuICAgICAgICAgID5cclxuICAgICAgICAgICAgPGRpdiByZWY9e3JlZiA9PiAodGhpcy5jb250YWluZXJSZWYgPSByZWYpfSBvbktleURvd249e3RoaXMuaGFuZGxlUG9wcGVyS2V5RG93bn0+XHJcbiAgICAgICAgICAgICAge3NlYXJjaFN1Z2dlc3Rpb24ubWFwKChzdWdnZXN0aW9uLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3VnZ2VzdGlvbkh0bWwgPSBzYW5pdGl6ZXIuc2FuaXRpemUoXHJcbiAgICAgICAgICAgICAgICAgIHN1Z2dlc3Rpb24uc3VnZ2VzdGlvbkh0bWxcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgICAgICAgICBrZXk9e2luZGV4fVxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU9J3NlY29uZGFyeSdcclxuICAgICAgICAgICAgICAgICAgICBzaXplPSdzbSdcclxuICAgICAgICAgICAgICAgICAgICByb2xlPSdidXR0b24nXHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9e3N1Z2dlc3Rpb24/LnN1Z2dlc3Rpb259XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdzdWdnZXN0aW9uLWl0ZW0nXHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5vblN1Z2dlc3Rpb25Db25maXJtKHN1Z2dlc3Rpb24uc3VnZ2VzdGlvbilcclxuICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXt7IF9faHRtbDogc3VnZ2VzdGlvbkh0bWwgfX1cclxuICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICB9KX1cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L1BvcHBlcj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICApXHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7XHJcbiAgY3NzLFxyXG4gIHBvbGlzaGVkLFxyXG4gIHR5cGUgU2VyaWFsaXplZFN0eWxlcyxcclxuICBBcHBNb2RlLFxyXG4gIHV0aWxzLFxyXG4gIHR5cGUgSU1UaGVtZVZhcmlhYmxlc1xyXG59IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHsgdHlwZSBMaXN0UHJvcHMgfSBmcm9tICcuLi93aWRnZXQnXHJcbmltcG9ydCB7XHJcbiAgRGlyZWN0aW9uVHlwZSxcclxuICBMSVNUX0NBUkRfUEFERElORyxcclxuICBQYWdlU3R5bGUsXHJcbiAgRFNfVE9PTF9CT1RUT01fUEFERElORyxcclxuICBEU19UT09MX0gsXHJcbiAgQk9UVE9NX1RPT0xfVE9QX1BBRERJTkcsXHJcbiAgQk9UVE9NX1RPT0xfSCxcclxuICBDT01NT05fUEFERElORyxcclxuICB0eXBlIEVsZW1lbnRTaXplLFxyXG4gIExpc3RMYXlvdXRUeXBlXHJcbn0gZnJvbSAnLi4vLi4vY29uZmlnJ1xyXG5cclxuaW50ZXJmYWNlIExpc1N0eWxlT3B0aW9uIHtcclxuICBwYWdlU3R5bGU6IFBhZ2VTdHlsZVxyXG4gIHNjcm9sbEJhck9wZW46IGJvb2xlYW5cclxuICBkaXJlY3Rpb246IERpcmVjdGlvblR5cGVcclxuICBhcHBNb2RlOiBBcHBNb2RlXHJcbiAgdGhlbWU6IElNVGhlbWVWYXJpYWJsZXNcclxuICBpc0hlaWdodEF1dG86IGJvb2xlYW5cclxuICBpc1dpZHRoQXV0bzogYm9vbGVhblxyXG4gIGN1cnJlbnRDYXJkU2l6ZTogRWxlbWVudFNpemVcclxuICBsaXN0VGVtcGxhdGVEZWZhdWx0Q2FyZFNpemU6IEVsZW1lbnRTaXplXHJcbiAgc2hvd1RvcFRvb2xzOiBib29sZWFuXHJcbiAgYm90dG9tVG9vbEg6IG51bWJlclxyXG4gIHRvcFJpZ2h0VG9vbFc6IG51bWJlclxyXG4gIGhhc1JlY29yZHM6IGJvb2xlYW5cclxuICBtZXhTaXplOiBNYXhTaXplXHJcbiAgbGF5b3V0VHlwZTogTGlzdExheW91dFR5cGVcclxuICBsaXN0TGVmdFBhZGRpbmc6IG51bWJlclxyXG59XHJcblxyXG5pbnRlcmZhY2UgTWF4U2l6ZSB7XHJcbiAgbWF4V2lkdGg6IG51bWJlclxyXG4gIG1heEhlaWdodDogbnVtYmVyIHwgc3RyaW5nXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBsaXN0U3R5bGUgPSB1dGlscy5tZW1vaXplKGZ1bmN0aW9uIChcclxuICBvcHRpb25zOiBMaXNTdHlsZU9wdGlvblxyXG4pOiBTZXJpYWxpemVkU3R5bGVzIHtcclxuICBjb25zdCB7XHJcbiAgICBzaG93VG9wVG9vbHMsXHJcbiAgICBib3R0b21Ub29sSCxcclxuICAgIHRvcFJpZ2h0VG9vbFcsXHJcbiAgICBoYXNSZWNvcmRzLFxyXG4gICAgY3VycmVudENhcmRTaXplLFxyXG4gICAgcGFnZVN0eWxlLFxyXG4gICAgc2Nyb2xsQmFyT3BlbixcclxuICAgIGFwcE1vZGUsXHJcbiAgICB0aGVtZSxcclxuICAgIGlzSGVpZ2h0QXV0byxcclxuICAgIGlzV2lkdGhBdXRvLFxyXG4gICAgbGlzdFRlbXBsYXRlRGVmYXVsdENhcmRTaXplLFxyXG4gICAgbGF5b3V0VHlwZSxcclxuICAgIGxpc3RMZWZ0UGFkZGluZ1xyXG4gIH0gPSBvcHRpb25zXHJcbiAgY29uc3QgdG9wVG9vbHNIID0gc2hvd1RvcFRvb2xzID8gRFNfVE9PTF9IIDogMFxyXG4gIGNvbnN0IGRpcmVjdGlvbiA9IGxheW91dFR5cGUgPT09IExpc3RMYXlvdXRUeXBlLkNvbHVtbiA/IERpcmVjdGlvblR5cGUuSG9yaXpvbiA6IERpcmVjdGlvblR5cGUuVmVydGljYWxcclxuICBjb25zdCBpc0hvcml6b24gPSBsYXlvdXRUeXBlID09PSBMaXN0TGF5b3V0VHlwZS5Db2x1bW5cclxuICBjb25zdCBmbGV4RGlyZWN0aW9uID0gbGF5b3V0VHlwZSA9PT0gTGlzdExheW91dFR5cGUuQ29sdW1uID8gJ2NvbHVtbicgOiAncm93J1xyXG4gIHJldHVybiBjc3NgXHJcbiAgICAmLmxpc3QtY29udGFpbmVyIHtcclxuICAgICAgLyogcG9zaXRpb246ICR7aXNIZWlnaHRBdXRvID8gJ2Fic29sdXRlJyA6ICdyZWxhdGl2ZSd9OyAqL1xyXG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgICAgIHotaW5kZXg6IDA7XHJcbiAgICAgIG92ZXJmbG93OiBoaWRkZW47XHJcbiAgICAgIC5ib3R0b20tYm91bmRhcnkge1xyXG4gICAgICAgIGhlaWdodDogMnB4O1xyXG4gICAgICAgIHdpZHRoOiAycHg7XHJcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgIGJvdHRvbTogMDtcclxuICAgICAgICByaWdodDogMDtcclxuICAgICAgICBvcGFjaXR5OiAwO1xyXG4gICAgICB9XHJcbiAgICAgICR7XHJcbiAgICAgICAgZGlyZWN0aW9uID09PSBEaXJlY3Rpb25UeXBlLkhvcml6b25cclxuICAgICAgICAgID8gYFxyXG4gICAgICAgICAgbWFyZ2luLWxlZnQ6ICR7TElTVF9DQVJEX1BBRERJTkcgKyAncHgnfTtcclxuICAgICAgICAgIGhlaWdodDogJHtpc0hlaWdodEF1dG8gPyAnYXV0bycgOiAnY2FsYygxMDAlIC0gMXB4KSd9O1xyXG4gICAgICAgICAgd2lkdGg6ICR7XHJcbiAgICAgICAgICAgIGlzV2lkdGhBdXRvID8gJ2F1dG8nIDogYGNhbGMoMTAwJSAtICR7TElTVF9DQVJEX1BBRERJTkcgKyAncHgnfSlgXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIGBcclxuICAgICAgICAgIDogYFxyXG4gICAgICAgICAgbWFyZ2luLXRvcDogJHtMSVNUX0NBUkRfUEFERElORyArICdweCd9O1xyXG4gICAgICAgICAgd2lkdGg6ICR7aXNXaWR0aEF1dG8gPyAnYXV0bycgOiAnY2FsYygxMDAlIC0gMXB4KSd9O1xyXG4gICAgICAgICAgaGVpZ2h0OiAke1xyXG4gICAgICAgICAgICBpc0hlaWdodEF1dG8gPyAnYXV0bycgOiBgY2FsYygxMDAlIC0gJHtMSVNUX0NBUkRfUEFERElORyArICdweCd9KWBcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgYFxyXG4gICAgICB9XHJcblxyXG4gICAgICAuZWRpdGluZy1tYXNrLWNvbiB7XHJcbiAgICAgICAgJjpiZWZvcmUge1xyXG4gICAgICAgICAgY29udGVudDogJyc7XHJcbiAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgICAgICBsZWZ0OiAwO1xyXG4gICAgICAgICAgdG9wOiAke3RvcFRvb2xzSH1weDtcclxuICAgICAgICAgIHotaW5kZXg6IDEwO1xyXG4gICAgICAgICAgaGVpZ2h0OiAke2N1cnJlbnRDYXJkU2l6ZS5oZWlnaHR9cHg7XHJcbiAgICAgICAgICB3aWR0aDogJHtsaXN0TGVmdFBhZGRpbmd9cHg7XHJcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3BvbGlzaGVkLnJnYmEodGhlbWUuY29sb3JzLmJsYWNrLCAwLjIpfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLmVkaXRpbmctbWFzay1saXN0LWdyaWQge1xyXG4gICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgICAgbGVmdDogJHtjdXJyZW50Q2FyZFNpemUud2lkdGggKyBsaXN0TGVmdFBhZGRpbmd9cHg7XHJcbiAgICAgICAgICB0b3A6ICR7dG9wVG9vbHNIfXB4O1xyXG4gICAgICAgICAgcmlnaHQ6IDA7XHJcbiAgICAgICAgICB6LWluZGV4OiAxMDtcclxuICAgICAgICAgIGhlaWdodDogJHtjdXJyZW50Q2FyZFNpemUuaGVpZ2h0fXB4O1xyXG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHtwb2xpc2hlZC5yZ2JhKHRoZW1lLmNvbG9ycy5ibGFjaywgMC4yKX07XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIC5lZGl0aW5nLW1hc2stbGlzdCB7XHJcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgIHRvcDogJHtcclxuICAgICAgICAgIGxheW91dFR5cGUgIT09IExpc3RMYXlvdXRUeXBlLkNvbHVtbiAmJiBoYXNSZWNvcmRzXHJcbiAgICAgICAgICAgID8gY3VycmVudENhcmRTaXplLmhlaWdodCArIHRvcFRvb2xzSFxyXG4gICAgICAgICAgICA6IHRvcFRvb2xzSFxyXG4gICAgICAgIH1weDtcclxuICAgICAgICBsZWZ0OiAke1xyXG4gICAgICAgICAgbGF5b3V0VHlwZSA9PT0gTGlzdExheW91dFR5cGUuQ29sdW1uICYmIGhhc1JlY29yZHNcclxuICAgICAgICAgICAgPyBjdXJyZW50Q2FyZFNpemUud2lkdGhcclxuICAgICAgICAgICAgOiAwXHJcbiAgICAgICAgfXB4O1xyXG4gICAgICAgIGJvdHRvbTogJHtwb2xpc2hlZC5yZW0oYm90dG9tVG9vbEgpfTtcclxuICAgICAgICByaWdodDogMDtcclxuICAgICAgICB6LWluZGV4OiAxMDtcclxuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3BvbGlzaGVkLnJnYmEodGhlbWUuY29sb3JzLmJsYWNrLCAwLjIpfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLmVkaXRpbmctbWFzay1kcy10b29sIHtcclxuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgICAgei1pbmRleDogMTA7XHJcbiAgICAgICAgdG9wOiAwO1xyXG4gICAgICAgIGxlZnQ6IDA7XHJcbiAgICAgICAgYm90dG9tOiAwO1xyXG4gICAgICAgIHJpZ2h0OiAwO1xyXG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7cG9saXNoZWQucmdiYSh0aGVtZS5jb2xvcnMuYmxhY2ssIDAuMil9O1xyXG4gICAgICB9XHJcblxyXG4gICAgICAuZWRpdGluZy1tYXNrLWJvdHRvbS10b29sIHtcclxuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgICAgei1pbmRleDogMTA7XHJcbiAgICAgICAgdG9wOiAwO1xyXG4gICAgICAgIGxlZnQ6IDA7XHJcbiAgICAgICAgYm90dG9tOiAwO1xyXG4gICAgICAgIHJpZ2h0OiAwO1xyXG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7cG9saXNoZWQucmdiYSh0aGVtZS5jb2xvcnMuYmxhY2ssIDAuMil9O1xyXG4gICAgICB9XHJcblxyXG4gICAgICAuZW1wdHktY29uIHtcclxuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgICAgdG9wOiA1MCU7XHJcbiAgICAgICAgbGVmdDogMDtcclxuICAgICAgICByaWdodDogMDtcclxuICAgICAgICB6LWluZGV4OiAxMDtcclxuICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7XHJcbiAgICAgICAgcGFkZGluZy10b3A6ICR7dG9wVG9vbHNIfXB4O1xyXG4gICAgICAgIC5qaW11LWljb24ge1xyXG4gICAgICAgICAgY29sb3I6ICR7dGhlbWUuY29sb3JzLnBhbGV0dGUud2FybmluZ1s5MDBdfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLmRpc2NyaWJ0aW9uIHtcclxuICAgICAgICAgIG1hcmdpbjogJHtwb2xpc2hlZC5yZW0oOSl9IDAgJHtwb2xpc2hlZC5yZW0oOCl9IDA7XHJcbiAgICAgICAgICBmb250LXNpemU6ICR7cG9saXNoZWQucmVtKDE0KX07XHJcbiAgICAgICAgICBjb2xvcjogJHt0aGVtZS5jb2xvcnMuYmxhY2t9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC5jbGVhci1tZXNzYWdlLWFjdGlvbi1idXR0b24ge1xyXG4gICAgICAgICAgd2lkdGg6ICR7cG9saXNoZWQucmVtKDY1KX07XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAuZGF0YXNvdXJjZS10b29scyB7XHJcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgICAgIGhlaWdodDogJHtwb2xpc2hlZC5yZW0odG9wVG9vbHNIKX07XHJcbiAgICAgICAgcGFkZGluZzogJHtwb2xpc2hlZC5yZW0oNCl9ICR7cG9saXNoZWQucmVtKDQpfSAke3BvbGlzaGVkLnJlbShEU19UT09MX0JPVFRPTV9QQURESU5HKX0gJHtwb2xpc2hlZC5yZW0oNCl9O1xyXG4gICAgICAgIC5saXN0LXNvcnQtY29uIHtcclxuICAgICAgICAgIG1hcmdpbi1yaWdodDogJHtwb2xpc2hlZC5yZW0oNCl9O1xyXG4gICAgICAgIH1cclxuICAgICAgICAuc29ydC1maWVsZHMtaW5wdXQge1xyXG4gICAgICAgICAgd2lkdGg6IDIwMHB4O1xyXG4gICAgICAgICAgbWFyZ2luLWxlZnQ6IDhweDtcclxuICAgICAgICAgIG1hcmdpbi1yaWdodDogMTZweDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC50b29sLXJvdyB7XHJcbiAgICAgICAgICBoZWlnaHQ6ICR7RFNfVE9PTF9IIC0gRFNfVE9PTF9CT1RUT01fUEFERElOR31weDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLmRzLXRvb2xzLWxpbmUge1xyXG4gICAgICAgICAgd2lkdGg6IDEwMCU7XHJcbiAgICAgICAgICBoZWlnaHQ6IDFweDtcclxuICAgICAgICAgIG1hcmdpbi10b3A6ICR7cG9saXNoZWQucmVtKDYpfTtcclxuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7dGhlbWUuY29sb3JzLnBhbGV0dGUubGlnaHRbNTAwXX07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC5kcy10b29scy1saW5lLWJsdWUge1xyXG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt0aGVtZS5jb2xvcnMucGFsZXR0ZS5pbmZvWzUwMF19O1xyXG4gICAgICAgIH1cclxuICAgICAgICAubGlzdC1zZWFyY2gtZGl2IHtcclxuICAgICAgICAgIHdpZHRoOiBjYWxjKDEwMCUgLSAke3RvcFJpZ2h0VG9vbFd9cHgpO1xyXG4gICAgICAgICAgLmxpc3Qtc2VhcmNoIHtcclxuICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogJHtwb2xpc2hlZC5yZW0oLTQpfTtcclxuICAgICAgICAgICAgd2lkdGg6IDEwMCU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgfVxyXG4gICAgICAudG9vbHMtbWVudSB7XHJcbiAgICAgICAgY29sb3I6ICR7dGhlbWUuY29sb3JzLnBhbGV0dGUubGlnaHRbODAwXX07XHJcbiAgICAgIH1cclxuICAgICAgLnRvb2xzLW1lbnU6aG92ZXIge1xyXG4gICAgICAgIGNvbG9yOiAke3RoZW1lLmNvbG9ycy5wYWxldHRlLmluZm9bNTAwXX07XHJcbiAgICAgIH1cclxuICAgICAgLmJvdHRvbS10b29scyB7XHJcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgICAgIHBhZGRpbmctdG9wOiAke3BvbGlzaGVkLnJlbShCT1RUT01fVE9PTF9UT1BfUEFERElORyl9O1xyXG4gICAgICAgIG1pbi1oZWlnaHQ6ICR7cG9saXNoZWQucmVtKEJPVFRPTV9UT09MX0gpfTtcclxuICAgICAgICAuc2Nyb2xsLW5hdmlnYXRvciB7XHJcbiAgICAgICAgICAuYnRuIHtcclxuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogJHt0aGVtZS5ib3JkZXJSYWRpdXNlcy5jaXJjbGV9O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLndpZGdldC1saXN0LWxpc3Q6Zm9jdXMge1xyXG4gICAgICAgIG91dGxpbmU6IG5vbmU7XHJcbiAgICAgIH1cclxuICAgICAgLndpZGdldC1saXN0LWxpc3Qge1xyXG4gICAgICAgICYge1xyXG4gICAgICAgICAgcGFkZGluZzogMDtcclxuICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgICAgICAgIHBhZGRpbmctbGVmdDogJHtgJHtsaXN0TGVmdFBhZGRpbmd9cHhgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJj5kaXYge1xyXG4gICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgICAgICAgZmxleDogMTtcclxuICAgICAgICAgIGJveC1zaXppbmc6IGNvbnRlbnQtYm94O1xyXG4gICAgICAgIH1cclxuICAgICAgICAvKiBib3gtc2l6aW5nOiBib3JkZXItYm94OyAqL1xyXG4gICAgICAgICR7XHJcbiAgICAgICAgICAhd2luZG93LmppbXVDb25maWcuaXNJbkJ1aWxkZXIgfHwgYXBwTW9kZSA9PT0gQXBwTW9kZS5SdW5cclxuICAgICAgICAgICAgPyBgb3ZlcmZsb3ctJHtpc0hvcml6b24gPyAneScgOiAneCd9OiBoaWRkZW4gIWltcG9ydGFudDtgXHJcbiAgICAgICAgICAgIDogJ292ZXJmbG93OiBoaWRkZW4gIWltcG9ydGFudDsnXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGhlaWdodDogJHtcclxuICAgICAgICAgIGlzSGVpZ2h0QXV0b1xyXG4gICAgICAgICAgICA/ICdhdXRvJ1xyXG4gICAgICAgICAgICA6IGBjYWxjKDEwMCUgLSAke3RvcFRvb2xzSH1weCAtICR7Ym90dG9tVG9vbEh9cHgpYFxyXG4gICAgICAgIH0gIWltcG9ydGFudDtcclxuICAgICAgICB3aWR0aDogJHtpc1dpZHRoQXV0byA/ICdhdXRvJyA6ICcxMDAlJ30gIWltcG9ydGFudDtcclxuICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICAgICR7YGZsZXgtZGlyZWN0aW9uOiAke2ZsZXhEaXJlY3Rpb259YH07XHJcbiAgICAgICAgJHtpc0hlaWdodEF1dG8gJiYgYG1pbi1oZWlnaHQ6ICR7bGlzdFRlbXBsYXRlRGVmYXVsdENhcmRTaXplLmhlaWdodH1weDtgfTtcclxuICAgICAgICAke2lzV2lkdGhBdXRvICYmIGBtaW4td2lkdGg6ICR7bGlzdFRlbXBsYXRlRGVmYXVsdENhcmRTaXplLndpZHRofXB4O2B9O1xyXG4gICAgICAgICR7XHJcbiAgICAgICAgICBpc0hvcml6b25cclxuICAgICAgICAgICAgPyBgXHJcbiAgICAgICAgICAgICAgJHtgbWF4LXdpZHRoOiAke29wdGlvbnMubWV4U2l6ZS5tYXhXaWR0aH1gfTtcclxuICAgICAgICAgICAgYFxyXG4gICAgICAgICAgICA6IGBcclxuICAgICAgICAgICAgICAke2BtYXgtaGVpZ2h0OiBjYWxjKCR7b3B0aW9ucy5tZXhTaXplLm1heEhlaWdodH0gLSAke3RvcFRvb2xzSH1weCAtICR7Ym90dG9tVG9vbEh9cHgpYH07XHJcbiAgICAgICAgICAgIGBcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgLmhpZGUtbGlzdCB7XHJcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbiAhaW1wb3J0YW50O1xyXG4gICAgICB9XHJcbiAgICAgICR7XHJcbiAgICAgICAgcGFnZVN0eWxlID09PSBQYWdlU3R5bGUuU2Nyb2xsICYmICFzY3JvbGxCYXJPcGVuXHJcbiAgICAgICAgICA/IGBcclxuICAgICAgICAgIC53aWRnZXQtbGlzdC1saXN0Ojotd2Via2l0LXNjcm9sbGJhciB7XHJcbiAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7IC8vU2FmYXJpIGFuZCBDaHJvbWVcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC53aWRnZXQtbGlzdC1saXN0IHtcclxuICAgICAgICAgICAgICAtbXMtb3ZlcmZsb3ctc3R5bGU6IG5vbmU7IC8vSUUgMTArXHJcbiAgICAgICAgICAgICAgb3ZlcmZsb3c6IC1tb3otc2Nyb2xsYmFycy1ub25lOyAvL0ZpcmVmb3hcclxuICAgICAgICAgICAgICBzY3JvbGxiYXItd2lkdGg6IG5vbmU7IC8qIEZpcmVmb3ggKi9cclxuICAgICAgICAgIH1cclxuICAgICAgICBgXHJcbiAgICAgICAgICA6ICcnXHJcbiAgICAgIH1cclxuICAgICAgLnBsYWNlaG9sZGVyLWFsZXJ0LWNvbiB7XHJcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgIGJvdHRvbTogJHtwb2xpc2hlZC5yZW0oOCl9O1xyXG4gICAgICAgIHJpZ2h0OiAke3BvbGlzaGVkLnJlbSg4KX07XHJcbiAgICAgICAgei1pbmRleDogMTE7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICBgXHJcbn0pXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3R5bGUgKFxyXG4gIHByb3BzOiBMaXN0UHJvcHMsXHJcbiAgaXNFZGl0aW5nOiBib29sZWFuLFxyXG4gIHNob3dCb3R0b21Ub29sOiBib29sZWFuXHJcbik6IFNlcmlhbGl6ZWRTdHlsZXMge1xyXG4gIGNvbnN0IHsgY29uZmlnLCBpZCwgYXBwTW9kZSwgaXNIZWlnaHRBdXRvLCBpc1dpZHRoQXV0bywgdGhlbWUgfSA9IHByb3BzXHJcbiAgcmV0dXJuIGNzc2BcclxuICAgICR7JyYubGlzdC13aWRnZXQtJyArIGlkfSB7XHJcbiAgICAgIG92ZXJmbG93OiB2aXNpYmxlO1xyXG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcclxuICAgICAgYm9yZGVyOiAke3BvbGlzaGVkLnJlbShDT01NT05fUEFERElORyl9IHNvbGlkICR7cG9saXNoZWQucmdiYShcclxuICAgIHRoZW1lLmNvbG9ycy5ibGFjayxcclxuICAgIHdpbmRvdy5qaW11Q29uZmlnLmlzSW5CdWlsZGVyICYmIGlzRWRpdGluZyA/IDAuMiA6IDBcclxuICApfTtcclxuICAgICAgaGVpZ2h0OiAke2lzSGVpZ2h0QXV0byA/ICdhdXRvJyA6ICcxMDAlJ307XHJcbiAgICAgIHdpZHRoOiAke2lzV2lkdGhBdXRvID8gJ2F1dG8nIDogJzEwMCUnfTtcclxuICAgICAgLmxpc3Qtd2l0aC1tYXNrIHtcclxuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgICAgbGVmdDogMDtcclxuICAgICAgICByaWdodDogMDtcclxuICAgICAgICBib3R0b206IDA7XHJcbiAgICAgICAgdG9wOiAwO1xyXG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7cG9saXNoZWQucmdiYSh0aGVtZS5jb2xvcnMuYmxhY2ssIDApfTtcclxuICAgICAgICB6LWluZGV4OiAxO1xyXG4gICAgICB9XHJcbiAgICAgIC5saXN0LXRvZ2dsZS1idXR0b24ge1xyXG4gICAgICAgIGJhY2tncm91bmQ6IG5vbmU7XHJcbiAgICAgIH1cclxuICAgICAgLmxpc3QtbG9hZGluZy1jb24ge1xyXG4gICAgICAgIG1pbi1oZWlnaHQ6ICR7cG9saXNoZWQucmVtKDEyMCl9O1xyXG4gICAgICAgIG1pbi13aWR0aDogJHtwb2xpc2hlZC5yZW0oMTYwKX07XHJcbiAgICAgIH1cclxuICAgICAgLmxpc3QtZXJyb3ItY29uIHtcclxuICAgICAgICAuYWxlcnQtcGFuZWwge1xyXG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogMDtcclxuICAgICAgICAgIHRleHQtYWxpZ246IGxlZnQ7XHJcbiAgICAgICAgICBsZWZ0OiAke3BvbGlzaGVkLnJlbSg0KX07XHJcbiAgICAgICAgICByaWdodDogJHtwb2xpc2hlZC5yZW0oNCl9O1xyXG4gICAgICAgICAgYm90dG9tOiAke3BvbGlzaGVkLnJlbSg0KX07XHJcbiAgICAgICAgICB3aWR0aDogYXV0bztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgLnJlZnJlc2gtbG9hZGluZy1jb24ge1xyXG4gICAgICAgIHJpZ2h0OiAwO1xyXG4gICAgICAgIGJvdHRvbToke3Nob3dCb3R0b21Ub29sID8gcG9saXNoZWQucmVtKEJPVFRPTV9UT09MX0gpIDogMH07XHJcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgICAgICBoZWlnaHQ6ICR7cG9saXNoZWQucmVtKDI0KX07XHJcbiAgICAgICAgLmF1dG8tcmVmcmVzaC1sb2FkaW5nIHtcclxuICAgICAgICAgIGJhY2tncm91bmQ6ICR7cG9saXNoZWQucmdiYSh0aGVtZS5jb2xvcnM/LnBhbGV0dGU/LmRhcms/LlsxMDBdLCAwLjIpfTtcclxuICAgICAgICAgIGNvbG9yOiAke3RoZW1lLmNvbG9ycz8uYmxhY2t9O1xyXG4gICAgICAgICAgZm9udC1zaXplOiAke3BvbGlzaGVkLnJlbSgxMil9O1xyXG4gICAgICAgICAgbGluZS1oZWlnaHQ6ICR7cG9saXNoZWQucmVtKDI0KX07XHJcbiAgICAgICAgICBwYWRkaW5nOiAwICR7cG9saXNoZWQucmVtKDcpfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJi5ob3Jpem9uLWxvYWRpbmcge1xyXG4gICAgICAgICAgYm90dG9tOiR7XHJcbiAgICAgICAgICAgIHNob3dCb3R0b21Ub29sID8gcG9saXNoZWQucmVtKEJPVFRPTV9UT09MX0ggKyA2KSA6IHBvbGlzaGVkLnJlbSg2KVxyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJi52ZXJ0aWNhbC1sb2FkaW5nIHtcclxuICAgICAgICAgIHJpZ2h0OiAke3BvbGlzaGVkLnJlbSg2KX07XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIC5sb2FkaW5nLWNvbiB7XHJcbiAgICAgICAgQGtleWZyYW1lcyBsb2FkaW5nIHtcclxuICAgICAgICAgIDAlIHt0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsgfTtcclxuICAgICAgICAgIDEwMCUge3RyYW5zZm9ybTogcm90YXRlKDM2MGRlZyl9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB3aWR0aDogJHtwb2xpc2hlZC5yZW0oMTYpfTtcclxuICAgICAgICBoZWlnaHQ6ICR7cG9saXNoZWQucmVtKDE2KX07XHJcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgJHt0aGVtZT8uY29sb3JzPy5wYWxldHRlPy5kYXJrPy5bMTAwXX07XHJcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xyXG4gICAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCAke3RoZW1lPy5jb2xvcnM/LnBhbGV0dGU/LmRhcms/Lls4MDBdfTtcclxuICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gICAgICAgIGFuaW1hdGlvbjpsb2FkaW5nIDJzIGluZmluaXRlIGxpbmVhcjtcclxuICAgICAgICBtYXJnaW4tcmlnaHQ6ICR7cG9saXNoZWQucmVtKDQpfTtcclxuICAgICAgfVxyXG4gICAgICAud2lkZ2V0LWxpc3Qge1xyXG4gICAgICAgIG92ZXJmbG93OiAke1xyXG4gICAgICAgICAgd2luZG93LmppbXVDb25maWcuaXNJbkJ1aWxkZXIgJiYgYXBwTW9kZSAhPT0gQXBwTW9kZS5SdW5cclxuICAgICAgICAgICAgPyAnaGlkZGVuJ1xyXG4gICAgICAgICAgICA6ICdhdXRvJ1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgaGVpZ2h0OiAke2lzSGVpZ2h0QXV0byA/ICdhdXRvJyA6ICcxMDAlJ307XHJcbiAgICAgICAgd2lkdGg6ICR7aXNXaWR0aEF1dG8gPyAnYXV0bycgOiAnMTAwJSd9O1xyXG4gICAgICAgIC8qIGFsaWduLWl0ZW1zOiAke2NvbmZpZy5hbGlnblR5cGV9O1xyXG4gICAgICAgIGp1c3RpZnktY29udGVudDogJHtjb25maWcuYWxpZ25UeXBlfTsgKi9cclxuICAgICAgICAke1xyXG4gICAgICAgICAgY29uZmlnLmRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uVHlwZS5Ib3Jpem9uXHJcbiAgICAgICAgICAgID8gYFxyXG4gICAgICAgICAgICBvdmVyZmxvdy15OiBoaWRkZW47XHJcbiAgICAgICAgICBgXHJcbiAgICAgICAgICAgIDogYFxyXG4gICAgICAgICAgICBvdmVyZmxvdy14OiBoaWRkZW47XHJcbiAgICAgICAgICBgXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gIGBcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFRvb2xzUG9wcGVyU3R5bGUgKHByb3BzOiBMaXN0UHJvcHMpOiBTZXJpYWxpemVkU3R5bGVzIHtcclxuICBjb25zdCB7IHRoZW1lIH0gPSBwcm9wc1xyXG4gIHJldHVybiBjc3NgXHJcbiAgICAmIHtcclxuICAgICAgcGFkZGluZzogJHtwb2xpc2hlZC5yZW0oNil9ICR7cG9saXNoZWQucmVtKDExKX07XHJcbiAgICAgIGhlaWdodDogJHtwb2xpc2hlZC5yZW0oNDApfTtcclxuICAgIH1cclxuICAgIC5saXN0LXRvZ2dsZS1idXR0b24ge1xyXG4gICAgICBiYWNrZ3JvdW5kOiBub25lO1xyXG4gICAgfVxyXG4gICAgLmxpc3Qtc29ydC1jb24sIC5saXN0LXNlYXJjaC1pY29uIHtcclxuICAgICAgbWFyZ2luLXJpZ2h0OiAke3BvbGlzaGVkLnJlbSg0KX07XHJcbiAgICB9XHJcbiAgICAuZHMtdG9vbHMtbGluZSB7XHJcbiAgICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgICBoZWlnaHQ6IDFweDtcclxuICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt0aGVtZS5jb2xvcnMucGFsZXR0ZS5saWdodFs1MDBdfTtcclxuICAgIH1cclxuICAgIC5kcy10b29scy1saW5lLWJsdWUge1xyXG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3RoZW1lLmNvbG9ycy5wYWxldHRlLmluZm9bNTAwXX07XHJcbiAgICB9XHJcbiAgICAuY2xvc2Utc2VhcmNoIHtcclxuICAgICAgbWFyZ2luLXRvcDogJHtwb2xpc2hlZC5yZW0oLTYpfTtcclxuICAgIH1cclxuICBgXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRTZWFyY2hUb29sU3R5bGUgKHByb3BzOiBMaXN0UHJvcHMpOiBTZXJpYWxpemVkU3R5bGVzIHtcclxuICBjb25zdCB7IHRoZW1lIH0gPSBwcm9wc1xyXG4gIHJldHVybiBjc3NgXHJcbiAgICAuY2xvc2Utc2VhcmNoIHtcclxuICAgICAgYm9yZGVyOiAxcHggc29saWQgJHt0aGVtZS5jb2xvcnMucGFsZXR0ZS5saWdodFs1MDBdfTtcclxuICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt0aGVtZS5jb2xvcnMud2hpdGV9O1xyXG4gICAgfVxyXG4gICAgLnNlYXJjaC1ib3gtY29udGVudCB7XHJcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgICAgIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0O1xyXG4gICAgfVxyXG4gIGBcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFRvcFRvb2xTdHlsZSAocHJvcHM6IExpc3RQcm9wcywgc2hvd1RvcFRvb2xzOiBib29sZWFuKTogU2VyaWFsaXplZFN0eWxlcyB7XHJcbiAgcmV0dXJuIGNzc2BcclxuICAgIC5saXN0LWRhdGEtYWN0aW9uIHtcclxuICAgICAgJiB7XHJcbiAgICAgICAgcGFkZGluZy1sZWZ0OiAke3BvbGlzaGVkLnJlbSg0KX07XHJcbiAgICAgIH1cclxuICAgICAgJjo6YWZ0ZXIge1xyXG4gICAgICAgIGNvbnRlbnQ6ICcnO1xyXG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgICAgICBsZWZ0OiAwO1xyXG4gICAgICAgIHRvcDogNTAlO1xyXG4gICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTtcclxuICAgICAgICBoZWlnaHQ6ICR7cG9saXNoZWQucmVtKDE2KX07XHJcbiAgICAgICAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAke3Nob3dUb3BUb29scyA/ICd2YXIoLS1saWdodC00MDApJyA6ICd0cmFuc3BhcmVudCd9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC5tLWxlZnQge1xyXG4gICAgICBtYXJnaW4tbGVmdDogJHtwb2xpc2hlZC5yZW0oNCl9O1xyXG4gICAgfVxyXG4gIGBcclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCB7XHJcbiAgX3dpZGdldExhYmVsOiAnTGlzdCcsXHJcbiAgX3dpZGdldERlc2NyaXB0aW9uOiAnQSB3aWRnZXQgdG8gZGlzcGxheSBkYXRhIGluIGEgbGlzdCB2aWV3LicsXHJcbiAgX2FjdGlvbl9maWx0ZXJfbGFiZWw6ICdGaWx0ZXInLFxyXG4gIF9sYXlvdXRfUkVHVUxBUl9sYWJlbDogJ1JlZ3VsYXInLFxyXG4gIF9sYXlvdXRfSE9WRVJfbGFiZWw6ICdIb3ZlcicsXHJcbiAgX2xheW91dF9TRUxFQ1RFRF9sYWJlbDogJ1NlbGVjdGVkJyxcclxuICBhcHBseVRvOiAnQXBwbHkgdG8ge3N0YXR1c30nLFxyXG4gIGxpc3RMb2FkaW5nOiAnTG9hZGluZycsXHJcbiAgcGxlYXNlU2VsZWN0OiAnUGxlYXNlIHNlbGVjdCcsXHJcbiAgbGlzdE5vRGF0YTogJ05vIGRhdGEnLFxyXG4gIHNlbGVjdFNvcnRGaWVsZHM6ICdTZWxlY3Qgc29ydGluZyBmaWVsZHMnLFxyXG4gIGNsZWFyRmlsdGVyOiAnQ2xlYXIgZmlsdGVyJyxcclxuICBpc29sYXRlOiAnSXNvbGF0ZScsXHJcbiAgbGlua2VkVG9BbmQ6ICdMaW5rZWQgdG8ge3doZXJlMX0gYW5kIHt3aGVyZTJ9JyxcclxuICBsaW5rZWRUbzogJ0xpbmtlZCB0byB7d2hlcmV9JyxcclxuICBwbGFjZUhvbGRlclRpcDogJ1BsZWFzZSBzZWxlY3QgYSBsaXN0IHRlbXBsYXRlLicsXHJcbiAgc2hvd1NlbGVjdGVkOiAnU2hvdyBzZWxlY3RlZCcsXHJcbiAgY2xlYXJTZWxlY3RlZDogJ0NsZWFyIHNlbGVjdGVkJyxcclxuICBsaXN0U29ydGluZzogJ1NvcnRpbmcnLFxyXG4gIGxpc3RTb3J0OiAnU29ydCcsXHJcblxyXG4gIC8vIGd1aWRlXHJcbiAgZ3VpZGVTdGVwMlRpdGxlOiAnVGVtcGxhdGUnLFxyXG4gIGd1aWRlU3RlcDJDb250ZW50OiAnQ2xpY2sgb24gYSB0ZW1wbGF0ZSBhbmQgY2xpY2sgc3RhcnQuJyxcclxuICBndWlkZVN0ZXAzVGl0bGU6ICdEYXRhJyxcclxuICBndWlkZVN0ZXAzQ29udGVudDogJ0NsaWNrIG9uIHNlbGVjdCBkYXRhIHRvIGFkZCBhIGRhdGEgc291cmNlLicsXHJcbiAgZ3VpZGVTdGVwNFRpdGxlOiAnQWRkIG5ldyBkYXRhJyxcclxuICBndWlkZVN0ZXA0Q29udGVudDogJ0NsaWNrIGFkZCBuZXcgZGF0YSB0byBzZWxlY3QgYSB3ZWIgbWFwLicsXHJcbiAgZ3VpZGVTdGVwNVRpdGxlOiAnU2VsZWN0IGRhdGEnLFxyXG4gIGd1aWRlU3RlcDVDb250ZW50OiAnQ2xpY2sgdGhlIGZlYXR1cmUgbGF5ZXIgaW4gdGhlIHNlbGVjdCBkYXRhIHBhbmVsIGFuZCBjbG9zZSB0aGUgcGFuZWwuJyxcclxuICBndWlkZVN0ZXA2VGl0bGU6ICdEYXRhJyxcclxuICBndWlkZVN0ZXA2Q29udGVudDogJ1NwZWNpZmllcyB0aGUgZGF0YSBzb3VyY2UsIGFsbG93cyB5b3UgdG8gZmlsdGVyIHRoZSBkYXRhIGFuZCBsaW1pdCB0aGUgbnVtYmVyIG9mIGZlYXR1cmVzIHRoYXQgYXBwZWFyIGluIHRoZSBsaXN0LicsXHJcbiAgZ3VpZGVTdGVwN1RpdGxlOiAnQXJyYW5nZW1lbnQnLFxyXG4gIGd1aWRlU3RlcDdDb250ZW50OiAnQ2xpY2sgdGhlIGV4cGFuZCBpY29uIHRvIGV4cGxvcmUgdGhlIEFycmFuZ2VtZW50IHNlY3Rpb24uIEluIGhlcmUsIGl0IGFsbG93cyB5b3UgdG8gZGVmaW5lIHRoZSBkaXJlY3Rpb24sIGhlaWdodCwgc3BhY2luZywgYW5kIHBhZ2luZyBzdHlsZSBmb3IgeW91ciBsaXN0LicsXHJcbiAgZ3VpZGVTdGVwOFRpdGxlOiAnU3RhdGVzJyxcclxuICBndWlkZVN0ZXA4Q29udGVudDogJ0NsaWNrIHRoZSBleHBhbmQgaWNvbiB0byBleHBsb3JlIHRoZSBhdmFpbGFibGUgU3RhdGVzLiBJbiB0aGlzIHNlY3Rpb24sIGl0IHByb3ZpZGVzIGEgdmlzdWFsIHJlcHJlc2VudGF0aW9uIHRvIGNvbW11bmljYXRlIHRoZSBzdGF0ZSBvZiB0aGUgbGlzdCBpdGVtcy4gVGhlcmUgYXJlIHRocmVlIHN0YXRlczogcmVndWxhciwgc2VsZWN0ZWQsIGFuZCBob3Zlci4gQnkgZGVmYXVsdCwgdGhlIHNlbGVjdGVkIHN0YXRlIGlzIGFsd2F5cyBvbi4nLFxyXG4gIGd1aWRlU3RlcDlUaXRsZTogJ1Rvb2xzJyxcclxuICBndWlkZVN0ZXA5Q29udGVudDogJ0NsaWNrIHRoZSBleHBhbmQgaWNvbiB0byBleHBsb3JlIHRoZSBhdmFpbGFibGUgVG9vbHMuIEluIGhlcmUsIHlvdSBjYW4gaW5jbHVkZSBzZWFyY2gsIHNvcnQsIGZpbHRlciwgYW5kIHNob3cgc2VsZWN0ZWQgdG9vbHMgaW4geW91ciBsaXN0LicsXHJcbiAgZ3VpZGVTdGVwMTBUaXRsZTogJ1NlbGVjdCBpbWFnZScsXHJcbiAgZ3VpZGVTdGVwMTBDb250ZW50OiAnQ2xpY2sgdGhlIGltYWdlIHdpZGdldCB0byBjb25maWd1cmUgaXQgaW4gdGhlIGNvbnRlbnQgcGFuZWwuJyxcclxuICBndWlkZVN0ZXAxMFRpdGxlMjogJ0ltYWdlIHNldHRpbmdzJyxcclxuICBndWlkZVN0ZXAxMENvbnRlbnQyOiAnQWxsb3dzIHlvdSB0byBzZWxlY3QgdGhlIGltYWdlIHNvdXJjZSBhbmQgb3RoZXIgc2V0dGluZ3MgZm9yIHlvdXIgd2lkZ2V0LicsXHJcbiAgZ3VpZGVTdGVwMTFUaXRsZTogJ1NlbGVjdCB0ZXh0JyxcclxuICBndWlkZVN0ZXAxMUNvbnRlbnQ6ICdDbGljayB0aGUgdGV4dCB3aWRnZXQgdG8gYWRkIGF0dHJpYnV0ZXMgaW4gdGhlIHdpZGdldCB0b29sYmFyLicsXHJcbiAgZ3VpZGVTdGVwMTFUaXRsZTI6ICdUZXh0IHNldHRpbmdzJyxcclxuICBndWlkZVN0ZXAxMUNvbnRlbnQyOiAnUHJvdmlkZXMgdGhlIGNvbmZpZ3VyYXRpb25zIGFuZCBzdHlsZSwgaW5jbHVkaW5nIGFkZGluZyBkeW5hbWljIGNvbnRlbnQgZnJvbSB0aGUgd2lkZ2V0IHRvb2xiYXIuICcsXHJcbiAgZ3VpZGVTdGVwMTJUaXRsZTogJ0VuZCBvZiB0b3VyJyxcclxuICBndWlkZVN0ZXAxMkNvbnRlbnQ6ICdBZGQgb3RoZXIgd2lkZ2V0cyB0byBlbmhhbmNlIHlvdXIgZXhwZXJpZW5jZS4nLFxyXG5cclxuICBjbGVhclNlYXJjaDogJ0NsZWFyIHNlYXJjaCcsXHJcbiAgbWluaW1pemU6ICdNaW5pbWl6ZScsXHJcbiAgdG9wVG9vbEJhY2s6ICdCYWNrJyxcclxuXHJcbiAgc2hvd0FsbExpc3RSZWNvcmRzOiAnU2hvdyBhbGwgcmVjb3JkcycsXHJcbiAgbGlzdERhdGFBY3Rpb25MYWJlbDogJ3tsYXllcn0gbGlzdCBzZWxlY3Rpb24nLFxyXG4gIHNlYXJjaFJlc3VsdDogJ1NlYXJjaCByZXN1bHQnLFxyXG5cclxuICBkZXNjcmliZU1lc3NhZ2U6ICdMaXN0IGl0ZW0nXHJcbn1cclxuIiwiaW1wb3J0IHsgdHlwZSBMaXN0U3RhdGVzLCB0eXBlIExpc3RQcm9wcyB9IGZyb20gJy4uL3dpZGdldCdcclxuaW1wb3J0IHtcclxuICB0eXBlIFF1ZXJpYWJsZURhdGFTb3VyY2UsXHJcbiAgdXRpbHMsXHJcbiAgdHlwZSBEYXRhU291cmNlLFxyXG4gIGRhdGFTb3VyY2VVdGlscyxcclxuICBDbGF1c2VPcGVyYXRvcixcclxuICBDbGF1c2VMb2dpYyxcclxuICBRdWVyeVNjb3BlLFxyXG4gIHR5cGUgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSxcclxuICB0eXBlIElNU3FsRXhwcmVzc2lvbixcclxuICBJbW11dGFibGVcclxufSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB7IHR5cGUgU29ydFNldHRpbmdPcHRpb24gfSBmcm9tICdqaW11LXVpL2FkdmFuY2VkL3NldHRpbmctY29tcG9uZW50cydcclxuaW1wb3J0IHsgdHlwZSBJTUNvbmZpZywgdHlwZSBTdWdnZXN0aW9uIH0gZnJvbSAnLi4vLi4vY29uZmlnJ1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBRdWVyeU9wdGlvbnMge1xyXG4gIHJldHVybkdlb21ldHJ5PzogYm9vbGVhblxyXG4gIGdlb21ldHJ5PzogYW55XHJcbiAgc29ydEZpZWxkPzogc3RyaW5nXHJcbiAgc29ydE9yZGVyPzogc3RyaW5nXHJcbiAgb3JkZXJCeUZpZWxkcz86IHN0cmluZyB8IHN0cmluZ1tdXHJcbiAgcmVzdWx0T2Zmc2V0PzogbnVtYmVyXHJcbiAgcmVzdWx0UmVjb3JkQ291bnQ/OiBudW1iZXJcclxuICBwYWdlU2l6ZT86IG51bWJlclxyXG4gIHBhZ2U/OiBudW1iZXJcclxuICB3aGVyZT86IHN0cmluZ1xyXG4gIHNxbEV4cHJlc3Npb24/OiBJTVNxbEV4cHJlc3Npb25cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFF1ZXJ5T3B0aW9ucyAoXHJcbiAgc3RhdGU6IExpc3RTdGF0ZXMsXHJcbiAgcHJvcHM6IExpc3RQcm9wcyxcclxuICBwYWdlU2l6ZTogbnVtYmVyXHJcbik6IGFueSB7XHJcbiAgY29uc3Qgb3B0aW9uczogUXVlcnlPcHRpb25zID0ge1xyXG4gICAgcmV0dXJuR2VvbWV0cnk6IHRydWVcclxuICB9XHJcbiAgY29uc3QgeyBjb25maWcsIHVzZURhdGFTb3VyY2VzIH0gPSBwcm9wc1xyXG4gIGNvbnN0IHtcclxuICAgIHNvcnRPcHRpb25OYW1lLFxyXG4gICAgc2VhcmNoVGV4dCxcclxuICAgIGN1cnJlbnRGaWx0ZXIsXHJcbiAgICBmaWx0ZXJBcHBsaWVkLFxyXG4gICAgZGF0YXNvdXJjZVxyXG4gIH0gPSBzdGF0ZVxyXG4gIGNvbnN0IHVzZURTID0gdXNlRGF0YVNvdXJjZXMgJiYgdXNlRGF0YVNvdXJjZXNbMF1cclxuICBpZiAoIWRhdGFzb3VyY2UgfHwgIXVzZURTKSByZXR1cm4gbnVsbFxyXG5cclxuICBpZiAoIShkYXRhc291cmNlIGFzIFF1ZXJpYWJsZURhdGFTb3VyY2UpLnF1ZXJ5KSB7XHJcbiAgICAvLyBub3QgcXVlcnlpYWJsZSBkYXRhIHNvdXJjZSwgcmV0dXJuXHJcbiAgICByZXR1cm4gbnVsbFxyXG4gIH1cclxuICAvLyBzb3J0XHJcbiAgbGV0IHNvcnRPcHRpb246IFNvcnRTZXR0aW5nT3B0aW9uXHJcbiAgaWYgKGNvbmZpZy5zb3J0T3BlbiAmJiBjb25maWcuc29ydHMpIHtcclxuICAgIHNvcnRPcHRpb24gPSBjb25maWcuc29ydHMuZmluZChcclxuICAgICAgKHNvcnQ6IFNvcnRTZXR0aW5nT3B0aW9uKSA9PiBzb3J0LnJ1bGVPcHRpb25OYW1lID09PSBzb3J0T3B0aW9uTmFtZVxyXG4gICAgKVxyXG4gICAgc29ydE9wdGlvbiA9IHNvcnRPcHRpb24gfHwgKGNvbmZpZy5zb3J0c1swXSBhcyBhbnkpXHJcbiAgICBpZiAoIXNvcnRPcHRpb24/LnJ1bGU/LlswXT8uamltdUZpZWxkTmFtZSkge1xyXG4gICAgICBzb3J0T3B0aW9uID0gdW5kZWZpbmVkXHJcbiAgICB9XHJcbiAgICBpZiAoc29ydE9wdGlvbikge1xyXG4gICAgICBjb25zdCBvcmRlckJ5cyA9IFtdXHJcbiAgICAgIHNvcnRPcHRpb24ucnVsZS5mb3JFYWNoKHNvcnREYXRhID0+IHtcclxuICAgICAgICBpZiAoc29ydERhdGEuamltdUZpZWxkTmFtZSkge1xyXG4gICAgICAgICAgb3JkZXJCeXMucHVzaChgJHtzb3J0RGF0YS5qaW11RmllbGROYW1lfSAke3NvcnREYXRhLm9yZGVyfWApXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgICBvcHRpb25zLm9yZGVyQnlGaWVsZHMgPSBvcmRlckJ5c1xyXG4gICAgfVxyXG4gIH1cclxuICAvLyBmaWx0ZXJcclxuICBpZiAoXHJcbiAgICBjb25maWcuZmlsdGVyT3BlbiAmJlxyXG4gICAgZmlsdGVyQXBwbGllZCAmJlxyXG4gICAgY29uZmlnLmZpbHRlciAmJlxyXG4gICAgY3VycmVudEZpbHRlciAmJlxyXG4gICAgY3VycmVudEZpbHRlci5zcWxcclxuICApIHtcclxuICAgIG9wdGlvbnMud2hlcmUgPSBjdXJyZW50RmlsdGVyLnNxbFxyXG4gICAgb3B0aW9ucy5zcWxFeHByZXNzaW9uID0gY3VycmVudEZpbHRlclxyXG4gIH1cclxuICAvLyBzZWFyY2hcclxuICBpZiAoY29uZmlnLnNlYXJjaE9wZW4gJiYgY29uZmlnLnNlYXJjaEZpZWxkcyAmJiBzZWFyY2hUZXh0KSB7XHJcbiAgICBjb25zdCBzcWxFeHByID0gZ2V0U1FMKHNlYXJjaFRleHQsIGNvbmZpZywgZGF0YXNvdXJjZSlcclxuICAgIGlmIChvcHRpb25zLndoZXJlKSB7IC8vIGhhcyBmaWx0ZXJcclxuICAgICAgY29uc3QgbWVyZ2VkRXhwciA9IGRhdGFTb3VyY2VVdGlscy5nZXRNZXJnZWRTUUxFeHByZXNzaW9ucyhbb3B0aW9ucy5zcWxFeHByZXNzaW9uLmFzTXV0YWJsZSh7IGRlZXA6IHRydWUgfSksIHNxbEV4cHJdLCBkYXRhc291cmNlKVxyXG4gICAgICBvcHRpb25zLndoZXJlID0gbWVyZ2VkRXhwci5zcWxcclxuICAgICAgb3B0aW9ucy5zcWxFeHByZXNzaW9uID0gSW1tdXRhYmxlKG1lcmdlZEV4cHIpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBvcHRpb25zLndoZXJlID0gc3FsRXhwci5zcWxcclxuICAgICAgb3B0aW9ucy5zcWxFeHByZXNzaW9uID0gSW1tdXRhYmxlKHNxbEV4cHIpXHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vIHBhZ2luZ1xyXG4gIGlmIChwYWdlU2l6ZSA+IDApIHtcclxuICAgIG9wdGlvbnMucGFnZSA9IHN0YXRlLnBhZ2VcclxuICAgIG9wdGlvbnMucGFnZVNpemUgPSBwYWdlU2l6ZVxyXG4gIH1cclxuXHJcbiAgLy8gQ29tcGFyZSBpZiBxdWVyeSBjaGFuZ2VkIGV4Y2VwdCBwYWdpbmdcclxuICBjb25zdCBuZXdRdWVyeSA9IG9wdGlvbnNcclxuXHJcbiAgcmV0dXJuIG5ld1F1ZXJ5XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaFN1Z2dlc3Rpb25SZWNvcmRzIChcclxuICBzZWFyY2hUZXh0OiBzdHJpbmcsXHJcbiAgY29uZmlnOiBJTUNvbmZpZyxcclxuICBkYXRhc291cmNlOiBEYXRhU291cmNlXHJcbik6IFByb21pc2U8U3VnZ2VzdGlvbltdPiB7XHJcbiAgY29uc3Qgc2VhcmNoRmllbGRzID0gY29uZmlnLnNlYXJjaEZpZWxkcy5zcGxpdCgnLCcpXHJcbiAgY29uc3QgcXVlcnlQYXJhbXM6IGFueSA9IHtcclxuICAgIHBhZ2U6IDEsXHJcbiAgICBwYWdlU2l6ZTogMTAsXHJcbiAgICBvdXRGaWVsZHM6IHNlYXJjaEZpZWxkcyxcclxuICAgIHJldHVybkRpc3RpbmN0VmFsdWVzOiB0cnVlLFxyXG4gICAgb3JkZXJCeUZpZWxkczogbnVsbFxyXG4gIH1cclxuXHJcbiAgaWYgKGNvbmZpZy5zZWFyY2hPcGVuICYmIGNvbmZpZy5zZWFyY2hGaWVsZHMpIHtcclxuICAgIGNvbnN0IHNxbEV4cHIgPSBnZXRTUUwoc2VhcmNoVGV4dCwgY29uZmlnLCBkYXRhc291cmNlLCB0cnVlKVxyXG4gICAgcXVlcnlQYXJhbXMud2hlcmUgPSBzcWxFeHByLnNxbFxyXG4gICAgcXVlcnlQYXJhbXMuc3FsRXhwcmVzc2lvbiA9IHNxbEV4cHJcclxuICB9XHJcbiAgY29uc3Qgc2VhcmNoUmVnID0gbmV3IFJlZ0V4cChgKCR7ZXNjYXBlUmVnZXgoc2VhcmNoVGV4dCl9KWAsICdnaScpXHJcbiAgcmV0dXJuIHF1ZXJ5UmVjb3JkcyhxdWVyeVBhcmFtcywgZGF0YXNvdXJjZSkudGhlbihhc3luYyByZWNvcmRzID0+IHtcclxuICAgIGxldCBzZWFyY2hTdWdnZXN0aW9uID0gW11cclxuICAgIHNlYXJjaEZpZWxkcy5mb3JFYWNoKGF0dHJOYW1lID0+IHtcclxuICAgICAgcmVjb3Jkcy5mb3JFYWNoKGVsID0+IHtcclxuICAgICAgICBjb25zdCBzdWdnZXN0aW9uSXRlbSA9IGVsPy5mZWF0dXJlPy5hdHRyaWJ1dGVzW2F0dHJOYW1lXVxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIHN1Z2dlc3Rpb25JdGVtICYmXHJcbiAgICAgICAgICAhc2VhcmNoU3VnZ2VzdGlvbi5pbmNsdWRlcyhzdWdnZXN0aW9uSXRlbSkgJiZcclxuICAgICAgICAgIHN1Z2dlc3Rpb25JdGVtLm1hdGNoKHNlYXJjaFJlZylcclxuICAgICAgICApIHtcclxuICAgICAgICAgIGNvbnN0IHN1Z2dlc3Rpb246IFN1Z2dlc3Rpb24gPSB7XHJcbiAgICAgICAgICAgIHN1Z2dlc3Rpb25IdG1sOiBnZXRTdWdnZXN0aW9uSXRlbShzdWdnZXN0aW9uSXRlbSwgc2VhcmNoVGV4dCksXHJcbiAgICAgICAgICAgIHN1Z2dlc3Rpb246IHN1Z2dlc3Rpb25JdGVtXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBzZWFyY2hTdWdnZXN0aW9uLnB1c2goc3VnZ2VzdGlvbilcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG4gICAgc2VhcmNoU3VnZ2VzdGlvbiA9IHVuaXF1ZUpzb24oc2VhcmNoU3VnZ2VzdGlvbiwgJ3N1Z2dlc3Rpb24nKVxyXG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShzZWFyY2hTdWdnZXN0aW9uKVxyXG4gIH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVzY2FwZVJlZ2V4IChzdHJpbmcpIHtcclxuICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1stW1xcXXt9KCkqKyE8PTo/LlxcL1xcXFxeJHwjXFxzLF0vZywgJ1xcXFwkJicpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVuaXF1ZUpzb24gKGpzb25BcnIsIGtleSkge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGpzb25BcnJbMF0gPyBbanNvbkFyclswXV0gOiBbXVxyXG4gIGZvciAobGV0IGkgPSAxOyBpIDwganNvbkFyci5sZW5ndGg7IGkrKykge1xyXG4gICAgY29uc3QgaXRlbSA9IGpzb25BcnJbaV1cclxuICAgIGxldCByZXBlYXQgPSBmYWxzZVxyXG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCByZXN1bHQubGVuZ3RoOyBqKyspIHtcclxuICAgICAgaWYgKGl0ZW1ba2V5XSA9PT0gcmVzdWx0W2pdW2tleV0pIHtcclxuICAgICAgICByZXBlYXQgPSB0cnVlXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKCFyZXBlYXQpIHtcclxuICAgICAgcmVzdWx0LnB1c2goaXRlbSlcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIHJlc3VsdFxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRTUUwgKFxyXG4gIHNlYXJjaFRleHQ6IHN0cmluZyxcclxuICBjb25maWc6IElNQ29uZmlnLFxyXG4gIGRhdGFzb3VyY2U6IERhdGFTb3VyY2UsXHJcbiAgZmV0Y2hTdWdnZXN0aW9uOiBib29sZWFuID0gZmFsc2VcclxuKSB7XHJcbiAgY29uc3Qgc2VhcmNoRmllbGRzID0gY29uZmlnLnNlYXJjaEZpZWxkcy5zcGxpdCgnLCcpXHJcbiAgY29uc3Qgc2VhcmNoRXhhY3QgPSBmZXRjaFN1Z2dlc3Rpb24gPyBmYWxzZSA6IGNvbmZpZy5zZWFyY2hFeGFjdFxyXG4gIGNvbnN0IGNsYXVzZU9wZXJhdG9yID0gc2VhcmNoRXhhY3QgPyBDbGF1c2VPcGVyYXRvci5TdHJpbmdPcGVyYXRvcklzIDogQ2xhdXNlT3BlcmF0b3IuU3RyaW5nT3BlcmF0b3JDb250YWluc1xyXG4gIGlmIChjb25maWcuc2VhcmNoT3BlbiAmJiBjb25maWcuc2VhcmNoRmllbGRzKSB7XHJcbiAgICBjb25zdCBjbGF1c2VzID0gc2VhcmNoRmllbGRzLm1hcChmaWVsZCA9PiB7XHJcbiAgICAgIGxldCBuZXdTZWFyY2hUZXh0OiBhbnkgPSBzZWFyY2hUZXh0XHJcbiAgICAgIGNvbnN0IGNvZGVkVmFsdWVzID0gKGRhdGFzb3VyY2UgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSk/LmdldEZpZWxkQ29kZWRWYWx1ZUxpc3QoZmllbGQpXHJcbiAgICAgIGlmIChjb2RlZFZhbHVlcykge1xyXG4gICAgICAgIGNvZGVkVmFsdWVzPy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgaWYgKG5ld1NlYXJjaFRleHQgPT09IGl0ZW0/LmxhYmVsKSB7XHJcbiAgICAgICAgICAgIG5ld1NlYXJjaFRleHQgPSBpdGVtPy52YWx1ZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGRhdGFTb3VyY2VVdGlscy5jcmVhdGVTUUxDbGF1c2UoZmllbGQsIGNsYXVzZU9wZXJhdG9yLCBuZXdTZWFyY2hUZXh0KVxyXG4gICAgfSlcclxuICAgIGNvbnN0IGNsYXVzZVNldCA9IGRhdGFTb3VyY2VVdGlscy5jcmVhdGVTUUxDbGF1c2VTZXQoQ2xhdXNlTG9naWMuT3IsIGNsYXVzZXMpIGFzIGFueVxyXG4gICAgcmV0dXJuIGRhdGFTb3VyY2VVdGlscy5jcmVhdGVTUUxFeHByZXNzaW9uKENsYXVzZUxvZ2ljLkFuZCwgW2NsYXVzZVNldF0sIGRhdGFzb3VyY2UpXHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRTdWdnZXN0aW9uSXRlbSAoc3VnZ2VzdGlvbjogc3RyaW5nLCBzZWFyY2hUZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gIGlmICghc2VhcmNoVGV4dCkgcmV0dXJuIHN1Z2dlc3Rpb25cclxuICBjb25zdCByZXBsYWNlUmVnID0gbmV3IFJlZ0V4cChgKCR7ZXNjYXBlUmVnZXgoc2VhcmNoVGV4dCl9KWAsICdnaScpXHJcbiAgcmV0dXJuIHN1Z2dlc3Rpb24ucmVwbGFjZShyZXBsYWNlUmVnLCAnPHN0cm9uZyA+JDE8L3N0cm9uZz4nKVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBxdWVyeVJlY29yZHMgKHE6IGFueSwgZHM6IERhdGFTb3VyY2UpOiBQcm9taXNlPGFueT4ge1xyXG4gIGlmICghZHMpIHJldHVybiBhd2FpdCBQcm9taXNlLnJlc29sdmUoW10pXHJcbiAgcmV0dXJuIGF3YWl0IChkcyBhcyBRdWVyaWFibGVEYXRhU291cmNlKVxyXG4gICAgLnF1ZXJ5KHEsIHsgc2NvcGU6IFF1ZXJ5U2NvcGUuSW5SdW50aW1lVmlldyB9KVxyXG4gICAgLnRoZW4oYXN5bmMgcXVlcnlSZXN1bHQgPT4gYXdhaXQgcXVlcnlSZWNvcmRzUmVzdWx0KHEsIHF1ZXJ5UmVzdWx0KSlcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gcXVlcnlSZWNvcmRzUmVzdWx0IChxLCBxdWVyeVJlc3VsdCk6IFByb21pc2U8YW55PiB7XHJcbiAgcmV0dXJuIGF3YWl0IFByb21pc2UucmVzb2x2ZShxdWVyeVJlc3VsdD8ucmVjb3JkcyB8fCBbXSlcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbXBhcmVRdWVyeU9wdGlvbnNFeGNlcHRQYWdpbmcgKFxyXG4gIHF1ZXJ5MTogYW55LFxyXG4gIHF1ZXJ5MjogYW55LFxyXG4gIGRhdGFzb3VyY2U6IFF1ZXJpYWJsZURhdGFTb3VyY2VcclxuKTogYm9vbGVhbiB7XHJcbiAgLy8gY29uc3QgaXNFcXVhbCA9IHRydWU7XHJcbiAgaWYgKCFkYXRhc291cmNlKSByZXR1cm4gZmFsc2VcclxuICBxdWVyeTEgPSBkYXRhc291cmNlLmdldFJlYWxRdWVyeVBhcmFtcyhxdWVyeTEsICdxdWVyeScpXHJcbiAgcXVlcnkyID0gZGF0YXNvdXJjZS5nZXRSZWFsUXVlcnlQYXJhbXMocXVlcnkyLCAncXVlcnknKVxyXG4gIGlmICghcXVlcnkxIHx8ICFxdWVyeTIpIHtcclxuICAgIHJldHVybiBmYWxzZVxyXG4gIH1cclxuICBkZWxldGUgcXVlcnkxLnBhZ2VcclxuICBkZWxldGUgcXVlcnkxLnBhZ2VTaXplXHJcbiAgZGVsZXRlIHF1ZXJ5MS5yZXN1bHRPZmZzZXRcclxuICBkZWxldGUgcXVlcnkxLnJlc3VsdFJlY29yZENvdW50XHJcblxyXG4gIGRlbGV0ZSBxdWVyeTIucGFnZVxyXG4gIGRlbGV0ZSBxdWVyeTIucGFnZVNpemVcclxuICBkZWxldGUgcXVlcnkyLnJlc3VsdE9mZnNldFxyXG4gIGRlbGV0ZSBxdWVyeTIucmVzdWx0UmVjb3JkQ291bnRcclxuXHJcbiAgcmV0dXJuIHV0aWxzLmlzRGVlcEVxdWFsKHF1ZXJ5MSwgcXVlcnkyKVxyXG59XHJcbiIsImltcG9ydCB7XHJcbiAgU3RhdHVzLFxyXG4gIFBhZ2VTdHlsZSxcclxuICBEU19UT09MX0gsXHJcbiAgQk9UVE9NX1RPT0xfSCxcclxuICBTZWxlY3Rpb25Nb2RlVHlwZSxcclxuICBMaXN0TGF5b3V0VHlwZSxcclxuICB0eXBlIEVsZW1lbnRTaXplLFxyXG4gIHR5cGUgRWxlbWVudFNpemVVbml0LFxyXG4gIHR5cGUgQ2FyZFNpemUsXHJcbiAgTElTVF9DQVJEX01JTl9TSVpFLFxyXG4gIFNDUk9MTF9CQVJfV0lEVEhcclxufSBmcm9tICcuLi8uLi9jb25maWcnXHJcbmltcG9ydCB7IHR5cGUgRGF0YVJlY29yZCwgRGF0YVNvdXJjZU1hbmFnZXIsIHR5cGUgSU1Vc2VEYXRhU291cmNlLCBnZXRBcHBTdG9yZSB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHsgdHlwZSBMaXN0UHJvcHMsIHR5cGUgTGlzdFN0YXRlcyB9IGZyb20gJy4uL3dpZGdldCdcclxuaW1wb3J0IHsgdHlwZSBTb3J0U2V0dGluZ09wdGlvbiB9IGZyb20gJ2ppbXUtdWkvYWR2YW5jZWQvc2V0dGluZy1jb21wb25lbnRzJ1xyXG5pbXBvcnQgeyB0eXBlIExpbmVhclVuaXQsIERpc3RhbmNlVW5pdHMsIHV0aWxzIGFzIGppbXVVdGlscyB9IGZyb20gJ2ppbXUtdWknXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNTY3JvbGxTdGFydCAoXHJcbiAgbGlzdERpdjogSFRNTERpdkVsZW1lbnQsXHJcbiAgbGFzdFNjcm9sbE9mZnNldDogbnVtYmVyXHJcbik6IGJvb2xlYW4ge1xyXG4gIGlmICghbGlzdERpdikgcmV0dXJuIHRydWVcclxuICBjb25zdCBzY3JvbGxUT3JMID0gbGFzdFNjcm9sbE9mZnNldFxyXG4gIGNvbnN0IGlzU3RhcnQgPSBzY3JvbGxUT3JMIDwgMlxyXG4gIHJldHVybiBpc1N0YXJ0XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0VxdWFsQ2FyZFNpemVCeUxpc3RMYXlvdXQgKFxyXG4gIGNhcmRTaXplMTogRWxlbWVudFNpemUsXHJcbiAgY2FyZFNpemUyOiBFbGVtZW50U2l6ZSxcclxuICBsYXlvdXRUeXBlOiBMaXN0TGF5b3V0VHlwZVxyXG4pIHtcclxuICBpZiAobGF5b3V0VHlwZSA9PT0gTGlzdExheW91dFR5cGUuQ29sdW1uKSB7XHJcbiAgICByZXR1cm4gaXNFcXVhbE51bWJlcihjYXJkU2l6ZTEud2lkdGgsIGNhcmRTaXplMi53aWR0aClcclxuICB9IGVsc2UgaWYgKGxheW91dFR5cGUgPT09IExpc3RMYXlvdXRUeXBlLlJvdykge1xyXG4gICAgcmV0dXJuIGlzRXF1YWxOdW1iZXIoY2FyZFNpemUxLmhlaWdodCwgY2FyZFNpemUyLmhlaWdodClcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIGlzRXF1YWxOdW1iZXIoY2FyZFNpemUxLndpZHRoLCBjYXJkU2l6ZTIud2lkdGgpICYmIGlzRXF1YWxOdW1iZXIoY2FyZFNpemUxLmhlaWdodCwgY2FyZFNpemUyLmhlaWdodClcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0VxdWFsTnVtYmVyIChudW0xOiBudW1iZXIsIG51bTI6IG51bWJlcik6IGJvb2xlYW4ge1xyXG4gIGlmIChNYXRoLmFicyhudW0xIC0gbnVtMikgPCAwLjAwMDEpIHtcclxuICAgIHJldHVybiB0cnVlXHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiBmYWxzZVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU91dHB1dERzIChcclxuICByZWNvcmRzOiBEYXRhUmVjb3JkW10sXHJcbiAgb3V0cHV0RHNJZDogc3RyaW5nLFxyXG4gIHVzZURzOiBJTVVzZURhdGFTb3VyY2VcclxuKSB7XHJcbiAgaWYgKCFvdXRwdXREc0lkIHx8ICF1c2VEcykgcmV0dXJuXHJcbiAgY29uc3QgZHNNYW5hZ2VyID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKVxyXG4gIGlmIChkc01hbmFnZXIuZ2V0RGF0YVNvdXJjZShvdXRwdXREc0lkKSkge1xyXG4gICAgaWYgKFxyXG4gICAgICBkc01hbmFnZXIuZ2V0RGF0YVNvdXJjZShvdXRwdXREc0lkKS5nZXREYXRhU291cmNlSnNvbigpXHJcbiAgICAgICAgLm9yaWdpbkRhdGFTb3VyY2VzWzBdLmRhdGFTb3VyY2VJZCAhPT0gdXNlRHMuZGF0YVNvdXJjZUlkXHJcbiAgICApIHtcclxuICAgICAgZHNNYW5hZ2VyLmRlc3Ryb3lEYXRhU291cmNlKG91dHB1dERzSWQpXHJcblxyXG4gICAgICBkc01hbmFnZXIuY3JlYXRlRGF0YVNvdXJjZShvdXRwdXREc0lkKS50aGVuKG9kcyA9PiB7XHJcbiAgICAgICAgb2RzLnNldFJlY29yZHMocmVjb3JkcylcclxuICAgICAgfSlcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IG9kcyA9IGRzTWFuYWdlci5nZXREYXRhU291cmNlKG91dHB1dERzSWQpXHJcbiAgICAgIG9kcy5zZXRSZWNvcmRzKHJlY29yZHMpXHJcbiAgICB9XHJcbiAgfSBlbHNlIHtcclxuICAgIGRzTWFuYWdlci5jcmVhdGVEYXRhU291cmNlKG91dHB1dERzSWQpLnRoZW4ob2RzID0+IHtcclxuICAgICAgb2RzLnNldFJlY29yZHMocmVjb3JkcylcclxuICAgIH0pXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2FyZFNpemVOdW1iZXJJbkNvbmZpZyAocHJvcHM6IExpc3RQcm9wcywgd2lkZ2V0UmVjdDogRWxlbWVudFNpemUpOiBFbGVtZW50U2l6ZSB7XHJcbiAgY29uc3QgeyBjb25maWcgfSA9IHByb3BzXHJcbiAgY29uc3QgY2FyZFNpemVJbkNvbmZpZyA9IGdldENhcmRTaXplQ29uZmlnKHByb3BzKVxyXG4gIGNvbnN0IHdpZHRoTGluZWFyVW5pdCA9IGppbXVVdGlscy50b0xpbmVhclVuaXQoY2FyZFNpemVJbkNvbmZpZy53aWR0aClcclxuICBsZXQgd2lkdGggPSBpbml0Q2FyZFNpemUoamltdVV0aWxzLnRvTGluZWFyVW5pdChjYXJkU2l6ZUluQ29uZmlnLndpZHRoKSwgd2lkZ2V0UmVjdC53aWR0aCArIGNvbmZpZy5ob3Jpem9udGFsU3BhY2UgLSBTQ1JPTExfQkFSX1dJRFRIKVxyXG4gIC8vVGhlIHdpZHRoIGluIHBlcmNlbnRhZ2UgaW5jbHVkZXMgc3BhY2UsIHRoZSB3aWR0aCBpbiBweCBkb2VzIG5vdCBpbmNsdWRlXHJcbiAgaWYgKHdpZHRoTGluZWFyVW5pdC51bml0ID09PSBEaXN0YW5jZVVuaXRzLlBFUkNFTlRBR0UpIHtcclxuICAgIHdpZHRoID0gKHdpZHRoIC0gY29uZmlnLmhvcml6b250YWxTcGFjZSkgPiAwID8gd2lkdGggLSBjb25maWcuaG9yaXpvbnRhbFNwYWNlIDogTElTVF9DQVJEX01JTl9TSVpFXHJcbiAgfVxyXG5cclxuICBsZXQgaGVpZ2h0ID0gaW5pdENhcmRTaXplKGppbXVVdGlscy50b0xpbmVhclVuaXQoY2FyZFNpemVJbkNvbmZpZy5oZWlnaHQpLCB3aWRnZXRSZWN0LmhlaWdodClcclxuICBpZiAoY29uZmlnLmtlZXBBc3BlY3RSYXRpbyAmJiBjb25maWc/LmxheW91dFR5cGUgPT09IExpc3RMYXlvdXRUeXBlLkdSSUQpIHtcclxuICAgIGhlaWdodCA9IHdpZHRoICogY29uZmlnPy5ncmlkSXRlbVNpemVSYXRpb1xyXG4gIH1cclxuICBjb25zdCBjYXJkU2l6ZSA9IHtcclxuICAgIHdpZHRoOiB3aWR0aCxcclxuICAgIGhlaWdodDogaGVpZ2h0XHJcbiAgfVxyXG4gIHJldHVybiBjYXJkU2l6ZVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2FyZFNpemVDb25maWcgKHByb3BzOiBMaXN0UHJvcHMpOiBDYXJkU2l6ZSB7XHJcbiAgY29uc3QgeyBjb25maWcsIGJ1aWxkZXJTdGF0dXMsIGJyb3dzZXJTaXplTW9kZSB9ID0gcHJvcHNcclxuICBsZXQgY2FyZENvbmZpZ3MgPSBjb25maWc/LmFzTXV0YWJsZSh7IGRlZXA6IHRydWUgfSkuY2FyZENvbmZpZ3NbYnVpbGRlclN0YXR1c11cclxuICBpZiAoIWNhcmRDb25maWdzIHx8ICFjYXJkQ29uZmlncy5jYXJkU2l6ZSkge1xyXG4gICAgY2FyZENvbmZpZ3MgPSBjb25maWc/LmFzTXV0YWJsZSh7IGRlZXA6IHRydWUgfSkuY2FyZENvbmZpZ3NbU3RhdHVzLlJlZ3VsYXJdXHJcbiAgfVxyXG4gIGxldCBjYXJkU2l6ZUluQ29uZmlnID0gY2FyZENvbmZpZ3M/LmNhcmRTaXplPy5bYnJvd3NlclNpemVNb2RlXVxyXG4gIGlmICghY2FyZFNpemVJbkNvbmZpZykge1xyXG4gICAgY2FyZFNpemVJbkNvbmZpZyA9IGNhcmRDb25maWdzLmNhcmRTaXplW09iamVjdC5rZXlzKGNhcmRDb25maWdzLmNhcmRTaXplKVswXV1cclxuICB9XHJcbiAgcmV0dXJuIGNhcmRTaXplSW5Db25maWdcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldERlZmF1bHRNaW5MaXN0U2l6ZSAocHJvcHM6IExpc3RQcm9wcyk6IEVsZW1lbnRTaXplIHtcclxuICBjb25zdCBjYXJkU2l6ZUluQ29uZmlnID0gZ2V0Q2FyZFNpemVDb25maWcocHJvcHMpXHJcbiAgY29uc3QgbGlzdE1pblNpemUgPSB7XHJcbiAgICB3aWR0aDogTElTVF9DQVJEX01JTl9TSVpFLFxyXG4gICAgaGVpZ2h0OiBMSVNUX0NBUkRfTUlOX1NJWkVcclxuICB9XHJcbiAgY29uc3QgY2FyZFNpemVVbml0ID0ge1xyXG4gICAgd2lkdGg6IGppbXVVdGlscy50b0xpbmVhclVuaXQoY2FyZFNpemVJbkNvbmZpZy53aWR0aCksXHJcbiAgICBoZWlnaHQ6IGppbXVVdGlscy50b0xpbmVhclVuaXQoY2FyZFNpemVJbkNvbmZpZy5oZWlnaHQpXHJcbiAgfVxyXG4gIGlmIChjYXJkU2l6ZVVuaXQud2lkdGgudW5pdCA9PT0gRGlzdGFuY2VVbml0cy5QRVJDRU5UQUdFKSB7XHJcbiAgICBsaXN0TWluU2l6ZS53aWR0aCA9IChMSVNUX0NBUkRfTUlOX1NJWkUgKyAzMCkgLyBjYXJkU2l6ZVVuaXQud2lkdGguZGlzdGFuY2UgKiAxMDBcclxuICB9XHJcbiAgaWYgKGNhcmRTaXplVW5pdC5oZWlnaHQudW5pdCA9PT0gRGlzdGFuY2VVbml0cy5QRVJDRU5UQUdFKSB7XHJcbiAgICBsaXN0TWluU2l6ZS5oZWlnaHQgPSAoTElTVF9DQVJEX01JTl9TSVpFICsgMzApIC8gY2FyZFNpemVVbml0LmhlaWdodC5kaXN0YW5jZSAqIDEwMFxyXG4gIH1cclxuICByZXR1cm4gbGlzdE1pblNpemVcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldENhcmRTaXplV2lkdGhVbml0SW5Db25maWcgKHByb3BzOiBMaXN0UHJvcHMpOiBFbGVtZW50U2l6ZVVuaXQge1xyXG4gIGNvbnN0IHsgY29uZmlnIH0gPSBwcm9wc1xyXG4gIGNvbnN0IGNhcmRTaXplSW5Db25maWcgPSBnZXRDYXJkU2l6ZUNvbmZpZyhwcm9wcylcclxuICBjb25zdCB3aWR0aCA9IGppbXVVdGlscy50b0xpbmVhclVuaXQoY2FyZFNpemVJbkNvbmZpZy53aWR0aClcclxuXHJcbiAgaWYgKHdpZHRoLnVuaXQgPT09IERpc3RhbmNlVW5pdHMuUEVSQ0VOVEFHRSkge1xyXG4gICAgd2lkdGguZGlzdGFuY2UgPSAod2lkdGguZGlzdGFuY2UgLSBjb25maWcuaG9yaXpvbnRhbFNwYWNlKSA+IDAgPyB3aWR0aC5kaXN0YW5jZSAtIGNvbmZpZy5ob3Jpem9udGFsU3BhY2UgOiBMSVNUX0NBUkRfTUlOX1NJWkVcclxuICB9XHJcblxyXG4gIGNvbnN0IGNhcmRTaXplV2lkdGhVbml0ID0ge1xyXG4gICAgd2lkdGg6IHdpZHRoLFxyXG4gICAgaGVpZ2h0OiBqaW11VXRpbHMudG9MaW5lYXJVbml0KGNhcmRTaXplSW5Db25maWcuaGVpZ2h0KVxyXG4gIH1cclxuICByZXR1cm4gY2FyZFNpemVXaWR0aFVuaXRcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGluaXRDYXJkU2l6ZSAoc2l6ZVVuaXQ6IExpbmVhclVuaXQsIHdpZGdldFNpemU6IG51bWJlcik6IG51bWJlciB7XHJcbiAgaWYgKHNpemVVbml0LnVuaXQgPT09IERpc3RhbmNlVW5pdHMuUEVSQ0VOVEFHRSkge1xyXG4gICAgcmV0dXJuIChzaXplVW5pdC5kaXN0YW5jZSAvIDEwMCkgKiB3aWRnZXRTaXplXHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiBzaXplVW5pdC5kaXN0YW5jZVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFBhZ2VTaXplIChcclxuICB3aWRnZXRSZWN0OiBFbGVtZW50U2l6ZSxcclxuICBsaXN0SGVpZ2h0OiBudW1iZXIsXHJcbiAgcHJvcHM6IExpc3RQcm9wcyxcclxuICBjb2x1bW5Db3VudDogbnVtYmVyXHJcbik6IG51bWJlciB7XHJcbiAgY29uc3QgY2FyZFNpemUgPSBnZXRDYXJkU2l6ZU51bWJlckluQ29uZmlnKHByb3BzLCB3aWRnZXRSZWN0KVxyXG4gIGNvbnN0IHsgY29uZmlnLCBpc0hlaWdodEF1dG8sIGlzV2lkdGhBdXRvIH0gPSBwcm9wc1xyXG4gIGxldCBwYWdlU2l6ZVxyXG4gIGlmIChjb25maWcucGFnZVN0eWxlID09PSBQYWdlU3R5bGUuU2Nyb2xsKSB7XHJcbiAgICBpZiAoIXdpZGdldFJlY3QpIHtcclxuICAgICAgcmV0dXJuIDBcclxuICAgIH1cclxuICAgIHN3aXRjaCAoY29uZmlnPy5sYXlvdXRUeXBlKSB7XHJcbiAgICAgIGNhc2UgTGlzdExheW91dFR5cGUuUm93OlxyXG4gICAgICAgIGlmICh3aWRnZXRSZWN0LmhlaWdodCA9PT0gMCkgcmV0dXJuIDBcclxuICAgICAgICBpZiAoaXNIZWlnaHRBdXRvKSB7XHJcbiAgICAgICAgICBsaXN0SGVpZ2h0ID0gZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHRcclxuICAgICAgICB9XHJcbiAgICAgICAgcGFnZVNpemUgPSBNYXRoLmNlaWwoKGxpc3RIZWlnaHQgKyBjb25maWcuc3BhY2UpIC8gKGNhcmRTaXplLmhlaWdodCArIGNvbmZpZy5zcGFjZSkpICsgMVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgTGlzdExheW91dFR5cGUuQ29sdW1uOlxyXG4gICAgICAgIGlmICh3aWRnZXRSZWN0LndpZHRoID09PSAwKSByZXR1cm4gMFxyXG4gICAgICAgIGxldCBsaXN0V2lkdGggPSB3aWRnZXRSZWN0LndpZHRoXHJcbiAgICAgICAgaWYgKGlzV2lkdGhBdXRvKSB7XHJcbiAgICAgICAgICBsaXN0V2lkdGggPSBkb2N1bWVudC5ib2R5LnNjcm9sbFdpZHRoXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHBhZ2VTaXplID0gTWF0aC5jZWlsKChsaXN0V2lkdGggKyBjb25maWcuc3BhY2UpIC8gKGNhcmRTaXplLndpZHRoICsgY29uZmlnLnNwYWNlKSkgKyAxXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSBMaXN0TGF5b3V0VHlwZS5HUklEOlxyXG4gICAgICAgIGlmICh3aWRnZXRSZWN0LmhlaWdodCA9PT0gMCkgcmV0dXJuIDBcclxuICAgICAgICBpZiAoaXNIZWlnaHRBdXRvKSB7XHJcbiAgICAgICAgICBsaXN0SGVpZ2h0ID0gZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHRcclxuICAgICAgICB9XHJcbiAgICAgICAgcGFnZVNpemUgPSBNYXRoLmNlaWwoKGxpc3RIZWlnaHQgKyBjb25maWc/LnZlcnRpY2FsU3BhY2UpIC8gKGNhcmRTaXplLmhlaWdodCArIGNvbmZpZy5zcGFjZSkpICogY29sdW1uQ291bnRcclxuICAgICAgICBicmVha1xyXG4gICAgfVxyXG4gICAgaWYgKGNvbmZpZy5uYXZpZ2F0b3JPcGVuKSB7XHJcbiAgICAgIHBhZ2VTaXplID0gTWF0aC5tYXgocGFnZVNpemUsIGNvbmZpZy5zY3JvbGxTdGVwKVxyXG4gICAgfVxyXG4gIH0gZWxzZSB7XHJcbiAgICBwYWdlU2l6ZSA9IGNvbmZpZy5pdGVtc1BlclBhZ2VcclxuICB9XHJcbiAgcmV0dXJuIHBhZ2VTaXplXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRCb3R0b21Ub29sSCAoXHJcbiAgcGFnaW5hdG9yRGl2OiBIVE1MRGl2RWxlbWVudCxcclxuICBzaG93Qm90dG9tVG9vbHM6IGJvb2xlYW5cclxuKTogbnVtYmVyIHtcclxuICBsZXQgYm90dG9tVG9vbEggPSBCT1RUT01fVE9PTF9IXHJcbiAgaWYgKHBhZ2luYXRvckRpdikge1xyXG4gICAgYm90dG9tVG9vbEggPSBwYWdpbmF0b3JEaXYuY2xpZW50SGVpZ2h0XHJcbiAgfVxyXG4gIGJvdHRvbVRvb2xIID0gc2hvd0JvdHRvbVRvb2xzID8gYm90dG9tVG9vbEggOiAwXHJcbiAgcmV0dXJuIGJvdHRvbVRvb2xIXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRMaXN0SGVpZ2h0IChcclxuICB3aWRnZXRSZWN0LFxyXG4gIGJvdHRvbVRvb2xIOiBudW1iZXIsXHJcbiAgc2hvd1RvcFRvb2w6IGJvb2xlYW5cclxuKTogbnVtYmVyIHtcclxuICBjb25zdCBkc1Rvb2xIID0gc2hvd1RvcFRvb2wgPyBEU19UT09MX0ggOiAwXHJcbiAgaWYgKCF3aWRnZXRSZWN0KSByZXR1cm4gMFxyXG4gIGNvbnN0IGhlaWdodCA9IHdpZGdldFJlY3QuaGVpZ2h0IC0gZHNUb29sSCAtIGJvdHRvbVRvb2xIXHJcbiAgcmV0dXJuIGhlaWdodCA8IDAgPyAwIDogaGVpZ2h0XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzaG93Qm90dG9tVG9vbHMgKHByb3BzOiBMaXN0UHJvcHMsIHN0YXRlOiBMaXN0U3RhdGVzKTogYm9vbGVhbiB7XHJcbiAgY29uc3QgeyBjb25maWcgfSA9IHByb3BzXHJcbiAgY29uc3QgeyBkYXRhc291cmNlIH0gPSBzdGF0ZVxyXG4gIHJldHVybiAoXHJcbiAgICAhIWRhdGFzb3VyY2UgJiZcclxuICAgICEoY29uZmlnLnBhZ2VTdHlsZSA9PT0gUGFnZVN0eWxlLlNjcm9sbCAmJiAhY29uZmlnLm5hdmlnYXRvck9wZW4pXHJcbiAgKVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2hvd1RvcFRvb2xzIChwcm9wczogTGlzdFByb3BzKTogYm9vbGVhbiB7XHJcbiAgcmV0dXJuIChcclxuICAgIGNoZWNrSXNTaG93TGlzdFRvb2xzT25seShwcm9wcykgfHwgY2hlY2tJc1Nob3dEYXRhQWN0aW9uKHByb3BzKVxyXG4gIClcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrSXNTaG93TGlzdFRvb2xzT25seSAocHJvcHM6IExpc3RQcm9wcyk6IGJvb2xlYW4ge1xyXG4gIHJldHVybiAoXHJcbiAgICBzaG93U29ydChwcm9wcykgfHxcclxuICAgIHNob3dEaXNwbGF5U2VsZWN0ZWRPbmx5KHByb3BzKSB8fFxyXG4gICAgc2hvd0NsZWFyU2VsZWN0ZWQocHJvcHMpIHx8XHJcbiAgICBzaG93RmlsdGVyKHByb3BzKSB8fFxyXG4gICAgc2hvd1NlYXJjaChwcm9wcylcclxuICApXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0RzQ29uZmlndXJlZCAocHJvcHM6IExpc3RQcm9wcyk6IGJvb2xlYW4ge1xyXG4gIGNvbnN0IHsgdXNlRGF0YVNvdXJjZXMgfSA9IHByb3BzXHJcbiAgcmV0dXJuICEhdXNlRGF0YVNvdXJjZXMgJiYgISF1c2VEYXRhU291cmNlc1swXVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tJc1Nob3dEYXRhQWN0aW9uIChwcm9wczogTGlzdFByb3BzKTogYm9vbGVhbiB7XHJcbiAgY29uc3QgeyBpZCB9ID0gcHJvcHNcclxuICBjb25zdCBhcHBDb25maWcgPSBnZXRBcHBTdG9yZSgpPy5nZXRTdGF0ZSgpPy5hcHBDb25maWdcclxuICBjb25zdCB3aWRnZXRKc29uID0gYXBwQ29uZmlnPy53aWRnZXRzPy5baWRdXHJcbiAgY29uc3QgZW5hYmxlRGF0YUFjdGlvbiA9IHdpZGdldEpzb24/LmVuYWJsZURhdGFBY3Rpb24gPT09IHVuZGVmaW5lZCA/IHRydWUgOiB3aWRnZXRKc29uPy5lbmFibGVEYXRhQWN0aW9uXHJcbiAgcmV0dXJuIGVuYWJsZURhdGFBY3Rpb24gJiYgaXNEc0NvbmZpZ3VyZWQocHJvcHMpXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzaG93U29ydCAocHJvcHM6IExpc3RQcm9wcyk6IGJvb2xlYW4ge1xyXG4gIGNvbnN0IHsgY29uZmlnIH0gPSBwcm9wc1xyXG4gIGlmICghY29uZmlnLnNvcnRPcGVuIHx8ICFjb25maWcuc29ydHMgfHwgY29uZmlnLnNvcnRzLmxlbmd0aCA8IDEpIHJldHVybiBmYWxzZVxyXG4gIGNvbnN0IHNvcnRzID0gY29uZmlnLnNvcnRzXHJcbiAgbGV0IGlzVmFsaWQgPSBmYWxzZVxyXG4gIHNvcnRzLnNvbWUoKHNvcnQ6IFNvcnRTZXR0aW5nT3B0aW9uKSA9PiB7XHJcbiAgICBzb3J0LnJ1bGUgJiZcclxuICAgICAgc29ydC5ydWxlLnNvbWUoc29ydERhdGEgPT4ge1xyXG4gICAgICAgIGlmIChzb3J0RGF0YSAmJiAhIXNvcnREYXRhLmppbXVGaWVsZE5hbWUpIHtcclxuICAgICAgICAgIGlzVmFsaWQgPSB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpc1ZhbGlkXHJcbiAgICAgIH0pXHJcbiAgICByZXR1cm4gaXNWYWxpZFxyXG4gIH0pXHJcbiAgcmV0dXJuIGlzVmFsaWRcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNob3dTZWFyY2ggKHByb3BzOiBMaXN0UHJvcHMpOiBib29sZWFuIHtcclxuICBjb25zdCB7IGNvbmZpZyB9ID0gcHJvcHNcclxuICByZXR1cm4gY29uZmlnLnNlYXJjaE9wZW4gJiYgY29uZmlnLnNlYXJjaEZpZWxkcyAmJiBjb25maWcuc2VhcmNoRmllbGRzICE9PSAnJ1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2hvd0ZpbHRlciAocHJvcHM6IExpc3RQcm9wcyk6IGJvb2xlYW4ge1xyXG4gIGNvbnN0IHsgY29uZmlnIH0gPSBwcm9wc1xyXG4gIHJldHVybiBjb25maWcuZmlsdGVyT3BlbiAmJiAhIWNvbmZpZy5maWx0ZXJcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNob3dEaXNwbGF5U2VsZWN0ZWRPbmx5IChwcm9wczogTGlzdFByb3BzKTogYm9vbGVhbiB7XHJcbiAgY29uc3QgeyBjb25maWcgfSA9IHByb3BzXHJcbiAgcmV0dXJuIChcclxuICAgIGNvbmZpZy5zaG93U2VsZWN0ZWRPbmx5T3BlbiAmJlxyXG4gICAgY29uZmlnLmNhcmRDb25maWdzW1N0YXR1cy5TZWxlY3RlZF0uc2VsZWN0aW9uTW9kZSAhPT0gU2VsZWN0aW9uTW9kZVR5cGUuTm9uZVxyXG4gIClcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNob3dDbGVhclNlbGVjdGVkIChwcm9wczogTGlzdFByb3BzKTogYm9vbGVhbiB7XHJcbiAgY29uc3QgeyBjb25maWcgfSA9IHByb3BzXHJcbiAgcmV0dXJuIChcclxuICAgIGNvbmZpZy5zaG93Q2xlYXJTZWxlY3RlZCAmJlxyXG4gICAgY29uZmlnLmNhcmRDb25maWdzW1N0YXR1cy5TZWxlY3RlZF0uc2VsZWN0aW9uTW9kZSAhPT0gU2VsZWN0aW9uTW9kZVR5cGUuTm9uZVxyXG4gIClcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGludGVyc2VjdGlvbk9ic2VydmVyIChcclxuICByZWY6IEhUTUxFbGVtZW50LFxyXG4gIHJvb3RFbGVtZW50OiBIVE1MRWxlbWVudCxcclxuICBvbkNoYW5nZT86IChpc0luOiBib29sZWFuKSA9PiB2b2lkLFxyXG4gIG9wdGlvbnM/OiBJbnRlcnNlY3Rpb25PYnNlcnZlckluaXRcclxuKSB7XHJcbiAgY29uc3Qgb3B0aW9uOiBhbnkgPSBvcHRpb25zIHx8IHsgcm9vdDogcm9vdEVsZW1lbnQgfVxyXG4gIGNvbnN0IGNhbGxiYWNrID0gZnVuY3Rpb24gKFxyXG4gICAgZW50cmllczogSW50ZXJzZWN0aW9uT2JzZXJ2ZXJFbnRyeVtdLFxyXG4gICAgb2JzZXJ2ZXI6IEludGVyc2VjdGlvbk9ic2VydmVyXHJcbiAgKSB7XHJcbiAgICBjb25zdCBpc0luID0gZW50cmllc1swXS5pbnRlcnNlY3Rpb25SYXRpbyA+IDBcclxuICAgIG9uQ2hhbmdlICYmIG9uQ2hhbmdlKGlzSW4pXHJcbiAgfVxyXG4gIGNvbnN0IG9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKGNhbGxiYWNrLCBvcHRpb24pXHJcbiAgb2JzZXJ2ZXIub2JzZXJ2ZShyZWYpXHJcbiAgcmV0dXJuIG9ic2VydmVyXHJcbn1cclxuIiwiaW1wb3J0IHsgQmFzZVZlcnNpb25NYW5hZ2VyLCBEYXRhU291cmNlTWFuYWdlciwgZ2V0QXBwU3RvcmUsIHR5cGUgUXVlcmlhYmxlRGF0YVNvdXJjZSB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHsgdXBkYXRlU1FMRXhwcmVzc2lvbkJ5VmVyc2lvbiB9IGZyb20gJ2ppbXUtdWkvYmFzaWMvc3FsLWV4cHJlc3Npb24tcnVudGltZSdcclxuaW1wb3J0IHsgTGlzdExheW91dFR5cGUsIERpcmVjdGlvblR5cGUgfSBmcm9tICcuL2NvbmZpZydcclxuXHJcbmNvbnN0IGdldERzID0gYXN5bmMgZnVuY3Rpb24gKGZpbHRlciwgd2lkZ2V0SWQpOiBQcm9taXNlPGFueT4ge1xyXG4gIGxldCBkc1xyXG4gIGNvbnN0IGRhdGFTb3VyY2UgPSBnZXRBcHBTdG9yZSgpLmdldFN0YXRlKCk/LmFwcENvbmZpZz8ud2lkZ2V0c1t3aWRnZXRJZF1cclxuICAgID8udXNlRGF0YVNvdXJjZXM/LlswXVxyXG4gIGNvbnN0IGRzTWFuYWdlciA9IERhdGFTb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKClcclxuICBpZiAoZmlsdGVyICYmIGRhdGFTb3VyY2UpIHtcclxuICAgIGRzID0gZHNNYW5hZ2VyLmNyZWF0ZURhdGFTb3VyY2VCeVVzZURhdGFTb3VyY2UoXHJcbiAgICAgIE9iamVjdC5hc3NpZ24oe30sIGRhdGFTb3VyY2UsIHtcclxuICAgICAgICBtYWluRGF0YVNvdXJjZUlkOiBkYXRhU291cmNlLm1haW5EYXRhU291cmNlSWRcclxuICAgICAgfSksXHJcbiAgICAgICdsb2NhbElkJ1xyXG4gICAgKVxyXG4gIH1cclxuICByZXR1cm4gYXdhaXQgUHJvbWlzZS5yZXNvbHZlKGRzKVxyXG59XHJcblxyXG5jb25zdCBjaGVja0lzU2hvd0F1dG9SZWZyZXNoU2V0dGluZyA9IChkYXRhc291cmNlKTogYm9vbGVhbiA9PiB7XHJcbiAgaWYgKCFkYXRhc291cmNlKSByZXR1cm4gZmFsc2VcclxuICBjb25zdCBpbnRlcnZhbCA9IChkYXRhc291cmNlIGFzIFF1ZXJpYWJsZURhdGFTb3VyY2UpPy5nZXRBdXRvUmVmcmVzaEludGVydmFsKCkgfHwgMFxyXG4gIHJldHVybiBpbnRlcnZhbCA+IDBcclxufVxyXG5cclxuY2xhc3MgVmVyc2lvbk1hbmFnZXIgZXh0ZW5kcyBCYXNlVmVyc2lvbk1hbmFnZXIge1xyXG4gIHZlcnNpb25zID0gW1xyXG4gICAge1xyXG4gICAgICB2ZXJzaW9uOiAnMS4xLjAnLFxyXG4gICAgICBkZXNjcmlwdGlvbjogJycsXHJcbiAgICAgIHVwZ3JhZGVyOiBhc3luYyAob2xkQ29uZmlnLCBpZDogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgY29uc3QgZmlsdGVyID0gb2xkQ29uZmlnLmZpbHRlclxyXG4gICAgICAgIHJldHVybiBhd2FpdCBnZXREcyhmaWx0ZXIsIGlkKS50aGVuKGRzID0+IHtcclxuICAgICAgICAgIGxldCBuZXdDb25maWcgPSBvbGRDb25maWdcclxuICAgICAgICAgIGNvbnN0IG5ld0ZJdGVtcyA9IGZpbHRlclxyXG4gICAgICAgICAgICA/IHVwZGF0ZVNRTEV4cHJlc3Npb25CeVZlcnNpb24oZmlsdGVyLCAnMS4xLjAnLCBkcylcclxuICAgICAgICAgICAgOiBudWxsXHJcblxyXG4gICAgICAgICAgbmV3Q29uZmlnID0gbmV3Q29uZmlnLnNldCgnZmlsdGVyJywgbmV3Rkl0ZW1zKVxyXG4gICAgICAgICAgcmV0dXJuIG5ld0NvbmZpZ1xyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIHZlcnNpb246ICcxLjUuMCcsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiAnMS41LjAnLFxyXG4gICAgICB1cGdyYWRlcjogYXN5bmMgKG9sZENvbmZpZywgaWQ6IHN0cmluZykgPT4ge1xyXG4gICAgICAgIGNvbnN0IGZpbHRlciA9IG9sZENvbmZpZy5maWx0ZXJcclxuICAgICAgICByZXR1cm4gYXdhaXQgZ2V0RHMoZmlsdGVyLCBpZCkudGhlbihkcyA9PiB7XHJcbiAgICAgICAgICBsZXQgbmV3Q29uZmlnID0gb2xkQ29uZmlnXHJcbiAgICAgICAgICBpZiAodHlwZW9mIChvbGRDb25maWc/LmlzU2hvd0F1dG9SZWZyZXNoKSAhPT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzU2hvd0F1dG9SZWZyZXNoID0gY2hlY2tJc1Nob3dBdXRvUmVmcmVzaFNldHRpbmcoZHMpXHJcbiAgICAgICAgICAgIG5ld0NvbmZpZyA9IG5ld0NvbmZpZy5zZXQoJ2lzU2hvd0F1dG9SZWZyZXNoJywgaXNTaG93QXV0b1JlZnJlc2gpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gbmV3Q29uZmlnXHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgdmVyc2lvbjogJzEuOC4wJyxcclxuICAgICAgZGVzY3JpcHRpb246ICcxLjguMCcsXHJcbiAgICAgIHVwZ3JhZGVyOiBhc3luYyAob2xkQ29uZmlnLCBpZDogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgbGV0IG5ld0NvbmZpZyA9IG9sZENvbmZpZ1xyXG4gICAgICAgIGlmIChvbGRDb25maWc/LmRpcmVjdGlvbiAmJiAhb2xkQ29uZmlnPy5sYXlvdXRUeXBlKSB7XHJcbiAgICAgICAgICBjb25zdCBsYXlvdXRUeXBlID0gb2xkQ29uZmlnPy5kaXJlY3Rpb24gPT09IERpcmVjdGlvblR5cGUuSG9yaXpvbiA/IExpc3RMYXlvdXRUeXBlLkNvbHVtbiA6IExpc3RMYXlvdXRUeXBlLlJvd1xyXG4gICAgICAgICAgbmV3Q29uZmlnID0gbmV3Q29uZmlnLnNldCgnbGF5b3V0VHlwZScsIGxheW91dFR5cGUpLnNldCgna2VlcEFzcGVjdFJhdGlvJywgZmFsc2UpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXdDb25maWdcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIF1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHZlcnNpb25NYW5hZ2VyID0gbmV3IFZlcnNpb25NYW5hZ2VyKClcclxuIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX2ppbXVfY29yZV9fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9yZWFjdF9fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9qaW11X2xheW91dHNfbGF5b3V0X3J1bnRpbWVfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfamltdV91aV9fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9qaW11X3VpX2Jhc2ljX3NxbF9leHByZXNzaW9uX3J1bnRpbWVfXzsiLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHtcbiAgaWYgKHNlbGYgPT09IHZvaWQgMCkge1xuICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtcbiAgfVxuICByZXR1cm4gc2VsZjtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfZXh0ZW5kcygpIHtcbiAgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduID8gT2JqZWN0LmFzc2lnbi5iaW5kKCkgOiBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07XG4gICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG4gICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9O1xuICByZXR1cm4gX2V4dGVuZHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn0iLCJpbXBvcnQgc2V0UHJvdG90eXBlT2YgZnJvbSBcIi4vc2V0UHJvdG90eXBlT2YuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9pbmhlcml0c0xvb3NlKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG4gIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcy5wcm90b3R5cGUpO1xuICBzdWJDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBzdWJDbGFzcztcbiAgc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpO1xufSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpIHtcbiAgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307XG4gIHZhciB0YXJnZXQgPSB7fTtcbiAgdmFyIHNvdXJjZUtleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpO1xuICB2YXIga2V5LCBpO1xuICBmb3IgKGkgPSAwOyBpIDwgc291cmNlS2V5cy5sZW5ndGg7IGkrKykge1xuICAgIGtleSA9IHNvdXJjZUtleXNbaV07XG4gICAgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTtcbiAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICB9XG4gIHJldHVybiB0YXJnZXQ7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHtcbiAgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mLmJpbmQoKSA6IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7XG4gICAgby5fX3Byb3RvX18gPSBwO1xuICAgIHJldHVybiBvO1xuICB9O1xuICByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApO1xufSIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiOyIsIi8qKlxyXG4gKiBXZWJwYWNrIHdpbGwgcmVwbGFjZSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyB3aXRoIF9fd2VicGFja19yZXF1aXJlX18ucCB0byBzZXQgdGhlIHB1YmxpYyBwYXRoIGR5bmFtaWNhbGx5LlxyXG4gKiBUaGUgcmVhc29uIHdoeSB3ZSBjYW4ndCBzZXQgdGhlIHB1YmxpY1BhdGggaW4gd2VicGFjayBjb25maWcgaXM6IHdlIGNoYW5nZSB0aGUgcHVibGljUGF0aCB3aGVuIGRvd25sb2FkLlxyXG4gKiAqL1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcclxuLy8gQHRzLWlnbm9yZVxyXG5fX3dlYnBhY2tfcHVibGljX3BhdGhfXyA9IHdpbmRvdy5qaW11Q29uZmlnLmJhc2VVcmxcclxuIiwiLyoqIEBqc3gganN4ICovXHJcbmltcG9ydCB7XHJcbiAgdHlwZSBJTVN0YXRlLFxyXG4gIGNsYXNzTmFtZXMsXHJcbiAgUmVhY3QsXHJcbiAganN4LFxyXG4gIHR5cGUgQWxsV2lkZ2V0UHJvcHMsXHJcbiAgdHlwZSBEYXRhUmVjb3JkLFxyXG4gIERhdGFTb3VyY2VTdGF0dXMsXHJcbiAgQXBwTW9kZSxcclxuICB0eXBlIEJyb3dzZXJTaXplTW9kZSxcclxuICBhcHBBY3Rpb25zLFxyXG4gIERhdGFTb3VyY2VDb21wb25lbnQsXHJcbiAgTWVzc2FnZU1hbmFnZXIsXHJcbiAgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlLFxyXG4gIGdldEFwcFN0b3JlLFxyXG4gIFJlYWN0UmVzaXplRGV0ZWN0b3IsXHJcbiAgRGF0YVNvdXJjZU1hbmFnZXIsXHJcbiAgdHlwZSBJbW11dGFibGVBcnJheSxcclxuICB0eXBlIElNU3FsRXhwcmVzc2lvbixcclxuICBMYXlvdXRUeXBlLFxyXG4gIEltbXV0YWJsZSxcclxuICB0eXBlIFF1ZXJpYWJsZURhdGFTb3VyY2UsXHJcbiAgdHlwZSBJTURhdGFTb3VyY2VJbmZvLFxyXG4gIHR5cGUgRGF0YVNvdXJjZSxcclxuICB0eXBlIElNVXJsUGFyYW1ldGVycyxcclxuICBsb2Rhc2gsXHJcbiAgTGF5b3V0SXRlbVR5cGUsXHJcbiAgYXBwQ29uZmlnVXRpbHMsXHJcbiAgdXRpbHMsXHJcbiAgdHlwZSBCb3VuZGluZ0JveCxcclxuICBQYWdlTW9kZSxcclxuICBDT05TVEFOVFMsXHJcbiAgZGVmYXVsdE1lc3NhZ2VzIGFzIGppbXVDb3JlRGVmYXVsdE1lc3NhZ2VcclxufSBmcm9tICdqaW11LWNvcmUnXHJcblxyXG5pbXBvcnQge1xyXG4gIFdpZGdldFBsYWNlaG9sZGVyLFxyXG4gIEJ1dHRvbixcclxuICBQb3BwZXIsXHJcbiAgRGF0YUFjdGlvbkRyb3BEb3duLFxyXG4gIGRlZmF1bHRNZXNzYWdlcyBhcyBqaW11VUlEZWZhdWx0TWVzc2FnZXMsXHJcbiAgQWxlcnQsXHJcbiAgRGlzdGFuY2VVbml0cyxcclxuICBUZXh0QWxpZ25WYWx1ZVxyXG59IGZyb20gJ2ppbXUtdWknXHJcblxyXG5pbXBvcnQge1xyXG4gIHR5cGUgSU1Db25maWcsXHJcbiAgU2VsZWN0aW9uTW9kZVR5cGUsXHJcbiAgU3RhdHVzLFxyXG4gIExJU1RfQ0FSRF9NSU5fU0laRSxcclxuICBQYWdlU3R5bGUsXHJcbiAgdHlwZSBDYXJkU2l6ZSxcclxuICB0eXBlIFN1Z2dlc3Rpb24sXHJcbiAgRFNfVE9PTF9ILFxyXG4gIExJU1RfVE9PTF9NSU5fU0laRV9OT19EQVRBX0FDVElPTixcclxuICBMSVNUX1RPT0xfTUlOX1NJWkVfREFUQV9BQ1RJT04sXHJcbiAgdHlwZSBMaXN0RGl2U2l6ZSxcclxuICBMaXN0TGF5b3V0VHlwZSxcclxuICB0eXBlIEVsZW1lbnRTaXplLFxyXG4gIFNDUk9MTF9CQVJfV0lEVEhcclxufSBmcm9tICcuLi9jb25maWcnXHJcblxyXG5pbXBvcnQge1xyXG4gIExheW91dEVudHJ5LFxyXG4gIHNlYXJjaFV0aWxzLFxyXG4gIExheW91dEl0ZW1TaXplTW9kZXNcclxufSBmcm9tICdqaW11LWxheW91dHMvbGF5b3V0LXJ1bnRpbWUnXHJcblxyXG5pbXBvcnQge1xyXG4gIGdldFF1ZXJ5T3B0aW9ucyxcclxuICBmZXRjaFN1Z2dlc3Rpb25SZWNvcmRzLFxyXG4gIGNvbXBhcmVRdWVyeU9wdGlvbnNFeGNlcHRQYWdpbmdcclxufSBmcm9tICcuL3V0aWxzL2xpc3Qtc2VydmljZSdcclxuXHJcbmltcG9ydCB7XHJcbiAgZ2V0VG9vbHNQb3BwZXJTdHlsZSxcclxuICBnZXRTZWFyY2hUb29sU3R5bGUsXHJcbiAgZ2V0U3R5bGUsXHJcbiAgbGlzdFN0eWxlLFxyXG4gIGdldFRvcFRvb2xTdHlsZVxyXG59IGZyb20gJy4vc3R5bGVzL3N0eWxlJ1xyXG5cclxuaW1wb3J0IExpc3RDYXJkRWRpdG9yIGZyb20gJy4vY29tcG9uZW50cy9saXN0LWNhcmQtZWRpdG9yJ1xyXG5pbXBvcnQgTGlzdENhcmRWaWV3ZXIgZnJvbSAnLi9jb21wb25lbnRzL2xpc3QtY2FyZC12aWV3ZXInXHJcbmltcG9ydCBkZWZhdWx0TWVzc2FnZXMgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcclxuaW1wb3J0IFNlYXJjaEJveCBmcm9tICcuL2NvbXBvbmVudHMvc2VhcmNoLWJveCdcclxuaW1wb3J0IHsgVmFyaWFibGVTaXplTGlzdCBhcyBMaXN0LCBWYXJpYWJsZVNpemVHcmlkIGFzIEdyaWQgfSBmcm9tICdyZWFjdC13aW5kb3cnXHJcbmltcG9ydCB7IGZvcndhcmRSZWYgfSBmcm9tICdyZWFjdCdcclxuaW1wb3J0IE15RHJvcERvd24sIHsgdHlwZSBNeURyb3BEb3duSXRlbSB9IGZyb20gJy4vY29tcG9uZW50cy9teS1kcm9wZG93bidcclxuaW1wb3J0IEZpbHRlclBpY2tlciBmcm9tICcuL2NvbXBvbmVudHMvZmlsdGVyLXBpY2tlcidcclxuaW1wb3J0IHsgTGlzdEJvdHRvbVRvb2xzIH0gZnJvbSAnLi9jb21wb25lbnRzL2JvdHRvbS10b29scydcclxuaW1wb3J0IHsgdmVyc2lvbk1hbmFnZXIgfSBmcm9tICcuLi92ZXJzaW9uLW1hbmFnZXInXHJcbmltcG9ydCAqIGFzIGxpc3RVdGlscyBmcm9tICcuL3V0aWxzL3V0aWxzJ1xyXG5pbXBvcnQgeyBNZW51T3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL2VkaXRvci9tZW51J1xyXG5pbXBvcnQgeyBTZWFyY2hPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZWRpdG9yL3NlYXJjaCdcclxuaW1wb3J0IHsgU2hvd1NlbGVjdGlvbk91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9lZGl0b3Ivc2hvdy1zZWxlY3Rpb24nXHJcbmltcG9ydCB7IFRyYXNoQ2hlY2tPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZWRpdG9yL3RyYXNoLWNoZWNrJ1xyXG5pbXBvcnQgeyBXYXJuaW5nT3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL3N1Z2dlc3RlZC93YXJuaW5nJ1xyXG5pbXBvcnQgd2lkZ2V0UHJpbnRPdXRsaW5lZCBmcm9tICdqaW11LWljb25zL3N2Zy9vdXRsaW5lZC9icmFuZC93aWRnZXQtbGlzdC5zdmcnXHJcblxyXG5jb25zdCBkZWZhdWx0UmVjb3Jkc0l0ZW0gPSB7IGZha2U6IHRydWUgfSBhcyBhbnlcclxuY29uc3QgTUVTU0FHRVMgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0TWVzc2FnZXMsIGppbXVVSURlZmF1bHRNZXNzYWdlcywgamltdUNvcmVEZWZhdWx0TWVzc2FnZSlcclxuY29uc3QgeyBTRUxFQ1RJT05fREFUQV9WSUVXX0lEIH0gPSBDT05TVEFOVFNcclxuLy8gY29uc3Qgb3ZlclNwZWVkID0gMS41O1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBzZWxlY3Rpb25Jc1NlbGY6IGJvb2xlYW5cclxuICBzZWxlY3Rpb25Jc0luU2VsZjogYm9vbGVhblxyXG4gIHNlbGVjdGlvblN0YXR1czogU3RhdHVzXHJcbiAgYXBwTW9kZTogQXBwTW9kZVxyXG4gIGJyb3dzZXJTaXplTW9kZTogQnJvd3NlclNpemVNb2RlXHJcbiAgYnVpbGRlclN0YXR1czogU3RhdHVzXHJcbiAgaXNSVEw6IGJvb2xlYW5cclxuICBzdWJMYXlvdXRUeXBlOiBMYXlvdXRUeXBlXHJcbiAgbGVmdDogbnVtYmVyIHwgc3RyaW5nXHJcbiAgdG9wOiBudW1iZXIgfCBzdHJpbmdcclxuICBpc1dpZHRoQXV0bzogYm9vbGVhblxyXG4gIGlzSGVpZ2h0QXV0bzogYm9vbGVhblxyXG4gIHNob3dMb2FkaW5nOiBib29sZWFuXHJcbiAgcXVlcnlPYmplY3Q6IElNVXJsUGFyYW1ldGVyc1xyXG4gIGJvdW5kaW5nQm94OiBCb3VuZGluZ0JveFxyXG4gIGhlaWdodExheW91dEl0ZW1TaXplTW9kZXM6IExheW91dEl0ZW1TaXplTW9kZXNcclxuICBwYXJlbnRTaXplOiBFbGVtZW50U2l6ZVxyXG4gIHBhZ2VNb2RlOiBQYWdlTW9kZVxyXG59XHJcbmludGVyZmFjZSBCb2R5U2l6ZSB7XHJcbiAgc2Nyb2xsV2lkdGg6IG51bWJlclxyXG4gIHNjcm9sbEhlaWdodDogbnVtYmVyXHJcbiAgY2xpZW50V2lkdGg6IG51bWJlclxyXG4gIGNsaWVudEhlaWdodDogbnVtYmVyXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIExpc3RQcm9wcyA9IEFsbFdpZGdldFByb3BzPElNQ29uZmlnPiAmIFByb3BzXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIExpc3RTdGF0ZXMge1xyXG4gIExheW91dEVudHJ5OiBhbnlcclxuICBwYWdlOiBudW1iZXJcclxuICBzb3J0T3B0aW9uTmFtZT86IHN0cmluZ1xyXG4gIHNlYXJjaFRleHQ6IHN0cmluZ1xyXG4gIGN1cnJlbnRGaWx0ZXI6IElNU3FsRXhwcmVzc2lvblxyXG4gIGZpbHRlckFwcGxpZWQ6IGJvb2xlYW5cclxuICBjdXJyZW50Q2FyZFNpemU6IEVsZW1lbnRTaXplXHJcbiAgZm9yY2VTaG93TWFzazogYm9vbGVhblxyXG4gIHNob3dMaXN0OiBib29sZWFuXHJcbiAgc2hvd1NlbGVjdGlvbk9ubHk6IGJvb2xlYW5cclxuICB3aWRnZXRSZWN0OiB7XHJcbiAgICB3aWR0aDogbnVtYmVyXHJcbiAgICBoZWlnaHQ6IG51bWJlclxyXG4gIH1cclxuICBoaWRlQ2FyZFRvb2w6IGJvb2xlYW5cclxuICBzY3JvbGxTdGF0dXM6ICdzdGFydCcgfCAnZW5kJyB8ICdtaWQnXHJcbiAgZGF0YXNvdXJjZTogRGF0YVNvdXJjZVxyXG4gIGhvdmVySW5kZXg6IG51bWJlclxyXG4gIGlzU2Nyb2xsaW5nOiBib29sZWFuXHJcbiAgaXNTY3JvbGxTcGVlZE92ZXI6IGJvb2xlYW5cclxuICBpc1Jlc2l6aW5nQ2FyZDogYm9vbGVhblxyXG4gIHNlYXJjaFN1Z2dlc3Rpb246IFN1Z2dlc3Rpb25bXVxyXG4gIGlzU2VhcmNoQm94VmlzaWJsZTogYm9vbGVhblxyXG4gIGlzT3BlblRvcFRvb2xzUG9wcGVyOiBib29sZWFuXHJcbiAgbGF0ZXN0VXBkYXRlVGltZTogbnVtYmVyXHJcbiAgYXV0b1JlZnJlc2hMb2FkaW5nU3RyaW5nOiBzdHJpbmdcclxuICBzaG93TG9hZGluZzogYm9vbGVhblxyXG4gIGxpc3REaXZTaXplOiBMaXN0RGl2U2l6ZVxyXG4gIHRvb2xzRGl2V2lkdGg6IG51bWJlclxyXG4gIGxpc3REaXZCb3VuZFJlY3Q6IERPTVJlY3RcclxuICBpc1Njcm9sbEVuZDogYm9vbGVhblxyXG4gIGlzTW91bnQ6IGJvb2xlYW5cclxuICBjcmVhdGVEYXRhU291cmNlRmFpbGVkOiBib29sZWFuXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBXaWRnZXQgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PExpc3RQcm9wcywgTGlzdFN0YXRlcz4ge1xyXG4gIHN0YXRpYyB2ZXJzaW9uTWFuYWdlciA9IHZlcnNpb25NYW5hZ2VyXHJcbiAgbGFzdFNlbGVjdGVkSW5kZXg6IG51bWJlclxyXG4gIGlzTXlTZWxlY3RlZDogYm9vbGVhblxyXG4gIGxhc3RTZWxlY3RlZFJlY29yZElkczogc3RyaW5nW11cclxuICBsaXN0UmVmOiBhbnlcclxuICBsaXN0T3V0RGl2UmVmOiBIVE1MRGl2RWxlbWVudFxyXG4gIHBhZ2luYXRvckRpdjogUmVhY3QuUmVmT2JqZWN0PEhUTUxEaXZFbGVtZW50PlxyXG4gIGxpc3RUb3BSaWdodFRvb2xzRGl2OiBSZWFjdC5SZWZPYmplY3Q8SFRNTERpdkVsZW1lbnQ+XHJcbiAgcmVjb3JkczogYW55W11cclxuICBxdWVyeVN0YXR1czogRGF0YVNvdXJjZVN0YXR1c1xyXG4gIHRvdGFsQ291bnQ6IG51bWJlclxyXG4gIGxhc3RRdWVyeVN0YXJ0OiBudW1iZXJcclxuICBpc1N3aXRjaFBhZ2U6IGJvb2xlYW5cclxuICBuZWVkU2Nyb2xsOiBib29sZWFuXHJcbiAgbGFzdFBhZ2VTaXplOiBudW1iZXJcclxuICBuZWVkUmVmcmVzaExpc3RPbkxpc3RSZW5kZXJlZDogYm9vbGVhblxyXG4gIGxpc3RWaXNpYmxlU3RhcnRJbmRleDogbnVtYmVyXHJcbiAgbGlzdFZpc2libGVTdG9wSW5kZXg6IG51bWJlclxyXG4gIGlubmVyRWxlbWVudFR5cGU6IFJlYWN0LkVsZW1lbnRUeXBlXHJcbiAgbGFzdFNwYWNlOiBudW1iZXJcclxuICBsYXN0UXVlcnk6IGFueVxyXG4gIHN1Z2dlc3Rpb25zUXVlcnlUaW1lb3V0OiBhbnlcclxuICByZWZlcmVuY2U6IEhUTUxEaXZFbGVtZW50XHJcbiAgc2hvd1BvcHBlclRpbWVPdXQ6IGFueVxyXG4gIGlzRmlyc3RMb2FkOiBib29sZWFuID0gdHJ1ZVxyXG4gIGF1dG9SZWZyZXNoTG9hZGluZ1RpbWU6IGFueVxyXG4gIHJlc2V0QXV0b1JlZnJlc2hUaW1lOiBhbnlcclxuICBzZXRQYWdlVGltZW91dDogYW55XHJcbiAgb25JdGVtc1JlbmRlcmVkVGltZW91dDogYW55XHJcbiAgaXNIYXNTY3JvbGxlZDogYm9vbGVhbiA9IGZhbHNlIC8qIFdoZXRoZXIgdGhlIExpc3QgaGFzIHNjcm9sbGVkICovXHJcbiAgZGVib3VuY2VPblJlc2l6ZTogKHdpZHRoLCBoZWlnaHQpID0+IHZvaWRcclxuICBkZWJvdW5jZVJlc2V0QWZ0ZXJJbmRpY2VzOiAoKSA9PiB2b2lkXHJcbiAgYm9keVNpemU6IEJvZHlTaXplXHJcbiAgaXNIYXNSZW5kZXJMaXN0OiBib29sZWFuID0gZmFsc2VcclxuICBpc0hhc1B1Ymxpc2hNZXNzYWdlQWN0aW9uOiBib29sZWFuID0gZmFsc2VcclxuICBwYWdlU2l6ZTogbnVtYmVyXHJcbiAgaXNTZXRsYXlvdXQ6IGJvb2xlYW4gPSBmYWxzZVxyXG5cclxuICByZXNldFRpbWVvdXQgPSBudWxsXHJcblxyXG4gIGlzSGFzSW5pdEN1cnJlbnRDYXJkU2l6ZTogYm9vbGVhbiA9IGZhbHNlXHJcblxyXG4gIG5lZWRBdXRvU2Nyb2xsVG9TZWxlY3RlZEl0ZW1XaGVuTG9hZFBhZ2U6IGJvb2xlYW4gPSBmYWxzZVxyXG4gIGF1dG9TY3JvbGxJbmRleDogbnVtYmVyID0gbnVsbFxyXG5cclxuICBpc1Njcm9sbFRvTmV4dFN0ZXA6IGJvb2xlYW4gPSBmYWxzZVxyXG4gIGp1bXBPdXROb2RlT2ZMaXN0OiBIVE1MRGl2RWxlbWVudFxyXG5cclxuICBzdGF0aWMgbWFwRXh0cmFTdGF0ZVByb3BzID0gKFxyXG4gICAgc3RhdGU6IElNU3RhdGUsXHJcbiAgICBwcm9wczogQWxsV2lkZ2V0UHJvcHM8SU1Db25maWc+XHJcbiAgKTogUHJvcHMgPT4ge1xyXG4gICAgY29uc3QgYXBwQ29uZmlnID0gc3RhdGUgJiYgc3RhdGUuYXBwQ29uZmlnXHJcbiAgICBjb25zdCB7IGxheW91dHMsIGxheW91dElkLCBsYXlvdXRJdGVtSWQsIGJ1aWxkZXJTdXBwb3J0TW9kdWxlcywgaWQgfSA9IHByb3BzXHJcbiAgICBjb25zdCBicm93c2VyU2l6ZU1vZGUgPSBzdGF0ZSAmJiBzdGF0ZS5icm93c2VyU2l6ZU1vZGVcclxuICAgIGNvbnN0IGJ1aWxkZXJTdGF0dXMgPVxyXG4gICAgICAoc3RhdGUgJiZcclxuICAgICAgICBzdGF0ZS53aWRnZXRzU3RhdGUgJiZcclxuICAgICAgICBzdGF0ZS53aWRnZXRzU3RhdGVbcHJvcHMuaWRdICYmXHJcbiAgICAgICAgc3RhdGUud2lkZ2V0c1N0YXRlW3Byb3BzLmlkXS5idWlsZGVyU3RhdHVzKSB8fFxyXG4gICAgICBTdGF0dXMuUmVndWxhclxyXG4gICAgbGV0IHN1YkxheW91dFR5cGVcclxuICAgIGlmIChhcHBDb25maWcpIHtcclxuICAgICAgY29uc3Qgc3ViTGF5b3V0ID1cclxuICAgICAgICBhcHBDb25maWcgJiZcclxuICAgICAgICBzdGF0ZS5hcHBDb25maWcubGF5b3V0cyAmJlxyXG4gICAgICAgIHN0YXRlLmFwcENvbmZpZy5sYXlvdXRzW1xyXG4gICAgICAgICAgc2VhcmNoVXRpbHMuZmluZExheW91dElkKFxyXG4gICAgICAgICAgICBsYXlvdXRzW2J1aWxkZXJTdGF0dXNdLFxyXG4gICAgICAgICAgICBicm93c2VyU2l6ZU1vZGUsXHJcbiAgICAgICAgICAgIGFwcENvbmZpZy5tYWluU2l6ZU1vZGVcclxuICAgICAgICAgIClcclxuICAgICAgICBdXHJcbiAgICAgIHN1YkxheW91dFR5cGUgPSBzdWJMYXlvdXQgJiYgc3ViTGF5b3V0LnR5cGVcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBsYXlvdXQgPSBhcHBDb25maWcubGF5b3V0cz8uW2xheW91dElkXVxyXG4gICAgY29uc3QgbGF5b3V0U2V0dGluZyA9IGxheW91dD8uY29udGVudD8uW2xheW91dEl0ZW1JZF0/LnNldHRpbmdcclxuICAgIGNvbnN0IGlzSGVpZ2h0QXV0byA9XHJcbiAgICAgIGxheW91dFNldHRpbmc/LmF1dG9Qcm9wcz8uaGVpZ2h0ID09PSBMYXlvdXRJdGVtU2l6ZU1vZGVzLkF1dG8gfHxcclxuICAgICAgbGF5b3V0U2V0dGluZz8uYXV0b1Byb3BzPy5oZWlnaHQgPT09IHRydWVcclxuICAgIGNvbnN0IGlzV2lkdGhBdXRvID1cclxuICAgICAgbGF5b3V0U2V0dGluZz8uYXV0b1Byb3BzPy53aWR0aCA9PT0gTGF5b3V0SXRlbVNpemVNb2Rlcy5BdXRvIHx8XHJcbiAgICAgIGxheW91dFNldHRpbmc/LmF1dG9Qcm9wcz8ud2lkdGggPT09IHRydWVcclxuXHJcbiAgICBsZXQgd2lkZ2V0UG9zaXRpb25cclxuICAgIGlmICh3aW5kb3cuamltdUNvbmZpZy5pc0luQnVpbGRlcikge1xyXG4gICAgICBjb25zdCBiYm94ID0gYXBwQ29uZmlnLmxheW91dHM/LltsYXlvdXRJZF0/LmNvbnRlbnQ/LltsYXlvdXRJdGVtSWRdPy5iYm94XHJcbiAgICAgIHdpZGdldFBvc2l0aW9uID0gYmJveCAmJiB7XHJcbiAgICAgICAgbGVmdDogYmJveC5sZWZ0LFxyXG4gICAgICAgIHRvcDogYmJveC50b3BcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHNlbGVjdGlvbiA9XHJcbiAgICAgIHN0YXRlICYmIHN0YXRlLmFwcFJ1bnRpbWVJbmZvICYmIHN0YXRlLmFwcFJ1bnRpbWVJbmZvLnNlbGVjdGlvblxyXG4gICAgY29uc3Qgc2VsZWN0aW9uSXNJblNlbGYgPVxyXG4gICAgICBzZWxlY3Rpb24gJiZcclxuICAgICAgYnVpbGRlclN1cHBvcnRNb2R1bGVzICYmXHJcbiAgICAgIGJ1aWxkZXJTdXBwb3J0TW9kdWxlcy53aWRnZXRNb2R1bGVzICYmXHJcbiAgICAgIGJ1aWxkZXJTdXBwb3J0TW9kdWxlcy53aWRnZXRNb2R1bGVzLnNlbGVjdGlvbkluTGlzdChcclxuICAgICAgICBzZWxlY3Rpb24sXHJcbiAgICAgICAgaWQsXHJcbiAgICAgICAgYXBwQ29uZmlnLFxyXG4gICAgICAgIGZhbHNlXHJcbiAgICAgIClcclxuICAgIGxldCBzZWxlY3Rpb25TdGF0dXNcclxuICAgIGlmIChzZWxlY3Rpb25Jc0luU2VsZikge1xyXG4gICAgICBzZWxlY3Rpb25TdGF0dXMgPSBPYmplY3Qua2V5cyhsYXlvdXRzKS5maW5kKFxyXG4gICAgICAgIHN0YXR1cyA9PlxyXG4gICAgICAgICAgc2VhcmNoVXRpbHMuZmluZExheW91dElkKFxyXG4gICAgICAgICAgICBsYXlvdXRzW3N0YXR1c10sXHJcbiAgICAgICAgICAgIGJyb3dzZXJTaXplTW9kZSxcclxuICAgICAgICAgICAgYXBwQ29uZmlnLm1haW5TaXplTW9kZVxyXG4gICAgICAgICAgKSA9PT0gc2VsZWN0aW9uLmxheW91dElkXHJcbiAgICAgIClcclxuICAgIH1cclxuICAgIGNvbnN0IHNlbGVjdGlvbklzU2VsZiA9ICEhKFxyXG4gICAgICBzZWxlY3Rpb24gJiZcclxuICAgICAgc2VsZWN0aW9uLmxheW91dElkID09PSBsYXlvdXRJZCAmJlxyXG4gICAgICBzZWxlY3Rpb24ubGF5b3V0SXRlbUlkID09PSBsYXlvdXRJdGVtSWRcclxuICAgIClcclxuXHJcbiAgICBjb25zdCBjdXJyZW50UGFnZUlkID0gc3RhdGU/LmFwcFJ1bnRpbWVJbmZvPy5jdXJyZW50UGFnZUlkXHJcbiAgICBjb25zdCBwYWdlTW9kZSA9IHN0YXRlPy5hcHBDb25maWc/LnBhZ2VzPy5bY3VycmVudFBhZ2VJZF0/Lm1vZGVcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzZWxlY3Rpb25Jc1NlbGY6IHNlbGVjdGlvbklzU2VsZixcclxuICAgICAgc2VsZWN0aW9uSXNJblNlbGY6ICEhc2VsZWN0aW9uSXNJblNlbGYsXHJcbiAgICAgIHNlbGVjdGlvblN0YXR1cyxcclxuICAgICAgYXBwTW9kZTogc3RhdGU/LmFwcFJ1bnRpbWVJbmZvPy5hcHBNb2RlLFxyXG4gICAgICBicm93c2VyU2l6ZU1vZGU6IHN0YXRlICYmIHN0YXRlLmJyb3dzZXJTaXplTW9kZSxcclxuICAgICAgYnVpbGRlclN0YXR1czpcclxuICAgICAgICAoc3RhdGUgJiZcclxuICAgICAgICAgIHN0YXRlLndpZGdldHNTdGF0ZSAmJlxyXG4gICAgICAgICAgc3RhdGUud2lkZ2V0c1N0YXRlW3Byb3BzLmlkXSAmJlxyXG4gICAgICAgICAgc3RhdGUud2lkZ2V0c1N0YXRlW3Byb3BzLmlkXS5idWlsZGVyU3RhdHVzKSB8fFxyXG4gICAgICAgIFN0YXR1cy5SZWd1bGFyLFxyXG4gICAgICBzaG93TG9hZGluZzogc3RhdGU/LndpZGdldHNTdGF0ZT8uW3Byb3BzLmlkXT8uc2hvd0xvYWRpbmcsXHJcbiAgICAgIGlzUlRMOiBzdGF0ZSAmJiBzdGF0ZS5hcHBDb250ZXh0ICYmIHN0YXRlLmFwcENvbnRleHQuaXNSVEwsXHJcbiAgICAgIHN1YkxheW91dFR5cGUsXHJcbiAgICAgIGxlZnQ6IHdpZGdldFBvc2l0aW9uICYmIHdpZGdldFBvc2l0aW9uLmxlZnQsXHJcbiAgICAgIHRvcDogd2lkZ2V0UG9zaXRpb24gJiYgd2lkZ2V0UG9zaXRpb24udG9wLFxyXG4gICAgICBpc0hlaWdodEF1dG8sXHJcbiAgICAgIGlzV2lkdGhBdXRvLFxyXG4gICAgICBxdWVyeU9iamVjdDogc3RhdGUucXVlcnlPYmplY3QsXHJcbiAgICAgIGJvdW5kaW5nQm94OiBsYXlvdXQ/LmNvbnRlbnQ/LltsYXlvdXRJdGVtSWRdPy5iYm94LFxyXG4gICAgICBoZWlnaHRMYXlvdXRJdGVtU2l6ZU1vZGVzOiBsYXlvdXRTZXR0aW5nPy5hdXRvUHJvcHM/LmhlaWdodCxcclxuICAgICAgcGFyZW50U2l6ZTogc3RhdGUud2lkZ2V0c1N0YXRlW3Byb3BzLmlkXT8ucGFyZW50U2l6ZSB8fCBudWxsLFxyXG4gICAgICBwYWdlTW9kZTogcGFnZU1vZGVcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbnN0cnVjdG9yIChwcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpXHJcbiAgICBjb25zdCB7IGNvbmZpZyB9ID0gcHJvcHNcclxuICAgIHRoaXMucGFnaW5hdG9yRGl2ID0gUmVhY3QuY3JlYXRlUmVmPEhUTUxEaXZFbGVtZW50PigpXHJcbiAgICB0aGlzLmxpc3RUb3BSaWdodFRvb2xzRGl2ID0gUmVhY3QuY3JlYXRlUmVmPEhUTUxEaXZFbGVtZW50PigpXHJcbiAgICBjb25zdCBzdGF0ZU9iajogTGlzdFN0YXRlcyA9IHtcclxuICAgICAgTGF5b3V0RW50cnk6IG51bGwsXHJcbiAgICAgIHBhZ2U6IDEsXHJcbiAgICAgIHNvcnRPcHRpb25OYW1lOlxyXG4gICAgICAgIGNvbmZpZy5zb3J0cyAmJiBjb25maWcuc29ydHNbMF0gJiYgY29uZmlnLnNvcnRzWzBdLnJ1bGVPcHRpb25OYW1lLFxyXG4gICAgICBjdXJyZW50Q2FyZFNpemU6IGxpc3RVdGlscy5nZXRDYXJkU2l6ZU51bWJlckluQ29uZmlnKHByb3BzLCBsaXN0VXRpbHMuZ2V0RGVmYXVsdE1pbkxpc3RTaXplKHByb3BzKSksXHJcbiAgICAgIGZvcmNlU2hvd01hc2s6IGZhbHNlLFxyXG4gICAgICB3aWRnZXRSZWN0OiBsaXN0VXRpbHMuZ2V0RGVmYXVsdE1pbkxpc3RTaXplKHByb3BzKSxcclxuICAgICAgc2hvd0xpc3Q6IHRydWUsXHJcbiAgICAgIHNlYXJjaFRleHQ6ICcnLFxyXG4gICAgICBjdXJyZW50RmlsdGVyOiB1bmRlZmluZWQsXHJcbiAgICAgIGZpbHRlckFwcGxpZWQ6IGZhbHNlLFxyXG4gICAgICBzaG93U2VsZWN0aW9uT25seTogZmFsc2UsXHJcbiAgICAgIGhpZGVDYXJkVG9vbDogZmFsc2UsXHJcbiAgICAgIHNjcm9sbFN0YXR1czogJ3N0YXJ0JyxcclxuICAgICAgZGF0YXNvdXJjZTogdW5kZWZpbmVkLFxyXG4gICAgICBob3ZlckluZGV4OiAtMSxcclxuICAgICAgaXNTY3JvbGxpbmc6IGZhbHNlLFxyXG4gICAgICBpc1Njcm9sbFNwZWVkT3ZlcjogZmFsc2UsXHJcbiAgICAgIGlzUmVzaXppbmdDYXJkOiBmYWxzZSxcclxuICAgICAgc2VhcmNoU3VnZ2VzdGlvbjogW10sXHJcbiAgICAgIGlzU2VhcmNoQm94VmlzaWJsZTogZmFsc2UsXHJcbiAgICAgIGlzT3BlblRvcFRvb2xzUG9wcGVyOiBmYWxzZSxcclxuICAgICAgbGF0ZXN0VXBkYXRlVGltZTogMCxcclxuICAgICAgc2hvd0xvYWRpbmc6IGZhbHNlLFxyXG4gICAgICBhdXRvUmVmcmVzaExvYWRpbmdTdHJpbmc6ICcnLFxyXG4gICAgICBsaXN0RGl2U2l6ZToge1xyXG4gICAgICAgIGNsaWVudFdpZHRoOiBudWxsLFxyXG4gICAgICAgIGNsaWVudEhlaWdodDogbnVsbFxyXG4gICAgICB9LFxyXG4gICAgICB0b29sc0RpdldpZHRoOiBudWxsLFxyXG4gICAgICBsaXN0RGl2Qm91bmRSZWN0OiBudWxsLFxyXG4gICAgICBpc1Njcm9sbEVuZDogZmFsc2UsXHJcbiAgICAgIGlzTW91bnQ6IGZhbHNlLFxyXG4gICAgICBjcmVhdGVEYXRhU291cmNlRmFpbGVkOiBmYWxzZVxyXG4gICAgfVxyXG4gICAgdGhpcy5zZWxlY3RTZWxmID0gdGhpcy5zZWxlY3RTZWxmLmJpbmQodGhpcylcclxuICAgIHRoaXMuaGFuZGxlUmVzaXplQ2FyZCA9IHRoaXMuaGFuZGxlUmVzaXplQ2FyZC5iaW5kKHRoaXMpXHJcbiAgICB0aGlzLmxpc3RSZWYgPSBSZWFjdC5jcmVhdGVSZWYoKVxyXG5cclxuICAgIGlmICh3aW5kb3cuamltdUNvbmZpZy5pc0luQnVpbGRlcikge1xyXG4gICAgICBzdGF0ZU9iai5MYXlvdXRFbnRyeSA9IHRoaXMucHJvcHMuYnVpbGRlclN1cHBvcnRNb2R1bGVzLkxheW91dEVudHJ5XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzdGF0ZU9iai5MYXlvdXRFbnRyeSA9IExheW91dEVudHJ5XHJcbiAgICB9XHJcbiAgICB0aGlzLnN0YXRlID0gc3RhdGVPYmpcclxuXHJcbiAgICB0aGlzLm9uUmVzaXplID0gdGhpcy5vblJlc2l6ZS5iaW5kKHRoaXMpXHJcbiAgICB0aGlzLmNoYW5nZUlzUmVzaXppbmdDYXJkID0gdGhpcy5jaGFuZ2VJc1Jlc2l6aW5nQ2FyZC5iaW5kKHRoaXMpXHJcbiAgICB0aGlzLnNldFJlZnJlc2hMb2FkaW5nU3RyaW5nID0gdGhpcy5zZXRSZWZyZXNoTG9hZGluZ1N0cmluZy5iaW5kKHRoaXMpXHJcbiAgICB0aGlzLnJlc2V0QXV0b1JlZnJlc2hUaW1lcyA9IHRoaXMucmVzZXRBdXRvUmVmcmVzaFRpbWVzLmJpbmQodGhpcylcclxuICAgIHRoaXMuZGVib3VuY2VPblJlc2l6ZSA9IGxvZGFzaC5kZWJvdW5jZShcclxuICAgICAgKHdpZHRoLCBoZWlnaHQpID0+IHsgdGhpcy5vblJlc2l6ZSh3aWR0aCwgaGVpZ2h0KSB9LFxyXG4gICAgICAyMDBcclxuICAgIClcclxuICAgIHRoaXMuZGVib3VuY2VSZXNldEFmdGVySW5kaWNlcyA9IGxvZGFzaC5kZWJvdW5jZShcclxuICAgICAgKCkgPT4geyB0aGlzLnJlc2V0QWZ0ZXJJbmRpY2VzKCkgfSxcclxuICAgICAgMjAwXHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBjb21wb25lbnREaWRNb3VudCAoKSB7XHJcbiAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgaXNNb3VudDogdHJ1ZVxyXG4gICAgfSlcclxuICAgIHRoaXMuZ2V0Qm9keVNpemUoKVxyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuZ2V0Qm9keVNpemUpXHJcbiAgICAvLyBjb25zdCB7b3V0cHV0RGF0YVNvdXJjZXMsIHVzZURhdGFTb3VyY2VzfSA9IHRoaXMucHJvcHNcclxuXHJcbiAgICAvLyBpZih0aGlzLnJlY29yZHMgIT0gZGVmYXVsdFJlY29yZHMpe1xyXG4gICAgLy8gICBsaXN0VXRpbHMuY3JlYXRlT3V0cHV0RHModGhpcy5yZWNvcmRzLCBvdXRwdXREYXRhU291cmNlcz8uWzBdLCB1c2VEYXRhU291cmNlcz8uWzBdKTtcclxuICAgIC8vIH1cclxuICB9XHJcblxyXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50ICgpIHtcclxuICAgIGNsZWFyVGltZW91dCh0aGlzLnJlc2l6ZVRpbWVvdXQpXHJcbiAgICBjbGVhclRpbWVvdXQodGhpcy51cGRhdGVDYXJkVG9vbFRpbWVvdXQpXHJcbiAgICBjbGVhclRpbWVvdXQodGhpcy5tb3VzZUNsaWNrVGltZW91dClcclxuICAgIGNsZWFyVGltZW91dCh0aGlzLnN1Z2dlc3Rpb25zUXVlcnlUaW1lb3V0KVxyXG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuc2hvd1BvcHBlclRpbWVPdXQpXHJcbiAgICBjbGVhclRpbWVvdXQodGhpcy5yZXNldEF1dG9SZWZyZXNoVGltZSlcclxuICAgIGNsZWFyVGltZW91dCh0aGlzLnNldFBhZ2VUaW1lb3V0KVxyXG4gICAgY2xlYXJUaW1lb3V0KHRoaXMub25JdGVtc1JlbmRlcmVkVGltZW91dClcclxuICAgIGNsZWFySW50ZXJ2YWwodGhpcy5hdXRvUmVmcmVzaExvYWRpbmdUaW1lKVxyXG4gIH1cclxuXHJcbiAgdXBkYXRlV2lkZ2V0UmVjdFRpbWVvdXQ6IE5vZGVKUy5UaW1lciA9IHVuZGVmaW5lZFxyXG4gIGNvbXBvbmVudERpZFVwZGF0ZSAocHJlUHJvcHMsIHByZVN0YXRlKSB7XHJcbiAgICBjb25zdCB7IGNvbmZpZywgYXBwTW9kZSB9ID0gdGhpcy5wcm9wc1xyXG4gICAgY29uc3QgeyBkYXRhc291cmNlIH0gPSB0aGlzLnN0YXRlXHJcbiAgICBpZiAoIXdpbmRvdy5qaW11Q29uZmlnLmlzSW5CdWlsZGVyIHx8IGFwcE1vZGUgPT09IEFwcE1vZGUuUnVuKSB7XHJcbiAgICAgIGNvbnN0IGlzT3BlblNlbGVjdGlvbk1vZGUgPSBjb25maWcuY2FyZENvbmZpZ3NbU3RhdHVzLlNlbGVjdGVkXS5zZWxlY3Rpb25Nb2RlICE9PSBTZWxlY3Rpb25Nb2RlVHlwZS5Ob25lXHJcbiAgICAgIC8vIExpc3RlbiBzZWxlY3RlZCByZWNvcmRzIGNoYW5nZSBmcm9tIG91dHNpZGVcclxuICAgICAgaWYgKGRhdGFzb3VyY2UgJiYgaXNPcGVuU2VsZWN0aW9uTW9kZSkge1xyXG4gICAgICAgIHRoaXMuc2Nyb2xsVG9TZWxlY3RlZEl0ZW1zKGRhdGFzb3VyY2UpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIHVwZGFkZSBsaXN0IGluIGJ1aWxkZXJcclxuICAgIHRoaXMudXBkYXRlTGlzdEluQnVpbGRlcihwcmVQcm9wcywgcHJlU3RhdGUpXHJcblxyXG4gICAgLy8gbGlzdGVuIGFwcE1vZGUgY2hhbmdlXHJcbiAgICB0aGlzLmFwcE1vZGVDaGFuZ2UocHJlUHJvcHMpXHJcblxyXG4gICAgaWYgKHByZVByb3BzPy5zZWxlY3Rpb25Jc0luU2VsZiAhPT0gdGhpcy5wcm9wcz8uc2VsZWN0aW9uSXNJblNlbGYpIHtcclxuICAgICAgdGhpcy5zZXRTZWxlY3Rpb25TdGF0dXMoKVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc2V0TGlzdExheW91dEluV2lkZ2V0U3RhdGUoKVxyXG4gICAgdGhpcy5zZXRMaXN0UGFyZW50U2l6ZUluV2lkZ2V0U3RhdGUoKVxyXG4gICAgdGhpcy51cGRhdGVQYWdlV2hlblByZVBhZ2VTaXplQ2hhbmdlKHByZVByb3BzLmNvbmZpZylcclxuICAgIC8vIHVwZGF0ZSBvdXRwdXQgZHNcclxuICAgIC8vIGlmKHRoaXMucmVjb3JkcyAhPSBkZWZhdWx0UmVjb3Jkcyl7XHJcbiAgICAvLyAgIGxpc3RVdGlscy5jcmVhdGVPdXRwdXREcyh0aGlzLnJlY29yZHMsIG91dHB1dERhdGFTb3VyY2VzPy5bMF0sIHVzZURhdGFTb3VyY2VzPy5bMF0pO1xyXG4gICAgLy8gfVxyXG4gIH1cclxuXHJcbiAgdXBkYXRlUGFnZVdoZW5QcmVQYWdlU2l6ZUNoYW5nZSA9IChwcmVDb25maWc6IElNQ29uZmlnKSA9PiB7XHJcbiAgICBpZiAoIXRoaXMucHJvcHMuY29uZmlnPy5pdGVtc1BlclBhZ2UpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICB9XHJcbiAgICBpZiAocHJlQ29uZmlnPy5pdGVtc1BlclBhZ2UgIT09IHRoaXMucHJvcHMuY29uZmlnPy5pdGVtc1BlclBhZ2UpIHtcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgcGFnZTogMVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY2hlY2tJc1JlY29yZHNDaGFuZ2UgPSAocmVjb3JkcywgcHJlUmVjb3JkcykgPT4ge1xyXG4gICAgY29uc3QgcmVjb3Jkc0lkID0gcmVjb3Jkcz8ubWFwKHJlY29yZCA9PiByZWNvcmQ/LmdldElkKCkpIHx8IFtdXHJcbiAgICBjb25zdCBwcmVSZWNvcmRzSWQgPSBwcmVSZWNvcmRzPy5tYXAocmVjb3JkID0+IHJlY29yZD8uZ2V0SWQoKSkgfHwgW11cclxuICAgIGlmIChyZWNvcmRzSWQ/Lmxlbmd0aCAhPT0gcHJlUmVjb3Jkc0lkKSB7XHJcbiAgICAgIHJldHVybiB0cnVlXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gcmVjb3Jkc0lkPy5maWx0ZXIoaWQgPT4gIXByZVJlY29yZHNJZD8uaW5jbHVkZXMoaWQpKT8ubGVuZ3RoID4gMFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVzZXRBZnRlckluZGljZXMgPSAoKSA9PiB7XHJcbiAgICB0aGlzLmxpc3RSZWY/LmN1cnJlbnQ/LnJlc2V0QWZ0ZXJJbmRpY2VzICYmIHRoaXMubGlzdFJlZj8uY3VycmVudD8ucmVzZXRBZnRlckluZGljZXMoe1xyXG4gICAgICBjb2x1bW5JbmRleDogMCxcclxuICAgICAgcm93SW5kZXg6IDAsXHJcbiAgICAgIHNob3VsZEZvcmNlVXBkYXRlOiBmYWxzZVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIHNldExpc3RMYXlvdXRJbldpZGdldFN0YXRlID0gKCkgPT4ge1xyXG4gICAgY29uc3QgeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkLCBpZCwgc2VsZWN0aW9uSXNTZWxmIH0gPSB0aGlzLnByb3BzXHJcbiAgICBpZiAobGF5b3V0SWQgJiYgaWQgJiYgbGF5b3V0SXRlbUlkICYmICF0aGlzLmlzU2V0bGF5b3V0ICYmIHNlbGVjdGlvbklzU2VsZikge1xyXG4gICAgICB0aGlzLnByb3BzLmRpc3BhdGNoKFxyXG4gICAgICAgIGFwcEFjdGlvbnMud2lkZ2V0U3RhdGVQcm9wQ2hhbmdlKGlkLCAnbGF5b3V0SW5mbycsIHtcclxuICAgICAgICAgIGxheW91dElkLFxyXG4gICAgICAgICAgbGF5b3V0SXRlbUlkXHJcbiAgICAgICAgfSlcclxuICAgICAgKVxyXG4gICAgICB0aGlzLmlzU2V0bGF5b3V0ID0gdHJ1ZVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0TGlzdFBhcmVudFNpemVJbldpZGdldFN0YXRlID0gKCkgPT4ge1xyXG4gICAgY29uc3QgeyBicm93c2VyU2l6ZU1vZGUsIGlkLCBwYXJlbnRTaXplLCBsYXlvdXRJZCB9ID0gdGhpcy5wcm9wc1xyXG4gICAgY29uc3QgYXBwQ29uZmlnID0gZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpLmFwcENvbmZpZ1xyXG4gICAgY29uc3Qgdmlld3BvcnRTaXplID0gdXRpbHMuZmluZFZpZXdwb3J0U2l6ZShhcHBDb25maWcsIGJyb3dzZXJTaXplTW9kZSlcclxuXHJcbiAgICBjb25zdCBzZWxlY3RvciA9IGBkaXYubGF5b3V0W2RhdGEtbGF5b3V0aWQ9JHtsYXlvdXRJZH1dYFxyXG4gICAgY29uc3QgcGFyZW50RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpXHJcbiAgICBjb25zdCBuZXdQYXJlbnRTaXplID0ge1xyXG4gICAgICB3aWR0aDogcGFyZW50RWxlbWVudD8uY2xpZW50V2lkdGggfHwgdmlld3BvcnRTaXplLndpZHRoLFxyXG4gICAgICBoZWlnaHQ6IHBhcmVudEVsZW1lbnQ/LmNsaWVudEhlaWdodCB8fCB2aWV3cG9ydFNpemUuaGVpZ2h0XHJcbiAgICB9XHJcbiAgICBpZiAoIXBhcmVudFNpemUgfHwgcGFyZW50U2l6ZS5oZWlnaHQgIT09IG5ld1BhcmVudFNpemUuaGVpZ2h0IHx8IHBhcmVudFNpemUud2lkdGggIT09IG5ld1BhcmVudFNpemUud2lkdGgpIHtcclxuICAgICAgdGhpcy5wcm9wcy5kaXNwYXRjaChhcHBBY3Rpb25zLndpZGdldFN0YXRlUHJvcENoYW5nZShpZCwgJ3BhcmVudFNpemUnLCBuZXdQYXJlbnRTaXplKSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldEJvZHlTaXplID0gKCkgPT4ge1xyXG4gICAgdGhpcy5ib2R5U2l6ZSA9IHtcclxuICAgICAgc2Nyb2xsV2lkdGg6IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxXaWR0aCxcclxuICAgICAgc2Nyb2xsSGVpZ2h0OiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0LFxyXG4gICAgICBjbGllbnRXaWR0aDogZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoLFxyXG4gICAgICBjbGllbnRIZWlnaHQ6IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHRcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHVwZGF0ZUxpc3RJbkJ1aWxkZXIgPSAocHJlUHJvcHMsIHByZVN0YXRlKSA9PiB7XHJcbiAgICBjb25zdCB7IGNvbmZpZyB9ID0gdGhpcy5wcm9wc1xyXG4gICAgaWYgKCF3aW5kb3cuamltdUNvbmZpZy5pc0luQnVpbGRlcikge1xyXG4gICAgICByZXR1cm4gZmFsc2VcclxuICAgIH1cclxuICAgIGNvbnN0IGN1cnJlbnRDYXJkU2l6ZSA9IGxpc3RVdGlscy5nZXRDYXJkU2l6ZU51bWJlckluQ29uZmlnKHRoaXMucHJvcHMsIHRoaXMuc3RhdGU/LndpZGdldFJlY3QpXHJcblxyXG4gICAgLy8gbGlzdGVuIGxheW91dCBwcm9wZXJ0aWVzIGNoYW5nZSBhbmQgdGhlbiB1cGRhdGUgbGlzdFxyXG4gICAgbGV0IGhpZGVDYXJkVG9vbCA9IHRoaXMubGF5b3V0UHJvcGVydGllc0NoYW5nZShwcmVQcm9wcywgcHJlU3RhdGUpXHJcblxyXG4gICAgdGhpcy51cGRhdGVTY3JvbGxDb250ZW50U2l6ZShwcmVQcm9wcy5jb25maWcpXHJcblxyXG4gICAgLy8gbGlzdGVuIHBhZ2luZyB0eXBlIGNoYW5nZVxyXG4gICAgdGhpcy5wYWdlVHlwZUNoYW5nZShwcmVQcm9wcylcclxuXHJcbiAgICAvLyBsaXN0ZW4gdXNlRGF0YXNvdXJjZXMgY2hhbmdlXHJcbiAgICB0aGlzLnVzZURhdGFzb3VyY2VzQ2hhbmdlKHByZVByb3BzKVxyXG5cclxuICAgIC8vIGxpc3RlbmluZyBsaXN0RGl2IHNpemUncyBjaGFuZ2VcclxuICAgIGhpZGVDYXJkVG9vbCA9IHRoaXMubGlzdERpdlNpemVDaGFuZ2UoXHJcbiAgICAgIHByZVByb3BzLFxyXG4gICAgICBwcmVTdGF0ZSxcclxuICAgICAgY3VycmVudENhcmRTaXplLFxyXG4gICAgICBoaWRlQ2FyZFRvb2xcclxuICAgIClcclxuXHJcbiAgICBpZiAoaGlkZUNhcmRUb29sKSB7XHJcbiAgICAgIHRoaXMudXBkYXRlQ2FyZFRvb2xQb3NpdGlvbigpXHJcbiAgICB9XHJcblxyXG4gICAgLy8gbGlzdGVuIHNvcnQgY2hhbmdlXHJcbiAgICB0aGlzLmxpc3RTb3J0Q2hhbmdlKHByZVByb3BzKVxyXG5cclxuICAgIC8vIGxpc3RlbiBmaWx0ZXIgY2hhbmdlXHJcbiAgICB0aGlzLmxpc3RGaWx0ZXJDaGFuZ2UocHJlUHJvcHMpXHJcblxyXG4gICAgY29uc3QgaXNTZWxlY3Rpb25Nb2RlQ2hhbmdlID1cclxuICAgICAgY29uZmlnLmNhcmRDb25maWdzW1N0YXR1cy5TZWxlY3RlZF0uc2VsZWN0aW9uTW9kZSAhPT1cclxuICAgICAgcHJlUHJvcHMuY29uZmlnLmNhcmRDb25maWdzW1N0YXR1cy5TZWxlY3RlZF0uc2VsZWN0aW9uTW9kZVxyXG4gICAgaWYgKGlzU2VsZWN0aW9uTW9kZUNoYW5nZSkge1xyXG4gICAgICB0aGlzLnNlbGVjdFJlY29yZHMoW10pXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBsYXlvdXRQcm9wZXJ0aWVzQ2hhbmdlID0gKHByZVByb3BzLCBwcmVTdGF0ZSk6IGJvb2xlYW4gPT4ge1xyXG4gICAgY29uc3QgeyBjb25maWcsIHRvcCwgbGVmdCB9ID0gdGhpcy5wcm9wc1xyXG4gICAgbGV0IGhpZGVDYXJkVG9vbCA9IGZhbHNlXHJcbiAgICBpZiAoIXdpbmRvdy5qaW11Q29uZmlnLmlzSW5CdWlsZGVyKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG4gICAgbGV0IHJlZnJlc2hMaXN0OiBib29sZWFuID0gZmFsc2VcclxuICAgIC8vIGxpc3RlbiBsYXlvdXQgcHJvcGVydGllcyBjaGFuZ2UgYW5kIHRoZW4gdXBkYXRlIGxpc3RcclxuICAgIGNvbnN0IGN1cnJlbnRDYXJkU2l6ZSA9IGxpc3RVdGlscy5nZXRDYXJkU2l6ZU51bWJlckluQ29uZmlnKHRoaXMucHJvcHMsIHRoaXMuc3RhdGUud2lkZ2V0UmVjdClcclxuICAgIGNvbnN0IG9sZENhcmRTaXplID0gbGlzdFV0aWxzLmdldENhcmRTaXplTnVtYmVySW5Db25maWcocHJlUHJvcHMsIHByZVN0YXRlPy53aWRnZXRSZWN0KVxyXG5cclxuICAgIHRoaXMudXBkYXRlU2Nyb2xsQ29udGVudFNpemUocHJlUHJvcHMuY29uZmlnKVxyXG5cclxuICAgIGNvbnN0IGlzV2lkZ2V0UG9zaXRpb25DaGFuZ2UgPVxyXG4gICAgICB0b3AgIT09IHByZVByb3BzLnRvcCB8fCBsZWZ0ICE9PSBwcmVQcm9wcy5sZWZ0XHJcbiAgICBjb25zdCBpc0xpc3RMYXlvdXRDaGFuZ2UgPSBjb25maWc/LmxheW91dFR5cGUgIT09IHByZVByb3BzLmNvbmZpZy5sYXlvdXRUeXBlXHJcbiAgICBjb25zdCBpc0VxdWFsQ2FyZFNpemVCeUxpc3RMYXlvdXQgPSAhbGlzdFV0aWxzLmlzRXF1YWxDYXJkU2l6ZUJ5TGlzdExheW91dChcclxuICAgICAgb2xkQ2FyZFNpemUsXHJcbiAgICAgIGN1cnJlbnRDYXJkU2l6ZSxcclxuICAgICAgY29uZmlnLmxheW91dFR5cGVcclxuICAgICkgLy8gZm9yIGNoYW5nZSB0ZW1wbGF0ZVxyXG4gICAgaWYgKFxyXG4gICAgICBpc0xpc3RMYXlvdXRDaGFuZ2UgfHxcclxuICAgICAgaXNFcXVhbENhcmRTaXplQnlMaXN0TGF5b3V0IHx8XHJcbiAgICAgIGlzV2lkZ2V0UG9zaXRpb25DaGFuZ2VcclxuICAgICkge1xyXG4gICAgICBoaWRlQ2FyZFRvb2wgPSB0cnVlXHJcbiAgICAgIGlmIChpc0VxdWFsQ2FyZFNpemVCeUxpc3RMYXlvdXQpIHtcclxuICAgICAgICBjb25zdCBuZXdTdGF0ZSA9IHtcclxuICAgICAgICAgIGN1cnJlbnRDYXJkU2l6ZVxyXG4gICAgICAgIH1cclxuICAgICAgICByZWZyZXNoTGlzdCA9IHRydWVcclxuICAgICAgICB0aGlzLnNldFN0YXRlKG5ld1N0YXRlLCAoKSA9PiB7XHJcbiAgICAgICAgICBpZiAocmVmcmVzaExpc3QpIHRoaXMucmVmcmVzaExpc3QoKVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0gZWxzZSBpZiAoaXNMaXN0TGF5b3V0Q2hhbmdlKSB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVSZXNpemVDYXJkKFxyXG4gICAgICAgICAgdGhpcy5zdGF0ZS5jdXJyZW50Q2FyZFNpemUsXHJcbiAgICAgICAgICB0cnVlLFxyXG4gICAgICAgICAgZmFsc2UsXHJcbiAgICAgICAgICBmYWxzZSxcclxuICAgICAgICAgIHRydWVcclxuICAgICAgICApXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXJlZnJlc2hMaXN0KSB7XHJcbiAgICAgIGNvbnN0IGlzU3BhY2VOb3RDaGFuZ2UgPSBjb25maWc/LmxheW91dFR5cGUgPT09IExpc3RMYXlvdXRUeXBlLkdSSURcclxuICAgICAgICA/IGxpc3RVdGlscy5pc0VxdWFsTnVtYmVyKGNvbmZpZz8uaG9yaXpvbnRhbFNwYWNlLCBwcmVQcm9wcy5jb25maWc/Lmhvcml6b250YWxTcGFjZSkgJiYgbGlzdFV0aWxzLmlzRXF1YWxOdW1iZXIoY29uZmlnPy52ZXJ0aWNhbFNwYWNlLCBwcmVQcm9wcy5jb25maWc/LnZlcnRpY2FsU3BhY2UpXHJcbiAgICAgICAgOiBsaXN0VXRpbHMuaXNFcXVhbE51bWJlcihjb25maWcuc3BhY2UsIHByZVByb3BzLmNvbmZpZy5zcGFjZSlcclxuICAgICAgaWYgKCFpc1NwYWNlTm90Q2hhbmdlIHx8IGNvbmZpZy5sYXlvdXRUeXBlICE9PSBwcmVQcm9wcy5jb25maWcubGF5b3V0VHlwZSkge1xyXG4gICAgICAgIHJlZnJlc2hMaXN0ID0gdHJ1ZVxyXG4gICAgICAgIHRoaXMucmVmcmVzaExpc3QoKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaGlkZUNhcmRUb29sXHJcbiAgfVxyXG5cclxuICBsaXN0RGl2U2l6ZUNoYW5nZSA9IChcclxuICAgIHByZVByb3BzLFxyXG4gICAgcHJlU3RhdGUsXHJcbiAgICBjdXJyZW50Q2FyZFNpemU6IENhcmRTaXplLFxyXG4gICAgaGlkZUNhcmRUb29sOiBib29sZWFuXHJcbiAgKTogYm9vbGVhbiA9PiB7XHJcbiAgICBjb25zdCB7IGNvbmZpZywgaXNIZWlnaHRBdXRvIH0gPSB0aGlzLnByb3BzXHJcbiAgICBjb25zdCB7IGxpc3REaXZTaXplIH0gPSB0aGlzLnN0YXRlXHJcbiAgICBjb25zdCBzaG93QlQgPSBsaXN0VXRpbHMuc2hvd0JvdHRvbVRvb2xzKHRoaXMucHJvcHMsIHRoaXMuc3RhdGUpXHJcbiAgICBjb25zdCBvbGRTaG93QlQgPSBsaXN0VXRpbHMuc2hvd0JvdHRvbVRvb2xzKHByZVByb3BzLCBwcmVTdGF0ZSlcclxuICAgIGNvbnN0IHNob3dEUyA9IGxpc3RVdGlscy5zaG93VG9wVG9vbHModGhpcy5wcm9wcylcclxuICAgIGNvbnN0IG9sZFNob3dEUyA9IGxpc3RVdGlscy5zaG93VG9wVG9vbHMocHJlUHJvcHMpXHJcbiAgICBpZiAoc2hvd0JUICE9PSBvbGRTaG93QlQgfHwgc2hvd0RTICE9PSBvbGRTaG93RFMpIHtcclxuICAgICAgaWYgKCFpc0hlaWdodEF1dG8pIHtcclxuICAgICAgICBpZiAoY29uZmlnLmxheW91dFR5cGUgPT09IExpc3RMYXlvdXRUeXBlLkNvbHVtbikge1xyXG4gICAgICAgICAgbGV0IGNhcmRIID0gdGhpcy5zdGF0ZS53aWRnZXRSZWN0Py5oZWlnaHQgfHwgbGlzdERpdlNpemU/LmNsaWVudEhlaWdodFxyXG4gICAgICAgICAgY2FyZEggLT1cclxuICAgICAgICAgICAgbGlzdFV0aWxzLmdldEJvdHRvbVRvb2xIKHRoaXMucGFnaW5hdG9yRGl2LmN1cnJlbnQsIHNob3dCVCkgK1xyXG4gICAgICAgICAgICAoc2hvd0RTID8gMSA6IDApICogRFNfVE9PTF9IXHJcbiAgICAgICAgICBpZiAoY2FyZEggPCBMSVNUX0NBUkRfTUlOX1NJWkUpIHJldHVyblxyXG4gICAgICAgICAgY29uc3QgY2FyZFNpemUgPSB7XHJcbiAgICAgICAgICAgIGhlaWdodDogY2FyZEgsXHJcbiAgICAgICAgICAgIHdpZHRoOiBjdXJyZW50Q2FyZFNpemUud2lkdGhcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRoaXMuaGFuZGxlUmVzaXplQ2FyZChjYXJkU2l6ZSwgdHJ1ZSwgZmFsc2UsIGZhbHNlLCB0cnVlKVxyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBoaWRlQ2FyZFRvb2wgPSB0cnVlXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBoaWRlQ2FyZFRvb2xcclxuICB9XHJcblxyXG4gIGFwcE1vZGVDaGFuZ2UgPSBwcmVQcm9wcyA9PiB7XHJcbiAgICBjb25zdCB7XHJcbiAgICAgIGFwcE1vZGUsXHJcbiAgICAgIHNlbGVjdGlvbklzU2VsZixcclxuICAgICAgc2VsZWN0aW9uU3RhdHVzLFxyXG4gICAgICBidWlsZGVyU3RhdHVzXHJcbiAgICB9ID0gdGhpcy5wcm9wc1xyXG4gICAgaWYgKHByZVByb3BzLmFwcE1vZGUgIT09IGFwcE1vZGUpIHtcclxuICAgICAgaWYgKGFwcE1vZGUgPT09IEFwcE1vZGUuUnVuKSB7XHJcbiAgICAgICAgdGhpcy5lZGl0QnVpbGRlckFuZFNldHRpbmdTdGF0dXMoU3RhdHVzLlJlZ3VsYXIpXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKHNlbGVjdGlvblN0YXR1cyAhPT0gYnVpbGRlclN0YXR1cykge1xyXG4gICAgICAgICAgLy8gY2hhbmdlIHN0YXR1cyBieSB0b2NcclxuICAgICAgICAgIGlmICghc2VsZWN0aW9uU3RhdHVzKSB7XHJcbiAgICAgICAgICAgIGlmICghc2VsZWN0aW9uSXNTZWxmKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5lZGl0QnVpbGRlckFuZFNldHRpbmdTdGF0dXMoU3RhdHVzLlJlZ3VsYXIpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZWRpdEJ1aWxkZXJBbmRTZXR0aW5nU3RhdHVzKHNlbGVjdGlvblN0YXR1cylcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZShcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgc2hvd1NlbGVjdGlvbk9ubHk6IGZhbHNlLFxyXG4gICAgICAgICAgICBzZWFyY2hUZXh0OiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIGZpbHRlckFwcGxpZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICBob3ZlckluZGV4OiAtMVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zY3JvbGxUb0luZGV4KDApXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwYWdlVHlwZUNoYW5nZSA9IHByZVByb3BzID0+IHtcclxuICAgIGNvbnN0IHsgcGFnZVN0eWxlIH0gPSB0aGlzLnByb3BzLmNvbmZpZ1xyXG4gICAgY29uc3Qgb2xkUGFnZVN0eWxlID0gcHJlUHJvcHMuY29uZmlnLnBhZ2VTdHlsZVxyXG4gICAgaWYgKHBhZ2VTdHlsZSAhPT0gb2xkUGFnZVN0eWxlKSB7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgIHBhZ2U6IDFcclxuICAgICAgfSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHVzZURhdGFzb3VyY2VzQ2hhbmdlID0gcHJlUHJvcHMgPT4ge1xyXG4gICAgY29uc3QgeyB1c2VEYXRhU291cmNlcyB9ID0gdGhpcy5wcm9wc1xyXG4gICAgY29uc3Qgb2xkVXNlRGF0YVNvdXJjZXMgPSBwcmVQcm9wcy51c2VEYXRhU291cmNlc1xyXG4gICAgaWYgKHVzZURhdGFTb3VyY2VzICYmIHVzZURhdGFTb3VyY2VzWzBdKSB7XHJcbiAgICAgIGNvbnN0IG9sZFVzZURhdGFTb3VyY2UgPSBvbGRVc2VEYXRhU291cmNlcyAmJiBvbGRVc2VEYXRhU291cmNlc1swXVxyXG4gICAgICBpZiAoXHJcbiAgICAgICAgIW9sZFVzZURhdGFTb3VyY2UgfHxcclxuICAgICAgICBvbGRVc2VEYXRhU291cmNlLmRhdGFTb3VyY2VJZCAhPT0gdXNlRGF0YVNvdXJjZXNbMF0uZGF0YVNvdXJjZUlkXHJcbiAgICAgICkge1xyXG4gICAgICAgIC8vIHJlc2V0IHF1ZXJ5c1N0YXJ0XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICBwYWdlOiAxXHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gcmVtb3ZlIGRzIG1heWJlXHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgIGRhdGFzb3VyY2U6IHVuZGVmaW5lZFxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbGlzdFNvcnRDaGFuZ2UgPSBwcmVQcm9wcyA9PiB7XHJcbiAgICBjb25zdCB7IGNvbmZpZyB9ID0gdGhpcy5wcm9wc1xyXG4gICAgaWYgKGNvbmZpZy5zb3J0T3Blbikge1xyXG4gICAgICBjb25zdCBzb3J0cyA9IGNvbmZpZy5zb3J0c1xyXG4gICAgICBjb25zdCBvbGRTb3J0cyA9IHByZVByb3BzLmNvbmZpZy5zb3J0c1xyXG4gICAgICBpZiAoc29ydHMgIT09IG9sZFNvcnRzKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICBzb3J0T3B0aW9uTmFtZTogdW5kZWZpbmVkXHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbGlzdEZpbHRlckNoYW5nZSA9IHByZVByb3BzID0+IHtcclxuICAgIGNvbnN0IHsgY29uZmlnIH0gPSB0aGlzLnByb3BzXHJcbiAgICBpZiAoY29uZmlnLmZpbHRlck9wZW4pIHtcclxuICAgICAgY29uc3QgZmlsdGVyID0gY29uZmlnLmZpbHRlclxyXG4gICAgICBjb25zdCBvbGRGaWx0ZXIgPSBwcmVQcm9wcy5jb25maWcuZmlsdGVyXHJcbiAgICAgIGlmIChmaWx0ZXIgIT09IG9sZEZpbHRlcikge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgY3VycmVudEZpbHRlcjogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgZmlsdGVyQXBwbGllZDogZmFsc2VcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRTZWxlY3Rpb25TdGF0dXMgPSAoKSA9PiB7XHJcbiAgICBjb25zdCB7IGlkLCBzZWxlY3Rpb25Jc0luU2VsZiB9ID0gdGhpcy5wcm9wc1xyXG4gICAgdGhpcy5wcm9wcy5kaXNwYXRjaChcclxuICAgICAgYXBwQWN0aW9ucy53aWRnZXRTdGF0ZVByb3BDaGFuZ2UoXHJcbiAgICAgICAgaWQsXHJcbiAgICAgICAgJ3NlbGVjdGlvbklzSW5TZWxmJyxcclxuICAgICAgICBzZWxlY3Rpb25Jc0luU2VsZlxyXG4gICAgICApXHJcbiAgICApXHJcbiAgfVxyXG5cclxuICB1cGRhdGVTY3JvbGxDb250ZW50U2l6ZSA9IHByZUNvbmZpZyA9PiB7XHJcbiAgICBjb25zdCB7IGNvbmZpZyB9ID0gdGhpcy5wcm9wc1xyXG4gICAgY29uc3QgaXNTcGFjZU5vdENoYW5nZSA9IGNvbmZpZz8ubGF5b3V0VHlwZSA9PT0gTGlzdExheW91dFR5cGUuR1JJRFxyXG4gICAgICA/IGxpc3RVdGlscy5pc0VxdWFsTnVtYmVyKGNvbmZpZz8uaG9yaXpvbnRhbFNwYWNlLCBwcmVDb25maWc/Lmhvcml6b250YWxTcGFjZSkgJiYgbGlzdFV0aWxzLmlzRXF1YWxOdW1iZXIoY29uZmlnPy52ZXJ0aWNhbFNwYWNlLCBwcmVDb25maWc/LnZlcnRpY2FsU3BhY2UpXHJcbiAgICAgIDogbGlzdFV0aWxzLmlzRXF1YWxOdW1iZXIoY29uZmlnLnNwYWNlLCBwcmVDb25maWcuc3BhY2UpXHJcbiAgICBpZiAoY29uZmlnLmxheW91dFR5cGUgIT09IHByZUNvbmZpZy5sYXlvdXRUeXBlIHx8ICFpc1NwYWNlTm90Q2hhbmdlKSB7XHJcbiAgICAgIHRoaXMuc2V0U2Nyb2xsQ29udGVudFNpemUoKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2Nyb2xsVG9TZWxlY3RlZEl0ZW1zID0gKGRhdGFzb3VyY2U6IERhdGFTb3VyY2UpID0+IHtcclxuICAgIGNvbnN0IHNlbGVjdGVkUmVjb3JkSWRzID0gZGF0YXNvdXJjZS5nZXRTZWxlY3RlZFJlY29yZElkcygpXHJcbiAgICBpZiAodGhpcy5pc015U2VsZWN0ZWQpIHtcclxuICAgICAgdGhpcy5pc015U2VsZWN0ZWQgPSBmYWxzZVxyXG4gICAgICB0aGlzLmxhc3RTZWxlY3RlZFJlY29yZElkcyA9IHNlbGVjdGVkUmVjb3JkSWRzIHx8IFtdXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgY29uc3QgaXNTZWxlY3RlZFJlY29yZHNDaGFuZ2UgPSB0aGlzLmNoZWNrSXNTZWxlY3RSZWNvcmRzQ2hhbmdlKGRhdGFzb3VyY2UpXHJcbiAgICBpZiAoc2VsZWN0ZWRSZWNvcmRJZHMgJiYgc2VsZWN0ZWRSZWNvcmRJZHMubGVuZ3RoID4gMCAmJiBpc1NlbGVjdGVkUmVjb3Jkc0NoYW5nZSkge1xyXG4gICAgICBpZiAoaXNTZWxlY3RlZFJlY29yZHNDaGFuZ2UgfHwgdGhpcy5uZWVkU2Nyb2xsKSB7XHJcbiAgICAgICAgY29uc3QgbmV3QWRkZWRTZWxlY3RlZFJlY29yZHNJZCA9IHRoaXMuZ2V0TmV3QWRkZWRTZWxlY3RlZFJlY29yZHNJZChkYXRhc291cmNlKVxyXG4gICAgICAgIGNvbnN0IG5lZXdTY3JvbGxUb1NlbGVjdGVkUmVjb3Jkc0lkID0gbmV3QWRkZWRTZWxlY3RlZFJlY29yZHNJZD8ubGVuZ3RoID4gMCA/IG5ld0FkZGVkU2VsZWN0ZWRSZWNvcmRzSWQgOiBzZWxlY3RlZFJlY29yZElkc1xyXG4gICAgICAgIGxldCBpbmRleCA9IC0xXHJcbiAgICAgICAgdGhpcz8ucmVjb3Jkcz8uZmluZCgocmVjb3JkLCBpKSA9PiB7XHJcbiAgICAgICAgICBpZiAoIXJlY29yZD8uZ2V0SWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBjb25zdCByZWNvcmRJZCA9IHJlY29yZD8uZ2V0SWQ/LigpXHJcbiAgICAgICAgICBpZiAobmVld1Njcm9sbFRvU2VsZWN0ZWRSZWNvcmRzSWQ/LmluY2x1ZGVzKHJlY29yZElkKSkge1xyXG4gICAgICAgICAgICBpbmRleCA9IGlcclxuICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xyXG4gICAgICAgICAgLy8gQ2FuJ3QgZmluZCBpdCwgbmVlZCB0byBzZWFyY2ggaW4gYWxsIHJlY29yZHMgYWdhaW5cclxuICAgICAgICAgIGNvbnN0IHJlY29yZHMgPSBkYXRhc291cmNlLmdldFJlY29yZHMoKVxyXG4gICAgICAgICAgcmVjb3JkcyAmJlxyXG4gICAgICAgICAgICByZWNvcmRzLmZpbmQoKHJlY29yZCwgaSkgPT4ge1xyXG4gICAgICAgICAgICAgIGlmIChyZWNvcmQuZ2V0SWQ/LigpID09PSBzZWxlY3RlZFJlY29yZElkc1swXSkge1xyXG4gICAgICAgICAgICAgICAgaW5kZXggPSBpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xyXG4gICAgICAgICAgICBjb25zdCBuZXdQYWdlID0gTWF0aC5jZWlsKChpbmRleCArIDEpIC8gdGhpcy5nZXRQYWdlU2l6ZSgpKVxyXG4gICAgICAgICAgICB0aGlzLm5lZWRTY3JvbGwgPSB0cnVlXHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgIHBhZ2U6IG5ld1BhZ2VcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5zY3JvbGxUb0luZGV4KGluZGV4KVxyXG4gICAgICAgICAgdGhpcy5uZWVkU2Nyb2xsID0gZmFsc2VcclxuICAgICAgICAgIC8vbG9hZE1vcmUgbWF5IGJlIHRyaWdnZXJlZCBkdXJpbmcgc2Nyb2xsVG9JdGVtLCBhbmQgdGhlIHNjcm9sbFRvSW5kZXggbG9naWMgaW4gaGFuZGxlU2Nyb2xsRG93biB3aWxsIGJlIHRyaWdnZXJlZCBhdCB0aGlzIHRpbWUsXHJcbiAgICAgICAgICAvL2J1dCB0aGlzIGxvZ2ljIGlzIG5vdCBuZWVkZWQgd2hlbiBhdXRvbWF0aWNhbGx5IGp1bXBpbmcgdG8gdGhlIGN1cnJlbnRseSBzZWxlY3RlZCByZWNvcmRzXHJcbiAgICAgICAgICB0aGlzLmF1dG9TY3JvbGxJbmRleCA9IGluZGV4XHJcbiAgICAgICAgICB0aGlzLm5lZWRBdXRvU2Nyb2xsVG9TZWxlY3RlZEl0ZW1XaGVuTG9hZFBhZ2UgPSB0cnVlXHJcbiAgICAgICAgICB0aGlzLmxhc3RTZWxlY3RlZFJlY29yZElkcyA9IHNlbGVjdGVkUmVjb3JkSWRzIHx8IFtdXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjaGVja0lzU2VsZWN0UmVjb3Jkc0NoYW5nZSA9IChkYXRhc291cmNlOiBEYXRhU291cmNlKSA9PiB7XHJcbiAgICBjb25zdCBzZWxlY3RlZFJlY29yZElkcyA9IGRhdGFzb3VyY2U/LmdldFNlbGVjdGVkUmVjb3JkSWRzKCkgfHwgW11cclxuICAgIGNvbnN0IGxhc3RTZWxlY3RlZFJlY29yZElkcyA9IHRoaXM/Lmxhc3RTZWxlY3RlZFJlY29yZElkcyB8fCBbXVxyXG4gICAgaWYgKHNlbGVjdGVkUmVjb3JkSWRzPy5sZW5ndGggIT09IGxhc3RTZWxlY3RlZFJlY29yZElkcz8ubGVuZ3RoKSB7XHJcbiAgICAgIHJldHVybiB0cnVlXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gc2VsZWN0ZWRSZWNvcmRJZHM/LmZpbHRlcihpZCA9PiAhbGFzdFNlbGVjdGVkUmVjb3JkSWRzPy5pbmNsdWRlcyhpZCkpPy5sZW5ndGggPiAwXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXROZXdBZGRlZFNlbGVjdGVkUmVjb3Jkc0lkID0gKGRhdGFzb3VyY2U6IERhdGFTb3VyY2UpID0+IHtcclxuICAgIGNvbnN0IGxhc3RTZWxlY3RlZFJlY29yZElkcyA9IHRoaXMubGFzdFNlbGVjdGVkUmVjb3JkSWRzIHx8IFtdXHJcbiAgICBjb25zdCBzZWxlY3RlZFJlY29yZElkcyA9IGRhdGFzb3VyY2UuZ2V0U2VsZWN0ZWRSZWNvcmRJZHMoKSB8fCBbXVxyXG4gICAgY29uc3QgbmV3QWRkZWRTZWxlY3RlZFJlY29yZHMgPSBzZWxlY3RlZFJlY29yZElkcz8uZmlsdGVyKGlkID0+IHtcclxuICAgICAgcmV0dXJuICFsYXN0U2VsZWN0ZWRSZWNvcmRJZHM/LmluY2x1ZGVzKGlkKVxyXG4gICAgfSlcclxuICAgIHJldHVybiBuZXdBZGRlZFNlbGVjdGVkUmVjb3Jkc1xyXG4gIH1cclxuXHJcbiAgb25EU0NyZWF0ZWQgPSAoZHM6IERhdGFTb3VyY2UpID0+IHtcclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICBkYXRhc291cmNlOiBkcyxcclxuICAgICAgY3JlYXRlRGF0YVNvdXJjZUZhaWxlZDogZmFsc2VcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICByZXNpemVUaW1lb3V0OiBOb2RlSlMuVGltZXJcclxuICBvblJlc2l6ZSA9ICh3aWR0aCwgaGVpZ2h0KSA9PiB7XHJcbiAgICBjb25zdCBuZXdXaWRnZXRSZWN0ID0ge1xyXG4gICAgICB3aWR0aCxcclxuICAgICAgaGVpZ2h0XHJcbiAgICB9XHJcbiAgICBjb25zdCB7IGNvbmZpZyB9ID0gdGhpcy5wcm9wc1xyXG4gICAgY29uc3QgeyBpc1Jlc2l6aW5nQ2FyZCwgY3VycmVudENhcmRTaXplIH0gPSB0aGlzLnN0YXRlXHJcbiAgICBpZiAoaXNSZXNpemluZ0NhcmQpIHtcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICBjb25zdCBzaG93Qm90dG9tVG9vbCA9IGxpc3RVdGlscy5zaG93Qm90dG9tVG9vbHModGhpcy5wcm9wcywgdGhpcy5zdGF0ZSlcclxuICAgIGNvbnN0IGJvdHRvbVRvb2xIID0gbGlzdFV0aWxzLmdldEJvdHRvbVRvb2xIKFxyXG4gICAgICB0aGlzLnBhZ2luYXRvckRpdi5jdXJyZW50LFxyXG4gICAgICBzaG93Qm90dG9tVG9vbFxyXG4gICAgKVxyXG4gICAgY29uc3Qgc2hvd1RvcFRvb2wgPSBsaXN0VXRpbHMuc2hvd1RvcFRvb2xzKHRoaXMucHJvcHMpXHJcbiAgICBjb25zdCBsaXN0SCA9IGxpc3RVdGlscy5nZXRMaXN0SGVpZ2h0KFxyXG4gICAgICBuZXdXaWRnZXRSZWN0LFxyXG4gICAgICBib3R0b21Ub29sSCxcclxuICAgICAgc2hvd1RvcFRvb2xcclxuICAgIClcclxuICAgIGNvbnN0IG9sZENhcmRTaXplID0gdGhpcy5nZXRPbGRDYXJkU2l6ZVdoZW5SZXNpemUobmV3V2lkZ2V0UmVjdClcclxuICAgIGNvbnN0IG5ld0RlZmF1bHRDYXJkU2l6ZSA9IGNvbmZpZy5sYXlvdXRUeXBlID09PSBMaXN0TGF5b3V0VHlwZS5HUklEID8gbGlzdFV0aWxzLmdldENhcmRTaXplTnVtYmVySW5Db25maWcodGhpcy5wcm9wcywgbmV3V2lkZ2V0UmVjdCkgOiBjdXJyZW50Q2FyZFNpemVcclxuICAgIGNvbnN0IGNhcmRTaXplID0ge1xyXG4gICAgICB3aWR0aDogbmV3RGVmYXVsdENhcmRTaXplLndpZHRoLFxyXG4gICAgICBoZWlnaHQ6IG5ld0RlZmF1bHRDYXJkU2l6ZS5oZWlnaHRcclxuICAgIH1cclxuICAgIGxldCBuZWVkUmVmcmVzaExpc3Q6IGJvb2xlYW4gPSAhbGlzdFV0aWxzLmlzRXF1YWxOdW1iZXIoY3VycmVudENhcmRTaXplPy53aWR0aCwgbmV3RGVmYXVsdENhcmRTaXplPy53aWR0aCkgfHwgIWxpc3RVdGlscy5pc0VxdWFsTnVtYmVyKGN1cnJlbnRDYXJkU2l6ZT8uaGVpZ2h0LCBuZXdEZWZhdWx0Q2FyZFNpemU/LmhlaWdodClcclxuICAgIGlmIChjb25maWcubG9ja0l0ZW1SYXRpbyAmJiBjb25maWcubGF5b3V0VHlwZSAhPT0gTGlzdExheW91dFR5cGUuR1JJRCkge1xyXG4gICAgICBjb25zdCByYXRpbyA9IGNhcmRTaXplLndpZHRoIC8gY2FyZFNpemUuaGVpZ2h0XHJcbiAgICAgIHN3aXRjaCAoY29uZmlnPy5sYXlvdXRUeXBlKSB7XHJcbiAgICAgICAgY2FzZSBMaXN0TGF5b3V0VHlwZS5Db2x1bW46XHJcbiAgICAgICAgICBjYXJkU2l6ZS5oZWlnaHQgPSBsaXN0SFxyXG4gICAgICAgICAgY2FyZFNpemUud2lkdGggPSBsaXN0SCAqIHJhdGlvXHJcbiAgICAgICAgICBpZiAoIWxpc3RVdGlscy5pc0VxdWFsTnVtYmVyKGNhcmRTaXplLndpZHRoLCBvbGRDYXJkU2l6ZS53aWR0aCkpIHtcclxuICAgICAgICAgICAgbmVlZFJlZnJlc2hMaXN0ID0gdHJ1ZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYnJlYWtcclxuICAgICAgICBjYXNlIExpc3RMYXlvdXRUeXBlLlJvdzpcclxuICAgICAgICAgIGNhcmRTaXplLmhlaWdodCA9IHdpZHRoIC8gcmF0aW9cclxuICAgICAgICAgIGNhcmRTaXplLndpZHRoID0gd2lkdGhcclxuICAgICAgICAgIGlmICghbGlzdFV0aWxzLmlzRXF1YWxOdW1iZXIoY2FyZFNpemUuaGVpZ2h0LCBvbGRDYXJkU2l6ZS5oZWlnaHQpKSB7XHJcbiAgICAgICAgICAgIG5lZWRSZWZyZXNoTGlzdCA9IHRydWVcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGJyZWFrXHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHN3aXRjaCAoY29uZmlnPy5sYXlvdXRUeXBlKSB7XHJcbiAgICAgICAgY2FzZSBMaXN0TGF5b3V0VHlwZS5Db2x1bW46XHJcbiAgICAgICAgICBjYXJkU2l6ZS5oZWlnaHQgPSBsaXN0SFxyXG4gICAgICAgICAgYnJlYWtcclxuICAgICAgICBjYXNlIExpc3RMYXlvdXRUeXBlLlJvdzpcclxuICAgICAgICAgIGNhcmRTaXplLndpZHRoID0gd2lkdGhcclxuICAgICAgICAgIGJyZWFrXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IG5vdFJlc2V0Q2FyZFNpemUgPSBjYXJkU2l6ZS53aWR0aCA8IExJU1RfQ0FSRF9NSU5fU0laRSB8fCBjYXJkU2l6ZS5oZWlnaHQgPCBMSVNUX0NBUkRfTUlOX1NJWkUgfHwgbmV3V2lkZ2V0UmVjdC53aWR0aCA9PT0gMCB8fCBuZXdXaWRnZXRSZWN0LmhlaWdodCA9PT0gMFxyXG4gICAgaWYgKG5vdFJlc2V0Q2FyZFNpemUpIHtcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICB0aGlzLnNldFN0YXRlKFxyXG4gICAgICB7XHJcbiAgICAgICAgd2lkZ2V0UmVjdDogbmV3V2lkZ2V0UmVjdCxcclxuICAgICAgICBjdXJyZW50Q2FyZFNpemU6IGNhcmRTaXplXHJcbiAgICAgIH0sXHJcbiAgICAgICgpID0+IHtcclxuICAgICAgICB0aGlzLmlzSGFzSW5pdEN1cnJlbnRDYXJkU2l6ZSA9IHRydWVcclxuICAgICAgICB0aGlzLmVkaXRMaXN0U2l6ZUluUnVuVGltZShuZXdXaWRnZXRSZWN0KVxyXG4gICAgICAgIGlmIChuZWVkUmVmcmVzaExpc3QpIHtcclxuICAgICAgICAgIHRoaXMucmVmcmVzaExpc3QoKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgKVxyXG4gICAgaWYgKHRoaXMucmVzaXplVGltZW91dCkge1xyXG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5yZXNpemVUaW1lb3V0KVxyXG4gICAgICB0aGlzLnJlc2l6ZVRpbWVvdXQgPSB1bmRlZmluZWRcclxuICAgIH1cclxuICAgIGlmIChjb25maWcubG9ja0l0ZW1SYXRpbykge1xyXG4gICAgICB0aGlzLnJlc2l6ZVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICB0aGlzLmhhbmRsZVJlc2l6ZUNhcmQoY2FyZFNpemUsIHRydWUsIGZhbHNlLCBmYWxzZSwgdHJ1ZSlcclxuICAgICAgfSwgNTAwKVxyXG4gICAgfVxyXG4gICAgdGhpcy51cGRhdGVDYXJkVG9vbFBvc2l0aW9uKClcclxuICAgIHRoaXMuc2V0TGlzdERpdlNpemUoKVxyXG4gIH1cclxuXHJcbiAgZ2V0T2xkQ2FyZFNpemVXaGVuUmVzaXplID0gKG5ld1dpZGdldFJlY3QpOiBFbGVtZW50U2l6ZSA9PiB7XHJcbiAgICAvL1doZW4gdGhlIHdpZHRoIGFuZCBoZWlnaHQgYXJlIHBlcmNlbnRhZ2VzLCB0aGUgT25yZXNpemUgbWV0aG9kIHdpbGwgYmUgYXV0b21hdGljYWxseSBjYWxsZWQgb25jZSB3aGVuIHRoZSBMaXN0IGlzIGxvYWRlZC4gQXQgdGhpcyB0aW1lLCB0aGUgY3VycmVudCBMaXN0IHNpemUgc2hvdWxkIGJlIHVzZWQgdG8gb2J0YWluIHRoZSBvbGRDYXJkU2l6ZVxyXG4gICAgY29uc3QgeyBjdXJyZW50Q2FyZFNpemUgfSA9IHRoaXMuc3RhdGVcclxuICAgIGlmICghdGhpcy5pc0hhc0luaXRDdXJyZW50Q2FyZFNpemUpIHtcclxuICAgICAgcmV0dXJuIGxpc3RVdGlscy5nZXRDYXJkU2l6ZU51bWJlckluQ29uZmlnKHRoaXMucHJvcHMsIG5ld1dpZGdldFJlY3QpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gY3VycmVudENhcmRTaXplXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB1cGRhdGVDYXJkVG9vbFRpbWVvdXQ6IE5vZGVKUy5UaW1lclxyXG4gIHByaXZhdGUgcmVhZG9ubHkgdXBkYXRlQ2FyZFRvb2xQb3NpdGlvbiA9ICgpID0+IHtcclxuICAgIGNvbnN0IHsgc2VsZWN0aW9uSXNTZWxmIH0gPSB0aGlzLnByb3BzXHJcbiAgICBjb25zdCB7IGhpZGVDYXJkVG9vbCB9ID0gdGhpcy5zdGF0ZVxyXG4gICAgaWYgKCFzZWxlY3Rpb25Jc1NlbGYgfHwgaGlkZUNhcmRUb29sKSByZXR1cm5cclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICBoaWRlQ2FyZFRvb2w6IHRydWVcclxuICAgIH0pXHJcbiAgICBpZiAodGhpcy51cGRhdGVDYXJkVG9vbFRpbWVvdXQpIHtcclxuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudXBkYXRlQ2FyZFRvb2xUaW1lb3V0KVxyXG4gICAgICB0aGlzLnVwZGF0ZUNhcmRUb29sVGltZW91dCA9IHVuZGVmaW5lZFxyXG4gICAgfVxyXG4gICAgdGhpcy51cGRhdGVDYXJkVG9vbFRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgaGlkZUNhcmRUb29sOiBmYWxzZVxyXG4gICAgICB9KVxyXG4gICAgfSwgNTAwKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByZWFkb25seSByZWZyZXNoTGlzdCA9IChzaG91bGRGb3JjZVVwZGF0ZTogYm9vbGVhbiA9IHRydWUpID0+IHtcclxuICAgIGlmICh0aGlzLmxpc3RSZWYuY3VycmVudCkge1xyXG4gICAgICBpZiAodGhpcy5wcm9wcy5jb25maWc/LmxheW91dFR5cGUgPT09IExpc3RMYXlvdXRUeXBlLkdSSUQpIHtcclxuICAgICAgICAvL1ZhcmlhYmxlU2l6ZUdyaWQgY2FjaGVzIG9mZnNldHMgYW5kIG1lYXN1cmVtZW50cyBmb3IgZWFjaCBpdGVtIGZvciBwZXJmb3JtYW5jZSBwdXJwb3Nlcy5cclxuICAgICAgICAvL1RoaXMgbWV0aG9kIGNsZWFycyB0aGF0IGNhY2hlZCBkYXRhIGZvciBhbGwgaXRlbXMgYWZ0ZXIgKGFuZCBpbmNsdWRpbmcpIHRoZSBzcGVjaWZpZWQgaW5kaWNlcy4gSXQgc2hvdWxkIGJlIGNhbGxlZCB3aGVuZXZlciBhbiBpdGVtcyBzaXplIGNoYW5nZXMuXHJcbiAgICAgICAgLy9odHRwczovL3JlYWN0LXdpbmRvdy52ZXJjZWwuYXBwLyMvYXBpL1ZhcmlhYmxlU2l6ZUdyaWRcclxuICAgICAgICB0aGlzLnJlc2V0QWZ0ZXJJbmRpY2VzKClcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvL1ZhcmlhYmxlU2l6ZUxpc3QgY2FjaGVzIG9mZnNldHMgYW5kIG1lYXN1cmVtZW50cyBmb3IgZWFjaCBpbmRleCBmb3IgcGVyZm9ybWFuY2UgcHVycG9zZXMuXHJcbiAgICAgICAgLy9UaGlzIG1ldGhvZCBjbGVhcnMgdGhhdCBjYWNoZWQgZGF0YSBmb3IgYWxsIGl0ZW1zIGFmdGVyIChhbmQgaW5jbHVkaW5nKSB0aGUgc3BlY2lmaWVkIGluZGV4LiBJdCBzaG91bGQgYmUgY2FsbGVkIHdoZW5ldmVyIGEgaXRlbSdzIHNpemUgY2hhbmdlcy5cclxuICAgICAgICB0aGlzLmxpc3RSZWY/LmN1cnJlbnQ/LnJlc2V0QWZ0ZXJJbmRleCAmJiB0aGlzLmxpc3RSZWY/LmN1cnJlbnQ/LnJlc2V0QWZ0ZXJJbmRleCgwLCBzaG91bGRGb3JjZVVwZGF0ZSlcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByZWFkb25seSBpc0RzQ29uZmlndXJlZCA9ICgpOiBib29sZWFuID0+IHtcclxuICAgIGNvbnN0IHsgdXNlRGF0YVNvdXJjZXMgfSA9IHRoaXMucHJvcHNcclxuICAgIHJldHVybiAhIXVzZURhdGFTb3VyY2VzICYmICEhdXNlRGF0YVNvdXJjZXNbMF1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgcmVhZG9ubHkgc2VsZWN0UmVjb3JkcyA9IChyZWNvcmRzOiBEYXRhUmVjb3JkW10pID0+IHtcclxuICAgIGNvbnN0IHsgZGF0YXNvdXJjZSB9ID0gdGhpcy5zdGF0ZVxyXG5cclxuICAgIGlmIChkYXRhc291cmNlKSB7XHJcbiAgICAgIE1lc3NhZ2VNYW5hZ2VyLmdldEluc3RhbmNlKCkucHVibGlzaE1lc3NhZ2UoXHJcbiAgICAgICAgbmV3IERhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlTWVzc2FnZSh0aGlzLnByb3BzLmlkLCByZWNvcmRzKVxyXG4gICAgICApXHJcblxyXG4gICAgICBpZiAocmVjb3Jkcykge1xyXG4gICAgICAgIHRoaXMuaXNNeVNlbGVjdGVkID0gdHJ1ZVxyXG4gICAgICAgIHRoaXMuaXNIYXNQdWJsaXNoTWVzc2FnZUFjdGlvbiA9IHRydWVcclxuICAgICAgICBkYXRhc291cmNlLnNlbGVjdFJlY29yZHNCeUlkcyhyZWNvcmRzLm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpKVxyXG4gICAgICAgIGNvbnN0IG91dHB1dERzID0gdGhpcy5nZXRPdXRwdXREcygpXHJcbiAgICAgICAgb3V0cHV0RHMgJiZcclxuICAgICAgICAgIG91dHB1dERzLnNlbGVjdFJlY29yZHNCeUlkcyhyZWNvcmRzLm1hcChyZWNvcmQgPT4gcmVjb3JkLmdldElkKCkpKVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuaXNIYXNQdWJsaXNoTWVzc2FnZUFjdGlvbiA9IGZhbHNlXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZvcm1hdE1lc3NhZ2UgPSAoaWQ6IHN0cmluZywgdmFsdWVzPzogeyBba2V5OiBzdHJpbmddOiBhbnkgfSkgPT4ge1xyXG4gICAgcmV0dXJuIHRoaXMucHJvcHMuaW50bC5mb3JtYXRNZXNzYWdlKFxyXG4gICAgICB7IGlkOiBpZCwgZGVmYXVsdE1lc3NhZ2U6IE1FU1NBR0VTW2lkXSB9LFxyXG4gICAgICB2YWx1ZXNcclxuICAgIClcclxuICB9XHJcblxyXG4gIC8vIGNhbGwgZXhlYyBtYW51bHlcclxuICBlZGl0U3RhdHVzID0gKG5hbWUsIHZhbHVlKSA9PiB7XHJcbiAgICBjb25zdCB7IGRpc3BhdGNoLCBpZCB9ID0gdGhpcy5wcm9wc1xyXG4gICAgZGlzcGF0Y2goYXBwQWN0aW9ucy53aWRnZXRTdGF0ZVByb3BDaGFuZ2UoaWQsIG5hbWUsIHZhbHVlKSlcclxuICB9XHJcblxyXG4gIGVkaXRXaWRnZXRDb25maWcgPSBuZXdDb25maWcgPT4ge1xyXG4gICAgaWYgKCF3aW5kb3cuamltdUNvbmZpZy5pc0luQnVpbGRlcikgcmV0dXJuXHJcblxyXG4gICAgY29uc3QgYXBwQ29uZmlnQWN0aW9uID0gdGhpcy5wcm9wcy5idWlsZGVyU3VwcG9ydE1vZHVsZXMuamltdUZvckJ1aWxkZXJMaWIuZ2V0QXBwQ29uZmlnQWN0aW9uKClcclxuICAgIGFwcENvbmZpZ0FjdGlvbi5lZGl0V2lkZ2V0Q29uZmlnKHRoaXMucHJvcHMuaWQsIG5ld0NvbmZpZykuZXhlYygpXHJcbiAgfVxyXG5cclxuICBzY3JvbGxUb0luZGV4ID0gKGluZGV4OiBudW1iZXIsIHR5cGU6IHN0cmluZyA9ICdzdGFydCcpID0+IHtcclxuICAgIGNvbnN0IHsgY29uZmlnIH0gPSB0aGlzLnByb3BzXHJcbiAgICBpZiAodGhpcy5saXN0UmVmLmN1cnJlbnQpIHtcclxuICAgICAgaWYgKGNvbmZpZz8ubGF5b3V0VHlwZSA9PT0gTGlzdExheW91dFR5cGUuR1JJRCkge1xyXG4gICAgICAgIGNvbnN0IGNvbHVtbkNvdW50ID0gdGhpcy5nZXRJdGVtQ29sdW1uQ291bnQoKVxyXG4gICAgICAgIGNvbnN0IHJvd0luZGV4ID0gTWF0aC5mbG9vcihpbmRleCAvIGNvbHVtbkNvdW50KVxyXG4gICAgICAgIHRoaXMubGlzdFJlZi5jdXJyZW50LnNjcm9sbFRvSXRlbSh7XHJcbiAgICAgICAgICBjb2x1bW5JbmRleDogaW5kZXggLSByb3dJbmRleCAqIGNvbHVtbkNvdW50LFxyXG4gICAgICAgICAgcm93SW5kZXg6IHJvd0luZGV4LFxyXG4gICAgICAgICAgYWxpZ246IHR5cGVcclxuICAgICAgICB9KVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMubGlzdFJlZi5jdXJyZW50LnNjcm9sbFRvSXRlbShpbmRleCwgdHlwZSlcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaXNFZGl0aW5nID0gKCk6IGJvb2xlYW4gPT4ge1xyXG4gICAgY29uc3QgeyBhcHBNb2RlLCBjb25maWcsIHNlbGVjdGlvbklzU2VsZiwgc2VsZWN0aW9uSXNJblNlbGYgfSA9IHRoaXMucHJvcHNcclxuICAgIGlmICghd2luZG93LmppbXVDb25maWcuaXNJbkJ1aWxkZXIpIHJldHVybiBmYWxzZVxyXG4gICAgcmV0dXJuIChcclxuICAgICAgKHNlbGVjdGlvbklzU2VsZiB8fCBzZWxlY3Rpb25Jc0luU2VsZikgJiZcclxuICAgICAgd2luZG93LmppbXVDb25maWcuaXNJbkJ1aWxkZXIgJiZcclxuICAgICAgYXBwTW9kZSAhPT0gQXBwTW9kZS5SdW4gJiZcclxuICAgICAgY29uZmlnLmlzSXRlbVN0eWxlQ29uZmlybVxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByZWFkb25seSBoYW5kbGVJdGVtQ2hhbmdlID0gKGl0ZW1SZWNvcmQ6IERhdGFSZWNvcmQpID0+IHtcclxuICAgIGNvbnN0IHsgY29uZmlnIH0gPSB0aGlzLnByb3BzXHJcbiAgICBjb25zdCB7IGRhdGFzb3VyY2UgfSA9IHRoaXMuc3RhdGVcclxuICAgIGlmICghZGF0YXNvdXJjZSB8fCAhaXRlbVJlY29yZCkgcmV0dXJuXHJcblxyXG4gICAgbGV0IHNlbGVjdGVkUmVjb3JkcyA9IGRhdGFzb3VyY2UuZ2V0U2VsZWN0ZWRSZWNvcmRzKCkgfHwgW11cclxuICAgIGlmIChcclxuICAgICAgY29uZmlnLmNhcmRDb25maWdzW1N0YXR1cy5TZWxlY3RlZF0uc2VsZWN0aW9uTW9kZSAmJlxyXG4gICAgICBjb25maWcuY2FyZENvbmZpZ3NbU3RhdHVzLlNlbGVjdGVkXS5zZWxlY3Rpb25Nb2RlICE9PVxyXG4gICAgICBTZWxlY3Rpb25Nb2RlVHlwZS5Ob25lXHJcbiAgICApIHtcclxuICAgICAgY29uc3QgcmVjb3JkSWQgPSBpdGVtUmVjb3JkPy5nZXRJZCgpXHJcbiAgICAgIGNvbnN0IHJlY29yZCA9IHNlbGVjdGVkUmVjb3Jkcy5maW5kKHJlY29yZCA9PiByZWNvcmQuZ2V0SWQoKSA9PT0gcmVjb3JkSWQpXHJcbiAgICAgIGlmIChcclxuICAgICAgICBjb25maWcuY2FyZENvbmZpZ3NbU3RhdHVzLlNlbGVjdGVkXS5zZWxlY3Rpb25Nb2RlID09PVxyXG4gICAgICAgIFNlbGVjdGlvbk1vZGVUeXBlLlNpbmdsZVxyXG4gICAgICApIHtcclxuICAgICAgICBpZiAocmVjb3JkKSB7XHJcbiAgICAgICAgICB0aGlzLnNlbGVjdFJlY29yZHMoW10pXHJcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgc2hvd1NlbGVjdGlvbk9ubHk6IGZhbHNlIH0pXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuc2VsZWN0UmVjb3JkcyhbaXRlbVJlY29yZF0pXHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmIChyZWNvcmQpIHtcclxuICAgICAgICAgIHNlbGVjdGVkUmVjb3JkcyA9IHNlbGVjdGVkUmVjb3Jkcy5maWx0ZXIoXHJcbiAgICAgICAgICAgIHJlY29yZCA9PiByZWNvcmQuZ2V0SWQoKSAhPT0gcmVjb3JkSWRcclxuICAgICAgICAgIClcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc2VsZWN0ZWRSZWNvcmRzID0gW2l0ZW1SZWNvcmRdLmNvbmNhdChzZWxlY3RlZFJlY29yZHMpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2VsZWN0UmVjb3JkcyhzZWxlY3RlZFJlY29yZHMpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIG1vdXNlQ2xpY2tUaW1lb3V0OiBOb2RlSlMuVGltZXJcclxuXHJcbiAgaGFuZGxlTGlzdFBvaW50ZXJEb3duID0gZXZ0ID0+IHtcclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICBmb3JjZVNob3dNYXNrOiB0cnVlXHJcbiAgICB9KVxyXG4gICAgaWYgKHRoaXMubW91c2VDbGlja1RpbWVvdXQpIHtcclxuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMubW91c2VDbGlja1RpbWVvdXQpXHJcbiAgICAgIHRoaXMubW91c2VDbGlja1RpbWVvdXQgPSB1bmRlZmluZWRcclxuICAgIH1cclxuICAgIHRoaXMubW91c2VDbGlja1RpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgZm9yY2VTaG93TWFzazogZmFsc2VcclxuICAgICAgfSlcclxuICAgIH0sIDIwMClcclxuICB9XHJcblxyXG4gIGhhbmRsZVNjcm9sbFVwID0gZSA9PiB7XHJcbiAgICBpZiAoZSkge1xyXG4gICAgICB0aGlzLmlzU2Nyb2xsVG9OZXh0U3RlcCA9IHRydWVcclxuICAgIH1cclxuICAgIGNvbnN0IHNjcm9sbFN0ZXAgPSB0aGlzLmdldFNjcm9sbFN0ZXAoKVxyXG4gICAgY29uc3QgbGlzdFZpc2libGVTdGFydEluZGV4ID0gdGhpcy5nZXRMaXN0VmlzaWJsZVN0YXJ0SW5kZXgoKVxyXG4gICAgbGV0IHRvSW5kZXggPSBsaXN0VmlzaWJsZVN0YXJ0SW5kZXggLSBzY3JvbGxTdGVwXHJcbiAgICBpZiAodG9JbmRleCA8IDApIHtcclxuICAgICAgdG9JbmRleCA9IDBcclxuICAgIH1cclxuICAgIHRoaXMuc2Nyb2xsVG9JbmRleCh0b0luZGV4LCAnc3RhcnQnKVxyXG4gICAgdGhpcy5pc1Njcm9sbFRvTmV4dFN0ZXAgPSBmYWxzZVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlU2Nyb2xsRG93biA9IGUgPT4ge1xyXG4gICAgbGV0IGxpc3RWaXNpYmxlRW5kSW5kZXggPSAwXHJcbiAgICBpZiAoZSkge1xyXG4gICAgICAvL0NsaWNrIHRoZSBOZXh0IEJ1dHRvbiB0byB0cmlnZ2VyLCBhZnRlciBjbGlja2luZywganVtcCBhY2NvcmRpbmcgdG8gdGhlIGxhc3QgdmlzaWJsZSBsaW5lXHJcbiAgICAgIGxpc3RWaXNpYmxlRW5kSW5kZXggPSB0aGlzLmdldExpc3RWaXNpYmxlRW5kSW5kZXgoKVxyXG4gICAgICB0aGlzLmlzU2Nyb2xsVG9OZXh0U3RlcCA9IHRydWVcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vRXhlY3V0ZSBhZnRlciBSZWNvcmQgbG9hZCwganVtcCBhY2NvcmRpbmcgdG8gdGhlIGZpcnN0IHZpc2libGUgbGluZVxyXG4gICAgICBsaXN0VmlzaWJsZUVuZEluZGV4ID0gdGhpcy5nZXRMaXN0VmlzaWJsZVN0YXJ0SW5kZXgoKVxyXG4gICAgfVxyXG4gICAgY29uc3Qgc2Nyb2xsU3RlcCA9IHRoaXMuZ2V0U2Nyb2xsU3RlcCgpXHJcbiAgICBjb25zdCB7IGxpc3RWaXNpYmxlU3RvcEluZGV4IH0gPSB0aGlzXHJcbiAgICBpZiAoXHJcbiAgICAgIGxpc3RWaXNpYmxlU3RvcEluZGV4ICsgc2Nyb2xsU3RlcCA+PSB0aGlzLnJlY29yZHMubGVuZ3RoIC0gMSAmJlxyXG4gICAgICB0aGlzLnJlY29yZHMubGVuZ3RoIDwgdGhpcy5nZXRUb3RhbENvdW50KClcclxuICAgICkge1xyXG4gICAgICB0aGlzLmlzU3dpdGNoUGFnZSA9IHRydWVcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgcGFnZTogdGhpcy5zdGF0ZS5wYWdlICsgMVxyXG4gICAgICB9KVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKHRoaXMubmVlZEF1dG9TY3JvbGxUb1NlbGVjdGVkSXRlbVdoZW5Mb2FkUGFnZSkge1xyXG4gICAgICAgIHRoaXMuc2Nyb2xsVG9JbmRleCh0aGlzLmF1dG9TY3JvbGxJbmRleClcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnNjcm9sbFRvSW5kZXgobGlzdFZpc2libGVFbmRJbmRleCArIHNjcm9sbFN0ZXAsICdzdGFydCcpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldFNjcm9sbFN0ZXAgPSAoKSA9PiB7XHJcbiAgICBjb25zdCB7IHNjcm9sbFN0ZXAsIGxheW91dFR5cGUgfSA9IHRoaXMucHJvcHMuY29uZmlnXHJcbiAgICBjb25zdCBzdGVwID0gdGhpcy5pc1Njcm9sbFRvTmV4dFN0ZXAgPyBzY3JvbGxTdGVwIDogMFxyXG4gICAgY29uc3QgY29sdW1uQ291bnQgPSB0aGlzLmdldEl0ZW1Db2x1bW5Db3VudCgpXHJcbiAgICByZXR1cm4gbGF5b3V0VHlwZSA9PT0gTGlzdExheW91dFR5cGUuR1JJRCA/IHN0ZXAgKiBjb2x1bW5Db3VudCA6IHN0ZXBcclxuICB9XHJcblxyXG4gIGhhbmRsZVN3aXRjaFBhZ2UgPSAocGFnZU51bTogbnVtYmVyKSA9PiB7XHJcbiAgICBjb25zdCB0b3RhbFBhZ2VzID0gdGhpcy5nZXRUb3RhbFBhZ2UoKVxyXG4gICAgaWYgKHBhZ2VOdW0gPCAxIHx8IHBhZ2VOdW0gPiB0b3RhbFBhZ2VzKSByZXR1cm5cclxuICAgIGlmIChwYWdlTnVtICE9PSB0aGlzLnN0YXRlLnBhZ2UpIHtcclxuICAgICAgdGhpcy5pc1N3aXRjaFBhZ2UgPSB0cnVlXHJcbiAgICAgIHRoaXMubGFzdFF1ZXJ5U3RhcnQgPSB0aGlzLnN0YXRlLnBhZ2VcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgcGFnZTogcGFnZU51bVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlTGlzdE1vdXNlTGVhdmUgPSAoKSA9PiB7XHJcbiAgICBpZiAodGhpcy5pc0VkaXRpbmcoKSkgcmV0dXJuXHJcbiAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgaG92ZXJJbmRleDogLTFcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBoYW5kbGVMaXN0TW91c2VNb3ZlID0gKGl0ZW1JbmRleDogbnVtYmVyKSA9PiB7XHJcbiAgICBpZiAodGhpcy5pc0VkaXRpbmcoKSkgcmV0dXJuXHJcbiAgICBpZiAoaXRlbUluZGV4ID09PSB0aGlzLnN0YXRlLmhvdmVySW5kZXgpIHJldHVyblxyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIGhvdmVySW5kZXg6IGl0ZW1JbmRleFxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGxhc3RTY3JvbGxPZmZzZXQgPSAwXHJcbiAgdGltZVN0YW1wXHJcbiAgaGFuZGxlTGlzdFNjcm9sbCA9ICh7XHJcbiAgICBzY3JvbGxEaXJlY3Rpb24sXHJcbiAgICBzY3JvbGxPZmZzZXQsXHJcbiAgICBzY3JvbGxUb3AsXHJcbiAgICBzY3JvbGxVcGRhdGVXYXNSZXF1ZXN0ZWRcclxuICB9KSA9PiB7XHJcbiAgICBjb25zdCB7IGFwcE1vZGUsIGNvbmZpZyB9ID0gdGhpcy5wcm9wc1xyXG4gICAgY29uc3QgbGlzdERpdiA9IHRoaXMubGlzdE91dERpdlJlZlxyXG4gICAgY29uc3QgeyBkYXRhc291cmNlLCBzY3JvbGxTdGF0dXMgfSA9IHRoaXMuc3RhdGVcclxuICAgIHRoaXMubGFzdFNjcm9sbE9mZnNldCA9IGNvbmZpZz8ubGF5b3V0VHlwZSA9PT0gTGlzdExheW91dFR5cGUuR1JJRCA/IHNjcm9sbFRvcCA6IHNjcm9sbE9mZnNldFxyXG4gICAgaWYgKCFsaXN0RGl2IHx8ICh0aGlzLnJlY29yZHM/Lmxlbmd0aCA/PyAwKSA8IDEpIHJldHVyblxyXG4gICAgaWYgKFxyXG4gICAgICBjb25maWcucGFnZVN0eWxlID09PSBQYWdlU3R5bGUuU2Nyb2xsICYmXHJcbiAgICAgIHRoaXMucXVlcnlTdGF0dXMgIT09IERhdGFTb3VyY2VTdGF0dXMuTG9hZGluZyAmJlxyXG4gICAgICBkYXRhc291cmNlICYmXHJcbiAgICAgICghd2luZG93LmppbXVDb25maWcuaXNJbkJ1aWxkZXIgfHwgYXBwTW9kZSA9PT0gQXBwTW9kZS5SdW4pXHJcbiAgICApIHtcclxuICAgICAgdGhpcy5pc0hhc1Njcm9sbGVkID0gdHJ1ZVxyXG4gICAgICBpZiAobGlzdFV0aWxzLmlzU2Nyb2xsU3RhcnQobGlzdERpdiwgdGhpcy5sYXN0U2Nyb2xsT2Zmc2V0KSkge1xyXG4gICAgICAgIGlmIChzY3JvbGxTdGF0dXMgIT09ICdzdGFydCcpIHtcclxuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBzY3JvbGxTdGF0dXM6ICdzdGFydCdcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmIChzY3JvbGxTdGF0dXMgIT09ICdtaWQnKSB7XHJcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgc2Nyb2xsU3RhdHVzOiAnbWlkJ1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldFRvdGFsUGFnZSA9ICgpID0+IHtcclxuICAgIGNvbnN0IHsgdG90YWxDb3VudCB9ID0gdGhpc1xyXG4gICAgY29uc3QgeyBjb25maWcgfSA9IHRoaXMucHJvcHNcclxuICAgIGNvbnN0IHRvdGFsID0gdG90YWxDb3VudFxyXG4gICAgY29uc3QgdG90YWxQYWdlID0gTWF0aC5mbG9vcih0b3RhbCAvIGNvbmZpZy5pdGVtc1BlclBhZ2UpXHJcbiAgICBjb25zdCBtb2RlID0gdG90YWwgJSBjb25maWcuaXRlbXNQZXJQYWdlXHJcbiAgICByZXR1cm4gbW9kZSA9PT0gMCA/IHRvdGFsUGFnZSA6IHRvdGFsUGFnZSArIDFcclxuICB9XHJcblxyXG4gIGdldExpc3RWaXNpYmxlU3RhcnRJbmRleCA9ICgpID0+IHtcclxuICAgIGNvbnN0IHsgbGFzdFNjcm9sbE9mZnNldCB9ID0gdGhpc1xyXG4gICAgY29uc3QgeyBjb25maWcgfSA9IHRoaXMucHJvcHNcclxuICAgIGNvbnN0IGl0ZW1TaXplID0gdGhpcy5pdGVtU2l6ZSgwKVxyXG4gICAgY29uc3QgYmFzZSA9IChsYXN0U2Nyb2xsT2Zmc2V0ICogMS4wKSAvIGl0ZW1TaXplXHJcbiAgICBsZXQgaW5kZXggPSBNYXRoLmZsb29yKGJhc2UpXHJcbiAgICBjb25zdCBtbyA9IChiYXNlIC0gaW5kZXgpICogaXRlbVNpemVcclxuICAgIGNvbnN0IHNwYWNlID0gY29uZmlnPy5sYXlvdXRUeXBlID09PSBMaXN0TGF5b3V0VHlwZS5HUklEID8gY29uZmlnPy52ZXJ0aWNhbFNwYWNlIDogY29uZmlnPy5zcGFjZVxyXG4gICAgY29uc3QgY29sdW1uQ291bnQgPSB0aGlzLmdldEl0ZW1Db2x1bW5Db3VudCgpXHJcbiAgICBpbmRleCA9IGNvbmZpZz8ubGF5b3V0VHlwZSA9PT0gTGlzdExheW91dFR5cGUuR1JJRCA/IGluZGV4ICogY29sdW1uQ291bnQgOiBpbmRleFxyXG4gICAgaWYgKG1vID4gaXRlbVNpemUgLSBzcGFjZSkge1xyXG4gICAgICBpbmRleCA9IGNvbmZpZz8ubGF5b3V0VHlwZSA9PT0gTGlzdExheW91dFR5cGUuR1JJRCA/IGluZGV4ICsgY29sdW1uQ291bnQgOiBpbmRleCArIDFcclxuICAgIH1cclxuICAgIHJldHVybiBpbmRleFxyXG4gIH1cclxuXHJcbiAgZ2V0TGlzdFZpc2libGVFbmRJbmRleCA9ICgpID0+IHtcclxuICAgIGNvbnN0IHsgbGFzdFNjcm9sbE9mZnNldCB9ID0gdGhpc1xyXG4gICAgY29uc3QgeyBjb25maWcgfSA9IHRoaXMucHJvcHNcclxuICAgIGNvbnN0IGl0ZW1TaXplID0gdGhpcy5pdGVtU2l6ZSgwKVxyXG4gICAgY29uc3QgaXNIb3Jpem9uID0gY29uZmlnPy5sYXlvdXRUeXBlID09PSBMaXN0TGF5b3V0VHlwZS5Db2x1bW5cclxuICAgIGNvbnN0IGxpc3RJdGVtQ29udGVudFNpemUgPSB0aGlzLmdldExpc3RTaXplKClcclxuICAgIGNvbnN0IGNvbnRlbnRTaXplID0gaXNIb3Jpem9uID8gbGlzdEl0ZW1Db250ZW50U2l6ZS53aWR0aCA6IGxpc3RJdGVtQ29udGVudFNpemUuaGVpZ2h0XHJcbiAgICBjb25zdCBiYXNlID0gKChsYXN0U2Nyb2xsT2Zmc2V0ICsgY29udGVudFNpemUpICogMS4wKSAvIGl0ZW1TaXplXHJcbiAgICBsZXQgaW5kZXggPSBNYXRoLmZsb29yKGJhc2UpXHJcbiAgICBjb25zdCBtbyA9IChiYXNlIC0gaW5kZXgpICogaXRlbVNpemVcclxuICAgIGNvbnN0IHNwYWNlID0gY29uZmlnPy5sYXlvdXRUeXBlID09PSBMaXN0TGF5b3V0VHlwZS5HUklEID8gY29uZmlnPy52ZXJ0aWNhbFNwYWNlIDogY29uZmlnPy5zcGFjZVxyXG4gICAgY29uc3QgY29sdW1uQ291bnQgPSB0aGlzLmdldEl0ZW1Db2x1bW5Db3VudCgpXHJcbiAgICBpbmRleCA9IGNvbmZpZz8ubGF5b3V0VHlwZSA9PT0gTGlzdExheW91dFR5cGUuR1JJRCA/IGluZGV4ICogY29sdW1uQ291bnQgLSAxIDogaW5kZXhcclxuXHJcbiAgICBpZiAoaW5kZXggPCAwKSB7XHJcbiAgICAgIGluZGV4ID0gMFxyXG4gICAgfVxyXG5cclxuICAgIGlmIChtbyA+IGl0ZW1TaXplIC0gc3BhY2UpIHtcclxuICAgICAgaW5kZXggPSBjb25maWc/LmxheW91dFR5cGUgPT09IExpc3RMYXlvdXRUeXBlLkdSSUQgPyBpbmRleCArIGNvbHVtbkNvdW50IDogaW5kZXggKyAxXHJcbiAgICB9XHJcbiAgICByZXR1cm4gaW5kZXhcclxuICB9XHJcblxyXG4gIGhhbmRsZVNvcnRPcHRpb25DaGFuZ2UgPSAoZXZ0LCBpdGVtOiBNeURyb3BEb3duSXRlbSkgPT4ge1xyXG4gICAgdGhpcy5zZXRTdGF0ZShcclxuICAgICAge1xyXG4gICAgICAgIHNvcnRPcHRpb25OYW1lOiBpdGVtLmxhYmVsLFxyXG4gICAgICAgIHBhZ2U6IDFcclxuICAgICAgfSxcclxuICAgICAgKCkgPT4ge1xyXG4gICAgICAgIC8vIHRoaXMuc2VsZWN0UmVjb3JkcyhbXSlcclxuICAgICAgfVxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlU2VhcmNoVGV4dENoYW5nZSA9IHNlYXJjaFRleHQgPT4ge1xyXG4gICAgaWYgKHNlYXJjaFRleHQgPT09ICcnIHx8ICFzZWFyY2hUZXh0KSB7XHJcbiAgICAgIHRoaXMuaGFuZGxlU2VhcmNoU3VibWl0KHVuZGVmaW5lZClcclxuICAgIH1cclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICBzZWFyY2hTdWdnZXN0aW9uOiBbXVxyXG4gICAgfSlcclxuICAgIGNsZWFyVGltZW91dCh0aGlzLnN1Z2dlc3Rpb25zUXVlcnlUaW1lb3V0KVxyXG4gICAgdGhpcy5zdWdnZXN0aW9uc1F1ZXJ5VGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICB0aGlzLmdldFNlYXJjaFN1Z2dlc3Rpb25zKHNlYXJjaFRleHQpXHJcbiAgICB9LCAyMDApXHJcbiAgfVxyXG5cclxuICBnZXRTZWFyY2hTdWdnZXN0aW9ucyA9IHNlYXJjaFRleHQgPT4ge1xyXG4gICAgY29uc3QgeyBjb25maWcgfSA9IHRoaXMucHJvcHNcclxuICAgIGNvbnN0IHsgZGF0YXNvdXJjZSB9ID0gdGhpcy5zdGF0ZVxyXG4gICAgaWYgKHNlYXJjaFRleHQ/Lmxlbmd0aCA8IDMpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICB9XHJcbiAgICBmZXRjaFN1Z2dlc3Rpb25SZWNvcmRzKHNlYXJjaFRleHQsIGNvbmZpZywgZGF0YXNvdXJjZSkudGhlbihcclxuICAgICAgc2VhcmNoU3VnZ2VzdGlvbiA9PiB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICBzZWFyY2hTdWdnZXN0aW9uOiBzZWFyY2hTdWdnZXN0aW9uXHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlU2VhcmNoU3VibWl0ID0gKHNlYXJjaFRleHQsIGlzRW50ZXIgPSBmYWxzZSkgPT4ge1xyXG4gICAgY29uc3Qgb2xkU2VhcmNoVGV4dCA9IHRoaXMuc3RhdGUuc2VhcmNoVGV4dFxyXG4gICAgaWYgKG9sZFNlYXJjaFRleHQgPT09IHNlYXJjaFRleHQgJiYgIWlzRW50ZXIpIHtcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICB0aGlzLnNldFN0YXRlKFxyXG4gICAgICB7XHJcbiAgICAgICAgc2VhcmNoVGV4dDogc2VhcmNoVGV4dCxcclxuICAgICAgICBwYWdlOiAxXHJcbiAgICAgIH0sXHJcbiAgICAgICgpID0+IHtcclxuICAgICAgICAvLyB0aGlzLnNlbGVjdFJlY29yZHMoW10pXHJcbiAgICAgIH1cclxuICAgIClcclxuICB9XHJcblxyXG4gIGNoYW5nZUlzUmVzaXppbmdDYXJkIChpc1Jlc2l6aW5nQ2FyZDogYm9vbGVhbikge1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIGlzUmVzaXppbmdDYXJkOiBpc1Jlc2l6aW5nQ2FyZFxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGhhbmRsZVJlc2l6ZUNhcmQgKFxyXG4gICAgbmV3Q2FyZFNpemUsXHJcbiAgICByZXNpemVFbmQ6IGJvb2xlYW4gPSBmYWxzZSxcclxuICAgIGlzVG9wPzogYm9vbGVhbixcclxuICAgIGlzTGVmdD86IGJvb2xlYW4sXHJcbiAgICBpc1JlcGxhY2U6IGJvb2xlYW4gPSBmYWxzZVxyXG4gICkge1xyXG4gICAgaWYgKHJlc2l6ZUVuZCkge1xyXG4gICAgICBjb25zdCBjYXJkU2l6ZSA9IHRoaXMuaW5pdE5ld0NhcmRTaXplKG5ld0NhcmRTaXplKVxyXG4gICAgICB3aW5kb3cuamltdUNvbmZpZy5pc0luQnVpbGRlciAmJlxyXG4gICAgICAgIHRoaXMucHJvcHMuYnVpbGRlclN1cHBvcnRNb2R1bGVzLndpZGdldE1vZHVsZXMuaGFuZGxlUmVzaXplQ2FyZChcclxuICAgICAgICAgIHRoaXMucHJvcHMsXHJcbiAgICAgICAgICBjYXJkU2l6ZSxcclxuICAgICAgICAgIGlzVG9wLFxyXG4gICAgICAgICAgaXNMZWZ0LFxyXG4gICAgICAgICAgcmVzaXplRW5kLFxyXG4gICAgICAgICAgaXNSZXBsYWNlXHJcbiAgICAgICAgKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zZXRTdGF0ZShcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjdXJyZW50Q2FyZFNpemU6IG5ld0NhcmRTaXplXHJcbiAgICAgICAgfSxcclxuICAgICAgICAoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLnJlZnJlc2hMaXN0KGZhbHNlKVxyXG4gICAgICAgIH1cclxuICAgICAgKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaW5pdE5ld0NhcmRTaXplID0gKG5ld0NhcmRTaXplOiBFbGVtZW50U2l6ZSkgPT4ge1xyXG4gICAgY29uc3QgeyBjb25maWcgfSA9IHRoaXMucHJvcHNcclxuICAgIC8vSWYgdGhlIG9yaWdpbmFsIHdpZHRoIGFuZCBoZWlnaHQgYXJlIHBlcmNlbnRhZ2VzLCBweCB3aWxsIGJlIGNvbnZlcnRlZCB0byBwZXJjZW50YWdlcyBkdXJpbmcgcmVzaXplLCBhbmQgdGhlbiBzZXQgdG8gY29uZmlnXHJcbiAgICBjb25zdCB7IHdpZGdldFJlY3QgfSA9IHRoaXMuc3RhdGVcclxuICAgIGxldCBjYXJkU2l6ZSA9IEltbXV0YWJsZShuZXdDYXJkU2l6ZSlcclxuICAgIGNvbnN0IGNhcmRTaXplV2lkdGhVbml0ID0gbGlzdFV0aWxzLmdldENhcmRTaXplV2lkdGhVbml0SW5Db25maWcodGhpcy5wcm9wcylcclxuICAgIGlmIChjYXJkU2l6ZVdpZHRoVW5pdC53aWR0aC51bml0ID09PSBEaXN0YW5jZVVuaXRzLlBFUkNFTlRBR0UpIHtcclxuICAgICAgY2FyZFNpemUgPSBjYXJkU2l6ZS5zZXQoJ3dpZHRoJywgYCR7KG5ld0NhcmRTaXplLndpZHRoICogMTAwKSAvICh3aWRnZXRSZWN0LndpZHRoICsgY29uZmlnPy5ob3Jpem9udGFsU3BhY2UgLSBTQ1JPTExfQkFSX1dJRFRIKX0lYClcclxuICAgIH1cclxuICAgIGlmIChjYXJkU2l6ZVdpZHRoVW5pdC5oZWlnaHQudW5pdCA9PT0gRGlzdGFuY2VVbml0cy5QRVJDRU5UQUdFKSB7XHJcbiAgICAgIGNhcmRTaXplID0gY2FyZFNpemUuc2V0KCdoZWlnaHQnLCBgJHtuZXdDYXJkU2l6ZS5oZWlnaHQgKiAxMDAgLyB3aWRnZXRSZWN0LmhlaWdodH0lYClcclxuICAgIH1cclxuICAgIHJldHVybiBjYXJkU2l6ZT8uYXNNdXRhYmxlKHsgZGVlcDogdHJ1ZSB9KVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlRmlsdGVyQ2hhbmdlID0gKHNxbEV4cHJPYmo6IElNU3FsRXhwcmVzc2lvbikgPT4ge1xyXG4gICAgdGhpcy5zZXRTdGF0ZShcclxuICAgICAge1xyXG4gICAgICAgIGN1cnJlbnRGaWx0ZXI6IHNxbEV4cHJPYmosXHJcbiAgICAgICAgcGFnZTogMVxyXG4gICAgICB9LFxyXG4gICAgICAoKSA9PiB7XHJcbiAgICAgICAgLy8gdGhpcy5zZWxlY3RSZWNvcmRzKFtdKVxyXG4gICAgICB9XHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBoYW5kbGVGaWx0ZXJBcHBseUNoYW5nZSA9IChhcHBsaWVkOiBib29sZWFuKSA9PiB7XHJcbiAgICBjb25zdCBhbHRlclN0YXRlID0ge1xyXG4gICAgICBmaWx0ZXJBcHBsaWVkOiBhcHBsaWVkLFxyXG4gICAgICBxdWVyeVN0YXJ0OiAwXHJcbiAgICB9IGFzIGFueVxyXG5cclxuICAgIGlmICghYXBwbGllZCkge1xyXG4gICAgICAvLyBhbHRlclN0YXRlLmN1cnJlbnRGaWx0ZXIgPSB1bmRlZmluZWRcclxuICAgIH1cclxuICAgIHRoaXMuc2V0U3RhdGUoYWx0ZXJTdGF0ZSwgKCkgPT4ge1xyXG4gICAgICAvLyB0aGlzLnNlbGVjdFJlY29yZHMoW10pXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlU2hvd1NlbGVjdGlvbkNsaWNrID0gZXZ0ID0+IHtcclxuICAgIGNvbnN0IHsgc2hvd1NlbGVjdGlvbk9ubHkgfSA9IHRoaXMuc3RhdGVcclxuICAgIHRoaXMuc2V0U3RhdGUoeyBzaG93U2VsZWN0aW9uT25seTogIXNob3dTZWxlY3Rpb25Pbmx5IH0pXHJcbiAgfVxyXG5cclxuICBoYW5kbGVDbGVhclNlbGVjdGlvbkNsaWNrID0gKCkgPT4ge1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7IHNob3dTZWxlY3Rpb25Pbmx5OiBmYWxzZSB9KVxyXG4gICAgdGhpcy5zZWxlY3RSZWNvcmRzKFtdKVxyXG4gIH1cclxuXHJcbiAgcmVzZXRTaG93U2VsZWN0aW9uU3RhdHVzID0gKCkgPT4ge1xyXG4gICAgY29uc3QgeyBzaG93U2VsZWN0aW9uT25seSB9ID0gdGhpcy5zdGF0ZVxyXG4gICAgaWYgKHNob3dTZWxlY3Rpb25Pbmx5KSB7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBzaG93U2VsZWN0aW9uT25seTogZmFsc2UgfSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9nZXRDdXJyZW50UGFnZSA9ICgpID0+IHtcclxuICAgIHJldHVybiB0aGlzLnN0YXRlLnBhZ2VcclxuICB9XHJcblxyXG4gIGdldFRvdGFsQ291bnQgPSAoKSA9PiB7XHJcbiAgICBjb25zdCB0b3RhbCA9IHRoaXMudG90YWxDb3VudCB8fCAwXHJcbiAgICByZXR1cm4gdG90YWxcclxuICB9XHJcblxyXG4gIHNlbGVjdENhcmQgPSAoKSA9PiB7XHJcbiAgICBjb25zdCB7IHNlbGVjdGlvbklzSW5TZWxmIH0gPSB0aGlzLnByb3BzXHJcbiAgICBpZiAoc2VsZWN0aW9uSXNJblNlbGYpIHtcclxuICAgICAgdGhpcy5zZWxlY3RTZWxmKClcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNlbGVjdFNlbGYgKCkge1xyXG4gICAgd2luZG93LmppbXVDb25maWcuaXNJbkJ1aWxkZXIgJiZcclxuICAgICAgdGhpcy5wcm9wcy5idWlsZGVyU3VwcG9ydE1vZHVsZXMud2lkZ2V0TW9kdWxlcy5zZWxlY3RTZWxmKHRoaXMucHJvcHMpXHJcbiAgfVxyXG5cclxuICBlZGl0QnVpbGRlckFuZFNldHRpbmdTdGF0dXMgPSAoc3RhdHVzOiBTdGF0dXMpID0+IHtcclxuICAgIHRoaXMuZWRpdFN0YXR1cygnc2hvd0NhcmRTZXR0aW5nJywgc3RhdHVzKVxyXG4gICAgdGhpcy5lZGl0U3RhdHVzKCdidWlsZGVyU3RhdHVzJywgc3RhdHVzKVxyXG4gIH1cclxuXHJcbiAgZWRpdExpc3RTaXplSW5SdW5UaW1lID0gKHdpZGdldFJlY3Q6IEVsZW1lbnRTaXplKSA9PiB7XHJcbiAgICBjb25zdCB7IGlkLCBkaXNwYXRjaCB9ID0gdGhpcy5wcm9wc1xyXG4gICAgZGlzcGF0Y2goYXBwQWN0aW9ucy53aWRnZXRTdGF0ZVByb3BDaGFuZ2UoaWQsICd3aWRnZXRSZWN0Jywgd2lkZ2V0UmVjdCkpXHJcbiAgfVxyXG5cclxuICBnZXRTb3J0SXRlbXMgPSAoKTogSW1tdXRhYmxlQXJyYXk8TXlEcm9wRG93bkl0ZW0+ID0+IHtcclxuICAgIGNvbnN0IHsgY29uZmlnIH0gPSB0aGlzLnByb3BzXHJcbiAgICBjb25zdCBvcHRpb25zID0gW10gYXMgYW55XHJcbiAgICBpZiAoY29uZmlnLnNvcnRzKSB7XHJcbiAgICAgIGNvbmZpZy5zb3J0cy5mb3JFYWNoKHNvcnQgPT4ge1xyXG4gICAgICAgIHNvcnQucnVsZSAmJlxyXG4gICAgICAgICAgc29ydC5ydWxlLmZvckVhY2goc29ydERhdGEgPT4ge1xyXG4gICAgICAgICAgICBpZiAoc29ydERhdGEgJiYgISFzb3J0RGF0YS5qaW11RmllbGROYW1lKSB7XHJcbiAgICAgICAgICAgICAgb3B0aW9ucy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGxhYmVsOiBzb3J0LnJ1bGVPcHRpb25OYW1lLFxyXG4gICAgICAgICAgICAgICAgZXZlbnQ6IHRoaXMuaGFuZGxlU29ydE9wdGlvbkNoYW5nZVxyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgICByZXR1cm4gSW1tdXRhYmxlKG9wdGlvbnMpXHJcbiAgfVxyXG5cclxuICBnZXRPdXRwdXREcyAoKTogRGF0YVNvdXJjZSB7XHJcbiAgICBjb25zdCBvdXRwdXREc0lkID1cclxuICAgICAgdGhpcy5wcm9wcy5vdXRwdXREYXRhU291cmNlcyAmJiB0aGlzLnByb3BzLm91dHB1dERhdGFTb3VyY2VzWzBdXHJcbiAgICBjb25zdCB1c2VEcyA9IHRoaXMucHJvcHMudXNlRGF0YVNvdXJjZXMgJiYgdGhpcy5wcm9wcy51c2VEYXRhU291cmNlc1swXVxyXG4gICAgaWYgKCFvdXRwdXREc0lkIHx8ICF1c2VEcykgcmV0dXJuXHJcbiAgICBjb25zdCBkc01hbmFnZXIgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpXHJcbiAgICByZXR1cm4gZHNNYW5hZ2VyLmdldERhdGFTb3VyY2Uob3V0cHV0RHNJZClcclxuICB9XHJcblxyXG4gIHJlbmRlckxpc3RUb3BUb29scyA9IChkczogRGF0YVNvdXJjZSwgcXVlcnlTdGF0dXM/OiBEYXRhU291cmNlU3RhdHVzLCBzZWxlY3RSZWNvcmRzPzogRGF0YVJlY29yZFtdKSA9PiB7XHJcbiAgICBjb25zdCB7IHdpZGdldFJlY3QsIGlzU2VhcmNoQm94VmlzaWJsZSwgaXNPcGVuVG9wVG9vbHNQb3BwZXIgfSA9IHRoaXMuc3RhdGVcclxuICAgIGNvbnN0IGxpc3RXaWR0aCA9IHdpZGdldFJlY3Q/LndpZHRoIHx8IDYyMFxyXG4gICAgY29uc3QgaXNTaG93RGF0YUFjdGlvbiA9IGxpc3RVdGlscy5jaGVja0lzU2hvd0RhdGFBY3Rpb24odGhpcy5wcm9wcylcclxuICAgIGNvbnN0IGlzU2hvd0xpc3RUb29sc09ubHkgPSBsaXN0VXRpbHMuY2hlY2tJc1Nob3dMaXN0VG9vbHNPbmx5KHRoaXMucHJvcHMpXHJcbiAgICBjb25zdCBkYXRhTmFtZSA9IHRoaXMuZm9ybWF0TWVzc2FnZSgnbGlzdERhdGFBY3Rpb25MYWJlbCcsIHsgbGF5ZXI6IGRzPy5nZXRMYWJlbCgpIHx8ICcnIH0pXHJcbiAgICBjb25zdCBMSVNUX1RPT0xfTUlOX1NJWkUgPSBpc1Nob3dEYXRhQWN0aW9uID8gTElTVF9UT09MX01JTl9TSVpFX0RBVEFfQUNUSU9OIDogTElTVF9UT09MX01JTl9TSVpFX05PX0RBVEFfQUNUSU9OXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nZGF0YXNvdXJjZS10b29scyB3LTEwMCcgY3NzPXtnZXRUb3BUb29sU3R5bGUodGhpcy5wcm9wcywgaXNTaG93TGlzdFRvb2xzT25seSl9PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlclwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LWdyb3ctMSB0b29sLXJvd1wiPlxyXG4gICAgICAgICAgICB7aXNTaG93TGlzdFRvb2xzT25seSAmJiA8ZGl2PlxyXG4gICAgICAgICAgICAgIHtsaXN0V2lkdGggPj0gTElTVF9UT09MX01JTl9TSVpFICYmIChcclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0b29sLXJvdyByb3cxIGQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXIgdy0xMDAganVzdGlmeS1jb250ZW50LWJldHdlZW4nPlxyXG4gICAgICAgICAgICAgICAgICB7dGhpcy5yZW5kZXJTZWFyY2hUb29scyhkcywgcXVlcnlTdGF0dXMpfVxyXG4gICAgICAgICAgICAgICAgICB7KCFpc1NlYXJjaEJveFZpc2libGUgfHwgbGlzdFdpZHRoID49IDM2MCkgJiZcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclRvcFJpZ2h0VG9vbHMoZHMsIHF1ZXJ5U3RhdHVzKX1cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAge2xpc3RXaWR0aCA8IExJU1RfVE9PTF9NSU5fU0laRSAmJiAoXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxvYXQtcmlnaHQnIHJlZj17cmVmID0+ICh0aGlzLnJlZmVyZW5jZSA9IHJlZil9PlxyXG4gICAgICAgICAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZT0ndGVydGlhcnknXHJcbiAgICAgICAgICAgICAgICAgICAgaWNvblxyXG4gICAgICAgICAgICAgICAgICAgIHNpemU9J3NtJ1xyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0ndG9vbHMtbWVudSdcclxuICAgICAgICAgICAgICAgICAgICB0aXRsZT17dGhpcy5mb3JtYXRNZXNzYWdlKCdndWlkZVN0ZXA5VGl0bGUnKX1cclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtldnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlzT3BlblRvcFRvb2xzUG9wcGVyOiAhaXNPcGVuVG9wVG9vbHNQb3BwZXIgfSlcclxuICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgPE1lbnVPdXRsaW5lZCBzaXplPXsxNn0vPlxyXG4gICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAge3RoaXMucmVuZGVyTGlzdFRvcFRvb2xzSW5Qb3BlcihkcywgcXVlcnlTdGF0dXMpfVxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgPC9kaXY+fVxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICB7KGRzICYmIGlzU2hvd0RhdGFBY3Rpb24pICYmIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdsaXN0LWRhdGEtYWN0aW9uIHBvc2l0aW9uLXJlbGF0aXZlJywgeyAnbS1sZWZ0JzogbGlzdFdpZHRoIDwgTElTVF9UT09MX01JTl9TSVpFIH0pfSBkYXRhLXRlc3RpZD1cImRhdGEtYWN0aW9uXCI+XHJcbiAgICAgICAgICAgIDxEYXRhQWN0aW9uRHJvcERvd25cclxuICAgICAgICAgICAgICB0eXBlPSd0ZXJ0aWFyeSdcclxuICAgICAgICAgICAgICB3aWRnZXRJZD17dGhpcy5wcm9wcy5pZH1cclxuICAgICAgICAgICAgICBkYXRhU2V0PXt7IGRhdGFTb3VyY2U6IGRzLCByZWNvcmRzOiBzZWxlY3RSZWNvcmRzLCBuYW1lOiBkYXRhTmFtZSB9fVxyXG4gICAgICAgICAgICAgIHNpemU9XCJzbVwiXHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICA8L2Rpdj59XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAge3dpbmRvdy5qaW11Q29uZmlnLmlzSW5CdWlsZGVyICYmIHRoaXMuaXNFZGl0aW5nKCkgJiYgKFxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2VkaXRpbmctbWFzay1kcy10b29sJyAvPlxyXG4gICAgICAgICl9XHJcblxyXG4gICAgICA8L2Rpdj5cclxuICAgIClcclxuICB9XHJcblxyXG4gIHJlbmRlckxpc3RUb3BUb29sc0luUG9wZXIgPSAoXHJcbiAgICBkczogRGF0YVNvdXJjZSxcclxuICAgIHF1ZXJ5U3RhdHVzPzogRGF0YVNvdXJjZVN0YXR1c1xyXG4gICkgPT4ge1xyXG4gICAgY29uc3QgeyB3aWRnZXRSZWN0LCBpc1NlYXJjaEJveFZpc2libGUsIGlzT3BlblRvcFRvb2xzUG9wcGVyIH0gPSB0aGlzLnN0YXRlXHJcbiAgICBjb25zdCB0b29sc0Rpc2FibGVkID0gdGhpcy5pc0VkaXRpbmcoKVxyXG4gICAgY29uc3QgbGlzdFdpZHRoID0gd2lkZ2V0UmVjdD8ud2lkdGggfHwgNjIwXHJcbiAgICBjb25zdCBMSVNUX1RPT0xfTUlOX1NJWkUgPSBsaXN0VXRpbHMuY2hlY2tJc1Nob3dEYXRhQWN0aW9uKHRoaXMucHJvcHMpID8gTElTVF9UT09MX01JTl9TSVpFX0RBVEFfQUNUSU9OIDogTElTVF9UT09MX01JTl9TSVpFX05PX0RBVEFfQUNUSU9OXHJcbiAgICBjb25zdCBpc09wZW4gPVxyXG4gICAgICBsaXN0V2lkdGggPCBMSVNUX1RPT0xfTUlOX1NJWkUgJiYgaXNPcGVuVG9wVG9vbHNQb3BwZXIgJiYgIXRvb2xzRGlzYWJsZWRcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXY+XHJcbiAgICAgICAgPFBvcHBlclxyXG4gICAgICAgICAgcGxhY2VtZW50PSdib3R0b20tc3RhcnQnXHJcbiAgICAgICAgICByZWZlcmVuY2U9e3RoaXMucmVmZXJlbmNlfVxyXG4gICAgICAgICAgb2Zmc2V0PXtbLTEwLCAwXX1cclxuICAgICAgICAgIG9wZW49e2lzT3Blbn1cclxuICAgICAgICAgIHNob3dBcnJvd1xyXG4gICAgICAgICAgdG9nZ2xlPXtlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlzT3BlblRvcFRvb2xzUG9wcGVyOiAhaXNPcGVuIH0pXHJcbiAgICAgICAgICB9fVxyXG4gICAgICAgID5cclxuICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgY2xhc3NOYW1lPSd0b29sLXJvdyByb3cxIGQtZmxleCBhbGlnbi1pdGVtcy1lbmQganVzdGlmeS1jb250ZW50LWJldHdlZW4nXHJcbiAgICAgICAgICAgIGNzcz17Z2V0VG9vbHNQb3BwZXJTdHlsZSh0aGlzLnByb3BzKX1cclxuICAgICAgICAgID5cclxuICAgICAgICAgICAge3RoaXMucmVuZGVyU2VhcmNoVG9vbHMoZHMsIHF1ZXJ5U3RhdHVzKX1cclxuICAgICAgICAgICAgeyFpc1NlYXJjaEJveFZpc2libGUgJiYgdGhpcy5yZW5kZXJUb3BSaWdodFRvb2xzKGRzLCBxdWVyeVN0YXR1cyl9XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L1BvcHBlcj5cclxuICAgICAgPC9kaXY+XHJcbiAgICApXHJcbiAgfVxyXG5cclxuICByZW5kZXJTZWFyY2hUb29scyA9IChkczogRGF0YVNvdXJjZSwgcXVlcnlTdGF0dXM/OiBEYXRhU291cmNlU3RhdHVzKSA9PiB7XHJcbiAgICBjb25zdCB0b29sc0Rpc2FibGVkID1cclxuICAgICAgdGhpcy5pc0VkaXRpbmcoKSB8fCAhZHMgfHwgcXVlcnlTdGF0dXMgIT09IERhdGFTb3VyY2VTdGF0dXMuTG9hZGVkXHJcbiAgICBjb25zdCB7XHJcbiAgICAgIHNlYXJjaFRleHQsXHJcbiAgICAgIHdpZGdldFJlY3QsXHJcbiAgICAgIGlzU2VhcmNoQm94VmlzaWJsZSxcclxuICAgICAgc2hvd0xvYWRpbmdcclxuICAgIH0gPSB0aGlzLnN0YXRlXHJcbiAgICBjb25zdCBsaXN0V2lkdGggPSB3aWRnZXRSZWN0Py53aWR0aCB8fCA2MjBcclxuICAgIGNvbnN0IHsgdGhlbWUsIGNvbmZpZywgYXBwTW9kZSB9ID0gdGhpcy5wcm9wc1xyXG4gICAgY29uc3QgdG9vbExpbmVDbGFzc05hbWUgPSBsaXN0V2lkdGggPCAzNjAgPyAnZHMtdG9vbHMtbGluZS1ibHVlJyA6ICcnXHJcbiAgICBjb25zdCBwbGFjZWhvbGRlciA9IGNvbmZpZz8uc2VhcmNoSGludCB8fCB0aGlzLmZvcm1hdE1lc3NhZ2UoJ3NlYXJjaCcpXHJcbiAgICBjb25zdCBpc1Nob3dCYWNrQnV0dG9uID0gbGlzdFdpZHRoIDwgMzYwICYmIGlzU2VhcmNoQm94VmlzaWJsZVxyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdlxyXG4gICAgICAgIGNsYXNzTmFtZT0nbGlzdC1zZWFyY2gtZGl2IGZsZXgtZ3Jvdy0xJ1xyXG4gICAgICAgIGNzcz17Z2V0U2VhcmNoVG9vbFN0eWxlKHRoaXMucHJvcHMpfVxyXG4gICAgICA+XHJcbiAgICAgICAge2xpc3RVdGlscy5zaG93U2VhcmNoKHRoaXMucHJvcHMpICYmIChcclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkLWZsZXggc2VhcmNoLWJveC1jb250ZW50Jz5cclxuICAgICAgICAgICAgeyhsaXN0V2lkdGggPj0gMzYwIHx8IGlzU2VhcmNoQm94VmlzaWJsZSkgJiYgKFxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4LWdyb3ctMSB3LTEwMCc+XHJcbiAgICAgICAgICAgICAgICA8U2VhcmNoQm94XHJcbiAgICAgICAgICAgICAgICAgIHRoZW1lPXt0aGVtZX1cclxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3BsYWNlaG9sZGVyfVxyXG4gICAgICAgICAgICAgICAgICBzZWFyY2hUZXh0PXtzZWFyY2hUZXh0fVxyXG4gICAgICAgICAgICAgICAgICBvblNlYXJjaFRleHRDaGFuZ2U9e3RoaXMuaGFuZGxlU2VhcmNoVGV4dENoYW5nZX1cclxuICAgICAgICAgICAgICAgICAgb25TdWJtaXQ9e3RoaXMuaGFuZGxlU2VhcmNoU3VibWl0fVxyXG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZD17dG9vbHNEaXNhYmxlZH1cclxuICAgICAgICAgICAgICAgICAgc2VhcmNoU3VnZ2VzdGlvbj17dGhpcy5zdGF0ZS5zZWFyY2hTdWdnZXN0aW9ufVxyXG4gICAgICAgICAgICAgICAgICBzdWdnZXN0aW9uV2lkdGg9e2xpc3RXaWR0aH1cclxuICAgICAgICAgICAgICAgICAgc2hvd0xvYWRpbmc9e3Nob3dMb2FkaW5nfVxyXG4gICAgICAgICAgICAgICAgICBmb3JtYXRNZXNzYWdlPXt0aGlzLmZvcm1hdE1lc3NhZ2V9XHJcbiAgICAgICAgICAgICAgICAgIGlzU2hvd0JhY2tCdXR0b249e2lzU2hvd0JhY2tCdXR0b259XHJcbiAgICAgICAgICAgICAgICAgIHRvZ2dsZVNlYXJjaEJveFZpc2libGU9e3RoaXMudG9nZ2xlU2VhcmNoQm94VmlzaWJsZX1cclxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdsaXN0LXNlYXJjaCAnXHJcbiAgICAgICAgICAgICAgICAgIGFwcE1vZGU9e2FwcE1vZGV9XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ2RzLXRvb2xzLWxpbmUnLCB0b29sTGluZUNsYXNzTmFtZSl9XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICApfVxyXG4gICAgICAgICAgICB7bGlzdFdpZHRoIDwgMzYwICYmICFpc1NlYXJjaEJveFZpc2libGUgJiYgKFxyXG4gICAgICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgICAgIHR5cGU9J3RlcnRpYXJ5J1xyXG4gICAgICAgICAgICAgICAgaWNvblxyXG4gICAgICAgICAgICAgICAgc2l6ZT0nc20nXHJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtldnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZVNlYXJjaEJveFZpc2libGUodHJ1ZSlcclxuICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2xpc3Qtc2VhcmNoLWljb24nXHJcbiAgICAgICAgICAgICAgICB0aXRsZT17dGhpcy5mb3JtYXRNZXNzYWdlKCdzZWFyY2gnKX1cclxuICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICA8U2VhcmNoT3V0bGluZWQgc2l6ZT17MTZ9IGNvbG9yPXt0aGVtZS5jb2xvcnMucGFsZXR0ZS5saWdodFs4MDBdfS8+XHJcbiAgICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICAgICl9XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApfVxyXG4gICAgICA8L2Rpdj5cclxuICAgIClcclxuICB9XHJcblxyXG4gIHRvZ2dsZVNlYXJjaEJveFZpc2libGUgPSAoaXNWaXNpYmxlID0gZmFsc2UpID0+IHtcclxuICAgIGNvbnN0IHsgd2lkZ2V0UmVjdCB9ID0gdGhpcy5zdGF0ZVxyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIGlzU2VhcmNoQm94VmlzaWJsZTogaXNWaXNpYmxlXHJcbiAgICB9KVxyXG4gICAgY29uc3QgTElTVF9UT09MX01JTl9TSVpFID0gbGlzdFV0aWxzLmNoZWNrSXNTaG93RGF0YUFjdGlvbih0aGlzLnByb3BzKSA/IExJU1RfVE9PTF9NSU5fU0laRV9EQVRBX0FDVElPTiA6IExJU1RfVE9PTF9NSU5fU0laRV9OT19EQVRBX0FDVElPTlxyXG4gICAgY29uc3QgbGlzdFdpZHRoID0gd2lkZ2V0UmVjdD8ud2lkdGggfHwgNjIwXHJcbiAgICBpZiAobGlzdFdpZHRoIDwgTElTVF9UT09MX01JTl9TSVpFKSB7XHJcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnNob3dQb3BwZXJUaW1lT3V0KVxyXG4gICAgICB0aGlzLnNob3dQb3BwZXJUaW1lT3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICBpc09wZW5Ub3BUb29sc1BvcHBlcjogdHJ1ZVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRQYWdlU2l6ZSA9ICgpID0+IHtcclxuICAgIGNvbnN0IHsgd2lkZ2V0UmVjdCB9ID0gdGhpcy5zdGF0ZVxyXG4gICAgY29uc3QgeyBjb25maWcgfSA9IHRoaXMucHJvcHNcclxuICAgIGNvbnN0IHNob3dCb3R0b21Ub29sID0gbGlzdFV0aWxzLnNob3dCb3R0b21Ub29scyh0aGlzLnByb3BzLCB0aGlzLnN0YXRlKVxyXG4gICAgY29uc3QgYm90dG9tVG9vbEggPSBsaXN0VXRpbHMuZ2V0Qm90dG9tVG9vbEgoXHJcbiAgICAgIHRoaXMucGFnaW5hdG9yRGl2LmN1cnJlbnQsXHJcbiAgICAgIHNob3dCb3R0b21Ub29sXHJcbiAgICApXHJcbiAgICBjb25zdCBzaG93VG9wVG9vbHMgPSBsaXN0VXRpbHMuc2hvd1RvcFRvb2xzKHRoaXMucHJvcHMpXHJcbiAgICBjb25zdCBsaXN0SGVpZ2h0ID1cclxuICAgICAgbGlzdFV0aWxzLmdldExpc3RIZWlnaHQod2lkZ2V0UmVjdCwgYm90dG9tVG9vbEgsIHNob3dUb3BUb29scykgfHwgMVxyXG4gICAgY29uc3QgY29sdW1uQ291bnQgPSBjb25maWc/LmxheW91dFR5cGUgPT09IExpc3RMYXlvdXRUeXBlLkdSSUQgPyB0aGlzLmdldEl0ZW1Db2x1bW5Db3VudCgpIDogbnVsbFxyXG4gICAgY29uc3QgcmVjb3JkU2l6ZVBlclBhZ2UgPSBNYXRoLm1heChcclxuICAgICAgbGlzdFV0aWxzLmdldFBhZ2VTaXplKHdpZGdldFJlY3QsIGxpc3RIZWlnaHQsIHRoaXMucHJvcHMsIGNvbHVtbkNvdW50KSxcclxuICAgICAgMVxyXG4gICAgKVxyXG4gICAgcmV0dXJuIHJlY29yZFNpemVQZXJQYWdlXHJcbiAgfVxyXG5cclxuICByZW5kZXJUb3BSaWdodFRvb2xzID0gKGRzOiBEYXRhU291cmNlLCBxdWVyeVN0YXR1cz86IERhdGFTb3VyY2VTdGF0dXMpID0+IHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgc29ydE9wdGlvbk5hbWUsXHJcbiAgICAgIHNob3dTZWxlY3Rpb25Pbmx5LFxyXG4gICAgICBjdXJyZW50RmlsdGVyLFxyXG4gICAgICBmaWx0ZXJBcHBsaWVkXHJcbiAgICB9ID0gdGhpcy5zdGF0ZVxyXG4gICAgY29uc3QgeyBjb25maWcsIHRoZW1lLCBpZCwgYXBwTW9kZSB9ID0gdGhpcy5wcm9wc1xyXG4gICAgY29uc3Qgc29ydEl0ZW1zID0gdGhpcy5nZXRTb3J0SXRlbXMoKVxyXG4gICAgY29uc3Qgc2VsZWN0ZWRSZWNvcmRzID0gZHMgJiYgZHMuZ2V0U2VsZWN0ZWRSZWNvcmRzKClcclxuICAgIGNvbnN0IGhhc1NlbGVjdGlvbiA9IHNlbGVjdGVkUmVjb3JkcyAmJiBzZWxlY3RlZFJlY29yZHMubGVuZ3RoID4gMFxyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdlxyXG4gICAgICAgIGNsYXNzTmFtZT0nZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlciBtci0xJ1xyXG4gICAgICAgIHJlZj17dGhpcy5saXN0VG9wUmlnaHRUb29sc0Rpdn1cclxuICAgICAgPlxyXG4gICAgICAgIHtsaXN0VXRpbHMuc2hvd1NvcnQodGhpcy5wcm9wcykgJiYgKFxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2xpc3Qtc29ydC1jb24nPlxyXG4gICAgICAgICAgICA8TXlEcm9wRG93blxyXG4gICAgICAgICAgICAgIHRoZW1lPXt0aGVtZX1cclxuICAgICAgICAgICAgICBpdGVtcz17c29ydEl0ZW1zfVxyXG4gICAgICAgICAgICAgIGFwcE1vZGU9e2FwcE1vZGV9XHJcbiAgICAgICAgICAgICAgdG9nZ2xlVHlwZT0ndGVydGlhcnknXHJcbiAgICAgICAgICAgICAgdG9nZ2xlQXJyb3c9e3RydWV9XHJcbiAgICAgICAgICAgICAgdG9nZ2xlQ29udGVudD17dGhlbWUgPT5cclxuICAgICAgICAgICAgICAgIHNvcnRPcHRpb25OYW1lIHx8IChzb3J0SXRlbXMgJiYgc29ydEl0ZW1zWzBdLmxhYmVsKX1cclxuICAgICAgICAgICAgICBzaXplPSdzbSdcclxuICAgICAgICAgICAgICBjYXJldFxyXG4gICAgICAgICAgICAgIHNob3dBY3RpdmVcclxuICAgICAgICAgICAgICB0b2dnbGVUaXRsZT17dGhpcy5mb3JtYXRNZXNzYWdlKCdsaXN0U29ydCcpfVxyXG4gICAgICAgICAgICAgIGFjdGl2ZUxhYmVsPXtzb3J0T3B0aW9uTmFtZSB8fCAoc29ydEl0ZW1zICYmIHNvcnRJdGVtc1swXS5sYWJlbCl9XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApfVxyXG4gICAgICAgIHtsaXN0VXRpbHMuc2hvd0ZpbHRlcih0aGlzLnByb3BzKSAmJiAoXHJcbiAgICAgICAgICA8RmlsdGVyUGlja2VyXHJcbiAgICAgICAgICAgIGZpbHRlcj17Y3VycmVudEZpbHRlciB8fCBjb25maWcuZmlsdGVyfVxyXG4gICAgICAgICAgICBmaWx0ZXJJbkNvbmZpZz17Y29uZmlnLmZpbHRlcn1cclxuICAgICAgICAgICAgYXBwTW9kZT17YXBwTW9kZX1cclxuICAgICAgICAgICAgYXBwbGllZD17ZmlsdGVyQXBwbGllZH1cclxuICAgICAgICAgICAgdGl0bGU9e3RoaXMuZm9ybWF0TWVzc2FnZSgnZmlsdGVyJyl9XHJcbiAgICAgICAgICAgIHNlbGVjdGVkRHM9e3RoaXMuc3RhdGUuZGF0YXNvdXJjZX1cclxuICAgICAgICAgICAgaGFuZGxlRmlsdGVyQ2hhbmdlPXt0aGlzLmhhbmRsZUZpbHRlckNoYW5nZX1cclxuICAgICAgICAgICAgaGFuZGxlRmlsdGVyQXBwbHlDaGFuZ2U9e3RoaXMuaGFuZGxlRmlsdGVyQXBwbHlDaGFuZ2V9XHJcbiAgICAgICAgICAgIGZvcm1hdE1lc3NhZ2U9e3RoaXMuZm9ybWF0TWVzc2FnZX1cclxuICAgICAgICAgICAgdGhlbWU9e3RoZW1lfVxyXG4gICAgICAgICAgICB3aWRnZXRJZD17aWR9XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgICl9XHJcbiAgICAgICAge2xpc3RVdGlscy5zaG93RGlzcGxheVNlbGVjdGVkT25seSh0aGlzLnByb3BzKSAmJiAoXHJcbiAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgIGRpc2FibGVkPXshaGFzU2VsZWN0aW9ufVxyXG4gICAgICAgICAgICB0eXBlPSd0ZXJ0aWFyeSdcclxuICAgICAgICAgICAgdGl0bGU9e1xyXG4gICAgICAgICAgICAgIHNob3dTZWxlY3Rpb25Pbmx5XHJcbiAgICAgICAgICAgICAgICA/IHRoaXMuZm9ybWF0TWVzc2FnZSgnc2hvd0FsbCcpXHJcbiAgICAgICAgICAgICAgICA6IHRoaXMuZm9ybWF0TWVzc2FnZSgnc2hvd1NlbGVjdGlvbicpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWNvblxyXG4gICAgICAgICAgICBzaXplPSdzbSdcclxuICAgICAgICAgICAgb25DbGljaz17dGhpcy5oYW5kbGVTaG93U2VsZWN0aW9uQ2xpY2t9XHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIHtzaG93U2VsZWN0aW9uT25seSA/IDxNZW51T3V0bGluZWQgc2l6ZT17MTZ9Lz4gOiA8U2hvd1NlbGVjdGlvbk91dGxpbmVkIHNpemU9ezE2fS8+fVxyXG4gICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgKX1cclxuICAgICAgICB7bGlzdFV0aWxzLnNob3dDbGVhclNlbGVjdGVkKHRoaXMucHJvcHMpICYmIChcclxuICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgZGlzYWJsZWQ9eyFoYXNTZWxlY3Rpb259XHJcbiAgICAgICAgICAgIHR5cGU9J3RlcnRpYXJ5J1xyXG4gICAgICAgICAgICB0aXRsZT17dGhpcy5mb3JtYXRNZXNzYWdlKCdjbGVhclNlbGVjdGlvbicpfVxyXG4gICAgICAgICAgICBpY29uXHJcbiAgICAgICAgICAgIHNpemU9J3NtJ1xyXG4gICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmhhbmRsZUNsZWFyU2VsZWN0aW9uQ2xpY2t9XHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIDxUcmFzaENoZWNrT3V0bGluZWQgc2l6ZT17MTZ9Lz5cclxuICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgICl9XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgZ2V0TGlzdFNpemUgPSAoKSA9PiB7XHJcbiAgICBjb25zdCB7IHdpZGdldFJlY3QgfSA9IHRoaXMuc3RhdGVcclxuICAgIGNvbnN0IHNob3dUb3BUb29scyA9IGxpc3RVdGlscy5zaG93VG9wVG9vbHModGhpcy5wcm9wcylcclxuICAgIC8vZ2V0IGxpc3QgdG9vbGBzIHNob3cgc3RhdHVzXHJcbiAgICBjb25zdCBzaG93Qm90dG9tVG9vbCA9IGxpc3RVdGlscy5zaG93Qm90dG9tVG9vbHModGhpcy5wcm9wcywgdGhpcy5zdGF0ZSlcclxuICAgIC8vZ2V0IGxpc3QgYm90dG9tIHRvb2xgcyBoZWlnaHRcclxuICAgIGNvbnN0IGJvdHRvbVRvb2xIID0gbGlzdFV0aWxzLmdldEJvdHRvbVRvb2xIKHRoaXMucGFnaW5hdG9yRGl2LmN1cnJlbnQsIHNob3dCb3R0b21Ub29sKVxyXG4gICAgLy9nZXQgbGlzdCBzaXplXHJcbiAgICBjb25zdCBsaXN0SGVpZ2h0ID0gbGlzdFV0aWxzLmdldExpc3RIZWlnaHQod2lkZ2V0UmVjdCwgYm90dG9tVG9vbEgsIHNob3dUb3BUb29scykgfHwgMVxyXG4gICAgY29uc3QgbGlzdFdpZHRoID0gKHdpZGdldFJlY3QgJiYgd2lkZ2V0UmVjdC53aWR0aCkgfHwgTElTVF9DQVJEX01JTl9TSVpFXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB3aWR0aDogbGlzdFdpZHRoLFxyXG4gICAgICBoZWlnaHQ6IGxpc3RIZWlnaHRcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlbmRlckxpc3QgPSAoZHM/OiBRdWVyaWFibGVEYXRhU291cmNlLCBkc0luZm8/OiBJTURhdGFTb3VyY2VJbmZvKSA9PiB7XHJcbiAgICBjb25zdCB7IHdpZGdldFJlY3QsIGlzTW91bnQsIGN1cnJlbnRDYXJkU2l6ZSB9ID0gdGhpcy5zdGF0ZVxyXG4gICAgY29uc3QgeyBjb25maWcsIGlzUlRMIH0gPSB0aGlzLnByb3BzXHJcbiAgICBjb25zdCBxdWVyeVN0YXR1cyA9IGRzSW5mbz8uc3RhdHVzXHJcbiAgICB0aGlzLnF1ZXJ5U3RhdHVzID0gcXVlcnlTdGF0dXNcclxuICAgIHRoaXMuaXNIYXNSZW5kZXJMaXN0ID0gdHJ1ZVxyXG5cclxuICAgIGlmICghaXNNb3VudCkge1xyXG4gICAgICByZXR1cm4gZmFsc2VcclxuICAgIH1cclxuXHJcbiAgICAvL2dldCB0b3RhbCBjb3VudFxyXG4gICAgaWYgKHF1ZXJ5U3RhdHVzID09PSBEYXRhU291cmNlU3RhdHVzLlVubG9hZGVkKSB7XHJcbiAgICAgIGRzID0gdW5kZWZpbmVkXHJcbiAgICB9XHJcbiAgICB0aGlzLmdldERzVG90YWxDb3VudChkcywgcXVlcnlTdGF0dXMpXHJcblxyXG4gICAgLy9nZXQgbG9hZGluZyBzdGF0dXNcclxuICAgIGNvbnN0IHNob3dMb2FkaW5nID0gdGhpcy5nZXRMb2FkaW5nU3RhdHVzKGRzLCBxdWVyeVN0YXR1cylcclxuXHJcbiAgICBjb25zdCBpbnRlcnZhbCA9IGRzPy5nZXRBdXRvUmVmcmVzaEludGVydmFsKCkgfHwgMFxyXG4gICAgLy90b2dnbGUgYXV0byByZWZyZXNoIGxvYWRpbmcgc3RhdHVzXHJcbiAgICB0aGlzLnRvZ2dsZUF1dG9SZWZyZXNoTG9hZGluZyhkcywgc2hvd0xvYWRpbmcpXHJcblxyXG4gICAgLy9nZXQgbGlzdCB0b29sYHMgc2hvdyBzdGF0dXNcclxuICAgIGNvbnN0IHNob3dCb3R0b21Ub29sID0gbGlzdFV0aWxzLnNob3dCb3R0b21Ub29scyh0aGlzLnByb3BzLCB0aGlzLnN0YXRlKVxyXG4gICAgY29uc3Qgc2hvd1RvcFRvb2xzID0gbGlzdFV0aWxzLnNob3dUb3BUb29scyh0aGlzLnByb3BzKVxyXG5cclxuICAgIC8vZ2V0IGxpc3QgYm90dG9tIHRvb2xgcyBoZWlnaHRcclxuICAgIGNvbnN0IGJvdHRvbVRvb2xIID0gbGlzdFV0aWxzLmdldEJvdHRvbVRvb2xIKHRoaXMucGFnaW5hdG9yRGl2LmN1cnJlbnQsIHNob3dCb3R0b21Ub29sKVxyXG5cclxuICAgIC8vZ2V0IGxpc3Qgc2l6ZVxyXG4gICAgY29uc3QgbGlzdEhlaWdodCA9IGxpc3RVdGlscy5nZXRMaXN0SGVpZ2h0KHdpZGdldFJlY3QsIGJvdHRvbVRvb2xILCBzaG93VG9wVG9vbHMpIHx8IDFcclxuICAgIGNvbnN0IGxpc3RXaWR0aCA9ICh3aWRnZXRSZWN0ICYmIHdpZGdldFJlY3Qud2lkdGgpIHx8IExJU1RfQ0FSRF9NSU5fU0laRVxyXG5cclxuICAgIGNvbnN0IG92ZXJzY2FuQ291bnQgPSB0aGlzLmdldE92ZXJzY2FuQ291bnQobGlzdEhlaWdodClcclxuXHJcbiAgICAvLyBnZXQgbmV3IHJlY29yZHNcclxuICAgIGNvbnN0IHNlbGVjdFJlY29yZHMgPSB0aGlzLmdldERzU2VsZWN0UmVjb3JkcyhkcylcclxuICAgIGNvbnN0IHJlY29yZHMgPSB0aGlzLmdldERzUmVjb3Jkcyhkcywgc2hvd0xvYWRpbmcsIGxpc3RIZWlnaHQpXHJcblxyXG4gICAgdGhpcy5pc0ZpcnN0TG9hZCA9IGZhbHNlXHJcblxyXG4gICAgLy8gd2hlbiByZWNvcmQubGVuZ3RoID09IDAsIHNob3VsZCByZXNldCBzaG93IHNlbGVjdGlvbiBidXR0b24gc3RhdHVzIGluIGxpc3QgdG9wIHRvb2xzXHJcbiAgICBpZiAocmVjb3Jkcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgLy8gdGhpcy5zY3JvbGxUb0luZGV4KDAsICdzdGFydCcpO1xyXG4gICAgICB0aGlzLnJlc2V0U2hvd1NlbGVjdGlvblN0YXR1cygpXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5nZXRsaXN0SW5uZXJFbGVtZW50VHlwZSgpXHJcblxyXG4gICAgY29uc3QgbGlzdFN0eWxlcyA9IHRoaXMuZ2V0TGlzdFN0eWxlKClcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXZcclxuICAgICAgICBkYXRhLXRlc3RpZD0nbGlzdENvbnRhaW5lcidcclxuICAgICAgICBjbGFzc05hbWU9J2xpc3QtY29udGFpbmVyIGFuaW1hdGlvbidcclxuICAgICAgICBjc3M9e2xpc3RTdHlsZXN9XHJcbiAgICAgICAgb25LZXlEb3duPXt0aGlzLmhhbmRsZUxpc3RLZXlEb3dufVxyXG4gICAgICA+XHJcbiAgICAgICAgey8qIHJlbmRlciB0b3AgdG9vbCAqL31cclxuICAgICAgICB7c2hvd1RvcFRvb2xzICYmIHRoaXMucmVuZGVyTGlzdFRvcFRvb2xzKGRzLCBxdWVyeVN0YXR1cywgc2VsZWN0UmVjb3Jkcyl9XHJcblxyXG4gICAgICAgIHsvKiByZW5kZXIgR3JpZCBsaXN0ICovfVxyXG4gICAgICAgIHsoY29uZmlnPy5sYXlvdXRUeXBlID09PSBMaXN0TGF5b3V0VHlwZS5HUklEKSAmJlxyXG4gICAgICAgICAgPEdyaWRcclxuICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCd3aWRnZXQtbGlzdC1saXN0JywgeyAnaGlkZS1saXN0JzogIXJlY29yZHMgfHwgcmVjb3Jkcz8ubGVuZ3RoID09PSAwIH0pfVxyXG4gICAgICAgICAgICByZWY9e3RoaXMubGlzdFJlZn1cclxuICAgICAgICAgICAgdXNlSXNTY3JvbGxpbmdcclxuICAgICAgICAgICAgb3V0ZXJSZWY9e3RoaXMuc2V0TGlzdE91dERpdlJlZn1cclxuICAgICAgICAgICAgZGlyZWN0aW9uPXtpc1JUTCA/ICdydGwnIDogJ2x0cid9XHJcbiAgICAgICAgICAgIGl0ZW1Db3VudD17dGhpcy5yZWNvcmRzLmxlbmd0aH1cclxuICAgICAgICAgICAgb3ZlcnNjYW5Db3VudD17b3ZlcnNjYW5Db3VudH1cclxuICAgICAgICAgICAgaXRlbUtleT17dGhpcy5ncmlkSXRlbUluZGV4fVxyXG4gICAgICAgICAgICBjb2x1bW5Db3VudD17dGhpcy5nZXRJdGVtQ29sdW1uQ291bnQoKX1cclxuICAgICAgICAgICAgY29sdW1uV2lkdGg9e2luZGV4ID0+IHRoaXMuY29sdW1uV2lkdGgoaW5kZXgsIGN1cnJlbnRDYXJkU2l6ZS53aWR0aCwgY29uZmlnPy5ob3Jpem9udGFsU3BhY2UpfVxyXG4gICAgICAgICAgICByb3dDb3VudD17dGhpcy5nZXRJdGVtUm93Q291bnQoKX1cclxuICAgICAgICAgICAgcm93SGVpZ2h0PXtpbmRleCA9PiB0aGlzLnJvd0hlaWdodChpbmRleCwgY3VycmVudENhcmRTaXplLmhlaWdodCwgY29uZmlnPy52ZXJ0aWNhbFNwYWNlKX1cclxuICAgICAgICAgICAgd2lkdGg9e2xpc3RXaWR0aH1cclxuICAgICAgICAgICAgaGVpZ2h0PXtsaXN0SGVpZ2h0fVxyXG4gICAgICAgICAgICBvbkl0ZW1zUmVuZGVyZWQ9e3RoaXMub25JdGVtc1JlbmRlcmVkfVxyXG4gICAgICAgICAgICBpdGVtRGF0YT17dGhpcy5nZXRJdGVtc0J5UmVjb3Jkcyh0aGlzLnJlY29yZHMpfVxyXG4gICAgICAgICAgICBpbm5lckVsZW1lbnRUeXBlPXt0aGlzLmlubmVyRWxlbWVudFR5cGV9XHJcbiAgICAgICAgICAgIG9uU2Nyb2xsPXt0aGlzLmhhbmRsZUxpc3RTY3JvbGx9XHJcbiAgICAgICAgICAgIHJvbGU9J2xpc3Rib3gnXHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIHt0aGlzLml0ZW1SZW5kZXJ9XHJcbiAgICAgICAgICA8L0dyaWQ+fVxyXG4gICAgICAgICAgey8qIHJlbmRlciBSb3cvY29sdW1uIGxpc3QgKi99XHJcbiAgICAgICAgICB7KGNvbmZpZz8ubGF5b3V0VHlwZSAhPT0gTGlzdExheW91dFR5cGUuR1JJRCkgJiYgPExpc3RcclxuICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCd3aWRnZXQtbGlzdC1saXN0JywgeyAnaGlkZS1saXN0JzogIXJlY29yZHMgfHwgcmVjb3Jkcz8ubGVuZ3RoID09PSAwIH0pfVxyXG4gICAgICAgICAgICByZWY9e3RoaXMubGlzdFJlZn1cclxuICAgICAgICAgICAgdXNlSXNTY3JvbGxpbmdcclxuICAgICAgICAgICAgb3V0ZXJSZWY9e3RoaXMuc2V0TGlzdE91dERpdlJlZn1cclxuICAgICAgICAgICAgZGlyZWN0aW9uPXtpc1JUTCA/ICdydGwnIDogJ2x0cid9XHJcbiAgICAgICAgICAgIHJvbGU9J2xpc3Rib3gnXHJcbiAgICAgICAgICAgIGxheW91dD17XHJcbiAgICAgICAgICAgICAgY29uZmlnLmxheW91dFR5cGUgPT09IExpc3RMYXlvdXRUeXBlLkNvbHVtblxyXG4gICAgICAgICAgICAgICAgPyAnaG9yaXpvbnRhbCdcclxuICAgICAgICAgICAgICAgIDogJ3ZlcnRpY2FsJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGl0ZW1Db3VudD17dGhpcy5yZWNvcmRzLmxlbmd0aH1cclxuICAgICAgICAgICAgb3ZlcnNjYW5Db3VudD17b3ZlcnNjYW5Db3VudH1cclxuICAgICAgICAgICAgaXRlbUtleT17dGhpcy5pdGVtS2V5fVxyXG4gICAgICAgICAgICB3aWR0aD17bGlzdFdpZHRofVxyXG4gICAgICAgICAgICBoZWlnaHQ9e2xpc3RIZWlnaHR9XHJcbiAgICAgICAgICAgIG9uSXRlbXNSZW5kZXJlZD17dGhpcy5vbkl0ZW1zUmVuZGVyZWR9XHJcbiAgICAgICAgICAgIGl0ZW1EYXRhPXt0aGlzLmdldEl0ZW1zQnlSZWNvcmRzKHRoaXMucmVjb3Jkcyl9XHJcbiAgICAgICAgICAgIGlubmVyRWxlbWVudFR5cGU9e3RoaXMuaW5uZXJFbGVtZW50VHlwZX1cclxuICAgICAgICAgICAgaXRlbVNpemU9e3RoaXMuaXRlbVNpemV9XHJcbiAgICAgICAgICAgIG9uU2Nyb2xsPXt0aGlzLmhhbmRsZUxpc3RTY3JvbGx9XHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIHt0aGlzLml0ZW1SZW5kZXJ9XHJcbiAgICAgICAgICA8L0xpc3Q+XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB7LyogbWFzayB0aXAgYW5kIGxvYWRpbmcgKi99XHJcbiAgICAgICAge3RoaXMuY2hlY2tJc1Nob3dMaXN0TWFzayhzaG93TG9hZGluZywgcmVjb3JkcykgJiYgKFxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2VkaXRpbmctbWFzay1jb24nPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZWRpdGluZy1tYXNrLWxpc3QnIC8+XHJcbiAgICAgICAgICAgIHtjb25maWc/LmxheW91dFR5cGUgPT09IExpc3RMYXlvdXRUeXBlLkdSSUQgJiYgPGRpdiBjbGFzc05hbWU9J2VkaXRpbmctbWFzay1saXN0LWdyaWQnIC8+fVxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKX1cclxuXHJcbiAgICAgICAgey8qIHJlbmRlciBib3R0b20gdG9vbHMgKi99XHJcbiAgICAgICAge3Nob3dCb3R0b21Ub29sICYmIHRoaXMucmVuZGVyQm90dG9tVG9vbHMoc2hvd0xvYWRpbmcpfVxyXG5cclxuICAgICAgICB7dGhpcy5yZW5kZXJFbXB0eUVsZW1lbnQoc2hvd0xvYWRpbmcpfVxyXG5cclxuICAgICAgICB7LyogcmVuZGVyIG5vdCByZWFkeSB0aXBzICovfVxyXG4gICAgICAgIHtxdWVyeVN0YXR1cyA9PT0gRGF0YVNvdXJjZVN0YXR1cy5Ob3RSZWFkeSAmJiB0aGlzLnJlbmRlck5vdFJlYWR5VGlwcyhkcyl9XHJcblxyXG4gICAgICAgIHsvKiByZW5kZXIgbG9hZGluZyAqL31cclxuICAgICAgICB7KHNob3dMb2FkaW5nIHx8IGludGVydmFsID4gMCkgJiYgdGhpcy5yZW5kZXJMb2FkaW5nKHNob3dMb2FkaW5nLCBpbnRlcnZhbCl9XHJcblxyXG4gICAgICAgIDxkaXYgaWQ9J2Rlc2NyaWJlQnlNZXNzYWdlJyBjbGFzc05hbWU9J3NyLW9ubHknPnt0aGlzLmZvcm1hdE1lc3NhZ2UoJ2Rlc2NyaWJlTWVzc2FnZScpfTwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzci1vbmx5JyB0YWJJbmRleD17MH0gcmVmPXtyZWYgPT4geyB0aGlzLmp1bXBPdXROb2RlT2ZMaXN0ID0gcmVmIH19PjwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIClcclxuICB9XHJcblxyXG4gIGhhbmRsZUxpc3RLZXlEb3duID0gKGUpID0+IHtcclxuICAgIGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHtcclxuICAgICAgdGhpcy5qdW1wT3V0Tm9kZU9mTGlzdC5mb2N1cygpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZW5kZXJFbXB0eUVsZW1lbnQgPSAoc2hvd0xvYWRpbmc6IGJvb2xlYW4pID0+IHtcclxuICAgIGNvbnN0IGlzTm9EYXRhID0gIXRoaXMucmVjb3JkcyB8fCB0aGlzLnJlY29yZHMubGVuZ3RoIDwgMVxyXG4gICAgY29uc3Qgbm9EYXRhTWVzc2FnZSA9IHRoaXMucHJvcHMuY29uZmlnPy5ub0RhdGFNZXNzYWdlIHx8IHRoaXMuZm9ybWF0TWVzc2FnZSgnbm9EYXRhJylcclxuICAgIC8vIGNvbnN0IGlzU2hvd0NsZWFyQWN0aW9uQnV0dG9uID0gaXNOb0RhdGEgJiYgdGhpcy5pc0hhc1B1Ymxpc2hNZXNzYWdlQWN0aW9uXHJcbiAgICByZXR1cm4gKCFzaG93TG9hZGluZyAmJiBpc05vRGF0YSkgJiYgKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nZW1wdHktY29uIHRleHQtY2VudGVyJz5cclxuICAgICAgICA8V2FybmluZ091dGxpbmVkIHNpemU9ezE2fS8+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkaXNjcmlidGlvblwiPntub0RhdGFNZXNzYWdlfTwvZGl2PlxyXG4gICAgICAgIHsvKiB7aXNTaG93Q2xlYXJBY3Rpb25CdXR0b24gJiYgPEJ1dHRvblxyXG4gICAgICAgICAgY2xhc3NOYW1lPVwiY2xlYXItbWVzc2FnZS1hY3Rpb24tYnV0dG9uXCJcclxuICAgICAgICAgIHNpemU9J3NtJ1xyXG4gICAgICAgICAgdGl0bGU9e3RoaXMuZm9ybWF0TWVzc2FnZSgncmVzZXQnKX1cclxuICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuY2xlYXJNZXNzYWdlQWN0aW9ufVxyXG4gICAgICAgID5cclxuICAgICAgICAgIHt0aGlzLmZvcm1hdE1lc3NhZ2UoJ3Jlc2V0Jyl9XHJcbiAgICAgICAgPC9CdXR0b24+fSAqL31cclxuICAgICAgPC9kaXY+XHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBjbGVhck1lc3NhZ2VBY3Rpb24gPSAoKSA9PiB7XHJcbiAgICB0aGlzLmhhbmRsZUNsZWFyU2VsZWN0aW9uQ2xpY2soKVxyXG4gICAgTWVzc2FnZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5wdWJsaXNoTWVzc2FnZShcclxuICAgICAgbmV3IERhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlTWVzc2FnZSh0aGlzLnByb3BzLmlkLCBbXSlcclxuICAgIClcclxuICB9XHJcblxyXG4gIHJlbmRlckxvYWRpbmcgPSAoc2hvd0xvYWRpbmc6IGJvb2xlYW4sIGludGVydmFsOiBudW1iZXIpID0+IHtcclxuICAgIGNvbnN0IHsgYXV0b1JlZnJlc2hMb2FkaW5nU3RyaW5nIH0gPSB0aGlzLnN0YXRlXHJcbiAgICBjb25zdCB7IGNvbmZpZyB9ID0gdGhpcy5wcm9wc1xyXG4gICAgbGV0IGlzU2hvd0F1dG9SZWZyZXNoID0gY29uZmlnPy5pc1Nob3dBdXRvUmVmcmVzaFxyXG4gICAgaWYgKHR5cGVvZiAoaXNTaG93QXV0b1JlZnJlc2gpICE9PSAnYm9vbGVhbicpIHtcclxuICAgICAgaXNTaG93QXV0b1JlZnJlc2ggPSB0cnVlXHJcbiAgICB9XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2XHJcbiAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKFxyXG4gICAgICAgICAgJ3Bvc2l0aW9uLWFic29sdXRlIHJlZnJlc2gtbG9hZGluZy1jb24gZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlcicsXHJcbiAgICAgICAgICB0aGlzLmdldFJlZnJlc2hMb2FkaW5nQ2xhc3MoKVxyXG4gICAgICAgICl9XHJcbiAgICAgID5cclxuICAgICAgICB7c2hvd0xvYWRpbmcgJiYgPGRpdiBjbGFzc05hbWU9J2xvYWRpbmctY29uJyAvPn1cclxuICAgICAgICB7KGludGVydmFsID4gMCAmJiBpc1Nob3dBdXRvUmVmcmVzaCkgJiYgKFxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXgtZ3Jvdy0xIGF1dG8tcmVmcmVzaC1sb2FkaW5nJz5cclxuICAgICAgICAgICAge2F1dG9SZWZyZXNoTG9hZGluZ1N0cmluZ31cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICl9XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyTm90UmVhZHlUaXBzID0gKGRzPzogUXVlcmlhYmxlRGF0YVNvdXJjZSkgPT4ge1xyXG4gICAgY29uc3QgZGF0YVNvdXJjZUxhYmVsID0gZHM/LmdldExhYmVsKClcclxuICAgIGNvbnN0IG91dHB1dERzV2lkZ2V0SWQgPSBhcHBDb25maWdVdGlscz8uZ2V0V2lkZ2V0SWRCeU91dHB1dERhdGFTb3VyY2UodGhpcy5wcm9wcz8udXNlRGF0YVNvdXJjZXM/LlswXSlcclxuICAgIGNvbnN0IGFwcENvbmZpZyA9IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKT8uYXBwQ29uZmlnXHJcbiAgICBjb25zdCB3aWRnZXRMYWJlbCA9IGFwcENvbmZpZz8ud2lkZ2V0cz8uW291dHB1dERzV2lkZ2V0SWRdPy5sYWJlbFxyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdwbGFjZWhvbGRlci1hbGVydC1jb24nPlxyXG4gICAgICAgIDxBbGVydFxyXG4gICAgICAgICAgZm9ybT0ndG9vbHRpcCdcclxuICAgICAgICAgIHNpemU9J3NtYWxsJ1xyXG4gICAgICAgICAgdHlwZT0nd2FybmluZydcclxuICAgICAgICAgIHRleHQ9e3RoaXMuZm9ybWF0TWVzc2FnZSgnb3V0cHV0RGF0YUlzTm90R2VuZXJhdGVkJywgeyBvdXRwdXREc0xhYmVsOiBkYXRhU291cmNlTGFiZWwsIHNvdXJjZVdpZGdldE5hbWU6IHdpZGdldExhYmVsIH0pfVxyXG4gICAgICAgIC8+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyQm90dG9tVG9vbHMgPSAoc2hvd0xvYWRpbmc6IGJvb2xlYW4pID0+IHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgc2Nyb2xsU3RhdHVzLFxyXG4gICAgICBpc1Njcm9sbEVuZFxyXG4gICAgfSA9IHRoaXMuc3RhdGVcclxuICAgIGNvbnN0IHtcclxuICAgICAgY29uZmlnLFxyXG4gICAgICBpc1JUTFxyXG4gICAgfSA9IHRoaXMucHJvcHNcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXYgcmVmPXt0aGlzLnBhZ2luYXRvckRpdn0+XHJcbiAgICAgICAgPExpc3RCb3R0b21Ub29sc1xyXG4gICAgICAgICAgaXNSVEw9e2lzUlRMfVxyXG4gICAgICAgICAgdG90YWxQYWdlPXt0aGlzLmdldFRvdGFsUGFnZSgpfVxyXG4gICAgICAgICAgY3VycmVudFBhZ2U9e3RoaXMuX2dldEN1cnJlbnRQYWdlKCl9XHJcbiAgICAgICAgICBpc0VkaXRpbmc9e3RoaXMuaXNFZGl0aW5nKCl9XHJcbiAgICAgICAgICBpc1Njcm9sbEVuZD17aXNTY3JvbGxFbmR9XHJcbiAgICAgICAgICBwYWdlU3R5bGU9e2NvbmZpZy5wYWdlU3R5bGV9XHJcbiAgICAgICAgICBsYXlvdXRUeXBlPXtjb25maWc/LmxheW91dFR5cGV9XHJcbiAgICAgICAgICBzY3JvbGxTdGF0dXM9e3Njcm9sbFN0YXR1c31cclxuICAgICAgICAgIGhhbmRsZVNjcm9sbFVwPXt0aGlzLmhhbmRsZVNjcm9sbFVwfVxyXG4gICAgICAgICAgaGFuZGxlU2Nyb2xsRG93bj17dGhpcy5oYW5kbGVTY3JvbGxEb3dufVxyXG4gICAgICAgICAgaGFuZGxlU3dpdGNoUGFnZT17dGhpcy5oYW5kbGVTd2l0Y2hQYWdlfVxyXG4gICAgICAgICAgZm9ybWF0TWVzc2FnZT17dGhpcy5mb3JtYXRNZXNzYWdlfVxyXG4gICAgICAgICAgc2hvd0xvYWRpbmc9e3Nob3dMb2FkaW5nfVxyXG4gICAgICAgIC8+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgZ2V0RHNUb3RhbENvdW50ID0gKGRzPzogUXVlcmlhYmxlRGF0YVNvdXJjZSwgcXVlcnlTdGF0dXM/OiBEYXRhU291cmNlU3RhdHVzKSA9PiB7XHJcbiAgICBjb25zdCBjb3VudCA9IGRzPy5jb3VudFxyXG4gICAgdGhpcy5xdWVyeVN0YXR1cyA9IHF1ZXJ5U3RhdHVzXHJcblxyXG4gICAgLy8gdG90YWwgY291bnRcclxuICAgIGlmIChxdWVyeVN0YXR1cyA9PT0gRGF0YVNvdXJjZVN0YXR1cy5Mb2FkZWQgJiYgY291bnQgIT09IG51bGwpIHtcclxuICAgICAgaWYgKHRoaXMudG90YWxDb3VudCAhPT0gY291bnQpIHtcclxuICAgICAgICB0aGlzLnNldFBhZ2VUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgcGFnZTogMVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9LCAxKVxyXG4gICAgICB9XHJcbiAgICAgIHRoaXMudG90YWxDb3VudCA9IGNvdW50XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRMb2FkaW5nU3RhdHVzID0gKGRzPzogUXVlcmlhYmxlRGF0YVNvdXJjZSwgcXVlcnlTdGF0dXM/OiBEYXRhU291cmNlU3RhdHVzKSA9PiB7XHJcbiAgICBjb25zdCB7IExheW91dEVudHJ5IH0gPSB0aGlzLnN0YXRlXHJcbiAgICBjb25zdCB7IHNob3dMb2FkaW5nOiBtdXN0TG9hZGluZyB9ID0gdGhpcy5wcm9wc1xyXG5cclxuICAgIC8vIGxvYWRpbmdcclxuICAgIGxldCBzaG93TG9hZGluZyA9IGZhbHNlXHJcbiAgICBpZiAoXHJcbiAgICAgIG11c3RMb2FkaW5nIHx8XHJcbiAgICAgICh3aW5kb3cuamltdUNvbmZpZy5pc0luQnVpbGRlciAmJiAhTGF5b3V0RW50cnkpIHx8XHJcbiAgICAgIChkcyAmJiBxdWVyeVN0YXR1cyA9PT0gRGF0YVNvdXJjZVN0YXR1cy5Mb2FkaW5nKVxyXG4gICAgKSB7XHJcbiAgICAgIHNob3dMb2FkaW5nID0gdHJ1ZVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBzaG93TG9hZGluZ1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlQXV0b1JlZnJlc2hMb2FkaW5nID0gKGRzOiBRdWVyaWFibGVEYXRhU291cmNlLCBzaG93TG9hZGluZzogYm9vbGVhbikgPT4ge1xyXG4gICAgY29uc3QgaW50ZXJ2YWwgPSBkcz8uZ2V0QXV0b1JlZnJlc2hJbnRlcnZhbCgpIHx8IDBcclxuICAgIHRoaXMucmVzZXRBdXRvUmVmcmVzaFRpbWVzKGludGVydmFsLCBzaG93TG9hZGluZylcclxuICAgIGlmIChpbnRlcnZhbCA+IDApIHtcclxuICAgICAgdGhpcy5zZXRSZWZyZXNoTG9hZGluZ1N0cmluZyhzaG93TG9hZGluZylcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldExpc3RPdXREaXZSZWYgPSBjdXJyZW50ID0+IHtcclxuICAgIGlmICghY3VycmVudCkgcmV0dXJuXHJcbiAgICBjb25zdCBib3R0b21Cb3VuZGFyeUlkID0gYGJvdHRvbUJvdW5kYXJ5JHt0aGlzLnByb3BzLmlkfWBcclxuICAgIHRoaXMubGlzdE91dERpdlJlZiA9IGN1cnJlbnRcclxuICAgIHRoaXMuc2V0TGlzdERpdlNpemUoKVxyXG4gICAgY29uc3QgYm90dG9tQm91bmRhcnkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgYm90dG9tQm91bmRhcnkuaWQgPSBib3R0b21Cb3VuZGFyeUlkXHJcbiAgICBib3R0b21Cb3VuZGFyeS5jbGFzc05hbWUgPSAnYm90dG9tLWJvdW5kYXJ5J1xyXG4gICAgY29uc3QgbGlzdFNjcm9sbENvbnRlbnQgPSB0aGlzLmxpc3RPdXREaXZSZWYuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2RpdicpWzBdXHJcbiAgICB0aGlzLnNldFNjcm9sbENvbnRlbnRTaXplKClcclxuXHJcbiAgICBsaXN0U2Nyb2xsQ29udGVudC5hcHBlbmRDaGlsZChib3R0b21Cb3VuZGFyeSlcclxuICAgIGxpc3RVdGlscy5pbnRlcnNlY3Rpb25PYnNlcnZlcihcclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYm90dG9tQm91bmRhcnlJZCksXHJcbiAgICAgIHRoaXMubGlzdE91dERpdlJlZixcclxuICAgICAgdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlckNhbGxiYWNrXHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBnZXREc1JlY29yZHMgPSAoZHM6IFF1ZXJpYWJsZURhdGFTb3VyY2UsIHNob3dMb2FkaW5nOiBib29sZWFuLCBsaXN0SGVpZ2h0OiBudW1iZXIpID0+IHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgc2hvd1NlbGVjdGlvbk9ubHksXHJcbiAgICAgIHdpZGdldFJlY3RcclxuICAgIH0gPSB0aGlzLnN0YXRlXHJcbiAgICBjb25zdCB7XHJcbiAgICAgIGNvbmZpZyxcclxuICAgICAgYXBwTW9kZVxyXG4gICAgfSA9IHRoaXMucHJvcHNcclxuICAgIGNvbnN0IGNvbHVtbkNvdW50ID0gY29uZmlnPy5sYXlvdXRUeXBlID09PSBMaXN0TGF5b3V0VHlwZS5HUklEID8gdGhpcy5nZXRJdGVtQ29sdW1uQ291bnQoKSA6IG51bGxcclxuICAgIGNvbnN0IHJlY29yZFNpemVQZXJQYWdlID0gbGlzdFV0aWxzLmdldFBhZ2VTaXplKFxyXG4gICAgICB3aWRnZXRSZWN0LFxyXG4gICAgICBsaXN0SGVpZ2h0LFxyXG4gICAgICB0aGlzLnByb3BzLFxyXG4gICAgICBjb2x1bW5Db3VudFxyXG4gICAgKVxyXG4gICAgY29uc3QgZGVmYXVsdFJlY29yZHMgPSB0aGlzLmdldERlZmF1bHRSZWNvcmRzKHJlY29yZFNpemVQZXJQYWdlKVxyXG4gICAgLy8gZ2V0IG5ldyByZWNvcmRzXHJcbiAgICBsZXQgcmVjb3JkcyA9IGRlZmF1bHRSZWNvcmRzXHJcbiAgICBjb25zdCBzZWxlY3RSZWNvcmRzID0gdGhpcy5nZXREc1NlbGVjdFJlY29yZHMoZHMpXHJcbiAgICBpZiAoZHMgJiYgY29uZmlnLmlzSXRlbVN0eWxlQ29uZmlybSkge1xyXG4gICAgICBjb25zdCBpc1NlbGVjdGlvblZpZXcgPSBkcz8uZGF0YVZpZXdJZCA9PT0gU0VMRUNUSU9OX0RBVEFfVklFV19JRFxyXG4gICAgICBpZiAoaXNTZWxlY3Rpb25WaWV3KSB7XHJcbiAgICAgICAgcmVjb3JkcyA9XHJcbiAgICAgICAgICAoZHMgJiZcclxuICAgICAgICAgICAgKGNvbmZpZy5wYWdlU3R5bGUgPT09IFBhZ2VTdHlsZS5TY3JvbGxcclxuICAgICAgICAgICAgICA/IGRzLmdldFJlY29yZHNCeVBhZ2UoMSwgcmVjb3JkU2l6ZVBlclBhZ2UgKiB0aGlzLnN0YXRlLnBhZ2UpXHJcbiAgICAgICAgICAgICAgOiBkcy5nZXRSZWNvcmRzQnlQYWdlKHRoaXMuc3RhdGUucGFnZSwgcmVjb3JkU2l6ZVBlclBhZ2UpKSkgfHxcclxuICAgICAgICAgIFtdXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmVjb3JkcyA9XHJcbiAgICAgICAgICAoZHMgJiZcclxuICAgICAgICAgICAgKGNvbmZpZy5wYWdlU3R5bGUgPT09IFBhZ2VTdHlsZS5TY3JvbGxcclxuICAgICAgICAgICAgICA/IGRzLmdldFJlY29yZHNCeVBhZ2VXaXRoU2VsZWN0aW9uKDEsIHJlY29yZFNpemVQZXJQYWdlICogdGhpcy5zdGF0ZS5wYWdlKVxyXG4gICAgICAgICAgICAgIDogZHMuZ2V0UmVjb3Jkc0J5UGFnZVdpdGhTZWxlY3Rpb24odGhpcy5zdGF0ZS5wYWdlLCByZWNvcmRTaXplUGVyUGFnZSkpKSB8fFxyXG4gICAgICAgICAgW11cclxuICAgICAgfVxyXG4gICAgICBpZiAoc2hvd1NlbGVjdGlvbk9ubHkpIHtcclxuICAgICAgICByZWNvcmRzID0gc2VsZWN0UmVjb3Jkc1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoXHJcbiAgICAgIHdpbmRvdy5qaW11Q29uZmlnLmlzSW5CdWlsZGVyICYmXHJcbiAgICAgIGFwcE1vZGUgIT09IEFwcE1vZGUuUnVuICYmXHJcbiAgICAgICFzaG93TG9hZGluZyAmJlxyXG4gICAgICByZWNvcmRzLmxlbmd0aCA8IDFcclxuICAgICkge1xyXG4gICAgICByZWNvcmRzID0gZGVmYXVsdFJlY29yZHNcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXNob3dMb2FkaW5nIHx8IHRoaXMuaXNGaXJzdExvYWQpIHtcclxuICAgICAgLy8gdGhpcy5yZXNldExpc3RBZnRlclJlY29yZENoYW5nZShyZWNvcmRzKVxyXG4gICAgICB0aGlzLnJlY29yZHMgPSByZWNvcmRzXHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVjb3Jkc1xyXG4gIH1cclxuXHJcbiAgcmVzZXRHcmlkTGlzdEFmdGVyUm93SW5kZXggPSAobmV3UmVjb3JkcykgPT4ge1xyXG4gICAgaWYgKHRoaXM/LnJlY29yZHMgJiYgKHRoaXMucmVjb3Jkcz8ubGVuZ3RoICE9PSBuZXdSZWNvcmRzPy5sZW5ndGgpKSB7XHJcbiAgICAgIGxldCBwcmVSb3dOdW1iZXIgPSB0aGlzLmdldEl0ZW1Sb3dDb3VudCgpIC0gMVxyXG4gICAgICBwcmVSb3dOdW1iZXIgPSBwcmVSb3dOdW1iZXIgPiAtMSA/IHByZVJvd051bWJlciA6IDBcclxuICAgICAgdGhpcy5saXN0UmVmPy5jdXJyZW50Py5yZXNldEFmdGVySW5kaWNlcyAmJiB0aGlzLmxpc3RSZWY/LmN1cnJlbnQ/LnJlc2V0QWZ0ZXJSb3dJbmRleChwcmVSb3dOdW1iZXIsIHRydWUpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXNldExpc3RBZnRlclJlY29yZENoYW5nZSA9IChuZXdSZWNvcmRzKSA9PiB7XHJcbiAgICAvL1doZW4gbG9hZGluZyBhZ2FpbiwgdGhlIHNhbWUgcmVjb3JkcyBhcmUgbm90IG5lY2Vzc2FyaWx5IHRoZSBzYW1lIGluZGV4LlxyXG4gICAgLy9Gb3IgZXhhbXBsZSwgd2hlbiB0aGUgZXh0ZW50IG9mIHRoZSBtYXAgY2hhbmdlcywgdGhlIHJlY29yZCBvZiB0aGUgbGlzdCBjaGFuZ2VzLiBUaGUgb3JpZ2luYWwgZmlyc3QgcmVjb3JkIG1heVxyXG4gICAgLy9jaGFuZ2UgdG8gdGhlIGZpZnRoIG9mIHRoZSBuZXcgcmVjb3Jkcywgc28gYWxsIGNhbiBvbmx5IGJlIHJlc2V0LiBBIGxpc3QgZ3VhcmFudGVlcyBhbiB1cGRhdGUgdG8gdGhlIGxpc3Qgc2l6ZVxyXG4gICAgaWYgKHRoaXM/LnJlY29yZHMgJiYgKHRoaXMucmVjb3Jkcz8ubGVuZ3RoICE9PSBuZXdSZWNvcmRzPy5sZW5ndGgpKSB7XHJcbiAgICAgIGlmICh0aGlzLmxpc3RSZWYuY3VycmVudCkge1xyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLmNvbmZpZz8ubGF5b3V0VHlwZSA9PT0gTGlzdExheW91dFR5cGUuR1JJRCkge1xyXG4gICAgICAgICAgLy9WYXJpYWJsZVNpemVHcmlkIGNhY2hlcyBvZmZzZXRzIGFuZCBtZWFzdXJlbWVudHMgZm9yIGVhY2ggaXRlbSBmb3IgcGVyZm9ybWFuY2UgcHVycG9zZXMuXHJcbiAgICAgICAgICAvL1RoaXMgbWV0aG9kIGNsZWFycyB0aGF0IGNhY2hlZCBkYXRhIGZvciBhbGwgaXRlbXMgYWZ0ZXIgKGFuZCBpbmNsdWRpbmcpIHRoZSBzcGVjaWZpZWQgaW5kaWNlcy4gSXQgc2hvdWxkIGJlIGNhbGxlZCB3aGVuZXZlciBhbiBpdGVtcyBzaXplIGNoYW5nZXMuXHJcbiAgICAgICAgICAvL2h0dHBzOi8vcmVhY3Qtd2luZG93LnZlcmNlbC5hcHAvIy9hcGkvVmFyaWFibGVTaXplR3JpZFxyXG4gICAgICAgICAgLy8gdGhpcy5yZXNldEdyaWRMaXN0QWZ0ZXJSb3dJbmRleChuZXdSZWNvcmRzKVxyXG4gICAgICAgICAgdGhpcy5saXN0UmVmPy5jdXJyZW50Py5yZXNldEFmdGVySW5kaWNlcyAmJiB0aGlzLmxpc3RSZWY/LmN1cnJlbnQ/LnJlc2V0QWZ0ZXJSb3dJbmRleCgwLCB0cnVlKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvL1ZhcmlhYmxlU2l6ZUxpc3QgY2FjaGVzIG9mZnNldHMgYW5kIG1lYXN1cmVtZW50cyBmb3IgZWFjaCBpbmRleCBmb3IgcGVyZm9ybWFuY2UgcHVycG9zZXMuXHJcbiAgICAgICAgICAvL1RoaXMgbWV0aG9kIGNsZWFycyB0aGF0IGNhY2hlZCBkYXRhIGZvciBhbGwgaXRlbXMgYWZ0ZXIgKGFuZCBpbmNsdWRpbmcpIHRoZSBzcGVjaWZpZWQgaW5kZXguIEl0IHNob3VsZCBiZSBjYWxsZWQgd2hlbmV2ZXIgYSBpdGVtJ3Mgc2l6ZSBjaGFuZ2VzLlxyXG4gICAgICAgICAgLy8gbGV0IHJlc3RTdGFydEluZGV4ID0gbmV3UmVjb3Jkcz8ubGVuZ3RoIC0gMVxyXG4gICAgICAgICAgLy8gcmVzdFN0YXJ0SW5kZXggPSByZXN0U3RhcnRJbmRleCA8IDAgPyAwIDogcmVzdFN0YXJ0SW5kZXhcclxuICAgICAgICAgIC8vXHJcbiAgICAgICAgICB0aGlzLnJlc2V0VGltZW91dCAmJiBjbGVhclRpbWVvdXQodGhpcy5yZXNldFRpbWVvdXQpXHJcbiAgICAgICAgICB0aGlzLnJlc2V0VGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmxpc3RSZWY/LmN1cnJlbnQ/LnJlc2V0QWZ0ZXJJbmRleCAmJiB0aGlzLmxpc3RSZWY/LmN1cnJlbnQ/LnJlc2V0QWZ0ZXJJbmRleCgwLCBmYWxzZSlcclxuICAgICAgICAgIH0sIDMwMClcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldERlZmF1bHRSZWNvcmRzID0gKHBhZ2VTaXplOiBudW1iZXIgPSAzKTogYW55W10gPT4ge1xyXG4gICAgcGFnZVNpemUgPSAocGFnZVNpemUgJiYgcGFnZVNpemUgPiAxKSA/IHBhZ2VTaXplIDogM1xyXG4gICAgY29uc3QgZGVmYXVsdFJlY29yZHMgPSBbXVxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYWdlU2l6ZTsgaSsrKSB7XHJcbiAgICAgIGRlZmF1bHRSZWNvcmRzLnB1c2goZGVmYXVsdFJlY29yZHNJdGVtKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRlZmF1bHRSZWNvcmRzXHJcbiAgfVxyXG5cclxuICBnZXREc1NlbGVjdFJlY29yZHMgPSAoZHM6IFF1ZXJpYWJsZURhdGFTb3VyY2UpID0+IHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgY29uZmlnXHJcbiAgICB9ID0gdGhpcy5wcm9wc1xyXG4gICAgLy8gZ2V0IHNlbGVjdCByZWNvcmRzXHJcbiAgICBsZXQgc2VsZWN0UmVjb3Jkc1xyXG4gICAgaWYgKGRzICYmIGNvbmZpZy5pc0l0ZW1TdHlsZUNvbmZpcm0pIHtcclxuICAgICAgc2VsZWN0UmVjb3JkcyA9IGRzLmdldFNlbGVjdGVkUmVjb3JkcygpXHJcbiAgICB9XHJcbiAgICByZXR1cm4gc2VsZWN0UmVjb3Jkc1xyXG4gIH1cclxuXHJcbiAgZ2V0bGlzdElubmVyRWxlbWVudFR5cGUgPSAoKSA9PiB7XHJcbiAgICBjb25zdCB7IGNvbmZpZyB9ID0gdGhpcy5wcm9wc1xyXG4gICAgY29uc3Qgc3BhY2UgPSBjb25maWc/LmxheW91dFR5cGUgPT09IExpc3RMYXlvdXRUeXBlLkdSSUQgPyBjb25maWc/LnZlcnRpY2FsU3BhY2UgOiBjb25maWc/LnNwYWNlXHJcbiAgICBpZiAodGhpcy5sYXN0U3BhY2UgIT09IHNwYWNlKSB7XHJcbiAgICAgIHRoaXMubGFzdFNwYWNlID0gc3BhY2VcclxuICAgICAgdGhpcy5pbm5lckVsZW1lbnRUeXBlID0gZm9yd2FyZFJlZigoeyBzdHlsZSwgLi4ucmVzdCB9LCByZWYpID0+IChcclxuICAgICAgICA8ZGl2XHJcbiAgICAgICAgICByZWY9e3JlZn1cclxuICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgIC4uLnN0eWxlLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IGAke3BhcnNlRmxvYXQoc3R5bGUuaGVpZ2h0KSAtXHJcbiAgICAgICAgICAgICAgKGNvbmZpZy5sYXlvdXRUeXBlID09PSBMaXN0TGF5b3V0VHlwZS5Db2x1bW5cclxuICAgICAgICAgICAgICAgID8gMFxyXG4gICAgICAgICAgICAgICAgOiBzcGFjZSl9cHhgLFxyXG4gICAgICAgICAgICB3aWR0aDogYCR7cGFyc2VGbG9hdChzdHlsZS53aWR0aCkgLVxyXG4gICAgICAgICAgICAgIChjb25maWcubGF5b3V0VHlwZSAhPT0gTGlzdExheW91dFR5cGUuQ29sdW1uXHJcbiAgICAgICAgICAgICAgICA/IDBcclxuICAgICAgICAgICAgICAgIDogc3BhY2UpfXB4YFxyXG4gICAgICAgICAgfX1cclxuICAgICAgICAgIHsuLi5yZXN0fVxyXG4gICAgICAgIC8+XHJcbiAgICAgICkpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRMaXN0U3R5bGUgPSAoKSA9PiB7XHJcbiAgICBjb25zdCB7XHJcbiAgICAgIHRvb2xzRGl2V2lkdGgsXHJcbiAgICAgIGN1cnJlbnRDYXJkU2l6ZSxcclxuICAgICAgd2lkZ2V0UmVjdFxyXG4gICAgfSA9IHRoaXMuc3RhdGVcclxuICAgIGNvbnN0IHtcclxuICAgICAgY29uZmlnLFxyXG4gICAgICBhcHBNb2RlLFxyXG4gICAgICB0aGVtZSxcclxuICAgICAgaXNIZWlnaHRBdXRvLFxyXG4gICAgICBpc1dpZHRoQXV0b1xyXG4gICAgfSA9IHRoaXMucHJvcHNcclxuXHJcbiAgICBjb25zdCBzaG93Qm90dG9tVG9vbCA9IGxpc3RVdGlscy5zaG93Qm90dG9tVG9vbHModGhpcy5wcm9wcywgdGhpcy5zdGF0ZSlcclxuICAgIGNvbnN0IGJvdHRvbVRvb2xIID0gbGlzdFV0aWxzLmdldEJvdHRvbVRvb2xIKFxyXG4gICAgICB0aGlzLnBhZ2luYXRvckRpdi5jdXJyZW50LFxyXG4gICAgICBzaG93Qm90dG9tVG9vbFxyXG4gICAgKVxyXG4gICAgY29uc3Qgc2hvd1RvcFRvb2xzID0gbGlzdFV0aWxzLnNob3dUb3BUb29scyh0aGlzLnByb3BzKVxyXG4gICAgY29uc3QgbGlzdFRlbXBsYXRlRGVmYXVsdENhcmRTaXplID0gbGlzdFV0aWxzLmdldENhcmRTaXplTnVtYmVySW5Db25maWcodGhpcy5wcm9wcywgd2lkZ2V0UmVjdClcclxuICAgIGNvbnN0IGxpc3RTdHlsZU9wdGlvbiA9IHtcclxuICAgICAgcGFnZVN0eWxlOiBjb25maWc/LnBhZ2VTdHlsZSxcclxuICAgICAgc2Nyb2xsQmFyT3BlbjogY29uZmlnPy5zY3JvbGxCYXJPcGVuLFxyXG4gICAgICBkaXJlY3Rpb246IGNvbmZpZz8uZGlyZWN0aW9uLFxyXG4gICAgICBhcHBNb2RlOiBhcHBNb2RlLFxyXG4gICAgICB0aGVtZTogdGhlbWUsXHJcbiAgICAgIGlzSGVpZ2h0QXV0bzogaXNIZWlnaHRBdXRvLFxyXG4gICAgICBpc1dpZHRoQXV0bzogaXNXaWR0aEF1dG8sXHJcbiAgICAgIGN1cnJlbnRDYXJkU2l6ZTogY3VycmVudENhcmRTaXplLFxyXG4gICAgICBsaXN0VGVtcGxhdGVEZWZhdWx0Q2FyZFNpemU6IGxpc3RUZW1wbGF0ZURlZmF1bHRDYXJkU2l6ZSxcclxuICAgICAgc2hvd1RvcFRvb2xzOiBzaG93VG9wVG9vbHMsXHJcbiAgICAgIGJvdHRvbVRvb2xIOiBib3R0b21Ub29sSCxcclxuICAgICAgdG9wUmlnaHRUb29sVzogdG9vbHNEaXZXaWR0aCxcclxuICAgICAgaGFzUmVjb3JkczogKHRoaXMucmVjb3Jkcz8ubGVuZ3RoID8/IDApID4gMCxcclxuICAgICAgbWV4U2l6ZTogdGhpcy5nZXRMaXN0TWF4U2l6ZSgpLFxyXG4gICAgICBsYXlvdXRUeXBlOiBjb25maWc/LmxheW91dFR5cGUsXHJcbiAgICAgIGxpc3RMZWZ0UGFkZGluZzogdGhpcy5nZXRMaXN0Q29udGVudExlZnRQYWRkaW5nKClcclxuICAgIH1cclxuICAgIHJldHVybiBsaXN0U3R5bGUobGlzdFN0eWxlT3B0aW9uKVxyXG4gIH1cclxuXHJcbiAgY2hlY2tJc1Nob3dMaXN0TWFzayA9IChzaG93TG9hZGluZzogYm9vbGVhbiwgcmVjb3JkczogRGF0YVJlY29yZFtdKSA9PiB7XHJcbiAgICBjb25zdCB7IGlzSW5CdWlsZGVyIH0gPSB3aW5kb3cuamltdUNvbmZpZ1xyXG4gICAgY29uc3QgaXNFZGl0aW5nID0gdGhpcy5pc0VkaXRpbmcoKVxyXG4gICAgY29uc3QgaXNOb0RhdGEgPSAhcmVjb3JkcyB8fCByZWNvcmRzLmxlbmd0aCA8IDFcclxuICAgIGNvbnN0IGlzRGF0YUxvYWRlZEFuZEhhc0RhdGEgPSAhKCFzaG93TG9hZGluZyAmJiBpc05vRGF0YSlcclxuICAgIHJldHVybiBpc0luQnVpbGRlciAmJiBpc0VkaXRpbmcgJiYgaXNEYXRhTG9hZGVkQW5kSGFzRGF0YVxyXG4gIH1cclxuXHJcbiAgZ2V0T3ZlcnNjYW5Db3VudCA9IChsaXN0SGVpZ2h0KSA9PiB7XHJcbiAgICBjb25zdCB7IHdpZGdldFJlY3QgfSA9IHRoaXMuc3RhdGVcclxuICAgIGNvbnN0IHsgYXBwTW9kZSwgY29uZmlnIH0gPSB0aGlzLnByb3BzXHJcbiAgICBjb25zdCBjb2x1bW5Db3VudCA9IGNvbmZpZz8ubGF5b3V0VHlwZSA9PT0gTGlzdExheW91dFR5cGUuR1JJRCA/IHRoaXMuZ2V0SXRlbUNvbHVtbkNvdW50KCkgOiBudWxsXHJcbiAgICBjb25zdCByZWNvcmRTaXplUGVyUGFnZSA9IGxpc3RVdGlscy5nZXRQYWdlU2l6ZShcclxuICAgICAgd2lkZ2V0UmVjdCxcclxuICAgICAgbGlzdEhlaWdodCxcclxuICAgICAgdGhpcy5wcm9wcyxcclxuICAgICAgY29sdW1uQ291bnRcclxuICAgIClcclxuICAgIGNvbnN0IG92ZXJzY2FuQ291bnQgPVxyXG4gICAgICB3aW5kb3cuamltdUNvbmZpZy5pc0luQnVpbGRlciAmJiBhcHBNb2RlICE9PSBBcHBNb2RlLlJ1blxyXG4gICAgICAgID8gMFxyXG4gICAgICAgIDogcmVjb3JkU2l6ZVBlclBhZ2VcclxuICAgIHJldHVybiBvdmVyc2NhbkNvdW50XHJcbiAgfVxyXG5cclxuICBzZXRTY3JvbGxDb250ZW50U2l6ZSA9ICgpID0+IHtcclxuICAgIGlmICghdGhpcy5saXN0T3V0RGl2UmVmKSByZXR1cm5cclxuICAgIGNvbnN0IHsgbGF5b3V0VHlwZSB9ID0gdGhpcy5wcm9wcz8uY29uZmlnXHJcbiAgICBjb25zdCBsaXN0U2Nyb2xsQ29udGVudCA9IHRoaXMubGlzdE91dERpdlJlZi5nZXRFbGVtZW50c0J5VGFnTmFtZSgnZGl2JylbMF1cclxuXHJcbiAgICBpZiAobGF5b3V0VHlwZSA9PT0gTGlzdExheW91dFR5cGUuQ29sdW1uKSB7XHJcbiAgICAgIGxpc3RTY3JvbGxDb250ZW50LnN0eWxlLmhlaWdodCA9ICcxMDAlJ1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbGlzdFNjcm9sbENvbnRlbnQuc3R5bGUud2lkdGggPSAnMTAwJSdcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGludGVyc2VjdGlvbk9ic2VydmVyQ2FsbGJhY2sgPSAoaXNTY3JvbGxFbmQ6IGJvb2xlYW4pID0+IHtcclxuICAgIGNvbnN0IHsgYXBwTW9kZSwgY29uZmlnIH0gPSB0aGlzLnByb3BzXHJcbiAgICBjb25zdCBsaXN0RGl2ID0gdGhpcy5saXN0T3V0RGl2UmVmXHJcbiAgICBjb25zdCB7IGRhdGFzb3VyY2UgfSA9IHRoaXMuc3RhdGVcclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICBpc1Njcm9sbEVuZDogaXNTY3JvbGxFbmRcclxuICAgIH0pXHJcbiAgICBpZiAoIWxpc3REaXYgfHwgKHRoaXMucmVjb3Jkcz8ubGVuZ3RoID8/IDApIDwgMSkgcmV0dXJuXHJcbiAgICBpZiAoXHJcbiAgICAgIGNvbmZpZy5wYWdlU3R5bGUgPT09IFBhZ2VTdHlsZS5TY3JvbGwgJiZcclxuICAgICAgdGhpcy5xdWVyeVN0YXR1cyAhPT0gRGF0YVNvdXJjZVN0YXR1cy5Mb2FkaW5nICYmXHJcbiAgICAgIGRhdGFzb3VyY2UgJiZcclxuICAgICAgKCF3aW5kb3cuamltdUNvbmZpZy5pc0luQnVpbGRlciB8fFxyXG4gICAgICAgIChhcHBNb2RlID09PSBBcHBNb2RlLlJ1biAmJiBpc1Njcm9sbEVuZCkpICYmXHJcbiAgICAgIHRoaXMuaXNIYXNTY3JvbGxlZFxyXG4gICAgKSB7XHJcbiAgICAgIGlmICh0aGlzLnJlY29yZHMubGVuZ3RoIDwgdGhpcy5nZXRUb3RhbENvdW50KCkpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgIHBhZ2U6IHRoaXMuc3RhdGUucGFnZSArIDFcclxuICAgICAgICB9KVxyXG4gICAgICAgIHRoaXMuaXNTd2l0Y2hQYWdlID0gdHJ1ZVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmIChpc1Njcm9sbEVuZCkge1xyXG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIHNjcm9sbFN0YXR1czogJ2VuZCdcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRMaXN0RGl2U2l6ZSA9ICgpID0+IHtcclxuICAgIGNvbnN0IGxpc3REaXYgPSB0aGlzLmxpc3RPdXREaXZSZWZcclxuICAgIGNvbnN0IGNsaWVudFdpZHRoID0gbGlzdERpdj8uY2xpZW50V2lkdGggfHwgbnVsbFxyXG4gICAgY29uc3QgY2xpZW50SGVpZ2h0ID0gbGlzdERpdj8uY2xpZW50SGVpZ2h0IHx8IG51bGxcclxuICAgIGNvbnN0IHRvb2xzRGl2V2lkdGggPSB0aGlzLmxpc3RUb3BSaWdodFRvb2xzRGl2LmN1cnJlbnQ/LmNsaWVudFdpZHRoIHx8IDBcclxuICAgIGNvbnN0IGxpc3REaXZCb3VuZFJlY3QgPSBsaXN0RGl2Py5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSB8fCBudWxsXHJcbiAgICBjb25zdCBsaXN0RGl2U2l6ZSA9IHtcclxuICAgICAgY2xpZW50V2lkdGg6IGNsaWVudFdpZHRoLFxyXG4gICAgICBjbGllbnRIZWlnaHQ6IGNsaWVudEhlaWdodFxyXG4gICAgfVxyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIGxpc3REaXZTaXplOiBsaXN0RGl2U2l6ZSxcclxuICAgICAgdG9vbHNEaXZXaWR0aDogdG9vbHNEaXZXaWR0aCxcclxuICAgICAgbGlzdERpdkJvdW5kUmVjdDogbGlzdERpdkJvdW5kUmVjdFxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGdldENvbnRlbnRMYXlvdXQgPSAoKSA9PiB7XHJcbiAgICBjb25zdCB7IGxheW91dElkLCBicm93c2VyU2l6ZU1vZGUgfSA9IHRoaXMucHJvcHNcclxuICAgIGNvbnN0IGFwcENvbmZpZyA9IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5hcHBDb25maWdcclxuICAgIGNvbnN0IGNvbnRlbnRXaWRnZXRJZCA9IHNlYXJjaFV0aWxzLmdldFdpZGdldElkVGhhdFVzZVRoZUxheW91dElkKFxyXG4gICAgICBhcHBDb25maWcsXHJcbiAgICAgIGxheW91dElkXHJcbiAgICApXHJcbiAgICBjb25zdCBjb250ZW50TGF5b3V0c0luZm8gPSBzZWFyY2hVdGlscy5nZXRDb250ZW50TGF5b3V0SW5mb3NJbk9uZVNpemVNb2RlKFxyXG4gICAgICBhcHBDb25maWcsXHJcbiAgICAgIGNvbnRlbnRXaWRnZXRJZCxcclxuICAgICAgTGF5b3V0SXRlbVR5cGUuV2lkZ2V0LFxyXG4gICAgICBicm93c2VyU2l6ZU1vZGVcclxuICAgIClcclxuICAgIHJldHVybiBjb250ZW50TGF5b3V0c0luZm9cclxuICB9XHJcblxyXG4gIGdldENvbnRlbnRMYXlvdXRTZXR0aW5nID0gKCkgPT4ge1xyXG4gICAgY29uc3QgYXBwQ29uZmlnID0gZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpLmFwcENvbmZpZ1xyXG4gICAgY29uc3QgeyBsYXlvdXRzIH0gPSBhcHBDb25maWdcclxuICAgIGNvbnN0IGNvbnRlbnRMYXlvdXRzSW5mbyA9IHRoaXMuZ2V0Q29udGVudExheW91dCgpXHJcbiAgICBjb25zdCBjb250ZW50TGF5b3V0SWQgPSBjb250ZW50TGF5b3V0c0luZm8/LlswXT8ubGF5b3V0SWRcclxuICAgIGNvbnN0IGNvbnRlbnRMYXlvdXRJdGVtSWQgPSBjb250ZW50TGF5b3V0c0luZm8/LlswXT8ubGF5b3V0SXRlbUlkXHJcbiAgICBjb25zdCBzZXR0aW5nID1cclxuICAgICAgbGF5b3V0cz8uW2NvbnRlbnRMYXlvdXRJZF0/LmNvbnRlbnQ/Lltjb250ZW50TGF5b3V0SXRlbUlkXT8uc2V0dGluZ1xyXG4gICAgcmV0dXJuIHNldHRpbmdcclxuICB9XHJcblxyXG4gIGdldExpc3RNYXhTaXplID0gKCkgPT4ge1xyXG4gICAgY29uc3QgeyBib3VuZGluZ0JveCwgaGVpZ2h0TGF5b3V0SXRlbVNpemVNb2RlcywgbGF5b3V0SWQsIGFwcE1vZGUsIHBhZ2VNb2RlIH0gPSB0aGlzLnByb3BzXHJcbiAgICBjb25zdCBpc0xpc3RIZWlnaHRDdXN0b20gPSBoZWlnaHRMYXlvdXRJdGVtU2l6ZU1vZGVzID09PSBMYXlvdXRJdGVtU2l6ZU1vZGVzLkN1c3RvbSAmJiBib3VuZGluZ0JveD8uaGVpZ2h0XHJcbiAgICBjb25zdCBzZXR0aW5nID0gdGhpcy5nZXRDb250ZW50TGF5b3V0U2V0dGluZygpXHJcbiAgICBjb25zdCBpc0NvbnRlbnRXaWR0aEF1dG8gPVxyXG4gICAgICBzZXR0aW5nPy5hdXRvUHJvcHM/LndpZHRoID09PSAnYXV0bycgfHwgc2V0dGluZz8ud2lkdGhNb2RlID09PSAnYXV0bydcclxuICAgIGNvbnN0IGlzQ29udGVudEhlaWdodEF1dG8gPVxyXG4gICAgICBzZXR0aW5nPy5hdXRvUHJvcHM/LmhlaWdodCA9PT0gJ2F1dG8nIHx8IHNldHRpbmc/LmhlaWdodE1vZGUgPT09ICdhdXRvJyB8fCAhc2V0dGluZ1xyXG4gICAgLy8gY29uc3QgaXNVc2U2MDAgPSAocGFnZU1vZGUgPT09IFBhZ2VNb2RlLkF1dG9TY3JvbGwgJiYgKGlzQ29udGVudEhlaWdodEF1dG8gfHwgIXNldHRpbmc/LmF1dG9Qcm9wcz8ud2lkdGgpKVxyXG4gICAgY29uc3QgREVTSUdOX1NJWkUgPSAocGFnZU1vZGUgPT09IFBhZ2VNb2RlLkF1dG9TY3JvbGwgJiYgaXNDb250ZW50SGVpZ2h0QXV0bykgPyA2MDAgOiB0aGlzLmJvZHlTaXplLmNsaWVudEhlaWdodFxyXG4gICAgY29uc3QgYm9keUhlaWdodCA9IGFwcE1vZGUgPT09IEFwcE1vZGUuRGVzaWduID8gREVTSUdOX1NJWkUgOiB0aGlzLmJvZHlTaXplLmNsaWVudEhlaWdodFxyXG4gICAgY29uc3QgbWF4aGVpZ2h0ID0gaXNMaXN0SGVpZ2h0Q3VzdG9tID8gYm91bmRpbmdCb3g/LmhlaWdodCA6IGJvZHlIZWlnaHRcclxuICAgIGNvbnN0IGlzTGlzdEhlaWdodEN1c3RvbVVuaXRQWCA9IGlzTGlzdEhlaWdodEN1c3RvbSAmJiAhKGJvdW5kaW5nQm94Py5oZWlnaHQ/LmluY2x1ZGVzICYmIGJvdW5kaW5nQm94Py5oZWlnaHQ/LmluY2x1ZGVzKCclJykpXHJcbiAgICBsZXQgbWF4U2l6ZSA9IEltbXV0YWJsZSh7XHJcbiAgICAgIG1heFdpZHRoOiB0aGlzLmJvZHlTaXplLnNjcm9sbFdpZHRoLFxyXG4gICAgICBtYXhIZWlnaHQ6IG1heGhlaWdodFxyXG4gICAgfSlcclxuICAgIGNvbnN0IGFwcENvbmZpZyA9IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5hcHBDb25maWdcclxuICAgIGNvbnN0IHsgbGF5b3V0cyB9ID0gYXBwQ29uZmlnXHJcbiAgICBjb25zdCB0eXBlID0gbGF5b3V0c1tsYXlvdXRJZF0/LnR5cGVcclxuICAgIGlmICh0eXBlID09PSBMYXlvdXRUeXBlLkNvbHVtbkxheW91dCAmJiBpc0NvbnRlbnRXaWR0aEF1dG8pIHtcclxuICAgICAgbWF4U2l6ZSA9IG1heFNpemUuc2V0KCdtYXhXaWR0aCcsIHRoaXMuYm9keVNpemUuY2xpZW50V2lkdGgpXHJcbiAgICB9XHJcbiAgICBpZiAoKHR5cGUgYXMgYW55KSA9PT0gJ1JPVycgJiYgaXNDb250ZW50SGVpZ2h0QXV0byAmJiAhaXNMaXN0SGVpZ2h0Q3VzdG9tVW5pdFBYKSB7XHJcbiAgICAgIGNvbnN0IG1heEhlaWdodCA9IGFwcE1vZGUgPT09IEFwcE1vZGUuRGVzaWduID8gREVTSUdOX1NJWkUgOiB0aGlzLmJvZHlTaXplLmNsaWVudEhlaWdodFxyXG4gICAgICBtYXhTaXplID0gbWF4U2l6ZS5zZXQoJ21heEhlaWdodCcsIG1heEhlaWdodClcclxuICAgIH1cclxuICAgIG1heFNpemUgPSBtYXhTaXplLnNldCgnbWF4SGVpZ2h0JywgdGhpcy5pbml0RWxlbWVudFNpemUobWF4U2l6ZS5tYXhIZWlnaHQpKVxyXG4gICAgbWF4U2l6ZSA9IG1heFNpemUuc2V0KCdtYXhXaWR0aCcsIHRoaXMuaW5pdEVsZW1lbnRTaXplKG1heFNpemUubWF4V2lkdGgpKVxyXG4gICAgcmV0dXJuIG1heFNpemVcclxuICB9XHJcblxyXG4gIGluaXRFbGVtZW50U2l6ZSA9IChzaXplKSA9PiB7XHJcbiAgICBpZiAoTnVtYmVyKHNpemUpKSB7XHJcbiAgICAgIHJldHVybiBgJHtzaXplfXB4YFxyXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgKHNpemUpID09PSAnc3RyaW5nJykge1xyXG4gICAgICBpZiAoc2l6ZT8uaW5jbHVkZXMoJ3B4JykgfHwgc2l6ZT8uaW5jbHVkZXMoJ3JlbScpKSB7XHJcbiAgICAgICAgcmV0dXJuIHNpemVcclxuICAgICAgfSBlbHNlIGlmIChzaXplPy5pbmNsdWRlcygnJScpKSB7XHJcbiAgICAgICAgcmV0dXJuICcxMDAlJ1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gc2l6ZVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0UmVmcmVzaExvYWRpbmdDbGFzcyA9ICgpID0+IHtcclxuICAgIGNvbnN0IHsgY29uZmlnLCBhcHBNb2RlIH0gPSB0aGlzLnByb3BzXHJcbiAgICBjb25zdCB7IHNjcm9sbEJhck9wZW4sIGxheW91dFR5cGUgfSA9IGNvbmZpZ1xyXG4gICAgY29uc3QgaXNFZGl0b3IgPSB3aW5kb3cuamltdUNvbmZpZy5pc0luQnVpbGRlciAmJiBhcHBNb2RlID09PSBBcHBNb2RlLkRlc2lnblxyXG4gICAgaWYgKCFzY3JvbGxCYXJPcGVuIHx8IGlzRWRpdG9yKSB7XHJcbiAgICAgIHJldHVybiAnJ1xyXG4gICAgfVxyXG4gICAgaWYgKGxheW91dFR5cGUgPT09IExpc3RMYXlvdXRUeXBlLkNvbHVtbikge1xyXG4gICAgICByZXR1cm4gJ2hvcml6b24tbG9hZGluZydcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiAndmVydGljYWwtbG9hZGluZydcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlc2V0QXV0b1JlZnJlc2hUaW1lcyA9IChpbnRlcnZhbDogbnVtYmVyLCBzaG93TG9hZGluZyA9IGZhbHNlKSA9PiB7XHJcbiAgICBjbGVhclRpbWVvdXQodGhpcy5yZXNldEF1dG9SZWZyZXNoVGltZSlcclxuICAgIGlmIChpbnRlcnZhbCA8PSAwKSB7XHJcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5hdXRvUmVmcmVzaExvYWRpbmdUaW1lKVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMucmVzZXRBdXRvUmVmcmVzaFRpbWUgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgaWYgKHNob3dMb2FkaW5nICYmIGludGVydmFsID4gMCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgYXV0b1JlZnJlc2hMb2FkaW5nU3RyaW5nOiB0aGlzLmZvcm1hdE1lc3NhZ2UoJ2xhc3RVcGRhdGVBRmV3VGltZScpXHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICBzaG93TG9hZGluZzogc2hvd0xvYWRpbmdcclxuICAgICAgfSlcclxuICAgIH0sIDApXHJcbiAgfVxyXG5cclxuICBzZXRSZWZyZXNoTG9hZGluZ1N0cmluZyA9IChzaG93TG9hZGluZyA9IGZhbHNlKSA9PiB7XHJcbiAgICBpZiAoIXNob3dMb2FkaW5nKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG5cclxuICAgIGxldCB0aW1lID0gMFxyXG4gICAgY2xlYXJJbnRlcnZhbCh0aGlzLmF1dG9SZWZyZXNoTG9hZGluZ1RpbWUpXHJcblxyXG4gICAgdGhpcy5hdXRvUmVmcmVzaExvYWRpbmdUaW1lID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICB0aW1lKytcclxuXHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgIGF1dG9SZWZyZXNoTG9hZGluZ1N0cmluZzogdGhpcy5nZXRMb2FkaW5nU3RyaW5nKHRpbWUpXHJcbiAgICAgIH0pXHJcbiAgICB9LCA2MDAwMClcclxuICB9XHJcblxyXG4gIGdldExvYWRpbmdTdHJpbmcgPSAodGltZTogbnVtYmVyKTogc3RyaW5nID0+IHtcclxuICAgIGxldCBsb2FkaW5nU3RyaW5nID0gdGhpcy5mb3JtYXRNZXNzYWdlKCdsYXN0VXBkYXRlQUZld1RpbWUnKVxyXG4gICAgaWYgKHRpbWUgPiAxICYmIHRpbWUgPD0gMikge1xyXG4gICAgICBsb2FkaW5nU3RyaW5nID0gdGhpcy5mb3JtYXRNZXNzYWdlKCdsYXN0VXBkYXRlQU1pbnV0ZScpXHJcbiAgICB9IGVsc2UgaWYgKHRpbWUgPiAyKSB7XHJcbiAgICAgIGxvYWRpbmdTdHJpbmcgPSB0aGlzLmZvcm1hdE1lc3NhZ2UoJ2xhc3RVcGRhdGVUaW1lJywgeyB1cGRhdGVUaW1lOiB0aW1lIH0pXHJcbiAgICB9XHJcbiAgICByZXR1cm4gbG9hZGluZ1N0cmluZ1xyXG4gIH1cclxuXHJcbiAgb25JdGVtc1JlbmRlcmVkID0gKHtcclxuICAgIG92ZXJzY2FuU3RhcnRJbmRleCxcclxuICAgIG92ZXJzY2FuU3RvcEluZGV4LFxyXG4gICAgdmlzaWJsZVN0YXJ0SW5kZXgsXHJcbiAgICB2aXNpYmxlU3RvcEluZGV4LFxyXG4gICAgdmlzaWJsZUNvbHVtblN0YXJ0SW5kZXgsXHJcbiAgICB2aXNpYmxlQ29sdW1uU3RvcEluZGV4LFxyXG4gICAgdmlzaWJsZVJvd1N0YXJ0SW5kZXgsXHJcbiAgICB2aXNpYmxlUm93U3RvcEluZGV4XHJcbiAgfSkgPT4ge1xyXG4gICAgY29uc3QgeyBjb25maWcgfSA9IHRoaXMucHJvcHNcclxuICAgIC8vIEFsbCBpbmRleCBwYXJhbXMgYXJlIG51bWJlcnMuXHJcbiAgICB0aGlzLmxpc3RWaXNpYmxlU3RhcnRJbmRleCA9IGNvbmZpZz8ubGF5b3V0VHlwZSA9PT0gTGlzdExheW91dFR5cGUuR1JJRCA/IHRoaXMuZ2V0SXRlbUluZGV4QnlSb3dBbmRDb2x1bW5JbmRleCh2aXNpYmxlUm93U3RhcnRJbmRleCwgdmlzaWJsZUNvbHVtblN0YXJ0SW5kZXgpIDogdmlzaWJsZVN0YXJ0SW5kZXhcclxuICAgIHRoaXMubGlzdFZpc2libGVTdG9wSW5kZXggPSBjb25maWc/LmxheW91dFR5cGUgPT09IExpc3RMYXlvdXRUeXBlLkdSSUQgPyB0aGlzLmdldEl0ZW1JbmRleEJ5Um93QW5kQ29sdW1uSW5kZXgodmlzaWJsZVJvd1N0b3BJbmRleCwgdmlzaWJsZUNvbHVtblN0b3BJbmRleCkgOiB2aXNpYmxlU3RvcEluZGV4XHJcbiAgICBpZiAodGhpcy5uZWVkUmVmcmVzaExpc3RPbkxpc3RSZW5kZXJlZCkge1xyXG4gICAgICB0aGlzLm5lZWRSZWZyZXNoTGlzdE9uTGlzdFJlbmRlcmVkID0gZmFsc2VcclxuICAgICAgdGhpcy5yZWZyZXNoTGlzdCgpXHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5pc1N3aXRjaFBhZ2UpIHtcclxuICAgICAgaWYgKGNvbmZpZy5wYWdlU3R5bGUgPT09IFBhZ2VTdHlsZS5TY3JvbGwpIHtcclxuICAgICAgICBpZiAodGhpcy5yZWNvcmRzLmxlbmd0aCA+IHRoaXMubGlzdFZpc2libGVTdG9wSW5kZXggKyAxKSB7XHJcbiAgICAgICAgICB0aGlzLmlzU3dpdGNoUGFnZSA9IGZhbHNlXHJcbiAgICAgICAgICB0aGlzLm9uSXRlbXNSZW5kZXJlZFRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVTY3JvbGxEb3duKG51bGwpXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzU2Nyb2xsVG9OZXh0U3RlcCkge1xyXG4gICAgICAgICAgICAgIHRoaXMuaXNTY3JvbGxUb05leHRTdGVwID0gZmFsc2VcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSwgNTAwKVxyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmlzU3dpdGNoUGFnZSA9IGZhbHNlXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldEl0ZW1JbmRleEJ5Um93QW5kQ29sdW1uSW5kZXggPSAocm93SW5kZXgsIGNvbHVtbkluZGV4KSA9PiB7XHJcbiAgICBjb25zdCBjb2x1bW5Db3VudCA9IHRoaXMuZ2V0SXRlbUNvbHVtbkNvdW50KClcclxuICAgIHJldHVybiByb3dJbmRleCAqIGNvbHVtbkNvdW50ICsgY29sdW1uSW5kZXhcclxuICB9XHJcblxyXG4gIGl0ZW1TaXplID0gaW5kZXggPT4ge1xyXG4gICAgY29uc3QgeyBjb25maWcgfSA9IHRoaXMucHJvcHNcclxuICAgIGNvbnN0IHsgY3VycmVudENhcmRTaXplIH0gPSB0aGlzLnN0YXRlXHJcbiAgICBjb25zdCBpc0hvcml6b24gPSBjb25maWc/LmxheW91dFR5cGUgPT09IExpc3RMYXlvdXRUeXBlLkNvbHVtblxyXG4gICAgY29uc3Qgc3BhY2UgPSBjb25maWc/LmxheW91dFR5cGUgPT09IExpc3RMYXlvdXRUeXBlLkdSSUQgPyBjb25maWc/LnZlcnRpY2FsU3BhY2UgOiBjb25maWc/LnNwYWNlXHJcbiAgICBjb25zdCBpdGVtV2lkdGggPSBjdXJyZW50Q2FyZFNpemUud2lkdGggKyBzcGFjZVxyXG4gICAgY29uc3QgaXRlbUhlaWdodCA9IGN1cnJlbnRDYXJkU2l6ZS5oZWlnaHQgKyBzcGFjZVxyXG4gICAgY29uc3Qgc2l6ZSA9IGlzSG9yaXpvbiA/IGl0ZW1XaWR0aCA6IGl0ZW1IZWlnaHRcclxuICAgIHJldHVybiBzaXplXHJcbiAgfVxyXG5cclxuICBjb2x1bW5XaWR0aCA9IChpbmRleDogbnVtYmVyLCBjYXJkV2lkdGg6IG51bWJlciwgc3BhY2U6IG51bWJlciA9IDApOiBudW1iZXIgPT4ge1xyXG4gICAgcmV0dXJuIGNhcmRXaWR0aCArIHNwYWNlXHJcbiAgfVxyXG5cclxuICByb3dIZWlnaHQgPSAocm93SW5kZXg6IG51bWJlciwgY2FyZEhlaWdodDogbnVtYmVyLCBzcGFjZTogbnVtYmVyID0gMCk6IG51bWJlciA9PiB7XHJcbiAgICByZXR1cm4gY2FyZEhlaWdodCArIHNwYWNlXHJcbiAgfVxyXG5cclxuICBnZXRJdGVtc0J5UmVjb3JkcyA9IHJlY29yZHMgPT4ge1xyXG4gICAgY29uc3Qge1xyXG4gICAgICBjb25maWcsXHJcbiAgICAgIHNlbGVjdGlvbklzSW5TZWxmLFxyXG4gICAgICBzZWxlY3Rpb25Jc1NlbGYsXHJcbiAgICAgIGJ1aWxkZXJTdGF0dXMsXHJcbiAgICAgIGFwcE1vZGUsXHJcbiAgICAgIHF1ZXJ5T2JqZWN0LFxyXG4gICAgICB1c2VEYXRhU291cmNlc1xyXG4gICAgfSA9IHRoaXMucHJvcHNcclxuICAgIGNvbnN0IHsgZGF0YXNvdXJjZSwgaG92ZXJJbmRleCB9ID0gdGhpcy5zdGF0ZVxyXG4gICAgY29uc3Qgc2VsZWN0ZWRSZWNvcmRJZHMgPSAoIWRhdGFzb3VyY2UgfHwgIWNvbmZpZy5pc0l0ZW1TdHlsZUNvbmZpcm1cclxuICAgICAgPyBbXVxyXG4gICAgICA6IGRhdGFzb3VyY2UuZ2V0U2VsZWN0ZWRSZWNvcmRJZHMoKVxyXG4gICAgKS5tYXAodiA9PiB2ICsgJycpXHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgcmVjb3JkcyAmJlxyXG4gICAgICByZWNvcmRzLm1hcCgocmVjb3JkLCBpbmRleCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGlzRWRpdG9yID1cclxuICAgICAgICAgIGluZGV4ID09PSAwICYmXHJcbiAgICAgICAgICB3aW5kb3cuamltdUNvbmZpZy5pc0luQnVpbGRlciAmJlxyXG4gICAgICAgICAgYXBwTW9kZSA9PT0gQXBwTW9kZS5EZXNpZ25cclxuICAgICAgICBjb25zdCBlZGl0UHJvcHMgPSBpc0VkaXRvclxyXG4gICAgICAgICAgPyB7XHJcbiAgICAgICAgICAgICAgaGlkZUNhcmRUb29sOiB0aGlzLnN0YXRlLmhpZGVDYXJkVG9vbCxcclxuICAgICAgICAgICAgICBzZWxlY3Rpb25Jc0xpc3Q6IHNlbGVjdGlvbklzU2VsZixcclxuICAgICAgICAgICAgICBzZWxlY3Rpb25Jc0luTGlzdDogc2VsZWN0aW9uSXNJblNlbGYsXHJcbiAgICAgICAgICAgICAgaXNFZGl0aW5nOiB0aGlzLmlzRWRpdGluZygpLFxyXG4gICAgICAgICAgICAgIGJ1aWxkZXJTdGF0dXM6IGJ1aWxkZXJTdGF0dXMsXHJcbiAgICAgICAgICAgICAgbG9ja0l0ZW1SYXRpbzogY29uZmlnLmxvY2tJdGVtUmF0aW8sXHJcbiAgICAgICAgICAgICAgY2hhbmdlSXNSZXNpemluZ0NhcmQ6IHRoaXMuY2hhbmdlSXNSZXNpemluZ0NhcmRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgOiB7XHJcbiAgICAgICAgICAgICAgbGlua1BhcmFtOiBjb25maWcubGlua1BhcmFtLFxyXG4gICAgICAgICAgICAgIHF1ZXJ5T2JqZWN0OiBxdWVyeU9iamVjdCxcclxuICAgICAgICAgICAgICB1c2VEYXRhU291cmNlc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIGluZGV4LFxyXG4gICAgICAgICAgaXNIb3ZlcjogaG92ZXJJbmRleCA9PT0gaW5kZXgsXHJcbiAgICAgICAgICByZWNvcmQ6IGNvbmZpZy5pc0l0ZW1TdHlsZUNvbmZpcm0gPyByZWNvcmQgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICBhY3RpdmU6XHJcbiAgICAgICAgICAgICFyZWNvcmQuZmFrZSAmJlxyXG4gICAgICAgICAgICBjb25maWcuaXNJdGVtU3R5bGVDb25maXJtICYmXHJcbiAgICAgICAgICAgIGRhdGFzb3VyY2UgJiZcclxuICAgICAgICAgICAgc2VsZWN0ZWRSZWNvcmRJZHMuaW5jbHVkZXMocmVjb3JkLmdldElkKCkpLFxyXG4gICAgICAgICAgLi4udGhpcy5nZXRPdGhlclByb3BzKCksXHJcbiAgICAgICAgICAuLi5lZGl0UHJvcHNcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBnZXRPdGhlclByb3BzID0gKCkgPT4ge1xyXG4gICAgY29uc3Qge1xyXG4gICAgICBjb25maWcsXHJcbiAgICAgIHRoZW1lLFxyXG4gICAgICBpZCxcclxuICAgICAgYXBwTW9kZSxcclxuICAgICAgYnVpbGRlclN1cHBvcnRNb2R1bGVzLFxyXG4gICAgICBsYXlvdXRzLFxyXG4gICAgICBicm93c2VyU2l6ZU1vZGUsXHJcbiAgICAgIGRpc3BhdGNoLFxyXG4gICAgICBpc1JUTFxyXG4gICAgfSA9IHRoaXMucHJvcHNcclxuICAgIGNvbnN0IHsgZGF0YXNvdXJjZSB9ID0gdGhpcy5zdGF0ZVxyXG4gICAgY29uc3QgaXNXaWR0aFBlcmNlbnRhZ2UgPSBsaXN0VXRpbHMuZ2V0Q2FyZFNpemVXaWR0aFVuaXRJbkNvbmZpZyh0aGlzLnByb3BzKT8ud2lkdGg/LnVuaXQgPT09IERpc3RhbmNlVW5pdHMuUEVSQ0VOVEFHRVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgYnJvd3NlclNpemVNb2RlOiBicm93c2VyU2l6ZU1vZGUsXHJcbiAgICAgIHNwYWNlOiBjb25maWcuc3BhY2UsXHJcbiAgICAgIGlzUlRMOiBpc1JUTCxcclxuICAgICAgYnVpbGRlclN1cHBvcnRNb2R1bGVzOiBidWlsZGVyU3VwcG9ydE1vZHVsZXMsXHJcbiAgICAgIGZvcm1hdE1lc3NhZ2U6IHRoaXMuZm9ybWF0TWVzc2FnZSxcclxuICAgICAgZGlzcGF0Y2g6IGRpc3BhdGNoLFxyXG4gICAgICB3aWRnZXRJZDogaWQsXHJcbiAgICAgIGludGVyYWN0OlxyXG4gICAgICAgIHdpbmRvdy5qaW11Q29uZmlnLmlzSW5CdWlsZGVyICYmXHJcbiAgICAgICAgYnVpbGRlclN1cHBvcnRNb2R1bGVzLndpZGdldE1vZHVsZXMuaW50ZXJhY3QsXHJcbiAgICAgIHNlbGVjdENhcmQ6IHRoaXMuc2VsZWN0Q2FyZCxcclxuICAgICAgaGFuZGxlUmVzaXplQ2FyZDogdGhpcy5oYW5kbGVSZXNpemVDYXJkLFxyXG4gICAgICBhcHBNb2RlOiBhcHBNb2RlLFxyXG4gICAgICBvbkNoYW5nZTogdGhpcy5oYW5kbGVJdGVtQ2hhbmdlLFxyXG4gICAgICBob3ZlckxheW91dE9wZW46IGNvbmZpZy5jYXJkQ29uZmlnc1tTdGF0dXMuSG92ZXJdLmVuYWJsZSxcclxuICAgICAgc2VsZWN0YWJsZTpcclxuICAgICAgICBjb25maWcuY2FyZENvbmZpZ3NbU3RhdHVzLlNlbGVjdGVkXS5zZWxlY3Rpb25Nb2RlICE9PVxyXG4gICAgICAgIFNlbGVjdGlvbk1vZGVUeXBlLk5vbmUsXHJcbiAgICAgIGRpcmVjdGlvbjogY29uZmlnLmRpcmVjdGlvbixcclxuICAgICAgdGhlbWU6IHRoZW1lLFxyXG4gICAgICBMYXlvdXRFbnRyeTogdGhpcy5zdGF0ZS5MYXlvdXRFbnRyeSxcclxuICAgICAgbGF5b3V0czogbGF5b3V0cyxcclxuICAgICAgbGF5b3V0VHlwZTogY29uZmlnPy5sYXlvdXRUeXBlLFxyXG4gICAgICBrZWVwQXNwZWN0UmF0aW86IGNvbmZpZz8ua2VlcEFzcGVjdFJhdGlvLFxyXG4gICAgICBncmlkSXRlbVNpemVSYXRpbzogY29uZmlnPy5ncmlkSXRlbVNpemVSYXRpbyxcclxuICAgICAgY2FyZENvbmZpZ3M6IGNvbmZpZy5jYXJkQ29uZmlncyxcclxuICAgICAgZGF0YXNvdXJjZUlkOiBkYXRhc291cmNlICYmIGRhdGFzb3VyY2UuaWQsXHJcbiAgICAgIHVwZGF0ZUNhcmRUb29sUG9zaXRpb246IHRoaXMudXBkYXRlQ2FyZFRvb2xQb3NpdGlvbixcclxuICAgICAgaXNXaWR0aFBlcmNlbnRhZ2U6IGlzV2lkdGhQZXJjZW50YWdlLFxyXG4gICAgICBob3Jpem9udGFsU3BhY2U6IGNvbmZpZz8uaG9yaXpvbnRhbFNwYWNlXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpdGVtUmVuZGVyID0gcHJvcHMgPT4ge1xyXG4gICAgY29uc3QgeyBhcHBNb2RlLCBjb25maWcgfSA9IHRoaXMucHJvcHNcclxuICAgIGxldCBzdHlsZSA9IHByb3BzLnN0eWxlXHJcbiAgICBjb25zdCBjb2x1bW5JbmRleCA9IHByb3BzPy5jb2x1bW5JbmRleCB8fCAwXHJcbiAgICBjb25zdCByb3dJbmRleCA9IHByb3BzPy5yb3dJbmRleCB8fCAwXHJcbiAgICBjb25zdCByb3dDb3VudCA9IHRoaXMuZ2V0SXRlbVJvd0NvdW50KClcclxuICAgIGNvbnN0IGNvbHVtbkNvdW50ID0gdGhpcy5nZXRJdGVtQ29sdW1uQ291bnQoKVxyXG4gICAgY29uc3QgaW5kZXggPSBjb25maWc/LmxheW91dFR5cGUgPT09IExpc3RMYXlvdXRUeXBlLkdSSUQgPyB0aGlzLmdldEl0ZW1JbmRleEJ5Um93QW5kQ29sdW1uSW5kZXgocm93SW5kZXgsIGNvbHVtbkluZGV4KSA6IHByb3BzLmluZGV4XHJcbiAgICBjb25zdCBpdGVtcyA9IHByb3BzLmRhdGFcclxuICAgIGNvbnN0IHJlY29yZExlbmd0aCA9IHRoaXMucmVjb3Jkcz8ubGVuZ3RoIHx8IDBcclxuICAgIGNvbnN0IGlzTGFzdEl0ZW0gPSByZWNvcmRMZW5ndGggLSAxID09PSBpbmRleFxyXG4gICAgbGV0IGxpc3RJdGVtU3R5bGVcclxuICAgIHN3aXRjaCAoY29uZmlnPy5sYXlvdXRUeXBlKSB7XHJcbiAgICAgIGNhc2UgTGlzdExheW91dFR5cGUuQ29sdW1uOlxyXG4gICAgICAgIGxpc3RJdGVtU3R5bGUgPSB7XHJcbiAgICAgICAgICB3aWR0aDogYCR7cGFyc2VGbG9hdChzdHlsZS53aWR0aCkgLSBjb25maWcuc3BhY2V9cHhgLFxyXG4gICAgICAgICAgaGVpZ2h0OiAnMTAwJSdcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSBMaXN0TGF5b3V0VHlwZS5Sb3c6XHJcbiAgICAgICAgbGlzdEl0ZW1TdHlsZSA9IHtcclxuICAgICAgICAgIHdpZHRoOiAnMTAwJScsXHJcbiAgICAgICAgICBoZWlnaHQ6IGAke3BhcnNlRmxvYXQoc3R5bGUuaGVpZ2h0KSAtIGNvbmZpZy5zcGFjZX1weGBcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSBMaXN0TGF5b3V0VHlwZS5HUklEOlxyXG4gICAgICAgIGxpc3RJdGVtU3R5bGUgPSB7XHJcbiAgICAgICAgICBoZWlnaHQ6IGAke3BhcnNlRmxvYXQoc3R5bGUuaGVpZ2h0KSAtIGNvbmZpZz8udmVydGljYWxTcGFjZX1weGAsXHJcbiAgICAgICAgICB3aWR0aDogYCR7cGFyc2VGbG9hdChzdHlsZT8ud2lkdGgpIC0gY29uZmlnPy5ob3Jpem9udGFsU3BhY2V9cHhgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICB9XHJcblxyXG4gICAgLy9UaGUgc2l6ZSBvZiBsaXN0IGl0ZW0gY29udGVudFxyXG4gICAgc3dpdGNoIChjb25maWc/LmxheW91dFR5cGUpIHtcclxuICAgICAgY2FzZSBMaXN0TGF5b3V0VHlwZS5Db2x1bW46XHJcbiAgICAgICAgc3R5bGUgPSB7XHJcbiAgICAgICAgICAuLi5zdHlsZSxcclxuICAgICAgICAgIHdpZHRoOiBpc0xhc3RJdGVtID8gYCR7cGFyc2VGbG9hdChzdHlsZS53aWR0aCkgLSBjb25maWcuc3BhY2V9cHhgIDogYCR7cGFyc2VGbG9hdChzdHlsZS53aWR0aCl9cHhgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgTGlzdExheW91dFR5cGUuUm93OlxyXG4gICAgICAgIHN0eWxlID0ge1xyXG4gICAgICAgICAgLi4uc3R5bGUsXHJcbiAgICAgICAgICBoZWlnaHQ6IGlzTGFzdEl0ZW0gPyBgJHtwYXJzZUZsb2F0KHN0eWxlLmhlaWdodCkgLSBjb25maWcuc3BhY2V9cHhgIDogYCR7cGFyc2VGbG9hdChzdHlsZS5oZWlnaHQpfXB4YFxyXG4gICAgICAgIH1cclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlIExpc3RMYXlvdXRUeXBlLkdSSUQ6XHJcbiAgICAgICAgc3R5bGUgPSB7XHJcbiAgICAgICAgICAuLi5zdHlsZSxcclxuICAgICAgICAgIGhlaWdodDogcm93Q291bnQgPT09IChyb3dJbmRleCArIDEpID8gYCR7cGFyc2VGbG9hdChzdHlsZS5oZWlnaHQpIC0gY29uZmlnPy52ZXJ0aWNhbFNwYWNlfXB4YCA6IGAke3BhcnNlRmxvYXQoc3R5bGUuaGVpZ2h0KX1weGAsXHJcbiAgICAgICAgICB3aWR0aDogY29sdW1uQ291bnQgPT09IChjb2x1bW5JbmRleCArIDEpID8gYCR7cGFyc2VGbG9hdChzdHlsZT8ud2lkdGgpIC0gY29uZmlnPy5ob3Jpem9udGFsU3BhY2V9cHhgIDogYCR7cGFyc2VGbG9hdChzdHlsZT8ud2lkdGgpfXB4YFxyXG4gICAgICAgIH1cclxuICAgICAgICBicmVha1xyXG4gICAgfVxyXG4gICAgY29uc3QgaXNFZGl0b3IgPVxyXG4gICAgICBpbmRleCA9PT0gMCAmJiB3aW5kb3cuamltdUNvbmZpZy5pc0luQnVpbGRlciAmJiBhcHBNb2RlID09PSBBcHBNb2RlLkRlc2lnblxyXG4gICAgY29uc3QgTGlzdENhcmQgPSBpc0VkaXRvciA/IExpc3RDYXJkRWRpdG9yIDogTGlzdENhcmRWaWV3ZXJcclxuICAgIGlmIChpdGVtcz8ubGVuZ3RoIDwgaW5kZXggKyAxKSByZXR1cm4gbnVsbFxyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdiBzdHlsZT17c3R5bGV9PlxyXG4gICAgICAgIDxMaXN0Q2FyZFxyXG4gICAgICAgICAgbGlzdFN0eWxlPXtsaXN0SXRlbVN0eWxlfVxyXG4gICAgICAgICAgd2lkZ2V0SWQ9e3RoaXMucHJvcHMuaWR9XHJcbiAgICAgICAgICB7Li4uaXRlbXNbaW5kZXhdfVxyXG4gICAgICAgICAgaGFuZGxlTGlzdE1vdXNlTW92ZT17dGhpcy5oYW5kbGVMaXN0TW91c2VNb3ZlfVxyXG4gICAgICAgICAgaGFuZGxlTGlzdE1vdXNlTGVhdmU9e3RoaXMuaGFuZGxlTGlzdE1vdXNlTGVhdmV9XHJcbiAgICAgICAgICBpdGVtSWRleD17aW5kZXh9IC8+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgaXRlbUtleSA9IGluZGV4ID0+IHtcclxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLnJlY29yZHNbaW5kZXhdXHJcbiAgICByZXR1cm4gYCR7KGl0ZW0/LmdldElkICYmIGl0ZW0/LmdldElkKCkpIHx8IGluZGV4fWBcclxuICB9XHJcblxyXG4gIGdyaWRJdGVtSW5kZXggPSBpbmRleE9wdGlvbiA9PiB7XHJcbiAgICBjb25zdCB7IGNvbHVtbkluZGV4LCByb3dJbmRleCB9ID0gaW5kZXhPcHRpb25cclxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5nZXRJdGVtSW5kZXhCeVJvd0FuZENvbHVtbkluZGV4KHJvd0luZGV4LCBjb2x1bW5JbmRleClcclxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLnJlY29yZHNbaW5kZXhdXHJcbiAgICByZXR1cm4gYCR7KGl0ZW0/LmdldElkICYmIGl0ZW0/LmdldElkKCkpIHx8IGluZGV4ICsgMTAwfWBcclxuICB9XHJcblxyXG4gIGdldEl0ZW1Db2x1bW5Db3VudCA9ICgpID0+IHtcclxuICAgIGNvbnN0IHsgd2lkZ2V0UmVjdCwgY3VycmVudENhcmRTaXplIH0gPSB0aGlzLnN0YXRlXHJcbiAgICBjb25zdCB7IGNvbmZpZyB9ID0gdGhpcy5wcm9wc1xyXG4gICAgbGV0IGxpc3RXaWR0aCA9ICh3aWRnZXRSZWN0ICYmIHdpZGdldFJlY3Qud2lkdGgpIHx8IExJU1RfQ0FSRF9NSU5fU0laRVxyXG4gICAgbGlzdFdpZHRoID0gbGlzdFdpZHRoIC0gU0NST0xMX0JBUl9XSURUSFxyXG4gICAgY29uc3QgY2FyZFdpZHRoID0gY3VycmVudENhcmRTaXplLndpZHRoICsgY29uZmlnPy5ob3Jpem9udGFsU3BhY2VcclxuICAgIC8vVGhlIGFjdHVhbCB3aWR0aCBvZiB0aGUgbGFzdCBjb2x1bW4gaXMgY3VycmVudENhcmRTaXplLndpZHRoXHJcbiAgICAvLydsaXN0V2lkdGgtNCcgaXMgZm9yIHRoZSB3aWR0aCBvZiB0aGUgc2Nyb2xsIGJhclxyXG4gICAgLy9UaGUgc3BhY2UgaW4gdGhlIGxhc3QgY29sdW1uIHNob3VsZCBiZSByZW1vdmVkXHJcbiAgICByZXR1cm4gTWF0aC5mbG9vcigobGlzdFdpZHRoIC0gY3VycmVudENhcmRTaXplLndpZHRoKSAvIGNhcmRXaWR0aCArIDEpIHx8IDFcclxuICAgIC8vIHJldHVybiBNYXRoLmZsb29yKChsaXN0V2lkdGggKyBjb25maWc/Lmhvcml6b250YWxTcGFjZSkgLyAoY3VycmVudENhcmRTaXplLndpZHRoICsgY29uZmlnPy5ob3Jpem9udGFsU3BhY2UpKSB8fCAxXHJcbiAgfVxyXG5cclxuICBnZXRJdGVtUm93Q291bnQgPSAoKSA9PiB7XHJcbiAgICByZXR1cm4gTWF0aC5jZWlsKHRoaXMucmVjb3Jkcy5sZW5ndGggLyB0aGlzLmdldEl0ZW1Db2x1bW5Db3VudCgpKSB8fCAxXHJcbiAgfVxyXG5cclxuICBnZXRMaXN0Q29udGVudExlZnRQYWRkaW5nID0gKCkgPT4ge1xyXG4gICAgY29uc3QgeyB3aWRnZXRSZWN0LCBjdXJyZW50Q2FyZFNpemUgfSA9IHRoaXMuc3RhdGVcclxuICAgIGNvbnN0IHsgY29uZmlnIH0gPSB0aGlzLnByb3BzXHJcbiAgICBjb25zdCBsaXN0V2lkdGggPSAod2lkZ2V0UmVjdCAmJiB3aWRnZXRSZWN0LndpZHRoKSB8fCBMSVNUX0NBUkRfTUlOX1NJWkVcclxuICAgIGNvbnN0IHJvd1dpZHRoID0gdGhpcy5nZXRJdGVtQ29sdW1uQ291bnQoKSAqIChjdXJyZW50Q2FyZFNpemUud2lkdGggKyBjb25maWc/Lmhvcml6b250YWxTcGFjZSkgLSBjb25maWc/Lmhvcml6b250YWxTcGFjZVxyXG4gICAgbGV0IHBhZGRpbmdcclxuICAgIHN3aXRjaCAoY29uZmlnPy5ncmlkQWxpZ25tZW50KSB7XHJcbiAgICAgIGNhc2UgVGV4dEFsaWduVmFsdWUuTEVGVDpcclxuICAgICAgICBwYWRkaW5nID0gMFxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgVGV4dEFsaWduVmFsdWUuUklHSFQ6XHJcbiAgICAgICAgcGFkZGluZyA9IGxpc3RXaWR0aCAtIHJvd1dpZHRoIC0gU0NST0xMX0JBUl9XSURUSFxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgcGFkZGluZyA9IChsaXN0V2lkdGggLSByb3dXaWR0aCAtIFNDUk9MTF9CQVJfV0lEVEgpIC8gMlxyXG4gICAgICAgIGJyZWFrXHJcbiAgICB9XHJcbiAgICBpZiAoY29uZmlnPy5sYXlvdXRUeXBlID09PSBMaXN0TGF5b3V0VHlwZS5HUklEKSB7XHJcbiAgICAgIHJldHVybiBwYWRkaW5nID4gMCA/IHBhZGRpbmcgOiAwXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gMFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25DcmVhdGVEYXRhU291cmNlRmFpbGVkID0gKGVycikgPT4ge1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIGNyZWF0ZURhdGFTb3VyY2VGYWlsZWQ6IHRydWVcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICByZW5kZXJXaWRnZXRQbGFjZWhvbGRlciA9ICgpOiBSZWFjdC5SZWFjdEVsZW1lbnQgPT4ge1xyXG4gICAgcmV0dXJuIDxXaWRnZXRQbGFjZWhvbGRlciBpY29uPXt3aWRnZXRQcmludE91dGxpbmVkfSB3aWRnZXRJZD17dGhpcy5wcm9wcy5pZH0gbWVzc2FnZT17Jyd9IC8+XHJcbiAgfVxyXG5cclxuICBvbkxpc3RDb250YWluZXJNb3VzZU1vdmUgPSAoKSA9PiB7XHJcbiAgICBpZiAodGhpcy5uZWVkQXV0b1Njcm9sbFRvU2VsZWN0ZWRJdGVtV2hlbkxvYWRQYWdlICYmIHRoaXMucmVjb3Jkcykge1xyXG4gICAgICB0aGlzLm5lZWRBdXRvU2Nyb2xsVG9TZWxlY3RlZEl0ZW1XaGVuTG9hZFBhZ2UgPSBmYWxzZVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyICgpIHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgY29uZmlnLFxyXG4gICAgICBpZCxcclxuICAgICAgYXBwTW9kZSxcclxuICAgICAgYnJvd3NlclNpemVNb2RlLFxyXG4gICAgICBzZWxlY3Rpb25Jc0luU2VsZixcclxuICAgICAgc2VsZWN0aW9uSXNTZWxmLFxyXG4gICAgICB1c2VEYXRhU291cmNlcyxcclxuICAgICAgYnVpbGRlclN0YXR1cyxcclxuICAgICAgbGF5b3V0c1xyXG4gICAgfSA9IHRoaXMucHJvcHNcclxuICAgIGNvbnN0IGFwcENvbmZpZyA9IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5hcHBDb25maWdcclxuICAgIGNvbnN0IHsgZm9yY2VTaG93TWFzaywgZGF0YXNvdXJjZSwgd2lkZ2V0UmVjdCwgcGFnZSwgY3JlYXRlRGF0YVNvdXJjZUZhaWxlZCB9ID0gdGhpcy5zdGF0ZVxyXG4gICAgY29uc3QgaXNJbkJ1aWxkZXIgPSB3aW5kb3cuamltdUNvbmZpZy5pc0luQnVpbGRlclxyXG4gICAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoXHJcbiAgICAgICdqaW11LXdpZGdldCcsXHJcbiAgICAgICd3aWRnZXQtbGlzdCcsXHJcbiAgICAgICdsaXN0LXdpZGdldC0nICsgaWRcclxuICAgIClcclxuXHJcbiAgICBpZiAoIWNvbmZpZy5pdGVtU3R5bGUpIHtcclxuICAgICAgcmV0dXJuIChcclxuICAgICAgICA8V2lkZ2V0UGxhY2Vob2xkZXJcclxuICAgICAgICAgIHdpZGdldElkPXt0aGlzLnByb3BzLmlkfVxyXG4gICAgICAgICAgaWNvbj17cmVxdWlyZSgnLi9hc3NldHMvaWNvbi5zdmcnKX1cclxuICAgICAgICAgIG1lc3NhZ2U9e3RoaXMuZm9ybWF0TWVzc2FnZSgncGxhY2VIb2xkZXJUaXAnKX1cclxuICAgICAgICAvPlxyXG4gICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc2hvd0JvdHRvbVRvb2wgPSBsaXN0VXRpbHMuc2hvd0JvdHRvbVRvb2xzKHRoaXMucHJvcHMsIHRoaXMuc3RhdGUpXHJcbiAgICBjb25zdCBib3R0b21Ub29sSCA9IGxpc3RVdGlscy5nZXRCb3R0b21Ub29sSChcclxuICAgICAgdGhpcy5wYWdpbmF0b3JEaXYuY3VycmVudCxcclxuICAgICAgc2hvd0JvdHRvbVRvb2xcclxuICAgIClcclxuICAgIGNvbnN0IHNob3dUb3BUb29scyA9IGxpc3RVdGlscy5zaG93VG9wVG9vbHModGhpcy5wcm9wcylcclxuICAgIGNvbnN0IGxpc3RIZWlnaHQgPSBsaXN0VXRpbHMuZ2V0TGlzdEhlaWdodChcclxuICAgICAgd2lkZ2V0UmVjdCxcclxuICAgICAgYm90dG9tVG9vbEgsXHJcbiAgICAgIHNob3dUb3BUb29sc1xyXG4gICAgKVxyXG4gICAgY29uc3QgY29sdW1uQ291bnQgPSBjb25maWc/LmxheW91dFR5cGUgPT09IExpc3RMYXlvdXRUeXBlLkdSSUQgPyB0aGlzLmdldEl0ZW1Db2x1bW5Db3VudCgpIDogbnVsbFxyXG4gICAgY29uc3QgcGFnZVNpemUgPSBsaXN0VXRpbHMuZ2V0UGFnZVNpemUod2lkZ2V0UmVjdCwgbGlzdEhlaWdodCwgdGhpcy5wcm9wcywgY29sdW1uQ291bnQpXHJcbiAgICB0aGlzLnBhZ2VTaXplID0gcGFnZVNpemVcclxuICAgIGNvbnN0IHF1ZXJ5UGFnZVNpemUgPSBwYWdlU2l6ZVxyXG5cclxuICAgIGxldCBxdWVyeSA9IGdldFF1ZXJ5T3B0aW9ucyh0aGlzLnN0YXRlLCB0aGlzLnByb3BzLCBxdWVyeVBhZ2VTaXplKVxyXG4gICAgaWYgKFxyXG4gICAgICAhY29tcGFyZVF1ZXJ5T3B0aW9uc0V4Y2VwdFBhZ2luZyhcclxuICAgICAgICBxdWVyeSxcclxuICAgICAgICB0aGlzLmxhc3RRdWVyeSxcclxuICAgICAgICBkYXRhc291cmNlIGFzIFF1ZXJpYWJsZURhdGFTb3VyY2VcclxuICAgICAgKSAmJiBkYXRhc291cmNlXHJcbiAgICApIHtcclxuICAgICAgY29uc3QgdGVtcCA9IHF1ZXJ5XHJcbiAgICAgIGlmIChwYWdlICE9PSAxKSB7XHJcbiAgICAgICAgcXVlcnkgPSB0aGlzLmxhc3RRdWVyeVxyXG4gICAgICAgIHRoaXMubGFzdFF1ZXJ5ID0gdGVtcFxyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgcGFnZTogMVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5sYXN0UXVlcnkgPSB0ZW1wXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBjdXJyZW50TGF5b3V0ID1cclxuICAgICAgYXBwQ29uZmlnPy5sYXlvdXRzW1xyXG4gICAgICAgIHNlYXJjaFV0aWxzLmZpbmRMYXlvdXRJZChcclxuICAgICAgICAgIGxheW91dHNbYnVpbGRlclN0YXR1c10sXHJcbiAgICAgICAgICBicm93c2VyU2l6ZU1vZGUsXHJcbiAgICAgICAgICBhcHBDb25maWcubWFpblNpemVNb2RlXHJcbiAgICAgICAgKVxyXG4gICAgICBdXHJcbiAgICBjb25zdCBjdXJyZW50TGF5b3V0VHlwZSA9IGN1cnJlbnRMYXlvdXQgJiYgY3VycmVudExheW91dC50eXBlXHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdlxyXG4gICAgICAgIGNsYXNzTmFtZT17Y2xhc3Nlc31cclxuICAgICAgICBjc3M9e2dldFN0eWxlKHRoaXMucHJvcHMsIHRoaXMuaXNFZGl0aW5nKCksIHNob3dCb3R0b21Ub29sKX1cclxuICAgICAgICBvblBvaW50ZXJEb3duPXtldnQgPT4ge1xyXG4gICAgICAgICAgaXNJbkJ1aWxkZXIgJiZcclxuICAgICAgICAgIGFwcE1vZGUgIT09IEFwcE1vZGUuUnVuICYmXHJcbiAgICAgICAgICAhc2VsZWN0aW9uSXNTZWxmICYmXHJcbiAgICAgICAgICAhc2VsZWN0aW9uSXNJblNlbGYgJiZcclxuICAgICAgICAgIHRoaXMuaGFuZGxlTGlzdFBvaW50ZXJEb3duKGV2dClcclxuICAgICAgICB9fVxyXG4gICAgICA+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J3dpZGdldC1saXN0IGQtZmxleCcgb25Nb3VzZU1vdmU9e3RoaXMub25MaXN0Q29udGFpbmVyTW91c2VNb3ZlfT5cclxuICAgICAgICAgIHt0aGlzLmlzRHNDb25maWd1cmVkKClcclxuICAgICAgICAgICAgPyAoXHJcbiAgICAgICAgICAgICAgPERhdGFTb3VyY2VDb21wb25lbnRcclxuICAgICAgICAgICAgICAgIHF1ZXJ5PXtkYXRhc291cmNlID8gcXVlcnkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgdXNlRGF0YVNvdXJjZT17dXNlRGF0YVNvdXJjZXMgJiYgdXNlRGF0YVNvdXJjZXNbMF19XHJcbiAgICAgICAgICAgICAgICBvbkRhdGFTb3VyY2VDcmVhdGVkPXt0aGlzLm9uRFNDcmVhdGVkfVxyXG4gICAgICAgICAgICAgICAgb25DcmVhdGVEYXRhU291cmNlRmFpbGVkPXt0aGlzLm9uQ3JlYXRlRGF0YVNvdXJjZUZhaWxlZH1cclxuICAgICAgICAgICAgICAgIHdpZGdldElkPXt0aGlzLnByb3BzLmlkfVxyXG4gICAgICAgICAgICAgICAgcXVlcnlDb3VudFxyXG4gICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlckxpc3R9XHJcbiAgICAgICAgICAgICAgPC9EYXRhU291cmNlQ29tcG9uZW50PlxyXG4gICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgOiAoXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckxpc3QoKVxyXG4gICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICB7KCF0aGlzLmlzSGFzUmVuZGVyTGlzdCAmJiAhY3JlYXRlRGF0YVNvdXJjZUZhaWxlZCkgJiYgKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbGlzdC1sb2FkaW5nLWNvbiB3LTEwMCBoLTEwMCc+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ppbXUtc2Vjb25kYXJ5LWxvYWRpbmcnPjwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj4pfVxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBjcmVhdGVEYXRhU291cmNlRmFpbGVkICYmIDxkaXYgY2xhc3NOYW1lPSdsaXN0LWVycm9yLWNvbiBwb3NpdGlvbi1yZWxhdGl2ZSB3LTEwMCBoLTEwMCc+XHJcbiAgICAgICAgICAgICAge3RoaXMucmVuZGVyV2lkZ2V0UGxhY2Vob2xkZXIoKX1cclxuICAgICAgICAgICAgICA8QWxlcnRcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0ncG9zaXRpb24tYWJzb2x1dGUnXHJcbiAgICAgICAgICAgICAgICB0eXBlPSd3YXJuaW5nJ1xyXG4gICAgICAgICAgICAgICAgd2l0aEljb25cclxuICAgICAgICAgICAgICAgIHRleHQ9e3RoaXMuZm9ybWF0TWVzc2FnZSgnZGF0YVNvdXJjZUNyZWF0ZUVycm9yJyl9XHJcbiAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgIHtpc0luQnVpbGRlciAmJlxyXG4gICAgICAgICAgYXBwTW9kZSAhPT0gQXBwTW9kZS5SdW4gJiZcclxuICAgICAgICAgIChmb3JjZVNob3dNYXNrIHx8XHJcbiAgICAgICAgICAgICghc2VsZWN0aW9uSXNJblNlbGYgJiYgIXNlbGVjdGlvbklzU2VsZikgfHxcclxuICAgICAgICAgICAgKCFjb25maWcuaXNJdGVtU3R5bGVDb25maXJtICYmIGN1cnJlbnRMYXlvdXRUeXBlKSkgJiYgKFxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2xpc3Qtd2l0aC1tYXNrJyAvPlxyXG4gICAgICAgICl9XHJcbiAgICAgICAgPFJlYWN0UmVzaXplRGV0ZWN0b3JcclxuICAgICAgICAgIGhhbmRsZVdpZHRoXHJcbiAgICAgICAgICBoYW5kbGVIZWlnaHRcclxuICAgICAgICAgIG9uUmVzaXplPXt0aGlzLmRlYm91bmNlT25SZXNpemV9XHJcbiAgICAgICAgLz5cclxuICAgICAgPC9kaXY+XHJcbiAgICApXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBXaWRnZXRcclxuXG4gZXhwb3J0IGZ1bmN0aW9uIF9fc2V0X3dlYnBhY2tfcHVibGljX3BhdGhfXyh1cmwpIHsgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gPSB1cmwgfSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==