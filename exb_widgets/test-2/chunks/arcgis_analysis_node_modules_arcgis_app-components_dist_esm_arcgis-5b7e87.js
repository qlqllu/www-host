"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-5b7e87"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-data-store-browser.entry.js":
/*!*******************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-data-store-browser.entry.js ***!
  \*******************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   arcgis_new_item_pages_data_store_browser: () => (/* binding */ ArcgisNewItemPagesDataStoreBrowser)
/* harmony export */ });
/* harmony import */ var _index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-92ebb396.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-92ebb396.js");
/* harmony import */ var _item_properties_e6412a9a_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./item-properties-e6412a9a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-properties-e6412a9a.js");
/* harmony import */ var _data_store_f509564d_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./data-store-f509564d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/data-store-f509564d.js");
/* harmony import */ var _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./add-item-97d577a9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/add-item-97d577a9.js");
/* harmony import */ var _ui_ecf86bba_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ui-ecf86bba.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ui-ecf86bba.js");
/* harmony import */ var _index_81d548b7_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./index-81d548b7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-81d548b7.js");
/* harmony import */ var _portal_79caaeff_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./portal-79caaeff.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/portal-79caaeff.js");
/* harmony import */ var _loadModules_aaf30bd6_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./loadModules-aaf30bd6.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/loadModules-aaf30bd6.js");
/* harmony import */ var _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./config-eb5f7dc2.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/config-eb5f7dc2.js");
/* harmony import */ var _privileges_ccd5f37d_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./privileges-ccd5f37d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/privileges-ccd5f37d.js");
/* harmony import */ var _functional_c82f5ab9_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./functional-c82f5ab9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-c82f5ab9.js");
/* harmony import */ var _item_d9d70416_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./item-d9d70416.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-d9d70416.js");
/* harmony import */ var _data_store_e8b5ce2f_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./data-store-e8b5ce2f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/data-store-e8b5ce2f.js");
/* harmony import */ var _feature_layer_38cdae87_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./feature-layer-38cdae87.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-38cdae87.js");
/* harmony import */ var _feature_layer_d33ea114_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./feature-layer-d33ea114.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-d33ea114.js");
/* harmony import */ var _guid_4f4176ba_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./guid-4f4176ba.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/guid-4f4176ba.js");
/* harmony import */ var _thumbnail_0b7adfcd_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./thumbnail-0b7adfcd.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/thumbnail-0b7adfcd.js");
/* harmony import */ var _query_4f7b7e4d_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./query-4f7b7e4d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/query-4f7b7e4d.js");
/* harmony import */ var _user_e3dedc4a_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./user-e3dedc4a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/user-e3dedc4a.js");
/* harmony import */ var _api_f7934cd7_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./api-f7934cd7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/api-f7934cd7.js");
/* harmony import */ var _server_item_f12153e6_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./server-item-f12153e6.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/server-item-f12153e6.js");
/* harmony import */ var _functional_9f648bee_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./functional-9f648bee.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-9f648bee.js");
/* harmony import */ var _item_types_b4fe86ad_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./item-types-b4fe86ad.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-types-b4fe86ad.js");
/* harmony import */ var _dom_13f5b00c_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./dom-13f5b00c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/dom-13f5b00c.js");
/* harmony import */ var _feature_layer_69305a85_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./feature-layer-69305a85.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-69305a85.js");
/* harmony import */ var _ags_68d4ae20_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./ags-68d4ae20.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ags-68d4ae20.js");
/* harmony import */ var _url_f3b82cc7_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./url-f3b82cc7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/url-f3b82cc7.js");
/* harmony import */ var _storage_d7f5822e_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./storage-d7f5822e.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/storage-d7f5822e.js");
/* harmony import */ var _file_f36193e9_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./file-f36193e9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/file-f36193e9.js");
/* harmony import */ var _store_3210b604_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./store-3210b604.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/store-3210b604.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */































const arcgisNewItemPagesDataStoreBrowserCss = ":host{background-color:var(--calcite-ui-foreground-2);padding:0}.inner-container{display:flex;flex-direction:column;padding:1.5rem;height:calc(100% - 65px)}.content-wrapper{flex-grow:1}.breadcrumb-container{font-weight:500;margin-top:1rem;margin-bottom:1rem;display:flex}.breadcrumb__item{display:flex;align-items:center;font-size:0.875rem;color:var(--calcite-ui-text-2);margin-right:0.5rem}.breadcrumb--inactive{cursor:pointer;margin-right:0.5rem;color:#00619b}.pagination-text{font-size:0.75rem;font-weight:500;margin-top:1rem;margin-bottom:1rem;color:#757575}.data-set-container{background-color:var(--calcite-ui-foreground-1)}.data-set__header{border-width:0;border-bottom-width:2px;border-style:solid;font-size:0.875rem;padding:0;border-color:transparent;width:-moz-fit-content;width:fit-content}.data-set__header:hover{cursor:pointer}.data-set__header--selected{border-color:#0079c1}.header-icon{margin-right:0.5rem}.item-list{margin-left:0;-webkit-margin-start:0;margin-inline-start:0;-webkit-padding-start:0;padding-inline-start:0}.data-set__item{display:grid;grid-template-columns:repeat(2, minmax(0, 1fr));padding-left:0.75rem;padding-right:0.75rem;padding-top:0.5rem;padding-bottom:0.5rem}.data-set__item:hover{cursor:pointer}.data-set__item>.item--title{font-size:0.875rem;margin-top:0;margin-bottom:0}.blue-calcite-icon{--calcite-ui-icon-color:var(--calcite-ui-brand)}.sort-icon{margin-left:6rem}.hidden-icon{visibility:hidden}.pagination-wrapper{display:flex;justify-content:center;margin-top:auto;padding-left:0.5rem;padding-right:0.5rem}.header-text{font-size:1rem;color:var(--calcite-ui-text-1);font-weight:500}";

const ArcgisNewItemPagesDataStoreBrowser = class {
  constructor(hostRef) {
    (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.newItemUpdatePage = (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "newItemUpdatePage", 7);
    this.dataStoreContentType = "tile-layer";
    this.selectedDataset = null;
    this.datastoreContents = undefined;
    this.originalDatasets = undefined;
    this.sortedDatasets = undefined;
    this.displayDatasets = undefined;
    this.pathHistories = [];
    this.cachedData = {};
    this.error = null;
    this.loading = undefined;
    this.sortCriteria = {
      direction: null,
      criteria: null
    };
    this.userTileLayerTypeSelection = undefined;
    this.itemsPerPage = undefined;
    this.totalItems = undefined;
    this.paginationData = undefined;
  }
  /*
    'Vector tile layer' => vectorCacheDataset
    'Raster tile layer' => cacheDataset
    'Scene layer' => i3sRestCache
    Also show 'folder' type datastore contents
   */
  async componentWillLoad() {
    this.dataStoreContentType =
      _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.newItemMode === "tileLayer" ? "tile-layer" : "scene-layer";
    this.dataStoreName = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.dataStoreName;
    this.i18n = _ui_ecf86bba_js__WEBPACK_IMPORTED_MODULE_4__.u.i18n.dataStore;
    this.pathHistories = ["/"];
    this.datastoreContents = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.datastoreContents;
    this.originalDatasets = [..._add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.datastoreContents.children];
    this.sortedDatasets = [...this.originalDatasets];
    this.selectedDataset = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.dataset;
    this.cachedData = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.dataStoreCachedData;
    this.selectedDataset = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.dataset;
    this.serverId = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.serverId;
  }
  toggleSort(criteria) {
    const { sortCriteria } = this;
    const direction = criteria == null
      ? null
      : sortCriteria.criteria !== criteria
        ? "desc"
        : sortCriteria.direction === "desc"
          ? "asc"
          : null;
    if (criteria === null || direction === null) {
      this.sortCriteria = { criteria: null, direction: null };
      this.sortedDatasets = this.originalDatasets;
      return;
    }
    this.sortCriteria = { criteria, direction };
    const sortDirectionMultiplier = direction === "asc" ? 1 : -1;
    this.sortedDatasets = [...this.sortedDatasets].sort(function (a, b) {
      const criteriaA = a[criteria].toLowerCase();
      const criteriaB = b[criteria].toLowerCase();
      return criteriaA.localeCompare(criteriaB) * sortDirectionMultiplier;
    });
  }
  async exploreFolder(path, type) {
    var _a;
    this.loading = true;
    const hasCachedData = this.cachedData[path] != null;
    if (!hasCachedData) {
      const response = await (0,_data_store_f509564d_js__WEBPACK_IMPORTED_MODULE_2__.g)(_add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.dataStoreId, path, type, this.serverId);
      if (((_a = response.error) === null || _a === void 0 ? void 0 : _a.code) === "failToListDataStoreContents") {
        this.loading = false;
        this.error = "failToListDataStoreContents";
        return;
      }
      this.cachedData = Object.assign(Object.assign({}, this.cachedData), { [path]: response.result });
    }
    const newData = this.cachedData[path];
    this.pathHistories = path === "/" ? ["/"] : path.split("/");
    this.datastoreContents = this.filterContentsByUserSelection(newData);
    this.originalDatasets = [...this.datastoreContents.children];
    this.loading = false;
  }
  filterContentsByUserSelection(contents) {
    const storeType = this.dataStoreContentType;
    const tileLayerPublishType = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.tileLayerPublishType;
    // handles an edge case where the selected data store is empty
    // when the data store is empty, the children attribute does not exist
    if (!contents.children) {
      return Object.assign(Object.assign({}, contents), { children: [] });
    }
    return Object.assign(Object.assign({}, contents), { children: contents.children.filter((element) => {
        const type = element.type;
        let isAcceptable = type === "folder";
        if (storeType === "tile-layer") {
          isAcceptable || (isAcceptable = (tileLayerPublishType === "tiles" && type === "cacheDataset") ||
            (tileLayerPublishType === "vectorTiles" && type === "vectorCacheDataset"));
        }
        else if (storeType === "scene-layer") {
          isAcceptable || (isAcceptable = type === "extractedScenePackage" || type === "i3sRestCache");
        }
        return isAcceptable;
      }) });
  }
  renderErrorItem() {
    const { i18n, error, loading } = this;
    let heading = "";
    let description = "";
    if (error) {
      const i18nErr = i18n.error;
      if (error === "failToListDataStoreContents") {
        heading = i18nErr.listing.heading;
        description = i18nErr.listing.description;
      }
      else {
        heading = i18nErr.noDatasetErrorHeading;
        description = i18nErr.noDatasetErrorDescription;
      }
    }
    return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-alert", { heading: heading, description: description, active: error !== null && !loading, onAlertDismiss: () => {
        this.error = null;
      } }));
  }
  renderHeaderItem(type) {
    const { i18n, sortCriteria } = this;
    const { criteria, direction } = sortCriteria;
    return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { onClick: () => this.toggleSort(type), class: {
        "data-set__header": true,
        "data-set__header--selected": criteria === type && direction != null
      } }, type === "name" && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { scale: "s", icon: "circle", class: "hidden-icon header-icon" })), type === "name" ? i18n.fileName : i18n.fileType, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { class: {
        "blue-calcite-icon sort-icon": true,
        "hidden-icon": criteria !== type || !direction
      }, scale: "s", icon: direction === "asc" ? "caret-up" : "caret-down" })));
  }
  onDatastoreContentsChange() {
    // Reset sort on new data
    this.toggleSort(null);
  }
  onSortedDataSetsChange() {
    // Reset pagination on new sorted data
    // 1 because CC pagination starts at 1
    this.calculatePagination(1);
  }
  calculatePagination(start) {
    const { sortedDatasets } = this;
    const totalItems = sortedDatasets.length;
    this.totalItems = totalItems;
    const MAX_ITEM_PER_PAGE = 5;
    const itemsPerPage = Math.min(totalItems, MAX_ITEM_PER_PAGE);
    const startIndex = start - 1;
    const endIndex = Math.min(startIndex + itemsPerPage, totalItems) - 1;
    this.itemsPerPage = itemsPerPage;
    this.displayDatasets = sortedDatasets.slice(startIndex, endIndex + 1);
    this.paginationData = { startIndex, endIndex };
  }
  handleNext() {
    const dataset = this.selectedDataset;
    if (!dataset) {
      this.error = "noDataSetSelected";
      return;
    }
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.dataset = dataset;
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.dataStoreCachedId = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.dataStoreId;
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.serverId = this.serverId;
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.datastoreContents = this.datastoreContents;
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.dataStoreCachedData = this.cachedData;
    _item_properties_e6412a9a_js__WEBPACK_IMPORTED_MODULE_1__.i.title = dataset.name.split(".")[0];
    let type;
    switch (dataset.type) {
      case "vectorCacheDataset":
        type = "Vector Tile Service";
        break;
      case "i3sRestCache":
      case "extractedScenePackage":
        type = "Scene Service";
        break;
      case "cacheDataset":
        type = "Map Service";
        // Might be an Image Service but we don't know for sure
        // We can make a certain call to the backend but it would take a really long time
        // Garima is trying to solve this issue with the backend team
        // type = "Image Service";
        break;
    }
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.type = type;
    this.newItemUpdatePage.emit("serverList");
  }
  render() {
    const { i18n, loading, displayDatasets, originalDatasets, pathHistories, paginationData, dataStoreName } = this;
    return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.H, null, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "inner-container" }, loading ? ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-loader", { label: "datastore-loader", text: i18n.processing })) : ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.F, null, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "content-wrapper" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "header-text" }, i18n.header), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "breadcrumb-container" }, pathHistories.map((path, index) => {
      const isLast = index === pathHistories.length - 1;
      const isFirst = index === 0;
      const onClickPath = isFirst ? "/" : pathHistories.slice(0, index + 1).join("/");
      return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "breadcrumb__item", key: `${path}_${index}` }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { onClick: isLast ? undefined : () => this.exploreFolder(onClickPath, "folder") }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: { "breadcrumb--inactive": !isLast } }, isFirst ? dataStoreName : path)), !isLast && (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { icon: "chevron-right", scale: "s" })));
    })), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "pagination-text" }, displayDatasets.length > 0 &&
      i18n.paginationRange
        .replace("${start}", `${paginationData.startIndex + 1}`)
        .replace("${end}", `${paginationData.endIndex + 1}`)
        .replace("${total}", `${originalDatasets.length}`)), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "data-set-container" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "data-set__item" }, this.renderHeaderItem("name"), this.renderHeaderItem("type")), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-radio-button-group", { name: "file-group", onCalciteRadioButtonGroupChange: (event) => {
        this.selectedDataset = event.target.selectedItem.value;
      }, layout: "vertical" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("ul", { class: "item-list" }, displayDatasets.length > 0 ? (displayDatasets.map((dataSet) => {
      var _a;
      const { name, path, type } = dataSet;
      const isFolder = type === "folder";
      return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("li", { key: `dataSet--item__${path}`, class: "data-set__item", onClick: () => {
          if (isFolder) {
            this.exploreFolder(dataSet.path, "folder");
          }
        } }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { layout: "inline", class: "description" }, isFolder ? ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { icon: "folder", scale: "s", class: "blue-calcite-icon" })) : ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-radio-button", { value: dataSet, checked: path === ((_a = this.selectedDataset) === null || _a === void 0 ? void 0 : _a.path) })), name), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("p", { class: "item--title" }, type)));
    })) : ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("li", { class: "data-set__item" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { layout: "inline" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { icon: "exclamation-mark-triangle", scale: "s" }), i18n.emptyFolder))))))), this.itemsPerPage > 0 && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "pagination-wrapper" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-pagination", { startItem: paginationData.startIndex + 1, totalItems: this.totalItems, pageSize: this.itemsPerPage, onCalcitePaginationChange: (event) => {
        const node = event.target;
        this.calculatePagination(node.startItem);
      } })))))), this.renderErrorItem()));
  }
  get el() { return (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.d)(this); }
  static get watchers() { return {
    "originalDatasets": ["onDatastoreContentsChange"],
    "sortedDatasets": ["onSortedDataSetsChange"]
  }; }
};
ArcgisNewItemPagesDataStoreBrowser.style = arcgisNewItemPagesDataStoreBrowserCss;




/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXBwLWNvbXBvbmVudHNfZGlzdF9lc21fYXJjZ2lzLTViN2U4Ny5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDNEg7QUFDbkQ7QUFDSjtBQUNWO0FBQ047QUFDeEI7QUFDQztBQUNLO0FBQ0w7QUFDSTtBQUNBO0FBQ047QUFDTTtBQUNHO0FBQ0E7QUFDVDtBQUNLO0FBQ0o7QUFDRDtBQUNEO0FBQ1E7QUFDRDtBQUNBO0FBQ1A7QUFDVTtBQUNWO0FBQ0E7QUFDSTtBQUNIO0FBQ0M7O0FBRTdCLHFEQUFxRCxnREFBZ0QsVUFBVSxpQkFBaUIsYUFBYSxzQkFBc0IsZUFBZSx5QkFBeUIsaUJBQWlCLFlBQVksc0JBQXNCLGdCQUFnQixnQkFBZ0IsbUJBQW1CLGFBQWEsa0JBQWtCLGFBQWEsbUJBQW1CLG1CQUFtQiwrQkFBK0Isb0JBQW9CLHNCQUFzQixlQUFlLG9CQUFvQixjQUFjLGlCQUFpQixrQkFBa0IsZ0JBQWdCLGdCQUFnQixtQkFBbUIsY0FBYyxvQkFBb0IsZ0RBQWdELGtCQUFrQixlQUFlLHdCQUF3QixtQkFBbUIsbUJBQW1CLFVBQVUseUJBQXlCLHVCQUF1QixrQkFBa0Isd0JBQXdCLGVBQWUsNEJBQTRCLHFCQUFxQixhQUFhLG9CQUFvQixXQUFXLGNBQWMsdUJBQXVCLHNCQUFzQix3QkFBd0IsdUJBQXVCLGdCQUFnQixhQUFhLGdEQUFnRCxxQkFBcUIsc0JBQXNCLG1CQUFtQixzQkFBc0Isc0JBQXNCLGVBQWUsNkJBQTZCLG1CQUFtQixhQUFhLGdCQUFnQixtQkFBbUIsZ0RBQWdELFdBQVcsaUJBQWlCLGFBQWEsa0JBQWtCLG9CQUFvQixhQUFhLHVCQUF1QixnQkFBZ0Isb0JBQW9CLHFCQUFxQixhQUFhLGVBQWUsK0JBQStCLGdCQUFnQjs7QUFFM29EO0FBQ0E7QUFD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QW1CLG1DQUFtQztBQUMxVSxLQUFLLElBQUkscURBQUMsVUFBVSwwQkFBMEI7QUFDOUM7QUFDQSxvQkFBb0IsTUFBTSxNQUFNLDhCQUE4QjtBQUM5RCxvQkFBb0IsSUFBSSxNQUFNLDRCQUE0QjtBQUMxRCxvQkFBb0IsTUFBTSxNQUFNLHdCQUF3QixLQUFLLHFEQUFDLFVBQVUsNkJBQTZCLEVBQUUscURBQUMsVUFBVSx5QkFBeUIsaUVBQWlFLHFEQUFDLGlDQUFpQztBQUM5TztBQUNBLE9BQU8sc0JBQXNCLEVBQUUscURBQUMsU0FBUyxvQkFBb0I7QUFDN0Q7QUFDQSxjQUFjLG1CQUFtQjtBQUNqQztBQUNBLGNBQWMscURBQUMsU0FBUyx1QkFBdUIsS0FBSztBQUNwRDtBQUNBO0FBQ0E7QUFDQSxXQUFXLEVBQUUscURBQUMsb0JBQW9CLHdDQUF3QyxjQUFjLHFEQUFDLG1CQUFtQix3REFBd0QsTUFBTSxxREFBQywyQkFBMkIsOEdBQThHLFdBQVcscURBQUMsUUFBUSxzQkFBc0I7QUFDOVYsS0FBSyxNQUFNLHFEQUFDLFNBQVMseUJBQXlCLEVBQUUscURBQUMsb0JBQW9CLGtCQUFrQixFQUFFLHFEQUFDLG1CQUFtQiwrQ0FBK0Msc0RBQXNELHFEQUFDLFVBQVUsNkJBQTZCLEVBQUUscURBQUMseUJBQXlCO0FBQ3RSO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxhQUFhLE9BQU8scURBQVU7QUFDOUIsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRTBGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYW5hbHlzaXMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYXBwLWNvbXBvbmVudHMvZGlzdC9lc20vYXJjZ2lzLW5ldy1pdGVtLXBhZ2VzLWRhdGEtc3RvcmUtYnJvd3Nlci5lbnRyeS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiB2My4wLjk5XG4gKi9cbmltcG9ydCB7IHIgYXMgcmVnaXN0ZXJJbnN0YW5jZSwgYyBhcyBjcmVhdGVFdmVudCwgaCwgRiBhcyBGcmFnbWVudCwgSCBhcyBIb3N0LCBkIGFzIGdldEVsZW1lbnQgfSBmcm9tICcuL2luZGV4LTkyZWJiMzk2LmpzJztcbmltcG9ydCB7IGkgYXMgaXRlbVByb3BlcnRpZXNTdGF0ZSB9IGZyb20gJy4vaXRlbS1wcm9wZXJ0aWVzLWU2NDEyYTlhLmpzJztcbmltcG9ydCB7IGcgYXMgZ2V0RGF0YXN0b3JlQ29udGVudHMgfSBmcm9tICcuL2RhdGEtc3RvcmUtZjUwOTU2NGQuanMnO1xuaW1wb3J0IHsgYSBhcyBhZGRJdGVtU3RhdGUgfSBmcm9tICcuL2FkZC1pdGVtLTk3ZDU3N2E5LmpzJztcbmltcG9ydCB7IHUgYXMgdWlTdG9yZVN0YXRlIH0gZnJvbSAnLi91aS1lY2Y4NmJiYS5qcyc7XG5pbXBvcnQgJy4vaW5kZXgtODFkNTQ4YjcuanMnO1xuaW1wb3J0ICcuL3BvcnRhbC03OWNhYWVmZi5qcyc7XG5pbXBvcnQgJy4vbG9hZE1vZHVsZXMtYWFmMzBiZDYuanMnO1xuaW1wb3J0ICcuL2NvbmZpZy1lYjVmN2RjMi5qcyc7XG5pbXBvcnQgJy4vcHJpdmlsZWdlcy1jY2Q1ZjM3ZC5qcyc7XG5pbXBvcnQgJy4vZnVuY3Rpb25hbC1jODJmNWFiOS5qcyc7XG5pbXBvcnQgJy4vaXRlbS1kOWQ3MDQxNi5qcyc7XG5pbXBvcnQgJy4vZGF0YS1zdG9yZS1lOGI1Y2UyZi5qcyc7XG5pbXBvcnQgJy4vZmVhdHVyZS1sYXllci0zOGNkYWU4Ny5qcyc7XG5pbXBvcnQgJy4vZmVhdHVyZS1sYXllci1kMzNlYTExNC5qcyc7XG5pbXBvcnQgJy4vZ3VpZC00ZjQxNzZiYS5qcyc7XG5pbXBvcnQgJy4vdGh1bWJuYWlsLTBiN2FkZmNkLmpzJztcbmltcG9ydCAnLi9xdWVyeS00ZjdiN2U0ZC5qcyc7XG5pbXBvcnQgJy4vdXNlci1lM2RlZGM0YS5qcyc7XG5pbXBvcnQgJy4vYXBpLWY3OTM0Y2Q3LmpzJztcbmltcG9ydCAnLi9zZXJ2ZXItaXRlbS1mMTIxNTNlNi5qcyc7XG5pbXBvcnQgJy4vZnVuY3Rpb25hbC05ZjY0OGJlZS5qcyc7XG5pbXBvcnQgJy4vaXRlbS10eXBlcy1iNGZlODZhZC5qcyc7XG5pbXBvcnQgJy4vZG9tLTEzZjViMDBjLmpzJztcbmltcG9ydCAnLi9mZWF0dXJlLWxheWVyLTY5MzA1YTg1LmpzJztcbmltcG9ydCAnLi9hZ3MtNjhkNGFlMjAuanMnO1xuaW1wb3J0ICcuL3VybC1mM2I4MmNjNy5qcyc7XG5pbXBvcnQgJy4vc3RvcmFnZS1kN2Y1ODIyZS5qcyc7XG5pbXBvcnQgJy4vZmlsZS1mMzYxOTNlOS5qcyc7XG5pbXBvcnQgJy4vc3RvcmUtMzIxMGI2MDQuanMnO1xuXG5jb25zdCBhcmNnaXNOZXdJdGVtUGFnZXNEYXRhU3RvcmVCcm93c2VyQ3NzID0gXCI6aG9zdHtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtdWktZm9yZWdyb3VuZC0yKTtwYWRkaW5nOjB9LmlubmVyLWNvbnRhaW5lcntkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO3BhZGRpbmc6MS41cmVtO2hlaWdodDpjYWxjKDEwMCUgLSA2NXB4KX0uY29udGVudC13cmFwcGVye2ZsZXgtZ3JvdzoxfS5icmVhZGNydW1iLWNvbnRhaW5lcntmb250LXdlaWdodDo1MDA7bWFyZ2luLXRvcDoxcmVtO21hcmdpbi1ib3R0b206MXJlbTtkaXNwbGF5OmZsZXh9LmJyZWFkY3J1bWJfX2l0ZW17ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtmb250LXNpemU6MC44NzVyZW07Y29sb3I6dmFyKC0tY2FsY2l0ZS11aS10ZXh0LTIpO21hcmdpbi1yaWdodDowLjVyZW19LmJyZWFkY3J1bWItLWluYWN0aXZle2N1cnNvcjpwb2ludGVyO21hcmdpbi1yaWdodDowLjVyZW07Y29sb3I6IzAwNjE5Yn0ucGFnaW5hdGlvbi10ZXh0e2ZvbnQtc2l6ZTowLjc1cmVtO2ZvbnQtd2VpZ2h0OjUwMDttYXJnaW4tdG9wOjFyZW07bWFyZ2luLWJvdHRvbToxcmVtO2NvbG9yOiM3NTc1NzV9LmRhdGEtc2V0LWNvbnRhaW5lcntiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtdWktZm9yZWdyb3VuZC0xKX0uZGF0YS1zZXRfX2hlYWRlcntib3JkZXItd2lkdGg6MDtib3JkZXItYm90dG9tLXdpZHRoOjJweDtib3JkZXItc3R5bGU6c29saWQ7Zm9udC1zaXplOjAuODc1cmVtO3BhZGRpbmc6MDtib3JkZXItY29sb3I6dHJhbnNwYXJlbnQ7d2lkdGg6LW1vei1maXQtY29udGVudDt3aWR0aDpmaXQtY29udGVudH0uZGF0YS1zZXRfX2hlYWRlcjpob3ZlcntjdXJzb3I6cG9pbnRlcn0uZGF0YS1zZXRfX2hlYWRlci0tc2VsZWN0ZWR7Ym9yZGVyLWNvbG9yOiMwMDc5YzF9LmhlYWRlci1pY29ue21hcmdpbi1yaWdodDowLjVyZW19Lml0ZW0tbGlzdHttYXJnaW4tbGVmdDowOy13ZWJraXQtbWFyZ2luLXN0YXJ0OjA7bWFyZ2luLWlubGluZS1zdGFydDowOy13ZWJraXQtcGFkZGluZy1zdGFydDowO3BhZGRpbmctaW5saW5lLXN0YXJ0OjB9LmRhdGEtc2V0X19pdGVte2Rpc3BsYXk6Z3JpZDtncmlkLXRlbXBsYXRlLWNvbHVtbnM6cmVwZWF0KDIsIG1pbm1heCgwLCAxZnIpKTtwYWRkaW5nLWxlZnQ6MC43NXJlbTtwYWRkaW5nLXJpZ2h0OjAuNzVyZW07cGFkZGluZy10b3A6MC41cmVtO3BhZGRpbmctYm90dG9tOjAuNXJlbX0uZGF0YS1zZXRfX2l0ZW06aG92ZXJ7Y3Vyc29yOnBvaW50ZXJ9LmRhdGEtc2V0X19pdGVtPi5pdGVtLS10aXRsZXtmb250LXNpemU6MC44NzVyZW07bWFyZ2luLXRvcDowO21hcmdpbi1ib3R0b206MH0uYmx1ZS1jYWxjaXRlLWljb257LS1jYWxjaXRlLXVpLWljb24tY29sb3I6dmFyKC0tY2FsY2l0ZS11aS1icmFuZCl9LnNvcnQtaWNvbnttYXJnaW4tbGVmdDo2cmVtfS5oaWRkZW4taWNvbnt2aXNpYmlsaXR5OmhpZGRlbn0ucGFnaW5hdGlvbi13cmFwcGVye2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO21hcmdpbi10b3A6YXV0bztwYWRkaW5nLWxlZnQ6MC41cmVtO3BhZGRpbmctcmlnaHQ6MC41cmVtfS5oZWFkZXItdGV4dHtmb250LXNpemU6MXJlbTtjb2xvcjp2YXIoLS1jYWxjaXRlLXVpLXRleHQtMSk7Zm9udC13ZWlnaHQ6NTAwfVwiO1xuXG5jb25zdCBBcmNnaXNOZXdJdGVtUGFnZXNEYXRhU3RvcmVCcm93c2VyID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XG4gICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICB0aGlzLm5ld0l0ZW1VcGRhdGVQYWdlID0gY3JlYXRlRXZlbnQodGhpcywgXCJuZXdJdGVtVXBkYXRlUGFnZVwiLCA3KTtcbiAgICB0aGlzLmRhdGFTdG9yZUNvbnRlbnRUeXBlID0gXCJ0aWxlLWxheWVyXCI7XG4gICAgdGhpcy5zZWxlY3RlZERhdGFzZXQgPSBudWxsO1xuICAgIHRoaXMuZGF0YXN0b3JlQ29udGVudHMgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5vcmlnaW5hbERhdGFzZXRzID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuc29ydGVkRGF0YXNldHMgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5kaXNwbGF5RGF0YXNldHMgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5wYXRoSGlzdG9yaWVzID0gW107XG4gICAgdGhpcy5jYWNoZWREYXRhID0ge307XG4gICAgdGhpcy5lcnJvciA9IG51bGw7XG4gICAgdGhpcy5sb2FkaW5nID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuc29ydENyaXRlcmlhID0ge1xuICAgICAgZGlyZWN0aW9uOiBudWxsLFxuICAgICAgY3JpdGVyaWE6IG51bGxcbiAgICB9O1xuICAgIHRoaXMudXNlclRpbGVMYXllclR5cGVTZWxlY3Rpb24gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5pdGVtc1BlclBhZ2UgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy50b3RhbEl0ZW1zID0gdW5kZWZpbmVkO1xuICAgIHRoaXMucGFnaW5hdGlvbkRhdGEgPSB1bmRlZmluZWQ7XG4gIH1cbiAgLypcbiAgICAnVmVjdG9yIHRpbGUgbGF5ZXInID0+IHZlY3RvckNhY2hlRGF0YXNldFxuICAgICdSYXN0ZXIgdGlsZSBsYXllcicgPT4gY2FjaGVEYXRhc2V0XG4gICAgJ1NjZW5lIGxheWVyJyA9PiBpM3NSZXN0Q2FjaGVcbiAgICBBbHNvIHNob3cgJ2ZvbGRlcicgdHlwZSBkYXRhc3RvcmUgY29udGVudHNcbiAgICovXG4gIGFzeW5jIGNvbXBvbmVudFdpbGxMb2FkKCkge1xuICAgIHRoaXMuZGF0YVN0b3JlQ29udGVudFR5cGUgPVxuICAgICAgYWRkSXRlbVN0YXRlLm5ld0l0ZW1Nb2RlID09PSBcInRpbGVMYXllclwiID8gXCJ0aWxlLWxheWVyXCIgOiBcInNjZW5lLWxheWVyXCI7XG4gICAgdGhpcy5kYXRhU3RvcmVOYW1lID0gYWRkSXRlbVN0YXRlLmRhdGFTdG9yZU5hbWU7XG4gICAgdGhpcy5pMThuID0gdWlTdG9yZVN0YXRlLmkxOG4uZGF0YVN0b3JlO1xuICAgIHRoaXMucGF0aEhpc3RvcmllcyA9IFtcIi9cIl07XG4gICAgdGhpcy5kYXRhc3RvcmVDb250ZW50cyA9IGFkZEl0ZW1TdGF0ZS5kYXRhc3RvcmVDb250ZW50cztcbiAgICB0aGlzLm9yaWdpbmFsRGF0YXNldHMgPSBbLi4uYWRkSXRlbVN0YXRlLmRhdGFzdG9yZUNvbnRlbnRzLmNoaWxkcmVuXTtcbiAgICB0aGlzLnNvcnRlZERhdGFzZXRzID0gWy4uLnRoaXMub3JpZ2luYWxEYXRhc2V0c107XG4gICAgdGhpcy5zZWxlY3RlZERhdGFzZXQgPSBhZGRJdGVtU3RhdGUuZGF0YXNldDtcbiAgICB0aGlzLmNhY2hlZERhdGEgPSBhZGRJdGVtU3RhdGUuZGF0YVN0b3JlQ2FjaGVkRGF0YTtcbiAgICB0aGlzLnNlbGVjdGVkRGF0YXNldCA9IGFkZEl0ZW1TdGF0ZS5kYXRhc2V0O1xuICAgIHRoaXMuc2VydmVySWQgPSBhZGRJdGVtU3RhdGUuc2VydmVySWQ7XG4gIH1cbiAgdG9nZ2xlU29ydChjcml0ZXJpYSkge1xuICAgIGNvbnN0IHsgc29ydENyaXRlcmlhIH0gPSB0aGlzO1xuICAgIGNvbnN0IGRpcmVjdGlvbiA9IGNyaXRlcmlhID09IG51bGxcbiAgICAgID8gbnVsbFxuICAgICAgOiBzb3J0Q3JpdGVyaWEuY3JpdGVyaWEgIT09IGNyaXRlcmlhXG4gICAgICAgID8gXCJkZXNjXCJcbiAgICAgICAgOiBzb3J0Q3JpdGVyaWEuZGlyZWN0aW9uID09PSBcImRlc2NcIlxuICAgICAgICAgID8gXCJhc2NcIlxuICAgICAgICAgIDogbnVsbDtcbiAgICBpZiAoY3JpdGVyaWEgPT09IG51bGwgfHwgZGlyZWN0aW9uID09PSBudWxsKSB7XG4gICAgICB0aGlzLnNvcnRDcml0ZXJpYSA9IHsgY3JpdGVyaWE6IG51bGwsIGRpcmVjdGlvbjogbnVsbCB9O1xuICAgICAgdGhpcy5zb3J0ZWREYXRhc2V0cyA9IHRoaXMub3JpZ2luYWxEYXRhc2V0cztcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5zb3J0Q3JpdGVyaWEgPSB7IGNyaXRlcmlhLCBkaXJlY3Rpb24gfTtcbiAgICBjb25zdCBzb3J0RGlyZWN0aW9uTXVsdGlwbGllciA9IGRpcmVjdGlvbiA9PT0gXCJhc2NcIiA/IDEgOiAtMTtcbiAgICB0aGlzLnNvcnRlZERhdGFzZXRzID0gWy4uLnRoaXMuc29ydGVkRGF0YXNldHNdLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgIGNvbnN0IGNyaXRlcmlhQSA9IGFbY3JpdGVyaWFdLnRvTG93ZXJDYXNlKCk7XG4gICAgICBjb25zdCBjcml0ZXJpYUIgPSBiW2NyaXRlcmlhXS50b0xvd2VyQ2FzZSgpO1xuICAgICAgcmV0dXJuIGNyaXRlcmlhQS5sb2NhbGVDb21wYXJlKGNyaXRlcmlhQikgKiBzb3J0RGlyZWN0aW9uTXVsdGlwbGllcjtcbiAgICB9KTtcbiAgfVxuICBhc3luYyBleHBsb3JlRm9sZGVyKHBhdGgsIHR5cGUpIHtcbiAgICB2YXIgX2E7XG4gICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTtcbiAgICBjb25zdCBoYXNDYWNoZWREYXRhID0gdGhpcy5jYWNoZWREYXRhW3BhdGhdICE9IG51bGw7XG4gICAgaWYgKCFoYXNDYWNoZWREYXRhKSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdldERhdGFzdG9yZUNvbnRlbnRzKGFkZEl0ZW1TdGF0ZS5kYXRhU3RvcmVJZCwgcGF0aCwgdHlwZSwgdGhpcy5zZXJ2ZXJJZCk7XG4gICAgICBpZiAoKChfYSA9IHJlc3BvbnNlLmVycm9yKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY29kZSkgPT09IFwiZmFpbFRvTGlzdERhdGFTdG9yZUNvbnRlbnRzXCIpIHtcbiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZXJyb3IgPSBcImZhaWxUb0xpc3REYXRhU3RvcmVDb250ZW50c1wiO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLmNhY2hlZERhdGEgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMuY2FjaGVkRGF0YSksIHsgW3BhdGhdOiByZXNwb25zZS5yZXN1bHQgfSk7XG4gICAgfVxuICAgIGNvbnN0IG5ld0RhdGEgPSB0aGlzLmNhY2hlZERhdGFbcGF0aF07XG4gICAgdGhpcy5wYXRoSGlzdG9yaWVzID0gcGF0aCA9PT0gXCIvXCIgPyBbXCIvXCJdIDogcGF0aC5zcGxpdChcIi9cIik7XG4gICAgdGhpcy5kYXRhc3RvcmVDb250ZW50cyA9IHRoaXMuZmlsdGVyQ29udGVudHNCeVVzZXJTZWxlY3Rpb24obmV3RGF0YSk7XG4gICAgdGhpcy5vcmlnaW5hbERhdGFzZXRzID0gWy4uLnRoaXMuZGF0YXN0b3JlQ29udGVudHMuY2hpbGRyZW5dO1xuICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICB9XG4gIGZpbHRlckNvbnRlbnRzQnlVc2VyU2VsZWN0aW9uKGNvbnRlbnRzKSB7XG4gICAgY29uc3Qgc3RvcmVUeXBlID0gdGhpcy5kYXRhU3RvcmVDb250ZW50VHlwZTtcbiAgICBjb25zdCB0aWxlTGF5ZXJQdWJsaXNoVHlwZSA9IGFkZEl0ZW1TdGF0ZS50aWxlTGF5ZXJQdWJsaXNoVHlwZTtcbiAgICAvLyBoYW5kbGVzIGFuIGVkZ2UgY2FzZSB3aGVyZSB0aGUgc2VsZWN0ZWQgZGF0YSBzdG9yZSBpcyBlbXB0eVxuICAgIC8vIHdoZW4gdGhlIGRhdGEgc3RvcmUgaXMgZW1wdHksIHRoZSBjaGlsZHJlbiBhdHRyaWJ1dGUgZG9lcyBub3QgZXhpc3RcbiAgICBpZiAoIWNvbnRlbnRzLmNoaWxkcmVuKSB7XG4gICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBjb250ZW50cyksIHsgY2hpbGRyZW46IFtdIH0pO1xuICAgIH1cbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBjb250ZW50cyksIHsgY2hpbGRyZW46IGNvbnRlbnRzLmNoaWxkcmVuLmZpbHRlcigoZWxlbWVudCkgPT4ge1xuICAgICAgICBjb25zdCB0eXBlID0gZWxlbWVudC50eXBlO1xuICAgICAgICBsZXQgaXNBY2NlcHRhYmxlID0gdHlwZSA9PT0gXCJmb2xkZXJcIjtcbiAgICAgICAgaWYgKHN0b3JlVHlwZSA9PT0gXCJ0aWxlLWxheWVyXCIpIHtcbiAgICAgICAgICBpc0FjY2VwdGFibGUgfHwgKGlzQWNjZXB0YWJsZSA9ICh0aWxlTGF5ZXJQdWJsaXNoVHlwZSA9PT0gXCJ0aWxlc1wiICYmIHR5cGUgPT09IFwiY2FjaGVEYXRhc2V0XCIpIHx8XG4gICAgICAgICAgICAodGlsZUxheWVyUHVibGlzaFR5cGUgPT09IFwidmVjdG9yVGlsZXNcIiAmJiB0eXBlID09PSBcInZlY3RvckNhY2hlRGF0YXNldFwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc3RvcmVUeXBlID09PSBcInNjZW5lLWxheWVyXCIpIHtcbiAgICAgICAgICBpc0FjY2VwdGFibGUgfHwgKGlzQWNjZXB0YWJsZSA9IHR5cGUgPT09IFwiZXh0cmFjdGVkU2NlbmVQYWNrYWdlXCIgfHwgdHlwZSA9PT0gXCJpM3NSZXN0Q2FjaGVcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlzQWNjZXB0YWJsZTtcbiAgICAgIH0pIH0pO1xuICB9XG4gIHJlbmRlckVycm9ySXRlbSgpIHtcbiAgICBjb25zdCB7IGkxOG4sIGVycm9yLCBsb2FkaW5nIH0gPSB0aGlzO1xuICAgIGxldCBoZWFkaW5nID0gXCJcIjtcbiAgICBsZXQgZGVzY3JpcHRpb24gPSBcIlwiO1xuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc3QgaTE4bkVyciA9IGkxOG4uZXJyb3I7XG4gICAgICBpZiAoZXJyb3IgPT09IFwiZmFpbFRvTGlzdERhdGFTdG9yZUNvbnRlbnRzXCIpIHtcbiAgICAgICAgaGVhZGluZyA9IGkxOG5FcnIubGlzdGluZy5oZWFkaW5nO1xuICAgICAgICBkZXNjcmlwdGlvbiA9IGkxOG5FcnIubGlzdGluZy5kZXNjcmlwdGlvbjtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBoZWFkaW5nID0gaTE4bkVyci5ub0RhdGFzZXRFcnJvckhlYWRpbmc7XG4gICAgICAgIGRlc2NyaXB0aW9uID0gaTE4bkVyci5ub0RhdGFzZXRFcnJvckRlc2NyaXB0aW9uO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gKGgoXCJhcmNnaXMtbmV3LWl0ZW0tYWxlcnRcIiwgeyBoZWFkaW5nOiBoZWFkaW5nLCBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sIGFjdGl2ZTogZXJyb3IgIT09IG51bGwgJiYgIWxvYWRpbmcsIG9uQWxlcnREaXNtaXNzOiAoKSA9PiB7XG4gICAgICAgIHRoaXMuZXJyb3IgPSBudWxsO1xuICAgICAgfSB9KSk7XG4gIH1cbiAgcmVuZGVySGVhZGVySXRlbSh0eXBlKSB7XG4gICAgY29uc3QgeyBpMThuLCBzb3J0Q3JpdGVyaWEgfSA9IHRoaXM7XG4gICAgY29uc3QgeyBjcml0ZXJpYSwgZGlyZWN0aW9uIH0gPSBzb3J0Q3JpdGVyaWE7XG4gICAgcmV0dXJuIChoKFwiZGl2XCIsIHsgb25DbGljazogKCkgPT4gdGhpcy50b2dnbGVTb3J0KHR5cGUpLCBjbGFzczoge1xuICAgICAgICBcImRhdGEtc2V0X19oZWFkZXJcIjogdHJ1ZSxcbiAgICAgICAgXCJkYXRhLXNldF9faGVhZGVyLS1zZWxlY3RlZFwiOiBjcml0ZXJpYSA9PT0gdHlwZSAmJiBkaXJlY3Rpb24gIT0gbnVsbFxuICAgICAgfSB9LCB0eXBlID09PSBcIm5hbWVcIiAmJiAoaChcImNhbGNpdGUtaWNvblwiLCB7IHNjYWxlOiBcInNcIiwgaWNvbjogXCJjaXJjbGVcIiwgY2xhc3M6IFwiaGlkZGVuLWljb24gaGVhZGVyLWljb25cIiB9KSksIHR5cGUgPT09IFwibmFtZVwiID8gaTE4bi5maWxlTmFtZSA6IGkxOG4uZmlsZVR5cGUsIGgoXCJjYWxjaXRlLWljb25cIiwgeyBjbGFzczoge1xuICAgICAgICBcImJsdWUtY2FsY2l0ZS1pY29uIHNvcnQtaWNvblwiOiB0cnVlLFxuICAgICAgICBcImhpZGRlbi1pY29uXCI6IGNyaXRlcmlhICE9PSB0eXBlIHx8ICFkaXJlY3Rpb25cbiAgICAgIH0sIHNjYWxlOiBcInNcIiwgaWNvbjogZGlyZWN0aW9uID09PSBcImFzY1wiID8gXCJjYXJldC11cFwiIDogXCJjYXJldC1kb3duXCIgfSkpKTtcbiAgfVxuICBvbkRhdGFzdG9yZUNvbnRlbnRzQ2hhbmdlKCkge1xuICAgIC8vIFJlc2V0IHNvcnQgb24gbmV3IGRhdGFcbiAgICB0aGlzLnRvZ2dsZVNvcnQobnVsbCk7XG4gIH1cbiAgb25Tb3J0ZWREYXRhU2V0c0NoYW5nZSgpIHtcbiAgICAvLyBSZXNldCBwYWdpbmF0aW9uIG9uIG5ldyBzb3J0ZWQgZGF0YVxuICAgIC8vIDEgYmVjYXVzZSBDQyBwYWdpbmF0aW9uIHN0YXJ0cyBhdCAxXG4gICAgdGhpcy5jYWxjdWxhdGVQYWdpbmF0aW9uKDEpO1xuICB9XG4gIGNhbGN1bGF0ZVBhZ2luYXRpb24oc3RhcnQpIHtcbiAgICBjb25zdCB7IHNvcnRlZERhdGFzZXRzIH0gPSB0aGlzO1xuICAgIGNvbnN0IHRvdGFsSXRlbXMgPSBzb3J0ZWREYXRhc2V0cy5sZW5ndGg7XG4gICAgdGhpcy50b3RhbEl0ZW1zID0gdG90YWxJdGVtcztcbiAgICBjb25zdCBNQVhfSVRFTV9QRVJfUEFHRSA9IDU7XG4gICAgY29uc3QgaXRlbXNQZXJQYWdlID0gTWF0aC5taW4odG90YWxJdGVtcywgTUFYX0lURU1fUEVSX1BBR0UpO1xuICAgIGNvbnN0IHN0YXJ0SW5kZXggPSBzdGFydCAtIDE7XG4gICAgY29uc3QgZW5kSW5kZXggPSBNYXRoLm1pbihzdGFydEluZGV4ICsgaXRlbXNQZXJQYWdlLCB0b3RhbEl0ZW1zKSAtIDE7XG4gICAgdGhpcy5pdGVtc1BlclBhZ2UgPSBpdGVtc1BlclBhZ2U7XG4gICAgdGhpcy5kaXNwbGF5RGF0YXNldHMgPSBzb3J0ZWREYXRhc2V0cy5zbGljZShzdGFydEluZGV4LCBlbmRJbmRleCArIDEpO1xuICAgIHRoaXMucGFnaW5hdGlvbkRhdGEgPSB7IHN0YXJ0SW5kZXgsIGVuZEluZGV4IH07XG4gIH1cbiAgaGFuZGxlTmV4dCgpIHtcbiAgICBjb25zdCBkYXRhc2V0ID0gdGhpcy5zZWxlY3RlZERhdGFzZXQ7XG4gICAgaWYgKCFkYXRhc2V0KSB7XG4gICAgICB0aGlzLmVycm9yID0gXCJub0RhdGFTZXRTZWxlY3RlZFwiO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhZGRJdGVtU3RhdGUuZGF0YXNldCA9IGRhdGFzZXQ7XG4gICAgYWRkSXRlbVN0YXRlLmRhdGFTdG9yZUNhY2hlZElkID0gYWRkSXRlbVN0YXRlLmRhdGFTdG9yZUlkO1xuICAgIGFkZEl0ZW1TdGF0ZS5zZXJ2ZXJJZCA9IHRoaXMuc2VydmVySWQ7XG4gICAgYWRkSXRlbVN0YXRlLmRhdGFzdG9yZUNvbnRlbnRzID0gdGhpcy5kYXRhc3RvcmVDb250ZW50cztcbiAgICBhZGRJdGVtU3RhdGUuZGF0YVN0b3JlQ2FjaGVkRGF0YSA9IHRoaXMuY2FjaGVkRGF0YTtcbiAgICBpdGVtUHJvcGVydGllc1N0YXRlLnRpdGxlID0gZGF0YXNldC5uYW1lLnNwbGl0KFwiLlwiKVswXTtcbiAgICBsZXQgdHlwZTtcbiAgICBzd2l0Y2ggKGRhdGFzZXQudHlwZSkge1xuICAgICAgY2FzZSBcInZlY3RvckNhY2hlRGF0YXNldFwiOlxuICAgICAgICB0eXBlID0gXCJWZWN0b3IgVGlsZSBTZXJ2aWNlXCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImkzc1Jlc3RDYWNoZVwiOlxuICAgICAgY2FzZSBcImV4dHJhY3RlZFNjZW5lUGFja2FnZVwiOlxuICAgICAgICB0eXBlID0gXCJTY2VuZSBTZXJ2aWNlXCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImNhY2hlRGF0YXNldFwiOlxuICAgICAgICB0eXBlID0gXCJNYXAgU2VydmljZVwiO1xuICAgICAgICAvLyBNaWdodCBiZSBhbiBJbWFnZSBTZXJ2aWNlIGJ1dCB3ZSBkb24ndCBrbm93IGZvciBzdXJlXG4gICAgICAgIC8vIFdlIGNhbiBtYWtlIGEgY2VydGFpbiBjYWxsIHRvIHRoZSBiYWNrZW5kIGJ1dCBpdCB3b3VsZCB0YWtlIGEgcmVhbGx5IGxvbmcgdGltZVxuICAgICAgICAvLyBHYXJpbWEgaXMgdHJ5aW5nIHRvIHNvbHZlIHRoaXMgaXNzdWUgd2l0aCB0aGUgYmFja2VuZCB0ZWFtXG4gICAgICAgIC8vIHR5cGUgPSBcIkltYWdlIFNlcnZpY2VcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGFkZEl0ZW1TdGF0ZS50eXBlID0gdHlwZTtcbiAgICB0aGlzLm5ld0l0ZW1VcGRhdGVQYWdlLmVtaXQoXCJzZXJ2ZXJMaXN0XCIpO1xuICB9XG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IGkxOG4sIGxvYWRpbmcsIGRpc3BsYXlEYXRhc2V0cywgb3JpZ2luYWxEYXRhc2V0cywgcGF0aEhpc3RvcmllcywgcGFnaW5hdGlvbkRhdGEsIGRhdGFTdG9yZU5hbWUgfSA9IHRoaXM7XG4gICAgcmV0dXJuIChoKEhvc3QsIG51bGwsIGgoXCJkaXZcIiwgeyBjbGFzczogXCJpbm5lci1jb250YWluZXJcIiB9LCBsb2FkaW5nID8gKGgoXCJjYWxjaXRlLWxvYWRlclwiLCB7IGxhYmVsOiBcImRhdGFzdG9yZS1sb2FkZXJcIiwgdGV4dDogaTE4bi5wcm9jZXNzaW5nIH0pKSA6IChoKEZyYWdtZW50LCBudWxsLCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwiY29udGVudC13cmFwcGVyXCIgfSwgaChcImRpdlwiLCB7IGNsYXNzOiBcImhlYWRlci10ZXh0XCIgfSwgaTE4bi5oZWFkZXIpLCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwiYnJlYWRjcnVtYi1jb250YWluZXJcIiB9LCBwYXRoSGlzdG9yaWVzLm1hcCgocGF0aCwgaW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IGlzTGFzdCA9IGluZGV4ID09PSBwYXRoSGlzdG9yaWVzLmxlbmd0aCAtIDE7XG4gICAgICBjb25zdCBpc0ZpcnN0ID0gaW5kZXggPT09IDA7XG4gICAgICBjb25zdCBvbkNsaWNrUGF0aCA9IGlzRmlyc3QgPyBcIi9cIiA6IHBhdGhIaXN0b3JpZXMuc2xpY2UoMCwgaW5kZXggKyAxKS5qb2luKFwiL1wiKTtcbiAgICAgIHJldHVybiAoaChcImRpdlwiLCB7IGNsYXNzOiBcImJyZWFkY3J1bWJfX2l0ZW1cIiwga2V5OiBgJHtwYXRofV8ke2luZGV4fWAgfSwgaChcInNwYW5cIiwgeyBvbkNsaWNrOiBpc0xhc3QgPyB1bmRlZmluZWQgOiAoKSA9PiB0aGlzLmV4cGxvcmVGb2xkZXIob25DbGlja1BhdGgsIFwiZm9sZGVyXCIpIH0sIGgoXCJzcGFuXCIsIHsgY2xhc3M6IHsgXCJicmVhZGNydW1iLS1pbmFjdGl2ZVwiOiAhaXNMYXN0IH0gfSwgaXNGaXJzdCA/IGRhdGFTdG9yZU5hbWUgOiBwYXRoKSksICFpc0xhc3QgJiYgaChcImNhbGNpdGUtaWNvblwiLCB7IGljb246IFwiY2hldnJvbi1yaWdodFwiLCBzY2FsZTogXCJzXCIgfSkpKTtcbiAgICB9KSksIGgoXCJkaXZcIiwgeyBjbGFzczogXCJwYWdpbmF0aW9uLXRleHRcIiB9LCBkaXNwbGF5RGF0YXNldHMubGVuZ3RoID4gMCAmJlxuICAgICAgaTE4bi5wYWdpbmF0aW9uUmFuZ2VcbiAgICAgICAgLnJlcGxhY2UoXCIke3N0YXJ0fVwiLCBgJHtwYWdpbmF0aW9uRGF0YS5zdGFydEluZGV4ICsgMX1gKVxuICAgICAgICAucmVwbGFjZShcIiR7ZW5kfVwiLCBgJHtwYWdpbmF0aW9uRGF0YS5lbmRJbmRleCArIDF9YClcbiAgICAgICAgLnJlcGxhY2UoXCIke3RvdGFsfVwiLCBgJHtvcmlnaW5hbERhdGFzZXRzLmxlbmd0aH1gKSksIGgoXCJkaXZcIiwgeyBjbGFzczogXCJkYXRhLXNldC1jb250YWluZXJcIiB9LCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwiZGF0YS1zZXRfX2l0ZW1cIiB9LCB0aGlzLnJlbmRlckhlYWRlckl0ZW0oXCJuYW1lXCIpLCB0aGlzLnJlbmRlckhlYWRlckl0ZW0oXCJ0eXBlXCIpKSwgaChcImNhbGNpdGUtcmFkaW8tYnV0dG9uLWdyb3VwXCIsIHsgbmFtZTogXCJmaWxlLWdyb3VwXCIsIG9uQ2FsY2l0ZVJhZGlvQnV0dG9uR3JvdXBDaGFuZ2U6IChldmVudCkgPT4ge1xuICAgICAgICB0aGlzLnNlbGVjdGVkRGF0YXNldCA9IGV2ZW50LnRhcmdldC5zZWxlY3RlZEl0ZW0udmFsdWU7XG4gICAgICB9LCBsYXlvdXQ6IFwidmVydGljYWxcIiB9LCBoKFwidWxcIiwgeyBjbGFzczogXCJpdGVtLWxpc3RcIiB9LCBkaXNwbGF5RGF0YXNldHMubGVuZ3RoID4gMCA/IChkaXNwbGF5RGF0YXNldHMubWFwKChkYXRhU2V0KSA9PiB7XG4gICAgICB2YXIgX2E7XG4gICAgICBjb25zdCB7IG5hbWUsIHBhdGgsIHR5cGUgfSA9IGRhdGFTZXQ7XG4gICAgICBjb25zdCBpc0ZvbGRlciA9IHR5cGUgPT09IFwiZm9sZGVyXCI7XG4gICAgICByZXR1cm4gKGgoXCJsaVwiLCB7IGtleTogYGRhdGFTZXQtLWl0ZW1fXyR7cGF0aH1gLCBjbGFzczogXCJkYXRhLXNldF9faXRlbVwiLCBvbkNsaWNrOiAoKSA9PiB7XG4gICAgICAgICAgaWYgKGlzRm9sZGVyKSB7XG4gICAgICAgICAgICB0aGlzLmV4cGxvcmVGb2xkZXIoZGF0YVNldC5wYXRoLCBcImZvbGRlclwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gfSwgaChcImNhbGNpdGUtbGFiZWxcIiwgeyBsYXlvdXQ6IFwiaW5saW5lXCIsIGNsYXNzOiBcImRlc2NyaXB0aW9uXCIgfSwgaXNGb2xkZXIgPyAoaChcImNhbGNpdGUtaWNvblwiLCB7IGljb246IFwiZm9sZGVyXCIsIHNjYWxlOiBcInNcIiwgY2xhc3M6IFwiYmx1ZS1jYWxjaXRlLWljb25cIiB9KSkgOiAoaChcImNhbGNpdGUtcmFkaW8tYnV0dG9uXCIsIHsgdmFsdWU6IGRhdGFTZXQsIGNoZWNrZWQ6IHBhdGggPT09ICgoX2EgPSB0aGlzLnNlbGVjdGVkRGF0YXNldCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnBhdGgpIH0pKSwgbmFtZSksIGgoXCJwXCIsIHsgY2xhc3M6IFwiaXRlbS0tdGl0bGVcIiB9LCB0eXBlKSkpO1xuICAgIH0pKSA6IChoKFwibGlcIiwgeyBjbGFzczogXCJkYXRhLXNldF9faXRlbVwiIH0sIGgoXCJjYWxjaXRlLWxhYmVsXCIsIHsgbGF5b3V0OiBcImlubGluZVwiIH0sIGgoXCJjYWxjaXRlLWljb25cIiwgeyBpY29uOiBcImV4Y2xhbWF0aW9uLW1hcmstdHJpYW5nbGVcIiwgc2NhbGU6IFwic1wiIH0pLCBpMThuLmVtcHR5Rm9sZGVyKSkpKSkpKSwgdGhpcy5pdGVtc1BlclBhZ2UgPiAwICYmIChoKFwiZGl2XCIsIHsgY2xhc3M6IFwicGFnaW5hdGlvbi13cmFwcGVyXCIgfSwgaChcImNhbGNpdGUtcGFnaW5hdGlvblwiLCB7IHN0YXJ0SXRlbTogcGFnaW5hdGlvbkRhdGEuc3RhcnRJbmRleCArIDEsIHRvdGFsSXRlbXM6IHRoaXMudG90YWxJdGVtcywgcGFnZVNpemU6IHRoaXMuaXRlbXNQZXJQYWdlLCBvbkNhbGNpdGVQYWdpbmF0aW9uQ2hhbmdlOiAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3Qgbm9kZSA9IGV2ZW50LnRhcmdldDtcbiAgICAgICAgdGhpcy5jYWxjdWxhdGVQYWdpbmF0aW9uKG5vZGUuc3RhcnRJdGVtKTtcbiAgICAgIH0gfSkpKSkpKSwgdGhpcy5yZW5kZXJFcnJvckl0ZW0oKSkpO1xuICB9XG4gIGdldCBlbCgpIHsgcmV0dXJuIGdldEVsZW1lbnQodGhpcyk7IH1cbiAgc3RhdGljIGdldCB3YXRjaGVycygpIHsgcmV0dXJuIHtcbiAgICBcIm9yaWdpbmFsRGF0YXNldHNcIjogW1wib25EYXRhc3RvcmVDb250ZW50c0NoYW5nZVwiXSxcbiAgICBcInNvcnRlZERhdGFzZXRzXCI6IFtcIm9uU29ydGVkRGF0YVNldHNDaGFuZ2VcIl1cbiAgfTsgfVxufTtcbkFyY2dpc05ld0l0ZW1QYWdlc0RhdGFTdG9yZUJyb3dzZXIuc3R5bGUgPSBhcmNnaXNOZXdJdGVtUGFnZXNEYXRhU3RvcmVCcm93c2VyQ3NzO1xuXG5leHBvcnQgeyBBcmNnaXNOZXdJdGVtUGFnZXNEYXRhU3RvcmVCcm93c2VyIGFzIGFyY2dpc19uZXdfaXRlbV9wYWdlc19kYXRhX3N0b3JlX2Jyb3dzZXIgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==