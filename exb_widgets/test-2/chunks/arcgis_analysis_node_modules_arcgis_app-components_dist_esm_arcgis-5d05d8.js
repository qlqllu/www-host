"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-5d05d8"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-developer-credentials-select.entry.js":
/*!*****************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-developer-credentials-select.entry.js ***!
  \*****************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   arcgis_new_item_pages_developer_credentials_select: () => (/* binding */ ArcgisNewItemPagesDeveloperCredentialsSelect)
/* harmony export */ });
/* harmony import */ var _index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-92ebb396.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-92ebb396.js");
/* harmony import */ var _portal_79caaeff_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./portal-79caaeff.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/portal-79caaeff.js");
/* harmony import */ var _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./config-eb5f7dc2.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/config-eb5f7dc2.js");
/* harmony import */ var _feature_layer_38cdae87_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./feature-layer-38cdae87.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-38cdae87.js");
/* harmony import */ var _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./add-item-97d577a9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/add-item-97d577a9.js");
/* harmony import */ var _ui_ecf86bba_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ui-ecf86bba.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ui-ecf86bba.js");
/* harmony import */ var _developer_credentials_787bc218_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./developer-credentials-787bc218.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/developer-credentials-787bc218.js");
/* harmony import */ var _privileges_35590eb4_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./privileges-35590eb4.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/privileges-35590eb4.js");
/* harmony import */ var _subscription_09185996_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./subscription-09185996.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/subscription-09185996.js");
/* harmony import */ var _loadModules_aaf30bd6_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./loadModules-aaf30bd6.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/loadModules-aaf30bd6.js");
/* harmony import */ var _privileges_ccd5f37d_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./privileges-ccd5f37d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/privileges-ccd5f37d.js");
/* harmony import */ var _functional_c82f5ab9_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./functional-c82f5ab9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-c82f5ab9.js");
/* harmony import */ var _index_81d548b7_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./index-81d548b7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-81d548b7.js");
/* harmony import */ var _item_properties_e6412a9a_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./item-properties-e6412a9a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-properties-e6412a9a.js");
/* harmony import */ var _feature_layer_d33ea114_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./feature-layer-d33ea114.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-d33ea114.js");
/* harmony import */ var _guid_4f4176ba_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./guid-4f4176ba.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/guid-4f4176ba.js");
/* harmony import */ var _thumbnail_0b7adfcd_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./thumbnail-0b7adfcd.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/thumbnail-0b7adfcd.js");
/* harmony import */ var _query_4f7b7e4d_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./query-4f7b7e4d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/query-4f7b7e4d.js");
/* harmony import */ var _user_e3dedc4a_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./user-e3dedc4a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/user-e3dedc4a.js");
/* harmony import */ var _api_f7934cd7_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./api-f7934cd7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/api-f7934cd7.js");
/* harmony import */ var _server_item_f12153e6_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./server-item-f12153e6.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/server-item-f12153e6.js");
/* harmony import */ var _functional_9f648bee_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./functional-9f648bee.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-9f648bee.js");
/* harmony import */ var _item_types_b4fe86ad_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./item-types-b4fe86ad.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-types-b4fe86ad.js");
/* harmony import */ var _item_d9d70416_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./item-d9d70416.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-d9d70416.js");
/* harmony import */ var _dom_13f5b00c_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./dom-13f5b00c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/dom-13f5b00c.js");
/* harmony import */ var _feature_layer_69305a85_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./feature-layer-69305a85.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-69305a85.js");
/* harmony import */ var _ags_68d4ae20_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./ags-68d4ae20.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ags-68d4ae20.js");
/* harmony import */ var _url_f3b82cc7_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./url-f3b82cc7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/url-f3b82cc7.js");
/* harmony import */ var _storage_d7f5822e_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./storage-d7f5822e.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/storage-d7f5822e.js");
/* harmony import */ var _file_f36193e9_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./file-f36193e9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/file-f36193e9.js");
/* harmony import */ var _store_3210b604_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./store-3210b604.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/store-3210b604.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */
































const arcgisNewItemPagesDeveloperCredentialsSelectCss = ".title-container{display:flex;align-items:center}.onboarding{--arcgis-information-min-width:0}.onboarding__scroll{overflow:auto;max-height:min(700px, 60vh)}.onboarding__section{padding-bottom:1rem;padding-top:0.5rem;padding-left:0.75rem;padding-right:0.75rem;width:286px}.onboarding__title{color:var(--calcite-ui-text-1);font-size:0.875rem;padding-top:0;margin:0;font-weight:600}.onboarding__description{margin-top:0.5rem;margin-bottom:0.75rem;font-size:0.75rem;color:var(--calcite-ui-text-1)}.section{margin-top:2rem}.url-container{padding:1.5rem;margin-top:1rem;margin-bottom:1.5rem;background-color:var(--calcite-ui-background)}.info-card{display:flex;align-items:center;list-style-type:none}.url-input{width:100%;margin-top:0.5rem;-webkit-margin-end:1rem;margin-inline-end:1rem}.add-url{margin-top:1rem;width:-moz-fit-content;width:fit-content}.header{font-weight:500;font-size:1rem;color:var(--calcite-ui-text-1);margin-top:0;margin-bottom:0;padding:0}";

const ArcgisNewItemPagesDeveloperCredentialsSelect = class {
  constructor(hostRef) {
    (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.newItemUpdatePage = (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "newItemUpdatePage", 7);
    this.workflowComplete = (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "workflowComplete", 7);
    this.canCreateAPIKey = false;
    this.canShowLearnMore = true;
    this.isRegisterTerminalPage = () => {
      // API Key can't re-register
      return _ui_ecf86bba_js__WEBPACK_IMPORTED_MODULE_5__.u.workflow === "register" && this.selectedCredentialType === "oauth";
    };
    this.setAlertMessage = (type) => {
      this.alertInfo = this.i18n.error[type];
    };
    // R3 TODO: Add proper strings to DeveloperCredentialsSelectError, then remove this
    this.setUnsupportedUrlAlertMessage = () => {
      const error = this.i18nBase.featureLayerFromUrl.error;
      this.alertInfo = {
        title: error.invalidFeatureLayerUrl.title,
        description: this.i18n.error.registerError.description
      };
    };
    this.alertInfo = undefined;
    this.selectedCredentialType = "oauth";
    this.selectedApplicationEnvironment = "multiple";
    this.redirectUrls = [];
    this.referrerUrls = [];
    this.url = "";
    this.isLoading = false;
  }
  componentWillLoad() {
    var _a, _b;
    if (this.isRegisterTerminalPage()) {
      _ui_ecf86bba_js__WEBPACK_IMPORTED_MODULE_5__.u.nextText = "register";
    }
    this.i18n = _ui_ecf86bba_js__WEBPACK_IMPORTED_MODULE_5__.u.i18n.developerCredentialsSelect;
    this.i18nBase = _ui_ecf86bba_js__WEBPACK_IMPORTED_MODULE_5__.u.i18n;
    this.selectedCredentialType = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.developerCredentialsType || "apiKey";
    if (!this.canCreateAPIKey) {
      this.selectedCredentialType = "oauth";
    }
    const existingItem = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.existingItem;
    if (existingItem) {
      if (existingItem.type === "API Key") {
        this.selectedCredentialType = "apiKey";
      }
      else if (existingItem.type === "Application") {
        this.selectedCredentialType = "oauth";
      }
    }
    this.selectedApplicationEnvironment = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.applicationEnvironment || "multiple";
    // Use existing item if it's from registration process
    this.url = (_a = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.url) !== null && _a !== void 0 ? _a : (_b = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.existingItem) === null || _b === void 0 ? void 0 : _b.url;
    const redirectUrls = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.developerCredentialsRedirectUrls;
    this.redirectUrls = (redirectUrls === null || redirectUrls === void 0 ? void 0 : redirectUrls.length) > 0 ? redirectUrls : [""];
    const referrerUrls = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.apiKeyReferrerUrls;
    this.referrerUrls = (referrerUrls === null || referrerUrls === void 0 ? void 0 : referrerUrls.length) > 0 ? referrerUrls : [""];
    const { portal, config: { helpBase } } = _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_2__.c;
    this.canShowLearnMore = !portal.isPortal || helpBase.includes("https://enterprise.arcgis.com/");
  }
  async componentDidLoad() {
    if (!_config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_2__.c.subscriptionInfo) {
      // This can be the first page on the workflow
      this.isLoading = true;
      const { result: subscriptionInfo } = await (0,_portal_79caaeff_js__WEBPACK_IMPORTED_MODULE_1__.f)(() => (0,_subscription_09185996_js__WEBPACK_IMPORTED_MODULE_8__.g)(_config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_2__.c.portal), "subscriptionType", _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_2__.c.user.id);
      _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_2__.c.subscriptionInfo = subscriptionInfo;
      this.isLoading = false;
    }
    this.canCreateAPIKey = (0,_privileges_35590eb4_js__WEBPACK_IMPORTED_MODULE_7__.p)();
  }
  async handleNext() {
    const { selectedCredentialType, selectedApplicationEnvironment, isRegisterTerminalPage, redirectUrls, redirectManagmentRef, referrerUrls, referrerManagmentRef, urlRef, setAlertMessage, url } = this;
    const validateUrlError = await urlRef.validateInput();
    if (validateUrlError) {
      urlRef.focusMainInput();
      return;
    }
    const nonEmptyRedirectUrls = redirectUrls.filter((url) => url);
    if (nonEmptyRedirectUrls.length <= 0) {
      setAlertMessage("redirectEmpty");
      redirectManagmentRef.focusInputByIndex(0);
      return;
    }
    const nonEmptyReferrerUrls = referrerUrls.filter((url) => url);
    if (selectedCredentialType === "apiKey" && nonEmptyReferrerUrls.length <= 0) {
      setAlertMessage("referrerEmpty");
      referrerManagmentRef.focusInputByIndex(0);
      return;
    }
    const valid = await this.redirectManagmentRef.validateAllInputs({ focusWhenInvalid: true });
    if (!valid) {
      this.setUnsupportedUrlAlertMessage();
      return;
    }
    const isCreatingApiKey = selectedCredentialType === "apiKey";
    if (isRegisterTerminalPage()) {
      this.isLoading = true;
      // TODO: handle error
      // API Key will go through service scope selection first
      // However, since users can't re-register API Key
      //  that page will not also have this part
      const { result } = await (0,_feature_layer_38cdae87_js__WEBPACK_IMPORTED_MODULE_3__.y)(_add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.id, (0,_portal_79caaeff_js__WEBPACK_IMPORTED_MODULE_1__.g)(_config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_2__.c.portal), { appType: selectedApplicationEnvironment, redirect_uris: nonEmptyRedirectUrls, url });
      this.isLoading = false;
      if (result) {
        this.workflowComplete.emit({
          id: _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.id,
          redirectUrls: nonEmptyRedirectUrls,
          httpReferrers: nonEmptyReferrerUrls,
          clientId: result.client_id,
          clientSecret: result.client_secret,
          appType: result.appType
        });
      }
      else {
        this.setUnsupportedUrlAlertMessage();
      }
      return;
    }
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.developerCredentialsType = selectedCredentialType;
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.applicationEnvironment = isCreatingApiKey
      ? undefined
      : selectedApplicationEnvironment;
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.apiKeyReferrerUrls = isCreatingApiKey ? nonEmptyReferrerUrls : undefined;
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.developerCredentialsRedirectUrls = nonEmptyRedirectUrls;
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.type = isCreatingApiKey ? "API Key" : "Application";
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.url = isCreatingApiKey ? undefined : url;
    this.newItemUpdatePage.emit(isCreatingApiKey ? "serviceScope" : "itemProperties");
  }
  render() {
    const { i18n, selectedCredentialType, selectedApplicationEnvironment, redirectUrls, alertInfo, isLoading, referrerUrls, url, canCreateAPIKey, canShowLearnMore } = this;
    return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.H, { class: { "overflow-hidden": isLoading } }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-loader", { active: isLoading, text: i18n.registering }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", null, canCreateAPIKey ? ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.F, null, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "title-container" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-description", { header: i18n.title }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-information", { label: i18n.onboard.title, placement: "bottom-start", heading: i18n.onboard.title, headingLevel: 3, class: "onboarding", overlayPositioning: "fixed", paddedContent: false }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "onboarding__scroll" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("img", { class: "illustration", src: (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.a)(`./assets/cred-type.png`) }), _developer_credentials_787bc218_js__WEBPACK_IMPORTED_MODULE_6__.d.map((option) => {
      const { description, title } = i18n.onboard[option];
      return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "onboarding__section" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("h4", { class: "onboarding__title" }, title), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("p", { class: "onboarding__description" }, description)));
    })))), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-tile-select-group", { layout: "vertical", class: "tile-select" }, _developer_credentials_787bc218_js__WEBPACK_IMPORTED_MODULE_6__.d.map((option) => ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-tile-select", {
      // TODO: rework the condition once Steven publish his dubstep diagram
      disabled: !!_add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.existingItem, checked: selectedCredentialType === option, heading: i18n.options[option].title, description: i18n.options[option].description, name: "dev-cred-create-mode", "input-enabled": true, width: "full", type: "radio", value: option, onCalciteTileSelectChange: (e) => (this.selectedCredentialType = e.target.value)
    })))))) : ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("p", { innerHTML: canShowLearnMore
        ? i18n.oauth2Hint
          .replace("${apiLinkStart}", `<a href="https://developers.arcgis.com/documentation/mapping-apis-and-services/security/oauth-2.0/" target="_blank">`)
          .replace("${endLink}", "</a>")
        : i18n.oauth2HintNoLink }))), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "section" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-data-array-management", { header: i18n.redirectUrlsTitle, description: i18n.redirectUrlsDescription, addNewText: _ui_ecf86bba_js__WEBPACK_IMPORTED_MODULE_5__.u.i18n.common.add, placeholder: "https://<server>[:port]", initialData: redirectUrls, required: true, validateData: (data) => {
        // Only printable ASCII characters are valid
        const invalidCharacters = new RegExp(/[^ -~]/);
        const containsInvalidCharacters = invalidCharacters.test(data.content);
        return data.content.length > 0 && !containsInvalidCharacters;
      }, onDataChanged: ({ detail: { allData } }) => {
        this.redirectUrls = allData.map((data) => data.content);
      }, ref: (ele) => (this.redirectManagmentRef = ele) })), selectedCredentialType === "apiKey" && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "section" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-data-array-management", { header: i18n.refererrUrlsTitle, description: i18n.refererrUrlsDescription, addNewText: _ui_ecf86bba_js__WEBPACK_IMPORTED_MODULE_5__.u.i18n.common.add, placeholder: "http://*.your-app.com", initialData: referrerUrls, required: true, validateData: (data) => data.content.length > 0, onDataChanged: ({ detail: { allData } }) => {
        this.referrerUrls = allData.map((data) => data.content);
      }, ref: (ele) => (this.referrerManagmentRef = ele) }))), selectedCredentialType === "oauth" && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.F, null, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "section" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-application-environment", { defaultEnvironment: selectedApplicationEnvironment, onArcgisApplicationEnvironmentChange: (e) => {
        this.selectedApplicationEnvironment = e.detail;
      } })), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "section" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-url", { onNewItemUrlChange: (event) => (this.url = event.detail.url), url: url, ref: (ele) => (this.urlRef = ele), required: false, headerScale: "m" })))), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-alert", { heading: alertInfo === null || alertInfo === void 0 ? void 0 : alertInfo.title, description: alertInfo === null || alertInfo === void 0 ? void 0 : alertInfo.description, active: !!alertInfo, onAlertDismiss: () => (this.alertInfo = null) })));
  }
  static get assetsDirs() { return ["assets"]; }
};
ArcgisNewItemPagesDeveloperCredentialsSelect.style = arcgisNewItemPagesDeveloperCredentialsSelectCss;




/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/developer-credentials-787bc218.js":
/*!***************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/developer-credentials-787bc218.js ***!
  \***************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ serviceScopes),
/* harmony export */   b: () => (/* binding */ developerDefaultServiceScopes),
/* harmony export */   d: () => (/* binding */ developerCredentialsTypes),
/* harmony export */   o: () => (/* binding */ onlineDefaultServiceScopes),
/* harmony export */   r: () => (/* binding */ requiredServiceScopes),
/* harmony export */   s: () => (/* binding */ serviceScopeToPrivilege)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */
const developerCredentialsTypes = ["apiKey", "oauth"];
const serviceScopes = [
  "basemap",
  "geocodingNotStored",
  "routing",
  "serviceArea",
  "geocodingStored",
  "optimizedRouting",
  "closestFacility",
  "locationAllocation",
  "multiVehicleRouting",
  "costMatrix",
  "geoEnrichment"
];
const requiredServiceScopes = ["basemap"];
const onlineDefaultServiceScopes = ["geocodingNotStored"];
const developerDefaultServiceScopes = ["geocodingNotStored", "routing", "serviceArea"];
const serviceScopeToPrivilege = {
  basemap: "portal:apikey:basemaps",
  geocodingNotStored: "premium:user:geocode:temporary",
  routing: "premium:user:networkanalysis:routing",
  serviceArea: "premium:user:networkanalysis:servicearea",
  geocodingStored: "premium:user:geocode:stored",
  optimizedRouting: "premium:user:networkanalysis:optimizedrouting",
  closestFacility: "premium:user:networkanalysis:closestfacility",
  locationAllocation: "premium:user:networkanalysis:locationallocation",
  multiVehicleRouting: "premium:user:networkanalysis:vehiclerouting",
  costMatrix: "premium:user:networkanalysis:origindestinationcostmatrix",
  geoEnrichment: "premium:user:geoenrichment"
};




/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/subscription-09185996.js":
/*!******************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/subscription-09185996.js ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   g: () => (/* binding */ getSubscriptionInfo)
/* harmony export */ });
/* harmony import */ var _portal_79caaeff_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./portal-79caaeff.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/portal-79caaeff.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */


const getSubscriptionInfo = async (portal) => {
  try {
    const subscriptionInfo = await (0,_portal_79caaeff_js__WEBPACK_IMPORTED_MODULE_0__.r)(`${(0,_portal_79caaeff_js__WEBPACK_IMPORTED_MODULE_0__.g)(portal)}portals/self/subscriptionInfo`);
    return { result: subscriptionInfo };
  }
  catch (error) {
    console.error(error);
    return { error: { code: "unhandledError" } };
  }
};




/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXBwLWNvbXBvbmVudHNfZGlzdF9lc21fYXJjZ2lzLTVkMDVkOC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQzhIO0FBQ25EO0FBQ25CO0FBQ2U7QUFDWjtBQUNOO0FBQ2dDO0FBQ3hCO0FBQ1M7QUFDbkM7QUFDRDtBQUNBO0FBQ0w7QUFDVTtBQUNGO0FBQ1Q7QUFDSztBQUNKO0FBQ0Q7QUFDRDtBQUNRO0FBQ0Q7QUFDQTtBQUNOO0FBQ0Q7QUFDVTtBQUNWO0FBQ0E7QUFDSTtBQUNIO0FBQ0M7O0FBRTdCLDBFQUEwRSxhQUFhLG1CQUFtQixZQUFZLGlDQUFpQyxvQkFBb0IsY0FBYyw0QkFBNEIscUJBQXFCLG9CQUFvQixtQkFBbUIscUJBQXFCLHNCQUFzQixZQUFZLG1CQUFtQiwrQkFBK0IsbUJBQW1CLGNBQWMsU0FBUyxnQkFBZ0IseUJBQXlCLGtCQUFrQixzQkFBc0Isa0JBQWtCLCtCQUErQixTQUFTLGdCQUFnQixlQUFlLGVBQWUsZ0JBQWdCLHFCQUFxQiw4Q0FBOEMsV0FBVyxhQUFhLG1CQUFtQixxQkFBcUIsV0FBVyxXQUFXLGtCQUFrQix3QkFBd0IsdUJBQXVCLFNBQVMsZ0JBQWdCLHVCQUF1QixrQkFBa0IsUUFBUSxnQkFBZ0IsZUFBZSwrQkFBK0IsYUFBYSxnQkFBZ0IsVUFBVTs7QUFFdC9CO0FBQ0E7QUFDQSxJQUFJLHFEQUFnQjtBQUNwQiw2QkFBNkIscURBQVc7QUFDeEMsNEJBQTRCLHFEQUFXO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSw4Q0FBWTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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QUEwQiw4SUFBOEksTUFBTSxxREFBQyw0QkFBNEIsOE9BQThPO0FBQ3RlO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7O0FBRThHOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ25NOUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRTZMOzs7Ozs7Ozs7Ozs7Ozs7O0FDbkM3TDtBQUNBO0FBQ0E7QUFDQTtBQUN5RTs7QUFFekU7QUFDQTtBQUNBLG1DQUFtQyxzREFBTyxJQUFJLHNEQUFjLFNBQVM7QUFDckUsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGFBQWEsU0FBUztBQUN0QjtBQUNBOztBQUVvQyIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FwcC1jb21wb25lbnRzL2Rpc3QvZXNtL2FyY2dpcy1uZXctaXRlbS1wYWdlcy1kZXZlbG9wZXItY3JlZGVudGlhbHMtc2VsZWN0LmVudHJ5LmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FwcC1jb21wb25lbnRzL2Rpc3QvZXNtL2RldmVsb3Blci1jcmVkZW50aWFscy03ODdiYzIxOC5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcHAtY29tcG9uZW50cy9kaXN0L2VzbS9zdWJzY3JpcHRpb24tMDkxODU5OTYuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogdjMuMC45OVxuICovXG5pbXBvcnQgeyByIGFzIHJlZ2lzdGVySW5zdGFuY2UsIGMgYXMgY3JlYXRlRXZlbnQsIGgsIEYgYXMgRnJhZ21lbnQsIGEgYXMgZ2V0QXNzZXRQYXRoLCBIIGFzIEhvc3QgfSBmcm9tICcuL2luZGV4LTkyZWJiMzk2LmpzJztcbmltcG9ydCB7IGYgYXMgZnJvbUNhY2hlLCBnIGFzIGdldFJlc3RCYXNlVXJsIH0gZnJvbSAnLi9wb3J0YWwtNzljYWFlZmYuanMnO1xuaW1wb3J0IHsgYyBhcyBjb25maWdTdGF0ZSB9IGZyb20gJy4vY29uZmlnLWViNWY3ZGMyLmpzJztcbmltcG9ydCB7IHkgYXMgcmVnaXN0ZXJBcHBsaWNhdGlvbiB9IGZyb20gJy4vZmVhdHVyZS1sYXllci0zOGNkYWU4Ny5qcyc7XG5pbXBvcnQgeyBhIGFzIGFkZEl0ZW1TdGF0ZSB9IGZyb20gJy4vYWRkLWl0ZW0tOTdkNTc3YTkuanMnO1xuaW1wb3J0IHsgdSBhcyB1aVN0b3JlU3RhdGUgfSBmcm9tICcuL3VpLWVjZjg2YmJhLmpzJztcbmltcG9ydCB7IGQgYXMgZGV2ZWxvcGVyQ3JlZGVudGlhbHNUeXBlcyB9IGZyb20gJy4vZGV2ZWxvcGVyLWNyZWRlbnRpYWxzLTc4N2JjMjE4LmpzJztcbmltcG9ydCB7IHAgYXMgY2FuQWRkQVBJS2V5IH0gZnJvbSAnLi9wcml2aWxlZ2VzLTM1NTkwZWI0LmpzJztcbmltcG9ydCB7IGcgYXMgZ2V0U3Vic2NyaXB0aW9uSW5mbyB9IGZyb20gJy4vc3Vic2NyaXB0aW9uLTA5MTg1OTk2LmpzJztcbmltcG9ydCAnLi9sb2FkTW9kdWxlcy1hYWYzMGJkNi5qcyc7XG5pbXBvcnQgJy4vcHJpdmlsZWdlcy1jY2Q1ZjM3ZC5qcyc7XG5pbXBvcnQgJy4vZnVuY3Rpb25hbC1jODJmNWFiOS5qcyc7XG5pbXBvcnQgJy4vaW5kZXgtODFkNTQ4YjcuanMnO1xuaW1wb3J0ICcuL2l0ZW0tcHJvcGVydGllcy1lNjQxMmE5YS5qcyc7XG5pbXBvcnQgJy4vZmVhdHVyZS1sYXllci1kMzNlYTExNC5qcyc7XG5pbXBvcnQgJy4vZ3VpZC00ZjQxNzZiYS5qcyc7XG5pbXBvcnQgJy4vdGh1bWJuYWlsLTBiN2FkZmNkLmpzJztcbmltcG9ydCAnLi9xdWVyeS00ZjdiN2U0ZC5qcyc7XG5pbXBvcnQgJy4vdXNlci1lM2RlZGM0YS5qcyc7XG5pbXBvcnQgJy4vYXBpLWY3OTM0Y2Q3LmpzJztcbmltcG9ydCAnLi9zZXJ2ZXItaXRlbS1mMTIxNTNlNi5qcyc7XG5pbXBvcnQgJy4vZnVuY3Rpb25hbC05ZjY0OGJlZS5qcyc7XG5pbXBvcnQgJy4vaXRlbS10eXBlcy1iNGZlODZhZC5qcyc7XG5pbXBvcnQgJy4vaXRlbS1kOWQ3MDQxNi5qcyc7XG5pbXBvcnQgJy4vZG9tLTEzZjViMDBjLmpzJztcbmltcG9ydCAnLi9mZWF0dXJlLWxheWVyLTY5MzA1YTg1LmpzJztcbmltcG9ydCAnLi9hZ3MtNjhkNGFlMjAuanMnO1xuaW1wb3J0ICcuL3VybC1mM2I4MmNjNy5qcyc7XG5pbXBvcnQgJy4vc3RvcmFnZS1kN2Y1ODIyZS5qcyc7XG5pbXBvcnQgJy4vZmlsZS1mMzYxOTNlOS5qcyc7XG5pbXBvcnQgJy4vc3RvcmUtMzIxMGI2MDQuanMnO1xuXG5jb25zdCBhcmNnaXNOZXdJdGVtUGFnZXNEZXZlbG9wZXJDcmVkZW50aWFsc1NlbGVjdENzcyA9IFwiLnRpdGxlLWNvbnRhaW5lcntkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyfS5vbmJvYXJkaW5ney0tYXJjZ2lzLWluZm9ybWF0aW9uLW1pbi13aWR0aDowfS5vbmJvYXJkaW5nX19zY3JvbGx7b3ZlcmZsb3c6YXV0bzttYXgtaGVpZ2h0Om1pbig3MDBweCwgNjB2aCl9Lm9uYm9hcmRpbmdfX3NlY3Rpb257cGFkZGluZy1ib3R0b206MXJlbTtwYWRkaW5nLXRvcDowLjVyZW07cGFkZGluZy1sZWZ0OjAuNzVyZW07cGFkZGluZy1yaWdodDowLjc1cmVtO3dpZHRoOjI4NnB4fS5vbmJvYXJkaW5nX190aXRsZXtjb2xvcjp2YXIoLS1jYWxjaXRlLXVpLXRleHQtMSk7Zm9udC1zaXplOjAuODc1cmVtO3BhZGRpbmctdG9wOjA7bWFyZ2luOjA7Zm9udC13ZWlnaHQ6NjAwfS5vbmJvYXJkaW5nX19kZXNjcmlwdGlvbnttYXJnaW4tdG9wOjAuNXJlbTttYXJnaW4tYm90dG9tOjAuNzVyZW07Zm9udC1zaXplOjAuNzVyZW07Y29sb3I6dmFyKC0tY2FsY2l0ZS11aS10ZXh0LTEpfS5zZWN0aW9ue21hcmdpbi10b3A6MnJlbX0udXJsLWNvbnRhaW5lcntwYWRkaW5nOjEuNXJlbTttYXJnaW4tdG9wOjFyZW07bWFyZ2luLWJvdHRvbToxLjVyZW07YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWJhY2tncm91bmQpfS5pbmZvLWNhcmR7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtsaXN0LXN0eWxlLXR5cGU6bm9uZX0udXJsLWlucHV0e3dpZHRoOjEwMCU7bWFyZ2luLXRvcDowLjVyZW07LXdlYmtpdC1tYXJnaW4tZW5kOjFyZW07bWFyZ2luLWlubGluZS1lbmQ6MXJlbX0uYWRkLXVybHttYXJnaW4tdG9wOjFyZW07d2lkdGg6LW1vei1maXQtY29udGVudDt3aWR0aDpmaXQtY29udGVudH0uaGVhZGVye2ZvbnQtd2VpZ2h0OjUwMDtmb250LXNpemU6MXJlbTtjb2xvcjp2YXIoLS1jYWxjaXRlLXVpLXRleHQtMSk7bWFyZ2luLXRvcDowO21hcmdpbi1ib3R0b206MDtwYWRkaW5nOjB9XCI7XG5cbmNvbnN0IEFyY2dpc05ld0l0ZW1QYWdlc0RldmVsb3BlckNyZWRlbnRpYWxzU2VsZWN0ID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XG4gICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICB0aGlzLm5ld0l0ZW1VcGRhdGVQYWdlID0gY3JlYXRlRXZlbnQodGhpcywgXCJuZXdJdGVtVXBkYXRlUGFnZVwiLCA3KTtcbiAgICB0aGlzLndvcmtmbG93Q29tcGxldGUgPSBjcmVhdGVFdmVudCh0aGlzLCBcIndvcmtmbG93Q29tcGxldGVcIiwgNyk7XG4gICAgdGhpcy5jYW5DcmVhdGVBUElLZXkgPSBmYWxzZTtcbiAgICB0aGlzLmNhblNob3dMZWFybk1vcmUgPSB0cnVlO1xuICAgIHRoaXMuaXNSZWdpc3RlclRlcm1pbmFsUGFnZSA9ICgpID0+IHtcbiAgICAgIC8vIEFQSSBLZXkgY2FuJ3QgcmUtcmVnaXN0ZXJcbiAgICAgIHJldHVybiB1aVN0b3JlU3RhdGUud29ya2Zsb3cgPT09IFwicmVnaXN0ZXJcIiAmJiB0aGlzLnNlbGVjdGVkQ3JlZGVudGlhbFR5cGUgPT09IFwib2F1dGhcIjtcbiAgICB9O1xuICAgIHRoaXMuc2V0QWxlcnRNZXNzYWdlID0gKHR5cGUpID0+IHtcbiAgICAgIHRoaXMuYWxlcnRJbmZvID0gdGhpcy5pMThuLmVycm9yW3R5cGVdO1xuICAgIH07XG4gICAgLy8gUjMgVE9ETzogQWRkIHByb3BlciBzdHJpbmdzIHRvIERldmVsb3BlckNyZWRlbnRpYWxzU2VsZWN0RXJyb3IsIHRoZW4gcmVtb3ZlIHRoaXNcbiAgICB0aGlzLnNldFVuc3VwcG9ydGVkVXJsQWxlcnRNZXNzYWdlID0gKCkgPT4ge1xuICAgICAgY29uc3QgZXJyb3IgPSB0aGlzLmkxOG5CYXNlLmZlYXR1cmVMYXllckZyb21VcmwuZXJyb3I7XG4gICAgICB0aGlzLmFsZXJ0SW5mbyA9IHtcbiAgICAgICAgdGl0bGU6IGVycm9yLmludmFsaWRGZWF0dXJlTGF5ZXJVcmwudGl0bGUsXG4gICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmkxOG4uZXJyb3IucmVnaXN0ZXJFcnJvci5kZXNjcmlwdGlvblxuICAgICAgfTtcbiAgICB9O1xuICAgIHRoaXMuYWxlcnRJbmZvID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuc2VsZWN0ZWRDcmVkZW50aWFsVHlwZSA9IFwib2F1dGhcIjtcbiAgICB0aGlzLnNlbGVjdGVkQXBwbGljYXRpb25FbnZpcm9ubWVudCA9IFwibXVsdGlwbGVcIjtcbiAgICB0aGlzLnJlZGlyZWN0VXJscyA9IFtdO1xuICAgIHRoaXMucmVmZXJyZXJVcmxzID0gW107XG4gICAgdGhpcy51cmwgPSBcIlwiO1xuICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7XG4gIH1cbiAgY29tcG9uZW50V2lsbExvYWQoKSB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICBpZiAodGhpcy5pc1JlZ2lzdGVyVGVybWluYWxQYWdlKCkpIHtcbiAgICAgIHVpU3RvcmVTdGF0ZS5uZXh0VGV4dCA9IFwicmVnaXN0ZXJcIjtcbiAgICB9XG4gICAgdGhpcy5pMThuID0gdWlTdG9yZVN0YXRlLmkxOG4uZGV2ZWxvcGVyQ3JlZGVudGlhbHNTZWxlY3Q7XG4gICAgdGhpcy5pMThuQmFzZSA9IHVpU3RvcmVTdGF0ZS5pMThuO1xuICAgIHRoaXMuc2VsZWN0ZWRDcmVkZW50aWFsVHlwZSA9IGFkZEl0ZW1TdGF0ZS5kZXZlbG9wZXJDcmVkZW50aWFsc1R5cGUgfHwgXCJhcGlLZXlcIjtcbiAgICBpZiAoIXRoaXMuY2FuQ3JlYXRlQVBJS2V5KSB7XG4gICAgICB0aGlzLnNlbGVjdGVkQ3JlZGVudGlhbFR5cGUgPSBcIm9hdXRoXCI7XG4gICAgfVxuICAgIGNvbnN0IGV4aXN0aW5nSXRlbSA9IGFkZEl0ZW1TdGF0ZS5leGlzdGluZ0l0ZW07XG4gICAgaWYgKGV4aXN0aW5nSXRlbSkge1xuICAgICAgaWYgKGV4aXN0aW5nSXRlbS50eXBlID09PSBcIkFQSSBLZXlcIikge1xuICAgICAgICB0aGlzLnNlbGVjdGVkQ3JlZGVudGlhbFR5cGUgPSBcImFwaUtleVwiO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoZXhpc3RpbmdJdGVtLnR5cGUgPT09IFwiQXBwbGljYXRpb25cIikge1xuICAgICAgICB0aGlzLnNlbGVjdGVkQ3JlZGVudGlhbFR5cGUgPSBcIm9hdXRoXCI7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuc2VsZWN0ZWRBcHBsaWNhdGlvbkVudmlyb25tZW50ID0gYWRkSXRlbVN0YXRlLmFwcGxpY2F0aW9uRW52aXJvbm1lbnQgfHwgXCJtdWx0aXBsZVwiO1xuICAgIC8vIFVzZSBleGlzdGluZyBpdGVtIGlmIGl0J3MgZnJvbSByZWdpc3RyYXRpb24gcHJvY2Vzc1xuICAgIHRoaXMudXJsID0gKF9hID0gYWRkSXRlbVN0YXRlLnVybCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogKF9iID0gYWRkSXRlbVN0YXRlLmV4aXN0aW5nSXRlbSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnVybDtcbiAgICBjb25zdCByZWRpcmVjdFVybHMgPSBhZGRJdGVtU3RhdGUuZGV2ZWxvcGVyQ3JlZGVudGlhbHNSZWRpcmVjdFVybHM7XG4gICAgdGhpcy5yZWRpcmVjdFVybHMgPSAocmVkaXJlY3RVcmxzID09PSBudWxsIHx8IHJlZGlyZWN0VXJscyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVkaXJlY3RVcmxzLmxlbmd0aCkgPiAwID8gcmVkaXJlY3RVcmxzIDogW1wiXCJdO1xuICAgIGNvbnN0IHJlZmVycmVyVXJscyA9IGFkZEl0ZW1TdGF0ZS5hcGlLZXlSZWZlcnJlclVybHM7XG4gICAgdGhpcy5yZWZlcnJlclVybHMgPSAocmVmZXJyZXJVcmxzID09PSBudWxsIHx8IHJlZmVycmVyVXJscyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVmZXJyZXJVcmxzLmxlbmd0aCkgPiAwID8gcmVmZXJyZXJVcmxzIDogW1wiXCJdO1xuICAgIGNvbnN0IHsgcG9ydGFsLCBjb25maWc6IHsgaGVscEJhc2UgfSB9ID0gY29uZmlnU3RhdGU7XG4gICAgdGhpcy5jYW5TaG93TGVhcm5Nb3JlID0gIXBvcnRhbC5pc1BvcnRhbCB8fCBoZWxwQmFzZS5pbmNsdWRlcyhcImh0dHBzOi8vZW50ZXJwcmlzZS5hcmNnaXMuY29tL1wiKTtcbiAgfVxuICBhc3luYyBjb21wb25lbnREaWRMb2FkKCkge1xuICAgIGlmICghY29uZmlnU3RhdGUuc3Vic2NyaXB0aW9uSW5mbykge1xuICAgICAgLy8gVGhpcyBjYW4gYmUgdGhlIGZpcnN0IHBhZ2Ugb24gdGhlIHdvcmtmbG93XG4gICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7XG4gICAgICBjb25zdCB7IHJlc3VsdDogc3Vic2NyaXB0aW9uSW5mbyB9ID0gYXdhaXQgZnJvbUNhY2hlKCgpID0+IGdldFN1YnNjcmlwdGlvbkluZm8oY29uZmlnU3RhdGUucG9ydGFsKSwgXCJzdWJzY3JpcHRpb25UeXBlXCIsIGNvbmZpZ1N0YXRlLnVzZXIuaWQpO1xuICAgICAgY29uZmlnU3RhdGUuc3Vic2NyaXB0aW9uSW5mbyA9IHN1YnNjcmlwdGlvbkluZm87XG4gICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgIH1cbiAgICB0aGlzLmNhbkNyZWF0ZUFQSUtleSA9IGNhbkFkZEFQSUtleSgpO1xuICB9XG4gIGFzeW5jIGhhbmRsZU5leHQoKSB7XG4gICAgY29uc3QgeyBzZWxlY3RlZENyZWRlbnRpYWxUeXBlLCBzZWxlY3RlZEFwcGxpY2F0aW9uRW52aXJvbm1lbnQsIGlzUmVnaXN0ZXJUZXJtaW5hbFBhZ2UsIHJlZGlyZWN0VXJscywgcmVkaXJlY3RNYW5hZ21lbnRSZWYsIHJlZmVycmVyVXJscywgcmVmZXJyZXJNYW5hZ21lbnRSZWYsIHVybFJlZiwgc2V0QWxlcnRNZXNzYWdlLCB1cmwgfSA9IHRoaXM7XG4gICAgY29uc3QgdmFsaWRhdGVVcmxFcnJvciA9IGF3YWl0IHVybFJlZi52YWxpZGF0ZUlucHV0KCk7XG4gICAgaWYgKHZhbGlkYXRlVXJsRXJyb3IpIHtcbiAgICAgIHVybFJlZi5mb2N1c01haW5JbnB1dCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBub25FbXB0eVJlZGlyZWN0VXJscyA9IHJlZGlyZWN0VXJscy5maWx0ZXIoKHVybCkgPT4gdXJsKTtcbiAgICBpZiAobm9uRW1wdHlSZWRpcmVjdFVybHMubGVuZ3RoIDw9IDApIHtcbiAgICAgIHNldEFsZXJ0TWVzc2FnZShcInJlZGlyZWN0RW1wdHlcIik7XG4gICAgICByZWRpcmVjdE1hbmFnbWVudFJlZi5mb2N1c0lucHV0QnlJbmRleCgwKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgbm9uRW1wdHlSZWZlcnJlclVybHMgPSByZWZlcnJlclVybHMuZmlsdGVyKCh1cmwpID0+IHVybCk7XG4gICAgaWYgKHNlbGVjdGVkQ3JlZGVudGlhbFR5cGUgPT09IFwiYXBpS2V5XCIgJiYgbm9uRW1wdHlSZWZlcnJlclVybHMubGVuZ3RoIDw9IDApIHtcbiAgICAgIHNldEFsZXJ0TWVzc2FnZShcInJlZmVycmVyRW1wdHlcIik7XG4gICAgICByZWZlcnJlck1hbmFnbWVudFJlZi5mb2N1c0lucHV0QnlJbmRleCgwKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdmFsaWQgPSBhd2FpdCB0aGlzLnJlZGlyZWN0TWFuYWdtZW50UmVmLnZhbGlkYXRlQWxsSW5wdXRzKHsgZm9jdXNXaGVuSW52YWxpZDogdHJ1ZSB9KTtcbiAgICBpZiAoIXZhbGlkKSB7XG4gICAgICB0aGlzLnNldFVuc3VwcG9ydGVkVXJsQWxlcnRNZXNzYWdlKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGlzQ3JlYXRpbmdBcGlLZXkgPSBzZWxlY3RlZENyZWRlbnRpYWxUeXBlID09PSBcImFwaUtleVwiO1xuICAgIGlmIChpc1JlZ2lzdGVyVGVybWluYWxQYWdlKCkpIHtcbiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICAgIC8vIFRPRE86IGhhbmRsZSBlcnJvclxuICAgICAgLy8gQVBJIEtleSB3aWxsIGdvIHRocm91Z2ggc2VydmljZSBzY29wZSBzZWxlY3Rpb24gZmlyc3RcbiAgICAgIC8vIEhvd2V2ZXIsIHNpbmNlIHVzZXJzIGNhbid0IHJlLXJlZ2lzdGVyIEFQSSBLZXlcbiAgICAgIC8vICB0aGF0IHBhZ2Ugd2lsbCBub3QgYWxzbyBoYXZlIHRoaXMgcGFydFxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IGF3YWl0IHJlZ2lzdGVyQXBwbGljYXRpb24oYWRkSXRlbVN0YXRlLmlkLCBnZXRSZXN0QmFzZVVybChjb25maWdTdGF0ZS5wb3J0YWwpLCB7IGFwcFR5cGU6IHNlbGVjdGVkQXBwbGljYXRpb25FbnZpcm9ubWVudCwgcmVkaXJlY3RfdXJpczogbm9uRW1wdHlSZWRpcmVjdFVybHMsIHVybCB9KTtcbiAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgIHRoaXMud29ya2Zsb3dDb21wbGV0ZS5lbWl0KHtcbiAgICAgICAgICBpZDogYWRkSXRlbVN0YXRlLmlkLFxuICAgICAgICAgIHJlZGlyZWN0VXJsczogbm9uRW1wdHlSZWRpcmVjdFVybHMsXG4gICAgICAgICAgaHR0cFJlZmVycmVyczogbm9uRW1wdHlSZWZlcnJlclVybHMsXG4gICAgICAgICAgY2xpZW50SWQ6IHJlc3VsdC5jbGllbnRfaWQsXG4gICAgICAgICAgY2xpZW50U2VjcmV0OiByZXN1bHQuY2xpZW50X3NlY3JldCxcbiAgICAgICAgICBhcHBUeXBlOiByZXN1bHQuYXBwVHlwZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICB0aGlzLnNldFVuc3VwcG9ydGVkVXJsQWxlcnRNZXNzYWdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGFkZEl0ZW1TdGF0ZS5kZXZlbG9wZXJDcmVkZW50aWFsc1R5cGUgPSBzZWxlY3RlZENyZWRlbnRpYWxUeXBlO1xuICAgIGFkZEl0ZW1TdGF0ZS5hcHBsaWNhdGlvbkVudmlyb25tZW50ID0gaXNDcmVhdGluZ0FwaUtleVxuICAgICAgPyB1bmRlZmluZWRcbiAgICAgIDogc2VsZWN0ZWRBcHBsaWNhdGlvbkVudmlyb25tZW50O1xuICAgIGFkZEl0ZW1TdGF0ZS5hcGlLZXlSZWZlcnJlclVybHMgPSBpc0NyZWF0aW5nQXBpS2V5ID8gbm9uRW1wdHlSZWZlcnJlclVybHMgOiB1bmRlZmluZWQ7XG4gICAgYWRkSXRlbVN0YXRlLmRldmVsb3BlckNyZWRlbnRpYWxzUmVkaXJlY3RVcmxzID0gbm9uRW1wdHlSZWRpcmVjdFVybHM7XG4gICAgYWRkSXRlbVN0YXRlLnR5cGUgPSBpc0NyZWF0aW5nQXBpS2V5ID8gXCJBUEkgS2V5XCIgOiBcIkFwcGxpY2F0aW9uXCI7XG4gICAgYWRkSXRlbVN0YXRlLnVybCA9IGlzQ3JlYXRpbmdBcGlLZXkgPyB1bmRlZmluZWQgOiB1cmw7XG4gICAgdGhpcy5uZXdJdGVtVXBkYXRlUGFnZS5lbWl0KGlzQ3JlYXRpbmdBcGlLZXkgPyBcInNlcnZpY2VTY29wZVwiIDogXCJpdGVtUHJvcGVydGllc1wiKTtcbiAgfVxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBpMThuLCBzZWxlY3RlZENyZWRlbnRpYWxUeXBlLCBzZWxlY3RlZEFwcGxpY2F0aW9uRW52aXJvbm1lbnQsIHJlZGlyZWN0VXJscywgYWxlcnRJbmZvLCBpc0xvYWRpbmcsIHJlZmVycmVyVXJscywgdXJsLCBjYW5DcmVhdGVBUElLZXksIGNhblNob3dMZWFybk1vcmUgfSA9IHRoaXM7XG4gICAgcmV0dXJuIChoKEhvc3QsIHsgY2xhc3M6IHsgXCJvdmVyZmxvdy1oaWRkZW5cIjogaXNMb2FkaW5nIH0gfSwgaChcImFyY2dpcy1uZXctaXRlbS1sb2FkZXJcIiwgeyBhY3RpdmU6IGlzTG9hZGluZywgdGV4dDogaTE4bi5yZWdpc3RlcmluZyB9KSwgaChcImRpdlwiLCBudWxsLCBjYW5DcmVhdGVBUElLZXkgPyAoaChGcmFnbWVudCwgbnVsbCwgaChcImRpdlwiLCB7IGNsYXNzOiBcInRpdGxlLWNvbnRhaW5lclwiIH0sIGgoXCJhcmNnaXMtbmV3LWl0ZW0tZGVzY3JpcHRpb25cIiwgeyBoZWFkZXI6IGkxOG4udGl0bGUgfSksIGgoXCJhcmNnaXMtaW5mb3JtYXRpb25cIiwgeyBsYWJlbDogaTE4bi5vbmJvYXJkLnRpdGxlLCBwbGFjZW1lbnQ6IFwiYm90dG9tLXN0YXJ0XCIsIGhlYWRpbmc6IGkxOG4ub25ib2FyZC50aXRsZSwgaGVhZGluZ0xldmVsOiAzLCBjbGFzczogXCJvbmJvYXJkaW5nXCIsIG92ZXJsYXlQb3NpdGlvbmluZzogXCJmaXhlZFwiLCBwYWRkZWRDb250ZW50OiBmYWxzZSB9LCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwib25ib2FyZGluZ19fc2Nyb2xsXCIgfSwgaChcImltZ1wiLCB7IGNsYXNzOiBcImlsbHVzdHJhdGlvblwiLCBzcmM6IGdldEFzc2V0UGF0aChgLi9hc3NldHMvY3JlZC10eXBlLnBuZ2ApIH0pLCBkZXZlbG9wZXJDcmVkZW50aWFsc1R5cGVzLm1hcCgob3B0aW9uKSA9PiB7XG4gICAgICBjb25zdCB7IGRlc2NyaXB0aW9uLCB0aXRsZSB9ID0gaTE4bi5vbmJvYXJkW29wdGlvbl07XG4gICAgICByZXR1cm4gKGgoXCJkaXZcIiwgeyBjbGFzczogXCJvbmJvYXJkaW5nX19zZWN0aW9uXCIgfSwgaChcImg0XCIsIHsgY2xhc3M6IFwib25ib2FyZGluZ19fdGl0bGVcIiB9LCB0aXRsZSksIGgoXCJwXCIsIHsgY2xhc3M6IFwib25ib2FyZGluZ19fZGVzY3JpcHRpb25cIiB9LCBkZXNjcmlwdGlvbikpKTtcbiAgICB9KSkpKSwgaChcImNhbGNpdGUtdGlsZS1zZWxlY3QtZ3JvdXBcIiwgeyBsYXlvdXQ6IFwidmVydGljYWxcIiwgY2xhc3M6IFwidGlsZS1zZWxlY3RcIiB9LCBkZXZlbG9wZXJDcmVkZW50aWFsc1R5cGVzLm1hcCgob3B0aW9uKSA9PiAoaChcImNhbGNpdGUtdGlsZS1zZWxlY3RcIiwge1xuICAgICAgLy8gVE9ETzogcmV3b3JrIHRoZSBjb25kaXRpb24gb25jZSBTdGV2ZW4gcHVibGlzaCBoaXMgZHVic3RlcCBkaWFncmFtXG4gICAgICBkaXNhYmxlZDogISFhZGRJdGVtU3RhdGUuZXhpc3RpbmdJdGVtLCBjaGVja2VkOiBzZWxlY3RlZENyZWRlbnRpYWxUeXBlID09PSBvcHRpb24sIGhlYWRpbmc6IGkxOG4ub3B0aW9uc1tvcHRpb25dLnRpdGxlLCBkZXNjcmlwdGlvbjogaTE4bi5vcHRpb25zW29wdGlvbl0uZGVzY3JpcHRpb24sIG5hbWU6IFwiZGV2LWNyZWQtY3JlYXRlLW1vZGVcIiwgXCJpbnB1dC1lbmFibGVkXCI6IHRydWUsIHdpZHRoOiBcImZ1bGxcIiwgdHlwZTogXCJyYWRpb1wiLCB2YWx1ZTogb3B0aW9uLCBvbkNhbGNpdGVUaWxlU2VsZWN0Q2hhbmdlOiAoZSkgPT4gKHRoaXMuc2VsZWN0ZWRDcmVkZW50aWFsVHlwZSA9IGUudGFyZ2V0LnZhbHVlKVxuICAgIH0pKSkpKSkgOiAoaChcInBcIiwgeyBpbm5lckhUTUw6IGNhblNob3dMZWFybk1vcmVcbiAgICAgICAgPyBpMThuLm9hdXRoMkhpbnRcbiAgICAgICAgICAucmVwbGFjZShcIiR7YXBpTGlua1N0YXJ0fVwiLCBgPGEgaHJlZj1cImh0dHBzOi8vZGV2ZWxvcGVycy5hcmNnaXMuY29tL2RvY3VtZW50YXRpb24vbWFwcGluZy1hcGlzLWFuZC1zZXJ2aWNlcy9zZWN1cml0eS9vYXV0aC0yLjAvXCIgdGFyZ2V0PVwiX2JsYW5rXCI+YClcbiAgICAgICAgICAucmVwbGFjZShcIiR7ZW5kTGlua31cIiwgXCI8L2E+XCIpXG4gICAgICAgIDogaTE4bi5vYXV0aDJIaW50Tm9MaW5rIH0pKSksIGgoXCJkaXZcIiwgeyBjbGFzczogXCJzZWN0aW9uXCIgfSwgaChcImFyY2dpcy1kYXRhLWFycmF5LW1hbmFnZW1lbnRcIiwgeyBoZWFkZXI6IGkxOG4ucmVkaXJlY3RVcmxzVGl0bGUsIGRlc2NyaXB0aW9uOiBpMThuLnJlZGlyZWN0VXJsc0Rlc2NyaXB0aW9uLCBhZGROZXdUZXh0OiB1aVN0b3JlU3RhdGUuaTE4bi5jb21tb24uYWRkLCBwbGFjZWhvbGRlcjogXCJodHRwczovLzxzZXJ2ZXI+Wzpwb3J0XVwiLCBpbml0aWFsRGF0YTogcmVkaXJlY3RVcmxzLCByZXF1aXJlZDogdHJ1ZSwgdmFsaWRhdGVEYXRhOiAoZGF0YSkgPT4ge1xuICAgICAgICAvLyBPbmx5IHByaW50YWJsZSBBU0NJSSBjaGFyYWN0ZXJzIGFyZSB2YWxpZFxuICAgICAgICBjb25zdCBpbnZhbGlkQ2hhcmFjdGVycyA9IG5ldyBSZWdFeHAoL1teIC1+XS8pO1xuICAgICAgICBjb25zdCBjb250YWluc0ludmFsaWRDaGFyYWN0ZXJzID0gaW52YWxpZENoYXJhY3RlcnMudGVzdChkYXRhLmNvbnRlbnQpO1xuICAgICAgICByZXR1cm4gZGF0YS5jb250ZW50Lmxlbmd0aCA+IDAgJiYgIWNvbnRhaW5zSW52YWxpZENoYXJhY3RlcnM7XG4gICAgICB9LCBvbkRhdGFDaGFuZ2VkOiAoeyBkZXRhaWw6IHsgYWxsRGF0YSB9IH0pID0+IHtcbiAgICAgICAgdGhpcy5yZWRpcmVjdFVybHMgPSBhbGxEYXRhLm1hcCgoZGF0YSkgPT4gZGF0YS5jb250ZW50KTtcbiAgICAgIH0sIHJlZjogKGVsZSkgPT4gKHRoaXMucmVkaXJlY3RNYW5hZ21lbnRSZWYgPSBlbGUpIH0pKSwgc2VsZWN0ZWRDcmVkZW50aWFsVHlwZSA9PT0gXCJhcGlLZXlcIiAmJiAoaChcImRpdlwiLCB7IGNsYXNzOiBcInNlY3Rpb25cIiB9LCBoKFwiYXJjZ2lzLWRhdGEtYXJyYXktbWFuYWdlbWVudFwiLCB7IGhlYWRlcjogaTE4bi5yZWZlcmVyclVybHNUaXRsZSwgZGVzY3JpcHRpb246IGkxOG4ucmVmZXJlcnJVcmxzRGVzY3JpcHRpb24sIGFkZE5ld1RleHQ6IHVpU3RvcmVTdGF0ZS5pMThuLmNvbW1vbi5hZGQsIHBsYWNlaG9sZGVyOiBcImh0dHA6Ly8qLnlvdXItYXBwLmNvbVwiLCBpbml0aWFsRGF0YTogcmVmZXJyZXJVcmxzLCByZXF1aXJlZDogdHJ1ZSwgdmFsaWRhdGVEYXRhOiAoZGF0YSkgPT4gZGF0YS5jb250ZW50Lmxlbmd0aCA+IDAsIG9uRGF0YUNoYW5nZWQ6ICh7IGRldGFpbDogeyBhbGxEYXRhIH0gfSkgPT4ge1xuICAgICAgICB0aGlzLnJlZmVycmVyVXJscyA9IGFsbERhdGEubWFwKChkYXRhKSA9PiBkYXRhLmNvbnRlbnQpO1xuICAgICAgfSwgcmVmOiAoZWxlKSA9PiAodGhpcy5yZWZlcnJlck1hbmFnbWVudFJlZiA9IGVsZSkgfSkpKSwgc2VsZWN0ZWRDcmVkZW50aWFsVHlwZSA9PT0gXCJvYXV0aFwiICYmIChoKEZyYWdtZW50LCBudWxsLCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwic2VjdGlvblwiIH0sIGgoXCJhcmNnaXMtYXBwbGljYXRpb24tZW52aXJvbm1lbnRcIiwgeyBkZWZhdWx0RW52aXJvbm1lbnQ6IHNlbGVjdGVkQXBwbGljYXRpb25FbnZpcm9ubWVudCwgb25BcmNnaXNBcHBsaWNhdGlvbkVudmlyb25tZW50Q2hhbmdlOiAoZSkgPT4ge1xuICAgICAgICB0aGlzLnNlbGVjdGVkQXBwbGljYXRpb25FbnZpcm9ubWVudCA9IGUuZGV0YWlsO1xuICAgICAgfSB9KSksIGgoXCJkaXZcIiwgeyBjbGFzczogXCJzZWN0aW9uXCIgfSwgaChcImFyY2dpcy1uZXctaXRlbS11cmxcIiwgeyBvbk5ld0l0ZW1VcmxDaGFuZ2U6IChldmVudCkgPT4gKHRoaXMudXJsID0gZXZlbnQuZGV0YWlsLnVybCksIHVybDogdXJsLCByZWY6IChlbGUpID0+ICh0aGlzLnVybFJlZiA9IGVsZSksIHJlcXVpcmVkOiBmYWxzZSwgaGVhZGVyU2NhbGU6IFwibVwiIH0pKSkpLCBoKFwiYXJjZ2lzLW5ldy1pdGVtLWFsZXJ0XCIsIHsgaGVhZGluZzogYWxlcnRJbmZvID09PSBudWxsIHx8IGFsZXJ0SW5mbyA9PT0gdm9pZCAwID8gdm9pZCAwIDogYWxlcnRJbmZvLnRpdGxlLCBkZXNjcmlwdGlvbjogYWxlcnRJbmZvID09PSBudWxsIHx8IGFsZXJ0SW5mbyA9PT0gdm9pZCAwID8gdm9pZCAwIDogYWxlcnRJbmZvLmRlc2NyaXB0aW9uLCBhY3RpdmU6ICEhYWxlcnRJbmZvLCBvbkFsZXJ0RGlzbWlzczogKCkgPT4gKHRoaXMuYWxlcnRJbmZvID0gbnVsbCkgfSkpKTtcbiAgfVxuICBzdGF0aWMgZ2V0IGFzc2V0c0RpcnMoKSB7IHJldHVybiBbXCJhc3NldHNcIl07IH1cbn07XG5BcmNnaXNOZXdJdGVtUGFnZXNEZXZlbG9wZXJDcmVkZW50aWFsc1NlbGVjdC5zdHlsZSA9IGFyY2dpc05ld0l0ZW1QYWdlc0RldmVsb3BlckNyZWRlbnRpYWxzU2VsZWN0Q3NzO1xuXG5leHBvcnQgeyBBcmNnaXNOZXdJdGVtUGFnZXNEZXZlbG9wZXJDcmVkZW50aWFsc1NlbGVjdCBhcyBhcmNnaXNfbmV3X2l0ZW1fcGFnZXNfZGV2ZWxvcGVyX2NyZWRlbnRpYWxzX3NlbGVjdCB9O1xuIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogdjMuMC45OVxuICovXG5jb25zdCBkZXZlbG9wZXJDcmVkZW50aWFsc1R5cGVzID0gW1wiYXBpS2V5XCIsIFwib2F1dGhcIl07XG5jb25zdCBzZXJ2aWNlU2NvcGVzID0gW1xuICBcImJhc2VtYXBcIixcbiAgXCJnZW9jb2RpbmdOb3RTdG9yZWRcIixcbiAgXCJyb3V0aW5nXCIsXG4gIFwic2VydmljZUFyZWFcIixcbiAgXCJnZW9jb2RpbmdTdG9yZWRcIixcbiAgXCJvcHRpbWl6ZWRSb3V0aW5nXCIsXG4gIFwiY2xvc2VzdEZhY2lsaXR5XCIsXG4gIFwibG9jYXRpb25BbGxvY2F0aW9uXCIsXG4gIFwibXVsdGlWZWhpY2xlUm91dGluZ1wiLFxuICBcImNvc3RNYXRyaXhcIixcbiAgXCJnZW9FbnJpY2htZW50XCJcbl07XG5jb25zdCByZXF1aXJlZFNlcnZpY2VTY29wZXMgPSBbXCJiYXNlbWFwXCJdO1xuY29uc3Qgb25saW5lRGVmYXVsdFNlcnZpY2VTY29wZXMgPSBbXCJnZW9jb2RpbmdOb3RTdG9yZWRcIl07XG5jb25zdCBkZXZlbG9wZXJEZWZhdWx0U2VydmljZVNjb3BlcyA9IFtcImdlb2NvZGluZ05vdFN0b3JlZFwiLCBcInJvdXRpbmdcIiwgXCJzZXJ2aWNlQXJlYVwiXTtcbmNvbnN0IHNlcnZpY2VTY29wZVRvUHJpdmlsZWdlID0ge1xuICBiYXNlbWFwOiBcInBvcnRhbDphcGlrZXk6YmFzZW1hcHNcIixcbiAgZ2VvY29kaW5nTm90U3RvcmVkOiBcInByZW1pdW06dXNlcjpnZW9jb2RlOnRlbXBvcmFyeVwiLFxuICByb3V0aW5nOiBcInByZW1pdW06dXNlcjpuZXR3b3JrYW5hbHlzaXM6cm91dGluZ1wiLFxuICBzZXJ2aWNlQXJlYTogXCJwcmVtaXVtOnVzZXI6bmV0d29ya2FuYWx5c2lzOnNlcnZpY2VhcmVhXCIsXG4gIGdlb2NvZGluZ1N0b3JlZDogXCJwcmVtaXVtOnVzZXI6Z2VvY29kZTpzdG9yZWRcIixcbiAgb3B0aW1pemVkUm91dGluZzogXCJwcmVtaXVtOnVzZXI6bmV0d29ya2FuYWx5c2lzOm9wdGltaXplZHJvdXRpbmdcIixcbiAgY2xvc2VzdEZhY2lsaXR5OiBcInByZW1pdW06dXNlcjpuZXR3b3JrYW5hbHlzaXM6Y2xvc2VzdGZhY2lsaXR5XCIsXG4gIGxvY2F0aW9uQWxsb2NhdGlvbjogXCJwcmVtaXVtOnVzZXI6bmV0d29ya2FuYWx5c2lzOmxvY2F0aW9uYWxsb2NhdGlvblwiLFxuICBtdWx0aVZlaGljbGVSb3V0aW5nOiBcInByZW1pdW06dXNlcjpuZXR3b3JrYW5hbHlzaXM6dmVoaWNsZXJvdXRpbmdcIixcbiAgY29zdE1hdHJpeDogXCJwcmVtaXVtOnVzZXI6bmV0d29ya2FuYWx5c2lzOm9yaWdpbmRlc3RpbmF0aW9uY29zdG1hdHJpeFwiLFxuICBnZW9FbnJpY2htZW50OiBcInByZW1pdW06dXNlcjpnZW9lbnJpY2htZW50XCJcbn07XG5cbmV4cG9ydCB7IHNlcnZpY2VTY29wZXMgYXMgYSwgZGV2ZWxvcGVyRGVmYXVsdFNlcnZpY2VTY29wZXMgYXMgYiwgZGV2ZWxvcGVyQ3JlZGVudGlhbHNUeXBlcyBhcyBkLCBvbmxpbmVEZWZhdWx0U2VydmljZVNjb3BlcyBhcyBvLCByZXF1aXJlZFNlcnZpY2VTY29wZXMgYXMgciwgc2VydmljZVNjb3BlVG9Qcml2aWxlZ2UgYXMgcyB9O1xuIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogdjMuMC45OVxuICovXG5pbXBvcnQgeyByIGFzIHJlcXVlc3QsIGcgYXMgZ2V0UmVzdEJhc2VVcmwgfSBmcm9tICcuL3BvcnRhbC03OWNhYWVmZi5qcyc7XG5cbmNvbnN0IGdldFN1YnNjcmlwdGlvbkluZm8gPSBhc3luYyAocG9ydGFsKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3Qgc3Vic2NyaXB0aW9uSW5mbyA9IGF3YWl0IHJlcXVlc3QoYCR7Z2V0UmVzdEJhc2VVcmwocG9ydGFsKX1wb3J0YWxzL3NlbGYvc3Vic2NyaXB0aW9uSW5mb2ApO1xuICAgIHJldHVybiB7IHJlc3VsdDogc3Vic2NyaXB0aW9uSW5mbyB9O1xuICB9XG4gIGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIHJldHVybiB7IGVycm9yOiB7IGNvZGU6IFwidW5oYW5kbGVkRXJyb3JcIiB9IH07XG4gIH1cbn07XG5cbmV4cG9ydCB7IGdldFN1YnNjcmlwdGlvbkluZm8gYXMgZyB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9