"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-e2fd6f"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/add-item-97d577a9.js":
/*!**************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/add-item-97d577a9.js ***!
  \**************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ addItemState),
/* harmony export */   b: () => (/* binding */ addItemUrlState),
/* harmony export */   c: () => (/* binding */ addItemRequestState),
/* harmony export */   d: () => (/* binding */ addItemStore)
/* harmony export */ });
/* harmony import */ var _index_81d548b7_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-81d548b7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-81d548b7.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */


const addItemStore = (0,_index_81d548b7_js__WEBPACK_IMPORTED_MODULE_0__.c)({
  typeKeywords: [],
  customParameters: [],
  analyzedLocationTypes: [],
  allowStoredAuth: true,
  isSecured: null,
  checkAuth: false
});
// Entire add item state object
const addItemState = addItemStore.state;
// Subsets of add item state
const addItemRequestState = addItemStore.state;
const addItemUrlState = addItemStore.state;




/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-append-select-layer.entry.js":
/*!********************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-append-select-layer.entry.js ***!
  \********************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   arcgis_new_item_pages_append_select_layer: () => (/* binding */ ArcgisNewItemPagesAppendSelectLayer)
/* harmony export */ });
/* harmony import */ var _index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-92ebb396.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-92ebb396.js");
/* harmony import */ var _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config-eb5f7dc2.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/config-eb5f7dc2.js");
/* harmony import */ var _analyze_a3711367_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./analyze-a3711367.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/analyze-a3711367.js");
/* harmony import */ var _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./add-item-97d577a9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/add-item-97d577a9.js");
/* harmony import */ var _ui_ecf86bba_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ui-ecf86bba.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ui-ecf86bba.js");
/* harmony import */ var _geometries_f295af3a_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./geometries-f295af3a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/geometries-f295af3a.js");
/* harmony import */ var _index_81d548b7_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./index-81d548b7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-81d548b7.js");
/* harmony import */ var _basic_ee9c674c_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./basic-ee9c674c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/basic-ee9c674c.js");
/* harmony import */ var _commonEnums_f98a323c_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./commonEnums-f98a323c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/commonEnums-f98a323c.js");
/* harmony import */ var _loadModules_aaf30bd6_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./loadModules-aaf30bd6.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/loadModules-aaf30bd6.js");
/* harmony import */ var _append_58a7e7ab_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./append-58a7e7ab.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/append-58a7e7ab.js");
/* harmony import */ var _geocode_7eb7c0df_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./geocode-7eb7c0df.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/geocode-7eb7c0df.js");
/* harmony import */ var _functional_c82f5ab9_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./functional-c82f5ab9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-c82f5ab9.js");
/* harmony import */ var _privileges_ccd5f37d_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./privileges-ccd5f37d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/privileges-ccd5f37d.js");
/* harmony import */ var _privileges_35590eb4_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./privileges-35590eb4.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/privileges-35590eb4.js");
/* harmony import */ var _portal_79caaeff_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./portal-79caaeff.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/portal-79caaeff.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */

















function validateLayers(dataLayers, item, layers, configStateProps, addItemStateProps) {
  const portal = configStateProps.portal;
  const serviceInfo = (item === null || item === void 0 ? void 0 : item.serviceInfo) || {};
  const adminServiceInfo = (item === null || item === void 0 ? void 0 : item.adminServiceInfo) || {};
  const capabilities = portal.isPortal && !item.isSDS
    ? serviceInfo.capabilities.split(",") // portal hosted feature layer w/o 'providerSDS' typeKeyword
    : adminServiceInfo.capabilities.split(","); // every other hosted feature layer impl,
  const changeTrackingEnabled = capabilities.includes("ChangeTracking");
  const syncEnabled = (serviceInfo === null || serviceInfo === void 0 ? void 0 : serviceInfo.syncEnabled) || false;
  const publishParameters = (addItemStateProps.analyzeResults && addItemStateProps.analyzeResults.publishParameters) || {};
  const isFGDB = publishParameters.type === "fileGeodatabase";
  const insertOnly = syncEnabled || changeTrackingEnabled;
  const serviceLayers = !insertOnly
    ? layers
    : layers.filter((serviceLayer) => {
      return dataLayers.some((dataLayer) => {
        return (dataLayer.geometryType === serviceLayer.geometryType ||
          !serviceLayer.geometryType ||
          (serviceLayer.geometryType === "esriGeometryPoint" && !isFGDB && !dataLayer.geometryType));
      });
    });
  if (!serviceLayers || !serviceLayers.length) {
    return null;
  }
  else {
    return dataLayers;
  }
}

const arcgisNewItemPagesAppendSelectLayerCss = ":host{position:relative;background-color:var(--calcite-ui-background);display:flex;flex-direction:column;height:100%;max-width:100%}.search-bar{display:flex;margin-left:auto;margin-right:auto;padding-right:1rem;padding-left:2rem;max-width:var(--item-browser-max-width)}.x{position:absolute;z-index:10;outline:2px solid transparent;outline-offset:2px;border-style:none;cursor:pointer;color:var(--calcite-ui-text-1);background-color:transparent;margin-top:0.875rem}.input{display:block;width:100%;box-sizing:border-box;padding-right:1rem;padding-left:1.5rem;height:3rem;box-shadow:none;border-style:none;position:relative;z-index:0;transition-property:background-color, border-color, color, fill, stroke, opacity, box-shadow, transform;transition-duration:150ms;color:var(--calcite-ui-text-1);font-size:0.875rem;background-color:transparent;border-bottom:2px solid transparent;font-family:inherit}.input::-webkit-search-cancel-button{display:none}.input::-ms-clear{display:none}.input:focus{box-shadow:none;outline:2px solid transparent;outline-offset:2px;border-bottom-color:var(--calcite-ui-brand)}.heading{font-size:1rem;color:var(--calcite-ui-text-1);margin-top:1.5rem;margin-left:1.5rem;margin-right:1.5rem;margin-bottom:0.5rem}.layerCards{font-size:0.875rem;margin-left:1.5rem;margin-right:1.5rem;background-color:rgba(220, 220, 220, 0.934)}.appendLayerBrowser{position:relative;display:block;background-color:var(--calcite-ui-foreground-1)}.cards-wrapper{height:100%;min-width:0;position:relative;display:flex;flex-direction:column;justify-content:space-between;padding-bottom:1rem;background-color:var(--calcite-ui-background)}.pagination-range{margin-left:1.5rem}.no-results-string{display:flex;justify-content:center;align-items:center}";

const ArcgisNewItemPagesAppendSelectLayer = class {
  constructor(hostRef) {
    (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.newItemUpdatePage = (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "newItemUpdatePage", 7);
    this.newItemPrevPage = (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "newItemPrevPage", 7);
    this.newItemToggleNavigationEnabled = (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "newItemToggleNavigationEnabled", 7);
    this.dataLayers = [];
    this.searchTerm = "";
    this.isSourceDataSelect = false;
    this.ITEMS_PER_PAGE = 6;
    this.layers = undefined;
    this.loading = undefined;
    this.loaderMessage = undefined;
    this.error = undefined;
    this.filteredLayers = [];
    this.pagination = undefined;
    this.currentStart = 1;
    this.selected = undefined;
  }
  async handleNext() {
    var _a, _b;
    let nextPage = "appendKeyPairSelect";
    if (this.isSourceDataSelect) {
      //after selecting layer of Feature Layer
      _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.sourceDataLayer = this.selected;
      nextPage = "appendUpload";
    }
    else {
      _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.selectedSheet = this.selected.excelSheetId || this.selected.id;
      await this.analyzeSelectedLayer(); //updates addItemState.backupLayerFields with selected layer
      _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.dataLayer =
        (_b = (_a = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.analyzeResults) === null || _a === void 0 ? void 0 : _a.publishParameters) === null || _b === void 0 ? void 0 : _b.layers[_add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.selectedSheet];
      if ((_add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.type === "Microsoft Excel" || _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.type === "CSV") &&
        (_add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a === null || _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a === void 0 ? void 0 : _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.sourceDataLayer.geometryType) === "esriGeometryPoint" &&
        (_add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a === null || _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a === void 0 ? void 0 : _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.sourceDataLayer.type) !== "Table") {
        nextPage = "csvLocationFields";
      }
      else if (_add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.addAppendSelectOption === "add" &&
        (!_add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.backupLayerFields.some((field) => field.type === "esriFieldTypeDate") ||
          this.isEnterprise)) {
        nextPage = "appendMatchFields";
      }
      else {
        nextPage = "appendKeyPairSelect";
      }
    }
    this.newItemToggleNavigationEnabled.emit(true);
    this.newItemUpdatePage.emit(nextPage);
  }
  searchHandler(e) {
    this.searchTerm = e.detail;
    this.fetchLayers(this.searchTerm);
  }
  async handlePrev(event) {
    event.preventDefault();
    if (this.loading) {
      return;
    }
    if (_add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.id) {
      //resetting uploaded data file
      _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.dataLayer = null;
    }
    this.newItemPrevPage.emit();
  }
  async componentWillLoad() {
    const { sourceDataLayer, existingItem, addAppendSelectOption } = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a;
    this.layers = existingItem.layers;
    this.isSourceDataSelect = this.layers.length > 1 && !sourceDataLayer ? true : false;
    this.item = existingItem;
    this.i18n = _ui_ecf86bba_js__WEBPACK_IMPORTED_MODULE_4__.u.i18n.appendSelectLayer;
    this.isEnterprise = _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_1__.c.portal.isPortal;
    this.header = this.isSourceDataSelect
      ? this.i18n.chooseServiceLayer
      : this.createHeaderText(_add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.type === "Microsoft Excel");
    if (!this.isSourceDataSelect) {
      this.addLayerInfo();
      if (!this.selected && addAppendSelectOption !== "update") {
        //if no compatible layers are found, throw error.
        this.handleError(this.i18n.sameGeometryWarningTitle, this.i18n.sameGeometryWarningDescription, "warning");
      }
    }
    else {
      this.dataLayers = existingItem.layers;
      this.filteredLayers = existingItem.layers;
      this.selected = this.filteredLayers[0];
    }
  }
  async analyzeSelectedLayer() {
    this.newItemToggleNavigationEnabled.emit(false);
    this.loading = true;
    this.loaderMessage = _ui_ecf86bba_js__WEBPACK_IMPORTED_MODULE_4__.u.i18n.appendUpload.analyzing;
    const { portal, user, config, lang } = _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_1__.c;
    const { type } = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a;
    const { error } = await (0,_analyze_a3711367_js__WEBPACK_IMPORTED_MODULE_2__.a)({
      analyzeArgs: { type: "item", itemid: _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.id, workflow: "append" },
      itemArgs: { itemType: type },
      configArgs: { portal, user, config, lang },
      initialize: true
    });
    if (error) {
      this.handleError();
    }
  }
  fetchLayers(searchTerm) {
    //* Search layers by name.
    const term = searchTerm.toLowerCase();
    const found = this.dataLayers.filter((layer) => {
      return layer.name.toLowerCase().includes(term, 0);
    });
    this.currentStart = 1;
    this.filteredLayers = found;
  }
  addLayerInfo() {
    var _a;
    //helps to determine what geometryType icon to display
    const publishParameters = ((_a = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.analyzeResults) === null || _a === void 0 ? void 0 : _a.publishParameters)
      ? _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.analyzeResults.publishParameters
      : {};
    const layers = publishParameters.layers || [publishParameters.layerInfo] || 0;
    const dataLayers = layers.map((layerInfo) => {
      const locationType = layerInfo.locationType || publishParameters.locationType || null;
      layerInfo.geometryType =
        layerInfo.geometryType ||
          (locationType === "coordinates" ? "esriGeometryPoint" : null) ||
          null;
      layerInfo.addressFields =
        layerInfo.addressFields ||
          publishParameters.addressFields ||
          (locationType === "coordinates"
            ? {
              longitudeFieldName: layerInfo.longitudeFieldName || publishParameters.longitudeFieldName,
              latitudeFieldName: layerInfo.latitudeFieldName || publishParameters.latitudeFieldName
            }
            : {});
      return layerInfo;
    });
    const validatedLayers = validateLayers(dataLayers, this.item, this.layers, { portal: _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_1__.c.portal }, { analyzeResults: _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.analyzeResults });
    if (validatedLayers) {
      this.dataLayers = validatedLayers;
      this.filteredLayers = validatedLayers;
      this.selected = this.filteredLayers.filter((layer) => {
        return (0,_geometries_f295af3a_js__WEBPACK_IMPORTED_MODULE_5__.c)(layer, _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.sourceDataLayer, _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.type);
      })[0];
    }
  }
  async handleError(title, description, errorType) {
    this.newItemToggleNavigationEnabled.emit(true);
    this.loading = false;
    this.error = {
      //Todo: Refining error messages in progress
      title: title || _ui_ecf86bba_js__WEBPACK_IMPORTED_MODULE_4__.u.i18n.publishSelect.error.title,
      description: description || _ui_ecf86bba_js__WEBPACK_IMPORTED_MODULE_4__.u.i18n.publishSelect.error.description,
      kind: errorType
    };
  }
  renderPageNumberText() {
    const start = this.currentStart;
    const total = this.filteredLayers.length;
    const end = Math.min(start + this.ITEMS_PER_PAGE - 1, total);
    return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: "page-number" }, this.i18n.paginationHeader
      .replace("${start}", `${start}`)
      .replace("${end}", `${end}`)
      .replace("${total}", `${total}`)));
  }
  createHeaderText(isExcel) {
    var _a;
    const stringBase = isExcel ? this.i18n.chooseSheet : this.i18n.chooseLayer;
    return stringBase
      .replace("${featureLayerName}", this.item.layers.length === 0 ? this.item.title : (_a = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.sourceDataLayer) === null || _a === void 0 ? void 0 : _a.name)
      .replace("${uploadedFile}", _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.originalFileName);
  }
  render() {
    const { error, filteredLayers, i18n, currentStart, ITEMS_PER_PAGE, loading, loaderMessage, header, isSourceDataSelect } = this;
    const layersExist = filteredLayers.length > 0;
    const showPagination = (filteredLayers === null || filteredLayers === void 0 ? void 0 : filteredLayers.length) > ITEMS_PER_PAGE;
    const layers = filteredLayers === null || filteredLayers === void 0 ? void 0 : filteredLayers.slice(currentStart - 1, currentStart + ITEMS_PER_PAGE - 1);
    return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.H, null, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-loader", { class: "loader-overlay", type: "indeterminate", active: loading, text: loaderMessage }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "appendLayerBrowser" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "search-bar" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { icon: "search", scale: "s", class: "x" }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("input", { class: "input", value: this.searchTerm, placeholder: _ui_ecf86bba_js__WEBPACK_IMPORTED_MODULE_4__.u.i18n.layerSearch.search, onInput: (e) => {
        const term = e.currentTarget.value;
        this.fetchLayers(term);
      } })), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "cards-wrapper" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "heading" }, header), layersExist ? ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", null, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "pagination-range" }, showPagination && this.renderPageNumberText()), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "layerCards" }, (layers || []).map((dataLayer, idx) => ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-append-layer-card", { key: dataLayer.excelSheetId || idx, isIncompatibleGeom: !isSourceDataSelect &&
        _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.addAppendSelectOption !== "update" &&
        !(0,_geometries_f295af3a_js__WEBPACK_IMPORTED_MODULE_5__.c)(dataLayer, _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.sourceDataLayer, _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.type), selected: this.selected === dataLayer, layer: dataLayer, onLayerCardSelect: (e) => {
        this.selected = e.detail.item;
      } }))), showPagination && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "pagination" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-pagination", { scale: "m", totalItems: this.filteredLayers.length, pageSize: ITEMS_PER_PAGE, startItem: this.currentStart, onCalcitePaginationChange: (e) => {
        this.currentStart = e.target.startItem;
      } })))))) : ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "no-results-string" }, i18n.noResults))), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-alert", { heading: error === null || error === void 0 ? void 0 : error.title, description: error === null || error === void 0 ? void 0 : error.description, link: { href: error === null || error === void 0 ? void 0 : error.link, title: error === null || error === void 0 ? void 0 : error.linkText }, active: !!error, kind: (error === null || error === void 0 ? void 0 : error.kind) || "danger", onAlertDismiss: () => (this.error = null) }))));
  }
  get el() { return (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.d)(this); }
};
ArcgisNewItemPagesAppendSelectLayer.style = arcgisNewItemPagesAppendSelectLayerCss;




/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/geometries-f295af3a.js":
/*!****************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/geometries-f295af3a.js ***!
  \****************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ checkCompatibleGeometries),
/* harmony export */   v: () => (/* binding */ verifyGeometries)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */
function verifyGeometries(args) {
  var _a, _b;
  const { dataLayer, type, sourceDataLayer } = args;
  const dataLayerGeometry = (_a = dataLayer === null || dataLayer === void 0 ? void 0 : dataLayer.geometryType) !== null && _a !== void 0 ? _a : (_b = dataLayer === null || dataLayer === void 0 ? void 0 : dataLayer.layerInfo) === null || _b === void 0 ? void 0 : _b.geometryType;
  if (type === "Microsoft Excel" || type === "CSV") {
    if (((dataLayer.locationType === "address" && dataLayer.addressFields) || dataLayer.locationType === "coordinates") && //check location type is address in case "none" is selected and addressFields linger
      (sourceDataLayer === null || sourceDataLayer === void 0 ? void 0 : sourceDataLayer.geometryType) === "esriGeometryPoint") {
      return null;
    }
    else if (!dataLayerGeometry || dataLayer.locationType === "none" || (sourceDataLayer === null || sourceDataLayer === void 0 ? void 0 : sourceDataLayer.type) === "Table") {
      return { title: "noGeometryMatchTitle", description: "noGeometryTableMessage" };
    }
    else if ((sourceDataLayer === null || sourceDataLayer === void 0 ? void 0 : sourceDataLayer.geometryType) !== dataLayerGeometry) {
      return { title: "noGeometryMatchTitle", description: "noGeometryMatchMessage" };
    }
  }
  else {
    if ((sourceDataLayer === null || sourceDataLayer === void 0 ? void 0 : sourceDataLayer.geometryType) !== (dataLayer === null || dataLayer === void 0 ? void 0 : dataLayer.geometryType)) {
      return { title: "noGeometryMatchTitle", description: "noGeometryMatchMessage" };
    }
  }
}
function checkCompatibleGeometries(dataLayer, sourceDataLayer, type) {
  if (type === "Microsoft Excel" || type === "CSV") {
    if (((sourceDataLayer === null || sourceDataLayer === void 0 ? void 0 : sourceDataLayer.geometryType) === "esriGeometryPoint" || (sourceDataLayer === null || sourceDataLayer === void 0 ? void 0 : sourceDataLayer.type) === "Table") &&
      (dataLayer === null || dataLayer === void 0 ? void 0 : dataLayer.locationType) === "none") {
      return true;
    }
    if ((sourceDataLayer === null || sourceDataLayer === void 0 ? void 0 : sourceDataLayer.geometryType) === "esriGeometryPoint") {
      return !!dataLayer.addressFields || dataLayer.locationType !== "none";
    }
    return false;
  }
  else {
    return (sourceDataLayer === null || sourceDataLayer === void 0 ? void 0 : sourceDataLayer.type) === "Table" || (dataLayer === null || dataLayer === void 0 ? void 0 : dataLayer.geometryType) === (sourceDataLayer === null || sourceDataLayer === void 0 ? void 0 : sourceDataLayer.geometryType);
  }
}




/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ui-ecf86bba.js":
/*!********************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ui-ecf86bba.js ***!
  \********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ uiStore),
/* harmony export */   u: () => (/* binding */ uiStoreState)
/* harmony export */ });
/* harmony import */ var _index_81d548b7_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-81d548b7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-81d548b7.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */


const uiStore = (0,_index_81d548b7_js__WEBPACK_IMPORTED_MODULE_0__.c)({
  nextText: "next",
  workflow: "content",
  scale: "m",
  disableScroll: false,
  featureFlags: { tileLayer3dTiles: false }
});
const uiStoreState = uiStore.state;




/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXBwLWNvbXBvbmVudHNfZGlzdF9lc21fYXJjZ2lzLWUyZmQ2Zi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ3VEOztBQUV2RCxxQkFBcUIscURBQVc7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRWdHOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDcEJoRztBQUNBO0FBQ0E7QUFDQTtBQUM2RztBQUNyRDtBQUNIO0FBQ007QUFDTjtBQUNxQjtBQUM3QztBQUNBO0FBQ007QUFDQTtBQUNMO0FBQ0M7QUFDRztBQUNBO0FBQ0E7QUFDSjs7QUFFOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdEO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsc0RBQXNELGtCQUFrQiw4Q0FBOEMsYUFBYSxzQkFBc0IsWUFBWSxlQUFlLFlBQVksYUFBYSxpQkFBaUIsa0JBQWtCLG1CQUFtQixrQkFBa0Isd0NBQXdDLEdBQUcsa0JBQWtCLFdBQVcsOEJBQThCLG1CQUFtQixrQkFBa0IsZUFBZSwrQkFBK0IsNkJBQTZCLG9CQUFvQixPQUFPLGNBQWMsV0FBVyxzQkFBc0IsbUJBQW1CLG9CQUFvQixZQUFZLGdCQUFnQixrQkFBa0Isa0JBQWtCLFVBQVUsd0dBQXdHLDBCQUEwQiwrQkFBK0IsbUJBQW1CLDZCQUE2QixvQ0FBb0Msb0JBQW9CLHFDQUFxQyxhQUFhLGtCQUFrQixhQUFhLGFBQWEsZ0JBQWdCLDhCQUE4QixtQkFBbUIsNENBQTRDLFNBQVMsZUFBZSwr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Ozs7Ozs7QUMxQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ3VEOztBQUV2RCxnQkFBZ0IscURBQVc7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEIsQ0FBQztBQUNEOztBQUUyQyIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FwcC1jb21wb25lbnRzL2Rpc3QvZXNtL2FkZC1pdGVtLTk3ZDU3N2E5LmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FwcC1jb21wb25lbnRzL2Rpc3QvZXNtL2FyY2dpcy1uZXctaXRlbS1wYWdlcy1hcHBlbmQtc2VsZWN0LWxheWVyLmVudHJ5LmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FwcC1jb21wb25lbnRzL2Rpc3QvZXNtL2dlb21ldHJpZXMtZjI5NWFmM2EuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYW5hbHlzaXMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYXBwLWNvbXBvbmVudHMvZGlzdC9lc20vdWktZWNmODZiYmEuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogdjMuMC45OVxuICovXG5pbXBvcnQgeyBjIGFzIGNyZWF0ZVN0b3JlIH0gZnJvbSAnLi9pbmRleC04MWQ1NDhiNy5qcyc7XG5cbmNvbnN0IGFkZEl0ZW1TdG9yZSA9IGNyZWF0ZVN0b3JlKHtcbiAgdHlwZUtleXdvcmRzOiBbXSxcbiAgY3VzdG9tUGFyYW1ldGVyczogW10sXG4gIGFuYWx5emVkTG9jYXRpb25UeXBlczogW10sXG4gIGFsbG93U3RvcmVkQXV0aDogdHJ1ZSxcbiAgaXNTZWN1cmVkOiBudWxsLFxuICBjaGVja0F1dGg6IGZhbHNlXG59KTtcbi8vIEVudGlyZSBhZGQgaXRlbSBzdGF0ZSBvYmplY3RcbmNvbnN0IGFkZEl0ZW1TdGF0ZSA9IGFkZEl0ZW1TdG9yZS5zdGF0ZTtcbi8vIFN1YnNldHMgb2YgYWRkIGl0ZW0gc3RhdGVcbmNvbnN0IGFkZEl0ZW1SZXF1ZXN0U3RhdGUgPSBhZGRJdGVtU3RvcmUuc3RhdGU7XG5jb25zdCBhZGRJdGVtVXJsU3RhdGUgPSBhZGRJdGVtU3RvcmUuc3RhdGU7XG5cbmV4cG9ydCB7IGFkZEl0ZW1TdGF0ZSBhcyBhLCBhZGRJdGVtVXJsU3RhdGUgYXMgYiwgYWRkSXRlbVJlcXVlc3RTdGF0ZSBhcyBjLCBhZGRJdGVtU3RvcmUgYXMgZCB9O1xuIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogdjMuMC45OVxuICovXG5pbXBvcnQgeyByIGFzIHJlZ2lzdGVySW5zdGFuY2UsIGMgYXMgY3JlYXRlRXZlbnQsIGgsIEggYXMgSG9zdCwgZCBhcyBnZXRFbGVtZW50IH0gZnJvbSAnLi9pbmRleC05MmViYjM5Ni5qcyc7XG5pbXBvcnQgeyBjIGFzIGNvbmZpZ1N0YXRlIH0gZnJvbSAnLi9jb25maWctZWI1ZjdkYzIuanMnO1xuaW1wb3J0IHsgYSBhcyBhbmFseXplIH0gZnJvbSAnLi9hbmFseXplLWEzNzExMzY3LmpzJztcbmltcG9ydCB7IGEgYXMgYWRkSXRlbVN0YXRlIH0gZnJvbSAnLi9hZGQtaXRlbS05N2Q1NzdhOS5qcyc7XG5pbXBvcnQgeyB1IGFzIHVpU3RvcmVTdGF0ZSB9IGZyb20gJy4vdWktZWNmODZiYmEuanMnO1xuaW1wb3J0IHsgYyBhcyBjaGVja0NvbXBhdGlibGVHZW9tZXRyaWVzIH0gZnJvbSAnLi9nZW9tZXRyaWVzLWYyOTVhZjNhLmpzJztcbmltcG9ydCAnLi9pbmRleC04MWQ1NDhiNy5qcyc7XG5pbXBvcnQgJy4vYmFzaWMtZWU5YzY3NGMuanMnO1xuaW1wb3J0ICcuL2NvbW1vbkVudW1zLWY5OGEzMjNjLmpzJztcbmltcG9ydCAnLi9sb2FkTW9kdWxlcy1hYWYzMGJkNi5qcyc7XG5pbXBvcnQgJy4vYXBwZW5kLTU4YTdlN2FiLmpzJztcbmltcG9ydCAnLi9nZW9jb2RlLTdlYjdjMGRmLmpzJztcbmltcG9ydCAnLi9mdW5jdGlvbmFsLWM4MmY1YWI5LmpzJztcbmltcG9ydCAnLi9wcml2aWxlZ2VzLWNjZDVmMzdkLmpzJztcbmltcG9ydCAnLi9wcml2aWxlZ2VzLTM1NTkwZWI0LmpzJztcbmltcG9ydCAnLi9wb3J0YWwtNzljYWFlZmYuanMnO1xuXG5mdW5jdGlvbiB2YWxpZGF0ZUxheWVycyhkYXRhTGF5ZXJzLCBpdGVtLCBsYXllcnMsIGNvbmZpZ1N0YXRlUHJvcHMsIGFkZEl0ZW1TdGF0ZVByb3BzKSB7XG4gIGNvbnN0IHBvcnRhbCA9IGNvbmZpZ1N0YXRlUHJvcHMucG9ydGFsO1xuICBjb25zdCBzZXJ2aWNlSW5mbyA9IChpdGVtID09PSBudWxsIHx8IGl0ZW0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGl0ZW0uc2VydmljZUluZm8pIHx8IHt9O1xuICBjb25zdCBhZG1pblNlcnZpY2VJbmZvID0gKGl0ZW0gPT09IG51bGwgfHwgaXRlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogaXRlbS5hZG1pblNlcnZpY2VJbmZvKSB8fCB7fTtcbiAgY29uc3QgY2FwYWJpbGl0aWVzID0gcG9ydGFsLmlzUG9ydGFsICYmICFpdGVtLmlzU0RTXG4gICAgPyBzZXJ2aWNlSW5mby5jYXBhYmlsaXRpZXMuc3BsaXQoXCIsXCIpIC8vIHBvcnRhbCBob3N0ZWQgZmVhdHVyZSBsYXllciB3L28gJ3Byb3ZpZGVyU0RTJyB0eXBlS2V5d29yZFxuICAgIDogYWRtaW5TZXJ2aWNlSW5mby5jYXBhYmlsaXRpZXMuc3BsaXQoXCIsXCIpOyAvLyBldmVyeSBvdGhlciBob3N0ZWQgZmVhdHVyZSBsYXllciBpbXBsLFxuICBjb25zdCBjaGFuZ2VUcmFja2luZ0VuYWJsZWQgPSBjYXBhYmlsaXRpZXMuaW5jbHVkZXMoXCJDaGFuZ2VUcmFja2luZ1wiKTtcbiAgY29uc3Qgc3luY0VuYWJsZWQgPSAoc2VydmljZUluZm8gPT09IG51bGwgfHwgc2VydmljZUluZm8gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNlcnZpY2VJbmZvLnN5bmNFbmFibGVkKSB8fCBmYWxzZTtcbiAgY29uc3QgcHVibGlzaFBhcmFtZXRlcnMgPSAoYWRkSXRlbVN0YXRlUHJvcHMuYW5hbHl6ZVJlc3VsdHMgJiYgYWRkSXRlbVN0YXRlUHJvcHMuYW5hbHl6ZVJlc3VsdHMucHVibGlzaFBhcmFtZXRlcnMpIHx8IHt9O1xuICBjb25zdCBpc0ZHREIgPSBwdWJsaXNoUGFyYW1ldGVycy50eXBlID09PSBcImZpbGVHZW9kYXRhYmFzZVwiO1xuICBjb25zdCBpbnNlcnRPbmx5ID0gc3luY0VuYWJsZWQgfHwgY2hhbmdlVHJhY2tpbmdFbmFibGVkO1xuICBjb25zdCBzZXJ2aWNlTGF5ZXJzID0gIWluc2VydE9ubHlcbiAgICA/IGxheWVyc1xuICAgIDogbGF5ZXJzLmZpbHRlcigoc2VydmljZUxheWVyKSA9PiB7XG4gICAgICByZXR1cm4gZGF0YUxheWVycy5zb21lKChkYXRhTGF5ZXIpID0+IHtcbiAgICAgICAgcmV0dXJuIChkYXRhTGF5ZXIuZ2VvbWV0cnlUeXBlID09PSBzZXJ2aWNlTGF5ZXIuZ2VvbWV0cnlUeXBlIHx8XG4gICAgICAgICAgIXNlcnZpY2VMYXllci5nZW9tZXRyeVR5cGUgfHxcbiAgICAgICAgICAoc2VydmljZUxheWVyLmdlb21ldHJ5VHlwZSA9PT0gXCJlc3JpR2VvbWV0cnlQb2ludFwiICYmICFpc0ZHREIgJiYgIWRhdGFMYXllci5nZW9tZXRyeVR5cGUpKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICBpZiAoIXNlcnZpY2VMYXllcnMgfHwgIXNlcnZpY2VMYXllcnMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgZWxzZSB7XG4gICAgcmV0dXJuIGRhdGFMYXllcnM7XG4gIH1cbn1cblxuY29uc3QgYXJjZ2lzTmV3SXRlbVBhZ2VzQXBwZW5kU2VsZWN0TGF5ZXJDc3MgPSBcIjpob3N0e3Bvc2l0aW9uOnJlbGF0aXZlO2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS11aS1iYWNrZ3JvdW5kKTtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2hlaWdodDoxMDAlO21heC13aWR0aDoxMDAlfS5zZWFyY2gtYmFye2Rpc3BsYXk6ZmxleDttYXJnaW4tbGVmdDphdXRvO21hcmdpbi1yaWdodDphdXRvO3BhZGRpbmctcmlnaHQ6MXJlbTtwYWRkaW5nLWxlZnQ6MnJlbTttYXgtd2lkdGg6dmFyKC0taXRlbS1icm93c2VyLW1heC13aWR0aCl9Lnh7cG9zaXRpb246YWJzb2x1dGU7ei1pbmRleDoxMDtvdXRsaW5lOjJweCBzb2xpZCB0cmFuc3BhcmVudDtvdXRsaW5lLW9mZnNldDoycHg7Ym9yZGVyLXN0eWxlOm5vbmU7Y3Vyc29yOnBvaW50ZXI7Y29sb3I6dmFyKC0tY2FsY2l0ZS11aS10ZXh0LTEpO2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnQ7bWFyZ2luLXRvcDowLjg3NXJlbX0uaW5wdXR7ZGlzcGxheTpibG9jazt3aWR0aDoxMDAlO2JveC1zaXppbmc6Ym9yZGVyLWJveDtwYWRkaW5nLXJpZ2h0OjFyZW07cGFkZGluZy1sZWZ0OjEuNXJlbTtoZWlnaHQ6M3JlbTtib3gtc2hhZG93Om5vbmU7Ym9yZGVyLXN0eWxlOm5vbmU7cG9zaXRpb246cmVsYXRpdmU7ei1pbmRleDowO3RyYW5zaXRpb24tcHJvcGVydHk6YmFja2dyb3VuZC1jb2xvciwgYm9yZGVyLWNvbG9yLCBjb2xvciwgZmlsbCwgc3Ryb2tlLCBvcGFjaXR5LCBib3gtc2hhZG93LCB0cmFuc2Zvcm07dHJhbnNpdGlvbi1kdXJhdGlvbjoxNTBtcztjb2xvcjp2YXIoLS1jYWxjaXRlLXVpLXRleHQtMSk7Zm9udC1zaXplOjAuODc1cmVtO2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnQ7Ym9yZGVyLWJvdHRvbToycHggc29saWQgdHJhbnNwYXJlbnQ7Zm9udC1mYW1pbHk6aW5oZXJpdH0uaW5wdXQ6Oi13ZWJraXQtc2VhcmNoLWNhbmNlbC1idXR0b257ZGlzcGxheTpub25lfS5pbnB1dDo6LW1zLWNsZWFye2Rpc3BsYXk6bm9uZX0uaW5wdXQ6Zm9jdXN7Ym94LXNoYWRvdzpub25lO291dGxpbmU6MnB4IHNvbGlkIHRyYW5zcGFyZW50O291dGxpbmUtb2Zmc2V0OjJweDtib3JkZXItYm90dG9tLWNvbG9yOnZhcigtLWNhbGNpdGUtdWktYnJhbmQpfS5oZWFkaW5ne2ZvbnQtc2l6ZToxcmVtO2NvbG9yOnZhcigtLWNhbGNpdGUtdWktdGV4dC0xKTttYXJnaW4tdG9wOjEuNXJlbTttYXJnaW4tbGVmdDoxLjVyZW07bWFyZ2luLXJpZ2h0OjEuNXJlbTttYXJnaW4tYm90dG9tOjAuNXJlbX0ubGF5ZXJDYXJkc3tmb250LXNpemU6MC44NzVyZW07bWFyZ2luLWxlZnQ6MS41cmVtO21hcmdpbi1yaWdodDoxLjVyZW07YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDIyMCwgMjIwLCAyMjAsIDAuOTM0KX0uYXBwZW5kTGF5ZXJCcm93c2Vye3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6YmxvY2s7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWZvcmVncm91bmQtMSl9LmNhcmRzLXdyYXBwZXJ7aGVpZ2h0OjEwMCU7bWluLXdpZHRoOjA7cG9zaXRpb246cmVsYXRpdmU7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjtwYWRkaW5nLWJvdHRvbToxcmVtO2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS11aS1iYWNrZ3JvdW5kKX0ucGFnaW5hdGlvbi1yYW5nZXttYXJnaW4tbGVmdDoxLjVyZW19Lm5vLXJlc3VsdHMtc3RyaW5ne2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2FsaWduLWl0ZW1zOmNlbnRlcn1cIjtcblxuY29uc3QgQXJjZ2lzTmV3SXRlbVBhZ2VzQXBwZW5kU2VsZWN0TGF5ZXIgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcbiAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgIHRoaXMubmV3SXRlbVVwZGF0ZVBhZ2UgPSBjcmVhdGVFdmVudCh0aGlzLCBcIm5ld0l0ZW1VcGRhdGVQYWdlXCIsIDcpO1xuICAgIHRoaXMubmV3SXRlbVByZXZQYWdlID0gY3JlYXRlRXZlbnQodGhpcywgXCJuZXdJdGVtUHJldlBhZ2VcIiwgNyk7XG4gICAgdGhpcy5uZXdJdGVtVG9nZ2xlTmF2aWdhdGlvbkVuYWJsZWQgPSBjcmVhdGVFdmVudCh0aGlzLCBcIm5ld0l0ZW1Ub2dnbGVOYXZpZ2F0aW9uRW5hYmxlZFwiLCA3KTtcbiAgICB0aGlzLmRhdGFMYXllcnMgPSBbXTtcbiAgICB0aGlzLnNlYXJjaFRlcm0gPSBcIlwiO1xuICAgIHRoaXMuaXNTb3VyY2VEYXRhU2VsZWN0ID0gZmFsc2U7XG4gICAgdGhpcy5JVEVNU19QRVJfUEFHRSA9IDY7XG4gICAgdGhpcy5sYXllcnMgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5sb2FkaW5nID0gdW5kZWZpbmVkO1xuICAgIHRoaXMubG9hZGVyTWVzc2FnZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmVycm9yID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuZmlsdGVyZWRMYXllcnMgPSBbXTtcbiAgICB0aGlzLnBhZ2luYXRpb24gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5jdXJyZW50U3RhcnQgPSAxO1xuICAgIHRoaXMuc2VsZWN0ZWQgPSB1bmRlZmluZWQ7XG4gIH1cbiAgYXN5bmMgaGFuZGxlTmV4dCgpIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIGxldCBuZXh0UGFnZSA9IFwiYXBwZW5kS2V5UGFpclNlbGVjdFwiO1xuICAgIGlmICh0aGlzLmlzU291cmNlRGF0YVNlbGVjdCkge1xuICAgICAgLy9hZnRlciBzZWxlY3RpbmcgbGF5ZXIgb2YgRmVhdHVyZSBMYXllclxuICAgICAgYWRkSXRlbVN0YXRlLnNvdXJjZURhdGFMYXllciA9IHRoaXMuc2VsZWN0ZWQ7XG4gICAgICBuZXh0UGFnZSA9IFwiYXBwZW5kVXBsb2FkXCI7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgYWRkSXRlbVN0YXRlLnNlbGVjdGVkU2hlZXQgPSB0aGlzLnNlbGVjdGVkLmV4Y2VsU2hlZXRJZCB8fCB0aGlzLnNlbGVjdGVkLmlkO1xuICAgICAgYXdhaXQgdGhpcy5hbmFseXplU2VsZWN0ZWRMYXllcigpOyAvL3VwZGF0ZXMgYWRkSXRlbVN0YXRlLmJhY2t1cExheWVyRmllbGRzIHdpdGggc2VsZWN0ZWQgbGF5ZXJcbiAgICAgIGFkZEl0ZW1TdGF0ZS5kYXRhTGF5ZXIgPVxuICAgICAgICAoX2IgPSAoX2EgPSBhZGRJdGVtU3RhdGUuYW5hbHl6ZVJlc3VsdHMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wdWJsaXNoUGFyYW1ldGVycykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmxheWVyc1thZGRJdGVtU3RhdGUuc2VsZWN0ZWRTaGVldF07XG4gICAgICBpZiAoKGFkZEl0ZW1TdGF0ZS50eXBlID09PSBcIk1pY3Jvc29mdCBFeGNlbFwiIHx8IGFkZEl0ZW1TdGF0ZS50eXBlID09PSBcIkNTVlwiKSAmJlxuICAgICAgICAoYWRkSXRlbVN0YXRlID09PSBudWxsIHx8IGFkZEl0ZW1TdGF0ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogYWRkSXRlbVN0YXRlLnNvdXJjZURhdGFMYXllci5nZW9tZXRyeVR5cGUpID09PSBcImVzcmlHZW9tZXRyeVBvaW50XCIgJiZcbiAgICAgICAgKGFkZEl0ZW1TdGF0ZSA9PT0gbnVsbCB8fCBhZGRJdGVtU3RhdGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGFkZEl0ZW1TdGF0ZS5zb3VyY2VEYXRhTGF5ZXIudHlwZSkgIT09IFwiVGFibGVcIikge1xuICAgICAgICBuZXh0UGFnZSA9IFwiY3N2TG9jYXRpb25GaWVsZHNcIjtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGFkZEl0ZW1TdGF0ZS5hZGRBcHBlbmRTZWxlY3RPcHRpb24gPT09IFwiYWRkXCIgJiZcbiAgICAgICAgKCFhZGRJdGVtU3RhdGUuYmFja3VwTGF5ZXJGaWVsZHMuc29tZSgoZmllbGQpID0+IGZpZWxkLnR5cGUgPT09IFwiZXNyaUZpZWxkVHlwZURhdGVcIikgfHxcbiAgICAgICAgICB0aGlzLmlzRW50ZXJwcmlzZSkpIHtcbiAgICAgICAgbmV4dFBhZ2UgPSBcImFwcGVuZE1hdGNoRmllbGRzXCI7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgbmV4dFBhZ2UgPSBcImFwcGVuZEtleVBhaXJTZWxlY3RcIjtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5uZXdJdGVtVG9nZ2xlTmF2aWdhdGlvbkVuYWJsZWQuZW1pdCh0cnVlKTtcbiAgICB0aGlzLm5ld0l0ZW1VcGRhdGVQYWdlLmVtaXQobmV4dFBhZ2UpO1xuICB9XG4gIHNlYXJjaEhhbmRsZXIoZSkge1xuICAgIHRoaXMuc2VhcmNoVGVybSA9IGUuZGV0YWlsO1xuICAgIHRoaXMuZmV0Y2hMYXllcnModGhpcy5zZWFyY2hUZXJtKTtcbiAgfVxuICBhc3luYyBoYW5kbGVQcmV2KGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBpZiAodGhpcy5sb2FkaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChhZGRJdGVtU3RhdGUuaWQpIHtcbiAgICAgIC8vcmVzZXR0aW5nIHVwbG9hZGVkIGRhdGEgZmlsZVxuICAgICAgYWRkSXRlbVN0YXRlLmRhdGFMYXllciA9IG51bGw7XG4gICAgfVxuICAgIHRoaXMubmV3SXRlbVByZXZQYWdlLmVtaXQoKTtcbiAgfVxuICBhc3luYyBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICBjb25zdCB7IHNvdXJjZURhdGFMYXllciwgZXhpc3RpbmdJdGVtLCBhZGRBcHBlbmRTZWxlY3RPcHRpb24gfSA9IGFkZEl0ZW1TdGF0ZTtcbiAgICB0aGlzLmxheWVycyA9IGV4aXN0aW5nSXRlbS5sYXllcnM7XG4gICAgdGhpcy5pc1NvdXJjZURhdGFTZWxlY3QgPSB0aGlzLmxheWVycy5sZW5ndGggPiAxICYmICFzb3VyY2VEYXRhTGF5ZXIgPyB0cnVlIDogZmFsc2U7XG4gICAgdGhpcy5pdGVtID0gZXhpc3RpbmdJdGVtO1xuICAgIHRoaXMuaTE4biA9IHVpU3RvcmVTdGF0ZS5pMThuLmFwcGVuZFNlbGVjdExheWVyO1xuICAgIHRoaXMuaXNFbnRlcnByaXNlID0gY29uZmlnU3RhdGUucG9ydGFsLmlzUG9ydGFsO1xuICAgIHRoaXMuaGVhZGVyID0gdGhpcy5pc1NvdXJjZURhdGFTZWxlY3RcbiAgICAgID8gdGhpcy5pMThuLmNob29zZVNlcnZpY2VMYXllclxuICAgICAgOiB0aGlzLmNyZWF0ZUhlYWRlclRleHQoYWRkSXRlbVN0YXRlLnR5cGUgPT09IFwiTWljcm9zb2Z0IEV4Y2VsXCIpO1xuICAgIGlmICghdGhpcy5pc1NvdXJjZURhdGFTZWxlY3QpIHtcbiAgICAgIHRoaXMuYWRkTGF5ZXJJbmZvKCk7XG4gICAgICBpZiAoIXRoaXMuc2VsZWN0ZWQgJiYgYWRkQXBwZW5kU2VsZWN0T3B0aW9uICE9PSBcInVwZGF0ZVwiKSB7XG4gICAgICAgIC8vaWYgbm8gY29tcGF0aWJsZSBsYXllcnMgYXJlIGZvdW5kLCB0aHJvdyBlcnJvci5cbiAgICAgICAgdGhpcy5oYW5kbGVFcnJvcih0aGlzLmkxOG4uc2FtZUdlb21ldHJ5V2FybmluZ1RpdGxlLCB0aGlzLmkxOG4uc2FtZUdlb21ldHJ5V2FybmluZ0Rlc2NyaXB0aW9uLCBcIndhcm5pbmdcIik7XG4gICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhpcy5kYXRhTGF5ZXJzID0gZXhpc3RpbmdJdGVtLmxheWVycztcbiAgICAgIHRoaXMuZmlsdGVyZWRMYXllcnMgPSBleGlzdGluZ0l0ZW0ubGF5ZXJzO1xuICAgICAgdGhpcy5zZWxlY3RlZCA9IHRoaXMuZmlsdGVyZWRMYXllcnNbMF07XG4gICAgfVxuICB9XG4gIGFzeW5jIGFuYWx5emVTZWxlY3RlZExheWVyKCkge1xuICAgIHRoaXMubmV3SXRlbVRvZ2dsZU5hdmlnYXRpb25FbmFibGVkLmVtaXQoZmFsc2UpO1xuICAgIHRoaXMubG9hZGluZyA9IHRydWU7XG4gICAgdGhpcy5sb2FkZXJNZXNzYWdlID0gdWlTdG9yZVN0YXRlLmkxOG4uYXBwZW5kVXBsb2FkLmFuYWx5emluZztcbiAgICBjb25zdCB7IHBvcnRhbCwgdXNlciwgY29uZmlnLCBsYW5nIH0gPSBjb25maWdTdGF0ZTtcbiAgICBjb25zdCB7IHR5cGUgfSA9IGFkZEl0ZW1TdGF0ZTtcbiAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBhbmFseXplKHtcbiAgICAgIGFuYWx5emVBcmdzOiB7IHR5cGU6IFwiaXRlbVwiLCBpdGVtaWQ6IGFkZEl0ZW1TdGF0ZS5pZCwgd29ya2Zsb3c6IFwiYXBwZW5kXCIgfSxcbiAgICAgIGl0ZW1BcmdzOiB7IGl0ZW1UeXBlOiB0eXBlIH0sXG4gICAgICBjb25maWdBcmdzOiB7IHBvcnRhbCwgdXNlciwgY29uZmlnLCBsYW5nIH0sXG4gICAgICBpbml0aWFsaXplOiB0cnVlXG4gICAgfSk7XG4gICAgaWYgKGVycm9yKSB7XG4gICAgICB0aGlzLmhhbmRsZUVycm9yKCk7XG4gICAgfVxuICB9XG4gIGZldGNoTGF5ZXJzKHNlYXJjaFRlcm0pIHtcbiAgICAvLyogU2VhcmNoIGxheWVycyBieSBuYW1lLlxuICAgIGNvbnN0IHRlcm0gPSBzZWFyY2hUZXJtLnRvTG93ZXJDYXNlKCk7XG4gICAgY29uc3QgZm91bmQgPSB0aGlzLmRhdGFMYXllcnMuZmlsdGVyKChsYXllcikgPT4ge1xuICAgICAgcmV0dXJuIGxheWVyLm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyh0ZXJtLCAwKTtcbiAgICB9KTtcbiAgICB0aGlzLmN1cnJlbnRTdGFydCA9IDE7XG4gICAgdGhpcy5maWx0ZXJlZExheWVycyA9IGZvdW5kO1xuICB9XG4gIGFkZExheWVySW5mbygpIHtcbiAgICB2YXIgX2E7XG4gICAgLy9oZWxwcyB0byBkZXRlcm1pbmUgd2hhdCBnZW9tZXRyeVR5cGUgaWNvbiB0byBkaXNwbGF5XG4gICAgY29uc3QgcHVibGlzaFBhcmFtZXRlcnMgPSAoKF9hID0gYWRkSXRlbVN0YXRlLmFuYWx5emVSZXN1bHRzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucHVibGlzaFBhcmFtZXRlcnMpXG4gICAgICA/IGFkZEl0ZW1TdGF0ZS5hbmFseXplUmVzdWx0cy5wdWJsaXNoUGFyYW1ldGVyc1xuICAgICAgOiB7fTtcbiAgICBjb25zdCBsYXllcnMgPSBwdWJsaXNoUGFyYW1ldGVycy5sYXllcnMgfHwgW3B1Ymxpc2hQYXJhbWV0ZXJzLmxheWVySW5mb10gfHwgW107XG4gICAgY29uc3QgZGF0YUxheWVycyA9IGxheWVycy5tYXAoKGxheWVySW5mbykgPT4ge1xuICAgICAgY29uc3QgbG9jYXRpb25UeXBlID0gbGF5ZXJJbmZvLmxvY2F0aW9uVHlwZSB8fCBwdWJsaXNoUGFyYW1ldGVycy5sb2NhdGlvblR5cGUgfHwgbnVsbDtcbiAgICAgIGxheWVySW5mby5nZW9tZXRyeVR5cGUgPVxuICAgICAgICBsYXllckluZm8uZ2VvbWV0cnlUeXBlIHx8XG4gICAgICAgICAgKGxvY2F0aW9uVHlwZSA9PT0gXCJjb29yZGluYXRlc1wiID8gXCJlc3JpR2VvbWV0cnlQb2ludFwiIDogbnVsbCkgfHxcbiAgICAgICAgICBudWxsO1xuICAgICAgbGF5ZXJJbmZvLmFkZHJlc3NGaWVsZHMgPVxuICAgICAgICBsYXllckluZm8uYWRkcmVzc0ZpZWxkcyB8fFxuICAgICAgICAgIHB1Ymxpc2hQYXJhbWV0ZXJzLmFkZHJlc3NGaWVsZHMgfHxcbiAgICAgICAgICAobG9jYXRpb25UeXBlID09PSBcImNvb3JkaW5hdGVzXCJcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICBsb25naXR1ZGVGaWVsZE5hbWU6IGxheWVySW5mby5sb25naXR1ZGVGaWVsZE5hbWUgfHwgcHVibGlzaFBhcmFtZXRlcnMubG9uZ2l0dWRlRmllbGROYW1lLFxuICAgICAgICAgICAgICBsYXRpdHVkZUZpZWxkTmFtZTogbGF5ZXJJbmZvLmxhdGl0dWRlRmllbGROYW1lIHx8IHB1Ymxpc2hQYXJhbWV0ZXJzLmxhdGl0dWRlRmllbGROYW1lXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IHt9KTtcbiAgICAgIHJldHVybiBsYXllckluZm87XG4gICAgfSk7XG4gICAgY29uc3QgdmFsaWRhdGVkTGF5ZXJzID0gdmFsaWRhdGVMYXllcnMoZGF0YUxheWVycywgdGhpcy5pdGVtLCB0aGlzLmxheWVycywgeyBwb3J0YWw6IGNvbmZpZ1N0YXRlLnBvcnRhbCB9LCB7IGFuYWx5emVSZXN1bHRzOiBhZGRJdGVtU3RhdGUuYW5hbHl6ZVJlc3VsdHMgfSk7XG4gICAgaWYgKHZhbGlkYXRlZExheWVycykge1xuICAgICAgdGhpcy5kYXRhTGF5ZXJzID0gdmFsaWRhdGVkTGF5ZXJzO1xuICAgICAgdGhpcy5maWx0ZXJlZExheWVycyA9IHZhbGlkYXRlZExheWVycztcbiAgICAgIHRoaXMuc2VsZWN0ZWQgPSB0aGlzLmZpbHRlcmVkTGF5ZXJzLmZpbHRlcigobGF5ZXIpID0+IHtcbiAgICAgICAgcmV0dXJuIGNoZWNrQ29tcGF0aWJsZUdlb21ldHJpZXMobGF5ZXIsIGFkZEl0ZW1TdGF0ZS5zb3VyY2VEYXRhTGF5ZXIsIGFkZEl0ZW1TdGF0ZS50eXBlKTtcbiAgICAgIH0pWzBdO1xuICAgIH1cbiAgfVxuICBhc3luYyBoYW5kbGVFcnJvcih0aXRsZSwgZGVzY3JpcHRpb24sIGVycm9yVHlwZSkge1xuICAgIHRoaXMubmV3SXRlbVRvZ2dsZU5hdmlnYXRpb25FbmFibGVkLmVtaXQodHJ1ZSk7XG4gICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgdGhpcy5lcnJvciA9IHtcbiAgICAgIC8vVG9kbzogUmVmaW5pbmcgZXJyb3IgbWVzc2FnZXMgaW4gcHJvZ3Jlc3NcbiAgICAgIHRpdGxlOiB0aXRsZSB8fCB1aVN0b3JlU3RhdGUuaTE4bi5wdWJsaXNoU2VsZWN0LmVycm9yLnRpdGxlLFxuICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uIHx8IHVpU3RvcmVTdGF0ZS5pMThuLnB1Ymxpc2hTZWxlY3QuZXJyb3IuZGVzY3JpcHRpb24sXG4gICAgICBraW5kOiBlcnJvclR5cGVcbiAgICB9O1xuICB9XG4gIHJlbmRlclBhZ2VOdW1iZXJUZXh0KCkge1xuICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5jdXJyZW50U3RhcnQ7XG4gICAgY29uc3QgdG90YWwgPSB0aGlzLmZpbHRlcmVkTGF5ZXJzLmxlbmd0aDtcbiAgICBjb25zdCBlbmQgPSBNYXRoLm1pbihzdGFydCArIHRoaXMuSVRFTVNfUEVSX1BBR0UgLSAxLCB0b3RhbCk7XG4gICAgcmV0dXJuIChoKFwic3BhblwiLCB7IGNsYXNzOiBcInBhZ2UtbnVtYmVyXCIgfSwgdGhpcy5pMThuLnBhZ2luYXRpb25IZWFkZXJcbiAgICAgIC5yZXBsYWNlKFwiJHtzdGFydH1cIiwgYCR7c3RhcnR9YClcbiAgICAgIC5yZXBsYWNlKFwiJHtlbmR9XCIsIGAke2VuZH1gKVxuICAgICAgLnJlcGxhY2UoXCIke3RvdGFsfVwiLCBgJHt0b3RhbH1gKSkpO1xuICB9XG4gIGNyZWF0ZUhlYWRlclRleHQoaXNFeGNlbCkge1xuICAgIHZhciBfYTtcbiAgICBjb25zdCBzdHJpbmdCYXNlID0gaXNFeGNlbCA/IHRoaXMuaTE4bi5jaG9vc2VTaGVldCA6IHRoaXMuaTE4bi5jaG9vc2VMYXllcjtcbiAgICByZXR1cm4gc3RyaW5nQmFzZVxuICAgICAgLnJlcGxhY2UoXCIke2ZlYXR1cmVMYXllck5hbWV9XCIsIHRoaXMuaXRlbS5sYXllcnMubGVuZ3RoID09PSAwID8gdGhpcy5pdGVtLnRpdGxlIDogKF9hID0gYWRkSXRlbVN0YXRlLnNvdXJjZURhdGFMYXllcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm5hbWUpXG4gICAgICAucmVwbGFjZShcIiR7dXBsb2FkZWRGaWxlfVwiLCBhZGRJdGVtU3RhdGUub3JpZ2luYWxGaWxlTmFtZSk7XG4gIH1cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgZXJyb3IsIGZpbHRlcmVkTGF5ZXJzLCBpMThuLCBjdXJyZW50U3RhcnQsIElURU1TX1BFUl9QQUdFLCBsb2FkaW5nLCBsb2FkZXJNZXNzYWdlLCBoZWFkZXIsIGlzU291cmNlRGF0YVNlbGVjdCB9ID0gdGhpcztcbiAgICBjb25zdCBsYXllcnNFeGlzdCA9IGZpbHRlcmVkTGF5ZXJzLmxlbmd0aCA+IDA7XG4gICAgY29uc3Qgc2hvd1BhZ2luYXRpb24gPSAoZmlsdGVyZWRMYXllcnMgPT09IG51bGwgfHwgZmlsdGVyZWRMYXllcnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZpbHRlcmVkTGF5ZXJzLmxlbmd0aCkgPiBJVEVNU19QRVJfUEFHRTtcbiAgICBjb25zdCBsYXllcnMgPSBmaWx0ZXJlZExheWVycyA9PT0gbnVsbCB8fCBmaWx0ZXJlZExheWVycyA9PT0gdm9pZCAwID8gdm9pZCAwIDogZmlsdGVyZWRMYXllcnMuc2xpY2UoY3VycmVudFN0YXJ0IC0gMSwgY3VycmVudFN0YXJ0ICsgSVRFTVNfUEVSX1BBR0UgLSAxKTtcbiAgICByZXR1cm4gKGgoSG9zdCwgbnVsbCwgaChcImFyY2dpcy1uZXctaXRlbS1sb2FkZXJcIiwgeyBjbGFzczogXCJsb2FkZXItb3ZlcmxheVwiLCB0eXBlOiBcImluZGV0ZXJtaW5hdGVcIiwgYWN0aXZlOiBsb2FkaW5nLCB0ZXh0OiBsb2FkZXJNZXNzYWdlIH0pLCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwiYXBwZW5kTGF5ZXJCcm93c2VyXCIgfSwgaChcImRpdlwiLCB7IGNsYXNzOiBcInNlYXJjaC1iYXJcIiB9LCBoKFwiY2FsY2l0ZS1pY29uXCIsIHsgaWNvbjogXCJzZWFyY2hcIiwgc2NhbGU6IFwic1wiLCBjbGFzczogXCJ4XCIgfSksIGgoXCJpbnB1dFwiLCB7IGNsYXNzOiBcImlucHV0XCIsIHZhbHVlOiB0aGlzLnNlYXJjaFRlcm0sIHBsYWNlaG9sZGVyOiB1aVN0b3JlU3RhdGUuaTE4bi5sYXllclNlYXJjaC5zZWFyY2gsIG9uSW5wdXQ6IChlKSA9PiB7XG4gICAgICAgIGNvbnN0IHRlcm0gPSBlLmN1cnJlbnRUYXJnZXQudmFsdWU7XG4gICAgICAgIHRoaXMuZmV0Y2hMYXllcnModGVybSk7XG4gICAgICB9IH0pKSwgaChcImRpdlwiLCB7IGNsYXNzOiBcImNhcmRzLXdyYXBwZXJcIiB9LCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwiaGVhZGluZ1wiIH0sIGhlYWRlciksIGxheWVyc0V4aXN0ID8gKGgoXCJjYWxjaXRlLWxhYmVsXCIsIG51bGwsIGgoXCJkaXZcIiwgeyBjbGFzczogXCJwYWdpbmF0aW9uLXJhbmdlXCIgfSwgc2hvd1BhZ2luYXRpb24gJiYgdGhpcy5yZW5kZXJQYWdlTnVtYmVyVGV4dCgpKSwgaChcImRpdlwiLCB7IGNsYXNzOiBcImxheWVyQ2FyZHNcIiB9LCAobGF5ZXJzIHx8IFtdKS5tYXAoKGRhdGFMYXllciwgaWR4KSA9PiAoaChcImFyY2dpcy1uZXctaXRlbS1hcHBlbmQtbGF5ZXItY2FyZFwiLCB7IGtleTogZGF0YUxheWVyLmV4Y2VsU2hlZXRJZCB8fCBpZHgsIGlzSW5jb21wYXRpYmxlR2VvbTogIWlzU291cmNlRGF0YVNlbGVjdCAmJlxuICAgICAgICBhZGRJdGVtU3RhdGUuYWRkQXBwZW5kU2VsZWN0T3B0aW9uICE9PSBcInVwZGF0ZVwiICYmXG4gICAgICAgICFjaGVja0NvbXBhdGlibGVHZW9tZXRyaWVzKGRhdGFMYXllciwgYWRkSXRlbVN0YXRlLnNvdXJjZURhdGFMYXllciwgYWRkSXRlbVN0YXRlLnR5cGUpLCBzZWxlY3RlZDogdGhpcy5zZWxlY3RlZCA9PT0gZGF0YUxheWVyLCBsYXllcjogZGF0YUxheWVyLCBvbkxheWVyQ2FyZFNlbGVjdDogKGUpID0+IHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZCA9IGUuZGV0YWlsLml0ZW07XG4gICAgICB9IH0pKSksIHNob3dQYWdpbmF0aW9uICYmIChoKFwiZGl2XCIsIHsgY2xhc3M6IFwicGFnaW5hdGlvblwiIH0sIGgoXCJjYWxjaXRlLXBhZ2luYXRpb25cIiwgeyBzY2FsZTogXCJtXCIsIHRvdGFsSXRlbXM6IHRoaXMuZmlsdGVyZWRMYXllcnMubGVuZ3RoLCBwYWdlU2l6ZTogSVRFTVNfUEVSX1BBR0UsIHN0YXJ0SXRlbTogdGhpcy5jdXJyZW50U3RhcnQsIG9uQ2FsY2l0ZVBhZ2luYXRpb25DaGFuZ2U6IChlKSA9PiB7XG4gICAgICAgIHRoaXMuY3VycmVudFN0YXJ0ID0gZS50YXJnZXQuc3RhcnRJdGVtO1xuICAgICAgfSB9KSkpKSkpIDogKGgoXCJkaXZcIiwgeyBjbGFzczogXCJuby1yZXN1bHRzLXN0cmluZ1wiIH0sIGkxOG4ubm9SZXN1bHRzKSkpLCBoKFwiYXJjZ2lzLW5ldy1pdGVtLWFsZXJ0XCIsIHsgaGVhZGluZzogZXJyb3IgPT09IG51bGwgfHwgZXJyb3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVycm9yLnRpdGxlLCBkZXNjcmlwdGlvbjogZXJyb3IgPT09IG51bGwgfHwgZXJyb3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVycm9yLmRlc2NyaXB0aW9uLCBsaW5rOiB7IGhyZWY6IGVycm9yID09PSBudWxsIHx8IGVycm9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlcnJvci5saW5rLCB0aXRsZTogZXJyb3IgPT09IG51bGwgfHwgZXJyb3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVycm9yLmxpbmtUZXh0IH0sIGFjdGl2ZTogISFlcnJvciwga2luZDogKGVycm9yID09PSBudWxsIHx8IGVycm9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlcnJvci5raW5kKSB8fCBcImRhbmdlclwiLCBvbkFsZXJ0RGlzbWlzczogKCkgPT4gKHRoaXMuZXJyb3IgPSBudWxsKSB9KSkpKTtcbiAgfVxuICBnZXQgZWwoKSB7IHJldHVybiBnZXRFbGVtZW50KHRoaXMpOyB9XG59O1xuQXJjZ2lzTmV3SXRlbVBhZ2VzQXBwZW5kU2VsZWN0TGF5ZXIuc3R5bGUgPSBhcmNnaXNOZXdJdGVtUGFnZXNBcHBlbmRTZWxlY3RMYXllckNzcztcblxuZXhwb3J0IHsgQXJjZ2lzTmV3SXRlbVBhZ2VzQXBwZW5kU2VsZWN0TGF5ZXIgYXMgYXJjZ2lzX25ld19pdGVtX3BhZ2VzX2FwcGVuZF9zZWxlY3RfbGF5ZXIgfTtcbiIsIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIHYzLjAuOTlcbiAqL1xuZnVuY3Rpb24gdmVyaWZ5R2VvbWV0cmllcyhhcmdzKSB7XG4gIHZhciBfYSwgX2I7XG4gIGNvbnN0IHsgZGF0YUxheWVyLCB0eXBlLCBzb3VyY2VEYXRhTGF5ZXIgfSA9IGFyZ3M7XG4gIGNvbnN0IGRhdGFMYXllckdlb21ldHJ5ID0gKF9hID0gZGF0YUxheWVyID09PSBudWxsIHx8IGRhdGFMYXllciA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGF0YUxheWVyLmdlb21ldHJ5VHlwZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogKF9iID0gZGF0YUxheWVyID09PSBudWxsIHx8IGRhdGFMYXllciA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGF0YUxheWVyLmxheWVySW5mbykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmdlb21ldHJ5VHlwZTtcbiAgaWYgKHR5cGUgPT09IFwiTWljcm9zb2Z0IEV4Y2VsXCIgfHwgdHlwZSA9PT0gXCJDU1ZcIikge1xuICAgIGlmICgoKGRhdGFMYXllci5sb2NhdGlvblR5cGUgPT09IFwiYWRkcmVzc1wiICYmIGRhdGFMYXllci5hZGRyZXNzRmllbGRzKSB8fCBkYXRhTGF5ZXIubG9jYXRpb25UeXBlID09PSBcImNvb3JkaW5hdGVzXCIpICYmIC8vY2hlY2sgbG9jYXRpb24gdHlwZSBpcyBhZGRyZXNzIGluIGNhc2UgXCJub25lXCIgaXMgc2VsZWN0ZWQgYW5kIGFkZHJlc3NGaWVsZHMgbGluZ2VyXG4gICAgICAoc291cmNlRGF0YUxheWVyID09PSBudWxsIHx8IHNvdXJjZURhdGFMYXllciA9PT0gdm9pZCAwID8gdm9pZCAwIDogc291cmNlRGF0YUxheWVyLmdlb21ldHJ5VHlwZSkgPT09IFwiZXNyaUdlb21ldHJ5UG9pbnRcIikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGVsc2UgaWYgKCFkYXRhTGF5ZXJHZW9tZXRyeSB8fCBkYXRhTGF5ZXIubG9jYXRpb25UeXBlID09PSBcIm5vbmVcIiB8fCAoc291cmNlRGF0YUxheWVyID09PSBudWxsIHx8IHNvdXJjZURhdGFMYXllciA9PT0gdm9pZCAwID8gdm9pZCAwIDogc291cmNlRGF0YUxheWVyLnR5cGUpID09PSBcIlRhYmxlXCIpIHtcbiAgICAgIHJldHVybiB7IHRpdGxlOiBcIm5vR2VvbWV0cnlNYXRjaFRpdGxlXCIsIGRlc2NyaXB0aW9uOiBcIm5vR2VvbWV0cnlUYWJsZU1lc3NhZ2VcIiB9O1xuICAgIH1cbiAgICBlbHNlIGlmICgoc291cmNlRGF0YUxheWVyID09PSBudWxsIHx8IHNvdXJjZURhdGFMYXllciA9PT0gdm9pZCAwID8gdm9pZCAwIDogc291cmNlRGF0YUxheWVyLmdlb21ldHJ5VHlwZSkgIT09IGRhdGFMYXllckdlb21ldHJ5KSB7XG4gICAgICByZXR1cm4geyB0aXRsZTogXCJub0dlb21ldHJ5TWF0Y2hUaXRsZVwiLCBkZXNjcmlwdGlvbjogXCJub0dlb21ldHJ5TWF0Y2hNZXNzYWdlXCIgfTtcbiAgICB9XG4gIH1cbiAgZWxzZSB7XG4gICAgaWYgKChzb3VyY2VEYXRhTGF5ZXIgPT09IG51bGwgfHwgc291cmNlRGF0YUxheWVyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzb3VyY2VEYXRhTGF5ZXIuZ2VvbWV0cnlUeXBlKSAhPT0gKGRhdGFMYXllciA9PT0gbnVsbCB8fCBkYXRhTGF5ZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRhdGFMYXllci5nZW9tZXRyeVR5cGUpKSB7XG4gICAgICByZXR1cm4geyB0aXRsZTogXCJub0dlb21ldHJ5TWF0Y2hUaXRsZVwiLCBkZXNjcmlwdGlvbjogXCJub0dlb21ldHJ5TWF0Y2hNZXNzYWdlXCIgfTtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIGNoZWNrQ29tcGF0aWJsZUdlb21ldHJpZXMoZGF0YUxheWVyLCBzb3VyY2VEYXRhTGF5ZXIsIHR5cGUpIHtcbiAgaWYgKHR5cGUgPT09IFwiTWljcm9zb2Z0IEV4Y2VsXCIgfHwgdHlwZSA9PT0gXCJDU1ZcIikge1xuICAgIGlmICgoKHNvdXJjZURhdGFMYXllciA9PT0gbnVsbCB8fCBzb3VyY2VEYXRhTGF5ZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNvdXJjZURhdGFMYXllci5nZW9tZXRyeVR5cGUpID09PSBcImVzcmlHZW9tZXRyeVBvaW50XCIgfHwgKHNvdXJjZURhdGFMYXllciA9PT0gbnVsbCB8fCBzb3VyY2VEYXRhTGF5ZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNvdXJjZURhdGFMYXllci50eXBlKSA9PT0gXCJUYWJsZVwiKSAmJlxuICAgICAgKGRhdGFMYXllciA9PT0gbnVsbCB8fCBkYXRhTGF5ZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRhdGFMYXllci5sb2NhdGlvblR5cGUpID09PSBcIm5vbmVcIikge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICgoc291cmNlRGF0YUxheWVyID09PSBudWxsIHx8IHNvdXJjZURhdGFMYXllciA9PT0gdm9pZCAwID8gdm9pZCAwIDogc291cmNlRGF0YUxheWVyLmdlb21ldHJ5VHlwZSkgPT09IFwiZXNyaUdlb21ldHJ5UG9pbnRcIikge1xuICAgICAgcmV0dXJuICEhZGF0YUxheWVyLmFkZHJlc3NGaWVsZHMgfHwgZGF0YUxheWVyLmxvY2F0aW9uVHlwZSAhPT0gXCJub25lXCI7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBlbHNlIHtcbiAgICByZXR1cm4gKHNvdXJjZURhdGFMYXllciA9PT0gbnVsbCB8fCBzb3VyY2VEYXRhTGF5ZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNvdXJjZURhdGFMYXllci50eXBlKSA9PT0gXCJUYWJsZVwiIHx8IChkYXRhTGF5ZXIgPT09IG51bGwgfHwgZGF0YUxheWVyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkYXRhTGF5ZXIuZ2VvbWV0cnlUeXBlKSA9PT0gKHNvdXJjZURhdGFMYXllciA9PT0gbnVsbCB8fCBzb3VyY2VEYXRhTGF5ZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNvdXJjZURhdGFMYXllci5nZW9tZXRyeVR5cGUpO1xuICB9XG59XG5cbmV4cG9ydCB7IGNoZWNrQ29tcGF0aWJsZUdlb21ldHJpZXMgYXMgYywgdmVyaWZ5R2VvbWV0cmllcyBhcyB2IH07XG4iLCIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiB2My4wLjk5XG4gKi9cbmltcG9ydCB7IGMgYXMgY3JlYXRlU3RvcmUgfSBmcm9tICcuL2luZGV4LTgxZDU0OGI3LmpzJztcblxuY29uc3QgdWlTdG9yZSA9IGNyZWF0ZVN0b3JlKHtcbiAgbmV4dFRleHQ6IFwibmV4dFwiLFxuICB3b3JrZmxvdzogXCJjb250ZW50XCIsXG4gIHNjYWxlOiBcIm1cIixcbiAgZGlzYWJsZVNjcm9sbDogZmFsc2UsXG4gIGZlYXR1cmVGbGFnczogeyB0aWxlTGF5ZXIzZFRpbGVzOiBmYWxzZSB9XG59KTtcbmNvbnN0IHVpU3RvcmVTdGF0ZSA9IHVpU3RvcmUuc3RhdGU7XG5cbmV4cG9ydCB7IHVpU3RvcmUgYXMgYSwgdWlTdG9yZVN0YXRlIGFzIHUgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==