"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_analyz-f23eb5"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/analyze-a3711367.js":
/*!*************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/analyze-a3711367.js ***!
  \*************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ analyze),
/* harmony export */   s: () => (/* binding */ setStandardizedFieldNames)
/* harmony export */ });
/* harmony import */ var _basic_ee9c674c_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./basic-ee9c674c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/basic-ee9c674c.js");
/* harmony import */ var _commonEnums_f98a323c_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./commonEnums-f98a323c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/commonEnums-f98a323c.js");
/* harmony import */ var _loadModules_aaf30bd6_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./loadModules-aaf30bd6.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/loadModules-aaf30bd6.js");
/* harmony import */ var _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./add-item-97d577a9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/add-item-97d577a9.js");
/* harmony import */ var _append_58a7e7ab_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./append-58a7e7ab.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/append-58a7e7ab.js");
/* harmony import */ var _geocode_7eb7c0df_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./geocode-7eb7c0df.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/geocode-7eb7c0df.js");
/* harmony import */ var _privileges_35590eb4_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./privileges-35590eb4.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/privileges-35590eb4.js");
/* harmony import */ var _portal_79caaeff_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./portal-79caaeff.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/portal-79caaeff.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */









/**
 * update fields property on for analyzeResults to reflect user changes to fields (e.g. selection, changes to displayName, etc.)
 */
function updateFields(response) {
  return updateFieldsInner(response, _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a);
}
function updateFieldsInner(response, storeState) {
  var _a, _b, _c, _d;
  const { selectedFields, type, selectedSheet } = storeState;
  if (!selectedFields) {
    return response;
  }
  const publishParameters = response.publishParameters;
  let layerInfo = publishParameters === null || publishParameters === void 0 ? void 0 : publishParameters.layerInfo;
  switch (type) {
    case "Microsoft Excel":
      layerInfo = (_b = (_a = publishParameters === null || publishParameters === void 0 ? void 0 : publishParameters.layers) === null || _a === void 0 ? void 0 : _a[selectedSheet]) !== null && _b !== void 0 ? _b : (_c = publishParameters === null || publishParameters === void 0 ? void 0 : publishParameters.layers) === null || _c === void 0 ? void 0 : _c[0];
      break;
    case "GeoJson":
      layerInfo = (_d = publishParameters === null || publishParameters === void 0 ? void 0 : publishParameters.layers) === null || _d === void 0 ? void 0 : _d[0];
      break;
  }
  layerInfo.fields = layerInfo.fields.reduce((fields, field) => {
    const matchingField = selectedFields[field.name];
    if (matchingField) {
      field.alias = matchingField.alias;
      fields.push(field);
    }
    return fields;
  }, []);
  return response;
}
/**
 * Update locationType property on all fields based on analyze response
 */
function updateLocationFields(response) {
  var _a, _b, _c, _d, _e, _f;
  const { selectedSheet } = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a;
  const { publishParameters } = response;
  const layer = (_d = (_b = (_a = publishParameters.layers) === null || _a === void 0 ? void 0 : _a[selectedSheet]) !== null && _b !== void 0 ? _b : (_c = publishParameters.layers) === null || _c === void 0 ? void 0 : _c[0]) !== null && _d !== void 0 ? _d : publishParameters.layerInfo;
  if (!layer) {
    return response;
  }
  const addressFields = (_f = (_e = layer.addressFields) !== null && _e !== void 0 ? _e : publishParameters.addressFields) !== null && _f !== void 0 ? _f : {};
  const addressFieldsHash = Object.keys(addressFields).reduce((acc, key) => (Object.assign(Object.assign({}, acc), { [addressFields[key]]: key })), {});
  layer.fields = layer.fields.map((field) => {
    return Object.assign(Object.assign({}, field), { locationType: getLocationType(field, layer, publishParameters, addressFieldsHash) });
  });
  // keep location types of selected fields in sync as well (WebGIS/arcgis-portal-app#37037)
  if (_add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.selectedFields) {
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.selectedFields = Object.keys(_add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.selectedFields).reduce((acc, key) => {
      const field = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.selectedFields[key];
      acc[key] = Object.assign(Object.assign({}, field), { locationType: getLocationType(field, layer, publishParameters, addressFieldsHash) });
      return acc;
    }, {});
  }
  return response;
}
function getLocationType(field, layer, publishParameters, addressFields) {
  var _a, _b, _c, _d;
  const latitudeFieldName = (_a = layer.latitudeFieldName) !== null && _a !== void 0 ? _a : publishParameters.latitudeFieldName;
  const longitudeFieldName = (_b = layer.longitudeFieldName) !== null && _b !== void 0 ? _b : publishParameters.longitudeFieldName;
  const coordinateFieldName = (_c = layer.coordinateFieldName) !== null && _c !== void 0 ? _c : publishParameters.coordinateFieldName;
  const coordinateFieldType = (_d = layer.coordinateFieldType) !== null && _d !== void 0 ? _d : publishParameters.coordinateFieldType;
  if (addressFields[field.name]) {
    return addressFields[field.name];
  }
  if (field.name === coordinateFieldName) {
    return coordinateFieldType === null || coordinateFieldType === void 0 ? void 0 : coordinateFieldType.toLowerCase();
  }
  if (field.name === latitudeFieldName) {
    return "latitude";
  }
  if (field.name === longitudeFieldName) {
    return "longitude";
  }
  return field.locationType || "unknown";
}

/**
 * Find the cost data for geocoding a given amount of records
 */
function getGeocodingCost(geocodeCount) {
  return (0,_portal_79caaeff_js__WEBPACK_IMPORTED_MODULE_7__.r)(`${(0,_portal_79caaeff_js__WEBPACK_IMPORTED_MODULE_7__.g)()}portals/self/cost`, { geocodeCount });
}

/**
 * Update country codes list
 * based on geocoder's proxyFilter and sourceCountry list
 */
async function getCountryCodes(geocodeServiceUrl, restBaseUrl, geocodeServers) {
  const geocoder = (0,_geocode_7eb7c0df_js__WEBPACK_IMPORTED_MODULE_5__.f)(geocodeServiceUrl, geocodeServers);
  let filter;
  if (geocoder === null || geocoder === void 0 ? void 0 : geocoder.itemId) {
    const url = `${restBaseUrl}/content/items/${geocoder.itemId}`;
    const response = await (0,_portal_79caaeff_js__WEBPACK_IMPORTED_MODULE_7__.r)(url);
    const sourceCountry = response.proxyFilter && JSON.parse(response.proxyFilter).sourceCountry;
    if (sourceCountry) {
      filter = sourceCountry.split(",").map((country) => country.toLowerCase());
      filter.push("world");
    }
  }
  const options = Object.keys(_geocode_7eb7c0df_js__WEBPACK_IMPORTED_MODULE_5__.c)
    .map((key) => ({ label: _geocode_7eb7c0df_js__WEBPACK_IMPORTED_MODULE_5__.c[key], value: key }))
    .filter(({ value }) => !filter || filter.includes(value.toLowerCase()))
    .sort((a, b) => {
    if (a.label < b.label) {
      return -1;
    }
    if (a.label > b.label) {
      return 1;
    }
    return 0;
  });
  return options;
}

async function analyze({ analyzeArgs, configArgs, itemArgs, initialize }) {
  var _a, _b;
  const { config, lang, portal, user } = configArgs;
  const { itemType } = itemArgs;
  if (initialize && (0,_privileges_35590eb4_js__WEBPACK_IMPORTED_MODULE_6__.m)(user)) {
    const info = (0,_geocode_7eb7c0df_js__WEBPACK_IMPORTED_MODULE_5__.b)((_b = (_a = portal.helperServices) === null || _a === void 0 ? void 0 : _a.geocode) !== null && _b !== void 0 ? _b : [], user, portal.isPortal);
    if (info) {
      _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.allowGeocode = info.allowGeocode;
      _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.isAgoWorldGeocodeServer = info.isAgoWorldGeocodeServer;
      _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.isServiceProxyAgoWorldGeocodeServer = info.isServiceProxyAgoWorldGeocodeServer; // ! careful for reset, use default
      _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.isWorldGeocodeServer = info.isWorldGeocodeServer; // ! careful for reset, use default
      _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.geocodeServers = info.geocodeServers; // ! careful for reset, use default
      _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.geocodeServiceUrl = info.geocodeServiceUrl; // ! careful for reset, use default
    }
    if (_add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.geocodeServers) {
      _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.sourceCountry = (0,_geocode_7eb7c0df_js__WEBPACK_IMPORTED_MODULE_5__.d)(user.region, portal.ipCntryCode); // ! careful for reset, use default
      try {
        _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.countryCodes = await getCountryCodes(_add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.geocodeServiceUrl, config.restBaseUrl, _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.geocodeServers);
        _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.standardizedFieldNames = await getFieldNamesFromGeocoder(_add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.geocodeServiceUrl, lang);
      }
      catch (error) {
        console.error("Geocoder unavailable", error);
        return { error: { code: "unavailableGeocoder" } };
      }
    }
  }
  const { locationType, // ! careful for reset, use default --- handleAnalyzeResponse
  isWorldGeocodeServer, // ! careful for reset, use default
  geocodeServiceUrl, // ! careful for reset, use default
  geocodeServers, // ! careful for reset, use default
  isServiceProxyAgoWorldGeocodeServer, // ! careful for reset, use default
  sourceCountry, // ! careful for reset, use default
  analyzeResults, // ! careful for reset, use default --- handleAnalyzeResponse
  analyzedLocationTypes // ! careful for reset, use default --- pushed below
   } = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a;
  const url = `${config.restBaseUrl}content/features/analyze`;
  const { isPortal } = portal;
  let analyzeSelectedLayer = false;
  let filetype;
  if ((analyzeArgs === null || analyzeArgs === void 0 ? void 0 : analyzeArgs.type) === "item" && analyzeArgs.workflow === "append") {
    filetype = _append_58a7e7ab_js__WEBPACK_IMPORTED_MODULE_4__.a[itemType];
    analyzeSelectedLayer = true;
  }
  else {
    filetype = itemType === "Microsoft Excel" ? "excel" : itemType.toLowerCase();
  }
  let params = {
    filetype
  };
  switch (analyzeArgs === null || analyzeArgs === void 0 ? void 0 : analyzeArgs.type) {
    case "url":
      params.sourceUrl = analyzeArgs.sourceUrl;
      break;
    case "item":
      params.itemid = analyzeArgs.itemid;
      break;
    case "file":
      params = new FormData();
      params.append("file", analyzeArgs.file);
      params.append("filetype", filetype);
      break;
    case "text":
      params.text = analyzeArgs.text;
      break;
  }
  const analyzeParameters = {
    enableGlobalGeocoding: true,
    sourceLocale: lang,
    locationType,
    returnEstimatedRowCount: true,
    returnSize: true
  };
  if ((isPortal && geocodeServiceUrl) || !isPortal) {
    if (isPortal || (!isPortal && (geocodeServers === null || geocodeServers === void 0 ? void 0 : geocodeServers.length))) {
      analyzeParameters.geocodeServiceUrl = encodeURI(geocodeServiceUrl);
    }
    if (analyzeResults || isPortal) {
      const analyzedValue = locationType === "address" ? "addressTypes" : "locationTypes";
      if (analyzedLocationTypes.indexOf(analyzedValue) === -1) {
        analyzedLocationTypes.push(analyzedValue);
      }
      analyzeParameters.locationType = locationType || "coordinates";
    }
    if ((!portal.isPortal && isWorldGeocodeServer) || (portal.isPortal && isServiceProxyAgoWorldGeocodeServer)) {
      analyzeParameters.sourceCountryHint = analyzeResults ? "" : sourceCountry.toLowerCase();
      analyzeParameters.sourceCountry = analyzeResults ? sourceCountry.toLowerCase() : "";
    }
    const stringifiedAnalyzeParameters = JSON.stringify(analyzeParameters);
    if (params instanceof FormData) {
      params.append("analyzeParameters", stringifiedAnalyzeParameters);
    }
    else {
      params.analyzeParameters = stringifiedAnalyzeParameters;
    }
  }
  try {
    const response = await (params instanceof FormData
      ? (0,_portal_79caaeff_js__WEBPACK_IMPORTED_MODULE_7__.e)(url, params, {}, "post")
      : (0,_portal_79caaeff_js__WEBPACK_IMPORTED_MODULE_7__.r)(url, params, {}, "post"));
    handleAnalyzeResponse({ response, initialize, analyzeSelectedLayer, geocodeServiceUrl, lang, portal, itemType });
    return {};
  }
  catch (error) {
    console.error(error);
    const errorMessage = (error === null || error === void 0 ? void 0 : error.message) || error || "";
    switch (true) {
      case errorMessage.includes("specify data to be analyzed"):
        return { error: { code: "emptyFile" } };
      case errorMessage.includes("Duplicate field names are not allowed"):
        return { error: { code: "duplicateFieldNames" } };
      case errorMessage.toLowerCase().includes("timeout"):
        return { error: { code: "timeout" } };
    }
    return { error: { code: "unhandledError" } };
  }
}
async function handleAnalyzeResponse({ response, analyzeSelectedLayer, initialize, geocodeServiceUrl, lang, portal, itemType }) {
  var _a, _b, _c, _d, _e, _f;
  const geocodeConfig = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a;
  const isPortal = portal.isPortal;
  const isExcel = itemType === "Microsoft Excel";
  const publishParameters = isExcel
    ? (_b = (_a = response.publishParameters.layers) === null || _a === void 0 ? void 0 : _a[geocodeConfig.selectedSheet]) !== null && _b !== void 0 ? _b : (_c = response.publishParameters.layers) === null || _c === void 0 ? void 0 : _c[0]
    : response.publishParameters;
  let sourceCountry;
  if ((!isPortal && geocodeConfig.isWorldGeocodeServer) ||
    (isPortal && geocodeConfig.isServiceProxyAgoWorldGeocodeServer)) {
    const isWorldGeocodeServer = (0,_basic_ee9c674c_js__WEBPACK_IMPORTED_MODULE_0__.a)(publishParameters.sourceCountry);
    sourceCountry = geocodeConfig.sourceCountry || publishParameters.sourceCountry || "world";
    sourceCountry = sourceCountry === "wo" ? "world" : sourceCountry;
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.isWorldGeocodeServer = isWorldGeocodeServer;
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.sourceCountry = sourceCountry;
  }
  if (!geocodeConfig.allowGeocode && publishParameters.locationType === "address") {
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.locationType = "none";
  }
  updateLocationFields(response);
  const updatedResponse = updateFields(response);
  _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.analyzeResults = updatedResponse;
  if ((_d = updatedResponse === null || updatedResponse === void 0 ? void 0 : updatedResponse.publishParameters) === null || _d === void 0 ? void 0 : _d.layers) {
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.excelLayers = (_e = updatedResponse === null || updatedResponse === void 0 ? void 0 : updatedResponse.publishParameters) === null || _e === void 0 ? void 0 : _e.layers;
  }
  const layerInfo = (0,_geocode_7eb7c0df_js__WEBPACK_IMPORTED_MODULE_5__.a)(response, analyzeSelectedLayer);
  if (initialize) {
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.backupLayerFields = JSON.parse(JSON.stringify(layerInfo.fields));
  }
  else {
    // Fall back to world geocoder if no field names found
    !!publishParameters.standardizedFieldNames
      ? (_add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.standardizedFieldNames = publishParameters.standardizedFieldNames)
      : setStandardizedFieldNames({
        lang,
        geocodeServiceUrl,
        // ! We set the location type above so we can't just use the destructed value
        // TODO: refactor that into a local variable
        locationType: _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.locationType
      });
  }
  // figure out how much this action will cost
  if (_add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.locationType === "address" ||
    layerInfo.locationType === "address" ||
    ((_f = response === null || response === void 0 ? void 0 : response.publishParameters) === null || _f === void 0 ? void 0 : _f.locationType) === "address") {
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.geocodeCost = await getGeocodingCost(layerInfo.estimatedRecordCount);
  }
  else {
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.geocodeCost = null;
  }
}
async function setStandardizedFieldNames({ lang, geocodeServiceUrl, locationType }) {
  if (locationType === "address") {
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_3__.a.standardizedFieldNames = await getFieldNamesFromGeocoder(geocodeServiceUrl, lang);
  }
}
async function getFieldNamesFromGeocoder(geocodeServiceUrl, lang) {
  const geocoderResponse = await (0,_portal_79caaeff_js__WEBPACK_IMPORTED_MODULE_7__.r)(geocodeServiceUrl, {}, { addTokenManually: false });
  return geocoderResponse.addressFields.reduce((acc, field) => {
    var _a;
    if (field.name !== "unknown") {
      acc[field.name] = ((_a = field === null || field === void 0 ? void 0 : field.localizedNames) === null || _a === void 0 ? void 0 : _a[`${lang}`]) || field.alias || field.name;
    }
    return acc;
  }, {});
}




/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/append-58a7e7ab.js":
/*!************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/append-58a7e7ab.js ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ AppendOverwriteCloudPublishTypes),
/* harmony export */   N: () => (/* binding */ NONE_VALUE),
/* harmony export */   a: () => (/* binding */ appendFileTypes),
/* harmony export */   b: () => (/* binding */ AppendOverwritePublishTypes),
/* harmony export */   c: () => (/* binding */ appendExtensionsForEnterprise),
/* harmony export */   d: () => (/* binding */ appendExtensions),
/* harmony export */   u: () => (/* binding */ uidFields)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */
const uidFields = ["esriFieldTypeOID", "esriFieldTypeGlobalID"];
const NONE_VALUE = "<None>";
const AppendOverwritePublishTypes = {
  "file geodatabase": "filegeodatabase",
  shapefile: "shapefile",
  geojson: "geojson",
  csv: "CSV",
  "microsoft excel": "excel",
  geopackage: "geoPackage"
};
const appendFileTypes = {
  Shapefile: "shapefile",
  "File Geodatabase": "fileGeodatabase",
  CSV: "csv",
  "Microsoft Excel": "excel",
  GeoJson: "geojson",
  GeoPackage: "geoPackage"
};
const AppendOverwriteCloudPublishTypes = {
  csv: "CSV",
  excel: "Microsoft Excel",
  shapefile: "Shapefile",
  fgdb: "File Geodatabase",
  geojson: "GeoJson",
  googlesheets: "Microsoft Excel"
};
const appendExtensions = ["zip", "csv", "xls", "xlsx", "geojson", "gpkg", "json"];
const appendExtensionsForEnterprise = ["zip", "csv", "xls", "xlsx"];




/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/basic-ee9c674c.js":
/*!***********************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/basic-ee9c674c.js ***!
  \***********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ isDefined),
/* harmony export */   i: () => (/* binding */ isInNode),
/* harmony export */   s: () => (/* binding */ scales)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */
var scales;
(function (scales) {
  scales["SMALL"] = "s";
  scales["MEDIUM"] = "m";
  scales["LARGE"] = "l";
})(scales || (scales = {}));
/**
 * Returns true if the value is defined
 * @param value - value to check
 */
function isDefined(value) {
  return value !== undefined && value !== null;
}
/**
 * Returns true if node has nodeName or is contained in a parent node with nodeName
 * @param node
 * @param nodeName
 */
function isInNode(node, nodeName) {
  while (node) {
    if (node.nodeName === nodeName.toUpperCase()) {
      return true;
    }
    node = node.parentElement;
  }
  return false;
}




/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/commonEnums-f98a323c.js":
/*!*****************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/commonEnums-f98a323c.js ***!
  \*****************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   L: () => (/* binding */ LastSortyBy),
/* harmony export */   a: () => (/* binding */ fieldTypesEnum),
/* harmony export */   f: () => (/* binding */ fieldInfoPrefixEnum),
/* harmony export */   i: () => (/* binding */ imageComponentInputTypesEnum),
/* harmony export */   l: () => (/* binding */ layerDisplayTypeEnum),
/* harmony export */   s: () => (/* binding */ serviceTypeEnum)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */
var imageComponentInputTypesEnum;
(function (imageComponentInputTypesEnum) {
  imageComponentInputTypesEnum["sourceUrl"] = "sourceUrl";
  imageComponentInputTypesEnum["title"] = "title";
  imageComponentInputTypesEnum["caption"] = "caption";
  imageComponentInputTypesEnum["linkUrl"] = "linkUrl";
  imageComponentInputTypesEnum["altText"] = "altText";
})(imageComponentInputTypesEnum || (imageComponentInputTypesEnum = {}));
var fieldInfoPrefixEnum;
(function (fieldInfoPrefixEnum) {
  fieldInfoPrefixEnum["expression"] = "expression/";
  fieldInfoPrefixEnum["relationship"] = "relationships/";
  fieldInfoPrefixEnum["raster"] = "Raster.";
})(fieldInfoPrefixEnum || (fieldInfoPrefixEnum = {}));
var layerDisplayTypeEnum;
(function (layerDisplayTypeEnum) {
  layerDisplayTypeEnum["feature"] = "feature";
  layerDisplayTypeEnum["cluster"] = "cluster";
  layerDisplayTypeEnum["mapNotes"] = "mapNotes";
})(layerDisplayTypeEnum || (layerDisplayTypeEnum = {}));
var serviceTypeEnum;
(function (serviceTypeEnum) {
  serviceTypeEnum["feature"] = "feature";
  serviceTypeEnum["mapImage"] = "map-image";
  serviceTypeEnum["scene"] = "scene";
  serviceTypeEnum["ogcFeature"] = "ogc-feature";
  serviceTypeEnum["imagery"] = "imagery";
  serviceTypeEnum["wfs"] = "wfs";
  serviceTypeEnum["wms"] = "wms";
  serviceTypeEnum["csv"] = "csv";
  serviceTypeEnum["geojson"] = "geojson";
  serviceTypeEnum["stream"] = "stream";
  serviceTypeEnum["imageryTile"] = "imagery-tile";
  serviceTypeEnum["tile"] = "tile";
  serviceTypeEnum["subtype"] = "subtype";
})(serviceTypeEnum || (serviceTypeEnum = {}));
// https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-support-Field.html#type
var fieldTypesEnum;
(function (fieldTypesEnum) {
  fieldTypesEnum["integer"] = "integer";
  fieldTypesEnum["smallInteger"] = "small-integer";
  fieldTypesEnum["bigInteger"] = "big-integer";
  fieldTypesEnum["single"] = "single";
  fieldTypesEnum["double"] = "double";
  fieldTypesEnum["long"] = "long";
  fieldTypesEnum["string"] = "string";
  fieldTypesEnum["date"] = "date";
  fieldTypesEnum["dateOnly"] = "date-only";
  fieldTypesEnum["timeOnly"] = "time-only";
  fieldTypesEnum["timestampOffset"] = "timestamp-offset";
  fieldTypesEnum["oid"] = "oid";
  fieldTypesEnum["guid"] = "guid";
  fieldTypesEnum["globalId"] = "global-id";
  fieldTypesEnum["number"] = "number"; // for arcade
})(fieldTypesEnum || (fieldTypesEnum = {}));
var LastSortyBy;
(function (LastSortyBy) {
  LastSortyBy["default"] = "default";
  LastSortyBy["display"] = "display";
  LastSortyBy["type"] = "type";
  LastSortyBy["field"] = "field";
})(LastSortyBy || (LastSortyBy = {}));




/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXBwLWNvbXBvbmVudHNfZGlzdF9lc21fYW5hbHl6LWYyM2ViNS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDcUQ7QUFDbEI7QUFDQTtBQUN3QjtBQUNDO0FBQ3lGO0FBQzFGO0FBQ2dDOztBQUUzRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxvREFBWTtBQUNqRDtBQUNBO0FBQ0E7QUFDQSxVQUFVLHNDQUFzQztBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxnQkFBZ0IsRUFBRSxvREFBWTtBQUN4QyxVQUFVLG9CQUFvQjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkdBQTJHLFVBQVUsMkJBQTJCLE1BQU07QUFDdEo7QUFDQSx5Q0FBeUMsWUFBWSxtRkFBbUY7QUFDeEksR0FBRztBQUNIO0FBQ0EsTUFBTSxvREFBWTtBQUNsQixJQUFJLG9EQUFZLDhCQUE4QixvREFBWTtBQUMxRCxvQkFBb0Isb0RBQVk7QUFDaEMsK0NBQStDLFlBQVksbUZBQW1GO0FBQzlJO0FBQ0EsS0FBSyxJQUFJO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsc0RBQU8sSUFBSSxzREFBYyxHQUFHLHNCQUFzQixjQUFjO0FBQ3pFOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FB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QUMsa0NBQWtDOztBQUU0SCIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FwcC1jb21wb25lbnRzL2Rpc3QvZXNtL2FuYWx5emUtYTM3MTEzNjcuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYW5hbHlzaXMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYXBwLWNvbXBvbmVudHMvZGlzdC9lc20vYXBwZW5kLTU4YTdlN2FiLmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FwcC1jb21wb25lbnRzL2Rpc3QvZXNtL2Jhc2ljLWVlOWM2NzRjLmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FwcC1jb21wb25lbnRzL2Rpc3QvZXNtL2NvbW1vbkVudW1zLWY5OGEzMjNjLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIHYzLjAuOTlcbiAqL1xuaW1wb3J0IHsgYSBhcyBpc0RlZmluZWQgfSBmcm9tICcuL2Jhc2ljLWVlOWM2NzRjLmpzJztcbmltcG9ydCAnLi9jb21tb25FbnVtcy1mOThhMzIzYy5qcyc7XG5pbXBvcnQgJy4vbG9hZE1vZHVsZXMtYWFmMzBiZDYuanMnO1xuaW1wb3J0IHsgYSBhcyBhZGRJdGVtU3RhdGUgfSBmcm9tICcuL2FkZC1pdGVtLTk3ZDU3N2E5LmpzJztcbmltcG9ydCB7IGEgYXMgYXBwZW5kRmlsZVR5cGVzIH0gZnJvbSAnLi9hcHBlbmQtNThhN2U3YWIuanMnO1xuaW1wb3J0IHsgZiBhcyBmaW5kR2VvY29kZXIsIGMgYXMgY291bnRyeUNvZGVzLCBiIGFzIGdldEdlb2NvZGVySW5mbywgZCBhcyBnZXRTb3VyY2VDb3VudHJ5LCBhIGFzIGdldEFuYWx5emVkTGF5ZXJJbmZvIH0gZnJvbSAnLi9nZW9jb2RlLTdlYjdjMGRmLmpzJztcbmltcG9ydCB7IG0gYXMgY2FuR2VvY29kZSB9IGZyb20gJy4vcHJpdmlsZWdlcy0zNTU5MGViNC5qcyc7XG5pbXBvcnQgeyByIGFzIHJlcXVlc3QsIGcgYXMgZ2V0UmVzdEJhc2VVcmwsIGUgYXMgZm9ybVJlcXVlc3QgfSBmcm9tICcuL3BvcnRhbC03OWNhYWVmZi5qcyc7XG5cbi8qKlxuICogdXBkYXRlIGZpZWxkcyBwcm9wZXJ0eSBvbiBmb3IgYW5hbHl6ZVJlc3VsdHMgdG8gcmVmbGVjdCB1c2VyIGNoYW5nZXMgdG8gZmllbGRzIChlLmcuIHNlbGVjdGlvbiwgY2hhbmdlcyB0byBkaXNwbGF5TmFtZSwgZXRjLilcbiAqL1xuZnVuY3Rpb24gdXBkYXRlRmllbGRzKHJlc3BvbnNlKSB7XG4gIHJldHVybiB1cGRhdGVGaWVsZHNJbm5lcihyZXNwb25zZSwgYWRkSXRlbVN0YXRlKTtcbn1cbmZ1bmN0aW9uIHVwZGF0ZUZpZWxkc0lubmVyKHJlc3BvbnNlLCBzdG9yZVN0YXRlKSB7XG4gIHZhciBfYSwgX2IsIF9jLCBfZDtcbiAgY29uc3QgeyBzZWxlY3RlZEZpZWxkcywgdHlwZSwgc2VsZWN0ZWRTaGVldCB9ID0gc3RvcmVTdGF0ZTtcbiAgaWYgKCFzZWxlY3RlZEZpZWxkcykge1xuICAgIHJldHVybiByZXNwb25zZTtcbiAgfVxuICBjb25zdCBwdWJsaXNoUGFyYW1ldGVycyA9IHJlc3BvbnNlLnB1Ymxpc2hQYXJhbWV0ZXJzO1xuICBsZXQgbGF5ZXJJbmZvID0gcHVibGlzaFBhcmFtZXRlcnMgPT09IG51bGwgfHwgcHVibGlzaFBhcmFtZXRlcnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHB1Ymxpc2hQYXJhbWV0ZXJzLmxheWVySW5mbztcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSBcIk1pY3Jvc29mdCBFeGNlbFwiOlxuICAgICAgbGF5ZXJJbmZvID0gKF9iID0gKF9hID0gcHVibGlzaFBhcmFtZXRlcnMgPT09IG51bGwgfHwgcHVibGlzaFBhcmFtZXRlcnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHB1Ymxpc2hQYXJhbWV0ZXJzLmxheWVycykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hW3NlbGVjdGVkU2hlZXRdKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAoX2MgPSBwdWJsaXNoUGFyYW1ldGVycyA9PT0gbnVsbCB8fCBwdWJsaXNoUGFyYW1ldGVycyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcHVibGlzaFBhcmFtZXRlcnMubGF5ZXJzKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NbMF07XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwiR2VvSnNvblwiOlxuICAgICAgbGF5ZXJJbmZvID0gKF9kID0gcHVibGlzaFBhcmFtZXRlcnMgPT09IG51bGwgfHwgcHVibGlzaFBhcmFtZXRlcnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHB1Ymxpc2hQYXJhbWV0ZXJzLmxheWVycykgPT09IG51bGwgfHwgX2QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kWzBdO1xuICAgICAgYnJlYWs7XG4gIH1cbiAgbGF5ZXJJbmZvLmZpZWxkcyA9IGxheWVySW5mby5maWVsZHMucmVkdWNlKChmaWVsZHMsIGZpZWxkKSA9PiB7XG4gICAgY29uc3QgbWF0Y2hpbmdGaWVsZCA9IHNlbGVjdGVkRmllbGRzW2ZpZWxkLm5hbWVdO1xuICAgIGlmIChtYXRjaGluZ0ZpZWxkKSB7XG4gICAgICBmaWVsZC5hbGlhcyA9IG1hdGNoaW5nRmllbGQuYWxpYXM7XG4gICAgICBmaWVsZHMucHVzaChmaWVsZCk7XG4gICAgfVxuICAgIHJldHVybiBmaWVsZHM7XG4gIH0sIFtdKTtcbiAgcmV0dXJuIHJlc3BvbnNlO1xufVxuLyoqXG4gKiBVcGRhdGUgbG9jYXRpb25UeXBlIHByb3BlcnR5IG9uIGFsbCBmaWVsZHMgYmFzZWQgb24gYW5hbHl6ZSByZXNwb25zZVxuICovXG5mdW5jdGlvbiB1cGRhdGVMb2NhdGlvbkZpZWxkcyhyZXNwb25zZSkge1xuICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZjtcbiAgY29uc3QgeyBzZWxlY3RlZFNoZWV0IH0gPSBhZGRJdGVtU3RhdGU7XG4gIGNvbnN0IHsgcHVibGlzaFBhcmFtZXRlcnMgfSA9IHJlc3BvbnNlO1xuICBjb25zdCBsYXllciA9IChfZCA9IChfYiA9IChfYSA9IHB1Ymxpc2hQYXJhbWV0ZXJzLmxheWVycykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hW3NlbGVjdGVkU2hlZXRdKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAoX2MgPSBwdWJsaXNoUGFyYW1ldGVycy5sYXllcnMpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY1swXSkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogcHVibGlzaFBhcmFtZXRlcnMubGF5ZXJJbmZvO1xuICBpZiAoIWxheWVyKSB7XG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9XG4gIGNvbnN0IGFkZHJlc3NGaWVsZHMgPSAoX2YgPSAoX2UgPSBsYXllci5hZGRyZXNzRmllbGRzKSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiBwdWJsaXNoUGFyYW1ldGVycy5hZGRyZXNzRmllbGRzKSAhPT0gbnVsbCAmJiBfZiAhPT0gdm9pZCAwID8gX2YgOiB7fTtcbiAgY29uc3QgYWRkcmVzc0ZpZWxkc0hhc2ggPSBPYmplY3Qua2V5cyhhZGRyZXNzRmllbGRzKS5yZWR1Y2UoKGFjYywga2V5KSA9PiAoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBhY2MpLCB7IFthZGRyZXNzRmllbGRzW2tleV1dOiBrZXkgfSkpLCB7fSk7XG4gIGxheWVyLmZpZWxkcyA9IGxheWVyLmZpZWxkcy5tYXAoKGZpZWxkKSA9PiB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgZmllbGQpLCB7IGxvY2F0aW9uVHlwZTogZ2V0TG9jYXRpb25UeXBlKGZpZWxkLCBsYXllciwgcHVibGlzaFBhcmFtZXRlcnMsIGFkZHJlc3NGaWVsZHNIYXNoKSB9KTtcbiAgfSk7XG4gIC8vIGtlZXAgbG9jYXRpb24gdHlwZXMgb2Ygc2VsZWN0ZWQgZmllbGRzIGluIHN5bmMgYXMgd2VsbCAoV2ViR0lTL2FyY2dpcy1wb3J0YWwtYXBwIzM3MDM3KVxuICBpZiAoYWRkSXRlbVN0YXRlLnNlbGVjdGVkRmllbGRzKSB7XG4gICAgYWRkSXRlbVN0YXRlLnNlbGVjdGVkRmllbGRzID0gT2JqZWN0LmtleXMoYWRkSXRlbVN0YXRlLnNlbGVjdGVkRmllbGRzKS5yZWR1Y2UoKGFjYywga2V5KSA9PiB7XG4gICAgICBjb25zdCBmaWVsZCA9IGFkZEl0ZW1TdGF0ZS5zZWxlY3RlZEZpZWxkc1trZXldO1xuICAgICAgYWNjW2tleV0gPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGZpZWxkKSwgeyBsb2NhdGlvblR5cGU6IGdldExvY2F0aW9uVHlwZShmaWVsZCwgbGF5ZXIsIHB1Ymxpc2hQYXJhbWV0ZXJzLCBhZGRyZXNzRmllbGRzSGFzaCkgfSk7XG4gICAgICByZXR1cm4gYWNjO1xuICAgIH0sIHt9KTtcbiAgfVxuICByZXR1cm4gcmVzcG9uc2U7XG59XG5mdW5jdGlvbiBnZXRMb2NhdGlvblR5cGUoZmllbGQsIGxheWVyLCBwdWJsaXNoUGFyYW1ldGVycywgYWRkcmVzc0ZpZWxkcykge1xuICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gIGNvbnN0IGxhdGl0dWRlRmllbGROYW1lID0gKF9hID0gbGF5ZXIubGF0aXR1ZGVGaWVsZE5hbWUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHB1Ymxpc2hQYXJhbWV0ZXJzLmxhdGl0dWRlRmllbGROYW1lO1xuICBjb25zdCBsb25naXR1ZGVGaWVsZE5hbWUgPSAoX2IgPSBsYXllci5sb25naXR1ZGVGaWVsZE5hbWUpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IHB1Ymxpc2hQYXJhbWV0ZXJzLmxvbmdpdHVkZUZpZWxkTmFtZTtcbiAgY29uc3QgY29vcmRpbmF0ZUZpZWxkTmFtZSA9IChfYyA9IGxheWVyLmNvb3JkaW5hdGVGaWVsZE5hbWUpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IHB1Ymxpc2hQYXJhbWV0ZXJzLmNvb3JkaW5hdGVGaWVsZE5hbWU7XG4gIGNvbnN0IGNvb3JkaW5hdGVGaWVsZFR5cGUgPSAoX2QgPSBsYXllci5jb29yZGluYXRlRmllbGRUeXBlKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiBwdWJsaXNoUGFyYW1ldGVycy5jb29yZGluYXRlRmllbGRUeXBlO1xuICBpZiAoYWRkcmVzc0ZpZWxkc1tmaWVsZC5uYW1lXSkge1xuICAgIHJldHVybiBhZGRyZXNzRmllbGRzW2ZpZWxkLm5hbWVdO1xuICB9XG4gIGlmIChmaWVsZC5uYW1lID09PSBjb29yZGluYXRlRmllbGROYW1lKSB7XG4gICAgcmV0dXJuIGNvb3JkaW5hdGVGaWVsZFR5cGUgPT09IG51bGwgfHwgY29vcmRpbmF0ZUZpZWxkVHlwZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29vcmRpbmF0ZUZpZWxkVHlwZS50b0xvd2VyQ2FzZSgpO1xuICB9XG4gIGlmIChmaWVsZC5uYW1lID09PSBsYXRpdHVkZUZpZWxkTmFtZSkge1xuICAgIHJldHVybiBcImxhdGl0dWRlXCI7XG4gIH1cbiAgaWYgKGZpZWxkLm5hbWUgPT09IGxvbmdpdHVkZUZpZWxkTmFtZSkge1xuICAgIHJldHVybiBcImxvbmdpdHVkZVwiO1xuICB9XG4gIHJldHVybiBmaWVsZC5sb2NhdGlvblR5cGUgfHwgXCJ1bmtub3duXCI7XG59XG5cbi8qKlxuICogRmluZCB0aGUgY29zdCBkYXRhIGZvciBnZW9jb2RpbmcgYSBnaXZlbiBhbW91bnQgb2YgcmVjb3Jkc1xuICovXG5mdW5jdGlvbiBnZXRHZW9jb2RpbmdDb3N0KGdlb2NvZGVDb3VudCkge1xuICByZXR1cm4gcmVxdWVzdChgJHtnZXRSZXN0QmFzZVVybCgpfXBvcnRhbHMvc2VsZi9jb3N0YCwgeyBnZW9jb2RlQ291bnQgfSk7XG59XG5cbi8qKlxuICogVXBkYXRlIGNvdW50cnkgY29kZXMgbGlzdFxuICogYmFzZWQgb24gZ2VvY29kZXIncyBwcm94eUZpbHRlciBhbmQgc291cmNlQ291bnRyeSBsaXN0XG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdldENvdW50cnlDb2RlcyhnZW9jb2RlU2VydmljZVVybCwgcmVzdEJhc2VVcmwsIGdlb2NvZGVTZXJ2ZXJzKSB7XG4gIGNvbnN0IGdlb2NvZGVyID0gZmluZEdlb2NvZGVyKGdlb2NvZGVTZXJ2aWNlVXJsLCBnZW9jb2RlU2VydmVycyk7XG4gIGxldCBmaWx0ZXI7XG4gIGlmIChnZW9jb2RlciA9PT0gbnVsbCB8fCBnZW9jb2RlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogZ2VvY29kZXIuaXRlbUlkKSB7XG4gICAgY29uc3QgdXJsID0gYCR7cmVzdEJhc2VVcmx9L2NvbnRlbnQvaXRlbXMvJHtnZW9jb2Rlci5pdGVtSWR9YDtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QodXJsKTtcbiAgICBjb25zdCBzb3VyY2VDb3VudHJ5ID0gcmVzcG9uc2UucHJveHlGaWx0ZXIgJiYgSlNPTi5wYXJzZShyZXNwb25zZS5wcm94eUZpbHRlcikuc291cmNlQ291bnRyeTtcbiAgICBpZiAoc291cmNlQ291bnRyeSkge1xuICAgICAgZmlsdGVyID0gc291cmNlQ291bnRyeS5zcGxpdChcIixcIikubWFwKChjb3VudHJ5KSA9PiBjb3VudHJ5LnRvTG93ZXJDYXNlKCkpO1xuICAgICAgZmlsdGVyLnB1c2goXCJ3b3JsZFwiKTtcbiAgICB9XG4gIH1cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5rZXlzKGNvdW50cnlDb2RlcylcbiAgICAubWFwKChrZXkpID0+ICh7IGxhYmVsOiBjb3VudHJ5Q29kZXNba2V5XSwgdmFsdWU6IGtleSB9KSlcbiAgICAuZmlsdGVyKCh7IHZhbHVlIH0pID0+ICFmaWx0ZXIgfHwgZmlsdGVyLmluY2x1ZGVzKHZhbHVlLnRvTG93ZXJDYXNlKCkpKVxuICAgIC5zb3J0KChhLCBiKSA9PiB7XG4gICAgaWYgKGEubGFiZWwgPCBiLmxhYmVsKSB7XG4gICAgICByZXR1cm4gLTE7XG4gICAgfVxuICAgIGlmIChhLmxhYmVsID4gYi5sYWJlbCkge1xuICAgICAgcmV0dXJuIDE7XG4gICAgfVxuICAgIHJldHVybiAwO1xuICB9KTtcbiAgcmV0dXJuIG9wdGlvbnM7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGFuYWx5emUoeyBhbmFseXplQXJncywgY29uZmlnQXJncywgaXRlbUFyZ3MsIGluaXRpYWxpemUgfSkge1xuICB2YXIgX2EsIF9iO1xuICBjb25zdCB7IGNvbmZpZywgbGFuZywgcG9ydGFsLCB1c2VyIH0gPSBjb25maWdBcmdzO1xuICBjb25zdCB7IGl0ZW1UeXBlIH0gPSBpdGVtQXJncztcbiAgaWYgKGluaXRpYWxpemUgJiYgY2FuR2VvY29kZSh1c2VyKSkge1xuICAgIGNvbnN0IGluZm8gPSBnZXRHZW9jb2RlckluZm8oKF9iID0gKF9hID0gcG9ydGFsLmhlbHBlclNlcnZpY2VzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZ2VvY29kZSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogW10sIHVzZXIsIHBvcnRhbC5pc1BvcnRhbCk7XG4gICAgaWYgKGluZm8pIHtcbiAgICAgIGFkZEl0ZW1TdGF0ZS5hbGxvd0dlb2NvZGUgPSBpbmZvLmFsbG93R2VvY29kZTtcbiAgICAgIGFkZEl0ZW1TdGF0ZS5pc0Fnb1dvcmxkR2VvY29kZVNlcnZlciA9IGluZm8uaXNBZ29Xb3JsZEdlb2NvZGVTZXJ2ZXI7XG4gICAgICBhZGRJdGVtU3RhdGUuaXNTZXJ2aWNlUHJveHlBZ29Xb3JsZEdlb2NvZGVTZXJ2ZXIgPSBpbmZvLmlzU2VydmljZVByb3h5QWdvV29ybGRHZW9jb2RlU2VydmVyOyAvLyAhIGNhcmVmdWwgZm9yIHJlc2V0LCB1c2UgZGVmYXVsdFxuICAgICAgYWRkSXRlbVN0YXRlLmlzV29ybGRHZW9jb2RlU2VydmVyID0gaW5mby5pc1dvcmxkR2VvY29kZVNlcnZlcjsgLy8gISBjYXJlZnVsIGZvciByZXNldCwgdXNlIGRlZmF1bHRcbiAgICAgIGFkZEl0ZW1TdGF0ZS5nZW9jb2RlU2VydmVycyA9IGluZm8uZ2VvY29kZVNlcnZlcnM7IC8vICEgY2FyZWZ1bCBmb3IgcmVzZXQsIHVzZSBkZWZhdWx0XG4gICAgICBhZGRJdGVtU3RhdGUuZ2VvY29kZVNlcnZpY2VVcmwgPSBpbmZvLmdlb2NvZGVTZXJ2aWNlVXJsOyAvLyAhIGNhcmVmdWwgZm9yIHJlc2V0LCB1c2UgZGVmYXVsdFxuICAgIH1cbiAgICBpZiAoYWRkSXRlbVN0YXRlLmdlb2NvZGVTZXJ2ZXJzKSB7XG4gICAgICBhZGRJdGVtU3RhdGUuc291cmNlQ291bnRyeSA9IGdldFNvdXJjZUNvdW50cnkodXNlci5yZWdpb24sIHBvcnRhbC5pcENudHJ5Q29kZSk7IC8vICEgY2FyZWZ1bCBmb3IgcmVzZXQsIHVzZSBkZWZhdWx0XG4gICAgICB0cnkge1xuICAgICAgICBhZGRJdGVtU3RhdGUuY291bnRyeUNvZGVzID0gYXdhaXQgZ2V0Q291bnRyeUNvZGVzKGFkZEl0ZW1TdGF0ZS5nZW9jb2RlU2VydmljZVVybCwgY29uZmlnLnJlc3RCYXNlVXJsLCBhZGRJdGVtU3RhdGUuZ2VvY29kZVNlcnZlcnMpO1xuICAgICAgICBhZGRJdGVtU3RhdGUuc3RhbmRhcmRpemVkRmllbGROYW1lcyA9IGF3YWl0IGdldEZpZWxkTmFtZXNGcm9tR2VvY29kZXIoYWRkSXRlbVN0YXRlLmdlb2NvZGVTZXJ2aWNlVXJsLCBsYW5nKTtcbiAgICAgIH1cbiAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiR2VvY29kZXIgdW5hdmFpbGFibGVcIiwgZXJyb3IpO1xuICAgICAgICByZXR1cm4geyBlcnJvcjogeyBjb2RlOiBcInVuYXZhaWxhYmxlR2VvY29kZXJcIiB9IH07XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGNvbnN0IHsgbG9jYXRpb25UeXBlLCAvLyAhIGNhcmVmdWwgZm9yIHJlc2V0LCB1c2UgZGVmYXVsdCAtLS0gaGFuZGxlQW5hbHl6ZVJlc3BvbnNlXG4gIGlzV29ybGRHZW9jb2RlU2VydmVyLCAvLyAhIGNhcmVmdWwgZm9yIHJlc2V0LCB1c2UgZGVmYXVsdFxuICBnZW9jb2RlU2VydmljZVVybCwgLy8gISBjYXJlZnVsIGZvciByZXNldCwgdXNlIGRlZmF1bHRcbiAgZ2VvY29kZVNlcnZlcnMsIC8vICEgY2FyZWZ1bCBmb3IgcmVzZXQsIHVzZSBkZWZhdWx0XG4gIGlzU2VydmljZVByb3h5QWdvV29ybGRHZW9jb2RlU2VydmVyLCAvLyAhIGNhcmVmdWwgZm9yIHJlc2V0LCB1c2UgZGVmYXVsdFxuICBzb3VyY2VDb3VudHJ5LCAvLyAhIGNhcmVmdWwgZm9yIHJlc2V0LCB1c2UgZGVmYXVsdFxuICBhbmFseXplUmVzdWx0cywgLy8gISBjYXJlZnVsIGZvciByZXNldCwgdXNlIGRlZmF1bHQgLS0tIGhhbmRsZUFuYWx5emVSZXNwb25zZVxuICBhbmFseXplZExvY2F0aW9uVHlwZXMgLy8gISBjYXJlZnVsIGZvciByZXNldCwgdXNlIGRlZmF1bHQgLS0tIHB1c2hlZCBiZWxvd1xuICAgfSA9IGFkZEl0ZW1TdGF0ZTtcbiAgY29uc3QgdXJsID0gYCR7Y29uZmlnLnJlc3RCYXNlVXJsfWNvbnRlbnQvZmVhdHVyZXMvYW5hbHl6ZWA7XG4gIGNvbnN0IHsgaXNQb3J0YWwgfSA9IHBvcnRhbDtcbiAgbGV0IGFuYWx5emVTZWxlY3RlZExheWVyID0gZmFsc2U7XG4gIGxldCBmaWxldHlwZTtcbiAgaWYgKChhbmFseXplQXJncyA9PT0gbnVsbCB8fCBhbmFseXplQXJncyA9PT0gdm9pZCAwID8gdm9pZCAwIDogYW5hbHl6ZUFyZ3MudHlwZSkgPT09IFwiaXRlbVwiICYmIGFuYWx5emVBcmdzLndvcmtmbG93ID09PSBcImFwcGVuZFwiKSB7XG4gICAgZmlsZXR5cGUgPSBhcHBlbmRGaWxlVHlwZXNbaXRlbVR5cGVdO1xuICAgIGFuYWx5emVTZWxlY3RlZExheWVyID0gdHJ1ZTtcbiAgfVxuICBlbHNlIHtcbiAgICBmaWxldHlwZSA9IGl0ZW1UeXBlID09PSBcIk1pY3Jvc29mdCBFeGNlbFwiID8gXCJleGNlbFwiIDogaXRlbVR5cGUudG9Mb3dlckNhc2UoKTtcbiAgfVxuICBsZXQgcGFyYW1zID0ge1xuICAgIGZpbGV0eXBlXG4gIH07XG4gIHN3aXRjaCAoYW5hbHl6ZUFyZ3MgPT09IG51bGwgfHwgYW5hbHl6ZUFyZ3MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGFuYWx5emVBcmdzLnR5cGUpIHtcbiAgICBjYXNlIFwidXJsXCI6XG4gICAgICBwYXJhbXMuc291cmNlVXJsID0gYW5hbHl6ZUFyZ3Muc291cmNlVXJsO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcIml0ZW1cIjpcbiAgICAgIHBhcmFtcy5pdGVtaWQgPSBhbmFseXplQXJncy5pdGVtaWQ7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwiZmlsZVwiOlxuICAgICAgcGFyYW1zID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICBwYXJhbXMuYXBwZW5kKFwiZmlsZVwiLCBhbmFseXplQXJncy5maWxlKTtcbiAgICAgIHBhcmFtcy5hcHBlbmQoXCJmaWxldHlwZVwiLCBmaWxldHlwZSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwidGV4dFwiOlxuICAgICAgcGFyYW1zLnRleHQgPSBhbmFseXplQXJncy50ZXh0O1xuICAgICAgYnJlYWs7XG4gIH1cbiAgY29uc3QgYW5hbHl6ZVBhcmFtZXRlcnMgPSB7XG4gICAgZW5hYmxlR2xvYmFsR2VvY29kaW5nOiB0cnVlLFxuICAgIHNvdXJjZUxvY2FsZTogbGFuZyxcbiAgICBsb2NhdGlvblR5cGUsXG4gICAgcmV0dXJuRXN0aW1hdGVkUm93Q291bnQ6IHRydWUsXG4gICAgcmV0dXJuU2l6ZTogdHJ1ZVxuICB9O1xuICBpZiAoKGlzUG9ydGFsICYmIGdlb2NvZGVTZXJ2aWNlVXJsKSB8fCAhaXNQb3J0YWwpIHtcbiAgICBpZiAoaXNQb3J0YWwgfHwgKCFpc1BvcnRhbCAmJiAoZ2VvY29kZVNlcnZlcnMgPT09IG51bGwgfHwgZ2VvY29kZVNlcnZlcnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGdlb2NvZGVTZXJ2ZXJzLmxlbmd0aCkpKSB7XG4gICAgICBhbmFseXplUGFyYW1ldGVycy5nZW9jb2RlU2VydmljZVVybCA9IGVuY29kZVVSSShnZW9jb2RlU2VydmljZVVybCk7XG4gICAgfVxuICAgIGlmIChhbmFseXplUmVzdWx0cyB8fCBpc1BvcnRhbCkge1xuICAgICAgY29uc3QgYW5hbHl6ZWRWYWx1ZSA9IGxvY2F0aW9uVHlwZSA9PT0gXCJhZGRyZXNzXCIgPyBcImFkZHJlc3NUeXBlc1wiIDogXCJsb2NhdGlvblR5cGVzXCI7XG4gICAgICBpZiAoYW5hbHl6ZWRMb2NhdGlvblR5cGVzLmluZGV4T2YoYW5hbHl6ZWRWYWx1ZSkgPT09IC0xKSB7XG4gICAgICAgIGFuYWx5emVkTG9jYXRpb25UeXBlcy5wdXNoKGFuYWx5emVkVmFsdWUpO1xuICAgICAgfVxuICAgICAgYW5hbHl6ZVBhcmFtZXRlcnMubG9jYXRpb25UeXBlID0gbG9jYXRpb25UeXBlIHx8IFwiY29vcmRpbmF0ZXNcIjtcbiAgICB9XG4gICAgaWYgKCghcG9ydGFsLmlzUG9ydGFsICYmIGlzV29ybGRHZW9jb2RlU2VydmVyKSB8fCAocG9ydGFsLmlzUG9ydGFsICYmIGlzU2VydmljZVByb3h5QWdvV29ybGRHZW9jb2RlU2VydmVyKSkge1xuICAgICAgYW5hbHl6ZVBhcmFtZXRlcnMuc291cmNlQ291bnRyeUhpbnQgPSBhbmFseXplUmVzdWx0cyA/IFwiXCIgOiBzb3VyY2VDb3VudHJ5LnRvTG93ZXJDYXNlKCk7XG4gICAgICBhbmFseXplUGFyYW1ldGVycy5zb3VyY2VDb3VudHJ5ID0gYW5hbHl6ZVJlc3VsdHMgPyBzb3VyY2VDb3VudHJ5LnRvTG93ZXJDYXNlKCkgOiBcIlwiO1xuICAgIH1cbiAgICBjb25zdCBzdHJpbmdpZmllZEFuYWx5emVQYXJhbWV0ZXJzID0gSlNPTi5zdHJpbmdpZnkoYW5hbHl6ZVBhcmFtZXRlcnMpO1xuICAgIGlmIChwYXJhbXMgaW5zdGFuY2VvZiBGb3JtRGF0YSkge1xuICAgICAgcGFyYW1zLmFwcGVuZChcImFuYWx5emVQYXJhbWV0ZXJzXCIsIHN0cmluZ2lmaWVkQW5hbHl6ZVBhcmFtZXRlcnMpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHBhcmFtcy5hbmFseXplUGFyYW1ldGVycyA9IHN0cmluZ2lmaWVkQW5hbHl6ZVBhcmFtZXRlcnM7XG4gICAgfVxuICB9XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCAocGFyYW1zIGluc3RhbmNlb2YgRm9ybURhdGFcbiAgICAgID8gZm9ybVJlcXVlc3QodXJsLCBwYXJhbXMsIHt9LCBcInBvc3RcIilcbiAgICAgIDogcmVxdWVzdCh1cmwsIHBhcmFtcywge30sIFwicG9zdFwiKSk7XG4gICAgaGFuZGxlQW5hbHl6ZVJlc3BvbnNlKHsgcmVzcG9uc2UsIGluaXRpYWxpemUsIGFuYWx5emVTZWxlY3RlZExheWVyLCBnZW9jb2RlU2VydmljZVVybCwgbGFuZywgcG9ydGFsLCBpdGVtVHlwZSB9KTtcbiAgICByZXR1cm4ge307XG4gIH1cbiAgY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gKGVycm9yID09PSBudWxsIHx8IGVycm9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlcnJvci5tZXNzYWdlKSB8fCBlcnJvciB8fCBcIlwiO1xuICAgIHN3aXRjaCAodHJ1ZSkge1xuICAgICAgY2FzZSBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoXCJzcGVjaWZ5IGRhdGEgdG8gYmUgYW5hbHl6ZWRcIik6XG4gICAgICAgIHJldHVybiB7IGVycm9yOiB7IGNvZGU6IFwiZW1wdHlGaWxlXCIgfSB9O1xuICAgICAgY2FzZSBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoXCJEdXBsaWNhdGUgZmllbGQgbmFtZXMgYXJlIG5vdCBhbGxvd2VkXCIpOlxuICAgICAgICByZXR1cm4geyBlcnJvcjogeyBjb2RlOiBcImR1cGxpY2F0ZUZpZWxkTmFtZXNcIiB9IH07XG4gICAgICBjYXNlIGVycm9yTWVzc2FnZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwidGltZW91dFwiKTpcbiAgICAgICAgcmV0dXJuIHsgZXJyb3I6IHsgY29kZTogXCJ0aW1lb3V0XCIgfSB9O1xuICAgIH1cbiAgICByZXR1cm4geyBlcnJvcjogeyBjb2RlOiBcInVuaGFuZGxlZEVycm9yXCIgfSB9O1xuICB9XG59XG5hc3luYyBmdW5jdGlvbiBoYW5kbGVBbmFseXplUmVzcG9uc2UoeyByZXNwb25zZSwgYW5hbHl6ZVNlbGVjdGVkTGF5ZXIsIGluaXRpYWxpemUsIGdlb2NvZGVTZXJ2aWNlVXJsLCBsYW5nLCBwb3J0YWwsIGl0ZW1UeXBlIH0pIHtcbiAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2Y7XG4gIGNvbnN0IGdlb2NvZGVDb25maWcgPSBhZGRJdGVtU3RhdGU7XG4gIGNvbnN0IGlzUG9ydGFsID0gcG9ydGFsLmlzUG9ydGFsO1xuICBjb25zdCBpc0V4Y2VsID0gaXRlbVR5cGUgPT09IFwiTWljcm9zb2Z0IEV4Y2VsXCI7XG4gIGNvbnN0IHB1Ymxpc2hQYXJhbWV0ZXJzID0gaXNFeGNlbFxuICAgID8gKF9iID0gKF9hID0gcmVzcG9uc2UucHVibGlzaFBhcmFtZXRlcnMubGF5ZXJzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FbZ2VvY29kZUNvbmZpZy5zZWxlY3RlZFNoZWV0XSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogKF9jID0gcmVzcG9uc2UucHVibGlzaFBhcmFtZXRlcnMubGF5ZXJzKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NbMF1cbiAgICA6IHJlc3BvbnNlLnB1Ymxpc2hQYXJhbWV0ZXJzO1xuICBsZXQgc291cmNlQ291bnRyeTtcbiAgaWYgKCghaXNQb3J0YWwgJiYgZ2VvY29kZUNvbmZpZy5pc1dvcmxkR2VvY29kZVNlcnZlcikgfHxcbiAgICAoaXNQb3J0YWwgJiYgZ2VvY29kZUNvbmZpZy5pc1NlcnZpY2VQcm94eUFnb1dvcmxkR2VvY29kZVNlcnZlcikpIHtcbiAgICBjb25zdCBpc1dvcmxkR2VvY29kZVNlcnZlciA9IGlzRGVmaW5lZChwdWJsaXNoUGFyYW1ldGVycy5zb3VyY2VDb3VudHJ5KTtcbiAgICBzb3VyY2VDb3VudHJ5ID0gZ2VvY29kZUNvbmZpZy5zb3VyY2VDb3VudHJ5IHx8IHB1Ymxpc2hQYXJhbWV0ZXJzLnNvdXJjZUNvdW50cnkgfHwgXCJ3b3JsZFwiO1xuICAgIHNvdXJjZUNvdW50cnkgPSBzb3VyY2VDb3VudHJ5ID09PSBcIndvXCIgPyBcIndvcmxkXCIgOiBzb3VyY2VDb3VudHJ5O1xuICAgIGFkZEl0ZW1TdGF0ZS5pc1dvcmxkR2VvY29kZVNlcnZlciA9IGlzV29ybGRHZW9jb2RlU2VydmVyO1xuICAgIGFkZEl0ZW1TdGF0ZS5zb3VyY2VDb3VudHJ5ID0gc291cmNlQ291bnRyeTtcbiAgfVxuICBpZiAoIWdlb2NvZGVDb25maWcuYWxsb3dHZW9jb2RlICYmIHB1Ymxpc2hQYXJhbWV0ZXJzLmxvY2F0aW9uVHlwZSA9PT0gXCJhZGRyZXNzXCIpIHtcbiAgICBhZGRJdGVtU3RhdGUubG9jYXRpb25UeXBlID0gXCJub25lXCI7XG4gIH1cbiAgdXBkYXRlTG9jYXRpb25GaWVsZHMocmVzcG9uc2UpO1xuICBjb25zdCB1cGRhdGVkUmVzcG9uc2UgPSB1cGRhdGVGaWVsZHMocmVzcG9uc2UpO1xuICBhZGRJdGVtU3RhdGUuYW5hbHl6ZVJlc3VsdHMgPSB1cGRhdGVkUmVzcG9uc2U7XG4gIGlmICgoX2QgPSB1cGRhdGVkUmVzcG9uc2UgPT09IG51bGwgfHwgdXBkYXRlZFJlc3BvbnNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiB1cGRhdGVkUmVzcG9uc2UucHVibGlzaFBhcmFtZXRlcnMpID09PSBudWxsIHx8IF9kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZC5sYXllcnMpIHtcbiAgICBhZGRJdGVtU3RhdGUuZXhjZWxMYXllcnMgPSAoX2UgPSB1cGRhdGVkUmVzcG9uc2UgPT09IG51bGwgfHwgdXBkYXRlZFJlc3BvbnNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiB1cGRhdGVkUmVzcG9uc2UucHVibGlzaFBhcmFtZXRlcnMpID09PSBudWxsIHx8IF9lID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZS5sYXllcnM7XG4gIH1cbiAgY29uc3QgbGF5ZXJJbmZvID0gZ2V0QW5hbHl6ZWRMYXllckluZm8ocmVzcG9uc2UsIGFuYWx5emVTZWxlY3RlZExheWVyKTtcbiAgaWYgKGluaXRpYWxpemUpIHtcbiAgICBhZGRJdGVtU3RhdGUuYmFja3VwTGF5ZXJGaWVsZHMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGxheWVySW5mby5maWVsZHMpKTtcbiAgfVxuICBlbHNlIHtcbiAgICAvLyBGYWxsIGJhY2sgdG8gd29ybGQgZ2VvY29kZXIgaWYgbm8gZmllbGQgbmFtZXMgZm91bmRcbiAgICAhIXB1Ymxpc2hQYXJhbWV0ZXJzLnN0YW5kYXJkaXplZEZpZWxkTmFtZXNcbiAgICAgID8gKGFkZEl0ZW1TdGF0ZS5zdGFuZGFyZGl6ZWRGaWVsZE5hbWVzID0gcHVibGlzaFBhcmFtZXRlcnMuc3RhbmRhcmRpemVkRmllbGROYW1lcylcbiAgICAgIDogc2V0U3RhbmRhcmRpemVkRmllbGROYW1lcyh7XG4gICAgICAgIGxhbmcsXG4gICAgICAgIGdlb2NvZGVTZXJ2aWNlVXJsLFxuICAgICAgICAvLyAhIFdlIHNldCB0aGUgbG9jYXRpb24gdHlwZSBhYm92ZSBzbyB3ZSBjYW4ndCBqdXN0IHVzZSB0aGUgZGVzdHJ1Y3RlZCB2YWx1ZVxuICAgICAgICAvLyBUT0RPOiByZWZhY3RvciB0aGF0IGludG8gYSBsb2NhbCB2YXJpYWJsZVxuICAgICAgICBsb2NhdGlvblR5cGU6IGFkZEl0ZW1TdGF0ZS5sb2NhdGlvblR5cGVcbiAgICAgIH0pO1xuICB9XG4gIC8vIGZpZ3VyZSBvdXQgaG93IG11Y2ggdGhpcyBhY3Rpb24gd2lsbCBjb3N0XG4gIGlmIChhZGRJdGVtU3RhdGUubG9jYXRpb25UeXBlID09PSBcImFkZHJlc3NcIiB8fFxuICAgIGxheWVySW5mby5sb2NhdGlvblR5cGUgPT09IFwiYWRkcmVzc1wiIHx8XG4gICAgKChfZiA9IHJlc3BvbnNlID09PSBudWxsIHx8IHJlc3BvbnNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXNwb25zZS5wdWJsaXNoUGFyYW1ldGVycykgPT09IG51bGwgfHwgX2YgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9mLmxvY2F0aW9uVHlwZSkgPT09IFwiYWRkcmVzc1wiKSB7XG4gICAgYWRkSXRlbVN0YXRlLmdlb2NvZGVDb3N0ID0gYXdhaXQgZ2V0R2VvY29kaW5nQ29zdChsYXllckluZm8uZXN0aW1hdGVkUmVjb3JkQ291bnQpO1xuICB9XG4gIGVsc2Uge1xuICAgIGFkZEl0ZW1TdGF0ZS5nZW9jb2RlQ29zdCA9IG51bGw7XG4gIH1cbn1cbmFzeW5jIGZ1bmN0aW9uIHNldFN0YW5kYXJkaXplZEZpZWxkTmFtZXMoeyBsYW5nLCBnZW9jb2RlU2VydmljZVVybCwgbG9jYXRpb25UeXBlIH0pIHtcbiAgaWYgKGxvY2F0aW9uVHlwZSA9PT0gXCJhZGRyZXNzXCIpIHtcbiAgICBhZGRJdGVtU3RhdGUuc3RhbmRhcmRpemVkRmllbGROYW1lcyA9IGF3YWl0IGdldEZpZWxkTmFtZXNGcm9tR2VvY29kZXIoZ2VvY29kZVNlcnZpY2VVcmwsIGxhbmcpO1xuICB9XG59XG5hc3luYyBmdW5jdGlvbiBnZXRGaWVsZE5hbWVzRnJvbUdlb2NvZGVyKGdlb2NvZGVTZXJ2aWNlVXJsLCBsYW5nKSB7XG4gIGNvbnN0IGdlb2NvZGVyUmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGdlb2NvZGVTZXJ2aWNlVXJsLCB7fSwgeyBhZGRUb2tlbk1hbnVhbGx5OiBmYWxzZSB9KTtcbiAgcmV0dXJuIGdlb2NvZGVyUmVzcG9uc2UuYWRkcmVzc0ZpZWxkcy5yZWR1Y2UoKGFjYywgZmllbGQpID0+IHtcbiAgICB2YXIgX2E7XG4gICAgaWYgKGZpZWxkLm5hbWUgIT09IFwidW5rbm93blwiKSB7XG4gICAgICBhY2NbZmllbGQubmFtZV0gPSAoKF9hID0gZmllbGQgPT09IG51bGwgfHwgZmllbGQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZpZWxkLmxvY2FsaXplZE5hbWVzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FbYCR7bGFuZ31gXSkgfHwgZmllbGQuYWxpYXMgfHwgZmllbGQubmFtZTtcbiAgICB9XG4gICAgcmV0dXJuIGFjYztcbiAgfSwge30pO1xufVxuXG5leHBvcnQgeyBhbmFseXplIGFzIGEsIHNldFN0YW5kYXJkaXplZEZpZWxkTmFtZXMgYXMgcyB9O1xuIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogdjMuMC45OVxuICovXG5jb25zdCB1aWRGaWVsZHMgPSBbXCJlc3JpRmllbGRUeXBlT0lEXCIsIFwiZXNyaUZpZWxkVHlwZUdsb2JhbElEXCJdO1xuY29uc3QgTk9ORV9WQUxVRSA9IFwiPE5vbmU+XCI7XG5jb25zdCBBcHBlbmRPdmVyd3JpdGVQdWJsaXNoVHlwZXMgPSB7XG4gIFwiZmlsZSBnZW9kYXRhYmFzZVwiOiBcImZpbGVnZW9kYXRhYmFzZVwiLFxuICBzaGFwZWZpbGU6IFwic2hhcGVmaWxlXCIsXG4gIGdlb2pzb246IFwiZ2VvanNvblwiLFxuICBjc3Y6IFwiQ1NWXCIsXG4gIFwibWljcm9zb2Z0IGV4Y2VsXCI6IFwiZXhjZWxcIixcbiAgZ2VvcGFja2FnZTogXCJnZW9QYWNrYWdlXCJcbn07XG5jb25zdCBhcHBlbmRGaWxlVHlwZXMgPSB7XG4gIFNoYXBlZmlsZTogXCJzaGFwZWZpbGVcIixcbiAgXCJGaWxlIEdlb2RhdGFiYXNlXCI6IFwiZmlsZUdlb2RhdGFiYXNlXCIsXG4gIENTVjogXCJjc3ZcIixcbiAgXCJNaWNyb3NvZnQgRXhjZWxcIjogXCJleGNlbFwiLFxuICBHZW9Kc29uOiBcImdlb2pzb25cIixcbiAgR2VvUGFja2FnZTogXCJnZW9QYWNrYWdlXCJcbn07XG5jb25zdCBBcHBlbmRPdmVyd3JpdGVDbG91ZFB1Ymxpc2hUeXBlcyA9IHtcbiAgY3N2OiBcIkNTVlwiLFxuICBleGNlbDogXCJNaWNyb3NvZnQgRXhjZWxcIixcbiAgc2hhcGVmaWxlOiBcIlNoYXBlZmlsZVwiLFxuICBmZ2RiOiBcIkZpbGUgR2VvZGF0YWJhc2VcIixcbiAgZ2VvanNvbjogXCJHZW9Kc29uXCIsXG4gIGdvb2dsZXNoZWV0czogXCJNaWNyb3NvZnQgRXhjZWxcIlxufTtcbmNvbnN0IGFwcGVuZEV4dGVuc2lvbnMgPSBbXCJ6aXBcIiwgXCJjc3ZcIiwgXCJ4bHNcIiwgXCJ4bHN4XCIsIFwiZ2VvanNvblwiLCBcImdwa2dcIiwgXCJqc29uXCJdO1xuY29uc3QgYXBwZW5kRXh0ZW5zaW9uc0ZvckVudGVycHJpc2UgPSBbXCJ6aXBcIiwgXCJjc3ZcIiwgXCJ4bHNcIiwgXCJ4bHN4XCJdO1xuXG5leHBvcnQgeyBBcHBlbmRPdmVyd3JpdGVDbG91ZFB1Ymxpc2hUeXBlcyBhcyBBLCBOT05FX1ZBTFVFIGFzIE4sIGFwcGVuZEZpbGVUeXBlcyBhcyBhLCBBcHBlbmRPdmVyd3JpdGVQdWJsaXNoVHlwZXMgYXMgYiwgYXBwZW5kRXh0ZW5zaW9uc0ZvckVudGVycHJpc2UgYXMgYywgYXBwZW5kRXh0ZW5zaW9ucyBhcyBkLCB1aWRGaWVsZHMgYXMgdSB9O1xuIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogdjMuMC45OVxuICovXG52YXIgc2NhbGVzO1xuKGZ1bmN0aW9uIChzY2FsZXMpIHtcbiAgc2NhbGVzW1wiU01BTExcIl0gPSBcInNcIjtcbiAgc2NhbGVzW1wiTUVESVVNXCJdID0gXCJtXCI7XG4gIHNjYWxlc1tcIkxBUkdFXCJdID0gXCJsXCI7XG59KShzY2FsZXMgfHwgKHNjYWxlcyA9IHt9KSk7XG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgdmFsdWUgaXMgZGVmaW5lZFxuICogQHBhcmFtIHZhbHVlIC0gdmFsdWUgdG8gY2hlY2tcbiAqL1xuZnVuY3Rpb24gaXNEZWZpbmVkKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlICE9PSBudWxsO1xufVxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgbm9kZSBoYXMgbm9kZU5hbWUgb3IgaXMgY29udGFpbmVkIGluIGEgcGFyZW50IG5vZGUgd2l0aCBub2RlTmFtZVxuICogQHBhcmFtIG5vZGVcbiAqIEBwYXJhbSBub2RlTmFtZVxuICovXG5mdW5jdGlvbiBpc0luTm9kZShub2RlLCBub2RlTmFtZSkge1xuICB3aGlsZSAobm9kZSkge1xuICAgIGlmIChub2RlLm5vZGVOYW1lID09PSBub2RlTmFtZS50b1VwcGVyQ2FzZSgpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgbm9kZSA9IG5vZGUucGFyZW50RWxlbWVudDtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbmV4cG9ydCB7IGlzRGVmaW5lZCBhcyBhLCBpc0luTm9kZSBhcyBpLCBzY2FsZXMgYXMgcyB9O1xuIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogdjMuMC45OVxuICovXG52YXIgaW1hZ2VDb21wb25lbnRJbnB1dFR5cGVzRW51bTtcbihmdW5jdGlvbiAoaW1hZ2VDb21wb25lbnRJbnB1dFR5cGVzRW51bSkge1xuICBpbWFnZUNvbXBvbmVudElucHV0VHlwZXNFbnVtW1wic291cmNlVXJsXCJdID0gXCJzb3VyY2VVcmxcIjtcbiAgaW1hZ2VDb21wb25lbnRJbnB1dFR5cGVzRW51bVtcInRpdGxlXCJdID0gXCJ0aXRsZVwiO1xuICBpbWFnZUNvbXBvbmVudElucHV0VHlwZXNFbnVtW1wiY2FwdGlvblwiXSA9IFwiY2FwdGlvblwiO1xuICBpbWFnZUNvbXBvbmVudElucHV0VHlwZXNFbnVtW1wibGlua1VybFwiXSA9IFwibGlua1VybFwiO1xuICBpbWFnZUNvbXBvbmVudElucHV0VHlwZXNFbnVtW1wiYWx0VGV4dFwiXSA9IFwiYWx0VGV4dFwiO1xufSkoaW1hZ2VDb21wb25lbnRJbnB1dFR5cGVzRW51bSB8fCAoaW1hZ2VDb21wb25lbnRJbnB1dFR5cGVzRW51bSA9IHt9KSk7XG52YXIgZmllbGRJbmZvUHJlZml4RW51bTtcbihmdW5jdGlvbiAoZmllbGRJbmZvUHJlZml4RW51bSkge1xuICBmaWVsZEluZm9QcmVmaXhFbnVtW1wiZXhwcmVzc2lvblwiXSA9IFwiZXhwcmVzc2lvbi9cIjtcbiAgZmllbGRJbmZvUHJlZml4RW51bVtcInJlbGF0aW9uc2hpcFwiXSA9IFwicmVsYXRpb25zaGlwcy9cIjtcbiAgZmllbGRJbmZvUHJlZml4RW51bVtcInJhc3RlclwiXSA9IFwiUmFzdGVyLlwiO1xufSkoZmllbGRJbmZvUHJlZml4RW51bSB8fCAoZmllbGRJbmZvUHJlZml4RW51bSA9IHt9KSk7XG52YXIgbGF5ZXJEaXNwbGF5VHlwZUVudW07XG4oZnVuY3Rpb24gKGxheWVyRGlzcGxheVR5cGVFbnVtKSB7XG4gIGxheWVyRGlzcGxheVR5cGVFbnVtW1wiZmVhdHVyZVwiXSA9IFwiZmVhdHVyZVwiO1xuICBsYXllckRpc3BsYXlUeXBlRW51bVtcImNsdXN0ZXJcIl0gPSBcImNsdXN0ZXJcIjtcbiAgbGF5ZXJEaXNwbGF5VHlwZUVudW1bXCJtYXBOb3Rlc1wiXSA9IFwibWFwTm90ZXNcIjtcbn0pKGxheWVyRGlzcGxheVR5cGVFbnVtIHx8IChsYXllckRpc3BsYXlUeXBlRW51bSA9IHt9KSk7XG52YXIgc2VydmljZVR5cGVFbnVtO1xuKGZ1bmN0aW9uIChzZXJ2aWNlVHlwZUVudW0pIHtcbiAgc2VydmljZVR5cGVFbnVtW1wiZmVhdHVyZVwiXSA9IFwiZmVhdHVyZVwiO1xuICBzZXJ2aWNlVHlwZUVudW1bXCJtYXBJbWFnZVwiXSA9IFwibWFwLWltYWdlXCI7XG4gIHNlcnZpY2VUeXBlRW51bVtcInNjZW5lXCJdID0gXCJzY2VuZVwiO1xuICBzZXJ2aWNlVHlwZUVudW1bXCJvZ2NGZWF0dXJlXCJdID0gXCJvZ2MtZmVhdHVyZVwiO1xuICBzZXJ2aWNlVHlwZUVudW1bXCJpbWFnZXJ5XCJdID0gXCJpbWFnZXJ5XCI7XG4gIHNlcnZpY2VUeXBlRW51bVtcIndmc1wiXSA9IFwid2ZzXCI7XG4gIHNlcnZpY2VUeXBlRW51bVtcIndtc1wiXSA9IFwid21zXCI7XG4gIHNlcnZpY2VUeXBlRW51bVtcImNzdlwiXSA9IFwiY3N2XCI7XG4gIHNlcnZpY2VUeXBlRW51bVtcImdlb2pzb25cIl0gPSBcImdlb2pzb25cIjtcbiAgc2VydmljZVR5cGVFbnVtW1wic3RyZWFtXCJdID0gXCJzdHJlYW1cIjtcbiAgc2VydmljZVR5cGVFbnVtW1wiaW1hZ2VyeVRpbGVcIl0gPSBcImltYWdlcnktdGlsZVwiO1xuICBzZXJ2aWNlVHlwZUVudW1bXCJ0aWxlXCJdID0gXCJ0aWxlXCI7XG4gIHNlcnZpY2VUeXBlRW51bVtcInN1YnR5cGVcIl0gPSBcInN1YnR5cGVcIjtcbn0pKHNlcnZpY2VUeXBlRW51bSB8fCAoc2VydmljZVR5cGVFbnVtID0ge30pKTtcbi8vIGh0dHBzOi8vZGV2ZWxvcGVycy5hcmNnaXMuY29tL2phdmFzY3JpcHQvbGF0ZXN0L2FwaS1yZWZlcmVuY2UvZXNyaS1sYXllcnMtc3VwcG9ydC1GaWVsZC5odG1sI3R5cGVcbnZhciBmaWVsZFR5cGVzRW51bTtcbihmdW5jdGlvbiAoZmllbGRUeXBlc0VudW0pIHtcbiAgZmllbGRUeXBlc0VudW1bXCJpbnRlZ2VyXCJdID0gXCJpbnRlZ2VyXCI7XG4gIGZpZWxkVHlwZXNFbnVtW1wic21hbGxJbnRlZ2VyXCJdID0gXCJzbWFsbC1pbnRlZ2VyXCI7XG4gIGZpZWxkVHlwZXNFbnVtW1wiYmlnSW50ZWdlclwiXSA9IFwiYmlnLWludGVnZXJcIjtcbiAgZmllbGRUeXBlc0VudW1bXCJzaW5nbGVcIl0gPSBcInNpbmdsZVwiO1xuICBmaWVsZFR5cGVzRW51bVtcImRvdWJsZVwiXSA9IFwiZG91YmxlXCI7XG4gIGZpZWxkVHlwZXNFbnVtW1wibG9uZ1wiXSA9IFwibG9uZ1wiO1xuICBmaWVsZFR5cGVzRW51bVtcInN0cmluZ1wiXSA9IFwic3RyaW5nXCI7XG4gIGZpZWxkVHlwZXNFbnVtW1wiZGF0ZVwiXSA9IFwiZGF0ZVwiO1xuICBmaWVsZFR5cGVzRW51bVtcImRhdGVPbmx5XCJdID0gXCJkYXRlLW9ubHlcIjtcbiAgZmllbGRUeXBlc0VudW1bXCJ0aW1lT25seVwiXSA9IFwidGltZS1vbmx5XCI7XG4gIGZpZWxkVHlwZXNFbnVtW1widGltZXN0YW1wT2Zmc2V0XCJdID0gXCJ0aW1lc3RhbXAtb2Zmc2V0XCI7XG4gIGZpZWxkVHlwZXNFbnVtW1wib2lkXCJdID0gXCJvaWRcIjtcbiAgZmllbGRUeXBlc0VudW1bXCJndWlkXCJdID0gXCJndWlkXCI7XG4gIGZpZWxkVHlwZXNFbnVtW1wiZ2xvYmFsSWRcIl0gPSBcImdsb2JhbC1pZFwiO1xuICBmaWVsZFR5cGVzRW51bVtcIm51bWJlclwiXSA9IFwibnVtYmVyXCI7IC8vIGZvciBhcmNhZGVcbn0pKGZpZWxkVHlwZXNFbnVtIHx8IChmaWVsZFR5cGVzRW51bSA9IHt9KSk7XG52YXIgTGFzdFNvcnR5Qnk7XG4oZnVuY3Rpb24gKExhc3RTb3J0eUJ5KSB7XG4gIExhc3RTb3J0eUJ5W1wiZGVmYXVsdFwiXSA9IFwiZGVmYXVsdFwiO1xuICBMYXN0U29ydHlCeVtcImRpc3BsYXlcIl0gPSBcImRpc3BsYXlcIjtcbiAgTGFzdFNvcnR5QnlbXCJ0eXBlXCJdID0gXCJ0eXBlXCI7XG4gIExhc3RTb3J0eUJ5W1wiZmllbGRcIl0gPSBcImZpZWxkXCI7XG59KShMYXN0U29ydHlCeSB8fCAoTGFzdFNvcnR5QnkgPSB7fSkpO1xuXG5leHBvcnQgeyBMYXN0U29ydHlCeSBhcyBMLCBmaWVsZFR5cGVzRW51bSBhcyBhLCBmaWVsZEluZm9QcmVmaXhFbnVtIGFzIGYsIGltYWdlQ29tcG9uZW50SW5wdXRUeXBlc0VudW0gYXMgaSwgbGF5ZXJEaXNwbGF5VHlwZUVudW0gYXMgbCwgc2VydmljZVR5cGVFbnVtIGFzIHMgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==