"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_geoenrichment-components_dist_-644083"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/featuresetbase-e7de6aed.js":
/*!******************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/featuresetbase-e7de6aed.js ***!
  \******************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   registerFunctions: () => (/* binding */ K)
/* harmony export */ });
/* harmony import */ var _DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./DataBrowser-5ce2ade9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/DataBrowser-5ce2ade9.js");
/* harmony import */ var _arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./arcadeUtils-d1c69dcc.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/arcadeUtils-d1c69dcc.js");
/* harmony import */ var _featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./featureSetUtils-b0fce935.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/featureSetUtils-b0fce935.js");
/* harmony import */ var _WhereClause_63375e5b_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./WhereClause-63375e5b.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/WhereClause-63375e5b.js");
/* harmony import */ var _SpatialFilter_033e0689_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./SpatialFilter-033e0689.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/SpatialFilter-033e0689.js");
/* harmony import */ var _FeatureLayer_e34aa1c3_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./FeatureLayer-e34aa1c3.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/FeatureLayer-e34aa1c3.js");
/* harmony import */ var _arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./arcgis-geoenrichment-databrowser-6ca8ea14.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/arcgis-geoenrichment-databrowser-6ca8ea14.js");
/* harmony import */ var _index_4a62c63d_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./index-4a62c63d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/index-4a62c63d.js");
/* harmony import */ var _sizeVariableUtils_4395730d_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./sizeVariableUtils-4395730d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/sizeVariableUtils-4395730d.js");
/* harmony import */ var _number_9980f8f5_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./number-9980f8f5.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/number-9980f8f5.js");
/* harmony import */ var _featureConversionUtils_87d39ccb_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./featureConversionUtils-87d39ccb.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/featureConversionUtils-87d39ccb.js");
/* harmony import */ var _OptimizedGeometry_8812e4f6_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./OptimizedGeometry-8812e4f6.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/OptimizedGeometry-8812e4f6.js");
/* harmony import */ var _FeatureSetReader_32450e35_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./FeatureSetReader-32450e35.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/FeatureSetReader-32450e35.js");
/* harmony import */ var _centroid_f5130435_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./centroid-f5130435.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/centroid-f5130435.js");
/* harmony import */ var _PortalItem_036182cd_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./PortalItem-036182cd.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/PortalItem-036182cd.js");
/* harmony import */ var _FieldsIndex_da237492_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./FieldsIndex-da237492.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/FieldsIndex-da237492.js");
/* harmony import */ var _Query_39c34b93_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./Query-39c34b93.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/Query-39c34b93.js");
/* harmony import */ var _TimeExtent_7f857a39_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./TimeExtent-7f857a39.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/TimeExtent-7f857a39.js");
/* harmony import */ var _pbfQueryUtils_8a9fc87d_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./pbfQueryUtils-8a9fc87d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/pbfQueryUtils-8a9fc87d.js");
/* harmony import */ var _unitUtils_624ceeb6_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./unitUtils-624ceeb6.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/unitUtils-624ceeb6.js");
/* harmony import */ var _pbf_777d666d_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./pbf-777d666d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/pbf-777d666d.js");
/* harmony import */ var _query_3d91522a_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./query-3d91522a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/query-3d91522a.js");
/* harmony import */ var _normalizeUtils_69f83c05_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./normalizeUtils-69f83c05.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/normalizeUtils-69f83c05.js");
/* harmony import */ var _queryZScale_8fd5a160_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./queryZScale-8fd5a160.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/queryZScale-8fd5a160.js");
/* harmony import */ var _zscale_37987104_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./zscale-37987104.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/zscale-37987104.js");
/* harmony import */ var _QueryTask_51edf2d3_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./QueryTask-51edf2d3.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/QueryTask-51edf2d3.js");
/* harmony import */ var _RelationshipQuery_83684adc_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./RelationshipQuery-83684adc.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/RelationshipQuery-83684adc.js");
/* harmony import */ var _utils_7a79213d_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./utils-7a79213d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/utils-7a79213d.js");
/* harmony import */ var _FeatureType_9388a039_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./FeatureType-9388a039.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/FeatureType-9388a039.js");
/* harmony import */ var _commonjsHelpers_9577ff78_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./_commonjsHelpers-9577ff78.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/_commonjsHelpers-9577ff78.js");
/* harmony import */ var _geometryEngineAsync_0a08ab41_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./geometryEngineAsync-0a08ab41.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/geometryEngineAsync-0a08ab41.js");
/* harmony import */ var _workers_e0859213_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./workers-e0859213.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/workers-e0859213.js");
/* harmony import */ var _MultiOriginJSONSupport_3469f40f_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./MultiOriginJSONSupport-3469f40f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/MultiOriginJSONSupport-3469f40f.js");
/* harmony import */ var _arcgisLayerUrl_36b3c3ab_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./arcgisLayerUrl-36b3c3ab.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/arcgisLayerUrl-36b3c3ab.js");
/* harmony import */ var _HeightModelInfo_4863adf0_js__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./HeightModelInfo-4863adf0.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/HeightModelInfo-4863adf0.js");
/* harmony import */ var _OperationalLayer_733d50fd_js__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./OperationalLayer-733d50fd.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/OperationalLayer-733d50fd.js");
/* harmony import */ var _lengthUtils_ba54deb2_js__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./lengthUtils-ba54deb2.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/lengthUtils-ba54deb2.js");
/* harmony import */ var _UniqueValueRenderer_caf388bd_js__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ./UniqueValueRenderer-caf388bd.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/UniqueValueRenderer-caf388bd.js");
/* harmony import */ var _ColorStop_2c8ec076_js__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ./ColorStop-2c8ec076.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/ColorStop-2c8ec076.js");
/* harmony import */ var _styleUtils_6019f3b9_js__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ./styleUtils-6019f3b9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/styleUtils-6019f3b9.js");
/* harmony import */ var _visualVariableUtils_9b8e388f_js__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ./visualVariableUtils-9b8e388f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/visualVariableUtils-9b8e388f.js");
/* harmony import */ var _diffUtils_d9afbcb3_js__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ./diffUtils-d9afbcb3.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/diffUtils-d9afbcb3.js");
/* harmony import */ var _jsonUtils_8e2cac6c_js__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ./jsonUtils-8e2cac6c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/jsonUtils-8e2cac6c.js");
/* harmony import */ var _LRUCache_08b0cc1c_js__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ./LRUCache-08b0cc1c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/LRUCache-08b0cc1c.js");
/* harmony import */ var _MemCache_54630689_js__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! ./MemCache-54630689.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/MemCache-54630689.js");
/* harmony import */ var _ArcGISService_e565eb51_js__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! ./ArcGISService-e565eb51.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/ArcGISService-e565eb51.js");
/* harmony import */ var _BlendLayer_cdc29520_js__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! ./BlendLayer-cdc29520.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/BlendLayer-cdc29520.js");
/* harmony import */ var _PortalLayer_339fca21_js__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! ./PortalLayer-339fca21.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/PortalLayer-339fca21.js");
/* harmony import */ var _RefreshableLayer_fde13f12_js__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! ./RefreshableLayer-fde13f12.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/RefreshableLayer-fde13f12.js");
/* harmony import */ var _ScaleRangeLayer_70c3898e_js__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! ./ScaleRangeLayer-70c3898e.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/ScaleRangeLayer-70c3898e.js");
/* harmony import */ var _TimeInfo_cae3ca70_js__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! ./TimeInfo-cae3ca70.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/TimeInfo-cae3ca70.js");
/* harmony import */ var _TemporalLayer_0693071d_js__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(/*! ./TemporalLayer-0693071d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/TemporalLayer-0693071d.js");
/* harmony import */ var _labelingInfo_b4455a49_js__WEBPACK_IMPORTED_MODULE_52__ = __webpack_require__(/*! ./labelingInfo-b4455a49.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/labelingInfo-b4455a49.js");
/* harmony import */ var _LabelClass_d45141c9_js__WEBPACK_IMPORTED_MODULE_53__ = __webpack_require__(/*! ./LabelClass-d45141c9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/LabelClass-d45141c9.js");
/* harmony import */ var _labelUtils_d52af385_js__WEBPACK_IMPORTED_MODULE_54__ = __webpack_require__(/*! ./labelUtils-d52af385.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/labelUtils-d52af385.js");
/* harmony import */ var _defaults_2055543a_js__WEBPACK_IMPORTED_MODULE_55__ = __webpack_require__(/*! ./defaults-2055543a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/defaults-2055543a.js");
/* harmony import */ var _defaultsJSON_9f2931b5_js__WEBPACK_IMPORTED_MODULE_56__ = __webpack_require__(/*! ./defaultsJSON-9f2931b5.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/defaultsJSON-9f2931b5.js");
/* harmony import */ var _fieldProperties_7bb5ceb4_js__WEBPACK_IMPORTED_MODULE_57__ = __webpack_require__(/*! ./fieldProperties-7bb5ceb4.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/fieldProperties-7bb5ceb4.js");
/* harmony import */ var _styleUtils_c3f76d8e_js__WEBPACK_IMPORTED_MODULE_58__ = __webpack_require__(/*! ./styleUtils-c3f76d8e.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/styleUtils-c3f76d8e.js");
/* harmony import */ var _asyncUtils_af782857_js__WEBPACK_IMPORTED_MODULE_59__ = __webpack_require__(/*! ./asyncUtils-af782857.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/asyncUtils-af782857.js");
/* harmony import */ var _popupUtils_71f17418_js__WEBPACK_IMPORTED_MODULE_60__ = __webpack_require__(/*! ./popupUtils-71f17418.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/popupUtils-71f17418.js");






























































/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function V(e,t,n,r){if(1===r.length){if((0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.Z)(r[0]))return (0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.aj)(e,r[0],-1);if((0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.E)(r[0]))return (0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.aj)(e,r[0].toArray(),-1)}return (0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.aj)(e,r,-1)}function z(n,r,i){const a=n.getVariables();if(a.length>0){const t=[];for(let e=0;e<a.length;e++){const n={name:a[e]};t.push(r.evaluateIdentifier(i,n));}return (0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.P)(t).then((e=>{const t={};for(let n=0;n<a.length;n++)t[a[n]]=e[n];return n.parameters=t,n}))}return (0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.G)(n)}function H(e,t,n=null){for(const r in e)if(r.toLowerCase()===t.toLowerCase())return e[r];return n}function U(e){if(null===e)return null;const t={type:H(e,"type",""),name:H(e,"name","")};if("range"===t.type)t.range=H(e,"range",[]);else {t.codedValues=[];for(const n of H(e,"codedValues",[]))t.codedValues.push({name:H(n,"name",""),code:H(n,"code",null)});}return t}function W(e){if(null===e)return null;const t={},n=H(e,"wkt",null);null!==n&&(t.wkt=n);const r=H(e,"wkid",null);return null!==r&&(t.wkid=r),t}function _(e){if(null===e)return null;const t={hasZ:H(e,"hasz",!1),hasM:H(e,"hasm",!1)},n=H(e,"spatialreference",null);n&&(t.spatialReference=W(n));const r=H(e,"x",null);if(null!==r)return t.x=r,t.y=H(e,"y",null),t;const i=H(e,"rings",null);if(null!==i)return t.rings=i,t;const a=H(e,"paths",null);if(null!==a)return t.paths=a,t;const s=H(e,"points",null);if(null!==s)return t.points=s,t;for(const l of ["xmin","xmax","ymin","ymax","zmin","zmax","mmin","mmax"]){const n=H(e,l,null);null!==n&&(t[l]=n);}return t}function J(e,t){for(const n of t)if(n===e)return !0;return !1}function q(e){return !!e.layerDefinition&&(!!e.featureSet&&(!1!==J(e.layerDefinition.geometryType,["","esriGeometryPoint","esriGeometryPolyline","esriGeometryPolygon","esriGeometryMultipoint","esriGeometryEnvelope"])&&(null!==e.layerDefinition.objectIdField&&""!==e.layerDefinition.objectIdField&&(!1!==(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.Z)(e.layerDefinition.fields)&&!1!==(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.Z)(e.featureSet.features)))))}function K(F$1){"async"===F$1.mode&&(F$1.functions.getuser=function(e,t){return F$1.standardFunctionAsync(e,t,((t,s$1,l)=>{(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.J)(l,1,2);let o=(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.W)(l[1],""),f=!0===o;if(o=!0===o||!1===o?"":(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.K)(o),l[0]instanceof _arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.z){let t=null;return e.services&&e.services.portal&&(t=e.services.portal),t=(0,_featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.b)(l[0],t),(0,_featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.D)(t,o,f).then((e=>{if(e){const t=JSON.parse(JSON.stringify(e));for(const e of ["lastLogin","created","modified"])void 0!==t[e]&&null!==t[e]&&(t[e]=new Date(t[e]));return _arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.g.convertObjectToArcadeDictionary(t)}return null}))}let u=null;if((0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.k)(l[0])&&(u=l[0]),u)return f=!1,o?null:u.load().then((()=>u.getOwningSystemUrl())).then((t=>{if(!t)return o?null:u.getIdentityUser().then((e=>e?_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.g.convertObjectToArcadeDictionary({username:e}):null));let n=null;return e.services&&e.services.portal&&(n=e.services.portal),n=(0,_featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.b)(new _arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.z(t),n),(0,_featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.D)(n,o,f).then((e=>{if(e){const t=JSON.parse(JSON.stringify(e));for(const e of ["lastLogin","created","modified"])void 0!==t[e]&&null!==t[e]&&(t[e]=new Date(t[e]));return _arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.g.convertObjectToArcadeDictionary(t)}return null}))}));throw new Error("Invalid Parameter")}))},F$1.signatures.push({name:"getuser",min:"1",max:"2"}),F$1.functions.featuresetbyid=function(e,t){return F$1.standardFunctionAsync(e,t,((e,t,a)=>{if((0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.J)(a,2,4),a[0]instanceof _featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.r){const e=(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.K)(a[1]);let t=(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.W)(a[2],null);const n=(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.V)((0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.W)(a[3],!0));if(null===t&&(t=["*"]),!1===(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.Z)(t))throw new Error("Invalid Parameter");return a[0].featureSetById(e,n,t)}throw new Error("Invalid Parameter")}))},F$1.signatures.push({name:"featuresetbyid",min:"2",max:"4"}),F$1.functions.featuresetbyportalitem=function(e,t){return F$1.standardFunctionAsync(e,t,((t,a,f)=>{if((0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.J)(f,2,5),null===f[0])throw new Error("Portal is required");if(f[0]instanceof _arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.z){const t=(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.K)(f[1]),n=(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.K)(f[2]);let a=(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.W)(f[3],null);const o=(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.V)((0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.W)(f[4],!0));if(null===a&&(a=["*"]),!1===(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.Z)(a))throw new Error("Invalid Parameter");let u=null;return e.services&&e.services.portal&&(u=e.services.portal),u=(0,_featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.b)(f[0],u),(0,_featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.q)(t,n,e.spatialReference,a,o,u,e.lrucache,e.interceptor)}if(!1===(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.F)(f[0]))throw new Error("Portal is required");const u=(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.K)(f[0]),c=(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.K)(f[1]);let d=(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.W)(f[2],null);const m=(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.V)((0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.W)(f[3],!0));if(null===d&&(d=["*"]),!1===(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.Z)(d))throw new Error("Invalid Parameter");if(e.services&&e.services.portal)return (0,_featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.q)(u,c,e.spatialReference,d,m,e.services.portal,e.lrucache,e.interceptor);throw new Error("Portal is required")}))},F$1.signatures.push({name:"featuresetbyportalitem",min:"2",max:"5"}),F$1.functions.featuresetbyname=function(e,t){return F$1.standardFunctionAsync(e,t,((e,t,a)=>{if((0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.J)(a,2,4),a[0]instanceof _featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.r){const e=(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.K)(a[1]);let t=(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.W)(a[2],null);const n=(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.V)((0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.W)(a[3],!0));if(null===t&&(t=["*"]),!1===(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.Z)(t))throw new Error("Invalid Parameter");return a[0].featureSetByName(e,n,t)}throw new Error("Invalid Parameter")}))},F$1.signatures.push({name:"featuresetbyname",min:"2",max:"4"}),F$1.functions.featureset=function(e,t){return F$1.standardFunction(e,t,((t,r,i)=>{(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.J)(i,1,1);let a=i[0];const s={layerDefinition:{geometryType:"",objectIdField:"",globalIdField:"",typeIdField:"",fields:[]},featureSet:{geometryType:"",features:[]}};if((0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.F)(a))a=JSON.parse(a),void 0!==a.layerDefinition?(s.layerDefinition=a.layerDefinition,s.featureSet=a.featureSet,a.layerDefinition.spatialReference&&(s.layerDefinition.spatialReference=a.layerDefinition.spatialReference)):(s.featureSet.features=a.features,s.featureSet.geometryType=a.geometryType,s.layerDefinition.geometryType=s.featureSet.geometryType,s.layerDefinition.objectIdField=a.objectIdFieldName,s.layerDefinition.typeIdField=a.typeIdFieldName,s.layerDefinition.globalIdField=a.globalIdFieldName,s.layerDefinition.fields=a.fields,a.spatialReference&&(s.layerDefinition.spatialReference=a.spatialReference));else {if(!(i[0]instanceof _arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.g))throw new Error("Invalid Parameter");{a=JSON.parse(i[0].castToText());const e=H(a,"layerdefinition");if(null!==e){s.layerDefinition.geometryType=H(e,"geometrytype",""),s.featureSet.geometryType=s.layerDefinition.geometryType,s.layerDefinition.globalIdField=H(e,"globalidfield",""),s.layerDefinition.objectIdField=H(e,"objectidfield",""),s.layerDefinition.typeIdField=H(e,"typeidfield","");const t=H(e,"spatialreference",null);t&&(s.layerDefinition.spatialReference=W(t));for(const r of H(e,"fields",[])){const e={name:H(r,"name",""),alias:H(r,"alias",""),type:H(r,"type",""),nullable:H(r,"nullable",!0),editable:H(r,"editable",!0),length:H(r,"length",null),domain:U(H(r,"domain"))};s.layerDefinition.fields.push(e);}const n=H(a,"featureset",null);if(n){const e={};for(const t of s.layerDefinition.fields)e[t.name.toLowerCase()]=t.name;for(const t of H(n,"features",[])){const n={},r=H(t,"attributes",{});for(const t in r)n[e[t.toLowerCase()]]=r[t];s.featureSet.features.push({attributes:n,geometry:_(H(t,"geometry",null))});}}}else {s.layerDefinition.geometryType=H(a,"geometrytype",""),s.featureSet.geometryType=s.layerDefinition.geometryType,s.layerDefinition.objectIdField=H(a,"objectidfieldname",""),s.layerDefinition.typeIdField=H(a,"typeidfieldname","");const e=H(a,"spatialreference",null);e&&(s.layerDefinition.spatialReference=W(e));for(const n of H(a,"fields",[])){const e={name:H(n,"name",""),alias:H(n,"alias",""),type:H(n,"type",""),nullable:H(n,"nullable",!0),editable:H(n,"editable",!0),length:H(n,"length",null),domain:U(H(n,"domain"))};s.layerDefinition.fields.push(e);}const t={};for(const n of s.layerDefinition.fields)t[n.name.toLowerCase()]=n.name;for(const n of H(a,"features",[])){const e={},r=H(n,"attributes",{});for(const n in r)e[t[n.toLowerCase()]]=r[n];s.featureSet.features.push({attributes:e,geometry:_(H(n,"geometry",null))});}}}}if(!1===q(s))throw new Error("Invalid Parameter");return _featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.y.create(s,e.spatialReference)}))},F$1.signatures.push({name:"featureset",min:"1",max:"1"}),F$1.functions.filter=function(r,i){return F$1.standardFunctionAsync(r,i,((i,s,l)=>((0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.J)(l,2,2),(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.k)(l[0])?l[0].load().then((n=>{const i=_WhereClause_63375e5b_js__WEBPACK_IMPORTED_MODULE_3__.WhereClause.create(l[1],n.getFieldsIndex()),a=i.getVariables();if(a.length>0){const t=[];for(let e=0;e<a.length;e++){const n={name:a[e]};t.push(F$1.evaluateIdentifier(r,n));}return (0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.P)(t).then((e=>{const t={};for(let n=0;n<a.length;n++)t[a[n]]=e[n];return i.parameters=t,new _featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__._({parentfeatureset:l[0],whereclause:i})}))}return (0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.G)(new _featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__._({parentfeatureset:l[0],whereclause:i}))})):F$1.failDefferred("Filter cannot accept this parameter type"))))},F$1.signatures.push({name:"filter",min:"2",max:"2"}),F$1.functions.orderby=function(e$1,r){return F$1.standardFunctionAsync(e$1,r,((e$1,r,i)=>{if((0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.J)(i,2,2),(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.k)(i[0])){const e$1=new _featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.e(i[1]);return (0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.G)(new _featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.a({parentfeatureset:i[0],orderbyclause:e$1}))}return F$1.failDefferred("Order cannot accept this parameter type")}))},F$1.signatures.push({name:"orderby",min:"2",max:"2"}),F$1.functions.top=function(e,r){return F$1.standardFunctionAsync(e,r,((e,r,i)=>((0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.J)(i,2,2),(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.k)(i[0])?(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.G)(new _featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.c({parentfeatureset:i[0],topnum:i[1]})):(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.Z)(i[0])?(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.X)(i[1])>=i[0].length?i[0].slice(0):i[0].slice(0,(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.X)(i[1])):(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.E)(i[0])?(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.X)(i[1])>=i[0].length()?i[0].slice(0):i[0].slice(0,(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.X)(i[1])):F$1.failDefferred("Top cannot accept this parameter type"))))},F$1.signatures.push({name:"top",min:"2",max:"2"}),F$1.functions.first=function(e,r){return F$1.standardFunctionAsync(e,r,((e,r,i)=>((0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.J)(i,1,1),(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.k)(i[0])?i[0].first(e.abortSignal).then((e=>{if(null!==e){const t=_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.i.createFromGraphicLikeObject(e.geometry,e.attributes,i[0]);t._underlyingGraphic=e,e=t;}return e})):(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.Z)(i[0])?0===i[0].length?(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.G)(null):(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.G)(i[0][0]):(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.E)(i[0])?0===i[0].length()?(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.G)(null):(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.G)(i[0].get(0)):null)))},F$1.signatures.push({name:"first",min:"1",max:"1"}),F$1.functions.attachments=function(e,t){return F$1.standardFunctionAsync(e,t,((t,r,i)=>{(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.J)(i,1,2);const s={minsize:-1,maxsize:-1,types:null};if(i.length>1)if(i[1]instanceof _arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.g){if(i[1].hasField("minsize")&&(s.minsize=(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.X)(i[1].field("minsize"))),i[1].hasField("maxsize")&&(s.maxsize=(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.X)(i[1].field("maxsize"))),i[1].hasField("types")){const e=(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.ah)(i[1].field("types"),!1);e.length>0&&(s.types=e);}}else if(null!==i[1])throw new Error("Invalid Parameter");if(i[0]instanceof _arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.i){let t=i[0]._layer;return t instanceof _FeatureLayer_e34aa1c3_js__WEBPACK_IMPORTED_MODULE_5__.k&&(t=(0,_featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.A)(t,e.spatialReference,["*"],!0,e.lrucache,e.interceptor)),null===t||!1===(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.k)(t)?[]:t.load().then((()=>t.queryAttachments(i[0].field(t.objectIdField),s.minsize,s.maxsize,s.types)))}if(null===i[0])return [];throw new Error("Invalid Parameter")}))},F$1.signatures.push({name:"attachments",min:"1",max:"2"}),F$1.functions.featuresetbyrelationshipname=function(e,t){return F$1.standardFunctionAsync(e,t,((t,o,f$1)=>{(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.J)(f$1,2,4);const u=f$1[0],c=(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.K)(f$1[1]);let d=(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.W)(f$1[2],null);const m=(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.V)((0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.W)(f$1[3],!0));if(null===d&&(d=["*"]),!1===(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.Z)(d))throw new Error("Invalid Parameter");if(null===f$1[0])return null;if(!(f$1[0]instanceof _arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.i))throw new Error("Invalid Parameter");let p=u._layer;return p instanceof _FeatureLayer_e34aa1c3_js__WEBPACK_IMPORTED_MODULE_5__.k&&(p=(0,_featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.A)(p,e.spatialReference,["*"],!0,e.lrucache,e.interceptor)),null===p||!1===(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.k)(p)?null:p.load().then((t=>{const n$1=t.relationshipMetaData().filter((e=>e.name===c));if(0===n$1.length)return null;if(void 0!==n$1[0].relationshipTableId&&null!==n$1[0].relationshipTableId&&n$1[0].relationshipTableId>-1)return (0,_featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.j)(t,n$1[0],u.field(t.objectIdField),t.spatialReference,d,m,e.lrucache,e.interceptor);let r=t.serviceUrl();return r?(r="/"===r.charAt(r.length-1)?r+n$1[0].relatedTableId.toString():r+"/"+n$1[0].relatedTableId.toString(),(0,_featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.T)(r,t.spatialReference,d,m,e.lrucache,e.interceptor).then((e=>e.load().then((()=>e.relationshipMetaData())).then((r=>{if(r=r.filter((e=>e.id===n$1[0].id)),!1===u.hasField(n$1[0].keyField)||null===u.field(n$1[0].keyField))return t.getFeatureByObjectId(u.field(t.objectIdField),[n$1[0].keyField]).then((t=>{if(t){const i=_WhereClause_63375e5b_js__WEBPACK_IMPORTED_MODULE_3__.WhereClause.create(r[0].keyField+"= @id",e.getFieldsIndex());return i.parameters={id:t.attributes[n$1[0].keyField]},e.filter(i)}return new _SpatialFilter_033e0689_js__WEBPACK_IMPORTED_MODULE_4__.c({parentfeatureset:e})}));const i=_WhereClause_63375e5b_js__WEBPACK_IMPORTED_MODULE_3__.WhereClause.create(r[0].keyField+"= @id",e.getFieldsIndex());return i.parameters={id:u.field(n$1[0].keyField)},e.filter(i)}))))):null}))}))},F$1.signatures.push({name:"featuresetbyrelationshipname",min:"2",max:"4"}),F$1.functions.featuresetbyassociation=function(e,t){return F$1.standardFunctionAsync(e,t,((t,s,l)=>{(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.J)(l,2,3);const f$1=l[0],u=(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.K)((0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.W)(l[1],"")).toLowerCase(),c=(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.F)(l[2])?(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.K)(l[2]):null;if(null===l[0])return null;if(!(l[0]instanceof _arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.i))throw new Error("Invalid Parameter");let m=f$1._layer;return m instanceof _FeatureLayer_e34aa1c3_js__WEBPACK_IMPORTED_MODULE_5__.k&&(m=(0,_featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.A)(m,e.spatialReference,["*"],!0,e.lrucache,e.interceptor)),null===m||!1===(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.k)(m)?null:m.load().then((()=>{const t=m.serviceUrl();return (0,_featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.k)(t,e.spatialReference)})).then((e=>{let t=null,n=null,r=!1;if(null!==c&&""!==c&&void 0!==c){for(const t of e.terminals)t.terminalName===c&&(n=t.terminalId);null===n&&(r=!0);}const i=e.associations.getFieldsIndex(),a=i.get("TOGLOBALID").name,s=i.get("FROMGLOBALID").name,l=i.get("TOTERMINALID").name,o=i.get("FROMTERMINALID").name,p=i.get("FROMNETWORKSOURCEID").name,h=i.get("TONETWORKSOURCEID").name,F=i.get("ASSOCIATIONTYPE").name,I=i.get("ISCONTENTVISIBLE").name,D=i.get("OBJECTID").name;for(const u of m.fields)if("global-id"===u.type){t=f$1.field(u.name);break}let w$1=null,$=new _featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.d(new _DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.E({name:"percentalong",alias:"percentalong",type:"double"}),_WhereClause_63375e5b_js__WEBPACK_IMPORTED_MODULE_3__.WhereClause.create("0",e.associations.getFieldsIndex())),T=new _featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.d(new _DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.E({name:"side",alias:"side",type:"string"}),_WhereClause_63375e5b_js__WEBPACK_IMPORTED_MODULE_3__.WhereClause.create("''",e.associations.getFieldsIndex()));const L="globalid",v$1="globalId",j={};for(const f in e.lkp)j[f]=e.lkp[f].sourceId;const O=new _featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.C(new _DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.E({name:"classname",alias:"classname",type:"string"}),null,j);let R="";switch(u){case"midspan":{R=`((${a}='${t}') OR ( ${s}='${t}')) AND (${F} IN (5))`,O.codefield=_WhereClause_63375e5b_js__WEBPACK_IMPORTED_MODULE_3__.WhereClause.create(`CASE WHEN (${a}='${t}') THEN ${p} ELSE ${h} END`,e.associations.getFieldsIndex());const n=(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.a3)(_featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.E.findField(e.associations.fields,s));n.name=L,n.alias=L,w$1=new _featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.d(n,_WhereClause_63375e5b_js__WEBPACK_IMPORTED_MODULE_3__.WhereClause.create(`CASE WHEN (${s}='${t}') THEN ${a} ELSE ${s} END`,e.associations.getFieldsIndex())),$=e.unVersion>=4?new _featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.w(_featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.E.findField(e.associations.fields,i.get("PERCENTALONG").name)):new _featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.d(new _DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.E({name:"percentalong",alias:"percentalong",type:"double"}),_WhereClause_63375e5b_js__WEBPACK_IMPORTED_MODULE_3__.WhereClause.create("0",e.associations.getFieldsIndex()));break}case"junctionedge":{R=`((${a}='${t}') OR ( ${s}='${t}')) AND (${F} IN (4,6))`,O.codefield=_WhereClause_63375e5b_js__WEBPACK_IMPORTED_MODULE_3__.WhereClause.create(`CASE WHEN (${a}='${t}') THEN ${p} ELSE ${h} END`,e.associations.getFieldsIndex());const n=(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.a3)(_featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.E.findField(e.associations.fields,s));n.name=L,n.alias=L,w$1=new _featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.d(n,_WhereClause_63375e5b_js__WEBPACK_IMPORTED_MODULE_3__.WhereClause.create(`CASE WHEN (${s}='${t}') THEN ${a} ELSE ${s} END`,e.associations.getFieldsIndex())),T=new _featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.d(new _DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.E({name:"side",alias:"side",type:"string"}),_WhereClause_63375e5b_js__WEBPACK_IMPORTED_MODULE_3__.WhereClause.create(`CASE WHEN (${F}=4) THEN 'from' ELSE 'to' END`,e.associations.getFieldsIndex()));break}case"connected":{let r=`${a}='@T'`,i=`${s}='@T'`;null!==n&&(r+=` AND ${l}=@A`,i+=` AND ${o}=@A`),R="(("+r+") OR ("+i+"))",R=(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.ai)(R,"@T",t),r=(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.ai)(r,"@T",t),null!==n&&(r=(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.ai)(r,"@A",n.toString()),R=(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.ai)(R,"@A",n.toString())),O.codefield=_WhereClause_63375e5b_js__WEBPACK_IMPORTED_MODULE_3__.WhereClause.create("CASE WHEN "+r+` THEN ${p} ELSE ${h} END`,e.associations.getFieldsIndex());const f$1=(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.a3)(_featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.E.findField(e.associations.fields,s));f$1.name=L,f$1.alias=L,w$1=new _featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.d(f$1,_WhereClause_63375e5b_js__WEBPACK_IMPORTED_MODULE_3__.WhereClause.create("CASE WHEN "+r+` THEN ${s} ELSE ${a} END`,e.associations.getFieldsIndex()));break}case"container":R=`${a}='${t}' AND ${F} = 2`,null!==n&&(R+=` AND ${l} = `+n.toString()),O.codefield=p,R="( "+R+" )",w$1=new _featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.v(_featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.E.findField(e.associations.fields,s),L,L);case"content":R=`(${s}='${t}' AND ${F} = 2)`,null!==n&&(R+=` AND ${o} = `+n.toString()),O.codefield=h,R="( "+R+" )",w$1=new _featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.v(_featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.E.findField(e.associations.fields,a),L,L);break;case"structure":R=`(${a}='${t}' AND ${F} = 3)`,null!==n&&(R+=` AND ${l} = `+n.toString()),O.codefield=p,R="( "+R+" )",w$1=new _featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.v(_featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.E.findField(e.associations.fields,s),L,v$1);break;case"attached":R=`(${s}='${t}' AND ${F} = 3)`,null!==n&&(R+=` AND ${o} = `+n.toString()),O.codefield=h,R="( "+R+" )",w$1=new _featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.v(_featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.E.findField(e.associations.fields,a),L,v$1);break;default:throw new Error("Invalid Parameter")}r&&(R="1 <> 1");return new _featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.E({parentfeatureset:e.associations,adaptedFields:[new _featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.w(_featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.E.findField(e.associations.fields,D)),new _featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.w(_featureSetUtils_b0fce935_js__WEBPACK_IMPORTED_MODULE_2__.E.findField(e.associations.fields,I)),w$1,T,O,$],extraFilter:R?_WhereClause_63375e5b_js__WEBPACK_IMPORTED_MODULE_3__.WhereClause.create(R,e.associations.getFieldsIndex()):null})}))}))},F$1.signatures.push({name:"featuresetbyassociation",min:"2",max:"6"}),F$1.functions.groupby=function(r,s){return F$1.standardFunctionAsync(r,s,((s,f$1,c)=>((0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.J)(c,3,3),(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.k)(c[0])?c[0].load().then((n=>{const a=[],s=[];let f$1=!1,d=[];if((0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.F)(c[1]))d.push(c[1]);else if(c[1]instanceof _arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.g)d.push(c[1]);else if((0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.Z)(c[1]))d=c[1];else {if(!(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.E)(c[1]))return F$1.failDefferred("Illegal Value: GroupBy");d=c[1].toArray();}for(const e of d)if((0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.F)(e)){const t=_WhereClause_63375e5b_js__WEBPACK_IMPORTED_MODULE_3__.WhereClause.create((0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.K)(e),n.getFieldsIndex()),r=!0===(0,_SpatialFilter_033e0689_js__WEBPACK_IMPORTED_MODULE_4__.E)(t)?(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.K)(e):"%%%%FIELDNAME";a.push({name:r,expression:t}),"%%%%FIELDNAME"===r&&(f$1=!0);}else {if(!(e instanceof _arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.g))return F$1.failDefferred("Illegal Value: GroupBy");{const t=e.hasField("name")?e.field("name"):"%%%%FIELDNAME",r=e.hasField("expression")?e.field("expression"):"";if("%%%%FIELDNAME"===t&&(f$1=!0),!t)return F$1.failDefferred("Illegal Value: GroupBy");a.push({name:t,expression:_WhereClause_63375e5b_js__WEBPACK_IMPORTED_MODULE_3__.WhereClause.create(r||t,n.getFieldsIndex())});}}if(d=[],(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.F)(c[2]))d.push(c[2]);else if((0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.Z)(c[2]))d=c[2];else if((0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.E)(c[2]))d=c[2].toArray();else {if(!(c[2]instanceof _arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.g))return F$1.failDefferred("Illegal Value: GroupBy");d.push(c[2]);}for(const e of d){if(!(e instanceof _arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.g))return F$1.failDefferred("Illegal Value: GroupBy");{const t=e.hasField("name")?e.field("name"):"",r=e.hasField("statistic")?e.field("statistic"):"",i=e.hasField("expression")?e.field("expression"):"";if(!t||!r||!i)return F$1.failDefferred("Illegal Value: GroupBy");s.push({name:t,statistic:r.toLowerCase(),expression:_WhereClause_63375e5b_js__WEBPACK_IMPORTED_MODULE_3__.WhereClause.create(i,n.getFieldsIndex())});}}if(f$1){const e={};for(const r of n.fields)e[r.name.toLowerCase()]=1;for(const n of a)"%%%%FIELDNAME"!==n.name&&(e[n.name.toLowerCase()]=1);for(const n of s)"%%%%FIELDNAME"!==n.name&&(e[n.name.toLowerCase()]=1);let t=0;for(const n of a)if("%%%%FIELDNAME"===n.name){for(;1===e["field_"+t.toString()];)t++;e["field_"+t.toString()]=1,n.name="FIELD_"+t.toString();}}const p=[];for(const e of a)p.push(z(e.expression,F$1,r));for(const e of s)p.push(z(e.expression,F$1,r));return p.length>0?(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.P)(p).then((()=>(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.G)(c[0].groupby(a,s)))):(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.G)(c[0].groupby(a,s))})):F$1.failDefferred("Illegal Value: GroupBy"))))},F$1.signatures.push({name:"groupby",min:"3",max:"3"}),F$1.functions.distinct=function(r,s){return F$1.standardFunctionAsync(r,s,((s,f$1,c)=>(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.k)(c[0])?((0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.J)(c,2,2),c[0].load().then((n=>{const a=[];let s=[];if((0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.F)(c[1]))s.push(c[1]);else if(c[1]instanceof _arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.g)s.push(c[1]);else if((0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.Z)(c[1]))s=c[1];else {if(!(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.E)(c[1]))return F$1.failDefferred("Illegal Value: GroupBy");s=c[1].toArray();}let f$1=!1;for(const e of s)if((0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.F)(e)){const t=_WhereClause_63375e5b_js__WEBPACK_IMPORTED_MODULE_3__.WhereClause.create((0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.K)(e),n.getFieldsIndex()),r=!0===(0,_SpatialFilter_033e0689_js__WEBPACK_IMPORTED_MODULE_4__.E)(t)?(0,_arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.K)(e):"%%%%FIELDNAME";a.push({name:r,expression:t}),"%%%%FIELDNAME"===r&&(f$1=!0);}else {if(!(e instanceof _arcadeUtils_d1c69dcc_js__WEBPACK_IMPORTED_MODULE_1__.g))return F$1.failDefferred("Illegal Value: GroupBy");{const t=e.hasField("name")?e.field("name"):"%%%%FIELDNAME",r=e.hasField("expression")?e.field("expression"):"";if("%%%%FIELDNAME"===t&&(f$1=!0),!t)return F$1.failDefferred("Illegal Value: GroupBy");a.push({name:t,expression:_WhereClause_63375e5b_js__WEBPACK_IMPORTED_MODULE_3__.WhereClause.create(r||t,n.getFieldsIndex())});}}if(f$1){const e={};for(const r of n.fields)e[r.name.toLowerCase()]=1;for(const n of a)"%%%%FIELDNAME"!==n.name&&(e[n.name.toLowerCase()]=1);let t=0;for(const n of a)if("%%%%FIELDNAME"===n.name){for(;1===e["field_"+t.toString()];)t++;e["field_"+t.toString()]=1,n.name="FIELD_"+t.toString();}}const d=[];for(const e of a)d.push(z(e.expression,F$1,r));return d.length>0?(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.P)(d).then((()=>(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.G)(c[0].groupby(a,[])))):(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.G)(c[0].groupby(a,[]))}))):V("distinct",s,f$1,c)))});}



//# sourceMappingURL=featuresetbase-e7de6aed.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfZ2VvZW5yaWNobWVudC1jb21wb25lbnRzX2Rpc3RfLTY0NDA4My5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF1RTtBQUN1RjtBQUNmO0FBQ2xGO0FBQ0U7QUFDVjtBQUNHO0FBQzNCO0FBQ1k7QUFDWDtBQUNnQjtBQUNMO0FBQ0Q7QUFDUjtBQUNFO0FBQ0M7QUFDTjtBQUNLO0FBQ0c7QUFDSjtBQUNOO0FBQ0U7QUFDUztBQUNIO0FBQ0w7QUFDRztBQUNRO0FBQ1o7QUFDTTtBQUNLO0FBQ0c7QUFDWjtBQUNlO0FBQ1I7QUFDQztBQUNDO0FBQ0w7QUFDUTtBQUNWO0FBQ0M7QUFDUztBQUNWO0FBQ0E7QUFDRDtBQUNBO0FBQ0s7QUFDSDtBQUNDO0FBQ0s7QUFDRDtBQUNQO0FBQ0s7QUFDRDtBQUNGO0FBQ0E7QUFDRjtBQUNJO0FBQ0c7QUFDTDtBQUNBO0FBQ0E7O0FBRWxDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGlCQUFpQixHQUFHLDJEQUFDLGNBQWMsNERBQUMsWUFBWSxHQUFHLDJEQUFDLGNBQWMsNERBQUMsc0JBQXNCLE9BQU8sNERBQUMsU0FBUyxrQkFBa0IseUJBQXlCLGVBQWUsV0FBVyxZQUFZLFdBQVcsS0FBSyxTQUFTLFdBQVcsbUNBQW1DLE9BQU8sMkRBQUcsY0FBYyxXQUFXLFlBQVksV0FBVyxpQkFBaUIsd0JBQXdCLEdBQUcsT0FBTywyREFBQyxJQUFJLHVCQUF1QixrRUFBa0UsU0FBUyxjQUFjLHdCQUF3QixTQUFTLHlDQUF5Qyw0Q0FBNEMsTUFBTSxpQkFBaUIseURBQXlELDBDQUEwQyxHQUFHLFNBQVMsY0FBYyx3QkFBd0IsVUFBVSxtQkFBbUIsb0JBQW9CLHlCQUF5Qiw4QkFBOEIsY0FBYyx3QkFBd0IsU0FBUyx3Q0FBd0Ms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LFFBQVEsOENBQThDLEtBQUssNkJBQTZCLEtBQUssMERBQTBELFdBQVcsK0NBQStDLGtCQUFrQiwyREFBRyxjQUFjLDJEQUFDLHVCQUF1QiwyREFBQyxxQkFBcUIsNEJBQTRCOztBQUVyc2xCOztBQUVsQyIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2dlb2VucmljaG1lbnQtY29tcG9uZW50cy9kaXN0L2VzbS9mZWF0dXJlc2V0YmFzZS1lN2RlNmFlZC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQIGFzIHMkMSwgRyBhcyB4LCBFIGFzIHkkMSB9IGZyb20gJy4vRGF0YUJyb3dzZXItNWNlMmFkZTkuanMnO1xuaW1wb3J0IHsgSiBhcyBKJDEsIEsgYXMgSyQxLCB6IGFzIHMsIGcgYXMgaCwgViBhcyBlZSwgVyBhcyBPLCBaLCBGLCBrLCBYLCBFLCBpIGFzIGcsIGFoIGFzIGdlLCBhaSBhcyBNLCBhMyBhcyBzJDIsIGFqIGFzIGwgfSBmcm9tICcuL2FyY2FkZVV0aWxzLWQxYzY5ZGNjLmpzJztcbmltcG9ydCB7IGIsIEQsIHIsIHEgYXMgcSQxLCB5LCBfIGFzIF8kMSwgZSwgYSwgYyBhcyBhJDEsIEEsIGosIFQsIGsgYXMgayQxLCBkIGFzIFQkMSwgQywgdiwgRSBhcyBFJDEsIHcgfSBmcm9tICcuL2ZlYXR1cmVTZXRVdGlscy1iMGZjZTkzNS5qcyc7XG5pbXBvcnQgeyBXaGVyZUNsYXVzZSBhcyBmIH0gZnJvbSAnLi9XaGVyZUNsYXVzZS02MzM3NWU1Yi5qcyc7XG5pbXBvcnQgeyBjIGFzIG4sIEUgYXMgRSQyIH0gZnJvbSAnLi9TcGF0aWFsRmlsdGVyLTAzM2UwNjg5LmpzJztcbmltcG9ydCB7IGsgYXMga2UgfSBmcm9tICcuL0ZlYXR1cmVMYXllci1lMzRhYTFjMy5qcyc7XG5pbXBvcnQgJy4vYXJjZ2lzLWdlb2VucmljaG1lbnQtZGF0YWJyb3dzZXItNmNhOGVhMTQuanMnO1xuaW1wb3J0ICcuL2luZGV4LTRhNjJjNjNkLmpzJztcbmltcG9ydCAnLi9zaXplVmFyaWFibGVVdGlscy00Mzk1NzMwZC5qcyc7XG5pbXBvcnQgJy4vbnVtYmVyLTk5ODBmOGY1LmpzJztcbmltcG9ydCAnLi9mZWF0dXJlQ29udmVyc2lvblV0aWxzLTg3ZDM5Y2NiLmpzJztcbmltcG9ydCAnLi9PcHRpbWl6ZWRHZW9tZXRyeS04ODEyZTRmNi5qcyc7XG5pbXBvcnQgJy4vRmVhdHVyZVNldFJlYWRlci0zMjQ1MGUzNS5qcyc7XG5pbXBvcnQgJy4vY2VudHJvaWQtZjUxMzA0MzUuanMnO1xuaW1wb3J0ICcuL1BvcnRhbEl0ZW0tMDM2MTgyY2QuanMnO1xuaW1wb3J0ICcuL0ZpZWxkc0luZGV4LWRhMjM3NDkyLmpzJztcbmltcG9ydCAnLi9RdWVyeS0zOWMzNGI5My5qcyc7XG5pbXBvcnQgJy4vVGltZUV4dGVudC03Zjg1N2EzOS5qcyc7XG5pbXBvcnQgJy4vcGJmUXVlcnlVdGlscy04YTlmYzg3ZC5qcyc7XG5pbXBvcnQgJy4vdW5pdFV0aWxzLTYyNGNlZWI2LmpzJztcbmltcG9ydCAnLi9wYmYtNzc3ZDY2NmQuanMnO1xuaW1wb3J0ICcuL3F1ZXJ5LTNkOTE1MjJhLmpzJztcbmltcG9ydCAnLi9ub3JtYWxpemVVdGlscy02OWY4M2MwNS5qcyc7XG5pbXBvcnQgJy4vcXVlcnlaU2NhbGUtOGZkNWExNjAuanMnO1xuaW1wb3J0ICcuL3pzY2FsZS0zNzk4NzEwNC5qcyc7XG5pbXBvcnQgJy4vUXVlcnlUYXNrLTUxZWRmMmQzLmpzJztcbmltcG9ydCAnLi9SZWxhdGlvbnNoaXBRdWVyeS04MzY4NGFkYy5qcyc7XG5pbXBvcnQgJy4vdXRpbHMtN2E3OTIxM2QuanMnO1xuaW1wb3J0ICcuL0ZlYXR1cmVUeXBlLTkzODhhMDM5LmpzJztcbmltcG9ydCAnLi9fY29tbW9uanNIZWxwZXJzLTk1NzdmZjc4LmpzJztcbmltcG9ydCAnLi9nZW9tZXRyeUVuZ2luZUFzeW5jLTBhMDhhYjQxLmpzJztcbmltcG9ydCAnLi93b3JrZXJzLWUwODU5MjEzLmpzJztcbmltcG9ydCAnLi9NdWx0aU9yaWdpbkpTT05TdXBwb3J0LTM0NjlmNDBmLmpzJztcbmltcG9ydCAnLi9hcmNnaXNMYXllclVybC0zNmIzYzNhYi5qcyc7XG5pbXBvcnQgJy4vSGVpZ2h0TW9kZWxJbmZvLTQ4NjNhZGYwLmpzJztcbmltcG9ydCAnLi9PcGVyYXRpb25hbExheWVyLTczM2Q1MGZkLmpzJztcbmltcG9ydCAnLi9sZW5ndGhVdGlscy1iYTU0ZGViMi5qcyc7XG5pbXBvcnQgJy4vVW5pcXVlVmFsdWVSZW5kZXJlci1jYWYzODhiZC5qcyc7XG5pbXBvcnQgJy4vQ29sb3JTdG9wLTJjOGVjMDc2LmpzJztcbmltcG9ydCAnLi9zdHlsZVV0aWxzLTYwMTlmM2I5LmpzJztcbmltcG9ydCAnLi92aXN1YWxWYXJpYWJsZVV0aWxzLTliOGUzODhmLmpzJztcbmltcG9ydCAnLi9kaWZmVXRpbHMtZDlhZmJjYjMuanMnO1xuaW1wb3J0ICcuL2pzb25VdGlscy04ZTJjYWM2Yy5qcyc7XG5pbXBvcnQgJy4vTFJVQ2FjaGUtMDhiMGNjMWMuanMnO1xuaW1wb3J0ICcuL01lbUNhY2hlLTU0NjMwNjg5LmpzJztcbmltcG9ydCAnLi9BcmNHSVNTZXJ2aWNlLWU1NjVlYjUxLmpzJztcbmltcG9ydCAnLi9CbGVuZExheWVyLWNkYzI5NTIwLmpzJztcbmltcG9ydCAnLi9Qb3J0YWxMYXllci0zMzlmY2EyMS5qcyc7XG5pbXBvcnQgJy4vUmVmcmVzaGFibGVMYXllci1mZGUxM2YxMi5qcyc7XG5pbXBvcnQgJy4vU2NhbGVSYW5nZUxheWVyLTcwYzM4OThlLmpzJztcbmltcG9ydCAnLi9UaW1lSW5mby1jYWUzY2E3MC5qcyc7XG5pbXBvcnQgJy4vVGVtcG9yYWxMYXllci0wNjkzMDcxZC5qcyc7XG5pbXBvcnQgJy4vbGFiZWxpbmdJbmZvLWI0NDU1YTQ5LmpzJztcbmltcG9ydCAnLi9MYWJlbENsYXNzLWQ0NTE0MWM5LmpzJztcbmltcG9ydCAnLi9sYWJlbFV0aWxzLWQ1MmFmMzg1LmpzJztcbmltcG9ydCAnLi9kZWZhdWx0cy0yMDU1NTQzYS5qcyc7XG5pbXBvcnQgJy4vZGVmYXVsdHNKU09OLTlmMjkzMWI1LmpzJztcbmltcG9ydCAnLi9maWVsZFByb3BlcnRpZXMtN2JiNWNlYjQuanMnO1xuaW1wb3J0ICcuL3N0eWxlVXRpbHMtYzNmNzZkOGUuanMnO1xuaW1wb3J0ICcuL2FzeW5jVXRpbHMtYWY3ODI4NTcuanMnO1xuaW1wb3J0ICcuL3BvcHVwVXRpbHMtNzFmMTc0MTguanMnO1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuZnVuY3Rpb24gVihlLHQsbixyKXtpZigxPT09ci5sZW5ndGgpe2lmKFooclswXSkpcmV0dXJuIGwoZSxyWzBdLC0xKTtpZihFKHJbMF0pKXJldHVybiBsKGUsclswXS50b0FycmF5KCksLTEpfXJldHVybiBsKGUsciwtMSl9ZnVuY3Rpb24geihuLHIsaSl7Y29uc3QgYT1uLmdldFZhcmlhYmxlcygpO2lmKGEubGVuZ3RoPjApe2NvbnN0IHQ9W107Zm9yKGxldCBlPTA7ZTxhLmxlbmd0aDtlKyspe2NvbnN0IG49e25hbWU6YVtlXX07dC5wdXNoKHIuZXZhbHVhdGVJZGVudGlmaWVyKGksbikpO31yZXR1cm4gcyQxKHQpLnRoZW4oKGU9Pntjb25zdCB0PXt9O2ZvcihsZXQgbj0wO248YS5sZW5ndGg7bisrKXRbYVtuXV09ZVtuXTtyZXR1cm4gbi5wYXJhbWV0ZXJzPXQsbn0pKX1yZXR1cm4geChuKX1mdW5jdGlvbiBIKGUsdCxuPW51bGwpe2Zvcihjb25zdCByIGluIGUpaWYoci50b0xvd2VyQ2FzZSgpPT09dC50b0xvd2VyQ2FzZSgpKXJldHVybiBlW3JdO3JldHVybiBufWZ1bmN0aW9uIFUoZSl7aWYobnVsbD09PWUpcmV0dXJuIG51bGw7Y29uc3QgdD17dHlwZTpIKGUsXCJ0eXBlXCIsXCJcIiksbmFtZTpIKGUsXCJuYW1lXCIsXCJcIil9O2lmKFwicmFuZ2VcIj09PXQudHlwZSl0LnJhbmdlPUgoZSxcInJhbmdlXCIsW10pO2Vsc2Uge3QuY29kZWRWYWx1ZXM9W107Zm9yKGNvbnN0IG4gb2YgSChlLFwiY29kZWRWYWx1ZXNcIixbXSkpdC5jb2RlZFZhbHVlcy5wdXNoKHtuYW1lOkgobixcIm5hbWVcIixcIlwiKSxjb2RlOkgobixcImNvZGVcIixudWxsKX0pO31yZXR1cm4gdH1mdW5jdGlvbiBXKGUpe2lmKG51bGw9PT1lKXJldHVybiBudWxsO2NvbnN0IHQ9e30sbj1IKGUsXCJ3a3RcIixudWxsKTtudWxsIT09biYmKHQud2t0PW4pO2NvbnN0IHI9SChlLFwid2tpZFwiLG51bGwpO3JldHVybiBudWxsIT09ciYmKHQud2tpZD1yKSx0fWZ1bmN0aW9uIF8oZSl7aWYobnVsbD09PWUpcmV0dXJuIG51bGw7Y29uc3QgdD17aGFzWjpIKGUsXCJoYXN6XCIsITEpLGhhc006SChlLFwiaGFzbVwiLCExKX0sbj1IKGUsXCJzcGF0aWFscmVmZXJlbmNlXCIsbnVsbCk7biYmKHQuc3BhdGlhbFJlZmVyZW5jZT1XKG4pKTtjb25zdCByPUgoZSxcInhcIixudWxsKTtpZihudWxsIT09cilyZXR1cm4gdC54PXIsdC55PUgoZSxcInlcIixudWxsKSx0O2NvbnN0IGk9SChlLFwicmluZ3NcIixudWxsKTtpZihudWxsIT09aSlyZXR1cm4gdC5yaW5ncz1pLHQ7Y29uc3QgYT1IKGUsXCJwYXRoc1wiLG51bGwpO2lmKG51bGwhPT1hKXJldHVybiB0LnBhdGhzPWEsdDtjb25zdCBzPUgoZSxcInBvaW50c1wiLG51bGwpO2lmKG51bGwhPT1zKXJldHVybiB0LnBvaW50cz1zLHQ7Zm9yKGNvbnN0IGwgb2YgW1wieG1pblwiLFwieG1heFwiLFwieW1pblwiLFwieW1heFwiLFwiem1pblwiLFwiem1heFwiLFwibW1pblwiLFwibW1heFwiXSl7Y29uc3Qgbj1IKGUsbCxudWxsKTtudWxsIT09biYmKHRbbF09bik7fXJldHVybiB0fWZ1bmN0aW9uIEooZSx0KXtmb3IoY29uc3QgbiBvZiB0KWlmKG49PT1lKXJldHVybiAhMDtyZXR1cm4gITF9ZnVuY3Rpb24gcShlKXtyZXR1cm4gISFlLmxheWVyRGVmaW5pdGlvbiYmKCEhZS5mZWF0dXJlU2V0JiYoITEhPT1KKGUubGF5ZXJEZWZpbml0aW9uLmdlb21ldHJ5VHlwZSxbXCJcIixcImVzcmlHZW9tZXRyeVBvaW50XCIsXCJlc3JpR2VvbWV0cnlQb2x5bGluZVwiLFwiZXNyaUdlb21ldHJ5UG9seWdvblwiLFwiZXNyaUdlb21ldHJ5TXVsdGlwb2ludFwiLFwiZXNyaUdlb21ldHJ5RW52ZWxvcGVcIl0pJiYobnVsbCE9PWUubGF5ZXJEZWZpbml0aW9uLm9iamVjdElkRmllbGQmJlwiXCIhPT1lLmxheWVyRGVmaW5pdGlvbi5vYmplY3RJZEZpZWxkJiYoITEhPT1aKGUubGF5ZXJEZWZpbml0aW9uLmZpZWxkcykmJiExIT09WihlLmZlYXR1cmVTZXQuZmVhdHVyZXMpKSkpKX1mdW5jdGlvbiBLKEYkMSl7XCJhc3luY1wiPT09RiQxLm1vZGUmJihGJDEuZnVuY3Rpb25zLmdldHVzZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gRiQxLnN0YW5kYXJkRnVuY3Rpb25Bc3luYyhlLHQsKCh0LHMkMSxsKT0+e0okMShsLDEsMik7bGV0IG89TyhsWzFdLFwiXCIpLGY9ITA9PT1vO2lmKG89ITA9PT1vfHwhMT09PW8/XCJcIjpLJDEobyksbFswXWluc3RhbmNlb2Ygcyl7bGV0IHQ9bnVsbDtyZXR1cm4gZS5zZXJ2aWNlcyYmZS5zZXJ2aWNlcy5wb3J0YWwmJih0PWUuc2VydmljZXMucG9ydGFsKSx0PWIobFswXSx0KSxEKHQsbyxmKS50aGVuKChlPT57aWYoZSl7Y29uc3QgdD1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGUpKTtmb3IoY29uc3QgZSBvZiBbXCJsYXN0TG9naW5cIixcImNyZWF0ZWRcIixcIm1vZGlmaWVkXCJdKXZvaWQgMCE9PXRbZV0mJm51bGwhPT10W2VdJiYodFtlXT1uZXcgRGF0ZSh0W2VdKSk7cmV0dXJuIGguY29udmVydE9iamVjdFRvQXJjYWRlRGljdGlvbmFyeSh0KX1yZXR1cm4gbnVsbH0pKX1sZXQgdT1udWxsO2lmKGsobFswXSkmJih1PWxbMF0pLHUpcmV0dXJuIGY9ITEsbz9udWxsOnUubG9hZCgpLnRoZW4oKCgpPT51LmdldE93bmluZ1N5c3RlbVVybCgpKSkudGhlbigodD0+e2lmKCF0KXJldHVybiBvP251bGw6dS5nZXRJZGVudGl0eVVzZXIoKS50aGVuKChlPT5lP2guY29udmVydE9iamVjdFRvQXJjYWRlRGljdGlvbmFyeSh7dXNlcm5hbWU6ZX0pOm51bGwpKTtsZXQgbj1udWxsO3JldHVybiBlLnNlcnZpY2VzJiZlLnNlcnZpY2VzLnBvcnRhbCYmKG49ZS5zZXJ2aWNlcy5wb3J0YWwpLG49YihuZXcgcyh0KSxuKSxEKG4sbyxmKS50aGVuKChlPT57aWYoZSl7Y29uc3QgdD1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGUpKTtmb3IoY29uc3QgZSBvZiBbXCJsYXN0TG9naW5cIixcImNyZWF0ZWRcIixcIm1vZGlmaWVkXCJdKXZvaWQgMCE9PXRbZV0mJm51bGwhPT10W2VdJiYodFtlXT1uZXcgRGF0ZSh0W2VdKSk7cmV0dXJuIGguY29udmVydE9iamVjdFRvQXJjYWRlRGljdGlvbmFyeSh0KX1yZXR1cm4gbnVsbH0pKX0pKTt0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIFBhcmFtZXRlclwiKX0pKX0sRiQxLnNpZ25hdHVyZXMucHVzaCh7bmFtZTpcImdldHVzZXJcIixtaW46XCIxXCIsbWF4OlwiMlwifSksRiQxLmZ1bmN0aW9ucy5mZWF0dXJlc2V0YnlpZD1mdW5jdGlvbihlLHQpe3JldHVybiBGJDEuc3RhbmRhcmRGdW5jdGlvbkFzeW5jKGUsdCwoKGUsdCxhKT0+e2lmKEokMShhLDIsNCksYVswXWluc3RhbmNlb2Ygcil7Y29uc3QgZT1LJDEoYVsxXSk7bGV0IHQ9TyhhWzJdLG51bGwpO2NvbnN0IG49ZWUoTyhhWzNdLCEwKSk7aWYobnVsbD09PXQmJih0PVtcIipcIl0pLCExPT09Wih0KSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIFBhcmFtZXRlclwiKTtyZXR1cm4gYVswXS5mZWF0dXJlU2V0QnlJZChlLG4sdCl9dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBQYXJhbWV0ZXJcIil9KSl9LEYkMS5zaWduYXR1cmVzLnB1c2goe25hbWU6XCJmZWF0dXJlc2V0YnlpZFwiLG1pbjpcIjJcIixtYXg6XCI0XCJ9KSxGJDEuZnVuY3Rpb25zLmZlYXR1cmVzZXRieXBvcnRhbGl0ZW09ZnVuY3Rpb24oZSx0KXtyZXR1cm4gRiQxLnN0YW5kYXJkRnVuY3Rpb25Bc3luYyhlLHQsKCh0LGEsZik9PntpZihKJDEoZiwyLDUpLG51bGw9PT1mWzBdKXRocm93IG5ldyBFcnJvcihcIlBvcnRhbCBpcyByZXF1aXJlZFwiKTtpZihmWzBdaW5zdGFuY2VvZiBzKXtjb25zdCB0PUskMShmWzFdKSxuPUskMShmWzJdKTtsZXQgYT1PKGZbM10sbnVsbCk7Y29uc3Qgbz1lZShPKGZbNF0sITApKTtpZihudWxsPT09YSYmKGE9W1wiKlwiXSksITE9PT1aKGEpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgUGFyYW1ldGVyXCIpO2xldCB1PW51bGw7cmV0dXJuIGUuc2VydmljZXMmJmUuc2VydmljZXMucG9ydGFsJiYodT1lLnNlcnZpY2VzLnBvcnRhbCksdT1iKGZbMF0sdSkscSQxKHQsbixlLnNwYXRpYWxSZWZlcmVuY2UsYSxvLHUsZS5scnVjYWNoZSxlLmludGVyY2VwdG9yKX1pZighMT09PUYoZlswXSkpdGhyb3cgbmV3IEVycm9yKFwiUG9ydGFsIGlzIHJlcXVpcmVkXCIpO2NvbnN0IHU9SyQxKGZbMF0pLGM9SyQxKGZbMV0pO2xldCBkPU8oZlsyXSxudWxsKTtjb25zdCBtPWVlKE8oZlszXSwhMCkpO2lmKG51bGw9PT1kJiYoZD1bXCIqXCJdKSwhMT09PVooZCkpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBQYXJhbWV0ZXJcIik7aWYoZS5zZXJ2aWNlcyYmZS5zZXJ2aWNlcy5wb3J0YWwpcmV0dXJuIHEkMSh1LGMsZS5zcGF0aWFsUmVmZXJlbmNlLGQsbSxlLnNlcnZpY2VzLnBvcnRhbCxlLmxydWNhY2hlLGUuaW50ZXJjZXB0b3IpO3Rocm93IG5ldyBFcnJvcihcIlBvcnRhbCBpcyByZXF1aXJlZFwiKX0pKX0sRiQxLnNpZ25hdHVyZXMucHVzaCh7bmFtZTpcImZlYXR1cmVzZXRieXBvcnRhbGl0ZW1cIixtaW46XCIyXCIsbWF4OlwiNVwifSksRiQxLmZ1bmN0aW9ucy5mZWF0dXJlc2V0YnluYW1lPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIEYkMS5zdGFuZGFyZEZ1bmN0aW9uQXN5bmMoZSx0LCgoZSx0LGEpPT57aWYoSiQxKGEsMiw0KSxhWzBdaW5zdGFuY2VvZiByKXtjb25zdCBlPUskMShhWzFdKTtsZXQgdD1PKGFbMl0sbnVsbCk7Y29uc3Qgbj1lZShPKGFbM10sITApKTtpZihudWxsPT09dCYmKHQ9W1wiKlwiXSksITE9PT1aKHQpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgUGFyYW1ldGVyXCIpO3JldHVybiBhWzBdLmZlYXR1cmVTZXRCeU5hbWUoZSxuLHQpfXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgUGFyYW1ldGVyXCIpfSkpfSxGJDEuc2lnbmF0dXJlcy5wdXNoKHtuYW1lOlwiZmVhdHVyZXNldGJ5bmFtZVwiLG1pbjpcIjJcIixtYXg6XCI0XCJ9KSxGJDEuZnVuY3Rpb25zLmZlYXR1cmVzZXQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gRiQxLnN0YW5kYXJkRnVuY3Rpb24oZSx0LCgodCxyLGkpPT57SiQxKGksMSwxKTtsZXQgYT1pWzBdO2NvbnN0IHM9e2xheWVyRGVmaW5pdGlvbjp7Z2VvbWV0cnlUeXBlOlwiXCIsb2JqZWN0SWRGaWVsZDpcIlwiLGdsb2JhbElkRmllbGQ6XCJcIix0eXBlSWRGaWVsZDpcIlwiLGZpZWxkczpbXX0sZmVhdHVyZVNldDp7Z2VvbWV0cnlUeXBlOlwiXCIsZmVhdHVyZXM6W119fTtpZihGKGEpKWE9SlNPTi5wYXJzZShhKSx2b2lkIDAhPT1hLmxheWVyRGVmaW5pdGlvbj8ocy5sYXllckRlZmluaXRpb249YS5sYXllckRlZmluaXRpb24scy5mZWF0dXJlU2V0PWEuZmVhdHVyZVNldCxhLmxheWVyRGVmaW5pdGlvbi5zcGF0aWFsUmVmZXJlbmNlJiYocy5sYXllckRlZmluaXRpb24uc3BhdGlhbFJlZmVyZW5jZT1hLmxheWVyRGVmaW5pdGlvbi5zcGF0aWFsUmVmZXJlbmNlKSk6KHMuZmVhdHVyZVNldC5mZWF0dXJlcz1hLmZlYXR1cmVzLHMuZmVhdHVyZVNldC5nZW9tZXRyeVR5cGU9YS5nZW9tZXRyeVR5cGUscy5sYXllckRlZmluaXRpb24uZ2VvbWV0cnlUeXBlPXMuZmVhdHVyZVNldC5nZW9tZXRyeVR5cGUscy5sYXllckRlZmluaXRpb24ub2JqZWN0SWRGaWVsZD1hLm9iamVjdElkRmllbGROYW1lLHMubGF5ZXJEZWZpbml0aW9uLnR5cGVJZEZpZWxkPWEudHlwZUlkRmllbGROYW1lLHMubGF5ZXJEZWZpbml0aW9uLmdsb2JhbElkRmllbGQ9YS5nbG9iYWxJZEZpZWxkTmFtZSxzLmxheWVyRGVmaW5pdGlvbi5maWVsZHM9YS5maWVsZHMsYS5zcGF0aWFsUmVmZXJlbmNlJiYocy5sYXllckRlZmluaXRpb24uc3BhdGlhbFJlZmVyZW5jZT1hLnNwYXRpYWxSZWZlcmVuY2UpKTtlbHNlIHtpZighKGlbMF1pbnN0YW5jZW9mIGgpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgUGFyYW1ldGVyXCIpO3thPUpTT04ucGFyc2UoaVswXS5jYXN0VG9UZXh0KCkpO2NvbnN0IGU9SChhLFwibGF5ZXJkZWZpbml0aW9uXCIpO2lmKG51bGwhPT1lKXtzLmxheWVyRGVmaW5pdGlvbi5nZW9tZXRyeVR5cGU9SChlLFwiZ2VvbWV0cnl0eXBlXCIsXCJcIikscy5mZWF0dXJlU2V0Lmdlb21ldHJ5VHlwZT1zLmxheWVyRGVmaW5pdGlvbi5nZW9tZXRyeVR5cGUscy5sYXllckRlZmluaXRpb24uZ2xvYmFsSWRGaWVsZD1IKGUsXCJnbG9iYWxpZGZpZWxkXCIsXCJcIikscy5sYXllckRlZmluaXRpb24ub2JqZWN0SWRGaWVsZD1IKGUsXCJvYmplY3RpZGZpZWxkXCIsXCJcIikscy5sYXllckRlZmluaXRpb24udHlwZUlkRmllbGQ9SChlLFwidHlwZWlkZmllbGRcIixcIlwiKTtjb25zdCB0PUgoZSxcInNwYXRpYWxyZWZlcmVuY2VcIixudWxsKTt0JiYocy5sYXllckRlZmluaXRpb24uc3BhdGlhbFJlZmVyZW5jZT1XKHQpKTtmb3IoY29uc3QgciBvZiBIKGUsXCJmaWVsZHNcIixbXSkpe2NvbnN0IGU9e25hbWU6SChyLFwibmFtZVwiLFwiXCIpLGFsaWFzOkgocixcImFsaWFzXCIsXCJcIiksdHlwZTpIKHIsXCJ0eXBlXCIsXCJcIiksbnVsbGFibGU6SChyLFwibnVsbGFibGVcIiwhMCksZWRpdGFibGU6SChyLFwiZWRpdGFibGVcIiwhMCksbGVuZ3RoOkgocixcImxlbmd0aFwiLG51bGwpLGRvbWFpbjpVKEgocixcImRvbWFpblwiKSl9O3MubGF5ZXJEZWZpbml0aW9uLmZpZWxkcy5wdXNoKGUpO31jb25zdCBuPUgoYSxcImZlYXR1cmVzZXRcIixudWxsKTtpZihuKXtjb25zdCBlPXt9O2Zvcihjb25zdCB0IG9mIHMubGF5ZXJEZWZpbml0aW9uLmZpZWxkcyllW3QubmFtZS50b0xvd2VyQ2FzZSgpXT10Lm5hbWU7Zm9yKGNvbnN0IHQgb2YgSChuLFwiZmVhdHVyZXNcIixbXSkpe2NvbnN0IG49e30scj1IKHQsXCJhdHRyaWJ1dGVzXCIse30pO2Zvcihjb25zdCB0IGluIHIpbltlW3QudG9Mb3dlckNhc2UoKV1dPXJbdF07cy5mZWF0dXJlU2V0LmZlYXR1cmVzLnB1c2goe2F0dHJpYnV0ZXM6bixnZW9tZXRyeTpfKEgodCxcImdlb21ldHJ5XCIsbnVsbCkpfSk7fX19ZWxzZSB7cy5sYXllckRlZmluaXRpb24uZ2VvbWV0cnlUeXBlPUgoYSxcImdlb21ldHJ5dHlwZVwiLFwiXCIpLHMuZmVhdHVyZVNldC5nZW9tZXRyeVR5cGU9cy5sYXllckRlZmluaXRpb24uZ2VvbWV0cnlUeXBlLHMubGF5ZXJEZWZpbml0aW9uLm9iamVjdElkRmllbGQ9SChhLFwib2JqZWN0aWRmaWVsZG5hbWVcIixcIlwiKSxzLmxheWVyRGVmaW5pdGlvbi50eXBlSWRGaWVsZD1IKGEsXCJ0eXBlaWRmaWVsZG5hbWVcIixcIlwiKTtjb25zdCBlPUgoYSxcInNwYXRpYWxyZWZlcmVuY2VcIixudWxsKTtlJiYocy5sYXllckRlZmluaXRpb24uc3BhdGlhbFJlZmVyZW5jZT1XKGUpKTtmb3IoY29uc3QgbiBvZiBIKGEsXCJmaWVsZHNcIixbXSkpe2NvbnN0IGU9e25hbWU6SChuLFwibmFtZVwiLFwiXCIpLGFsaWFzOkgobixcImFsaWFzXCIsXCJcIiksdHlwZTpIKG4sXCJ0eXBlXCIsXCJcIiksbnVsbGFibGU6SChuLFwibnVsbGFibGVcIiwhMCksZWRpdGFibGU6SChuLFwiZWRpdGFibGVcIiwhMCksbGVuZ3RoOkgobixcImxlbmd0aFwiLG51bGwpLGRvbWFpbjpVKEgobixcImRvbWFpblwiKSl9O3MubGF5ZXJEZWZpbml0aW9uLmZpZWxkcy5wdXNoKGUpO31jb25zdCB0PXt9O2Zvcihjb25zdCBuIG9mIHMubGF5ZXJEZWZpbml0aW9uLmZpZWxkcyl0W24ubmFtZS50b0xvd2VyQ2FzZSgpXT1uLm5hbWU7Zm9yKGNvbnN0IG4gb2YgSChhLFwiZmVhdHVyZXNcIixbXSkpe2NvbnN0IGU9e30scj1IKG4sXCJhdHRyaWJ1dGVzXCIse30pO2Zvcihjb25zdCBuIGluIHIpZVt0W24udG9Mb3dlckNhc2UoKV1dPXJbbl07cy5mZWF0dXJlU2V0LmZlYXR1cmVzLnB1c2goe2F0dHJpYnV0ZXM6ZSxnZW9tZXRyeTpfKEgobixcImdlb21ldHJ5XCIsbnVsbCkpfSk7fX19fWlmKCExPT09cShzKSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIFBhcmFtZXRlclwiKTtyZXR1cm4geS5jcmVhdGUocyxlLnNwYXRpYWxSZWZlcmVuY2UpfSkpfSxGJDEuc2lnbmF0dXJlcy5wdXNoKHtuYW1lOlwiZmVhdHVyZXNldFwiLG1pbjpcIjFcIixtYXg6XCIxXCJ9KSxGJDEuZnVuY3Rpb25zLmZpbHRlcj1mdW5jdGlvbihyLGkpe3JldHVybiBGJDEuc3RhbmRhcmRGdW5jdGlvbkFzeW5jKHIsaSwoKGkscyxsKT0+KEokMShsLDIsMiksayhsWzBdKT9sWzBdLmxvYWQoKS50aGVuKChuPT57Y29uc3QgaT1mLmNyZWF0ZShsWzFdLG4uZ2V0RmllbGRzSW5kZXgoKSksYT1pLmdldFZhcmlhYmxlcygpO2lmKGEubGVuZ3RoPjApe2NvbnN0IHQ9W107Zm9yKGxldCBlPTA7ZTxhLmxlbmd0aDtlKyspe2NvbnN0IG49e25hbWU6YVtlXX07dC5wdXNoKEYkMS5ldmFsdWF0ZUlkZW50aWZpZXIocixuKSk7fXJldHVybiBzJDEodCkudGhlbigoZT0+e2NvbnN0IHQ9e307Zm9yKGxldCBuPTA7bjxhLmxlbmd0aDtuKyspdFthW25dXT1lW25dO3JldHVybiBpLnBhcmFtZXRlcnM9dCxuZXcgXyQxKHtwYXJlbnRmZWF0dXJlc2V0OmxbMF0sd2hlcmVjbGF1c2U6aX0pfSkpfXJldHVybiB4KG5ldyBfJDEoe3BhcmVudGZlYXR1cmVzZXQ6bFswXSx3aGVyZWNsYXVzZTppfSkpfSkpOkYkMS5mYWlsRGVmZmVycmVkKFwiRmlsdGVyIGNhbm5vdCBhY2NlcHQgdGhpcyBwYXJhbWV0ZXIgdHlwZVwiKSkpKX0sRiQxLnNpZ25hdHVyZXMucHVzaCh7bmFtZTpcImZpbHRlclwiLG1pbjpcIjJcIixtYXg6XCIyXCJ9KSxGJDEuZnVuY3Rpb25zLm9yZGVyYnk9ZnVuY3Rpb24oZSQxLHIpe3JldHVybiBGJDEuc3RhbmRhcmRGdW5jdGlvbkFzeW5jKGUkMSxyLCgoZSQxLHIsaSk9PntpZihKJDEoaSwyLDIpLGsoaVswXSkpe2NvbnN0IGUkMT1uZXcgZShpWzFdKTtyZXR1cm4geChuZXcgYSh7cGFyZW50ZmVhdHVyZXNldDppWzBdLG9yZGVyYnljbGF1c2U6ZSQxfSkpfXJldHVybiBGJDEuZmFpbERlZmZlcnJlZChcIk9yZGVyIGNhbm5vdCBhY2NlcHQgdGhpcyBwYXJhbWV0ZXIgdHlwZVwiKX0pKX0sRiQxLnNpZ25hdHVyZXMucHVzaCh7bmFtZTpcIm9yZGVyYnlcIixtaW46XCIyXCIsbWF4OlwiMlwifSksRiQxLmZ1bmN0aW9ucy50b3A9ZnVuY3Rpb24oZSxyKXtyZXR1cm4gRiQxLnN0YW5kYXJkRnVuY3Rpb25Bc3luYyhlLHIsKChlLHIsaSk9PihKJDEoaSwyLDIpLGsoaVswXSk/eChuZXcgYSQxKHtwYXJlbnRmZWF0dXJlc2V0OmlbMF0sdG9wbnVtOmlbMV19KSk6WihpWzBdKT9YKGlbMV0pPj1pWzBdLmxlbmd0aD9pWzBdLnNsaWNlKDApOmlbMF0uc2xpY2UoMCxYKGlbMV0pKTpFKGlbMF0pP1goaVsxXSk+PWlbMF0ubGVuZ3RoKCk/aVswXS5zbGljZSgwKTppWzBdLnNsaWNlKDAsWChpWzFdKSk6RiQxLmZhaWxEZWZmZXJyZWQoXCJUb3AgY2Fubm90IGFjY2VwdCB0aGlzIHBhcmFtZXRlciB0eXBlXCIpKSkpfSxGJDEuc2lnbmF0dXJlcy5wdXNoKHtuYW1lOlwidG9wXCIsbWluOlwiMlwiLG1heDpcIjJcIn0pLEYkMS5mdW5jdGlvbnMuZmlyc3Q9ZnVuY3Rpb24oZSxyKXtyZXR1cm4gRiQxLnN0YW5kYXJkRnVuY3Rpb25Bc3luYyhlLHIsKChlLHIsaSk9PihKJDEoaSwxLDEpLGsoaVswXSk/aVswXS5maXJzdChlLmFib3J0U2lnbmFsKS50aGVuKChlPT57aWYobnVsbCE9PWUpe2NvbnN0IHQ9Zy5jcmVhdGVGcm9tR3JhcGhpY0xpa2VPYmplY3QoZS5nZW9tZXRyeSxlLmF0dHJpYnV0ZXMsaVswXSk7dC5fdW5kZXJseWluZ0dyYXBoaWM9ZSxlPXQ7fXJldHVybiBlfSkpOlooaVswXSk/MD09PWlbMF0ubGVuZ3RoP3gobnVsbCk6eChpWzBdWzBdKTpFKGlbMF0pPzA9PT1pWzBdLmxlbmd0aCgpP3gobnVsbCk6eChpWzBdLmdldCgwKSk6bnVsbCkpKX0sRiQxLnNpZ25hdHVyZXMucHVzaCh7bmFtZTpcImZpcnN0XCIsbWluOlwiMVwiLG1heDpcIjFcIn0pLEYkMS5mdW5jdGlvbnMuYXR0YWNobWVudHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gRiQxLnN0YW5kYXJkRnVuY3Rpb25Bc3luYyhlLHQsKCh0LHIsaSk9PntKJDEoaSwxLDIpO2NvbnN0IHM9e21pbnNpemU6LTEsbWF4c2l6ZTotMSx0eXBlczpudWxsfTtpZihpLmxlbmd0aD4xKWlmKGlbMV1pbnN0YW5jZW9mIGgpe2lmKGlbMV0uaGFzRmllbGQoXCJtaW5zaXplXCIpJiYocy5taW5zaXplPVgoaVsxXS5maWVsZChcIm1pbnNpemVcIikpKSxpWzFdLmhhc0ZpZWxkKFwibWF4c2l6ZVwiKSYmKHMubWF4c2l6ZT1YKGlbMV0uZmllbGQoXCJtYXhzaXplXCIpKSksaVsxXS5oYXNGaWVsZChcInR5cGVzXCIpKXtjb25zdCBlPWdlKGlbMV0uZmllbGQoXCJ0eXBlc1wiKSwhMSk7ZS5sZW5ndGg+MCYmKHMudHlwZXM9ZSk7fX1lbHNlIGlmKG51bGwhPT1pWzFdKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgUGFyYW1ldGVyXCIpO2lmKGlbMF1pbnN0YW5jZW9mIGcpe2xldCB0PWlbMF0uX2xheWVyO3JldHVybiB0IGluc3RhbmNlb2Yga2UmJih0PUEodCxlLnNwYXRpYWxSZWZlcmVuY2UsW1wiKlwiXSwhMCxlLmxydWNhY2hlLGUuaW50ZXJjZXB0b3IpKSxudWxsPT09dHx8ITE9PT1rKHQpP1tdOnQubG9hZCgpLnRoZW4oKCgpPT50LnF1ZXJ5QXR0YWNobWVudHMoaVswXS5maWVsZCh0Lm9iamVjdElkRmllbGQpLHMubWluc2l6ZSxzLm1heHNpemUscy50eXBlcykpKX1pZihudWxsPT09aVswXSlyZXR1cm4gW107dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBQYXJhbWV0ZXJcIil9KSl9LEYkMS5zaWduYXR1cmVzLnB1c2goe25hbWU6XCJhdHRhY2htZW50c1wiLG1pbjpcIjFcIixtYXg6XCIyXCJ9KSxGJDEuZnVuY3Rpb25zLmZlYXR1cmVzZXRieXJlbGF0aW9uc2hpcG5hbWU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gRiQxLnN0YW5kYXJkRnVuY3Rpb25Bc3luYyhlLHQsKCh0LG8sZiQxKT0+e0okMShmJDEsMiw0KTtjb25zdCB1PWYkMVswXSxjPUskMShmJDFbMV0pO2xldCBkPU8oZiQxWzJdLG51bGwpO2NvbnN0IG09ZWUoTyhmJDFbM10sITApKTtpZihudWxsPT09ZCYmKGQ9W1wiKlwiXSksITE9PT1aKGQpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgUGFyYW1ldGVyXCIpO2lmKG51bGw9PT1mJDFbMF0pcmV0dXJuIG51bGw7aWYoIShmJDFbMF1pbnN0YW5jZW9mIGcpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgUGFyYW1ldGVyXCIpO2xldCBwPXUuX2xheWVyO3JldHVybiBwIGluc3RhbmNlb2Yga2UmJihwPUEocCxlLnNwYXRpYWxSZWZlcmVuY2UsW1wiKlwiXSwhMCxlLmxydWNhY2hlLGUuaW50ZXJjZXB0b3IpKSxudWxsPT09cHx8ITE9PT1rKHApP251bGw6cC5sb2FkKCkudGhlbigodD0+e2NvbnN0IG4kMT10LnJlbGF0aW9uc2hpcE1ldGFEYXRhKCkuZmlsdGVyKChlPT5lLm5hbWU9PT1jKSk7aWYoMD09PW4kMS5sZW5ndGgpcmV0dXJuIG51bGw7aWYodm9pZCAwIT09biQxWzBdLnJlbGF0aW9uc2hpcFRhYmxlSWQmJm51bGwhPT1uJDFbMF0ucmVsYXRpb25zaGlwVGFibGVJZCYmbiQxWzBdLnJlbGF0aW9uc2hpcFRhYmxlSWQ+LTEpcmV0dXJuIGoodCxuJDFbMF0sdS5maWVsZCh0Lm9iamVjdElkRmllbGQpLHQuc3BhdGlhbFJlZmVyZW5jZSxkLG0sZS5scnVjYWNoZSxlLmludGVyY2VwdG9yKTtsZXQgcj10LnNlcnZpY2VVcmwoKTtyZXR1cm4gcj8ocj1cIi9cIj09PXIuY2hhckF0KHIubGVuZ3RoLTEpP3IrbiQxWzBdLnJlbGF0ZWRUYWJsZUlkLnRvU3RyaW5nKCk6citcIi9cIituJDFbMF0ucmVsYXRlZFRhYmxlSWQudG9TdHJpbmcoKSxUKHIsdC5zcGF0aWFsUmVmZXJlbmNlLGQsbSxlLmxydWNhY2hlLGUuaW50ZXJjZXB0b3IpLnRoZW4oKGU9PmUubG9hZCgpLnRoZW4oKCgpPT5lLnJlbGF0aW9uc2hpcE1ldGFEYXRhKCkpKS50aGVuKChyPT57aWYocj1yLmZpbHRlcigoZT0+ZS5pZD09PW4kMVswXS5pZCkpLCExPT09dS5oYXNGaWVsZChuJDFbMF0ua2V5RmllbGQpfHxudWxsPT09dS5maWVsZChuJDFbMF0ua2V5RmllbGQpKXJldHVybiB0LmdldEZlYXR1cmVCeU9iamVjdElkKHUuZmllbGQodC5vYmplY3RJZEZpZWxkKSxbbiQxWzBdLmtleUZpZWxkXSkudGhlbigodD0+e2lmKHQpe2NvbnN0IGk9Zi5jcmVhdGUoclswXS5rZXlGaWVsZCtcIj0gQGlkXCIsZS5nZXRGaWVsZHNJbmRleCgpKTtyZXR1cm4gaS5wYXJhbWV0ZXJzPXtpZDp0LmF0dHJpYnV0ZXNbbiQxWzBdLmtleUZpZWxkXX0sZS5maWx0ZXIoaSl9cmV0dXJuIG5ldyBuKHtwYXJlbnRmZWF0dXJlc2V0OmV9KX0pKTtjb25zdCBpPWYuY3JlYXRlKHJbMF0ua2V5RmllbGQrXCI9IEBpZFwiLGUuZ2V0RmllbGRzSW5kZXgoKSk7cmV0dXJuIGkucGFyYW1ldGVycz17aWQ6dS5maWVsZChuJDFbMF0ua2V5RmllbGQpfSxlLmZpbHRlcihpKX0pKSkpKTpudWxsfSkpfSkpfSxGJDEuc2lnbmF0dXJlcy5wdXNoKHtuYW1lOlwiZmVhdHVyZXNldGJ5cmVsYXRpb25zaGlwbmFtZVwiLG1pbjpcIjJcIixtYXg6XCI0XCJ9KSxGJDEuZnVuY3Rpb25zLmZlYXR1cmVzZXRieWFzc29jaWF0aW9uPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIEYkMS5zdGFuZGFyZEZ1bmN0aW9uQXN5bmMoZSx0LCgodCxzLGwpPT57SiQxKGwsMiwzKTtjb25zdCBmJDE9bFswXSx1PUskMShPKGxbMV0sXCJcIikpLnRvTG93ZXJDYXNlKCksYz1GKGxbMl0pP0skMShsWzJdKTpudWxsO2lmKG51bGw9PT1sWzBdKXJldHVybiBudWxsO2lmKCEobFswXWluc3RhbmNlb2YgZykpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBQYXJhbWV0ZXJcIik7bGV0IG09ZiQxLl9sYXllcjtyZXR1cm4gbSBpbnN0YW5jZW9mIGtlJiYobT1BKG0sZS5zcGF0aWFsUmVmZXJlbmNlLFtcIipcIl0sITAsZS5scnVjYWNoZSxlLmludGVyY2VwdG9yKSksbnVsbD09PW18fCExPT09ayhtKT9udWxsOm0ubG9hZCgpLnRoZW4oKCgpPT57Y29uc3QgdD1tLnNlcnZpY2VVcmwoKTtyZXR1cm4gayQxKHQsZS5zcGF0aWFsUmVmZXJlbmNlKX0pKS50aGVuKChlPT57bGV0IHQ9bnVsbCxuPW51bGwscj0hMTtpZihudWxsIT09YyYmXCJcIiE9PWMmJnZvaWQgMCE9PWMpe2Zvcihjb25zdCB0IG9mIGUudGVybWluYWxzKXQudGVybWluYWxOYW1lPT09YyYmKG49dC50ZXJtaW5hbElkKTtudWxsPT09biYmKHI9ITApO31jb25zdCBpPWUuYXNzb2NpYXRpb25zLmdldEZpZWxkc0luZGV4KCksYT1pLmdldChcIlRPR0xPQkFMSURcIikubmFtZSxzPWkuZ2V0KFwiRlJPTUdMT0JBTElEXCIpLm5hbWUsbD1pLmdldChcIlRPVEVSTUlOQUxJRFwiKS5uYW1lLG89aS5nZXQoXCJGUk9NVEVSTUlOQUxJRFwiKS5uYW1lLHA9aS5nZXQoXCJGUk9NTkVUV09SS1NPVVJDRUlEXCIpLm5hbWUsaD1pLmdldChcIlRPTkVUV09SS1NPVVJDRUlEXCIpLm5hbWUsRj1pLmdldChcIkFTU09DSUFUSU9OVFlQRVwiKS5uYW1lLEk9aS5nZXQoXCJJU0NPTlRFTlRWSVNJQkxFXCIpLm5hbWUsRD1pLmdldChcIk9CSkVDVElEXCIpLm5hbWU7Zm9yKGNvbnN0IHUgb2YgbS5maWVsZHMpaWYoXCJnbG9iYWwtaWRcIj09PXUudHlwZSl7dD1mJDEuZmllbGQodS5uYW1lKTticmVha31sZXQgdyQxPW51bGwsJD1uZXcgVCQxKG5ldyB5JDEoe25hbWU6XCJwZXJjZW50YWxvbmdcIixhbGlhczpcInBlcmNlbnRhbG9uZ1wiLHR5cGU6XCJkb3VibGVcIn0pLGYuY3JlYXRlKFwiMFwiLGUuYXNzb2NpYXRpb25zLmdldEZpZWxkc0luZGV4KCkpKSxUPW5ldyBUJDEobmV3IHkkMSh7bmFtZTpcInNpZGVcIixhbGlhczpcInNpZGVcIix0eXBlOlwic3RyaW5nXCJ9KSxmLmNyZWF0ZShcIicnXCIsZS5hc3NvY2lhdGlvbnMuZ2V0RmllbGRzSW5kZXgoKSkpO2NvbnN0IEw9XCJnbG9iYWxpZFwiLHYkMT1cImdsb2JhbElkXCIsaj17fTtmb3IoY29uc3QgZiBpbiBlLmxrcClqW2ZdPWUubGtwW2ZdLnNvdXJjZUlkO2NvbnN0IE89bmV3IEMobmV3IHkkMSh7bmFtZTpcImNsYXNzbmFtZVwiLGFsaWFzOlwiY2xhc3NuYW1lXCIsdHlwZTpcInN0cmluZ1wifSksbnVsbCxqKTtsZXQgUj1cIlwiO3N3aXRjaCh1KXtjYXNlXCJtaWRzcGFuXCI6e1I9YCgoJHthfT0nJHt0fScpIE9SICggJHtzfT0nJHt0fScpKSBBTkQgKCR7Rn0gSU4gKDUpKWAsTy5jb2RlZmllbGQ9Zi5jcmVhdGUoYENBU0UgV0hFTiAoJHthfT0nJHt0fScpIFRIRU4gJHtwfSBFTFNFICR7aH0gRU5EYCxlLmFzc29jaWF0aW9ucy5nZXRGaWVsZHNJbmRleCgpKTtjb25zdCBuPXMkMihFJDEuZmluZEZpZWxkKGUuYXNzb2NpYXRpb25zLmZpZWxkcyxzKSk7bi5uYW1lPUwsbi5hbGlhcz1MLHckMT1uZXcgVCQxKG4sZi5jcmVhdGUoYENBU0UgV0hFTiAoJHtzfT0nJHt0fScpIFRIRU4gJHthfSBFTFNFICR7c30gRU5EYCxlLmFzc29jaWF0aW9ucy5nZXRGaWVsZHNJbmRleCgpKSksJD1lLnVuVmVyc2lvbj49ND9uZXcgdyhFJDEuZmluZEZpZWxkKGUuYXNzb2NpYXRpb25zLmZpZWxkcyxpLmdldChcIlBFUkNFTlRBTE9OR1wiKS5uYW1lKSk6bmV3IFQkMShuZXcgeSQxKHtuYW1lOlwicGVyY2VudGFsb25nXCIsYWxpYXM6XCJwZXJjZW50YWxvbmdcIix0eXBlOlwiZG91YmxlXCJ9KSxmLmNyZWF0ZShcIjBcIixlLmFzc29jaWF0aW9ucy5nZXRGaWVsZHNJbmRleCgpKSk7YnJlYWt9Y2FzZVwianVuY3Rpb25lZGdlXCI6e1I9YCgoJHthfT0nJHt0fScpIE9SICggJHtzfT0nJHt0fScpKSBBTkQgKCR7Rn0gSU4gKDQsNikpYCxPLmNvZGVmaWVsZD1mLmNyZWF0ZShgQ0FTRSBXSEVOICgke2F9PScke3R9JykgVEhFTiAke3B9IEVMU0UgJHtofSBFTkRgLGUuYXNzb2NpYXRpb25zLmdldEZpZWxkc0luZGV4KCkpO2NvbnN0IG49cyQyKEUkMS5maW5kRmllbGQoZS5hc3NvY2lhdGlvbnMuZmllbGRzLHMpKTtuLm5hbWU9TCxuLmFsaWFzPUwsdyQxPW5ldyBUJDEobixmLmNyZWF0ZShgQ0FTRSBXSEVOICgke3N9PScke3R9JykgVEhFTiAke2F9IEVMU0UgJHtzfSBFTkRgLGUuYXNzb2NpYXRpb25zLmdldEZpZWxkc0luZGV4KCkpKSxUPW5ldyBUJDEobmV3IHkkMSh7bmFtZTpcInNpZGVcIixhbGlhczpcInNpZGVcIix0eXBlOlwic3RyaW5nXCJ9KSxmLmNyZWF0ZShgQ0FTRSBXSEVOICgke0Z9PTQpIFRIRU4gJ2Zyb20nIEVMU0UgJ3RvJyBFTkRgLGUuYXNzb2NpYXRpb25zLmdldEZpZWxkc0luZGV4KCkpKTticmVha31jYXNlXCJjb25uZWN0ZWRcIjp7bGV0IHI9YCR7YX09J0BUJ2AsaT1gJHtzfT0nQFQnYDtudWxsIT09biYmKHIrPWAgQU5EICR7bH09QEFgLGkrPWAgQU5EICR7b309QEFgKSxSPVwiKChcIityK1wiKSBPUiAoXCIraStcIikpXCIsUj1NKFIsXCJAVFwiLHQpLHI9TShyLFwiQFRcIix0KSxudWxsIT09biYmKHI9TShyLFwiQEFcIixuLnRvU3RyaW5nKCkpLFI9TShSLFwiQEFcIixuLnRvU3RyaW5nKCkpKSxPLmNvZGVmaWVsZD1mLmNyZWF0ZShcIkNBU0UgV0hFTiBcIityK2AgVEhFTiAke3B9IEVMU0UgJHtofSBFTkRgLGUuYXNzb2NpYXRpb25zLmdldEZpZWxkc0luZGV4KCkpO2NvbnN0IGYkMT1zJDIoRSQxLmZpbmRGaWVsZChlLmFzc29jaWF0aW9ucy5maWVsZHMscykpO2YkMS5uYW1lPUwsZiQxLmFsaWFzPUwsdyQxPW5ldyBUJDEoZiQxLGYuY3JlYXRlKFwiQ0FTRSBXSEVOIFwiK3IrYCBUSEVOICR7c30gRUxTRSAke2F9IEVORGAsZS5hc3NvY2lhdGlvbnMuZ2V0RmllbGRzSW5kZXgoKSkpO2JyZWFrfWNhc2VcImNvbnRhaW5lclwiOlI9YCR7YX09JyR7dH0nIEFORCAke0Z9ID0gMmAsbnVsbCE9PW4mJihSKz1gIEFORCAke2x9ID0gYCtuLnRvU3RyaW5nKCkpLE8uY29kZWZpZWxkPXAsUj1cIiggXCIrUitcIiApXCIsdyQxPW5ldyB2KEUkMS5maW5kRmllbGQoZS5hc3NvY2lhdGlvbnMuZmllbGRzLHMpLEwsTCk7Y2FzZVwiY29udGVudFwiOlI9YCgke3N9PScke3R9JyBBTkQgJHtGfSA9IDIpYCxudWxsIT09biYmKFIrPWAgQU5EICR7b30gPSBgK24udG9TdHJpbmcoKSksTy5jb2RlZmllbGQ9aCxSPVwiKCBcIitSK1wiIClcIix3JDE9bmV3IHYoRSQxLmZpbmRGaWVsZChlLmFzc29jaWF0aW9ucy5maWVsZHMsYSksTCxMKTticmVhaztjYXNlXCJzdHJ1Y3R1cmVcIjpSPWAoJHthfT0nJHt0fScgQU5EICR7Rn0gPSAzKWAsbnVsbCE9PW4mJihSKz1gIEFORCAke2x9ID0gYCtuLnRvU3RyaW5nKCkpLE8uY29kZWZpZWxkPXAsUj1cIiggXCIrUitcIiApXCIsdyQxPW5ldyB2KEUkMS5maW5kRmllbGQoZS5hc3NvY2lhdGlvbnMuZmllbGRzLHMpLEwsdiQxKTticmVhaztjYXNlXCJhdHRhY2hlZFwiOlI9YCgke3N9PScke3R9JyBBTkQgJHtGfSA9IDMpYCxudWxsIT09biYmKFIrPWAgQU5EICR7b30gPSBgK24udG9TdHJpbmcoKSksTy5jb2RlZmllbGQ9aCxSPVwiKCBcIitSK1wiIClcIix3JDE9bmV3IHYoRSQxLmZpbmRGaWVsZChlLmFzc29jaWF0aW9ucy5maWVsZHMsYSksTCx2JDEpO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBQYXJhbWV0ZXJcIil9ciYmKFI9XCIxIDw+IDFcIik7cmV0dXJuIG5ldyBFJDEoe3BhcmVudGZlYXR1cmVzZXQ6ZS5hc3NvY2lhdGlvbnMsYWRhcHRlZEZpZWxkczpbbmV3IHcoRSQxLmZpbmRGaWVsZChlLmFzc29jaWF0aW9ucy5maWVsZHMsRCkpLG5ldyB3KEUkMS5maW5kRmllbGQoZS5hc3NvY2lhdGlvbnMuZmllbGRzLEkpKSx3JDEsVCxPLCRdLGV4dHJhRmlsdGVyOlI/Zi5jcmVhdGUoUixlLmFzc29jaWF0aW9ucy5nZXRGaWVsZHNJbmRleCgpKTpudWxsfSl9KSl9KSl9LEYkMS5zaWduYXR1cmVzLnB1c2goe25hbWU6XCJmZWF0dXJlc2V0Ynlhc3NvY2lhdGlvblwiLG1pbjpcIjJcIixtYXg6XCI2XCJ9KSxGJDEuZnVuY3Rpb25zLmdyb3VwYnk9ZnVuY3Rpb24ocixzKXtyZXR1cm4gRiQxLnN0YW5kYXJkRnVuY3Rpb25Bc3luYyhyLHMsKChzLGYkMSxjKT0+KEokMShjLDMsMyksayhjWzBdKT9jWzBdLmxvYWQoKS50aGVuKChuPT57Y29uc3QgYT1bXSxzPVtdO2xldCBmJDE9ITEsZD1bXTtpZihGKGNbMV0pKWQucHVzaChjWzFdKTtlbHNlIGlmKGNbMV1pbnN0YW5jZW9mIGgpZC5wdXNoKGNbMV0pO2Vsc2UgaWYoWihjWzFdKSlkPWNbMV07ZWxzZSB7aWYoIUUoY1sxXSkpcmV0dXJuIEYkMS5mYWlsRGVmZmVycmVkKFwiSWxsZWdhbCBWYWx1ZTogR3JvdXBCeVwiKTtkPWNbMV0udG9BcnJheSgpO31mb3IoY29uc3QgZSBvZiBkKWlmKEYoZSkpe2NvbnN0IHQ9Zi5jcmVhdGUoSyQxKGUpLG4uZ2V0RmllbGRzSW5kZXgoKSkscj0hMD09PUUkMih0KT9LJDEoZSk6XCIlJSUlRklFTEROQU1FXCI7YS5wdXNoKHtuYW1lOnIsZXhwcmVzc2lvbjp0fSksXCIlJSUlRklFTEROQU1FXCI9PT1yJiYoZiQxPSEwKTt9ZWxzZSB7aWYoIShlIGluc3RhbmNlb2YgaCkpcmV0dXJuIEYkMS5mYWlsRGVmZmVycmVkKFwiSWxsZWdhbCBWYWx1ZTogR3JvdXBCeVwiKTt7Y29uc3QgdD1lLmhhc0ZpZWxkKFwibmFtZVwiKT9lLmZpZWxkKFwibmFtZVwiKTpcIiUlJSVGSUVMRE5BTUVcIixyPWUuaGFzRmllbGQoXCJleHByZXNzaW9uXCIpP2UuZmllbGQoXCJleHByZXNzaW9uXCIpOlwiXCI7aWYoXCIlJSUlRklFTEROQU1FXCI9PT10JiYoZiQxPSEwKSwhdClyZXR1cm4gRiQxLmZhaWxEZWZmZXJyZWQoXCJJbGxlZ2FsIFZhbHVlOiBHcm91cEJ5XCIpO2EucHVzaCh7bmFtZTp0LGV4cHJlc3Npb246Zi5jcmVhdGUocnx8dCxuLmdldEZpZWxkc0luZGV4KCkpfSk7fX1pZihkPVtdLEYoY1syXSkpZC5wdXNoKGNbMl0pO2Vsc2UgaWYoWihjWzJdKSlkPWNbMl07ZWxzZSBpZihFKGNbMl0pKWQ9Y1syXS50b0FycmF5KCk7ZWxzZSB7aWYoIShjWzJdaW5zdGFuY2VvZiBoKSlyZXR1cm4gRiQxLmZhaWxEZWZmZXJyZWQoXCJJbGxlZ2FsIFZhbHVlOiBHcm91cEJ5XCIpO2QucHVzaChjWzJdKTt9Zm9yKGNvbnN0IGUgb2YgZCl7aWYoIShlIGluc3RhbmNlb2YgaCkpcmV0dXJuIEYkMS5mYWlsRGVmZmVycmVkKFwiSWxsZWdhbCBWYWx1ZTogR3JvdXBCeVwiKTt7Y29uc3QgdD1lLmhhc0ZpZWxkKFwibmFtZVwiKT9lLmZpZWxkKFwibmFtZVwiKTpcIlwiLHI9ZS5oYXNGaWVsZChcInN0YXRpc3RpY1wiKT9lLmZpZWxkKFwic3RhdGlzdGljXCIpOlwiXCIsaT1lLmhhc0ZpZWxkKFwiZXhwcmVzc2lvblwiKT9lLmZpZWxkKFwiZXhwcmVzc2lvblwiKTpcIlwiO2lmKCF0fHwhcnx8IWkpcmV0dXJuIEYkMS5mYWlsRGVmZmVycmVkKFwiSWxsZWdhbCBWYWx1ZTogR3JvdXBCeVwiKTtzLnB1c2goe25hbWU6dCxzdGF0aXN0aWM6ci50b0xvd2VyQ2FzZSgpLGV4cHJlc3Npb246Zi5jcmVhdGUoaSxuLmdldEZpZWxkc0luZGV4KCkpfSk7fX1pZihmJDEpe2NvbnN0IGU9e307Zm9yKGNvbnN0IHIgb2Ygbi5maWVsZHMpZVtyLm5hbWUudG9Mb3dlckNhc2UoKV09MTtmb3IoY29uc3QgbiBvZiBhKVwiJSUlJUZJRUxETkFNRVwiIT09bi5uYW1lJiYoZVtuLm5hbWUudG9Mb3dlckNhc2UoKV09MSk7Zm9yKGNvbnN0IG4gb2YgcylcIiUlJSVGSUVMRE5BTUVcIiE9PW4ubmFtZSYmKGVbbi5uYW1lLnRvTG93ZXJDYXNlKCldPTEpO2xldCB0PTA7Zm9yKGNvbnN0IG4gb2YgYSlpZihcIiUlJSVGSUVMRE5BTUVcIj09PW4ubmFtZSl7Zm9yKDsxPT09ZVtcImZpZWxkX1wiK3QudG9TdHJpbmcoKV07KXQrKztlW1wiZmllbGRfXCIrdC50b1N0cmluZygpXT0xLG4ubmFtZT1cIkZJRUxEX1wiK3QudG9TdHJpbmcoKTt9fWNvbnN0IHA9W107Zm9yKGNvbnN0IGUgb2YgYSlwLnB1c2goeihlLmV4cHJlc3Npb24sRiQxLHIpKTtmb3IoY29uc3QgZSBvZiBzKXAucHVzaCh6KGUuZXhwcmVzc2lvbixGJDEscikpO3JldHVybiBwLmxlbmd0aD4wP3MkMShwKS50aGVuKCgoKT0+eChjWzBdLmdyb3VwYnkoYSxzKSkpKTp4KGNbMF0uZ3JvdXBieShhLHMpKX0pKTpGJDEuZmFpbERlZmZlcnJlZChcIklsbGVnYWwgVmFsdWU6IEdyb3VwQnlcIikpKSl9LEYkMS5zaWduYXR1cmVzLnB1c2goe25hbWU6XCJncm91cGJ5XCIsbWluOlwiM1wiLG1heDpcIjNcIn0pLEYkMS5mdW5jdGlvbnMuZGlzdGluY3Q9ZnVuY3Rpb24ocixzKXtyZXR1cm4gRiQxLnN0YW5kYXJkRnVuY3Rpb25Bc3luYyhyLHMsKChzLGYkMSxjKT0+ayhjWzBdKT8oSiQxKGMsMiwyKSxjWzBdLmxvYWQoKS50aGVuKChuPT57Y29uc3QgYT1bXTtsZXQgcz1bXTtpZihGKGNbMV0pKXMucHVzaChjWzFdKTtlbHNlIGlmKGNbMV1pbnN0YW5jZW9mIGgpcy5wdXNoKGNbMV0pO2Vsc2UgaWYoWihjWzFdKSlzPWNbMV07ZWxzZSB7aWYoIUUoY1sxXSkpcmV0dXJuIEYkMS5mYWlsRGVmZmVycmVkKFwiSWxsZWdhbCBWYWx1ZTogR3JvdXBCeVwiKTtzPWNbMV0udG9BcnJheSgpO31sZXQgZiQxPSExO2Zvcihjb25zdCBlIG9mIHMpaWYoRihlKSl7Y29uc3QgdD1mLmNyZWF0ZShLJDEoZSksbi5nZXRGaWVsZHNJbmRleCgpKSxyPSEwPT09RSQyKHQpP0skMShlKTpcIiUlJSVGSUVMRE5BTUVcIjthLnB1c2goe25hbWU6cixleHByZXNzaW9uOnR9KSxcIiUlJSVGSUVMRE5BTUVcIj09PXImJihmJDE9ITApO31lbHNlIHtpZighKGUgaW5zdGFuY2VvZiBoKSlyZXR1cm4gRiQxLmZhaWxEZWZmZXJyZWQoXCJJbGxlZ2FsIFZhbHVlOiBHcm91cEJ5XCIpO3tjb25zdCB0PWUuaGFzRmllbGQoXCJuYW1lXCIpP2UuZmllbGQoXCJuYW1lXCIpOlwiJSUlJUZJRUxETkFNRVwiLHI9ZS5oYXNGaWVsZChcImV4cHJlc3Npb25cIik/ZS5maWVsZChcImV4cHJlc3Npb25cIik6XCJcIjtpZihcIiUlJSVGSUVMRE5BTUVcIj09PXQmJihmJDE9ITApLCF0KXJldHVybiBGJDEuZmFpbERlZmZlcnJlZChcIklsbGVnYWwgVmFsdWU6IEdyb3VwQnlcIik7YS5wdXNoKHtuYW1lOnQsZXhwcmVzc2lvbjpmLmNyZWF0ZShyfHx0LG4uZ2V0RmllbGRzSW5kZXgoKSl9KTt9fWlmKGYkMSl7Y29uc3QgZT17fTtmb3IoY29uc3QgciBvZiBuLmZpZWxkcyllW3IubmFtZS50b0xvd2VyQ2FzZSgpXT0xO2Zvcihjb25zdCBuIG9mIGEpXCIlJSUlRklFTEROQU1FXCIhPT1uLm5hbWUmJihlW24ubmFtZS50b0xvd2VyQ2FzZSgpXT0xKTtsZXQgdD0wO2Zvcihjb25zdCBuIG9mIGEpaWYoXCIlJSUlRklFTEROQU1FXCI9PT1uLm5hbWUpe2Zvcig7MT09PWVbXCJmaWVsZF9cIit0LnRvU3RyaW5nKCldOyl0Kys7ZVtcImZpZWxkX1wiK3QudG9TdHJpbmcoKV09MSxuLm5hbWU9XCJGSUVMRF9cIit0LnRvU3RyaW5nKCk7fX1jb25zdCBkPVtdO2Zvcihjb25zdCBlIG9mIGEpZC5wdXNoKHooZS5leHByZXNzaW9uLEYkMSxyKSk7cmV0dXJuIGQubGVuZ3RoPjA/cyQxKGQpLnRoZW4oKCgpPT54KGNbMF0uZ3JvdXBieShhLFtdKSkpKTp4KGNbMF0uZ3JvdXBieShhLFtdKSl9KSkpOlYoXCJkaXN0aW5jdFwiLHMsZiQxLGMpKSl9KTt9XG5cbmV4cG9ydCB7IEsgYXMgcmVnaXN0ZXJGdW5jdGlvbnMgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmVhdHVyZXNldGJhc2UtZTdkZTZhZWQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9