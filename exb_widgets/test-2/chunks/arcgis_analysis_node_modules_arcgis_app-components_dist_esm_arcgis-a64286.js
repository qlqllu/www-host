"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-a64286"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-data-store-select-cloud-credentials.entry.js":
/*!************************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-data-store-select-cloud-credentials.entry.js ***!
  \************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   arcgis_new_item_pages_data_store_select_cloud_credentials: () => (/* binding */ ArcgisNewItemPagesDataStoreSelectCloudCredentials)
/* harmony export */ });
/* harmony import */ var _index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-92ebb396.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-92ebb396.js");
/* harmony import */ var _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config-eb5f7dc2.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/config-eb5f7dc2.js");
/* harmony import */ var _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./add-item-97d577a9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/add-item-97d577a9.js");
/* harmony import */ var _data_store_f509564d_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./data-store-f509564d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/data-store-f509564d.js");
/* harmony import */ var _ui_ecf86bba_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ui-ecf86bba.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ui-ecf86bba.js");
/* harmony import */ var _data_store_e8b5ce2f_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./data-store-e8b5ce2f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/data-store-e8b5ce2f.js");
/* harmony import */ var _item_properties_e6412a9a_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./item-properties-e6412a9a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-properties-e6412a9a.js");
/* harmony import */ var _data_store_7545f471_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./data-store-7545f471.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/data-store-7545f471.js");
/* harmony import */ var _index_81d548b7_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./index-81d548b7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-81d548b7.js");
/* harmony import */ var _portal_79caaeff_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./portal-79caaeff.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/portal-79caaeff.js");
/* harmony import */ var _loadModules_aaf30bd6_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./loadModules-aaf30bd6.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/loadModules-aaf30bd6.js");
/* harmony import */ var _privileges_ccd5f37d_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./privileges-ccd5f37d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/privileges-ccd5f37d.js");
/* harmony import */ var _functional_c82f5ab9_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./functional-c82f5ab9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-c82f5ab9.js");
/* harmony import */ var _item_d9d70416_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./item-d9d70416.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-d9d70416.js");
/* harmony import */ var _feature_layer_38cdae87_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./feature-layer-38cdae87.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-38cdae87.js");
/* harmony import */ var _feature_layer_d33ea114_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./feature-layer-d33ea114.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-d33ea114.js");
/* harmony import */ var _guid_4f4176ba_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./guid-4f4176ba.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/guid-4f4176ba.js");
/* harmony import */ var _thumbnail_0b7adfcd_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./thumbnail-0b7adfcd.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/thumbnail-0b7adfcd.js");
/* harmony import */ var _query_4f7b7e4d_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./query-4f7b7e4d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/query-4f7b7e4d.js");
/* harmony import */ var _user_e3dedc4a_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./user-e3dedc4a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/user-e3dedc4a.js");
/* harmony import */ var _api_f7934cd7_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./api-f7934cd7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/api-f7934cd7.js");
/* harmony import */ var _server_item_f12153e6_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./server-item-f12153e6.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/server-item-f12153e6.js");
/* harmony import */ var _functional_9f648bee_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./functional-9f648bee.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-9f648bee.js");
/* harmony import */ var _item_types_b4fe86ad_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./item-types-b4fe86ad.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-types-b4fe86ad.js");
/* harmony import */ var _dom_13f5b00c_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./dom-13f5b00c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/dom-13f5b00c.js");
/* harmony import */ var _feature_layer_69305a85_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./feature-layer-69305a85.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-69305a85.js");
/* harmony import */ var _ags_68d4ae20_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./ags-68d4ae20.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ags-68d4ae20.js");
/* harmony import */ var _url_f3b82cc7_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./url-f3b82cc7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/url-f3b82cc7.js");
/* harmony import */ var _storage_d7f5822e_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./storage-d7f5822e.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/storage-d7f5822e.js");
/* harmony import */ var _file_f36193e9_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./file-f36193e9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/file-f36193e9.js");
/* harmony import */ var _store_3210b604_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./store-3210b604.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/store-3210b604.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */
































const arcgisNewItemPagesDataStoreSelectCloudCredentialsCss = "calcite-label{--calcite-label-margin-bottom:1.25rem}.configure-form{margin-top:1.5rem}.hide{display:none}.show{display:block}";

const ArcgisNewItemPagesDataStoreSelectCloudCredentials = class {
  constructor(hostRef) {
    (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.newItemUpdatePage = (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "newItemUpdatePage", 7);
    this.credentialType = null;
    this.authenticationTypes = [
      "activeDirectory",
      "sharedKey",
      "sasToken",
      "anonymous"
    ];
    this.identityTypes = [
      // "servicePrincipal",
      "userAssignedIdentity"
    ];
    this.selectedAuthenticationType = undefined;
    this.selectedIdentityType = undefined;
    this.endpoint = "";
    this.token = "";
    this.tenantId = "";
    this.clientId = "";
    this.clientSecret = "";
    this.accessKey = "";
    this.secretKey = "";
    this.accountName = "";
    this.accountKey = "";
    this.containerName = "";
    this.selectedRegionId = null;
    this.storageURL = "";
    this.bucketName = "";
    this.cloudFolder = "";
    this.regionSelectOptions = [];
    this.showPrivateURL = false;
    this.credentialTypeOptions = [];
    this.missingFields = {};
    this.loading = false;
    this.loaderType = "indeterminate";
    this.loaderMessage = undefined;
    this.invalidEndpoint = false;
    this.error = undefined;
  }
  async componentWillLoad() {
    this.i18n = _ui_ecf86bba_js__WEBPACK_IMPORTED_MODULE_4__.u.i18n.dataStoreSelectCloud;
    this.credentialTypesI18N = _ui_ecf86bba_js__WEBPACK_IMPORTED_MODULE_4__.u.i18n.dataStoreSelectCloud.credentialTypes;
    this.provider =
      _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.addDataStoreType === "bdfs"
        ? _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.bdfsCloudProvider
        : _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.provider;
    this.populateCredentialTypes();
    const regions = await (0,_data_store_f509564d_js__WEBPACK_IMPORTED_MODULE_3__.f)(this.provider);
    this.addOptions((regions === null || regions === void 0 ? void 0 : regions.result) || []);
    this.populateFields();
  }
  populateFields() {
    const { provider } = this;
    switch (provider) {
      case "amazon":
        if (_add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.credentialType) {
          this.credentialType = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.credentialType;
        }
        this.accessKey = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.accessKey;
        this.secretKey = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.secretKey;
        if (_add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.selectedRegion) {
          this.selectedRegionId = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.selectedRegion.id;
        }
        this.storageURL = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.storageURL;
        this.bucketName = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.bucketName;
        this.cloudFolder = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.cloudFolder;
        break;
      case "azure":
      case "azuredatalakegen2store":
        // Data lake currently only supports "Shared Key" authentication type
        this.selectedAuthenticationType =
          provider === "azure"
            ? _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.azureAuthenticationType || this.authenticationTypes[0]
            : "sharedKey";
        this.selectedIdentityType = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.azureIdentityType || "userAssignedIdentity";
        this.tenantId = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.tenantId;
        this.clientId = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.clientId;
        this.clientSecret = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.clientSecret;
        this.token = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.token;
        this.endpoint = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.endpoint;
        this.accountKey = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.accountKey;
        this.accountName = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.accountName;
        if (_add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.environment) {
          this.selectedRegionId = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.environment.id;
        }
        this.containerName = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.containerName;
        this.cloudFolder = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.cloudFolder;
        break;
      case "google":
        // Right now, google only has "access key" as a credential type
        // Support for "private key" to be added later, so this 'if' check is here
        if (_add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.credentialType === "accessKey") {
          this.credentialType = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.credentialType;
          this.accessKey = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.accessKey;
          this.secretKey = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.secretKey;
          this.bucketName = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.bucketName;
        }
        this.cloudFolder = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.cloudFolder;
        break;
      case "alibaba":
        this.accessKey = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.accessKey;
        this.secretKey = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.secretKey;
        if (_add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.selectedRegion) {
          this.selectedRegionId = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.selectedRegion.id;
        }
        this.storageURL = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.storageURL;
        this.bucketName = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.bucketName;
        this.cloudFolder = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.cloudFolder;
        break;
    }
  }
  saveFieldStates() {
    var _a, _b, _c, _d, _e, _f;
    const { provider } = this;
    switch (provider) {
      case "amazon":
        _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.credentialType = this.credentialType;
        // https://devtopia.esri.com/WebGIS/arcgis-portal-app/issues/40157
        _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.accessKey = (_a = this.accessKey) === null || _a === void 0 ? void 0 : _a.trim();
        _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.secretKey = (_b = this.secretKey) === null || _b === void 0 ? void 0 : _b.trim();
        _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.selectedRegion = this.regionSelectOptions.find((region) => region.id === this.selectedRegionId);
        if (this.selectedRegionId === "custom") {
          _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.storageURL = this.storageURL;
        }
        else {
          _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.storageURL = "";
        }
        _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.bucketName = this.bucketName;
        _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.cloudFolder = this.cloudFolder;
        break;
      case "azure":
      case "azuredatalakegen2store":
        _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.azureAuthenticationType =
          provider === "azure" ? this.selectedAuthenticationType : "sharedKey";
        _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.azureIdentityType = this.selectedIdentityType;
        _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.tenantId = this.tenantId;
        _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.clientId = this.clientId;
        _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.clientSecret = this.clientSecret;
        _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.token = this.token;
        _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.accountKey = this.accountKey;
        _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.accountName = this.accountName;
        _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.endpoint = this.endpoint;
        // Azure uses an 'environment' instead of a 'region' unlike the other cloud types
        // The underlying logic to populate and select the regions/environments is the same
        _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.environment = this.regionSelectOptions.find((region) => region.id === this.selectedRegionId);
        _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.containerName = this.containerName;
        _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.cloudFolder = this.cloudFolder;
        break;
      case "google":
        _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.credentialType = this.credentialType;
        _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.accessKey = (_c = this.accessKey) === null || _c === void 0 ? void 0 : _c.trim();
        _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.secretKey = (_d = this.secretKey) === null || _d === void 0 ? void 0 : _d.trim();
        _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.bucketName = this.bucketName;
        _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.cloudFolder = this.cloudFolder;
        break;
      case "alibaba":
        _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.accessKey = (_e = this.accessKey) === null || _e === void 0 ? void 0 : _e.trim();
        _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.secretKey = (_f = this.secretKey) === null || _f === void 0 ? void 0 : _f.trim();
        _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.selectedRegion = this.regionSelectOptions.find((region) => region.id === this.selectedRegionId);
        if (this.selectedRegionId === "custom") {
          _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.storageURL = this.storageURL;
        }
        else {
          _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.storageURL = "";
        }
        _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.bucketName = this.bucketName;
        _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.cloudFolder = this.cloudFolder;
        break;
    }
  }
  populateCredentialTypes() {
    // Amazon & Google
    const { provider, credentialTypesI18N } = this;
    const tempCredentialTypeOptions = Object.keys(credentialTypesI18N)
      .filter((key) => {
      const isAmazonPrivateKey = provider === "amazon" && key === "privateKey";
      const isGoogleNotAccessKey = provider === "google" && key !== "accessKey";
      const isOnlineIAM = !_config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_1__.c.portal.isPortal && key === "IAMRole";
      return !(isAmazonPrivateKey || isGoogleNotAccessKey || isOnlineIAM);
    })
      .map((key) => ({ label: credentialTypesI18N[key], value: key }));
    if (tempCredentialTypeOptions.length > 0) {
      this.credentialType = tempCredentialTypeOptions[0].value;
    }
    this.credentialTypeOptions = tempCredentialTypeOptions;
    // Azure
    this.authenticationTypes = _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_1__.c.portal.isPortal
      ? this.authenticationTypes
      : ["sharedKey", "sasToken"];
  }
  addOptions(options) {
    const { provider, i18n } = this;
    let idProperty = "id";
    this.regionSelectOptions = [...options];
    if (provider === "azure") {
      idProperty = "storageEndpointSuffix";
    }
    if (provider === "amazon" || provider === "alibaba") {
      const customOption = {
        displayName: i18n.custom,
        [idProperty]: "custom"
      };
      this.regionSelectOptions = [...this.regionSelectOptions, customOption];
    }
    if (provider === "azure" || provider === "azuredatalakegen2store") {
      const otherOption = {
        displayName: i18n.other,
        id: "other"
      };
      this.regionSelectOptions = [...this.regionSelectOptions, otherOption];
    }
    if (this.regionSelectOptions.length > 0) {
      this.selectedRegionId = this.regionSelectOptions[0].id;
    }
  }
  async handleNext() {
    if (!this.validateCloudCredentials()) {
      return;
    }
    this.saveFieldStates();
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.regions = this.regionSelectOptions;
    if (_config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_1__.c.portal.isPortal) {
      // Enterprise - show dedicated page for registering & validating data stores with servers
      this.newItemUpdatePage.emit("dataStoreSelectServerList");
    }
    else {
      // Online - just validate the data store then continue
      this.loading = true;
      this.loaderMessage = this.i18n.validating;
      const { orgId, portal } = _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_1__.c.user;
      const fieldValue = this.provider === "amazon" ? this.bucketName : this.containerName;
      _item_properties_e6412a9a_js__WEBPACK_IMPORTED_MODULE_6__.i.title = (0,_data_store_7545f471_js__WEBPACK_IMPORTED_MODULE_7__.f)(this.provider, fieldValue);
      const payload = (0,_data_store_e8b5ce2f_js__WEBPACK_IMPORTED_MODULE_5__.d)(_add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a);
      const { result, error } = await (0,_data_store_f509564d_js__WEBPACK_IMPORTED_MODULE_3__.v)(orgId, portal, payload);
      if ((result === null || result === void 0 ? void 0 : result.status) === "success") {
        this.newItemUpdatePage.emit("itemProperties");
      }
      else {
        console.error(error);
        this.handleError();
      }
    }
  }
  validateCloudCredentials() {
    const { provider, i18n, credentialType, endpoint, token, accessKey, secretKey, selectedRegionId, storageURL, bucketName, accountName, accountKey, containerName, tenantId, clientId, clientSecret, selectedAuthenticationType, selectedIdentityType } = this;
    const validationFields = {};
    if (provider === "amazon") {
      validationFields[i18n.accessKey] = credentialType === "accessKey" && !accessKey;
      validationFields[i18n.secretKey] = credentialType === "accessKey" && !secretKey;
      validationFields[i18n.bucketName] = !bucketName;
      validationFields[i18n.storageURL] = selectedRegionId === "custom" && !storageURL;
    }
    if (provider === "google") {
      if (credentialType === "accessKey") {
        validationFields[i18n.accessKey] = !accessKey;
        validationFields[i18n.secretKey] = !secretKey;
      }
      validationFields[i18n.bucketName] = !bucketName;
    }
    if (provider === "azure") {
      if (selectedAuthenticationType === "sharedKey") {
        validationFields[i18n.accountKey] = !accountKey;
        validationFields[i18n.accountName] = !accountName;
      }
      else {
        validationFields[i18n.accountName] =
          !accountName &&
            selectedRegionId !== "other" &&
            selectedAuthenticationType !== "anonymous";
      }
      if (selectedAuthenticationType === "sasToken") {
        validationFields[i18n.token] = !token;
      }
      if (selectedAuthenticationType === "activeDirectory") {
        if (selectedIdentityType === "servicePrincipal") {
          validationFields[i18n.tenantId] = !tenantId;
          validationFields[i18n.clientId] = !clientId;
          validationFields[i18n.clientSecret] = !clientSecret;
        }
        else if (selectedIdentityType === "userAssignedIdentity") {
          validationFields[i18n.clientId] = !clientId;
        }
      }
      validationFields[i18n.containerName] = !containerName;
      validationFields[i18n.storageURL] = selectedRegionId === "custom" && !storageURL;
      validationFields[i18n.endpoint] =
        (selectedAuthenticationType === "anonymous" || selectedRegionId === "other") && !endpoint;
    }
    if (provider === "azuredatalakegen2store") {
      if (selectedAuthenticationType === "sharedKey") {
        validationFields[i18n.accountKey] = !accountKey;
      }
      validationFields[i18n.accountName] = !accountName && selectedRegionId !== "other";
      validationFields[i18n.containerName] = !containerName;
      validationFields[i18n.endpoint] = selectedRegionId === "other" && !endpoint;
    }
    if (provider === "alibaba") {
      validationFields[i18n.accessKey] = !accessKey;
      validationFields[i18n.secretKey] = !secretKey;
      validationFields[i18n.bucketName] = !bucketName;
      validationFields[i18n.storageURL] = selectedRegionId === "custom" && !storageURL;
    }
    this.missingFields = Object.assign({}, validationFields);
    for (const field in this.missingFields) {
      if (this.missingFields[field]) {
        return false;
      }
    }
    return !((provider === "azure" || provider === "azuredatalakegen2store") &&
      selectedRegionId === "other" &&
      this.invalidEndpoint);
  }
  generateErrorMsg(field) {
    const { i18n } = this;
    return i18n.errorInfo.replace("${missingField}", field);
  }
  handleError() {
    this.loading = false;
    const errorTitle = this.i18n.errors.onlineValidationFailed.heading;
    const errorMessage = this.i18n.errors.onlineValidationFailed.description;
    this.error = {
      title: errorTitle,
      description: errorMessage
    };
  }
  togglePrivateURL(newSelectedRegion) {
    const { provider } = this;
    if (provider !== "azure") {
      this.showPrivateURL = newSelectedRegion === "custom";
    }
  }
  render() {
    var _a, _b;
    const { i18n, provider, credentialTypeOptions, credentialType, regionSelectOptions, selectedAuthenticationType, selectedIdentityType, authenticationTypes, identityTypes, endpoint, token, tenantId, clientId, clientSecret, accessKey, secretKey, showPrivateURL, storageURL, bucketName, cloudFolder, accountName, accountKey, containerName, selectedRegionId, missingFields, invalidEndpoint } = this;
    return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", null, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-loader", { type: this.loaderType, active: this.loading, text: this.loaderMessage }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-description", { header: _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_1__.c.portal.isPortal ? i18n.connectionInfoEnterprise : i18n.connectionInfoOnline }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "configure-form" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", null, i18n.provider, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { value: i18n.cloudProviders[provider], disabled: true })), (provider === "amazon" || provider === "google") && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { for: "credential-type-select" }, i18n.credentialType, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-select", { id: "credential-type-select", label: "credential-type-select", onCalciteSelectChange: (e) => {
        const credentialType = e.target.value;
        this.missingFields = {};
        this.credentialType = credentialType;
      }, disabled: credentialTypeOptions.length < 2 }, credentialTypeOptions.map((credentialType) => {
      return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-option", { key: credentialType.value, label: credentialType.label, value: credentialType.value, selected: credentialType.value === this.credentialType }));
    })))), (provider === "azure" || provider === "azuredatalakegen2store") && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.F, null, provider === "azure" && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { for: "authentication-type-select" }, i18n.authenticationType, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-select", { id: "authentication-type-select", label: "authentication-type-select", onCalciteSelectChange: (e) => {
        const selectedAuthenticationType = e.target
          .value;
        this.missingFields = {};
        this.selectedAuthenticationType = selectedAuthenticationType;
      } }, authenticationTypes.map((authenticationType) => {
      return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-option", { key: authenticationType, id: authenticationType, label: i18n.authenticationTypes[authenticationType], value: authenticationType, selected: selectedAuthenticationType === authenticationType }));
    })))), provider === "azuredatalakegen2store" && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", null, i18n.authenticationType, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { value: i18n.authenticationTypes[selectedAuthenticationType], disabled: true }))), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { for: "token-input", class: { hide: selectedAuthenticationType !== "sasToken" } }, i18n.token, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { id: "token-input", value: token, onCalciteInputChange: (e) => {
        const token = e.target.value;
        this.token = token;
      }, placeholder: i18n.sasTokenPlaceholder, status: missingFields[i18n.token] ? "invalid" : "idle" }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input-message", { icon: true, status: "invalid", class: { hide: !missingFields[i18n.token] } }, this.generateErrorMsg(i18n.token))), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { for: "identity-type-select", class: { hide: selectedAuthenticationType !== "activeDirectory" } }, i18n.identityType, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-tile-select-group", { layout: "vertical", id: "identity-type-select" }, identityTypes.map((identityType) => {
      return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-tile-select", { key: identityType, checked: selectedIdentityType === identityType, heading: i18n.identityTypes[identityType], name: "identity-type-select", "input-enabled": true, width: "full", type: "radio", value: identityType, onCalciteTileSelectChange: (e) => {
          const selectedIdentityType = e.target
            .value;
          this.selectedIdentityType = selectedIdentityType;
        } }));
    }))), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { for: "optional-client-id-input", class: {
        hide: selectedAuthenticationType !== "activeDirectory" ||
          selectedIdentityType !== "userAssignedIdentity"
      } }, i18n.clientId, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { id: "optional-client-id-input", value: clientId, onCalciteInputChange: (e) => {
        const clientId = e.target.value;
        this.clientId = clientId;
      }, status: missingFields[i18n.clientId] ? "invalid" : "idle" }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input-message", { icon: true, status: "invalid", class: { hide: !missingFields[i18n.clientId] } }, this.generateErrorMsg(i18n.clientId))), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { for: "tenant-id-input", class: {
        hide: selectedAuthenticationType !== "activeDirectory" ||
          selectedIdentityType !== "servicePrincipal"
      } }, i18n.tenantId, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { id: "tenant-id-input", value: tenantId, onCalciteInputChange: (e) => {
        const tenantId = e.target.value;
        this.tenantId = tenantId;
      }, status: missingFields[i18n.tenantId] ? "invalid" : "idle" }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input-message", { icon: true, status: "invalid", class: { hide: !missingFields[i18n.tenantId] } }, this.generateErrorMsg(i18n.tenantId))), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { for: "client-id-input", class: {
        hide: selectedAuthenticationType !== "activeDirectory" ||
          selectedIdentityType !== "servicePrincipal"
      } }, i18n.clientId, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { id: "client-id-input", value: clientId, onCalciteInputChange: (e) => {
        const clientId = e.target.value;
        this.clientId = clientId;
      }, status: missingFields[i18n.clientId] ? "invalid" : "idle" }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input-message", { icon: true, status: "invalid", class: { hide: !missingFields[i18n.clientId] } }, this.generateErrorMsg(i18n.clientId))), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { for: "client-secret-input", class: {
        hide: selectedAuthenticationType !== "activeDirectory" ||
          selectedIdentityType !== "servicePrincipal"
      } }, i18n.clientSecret, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { id: "client-secret-input", type: "password", value: clientSecret, onCalciteInputChange: (e) => {
        const clientSecret = e.target.value;
        this.clientSecret = clientSecret;
      }, status: missingFields[i18n.clientSecret] ? "invalid" : "idle" }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input-message", { icon: true, status: "invalid", class: { hide: !missingFields[i18n.clientSecret] } }, this.generateErrorMsg(i18n.clientSecret))), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { for: "account-name-input", class: {
        hide: (selectedRegionId === "other" || selectedAuthenticationType === "anonymous") &&
          selectedAuthenticationType !== "sharedKey"
      } }, i18n.accountName, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { id: "account-name-input", value: accountName, onCalciteInputChange: (e) => {
        const accountName = e.target.value;
        this.accountName = accountName;
      }, status: missingFields[i18n.accountName] ? "invalid" : "idle" }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input-message", { icon: true, status: "invalid", class: { hide: !missingFields[i18n.accountName] } }, this.generateErrorMsg(i18n.accountName))), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { for: "account-key-input", class: { hide: selectedAuthenticationType !== "sharedKey" } }, i18n.accountKey, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { id: "account-key-input", type: "password", value: accountKey, onCalciteInputChange: (e) => {
        const accountKey = e.target.value;
        this.accountKey = accountKey;
      }, status: missingFields[i18n.accountKey] ? "invalid" : "idle" }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input-message", { icon: true, status: "invalid", class: { hide: !missingFields[i18n.accountKey] } }, this.generateErrorMsg(i18n.accountKey))), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { for: "environment-select", class: { hide: selectedAuthenticationType === "anonymous" } }, i18n.storageDomain, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-select", { id: "environment-select", label: "environment-select", onCalciteSelectChange: (e) => {
        const selectedRegionId = e.target.value;
        this.selectedRegionId = selectedRegionId;
      } }, regionSelectOptions.map((region) => {
      return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-option", { key: region.id, id: region.id, label: `${region.displayName} ${region.storageEndpointSuffix ? `(${region.storageEndpointSuffix})` : ""}`, value: region.id, selected: region.id === this.selectedRegionId }));
    }))), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { for: "endpoint-input", class: {
        hide: true,
        show: selectedRegionId === "other" || selectedAuthenticationType === "anonymous"
      } }, i18n.endpoint, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { id: "endpoint-input", value: endpoint, onCalciteInputChange: (e) => {
        const endpoint = e.target.value;
        if (!endpoint.toLowerCase().startsWith("https") && endpoint.length > 0) {
          this.invalidEndpoint = true;
          return;
        }
        this.invalidEndpoint = false;
        this.endpoint = endpoint;
      }, placeholder: i18n.endpointPlaceholder, status: missingFields[i18n.endpoint] || invalidEndpoint ? "invalid" : "idle" }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input-message", { icon: true, status: "invalid", class: { hide: !missingFields[i18n.endpoint] && !invalidEndpoint } }, this.invalidEndpoint
      ? i18n.invalidEndpoint
      : this.generateErrorMsg(i18n.endpoint))), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { for: "container-name-input" }, i18n.containerName, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { id: "container-name-input", value: containerName, onCalciteInputChange: (e) => {
        const containerName = e.target.value;
        this.containerName = containerName;
      }, status: missingFields[i18n.containerName] ? "invalid" : "idle" }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input-message", { icon: true, status: "invalid", class: { hide: !missingFields[i18n.containerName] } }, this.generateErrorMsg(i18n.containerName))))), provider !== "azure" && provider !== "azuredatalakegen2store" && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.F, null, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { for: "access-key-input" }, i18n.accessKey, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { id: "access-key-input", value: accessKey, disabled: credentialType === "IAMRole" || credentialType === "privateKey", onCalciteInputChange: (e) => {
        const accessKey = e.target.value;
        this.accessKey = accessKey;
      }, status: missingFields[i18n.accessKey] ? "invalid" : "idle" }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input-message", { icon: true, status: "invalid", class: { hide: !missingFields[i18n.accessKey] } }, this.generateErrorMsg(i18n.accessKey))), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { for: "secret-key-input" }, i18n.secretKey, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { id: "secret-key-input", value: secretKey, type: "password", disabled: credentialType === "IAMRole" || credentialType === "privateKey", onCalciteInputChange: (e) => {
        const secretKey = e.target.value;
        this.secretKey = secretKey;
      }, status: missingFields[i18n.secretKey] ? "invalid" : "idle" }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input-message", { icon: true, status: "invalid", class: { hide: !missingFields[i18n.secretKey] } }, this.generateErrorMsg(i18n.secretKey))), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { for: "region-select" }, i18n.region, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-select", { id: "region-select", label: "region-select", onCalciteSelectChange: (e) => {
        const selectedRegionId = e.target.value;
        this.selectedRegionId = selectedRegionId;
      }, disabled: provider === "google" }, regionSelectOptions.map((region) => {
      return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-option", { key: region.id, id: region.id, label: region.displayName, value: region.id, selected: region.id === this.selectedRegionId }));
    }))), showPrivateURL && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { for: "storage-url-input" }, i18n.storageURL, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { id: "storage-url-input", value: storageURL, onCalciteInputChange: (e) => {
        const storageURL = e.target.value;
        this.storageURL = storageURL;
      }, status: missingFields[i18n.storageURL] ? "invalid" : "idle" }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input-message", { icon: true, status: "invalid", class: { hide: !missingFields[i18n.storageURL] } }, this.generateErrorMsg(i18n.storageURL)))), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { for: "bucket-name-input" }, i18n.bucketName, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { id: "bucket-name-input", value: bucketName, onCalciteInputChange: (e) => {
        const bucketName = e.target.value;
        this.bucketName = bucketName;
      }, status: missingFields[i18n.bucketName] ? "invalid" : "idle" }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input-message", { icon: true, status: "invalid", class: { hide: !missingFields[i18n.bucketName] } }, this.generateErrorMsg(i18n.bucketName))))), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { for: "cloud-folder-input" }, i18n.cloudFolder, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { id: "cloud-folder-input", value: cloudFolder, placeholder: i18n.cloudFolderPlaceHolder, onCalciteInputChange: (e) => {
        const cloudFolder = e.target.value;
        this.cloudFolder = cloudFolder;
      } }))), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-alert", { active: this.error !== undefined, heading: (_a = this.error) === null || _a === void 0 ? void 0 : _a.title, description: (_b = this.error) === null || _b === void 0 ? void 0 : _b.description, onAlertDismiss: () => {
        this.error = undefined;
      } })));
  }
  static get watchers() { return {
    "selectedRegionId": ["togglePrivateURL"]
  }; }
};
ArcgisNewItemPagesDataStoreSelectCloudCredentials.style = arcgisNewItemPagesDataStoreSelectCloudCredentialsCss;




/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/data-store-7545f471.js":
/*!****************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/data-store-7545f471.js ***!
  \****************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   f: () => (/* binding */ formatTitleForDataStoreItem)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */
const formatTitleForDataStoreItem = (provider, fieldValue) => {
  let title;
  const initialTitle = fieldValue !== null && fieldValue !== void 0 ? fieldValue : "";
  switch (provider) {
    case "amazon":
      title = `AmazonS3_${initialTitle}`;
      break;
    case "azure":
      title = `Microsoft_Azure_Storage_${initialTitle}`;
      break;
    case "bigQuery":
      title = `BigQuery_${initialTitle}`;
      break;
    case "snowflake":
      title = `Snowflake_${initialTitle}`;
      break;
  }
  return title.replace(/ /g, "_").replace(/-/g, "_");
};




/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXBwLWNvbXBvbmVudHNfZGlzdF9lc21fYXJjZ2lzLWE2NDI4Ni5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ2dHO0FBQ3hDO0FBQ0c7QUFDa0Q7QUFDeEQ7QUFDeUI7QUFDTDtBQUNHO0FBQy9DO0FBQ0M7QUFDSztBQUNEO0FBQ0E7QUFDTjtBQUNTO0FBQ0E7QUFDVDtBQUNLO0FBQ0o7QUFDRDtBQUNEO0FBQ1E7QUFDRDtBQUNBO0FBQ1A7QUFDVTtBQUNWO0FBQ0E7QUFDSTtBQUNIO0FBQ0M7O0FBRTdCLDRFQUE0RSxzQ0FBc0MsZ0JBQWdCLGtCQUFrQixNQUFNLGFBQWEsTUFBTSxjQUFjOztBQUUzTDtBQUNBO0FBQ0EsSUFBSSxxREFBZ0I7QUFDcEIsNkJBQTZCLHFEQUFXO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsOENBQVk7QUFDNUIsK0JBQStCLDhDQUFZO0FBQzNDO0FBQ0EsTUFBTSxvREFBWTtBQUNsQixVQUFVLG9EQUFZO0FBQ3RCLFVBQVUsb0RBQVk7QUFDdEI7QUFDQSwwQkFBMEIsMERBQTJCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxXQUFXO0FBQ3ZCO0FBQ0E7QUFDQSxZQUFZLG9EQUFZO0FBQ3hCLGdDQUFnQyxvREFBWTtBQUM1QztBQUNBLHlCQUF5QixvREFBWTtBQUNyQyx5QkFBeUIsb0RBQVk7QUFDckMsWUFBWSxvREFBWTtBQUN4QixrQ0FBa0Msb0RBQVk7QUFDOUM7QUFDQSwwQkFBMEIsb0RBQVk7QUFDdEMsMEJBQTBCLG9EQUFZO0FBQ3RDLDJCQUEyQixvREFBWTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLG9EQUFZO0FBQzFCO0FBQ0Esb0NBQW9DLG9EQUFZO0FBQ2hELHdCQUF3QixvREFBWTtBQUNwQyx3QkFBd0Isb0RBQVk7QUFDcEMsNEJBQTRCLG9EQUFZO0FBQ3hDLHFCQUFxQixvREFBWTtBQUNqQyx3QkFBd0Isb0RBQVk7QUFDcEMsMEJBQTBCLG9EQUFZO0FBQ3RDLDJCQUEyQixvREFBWTtBQUN2QyxZQUFZLG9EQUFZO0FBQ3hCLGtDQUFrQyxvREFBWTtBQUM5QztBQUNBLDZCQUE2QixvREFBWTtBQUN6QywyQkFBMkIsb0RBQVk7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLG9EQUFZO0FBQ3hCLGdDQUFnQyxvREFBWTtBQUM1QywyQkFBMkIsb0RBQVk7QUFDdkMsMkJBQTJCLG9EQUFZO0FBQ3ZDLDRCQUE0QixvREFBWTtBQUN4QztBQUNBLDJCQUEyQixvREFBWTtBQUN2QztBQUNBO0FBQ0EseUJBQXlCLG9EQUFZO0FBQ3JDLHlCQUF5QixvREFBWTtBQUNyQyxZQUFZLG9EQUFZO0FBQ3hCLGtDQUFrQyxvREFBWTtBQUM5QztBQUNBLDBCQUEwQixvREFBWTtBQUN0QywwQkFBMEIsb0RBQVk7QUFDdEMsMkJBQTJCLG9EQUFZO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFdBQVc7QUFDdkI7QUFDQTtBQUNBLFFBQVEsb0RBQVk7QUFDcEI7QUFDQSxRQUFRLG9EQUFZO0FBQ3BCLFFBQVEsb0RBQVk7QUFDcEIsUUFBUSxvREFBWTtBQUNwQjtBQUNBLFVBQVUsb0RBQVk7QUFDdEI7QUFDQTtBQUNBLFVBQVUsb0RBQVk7QUFDdEI7QUFDQSxRQUFRLG9EQUFZO0FBQ3BCLFFBQVEsb0RBQVk7QUFDcEI7QUFDQTtBQUNBO0FBQ0EsUUFBUSxvREFBWTtBQUNwQjtBQUNBLFFBQVEsb0RBQVk7QUFDcEIsUUFBUSxvREFBWTtBQUNwQixRQUFRLG9EQUFZO0FBQ3BCLFFBQVEsb0RBQVk7QUFDcEIsUUFBUSxvREFBWTtBQUNwQixRQUFRLG9EQUFZO0FBQ3BCLFFBQVEsb0RBQVk7QUFDcEIsUUFBUSxvREFBWTtBQUNwQjtBQUNBO0FBQ0EsUUFBUSxvREFBWTtBQUNwQixRQUFRLG9EQUFZO0FBQ3BCLFFBQVEsb0RBQVk7QUFDcEI7QUFDQTtBQUNBLFFBQVEsb0RBQVk7QUFDcEIsUUFBUSxvREFBWTtBQUNwQixRQUFRLG9EQUFZO0FBQ3BCLFFBQVEsb0RBQVk7QUFDcEIsUUFBUSxvREFBWTtBQUNwQjtBQUNBO0FBQ0EsUUFBUSxvREFBWTtBQUNwQixRQUFRLG9EQUFZO0FBQ3BCLFFBQVEsb0RBQVk7QUFDcEI7QUFDQSxVQUFVLG9EQUFZO0FBQ3RCO0FBQ0E7QUFDQSxVQUFVLG9EQUFZO0FBQ3RCO0FBQ0EsUUFBUSxvREFBWTtBQUNwQixRQUFRLG9EQUFZO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGdDQUFnQztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixrREFBVztBQUN0QztBQUNBLEtBQUs7QUFDTCx1QkFBdUIsNkNBQTZDO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0Isa0RBQVc7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGlCQUFpQjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksb0RBQVk7QUFDaEIsUUFBUSxrREFBVztBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsZ0JBQWdCLEVBQUUsa0RBQVc7QUFDM0M7QUFDQSxNQUFNLDJEQUFtQixTQUFTLDBEQUEyQjtBQUM3RCxzQkFBc0IsMERBQTZCLENBQUMsb0RBQVk7QUFDaEUsY0FBYyxnQkFBZ0IsUUFBUSwwREFBMEI7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDhPQUE4TztBQUMxUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLE9BQU87QUFDbkIscUNBQXFDLGFBQWE7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksV0FBVztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDJYQUEyWDtBQUN2WSxZQUFZLHFEQUFDLGNBQWMscURBQUMsNkJBQTZCLHVFQUF1RSxHQUFHLHFEQUFDLGtDQUFrQyxRQUFRLGtEQUFXLDhFQUE4RSxHQUFHLHFEQUFDLFVBQVUseUJBQXlCLEVBQUUscURBQUMsdUNBQXVDLHFEQUFDLG9CQUFvQixzREFBc0QseURBQXlELHFEQUFDLG9CQUFvQiwrQkFBK0IsdUJBQXVCLHFEQUFDLHFCQUFxQjtBQUM3akI7QUFDQTtBQUNBO0FBQ0EsT0FBTyw4Q0FBOEM7QUFDckQsY0FBYyxxREFBQyxxQkFBcUIsNklBQTZJO0FBQ2pMLEtBQUssMEVBQTBFLHFEQUFDLENBQUMsaURBQVEsaUNBQWlDLHFEQUFDLG9CQUFvQixtQ0FBbUMsMkJBQTJCLHFEQUFDLHFCQUFxQjtBQUNuTztBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxjQUFjLHFEQUFDLHFCQUFxQiw4TEFBOEw7QUFDbE8sS0FBSyxnREFBZ0QscURBQUMsaURBQWlELHFEQUFDLG9CQUFvQiw2RUFBNkUsS0FBSyxxREFBQyxvQkFBb0IsNkJBQTZCLG1EQUFtRCxjQUFjLHFEQUFDLG9CQUFvQjtBQUN0VjtBQUNBO0FBQ0EsT0FBTyxpR0FBaUcsR0FBRyxxREFBQyw0QkFBNEIsd0NBQXdDLG9DQUFvQyx1Q0FBdUMscURBQUMsb0JBQW9CLHNDQUFzQywwREFBMEQscUJBQXFCLHFEQUFDLGdDQUFnQyxnREFBZ0Q7QUFDdGQsY0FBYyxxREFBQywwQkFBMEI7QUFDekM7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLEtBQUssS0FBSyxxREFBQyxvQkFBb0I7QUFDL0I7QUFDQTtBQUNBLFNBQVMsaUJBQWlCLHFEQUFDLG9CQUFvQjtBQUMvQztBQUNBO0FBQ0EsT0FBTyw2REFBNkQsR0FBRyxxREFBQyw0QkFBNEIsd0NBQXdDLHVDQUF1QywwQ0FBMEMscURBQUMsb0JBQW9CO0FBQ2xQO0FBQ0E7QUFDQSxTQUFTLGlCQUFpQixxREFBQyxvQkFBb0I7QUFDL0M7QUFDQTtBQUNBLE9BQU8sNkRBQTZELEdBQUcscURBQUMsNEJBQTRCLHdDQUF3Qyx1Q0FBdUMsMENBQTBDLHFEQUFDLG9CQUFvQjtBQUNsUDtBQUNBO0FBQ0EsU0FBUyxpQkFBaUIscURBQUMsb0JBQW9CO0FBQy9DO0FBQ0E7QUFDQSxPQUFPLDZEQUE2RCxHQUFHLHFEQUFDLDRCQUE0Qix3Q0FBd0MsdUNBQXVDLDBDQUEwQyxxREFBQyxvQkFBb0I7QUFDbFA7QUFDQTtBQUNBLFNBQVMscUJBQXFCLHFEQUFDLG9CQUFvQjtBQUNuRDtBQUNBO0FBQ0EsT0FBTyxpRUFBaUUsR0FBRyxxREFBQyw0QkFBNEIsd0NBQXdDLDJDQUEyQyw4Q0FBOEMscURBQUMsb0JBQW9CO0FBQzlQO0FBQ0E7QUFDQSxTQUFTLG9CQUFvQixxREFBQyxvQkFBb0I7QUFDbEQ7QUFDQTtBQUNBLE9BQU8sZ0VBQWdFLEdBQUcscURBQUMsNEJBQTRCLHdDQUF3QywwQ0FBMEMsNkNBQTZDLHFEQUFDLG9CQUFvQixtQ0FBbUMsb0RBQW9ELG1CQUFtQixxREFBQyxvQkFBb0I7QUFDMVg7QUFDQTtBQUNBLE9BQU8sK0RBQStELEdBQUcscURBQUMsNEJBQTRCLHdDQUF3Qyx5Q0FBeUMsNENBQTRDLHFEQUFDLG9CQUFvQixvQ0FBb0Msb0RBQW9ELHNCQUFzQixxREFBQyxxQkFBcUI7QUFDNVg7QUFDQTtBQUNBLFNBQVM7QUFDVCxjQUFjLHFEQUFDLHFCQUFxQix5Q0FBeUMsb0JBQW9CLEVBQUUsbUNBQW1DLDZCQUE2QixRQUFRLG9FQUFvRTtBQUMvTyxLQUFLLEtBQUsscURBQUMsb0JBQW9CO0FBQy9CO0FBQ0E7QUFDQSxTQUFTLGlCQUFpQixxREFBQyxvQkFBb0I7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPLHVIQUF1SCxHQUFHLHFEQUFDLDRCQUE0Qix3Q0FBd0MsMkRBQTJEO0FBQ2pRO0FBQ0EsZ0RBQWdELHFEQUFDLG9CQUFvQiw2QkFBNkIsc0JBQXNCLHFEQUFDLG9CQUFvQjtBQUM3STtBQUNBO0FBQ0EsT0FBTyxrRUFBa0UsR0FBRyxxREFBQyw0QkFBNEIsd0NBQXdDLDRDQUE0QyxtSEFBbUgscURBQUMsQ0FBQyxpREFBUSxRQUFRLHFEQUFDLG9CQUFvQix5QkFBeUIsa0JBQWtCLHFEQUFDLG9CQUFvQjtBQUN2WjtBQUNBO0FBQ0EsT0FBTyw4REFBOEQsR0FBRyxxREFBQyw0QkFBNEIsd0NBQXdDLHdDQUF3QywyQ0FBMkMscURBQUMsb0JBQW9CLHlCQUF5QixrQkFBa0IscURBQUMsb0JBQW9CO0FBQ3JUO0FBQ0E7QUFDQSxPQUFPLDhEQUE4RCxHQUFHLHFEQUFDLDRCQUE0Qix3Q0FBd0Msd0NBQXdDLDJDQUEyQyxxREFBQyxvQkFBb0Isc0JBQXNCLGVBQWUscURBQUMscUJBQXFCO0FBQ2hUO0FBQ0E7QUFDQSxPQUFPLG1DQUFtQztBQUMxQyxjQUFjLHFEQUFDLHFCQUFxQiwySEFBMkg7QUFDL0osS0FBSyx3QkFBd0IscURBQUMsb0JBQW9CLDBCQUEwQixtQkFBbUIscURBQUMsb0JBQW9CO0FBQ3BIO0FBQ0E7QUFDQSxPQUFPLCtEQUErRCxHQUFHLHFEQUFDLDRCQUE0Qix3Q0FBd0MseUNBQXlDLDZDQUE2QyxxREFBQyxvQkFBb0IsMEJBQTBCLG1CQUFtQixxREFBQyxvQkFBb0I7QUFDM1Q7QUFDQTtBQUNBLE9BQU8sK0RBQStELEdBQUcscURBQUMsNEJBQTRCLHdDQUF3Qyx5Q0FBeUMsOENBQThDLHFEQUFDLG9CQUFvQiwyQkFBMkIsb0JBQW9CLHFEQUFDLG9CQUFvQjtBQUM5VDtBQUNBO0FBQ0EsU0FBUyxLQUFLLHFEQUFDLDRCQUE0QjtBQUMzQztBQUNBLFNBQVM7QUFDVDtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTs7QUFFMEg7Ozs7Ozs7Ozs7Ozs7OztBQ2hlMUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGFBQWE7QUFDdkM7QUFDQTtBQUNBLHlDQUF5QyxhQUFhO0FBQ3REO0FBQ0E7QUFDQSwwQkFBMEIsYUFBYTtBQUN2QztBQUNBO0FBQ0EsMkJBQTJCLGFBQWE7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7O0FBRTRDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYW5hbHlzaXMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYXBwLWNvbXBvbmVudHMvZGlzdC9lc20vYXJjZ2lzLW5ldy1pdGVtLXBhZ2VzLWRhdGEtc3RvcmUtc2VsZWN0LWNsb3VkLWNyZWRlbnRpYWxzLmVudHJ5LmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FwcC1jb21wb25lbnRzL2Rpc3QvZXNtL2RhdGEtc3RvcmUtNzU0NWY0NzEuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogdjMuMC45OVxuICovXG5pbXBvcnQgeyByIGFzIHJlZ2lzdGVySW5zdGFuY2UsIGMgYXMgY3JlYXRlRXZlbnQsIGgsIEYgYXMgRnJhZ21lbnQgfSBmcm9tICcuL2luZGV4LTkyZWJiMzk2LmpzJztcbmltcG9ydCB7IGMgYXMgY29uZmlnU3RhdGUgfSBmcm9tICcuL2NvbmZpZy1lYjVmN2RjMi5qcyc7XG5pbXBvcnQgeyBhIGFzIGFkZEl0ZW1TdGF0ZSB9IGZyb20gJy4vYWRkLWl0ZW0tOTdkNTc3YTkuanMnO1xuaW1wb3J0IHsgZiBhcyBmZXRjaENsb3VkU3RvcmFnZVJlZ2lvbkluZm8sIHYgYXMgdmFsaWRhdGVEYXRhc3RvcmVGb3JPbmxpbmUgfSBmcm9tICcuL2RhdGEtc3RvcmUtZjUwOTU2NGQuanMnO1xuaW1wb3J0IHsgdSBhcyB1aVN0b3JlU3RhdGUgfSBmcm9tICcuL3VpLWVjZjg2YmJhLmpzJztcbmltcG9ydCB7IGQgYXMgY3JlYXRlQ2xvdWRQcm92aWRlckRhdGFPYmplY3QgfSBmcm9tICcuL2RhdGEtc3RvcmUtZThiNWNlMmYuanMnO1xuaW1wb3J0IHsgaSBhcyBpdGVtUHJvcGVydGllc1N0YXRlIH0gZnJvbSAnLi9pdGVtLXByb3BlcnRpZXMtZTY0MTJhOWEuanMnO1xuaW1wb3J0IHsgZiBhcyBmb3JtYXRUaXRsZUZvckRhdGFTdG9yZUl0ZW0gfSBmcm9tICcuL2RhdGEtc3RvcmUtNzU0NWY0NzEuanMnO1xuaW1wb3J0ICcuL2luZGV4LTgxZDU0OGI3LmpzJztcbmltcG9ydCAnLi9wb3J0YWwtNzljYWFlZmYuanMnO1xuaW1wb3J0ICcuL2xvYWRNb2R1bGVzLWFhZjMwYmQ2LmpzJztcbmltcG9ydCAnLi9wcml2aWxlZ2VzLWNjZDVmMzdkLmpzJztcbmltcG9ydCAnLi9mdW5jdGlvbmFsLWM4MmY1YWI5LmpzJztcbmltcG9ydCAnLi9pdGVtLWQ5ZDcwNDE2LmpzJztcbmltcG9ydCAnLi9mZWF0dXJlLWxheWVyLTM4Y2RhZTg3LmpzJztcbmltcG9ydCAnLi9mZWF0dXJlLWxheWVyLWQzM2VhMTE0LmpzJztcbmltcG9ydCAnLi9ndWlkLTRmNDE3NmJhLmpzJztcbmltcG9ydCAnLi90aHVtYm5haWwtMGI3YWRmY2QuanMnO1xuaW1wb3J0ICcuL3F1ZXJ5LTRmN2I3ZTRkLmpzJztcbmltcG9ydCAnLi91c2VyLWUzZGVkYzRhLmpzJztcbmltcG9ydCAnLi9hcGktZjc5MzRjZDcuanMnO1xuaW1wb3J0ICcuL3NlcnZlci1pdGVtLWYxMjE1M2U2LmpzJztcbmltcG9ydCAnLi9mdW5jdGlvbmFsLTlmNjQ4YmVlLmpzJztcbmltcG9ydCAnLi9pdGVtLXR5cGVzLWI0ZmU4NmFkLmpzJztcbmltcG9ydCAnLi9kb20tMTNmNWIwMGMuanMnO1xuaW1wb3J0ICcuL2ZlYXR1cmUtbGF5ZXItNjkzMDVhODUuanMnO1xuaW1wb3J0ICcuL2Fncy02OGQ0YWUyMC5qcyc7XG5pbXBvcnQgJy4vdXJsLWYzYjgyY2M3LmpzJztcbmltcG9ydCAnLi9zdG9yYWdlLWQ3ZjU4MjJlLmpzJztcbmltcG9ydCAnLi9maWxlLWYzNjE5M2U5LmpzJztcbmltcG9ydCAnLi9zdG9yZS0zMjEwYjYwNC5qcyc7XG5cbmNvbnN0IGFyY2dpc05ld0l0ZW1QYWdlc0RhdGFTdG9yZVNlbGVjdENsb3VkQ3JlZGVudGlhbHNDc3MgPSBcImNhbGNpdGUtbGFiZWx7LS1jYWxjaXRlLWxhYmVsLW1hcmdpbi1ib3R0b206MS4yNXJlbX0uY29uZmlndXJlLWZvcm17bWFyZ2luLXRvcDoxLjVyZW19LmhpZGV7ZGlzcGxheTpub25lfS5zaG93e2Rpc3BsYXk6YmxvY2t9XCI7XG5cbmNvbnN0IEFyY2dpc05ld0l0ZW1QYWdlc0RhdGFTdG9yZVNlbGVjdENsb3VkQ3JlZGVudGlhbHMgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcbiAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgIHRoaXMubmV3SXRlbVVwZGF0ZVBhZ2UgPSBjcmVhdGVFdmVudCh0aGlzLCBcIm5ld0l0ZW1VcGRhdGVQYWdlXCIsIDcpO1xuICAgIHRoaXMuY3JlZGVudGlhbFR5cGUgPSBudWxsO1xuICAgIHRoaXMuYXV0aGVudGljYXRpb25UeXBlcyA9IFtcbiAgICAgIFwiYWN0aXZlRGlyZWN0b3J5XCIsXG4gICAgICBcInNoYXJlZEtleVwiLFxuICAgICAgXCJzYXNUb2tlblwiLFxuICAgICAgXCJhbm9ueW1vdXNcIlxuICAgIF07XG4gICAgdGhpcy5pZGVudGl0eVR5cGVzID0gW1xuICAgICAgLy8gXCJzZXJ2aWNlUHJpbmNpcGFsXCIsXG4gICAgICBcInVzZXJBc3NpZ25lZElkZW50aXR5XCJcbiAgICBdO1xuICAgIHRoaXMuc2VsZWN0ZWRBdXRoZW50aWNhdGlvblR5cGUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5zZWxlY3RlZElkZW50aXR5VHlwZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmVuZHBvaW50ID0gXCJcIjtcbiAgICB0aGlzLnRva2VuID0gXCJcIjtcbiAgICB0aGlzLnRlbmFudElkID0gXCJcIjtcbiAgICB0aGlzLmNsaWVudElkID0gXCJcIjtcbiAgICB0aGlzLmNsaWVudFNlY3JldCA9IFwiXCI7XG4gICAgdGhpcy5hY2Nlc3NLZXkgPSBcIlwiO1xuICAgIHRoaXMuc2VjcmV0S2V5ID0gXCJcIjtcbiAgICB0aGlzLmFjY291bnROYW1lID0gXCJcIjtcbiAgICB0aGlzLmFjY291bnRLZXkgPSBcIlwiO1xuICAgIHRoaXMuY29udGFpbmVyTmFtZSA9IFwiXCI7XG4gICAgdGhpcy5zZWxlY3RlZFJlZ2lvbklkID0gbnVsbDtcbiAgICB0aGlzLnN0b3JhZ2VVUkwgPSBcIlwiO1xuICAgIHRoaXMuYnVja2V0TmFtZSA9IFwiXCI7XG4gICAgdGhpcy5jbG91ZEZvbGRlciA9IFwiXCI7XG4gICAgdGhpcy5yZWdpb25TZWxlY3RPcHRpb25zID0gW107XG4gICAgdGhpcy5zaG93UHJpdmF0ZVVSTCA9IGZhbHNlO1xuICAgIHRoaXMuY3JlZGVudGlhbFR5cGVPcHRpb25zID0gW107XG4gICAgdGhpcy5taXNzaW5nRmllbGRzID0ge307XG4gICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgdGhpcy5sb2FkZXJUeXBlID0gXCJpbmRldGVybWluYXRlXCI7XG4gICAgdGhpcy5sb2FkZXJNZXNzYWdlID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuaW52YWxpZEVuZHBvaW50ID0gZmFsc2U7XG4gICAgdGhpcy5lcnJvciA9IHVuZGVmaW5lZDtcbiAgfVxuICBhc3luYyBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICB0aGlzLmkxOG4gPSB1aVN0b3JlU3RhdGUuaTE4bi5kYXRhU3RvcmVTZWxlY3RDbG91ZDtcbiAgICB0aGlzLmNyZWRlbnRpYWxUeXBlc0kxOE4gPSB1aVN0b3JlU3RhdGUuaTE4bi5kYXRhU3RvcmVTZWxlY3RDbG91ZC5jcmVkZW50aWFsVHlwZXM7XG4gICAgdGhpcy5wcm92aWRlciA9XG4gICAgICBhZGRJdGVtU3RhdGUuYWRkRGF0YVN0b3JlVHlwZSA9PT0gXCJiZGZzXCJcbiAgICAgICAgPyBhZGRJdGVtU3RhdGUuYmRmc0Nsb3VkUHJvdmlkZXJcbiAgICAgICAgOiBhZGRJdGVtU3RhdGUucHJvdmlkZXI7XG4gICAgdGhpcy5wb3B1bGF0ZUNyZWRlbnRpYWxUeXBlcygpO1xuICAgIGNvbnN0IHJlZ2lvbnMgPSBhd2FpdCBmZXRjaENsb3VkU3RvcmFnZVJlZ2lvbkluZm8odGhpcy5wcm92aWRlcik7XG4gICAgdGhpcy5hZGRPcHRpb25zKChyZWdpb25zID09PSBudWxsIHx8IHJlZ2lvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlZ2lvbnMucmVzdWx0KSB8fCBbXSk7XG4gICAgdGhpcy5wb3B1bGF0ZUZpZWxkcygpO1xuICB9XG4gIHBvcHVsYXRlRmllbGRzKCkge1xuICAgIGNvbnN0IHsgcHJvdmlkZXIgfSA9IHRoaXM7XG4gICAgc3dpdGNoIChwcm92aWRlcikge1xuICAgICAgY2FzZSBcImFtYXpvblwiOlxuICAgICAgICBpZiAoYWRkSXRlbVN0YXRlLmNyZWRlbnRpYWxUeXBlKSB7XG4gICAgICAgICAgdGhpcy5jcmVkZW50aWFsVHlwZSA9IGFkZEl0ZW1TdGF0ZS5jcmVkZW50aWFsVHlwZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFjY2Vzc0tleSA9IGFkZEl0ZW1TdGF0ZS5hY2Nlc3NLZXk7XG4gICAgICAgIHRoaXMuc2VjcmV0S2V5ID0gYWRkSXRlbVN0YXRlLnNlY3JldEtleTtcbiAgICAgICAgaWYgKGFkZEl0ZW1TdGF0ZS5zZWxlY3RlZFJlZ2lvbikge1xuICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSZWdpb25JZCA9IGFkZEl0ZW1TdGF0ZS5zZWxlY3RlZFJlZ2lvbi5pZDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0b3JhZ2VVUkwgPSBhZGRJdGVtU3RhdGUuc3RvcmFnZVVSTDtcbiAgICAgICAgdGhpcy5idWNrZXROYW1lID0gYWRkSXRlbVN0YXRlLmJ1Y2tldE5hbWU7XG4gICAgICAgIHRoaXMuY2xvdWRGb2xkZXIgPSBhZGRJdGVtU3RhdGUuY2xvdWRGb2xkZXI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImF6dXJlXCI6XG4gICAgICBjYXNlIFwiYXp1cmVkYXRhbGFrZWdlbjJzdG9yZVwiOlxuICAgICAgICAvLyBEYXRhIGxha2UgY3VycmVudGx5IG9ubHkgc3VwcG9ydHMgXCJTaGFyZWQgS2V5XCIgYXV0aGVudGljYXRpb24gdHlwZVxuICAgICAgICB0aGlzLnNlbGVjdGVkQXV0aGVudGljYXRpb25UeXBlID1cbiAgICAgICAgICBwcm92aWRlciA9PT0gXCJhenVyZVwiXG4gICAgICAgICAgICA/IGFkZEl0ZW1TdGF0ZS5henVyZUF1dGhlbnRpY2F0aW9uVHlwZSB8fCB0aGlzLmF1dGhlbnRpY2F0aW9uVHlwZXNbMF1cbiAgICAgICAgICAgIDogXCJzaGFyZWRLZXlcIjtcbiAgICAgICAgdGhpcy5zZWxlY3RlZElkZW50aXR5VHlwZSA9IGFkZEl0ZW1TdGF0ZS5henVyZUlkZW50aXR5VHlwZSB8fCBcInVzZXJBc3NpZ25lZElkZW50aXR5XCI7XG4gICAgICAgIHRoaXMudGVuYW50SWQgPSBhZGRJdGVtU3RhdGUudGVuYW50SWQ7XG4gICAgICAgIHRoaXMuY2xpZW50SWQgPSBhZGRJdGVtU3RhdGUuY2xpZW50SWQ7XG4gICAgICAgIHRoaXMuY2xpZW50U2VjcmV0ID0gYWRkSXRlbVN0YXRlLmNsaWVudFNlY3JldDtcbiAgICAgICAgdGhpcy50b2tlbiA9IGFkZEl0ZW1TdGF0ZS50b2tlbjtcbiAgICAgICAgdGhpcy5lbmRwb2ludCA9IGFkZEl0ZW1TdGF0ZS5lbmRwb2ludDtcbiAgICAgICAgdGhpcy5hY2NvdW50S2V5ID0gYWRkSXRlbVN0YXRlLmFjY291bnRLZXk7XG4gICAgICAgIHRoaXMuYWNjb3VudE5hbWUgPSBhZGRJdGVtU3RhdGUuYWNjb3VudE5hbWU7XG4gICAgICAgIGlmIChhZGRJdGVtU3RhdGUuZW52aXJvbm1lbnQpIHtcbiAgICAgICAgICB0aGlzLnNlbGVjdGVkUmVnaW9uSWQgPSBhZGRJdGVtU3RhdGUuZW52aXJvbm1lbnQuaWQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb250YWluZXJOYW1lID0gYWRkSXRlbVN0YXRlLmNvbnRhaW5lck5hbWU7XG4gICAgICAgIHRoaXMuY2xvdWRGb2xkZXIgPSBhZGRJdGVtU3RhdGUuY2xvdWRGb2xkZXI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImdvb2dsZVwiOlxuICAgICAgICAvLyBSaWdodCBub3csIGdvb2dsZSBvbmx5IGhhcyBcImFjY2VzcyBrZXlcIiBhcyBhIGNyZWRlbnRpYWwgdHlwZVxuICAgICAgICAvLyBTdXBwb3J0IGZvciBcInByaXZhdGUga2V5XCIgdG8gYmUgYWRkZWQgbGF0ZXIsIHNvIHRoaXMgJ2lmJyBjaGVjayBpcyBoZXJlXG4gICAgICAgIGlmIChhZGRJdGVtU3RhdGUuY3JlZGVudGlhbFR5cGUgPT09IFwiYWNjZXNzS2V5XCIpIHtcbiAgICAgICAgICB0aGlzLmNyZWRlbnRpYWxUeXBlID0gYWRkSXRlbVN0YXRlLmNyZWRlbnRpYWxUeXBlO1xuICAgICAgICAgIHRoaXMuYWNjZXNzS2V5ID0gYWRkSXRlbVN0YXRlLmFjY2Vzc0tleTtcbiAgICAgICAgICB0aGlzLnNlY3JldEtleSA9IGFkZEl0ZW1TdGF0ZS5zZWNyZXRLZXk7XG4gICAgICAgICAgdGhpcy5idWNrZXROYW1lID0gYWRkSXRlbVN0YXRlLmJ1Y2tldE5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jbG91ZEZvbGRlciA9IGFkZEl0ZW1TdGF0ZS5jbG91ZEZvbGRlcjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiYWxpYmFiYVwiOlxuICAgICAgICB0aGlzLmFjY2Vzc0tleSA9IGFkZEl0ZW1TdGF0ZS5hY2Nlc3NLZXk7XG4gICAgICAgIHRoaXMuc2VjcmV0S2V5ID0gYWRkSXRlbVN0YXRlLnNlY3JldEtleTtcbiAgICAgICAgaWYgKGFkZEl0ZW1TdGF0ZS5zZWxlY3RlZFJlZ2lvbikge1xuICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSZWdpb25JZCA9IGFkZEl0ZW1TdGF0ZS5zZWxlY3RlZFJlZ2lvbi5pZDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0b3JhZ2VVUkwgPSBhZGRJdGVtU3RhdGUuc3RvcmFnZVVSTDtcbiAgICAgICAgdGhpcy5idWNrZXROYW1lID0gYWRkSXRlbVN0YXRlLmJ1Y2tldE5hbWU7XG4gICAgICAgIHRoaXMuY2xvdWRGb2xkZXIgPSBhZGRJdGVtU3RhdGUuY2xvdWRGb2xkZXI7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICBzYXZlRmllbGRTdGF0ZXMoKSB7XG4gICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2Y7XG4gICAgY29uc3QgeyBwcm92aWRlciB9ID0gdGhpcztcbiAgICBzd2l0Y2ggKHByb3ZpZGVyKSB7XG4gICAgICBjYXNlIFwiYW1hem9uXCI6XG4gICAgICAgIGFkZEl0ZW1TdGF0ZS5jcmVkZW50aWFsVHlwZSA9IHRoaXMuY3JlZGVudGlhbFR5cGU7XG4gICAgICAgIC8vIGh0dHBzOi8vZGV2dG9waWEuZXNyaS5jb20vV2ViR0lTL2FyY2dpcy1wb3J0YWwtYXBwL2lzc3Vlcy80MDE1N1xuICAgICAgICBhZGRJdGVtU3RhdGUuYWNjZXNzS2V5ID0gKF9hID0gdGhpcy5hY2Nlc3NLZXkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50cmltKCk7XG4gICAgICAgIGFkZEl0ZW1TdGF0ZS5zZWNyZXRLZXkgPSAoX2IgPSB0aGlzLnNlY3JldEtleSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnRyaW0oKTtcbiAgICAgICAgYWRkSXRlbVN0YXRlLnNlbGVjdGVkUmVnaW9uID0gdGhpcy5yZWdpb25TZWxlY3RPcHRpb25zLmZpbmQoKHJlZ2lvbikgPT4gcmVnaW9uLmlkID09PSB0aGlzLnNlbGVjdGVkUmVnaW9uSWQpO1xuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFJlZ2lvbklkID09PSBcImN1c3RvbVwiKSB7XG4gICAgICAgICAgYWRkSXRlbVN0YXRlLnN0b3JhZ2VVUkwgPSB0aGlzLnN0b3JhZ2VVUkw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgYWRkSXRlbVN0YXRlLnN0b3JhZ2VVUkwgPSBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIGFkZEl0ZW1TdGF0ZS5idWNrZXROYW1lID0gdGhpcy5idWNrZXROYW1lO1xuICAgICAgICBhZGRJdGVtU3RhdGUuY2xvdWRGb2xkZXIgPSB0aGlzLmNsb3VkRm9sZGVyO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJhenVyZVwiOlxuICAgICAgY2FzZSBcImF6dXJlZGF0YWxha2VnZW4yc3RvcmVcIjpcbiAgICAgICAgYWRkSXRlbVN0YXRlLmF6dXJlQXV0aGVudGljYXRpb25UeXBlID1cbiAgICAgICAgICBwcm92aWRlciA9PT0gXCJhenVyZVwiID8gdGhpcy5zZWxlY3RlZEF1dGhlbnRpY2F0aW9uVHlwZSA6IFwic2hhcmVkS2V5XCI7XG4gICAgICAgIGFkZEl0ZW1TdGF0ZS5henVyZUlkZW50aXR5VHlwZSA9IHRoaXMuc2VsZWN0ZWRJZGVudGl0eVR5cGU7XG4gICAgICAgIGFkZEl0ZW1TdGF0ZS50ZW5hbnRJZCA9IHRoaXMudGVuYW50SWQ7XG4gICAgICAgIGFkZEl0ZW1TdGF0ZS5jbGllbnRJZCA9IHRoaXMuY2xpZW50SWQ7XG4gICAgICAgIGFkZEl0ZW1TdGF0ZS5jbGllbnRTZWNyZXQgPSB0aGlzLmNsaWVudFNlY3JldDtcbiAgICAgICAgYWRkSXRlbVN0YXRlLnRva2VuID0gdGhpcy50b2tlbjtcbiAgICAgICAgYWRkSXRlbVN0YXRlLmFjY291bnRLZXkgPSB0aGlzLmFjY291bnRLZXk7XG4gICAgICAgIGFkZEl0ZW1TdGF0ZS5hY2NvdW50TmFtZSA9IHRoaXMuYWNjb3VudE5hbWU7XG4gICAgICAgIGFkZEl0ZW1TdGF0ZS5lbmRwb2ludCA9IHRoaXMuZW5kcG9pbnQ7XG4gICAgICAgIC8vIEF6dXJlIHVzZXMgYW4gJ2Vudmlyb25tZW50JyBpbnN0ZWFkIG9mIGEgJ3JlZ2lvbicgdW5saWtlIHRoZSBvdGhlciBjbG91ZCB0eXBlc1xuICAgICAgICAvLyBUaGUgdW5kZXJseWluZyBsb2dpYyB0byBwb3B1bGF0ZSBhbmQgc2VsZWN0IHRoZSByZWdpb25zL2Vudmlyb25tZW50cyBpcyB0aGUgc2FtZVxuICAgICAgICBhZGRJdGVtU3RhdGUuZW52aXJvbm1lbnQgPSB0aGlzLnJlZ2lvblNlbGVjdE9wdGlvbnMuZmluZCgocmVnaW9uKSA9PiByZWdpb24uaWQgPT09IHRoaXMuc2VsZWN0ZWRSZWdpb25JZCk7XG4gICAgICAgIGFkZEl0ZW1TdGF0ZS5jb250YWluZXJOYW1lID0gdGhpcy5jb250YWluZXJOYW1lO1xuICAgICAgICBhZGRJdGVtU3RhdGUuY2xvdWRGb2xkZXIgPSB0aGlzLmNsb3VkRm9sZGVyO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJnb29nbGVcIjpcbiAgICAgICAgYWRkSXRlbVN0YXRlLmNyZWRlbnRpYWxUeXBlID0gdGhpcy5jcmVkZW50aWFsVHlwZTtcbiAgICAgICAgYWRkSXRlbVN0YXRlLmFjY2Vzc0tleSA9IChfYyA9IHRoaXMuYWNjZXNzS2V5KSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MudHJpbSgpO1xuICAgICAgICBhZGRJdGVtU3RhdGUuc2VjcmV0S2V5ID0gKF9kID0gdGhpcy5zZWNyZXRLZXkpID09PSBudWxsIHx8IF9kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZC50cmltKCk7XG4gICAgICAgIGFkZEl0ZW1TdGF0ZS5idWNrZXROYW1lID0gdGhpcy5idWNrZXROYW1lO1xuICAgICAgICBhZGRJdGVtU3RhdGUuY2xvdWRGb2xkZXIgPSB0aGlzLmNsb3VkRm9sZGVyO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJhbGliYWJhXCI6XG4gICAgICAgIGFkZEl0ZW1TdGF0ZS5hY2Nlc3NLZXkgPSAoX2UgPSB0aGlzLmFjY2Vzc0tleSkgPT09IG51bGwgfHwgX2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lLnRyaW0oKTtcbiAgICAgICAgYWRkSXRlbVN0YXRlLnNlY3JldEtleSA9IChfZiA9IHRoaXMuc2VjcmV0S2V5KSA9PT0gbnVsbCB8fCBfZiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2YudHJpbSgpO1xuICAgICAgICBhZGRJdGVtU3RhdGUuc2VsZWN0ZWRSZWdpb24gPSB0aGlzLnJlZ2lvblNlbGVjdE9wdGlvbnMuZmluZCgocmVnaW9uKSA9PiByZWdpb24uaWQgPT09IHRoaXMuc2VsZWN0ZWRSZWdpb25JZCk7XG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkUmVnaW9uSWQgPT09IFwiY3VzdG9tXCIpIHtcbiAgICAgICAgICBhZGRJdGVtU3RhdGUuc3RvcmFnZVVSTCA9IHRoaXMuc3RvcmFnZVVSTDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBhZGRJdGVtU3RhdGUuc3RvcmFnZVVSTCA9IFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgYWRkSXRlbVN0YXRlLmJ1Y2tldE5hbWUgPSB0aGlzLmJ1Y2tldE5hbWU7XG4gICAgICAgIGFkZEl0ZW1TdGF0ZS5jbG91ZEZvbGRlciA9IHRoaXMuY2xvdWRGb2xkZXI7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICBwb3B1bGF0ZUNyZWRlbnRpYWxUeXBlcygpIHtcbiAgICAvLyBBbWF6b24gJiBHb29nbGVcbiAgICBjb25zdCB7IHByb3ZpZGVyLCBjcmVkZW50aWFsVHlwZXNJMThOIH0gPSB0aGlzO1xuICAgIGNvbnN0IHRlbXBDcmVkZW50aWFsVHlwZU9wdGlvbnMgPSBPYmplY3Qua2V5cyhjcmVkZW50aWFsVHlwZXNJMThOKVxuICAgICAgLmZpbHRlcigoa2V5KSA9PiB7XG4gICAgICBjb25zdCBpc0FtYXpvblByaXZhdGVLZXkgPSBwcm92aWRlciA9PT0gXCJhbWF6b25cIiAmJiBrZXkgPT09IFwicHJpdmF0ZUtleVwiO1xuICAgICAgY29uc3QgaXNHb29nbGVOb3RBY2Nlc3NLZXkgPSBwcm92aWRlciA9PT0gXCJnb29nbGVcIiAmJiBrZXkgIT09IFwiYWNjZXNzS2V5XCI7XG4gICAgICBjb25zdCBpc09ubGluZUlBTSA9ICFjb25maWdTdGF0ZS5wb3J0YWwuaXNQb3J0YWwgJiYga2V5ID09PSBcIklBTVJvbGVcIjtcbiAgICAgIHJldHVybiAhKGlzQW1hem9uUHJpdmF0ZUtleSB8fCBpc0dvb2dsZU5vdEFjY2Vzc0tleSB8fCBpc09ubGluZUlBTSk7XG4gICAgfSlcbiAgICAgIC5tYXAoKGtleSkgPT4gKHsgbGFiZWw6IGNyZWRlbnRpYWxUeXBlc0kxOE5ba2V5XSwgdmFsdWU6IGtleSB9KSk7XG4gICAgaWYgKHRlbXBDcmVkZW50aWFsVHlwZU9wdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5jcmVkZW50aWFsVHlwZSA9IHRlbXBDcmVkZW50aWFsVHlwZU9wdGlvbnNbMF0udmFsdWU7XG4gICAgfVxuICAgIHRoaXMuY3JlZGVudGlhbFR5cGVPcHRpb25zID0gdGVtcENyZWRlbnRpYWxUeXBlT3B0aW9ucztcbiAgICAvLyBBenVyZVxuICAgIHRoaXMuYXV0aGVudGljYXRpb25UeXBlcyA9IGNvbmZpZ1N0YXRlLnBvcnRhbC5pc1BvcnRhbFxuICAgICAgPyB0aGlzLmF1dGhlbnRpY2F0aW9uVHlwZXNcbiAgICAgIDogW1wic2hhcmVkS2V5XCIsIFwic2FzVG9rZW5cIl07XG4gIH1cbiAgYWRkT3B0aW9ucyhvcHRpb25zKSB7XG4gICAgY29uc3QgeyBwcm92aWRlciwgaTE4biB9ID0gdGhpcztcbiAgICBsZXQgaWRQcm9wZXJ0eSA9IFwiaWRcIjtcbiAgICB0aGlzLnJlZ2lvblNlbGVjdE9wdGlvbnMgPSBbLi4ub3B0aW9uc107XG4gICAgaWYgKHByb3ZpZGVyID09PSBcImF6dXJlXCIpIHtcbiAgICAgIGlkUHJvcGVydHkgPSBcInN0b3JhZ2VFbmRwb2ludFN1ZmZpeFwiO1xuICAgIH1cbiAgICBpZiAocHJvdmlkZXIgPT09IFwiYW1hem9uXCIgfHwgcHJvdmlkZXIgPT09IFwiYWxpYmFiYVwiKSB7XG4gICAgICBjb25zdCBjdXN0b21PcHRpb24gPSB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiBpMThuLmN1c3RvbSxcbiAgICAgICAgW2lkUHJvcGVydHldOiBcImN1c3RvbVwiXG4gICAgICB9O1xuICAgICAgdGhpcy5yZWdpb25TZWxlY3RPcHRpb25zID0gWy4uLnRoaXMucmVnaW9uU2VsZWN0T3B0aW9ucywgY3VzdG9tT3B0aW9uXTtcbiAgICB9XG4gICAgaWYgKHByb3ZpZGVyID09PSBcImF6dXJlXCIgfHwgcHJvdmlkZXIgPT09IFwiYXp1cmVkYXRhbGFrZWdlbjJzdG9yZVwiKSB7XG4gICAgICBjb25zdCBvdGhlck9wdGlvbiA9IHtcbiAgICAgICAgZGlzcGxheU5hbWU6IGkxOG4ub3RoZXIsXG4gICAgICAgIGlkOiBcIm90aGVyXCJcbiAgICAgIH07XG4gICAgICB0aGlzLnJlZ2lvblNlbGVjdE9wdGlvbnMgPSBbLi4udGhpcy5yZWdpb25TZWxlY3RPcHRpb25zLCBvdGhlck9wdGlvbl07XG4gICAgfVxuICAgIGlmICh0aGlzLnJlZ2lvblNlbGVjdE9wdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5zZWxlY3RlZFJlZ2lvbklkID0gdGhpcy5yZWdpb25TZWxlY3RPcHRpb25zWzBdLmlkO1xuICAgIH1cbiAgfVxuICBhc3luYyBoYW5kbGVOZXh0KCkge1xuICAgIGlmICghdGhpcy52YWxpZGF0ZUNsb3VkQ3JlZGVudGlhbHMoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnNhdmVGaWVsZFN0YXRlcygpO1xuICAgIGFkZEl0ZW1TdGF0ZS5yZWdpb25zID0gdGhpcy5yZWdpb25TZWxlY3RPcHRpb25zO1xuICAgIGlmIChjb25maWdTdGF0ZS5wb3J0YWwuaXNQb3J0YWwpIHtcbiAgICAgIC8vIEVudGVycHJpc2UgLSBzaG93IGRlZGljYXRlZCBwYWdlIGZvciByZWdpc3RlcmluZyAmIHZhbGlkYXRpbmcgZGF0YSBzdG9yZXMgd2l0aCBzZXJ2ZXJzXG4gICAgICB0aGlzLm5ld0l0ZW1VcGRhdGVQYWdlLmVtaXQoXCJkYXRhU3RvcmVTZWxlY3RTZXJ2ZXJMaXN0XCIpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIC8vIE9ubGluZSAtIGp1c3QgdmFsaWRhdGUgdGhlIGRhdGEgc3RvcmUgdGhlbiBjb250aW51ZVxuICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTtcbiAgICAgIHRoaXMubG9hZGVyTWVzc2FnZSA9IHRoaXMuaTE4bi52YWxpZGF0aW5nO1xuICAgICAgY29uc3QgeyBvcmdJZCwgcG9ydGFsIH0gPSBjb25maWdTdGF0ZS51c2VyO1xuICAgICAgY29uc3QgZmllbGRWYWx1ZSA9IHRoaXMucHJvdmlkZXIgPT09IFwiYW1hem9uXCIgPyB0aGlzLmJ1Y2tldE5hbWUgOiB0aGlzLmNvbnRhaW5lck5hbWU7XG4gICAgICBpdGVtUHJvcGVydGllc1N0YXRlLnRpdGxlID0gZm9ybWF0VGl0bGVGb3JEYXRhU3RvcmVJdGVtKHRoaXMucHJvdmlkZXIsIGZpZWxkVmFsdWUpO1xuICAgICAgY29uc3QgcGF5bG9hZCA9IGNyZWF0ZUNsb3VkUHJvdmlkZXJEYXRhT2JqZWN0KGFkZEl0ZW1TdGF0ZSk7XG4gICAgICBjb25zdCB7IHJlc3VsdCwgZXJyb3IgfSA9IGF3YWl0IHZhbGlkYXRlRGF0YXN0b3JlRm9yT25saW5lKG9yZ0lkLCBwb3J0YWwsIHBheWxvYWQpO1xuICAgICAgaWYgKChyZXN1bHQgPT09IG51bGwgfHwgcmVzdWx0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXN1bHQuc3RhdHVzKSA9PT0gXCJzdWNjZXNzXCIpIHtcbiAgICAgICAgdGhpcy5uZXdJdGVtVXBkYXRlUGFnZS5lbWl0KFwiaXRlbVByb3BlcnRpZXNcIik7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgdmFsaWRhdGVDbG91ZENyZWRlbnRpYWxzKCkge1xuICAgIGNvbnN0IHsgcHJvdmlkZXIsIGkxOG4sIGNyZWRlbnRpYWxUeXBlLCBlbmRwb2ludCwgdG9rZW4sIGFjY2Vzc0tleSwgc2VjcmV0S2V5LCBzZWxlY3RlZFJlZ2lvbklkLCBzdG9yYWdlVVJMLCBidWNrZXROYW1lLCBhY2NvdW50TmFtZSwgYWNjb3VudEtleSwgY29udGFpbmVyTmFtZSwgdGVuYW50SWQsIGNsaWVudElkLCBjbGllbnRTZWNyZXQsIHNlbGVjdGVkQXV0aGVudGljYXRpb25UeXBlLCBzZWxlY3RlZElkZW50aXR5VHlwZSB9ID0gdGhpcztcbiAgICBjb25zdCB2YWxpZGF0aW9uRmllbGRzID0ge307XG4gICAgaWYgKHByb3ZpZGVyID09PSBcImFtYXpvblwiKSB7XG4gICAgICB2YWxpZGF0aW9uRmllbGRzW2kxOG4uYWNjZXNzS2V5XSA9IGNyZWRlbnRpYWxUeXBlID09PSBcImFjY2Vzc0tleVwiICYmICFhY2Nlc3NLZXk7XG4gICAgICB2YWxpZGF0aW9uRmllbGRzW2kxOG4uc2VjcmV0S2V5XSA9IGNyZWRlbnRpYWxUeXBlID09PSBcImFjY2Vzc0tleVwiICYmICFzZWNyZXRLZXk7XG4gICAgICB2YWxpZGF0aW9uRmllbGRzW2kxOG4uYnVja2V0TmFtZV0gPSAhYnVja2V0TmFtZTtcbiAgICAgIHZhbGlkYXRpb25GaWVsZHNbaTE4bi5zdG9yYWdlVVJMXSA9IHNlbGVjdGVkUmVnaW9uSWQgPT09IFwiY3VzdG9tXCIgJiYgIXN0b3JhZ2VVUkw7XG4gICAgfVxuICAgIGlmIChwcm92aWRlciA9PT0gXCJnb29nbGVcIikge1xuICAgICAgaWYgKGNyZWRlbnRpYWxUeXBlID09PSBcImFjY2Vzc0tleVwiKSB7XG4gICAgICAgIHZhbGlkYXRpb25GaWVsZHNbaTE4bi5hY2Nlc3NLZXldID0gIWFjY2Vzc0tleTtcbiAgICAgICAgdmFsaWRhdGlvbkZpZWxkc1tpMThuLnNlY3JldEtleV0gPSAhc2VjcmV0S2V5O1xuICAgICAgfVxuICAgICAgdmFsaWRhdGlvbkZpZWxkc1tpMThuLmJ1Y2tldE5hbWVdID0gIWJ1Y2tldE5hbWU7XG4gICAgfVxuICAgIGlmIChwcm92aWRlciA9PT0gXCJhenVyZVwiKSB7XG4gICAgICBpZiAoc2VsZWN0ZWRBdXRoZW50aWNhdGlvblR5cGUgPT09IFwic2hhcmVkS2V5XCIpIHtcbiAgICAgICAgdmFsaWRhdGlvbkZpZWxkc1tpMThuLmFjY291bnRLZXldID0gIWFjY291bnRLZXk7XG4gICAgICAgIHZhbGlkYXRpb25GaWVsZHNbaTE4bi5hY2NvdW50TmFtZV0gPSAhYWNjb3VudE5hbWU7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgdmFsaWRhdGlvbkZpZWxkc1tpMThuLmFjY291bnROYW1lXSA9XG4gICAgICAgICAgIWFjY291bnROYW1lICYmXG4gICAgICAgICAgICBzZWxlY3RlZFJlZ2lvbklkICE9PSBcIm90aGVyXCIgJiZcbiAgICAgICAgICAgIHNlbGVjdGVkQXV0aGVudGljYXRpb25UeXBlICE9PSBcImFub255bW91c1wiO1xuICAgICAgfVxuICAgICAgaWYgKHNlbGVjdGVkQXV0aGVudGljYXRpb25UeXBlID09PSBcInNhc1Rva2VuXCIpIHtcbiAgICAgICAgdmFsaWRhdGlvbkZpZWxkc1tpMThuLnRva2VuXSA9ICF0b2tlbjtcbiAgICAgIH1cbiAgICAgIGlmIChzZWxlY3RlZEF1dGhlbnRpY2F0aW9uVHlwZSA9PT0gXCJhY3RpdmVEaXJlY3RvcnlcIikge1xuICAgICAgICBpZiAoc2VsZWN0ZWRJZGVudGl0eVR5cGUgPT09IFwic2VydmljZVByaW5jaXBhbFwiKSB7XG4gICAgICAgICAgdmFsaWRhdGlvbkZpZWxkc1tpMThuLnRlbmFudElkXSA9ICF0ZW5hbnRJZDtcbiAgICAgICAgICB2YWxpZGF0aW9uRmllbGRzW2kxOG4uY2xpZW50SWRdID0gIWNsaWVudElkO1xuICAgICAgICAgIHZhbGlkYXRpb25GaWVsZHNbaTE4bi5jbGllbnRTZWNyZXRdID0gIWNsaWVudFNlY3JldDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzZWxlY3RlZElkZW50aXR5VHlwZSA9PT0gXCJ1c2VyQXNzaWduZWRJZGVudGl0eVwiKSB7XG4gICAgICAgICAgdmFsaWRhdGlvbkZpZWxkc1tpMThuLmNsaWVudElkXSA9ICFjbGllbnRJZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdmFsaWRhdGlvbkZpZWxkc1tpMThuLmNvbnRhaW5lck5hbWVdID0gIWNvbnRhaW5lck5hbWU7XG4gICAgICB2YWxpZGF0aW9uRmllbGRzW2kxOG4uc3RvcmFnZVVSTF0gPSBzZWxlY3RlZFJlZ2lvbklkID09PSBcImN1c3RvbVwiICYmICFzdG9yYWdlVVJMO1xuICAgICAgdmFsaWRhdGlvbkZpZWxkc1tpMThuLmVuZHBvaW50XSA9XG4gICAgICAgIChzZWxlY3RlZEF1dGhlbnRpY2F0aW9uVHlwZSA9PT0gXCJhbm9ueW1vdXNcIiB8fCBzZWxlY3RlZFJlZ2lvbklkID09PSBcIm90aGVyXCIpICYmICFlbmRwb2ludDtcbiAgICB9XG4gICAgaWYgKHByb3ZpZGVyID09PSBcImF6dXJlZGF0YWxha2VnZW4yc3RvcmVcIikge1xuICAgICAgaWYgKHNlbGVjdGVkQXV0aGVudGljYXRpb25UeXBlID09PSBcInNoYXJlZEtleVwiKSB7XG4gICAgICAgIHZhbGlkYXRpb25GaWVsZHNbaTE4bi5hY2NvdW50S2V5XSA9ICFhY2NvdW50S2V5O1xuICAgICAgfVxuICAgICAgdmFsaWRhdGlvbkZpZWxkc1tpMThuLmFjY291bnROYW1lXSA9ICFhY2NvdW50TmFtZSAmJiBzZWxlY3RlZFJlZ2lvbklkICE9PSBcIm90aGVyXCI7XG4gICAgICB2YWxpZGF0aW9uRmllbGRzW2kxOG4uY29udGFpbmVyTmFtZV0gPSAhY29udGFpbmVyTmFtZTtcbiAgICAgIHZhbGlkYXRpb25GaWVsZHNbaTE4bi5lbmRwb2ludF0gPSBzZWxlY3RlZFJlZ2lvbklkID09PSBcIm90aGVyXCIgJiYgIWVuZHBvaW50O1xuICAgIH1cbiAgICBpZiAocHJvdmlkZXIgPT09IFwiYWxpYmFiYVwiKSB7XG4gICAgICB2YWxpZGF0aW9uRmllbGRzW2kxOG4uYWNjZXNzS2V5XSA9ICFhY2Nlc3NLZXk7XG4gICAgICB2YWxpZGF0aW9uRmllbGRzW2kxOG4uc2VjcmV0S2V5XSA9ICFzZWNyZXRLZXk7XG4gICAgICB2YWxpZGF0aW9uRmllbGRzW2kxOG4uYnVja2V0TmFtZV0gPSAhYnVja2V0TmFtZTtcbiAgICAgIHZhbGlkYXRpb25GaWVsZHNbaTE4bi5zdG9yYWdlVVJMXSA9IHNlbGVjdGVkUmVnaW9uSWQgPT09IFwiY3VzdG9tXCIgJiYgIXN0b3JhZ2VVUkw7XG4gICAgfVxuICAgIHRoaXMubWlzc2luZ0ZpZWxkcyA9IE9iamVjdC5hc3NpZ24oe30sIHZhbGlkYXRpb25GaWVsZHMpO1xuICAgIGZvciAoY29uc3QgZmllbGQgaW4gdGhpcy5taXNzaW5nRmllbGRzKSB7XG4gICAgICBpZiAodGhpcy5taXNzaW5nRmllbGRzW2ZpZWxkXSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAhKChwcm92aWRlciA9PT0gXCJhenVyZVwiIHx8IHByb3ZpZGVyID09PSBcImF6dXJlZGF0YWxha2VnZW4yc3RvcmVcIikgJiZcbiAgICAgIHNlbGVjdGVkUmVnaW9uSWQgPT09IFwib3RoZXJcIiAmJlxuICAgICAgdGhpcy5pbnZhbGlkRW5kcG9pbnQpO1xuICB9XG4gIGdlbmVyYXRlRXJyb3JNc2coZmllbGQpIHtcbiAgICBjb25zdCB7IGkxOG4gfSA9IHRoaXM7XG4gICAgcmV0dXJuIGkxOG4uZXJyb3JJbmZvLnJlcGxhY2UoXCIke21pc3NpbmdGaWVsZH1cIiwgZmllbGQpO1xuICB9XG4gIGhhbmRsZUVycm9yKCkge1xuICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgIGNvbnN0IGVycm9yVGl0bGUgPSB0aGlzLmkxOG4uZXJyb3JzLm9ubGluZVZhbGlkYXRpb25GYWlsZWQuaGVhZGluZztcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSB0aGlzLmkxOG4uZXJyb3JzLm9ubGluZVZhbGlkYXRpb25GYWlsZWQuZGVzY3JpcHRpb247XG4gICAgdGhpcy5lcnJvciA9IHtcbiAgICAgIHRpdGxlOiBlcnJvclRpdGxlLFxuICAgICAgZGVzY3JpcHRpb246IGVycm9yTWVzc2FnZVxuICAgIH07XG4gIH1cbiAgdG9nZ2xlUHJpdmF0ZVVSTChuZXdTZWxlY3RlZFJlZ2lvbikge1xuICAgIGNvbnN0IHsgcHJvdmlkZXIgfSA9IHRoaXM7XG4gICAgaWYgKHByb3ZpZGVyICE9PSBcImF6dXJlXCIpIHtcbiAgICAgIHRoaXMuc2hvd1ByaXZhdGVVUkwgPSBuZXdTZWxlY3RlZFJlZ2lvbiA9PT0gXCJjdXN0b21cIjtcbiAgICB9XG4gIH1cbiAgcmVuZGVyKCkge1xuICAgIHZhciBfYSwgX2I7XG4gICAgY29uc3QgeyBpMThuLCBwcm92aWRlciwgY3JlZGVudGlhbFR5cGVPcHRpb25zLCBjcmVkZW50aWFsVHlwZSwgcmVnaW9uU2VsZWN0T3B0aW9ucywgc2VsZWN0ZWRBdXRoZW50aWNhdGlvblR5cGUsIHNlbGVjdGVkSWRlbnRpdHlUeXBlLCBhdXRoZW50aWNhdGlvblR5cGVzLCBpZGVudGl0eVR5cGVzLCBlbmRwb2ludCwgdG9rZW4sIHRlbmFudElkLCBjbGllbnRJZCwgY2xpZW50U2VjcmV0LCBhY2Nlc3NLZXksIHNlY3JldEtleSwgc2hvd1ByaXZhdGVVUkwsIHN0b3JhZ2VVUkwsIGJ1Y2tldE5hbWUsIGNsb3VkRm9sZGVyLCBhY2NvdW50TmFtZSwgYWNjb3VudEtleSwgY29udGFpbmVyTmFtZSwgc2VsZWN0ZWRSZWdpb25JZCwgbWlzc2luZ0ZpZWxkcywgaW52YWxpZEVuZHBvaW50IH0gPSB0aGlzO1xuICAgIHJldHVybiAoaChcImRpdlwiLCBudWxsLCBoKFwiYXJjZ2lzLW5ldy1pdGVtLWxvYWRlclwiLCB7IHR5cGU6IHRoaXMubG9hZGVyVHlwZSwgYWN0aXZlOiB0aGlzLmxvYWRpbmcsIHRleHQ6IHRoaXMubG9hZGVyTWVzc2FnZSB9KSwgaChcImFyY2dpcy1uZXctaXRlbS1kZXNjcmlwdGlvblwiLCB7IGhlYWRlcjogY29uZmlnU3RhdGUucG9ydGFsLmlzUG9ydGFsID8gaTE4bi5jb25uZWN0aW9uSW5mb0VudGVycHJpc2UgOiBpMThuLmNvbm5lY3Rpb25JbmZvT25saW5lIH0pLCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwiY29uZmlndXJlLWZvcm1cIiB9LCBoKFwiY2FsY2l0ZS1sYWJlbFwiLCBudWxsLCBpMThuLnByb3ZpZGVyLCBoKFwiY2FsY2l0ZS1pbnB1dFwiLCB7IHZhbHVlOiBpMThuLmNsb3VkUHJvdmlkZXJzW3Byb3ZpZGVyXSwgZGlzYWJsZWQ6IHRydWUgfSkpLCAocHJvdmlkZXIgPT09IFwiYW1hem9uXCIgfHwgcHJvdmlkZXIgPT09IFwiZ29vZ2xlXCIpICYmIChoKFwiY2FsY2l0ZS1sYWJlbFwiLCB7IGZvcjogXCJjcmVkZW50aWFsLXR5cGUtc2VsZWN0XCIgfSwgaTE4bi5jcmVkZW50aWFsVHlwZSwgaChcImNhbGNpdGUtc2VsZWN0XCIsIHsgaWQ6IFwiY3JlZGVudGlhbC10eXBlLXNlbGVjdFwiLCBsYWJlbDogXCJjcmVkZW50aWFsLXR5cGUtc2VsZWN0XCIsIG9uQ2FsY2l0ZVNlbGVjdENoYW5nZTogKGUpID0+IHtcbiAgICAgICAgY29uc3QgY3JlZGVudGlhbFR5cGUgPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgdGhpcy5taXNzaW5nRmllbGRzID0ge307XG4gICAgICAgIHRoaXMuY3JlZGVudGlhbFR5cGUgPSBjcmVkZW50aWFsVHlwZTtcbiAgICAgIH0sIGRpc2FibGVkOiBjcmVkZW50aWFsVHlwZU9wdGlvbnMubGVuZ3RoIDwgMiB9LCBjcmVkZW50aWFsVHlwZU9wdGlvbnMubWFwKChjcmVkZW50aWFsVHlwZSkgPT4ge1xuICAgICAgcmV0dXJuIChoKFwiY2FsY2l0ZS1vcHRpb25cIiwgeyBrZXk6IGNyZWRlbnRpYWxUeXBlLnZhbHVlLCBsYWJlbDogY3JlZGVudGlhbFR5cGUubGFiZWwsIHZhbHVlOiBjcmVkZW50aWFsVHlwZS52YWx1ZSwgc2VsZWN0ZWQ6IGNyZWRlbnRpYWxUeXBlLnZhbHVlID09PSB0aGlzLmNyZWRlbnRpYWxUeXBlIH0pKTtcbiAgICB9KSkpKSwgKHByb3ZpZGVyID09PSBcImF6dXJlXCIgfHwgcHJvdmlkZXIgPT09IFwiYXp1cmVkYXRhbGFrZWdlbjJzdG9yZVwiKSAmJiAoaChGcmFnbWVudCwgbnVsbCwgcHJvdmlkZXIgPT09IFwiYXp1cmVcIiAmJiAoaChcImNhbGNpdGUtbGFiZWxcIiwgeyBmb3I6IFwiYXV0aGVudGljYXRpb24tdHlwZS1zZWxlY3RcIiB9LCBpMThuLmF1dGhlbnRpY2F0aW9uVHlwZSwgaChcImNhbGNpdGUtc2VsZWN0XCIsIHsgaWQ6IFwiYXV0aGVudGljYXRpb24tdHlwZS1zZWxlY3RcIiwgbGFiZWw6IFwiYXV0aGVudGljYXRpb24tdHlwZS1zZWxlY3RcIiwgb25DYWxjaXRlU2VsZWN0Q2hhbmdlOiAoZSkgPT4ge1xuICAgICAgICBjb25zdCBzZWxlY3RlZEF1dGhlbnRpY2F0aW9uVHlwZSA9IGUudGFyZ2V0XG4gICAgICAgICAgLnZhbHVlO1xuICAgICAgICB0aGlzLm1pc3NpbmdGaWVsZHMgPSB7fTtcbiAgICAgICAgdGhpcy5zZWxlY3RlZEF1dGhlbnRpY2F0aW9uVHlwZSA9IHNlbGVjdGVkQXV0aGVudGljYXRpb25UeXBlO1xuICAgICAgfSB9LCBhdXRoZW50aWNhdGlvblR5cGVzLm1hcCgoYXV0aGVudGljYXRpb25UeXBlKSA9PiB7XG4gICAgICByZXR1cm4gKGgoXCJjYWxjaXRlLW9wdGlvblwiLCB7IGtleTogYXV0aGVudGljYXRpb25UeXBlLCBpZDogYXV0aGVudGljYXRpb25UeXBlLCBsYWJlbDogaTE4bi5hdXRoZW50aWNhdGlvblR5cGVzW2F1dGhlbnRpY2F0aW9uVHlwZV0sIHZhbHVlOiBhdXRoZW50aWNhdGlvblR5cGUsIHNlbGVjdGVkOiBzZWxlY3RlZEF1dGhlbnRpY2F0aW9uVHlwZSA9PT0gYXV0aGVudGljYXRpb25UeXBlIH0pKTtcbiAgICB9KSkpKSwgcHJvdmlkZXIgPT09IFwiYXp1cmVkYXRhbGFrZWdlbjJzdG9yZVwiICYmIChoKFwiY2FsY2l0ZS1sYWJlbFwiLCBudWxsLCBpMThuLmF1dGhlbnRpY2F0aW9uVHlwZSwgaChcImNhbGNpdGUtaW5wdXRcIiwgeyB2YWx1ZTogaTE4bi5hdXRoZW50aWNhdGlvblR5cGVzW3NlbGVjdGVkQXV0aGVudGljYXRpb25UeXBlXSwgZGlzYWJsZWQ6IHRydWUgfSkpKSwgaChcImNhbGNpdGUtbGFiZWxcIiwgeyBmb3I6IFwidG9rZW4taW5wdXRcIiwgY2xhc3M6IHsgaGlkZTogc2VsZWN0ZWRBdXRoZW50aWNhdGlvblR5cGUgIT09IFwic2FzVG9rZW5cIiB9IH0sIGkxOG4udG9rZW4sIGgoXCJjYWxjaXRlLWlucHV0XCIsIHsgaWQ6IFwidG9rZW4taW5wdXRcIiwgdmFsdWU6IHRva2VuLCBvbkNhbGNpdGVJbnB1dENoYW5nZTogKGUpID0+IHtcbiAgICAgICAgY29uc3QgdG9rZW4gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgdGhpcy50b2tlbiA9IHRva2VuO1xuICAgICAgfSwgcGxhY2Vob2xkZXI6IGkxOG4uc2FzVG9rZW5QbGFjZWhvbGRlciwgc3RhdHVzOiBtaXNzaW5nRmllbGRzW2kxOG4udG9rZW5dID8gXCJpbnZhbGlkXCIgOiBcImlkbGVcIiB9KSwgaChcImNhbGNpdGUtaW5wdXQtbWVzc2FnZVwiLCB7IGljb246IHRydWUsIHN0YXR1czogXCJpbnZhbGlkXCIsIGNsYXNzOiB7IGhpZGU6ICFtaXNzaW5nRmllbGRzW2kxOG4udG9rZW5dIH0gfSwgdGhpcy5nZW5lcmF0ZUVycm9yTXNnKGkxOG4udG9rZW4pKSksIGgoXCJjYWxjaXRlLWxhYmVsXCIsIHsgZm9yOiBcImlkZW50aXR5LXR5cGUtc2VsZWN0XCIsIGNsYXNzOiB7IGhpZGU6IHNlbGVjdGVkQXV0aGVudGljYXRpb25UeXBlICE9PSBcImFjdGl2ZURpcmVjdG9yeVwiIH0gfSwgaTE4bi5pZGVudGl0eVR5cGUsIGgoXCJjYWxjaXRlLXRpbGUtc2VsZWN0LWdyb3VwXCIsIHsgbGF5b3V0OiBcInZlcnRpY2FsXCIsIGlkOiBcImlkZW50aXR5LXR5cGUtc2VsZWN0XCIgfSwgaWRlbnRpdHlUeXBlcy5tYXAoKGlkZW50aXR5VHlwZSkgPT4ge1xuICAgICAgcmV0dXJuIChoKFwiY2FsY2l0ZS10aWxlLXNlbGVjdFwiLCB7IGtleTogaWRlbnRpdHlUeXBlLCBjaGVja2VkOiBzZWxlY3RlZElkZW50aXR5VHlwZSA9PT0gaWRlbnRpdHlUeXBlLCBoZWFkaW5nOiBpMThuLmlkZW50aXR5VHlwZXNbaWRlbnRpdHlUeXBlXSwgbmFtZTogXCJpZGVudGl0eS10eXBlLXNlbGVjdFwiLCBcImlucHV0LWVuYWJsZWRcIjogdHJ1ZSwgd2lkdGg6IFwiZnVsbFwiLCB0eXBlOiBcInJhZGlvXCIsIHZhbHVlOiBpZGVudGl0eVR5cGUsIG9uQ2FsY2l0ZVRpbGVTZWxlY3RDaGFuZ2U6IChlKSA9PiB7XG4gICAgICAgICAgY29uc3Qgc2VsZWN0ZWRJZGVudGl0eVR5cGUgPSBlLnRhcmdldFxuICAgICAgICAgICAgLnZhbHVlO1xuICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJZGVudGl0eVR5cGUgPSBzZWxlY3RlZElkZW50aXR5VHlwZTtcbiAgICAgICAgfSB9KSk7XG4gICAgfSkpKSwgaChcImNhbGNpdGUtbGFiZWxcIiwgeyBmb3I6IFwib3B0aW9uYWwtY2xpZW50LWlkLWlucHV0XCIsIGNsYXNzOiB7XG4gICAgICAgIGhpZGU6IHNlbGVjdGVkQXV0aGVudGljYXRpb25UeXBlICE9PSBcImFjdGl2ZURpcmVjdG9yeVwiIHx8XG4gICAgICAgICAgc2VsZWN0ZWRJZGVudGl0eVR5cGUgIT09IFwidXNlckFzc2lnbmVkSWRlbnRpdHlcIlxuICAgICAgfSB9LCBpMThuLmNsaWVudElkLCBoKFwiY2FsY2l0ZS1pbnB1dFwiLCB7IGlkOiBcIm9wdGlvbmFsLWNsaWVudC1pZC1pbnB1dFwiLCB2YWx1ZTogY2xpZW50SWQsIG9uQ2FsY2l0ZUlucHV0Q2hhbmdlOiAoZSkgPT4ge1xuICAgICAgICBjb25zdCBjbGllbnRJZCA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICB0aGlzLmNsaWVudElkID0gY2xpZW50SWQ7XG4gICAgICB9LCBzdGF0dXM6IG1pc3NpbmdGaWVsZHNbaTE4bi5jbGllbnRJZF0gPyBcImludmFsaWRcIiA6IFwiaWRsZVwiIH0pLCBoKFwiY2FsY2l0ZS1pbnB1dC1tZXNzYWdlXCIsIHsgaWNvbjogdHJ1ZSwgc3RhdHVzOiBcImludmFsaWRcIiwgY2xhc3M6IHsgaGlkZTogIW1pc3NpbmdGaWVsZHNbaTE4bi5jbGllbnRJZF0gfSB9LCB0aGlzLmdlbmVyYXRlRXJyb3JNc2coaTE4bi5jbGllbnRJZCkpKSwgaChcImNhbGNpdGUtbGFiZWxcIiwgeyBmb3I6IFwidGVuYW50LWlkLWlucHV0XCIsIGNsYXNzOiB7XG4gICAgICAgIGhpZGU6IHNlbGVjdGVkQXV0aGVudGljYXRpb25UeXBlICE9PSBcImFjdGl2ZURpcmVjdG9yeVwiIHx8XG4gICAgICAgICAgc2VsZWN0ZWRJZGVudGl0eVR5cGUgIT09IFwic2VydmljZVByaW5jaXBhbFwiXG4gICAgICB9IH0sIGkxOG4udGVuYW50SWQsIGgoXCJjYWxjaXRlLWlucHV0XCIsIHsgaWQ6IFwidGVuYW50LWlkLWlucHV0XCIsIHZhbHVlOiB0ZW5hbnRJZCwgb25DYWxjaXRlSW5wdXRDaGFuZ2U6IChlKSA9PiB7XG4gICAgICAgIGNvbnN0IHRlbmFudElkID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgIHRoaXMudGVuYW50SWQgPSB0ZW5hbnRJZDtcbiAgICAgIH0sIHN0YXR1czogbWlzc2luZ0ZpZWxkc1tpMThuLnRlbmFudElkXSA/IFwiaW52YWxpZFwiIDogXCJpZGxlXCIgfSksIGgoXCJjYWxjaXRlLWlucHV0LW1lc3NhZ2VcIiwgeyBpY29uOiB0cnVlLCBzdGF0dXM6IFwiaW52YWxpZFwiLCBjbGFzczogeyBoaWRlOiAhbWlzc2luZ0ZpZWxkc1tpMThuLnRlbmFudElkXSB9IH0sIHRoaXMuZ2VuZXJhdGVFcnJvck1zZyhpMThuLnRlbmFudElkKSkpLCBoKFwiY2FsY2l0ZS1sYWJlbFwiLCB7IGZvcjogXCJjbGllbnQtaWQtaW5wdXRcIiwgY2xhc3M6IHtcbiAgICAgICAgaGlkZTogc2VsZWN0ZWRBdXRoZW50aWNhdGlvblR5cGUgIT09IFwiYWN0aXZlRGlyZWN0b3J5XCIgfHxcbiAgICAgICAgICBzZWxlY3RlZElkZW50aXR5VHlwZSAhPT0gXCJzZXJ2aWNlUHJpbmNpcGFsXCJcbiAgICAgIH0gfSwgaTE4bi5jbGllbnRJZCwgaChcImNhbGNpdGUtaW5wdXRcIiwgeyBpZDogXCJjbGllbnQtaWQtaW5wdXRcIiwgdmFsdWU6IGNsaWVudElkLCBvbkNhbGNpdGVJbnB1dENoYW5nZTogKGUpID0+IHtcbiAgICAgICAgY29uc3QgY2xpZW50SWQgPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgdGhpcy5jbGllbnRJZCA9IGNsaWVudElkO1xuICAgICAgfSwgc3RhdHVzOiBtaXNzaW5nRmllbGRzW2kxOG4uY2xpZW50SWRdID8gXCJpbnZhbGlkXCIgOiBcImlkbGVcIiB9KSwgaChcImNhbGNpdGUtaW5wdXQtbWVzc2FnZVwiLCB7IGljb246IHRydWUsIHN0YXR1czogXCJpbnZhbGlkXCIsIGNsYXNzOiB7IGhpZGU6ICFtaXNzaW5nRmllbGRzW2kxOG4uY2xpZW50SWRdIH0gfSwgdGhpcy5nZW5lcmF0ZUVycm9yTXNnKGkxOG4uY2xpZW50SWQpKSksIGgoXCJjYWxjaXRlLWxhYmVsXCIsIHsgZm9yOiBcImNsaWVudC1zZWNyZXQtaW5wdXRcIiwgY2xhc3M6IHtcbiAgICAgICAgaGlkZTogc2VsZWN0ZWRBdXRoZW50aWNhdGlvblR5cGUgIT09IFwiYWN0aXZlRGlyZWN0b3J5XCIgfHxcbiAgICAgICAgICBzZWxlY3RlZElkZW50aXR5VHlwZSAhPT0gXCJzZXJ2aWNlUHJpbmNpcGFsXCJcbiAgICAgIH0gfSwgaTE4bi5jbGllbnRTZWNyZXQsIGgoXCJjYWxjaXRlLWlucHV0XCIsIHsgaWQ6IFwiY2xpZW50LXNlY3JldC1pbnB1dFwiLCB0eXBlOiBcInBhc3N3b3JkXCIsIHZhbHVlOiBjbGllbnRTZWNyZXQsIG9uQ2FsY2l0ZUlucHV0Q2hhbmdlOiAoZSkgPT4ge1xuICAgICAgICBjb25zdCBjbGllbnRTZWNyZXQgPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgdGhpcy5jbGllbnRTZWNyZXQgPSBjbGllbnRTZWNyZXQ7XG4gICAgICB9LCBzdGF0dXM6IG1pc3NpbmdGaWVsZHNbaTE4bi5jbGllbnRTZWNyZXRdID8gXCJpbnZhbGlkXCIgOiBcImlkbGVcIiB9KSwgaChcImNhbGNpdGUtaW5wdXQtbWVzc2FnZVwiLCB7IGljb246IHRydWUsIHN0YXR1czogXCJpbnZhbGlkXCIsIGNsYXNzOiB7IGhpZGU6ICFtaXNzaW5nRmllbGRzW2kxOG4uY2xpZW50U2VjcmV0XSB9IH0sIHRoaXMuZ2VuZXJhdGVFcnJvck1zZyhpMThuLmNsaWVudFNlY3JldCkpKSwgaChcImNhbGNpdGUtbGFiZWxcIiwgeyBmb3I6IFwiYWNjb3VudC1uYW1lLWlucHV0XCIsIGNsYXNzOiB7XG4gICAgICAgIGhpZGU6IChzZWxlY3RlZFJlZ2lvbklkID09PSBcIm90aGVyXCIgfHwgc2VsZWN0ZWRBdXRoZW50aWNhdGlvblR5cGUgPT09IFwiYW5vbnltb3VzXCIpICYmXG4gICAgICAgICAgc2VsZWN0ZWRBdXRoZW50aWNhdGlvblR5cGUgIT09IFwic2hhcmVkS2V5XCJcbiAgICAgIH0gfSwgaTE4bi5hY2NvdW50TmFtZSwgaChcImNhbGNpdGUtaW5wdXRcIiwgeyBpZDogXCJhY2NvdW50LW5hbWUtaW5wdXRcIiwgdmFsdWU6IGFjY291bnROYW1lLCBvbkNhbGNpdGVJbnB1dENoYW5nZTogKGUpID0+IHtcbiAgICAgICAgY29uc3QgYWNjb3VudE5hbWUgPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgdGhpcy5hY2NvdW50TmFtZSA9IGFjY291bnROYW1lO1xuICAgICAgfSwgc3RhdHVzOiBtaXNzaW5nRmllbGRzW2kxOG4uYWNjb3VudE5hbWVdID8gXCJpbnZhbGlkXCIgOiBcImlkbGVcIiB9KSwgaChcImNhbGNpdGUtaW5wdXQtbWVzc2FnZVwiLCB7IGljb246IHRydWUsIHN0YXR1czogXCJpbnZhbGlkXCIsIGNsYXNzOiB7IGhpZGU6ICFtaXNzaW5nRmllbGRzW2kxOG4uYWNjb3VudE5hbWVdIH0gfSwgdGhpcy5nZW5lcmF0ZUVycm9yTXNnKGkxOG4uYWNjb3VudE5hbWUpKSksIGgoXCJjYWxjaXRlLWxhYmVsXCIsIHsgZm9yOiBcImFjY291bnQta2V5LWlucHV0XCIsIGNsYXNzOiB7IGhpZGU6IHNlbGVjdGVkQXV0aGVudGljYXRpb25UeXBlICE9PSBcInNoYXJlZEtleVwiIH0gfSwgaTE4bi5hY2NvdW50S2V5LCBoKFwiY2FsY2l0ZS1pbnB1dFwiLCB7IGlkOiBcImFjY291bnQta2V5LWlucHV0XCIsIHR5cGU6IFwicGFzc3dvcmRcIiwgdmFsdWU6IGFjY291bnRLZXksIG9uQ2FsY2l0ZUlucHV0Q2hhbmdlOiAoZSkgPT4ge1xuICAgICAgICBjb25zdCBhY2NvdW50S2V5ID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgIHRoaXMuYWNjb3VudEtleSA9IGFjY291bnRLZXk7XG4gICAgICB9LCBzdGF0dXM6IG1pc3NpbmdGaWVsZHNbaTE4bi5hY2NvdW50S2V5XSA/IFwiaW52YWxpZFwiIDogXCJpZGxlXCIgfSksIGgoXCJjYWxjaXRlLWlucHV0LW1lc3NhZ2VcIiwgeyBpY29uOiB0cnVlLCBzdGF0dXM6IFwiaW52YWxpZFwiLCBjbGFzczogeyBoaWRlOiAhbWlzc2luZ0ZpZWxkc1tpMThuLmFjY291bnRLZXldIH0gfSwgdGhpcy5nZW5lcmF0ZUVycm9yTXNnKGkxOG4uYWNjb3VudEtleSkpKSwgaChcImNhbGNpdGUtbGFiZWxcIiwgeyBmb3I6IFwiZW52aXJvbm1lbnQtc2VsZWN0XCIsIGNsYXNzOiB7IGhpZGU6IHNlbGVjdGVkQXV0aGVudGljYXRpb25UeXBlID09PSBcImFub255bW91c1wiIH0gfSwgaTE4bi5zdG9yYWdlRG9tYWluLCBoKFwiY2FsY2l0ZS1zZWxlY3RcIiwgeyBpZDogXCJlbnZpcm9ubWVudC1zZWxlY3RcIiwgbGFiZWw6IFwiZW52aXJvbm1lbnQtc2VsZWN0XCIsIG9uQ2FsY2l0ZVNlbGVjdENoYW5nZTogKGUpID0+IHtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRSZWdpb25JZCA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICB0aGlzLnNlbGVjdGVkUmVnaW9uSWQgPSBzZWxlY3RlZFJlZ2lvbklkO1xuICAgICAgfSB9LCByZWdpb25TZWxlY3RPcHRpb25zLm1hcCgocmVnaW9uKSA9PiB7XG4gICAgICByZXR1cm4gKGgoXCJjYWxjaXRlLW9wdGlvblwiLCB7IGtleTogcmVnaW9uLmlkLCBpZDogcmVnaW9uLmlkLCBsYWJlbDogYCR7cmVnaW9uLmRpc3BsYXlOYW1lfSAke3JlZ2lvbi5zdG9yYWdlRW5kcG9pbnRTdWZmaXggPyBgKCR7cmVnaW9uLnN0b3JhZ2VFbmRwb2ludFN1ZmZpeH0pYCA6IFwiXCJ9YCwgdmFsdWU6IHJlZ2lvbi5pZCwgc2VsZWN0ZWQ6IHJlZ2lvbi5pZCA9PT0gdGhpcy5zZWxlY3RlZFJlZ2lvbklkIH0pKTtcbiAgICB9KSkpLCBoKFwiY2FsY2l0ZS1sYWJlbFwiLCB7IGZvcjogXCJlbmRwb2ludC1pbnB1dFwiLCBjbGFzczoge1xuICAgICAgICBoaWRlOiB0cnVlLFxuICAgICAgICBzaG93OiBzZWxlY3RlZFJlZ2lvbklkID09PSBcIm90aGVyXCIgfHwgc2VsZWN0ZWRBdXRoZW50aWNhdGlvblR5cGUgPT09IFwiYW5vbnltb3VzXCJcbiAgICAgIH0gfSwgaTE4bi5lbmRwb2ludCwgaChcImNhbGNpdGUtaW5wdXRcIiwgeyBpZDogXCJlbmRwb2ludC1pbnB1dFwiLCB2YWx1ZTogZW5kcG9pbnQsIG9uQ2FsY2l0ZUlucHV0Q2hhbmdlOiAoZSkgPT4ge1xuICAgICAgICBjb25zdCBlbmRwb2ludCA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICBpZiAoIWVuZHBvaW50LnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aChcImh0dHBzXCIpICYmIGVuZHBvaW50Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0aGlzLmludmFsaWRFbmRwb2ludCA9IHRydWU7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW52YWxpZEVuZHBvaW50ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZW5kcG9pbnQgPSBlbmRwb2ludDtcbiAgICAgIH0sIHBsYWNlaG9sZGVyOiBpMThuLmVuZHBvaW50UGxhY2Vob2xkZXIsIHN0YXR1czogbWlzc2luZ0ZpZWxkc1tpMThuLmVuZHBvaW50XSB8fCBpbnZhbGlkRW5kcG9pbnQgPyBcImludmFsaWRcIiA6IFwiaWRsZVwiIH0pLCBoKFwiY2FsY2l0ZS1pbnB1dC1tZXNzYWdlXCIsIHsgaWNvbjogdHJ1ZSwgc3RhdHVzOiBcImludmFsaWRcIiwgY2xhc3M6IHsgaGlkZTogIW1pc3NpbmdGaWVsZHNbaTE4bi5lbmRwb2ludF0gJiYgIWludmFsaWRFbmRwb2ludCB9IH0sIHRoaXMuaW52YWxpZEVuZHBvaW50XG4gICAgICA/IGkxOG4uaW52YWxpZEVuZHBvaW50XG4gICAgICA6IHRoaXMuZ2VuZXJhdGVFcnJvck1zZyhpMThuLmVuZHBvaW50KSkpLCBoKFwiY2FsY2l0ZS1sYWJlbFwiLCB7IGZvcjogXCJjb250YWluZXItbmFtZS1pbnB1dFwiIH0sIGkxOG4uY29udGFpbmVyTmFtZSwgaChcImNhbGNpdGUtaW5wdXRcIiwgeyBpZDogXCJjb250YWluZXItbmFtZS1pbnB1dFwiLCB2YWx1ZTogY29udGFpbmVyTmFtZSwgb25DYWxjaXRlSW5wdXRDaGFuZ2U6IChlKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lck5hbWUgPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgdGhpcy5jb250YWluZXJOYW1lID0gY29udGFpbmVyTmFtZTtcbiAgICAgIH0sIHN0YXR1czogbWlzc2luZ0ZpZWxkc1tpMThuLmNvbnRhaW5lck5hbWVdID8gXCJpbnZhbGlkXCIgOiBcImlkbGVcIiB9KSwgaChcImNhbGNpdGUtaW5wdXQtbWVzc2FnZVwiLCB7IGljb246IHRydWUsIHN0YXR1czogXCJpbnZhbGlkXCIsIGNsYXNzOiB7IGhpZGU6ICFtaXNzaW5nRmllbGRzW2kxOG4uY29udGFpbmVyTmFtZV0gfSB9LCB0aGlzLmdlbmVyYXRlRXJyb3JNc2coaTE4bi5jb250YWluZXJOYW1lKSkpKSksIHByb3ZpZGVyICE9PSBcImF6dXJlXCIgJiYgcHJvdmlkZXIgIT09IFwiYXp1cmVkYXRhbGFrZWdlbjJzdG9yZVwiICYmIChoKEZyYWdtZW50LCBudWxsLCBoKFwiY2FsY2l0ZS1sYWJlbFwiLCB7IGZvcjogXCJhY2Nlc3Mta2V5LWlucHV0XCIgfSwgaTE4bi5hY2Nlc3NLZXksIGgoXCJjYWxjaXRlLWlucHV0XCIsIHsgaWQ6IFwiYWNjZXNzLWtleS1pbnB1dFwiLCB2YWx1ZTogYWNjZXNzS2V5LCBkaXNhYmxlZDogY3JlZGVudGlhbFR5cGUgPT09IFwiSUFNUm9sZVwiIHx8IGNyZWRlbnRpYWxUeXBlID09PSBcInByaXZhdGVLZXlcIiwgb25DYWxjaXRlSW5wdXRDaGFuZ2U6IChlKSA9PiB7XG4gICAgICAgIGNvbnN0IGFjY2Vzc0tleSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICB0aGlzLmFjY2Vzc0tleSA9IGFjY2Vzc0tleTtcbiAgICAgIH0sIHN0YXR1czogbWlzc2luZ0ZpZWxkc1tpMThuLmFjY2Vzc0tleV0gPyBcImludmFsaWRcIiA6IFwiaWRsZVwiIH0pLCBoKFwiY2FsY2l0ZS1pbnB1dC1tZXNzYWdlXCIsIHsgaWNvbjogdHJ1ZSwgc3RhdHVzOiBcImludmFsaWRcIiwgY2xhc3M6IHsgaGlkZTogIW1pc3NpbmdGaWVsZHNbaTE4bi5hY2Nlc3NLZXldIH0gfSwgdGhpcy5nZW5lcmF0ZUVycm9yTXNnKGkxOG4uYWNjZXNzS2V5KSkpLCBoKFwiY2FsY2l0ZS1sYWJlbFwiLCB7IGZvcjogXCJzZWNyZXQta2V5LWlucHV0XCIgfSwgaTE4bi5zZWNyZXRLZXksIGgoXCJjYWxjaXRlLWlucHV0XCIsIHsgaWQ6IFwic2VjcmV0LWtleS1pbnB1dFwiLCB2YWx1ZTogc2VjcmV0S2V5LCB0eXBlOiBcInBhc3N3b3JkXCIsIGRpc2FibGVkOiBjcmVkZW50aWFsVHlwZSA9PT0gXCJJQU1Sb2xlXCIgfHwgY3JlZGVudGlhbFR5cGUgPT09IFwicHJpdmF0ZUtleVwiLCBvbkNhbGNpdGVJbnB1dENoYW5nZTogKGUpID0+IHtcbiAgICAgICAgY29uc3Qgc2VjcmV0S2V5ID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgIHRoaXMuc2VjcmV0S2V5ID0gc2VjcmV0S2V5O1xuICAgICAgfSwgc3RhdHVzOiBtaXNzaW5nRmllbGRzW2kxOG4uc2VjcmV0S2V5XSA/IFwiaW52YWxpZFwiIDogXCJpZGxlXCIgfSksIGgoXCJjYWxjaXRlLWlucHV0LW1lc3NhZ2VcIiwgeyBpY29uOiB0cnVlLCBzdGF0dXM6IFwiaW52YWxpZFwiLCBjbGFzczogeyBoaWRlOiAhbWlzc2luZ0ZpZWxkc1tpMThuLnNlY3JldEtleV0gfSB9LCB0aGlzLmdlbmVyYXRlRXJyb3JNc2coaTE4bi5zZWNyZXRLZXkpKSksIGgoXCJjYWxjaXRlLWxhYmVsXCIsIHsgZm9yOiBcInJlZ2lvbi1zZWxlY3RcIiB9LCBpMThuLnJlZ2lvbiwgaChcImNhbGNpdGUtc2VsZWN0XCIsIHsgaWQ6IFwicmVnaW9uLXNlbGVjdFwiLCBsYWJlbDogXCJyZWdpb24tc2VsZWN0XCIsIG9uQ2FsY2l0ZVNlbGVjdENoYW5nZTogKGUpID0+IHtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRSZWdpb25JZCA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICB0aGlzLnNlbGVjdGVkUmVnaW9uSWQgPSBzZWxlY3RlZFJlZ2lvbklkO1xuICAgICAgfSwgZGlzYWJsZWQ6IHByb3ZpZGVyID09PSBcImdvb2dsZVwiIH0sIHJlZ2lvblNlbGVjdE9wdGlvbnMubWFwKChyZWdpb24pID0+IHtcbiAgICAgIHJldHVybiAoaChcImNhbGNpdGUtb3B0aW9uXCIsIHsga2V5OiByZWdpb24uaWQsIGlkOiByZWdpb24uaWQsIGxhYmVsOiByZWdpb24uZGlzcGxheU5hbWUsIHZhbHVlOiByZWdpb24uaWQsIHNlbGVjdGVkOiByZWdpb24uaWQgPT09IHRoaXMuc2VsZWN0ZWRSZWdpb25JZCB9KSk7XG4gICAgfSkpKSwgc2hvd1ByaXZhdGVVUkwgJiYgKGgoXCJjYWxjaXRlLWxhYmVsXCIsIHsgZm9yOiBcInN0b3JhZ2UtdXJsLWlucHV0XCIgfSwgaTE4bi5zdG9yYWdlVVJMLCBoKFwiY2FsY2l0ZS1pbnB1dFwiLCB7IGlkOiBcInN0b3JhZ2UtdXJsLWlucHV0XCIsIHZhbHVlOiBzdG9yYWdlVVJMLCBvbkNhbGNpdGVJbnB1dENoYW5nZTogKGUpID0+IHtcbiAgICAgICAgY29uc3Qgc3RvcmFnZVVSTCA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICB0aGlzLnN0b3JhZ2VVUkwgPSBzdG9yYWdlVVJMO1xuICAgICAgfSwgc3RhdHVzOiBtaXNzaW5nRmllbGRzW2kxOG4uc3RvcmFnZVVSTF0gPyBcImludmFsaWRcIiA6IFwiaWRsZVwiIH0pLCBoKFwiY2FsY2l0ZS1pbnB1dC1tZXNzYWdlXCIsIHsgaWNvbjogdHJ1ZSwgc3RhdHVzOiBcImludmFsaWRcIiwgY2xhc3M6IHsgaGlkZTogIW1pc3NpbmdGaWVsZHNbaTE4bi5zdG9yYWdlVVJMXSB9IH0sIHRoaXMuZ2VuZXJhdGVFcnJvck1zZyhpMThuLnN0b3JhZ2VVUkwpKSkpLCBoKFwiY2FsY2l0ZS1sYWJlbFwiLCB7IGZvcjogXCJidWNrZXQtbmFtZS1pbnB1dFwiIH0sIGkxOG4uYnVja2V0TmFtZSwgaChcImNhbGNpdGUtaW5wdXRcIiwgeyBpZDogXCJidWNrZXQtbmFtZS1pbnB1dFwiLCB2YWx1ZTogYnVja2V0TmFtZSwgb25DYWxjaXRlSW5wdXRDaGFuZ2U6IChlKSA9PiB7XG4gICAgICAgIGNvbnN0IGJ1Y2tldE5hbWUgPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgdGhpcy5idWNrZXROYW1lID0gYnVja2V0TmFtZTtcbiAgICAgIH0sIHN0YXR1czogbWlzc2luZ0ZpZWxkc1tpMThuLmJ1Y2tldE5hbWVdID8gXCJpbnZhbGlkXCIgOiBcImlkbGVcIiB9KSwgaChcImNhbGNpdGUtaW5wdXQtbWVzc2FnZVwiLCB7IGljb246IHRydWUsIHN0YXR1czogXCJpbnZhbGlkXCIsIGNsYXNzOiB7IGhpZGU6ICFtaXNzaW5nRmllbGRzW2kxOG4uYnVja2V0TmFtZV0gfSB9LCB0aGlzLmdlbmVyYXRlRXJyb3JNc2coaTE4bi5idWNrZXROYW1lKSkpKSksIGgoXCJjYWxjaXRlLWxhYmVsXCIsIHsgZm9yOiBcImNsb3VkLWZvbGRlci1pbnB1dFwiIH0sIGkxOG4uY2xvdWRGb2xkZXIsIGgoXCJjYWxjaXRlLWlucHV0XCIsIHsgaWQ6IFwiY2xvdWQtZm9sZGVyLWlucHV0XCIsIHZhbHVlOiBjbG91ZEZvbGRlciwgcGxhY2Vob2xkZXI6IGkxOG4uY2xvdWRGb2xkZXJQbGFjZUhvbGRlciwgb25DYWxjaXRlSW5wdXRDaGFuZ2U6IChlKSA9PiB7XG4gICAgICAgIGNvbnN0IGNsb3VkRm9sZGVyID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgIHRoaXMuY2xvdWRGb2xkZXIgPSBjbG91ZEZvbGRlcjtcbiAgICAgIH0gfSkpKSwgaChcImFyY2dpcy1uZXctaXRlbS1hbGVydFwiLCB7IGFjdGl2ZTogdGhpcy5lcnJvciAhPT0gdW5kZWZpbmVkLCBoZWFkaW5nOiAoX2EgPSB0aGlzLmVycm9yKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudGl0bGUsIGRlc2NyaXB0aW9uOiAoX2IgPSB0aGlzLmVycm9yKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuZGVzY3JpcHRpb24sIG9uQWxlcnREaXNtaXNzOiAoKSA9PiB7XG4gICAgICAgIHRoaXMuZXJyb3IgPSB1bmRlZmluZWQ7XG4gICAgICB9IH0pKSk7XG4gIH1cbiAgc3RhdGljIGdldCB3YXRjaGVycygpIHsgcmV0dXJuIHtcbiAgICBcInNlbGVjdGVkUmVnaW9uSWRcIjogW1widG9nZ2xlUHJpdmF0ZVVSTFwiXVxuICB9OyB9XG59O1xuQXJjZ2lzTmV3SXRlbVBhZ2VzRGF0YVN0b3JlU2VsZWN0Q2xvdWRDcmVkZW50aWFscy5zdHlsZSA9IGFyY2dpc05ld0l0ZW1QYWdlc0RhdGFTdG9yZVNlbGVjdENsb3VkQ3JlZGVudGlhbHNDc3M7XG5cbmV4cG9ydCB7IEFyY2dpc05ld0l0ZW1QYWdlc0RhdGFTdG9yZVNlbGVjdENsb3VkQ3JlZGVudGlhbHMgYXMgYXJjZ2lzX25ld19pdGVtX3BhZ2VzX2RhdGFfc3RvcmVfc2VsZWN0X2Nsb3VkX2NyZWRlbnRpYWxzIH07XG4iLCIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiB2My4wLjk5XG4gKi9cbmNvbnN0IGZvcm1hdFRpdGxlRm9yRGF0YVN0b3JlSXRlbSA9IChwcm92aWRlciwgZmllbGRWYWx1ZSkgPT4ge1xuICBsZXQgdGl0bGU7XG4gIGNvbnN0IGluaXRpYWxUaXRsZSA9IGZpZWxkVmFsdWUgIT09IG51bGwgJiYgZmllbGRWYWx1ZSAhPT0gdm9pZCAwID8gZmllbGRWYWx1ZSA6IFwiXCI7XG4gIHN3aXRjaCAocHJvdmlkZXIpIHtcbiAgICBjYXNlIFwiYW1hem9uXCI6XG4gICAgICB0aXRsZSA9IGBBbWF6b25TM18ke2luaXRpYWxUaXRsZX1gO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcImF6dXJlXCI6XG4gICAgICB0aXRsZSA9IGBNaWNyb3NvZnRfQXp1cmVfU3RvcmFnZV8ke2luaXRpYWxUaXRsZX1gO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcImJpZ1F1ZXJ5XCI6XG4gICAgICB0aXRsZSA9IGBCaWdRdWVyeV8ke2luaXRpYWxUaXRsZX1gO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcInNub3dmbGFrZVwiOlxuICAgICAgdGl0bGUgPSBgU25vd2ZsYWtlXyR7aW5pdGlhbFRpdGxlfWA7XG4gICAgICBicmVhaztcbiAgfVxuICByZXR1cm4gdGl0bGUucmVwbGFjZSgvIC9nLCBcIl9cIikucmVwbGFjZSgvLS9nLCBcIl9cIik7XG59O1xuXG5leHBvcnQgeyBmb3JtYXRUaXRsZUZvckRhdGFTdG9yZUl0ZW0gYXMgZiB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9