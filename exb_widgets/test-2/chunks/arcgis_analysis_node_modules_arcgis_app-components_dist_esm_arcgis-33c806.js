"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-33c806"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-file-browser.entry.js":
/*!**********************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-file-browser.entry.js ***!
  \**********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   arcgis_file_browser: () => (/* binding */ ArcgisFileBrowser)
/* harmony export */ });
/* harmony import */ var _index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-92ebb396.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-92ebb396.js");
/* harmony import */ var _locale_13e00a75_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./locale-13e00a75.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/locale-13e00a75.js");
/* harmony import */ var _privileges_35590eb4_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./privileges-35590eb4.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/privileges-35590eb4.js");
/* harmony import */ var _dom_13f5b00c_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./dom-13f5b00c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/dom-13f5b00c.js");
/* harmony import */ var _languageUtil_22258c90_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./languageUtil-22258c90.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/languageUtil-22258c90.js");
/* harmony import */ var _loadModules_aaf30bd6_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./loadModules-aaf30bd6.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/loadModules-aaf30bd6.js");
/* harmony import */ var _privileges_ccd5f37d_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./privileges-ccd5f37d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/privileges-ccd5f37d.js");
/* harmony import */ var _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./config-eb5f7dc2.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/config-eb5f7dc2.js");
/* harmony import */ var _index_81d548b7_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./index-81d548b7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-81d548b7.js");
/* harmony import */ var _portal_79caaeff_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./portal-79caaeff.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/portal-79caaeff.js");
/* harmony import */ var _functional_c82f5ab9_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./functional-c82f5ab9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-c82f5ab9.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */












const arcgisFileBrowserCss = ".file-browser{padding-top:2rem;padding-bottom:2rem;text-align:center;margin-bottom:2rem;width:100%;background-color:var(--calcite-ui-background);border-style:dashed;border-width:2px;border-color:var(--calcite-ui-border-1);box-sizing:border-box}.file-browser.full-height{align-items:center;justify-content:center}.file-browser.append-height{align-items:center;justify-content:center}.alert{text-align:initial}.input{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.text-container{margin-top:2rem;margin-bottom:2rem}.text{font-weight:500;font-size:1rem;color:var(--calcite-ui-text-1);margin-top:0;margin-bottom:0}.help-text{font-weight:400;font-size:0.875rem;margin-left:auto;margin-right:auto;margin-top:0.5rem;margin-bottom:0;max-width:38rem}.file-browser-button{font-size:0.875rem;line-height:1rem;padding:0;margin-top:0;margin-bottom:0;margin-left:0.75rem;margin-right:0.75rem;width:auto;color:var(--calcite-ui-text-1);border-radius:0;box-sizing:border-box;cursor:pointer;display:inline-flex;align-items:center;border:1px solid var(--calcite-ui-border-1);background-color:white;transition:all 150ms ease-in-out;outline-offset:0px;outline-color:transparent;font-family:inherit}.file-browser-button:hover{border-color:var(--calcite-ui-brand)}.file-browser-button:focus{outline:2px solid var(--calcite-ui-brand);outline-offset:-2px}.file-browser-button__icon{background-color:#f8f8f8;color:var(--calcite-ui-text-link);width:32px;height:32px;box-sizing:border-box;padding:4px;display:flex;align-items:center;justify-content:center}.file-browser-button__icon svg{width:100%}.file-browser-button__text{padding:8px}:host(.full-height),.full-height{display:flex;flex-direction:column;height:100%;width:100%}";

const ArcgisFileBrowser = class {
  constructor(hostRef) {
    (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.cloudDriveConnected = (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "cloudDriveConnected", 7);
    this.fileSelect = (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "fileSelect", 7);
    this.portal = undefined;
    this.config = undefined;
    this.user = undefined;
    this.userLicensedItems = undefined;
    this.cloud = true;
    this.showHelpLinkOnError = true;
    this.allowedExtensions = null;
    this.validTypes = null;
    this.maxFileSize = undefined;
    this.insideModal = undefined;
    this.fullHeight = undefined;
    this.helpText = undefined;
    this.helpLink = undefined;
    this.helpIdType = "default";
    this.errorMessage = undefined;
    this.files = undefined;
    this.fromDevice = false;
  }
  async componentWillLoad() {
    const { el, user, portal, userLicensedItems } = this;
    const locale = await (0,_locale_13e00a75_js__WEBPACK_IMPORTED_MODULE_1__.g)(el);
    this.i18n = locale[0];
    this.canPublishFromCloud = this.cloud && (0,_privileges_35590eb4_js__WEBPACK_IMPORTED_MODULE_2__.c)(user, portal, userLicensedItems);
  }
  connectCloudDrive(provider) {
    this.cloudDriveConnected.emit(provider);
  }
  async focusMainInput() {
    this.mainInputRef.focus();
  }
  render() {
    const { i18n, canPublishFromCloud, allowedExtensions, maxFileSize, insideModal, helpText, helpLink, helpIdType, fullHeight, user, config, showHelpLinkOnError, validTypes } = this;
    return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-drag-and-drop", { files: this.files, showHelpLinkOnError: showHelpLinkOnError, allowedExtensions: allowedExtensions, helpIdType: helpIdType, validTypes: validTypes, maxFileSize: maxFileSize, insideModal: insideModal, fullHeight: fullHeight, class: { "full-height": fullHeight }, user: user, config: config, onArcgisDropSuccess: (e) => {
        this.fileSelect.emit({
          file: e.detail,
          // ! Don't remove `this` because the state might not be fully updated when this is called
          // !   so destructing will give us old values
          source: this.fromDevice ? "local-device" : "drag-n-drop"
        });
      } }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: {
        "file-browser": true,
        "full-height": fullHeight
      } }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("svg", { width: "42", height: "54", viewBox: "0 0 42 54", fill: "none", xmlns: "http://www.w3.org/2000/svg", "aria-hidden": "true", focusable: "false" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "M31.566 0H0V53.8H41.8V10.234L31.566 0ZM31.8 1.366L40.434 10H31.8V1.366ZM0.799999 53V0.8H31V10.8H41V53H0.799999Z", fill: "#6A6A6A" }), ")", (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("path", { "fill-rule": "evenodd", "clip-rule": "evenodd", d: "M20.9004 38V25.707L18.2544 28.354L17.5474 27.647L21.4004 23.793L25.2544 27.647L24.5474 28.354L21.9004 25.707V38H20.9004ZM14.9004 21H27.9004V20H14.9004V21Z", fill: "#6A6A6A" })), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("input", { onChange: (e) => {
        this.fromDevice = true;
        this.files = Object.assign({}, e.target.files);
        // We store the actual value in `files` already so
        //  just clear this just in case the user re-upload
        this.inputElement.value = null;
      }, ref: (el) => (this.inputElement = el), accept: allowedExtensions === null || allowedExtensions === void 0 ? void 0 : allowedExtensions.map((extension) => `.${extension}`).join(","), tabIndex: -1, class: "input", type: "file" }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "text-container" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("h3", { class: "text" }, i18n.drag), helpLink ? ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-link", { href: helpLink, target: "_blank" }, helpText)) : ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("p", { class: "help-text" }, helpText))), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "cta-container" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("button", { class: "file-browser-button", onClick: () => { var _a; return (_a = this.inputElement) === null || _a === void 0 ? void 0 : _a.click(); }, ref: (ele) => (this.mainInputRef = ele) }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: "file-browser-button__icon" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { icon: "desktop" })), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: "file-browser-button__text" }, i18n.device)), canPublishFromCloud && [
      (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("button", { class: "file-browser-button", onClick: () => this.connectCloudDrive("google drive") }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: "file-browser-button__icon" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("svg", { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 64 64" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "m9.84 48.35 2.3 4a5.25 5.25 0 0 0 2 2l8.2-14.2H5.9a5.4 5.4 0 0 0 .72 2.69z", fill: "#0066da" }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "m32 23.37-8.26-14.2a5.29 5.29 0 0 0-2 2L6.62 37.39a5.42 5.42 0 0 0-.72 2.69h16.41z", fill: "#00ac47" }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "M49.79 54.28a5.25 5.25 0 0 0 2-2l1-1.64 4.56-7.9a5.4 5.4 0 0 0 .65-2.66H41.59l3.49 6.86z", fill: "#ea4335" }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "m32 23.37 8.21-14.2a5.24 5.24 0 0 0-2.69-.72h-11a5.58 5.58 0 0 0-2.69.72z", fill: "#00832d" }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "M41.59 40.08H22.31l-8.2 14.2a5.2 5.2 0 0 0 2.68.72h30.32a5.51 5.51 0 0 0 2.68-.72z", fill: "#2684fc" }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "m49.7 24.27-7.57-13.13a5.39 5.39 0 0 0-2-2L32 23.37l9.64 16.71H58a5.43 5.43 0 0 0-.72-2.69z", fill: "#ffba00" }))), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: "file-browser-button__text" }, i18n.googleDrive)),
      (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("button", { class: "file-browser-button", onClick: () => this.connectCloudDrive("dropbox") }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: "file-browser-button__icon" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("svg", { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 64 64" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "M20 11.61 8 19.26l12 7.64 12-7.64-12-7.65zM44 11.61l-12 7.65 12 7.64 12-7.64-12-7.65z", fill: "#0061ff" }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "m8 34.55 12 7.64 12-7.64-12-7.65-12 7.65zM44 26.9l-12 7.65 12 7.64 12-7.64-12-7.65zM20 44.74l12 7.65 12-7.65-12-7.64-12 7.64z", fill: "#0061ff" }))), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: "file-browser-button__text" }, i18n.dropbox)),
      (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("button", { class: "file-browser-button", onClick: () => this.connectCloudDrive("onedrive") }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: "file-browser-button__icon" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("svg", { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 64 64" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("g", null, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "M37.14 37.93 47.5 28a15.68 15.68 0 0 0-28.29-4.7c.16 0 17.93 14.63 17.93 14.63z", fill: "#0364b8" }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "M26 25.16a12.38 12.38 0 0 0-6.59-1.87h-.16A12.53 12.53 0 0 0 9.09 43l15.51-1.94 11.89-9.59z", fill: "#0078d4" }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "M47.5 28h-.69a10.18 10.18 0 0 0-4 .83l-6.28 2.64L43.41 40l12.37 3a10.2 10.2 0 0 0-8.28-15z", fill: "#1490df" }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "M9.09 43a12.53 12.53 0 0 0 10.28 5.37h27.44a10.19 10.19 0 0 0 9-5.36L36.49 31.47z", fill: "#28a8ea" })))), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: "file-browser-button__text" }, i18n.oneDrive))
    ]))));
  }
  get el() { return (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.d)(this); }
};
ArcgisFileBrowser.style = arcgisFileBrowserCss;




/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/languageUtil-22258c90.js":
/*!******************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/languageUtil-22258c90.js ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   C: () => (/* binding */ CSS_UTILITY),
/* harmony export */   a: () => (/* binding */ formatDate),
/* harmony export */   f: () => (/* binding */ formatNumber),
/* harmony export */   g: () => (/* binding */ getElementDir),
/* harmony export */   l: () => (/* binding */ languageMap)
/* harmony export */ });
/* harmony import */ var _loadModules_aaf30bd6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./loadModules-aaf30bd6.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/loadModules-aaf30bd6.js");
/* harmony import */ var _dom_13f5b00c_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./dom-13f5b00c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/dom-13f5b00c.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */



const languageMap = new Map([
  ["ar", "ar"],
  ["bg", "bg"],
  ["bs", "bs"],
  ["ca", "ca"],
  ["cs", "cs"],
  ["da", "da"],
  ["de", "de"],
  ["el", "el"],
  ["en", "en"],
  ["es", "es"],
  ["et", "et"],
  ["fi", "fi"],
  ["fr", "fr"],
  ["he", "he"],
  ["hr", "hr"],
  ["hu", "hu"],
  ["id", "id"],
  ["it", "it"],
  ["ja", "ja"],
  ["ko", "ko"],
  ["lt", "lt"],
  ["lv", "lv"],
  ["nb", "nb"],
  ["nl", "nl"],
  ["pl", "pl"],
  ["pt-br", "pt-BR"],
  ["pt-pt", "pt-PT"],
  ["ro", "ro"],
  ["ru", "ru"],
  ["sk", "sk"],
  ["sl", "sl"],
  ["sr", "sr"],
  ["sv", "sv"],
  ["th", "th"],
  ["tr", "tr"],
  ["uk", "uk"],
  ["vi", "vi"],
  ["zh-cn", "zh-CN"],
  ["zh-hk", "zh-HK"],
  ["zh-tw", "zh-TW"]
]);
// rtl
function getElementDir(el) {
  return getElementProp(el, "dir", "ltr");
}
function getElementProp(el, prop, value) {
  const closestWithProp = (0,_dom_13f5b00c_js__WEBPACK_IMPORTED_MODULE_1__.c)(el, `[${prop}]`);
  return closestWithProp ? closestWithProp.getAttribute(prop) : value;
}
// css
const CSS_UTILITY = {
  rtl: "arcgis--rtl"
};
async function formatNumber(number, options) {
  const { api, type, places } = options || {};
  if (api === 4) {
    const [intl] = await (0,_loadModules_aaf30bd6_js__WEBPACK_IMPORTED_MODULE_0__.l)(["esri/intl"]);
    const numberFormatIntlOptions = intl.convertNumberFormatToIntlOptions({
      places,
      style: type,
      digitSeparator: true
    });
    return intl.formatNumber(number, Object.assign(Object.assign({}, numberFormatIntlOptions), { style: type }));
  }
  const [dojoNumber] = await (0,_loadModules_aaf30bd6_js__WEBPACK_IMPORTED_MODULE_0__.l)(["dojo/number"]);
  return dojoNumber.format(number, {
    type,
    places,
    pattern: options === null || options === void 0 ? void 0 : options.pattern
  });
}
const cache = {};
function formatDate(date) {
  const lang = document.documentElement.lang;
  const dayShortMonthYear = {
    year: "numeric",
    month: "short",
    day: "numeric"
  };
  if (!cache[lang]) {
    cache[lang] = new Intl.DateTimeFormat(document.documentElement.lang, dayShortMonthYear);
  }
  return cache[lang].format(date);
}




/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/locale-13e00a75.js":
/*!************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/locale-13e00a75.js ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ getComponentClosestLanguage),
/* harmony export */   g: () => (/* binding */ getLocaleComponentStrings)
/* harmony export */ });
/* harmony import */ var _dom_13f5b00c_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dom-13f5b00c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/dom-13f5b00c.js");
/* harmony import */ var _languageUtil_22258c90_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./languageUtil-22258c90.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/languageUtil-22258c90.js");
/* harmony import */ var _index_92ebb396_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./index-92ebb396.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-92ebb396.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */




// https://medium.com/stencil-tricks/implementing-internationalisation-i18n-with-stencil-5e6559554117
function getComponentClosestLanguage(element) {
  var _a, _b, _c;
  const closestElement = (_a = (0,_dom_13f5b00c_js__WEBPACK_IMPORTED_MODULE_0__.c)(element, "[lang]")) !== null && _a !== void 0 ? _a : (_c = (_b = element.shadowRoot) === null || _b === void 0 ? void 0 : _b.ownerDocument) === null || _c === void 0 ? void 0 : _c.documentElement;
  // language set by the calling application or browser. defaults to english.
  const lang = ((closestElement === null || closestElement === void 0 ? void 0 : closestElement.lang) || (navigator === null || navigator === void 0 ? void 0 : navigator.language) || "en").toLowerCase();
  if (_languageUtil_22258c90_js__WEBPACK_IMPORTED_MODULE_1__.l.has(lang)) {
    return _languageUtil_22258c90_js__WEBPACK_IMPORTED_MODULE_1__.l.get(lang);
  }
  else {
    // "ru-RU" maps to "ru" use case
    if (_languageUtil_22258c90_js__WEBPACK_IMPORTED_MODULE_1__.l.has(lang.slice(0, 2))) {
      return _languageUtil_22258c90_js__WEBPACK_IMPORTED_MODULE_1__.l.get(lang.slice(0, 2));
    }
    else {
      return "en";
    }
  }
}
function getComponentClosestLanguageIntl(element) {
  var _a, _b, _c;
  // it's OK if we don't have the 4 letter language file for it
  // 4 letter language code needed for formatting numbers
  const closestElement = (_a = (0,_dom_13f5b00c_js__WEBPACK_IMPORTED_MODULE_0__.c)(element, "[lang]")) !== null && _a !== void 0 ? _a : (_c = (_b = element.shadowRoot) === null || _b === void 0 ? void 0 : _b.ownerDocument) === null || _c === void 0 ? void 0 : _c.documentElement;
  // language set by the calling application or browser. defaults to english.
  const lang = ((closestElement === null || closestElement === void 0 ? void 0 : closestElement.lang) || (navigator === null || navigator === void 0 ? void 0 : navigator.language) || "en").toLowerCase();
  if (_languageUtil_22258c90_js__WEBPACK_IMPORTED_MODULE_1__.l.has(lang)) {
    return _languageUtil_22258c90_js__WEBPACK_IMPORTED_MODULE_1__.l.get(lang);
  }
  else {
    if (_languageUtil_22258c90_js__WEBPACK_IMPORTED_MODULE_1__.l.has(lang.slice(0, 2))) {
      // we support the 2 letter coded language
      // e.g. it-CH vs it
      return lang;
    }
    else {
      return "en";
    }
  }
}
function fetchLocaleStringsForComponent(componentName, locale) {
  return new Promise((resolve, reject) => {
    fetch((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_2__.a)(`../arcgis-app-assets/i18n/${componentName}.i18n.${locale}.json`)).then((result) => {
      if (result.ok)
        resolve(result.json());
      else
        reject();
    }, () => reject());
  });
}
const stringCache = {};
function fetchLocaleStringsFromCache(componentName, locale) {
  const id = `${componentName}${locale}`;
  if (!stringCache[id]) {
    stringCache[id] = fetchLocaleStringsForComponent(componentName, locale);
  }
  return stringCache[id];
}
/**
 * Get strings and language codes.
 * This method returns 2 language codes.
 * The first one returns a code that's also supported as a language file.
 * The second one returns a code where there is support for the first 2 letters of the code as part of a language file,
 * but will return the original 4 letter code from the page.
 * E.g. For "it-ch" it will return "it" as the first language code and "it-ch" as the second.
 * The second one is required for esri.intl.setLocale() to get the correct formatting.
 *
 * If a tagName is provided it will overwite the element's tagName
 *
 *  @return [ strings, first language code, second language code]
 */
async function getLocaleComponentStrings(element, tagName) {
  const componentName = tagName || element.tagName.toLowerCase();
  const componentLanguage = getComponentClosestLanguage(element);
  const componentLanguageIntl = getComponentClosestLanguageIntl(element);
  let strings;
  try {
    strings = await fetchLocaleStringsFromCache(componentName, componentLanguage);
  }
  catch (e) {
    console.warn(`no locale for ${componentName} (${componentLanguage}) loading default locale en.`);
    strings = await fetchLocaleStringsFromCache(componentName, "en");
  }
  return [strings, componentLanguage, componentLanguageIntl];
}




/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXBwLWNvbXBvbmVudHNfZGlzdF9lc21fYXJjZ2lzLTMzYzgwNi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNrRztBQUM1QjtBQUNGO0FBQ3pDO0FBQ1M7QUFDRDtBQUNEO0FBQ0o7QUFDRDtBQUNDO0FBQ0k7O0FBRWxDLDRDQUE0QyxpQkFBaUIsb0JBQW9CLGtCQUFrQixtQkFBbUIsV0FBVyw4Q0FBOEMsb0JBQW9CLGlCQUFpQix3Q0FBd0Msc0JBQXNCLDBCQUEwQixtQkFBbUIsdUJBQXVCLDRCQUE0QixtQkFBbUIsdUJBQXVCLE9BQU8sbUJBQW1CLE9BQU8sa0JBQWtCLFVBQVUsV0FBVyxVQUFVLFlBQVksZ0JBQWdCLHNCQUFzQixtQkFBbUIsZUFBZSxnQkFBZ0IsZ0JBQWdCLG1CQUFtQixNQUFNLGdCQUFnQixlQUFlLCtCQUErQixhQUFhLGdCQUFnQixXQUFXLGdCQUFnQixtQkFBbUIsaUJBQWlCLGtCQUFrQixrQkFBa0IsZ0JBQWdCLGdCQUFnQixxQkFBcUIsbUJBQW1CLGlCQUFpQixVQUFVLGFBQWEsZ0JBQWdCLG9CQUFvQixxQkFBcUIsV0FBVywrQkFBK0IsZ0JBQWdCLHNCQUFzQixlQUFlLG9CQUFvQixtQkFBbUIsNENBQTRDLHVCQUF1QixpQ0FBaUMsbUJBQW1CLDBCQUEwQixvQkFBb0IsMkJBQTJCLHFDQUFxQywyQkFBMkIsMENBQTBDLG9CQUFvQiwyQkFBMkIseUJBQXlCLGtDQUFrQyxXQUFXLFlBQVksc0JBQXNCLFlBQVksYUFBYSxtQkFBbUIsdUJBQXVCLCtCQUErQixXQUFXLDJCQUEyQixZQUFZLGlDQUFpQyxhQUFhLHNCQUFzQixZQUFZLFdBQVc7O0FBRXh4RDtBQUNBO0FBQ0EsSUFBSSxxREFBZ0I7QUFDcEIsK0JBQStCLHFEQUFXO0FBQzFDLHNCQUFzQixxREFBVztBQUNqQztBQUNB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QUFDQSw2QkFBNkIsMkRBQVc7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFc0c7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM3RnRHO0FBQ0E7QUFDQTtBQUNBO0FBQzJFO0FBQ2I7QUFDTjs7QUFFeEQ7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLG1EQUFpQztBQUNoRTtBQUNBO0FBQ0EsTUFBTSx3REFBVztBQUNqQixXQUFXLHdEQUFXO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBLFFBQVEsd0RBQVc7QUFDbkIsYUFBYSx3REFBVztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixtREFBaUM7QUFDaEU7QUFDQTtBQUNBLE1BQU0sd0RBQVc7QUFDakIsV0FBVyx3REFBVztBQUN0QjtBQUNBO0FBQ0EsUUFBUSx3REFBVztBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxxREFBWSw4QkFBOEIsY0FBYyxRQUFRLE9BQU87QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixjQUFjLEVBQUUsT0FBTztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsZUFBZSxHQUFHLGtCQUFrQjtBQUN0RTtBQUNBO0FBQ0E7QUFDQTs7QUFFNEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcHAtY29tcG9uZW50cy9kaXN0L2VzbS9hcmNnaXMtZmlsZS1icm93c2VyLmVudHJ5LmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FwcC1jb21wb25lbnRzL2Rpc3QvZXNtL2xhbmd1YWdlVXRpbC0yMjI1OGM5MC5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcHAtY29tcG9uZW50cy9kaXN0L2VzbS9sb2NhbGUtMTNlMDBhNzUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogdjMuMC45OVxuICovXG5pbXBvcnQgeyByIGFzIHJlZ2lzdGVySW5zdGFuY2UsIGMgYXMgY3JlYXRlRXZlbnQsIGgsIGQgYXMgZ2V0RWxlbWVudCB9IGZyb20gJy4vaW5kZXgtOTJlYmIzOTYuanMnO1xuaW1wb3J0IHsgZyBhcyBnZXRMb2NhbGVDb21wb25lbnRTdHJpbmdzIH0gZnJvbSAnLi9sb2NhbGUtMTNlMDBhNzUuanMnO1xuaW1wb3J0IHsgYyBhcyBjYW5QdWJsaXNoRnJvbUNsb3VkIH0gZnJvbSAnLi9wcml2aWxlZ2VzLTM1NTkwZWI0LmpzJztcbmltcG9ydCAnLi9kb20tMTNmNWIwMGMuanMnO1xuaW1wb3J0ICcuL2xhbmd1YWdlVXRpbC0yMjI1OGM5MC5qcyc7XG5pbXBvcnQgJy4vbG9hZE1vZHVsZXMtYWFmMzBiZDYuanMnO1xuaW1wb3J0ICcuL3ByaXZpbGVnZXMtY2NkNWYzN2QuanMnO1xuaW1wb3J0ICcuL2NvbmZpZy1lYjVmN2RjMi5qcyc7XG5pbXBvcnQgJy4vaW5kZXgtODFkNTQ4YjcuanMnO1xuaW1wb3J0ICcuL3BvcnRhbC03OWNhYWVmZi5qcyc7XG5pbXBvcnQgJy4vZnVuY3Rpb25hbC1jODJmNWFiOS5qcyc7XG5cbmNvbnN0IGFyY2dpc0ZpbGVCcm93c2VyQ3NzID0gXCIuZmlsZS1icm93c2Vye3BhZGRpbmctdG9wOjJyZW07cGFkZGluZy1ib3R0b206MnJlbTt0ZXh0LWFsaWduOmNlbnRlcjttYXJnaW4tYm90dG9tOjJyZW07d2lkdGg6MTAwJTtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtdWktYmFja2dyb3VuZCk7Ym9yZGVyLXN0eWxlOmRhc2hlZDtib3JkZXItd2lkdGg6MnB4O2JvcmRlci1jb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWJvcmRlci0xKTtib3gtc2l6aW5nOmJvcmRlci1ib3h9LmZpbGUtYnJvd3Nlci5mdWxsLWhlaWdodHthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcn0uZmlsZS1icm93c2VyLmFwcGVuZC1oZWlnaHR7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXJ9LmFsZXJ0e3RleHQtYWxpZ246aW5pdGlhbH0uaW5wdXR7cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6MXB4O2hlaWdodDoxcHg7cGFkZGluZzowO21hcmdpbjotMXB4O292ZXJmbG93OmhpZGRlbjtjbGlwOnJlY3QoMCwgMCwgMCwgMCk7d2hpdGUtc3BhY2U6bm93cmFwO2JvcmRlci13aWR0aDowfS50ZXh0LWNvbnRhaW5lcnttYXJnaW4tdG9wOjJyZW07bWFyZ2luLWJvdHRvbToycmVtfS50ZXh0e2ZvbnQtd2VpZ2h0OjUwMDtmb250LXNpemU6MXJlbTtjb2xvcjp2YXIoLS1jYWxjaXRlLXVpLXRleHQtMSk7bWFyZ2luLXRvcDowO21hcmdpbi1ib3R0b206MH0uaGVscC10ZXh0e2ZvbnQtd2VpZ2h0OjQwMDtmb250LXNpemU6MC44NzVyZW07bWFyZ2luLWxlZnQ6YXV0bzttYXJnaW4tcmlnaHQ6YXV0bzttYXJnaW4tdG9wOjAuNXJlbTttYXJnaW4tYm90dG9tOjA7bWF4LXdpZHRoOjM4cmVtfS5maWxlLWJyb3dzZXItYnV0dG9ue2ZvbnQtc2l6ZTowLjg3NXJlbTtsaW5lLWhlaWdodDoxcmVtO3BhZGRpbmc6MDttYXJnaW4tdG9wOjA7bWFyZ2luLWJvdHRvbTowO21hcmdpbi1sZWZ0OjAuNzVyZW07bWFyZ2luLXJpZ2h0OjAuNzVyZW07d2lkdGg6YXV0bztjb2xvcjp2YXIoLS1jYWxjaXRlLXVpLXRleHQtMSk7Ym9yZGVyLXJhZGl1czowO2JveC1zaXppbmc6Ym9yZGVyLWJveDtjdXJzb3I6cG9pbnRlcjtkaXNwbGF5OmlubGluZS1mbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWNhbGNpdGUtdWktYm9yZGVyLTEpO2JhY2tncm91bmQtY29sb3I6d2hpdGU7dHJhbnNpdGlvbjphbGwgMTUwbXMgZWFzZS1pbi1vdXQ7b3V0bGluZS1vZmZzZXQ6MHB4O291dGxpbmUtY29sb3I6dHJhbnNwYXJlbnQ7Zm9udC1mYW1pbHk6aW5oZXJpdH0uZmlsZS1icm93c2VyLWJ1dHRvbjpob3Zlcntib3JkZXItY29sb3I6dmFyKC0tY2FsY2l0ZS11aS1icmFuZCl9LmZpbGUtYnJvd3Nlci1idXR0b246Zm9jdXN7b3V0bGluZToycHggc29saWQgdmFyKC0tY2FsY2l0ZS11aS1icmFuZCk7b3V0bGluZS1vZmZzZXQ6LTJweH0uZmlsZS1icm93c2VyLWJ1dHRvbl9faWNvbntiYWNrZ3JvdW5kLWNvbG9yOiNmOGY4Zjg7Y29sb3I6dmFyKC0tY2FsY2l0ZS11aS10ZXh0LWxpbmspO3dpZHRoOjMycHg7aGVpZ2h0OjMycHg7Ym94LXNpemluZzpib3JkZXItYm94O3BhZGRpbmc6NHB4O2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcn0uZmlsZS1icm93c2VyLWJ1dHRvbl9faWNvbiBzdmd7d2lkdGg6MTAwJX0uZmlsZS1icm93c2VyLWJ1dHRvbl9fdGV4dHtwYWRkaW5nOjhweH06aG9zdCguZnVsbC1oZWlnaHQpLC5mdWxsLWhlaWdodHtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2hlaWdodDoxMDAlO3dpZHRoOjEwMCV9XCI7XG5cbmNvbnN0IEFyY2dpc0ZpbGVCcm93c2VyID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XG4gICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICB0aGlzLmNsb3VkRHJpdmVDb25uZWN0ZWQgPSBjcmVhdGVFdmVudCh0aGlzLCBcImNsb3VkRHJpdmVDb25uZWN0ZWRcIiwgNyk7XG4gICAgdGhpcy5maWxlU2VsZWN0ID0gY3JlYXRlRXZlbnQodGhpcywgXCJmaWxlU2VsZWN0XCIsIDcpO1xuICAgIHRoaXMucG9ydGFsID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuY29uZmlnID0gdW5kZWZpbmVkO1xuICAgIHRoaXMudXNlciA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnVzZXJMaWNlbnNlZEl0ZW1zID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuY2xvdWQgPSB0cnVlO1xuICAgIHRoaXMuc2hvd0hlbHBMaW5rT25FcnJvciA9IHRydWU7XG4gICAgdGhpcy5hbGxvd2VkRXh0ZW5zaW9ucyA9IG51bGw7XG4gICAgdGhpcy52YWxpZFR5cGVzID0gbnVsbDtcbiAgICB0aGlzLm1heEZpbGVTaXplID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuaW5zaWRlTW9kYWwgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5mdWxsSGVpZ2h0ID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuaGVscFRleHQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5oZWxwTGluayA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmhlbHBJZFR5cGUgPSBcImRlZmF1bHRcIjtcbiAgICB0aGlzLmVycm9yTWVzc2FnZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmZpbGVzID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuZnJvbURldmljZSA9IGZhbHNlO1xuICB9XG4gIGFzeW5jIGNvbXBvbmVudFdpbGxMb2FkKCkge1xuICAgIGNvbnN0IHsgZWwsIHVzZXIsIHBvcnRhbCwgdXNlckxpY2Vuc2VkSXRlbXMgfSA9IHRoaXM7XG4gICAgY29uc3QgbG9jYWxlID0gYXdhaXQgZ2V0TG9jYWxlQ29tcG9uZW50U3RyaW5ncyhlbCk7XG4gICAgdGhpcy5pMThuID0gbG9jYWxlWzBdO1xuICAgIHRoaXMuY2FuUHVibGlzaEZyb21DbG91ZCA9IHRoaXMuY2xvdWQgJiYgY2FuUHVibGlzaEZyb21DbG91ZCh1c2VyLCBwb3J0YWwsIHVzZXJMaWNlbnNlZEl0ZW1zKTtcbiAgfVxuICBjb25uZWN0Q2xvdWREcml2ZShwcm92aWRlcikge1xuICAgIHRoaXMuY2xvdWREcml2ZUNvbm5lY3RlZC5lbWl0KHByb3ZpZGVyKTtcbiAgfVxuICBhc3luYyBmb2N1c01haW5JbnB1dCgpIHtcbiAgICB0aGlzLm1haW5JbnB1dFJlZi5mb2N1cygpO1xuICB9XG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IGkxOG4sIGNhblB1Ymxpc2hGcm9tQ2xvdWQsIGFsbG93ZWRFeHRlbnNpb25zLCBtYXhGaWxlU2l6ZSwgaW5zaWRlTW9kYWwsIGhlbHBUZXh0LCBoZWxwTGluaywgaGVscElkVHlwZSwgZnVsbEhlaWdodCwgdXNlciwgY29uZmlnLCBzaG93SGVscExpbmtPbkVycm9yLCB2YWxpZFR5cGVzIH0gPSB0aGlzO1xuICAgIHJldHVybiAoaChcImFyY2dpcy1kcmFnLWFuZC1kcm9wXCIsIHsgZmlsZXM6IHRoaXMuZmlsZXMsIHNob3dIZWxwTGlua09uRXJyb3I6IHNob3dIZWxwTGlua09uRXJyb3IsIGFsbG93ZWRFeHRlbnNpb25zOiBhbGxvd2VkRXh0ZW5zaW9ucywgaGVscElkVHlwZTogaGVscElkVHlwZSwgdmFsaWRUeXBlczogdmFsaWRUeXBlcywgbWF4RmlsZVNpemU6IG1heEZpbGVTaXplLCBpbnNpZGVNb2RhbDogaW5zaWRlTW9kYWwsIGZ1bGxIZWlnaHQ6IGZ1bGxIZWlnaHQsIGNsYXNzOiB7IFwiZnVsbC1oZWlnaHRcIjogZnVsbEhlaWdodCB9LCB1c2VyOiB1c2VyLCBjb25maWc6IGNvbmZpZywgb25BcmNnaXNEcm9wU3VjY2VzczogKGUpID0+IHtcbiAgICAgICAgdGhpcy5maWxlU2VsZWN0LmVtaXQoe1xuICAgICAgICAgIGZpbGU6IGUuZGV0YWlsLFxuICAgICAgICAgIC8vICEgRG9uJ3QgcmVtb3ZlIGB0aGlzYCBiZWNhdXNlIHRoZSBzdGF0ZSBtaWdodCBub3QgYmUgZnVsbHkgdXBkYXRlZCB3aGVuIHRoaXMgaXMgY2FsbGVkXG4gICAgICAgICAgLy8gISAgIHNvIGRlc3RydWN0aW5nIHdpbGwgZ2l2ZSB1cyBvbGQgdmFsdWVzXG4gICAgICAgICAgc291cmNlOiB0aGlzLmZyb21EZXZpY2UgPyBcImxvY2FsLWRldmljZVwiIDogXCJkcmFnLW4tZHJvcFwiXG4gICAgICAgIH0pO1xuICAgICAgfSB9LCBoKFwiZGl2XCIsIHsgY2xhc3M6IHtcbiAgICAgICAgXCJmaWxlLWJyb3dzZXJcIjogdHJ1ZSxcbiAgICAgICAgXCJmdWxsLWhlaWdodFwiOiBmdWxsSGVpZ2h0XG4gICAgICB9IH0sIGgoXCJzdmdcIiwgeyB3aWR0aDogXCI0MlwiLCBoZWlnaHQ6IFwiNTRcIiwgdmlld0JveDogXCIwIDAgNDIgNTRcIiwgZmlsbDogXCJub25lXCIsIHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwiYXJpYS1oaWRkZW5cIjogXCJ0cnVlXCIsIGZvY3VzYWJsZTogXCJmYWxzZVwiIH0sIGgoXCJwYXRoXCIsIHsgZDogXCJNMzEuNTY2IDBIMFY1My44SDQxLjhWMTAuMjM0TDMxLjU2NiAwWk0zMS44IDEuMzY2TDQwLjQzNCAxMEgzMS44VjEuMzY2Wk0wLjc5OTk5OSA1M1YwLjhIMzFWMTAuOEg0MVY1M0gwLjc5OTk5OVpcIiwgZmlsbDogXCIjNkE2QTZBXCIgfSksIFwiKVwiLCBoKFwicGF0aFwiLCB7IFwiZmlsbC1ydWxlXCI6IFwiZXZlbm9kZFwiLCBcImNsaXAtcnVsZVwiOiBcImV2ZW5vZGRcIiwgZDogXCJNMjAuOTAwNCAzOFYyNS43MDdMMTguMjU0NCAyOC4zNTRMMTcuNTQ3NCAyNy42NDdMMjEuNDAwNCAyMy43OTNMMjUuMjU0NCAyNy42NDdMMjQuNTQ3NCAyOC4zNTRMMjEuOTAwNCAyNS43MDdWMzhIMjAuOTAwNFpNMTQuOTAwNCAyMUgyNy45MDA0VjIwSDE0LjkwMDRWMjFaXCIsIGZpbGw6IFwiIzZBNkE2QVwiIH0pKSwgaChcImlucHV0XCIsIHsgb25DaGFuZ2U6IChlKSA9PiB7XG4gICAgICAgIHRoaXMuZnJvbURldmljZSA9IHRydWU7XG4gICAgICAgIHRoaXMuZmlsZXMgPSBPYmplY3QuYXNzaWduKHt9LCBlLnRhcmdldC5maWxlcyk7XG4gICAgICAgIC8vIFdlIHN0b3JlIHRoZSBhY3R1YWwgdmFsdWUgaW4gYGZpbGVzYCBhbHJlYWR5IHNvXG4gICAgICAgIC8vICBqdXN0IGNsZWFyIHRoaXMganVzdCBpbiBjYXNlIHRoZSB1c2VyIHJlLXVwbG9hZFxuICAgICAgICB0aGlzLmlucHV0RWxlbWVudC52YWx1ZSA9IG51bGw7XG4gICAgICB9LCByZWY6IChlbCkgPT4gKHRoaXMuaW5wdXRFbGVtZW50ID0gZWwpLCBhY2NlcHQ6IGFsbG93ZWRFeHRlbnNpb25zID09PSBudWxsIHx8IGFsbG93ZWRFeHRlbnNpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhbGxvd2VkRXh0ZW5zaW9ucy5tYXAoKGV4dGVuc2lvbikgPT4gYC4ke2V4dGVuc2lvbn1gKS5qb2luKFwiLFwiKSwgdGFiSW5kZXg6IC0xLCBjbGFzczogXCJpbnB1dFwiLCB0eXBlOiBcImZpbGVcIiB9KSwgaChcImRpdlwiLCB7IGNsYXNzOiBcInRleHQtY29udGFpbmVyXCIgfSwgaChcImgzXCIsIHsgY2xhc3M6IFwidGV4dFwiIH0sIGkxOG4uZHJhZyksIGhlbHBMaW5rID8gKGgoXCJjYWxjaXRlLWxpbmtcIiwgeyBocmVmOiBoZWxwTGluaywgdGFyZ2V0OiBcIl9ibGFua1wiIH0sIGhlbHBUZXh0KSkgOiAoaChcInBcIiwgeyBjbGFzczogXCJoZWxwLXRleHRcIiB9LCBoZWxwVGV4dCkpKSwgaChcImRpdlwiLCB7IGNsYXNzOiBcImN0YS1jb250YWluZXJcIiB9LCBoKFwiYnV0dG9uXCIsIHsgY2xhc3M6IFwiZmlsZS1icm93c2VyLWJ1dHRvblwiLCBvbkNsaWNrOiAoKSA9PiB7IHZhciBfYTsgcmV0dXJuIChfYSA9IHRoaXMuaW5wdXRFbGVtZW50KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2xpY2soKTsgfSwgcmVmOiAoZWxlKSA9PiAodGhpcy5tYWluSW5wdXRSZWYgPSBlbGUpIH0sIGgoXCJzcGFuXCIsIHsgY2xhc3M6IFwiZmlsZS1icm93c2VyLWJ1dHRvbl9faWNvblwiIH0sIGgoXCJjYWxjaXRlLWljb25cIiwgeyBpY29uOiBcImRlc2t0b3BcIiB9KSksIGgoXCJzcGFuXCIsIHsgY2xhc3M6IFwiZmlsZS1icm93c2VyLWJ1dHRvbl9fdGV4dFwiIH0sIGkxOG4uZGV2aWNlKSksIGNhblB1Ymxpc2hGcm9tQ2xvdWQgJiYgW1xuICAgICAgaChcImJ1dHRvblwiLCB7IGNsYXNzOiBcImZpbGUtYnJvd3Nlci1idXR0b25cIiwgb25DbGljazogKCkgPT4gdGhpcy5jb25uZWN0Q2xvdWREcml2ZShcImdvb2dsZSBkcml2ZVwiKSB9LCBoKFwic3BhblwiLCB7IGNsYXNzOiBcImZpbGUtYnJvd3Nlci1idXR0b25fX2ljb25cIiB9LCBoKFwic3ZnXCIsIHsgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgdmlld0JveDogXCIwIDAgNjQgNjRcIiB9LCBoKFwicGF0aFwiLCB7IGQ6IFwibTkuODQgNDguMzUgMi4zIDRhNS4yNSA1LjI1IDAgMCAwIDIgMmw4LjItMTQuMkg1LjlhNS40IDUuNCAwIDAgMCAuNzIgMi42OXpcIiwgZmlsbDogXCIjMDA2NmRhXCIgfSksIGgoXCJwYXRoXCIsIHsgZDogXCJtMzIgMjMuMzctOC4yNi0xNC4yYTUuMjkgNS4yOSAwIDAgMC0yIDJMNi42MiAzNy4zOWE1LjQyIDUuNDIgMCAwIDAtLjcyIDIuNjloMTYuNDF6XCIsIGZpbGw6IFwiIzAwYWM0N1wiIH0pLCBoKFwicGF0aFwiLCB7IGQ6IFwiTTQ5Ljc5IDU0LjI4YTUuMjUgNS4yNSAwIDAgMCAyLTJsMS0xLjY0IDQuNTYtNy45YTUuNCA1LjQgMCAwIDAgLjY1LTIuNjZINDEuNTlsMy40OSA2Ljg2elwiLCBmaWxsOiBcIiNlYTQzMzVcIiB9KSwgaChcInBhdGhcIiwgeyBkOiBcIm0zMiAyMy4zNyA4LjIxLTE0LjJhNS4yNCA1LjI0IDAgMCAwLTIuNjktLjcyaC0xMWE1LjU4IDUuNTggMCAwIDAtMi42OS43MnpcIiwgZmlsbDogXCIjMDA4MzJkXCIgfSksIGgoXCJwYXRoXCIsIHsgZDogXCJNNDEuNTkgNDAuMDhIMjIuMzFsLTguMiAxNC4yYTUuMiA1LjIgMCAwIDAgMi42OC43MmgzMC4zMmE1LjUxIDUuNTEgMCAwIDAgMi42OC0uNzJ6XCIsIGZpbGw6IFwiIzI2ODRmY1wiIH0pLCBoKFwicGF0aFwiLCB7IGQ6IFwibTQ5LjcgMjQuMjctNy41Ny0xMy4xM2E1LjM5IDUuMzkgMCAwIDAtMi0yTDMyIDIzLjM3bDkuNjQgMTYuNzFINThhNS40MyA1LjQzIDAgMCAwLS43Mi0yLjY5elwiLCBmaWxsOiBcIiNmZmJhMDBcIiB9KSkpLCBoKFwic3BhblwiLCB7IGNsYXNzOiBcImZpbGUtYnJvd3Nlci1idXR0b25fX3RleHRcIiB9LCBpMThuLmdvb2dsZURyaXZlKSksXG4gICAgICBoKFwiYnV0dG9uXCIsIHsgY2xhc3M6IFwiZmlsZS1icm93c2VyLWJ1dHRvblwiLCBvbkNsaWNrOiAoKSA9PiB0aGlzLmNvbm5lY3RDbG91ZERyaXZlKFwiZHJvcGJveFwiKSB9LCBoKFwic3BhblwiLCB7IGNsYXNzOiBcImZpbGUtYnJvd3Nlci1idXR0b25fX2ljb25cIiB9LCBoKFwic3ZnXCIsIHsgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgdmlld0JveDogXCIwIDAgNjQgNjRcIiB9LCBoKFwicGF0aFwiLCB7IGQ6IFwiTTIwIDExLjYxIDggMTkuMjZsMTIgNy42NCAxMi03LjY0LTEyLTcuNjV6TTQ0IDExLjYxbC0xMiA3LjY1IDEyIDcuNjQgMTItNy42NC0xMi03LjY1elwiLCBmaWxsOiBcIiMwMDYxZmZcIiB9KSwgaChcInBhdGhcIiwgeyBkOiBcIm04IDM0LjU1IDEyIDcuNjQgMTItNy42NC0xMi03LjY1LTEyIDcuNjV6TTQ0IDI2LjlsLTEyIDcuNjUgMTIgNy42NCAxMi03LjY0LTEyLTcuNjV6TTIwIDQ0Ljc0bDEyIDcuNjUgMTItNy42NS0xMi03LjY0LTEyIDcuNjR6XCIsIGZpbGw6IFwiIzAwNjFmZlwiIH0pKSksIGgoXCJzcGFuXCIsIHsgY2xhc3M6IFwiZmlsZS1icm93c2VyLWJ1dHRvbl9fdGV4dFwiIH0sIGkxOG4uZHJvcGJveCkpLFxuICAgICAgaChcImJ1dHRvblwiLCB7IGNsYXNzOiBcImZpbGUtYnJvd3Nlci1idXR0b25cIiwgb25DbGljazogKCkgPT4gdGhpcy5jb25uZWN0Q2xvdWREcml2ZShcIm9uZWRyaXZlXCIpIH0sIGgoXCJzcGFuXCIsIHsgY2xhc3M6IFwiZmlsZS1icm93c2VyLWJ1dHRvbl9faWNvblwiIH0sIGgoXCJzdmdcIiwgeyB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCB2aWV3Qm94OiBcIjAgMCA2NCA2NFwiIH0sIGgoXCJnXCIsIG51bGwsIGgoXCJwYXRoXCIsIHsgZDogXCJNMzcuMTQgMzcuOTMgNDcuNSAyOGExNS42OCAxNS42OCAwIDAgMC0yOC4yOS00LjdjLjE2IDAgMTcuOTMgMTQuNjMgMTcuOTMgMTQuNjN6XCIsIGZpbGw6IFwiIzAzNjRiOFwiIH0pLCBoKFwicGF0aFwiLCB7IGQ6IFwiTTI2IDI1LjE2YTEyLjM4IDEyLjM4IDAgMCAwLTYuNTktMS44N2gtLjE2QTEyLjUzIDEyLjUzIDAgMCAwIDkuMDkgNDNsMTUuNTEtMS45NCAxMS44OS05LjU5elwiLCBmaWxsOiBcIiMwMDc4ZDRcIiB9KSwgaChcInBhdGhcIiwgeyBkOiBcIk00Ny41IDI4aC0uNjlhMTAuMTggMTAuMTggMCAwIDAtNCAuODNsLTYuMjggMi42NEw0My40MSA0MGwxMi4zNyAzYTEwLjIgMTAuMiAwIDAgMC04LjI4LTE1elwiLCBmaWxsOiBcIiMxNDkwZGZcIiB9KSwgaChcInBhdGhcIiwgeyBkOiBcIk05LjA5IDQzYTEyLjUzIDEyLjUzIDAgMCAwIDEwLjI4IDUuMzdoMjcuNDRhMTAuMTkgMTAuMTkgMCAwIDAgOS01LjM2TDM2LjQ5IDMxLjQ3elwiLCBmaWxsOiBcIiMyOGE4ZWFcIiB9KSkpKSwgaChcInNwYW5cIiwgeyBjbGFzczogXCJmaWxlLWJyb3dzZXItYnV0dG9uX190ZXh0XCIgfSwgaTE4bi5vbmVEcml2ZSkpXG4gICAgXSkpKSk7XG4gIH1cbiAgZ2V0IGVsKCkgeyByZXR1cm4gZ2V0RWxlbWVudCh0aGlzKTsgfVxufTtcbkFyY2dpc0ZpbGVCcm93c2VyLnN0eWxlID0gYXJjZ2lzRmlsZUJyb3dzZXJDc3M7XG5cbmV4cG9ydCB7IEFyY2dpc0ZpbGVCcm93c2VyIGFzIGFyY2dpc19maWxlX2Jyb3dzZXIgfTtcbiIsIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIHYzLjAuOTlcbiAqL1xuaW1wb3J0IHsgbCBhcyBsb2FkTW9kdWxlcyB9IGZyb20gJy4vbG9hZE1vZHVsZXMtYWFmMzBiZDYuanMnO1xuaW1wb3J0IHsgYyBhcyBjbG9zZXN0RWxlbWVudENyb3NzU2hhZG93Qm91bmRhcnkgfSBmcm9tICcuL2RvbS0xM2Y1YjAwYy5qcyc7XG5cbmNvbnN0IGxhbmd1YWdlTWFwID0gbmV3IE1hcChbXG4gIFtcImFyXCIsIFwiYXJcIl0sXG4gIFtcImJnXCIsIFwiYmdcIl0sXG4gIFtcImJzXCIsIFwiYnNcIl0sXG4gIFtcImNhXCIsIFwiY2FcIl0sXG4gIFtcImNzXCIsIFwiY3NcIl0sXG4gIFtcImRhXCIsIFwiZGFcIl0sXG4gIFtcImRlXCIsIFwiZGVcIl0sXG4gIFtcImVsXCIsIFwiZWxcIl0sXG4gIFtcImVuXCIsIFwiZW5cIl0sXG4gIFtcImVzXCIsIFwiZXNcIl0sXG4gIFtcImV0XCIsIFwiZXRcIl0sXG4gIFtcImZpXCIsIFwiZmlcIl0sXG4gIFtcImZyXCIsIFwiZnJcIl0sXG4gIFtcImhlXCIsIFwiaGVcIl0sXG4gIFtcImhyXCIsIFwiaHJcIl0sXG4gIFtcImh1XCIsIFwiaHVcIl0sXG4gIFtcImlkXCIsIFwiaWRcIl0sXG4gIFtcIml0XCIsIFwiaXRcIl0sXG4gIFtcImphXCIsIFwiamFcIl0sXG4gIFtcImtvXCIsIFwia29cIl0sXG4gIFtcImx0XCIsIFwibHRcIl0sXG4gIFtcImx2XCIsIFwibHZcIl0sXG4gIFtcIm5iXCIsIFwibmJcIl0sXG4gIFtcIm5sXCIsIFwibmxcIl0sXG4gIFtcInBsXCIsIFwicGxcIl0sXG4gIFtcInB0LWJyXCIsIFwicHQtQlJcIl0sXG4gIFtcInB0LXB0XCIsIFwicHQtUFRcIl0sXG4gIFtcInJvXCIsIFwicm9cIl0sXG4gIFtcInJ1XCIsIFwicnVcIl0sXG4gIFtcInNrXCIsIFwic2tcIl0sXG4gIFtcInNsXCIsIFwic2xcIl0sXG4gIFtcInNyXCIsIFwic3JcIl0sXG4gIFtcInN2XCIsIFwic3ZcIl0sXG4gIFtcInRoXCIsIFwidGhcIl0sXG4gIFtcInRyXCIsIFwidHJcIl0sXG4gIFtcInVrXCIsIFwidWtcIl0sXG4gIFtcInZpXCIsIFwidmlcIl0sXG4gIFtcInpoLWNuXCIsIFwiemgtQ05cIl0sXG4gIFtcInpoLWhrXCIsIFwiemgtSEtcIl0sXG4gIFtcInpoLXR3XCIsIFwiemgtVFdcIl1cbl0pO1xuLy8gcnRsXG5mdW5jdGlvbiBnZXRFbGVtZW50RGlyKGVsKSB7XG4gIHJldHVybiBnZXRFbGVtZW50UHJvcChlbCwgXCJkaXJcIiwgXCJsdHJcIik7XG59XG5mdW5jdGlvbiBnZXRFbGVtZW50UHJvcChlbCwgcHJvcCwgdmFsdWUpIHtcbiAgY29uc3QgY2xvc2VzdFdpdGhQcm9wID0gY2xvc2VzdEVsZW1lbnRDcm9zc1NoYWRvd0JvdW5kYXJ5KGVsLCBgWyR7cHJvcH1dYCk7XG4gIHJldHVybiBjbG9zZXN0V2l0aFByb3AgPyBjbG9zZXN0V2l0aFByb3AuZ2V0QXR0cmlidXRlKHByb3ApIDogdmFsdWU7XG59XG4vLyBjc3NcbmNvbnN0IENTU19VVElMSVRZID0ge1xuICBydGw6IFwiYXJjZ2lzLS1ydGxcIlxufTtcbmFzeW5jIGZ1bmN0aW9uIGZvcm1hdE51bWJlcihudW1iZXIsIG9wdGlvbnMpIHtcbiAgY29uc3QgeyBhcGksIHR5cGUsIHBsYWNlcyB9ID0gb3B0aW9ucyB8fCB7fTtcbiAgaWYgKGFwaSA9PT0gNCkge1xuICAgIGNvbnN0IFtpbnRsXSA9IGF3YWl0IGxvYWRNb2R1bGVzKFtcImVzcmkvaW50bFwiXSk7XG4gICAgY29uc3QgbnVtYmVyRm9ybWF0SW50bE9wdGlvbnMgPSBpbnRsLmNvbnZlcnROdW1iZXJGb3JtYXRUb0ludGxPcHRpb25zKHtcbiAgICAgIHBsYWNlcyxcbiAgICAgIHN0eWxlOiB0eXBlLFxuICAgICAgZGlnaXRTZXBhcmF0b3I6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gaW50bC5mb3JtYXROdW1iZXIobnVtYmVyLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG51bWJlckZvcm1hdEludGxPcHRpb25zKSwgeyBzdHlsZTogdHlwZSB9KSk7XG4gIH1cbiAgY29uc3QgW2Rvam9OdW1iZXJdID0gYXdhaXQgbG9hZE1vZHVsZXMoW1wiZG9qby9udW1iZXJcIl0pO1xuICByZXR1cm4gZG9qb051bWJlci5mb3JtYXQobnVtYmVyLCB7XG4gICAgdHlwZSxcbiAgICBwbGFjZXMsXG4gICAgcGF0dGVybjogb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLnBhdHRlcm5cbiAgfSk7XG59XG5jb25zdCBjYWNoZSA9IHt9O1xuZnVuY3Rpb24gZm9ybWF0RGF0ZShkYXRlKSB7XG4gIGNvbnN0IGxhbmcgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQubGFuZztcbiAgY29uc3QgZGF5U2hvcnRNb250aFllYXIgPSB7XG4gICAgeWVhcjogXCJudW1lcmljXCIsXG4gICAgbW9udGg6IFwic2hvcnRcIixcbiAgICBkYXk6IFwibnVtZXJpY1wiXG4gIH07XG4gIGlmICghY2FjaGVbbGFuZ10pIHtcbiAgICBjYWNoZVtsYW5nXSA9IG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5sYW5nLCBkYXlTaG9ydE1vbnRoWWVhcik7XG4gIH1cbiAgcmV0dXJuIGNhY2hlW2xhbmddLmZvcm1hdChkYXRlKTtcbn1cblxuZXhwb3J0IHsgQ1NTX1VUSUxJVFkgYXMgQywgZm9ybWF0RGF0ZSBhcyBhLCBmb3JtYXROdW1iZXIgYXMgZiwgZ2V0RWxlbWVudERpciBhcyBnLCBsYW5ndWFnZU1hcCBhcyBsIH07XG4iLCIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiB2My4wLjk5XG4gKi9cbmltcG9ydCB7IGMgYXMgY2xvc2VzdEVsZW1lbnRDcm9zc1NoYWRvd0JvdW5kYXJ5IH0gZnJvbSAnLi9kb20tMTNmNWIwMGMuanMnO1xuaW1wb3J0IHsgbCBhcyBsYW5ndWFnZU1hcCB9IGZyb20gJy4vbGFuZ3VhZ2VVdGlsLTIyMjU4YzkwLmpzJztcbmltcG9ydCB7IGEgYXMgZ2V0QXNzZXRQYXRoIH0gZnJvbSAnLi9pbmRleC05MmViYjM5Ni5qcyc7XG5cbi8vIGh0dHBzOi8vbWVkaXVtLmNvbS9zdGVuY2lsLXRyaWNrcy9pbXBsZW1lbnRpbmctaW50ZXJuYXRpb25hbGlzYXRpb24taTE4bi13aXRoLXN0ZW5jaWwtNWU2NTU5NTU0MTE3XG5mdW5jdGlvbiBnZXRDb21wb25lbnRDbG9zZXN0TGFuZ3VhZ2UoZWxlbWVudCkge1xuICB2YXIgX2EsIF9iLCBfYztcbiAgY29uc3QgY2xvc2VzdEVsZW1lbnQgPSAoX2EgPSBjbG9zZXN0RWxlbWVudENyb3NzU2hhZG93Qm91bmRhcnkoZWxlbWVudCwgXCJbbGFuZ11cIikpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IChfYyA9IChfYiA9IGVsZW1lbnQuc2hhZG93Um9vdCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLm93bmVyRG9jdW1lbnQpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5kb2N1bWVudEVsZW1lbnQ7XG4gIC8vIGxhbmd1YWdlIHNldCBieSB0aGUgY2FsbGluZyBhcHBsaWNhdGlvbiBvciBicm93c2VyLiBkZWZhdWx0cyB0byBlbmdsaXNoLlxuICBjb25zdCBsYW5nID0gKChjbG9zZXN0RWxlbWVudCA9PT0gbnVsbCB8fCBjbG9zZXN0RWxlbWVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY2xvc2VzdEVsZW1lbnQubGFuZykgfHwgKG5hdmlnYXRvciA9PT0gbnVsbCB8fCBuYXZpZ2F0b3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG5hdmlnYXRvci5sYW5ndWFnZSkgfHwgXCJlblwiKS50b0xvd2VyQ2FzZSgpO1xuICBpZiAobGFuZ3VhZ2VNYXAuaGFzKGxhbmcpKSB7XG4gICAgcmV0dXJuIGxhbmd1YWdlTWFwLmdldChsYW5nKTtcbiAgfVxuICBlbHNlIHtcbiAgICAvLyBcInJ1LVJVXCIgbWFwcyB0byBcInJ1XCIgdXNlIGNhc2VcbiAgICBpZiAobGFuZ3VhZ2VNYXAuaGFzKGxhbmcuc2xpY2UoMCwgMikpKSB7XG4gICAgICByZXR1cm4gbGFuZ3VhZ2VNYXAuZ2V0KGxhbmcuc2xpY2UoMCwgMikpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHJldHVybiBcImVuXCI7XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiBnZXRDb21wb25lbnRDbG9zZXN0TGFuZ3VhZ2VJbnRsKGVsZW1lbnQpIHtcbiAgdmFyIF9hLCBfYiwgX2M7XG4gIC8vIGl0J3MgT0sgaWYgd2UgZG9uJ3QgaGF2ZSB0aGUgNCBsZXR0ZXIgbGFuZ3VhZ2UgZmlsZSBmb3IgaXRcbiAgLy8gNCBsZXR0ZXIgbGFuZ3VhZ2UgY29kZSBuZWVkZWQgZm9yIGZvcm1hdHRpbmcgbnVtYmVyc1xuICBjb25zdCBjbG9zZXN0RWxlbWVudCA9IChfYSA9IGNsb3Nlc3RFbGVtZW50Q3Jvc3NTaGFkb3dCb3VuZGFyeShlbGVtZW50LCBcIltsYW5nXVwiKSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogKF9jID0gKF9iID0gZWxlbWVudC5zaGFkb3dSb290KSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Iub3duZXJEb2N1bWVudCkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLmRvY3VtZW50RWxlbWVudDtcbiAgLy8gbGFuZ3VhZ2Ugc2V0IGJ5IHRoZSBjYWxsaW5nIGFwcGxpY2F0aW9uIG9yIGJyb3dzZXIuIGRlZmF1bHRzIHRvIGVuZ2xpc2guXG4gIGNvbnN0IGxhbmcgPSAoKGNsb3Nlc3RFbGVtZW50ID09PSBudWxsIHx8IGNsb3Nlc3RFbGVtZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjbG9zZXN0RWxlbWVudC5sYW5nKSB8fCAobmF2aWdhdG9yID09PSBudWxsIHx8IG5hdmlnYXRvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogbmF2aWdhdG9yLmxhbmd1YWdlKSB8fCBcImVuXCIpLnRvTG93ZXJDYXNlKCk7XG4gIGlmIChsYW5ndWFnZU1hcC5oYXMobGFuZykpIHtcbiAgICByZXR1cm4gbGFuZ3VhZ2VNYXAuZ2V0KGxhbmcpO1xuICB9XG4gIGVsc2Uge1xuICAgIGlmIChsYW5ndWFnZU1hcC5oYXMobGFuZy5zbGljZSgwLCAyKSkpIHtcbiAgICAgIC8vIHdlIHN1cHBvcnQgdGhlIDIgbGV0dGVyIGNvZGVkIGxhbmd1YWdlXG4gICAgICAvLyBlLmcuIGl0LUNIIHZzIGl0XG4gICAgICByZXR1cm4gbGFuZztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICByZXR1cm4gXCJlblwiO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gZmV0Y2hMb2NhbGVTdHJpbmdzRm9yQ29tcG9uZW50KGNvbXBvbmVudE5hbWUsIGxvY2FsZSkge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGZldGNoKGdldEFzc2V0UGF0aChgLi4vYXJjZ2lzLWFwcC1hc3NldHMvaTE4bi8ke2NvbXBvbmVudE5hbWV9LmkxOG4uJHtsb2NhbGV9Lmpzb25gKSkudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICBpZiAocmVzdWx0Lm9rKVxuICAgICAgICByZXNvbHZlKHJlc3VsdC5qc29uKCkpO1xuICAgICAgZWxzZVxuICAgICAgICByZWplY3QoKTtcbiAgICB9LCAoKSA9PiByZWplY3QoKSk7XG4gIH0pO1xufVxuY29uc3Qgc3RyaW5nQ2FjaGUgPSB7fTtcbmZ1bmN0aW9uIGZldGNoTG9jYWxlU3RyaW5nc0Zyb21DYWNoZShjb21wb25lbnROYW1lLCBsb2NhbGUpIHtcbiAgY29uc3QgaWQgPSBgJHtjb21wb25lbnROYW1lfSR7bG9jYWxlfWA7XG4gIGlmICghc3RyaW5nQ2FjaGVbaWRdKSB7XG4gICAgc3RyaW5nQ2FjaGVbaWRdID0gZmV0Y2hMb2NhbGVTdHJpbmdzRm9yQ29tcG9uZW50KGNvbXBvbmVudE5hbWUsIGxvY2FsZSk7XG4gIH1cbiAgcmV0dXJuIHN0cmluZ0NhY2hlW2lkXTtcbn1cbi8qKlxuICogR2V0IHN0cmluZ3MgYW5kIGxhbmd1YWdlIGNvZGVzLlxuICogVGhpcyBtZXRob2QgcmV0dXJucyAyIGxhbmd1YWdlIGNvZGVzLlxuICogVGhlIGZpcnN0IG9uZSByZXR1cm5zIGEgY29kZSB0aGF0J3MgYWxzbyBzdXBwb3J0ZWQgYXMgYSBsYW5ndWFnZSBmaWxlLlxuICogVGhlIHNlY29uZCBvbmUgcmV0dXJucyBhIGNvZGUgd2hlcmUgdGhlcmUgaXMgc3VwcG9ydCBmb3IgdGhlIGZpcnN0IDIgbGV0dGVycyBvZiB0aGUgY29kZSBhcyBwYXJ0IG9mIGEgbGFuZ3VhZ2UgZmlsZSxcbiAqIGJ1dCB3aWxsIHJldHVybiB0aGUgb3JpZ2luYWwgNCBsZXR0ZXIgY29kZSBmcm9tIHRoZSBwYWdlLlxuICogRS5nLiBGb3IgXCJpdC1jaFwiIGl0IHdpbGwgcmV0dXJuIFwiaXRcIiBhcyB0aGUgZmlyc3QgbGFuZ3VhZ2UgY29kZSBhbmQgXCJpdC1jaFwiIGFzIHRoZSBzZWNvbmQuXG4gKiBUaGUgc2Vjb25kIG9uZSBpcyByZXF1aXJlZCBmb3IgZXNyaS5pbnRsLnNldExvY2FsZSgpIHRvIGdldCB0aGUgY29ycmVjdCBmb3JtYXR0aW5nLlxuICpcbiAqIElmIGEgdGFnTmFtZSBpcyBwcm92aWRlZCBpdCB3aWxsIG92ZXJ3aXRlIHRoZSBlbGVtZW50J3MgdGFnTmFtZVxuICpcbiAqICBAcmV0dXJuIFsgc3RyaW5ncywgZmlyc3QgbGFuZ3VhZ2UgY29kZSwgc2Vjb25kIGxhbmd1YWdlIGNvZGVdXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdldExvY2FsZUNvbXBvbmVudFN0cmluZ3MoZWxlbWVudCwgdGFnTmFtZSkge1xuICBjb25zdCBjb21wb25lbnROYW1lID0gdGFnTmFtZSB8fCBlbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcbiAgY29uc3QgY29tcG9uZW50TGFuZ3VhZ2UgPSBnZXRDb21wb25lbnRDbG9zZXN0TGFuZ3VhZ2UoZWxlbWVudCk7XG4gIGNvbnN0IGNvbXBvbmVudExhbmd1YWdlSW50bCA9IGdldENvbXBvbmVudENsb3Nlc3RMYW5ndWFnZUludGwoZWxlbWVudCk7XG4gIGxldCBzdHJpbmdzO1xuICB0cnkge1xuICAgIHN0cmluZ3MgPSBhd2FpdCBmZXRjaExvY2FsZVN0cmluZ3NGcm9tQ2FjaGUoY29tcG9uZW50TmFtZSwgY29tcG9uZW50TGFuZ3VhZ2UpO1xuICB9XG4gIGNhdGNoIChlKSB7XG4gICAgY29uc29sZS53YXJuKGBubyBsb2NhbGUgZm9yICR7Y29tcG9uZW50TmFtZX0gKCR7Y29tcG9uZW50TGFuZ3VhZ2V9KSBsb2FkaW5nIGRlZmF1bHQgbG9jYWxlIGVuLmApO1xuICAgIHN0cmluZ3MgPSBhd2FpdCBmZXRjaExvY2FsZVN0cmluZ3NGcm9tQ2FjaGUoY29tcG9uZW50TmFtZSwgXCJlblwiKTtcbiAgfVxuICByZXR1cm4gW3N0cmluZ3MsIGNvbXBvbmVudExhbmd1YWdlLCBjb21wb25lbnRMYW5ndWFnZUludGxdO1xufVxuXG5leHBvcnQgeyBnZXRDb21wb25lbnRDbG9zZXN0TGFuZ3VhZ2UgYXMgYSwgZ2V0TG9jYWxlQ29tcG9uZW50U3RyaW5ncyBhcyBnIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=