"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_ba-infographic_node_modules_arcgis_business-analyst-components_dis-729639"],{

/***/ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/calcite-combobox.entry.js":
/*!*******************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/calcite-combobox.entry.js ***!
  \*******************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   calcite_combobox: () => (/* binding */ Combobox)
/* harmony export */ });
/* harmony import */ var _index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index-4e647411.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/index-4e647411.js");
/* harmony import */ var _filter_b6c777cc_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./filter-b6c777cc.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/filter-b6c777cc.js");
/* harmony import */ var _dom_f1ee4d04_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./dom-f1ee4d04.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/dom-f1ee4d04.js");
/* harmony import */ var _floating_ui_f29517e7_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./floating-ui-f29517e7.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/floating-ui-f29517e7.js");
/* harmony import */ var _form_98fe0e7c_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./form-98fe0e7c.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/form-98fe0e7c.js");
/* harmony import */ var _guid_88a3729f_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./guid-88a3729f.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/guid-88a3729f.js");
/* harmony import */ var _interactive_29995522_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./interactive-29995522.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/interactive-29995522.js");
/* harmony import */ var _label_6d1e3168_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./label-6d1e3168.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/label-6d1e3168.js");
/* harmony import */ var _loadable_cc14d728_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./loadable-cc14d728.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/loadable-cc14d728.js");
/* harmony import */ var _locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./locale-f7b2fbb0.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/locale-f7b2fbb0.js");
/* harmony import */ var _observers_56740e99_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./observers-56740e99.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/observers-56740e99.js");
/* harmony import */ var _openCloseComponent_7d58834c_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./openCloseComponent-7d58834c.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/openCloseComponent-7d58834c.js");
/* harmony import */ var _t9n_dc67ab96_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./t9n-dc67ab96.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/t9n-dc67ab96.js");
/* harmony import */ var _utils_97156535_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils-97156535.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/utils-97156535.js");
/* harmony import */ var _debounce_047e09f4_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./debounce-047e09f4.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/debounce-047e09f4.js");



















const comboboxCss = "@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host([disabled]){pointer-events:none;cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host{position:relative;display:block}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}:host([scale=s]){font-size:var(--calcite-font-size--2);--calcite-combobox-item-spacing-unit-l:0.5rem;--calcite-combobox-item-spacing-unit-s:0.25rem;--calcite-combobox-input-height:1.5rem}:host([scale=m]){font-size:var(--calcite-font-size--1);--calcite-combobox-item-spacing-unit-l:0.75rem;--calcite-combobox-item-spacing-unit-s:0.5rem;--calcite-combobox-input-height:2rem}:host([scale=l]){font-size:var(--calcite-font-size-0);--calcite-combobox-item-spacing-unit-l:1rem;--calcite-combobox-item-spacing-unit-s:0.75rem;--calcite-combobox-input-height:2.75rem}.wrapper{display:flex;border-width:1px;border-style:solid;border-color:var(--calcite-ui-border-input);background-color:var(--calcite-ui-foreground-1);color:var(--calcite-ui-text-1);outline-color:transparent;padding-block:calc(var(--calcite-combobox-item-spacing-unit-s) / 4);padding-inline:var(--calcite-combobox-item-spacing-unit-l)}:host(:focus-within) .wrapper,.wrapper--active{outline:2px solid var(--calcite-ui-brand);outline-offset:-2px}.wrapper--single{padding-block:0;padding-inline:var(--calcite-combobox-item-spacing-unit-l);cursor:pointer;flex-wrap:nowrap}.grid-input{display:flex;flex-grow:1;flex-wrap:wrap;align-items:center;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:0px}.input{flex-grow:1;-webkit-appearance:none;appearance:none;border-style:none;background-color:transparent;padding:0px;font-family:inherit;color:var(--calcite-ui-text-1);font-size:inherit;block-size:var(--calcite-combobox-input-height);line-height:var(--calcite-combobox-input-height);min-inline-size:120px;margin-block-end:var(--calcite-combobox-item-spacing-unit-s)}.input:focus{outline:2px solid transparent;outline-offset:2px}.input--transparent{opacity:0}.input--single{margin-block:0px;padding:0px}.wrapper--active .input-single{cursor:text}.input--hidden{pointer-events:none;inline-size:0px;min-inline-size:0px;opacity:0}.input--icon{padding-block:0;padding-inline:var(--calcite-combobox-item-spacing-unit-l)}.input-wrap{display:flex;flex-grow:1}.input-wrap--single{flex:1 1 0%;overflow:hidden}.label{pointer-events:none;display:flex;max-inline-size:100%;flex:1 1 auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:0px;font-weight:var(--calcite-font-weight-normal);block-size:var(--calcite-combobox-input-height);line-height:var(--calcite-combobox-input-height)}.label--icon{padding-inline:var(--calcite-combobox-item-spacing-unit-l)}.icon-end,.icon-start{display:flex;inline-size:1rem;cursor:pointer;align-items:center}.icon-end{flex:none}.floating-ui-container{--calcite-floating-ui-z-index:600;display:block;position:absolute;z-index:var(--calcite-floating-ui-z-index);visibility:hidden}.floating-ui-container .calcite-floating-ui-anim{position:relative;transition:var(--calcite-floating-ui-transition);transition-property:transform, visibility, opacity;opacity:0;box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);z-index:1;border-radius:0.25rem}.floating-ui-container[data-placement^=bottom] .calcite-floating-ui-anim{transform:translateY(-5px)}.floating-ui-container[data-placement^=top] .calcite-floating-ui-anim{transform:translateY(5px)}.floating-ui-container[data-placement^=left] .calcite-floating-ui-anim{transform:translateX(5px)}.floating-ui-container[data-placement^=right] .calcite-floating-ui-anim{transform:translateX(-5px)}.floating-ui-container[data-placement] .calcite-floating-ui-anim--active{opacity:1;transform:translate(0)}.floating-ui-container--active{visibility:visible}@media (forced-colors: active){.wrapper,.floating-ui-container--active{border:1px solid canvasText}}.screen-readers-only{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.list-container{max-block-size:45vh;overflow-y:auto;background-color:var(--calcite-ui-foreground-1);inline-size:var(--calcite-dropdown-width)}.list{margin:0px;display:block;padding:0px}.list--hide{block-size:0px;overflow:hidden}.chip{margin-block:calc(var(--calcite-combobox-item-spacing-unit-s) / 4);margin-inline:0 var(--calcite-combobox-item-spacing-unit-s);max-inline-size:100%}.chip--active{background-color:var(--calcite-ui-foreground-3)}.item{display:block}::slotted(input[slot=hidden-form-input]){margin:0 !important;opacity:0 !important;outline:none !important;padding:0 !important;position:absolute !important;inset:0 !important;transform:none !important;-webkit-appearance:none !important;z-index:-1 !important}";

const isGroup = (el) => el.tagName === _utils_97156535_js__WEBPACK_IMPORTED_MODULE_0__.c;
const itemUidPrefix = "combobox-item-";
const chipUidPrefix = "combobox-chip-";
const labelUidPrefix = "combobox-label-";
const listboxUidPrefix = "combobox-listbox-";
const inputUidPrefix = "combobox-input-";
const Combobox = class {
  constructor(hostRef) {
    (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__.r)(this, hostRef);
    this.calciteComboboxChange = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__.c)(this, "calciteComboboxChange", 6);
    this.calciteComboboxFilterChange = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__.c)(this, "calciteComboboxFilterChange", 6);
    this.calciteComboboxChipClose = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__.c)(this, "calciteComboboxChipClose", 6);
    this.calciteComboboxBeforeClose = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__.c)(this, "calciteComboboxBeforeClose", 6);
    this.calciteComboboxClose = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__.c)(this, "calciteComboboxClose", 6);
    this.calciteComboboxBeforeOpen = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__.c)(this, "calciteComboboxBeforeOpen", 6);
    this.calciteComboboxOpen = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__.c)(this, "calciteComboboxOpen", 6);
    //--------------------------------------------------------------------------
    //
    //  Private State/Props
    //
    //--------------------------------------------------------------------------
    this.placement = _floating_ui_f29517e7_js__WEBPACK_IMPORTED_MODULE_2__.d;
    this.internalValueChangeFlag = false;
    this.textInput = null;
    this.mutationObserver = (0,_observers_56740e99_js__WEBPACK_IMPORTED_MODULE_3__.c)("mutation", () => this.updateItems());
    this.resizeObserver = (0,_observers_56740e99_js__WEBPACK_IMPORTED_MODULE_3__.c)("resize", () => this.setMaxScrollerHeight());
    this.guid = (0,_guid_88a3729f_js__WEBPACK_IMPORTED_MODULE_4__.g)();
    this.inputHeight = 0;
    this.ignoreSelectedEventsFlag = false;
    this.openTransitionProp = "opacity";
    // --------------------------------------------------------------------------
    //
    //  Private Methods
    //
    // --------------------------------------------------------------------------
    this.setFilteredPlacements = () => {
      const { el, flipPlacements } = this;
      this.filteredFlipPlacements = flipPlacements
        ? (0,_floating_ui_f29517e7_js__WEBPACK_IMPORTED_MODULE_2__.f)(flipPlacements, el)
        : null;
    };
    this.getValue = () => {
      const items = this.selectedItems.map((item) => item?.value?.toString());
      return items?.length ? (items.length > 1 ? items : items[0]) : "";
    };
    this.onLabelClick = () => {
      this.setFocus();
    };
    this.keydownHandler = (event) => {
      const { key } = event;
      switch (key) {
        case "Tab":
          this.activeChipIndex = -1;
          this.activeItemIndex = -1;
          if (this.allowCustomValues && this.text) {
            this.addCustomChip(this.text, true);
            event.preventDefault();
          }
          else if (this.open) {
            this.open = false;
            event.preventDefault();
          }
          break;
        case "ArrowLeft":
          this.previousChip();
          event.preventDefault();
          break;
        case "ArrowRight":
          this.nextChip();
          event.preventDefault();
          break;
        case "ArrowUp":
          event.preventDefault();
          this.shiftActiveItemIndex(-1);
          if (!this.comboboxInViewport()) {
            this.el.scrollIntoView();
          }
          break;
        case "ArrowDown":
          event.preventDefault();
          if (!this.open) {
            this.open = true;
          }
          this.shiftActiveItemIndex(1);
          if (!this.comboboxInViewport()) {
            this.el.scrollIntoView();
          }
          break;
        case " ":
          if (!this.textInput.value) {
            event.preventDefault();
            this.open = true;
            this.shiftActiveItemIndex(1);
          }
          break;
        case "Home":
          if (!this.open) {
            return;
          }
          event.preventDefault();
          this.updateActiveItemIndex(0);
          this.scrollToActiveItem();
          if (!this.comboboxInViewport()) {
            this.el.scrollIntoView();
          }
          break;
        case "End":
          if (!this.open) {
            return;
          }
          event.preventDefault();
          this.updateActiveItemIndex(this.filteredItems.length - 1);
          this.scrollToActiveItem();
          if (!this.comboboxInViewport()) {
            this.el.scrollIntoView();
          }
          break;
        case "Escape":
          this.open = false;
          event.preventDefault();
          break;
        case "Enter":
          if (this.activeItemIndex > -1) {
            this.toggleSelection(this.filteredItems[this.activeItemIndex]);
            event.preventDefault();
          }
          else if (this.activeChipIndex > -1) {
            this.removeActiveChip();
            event.preventDefault();
          }
          else if (this.allowCustomValues && this.text) {
            this.addCustomChip(this.text, true);
            event.preventDefault();
          }
          else if (!event.defaultPrevented) {
            if ((0,_form_98fe0e7c_js__WEBPACK_IMPORTED_MODULE_5__.s)(this)) {
              event.preventDefault();
            }
          }
          break;
        case "Delete":
        case "Backspace":
          if (this.activeChipIndex > -1) {
            event.preventDefault();
            this.removeActiveChip();
          }
          else if (!this.text && this.isMulti()) {
            event.preventDefault();
            this.removeLastChip();
          }
          break;
      }
    };
    this.toggleCloseEnd = () => {
      this.open = false;
      this.el.removeEventListener("calciteComboboxClose", this.toggleCloseEnd);
    };
    this.toggleOpenEnd = () => {
      this.open = false;
      this.el.removeEventListener("calciteComboboxOpen", this.toggleOpenEnd);
    };
    this.setMaxScrollerHeight = async () => {
      const { listContainerEl, open, referenceEl } = this;
      if (!listContainerEl || !open) {
        return;
      }
      await this.reposition(true);
      const maxScrollerHeight = this.getMaxScrollerHeight();
      listContainerEl.style.maxHeight = maxScrollerHeight > 0 ? `${maxScrollerHeight}px` : "";
      listContainerEl.style.minWidth = `${referenceEl.clientWidth}px`;
      await this.reposition(true);
    };
    this.calciteChipCloseHandler = (comboboxItem) => {
      this.open = false;
      const selection = this.items.find((item) => item === comboboxItem);
      if (selection) {
        this.toggleSelection(selection, false);
      }
      this.calciteComboboxChipClose.emit();
    };
    this.clickHandler = (event) => {
      if (event.composedPath().some((node) => node.tagName === "CALCITE-CHIP")) {
        return;
      }
      this.open = !this.open;
      this.updateActiveItemIndex(0);
      this.setFocus();
    };
    this.setInactiveIfNotContained = (event) => {
      const composedPath = event.composedPath();
      if (!this.open || composedPath.includes(this.el) || composedPath.includes(this.referenceEl)) {
        return;
      }
      if (this.allowCustomValues && this.text.trim().length) {
        this.addCustomChip(this.text);
      }
      if (this.selectionMode === "single") {
        if (this.textInput) {
          this.textInput.value = "";
        }
        this.text = "";
        this.filterItems("");
        this.updateActiveItemIndex(-1);
      }
      this.open = false;
    };
    this.setFloatingEl = (el) => {
      this.floatingEl = el;
      (0,_floating_ui_f29517e7_js__WEBPACK_IMPORTED_MODULE_2__.c)(this, this.referenceEl, this.floatingEl);
    };
    this.setContainerEl = (el) => {
      this.resizeObserver.observe(el);
      this.listContainerEl = el;
      this.transitionEl = el;
      (0,_openCloseComponent_7d58834c_js__WEBPACK_IMPORTED_MODULE_6__.c)(this);
    };
    this.setReferenceEl = (el) => {
      this.referenceEl = el;
      (0,_floating_ui_f29517e7_js__WEBPACK_IMPORTED_MODULE_2__.c)(this, this.referenceEl, this.floatingEl);
    };
    this.inputHandler = (event) => {
      const value = event.target.value;
      this.text = value;
      this.filterItems(value);
      if (value) {
        this.activeChipIndex = -1;
      }
    };
    this.filterItems = (() => {
      const find = (item, filteredData) => item &&
        filteredData.some(({ label, value }) => {
          if (isGroup(item)) {
            return value === item.label;
          }
          return (value === item.textLabel ||
            value === item.value ||
            label === item.textLabel ||
            label === item.value);
        });
      return (0,_debounce_047e09f4_js__WEBPACK_IMPORTED_MODULE_7__.d)((text) => {
        const filteredData = (0,_filter_b6c777cc_js__WEBPACK_IMPORTED_MODULE_8__.f)(this.data, text);
        const items = this.getCombinedItems();
        items.forEach((item) => {
          const hidden = !find(item, filteredData);
          item.hidden = hidden;
          const [parent, grandparent] = item.ancestors;
          if (find(parent, filteredData) || find(grandparent, filteredData)) {
            item.hidden = false;
          }
          if (!hidden) {
            item.ancestors.forEach((ancestor) => (ancestor.hidden = false));
          }
        });
        this.filteredItems = this.getfilteredItems();
        this.calciteComboboxFilterChange.emit();
      }, 100);
    })();
    this.internalComboboxChangeEvent = () => {
      this.calciteComboboxChange.emit();
    };
    this.emitComboboxChange = (0,_debounce_047e09f4_js__WEBPACK_IMPORTED_MODULE_7__.d)(this.internalComboboxChangeEvent, 0);
    this.updateItems = () => {
      this.items = this.getItems();
      this.groupItems = this.getGroupItems();
      this.data = this.getData();
      this.selectedItems = this.getSelectedItems();
      this.filteredItems = this.getfilteredItems();
      this.needsIcon = this.getNeedsIcon();
      if (!this.allowCustomValues) {
        this.setMaxScrollerHeight();
      }
    };
    this.scrollToActiveItem = () => {
      const activeItem = this.filteredItems[this.activeItemIndex];
      if (!activeItem) {
        return;
      }
      const height = this.calculateSingleItemHeight(activeItem);
      const { offsetHeight, scrollTop } = this.listContainerEl;
      if (offsetHeight + scrollTop < activeItem.offsetTop + height) {
        this.listContainerEl.scrollTop = activeItem.offsetTop - offsetHeight + height;
      }
      else if (activeItem.offsetTop < scrollTop) {
        this.listContainerEl.scrollTop = activeItem.offsetTop;
      }
    };
    this.comboboxFocusHandler = () => {
      this.textInput?.focus();
    };
    this.comboboxBlurHandler = (event) => {
      this.setInactiveIfNotContained(event);
    };
    this.open = false;
    this.disabled = false;
    this.label = undefined;
    this.placeholder = undefined;
    this.placeholderIcon = undefined;
    this.placeholderIconFlipRtl = false;
    this.maxItems = 0;
    this.name = undefined;
    this.allowCustomValues = undefined;
    this.overlayPositioning = "absolute";
    this.required = false;
    this.selectionMode = "multiple";
    this.scale = "m";
    this.value = null;
    this.flipPlacements = undefined;
    this.messages = undefined;
    this.messageOverrides = undefined;
    this.selectedItems = [];
    this.filteredItems = [];
    this.items = [];
    this.groupItems = [];
    this.needsIcon = undefined;
    this.activeItemIndex = -1;
    this.activeChipIndex = -1;
    this.activeDescendant = "";
    this.text = "";
    this.effectiveLocale = undefined;
    this.defaultMessages = undefined;
  }
  openHandler(value) {
    if (!value) {
      (0,_floating_ui_f29517e7_js__WEBPACK_IMPORTED_MODULE_2__.u)(this.floatingEl);
    }
    if (this.disabled) {
      this.open = false;
      return;
    }
    this.setMaxScrollerHeight();
  }
  handleDisabledChange(value) {
    if (!value) {
      this.open = false;
    }
  }
  maxItemsHandler() {
    this.setMaxScrollerHeight();
  }
  overlayPositioningHandler() {
    this.reposition(true);
  }
  valueHandler(value) {
    if (!this.internalValueChangeFlag) {
      const items = this.getItems();
      if (Array.isArray(value)) {
        items.forEach((item) => (item.selected = value.includes(item.value)));
      }
      else if (value) {
        items.forEach((item) => (item.selected = value === item.value));
      }
      else {
        items.forEach((item) => (item.selected = false));
      }
      this.updateItems();
    }
  }
  onMessagesChange() {
    /*  wired up by t9n util */
  }
  flipPlacementsHandler() {
    this.setFilteredPlacements();
    this.reposition(true);
  }
  selectedItemsHandler() {
    this.internalValueChangeFlag = true;
    this.value = this.getValue();
    this.internalValueChangeFlag = false;
  }
  //--------------------------------------------------------------------------
  //
  //  Event Listeners
  //
  //--------------------------------------------------------------------------
  documentClickHandler(event) {
    if (!(0,_dom_f1ee4d04_js__WEBPACK_IMPORTED_MODULE_9__.i)(event)) {
      return;
    }
    this.setInactiveIfNotContained(event);
  }
  calciteComboboxItemChangeHandler(event) {
    if (this.ignoreSelectedEventsFlag) {
      return;
    }
    const target = event.target;
    const newIndex = this.filteredItems.indexOf(target);
    this.updateActiveItemIndex(newIndex);
    this.toggleSelection(target, target.selected);
  }
  //--------------------------------------------------------------------------
  //
  //  Public Methods
  //
  //--------------------------------------------------------------------------
  /**
   * Updates the position of the component.
   *
   * @param delayed
   */
  async reposition(delayed = false) {
    const { floatingEl, referenceEl, placement, overlayPositioning, filteredFlipPlacements } = this;
    return (0,_floating_ui_f29517e7_js__WEBPACK_IMPORTED_MODULE_2__.r)(this, {
      floatingEl,
      referenceEl,
      overlayPositioning,
      placement,
      flipPlacements: filteredFlipPlacements,
      type: "menu"
    }, delayed);
  }
  /** Sets focus on the component. */
  async setFocus() {
    await (0,_loadable_cc14d728_js__WEBPACK_IMPORTED_MODULE_10__.c)(this);
    this.textInput?.focus();
    this.activeChipIndex = -1;
    this.activeItemIndex = -1;
  }
  // --------------------------------------------------------------------------
  //
  //  Lifecycle
  //
  // --------------------------------------------------------------------------
  connectedCallback() {
    (0,_locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_11__.c)(this);
    (0,_t9n_dc67ab96_js__WEBPACK_IMPORTED_MODULE_12__.c)(this);
    this.internalValueChangeFlag = true;
    this.value = this.getValue();
    this.internalValueChangeFlag = false;
    this.mutationObserver?.observe(this.el, { childList: true, subtree: true });
    (0,_label_6d1e3168_js__WEBPACK_IMPORTED_MODULE_13__.c)(this);
    (0,_form_98fe0e7c_js__WEBPACK_IMPORTED_MODULE_5__.c)(this);
    (0,_openCloseComponent_7d58834c_js__WEBPACK_IMPORTED_MODULE_6__.c)(this);
    this.setFilteredPlacements();
    this.reposition(true);
    if (this.open) {
      this.openHandler(this.open);
    }
  }
  async componentWillLoad() {
    (0,_loadable_cc14d728_js__WEBPACK_IMPORTED_MODULE_10__.a)(this);
    this.updateItems();
    await (0,_t9n_dc67ab96_js__WEBPACK_IMPORTED_MODULE_12__.s)(this);
  }
  componentDidLoad() {
    (0,_form_98fe0e7c_js__WEBPACK_IMPORTED_MODULE_5__.a)(this, this.getValue());
    this.reposition(true);
    (0,_loadable_cc14d728_js__WEBPACK_IMPORTED_MODULE_10__.s)(this);
  }
  componentDidRender() {
    if (this.el.offsetHeight !== this.inputHeight) {
      this.reposition(true);
      this.inputHeight = this.el.offsetHeight;
    }
    (0,_interactive_29995522_js__WEBPACK_IMPORTED_MODULE_14__.u)(this);
  }
  disconnectedCallback() {
    this.mutationObserver?.disconnect();
    this.resizeObserver?.disconnect();
    (0,_label_6d1e3168_js__WEBPACK_IMPORTED_MODULE_13__.d)(this);
    (0,_form_98fe0e7c_js__WEBPACK_IMPORTED_MODULE_5__.d)(this);
    (0,_floating_ui_f29517e7_js__WEBPACK_IMPORTED_MODULE_2__.a)(this, this.referenceEl, this.floatingEl);
    (0,_openCloseComponent_7d58834c_js__WEBPACK_IMPORTED_MODULE_6__.d)(this);
    (0,_locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_11__.d)(this);
    (0,_t9n_dc67ab96_js__WEBPACK_IMPORTED_MODULE_12__.d)(this);
  }
  /** when search text is cleared, reset active to  */
  textHandler() {
    this.updateActiveItemIndex(-1);
  }
  effectiveLocaleChange() {
    (0,_t9n_dc67ab96_js__WEBPACK_IMPORTED_MODULE_12__.u)(this, this.effectiveLocale);
  }
  comboboxInViewport() {
    const bounding = this.el.getBoundingClientRect();
    return (bounding.top >= 0 &&
      bounding.left >= 0 &&
      bounding.right <= (window.innerWidth || document.documentElement.clientWidth) &&
      bounding.bottom <= (window.innerHeight || document.documentElement.clientHeight));
  }
  onBeforeOpen() {
    this.calciteComboboxBeforeOpen.emit();
  }
  onOpen() {
    this.calciteComboboxOpen.emit();
  }
  onBeforeClose() {
    this.calciteComboboxBeforeClose.emit();
  }
  onClose() {
    this.calciteComboboxClose.emit();
  }
  getMaxScrollerHeight() {
    const items = this.getCombinedItems().filter((item) => !item.hidden);
    const { maxItems } = this;
    let itemsToProcess = 0;
    let maxScrollerHeight = 0;
    if (items.length > maxItems) {
      items.forEach((item) => {
        if (itemsToProcess < maxItems && maxItems > 0) {
          const height = this.calculateSingleItemHeight(item);
          if (height > 0) {
            maxScrollerHeight += height;
            itemsToProcess++;
          }
        }
      });
    }
    return maxScrollerHeight;
  }
  calculateSingleItemHeight(item) {
    if (!item) {
      return;
    }
    let height = item.offsetHeight;
    // if item has children items, don't count their height twice
    const children = Array.from(item.querySelectorAll(_utils_97156535_js__WEBPACK_IMPORTED_MODULE_0__.C));
    children
      .map((child) => child?.offsetHeight)
      .forEach((offsetHeight) => {
      height -= offsetHeight;
    });
    return height;
  }
  getCombinedItems() {
    return [...this.groupItems, ...this.items];
  }
  toggleSelection(item, value = !item.selected) {
    if (!item) {
      return;
    }
    if (this.isMulti()) {
      item.selected = value;
      this.updateAncestors(item);
      this.selectedItems = this.getSelectedItems();
      this.emitComboboxChange();
      this.resetText();
      this.filterItems("");
    }
    else {
      this.ignoreSelectedEventsFlag = true;
      this.items.forEach((el) => (el.selected = el === item ? value : false));
      this.ignoreSelectedEventsFlag = false;
      this.selectedItems = this.getSelectedItems();
      this.emitComboboxChange();
      if (this.textInput) {
        this.textInput.value = item.textLabel;
      }
      this.open = false;
      this.updateActiveItemIndex(-1);
      this.resetText();
      this.filterItems("");
    }
  }
  updateAncestors(item) {
    if (this.selectionMode !== "ancestors") {
      return;
    }
    const ancestors = (0,_utils_97156535_js__WEBPACK_IMPORTED_MODULE_0__.g)(item);
    const children = (0,_utils_97156535_js__WEBPACK_IMPORTED_MODULE_0__.a)(item);
    if (item.selected) {
      ancestors.forEach((el) => {
        el.selected = true;
      });
    }
    else {
      children.forEach((el) => (el.selected = false));
      [...ancestors].forEach((el) => {
        if (!(0,_utils_97156535_js__WEBPACK_IMPORTED_MODULE_0__.h)(el)) {
          el.selected = false;
        }
      });
    }
  }
  getfilteredItems() {
    return this.items.filter((item) => !item.hidden);
  }
  getSelectedItems() {
    if (!this.isMulti()) {
      const match = this.items.find(({ selected }) => selected);
      return match ? [match] : [];
    }
    return (this.items
      .filter((item) => item.selected && (this.selectionMode !== "ancestors" || !(0,_utils_97156535_js__WEBPACK_IMPORTED_MODULE_0__.h)(item)))
      /** Preserve order of entered tags */
      .sort((a, b) => {
      const aIdx = this.selectedItems.indexOf(a);
      const bIdx = this.selectedItems.indexOf(b);
      if (aIdx > -1 && bIdx > -1) {
        return aIdx - bIdx;
      }
      return bIdx - aIdx;
    }));
  }
  getData() {
    return this.items.map((item) => ({
      filterDisabled: item.filterDisabled,
      value: item.value,
      label: item.textLabel
    }));
  }
  getNeedsIcon() {
    return this.selectionMode === "single" && this.items.some((item) => item.icon);
  }
  resetText() {
    if (this.textInput) {
      this.textInput.value = "";
    }
    this.text = "";
  }
  getItems() {
    const items = Array.from(this.el.querySelectorAll(_utils_97156535_js__WEBPACK_IMPORTED_MODULE_0__.b));
    return items.filter((item) => !item.disabled);
  }
  getGroupItems() {
    return Array.from(this.el.querySelectorAll(_utils_97156535_js__WEBPACK_IMPORTED_MODULE_0__.c));
  }
  addCustomChip(value, focus) {
    const existingItem = this.items.find((el) => el.textLabel === value);
    if (existingItem) {
      this.toggleSelection(existingItem, true);
    }
    else {
      if (!this.isMulti()) {
        this.toggleSelection(this.selectedItems[this.selectedItems.length - 1], false);
      }
      const item = document.createElement(_utils_97156535_js__WEBPACK_IMPORTED_MODULE_0__.b);
      item.value = value;
      item.textLabel = value;
      item.selected = true;
      this.el.appendChild(item);
      this.resetText();
      if (focus) {
        this.setFocus();
      }
      this.updateItems();
      this.filterItems("");
      this.emitComboboxChange();
    }
  }
  removeActiveChip() {
    this.toggleSelection(this.selectedItems[this.activeChipIndex], false);
    this.setFocus();
  }
  removeLastChip() {
    this.toggleSelection(this.selectedItems[this.selectedItems.length - 1], false);
    this.setFocus();
  }
  previousChip() {
    if (this.text) {
      return;
    }
    const length = this.selectedItems.length - 1;
    const active = this.activeChipIndex;
    this.activeChipIndex = active === -1 ? length : Math.max(active - 1, 0);
    this.updateActiveItemIndex(-1);
    this.focusChip();
  }
  nextChip() {
    if (this.text || this.activeChipIndex === -1) {
      return;
    }
    const last = this.selectedItems.length - 1;
    const newIndex = this.activeChipIndex + 1;
    if (newIndex > last) {
      this.activeChipIndex = -1;
      this.setFocus();
    }
    else {
      this.activeChipIndex = newIndex;
      this.focusChip();
    }
    this.updateActiveItemIndex(-1);
  }
  focusChip() {
    const guid = this.selectedItems[this.activeChipIndex]?.guid;
    const chip = guid
      ? this.referenceEl.querySelector(`#${chipUidPrefix}${guid}`)
      : null;
    chip?.setFocus();
  }
  shiftActiveItemIndex(delta) {
    const { length } = this.filteredItems;
    const newIndex = (this.activeItemIndex + length + delta) % length;
    this.updateActiveItemIndex(newIndex);
    this.scrollToActiveItem();
  }
  updateActiveItemIndex(index) {
    this.activeItemIndex = index;
    let activeDescendant = null;
    this.filteredItems.forEach((el, i) => {
      if (i === index) {
        el.active = true;
        activeDescendant = `${itemUidPrefix}${el.guid}`;
      }
      else {
        el.active = false;
      }
    });
    this.activeDescendant = activeDescendant;
    if (this.activeItemIndex > -1) {
      this.activeChipIndex = -1;
    }
  }
  isMulti() {
    return this.selectionMode !== "single";
  }
  //--------------------------------------------------------------------------
  //
  //  Render Methods
  //
  //--------------------------------------------------------------------------
  renderChips() {
    const { activeChipIndex, scale, selectionMode, messages } = this;
    return this.selectedItems.map((item, i) => {
      const chipClasses = {
        chip: true,
        "chip--active": activeChipIndex === i
      };
      const ancestors = [...(0,_utils_97156535_js__WEBPACK_IMPORTED_MODULE_0__.g)(item)].reverse();
      const pathLabel = [...ancestors, item].map((el) => el.textLabel);
      const label = selectionMode !== "ancestors" ? item.textLabel : pathLabel.join(" / ");
      return ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__.h)("calcite-chip", { class: chipClasses, closable: true, icon: item.icon, iconFlipRtl: item.iconFlipRtl, id: item.guid ? `${chipUidPrefix}${item.guid}` : null, key: item.textLabel, messageOverrides: { dismissLabel: messages.removeTag }, onCalciteChipClose: () => this.calciteChipCloseHandler(item), scale: scale, title: label, value: item.value }, label));
    });
  }
  renderInput() {
    const { guid, disabled, placeholder, selectionMode, selectedItems, open } = this;
    const single = selectionMode === "single";
    const selectedItem = selectedItems[0];
    const showLabel = !open && single && !!selectedItem;
    return ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__.h)("span", { class: {
        "input-wrap": true,
        "input-wrap--single": single
      } }, showLabel && ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__.h)("span", { class: {
        label: true,
        "label--icon": !!selectedItem?.icon
      }, key: "label" }, selectedItem.textLabel)), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__.h)("input", { "aria-activedescendant": this.activeDescendant, "aria-autocomplete": "list", "aria-controls": `${listboxUidPrefix}${guid}`, "aria-label": (0,_label_6d1e3168_js__WEBPACK_IMPORTED_MODULE_13__.g)(this), class: {
        input: true,
        "input--single": true,
        "input--transparent": this.activeChipIndex > -1,
        "input--hidden": showLabel,
        "input--icon": !!this.placeholderIcon
      }, disabled: disabled, id: `${inputUidPrefix}${guid}`, key: "input", onBlur: this.comboboxBlurHandler, onFocus: this.comboboxFocusHandler, onInput: this.inputHandler, placeholder: placeholder, ref: (el) => (this.textInput = el), type: "text" })));
  }
  renderListBoxOptions() {
    return this.filteredItems.map((item) => ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__.h)("li", { "aria-selected": (0,_dom_f1ee4d04_js__WEBPACK_IMPORTED_MODULE_9__.t)(item.selected), id: item.guid ? `${itemUidPrefix}${item.guid}` : null, role: "option", tabindex: "-1" }, item.textLabel)));
  }
  renderFloatingUIContainer() {
    const { setFloatingEl, setContainerEl, open } = this;
    const classes = {
      "list-container": true,
      [_floating_ui_f29517e7_js__WEBPACK_IMPORTED_MODULE_2__.F.animation]: true,
      [_floating_ui_f29517e7_js__WEBPACK_IMPORTED_MODULE_2__.F.animationActive]: open
    };
    return ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__.h)("div", { "aria-hidden": "true", class: {
        "floating-ui-container": true,
        "floating-ui-container--active": open
      }, ref: setFloatingEl }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__.h)("div", { class: classes, ref: setContainerEl }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__.h)("ul", { class: { list: true, "list--hide": !open } }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__.h)("slot", null)))));
  }
  renderIconStart() {
    const { selectedItems, placeholderIcon, selectionMode, placeholderIconFlipRtl } = this;
    const selectedItem = selectedItems[0];
    const selectedIcon = selectedItem?.icon;
    const singleSelectionMode = selectionMode === "single";
    const iconAtStart = !this.open && selectedItem
      ? !!selectedIcon && singleSelectionMode
      : !!this.placeholderIcon && (!selectedItem || singleSelectionMode);
    return (iconAtStart && ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__.h)("span", { class: "icon-start" }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__.h)("calcite-icon", { class: "selected-icon", flipRtl: this.open && selectedItem ? selectedItem.iconFlipRtl : placeholderIconFlipRtl, icon: !this.open && selectedItem ? selectedIcon : placeholderIcon, scale: "s" }))));
  }
  renderIconEnd() {
    const { open } = this;
    return ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__.h)("span", { class: "icon-end" }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__.h)("calcite-icon", { icon: open ? "chevron-up" : "chevron-down", scale: "s" })));
  }
  render() {
    const { guid, label, open } = this;
    const single = this.selectionMode === "single";
    return ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__.h)(_index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__.H, { onClick: this.comboboxFocusHandler }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__.h)("div", { "aria-autocomplete": "list", "aria-controls": `${listboxUidPrefix}${guid}`, "aria-expanded": (0,_dom_f1ee4d04_js__WEBPACK_IMPORTED_MODULE_9__.t)(open), "aria-haspopup": "listbox", "aria-labelledby": `${labelUidPrefix}${guid}`, "aria-live": "polite", "aria-owns": `${listboxUidPrefix}${guid}`, class: {
        wrapper: true,
        "wrapper--single": single || !this.selectedItems.length,
        "wrapper--active": open
      }, onClick: this.clickHandler, onKeyDown: this.keydownHandler, ref: this.setReferenceEl, role: "combobox" }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__.h)("div", { class: "grid-input" }, this.renderIconStart(), !single && this.renderChips(), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__.h)("label", { class: "screen-readers-only", htmlFor: `${inputUidPrefix}${guid}`, id: `${labelUidPrefix}${guid}` }, label), this.renderInput()), this.renderIconEnd()), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__.h)("ul", { "aria-labelledby": `${labelUidPrefix}${guid}`, "aria-multiselectable": "true", class: "screen-readers-only", id: `${listboxUidPrefix}${guid}`, role: "listbox", tabIndex: -1 }, this.renderListBoxOptions()), this.renderFloatingUIContainer(), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__.h)(_form_98fe0e7c_js__WEBPACK_IMPORTED_MODULE_5__.H, { component: this })));
  }
  static get assetsDirs() { return ["assets"]; }
  get el() { return (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__.g)(this); }
  static get watchers() { return {
    "open": ["openHandler"],
    "disabled": ["handleDisabledChange"],
    "maxItems": ["maxItemsHandler"],
    "overlayPositioning": ["overlayPositioningHandler"],
    "value": ["valueHandler"],
    "messageOverrides": ["onMessagesChange"],
    "flipPlacements": ["flipPlacementsHandler"],
    "selectedItems": ["selectedItemsHandler"],
    "text": ["textHandler"],
    "effectiveLocale": ["effectiveLocaleChange"]
  }; }
};
Combobox.style = comboboxCss;



//# sourceMappingURL=calcite-combobox.entry.js.map

/***/ }),

/***/ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/utils-97156535.js":
/*!***********************************************************************************************************************************************!*\
  !*** ./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/utils-97156535.js ***!
  \***********************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   C: () => (/* binding */ ComboboxChildSelector),
/* harmony export */   a: () => (/* binding */ getItemChildren),
/* harmony export */   b: () => (/* binding */ ComboboxItem),
/* harmony export */   c: () => (/* binding */ ComboboxItemGroup),
/* harmony export */   d: () => (/* binding */ getAncestors),
/* harmony export */   e: () => (/* binding */ getDepth),
/* harmony export */   g: () => (/* binding */ getItemAncestors),
/* harmony export */   h: () => (/* binding */ hasActiveChildren)
/* harmony export */ });
/* harmony import */ var _dom_f1ee4d04_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dom-f1ee4d04.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/dom-f1ee4d04.js");


/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.5
 */
const ComboboxItem = "CALCITE-COMBOBOX-ITEM";
const ComboboxItemGroup = "CALCITE-COMBOBOX-ITEM-GROUP";
const ComboboxChildSelector = `${ComboboxItem}, ${ComboboxItemGroup}`;

/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.5
 */
function getAncestors(element) {
  const parent = element.parentElement?.closest(ComboboxChildSelector);
  const grandparent = parent?.parentElement?.closest(ComboboxChildSelector);
  return [parent, grandparent].filter((el) => el);
}
function getItemAncestors(item) {
  return (item.ancestors?.filter((el) => el.nodeName === "CALCITE-COMBOBOX-ITEM") || []);
}
function getItemChildren(item) {
  return (0,_dom_f1ee4d04_js__WEBPACK_IMPORTED_MODULE_0__.n)(item.querySelectorAll("calcite-combobox-item"));
}
function hasActiveChildren(node) {
  const items = (0,_dom_f1ee4d04_js__WEBPACK_IMPORTED_MODULE_0__.n)(node.querySelectorAll("calcite-combobox-item"));
  return items.filter((item) => item.selected).length > 0;
}
function getDepth(element) {
  const result = document.evaluate("ancestor::calcite-combobox-item", element, null, XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE, null);
  return result.snapshotLength;
}



//# sourceMappingURL=utils-97156535.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYmEtaW5mb2dyYXBoaWNfbm9kZV9tb2R1bGVzX2FyY2dpc19idXNpbmVzcy1hbmFseXN0LWNvbXBvbmVudHNfZGlzLTcyOTYzOS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTZHO0FBQzFEO0FBQ2lDO0FBQzhIO0FBQzFEO0FBQ3pHO0FBQ3dCO0FBQzBCO0FBQ21CO0FBQzdCO0FBQ3pCO0FBQ3VEO0FBQ007QUFDc0Q7QUFDMUg7QUFDdEI7QUFDQTtBQUNOOztBQUUzQixtQ0FBbUMsR0FBRyxVQUFVLEtBQUssV0FBVyxtQkFBbUIsR0FBRyxVQUFVLGtDQUFrQyxLQUFLLFVBQVUsZ0NBQWdDLGlCQUFpQixHQUFHLFVBQVUsaUNBQWlDLEtBQUssVUFBVSxnQ0FBZ0Msb0JBQW9CLEdBQUcsVUFBVSxpQ0FBaUMsS0FBSyxVQUFVLDRCQUE0QixNQUFNLGlGQUFpRixxRUFBcUUsK0ZBQStGLGlHQUFpRywrRkFBK0YsaUJBQWlCLFVBQVUseUJBQXlCLG1EQUFtRCxxQkFBcUIsa0JBQWtCLDBCQUEwQix1QkFBdUIsd0JBQXdCLHFCQUFxQiwyQkFBMkIsd0JBQXdCLHdDQUF3QyxNQUFNLHNDQUFzQyxNQUFNLGlFQUFpRSxrQ0FBa0MsZ0JBQWdCLGFBQWEsa0JBQWtCLG9CQUFvQixlQUFlLHlCQUF5QixpQkFBaUIsMkNBQTJDLE1BQU0sa0JBQWtCLGNBQWMseUdBQXlHLFVBQVUsaUJBQWlCLHNDQUFzQyw4Q0FBOEMsK0NBQStDLHVDQUF1QyxpQkFBaUIsc0NBQXNDLCtDQUErQyw4Q0FBOEMscUNBQXFDLGlCQUFpQixxQ0FBcUMsNENBQTRDLCtDQUErQyx3Q0FBd0MsU0FBUyxhQUFhLGlCQUFpQixtQkFBbUIsNENBQTRDLGdEQUFnRCwrQkFBK0IsMEJBQTBCLG9FQUFvRSwyREFBMkQsK0NBQStDLDBDQUEwQyxvQkFBb0IsaUJBQWlCLGdCQUFnQiwyREFBMkQsZUFBZSxpQkFBaUIsWUFBWSxhQUFhLFlBQVksZUFB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RCxpQkFBaUIsRUFBRSxLQUFLLG9CQUFvQixtREFBYSwwREFBMEQsZUFBZSxFQUFFLEtBQUssMENBQTBDLGlCQUFpQixFQUFFLEtBQUs7QUFDblU7QUFDQTtBQUNBO0FBQ0EsT0FBTywwR0FBMEcsRUFBRSxxREFBQyxVQUFVLHFCQUFxQix5REFBeUQscURBQUMsWUFBWSwwQ0FBMEMsZUFBZSxFQUFFLEtBQUssVUFBVSxlQUFlLEVBQUUsS0FBSyxHQUFHLHNEQUFzRCxxREFBQyxTQUFTLHNCQUFzQixlQUFlLEVBQUUsS0FBSyx3RUFBd0UsaUJBQWlCLEVBQUUsS0FBSyxrQ0FBa0Msa0VBQWtFLHFEQUFDLENBQUMsZ0RBQW1CLElBQUksaUJBQWlCO0FBQ3RwQjtBQUNBLDRCQUE0QjtBQUM1QixhQUFhLE9BQU8scURBQVU7QUFDOUIsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUV3Qzs7QUFFeEM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNyekJ5RDs7QUFFekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsYUFBYSxJQUFJLGtCQUFrQjs7QUFFcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsbURBQWU7QUFDeEI7QUFDQTtBQUNBLGdCQUFnQixtREFBZTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRXdMOztBQUV4TCIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYmEtaW5mb2dyYXBoaWMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYnVzaW5lc3MtYW5hbHlzdC1jb21wb25lbnRzL2Rpc3Qvc3RlbmNpbC1jb21wb25lbnRzL2Rpc3QvZXNtL2NhbGNpdGUtY29tYm9ib3guZW50cnkuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9iYS1pbmZvZ3JhcGhpYy9ub2RlX21vZHVsZXMvQGFyY2dpcy9idXNpbmVzcy1hbmFseXN0LWNvbXBvbmVudHMvZGlzdC9zdGVuY2lsLWNvbXBvbmVudHMvZGlzdC9lc20vdXRpbHMtOTcxNTY1MzUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgciBhcyByZWdpc3Rlckluc3RhbmNlLCBjIGFzIGNyZWF0ZUV2ZW50LCBoLCBIIGFzIEhvc3QsIGcgYXMgZ2V0RWxlbWVudCB9IGZyb20gJy4vaW5kZXgtNGU2NDc0MTEuanMnO1xuaW1wb3J0IHsgZiBhcyBmaWx0ZXIgfSBmcm9tICcuL2ZpbHRlci1iNmM3NzdjYy5qcyc7XG5pbXBvcnQgeyBpIGFzIGlzUHJpbWFyeVBvaW50ZXJCdXR0b24sIHQgYXMgdG9BcmlhQm9vbGVhbiB9IGZyb20gJy4vZG9tLWYxZWU0ZDA0LmpzJztcbmltcG9ydCB7IGQgYXMgZGVmYXVsdE1lbnVQbGFjZW1lbnQsIGYgYXMgZmlsdGVyQ29tcHV0ZWRQbGFjZW1lbnRzLCBjIGFzIGNvbm5lY3RGbG9hdGluZ1VJLCB1IGFzIHVwZGF0ZUFmdGVyQ2xvc2UsIHIgYXMgcmVwb3NpdGlvbiwgYSBhcyBkaXNjb25uZWN0RmxvYXRpbmdVSSwgRiBhcyBGbG9hdGluZ0NTUyB9IGZyb20gJy4vZmxvYXRpbmctdWktZjI5NTE3ZTcuanMnO1xuaW1wb3J0IHsgcyBhcyBzdWJtaXRGb3JtLCBjIGFzIGNvbm5lY3RGb3JtLCBhIGFzIGFmdGVyQ29ubmVjdERlZmF1bHRWYWx1ZVNldCwgZCBhcyBkaXNjb25uZWN0Rm9ybSwgSCBhcyBIaWRkZW5Gb3JtSW5wdXRTbG90IH0gZnJvbSAnLi9mb3JtLTk4ZmUwZTdjLmpzJztcbmltcG9ydCB7IGcgYXMgZ3VpZCB9IGZyb20gJy4vZ3VpZC04OGEzNzI5Zi5qcyc7XG5pbXBvcnQgeyB1IGFzIHVwZGF0ZUhvc3RJbnRlcmFjdGlvbiB9IGZyb20gJy4vaW50ZXJhY3RpdmUtMjk5OTU1MjIuanMnO1xuaW1wb3J0IHsgYyBhcyBjb25uZWN0TGFiZWwsIGQgYXMgZGlzY29ubmVjdExhYmVsLCBnIGFzIGdldExhYmVsVGV4dCB9IGZyb20gJy4vbGFiZWwtNmQxZTMxNjguanMnO1xuaW1wb3J0IHsgYyBhcyBjb21wb25lbnRMb2FkZWQsIGEgYXMgc2V0VXBMb2FkYWJsZUNvbXBvbmVudCwgcyBhcyBzZXRDb21wb25lbnRMb2FkZWQgfSBmcm9tICcuL2xvYWRhYmxlLWNjMTRkNzI4LmpzJztcbmltcG9ydCB7IGMgYXMgY29ubmVjdExvY2FsaXplZCwgZCBhcyBkaXNjb25uZWN0TG9jYWxpemVkIH0gZnJvbSAnLi9sb2NhbGUtZjdiMmZiYjAuanMnO1xuaW1wb3J0IHsgYyBhcyBjcmVhdGVPYnNlcnZlciB9IGZyb20gJy4vb2JzZXJ2ZXJzLTU2NzQwZTk5LmpzJztcbmltcG9ydCB7IGMgYXMgY29ubmVjdE9wZW5DbG9zZUNvbXBvbmVudCwgZCBhcyBkaXNjb25uZWN0T3BlbkNsb3NlQ29tcG9uZW50IH0gZnJvbSAnLi9vcGVuQ2xvc2VDb21wb25lbnQtN2Q1ODgzNGMuanMnO1xuaW1wb3J0IHsgYyBhcyBjb25uZWN0TWVzc2FnZXMsIHMgYXMgc2V0VXBNZXNzYWdlcywgZCBhcyBkaXNjb25uZWN0TWVzc2FnZXMsIHUgYXMgdXBkYXRlTWVzc2FnZXMgfSBmcm9tICcuL3Q5bi1kYzY3YWI5Ni5qcyc7XG5pbXBvcnQgeyBDIGFzIENvbWJvYm94Q2hpbGRTZWxlY3RvciwgZyBhcyBnZXRJdGVtQW5jZXN0b3JzLCBhIGFzIGdldEl0ZW1DaGlsZHJlbiwgaCBhcyBoYXNBY3RpdmVDaGlsZHJlbiwgYiBhcyBDb21ib2JveEl0ZW0sIGMgYXMgQ29tYm9ib3hJdGVtR3JvdXAgfSBmcm9tICcuL3V0aWxzLTk3MTU2NTM1LmpzJztcbmltcG9ydCB7IGQgYXMgZGVib3VuY2UgfSBmcm9tICcuL2RlYm91bmNlLTA0N2UwOWY0LmpzJztcbmltcG9ydCAnLi9pbmRleC5lc20tMWM2NWQ4YzcuanMnO1xuaW1wb3J0ICcuL3Jlc291cmNlcy00ODQzNmVlYS5qcyc7XG5pbXBvcnQgJy4va2V5LWI3NTQ5MWM0LmpzJztcblxuY29uc3QgY29tYm9ib3hDc3MgPSBcIkBrZXlmcmFtZXMgaW57MCV7b3BhY2l0eTowfTEwMCV7b3BhY2l0eToxfX1Aa2V5ZnJhbWVzIGluLWRvd257MCV7b3BhY2l0eTowO3RyYW5zZm9ybTp0cmFuc2xhdGUzRCgwLCAtNXB4LCAwKX0xMDAle29wYWNpdHk6MTt0cmFuc2Zvcm06dHJhbnNsYXRlM0QoMCwgMCwgMCl9fUBrZXlmcmFtZXMgaW4tdXB7MCV7b3BhY2l0eTowO3RyYW5zZm9ybTp0cmFuc2xhdGUzRCgwLCA1cHgsIDApfTEwMCV7b3BhY2l0eToxO3RyYW5zZm9ybTp0cmFuc2xhdGUzRCgwLCAwLCAwKX19QGtleWZyYW1lcyBpbi1zY2FsZXswJXtvcGFjaXR5OjA7dHJhbnNmb3JtOnNjYWxlM0QoMC45NSwgMC45NSwgMSl9MTAwJXtvcGFjaXR5OjE7dHJhbnNmb3JtOnNjYWxlM0QoMSwgMSwgMSl9fTpyb290ey0tY2FsY2l0ZS1hbmltYXRpb24tdGltaW5nOmNhbGMoMTUwbXMgKiB2YXIoLS1jYWxjaXRlLWludGVybmFsLWR1cmF0aW9uLWZhY3RvcikpOy0tY2FsY2l0ZS1pbnRlcm5hbC1kdXJhdGlvbi1mYWN0b3I6dmFyKC0tY2FsY2l0ZS1kdXJhdGlvbi1mYWN0b3IsIDEpOy0tY2FsY2l0ZS1pbnRlcm5hbC1hbmltYXRpb24tdGltaW5nLWZhc3Q6Y2FsYygxMDBtcyAqIHZhcigtLWNhbGNpdGUtaW50ZXJuYWwtZHVyYXRpb24tZmFjdG9yKSk7LS1jYWxjaXRlLWludGVybmFsLWFuaW1hdGlvbi10aW1pbmctbWVkaXVtOmNhbGMoMjAwbXMgKiB2YXIoLS1jYWxjaXRlLWludGVybmFsLWR1cmF0aW9uLWZhY3RvcikpOy0tY2FsY2l0ZS1pbnRlcm5hbC1hbmltYXRpb24tdGltaW5nLXNsb3c6Y2FsYygzMDBtcyAqIHZhcigtLWNhbGNpdGUtaW50ZXJuYWwtZHVyYXRpb24tZmFjdG9yKSl9LmNhbGNpdGUtYW5pbWF0ZXtvcGFjaXR5OjA7YW5pbWF0aW9uLWZpbGwtbW9kZTpib3RoO2FuaW1hdGlvbi1kdXJhdGlvbjp2YXIoLS1jYWxjaXRlLWFuaW1hdGlvbi10aW1pbmcpfS5jYWxjaXRlLWFuaW1hdGVfX2lue2FuaW1hdGlvbi1uYW1lOmlufS5jYWxjaXRlLWFuaW1hdGVfX2luLWRvd257YW5pbWF0aW9uLW5hbWU6aW4tZG93bn0uY2FsY2l0ZS1hbmltYXRlX19pbi11cHthbmltYXRpb24tbmFtZTppbi11cH0uY2FsY2l0ZS1hbmltYXRlX19pbi1zY2FsZXthbmltYXRpb24tbmFtZTppbi1zY2FsZX1AbWVkaWEgKHByZWZlcnMtcmVkdWNlZC1tb3Rpb246IHJlZHVjZSl7OnJvb3R7LS1jYWxjaXRlLWludGVybmFsLWR1cmF0aW9uLWZhY3RvcjowfX06cm9vdHstLWNhbGNpdGUtZmxvYXRpbmctdWktdHJhbnNpdGlvbjp2YXIoLS1jYWxjaXRlLWFuaW1hdGlvbi10aW1pbmcpOy0tY2FsY2l0ZS1mbG9hdGluZy11aS16LWluZGV4OjYwMH06aG9zdChbaGlkZGVuXSl7ZGlzcGxheTpub25lfTpob3N0KFtkaXNhYmxlZF0pe3BvaW50ZXItZXZlbnRzOm5vbmU7Y3Vyc29yOmRlZmF1bHQ7LXdlYmtpdC11c2VyLXNlbGVjdDpub25lO3VzZXItc2VsZWN0Om5vbmU7b3BhY2l0eTp2YXIoLS1jYWxjaXRlLXVpLW9wYWNpdHktZGlzYWJsZWQpfTpob3N0e3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6YmxvY2t9Omhvc3QoW2Rpc2FibGVkXSkgOjpzbG90dGVkKFtjYWxjaXRlLWh5ZHJhdGVkXVtkaXNhYmxlZF0pLDpob3N0KFtkaXNhYmxlZF0pIFtjYWxjaXRlLWh5ZHJhdGVkXVtkaXNhYmxlZF17b3BhY2l0eToxfTpob3N0KFtzY2FsZT1zXSl7Zm9udC1zaXplOnZhcigtLWNhbGNpdGUtZm9udC1zaXplLS0yKTstLWNhbGNpdGUtY29tYm9ib3gtaXRlbS1zcGFjaW5nLXVuaXQtbDowLjVyZW07LS1jYWxjaXRlLWNvbWJvYm94LWl0ZW0tc3BhY2luZy11bml0LXM6MC4yNXJlbTstLWNhbGNpdGUtY29tYm9ib3gtaW5wdXQtaGVpZ2h0OjEuNXJlbX06aG9zdChbc2NhbGU9bV0pe2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0tMSk7LS1jYWxjaXRlLWNvbWJvYm94LWl0ZW0tc3BhY2luZy11bml0LWw6MC43NXJlbTstLWNhbGNpdGUtY29tYm9ib3gtaXRlbS1zcGFjaW5nLXVuaXQtczowLjVyZW07LS1jYWxjaXRlLWNvbWJvYm94LWlucHV0LWhlaWdodDoycmVtfTpob3N0KFtzY2FsZT1sXSl7Zm9udC1zaXplOnZhcigtLWNhbGNpdGUtZm9udC1zaXplLTApOy0tY2FsY2l0ZS1jb21ib2JveC1pdGVtLXNwYWNpbmctdW5pdC1sOjFyZW07LS1jYWxjaXRlLWNvbWJvYm94LWl0ZW0tc3BhY2luZy11bml0LXM6MC43NXJlbTstLWNhbGNpdGUtY29tYm9ib3gtaW5wdXQtaGVpZ2h0OjIuNzVyZW19LndyYXBwZXJ7ZGlzcGxheTpmbGV4O2JvcmRlci13aWR0aDoxcHg7Ym9yZGVyLXN0eWxlOnNvbGlkO2JvcmRlci1jb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWJvcmRlci1pbnB1dCk7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWZvcmVncm91bmQtMSk7Y29sb3I6dmFyKC0tY2FsY2l0ZS11aS10ZXh0LTEpO291dGxpbmUtY29sb3I6dHJhbnNwYXJlbnQ7cGFkZGluZy1ibG9jazpjYWxjKHZhcigtLWNhbGNpdGUtY29tYm9ib3gtaXRlbS1zcGFjaW5nLXVuaXQtcykgLyA0KTtwYWRkaW5nLWlubGluZTp2YXIoLS1jYWxjaXRlLWNvbWJvYm94LWl0ZW0tc3BhY2luZy11bml0LWwpfTpob3N0KDpmb2N1cy13aXRoaW4pIC53cmFwcGVyLC53cmFwcGVyLS1hY3RpdmV7b3V0bGluZToycHggc29saWQgdmFyKC0tY2FsY2l0ZS11aS1icmFuZCk7b3V0bGluZS1vZmZzZXQ6LTJweH0ud3JhcHBlci0tc2luZ2xle3BhZGRpbmctYmxvY2s6MDtwYWRkaW5nLWlubGluZTp2YXIoLS1jYWxjaXRlLWNvbWJvYm94LWl0ZW0tc3BhY2luZy11bml0LWwpO2N1cnNvcjpwb2ludGVyO2ZsZXgtd3JhcDpub3dyYXB9LmdyaWQtaW5wdXR7ZGlzcGxheTpmbGV4O2ZsZXgtZ3JvdzoxO2ZsZXgtd3JhcDp3cmFwO2FsaWduLWl0ZW1zOmNlbnRlcjtvdmVyZmxvdzpoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpczt3aGl0ZS1zcGFjZTpub3dyYXA7cGFkZGluZzowcHh9LmlucHV0e2ZsZXgtZ3JvdzoxOy13ZWJraXQtYXBwZWFyYW5jZTpub25lO2FwcGVhcmFuY2U6bm9uZTtib3JkZXItc3R5bGU6bm9uZTtiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50O3BhZGRpbmc6MHB4O2ZvbnQtZmFtaWx5OmluaGVyaXQ7Y29sb3I6dmFyKC0tY2FsY2l0ZS11aS10ZXh0LTEpO2ZvbnQtc2l6ZTppbmhlcml0O2Jsb2NrLXNpemU6dmFyKC0tY2FsY2l0ZS1jb21ib2JveC1pbnB1dC1oZWlnaHQpO2xpbmUtaGVpZ2h0OnZhcigtLWNhbGNpdGUtY29tYm9ib3gtaW5wdXQtaGVpZ2h0KTttaW4taW5saW5lLXNpemU6MTIwcHg7bWFyZ2luLWJsb2NrLWVuZDp2YXIoLS1jYWxjaXRlLWNvbWJvYm94LWl0ZW0tc3BhY2luZy11bml0LXMpfS5pbnB1dDpmb2N1c3tvdXRsaW5lOjJweCBzb2xpZCB0cmFuc3BhcmVudDtvdXRsaW5lLW9mZnNldDoycHh9LmlucHV0LS10cmFuc3BhcmVudHtvcGFjaXR5OjB9LmlucHV0LS1zaW5nbGV7bWFyZ2luLWJsb2NrOjBweDtwYWRkaW5nOjBweH0ud3JhcHBlci0tYWN0aXZlIC5pbnB1dC1zaW5nbGV7Y3Vyc29yOnRleHR9LmlucHV0LS1oaWRkZW57cG9pbnRlci1ldmVudHM6bm9uZTtpbmxpbmUtc2l6ZTowcHg7bWluLWlubGluZS1zaXplOjBweDtvcGFjaXR5OjB9LmlucHV0LS1pY29ue3BhZGRpbmctYmxvY2s6MDtwYWRkaW5nLWlubGluZTp2YXIoLS1jYWxjaXRlLWNvbWJvYm94LWl0ZW0tc3BhY2luZy11bml0LWwpfS5pbnB1dC13cmFwe2Rpc3BsYXk6ZmxleDtmbGV4LWdyb3c6MX0uaW5wdXQtd3JhcC0tc2luZ2xle2ZsZXg6MSAxIDAlO292ZXJmbG93OmhpZGRlbn0ubGFiZWx7cG9pbnRlci1ldmVudHM6bm9uZTtkaXNwbGF5OmZsZXg7bWF4LWlubGluZS1zaXplOjEwMCU7ZmxleDoxIDEgYXV0bztvdmVyZmxvdzpoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpczt3aGl0ZS1zcGFjZTpub3dyYXA7cGFkZGluZzowcHg7Zm9udC13ZWlnaHQ6dmFyKC0tY2FsY2l0ZS1mb250LXdlaWdodC1ub3JtYWwpO2Jsb2NrLXNpemU6dmFyKC0tY2FsY2l0ZS1jb21ib2JveC1pbnB1dC1oZWlnaHQpO2xpbmUtaGVpZ2h0OnZhcigtLWNhbGNpdGUtY29tYm9ib3gtaW5wdXQtaGVpZ2h0KX0ubGFiZWwtLWljb257cGFkZGluZy1pbmxpbmU6dmFyKC0tY2FsY2l0ZS1jb21ib2JveC1pdGVtLXNwYWNpbmctdW5pdC1sKX0uaWNvbi1lbmQsLmljb24tc3RhcnR7ZGlzcGxheTpmbGV4O2lubGluZS1zaXplOjFyZW07Y3Vyc29yOnBvaW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyfS5pY29uLWVuZHtmbGV4Om5vbmV9LmZsb2F0aW5nLXVpLWNvbnRhaW5lcnstLWNhbGNpdGUtZmxvYXRpbmctdWktei1pbmRleDo2MDA7ZGlzcGxheTpibG9jaztwb3NpdGlvbjphYnNvbHV0ZTt6LWluZGV4OnZhcigtLWNhbGNpdGUtZmxvYXRpbmctdWktei1pbmRleCk7dmlzaWJpbGl0eTpoaWRkZW59LmZsb2F0aW5nLXVpLWNvbnRhaW5lciAuY2FsY2l0ZS1mbG9hdGluZy11aS1hbmlte3Bvc2l0aW9uOnJlbGF0aXZlO3RyYW5zaXRpb246dmFyKC0tY2FsY2l0ZS1mbG9hdGluZy11aS10cmFuc2l0aW9uKTt0cmFuc2l0aW9uLXByb3BlcnR5OnRyYW5zZm9ybSwgdmlzaWJpbGl0eSwgb3BhY2l0eTtvcGFjaXR5OjA7Ym94LXNoYWRvdzowIDAgMTZweCAwIHJnYmEoMCwgMCwgMCwgMC4xNik7ei1pbmRleDoxO2JvcmRlci1yYWRpdXM6MC4yNXJlbX0uZmxvYXRpbmctdWktY29udGFpbmVyW2RhdGEtcGxhY2VtZW50Xj1ib3R0b21dIC5jYWxjaXRlLWZsb2F0aW5nLXVpLWFuaW17dHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTVweCl9LmZsb2F0aW5nLXVpLWNvbnRhaW5lcltkYXRhLXBsYWNlbWVudF49dG9wXSAuY2FsY2l0ZS1mbG9hdGluZy11aS1hbmlte3RyYW5zZm9ybTp0cmFuc2xhdGVZKDVweCl9LmZsb2F0aW5nLXVpLWNvbnRhaW5lcltkYXRhLXBsYWNlbWVudF49bGVmdF0gLmNhbGNpdGUtZmxvYXRpbmctdWktYW5pbXt0cmFuc2Zvcm06dHJhbnNsYXRlWCg1cHgpfS5mbG9hdGluZy11aS1jb250YWluZXJbZGF0YS1wbGFjZW1lbnRePXJpZ2h0XSAuY2FsY2l0ZS1mbG9hdGluZy11aS1hbmlte3RyYW5zZm9ybTp0cmFuc2xhdGVYKC01cHgpfS5mbG9hdGluZy11aS1jb250YWluZXJbZGF0YS1wbGFjZW1lbnRdIC5jYWxjaXRlLWZsb2F0aW5nLXVpLWFuaW0tLWFjdGl2ZXtvcGFjaXR5OjE7dHJhbnNmb3JtOnRyYW5zbGF0ZSgwKX0uZmxvYXRpbmctdWktY29udGFpbmVyLS1hY3RpdmV7dmlzaWJpbGl0eTp2aXNpYmxlfUBtZWRpYSAoZm9yY2VkLWNvbG9yczogYWN0aXZlKXsud3JhcHBlciwuZmxvYXRpbmctdWktY29udGFpbmVyLS1hY3RpdmV7Ym9yZGVyOjFweCBzb2xpZCBjYW52YXNUZXh0fX0uc2NyZWVuLXJlYWRlcnMtb25seXtwb3NpdGlvbjphYnNvbHV0ZTtpbmxpbmUtc2l6ZToxcHg7YmxvY2stc2l6ZToxcHg7cGFkZGluZzowO21hcmdpbjotMXB4O292ZXJmbG93OmhpZGRlbjtjbGlwOnJlY3QoMCwgMCwgMCwgMCk7d2hpdGUtc3BhY2U6bm93cmFwO2JvcmRlci13aWR0aDowfS5saXN0LWNvbnRhaW5lcnttYXgtYmxvY2stc2l6ZTo0NXZoO292ZXJmbG93LXk6YXV0bztiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtdWktZm9yZWdyb3VuZC0xKTtpbmxpbmUtc2l6ZTp2YXIoLS1jYWxjaXRlLWRyb3Bkb3duLXdpZHRoKX0ubGlzdHttYXJnaW46MHB4O2Rpc3BsYXk6YmxvY2s7cGFkZGluZzowcHh9Lmxpc3QtLWhpZGV7YmxvY2stc2l6ZTowcHg7b3ZlcmZsb3c6aGlkZGVufS5jaGlwe21hcmdpbi1ibG9jazpjYWxjKHZhcigtLWNhbGNpdGUtY29tYm9ib3gtaXRlbS1zcGFjaW5nLXVuaXQtcykgLyA0KTttYXJnaW4taW5saW5lOjAgdmFyKC0tY2FsY2l0ZS1jb21ib2JveC1pdGVtLXNwYWNpbmctdW5pdC1zKTttYXgtaW5saW5lLXNpemU6MTAwJX0uY2hpcC0tYWN0aXZle2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS11aS1mb3JlZ3JvdW5kLTMpfS5pdGVte2Rpc3BsYXk6YmxvY2t9OjpzbG90dGVkKGlucHV0W3Nsb3Q9aGlkZGVuLWZvcm0taW5wdXRdKXttYXJnaW46MCAhaW1wb3J0YW50O29wYWNpdHk6MCAhaW1wb3J0YW50O291dGxpbmU6bm9uZSAhaW1wb3J0YW50O3BhZGRpbmc6MCAhaW1wb3J0YW50O3Bvc2l0aW9uOmFic29sdXRlICFpbXBvcnRhbnQ7aW5zZXQ6MCAhaW1wb3J0YW50O3RyYW5zZm9ybTpub25lICFpbXBvcnRhbnQ7LXdlYmtpdC1hcHBlYXJhbmNlOm5vbmUgIWltcG9ydGFudDt6LWluZGV4Oi0xICFpbXBvcnRhbnR9XCI7XG5cbmNvbnN0IGlzR3JvdXAgPSAoZWwpID0+IGVsLnRhZ05hbWUgPT09IENvbWJvYm94SXRlbUdyb3VwO1xyXG5jb25zdCBpdGVtVWlkUHJlZml4ID0gXCJjb21ib2JveC1pdGVtLVwiO1xyXG5jb25zdCBjaGlwVWlkUHJlZml4ID0gXCJjb21ib2JveC1jaGlwLVwiO1xyXG5jb25zdCBsYWJlbFVpZFByZWZpeCA9IFwiY29tYm9ib3gtbGFiZWwtXCI7XHJcbmNvbnN0IGxpc3Rib3hVaWRQcmVmaXggPSBcImNvbWJvYm94LWxpc3Rib3gtXCI7XHJcbmNvbnN0IGlucHV0VWlkUHJlZml4ID0gXCJjb21ib2JveC1pbnB1dC1cIjtcclxuY29uc3QgQ29tYm9ib3ggPSBjbGFzcyB7XHJcbiAgY29uc3RydWN0b3IoaG9zdFJlZikge1xyXG4gICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcclxuICAgIHRoaXMuY2FsY2l0ZUNvbWJvYm94Q2hhbmdlID0gY3JlYXRlRXZlbnQodGhpcywgXCJjYWxjaXRlQ29tYm9ib3hDaGFuZ2VcIiwgNik7XHJcbiAgICB0aGlzLmNhbGNpdGVDb21ib2JveEZpbHRlckNoYW5nZSA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiY2FsY2l0ZUNvbWJvYm94RmlsdGVyQ2hhbmdlXCIsIDYpO1xyXG4gICAgdGhpcy5jYWxjaXRlQ29tYm9ib3hDaGlwQ2xvc2UgPSBjcmVhdGVFdmVudCh0aGlzLCBcImNhbGNpdGVDb21ib2JveENoaXBDbG9zZVwiLCA2KTtcclxuICAgIHRoaXMuY2FsY2l0ZUNvbWJvYm94QmVmb3JlQ2xvc2UgPSBjcmVhdGVFdmVudCh0aGlzLCBcImNhbGNpdGVDb21ib2JveEJlZm9yZUNsb3NlXCIsIDYpO1xyXG4gICAgdGhpcy5jYWxjaXRlQ29tYm9ib3hDbG9zZSA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiY2FsY2l0ZUNvbWJvYm94Q2xvc2VcIiwgNik7XHJcbiAgICB0aGlzLmNhbGNpdGVDb21ib2JveEJlZm9yZU9wZW4gPSBjcmVhdGVFdmVudCh0aGlzLCBcImNhbGNpdGVDb21ib2JveEJlZm9yZU9wZW5cIiwgNik7XHJcbiAgICB0aGlzLmNhbGNpdGVDb21ib2JveE9wZW4gPSBjcmVhdGVFdmVudCh0aGlzLCBcImNhbGNpdGVDb21ib2JveE9wZW5cIiwgNik7XHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAvL1xyXG4gICAgLy8gIFByaXZhdGUgU3RhdGUvUHJvcHNcclxuICAgIC8vXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICB0aGlzLnBsYWNlbWVudCA9IGRlZmF1bHRNZW51UGxhY2VtZW50O1xyXG4gICAgdGhpcy5pbnRlcm5hbFZhbHVlQ2hhbmdlRmxhZyA9IGZhbHNlO1xyXG4gICAgdGhpcy50ZXh0SW5wdXQgPSBudWxsO1xyXG4gICAgdGhpcy5tdXRhdGlvbk9ic2VydmVyID0gY3JlYXRlT2JzZXJ2ZXIoXCJtdXRhdGlvblwiLCAoKSA9PiB0aGlzLnVwZGF0ZUl0ZW1zKCkpO1xyXG4gICAgdGhpcy5yZXNpemVPYnNlcnZlciA9IGNyZWF0ZU9ic2VydmVyKFwicmVzaXplXCIsICgpID0+IHRoaXMuc2V0TWF4U2Nyb2xsZXJIZWlnaHQoKSk7XHJcbiAgICB0aGlzLmd1aWQgPSBndWlkKCk7XHJcbiAgICB0aGlzLmlucHV0SGVpZ2h0ID0gMDtcclxuICAgIHRoaXMuaWdub3JlU2VsZWN0ZWRFdmVudHNGbGFnID0gZmFsc2U7XHJcbiAgICB0aGlzLm9wZW5UcmFuc2l0aW9uUHJvcCA9IFwib3BhY2l0eVwiO1xyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vXHJcbiAgICAvLyAgUHJpdmF0ZSBNZXRob2RzXHJcbiAgICAvL1xyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIHRoaXMuc2V0RmlsdGVyZWRQbGFjZW1lbnRzID0gKCkgPT4ge1xyXG4gICAgICBjb25zdCB7IGVsLCBmbGlwUGxhY2VtZW50cyB9ID0gdGhpcztcclxuICAgICAgdGhpcy5maWx0ZXJlZEZsaXBQbGFjZW1lbnRzID0gZmxpcFBsYWNlbWVudHNcclxuICAgICAgICA/IGZpbHRlckNvbXB1dGVkUGxhY2VtZW50cyhmbGlwUGxhY2VtZW50cywgZWwpXHJcbiAgICAgICAgOiBudWxsO1xyXG4gICAgfTtcclxuICAgIHRoaXMuZ2V0VmFsdWUgPSAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5zZWxlY3RlZEl0ZW1zLm1hcCgoaXRlbSkgPT4gaXRlbT8udmFsdWU/LnRvU3RyaW5nKCkpO1xyXG4gICAgICByZXR1cm4gaXRlbXM/Lmxlbmd0aCA/IChpdGVtcy5sZW5ndGggPiAxID8gaXRlbXMgOiBpdGVtc1swXSkgOiBcIlwiO1xyXG4gICAgfTtcclxuICAgIHRoaXMub25MYWJlbENsaWNrID0gKCkgPT4ge1xyXG4gICAgICB0aGlzLnNldEZvY3VzKCk7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5rZXlkb3duSGFuZGxlciA9IChldmVudCkgPT4ge1xyXG4gICAgICBjb25zdCB7IGtleSB9ID0gZXZlbnQ7XHJcbiAgICAgIHN3aXRjaCAoa2V5KSB7XHJcbiAgICAgICAgY2FzZSBcIlRhYlwiOlxyXG4gICAgICAgICAgdGhpcy5hY3RpdmVDaGlwSW5kZXggPSAtMTtcclxuICAgICAgICAgIHRoaXMuYWN0aXZlSXRlbUluZGV4ID0gLTE7XHJcbiAgICAgICAgICBpZiAodGhpcy5hbGxvd0N1c3RvbVZhbHVlcyAmJiB0aGlzLnRleHQpIHtcclxuICAgICAgICAgICAgdGhpcy5hZGRDdXN0b21DaGlwKHRoaXMudGV4dCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIGlmICh0aGlzLm9wZW4pIHtcclxuICAgICAgICAgICAgdGhpcy5vcGVuID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwiQXJyb3dMZWZ0XCI6XHJcbiAgICAgICAgICB0aGlzLnByZXZpb3VzQ2hpcCgpO1xyXG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJBcnJvd1JpZ2h0XCI6XHJcbiAgICAgICAgICB0aGlzLm5leHRDaGlwKCk7XHJcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcIkFycm93VXBcIjpcclxuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICB0aGlzLnNoaWZ0QWN0aXZlSXRlbUluZGV4KC0xKTtcclxuICAgICAgICAgIGlmICghdGhpcy5jb21ib2JveEluVmlld3BvcnQoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmVsLnNjcm9sbEludG9WaWV3KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwiQXJyb3dEb3duXCI6XHJcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgaWYgKCF0aGlzLm9wZW4pIHtcclxuICAgICAgICAgICAgdGhpcy5vcGVuID0gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRoaXMuc2hpZnRBY3RpdmVJdGVtSW5kZXgoMSk7XHJcbiAgICAgICAgICBpZiAoIXRoaXMuY29tYm9ib3hJblZpZXdwb3J0KCkpIHtcclxuICAgICAgICAgICAgdGhpcy5lbC5zY3JvbGxJbnRvVmlldygpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcIiBcIjpcclxuICAgICAgICAgIGlmICghdGhpcy50ZXh0SW5wdXQudmFsdWUpIHtcclxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy5vcGVuID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5zaGlmdEFjdGl2ZUl0ZW1JbmRleCgxKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJIb21lXCI6XHJcbiAgICAgICAgICBpZiAoIXRoaXMub3Blbikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgdGhpcy51cGRhdGVBY3RpdmVJdGVtSW5kZXgoMCk7XHJcbiAgICAgICAgICB0aGlzLnNjcm9sbFRvQWN0aXZlSXRlbSgpO1xyXG4gICAgICAgICAgaWYgKCF0aGlzLmNvbWJvYm94SW5WaWV3cG9ydCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZWwuc2Nyb2xsSW50b1ZpZXcoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJFbmRcIjpcclxuICAgICAgICAgIGlmICghdGhpcy5vcGVuKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICB0aGlzLnVwZGF0ZUFjdGl2ZUl0ZW1JbmRleCh0aGlzLmZpbHRlcmVkSXRlbXMubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgICB0aGlzLnNjcm9sbFRvQWN0aXZlSXRlbSgpO1xyXG4gICAgICAgICAgaWYgKCF0aGlzLmNvbWJvYm94SW5WaWV3cG9ydCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZWwuc2Nyb2xsSW50b1ZpZXcoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJFc2NhcGVcIjpcclxuICAgICAgICAgIHRoaXMub3BlbiA9IGZhbHNlO1xyXG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJFbnRlclwiOlxyXG4gICAgICAgICAgaWYgKHRoaXMuYWN0aXZlSXRlbUluZGV4ID4gLTEpIHtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVTZWxlY3Rpb24odGhpcy5maWx0ZXJlZEl0ZW1zW3RoaXMuYWN0aXZlSXRlbUluZGV4XSk7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIGlmICh0aGlzLmFjdGl2ZUNoaXBJbmRleCA+IC0xKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlQWN0aXZlQ2hpcCgpO1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSBpZiAodGhpcy5hbGxvd0N1c3RvbVZhbHVlcyAmJiB0aGlzLnRleHQpIHtcclxuICAgICAgICAgICAgdGhpcy5hZGRDdXN0b21DaGlwKHRoaXMudGV4dCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIGlmICghZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkge1xyXG4gICAgICAgICAgICBpZiAoc3VibWl0Rm9ybSh0aGlzKSkge1xyXG4gICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJEZWxldGVcIjpcclxuICAgICAgICBjYXNlIFwiQmFja3NwYWNlXCI6XHJcbiAgICAgICAgICBpZiAodGhpcy5hY3RpdmVDaGlwSW5kZXggPiAtMSkge1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZUFjdGl2ZUNoaXAoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2UgaWYgKCF0aGlzLnRleHQgJiYgdGhpcy5pc011bHRpKCkpIHtcclxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy5yZW1vdmVMYXN0Q2hpcCgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aGlzLnRvZ2dsZUNsb3NlRW5kID0gKCkgPT4ge1xyXG4gICAgICB0aGlzLm9wZW4gPSBmYWxzZTtcclxuICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2FsY2l0ZUNvbWJvYm94Q2xvc2VcIiwgdGhpcy50b2dnbGVDbG9zZUVuZCk7XHJcbiAgICB9O1xyXG4gICAgdGhpcy50b2dnbGVPcGVuRW5kID0gKCkgPT4ge1xyXG4gICAgICB0aGlzLm9wZW4gPSBmYWxzZTtcclxuICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2FsY2l0ZUNvbWJvYm94T3BlblwiLCB0aGlzLnRvZ2dsZU9wZW5FbmQpO1xyXG4gICAgfTtcclxuICAgIHRoaXMuc2V0TWF4U2Nyb2xsZXJIZWlnaHQgPSBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHsgbGlzdENvbnRhaW5lckVsLCBvcGVuLCByZWZlcmVuY2VFbCB9ID0gdGhpcztcclxuICAgICAgaWYgKCFsaXN0Q29udGFpbmVyRWwgfHwgIW9wZW4pIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgYXdhaXQgdGhpcy5yZXBvc2l0aW9uKHRydWUpO1xyXG4gICAgICBjb25zdCBtYXhTY3JvbGxlckhlaWdodCA9IHRoaXMuZ2V0TWF4U2Nyb2xsZXJIZWlnaHQoKTtcclxuICAgICAgbGlzdENvbnRhaW5lckVsLnN0eWxlLm1heEhlaWdodCA9IG1heFNjcm9sbGVySGVpZ2h0ID4gMCA/IGAke21heFNjcm9sbGVySGVpZ2h0fXB4YCA6IFwiXCI7XHJcbiAgICAgIGxpc3RDb250YWluZXJFbC5zdHlsZS5taW5XaWR0aCA9IGAke3JlZmVyZW5jZUVsLmNsaWVudFdpZHRofXB4YDtcclxuICAgICAgYXdhaXQgdGhpcy5yZXBvc2l0aW9uKHRydWUpO1xyXG4gICAgfTtcclxuICAgIHRoaXMuY2FsY2l0ZUNoaXBDbG9zZUhhbmRsZXIgPSAoY29tYm9ib3hJdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMub3BlbiA9IGZhbHNlO1xyXG4gICAgICBjb25zdCBzZWxlY3Rpb24gPSB0aGlzLml0ZW1zLmZpbmQoKGl0ZW0pID0+IGl0ZW0gPT09IGNvbWJvYm94SXRlbSk7XHJcbiAgICAgIGlmIChzZWxlY3Rpb24pIHtcclxuICAgICAgICB0aGlzLnRvZ2dsZVNlbGVjdGlvbihzZWxlY3Rpb24sIGZhbHNlKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmNhbGNpdGVDb21ib2JveENoaXBDbG9zZS5lbWl0KCk7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5jbGlja0hhbmRsZXIgPSAoZXZlbnQpID0+IHtcclxuICAgICAgaWYgKGV2ZW50LmNvbXBvc2VkUGF0aCgpLnNvbWUoKG5vZGUpID0+IG5vZGUudGFnTmFtZSA9PT0gXCJDQUxDSVRFLUNISVBcIikpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5vcGVuID0gIXRoaXMub3BlbjtcclxuICAgICAgdGhpcy51cGRhdGVBY3RpdmVJdGVtSW5kZXgoMCk7XHJcbiAgICAgIHRoaXMuc2V0Rm9jdXMoKTtcclxuICAgIH07XHJcbiAgICB0aGlzLnNldEluYWN0aXZlSWZOb3RDb250YWluZWQgPSAoZXZlbnQpID0+IHtcclxuICAgICAgY29uc3QgY29tcG9zZWRQYXRoID0gZXZlbnQuY29tcG9zZWRQYXRoKCk7XHJcbiAgICAgIGlmICghdGhpcy5vcGVuIHx8IGNvbXBvc2VkUGF0aC5pbmNsdWRlcyh0aGlzLmVsKSB8fCBjb21wb3NlZFBhdGguaW5jbHVkZXModGhpcy5yZWZlcmVuY2VFbCkpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMuYWxsb3dDdXN0b21WYWx1ZXMgJiYgdGhpcy50ZXh0LnRyaW0oKS5sZW5ndGgpIHtcclxuICAgICAgICB0aGlzLmFkZEN1c3RvbUNoaXAodGhpcy50ZXh0KTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5zZWxlY3Rpb25Nb2RlID09PSBcInNpbmdsZVwiKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudGV4dElucHV0KSB7XHJcbiAgICAgICAgICB0aGlzLnRleHRJbnB1dC52YWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudGV4dCA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5maWx0ZXJJdGVtcyhcIlwiKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZUFjdGl2ZUl0ZW1JbmRleCgtMSk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5vcGVuID0gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5zZXRGbG9hdGluZ0VsID0gKGVsKSA9PiB7XHJcbiAgICAgIHRoaXMuZmxvYXRpbmdFbCA9IGVsO1xyXG4gICAgICBjb25uZWN0RmxvYXRpbmdVSSh0aGlzLCB0aGlzLnJlZmVyZW5jZUVsLCB0aGlzLmZsb2F0aW5nRWwpO1xyXG4gICAgfTtcclxuICAgIHRoaXMuc2V0Q29udGFpbmVyRWwgPSAoZWwpID0+IHtcclxuICAgICAgdGhpcy5yZXNpemVPYnNlcnZlci5vYnNlcnZlKGVsKTtcclxuICAgICAgdGhpcy5saXN0Q29udGFpbmVyRWwgPSBlbDtcclxuICAgICAgdGhpcy50cmFuc2l0aW9uRWwgPSBlbDtcclxuICAgICAgY29ubmVjdE9wZW5DbG9zZUNvbXBvbmVudCh0aGlzKTtcclxuICAgIH07XHJcbiAgICB0aGlzLnNldFJlZmVyZW5jZUVsID0gKGVsKSA9PiB7XHJcbiAgICAgIHRoaXMucmVmZXJlbmNlRWwgPSBlbDtcclxuICAgICAgY29ubmVjdEZsb2F0aW5nVUkodGhpcywgdGhpcy5yZWZlcmVuY2VFbCwgdGhpcy5mbG9hdGluZ0VsKTtcclxuICAgIH07XHJcbiAgICB0aGlzLmlucHV0SGFuZGxlciA9IChldmVudCkgPT4ge1xyXG4gICAgICBjb25zdCB2YWx1ZSA9IGV2ZW50LnRhcmdldC52YWx1ZTtcclxuICAgICAgdGhpcy50ZXh0ID0gdmFsdWU7XHJcbiAgICAgIHRoaXMuZmlsdGVySXRlbXModmFsdWUpO1xyXG4gICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICB0aGlzLmFjdGl2ZUNoaXBJbmRleCA9IC0xO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhpcy5maWx0ZXJJdGVtcyA9ICgoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGZpbmQgPSAoaXRlbSwgZmlsdGVyZWREYXRhKSA9PiBpdGVtICYmXHJcbiAgICAgICAgZmlsdGVyZWREYXRhLnNvbWUoKHsgbGFiZWwsIHZhbHVlIH0pID0+IHtcclxuICAgICAgICAgIGlmIChpc0dyb3VwKGl0ZW0pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZSA9PT0gaXRlbS5sYWJlbDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiAodmFsdWUgPT09IGl0ZW0udGV4dExhYmVsIHx8XHJcbiAgICAgICAgICAgIHZhbHVlID09PSBpdGVtLnZhbHVlIHx8XHJcbiAgICAgICAgICAgIGxhYmVsID09PSBpdGVtLnRleHRMYWJlbCB8fFxyXG4gICAgICAgICAgICBsYWJlbCA9PT0gaXRlbS52YWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBkZWJvdW5jZSgodGV4dCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGZpbHRlcmVkRGF0YSA9IGZpbHRlcih0aGlzLmRhdGEsIHRleHQpO1xyXG4gICAgICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5nZXRDb21iaW5lZEl0ZW1zKCk7XHJcbiAgICAgICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgaGlkZGVuID0gIWZpbmQoaXRlbSwgZmlsdGVyZWREYXRhKTtcclxuICAgICAgICAgIGl0ZW0uaGlkZGVuID0gaGlkZGVuO1xyXG4gICAgICAgICAgY29uc3QgW3BhcmVudCwgZ3JhbmRwYXJlbnRdID0gaXRlbS5hbmNlc3RvcnM7XHJcbiAgICAgICAgICBpZiAoZmluZChwYXJlbnQsIGZpbHRlcmVkRGF0YSkgfHwgZmluZChncmFuZHBhcmVudCwgZmlsdGVyZWREYXRhKSkge1xyXG4gICAgICAgICAgICBpdGVtLmhpZGRlbiA9IGZhbHNlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKCFoaWRkZW4pIHtcclxuICAgICAgICAgICAgaXRlbS5hbmNlc3RvcnMuZm9yRWFjaCgoYW5jZXN0b3IpID0+IChhbmNlc3Rvci5oaWRkZW4gPSBmYWxzZSkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZmlsdGVyZWRJdGVtcyA9IHRoaXMuZ2V0ZmlsdGVyZWRJdGVtcygpO1xyXG4gICAgICAgIHRoaXMuY2FsY2l0ZUNvbWJvYm94RmlsdGVyQ2hhbmdlLmVtaXQoKTtcclxuICAgICAgfSwgMTAwKTtcclxuICAgIH0pKCk7XHJcbiAgICB0aGlzLmludGVybmFsQ29tYm9ib3hDaGFuZ2VFdmVudCA9ICgpID0+IHtcclxuICAgICAgdGhpcy5jYWxjaXRlQ29tYm9ib3hDaGFuZ2UuZW1pdCgpO1xyXG4gICAgfTtcclxuICAgIHRoaXMuZW1pdENvbWJvYm94Q2hhbmdlID0gZGVib3VuY2UodGhpcy5pbnRlcm5hbENvbWJvYm94Q2hhbmdlRXZlbnQsIDApO1xyXG4gICAgdGhpcy51cGRhdGVJdGVtcyA9ICgpID0+IHtcclxuICAgICAgdGhpcy5pdGVtcyA9IHRoaXMuZ2V0SXRlbXMoKTtcclxuICAgICAgdGhpcy5ncm91cEl0ZW1zID0gdGhpcy5nZXRHcm91cEl0ZW1zKCk7XHJcbiAgICAgIHRoaXMuZGF0YSA9IHRoaXMuZ2V0RGF0YSgpO1xyXG4gICAgICB0aGlzLnNlbGVjdGVkSXRlbXMgPSB0aGlzLmdldFNlbGVjdGVkSXRlbXMoKTtcclxuICAgICAgdGhpcy5maWx0ZXJlZEl0ZW1zID0gdGhpcy5nZXRmaWx0ZXJlZEl0ZW1zKCk7XHJcbiAgICAgIHRoaXMubmVlZHNJY29uID0gdGhpcy5nZXROZWVkc0ljb24oKTtcclxuICAgICAgaWYgKCF0aGlzLmFsbG93Q3VzdG9tVmFsdWVzKSB7XHJcbiAgICAgICAgdGhpcy5zZXRNYXhTY3JvbGxlckhlaWdodCgpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhpcy5zY3JvbGxUb0FjdGl2ZUl0ZW0gPSAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGFjdGl2ZUl0ZW0gPSB0aGlzLmZpbHRlcmVkSXRlbXNbdGhpcy5hY3RpdmVJdGVtSW5kZXhdO1xyXG4gICAgICBpZiAoIWFjdGl2ZUl0ZW0pIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgaGVpZ2h0ID0gdGhpcy5jYWxjdWxhdGVTaW5nbGVJdGVtSGVpZ2h0KGFjdGl2ZUl0ZW0pO1xyXG4gICAgICBjb25zdCB7IG9mZnNldEhlaWdodCwgc2Nyb2xsVG9wIH0gPSB0aGlzLmxpc3RDb250YWluZXJFbDtcclxuICAgICAgaWYgKG9mZnNldEhlaWdodCArIHNjcm9sbFRvcCA8IGFjdGl2ZUl0ZW0ub2Zmc2V0VG9wICsgaGVpZ2h0KSB7XHJcbiAgICAgICAgdGhpcy5saXN0Q29udGFpbmVyRWwuc2Nyb2xsVG9wID0gYWN0aXZlSXRlbS5vZmZzZXRUb3AgLSBvZmZzZXRIZWlnaHQgKyBoZWlnaHQ7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAoYWN0aXZlSXRlbS5vZmZzZXRUb3AgPCBzY3JvbGxUb3ApIHtcclxuICAgICAgICB0aGlzLmxpc3RDb250YWluZXJFbC5zY3JvbGxUb3AgPSBhY3RpdmVJdGVtLm9mZnNldFRvcDtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRoaXMuY29tYm9ib3hGb2N1c0hhbmRsZXIgPSAoKSA9PiB7XHJcbiAgICAgIHRoaXMudGV4dElucHV0Py5mb2N1cygpO1xyXG4gICAgfTtcclxuICAgIHRoaXMuY29tYm9ib3hCbHVySGFuZGxlciA9IChldmVudCkgPT4ge1xyXG4gICAgICB0aGlzLnNldEluYWN0aXZlSWZOb3RDb250YWluZWQoZXZlbnQpO1xyXG4gICAgfTtcclxuICAgIHRoaXMub3BlbiA9IGZhbHNlO1xyXG4gICAgdGhpcy5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5sYWJlbCA9IHVuZGVmaW5lZDtcclxuICAgIHRoaXMucGxhY2Vob2xkZXIgPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLnBsYWNlaG9sZGVySWNvbiA9IHVuZGVmaW5lZDtcclxuICAgIHRoaXMucGxhY2Vob2xkZXJJY29uRmxpcFJ0bCA9IGZhbHNlO1xyXG4gICAgdGhpcy5tYXhJdGVtcyA9IDA7XHJcbiAgICB0aGlzLm5hbWUgPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLmFsbG93Q3VzdG9tVmFsdWVzID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5vdmVybGF5UG9zaXRpb25pbmcgPSBcImFic29sdXRlXCI7XHJcbiAgICB0aGlzLnJlcXVpcmVkID0gZmFsc2U7XHJcbiAgICB0aGlzLnNlbGVjdGlvbk1vZGUgPSBcIm11bHRpcGxlXCI7XHJcbiAgICB0aGlzLnNjYWxlID0gXCJtXCI7XHJcbiAgICB0aGlzLnZhbHVlID0gbnVsbDtcclxuICAgIHRoaXMuZmxpcFBsYWNlbWVudHMgPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLm1lc3NhZ2VzID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5tZXNzYWdlT3ZlcnJpZGVzID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5zZWxlY3RlZEl0ZW1zID0gW107XHJcbiAgICB0aGlzLmZpbHRlcmVkSXRlbXMgPSBbXTtcclxuICAgIHRoaXMuaXRlbXMgPSBbXTtcclxuICAgIHRoaXMuZ3JvdXBJdGVtcyA9IFtdO1xyXG4gICAgdGhpcy5uZWVkc0ljb24gPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLmFjdGl2ZUl0ZW1JbmRleCA9IC0xO1xyXG4gICAgdGhpcy5hY3RpdmVDaGlwSW5kZXggPSAtMTtcclxuICAgIHRoaXMuYWN0aXZlRGVzY2VuZGFudCA9IFwiXCI7XHJcbiAgICB0aGlzLnRleHQgPSBcIlwiO1xyXG4gICAgdGhpcy5lZmZlY3RpdmVMb2NhbGUgPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLmRlZmF1bHRNZXNzYWdlcyA9IHVuZGVmaW5lZDtcclxuICB9XHJcbiAgb3BlbkhhbmRsZXIodmFsdWUpIHtcclxuICAgIGlmICghdmFsdWUpIHtcclxuICAgICAgdXBkYXRlQWZ0ZXJDbG9zZSh0aGlzLmZsb2F0aW5nRWwpO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuZGlzYWJsZWQpIHtcclxuICAgICAgdGhpcy5vcGVuID0gZmFsc2U7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRoaXMuc2V0TWF4U2Nyb2xsZXJIZWlnaHQoKTtcclxuICB9XHJcbiAgaGFuZGxlRGlzYWJsZWRDaGFuZ2UodmFsdWUpIHtcclxuICAgIGlmICghdmFsdWUpIHtcclxuICAgICAgdGhpcy5vcGVuID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG4gIG1heEl0ZW1zSGFuZGxlcigpIHtcclxuICAgIHRoaXMuc2V0TWF4U2Nyb2xsZXJIZWlnaHQoKTtcclxuICB9XHJcbiAgb3ZlcmxheVBvc2l0aW9uaW5nSGFuZGxlcigpIHtcclxuICAgIHRoaXMucmVwb3NpdGlvbih0cnVlKTtcclxuICB9XHJcbiAgdmFsdWVIYW5kbGVyKHZhbHVlKSB7XHJcbiAgICBpZiAoIXRoaXMuaW50ZXJuYWxWYWx1ZUNoYW5nZUZsYWcpIHtcclxuICAgICAgY29uc3QgaXRlbXMgPSB0aGlzLmdldEl0ZW1zKCk7XHJcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICAgIGl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IChpdGVtLnNlbGVjdGVkID0gdmFsdWUuaW5jbHVkZXMoaXRlbS52YWx1ZSkpKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmICh2YWx1ZSkge1xyXG4gICAgICAgIGl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IChpdGVtLnNlbGVjdGVkID0gdmFsdWUgPT09IGl0ZW0udmFsdWUpKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBpdGVtcy5mb3JFYWNoKChpdGVtKSA9PiAoaXRlbS5zZWxlY3RlZCA9IGZhbHNlKSk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy51cGRhdGVJdGVtcygpO1xyXG4gICAgfVxyXG4gIH1cclxuICBvbk1lc3NhZ2VzQ2hhbmdlKCkge1xyXG4gICAgLyogIHdpcmVkIHVwIGJ5IHQ5biB1dGlsICovXHJcbiAgfVxyXG4gIGZsaXBQbGFjZW1lbnRzSGFuZGxlcigpIHtcclxuICAgIHRoaXMuc2V0RmlsdGVyZWRQbGFjZW1lbnRzKCk7XHJcbiAgICB0aGlzLnJlcG9zaXRpb24odHJ1ZSk7XHJcbiAgfVxyXG4gIHNlbGVjdGVkSXRlbXNIYW5kbGVyKCkge1xyXG4gICAgdGhpcy5pbnRlcm5hbFZhbHVlQ2hhbmdlRmxhZyA9IHRydWU7XHJcbiAgICB0aGlzLnZhbHVlID0gdGhpcy5nZXRWYWx1ZSgpO1xyXG4gICAgdGhpcy5pbnRlcm5hbFZhbHVlQ2hhbmdlRmxhZyA9IGZhbHNlO1xyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyAgRXZlbnQgTGlzdGVuZXJzXHJcbiAgLy9cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgZG9jdW1lbnRDbGlja0hhbmRsZXIoZXZlbnQpIHtcclxuICAgIGlmICghaXNQcmltYXJ5UG9pbnRlckJ1dHRvbihldmVudCkpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5zZXRJbmFjdGl2ZUlmTm90Q29udGFpbmVkKGV2ZW50KTtcclxuICB9XHJcbiAgY2FsY2l0ZUNvbWJvYm94SXRlbUNoYW5nZUhhbmRsZXIoZXZlbnQpIHtcclxuICAgIGlmICh0aGlzLmlnbm9yZVNlbGVjdGVkRXZlbnRzRmxhZykge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQ7XHJcbiAgICBjb25zdCBuZXdJbmRleCA9IHRoaXMuZmlsdGVyZWRJdGVtcy5pbmRleE9mKHRhcmdldCk7XHJcbiAgICB0aGlzLnVwZGF0ZUFjdGl2ZUl0ZW1JbmRleChuZXdJbmRleCk7XHJcbiAgICB0aGlzLnRvZ2dsZVNlbGVjdGlvbih0YXJnZXQsIHRhcmdldC5zZWxlY3RlZCk7XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vICBQdWJsaWMgTWV0aG9kc1xyXG4gIC8vXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8qKlxyXG4gICAqIFVwZGF0ZXMgdGhlIHBvc2l0aW9uIG9mIHRoZSBjb21wb25lbnQuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gZGVsYXllZFxyXG4gICAqL1xyXG4gIGFzeW5jIHJlcG9zaXRpb24oZGVsYXllZCA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCB7IGZsb2F0aW5nRWwsIHJlZmVyZW5jZUVsLCBwbGFjZW1lbnQsIG92ZXJsYXlQb3NpdGlvbmluZywgZmlsdGVyZWRGbGlwUGxhY2VtZW50cyB9ID0gdGhpcztcclxuICAgIHJldHVybiByZXBvc2l0aW9uKHRoaXMsIHtcclxuICAgICAgZmxvYXRpbmdFbCxcclxuICAgICAgcmVmZXJlbmNlRWwsXHJcbiAgICAgIG92ZXJsYXlQb3NpdGlvbmluZyxcclxuICAgICAgcGxhY2VtZW50LFxyXG4gICAgICBmbGlwUGxhY2VtZW50czogZmlsdGVyZWRGbGlwUGxhY2VtZW50cyxcclxuICAgICAgdHlwZTogXCJtZW51XCJcclxuICAgIH0sIGRlbGF5ZWQpO1xyXG4gIH1cclxuICAvKiogU2V0cyBmb2N1cyBvbiB0aGUgY29tcG9uZW50LiAqL1xyXG4gIGFzeW5jIHNldEZvY3VzKCkge1xyXG4gICAgYXdhaXQgY29tcG9uZW50TG9hZGVkKHRoaXMpO1xyXG4gICAgdGhpcy50ZXh0SW5wdXQ/LmZvY3VzKCk7XHJcbiAgICB0aGlzLmFjdGl2ZUNoaXBJbmRleCA9IC0xO1xyXG4gICAgdGhpcy5hY3RpdmVJdGVtSW5kZXggPSAtMTtcclxuICB9XHJcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vICBMaWZlY3ljbGVcclxuICAvL1xyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XHJcbiAgICBjb25uZWN0TG9jYWxpemVkKHRoaXMpO1xyXG4gICAgY29ubmVjdE1lc3NhZ2VzKHRoaXMpO1xyXG4gICAgdGhpcy5pbnRlcm5hbFZhbHVlQ2hhbmdlRmxhZyA9IHRydWU7XHJcbiAgICB0aGlzLnZhbHVlID0gdGhpcy5nZXRWYWx1ZSgpO1xyXG4gICAgdGhpcy5pbnRlcm5hbFZhbHVlQ2hhbmdlRmxhZyA9IGZhbHNlO1xyXG4gICAgdGhpcy5tdXRhdGlvbk9ic2VydmVyPy5vYnNlcnZlKHRoaXMuZWwsIHsgY2hpbGRMaXN0OiB0cnVlLCBzdWJ0cmVlOiB0cnVlIH0pO1xyXG4gICAgY29ubmVjdExhYmVsKHRoaXMpO1xyXG4gICAgY29ubmVjdEZvcm0odGhpcyk7XHJcbiAgICBjb25uZWN0T3BlbkNsb3NlQ29tcG9uZW50KHRoaXMpO1xyXG4gICAgdGhpcy5zZXRGaWx0ZXJlZFBsYWNlbWVudHMoKTtcclxuICAgIHRoaXMucmVwb3NpdGlvbih0cnVlKTtcclxuICAgIGlmICh0aGlzLm9wZW4pIHtcclxuICAgICAgdGhpcy5vcGVuSGFuZGxlcih0aGlzLm9wZW4pO1xyXG4gICAgfVxyXG4gIH1cclxuICBhc3luYyBjb21wb25lbnRXaWxsTG9hZCgpIHtcclxuICAgIHNldFVwTG9hZGFibGVDb21wb25lbnQodGhpcyk7XHJcbiAgICB0aGlzLnVwZGF0ZUl0ZW1zKCk7XHJcbiAgICBhd2FpdCBzZXRVcE1lc3NhZ2VzKHRoaXMpO1xyXG4gIH1cclxuICBjb21wb25lbnREaWRMb2FkKCkge1xyXG4gICAgYWZ0ZXJDb25uZWN0RGVmYXVsdFZhbHVlU2V0KHRoaXMsIHRoaXMuZ2V0VmFsdWUoKSk7XHJcbiAgICB0aGlzLnJlcG9zaXRpb24odHJ1ZSk7XHJcbiAgICBzZXRDb21wb25lbnRMb2FkZWQodGhpcyk7XHJcbiAgfVxyXG4gIGNvbXBvbmVudERpZFJlbmRlcigpIHtcclxuICAgIGlmICh0aGlzLmVsLm9mZnNldEhlaWdodCAhPT0gdGhpcy5pbnB1dEhlaWdodCkge1xyXG4gICAgICB0aGlzLnJlcG9zaXRpb24odHJ1ZSk7XHJcbiAgICAgIHRoaXMuaW5wdXRIZWlnaHQgPSB0aGlzLmVsLm9mZnNldEhlaWdodDtcclxuICAgIH1cclxuICAgIHVwZGF0ZUhvc3RJbnRlcmFjdGlvbih0aGlzKTtcclxuICB9XHJcbiAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XHJcbiAgICB0aGlzLm11dGF0aW9uT2JzZXJ2ZXI/LmRpc2Nvbm5lY3QoKTtcclxuICAgIHRoaXMucmVzaXplT2JzZXJ2ZXI/LmRpc2Nvbm5lY3QoKTtcclxuICAgIGRpc2Nvbm5lY3RMYWJlbCh0aGlzKTtcclxuICAgIGRpc2Nvbm5lY3RGb3JtKHRoaXMpO1xyXG4gICAgZGlzY29ubmVjdEZsb2F0aW5nVUkodGhpcywgdGhpcy5yZWZlcmVuY2VFbCwgdGhpcy5mbG9hdGluZ0VsKTtcclxuICAgIGRpc2Nvbm5lY3RPcGVuQ2xvc2VDb21wb25lbnQodGhpcyk7XHJcbiAgICBkaXNjb25uZWN0TG9jYWxpemVkKHRoaXMpO1xyXG4gICAgZGlzY29ubmVjdE1lc3NhZ2VzKHRoaXMpO1xyXG4gIH1cclxuICAvKiogd2hlbiBzZWFyY2ggdGV4dCBpcyBjbGVhcmVkLCByZXNldCBhY3RpdmUgdG8gICovXHJcbiAgdGV4dEhhbmRsZXIoKSB7XHJcbiAgICB0aGlzLnVwZGF0ZUFjdGl2ZUl0ZW1JbmRleCgtMSk7XHJcbiAgfVxyXG4gIGVmZmVjdGl2ZUxvY2FsZUNoYW5nZSgpIHtcclxuICAgIHVwZGF0ZU1lc3NhZ2VzKHRoaXMsIHRoaXMuZWZmZWN0aXZlTG9jYWxlKTtcclxuICB9XHJcbiAgY29tYm9ib3hJblZpZXdwb3J0KCkge1xyXG4gICAgY29uc3QgYm91bmRpbmcgPSB0aGlzLmVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgcmV0dXJuIChib3VuZGluZy50b3AgPj0gMCAmJlxyXG4gICAgICBib3VuZGluZy5sZWZ0ID49IDAgJiZcclxuICAgICAgYm91bmRpbmcucmlnaHQgPD0gKHdpbmRvdy5pbm5lcldpZHRoIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCkgJiZcclxuICAgICAgYm91bmRpbmcuYm90dG9tIDw9ICh3aW5kb3cuaW5uZXJIZWlnaHQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCkpO1xyXG4gIH1cclxuICBvbkJlZm9yZU9wZW4oKSB7XHJcbiAgICB0aGlzLmNhbGNpdGVDb21ib2JveEJlZm9yZU9wZW4uZW1pdCgpO1xyXG4gIH1cclxuICBvbk9wZW4oKSB7XHJcbiAgICB0aGlzLmNhbGNpdGVDb21ib2JveE9wZW4uZW1pdCgpO1xyXG4gIH1cclxuICBvbkJlZm9yZUNsb3NlKCkge1xyXG4gICAgdGhpcy5jYWxjaXRlQ29tYm9ib3hCZWZvcmVDbG9zZS5lbWl0KCk7XHJcbiAgfVxyXG4gIG9uQ2xvc2UoKSB7XHJcbiAgICB0aGlzLmNhbGNpdGVDb21ib2JveENsb3NlLmVtaXQoKTtcclxuICB9XHJcbiAgZ2V0TWF4U2Nyb2xsZXJIZWlnaHQoKSB7XHJcbiAgICBjb25zdCBpdGVtcyA9IHRoaXMuZ2V0Q29tYmluZWRJdGVtcygpLmZpbHRlcigoaXRlbSkgPT4gIWl0ZW0uaGlkZGVuKTtcclxuICAgIGNvbnN0IHsgbWF4SXRlbXMgfSA9IHRoaXM7XHJcbiAgICBsZXQgaXRlbXNUb1Byb2Nlc3MgPSAwO1xyXG4gICAgbGV0IG1heFNjcm9sbGVySGVpZ2h0ID0gMDtcclxuICAgIGlmIChpdGVtcy5sZW5ndGggPiBtYXhJdGVtcykge1xyXG4gICAgICBpdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgaWYgKGl0ZW1zVG9Qcm9jZXNzIDwgbWF4SXRlbXMgJiYgbWF4SXRlbXMgPiAwKSB7XHJcbiAgICAgICAgICBjb25zdCBoZWlnaHQgPSB0aGlzLmNhbGN1bGF0ZVNpbmdsZUl0ZW1IZWlnaHQoaXRlbSk7XHJcbiAgICAgICAgICBpZiAoaGVpZ2h0ID4gMCkge1xyXG4gICAgICAgICAgICBtYXhTY3JvbGxlckhlaWdodCArPSBoZWlnaHQ7XHJcbiAgICAgICAgICAgIGl0ZW1zVG9Qcm9jZXNzKys7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBtYXhTY3JvbGxlckhlaWdodDtcclxuICB9XHJcbiAgY2FsY3VsYXRlU2luZ2xlSXRlbUhlaWdodChpdGVtKSB7XHJcbiAgICBpZiAoIWl0ZW0pIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgbGV0IGhlaWdodCA9IGl0ZW0ub2Zmc2V0SGVpZ2h0O1xyXG4gICAgLy8gaWYgaXRlbSBoYXMgY2hpbGRyZW4gaXRlbXMsIGRvbid0IGNvdW50IHRoZWlyIGhlaWdodCB0d2ljZVxyXG4gICAgY29uc3QgY2hpbGRyZW4gPSBBcnJheS5mcm9tKGl0ZW0ucXVlcnlTZWxlY3RvckFsbChDb21ib2JveENoaWxkU2VsZWN0b3IpKTtcclxuICAgIGNoaWxkcmVuXHJcbiAgICAgIC5tYXAoKGNoaWxkKSA9PiBjaGlsZD8ub2Zmc2V0SGVpZ2h0KVxyXG4gICAgICAuZm9yRWFjaCgob2Zmc2V0SGVpZ2h0KSA9PiB7XHJcbiAgICAgIGhlaWdodCAtPSBvZmZzZXRIZWlnaHQ7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBoZWlnaHQ7XHJcbiAgfVxyXG4gIGdldENvbWJpbmVkSXRlbXMoKSB7XHJcbiAgICByZXR1cm4gWy4uLnRoaXMuZ3JvdXBJdGVtcywgLi4udGhpcy5pdGVtc107XHJcbiAgfVxyXG4gIHRvZ2dsZVNlbGVjdGlvbihpdGVtLCB2YWx1ZSA9ICFpdGVtLnNlbGVjdGVkKSB7XHJcbiAgICBpZiAoIWl0ZW0pIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuaXNNdWx0aSgpKSB7XHJcbiAgICAgIGl0ZW0uc2VsZWN0ZWQgPSB2YWx1ZTtcclxuICAgICAgdGhpcy51cGRhdGVBbmNlc3RvcnMoaXRlbSk7XHJcbiAgICAgIHRoaXMuc2VsZWN0ZWRJdGVtcyA9IHRoaXMuZ2V0U2VsZWN0ZWRJdGVtcygpO1xyXG4gICAgICB0aGlzLmVtaXRDb21ib2JveENoYW5nZSgpO1xyXG4gICAgICB0aGlzLnJlc2V0VGV4dCgpO1xyXG4gICAgICB0aGlzLmZpbHRlckl0ZW1zKFwiXCIpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHRoaXMuaWdub3JlU2VsZWN0ZWRFdmVudHNGbGFnID0gdHJ1ZTtcclxuICAgICAgdGhpcy5pdGVtcy5mb3JFYWNoKChlbCkgPT4gKGVsLnNlbGVjdGVkID0gZWwgPT09IGl0ZW0gPyB2YWx1ZSA6IGZhbHNlKSk7XHJcbiAgICAgIHRoaXMuaWdub3JlU2VsZWN0ZWRFdmVudHNGbGFnID0gZmFsc2U7XHJcbiAgICAgIHRoaXMuc2VsZWN0ZWRJdGVtcyA9IHRoaXMuZ2V0U2VsZWN0ZWRJdGVtcygpO1xyXG4gICAgICB0aGlzLmVtaXRDb21ib2JveENoYW5nZSgpO1xyXG4gICAgICBpZiAodGhpcy50ZXh0SW5wdXQpIHtcclxuICAgICAgICB0aGlzLnRleHRJbnB1dC52YWx1ZSA9IGl0ZW0udGV4dExhYmVsO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMub3BlbiA9IGZhbHNlO1xyXG4gICAgICB0aGlzLnVwZGF0ZUFjdGl2ZUl0ZW1JbmRleCgtMSk7XHJcbiAgICAgIHRoaXMucmVzZXRUZXh0KCk7XHJcbiAgICAgIHRoaXMuZmlsdGVySXRlbXMoXCJcIik7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHVwZGF0ZUFuY2VzdG9ycyhpdGVtKSB7XHJcbiAgICBpZiAodGhpcy5zZWxlY3Rpb25Nb2RlICE9PSBcImFuY2VzdG9yc1wiKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IGFuY2VzdG9ycyA9IGdldEl0ZW1BbmNlc3RvcnMoaXRlbSk7XHJcbiAgICBjb25zdCBjaGlsZHJlbiA9IGdldEl0ZW1DaGlsZHJlbihpdGVtKTtcclxuICAgIGlmIChpdGVtLnNlbGVjdGVkKSB7XHJcbiAgICAgIGFuY2VzdG9ycy5mb3JFYWNoKChlbCkgPT4ge1xyXG4gICAgICAgIGVsLnNlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgY2hpbGRyZW4uZm9yRWFjaCgoZWwpID0+IChlbC5zZWxlY3RlZCA9IGZhbHNlKSk7XHJcbiAgICAgIFsuLi5hbmNlc3RvcnNdLmZvckVhY2goKGVsKSA9PiB7XHJcbiAgICAgICAgaWYgKCFoYXNBY3RpdmVDaGlsZHJlbihlbCkpIHtcclxuICAgICAgICAgIGVsLnNlbGVjdGVkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcbiAgZ2V0ZmlsdGVyZWRJdGVtcygpIHtcclxuICAgIHJldHVybiB0aGlzLml0ZW1zLmZpbHRlcigoaXRlbSkgPT4gIWl0ZW0uaGlkZGVuKTtcclxuICB9XHJcbiAgZ2V0U2VsZWN0ZWRJdGVtcygpIHtcclxuICAgIGlmICghdGhpcy5pc011bHRpKCkpIHtcclxuICAgICAgY29uc3QgbWF0Y2ggPSB0aGlzLml0ZW1zLmZpbmQoKHsgc2VsZWN0ZWQgfSkgPT4gc2VsZWN0ZWQpO1xyXG4gICAgICByZXR1cm4gbWF0Y2ggPyBbbWF0Y2hdIDogW107XHJcbiAgICB9XHJcbiAgICByZXR1cm4gKHRoaXMuaXRlbXNcclxuICAgICAgLmZpbHRlcigoaXRlbSkgPT4gaXRlbS5zZWxlY3RlZCAmJiAodGhpcy5zZWxlY3Rpb25Nb2RlICE9PSBcImFuY2VzdG9yc1wiIHx8ICFoYXNBY3RpdmVDaGlsZHJlbihpdGVtKSkpXHJcbiAgICAgIC8qKiBQcmVzZXJ2ZSBvcmRlciBvZiBlbnRlcmVkIHRhZ3MgKi9cclxuICAgICAgLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgY29uc3QgYUlkeCA9IHRoaXMuc2VsZWN0ZWRJdGVtcy5pbmRleE9mKGEpO1xyXG4gICAgICBjb25zdCBiSWR4ID0gdGhpcy5zZWxlY3RlZEl0ZW1zLmluZGV4T2YoYik7XHJcbiAgICAgIGlmIChhSWR4ID4gLTEgJiYgYklkeCA+IC0xKSB7XHJcbiAgICAgICAgcmV0dXJuIGFJZHggLSBiSWR4O1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBiSWR4IC0gYUlkeDtcclxuICAgIH0pKTtcclxuICB9XHJcbiAgZ2V0RGF0YSgpIHtcclxuICAgIHJldHVybiB0aGlzLml0ZW1zLm1hcCgoaXRlbSkgPT4gKHtcclxuICAgICAgZmlsdGVyRGlzYWJsZWQ6IGl0ZW0uZmlsdGVyRGlzYWJsZWQsXHJcbiAgICAgIHZhbHVlOiBpdGVtLnZhbHVlLFxyXG4gICAgICBsYWJlbDogaXRlbS50ZXh0TGFiZWxcclxuICAgIH0pKTtcclxuICB9XHJcbiAgZ2V0TmVlZHNJY29uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuc2VsZWN0aW9uTW9kZSA9PT0gXCJzaW5nbGVcIiAmJiB0aGlzLml0ZW1zLnNvbWUoKGl0ZW0pID0+IGl0ZW0uaWNvbik7XHJcbiAgfVxyXG4gIHJlc2V0VGV4dCgpIHtcclxuICAgIGlmICh0aGlzLnRleHRJbnB1dCkge1xyXG4gICAgICB0aGlzLnRleHRJbnB1dC52YWx1ZSA9IFwiXCI7XHJcbiAgICB9XHJcbiAgICB0aGlzLnRleHQgPSBcIlwiO1xyXG4gIH1cclxuICBnZXRJdGVtcygpIHtcclxuICAgIGNvbnN0IGl0ZW1zID0gQXJyYXkuZnJvbSh0aGlzLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoQ29tYm9ib3hJdGVtKSk7XHJcbiAgICByZXR1cm4gaXRlbXMuZmlsdGVyKChpdGVtKSA9PiAhaXRlbS5kaXNhYmxlZCk7XHJcbiAgfVxyXG4gIGdldEdyb3VwSXRlbXMoKSB7XHJcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoQ29tYm9ib3hJdGVtR3JvdXApKTtcclxuICB9XHJcbiAgYWRkQ3VzdG9tQ2hpcCh2YWx1ZSwgZm9jdXMpIHtcclxuICAgIGNvbnN0IGV4aXN0aW5nSXRlbSA9IHRoaXMuaXRlbXMuZmluZCgoZWwpID0+IGVsLnRleHRMYWJlbCA9PT0gdmFsdWUpO1xyXG4gICAgaWYgKGV4aXN0aW5nSXRlbSkge1xyXG4gICAgICB0aGlzLnRvZ2dsZVNlbGVjdGlvbihleGlzdGluZ0l0ZW0sIHRydWUpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIGlmICghdGhpcy5pc011bHRpKCkpIHtcclxuICAgICAgICB0aGlzLnRvZ2dsZVNlbGVjdGlvbih0aGlzLnNlbGVjdGVkSXRlbXNbdGhpcy5zZWxlY3RlZEl0ZW1zLmxlbmd0aCAtIDFdLCBmYWxzZSk7XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgaXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoQ29tYm9ib3hJdGVtKTtcclxuICAgICAgaXRlbS52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICBpdGVtLnRleHRMYWJlbCA9IHZhbHVlO1xyXG4gICAgICBpdGVtLnNlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgdGhpcy5lbC5hcHBlbmRDaGlsZChpdGVtKTtcclxuICAgICAgdGhpcy5yZXNldFRleHQoKTtcclxuICAgICAgaWYgKGZvY3VzKSB7XHJcbiAgICAgICAgdGhpcy5zZXRGb2N1cygpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMudXBkYXRlSXRlbXMoKTtcclxuICAgICAgdGhpcy5maWx0ZXJJdGVtcyhcIlwiKTtcclxuICAgICAgdGhpcy5lbWl0Q29tYm9ib3hDaGFuZ2UoKTtcclxuICAgIH1cclxuICB9XHJcbiAgcmVtb3ZlQWN0aXZlQ2hpcCgpIHtcclxuICAgIHRoaXMudG9nZ2xlU2VsZWN0aW9uKHRoaXMuc2VsZWN0ZWRJdGVtc1t0aGlzLmFjdGl2ZUNoaXBJbmRleF0sIGZhbHNlKTtcclxuICAgIHRoaXMuc2V0Rm9jdXMoKTtcclxuICB9XHJcbiAgcmVtb3ZlTGFzdENoaXAoKSB7XHJcbiAgICB0aGlzLnRvZ2dsZVNlbGVjdGlvbih0aGlzLnNlbGVjdGVkSXRlbXNbdGhpcy5zZWxlY3RlZEl0ZW1zLmxlbmd0aCAtIDFdLCBmYWxzZSk7XHJcbiAgICB0aGlzLnNldEZvY3VzKCk7XHJcbiAgfVxyXG4gIHByZXZpb3VzQ2hpcCgpIHtcclxuICAgIGlmICh0aGlzLnRleHQpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbGVuZ3RoID0gdGhpcy5zZWxlY3RlZEl0ZW1zLmxlbmd0aCAtIDE7XHJcbiAgICBjb25zdCBhY3RpdmUgPSB0aGlzLmFjdGl2ZUNoaXBJbmRleDtcclxuICAgIHRoaXMuYWN0aXZlQ2hpcEluZGV4ID0gYWN0aXZlID09PSAtMSA/IGxlbmd0aCA6IE1hdGgubWF4KGFjdGl2ZSAtIDEsIDApO1xyXG4gICAgdGhpcy51cGRhdGVBY3RpdmVJdGVtSW5kZXgoLTEpO1xyXG4gICAgdGhpcy5mb2N1c0NoaXAoKTtcclxuICB9XHJcbiAgbmV4dENoaXAoKSB7XHJcbiAgICBpZiAodGhpcy50ZXh0IHx8IHRoaXMuYWN0aXZlQ2hpcEluZGV4ID09PSAtMSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBsYXN0ID0gdGhpcy5zZWxlY3RlZEl0ZW1zLmxlbmd0aCAtIDE7XHJcbiAgICBjb25zdCBuZXdJbmRleCA9IHRoaXMuYWN0aXZlQ2hpcEluZGV4ICsgMTtcclxuICAgIGlmIChuZXdJbmRleCA+IGxhc3QpIHtcclxuICAgICAgdGhpcy5hY3RpdmVDaGlwSW5kZXggPSAtMTtcclxuICAgICAgdGhpcy5zZXRGb2N1cygpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHRoaXMuYWN0aXZlQ2hpcEluZGV4ID0gbmV3SW5kZXg7XHJcbiAgICAgIHRoaXMuZm9jdXNDaGlwKCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnVwZGF0ZUFjdGl2ZUl0ZW1JbmRleCgtMSk7XHJcbiAgfVxyXG4gIGZvY3VzQ2hpcCgpIHtcclxuICAgIGNvbnN0IGd1aWQgPSB0aGlzLnNlbGVjdGVkSXRlbXNbdGhpcy5hY3RpdmVDaGlwSW5kZXhdPy5ndWlkO1xyXG4gICAgY29uc3QgY2hpcCA9IGd1aWRcclxuICAgICAgPyB0aGlzLnJlZmVyZW5jZUVsLnF1ZXJ5U2VsZWN0b3IoYCMke2NoaXBVaWRQcmVmaXh9JHtndWlkfWApXHJcbiAgICAgIDogbnVsbDtcclxuICAgIGNoaXA/LnNldEZvY3VzKCk7XHJcbiAgfVxyXG4gIHNoaWZ0QWN0aXZlSXRlbUluZGV4KGRlbHRhKSB7XHJcbiAgICBjb25zdCB7IGxlbmd0aCB9ID0gdGhpcy5maWx0ZXJlZEl0ZW1zO1xyXG4gICAgY29uc3QgbmV3SW5kZXggPSAodGhpcy5hY3RpdmVJdGVtSW5kZXggKyBsZW5ndGggKyBkZWx0YSkgJSBsZW5ndGg7XHJcbiAgICB0aGlzLnVwZGF0ZUFjdGl2ZUl0ZW1JbmRleChuZXdJbmRleCk7XHJcbiAgICB0aGlzLnNjcm9sbFRvQWN0aXZlSXRlbSgpO1xyXG4gIH1cclxuICB1cGRhdGVBY3RpdmVJdGVtSW5kZXgoaW5kZXgpIHtcclxuICAgIHRoaXMuYWN0aXZlSXRlbUluZGV4ID0gaW5kZXg7XHJcbiAgICBsZXQgYWN0aXZlRGVzY2VuZGFudCA9IG51bGw7XHJcbiAgICB0aGlzLmZpbHRlcmVkSXRlbXMuZm9yRWFjaCgoZWwsIGkpID0+IHtcclxuICAgICAgaWYgKGkgPT09IGluZGV4KSB7XHJcbiAgICAgICAgZWwuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICBhY3RpdmVEZXNjZW5kYW50ID0gYCR7aXRlbVVpZFByZWZpeH0ke2VsLmd1aWR9YDtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBlbC5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICB0aGlzLmFjdGl2ZURlc2NlbmRhbnQgPSBhY3RpdmVEZXNjZW5kYW50O1xyXG4gICAgaWYgKHRoaXMuYWN0aXZlSXRlbUluZGV4ID4gLTEpIHtcclxuICAgICAgdGhpcy5hY3RpdmVDaGlwSW5kZXggPSAtMTtcclxuICAgIH1cclxuICB9XHJcbiAgaXNNdWx0aSgpIHtcclxuICAgIHJldHVybiB0aGlzLnNlbGVjdGlvbk1vZGUgIT09IFwic2luZ2xlXCI7XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vICBSZW5kZXIgTWV0aG9kc1xyXG4gIC8vXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIHJlbmRlckNoaXBzKCkge1xyXG4gICAgY29uc3QgeyBhY3RpdmVDaGlwSW5kZXgsIHNjYWxlLCBzZWxlY3Rpb25Nb2RlLCBtZXNzYWdlcyB9ID0gdGhpcztcclxuICAgIHJldHVybiB0aGlzLnNlbGVjdGVkSXRlbXMubWFwKChpdGVtLCBpKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNoaXBDbGFzc2VzID0ge1xyXG4gICAgICAgIGNoaXA6IHRydWUsXHJcbiAgICAgICAgXCJjaGlwLS1hY3RpdmVcIjogYWN0aXZlQ2hpcEluZGV4ID09PSBpXHJcbiAgICAgIH07XHJcbiAgICAgIGNvbnN0IGFuY2VzdG9ycyA9IFsuLi5nZXRJdGVtQW5jZXN0b3JzKGl0ZW0pXS5yZXZlcnNlKCk7XHJcbiAgICAgIGNvbnN0IHBhdGhMYWJlbCA9IFsuLi5hbmNlc3RvcnMsIGl0ZW1dLm1hcCgoZWwpID0+IGVsLnRleHRMYWJlbCk7XHJcbiAgICAgIGNvbnN0IGxhYmVsID0gc2VsZWN0aW9uTW9kZSAhPT0gXCJhbmNlc3RvcnNcIiA/IGl0ZW0udGV4dExhYmVsIDogcGF0aExhYmVsLmpvaW4oXCIgLyBcIik7XHJcbiAgICAgIHJldHVybiAoaChcImNhbGNpdGUtY2hpcFwiLCB7IGNsYXNzOiBjaGlwQ2xhc3NlcywgY2xvc2FibGU6IHRydWUsIGljb246IGl0ZW0uaWNvbiwgaWNvbkZsaXBSdGw6IGl0ZW0uaWNvbkZsaXBSdGwsIGlkOiBpdGVtLmd1aWQgPyBgJHtjaGlwVWlkUHJlZml4fSR7aXRlbS5ndWlkfWAgOiBudWxsLCBrZXk6IGl0ZW0udGV4dExhYmVsLCBtZXNzYWdlT3ZlcnJpZGVzOiB7IGRpc21pc3NMYWJlbDogbWVzc2FnZXMucmVtb3ZlVGFnIH0sIG9uQ2FsY2l0ZUNoaXBDbG9zZTogKCkgPT4gdGhpcy5jYWxjaXRlQ2hpcENsb3NlSGFuZGxlcihpdGVtKSwgc2NhbGU6IHNjYWxlLCB0aXRsZTogbGFiZWwsIHZhbHVlOiBpdGVtLnZhbHVlIH0sIGxhYmVsKSk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgcmVuZGVySW5wdXQoKSB7XHJcbiAgICBjb25zdCB7IGd1aWQsIGRpc2FibGVkLCBwbGFjZWhvbGRlciwgc2VsZWN0aW9uTW9kZSwgc2VsZWN0ZWRJdGVtcywgb3BlbiB9ID0gdGhpcztcclxuICAgIGNvbnN0IHNpbmdsZSA9IHNlbGVjdGlvbk1vZGUgPT09IFwic2luZ2xlXCI7XHJcbiAgICBjb25zdCBzZWxlY3RlZEl0ZW0gPSBzZWxlY3RlZEl0ZW1zWzBdO1xyXG4gICAgY29uc3Qgc2hvd0xhYmVsID0gIW9wZW4gJiYgc2luZ2xlICYmICEhc2VsZWN0ZWRJdGVtO1xyXG4gICAgcmV0dXJuIChoKFwic3BhblwiLCB7IGNsYXNzOiB7XHJcbiAgICAgICAgXCJpbnB1dC13cmFwXCI6IHRydWUsXHJcbiAgICAgICAgXCJpbnB1dC13cmFwLS1zaW5nbGVcIjogc2luZ2xlXHJcbiAgICAgIH0gfSwgc2hvd0xhYmVsICYmIChoKFwic3BhblwiLCB7IGNsYXNzOiB7XHJcbiAgICAgICAgbGFiZWw6IHRydWUsXHJcbiAgICAgICAgXCJsYWJlbC0taWNvblwiOiAhIXNlbGVjdGVkSXRlbT8uaWNvblxyXG4gICAgICB9LCBrZXk6IFwibGFiZWxcIiB9LCBzZWxlY3RlZEl0ZW0udGV4dExhYmVsKSksIGgoXCJpbnB1dFwiLCB7IFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCI6IHRoaXMuYWN0aXZlRGVzY2VuZGFudCwgXCJhcmlhLWF1dG9jb21wbGV0ZVwiOiBcImxpc3RcIiwgXCJhcmlhLWNvbnRyb2xzXCI6IGAke2xpc3Rib3hVaWRQcmVmaXh9JHtndWlkfWAsIFwiYXJpYS1sYWJlbFwiOiBnZXRMYWJlbFRleHQodGhpcyksIGNsYXNzOiB7XHJcbiAgICAgICAgaW5wdXQ6IHRydWUsXHJcbiAgICAgICAgXCJpbnB1dC0tc2luZ2xlXCI6IHRydWUsXHJcbiAgICAgICAgXCJpbnB1dC0tdHJhbnNwYXJlbnRcIjogdGhpcy5hY3RpdmVDaGlwSW5kZXggPiAtMSxcclxuICAgICAgICBcImlucHV0LS1oaWRkZW5cIjogc2hvd0xhYmVsLFxyXG4gICAgICAgIFwiaW5wdXQtLWljb25cIjogISF0aGlzLnBsYWNlaG9sZGVySWNvblxyXG4gICAgICB9LCBkaXNhYmxlZDogZGlzYWJsZWQsIGlkOiBgJHtpbnB1dFVpZFByZWZpeH0ke2d1aWR9YCwga2V5OiBcImlucHV0XCIsIG9uQmx1cjogdGhpcy5jb21ib2JveEJsdXJIYW5kbGVyLCBvbkZvY3VzOiB0aGlzLmNvbWJvYm94Rm9jdXNIYW5kbGVyLCBvbklucHV0OiB0aGlzLmlucHV0SGFuZGxlciwgcGxhY2Vob2xkZXI6IHBsYWNlaG9sZGVyLCByZWY6IChlbCkgPT4gKHRoaXMudGV4dElucHV0ID0gZWwpLCB0eXBlOiBcInRleHRcIiB9KSkpO1xyXG4gIH1cclxuICByZW5kZXJMaXN0Qm94T3B0aW9ucygpIHtcclxuICAgIHJldHVybiB0aGlzLmZpbHRlcmVkSXRlbXMubWFwKChpdGVtKSA9PiAoaChcImxpXCIsIHsgXCJhcmlhLXNlbGVjdGVkXCI6IHRvQXJpYUJvb2xlYW4oaXRlbS5zZWxlY3RlZCksIGlkOiBpdGVtLmd1aWQgPyBgJHtpdGVtVWlkUHJlZml4fSR7aXRlbS5ndWlkfWAgOiBudWxsLCByb2xlOiBcIm9wdGlvblwiLCB0YWJpbmRleDogXCItMVwiIH0sIGl0ZW0udGV4dExhYmVsKSkpO1xyXG4gIH1cclxuICByZW5kZXJGbG9hdGluZ1VJQ29udGFpbmVyKCkge1xyXG4gICAgY29uc3QgeyBzZXRGbG9hdGluZ0VsLCBzZXRDb250YWluZXJFbCwgb3BlbiB9ID0gdGhpcztcclxuICAgIGNvbnN0IGNsYXNzZXMgPSB7XHJcbiAgICAgIFwibGlzdC1jb250YWluZXJcIjogdHJ1ZSxcclxuICAgICAgW0Zsb2F0aW5nQ1NTLmFuaW1hdGlvbl06IHRydWUsXHJcbiAgICAgIFtGbG9hdGluZ0NTUy5hbmltYXRpb25BY3RpdmVdOiBvcGVuXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIChoKFwiZGl2XCIsIHsgXCJhcmlhLWhpZGRlblwiOiBcInRydWVcIiwgY2xhc3M6IHtcclxuICAgICAgICBcImZsb2F0aW5nLXVpLWNvbnRhaW5lclwiOiB0cnVlLFxyXG4gICAgICAgIFwiZmxvYXRpbmctdWktY29udGFpbmVyLS1hY3RpdmVcIjogb3BlblxyXG4gICAgICB9LCByZWY6IHNldEZsb2F0aW5nRWwgfSwgaChcImRpdlwiLCB7IGNsYXNzOiBjbGFzc2VzLCByZWY6IHNldENvbnRhaW5lckVsIH0sIGgoXCJ1bFwiLCB7IGNsYXNzOiB7IGxpc3Q6IHRydWUsIFwibGlzdC0taGlkZVwiOiAhb3BlbiB9IH0sIGgoXCJzbG90XCIsIG51bGwpKSkpKTtcclxuICB9XHJcbiAgcmVuZGVySWNvblN0YXJ0KCkge1xyXG4gICAgY29uc3QgeyBzZWxlY3RlZEl0ZW1zLCBwbGFjZWhvbGRlckljb24sIHNlbGVjdGlvbk1vZGUsIHBsYWNlaG9sZGVySWNvbkZsaXBSdGwgfSA9IHRoaXM7XHJcbiAgICBjb25zdCBzZWxlY3RlZEl0ZW0gPSBzZWxlY3RlZEl0ZW1zWzBdO1xyXG4gICAgY29uc3Qgc2VsZWN0ZWRJY29uID0gc2VsZWN0ZWRJdGVtPy5pY29uO1xyXG4gICAgY29uc3Qgc2luZ2xlU2VsZWN0aW9uTW9kZSA9IHNlbGVjdGlvbk1vZGUgPT09IFwic2luZ2xlXCI7XHJcbiAgICBjb25zdCBpY29uQXRTdGFydCA9ICF0aGlzLm9wZW4gJiYgc2VsZWN0ZWRJdGVtXHJcbiAgICAgID8gISFzZWxlY3RlZEljb24gJiYgc2luZ2xlU2VsZWN0aW9uTW9kZVxyXG4gICAgICA6ICEhdGhpcy5wbGFjZWhvbGRlckljb24gJiYgKCFzZWxlY3RlZEl0ZW0gfHwgc2luZ2xlU2VsZWN0aW9uTW9kZSk7XHJcbiAgICByZXR1cm4gKGljb25BdFN0YXJ0ICYmIChoKFwic3BhblwiLCB7IGNsYXNzOiBcImljb24tc3RhcnRcIiB9LCBoKFwiY2FsY2l0ZS1pY29uXCIsIHsgY2xhc3M6IFwic2VsZWN0ZWQtaWNvblwiLCBmbGlwUnRsOiB0aGlzLm9wZW4gJiYgc2VsZWN0ZWRJdGVtID8gc2VsZWN0ZWRJdGVtLmljb25GbGlwUnRsIDogcGxhY2Vob2xkZXJJY29uRmxpcFJ0bCwgaWNvbjogIXRoaXMub3BlbiAmJiBzZWxlY3RlZEl0ZW0gPyBzZWxlY3RlZEljb24gOiBwbGFjZWhvbGRlckljb24sIHNjYWxlOiBcInNcIiB9KSkpKTtcclxuICB9XHJcbiAgcmVuZGVySWNvbkVuZCgpIHtcclxuICAgIGNvbnN0IHsgb3BlbiB9ID0gdGhpcztcclxuICAgIHJldHVybiAoaChcInNwYW5cIiwgeyBjbGFzczogXCJpY29uLWVuZFwiIH0sIGgoXCJjYWxjaXRlLWljb25cIiwgeyBpY29uOiBvcGVuID8gXCJjaGV2cm9uLXVwXCIgOiBcImNoZXZyb24tZG93blwiLCBzY2FsZTogXCJzXCIgfSkpKTtcclxuICB9XHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3QgeyBndWlkLCBsYWJlbCwgb3BlbiB9ID0gdGhpcztcclxuICAgIGNvbnN0IHNpbmdsZSA9IHRoaXMuc2VsZWN0aW9uTW9kZSA9PT0gXCJzaW5nbGVcIjtcclxuICAgIHJldHVybiAoaChIb3N0LCB7IG9uQ2xpY2s6IHRoaXMuY29tYm9ib3hGb2N1c0hhbmRsZXIgfSwgaChcImRpdlwiLCB7IFwiYXJpYS1hdXRvY29tcGxldGVcIjogXCJsaXN0XCIsIFwiYXJpYS1jb250cm9sc1wiOiBgJHtsaXN0Ym94VWlkUHJlZml4fSR7Z3VpZH1gLCBcImFyaWEtZXhwYW5kZWRcIjogdG9BcmlhQm9vbGVhbihvcGVuKSwgXCJhcmlhLWhhc3BvcHVwXCI6IFwibGlzdGJveFwiLCBcImFyaWEtbGFiZWxsZWRieVwiOiBgJHtsYWJlbFVpZFByZWZpeH0ke2d1aWR9YCwgXCJhcmlhLWxpdmVcIjogXCJwb2xpdGVcIiwgXCJhcmlhLW93bnNcIjogYCR7bGlzdGJveFVpZFByZWZpeH0ke2d1aWR9YCwgY2xhc3M6IHtcclxuICAgICAgICB3cmFwcGVyOiB0cnVlLFxyXG4gICAgICAgIFwid3JhcHBlci0tc2luZ2xlXCI6IHNpbmdsZSB8fCAhdGhpcy5zZWxlY3RlZEl0ZW1zLmxlbmd0aCxcclxuICAgICAgICBcIndyYXBwZXItLWFjdGl2ZVwiOiBvcGVuXHJcbiAgICAgIH0sIG9uQ2xpY2s6IHRoaXMuY2xpY2tIYW5kbGVyLCBvbktleURvd246IHRoaXMua2V5ZG93bkhhbmRsZXIsIHJlZjogdGhpcy5zZXRSZWZlcmVuY2VFbCwgcm9sZTogXCJjb21ib2JveFwiIH0sIGgoXCJkaXZcIiwgeyBjbGFzczogXCJncmlkLWlucHV0XCIgfSwgdGhpcy5yZW5kZXJJY29uU3RhcnQoKSwgIXNpbmdsZSAmJiB0aGlzLnJlbmRlckNoaXBzKCksIGgoXCJsYWJlbFwiLCB7IGNsYXNzOiBcInNjcmVlbi1yZWFkZXJzLW9ubHlcIiwgaHRtbEZvcjogYCR7aW5wdXRVaWRQcmVmaXh9JHtndWlkfWAsIGlkOiBgJHtsYWJlbFVpZFByZWZpeH0ke2d1aWR9YCB9LCBsYWJlbCksIHRoaXMucmVuZGVySW5wdXQoKSksIHRoaXMucmVuZGVySWNvbkVuZCgpKSwgaChcInVsXCIsIHsgXCJhcmlhLWxhYmVsbGVkYnlcIjogYCR7bGFiZWxVaWRQcmVmaXh9JHtndWlkfWAsIFwiYXJpYS1tdWx0aXNlbGVjdGFibGVcIjogXCJ0cnVlXCIsIGNsYXNzOiBcInNjcmVlbi1yZWFkZXJzLW9ubHlcIiwgaWQ6IGAke2xpc3Rib3hVaWRQcmVmaXh9JHtndWlkfWAsIHJvbGU6IFwibGlzdGJveFwiLCB0YWJJbmRleDogLTEgfSwgdGhpcy5yZW5kZXJMaXN0Qm94T3B0aW9ucygpKSwgdGhpcy5yZW5kZXJGbG9hdGluZ1VJQ29udGFpbmVyKCksIGgoSGlkZGVuRm9ybUlucHV0U2xvdCwgeyBjb21wb25lbnQ6IHRoaXMgfSkpKTtcclxuICB9XHJcbiAgc3RhdGljIGdldCBhc3NldHNEaXJzKCkgeyByZXR1cm4gW1wiYXNzZXRzXCJdOyB9XHJcbiAgZ2V0IGVsKCkgeyByZXR1cm4gZ2V0RWxlbWVudCh0aGlzKTsgfVxyXG4gIHN0YXRpYyBnZXQgd2F0Y2hlcnMoKSB7IHJldHVybiB7XHJcbiAgICBcIm9wZW5cIjogW1wib3BlbkhhbmRsZXJcIl0sXHJcbiAgICBcImRpc2FibGVkXCI6IFtcImhhbmRsZURpc2FibGVkQ2hhbmdlXCJdLFxyXG4gICAgXCJtYXhJdGVtc1wiOiBbXCJtYXhJdGVtc0hhbmRsZXJcIl0sXHJcbiAgICBcIm92ZXJsYXlQb3NpdGlvbmluZ1wiOiBbXCJvdmVybGF5UG9zaXRpb25pbmdIYW5kbGVyXCJdLFxyXG4gICAgXCJ2YWx1ZVwiOiBbXCJ2YWx1ZUhhbmRsZXJcIl0sXHJcbiAgICBcIm1lc3NhZ2VPdmVycmlkZXNcIjogW1wib25NZXNzYWdlc0NoYW5nZVwiXSxcclxuICAgIFwiZmxpcFBsYWNlbWVudHNcIjogW1wiZmxpcFBsYWNlbWVudHNIYW5kbGVyXCJdLFxyXG4gICAgXCJzZWxlY3RlZEl0ZW1zXCI6IFtcInNlbGVjdGVkSXRlbXNIYW5kbGVyXCJdLFxyXG4gICAgXCJ0ZXh0XCI6IFtcInRleHRIYW5kbGVyXCJdLFxyXG4gICAgXCJlZmZlY3RpdmVMb2NhbGVcIjogW1wiZWZmZWN0aXZlTG9jYWxlQ2hhbmdlXCJdXHJcbiAgfTsgfVxyXG59O1xyXG5Db21ib2JveC5zdHlsZSA9IGNvbWJvYm94Q3NzO1xuXG5leHBvcnQgeyBDb21ib2JveCBhcyBjYWxjaXRlX2NvbWJvYm94IH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhbGNpdGUtY29tYm9ib3guZW50cnkuanMubWFwIiwiaW1wb3J0IHsgbiBhcyBub2RlTGlzdFRvQXJyYXkgfSBmcm9tICcuL2RvbS1mMWVlNGQwNC5qcyc7XG5cbi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvYmxvYi9tYXN0ZXIvTElDRU5TRS5tZCBmb3IgZGV0YWlscy5cbiAqIHYxLjAuNVxuICovXG5jb25zdCBDb21ib2JveEl0ZW0gPSBcIkNBTENJVEUtQ09NQk9CT1gtSVRFTVwiO1xuY29uc3QgQ29tYm9ib3hJdGVtR3JvdXAgPSBcIkNBTENJVEUtQ09NQk9CT1gtSVRFTS1HUk9VUFwiO1xuY29uc3QgQ29tYm9ib3hDaGlsZFNlbGVjdG9yID0gYCR7Q29tYm9ib3hJdGVtfSwgJHtDb21ib2JveEl0ZW1Hcm91cH1gO1xuXG4vKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1jb21wb25lbnRzL2Jsb2IvbWFzdGVyL0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG4gKiB2MS4wLjVcbiAqL1xuZnVuY3Rpb24gZ2V0QW5jZXN0b3JzKGVsZW1lbnQpIHtcbiAgY29uc3QgcGFyZW50ID0gZWxlbWVudC5wYXJlbnRFbGVtZW50Py5jbG9zZXN0KENvbWJvYm94Q2hpbGRTZWxlY3Rvcik7XG4gIGNvbnN0IGdyYW5kcGFyZW50ID0gcGFyZW50Py5wYXJlbnRFbGVtZW50Py5jbG9zZXN0KENvbWJvYm94Q2hpbGRTZWxlY3Rvcik7XG4gIHJldHVybiBbcGFyZW50LCBncmFuZHBhcmVudF0uZmlsdGVyKChlbCkgPT4gZWwpO1xufVxuZnVuY3Rpb24gZ2V0SXRlbUFuY2VzdG9ycyhpdGVtKSB7XG4gIHJldHVybiAoaXRlbS5hbmNlc3RvcnM/LmZpbHRlcigoZWwpID0+IGVsLm5vZGVOYW1lID09PSBcIkNBTENJVEUtQ09NQk9CT1gtSVRFTVwiKSB8fCBbXSk7XG59XG5mdW5jdGlvbiBnZXRJdGVtQ2hpbGRyZW4oaXRlbSkge1xuICByZXR1cm4gbm9kZUxpc3RUb0FycmF5KGl0ZW0ucXVlcnlTZWxlY3RvckFsbChcImNhbGNpdGUtY29tYm9ib3gtaXRlbVwiKSk7XG59XG5mdW5jdGlvbiBoYXNBY3RpdmVDaGlsZHJlbihub2RlKSB7XG4gIGNvbnN0IGl0ZW1zID0gbm9kZUxpc3RUb0FycmF5KG5vZGUucXVlcnlTZWxlY3RvckFsbChcImNhbGNpdGUtY29tYm9ib3gtaXRlbVwiKSk7XG4gIHJldHVybiBpdGVtcy5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0uc2VsZWN0ZWQpLmxlbmd0aCA+IDA7XG59XG5mdW5jdGlvbiBnZXREZXB0aChlbGVtZW50KSB7XG4gIGNvbnN0IHJlc3VsdCA9IGRvY3VtZW50LmV2YWx1YXRlKFwiYW5jZXN0b3I6OmNhbGNpdGUtY29tYm9ib3gtaXRlbVwiLCBlbGVtZW50LCBudWxsLCBYUGF0aFJlc3VsdC5VTk9SREVSRURfTk9ERV9TTkFQU0hPVF9UWVBFLCBudWxsKTtcbiAgcmV0dXJuIHJlc3VsdC5zbmFwc2hvdExlbmd0aDtcbn1cblxuZXhwb3J0IHsgQ29tYm9ib3hDaGlsZFNlbGVjdG9yIGFzIEMsIGdldEl0ZW1DaGlsZHJlbiBhcyBhLCBDb21ib2JveEl0ZW0gYXMgYiwgQ29tYm9ib3hJdGVtR3JvdXAgYXMgYywgZ2V0QW5jZXN0b3JzIGFzIGQsIGdldERlcHRoIGFzIGUsIGdldEl0ZW1BbmNlc3RvcnMgYXMgZywgaGFzQWN0aXZlQ2hpbGRyZW4gYXMgaCB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlscy05NzE1NjUzNS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=