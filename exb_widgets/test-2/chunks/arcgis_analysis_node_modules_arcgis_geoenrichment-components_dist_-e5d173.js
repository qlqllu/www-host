"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_geoenrichment-components_dist_-e5d173"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/DataBrowser-5ce2ade9.js":
/*!***************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/DataBrowser-5ce2ade9.js ***!
  \***************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $: () => (/* binding */ c$_),
/* harmony export */   A: () => (/* binding */ A$2),
/* harmony export */   B: () => (/* binding */ m$o),
/* harmony export */   C: () => (/* binding */ f$f),
/* harmony export */   D: () => (/* binding */ l$F),
/* harmony export */   E: () => (/* binding */ y$1),
/* harmony export */   F: () => (/* binding */ L$6),
/* harmony export */   G: () => (/* binding */ x$d),
/* harmony export */   H: () => (/* binding */ r$A),
/* harmony export */   I: () => (/* binding */ e$I),
/* harmony export */   J: () => (/* binding */ p$Q),
/* harmony export */   K: () => (/* binding */ z$2),
/* harmony export */   L: () => (/* binding */ L$2),
/* harmony export */   M: () => (/* binding */ M$3),
/* harmony export */   N: () => (/* binding */ t$u),
/* harmony export */   O: () => (/* binding */ k$4),
/* harmony export */   P: () => (/* binding */ s$t),
/* harmony export */   Q: () => (/* binding */ U$2),
/* harmony export */   R: () => (/* binding */ y$v),
/* harmony export */   S: () => (/* binding */ n$T),
/* harmony export */   T: () => (/* binding */ l$w),
/* harmony export */   U: () => (/* binding */ U$1),
/* harmony export */   V: () => (/* binding */ y$a),
/* harmony export */   W: () => (/* binding */ f$b),
/* harmony export */   X: () => (/* binding */ s$i),
/* harmony export */   Y: () => (/* binding */ c$13),
/* harmony export */   Z: () => (/* binding */ e$u),
/* harmony export */   _: () => (/* binding */ y$r),
/* harmony export */   a: () => (/* binding */ u$4),
/* harmony export */   a$: () => (/* binding */ r$g),
/* harmony export */   a0: () => (/* binding */ i$X),
/* harmony export */   a1: () => (/* binding */ u$D),
/* harmony export */   a2: () => (/* binding */ Q$2),
/* harmony export */   a3: () => (/* binding */ g$o),
/* harmony export */   a4: () => (/* binding */ W$2),
/* harmony export */   a5: () => (/* binding */ i$M),
/* harmony export */   a6: () => (/* binding */ y$t),
/* harmony export */   a7: () => (/* binding */ a$9),
/* harmony export */   a8: () => (/* binding */ G$6),
/* harmony export */   a9: () => (/* binding */ T$6),
/* harmony export */   aA: () => (/* binding */ C$9),
/* harmony export */   aB: () => (/* binding */ n$F),
/* harmony export */   aC: () => (/* binding */ r$8),
/* harmony export */   aD: () => (/* binding */ g$g),
/* harmony export */   aE: () => (/* binding */ r$s),
/* harmony export */   aF: () => (/* binding */ m$F),
/* harmony export */   aG: () => (/* binding */ u$y),
/* harmony export */   aH: () => (/* binding */ n$K),
/* harmony export */   aI: () => (/* binding */ e$G),
/* harmony export */   aJ: () => (/* binding */ t$G),
/* harmony export */   aK: () => (/* binding */ g$a),
/* harmony export */   aL: () => (/* binding */ o$A),
/* harmony export */   aM: () => (/* binding */ v$a),
/* harmony export */   aN: () => (/* binding */ t$H),
/* harmony export */   aO: () => (/* binding */ w$4),
/* harmony export */   aP: () => (/* binding */ p$10),
/* harmony export */   aQ: () => (/* binding */ p$T),
/* harmony export */   aR: () => (/* binding */ r$4),
/* harmony export */   aS: () => (/* binding */ d$u),
/* harmony export */   aT: () => (/* binding */ P$8),
/* harmony export */   aU: () => (/* binding */ t$o),
/* harmony export */   aV: () => (/* binding */ e$j),
/* harmony export */   aW: () => (/* binding */ s$n),
/* harmony export */   aX: () => (/* binding */ k$5),
/* harmony export */   aY: () => (/* binding */ P$3),
/* harmony export */   aZ: () => (/* binding */ G$3),
/* harmony export */   a_: () => (/* binding */ w$6),
/* harmony export */   aa: () => (/* binding */ p$18),
/* harmony export */   ab: () => (/* binding */ e$C),
/* harmony export */   ac: () => (/* binding */ f$4),
/* harmony export */   ad: () => (/* binding */ c$e),
/* harmony export */   ae: () => (/* binding */ L$5),
/* harmony export */   af: () => (/* binding */ n$e),
/* harmony export */   ag: () => (/* binding */ et),
/* harmony export */   ah: () => (/* binding */ a$I),
/* harmony export */   ai: () => (/* binding */ A$8),
/* harmony export */   aj: () => (/* binding */ o$v),
/* harmony export */   ak: () => (/* binding */ o$y),
/* harmony export */   al: () => (/* binding */ t$N),
/* harmony export */   am: () => (/* binding */ w$9),
/* harmony export */   an: () => (/* binding */ n$3),
/* harmony export */   ao: () => (/* binding */ a$B),
/* harmony export */   ap: () => (/* binding */ g$1),
/* harmony export */   aq: () => (/* binding */ t$I),
/* harmony export */   ar: () => (/* binding */ d$o),
/* harmony export */   as: () => (/* binding */ G$1),
/* harmony export */   at: () => (/* binding */ d$s),
/* harmony export */   au: () => (/* binding */ R$5),
/* harmony export */   av: () => (/* binding */ S$8),
/* harmony export */   aw: () => (/* binding */ s$H),
/* harmony export */   ax: () => (/* binding */ n$R),
/* harmony export */   ay: () => (/* binding */ C$8),
/* harmony export */   az: () => (/* binding */ h$u),
/* harmony export */   b: () => (/* binding */ b$3),
/* harmony export */   b$: () => (/* binding */ o$C),
/* harmony export */   b0: () => (/* binding */ o$h),
/* harmony export */   b1: () => (/* binding */ gt),
/* harmony export */   b2: () => (/* binding */ Ut),
/* harmony export */   b3: () => (/* binding */ D$6),
/* harmony export */   b4: () => (/* binding */ g$h),
/* harmony export */   b5: () => (/* binding */ n$G),
/* harmony export */   b6: () => (/* binding */ u$B),
/* harmony export */   b7: () => (/* binding */ d$5),
/* harmony export */   b8: () => (/* binding */ v$9),
/* harmony export */   b9: () => (/* binding */ m$x),
/* harmony export */   bA: () => (/* binding */ u$m),
/* harmony export */   bB: () => (/* binding */ d$n),
/* harmony export */   bC: () => (/* binding */ i$m),
/* harmony export */   bD: () => (/* binding */ n$c),
/* harmony export */   bE: () => (/* binding */ t$k),
/* harmony export */   bF: () => (/* binding */ l$O),
/* harmony export */   bG: () => (/* binding */ o$I),
/* harmony export */   bH: () => (/* binding */ c$F),
/* harmony export */   bI: () => (/* binding */ T$4),
/* harmony export */   bJ: () => (/* binding */ m$l),
/* harmony export */   bK: () => (/* binding */ j$2),
/* harmony export */   bL: () => (/* binding */ M$1),
/* harmony export */   bM: () => (/* binding */ M),
/* harmony export */   bN: () => (/* binding */ o$F),
/* harmony export */   bO: () => (/* binding */ n$l),
/* harmony export */   bP: () => (/* binding */ o$6),
/* harmony export */   bQ: () => (/* binding */ F$1),
/* harmony export */   bR: () => (/* binding */ h$5),
/* harmony export */   bS: () => (/* binding */ n$o),
/* harmony export */   bT: () => (/* binding */ g$2),
/* harmony export */   bU: () => (/* binding */ a$u),
/* harmony export */   bV: () => (/* binding */ u$N),
/* harmony export */   bW: () => (/* binding */ i$W),
/* harmony export */   bX: () => (/* binding */ n$V),
/* harmony export */   bY: () => (/* binding */ c$12),
/* harmony export */   bZ: () => (/* binding */ n$u),
/* harmony export */   b_: () => (/* binding */ d$j),
/* harmony export */   ba: () => (/* binding */ b$a),
/* harmony export */   bb: () => (/* binding */ b$b),
/* harmony export */   bc: () => (/* binding */ N$5),
/* harmony export */   bd: () => (/* binding */ s$o),
/* harmony export */   be: () => (/* binding */ R$6),
/* harmony export */   bf: () => (/* binding */ d$t),
/* harmony export */   bg: () => (/* binding */ g$9),
/* harmony export */   bh: () => (/* binding */ e$p),
/* harmony export */   bi: () => (/* binding */ q$4),
/* harmony export */   bj: () => (/* binding */ P$7),
/* harmony export */   bk: () => (/* binding */ s$G),
/* harmony export */   bl: () => (/* binding */ r$r),
/* harmony export */   bm: () => (/* binding */ r$x),
/* harmony export */   bn: () => (/* binding */ o$m),
/* harmony export */   bo: () => (/* binding */ d$E),
/* harmony export */   bp: () => (/* binding */ e$a),
/* harmony export */   bq: () => (/* binding */ c$r),
/* harmony export */   br: () => (/* binding */ V$2),
/* harmony export */   bs: () => (/* binding */ s$r),
/* harmony export */   bt: () => (/* binding */ u$h),
/* harmony export */   bu: () => (/* binding */ o$j),
/* harmony export */   bv: () => (/* binding */ r$v),
/* harmony export */   bw: () => (/* binding */ i$G),
/* harmony export */   bx: () => (/* binding */ u$K),
/* harmony export */   by: () => (/* binding */ k$a),
/* harmony export */   bz: () => (/* binding */ i$F),
/* harmony export */   c: () => (/* binding */ c$3),
/* harmony export */   c$: () => (/* binding */ y$l),
/* harmony export */   c0: () => (/* binding */ i$C),
/* harmony export */   c1: () => (/* binding */ u$n),
/* harmony export */   c2: () => (/* binding */ n$v),
/* harmony export */   c3: () => (/* binding */ D$1),
/* harmony export */   c4: () => (/* binding */ P$1),
/* harmony export */   c5: () => (/* binding */ F),
/* harmony export */   c6: () => (/* binding */ h$i),
/* harmony export */   c7: () => (/* binding */ y$9),
/* harmony export */   c8: () => (/* binding */ c$C),
/* harmony export */   c9: () => (/* binding */ c$B),
/* harmony export */   cA: () => (/* binding */ c$K),
/* harmony export */   cB: () => (/* binding */ b$c),
/* harmony export */   cC: () => (/* binding */ w$a),
/* harmony export */   cD: () => (/* binding */ u$z),
/* harmony export */   cE: () => (/* binding */ t$x),
/* harmony export */   cF: () => (/* binding */ m$y),
/* harmony export */   cG: () => (/* binding */ n$W),
/* harmony export */   cH: () => (/* binding */ N$2),
/* harmony export */   cI: () => (/* binding */ i$5),
/* harmony export */   cJ: () => (/* binding */ j$9),
/* harmony export */   cK: () => (/* binding */ X),
/* harmony export */   cL: () => (/* binding */ B),
/* harmony export */   cM: () => (/* binding */ ee),
/* harmony export */   cN: () => (/* binding */ ne),
/* harmony export */   cO: () => (/* binding */ fe),
/* harmony export */   cP: () => (/* binding */ e$4),
/* harmony export */   cQ: () => (/* binding */ o$q),
/* harmony export */   cR: () => (/* binding */ E$3),
/* harmony export */   cS: () => (/* binding */ k$8),
/* harmony export */   cT: () => (/* binding */ B$4),
/* harmony export */   cU: () => (/* binding */ y$u),
/* harmony export */   cV: () => (/* binding */ d$F),
/* harmony export */   cW: () => (/* binding */ A$d),
/* harmony export */   cX: () => (/* binding */ i$A),
/* harmony export */   cY: () => (/* binding */ C$7),
/* harmony export */   cZ: () => (/* binding */ j$f),
/* harmony export */   c_: () => (/* binding */ v$h),
/* harmony export */   ca: () => (/* binding */ p$L),
/* harmony export */   cb: () => (/* binding */ n$s),
/* harmony export */   cc: () => (/* binding */ S$6),
/* harmony export */   cd: () => (/* binding */ j$g),
/* harmony export */   ce: () => (/* binding */ i$Q),
/* harmony export */   cf: () => (/* binding */ r$z),
/* harmony export */   cg: () => (/* binding */ e$t),
/* harmony export */   ch: () => (/* binding */ qt),
/* harmony export */   ci: () => (/* binding */ x$9),
/* harmony export */   cj: () => (/* binding */ t$n),
/* harmony export */   ck: () => (/* binding */ d$y),
/* harmony export */   cl: () => (/* binding */ A$4),
/* harmony export */   cm: () => (/* binding */ u$x),
/* harmony export */   cn: () => (/* binding */ b$7),
/* harmony export */   co: () => (/* binding */ m$s),
/* harmony export */   cp: () => (/* binding */ g$b),
/* harmony export */   cq: () => (/* binding */ e$k),
/* harmony export */   cr: () => (/* binding */ pt),
/* harmony export */   cs: () => (/* binding */ M$4),
/* harmony export */   ct: () => (/* binding */ I$1),
/* harmony export */   cu: () => (/* binding */ y$f),
/* harmony export */   cv: () => (/* binding */ l$x),
/* harmony export */   cw: () => (/* binding */ u$o),
/* harmony export */   cx: () => (/* binding */ r$f),
/* harmony export */   cy: () => (/* binding */ G$2),
/* harmony export */   cz: () => (/* binding */ u$P),
/* harmony export */   d: () => (/* binding */ d$i),
/* harmony export */   d0: () => (/* binding */ $),
/* harmony export */   d1: () => (/* binding */ C$2),
/* harmony export */   d2: () => (/* binding */ r$l),
/* harmony export */   d3: () => (/* binding */ o$E),
/* harmony export */   d4: () => (/* binding */ o$k),
/* harmony export */   d5: () => (/* binding */ t$O),
/* harmony export */   d6: () => (/* binding */ r$B),
/* harmony export */   d7: () => (/* binding */ F$4),
/* harmony export */   d8: () => (/* binding */ l$H),
/* harmony export */   d9: () => (/* binding */ A$1),
/* harmony export */   dA: () => (/* binding */ o$9),
/* harmony export */   dB: () => (/* binding */ h$p),
/* harmony export */   dC: () => (/* binding */ s$g),
/* harmony export */   dD: () => (/* binding */ L$4),
/* harmony export */   dE: () => (/* binding */ S$5),
/* harmony export */   dF: () => (/* binding */ m$j),
/* harmony export */   dG: () => (/* binding */ f$q),
/* harmony export */   dH: () => (/* binding */ p$17),
/* harmony export */   dI: () => (/* binding */ p$s),
/* harmony export */   dJ: () => (/* binding */ M$6),
/* harmony export */   dK: () => (/* binding */ i$O),
/* harmony export */   dL: () => (/* binding */ u$Q),
/* harmony export */   dM: () => (/* binding */ f$A),
/* harmony export */   dN: () => (/* binding */ i$15),
/* harmony export */   dO: () => (/* binding */ c$14),
/* harmony export */   dP: () => (/* binding */ t$s),
/* harmony export */   dQ: () => (/* binding */ H$3),
/* harmony export */   dR: () => (/* binding */ request),
/* harmony export */   dS: () => (/* binding */ FeatureSet),
/* harmony export */   dT: () => (/* binding */ DataBrowser$1),
/* harmony export */   da: () => (/* binding */ a$P),
/* harmony export */   db: () => (/* binding */ t$9),
/* harmony export */   dc: () => (/* binding */ o$u),
/* harmony export */   dd: () => (/* binding */ z$5),
/* harmony export */   de: () => (/* binding */ m$B),
/* harmony export */   df: () => (/* binding */ j$i),
/* harmony export */   dg: () => (/* binding */ x$2),
/* harmony export */   dh: () => (/* binding */ S$a),
/* harmony export */   di: () => (/* binding */ h$y),
/* harmony export */   dj: () => (/* binding */ v$c),
/* harmony export */   dk: () => (/* binding */ F$5),
/* harmony export */   dl: () => (/* binding */ s$D),
/* harmony export */   dm: () => (/* binding */ p$11),
/* harmony export */   dn: () => (/* binding */ R$8),
/* harmony export */   dp: () => (/* binding */ Rt),
/* harmony export */   dq: () => (/* binding */ f$e),
/* harmony export */   dr: () => (/* binding */ j$1),
/* harmony export */   ds: () => (/* binding */ x$1),
/* harmony export */   dt: () => (/* binding */ u$O),
/* harmony export */   du: () => (/* binding */ t$6),
/* harmony export */   dv: () => (/* binding */ $$2),
/* harmony export */   dw: () => (/* binding */ i$n),
/* harmony export */   dx: () => (/* binding */ i$4),
/* harmony export */   dy: () => (/* binding */ M$a),
/* harmony export */   dz: () => (/* binding */ w$b),
/* harmony export */   e: () => (/* binding */ y$2),
/* harmony export */   f: () => (/* binding */ b$4),
/* harmony export */   g: () => (/* binding */ ht),
/* harmony export */   h: () => (/* binding */ h$8),
/* harmony export */   i: () => (/* binding */ c$b),
/* harmony export */   j: () => (/* binding */ U$4),
/* harmony export */   k: () => (/* binding */ k$1),
/* harmony export */   l: () => (/* binding */ c$U),
/* harmony export */   m: () => (/* binding */ c$a),
/* harmony export */   n: () => (/* binding */ n$6),
/* harmony export */   o: () => (/* binding */ o$H),
/* harmony export */   p: () => (/* binding */ l$a),
/* harmony export */   q: () => (/* binding */ j$b),
/* harmony export */   r: () => (/* binding */ c$O),
/* harmony export */   s: () => (/* binding */ s$x),
/* harmony export */   t: () => (/* binding */ t$M),
/* harmony export */   u: () => (/* binding */ u$7),
/* harmony export */   v: () => (/* binding */ m$m),
/* harmony export */   w: () => (/* binding */ w$2),
/* harmony export */   x: () => (/* binding */ x$4),
/* harmony export */   y: () => (/* binding */ y$3),
/* harmony export */   z: () => (/* binding */ z$6)
/* harmony export */ });
/* harmony import */ var _arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./arcgis-geoenrichment-databrowser-6ca8ea14.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/arcgis-geoenrichment-databrowser-6ca8ea14.js");


/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */

function __decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function n$W(n,r){if(n.forEach)n.forEach(r);else for(let t=0;t<n.length;t++)r(n[t],t,n);}function r$B(n,r,t){if(n.slice)return n.slice(r,t);void 0===r?r=0:(r<0&&(r+=n.length),r=Math.min(n.length,Math.max(0,r))),void 0===t?t=n.length:(t<0&&(t+=n.length),t=Math.min(n.length,Math.max(0,t)));const o=Math.max(0,t-r),c=new(n.constructor)(o);for(let e=0;e<o;e++)c[e]=n[r+e];return c}function t$O(n){return n instanceof ArrayBuffer||n&&n.constructor&&"ArrayBuffer"===n.constructor.name}function o$J(n){return n instanceof Int8Array||n&&n.constructor&&"Int8Array"===n.constructor.name}function c$14(n){return n instanceof Uint8Array||n&&n.constructor&&"Uint8Array"===n.constructor.name}function e$K(n){return n instanceof Uint8ClampedArray||n&&n.constructor&&"Uint8ClampedArray"===n.constructor.name}function a$Q(n){return n instanceof Int16Array||n&&n.constructor&&"Int16Array"===n.constructor.name}function u$Q(n){return n instanceof Uint16Array||n&&n.constructor&&"Uint16Array"===n.constructor.name}function i$17(n){return n instanceof Int32Array||n&&n.constructor&&"Int32Array"===n.constructor.name}function f$A(n){return n instanceof Uint32Array||n&&n.constructor&&"Uint32Array"===n.constructor.name}function s$I(n){return n instanceof Float32Array||n&&n.constructor&&"Float32Array"===n.constructor.name}function y$w(n){return n instanceof Float64Array||n&&n.constructor&&"Float64Array"===n.constructor.name}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function p$18(e,t){let n;if(t)for(n in e)e.hasOwnProperty(n)&&(void 0===e[n]?delete e[n]:e[n]instanceof Object&&p$18(e[n],!0));else for(n in e)e.hasOwnProperty(n)&&void 0===e[n]&&delete e[n];return e}function y$v(e){if(!e||"object"!=typeof e||"function"==typeof e)return e;if(o$J(e)||c$14(e)||e$K(e)||a$Q(e)||u$Q(e)||i$17(e)||f$A(e)||s$I(e)||y$w(e))return r$B(e);if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer){return e.slice(0,e.byteLength)}if(e instanceof Map){const t=new Map;return e.forEach(((e,n)=>{t.set(n,y$v(e));})),t}if(e instanceof Set){const t=new Set;return e.forEach((e=>{t.add(y$v(e));})),t}let p;const l=e;if("function"==typeof l.clone)p=l.clone();else if("function"==typeof l.map&&"function"==typeof l.forEach)p=l.map(y$v);else if("function"==typeof l.notifyChange&&"function"==typeof l.watch)p=l.clone();else {p={};for(const t of Object.getOwnPropertyNames(e))p[t]=y$v(e[t]);}return p}function l$P(e,t){return e===t||"number"==typeof e&&isNaN(e)&&"number"==typeof t&&isNaN(t)||"function"==typeof(e||{}).getTime&&"function"==typeof(t||{}).getTime&&e.getTime()===t.getTime()||!1}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function n$V(r,n,t=!1){return e$J(r,n,t)}function t$N(r,n){if(null!=n)return n[r]||i$16(r.split("."),!1,n)}function o$I(r,n,t){const o=r.split("."),e=o.pop(),u=i$16(o,!0,t);u&&e&&(u[e]=n);}function i$16(r,n,t){let o=t;for(const i of r){if(null==o)return;if(!(i in o)){if(!n)return;o[i]={};}o=o[i];}return o}function e$J(n,t,o){return t?Object.keys(t).reduce((function(n,i){let u=n[i],c=t[i];return u===c?n:void 0===u?(n[i]=y$v(c),n):(Array.isArray(c)||Array.isArray(n)?(u=u?Array.isArray(u)?n[i]=u.concat():n[i]=[u]:n[i]=[],c&&(Array.isArray(c)||(c=[c]),o?c.forEach((r=>{-1===u.indexOf(r)&&u.push(r);})):n[i]=c.concat())):c&&"object"==typeof c?n[i]=e$J(u,c,o):n.hasOwnProperty(i)&&!t.hasOwnProperty(i)||(n[i]=c),n)}),n||{}):n}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const s$H={apiKey:void 0,applicationUrl:_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.e.location&&_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.e.location.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryService:null,geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",portalUrl:"https://www.arcgis.com",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.e.esriConfig&&(n$V(s$H,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.e.esriConfig,!0),delete s$H.has),!s$H.assetsPath){const e="4.19.0";s$H.assetsPath=`https://js.arcgis.com/${e.slice(0,-2)}/@arcgis/core/assets`;}s$H.baseUrl&&console.warn("[esri.config]","baseUrl has been replaced by assetsPath"),Object.defineProperty(s$H,"baseUrl",{set(){console.warn("[esri.config]","baseUrl has been replaced by assetsPath");}}),s$H.request.corsEnabledServers=[],s$H.request.corsEnabledServers.push=function(){return console.warn("[esri.config]","request.corsEnabledServers is not supported and will be removed in a future release. See http://esriurl.com/cors8664"),0};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function r$A(n){return null!=n}function t$M(n){return null==n}function u$P(n){return void 0===n}function e$I(n){return n}function c$13(n,t){return r$A(n)?n:"function"==typeof t?t():t}function l$O(n){return r$A(n)&&n.destroy(),null}function i$15(n){return r$A(n)&&n.dispose(),null}function s$G(n){return r$A(n)&&n.remove(),null}function p$17(n){return null}function y$u(n,r){const t=new Array;for(const u of n)t.push(v$h(u,null,r));return t}function d$F(n,r){for(const t of n)v$h(t,null,r);}function v$h(n,t,u){return r$A(n)?u(n):t}function A$d(n,t){return r$A(n)?t(n):null}function g$o(n,...r){let t=n,u=0;for(;u<r.length&&t;)t=t[r[u++]];return t}function m$F(n){return n}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const e$H=/\{([^\}]+)\}/g;function n$U(t){return null==t?"":t}function r$z(r,o){return r.replace(e$H,"object"==typeof o?(e,r)=>n$U(t$N(r,o)):(t,e)=>n$U(o(e)))}function o$H(t,e){return t.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,(t=>e&&-1!==e.indexOf(t)?t:`\\${t}`))}function c$12(t){let e=0;for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return e}function u$O(t){return (new DOMParser).parseFromString(t||"","text/html").body.innerText||""}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const o$G={info:0,warn:1,error:2,none:3};class n$T{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},null!=e.level&&(this.level=e.level),null!=e.writer&&(this.writer=e.writer),this._module=e.module,n$T._loggers[this.module]=this;const t=this.module.lastIndexOf(".");-1!==t&&(this._parent=n$T.getLogger(this.module.slice(0,t)));}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e);}warn(...e){this._log("warn","always",...e);}info(...e){this._log("info","always",...e);}errorOnce(...e){this._log("error","once",...e);}warnOnce(...e){this._log("warn","once",...e);}infoOnce(...e){this._log("info","once",...e);}errorOncePerTick(...e){this._log("error","oncePerTick",...e);}warnOncePerTick(...e){this._log("warn","oncePerTick",...e);}infoOncePerTick(...e){this._log("info","oncePerTick",...e);}get test(){const e=this;return {loggedMessages:e._loggedMessages,clearLoggedWarnings:()=>e._loggedMessages.warn.clear()}}static get testSingleton(){return {resetLoggers(e={}){const t=n$T._loggers;return n$T._loggers=e,t},set throttlingDisabled(e){n$T._throttlingDisabled=e;}}}static getLogger(e){let t=n$T._loggers[e];return t||(t=new n$T({module:e})),t}_log(t,r,...o){if(!this._matchLevel(t))return;if("always"!==r&&!n$T._throttlingDisabled){const e=this._argsToKey(o),s=this._loggedMessages[t].get(e);if("once"===r&&null!=s||"oncePerTick"===r&&s&&s>=n$T._tickCounter)return;this._loggedMessages[t].set(e,n$T._tickCounter),n$T._scheduleTickCounterIncrement();}for(const n of s$H.log.interceptors)if(n(t,this.module,...o))return;this._inheritedWriter()(t,this.module,...o);}_parentWithMember(e,r){let o=this;for(;r$A(o);){const r=o[e];if(r$A(r))return r;o=o.parent;}return r}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(e,t,...r){console[e](`[${t}]`,...r);}_matchLevel(t){const r=s$H.log.level?s$H.log.level:"warn";return o$G[this._parentWithMember("level",r)]<=o$G[t]}_argsToKey(...e){const t=(e,t)=>"object"!=typeof t||Array.isArray(t)?t:"[Object]";return c$12(JSON.stringify(e,t))}static _scheduleTickCounterIncrement(){n$T._tickCounterScheduled||(n$T._tickCounterScheduled=!0,Promise.resolve().then((()=>{n$T._tickCounter++,n$T._tickCounterScheduled=!1;})));}}n$T._loggers={},n$T._tickCounter=0,n$T._tickCounterScheduled=!1,n$T._throttlingDisabled=!1;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const n$S=n$T.getLogger("esri.core.Accessor");function r$y(e){return null==e?e:new Date(e)}function t$L(e){return null==e?e:!!e}function o$F(e){return null==e?e:e.toString()}function u$N(e){return null==e?e:(e=parseFloat(e),isNaN(e)?0:e)}function a$P(e){return null==e?e:Math.round(parseFloat(e))}function s$F(e){return e&&e.constructor&&void 0!==e.constructor.__accessorMetadata__}function l$N(e,n){return null!=n&&e&&!(n instanceof e)}function i$14(e){return e&&"isCollection"in e}function c$11(e){return e&&e.Type?"function"==typeof e.Type?e.Type:e.Type.base:null}function f$z(e,n){if(!n||!n.constructor||!i$14(n.constructor))return p$16(e,n)?n:new e(n);const r=c$11(e.prototype.itemType),t=c$11(n.constructor.prototype.itemType);return r?t?r===t?n:r.prototype.isPrototypeOf(t.prototype)?new e(n):(p$16(e,n),n):new e(n):n}function p$16(e,r){return !!s$F(r)&&(n$S.error("Accessor#set","Assigning an instance of '"+(r.declaredClass||"unknown")+"' which is not a subclass of '"+v$g(e)+"'"),!0)}function y$t(e,n){return null==n?n:i$14(e)?f$z(e,n):l$N(e,n)?p$16(e,n)?n:new e(n):n}function v$g(e){return e&&e.prototype&&e.prototype.declaredClass||"unknown"}function g$n(e){switch(e){case Number:return u$N;case N$5:return a$P;case Boolean:return t$L;case String:return o$F;case Date:return r$y;default:return y$t.bind(null,e)}}function d$E(e,n){const r=g$n(e);return 1===arguments.length?r:r(n)}function h$A(e,n,r){return 1===arguments.length?h$A.bind(null,e):n?Array.isArray(n)?n.map((n=>e(n,r))):[e(n,r)]:n}function b$e(e,n){return 1===arguments.length?h$A(d$E.bind(null,e)):h$A(d$E.bind(null,e),n)}function m$E(e,n,r){return 0!==n&&Array.isArray(r)?r.map((r=>m$E(e,n-1,r))):e(r)}function w$c(e,n,r){if(2===arguments.length)return w$c.bind(null,e,n);if(!r)return r;let t=n,o=r=m$E(e,n,r);for(;t>0&&Array.isArray(o);)t--,o=o[0];if(void 0!==o)for(let u=0;u<t;u++)r=[r];return r}function A$c(e,n,r){return 2===arguments.length?w$c(d$E.bind(null,e),n):w$c(d$E.bind(null,e),n,r)}function $$3(e){return !!Array.isArray(e)&&!e.some((n=>{const r=typeof n;return !("string"===r||"number"===r||"function"===r&&e.length>1)}))}function j$j(e,r){if(2===arguments.length)return j$j(e).call(null,r);const t=new Set,o=e.filter((e=>"function"!=typeof e)),u=e.filter((e=>"function"==typeof e));for(const n of e)"string"!=typeof n&&"number"!=typeof n||t.add(n);let a=null,s=null;return (e,r)=>{if(null==e)return e;const i=typeof e,c="string"===i||"number"===i;return c&&(t.has(e)||u.some((e=>"string"===i&&e===String||"number"===i&&e===Number)))||"object"===i&&u.some((n=>!l$N(e,n)))?e:(c&&o.length?(a||(a=o.map((e=>"string"==typeof e?`'${e}'`:`${e}`)).join(", ")),n$S.error("Accessor#set",`'${e}' is not a valid value for this property, only the following values are valid: ${a}`)):"object"==typeof e&&u.length?(s||(s=u.map((e=>v$g(e))).join(", ")),n$S.error("Accessor#set",`'${e}' is not a valid value for this property, value must be one of ${s}`)):n$S.error("Accessor#set",`'${e}' is not a valid value for this property`),r&&(r.valid=!1),null)}}function k$a(e,r){if(2===arguments.length)return k$a(e).call(null,r);const t={},o=[],u=[];for(const n in e.typeMap){const r=e.typeMap[n];t[n]=d$E(r),o.push(v$g(r)),u.push(n);}const a=()=>`'${o.join("', '")}'`,i=()=>`'${u.join("', '")}'`,c="string"==typeof e.key?n=>n[e.key]:e.key;return r=>{if(e.base&&!l$N(e.base,r))return r;if(null==r)return r;const o=c(r)||e.defaultKeyValue,u=t[o];if(!u)return n$S.error("Accessor#set",`Invalid property value, value needs to be one of ${a()}, or a plain object that can autocast (having .type = ${i()})`),null;if(!l$N(e.typeMap[o],r))return r;if("string"==typeof e.key&&!s$F(r)){const n={};for(const t in r)t!==e.key&&(n[t]=r[t]);return u(n)}return u(r)}}class N$5{}const S$a={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function T$7(e){if(!e||!("type"in e))return !1;switch(e.type){case"native":case"array":case"one-of":return !0}return !1}function M$b(e){switch(e.type){case"native":return d$E(e.value);case"array":return h$A(M$b(e.value));case"one-of":return _$7(e);default:return null}}function _$7(e){let r=null;return (t,o)=>C$a(t,e)?t:(null==r&&(r=B$6(e)),n$S.error("Accessor#set",`Invalid property value, value needs to be of type ${r}`),o&&(o.valid=!1),null)}function B$6(e){switch(e.type){case"native":switch(e.value){case Number:return "number";case String:return "string";case Boolean:return "boolean";case N$5:return "integer";case Date:return "date";default:return v$g(e.value)}case"array":return `array of ${B$6(e.value)}`;case"one-of":{const n=e.values.map((e=>B$6(e)));return `one of ${n.slice(0,n.length-1)} or ${n[n.length-1]}`}}return "unknown"}function C$a(e,n){if(null==e)return !0;switch(n.type){case"native":switch(n.value){case Number:case N$5:return "number"==typeof e;case Boolean:return "boolean"==typeof e;case String:return "string"==typeof e}return e instanceof n.value;case"array":return !!Array.isArray(e)&&!e.some((e=>!C$a(e,n.value)));case"one-of":return n.values.some((n=>C$a(e,n)))}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function r$x(r){return n$R((()=>r.forEach((r=>r$A(r)&&r.remove()))))}function n$R(e){return {remove:()=>{e&&(e(),e=void 0);}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function e$G(r){return r?r.__accessor__?r.__accessor__:r.propertyInvalidated?r:null:null}function i$13(r,n){return null!=r&&r.metadatas&&null!=r.metadatas[n]}function u$M(r,n,t){if(t){return a$O(r,n,{policy:t,path:""})}return a$O(r,n,null)}function a$O(t,e,i){return e?Object.keys(e).reduce((function(t,o){let u=null,l="merge";if(i&&(u=i.path?`${i.path}.${o}`:o,l=i.policy(u)),"replace"===l)return t[o]=e[o],t;if(void 0===t[o])return t[o]=y$v(e[o]),t;let f=t[o],s=e[o];if(f===s)return t;if(Array.isArray(s)||Array.isArray(t))f=f?Array.isArray(f)?t[o]=f.concat():t[o]=[f]:t[o]=[],s&&(Array.isArray(s)||(s=[s]),s.forEach((r=>{-1===f.indexOf(r)&&f.push(r);})));else if(s&&"object"==typeof s)if(i){const r=i.path;i.path=m$F(u),t[o]=a$O(f,s,i),i.path=r;}else t[o]=a$O(f,s,null);else t.hasOwnProperty(o)&&!e.hasOwnProperty(o)||(t[o]=s);return t}),t||{}):t}function l$M(r){return r?"string"==typeof r&&-1===r.indexOf(".")?r:f$y(r):r}function f$y(r){return Array.isArray(r)?r:r.split(".")}function s$E(r){return r.indexOf(",")>-1?r.split(",").map((r=>r.trim())):[r.trim()]}function c$10(r){if(Array.isArray(r)){const n=[];for(const t of r)n.push(...s$E(t));return n}return s$E(r)}function y$s(r,n,e,i){const o=c$10(n);if(1!==o.length){const n=o.map((n=>i(r,n,e)));return r$x(n)}return i(r,o[0],e)}function h$z(r){let n=!1;return ()=>{n||(n=!0,r());}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function e$F(t,e){const i="?"===t[t.length-1]?t.slice(0,-1):t;if(null!=e.getItemAt||Array.isArray(e)){const t=parseInt(i,10);if(!isNaN(t))return Array.isArray(e)?e[t]:e.getItemAt(t)}const o=e$G(e);return i$13(o,i)?o.get(i):e[i]}function i$12(t,n,r){if(null==t)return t;const o=e$F(n[r],t);return !o&&r<n.length-1?void 0:r===n.length-1?o:i$12(o,n,r+1)}function o$E(n,r,o=0){return "string"==typeof r&&-1===r.indexOf(".")?e$F(r,n):i$12(n,f$y(r),o)}function u$L(t,n){return o$E(t,n)}function f$x(t,n){return void 0!==o$E(n,t)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
class o$D{constructor(t){this.autoDestroy=!1,this.properties=t;}}function n$Q(r){let n=r.constructor.__accessorMetadata__;const c=Object.prototype.hasOwnProperty.call(r.constructor,"__accessorMetadata__");if(n){if(!c){const e=Object.create(n.properties),c=n.autoDestroy;for(const r in e)e[r]=y$v(e[r]);n=new o$D(e),n.autoDestroy=c,Object.defineProperty(r.constructor,"__accessorMetadata__",{value:n,enumerable:!1,configurable:!0,writable:!0});}}else n=new o$D({}),Object.defineProperty(r.constructor,"__accessorMetadata__",{value:n,enumerable:!1,configurable:!0,writable:!0});return m$F(r.constructor.__accessorMetadata__)}function c$$(t){return n$Q(t).properties}function s$D(t,e){const r=c$$(t);let o=r[e];return o||(o=r[e]={}),o}function i$11(t,e){return u$M(t,e,_$6)}const p$15=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function _$6(t){return p$15.test(t)?"replace":"merge"}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
n$T.getLogger("esri.core.accessorSupport.set");function t$K(e,r,s){if(e&&r)if("object"==typeof r)for(const o of Object.getOwnPropertyNames(r))t$K(e,o,r[o]);else {if(-1!==r.indexOf(".")){const i=r.split("."),f=i.splice(i.length-1,1)[0];return void t$K(u$L(e,i),f,s)}e[r]=s;}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const g$m=n$T.getLogger("esri.core.accessorSupport.decorators.property");function y$r(t={}){return (n,o,s)=>{if(n===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${n.name}.${o}. Accessor does not support static properties.`);const i=s$D(n,o);s&&(s.get||s.set?(i.get=s.get||i.get,i.set=s.set||i.set):"value"in s&&("value"in t&&g$m.warn(`@property() will redefine the value of "${o}" on "${n.constructor.name}" already defined in the metadata`,t),i.value=t.value=s.value)),null!=t.readOnly&&(i.readOnly=t.readOnly);const a=t.aliasOf;if(a){const t="string"==typeof a?a:a.source,e="string"==typeof a?null:!0===a.overridable;let r;i.dependsOn=[t],i.get=function(){let e=u$L(this,t);if("function"==typeof e){r||(r=t.split(".").slice(0,-1).join("."));const n=u$L(this,r);n&&(e=e.bind(n));}return e},i.readOnly||(i.set=e?function(t){void 0!==t?this._override(o,t):this._clearOverride(o);}:function(e){t$K(this,t,e);});}const u=t.type,c=t.types;i.cast||(u?i.cast=v$f(u):c&&(Array.isArray(c)?i.cast=h$A(k$a(c[0])):i.cast=k$a(c))),t.range&&(i.cast=j$i(i.cast,t.range)),i$11(i,t);}}function h$y(t,e,r){const n=s$D(t,r);n.json||(n.json={});let o=n.json;return void 0!==e&&(o.origins||(o.origins={}),o.origins[e]||(o.origins[e]={}),o=o.origins[e]),o}function v$f(t){let e=0,r=t;if(T$7(t))return M$b(t);for(;Array.isArray(r)&&1===r.length&&"string"!=typeof r[0]&&"number"!=typeof r[0];)r=r[0],e++;const l=r;if($$3(l))return 0===e?j$j(l):w$c(j$j(l),e);if(1===e)return b$e(l);if(e>1)return A$c(l,e);const f=t;return f.from?f.from:d$E(f)}function j$i(t,e){return r=>{let n=+t(r);return null!=e.step&&(n=Math.round(n/e.step)*e.step),null!=e.min&&(n=Math.max(e.min,n)),null!=e.max&&(n=Math.min(e.max,n)),n}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function o$C(o,t){const e=t?{...t,source:o}:o;return y$r({aliasOf:e})}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const o$B=Object.prototype.toString;function r$w(n){const o="__accessorMetadata__"in n?d$E(n):n;return function(...t){if(t.push(o),"number"==typeof t[2])throw new Error("Using @cast has parameter decorator is not supported since 4.16");return e$E.apply(this,t)}}function e$E(t,o,r,e){s$D(t,o).cast=e;}function i$10(t){return function(o,r){s$D(o,t).cast=o[r];}}function c$_(...t){if(3!==t.length||"string"!=typeof t[1])return 1===t.length&&"[object Function]"===o$B.call(t[0])?r$w(t[0]):1===t.length&&"string"==typeof t[0]?i$10(t[0]):void 0}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const e$D=new Set;function i$$(n,i,o=!1){o&&e$D.has(i)||(o&&e$D.add(i),n.warn(`🛑 DEPRECATED - ${i}`));}function t$J(e,i,o={}){if((0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.t)("esri-deprecation-warnings")){const{moduleName:n}=o;s$C(e,`Function: ${(n?n+"::":"")+i+"()"}`,o);}}function s$C(e,o,t={}){if((0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.t)("esri-deprecation-warnings")){const{replacement:n,version:r,see:s,warnOnce:a}=t;let c=o;n&&(c+=`\n\t🛠️ Replacement: ${n}`),r&&(c+=`\n\t⚙️ Version: ${r}`),s&&(c+=`\n\t🔗 See ${s} for more details.`),i$$(e,c,a);}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
class t$I{constructor(t,o={ignoreUnknown:!1}){this.jsonToAPI=t,this.options=o,this.apiValues=[],this.jsonValues=[],this.apiToJSON=this.invertMap(t),this.apiValues=this.getKeysSorted(this.apiToJSON),this.jsonValues=this.getKeysSorted(this.jsonToAPI),this.read=t=>this.fromJSON(t),this.write=(t,o,s)=>{const i=this.toJSON(t);void 0!==i&&(o[s]=i);},this.write.isJSONMapWriter=!0;}toJSON(t){return this.apiToJSON.hasOwnProperty(t)?this.apiToJSON[t]:this.options.ignoreUnknown?void 0:t}fromJSON(t){return this.jsonToAPI.hasOwnProperty(t)?this.jsonToAPI[t]:this.options.ignoreUnknown?void 0:t}invertMap(t){const o={};for(const s in t)o[t[s]]=s;return o}getKeysSorted(t){const o=[];for(const s in t)o.push(s);return o.sort(),o}}function o$A(){return function(o){return new t$I(o,{ignoreUnknown:!0})}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function r$v(r,o={ignoreUnknown:!0}){const t=r instanceof t$I?r:new t$I(r,o),l={type:null!=o&&o.ignoreUnknown?t.apiValues:String,readOnly:null==o?void 0:o.readOnly,json:{type:t.jsonValues,read:(null==o||!o.readOnly)&&{reader:t.read},write:{writer:t.write}}};return void 0!==(null==o?void 0:o.default)&&(l.json.default=o.default),y$r(l)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function e$C(e,t,a){let c,d;return void 0===t||Array.isArray(t)?(d=e,a=t,c=[void 0]):(d=t,c=Array.isArray(e)?e:[e]),(e,t)=>{const s=e.constructor.prototype;c.forEach((c=>{const p=h$y(e,c,d);p.read&&"object"!=typeof p.read&&(p.read={}),o$I("read.reader",s[t],p),a&&(p.read.source=(p.read.source||[]).concat(a));}));}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function n$P(n){if(n.json&&n.json.origins){const o=n.json.origins,e={"web-document":["web-scene","web-map"]};for(const n in e)if(o[n]){const s=o[n];e[n].forEach((n=>{o[n]=s;})),delete o[n];}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function e$B(e,s){return e.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(function(e,n){if(""===n)return "$";const i=t$N(n,s),r=null==i?"":i;if(void 0===r)throw new Error(`could not find key "${n}" in template`);return r.toString()}))}class s$B{constructor(t,n,i){this.name=t,this.details=i,this.message=void 0,this instanceof s$B&&(this.message=n&&e$B(n,i)||"");}toString(){return "["+this.name+"]: "+this.message}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
class t$H extends s$B{constructor(e,r,s){if(super(e,r,s),!(this instanceof t$H))return new t$H(e,r,s)}}t$H.prototype.type="warning";

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function e$A(e){return !!e&&e.prototype&&e.prototype.declaredClass&&0===e.prototype.declaredClass.indexOf("esri.core.Collection")}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const i$_=n$T.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function p$14(e,r,n){var o,i;e&&(!n&&!r.read||null!=(o=r.read)&&o.reader||!1===(null==(i=r.read)?void 0:i.enabled)||d$D(e)&&o$I("read.reader",u$K(e),r));}function u$K(t){var e;const r=null!=(e=t.ndimArray)?e:0;if(r>1)return c$Z(t);if(1===r)return a$N(t);if("type"in t&&l$L(t.type)){var n,o;const e=null==(n=t.type.prototype)||null==(o=n.itemType)?void 0:o.Type,r=a$N("function"==typeof e?{type:e}:{types:e});return (e,n,o)=>{const i=r(e,n,o);return i?new t.type(i):i}}return s$A(t)}function s$A(t){return "type"in t?y$q(t.type):j$h(t.types)}function y$q(t){return t.prototype.read?(e,r,n)=>{if(null==e)return e;const o=typeof e;if("object"!==o)return void i$_.error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${o}'`);const p=new t;return p.read(e,n),p}:t.fromJSON}function f$w(t,e,r,n){return 0!==n&&Array.isArray(e)?e.map((e=>f$w(t,e,r,n-1))):t(e,void 0,r)}function c$Z(t){var e;const r=s$A(t),n=f$w.bind(null,r),o=null!=(e=t.ndimArray)?e:0;return (t,e,r)=>{if(null==t)return t;t=n(t,r,o);let i=o,p=t;for(;i>0&&Array.isArray(p);)i--,p=p[0];if(void 0!==p)for(let n=0;n<i;n++)t=[t];return t}}function a$N(t){const e=s$A(t);return (t,r,n)=>{if(null==t)return t;if(Array.isArray(t)){const r=[];for(const o of t){const t=e(o,void 0,n);void 0!==t&&r.push(t);}return r}const o=e(t,void 0,n);return void 0!==o?[o]:void 0}}function l$L(t){if(!e$A(t))return !1;const e=t.prototype.itemType;return !(!e||!e.Type)&&("function"==typeof e.Type?v$e(e.Type):m$D(e.Type))}function d$D(t){return "types"in t?m$D(t.types):v$e(t.type)}function v$e(t){return !Array.isArray(t)&&(!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||l$L(t)))}function m$D(t){for(const e in t.typeMap){if(!v$e(t.typeMap[e]))return !1}return !0}function j$h(t){var e;let r=null;const o=null!=(e=t.errorContext)?e:"type";return (e,p,u)=>{if(null==e)return e;const s=typeof e;if("object"!==s)return void i$_.error(`Expected JSON value of type 'object' to deserialize, but got '${s}'`);r||(r=g$l(t));const y=t.key;if("string"!=typeof y)return;const f=e[y],c=f?r[f]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!c){const t=`Type '${f||"unknown"}' is not supported`;return u&&u.messages&&e&&u.messages.push(new t$H(`${o}:unsupported`,t,{definition:e,context:u})),void i$_.error(t)}const a=new c;return a.read(e,u),a}}function g$l(t){const e={};for(const i in t.typeMap){var n,o;const p=t.typeMap[i],u=n$Q(p.prototype);if("function"==typeof t.key)continue;const s=u.properties[t.key];if(!s)continue;null!=(n=s.json)&&n.type&&Array.isArray(s.json.type)&&1===s.json.type.length&&"string"==typeof s.json.type[0]&&(e[s.json.type[0]]=p);const y=null==(o=s.json)?void 0:o.write;if(!y||!y.writer){e[i]=p;continue}const f=y.target,c="string"==typeof f?f:t.key,a={};y.writer(i,a,c),a[c]&&(e[a[c]]=p);}return e}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function e$z(e){if(e.json||(e.json={}),o$z(e.json),n$O(e.json),r$u(e.json),e.json.origins)for(const t in e.json.origins)o$z(e.json.origins[t]),n$O(e.json.origins[t]),r$u(e.json.origins[t]);return !0}function r$u(e){e.name&&(e.read&&"object"==typeof e.read?void 0===e.read.source&&(e.read.source=e.name):e.read={source:e.name},e.write&&"object"==typeof e.write?void 0===e.write.target&&(e.write.target=e.name):e.write={target:e.name});}function o$z(e){"boolean"==typeof e.read?e.read={enabled:e.read}:"function"==typeof e.read?e.read={enabled:!0,reader:e.read}:e.read&&"object"==typeof e.read&&void 0===e.read.enabled&&(e.read.enabled=!0);}function n$O(e){"boolean"==typeof e.write?e.write={enabled:e.write}:"function"==typeof e.write?e.write={enabled:!0,writer:e.write}:e.write&&"object"==typeof e.write&&void 0===e.write.enabled&&(e.write.enabled=!0);}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function n$N(r,n){var i;if(!n.write||n.write.writer||!1===n.write.enabled&&!n.write.overridePolicy)return;const o=null!=(i=null==r?void 0:r.ndimArray)?i:0;r&&(1===o||"type"in r&&e$A(r.type))?n.write.writer=u$J:n.write.writer=o>1?l$K(o):e$y;}function e$y(t,n,e,o){o$I(e,i$Z(t,o),n);}function i$Z(r,t){return r&&"function"==typeof r.write?r.write({},t):r&&"function"==typeof r.toJSON?r.toJSON():"number"==typeof r?o$y(r):r}function o$y(r){return r===-1/0?-Number.MAX_VALUE:r===1/0?Number.MAX_VALUE:isNaN(r)?null:r}function u$J(t,n,e,o){let u;null===t?u=null:t&&"function"==typeof t.map?(u=t.map((r=>i$Z(r,o))),"function"==typeof u.toArray&&(u=u.toArray())):u=[i$Z(t,o)],o$I(e,u,n);}function f$v(r,t,n){return 0!==n&&Array.isArray(r)?r.map((r=>f$v(r,t,n-1))):i$Z(r,t)}function l$K(t){return function(n,e,i,o){let u;if(null===n)u=null;else {u=f$v(n,o,t);let r=t,e=u;for(;r>0&&Array.isArray(e);)r--,e=e[0];if(void 0!==e)for(let t=0;t<r;t++)u=[u];}o$I(i,u,e);}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function i$Y(r,o){return a$M(r,"read",o)}function s$z(r,o){return a$M(r,"write",o)}function a$M(r,o,t){let n=r&&r.json;if(r&&r.json&&r.json.origins&&t){const e=r.json.origins[t.origin];e&&("any"===o||o in e)&&(n=e);}return n}function p$13(r){const o=y$p(r);if(r.json.origins)for(const n in r.json.origins){const i=r.json.origins[n];p$14(o,i,!1),n$N(o,i);}p$14(o,r.json,!0),n$N(o,r.json);}function y$p(r){return r.type?f$u(r):u$I(r)}function f$u(o){if(!o.type)return;let t=0,n=o.type;for(;Array.isArray(n)&&!$$3(n);)n=n[0],t++;return {type:n,ndimArray:t}}function u$I(r){if(!r.types)return;let o=0,t=r.types;for(;Array.isArray(t);)t=t[0],o++;return {types:t,ndimArray:o}}const c$Y={processPrototypePropertyMetadata(r,t){e$z(t)&&(n$P(t),p$13(t));}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const o$x=[c$Y];function e$x(t,e){for(const r of o$x)if(r.processPrototypePropertyMetadata)for(const o in t){const s=t[o];r.processPrototypePropertyMetadata(o,s,t,e);}}function r$t(t,e){for(const r of o$x)if(r.processClassPropertyMetadata)for(const o in t){const s=t[o];r.processClassPropertyMetadata(o,s,t,e);}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const o$w=new Set,s$y=new Set;function i$X(r){return i=>{i.prototype.declaredClass=r,e$x(n$Q(i.prototype).properties,r),c$X(i);const n=[],a=[];let l=i.prototype;for(;l;)l.hasOwnProperty("initialize")&&!o$w.has(l.initialize)&&(o$w.add(l.initialize),n.push(l.initialize)),l.hasOwnProperty("destroy")&&!s$y.has(l.destroy)&&(s$y.add(l.destroy),a.push(l.destroy)),l=Object.getPrototypeOf(l);o$w.clear(),s$y.clear();class p extends i{constructor(...e){if(super(...e),this.constructor===p&&"function"==typeof this.postscript){if(n.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let e=n.length-1;e>=0;e--)n[e].call(this);}}),a.length){let e=!1;Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!e){e=!0;for(let e=0;e<a.length;e++)a[e].call(this);}}});}this.postscript(...e);}}}return p.__accessorMetadata__=n$Q(i.prototype),p.prototype.declaredClass=r,p}}function n$M(e,t){return null==t.get?function(){return this.__accessor__.getterStatic(e)}:function(){return this.__accessor__.getterComputed(e)}}function c$X(t){const o=t.prototype,s=o.declaredClass,i=n$Q(o).properties;r$t(i,s);const c={};for(const e of Object.getOwnPropertyNames(i)){const t=i[e];c[e]={enumerable:!0,configurable:!0,get:n$M(e,t),set(r){const o=this.__accessor__;if(void 0!==o){if(!Object.isFrozen(this)){if(o.initialized&&t.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${e}' of ${this.declaredClass}`);if(2===o.lifecycle&&t.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${e}' of ${this.declaredClass}`);o.set(e,r);}}else Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:r});}};}Object.defineProperties(t.prototype,c);}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function o$v(o,e,i){let p,c;return void 0===e?(c=o,p=[void 0]):"string"!=typeof e?(c=o,p=[void 0],i=e):(c=e,p=Array.isArray(o)?o:[o]),(o,e)=>{const n=o.constructor.prototype;p.forEach((p=>{const s=h$y(o,p,c);s.write&&"object"!=typeof s.write&&(s.write={}),i&&o$I("write.target",i,s),o$I("write.writer",n[e],s);}));}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
class s$x extends s$B{constructor(e,t,r){if(super(e,t,r),!(this instanceof s$x))return new s$x(e,t,r)}toJSON(){if(null!=this.details)try{return {name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,((t,r)=>{if(r&&"object"==typeof r&&"function"==typeof r.toJSON)return r;try{return y$v(r)}catch(s){return "[object]"}})))}}catch(r){throw n$T.getLogger("esri.core.Error").error(r),r}return {name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new s$x(e.name,e.message,e.details)}}s$x.prototype.type="error";

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const u$H=n$T.getLogger("esri.core.urlUtils"),l$J=s$H.request,c$W="esri/config: esriConfig.request.proxyUrl is not set.",f$t=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,a$L=/^\s*http:/i,h$x=/^\s*https:/i,p$12=/^\s*file:/i,d$C=/:\d+$/,g$k=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,m$C=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),y$o=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");class $$2{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let e=m$F(this.uri.match(m$C));this.scheme=e[2]||(e[1]?"":null),this.authority=e[4]||(e[3]?"":null),this.path=e[5],this.query=e[7]||(e[6]?"":null),this.fragment=e[9]||(e[8]?"":null),null!=this.authority&&(e=m$F(this.authority.match(y$o)),this.user=e[3]||null,this.password=e[4]||null,this.host=e[6]||e[7],this.port=e[9]||null);}toString(){return this.uri}}const x$e=new $$2(s$H.applicationUrl),O$4={},w$b=(()=>{const t=m$F(x$e.path),e=t.substring(0,t.lastIndexOf(t.split("/")[t.split("/").length-1]));return `${`${x$e.scheme}://${x$e.host}${null!=x$e.port?`:${x$e.port}`:""}`}${e}`})();function U$4(t){const e={path:null,query:null},n=new $$2(t),r=t.indexOf("?");return null===n.query?e.path=t:(e.path=t.substring(0,r),e.query=b$d(n.query)),n.fragment&&(e.hash=n.fragment,null===n.query&&(e.path=e.path.substring(0,e.path.length-(n.fragment.length+1)))),e}function b$d(t){const e=t.split("&"),n={};for(const r of e){if(!r)continue;const t=r.indexOf("=");let e,o;t<0?(e=decodeURIComponent(r),o=""):(e=decodeURIComponent(r.slice(0,t)),o=decodeURIComponent(r.slice(t+1)));let i=n[e];"string"==typeof i&&(i=n[e]=[i]),Array.isArray(i)?i.push(o):n[e]=o;}return n}function R$9(t){return t&&"object"==typeof t&&"toJSON"in t&&"function"==typeof t.toJSON}function C$9(t,e){return t?e&&"function"==typeof e?Object.keys(t).map((n=>encodeURIComponent(n)+"="+encodeURIComponent(e(n,t[n])))).join("&"):Object.keys(t).map((n=>{const r=t[n];if(null==r)return "";const o=encodeURIComponent(n)+"=",i=e&&e[n];return i?o+encodeURIComponent(i(r)):Array.isArray(r)?r.map((t=>R$9(t)?o+encodeURIComponent(JSON.stringify(t)):o+encodeURIComponent(t))).join("&"):R$9(r)?o+encodeURIComponent(JSON.stringify(r)):o+encodeURIComponent(r)})).filter((t=>t)).join("&"):""}function q$5(t=!1){let e,n=l$J.proxyUrl;if("string"==typeof t){e=rt(t);const r=A$b(t);r&&(n=r.proxyUrl);}else e=!!t;if(!n)throw u$H.warn(c$W),new s$x("urlutils:proxy-not-set",c$W);e&&ct()&&(n=ut(n));return U$4(n)}function j$g(t){const e=A$b(t);let n,r;if(e){const t=v$d(e.proxyUrl);n=t.path,r=t.query?b$d(t.query):null;}if(n){const e=U$4(t);t=n+"?"+e.path;const o=C$9({...r,...e.query});o&&(t=`${t}?${o}`);}return t}const L$7={path:"",query:""};function v$d(t){const e=t.indexOf("?");return -1!==e?(L$7.path=t.slice(0,e),L$7.query=t.slice(e+1)):(L$7.path=t,L$7.query=null),L$7}function I$5(t){return t=(t=ft(t=dt(t=v$d(t).path),!0)).toLowerCase()}function S$9(t){const e={proxyUrl:t.proxyUrl,urlPrefix:I$5(t.urlPrefix)},n=l$J.proxyRules,r=e.urlPrefix;let o=n.length;for(let i=0;i<n.length;i++){const t=n[i].urlPrefix;if(0===r.indexOf(t)){if(r.length===t.length)return -1;o=i;break}0===t.indexOf(r)&&(o=i+1);}return n.splice(o,0,e),o}function A$b(t){const e=l$J.proxyRules,n=I$5(t);for(let r=0;r<e.length;r++)if(0===n.indexOf(e[r].urlPrefix))return e[r]}function P$8(t,e){return t=k$9(t),e=k$9(e),ft(t)===ft(e)}function k$9(t){const e=(t=z$6(t)).indexOf("/sharing");return e>0?t.substring(0,e):t.replace(/\/+$/,"")}function B$5(t){const e=e=>null==e||e instanceof RegExp&&e.test(t)||"string"==typeof e&&t.startsWith(e),n=l$J.interceptors;if(n)for(const r of n)if(Array.isArray(r.urls)){if(r.urls.some(e))return r}else if(e(r.urls))return r;return null}function E$4(t,e,n=!1){const r=Ot(t),o=Ot(e);return !(!n&&r.scheme!==o.scheme)&&(null!=r.host&&null!=o.host&&(r.host.toLowerCase()===o.host.toLowerCase()&&r.port===o.port))}function J$3(t){if("string"==typeof t){if(!Q$2(t))return !0;t=Ot(t);}if(E$4(t,x$e))return !0;const e=l$J.trustedServers||[];for(let n=0;n<e.length;n++){const r=N$4(e[n]);for(let e=0;e<r.length;e++)if(E$4(t,r[e]))return !0}return !1}function N$4(t){return O$4[t]||(nt(t)||et(t)?O$4[t]=[new $$2(T$6(t))]:O$4[t]=[new $$2(`http://${t}`),new $$2(`https://${t}`)]),O$4[t]}function T$6(t,e=w$b,r){return et(t)?r&&r.preserveProtocolRelative?t:"http"===x$e.scheme&&x$e.authority===M$a(t).slice(2)?`http:${t}`:`https:${t}`:nt(t)?t:m$F(D$6("/"===t[0]?at(e):e,t))}function W$2(t,e=w$b,n){if(!Q$2(t))return t;const r=z$6(t),o=r.toLowerCase(),i=z$6(e).toLowerCase().replace(/\/+$/,""),s=n?z$6(n).toLowerCase().replace(/\/+$/,""):null;if(s&&0!==i.indexOf(s))return t;const u=(t,e,n)=>-1===(n=t.indexOf(e,n))?t.length:n;let l=u(o,"/",o.indexOf("//")+2),c=-1;for(;o.slice(0,l+1)===i.slice(0,l)+"/"&&(c=l+1,l!==o.length);)l=u(o,"/",l+1);if(-1===c)return t;if(s&&c<s.length)return t;t=r.slice(c);const f=i.slice(c-1).replace(/[^/]+/g,"").length;if(f>0)for(let a=0;a<f;a++)t=`../${t}`;else t=`./${t}`;return t}function z$6(t){return t=$t(t=yt(t=mt(t=T$6(t=t.trim()))))}function D$6(...t){const e=t.filter(r$A);if(!e||!e.length)return;const n=[];if(Q$2(e[0])){const t=e[0],r=t.indexOf("//");-1!==r&&(n.push(t.slice(0,r+1)),it(e[0])&&(n[0]+="/"),e[0]=t.slice(r+2));}else "/"===e[0][0]&&n.push("");const o=e.reduce(((t,e)=>e?t.concat(e.split("/")):t),[]);for(let r=0;r<o.length;r++){const t=o[r];".."===t&&n.length>0&&".."!==n[n.length-1]?n.pop():(!t&&r===o.length-1||t&&("."!==t||0===n.length))&&n.push(t);}return n.join("/")}function M$a(t,e=!1){if(F$5(t)||G$6(t))return null;let n=t.indexOf("://");if(-1===n&&et(t))n=2;else {if(-1===n)return null;n+=3;}const r=t.indexOf("/",n);return -1!==r&&(t=t.slice(0,r)),e&&(t=ft(t,!0)),t}function Q$2(t){return et(t)||nt(t)}function F$5(t){return null!=t&&"blob:"===t.slice(0,5)}function G$6(t){return "data:"===t.slice(0,5)}function H$3(t){const e=V$2(t);if(!e||!e.isBase64)return null;const n=atob(e.data),r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r.buffer}const K$1=/^data:(.*?)(;base64)?,(.*)$/;function V$2(t){const e=t.match(K$1);if(!e)return null;const[,n,r,o]=e;return {mediaType:n,isBase64:!!r,data:o}}function X$2(t){return t.isBase64?`data:${t.mediaType};base64,${t.data}`:`data:${t.mediaType},${t.data}`}function et(t){return null!=t&&void 0!==t&&"/"===t[0]&&"/"===t[1]}function nt(t){return f$t.test(t)}function rt(t){return h$x.test(t)||"https"===x$e.scheme&&et(t)}function ot(t){return a$L.test(t)||"http"===x$e.scheme&&et(t)}function it(t){return p$12.test(t)}function ut(t){return et(t)?`https:${t}`:t.replace(a$L,"https:")}function lt(){return "http"===x$e.scheme}function ct(){return "https"===x$e.scheme}function ft(t,e=!1){return et(t)?t.slice(2):(t=t.replace(f$t,""),e&&t.length>1&&"/"===t[0]&&"/"===t[1]&&(t=t.slice(2)),t)}function at(t){const e=t.indexOf("//"),n=t.indexOf("/",e+2);return -1===n?t:t.slice(0,n)}function ht(t){let e=0;if(Q$2(t)){const n=t.indexOf("//");-1!==n&&(e=n+2);}const n=t.lastIndexOf("/");return n<e?t:t.slice(0,n+1)}function pt(t,e){if(!t)return "";const n=U$4(t).path.replace(/\/+$/,""),r=n.substring(n.lastIndexOf("/")+1);if(null==e||!e.length)return r;const o=new RegExp(`.(${e.join("|")})$`,"ig");return r.replace(o,"")}function dt(t){return t&&"/"===t[t.length-1]?t:`${t}/`}function gt(t){return t.replace(/\/+$/,"")}function mt(t){if(/^https?:\/\//i.test(t)){const e=v$d(t);t=(t=e.path.replace(/\/{2,}/g,"/")).replace("/","//"),e.query&&(t+=`?${e.query}`);}return t}function yt(t){return t.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function $t(t){const e=l$J.httpsDomains;if(!ot(t))return t;const n=t.indexOf("/",7);let r;if(r=-1===n?t:t.slice(0,n),r=r.toLowerCase().slice(7),d$C.test(r)){if(!r.endsWith(":80"))return t;r=r.slice(0,-3),t=t.replace(":80","");}return lt()&&r===x$e.authority&&!g$k.test(t)||(ct()&&r===x$e.authority||e&&e.some((t=>r===t||r.endsWith(`.${t}`)))||ct()&&!A$b(t))&&(t=ut(t)),t}function xt(t,e,n){if(!(e&&n&&t&&Q$2(t)))return t;const r=t.indexOf("//"),o=t.indexOf("/",r+2),i=t.indexOf(":",r+2),s=Math.min(o<0?t.length:o,i<0?t.length:i);if(t.slice(r+2,s).toLowerCase()!==e.toLowerCase())return t;return `${t.slice(0,r+2)}${n}${t.slice(s)}`}function Ot(t){return "string"==typeof t?new $$2(T$6(t)):(t.scheme||(t.scheme=x$e.scheme),t)}function Ut(t,e){const n=U$4(t),r=Object.keys(n.query||{});return r.length>0&&e&&e.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),n.path}function bt(t,e,n){const r=U$4(t),o=r.query||{};return o[e]=String(n),`${r.path}?${C$9(o)}`}function Rt(t,e){const n=U$4(t),r=n.query||{};for(const i in e)r[i]=e[i];const o=C$9(r);return o?`${n.path}?${o}`:n.path}function qt(t){if(t$M(t))return null;const e=t.match(jt);return e?e[1]:null}const jt=/.*?\.([^\/]*)$/;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function o$u(){const t=n$L.getRandomValues(new Uint16Array(8));t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;const o=o=>t[o].toString(16);return o(0)+o(1)+"-"+o(2)+"-"+o(3)+"-"+o(4)+"-"+o(5)+o(6)+o(7)}const n$L=_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.e.crypto||_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.e.msCrypto;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const r$s=7;function t$G(e){switch(e){case"defaults":return 0;case"service":return 2;case"portal-item":return 3;case"web-scene":return 4;case"web-map":return 5;case"user":return 6}}function n$K(r){switch(r){case 0:return "defaults";case 2:return "service";case 3:return "portal-item";case 4:return "web-scene";case 5:return "web-map";case 6:return "user"}return m$F(void 0)}function c$V(e){return n$K(e)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function p$11(i){return o$t[n$J(i)]||e$w}function n$J(i){return i instanceof Blob?i.type:t$F(i.url)}function t$F(p){const n=qt(p);return g$j[n]||a$K}const o$t={},a$K="text/plain",e$w=o$t[a$K],g$j={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip"};for(const l in g$j)o$t[g$j[l]]=l;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function c$U(r,o){const s=o&&o.url&&o.url.path;if(r&&s&&(r=T$6(r,s,{preserveProtocolRelative:!0}),o.portalItem&&o.readResourcePaths)){const e=W$2(r,o.portalItem.itemUrl);h$w.test(e)&&o.readResourcePaths.push(o.portalItem.resourceFromPath(e).path);}return I$4(r,o&&o.portal)}function i$W(r,a,u=0){if(!r)return r;!Q$2(r)&&a&&a.blockedRelativeUrls&&a.blockedRelativeUrls.push(r);let n=T$6(r);if(a){const e=a.verifyItemRelativeUrls&&a.verifyItemRelativeUrls.rootPath||a.url&&a.url.path;if(e){const o=I$4(e,a.portal);n=W$2(I$4(n,a.portal),o,o),n!==r&&a.verifyItemRelativeUrls&&a.verifyItemRelativeUrls.writtenUrls.push(n);}}return n=U$3(n,a&&a.portal),Q$2(n)&&(n=z$6(n)),null!=a&&a.resources&&null!=a&&a.portalItem&&!Q$2(n)&&!G$6(n)&&0===u&&a.resources.toKeep.push({resource:a.portalItem.resourceFromPath(n)}),n}function m$B(r,e,t){return c$U(r,t)}function p$10(r,e,t,o){const s=i$W(r,o);void 0!==s&&(e[t]=s);}const f$s=/\/items\/([^\/]+)\/resources\//,h$w=/^\.\/resources\//;function v$c(e){const t=r$A(e)?e.match(f$s):null;return r$A(t)?t[1]:null}function U$3(r,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?xt(r,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):r}function I$4(r,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return r;const t=`${e.urlKey}.${e.customBaseUrl}`;return E$4(x$e,`${x$e.scheme}://${t}`)?xt(r,e.portalHostname,t):xt(r,t,e.portalHostname)}var R$8=Object.freeze({__proto__:null,fromJSON:c$U,toJSON:i$W,read:m$B,write:p$10,itemIdFromResourceUrl:v$c});

/**
 * Useful utility methods for work with DOM objects. With this you can hide, show, enable, disable nodes, or check if they are in the layout.
 */
// Ensures a string is presented as an [] of string.
function str2array(s) {
  if (Array.isArray(s)) {
    return s.filter((s) => !!s);
  }
  return s ? s.split(" ").filter((s) => !!s) : [];
}
//--------------------------------------------------------------------------
//
// General utility methods
//
//--------------------------------------------------------------------------
let workerBodyDir;
/**
 * Checks whether the document is formed for a left-to-right language.
 * @returns The true value in the case of a left-to-right language and false otherwise.
 */
function isBodyLtr() {
  return (((0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.h)("worker") ? workerBodyDir : document.body.dir) || "ltr").toLowerCase() === "ltr"; // Boolean
}
//--------------------------------------------------------------------------
//
// Work with attributes (replacement for dojo/dom-attr.js)
//
//--------------------------------------------------------------------------
// attribute-related functions (to be obsolete soon)
const forcePropNames = {
  innerHTML: 1,
  textContent: 1,
  className: 1,
  value: 1
};
const attrNames = {
  // original attribute names
  classname: "class"
};
const names = {
  // properties renamed to avoid clashes with reserved words
  class: "className",
  // properties written as camelCase
  tabindex: "tabIndex",
  readonly: "readOnly",
  colspan: "colSpan",
  frameborder: "frameBorder",
  rowspan: "rowSpan",
  textcontent: "textContent"
};
function setAttribute(node, attributeMapOrName, value) {
  if (typeof attributeMapOrName === "object") {
    for (const name in attributeMapOrName) {
      if (name === "style") {
        setAttribute(node, "style", attributeMapOrName[name]);
      }
      else {
        setAttribute(node, name, attributeMapOrName[name]);
      }
    }
    return node;
  }
  if (value === undefined) {
    return node;
  }
  const name = attributeMapOrName;
  const lc = name.toLowerCase();
  const propName = names[lc] || name;
  const forceProp = forcePropNames[propName];
  if (propName === "style" && typeof value !== "string") {
    setStyle(node, value);
  }
  else if (forceProp || typeof value === "boolean") {
    node[propName] = value;
  }
  else {
    // node's attribute
    node.setAttribute(attrNames[lc] || name, value + "");
  }
  return node;
}
//--------------------------------------------------------------------------
//
// Work with classes (replacement for dojo/dom-class.js)
//
//--------------------------------------------------------------------------
/**
 * Adds classes to the node class list.
 * @param node A node.
 * @param classStr Classes to add. This can be a space-separated list of class names
 * or an array of class names.
 */
function addClass(node, classStr) {
  node &&
    node.classList &&
    str2array(classStr).forEach((s) => {
      node.classList.add(s);
    });
}
/**
 * Removes classes from the node class list.
 * @param node A node.
 * @param classStr Classes to remove. This can be a space-separated list of class names
 * or an array of class names.
 */
function removeClass(node, classStr) {
  node &&
    node.classList &&
    str2array(classStr).forEach((s) => {
      node.classList.remove(s);
    });
}
/**
 * Replaces one or more classes on a node list.
 * @param node A node.
 * @param classesToAdd Classes to add.
 * @param classesToRemove Classes to remove.
 */
function replaceClass(node, addClassStr, removeClassStr) {
  removeClass(node, removeClassStr);
  addClass(node, addClassStr);
}
/**
 * Adds/removes classes in a node class list.
 * @param node A node.
 * @param classes  Classes to toggle. This can be a space-separated list of class names
 * or an array of class names.
 * @param add Add/remove flag: true - add, false - remove.
 */
function toggleClass(node, classStr, add) {
  add ? addClass(node, classStr) : removeClass(node, classStr);
}
/**
 * Checks a node to contain a class.
 * @param node A node.
 * @param classStr A class name to look for.
 * @returns True if this class presents in the class list of the given node.
 */
function containsClass(node, classStr) {
  return node && node.classList ? node.classList.contains(classStr) : false;
}
//--------------------------------------------------------------------------
//
// Work with styles (replacement for dojo/dom-style.js)
//
//--------------------------------------------------------------------------
const _pixelNamesCache = {
  left: true,
  top: true
};
const _floatAliases = {
  cssFloat: 1,
  styleFloat: 1,
  float: 1
};
const _pixelRegExp = /margin|padding|width|height|max|min|offset/; // |border
function getStyle(node, name, computedStyle) {
  const style = node.style;
  if (name === "opacity") {
    return style.opacity;
  }
  name = _floatAliases[name] ? ("cssFloat" in style ? "cssFloat" : "styleFloat") : name;
  const s = computedStyle || getComputedStyle$1(node);
  return _toStyleValue(node, name, s[name] || style[name]);
}
function setStyle(node, name, value) {
  name = _floatAliases[name] ? ("cssFloat" in node.style ? "cssFloat" : "styleFloat") : name;
  const isObjectStyle = name && typeof name === "object" && value === undefined;
  if (!isObjectStyle) {
    if (name === "opacity") {
      node.style.opacity = value + "";
    }
    else {
      node.style[name] = value;
    }
  }
  else {
    for (const x in name) {
      setStyle(node, x, name[x]);
    }
  }
}
/**
 * Gets computed style of a given HTML node.
 * @param node An HTML node.
 * @returns The computed style.
 */
function getComputedStyle$1(node) {
  return node && node.nodeType === 1 && window.getComputedStyle(node);
}
function toPixelValue(value) {
  return parseFloat(value) || 0;
}
function _toStyleValue(node, type, value) {
  type = type.toLowerCase();
  // Adjustments for IE and Edge
  if (value === "auto") {
    if (type === "height") {
      return node.offsetHeight;
    }
    if (type === "width") {
      return node.offsetWidth;
    }
  }
  if (type === "fontweight") {
    return value + "" === "700" ? "bold" : "normal";
  }
  if (!(type in _pixelNamesCache)) {
    _pixelNamesCache[type] = _pixelRegExp.test(type);
  }
  return _pixelNamesCache[type] ? toPixelValue(value) : value;
}
//--------------------------------------------------------------------------
//
// Work with geometry (replacement for dojo/dom-geometry.js)
//
//--------------------------------------------------------------------------
/**
 * Gets the position and size of a node relative to the viewport.
 * @param node A node to calculate the size and position.
 * @param includeScroll A flag include any document offsets that may affect the position relative to the viewport.
 * @returns The box: x/y - position, w/h - dimensions.
 */
function position(node, includeScroll) {
  const clientRect = node.getBoundingClientRect();
  const result = {
    x: clientRect.left,
    y: clientRect.top,
    w: clientRect.right - clientRect.left,
    h: clientRect.bottom - clientRect.top
  };
  if (includeScroll) {
    const scroll = docScroll();
    result.x += scroll.x;
    result.y += scroll.y;
  }
  return result;
}
/**
 * Gets a margin box of a node.
 * @param node A node.
 * @param computedStyle An optional computed style of the given node.
 * @returns The margin box: l/t - position, w/h - dimensions.
 */
function getMarginBox(node, computedStyle) {
  const s = computedStyle || getComputedStyle$1(node), me = getMarginExtents(node, s), l = node.offsetLeft - me.l, t = node.offsetTop - me.t;
  return {
    l,
    t,
    w: node.offsetWidth + me.w,
    h: node.offsetHeight + me.h
  };
}
function setMarginBox(node, box, computedStyle) {
  let w = box.w, h = box.h;
  const s = computedStyle || getComputedStyle$1(node), pb = getPadBorderExtents(node, s), mb = getMarginExtents(node, s);
  if (w >= 0) {
    w = Math.max(w - pb.w - mb.w, 0);
  }
  if (h >= 0) {
    h = Math.max(h - pb.h - mb.h, 0);
  }
  setBox(node, box.l, box.t, w, h);
}
function setBox(node, l, t, w, h, u) {
  u = u || "px";
  const s = node.style;
  if (!isNaN(l)) {
    s.left = l + u;
  }
  if (!isNaN(t)) {
    s.top = t + u;
  }
  if (w >= 0) {
    s.width = w + u;
  }
  if (h >= 0) {
    s.height = h + u;
  }
}
/**
 * Gets an object with properties useful for node fitting with regards to box margins (i.e., the outer-box).
 * @param node A node.
 * @param computedStyle An optional computed style of the given node.
 * @returns Calculated margin sizes: l/t/r/b - respective margins, w = l + r, h = t + b.
 */
function getMarginExtents(node, computedStyle) {
  const s = computedStyle || getComputedStyle$1(node), px = toPixelValue, l = px(s.marginLeft), t = px(s.marginTop), r = px(s.marginRight), b = px(s.marginBottom);
  return {
    l,
    t,
    r,
    b,
    w: l + r,
    h: t + b
  };
}
/**
 * Gets a margin box of a node.
 * @param node A node.
 * @param computedStyle An optional computed style of the given node.
 * @returns The content box: l/t - position, w/h - dimensions.
 */
function getContentBox(node, computedStyle) {
  const s = computedStyle || getComputedStyle$1(node), pe = getPadExtents(node, s), be = getBorderExtents(node, s), l = node.offsetLeft + pe.l + be.l, t = node.offsetTop + pe.t + be.t;
  let h, w = node.clientWidth;
  if (!w) {
    w = node.offsetWidth - be.w;
    h = node.offsetHeight - be.h;
  }
  else {
    h = node.clientHeight;
  }
  return {
    l,
    t,
    w: w - pe.w,
    h: h - pe.h
  };
}
/**
 * Gets an object with properties useful for node fitting with regards to padding and border.
 * @param node A node.
 * @param computedStyle An optional computed style of the given node.
 * @returns Calculated padding + border sizes: l/t/r/b - respective sizes, w = l + r, h = t + b.
 */
function getPadBorderExtents(node, computedStyle) {
  const s = computedStyle || getComputedStyle$1(node), p = getPadExtents(node, s), b = getBorderExtents(node, s);
  return {
    l: p.l + b.l,
    t: p.t + b.t,
    r: p.r + b.r,
    b: p.b + b.b,
    w: p.w + b.w,
    h: p.h + b.h
  };
}
/**
 * Gets an object with properties useful for node fitting regads to paddings.
 * @param node A node.
 * @param computedStyle An optional computed style of the given node.
 * @returns Calculated padding sizes: l/t/r/b - respective sizes, w = l + r, h = t + b.
 */
function getPadExtents(node, computedStyle) {
  const s = computedStyle || getComputedStyle$1(node), px = toPixelValue, l = px(s.paddingLeft), t = px(s.paddingTop), r = px(s.paddingRight), b = px(s.paddingBottom);
  return {
    l,
    t,
    r,
    b,
    w: l + r,
    h: t + b
  };
}
/**
 * Gets an object with properties useful for node fitting regads to borders.
 * @param node A node.
 * @param computedStyle An optional computed style of the given node.
 * @returns Calculated border sizes: l/t/r/b - respective sizes, w = l + r, h = t + b.
 */
function getBorderExtents(node, computedStyle) {
  const px = toPixelValue, s = computedStyle || getComputedStyle$1(node), l = s.borderLeftStyle !== "none" ? px(s.borderLeftWidth) : 0, t = s.borderTopStyle !== "none" ? px(s.borderTopWidth) : 0, r = s.borderRightStyle !== "none" ? px(s.borderRightWidth) : 0, b = s.borderBottomStyle !== "none" ? px(s.borderBottomWidth) : 0;
  return {
    l,
    t,
    r,
    b,
    w: l + r,
    h: t + b
  };
}
function create(tagName, attrs, refNode, position) {
  if ((0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.h)("worker")) {
    const e = new Error("Can't create DOM elements inside a web worker.");
    console.error(e);
    console.error(e.stack);
    throw e;
  }
  const node = document.createElement(tagName);
  if (attrs) {
    setAttribute(node, attrs);
  }
  if (refNode) {
    place(node, refNode, position);
  }
  return node;
}
/**
 * Creates a node out of the given HTML string.
 * @param htmlText String. E.g. "<div>Hello</div>".
 * @returns A created HTML element.
 */
function toDom(htmlText) {
  return htmlText && create("div", { innerHTML: htmlText }).children[0];
}
/**
 * Adds a node to the child nodes of the reference node at the specific position.
 * @param node A HTML node.
 * @param refNode A reference node.
 * @param position  A position of the node relative to the reference node. Default is "last".
 * @returns The placed node.
 */
function place(node, refNode, position) {
  if (typeof position === "number") {
    // inline'd type check
    const cn = refNode.childNodes;
    if (!cn.length || cn.length <= position) {
      refNode.appendChild(node);
    }
    else {
      _insertBefore(node, cn[position < 0 ? 0 : position]);
    }
  }
  else {
    switch (position) {
      case "before":
        _insertBefore(node, refNode);
        break;
      case "after":
        _insertAfter(node, refNode);
        break;
      case "replace":
        refNode.parentNode.replaceChild(node, refNode);
        break;
      case "first":
        if (refNode.firstChild) {
          _insertBefore(node, refNode.firstChild);
          break;
        }
      // else fallthrough...
      default:
        // aka: last
        refNode.appendChild(node);
    }
  }
  return node;
}
function _insertAfter(node, refNode) {
  const parent = refNode.parentNode;
  if (parent) {
    if (parent.lastChild === refNode) {
      parent.appendChild(node);
    }
    else {
      parent.insertBefore(node, refNode.nextSibling);
    }
  }
}
function _insertBefore(node, refNode) {
  const parent = refNode.parentNode;
  if (parent) {
    parent.insertBefore(node, refNode);
  }
}
/**
 * Safely removes all children of the node.
 * @param node A node.
 */
function empty(node) {
  if ("innerHTML" in node) {
    node.innerHTML = "";
  }
  // SVG/strict elements don't support innerHTML
  while (node.lastChild) {
    node.removeChild(node.lastChild);
  }
}
/**
 * Removes a node from its parent, clobbering it and all of its children.
 * @param node A node.
 */
function destroy(node) {
  if (!node) {
    return;
  }
  if (node.firstChild) {
    empty(node);
  }
  if (node.parentNode) {
    node.parentNode.removeChild(node);
  }
}
/**
 * Queries for an array of elements.
 * @param selector        String. Supported values: ".Class" | "NodeName" | ".ClassA.ClassB". The dot represents a class, otherwise it's a nodeName.
 * @param sourceNode      Optional. If missing, document body will be used.
 *
 * @returns [] of found elements.
 *
 * @example
 * 1. query(".list").
 *
 * 2. query(".list.indexedList")
 *
 * 3. query("div.list");
 *
 * 4. query("div");
 */
function query(selector, sourceNode) {
  const foundElements = [];
  const classes = selector.split(".").filter((c) => !!c);
  const nodeName = selector.indexOf(".") === -1 || selector.indexOf(".") > 0 ? classes.shift().toLowerCase() : null;
  if (!nodeName && !classes.length) {
    return foundElements;
  }
  traverseChildren(sourceNode || document.body, (node) => {
    const hasClasses = !classes.length || classes.every((c) => containsClass(node, c));
    const hasNodeName = !nodeName || node.nodeName.toLowerCase() === nodeName;
    if (hasClasses && hasNodeName) {
      foundElements.push(node);
    }
  });
  return foundElements;
}
//--------------------------------------------------------------------------
//
// Visibility
//
//--------------------------------------------------------------------------
/**
 * Returns true if the given DOM element contains "esriGEHidden" tag.
 */
function isHidden$1(element) {
  return element && containsClass(element, "esriGEHidden");
}
/**
 * Hides DOM elements by adding "esriGEHidden" tag to their class.
 * @returns elements
 */
function hide(elements) {
  return addTag(elements, "esriGEHidden");
}
/**
 * Shows DOM elements by removing "esriGEHidden" tag from their class.
 * @returns elements
 */
function show(elements) {
  return removeTag(elements, "esriGEHidden");
}
/**
 * Shows/hides DOM elements by adding/removing "esriGEHidden" tag from their class.
 * @param visible: Boolean   true - show, false - hide
 * @returns elements
 */
function display(elements, visible) {
  if (visible) {
    return show(elements);
  }
  return hide(elements);
}
//--------------------------------------------------------------------------
//
// Tags
//
//--------------------------------------------------------------------------
/**
 * Adds the given tag to the class of DOM elements.
 * @param elements A single DOM element or an array of DOM elements.
 * @param tag A tag to add.
 * @returns elements.
 */
function addTag(elements, tag) {
  return applyCallback(elements, (element) => {
    addClass(element, tag);
  });
}
/**
 * Removes the given tag from the class of DOM elements.
 * @param elements A single DOM element or an array of DOM elements.
 * @param tag A tag to remove.
 * @returns elements.
 */
function removeTag(elements, tag) {
  return applyCallback(elements, (element) => {
    element && removeClass(element, tag);
  });
}
/**
 * Applies a callback to the given DOM elements.
 * @param elements A single DOM element or an array of DOM elements to apply the callback.
 * @param callback A callback to be called for every element.
 * @param scope An optional scope to execute the callback on.
 * @returns elements.
 */
function applyCallback(elements, callback) {
  if (Array.isArray(elements)) {
    elements.forEach(callback);
  }
  else {
    callback(elements);
  }
  return elements;
}
/**
 * Checks if a node is a child of another node.
 * @param node A node to check.
 * @param parent Another node to check it as a parent of the given node.
 * @return True if the node is a child of another node in the chain of its parents.
 */
function isChildOf(node, parent, checkFunc) {
  let isChild = false;
  // recursive function
  const checkParent = (node) => {
    if (checkFunc && !checkFunc(node)) {
      return;
    }
    if (node.parentNode === parent) {
      isChild = true;
    }
    else {
      node.parentNode && checkParent(node.parentNode);
    }
  };
  node && checkParent(node);
  return isChild;
}
/**
 * Checks if a node is part of the DOM tree attached to the document body.
 * TODO: not sure if we need to check visibility and opacity here
 * A better way to do it:
 * var s = getStyleComputedStyle(node);
 * s.display !== "none";
 * s.visibility !== "hidden";
 * s.opacity !== "0";
 */
function isNodeInLayout(node) {
  return isChildOf(node, document.body, (node) => _inLayout(node));
}
function _inLayout(node) {
  return (!isHidden$1(node) &&
    getStyle(node, "display") !== "none" &&
    !containsClass(node, "dijitHidden") /* for tab container */);
}
//--------------------------------------------------------------------------
//
// Traverse children
//
//--------------------------------------------------------------------------
/**
 * Goes through all descendants of a node and applies a function for every node.
 * @param node A node to start.
 * @param processor A function to be applied to every child node.
 * If it returns true, the processing stops.
 */
function traverseChildren(node, processFunc) {
  if (!node || !node.children) {
    return;
  }
  for (let i = 0; i < node.children.length; i++) {
    const child = node.children[i];
    if (processFunc(child, node)) {
      return;
    }
    traverseChildren(child, processFunc);
  }
}
//--------------------------------------------------------------------------
//
// Scroll
//
//--------------------------------------------------------------------------
/**
 * @returns Current scroll offsets of the document body.
 */
function docScroll() {
  return {
    x: window.pageXOffset || 0,
    y: window.pageYOffset || 0
  };
}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function e$v(e){return e&&("function"==typeof e.on||"function"==typeof e.addEventListener)}function r$r(r,t,n){if(!e$v(r))throw new TypeError("target is not a Evented or EventTarget object");if("on"in r)return r.on(t,n);if(Array.isArray(t)){const e=t.slice();for(const t of e)r.addEventListener(t,n);return {remove(){for(const t of e)r.removeEventListener(t,n);}}}return r.addEventListener(t,n),{remove(){r.removeEventListener(t,n);}}}function t$E(t,n,o){if(!e$v(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(n,o);const i=r$r(t,n,(e=>{i.remove(),o.call(t,e);}));return {remove(){i.remove();}}}

// geoenrichment
let _deviceInfo;
function _getDevice() {
  if (_deviceInfo) {
    return _deviceInfo;
  }
  const device = {
    ios: false,
    android: false,
    androidChrome: false,
    desktop: false,
    iphone: false,
    ipod: false,
    ipad: false,
    edge: false,
    ie: false,
    firefox: false,
    safari: false,
    macos: false,
    windows: false,
    electron: false,
    pixelRatio: 1,
    os: null,
    osVersion: "",
    webView: false,
    worker: false
  };
  try {
    if ((0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.h)("worker") || self.window === undefined) {
      device.desktop = true;
      device.worker = true;
      return (_deviceInfo = device);
    }
    const win = window;
    const platform = win.navigator.platform;
    const ua = win.navigator.userAgent;
    const screenWidth = win.screen.width;
    const screenHeight = win.screen.height;
    const android = ua.match(/(Android);?[\s\/]+([\d.]+)?/);
    let ipad = ua.match(/(iPad).*OS\s([\d_]+)/); // [number, number, string];
    const ipod = ua.match(/(iPod)(.*OS\s([\d_]+))?/);
    const iphone = !ipad && ua.match(/(iPhone\sOS|iOS)\s([\d_]+)/);
    const ie = ua.indexOf("MSIE ") >= 0 || ua.indexOf("Trident/") >= 0;
    const edge = ua.indexOf("Edge/") >= 0;
    const firefox = ua.indexOf("Gecko/") >= 0 && ua.indexOf("Firefox/") >= 0;
    const windows = platform === "Win32";
    const electron = ua.toLowerCase().indexOf("electron") >= 0;
    let macos = platform === "MacIntel";
    device.safari = macos && !android && !/chrome/i.test(ua) && /safari/i.test(ua);
    // iPadOs 13 fix
    const iPadScreens = [
      "1024x1366",
      "1366x1024",
      "834x1194",
      "1194x834",
      "834x1112",
      "1112x834",
      "768x1024",
      "1024x768"
    ];
    if (!ipad && macos && hasTouch() && iPadScreens.indexOf(screenWidth + "x" + screenHeight) >= 0) {
      ipad = ua.match(/(Version)\/([\d.]+)/); // [number, number, string];
      if (!ipad) {
        ipad = [0, 1, "13_0_0"];
      }
      macos = false;
    }
    device.ie = ie;
    device.edge = edge;
    device.firefox = firefox;
    // Android
    if (android && !windows) {
      device.os = "android";
      device.osVersion = android[2];
      device.android = true;
      device.androidChrome = ua.toLowerCase().indexOf("chrome") >= 0;
    }
    if (ipad || iphone || ipod) {
      device.os = "ios";
      device.ios = true;
    }
    // iOS
    if (iphone && !ipod) {
      device.osVersion = iphone[2].replace(/_/g, ".");
      device.iphone = true;
    }
    if (ipad) {
      device.osVersion = ipad[2].replace(/_/g, ".");
      device.ipad = true;
    }
    if (ipod) {
      device.osVersion = ipod[3] ? ipod[3].replace(/_/g, ".") : null;
      device.ipod = true;
    }
    // iOS 8+ changed UA
    if (device.ios && device.osVersion && ua.indexOf("Version/") >= 0) {
      if (device.osVersion.split(".")[0] === "10") {
        device.osVersion = ua.toLowerCase().split("version/")[1].split(" ")[0];
      }
    }
    // Webview
    device.webView =
      !!((iphone || ipad || ipod) && (ua.match(/.*AppleWebKit(?!.*Safari)/i) || win.navigator.standalone)) ||
        (win.matchMedia && win.matchMedia("(display-mode: standalone)").matches);
    // Desktop
    device.desktop = !(device.ios || device.android) || electron;
    if (device.desktop) {
      device.electron = electron;
      device.macos = macos;
      device.windows = windows;
      if (device.macos) {
        device.os = "macos";
      }
      else if (device.windows) {
        device.os = "windows";
      }
      else if (/Linux/.test(platform)) {
        device.os = "linux";
      }
    }
    // Pixel Ratio
    device.pixelRatio = win.devicePixelRatio || 1;
  }
  catch (e) {
    device.error = String(e);
  }
  return (_deviceInfo = device);
}
/**
 * Tests the device type.
 * @returns True if this is a mobile device.
 */
function isMobileDevice() {
  return !_getDevice().desktop;
}
/**
 * Tests touch support on the device.
 * @returns True if this is a desktop device with touch screen.
 */
function isPCWithTouchScreen() {
  return _getDevice().desktop && hasTouch();
}
/**
 * Tests touch support on the device.
 * @returns True if this is a mobile device or a desktop device with touch screen.
 */
function hasTouch() {
  // taken from dojo/has.js
  return ("ontouchstart" in document ||
    ("onpointerdown" in document && navigator.maxTouchPoints > 0) ||
    navigator.msMaxTouchPoints > 0);
}

// esri4.core
function on(target, type, listener) {
  const support = touchSupport(target, type, listener);
  return r$r(target, support.type, support.listener);
}
function once(target, type, listener) {
  const handle = on(target, type, (event) => {
    handle.remove();
    listener.call(null, event);
  });
  return handle;
}
const _pcTouchMap = {
  click: ["click", "touchend"],
  press: ["mousedown", "touchstart"],
  move: ["mousemove", "touchmove"],
  release: ["mouseup", "touchend"],
  over: ["mouseover", "touchstart"],
  out: ["mouseout", "touchend"],
  enter: ["mouseenter", "touchstart"],
  leave: ["mouseleave", "touchend"]
};
const EVENTS_MAP = (() => {
  const map = {};
  const index = isMobileDevice() ? 1 : 0;
  for (const key in _pcTouchMap) {
    map[key] = _pcTouchMap[key][index];
  }
  return map;
})();
/**
 * Tests a target object and an event type to support touch events and returns
 * an updated event type and listener.
 * @param target A target object.
 * @param type An event type or an array of event types.
 * Generic event types are auto-replaced with actual event types depending on device used.
 * For example, a "click" type is auto-replaced with "touchend" for mobile devices.
 * @param listener Event listener.
 * @param composer An optional function composing a result event type for a converted
 * generic event type.
 * @returns The updated event type and listener. In the case when the target is not a DOM node
 * or a generic event type is not passed, the original type and listener are returned.
 */
function touchSupport(target, type, listener, composer) {
  if (typeof type === "string" && type.indexOf(",") !== -1) {
    throw new TypeError("Event notation like 'click, mouseup' is not supported.");
  }
  if (target && typeof target.addEventListener === "function") {
    const generics = [];
    const other = [];
    (Array.isArray(type) ? type : [type]).forEach((t) => {
      (EVENTS_MAP[t] ? generics : other).push(t);
    });
    const typeCache = {};
    const ignoreCache = {};
    const pcWithTouch = isPCWithTouchScreen();
    // Collect converted generic values in the cache.
    if (generics.length) {
      generics.forEach((t) => {
        const events = pcWithTouch ? _pcTouchMap[t] : [EVENTS_MAP[t]];
        events.forEach((g) => {
          if (!typeCache[g]) {
            typeCache[g] = !composer ? g : composer(g);
          }
        });
        if (pcWithTouch) {
          // Ignore cache collects mouse events to be ignored
          // after touch event.
          const mouseEvent = events[0];
          const touchEvent = events[1];
          let touchMap = ignoreCache[mouseEvent];
          if (!touchMap) {
            touchMap = ignoreCache[mouseEvent] = {};
          }
          touchMap[touchEvent] = 1;
        }
      });
      // Now collect other values in the cache.
      other.forEach((t) => {
        if (!typeCache[t]) {
          typeCache[t] = t;
        }
        // Don't ignore mouse event if it is explicitely passed.
        if (ignoreCache[t]) {
          delete ignoreCache[t];
        }
      });
      // Finally we collect all types
      type = [];
      for (const t in typeCache) {
        type.push(typeCache[t]);
      }
    }
    if (generics.length && pcWithTouch) {
      let ignoreMouseHandle;
      let lastTouch;
      const _removeMouseHandle = () => {
        ignoreMouseHandle && clearTimeout(ignoreMouseHandle);
        ignoreMouseHandle = null;
      };
      return {
        type,
        listener: (event) => {
          if (event.touches) {
            // We cannot use event.preventDefault() to ignore mouse event when touch event appears,
            // because mouse event will be lost and other listeners listening for mouse event will not receive it!
            // Instead of this, we setup an ignore mouse handle for 500 milliseconds
            // (mouse event is generated after touch event in 300 milliseconds).
            _removeMouseHandle(); // Remove previous timeout (touchmove event support!)
            ignoreMouseHandle = setTimeout(_removeMouseHandle, 500);
            lastTouch = event.type;
          }
          else if (ignoreMouseHandle) {
            const touchMap = ignoreCache[event.type];
            if (touchMap && touchMap[lastTouch]) {
              // Ignore mouse event!
              return;
            }
          }
          listener.call(null, event);
        }
      };
    }
  }
  return { type, listener };
}

// geoenrichment.utils
class AnimationItem {
  start(targets, oldNode) {
    this._deferred = (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.c)();
    this._oldNode = oldNode;
    if (!targets.length || !targets[0].node) {
      this.finish();
    }
    else {
      this._targets = targets;
      once(targets[0].node, "animationend", () => this.finish());
      for (let i = 0; i < targets.length; i++) {
        const target = targets[i];
        addClass(target.node, target.classes);
        addClass(target.node, "Anim_Common");
      }
    }
    return this._deferred.promise;
  }
  finish() {
    if (this._targets) {
      for (let i = 0; i < this._targets.length; i++) {
        const target = this._targets[i];
        if (target.node) {
          removeClass(target.node, target.classes);
          removeClass(target.node, "Anim_Common");
        }
      }
      this._targets = null;
    }
    if (this._oldNode) {
      destroy(this._oldNode);
      this._oldNode = null;
    }
    this._deferred.resolve();
  }
}
class AnimationHelper {
  constructor(flySurfaceNode) {
    this._ltr = isBodyLtr();
    this._flySurfaceNode = flySurfaceNode;
    this._items = [];
  }
  /**
   * Sends a dom node flying.
   * @param node Dom node.
   * @param className Classes to be applied during animation.
   * @param anchors Define animation directions.
   * @param clone Clone of the node. Probably needed for a placeholder of the node flying away.
   *
   * @returns The passed clone or the copy of the passed dom node.
   */
  fly(node, className, anchors, clone) {
    clone = clone || node.cloneNode(true);
    if (!anchors) {
      anchors = ["top", this._ltr ? "left" : "right"];
    }
    const nodeRect = node.getBoundingClientRect();
    const parentRect = this._flySurfaceNode.getBoundingClientRect();
    addClass(clone, "Anim_FlyingObj");
    let dir, dirDist;
    for (let i = 0; i < anchors.length; i++) {
      const anchor = anchors[i];
      let dist = nodeRect[anchor] - parentRect[anchor];
      if (anchor === "right" || anchor === "bottom") {
        dist = -dist;
      }
      if ((anchor === "left" && !this._ltr) || (anchor === "right" && this._ltr)) {
        dir = anchor;
        dirDist = dist;
      }
      clone.style[anchor] = dist + "px";
    }
    this._flySurfaceNode.appendChild(clone);
    // If the start point is opposite to text direction, we need to correct the starting position
    if (dir) {
      dirDist += nodeRect.width - clone.getBoundingClientRect().width;
      clone.style[dir] = dirDist + "px";
    }
    this.start([
      {
        node: clone,
        classes: [className]
      }
    ], clone);
    return clone;
  }
  start(targets, oldNode) {
    const item = new AnimationItem();
    this._items.push(item);
    if (!this._progress) {
      this._progress = (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.c)();
    }
    return item.start(targets, oldNode).then(this._onItemFinished.bind(this, item));
  }
  finish() {
    const items = this._items;
    while (items.length > 0) {
      items.pop().finish();
    }
  }
  getPromise() {
    return this._progress && this._progress.promise;
  }
  _onItemFinished(item) {
    const index = this._items.indexOf(item);
    if (index >= 0) {
      this._items.splice(index, 1);
      if (this._items.length === 0 && this._progress) {
        this._progress.resolve();
        this._progress = null;
      }
    }
  }
}

/**
 *  Allows to monitor the mouse cursor and check if it's over a component.
 */
let latestEvent;
let isBeingDraggedFlag;
function _setLatestEvent(event) {
  latestEvent = event;
}
/**
 * Checks if the mouse/touch event position is over a DOM node.
 * @param component DOM node.
 * @param params Additional checking parameters.
 * @returns True if the event position is over the node.
 */
function isMouseOver(component, params) {
  if (!component || !component.parentNode || !component.getBoundingClientRect || !latestEvent) {
    return false;
  }
  params = params || {};
  const isOverSelf = isMouseOverBox(position(component), {
    ignorePadding: params.ignorePadding,
    event: params.event
  });
  if (!isOverSelf && params.checkAllChildren) {
    let isMouseOverResult = false;
    traverseChildren(component, (node) => {
      if (isMouseOver(node, {
        ignorePadding: params.ignorePadding,
        event: params.event
      })) {
        isMouseOverResult = true;
        return true;
      }
      return false;
    });
    return isMouseOverResult;
  }
  return isOverSelf;
}
/**
 * Checks if the mouse/touch event position is over a box.
 * @param box Box as { x, y, w, h }.
 * @param params Additional checking parameters.
 * @returns True if the event position is over the box.
 */
function isMouseOverBox(box, params) {
  if (!box || !latestEvent) {
    return false;
  }
  params = params || {};
  const bt = params.ignorePadding;
  if (bt) {
    box = Object.assign({}, box);
    box.x += bt;
    box.y += bt;
    box.w -= bt * 2;
    box.h -= bt * 2;
  }
  const evt = params.event ? fixTouchEvent(params.event) : latestEvent;
  return box.x <= evt.clientX && box.x + box.w >= evt.clientX && box.y <= evt.clientY && box.y + box.h >= evt.clientY;
}
//-----------------------------------------------------------------------------
//
// Fix touch event
//
//-----------------------------------------------------------------------------
/**
 * Provides event coordinates for mouse/touch event.
 * @param event A mouse/touch event.
 * @returns The original mouse event or the original touch event enriched with coordinates of the last touch.
 */
function fixTouchEvent(event) {
  const touch = _getTouch(event);
  if (touch) {
    const e = event;
    e.screenX = touch.screenX;
    e.screenY = touch.screenY;
    e.clientX = touch.clientX;
    e.clientY = touch.clientY;
    e.pageX = touch.pageX;
    e.pageY = touch.pageY;
  }
  return event;
}
function _getTouch(_event) {
  const event = _event;
  if (event.touches) {
    if (!event.touches.length) {
      return event.changedTouches[0]; // First touch was released - available in changedTouches.
    }
    const id = event.touches[0].identifier;
    let touch; // Find a changed touch with the same id (available on touchmove).
    for (let i = 0; i < event.changedTouches.length; i++) {
      if (event.changedTouches[i].identifier === id) {
        touch = event.changedTouches[i];
        break;
      }
    }
    return touch || event.touches[0];
  }
  return null;
}
/**
 * @param node              Dom node.
 * @param onMouseOut        Function(event).
 *
 * @returns a handle with remove() method.
 */
function addOutHandler(params) {
  const isMouseOverFunc = params.isMouseOver ||
    (() => isMouseOver(params.node, {
      checkAllChildren: true
    }));
  let letOutTimeoutH;
  function _clear() {
    clearTimeout(letOutTimeoutH);
    letOutTimeoutH = null;
  }
  let isOver;
  const moveH = on(document.body, "mousemove", (moveEvent) => {
    if (isMouseOverFunc()) {
      _clear();
      isOver = true;
    }
    else if (isOver) {
      isOver = false;
      letOutTimeoutH = setTimeout(() => {
        _clear();
        params.onMouseOut && params.onMouseOut(moveEvent);
      }, params.allowedOutDelay);
    }
  });
  return {
    remove: () => {
      moveH.remove();
      _clear();
    }
  };
}
//-----------------------------------------------------------------------------
//
// Monitoring the last event position and dragging state
//
//-----------------------------------------------------------------------------
if (!(0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.h)("worker") && globalThis.addEventListener) {
  const _fixTouch = (event) => {
    const touch = _getTouch(event);
    if (touch) {
      touch.type = event.type;
    }
    return (touch || event);
  };
  // TODO: Scope to parent GE element, not document.body
  // once we load the module, it starts monitoring the cursor position
  on(document.body, "touchstart", (event) => {
    _setLatestEvent(_fixTouch(event));
  });
  on(document.body, "touchmove", (event) => {
    _setLatestEvent(_fixTouch(event));
  });
  if (!isMobileDevice()) {
    on(document.body, "mousemove", (event) => {
      _setLatestEvent(_fixTouch(event));
    });
  }
  //TODO: scope to parent GE element, not document.body
  on(document.body, "mousedown", () => {
    if (isBeingDraggedFlag) {
      return;
    }
    isBeingDraggedFlag = true;
    once(document.body, ["mouseup", "click"], () => {
      isBeingDraggedFlag = false;
    });
  });
}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function e$u(e,t,r,o){var c,f=arguments.length,n=f<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,o);else for(var l=e.length-1;l>=0;l--)(c=e[l])&&(n=(f<3?c(n):f>3?c(t,r,n):c(t,r))||n);return f>3&&n&&Object.defineProperty(t,r,n),n}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function t$D(t){return t&&t.release&&"function"==typeof t.release}function i$V(t){return t&&t.acquire&&"function"==typeof t.acquire}class e$t{constructor(t,i,e,o=1,s=0){if(this.ctor=t,this.acquireFunction=i,this.releaseFunction=e,this.allocationSize=o,this._pool=new Array(s),this._initialSize=s,this.ctor)for(let n=0;n<s;n++)this._pool[n]=new this.ctor;this.allocationSize=Math.max(o,1);}destroy(){this.prune(0);}acquire(...t){let o;if(e$t.test.disabled)o=new this.ctor;else {if(0===this._pool.length){const t=this.allocationSize;for(let i=0;i<t;i++)this._pool[i]=new this.ctor;}o=this._pool.pop();}return this.acquireFunction?this.acquireFunction(o,...t):i$V(o)&&o.acquire(...t),o}release(i){i&&!e$t.test.disabled&&(this.releaseFunction?this.releaseFunction(i):t$D(i)&&i.release(),this._pool.push(i));}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let i=t;i<this._pool.length;++i){const t=this._pool[i];this._dispose(t);}this._pool.length=t;}}_dispose(t){t.dispose&&"function"==typeof t.dispose&&t.dispose();}}e$t.test={disabled:!1};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
class e$s{constructor(e,s){this._observers=e,this._observer=s;}remove(){this._observers.delete(this._observer);}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
let e$r=!1;function t$C(){return e$r}function r$q(){e$r=!0;}function n$I(){e$r=!1;}function i$U(s){return void 0!==s.flags}class o$s{constructor(s,e,t){this.host=s,this.propertyName=e,this.metadata=t,this.flags=1,this._observers=null,this._accessed=null,this._handles=[],this.flags=1|(t.nonNullable?8:0)|(t.hasOwnProperty("value")?16:0)|(void 0===t.get?32:0)|(void 0===t.dependsOn?64:0);}destroy(){this._accessed&&(this._accessed.clear(),this._accessed=null),this._observers&&(this._observers.clear(),this._observers=null),this._clearObservationHandles();}onObservableAccessed(s){s!==this&&(null===this._accessed&&(this._accessed=new Set),this._accessed.add(s));}onTrackingEnd(){this._clearObservationHandles(),this.flags|=32;const s=this._accessed;if(null===s)return;const e=this._handles;for(const t of s)e.push(t.observe(this));s.clear();}observe(e){return null===this._observers&&(this._observers=new Set),new e$s(this._observers.add(e),e)}notify(){2&~this.flags&&(this.flags|=1),this._notifyObservers();}invalidate(){this.notify();}commit(){this.flags&=-2,this._notifyObservers();}_notifyObservers(){if(null===this._observers)return;const s=this._observers.size,t=new Array(s);let r=s-1;for(const e of this._observers)t[r--]=e;const n=!e$r;for(;t.length;){const s=t.pop();if(i$U(s)){if(2&~s.flags&&(s.flags|=1),null===s._observers)continue;for(const e of s._observers)t.push(e);}else n&&s.notify();}}_clearObservationHandles(){for(const s of this._handles)s.remove();this._handles.length=0;}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
class s$w{constructor(){this._values=new Map;}clone(t){const r=new s$w;return this._values.forEach(((s,a)=>{t&&t.has(a)||r.set(a,y$v(s));})),r}get(e){return this._values.get(e)}originOf(){return 6}keys(){return [...this._values.keys()]}set(e,s){this._values.set(e,s);}delete(e){this._values.delete(e);}has(e){return this._values.has(e)}forEach(e){this._values.forEach(e);}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
let o$r,r$p=[];const s$v=n$T.getLogger("esri.core.Accessor");function i$T(t){void 0!==o$r&&o$r.onObservableAccessed(t);}let l$I=!1,f$r=!1;function a$J(t,n,e){if(l$I)return g$i(t,n,e);u$G(t);const o=n.call(e);return p$$(),o}function g$i(t,n,e){const o=l$I;l$I=!0,u$G(t);let r=null;try{r=n.call(e);}catch(c){f$r&&s$v.error(c);}return p$$(),l$I=o,r}function u$G(t){o$r=t,r$p.push(t);}function p$$(){const t=r$p.pop();o$r=r$p.length>0?r$p[r$p.length-1]:void 0,void 0!==t&&t.onTrackingEnd();}function d$B(t,n){if(32&n.flags)return;const e=f$r;f$r=!1,64&n.flags?g$i(n,n.metadata.get,t):h$v(t,n),f$r=e;}const m$A=[];function h$v(t,e){128&e.flags||(e.flags|=128,g$i(e,(()=>{const o=e.metadata.dependsOn||m$A;for(const e of o)if("string"==typeof e&&-1===e.indexOf("."))A$a(t,e,!1);else {const o=f$y(e);for(let n=0,e=t;n<o.length&&null!=e&&"object"==typeof e;++n)e=A$a(e,o[n],n!==o.length-1);}})),e.flags&=-129);}function A$a(t,n,o){const r="?"===n[n.length-1]?n.slice(0,-1):n;if(null!=t.getItemAt||Array.isArray(t)){const n=parseInt(r,10);if(!isNaN(n))return Array.isArray(t)?t[n]:t.getItemAt(n)}const s=e$G(t),c=null==s?void 0:s.properties.get(r);return c&&(i$T(c),d$B(t,c)),o?t[r]:void 0}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
n$T.getLogger("esri.core.accessorSupport.Properties");function d$A(t,e,s){return void 0!==t}function m$z(t,e,s,i){return void 0!==t&&(!(null==s&&8&t.flags)||(!1))}function v$b(t){return t&&"function"==typeof t.destroy}class y$n{constructor(t){this.host=t,this.properties=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=0,this.store=new s$w,this._origin=6;const e=this.host.constructor.__accessorMetadata__,s=e.properties;for(const i in s){const e=new o$s(t,i,s[i]);this.properties.set(i,e);}this.metadatas=s,this._autoDestroy=e.autoDestroy;}initialize(){this.lifecycle=1;}constructed(){this.lifecycle=2;}destroy(){if(this.destroyed=!0,this._autoDestroy)for(const[t,e]of this.properties){const s=this.internalGet(t);s&&v$b(s)&&(s.destroy(),8&~e.flags&&this._internalSet(e,null)),e.destroy();}else for(const[t,e]of this.properties)e.destroy();}get initialized(){return 0!==this.lifecycle}get(t){return this.properties.get(t).metadata.get?this.getterComputed(t):this.getterStatic(t)}getterStatic(t){const e=this.properties.get(t);if(void 0!==e)return i$T(e),this.store.has(t)?this.store.get(t):e.metadata.value}getterComputed(t){const e=this.properties.get(t);i$T(e);const s=this.store,i=e.flags,r=this.store.get(t);if(4&i)return r;if(s.has(t)&&(1&~i||t$C()))return r;let o;e.flags|=4;const n=e.metadata.get;64&i?o=a$J(e,n,this.host):(h$v(this.host,e),o=n.call(this.host)),s.set(t,o,1);const c=this.store.get(t);return c===r?e.flags&=-2:e.commit(),e.flags&=-5,c}originOf(t){const e=this.store.originOf(t);if(void 0===e){const e=this.properties.get(t);if(void 0!==e&&16&e.flags)return "defaults"}return n$K(e)}has(t){return !!this.properties.has(t)&&this.store.has(t)}keys(){return [...this.properties.keys()]}internalGet(t){const e=this.properties.get(t);if(d$A(e))return this.store.has(t)?this.store.get(t):e.metadata.value}internalSet(t,e){const s=this.properties.get(t);d$A(s)&&this._internalSet(s,e);}getDependsInfo(t,e,i){const r=this.properties.get(e);if(!d$A(r))return "";const o=new Set,a=a$J({onObservableAccessed:t=>o.add(t),onTrackingEnd:()=>{}},(()=>{var e;return null==(e=r.metadata.get)?void 0:e.call(t)}));let c=`${i}${t.declaredClass.split(".").pop()}.${e}: ${a}\n`;if(0===o.size)return c;i+="  ";for(const l of o){if(!(l instanceof o$s))continue;const t=l.host,e=l.propertyName,r=e$G(t);c+=r?r.getDependsInfo(t,e,i):`${i}${e}: undefined\n`;}return c}setAtOrigin(t,e,s){const i=this.properties.get(t);if(d$A(i))return this._setAtOrigin(i,e,s)}isOverridden(t){const e=this.properties.get(t);return void 0!==e&&!!(2&e.flags)}clearOverride(t){const e=this.properties.get(t);void 0!==e&&2&e.flags&&(e.flags&=-3,e.invalidate());}override(t,e){const s=this.properties.get(t);if(!m$z(s,t,e))return;const i=s.metadata.cast;if(i){const t=this._cast(i,e),{valid:s,value:r}=t;if(O$3.release(t),!s)return;e=r;}s.flags|=2,this._internalSet(s,e);}set(t,e){const s=this.properties.get(t);if(!m$z(s,t,e))return;const i=s.metadata.cast;if(i){const t=this._cast(i,e),{valid:s,value:r}=t;if(O$3.release(t),!s)return;e=r;}const r=s.metadata.set;r?r.call(this.host,e):this._internalSet(s,e);}setDefaultOrigin(t){this._origin=t$G(t);}getDefaultOrigin(){return n$K(this._origin)}propertyInvalidated(t){const e=this.properties.get(t);void 0!==e&&e.invalidate();}propertyCommitted(t){const e=this.properties.get(t);void 0!==e&&e.commit();}_internalSet(t,e){const s=0!==this.lifecycle?this._origin:0;this._setAtOrigin(t,e,s);}_setAtOrigin(e,s,i){const r=this.store,o=e.propertyName;r.has(o,i)&&l$P(s,r.get(o))&&2&~e.flags&&i===r.originOf(o)||(r$q(),e.invalidate(),n$I(),r.set(o,s,i),e.commit(),d$B(this.host,e));}_cast(t,e){const s=O$3.acquire();return s.valid=!0,s.value=e,t&&(s.value=t.call(this.host,e,s)),s}}class _$5{constructor(){this.value=null,this.valid=!0;}acquire(){this.valid=!0;}release(){this.value=null;}}const O$3=new e$t(_$5);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const r$o=Array.prototype.splice;function t$B(e){e.length=0;}class o$q{constructor(r=50,o=50){this._pool=new e$t(Array,void 0,t$B,o,r);}acquire(){return this._pool.acquire()}copy(e){const t=this.acquire();return e.unshift(0,0),r$o.apply(t,e),e.splice(0,2),t}release(e){this._pool.release(e);}prune(){this._pool.prune(0);}static acquire(){return s$u.acquire()}static copy(e){return s$u.copy(e)}static release(e){return s$u.release(e)}static prune(){s$u.prune();}}const s$u=new o$q(100);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
class t$A extends e$t{constructor(){super(...arguments),this._set=new Set;}destroy(){super.destroy(),this._set=p$17();}acquire(...e){const s=super.acquire(...e);return this._set.delete(s),s}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e));}_dispose(e){this._set.delete(e),super._dispose(e);}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function e$q(){return _arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.e.queueMicrotask?_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.e.queueMicrotask:e=>{_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.e.Promise.resolve().then(e);}}const t$z=e$q(),n$H=[];let r$n=[];function u$F(o){n$H.push(o),1===n$H.length&&t$z((()=>{for(const e of r$n)e();const o=n$H.slice();n$H.length=0;for(const e of o)e();}));}!function(o){function e(o){return r$n.push(o),{remove(){r$n=r$n.filter((e=>e!==o));}}}o.before=e;}(u$F||(u$F={}));var f$q=u$F;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const t$y=29;class e$p{constructor(e,s=t$y){this.name=e,this._counter=0,this._items=new Array(s);}record(t){this._items[++this._counter%this._items.length]=t;}get median(){return this._items.slice().sort()[Math.floor(this._items.length/2)]}get average(){return this._items.reduce(((t,e)=>t+e),0)/this._items.length}get last(){return this._items[this._counter%this._items.length]}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
class t$x{constructor(t=1){this._seed=t;}set seed(e){this._seed=null==e?Math.random()*t$x._m:e;}getInt(){return this._seed=(t$x._a*this._seed+t$x._c)%t$x._m,this._seed}getFloat(){return this.getInt()/(t$x._m-1)}getIntRange(t,e){return Math.round(this.getFloatRange(t,e))}getFloatRange(e,s){const n=s-e;return e+this.getInt()/t$x._m*n}}t$x._m=2147483647,t$x._a=48271,t$x._c=0;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function l$H(t,r,e){if(t$M(t)&&t$M(r))return !0;if(t$M(t)||t$M(r)||t.length!==r.length)return !1;if(e){for(let n=0;n<t.length;n++)if(!e(t[n],r[n]))return !1}else for(let n=0;n<t.length;n++)if(t[n]!==r[n])return !1;return !0}const d$z=!!Array.prototype.fill;function g$h(n,t){if(d$z)return new Array(n).fill(t);const r=new Array(n);for(let e=0;e<n;e++)r[e]=t;return r}function m$y(n,t){void 0===t&&(t=n,n=0);const r=new Array(t-n);for(let e=n;e<t;e++)r[e-n]=e;return r}class w$a{constructor(){this.last=0;}}const y$m=new w$a;function b$c(n,t,r,e){e=e||y$m;const o=Math.max(0,e.last-10);for(let u=o;u<r;++u)if(n[u]===t)return e.last=u,u;const f=Math.min(o,r);for(let u=0;u<f;++u)if(n[u]===t)return e.last=u,u;return -1}function v$a(n,t,r,e){const o=null==r?n.length:r,f=b$c(n,t,o,e);if(-1!==f)return n[f]=n[o-1],null==r&&n.pop(),t}const A$9=new Set;function O$2(n,t,r=n.length,e=t.length,o,f){if(0===e||0===r)return r;A$9.clear();for(let i=0;i<e;++i)A$9.add(t[i]);o=o||y$m;const u=Math.max(0,o.last-10);for(let i=u;i<r;++i)if(A$9.has(n[i])&&(f&&f.push(n[i]),A$9.delete(n[i]),n[i]=n[r-1],--r,--i,0===A$9.size||0===r))return A$9.clear(),r;for(let i=0;i<u;++i)if(A$9.has(n[i])&&(f&&f.push(n[i]),A$9.delete(n[i]),n[i]=n[r-1],--r,--i,0===A$9.size||0===r))return A$9.clear(),r;return A$9.clear(),r}function C$8(n,t){const r=n.indexOf(t);return -1!==r?(n.splice(r,1),t):null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var o$p;!function(o){const t=(o,t,n,e)=>{let i=t,r=t;const l=n>>>1,c=o[i-1];for(;r<=l;){r=i<<1,r<n&&e(o[r-1],o[r])<0&&++r;const t=o[r-1];if(e(t,c)<=0)break;o[i-1]=t,i=r;}o[i-1]=c;},n=(o,t)=>o<t?-1:o>t?1:0;function e(o,e,i,r){void 0===e&&(e=0),void 0===i&&(i=o.length),void 0===r&&(r=n);for(let n=i>>>1;n>e;n--)t(o,n,i,r);const l=e+1;for(let n=i-1;n>e;n--){const i=o[e];o[e]=o[n],o[n]=i,t(o,l,n,r);}}function*i(o,e,i,r){void 0===e&&(e=0),void 0===i&&(i=o.length),void 0===r&&(r=n);for(let n=i>>>1;n>e;n--)t(o,n,i,r),yield;const l=e+1;for(let n=i-1;n>e;n--){const i=o[e];o[e]=o[n],o[n]=i,t(o,l,n,r),yield;}}o.sort=e,o.iterableSort=i;}(o$p||(o$p={}));var t$w=o$p;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const e$o=1.5,l$G=1.1;class n$G{constructor(h){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new w$a,h&&(h.initialSize&&(this.data=new Array(h.initialSize)),h.allocator&&(this._allocator=h.allocator),void 0!==h.deallocator&&(this._deallocator=h.deallocator),h.shrink&&(this._shrink=()=>r$m(this)));}toArray(){return this.data.slice(0,this.length)}getItemAt(t){if(!(t<0||t>=this._length))return this.data[t]}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t;}else {if(this._deallocator)for(let h=t;h<this._length;++h)this.data[h]=this._deallocator(this.data[h]);this._length=t,this._shrink();}}clear(){this.length=0;}prune(){this.clear(),this.data=[];}push(t){this.data[this._length++]=t;}pushArray(t,h=t.length){for(let i=0;i<h;i++)this.data[this._length++]=t[i];}fill(t,h){for(let i=0;i<h;i++)this.data[this._length++]=t;}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return ++this._length,t}unshift(t){this.data.unshift(t),this._length++,r$m(this);}pop(){if(0===this.length)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const i=b$c(this.data,t,this.length,this._hint);if(-1!==i)return this.data.splice(i,1),this.length=this.length-1,t}removeUnordered(t){const h=v$a(this.data,t,this.length,this._hint);return void 0!==h&&(this.length=this.length-1),this._shrink(),h}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,h=t.length,i){this.length=O$2(this.data,t,this.length,h,this._hint,i),this._shrink();}front(){if(0!==this.length)return this.data[0]}back(){if(0!==this.length)return this.data[this.length-1]}swapElements(t,h){t>=this.length||h>=this.length||t===h||([this.data[t],this.data[h]]=[this.data[h],this.data[t]]);}sort(t){t$w.sort(this.data,0,this.length,t);}iterableSort(t){return t$w.iterableSort(this.data,0,this.length,t)}some(t,h){for(let i=0;i<this.length;++i)if(t.call(h,this.data[i],i,this.data))return !0;return !1}filterInPlace(t,h){let i=0;for(let s=0;s<this._length;++s){const a=this.data[s];t.call(h,a,s,this.data)&&(this.data[s]=this.data[i],this.data[i]=a,i++);}if(this._deallocator)for(let s=i;s<this._length;s++)this.data[s]=this._deallocator(this.data[s]);return this._length=i,this._shrink(),this}forAll(t,h){const i=this.length,s=this.data;for(let a=0;a<i;++a)t.call(h,s[a],a,s);}map(t,h){const i=new Array(this.length);for(let s=0;s<this.length;++s)i[s]=t.call(h,this.data[s],s,this.data);return i}reduce(t,h){let i=h;for(let s=0;s<this.length;++s)i=t(i,this.data[s],s,this.data);return i}has(t){const h=this.length,i=this.data;for(let s=0;s<h;++s)if(i[s]===t)return !0;return !1}}function r$m(t){t.data.length>e$o*t.length&&(t.data.length=Math.floor(t.length*l$G));}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function t$v(e){return {setTimeout:(t,o)=>{const r=e.setTimeout(t,o);return {remove:()=>e.clearTimeout(r)}}}}var o$o=t$v(_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.e);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function s$t(t){return Promise.all(t)}function l$F(t){return new Promise(((n,e)=>{try{t(n,e);}catch(r){Promise.resolve().then((()=>e(r)));}}))}function m$x(t="Aborted"){return new s$x("AbortError",t)}function h$u(){return new AbortController}function a$I(t){if(b$b(t))throw m$x()}function p$_(n){return r$A(n)?"aborted"in n?n:n.signal:n}function b$b(n){const e=p$_(n);return r$A(e)&&e.aborted}function w$9(t){if(g$g(t))throw t}function j$f(t){if(!g$g(t))throw t}function v$9(t,e){const r=p$_(t);if(!t$M(r)){if(!r.aborted)return t$E(r,"abort",(()=>e()));e();}}function P$7(t,e){const r=p$_(t);if(!t$M(r))return a$I(r),t$E(r,"abort",(()=>e(m$x())))}function d$y(t,r){const o=p$_(r);return t$M(o)?t:new Promise(((n,o)=>{let i=v$9(r,(()=>o(m$x())));const u=()=>i=s$G(i);t.then(u,u),t.then(n,o);}))}function g$g(t){return t&&"AbortError"===t.name}function y$l(t){return t.catch((t=>{if(!g$g(t))throw t}))}function E$3(){let t=null;const n=new Promise(((n,e)=>{t={promise:void 0,resolve:n,reject:e};}));return t.promise=n,t}function A$8(t){if(!t)return;if("function"!=typeof t.forEach){const n=Object.keys(t);return A$8(n.map((n=>t[n]))).then((t=>{const e={};return n.forEach(((n,r)=>e[n]=t[r])),e}))}const n=t;return l$F((t=>{const e=[];let r=n.length;0===r&&t(e),n.forEach((n=>{const o={promise:n||Promise.resolve(n)};e.push(o),o.promise.then((t=>{o.value=t;})).catch((t=>{o.error=t;})).then((()=>{--r,0===r&&t(e);}));}));}))}function L$6(t){return Promise.reject(t)}function x$d(t){return Promise.resolve(t)}function C$7(t,n,e){const r=h$u();return v$9(e,(()=>r.abort())),new Promise(((e,o)=>{let i=setTimeout((()=>{i=0,e(n);}),t);v$9(r,(()=>{i&&(clearTimeout(i),o(m$x()));}));}))}function U$2(t){return t&&"function"==typeof t.then}function q$4(t){return t&&"object"==typeof t&&"then"in t&&"function"==typeof t.then?t:Promise.resolve(t)}function z$5(t,n=-1){let e,o,i,u,c=null;const s=(...f)=>{if(e){o=f,u&&u.reject(m$x()),u=E$3();const t=m$F(u.promise);if(c){const t=c;c=null,t.abort();}return t}if(i=u||E$3(),u=null,n>0){const r=h$u();e=q$4(t(...f,r.signal));const o=e;C$7(n).then((()=>{e===o&&(u?r.abort():c=r);}));}else e=1,e=q$4(t(...f));const l=()=>{const t=o;o=i=e=c=null,null!=t&&s(...t);},a=e,p=i;return a.then(l,l),a.then(p.resolve,p.reject),m$F(p.promise)};return s}function B$4(){let t,n;const e=new Promise(((e,r)=>{t=e,n=r;})),r=n=>{t(n);};return r.resolve=n=>t(n),r.reject=t=>n(t),r.timeout=(t,n)=>o$o.setTimeout((()=>r.reject(n)),t),r.promise=e,r}function F$4(t){let n=h$u();const e=t(n.signal);let r={promise:e,finished:!1,abort:()=>{n&&(n.abort(),n=null);}};const o=()=>{r&&(r.finished=!0,r=null),n=null;};return e.then(o,o),r}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
class i$S{constructor(e){this.callback=e,this.isActive=!0;}remove(){this.isActive=!1;}}let m$w=0;const p$Z={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},u$E=["prepare","preRender","render","postRender","update"],f$p=[],h$t=new n$G;const w$8={frameTasks:h$t,willDispatch:!1,clearFrameTasks:T$5,dispatch:_$4,executeFrameTasks:x$c};function k$8(e){const r=new i$S(e);return f$p.push(r),w$8.willDispatch||(w$8.willDispatch=!0,f$q(_$4)),r}function T$5(e=!1){h$t.forAll((e=>{e.removed=!0;})),e&&g$f();}function x$c(e){const t=e-m$w;m$w=e;const r=1e3/60,s=Math.max(0,t-r);for(let n=0;n<u$E.length;n++){const o=performance.now(),a=u$E[n];h$t.forAll((o=>{var c;if(o.paused||o.removed)return;0===n&&o.ticks++;o.phases[a]&&(p$Z.time=e,p$Z.deltaTime=0===o.ticks?0:t,p$Z.elapsedFrameTime=performance.now()-e,p$Z.frameDuration=r-s,null==(c=o.phases[a])||c.call(o,p$Z));})),y$k[n].record(performance.now()-o);}g$f(),M$9.record(performance.now()-e);}const D$5=new n$G;function g$f(){h$t.forAll((e=>{e.removed&&D$5.push(e);})),h$t.removeUnorderedMany(D$5.data,D$5.length),D$5.clear();}function _$4(){for(;f$p.length;){const t=m$F(f$p.shift());t.isActive&&t.callback();}w$8.willDispatch=!1;}function b$a(e=1,r){const s=B$4(),c=()=>{b$b(r)?s.reject(m$x()):0===e?s():(--e,f$q((()=>c())));};return c(),s.promise}const y$k=u$E.map((e=>new e$p(e))),M$9=new e$p("total");

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
class s$s{constructor(s){this.notify=s,this._accessed=new Set,this._handles=[];}destroy(){this._accessed.clear(),this.clear();}onObservableAccessed(s){this._accessed.add(s);}onTrackingEnd(){for(const s of this._accessed)this._handles.push(s.observe(this));this._accessed.clear();}clear(){for(const s of this._handles)s.remove();this._handles.length=0;}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const e$n={runImmediately:!1};function r$l(r,u,l=e$n){let o=new s$s(m),i=null,c=!1;function m(){if(!o||c)return;const t=i;o.clear(),c=!0,i=a$J(o,r),c=!1,u(i,t);}function f(){o&&(o.destroy(),o=null,i=null);}return c=!0,i=a$J(o,r),c=!1,l.runImmediately&&u(i,i),{remove:f}}function o$n(e,r){let u=new s$s(o),l=null;function o(){r(l,c);}function i(){u&&(u.destroy(),u=null),l=null;}function c(){return u?(u.clear(),l=a$J(u,e),l):null}return c(),{remove:i}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
class a$H{constructor(){this.uid=0,this.target=null,this.path=null,this.oldValue=null,this.callback=null,this.getValue=null,this.removed=!1,this.propertyPath=null;}acquire(e,o,r,l,n){this.target=e,this.path=o,this.oldValue=r,this.callback=l,this.getValue=n,this.propertyPath=l$M(o),this.uid=++a$H.uid,this.removed=!1;}release(){this.target=this.path=this.propertyPath=this.callback=this.oldValue=null,this.uid=++a$H.uid,this.removed=!0;}}a$H.pool=new t$A(a$H),a$H.uid=0;const d$x=new o$q,h$s=new Set;let f$o,m$v=d$x.acquire();function p$Y(e){h$s.has(e)?m$v.splice(m$v.indexOf(e),1):h$s.add(e),m$v.push(e),f$o||(f$o=k$8(j$e));}function g$e(e){if(e.removed)return;const{callback:t,path:o,oldValue:r,target:l}=e,n=e.getValue();_$3(r,n)&&(e.oldValue=n,t.call(l,n,r,o,l));}function _$3(t,o){return !l$P(t,o)}function V$1(e){for(let t=0;t<m$v.length;t++){const o=m$v[t];o.target===e&&(o.removed=!0);}}function j$e(){let e=10;for(;f$o&&e--;){f$o=null;const e=m$v;m$v=d$x.acquire(),h$s.clear();const t=d$x.acquire();for(const o of e){const e=o.uid;g$e(o),e===o.uid&&o.removed&&t.push(o);}for(let o=0;o<m$v.length;o++){const e=m$v[o];e.removed&&(t.push(e),h$s.delete(e),m$v.splice(o,1),o-=1);}for(let o=0;o<t.length;o++)a$H.pool.release(t[o]);d$x.release(e),d$x.release(t),y$j.forEach((e=>e()));}}const y$j=new Set;function k$7(e,t,n){let s=y$s(e,t,n,((e,t,o)=>{let n,i,c=o$n((()=>o$E(e,t)),((r,l)=>{e.__accessor__.destroyed||n&&n.uid!==i?s.remove():(n||(n=a$H.pool.acquire(e,t,r,o,l),i=n.uid),p$Y(n));}));return {remove:h$z((function(){c.remove(),n&&(n.uid!==i||n.removed||(n.removed=!0,p$Y(n)),n=null),s=c=null;}))}}));return s}function q$3(e,t,r){const n=y$s(e,t,r,((e,t,o)=>{let r=!1;return r$l((()=>o$E(e,t)),((l,s)=>{e.__accessor__.destroyed?n.remove():r||(r=!0,_$3(s,l)&&o.call(e,l,s,t,e),r=!1);}))}));return n}function P$6(e,t,o,r=!1){return !e.__accessor__||e.__accessor__.destroyed?{remove(){}}:r?q$3(e,t,o):k$7(e,t,o)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function p$X(t){if(null==t)return {value:t};if(Array.isArray(t))return {type:[t[0]],value:null};switch(typeof t){case"object":return t.constructor&&t.constructor.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return {type:Boolean,value:t};case"string":return {type:String,value:t};case"number":return {type:Number,value:t};case"function":return {type:t,value:null};default:return}}class u$D{constructor(...t){if(this.constructor===u$D)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{enumerable:!1,value:new y$n(this)}),t.length>0&&this.normalizeCtorArgs&&(this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,t));}static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:r,declaredClass:s,constructor:c}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const n=this;class a extends n{constructor(...t){super(...t),this.inherited=null,c&&c.apply(this,t);}}n$Q(a.prototype);for(const e in t){const r=t[e];a.prototype[e]="function"==typeof r?function(...t){const s=this.inherited;let o;this.inherited=function(...t){if(n.prototype[e])return n.prototype[e].apply(this,t)};try{o=r.apply(this,t);}catch(c){throw this.inherited=s,c}return this.inherited=s,o}:t[e];}for(const e in r){const t=p$X(r[e]);y$r(t)(a.prototype,e);}return i$X(s)(a)}postscript(t){const r=this.__accessor__,e=r.ctorArgs||t;r.initialize(),e&&(this.set(e),r.ctorArgs=null),r.constructed(),this.initialize();}initialize(){}destroy(){this.destroyed||(V$1(this),this.__accessor__.destroy());}get initialized(){return this.__accessor__&&this.__accessor__.initialized||!1}get constructed(){return this.__accessor__&&2===this.__accessor__.lifecycle||!1}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(t){this.get(t);}get(t){return u$L(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}isInstanceOf(r){return t$J(n$T.getLogger(this.declaredClass),"isInstanceOf",{replacement:"Use instanceof directly",version:"4.16"}),this instanceof r}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,r){return t$K(this,t,r),this}watch(t,r,e){return P$6(this,t,r,e)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_override(t,r){return this.__accessor__.override(t,r)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.propertyInvalidated(t);}_get(t){return this.__accessor__.internalGet(t)}_set(t,r){return this.__accessor__.internalSet(t,r),this}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
class i$R{constructor(){this._emitter=new i$R.EventEmitter(this);}emit(t,e){return this._emitter.emit(t,e)}on(t,e){return this._emitter.on(t,e)}once(t,e){return this._emitter.once(t,e)}hasEventListener(t){return this._emitter.hasEventListener(t)}}!function(n){class o{constructor(t=null){this.target=t,this._listenersMap=null;}clear(){this._listenersMap&&this._listenersMap.clear();}emit(t,e){const s=this._listenersMap&&this._listenersMap.get(t);if(!s)return !1;const r=this.target||this;return [...s].forEach((t=>{t.call(r,e);})),s.length>0}on(t,s){if(Array.isArray(t)){const r=t.map((t=>this.on(t,s)));return r$x(r)}if(t.indexOf(",")>-1)throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const r=this._listenersMap.get(t)||[];return r.push(s),this._listenersMap.set(t,r),{remove:()=>{const e=this._listenersMap&&this._listenersMap.get(t)||[],r=e.indexOf(s);r>=0&&e.splice(r,1);}}}once(t,e){const s=this.on(t,(t=>{s.remove(),e.call(null,t);}));return s}hasEventListener(t){const e=this._listenersMap&&this._listenersMap.get(t);return null!=e&&e.length>0}}n.EventEmitter=o,n.EventedMixin=e=>{let r=class extends e{constructor(){super(...arguments),this._emitter=new o;}destroy(){this._emitter.clear();}emit(t,e){return this._emitter.emit(t,e)}on(t,e){return this._emitter.on(t,e)}once(t,e){return this._emitter.once(t,e)}hasEventListener(t){return this._emitter.hasEventListener(t)}};return r=e$u([i$X("esri.core.Evented")],r),r};let h=class extends u$D{constructor(){super(...arguments),this._emitter=new i$R.EventEmitter(this);}emit(t,e){return this._emitter.emit(t,e)}on(t,e){return this._emitter.on(t,e)}once(t,e){return this._emitter.once(t,e)}hasEventListener(t){return this._emitter.hasEventListener(t)}};h=e$u([i$X("esri.core.Evented")],h),n.EventedAccessor=h;}(i$R||(i$R={}));var n$F=i$R;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
class r$k{constructor(){this._observers=new Set;}observe(r){return new e$s(this._observers.add(r),r)}notify(){const e=this._observers,r=this._observers.size,s=new Array(r);let o=0;for(const t of e)s[o++]=t;for(let t=0;t<r;t++)s[t].notify();}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var m$u;class u$C{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0;}preventDefault(){this.cancellable&&(this.defaultPrevented=!0);}reset(e){this.defaultPrevented=!1,this.item=e;}}const g$d=new e$t(u$C,void 0,(e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1;})),p$W=()=>{};function b$9(e){return e?e instanceof B$3?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function d$w(e){if(e&&e.length)return e[0]}function v$8(e,t,s,i){const r=Math.min(e.length-s,t.length-i);let n=0;for(;n<r&&e[s+n]===t[i+n];)n++;return n}function y$i(e,t,s,i){t&&t.forEach(((t,r,n)=>{e.push(t),y$i(e,s.call(i,t,r,n),s,i);}));}const C$6=new Set,A$7=new Set,x$b=new Set,E$2=new Map;let j$d=0,B$3=m$u=class extends n$F.EventedAccessor{constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new r$k,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:j$d++});}static isCollection(e){return null!=e&&e instanceof m$u}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof m$u?{items:e}:e:{}}*[Symbol.iterator](){yield*this.items;}get items(){return i$T(this._observable),this._items}set items(e){this._emitBeforeChanges(1)||(this._splice(0,this.length,...b$9(e)),this._emitAfterChanges(1));}hasEventListener(e){return "change"===e?this._chgListeners.length>0:this._emitter.hasEventListener(e)}on(e,t){if("change"===e){const e=this._chgListeners,s={removed:!1,callback:t};return e.push(s),this._notifications&&this._notifications.push({listeners:e.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=p$W,s.removed=!0,e.splice(e.indexOf(s),1);}}}return this._emitter.on(e,t)}once(e,t){const s=this.on(e,t);return {remove(){s.remove();}}}add(e,t){if(i$T(this._observable),this._emitBeforeChanges(1))return this;const s=this.getNextIndex(null!=t?t:null);return this._splice(s,0,e),this._emitAfterChanges(1),this}addMany(e,t=this._items.length){if(i$T(this._observable),!e||!e.length)return this;if(this._emitBeforeChanges(1))return this;const s=this.getNextIndex(t);return this._splice(s,0,...b$9(e)),this._emitAfterChanges(1),this}removeAll(){if(i$T(this._observable),!this.length||this._emitBeforeChanges(2))return [];const e=this._splice(0,this.length)||[];return this._emitAfterChanges(2),e}clone(){return i$T(this._observable),this._createNewInstance({items:this._items.map(y$v)})}concat(...e){i$T(this._observable);const t=e.map(b$9);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(i$T(this._observable),!this.length||this._emitBeforeChanges(2))return;const i=m$F(this._splice(0,this.length)),r=i.length;for(let s=0;s<r;s++)e.call(t,i[s],s,i);this._emitAfterChanges(2);}every(e,t){return i$T(this._observable),this._items.every(e,t)}filter(e,t){let s;return i$T(this._observable),s=2===arguments.length?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:s})}find(e,t){return i$T(this._observable),this._items.find(e,t)}findIndex(e,t){return i$T(this._observable),this._items.findIndex(e,t)}flatten(e,t){i$T(this._observable);const s=[];return y$i(s,this,e,t),new m$u(s)}forEach(e,t){return i$T(this._observable),this._items.forEach(e,t)}getItemAt(e){return i$T(this._observable),this._items[e]}getNextIndex(e){i$T(this._observable);const t=this.length;return (e=null==e?t:e)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return i$T(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return i$T(this._observable),this._items.indexOf(e,t)}join(e=","){return i$T(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return i$T(this._observable),this._items.lastIndexOf(e,t)}map(e,t){i$T(this._observable);const s=this._items.map(e,t);return new m$u({items:s})}reorder(e,t=this.length-1){i$T(this._observable);const s=this.indexOf(e);if(-1!==s){if(t<0?t=0:t>=this.length&&(t=this.length-1),s!==t){if(this._emitBeforeChanges(4))return e;this._splice(s,1),this._splice(t,0,e),this._emitAfterChanges(4);}return e}}pop(){if(i$T(this._observable),!this.length||this._emitBeforeChanges(2))return;const e=d$w(this._splice(this.length-1,1));return this._emitAfterChanges(2),e}push(...e){return i$T(this._observable),this._emitBeforeChanges(1)||(this._splice(this.length,0,...e),this._emitAfterChanges(1)),this.length}reduce(e,t){i$T(this._observable);const s=this._items;return 2===arguments.length?s.reduce(e,t):s.reduce(e)}reduceRight(e,t){i$T(this._observable);const s=this._items;return 2===arguments.length?s.reduceRight(e,t):s.reduceRight(e)}remove(e){return i$T(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(i$T(this._observable),e<0||e>=this.length||this._emitBeforeChanges(2))return;const t=d$w(this._splice(e,1));return this._emitAfterChanges(2),t}removeMany(e){if(i$T(this._observable),!e||!e.length||this._emitBeforeChanges(2))return [];const t=e instanceof m$u?e.toArray():e,s=this._items,i=[],r=t.length;for(let n=0;n<r;n++){const e=t[n],r=s.indexOf(e);if(r>-1){const e=1+v$8(t,s,n+1,r+1),h=this._splice(r,e);h&&h.length>0&&i.push.apply(i,h),n+=e-1;}}return this._emitAfterChanges(2),i}reverse(){if(i$T(this._observable),this._emitBeforeChanges(4))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,...e)),this._emitAfterChanges(4),this}shift(){if(i$T(this._observable),!this.length||this._emitBeforeChanges(2))return;const e=d$w(this._splice(0,1));return this._emitAfterChanges(2),e}slice(e=0,t=this.length){return i$T(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return i$T(this._observable),this._items.some(e,t)}sort(e){if(i$T(this._observable),!this.length||this._emitBeforeChanges(4))return this;const t=m$F(this._splice(0,this.length));return arguments.length?t.sort(e):t.sort(),this._splice(0,0,...t),this._emitAfterChanges(4),this}splice(e,t,...s){i$T(this._observable);const i=(t?2:0)|(s.length?1:0);if(this._emitBeforeChanges(i))return [];const r=this._splice(e,t,...s)||[];return this._emitAfterChanges(i),r}toArray(){return i$T(this._observable),this._items.slice()}toJSON(){return i$T(this._observable),this.toArray()}toLocaleString(){return i$T(this._observable),this._items.toLocaleString()}toString(){return i$T(this._observable),this._items.toString()}unshift(...e){return i$T(this._observable),!e.length||this._emitBeforeChanges(1)||(this._splice(0,0,...e),this._emitAfterChanges(1)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,...s){const i=this._items,r=this.constructor.prototype.itemType;let n,h;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=k$8((()=>this._dispatchChange()))),t){if(h=i.splice(e,t),this.hasEventListener("before-remove")){const t=g$d.acquire();t.target=this,t.cancellable=!0;for(let s=0,r=h.length;s<r;s++)n=h[s],t.reset(n),this.emit("before-remove",t),t.defaultPrevented&&(h.splice(s,1),i.splice(e,0,n),e+=1,s-=1,r-=1);g$d.release(t);}if(this.length=this._items.length,this.hasEventListener("after-remove")){const e=g$d.acquire();e.target=this,e.cancellable=!1;const t=h.length;for(let s=0;s<t;s++)e.reset(h[s]),this.emit("after-remove",e);g$d.release(e);}}if(s&&s.length){if(r){const e=[];for(const t of s){const s=r.ensureType(t);null==s&&null!=t||e.push(s);}s=e;}const t=this.hasEventListener("before-add"),n=this.hasEventListener("after-add"),h=e===this.length;if(t||n){const r=g$d.acquire();r.target=this,r.cancellable=!0;const o=g$d.acquire();o.target=this,o.cancellable=!1;for(const l of s)t?(r.reset(l),this.emit("before-add",r),r.defaultPrevented||(h?i.push(l):i.splice(e++,0,l),this._set("length",i.length),n&&(o.reset(l),this.emit("after-add",o)))):(h?i.push(l):i.splice(e++,0,l),this._set("length",i.length),o.reset(l),this.emit("after-add",o));g$d.release(o),g$d.release(r);}else {if(h)for(const e of s)i.push(e);else i.splice(e,0,...s);this._set("length",i.length);}}return (s&&s.length||h&&h.length)&&this._notifyChangeEvent(s,h),h}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const s=g$d.acquire();s.target=this,s.cancellable=!0,s.type=e,this.emit("before-changes",s),t=s.defaultPrevented,g$d.release(s);}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=g$d.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),g$d.release(t);}this._observable.notify();}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t});}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const e=t.changes;C$6.clear(),A$7.clear(),x$b.clear();for(const{added:t,removed:o}of e){if(t)if(0===x$b.size&&0===A$7.size)for(const e of t)C$6.add(e);else for(const e of t)A$7.has(e)?(x$b.add(e),A$7.delete(e)):x$b.has(e)||C$6.add(e);if(o)if(0===x$b.size&&0===C$6.size)for(const e of o)A$7.add(e);else for(const e of o)C$6.has(e)?C$6.delete(e):(x$b.delete(e),A$7.add(e));}const s=o$q.acquire();C$6.forEach((e=>{s.push(e);}));const i=o$q.acquire();A$7.forEach((e=>{i.push(e);}));const r=this._items,n=t.items,h=o$q.acquire();if(x$b.forEach((e=>{n.indexOf(e)!==r.indexOf(e)&&h.push(e);})),t.listeners&&(s.length||i.length||h.length)){const e={target:this,added:s,removed:i,moved:h},r=t.listeners.length;for(let s=0;s<r;s++){const i=t.listeners[s];i.removed||i.callback.call(this,e);}}o$q.release(s),o$q.release(i),o$q.release(h);}C$6.clear(),A$7.clear(),x$b.clear();}};B$3.ofType=t=>{if(!t)return m$u;if(E$2.has(t))return E$2.get(t);let s=null;if("function"==typeof t)s=t.prototype.declaredClass;else if(t.base)s=t.base.prototype.declaredClass;else for(const e in t.typeMap){const i=t.typeMap[e].prototype.declaredClass;s?s+=` | ${i}`:s=i;}let n=class extends m$u{};n=e$u([i$X(`esri.core.Collection<${s}>`)],n);const o={Type:t,ensureType:"function"==typeof t?d$E(t):k$a(t)};return Object.defineProperty(n.prototype,"itemType",{value:o}),E$2.set(t,n),n},e$u([y$r()],B$3.prototype,"length",void 0),e$u([y$r()],B$3.prototype,"items",null),B$3=m$u=e$u([i$X("esri.core.Collection")],B$3);var L$5=B$3;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
let h$r=class extends u$D{constructor(r){super(r),this._groups=new Map;}destroy(){this.removeAll();}get size(){let r=0;return this._groups.forEach((e=>{r+=e.length;})),r}add(r,e){if(!this._isHandle(r)&&!Array.isArray(r)&&!L$5.isCollection(r))return this;const s=this._getOrCreateGroup(e);return Array.isArray(r)||L$5.isCollection(r)?r.forEach((r=>this._isHandle(r)&&s.push(r))):s.push(r),this.notifyChange("size"),this}forEach(r,e){if("function"==typeof r)this._groups.forEach((e=>e.forEach(r)));else {const s=this._getGroup(r);s&&e&&s.forEach(e);}}has(r){return this._groups.has(this._ensureGroupKey(r))}remove(r){if(Array.isArray(r)||L$5.isCollection(r))return r.forEach(this.remove,this),this;if(!this.has(r))return this;const e=this._getGroup(r);for(let s=0;s<e.length;s++)e[s].remove();return this._deleteGroup(r),this.notifyChange("size"),this}removeAll(){return this._groups.forEach((r=>{for(let e=0;e<r.length;e++)r[e].remove();})),this._groups.clear(),this.notifyChange("size"),this}_isHandle(r){return r&&!!r.remove}_getOrCreateGroup(r){if(this.has(r))return this._getGroup(r);const e=[];return this._groups.set(this._ensureGroupKey(r),e),e}_getGroup(r){return m$F(this._groups.get(this._ensureGroupKey(r)))}_deleteGroup(r){return this._groups.delete(this._ensureGroupKey(r))}_ensureGroupKey(r){return r||"_default_"}};e$u([y$r({readOnly:!0})],h$r.prototype,"size",null),h$r=e$u([i$X("esri.core.Handles")],h$r);var u$B=h$r;

// geoenrichment
/**
 * IntersectionObserver singleton used in order not to create observer in every TemplatedWidget
 */
let _intersectionObserver;
// may not be supported (case: in workers)
if (_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.g.IntersectionObserver) {
  _intersectionObserver = new IntersectionObserver((entries) => {
    for (const entry of entries) {
      if (entry.isIntersecting) {
        const resolve = _resolverMap.get(entry.target).resolve;
        _resolverMap.delete(entry.target);
        _intersectionObserver.unobserve(entry.target);
        resolve();
      }
    }
  }, { root: document.body });
}
const _resolverMap = new WeakMap();
function onDisplayed(node) {
  const promise = new Promise((resolve, reject) => {
    _intersectionObserver === null || _intersectionObserver === void 0 ? void 0 : _intersectionObserver.observe(node);
    const remove = () => {
      _resolverMap.delete(node);
      _intersectionObserver === null || _intersectionObserver === void 0 ? void 0 : _intersectionObserver.unobserve(node);
      reject("removed");
    };
    _resolverMap.set(node, { resolve, remove });
  });
  promise.__old_then = promise.then;
  promise.then = (onfulfilled) => promise.__old_then(onfulfilled).catch((reason) => {
    if (reason !== "removed") {
      throw reason;
    }
  });
  return {
    promise,
    remove: () => {
      const instance = _resolverMap.get(node);
      instance && instance.remove();
    }
  };
}

/**
 * Works with events.
 */
class Evented {
  constructor() {
    //--------------------------------------------------------------------------
    //
    //  Properties
    //
    //--------------------------------------------------------------------------
    this._emitter = new Evented.EventEmitter();
  }
  //--------------------------------------------------------------------------
  //
  //  Public Methods
  //
  //--------------------------------------------------------------------------
  /**
   * Emits an event on the instance. This method should only be used when creating subclasses of this class.
   */
  emit(type, event) {
    return this._emitter.emit(type, event);
  }
  /**
   * Registers an event handler on the instance. Call this method to hook an
   * event with a listener.
   */
  on(type, listener) {
    return this._emitter.on(type, listener);
  }
  once(type, listener) {
    return this._emitter.once(type, listener);
  }
  /**
   * Indicates whether there is an event listener on the instance that matches
   * the provided event name.
   */
  hasEventListener(type) {
    return this._emitter.hasEventListener(type);
  }
}
function _handlesGroup(handles) {
  return _makeHandle(() => handles.forEach((handle) => handle && handle.remove()));
}
function _makeHandle(remove) {
  return {
    remove: () => {
      if (remove) {
        remove();
        remove = null;
      }
    }
  };
}
(function (Evented) {
  class EventEmitter {
    clear() {
      this._listenersMap && this._listenersMap.clear();
    }
    emit(type, event) {
      const listeners = this._listenersMap && this._listenersMap.get(type);
      if (!listeners) {
        return false;
      }
      // slice the array to handle listeners removing themselves
      listeners.slice().forEach((listener) => {
        listener.call(null, event);
      });
      return listeners.length > 0;
    }
    on(type, listener) {
      if (Array.isArray(type)) {
        const handles = type.map((oneType) => this.on(oneType, listener));
        return _handlesGroup(handles);
      }
      if (type.indexOf(",") > -1) {
        throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");
      }
      if (!this._listenersMap) {
        this._listenersMap = new Map();
      }
      const listeners = this._listenersMap.get(type) || [];
      listeners.push(listener);
      this._listenersMap.set(type, listeners);
      return {
        remove: () => {
          const listeners = (this._listenersMap && this._listenersMap.get(type)) || [];
          const index = listeners.indexOf(listener);
          if (index >= 0) {
            listeners.splice(listeners.indexOf(listener), 1);
          }
        }
      };
    }
    once(type, listener) {
      let handle;
      handle = this.on(type, (event) => {
        handle.remove();
        listener.call(null, event);
      });
      return handle;
    }
    hasEventListener(type) {
      const listeners = this._listenersMap && this._listenersMap.get(type);
      return listeners != null && listeners.length > 0;
    }
  }
  Evented.EventEmitter = EventEmitter;
  let EventedAccessor = class EventedAccessor extends u$D {
    constructor() {
      super(...arguments);
      this._emitter = new Evented.EventEmitter();
    }
    //--------------------------------------------------------------------------
    //
    //  Public Methods
    //
    //--------------------------------------------------------------------------
    emit(type, event) {
      return this._emitter.emit(type, event);
    }
    on(type, listener) {
      return this._emitter.on(type, listener);
    }
    once(type, listener) {
      return this._emitter.once(type, listener);
    }
    hasEventListener(type) {
      return this._emitter.hasEventListener(type);
    }
    //--------------------------------------------------------------------------
    //
    // Deprecate accessing properties via
    //
    //--------------------------------------------------------------------------
    /**
     * @deprecated Access properties directly.
     */
    get(name) {
      return super.get(name);
    }
    /**
     * @deprecated Access properties directly.
     */
    set(name, value) {
      return super.set(name, value);
    }
  };
  EventedAccessor = __decorate([
    i$X()
  ], EventedAccessor);
  Evented.EventedAccessor = EventedAccessor;
})(Evented || (Evented = {}));
const Evented$1 = Evented;

/**
 * This widget allows to migrate from dijit/_TemplatedWidget.js. Some interface and lifecycle are preserved.
 *
 * LIFECYCLE
 *
 * 1. buildRendering() => domNode is constructed from the template.
 * 2. setters are applied.
 * 3. postCreated() is called.
 */
const SPACES_RE = />\s+</g;
/**
 * Replaces NLS and provides references to nodes with "data-attach-point" specified.
 * Only one outer node is supported.
 * @example
 * <div>
 *    <div class="classA" data-attach-point="nodeA">Some text</div>
 * </div>
 */
function _parseTemplateString(widget) {
  const _widget = widget; // need to cast to any to access protected properties and assign arbitrary properties from the template
  let templateString = typeof _widget._templateString === "function" ? _widget._templateString() : _widget._templateString;
  // remove any formatting (not supported by TemplatedWidget.ts)
  templateString = templateString.replace(SPACES_RE, "><");
  const domNode = toDom(templateString);
  traverseChildren(domNode, (node) => {
    const dojoRef = node.getAttribute("data-dojo-attach-point");
    if (dojoRef) {
      console.error("Deprecated 'data-dojo-attach-point' is used. Replace with 'data-attach-point'.");
    }
    const ref = dojoRef || node.getAttribute("data-attach-point");
    if (ref) {
      _widget[ref] = node;
    }
  });
  return domNode;
}
function _byId(node) {
  return typeof node === "string" ? document.getElementById(node) : node;
}
let TemplatedWidget = class TemplatedWidget extends Evented$1.EventedAccessor {
  //--------------------------------------------------------------------------
  //
  // Lifecycle
  //
  //--------------------------------------------------------------------------
  /**
   * Constructs this widget.
   * @param params Parmeters to apply to the widget. For every parameter a corresponding setter will be triggered if implemented.
   * @param refNode Optional dom node to place the widget's dom node instead of or into. Can be specified by an HTML id. The behavior is controlled by _refNodeBehavoir attribute.
   */
  constructor(_params, refNode, position) {
    super(_params);
    /**
     * Specifies how to treat the refNode passed in the constructor.
     * - "replace" - the domNode will replace the ref node. It's the default behavior as in dijit/_TemplatedWidget.js.
     * - "add" - the domNode will be added to the ref node.
     */
    this._refNodeBehavoir = "replace"; // "add" | "replace"
    this._refNode = _byId(refNode);
    this._refPosition = position;
  }
  // override (see Accessor.js)
  // At this point all setters have been applied.
  initialize() {
    this.buildRendering();
    this.postCreate();
  }
  /**
   * Renders the widget's DOM and applies CSS classes.
   * Called after the setters are applied.
   */
  buildRendering() {
    this.domNode = this._templateString
      ? _parseTemplateString(this)
      : this._refNode && this._refNodeBehavoir === "replace"
        ? this._refNode
        : create("div"); // at this point render() method is called
    this.class && addClass(this.domNode, this.class);
    if (this._refNode && this.domNode !== this._refNode) {
      const id = this._refNode.id;
      place(this.domNode, this._refNode, this._refNodeBehavoir === "replace" ? "replace" : this._refPosition);
      // preserve id
      if (id && this._refNodeBehavoir === "replace") {
        this.domNode.id = id;
      }
    }
    // no need to hold these references
    this._refNode = null;
    this._refPosition = null;
  }
  /**
   * Called after the domNode is fully created from the template and setters are applied.
   */
  postCreate() { }
  /**
   * Must be called to dispose the widget.
   *
   * Note: this method is chained in Accessor.js, so there is no need to call super.destroy().
   */
  destroy() {
    destroy(this.domNode);
    this.domNode = null;
    this._internalHandles && this._internalHandles.destroy();
    this._onDisplayed && this._onDisplayed.remove();
  }
  //--------------------------------------------------------------------------
  //
  // Place in parent
  //
  //--------------------------------------------------------------------------
  /**
   * Method to place the domNode into another node.
   */
  placeAt(parentNode, position) {
    parentNode && place(this.domNode, _byId(parentNode), position);
    return this;
  }
  /**
   * Convenience method to own handles and other widget outside of the widget.
   */
  own(handleOrWidget) {
    const oneTimeHandle = {
      remove: () => {
        if (typeof handleOrWidget.destroy === "function") {
          if (handleOrWidget.destroyed) {
            console.error("WARNING: Multiple attempts to dispose resources!");
          }
          else {
            handleOrWidget.destroy();
          }
        }
        else {
          handleOrWidget.remove();
        }
        // prevent multiple remove
        oneTimeHandle.remove = () => {
          console.error("WARNING: Multiple attempts to dispose resources!");
        };
      }
    };
    this._internalHandles = this._internalHandles || new u$B();
    this._internalHandles.add(oneTimeHandle);
  }
  /**
   * Once element is visible on page promise gets resolved (really helpful if you need element's sizes or computed styles)
   */
  get onDisplayed() {
    if (!this._onDisplayed) {
      this._onDisplayed = onDisplayed(this.domNode);
    }
    return this._onDisplayed.promise;
  }
};
__decorate([
  y$r()
], TemplatedWidget.prototype, "class", void 0);
TemplatedWidget = __decorate([
  i$X()
], TemplatedWidget);

// esri4.core
function isCtrlKey(event) {
  return (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.t)("mac") ? event.metaKey : event.ctrlKey;
}

// geoenrichment.utils
const MOBILE_TOLERANCE = 10;
const LONG_PRESS_TIMEOUT = 500;
function addNoDragClickHandler(node, callback, params) {
  return isMobileDevice() ? _addMobile(node, callback, params) : _addPC(node, callback, params);
}
function _addPC(node, callback, params) {
  params = params || {};
  const tolerance = params.tolerance || 0;
  let moveH;
  let upH;
  const downH = on(node, "press", (event) => {
    upH && upH.remove();
    const sx = event.pageX;
    const sy = event.pageY;
    let moveHappened;
    moveH = on(document.body, "move", (event) => {
      if (event.shiftKey || isCtrlKey(event)) {
        return;
      }
      const cx = event.pageX;
      const cy = event.pageY;
      if (Math.abs(cx - sx) > tolerance || Math.abs(cy - sy) > tolerance) {
        moveHappened = true;
      }
    });
    upH = once(document.body, "release", (event) => {
      moveH.remove();
      const cx = event.pageX;
      const cy = event.pageY;
      if (!moveHappened && Math.abs(cx - sx) <= tolerance && Math.abs(cy - sy) <= tolerance) {
        callback(event);
      }
    });
  });
  return {
    remove() {
      moveH && moveH.remove();
      upH && upH.remove();
      downH && downH.remove();
    }
  };
}
function _addMobile(node, callback, params) {
  params = params || {};
  const tolerance = params.tolerance || MOBILE_TOLERANCE;
  let startH, endH, moveH, cancelH, longPressTimeoutH;
  function cleanup() {
    endH && endH.remove();
    moveH && moveH.remove();
    cancelH && cancelH.remove();
    clearTimeout(longPressTimeoutH);
  }
  startH = on(node, "touchstart", (eventStart) => {
    cleanup();
    let ignoreTouchEnd;
    function _canCallCallback(eventEnd) {
      const es = fixTouchEvent(eventStart);
      const ee = fixTouchEvent(eventEnd);
      return Math.abs(es.pageX - ee.pageX) < tolerance && Math.abs(es.pageY - ee.pageY) < tolerance;
    }
    if (params.detectLongPress) {
      let moveEvent;
      moveH = on(node, "touchmove", (event) => {
        moveEvent = event;
      });
      longPressTimeoutH = setTimeout(() => {
        if (_canCallCallback(moveEvent || eventStart)) {
          if (params.ignoreReleaseIfLongPressHappened) {
            ignoreTouchEnd = true;
          }
          params.longPressCallback(eventStart);
        }
      }, params.longPressTimeout || LONG_PRESS_TIMEOUT);
    }
    endH = once(node, "touchend", (eventEnd) => {
      !ignoreTouchEnd && _canCallCallback(eventEnd) && callback(eventEnd);
      cleanup();
    });
    cancelH = once(node, "touchcancel", cleanup);
  });
  return {
    remove: () => {
      startH && startH.remove();
      cleanup();
    }
  };
}

//--------------------------------------------------------------------------
//
//  Mixin
//
//--------------------------------------------------------------------------
function mixin(target = {}, ...sources) {
  for (const source of sources) {
    _mixin(target, source);
  }
  return target;
}
//--------------------------------------------------------------------------
//
//  Private Methods
//
//--------------------------------------------------------------------------
function _mixin(dest, src, copyFunc) {
  let name, s;
  const empty = {};
  for (name in src) {
    // the (!(name in empty) || empty[name] !== s) condition avoids copying properties in "src"
    // inherited from Object.prototype.	 For example, if dest has a custom toString() method,
    // don't overwrite it with the toString() method that source inherited from Object.prototype
    s = src[name];
    const isPropNotInherited = !(name in empty) || empty[name] !== s;
    if (!(name in dest) || (dest[name] !== s && isPropNotInherited)) {
      dest[name] = copyFunc ? copyFunc(s) : s;
    }
  }
  return dest;
}

const XML_ENCODE_RE = /&|<|>/g, XML_ENCODE_RE_FULL = /&|<|>|"|'/g, XML_ENCODE_MAPPING = {
  "&": "&amp;",
  "<": "&lt;",
  ">": "&gt;",
  '"': "&quot;",
  "'": "&apos;"
};
//-----------------------------------------------------------------------------
//
// General replacement by mapping.
//
//-----------------------------------------------------------------------------
/**
 * Replaces tokens found by regexp with other tokens using the given mapping.
 * @param str             Converted string
 * @param re              Regular expression like /&|<|>|"|'/g.
 * @param mapping:        Tokens mapping like { "&": "&amp;", "<": "&lt;", ... }
 */
function replace(str, re, mapping) {
  return str == null ? "" : ("" + str).replace(re, (match) => mapping[match] || "");
}
//-----------------------------------------------------------------------------
//
// Encode/decode XML
//
//-----------------------------------------------------------------------------
/**
 * Encodes XML markup symbols with XML escape sequences:
 *
 * - '&' -> '\&amp;'
 * - '<' -> '\&lt;'
 * - '>' -> '\&gt;'
 * - etc.
 *
 * If maskQuotes is true, the double quote and single quote are also escaped.
 */
function encodeXML(str, maskQuotes) {
  return replace(str, maskQuotes ? XML_ENCODE_RE_FULL : XML_ENCODE_RE, XML_ENCODE_MAPPING);
}
const IS_URL_RE = /((www\.|http:\/\/|https:\/\/)[A-Za-z0-9_.\-~]+\.[A-Za-z0-9_.\-~/]+)|([A-Za-z0-9_.\-~]+\.com[A-Za-z0-9_.\-~/]*)/;
//Methods below are moved from esriAnalystX, but commented because not used.
/*
 /**
 * Creates a reg exp (escaping special symbols)
 * /
export function createRegExpEscapeSpecial(text: string, flags: string): RegExp {
  return new RegExp(escapeSpecial(text), flags);
}

export function escapeSpecial(text: string): string {
  return text.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&");
}

export function getEmailValidationPattern(): string {
  return "\\s*[\\w\\W\\-]+@[\\w\\W\\-]+\\.[a-zA-Z]{2,4}(\\s*;\\s*[\\w\\W\\-]+@[\\w\\W\\-]+\\.[a-zA-Z]{2,4})*\\s*;*\\s*";
}
*/

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const t$u="4.19",o$m={request:(e,r)=>Promise.resolve().then(function () { return request; }).then((({default:t})=>{const o=e.options||{};return o.responseType="array-buffer",o.signal=null==r?void 0:r.signal,t(e.url,o)})).then((e=>({result:{data:e.data,ssl:e.ssl},transferList:[e.data]})))};let s$r;function n$E(e){s$r=e;}function i$Q(e){const t=s$r&&s$r.findCredential(e);return t&&t.token?bt(e,"token",t.token):e}(0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.t)("host-webworker")||((0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.t)("edge")||(0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.t)("trident"))&&console.warn("Deprecated browser - see http://esriurl.com/oldbrowser");

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const t$t=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function r$j(c){const r=M$a(c,!0);return r&&r.endsWith(".arcgis.com")&&!t$t.includes(r)&&!c.endsWith("/sharing/rest/generateToken")}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function t$s(t,i,s=!1,c){return new Promise(((d,a)=>{if(b$b(c))return void a(n$D());let m=()=>{v(),a(new Error(`Unable to load ${i}`));},l=()=>{const e=t;v(),d(e);},u=()=>{if(!t)return;const e=t;v(),e.src="",a(n$D());};const v=()=>{(0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.t)("esri-image-decode")||(t.removeEventListener("error",m),t.removeEventListener("load",l)),m=null,l=null,t=null,r$A(c)&&c.removeEventListener("abort",u),u=null,s&&URL.revokeObjectURL(i);};r$A(c)&&c.addEventListener("abort",u),(0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.t)("esri-image-decode")?t.decode().then(l,m):(t.addEventListener("error",m),t.addEventListener("load",l));}))}function n$D(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
async function U$1(e,r){const o=G$6(e),n=F$5(e);n||o||(e=z$6(e));const c={url:e,requestOptions:{...e$I(r)}};let d=B$5(e);if(d){const e=await z$4(d,c);if(null!=e)return {data:e,getHeader:R$7,requestOptions:c.requestOptions,url:c.url};d.after||d.error||(d=null);}if(e=c.url,"image"===(r=c.requestOptions).responseType){if((0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.t)("host-webworker")||(0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.t)("host-node"))throw N$3("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),c)}else if(o)throw N$3("request:invalid-parameters",new Error("Data URLs are not supported for responseType = "+r.responseType),c);if("head"===r.method){if(r.body)throw N$3("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),c);if(o||n)throw N$3("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),c)}if(await A$6(),P$5)return P$5.execute(e,r);const p=h$u();v$9(r,(()=>p.abort()));const m={controller:p,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:d,params:c,redoRequest:!1,useIdentity:D$4.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},h=await Q$1(m);return d&&d.after&&d.after(h),h}let P$5;const D$4=s$H.request,_$2="FormData" in _arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.e,F$3=[499,498,403,401],I$3=["COM_0056","COM_0057","SB_0008"],M$8=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],R$7=()=>null;function H$2(e){if(F$5(e)||G$6(e))return;const t=M$a(e);t&&-1===U$1._corsServers.indexOf(t)&&U$1._corsServers.push(t);}function B$2(e){const t=M$a(e);return !t||t.endsWith(".arcgis.com")||-1!==U$1._corsServers.indexOf(t)||J$3(t)}function N$3(e,t,o,s){let a="Error";const i={url:o.url,requestOptions:o.requestOptions,getHeader:R$7,ssl:!1};if(t instanceof s$x)return t.details?(t.details=y$v(t.details),t.details.url=o.url,t.details.requestOptions=o.requestOptions):t.details=i,t;if(t){const e=s&&(e=>s.headers.get(e)),r=s&&s.status,o=t.message;o&&(a=o),e&&(i.getHeader=e),i.httpStatus=(null!=t.httpCode?t.httpCode:t.code)||r||0,i.subCode=t.subcode,i.messageCode=t.messageCode,"string"==typeof t.details?i.messages=[t.details]:i.messages=t.details;}return g$g(t)?m$x():new s$x(e,a,i)}async function A$6(){(0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.t)("host-webworker")?P$5||(P$5=await __webpack_require__.e(/*! import() */ "extensions_widgets_arcgis_analysis_node_modules_arcgis_geoenrichment-components_dist_esm_requ-da7f99").then(__webpack_require__.bind(__webpack_require__, /*! ./request-a7626e18.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/request-a7626e18.js"))):U$1._abortableFetch||(U$1._abortableFetch=_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.e.fetch.bind(_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.e));}async function $$1(){s$r||await Promise.resolve().then(function () { return IdentityManager; });}async function K(t){const r=t.params.url,s=t.params.requestOptions,n=t.controller.signal,a=s.body;let i=null,l=null,u=null;if(_$2&&"HTMLFormElement" in _arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.e&&(a instanceof FormData?i=a:a instanceof HTMLFormElement&&(l=a,i=new FormData(l))),"string"==typeof a&&(u=a),t.fetchOptions={cache:s.cacheBust&&!U$1._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:s.headers||{},method:"head"===s.method?"HEAD":"GET",mode:"cors",redirect:"follow",signal:n},(i||u)&&(t.fetchOptions.body=i||u),"anonymous"===s.authMode&&(t.useIdentity=!1),t.hasToken=!!(/token=/i.test(r)||s.query&&s.query.token||i&&i.get&&i.get("token")||l&&l.elements.token),!t.hasToken&&s$H.apiKey&&r$j(r)&&(s.query||(s.query={}),s.query.token=s$H.apiKey,t.hasToken=!0),t.useIdentity&&!t.hasToken&&!t.credentialToken&&!W$1(r)&&!b$b(n)){let e;"immediate"===s.authMode?(await $$1(),e=await s$r.getCredential(r,{signal:n}),t.credential=e):"no-prompt"===s.authMode?(await $$1(),e=await s$r.getCredential(r,{prompt:!1,signal:n}).catch((()=>{})),t.credential=e):s$r&&(e=s$r.findCredential(r)),e&&(t.credentialToken=e.token,t.useSSL=!!e.ssl);}}function W$1(e){return M$8.some((t=>t.test(e)))}async function G$5(e){let r=e.params.url;const o=e.params.requestOptions,s=e.fetchOptions,n=F$5(r)||G$6(r),l=o.responseType||"json",u=n?0:null!=o.timeout?o.timeout:D$4.timeout;let d=!1;if(!n){e.useSSL&&(r=ut(r)),o.cacheBust&&"default"===s.cache&&(r=bt(r,"request.preventCache",Date.now()));let n={...o.query};e.credentialToken&&(n.token=e.credentialToken);let a=C$9(n);(0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.t)("esri-url-encodes-apostrophe")&&(a=a.replace(/'/g,"%27"));const i=r.length+1+a.length;let l;d="delete"===o.method||"post"===o.method||"put"===o.method||!!o.body||i>D$4.maxUrlLength;const u=o.useProxy||!!A$b(r);if(u){const e=q$5(r);l=e.path,!d&&l.length+1+i>D$4.maxUrlLength&&(d=!0),e.query&&(n={...e.query,...n});}if("HEAD"===s.method&&(d||u)){if(d){if(i>D$4.maxUrlLength)throw N$3("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params);throw N$3("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params)}if(u)throw N$3("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(d?(s.method="delete"===o.method?"DELETE":"put"===o.method?"PUT":"POST",o.body?r=Rt(r,n):(s.body=C$9(n),s.headers["Content-Type"]="application/x-www-form-urlencoded")):r=Rt(r,n),u&&(e.useProxy=!0,r=`${l}?${r}`),n.token&&_$2&&s.body instanceof FormData){const e=s.body;e.set?e.set("token",n.token):e.append("token",n.token);}if(o.hasOwnProperty("withCredentials"))e.withCredentials=o.withCredentials;else if(!E$4(r,x$e))if(J$3(r))e.withCredentials=!0;else if(s$r){const t=s$r.findServerInfo(r);t&&t.webTierAuth&&(e.withCredentials=!0);}e.withCredentials&&(s.credentials="include");}let T,x,S=0,E=!1;u>0&&(S=setTimeout((()=>{E=!0,e.controller.abort();}),u));try{if("image"!==o.responseType||"default"!==s.cache||"GET"!==s.method||d||J$2(o.headers)||!n&&!e.useProxy&&D$4.proxyUrl&&!B$2(r)){if(T=await U$1._abortableFetch(r,s),e.useProxy||H$2(r),T.ok&&"HEAD"!==s.method){switch(l){case"array-buffer":x=await T.arrayBuffer();break;case"blob":case"image":x=await T.blob();break;default:x=await T.text();}if(S&&(clearTimeout(S),S=0),"json"===l||"xml"===l||"document"===l)if(x)switch(l){case"json":x=JSON.parse(x);break;case"xml":x=X$1(x,"application/xml");break;case"document":x=X$1(x,"text/html");}else x=null;if(x){if("array-buffer"===l||"blob"===l){const e=T.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(e)&&x["blob"===l?"size":"byteLength"]<=750)try{const e=await new Response(x).json();e.error&&(x=e);}catch{}}"image"===l&&x instanceof Blob&&(x=await Y$1(URL.createObjectURL(x),e,!0));}}}else x=await Y$1(r,e);}catch(v){if("AbortError"===v.name){if(E)throw new Error("Timeout exceeded");throw m$x("Request canceled")}if(!(!T&&v instanceof TypeError&&D$4.proxyUrl)||o.body||"delete"===o.method||"head"===o.method||"post"===o.method||"put"===o.method||e.useProxy)throw v;e.redoRequest=!0,S$9({proxyUrl:D$4.proxyUrl,urlPrefix:ht(U$4(r).path)});}finally{S&&clearTimeout(S);}return [T,x]}async function z$4(e,t){if(null!=e.responseData)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let o,s;try{s=await e.before(t);}catch(r){o=N$3("request:interceptor",r,t);}if((s instanceof Error||s instanceof s$x)&&(o=N$3("request:interceptor",s,t)),o)throw e.error&&e.error(o),o;return s}}function J$2(e){if(e)for(const t of Object.getOwnPropertyNames(e))if(e[t])return !0;return !1}function X$1(e,t){let r;try{r=(new DOMParser).parseFromString(e,t);}catch{}if(!r||r.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return r}async function Q$1(e){let t,r;await K(e);try{do{[t,r]=await G$5(e);}while(!await V(e,t,r))}catch(n){const r=N$3("request:server",n,e.params,t);throw r.details.ssl=e.useSSL,e.interceptor&&e.interceptor.error&&e.interceptor.error(r),r}const o=e.params.url;if(/\/sharing\/rest\/(accounts|portals)\/self/i.test(o)&&!e.hasToken&&!e.credentialToken&&r&&r.user&&r.user.username&&!J$3(o)){const e=M$a(o,!0);e&&D$4.trustedServers.push(e);}const s=e.credential;if(s&&s$r){const e=s$r.findServerInfo(s.server);let t=e&&e.owningSystemUrl;if(t){t=t.replace(/\/?$/,"/sharing");const e=s$r.findCredential(t,s.userId);e&&-1===s$r._getIdenticalSvcIdx(t,e)&&e.resources.unshift(t);}}return {data:r,getHeader:t?e=>t.headers.get(e):R$7,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function V(e,t,r){if(e.redoRequest)return e.redoRequest=!1,!1;if(!t)return !0;if(!t.ok)throw new Error(`Unable to load ${t.url} status: ${t.status}`);let o,s,n,a;r&&r.error&&(o=Object.assign(new Error,r.error)),o&&(s=Number(o.code),n=o.hasOwnProperty("subcode")?Number(o.subcode):null,a=o.messageCode,a=a&&a.toUpperCase());const i=e.params.requestOptions.authMode;if(403===s&&(4===n||o.message&&o.message.toLowerCase().indexOf("ssl")>-1&&-1===o.message.toLowerCase().indexOf("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&("no-prompt"!==i||498===s)&&-1!==F$3.indexOf(s)&&!W$1(e.params.url)&&(403!==s||-1===I$3.indexOf(a)&&(null==n||2===n&&e.credentialToken))){await $$1();try{const t=await s$r.getCredential(e.params.url,{error:N$3("request:server",o,e.params),prompt:"no-prompt"!==i,signal:e.controller.signal,token:e.credentialToken});return e.credential=t,e.credentialToken=t.token,e.useSSL=e.useSSL||t.ssl,!1}catch(l){if("no-prompt"===i)return e.credential=null,e.credentialToken=null,!1;o=l;}}if(o)throw o;return !0}function Y$1(e,t,r=!1){const o=t.controller.signal,s=new Image;return t.withCredentials?s.crossOrigin="use-credentials":s.crossOrigin="anonymous",s.alt="",s.src=e,t$s(s,e,r,o)}U$1._abortableFetch=null,U$1._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];

const request = /*#__PURE__*/Object.freeze({
    __proto__: null,
    'default': U$1
});

// esri4
const securePortsMap = { "80": "443", "8080": "8443" };
//--------------------------------------------------------------------------
//
// URL conversions
//
//--------------------------------------------------------------------------
/**
 * Provides http:// part if it is missing.
 * @param url A source URL.
 * @returns The URL starting from http/https protocol.
 */
function toHttpUrl(url) {
  if (!url || /^http/i.test(url)) {
    return url;
  }
  return "http://" + url;
}
/**
 * Converts nonsecured HTTP URL to HTTPS URL.
 *
 * If the input URL is null or its protocol is not "http", the input URL is returned.
 * When converted, the "http" protocol is replaced with "https", port 80 is
 * replaced with 443, and port 8080 is replaced with 8443.
 * This behavior could be changed or extended.
 *
 * @param url Input URL string or null.
 * @returns HTTPS URL or an original URL if it is non-HTTP URL.
 */
function toHttpsUrl(url) {
  if (url) {
    url = toHttpUrl(url); // convert to a valid url
  }
  if (!url || !/^http:\/\//i.test(url)) {
    return url;
  }
  // assume implemented but not declared
  const parsedUrl = new $$2(url);
  url = url.replace(/^http/i, "https");
  const port = securePortsMap[parsedUrl.port];
  if (port) {
    url = url.replace(":" + parsedUrl.port, ":" + port);
  }
  return url;
}

/**
 * Fits a box into another box.
 * @param box                      Box to fit { w, h }
 * @param parentBox                Bot to fit into { w, h }
 * @param params.vAlign            top/middle/bottom. Default - middle.
 * @param params.hAlign            left/center/right. Default - center.
 *
 * @returns New box { x, y, w, h, ratio (scale) }
 */
function fitBox({ box, parentBox, vAlign = "middle", hAlign = "center" }) {
  // w & h ratios
  let wr = box.w / parentBox.w;
  let hr = box.h / parentBox.h;
  // direction (-1 - need to expand, +1 - need to shrink)
  const wd = wr > 1 ? 1 : -1;
  const hd = hr > 1 ? 1 : -1;
  // normalize
  wr = wr > 1 ? 1 / wr : wr; // => 0..1
  hr = hr > 1 ? 1 / hr : hr; // => 0..1
  // calc final ratio
  let ratio;
  if (wd === -1 && hd === -1) {
    ratio = 1 / Math.max(wr, hr);
  }
  else if (wd === -1 && hd === 1) {
    ratio = hr;
  }
  else if (wd === 1 && hd === -1) {
    ratio = wr;
  }
  else if (wd === 1 && hd === 1) {
    ratio = Math.min(wr, hr);
  }
  const newBox = {
    x: 0,
    y: 0,
    w: box.w * ratio,
    h: box.h * ratio,
    ratio
  };
  // align
  switch (hAlign) {
    case "left":
      newBox.x = 0;
      break;
    case "right":
      newBox.x = parentBox.w - newBox.w;
      break;
    default:
      newBox.x = (parentBox.w - newBox.w) / 2;
  }
  switch (vAlign) {
    case "top":
      newBox.y = 0;
      break;
    case "bottom":
      newBox.y = parentBox.h - newBox.h;
      break;
    default:
      newBox.y = (parentBox.h - newBox.h) / 2;
  }
  return newBox;
}

// geoenrichment.utils
/**
 * Position node adjacent or kitty-corner to anchor such that it's fully visible in viewport.
 * Place node such that corner of node touches a corner of
 * aroundNode, and that node is fully visible.
 */
function placeAround(node, anchor, positions, layoutFunc) {
  const aroundNodePos = position(anchor, true);
  const _positions = prepareOrient(positions);
  // For above and below dropdowns, subtract width of border so that popup and aroundNode borders
  // overlap, preventing a double-border effect.  Unfortunately, difficult to measure the border
  // width of either anchor or popup because in both cases the border may be on an inner node.
  if (/^(above|below)/.test(_positions[0] + "")) {
    const anchorBorder = getBorderExtents(anchor), anchorChildBorder = anchor.firstChild
      ? getBorderExtents(anchor.firstChild)
      : { t: 0, l: 0, b: 0, r: 0 }, nodeBorder = getBorderExtents(node), nodeChildBorder = node.firstChild
      ? getBorderExtents(node.firstChild)
      : { t: 0, l: 0, b: 0, r: 0 };
    aroundNodePos.y += Math.min(anchorBorder.t + anchorChildBorder.t, nodeBorder.t + nodeChildBorder.t);
    aroundNodePos.h -=
      Math.min(anchorBorder.t + anchorChildBorder.t, nodeBorder.t + nodeChildBorder.t) +
        Math.min(anchorBorder.b + anchorChildBorder.b, nodeBorder.b + nodeChildBorder.b);
  }
  // Compute position and size of visible part of anchor (it may be partially hidden by ancestor nodes w/scrollbars)
  if (anchor.parentNode) {
    // ignore nodes between position:relative and position:absolute
    let sawPosAbsolute = getComputedStyle$1(anchor).position === "absolute";
    let parent = anchor.parentNode;
    while (parent && parent.nodeType === 1 && parent.nodeName !== "BODY") {
      //ignoring the body will help performance
      const parentPos = position(parent), pcs = getComputedStyle$1(parent);
      if (/relative|absolute/.test(pcs.position)) {
        sawPosAbsolute = false;
      }
      if (!sawPosAbsolute && /hidden|auto|scroll/.test(pcs.overflow)) {
        const bottomYCoord = Math.min(aroundNodePos.y + aroundNodePos.h, parentPos.y + parentPos.h);
        const rightXCoord = Math.min(aroundNodePos.x + aroundNodePos.w, parentPos.x + parentPos.w);
        aroundNodePos.x = Math.max(aroundNodePos.x, parentPos.x);
        aroundNodePos.y = Math.max(aroundNodePos.y, parentPos.y);
        aroundNodePos.h = bottomYCoord - aroundNodePos.y;
        aroundNodePos.w = rightXCoord - aroundNodePos.x;
      }
      if (pcs.position === "absolute") {
        sawPosAbsolute = true;
      }
      parent = parent.parentNode;
    }
  }
  const x = aroundNodePos.x, y = aroundNodePos.y, width = aroundNodePos.w, height = aroundNodePos.h;
  // Convert positions arguments into choices argument for _place()
  const choices = [];
  function push(aroundCorner, corner) {
    choices.push({
      aroundCorner,
      corner,
      pos: {
        x: {
          L: x,
          R: x + width,
          M: x + (width >> 1)
        }[aroundCorner.charAt(1)],
        y: {
          T: y,
          B: y + height,
          M: y + (height >> 1)
        }[aroundCorner.charAt(0)]
      }
    });
  }
  _positions.forEach((pos) => {
    let ltr = isBodyLtr();
    switch (pos) {
      case "above-centered":
        push("TM", "BM");
        break;
      case "below-centered":
        push("BM", "TM");
        break;
      case "after-centered":
        ltr = !ltr;
      // fall through
      case "before-centered":
        push(ltr ? "ML" : "MR", ltr ? "MR" : "ML");
        break;
      case "after":
        ltr = !ltr;
      // fall through
      case "before":
        push(ltr ? "TL" : "TR", ltr ? "TR" : "TL");
        push(ltr ? "BL" : "BR", ltr ? "BR" : "BL");
        break;
      case "below-alt":
        ltr = !ltr;
      // fall through
      case "below":
        // first try to align left borders, next try to align right borders (or reverse for RTL mode)
        push(ltr ? "BL" : "BR", ltr ? "TL" : "TR");
        push(ltr ? "BR" : "BL", ltr ? "TR" : "TL");
        break;
      case "above-alt":
        ltr = !ltr;
      // fall through
      case "above":
        // first try to align left borders, next try to align right borders (or reverse for RTL mode)
        push(ltr ? "TL" : "TR", ltr ? "BL" : "BR");
        push(ltr ? "TR" : "TL", ltr ? "BR" : "BL");
        break;
      default:
        if (typeof pos === "object") {
          push(pos.aroundCorner, pos.corner);
        }
    }
  });
  const position$1 = _place(node, choices, layoutFunc, { w: width, h: height });
  position$1.aroundNodePos = aroundNodePos;
  return position$1;
}
function prepareOrient(orient) {
  if (!orient) {
    return ["below"];
  }
  const result = [];
  orient.forEach((position) => {
    // Provide additional variants of orientations with default alignment at the bottom
    let ltr = isBodyLtr();
    switch (position) {
      case "before-alt":
        ltr = !ltr;
      case "after-alt":
        result.push(ltr ? { aroundCorner: "BR", corner: "BL" } : { aroundCorner: "BL", corner: "BR" }); // Trick, see placeAround() method
        result.push(ltr ? { aroundCorner: "TR", corner: "TL" } : { aroundCorner: "TL", corner: "TR" }); // Trick, see placeAround() method
        return;
    }
    result.push(position);
  });
  return result;
}
/**
 * Given a list of spots to put node, put it at the first spot where it fits,
 * of if it doesn't fit anywhere then the place with the least overflow
 */
function _place(node, choices, layoutFunc, aroundNodeCoords) {
  const view = {
    l: 0,
    t: 0,
    w: document.body.clientWidth,
    h: document.body.clientHeight
  };
  // This won't work if the node is inside a <div style="position: relative">,
  // so reattach it to <body>.	 (Otherwise, the positioning will be wrong
  // and also it might get cutoff.)
  if (!node.parentNode || String(node.parentNode.nodeName).toLowerCase() !== "body") {
    document.body.appendChild(node);
  }
  let best = null;
  choices.some((choice) => {
    const corner = choice.corner;
    const pos = choice.pos;
    let overflow = 0;
    // calculate amount of space available given specified position of node
    const spaceAvailable = {
      w: {
        L: view.l + view.w - pos.x,
        R: pos.x - view.l,
        M: view.w
      }[corner.charAt(1)],
      h: {
        T: view.t + view.h - pos.y,
        B: pos.y - view.t,
        M: view.h
      }[corner.charAt(0)]
    };
    // Clear left/right position settings set earlier so they don't interfere with calculations,
    // specifically when layoutFunc() (a.k.a. Tooltip.orient()) measures natural width of Tooltip
    const s = node.style;
    s.left = s.right = "auto";
    // configure node to be displayed in given position relative to button
    // (need to do this in order to get an accurate size for the node, because
    // a tooltip's size changes based on position, due to triangle)
    if (layoutFunc) {
      const res = layoutFunc(node, choice.aroundCorner, corner, spaceAvailable, aroundNodeCoords);
      overflow = typeof res === "undefined" ? 0 : res;
    }
    // get node's size
    const style = node.style;
    const oldDisplay = style.display;
    const oldVis = style.visibility;
    if (style.display === "none") {
      style.visibility = "hidden";
      style.display = "";
    }
    const bb = position(node);
    style.display = oldDisplay;
    style.visibility = oldVis;
    // coordinates and size of node with specified corner placed at pos,
    // and clipped by viewport
    const startXpos = {
      L: pos.x,
      R: pos.x - bb.w,
      M: Math.max(view.l, Math.min(view.l + view.w, pos.x + (bb.w >> 1)) - bb.w) // M orientation is more flexible
    }[corner.charAt(1)], startYpos = {
      T: pos.y,
      B: pos.y - bb.h,
      M: Math.max(view.t, Math.min(view.t + view.h, pos.y + (bb.h >> 1)) - bb.h)
    }[corner.charAt(0)], startX = Math.max(view.l, startXpos), startY = Math.max(view.t, startYpos), endX = Math.min(view.l + view.w, startXpos + bb.w), endY = Math.min(view.t + view.h, startYpos + bb.h), width = endX - startX, height = endY - startY;
    overflow += bb.w - width + (bb.h - height);
    if (best == null || overflow < best.overflow) {
      best = {
        corner,
        aroundCorner: choice.aroundCorner,
        x: startX,
        y: startY,
        w: width,
        h: height,
        overflow,
        spaceAvailable
      };
    }
    return !overflow;
  });
  // In case the best position is not the last one we checked, need to call
  // layoutFunc() again.
  if (best.overflow && layoutFunc) {
    layoutFunc(node, best.aroundCorner, best.corner, best.spaceAvailable, aroundNodeCoords);
  }
  // compensate for margin on <body>, see #16148
  const top = best.y - +getStyle(document.body, "marginTop");
  const side = best.x - +getStyle(document.body, "marginLeft");
  node.style.top = top + "px";
  node.style.left = side + "px";
  node.style.right = "auto"; // needed for FF or else tooltip goes to far left
  return best;
}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function t$r(t){return t}const u$A=t=>t*t,o$l=t=>1-u$A(1-t),i$P=t=>t<.5?u$A(2*t)/2:(o$l(2*(t-.5))+1)/2,n$C=t=>t*t*t,c$T=t=>1-n$C(1-t),a$G=t=>t<.5?n$C(2*t)/2:(c$T(2*(t-.5))+1)/2,s$q=t=>t*t*t*t,q$2=t=>1-s$q(1-t),r$i=t=>t<.5?s$q(2*t)/2:(q$2(2*(t-.5))+1)/2,e$m=t=>t*t*t*t*t,b$8=t=>1-e$m(1-t),d$v=t=>t<.5?e$m(2*t)/2:(b$8(2*(t-.5))+1)/2,h$q=t=>1-Math.cos(t*Math.PI/2),p$V=t=>1-h$q(1-t),x$a=t=>t<.5?h$q(2*t)/2:(p$V(2*(t-.5))+1)/2,M$7=t=>2**(10*(t-1)),f$n=t=>1-M$7(1-t),l$E=t=>t<.5?M$7(2*t)/2:(f$n(2*(t-.5))+1)/2,I$2=t=>-(Math.sqrt(1-t*t)-1),P$4=t=>1-I$2(1-t),g$c=t=>t<.5?I$2(2*t)/2:(P$4(2*(t-.5))+1)/2;function j$c(t){const u=2*(t-Math.sqrt((t-1)*t)),o=u/2/t;return i=>i<o?t*i*i:u*i-u+1}function k$6(t,u){return o=>o<u?u*t(o/u):1-t((1-o)/(1-u))*(1-u)}const m$t=k$6(j$c(1),1),v$7=k$6(j$c(1),0),w$7=k$6(j$c(1),.5),y$h=k$6(j$c(2),1),z$3=k$6(j$c(2),0),A$5=k$6(j$c(2),.5),B$1=k$6(j$c(3),1),C$5=k$6(j$c(3),0),D$3=k$6(j$c(3),.5),E$1=k$6(j$c(4),1),F$2=k$6(j$c(4),0),G$4=k$6(j$c(4),.5),H$1={linear:t$r,"in-quad":u$A,"out-quad":o$l,"in-out-quad":i$P,"in-coast-quad":m$t,"out-coast-quad":v$7,"in-out-coast-quad":w$7,"in-cubic":n$C,"out-cubic":c$T,"in-out-cubic":a$G,"in-coast-cubic":y$h,"out-coast-cubic":z$3,"in-out-coast-cubic":A$5,"in-quart":s$q,"out-quart":q$2,"in-out-quart":r$i,"in-coast-quart":B$1,"out-coast-quart":C$5,"in-out-coast-quart":D$3,"in-quint":e$m,"out-quint":b$8,"in-out-quint":d$v,"in-coast-quint":E$1,"out-coast-quint":F$2,"in-out-coast-quint":G$4,"in-sine":h$q,"out-sine":p$V,"in-out-sine":x$a,"in-expo":M$7,"out-expo":f$n,"in-out-expo":l$E,"in-circ":I$2,"out-circ":P$4,"in-out-circ":g$c};

// esri4.views.animation
function _executeAnimation(runInfo) {
  if (runInfo.progress < 1) {
    requestAnimationFrame(() => {
      if (runInfo._stopMethod) {
        return; // stopped
      }
      const currentTime = new Date().getTime();
      runInfo.progress = 1 - (runInfo.endTime - currentTime) / runInfo.duration;
      runInfo.progress = Math.min(1, runInfo.progress);
      _updateProperties(runInfo);
      _executeAnimation(runInfo);
    });
  }
  else {
    runInfo._onEnd();
  }
}
function _updateProperties(runInfo) {
  for (const id in runInfo.properties) {
    const propertyInfo = runInfo.properties[id];
    const easingFunc = !propertyInfo.easing
      ? null
      : typeof propertyInfo.easing === "function"
        ? propertyInfo.easing
        : H$1[propertyInfo.easing];
    const progress = easingFunc ? easingFunc(runInfo.progress) : runInfo.progress;
    const currentValue = propertyInfo.start + progress * (propertyInfo.end - propertyInfo.start);
    runInfo.obj[id] = propertyInfo.units ? currentValue + propertyInfo.units : currentValue;
    runInfo._onProgress(id, currentValue, progress);
  }
}
/**
 * Animates one or multple properties of a dom node or any object.
 * @example
 *    Animator.animateProperty({
 *        obj: object, - can be missing
 *        duration: 100, // ms
 *        properties: {
 *            prop1: {start: 0, end: 1, addPx: Boolean (default false), easing: Function | String }
 *        },
 *        onEnd: function(){ },
 *        onProgress: function(prop, value, progress){ }
 *    });
 *
 * @returns AnimationInfo, an object with a stop() method to stop animation, and Promise.
 */
function animateProperty({ obj, node, duration = 1000, properties, onProgress, onEnd, onStop, onCancel }) {
  const d = (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.c)();
  const startTime = Date.now();
  const emitter = new Evented$1();
  const runInfo = {
    properties,
    obj: obj || node || {},
    progress: 0,
    promise: d.promise,
    duration,
    startTime,
    endTime: startTime + duration,
    stop: (goToEnd) => {
      runInfo._stopMethod = goToEnd ? "stopEnd" : "stop";
      // finalize animation
      if (runInfo._stopMethod === "stop") {
        runInfo._onEnd();
        return;
      }
      if (runInfo._stopMethod === "stopEnd") {
        runInfo.progress = 1;
        _updateProperties(runInfo);
        runInfo._onEnd();
        return;
      }
    },
    cancel: () => {
      runInfo._stopMethod = "cancel";
      runInfo._onCancel(); // finalize animation
    },
    // PromiseLike methods
    then: (onfulfilled, onrejected) => d.promise.then(onfulfilled, onrejected),
    // Events
    events: emitter,
    // internal
    _stopMethod: null,
    _onProgress: (propName, value, progress) => {
      onProgress && onProgress(propName, value, progress);
    },
    _onEnd: () => {
      onStop && onStop();
      onEnd && onEnd();
      d.resolve();
      emitter.emit("onEnd");
    },
    _onCancel: () => {
      onCancel && onCancel();
    }
  };
  _updateProperties(runInfo);
  _executeAnimation(runInfo);
  return runInfo;
}

// geoenrichment.utils
const ANIMATION_DURATION = 250; // ms
/**
 * Animates a node to fade in.
 * @param params.node          Dom node.
 * @param params.duration      Number. Default ANIMATION_DURATION.
 * @param params.onEnd         Function().
 *
 * @returns Promise.
 */
function animateFadeIn(params) {
  return animateProperty({
    obj: params.node.style,
    duration: params.duration || ANIMATION_DURATION,
    properties: {
      opacity: { start: 0, end: 1 }
    },
    onEnd() {
      params.onEnd && params.onEnd();
    }
  });
}
/**
 * Animates a node to fade out.
 * @param params.node          Dom node.
 * @param params.duration      Number. Default ANIMATION_DURATION.
 * @param params.onEnd         Function().
 *
 * @returns Promise.
 */
function animateFadeOut(params) {
  return animateProperty({
    obj: params.node.style,
    duration: params.duration || ANIMATION_DURATION,
    properties: {
      opacity: { start: 1, end: 0 }
    },
    onEnd() {
      params.onEnd && params.onEnd();
    }
  });
}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const e$l={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,5,10]};function r$h(r){var l;return null!=(l=e$l[r.toLowerCase()])?l:null}function a$F(e,r,l){l<0&&++l,l>1&&--l;const a=6*l;return a<1?e+(r-e)*a:2*l<1?r:3*l<2?e+(r-e)*(2/3-l)*6:e}function n$B(e,r,l,n=1){const i=(e%360+360)%360/360,o=l<=.5?l*(r+1):l+r-l*r,t=2*l-o;return [Math.round(256*a$F(t,o,i+1/3)),Math.round(256*a$F(t,o,i)),Math.round(256*a$F(t,o,i-1/3)),n]}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const n$A=new Float32Array(1);function u$z(n){--n;for(let t=1;t<32;t<<=1)n|=n>>t;return n+1}function e$k(n,t,r){return n<t?t:n>r?r:n}function i$O(n,t,r){return Math.min(Math.max(n,t),r)}function o$k(n){return 0==(n&n-1)}const h$p=Math.log2||function(n){return Math.log(n)/Math.LN2};function M$6(n,t,r){return n+(t-n)*r}function m$s(n){return n*Math.PI/180}function b$7(n){return 180*n/Math.PI}function N$2(n){return Math.acos(e$k(n,-1,1))}function g$b(n){return Math.asin(e$k(n,-1,1))}function p$U(t){return n$A[0]=t,n$A[0]}p$U(34028234663852886e22);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function n$z(t){return e$k(a$P(t),0,255)}function a$E(t,r,s){return t=Number(t),isNaN(t)?s:t<r?r:t>s?s:t}class o$j{constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t);}static blendColors(t,r,s,i=new o$j){return i.r=Math.round(t.r+(r.r-t.r)*s),i.g=Math.round(t.g+(r.g-t.g)*s),i.b=Math.round(t.b+(r.b-t.b)*s),i.a=t.a+(r.a-t.a)*s,i._sanitize()}static fromRgb(t,r){const i=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(i){const t=i[2].split(/\s*,\s*/),e=i[1];if("rgb"===e&&3===t.length||"rgba"===e&&4===t.length){const s=t[0];if("%"===s.charAt(s.length-1)){const s=t.map((t=>2.56*parseFloat(t)));return 4===t.length&&(s[3]=parseFloat(t[3])),o$j.fromArray(s,r)}return o$j.fromArray(t.map((t=>parseFloat(t))),r)}if("hsl"===e&&3===t.length||"hsla"===e&&4===t.length)return o$j.fromArray(n$B(parseFloat(t[0]),parseFloat(t[1])/100,parseFloat(t[2])/100,parseFloat(t[3])),r)}return null}static fromHex(t,r=new o$j){if(4!==t.length&&7!==t.length||"#"!==t[0])return null;const s=4===t.length?4:8,i=(1<<s)-1;let e=Number("0x"+t.substr(1));return isNaN(e)?null:(["b","g","r"].forEach((t=>{const n=e&i;e>>=s,r[t]=4===s?17*n:n;})),r.a=1,r)}static fromArray(t,r=new o$j){return r._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(r.a)&&(r.a=1),r._sanitize()}static fromString(t,r){const s=r$h(t);return s&&o$j.fromArray(s,r)||o$j.fromRgb(t,r)||o$j.fromHex(t,r)}static fromJSON(t){return t&&new o$j([t[0],t[1],t[2],t[3]/255])}static toUnitRGB(r){return r$A(r)?[r.r/255,r.g/255,r.b/255]:null}static toUnitRGBA(r){return r$A(r)?[r.r/255,r.g/255,r.b/255,null!=r.a?r.a:1]:null}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){if("string"==typeof t)o$j.fromString(t,this);else if(Array.isArray(t))o$j.fromArray(t,this);else {var r,s,i,e;this._set(null!=(r=t.r)?r:0,null!=(s=t.g)?s:0,null!=(i=t.b)?i:0,null!=(e=t.a)?e:1),t instanceof o$j||this._sanitize();}return this}toRgb(){return [this.r,this.g,this.b]}toRgba(){return [this.r,this.g,this.b,this.a]}toHex(){const t=this.r.toString(16),r=this.g.toString(16),s=this.b.toString(16);return `#${t.length<2?"0"+t:t}${r.length<2?"0"+r:r}${s.length<2?"0"+s:s}`}toCss(t=!1){const r=this.r+", "+this.g+", "+this.b;return t?`rgba(${r}, ${this.a})`:`rgb(${r})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=0){const r=n$z(this.r),s=n$z(this.g),i=n$z(this.b);return 0===t||1!==this.a?[r,s,i,n$z(255*this.a)]:[r,s,i]}clone(){return new o$j(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}_sanitize(){return this.r=Math.round(a$E(this.r,0,255)),this.g=Math.round(a$E(this.g,0,255)),this.b=Math.round(a$E(this.b,0,255)),this.a=a$E(this.a,0,1),this}_set(t,r,s,i){this.r=t,this.g=r,this.b=s,this.a=i;}}o$j.prototype.declaredClass="esri.Color";

// esri4
/**
 * Converts a value to CSS color. If conversion fails, the default value is returned.
 *  @param value String | Color (esri Color) | Number | Number[] as [100, 100, 100, 0.5?].
 *      A color value could be a string, a number, or Color.
 *  @param ignoreAlpha Boolean.
 *      True value means ignore alpha value of color and forces conversion to hex CSS representation.
 *  @param defaultValue String | Color | Number.
 *      Default value. If the default value is missing, "#000000" is supposed.
 *
 * @returns CSS color in the form "#xxxxxx" or "rgba(R,G,B,A)".
 * If the conversion fails, a color representation for the default value is returned.
 */
function toCSSColor(value, ignoreAlpha = false, defaultValue) {
  // At first we convert a string to Color.
  // The special case is a hexadecimal string starting from 0x. We don't convert it.
  // The result could be null!
  if (typeof value === "string" && !/^0x/i.test(value)) {
    value = o$j.fromString(value);
  }
  if (Array.isArray(value)) {
    value = o$j.fromArray(value);
  }
  // Now we convert a color to CSS representation.
  if (isColorObject(value)) {
    return ignoreAlpha || value.a === 1 ? value.toHex() : value.toCss(true);
  }
  // Otherwise we threat the input as Number and manually convert it to hex CSS representation.
  if (value == null /*null or undefined*/ || isNaN(value)) {
    return defaultValue ? toCSSColor(defaultValue, ignoreAlpha) : "#000000";
  }
  value = "00000" + Number(value).toString(16);
  return "#" + value.substr(value.length - 6);
}
function isColorObject(color) {
  return color && typeof color.toHex === "function";
}
/**
 * Converts a value to a new Color object.
 * @param value String | Color | Number.
 *      A color value could be a string, a number, or Color.
 * @param defaultValue String | Color | Number.
 *      Default value. If the default value is missing, "#000000" is supposed.
 *
 * @returns a new instance of Color.
 * If the conversion fails, a color representation for the default value is returned.
 */
function toColor(value, defaultValue) {
  if (typeof value === "object") {
    return new o$j(value);
  }
  return o$j.fromString(toCSSColor(value, false, defaultValue));
}

// {x,y} => [x, y]
function degToRad(angleDeg) {
  return (angleDeg * Math.PI) / 180;
}
function radToDeg(angleRad) {
  return (angleRad * 180) / Math.PI;
}

// geoenrichment.utils
/**
 * @example
 *
 * [xx xy dx]
 * [yx yy dy]
 * [ 0  0  1]
 *
 * // SVG notation
 * matrix(a,b,c,d,e,f)
 * [a c e]
 * [b d f]
 * [0 0 1]
 * matrix(xx,yx,xy,yy,dx,dy)
 */
class GFXMatrix2D {
  constructor(params) {
    this.dx = 0;
    this.dy = 0;
    this.xx = 1;
    this.xy = 0;
    this.yx = 0;
    this.yy = 1;
    mixin(this, params);
  }
}
class GfxMatrixBuilder {
  // matrix creators
  create(params) {
    return new GFXMatrix2D(params);
  }
  normalize(matrix) {
    return matrix;
  }
  /**
   * Returns whether the specified matrix is the identity.
   */
  isIdentity(matrix) {
    return (matrix.xx === 1 && matrix.xy === 0 && matrix.yx === 0 && matrix.yy === 1 && matrix.dx === 0 && matrix.dy === 0);
  }
  translate(a, b) {
    return new GFXMatrix2D({ dx: a, dy: b });
  }
  scale(a, b) {
    return new GFXMatrix2D({ xx: a, yy: b });
  }
  rotate(angleRad) {
    const c = Math.cos(angleRad);
    const s = Math.sin(angleRad);
    return new GFXMatrix2D({ xx: c, xy: -s, yx: s, yy: c });
  }
  rotateg(degree) {
    return this.rotate(degToRad(degree));
  }
  rotategAt(degree, a, b) {
    return this._sandwich(this.rotateg(degree), a, b);
  }
  multiply(matrices) {
    matrices = matrices.filter((m) => !!m);
    let matrix = matrices[0];
    // combine matrices
    for (let i = 1; i < matrices.length; ++i) {
      const l = matrix, r = matrices[i];
      matrix = new GFXMatrix2D();
      matrix.xx = l.xx * r.xx + l.xy * r.yx;
      matrix.xy = l.xx * r.xy + l.xy * r.yy;
      matrix.yx = l.yx * r.xx + l.yy * r.yx;
      matrix.yy = l.yx * r.xy + l.yy * r.yy;
      matrix.dx = l.xx * r.dx + l.xy * r.dy + l.dx;
      matrix.dy = l.yx * r.dx + l.yy * r.dy + l.dy;
    }
    mixin(this, matrix);
    return matrix;
  }
  /**
   * Applies a matrix to a rectangle.
   * The method applies the transformation on all corners of the
   * rectangle and returns the smallest rectangle enclosing the 4 transformed points.
   */
  multiplyRectangle(matrix, rect) {
    const M = gfxMatrixBuilder.normalize(matrix);
    if (this.isIdentity(M)) {
      return { x: rect.x, y: rect.y, w: rect.w, h: rect.h };
    } // gfx.Rectangle
    const p0 = this.multiplyPoint(M, rect.x, rect.y), p1 = this.multiplyPoint(M, rect.x, rect.y + rect.h), p2 = this.multiplyPoint(M, rect.x + rect.w, rect.y), p3 = this.multiplyPoint(M, rect.x + rect.w, rect.y + rect.h), minx = Math.min(p0.x, p1.x, p2.x, p3.x), miny = Math.min(p0.y, p1.y, p2.y, p3.y), maxx = Math.max(p0.x, p1.x, p2.x, p3.x), maxy = Math.max(p0.y, p1.y, p2.y, p3.y);
    return {
      // gfx.Rectangle
      x: minx,
      y: miny,
      w: maxx - minx,
      h: maxy - miny
    };
  }
  /**
   * Applies a matrix to a point.
   */
  multiplyPoint(matrix, a, b) {
    const M = this.normalize(matrix);
    return this._multiplyPoint(M, a, b);
  }
  _multiplyPoint(matrix, x, y) {
    return { x: matrix.xx * x + matrix.xy * y + matrix.dx, y: matrix.yx * x + matrix.yy * y + matrix.dy };
  }
  // high level operations
  _sandwich(matrix, x, y) {
    return this.multiply([this.translate(x, y), matrix, this.translate(-x, -y)]);
  }
}
const gfxMatrixBuilder = new GfxMatrixBuilder();

// geoenrichment.utils
/**
 * Calculates the bounding box of content box inside container box, and considering the viewBox and preserveAspectRatio.
 * @param containerBox SVG size.
 * @param contentBox Own bounding box of the SVG content.
 * @param viewBox SVG view box.
 * @param preserveAspectRatio SVG aspect ratio rule.
 */
function getBoundingBoxInViewPort(containerBox, contentBox, viewBox, preserveAspectRatio) {
  let xmodifier;
  let ymodifier;
  preserveAspectRatio = preserveAspectRatio || "xMidYMin meet";
  switch (preserveAspectRatio) {
    case "none":
      const ratioX = containerBox.w / viewBox.width;
      const ratioY = containerBox.h / viewBox.height;
      xmodifier = (x) => ratioX * (x - viewBox.xmin);
      ymodifier = (y) => ratioY * (y - viewBox.ymin);
      break;
    case "xMidYMin meet":
      const fitViewBox = fitBox({
        box: { w: viewBox.width, h: viewBox.height },
        parentBox: containerBox
      });
      xmodifier = (x) => fitViewBox.x + fitViewBox.ratio * (x - viewBox.xmin);
      ymodifier = (y) => fitViewBox.y + fitViewBox.ratio * (y - viewBox.ymin);
      break;
    // TODO: support other cases
  }
  const x = xmodifier(contentBox.x);
  const y = ymodifier(contentBox.y);
  const r = containerBox.w - xmodifier(contentBox.x + contentBox.w);
  const b = containerBox.h - ymodifier(contentBox.y + contentBox.h);
  return {
    x,
    y,
    r,
    b,
    w: containerBox.w - r - x,
    h: containerBox.h - b - y
  };
}

// esri4.core
function _toNumber(value) {
  return (typeof value === "string" ? Number(value.replace("px", "")) : Number(value)) || 0;
}
function viewBoxFromString(viewBox, width, height) {
  if (viewBox) {
    const ps = viewBox.split(" ");
    return {
      xmin: _toNumber(ps[0]),
      ymin: _toNumber(ps[1]),
      width: _toNumber(ps[2]),
      height: _toNumber(ps[3])
    };
  }
  if (width && height) {
    return {
      xmin: 0,
      ymin: 0,
      width: _toNumber(width),
      height: _toNumber(height)
    };
  }
  return null;
}

// geoenrichment.utils
/**
 * Useful reading: https://developer.mozilla.org/ru/docs/Web/SVG/Attribute/d
 */
function getBBoxCalculator() {
  let _segmentBbox;
  const last = {};
  const calculator = {
    updateBBox: (segement) => {
      const action = segement.action;
      const n = segement.args;
      const l = n.length;
      let i;
      switch (action) {
        case "M":
        case "L":
          for (i = 0; i < l; i += 2) {
            _updateBBox(n[i], n[i + 1]);
          }
          last.x = n[l - 2];
          last.y = n[l - 1];
          if (action === "M") {
            last.xm = last.x;
            last.ym = last.y;
          }
          break;
        case "H":
          for (i = 0; i < l; ++i) {
            _updateBBox(n[i], last.y);
          }
          last.x = n[l - 1];
          break;
        case "V":
          for (i = 0; i < l; ++i) {
            _updateBBox(last.x, n[i]);
          }
          last.y = n[l - 1];
          break;
        case "m":
          let start = 0;
          if (!("x" in last)) {
            _updateBBox((last.x = n[0]), (last.y = n[1]));
            start = 2;
          }
          for (i = start; i < l; i += 2) {
            _updateBBox((last.x += n[i]), (last.y += n[i + 1]));
          }
          if (action === "m") {
            last.xm = last.x;
            last.ym = last.y;
          }
          break;
        case "l":
          for (i = 0; i < l; i += 2) {
            _updateBBox((last.x += n[i]), (last.y += n[i + 1]));
          }
          break;
        case "h":
          for (i = 0; i < l; ++i) {
            _updateBBox((last.x += n[i]), last.y);
          }
          break;
        case "v":
          for (i = 0; i < l; ++i) {
            _updateBBox(last.x, (last.y += n[i]));
          }
          break;
        case "C":
          for (i = 0; i < l; i += 6) {
            _updateBBoxCubic(last.x, last.y, n[i], n[i + 1], (last.cx = n[i + 2]), (last.cy = n[i + 3]), (last.x = n[i + 4]), (last.y = n[i + 5]));
          }
          break;
        case "c":
          for (i = 0; i < l; i += 6) {
            _updateBBoxCubic(last.x, last.y, last.x + n[i], last.y + n[i + 1], (last.cx = last.x + n[i + 2]), (last.cy = last.y + n[i + 3]), (last.x += n[i + 4]), (last.y += n[i + 5]));
          }
          break;
        case "S":
          for (i = 0; i < l; i += 4) {
            // equals to the starting point if the previous wasn't a curve
            const xc = typeof last.cx === "number" ? last.cx : last.x;
            const yc = typeof last.cy === "number" ? last.cy : last.y;
            // reflect
            const x1 = last.x + (last.x - xc);
            const y1 = last.y + (last.y - yc);
            _updateBBoxCubic(last.x, last.y, x1, y1, (last.cx = n[i]), (last.cy = n[i + 1]), (last.x = n[i + 2]), (last.y = n[i + 3]));
          }
          break;
        case "s":
          for (i = 0; i < l; i += 4) {
            // equals to the starting point if the previous wasn't a curve
            const xc = typeof last.cx === "number" ? last.cx : last.x;
            const yc = typeof last.cy === "number" ? last.cy : last.y;
            // reflect
            const x1 = last.x + (last.x - xc);
            const y1 = last.y + (last.y - yc);
            _updateBBoxCubic(last.x, last.y, x1, y1, (last.cx = last.x + n[i]), (last.cy = last.y + n[i + 1]), (last.x += n[i + 2]), (last.y += n[i + 3]));
          }
          break;
        case "Q":
          for (i = 0; i < l; i += 4) {
            _updateBBoxQuadratic(last.x, last.y, (last.qx = n[i]), (last.qy = n[i + 1]), (last.x = n[i + 2]), (last.y = n[i + 3]));
          }
          break;
        case "q":
          for (i = 0; i < l; i += 4) {
            _updateBBoxQuadratic(last.x, last.y, (last.qx = last.x + n[i]), (last.qy = last.y + n[i + 1]), (last.x += n[i + 2]), (last.y += n[i + 3]));
          }
          break;
        case "T":
          for (i = 0; i < l; i += 2) {
            // equals to the starting point if the previous wasn't a curve
            const xc = typeof last.qx === "number" ? last.qx : last.x;
            const yc = typeof last.qy === "number" ? last.qy : last.y;
            // reflect
            const x1 = last.x + (last.x - xc);
            const y1 = last.y + (last.y - yc);
            _updateBBoxQuadratic(last.x, last.y, (last.qx = x1), (last.qy = y1), (last.x = n[i]), (last.y = n[i + 1]));
          }
          break;
        case "t":
          for (i = 0; i < l; i += 2) {
            // equals to the starting point if the previous wasn't a curve
            const xc = typeof last.qx === "number" ? last.qx : last.x;
            const yc = typeof last.qy === "number" ? last.qy : last.y;
            // reflect
            const x1 = last.x + (last.x - xc);
            const y1 = last.y + (last.y - yc);
            _updateBBoxQuadratic(last.x, last.y, (last.qx = x1), (last.qy = y1), (last.x += n[i]), (last.y += n[i + 1]));
          }
          break;
        case "A":
          for (i = 0; i < l; i += 7) {
            _updateBBoxArc(last.x, last.y, n[i], n[i + 1], n[i + 2], n[i + 3], n[i + 4], (last.x = n[i + 5]), (last.y = n[i + 6]));
          }
          break;
        case "a":
          for (i = 0; i < l; i += 7) {
            _updateBBoxArc(last.x, last.y, n[i], n[i + 1], n[i + 2], n[i + 3], n[i + 4], (last.x += n[i + 5]), (last.y += n[i + 6]));
          }
          break;
        case "z":
        case "Z":
          last.x = last.xm;
          last.y = last.ym;
          break;
      }
      switch (action) {
        case "M":
        case "L":
        case "H":
        case "V":
        case "A":
        case "m":
        case "l":
        case "h":
        case "v":
        case "a":
          last.cx = null;
          last.cy = null;
          last.qx = null;
          last.qy = null;
          break;
      }
      last.prevAction = action;
      function _updateBBoxCubic(xFrom, yFrom, x1, y1, x2, y2, xTo, yTo) {
        function _getPoint(t, p1, p2, p3, p4) {
          const _t = 1 - t;
          return _t * _t * _t * p1 + 3 * _t * _t * t * p2 + 3 * _t * t * t * p3 + t * t * t * p4;
        }
        // skip the starting point
        for (let i = 0; i < 10; i++) {
          const t = 0.1 * (i + 1);
          _updateBBox(_getPoint(t, xFrom, x1, x2, xTo), _getPoint(t, yFrom, y1, y2, yTo));
        }
      }
      function _updateBBoxQuadratic(xFrom, yFrom, x1, y1, xTo, yTo) {
        function _getPoint(t, p1, p2, p3) {
          const _t = 1 - t;
          return _t * _t * p1 + 2 * _t * t * p2 + t * t * p3;
        }
        // skip the starting point
        for (let i = 0; i < 10; i++) {
          const t = 0.1 * (i + 1);
          _updateBBox(_getPoint(t, xFrom, x1, xTo), _getPoint(t, yFrom, y1, yTo));
        }
      }
      function _updateBBoxArc(xFrom, yFrom, rx, ry, rotationDeg, largeArcFlag, sweepFlag, xTo, yTo) {
        const arcParams = _calcArcParams(xFrom, yFrom, rx, ry, rotationDeg, largeArcFlag, sweepFlag, xTo, yTo);
        const cos_r = arcParams.rotationRad ? Math.cos(arcParams.rotationRad) : 1;
        const sin_r = arcParams.rotationRad ? Math.sin(arcParams.rotationRad) : 0;
        function _getPoint(t) {
          const angleRad = arcParams.angleFromRad + (arcParams.angleToRad - arcParams.angleFromRad) * t;
          const cos_a = angleRad ? Math.cos(angleRad) : 1;
          const sin_a = angleRad ? Math.sin(angleRad) : 0;
          const relX = arcParams.rx * cos_a;
          const relY = arcParams.ry * sin_a;
          const rotatedRelX = cos_r * relX - sin_r * relY;
          const rotatedRelY = sin_r * relX + cos_r * relY;
          return {
            x: arcParams.cx + rotatedRelX,
            y: arcParams.cy + rotatedRelY
          };
        }
        // skip the starting point
        for (let i = 0; i < 10; i++) {
          const t = 0.1 * (i + 1);
          const p = _getPoint(t);
          _updateBBox(p.x, p.y);
        }
      }
      // updates the bounding box of path with new point
      function _updateBBox(x, y) {
        const bbox = _segmentBbox;
        // we use {l, b, r, t} representation of a bbox
        if (bbox && "l" in bbox) {
          if (bbox.l > x) {
            bbox.l = x;
          }
          if (bbox.r < x) {
            bbox.r = x;
          }
          if (bbox.t > y) {
            bbox.t = y;
          }
          if (bbox.b < y) {
            bbox.b = y;
          }
        }
        else {
          _segmentBbox = { l: x, b: y, r: x, t: y };
        }
      }
    },
    getBBox: () => _segmentBbox
  };
  return calculator;
}
function _calcArcParams(xFrom, yFrom, rx, ry, rotationDeg, largeArcFlag, sweepFlag, xTo, yTo) {
  // https://www.w3.org/TR/SVG11/implnote.html
  // http://svn.apache.org/repos/asf/xmlgraphics/batik/branches/svg11/sources/org/apache/batik/ext/awt/geom/ExtendedGeneralPath.java
  //
  // Elliptical arc implementation based on the SVG specification notes
  //
  // Compute the half distance between the current and the final point
  const dx2 = (xFrom - xTo) / 2.0;
  const dy2 = (yFrom - yTo) / 2.0;
  // Convert angle from degrees to radians
  const rotationRad = degToRad(rotationDeg % 360.0);
  const cosAngle = Math.cos(rotationRad);
  const sinAngle = Math.sin(rotationRad);
  //
  // Step 1 : Compute (x1, y1)
  //
  const x1 = cosAngle * dx2 + sinAngle * dy2;
  const y1 = -sinAngle * dx2 + cosAngle * dy2;
  // Ensure radii are large enough
  rx = Math.abs(rx);
  ry = Math.abs(ry);
  let Prx = rx * rx;
  let Pry = ry * ry;
  const Px1 = x1 * x1;
  const Py1 = y1 * y1;
  // check that radii are large enough
  const radiiCheck = Px1 / Prx + Py1 / Pry;
  if (radiiCheck > 1) {
    rx = Math.sqrt(radiiCheck) * rx;
    ry = Math.sqrt(radiiCheck) * ry;
    Prx = rx * rx;
    Pry = ry * ry;
  }
  //
  // Step 2 : Compute (cx1, cy1)
  //
  let sign = largeArcFlag === sweepFlag ? -1 : 1;
  let sq = (Prx * Pry - Prx * Py1 - Pry * Px1) / (Prx * Py1 + Pry * Px1);
  sq = sq < 0 ? 0 : sq;
  const coef = sign * Math.sqrt(sq);
  const cx1 = coef * ((rx * y1) / ry);
  const cy1 = coef * -((ry * x1) / rx);
  //
  // Step 3 : Compute (cx, cy) from (cx1, cy1)
  //
  const sx2 = (xFrom + xTo) / 2.0;
  const sy2 = (yFrom + yTo) / 2.0;
  const cx = sx2 + (cosAngle * cx1 - sinAngle * cy1);
  const cy = sy2 + (sinAngle * cx1 + cosAngle * cy1);
  //
  // Step 4 : Compute the angleStart (angle1) and the angleExtent (dangle)
  //
  const ux = (x1 - cx1) / rx;
  const uy = (y1 - cy1) / ry;
  const vx = (-x1 - cx1) / rx;
  const vy = (-y1 - cy1) / ry;
  let p, n;
  // Compute the angle start
  n = Math.sqrt(ux * ux + uy * uy);
  p = ux; // (1 * ux) + (0 * uy)
  sign = uy < 0 ? -1 : 1;
  let angleFromDeg = radToDeg(sign * Math.acos(p / n));
  // Compute the angle extent
  n = Math.sqrt((ux * ux + uy * uy) * (vx * vx + vy * vy));
  p = ux * vx + uy * vy;
  sign = ux * vy - uy * vx < 0 ? -1 : 1;
  let angleExtentDeg = radToDeg(sign * Math.acos(p / n));
  if (!sweepFlag && angleExtentDeg > 0) {
    angleExtentDeg -= 360;
  }
  else if (sweepFlag && angleExtentDeg < 0) {
    angleExtentDeg += 360;
  }
  angleExtentDeg %= 360;
  angleFromDeg %= 360;
  return {
    cx,
    cy,
    rx,
    ry,
    angleFromRad: degToRad(angleFromDeg),
    angleToRad: degToRad(angleFromDeg + angleExtentDeg),
    rotationRad
  };
}

/**
 * This library allows to build SVG elements via json model and interface. Also can be used to separate data builing from the actual rendering.
 * This library can be used in the following ways.
 *
 * 1. LIVE
 * The surface is created on a DOM node. Every change in the shape elements is reflected in the DOM.
 *
 * @example
 * const surface = createGFXSurface(document.body, 100, 100);
 * surface.createRect({ w: 100, y: 100 }).setFill("red"); // will be rendered right away
 *
 *
 * 2. DEFERRED/DETACHED (hfx library)
 * The surface is created without a parent. Changes made to the shape elements are accumulated in _rawNode (DOM JSON).
 * Then you can call surface.render() method to create the DOM (_rawNode => rawNode). surface.rawNode will be created as a detached DOM node and
 * then can be added to the document.
 * From this time on, every change in the shape elements will be reflected in the DOM.
 * Can be used for off-screen rendering to optimize performance.
 *
 * @example
 * const surface = createGFXSurface(null, 100, 100);
 * surface.createRect({ w: 100, y: 100 }).setFill("red");
 * surface.render(); // creates a detached rawNode
 * document.body.appendChild(surface.rawNode);
 *
 *
 * 3. HTML STRING (hfx library)
 * The surface is created without a parent. Changes made to the shape elements are accumulated in _rawNode (DOM JSON).
 * Call surface._getHTMLString() to convert _rawNode => HTML String.
 * Can be used for off-screen or in-worker rendering to optimize performance.
 *
 * @example
 * const surface = createGFXSurface(null, 100, 100);
 * surface.createRect({ w: 100, y: 100 }).setFill("red");
 * document.body.innerHTML = surface._getHTMLString(); // this will not create surface.rawNode
 */
const dasharray = {
  shortdash: [4, 1],
  shortdot: [1, 1],
  shortdashdot: [4, 1, 1, 1],
  shortdashdotdot: [4, 1, 1, 1, 1, 1],
  dot: [1, 3],
  dash: [4, 3],
  longdash: [8, 3],
  dashdot: [4, 3, 1, 3],
  longdashdot: [8, 3, 1, 3],
  longdashdotdot: [8, 3, 1, 3, 1, 3]
};
const xmlns = {
  xlink: "http://www.w3.org/1999/xlink",
  svg: "http://www.w3.org/2000/svg"
};
const pathSvgRegExp = /([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;
let clipCount = 0;
const GFX_DEFAULTS = {
  defaultStroke: {
    type: "stroke",
    color: "black",
    style: "solid",
    width: 0,
    cap: "butt",
    join: 4
  },
  defaultPath: {
    type: "path",
    path: ""
  },
  defaultPolyline: {
    type: "polyline",
    points: []
  },
  defaultPolygon: {
    type: "polygon",
    points: []
  },
  defaultRect: {
    type: "rect",
    x: 0,
    y: 0,
    w: 100,
    h: 100,
    r: 0
  },
  defaultLine: {
    type: "line",
    x1: 0,
    y1: 0,
    x2: 100,
    y2: 100
  },
  defaultEllipse: {
    type: "ellipse",
    cx: 0,
    cy: 0,
    rx: 200,
    ry: 100
  },
  defaultCircle: {
    type: "circle",
    cx: 0,
    cy: 0,
    r: 100
  },
  defaultImage: {
    type: "image",
    x: 0,
    y: 0,
    w: 0,
    h: 0,
    src: ""
  },
  defaultText: {
    type: "text",
    x: 0,
    y: 0,
    text: "",
    align: "start",
    decoration: "none",
    rotated: false,
    kerning: true
  }
};
function _toAttrName(name) {
  return name === "w" ? "width" : name === "h" ? "height" : name;
}
function _createRawNodeSupport(source, isGroup = false) {
  const object = source;
  object._rawNode = null;
  // ATTRIBUTES
  object.getAttribute = (name) => object._rawNode.attrs[name];
  object.setAttribute = (name, value) => {
    object._rawNode.attrs[name] = value;
    // DOM
    object.rawNode && object.rawNode.setAttribute(name, value);
  };
  object._setAttributeNS = (ns, name, value) => {
    object._rawNode.attrs[name] = value;
    // DOM
    object.rawNode && object.rawNode.setAttributeNS(ns, name, value);
  };
  object.removeAttribute = (name) => {
    delete object._rawNode.attrs[name];
    // DOM
    object.rawNode && object.rawNode.removeAttribute(name);
  };
  // STYLE
  object.getStyle = () => object._rawNode.style;
  object.setStyle = (style) => {
    if (!object._rawNode.style) {
      object._rawNode.style = style;
    }
    else {
      object._rawNode.style = mixin(object._rawNode.style, style);
    }
    if (object.rawNode) {
      for (const id in style) {
        const value = style[id];
        object.rawNode.style[id] = value == null ? "" : value;
      }
    }
  };
  // SET RAW NODE
  object._setRawNode = (_namespace, nodeType, createDom) => {
    object._rawNode = {
      name: nodeType,
      attrs: {}
    };
    if (createDom) {
      object._assignRawNode(document.createElementNS(_namespace, nodeType));
    }
    // shape only
    if (isGroup || !object.shape) {
      return;
    }
    if (object.shape.type !== "image") {
      object.setAttribute("fill", "none");
    }
    object.setAttribute("fill-opacity", "0");
    object.setAttribute("stroke", "none");
    object.setAttribute("stroke-opacity", "0");
    object.setAttribute("stroke-width", "1");
    object.setAttribute("stroke-linecap", "butt");
    object.setAttribute("stroke-linejoin", "miter");
    object.setAttribute("stroke-miterlimit", "4");
  };
  object._assignRawNode = (node) => {
    if (!node) {
      console.error("Empty rawNode assignment. This might be a mistake.");
    }
    object.rawNode = node;
    // delegate event listeners
    if (object._rawNode.pendingEvents) {
      object._rawNode.pendingEvents.forEach((event) => {
        event.handle = on(object.rawNode, event.type, event.callback);
      });
      object._rawNode.pendingEvents = null;
    }
  };
  object._setText = (text) => {
    object._rawNode.text = text;
    // DOM
    if (object.rawNode) {
      const r = object.rawNode;
      if (r.firstChild) {
        r.firstChild.nodeValue = text;
      }
      else {
        r.appendChild(document.createTextNode(text));
      }
    }
  };
  object._appendRawNodeChild = (shape, noDom) => {
    // check against double referencing is made elsewhere
    object._rawNode.children = object._rawNode.children || [];
    object._rawNode.children.push(shape._rawNode);
    // DOM
    !noDom && object.rawNode && object.rawNode.appendChild(shape.rawNode);
  };
  object._removeRawNodeChild = (shape) => {
    // check for referencing is made elsewhere
    const index = object._rawNode.children.indexOf(shape._rawNode);
    index !== -1 && object._rawNode.children.splice(index, 1);
    // DOM
    if (object.rawNode && shape.rawNode && object.rawNode === shape.rawNode.parentNode) {
      object.rawNode.removeChild(shape.rawNode);
    }
  };
  object._emptryRawNode = () => {
    object._rawNode.children = null;
    // DOM
    const r = object.rawNode;
    while (r && r.lastChild) {
      r.removeChild(r.lastChild);
    }
  };
  object._createDefsNode = () => {
    object._rawNode.children = object._rawNode.children || [];
    object._rawNode.children.push({
      name: "defs"
    });
    // DOM
    object.rawNode && object.rawNode.appendChild(document.createElementNS(xmlns.svg, "defs"));
  };
  object._getHTMLString = (params) => {
    function _processNode(n) {
      if (params && params.removeHidden && n.style && n.style.display === "none") {
        return ""; // element is hidden
      }
      let result = "<" + n.name;
      if (n.name === "svg") {
        result += ' xmlns="' + xmlns.svg + '"';
        result += ' xmlns:xlink="' + xmlns.xlink + '"';
      }
      // ATTRIBUTES
      for (const id in n.attrs) {
        result += " " + id + '="' + n.attrs[id] + '"';
      }
      // STYLE
      if (!params || !params.noStyle) {
        let style;
        for (const id in n.style) {
          style = style || "";
          const value = n.style[id];
          if (value != null) {
            style += id + ":" + n.style[id] + ";";
          }
        }
        if (style) {
          result += ' style="' + style + '"';
        }
      }
      // CONTENT
      let content = n.text ? encodeXML(n.text) : "";
      if (!content && n.children) {
        n.children.forEach((c) => {
          content += _processNode(c);
        });
      }
      result += ">" + content + "</" + n.name + ">";
      return result;
    }
    return _processNode(object._rawNode);
  };
  object.on = (type, callback) => {
    if (object.rawNode) {
      return on(object.rawNode, type, callback);
    }
    // create an event wrapper to later delegate it to the rawNode when created
    object._rawNode.pendingEvents = object._rawNode.pendingEvents || [];
    const eventWrapper = {
      type,
      callback,
      handle: null
    };
    object._rawNode.pendingEvents.push(eventWrapper);
    return {
      remove: () => {
        if (eventWrapper.handle) {
          // remove from rawNode
          eventWrapper.handle.remove();
        }
        else if (object._rawNode.pendingEvents) {
          const index = object._rawNode.pendingEvents.indexOf(eventWrapper);
          index !== -1 && object._rawNode.pendingEvents.splice(index, 1);
        }
      }
    };
  };
  object._destroyRawNode = () => {
    object._rawNode = null;
    object.rawNode = null;
  };
}
function _createGFXShape(source, isGroup = false) {
  const shape = source || {};
  _createRawNodeSupport(shape, isGroup);
  shape.getFill = () => shape.fillStyle;
  shape.setFill = (fill) => {
    if (!fill) {
      shape.setAttribute("fill", "none");
      shape.setAttribute("fill-opacity", "0");
      shape.fillStyle = null;
    }
    else {
      const color = toColor(fill);
      shape.setAttribute("fill", color.toCss());
      shape.setAttribute("fill-opacity", color.a + "");
      shape.setAttribute("fill-rule", "evenodd");
      shape.fillStyle = color;
    }
    return shape;
  };
  shape.getStroke = () => shape.strokeStyle;
  shape.setStroke = (stroke) => {
    shape.strokeStyle = stroke;
    if (!stroke) {
      // don't stroke
      shape.strokeStyle = null;
      shape.setAttribute("stroke", "none");
      shape.setAttribute("stroke-opacity", "0");
      return shape;
    }
    const s = (shape.strokeStyle = mixin({}, GFX_DEFAULTS.defaultStroke, stroke));
    const color = (s.color = toColor(s.color));
    // generate attributes
    if (s) {
      const w = s.width < 0 ? 0 : s.width;
      shape.setAttribute("stroke", color.toCss());
      shape.setAttribute("stroke-opacity", color.a + "");
      shape.setAttribute("stroke-width", (w || 0) + "");
      shape.setAttribute("stroke-linecap", s.cap);
      if (typeof s.join === "number") {
        shape.setAttribute("stroke-linejoin", "miter");
        shape.setAttribute("stroke-miterlimit", s.join + "");
      }
      else {
        shape.setAttribute("stroke-linejoin", s.join);
      }
      const da = s.style.toLowerCase();
      if (da !== "solid") {
        if (da in dasharray) {
          const daValue = dasharray[da].slice();
          let i;
          for (i = 0; i < daValue.length; ++i) {
            daValue[i] *= w;
          }
          if (s.cap !== "butt") {
            for (i = 0; i < daValue.length; i += 2) {
              daValue[i] -= w;
              if (daValue[i] < 1) {
                daValue[i] = 1;
              }
            }
            for (i = 1; i < daValue.length; i += 2) {
              daValue[i] += w;
            }
          }
          shape.setAttribute("stroke-dasharray", daValue.join(","));
        }
        else {
          shape.setAttribute("stroke-dasharray", da);
        }
      }
    }
    return shape;
  };
  shape.applyTransform = (matrix) => {
    shape.setTransform(gfxMatrixBuilder.multiply([shape.matrix, matrix]));
    return shape;
  };
  shape.setTransform = (matrixOrArray) => {
    shape.matrix = Array.isArray(matrixOrArray)
      ? gfxMatrixBuilder.multiply(matrixOrArray)
      : new GFXMatrix2D(matrixOrArray);
    return _applyTransform();
  };
  function _applyTransform() {
    const matrix = shape.matrix;
    if (matrix) {
      const tm = shape.matrix;
      shape.setAttribute("transform", "matrix(" +
        tm.xx.toFixed(8) +
        "," +
        tm.yx.toFixed(8) +
        "," +
        tm.xy.toFixed(8) +
        "," +
        tm.yy.toFixed(8) +
        "," +
        tm.dx.toFixed(8) +
        "," +
        tm.dy.toFixed(8) +
        ")");
    }
    else {
      shape.removeAttribute("transform");
    }
    return shape;
  }
  shape._setShape = (newShape) => {
    shape.shape = mixin({}, shape.shape, newShape);
    for (const i in shape.shape) {
      if (i !== "type" && i !== "path") {
        let v = shape.shape[i];
        // validate values
        if (i === "w" || i === "h") {
          v = v < 0 ? 0 : v;
        }
        else if (v == null && (i === "x" || i === "y")) {
          v = 0;
        }
        shape.setAttribute(_toAttrName(i), v);
      }
    }
    return shape;
  };
  shape.setClip = (clip) => {
    shape.clip = clip;
    let clipNode;
    // search for the clipNode in the parent (limitation) and remove it
    let clipId = shape.getAttribute("clip-path");
    if (clipId) {
      clipId = clipId.substr(5).replace(")", "");
      shape.parent._rawNode.children &&
        shape.parent._rawNode.children.some((c) => {
          if (c.name === "clipPath" && c.attrs.id === clipId) {
            clipNode = c;
            return true; // stop the cycle
          }
          return false;
        });
      if (clipNode) {
        const index = shape.parent._rawNode.children.indexOf(clipNode);
        index !== -1 && shape.parent._rawNode.children.splice(index, 1);
        if (shape.rawNode && clipNode) {
          for (let i = 0, len = shape.rawNode.parentNode.children.length; i < len; i++) {
            const child = shape.rawNode.parentNode.children[i];
            if (child.getAttribute("id") === clipId) {
              shape.rawNode.parentNode.removeChild(child);
              break;
            }
          }
        }
      }
    }
    if (clip) {
      const clipType = "w" in clip ? "rect" : "ellipse";
      const clipId = "gfx_clip" + ++clipCount;
      shape.setAttribute("clip-path", "url(#" + clipId + ")");
      const clipShape = {
        name: clipType,
        attrs: {}
      };
      for (const id in clip) {
        clipShape.attrs[_toAttrName(id)] = clip[id];
      }
      clipNode = {
        name: "clipPath",
        attrs: {
          id: clipId
        },
        children: [clipShape]
      };
      shape.parent._rawNode.children.splice(shape.parent._rawNode.children.indexOf(shape._rawNode), 0, clipNode);
      // DOM
      if (shape.rawNode) {
        const clipNode = document.createElementNS(xmlns.svg, "clipPath");
        clipNode.setAttribute("id", clipId);
        const clipShape = document.createElementNS(xmlns.svg, clipType);
        for (const id in clip) {
          clipShape.setAttribute(_toAttrName(id), clip[id]);
        }
        clipNode.appendChild(clipShape);
        shape.rawNode.parentNode.insertBefore(clipNode, shape.rawNode);
      }
    }
    else {
      shape.removeAttribute("clip-path");
    }
    return shape;
  };
  shape._destroy = () => {
    shape._destroyRawNode();
  };
  return shape;
}
function _createGFXRect() {
  const rect = {};
  _createGFXShape(rect);
  rect.shape = mixin({}, GFX_DEFAULTS.defaultRect);
  const setShape_base = rect._setShape;
  rect._setShape = (newShape) => {
    setShape_base(newShape);
    if (rect.shape.r != null) {
      rect.setAttribute("ry", rect.shape.r + "");
      rect.setAttribute("rx", rect.shape.r + "");
    }
    return rect;
  };
  rect.getBoundingBox = () => rect.shape;
  return rect;
}
function _createGFXLine() {
  const line = {};
  _createGFXShape(line);
  line.shape = mixin({}, GFX_DEFAULTS.defaultLine);
  line.getBoundingBox = () => ({
    x: Math.min(line.shape.x1, line.shape.x2),
    y: Math.min(line.shape.y1, line.shape.y2),
    w: Math.abs(line.shape.x2 - line.shape.x1),
    h: Math.abs(line.shape.y2 - line.shape.y1)
  });
  return line;
}
function _createGFXCircle() {
  const circle = {};
  _createGFXShape(circle);
  circle.shape = mixin({}, GFX_DEFAULTS.defaultCircle);
  circle.getBoundingBox = () => ({
    x: circle.shape.cx - circle.shape.r,
    y: circle.shape.cy - circle.shape.r,
    w: 2 * circle.shape.r,
    h: 2 * circle.shape.r
  });
  return circle;
}
function _createGFXEllipse() {
  const ellipse = {};
  _createGFXShape(ellipse);
  ellipse.shape = mixin({}, GFX_DEFAULTS.defaultEllipse);
  ellipse.getBoundingBox = () => ({
    x: ellipse.shape.cx - ellipse.shape.rx,
    y: ellipse.shape.cy - ellipse.shape.ry,
    w: 2 * ellipse.shape.rx,
    h: 2 * ellipse.shape.ry
  });
  return ellipse;
}
function _createGFXPolyline() {
  return _createGFXPolylineOrPolygon(true);
}
function _createGFXPolygon() {
  return _createGFXPolylineOrPolygon(false);
}
function _createGFXPolylineOrPolygon(isPolyline) {
  const polyline = {};
  _createGFXShape(polyline);
  polyline.shape = mixin({}, isPolyline ? GFX_DEFAULTS.defaultPolyline : GFX_DEFAULTS.defaultPolygon);
  polyline._setShape = (newShape) => {
    polyline.shape = mixin({}, polyline.shape, newShape);
    const attr = [];
    polyline.shape.points.forEach((p) => {
      attr.push(p.x.toFixed(8), p.y.toFixed(8));
    });
    polyline.setAttribute("points", attr.join(" "));
    return polyline;
  };
  polyline.getBoundingBox = () => {
    if (!polyline.shape.points.length) {
      return null;
    }
    // summary:
    //		returns the bounding box
    const ps = polyline.shape.points;
    const l = ps.length;
    let t = ps[0];
    const bbox = { l: t.x, t: t.y, r: t.x, b: t.y };
    for (let i = 1; i < l; ++i) {
      t = ps[i];
      if (bbox.l > t.x) {
        bbox.l = t.x;
      }
      if (bbox.r < t.x) {
        bbox.r = t.x;
      }
      if (bbox.t > t.y) {
        bbox.t = t.y;
      }
      if (bbox.b < t.y) {
        bbox.b = t.y;
      }
    }
    return {
      x: bbox.l,
      y: bbox.t,
      w: bbox.r - bbox.l,
      h: bbox.b - bbox.t
    };
  };
  return polyline;
}
const validSegments = {
  m: 2,
  l: 2,
  h: 1,
  v: 1,
  c: 6,
  s: 4,
  q: 4,
  t: 2,
  a: 7,
  z: 0
};
function _createGFXPath() {
  const path = {};
  _createGFXShape(path);
  path.shape = mixin({}, GFX_DEFAULTS.defaultPath);
  path.segments = [];
  path.segmented = false;
  path.absolute = true;
  const setShape_base = path._setShape;
  path._setShape = (newShape) => {
    setShape_base(newShape);
    path.segmented = false;
    path.segments = [];
    _confirmSegmented();
    if (path.shape.path) {
      path.setAttribute("d", path.shape.path);
    }
    else {
      path.removeAttribute("d");
    }
    return path;
  };
  path.moveTo = (x, y) => {
    // summary:
    //		forms a move segment
    _confirmSegmented();
    _pushSegment(path.absolute ? "M" : "m", [x, y]);
    return path;
  };
  path.lineTo = (x, y) => {
    _confirmSegmented();
    _pushSegment(path.absolute ? "L" : "l", [x, y]);
    return path;
  };
  path.hLineTo = (x) => {
    _confirmSegmented();
    _pushSegment(path.absolute ? "H" : "h", [x]);
    return path;
  };
  path.vLineTo = (y) => {
    _confirmSegmented();
    _pushSegment(path.absolute ? "V" : "v", [y]);
    return path;
  };
  path.arcTo = (rx, ry, x_axis_rotation, large_arc_flag, sweep_flag, x, y) => {
    _confirmSegmented();
    _pushSegment(path.absolute ? "A" : "a", [
      rx,
      ry,
      x_axis_rotation,
      large_arc_flag ? 1 : 0,
      sweep_flag ? 1 : 0,
      x,
      y
    ]);
    return path;
  };
  path.curveTo = (x1, y1, x2, y2, x, y) => {
    _confirmSegmented();
    _pushSegment(path.absolute ? "C" : "c", [x1, y1, x2, y2, x, y]);
    return path;
  };
  path.smoothCurveTo = (x2, y2, x, y) => {
    _confirmSegmented();
    _pushSegment(path.absolute ? "S" : "s", [x2, y2, x, y]);
    return path;
  };
  path.qCurveTo = (x1, y1, x, y) => {
    _confirmSegmented();
    _pushSegment(path.absolute ? "Q" : "q", [x1, y1, x, y]);
    return path;
  };
  path.qSmoothCurveTo = (x, y) => {
    _confirmSegmented();
    _pushSegment(path.absolute ? "T" : "t", [x, y]);
    return path;
  };
  path.closePath = () => {
    _confirmSegmented();
    _pushSegment("Z", []);
    return path;
  };
  let pathArray;
  function _confirmSegmented() {
    if (!path.segmented) {
      const pathString = path.shape.path;
      // switch to non-updating version of path building
      pathArray = [];
      _setPath(pathString);
      // switch back to the string path
      path.shape.path = pathArray.join("");
      pathArray = null;
      // become segmented
      path.segmented = true;
    }
  }
  function _setPath(pathString) {
    const p = pathString.match(pathSvgRegExp);
    path.segments = [];
    path.absolute = true;
    if (!p) {
      return;
    }
    // create segments
    let action; // current action
    let args = []; // current arguments
    const l = p.length;
    for (let i = 0; i < l; i++) {
      let t = p[i];
      const x = parseFloat(t);
      if (x === 0 && t === "00") {
        // fix a special case: 00 are two separate zeros
        t = "0";
        p[i] = "0";
        i--;
      }
      if (isNaN(x)) {
        if (action) {
          _pushSegment(action, args);
        }
        args = [];
        action = t;
      }
      else {
        args.push(x);
      }
    }
    _pushSegment(action, args);
  }
  /**
   * Adds a segment.
   */
  function _pushSegment(action, args) {
    const group = validSegments[action.toLowerCase()];
    let segment;
    if (typeof group === "number") {
      if (group) {
        if (args.length >= group) {
          segment = { action, args: args.slice(0, args.length - (args.length % group)) };
          path.segments.push(segment);
          _updateWithSegment(segment);
        }
      }
      else {
        segment = { action, args: [] };
        path.segments.push(segment);
        _updateWithSegment(segment);
      }
    }
  }
  /**
   * Updates the bounding box of path with new segment.
   */
  function _updateWithSegment(segment) {
    // update internal variables: absolute, last
    switch (segment.action) {
      case "M":
      case "L":
      case "H":
      case "V":
      case "C":
      case "S":
      case "Q":
      case "T":
      case "A":
        path.absolute = true;
        break;
      case "m":
      case "l":
      case "h":
      case "v":
      case "c":
      case "s":
      case "q":
      case "t":
      case "a":
        path.absolute = false;
        break;
    }
    const n = segment.args;
    const l = n.length;
    _bboxCalculator && _bboxCalculator.updateBBox(segment);
    let i;
    // add an SVG path segment
    if (pathArray) {
      pathArray.push(segment.action);
      for (i = 0; i < l; ++i) {
        pathArray.push(_formatNumber(n[i], true));
      }
    }
    else {
      path.shape.path += segment.action;
      for (i = 0; i < l; ++i) {
        path.shape.path += _formatNumber(n[i], true);
      }
      path.setAttribute("d", path.shape.path);
    }
  }
  function _formatNumber(x, addSpace) {
    return x >= 0 && addSpace ? " " + x : x + "";
  }
  let _bboxCalculator;
  path.getBoundingBox = () => {
    _bboxCalculator = getBBoxCalculator();
    path.segmented = false;
    _confirmSegmented(); // let it recalculate the entire path with updating the bbox this time
    const sBbox = _bboxCalculator.getBBox();
    _bboxCalculator = null;
    return sBbox
      ? {
        x: sBbox.l,
        y: sBbox.t,
        w: sBbox.r - sBbox.l,
        h: sBbox.b - sBbox.t
      }
      : {
        x: NaN,
        y: NaN,
        w: NaN,
        h: NaN
      };
  };
  return path;
}
function _createGFXText() {
  const text = {};
  _createGFXShape(text);
  text.shape = mixin({}, GFX_DEFAULTS.defaultText);
  text._setShape = (newShape) => {
    text.shape = mixin({}, text.shape, newShape);
    const s = text.shape;
    text.setAttribute("x", s.x + "");
    text.setAttribute("y", s.y + "");
    text.setAttribute("text-anchor", s.align);
    text.setAttribute("text-decoration", s.decoration);
    text.setAttribute("rotate", s.rotated ? "90" : "0");
    text.setAttribute("kerning", s.kerning ? "auto" : "0");
    text.setAttribute("text-rendering", "auto");
    // update the text content
    text._setText(s.text);
    return text;
  };
  text.setFont = (newFont) => {
    text.font = newFont;
    text.setAttribute("font-style", newFont.fontStyle || "normal");
    //text.setAttribute("font-variant", f.variant);
    text.setAttribute("font-weight", newFont.fontWeight || "normal");
    text.setAttribute("font-size", (newFont.fontSize || 0) + "px");
    text.setAttribute("font-family", newFont.fontFamily || "Verdana");
    return text;
  };
  text.getBoundingBox = () => null; // not supported (need to measure the text using the browser)
  return text;
}
function _createGFXImage() {
  const image = {};
  _createGFXShape(image);
  image.shape = mixin({}, GFX_DEFAULTS.defaultImage);
  image._setShape = (newShape) => {
    image.shape = mixin({}, image.shape, newShape);
    for (const i in image.shape) {
      if (i !== "type" && i !== "src") {
        let v = image.shape[i];
        if (i === "w" || i === "h") {
          v = v < 0 ? 0 : v;
        }
        image.setAttribute(_toAttrName(i), v);
      }
    }
    image.setAttribute("preserveAspectRatio", "none");
    image._setAttributeNS(xmlns.xlink, "xlink:href", image.shape.src);
    return image;
  };
  image.getBoundingBox = () => image.shape /* all properties are ensured upon initialization, the default ones were mixed in */;
  return image;
}
function _createGFXContainer(source, isSurface = false) {
  const container = source || {};
  container.children = [];
  let _batch = 0;
  let _fragment;
  container.openBatch = () => {
    if (!_batch &&
      container.rawNode /* otherwise batching doesn't make sence, since we are working in the DOM JSON mode */) {
      _fragment = document.createDocumentFragment();
    }
    ++_batch;
    return container;
  };
  container.closeBatch = () => {
    _batch = _batch > 0 ? --_batch : 0;
    if (_fragment && !_batch) {
      // If _fragment was created, it means we have rawNode.
      // There is no need to update _rawNode, because it was done in the add() method.
      container.rawNode.appendChild(_fragment);
      _fragment = null;
    }
    return container;
  };
  container.add = (shape) => {
    if (shape.parent) {
      throw new Error("The shape is already added.");
    }
    if (_fragment) {
      // DOM
      // batch mode
      _fragment.appendChild(shape.rawNode);
      container._appendRawNodeChild(shape, true /* no dom */);
    }
    else {
      container._appendRawNodeChild(shape, false);
    }
    container.children.push(shape);
    shape.parent = container;
    // update clipnode with new parent
    shape.setClip(shape.clip);
    return container;
  };
  container.remove = (shape) => {
    if (shape.parent !== container) {
      throw new Error("Shape doesn't belong to this parent.");
    }
    // removing either a batched child or the one added before
    container._removeRawNodeChild(shape);
    // DOM
    // batch mode
    if (_fragment && _fragment === shape.rawNode.parentNode) {
      _fragment.removeChild(shape.rawNode);
    }
    const index = container.children.indexOf(shape);
    index !== -1 && container.children.splice(index, 1);
    shape.parent = null;
    return container;
  };
  container.clear = (destroy) => {
    container._emptryRawNode();
    // restore the defs node
    isSurface && container._createDefsNode();
    let shape;
    for (let i = 0; i < container.children.length; ++i) {
      shape = container.children[i];
      shape.parent = null;
      destroy && shape._destroy();
    }
    container.children = [];
    return container;
  };
  container.getBoundingBox = () => {
    if (!container.children || !container.children.length) {
      return null;
    }
    // if this is a composite shape, then sum up all the children
    let result = null;
    container.children.forEach((shape) => {
      let bb = shape.getBoundingBox();
      if (!bb) {
        return; // not supported or empty
      }
      const ct = shape.matrix;
      if (ct) {
        bb = gfxMatrixBuilder.multiplyRectangle(ct, bb);
      }
      if (result) {
        // merge two bbox
        result.x = Math.min(result.x, bb.x);
        result.y = Math.min(result.y, bb.y);
        result.endX = Math.max(result.endX, bb.x + bb.w);
        result.endY = Math.max(result.endY, bb.y + bb.h);
      }
      else {
        // first bbox
        result = {
          x: bb.x,
          y: bb.y,
          endX: bb.x + bb.w,
          endY: bb.y + bb.h,
          w: null,
          h: null
        };
      }
    });
    if (result) {
      result.w = result.endX - result.x;
      result.h = result.endY - result.y;
    }
    // clean up
    result.endX = undefined;
    result.endY = undefined;
    return result;
  };
  return container;
}
function _createGFXCreator(source, isSurface = false) {
  const creator = source || {};
  _createGFXContainer(creator, isSurface);
  creator.createGroup = () => _processObject(_createGFXGroup(), "g");
  creator.createRect = (options) => _processObject(_createGFXRect(), "rect", options);
  creator.createLine = (options) => _processObject(_createGFXLine(), "line", options);
  creator.createCircle = (options) => _processObject(_createGFXCircle(), "circle", options);
  creator.createEllipse = (options) => _processObject(_createGFXEllipse(), "ellipse", options);
  creator.createPath = (options) => _processObject(_createGFXPath(), "path", options);
  creator.createPolyline = (options) => _processObject(_createGFXPolyline(), "polyline", options);
  creator.createPolygon = (options) => _processObject(_createGFXPolygon(), "polygon", options);
  creator.createText = (options) => _processObject(_createGFXText(), "text", options);
  creator.createImage = (options) => _processObject(_createGFXImage(), "image", options);
  creator.createShape = (shape) => {
    switch (shape.type) {
      case GFX_DEFAULTS.defaultPath.type:
        return creator.createPath(shape);
      case GFX_DEFAULTS.defaultRect.type:
        return creator.createRect(shape);
      case GFX_DEFAULTS.defaultLine.type:
        return creator.createLine(shape);
      case GFX_DEFAULTS.defaultCircle.type:
        return creator.createCircle(shape);
      case GFX_DEFAULTS.defaultEllipse.type:
        return creator.createEllipse(shape);
      case GFX_DEFAULTS.defaultPolyline.type:
        return creator.createPolyline(shape);
      case GFX_DEFAULTS.defaultPolygon.type:
        return creator.createPolygon(shape);
      case GFX_DEFAULTS.defaultImage.type:
        return creator.createImage(shape);
      case GFX_DEFAULTS.defaultText.type:
        return creator.createText(shape);
    }
    return null;
  };
  function _processObject(shape, nodeType, rawShape) {
    if (!creator._rawNode && !creator.rawNode) {
      return null; // destroyed
    }
    shape._setRawNode(xmlns.svg, nodeType, !!creator.rawNode);
    shape._setShape(rawShape);
    creator.add(shape);
    return shape;
  }
  return creator;
}
function _createGFXSurface() {
  const surface = {};
  surface.isSurface = true;
  _createRawNodeSupport(surface);
  _createGFXCreator(surface, true);
  surface.setDimensions = (width, height) => {
    if (!surface._rawNode && !surface.rawNode) {
      return surface; // destroyed
    }
    let w = width < 0 ? 0 : width, h = height < 0 ? 0 : height;
    if (surface.roundDimensions) {
      w = Math.round(w * 2) / 2;
      h = Math.round(h * 2) / 2;
    }
    surface.setAttribute("width", w + "");
    surface.setAttribute("height", h + "");
    return surface;
  };
  surface.getDimensions = () => ({
    w: parseFloat(surface.getAttribute("width")),
    h: parseFloat(surface.getAttribute("height"))
  });
  surface.getContentBoundingBoxInViewPort = () => {
    const sd = surface.getDimensions();
    const viewBox = viewBoxFromString(surface.getAttribute("viewBox"), sd.w, sd.h);
    return getBoundingBoxInViewPort(sd, surface.getBoundingBox(), viewBox, surface.getAttribute("preserveAspectRatio"));
  };
  surface._render = () => {
    if (surface.rawNode) {
      return; // already rendered
    }
    const renderParent = surface._parent || document.createElement("div"); // if there is no parent yet, render off screen
    renderParent.innerHTML = surface._getHTMLString();
    surface._assignRawNode(renderParent.children[0]);
  };
  // override
  const _assignRawNodeBase = surface._assignRawNode;
  surface._assignRawNode = (node) => {
    _assignRawNodeBase(node);
    function _assignRawNodes(container) {
      let index = 0;
      container.children.forEach((c) => {
        let rawChild = container.rawNode.children[index];
        while (rawChild.nodeName === "defs" || rawChild.nodeName === "clipPath") {
          rawChild = container.rawNode.children[++index];
        }
        index++;
        c._assignRawNode(rawChild);
        c.children && _assignRawNodes(c);
      });
    }
    _assignRawNodes(surface);
  };
  surface.destroy = () => {
    surface._destroyRawNode();
    if (surface._parent) {
      surface._parent.innerHTML = "";
      surface._parent = null;
    }
  };
  return surface;
}
/**
 * @param parentNode If passed, the library will work on live DOM nodes, otherwise, deferred rendering can be used.
 */
function createGFXSurface(parentNode, width, height, roundDimensions) {
  const s = _createGFXSurface();
  s.roundDimensions = roundDimensions;
  s._setRawNode(xmlns.svg, "svg", !!parentNode);
  s.setAttribute("overflow", "hidden");
  s.setDimensions(width, height);
  s.setStyle({
    position: "absolute",
    left: 0,
    top: 0
  });
  s._createDefsNode();
  if (parentNode) {
    s._parent = parentNode;
    parentNode.appendChild(s.rawNode);
  }
  return s;
}
function _createGFXGroup() {
  const group = {};
  _createGFXShape(group, true);
  _createGFXCreator(group);
  group._destroy = () => {
    group.clear(true);
    group._destroyRawNode();
  };
  return group;
}

const DEFAULT_POSITION = ["after-centered", "before-centered"];
let Tooltip = class Tooltip extends TemplatedWidget {
  constructor(params, refNode, position) {
    super(params, refNode, position);
    this._templateString = `
  <div class='esri4GETooltip esri4GETooltipLeft'>
    <div class='esri4GETooltipContainer esri4GETooltipContents' data-attach-point='_containerNode'></div>
    <div class='esri4GETooltipConnector' data-attach-point='_connectorNode'></div>
  </div>`;
    /**
     * Show duraction. In milliseconds.
     */
    this.duration = 200;
  }
  postCreate() {
    place(this.domNode, document.body);
  }
  /**
   * Shows a tooltip with the specified content.
   * @param textOrNodeOrWidget     Tooltip content.
   * @param aroundNode            Dom node.
   * @param position              String[].
   */
  show(textOrNodeOrWidget, aroundNode, position) {
    this._stopAnimation();
    this._lastRenderFunc = () => this._render(textOrNodeOrWidget, aroundNode, position);
    this._lastRenderFunc();
    // show it
    if (typeof this.duration === "number") {
      this.domNode.style.opacity = "0";
      this._fadeInHandle = animateFadeIn({ node: this.domNode, duration: this.duration });
    }
  }
  _render(textOrNodeOrWidget, aroundNode, position) {
    if (typeof textOrNodeOrWidget === "string") {
      this._containerNode.innerHTML = textOrNodeOrWidget;
    }
    else {
      // our code
      this._containerNode.innerHTML = "";
      place(textOrNodeOrWidget.domNode || textOrNodeOrWidget, this._containerNode);
    }
    const pos = placeAround(this.domNode, aroundNode, position && position.length ? position : DEFAULT_POSITION, this._orient.bind(this));
    const aroundNodeCoords = pos.aroundNodePos;
    if (pos.corner.charAt(0) === "M" && pos.aroundCorner.charAt(0) === "M") {
      this._connectorNode.style.top =
        aroundNodeCoords.y + ((aroundNodeCoords.h - this._connectorNode.offsetHeight) >> 1) - pos.y + "px";
      this._connectorNode.style.left = "";
    }
    else if (pos.corner.charAt(1) === "M" && pos.aroundCorner.charAt(1) === "M") {
      this._connectorNode.style.left =
        aroundNodeCoords.x + ((aroundNodeCoords.w - this._connectorNode.offsetWidth) >> 1) - pos.x + "px";
    }
    else {
      this._connectorNode.style.left = "";
      this._connectorNode.style.top = "";
    }
    this._drawBackground();
  }
  updatePosition() {
    this._lastRenderFunc && this._lastRenderFunc();
  }
  _orient(node, aroundCorner, tooltipCorner, spaceAvailable, aroundNodeCoords) {
    this._connectorNode.style.top = ""; //reset to default
    const widthAvailable = spaceAvailable.w;
    const heightAvailable = spaceAvailable.h;
    node.className =
      "esri4GETooltip " +
        {
          "MR-ML": "esri4GETooltipRight",
          "ML-MR": "esri4GETooltipLeft",
          "TM-BM": "esri4GETooltipAbove",
          "BM-TM": "esri4GETooltipBelow",
          "BL-TL": "esri4GETooltipBelow esri4GETooltipABLeft",
          "TL-BL": "esri4GETooltipAbove esri4GETooltipABLeft",
          "BR-TR": "esri4GETooltipBelow esri4GETooltipABRight",
          "TR-BR": "esri4GETooltipAbove esri4GETooltipABRight",
          "BR-BL": "esri4GETooltipRight",
          "BL-BR": "esri4GETooltipLeft"
        }[(this._orientKey = aroundCorner + "-" + tooltipCorner)] +
        " " +
        this.class;
    this.domNode.style.width = "auto";
    const size = position(this.domNode);
    size.w = Math.ceil(size.w);
    const width = Math.min(Math.max(widthAvailable, 1), size.w);
    setMarginBox(this.domNode, { w: width });
    if (tooltipCorner.charAt(0) === "B" && aroundCorner.charAt(0) === "B") {
      const bb = position(node);
      const tooltipConnectorHeight = this._connectorNode.offsetHeight;
      if (bb.h > heightAvailable) {
        const aroundNodePlacement = heightAvailable - ((aroundNodeCoords.h + tooltipConnectorHeight) >> 1);
        this._connectorNode.style.top = aroundNodePlacement + "px";
        this._connectorNode.style.bottom = "";
      }
      else {
        this._connectorNode.style.bottom =
          Math.min(Math.max(aroundNodeCoords.h / 2 - tooltipConnectorHeight / 2, 0), bb.h - tooltipConnectorHeight) +
            "px";
        this._connectorNode.style.top = "";
      }
    }
    else {
      this._connectorNode.style.top = "";
      this._connectorNode.style.bottom = "";
    }
    this._drawBackground();
    return Math.max(0, size.w - widthAvailable);
  }
  _drawBackground() {
    if (!this._orientKey) {
      return;
    }
    const customStyle = typeof this.customStyle === "function" ? this.customStyle() : this.customStyle;
    const w = this.domNode.clientWidth;
    const h = this.domNode.clientHeight;
    const parentBox = position(this.domNode);
    const tipBox = position(this._connectorNode);
    const contentBox = position(this._containerNode);
    tipBox.x -= parentBox.x;
    tipBox.y -= parentBox.y;
    contentBox.x -= parentBox.x;
    contentBox.y -= parentBox.y;
    // give room for the border
    contentBox.x += 1;
    contentBox.y += 1;
    contentBox.w -= 2;
    contentBox.h -= 2;
    this._surface && this._surface.destroy();
    this._surfaceContainer && destroy(this._surfaceContainer);
    const surfaceContainer = (this._surfaceContainer = create("div", { class: "esriGEAbsoluteStretched" }, this.domNode, "first"));
    surfaceContainer.style.pointerEvents = "none";
    const s = (this._surface = createGFXSurface(surfaceContainer, w, h));
    const points = [
      { x: contentBox.x, y: contentBox.y },
      { x: contentBox.x + contentBox.w, y: contentBox.y },
      { x: contentBox.x + contentBox.w, y: contentBox.y + contentBox.h },
      { x: contentBox.x, y: contentBox.y + contentBox.h },
      { x: contentBox.x, y: contentBox.y }
    ];
    const tipCx = tipBox.x + tipBox.w / 2;
    const tipCy = tipBox.y + tipBox.h / 2;
    const tipSize = 5;
    let tipPoints;
    switch (this._orientKey) {
      case "BL-TL":
      case "BM-TM":
      case "BR-TR":
        // below
        tipPoints = [
          { x: tipCx - tipSize, y: contentBox.y },
          { x: tipCx, y: tipCy },
          { x: tipCx + tipSize, y: contentBox.y }
        ];
        points.splice.apply(points, [1, 0].concat(tipPoints));
        break;
      case "ML-MR":
      case "BL-BR":
        // left
        tipPoints = [
          { x: contentBox.x + contentBox.w, y: tipCy - tipSize },
          { x: tipCx, y: tipCy },
          { x: contentBox.x + contentBox.w, y: tipCy + tipSize }
        ];
        points.splice.apply(points, [2, 0].concat(tipPoints));
        break;
      case "TM-BM":
      case "TL-BL":
      case "TR-BR":
        // above
        tipPoints = [
          { x: tipCx + tipSize, y: contentBox.y + contentBox.h },
          { x: tipCx, y: tipCy },
          { x: tipCx - tipSize, y: contentBox.y + contentBox.h }
        ];
        points.splice.apply(points, [3, 0].concat(tipPoints));
        break;
      case "MR-ML":
      case "BR-BL":
        // right
        tipPoints = [
          { x: contentBox.x, y: tipCy + tipSize },
          { x: tipCx, y: tipCy },
          { x: contentBox.x, y: tipCy - tipSize }
        ];
        points.splice.apply(points, [4, 0].concat(tipPoints));
        break;
    }
    const p = s.createPolyline({ points });
    const fillColor = (customStyle && customStyle.backgroundColor) || "white";
    const borderColor = (customStyle && customStyle.borderColor) || "#d3d3d3";
    p.setFill(fillColor).setStroke({
      color: borderColor,
      width: 1,
      join: "round"
    });
    if (customStyle && customStyle.color) {
      this._containerNode.style.color = customStyle.color;
    }
  }
  /**
   * Hides the shown tooltip.
   */
  hide() {
    this._stopAnimation();
    if (typeof this.duration === "number") {
      this._fadeOutHandle = animateFadeOut({ node: this.domNode, duration: this.duration });
    }
  }
  _stopAnimation() {
    this._fadeInHandle && this._fadeInHandle.stop();
    this._fadeInHandle = null;
    this._fadeOutHandle && this._fadeOutHandle.stop();
    this._fadeOutHandle = null;
  }
};
__decorate([
  y$r()
], Tooltip.prototype, "duration", void 0);
__decorate([
  y$r()
], Tooltip.prototype, "customStyle", void 0);
Tooltip = __decorate([
  i$X()
], Tooltip);

// geoenrichment.utils
//--------------------------------------------------------------------------
//
// Tooltip widget
//
//--------------------------------------------------------------------------
const activeTooltipNodes = [];
const TooltipBuilder = {
  show(params) {
    const textOrNodeOrWidget = params.textOrNodeOrWidget;
    const aroundNode = params.aroundNode;
    let position = params.position;
    const classes = params.classes;
    const style = params.style;
    // do not destroy, only hide shown tooltips to de-clutter the view
    // tooltips will be destroyed elsewhere in the utility class
    activeTooltipNodes.forEach((nd) => nd._shownTooltip && (nd._shownTooltip.domNode.style.display = "none"));
    activeTooltipNodes.length = 0;
    if (typeof position === "string") {
      position = [position];
    }
    const map = { after: "after-centered", before: "before-centered" };
    position = position && position.map((val) => map[val] || val);
    const tooltip = new Tooltip({
      class: Array.isArray(classes) ? classes.join(" ") : classes,
      customStyle: style,
      duration: params.duration
    });
    tooltip.show(textOrNodeOrWidget, aroundNode, position);
    aroundNode._shownTooltip = tooltip;
    if (!params.keepWhenOtherShown) {
      activeTooltipNodes.push(aroundNode);
    }
    return tooltip;
  },
  hide(aroundNode) {
    if (!aroundNode) {
      return;
    }
    aroundNode._shownTooltip && aroundNode._shownTooltip.destroy();
    aroundNode._shownTooltip = undefined;
    const index = activeTooltipNodes.indexOf(aroundNode);
    index !== -1 && activeTooltipNodes.splice(index, 1);
  }
};
/**
 * Sets a tooltip to node, that will be shown on mouse over.
 * @param node                                      Dome node. Required.
 * @param textOrFunc                                String|Function() => String or Widget.
 * @param params                                    Object. See util.showTooltipForNode() method for details.
 *
 * Other parameters:
 * @param params.showTooltip                        Boolean. If true, the tooltip will be shown right away.
 *
 * @returns a signal with remove(), suspend(), resume() and refresh() methods.
 */
function setTooltipToNode(node, textOrFunc, params) {
  const nd = node;
  params = params || {};
  if (!nd) {
    return null;
  }
  // clean up
  hideTooltipForNode(nd);
  nd.__setTooltipToNodeMouseEnterHandle && nd.__setTooltipToNodeMouseEnterHandle.remove();
  if (!textOrFunc) {
    return null;
  }
  let isSuspended = false;
  function showTooltipFunction() {
    !isSuspended && !isTooltipShown(nd) && showTooltipForNode(nd, textOrFunc, params);
  }
  if (isMobileDevice()) {
    nd.__setTooltipToNodeMouseEnterHandle = addNoDragClickHandler(nd, showTooltipFunction);
  }
  else {
    nd.__setTooltipToNodeMouseEnterHandle = on(nd, "over" /* former mouse.enter */, showTooltipFunction);
  }
  if (params.showTooltip) {
    showTooltipFunction();
  }
  return {
    remove() {
      textOrFunc = null;
      hideTooltipForNode(nd);
    },
    suspend() {
      hideTooltipForNode(nd);
      isSuspended = true;
    },
    resume() {
      isSuspended = false;
    },
    refresh() {
      nd._shownTooltip && showTooltipFunction();
    }
  };
}
//--------------------------------------------------------------------------
//
// Show tooltip
//
//--------------------------------------------------------------------------
/**
 * Shows a tooltip for a node.
 * @param node                                      Dome node. Required.
 * @param textNodeFunc                                String|Function() => String or Widget.
 * @param params.stayOnHover                        Boolean.
 * @param params.hideOnClick                        Boolean.
 * @param params.classes                            Array|String.
 * @param params.position                           Array|String. Default ["after", "before"].
 * @param params.ignoreNodeRemoval                  Boolean. If true, the tooltip will not be hidden even after the node is removed from the layout.
 * @param params.ignoreMousePosition                Boolean. If true, the mouse doesn't have to be over the tooltip or its node all the time.
 * @param params.textAlign                          String: start | center | end. Default "center".
 * @param params.style                              Object | Function() => Object.
 * @param params.notRestricted                      Boolean. If true, a special CSS class "notRestricted" will be applied.
 *                                                  Use it to specify that the tooltip should be wider than normal.
 *
 * @returns a new tooltip instance or null.
 */
function showTooltipForNode(node, textNodeFunc, params) {
  const nd = node;
  params = params || {};
  params.stayOnHover = params.stayOnHover == null ? "hyperlink" : params.stayOnHover;
  let stayOnHover = params.stayOnHover;
  if (!nd) {
    return null;
  }
  hideTooltipForNode(nd);
  let textOrNode = typeof textNodeFunc === "function" ? textNodeFunc() : textNodeFunc;
  if (!textOrNode) {
    return null;
  }
  if (params.textAlign && typeof textOrNode === "string") {
    textOrNode =
      "<div class='" +
        (params.textAlign === "start"
          ? "esriGEStart esriGEFlexStart"
          : params.textAlign === "end"
            ? "esriGEEnd esriGEFlexEnd"
            : "") +
        "'>" +
        textOrNode +
        "</div>";
  }
  // detect if should stay based on the presence of a hyperlink in the text
  if (params.stayOnHover === "hyperlink") {
    let text;
    if (typeof textOrNode === "string") {
      text = textOrNode;
    }
    else if (textOrNode instanceof HTMLElement) {
      text = textOrNode.outerHTML;
    }
    else if (textOrNode.domNode instanceof HTMLElement) {
      text = textOrNode.domNode.outerHTML;
    }
    stayOnHover = text && /href=|esriGELink|esri4GELink/.test(text);
  }
  addClass(nd, "esri4GESimpleTextTooltip");
  function _isMouseOver(node, event) {
    return isMouseOver(node, { checkAllChildren: true, event });
  }
  // SHOW
  let shownTooltip;
  function _showTooltip() {
    hideTooltipForNode(nd);
    // Define default params
    let classes = Array.isArray(params.classes) ? params.classes.join(" ") : params.classes;
    classes = classes || "";
    if (!stayOnHover) {
      // if doesn't have to stay on hover, shouldn't get in the way of the mouse cursor
      classes += " esriGENonInteractable";
    }
    if (params.notRestricted) {
      classes += " notRestricted";
    }
    shownTooltip = TooltipBuilder.show({
      textOrNodeOrWidget: textOrNode,
      aroundNode: nd,
      position: ["after", "before"],
      classes,
      style: params.style,
      duration: params.duration,
      keepWhenOtherShown: params.keepWhenOtherShown
    });
  }
  _showTooltip();
  // HIDE
  // Detect when need to hide
  // case 1: mouse left
  if (!params.ignoreMousePosition) {
    if (!isMobileDevice()) {
      nd.__setTooltipToNodeMouseLeaveHandle = once(nd, "mouseout" /* former mouse.leave */, () => {
        // not sure why mouseout can trigger for a node even though the mouse can be hovering it
        !stayOnHover && !_isMouseOver(nd) && hideTooltipForNode(nd);
      });
    }
    else {
      nd.__setTooltipToNodeMouseLeaveHandle = on(document.body, "press", (event) => {
        if (_isMouseOver(nd, event)) {
          return;
        }
        hideTooltipForNode(nd);
      });
    }
  }
  // case 2: node was removed from the layout
  if (!params.ignoreNodeRemoval) {
    nd.__setTooltipToNodeInLayoutHandle = setInterval(() => {
      // fallback in case "mouseout" didn't trigger
      !isNodeInLayout(nd) && hideTooltipForNode(nd);
    }, 50);
  }
  if (!isMobileDevice()) {
    // case 3: mouse is not over the node
    nd.__setTooltipToNodeMouseOverHandle = setInterval(() => {
      // fallback in case "mouseout" didn't trigger
      !params.ignoreMousePosition &&
        (!stayOnHover || !_isMouseOver(shownTooltip.domNode)) &&
        !_isMouseOver(nd) &&
        hideTooltipForNode(nd);
    }, 300);
    // Click action
    nd.__setTooltipToNodeClickHandle = on(nd, "click", () => {
      params.hideOnClick ? hideTooltipForNode(nd) : !nd._shownTooltip && _showTooltip();
    });
    // Listen to master
    if (stayOnHover) {
      nd.__setTooltipToNodeMouseLeaveMasterHandle = on(shownTooltip.domNode, "out" /* former mouse.leave */, () => {
        // not sure why mouseout can trigger for a node even though the mouse can be hovering it
        !_isMouseOver(shownTooltip.domNode) && hideTooltipForNode(nd);
      });
    }
  }
  // auto-correct position
  if (params.autoAdjustPosition) {
    let pos = position(nd);
    nd.__setTooltipToNodeAdjustHandle = setInterval(() => {
      const newPos = position(nd);
      if (pos.x !== newPos.x || pos.y !== newPos.y) {
        pos = newPos;
        nd._shownTooltip && nd._shownTooltip.updatePosition();
      }
    }, 30);
  }
  return nd._shownTooltip;
}
function isTooltipShown(node) {
  const nd = node;
  return !!(nd && nd._shownTooltip);
}
//--------------------------------------------------------------------------
//
// Hide tooltip
//
//--------------------------------------------------------------------------
/**
 * Hides shown tooltip on the given node.
 */
function hideTooltipForNode(node) {
  const nd = node;
  if (!nd) {
    return;
  }
  // remove the native tooltip
  nd.removeAttribute("title");
  removeClass(nd, "esri4GESimpleTextTooltip");
  TooltipBuilder.hide(nd);
  nd.__setTooltipToNodeMouseLeaveHandle && nd.__setTooltipToNodeMouseLeaveHandle.remove();
  clearInterval(nd.__setTooltipToNodeInLayoutHandle);
  clearInterval(nd.__setTooltipToNodeMouseOverHandle);
  nd.__setTooltipToNodeClickHandle && nd.__setTooltipToNodeClickHandle.remove();
  nd.__setTooltipToNodeMouseLeaveMasterHandle && nd.__setTooltipToNodeMouseLeaveMasterHandle.remove();
  nd.__setTooltipToNodeAdjustHandle && clearInterval(nd.__setTooltipToNodeAdjustHandle);
}
//--------------------------------------------------------------------------
//
// Auto-tooltip
//
//--------------------------------------------------------------------------
let autoTooltipNode;
let shownAutoTooltipInfo;
/**
 * Specific to `esriGETrimWithEllipses` CSS class.
 */
function autoTooltip(root) {
  return on(root, "over", (event) => {
    const _this = event.target;
    if (_this === autoTooltipNode || !containsClass(_this, "esriGETrimWithEllipses")) {
      return;
    }
    function _cleanUp() {
      if (shownAutoTooltipInfo) {
        TooltipBuilder.hide(autoTooltipNode);
        shownAutoTooltipInfo.mouseOutH.remove();
        shownAutoTooltipInfo.mouseMoveH.remove();
        shownAutoTooltipInfo = null;
      }
      autoTooltipNode = null;
    }
    if (_this.offsetWidth < _this.scrollWidth) {
      _cleanUp();
      autoTooltipNode = _this;
      TooltipBuilder.show({
        textOrNodeOrWidget: autoTooltipNode.textContent,
        aroundNode: autoTooltipNode,
        position: ["above", "below"]
      });
      shownAutoTooltipInfo = {
        mouseOutH: once(autoTooltipNode, ["mouseout", "mousedown", "touchstart"], _cleanUp),
        mouseMoveH: on(document.body, "mousemove", () => {
          if (!isMouseOver(autoTooltipNode)) {
            _cleanUp();
          }
        })
      };
    }
  });
}

// geoenrichment.utils
class FlowListDefaultItemRenderer {
  constructor(params) {
    // additional classes
    this.itemClass = "";
    this.itemClassSelected = "";
    this.labelClass = "";
    this.createLabelNode = false; // Boolean. If true, a separate dom node for the label will be created.
    this.createImageAfterLabel = false; // Boolean. If true, label will be created first.
    this.makeLabelFillSpace = false;
    mixin(this, params);
  }
  // creates a visual presentation and adds it to the listNode
  // Note: if you don't add it to the listNode it won't be in the list
  // The following item properties are supported:
  // IMAGE
  // item.imageUrl                String.
  // item.imageClass              String.
  // LABEL
  // item[list.labelProperty]
  // item.labelClass              String.
  // OTHER
  // item.tooltip                 String.
  // item.isSeparator             Boolean.
  // item.isLink                  Boolean.
  // item.enabled                 Boolean. Also supported by FlowList.js.
  // item.itemClass               String.
  // item.style                   String.
  createPresentation(item, isSelected, listNode, list, _itemWrapper /*Shallow copy of the item. In case you want to add some custom properties to the item*/) {
    if (item.isSeparator) {
      const sepRoot = create("div", { class: "flowList_listSeparator" }, listNode);
      if (item.hidden) {
        hide(sepRoot);
      }
      return sepRoot;
    }
    const root = create("div", { class: "listItem " + (this.itemClass || " ") + (item.itemClass || ""), style: item.style }, listNode);
    if (item.isLink) {
      addClass(root, "esri4GELink");
    }
    if (item.enabled === false) {
      addClass(root, "disabled");
    }
    this._createParts(item, root, list);
    this._setTooltip(item, root, list);
    this.selectPresentation(root, isSelected, item);
    if (item.hidden) {
      hide(root);
    }
    // Example:
    // this is how you can add a destroy function to a wrapper. It will be called on the next clear/refresh.
    // itemWrapper.destroyPresentation = function(){};
    return root;
  }
  _setTooltip(item, root, _list) {
    if (item.tooltip) {
      setTooltipToNode(root, item.tooltip);
    }
  }
  _createParts(item, root, list) {
    let labelCreated;
    if (this.createImageAfterLabel) {
      this._createLabel(item, root, list);
      labelCreated = true;
    }
    this._createImage(item, root, list);
    !labelCreated && this._createLabel(item, root, list);
  }
  _createImage(item, root, list) {
    const imageNode = this._createImageNode(item, root, list);
    if (!imageNode) {
      return;
    }
    if (item.imageClass) {
      addClass(imageNode, item.imageClass);
    }
    if (item.imageUrl) {
      imageNode.style.backgroundImage = "url(" + item.imageUrl + ");";
    }
  }
  _createImageNode(_item, root, _list) {
    return root;
  }
  /**
   * @returns New label node or root.
   */
  _createLabel(item, root, list) {
    if (this.createLabelNode) {
      const labelNode = create("div", { textContent: item[list.labelProperty], class: "esriGETrimWithEllipses listItemLabel" }, root);
      if (item.labelClass) {
        addClass(labelNode, item.labelClass);
      }
      if (this.labelClass) {
        addClass(labelNode, this.labelClass);
      }
      list.autoDetectUrlsInLabels && this._tryConvertToUrls(labelNode);
      if (this.makeLabelFillSpace) {
        labelNode.style.flexGrow = "1";
      }
      return labelNode;
    }
    if (item[list.labelProperty]) {
      root.textContent = item[list.labelProperty];
      list.autoDetectUrlsInLabels && this._tryConvertToUrls(root);
    }
    return null;
  }
  _tryConvertToUrls(labelNode) {
    const m = labelNode.innerHTML.match(IS_URL_RE);
    const url = m && m[0];
    if (url) {
      labelNode.innerHTML = labelNode.innerHTML.replace(url, "<a href='" + toHttpsUrl(url) + "' target='_blank'>" + url + "</a>");
    }
  }
  selectPresentation(root, value, _item) {
    toggleClass(root, "listItemSelected " + this.itemClassSelected, value);
  }
}

/**
 * Flexible list to render items.
 * - You can use an array of items or store as data.
 * - If store is used, the list can work in the on-demand mode. This allows to view up to 1,000,000 items.
 *
 * @example
 * 1. Create from items.
 *
 * new FlowList({
 *  idProperty: "id", // default is "value"
 *  items: [{ id: "0", label: "First item"}, ...]
 * }).placeAt(node);
 *
 * 2. Create from a store.
 *
 * new FlowList({
 *  store: new Memory({ idProperty: "id", data: [{ id: "0", label: "First item"}, ...] })
 * }).placeAt(node);
 *
 * 3. Using a custom item renderer.
 *
 * class MyItemRenderer extends FlowListDefaultItemRenderer {
 *  // overide
 *  createPresentation(item: FlowListItem, isSelected: boolean, listNode: HTMLElement): HTMLElement {
 *    const root = super.createPresentation(item, isSelected, listNode);
 *
 *    // custom changes
 *    root.style.fontSize = "16px";
 *
 *    return root;
 *  }
 *
 *  // override
 *  selectPresentation(root: HTMLElement, isSelected: boolean): void {
 *    root.style.color = isSelected ? "red" : "blue";
 *  }
 * }
 *
 * new FlowList({
 *  items: [{ value: "0", label: "First item"}, ...],
 *  itemRenderer: new MyItemRenderer()
 * }).placeAt(node);
 */
let FlowList = class FlowList extends TemplatedWidget {
  //--------------------------------------------------------------------------
  //
  // Initialization
  //
  //--------------------------------------------------------------------------
  constructor(params, refNode, position) {
    super(params, refNode, position);
    this._templateString = "<div class='esri4GEFlowList esriGENonSelectable'></div>";
    this.idProperty = "value";
    this.labelProperty = "label";
    /**
     * Optional.
     */
    this.itemRenderer = null;
    /**
     * Will be passed to the item renderer.
     */
    this.itemClass = null;
    /**
     * Will be passed to the item renderer.
     */
    this.itemClassSelected = null;
    // FLAGS
    /**
     * If true, will keep the scroll position when refreshed.
     */
    this.keepScrollPosition = false;
    /**
     * If true, clicking an already selected item will trigger onChange() event.
     */
    this.allowRepetitiveSelection = true;
    /**
     * If true items will be selected on mouse down, not on click.
     */
    this.selectOnMouseDown = false;
    /**
     * If specified, no drag click handler will be used.
     */
    this.noDragTolerance = 0;
    /**
     * Validates a selected item (use it to prevent selection of disabled items).
     */
    this.selectionValidator = null;
    /**
     * If false, a user won't be able to select items with the mouse, default true.
     */
    this.allowManualSelection = true;
    /**
     * If true, propagation of a click event will be stopped.
     */
    this.stopMouseEventPropagation = true;
    /**
     * If false, items can't be marked as selected in the list.
     */
    this.hasSelectableItems = true;
    /**
     * If true, URL-like text will be converted to clickable hyperlinks in labels.
     */
    this.autoDetectUrlsInLabels = false;
    /**
     * If true, items will be rendered in the inner div and not in the domNode.
     */
    this.storeItemsInInnerDiv = false;
    /**
     * Dom node. Read-only. The container of the list items.
     * Can be used to add additional nodes to the list above or below the items.
     */
    this.itemsDiv = null;
    // ON-DEMAND options
    /**
     * Number of items per load iteration.
     */
    this.onDemandModeLoadStep = 1000;
    /**
     * Number of items to be loaded when the list is opened.
     */
    this.onDemandPopulateLimit = 1000;
    /**
     * In milliseconds.
     */
    this.onDemandPopulatePeriod = 200;
    // internal properties
    this._addedWrappers = [];
    this._clickHandles = null;
    this._valueOnCreation = null;
    this._isCreated = false;
    //--------------------------------------------------------------------------
    //
    // Prearing items and wrappers
    //
    //--------------------------------------------------------------------------
    this._selectedPresentation = null;
    //--------------------------------------------------------------------------
    //
    // Scroll
    //
    //--------------------------------------------------------------------------
    this._scrollTopMemo = 0;
  }
  postCreate() {
    if (this.storeItemsInInnerDiv) {
      this._set("itemsDiv", create("div", { class: "esri4GEFlowList_innerDiv" }, this.domNode));
    }
    else {
      this._set("itemsDiv", this.domNode);
    }
    this._clearHandlers();
    this._setUpItemRenderer();
    autoTooltip(this.domNode);
    this._isCreated = true;
    this.refresh();
    if (this._valueOnCreation) {
      this.value = this._valueOnCreation;
    }
  }
  _setUpItemRenderer() {
    if (!this.itemRenderer) {
      this.itemRenderer = new FlowListDefaultItemRenderer();
    }
    if (this.itemClass) {
      this.itemRenderer.itemClass = this.itemClass;
    }
    if (this.itemClassSelected) {
      this.itemRenderer.itemClassSelected = this.itemClassSelected;
    }
  }
  //--------------------------------------------------------------------------
  //
  // Getting & setting value
  //
  //--------------------------------------------------------------------------
  /**
   * Current selected item value.
   */
  get value() {
    return this.selectedItem && this.selectedItem[this.idProperty];
  }
  set value(value) {
    if (!this._isCreated) {
      this._valueOnCreation = value;
      return;
    }
    this._set("value", value);
    const source = this.items || (this.store && this.store.data);
    source &&
      source.some((item) => {
        if (item[this.idProperty] === value) {
          this.selectedItem = item;
          return true; // stop the cycle
        }
        return false;
      });
  }
  //--------------------------------------------------------------------------
  //
  // Setting items
  //
  //--------------------------------------------------------------------------
  /**
   * List items. A list can be fed with either an array of items or store.
   */
  set items(items) {
    this._setItems(items);
  }
  /**
   * Sets items to the list.
   */
  _setItems(items) {
    if (this.keepScrollPosition) {
      this.memoScroll();
    }
    this.clear();
    this._set("items", items);
    if (!this.items || !this._isCreated) {
      this._checkIfStillSelected();
      return;
    }
    this._addItems(items);
    this._checkIfStillSelected();
    if (this.keepScrollPosition) {
      this.applyScrollFromMemo();
    }
  }
  _checkIfStillSelected() {
    if (this.selectedIndex === -1 && !this.selectedItem) {
      return;
    }
    if (!this._addedWrappers || !this._addedWrappers.some((wrapper, index) => this._isItemSelected(wrapper, index))) {
      this._set("selectedIndex", -1);
      this._set("selectedItem", null);
    }
  }
  // DATA
  /**
   * Items store. A list can be fed with either an array of items or store.
   * The first onDemandPopulateLimit items will be loaded each onDemandPopulatePeriod interval.
   * The rest items will be loaded as a user scrolls down the list.
   * NOTE: if you want the list to be in the on-demand mode, use a store, not items.
   */
  set store(store) {
    this._setStore(store);
  }
  _setStore(store) {
    if (this.keepScrollPosition) {
      this.memoScroll();
    }
    this.clear();
    this._set("store", store);
    this.idProperty = store && store.idProperty;
    if (!this.store || !this._isCreated) {
      this._checkIfStillSelected();
      return;
    }
    // add initial amount of items
    this._loadNextPart();
    this._checkIfStillSelected();
    if (this.keepScrollPosition) {
      this.applyScrollFromMemo();
    }
    this._domNodeScrollH && this._domNodeScrollH.remove();
    this._domNodeScrollH = on(this.domNode, "scroll", () => {
      // try to get the one of the last elements in the list
      const wrapper = this._addedWrappers[this._addedWrappers.length - 30];
      const presentation = wrapper ? wrapper.itemPresentation : null;
      if (presentation && presentation.offsetTop < this.domNode.scrollTop) {
        this._loadNextPart();
      }
    });
  }
  _loadNextPart() {
    if (!this.store || this.store.data.length === this._addedWrappers.length) {
      return;
    }
    const items = this.store.query(null, {
      start: this._addedWrappers.length,
      count: this.onDemandModeLoadStep
    });
    this._addItems(items);
    if (items.length && this._addedWrappers.length < this.onDemandPopulateLimit) {
      setTimeout(() => this._loadNextPart(), this.onDemandPopulatePeriod);
    }
  }
  //--------------------------------------------------------------------------
  //
  // Selecting items by item or index
  //
  //--------------------------------------------------------------------------
  set selectedItem(item) {
    this._setSelectedPresentation(this.queryItem({ item }).node);
  }
  set selectedIndex(index) {
    this._setSelectedPresentation(this.queryItem({ index }).node);
  }
  //--------------------------------------------------------------------------
  //
  // Refresh
  //
  //--------------------------------------------------------------------------
  refresh() {
    if (this.store) {
      this._setStore(this.store);
    }
    else {
      this._setItems(this.items);
    }
  }
  _addItems(items) {
    this._addedWrappers = this._addedWrappers || [];
    // prepare wrappers so we can add private properties
    // just copy the items
    items.forEach((item) => {
      const wrapper = mixin({}, item);
      wrapper.itemRef = item;
      this._addWrapper(wrapper);
    });
  }
  _addWrapper(wrapper) {
    const i = this._addedWrappers.length;
    const itemPresentation = this.itemRenderer.createPresentation(wrapper.itemRef, this._isItemSelected(wrapper, i), this.itemsDiv, this, wrapper);
    if (!itemPresentation) {
      return;
    }
    itemPresentation.index = i;
    itemPresentation.item = wrapper.itemRef;
    wrapper.itemPresentation = itemPresentation;
    if (this._isItemSelected(wrapper, i)) {
      this._setSelectedPresentation(itemPresentation);
    }
    this._addClickHandler(itemPresentation);
    // provide internal id
    this._addedWrappers.push(wrapper);
    const wrapperIndex = this._addedWrappers.length - 1;
    addClass(itemPresentation, "listItem_" + wrapperIndex);
    addClass(itemPresentation, "listItem_" + (wrapperIndex % 2 === 0 ? "even" : "odd"));
  }
  _isItemSelected(wrapper, index) {
    if (!this.hasSelectableItems || !this._isItemClickable(wrapper)) {
      return false;
    }
    if (index === this.selectedIndex) {
      return true;
    }
    if (wrapper.itemRef === this.selectedItem) {
      return true;
    }
    if (wrapper.itemRef && this.selectedItem) {
      const value1 = wrapper.itemRef[this.idProperty];
      const value2 = this.selectedItem[this.idProperty];
      return value1 !== undefined && value1 === value2;
    }
    return false;
  }
  //--------------------------------------------------------------------------
  //
  // Working selection
  //
  //--------------------------------------------------------------------------
  _isItemClickable(item) {
    return this.selectionValidator ? this.selectionValidator(item) : this._selectionValidatorDefault(item);
  }
  _selectionValidatorDefault(item) {
    return !!item && !item.isSeparator && item.enabled !== false;
  }
  _addClickHandler(presentation) {
    if (!this.allowManualSelection) {
      return;
    }
    const processSelection = () => {
      if (!this.allowRepetitiveSelection && this._selectedPresentation === presentation) {
        return;
      }
      this._setSelectedPresentation(presentation) && this._dispatchChangeEvent();
    };
    let handle;
    if (this.selectOnMouseDown || !this.noDragTolerance) {
      handle = on(presentation, this.selectOnMouseDown ? "press" : "click", (event) => {
        this.stopMouseEventPropagation && event.stopPropagation();
        processSelection();
      });
    }
    else {
      handle = addNoDragClickHandler(presentation, processSelection, {
        tolerance: this.noDragTolerance
      });
    }
    this._clickHandles.push(handle);
  }
  /**
   * @returns true, if the selection was successful
   */
  _setSelectedPresentation(presentation) {
    this._set("selectedIndex", -1);
    this._set("selectedItem", null);
    // validate selection
    if (!this.hasSelectableItems || !(presentation && this._isItemClickable(presentation.item))) {
      return false;
    }
    if (this._selectedPresentation) {
      this.itemRenderer.selectPresentation &&
        this.itemRenderer.selectPresentation(this._selectedPresentation, false, this._selectedPresentation.item);
    }
    if (presentation) {
      this.itemRenderer.selectPresentation &&
        this.itemRenderer.selectPresentation(presentation, this.hasSelectableItems, presentation.item);
      this._selectedPresentation = presentation;
      this._set("selectedIndex", presentation.index);
      this._set("selectedItem", presentation.item);
    }
    return true;
  }
  _dispatchChangeEvent() {
    this._onChange({
      type: "change",
      selectedIndex: this.selectedIndex,
      selectedItem: this.selectedItem,
      value: this.value
    });
  }
  //--------------------------------------------------------------------------
  //
  // Clearing the list
  //
  //--------------------------------------------------------------------------
  clear() {
    this._selectedPresentation = null;
    this._addedWrappers = this._addedWrappers || [];
    // this can be used to destroy widgets created in the item renderer
    this._addedWrappers &&
      this._addedWrappers.forEach((wrapper) => {
        wrapper.destroyPresentation && wrapper.destroyPresentation();
      });
    this._addedWrappers.length = 0;
    this.itemsDiv && empty(this.itemsDiv);
    this._clearHandlers();
  }
  _clearHandlers() {
    this._clickHandles = this._clickHandles || [];
    this._clickHandles.forEach((h) => {
      h.remove();
    });
    this._clickHandles.length = 0;
  }
  memoScroll() {
    this._scrollTopMemo = this.domNode ? this.domNode.scrollTop : 0;
  }
  applyScrollFromMemo() {
    this.domNode.scrollTop = this._scrollTopMemo || 0;
  }
  //--------------------------------------------------------------------------
  //
  // Navigation
  //
  //--------------------------------------------------------------------------
  scrollToItem(item) {
    const node = this.queryItem({ item }).node;
    if (node) {
      this.domNode.scrollTop = node.offsetTop;
    }
  }
  //--------------------------------------------------------------------------
  //
  // Some query methods
  //
  //--------------------------------------------------------------------------
  /**
   * Queries the list for items or nodes.
   * @param query.item    Item to query by.
   * @param query.node    Node to query by.
   * @param query.value   Item value to query by.
   * @param query.index   Item index to query by.
   *
   * @returns Object { item: List item, node: Dom node, index: Item index }. Null is never returned.
   */
  queryItem(query) {
    const result = {
      item: null,
      node: null,
      index: -1
    };
    this._addedWrappers &&
      this._addedWrappers.some((w, index) => {
        if ((query.item && w.itemRef === query.item) ||
          (query.node && w.itemPresentation === query.node) ||
          (query.value !== undefined && w.itemRef[this.idProperty] === query.value) ||
          (query.index !== undefined && index === query.index)) {
          result.item = w.itemRef;
          result.node = w.itemPresentation;
          result.index = index;
          return true; // stop the cycle
        }
        return false;
      });
    return result;
  }
  //--------------------------------------------------------------------------
  //
  // Mouse over
  //
  //--------------------------------------------------------------------------
  isMouseOver(event) {
    return isMouseOver(this.domNode, { event });
  }
  //--------------------------------------------------------------------------
  //
  // Events
  //
  //--------------------------------------------------------------------------
  _onChange(event) {
    this.onChange(event);
  }
  // triggered when a selected item is changed
  onChange(_event) { }
  //--------------------------------------------------------------------------
  //
  // Destroy
  //
  //--------------------------------------------------------------------------
  destroy() {
    this.clear();
  }
};
__decorate([
  y$r()
], FlowList.prototype, "idProperty", void 0);
__decorate([
  y$r({
    constructOnly: true
  })
], FlowList.prototype, "labelProperty", void 0);
__decorate([
  y$r()
], FlowList.prototype, "itemRenderer", void 0);
__decorate([
  y$r({
    constructOnly: true
  })
], FlowList.prototype, "itemClass", void 0);
__decorate([
  y$r({
    constructOnly: true
  })
], FlowList.prototype, "itemClassSelected", void 0);
__decorate([
  y$r()
], FlowList.prototype, "keepScrollPosition", void 0);
__decorate([
  y$r()
], FlowList.prototype, "allowRepetitiveSelection", void 0);
__decorate([
  y$r()
], FlowList.prototype, "selectOnMouseDown", void 0);
__decorate([
  y$r()
], FlowList.prototype, "noDragTolerance", void 0);
__decorate([
  y$r()
], FlowList.prototype, "selectionValidator", void 0);
__decorate([
  y$r()
], FlowList.prototype, "allowManualSelection", void 0);
__decorate([
  y$r()
], FlowList.prototype, "stopMouseEventPropagation", void 0);
__decorate([
  y$r()
], FlowList.prototype, "hasSelectableItems", void 0);
__decorate([
  y$r()
], FlowList.prototype, "autoDetectUrlsInLabels", void 0);
__decorate([
  y$r()
], FlowList.prototype, "storeItemsInInnerDiv", void 0);
__decorate([
  y$r({
    readOnly: true
  })
], FlowList.prototype, "itemsDiv", void 0);
__decorate([
  y$r()
], FlowList.prototype, "onDemandModeLoadStep", void 0);
__decorate([
  y$r()
], FlowList.prototype, "onDemandPopulateLimit", void 0);
__decorate([
  y$r()
], FlowList.prototype, "onDemandPopulatePeriod", void 0);
__decorate([
  y$r({
    dependsOn: ["selectedItem"]
  })
], FlowList.prototype, "value", null);
__decorate([
  y$r()
], FlowList.prototype, "items", null);
__decorate([
  y$r()
], FlowList.prototype, "store", null);
__decorate([
  y$r()
], FlowList.prototype, "selectedItem", null);
__decorate([
  y$r({
    value: -1
  })
], FlowList.prototype, "selectedIndex", null);
__decorate([
  y$r()
], FlowList.prototype, "onChange", null);
FlowList = __decorate([
  i$X()
], FlowList);

/**
 * Extends FlowList.
 */
let ButtonBar = class ButtonBar extends FlowList {
  constructor() {
    super(...arguments);
    this.allowRepetitiveSelection = false;
    this.stopMouseEventPropagation = false;
  }
  postCreate() {
    addClass(this.domNode, "esri4GEButtonBar");
    super.postCreate();
  }
};
ButtonBar = __decorate([
  i$X()
], ButtonBar);

let VariableToggle = class VariableToggle extends ButtonBar {
  constructor(params, refNode, position) {
    super(params, refNode, position);
    this.stopMouseEventPropagation = true;
  }
  postCreate() {
    this.items = this.states.ids.map((id, i) => ({
      value: id,
      label: this.states.labels[i]
    }));
    super.postCreate();
    addClass(this.domNode, "esri4GEVariableToggle");
  }
  getStateName(value) {
    return (this.states.names && this.states.names[this.queryItem({ value: value || this.value }).index]) || null;
  }
};
__decorate([
  y$r()
], VariableToggle.prototype, "states", void 0);
VariableToggle = __decorate([
  i$X()
], VariableToggle);

/**
 * Creates groups by the given variables.
 * @param variables   VariableStore.
 * @param ids         Array of variable IDs.
 * @param exactMatch  True value means that the hash will contain as keys only values from ids array.
 * Otherwise, every variable from the requested group will be hashed in the output hash.
 * The exact match mode allows multiple selection of variables in a group.
 *
 * @returns A collection of toggle groups:
 * The 'groups' property is an array of groups of related variables. See getToggleGroup.
 * The 'hash' object associates IDs of variables in groups with their groups.
 */
function getToggleGroups(variables, ids, exactMatch = false) {
  const hash = {};
  const groups = [];
  ids.forEach((id) => {
    groups.push(getToggleGroup(variables, id, hash, exactMatch));
  });
  return { groups, hash };
}
/**
 * Creates a group by the given variable.
 * @param variables  Variable store.
 * @param id         Variable identity (fullName).
 * @param hash       An optional object to collect references to the group by IDs of its variables.
 * @param exactMatch True value means collecting groups in the hash for the exactly matching variable IDs as key.
 *
 * @returns A toggle group:
 * The 'value' property is an ID of a variable selected in this group.
 * The optional 'states' property is a collection of states returned by variables.getStates(id) method.
 */
function getToggleGroup(variables, id, hash, exactMatch = false) {
  hash = hash || {};
  const states = variables.getStates && variables.getStates(id);
  const group = { value: id, states };
  hash[id] = group;
  if (states) {
    let idFound = false;
    states.ids.forEach((stateId) => {
      if (id === stateId) {
        idFound = true;
      }
      else if (!exactMatch) {
        hash[stateId] = group;
      }
    });
    // Ensure that the id is in the states. If not, we change it to the first state id.
    if (!idFound) {
      id = group.value = states.ids[0];
      hash[id] = group;
    }
  }
  return group;
}
/**
 * We used to get units in the upper case from the server. Now they come in the lower case.
 * Need to preserve the previous behavior.
 */
function toVariableUnits(units) {
  return typeof units === "string" ? units.toUpperCase() : null;
}

const nls$4 = (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.a)("DataBrowser").ShoppingCart;
let ShoppingCart = class ShoppingCart extends TemplatedWidget {
  //--------------------------------------------------------------------------
  //
  // Initialization
  //
  //--------------------------------------------------------------------------
  constructor(params, refNode, position) {
    super(params, refNode, position);
    this._templateString = `
  <div class="esri4GEShoppingCart">
    <table data-attach-point="_countLabel" class="ShoppingCart_Label">
      <tr>
        <td class="ShoppingCart_CounterTD">
          <div class="ShoppingCart_CounterDivLeftBorder"></div>
          <div data-attach-point="_divCounter" class="ShoppingCart_CounterDiv"></div>
          <div class="ShoppingCart_CounterDivRightBorder"></div>
        </td>
        <td class="ShoppingCart_LabelTd">
          <div data-attach-point="_selectedVariablesLabel"></div>
        </td>
        <td>
          <div class="ShoppingCartOpener" data-attach-point="_divShoppingCartOpener"></div>
        </td>
      </tr>
    </table>

    <div data-attach-point="_divOuter" class="ShoppingCart_OuterDiv">
      <div data-attach-point="_divList" class="ShoppingCart_DivList">
      </div>
      <div data-attach-point="_divEmpty" class="esriGEAbsoluteStretched ShoppingCart_DivEmpty">
        <div>${nls$4.noVariables}</div>
      </div>
    </div>
  </div>`;
    /**
     *  Allows variable toggles in shopping cart.
     */
    this.allowToggles = true;
    /**
     * Allows moving variables up and down in the list.
     */
    this.allowMoveButtons = false;
    /**
     * Allows editing individual variables (will work for custom variables).
     */
    this.allowEditButtons = false;
    /**
     * Allows replacing individual variables.
     */
    this.allowReplaceButtons = false;
  }
  postCreate() {
    on(this._countLabel, "click", this._toggleList.bind(this));
    this._buildVariableLabel();
    this._set("selection", []);
    this._content = [];
    this._list = new FlowList({
      hasSelectableItems: false,
      keepScrollPosition: true,
      itemRenderer: new FlowListDefaultItemRenderer({
        createPresentation: this._renderVariable.bind(this)
      })
    }).placeAt(this._divList);
    this._updateLabel();
    this._divOuter.style.display = "none";
    this.watch("selection", () => {
      (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.w)(this.variables.synchronize()).then(this._onSelectionChanged.bind(this));
    });
  }
  _buildVariableLabel() {
    // Find the best position for splitting a long "selected variables" label into two lines.
    let varLabel = nls$4.selectedVars;
    const words = varLabel.split(/\s+/);
    const numBreaks = words.length - 1;
    if (numBreaks < 2) {
      varLabel = words.join("<br/>");
    }
    else {
      // The number of nonspace symbols
      const wordsLen = varLabel.length - numBreaks;
      let sum = words[0].length;
      let index = 0;
      for (let i = 1; i < numBreaks; i++) {
        const nextSum = sum + words[i].length;
        if (Math.abs(sum * 2 - wordsLen) > Math.abs(nextSum * 2 - wordsLen)) {
          index = i;
        }
        sum = nextSum;
      }
      varLabel = words.slice(0, index + 1).join("&nbsp;") + "<br/>" + words.slice(index + 1).join("&nbsp;");
    }
    this._selectedVariablesLabel.innerHTML = varLabel;
  }
  //--------------------------------------------------------------------------
  //
  // Render list item
  //
  //--------------------------------------------------------------------------
  _renderVariable(data, _isSelected, listNode) {
    const div = create("div", { class: "ShoppingCartRow" }, listNode);
    function addSpacer() {
      create("div", { class: "ShoppingCartRowSpacer", innerHTML: "&nbsp;" }, div);
    }
    // LABEL
    const id = data.group.states && this.allowToggles ? data.group.states.ids[0] : data.group.value;
    const variable = this.variables.get(id);
    const label = create("div", { class: "esriGETrimWithEllipses ShoppingCartRowLabel", textContent: this._getLabel(variable) || "" }, div);
    // Check for a special case when a variable is missing from the store.
    if (variable && variable.isMissing) {
      addClass(label, "ShoppingCartRowLabel_missing");
    }
    // MOVE
    if (this.allowMoveButtons) {
      addSpacer();
      const moveButtonsRoot = create("div", { class: "upDownArrowsBlock" }, div);
      if (this._content.indexOf(data) > 0) {
        const upButton = create("div", { class: "upArrow" }, moveButtonsRoot);
        on(upButton, "click", () => {
          this._onMove(data, true);
        });
      }
      if (this._content.indexOf(data) < this._content.length - 1) {
        const downButton = create("div", { class: "downArrow" }, moveButtonsRoot);
        on(downButton, "click", () => {
          this._onMove(data, false);
        });
      }
    }
    // REPLACE
    if (this.allowReplaceButtons) {
      addSpacer();
      const replaceButton = create("div", { class: "ShoppingCartRowReplaceButton" }, div);
      setTooltipToNode(replaceButton, nls$4.replaceVariable);
      on(replaceButton, "click", () => {
        this._onReplaceData(data);
      });
    }
    // EDIT
    if (this.allowEditButtons && this._canEditData(data)) {
      addSpacer();
      const editButton = create("div", { class: "ShoppingCartRowEditButton" }, div);
      setTooltipToNode(editButton, nls$4.editVariable);
      on(editButton, "click", () => {
        this._onEditData(data);
      });
    }
    // TOGGLE
    // All items inside floating element should be inline elements to render them in a line.
    if (data.group.states && this.allowToggles) {
      addSpacer();
      const toggle = new VariableToggle({
        states: data.group.states,
        value: data.group.value,
        onChange: () => {
          this._onToggleChange(toggle, data);
        }
      }).placeAt(div);
    }
    // CLOSE
    addSpacer();
    const closer = create("div", { class: "esri4GECloseCrossButton" }, div);
    setTooltipToNode(closer, nls$4.removeVariable);
    on(closer, "click", () => {
      this._onRemove(data);
    });
    return div;
  }
  //--------------------------------------------------------------------------
  //
  // Handle selecton change
  //
  //--------------------------------------------------------------------------
  _onSelectionChanged() {
    // The selection can change in the following cases: add/remove/update.
    // In the case of adding, new items are added to the end.
    // In the case of removing, any items could be removed from any place.
    // In the case of updating, an item state can be changed.
    // We optimize this method for adding and updating only.
    const newContent = [];
    // Collect unchanged items.
    let len = Math.min(this._content.length, this.selection.length);
    for (let i = 0; i < len; i++) {
      const id = this.selection[i];
      const data = this._content[i];
      if (!data.hash[id]) {
        break;
      }
      data.group.value = id; // Synchronize selected ID for the update case
      newContent.push(data);
    }
    // Add other items.
    len = this.selection.length;
    for (let i = newContent.length; i < len; i++) {
      let id = this.selection[i];
      const data = {
        hash: {},
        group: null
      };
      data.group = getToggleGroup(this.variables, id, data.hash);
      // Title is an alias of the first variable in the group in the case of allowToggles.
      // Otherwise, it is an alias of the current variable.
      id = data.group.states && this.allowToggles ? data.group.states.ids[0] : data.group.value;
      const variable = this.variables.get(id);
      data.label = this._getLabel(variable);
      newContent.push(data);
    }
    this._content = newContent;
    this._updateLabel();
    if (!this._content.length) {
      this._hideList();
    }
  }
  //--------------------------------------------------------------------------
  //
  // Variable label
  //
  //--------------------------------------------------------------------------
  _getLabel(variable) {
    if (!variable) {
      return "";
    }
    if (typeof this.variables.getLabel === "function") {
      return this.variables.getLabel(variable);
    }
    return variable.alias || "";
  }
  //--------------------------------------------------------------------------
  //
  // Handle additional actions
  //
  //--------------------------------------------------------------------------
  _onRemove(data) {
    const newSelection = this.selection.slice();
    const dataIndex = this._content.indexOf(data);
    newSelection.splice(dataIndex, 1);
    this._content.splice(dataIndex, 1);
    this.selection = newSelection;
    this._refresh();
  }
  _onToggleChange(toggle, data) {
    data.group.value = toggle.value;
    const newSelection = this.selection.slice();
    newSelection[this._content.indexOf(data)] = toggle.value;
    this.selection = newSelection;
  }
  _onMove(data, isUp) {
    const newSelection = this.selection.slice();
    const dataIndex = this._content.indexOf(data);
    const selection = newSelection[dataIndex];
    // remove
    newSelection.splice(dataIndex, 1);
    this._content.splice(dataIndex, 1);
    // add
    newSelection.splice(isUp ? dataIndex - 1 : dataIndex + 1, 0, selection);
    this._content.splice(isUp ? dataIndex - 1 : dataIndex + 1, 0, data);
    this.selection = newSelection;
    this._refresh();
  }
  _canEditData(_data) {
    return false;
  }
  _onEditData(_data) {
    // not implemented
  }
  _onReplaceData(_data) {
    // not implemented
  }
  //--------------------------------------------------------------------------
  //
  // Refresh & update
  //
  //--------------------------------------------------------------------------
  _refresh() {
    this._list.items = this._content;
    this._updateLabel();
    this._divEmpty.style.visibility = !this._content.length ? "visible" : "hidden";
  }
  _updateLabel() {
    this._divCounter.textContent = this._content.length.toString();
  }
  //--------------------------------------------------------------------------
  //
  // Toggle list
  //
  //--------------------------------------------------------------------------
  isOpen() {
    return this._divOuter.style.display !== "none";
  }
  hideList() {
    this._hideList();
  }
  _toggleList() {
    if (this._divOuter.style.display === "none") {
      this._displayList();
    }
    else {
      this._hideList();
    }
  }
  _displayList() {
    this._refresh();
    this._divOuter.style.display = "";
    this._listenToMouseLeave();
  }
  _listenToMouseLeave() {
    this._mouseOutH && this._mouseOutH.remove();
    this._mouseOutH = addOutHandler({ node: this.domNode, onMouseOut: this._onMouseLeave.bind(this) });
  }
  _onMouseLeave() {
    this._mouseOutH && this._mouseOutH.remove();
    this._hideList();
  }
  _hideList() {
    this._divOuter.style.display = "none";
  }
  //--------------------------------------------------------------------------
  //
  // Events
  //
  //--------------------------------------------------------------------------
  onSelectionChanged(_event) { }
};
__decorate([
  y$r()
], ShoppingCart.prototype, "variables", void 0);
__decorate([
  y$r()
], ShoppingCart.prototype, "selection", void 0);
__decorate([
  y$r()
], ShoppingCart.prototype, "allowToggles", void 0);
__decorate([
  y$r()
], ShoppingCart.prototype, "allowMoveButtons", void 0);
__decorate([
  y$r()
], ShoppingCart.prototype, "allowEditButtons", void 0);
__decorate([
  y$r()
], ShoppingCart.prototype, "allowReplaceButtons", void 0);
__decorate([
  y$r()
], ShoppingCart.prototype, "onSelectionChanged", null);
ShoppingCart = __decorate([
  i$X()
], ShoppingCart);

// geoenrichment.utils
const UTIL_KEY = "__waitingDiv";
/**
 * Safe method to start waiting on a node.
 */
function showProgress(node, params) {
  if (!node || node[UTIL_KEY]) {
    return;
  }
  // relative or absolute position is required
  const pos = getStyle(node, "position");
  if (pos !== "absolute" && pos !== "relative") {
    node.style.position = "relative";
  }
  const position = params && params.position;
  const waitingNode = (node[UTIL_KEY] = create("div", {
    class: "esri4GEProgress " +
      (position === "bottom-right" ? "esri4GEProgressBottomRight" : "esriGEAbsoluteStretched ") +
      ((params && params.progressClass) || "")
  }, node));
  if (params && params.indicatorSize) {
    waitingNode.style.backgroundSize = params.indicatorSize + "px";
  }
  if (params && params.backgroundColor) {
    waitingNode.style.backgroundColor = params.backgroundColor;
  }
}
/**
 * Removes the current waiting from a node.
 */
function removeProgress(node) {
  if (!node || !node[UTIL_KEY]) {
    return;
  }
  destroy(node[UTIL_KEY]);
  delete node[UTIL_KEY];
}
/**
 * @param params.progressClass          String.
 * @param params.onShowProgress         Function(). Called once the waiting is started for the node, even after showProgressPromise() is called multiple times.
 * @param params.onRemoveProgress       Function(). Called once the waiting is finially finished for the node, even after showProgressPromise() is called multiple times.
 *
 * returns the passed Promise.
 */
function showProgressPromise(node, promise, params = {}) {
  const nd = node;
  if (!nd) {
    return promise;
  }
  nd.__progressIndex = nd.__progressIndex || 0;
  if (nd.__progressIndex === 0) {
    nd.__progressDfd = (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.c)();
    showProgress(nd, {
      progressClass: params.progressClass,
      position: params.position,
      indicatorSize: params.indicatorSize,
      backgroundColor: params.backgroundColor
    });
    params.onShowProgress && params.onShowProgress();
  }
  nd.__progressIndex++;
  promise.finally(() => {
    nd.__progressIndex = Math.max(0, --nd.__progressIndex);
    if (nd.__progressIndex === 0) {
      nd.__progressDfd && nd.__progressDfd.resolve();
      delete nd.__progressDfd;
      removeProgress(nd);
      params.onRemoveProgress && params.onRemoveProgress();
    }
  });
  return promise;
}

let Wizard = class Wizard extends TemplatedWidget {
  constructor(params, refNode, position) {
    super(params, refNode, position);
    //
    /**
     * Stacking strategy of the wizard:
     *
     * - "stretch" - bottom panel will always be botton-aligned and center panel will be
     * stretched to fit the space in between. This is the default.
     *
     * - "stack" - center panel will be sized to content and bottom panel will be stacked right
     * below the center panel. Scroll will be shown in the center panel if contents are too
     * tall.
     */
    this.stacking = "stretch";
    this._pages = {};
    this._anim = new AnimationHelper();
  }
  postCreate() {
    addClass(this.domNode, "esri4GEWizard_Root");
  }
  loadPage(pageId) {
    const page = this._pages[pageId];
    const oldPage = this.currentPage;
    if (page === oldPage) {
      return;
    }
    this._anim.finish();
    if (oldPage) {
      this._animPage("Anim_FadeOut").then(() => {
        oldPage.pageIsActive = false;
        this.domNode.removeChild(oldPage.domNode);
      });
    }
    this._set("currentPage", page);
    this._set("currentPageId", pageId);
    place(this.currentPage.domNode, this.domNode, "first");
    if (oldPage) {
      this._animPage("Anim_FadeIn");
    }
    page.stacking = this.stacking;
    page.pageIsActive = true;
    page.resize();
  }
  _animPage(fadeClass) {
    return this._anim.start([
      {
        node: this.currentPage.domNode,
        classes: [fadeClass, "esri4GEWizard_FadeAnim"]
      }
    ]);
  }
  resize() {
    this.currentPage && this.currentPage.resize();
  }
  //--------------------------------------------------------------------------
  //
  // Progress
  //
  //--------------------------------------------------------------------------
  /**
   * Shows progress in the progressDiv of the page. Wraps the result in a promise.
   */
  _showProgress(promise) {
    return (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.w)(showProgressPromise(this.domNode, promise));
  }
  //--------------------------------------------------------------------------
  //
  // Destroy
  //
  //--------------------------------------------------------------------------
  destroy() {
    for (const id in this._pages) {
      this._pages[id].destroy();
    }
    this._pages = {};
  }
};
__decorate([
  y$r({
    readOnly: true
  })
], Wizard.prototype, "currentPage", void 0);
__decorate([
  y$r({
    readOnly: true
  })
], Wizard.prototype, "currentPageId", void 0);
__decorate([
  y$r()
], Wizard.prototype, "stacking", void 0);
Wizard = __decorate([
  i$X()
], Wizard);

/**
 * Widget to browse and select variables available in Geoenrichment.
 */
function sync(obj1, obj2, prop) {
  let isBusy = false;
  obj1.watch(prop, () => {
    if (isBusy) {
      return;
    }
    isBusy = true;
    obj2.set(prop, obj1.get(prop));
    isBusy = false;
  });
  obj2.watch(prop, () => {
    if (isBusy) {
      return;
    }
    isBusy = true;
    obj1.set(prop, obj2.get(prop));
    isBusy = false;
  });
}
let DataBrowserBase = class DataBrowserBase extends Wizard {
  //--------------------------------------------------------------------------
  //
  // Getters & setters
  //
  //--------------------------------------------------------------------------
  /**
   * Title to show in the top left hand corner. Defaults to "Data Browser".
   */
  set title(value) {
    this._set("title", value);
  }
  /**
   * Selected variables array. Each item is a full name of variable like "KeyGlobalFacts.TOTPOP".
   */
  set selection(value) {
    this._setSelection(value);
  }
  /**
   * Two-char country code selected in the country drop down.
   * Defaults to null which will show "Global" variables available for all countries.
   */
  set countryID(value) {
    this._setCountryID(value);
  }
  /**
   * ID of hierarchy selected for the given country.
   * It is available if allowHierarchies property value is true.
   */
  set hierarchyID(value) {
    this._setCountryID(this._getQueryCountryID(this.countryID, value));
  }
  //--------------------------------------------------------------------------
  //
  // Initialization
  //
  //--------------------------------------------------------------------------
  constructor(params, refNode, position) {
    super(params, refNode, position);
    /**
     * True value allows hierarchies selection in the country drop down.
     * It also allows to set a hierarchyID property value for data browser.
     */
    this.allowHierarchies = false;
    /**
     * Show/hide the country drop down. Defaults to true.
     * Object value specifies an instance of widget to be used for showing the country drop down.
     * It should follow the contact of ICountrySelect.
     */
    this.countryBox = true;
    /**
     * The maximum number of variables to select.
     * - -1 means unlimitted number of variables to select.
     * - 0 means no selection. In this case, selection check boxes and shopping cart are missing.
     * - 1 means a single selection mode. In this case, selection check boxes and shopping cart are missing
     * and the initial selection is ignored.
     * Greater value allows multiple selection with shopping cart.
     */
    this.selectionLimit = -1;
    /**
     * For the Global "country" allows users to override the hideInDataBrowser variable property, and show all variables.
     * - Defaults to false
     */
    this.displayAllGlobalVariables = false;
    /**
     * Customizes variable info tooltip behavior.
     *
     * - false value means showing variables without info icon
     *
     * - true value means showing a standard info tooltip with the default collection of
     * variable properties
     *
     * - String value provides a comma-separated list of additional info fields to be shown
     *
     * - String[] value provides a list of additional info fields to be shown
     *
     * - Object value specifies an instance of widget to be used for showing a variable info tooltip.
     * It should follow the contact of VariableInfo module.
     *
     * The following additional fields can be shown within the standard info tooltip:
     * - fullName        Unique variable name composed as "dataCollectionID.variableID".
     * This field is shown by default
     * - percentBase     ID of the base variable used for percentage calculation;
     * - averageBase     ID of the base variable used for average value calculation;
     * - indexBase       Index base value;
     * - filteringTags   Variable filtering tags.
     *
     * Special cases:
     * - "*"             All additional fields will be shown
     * - ""              No additional fields will be shown
     */
    this.variableInfo = true;
    /**
     * Controls the appearance of shopping cart in Data Browser in the multiple selection mode:
     * - false   Disable a shopping cart
     * - true    Enable the standard shopping cart (default)
     * - Widget  Already created shopping cart widget
     * - function(VariableStore) A factory function used for creating a shopping cart.
     * - It receives the variable store of this data browser.
     */
    this.shoppingCart = true;
    /**
     * If true, derivative varaibles will be allowed.
     */
    this.allowDerivativeVariables = false;
    this._isCreated = false;
  }
  postCreate() {
    this._set("title", (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.a)("DataBrowser").DataBrowser.title);
    this.applyButton = (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.a)("DataBrowser").WizardButtons.apply;
    this.backButton = (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.a)("DataBrowser").WizardButtons.back;
    this.pageBackButton = (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.a)("DataBrowser").WizardButtons.back;
    this.cancelButton = (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.a)("DataBrowser").WizardButtons.cancel;
    this._initialStartup();
    super.postCreate();
    this._isCreated = true;
  }
  _initialStartup() {
    // Create data browser manager
    this._manager = this._contentFactory.createManager(this);
    if (this._manager.selectionLimit > 0) {
      this._manager.onLimit = this._onLimit.bind(this);
      if (this._manager.selectionLimit === 1) {
        this._manager.watch("selection", this._onApply.bind(this));
      }
    }
    sync(this, this._manager, "variableQuery");
    if (this._manager.multipleSelectIsAllowed()) {
      this._manager.watch("selection", this._updateSelectionFromManager.bind(this));
    }
    // Create shopping cart if more than one variable is allowed in selection and the shopping cart is enabled.
    if (this._manager.allowShoppingCart) {
      this._shoppingCart =
        typeof this.shoppingCart === "function"
          ? this.shoppingCart(this.variables)
          : typeof this.shoppingCart === "object" && this.shoppingCart.placeAt
            ? this.shoppingCart
            : new ShoppingCart({ variables: this.variables });
      // We own a newly created shopping cart only.
      if (typeof this.shoppingCart !== "object") {
        this.own(this._shoppingCart); // need to own, because it can be external
      }
      this._syncManagerWithShoppingCart();
    }
    this._breadcrumb = this._contentFactory.createBreadcrumb({
      onCategoriesClick: this._loadCategoriesPage.bind(this),
      onDCsClick: this._loadCollectionsPage.bind(this)
    });
    this._breadcrumb.domNode.style.display = "none";
    this._manager.flyAnim = this._breadcrumb.flyAnim = new AnimationHelper(this.domNode);
    addClass(this.domNode, "esri4GEDataBrowser");
    this._shoppingCart && this._shoppingCart.placeAt(this.domNode);
    this._breadcrumb.placeAt(this.domNode);
    this._addTitleNode();
    this._manager.createVariableGrid = (options, refNode) => {
      options = options || {};
      options.manager = this._manager;
      return this._contentFactory.createVariableGrid(options, refNode);
    };
    this._addAutoTooltip();
  }
  _syncManagerWithShoppingCart() {
    sync(this._manager, this._shoppingCart, "selection");
  }
  _addAutoTooltip() {
    autoTooltip(this.domNode);
  }
  _addTitleNode() {
    const titleContainer = create("div", { style: "position: absolute; top: 0;" }, this.domNode);
    this._titleNode = create("div", { class: "esri4GEDataBrowser_Title", textContent: this.title }, titleContainer);
  }
  _updateSelectionFromManager() {
    if (this.selection !== this._manager.selection) {
      // Only send Select event when variable has been added.
      const sendSelectEvent = this._manager.selection.length > this.selection.length;
      this._set("selection", this._manager.selection);
      sendSelectEvent && this._onSelect();
    }
  }
  _setSelection(value) {
    // Selection change from outside of Data Browser is allowed in the multiple selection case only.
    if (!this._manager || !this._manager.multipleSelectIsAllowed()) {
      return null;
    }
    value = value || [];
    if (this.selection === value) {
      return null;
    }
    this._updateSelection(value);
    return this._manager.changeSelection(value); // Change selection after synchronization
  }
  _updateSelection(newSelection) {
    this._set("selection", newSelection.slice()); // Don't watch selection here (?)
  }
  _setCountryID(value, skipUpdates = false) {
    if (value === this._getQueryCountryID()) {
      return;
    }
    if (value && this.allowHierarchies) {
      const hierarchyID = value.substr(3); // Skip 2-char country code and '/'
      value = value.substr(0, 2); // Extract country code
      this._set("hierarchyID", hierarchyID);
    }
    this._set("countryID", value);
    if (!this._manager || skipUpdates) {
      // The case when this method is called in the constructor
      return;
    }
    value = this._getQueryCountryID();
    if (this._isCreated) {
      this._loadCategoriesPage().changeCountry(value);
    }
    else {
      this._manager.variableQuery = { countryID: value };
      this._manager.variables.synchronize(value);
    }
  }
  _getQueryCountryID(countryID, hierarchyID) {
    if (typeof countryID === "undefined") {
      countryID = this.countryID;
      hierarchyID = this.hierarchyID;
    }
    return this.allowHierarchies && countryID && hierarchyID ? countryID + "/" + hierarchyID : countryID;
  }
  /**
   * Allows to move Data Browser to a page depending on query parameters.
   * See variableQuery property description for detail.
   * If query parameter is missing, it restarts the current page.
   */
  launch(query) {
    if (query) {
      const queryCountryID = this._getQueryCountryID();
      query = Object.assign({}, query);
      if (typeof query.countryID === "undefined") {
        query.countryID = queryCountryID;
      }
      this._manager.variableQuery = query;
      if (queryCountryID !== query.countryID) {
        this._set("countryID", query.countryID);
      }
    }
    this._launch();
  }
  _launch() {
    this._showProgress(this._manager.validateQuery().then((queryResult) => {
      this._manager.validateSelection();
      this._loadNextPage(queryResult);
    }));
  }
  // Back button functionality, used to support external back buttons outside the DataBrowser
  back() {
    this.currentPage && this.currentPage.emit("back");
  }
  //----------------------------------------------------
  //
  //  Navigation between pages
  //
  //----------------------------------------------------
  _loadNextPage(queryResult) {
    const query = this._manager.variableQuery;
    if (query.searchString || query.favorites || query.dataCollectionID) {
      this._loadVariablesPage(queryResult);
    }
    else if (query.categoryID) {
      this._isNonEmptyCategory((nonempty) => {
        if (nonempty) {
          this._loadCollectionsPage();
        }
        else {
          this._loadVariablesPage();
        }
      });
    }
    else {
      this._loadCategoriesPage();
    }
  }
  _loadPreviousPage() {
    if (this.currentPageId === "collections") {
      this._loadCategoriesPage();
    }
    else {
      this._isNonEmptyCategory((nonempty) => {
        if (nonempty) {
          this._loadCollectionsPage();
        }
        else {
          this._loadCategoriesPage();
        }
      });
    }
  }
  _loadCategoriesPage() {
    let page = this._pages["categories"];
    if (!page) {
      page = this._pages["categories"] = this._contentFactory.createCategoriesPage({
        countryBox: this.countryBox,
        allowHierarchies: this.allowHierarchies,
        manager: this._manager,
        backButton: this.backButton,
        applyButton: this._manager.multipleSelectIsAllowed() ? this.applyButton : null,
        cancelButton: this.cancelButton,
        onSelect: () => this._loadNextPage(null),
        onSearch: this._loadNextPage.bind(this),
        onCountryChange: (countryID) => {
          this._setCountryID(countryID, true);
        }
      });
      page.on("back", this._onBack.bind(this));
      page.on("apply", this._onApply.bind(this));
      page.on("cancel", this._onCancel.bind(this));
    }
    this.loadPage("categories");
    return page;
  }
  _loadCollectionsPage() {
    let page = this._pages["collections"];
    if (!page) {
      page = this._pages["collections"] = this._contentFactory.createDataCollectionsPage({
        manager: this._manager,
        backButton: this.pageBackButton,
        applyButton: this._manager.multipleSelectIsAllowed() ? this.applyButton : null,
        cancelButton: this.cancelButton,
        onSelect: this._loadNextPage.bind(this)
      });
      page.on("back", this._loadPreviousPage.bind(this));
      page.on("apply", this._onApply.bind(this));
      page.on("cancel", this._onCancel.bind(this));
    }
    page.lastDataCollectionID = this._manager.variableQuery.dataCollectionID;
    this.loadPage("collections");
    return page;
  }
  _loadVariablesPage(searchResults) {
    let page = this._pages["variables"];
    if (!page) {
      page = this._pages["variables"] = this._contentFactory.createVariablesPage({
        manager: this._manager,
        backButton: this.pageBackButton,
        applyButton: this._manager.multipleSelectIsAllowed() ? this.applyButton : null,
        cancelButton: this.cancelButton
      });
      page.on("back", this._loadPreviousPage.bind(this));
      page.on("apply", this._onApply.bind(this));
      page.on("cancel", this._onCancel.bind(this));
    }
    page.searchResults = searchResults;
    this.loadPage("variables");
    return page;
  }
  //----------------------------------------------------
  //
  //  Load Page improved
  //
  //----------------------------------------------------
  loadPage(pageId) {
    // We allow reloading the same page with other query parameter.
    // So, we don't test that the current page differs from the required page.
    switch (pageId) {
      case "categories":
        this._manager.variableQuery = this._manager.composeQuery();
        break;
      case "collections":
        this._manager.variableQuery = this._manager.composeQuery("categoryID");
        break;
    }
    super.loadPage(pageId);
    // Should update breadcrumb when Data Browser is already shown.
    setTimeout(() => {
      this._updateBreadcrumb(pageId);
    });
    this.emit("pageLoaded", { pageName: pageId });
  }
  //----------------------------------------------------
  //
  //  Work with breadcrumb
  //
  //----------------------------------------------------
  _updateBreadcrumb(pageId) {
    if (!this._breadcrumb.domNode) {
      return; // Already destroyed
    }
    switch (pageId) {
      case "categories":
        this._breadcrumb.domNode.style.display = "none";
        this._breadcrumb.clearSelection();
        break;
      case "collections":
        this._breadcrumb.domNode.style.display = "";
        this._breadcrumb.selectCategory(this._manager.getCategory());
        break;
      case "variables":
        this._breadcrumb.domNode.style.display = "";
        this._isNonEmptyCategory((nonempty, category) => {
          if (nonempty || !category) {
            // only the title is needed
            let dataCollection = this._manager.getDataCollection();
            if (!dataCollection) {
              dataCollection = this._prepareNoDCBreadcrumbInfo();
            }
            this._breadcrumb.selectDataCollection(dataCollection, category);
          }
          else {
            this._breadcrumb.selectCategory(category);
          }
        });
        break;
    }
  }
  _prepareNoDCBreadcrumbInfo() {
    const query = this._manager.variableQuery;
    return {
      title: this._manager.variableQuery.favorites
        ? (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.a)("DataBrowser").DataVariablesPage.favoriteVariablesTitle
        : !query || !query.searchString || query.searchString === "*"
          ? (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.a)("DataBrowser").DataVariablesPage.allVariablesTitle
          : (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.s)((0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.a)("DataBrowser").DataVariablesPage.customSearch, {
            searchKey: query.searchString
          })
    };
  }
  //----------------------------------------------------
  //
  //  Utilities
  //
  //----------------------------------------------------
  /**
   * Tests the current category to be nonempty (to have popular variables or more than one data collection).
   */
  _isNonEmptyCategory(callback) {
    (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.w)(this._manager.getCategory()).then((category) => {
      const nonempty = category
        ? this.variables.getPopularVariables(category).length || category.dataCollections.length > 1
        : false;
      callback(!!nonempty, category);
    });
  }
  //--------------------------------------------------------------------------
  //
  // Events
  //
  //--------------------------------------------------------------------------
  _onLimit() {
    setTimeout(() => {
      this.emit("limit", { selectionLimit: this._manager.selectionLimit });
    });
  }
  _onBack() {
    this.emit("back");
  }
  _onApply() {
    if (this._manager.selectionLimit === 1) {
      // Move selection from the manager to this object in the single
      // selection case to allow re-launch the data browser after selection is done.
      this._updateSelectionFromManager();
      if (this._manager.selection.length) {
        this._manager.selection = [];
      }
    }
    this.emit("apply", { selection: this.selection, variableQuery: this.variableQuery });
  }
  _onCancel() {
    this.emit("cancel");
  }
  _onSelect() {
    this.emit("select");
  }
};
__decorate([
  y$r()
], DataBrowserBase.prototype, "applyButton", void 0);
__decorate([
  y$r()
], DataBrowserBase.prototype, "backButton", void 0);
__decorate([
  y$r()
], DataBrowserBase.prototype, "pageBackButton", void 0);
__decorate([
  y$r()
], DataBrowserBase.prototype, "cancelButton", void 0);
__decorate([
  y$r({
    constructOnly: true
  })
], DataBrowserBase.prototype, "allowHierarchies", void 0);
__decorate([
  y$r({
    constructOnly: true
  })
], DataBrowserBase.prototype, "countryBox", void 0);
__decorate([
  y$r({
    constructOnly: true
  })
], DataBrowserBase.prototype, "variables", void 0);
__decorate([
  y$r({
    constructOnly: true
  })
], DataBrowserBase.prototype, "selectionLimit", void 0);
__decorate([
  y$r({
    constructOnly: true
  })
], DataBrowserBase.prototype, "displayAllGlobalVariables", void 0);
__decorate([
  y$r()
], DataBrowserBase.prototype, "variableQuery", void 0);
__decorate([
  y$r({
    constructOnly: true
  })
], DataBrowserBase.prototype, "favorites", void 0);
__decorate([
  y$r({
    constructOnly: true
  })
], DataBrowserBase.prototype, "variableInfo", void 0);
__decorate([
  y$r({
    constructOnly: true
  })
], DataBrowserBase.prototype, "shoppingCart", void 0);
__decorate([
  y$r({
    constructOnly: true
  })
], DataBrowserBase.prototype, "allowDerivativeVariables", void 0);
__decorate([
  y$r({
    constructOnly: true
  })
], DataBrowserBase.prototype, "allowMultipleSelectInGroup", void 0);
__decorate([
  y$r()
], DataBrowserBase.prototype, "title", null);
__decorate([
  y$r({
    value: []
  })
], DataBrowserBase.prototype, "selection", null);
__decorate([
  y$r()
], DataBrowserBase.prototype, "countryID", null);
__decorate([
  y$r()
], DataBrowserBase.prototype, "hierarchyID", null);
DataBrowserBase = __decorate([
  i$X()
], DataBrowserBase);

// geoenrichment.utils
/**
 * Creates a DOM node by category.
 * @param category Data collection category.
 * @param parentNode Parent HTML element.
 * @param params If passed and 'noLabel' is true, a text label under the icon will not be added.
 * @returns A data collection category node extended with icon node reference.
 */
function createCategoryNode(category, parentNode, params) {
  const node = create("div", { class: "DataCategoryItem esriGEClickable" }, parentNode);
  // Need wrap an icon with a margin container to provide a smooth fly animation.
  // The flying node should have the same width, margins and paddings as the destination node.
  // Otherwise, it will finally jump a bit.
  const margins = create("div", { class: "DataCategoryItemIconMargins" }, node);
  node.icon = create("div", null, margins);
  if (!params || !params.noLabel)
    create("div", { class: "DataCategoryItemLabel esriGETrimWithEllipses" }, node);
  updateCategoryNode(node, category);
  return node;
}
/**
 * Updates a DOM node earlier created with createCategoryNode method.
 * @param node Data collection category node.
 * @param category Data collection category.
 */
function updateCategoryNode(node, category) {
  node.icon.className = "DataCategoryItemIcon " + getCategoryImageClass(category);
  node.icon.setAttribute("categoryId", category ? category.id : ""); // helps identify icons if needed (used outside of this API)
  node.children[1] && (node.children[1].textContent = (category && category.name) || "");
}
/**
 * Creates a css image class by the category ID.
 * @param categoryOrId Category or category ID.
 * @returns Category imagee class.
 */
function getCategoryImageClass(categoryOrId) {
  let categoryId = typeof categoryOrId === "string" ? categoryOrId : categoryOrId && categoryOrId.id;
  let imageClass = "esri4GEDataCategoryImage";
  if (categoryId) {
    categoryId = categoryId.toLowerCase().replace(/(\s|_|\d|\(|\))/g, "");
    categoryId = categoryId.split(/\W+/)[0];
    if (categoryId) {
      imageClass += " esri4GEDataCategoryImage_" + categoryId;
    }
  }
  return imageClass;
}

let Breadcrumb = class Breadcrumb extends TemplatedWidget {
  //--------------------------------------------------------------------------
  //
  // Initialization
  //
  //--------------------------------------------------------------------------
  constructor(params, refNode, position) {
    super(params, refNode, position);
    this._templateString = `
  <div class="Breadcrumb BreadcrumbHeight">
    <div class="Breadcrumb_Line" data-attach-point="_connect" style="display: none;"></div>
    <div class="Breadcrumb_Line Breadcrumb_AnimatedConnect" data-attach-point="_animatedConnect" style="display: none;"></div>
    <div class="Breadcrumb_AllCategories esri4GEDataCategoryImage_AllCategories" data-attach-point="_allCategoriesDiv">&nbsp;</div>
    <div data-attach-point="_dcIcon" style="display: none;"></div>
    <div class="Breadcrumb_Variables DataCollectionButton esriGETrimWithEllipses" data-attach-point="_varsNode" style="display: none;"></div>
  </div>`;
    this._categoryClickAllowed = false;
    this._animationRate = 700; // 700 pixels per second
  }
  postCreate() {
    on(this._allCategoriesDiv, "click", this._onCategoriesClick.bind(this));
    on(this._dcIcon, "click", this._onDCsClick.bind(this));
  }
  //------------------------------------------------------
  //
  // Select
  //
  //------------------------------------------------------
  selectCategory(categoryOrPromise) {
    if (!this._lastDataCollection) {
      this.clearSelection();
    }
    else {
      this._updateDataCollection();
    }
    if (categoryOrPromise) {
      this._selectCategory(categoryOrPromise, this._updateCategory.bind(this));
    }
  }
  selectDataCollection(dataCollectionOrPromise, categoryOrPromise) {
    if (!categoryOrPromise) {
      this.clearSelection();
    }
    else {
      this._updateConnectionLine("Breadcrumb_Connect");
    }
    this._selectCategory(categoryOrPromise, (category) => {
      this._updateCategory(category, true);
      (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.w)(dataCollectionOrPromise).then(this._updateDataCollection.bind(this));
    });
  }
  _selectCategory(categoryOrPromise, callback) {
    (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.w)(categoryOrPromise).then((category) => {
      (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.w)(this.flyAnim.getPromise()).then(() => {
        callback(category);
      });
    });
  }
  clearSelection() {
    this._updateCategory();
    this._updateDataCollection();
  }
  //------------------------------------------------------
  //
  // Update category
  //
  //------------------------------------------------------
  _updateCategory(category, clickable = false) {
    this._categoryClickAllowed = clickable;
    this._lastCategory = category;
    if (category) {
      this._dcIcon.className = "Breadcrumb_DataCollections";
      this._updateCategoryIcon(this._dcIcon, category);
      toggleClass(this._dcIcon, "esriGEClickable", clickable);
      if (!clickable) {
        this._updateConnectionLine("Breadcrumb_ConnectDC");
      }
    }
    this._dcIcon.style.display = category ? "" : "none";
  }
  _updateCategoryIcon(icon, category) {
    addClass(icon, getCategoryImageClass(category));
  }
  //------------------------------------------------------
  //
  // Update data collection
  //
  //------------------------------------------------------
  _updateDataCollection(dataCollection) {
    this._lastDataCollection = dataCollection;
    if (dataCollection) {
      toggleClass(this._varsNode, "Breadcrumb_VariablesNoDC", !this._lastCategory);
      this._varsNode.innerHTML = dataCollection.title;
    }
    this._varsNode.style.display = dataCollection ? "" : "none";
    let lineClass;
    if (!dataCollection) {
      lineClass = this._lastCategory ? "Breadcrumb_Connect" : "";
    }
    else {
      lineClass = this._lastCategory ? "Breadcrumb_ConnectDCVars" : "Breadcrumb_ConnectVars";
    }
    this._updateConnectionLine(lineClass);
  }
  //------------------------------------------------------
  //
  // Update connection line
  //
  //------------------------------------------------------
  _updateConnectionLine(lineClass) {
    this._stopAnimation();
    if (!lineClass) {
      this._connect.style.display = "none";
      this._animatedConnect.style.display = "none";
    }
    else {
      const noAnimation = lineClass === "Breadcrumb_Connect";
      replaceClass(this._connect, lineClass, "Breadcrumb_Connect Breadcrumb_ConnectDC Breadcrumb_ConnectDCVars Breadcrumb_ConnectVars");
      this._connect.style.display = "";
      this._animateConnect(getContentBox(this._connect), noAnimation);
    }
  }
  _animateConnect(finalBox, noAnimation = false) {
    if (noAnimation) {
      setStyle(this._animatedConnect, { width: finalBox.w + "px", height: finalBox.h + "px" });
      this._animatedConnect.style.display = "";
      return;
    }
    let currentBox;
    if (!this._animatedConnect.style.display) {
      currentBox = getContentBox(this._animatedConnect);
    }
    else {
      currentBox = { w: 0, h: 0 };
      setStyle(this._animatedConnect, { width: "0", height: "0" });
      this._animatedConnect.style.display = "";
    }
    this._doAnimation(currentBox, finalBox);
  }
  _doAnimation(fromBox, toBox) {
    this._animation = animateProperty({
      obj: this._animatedConnect.style,
      duration: ((toBox.w - fromBox.w) / this._animationRate) * 1000,
      properties: { width: { start: fromBox.w, end: toBox.w, units: "px" } },
      onEnd: () => {
        this._animation = animateProperty({
          obj: this._animatedConnect.style,
          duration: ((toBox.h - fromBox.h) / this._animationRate) * 1000,
          properties: { height: { start: fromBox.h, end: toBox.h, units: "px" } }
        });
      }
    });
  }
  _stopAnimation() {
    this._animation && this._animation.cancel();
  }
  //------------------------------------------------------
  //
  // Click handlers
  //
  //------------------------------------------------------
  _onCategoriesClick() {
    this.onCategoriesClick();
  }
  onCategoriesClick() { }
  _onDCsClick() {
    if (this._categoryClickAllowed) {
      this.onDCsClick();
    }
  }
  onDCsClick() { }
};
__decorate([
  y$r()
], Breadcrumb.prototype, "flyAnim", void 0);
__decorate([
  y$r()
], Breadcrumb.prototype, "onCategoriesClick", null);
__decorate([
  y$r()
], Breadcrumb.prototype, "onDCsClick", null);
Breadcrumb = __decorate([
  i$X()
], Breadcrumb);

let Pagination = class Pagination extends TemplatedWidget {
  constructor(params, refNode, position) {
    super(params, refNode, position);
    this._templateString = `
  <div class="esri4GEPagination">
    <div class="esri4GEPagination_PageAndArrows">
    <div class="esri4GEPagination_Items">
      <div data-attach-point="_itemsNode" class="esri4GEPaginationItemsNode"></div></div>
      <div data-attach-point="_backNode" class="esri4GEPagination_Triangle esri4GEPagination_TriangleBack" style="display: none;"></div>
      <div data-attach-point="_forwardNode" class="esri4GEPagination_Triangle esri4GEPagination_TriangleForward" style="display: none;"></div>
    </div>
    <div data-attach-point="_bulletsNode" class="esri4GEPagination_Bullets"></div>
  </div>`;
    // properties
    // autoCenter: Boolean | "width" | "height" | "stretch:w,h" | "stretch-width:w" | stretch-height:h"
    //      Specifies how to place pagination items within the pagination area:
    //      False value means placing items as is.
    //      True value means auto centering the pagination panel with items in the width and height.
    //      "width" value means auto centering in the width only.
    //      "height" value means auto centering in the height only.
    //      "stretch" value means auto stretching the pagination content in the width and height.
    //          Optional positive numbers after ":" specify the constraints on the number of items in width and height.
    //          For example, "stretch:4,2" means stretch the pagination in not more than 4 columns
    //          and 2 rows. Any other value means no constraint in this direction,
    //          e.g., "stretch" is equivalent to "stretch:*,*".
    //      "stretch-width" value means auto stretching in the width only and an optional positive number
    //          means the constraint on the number of items.
    //      "stretch-height" value auto stretching in the height only and an optional positive number
    //          means the constraint on the number of items.
    //      Any other nonempty string value is equivalent to true.
    //
    //      If the pagination is centered or stretched in width, its content is centered in the case of a single page
    //      containing a single row. To avoid content centering, add the prefix '$' to the autoCenter option,
    //      e.g. "$" value of autoCenter option is equivalent to auto-centering in both directions but without single row centering.
    //      Other examples: "$stretch-width", "$stretch:4,2".
    //
    //      If the pagination is centered or stretched in height, contains the single page only and the number of rows
    //      is less than the available capacity, the rows can be vertically centered using the prefix "@".
    //
    //      Both "$" and "@" prefixes can be added in any order.
    this.autoCenter = false;
    // scrollAnimation: Boolean | "fade1" | "fade2" | "slide"
    //      Specifies how to animate page changes by click on a page bullet.
    //          The false value means no animation.
    //          The true (default) value means replacing the page with fadeout animation.
    //          The "fade1" value means 1-step fade animation.
    //          The "fade2" value means 2-step fade animation.
    //          The "slide" value means 1-step animation with sliding the old content with the new one.
    this.scrollAnimation = true;
    // cyclicPagination: Boolean
    //      Allows make a cyclic pagination when click on pagination arrows.
    //      The false (default) value means no cyclic pagination.
    //      The true value means that the first and the last pages of the pagination are neighbors.
    //      Click on the arrow Back at the first page will show the last page and click on
    //      the arrow Next at the last page will show the first page.
    this.cyclicPagination = false;
    // alwayShowArrows: Boolean
    //      The true value means that pagination arrows are always shown.
    //      The false (default) value means that pagination arrows will be shown if more than one page is available.
    this.alwaysShowArrows = false;
    // internal members
    this._pageCount = 0;
    this._pageSize = 0;
  }
  //--------------------------------------------------------------------------
  //
  // Getters & setters
  //
  //--------------------------------------------------------------------------
  set items(items) {
    this._setItems(items);
  }
  set currentPage(value) {
    this.setCurrentPage(value, false);
  }
  //--------------------------------------------------------------------------
  //
  // Initialization
  //
  //--------------------------------------------------------------------------
  postCreate() {
    this._animation = new AnimationHelper();
    on(this._backNode, "click", () => {
      this.setCurrentPage("prev", false);
    });
    on(this._forwardNode, "click", () => {
      this.setCurrentPage("next", false);
    });
  }
  //-------------------------------------------------------
  //
  // Bindable functions
  //
  //-------------------------------------------------------
  /**
   * Should create a dom node container for an item with already correct size.
   * This must be an inline-block node. In the case of stretch pagination its margins are ignored.
   */
  createItemContainer() {
    throw new Error("Not implemented");
  }
  /**
   * Should update a dom node container with the given item.
   */
  updateItemContainer(_node, _item) { }
  //-------------------------------------------------------
  //
  // Layout
  //
  //-------------------------------------------------------
  /**
   * Has to be called after items have been set to initialize layout.
   */
  resize(navigateToPageIndex) {
    let node;
    let rowCount;
    let lineHeight;
    let marginExtents;
    let columnCount;
    let margin;
    let marginBox;
    this._animation.finish();
    const items = this.items;
    if (!items || !items.length) {
      this.items = []; // Clean up the layout
      return;
    }
    const itemsPane = this._itemsNode.parentNode;
    // Ignore pagination on invisible pane
    if (!itemsPane || !itemsPane.clientHeight) {
      return;
    }
    const autoCenter = this._parseAutoCenterOption(this.autoCenter);
    if (autoCenter.type) {
      // Remove paddings before calculation
      setStyle(itemsPane, "padding", "0px");
    }
    let itemsNode = this._itemsNode.firstChild;
    if (!itemsNode) {
      itemsNode = create("div", null, this._itemsNode);
      addClass(itemsNode, "esri4GEPaginationItemsNodeChildDiv");
    }
    // Now we calculate the page size and page count.
    // In the case of stretch we at first vanish margins of all items
    if (autoCenter.type === "stretch") {
      this._itemMargins = {};
      this._emptyNode(itemsNode); // Should clear the content in this case, because its item margins are already corrected
    }
    // In the case of autoCenter we populate items node with the maximum possible number of
    // nodes to inspect its capacity.
    function needScroll() {
      return itemsPane.scrollHeight - 2 > itemsPane.clientHeight;
    }
    const childNodes = itemsNode.children;
    while (!needScroll() && (autoCenter.type || childNodes.length < items.length)) {
      node = this.createItemContainer();
      on(node, "click", this._onItemClick.bind(this, node));
      itemsNode.appendChild(node);
    }
    // Now we remove nodes which lead to scrolling. There may be more than one such node
    // if pagination width was reduced.
    while (needScroll() && childNodes.length > 1) {
      this._destroyNode(itemsNode.lastChild);
    }
    let emptyWidth, emptyHeight;
    // Now we calculate the number of rows and columns for the case of autoCenter
    // and calculate the empty spaces in width and height
    let capacity = childNodes.length;
    if (autoCenter.type) {
      node = itemsNode.firstChild;
      const nodeStyle = getComputedStyle$1(node);
      marginBox = getMarginBox(node, nodeStyle);
      if (autoCenter.type === "stretch") {
        marginExtents = getMarginExtents(node, nodeStyle);
      }
      rowCount = Math.max(1, Math.floor(itemsNode.clientHeight / marginBox.h));
      lineHeight = itemsNode.clientHeight / rowCount;
      rowCount = Math.max(Math.floor(itemsPane.clientHeight / lineHeight), rowCount);
      columnCount = Math.max(1, capacity / rowCount);
      if (autoCenter.heightLimit && rowCount > autoCenter.heightLimit) {
        rowCount = autoCenter.heightLimit;
      }
      if (autoCenter.widthLimit && columnCount > autoCenter.widthLimit) {
        columnCount = autoCenter.widthLimit;
      }
      capacity = rowCount * columnCount;
      lineHeight = marginBox.h;
      emptyWidth = Math.max(itemsPane.clientWidth - columnCount * marginBox.w, 0);
      emptyHeight = Math.max(itemsPane.clientHeight - rowCount * marginBox.h, 0);
    }
    // Calculate page size and count. The page size is always positive here.
    const pageSize = (this._pageSize = Math.min(capacity, items.length));
    const pageCount = (this._pageCount = Math.ceil(this.items.length / pageSize));
    // At first we calculate vertical margins of items and set vertical items pane paddings
    if (autoCenter.type && autoCenter.height) {
      if (autoCenter.type === "stretch") {
        margin = Math.floor(emptyHeight / rowCount);
        emptyHeight -= margin * rowCount;
        this._itemMargins.marginTop = (Math.floor(margin / 2) + marginExtents.t).toString() + "px";
        this._itemMargins.marginBottom = (Math.ceil(margin / 2) + marginExtents.b).toString() + "px";
        lineHeight += margin;
      }
      if (pageCount === 1 && autoCenter.allowVerticallyCenter) {
        const pageRows = Math.floor((pageSize - 1) / columnCount) + 1;
        if (pageRows < rowCount) {
          emptyHeight += lineHeight * (rowCount - pageRows);
        }
      }
      setStyle(itemsPane, {
        paddingTop: Math.floor(emptyHeight / 2).toString() + "px",
        paddingBottom: "0"
      });
    }
    // Now we prepare nodes for the current page
    this._set("currentPage", this._coerceCurrentPage(typeof navigateToPageIndex === "number" ? navigateToPageIndex : this.currentPage));
    let nodeIndex = 0;
    let itemIndex = pageSize * this.currentPage;
    while (nodeIndex < pageSize && itemIndex < items.length) {
      node = childNodes[nodeIndex++];
      const item = items[itemIndex++];
      this.updateItemContainer(node, item);
      this.onNodePlaced(node, item);
    }
    // and remove superfluous nodes
    while (nodeIndex < childNodes.length) {
      this._destroyNode(itemsNode.lastChild);
    }
    // Then we calculate horizontal margins for items and set horizontal items pane paddings
    if (autoCenter.type && autoCenter.width) {
      if (autoCenter.type === "stretch") {
        margin = Math.floor(emptyWidth / columnCount);
        emptyWidth -= margin * columnCount;
        this._itemMargins.marginLeft = (Math.floor(margin / 2) + marginExtents.l).toString() + "px";
        // Remove 1 additonal px, from margin to prevent the last item from sometimes "disappearing" (dropped to next line and out of view)
        this._itemMargins.marginRight = (Math.ceil(margin / 2) + marginExtents.r - 1).toString() + "px";
      }
      else {
        margin = 0;
      }
      // The special case of a single page with a single row
      if (pageCount === 1 && pageSize < columnCount && !autoCenter.preventSingleRowCenter) {
        emptyWidth = Math.max(itemsPane.clientWidth - (marginBox.w + margin) * pageSize, 0);
      }
      const emptyWidthPx = Math.floor(emptyWidth / 2).toString() + "px";
      setStyle(itemsPane, {
        paddingLeft: emptyWidthPx,
        paddingRight: emptyWidthPx
      });
    }
    // Now we update margins for child nodes
    nodeIndex = this._itemMargins ? 0 : childNodes.length;
    while (nodeIndex < childNodes.length) {
      setStyle(childNodes[nodeIndex++], this._itemMargins);
    }
    // Populate bullet nodes pane with bullets
    if (this._bulletsNode) {
      this._bulletsNode.innerHTML = "";
      if (pageCount > 1) {
        for (let i = 0; i < pageCount; i++) {
          const bullet = create("span", { class: "esri4GEPagination_Bullet", innerHTML: "&nbsp;" }, this._bulletsNode);
          ((i) => {
            on(bullet, "click", () => {
              this.currentPage = i;
              this.onPageChangedManually({ currentPage: this.currentPage });
            });
          })(i);
        }
      }
    }
    this._updateNavigationControls();
  }
  _parseAutoCenterOption(option) {
    if (!option) {
      return {};
    }
    // Recognize auto-centering cases
    const parsed = { type: "center" };
    if (typeof option !== "string") {
      option = "";
    }
    let hasFlag = true;
    while (hasFlag) {
      switch (option.charAt(0)) {
        case "$":
          parsed.preventSingleRowCenter = true;
          break;
        case "@":
          parsed.allowVerticallyCenter = true;
          break;
        default:
          hasFlag = false;
          break;
      }
      if (hasFlag) {
        option = option.substr(1);
      }
    }
    switch (option) {
      case "width":
        parsed.width = true;
        return parsed;
      case "height":
        parsed.height = true;
        return parsed;
      default:
        if (option.indexOf("stretch") !== 0) {
          parsed.width = parsed.height = true;
          return parsed;
        }
        break;
    }
    // Parse stretch cases
    parsed.type = "stretch";
    option = option.substr(7);
    let i = option.indexOf(":");
    const suffix = i < 0 ? option : option.substr(0, i); // Contains stretch type suffix
    option = i < 0 ? "" : option.substr(i + 1); // Contains constraints after ":"
    switch (suffix) {
      case "-width":
        parsed.width = true;
        break;
      case "-height":
        parsed.height = true;
        break;
      default:
        parsed.width = parsed.height = true;
        break;
    }
    if (!option) {
      return parsed;
    }
    // Parse constraints
    const options = option.split(",");
    i = 0;
    ["width", "height"].forEach((prop) => {
      if (!parsed[prop]) {
        return;
      }
      const value = Number(options[i++]);
      if (!isNaN(value) && value > 0) {
        parsed[prop + "Limit"] = value;
      }
    });
    return parsed;
  }
  _onItemClick(node) {
    this.onSelect(node);
  }
  _coerceCurrentPage(currentPage) {
    if (currentPage >= this._pageCount) {
      currentPage = this._pageCount - 1;
    }
    if (currentPage < 0) {
      currentPage = 0;
    }
    return currentPage;
  }
  _updateNavigationControls() {
    const currentPage = this.currentPage;
    const singlePage = this._pageCount <= 1;
    const navigationDisable = singlePage && !this.alwaysShowArrows ? "none" : "";
    const states = ["esri4GEPagination_TriangleDisabled", "esri4GEPagination_TriangleEnabled"];
    let enable;
    // Update triangle buttons visibility
    if (this._backNode) {
      enable = singlePage || (currentPage === 0 && !this.cyclicPagination) ? 0 : 1;
      replaceClass(this._backNode, states[enable], states[1 - enable]);
      this._backNode.style.display = navigationDisable;
    }
    if (this._forwardNode) {
      enable = singlePage || (currentPage === this._pageCount - 1 && !this.cyclicPagination) ? 0 : 1;
      replaceClass(this._forwardNode, states[enable], states[1 - enable]);
      this._forwardNode.style.display = navigationDisable;
    }
    // Update bullet buttons
    if (this._bulletsNode) {
      const bullets = this._bulletsNode.children;
      for (let i = 0; i < bullets.length; i++) {
        if (i === currentPage) {
          addClass(bullets[i], "esri4GEPagination_BulletCurrent");
        }
        else {
          removeClass(bullets[i], "esri4GEPagination_BulletCurrent");
        }
      }
    }
  }
  _setItems(items) {
    this._set("items", items);
    this._emptyNode(this._itemsNode);
    if (this._bulletsNode) {
      this._bulletsNode.innerHTML = "";
    }
    this._set("currentPage", 0);
    this._pageCount = 0;
    this._updateNavigationControls();
  }
  // Selects a page to be shown by an index of item.
  selectPageByItemIndex(index, skipAnimation) {
    if (index < 0 || !this.items || index >= this.items.length || this._pageCount <= 1) {
      return;
    }
    this.setCurrentPage(Math.floor(index / this._pageSize), skipAnimation);
  }
  selectItem(item) {
    const index = this.items.indexOf(item);
    if (index === -1) {
      return;
    }
    if (index < 0 || !this.items || index >= this.items.length || this._pageCount <= 1) {
      return;
    }
    const itemIndexOnPage = this.items.length % this._pageSize;
    const nodeToSelect = this._itemsNode.firstChild.children[itemIndexOnPage];
    if (nodeToSelect) {
      this.onSelect(nodeToSelect);
    }
  }
  navigateToItem(item) {
    const index = this.items.indexOf(item);
    this.selectPageByItemIndex(index, true);
  }
  setCurrentPageNoAnimation(currentPage) {
    this.setCurrentPage(currentPage, true);
  }
  // Sets the index of a new current page to be shown.
  // Two special values are also allowed:
  //      "next" moves to the next page with slide animation
  //      "prev" moves to the previous page with slide animation
  // In the case of cyclic pagination, the next page for the last page is the first page
  // and the previous page for the first page is the last page.
  setCurrentPage(currentPage, skipAnimation = false) {
    this._animation.finish();
    let animate;
    if (currentPage === "next") {
      animate = "forward";
      currentPage = this.currentPage + 1;
      if (this.cyclicPagination && currentPage === this._pageCount) {
        currentPage = 0;
      }
    }
    else if (currentPage === "prev") {
      animate = "backward";
      currentPage = this.currentPage - 1;
      if (this.cyclicPagination && currentPage === -1) {
        currentPage = this._pageCount - 1;
      }
    }
    else {
      animate = this.scrollAnimation === true ? "fade1" : this.scrollAnimation;
    }
    if (skipAnimation === true) {
      animate = "";
    }
    currentPage = this._coerceCurrentPage(currentPage);
    if (this.currentPage === currentPage) {
      return;
    }
    const items = this.items || [];
    const itemsNode = this._itemsNode;
    let nodeIndex = 0;
    let itemIndex = this._pageSize * currentPage;
    const oldItemsNode = this._itemsNode.firstChild;
    const newItemsNode = create("div");
    addClass(newItemsNode, "esri4GEPaginationItemsNodeChildDiv");
    const placedNodeInfos = [];
    while (nodeIndex++ < this._pageSize && itemIndex < items.length) {
      const node = this.createItemContainer();
      on(node, "click", this._onItemClick.bind(this, node));
      this._itemMargins && setStyle(node, this._itemMargins);
      newItemsNode.appendChild(node);
      const item = items[itemIndex++];
      this.updateItemContainer(node, item); // update after adding to the layout
      placedNodeInfos.push({ node, item });
    }
    switch (animate) {
      case "forward":
        this._slideAnimation(itemsNode, oldItemsNode, newItemsNode, true, placedNodeInfos);
        break;
      case "backward":
        this._slideAnimation(itemsNode, oldItemsNode, newItemsNode, false, placedNodeInfos);
        break;
      default:
        if (animate) {
          animate = animate ? "_" + animate + "Animation" : null;
          if (typeof this[animate] === "function") {
            this[animate](itemsNode, oldItemsNode, newItemsNode, currentPage > this.currentPage, placedNodeInfos);
            break;
          }
        }
        this._emptyNode(itemsNode);
        itemsNode.appendChild(newItemsNode);
        this._notifyNodesPlaced(placedNodeInfos);
        break;
    }
    this._set("currentPage", currentPage);
    this._updateNavigationControls();
    this.onPageChanged({ currentPage: this.currentPage });
  }
  _notifyNodesPlaced(placedNodeInfos) {
    placedNodeInfos.forEach((info) => {
      this.onNodePlaced(info.node, info.item);
    });
  }
  // Replaces an old items node with the new one using sliding.
  // forward: Boolean
  //      true value means moving forward to the next pagination node.
  _slideAnimation(itemsContainer, oldItemsNode, newItemsNode, forward, placedNodeInfos) {
    if (forward) {
      itemsContainer.appendChild(newItemsNode);
    }
    else {
      itemsContainer.insertBefore(newItemsNode, itemsContainer.firstChild);
    }
    this._notifyNodesPlaced(placedNodeInfos);
    itemsContainer.parentNode.style.overflow = "hidden";
    this._animation
      .start([
      {
        node: itemsContainer,
        classes: ["esri4GEPagination_SlideAnim", forward ? "Anim_SlideStart" : "Anim_SlideEnd"]
      }
    ], oldItemsNode)
      .then(() => {
      itemsContainer.parentNode.style.overflow = "";
    });
  }
  // 1-step fade out animation.
  _fade1Animation(itemsContainer, oldItemsNode, newItemsNode, _forward, placedNodeInfos) {
    itemsContainer.appendChild(newItemsNode);
    this._notifyNodesPlaced(placedNodeInfos);
    this._animation.start([
      {
        node: oldItemsNode,
        classes: ["esri4GEPagination_FadeAnim", "Anim_FadeOut"]
      },
      {
        node: newItemsNode,
        classes: ["esri4GEPagination_FadeAnim", "Anim_FadeIn"]
      }
    ], oldItemsNode);
  }
  // 2-step fade in animation.
  _fade2Animation(itemsContainer, oldItemsNode, newItemsNode, _forward, placedNodeInfos) {
    const animation = this._animation;
    animation
      .start([
      {
        node: oldItemsNode,
        classes: ["esri4GEPagination_FadeAnim", "Anim_FadeOut"]
      }
    ], oldItemsNode)
      .then(() => {
      itemsContainer.appendChild(newItemsNode);
      this._notifyNodesPlaced(placedNodeInfos);
      animation.start([
        {
          node: newItemsNode,
          classes: ["esri4GEPagination_FadeAnim", "Anim_FadeIn"]
        }
      ], oldItemsNode);
    });
  }
  _destroyNode(node) {
    node && node.parentNode && node.parentNode.removeChild(node);
  }
  _emptyNode(node) {
    if (node) {
      node.innerHTML = "";
    }
  }
  getNumShownItems() {
    return this._itemsNode.children[0] && this._itemsNode.children[0].children.length;
  }
  //-------------------------------------------------------
  //
  // Events
  //
  //-------------------------------------------------------
  /**
   * Called when a node is added to the layout.
   */
  onNodePlaced(_node, _item) { }
  /**
   * Is called on node selection.
   */
  onSelect(_node) { }
  /**
   * Called on every page change, both manual and programmatic.
   */
  onPageChanged(_event) { }
  /**
   * Called on every manual page change.
   */
  onPageChangedManually(_event) { }
};
__decorate([
  y$r()
], Pagination.prototype, "autoCenter", void 0);
__decorate([
  y$r()
], Pagination.prototype, "scrollAnimation", void 0);
__decorate([
  y$r()
], Pagination.prototype, "cyclicPagination", void 0);
__decorate([
  y$r()
], Pagination.prototype, "alwaysShowArrows", void 0);
__decorate([
  y$r()
], Pagination.prototype, "items", null);
__decorate([
  y$r({
    value: 0
  })
], Pagination.prototype, "currentPage", null);
__decorate([
  y$r()
], Pagination.prototype, "createItemContainer", null);
__decorate([
  y$r()
], Pagination.prototype, "updateItemContainer", null);
__decorate([
  y$r()
], Pagination.prototype, "onNodePlaced", null);
__decorate([
  y$r()
], Pagination.prototype, "onSelect", null);
__decorate([
  y$r()
], Pagination.prototype, "onPageChanged", null);
__decorate([
  y$r()
], Pagination.prototype, "onPageChangedManually", null);
Pagination = __decorate([
  i$X()
], Pagination);

let CountrySelect = class CountrySelect extends TemplatedWidget {
  //--------------------------------------------------------------------------
  //
  // Initialization
  //
  //--------------------------------------------------------------------------
  constructor(params, refNode, position) {
    super(params, refNode, position);
    this._templateString = '<div class="esri4GEDataBrowser_CountryBoxContainer"><div class="DataBrowser_CountryBox" data-attach-point="_divCountrySelect"><calcite-select id="calciteCountrySelect" class="countrySelect calciteSelect" lang="he" /></div><div class="esri4GEDataBrowser_CountryBoxContainer" data-attach-point="_divHierarchySelect"><calcite-select id="calciteHierarchySelect" class="calciteSelect hierarchySelect" /></div></div>';
    this.allowHierarchies = false;
    // other properties
    this._countries = {};
  }
  postCreate() {
    this._countrySelectCalcite = this.domNode.querySelector("#calciteCountrySelect");
    this._countrySelectCalcite.addEventListener("calciteSelectChange", (e) => {
      this._tryShowHierarchies();
      this.onChange();
    });
    this._hierarchySelectCalcite = this.domNode.querySelector("#calciteHierarchySelect");
    this._hierarchySelectCalcite.addEventListener("calciteSelectChange", (e) => {
      this.onChange();
    });
    this._updateHierarchiesVisibility();
  }
  setCountries(data) {
    // Add Global option
    const globalOption = document.createElement("calcite-option");
    globalOption.label = (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.a)("DataBrowser").CountrySelect.global;
    globalOption.value = this.globalCountryID;
    this._countrySelectCalcite.appendChild(globalOption);
    data.map((country) => {
      this._countries[country.id] = country;
      const option = document.createElement("calcite-option");
      option.value = country.id;
      option.label = country.name;
      this._countrySelectCalcite.appendChild(option);
    });
  }
  _tryShowHierarchies() {
    this._hierarchySelectCalcite.innerHTML = "";
    if (!this.allowHierarchies) {
      return;
    }
    const country = this._countries[this._countrySelectCalcite.value];
    const hierarchies = country && country.hierarchies;
    if (!hierarchies || hierarchies.length < 2) {
      this._updateHierarchiesVisibility();
      return;
    }
    // Find the default hierarchy
    const globalDataSets = country.defaultDatasetID.toUpperCase();
    hierarchies.some((hierarchy) => {
      if (hierarchy.datasets.some((dataset) => dataset.toUpperCase() === globalDataSets)) {
        this._defaultHierarchyID = hierarchy.ID;
        return true; // stop the cycle
      }
      return false;
    });
    const options = new Array;
    if (!country.disableMultiHierarchySupport) {
      const option = document.createElement("calcite-option");
      option.label = (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.a)("DataBrowser").CountrySelect.allHierarchies;
      option.value = "all";
      options.push(option);
    }
    hierarchies.forEach((hierarchy) => {
      const option = document.createElement("calcite-option");
      option.label = hierarchy.alias;
      option.value = hierarchy.ID;
      options.push(option);
    });
    options.forEach((option) => {
      this._hierarchySelectCalcite.appendChild(option);
    });
    this._hierarchySelectCalcite.value = country.disableMultiHierarchySupport ? this._defaultHierarchyID : "all";
    this._updateHierarchiesVisibility();
  }
  _updateHierarchiesVisibility() {
    display(this._divHierarchySelect, !!this._hierarchySelectCalcite.children.length);
  }
  getValue() {
    return {
      countryID: this._countrySelectCalcite.value,
      hierarchyID: (this._hierarchySelectCalcite.children.length &&
        this._hierarchySelectCalcite.value !== "all" &&
        this._hierarchySelectCalcite.value) ||
        null
    };
  }
  setValue(value) {
    this._countrySelectCalcite.value = value.countryID;
    this._tryShowHierarchies();
    const country = this._countries[value.countryID];
    this._hierarchySelectCalcite.value = value.hierarchyID || country.disableMultiHierarchySupport ? this._defaultHierarchyID : "all";
  }
  onChange() { }
};
__decorate([
  y$r()
], CountrySelect.prototype, "globalCountryID", void 0);
__decorate([
  y$r()
], CountrySelect.prototype, "allowHierarchies", void 0);
__decorate([
  y$r()
], CountrySelect.prototype, "onChange", null);
CountrySelect = __decorate([
  i$X()
], CountrySelect);

let SearchTextBox = class SearchTextBox extends TemplatedWidget {
  //--------------------------------------------------------------------------
  //
  // Getters & setters
  //
  //--------------------------------------------------------------------------
  // VALUE
  get value() {
    return this._textBox && this._textBox.value;
  }
  set value(value) {
    this._set("value", value);
    this._textBox && (this._textBox.value = value);
  }
  // PROMPTS
  set prompt(value) {
    this._set("prompt", value);
    this._textBox && (this._textBox.placeholder = value);
  }
  //--------------------------------------------------------------------------
  //
  // Initialization
  //
  //--------------------------------------------------------------------------
  constructor(params, refNode, position) {
    super(params, refNode, position);
    //protected override _templateString = "<div class='esri4GESearchTextBox'></div><calcite-input-text />";
    this._templateString = '<calcite-input-text id="calciteSearchTextBox" icon="search" />';
  }
  postCreate() {
    this._textBox = this.domNode.parentElement.querySelector("#calciteSearchTextBox");
    this._textBox.placeholder = this.prompt;
    this._textBox.addEventListener("calciteInputTextChange", (e) => {
      this.value = this._textBox.value;
      this._onSearch();
    });
    /*
    new TextBox({
      class: "searchTextBoxInput",
      placeHolder: this.prompt,
      clearable: true,
      additionalButton: {
        class: "searchTextBoxButton",
        onClick: this._onSearch.bind(this)
      },
      onEnter: this._onSearch.bind(this),
      onChange: () => this.notifyChange("value")
    }).placeAt(this.domNode);
    */
    /*
    on(this._textBox.textbox, "keyup", (event) => {
      // Hiding toolbox on keyup so that it doesn't hinder visibility
      hideTooltipForNode(this._textBox.textbox);
      if (event.keyCode === KEYS.Enter) {
        this._onSearch();
      }
    });
    
    on(this._textBox.textbox, "blur", () => {
      hideTooltipForNode(this._textBox.textbox);
    });
    */
  }
  //--------------------------------------------------------------------------
  //
  // Tooltip
  //
  //--------------------------------------------------------------------------
  showTooltip(message) {
    showTooltipForNode(this.domNode, message, { position: ["above", "below"] });
  }
  hideTooltip() {
    hideTooltipForNode(this.domNode);
  }
  //--------------------------------------------------------------------------
  //
  // Focus
  //
  //--------------------------------------------------------------------------
  focus() {
    this._textBox.focus();
  }
  //--------------------------------------------------------------------------
  //
  // Events
  //
  //--------------------------------------------------------------------------
  _onSearch() {
    if (this.value) {
      this.onSearch();
    }
    else {
      this._textBox && this._textBox.focus();
    }
  }
  onSearch() { }
};
__decorate([
  y$r()
], SearchTextBox.prototype, "_textBox", void 0);
__decorate([
  y$r({
    dependsOn: ["_textBox.value"]
  })
], SearchTextBox.prototype, "value", null);
__decorate([
  y$r()
], SearchTextBox.prototype, "prompt", null);
__decorate([
  y$r()
], SearchTextBox.prototype, "onSearch", null);
SearchTextBox = __decorate([
  i$X()
], SearchTextBox);

function measureElementHeight(elem) {
  elem.style.position = "absolute";
  addClass(elem, "esri4GEGridCell_Measure");
  const height = elem.scrollHeight;
  removeClass(elem, "esri4GEGridCell_Measure");
  return height;
}
function calcRowHeights(rowHeights, gridHeights, freeHeight) {
  let flexibleRowCount = 0;
  let i;
  for (i = 0; i < rowHeights.length; i++) {
    switch (gridHeights[i]) {
      case "auto":
        freeHeight -= rowHeights[i];
        break;
      case "stretch":
      case "stack":
        flexibleRowCount++;
        break;
    }
  }
  if (flexibleRowCount > 1) {
    throw new Error("Multiple rows with flexible heights are not supported");
  }
  const ys = [0];
  for (i = 0; i < rowHeights.length; i++) {
    let height;
    switch (gridHeights[i]) {
      case "auto":
        height = rowHeights[i];
        break;
      case "stretch":
        height = freeHeight;
        break;
      case "stack":
        height = Math.min(freeHeight, rowHeights[i]);
        break;
    }
    ys.push(ys[i] + height);
  }
  return ys;
}
let LayoutGrid = class LayoutGrid extends TemplatedWidget {
  constructor(params, refNode, position) {
    super(params, refNode, position);
    this.rows = [];
  }
  postCreate() {
    addClass(this.domNode, "esri4GELayoutGrid");
  }
  resize() {
    const rowHeights = [106]; // Fixed height for first row
    let i, child;
    for (i = 1; i < this.rows.length; i++) {
      rowHeights.push(0);
    }
    const children = this._getChildren();
    addClass(this.domNode, "esri4GEGrid_Measure");
    for (i = 0; i < children.length; i++) {
      child = children[i];
      const height = measureElementHeight(child);
      if (height > rowHeights[i]) {
        rowHeights[i] = height;
      }
    }
    const freeHeight = getContentBox(this.domNode).h;
    removeClass(this.domNode, "esri4GEGrid_Measure");
    const ys = calcRowHeights(rowHeights, this.rows, freeHeight);
    for (i = 0; i < children.length; i++) {
      child = children[i];
      // position & resize
      child.style.top = ys[i] + "px";
      child.style.height = ys[i + 1] - ys[i] + "px";
    }
    // provider the filler node to force the correct height
    if (!this._filler) {
      this._filler = create("div", null, this.domNode, "first");
    }
    this._filler.style.height = ys[ys.length - 2] + "px";
  }
  _getChildren() {
    const children = [];
    for (let i = 0; i < this.domNode.children.length; i++) {
      if (this.domNode.children[i] !== this._filler) {
        children.push(this.domNode.children[i]);
      }
    }
    return children;
  }
};
__decorate([
  y$r()
], LayoutGrid.prototype, "rows", void 0);
LayoutGrid = __decorate([
  i$X()
], LayoutGrid);

let WizardPage = class WizardPage extends LayoutGrid {
  set pageIsActive(_value) {
    // not implemented
  }
  //--------------------------------------------------------------------------
  //
  // Getters & setters
  //
  //--------------------------------------------------------------------------
  // STACKING
  set stacking(stacking) {
    switch (stacking) {
      case "stretch":
        this.rows[1] = stacking;
        break;
      case "stack":
        this.rows[1] = stacking;
        break;
    }
  }
  //--------------------------------------------------------------------------
  //
  // Initialization
  //
  //--------------------------------------------------------------------------
  constructor(params, refNode, position) {
    super(params, refNode, position);
    this.rows = ["auto", "auto", "auto"];
  }
  postCreate() {
    super.postCreate();
    this._addButtons();
  }
  _addButtons() {
    const self = this;
    this._buttonInfos = [];
    function addButton(type) {
      let label = self[type + "Button"];
      if (label === true) {
        label = (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.a)("DataBrowser").WizardButtons[type];
      }
      if (label) {
        const info = {
          id: type,
          label,
          onClick: () => {
            !info.disabled && self.emit(type);
          },
          node: null,
          disabled: false
        };
        self._buttonInfos.push(info);
      }
    }
    // Add buttons in the reverse order because they will be floated to the end of line
    addButton("cancel");
    addButton("apply");
    addButton("back");
    if (this._buttonInfos.length) {
      this._addButtonsPane();
    }
    else if (this._buttonsNode) {
      this._buttonsNode.style.display = "none";
    }
  }
  _addButtonsPane() {
    if (!this._buttonsNode) {
      this._buttonsNode = create("div", { class: "esri4GEWizard_Buttons" }, this.domNode.children[2] /* bottom pane, must be present in the widget */);
    }
    for (let i = 0; i < this._buttonInfos.length; i++) {
      const buttonInfo = this._buttonInfos[i];
      const button = create("div", { class: "esri4GEWizard_Button", textContent: buttonInfo.label || "" }, this._buttonsNode);
      if (buttonInfo.onClick) {
        on(button, "click", buttonInfo.onClick);
      }
      buttonInfo.node = button;
    }
  }
  //--------------------------------------------------------------------------
  //
  // Work with buttons
  //
  //--------------------------------------------------------------------------
  _setButtonEnabled(buttonId, value) {
    const info = this._buttonInfos.filter((info) => info.id === buttonId)[0];
    if (info) {
      info.disabled = !value;
      toggleClass(info.node, "disabled", info.disabled);
    }
  }
  //--------------------------------------------------------------------------
  //
  // Progress
  //
  //--------------------------------------------------------------------------
  /**
   * Shows progress in the progressDiv of the page. Wraps the result in a promise.
   */
  _showProgress(promise) {
    return (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.w)(showProgressPromise(this._progressDiv || this.domNode, promise));
  }
};
__decorate([
  y$r()
], WizardPage.prototype, "rows", void 0);
__decorate([
  y$r()
], WizardPage.prototype, "pageIsActive", null);
__decorate([
  y$r()
], WizardPage.prototype, "backButton", void 0);
__decorate([
  y$r()
], WizardPage.prototype, "applyButton", void 0);
__decorate([
  y$r()
], WizardPage.prototype, "cancelButton", void 0);
__decorate([
  y$r()
], WizardPage.prototype, "stacking", null);
WizardPage = __decorate([
  i$X()
], WizardPage);

const nls$3 = () => (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.a)("DataBrowser").DataCategoriesPage;
let DataCategoriesPage = class DataCategoriesPage extends WizardPage {
  //--------------------------------------------------------------------------
  //
  // Getters & setters
  //
  //--------------------------------------------------------------------------
  // ACTIVATE PAGE
  set pageIsActive(value) {
    this._set("pageIsActive", value);
    this._searchTextBox && (this._searchTextBox.value = "");
    // Synchronize the page with the current country on activation
    value && this.changeCountry(this.manager.variableQuery.countryID);
  }
  // ITEMS
  set items(items) {
    this._pagination.items = items;
    this.resize();
  }
  //--------------------------------------------------------------------------
  //
  // Initialization
  //
  //--------------------------------------------------------------------------
  constructor(params, refNode, position) {
    super(params, refNode, position);
    this._templateString = `
  <div class="DataCategoriesPage">
    <div>
      <div class="DataCategoriesPage_Country" data-attach-point="_divCountrySelect"></div>
      <div class="DataCategoriesPage_Search" data-attach-point="_txbSearchDiv"></div>
    </div>
    <div>
      <div class="DataCategoriesPage_Pagination">
        <div data-attach-point="_paginationDiv"></div>
      </div>
      <div data-attach-point="_progressDiv"></div>
    </div>
    <div>
      <div class="esri4GEWizard_Link DataCategoriesPage_ShowFavorites" data-attach-point="_spnShowFavorites"></div>
    </div>
  </div>`;
    /**
     * Country box widget or Boolean (default country box will be created).
     */
    this.countryBox = true;
    this.allowHierarchies = false;
    this._innerChange = false;
  }
  postCreate() {
    super.postCreate();
    // COUNTRY
    if (this.countryBox && this._getVariableStore().countries && this._divCountrySelect) {
      this._countrySelect =
        this.countryBox === true
          ? new CountrySelect()
          : typeof this.countryBox === "object" && this.countryBox.domNode
            ? this.countryBox
            : null;
      if (this._countrySelect) {
        this._countrySelect.globalCountryID = this._getVariableStore().globalCountryID;
        this._countrySelect.allowHierarchies = this.allowHierarchies;
        this._countrySelect.placeAt(this._divCountrySelect);
        this._countrySelect.onChange = () => {
          this._changeCountry(this._countrySelect.getValue());
        };
      }
    }
    this.countryBox = !!this._countrySelect;
    if (this._divCountrySelect) {
      this._divCountrySelect.style.display = this.countryBox ? "" : "none";
    }
    // SEARCH
    this._searchTextBox = new SearchTextBox({
      prompt: nls$3().search,
      onSearch: this._search.bind(this)
    }).placeAt(this._txbSearchDiv);
    // PAGINATION
    this._pagination = new Pagination({
      autoCenter: true,
      scrollAnimation: "fade2",
      createItemContainer: () => createCategoryNode(),
      updateItemContainer: (node, category) => {
        this._updateCategoryNode(node, category);
      },
      onSelect: this._onItemClick.bind(this)
    }).placeAt(this._paginationDiv);
    // FAVORITES
    on(this._spnShowFavorites, "click", this._showFavorites.bind(this));
    // APPLY BUTTON
    this.manager.watch("selection", this._updateApplyButtonAvailability.bind(this));
    this._updateApplyButtonAvailability();
    // Load countries & categories
    if (this.countryBox) {
      (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.w)(this._showProgress(this._getCountries())).then(this._onCountriesResponse.bind(this));
    }
    else {
      this._getCategories(true);
    }
  }
  _updateApplyButtonAvailability() {
    this._setButtonEnabled("apply", !!this.manager.selection.length);
  }
  _getVariableStore() {
    return this.manager.variables;
  }
  //--------------------------------------------------------------------------
  //
  // Working with countries
  //
  //--------------------------------------------------------------------------
  changeCountry(countryID) {
    // make sure async operations don't overlap
    return (this._changeCountryPromise = (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.w)(this._changeCountryPromise).then(() => {
      this._updateFavorites();
      if (this.countryBox) {
        return (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.w)(this._getCountries()).then(() => {
          this._setCountry(countryID);
        });
      }
      return this._changeCountry(this._toCountryBoxID(countryID));
    }));
  }
  _getCountries() {
    if (!this._getCountriesQuery && this.countryBox) {
      this._getCountriesQuery = (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.w)(this._getVariableStore().countries.query());
    }
    return this._getCountriesQuery;
  }
  _onCountriesResponse(countries) {
    this._countrySelect.setCountries(countries);
    this._setCountry(this.manager.variableQuery.countryID);
  }
  // This method is called when countryBox presents!!!
  // It changes selected value in the countrySelect and applies country change if necessary
  _setCountry(countryID) {
    const fullValue = this._toCountryBoxID(countryID);
    if (this._fullValueToQName(fullValue) !== this._fullValueToQName(this._countrySelect.getValue())) {
      this._innerChange = true;
      this._countrySelect.setValue(fullValue);
      this._innerChange = false;
      return this._changeCountry(this._countrySelect.getValue());
    }
    return null;
  }
  _changeCountry(countryFullValue) {
    if (this._innerChange || !this.domNode /* Already destroyed */) {
      return null;
    }
    const countryID = this._toCountryID(countryFullValue);
    this.onCountryChange(countryID);
    const preserveSelection = !this._paginationCountryID /* Loaded first time */ ||
      this._paginationCountryID === this._fullValueToQName(countryFullValue);
    this._paginationCountryID = this._fullValueToQName(countryFullValue);
    if (!preserveSelection) {
      this.manager.variableQuery = { countryID };
    }
    return this._getCategories(preserveSelection);
  }
  _toCountryBoxID(countryID) {
    return this._qNameToFullName(countryID || this._getVariableStore().globalCountryID) || null;
  }
  _toCountryID(countryFullValue) {
    return countryFullValue.countryID === this._getVariableStore().globalCountryID
      ? null
      : this._fullValueToQName(countryFullValue);
  }
  _fullValueToQName(countryFullValue) {
    return countryFullValue.countryID + (countryFullValue.hierarchyID ? "/" + countryFullValue.hierarchyID : "");
  }
  _qNameToFullName(countryID) {
    return {
      countryID: countryID.split("/")[0],
      hierarchyID: countryID.split("/")[1] || null
    };
  }
  //--------------------------------------------------------------------------
  //
  // Working with categories & favorites
  //
  //--------------------------------------------------------------------------
  _getCategories(preserveSelection) {
    let categoryPageIndex = 0;
    if (preserveSelection) {
      // save the previous pagination index
      categoryPageIndex = this._pagination.currentPage;
    }
    else {
      this.manager.selection = [];
    }
    this.manager.categoryPageIndex = categoryPageIndex;
    return this._showProgress(this.manager.getCategories().then((categories) => {
      this.items = categories;
      this._paginationCountryID = this._fullValueToQName(this._countrySelect.getValue()); // will case to the global id if needed
      if (preserveSelection) {
        this._pagination.setCurrentPageNoAnimation(this.manager.categoryPageIndex);
      }
      return (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.w)(this._getVariableStore().synchronize()).then(this._updateFavorites.bind(this));
    }));
  }
  _updateCategoryNode(node, category) {
    updateCategoryNode(node, category);
  }
  _updateFavorites() {
    if (this._spnShowFavorites) {
      this._spnShowFavorites.textContent =
        this._getVariableStore().favorites && this._getVariableStore().favorites.getItemsCount()
          ? nls$3().showFavorites
          : "";
    }
  }
  //--------------------------------------------------------------------------
  //
  // Resize
  //
  //--------------------------------------------------------------------------
  resize() {
    super.resize();
    this._pagination.resize();
  }
  //--------------------------------------------------------------------------
  //
  // Handle events
  //
  //--------------------------------------------------------------------------
  _onItemClick(node) {
    const clone = node.icon.cloneNode(true);
    removeClass(clone, "DataCategoryItemIcon");
    this.manager.flyAnim.fly(node.icon, "Breadcrumb_SelectCategory", null, clone);
    this.manager.variableQuery.categoryID = clone.getAttribute("categoryId");
    this.onSelect();
  }
  onSelect() { }
  _showFavorites() {
    this.manager.variableQuery.favorites = true;
    this.onSearch();
  }
  _search() {
    const key = this._searchTextBox.value;
    if (!key) {
      this._searchTextBox.value = "";
      return;
    }
    this.manager.variableQuery.searchString = key;
    this._showProgress(this.manager.queryVariables().then((results) => {
      if (results.length) {
        this._onSearch(results);
      }
      else {
        delete this.manager.variableQuery.searchString;
        this._searchTextBox.showTooltip((0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.s)(nls$3().noResults, { seachKey: key }));
        // Maintaining focus on the search box
        this._searchTextBox.focus();
      }
    }));
  }
  _onSearch(results) {
    this.onSearch(results);
  }
  onSearch(_results) { }
  onCountryChange(_countryID) { }
};
__decorate([
  y$r()
], DataCategoriesPage.prototype, "manager", void 0);
__decorate([
  y$r()
], DataCategoriesPage.prototype, "countryBox", void 0);
__decorate([
  y$r()
], DataCategoriesPage.prototype, "allowHierarchies", void 0);
__decorate([
  y$r()
], DataCategoriesPage.prototype, "pageIsActive", null);
__decorate([
  y$r()
], DataCategoriesPage.prototype, "items", null);
__decorate([
  y$r()
], DataCategoriesPage.prototype, "onSelect", null);
__decorate([
  y$r()
], DataCategoriesPage.prototype, "onSearch", null);
__decorate([
  y$r()
], DataCategoriesPage.prototype, "onCountryChange", null);
DataCategoriesPage = __decorate([
  i$X()
], DataCategoriesPage);

const nls$2 = (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.a)("DataBrowser").DataCollectionsPage;
let DataCollectionsPage = class DataCollectionsPage extends WizardPage {
  //--------------------------------------------------------------------------
  //
  // Getters & setters
  //
  //--------------------------------------------------------------------------
  // ACTIVATE
  set pageIsActive(value) {
    this._set("pageIsActive", value);
    if (this._grid) {
      this._grid.setVariables([]);
      this._pagination.items = [];
      this._searchTextBox.value = "";
    }
    value && this._querySelectedCategory();
  }
  // ITEMS
  set items(items) {
    this._pagination.items = items;
    this.resize();
    if (this.lastDataCollectionID) {
      const items = this._pagination.items;
      for (let index = 0; index < items.length; index++) {
        const item = items[index];
        if (item.id === this.lastDataCollectionID) {
          this._pagination.selectPageByItemIndex(index, true);
          break;
        }
      }
      this.lastDataCollectionID = null;
    }
  }
  //--------------------------------------------------------------------------
  //
  // Initialization
  //
  //--------------------------------------------------------------------------
  constructor(params, refNode, position) {
    super(params, refNode, position);
    this._templateString = `
  <div class="DataCollectionsPage">
    <div>
      <div class="BreadcrumbHeight"></div>
      <div class="DataCollectionsPage_Panel DataCollectionsPage_PanelTop">
        <div class="esri4GEDataBrowserVarHeader DataCollectionsPage_Header" data-attach-point="_categoryName"></div>
        <div class="DataCollectionsPage_Search" data-attach-point="_txbSearchDiv"></div>
        <div class="esri4GEDataBrowserVarHeader DataCollectionsPage_Header">
          ${nls$2.mapPopVar}
        </div>
        <div data-attach-point="_divVariables" class="DataCollectionsPage_PopularVariables"></div>
        <div class="esri4GEDataBrowserVarHeader DataCollectionsPage_Header">
          ${nls$2.keepBrowse}
        </div>
      </div>
    </div>
    <div class="DataCollectionsPage_ContentPane_DataCollectionContainer">
      <div class="DataCollectionsPage_DataCollectionContainer">
        <div data-attach-point="_paginationDiv"></div>
      </div>
      <div data-attach-point="_progressDiv"></div>
    </div>
    <div class="DataCollectionsPageBottomContainer">
      <div class="DataCollectionsPage_Panel DataCollectionsPage_PanelBottom">
        <div data-attach-point="_spnShowAll" class="esri4GEWizard_Link DataCollectionsPage_ShowAll"></div>
      </div>
    </div>
  <div>`;
  }
  postCreate() {
    super.postCreate();
    // SEARCH
    this._searchTextBox = new SearchTextBox({
      prompt: (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.a)("DataBrowser").DataCollectionsPage.search,
      onSearch: this._search.bind(this)
    }).placeAt(this._txbSearchDiv);
    // VARIABLES
    this._grid = this.manager.createVariableGrid({ groupCategories: false }, this._divVariables);
    // PAGINATION
    this._pagination = new Pagination({
      autoCenter: true,
      scrollAnimation: "slide",
      createItemContainer: () => {
        const container = create("div", { class: "DataCollectionButtonContainer" });
        create("div", { class: "DataCollectionButton esriGEClickable esriGETrimWithEllipses" }, container);
        return container;
      },
      updateItemContainer: (node, item) => {
        node.children[0].textContent = item.title;
        node.data = item;
      },
      onSelect: this._onSelectCollection.bind(this)
    }).placeAt(this._paginationDiv);
    // APPLY BUTTON
    this.manager.watch("selection", this._updateApplyButtonAvailability.bind(this));
    this._updateApplyButtonAvailability();
    // SHOW ALL
    on(this._spnShowAll, "click", this._showAll.bind(this));
    // Show category data
    this._querySelectedCategory();
  }
  _updateApplyButtonAvailability() {
    this._setButtonEnabled("apply", !!this.manager.selection.length);
  }
  //--------------------------------------------------------------------------
  //
  // Work with data collections
  //
  //--------------------------------------------------------------------------
  _querySelectedCategory() {
    // We query the required category and, if category found, populate the page.
    // This query can be async because data browser can start from the categories page.
    // When a category is received, all other queries will be sync.
    this._showProgress((0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.w)(this.manager.getCategory()).then((category) => {
      if (category) {
        this._showCategory(category);
      }
    }));
  }
  _showCategory(category) {
    this._prepareCategoryTitle(category);
    this._spnShowAll.textContent = (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.s)(nls$2.showAll, { categoryName: category.name });
    const variables = this.manager.variables.getPopularVariables(category, {
      sort: [{ attribute: "popularity", descending: true }],
      start: 0,
      count: 3
    });
    this._grid.setVariables(variables);
    const query = this.manager.composeQuery("categoryID");
    (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.w)(this._getDataCollections(query, { sort: [{ attribute: "title" }] })).then((dataCollections) => {
      this.items = dataCollections;
    });
  }
  // Could be overriden to query additional data collections
  _getDataCollections(query, options) {
    return this.manager.variables.dataCollections.query(query, options);
  }
  _prepareCategoryTitle(category) {
    this._categoryName.textContent = (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.s)(nls$2.categoryName, { categoryName: category.name });
  }
  //--------------------------------------------------------------------------
  //
  // Resize
  //
  //--------------------------------------------------------------------------
  resize() {
    super.resize();
    this._pagination.resize();
  }
  //--------------------------------------------------------------------------
  //
  // Handle events
  //
  //--------------------------------------------------------------------------
  _onSelectCollection(selectedCollectionNode) {
    const selectedCollection = selectedCollectionNode.data;
    if (!isBodyLtr()) {
      const pos = position(selectedCollectionNode);
      const right = window.innerWidth - pos.x - pos.w;
      selectedCollectionNode.style.right = "" + right + "px";
    }
    this._animateButtonClick(selectedCollectionNode);
    if (!isBodyLtr()) {
      selectedCollectionNode.style.right = "auto";
    }
    this.manager.variableQuery.dataCollectionID = selectedCollection.id;
    this.onSelect();
  }
  _animateButtonClick(button) {
    return this.manager.flyAnim.fly(button.children[0], "Breadcrumb_SelectDC");
  }
  _showAll() {
    this.manager.variableQuery.searchString = "*";
    this.onSelect();
  }
  _search() {
    const key = this._searchTextBox.value;
    if (!key) {
      this._searchTextBox.value = "";
      return;
    }
    this.manager.variableQuery.searchString = key;
    this._showProgress(this.manager.queryVariables().then((results) => {
      if (results.length) {
        this._onSearch(results);
      }
      else {
        delete this.manager.variableQuery.searchString;
        this._searchTextBox.showTooltip((0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.s)(nls$2.noResults, { seachKey: key }));
      }
    }));
  }
  _onSearch(results) {
    this.onSelect(results);
  }
  onSelect(_results) { }
};
__decorate([
  y$r()
], DataCollectionsPage.prototype, "manager", void 0);
__decorate([
  y$r()
], DataCollectionsPage.prototype, "lastDataCollectionID", void 0);
__decorate([
  y$r()
], DataCollectionsPage.prototype, "pageIsActive", null);
__decorate([
  y$r()
], DataCollectionsPage.prototype, "items", null);
__decorate([
  y$r()
], DataCollectionsPage.prototype, "onSelect", null);
DataCollectionsPage = __decorate([
  i$X()
], DataCollectionsPage);

function compareMissingValues(a, b, descending, _missingDescending) {
  const missingDescending = _missingDescending === undefined ? descending : _missingDescending;
  const amissing = a === undefined || a === null;
  const bmissing = b === undefined || b === null;
  if (amissing !== bmissing) {
    const result = amissing ? -1 : 1;
    return missingDescending ? -result : result;
  }
  return amissing ? 0 : null;
}
/**
 * The sort function used for sorting string values.
 * Use this function to sort an array alphabetically. E.g. array.sort(ObjectUtil.compareString);
 * @param a String to compare.
 * @param b String to compare.
 * @param descending The order of sorting. If true, the values will be sorted in a descending order.
 * @param missingDescending The order of sorting null and undefined values. Defaults to the value of 'descending' parameter.
 * @returns A number indicating whether a first string comes before or after or is the same as the second value in sort order.
 */
function compareString(a, b, descending, missingDescending) {
  let result = compareMissingValues(a, b, descending, missingDescending);
  if (result !== null) {
    return result;
  }
  // convert to String
  a = String(a);
  b = String(b);
  result = a.localeCompare(b);
  return descending ? -result : result;
}
/**
 * The sort function used for sorting an array.The type of the objects in the array are determined automatically.
 * E.g. array.sort(ObjectUtil.compare);
 * @param a Value to compare.
 * @param b Value to compare.
 * @param descending The order of sorting. If true, the values will be sorted in a descending order.
 * @param missingDescending The order of sorting null and undefined values. Defaults to the value of 'descending' parameter.
 * @returns A number indicating whether a first value comes before or after or is the same as the second value in sort order
 */
function compare(a, b, descending, missingDescending) {
  let result = compareMissingValues(a, b, descending, missingDescending);
  if (result !== null) {
    return result;
  }
  let compareType = typeof a;
  if (typeof b !== compareType) {
    compareType = "";
  }
  switch (compareType) {
    case "number":
    case "boolean":
      break;
    case "object":
      a = a.valueOf();
      b = b.valueOf();
      break;
    default:
      return compareString(String(a), String(b), descending, missingDescending);
  }
  result = a > b ? 1 : a < b ? -1 : 0;
  return descending ? -result : result;
}

// geoenrichment.utils
function createSimpleQueryEngine() {
  return function (query, options) {
    return (data) => {
      // execute the whole query, first we filter
      const queryFunc = typeof query === "function"
        ? query
        : (object) => {
          for (const key in query) {
            const required = query[key];
            if (required && typeof required.test === "function") {
              // an object can provide a test method, which makes it work with regex
              if (!required.test(object[key], object)) {
                return false;
              }
            }
            else if (required !== object[key]) {
              return false;
            }
          }
          return true;
        };
      let results = data.filter(queryFunc);
      // next we sort
      const sortSet = options && options.sort;
      if (sortSet) {
        results.sort(typeof sortSet === "function"
          ? sortSet
          : (a, b) => {
            let sortItem;
            for (let i = 0; i < sortSet.length; i++) {
              sortItem = sortSet[i];
              const compareResult = compare(a[sortItem.attribute], b[sortItem.attribute], sortItem.descending);
              if (compareResult !== 0) {
                return compareResult;
              }
            }
            return 0;
          });
      }
      // now we paginate
      if (options && (options.start || options.count)) {
        const total = results.length;
        results = results.slice(options.start || 0, (options.start || 0) + (options.count || Infinity));
        results.total = total;
      }
      return results;
    };
  };
}

// esri4.core
class SelectableTree extends n$F {
  //-----------------------------------------
  // Constructor
  //-----------------------------------------
  /**
   * @param rootNodes                   Array of root tree nodes.
   * @param options.idProperty          The identity property.
   * @param options.rootLabel           Root label.
   * @param options.autoIdentify        The mode of creation an identity. Default is true, which means auto creation of unique IDs for all nodes.
   *                                    If false, the ID value should be already provided with tree nodes.
   */
  constructor(rootNodes, options) {
    super();
    //-----------------------------------------
    // Events
    //-----------------------------------------
    // this.emit("updated") if the tree content is updated
    //-----------------------------------------
    // Instance properties
    //-----------------------------------------
    this.idProperty = "id";
    /**
     * True means autocreation of ID property on construction.
     */
    this.autoIdentify = true;
    /**
     * Default query engine.
     */
    this.queryEngine = createSimpleQueryEngine();
    if (options && options.idProperty) {
      this.idProperty = options.idProperty;
    }
    if (options && options.autoIdentify !== undefined) {
      this.autoIdentify = options.autoIdentify;
    }
    this.root = {
      label: options && options.rootLabel,
      deepness: -1,
      selectCount: 0,
      leafCount: 0,
      children: rootNodes || []
    };
    this._hash = {};
    // Start auto identity if necessary
    if (this.idProperty && this.autoIdentify) {
      this._autoId = 1;
    } // Should start from 1!
    this._initializeNode(this.root, 0);
    this.data = this.root.children;
  }
  //-----------------------------------------
  // Initialize node
  //-----------------------------------------
  _initializeNode(node, deepness) {
    node.selected = !!node.selected; // Boolean
    // Initialize counts for a leaf.
    // If leafCount is already initialized with a number, we don't change it.
    // So, we can associate any nonnegative "weight" with a leaf.
    // Zero weight is also allowed!
    if (!node.children) {
      if (typeof node.leafCount !== "number") {
        node.leafCount = 1;
      }
      node.selectCount = node.selected ? node.leafCount : 0;
      return;
    }
    // Initialize a branch
    node.selectCount = 0;
    node.leafCount = 0;
    node.children.forEach((child) => {
      this._registerNode(child);
      child.parent = node;
      child.deepness = deepness;
      this._initializeNode(child, deepness + 1);
      node.selectCount += child.selectCount;
      node.leafCount += child.leafCount;
    });
    // Update the selected state in the case when it can be detemined
    if (!node.selectCount) {
      node.selected = false;
    }
    else if (node.selectCount === node.leafCount) {
      node.selected = true;
    }
  }
  //-----------------------------------------
  // Test on owning
  //-----------------------------------------
  /**
   * @param node            Node to test.
   * @param skipRoot        True means that the root node is disallowed in the testing,
   * @returns true if the given node is owned by the tree.
   */
  isOwned(node, skipRoot = false) {
    if (!skipRoot && node === this.root) {
      return true;
    }
    const registeredNode = this.get(this.getIdentity(node));
    return registeredNode === node;
  }
  _registerNode(node) {
    if (this._autoId && node[this.idProperty] === undefined) {
      node[this.idProperty] = this._autoId++;
    }
    if (this.idProperty) {
      this._hash[node[this.idProperty]] = node;
    }
  }
  _unregisterNode(node) {
    if (this.isOwned(node, true)) {
      delete this._hash[node[this.idProperty]];
    }
  }
  //-----------------------------------------
  // Clear
  //-----------------------------------------
  /**
   * Clears the tree and removes the binding in all its tree nodes.
   */
  clear() {
    if (this.root.children.length) {
      this.root.children.forEach((child) => {
        this._unbindNode(child);
      });
      this.data = this.root.children = [];
    }
  }
  /**
   * Destroys the binding of all tree nodes.
   */
  destroy() {
    this.clear();
  }
  _unbindNode(node) {
    if (node.children) {
      node.children.forEach((child) => {
        delete child.parent; // Avoid propogation of _incrementCounts
        this._unbindNode(child);
      });
    }
    this._unregisterNode(node);
    if (node.parent) {
      this._incrementCounts(node.parent, -node.selectCount, -node.leafCount);
      delete node.parent;
    }
  }
  //-----------------------------------------
  // Remove nodes
  //-----------------------------------------
  /**
   * Removes nodes from the tree.
   * @param nodes       An array of nodes to remove.
   * @param silent      An array of nodes to remove.
   */
  removeNodes(nodes, silent = false) {
    nodes &&
      nodes.slice().forEach((node) => {
        if (!this.isOwned(node, true)) {
          return;
        }
        const parent = node.parent;
        const i = parent.children.indexOf(node);
        if (i >= 0) {
          parent.children.splice(i, 1);
        }
        this._unbindNode(node);
      });
    !silent && this.emit("updated");
  }
  //-----------------------------------------
  // Add nodes
  //-----------------------------------------
  /**
   * Adds nodes to children of the given tree node.
   * @param nodes       Adds nodes to children of the given tree node.
   * @param parent      Adds nodes to children of the given tree node.
   * @param silent      Adds nodes to children of the given tree node.
   */
  addNodes(nodes, parent, silent = false) {
    if (!parent) {
      parent = this.root;
    }
    else if (!this.isOwned(parent) || !parent.children) {
      return false;
    }
    const deepness = parent.deepness + 1;
    let selectCount = 0;
    let leafCount = 0;
    nodes.forEach((node) => {
      if (this.isOwned(node)) {
        return;
      } // Avoid adding a node twice
      parent.children.push(node);
      this._registerNode(node);
      node.parent = parent;
      node.deepness = deepness;
      this._initializeNode(node, deepness + 1);
      selectCount += node.selectCount;
      leafCount += node.leafCount;
    });
    this._incrementCounts(parent, selectCount, leafCount);
    !silent && this.emit("updated");
    return true;
  }
  //-----------------------------------------
  // Selection/deselection
  //-----------------------------------------
  /**
   * Selects a node and all its descendants.
   * @param selectionLimit  The optional selectionLimit parameter limits the maximum number of leaves to be selected
   *                        in the whole tree. With this limit exceeded, the method tries to select as more leaves in the tree as possible.
   *
   * @returns true if selection was successful and false in the case when some leaves were not selected because the selection limit was achieved.
   */
  select(node, selectionLimit) {
    return this.changeSelect(node, true, selectionLimit);
  }
  /**
   * Deselects a node and all its descendants.
   */
  deselect(node) {
    this.changeSelect(node, false);
  }
  /**
   * Selects/deselects a node and all its descendants.
   */
  changeSelect(node, selected, selectionLimit) {
    selectionLimit = selectionLimit || this.root.leafCount;
    if (!node) {
      return false;
    }
    selected = !!selected;
    const increment = (selected ? node.leafCount : 0) - node.selectCount;
    const canChangeSelect = increment < 0 || this.root.selectCount + increment <= selectionLimit;
    // Try change select for a leaf
    if (!node.children) {
      if (canChangeSelect) {
        node.selected = selected;
        if (increment) {
          this._incrementCounts(node, increment);
        }
      }
      return canChangeSelect;
    }
    // Try change select for a branch
    if (canChangeSelect) {
      node.selected = selected;
    }
    node.children.forEach((child) => {
      this.changeSelect(child, selected, selectionLimit);
    });
    return canChangeSelect;
  }
  _incrementCounts(node, increment, leafIncrement) {
    node.selectCount += increment;
    if (leafIncrement) {
      node.leafCount += leafIncrement;
    }
    if (!node.selectCount) {
      node.selected = false;
    }
    else if (node.selectCount === node.leafCount) {
      node.selected = true;
    }
    if (node.parent) {
      this._incrementCounts(node.parent, increment, leafIncrement);
    }
  }
  //-----------------------------------------
  // Get Selection State
  //-----------------------------------------
  /**
   * @returns selection state of a node that is a value from true|false|"mixed".
   */
  getSelectionState(node) {
    if (!this.isOwned(node)) {
      return false;
    }
    return node.selectCount && node.selectCount !== node.leafCount ? "mixed" : (node.selected = !!node.selectCount);
  }
  //-----------------------------------------
  // Collect nodes
  //-----------------------------------------
  /**
   * @param leavesOnly      The leavesOnly parameters affects on branch nodes whose all descendand leaves
   *                        are selected. If leavesOnly is missing or false, the whole branch node
   *                        will be added to results. Otherwise, its descending leaves will be added.
   * @returns an array of selected nodes.
   */
  getSelectedNodes(leavesOnly) {
    return this.getDescendingNodes(this.root, true, leavesOnly);
  }
  /**
   * This method can be used to test a precondition before selecting/unselecting a branch node.
   * @param leavesOnly      The leavesOnly parameters affects on branch nodes whose all descendand leaves
   *                        will be added to results. Otherwise, its descending leaves will be added.
   * @returns an array of decsending nodes which have the given state.
   */
  getDescendingNodes(node, selected, leavesOnly) {
    if (!this.isOwned(node)) {
      return [];
    }
    const collectedNodes = [];
    this._collectNodes(node.children, collectedNodes, selected, leavesOnly);
    return collectedNodes;
  }
  _collectNodes(nodes, collectedNodes, selected, leavesOnly) {
    nodes.forEach((node) => {
      const matchCount = selected === null || selected === undefined
        ? node.leafCount
        : selected
          ? node.selectCount
          : node.leafCount - node.selectCount;
      if (!matchCount) {
        return;
      }
      if (!node.children || (!leavesOnly && matchCount === node.leafCount)) {
        collectedNodes.push(node);
      }
      else {
        this._collectNodes(node.children, collectedNodes, selected, leavesOnly);
      }
    });
  }
  //-----------------------------------------
  // Inspect children of a tree node
  //-----------------------------------------
  /**
   * Inspects children of a tree node in the order specified by an optional sorting function.
   * @param node            A node whose child nodes are inspected. The null value means the root node of the tree.
   * @param inspector       Function(node). Here the 'node' parameter is the currently inspected node.
   *                        The inspector function could control the process of nodes inspection by a value returned:
   *                        - undefined   no control
   *                        - true        allows to inspect the next node including the child nodes of the given node.
   *                        - false       allows to inspect the next sibling node but disallows inspection of the child nodes of the given node.
   *                        - null        stops inspection
   * @param sorting         Function (obj1, obj2) => number.
   *                        An optional sorting function controlling the order of nodes inspections.
   *                        If it is missing, the tree nodes are inspected in the natural order.
   * @param scope           An optional scope of execution the inspector function.
   */
  inspectChildren(node, inspector, sorting, scope) {
    if (scope) {
      inspector = inspector.bind(scope);
    }
    node = node || this.root;
    let children = node.children;
    if (children && sorting) {
      children = children.slice();
      children.sort(sorting);
    }
    return children.every((node) => {
      const result = inspector(node);
      return result === null
        ? false
        : result === false || !node.children
          ? true
          : this.inspectChildren(node, inspector, sorting);
    });
  }
  //-----------------------------------------
  // Nodes expansion interface
  //-----------------------------------------
  /**
   * Updates Boolean 'expanded' property of all branch nodes and provides all 'visible' nodes with 'isOdd' property value.
   * @param expandedBranches    A cache of branch nodes whose expanded value is already known. A key is a node ID and its value is Boolean.
   * @param sorting             An optional tree nodes sorting function.
   */
  updateExpandedNodes(expandedBranches, sorting) {
    // Inspect all branch nodes
    for (const id in this._hash) {
      const node = this._hash[id];
      this.updateExpand(node, !!expandedBranches[id]);
    }
    // Inspect all visible nodes and update their isOdd property
    this._updateOddEven(null, sorting);
  }
  /**
   * Updates Boolean 'expanded' property of the given branch node and provides all 'visible' nodes
   * with 'isOdd' property value (0 or 1).
   * @param node                        A node to be updated.
   * @param expanded                    Expand value.
   * @param collectOddEvenChanges       Allows collecting 'visible' nodes whose 'isOdd' property value was changed.
   *                                    in this case, the result of this method will be a cache of node IDs as keys
   *                                    with their 'isOdd' property values.
   * @param sorting                     An optional tree nodes sorting function.
   *
   * @returns a cache of changed nodes or an empty object if changes were not collected.
   */
  updateExpand(node, expanded, collectOddEvenChanges = false, sorting) {
    if (!node) {
      return null;
    }
    let changed = false;
    if (node.children) {
      if (node.expanded !== expanded) {
        changed = true;
        node.expanded = expanded;
      }
    }
    const cache = {};
    if (changed && collectOddEvenChanges) {
      this._updateOddEven(cache, sorting);
    }
    return cache;
  }
  _updateOddEven(cache, sorting) {
    let isOdd = true;
    this.inspectChildren(null, (node) => {
      if (node.visible !== false) {
        isOdd = !isOdd;
      }
      if (cache && node.isOdd !== isOdd) {
        cache[this.getIdentity(node)] = isOdd;
      }
      node.isOdd = isOdd;
      return !!(node.children && node.expanded); // Boolean
    }, sorting, this);
  }
  /**
   * @returns true if the given node has an odd index.
   */
  isOdd(node) {
    return node && node.isOdd;
  }
  //-----------------------------------------
  // store interface
  //-----------------------------------------
  /**
   * Returns a stored node by id.
   */
  get(id) {
    return this._hash[id];
  }
  /**
   * Returns the node identity value.
   */
  getIdentity(node) {
    return this.idProperty ? node[this.idProperty] : null;
  }
  /**
   * Queries root nodes.
   */
  query(query, options) {
    return this._query(this.data, query, options);
  }
  _query(data, query, options) {
    return this.queryEngine(query, options)(data);
  }
  /**
   * Tests children availability
   */
  mayHaveChildren(node) {
    return !!node.children;
  }
}

// geoenrichment.utils
/**
 * Invokes a specified method of a given object after the given delay.
 * Allows to invoke a method multiple times, but call it only once.
 * @param object An object.
 * @param methodName A name of method to be called.
 * @param timeout A timeout to call this method after.
 * If it is missing or null and this method was already invoked before,
 * the previous invocation promise will be returned.
 * @param clearPreviousTimeout If the false value is passed and this method was already invoked before,
 * the previous invocation promise will be returned.
 * Otherwise, the waiting will start over again with the specified timeout.
 * @param args Arguments to be passed to the method.
 * @returns A promise resolved with the result of the method call.
 */
function invoke(object, methodName, timeout, clearPreviousTimeout, args) {
  const obj = object;
  // create an internal hash if necessary
  if (!obj.__invokeInfo) {
    obj.__invokeInfo = {};
  }
  let invokeInfo = obj.__invokeInfo[methodName];
  // check if need to remove the previous record
  if (invokeInfo) {
    if (timeout == null /* null or undefined */ || clearPreviousTimeout === false) {
      return invokeInfo.dfd.promise;
    }
    clearTimeout(invokeInfo.handle);
  }
  // create an info object
  if (!invokeInfo) {
    invokeInfo = {
      dfd: (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.c)(),
      handle: null
    };
    obj.__invokeInfo[methodName] = invokeInfo;
  }
  // start the timer
  invokeInfo.handle = setTimeout(() => {
    obj.__invokeInfo[methodName] = undefined;
    (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.w)(args ? obj[methodName].apply(obj, args) : obj[methodName]()).then((result) => {
      invokeInfo.dfd.resolve(result);
    }, (error) => {
      invokeInfo.dfd.reject(error);
    });
  }, timeout || 0);
  return invokeInfo.dfd.promise;
}

/**
 * Registers a node as a button - sets "tabindex", "aria-label" and install the keyboard events listener.
 * @param node A button node.
 * @param listener A listener to be called on Enter/Return key press.
 * @param label Aria label.
 */
function registerButton(node, listener, label, tabIndex) {
  tabIndex && node.setAttribute("tabindex", tabIndex);
  label && node.setAttribute("aria-label", label);
  on(node, "keydown", (e) => {
    if (e.keyCode === 13) {
      // The Enter/Return key
      listener(e);
    }
  });
}

/**
 * Checkbox widget.
 *
 * @example
 * 1. Stand-alone checkbox with no label, placed inside a div.
 *      const checkbox = new TriStateItem({ checked: "mixed" }, divNode);
 *
 * 2. In-label checkbox.
 *      const checkbox = new TriStateItem({ checked: true }, labelNode);
 *
 * 3. In-label checkbox created from text.
 *      const checkbox = new TriStateItem({ checked: true, labelText: "This text will appear in a new label" }, divNode);
 *      checkbox.onClick = () => { }; // click handler
 */
let TriStateItem = class TriStateItem extends TemplatedWidget {
  /**
   * On click connector function.
   * The event.checked property contains the current checked state of this item.
   */
  onClick(_event) { }
  //--------------------------------------------------------------------------
  //
  // Getters & setters
  //
  //--------------------------------------------------------------------------
  get scale() {
    return this._checkbox.scale;
  }
  // 12x15, 14x17, 16x19
  set scale(value) {
    if (this._checkbox) {
      this._checkbox.scale = value;
      replaceClass(this._checkboxNode, "scale_" + value, "scale_s scale_m scale_l");
    }
    else {
      this._initialScale = value;
    }
  }
  get checked() {
    return this._checked;
  }
  set checked(value) {
    if (value === "mixed") {
      this._checked = value;
    }
    else {
      this._checked = this._lastChecked = !!value;
    }
    if (this._checkbox) {
      this._checkbox.indeterminate = value === "mixed";
      this._checkbox.checked = this._lastChecked;
    }
  }
  get disabled() {
    return this._disabled;
  }
  set disabled(value) {
    this._disabled = value;
    this._checkbox && (this._checkbox.disabled = value);
  }
  get shadowRootReady() {
    return this._shadowRootReadyPromise
      ? this._shadowRootReadyPromise // we need to store this ended promise for shadowRootReady property
      : (this._shadowRootReadyPromise = new Promise((resolve) => {
        const observer = new MutationObserver((records, _) => {
          observer.disconnect(); // calcite adds these nodes by whole piece, so we can disconnect after recieving anything
          if (records[0].addedNodes[0].tagName === "STYLE") {
            // in firefox calcite injects additional <style> block
            resolve(records[1].addedNodes[0]);
          }
          else {
            // in chrome there's only one div.container block
            resolve(records[0].addedNodes[0]);
          }
        });
        observer.observe(this._checkbox.shadowRoot, { childList: true, subtree: true });
      }));
  }
  get inputNode() {
    var _a;
    return ((_a = this._inputNode) !== null && _a !== void 0 ? _a : (this._inputNode = this.shadowRootReady.then((_) => this._checkbox.querySelector("input"))));
  }
  set ariaLabel(text) {
    this._ariaLabel = text;
    this._focusNode && this._focusNode.setAttribute("aria-label", text);
  }
  get ariaLabel() {
    return this._ariaLabel;
  }
  get focusNode() {
    return this._focusNode;
  }
  //--------------------------------------------------------------------------
  //
  // Initialization
  //
  //--------------------------------------------------------------------------
  /**
   * Ctor.
   * @example
   * const checkbox = new TriStateItem(null, this._checkboxLabel);
   *
   * @param params Checkbox parameters.
   *
   * If labelText is specified, the checkbox will be wrapped with label having this text.
   * If refNode is a label element, this text will be assigned to it.
   * Otherwise, a new label element will be created and will be set as domNode.
   * In this case, the additional labelAttrs can be provided for the label element.
   *
   * @param refNode A reference node to ADD checkbox into.
   * Opposite to other widgets, checkbox node doesn't replace the reference node.
   * In other words, this constructor works the same way as DomUtil.create.
   *
   * If reference node is a label element, the checkbox is added as the first child
   * of the reference node and click on label will work the same way as click on checkbox.
   *
   * @param position Position to add checkbox into children of reference node.
   * If reference node is a label element, the position is ignored.
   */
  constructor(params, refNode, position) {
    super(params, refNode, position);
    this._lastChecked = false;
  }
  buildRendering() {
    let refNode = this._refNode;
    let labelNode;
    if (this.labelText) {
      if (refNode instanceof HTMLLabelElement) {
        refNode.innerHTML = "&nbsp;" + this.labelText;
      }
      else {
        const labelAttrs = this.labelAttrs || {};
        labelAttrs.innerHTML = "&nbsp;" + this.labelText;
        labelNode = create("label", labelAttrs);
        refNode && place(labelNode, refNode);
        refNode = labelNode;
      }
    }
    this._checkboxNode = create("div", null, refNode, refNode instanceof HTMLLabelElement ? "first" : this._refPosition);
    refNode instanceof HTMLLabelElement && (this._parentLabel = refNode);
    this.class && addClass(this._checkboxNode, this.class);
    this.domNode = labelNode || this._checkboxNode;
    delete this._refNode;
    delete this._refPosition;
  }
  postCreate() {
    // Can't assign default values in properties! They will override settings from parameters.
    if (this.autoToggle === undefined) {
      this.autoToggle = true;
    }
    if (this._checked === undefined) {
      this._checked = false;
    }
    if (this._disabled === undefined) {
      this._disabled = false;
    }
    // Create checkbox
    this._checkbox = document.createElement("calcite-checkbox");
    this._checkbox.checked = this._lastChecked;
    this._checkbox.indeterminate = this._checked === "mixed";
    this._checkbox.disabled = this._disabled;
    this._checkbox.className = "esriTriStateItemCalcite_checkbox";
    place(this._checkbox, this._checkboxNode);
    addClass(this._checkboxNode, "esriTriStateItemCalcite");
    // Set scale
    this.scale = this._initialScale || "m";
    const onClick = (e) => {
      e.stopPropagation();
      e.preventDefault();
      if (!this._disabled) {
        if (this.autoToggle) {
          this.toggle();
          e.checked = this.checked;
          this.onClick(e);
        }
        else {
          // The event anyway propagates to shadow root.
          // Need restore the state of checkbox on the next stage.
          setTimeout(() => {
            this._checkbox.indeterminate = this._checked === "mixed";
            this._checkbox.checked = this._lastChecked;
            e.checked = this.checked;
            this.onClick(e);
          });
        }
      }
    };
    // Add event listener
    const refNode = this._checkboxNode.parentElement;
    if (refNode instanceof HTMLLabelElement) {
      on(refNode, "click", onClick);
      addClass(refNode, "esriTriStateCheckBoxLabel");
      this._focusNode = refNode;
    }
    else {
      on(this._checkboxNode, "click", onClick);
      this._focusNode = this._checkboxNode;
    }
    this.enableTabbing && registerButton(this._focusNode, onClick);
    // Set aria-label
    const label = this._ariaLabel || this.labelText;
    label && (this.ariaLabel = label);
  }
  /**
   * Toggle checkbox.
   * @returns The new state.
   */
  toggle() {
    this._checkbox.indeterminate = false;
    this._checkbox.checked = this._checked = this._lastChecked = !this._lastChecked;
    return this._checked;
  }
  updateLabel(text) {
    if (this._parentLabel) {
      this._parentLabel.removeChild(this._checkboxNode);
      this._parentLabel.innerHTML = "&nbsp;" + text;
      place(this._checkboxNode, this._parentLabel, "first");
      this.ariaLabel = text;
    }
  }
};
__decorate([
  y$r({
    constructOnly: true
  })
], TriStateItem.prototype, "labelText", void 0);
__decorate([
  y$r({
    constructOnly: true
  })
], TriStateItem.prototype, "labelAttrs", void 0);
__decorate([
  y$r()
], TriStateItem.prototype, "onClick", null);
__decorate([
  y$r()
], TriStateItem.prototype, "autoToggle", void 0);
__decorate([
  y$r({
    constructOnly: true
  })
], TriStateItem.prototype, "enableTabbing", void 0);
TriStateItem = __decorate([
  i$X()
], TriStateItem);

// geoenrichment.utils
class SelectableTreeListRenderer extends FlowListDefaultItemRenderer {
  constructor() {
    super(...arguments);
    this.childLists = {};
    this._lastClickedItem = null;
    this._cache = {};
  }
  createPresentation(item, _, listNode, list) {
    const hasChildren = item.children && item.children.length;
    const root = hasChildren && create("div", { class: "childrenListRoot" }, listNode);
    const rowRoot = create("div", { class: "esriGETrimWithEllipses listItem" }, root || listNode);
    const expandoIcon = create("div", { class: "expandoIcon" }, rowRoot);
    const checkbox = new TriStateItem(null, rowRoot);
    checkbox.autoToggle = false;
    const itemBinding = {
      item,
      rowRoot,
      list,
      expandoIcon,
      checkbox
    };
    this._cache[item[this.idProperty]] = itemBinding;
    if (this.topList.rowRenderer) {
      this.topList.rowRenderer(item, rowRoot, checkbox, itemBinding);
    }
    else {
      create("div", { class: "itemSpacer", innerHTML: "&nbsp;" }, rowRoot);
      create("span", { textContent: item[this.topList.labelProperty] }, rowRoot);
    }
    // RENDER CHILDREN
    if (hasChildren) {
      const childrenListRoot = (itemBinding.childrenListRoot = create("div", { class: "childrenListRoot" }, root));
      childrenListRoot.style[isBodyLtr() ? "marginLeft" : "marginRight"] = (item.deepness + 1) * 20 + "px";
      // EXPANDE HANDLING
      on(expandoIcon, "click", () => {
        this.setExpanded(item, !item.expanded, false, true);
        this.topList.onExpandChangedUser(item);
      });
      this._handleExpand(item, false);
    }
    else {
      if (this.topList.hideInvisibleExpandoIcons) {
        expandoIcon.style.display = "none";
      }
      else {
        expandoIcon.style.opacity = "0.001";
      }
      expandoIcon.style.cursor = "default";
    }
    // SELECTION
    this.updateSelection(item);
    // CLICK HANDLING
    checkbox.onClick = (event) => {
      this.executeSelectionClick(item, event);
    };
    return rowRoot;
  }
  executeSelectionClick(item, event) {
    const selectionState = this.topList.getSelectedState(true);
    const info = this._cache[item[this.idProperty]];
    const items = info.list.items;
    if (event && event.shiftKey && this._lastClickedItem && items.indexOf(this._lastClickedItem) !== -1) {
      const fromIndex = items.indexOf(this._lastClickedItem);
      const toIndex = items.indexOf(item);
      const minIndex = Math.min(fromIndex, toIndex);
      const maxIndex = Math.max(fromIndex, toIndex);
      for (let i = minIndex; i <= maxIndex; i++) {
        const itemToToggle = items[i];
        if (itemToToggle !== this._lastClickedItem) {
          this.tree.changeSelect(itemToToggle, !this.tree.getSelectionState(itemToToggle));
        }
      }
    }
    else {
      this.tree.changeSelect(item, !this.tree.getSelectionState(item));
    }
    this._lastClickedItem = item;
    this.topList._onCheckboxClicked(selectionState, info.rowRoot);
  }
  updateSelection(item) {
    const info = this._cache[item[this.idProperty]];
    if (!info || !info.checkbox) {
      return; // isn't rendered yet
    }
    const value = this.tree.getSelectionState(item);
    info.checkbox.checked = value;
    toggleClass(info.rowRoot, "listItemSelected", !!value);
  }
  setExpanded(item, value, doNotUpdate, showAnimation) {
    if (!item.children || !item.children.length) {
      return; // not applicable
    }
    this.tree.updateExpand(item, value);
    if (!doNotUpdate) {
      this._handleExpand(item, showAnimation);
    }
  }
  _handleExpand(item, showAnimation) {
    const info = this._cache[item[this.idProperty]];
    if (!info) {
      return; // isn't rendered yet
    }
    toggleClass(info.expandoIcon, "open", !!item.expanded);
    if (!showAnimation) {
      item.expanded && this._provideChildrenList(item);
      item.expanded ? show(info.childrenListRoot) : hide(info.childrenListRoot);
    }
    else {
      this._provideChildrenList(item);
      show(info.childrenListRoot);
      animateProperty({
        obj: info.childrenListRoot.style,
        duration: 200,
        properties: {
          height: {
            start: item.expanded ? 0 : info.childrenList.domNode.clientHeight,
            end: item.expanded ? info.childrenList.domNode.clientHeight : 0,
            units: "px"
          }
        },
        onEnd: () => {
          !item.expanded && hide(info.childrenListRoot);
          info.childrenListRoot.style.height = "";
        }
      });
    }
  }
  _provideChildrenList(item) {
    const info = this._cache[item[this.idProperty]];
    if (!info || info.childrenList) {
      return;
    }
    const marginLeft = info.childrenListRoot.style.marginLeft;
    const marginRight = info.childrenListRoot.style.marginRight;
    info.childrenList = this.createList(info.childrenListRoot /* will be replaced */);
    info.childrenListRoot = info.childrenList.domNode;
    info.childrenList.domNode.className = "childrenListRoot";
    info.childrenList.domNode.style.marginLeft = marginLeft;
    info.childrenList.domNode.style.marginRight = marginRight;
    info.childrenList.itemRenderer = this; // so we can have a single cache of item bindings
    this.childLists[item[this.idProperty]] = info.childrenList;
    info.childrenList.items = item.children;
  }
  getItemBinding(item) {
    return this._cache[item[this.idProperty]];
  }
  selectPresentation(_rowRoot, _value, _item) {
    // does nothing
  }
  // must be overriden by the wizard to avoid cyclic dependencies
  createList(_nodeToReplace) {
    return null;
  }
}

var SelectableTreeList_1;
let SelectableTreeList = SelectableTreeList_1 = class SelectableTreeList extends FlowList {
  //--------------------------------------------------------------------------
  //
  // Initialization
  //
  //--------------------------------------------------------------------------
  constructor(params, refNode, position) {
    super(params, refNode, position);
    /**
     * If true, invisible expando icons will be hidden.
     */
    this.hideInvisibleExpandoIcons = false;
    this.hasSelectableItems = false;
    this.itemRenderer = new SelectableTreeListRenderer();
    this.keepScrollPosition = true;
  }
  postCreate() {
    addClass(this.domNode, "esri4GESelectableTreeList");
    super.postCreate();
  }
  _setStore(store) {
    this.itemRenderer.createList = (nodeToReplace) => new SelectableTreeList_1(null, nodeToReplace);
    this.itemRenderer.idProperty = this.idProperty = store.idProperty;
    this.itemRenderer.tree = store;
    this.itemRenderer.topList = this;
    this._setItems(this.itemRenderer.tree.data);
  }
  getTree() {
    return this.itemRenderer.tree;
  }
  // if the item isn't rendered yet, null will be returned.
  getItemBinding(item) {
    return this.itemRenderer.getItemBinding(item);
  }
  //--------------------------------------------------------------------------
  //
  // Work with checkbox selection
  //
  //--------------------------------------------------------------------------
  emulateManualSelectionToggle(item) {
    this.itemRenderer.executeSelectionClick(item);
  }
  isItemSelected(item) {
    return item && item.selected;
  }
  // considers indepSelection.
  getSelectedItems(leavesOnly) {
    return this.getTree() ? this.getTree().getSelectedNodes(leavesOnly) : [];
  }
  /**
   * Returns a cache, where key - item id, value - true if selected. False values are not included.
   */
  getSelectedState(leavesOnly) {
    const state = {};
    this.getTree() &&
      this.getTree()
        .getSelectedNodes(leavesOnly)
        .forEach((item) => {
        state[item[this.idProperty]] = true;
      });
    return state;
  }
  setSelectedState(state) {
    this.getTree().changeSelect(this.getTree().root, false); // unselect all first
    if (state) {
      for (const id in state) {
        const item = this.getTree().get(id);
        item && this.getTree().changeSelect(item, !!state[id]);
      }
    }
    this._refreshCheckboxes();
  }
  setItemSelected(item, value, doNotUpdate = false) {
    this.getTree().changeSelect(item, value);
    if (!doNotUpdate) {
      this._refreshCheckboxes();
    }
  }
  setItemsSelected(items, value, doNotUpdate = false) {
    items.forEach((item) => this.getTree().changeSelect(item, value));
    if (!doNotUpdate) {
      this._refreshCheckboxes();
    }
  }
  // used in item renderer
  _onCheckboxClicked(preSelectionState, rowRoot) {
    this._refreshCheckboxes();
    const currentState = this.getSelectedState(true);
    const selectedItems = [];
    for (const id in currentState) {
      if (currentState[id] && !preSelectionState[id]) {
        selectedItems.push(this.getTree().get(id));
      }
    }
    const unselectedItems = [];
    for (const id in preSelectionState) {
      if (preSelectionState[id] && !currentState[id]) {
        unselectedItems.push(this.getTree().get(id));
      }
    }
    this.onSelectionChanged({
      selectedItems,
      unselectedItems,
      clickNode: rowRoot
    });
  }
  _refreshCheckboxes() {
    function updateSelection(list) {
      list.items.forEach((item) => list.itemRenderer.updateSelection(item));
    }
    updateSelection(this);
    for (const id in this.itemRenderer.childLists) {
      updateSelection(this.itemRenderer.childLists[id]);
    }
  }
  // emitted on user action
  onSelectionChanged(_event) { }
  //--------------------------------------------------------------------------
  //
  // Work with expanded state
  //
  //--------------------------------------------------------------------------
  isExpanded(itemOrId) {
    const item = typeof itemOrId === "string" ? this.getTree().get(itemOrId) : itemOrId;
    return item && item.expanded;
  }
  setExpanded(itemOrId, value, doNotUpdate = false) {
    const item = typeof itemOrId === "string" ? this.getTree().get(itemOrId) : itemOrId;
    item && this.itemRenderer.setExpanded(item, value, doNotUpdate, false);
  }
  toggleExpand(itemOrId) {
    this.setExpanded(itemOrId, !this.isExpanded(itemOrId));
  }
  getExpandedState() {
    const state = {};
    this.getTree() &&
      this.getTree().inspectChildren(null, (item) => {
        if (item.children && item.children.length) {
          state[item[this.idProperty]] = !!item.expanded;
        }
        return true;
      });
    return state;
  }
  setExpandedState(state, doNotUpdate = false) {
    for (const id in state) {
      this.setExpanded(id, !!state[id], doNotUpdate);
    }
  }
  onExpandChangedUser(_item) { }
};
__decorate([
  y$r()
], SelectableTreeList.prototype, "hideInvisibleExpandoIcons", void 0);
__decorate([
  y$r()
], SelectableTreeList.prototype, "rowRenderer", void 0);
__decorate([
  y$r()
], SelectableTreeList.prototype, "hasSelectableItems", void 0);
__decorate([
  y$r()
], SelectableTreeList.prototype, "onSelectionChanged", null);
__decorate([
  y$r()
], SelectableTreeList.prototype, "onExpandChangedUser", null);
SelectableTreeList = SelectableTreeList_1 = __decorate([
  i$X()
], SelectableTreeList);

function _isVariableNode(node) {
  return !!node.variable;
}
let DataVariableGrid = class DataVariableGrid extends TemplatedWidget {
  //--------------------------------------------------------------------------
  //
  // Initialization
  //
  //--------------------------------------------------------------------------
  constructor(params, refNode, position) {
    super(params, refNode, position);
    /**
     * Used for saving expansion info.
     */
    this.queryID = "/";
    /**
     * True if variables have to be grouped into categories.
     */
    this.groupCategories = true;
    /**
     * Internal flag preventing selection listening.
     */
    this._inUpdate = false;
    /**
     * Expansion states hash. Used to save expanded state for a concrete search.
     */
    this._expansionCache = {};
  }
  postCreate() {
    addClass(this.domNode, "DataVariableGrid");
    this._treeList = new SelectableTreeList({
      rowRenderer: this._renderNode.bind(this),
      onSelectionChanged: this._onSelectionChanged.bind(this),
      hideInvisibleExpandoIcons: !this.groupCategories
      // treeIndentWidth = this.manager.variables.favorites ? 1 : this.manager.multipleSelectIsAllowed() ? 16 : 8;
    }).placeAt(this.domNode);
    this.setVariables([]); // Set an empty store
  }
  refresh() {
    this._treeList.refresh();
  }
  setVariables(variables) {
    // save the expanded state
    if (this.groupCategories) {
      this._expansionCache[this.queryID] = Object.assign(Object.assign({}, this._expansionCache[this.queryID]), this._treeList.getExpandedState());
    }
    this._cleanup();
    const nodes = this._prepareVariables(variables);
    if (nodes.length) {
      this._selectionHandler = this.manager.watch("selection", this._selectionUpdated.bind(this));
    }
    this._treeList.store = new SelectableTree(nodes);
    // EXPAND
    if (this.groupCategories && nodes.length) {
      const expandedState = (this._expansionCache[this.queryID] = this._expansionCache[this.queryID] || {});
      // Expand a single category.
      if (nodes.length === 1) {
        expandedState[nodes[0].id] = true;
      }
      this._treeList.setExpandedState(expandedState);
    }
  }
  _prepareVariables(variables) {
    return this.groupCategories
      ? this._prepareVariableCategories(variables)
      : variables.map((variable) => this._prepareVariableItem(variable));
  }
  _prepareVariableCategories(variables) {
    const categories = {};
    variables.forEach((variable) => {
      const category = variable.fieldCategory;
      let categoryNode = categories[category];
      if (!categoryNode) {
        categoryNode = { label: category, id: category, children: [] };
        categories[category] = categoryNode;
      }
      categoryNode.children.push(this._prepareVariableItem(variable));
    });
    const nodes = [];
    for (const category in categories) {
      nodes.push(categories[category]);
    }
    return this.manager.variables.queryEngine(null, { sort: [{ attribute: "label" }] })(nodes);
  }
  _prepareVariableItem(variable) {
    const node = this._prepareVariableNode(variable);
    node.id = this.manager.variables.getIdentity(variable);
    return node;
  }
  _prepareVariableNode(variable) {
    const node = {
      label: variable.description,
      variable,
      group: getToggleGroup(this.manager.variables, this.manager.variables.getIdentity(variable))
    };
    const selectionGroup = this.manager.getSelectionGroups().hash[node.group.value];
    if (selectionGroup) {
      node.selected = true;
      node.group.value = selectionGroup.value; // Synchronize selection states
    }
    return node;
  }
  //------------------------------------------------------------
  //
  // Rendering
  //
  //------------------------------------------------------------
  _renderNode(node, root, checkbox, itemBinding) {
    addClass(root, "esri4GEDataBrowserVarCell");
    return _isVariableNode(node)
      ? this._renderVariableNode(node, root, checkbox, itemBinding)
      : this._renderCategoryNode(node, root);
  }
  _renderVariableNode(node, root, checkbox, itemBinding) {
    function beforeCb(node) {
      node && place(node, checkbox.domNode, "before");
      return node;
    }
    function addToRoot(node, position) {
      node && place(node, root, position);
      return node;
    }
    // FAVORITE
    // Add an icon with favorite first
    if (this.manager.variables.favorites) {
      const icon = beforeCb(this._createVariableFavoriteIcon());
      if (icon) {
        const favoriteId = this._getFavoriteId(node);
        this._updateFavorite(icon, this.manager.variables.favorites.contains(favoriteId));
        on(icon, "click", () => {
          this._toggleFavorite(icon, favoriteId);
        });
        beforeCb(this._createSpacer());
      }
    }
    // CHECKBOX
    if (!this.manager.multipleSelectIsAllowed()) {
      checkbox.domNode.style.display = "none";
    }
    else {
      addToRoot(this._createSpacer());
    }
    // LABEL
    const label = create("div", { class: "esriGETrimWithEllipses esri4GEDataBrowserVarLabel", textContent: node.label }, root);
    // TOGGLE
    // Add a variable toggle if necessary
    if (node.group.states) {
      addToRoot(this._createSpacer());
      const toggle = new VariableToggle({
        states: node.group.states,
        value: node.group.value,
        onChange: () => {
          this._onVariableToggleChange(node, toggle);
        }
      }).placeAt(root);
      itemBinding.variableToggle = toggle; // to be used in this class later
    }
    // INFO
    // Add info icon for a variable node
    const icon = this._createInfoIcon();
    if (icon) {
      addToRoot(this._createSpacer());
      addToRoot(icon);
      setTooltipToNode(icon, () => {
        this.manager.variableInfo.variable = node.variable;
        return this.manager.variableInfo.domNode.outerHTML;
      }, {
        position: ["above", "below"],
        stayOnHover: true,
        hideOnClick: true
      });
    }
    if (this.manager.selectionLimit) {
      addClass(label, "esriGEClickable");
      on(label, "click", () => {
        this._treeList.emulateManualSelectionToggle(node);
      });
      if (this.manager.selectionLimit === 1) {
        addClass(root, "DataBrowser_Selectable");
      }
    }
  }
  _renderCategoryNode(node, root) {
    place(this._createSpacer(), root);
    // Add a BLOCK with text label having a dynamic width as the last child. The order is important!!!
    const label = create("div", { class: "esriGETrimWithEllipses esri4GEDataBrowserVarLabel", textContent: node.label }, root);
    addClass(label, "esriGEClickable");
    on(label, "click", () => {
      this._onCategoryExpand(node.id);
    });
  }
  _createVariableFavoriteIcon() {
    return create("div", { class: "esri4GEDataBrowserVarIcon FavoriteItemIcon" });
  }
  _getFavoriteId(node) {
    return node.id;
  }
  _createInfoIcon() {
    if (this.manager.variableInfo) {
      const icon = create("div", {
        class: "esri4GEDataBrowserVarIcon esri4GEInfoIcon"
      });
      return icon;
    }
    return null;
  }
  _createSpacer() {
    return create("div", {
      class: "esri4GEDataBrowserVarSpacer",
      innerHTML: "&nbsp;"
    });
  }
  _onCategoryExpand(id) {
    this._treeList.toggleExpand(id);
  }
  //------------------------------------------------------------
  //
  // Work with favorites
  //
  //------------------------------------------------------------
  _toggleFavorite(icon, favoriteID) {
    const favorites = this.manager.variables.favorites;
    if (!favorites.contains(favoriteID)) {
      favorites.add(favoriteID);
    }
    else {
      favorites.remove(favoriteID);
    }
    const isFavorite = favorites.contains(favoriteID);
    this._updateFavorite(icon, isFavorite);
    invoke(this, "_saveFavorites", 1000);
    return isFavorite;
  }
  _updateFavorite(icon, checked) {
    if (checked) {
      removeClass(icon, "FavoriteItem");
      addClass(icon, "FavoriteItemChecked");
    }
    else {
      removeClass(icon, "FavoriteItemChecked");
      addClass(icon, "FavoriteItem");
    }
  }
  // keep public to allow typing in invoke
  _saveFavorites() {
    this.manager.variables.favorites.save();
  }
  //------------------------------------------------------------
  //
  // Work with checkboxes and toggles
  //
  //------------------------------------------------------------
  // CHECKBOX
  _onSelectionChanged(event) {
    // Update the current selection. The _inUpdate internal flag blocks the _selectionUpdated method.
    this._inUpdate = true;
    this.manager.removeFromSelection(event.unselectedItems.map((item) => item.group.value));
    const selectedItems = event.selectedItems.slice();
    // make sure we don't add more than the allowed limit
    if (this.manager.selectionLimit > 0) {
      const prevNumber = selectedItems.length;
      selectedItems.length = Math.max(0, Math.min(selectedItems.length, this.manager.selectionLimit - this.manager.selection.length));
      if (selectedItems.length < prevNumber) {
        // we've reached the limit, need to unselect items in the tree list
        const itemsToUnselect = event.selectedItems.slice(selectedItems.length);
        this._treeList.setItemsSelected(itemsToUnselect, false);
      }
    }
    // Limit is also handled in the manager, so we just pass the selection as is and let it emit the "limit" event if needed
    let hasSelected = false;
    if (event.selectedItems.length) {
      hasSelected = !!this.manager.addToSelection(event.selectedItems.map((item) => item.group.value));
    }
    this._inUpdate = false;
    const isSingleSelectionMode = this.manager.selectionLimit === 1;
    hasSelected &&
      !isSingleSelectionMode &&
      this.animateSelection &&
      this.animateSelection(query(".esri4GEDataBrowserVarLabel", event.clickNode)[0]);
  }
  // TOGGLE
  _onVariableToggleChange(node, toggle) {
    node.group.value = toggle.value;
    this._inUpdate = true;
    this.manager.updateSelection(toggle.value);
    this._inUpdate = false;
    // Force updates
    if (this.manager.allowMultipleSelectInGroup) {
      this._selectionUpdated();
    }
  }
  // SELECTION SYNC
  _selectionUpdated() {
    if (this._inUpdate) {
      return;
    }
    // Update selection state of nodes in the store
    const selectedState = {};
    const selectionGroups = this.manager.getSelectionGroups();
    this._treeList.getTree().data.forEach((node) => {
      (node.children || [node]).forEach((variableNode) => {
        let selectionGroup = selectionGroups.hash[variableNode.group.value];
        if (selectionGroup) {
          variableNode.group.value = selectionGroup.value;
        }
        // Synchronize variable toggle
        const itemBinding = this._treeList.getItemBinding(variableNode);
        const toggle = itemBinding && itemBinding.variableToggle;
        if (toggle) {
          selectionGroup = toggle && selectionGroups.hash[toggle.value];
          if (selectionGroup) {
            toggle.value = selectionGroup.value;
          }
        }
        // Synchronize selection states
        selectedState[variableNode.id] = !!selectionGroup;
      });
    });
    this._treeList.setSelectedState(selectedState);
  }
  //------------------------------------------------------------
  //
  // Animation
  //
  //------------------------------------------------------------
  animateSelection(node) {
    if (this.manager.allowShoppingCart) {
      this.manager.animateSelection(node);
    }
  }
  //------------------------------------------------------------
  //
  // Destroy
  //
  //------------------------------------------------------------
  destroy() {
    this._cleanup();
  }
  _cleanup() {
    if (this._selectionHandler) {
      this._selectionHandler.remove();
      this._selectionHandler = null;
    }
  }
};
__decorate([
  y$r()
], DataVariableGrid.prototype, "manager", void 0);
__decorate([
  y$r()
], DataVariableGrid.prototype, "queryID", void 0);
__decorate([
  y$r()
], DataVariableGrid.prototype, "groupCategories", void 0);
DataVariableGrid = __decorate([
  i$X()
], DataVariableGrid);

const nls$1 = (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.a)("DataBrowser").DataVariablesPage;
let DataVariablesPage = class DataVariablesPage extends WizardPage {
  //--------------------------------------------------------------------------
  //
  // Getters & setters
  //
  //--------------------------------------------------------------------------
  set pageIsActive(value) {
    this._set("pageIsActive", value);
    this._grid && this._grid.setVariables([]);
    value && this._querySelectedVariables();
  }
  //--------------------------------------------------------------------------
  //
  // Initialization
  //
  //--------------------------------------------------------------------------
  constructor(params, refNode, position) {
    super(params, refNode, position);
    this._templateString = `
  <div class="DataVariablesPage">
    <div>
      <div class="BreadcrumbHeight"></div>
      <div class="esri4GEDataBrowserVarHeader DataVariablesPage_VarCount" data-attach-point="_varCountNode">&nbsp;</div>
    </div>
    <div>
      <div data-attach-point="_divTree" class="DataVariablesPage_Container DataVariablesPage_Variables"></div>
      <div data-attach-point="_progressDiv"></div>
    </div>
    <div></div>
  </div>`;
  }
  postCreate() {
    super.postCreate();
    // GRID
    this._grid = this.manager.createVariableGrid({ groupCategories: true }, this._divTree);
    // APPLY BUTTON
    this.manager.watch("selection", this._updateApplyButtonAvailability.bind(this));
    this._updateApplyButtonAvailability();
    // START
    this._querySelectedVariables();
  }
  _updateApplyButtonAvailability() {
    this._setButtonEnabled("apply", !!this.manager.selection.length);
  }
  //--------------------------------------------------------------------------
  //
  // Show variables
  //
  //--------------------------------------------------------------------------
  _querySelectedVariables() {
    this._varCountNode.innerHTML = "&nbsp;";
    const queryResults = this.searchResults || this.manager.queryVariables();
    this.searchResults = null;
    this._showProgress((0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.w)(queryResults).then((variables) => {
      this._showVariables(variables);
    }));
  }
  _showVariables(variables) {
    this._composeVarTitle(variables.length);
    this._grid.setVariables(variables);
  }
  _composeVarTitle(variableCount) {
    const query = this.manager.variableQuery;
    let searchKey = query.searchString;
    const groupPromiseLike = query.dataCollectionID
      ? this.manager.getDataCollection() || {}
      : query.categoryID
        ? this.manager.getCategory() || {}
        : null;
    return (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.w)(groupPromiseLike).then((group) => {
      if (searchKey === "*" && group) {
        searchKey = null;
      }
      const resource = !group
        ? query.favorites
          ? nls$1.favoriteVariables
          : searchKey === "*"
            ? nls$1.allVariables
            : nls$1.searchVariables
        : !searchKey
          ? nls$1.groupVariables
          : nls$1.searchInGroupVariables;
      const params = {
        searchKey,
        groupName: group && (group.title || group.name || "?")
      };
      this._varCountNode.textContent = (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.s)(resource, params) + " (" + variableCount + ")";
      // Compose a unique id of the query to designate expansion nodes in the variable grid
      const ids = ["c:" + (query.countryID || "_")];
      if (params.searchKey) {
        ids.push("s:" + params.searchKey);
      }
      if (params.groupName) {
        ids.push("g:" + params.groupName);
      }
      if (query.favorites) {
        ids.push("f");
      }
      this._grid.queryID = ids.join("/");
    });
  }
};
__decorate([
  y$r()
], DataVariablesPage.prototype, "searchResults", void 0);
__decorate([
  y$r()
], DataVariablesPage.prototype, "manager", void 0);
__decorate([
  y$r()
], DataVariablesPage.prototype, "pageIsActive", null);
DataVariablesPage = __decorate([
  i$X()
], DataVariablesPage);

const nls = (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.a)("DataBrowser").VariableInfo;
let VariableInfo = class VariableInfo extends TemplatedWidget {
  //--------------------------------------------------------------------------
  //
  // Getters & setters
  //
  //--------------------------------------------------------------------------
  set variable(variable) {
    this._set("variable", variable);
    this._buildInfoFromVariable(variable);
  }
  //--------------------------------------------------------------------------
  //
  // Initialization
  //
  //--------------------------------------------------------------------------
  constructor(params, refNode, position) {
    super(params, refNode, position);
    this._templateString = `
  <div class="VariableInfo">
    <div class="VariableInfo_Header" data-attach-point="descriptionHeader">${nls.name}</div>
    <div class="VariableInfo_Value" data-attach-point="_descriptionValue"></div>
    <div data-attach-point="fullNameGroup">
      <div class="VariableInfo_Spacer">&nbsp;</div>
      <div class="VariableInfo_Header" data-attach-point="fullNameHeader">${nls.variable}</div>
      <div class="VariableInfo_Value" data-attach-point="fullNameValue"></div>
    </div>
    <div data-attach-point="percentBaseGroup">
      <div class="VariableInfo_Spacer">&nbsp;</div>
      <div class="VariableInfo_Header" data-attach-point="percentBaseHeader">${nls.percentBase}</div>
      <div class="VariableInfo_Value" data-attach-point="percentBaseValue"></div>
    </div>
    <div data-attach-point="averageBaseGroup">
      <div class="VariableInfo_Spacer">&nbsp;</div>
      <div class="VariableInfo_Header" data-attach-point="averageBaseHeader">${nls.averageBase}</div>
      <div class="VariableInfo_Value" data-attach-point="averageBaseValue"></div>
    </div>
    <div data-attach-point="sourceGroup">
      <div class="VariableInfo_Spacer">&nbsp;</div>
      <div class="VariableInfo_Header" data-attach-point="sourceHeader">${nls.source}</div>
      <div class="VariableInfo_Value" data-attach-point="sourceValue"></div>
    </div>
    <div data-attach-point="vintageGroup">
      <div class="VariableInfo_Spacer">&nbsp;</div>
      <div class="VariableInfo_Header" data-attach-point="vintageHeader">${nls.vintage}</div>
      <div class="VariableInfo_Value" data-attach-point="vintageValue"></div>
    </div>
    <div data-attach-point="definitionGroup">
      <div class="VariableInfo_Spacer">&nbsp;</div>
      <div class="VariableInfo_Header" data-attach-point="definitionHeader">${nls.definition}</div>
      <div class="VariableInfo_Value" data-attach-point="definitionValue"></div>
    </div>
    <div data-attach-point="indexBaseGroup">
      <div class="VariableInfo_Spacer">&nbsp;</div>
      <div class="VariableInfo_Header" data-attach-point="indexBaseHeader">${nls.indexBase}</div>
      <div class="VariableInfo_Value" data-attach-point="indexBaseValue"></div>
    </div>
    <div data-attach-point="_filteringTagsGroup">
      <div class="VariableInfo_Spacer">&nbsp;</div>
      <div class="VariableInfo_Header" data-attach-point="filteringTagsHeader">${nls.filters}</div>
      <div class="VariableInfo_Value" data-attach-point="_filteringTagsValue"></div>
    </div>
  </div>`;
  }
  postCreate() {
    this._fieldsCache = {};
    this.infoFields = typeof this.infoFields === "string" ? this.infoFields.split(",") : this.infoFields || [];
    for (let i = 0; i < this.infoFields.length; i++) {
      let field = this.infoFields[i];
      const headerIndex = field.indexOf(":");
      if (headerIndex > 0) {
        const header = field.substr(headerIndex + 1);
        field = field.substr(0, headerIndex);
        const headerDiv = this[field + "Header"];
        if (headerDiv) {
          headerDiv.textContent = header;
        }
      }
      this._fieldsCache[field] = true;
    }
  }
  //--------------------------------------------------------------------------
  //
  // Build info
  //
  //--------------------------------------------------------------------------
  _buildInfoFromVariable(variable) {
    this._descriptionValue.innerHTML = variable.description;
    this._updateGroup(variable, "vintage");
    // Variable tags are converted from array to hash while parsing data collections.
    // So, we directly get the Source tag and show its value.
    const sourceTag = variable.filteringTags.Source;
    this._updateGroup(variable, "source", sourceTag && sourceTag.value);
    // Update optional fields
    this._updateGroup(variable, "fullName", true);
    const percentBase = this._getOptionalField(variable, "percentBase");
    this._updateGroup(variable, "percentBase", percentBase && this._getBaseFieldDescription(variable, "percentBase"));
    const averageBase = this._getOptionalField(variable, "averageBase");
    this._updateGroup(variable, "averageBase", averageBase && this._getBaseFieldDescription(variable, "averageBase"));
    this._updateGroup(variable, "indexBase", true);
    this._updateGroup(variable, "definition");
    // In the case of filtering tags we add divs as "name: value" pairs
    const filters = this._getOptionalField(variable, "filteringTags");
    this._filteringTagsGroup.style.display = filters ? "" : "none";
    if (filters) {
      empty(this._filteringTagsValue);
      for (const id in filters) {
        const filter = filters[id];
        create("div", { textContent: filter.name + ": " + filter.value }, this._filteringTagsValue);
      }
    }
  }
  _getBaseFieldDescription(variable, baseField) {
    return variable[baseField + "Alias"] + " (" + variable[baseField] + ")";
  }
  _updateGroup(variable, field, value) {
    if (typeof value === "undefined") {
      // The case of required field
      value = variable[field];
    }
    else if (value === true) {
      // The case of an optional field
      value = this._getOptionalField(variable, field);
    }
    let div = this[field + "Value"];
    div.innerHTML = value;
    div = this[field + "Group"];
    div.style.display = value ? "" : "none";
  }
  _getOptionalField(variable, fieldName) {
    return this._fieldsCache["*"] || this._fieldsCache[fieldName] ? variable[fieldName] : null;
  }
};
__decorate([
  y$r()
], VariableInfo.prototype, "infoFields", void 0);
__decorate([
  y$r()
], VariableInfo.prototype, "variable", null);
VariableInfo = __decorate([
  i$X()
], VariableInfo);

let DataBrowserManager = class DataBrowserManager extends u$D {
  //--------------------------------------------------------------------------
  //
  // Getters & setters
  //
  //--------------------------------------------------------------------------
  /**
   * Array of selected variables full names.
   */
  set selection(value) {
    this._selectionGroups = null;
    this._set("selection", value);
  }
  //--------------------------------------------------------------------------
  //
  // Constructor
  //
  //--------------------------------------------------------------------------
  constructor(dataBrowser) {
    super();
    this.selectionLimit = -1;
    this.allowShoppingCart = false;
    /**
     * Undocumented feature used in Comparison Reports.
     */
    this.allowMultipleSelectInGroup = false;
    /**
     * Last pagination index on the category page.
     */
    this.categoryPageIndex = 0;
    this.variables = dataBrowser.variables;
    this.selectionLimit = isNaN(dataBrowser.selectionLimit) ? -1 : dataBrowser.selectionLimit;
    this.allowShoppingCart = this.multipleSelectIsAllowed() && !!dataBrowser.shoppingCart;
    this.allowMultipleSelectInGroup = this.multipleSelectIsAllowed() && !!dataBrowser.allowMultipleSelectInGroup;
    // Synchronize variable query with dataBrowser
    dataBrowser.variableQuery = this.variableQuery = dataBrowser.variableQuery || {};
    // Synchronize countryID with dataBrowser
    dataBrowser.countryID = this.variableQuery.countryID =
      this.variableQuery.countryID || dataBrowser.countryID || null;
    // Add favorites to variable store if necessary.
    if (dataBrowser.favorites && !this.variables.favorites) {
      this.variables.favorites = dataBrowser.favorites;
    }
    // Start the synchronization with the given country.
    this.variables.synchronize(dataBrowser.countryID);
    // We async apply the input selection in the case of multiple selection.
    if (dataBrowser.selection && dataBrowser.selection.length && this.multipleSelectIsAllowed()) {
      this.changeSelection(dataBrowser.selection);
    }
    // Anyway, the selection in dataBrowser is now synchronized with this selection.
    // It will be updated later when variable store will be synchronized.
    this._set("selection", []);
    dataBrowser.selection = this.selection;
    // Prepare variable info
    let info = dataBrowser.variableInfo;
    if (info === false) {
      return;
    }
    if (info === true) {
      info = "fullName";
    }
    else if (info instanceof VariableInfo) {
      this.variableInfo = info;
      return;
    }
    this.variableInfo = new VariableInfo({ infoFields: info });
  }
  // override
  postscript() {
    // do nothing
  }
  //--------------------------------------------------------------------------
  //
  // Work with selection
  //
  //--------------------------------------------------------------------------
  multipleSelectIsAllowed() {
    return this.selectionLimit < 0 || this.selectionLimit > 1;
  }
  /**
   * Asynchronously changes a selection when variable store completes
   * synchronization with the current country.
   */
  changeSelection(selection) {
    const dfd = (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.c)();
    (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.w)(this.variables.synchronize()).then(() => {
      setTimeout(() => {
        this._set("selection", []);
        this.addToSelection(selection, true);
        dfd.resolve();
      });
    });
    return dfd.promise;
  }
  /**
   * Validates variables of the current selection to be available in the variable store.
   * This situation can when variables form a temporary source (e.g. Web Map variables)
   * are removed from the variable store.
   */
  validateSelection() {
    const validSelection = this.selection.filter((id) => this.variables.get(id));
    if (validSelection.length !== this.selection.length) {
      this.selection = validSelection;
    }
  }
  /**
   * Adds variable ID(s) to selection.
   * @returns a hash of IDs of variables added to selection.
   */
  addToSelection(idsOrId, forceSet = false) {
    const ids = typeof idsOrId === "string" ? [idsOrId] : idsOrId || [];
    const newSelection = this.selection.slice();
    let added = {};
    let limitReached = false;
    ids.forEach((id) => {
      if (!this.variables.get(id)) {
        return;
      }
      if (this.selectionLimit >= 0 && newSelection.length === this.selectionLimit) {
        limitReached = true;
        return;
      }
      const data = getToggleGroups(this.variables, [id], this.allowMultipleSelectInGroup);
      if (newSelection.every((newId) => !data.hash[newId])) {
        newSelection.push(data.groups[0].value);
        added[id] = true;
      }
    });
    if (newSelection.length && !this._ensureValidSelection(newSelection)) {
      return null;
    }
    if (forceSet || this.selection.length !== newSelection.length) {
      this.selection = newSelection;
    }
    else {
      added = null;
    }
    limitReached && this.onLimit();
    return added;
  }
  // Could be overriden to test that selected variables can be used together
  _ensureValidSelection(_selection) {
    return true;
  }
  /**
   * Removes variable ID(s) from selection.
   * @returns a hash of IDs of variables removed from the selection.
   */
  removeFromSelection(idsOrId, removeMultipleNodes = false) {
    const ids = typeof idsOrId === "string" ? [idsOrId] : idsOrId || [];
    const newSelection = [];
    const hash = getToggleGroups(this.variables, ids, !removeMultipleNodes && this.allowMultipleSelectInGroup).hash;
    const removed = {};
    this.selection.forEach((id) => {
      if (!hash[id]) {
        newSelection.push(id);
      }
      else {
        removed[id] = true;
      }
    });
    if (this.selection.length !== newSelection.length) {
      this.selection = newSelection;
      return removed;
    }
    return null;
  }
  /**
   * Updates the current selection by replacing ID of a related variable with the new ID.
   */
  updateSelection(id) {
    const data = getToggleGroups(this.variables, [id], this.allowMultipleSelectInGroup);
    let index = -1;
    this.selection.some((id, i) => {
      if (data.hash[id]) {
        index = i;
        return true;
      }
      return false;
    });
    if (index >= 0) {
      const newSelection = this.selection.slice();
      newSelection[index] = data.groups[0].value;
      this.selection = newSelection;
    }
  }
  /**
   * Gets variable groups for the current selection.
   */
  getSelectionGroups() {
    if (!this._selectionGroups) {
      this._selectionGroups = getToggleGroups(this.variables, this.selection, this.allowMultipleSelectInGroup);
    }
    return this._selectionGroups;
  }
  /**
   * Animates variables selection.
   */
  animateSelection(node) {
    this.flyAnim.fly(node, "esri4GEDataBrowser_SelectVar", ["top", isBodyLtr() ? "right" : "left"]);
  }
  //--------------------------------------------------------------------------
  //
  // Work with variables store
  //
  //--------------------------------------------------------------------------
  /**
   * Creates a query based on the current variable query and including the given properties only.
   * It is not necessary to specify countryID property because it is added automatically.
   */
  composeQuery(allowedProperties) {
    const props = typeof allowedProperties === "string" ? [allowedProperties] : allowedProperties || [];
    const newQuery = { countryID: this._getQueryCountryID() };
    props.forEach((property) => {
      const value = this.variableQuery[property];
      if (value) {
        newQuery[property] = value;
      }
    });
    return newQuery;
  }
  _getQueryCountryID() {
    return this.variableQuery.countryID;
  }
  /**
   * Validates the current variable query.
   * @returns a promise whose result is null or variable query result.
   * If variable query is invalid, all its properties except
   * countryID are removed, so that the starting page of Data Browser will be shown.
   */
  validateQuery() {
    const query = this.variableQuery;
    const promise = query.dataCollectionID
      ? this.getDataCollection()
      : query.categoryID
        ? this.getCategory()
        : this.queryVariables();
    return (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.w)(promise).then((result) => {
      if (!result) {
        this.variableQuery = this.composeQuery();
      }
      return query.dataCollectionID || query.categoryID ? null : result;
    }, () => {
      this.variableQuery = this.composeQuery();
    });
  }
  /**
   * Request all categories for the current country.
   */
  getCategories() {
    return (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.w)(this.variables.categories.query(this.composeQuery()));
  }
  /**
   * Requests variables applying the current variable query.
   */
  queryVariables(options) {
    return (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.w)(this.variables.query(this.variableQuery, options));
  }
  /**
   * Requests a category by ID. If ID is absent, the category from the current variable query is requested.
   */
  getCategory(id) {
    id = id || this.variableQuery.categoryID;
    if (!id) {
      return null;
    }
    const query = this.composeQuery();
    query.id = id;
    const result = this.variables.categories.query(query);
    if ("then" in result) {
      return (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.w)(result).then((categories) => this._getCategory(categories, id));
    }
    return this._getCategory(result, id);
  }
  // Could be overriden to query additional categories
  _getCategory(categories, _id) {
    return categories[0];
  }
  /**
   * Requests a data collection by ID. If ID is absent, the data collection from the current variable query is requested.
   */
  getDataCollection(id) {
    id = id || this.variableQuery.dataCollectionID;
    if (!id) {
      return null;
    }
    const query = this.composeQuery();
    query.id = id;
    const result = this.variables.dataCollections.query(query);
    if ("then" in result) {
      return (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.w)(result).then((dataCollections) => this._getDataCollection(dataCollections, id));
    }
    return this._getDataCollection(result, id);
  }
  // Could be overriden to query additional data collections
  _getDataCollection(dataCollections, _id) {
    return dataCollections[0];
  }
  onLimit() { }
};
__decorate([
  y$r()
], DataBrowserManager.prototype, "variables", void 0);
__decorate([
  y$r()
], DataBrowserManager.prototype, "selectionLimit", void 0);
__decorate([
  y$r()
], DataBrowserManager.prototype, "variableQuery", void 0);
__decorate([
  y$r()
], DataBrowserManager.prototype, "variableInfo", void 0);
__decorate([
  y$r()
], DataBrowserManager.prototype, "flyAnim", void 0);
__decorate([
  y$r()
], DataBrowserManager.prototype, "allowShoppingCart", void 0);
__decorate([
  y$r()
], DataBrowserManager.prototype, "allowMultipleSelectInGroup", void 0);
__decorate([
  y$r()
], DataBrowserManager.prototype, "categoryPageIndex", void 0);
__decorate([
  y$r()
], DataBrowserManager.prototype, "createVariableGrid", void 0);
__decorate([
  y$r()
], DataBrowserManager.prototype, "selection", null);
__decorate([
  y$r()
], DataBrowserManager.prototype, "onLimit", null);
DataBrowserManager = __decorate([
  i$X()
], DataBrowserManager);

// geoenrichment.widgets.DataBrowser
class DataBrowserContentFactory {
  createManager(dataBrowser) {
    return new DataBrowserManager(dataBrowser);
  }
  createBreadcrumb(options) {
    return new Breadcrumb(options);
  }
  createCategoriesPage(options) {
    return new DataCategoriesPage(options);
  }
  createDataCollectionsPage(options) {
    return new DataCollectionsPage(options);
  }
  createVariablesPage(options) {
    return new DataVariablesPage(options);
  }
  createVariableGrid(options, refNode) {
    return new DataVariableGrid(options).placeAt(refNode);
  }
}

// Executes the callback after the resolver's promise is fulfilled.
function resolveCallback(resolver, query, callback) {
  const promise = resolver && resolver(query);
  return (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.i)(promise) ? callback() : promise.catch(() => { }).then(() => callback());
}
class DeferredStore {
  //--------------------------------------------------------------------------
  //
  //  Methods
  //
  //--------------------------------------------------------------------------
  constructor(options) {
    //--------------------------------------------------------------------------
    //
    //  Instance variables
    //
    //--------------------------------------------------------------------------
    this.idProperty = "id";
    /**
     * True if id property should be case insensitive. Defaults to true.
     */
    this.indexIgnoreCase = true;
    this.queryEngine = createSimpleQueryEngine();
    mixin(this, options);
    this.setData(this.data);
  }
  setData(data) {
    this.data = [];
    this.index = {};
    data &&
      data.forEach((object, i) => {
        this.data[i] = object;
        let id = this.getIdentity(object);
        if (this.indexIgnoreCase) {
          id = id.toUpperCase();
        }
        this.index[id] = i;
      });
  }
  get(id) {
    if (this.indexIgnoreCase && id) {
      id = id.toUpperCase();
    }
    return this.data[this.index[id]];
  }
  getIdentity(object) {
    return object[this.idProperty];
  }
  query(query, options) {
    return resolveCallback(this.resolver, query, () => this.syncQuery(query, options));
  }
  syncQuery(query, options) {
    return this.queryEngine(query, options)(this.data);
  }
}
DeferredStore.resolveCallback = resolveCallback;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function s$p(e,t,o){if(!e||!e.read||!1===e.read.enabled||!e.read.source)return !1;const n=e.read.source;if("string"==typeof n){if(n===t)return !0;if(n.indexOf(".")>-1&&0===n.indexOf(t)&&f$x(n,o))return !0}else for(const s of n){if(s===t)return !0;if(s.indexOf(".")>-1&&0===s.indexOf(t)&&f$x(s,o))return !0}return !1}function i$N(e){return e&&(!e.read||!1!==e.read.enabled&&!e.read.source)}function f$m(e,t,r,n,f){let a=i$Y(t[r],f);i$N(a)&&(e[r]=!0);for(const i of Object.getOwnPropertyNames(t))a=i$Y(t[i],f),s$p(a,r,n)&&(e[i]=!0);}function a$D(e,t,r,o){const s=r.metadatas,i=a$M(s[t],"any",o),f=i&&i.default;if(void 0===f)return;const a="function"==typeof f?f.call(e,t,o):f;void 0!==a&&r.set(t,a);}const c$S={origin:"service"};function u$y(r,n,s=c$S){if(!n||"object"!=typeof n)return;const i=e$G(r),u=i.metadatas,d={};for(const e of Object.getOwnPropertyNames(n))f$m(d,u,e,n,s);i.setDefaultOrigin(s.origin);for(const e of Object.getOwnPropertyNames(d)){const f=i$Y(u[e],s).read,a=f&&f.source;let c;c=a&&"string"==typeof a?o$E(n,a):n[e],f&&f.reader&&(c=f.reader.call(r,c,n,s)),void 0!==c&&i.set(e,c);}if(!s||!s.ignoreDefaults)for(const e of Object.getOwnPropertyNames(u))d[e]||a$D(r,e,i,s);i.setDefaultOrigin("user");}function d$u(e,t,r,o=c$S){var n;const s={...o,messages:[]};r(s),null==(n=s.messages)||n.forEach((t=>{"warning"!==t.type||e.loaded?o&&o.messages&&o.messages.push(t):e.loadWarnings.push(t);}));}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const l$D=n$T.getLogger("esri.core.accessorSupport.write");function a$C(r,e,t,i,o){var n,s;const u={};return null==(n=e.write)||null==(s=n.writer)||s.call(r,i,u,t,o),u}function f$l(r,e,t,i,n,u){if(!i||!i.write)return !1;const a=r.get(t);if(!n&&i.write.overridePolicy){const e=i.write.overridePolicy.call(r,a,t,u);void 0!==e&&(n=e);}if(n||(n=i.write),!n||!1===n.enabled)return !1;if((null===a&&!n.allowNull||void 0===a)&&n.isRequired){const e=new s$x("web-document-write:property-required",`Missing value for required property '${t}' on '${r.declaredClass}'`,{propertyName:t,target:r});return e&&u&&u.messages?u.messages.push(e):e&&!u&&l$D.error(e.name,e.message),!1}if(void 0===a)return !1;if(null===a&&!n.allowNull)return !1;if(c$R(r,t,u,i,a))return !1;if(void 0!==i.default)return !0;if(!n.ignoreOrigin&&u&&u.origin){if(e.store.originOf(t)<t$G(u.origin))return !1}return !0}function c$R(r,e,t,i,o){const n=i.default;if(void 0===n)return !1;if(null!=i.defaultEquals)return i.defaultEquals(o);if("function"==typeof n){if(Array.isArray(o)){const i=n.call(r,e,t);return l$H(i,o)}return !1}return n===o}function p$T(r,t,o,n){const s=e$G(r),u=s.metadatas,l=s$z(u[t],n);return !!l&&f$l(r,s,t,l,o,n)}function g$a(r,o,s){if(r&&"function"==typeof r.toJSON&&(!r.toJSON.isDefaultToJSON||!r.write))return u$M(o,r.toJSON());const u=e$G(r),l=u.metadatas;for(const e in l){const g=s$z(l[e],s);if(!f$l(r,u,e,g,void 0,s))continue;const d=r.get(e),m=a$C(r,g,g.write&&"string"==typeof g.write.target?g.write.target:e,d,s);var c,p;if(Object.keys(m).length>0)o=u$M(o,m),null!=s&&null!=(c=s.resources)&&null!=(p=c.pendingOperations)&&p.length&&Promise.all(s.resources.pendingOperations).then((()=>u$M(o,m))),s&&s.writtenProperties&&s.writtenProperties.push({target:r,propName:e,oldOrigin:c$V(u.store.originOf(e)),newOrigin:s.origin});}return o}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const i$M=s=>{let i=class extends s{constructor(...r){super(...r);}read(r,t){u$y(this,r,t);}write(r={},t){return g$a(this,r,t)}toJSON(r){return this.write({},r)}static fromJSON(r,t){return c$Q.call(this,r,t)}};return i=e$u([i$X("esri.core.JSONSupport")],i),i.prototype.toJSON.isDefaultToJSON=!0,i};function c$Q(r,t){if(!r)return null;if(r.declaredClass)throw new Error("JSON object is already hydrated");const s=new this;return s.read(r,t),s}let a$B=class extends(i$M(u$D)){};a$B=e$u([i$X("esri.core.JSONSupport")],a$B);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
let o$i;const r$g={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9367:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(o$i=2e3;o$i<=2045;o$i++)r$g[o$i]=0;for(o$i=2056;o$i<=2065;o$i++)r$g[o$i]=0;for(o$i=2067;o$i<=2135;o$i++)r$g[o$i]=0;for(o$i=2137;o$i<=2154;o$i++)r$g[o$i]=0;for(o$i=2161;o$i<=2170;o$i++)r$g[o$i]=0;for(o$i=2172;o$i<=2193;o$i++)r$g[o$i]=0;for(o$i=2195;o$i<=2198;o$i++)r$g[o$i]=0;for(o$i=2200;o$i<=2203;o$i++)r$g[o$i]=0;for(o$i=2205;o$i<=2217;o$i++)r$g[o$i]=0;for(o$i=2222;o$i<=2224;o$i++)r$g[o$i]=1;for(o$i=2225;o$i<=2250;o$i++)r$g[o$i]=2;for(o$i=2251;o$i<=2253;o$i++)r$g[o$i]=1;for(o$i=2257;o$i<=2264;o$i++)r$g[o$i]=2;for(o$i=2274;o$i<=2279;o$i++)r$g[o$i]=2;for(o$i=2280;o$i<=2282;o$i++)r$g[o$i]=1;for(o$i=2283;o$i<=2289;o$i++)r$g[o$i]=2;for(o$i=2290;o$i<=2292;o$i++)r$g[o$i]=0;for(o$i=2308;o$i<=2313;o$i++)r$g[o$i]=0;for(o$i=2315;o$i<=2491;o$i++)r$g[o$i]=0;for(o$i=2494;o$i<=2866;o$i++)r$g[o$i]=0;for(o$i=2867;o$i<=2869;o$i++)r$g[o$i]=1;for(o$i=2870;o$i<=2888;o$i++)r$g[o$i]=2;for(o$i=2891;o$i<=2895;o$i++)r$g[o$i]=2;for(o$i=2896;o$i<=2898;o$i++)r$g[o$i]=1;for(o$i=2902;o$i<=2908;o$i++)r$g[o$i]=2;for(o$i=2915;o$i<=2920;o$i++)r$g[o$i]=2;for(o$i=2921;o$i<=2923;o$i++)r$g[o$i]=1;for(o$i=2924;o$i<=2930;o$i++)r$g[o$i]=2;for(o$i=2931;o$i<=2962;o$i++)r$g[o$i]=0;for(o$i=2964;o$i<=2968;o$i++)r$g[o$i]=2;for(o$i=2969;o$i<=2973;o$i++)r$g[o$i]=0;for(o$i=2975;o$i<=2991;o$i++)r$g[o$i]=0;for(o$i=2995;o$i<=3051;o$i++)r$g[o$i]=0;for(o$i=3054;o$i<=3079;o$i++)r$g[o$i]=0;for(o$i=3081;o$i<=3088;o$i++)r$g[o$i]=0;for(o$i=3092;o$i<=3101;o$i++)r$g[o$i]=0;for(o$i=3106;o$i<=3138;o$i++)r$g[o$i]=0;for(o$i=3146;o$i<=3151;o$i++)r$g[o$i]=0;for(o$i=3153;o$i<=3166;o$i++)r$g[o$i]=0;for(o$i=3168;o$i<=3172;o$i++)r$g[o$i]=0;for(o$i=3174;o$i<=3203;o$i++)r$g[o$i]=0;for(o$i=3294;o$i<=3358;o$i++)r$g[o$i]=0;for(o$i=3367;o$i<=3403;o$i++)r$g[o$i]=0;for(o$i=3408;o$i<=3416;o$i++)r$g[o$i]=0;for(o$i=3417;o$i<=3438;o$i++)r$g[o$i]=2;for(o$i=3441;o$i<=3446;o$i++)r$g[o$i]=2;for(o$i=3447;o$i<=3450;o$i++)r$g[o$i]=0;for(o$i=3451;o$i<=3459;o$i++)r$g[o$i]=2;for(o$i=3460;o$i<=3478;o$i++)r$g[o$i]=0;for(o$i=3554;o$i<=3559;o$i++)r$g[o$i]=0;for(o$i=3560;o$i<=3570;o$i++)r$g[o$i]=2;for(o$i=3571;o$i<=3581;o$i++)r$g[o$i]=0;for(o$i=3594;o$i<=3597;o$i++)r$g[o$i]=0;for(o$i=3601;o$i<=3604;o$i++)r$g[o$i]=0;for(o$i=3637;o$i<=3639;o$i++)r$g[o$i]=0;for(o$i=3665;o$i<=3667;o$i++)r$g[o$i]=0;for(o$i=3693;o$i<=3695;o$i++)r$g[o$i]=0;for(o$i=3701;o$i<=3727;o$i++)r$g[o$i]=0;for(o$i=3728;o$i<=3739;o$i++)r$g[o$i]=2;for(o$i=3740;o$i<=3751;o$i++)r$g[o$i]=0;for(o$i=3753;o$i<=3760;o$i++)r$g[o$i]=2;for(o$i=3761;o$i<=3773;o$i++)r$g[o$i]=0;for(o$i=3775;o$i<=3777;o$i++)r$g[o$i]=0;for(o$i=3779;o$i<=3781;o$i++)r$g[o$i]=0;for(o$i=3783;o$i<=3785;o$i++)r$g[o$i]=0;for(o$i=3788;o$i<=3791;o$i++)r$g[o$i]=0;for(o$i=3797;o$i<=3802;o$i++)r$g[o$i]=0;for(o$i=3814;o$i<=3816;o$i++)r$g[o$i]=0;for(o$i=3825;o$i<=3829;o$i++)r$g[o$i]=0;for(o$i=3832;o$i<=3841;o$i++)r$g[o$i]=0;for(o$i=3844;o$i<=3852;o$i++)r$g[o$i]=0;for(o$i=3873;o$i<=3885;o$i++)r$g[o$i]=0;for(o$i=3890;o$i<=3893;o$i++)r$g[o$i]=0;for(o$i=3907;o$i<=3912;o$i++)r$g[o$i]=0;for(o$i=3942;o$i<=3950;o$i++)r$g[o$i]=0;for(o$i=3968;o$i<=3970;o$i++)r$g[o$i]=0;for(o$i=3973;o$i<=3976;o$i++)r$g[o$i]=0;for(o$i=3986;o$i<=3989;o$i++)r$g[o$i]=0;for(o$i=3994;o$i<=3997;o$i++)r$g[o$i]=0;for(o$i=4048;o$i<=4051;o$i++)r$g[o$i]=0;for(o$i=4056;o$i<=4063;o$i++)r$g[o$i]=0;for(o$i=4093;o$i<=4096;o$i++)r$g[o$i]=0;for(o$i=4390;o$i<=4398;o$i++)r$g[o$i]=0;for(o$i=4399;o$i<=4413;o$i++)r$g[o$i]=2;for(o$i=4418;o$i<=4433;o$i++)r$g[o$i]=2;for(o$i=4455;o$i<=4457;o$i++)r$g[o$i]=2;for(o$i=4484;o$i<=4489;o$i++)r$g[o$i]=0;for(o$i=4491;o$i<=4554;o$i++)r$g[o$i]=0;for(o$i=4568;o$i<=4589;o$i++)r$g[o$i]=0;for(o$i=4652;o$i<=4656;o$i++)r$g[o$i]=0;for(o$i=4766;o$i<=4800;o$i++)r$g[o$i]=0;for(o$i=5014;o$i<=5016;o$i++)r$g[o$i]=0;for(o$i=5069;o$i<=5072;o$i++)r$g[o$i]=0;for(o$i=5105;o$i<=5130;o$i++)r$g[o$i]=0;for(o$i=5173;o$i<=5188;o$i++)r$g[o$i]=0;for(o$i=5253;o$i<=5259;o$i++)r$g[o$i]=0;for(o$i=5269;o$i<=5275;o$i++)r$g[o$i]=0;for(o$i=5292;o$i<=5311;o$i++)r$g[o$i]=0;for(o$i=5329;o$i<=5331;o$i++)r$g[o$i]=0;for(o$i=5343;o$i<=5349;o$i++)r$g[o$i]=0;for(o$i=5355;o$i<=5357;o$i++)r$g[o$i]=0;for(o$i=5387;o$i<=5389;o$i++)r$g[o$i]=0;for(o$i=5459;o$i<=5463;o$i++)r$g[o$i]=0;for(o$i=5479;o$i<=5482;o$i++)r$g[o$i]=0;for(o$i=5518;o$i<=5520;o$i++)r$g[o$i]=0;for(o$i=5530;o$i<=5539;o$i++)r$g[o$i]=0;for(o$i=5550;o$i<=5552;o$i++)r$g[o$i]=0;for(o$i=5562;o$i<=5583;o$i++)r$g[o$i]=0;for(o$i=5623;o$i<=5625;o$i++)r$g[o$i]=2;for(o$i=5631;o$i<=5639;o$i++)r$g[o$i]=0;for(o$i=5649;o$i<=5653;o$i++)r$g[o$i]=0;for(o$i=5663;o$i<=5680;o$i++)r$g[o$i]=0;for(o$i=5682;o$i<=5685;o$i++)r$g[o$i]=0;for(o$i=5875;o$i<=5877;o$i++)r$g[o$i]=0;for(o$i=5896;o$i<=5899;o$i++)r$g[o$i]=0;for(o$i=5921;o$i<=5940;o$i++)r$g[o$i]=0;for(o$i=6050;o$i<=6125;o$i++)r$g[o$i]=0;for(o$i=6244;o$i<=6275;o$i++)r$g[o$i]=0;for(o$i=6328;o$i<=6348;o$i++)r$g[o$i]=0;for(o$i=6350;o$i<=6356;o$i++)r$g[o$i]=0;for(o$i=6366;o$i<=6372;o$i++)r$g[o$i]=0;for(o$i=6381;o$i<=6387;o$i++)r$g[o$i]=0;for(o$i=6393;o$i<=6404;o$i++)r$g[o$i]=0;for(o$i=6480;o$i<=6483;o$i++)r$g[o$i]=0;for(o$i=6511;o$i<=6514;o$i++)r$g[o$i]=0;for(o$i=6579;o$i<=6581;o$i++)r$g[o$i]=0;for(o$i=6619;o$i<=6624;o$i++)r$g[o$i]=0;for(o$i=6625;o$i<=6627;o$i++)r$g[o$i]=2;for(o$i=6628;o$i<=6632;o$i++)r$g[o$i]=0;for(o$i=6634;o$i<=6637;o$i++)r$g[o$i]=0;for(o$i=6669;o$i<=6692;o$i++)r$g[o$i]=0;for(o$i=6707;o$i<=6709;o$i++)r$g[o$i]=0;for(o$i=6720;o$i<=6723;o$i++)r$g[o$i]=0;for(o$i=6732;o$i<=6738;o$i++)r$g[o$i]=0;for(o$i=6931;o$i<=6933;o$i++)r$g[o$i]=0;for(o$i=6956;o$i<=6959;o$i++)r$g[o$i]=0;for(o$i=7005;o$i<=7007;o$i++)r$g[o$i]=0;for(o$i=7057;o$i<=7070;o$i++)r$g[o$i]=2;for(o$i=7074;o$i<=7082;o$i++)r$g[o$i]=0;for(o$i=7109;o$i<=7118;o$i++)r$g[o$i]=0;for(o$i=7119;o$i<=7127;o$i++)r$g[o$i]=1;for(o$i=7374;o$i<=7376;o$i++)r$g[o$i]=0;for(o$i=7528;o$i<=7586;o$i++)r$g[o$i]=0;for(o$i=7587;o$i<=7645;o$i++)r$g[o$i]=2;for(o$i=7692;o$i<=7696;o$i++)r$g[o$i]=0;for(o$i=7755;o$i<=7787;o$i++)r$g[o$i]=0;for(o$i=7791;o$i<=7795;o$i++)r$g[o$i]=0;for(o$i=7799;o$i<=7801;o$i++)r$g[o$i]=0;for(o$i=7803;o$i<=7805;o$i++)r$g[o$i]=0;for(o$i=7825;o$i<=7831;o$i++)r$g[o$i]=0;for(o$i=7845;o$i<=7859;o$i++)r$g[o$i]=0;for(o$i=8013;o$i<=8032;o$i++)r$g[o$i]=0;for(o$i=8065;o$i<=8068;o$i++)r$g[o$i]=1;for(o$i=8518;o$i<=8529;o$i++)r$g[o$i]=2;for(o$i=8533;o$i<=8536;o$i++)r$g[o$i]=2;for(o$i=8538;o$i<=8540;o$i++)r$g[o$i]=2;for(o$i=8677;o$i<=8679;o$i++)r$g[o$i]=0;for(o$i=8836;o$i<=8840;o$i++)r$g[o$i]=0;for(o$i=8857;o$i<=8859;o$i++)r$g[o$i]=0;for(o$i=8908;o$i<=8910;o$i++)r$g[o$i]=0;for(o$i=9154;o$i<=9159;o$i++)r$g[o$i]=0;for(o$i=9205;o$i<=9218;o$i++)r$g[o$i]=0;for(o$i=9271;o$i<=9273;o$i++)r$g[o$i]=0;for(o$i=9295;o$i<=9297;o$i++)r$g[o$i]=0;for(o$i=20002;o$i<=20032;o$i++)r$g[o$i]=0;for(o$i=20062;o$i<=20092;o$i++)r$g[o$i]=0;for(o$i=20135;o$i<=20138;o$i++)r$g[o$i]=0;for(o$i=20248;o$i<=20258;o$i++)r$g[o$i]=0;for(o$i=20348;o$i<=20358;o$i++)r$g[o$i]=0;for(o$i=20436;o$i<=20440;o$i++)r$g[o$i]=0;for(o$i=20822;o$i<=20824;o$i++)r$g[o$i]=0;for(o$i=20934;o$i<=20936;o$i++)r$g[o$i]=0;for(o$i=21035;o$i<=21037;o$i++)r$g[o$i]=0;for(o$i=21095;o$i<=21097;o$i++)r$g[o$i]=0;for(o$i=21148;o$i<=21150;o$i++)r$g[o$i]=0;for(o$i=21413;o$i<=21423;o$i++)r$g[o$i]=0;for(o$i=21453;o$i<=21463;o$i++)r$g[o$i]=0;for(o$i=21473;o$i<=21483;o$i++)r$g[o$i]=0;for(o$i=21780;o$i<=21782;o$i++)r$g[o$i]=0;for(o$i=21891;o$i<=21894;o$i++)r$g[o$i]=0;for(o$i=21896;o$i<=21899;o$i++)r$g[o$i]=0;for(o$i=22171;o$i<=22177;o$i++)r$g[o$i]=0;for(o$i=22181;o$i<=22187;o$i++)r$g[o$i]=0;for(o$i=22191;o$i<=22197;o$i++)r$g[o$i]=0;for(o$i=22234;o$i<=22236;o$i++)r$g[o$i]=0;for(o$i=22521;o$i<=22525;o$i++)r$g[o$i]=0;for(o$i=22991;o$i<=22994;o$i++)r$g[o$i]=0;for(o$i=23028;o$i<=23038;o$i++)r$g[o$i]=0;for(o$i=23830;o$i<=23853;o$i++)r$g[o$i]=0;for(o$i=23866;o$i<=23872;o$i++)r$g[o$i]=0;for(o$i=23877;o$i<=23884;o$i++)r$g[o$i]=0;for(o$i=23886;o$i<=23894;o$i++)r$g[o$i]=0;for(o$i=23946;o$i<=23948;o$i++)r$g[o$i]=0;for(o$i=24311;o$i<=24313;o$i++)r$g[o$i]=0;for(o$i=24342;o$i<=24347;o$i++)r$g[o$i]=0;for(o$i=24370;o$i<=24374;o$i++)r$g[o$i]=10;for(o$i=24375;o$i<=24381;o$i++)r$g[o$i]=0;for(o$i=24718;o$i<=24721;o$i++)r$g[o$i]=0;for(o$i=24817;o$i<=24821;o$i++)r$g[o$i]=0;for(o$i=24877;o$i<=24882;o$i++)r$g[o$i]=0;for(o$i=24891;o$i<=24893;o$i++)r$g[o$i]=0;for(o$i=25391;o$i<=25395;o$i++)r$g[o$i]=0;for(o$i=25828;o$i<=25838;o$i++)r$g[o$i]=0;for(o$i=26191;o$i<=26195;o$i++)r$g[o$i]=0;for(o$i=26391;o$i<=26393;o$i++)r$g[o$i]=0;for(o$i=26701;o$i<=26722;o$i++)r$g[o$i]=0;for(o$i=26729;o$i<=26799;o$i++)r$g[o$i]=2;for(o$i=26801;o$i<=26803;o$i++)r$g[o$i]=2;for(o$i=26811;o$i<=26813;o$i++)r$g[o$i]=2;for(o$i=26847;o$i<=26870;o$i++)r$g[o$i]=2;for(o$i=26891;o$i<=26899;o$i++)r$g[o$i]=0;for(o$i=26901;o$i<=26923;o$i++)r$g[o$i]=0;for(o$i=26929;o$i<=26946;o$i++)r$g[o$i]=0;for(o$i=26948;o$i<=26998;o$i++)r$g[o$i]=0;for(o$i=27037;o$i<=27040;o$i++)r$g[o$i]=0;for(o$i=27205;o$i<=27232;o$i++)r$g[o$i]=0;for(o$i=27258;o$i<=27260;o$i++)r$g[o$i]=0;for(o$i=27391;o$i<=27398;o$i++)r$g[o$i]=0;for(o$i=27561;o$i<=27564;o$i++)r$g[o$i]=0;for(o$i=27571;o$i<=27574;o$i++)r$g[o$i]=0;for(o$i=27581;o$i<=27584;o$i++)r$g[o$i]=0;for(o$i=27591;o$i<=27594;o$i++)r$g[o$i]=0;for(o$i=28191;o$i<=28193;o$i++)r$g[o$i]=0;for(o$i=28348;o$i<=28358;o$i++)r$g[o$i]=0;for(o$i=28402;o$i<=28432;o$i++)r$g[o$i]=0;for(o$i=28462;o$i<=28492;o$i++)r$g[o$i]=0;for(o$i=29118;o$i<=29122;o$i++)r$g[o$i]=0;for(o$i=29168;o$i<=29172;o$i++)r$g[o$i]=0;for(o$i=29177;o$i<=29185;o$i++)r$g[o$i]=0;for(o$i=29187;o$i<=29195;o$i++)r$g[o$i]=0;for(o$i=29900;o$i<=29903;o$i++)r$g[o$i]=0;for(o$i=30161;o$i<=30179;o$i++)r$g[o$i]=0;for(o$i=30491;o$i<=30494;o$i++)r$g[o$i]=0;for(o$i=30729;o$i<=30732;o$i++)r$g[o$i]=0;for(o$i=31251;o$i<=31259;o$i++)r$g[o$i]=0;for(o$i=31265;o$i<=31268;o$i++)r$g[o$i]=0;for(o$i=31275;o$i<=31279;o$i++)r$g[o$i]=0;for(o$i=31281;o$i<=31297;o$i++)r$g[o$i]=0;for(o$i=31461;o$i<=31469;o$i++)r$g[o$i]=0;for(o$i=31491;o$i<=31495;o$i++)r$g[o$i]=0;for(o$i=31917;o$i<=31922;o$i++)r$g[o$i]=0;for(o$i=31965;o$i<=32e3;o$i++)r$g[o$i]=0;for(o$i=32001;o$i<=32003;o$i++)r$g[o$i]=2;for(o$i=32005;o$i<=32031;o$i++)r$g[o$i]=2;for(o$i=32033;o$i<=32060;o$i++)r$g[o$i]=2;for(o$i=32064;o$i<=32067;o$i++)r$g[o$i]=2;for(o$i=32074;o$i<=32077;o$i++)r$g[o$i]=2;for(o$i=32081;o$i<=32086;o$i++)r$g[o$i]=0;for(o$i=32107;o$i<=32130;o$i++)r$g[o$i]=0;for(o$i=32133;o$i<=32158;o$i++)r$g[o$i]=0;for(o$i=32164;o$i<=32167;o$i++)r$g[o$i]=2;for(o$i=32180;o$i<=32199;o$i++)r$g[o$i]=0;for(o$i=32201;o$i<=32260;o$i++)r$g[o$i]=0;for(o$i=32301;o$i<=32360;o$i++)r$g[o$i]=0;for(o$i=32601;o$i<=32662;o$i++)r$g[o$i]=0;for(o$i=32664;o$i<=32667;o$i++)r$g[o$i]=2;for(o$i=32701;o$i<=32761;o$i++)r$g[o$i]=0;for(o$i=53001;o$i<=53004;o$i++)r$g[o$i]=0;for(o$i=53008;o$i<=53019;o$i++)r$g[o$i]=0;for(o$i=53021;o$i<=53032;o$i++)r$g[o$i]=0;for(o$i=53034;o$i<=53037;o$i++)r$g[o$i]=0;for(o$i=53042;o$i<=53046;o$i++)r$g[o$i]=0;for(o$i=53074;o$i<=53080;o$i++)r$g[o$i]=0;for(o$i=54001;o$i<=54004;o$i++)r$g[o$i]=0;for(o$i=54008;o$i<=54019;o$i++)r$g[o$i]=0;for(o$i=54021;o$i<=54032;o$i++)r$g[o$i]=0;for(o$i=54034;o$i<=54037;o$i++)r$g[o$i]=0;for(o$i=54042;o$i<=54046;o$i++)r$g[o$i]=0;for(o$i=54048;o$i<=54053;o$i++)r$g[o$i]=0;for(o$i=54074;o$i<=54080;o$i++)r$g[o$i]=0;for(o$i=54098;o$i<=54101;o$i++)r$g[o$i]=0;for(o$i=102001;o$i<=102040;o$i++)r$g[o$i]=0;for(o$i=102042;o$i<=102063;o$i++)r$g[o$i]=0;for(o$i=102065;o$i<=102067;o$i++)r$g[o$i]=0;for(o$i=102070;o$i<=102117;o$i++)r$g[o$i]=0;for(o$i=102122;o$i<=102216;o$i++)r$g[o$i]=0;for(o$i=102221;o$i<=102377;o$i++)r$g[o$i]=0;for(o$i=102382;o$i<=102388;o$i++)r$g[o$i]=0;for(o$i=102389;o$i<=102398;o$i++)r$g[o$i]=2;for(o$i=102399;o$i<=102444;o$i++)r$g[o$i]=0;for(o$i=102445;o$i<=102447;o$i++)r$g[o$i]=2;for(o$i=102448;o$i<=102458;o$i++)r$g[o$i]=0;for(o$i=102459;o$i<=102468;o$i++)r$g[o$i]=2;for(o$i=102469;o$i<=102499;o$i++)r$g[o$i]=0;for(o$i=102500;o$i<=102519;o$i++)r$g[o$i]=1;for(o$i=102520;o$i<=102524;o$i++)r$g[o$i]=0;for(o$i=102525;o$i<=102529;o$i++)r$g[o$i]=2;for(o$i=102530;o$i<=102588;o$i++)r$g[o$i]=0;for(o$i=102590;o$i<=102598;o$i++)r$g[o$i]=0;for(o$i=102601;o$i<=102603;o$i++)r$g[o$i]=0;for(o$i=102605;o$i<=102628;o$i++)r$g[o$i]=0;for(o$i=102629;o$i<=102646;o$i++)r$g[o$i]=2;for(o$i=102648;o$i<=102700;o$i++)r$g[o$i]=2;for(o$i=102701;o$i<=102703;o$i++)r$g[o$i]=0;for(o$i=102707;o$i<=102730;o$i++)r$g[o$i]=2;for(o$i=102733;o$i<=102758;o$i++)r$g[o$i]=2;for(o$i=102767;o$i<=102900;o$i++)r$g[o$i]=0;for(o$i=102965;o$i<=102969;o$i++)r$g[o$i]=0;for(o$i=102971;o$i<=102973;o$i++)r$g[o$i]=0;for(o$i=102975;o$i<=102989;o$i++)r$g[o$i]=0;for(o$i=102990;o$i<=102992;o$i++)r$g[o$i]=1;for(o$i=102997;o$i<=103002;o$i++)r$g[o$i]=0;for(o$i=103003;o$i<=103008;o$i++)r$g[o$i]=2;for(o$i=103009;o$i<=103011;o$i++)r$g[o$i]=0;for(o$i=103012;o$i<=103014;o$i++)r$g[o$i]=2;for(o$i=103019;o$i<=103021;o$i++)r$g[o$i]=0;for(o$i=103022;o$i<=103024;o$i++)r$g[o$i]=2;for(o$i=103029;o$i<=103031;o$i++)r$g[o$i]=0;for(o$i=103032;o$i<=103034;o$i++)r$g[o$i]=2;for(o$i=103065;o$i<=103068;o$i++)r$g[o$i]=0;for(o$i=103074;o$i<=103076;o$i++)r$g[o$i]=0;for(o$i=103077;o$i<=103079;o$i++)r$g[o$i]=1;for(o$i=103080;o$i<=103082;o$i++)r$g[o$i]=0;for(o$i=103083;o$i<=103085;o$i++)r$g[o$i]=2;for(o$i=103090;o$i<=103093;o$i++)r$g[o$i]=0;for(o$i=103097;o$i<=103099;o$i++)r$g[o$i]=0;for(o$i=103100;o$i<=103102;o$i++)r$g[o$i]=2;for(o$i=103107;o$i<=103109;o$i++)r$g[o$i]=0;for(o$i=103110;o$i<=103112;o$i++)r$g[o$i]=2;for(o$i=103113;o$i<=103116;o$i++)r$g[o$i]=0;for(o$i=103117;o$i<=103120;o$i++)r$g[o$i]=2;for(o$i=103153;o$i<=103157;o$i++)r$g[o$i]=0;for(o$i=103158;o$i<=103162;o$i++)r$g[o$i]=2;for(o$i=103163;o$i<=103165;o$i++)r$g[o$i]=0;for(o$i=103166;o$i<=103168;o$i++)r$g[o$i]=1;for(o$i=103169;o$i<=103171;o$i++)r$g[o$i]=2;for(o$i=103186;o$i<=103188;o$i++)r$g[o$i]=0;for(o$i=103189;o$i<=103191;o$i++)r$g[o$i]=2;for(o$i=103192;o$i<=103195;o$i++)r$g[o$i]=0;for(o$i=103196;o$i<=103199;o$i++)r$g[o$i]=2;for(o$i=103200;o$i<=103224;o$i++)r$g[o$i]=0;for(o$i=103225;o$i<=103227;o$i++)r$g[o$i]=1;for(o$i=103232;o$i<=103237;o$i++)r$g[o$i]=0;for(o$i=103238;o$i<=103243;o$i++)r$g[o$i]=2;for(o$i=103244;o$i<=103246;o$i++)r$g[o$i]=0;for(o$i=103247;o$i<=103249;o$i++)r$g[o$i]=2;for(o$i=103254;o$i<=103256;o$i++)r$g[o$i]=0;for(o$i=103257;o$i<=103259;o$i++)r$g[o$i]=2;for(o$i=103264;o$i<=103266;o$i++)r$g[o$i]=0;for(o$i=103267;o$i<=103269;o$i++)r$g[o$i]=2;for(o$i=103300;o$i<=103375;o$i++)r$g[o$i]=0;for(o$i=103381;o$i<=103383;o$i++)r$g[o$i]=0;for(o$i=103384;o$i<=103386;o$i++)r$g[o$i]=1;for(o$i=103387;o$i<=103389;o$i++)r$g[o$i]=0;for(o$i=103390;o$i<=103392;o$i++)r$g[o$i]=2;for(o$i=103397;o$i<=103399;o$i++)r$g[o$i]=0;for(o$i=103400;o$i<=103471;o$i++)r$g[o$i]=2;for(o$i=103476;o$i<=103478;o$i++)r$g[o$i]=0;for(o$i=103479;o$i<=103481;o$i++)r$g[o$i]=2;for(o$i=103486;o$i<=103488;o$i++)r$g[o$i]=0;for(o$i=103489;o$i<=103491;o$i++)r$g[o$i]=2;for(o$i=103492;o$i<=103495;o$i++)r$g[o$i]=0;for(o$i=103496;o$i<=103499;o$i++)r$g[o$i]=2;for(o$i=103528;o$i<=103543;o$i++)r$g[o$i]=0;for(o$i=103544;o$i<=103548;o$i++)r$g[o$i]=2;for(o$i=103549;o$i<=103551;o$i++)r$g[o$i]=0;for(o$i=103552;o$i<=103554;o$i++)r$g[o$i]=1;for(o$i=103555;o$i<=103557;o$i++)r$g[o$i]=2;for(o$i=103558;o$i<=103560;o$i++)r$g[o$i]=0;for(o$i=103571;o$i<=103573;o$i++)r$g[o$i]=0;for(o$i=103574;o$i<=103576;o$i++)r$g[o$i]=2;for(o$i=103577;o$i<=103580;o$i++)r$g[o$i]=0;for(o$i=103581;o$i<=103583;o$i++)r$g[o$i]=2;for(o$i=103595;o$i<=103694;o$i++)r$g[o$i]=0;for(o$i=103696;o$i<=103699;o$i++)r$g[o$i]=0;for(o$i=103700;o$i<=103793;o$i++)r$g[o$i]=2;for(o$i=103794;o$i<=103872;o$i++)r$g[o$i]=0;for(o$i=103900;o$i<=103971;o$i++)r$g[o$i]=2;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const a$A={102113:!0,102100:!0,3857:!0,3785:!0},_$1={102113:!0,102100:!0,3857:!0,3785:!0,4326:!0},t$q='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',l$C=[-20037508.342788905,20037508.342788905],M$5=[-20037508.342787,20037508.342787],E={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:l$C,origin:M$5,dx:1e-5},102100:{wkTemplate:t$q,valid:l$C,origin:M$5,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:l$C,origin:M$5,dx:1e-5},3857:{wkTemplate:t$q,valid:l$C,origin:M$5,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function d$t(e,i){return !t$M(e)&&!t$M(i)&&(e===i||(null!=e.wkid||null!=i.wkid?e.wkid===i.wkid||u$x(e)&&u$x(i)||null!=i.latestWkid&&e.wkid===i.latestWkid||null!=e.latestWkid&&i.wkid===e.latestWkid:!(!e.wkt||!i.wkt)&&e.wkt.toUpperCase()===i.wkt.toUpperCase()))}function S$8(e){return s$o(e)&&e.wkid?E[e.wkid]:null}function R$6(e){return !!s$o(e)&&(e.wkid?null==r$g[e.wkid]:!!e.wkt&&!!/^\s*GEOGCS/i.test(e.wkt))}function o$h(e){return !(k$5(e)||P$3(e))}function A$4(e){return s$o(e)&&4326===e.wkid}function u$x(e){return s$o(e)&&null!=e.wkid&&!0===a$A[e.wkid]}function G$3(e){return 104971===e||104905===e}function k$5(e){return s$o(e)&&null!=e.wkid&&G$3(e.wkid)}function w$6(e){return 104903===e}function P$3(e){return s$o(e)&&null!=e.wkid&&w$6(e.wkid)}function C$4(e){return s$o(e)&&null!=e.wkid&&!0===_$1[e.wkid]}function s$o(r){return r$A(r)&&(null!=r.wkid&&r.wkid>=2e3||null!=r.wkt)}const I$1={wkid:4326,wkt:r$z(E[4326].wkTemplate,{Central_Meridian:"0.0"})},c$P={wkid:102100,latestWkid:3857};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var y$g;let S$7=y$g=class extends a$B{constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null;}static fromJSON(e){if(!e)return null;if(e.wkid){if(102100===e.wkid)return y$g.WebMercator;if(4326===e.wkid)return y$g.WGS84}const t=new y$g;return t.read(e),t}normalizeCtorArgs(e){if(e&&"object"==typeof e)return e;return {["string"==typeof e?"wkt":"wkid"]:e}}get isWGS84(){return A$4(this)}get isWebMercator(){return u$x(this)}get isGeographic(){return R$6(this)}get isWrappable(){return C$4(this)}writeWkt(e,t){this.wkid||(t.wkt=e);}clone(){if(this===y$g.WGS84)return y$g.WGS84;if(this===y$g.WebMercator)return y$g.WebMercator;const e=new y$g;return null!=this.wkid?(e.wkid=this.wkid,null!=this.latestWkid&&(e.latestWkid=this.latestWkid),null!=this.vcsWkid&&(e.vcsWkid=this.vcsWkid),null!=this.latestVcsWkid&&(e.latestVcsWkid=this.latestVcsWkid)):null!=this.wkt&&(e.wkt=this.wkt),this.imageCoordinateSystem&&(e.imageCoordinateSystem=y$v(this.imageCoordinateSystem)),e}equals(e){if(null==e)return !1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(null==this.imageCoordinateSystem||null==e.imageCoordinateSystem)return !1;const{id:t,referenceServiceName:r}=e.imageCoordinateSystem,{geodataXform:i}=e.imageCoordinateSystem,o=this.imageCoordinateSystem;return null==t||i?JSON.stringify(o)===JSON.stringify(e.imageCoordinateSystem):r?o.id===t&&o.referenceServiceName===r:o.id===t}return d$t(this,e)}toJSON(e){return this.write(void 0,e)}};S$7.GCS_NAD_1927=null,S$7.WGS84=null,S$7.WebMercator=null,e$u([y$r({readOnly:!0})],S$7.prototype,"isWGS84",null),e$u([y$r({readOnly:!0})],S$7.prototype,"isWebMercator",null),e$u([y$r({readOnly:!0})],S$7.prototype,"isGeographic",null),e$u([y$r({readOnly:!0})],S$7.prototype,"isWrappable",null),e$u([y$r({type:N$5,json:{write:!0}})],S$7.prototype,"latestWkid",void 0),e$u([y$r({type:N$5,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return {isRequired:null===this.wkt}}}}}}})],S$7.prototype,"wkid",void 0),e$u([y$r({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return {isRequired:null===this.wkid}}}}}}})],S$7.prototype,"wkt",void 0),e$u([o$v("wkt"),o$v("web-scene","wkt")],S$7.prototype,"writeWkt",null),e$u([y$r({type:N$5,json:{write:!0}})],S$7.prototype,"vcsWkid",void 0),e$u([y$r({type:N$5,json:{write:!0}})],S$7.prototype,"latestVcsWkid",void 0),e$u([y$r()],S$7.prototype,"imageCoordinateSystem",void 0),S$7=y$g=e$u([i$X("esri.geometry.SpatialReference")],S$7),S$7.prototype.toJSON.isDefaultToJSON=!0,S$7.GCS_NAD_1927=new S$7({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),S$7.WGS84=new S$7(I$1),S$7.WebMercator=new S$7(c$P),Object.freeze&&(Object.freeze(S$7.GCS_NAD_1927),Object.freeze(S$7.WGS84),Object.freeze(S$7.WebMercator));var k$4=S$7;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
let p$S=class extends a$B{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=k$4.WGS84;}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,r){if(e instanceof k$4)return e;if(null!=e){const t=new k$4;return t.read(e,r),t}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache");}getCacheValue(e){return this.cache[e]}setCacheValue(e,r){this.cache[e]=r;}};e$u([y$r()],p$S.prototype,"type",void 0),e$u([y$r({readOnly:!0})],p$S.prototype,"cache",null),e$u([y$r({readOnly:!0})],p$S.prototype,"extent",null),e$u([y$r({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],p$S.prototype,"hasM",void 0),e$u([y$r({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],p$S.prototype,"hasZ",void 0),e$u([y$r({type:k$4,json:{write:!0}})],p$S.prototype,"spatialReference",void 0),e$u([e$C("spatialReference")],p$S.prototype,"readSpatialReference",null),p$S=e$u([i$X("esri.geometry.Geometry")],p$S);var c$O=p$S;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function n$y(n,u,r,t){return n.x=n.x+u,n.y=n.y+r,null!=t&&null!=n.z&&(n.z=n.z+t),n}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function t$p(t,n){const s=t.x-n.x,r=t.y-n.y,a=t.hasZ&&n.hasZ?t.z-n.z:0;return Math.sqrt(s*s+r*r+a*a)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
class i$L{constructor(i,s,t,e){this.semiMajorAxis=i,this.flattening=s,this.outerAtmosphereRimWidth=t;const h=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*h,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=e||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3;}get radius(){return this.semiMajorAxis}}const s$n=new i$L(6378137,1/298.257223563,3e5,.006694379990137799),t$o=new i$L(3396190,1/169.8944472236118,23e4),e$j=new i$L(1737400,0,0);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const a$z=57.29577951308232,o$g=.017453292519943;function u$w(n){return n*a$z}function l$B(n){return n*o$g}function f$k(n){return null!=n.wkid||null!=n.wkt}const h$o=[0,0];function m$r(n,t,e,i,r){const s=n,a=r;if(a.spatialReference=e,"x"in s&&"x"in a)[a.x,a.y]=t(s.x,s.y,h$o,i);else if("xmin"in s&&"xmin"in a)[a.xmin,a.ymin]=t(s.xmin,s.ymin,h$o,i),[a.xmax,a.ymax]=t(s.xmax,s.ymax,h$o,i);else if("paths"in s&&"paths"in a||"rings"in s&&"rings"in a){const n="paths"in s?s.paths:s.rings,e=[];let r;for(let s=0;s<n.length;s++){const a=n[s];r=[],e.push(r);for(let n=0;n<a.length;n++)r.push(t(a[n][0],a[n][1],[0,0],i)),a[n].length>2&&r[n].push(a[n][2]),a[n].length>3&&r[n].push(a[n][3]);}"paths"in a?a.paths=e:a.rings=e;}else if("points"in s&&"points"in a){const n=s.points,e=[];for(let r=0;r<n.length;r++)e[r]=t(n[r][0],n[r][1],[0,0],i),n[r].length>2&&e[r].push(n[r][2]),n[r].length>3&&e[r].push(n[r][3]);a.points=e;}return r}function x$9(n,r){const s=n&&(f$k(n)?n:n.spatialReference),a=r&&(f$k(r)?r:r.spatialReference);return !(n&&"type"in n&&"mesh"===n.type||r&&"type"in r&&"mesh"===r.type||!s||!a)&&(!!d$t(a,s)||(u$x(a)&&A$4(s)||u$x(s)&&A$4(a)))}function g$9(s,a){const o=s&&s.spatialReference,u=a&&(f$k(a)?a:a.spatialReference);return x$9(o,u)?d$t(o,u)?y$v(s):u$x(u)?m$r(s,M$4,k$4.WebMercator,!1,y$v(s)):A$4(u)?m$r(s,y$f,k$4.WGS84,!1,y$v(s)):null:null}function M$4(n,t,e=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const i=l$B(t);return e[0]=l$B(n)*s$n.radius,e[1]=s$n.halfSemiMajorAxis*Math.log((1+Math.sin(i))/(1-Math.sin(i))),e}function y$f(n,t,e=[0,0],i=!1){const r=u$w(n/s$n.radius);return e[0]=i?r:r-360*Math.floor((r+180)/360),e[1]=u$w(Math.PI/2-2*Math.atan(Math.exp(-1*t/s$n.radius))),e}function d$s(t,e=!1,i=y$v(t)){return m$r(t,M$4,k$4.WebMercator,e,i)}function R$5(t,e=!1,i=y$v(t)){return m$r(t,y$f,k$4.WGS84,e,i)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var y$e;const f$j=[0,0];function g$8(e){return e&&("esri.geometry.SpatialReference"===e.declaredClass||null!=e.wkid)}const x$8=n$T.getLogger("esri.geometry.Point");let w$5=y$e=class extends c$O{constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point";}static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const r=e._get("spatialReference");t._set("spatialReference",Object.isFrozen(r)?r:r.clone());}normalizeCtorArgs(e,t,r,s,i){let o;if(Array.isArray(e))o=e,i=t,e=o[0],t=o[1],r=o[2],s=o[3];else if(e&&"object"==typeof e){if(o=e,e=null!=o.x?o.x:o.longitude,t=null!=o.y?o.y:o.latitude,r=o.z,s=o.m,(i=o.spatialReference)&&"esri.geometry.SpatialReference"!==i.declaredClass&&(i=new k$4(i)),null!=o.longitude||null!=o.latitude)if(null==o.longitude)x$8.warn(".longitude=","Latitude was defined without longitude");else if(null==o.latitude)x$8.warn(".latitude=","Longitude was defined without latitude");else if(!o.declaredClass&&i&&i.isWebMercator){const r=M$4(o.longitude,o.latitude,f$j);e=r[0],t=r[1];}}else g$8(r)?(i=r,r=null):g$8(s)&&(i=s,s=null);const a={x:e,y:t};return null==a.x&&null!=a.y?x$8.warn(".y=","Y coordinate was defined without an X coordinate"):null==a.y&&null!=a.x&&x$8.warn(".x=","X coordinate was defined without a Y coordinate"),null!=i&&(a.spatialReference=i),null!=r&&(a.z=r),null!=s&&(a.m=s),a}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return void 0!==this.m}set hasM(e){e!==(void 0!==this._get("m"))&&(this._set("m",e?0:void 0),this._set("hasM",e));}get hasZ(){return void 0!==this.z}set hasZ(e){e!==(void 0!==this._get("z"))&&(this._set("z",e?0:void 0),this._set("hasZ",e));}get latitude(){const{spatialReference:e,x:t,y:r}=this;if(e){if(e.isWebMercator)return y$f(t,r,f$j)[1];if(e.isGeographic)return r}return null}set latitude(e){const{spatialReference:t,x:r}=this;t&&(t.isWebMercator?this._set("y",M$4(r,e,f$j)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e));}get longitude(){const{x:e,y:t,spatialReference:r}=this;if(r){if(r.isWebMercator)return y$f(e,t,f$j)[0];if(r.isGeographic)return e}return NaN}set longitude(e){const{y:t,spatialReference:r}=this;r&&(r.isWebMercator?this._set("x",M$4(e,t,f$j)[0]):r.isGeographic&&this._set("x",e),this._set("longitude",e));}writeX(e,t,r){t[r]=isNaN(e)?"NaN":e;}readX(e){return "string"==typeof e?NaN:e}clone(){const e=new y$e;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return y$e.copy(e,this),this}equals(e){if(!e)return !1;const{x:t,y:r,z:s,m:i,spatialReference:o}=this,{z:a,m:n}=e;let{x:l,y:p,spatialReference:u}=e;if(!o.equals(u))if(o.isWebMercator&&u.isWGS84)[l,p]=M$4(l,p),u=o;else {if(!o.isWGS84||!u.isWebMercator)return !1;[l,p]=y$f(l,p),u=o;}return t===l&&r===p&&s===a&&i===n&&o.wkid===u.wkid}offset(e,t,r){return n$y(this,e,t,r)}normalize(){if(!this.spatialReference)return this;const e=S$8(this.spatialReference);if(!e)return this;let t=this.x;const[r,s]=e.valid,i=2*s;let o;return t>s?(o=Math.ceil(Math.abs(t-s)/i),t-=o*i):t<r&&(o=Math.ceil(Math.abs(t-r)/i),t+=o*i),this._set("x",t),this}distance(e){return t$p(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write(null,e)}};e$u([y$r({readOnly:!0})],w$5.prototype,"cache",null),e$u([y$r({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],w$5.prototype,"hasM",null),e$u([y$r({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],w$5.prototype,"hasZ",null),e$u([y$r({type:Number})],w$5.prototype,"latitude",null),e$u([y$r({type:Number})],w$5.prototype,"longitude",null),e$u([y$r({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),c$_((e=>isNaN(e)?e:u$N(e)))],w$5.prototype,"x",void 0),e$u([o$v("x")],w$5.prototype,"writeX",null),e$u([e$C("x")],w$5.prototype,"readX",null),e$u([y$r({type:Number,json:{write:!0}})],w$5.prototype,"y",void 0),e$u([y$r({type:Number,json:{write:{overridePolicy(){return {enabled:this.hasZ}}}}})],w$5.prototype,"z",void 0),e$u([y$r({type:Number,json:{write:{overridePolicy(){return {enabled:this.hasM}}}}})],w$5.prototype,"m",void 0),w$5=y$e=e$u([i$X("esri.geometry.Point")],w$5),w$5.prototype.toJSON.isDefaultToJSON=!0;var j$b=w$5;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const n$x=[0,0];function t$n(n,t){return e$i(n,t.x,t.y,t.z)}function r$f(n,t){if(!t.points||t.points.length)return !1;for(const r of t.points)if(!i$K(n,r))return !1;return !0}function u$v(n,t){const{xmin:r,ymin:u,zmin:i,xmax:o,ymax:f,zmax:c}=t;return n.hasZ&&t.hasZ?e$i(n,r,u,i)&&e$i(n,r,f,i)&&e$i(n,o,f,i)&&e$i(n,o,u,i)&&e$i(n,r,u,c)&&e$i(n,r,f,c)&&e$i(n,o,f,c)&&e$i(n,o,u,c):e$i(n,r,u)&&e$i(n,r,f)&&e$i(n,o,f)&&e$i(n,o,u)}function i$K(n,t){return e$i(n,t[0],t[1])}function o$f(n,t){return e$i(n,t[0],t[1],t[2])}function e$i(n,t,r,u){return t>=n.xmin&&t<=n.xmax&&r>=n.ymin&&r<=n.ymax&&(null==u||!n.hasZ||u>=n.zmin&&u<=n.zmax)}function f$i(t,r){return n$x[1]=r.y,n$x[0]=r.x,c$N(t,n$x)}function c$N(n,t){return s$m(n.rings,t)}function s$m(n,t){if(!n)return !1;if(x$7(n))return m$q(!1,n,t);let r=!1;for(let u=0,i=n.length;u<i;u++)r=m$q(r,n[u],t);return r}function x$7(n){return !Array.isArray(n[0][0])}function m$q(n,t,r){const[u,i]=r;let o=n,e=0;for(let f=0,c=t.length;f<c;f++){e++,e===c&&(e=0);const[n,r]=t[f],[s,x]=t[e];(r<i&&x>=i||x<i&&r>=i)&&n+(i-r)/(x-r)*(s-n)<u&&(o=!o);}return o}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function i$J(t,e){return t$n(t,e)}function o$e(n,t){const e=n.hasZ&&t.hasZ;let r,i,o;if(n.xmin<=t.xmin){if(r=t.xmin,n.xmax<r)return !1}else if(r=n.xmin,t.xmax<r)return !1;if(n.ymin<=t.ymin){if(i=t.ymin,n.ymax<i)return !1}else if(i=n.ymin,t.ymax<i)return !1;if(e&&t.hasZ)if(n.zmin<=t.zmin){if(o=t.zmin,n.zmax<o)return !1}else if(o=n.zmin,t.zmax<o)return !1;return !0}function f$h(n,t){const{points:i,hasZ:o}=t,f=o?o$f:i$K;for(const e of i)if(f(n,e))return !0;return !1}const s$l=[0,0],c$M=[0,0],m$p=[0,0],u$u=[0,0],l$A=[s$l,c$M,m$p,u$u],a$y=[[m$p,s$l],[s$l,c$M],[c$M,u$u],[u$u,m$p]];function x$6(n,r){s$l[0]=n.xmin,s$l[1]=n.ymax,c$M[0]=n.xmax,c$M[1]=n.ymax,m$p[0]=n.xmin,m$p[1]=n.ymin,u$u[0]=n.xmax,u$u[1]=n.ymin;for(const e of l$A)if(c$N(r,e))return !0;for(const t of r.rings){if(!t.length)continue;let r=t[0];if(i$K(n,r))return !0;for(let i=1;i<t.length;i++){const o=t[i];if(i$K(n,o)||p$R(r,o,a$y))return !0;r=o;}}return !1}function y$d(n,t){s$l[0]=n.xmin,s$l[1]=n.ymax,c$M[0]=n.xmax,c$M[1]=n.ymax,m$p[0]=n.xmin,m$p[1]=n.ymin,u$u[0]=n.xmax,u$u[1]=n.ymin;const r=t.paths;for(const i of r){if(!r.length)continue;let t=i[0];if(i$K(n,t))return !0;for(let r=1;r<i.length;r++){const o=i[r];if(i$K(n,o)||p$R(t,o,a$y))return !0;t=o;}}return !1}const h$n=[0,0];function g$7(n){for(let t=0;t<n.length;t++){const e=n[t];for(let i=0;i<e.length-1;i++){const r=e[i],o=e[i+1];for(let e=t+1;e<n.length;e++)for(let t=0;t<n[e].length-1;t++){const i=n[e][t],f=n[e][t+1];if(z$2(r,o,i,f,h$n)&&!(h$n[0]===r[0]&&h$n[1]===r[1]||h$n[0]===i[0]&&h$n[1]===i[1]||h$n[0]===o[0]&&h$n[1]===o[1]||h$n[0]===f[0]&&h$n[1]===f[1]))return !0}}const r=e.length;if(!(r<=4))for(let n=0;n<r-3;n++){let t=r-1;0===n&&(t=r-2);const i=e[n],o=e[n+1];for(let r=n+2;r<t;r++){const n=e[r],t=e[r+1];if(z$2(i,o,n,t,h$n)&&!(h$n[0]===i[0]&&h$n[1]===i[1]||h$n[0]===n[0]&&h$n[1]===n[1]||h$n[0]===o[0]&&h$n[1]===o[1]||h$n[0]===t[0]&&h$n[1]===t[1]))return !0}}}return !1}function p$R(n,t,e){for(let r=0;r<e.length;r++)if(z$2(n,t,e[r][0],e[r][1]))return !0;return !1}function z$2(n,t,e,r,i){const[o,f]=n,[s,c]=t,[m,u]=e,[l,a]=r,x=l-m,y=o-m,h=s-o,g=a-u,p=f-u,z=c-f,G=g*h-x*z;if(0===G)return !1;const Z=(x*p-g*y)/G,P=(h*p-z*y)/G;return Z>=0&&Z<=1&&P>=0&&P<=1&&(i&&(i[0]=o+Z*(s-o),i[1]=f+Z*(c-f)),!0)}function G$2(n){switch(n){case"esriGeometryEnvelope":case"extent":return o$e;case"esriGeometryMultipoint":case"multipoint":return f$h;case"esriGeometryPoint":case"point":return i$J;case"esriGeometryPolygon":case"polygon":return x$6;case"esriGeometryPolyline":case"polyline":return y$d;case"mesh":return o$e}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var y$c;function f$g(t){return t&&("esri.geometry.SpatialReference"===t.declaredClass||null!=t.wkid)}function d$r(t,i,e){return null==i?e:null==e?i:t(i,e)}let z$1=y$c=class extends c$O{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0;}normalizeCtorArgs(t,i,e,s,n){return f$g(t)?{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0}:"object"==typeof t?(t.spatialReference=null==t.spatialReference?k$4.WGS84:t.spatialReference,t):{xmin:t,ymin:i,xmax:e,ymax:s,spatialReference:null==n?k$4.WGS84:n}}static fromBounds(t,i){return new y$c({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:i})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const t=new j$b({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return null!=this.mmin&&null!=this.mmax}get hasZ(){return null!=this.zmin&&null!=this.zmax}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){const i=this.center;return null!=t.z&&this.hasZ?this.offset(t.x-i.x,t.y-i.y,t.z-i.z):this.offset(t.x-i.x,t.y-i.y)}clone(){const t=new y$c;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,null!=this.zmin&&(t.zmin=this.zmin,t.zmax=this.zmax),null!=this.mmin&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return !1;const i=this.spatialReference,e=t.spatialReference;return i&&e&&!i.equals(e)&&x$9(i,e)&&(t=i.isWebMercator?d$s(t):R$5(t,!0)),"point"===t.type?t$n(this,t):"extent"===t.type&&u$v(this,t)}equals(t){if(!t)return !1;const i=this.spatialReference,e=t.spatialReference;return i&&e&&!i.equals(e)&&x$9(i,e)&&(t=i.isWebMercator?d$s(t):R$5(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){const i=.5*(1-t),e=this.width*i,s=this.height*i;if(this.xmin+=e,this.ymin+=s,this.xmax-=e,this.ymax-=s,this.hasZ){const t=(this.zmax-this.zmin)*i;this.zmin+=t,this.zmax-=t;}if(this.hasM){const t=(this.mmax-this.mmin)*i;this.mmin+=t,this.mmax-=t;}return this}intersects(t){if(t$M(t))return !1;"mesh"===t.type&&(t=t.extent);const e=this.spatialReference,s=t.spatialReference;e&&s&&!e.equals(s)&&x$9(e,s)&&(t=e.isWebMercator?d$s(t):R$5(t,!0));return G$2(t.type)(this,t)}normalize(){const t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,i,e){return this.xmin+=t,this.ymin+=i,this.xmax+=t,this.ymax+=i,null!=e&&(this.zmin+=e,this.zmax+=e),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=d$r(Math.min,this.zmin,t.zmin),this.zmax=d$r(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=d$r(Math.min,this.mmin,t.mmin),this.mmax=d$r(Math.max,this.mmax,t.mmax)),this}intersection(t){return this.intersects(t)?(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=d$r(Math.max,this.zmin,t.zmin),this.zmax=d$r(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=d$r(Math.max,this.mmin,t.mmin),this.mmax=d$r(Math.min,this.mmax,t.mmax)),this):null}toJSON(t){return this.write(null,t)}_shiftCM(t=S$8(this.spatialReference)){if(!t||!this.spatialReference)return this;const i=this.spatialReference,s=this._getCM(t);if(s){const n=i.isWebMercator?R$5(s):s;this.xmin-=s.x,this.xmax-=s.x,i.isWebMercator||(n.x=this._normalizeX(n.x,t).x),this.spatialReference=new k$4(r$z(i.isWGS84?t.altTemplate:t.wkTemplate,{Central_Meridian:n.x}));}return this}_getCM(t){let i=null;const[e,s]=t.valid,n=this.xmin,r=this.xmax;return n>=e&&n<=s&&(r>=e&&r<=s)||(i=this.center),i}_normalize(t,i,e){const s=this.spatialReference;if(!s)return this;if(!(e=e||S$8(s)))return this;const n=this._getParts(e).map((t=>t.extent));if(n.length<2)return n[0]||this;if(n.length>2)return t?this._shiftCM(e):this.set({xmin:e.valid[0],xmax:e.valid[1]});if(t)return this._shiftCM(e);if(i)return n;let m=!0,a=!0;return n.forEach((t=>{t.hasZ||(m=!1),t.hasM||(a=!1);})),{rings:n.map((t=>{const i=[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]];if(m){const e=(t.zmax-t.zmin)/2;for(let t=0;t<i.length;t++)i[t].push(e);}if(a){const e=(t.mmax-t.mmin)/2;for(let t=0;t<i.length;t++)i[t].push(e);}return i})),hasZ:m,hasM:a,spatialReference:s}}_getParts(t){let i=this.cache._parts;if(!i){i=[];const{ymin:e,ymax:s,spatialReference:n}=this,m=this.width,a=this.xmin,h=this.xmax;let o;t=t||S$8(n);const[x,l]=t.valid;o=this._normalizeX(this.xmin,t);const p=o.x,c=o.frameId;o=this._normalizeX(this.xmax,t);const u=o.x,f=o.frameId,d=p===u&&m>0;if(m>2*l){const t=new y$c(a<h?p:u,e,l,s,n),r=new y$c(x,e,a<h?u:p,s,n),m=new y$c(0,e,l,s,n),o=new y$c(x,e,0,s,n),d=[],z=[];t.contains(m)&&d.push(c),t.contains(o)&&z.push(c),r.contains(m)&&d.push(f),r.contains(o)&&z.push(f);for(let i=c+1;i<f;i++)d.push(i),z.push(i);i.push({extent:t,frameIds:[c]},{extent:r,frameIds:[f]},{extent:m,frameIds:d},{extent:o,frameIds:z});}else p>u||d?i.push({extent:new y$c(p,e,l,s,n),frameIds:[c]},{extent:new y$c(x,e,u,s,n),frameIds:[f]}):i.push({extent:new y$c(p,e,u,s,n),frameIds:[c]});this.cache._parts=i;}const e=this.hasZ,s=this.hasM;if(e||s){const t={};e&&(t.zmin=this.zmin,t.zmax=this.zmax),s&&(t.mmin=this.mmin,t.mmax=this.mmax);for(let e=0;e<i.length;e++)i[e].extent.set(t);}return i}_normalizeX(t,i){const[e,s]=i.valid,n=2*s;let r,m=0;return t>s?(r=Math.ceil(Math.abs(t-s)/n),t-=r*n,m=r):t<e&&(r=Math.ceil(Math.abs(t-e)/n),t+=r*n,m=-r),{x:t,frameId:m}}};e$u([y$r({readOnly:!0})],z$1.prototype,"cache",null),e$u([y$r({readOnly:!0})],z$1.prototype,"center",null),e$u([y$r({readOnly:!0})],z$1.prototype,"extent",null),e$u([y$r({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],z$1.prototype,"hasM",null),e$u([y$r({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],z$1.prototype,"hasZ",null),e$u([y$r({readOnly:!0})],z$1.prototype,"height",null),e$u([y$r({readOnly:!0})],z$1.prototype,"width",null),e$u([y$r({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],z$1.prototype,"xmin",void 0),e$u([y$r({type:Number,json:{write:!0}})],z$1.prototype,"ymin",void 0),e$u([y$r({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return {enabled:this.hasM}}}}})],z$1.prototype,"mmin",void 0),e$u([y$r({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return {enabled:this.hasZ}}}}})],z$1.prototype,"zmin",void 0),e$u([y$r({type:Number,json:{write:!0}})],z$1.prototype,"xmax",void 0),e$u([y$r({type:Number,json:{write:!0}})],z$1.prototype,"ymax",void 0),e$u([y$r({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return {enabled:this.hasM}}}}})],z$1.prototype,"mmax",void 0),e$u([y$r({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return {enabled:this.hasZ}}}}})],z$1.prototype,"zmax",void 0),z$1=y$c=e$u([i$X("esri.geometry.Extent")],z$1),z$1.prototype.toJSON.isDefaultToJSON=!0;var M$3=z$1;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function h$m(h,a,s=!1){let{hasM:t,hasZ:e}=h;Array.isArray(a)?4!==a.length||t||e?3===a.length&&s&&!t?(e=!0,t=!1):3===a.length&&t&&e&&(t=!1,e=!1):(t=!0,e=!0):(e=!e&&a.hasZ&&(!t||a.hasM),t=!t&&a.hasM&&(!e||a.hasZ)),h.hasZ=e,h.hasM=t;}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var h$l;function l$z(t){return (s,e)=>null==s?e:null==e?s:t(s,e)}function c$L(t){return t&&("esri.geometry.SpatialReference"===t.declaredClass||null!=t.wkid)}let u$t=h$l=class extends c$O{constructor(...t){super(...t),this.points=[],this.type="multipoint";}normalizeCtorArgs(t,s){if(!t&&!s)return null;const e={};Array.isArray(t)?(e.points=t,e.spatialReference=s):c$L(t)?e.spatialReference=t:(t.points&&(e.points=t.points),t.spatialReference&&(e.spatialReference=t.spatialReference),t.hasZ&&(e.hasZ=t.hasZ),t.hasM&&(e.hasM=t.hasM));const r=e.points&&e.points[0];return r&&(void 0===e.hasZ&&void 0===e.hasM?(e.hasZ=r.length>2,e.hasM=!1):void 0===e.hasZ?e.hasZ=r.length>3:void 0===e.hasM&&(e.hasM=r.length>3)),e}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const t=this.points;if(!t.length)return null;const s=new M$3,e=this.hasZ,r=this.hasM,i=e?3:2,o=t[0],n=l$z(Math.min),p=l$z(Math.max);let h,c,u,m,[f,y]=o,[d,g]=o;for(let a=0,l=t.length;a<l;a++){const s=t[a],[o,l]=s;if(f=n(f,o),y=n(y,l),d=p(d,o),g=p(g,l),e&&s.length>2){const t=s[2];h=n(h,t),u=p(u,t);}if(r&&s.length>i){const t=s[i];c=n(c,t),m=p(m,t);}}return s.xmin=f,s.ymin=y,s.xmax=d,s.ymax=g,s.spatialReference=this.spatialReference,e?(s.zmin=h,s.zmax=u):(s.zmin=null,s.zmax=null),r?(s.mmin=c,s.mmax=m):(s.mmin=null,s.mmax=null),s}writePoints(t,e){e.points=y$v(this.points);}addPoint(t){return h$m(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}clone(){const t={points:y$v(this.points),spatialReference:this.spatialReference};return this.hasZ&&(t.hasZ=!0),this.hasM&&(t.hasM=!0),new h$l(t)}getPoint(t){if(!this._validateInputs(t))return null;const s=this.points[t],e={x:s[0],y:s[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(e.z=s[2],r=3),this.hasM&&(e.m=s[r]),new j$b(e)}removePoint(t){if(!this._validateInputs(t))return null;const s=new j$b(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),s}setPoint(t,s){return this._validateInputs(t)?(h$m(this,s),Array.isArray(s)||(s=s.toArray()),this.points[t]=s,this.notifyChange("points"),this):this}toJSON(t){return this.write(null,t)}_validateInputs(t){return null!=t&&t>=0&&t<this.points.length}};e$u([y$r({readOnly:!0})],u$t.prototype,"cache",null),e$u([y$r()],u$t.prototype,"extent",null),e$u([y$r({type:[[Number]],json:{write:{isRequired:!0}}})],u$t.prototype,"points",void 0),e$u([o$v("points")],u$t.prototype,"writePoints",null),u$t=h$l=e$u([i$X("esri.geometry.Multipoint")],u$t),u$t.prototype.toJSON.isDefaultToJSON=!0;var m$o=u$t;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function e$h(n,t){const e=t[0]-n[0],r=t[1]-n[1];if(n.length>2&&t.length>2){const o=n[2]-t[2];return Math.sqrt(e*e+r*r+o*o)}return Math.sqrt(e*e+r*r)}function r$e(n,t,e){const r=n[0]+e*(t[0]-n[0]),o=n[1]+e*(t[1]-n[1]);return n.length>2&&t.length>2?[r,o,n[2]+e*(t[2]-n[2])]:[r,o]}function i$I(n,t){return r$e(n,t,.5)}function f$f(n,t,e){const r=n.length;let o=0,i=0,s=0;for(let l=0;l<r;l++){const f=n[l],u=n[(l+1)%r];let h=2;o+=f[0]*u[1]-u[0]*f[1],f.length>2&&u.length>2&&e&&(i+=f[0]*u[2]-u[0]*f[2],h=3),f.length>h&&u.length>h&&t&&(s+=f[0]*u[h]-u[0]*f[h]);}return o<=0&&i<=0&&s<=0}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function e$g(n){return n?r$d(n.rings,n.hasZ):null}function r$d(n,t){if(!n||!n.length)return null;const l=[],e=[],r=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let u=0,i=n.length;u<i;u++){const l=o$d(n[u],t,r);l&&e.push(l);}if(e.sort(((n,l)=>{let e=n[2]-l[2];return 0===e&&t&&(e=n[4]-l[4]),e})),e.length){let n=6*e[0][2];l[0]=e[0][0]/n,l[1]=e[0][1]/n,t&&(n=6*e[0][4],l[2]=0!==n?e[0][3]/n:0),(l[0]<r[0]||l[0]>r[1]||l[1]<r[2]||l[1]>r[3]||t&&(l[2]<r[4]||l[2]>r[5]))&&(l.length=0);}if(!l.length){const e=n[0]&&n[0].length?u$s(n[0],t):null;if(!e)return null;l[0]=e[0],l[1]=e[1],t&&e.length>2&&(l[2]=e[2]);}return l}function o$d(n,t,l){let e=0,r=0,o=0,u=0,i=0;for(let g=0;g<n.length;g++){const h=n[g],[s,f,c]=h,m=n[(g+1)%n.length],[x,a,y]=m;let p=s*a-x*f;u+=p,e+=(s+x)*p,r+=(f+a)*p,t&&h.length>2&&m.length>2&&(p=s*y-x*c,o+=(c+y)*p,i+=p),s<l[0]&&(l[0]=s),s>l[1]&&(l[1]=s),f<l[2]&&(l[2]=f),f>l[3]&&(l[3]=f),t&&(c<l[4]&&(l[4]=c),c>l[5]&&(l[5]=c));}if(u>0&&(u*=-1),i>0&&(i*=-1),!u)return null;const h=[e,r,.5*u];return t&&(h[3]=o,h[4]=.5*i),h}function u$s(l,e){const r=e?[0,0,0]:[0,0],o=e?[0,0,0]:[0,0];let u=0,i=0,h=0,g=0;for(let s=0,f=l.length;s<f-1;s++){const f=l[s],c=l[s+1];if(f&&c){r[0]=f[0],r[1]=f[1],o[0]=c[0],o[1]=c[1],e&&f.length>2&&c.length>2&&(r[2]=f[2],o[2]=c[2]);const l=e$h(r,o);if(l){u+=l;const n=i$I(f,c);i+=l*n[0],h+=l*n[1],e&&n.length>2&&(g+=l*n[2]);}}}return u>0?e?[i/u,h/u,g/u]:[i/u,h/u]:l.length?l[0]:null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function n$w(n){return void 0!==n.xmin&&void 0!==n.ymin&&void 0!==n.xmax&&void 0!==n.ymax}function t$m(n){return void 0!==n.points}function e$f(n){return void 0!==n.x&&void 0!==n.y}function o$c(n){return void 0!==n.paths}function i$H(n){return void 0!==n.rings}function l$y(n){return (t,e)=>null==t?e:null==e?t:n(t,e)}const r$c=l$y(Math.min),u$r=l$y(Math.max);function c$K(l,r){return o$c(r)?h$k(l,r.paths,!1,!1):i$H(r)?h$k(l,r.rings,!1,!1):t$m(r)?s$k(l,r.points,!1,!1,!1,!1):n$w(r)?g$6(l,r):(e$f(r)&&(l[0]=r.x,l[1]=r.y,l[2]=r.x,l[3]=r.y),l)}function f$e(l,r){return o$c(r)?h$k(l,r.paths,!0,!1):i$H(r)?h$k(l,r.rings,!0,!1):t$m(r)?s$k(l,r.points,!0,!1,!0,!1):n$w(r)?g$6(l,r,!0,!1,!0,!1):(e$f(r)&&(l[0]=r.x,l[1]=r.y,l[2]=r.z,l[3]=r.x,l[4]=r.y,l[5]=r.z),l)}function h$k(n,t,e,o){const i=e?3:2;if(!t.length||!t[0].length)return null;let l,c,f,h,[g,s]=t[0][0],[x,m]=t[0][0];for(let a=0;a<t.length;a++){const n=t[a];for(let t=0;t<n.length;t++){const a=n[t],[d,v]=a;if(g=r$c(g,d),s=r$c(s,v),x=u$r(x,d),m=u$r(m,v),e&&a.length>2){const n=a[2];l=r$c(l,n),c=u$r(c,n);}if(o&&a.length>i){const n=a[i];f=r$c(l,n),h=u$r(c,n);}}}return e?o?(n[0]=g,n[1]=s,n[2]=l,n[3]=f,n[4]=x,n[5]=m,n[6]=c,n[7]=h,n.length=8,n):(n[0]=g,n[1]=s,n[2]=l,n[3]=x,n[4]=m,n[5]=c,n.length=6,n):o?(n[0]=g,n[1]=s,n[2]=f,n[3]=x,n[4]=m,n[5]=h,n.length=6,n):(n[0]=g,n[1]=s,n[2]=x,n[3]=m,n.length=4,n)}function g$6(n,t,e,o,i,l){const r=t.xmin,u=t.xmax,c=t.ymin,f=t.ymax;let h=t.zmin,g=t.zmax,s=t.mmin,x=t.mmax;return i?(h=h||0,g=g||0,l?(s=s||0,x=x||0,n[0]=r,n[1]=c,n[2]=h,n[3]=s,n[4]=u,n[5]=f,n[6]=g,n[7]=x,n):(n[0]=r,n[1]=c,n[2]=h,n[3]=u,n[4]=f,n[5]=g,n)):l?(s=s||0,x=x||0,n[0]=r,n[1]=c,n[2]=s,n[3]=u,n[4]=f,n[5]=x,n):(n[0]=r,n[1]=c,n[2]=u,n[3]=f,n)}function s$k(n,t,e,o,i,l){const c=e?3:2,f=o&&l,h=e&&i;if(!t.length||!t[0].length)return null;let g,s,x,m,[a,d]=t[0],[v,y]=t[0];for(let p=0;p<t.length;p++){const n=t[p],[e,o]=n;if(a=r$c(a,e),d=r$c(d,o),v=u$r(v,e),y=u$r(y,o),h&&n.length>2){const t=n[2];g=r$c(g,t),s=u$r(s,t);}if(f&&n.length>c){const t=n[c];x=r$c(g,t),m=u$r(s,t);}}return i?(g=g||0,s=s||0,l?(x=x||0,m=m||0,n[0]=a,n[1]=d,n[2]=g,n[3]=x,n[4]=v,n[5]=y,n[6]=s,n[7]=m,n):(n[0]=a,n[1]=d,n[2]=g,n[3]=v,n[4]=y,n[5]=s,n)):l?(x=x||0,m=m||0,n[0]=a,n[1]=d,n[2]=x,n[3]=v,n[4]=y,n[5]=m,n):(n[0]=a,n[1]=d,n[2]=v,n[3]=y,n)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function t$l(n){return void 0!==n.xmin&&void 0!==n.ymin&&void 0!==n.xmax&&void 0!==n.ymax}function u$q(n){return void 0!==n.points}function m$n(n){return void 0!==n.x&&void 0!==n.y}function o$b(n){return void 0!==n.paths}function r$b(n){return void 0!==n.rings}const x$5=[];function a$x(n,i,t,u){return {xmin:n,ymin:i,xmax:t,ymax:u}}function c$J(n,i,t,u,m,o){return {xmin:n,ymin:i,zmin:t,xmax:u,ymax:m,zmax:o}}function s$j(n,i,t,u,m,o){return {xmin:n,ymin:i,mmin:t,xmax:u,ymax:m,mmax:o}}function e$e(n,i,t,u,m,o,r,x){return {xmin:n,ymin:i,zmin:t,mmin:u,xmax:m,ymax:o,zmax:r,mmax:x}}function f$d(n,i=!1,t=!1){return i?t?e$e(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]):c$J(n[0],n[1],n[2],n[3],n[4],n[5]):t?s$j(n[0],n[1],n[2],n[3],n[4],n[5]):a$x(n[0],n[1],n[2],n[3])}function l$x(n){return n?t$l(n)?n:m$n(n)?d$q(n):r$b(n)?v$6(n):o$b(n)?h$j(n):u$q(n)?y$b(n):null:null}function y$b(i){const{hasZ:t,hasM:u,points:m}=i;return f$d(s$k(x$5,m,t,u),t,u)}function d$q(n){const{x:i,y:t,z:u,m}=n,o=null!=m;return null!=u?o?e$e(i,t,u,m,i,t,u,m):c$J(i,t,u,i,t,u):o?s$j(i,t,m,i,t,m):a$x(i,t,i,t)}function v$6(n){const{hasZ:t,hasM:u,rings:m}=n,o=h$k(x$5,m,t,u);return o?f$d(o,t,u):null}function h$j(n){const{hasZ:t,hasM:u,paths:m}=n,o=h$k(x$5,m,t,u);return o?f$d(o,t,u):null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var d$p;function R$4(t){return !Array.isArray(t[0])}let j$a=d$p=class extends c$O{constructor(...t){super(...t),this.rings=[],this.type="polygon";}static fromExtent(t){const r=t.clone().normalize(),e=t.spatialReference;let s=!1,i=!1;r.map((t=>{t.hasZ&&(s=!0),t.hasM&&(i=!0);}));const n={rings:r.map((function(t){const r=[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]];if(s&&t.hasZ){const e=t.zmin+.5*(t.zmax-t.zmin);for(let t=0;t<r.length;t++)r[t].push(e);}if(i&&t.hasM){const e=t.mmin+.5*(t.mmax-t.mmin);for(let t=0;t<r.length;t++)r[t].push(e);}return r})),spatialReference:e};return s&&(n.hasZ=!0),i&&(n.hasM=!0),new d$p(n)}normalizeCtorArgs(t,r){let e,s,i=null,o=null;return t&&!Array.isArray(t)?(i=t.rings?t.rings:null,r||(t.spatialReference?r=t.spatialReference:t.rings||(r=t)),e=t.hasZ,s=t.hasM):i=t,i=i||[],r=r||k$4.WGS84,i.length&&i[0]&&null!=i[0][0]&&"number"==typeof i[0][0]&&(i=[i]),o=i[0]&&i[0][0],o&&(void 0===e&&void 0===s?(e=o.length>2,s=!1):void 0===e?e=!s&&o.length>3:void 0===s&&(s=!e&&o.length>3)),{rings:i,spatialReference:r,hasZ:e,hasM:s}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const t=e$g(this);if(!t||isNaN(t[0])||isNaN(t[1])||this.hasZ&&isNaN(t[2]))return null;const r=new j$b;return r.x=t[0],r.y=t[1],r.spatialReference=this.spatialReference,this.hasZ&&(r.z=t[2]),r}get extent(){const{spatialReference:t}=this,r=v$6(this);if(!r)return null;const e=new M$3(r);return e.spatialReference=t,e}get isSelfIntersecting(){return g$7(this.rings)}writeRings(t,e){e.rings=y$v(this.rings);}addRing(t){if(!t)return;const r=this.rings,e=r.length;if(R$4(t)){const s=[];for(let r=0,e=t.length;r<e;r++)s[r]=t[r].toArray();r[e]=s;}else r[e]=t.concat();return this.notifyChange("rings"),this}clone(){const t=new d$p;return t.spatialReference=this.spatialReference,t.rings=y$v(this.rings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}contains(t){return !!t&&(x$9(t,this.spatialReference)&&(t=g$9(t,this.spatialReference)),f$i(this,t))}isClockwise(t){let r;return r=R$4(t)?t.map((t=>this.hasZ?this.hasM?[t.x,t.y,t.z,t.m]:[t.x,t.y,t.z]:[t.x,t.y])):t,f$f(r,this.hasM,this.hasZ)}getPoint(t,r){if(!this._validateInputs(t,r))return null;const e=this.rings[t][r],s=this.hasZ,i=this.hasM;return s&&!i?new j$b(e[0],e[1],e[2],void 0,this.spatialReference):i&&!s?new j$b(e[0],e[1],void 0,e[2],this.spatialReference):s&&i?new j$b(e[0],e[1],e[2],e[3],this.spatialReference):new j$b(e[0],e[1],this.spatialReference)}insertPoint(t,r,e){return this._validateInputs(t,r,!0)?(h$m(this,e),Array.isArray(e)||(e=e.toArray()),this.rings[t].splice(r,0,e),this.notifyChange("rings"),this):this}removePoint(t,r){if(!this._validateInputs(t,r))return null;const e=new j$b(this.rings[t].splice(r,1)[0],this.spatialReference);return this.notifyChange("rings"),e}removeRing(t){if(!this._validateInputs(t,null))return null;const r=this.rings.splice(t,1)[0],e=this.spatialReference,s=r.map((t=>new j$b(t,e)));return this.notifyChange("rings"),s}setPoint(t,r,e){return this._validateInputs(t,r)?(h$m(this,e),Array.isArray(e)||(e=e.toArray()),this.rings[t][r]=e,this.notifyChange("rings"),this):this}_validateInputs(t,r,e=!1){if(null==t||t<0||t>=this.rings.length)return !1;if(null!=r){const s=this.rings[t];if(e&&(r<0||r>s.length))return !1;if(!e&&(r<0||r>=s.length))return !1}return !0}toJSON(t){return this.write(null,t)}};e$u([y$r({readOnly:!0})],j$a.prototype,"cache",null),e$u([y$r({readOnly:!0})],j$a.prototype,"centroid",null),e$u([y$r({readOnly:!0})],j$a.prototype,"extent",null),e$u([y$r({readOnly:!0})],j$a.prototype,"isSelfIntersecting",null),e$u([y$r({type:[[[Number]]],json:{write:{isRequired:!0}}})],j$a.prototype,"rings",void 0),e$u([o$v("rings")],j$a.prototype,"writeRings",null),j$a=d$p=e$u([i$X("esri.geometry.Polygon")],j$a),j$a.prototype.toJSON.isDefaultToJSON=!0;var x$4=j$a;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var c$I;function u$p(t){return !Array.isArray(t[0])}let f$c=c$I=class extends c$O{constructor(...t){super(...t),this.paths=[],this.type="polyline";}normalizeCtorArgs(t,e){let r,s,i=null,a=null;return t&&!Array.isArray(t)?(i=t.paths?t.paths:null,e||(t.spatialReference?e=t.spatialReference:t.paths||(e=t)),r=t.hasZ,s=t.hasM):i=t,i=i||[],e=e||k$4.WGS84,i.length&&i[0]&&null!=i[0][0]&&"number"==typeof i[0][0]&&(i=[i]),a=i[0]&&i[0][0],a&&(void 0===r&&void 0===s?(r=a.length>2,s=!1):void 0===r?r=!s&&a.length>3:void 0===s&&(s=!r&&a.length>3)),{paths:i,spatialReference:e,hasZ:r,hasM:s}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:t}=this,e=h$j(this);if(!e)return null;const r=new M$3(e);return r.spatialReference=t,r}writePaths(t,r){r.paths=y$v(this.paths);}addPath(t){if(!t)return;const e=this.paths,r=e.length;if(u$p(t)){const s=[];for(let e=0,r=t.length;e<r;e++)s[e]=t[e].toArray();e[r]=s;}else e[r]=t.concat();return this.notifyChange("paths"),this}clone(){const t=new c$I;return t.spatialReference=this.spatialReference,t.paths=y$v(this.paths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const r=this.paths[t][e],s=this.hasZ,i=this.hasM;return s&&!i?new j$b(r[0],r[1],r[2],void 0,this.spatialReference):i&&!s?new j$b(r[0],r[1],void 0,r[2],this.spatialReference):s&&i?new j$b(r[0],r[1],r[2],r[3],this.spatialReference):new j$b(r[0],r[1],this.spatialReference)}insertPoint(t,e,r){return this._validateInputs(t,e,!0)?(h$m(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[t].splice(e,0,r),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],r=this.spatialReference,s=e.map((t=>new j$b(t,r)));return this.notifyChange("paths"),s}removePoint(t,e){if(!this._validateInputs(t,e))return null;const r=new j$b(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),r}setPoint(t,e,r){return this._validateInputs(t,e)?(h$m(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[t][e]=r,this.notifyChange("paths"),this):this}_validateInputs(t,e,r=!1){if(null==t||t<0||t>=this.paths.length)return !1;if(null!=e){const s=this.paths[t];if(r&&(e<0||e>s.length))return !1;if(!r&&(e<0||e>=s.length))return !1}return !0}toJSON(t){return this.write(null,t)}};e$u([y$r({readOnly:!0})],f$c.prototype,"cache",null),e$u([y$r({readOnly:!0})],f$c.prototype,"extent",null),e$u([y$r({type:[[[Number]]],json:{write:{isRequired:!0}}})],f$c.prototype,"paths",void 0),e$u([o$v("paths")],f$c.prototype,"writePaths",null),f$c=c$I=e$u([i$X("esri.geometry.Polyline")],f$c),f$c.prototype.toJSON.isDefaultToJSON=!0;var m$m=f$c;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const i$G=o$A()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),t$k=o$A()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function u$o(o){return void 0!==o.xmin&&void 0!==o.ymin&&void 0!==o.xmax&&void 0!==o.ymax}function s$i(o){return void 0!==o.points}function l$w(o){return void 0!==o.x&&void 0!==o.y}function f$b(o){return void 0!==o.paths}function y$a(o){return void 0!==o.rings}function p$Q(m){return m?m instanceof c$O?m:l$w(m)?j$b.fromJSON(m):f$b(m)?m$m.fromJSON(m):y$a(m)?x$4.fromJSON(m):s$i(m)?m$o.fromJSON(m):u$o(m)?M$3.fromJSON(m):null:null}function d$o(o){return o?l$w(o)?"esriGeometryPoint":f$b(o)?"esriGeometryPolyline":y$a(o)?"esriGeometryPolygon":u$o(o)?"esriGeometryEnvelope":s$i(o)?"esriGeometryMultipoint":null:null}const v$5={esriGeometryPoint:j$b,esriGeometryPolyline:m$m,esriGeometryPolygon:x$4,esriGeometryEnvelope:M$3,esriGeometryMultipoint:m$o};function G$1(o){return o&&v$5[o]||null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const i$F={base:c$O,key:"type",typeMap:{extent:M$3,multipoint:m$o,point:j$b,polyline:m$m,polygon:x$4}};k$a(i$F);

/**
 * Identifies a standard geography level in Geoenrichment data.
 * Examples of standard geography levels are: ZIP codes in USA; provinces in Canada; districts in GB.
 * Full list of standard geography levels in all countries can be obtained with 'GeoenrichmentTask.getStandardGeographyLevels' method.
 */
class GeographyLevel {
  /**
   * Can be created from a json object or by passing some parameters directly.
   */
  constructor(source) {
    if (source) {
      this.layerID = source.layer || source.layerID || null;
      this.hierarchy = source.hierarchy || null;
      this.countryID = source.sourceCountry || source.countryID || null;
    }
  }
  toJSON() {
    const json = {};
    if (this.layerID) {
      json.layer = this.layerID;
    }
    if (this.hierarchy) {
      json.hierarchy = this.hierarchy;
    }
    if (this.countryID) {
      json.sourceCountry = this.countryID;
    }
    return json;
  }
  static fromJsonArray(jsonArray) {
    const result = [];
    if (!jsonArray) {
      return result;
    }
    for (let i = 0; i < jsonArray.length; i++) {
      let obj = jsonArray[i];
      if (!(obj instanceof GeographyLevel)) {
        obj = new GeographyLevel(obj);
      }
      result.push(obj);
    }
    return result;
  }
  static toJsonArray(array) {
    if (!array || array.length === 0) {
      return null;
    }
    const result = [];
    for (let i = 0; i < array.length; i++) {
      result.push(array[i].toJSON());
    }
    return result;
  }
}

class StudyAreaOptions {
}

/**
 * When used with point-type study areas, indicates that drive time buffer will be built aroud given point.
 */
class DriveBuffer extends StudyAreaOptions {
  /**
   * Can be created from a json object or by passing some parameters directly.
   */
  constructor(source) {
    super();
    if (source) {
      if (source.bufferRadii) {
        this.radii = source.bufferRadii;
      }
      else if (source.radius) {
        this.radii = [source.radius];
      }
      else if (source.radii) {
        this.radii = source.radii;
      }
      this.units = source.bufferUnits || source.units;
    }
    // default parameters
    if (!this.radii) {
      this.radii = [5];
    }
    if (!this.units) {
      this.units = "esriDriveTimeUnitsMinutes";
    }
  }
  toJSON() {
    return {
      areaType: "DriveTimeBuffer",
      bufferUnits: this.units,
      bufferRadii: this.radii && this.radii.slice()
    };
  }
}

/**
 *  Indicates that study area will be used to retrive intersecting standard geographies and Enrichment calculations will be performed for those standard geographies rather than the original study area.
 *
 * For example, if study area is a point then the default Enrichment behaviour is to build 1-mile circle around that point; using IntersectingGeographies as study area options changes the behaviour to retrieve e.g. ZIP code intersecting that point.
 */
class IntersectingGeographies extends StudyAreaOptions {
  /**
   * Can be created from a json object or by passing some parameters directly.
   */
  constructor(source) {
    super();
    let levels;
    if (source) {
      levels = source.intersectingGeographies || source.levels || source.geographyLevels;
    }
    else {
      levels = [{ layer: "Admin2" }];
    }
    this.geographyLevels = GeographyLevel.fromJsonArray(levels);
  }
  toJSON() {
    return {
      areaType: "StandardGeography",
      intersectingGeographies: GeographyLevel.toJsonArray(this.geographyLevels)
    };
  }
}

/**
 * When used with point-type or line-type study areas, indicates that buffer will be built aroud given feature
 */
class RingBuffer extends StudyAreaOptions {
  /**
   * Can be created from a json object or by passing some parameters directly.
   */
  constructor(source) {
    super();
    if (source) {
      if (source.bufferRadii) {
        this.radii = source.bufferRadii;
      }
      else if (source.radius) {
        this.radii = [source.radius];
      }
      else if (source.radii) {
        this.radii = source.radii;
      }
      this.units = source.bufferUnits || source.units;
    }
    // default parameters
    if (!this.radii) {
      this.radii = [1];
    }
    if (!this.units) {
      this.units = "esriMiles";
    }
  }
  toJSON() {
    return {
      areaType: "RingBuffer",
      bufferUnits: this.units,
      bufferRadii: this.radii && this.radii.slice()
    };
  }
}

// geoenrichment.tasks
/**
 * Utility function to deserialize study area options from JSON.
 */
const studyAreaOptionsFromJson = function (json) {
  if (json) {
    switch (json.areaType) {
      case "DriveTimeBuffer":
        return new DriveBuffer(json);
      case "StandardGeography":
        return new IntersectingGeographies(json);
    }
    /*
    Probably some legacy format
    switch (json.type) {
      case "DriveTime":
        return new DriveBuffer(json);
      case "StdGeo":
        return new IntersectingGeographies(json);
    }
    */
    return new RingBuffer(json);
  }
  return new RingBuffer();
};

// geoenrichment.tasks
/**
 * Represents a study area. This class is abstract, see GeometryStudyArea, StandardGeographyStudyArea and AddressStudyArea instead.
 */
class StudyArea {
  /**
   * Can be created from a json object or by passing some parameters directly.
   */
  constructor(source) {
    /**
     * Determines whether response will also include actual study area geometry.
     * For example, if input study area is a line, the response will inlude buffer polygon built around the line.
     * Defaults to false. Settings EnrichParameters.returnGeometry to true will take precedence over this value and geometry will be returned anyway.
     */
    this.returnGeometry = false;
    if (source) {
      if (source.attributes) {
        this.attributes = source.attributes;
      }
      if (source.areaType) {
        this.options = studyAreaOptionsFromJson(source);
      }
      else if (source.options instanceof StudyAreaOptions) {
        this.options = source.options;
      }
      this.returnGeometry = !!source.returnGeometry;
      this.comparisonGeographyLevels = GeographyLevel.fromJsonArray(source.comparisonGeographyLevels || source.comparisonLevels);
    }
    this.comparisonGeographyLevels = this.comparisonGeographyLevels || [];
  }
  getGeomType() {
    throw new Error("Not implemented"); // abstract
  }
  /**
   * Converts this study area to serializable JSON.
   */
  toJSON() {
    const json = this.options ? this.options.toJSON() : {};
    if (this.attributes) {
      json.attributes = this.attributes;
    }
    if (this.returnGeometry) {
      json.returnGeometry = true;
    }
    const comparisonLevels = GeographyLevel.toJsonArray(this.comparisonGeographyLevels);
    if (comparisonLevels) {
      json.comparisonLevels = comparisonLevels;
    }
    return json;
  }
}

/**
 * Study area defined by address.
 */
class AddressStudyArea extends StudyArea {
  /**
   * Can be created from a json object or by passing some parameters directly.
   */
  constructor(source) {
    super(source);
    /**
     * Object with address fields.
     * @example
     * 1. { text: "380 New York St. Redlands, CA 92373" }
     * 2. { Address: "380 New York St.", Admin1: "Redlands", Admin2: "CA", Postal: "92373", CountryCode: "USA" }
     * 3. { text: "12 Concorde Place Toronto ON M3C 3R8", sourceCountry: "Canada" }
     */
    this.address = null;
    this.address = source && source.address;
  }
  getGeomType() {
    return "point";
  }
  toJSON() {
    const json = super.toJSON();
    json.address = this.address;
    return json;
  }
}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const c$H=new t$I({inherited:"inherited",codedValue:"coded-value",range:"range"});let i$E=class extends a$B{constructor(r){super(r),this.name=null,this.type=null;}};e$u([y$r({type:String,json:{write:!0}})],i$E.prototype,"name",void 0),e$u([r$v(c$H)],i$E.prototype,"type",void 0),i$E=e$u([i$X("esri.layers.support.Domain")],i$E);var a$w=i$E;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var t$j;let p$P=t$j=class extends a$B{constructor(r){super(r),this.name=null,this.code=null;}clone(){return new t$j({name:this.name,code:this.code})}};e$u([y$r({type:String,json:{write:!0}})],p$P.prototype,"name",void 0),e$u([y$r({type:[String,Number],json:{write:!0}})],p$P.prototype,"code",void 0),p$P=t$j=e$u([i$X("esri.layers.support.CodedValue")],p$P);var c$G=p$P;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var a$v;let i$D=a$v=class extends a$w{constructor(o){super(o),this.codedValues=null,this.type="coded-value";}getName(o){let e=null;if(this.codedValues){const r=String(o);this.codedValues.some((o=>(String(o.code)===r&&(e=o.name),!!e)));}return e}clone(){return new a$v({codedValues:y$v(this.codedValues),name:this.name})}};e$u([y$r({type:[c$G],json:{write:!0}})],i$D.prototype,"codedValues",void 0),e$u([r$v({codedValue:"coded-value"})],i$D.prototype,"type",void 0),i$D=a$v=e$u([i$X("esri.layers.support.CodedValueDomain")],i$D);var u$n=i$D;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var t$i;let p$O=t$i=class extends a$w{constructor(r){super(r),this.type="inherited";}clone(){return new t$i}};e$u([r$v({inherited:"inherited"})],p$O.prototype,"type",void 0),p$O=t$i=e$u([i$X("esri.layers.support.InheritedDomain")],p$O);var i$C=p$O;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var s$h;let i$B=s$h=class extends a$w{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range";}clone(){return new s$h({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};e$u([y$r({type:Number,json:{type:[Number],read:{source:"range",reader:(e,r)=>r.range&&r.range[1]},write:{enabled:!1,overridePolicy(){return {enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(e,r,o){r[o]=[this.minValue||0,e];}}}})],i$B.prototype,"maxValue",void 0),e$u([y$r({type:Number,json:{type:[Number],read:{source:"range",reader:(e,r)=>r.range&&r.range[0]},write:{target:"range",writer(e,r,o){r[o]=[e,this.maxValue||0];}}}})],i$B.prototype,"minValue",void 0),e$u([r$v({range:"range"})],i$B.prototype,"type",void 0),i$B=s$h=e$u([i$X("esri.layers.support.RangeDomain")],i$B);var n$v=i$B;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var o$a;function t$h(e,n){switch(e.type){case"range":{const a="range"in e?e.range[0]:e.minValue,r="range"in e?e.range[1]:e.maxValue;if(+n<a||+n>r)return o$a.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(null==e.codedValues||e.codedValues.every((e=>null==e||e.code!==n)))return o$a.INVALID_CODED_VALUE}return null}!function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value";}(o$a||(o$a={}));const u$m={key:"type",base:a$w,typeMap:{range:n$v,"coded-value":u$n,inherited:i$C}};function d$n(e){if(!e||!e.type)return null;switch(e.type){case"range":return n$v.fromJSON(e);case"codedValue":return u$n.fromJSON(e);case"inherited":return i$C.fromJSON(e)}return null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
let t$g;async function a$u(){return t$g||(t$g=(async()=>{const e=await Promise.all(/*! import() */[__webpack_require__.e("vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_geoenrichment-components_dist_-0eb39a"), __webpack_require__.e("vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_geoenrichment-components_dist_-c7e495")]).then(__webpack_require__.bind(__webpack_require__, /*! ./arcadeUtils-d1c69dcc.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/arcadeUtils-d1c69dcc.js")).then(function (n) { return n.aq; });return await e.arcade.load(),{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),t$g}const s$g=(e,r,t)=>o$9.create(e,r,t,null,["$feature"]),i$A=(e,r,t)=>o$9.create(e,r,t,null,["$feature","$view"]),n$u=(e,r,t,a)=>o$9.create(e,r,t,a,["$feature","$view"]);class o$9{constructor(e,r,t,a,s,i,c,n){this.script=e,this.evaluate=s,this.fields=c,this._syntaxTree=a,this._arcade=r,this._arcadeDictionary=t,this._arcadeFeature=i,this._spatialReference=n,this._referencesGeometry=r.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale");}static async create(t,s,i,c,n,l){const{arcade:u,Feature:p,Dictionary:d}=await a$u(),f=k$4.fromJSON(s),h=u.parseScript(t,l),m=n.reduce(((e,r)=>({...e,[r]:null})),{});let y=null;r$A(c)&&(y=new d(c),y.immutable=!0,m.$config=null);const _=u.scriptUsesGeometryEngine(h)&&u.enableGeometrySupport(),F=u.scriptUsesFeatureSet(h)&&u.enableFeatureSetSupport(),w=u.scriptIsAsync(h)&&u.enableAsyncSupport(),S={vars:m,spatialReference:f,useAsync:!!w},b=new d;b.immutable=!1,b.setField("scale",0);const $=u.compileScript(h,S),x=e=>("$view"in e&&e.$view&&(b.setField("scale",e.$view.scale),e.$view=b),y&&(e.$config=y),$({vars:e,spatialReference:f}));return await Promise.all([_,F,w]),new o$9(t,u,d,h,x,new p,i,f)}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}repurposeAdapter(e){return this._arcadeFeature.repurposeFromAdapter(e,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(e){return this._arcade.referencesMember(this._syntaxTree,e)}referencesFunction(e){return this._arcade.referencesFunction(this._syntaxTree,e)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(e){return this._arcade.extractFieldLiterals(this._syntaxTree,e)}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const u$l=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],f$a=["field","normalizationField"];function c$F(e,n){if(null!=e&&null!=n)for(const i of Array.isArray(e)?e:[e])if(d$m(u$l,i,n),"visualVariables"in i&&i.visualVariables)for(const e of i.visualVariables)d$m(f$a,e,n);}function d$m(i,t,r){if(i)for(const o of i){const i=t$N(o,t),l=i&&"function"!=typeof i&&T$4(r,i);l&&o$I(o,l.name,t);}}function m$l(e,n){if(null!=e&&null!=n)if("startField"in e){const i=T$4(n,e.startField),t=T$4(n,e.endField);e.startField=i&&i.name||null,e.endField=t&&t.name||null;}else {const i=T$4(n,e.startTimeField),t=T$4(n,e.endTimeField);e.startTimeField=i&&i.name||null,e.endTimeField=t&&t.name||null;}}const p$N=new Set;function y$9(e,n){return e&&n?(p$N.clear(),g$5(p$N,e,n),Array.from(p$N).sort()):[]}function g$5(e,n,i){if(i)if(n&&n.length)if(i.includes("*"))for(const{name:t}of n)e.add(t);else for(const t of i)F$1(e,n,t);else {if(i.includes("*"))return e.clear(),void e.add("*");for(const n of i)e.add(n);}}function F$1(e,n,i){if(n&&n.length){const t=T$4(n,i);t&&e.add(t.name);}else "string"==typeof i&&e.add(i);}function T$4(e,n){if("string"!=typeof n)return null;if(null!=e){n=n.toLowerCase();for(const i of e)if(i&&i.name.toLowerCase()===n)return i}return null}function h$i(e,n){if(!e||!n||"string"!=typeof n)return !1;n=n.toLowerCase();for(const i of e)if(i&&i.name.toLowerCase()===n)return !0;return !1}async function w$4(e,n,i){if(!i)return;const{arcadeUtils:t}=await a$u(),r=t.extractFieldNames(i);for(const o of r)F$1(e,n,o);}function S$6({displayField:e,fields:n}){return e||(n&&n.length?A$3(n,"name-or-title")||A$3(n,"unique-identifier")||A$3(n,"type-or-category")||x$3(n):null)}function x$3(e){for(const n of e){if(!n||!n.name)continue;const e=n.name.toLowerCase();if(e.indexOf("name")>-1||e.indexOf("title")>-1)return n.name}return null}function A$3(e,n){for(const i of e)if(i&&i.valueType&&i.valueType===n)return i.name;return null}function j$9(e){const n=e.defaultValue;return void 0!==n&&W(e,n)?n:e.nullable?null:void 0}function z(e){return "number"==typeof e&&!isNaN(e)&&isFinite(e)}function k$3(e){return null===e||z(e)}const P$2="isInteger"in Number?Number.isInteger:e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e;function R$3(e){return null===e||P$2(e)}function G(e){return null!=e&&"string"==typeof e}function q$1(e){return null===e||G(e)}function M$2(){return !0}function W(e,n){let i;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":i=e.nullable?R$3:P$2;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=e.nullable?k$3:z;break;case"string":case"esriFieldTypeString":i=e.nullable?q$1:G;break;default:i=M$2;}return 1===arguments.length?i:i(n)}const Y=["integer","small-integer","single","double"],J$1=new Set([...Y,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function X(e){return null!=e&&J$1.has(e.type)}function B(e){return null!=e&&("string"===e.type||"esriFieldTypeString"===e.type)}var Q,Z;function ee(e){return null==e||"number"==typeof e&&isNaN(e)?null:e}function ne(e,n){return e.nullable&&null===n?null:X(e)&&!ie(e.type,Number(n))?Q.OUT_OF_RANGE:W(e,n)?e.domain?t$h(e.domain,n):null:Z.INVALID_TYPE}function ie(e,n){const i="string"==typeof e?re(e):e;return !!i&&(i.isInteger?P$2(n)&&n>=i.min&&n<=i.max:n>=i.min&&n<=i.max)}function re(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return le;case"esriFieldTypeInteger":case"integer":return ae;case"esriFieldTypeSingle":case"single":return se;case"esriFieldTypeDouble":case"double":return ue}}!function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range";}(Q||(Q={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type";}(Z||(Z={}));const le={min:-32768,max:32767,isInteger:!0},ae={min:-2147483648,max:2147483647,isInteger:!0},se={min:-34e37,max:12e37,isInteger:!1},ue={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function fe(e,n,i){switch(e){case o$a.INVALID_CODED_VALUE:return `Value ${i} is not in the coded domain - field: ${n.name}, domain: ${JSON.stringify(n.domain)}`;case o$a.VALUE_OUT_OF_RANGE:return `Value ${i} is out of the range of valid values - field: ${n.name}, domain: ${JSON.stringify(n.domain)}`;case Z.INVALID_TYPE:return `Value ${i} is not a valid value for the field type - field: ${n.name}, type: ${n.type}, nullable: ${n.nullable}`;case Q.OUT_OF_RANGE:{const{min:e,max:t}=re(n.type);return `Value ${i} is out of range for the number type - field: ${n.name}, type: ${n.type}, value range is ${e} to ${t}`}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
let s$f=class extends a$B{constructor(r){super(r),this.type=null;}};e$u([y$r({type:["attachments","custom","fields","media","text"],readOnly:!0,json:{read:!1,write:!0}})],s$f.prototype,"type",void 0),s$f=e$u([i$X("esri.popup.content.Content")],s$f);var p$M=s$f;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var s$e;let i$z=s$e=class extends p$M{constructor(t){super(t),this.description=null,this.displayType=null,this.title=null,this.type="attachments";}clone(){return new s$e({description:this.description,displayType:this.displayType,title:this.title})}};e$u([y$r({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],i$z.prototype,"description",void 0),e$u([y$r({type:["preview","list"],json:{write:!0}})],i$z.prototype,"displayType",void 0),e$u([y$r({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],i$z.prototype,"title",void 0),e$u([y$r({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],i$z.prototype,"type",void 0),i$z=s$e=e$u([i$X("esri.popup.content.AttachmentsContent")],i$z);var p$L=i$z;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var p$K;let i$y=p$K=class extends p$M{constructor(r){super(r),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom";}clone(){return new p$K({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?y$v(this.outFields):null})}};e$u([y$r()],i$y.prototype,"creator",void 0),e$u([y$r()],i$y.prototype,"destroyer",void 0),e$u([y$r()],i$y.prototype,"outFields",void 0),e$u([y$r({type:["custom"],readOnly:!0})],i$y.prototype,"type",void 0),i$y=p$K=e$u([i$X("esri.popup.content.CustomContent")],i$y);var c$E=i$y;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const a$t=o$A()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});a$t.toJSON.bind(a$t);a$t.fromJSON.bind(a$t);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const r$a={year:"numeric",month:"numeric",day:"numeric"},n$t={year:"numeric",month:"long",day:"numeric"},a$s={year:"numeric",month:"short",day:"numeric"},h$h={year:"numeric",month:"long",weekday:"long",day:"numeric"},m$k={hour:"numeric",minute:"numeric"},i$x={...m$k,second:"numeric"},s$d={"short-date":r$a,"short-date-short-time":{...r$a,...m$k},"short-date-short-time-24":{...r$a,...m$k,hour12:!1},"short-date-long-time":{...r$a,...i$x},"short-date-long-time-24":{...r$a,...i$x,hour12:!1},"short-date-le":r$a,"short-date-le-short-time":{...r$a,...m$k},"short-date-le-short-time-24":{...r$a,...m$k,hour12:!1},"short-date-le-long-time":{...r$a,...i$x},"short-date-le-long-time-24":{...r$a,...i$x,hour12:!1},"long-month-day-year":n$t,"long-month-day-year-short-time":{...n$t,...m$k},"long-month-day-year-short-time-24":{...n$t,...m$k,hour12:!1},"long-month-day-year-long-time":{...n$t,...i$x},"long-month-day-year-long-time-24":{...n$t,...i$x,hour12:!1},"day-short-month-year":a$s,"day-short-month-year-short-time":{...a$s,...m$k},"day-short-month-year-short-time-24":{...a$s,...m$k,hour12:!1},"day-short-month-year-long-time":{...a$s,...i$x},"day-short-month-year-long-time-24":{...a$s,...i$x,hour12:!1},"long-date":h$h,"long-date-short-time":{...h$h,...m$k},"long-date-short-time-24":{...h$h,...m$k,hour12:!1},"long-date-long-time":{...h$h,...i$x},"long-date-long-time-24":{...h$h,...i$x,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":m$k,"long-time":i$x},l$v=o$A()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});l$v.toJSON.bind(l$v);l$v.fromJSON.bind(l$v);const u$k={ar:"ar-u-nu-latn-ca-gregory"};let c$D=new WeakMap,D$2=s$d["short-date-short-time"];function T$3(t){const e=t||D$2;if(!c$D.has(e)){const t=(0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.b)(),r=u$k[(0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.b)()]||t;c$D.set(e,new Intl.DateTimeFormat(r,e));}return c$D.get(e)}function S$5(t){return s$d[t]||null}function L$4(t,o){return T$3(o).format(t)}(0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.d)((()=>{c$D=new WeakMap,D$2=s$d["short-date-short-time"];}));

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const a$r={ar:"ar-u-nu-latn"};let e$d=new WeakMap,o$8={};function i$w(r){const i=r||o$8;if(!e$d.has(i)){const t=(0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.b)(),o=a$r[(0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.b)()]||t;e$d.set(i,new Intl.NumberFormat(o,r));}return m$F(e$d.get(i))}function u$j(t={}){const n={};return null!=t.digitSeparator&&(n.useGrouping=t.digitSeparator),null!=t.places&&(n.minimumFractionDigits=n.maximumFractionDigits=t.places),n}function m$j(t,n){return i$w(n).format(t)}(0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.d)((()=>{e$d=new WeakMap,o$8={};}));

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var d$l;let l$u=d$l=class extends a$B{constructor(r){super(r),this.dateFormat=null,this.digitSeparator=!1,this.places=null;}clone(){return new d$l({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})}format(r){return this.dateFormat?L$4(r,S$5(this.dateFormat)):m$j(r,u$j(this))}};e$u([r$v(a$t)],l$u.prototype,"dateFormat",void 0),e$u([y$r({type:Boolean,json:{write:!0}})],l$u.prototype,"digitSeparator",void 0),e$u([y$r({type:N$5,json:{write:!0}})],l$u.prototype,"places",void 0),l$u=d$l=e$u([i$X("esri.popup.support.FieldInfoFormat")],l$u);var n$s=l$u;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var a$q;let n$r=a$q=class extends a$B{constructor(t){super(t),this.fieldName=null,this.format=null,this.isEditable=!1,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0;}clone(){return new a$q({fieldName:this.fieldName,format:this.format?y$v(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};e$u([y$r({type:String,json:{write:!0}})],n$r.prototype,"fieldName",void 0),e$u([y$r({type:n$s,json:{write:!0}})],n$r.prototype,"format",void 0),e$u([y$r({type:Boolean,json:{write:!0,default:!1}})],n$r.prototype,"isEditable",void 0),e$u([y$r({type:String,json:{write:!0}})],n$r.prototype,"label",void 0),e$u([r$v(new t$I({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],n$r.prototype,"stringFieldOption",void 0),e$u([y$r({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],n$r.prototype,"statisticType",void 0),e$u([y$r({type:String,json:{write:!0}})],n$r.prototype,"tooltip",void 0),e$u([y$r({type:Boolean,json:{write:!0}})],n$r.prototype,"visible",void 0),n$r=a$q=e$u([i$X("esri.popup.FieldInfo")],n$r);var c$C=n$r;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var n$q;let l$t=n$q=class extends p$M{constructor(o){super(o),this.description=null,this.fieldInfos=null,this.title=null,this.type="fields";}writeFieldInfos(o,r){r.fieldInfos=o&&o.map((o=>o.toJSON()));}clone(){return new n$q({description:this.description,fieldInfos:Array.isArray(this.fieldInfos)?y$v(this.fieldInfos):null,title:this.title})}};e$u([y$r({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],l$t.prototype,"description",void 0),e$u([y$r({type:[c$C]})],l$t.prototype,"fieldInfos",void 0),e$u([o$v("fieldInfos")],l$t.prototype,"writeFieldInfos",null),e$u([y$r({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],l$t.prototype,"title",void 0),e$u([y$r({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],l$t.prototype,"type",void 0),l$t=n$q=e$u([i$X("esri.popup.content.FieldsContent")],l$t);var c$B=l$t;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
let p$J=class extends a$B{constructor(t){super(t),this.altText=null,this.caption="",this.title="",this.type=null;}};e$u([y$r({type:String,json:{write:!0}})],p$J.prototype,"altText",void 0),e$u([y$r({type:String,json:{write:!0}})],p$J.prototype,"caption",void 0),e$u([y$r({type:String,json:{write:!0}})],p$J.prototype,"title",void 0),e$u([y$r({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],p$J.prototype,"type",void 0),p$J=e$u([i$X("esri.popup.content.mixins.MediaInfo")],p$J);var s$c=p$J;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var p$I;let i$v=p$I=class extends u$D{constructor(o){super(o),this.tooltip=null,this.value=null,this.x=null,this.y=null;}clone(){return new p$I({tooltip:this.tooltip,value:this.value})}};e$u([y$r()],i$v.prototype,"tooltip",void 0),e$u([y$r()],i$v.prototype,"value",void 0),e$u([o$C("value")],i$v.prototype,"x",void 0),e$u([o$C("tooltip")],i$v.prototype,"y",void 0),i$v=p$I=e$u([i$X("esri.popup.content.support.ChartMediaInfoValueSeries")],i$v);var c$A=i$v;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var p$H;let l$s=p$H=class extends a$B{constructor(o){super(o),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null;}clone(){return new p$H({fields:y$v(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};e$u([y$r({type:[String],json:{write:!0}})],l$s.prototype,"fields",void 0),e$u([y$r({type:String,json:{write:!0}})],l$s.prototype,"normalizeField",void 0),e$u([y$r({type:[c$A],json:{read:!1}})],l$s.prototype,"series",void 0),e$u([y$r({type:String,json:{write:!0}})],l$s.prototype,"tooltipField",void 0),l$s=p$H=e$u([i$X("esri.popup.content.support.ChartMediaInfoValue")],l$s);var n$p=l$s;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
let p$G=class extends s$c{constructor(r){super(r),this.type=null,this.value=null;}};e$u([y$r({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],p$G.prototype,"type",void 0),e$u([y$r({type:n$p,json:{write:!0}})],p$G.prototype,"value",void 0),p$G=e$u([i$X("esri.popup.content.mixins.ChartMediaInfo")],p$G);var i$u=p$G;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const c$z=o$A()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var p$F;let a$p=p$F=class extends i$u{constructor(r){super(r),this.type="bar-chart";}clone(){return new p$F({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};e$u([y$r({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:c$z.write}})],a$p.prototype,"type",void 0),a$p=p$F=e$u([i$X("esri.popup.content.BarChartMediaInfo")],a$p);var i$t=a$p;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var p$E;let i$s=p$E=class extends i$u{constructor(r){super(r),this.type="column-chart";}clone(){return new p$E({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};e$u([y$r({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:c$z.write}})],i$s.prototype,"type",void 0),i$s=p$E=e$u([i$X("esri.popup.content.ColumnChartMediaInfo")],i$s);var c$y=i$s;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var t$f;let p$D=t$f=class extends a$B{constructor(r){super(r),this.linkURL=null,this.sourceURL=null;}clone(){return new t$f({linkURL:this.linkURL,sourceURL:this.sourceURL})}};e$u([y$r({type:String,json:{write:!0}})],p$D.prototype,"linkURL",void 0),e$u([y$r({type:String,json:{write:!0}})],p$D.prototype,"sourceURL",void 0),p$D=t$f=e$u([i$X("esri.popup.content.support.ImageMediaInfoValue")],p$D);var i$r=p$D;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var p$C;let i$q=p$C=class extends s$c{constructor(e){super(e),this.refreshInterval=null,this.type="image",this.value=null;}clone(){return new p$C({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};e$u([y$r({type:Number,json:{write:!0}})],i$q.prototype,"refreshInterval",void 0),e$u([y$r({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],i$q.prototype,"type",void 0),e$u([y$r({type:i$r,json:{write:!0}})],i$q.prototype,"value",void 0),i$q=p$C=e$u([i$X("esri.popup.content.ImageMediaInfo")],i$q);var a$o=i$q;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var i$p;let p$B=i$p=class extends i$u{constructor(r){super(r),this.type="line-chart";}clone(){return new i$p({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};e$u([y$r({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:c$z.write}})],p$B.prototype,"type",void 0),p$B=i$p=e$u([i$X("esri.popup.content.LineChartMediaInfo")],p$B);var a$n=p$B;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var p$A;let i$o=p$A=class extends i$u{constructor(r){super(r),this.type="pie-chart";}clone(){return new p$A({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};e$u([y$r({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:c$z.write}})],i$o.prototype,"type",void 0),i$o=p$A=e$u([i$X("esri.popup.content.PieChartMediaInfo")],i$o);var a$m=i$o;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const m$i={base:s$c,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":i$t,"column-chart":c$y,"line-chart":a$n,"pie-chart":a$m,image:a$o}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var l$r;let u$i=l$r=class extends p$M{constructor(o){super(o),this.activeMediaInfoIndex=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media";}readMediaInfos(o){return o&&o.map((o=>"image"===o.type?a$o.fromJSON(o):"barchart"===o.type?i$t.fromJSON(o):"columnchart"===o.type?c$y.fromJSON(o):"linechart"===o.type?a$n.fromJSON(o):"piechart"===o.type?a$m.fromJSON(o):void 0)).filter(Boolean)}writeMediaInfos(o,e){e.mediaInfos=o&&o.map((o=>o.toJSON()));}clone(){return new l$r({activeMediaInfoIndex:this.activeMediaInfoIndex,description:this.description,mediaInfos:this.mediaInfos?y$v(this.mediaInfos):null,title:this.title})}};e$u([y$r()],u$i.prototype,"activeMediaInfoIndex",void 0),e$u([y$r({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],u$i.prototype,"description",void 0),e$u([y$r({types:[m$i]})],u$i.prototype,"mediaInfos",void 0),e$u([e$C("mediaInfos")],u$i.prototype,"readMediaInfos",null),e$u([o$v("mediaInfos")],u$i.prototype,"writeMediaInfos",null),e$u([y$r({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],u$i.prototype,"title",void 0),e$u([y$r({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],u$i.prototype,"type",void 0),u$i=l$r=e$u([i$X("esri.popup.content.MediaContent")],u$i);var I=u$i;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var s$b;let p$z=s$b=class extends p$M{constructor(t){super(t),this.text=null,this.type="text";}clone(){return new s$b({text:this.text})}};e$u([y$r({type:String,json:{write:!0}})],p$z.prototype,"text",void 0),e$u([y$r({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],p$z.prototype,"type",void 0),p$z=s$b=e$u([i$X("esri.popup.content.TextContent")],p$z);var c$x=p$z;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const r$9={base:null,key:"type",typeMap:{attachment:p$L,media:I,text:c$x,field:c$B}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var s$a;let p$y=s$a=class extends a$B{constructor(r){super(r),this.name=null,this.title=null,this.expression=null,this.returnType=null;}clone(){return new s$a({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};e$u([y$r({type:String,json:{write:!0}})],p$y.prototype,"name",void 0),e$u([y$r({type:String,json:{write:!0}})],p$y.prototype,"title",void 0),e$u([y$r({type:String,json:{write:!0}})],p$y.prototype,"expression",void 0),e$u([y$r({type:["string","number"],json:{write:!0}})],p$y.prototype,"returnType",void 0),p$y=s$a=e$u([i$X("esri.popup.ExpressionInfo")],p$y);var i$n=p$y;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var e$c;let p$x=e$c=class extends a$B{constructor(o){super(o),this.returnTopmostRaster=null,this.showNoDataRecords=null;}clone(){return new e$c({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};e$u([y$r({type:Boolean,json:{write:!0}})],p$x.prototype,"returnTopmostRaster",void 0),e$u([y$r({type:Boolean,json:{write:!0}})],p$x.prototype,"showNoDataRecords",void 0),p$x=e$c=e$u([i$X("esri.popup.LayerOptions")],p$x);var a$l=p$x;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var t$e;let p$w=t$e=class extends a$B{constructor(r){super(r),this.field=null,this.order=null;}clone(){return new t$e({field:this.field,order:this.order})}};e$u([y$r({type:String,json:{write:!0}})],p$w.prototype,"field",void 0),e$u([y$r({type:["asc","desc"],json:{write:!0}})],p$w.prototype,"order",void 0),p$w=t$e=e$u([i$X("esri.popup.support.RelatedRecordsInfoFieldOrder")],p$w);var i$m=p$w;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var i$l;let d$k=i$l=class extends a$B{constructor(r){super(r),this.showRelatedRecords=null,this.orderByFields=null;}clone(){return new i$l({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?y$v(this.orderByFields):null})}};e$u([y$r({type:Boolean,json:{write:!0}})],d$k.prototype,"showRelatedRecords",void 0),e$u([y$r({type:[i$m],json:{write:!0}})],d$k.prototype,"orderByFields",void 0),d$k=i$l=e$u([i$X("esri.popup.RelatedRecordsInfo")],d$k);var c$w=d$k;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
let t$d=0;const r$8=r=>{let o=class extends r{constructor(...e){super(...e),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+t$d++});}};return o=e$u([i$X("esri.core.Identifiable")],o),o};let o$7=class extends(r$8(class{})){};o$7=e$u([i$X("esri.core.Identifiable")],o$7);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var r$7;let p$v=r$7=class extends(r$8(u$D)){constructor(t){super(t),this.active=!1,this.className=null,this.disabled=!1,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0;}clone(){return new r$7({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};e$u([y$r()],p$v.prototype,"active",void 0),e$u([y$r()],p$v.prototype,"className",void 0),e$u([y$r()],p$v.prototype,"disabled",void 0),e$u([y$r()],p$v.prototype,"id",void 0),e$u([y$r()],p$v.prototype,"indicator",void 0),e$u([y$r()],p$v.prototype,"title",void 0),e$u([y$r()],p$v.prototype,"type",void 0),e$u([y$r()],p$v.prototype,"visible",void 0),p$v=r$7=e$u([i$X("esri.support.actions.ActionBase")],p$v);var c$v=p$v;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var i$k;let e$b=i$k=class extends c$v{constructor(s){super(s),this.image=null,this.type="button";}clone(){return new i$k({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};e$u([y$r()],e$b.prototype,"image",void 0),e$b=i$k=e$u([i$X("esri.support.Action.ActionButton")],e$b);var c$u=e$b;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var r$6;let i$j=r$6=class extends c$v{constructor(s){super(s),this.image=null,this.type="toggle",this.value=!1;}clone(){return new r$6({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};e$u([y$r()],i$j.prototype,"image",void 0),e$u([y$r()],i$j.prototype,"value",void 0),i$j=r$6=e$u([i$X("esri.support.Action.ActionToggle")],i$j);var a$k=i$j;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var O$1;const S$4=L$5.ofType({key:"type",defaultKeyValue:"button",base:c$v,typeMap:{button:c$u,toggle:a$k}}),T$2={base:p$M,key:"type",typeMap:{media:I,custom:c$E,text:c$x,attachments:p$L,fields:c$B}},b$6="esri.PopupTemplate",R$2=n$T.getLogger(b$6),L$3=["attachments","fields","media","text"];let J=O$1=class extends a$B{constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title="",this.relatedRecordsInfo=null;}castContent(t){return Array.isArray(t)?t.map((t=>k$a(T$2,t))):"string"==typeof t||"function"==typeof t||t instanceof HTMLElement||U$2(t)?t:(R$2.error("content error","unsupported content value",{value:t}),null)}readContent(t,e){const{popupElements:o}=e;return Array.isArray(o)&&o.length>0?this._readPopupInfoElements(e):this._readPopupInfo(e)}writeContent(t,e,o,s){"string"!=typeof t?Array.isArray(t)&&(e.popupElements=t.filter((t=>-1!==L$3.indexOf(t.type))).map((t=>t&&t.toJSON(s))),e.popupElements.forEach((t=>{"attachments"===t.type?this._writeAttachmentContent(e):"media"===t.type?this._writeMediaContent(t,e):"text"===t.type&&this._writeTextContent(t,e);}))):e.description=t;}writeFieldInfos(t,e,o,s){const{content:r}=this,i=Array.isArray(r)?r:null;if(t){const o=i?i.filter((t=>"fields"===t.type)):[],r=o.length&&o.every((t=>{var e;return null==(e=t.fieldInfos)?void 0:e.length}));e.fieldInfos=t.filter(Boolean).map((t=>{const e=t.toJSON(s);return r&&(e.visible=!1),e}));}if(i)for(const n of i)"fields"===n.type&&this._writeFieldsContent(n,e);}writeLayerOptions(t,e,o,s){e[o]=!t||null===t.showNoDataRecords&&null===t.returnTopmostRaster?null:t.toJSON(s);}writeTitle(t,e){e.title=t||"";}clone(){const{actions:t}=this,o=t?y$v(t.toArray()):[];return new O$1({actions:o,content:Array.isArray(this.content)?y$v(this.content):this.content,expressionInfos:Array.isArray(this.expressionInfos)?y$v(this.expressionInfos):null,fieldInfos:Array.isArray(this.fieldInfos)?y$v(this.fieldInfos):null,layerOptions:this.layerOptions?y$v(this.layerOptions):null,lastEditInfoEnabled:this.lastEditInfoEnabled,outFields:Array.isArray(this.outFields)?y$v(this.outFields):null,overwriteActions:this.overwriteActions,returnGeometry:this.returnGeometry,title:this.title,relatedRecordsInfo:this.relatedRecordsInfo?y$v(this.relatedRecordsInfo):null})}async collectRequiredFields(t,e){await this._collectExpressionInfoFields(t,e,this.expressionInfos),g$5(t,e,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)]);}async getRequiredFields(t){const e=new Set;return await this.collectRequiredFields(e,t),[...e].sort()}_writeFieldsContent(t,o){if(!Array.isArray(t.fieldInfos)||!t.fieldInfos.length)return;const s=y$v(t.fieldInfos);Array.isArray(o.fieldInfos)?s.forEach((t=>{const e=o.fieldInfos.find((e=>e.fieldName.toLowerCase()===t.fieldName.toLowerCase()));e?e.visible=!0:o.fieldInfos.push(t);})):o.fieldInfos=s;}_writeAttachmentContent(t){t.showAttachments||(t.showAttachments=!0);}_writeTextContent(t,e){!e.description&&t.text&&(e.description=t.text);}_writeMediaContent(t,o){if(!Array.isArray(t.mediaInfos)||!t.mediaInfos.length)return;const s=y$v(t.mediaInfos);Array.isArray(o.mediaInfos)?o.mediaInfos=[...o.mediaInfos,...s]:o.mediaInfos=s;}_readPopupInfoElements({description:t,mediaInfos:e,popupElements:o}){const s={description:!1,mediaInfos:!1};return o.map((o=>"media"===o.type?(o.mediaInfos||!e||s.mediaInfos||(o.mediaInfos=e,s.mediaInfos=!0),I.fromJSON(o)):"text"===o.type?(o.text||!t||s.description||(o.text=t,s.description=!0),c$x.fromJSON(o)):"attachments"===o.type?p$L.fromJSON(o):"fields"===o.type?c$B.fromJSON(o):void 0)).filter(Boolean)}_readPopupInfo({description:t,mediaInfos:e,showAttachments:o}){const s=[];return t?s.push(new c$x({text:t})):s.push(new c$B),Array.isArray(e)&&e.length&&s.push(I.fromJSON({mediaInfos:e})),o&&s.push(p$L.fromJSON({displayType:"list"})),s.length?s:t}_getContentElementFields(t){if(!t||"attachments"===t.type)return [];if("custom"===t.type)return t.outFields||[];if("fields"===t.type)return this._getFieldInfoFields(t.fieldInfos||this.fieldInfos);if("media"===t.type){return (t.mediaInfos||[]).reduce(((t,e)=>[...t,...this._getMediaInfoFields(e)]),[])}return "text"===t.type?this._extractFieldNames(t.text):void 0}_getMediaInfoFields(t){const{caption:e,title:o,value:s}=t,r=s||{},{fields:i=[],normalizeField:n,tooltipField:p,sourceURL:l,linkURL:a}=r,d=[...this._extractFieldNames(o),...this._extractFieldNames(e),...this._extractFieldNames(l),...this._extractFieldNames(a),...i];return n&&d.push(n),p&&d.push(p),d}_getContentFields(t){return "string"==typeof t?this._extractFieldNames(t):Array.isArray(t)?t.reduce(((t,e)=>[...t,...this._getContentElementFields(e)]),[]):[]}async _collectExpressionInfoFields(t,e,o){o&&await Promise.all(o.map((o=>w$4(t,e,o.expression))));}_getFieldInfoFields(t){return t?t.filter((t=>void 0===t.visible||!!t.visible)).map((t=>t.fieldName)).filter((t=>-1===t.indexOf("relationships/")&&-1===t.indexOf("expression/"))):[]}_getActionsFields(t){return t?t.toArray().reduce(((t,e)=>[...t,...this._getActionFields(e)]),[]):[]}_getActionFields(t){const{className:e,title:o,type:s}=t,r="button"===s||"toggle"===s?t.image:"";return [...this._extractFieldNames(o),...this._extractFieldNames(e),...this._extractFieldNames(r)]}_getTitleFields(t){return "string"==typeof t?this._extractFieldNames(t):[]}_extractFieldNames(t){if(!t||"string"!=typeof t)return [];const e=/{[^}]*}/g,o=t.match(e);if(!o)return [];const s=/\{(\w+):.+\}/,r=o.filter((t=>!(0===t.indexOf("{relationships/")||0===t.indexOf("{expression/")))).map((t=>t.replace(s,"{$1}")));return r?r.map((t=>t.slice(1,-1))):[]}};e$u([y$r({type:S$4})],J.prototype,"actions",void 0),e$u([y$r()],J.prototype,"content",void 0),e$u([c$_("content")],J.prototype,"castContent",null),e$u([e$C("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments"])],J.prototype,"readContent",null),e$u([o$v("content",{popupElements:{type:L$5.ofType(r$9)},showAttachments:{type:Boolean},mediaInfos:{type:L$5.ofType(m$i)},description:{type:String}})],J.prototype,"writeContent",null),e$u([y$r({type:[i$n],json:{write:!0}})],J.prototype,"expressionInfos",void 0),e$u([y$r({type:[c$C]})],J.prototype,"fieldInfos",void 0),e$u([o$v("fieldInfos")],J.prototype,"writeFieldInfos",null),e$u([y$r({type:a$l})],J.prototype,"layerOptions",void 0),e$u([o$v("layerOptions")],J.prototype,"writeLayerOptions",null),e$u([y$r({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],J.prototype,"lastEditInfoEnabled",void 0),e$u([y$r()],J.prototype,"outFields",void 0),e$u([y$r()],J.prototype,"overwriteActions",void 0),e$u([y$r()],J.prototype,"returnGeometry",void 0),e$u([y$r({json:{type:String}})],J.prototype,"title",void 0),e$u([o$v("title")],J.prototype,"writeTitle",null),e$u([y$r({type:c$w,json:{write:!0}})],J.prototype,"relatedRecordsInfo",void 0),J=O$1=e$u([i$X(b$6)],J);var M$1=J;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const p$u=new t$I({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let c$t=0,m$h=class extends a$B{constructor(r){super(r),this.id="sym"+c$t++,this.type=null;}set color(r){this._set("color",r);}readColor(r){return r&&null!=r[0]?[r[0],r[1],r[2],r[3]/255]:r}async collectRequiredFields(r,o){}hash(){return JSON.stringify(this.toJSON())}clone(){}};e$u([y$r({type:p$u.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:p$u.write}}})],m$h.prototype,"type",void 0),e$u([y$r({type:o$j,value:new o$j([0,0,0,1]),json:{write:{allowNull:!0}}})],m$h.prototype,"color",null),e$u([e$C("color")],m$h.prototype,"readColor",null),m$h=e$u([i$X("esri.symbols.Symbol")],m$h);var n$o=m$h;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var n$n;let l$q=n$n=class extends n$o{constructor(r){super(r),this.data=null,this.type="cim";}readData(r,o){return o}writeData(r,o){if(r)for(const t in r)o[t]=r[t];}async collectRequiredFields(r,o){if("CIMSymbolReference"===this.data.type){const t=this.data.primitiveOverrides;if(t){const e=t.map((t=>{const e=t.valueExpressionInfo;return w$4(r,o,e.expression)}));await Promise.all(e);}}}clone(){return new n$n({data:y$v(this.data)})}hash(){return c$12(JSON.stringify(this.data)).toString()}};e$u([y$r({json:{write:!1}})],l$q.prototype,"color",void 0),e$u([y$r({json:{write:!0}})],l$q.prototype,"data",void 0),e$u([e$C("data",["symbol"])],l$q.prototype,"readData",null),e$u([o$v("data")],l$q.prototype,"writeData",null),e$u([r$v({CIMSymbolReference:"cim"},{readOnly:!0})],l$q.prototype,"type",void 0),l$q=n$n=e$u([i$X("esri.symbols.CIMSymbol")],l$q);var d$j=l$q;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
let p$t=class extends a$B{constructor(r){super(r),this.enabled=!0,this.type=null;}writeEnabled(r,e,o){r||(e[o]=r);}};e$u([y$r({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],p$t.prototype,"enabled",void 0),e$u([o$v("enabled")],p$t.prototype,"writeEnabled",null),e$u([y$r({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],p$t.prototype,"type",void 0),p$t=e$u([i$X("esri.symbols.Symbol3DLayer")],p$t);var c$s=p$t;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const n$m=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,t$c="screenUtils.toPt: input not recognized!",r$5=96;function u$h(n){return n?n/72*r$5:0}function e$a(n){return n?72*n/r$5:0}function o$6(r){if("string"==typeof r){if(n$m.test(r)){const t=r.match(n$m),u=Number(t[1]),o=t[3]&&t[3].toLowerCase(),c="-"===r.charAt(0),i="px"===o?e$a(u):u;return c?-i:i}return console.warn(t$c),null}return r}function c$r(n=0,t=0){return {x:n,y:t}}function p$s(n){return n}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function n$l(n){const r=a$P(100*(1-n));return Math.max(0,Math.min(r,100))}function r$4(t){const n=1-t/100;return Math.max(0,Math.min(n,1))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function s$9(r,t){const n=null!=t.transparency?r$4(t.transparency):1,s=t.color;return s&&Array.isArray(s)?new o$j([s[0]||0,s[1]||0,s[2]||0,n]):null}function a$j(r,e){e.color=r.toJSON().slice(0,3);const t=n$l(r.a);0!==t&&(e.transparency=t);}const c$q={type:o$j,json:{type:[N$5],default:null,read:{source:["color","transparency"],reader:s$9},write:{target:{color:{type:[N$5]},transparency:{type:N$5}},writer:a$j}}},p$r={type:Number,cast:o$6,json:{write:!0}},l$p={type:[Number],cast:r=>null!=r?r:Array.isArray(r)?r.map(o$6):null,json:{read:!1,write:!1}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
let l$o=class extends a$B{constructor(o){super(o),this.color=new o$j([0,0,0,1]),this.extensionLength=0,this.size=e$a(1);}clone(){}cloneProperties(){return {color:y$v(this.color),size:this.size,extensionLength:this.extensionLength}}};e$u([y$r({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],l$o.prototype,"type",void 0),e$u([y$r(c$q)],l$o.prototype,"color",void 0),e$u([y$r({...p$r,json:{write:{overridePolicy:o=>({enabled:!!o})}}})],l$o.prototype,"extensionLength",void 0),e$u([y$r(p$r)],l$o.prototype,"size",void 0),l$o=e$u([i$X("esri.symbols.edges.Edges3D")],l$o);var m$g=l$o;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var t$b;let p$q=t$b=class extends m$g{constructor(r){super(r),this.type="sketch";}clone(){return new t$b(this.cloneProperties())}};e$u([r$v({sketch:"sketch"},{readOnly:!0})],p$q.prototype,"type",void 0),p$q=t$b=e$u([i$X("esri.symbols.edges.SketchEdges3D")],p$q);var c$p=p$q;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var t$a;let p$p=t$a=class extends m$g{constructor(r){super(r),this.type="solid";}clone(){return new t$a(this.cloneProperties())}};e$u([r$v({solid:"solid"},{readOnly:!0})],p$p.prototype,"type",void 0),p$p=t$a=e$u([i$X("esri.symbols.support.SolidEdges3D")],p$p);var c$o=p$p;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const t$9={types:{key:"type",base:m$g,typeMap:{solid:c$o,sketch:c$p}},json:{write:!0}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var c$n;let i$i=c$n=class extends a$B{constructor(){super(...arguments),this.color=null;}clone(){return new c$n({color:r$A(this.color)?this.color.clone():null})}};e$u([y$r(c$q)],i$i.prototype,"color",void 0),i$i=c$n=e$u([i$X("esri.symbols.support.Symbol3DMaterial")],i$i);var l$n=i$i;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var l$m;let m$f=l$m=class extends c$s{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null;}clone(){return new l$m({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:r$A(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};e$u([r$v({Extrude:"extrude"},{readOnly:!0})],m$f.prototype,"type",void 0),e$u([y$r({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],m$f.prototype,"size",void 0),e$u([y$r({type:l$n,json:{write:!0}})],m$f.prototype,"material",void 0),e$u([y$r({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],m$f.prototype,"castShadows",void 0),e$u([y$r(t$9)],m$f.prototype,"edges",void 0),m$f=l$m=e$u([i$X("esri.symbols.ExtrudeSymbol3DLayer")],m$f);var c$m=m$f;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
let i$h=class extends n$o{constructor(r){super(r),this.type="simple-line",this.width=.75;}hash(){return `${this.type}.${this.width}`}};e$u([r$v({esriSLS:"simple-line"},{readOnly:!0})],i$h.prototype,"type",void 0),e$u([y$r({type:Number,cast:o$6,json:{write:!0}})],i$h.prototype,"width",void 0),i$h=e$u([i$X("esri.symbols.LineSymbol")],i$h);var c$l=i$h;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var a$i;let n$k=a$i=class extends a$B{constructor(r){super(r),this.placement="begin-end",this.type="line-marker",this.style="arrow";}writeStyle(r,o,e,t){"web-map"===(null==t?void 0:t.origin)?o[e]="arrow":o[e]=r;}set color(r){this._set("color",r);}readColor(r){return r&&null!=r[0]?[r[0],r[1],r[2],r[3]/255]:r}writeColor(r,o,e,t){"web-map"===(null==t?void 0:t.origin)||(o[e]=r);}clone(){return new a$i({color:y$v(this.color),placement:this.placement,style:this.style})}hash(){var r;return `${this.placement}.${null==(r=this.color)?void 0:r.hash()}.${this.style}`}};e$u([y$r({type:["begin","end","begin-end"],json:{write:!0}})],n$k.prototype,"placement",void 0),e$u([r$v({"line-marker":"line-marker"},{readOnly:!0}),y$r({json:{origins:{"web-map":{write:!1}}}})],n$k.prototype,"type",void 0),e$u([y$r({type:["arrow","circle","square","diamond","cross","x"]})],n$k.prototype,"style",void 0),e$u([o$v("style")],n$k.prototype,"writeStyle",null),e$u([y$r({type:o$j,value:null,json:{write:{allowNull:!0}}})],n$k.prototype,"color",null),e$u([e$C("color")],n$k.prototype,"readColor",null),e$u([o$v("color")],n$k.prototype,"writeColor",null),n$k=a$i=e$u([i$X("esri.symbols.LineSymbolMarker")],n$k);var m$e=n$k;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var p$o;const h$g=new t$I({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let m$d=p$o=class extends c$l{constructor(...r){super(...r),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2;}normalizeCtorArgs(r,o,e,t,s,i){if(r&&"string"!=typeof r)return r;const n={};return null!=r&&(n.style=r),null!=o&&(n.color=o),null!=e&&(n.width=o$6(e)),null!=t&&(n.cap=t),null!=s&&(n.join=s),null!=i&&(n.miterLimit=o$6(i)),n}clone(){var r;return new p$o({color:y$v(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:null==(r=this.marker)?void 0:r.clone()})}hash(){var r,o;return `${super.hash()}.${null==(r=this.color)?void 0:r.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${null==(o=this.marker)?void 0:o.hash()}`}};e$u([r$v({esriSLS:"simple-line"},{readOnly:!0})],m$d.prototype,"type",void 0),e$u([y$r({type:h$g.apiValues,json:{read:h$g.read,write:h$g.write}})],m$d.prototype,"style",void 0),e$u([y$r({type:["butt","round","square"],json:{write:{overridePolicy:(r,o,e)=>({enabled:"round"!==r&&(null==e||null==e.origin)})}}})],m$d.prototype,"cap",void 0),e$u([y$r({type:["miter","round","bevel"],json:{write:{overridePolicy:(r,o,e)=>({enabled:"round"!==r&&(null==e||null==e.origin)})}}})],m$d.prototype,"join",void 0),e$u([y$r({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":m$e}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],m$d.prototype,"marker",void 0),e$u([y$r({type:Number,json:{read:!1,write:!1}})],m$d.prototype,"miterLimit",void 0),m$d=p$o=e$u([i$X("esri.symbols.SimpleLineSymbol")],m$d);var d$i=m$d;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
let p$n=class extends n$o{constructor(e){super(e),this.outline=null,this.type=null;}hash(){return `${this.type}.${this.outline&&this.outline.hash()}`}};e$u([y$r({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":d$i}},json:{default:null,write:!0}})],p$n.prototype,"outline",void 0),e$u([y$r({type:["simple-fill","picture-fill"],readOnly:!0})],p$n.prototype,"type",void 0),p$n=e$u([i$X("esri.symbols.FillSymbol")],p$n);var l$l=p$n;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
let t$8=class extends a$B{constructor(r){super(r);}clone(){}};e$u([y$r({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],t$8.prototype,"type",void 0),t$8=e$u([i$X("esri.symbols.patterns.Pattern3D")],t$8);var p$m=t$8;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var a$h=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var p$l;let i$g=p$l=class extends p$m{constructor(r){super(r),this.type="style",this.style="solid";}clone(){return new p$l({style:this.style})}};e$u([y$r({type:["style"]})],i$g.prototype,"type",void 0),e$u([y$r({type:a$h,json:{read:!0,write:!0}})],i$g.prototype,"style",void 0),i$g=p$l=e$u([i$X("esri.symbols.patterns.StylePattern3D")],i$g);var c$k=i$g;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function r$3(t,r,s){if(!t)return t;switch(t.type){case"style":{const r=new c$k;return r.read(t,s),r}}}const s$8={types:{key:"type",base:p$m,typeMap:{style:c$k}},json:{read:r$3,write:!0}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const o$5=new o$j("white");new o$j("black");const e$9=new o$j([255,255,255,0]);function t$7(n){return 0===n.r&&0===n.g&&0===n.b}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var p$k;let c$j=p$k=class extends l$n{clone(){return new p$k({color:r$A(this.color)?this.color.clone():null,colorMixMode:this.colorMixMode})}};e$u([r$v({multiply:"multiply",replace:"replace",tint:"tint"})],c$j.prototype,"colorMixMode",void 0),c$j=p$k=e$u([i$X("esri.symbols.support.Symbol3DFillMaterial")],c$j);var i$f=c$j;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var n$j;let u$g=n$j=class extends a$B{constructor(){super(...arguments),this.color=new o$j([0,0,0,1]),this.size=e$a(1),this.stipplePattern=null,this.stippleOffColor=null;}clone(){return new n$j({color:r$A(this.color)?this.color.clone():null,size:this.size,stipplePattern:this.stipplePattern?this.stipplePattern.slice():null,stippleOffColor:this.stippleOffColor?this.stippleOffColor.clone():null})}};e$u([y$r(c$q)],u$g.prototype,"color",void 0),e$u([y$r(p$r)],u$g.prototype,"size",void 0),e$u([y$r(l$p)],u$g.prototype,"stipplePattern",void 0),e$u([y$r({type:o$j})],u$g.prototype,"stippleOffColor",void 0),u$g=n$j=e$u([i$X("esri.symbols.support.Symbol3DOutline")],u$g);var a$g=u$g;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var d$h;let y$8=d$h=class extends c$s{constructor(t){super(t),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null;}clone(){return new d$h({edges:r$A(this.edges)?this.edges.clone():null,enabled:this.enabled,material:r$A(this.material)?this.material.clone():null,pattern:r$A(this.pattern)?this.pattern.clone():null,castShadows:this.castShadows,outline:r$A(this.outline)?this.outline.clone():null})}static fromSimpleFillSymbol(t){return new d$h({material:{color:(t.color||e$9).clone()},pattern:t.style&&"solid"!==t.style?new c$k({style:t.style}):null,outline:t.outline?new a$g({size:t.outline.width||0,color:(t.outline.color||o$5).clone()}):null})}};e$u([r$v({Fill:"fill"},{readOnly:!0})],y$8.prototype,"type",void 0),e$u([y$r({type:i$f,json:{write:!0}})],y$8.prototype,"material",void 0),e$u([y$r(s$8)],y$8.prototype,"pattern",void 0),e$u([y$r({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],y$8.prototype,"castShadows",void 0),e$u([y$r({type:a$g,json:{write:!0}})],y$8.prototype,"outline",void 0),e$u([y$r(t$9)],y$8.prototype,"edges",void 0),y$8=d$h=e$u([i$X("esri.symbols.FillSymbol3DLayer")],y$8);var h$f=y$8;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var p$j;let l$k=p$j=class extends a$B{constructor(o){super(o),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal";}castSize(o){return o$6(o)}clone(){return new p$j({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return `${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};e$u([y$r({type:["underline","line-through","none"],json:{default:"none",write:!0}})],l$k.prototype,"decoration",void 0),e$u([y$r({type:String,json:{write:!0}})],l$k.prototype,"family",void 0),e$u([y$r({type:Number,json:{write:{overridePolicy:(o,t,e)=>({enabled:!e||!e.textSymbol3D})}}})],l$k.prototype,"size",void 0),e$u([c$_("size")],l$k.prototype,"castSize",null),e$u([y$r({type:["normal","italic","oblique"],json:{default:"normal",write:!0}})],l$k.prototype,"style",void 0),e$u([y$r({type:["normal","bold","bolder","lighter"],json:{default:"normal",write:!0}})],l$k.prototype,"weight",void 0),l$k=p$j=e$u([i$X("esri.symbols.Font")],l$k);var n$i=l$k;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var l$j;const d$g=o$A()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let j$8=l$j=class extends a$B{constructor(r){super(r);}readHref(r,e,o){return r?c$U(r,o):e.dataURI}writeHref(r,e,o,t){r&&(G$6(r)?e.dataURI=r:(e.href=i$W(r,t),Q$2(e.href)&&(e.href=z$6(e.href))));}clone(){return new l$j({href:this.href,primitive:this.primitive})}};e$u([y$r({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],j$8.prototype,"href",void 0),e$u([e$C("href")],j$8.prototype,"readHref",null),e$u([o$v("href",{href:{type:String},dataURI:{type:String}})],j$8.prototype,"writeHref",null),e$u([r$v(d$g)],j$8.prototype,"primitive",void 0),j$8=l$j=e$u([i$X("esri.symbols.support.IconSymbol3DLayerResource")],j$8);var y$7=j$8;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var e$8;let p$i=e$8=class extends u$D{constructor(){super(...arguments),this.x=0,this.y=0;}clone(){return new e$8({x:this.x,y:this.y})}};e$u([y$r({type:Number})],p$i.prototype,"x",void 0),e$u([y$r({type:Number})],p$i.prototype,"y",void 0),p$i=e$8=e$u([i$X("esri.symbols.support.Symbol3DAnchorPosition2D")],p$i);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var d$f;const f$9=n$T.getLogger("esri.symbols.IconSymbol3DLayer");let b$5=d$f=class extends c$s{constructor(o){super(o),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=void 0,this.outline=void 0;}clone(){return new d$f({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:r$A(this.material)?this.material.clone():null,outline:r$A(this.outline)?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(o){const t=o.color||o$5,r=j$7(o),e=o.outline&&o.outline.width>0?{size:o.outline.width,color:(o.outline.color||o$5).clone()}:null;return new d$f({size:o.size,resource:{primitive:w$3(o.style)},material:{color:t},outline:e,anchor:r?"relative":void 0,anchorPosition:r})}static fromPictureMarkerSymbol(o){const t=!o.color||t$7(o.color)?o$5:o.color,r=j$7(o);return new d$f({size:o.width<=o.height?o.height:o.width,resource:{href:o.url},material:{color:t.clone()},anchor:r?"relative":void 0,anchorPosition:r})}static fromCIMSymbol(o){return new d$f({resource:{href:X$2({mediaType:"application/json",data:JSON.stringify(o.data)})}})}};function j$7(o){const t="width"in o?o.width:o.size,r="height"in o?o.height:o.size,e=v$4(o.xoffset),i=v$4(o.yoffset);return (e||i)&&t&&r?{x:-e/t,y:i/r}:null}function v$4(o){return isFinite(o)?o:0}e$u([y$r({type:l$n,json:{write:!0}})],b$5.prototype,"material",void 0),e$u([y$r({type:y$7,json:{write:!0}})],b$5.prototype,"resource",void 0),e$u([r$v({Icon:"icon"},{readOnly:!0})],b$5.prototype,"type",void 0),e$u([y$r(p$r)],b$5.prototype,"size",void 0),e$u([r$v({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),y$r({json:{default:"center"}})],b$5.prototype,"anchor",void 0),e$u([y$r({type:p$i,json:{type:[Number],read:{reader:o=>new p$i({x:o[0],y:o[1]})},write:{writer:(o,t)=>{t.anchorPosition=[o.x,o.y];},overridePolicy(){return {enabled:"relative"===this.anchor}}}}})],b$5.prototype,"anchorPosition",void 0),e$u([y$r({type:a$g,json:{write:!0}})],b$5.prototype,"outline",void 0),b$5=d$f=e$u([i$X("esri.symbols.IconSymbol3DLayer")],b$5);const g$4={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function w$3(o){const t=g$4[o];return t||(f$9.warn(`${o} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}var S$3=b$5;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var u$f;let j$6=u$f=class extends c$s{constructor(t){super(t),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=e$a(1),this.stipplePattern=null,this.stippleOffColor=null;}clone(){return new u$f({enabled:this.enabled,material:r$A(this.material)?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,stipplePattern:this.stipplePattern?this.stipplePattern.slice():null,stippleOffColor:this.stippleOffColor?this.stippleOffColor.clone():null})}static fromSimpleLineSymbol(t){return new u$f({size:t.width||1,cap:t.cap||"butt",join:t.join||"miter",material:{color:(t.color||o$5).clone()}})}};e$u([y$r({type:l$n,json:{write:!0}})],j$6.prototype,"material",void 0),e$u([r$v({Line:"line"},{readOnly:!0})],j$6.prototype,"type",void 0),e$u([y$r({type:["miter","bevel","round"],json:{write:!0,default:"miter"}})],j$6.prototype,"join",void 0),e$u([y$r({type:["butt","square","round"],json:{write:!0,default:"butt"}})],j$6.prototype,"cap",void 0),e$u([y$r(p$r)],j$6.prototype,"size",void 0),e$u([y$r(l$p)],j$6.prototype,"stipplePattern",void 0),e$u([y$r({type:o$j})],j$6.prototype,"stippleOffColor",void 0),j$6=u$f=e$u([i$X("esri.symbols.LineSymbol3DLayer")],j$6);var f$8=j$6;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var m$c;const n$h=o$A()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let a$f=m$c=class extends a$B{clone(){return new m$c({href:this.href,primitive:this.primitive})}};e$u([y$r({type:String,json:{read:m$B,write:p$10}})],a$f.prototype,"href",void 0),e$u([r$v(n$h)],a$f.prototype,"primitive",void 0),a$f=m$c=e$u([i$X("esri.symbols.support.ObjectSymbol3DLayerResource")],a$f);var d$e=a$f;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var e$7;let p$h=e$7=class extends u$D{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0;}clone(){return new e$7({x:this.x,y:this.y,z:this.z})}};e$u([y$r({type:Number})],p$h.prototype,"x",void 0),e$u([y$r({type:Number})],p$h.prototype,"y",void 0),e$u([y$r({type:Number})],p$h.prototype,"z",void 0),p$h=e$7=e$u([i$X("esri.symbols.support.Symbol3DAnchorPosition3D")],p$h);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var n$g;let c$i=n$g=class extends c$s{constructor(o){super(o),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0;}clone(){return new n$g({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:r$A(this.material)?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return !this.resource||"string"!=typeof this.resource.href}};e$u([y$r({type:l$n,json:{write:!0}})],c$i.prototype,"material",void 0),e$u([y$r({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],c$i.prototype,"castShadows",void 0),e$u([y$r({type:d$e,json:{write:!0}})],c$i.prototype,"resource",void 0),e$u([r$v({Object:"object"},{readOnly:!0})],c$i.prototype,"type",void 0),e$u([y$r({type:Number,json:{write:!0}})],c$i.prototype,"width",void 0),e$u([y$r({type:Number,json:{write:!0}})],c$i.prototype,"height",void 0),e$u([y$r({type:Number,json:{write:!0}})],c$i.prototype,"depth",void 0),e$u([r$v({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),y$r({json:{default:"origin"}})],c$i.prototype,"anchor",void 0),e$u([y$r({type:p$h,json:{type:[Number],read:{reader:o=>new p$h({x:o[0],y:o[1],z:o[2]})},write:{writer:(o,t)=>{t.anchorPosition=[o.x,o.y,o.z];},overridePolicy(){return {enabled:"relative"===this.anchor}}}}})],c$i.prototype,"anchorPosition",void 0),e$u([y$r({type:Number,json:{write:!0}})],c$i.prototype,"heading",void 0),e$u([y$r({type:Number,json:{write:!0}})],c$i.prototype,"tilt",void 0),e$u([y$r({type:Number,json:{write:!0}})],c$i.prototype,"roll",void 0),e$u([y$r({readOnly:!0})],c$i.prototype,"isPrimitive",null),c$i=n$g=e$u([i$X("esri.symbols.ObjectSymbol3DLayer")],c$i);var l$i=c$i;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var a$e;let l$h=a$e=class extends c$s{constructor(t){super(t),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all";}get size(){return this.width&&this.height?this.width===this.height?this.width:void 0:this.width?this.width:this.height?this.height:void 0}set size(t){this.width=t,this.height=t;}readSize(t,e){return e.height||e.width?t:e.size}clone(){return new a$e({enabled:this.enabled,material:r$A(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};e$u([y$r({type:l$n,json:{write:!0}})],l$h.prototype,"material",void 0),e$u([y$r({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],l$h.prototype,"castShadows",void 0),e$u([r$v({Path:"path"},{readOnly:!0})],l$h.prototype,"type",void 0),e$u([y$r({type:Number})],l$h.prototype,"size",null),e$u([e$C("size")],l$h.prototype,"readSize",null),e$u([y$r({type:["circle","quad"],json:{write:!0,default:"circle"}})],l$h.prototype,"profile",void 0),e$u([y$r({type:["miter","bevel","round"],json:{write:!0,default:"miter"}})],l$h.prototype,"join",void 0),e$u([y$r({type:["none","butt","square","round"],json:{write:!0,default:"butt"}})],l$h.prototype,"cap",void 0),e$u([y$r({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],l$h.prototype,"width",void 0),e$u([y$r({type:Number,json:{write:!0}})],l$h.prototype,"height",void 0),e$u([y$r({type:["center","bottom","top"],json:{write:!0,default:"center"}})],l$h.prototype,"anchor",void 0),e$u([y$r({type:["heading","all"],json:{write:!0,default:"all"}})],l$h.prototype,"profileRotation",void 0),l$h=a$e=e$u([i$X("esri.symbols.PathSymbol3DLayer")],l$h);var d$d=l$h;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var m$b;let l$g=m$b=class extends a$B{constructor(){super(...arguments),this.color=new o$j([0,0,0,1]),this.size=0;}clone(){return new m$b({color:y$v(this.color),size:this.size})}};e$u([y$r(c$q)],l$g.prototype,"color",void 0),e$u([y$r(p$r)],l$g.prototype,"size",void 0),l$g=m$b=e$u([i$X("esri.symbols.support.Symbol3DHalo")],l$g);var a$d=l$g;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var c$h;let h$e=c$h=class extends c$s{constructor(t){super(t),this._userSize=void 0,this.halo=null,this.material=null,this.text=void 0,this.type="text";}get font(){return this._get("font")||null}set font(t){t&&this._userSize&&(t.size=this._userSize),this._set("font",t);}writeFont(t,o,e,r){const s={...r,textSymbol3D:!0};o.font=t.write({},s),delete o.font.size;}get size(){return null!=this._userSize?this._userSize:this.font&&null!=this.font.size?this.font.size:9}set size(t){this._userSize=t,this.font&&(this.font.size=this._userSize),this.notifyChange("size");}clone(){return new c$h({enabled:this.enabled,font:this.font&&y$v(this.font),halo:this.halo&&y$v(this.halo),material:r$A(this.material)?this.material.clone():null,size:this.size,text:this.text})}static fromTextSymbol(t){const o=f$7(t.haloColor,t.haloSize),e=t.font?t.font.clone():new n$i;return new c$h({size:e.size,font:e,halo:o,material:t.color?{color:t.color.clone()}:null,text:t.text})}};function f$7(t,e){return t&&e>0?{color:y$v(t),size:e}:null}e$u([y$r({type:n$i,json:{write:!0}})],h$e.prototype,"font",null),e$u([o$v("font")],h$e.prototype,"writeFont",null),e$u([y$r({type:a$d,json:{write:!0}})],h$e.prototype,"halo",void 0),e$u([y$r({type:l$n,json:{write:!0}})],h$e.prototype,"material",void 0),e$u([y$r(p$r),y$r()],h$e.prototype,"size",null),e$u([y$r({type:String,json:{write:!0}})],h$e.prototype,"text",void 0),e$u([r$v({Text:"text"},{readOnly:!0})],h$e.prototype,"type",void 0),h$e=c$h=e$u([i$X("esri.symbols.TextSymbol3DLayer")],h$e);var y$6=h$e;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var l$f;let c$g=l$f=class extends c$s{constructor(e){super(e),this.color=m$a.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate";}clone(){return new l$f({color:y$v(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};e$u([y$r({type:o$j,nonNullable:!0,json:{type:[N$5],write:(e,o,r)=>o[r]=e.toArray(1),default:()=>m$a.clone(),defaultEquals:e=>e.toCss(!0)===m$a.toCss(!0)}})],c$g.prototype,"color",void 0),e$u([r$v({Water:"water"},{readOnly:!0})],c$g.prototype,"type",void 0),e$u([y$r({type:["small","medium","large"],json:{write:!0,default:"medium"}})],c$g.prototype,"waterbodySize",void 0),e$u([y$r({type:Number,json:{write:!0,default:null}})],c$g.prototype,"waveDirection",void 0),e$u([y$r({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],c$g.prototype,"waveStrength",void 0),c$g=l$f=e$u([i$X("esri.symbols.WaterSymbol3DLayer")],c$g);const m$a=new o$j([0,119,190]);var n$f=c$g;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function n$e(n,t,i=L$5){return t||(t=new i),t===n||(t.removeAll(),e$6(n)?t.addMany(n):n&&t.add(n)),t}function t$6(r){return r}function e$6(r){return r&&(Array.isArray(r)||"items"in r&&Array.isArray(r.items))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const i$e=n$T.getLogger("esri.intl");function s$7(t,e,n={}){const{format:o={}}=n;return r$z(t,(t=>u$e(t,e,o)))}function u$e(r,e,n){let o,i;const s=r.indexOf(":");if(-1===s?o=r.trim():(o=r.slice(0,s).trim(),i=r.slice(s+1).trim()),!o)return "";const u=t$N(o,e);if(null==u)return "";const m=n[i]||n[o];return m?c$f(u,m):i?a$c(u,i):f$6(u)}function c$f(t,r){switch(r.type){case"date":return L$4(t,r.intlOptions);case"number":return m$j(t,r.intlOptions);default:return i$e.warn("missing format descriptor for key {key}"),f$6(t)}}function a$c(t,r){switch(r.toLowerCase()){case"dateformat":return L$4(t);case"numberformat":return m$j(t);default:return i$e.warn(`inline format is unsupported since 4.12: ${r}`),/^(dateformat|datestring)/i.test(r)?L$4(t):/^numberformat/i.test(r)?m$j(t):f$6(t)}}function f$6(t){switch(typeof t){case"string":return t;case"number":return m$j(t);case"boolean":return ""+t;default:return t instanceof Date?L$4(t):""}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const n$d=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,o$4=new Set(["ar","bs","ca","cs","da","de","el","en","es","et","fi","fr","he","hi","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-BR","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"]),i$d=[],a$b=new Map;function d$c(t){if(!i$d.includes(t)){for(const e of a$b.keys())u$d(t.pattern,e)&&a$b.delete(e);i$d.unshift(t);}}async function c$e(t){const e=(0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.b)();a$b.has(t)||a$b.set(t,l$e(t,e));const r=a$b.get(t);return await f$5.add(r),r}function h$d(t){if(!n$d.test(t))return null;const[,e,s]=n$d.exec(t),r=e+(s?"-"+s.toUpperCase():"");return o$4.has(r)?r:o$4.has(e)?e:null}async function l$e(e,s){const r=[];for(const t of i$d)if(u$d(t.pattern,e))try{return await t.fetchMessageBundle(e,s)}catch(n){r.push(n);}if(r.length)throw new s$x("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:r});throw new s$x("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function u$d(t,e){return "string"==typeof t?e.startsWith(t):t.test(e)}(0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.d)((()=>{a$b.clear();}));const f$5=new class{constructor(){this._numLoading=0;}async waitForAll(){this._dfd&&await this._dfd.promise;}add(t){return this._increase(),t.then((()=>this._decrease()),(()=>this._decrease())),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=E$3());}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&0===this._numLoading&&(this._dfd.resolve(),this._dfd=null);}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
async function s$6(e,t,o,s){const a=t.exec(o);if(!a)throw new s$x("esri-intl:invalid-bundle",`Bundle id "${o}" is not compatible with the pattern "${t}"`);const c=a[1]?`${a[1]}/`:"",l=a[2],h=h$d(s),u=`${c}${l}.json`,w=h?`${c}${l}_${h}.json`:u;let f;try{f=await i$c(e(w));}catch(d){if(w===u)throw new s$x("intl:unknown-bundle",`Bundle "${o}" cannot be loaded`,{error:d});try{f=await i$c(e(u));}catch(d){throw new s$x("intl:unknown-bundle",`Bundle "${o}" cannot be loaded`,{error:d})}}return f}async function i$c(e){if(r$A(l$d.fetchBundleAsset))return l$d.fetchBundleAsset(e);const n=await U$1(e,{responseType:"text"});return JSON.parse(n.data)}class a$a{constructor({base:t="",pattern:n,location:r=new URL(window.location.href)}){let o;o="string"==typeof r?t=>new URL(t,new URL(r,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.e.location)).href:r instanceof URL?e=>new URL(e,r).href:r,this.pattern="string"==typeof n?new RegExp(`^${n}`):n,this.getAssetUrl=o,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)/)?(.*)$`);}fetchMessageBundle(e,t){return s$6(this.getAssetUrl,this.matcher,e,t)}}function c$d(e){return new a$a(e)}const l$d={};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const i$b=n$T.getLogger("esri.assets");function a$9(t){if(!s$H.assetsPath)throw i$b.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new s$x("assets:path-not-set","config.assetsPath is not set");return D$6(s$H.assetsPath,t)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
d$c(c$d({pattern:"esri/",location:a$9}));

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
class h$c{constructor(s){this.instance=s,this._resolver=E$3(),this._status=0,this._resolvingPromises=[],this._resolver.promise.then((()=>{this._status=1,this._cleanUp();}),(()=>{this._status=2,this._cleanUp();}));}addResolvingPromise(s){this._resolvingPromises.push(s),this._tryResolve();}isResolved(){return 1===this._status}isRejected(){return 2===this._status}isFulfilled(){return 0!==this._status}abort(){this._resolver.reject(m$x());}when(s,e){return this._resolver.promise.then(s,e)}_cleanUp(){this._allPromise=this._resolvingPromises=this._allPromise=null;}_tryResolve(){if(this.isFulfilled())return;const s=E$3(),i=[...this._resolvingPromises,m$F(s.promise)],t=this._allPromise=Promise.all(i);t.then((()=>{this.isFulfilled()||this._allPromise!==t||this._resolver.resolve(this.instance);}),(s=>{this.isFulfilled()||this._allPromise!==t||g$g(s)||this._resolver.reject(s);})),s.resolve();}}const n$c=e=>{let r=class extends e{constructor(...s){super(...s),this._promiseProps=new h$c(this),this.addResolvingPromise(Promise.resolve());}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(s,e){return new Promise(((s,e)=>{this._promiseProps.when(s,e);})).then(s,e)}catch(s){return this.when(null,s)}addResolvingPromise(s){s&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in s?s.when():s);}};return r=e$u([i$X("esri.core.Promise")],r),r};let m$9=class extends(n$c(u$D)){};m$9=e$u([i$X("esri.core.Promise")],m$9);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const d$b="not-loaded",u$c="loading",c$c="failed",h$b="loaded",p$g=n=>{let p=class extends n{constructor(...o){super(...o),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise((o=>{const t=this.load.bind(this);this.load=s=>{const r=new Promise(((o,t)=>{const r=P$7(s,t);this.destroyed&&t(new s$x("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this._promiseProps.when(o,t).finally((()=>{r&&r.remove();}));}));if(this.loadStatus===d$b){this._set("loadStatus",u$c);const o=this._loadController=h$u();t({signal:o.signal}),v$9(o.signal,(()=>{this._promiseProps.abort();}));}return o(),r};}))),this.when((()=>{this._set("loadStatus",h$b),this._loadController=null;}),(o=>{this._set("loadStatus",c$c),this._set("loadError",o),this._loadController=null;}));}get loaded(){return this.loadStatus===h$b}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var o;return this.isFulfilled()||(this._set("loadError",new s$x("load:cancelled","Cancelled")),null==(o=this._loadController)||o.abort()),this}};return e$u([y$r({readOnly:!0})],p.prototype,"loaded",null),e$u([y$r({readOnly:!0})],p.prototype,"loadError",void 0),e$u([y$r()],p.prototype,"loadStatus",void 0),e$u([y$r({type:[t$H],readOnly:!0})],p.prototype,"loadWarnings",null),p=e$u([i$X("esri.core.Loadable")],p),p};let m$8=class extends(p$g(m$9)){};m$8=e$u([i$X("esri.core.Loadable")],m$8),function(o){function t(o){return !(!o||!o.load)}o.LoadableMixin=p$g,o.isLoadable=t;}(m$8||(m$8={}));var f$4=m$8;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var u$b;const m$7=new t$I({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let l$c=u$b=class extends u$D{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.num=10,this.query=null,this.sortField=null,this.start=1;}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){"asc"!==t&&"desc"!==t||this._set("sortOrder",t);}clone(){return new u$b({categories:this.categories?y$v(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,r){let e,s;if(this.categories&&(e=this.categories.map((t=>Array.isArray(t)?JSON.stringify(t):t))),this.extent){const t=g$9(this.extent,k$4.WGS84);t&&(s=`${t.xmin},${t.ymin},${t.xmax},${t.ymax}`);}let o=this.query;!this.disableExtraQuery&&t.extraQuery&&(o="("+o+")"+t.extraQuery);const i={categories:e,bbox:s,q:o,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(i.sortField=this.sortField.split(",").map((t=>m$7.toJSON(t.trim()))).join(","),i.sortOrder=this.sortOrder),{query:{...r,...i}}}};e$u([y$r()],l$c.prototype,"categories",void 0),e$u([y$r()],l$c.prototype,"disableExtraQuery",void 0),e$u([y$r({type:M$3})],l$c.prototype,"extent",void 0),e$u([y$r()],l$c.prototype,"num",void 0),e$u([y$r()],l$c.prototype,"query",void 0),e$u([y$r()],l$c.prototype,"sortField",void 0),e$u([y$r()],l$c.prototype,"sortOrder",null),e$u([y$r()],l$c.prototype,"start",void 0),l$c=u$b=e$u([i$X("esri.portal.PortalQueryParams")],l$c);var c$b=l$c;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
let e$5=class extends u$D{constructor(r){super(r),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null;}};e$u([y$r()],e$5.prototype,"nextQueryParams",void 0),e$u([y$r()],e$5.prototype,"queryParams",void 0),e$u([y$r()],e$5.prototype,"results",void 0),e$u([y$r()],e$5.prototype,"total",void 0),e$5=e$u([i$X("esri.portal.PortalQueryResult")],e$5);var p$f=e$5;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
let p$e=class extends a$B{constructor(r){super(r),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null;}get url(){const r=this.get("portal.restUrl");return r?`${r}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new s$x("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};e$u([y$r({type:Date})],p$e.prototype,"created",void 0),e$u([y$r()],p$e.prototype,"id",void 0),e$u([y$r()],p$e.prototype,"portal",void 0),e$u([y$r()],p$e.prototype,"title",void 0),e$u([y$r({readOnly:!0})],p$e.prototype,"url",null),e$u([y$r()],p$e.prototype,"username",void 0),p$e=e$u([i$X("esri.portal.PortalFolder")],p$e);var i$a=p$e;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
let l$b=class extends a$B{constructor(t){super(t),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null;}get thumbnailUrl(){const t=this.url,r=this.thumbnail;return t&&r?this.portal._normalizeUrl(`${t}/info/${r}?f=json`):null}get url(){const t=this.get("portal.restUrl");return t?t+"/community/groups/"+this.id:null}fetchCategorySchema(t){return this.portal._request(this.url+"/categorySchema",t).then((r=>{const e=r.categorySchema||[];return e.some((t=>"contentCategorySetsGroupQuery.LivingAtlas"===t.source))?this._fetchCategorySchemaSet("LivingAtlas",t):e}))}fetchMembers(t){return this.portal._request(this.url+"/users",t)}getThumbnailUrl(t){let r=this.thumbnailUrl;return r&&t&&(r+=`&w=${t}`),r}toJSON(){throw new s$x("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(t,e){let o=d$E(c$b,t);return parseFloat(this.portal.currentVersion)>5?(o=o||new c$b,this.portal._queryPortal(`/content/groups/${this.id}/search`,o,"PortalItem",e)):(o=o?o.clone():new c$b,o.query="group:"+this.id+(o.query?" "+o.query:""),this.portal.queryItems(o,e))}_fetchCategorySchemaSet(t,r){return this.portal._fetchSelf(this.portal.authMode,!0,r).then((t=>{const e=t.contentCategorySetsGroupQuery;if(e){const t=new c$b;return t.disableExtraQuery=!0,t.num=1,t.query=e,this.portal.queryGroups(t,r)}throw new s$x("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")})).then((e=>{if(e.total){const o=e.results[0],s=new c$b;return s.num=1,s.query=`typekeywords:"${t}"`,o.queryItems(s,r)}throw new s$x("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")})).then((t=>{if(t.total){return t.results[0].fetchData("json",r).then((t=>{const r=t&&t.categorySchema;return r&&r.length?r:[]}))}return []}))}};e$u([y$r()],l$b.prototype,"access",void 0),e$u([y$r({type:Date})],l$b.prototype,"created",void 0),e$u([y$r()],l$b.prototype,"description",void 0),e$u([y$r()],l$b.prototype,"id",void 0),e$u([y$r()],l$b.prototype,"isInvitationOnly",void 0),e$u([y$r({type:Date})],l$b.prototype,"modified",void 0),e$u([y$r()],l$b.prototype,"owner",void 0),e$u([y$r()],l$b.prototype,"portal",void 0),e$u([y$r()],l$b.prototype,"snippet",void 0),e$u([y$r()],l$b.prototype,"sortField",void 0),e$u([y$r()],l$b.prototype,"sortOrder",void 0),e$u([y$r()],l$b.prototype,"tags",void 0),e$u([y$r()],l$b.prototype,"thumbnail",void 0),e$u([y$r({readOnly:!0})],l$b.prototype,"thumbnailUrl",null),e$u([y$r()],l$b.prototype,"title",void 0),e$u([y$r({readOnly:!0})],l$b.prototype,"url",null),l$b=e$u([i$X("esri.portal.PortalGroup")],l$b);var p$d=l$b;

const PortalGroup = /*#__PURE__*/Object.freeze({
    __proto__: null,
    'default': p$d
});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var n$b;let u$a=n$b=class extends a$B{constructor(...t){super(...t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null;}get thumbnailUrl(){const t=this.url,r=this.thumbnail;return t&&r?this.portal._normalizeUrl(`${t}/info/${r}?f=json`):null}get userContentUrl(){const t=this.get("portal.restUrl");return t?`${t}/content/users/${this.username}`:null}get url(){const t=this.get("portal.restUrl");return t?`${t}/community/users/${this.username}`:null}addItem(t){const r=t&&t.item,e=t&&t.data,o=t&&t.folder,s={method:"post"};r&&(s.query=r.createPostQuery(),null!=e&&("string"==typeof e?s.query.text=e:"object"==typeof e&&(s.query.text=JSON.stringify(e))));let l=this.userContentUrl;return o&&(l+="/"+("string"==typeof o?o:o.id)),this.portal._request(l+"/addItem",s).then((t=>(r.id=t.id,r.portal=this.portal,r.loaded?r.reload():r.load())))}deleteItem(t){let r=this.userContentUrl;return t.ownerFolder&&(r+="/"+t.ownerFolder),this.portal._request(r+`/items/${t.id}/delete`,{method:"post"}).then((()=>{t.id=null,t.portal=null;}))}deleteItems(t){const r=this.userContentUrl+"/deleteItems",e=t.map((t=>t.id));if(e.length){const o={method:"post",query:{items:e.join(",")}};return this.portal._request(r,o).then((()=>{t.forEach((t=>{t.id=null,t.portal=null;}));}))}return Promise.resolve(void 0)}fetchFolders(){const t={query:{num:1}};return this.portal._request(this.userContentUrl,t).then((t=>{let r;return r=t&&t.folders?t.folders.map((t=>{const r=i$a.fromJSON(t);return r.portal=this.portal,r})):[],r}))}fetchGroups(){return this.portal._request(this.url).then((t=>{let r;return r=t&&t.groups?t.groups.map((t=>{const r=p$d.fromJSON(t);return r.portal=this.portal,r})):[],r}))}fetchItems(t){t||(t={});let r,e=this.userContentUrl;return t.folder&&(e+="/"+t.folder.id),__webpack_require__.e(/*! import() */ "vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_geoenrichment-components_dist_-025cfd").then(__webpack_require__.bind(__webpack_require__, /*! ./PortalItem-036182cd.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/PortalItem-036182cd.js")).then((({default:o})=>{r=o;const s={folders:!1,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"};return this.portal._request(e,{query:s})})).then((t=>{let e;return t&&t.items?(e=t.items.map((t=>{const e=r.fromJSON(t);return e.portal=this.portal,e})),Promise.all(e.map((t=>t.load()))).catch((t=>t)).then((()=>({items:e,nextStart:t.nextStart,total:t.total})))):{items:[],nextStart:-1,total:0}}))}fetchTags(){return this.portal._request(this.url+"/tags").then((t=>t.tags))}getThumbnailUrl(t){let r=this.thumbnailUrl;return r&&t&&(r+=`&w=${t}`),r}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new p$d({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):Promise.reject(new s$x("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new s$x("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const r=new n$b;return r.sourceJSON=t,r.read(t),r}};e$u([y$r()],u$a.prototype,"access",void 0),e$u([y$r({type:Date})],u$a.prototype,"created",void 0),e$u([y$r()],u$a.prototype,"culture",void 0),e$u([y$r()],u$a.prototype,"description",void 0),e$u([y$r()],u$a.prototype,"email",void 0),e$u([y$r()],u$a.prototype,"favGroupId",void 0),e$u([y$r()],u$a.prototype,"fullName",void 0),e$u([y$r({type:Date})],u$a.prototype,"modified",void 0),e$u([y$r()],u$a.prototype,"orgId",void 0),e$u([y$r()],u$a.prototype,"portal",void 0),e$u([y$r()],u$a.prototype,"preferredView",void 0),e$u([y$r()],u$a.prototype,"privileges",void 0),e$u([y$r()],u$a.prototype,"region",void 0),e$u([y$r()],u$a.prototype,"role",void 0),e$u([y$r()],u$a.prototype,"roleId",void 0),e$u([y$r()],u$a.prototype,"sourceJSON",void 0),e$u([y$r()],u$a.prototype,"thumbnail",void 0),e$u([y$r({readOnly:!0})],u$a.prototype,"thumbnailUrl",null),e$u([y$r()],u$a.prototype,"units",void 0),e$u([y$r({readOnly:!0})],u$a.prototype,"userContentUrl",null),e$u([y$r({readOnly:!0})],u$a.prototype,"url",null),e$u([y$r()],u$a.prototype,"username",void 0),e$u([y$r()],u$a.prototype,"userType",void 0),u$a=n$b=e$u([i$X("esri.portal.PortalUser")],u$a);var p$c=u$a;

const PortalUser = /*#__PURE__*/Object.freeze({
    __proto__: null,
    'default': p$c
});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var _;let O;const U={PortalGroup:()=>Promise.resolve().then(function () { return PortalGroup; }),PortalItem:()=>__webpack_require__.e(/*! import() */ "vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_geoenrichment-components_dist_-025cfd").then(__webpack_require__.bind(__webpack_require__, /*! ./PortalItem-036182cd.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/PortalItem-036182cd.js")),PortalUser:()=>Promise.resolve().then(function () { return PortalUser; })};let j$5=_=class extends(i$M(f$4)){constructor(e){super(e),this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=s$H.portalUrl,this.urlKey=null,this.user=null,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null;}normalizeCtorArgs(e){return "string"==typeof e?{url:e}:e}destroy(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null);}readAuthorizedCrossOriginDomains(e){if(e)for(const r of e)-1===s$H.request.trustedServers.indexOf(r)&&s$H.request.trustedServers.push(r);return e}readDefaultBasemap(e){if(e){const t=O.fromJSON(e);return t.portalItem={portal:this},t}return null}readDefaultVectorBasemap(e){if(e){const t=O.fromJSON(e);return t.portalItem={portal:this},t}return null}get extraQuery(){const e=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!e?` AND orgid:${this.id}`:null}get isOrganization(){return !!this.access}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.substring(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest";}return e}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e?e.toLowerCase():e}readUser(e){let t=null;return e&&(t=p$c.fromJSON(e),t.portal=this),t}load(e){const t=Promise.all(/*! import() */[__webpack_require__.e("vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_geoenrichment-components_dist_-025cfd"), __webpack_require__.e("vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_geoenrichment-components_dist_-463023")]).then(__webpack_require__.bind(__webpack_require__, /*! ./Basemap-d60454fd.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/Basemap-d60454fd.js")).then((({default:t})=>{a$I(e),O=t;})).then((()=>this.sourceJSON?this.sourceJSON:this._fetchSelf(this.authMode,!1,e))).then((e=>{if(s$r){const e=s$r;this.credential=e.findCredential(this.restUrl),this.credential||this.authMode!==_.AUTH_MODE_AUTO||(this._esriId_credentialCreateHandle=e.on("credential-create",(()=>{e.findCredential(this.restUrl)&&this._signIn();})));}this.sourceJSON=e,this.read(e);}));return this.addResolvingPromise(t),Promise.resolve(this)}async createClosestFacilityTask(){await this.load();const e=this._getHelperServiceUrl("closestFacility");return new((await Promise.all(/*! import() */[__webpack_require__.e("vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_geoenrichment-components_dist_-f9256f"), __webpack_require__.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_geoenrichment-components_dist_esm_Clos-1c93e2")]).then(__webpack_require__.bind(__webpack_require__, /*! ./ClosestFacilityTask-2470bbd9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/ClosestFacilityTask-2470bbd9.js"))).default)(e)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await Promise.all(/*! import() */[__webpack_require__.e("vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_geoenrichment-components_dist_-5d17d2"), __webpack_require__.e("vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_geoenrichment-components_dist_-90c5a0"), __webpack_require__.e("vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_geoenrichment-components_dist_-3d8fe4"), __webpack_require__.e("vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_geoenrichment-components_dist_-d42402"), __webpack_require__.e("vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_geoenrichment-components_dist_-025cfd"), __webpack_require__.e("vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_geoenrichment-components_dist_-6222b1"), __webpack_require__.e("vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_geoenrichment-components_dist_-ba5514")]).then(__webpack_require__.bind(__webpack_require__, /*! ./ElevationLayer-24ca6c8f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/ElevationLayer-24ca6c8f.js"))).default;return e?e.map((e=>new t({id:e.id,url:e.url}))):[]}async createGeometryService(){await this.load();const e=this._getHelperServiceUrl("geometry");return new((await __webpack_require__.e(/*! import() */ "vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_geoenrichment-components_dist_-4d17a6").then(__webpack_require__.bind(__webpack_require__, /*! ./GeometryService-3924f2b1.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/GeometryService-3924f2b1.js"))).default)({url:e})}async createPrintTask(){await this.load();const e=this._getHelperServiceUrl("printTask");return new((await Promise.all(/*! import() */[__webpack_require__.e("vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_geoenrichment-components_dist_-5d17d2"), __webpack_require__.e("vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_geoenrichment-components_dist_-a81bb1"), __webpack_require__.e("vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_geoenrichment-components_dist_-9a7411")]).then(__webpack_require__.bind(__webpack_require__, /*! ./PrintTask-762f6dba.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/PrintTask-762f6dba.js"))).default)(e)}async createRouteTask(){await this.load();const e=this._getHelperServiceUrl("route");return new((await Promise.all(/*! import() */[__webpack_require__.e("vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_geoenrichment-components_dist_-f9256f"), __webpack_require__.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_geoenrichment-components_dist_esm_Rout-daa2eb")]).then(__webpack_require__.bind(__webpack_require__, /*! ./RouteTask-3efce404.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/RouteTask-3efce404.js"))).default)(e)}async createServiceAreaTask(){await this.load();const e=this._getHelperServiceUrl("serviceArea");return new((await Promise.all(/*! import() */[__webpack_require__.e("vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_geoenrichment-components_dist_-f9256f"), __webpack_require__.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_geoenrichment-components_dist_esm_Serv-7feba7")]).then(__webpack_require__.bind(__webpack_require__, /*! ./ServiceAreaTask-7dc395c4.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/ServiceAreaTask-7dc395c4.js"))).default)(e)}fetchBasemaps(e,t){const r=new c$b;return r.query=e||(this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0,this.queryGroups(r,t).then((e=>{if(r.num=100,r.query='type:"Web Map" -type:"Web Application"',e.total){const o=e.results[0];return r.sortField=o.sortField||"name",r.sortOrder=o.sortOrder||"desc",o.queryItems(r,t)}return null})).then((e=>{let t;return t=e&&e.total?e.results.filter((e=>"Web Map"===e.type)).map((e=>new O({portalItem:e}))):[],t}))}fetchCategorySchema(e){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",e).then((e=>e.categorySchema)):b$b(e)?Promise.reject(m$x()):Promise.resolve([])}fetchFeaturedGroups(e){const t=this.featuredGroups,r=new c$b;if(r.num=100,r.sortField="title",t&&t.length){const o=[];for(const e of t)o.push(`(title:"${e.title}" AND owner:${e.owner})`);return r.query=o.join(" OR "),this.queryGroups(r,e).then((e=>e.results))}return b$b(e)?Promise.reject(m$x()):Promise.resolve([])}fetchRegions(e){const t=this.user&&this.user.culture||this.culture||(0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.b)();return this._request(this.restUrl+"/portals/regions",{...e,query:{culture:t}})}static getDefault(){return _._default&&!_._default.destroyed||(_._default=new _),_._default}queryGroups(e,t){return this._queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this._queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this._queryPortal("/community/users",e,"PortalUser",t)}toJSON(){throw new s$x("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new _({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new s$x("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}_getHelperServiceUrl(e){const t=this._getHelperService(e);if(!t.url)throw new s$x("portal:service-url-not-found",`The \`helperServices\` entry "${e}" does not include a \`url\` value`);return t.url}_fetchSelf(e=this.authMode,t=!1,r){const o=this.restUrl+"/portals/self",s={authMode:e,query:{culture:(0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.b)().toLowerCase()},...r};return "auto"===s.authMode&&(s.authMode="no-prompt"),t&&(s.query.default=!0),this._request(o,s)}_queryPortal(e,t,r,s){const i=d$E(c$b,t),a=t=>this._request(this.restUrl+e,{...i.toRequestOptions(this),...s}).then((e=>{const r=i.clone();return r.start=e.nextStart,new p$f({nextQueryParams:r,queryParams:i,total:e.total,results:_._resultsToTypedArray(t,{portal:this},e,s)})})).then((e=>Promise.all(e.results.map((t=>"function"==typeof t.when?t.when():e))).then((()=>e),(t=>(w$9(t),e)))));return r&&U[r]?U[r]().then((({default:e})=>(a$I(s),a(e)))):a()}_signIn(){if(this.authMode===_.AUTH_MODE_ANONYMOUS)return Promise.reject(new s$x("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if("failed"===this.loadStatus)return Promise.reject(this.loadError);const e=e=>Promise.resolve().then((()=>"not-loaded"===this.loadStatus?(e||(this.authMode="immediate"),this.load().then((()=>null))):"loading"===this.loadStatus?this.load().then((()=>this.credential?null:(this.credential=e,this._fetchSelf("immediate")))):this.user&&this.credential===e?null:(this.credential=e,this._fetchSelf("immediate")))).then((e=>{e&&(this.sourceJSON=e,this.read(e));}));return s$r?s$r.getCredential(this.restUrl).then((t=>e(t))):e(this.credential)}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_normalizeUrl(e){const t=this.credential&&this.credential.token;return this._normalizeSSL(t?e+(e.indexOf("?")>-1?"&":"?")+"token="+t:e)}_requestToTypedArray(e,t,r){return this._request(e,t).then((e=>{const t=_._resultsToTypedArray(r,{portal:this},e);return Promise.all(t.map((t=>"function"==typeof t.when?t.when():e))).then((()=>t),(()=>t))}))}_request(e,t={}){const r={f:"json",...t.query},{authMode:o=(this.authMode===_.AUTH_MODE_ANONYMOUS?"anonymous":"auto"),body:s=null,cacheBust:i=!1,method:a="auto",responseType:l="json",signal:n}=t,u={authMode:o,body:s,cacheBust:i,method:a,query:r,responseType:l,timeout:0,signal:n};return U$1(this._normalizeSSL(e),u).then((e=>e.data))}static _resultsToTypedArray(e,t,o,s){let i;if(o){const a=r$A(s)?s.signal:null;i=o.listings||o.notifications||o.userInvitations||o.tags||o.items||o.groups||o.comments||o.provisions||o.results||o.relatedItems||o,(e||t)&&(i=i.map((r=>{const o=Object.assign(e?e.fromJSON(r):r,t);return "function"==typeof o.load&&o.load(a),o})));}else i=[];return i}};j$5.AUTH_MODE_ANONYMOUS="anonymous",j$5.AUTH_MODE_AUTO="auto",j$5.AUTH_MODE_IMMEDIATE="immediate",e$u([y$r()],j$5.prototype,"access",void 0),e$u([y$r()],j$5.prototype,"allSSL",void 0),e$u([y$r()],j$5.prototype,"authMode",void 0),e$u([y$r()],j$5.prototype,"authorizedCrossOriginDomains",void 0),e$u([e$C("authorizedCrossOriginDomains")],j$5.prototype,"readAuthorizedCrossOriginDomains",null),e$u([y$r()],j$5.prototype,"basemapGalleryGroupQuery",void 0),e$u([y$r()],j$5.prototype,"bingKey",void 0),e$u([y$r()],j$5.prototype,"canListApps",void 0),e$u([y$r()],j$5.prototype,"canListData",void 0),e$u([y$r()],j$5.prototype,"canListPreProvisionedItems",void 0),e$u([y$r()],j$5.prototype,"canProvisionDirectPurchase",void 0),e$u([y$r()],j$5.prototype,"canSearchPublic",void 0),e$u([y$r()],j$5.prototype,"canShareBingPublic",void 0),e$u([y$r()],j$5.prototype,"canSharePublic",void 0),e$u([y$r()],j$5.prototype,"canSignInArcGIS",void 0),e$u([y$r()],j$5.prototype,"canSignInIDP",void 0),e$u([y$r()],j$5.prototype,"colorSetsGroupQuery",void 0),e$u([y$r()],j$5.prototype,"commentsEnabled",void 0),e$u([y$r({type:Date})],j$5.prototype,"created",void 0),e$u([y$r()],j$5.prototype,"credential",void 0),e$u([y$r()],j$5.prototype,"culture",void 0),e$u([y$r()],j$5.prototype,"currentVersion",void 0),e$u([y$r()],j$5.prototype,"customBaseUrl",void 0),e$u([y$r()],j$5.prototype,"defaultBasemap",void 0),e$u([e$C("defaultBasemap")],j$5.prototype,"readDefaultBasemap",null),e$u([y$r({type:M$3})],j$5.prototype,"defaultExtent",void 0),e$u([y$r()],j$5.prototype,"defaultVectorBasemap",void 0),e$u([e$C("defaultVectorBasemap")],j$5.prototype,"readDefaultVectorBasemap",null),e$u([y$r()],j$5.prototype,"description",void 0),e$u([y$r()],j$5.prototype,"eueiEnabled",void 0),e$u([y$r({readOnly:!0})],j$5.prototype,"extraQuery",null),e$u([y$r()],j$5.prototype,"featuredGroups",void 0),e$u([y$r()],j$5.prototype,"featuredItemsGroupQuery",void 0),e$u([y$r()],j$5.prototype,"galleryTemplatesGroupQuery",void 0),e$u([y$r()],j$5.prototype,"livingAtlasGroupQuery",void 0),e$u([y$r()],j$5.prototype,"hasCategorySchema",void 0),e$u([y$r()],j$5.prototype,"helpBase",void 0),e$u([y$r()],j$5.prototype,"helperServices",void 0),e$u([y$r()],j$5.prototype,"helpMap",void 0),e$u([y$r()],j$5.prototype,"homePageFeaturedContent",void 0),e$u([y$r()],j$5.prototype,"homePageFeaturedContentCount",void 0),e$u([y$r()],j$5.prototype,"httpPort",void 0),e$u([y$r()],j$5.prototype,"httpsPort",void 0),e$u([y$r()],j$5.prototype,"id",void 0),e$u([y$r()],j$5.prototype,"ipCntryCode",void 0),e$u([y$r({readOnly:!0})],j$5.prototype,"isOrganization",null),e$u([y$r()],j$5.prototype,"isPortal",void 0),e$u([y$r()],j$5.prototype,"isReadOnly",void 0),e$u([y$r()],j$5.prototype,"layerTemplatesGroupQuery",void 0),e$u([y$r()],j$5.prototype,"maxTokenExpirationMinutes",void 0),e$u([y$r({type:Date})],j$5.prototype,"modified",void 0),e$u([y$r()],j$5.prototype,"name",void 0),e$u([y$r()],j$5.prototype,"portalHostname",void 0),e$u([y$r()],j$5.prototype,"portalMode",void 0),e$u([y$r()],j$5.prototype,"portalProperties",void 0),e$u([y$r()],j$5.prototype,"region",void 0),e$u([y$r({readOnly:!0})],j$5.prototype,"restUrl",null),e$u([y$r()],j$5.prototype,"rotatorPanels",void 0),e$u([y$r()],j$5.prototype,"showHomePageDescription",void 0),e$u([y$r()],j$5.prototype,"sourceJSON",void 0),e$u([y$r()],j$5.prototype,"staticImagesUrl",void 0),e$u([y$r()],j$5.prototype,"stylesGroupQuery",void 0),e$u([y$r()],j$5.prototype,"supportsHostedServices",void 0),e$u([y$r()],j$5.prototype,"symbolSetsGroupQuery",void 0),e$u([y$r()],j$5.prototype,"templatesGroupQuery",void 0),e$u([y$r()],j$5.prototype,"thumbnail",void 0),e$u([y$r({readOnly:!0})],j$5.prototype,"thumbnailUrl",null),e$u([y$r()],j$5.prototype,"units",void 0),e$u([y$r()],j$5.prototype,"url",void 0),e$u([y$r()],j$5.prototype,"urlKey",void 0),e$u([e$C("urlKey")],j$5.prototype,"readUrlKey",null),e$u([y$r()],j$5.prototype,"user",void 0),e$u([e$C("user")],j$5.prototype,"readUser",null),e$u([y$r()],j$5.prototype,"useStandardizedQuery",void 0),e$u([y$r()],j$5.prototype,"useVectorBasemaps",void 0),e$u([y$r()],j$5.prototype,"vectorBasemapGalleryGroupQuery",void 0),j$5=_=e$u([i$X("esri.portal.Portal")],j$5);var w$2=j$5;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var p$b;let i$9=p$b=class extends u$D{constructor(){super(...arguments),this.portal=null;}clone(){return new p$b({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};e$u([y$r({type:String})],i$9.prototype,"name",void 0),e$u([y$r({type:String})],i$9.prototype,"styleUrl",void 0),e$u([y$r({type:String})],i$9.prototype,"styleName",void 0),e$u([y$r({type:w$2})],i$9.prototype,"portal",void 0),i$9=p$b=e$u([i$X("esri.symbols.support.StyleOrigin")],i$9);var l$a=i$9;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var t$5;let p$a=t$5=class extends u$D{clone(){return new t$5({url:this.url})}};e$u([y$r({type:String})],p$a.prototype,"url",void 0),p$a=t$5=e$u([i$X("esri.symbols.support.Thumbnail")],p$a);var c$a=p$a;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const v$3={icon:S$3,object:l$i,line:f$8,path:d$d,fill:h$f,extrude:c$m,text:y$6,water:n$f},C$3=L$5.ofType({base:c$s,key:"type",typeMap:v$3,errorContext:"symbol-layer"}),T$1=n$T.getLogger("esri.symbols.Symbol3D");let k$2=class extends n$o{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const r=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,o=r&&r.type||L$5;this._set("symbolLayers",new o);}get color(){return null}set color(e){T$1.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.");}set symbolLayers(e){n$e(e,this._get("symbolLayers"));}readStyleOrigin(e,r,o){if(e.styleUrl&&e.name){const r=c$U(e.styleUrl,o);return new l$a({styleUrl:r,name:e.name})}if(e.styleName&&e.name)return new l$a({portal:o&&o.portal||w$2.getDefault(),styleName:e.styleName,name:e.name});o&&o.messages&&o.messages.push(new t$H("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:o,definition:e}));}writeStyleOrigin(e,r,o,t){if(e.styleUrl&&e.name){let o=i$W(e.styleUrl,t);Q$2(o)&&(o=z$6(o)),r.styleOrigin={styleUrl:o,name:e.name};}else e.styleName&&e.name&&(e.portal&&t&&t.portal&&!P$8(e.portal.restUrl,t.portal.restUrl)?t&&t.messages&&t.messages.push(new t$H("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):r.styleOrigin={styleName:e.styleName,name:e.name});}normalizeCtorArgs(e){return e instanceof c$s||e&&v$3[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};e$u([y$r({json:{read:!1,write:!1}})],k$2.prototype,"color",null),e$u([y$r({type:C$3,nonNullable:!0,json:{write:!0}}),c$_(t$6)],k$2.prototype,"symbolLayers",null),e$u([y$r({type:l$a})],k$2.prototype,"styleOrigin",void 0),e$u([e$C("styleOrigin")],k$2.prototype,"readStyleOrigin",null),e$u([o$v("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],k$2.prototype,"writeStyleOrigin",null),e$u([y$r({type:c$a,json:{read:!1}})],k$2.prototype,"thumbnail",void 0),e$u([y$r({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],k$2.prototype,"type",void 0),k$2=e$u([i$X("esri.symbols.Symbol3D")],k$2);var A$2=k$2;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var l$9;let i$8=l$9=class extends a$B{constructor(){super(...arguments),this.color=new o$j("white");}clone(){return new l$9({color:y$v(this.color)})}};e$u([y$r(c$q)],i$8.prototype,"color",void 0),i$8=l$9=e$u([i$X("esri.symbols.callouts.LineCallout3DBorder")],i$8);var a$8=i$8;Object.freeze({__proto__:null,get LineCallout3DBorder(){return i$8},default:a$8});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
let t$4=class extends a$B{constructor(r){super(r),this.visible=!0;}clone(){}};e$u([y$r({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],t$4.prototype,"type",void 0),e$u([y$r({readOnly:!0})],t$4.prototype,"visible",void 0),t$4=e$u([i$X("esri.symbols.callouts.Callout3D")],t$4);var p$9=t$4;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var u$9;let j$4=u$9=class extends p$9{constructor(o){super(o),this.type="line",this.color=new o$j([0,0,0,1]),this.size=e$a(1),this.border=null;}get visible(){return this.size>0&&r$A(this.color)&&this.color.a>0}clone(){return new u$9({color:y$v(this.color),size:this.size,border:y$v(this.border)})}};e$u([r$v({line:"line"},{readOnly:!0})],j$4.prototype,"type",void 0),e$u([y$r(c$q)],j$4.prototype,"color",void 0),e$u([y$r(p$r)],j$4.prototype,"size",void 0),e$u([y$r({type:a$8,json:{write:!0}})],j$4.prototype,"border",void 0),e$u([y$r({readOnly:!0})],j$4.prototype,"visible",null),j$4=u$9=e$u([i$X("esri.symbols.callouts.LineCallout3D")],j$4);var d$a=j$4;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var p$8;let i$7=p$8=class extends a$B{constructor(){super(...arguments),this.screenLength=0,this.minWorldLength=0;}clone(){return new p$8({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};e$u([y$r(p$r)],i$7.prototype,"screenLength",void 0),e$u([y$r({type:Number,json:{write:!0,default:0}})],i$7.prototype,"minWorldLength",void 0),e$u([y$r({type:Number,json:{write:!0}})],i$7.prototype,"maxWorldLength",void 0),i$7=p$8=e$u([i$X("esri.symbols.support.Symbol3DVerticalOffset")],i$7);var n$a=i$7;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function r$2(t){if(!t)return !1;const e=t.verticalOffset;return !!e&&!(e.screenLength<=0||e.maxWorldLength<=0)}function n$9(t){if(!t)return !1;if(!t.supportsCallout||!t.supportsCallout())return !1;const e=t.callout;return !!e&&(!!e.visible&&!!r$2(t))}const l$8={types:{key:"type",base:p$9,typeMap:{line:d$a}},json:{write:!0}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var u$8;const n$8=L$5.ofType({base:null,key:"type",typeMap:{text:y$6}});let f$3=u$8=class extends A$2{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new n$8,this.type="label-3d";}supportsCallout(){return !0}hasVisibleCallout(){return n$9(this)}hasVisibleVerticalOffset(){return r$2(this)}clone(){return new u$8({styleOrigin:y$v(this.styleOrigin),symbolLayers:y$v(this.symbolLayers),thumbnail:y$v(this.thumbnail),callout:y$v(this.callout),verticalOffset:y$v(this.verticalOffset)})}static fromTextSymbol(t){return new u$8({symbolLayers:[y$6.fromTextSymbol(t)]})}};e$u([y$r({type:n$a,json:{write:!0}})],f$3.prototype,"verticalOffset",void 0),e$u([y$r(l$8)],f$3.prototype,"callout",void 0),e$u([y$r({json:{read:!1,write:!1}})],f$3.prototype,"styleOrigin",void 0),e$u([y$r({type:n$8})],f$3.prototype,"symbolLayers",void 0),e$u([r$v({LabelSymbol3D:"label-3d"},{readOnly:!0})],f$3.prototype,"type",void 0),f$3=u$8=e$u([i$X("esri.symbols.LabelSymbol3D")],f$3);var b$4=f$3;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var y$5;const a$7=L$5.ofType({base:null,key:"type",typeMap:{line:f$8,path:d$d}}),n$7=L$5.ofType({base:null,key:"type",typeMap:{line:f$8,path:d$d}});let c$9=y$5=class extends A$2{constructor(o){super(o),this.symbolLayers=new a$7,this.type="line-3d";}clone(){return new y$5({styleOrigin:y$v(this.styleOrigin),symbolLayers:y$v(this.symbolLayers),thumbnail:y$v(this.thumbnail)})}static fromSimpleLineSymbol(o){return new y$5({symbolLayers:[f$8.fromSimpleLineSymbol(o)]})}};e$u([y$r({type:a$7,json:{type:n$7}})],c$9.prototype,"symbolLayers",void 0),e$u([r$v({LineSymbol3D:"line-3d"},{readOnly:!0})],c$9.prototype,"type",void 0),c$9=y$5=e$u([i$X("esri.symbols.LineSymbol3D")],c$9);var u$7=c$9;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
let p$7=class extends n$o{constructor(r){super(r),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9;}hash(){return `${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};e$u([y$r({type:Number,json:{read:r=>r&&-1*r,write:(r,e)=>e.angle=r&&-1*r}})],p$7.prototype,"angle",void 0),e$u([y$r({type:["simple-marker","picture-marker"],readOnly:!0})],p$7.prototype,"type",void 0),e$u([y$r({type:Number,cast:o$6,json:{write:!0}})],p$7.prototype,"xoffset",void 0),e$u([y$r({type:Number,cast:o$6,json:{write:!0}})],p$7.prototype,"yoffset",void 0),e$u([y$r({type:Number,cast:r=>"auto"===r?r:o$6(r),json:{write:!0}})],p$7.prototype,"size",void 0),p$7=e$u([i$X("esri.symbols.MarkerSymbol")],p$7);var i$6=p$7;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var l$7;const c$8=L$5.ofType({base:null,key:"type",typeMap:{fill:h$f}});let y$4=l$7=class extends A$2{constructor(o){super(o),this.symbolLayers=new c$8,this.type="mesh-3d";}clone(){return new l$7({styleOrigin:y$v(this.styleOrigin),symbolLayers:y$v(this.symbolLayers),thumbnail:y$v(this.thumbnail)})}};e$u([y$r({type:c$8})],y$4.prototype,"symbolLayers",void 0),e$u([r$v({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],y$4.prototype,"type",void 0),y$4=l$7=e$u([i$X("esri.symbols.MeshSymbol3D")],y$4);var a$6=y$4;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function s$5(a,r,t){return r.imageData?X$2({mediaType:r.contentType||"image/png",isBase64:!0,data:r.imageData}):l$6(r.url,t)}function l$6(e,t){return p$6(t)&&!Q$2(e)&&t.layer.parsedUrl?D$6(t.layer.parsedUrl.path,"images",e):c$U(e,t)}function u$6(e,a,r,n){if(G$6(e)){const t=V$2(e);a.contentType=t.mediaType,a.imageData=t.data,r&&r.imageData===a.imageData&&r.url&&p$10(r.url,a,"url",n);}else p$10(e,a,"url",n);}const m$6={json:{read:{source:["imageData","url"],reader:s$5},write:{writer(e,a,r,t){u$6(e,a,this.source,t);}}}},c$7={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,a,r){const t={};return a.imageData&&(t.imageData=a.imageData),a.contentType&&(t.contentType=a.contentType),a.url&&(t.url=l$6(a.url,r)),t}}}};function p$6(e){return e&&("service"===e.origin||"portal-item"===e.origin)&&e.layer&&("feature"===e.layer.type||"stream"===e.layer.type)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var h$a;let u$5=h$a=class extends l$l{constructor(...t){super(...t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null;}normalizeCtorArgs(t,o,s,r){if(t&&"string"!=typeof t&&null==t.imageData)return t;const e={};return t&&(e.url=t),o&&(e.outline=o),null!=s&&(e.width=o$6(s)),null!=r&&(e.height=o$6(r)),e}clone(){const t=new h$a({color:y$v(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return t._set("source",y$v(this.source)),t}hash(){var t;return `${super.hash()}.${null==(t=this.color)?void 0:t.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};e$u([r$v({esriPFS:"picture-fill"},{readOnly:!0})],u$5.prototype,"type",void 0),e$u([y$r(m$6)],u$5.prototype,"url",void 0),e$u([y$r({type:Number,json:{write:!0}})],u$5.prototype,"xscale",void 0),e$u([y$r({type:Number,json:{write:!0}})],u$5.prototype,"yscale",void 0),e$u([y$r({type:Number,cast:o$6,json:{write:!0}})],u$5.prototype,"width",void 0),e$u([y$r({type:Number,cast:o$6,json:{write:!0}})],u$5.prototype,"height",void 0),e$u([y$r({type:Number,cast:o$6,json:{write:!0}})],u$5.prototype,"xoffset",void 0),e$u([y$r({type:Number,cast:o$6,json:{write:!0}})],u$5.prototype,"yoffset",void 0),e$u([y$r(c$7)],u$5.prototype,"source",void 0),u$5=h$a=e$u([i$X("esri.symbols.PictureFillSymbol")],u$5);var a$5=u$5;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var l$5;let a$4=l$5=class extends i$6{constructor(...r){super(...r),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null;}normalizeCtorArgs(r,t,o){if(r&&"string"!=typeof r&&null==r.imageData)return r;const e={};return r&&(e.url=r),null!=t&&(e.width=o$6(t)),null!=o&&(e.height=o$6(o)),e}readHeight(r,t){return t.size||r}readWidth(r,t){return t.size||r}clone(){const r=new l$5({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return r._set("source",y$v(this.source)),r}hash(){return `${super.hash()}.${this.height}.${this.url}.${this.width}`}};e$u([y$r({json:{write:!1}})],a$4.prototype,"color",void 0),e$u([r$v({esriPMS:"picture-marker"},{readOnly:!0})],a$4.prototype,"type",void 0),e$u([y$r(m$6)],a$4.prototype,"url",void 0),e$u([y$r(c$7)],a$4.prototype,"source",void 0),e$u([y$r({type:Number,cast:o$6,json:{write:!0}})],a$4.prototype,"height",void 0),e$u([e$C("height",["height","size"])],a$4.prototype,"readHeight",null),e$u([y$r({type:Number,cast:o$6,json:{write:!0}})],a$4.prototype,"width",void 0),e$u([y$r({json:{write:!1}})],a$4.prototype,"size",void 0),a$4=l$5=e$u([i$X("esri.symbols.PictureMarkerSymbol")],a$4);var n$6=a$4;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var S$2;const h$9=L$5.ofType({base:null,key:"type",typeMap:{icon:S$3,object:l$i,text:y$6}}),j$3=L$5.ofType({base:null,key:"type",typeMap:{icon:S$3,object:l$i}});let d$9=S$2=class extends A$2{constructor(o){super(o),this.verticalOffset=null,this.callout=null,this.symbolLayers=new h$9,this.type="point-3d";}writeSymbolLayers(o,t,e,r){const s=o.filter((o=>"text"!==o.type));if(r&&r.messages&&s.length<o.length){const t=o.find((o=>"text"===o.type));r.messages.push(new s$x("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PointSymbol3D",{symbolLayer:t}));}t[e]=s.map((o=>o.write({},r))).toArray();}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return !1;for(const o of this.symbolLayers.items)switch(o.type){case"icon":case"text":case"object":continue;default:return !1}return !0}hasVisibleCallout(){return n$9(this)}hasVisibleVerticalOffset(){return r$2(this)}clone(){return new S$2({verticalOffset:y$v(this.verticalOffset),callout:y$v(this.callout),styleOrigin:y$v(this.styleOrigin),symbolLayers:y$v(this.symbolLayers),thumbnail:y$v(this.thumbnail)})}static fromSimpleMarkerSymbol(o){return new S$2({symbolLayers:[S$3.fromSimpleMarkerSymbol(o)]})}static fromPictureMarkerSymbol(o){return new S$2({symbolLayers:[S$3.fromPictureMarkerSymbol(o)]})}static fromCIMSymbol(o){if(o.data&&o.data.symbol){const t=o.data.symbol;if("CIMPointSymbol"===t.type&&t.callout)return new S$2({symbolLayers:[S$3.fromCIMSymbol(o)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}})}return new S$2({symbolLayers:[S$3.fromCIMSymbol(o)]})}static fromTextSymbol(o){return new S$2({symbolLayers:[y$6.fromTextSymbol(o)]})}};e$u([y$r({type:n$a,json:{write:!0}})],d$9.prototype,"verticalOffset",void 0),e$u([y$r(l$8)],d$9.prototype,"callout",void 0),e$u([y$r({type:h$9,json:{type:j$3,origins:{"web-scene":{type:j$3}}}})],d$9.prototype,"symbolLayers",void 0),e$u([o$v("web-scene","symbolLayers")],d$9.prototype,"writeSymbolLayers",null),e$u([r$v({PointSymbol3D:"point-3d"},{readOnly:!0})],d$9.prototype,"type",void 0),d$9=S$2=e$u([i$X("esri.symbols.PointSymbol3D")],d$9);var L$2=d$9;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var L$1;const S$1=L$5.ofType({base:null,key:"type",typeMap:{extrude:c$m,fill:h$f,icon:S$3,line:f$8,object:l$i,text:y$6,water:n$f}}),d$8=L$5.ofType({base:null,key:"type",typeMap:{extrude:c$m,fill:h$f,icon:S$3,line:f$8,object:l$i,water:n$f}});let g$3=L$1=class extends A$2{constructor(e){super(e),this.symbolLayers=new S$1,this.type="polygon-3d";}writeSymbolLayers(e,o,r,t){const s=e.filter((e=>"text"!==e.type));if(t&&t.messages&&s.length<e.length){const o=e.find((e=>"text"===e.type));t.messages.push(new s$x("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PolygonSymbol3D",{symbolLayer:o}));}o[r]=s.map((e=>e.write({},t))).toArray();}clone(){return new L$1({styleOrigin:y$v(this.styleOrigin),symbolLayers:y$v(this.symbolLayers),thumbnail:y$v(this.thumbnail)})}static fromJSON(e){const o=new L$1;if(o.read(e),2===o.symbolLayers.length&&"fill"===o.symbolLayers.getItemAt(0).type&&"line"===o.symbolLayers.getItemAt(1).type){const t=o.symbolLayers.getItemAt(0),s=o.symbolLayers.getItemAt(1);!s.enabled||e.symbolLayers&&e.symbolLayers[1]&&!1===e.symbolLayers[1].enable||(t.outline={size:s.size,color:r$A(s.material)?s.material.color:null}),o.symbolLayers.removeAt(1);}return o}static fromSimpleFillSymbol(e){return new L$1({symbolLayers:[h$f.fromSimpleFillSymbol(e)]})}};e$u([y$r({type:S$1,json:{type:d$8}})],g$3.prototype,"symbolLayers",void 0),e$u([o$v("web-scene","symbolLayers")],g$3.prototype,"writeSymbolLayers",null),e$u([r$v({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],g$3.prototype,"type",void 0),g$3=L$1=e$u([i$X("esri.symbols.PolygonSymbol3D")],g$3);var h$8=g$3;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var c$6;const n$5=new t$I({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let m$5=c$6=class extends l$l{constructor(...o){super(...o),this.color=new o$j([0,0,0,.25]),this.outline=new d$i,this.type="simple-fill",this.style="solid";}normalizeCtorArgs(o,r,s){if(o&&"string"!=typeof o)return o;const e={};return o&&(e.style=o),r&&(e.outline=r),s&&(e.color=s),e}clone(){return new c$6({color:y$v(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return `${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};e$u([y$r()],m$5.prototype,"color",void 0),e$u([y$r()],m$5.prototype,"outline",void 0),e$u([r$v({esriSFS:"simple-fill"},{readOnly:!0})],m$5.prototype,"type",void 0),e$u([y$r({type:n$5.apiValues,json:{read:n$5.read,write:n$5.write}})],m$5.prototype,"style",void 0),m$5=c$6=e$u([i$X("esri.symbols.SimpleFillSymbol")],m$5);var u$4=m$5;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var m$4;const u$3=new t$I({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let h$7=m$4=class extends i$6{constructor(...r){super(...r),this.color=new o$j([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new d$i;}normalizeCtorArgs(r,o,e,t){if(r&&"string"!=typeof r)return r;const s={};return r&&(s.style=r),null!=o&&(s.size=o$6(o)),e&&(s.outline=e),t&&(s.color=t),s}writeColor(r,o){r&&"x"!==this.style&&"cross"!==this.style&&(o.color=r.toJSON()),null===r&&(o.color=null);}set path(r){this.style="path",this._set("path",r);}clone(){return new m$4({angle:this.angle,color:y$v(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var r;return `${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${null==(r=this.outline)?void 0:r.hash()}`}};e$u([y$r()],h$7.prototype,"color",void 0),e$u([o$v("color")],h$7.prototype,"writeColor",null),e$u([r$v({esriSMS:"simple-marker"},{readOnly:!0})],h$7.prototype,"type",void 0),e$u([y$r()],h$7.prototype,"size",void 0),e$u([y$r({type:u$3.apiValues,json:{read:u$3.read,write:u$3.write}})],h$7.prototype,"style",void 0),e$u([y$r({type:String,json:{write:!0}})],h$7.prototype,"path",null),e$u([y$r({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":d$i}},json:{default:null,write:!0}})],h$7.prototype,"outline",void 0),h$7=m$4=e$u([i$X("esri.symbols.SimpleMarkerSymbol")],h$7);var y$3=h$7;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var d$7;let c$5=d$7=class extends n$o{constructor(...t){super(...t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new n$i,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment=null,this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1;}normalizeCtorArgs(t,o,e){if(t&&"string"!=typeof t)return t;const i={};return t&&(i.text=t),o&&(i.font=o),e&&(i.color=e),i}writeLineWidth(t,o,e,i){i&&"string"!=typeof i?i.origin:o[e]=t;}castLineWidth(t){return o$6(t)}writeLineHeight(t,o,e,i){i&&"string"!=typeof i?i.origin:o[e]=t;}clone(){return new d$7({angle:this.angle,backgroundColor:y$v(this.backgroundColor),borderLineColor:y$v(this.borderLineColor),borderLineSize:this.borderLineSize,color:y$v(this.color),font:this.font&&this.font.clone(),haloColor:y$v(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return `${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};e$u([y$r({type:o$j,json:{write:!0}})],c$5.prototype,"backgroundColor",void 0),e$u([y$r({type:o$j,json:{write:!0}})],c$5.prototype,"borderLineColor",void 0),e$u([y$r({type:Number,json:{write:!0}})],c$5.prototype,"borderLineSize",void 0),e$u([y$r({type:n$i,json:{write:!0}})],c$5.prototype,"font",void 0),e$u([y$r({type:["left","right","center","justify"],json:{write:!0}})],c$5.prototype,"horizontalAlignment",void 0),e$u([y$r({type:Boolean,json:{write:!0}})],c$5.prototype,"kerning",void 0),e$u([y$r({type:o$j,json:{write:!0}})],c$5.prototype,"haloColor",void 0),e$u([y$r({type:Number,cast:o$6,json:{write:!0}})],c$5.prototype,"haloSize",void 0),e$u([y$r({type:Boolean,json:{write:!0}})],c$5.prototype,"rightToLeft",void 0),e$u([y$r({type:Boolean,json:{write:!0}})],c$5.prototype,"rotated",void 0),e$u([y$r({type:String,json:{write:!0}})],c$5.prototype,"text",void 0),e$u([r$v({esriTS:"text"},{readOnly:!0})],c$5.prototype,"type",void 0),e$u([y$r({type:["baseline","top","middle","bottom"],json:{write:!0}})],c$5.prototype,"verticalAlignment",void 0),e$u([y$r({type:Number,cast:o$6,json:{write:!0}})],c$5.prototype,"xoffset",void 0),e$u([y$r({type:Number,cast:o$6,json:{write:!0}})],c$5.prototype,"yoffset",void 0),e$u([y$r({type:Number,json:{read:t=>t&&-1*t,write:(t,o)=>o.angle=t&&-1*t}})],c$5.prototype,"angle",void 0),e$u([y$r({type:Number,json:{write:!0}})],c$5.prototype,"width",void 0),e$u([y$r({type:Number})],c$5.prototype,"lineWidth",void 0),e$u([o$v("lineWidth")],c$5.prototype,"writeLineWidth",null),e$u([c$_("lineWidth")],c$5.prototype,"castLineWidth",null),e$u([y$r({type:Number})],c$5.prototype,"lineHeight",void 0),e$u([o$v("lineHeight")],c$5.prototype,"writeLineHeight",null),c$5=d$7=e$u([i$X("esri.symbols.TextSymbol")],c$5);var y$2=c$5;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var c$4;const n$4=n$T.getLogger("esri.symbols.WebStyleSymbol");let u$2=c$4=class extends n$o{constructor(t){super(t),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style";}read(t,r){this.portal=r?r.portal:void 0,super.read(t,r);}clone(){return new c$4({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(t){return this._fetchSymbol("webRef",t)}fetchCIMSymbol(t){return this._fetchSymbol("cimRef",t)}async _fetchSymbol(t,r){const o=await h$6();a$I(r);const e=o.resolveWebStyleSymbol(this,{portal:this.portal},t,r);return e.catch((t=>{n$4.error("#fetchSymbol()","Failed to create symbol from style",t);})),e}};function h$6(){return __webpack_require__.e(/*! import() */ "extensions_widgets_arcgis_analysis_node_modules_arcgis_geoenrichment-components_dist_esm_styl-7aa056").then(__webpack_require__.bind(__webpack_require__, /*! ./styleUtils-6019f3b9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/styleUtils-6019f3b9.js")).then(function (n) { return n.s; })}e$u([y$r({json:{write:!1}})],u$2.prototype,"color",void 0),e$u([y$r({type:String,json:{write:!0}})],u$2.prototype,"styleName",void 0),e$u([y$r({type:w$2,json:{write:!1}})],u$2.prototype,"portal",void 0),e$u([y$r({type:String,json:{read:m$B,write:p$10}})],u$2.prototype,"styleUrl",void 0),e$u([y$r({type:c$a,json:{read:!1}})],u$2.prototype,"thumbnail",void 0),e$u([y$r({type:String,json:{write:!0}})],u$2.prototype,"name",void 0),e$u([r$v({styleSymbolReference:"web-style"},{readOnly:!0})],u$2.prototype,"type",void 0),u$2=c$4=e$u([i$X("esri.symbols.WebStyleSymbol")],u$2);var b$3=u$2;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function x$2(e){if(!e)return !1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return !0;default:return !1}}function c$3(e){if(!e)return !1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return !0;default:return !1}}const j$2={base:n$o,key:"type",typeMap:{"simple-fill":u$4,"picture-fill":a$5,"picture-marker":n$6,"simple-line":d$i,"simple-marker":y$3,text:y$2,"label-3d":b$4,"line-3d":u$7,"mesh-3d":a$6,"point-3d":L$2,"polygon-3d":h$8,"web-style":b$3,cim:d$j},errorContext:"symbol"},D$1={base:n$o,key:"type",typeMap:{"picture-marker":n$6,"simple-marker":y$3,text:y$2,"web-style":b$3,cim:d$j},errorContext:"symbol"},k$1=u$K({types:j$2}),M={base:n$o,key:"type",typeMap:{"simple-fill":u$4,"picture-fill":a$5,"picture-marker":n$6,"simple-line":d$i,"simple-marker":y$3,text:y$2,"line-3d":u$7,"mesh-3d":a$6,"point-3d":L$2,"polygon-3d":h$8,"web-style":b$3,cim:d$j},errorContext:"symbol"},P$1={base:n$o,key:"type",typeMap:{text:y$2,"label-3d":b$4},errorContext:"symbol"},h$5={base:n$o,key:"type",typeMap:{"line-3d":u$7,"mesh-3d":a$6,"point-3d":L$2,"polygon-3d":h$8,"web-style":b$3},errorContext:"symbol"},F={base:n$o,key:"type",typeMap:{"label-3d":b$4},errorContext:"symbol"},g$2=k$a(j$2);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
let t$3=0;function e$4(){return ++t$3}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var m$3;let h$4=m$3=class extends a$B{constructor(...t){super(...t),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:e$4(),configurable:!0});}normalizeCtorArgs(t,e,r,s){return t&&!t.declaredClass?t:{geometry:t,symbol:e,attributes:r,popupTemplate:s}}set attributes(t){const e=this._get("attributes");e!==t&&(this._set("attributes",t),this._notifyLayer("attributes",e,t));}set geometry(t){const e=this._get("geometry");e!==t&&(this._set("geometry",t),this._notifyLayer("geometry",e,t));}set symbol(t){const e=this._get("symbol");e!==t&&(this._set("symbol",t),this._notifyLayer("symbol",e,t));}set visible(t){const e=this._get("visible");e!==t&&(this._set("visible",t),this._notifyLayer("visible",e,t));}getEffectivePopupTemplate(t=!1){return this.popupTemplate?this.popupTemplate:this.sourceLayer?"popupTemplate"in this.sourceLayer&&this.sourceLayer.popupTemplate?this.sourceLayer.popupTemplate:t&&"defaultPopupTemplate"in this.sourceLayer&&r$A(this.sourceLayer.defaultPopupTemplate)?this.sourceLayer.defaultPopupTemplate:null:null}getAttribute(t){return this.attributes&&this.attributes[t]}setAttribute(t,e){if(this.attributes){const r=this.getAttribute(t);this.attributes[t]=e,this._notifyLayer("attributes",r,e,t);}else this.attributes={[t]:e},this._notifyLayer("attributes",void 0,e,t);}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return {geometry:r$A(this.geometry)?this.geometry.toJSON():null,symbol:r$A(this.symbol)?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}clone(){return new m$3(this.cloneProperties())}cloneProperties(){return {attributes:y$v(this.attributes),geometry:y$v(this.geometry),layer:this.layer,popupTemplate:this.popupTemplate&&this.popupTemplate.clone(),sourceLayer:this.sourceLayer,symbol:y$v(this.symbol),visible:this.visible}}_notifyLayer(t,e,r,s){if(!this.layer||!("graphicChanged"in this.layer))return;const o={graphic:this,property:t,oldValue:e,newValue:r};"attributes"===t&&(o.attributeName=s),this.layer.graphicChanged(o);}};e$u([y$r({value:null})],h$4.prototype,"attributes",null),e$u([y$r({value:null,types:i$F,json:{read:p$Q}})],h$4.prototype,"geometry",null),e$u([y$r({type:Boolean})],h$4.prototype,"isAggregate",void 0),e$u([y$r()],h$4.prototype,"layer",void 0),e$u([y$r({type:M$1})],h$4.prototype,"popupTemplate",void 0),e$u([y$r()],h$4.prototype,"sourceLayer",void 0),e$u([y$r({value:null,types:j$2})],h$4.prototype,"symbol",null),e$u([y$r({type:Boolean,value:!0})],h$4.prototype,"visible",null),h$4=m$3=e$u([i$X("esri.Graphic")],h$4),function(t){t.generateUID=e$4;}(h$4||(h$4={}));var n$3=h$4;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const i$5=new t$I({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var u$1;const c$2=new t$I({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let m$2=u$1=class extends a$B{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null;}readDescription(e,{description:t}){let o;try{o=JSON.parse(t);}catch(r){}return o?o.value:null}readValueType(e,{description:t}){let o;try{o=JSON.parse(t);}catch(r){}return o?c$2.fromJSON(o.fieldValueType):null}clone(){return new u$1({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}};e$u([y$r({type:String,json:{write:!0}})],m$2.prototype,"alias",void 0),e$u([y$r({type:[String,Number],json:{write:{allowNull:!0}}})],m$2.prototype,"defaultValue",void 0),e$u([y$r()],m$2.prototype,"description",void 0),e$u([e$C("description")],m$2.prototype,"readDescription",null),e$u([y$r({types:u$m,json:{read:{reader:d$n},write:!0}})],m$2.prototype,"domain",void 0),e$u([y$r({type:Boolean,json:{write:!0}})],m$2.prototype,"editable",void 0),e$u([y$r({type:N$5,json:{write:!0}})],m$2.prototype,"length",void 0),e$u([y$r({type:String,json:{write:!0}})],m$2.prototype,"name",void 0),e$u([y$r({type:Boolean,json:{write:!0}})],m$2.prototype,"nullable",void 0),e$u([r$v(i$5)],m$2.prototype,"type",void 0),e$u([y$r()],m$2.prototype,"valueType",void 0),e$u([e$C("valueType",["description"])],m$2.prototype,"readValueType",null),m$2=u$1=e$u([i$X("esri.layers.support.Field")],m$2);var y$1=m$2;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const h$3=new t$I({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let d$6=class extends a$B{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null;}readFeatures(e,r){const o=k$4.fromJSON(r.spatialReference),s=[];for(let i=0;i<e.length;i++){const r=e[i],n=n$3.fromJSON(r),p=r.geometry&&r.geometry.spatialReference;r$A(n.geometry)&&!p&&(n.geometry.spatialReference=o),s.push(n);}return s}writeGeometryType(e,r,o,s){if(e)return void h$3.write(e,r,o,s);const{features:i}=this;if(i)for(const n of i)if(n&&r$A(n.geometry))return void h$3.write(n.geometry.type,r,o,s)}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,o=p$Q(e);return !r&&t.spatialReference&&(o.spatialReference=k$4.fromJSON(t.spatialReference)),o}writeSpatialReference(e,r){if(e)return void(r.spatialReference=e.toJSON());const{features:o}=this;if(o)for(const s of o)if(s&&r$A(s.geometry)&&s.geometry.spatialReference)return void(r.spatialReference=s.geometry.spatialReference.toJSON())}toJSON(e){const t=this.write(null);if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const o=t.features[r];if(o.geometry){const t=e&&e[r];o.geometry=t&&t.toJSON()||o.geometry;}}return t}quantize(e){const{scale:[t,o],translate:[s,i]}=e,n=e=>Math.round((e-s)/t),p=e=>Math.round((i-e)/o),l=this.features,a=this._getQuantizationFunction(this.geometryType,n,p);for(let y=0,u=l.length;y<u;y++)a(e$I(l[y].geometry))||(l.splice(y,1),y--,u--);return this.transform=e,this}unquantize(){const{geometryType:e,features:r,transform:o}=this;if(!o)return this;const{translate:[s,i],scale:[n,p]}=o,l=e=>e*n+s,a=e=>i-e*p,y=this._getHydrationFunction(e,l,a);for(const{geometry:u}of r)r$A(u)&&y(u);return this.transform=null,this}_quantizePoints(e,t,r){let o,s;const i=[];for(let n=0,p=e.length;n<p;n++){const p=e[n];if(n>0){const e=t(p[0]),n=r(p[1]);e===o&&n===s||(i.push([e-o,n-s]),o=e,s=n);}else o=t(p[0]),s=r(p[1]),i.push([o,s]);}return i.length>0?i:null}_getQuantizationFunction(e,t,r){return "point"===e?e=>(e.x=t(e.x),e.y=r(e.y),e):"polyline"===e||"polygon"===e?e=>{const o=y$a(e)?e.rings:e.paths,s=[];for(let i=0,n=o.length;i<n;i++){const e=o[i],n=this._quantizePoints(e,t,r);n&&s.push(n);}return s.length>0?(y$a(e)?e.rings=s:e.paths=s,e):null}:"multipoint"===e?e=>{const o=this._quantizePoints(e.points,t,r);return o.length>0?(e.points=o,e):null}:"extent"===e?e=>e:null}_getHydrationFunction(e,t,r){return "point"===e?e=>{e.x=t(e.x),e.y=r(e.y);}:"polyline"===e||"polygon"===e?e=>{const o=y$a(e)?e.rings:e.paths;let s,i;for(let n=0,p=o.length;n<p;n++){const e=o[n];for(let o=0,n=e.length;o<n;o++){const n=e[o];o>0?(s+=n[0],i+=n[1]):(s=n[0],i=n[1]),n[0]=t(s),n[1]=r(i);}}}:"extent"===e?e=>{e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax);}:"multipoint"===e?e=>{const o=e.points;let s,i;for(let n=0,p=o.length;n<p;n++){const e=o[n];n>0?(s+=e[0],i+=e[1]):(s=e[0],i=e[1]),e[0]=t(s),e[1]=r(i);}}:void 0}};e$u([y$r({type:String,json:{write:!0}})],d$6.prototype,"displayFieldName",void 0),e$u([y$r({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],d$6.prototype,"exceededTransferLimit",void 0),e$u([y$r({type:[n$3],json:{write:!0}})],d$6.prototype,"features",void 0),e$u([e$C("features")],d$6.prototype,"readFeatures",null),e$u([y$r({type:[y$1],json:{write:!0}})],d$6.prototype,"fields",void 0),e$u([y$r({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:h$3.read}}})],d$6.prototype,"geometryType",void 0),e$u([o$v("geometryType")],d$6.prototype,"writeGeometryType",null),e$u([y$r({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],d$6.prototype,"hasM",void 0),e$u([y$r({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],d$6.prototype,"hasZ",void 0),e$u([y$r({types:i$F,json:{write:!0}})],d$6.prototype,"queryGeometry",void 0),e$u([e$C("queryGeometry")],d$6.prototype,"readQueryGeometry",null),e$u([y$r({type:k$4,json:{write:!0}})],d$6.prototype,"spatialReference",void 0),e$u([o$v("spatialReference")],d$6.prototype,"writeSpatialReference",null),e$u([y$r({json:{write:!0}})],d$6.prototype,"transform",void 0),d$6=e$u([i$X("esri.tasks.support.FeatureSet")],d$6),d$6.prototype.toJSON.isDefaultToJSON=!0,d$6||(d$6={});var g$1=d$6;

const FeatureSet = /*#__PURE__*/Object.freeze({
    __proto__: null,
    'default': g$1
});

/**
 * Study area defined by a feature set.
 */
class FeatureSetStudyArea extends StudyArea {
  /**
   * Can be created from a json object or by passing some parameters directly.
   */
  constructor(source) {
    super(source);
    if (source) {
      if (source.featureSet) {
        if (source.featureSet instanceof g$1) {
          this.featureSet = source.featureSet;
        }
        else {
          this.featureSet = g$1.fromJSON(source.featureSet);
        }
      }
    }
  }
  toJSON() {
    const json = super.toJSON();
    json.featureSet = this.featureSet && this.featureSet.toJSON();
    return json;
  }
}

/**
 * Study area defined by a geometry.
 */
const PRECISION = 10;
function _processPoints(points) {
  points.forEach((point) => {
    point[0] = parseFloat(point[0].toFixed(PRECISION));
    point[1] = parseFloat(point[1].toFixed(PRECISION));
  });
}
class GeometryStudyArea extends StudyArea {
  /**
   * Can be created from a json object or by passing some parameters directly.
   */
  constructor(source) {
    super(source);
    if (source) {
      if (source.geometry) {
        if (source.geometry instanceof c$O) {
          this.geometry = source.geometry;
        }
        else {
          this.geometry = p$Q(source.geometry);
        }
      }
    }
  }
  getGeomType() {
    return this.geometry.type;
  }
  toJSON() {
    const json = super.toJSON();
    json.geometry = this.geometry && this.geometry.toJSON();
    const geometry = json.geometry;
    // Some number do not get used correctly in Chrome & FF, e.g. Numbers 33.861252372599345 or 33.861252372599347
    // appear to be 33.861252372599346 in the run time.
    // This becomes a problem when using keys accross different browers that might work with numbers differently.
    // need to reduce the precision of points in geometry
    if (geometry) {
      // multipoint
      if (geometry.points) {
        _processPoints(geometry.points);
      }
      // polyline
      else if (geometry.paths) {
        geometry.paths.forEach(_processPoints);
      }
      // polygon
      else if (geometry.rings) {
        geometry.rings.forEach(_processPoints);
      }
    }
    return json;
  }
}

/**
 * Study area defined by a standard geography.
 */
class StandardGeographyStudyArea extends StudyArea {
  /**
   * Can be created from a json object or by passing some parameters directly.
   */
  constructor(source) {
    super(source);
    if (source) {
      const countryID = source.sourceCountry || source.countryID;
      if (countryID) {
        this.countryID = countryID;
      }
      const layer = source.layer || source.geographyLayerID;
      if (layer) {
        this.geographyLayerID = layer;
      }
      if (source.ids) {
        this.ids = source.ids;
      }
    }
  }
  getGeomType() {
    return "polygon";
  }
  toJSON() {
    const json = super.toJSON();
    if (this.countryID) {
      json.sourceCountry = this.countryID;
    }
    if (this.geographyLayerID) {
      json.layer = this.geographyLayerID;
    }
    if (this.ids) {
      json.ids = this.ids.slice();
    }
    return json;
  }
}

// geoenrichment.tasks
/**
 * Utility function to deserialize study area from JSON
 */
const studyAreaFromJson = function (json) {
  if (json.geometry) {
    return new GeometryStudyArea(json);
  }
  if (json.featureSet) {
    return new FeatureSetStudyArea(json);
  }
  if (json.address) {
    return new AddressStudyArea(json);
  }
  if (json.layer) {
    return new StandardGeographyStudyArea(json);
  }
  return null;
};

function isGeometryStudyArea(studyArea) {
  return !!studyArea.geometry;
}

/**
 * Base class for parameters of GeoenrichmentTask.enrich and GeoenrichmentTask.createReport methods.
 */
class EnrichParametersBase {
  /**
   * Can be created from a json object or by passing some parameters directly.
   */
  constructor(source) {
    this.studyAreas = [];
    if (!source) {
      return;
    }
    if (source.studyAreas) {
      let inSR;
      if (source.inSR) {
        inSR = source.inSR;
      }
      const studyAreas = source.studyAreas;
      for (let i = 0; i < studyAreas.length; i++) {
        const studyArea = studyAreaFromJson(studyAreas[i]);
        if (inSR && isGeometryStudyArea(studyArea)) {
          studyArea.geometry.spatialReference = new k$4(inSR);
        }
        this.studyAreas.push(studyArea);
      }
    }
    if (source.studyAreasOptions) {
      this.studyAreaOptions = studyAreaOptionsFromJson(source.studyAreasOptions);
    }
    else if (source.studyAreaOptions) {
      if (source.studyAreaOptions instanceof StudyAreaOptions) {
        this.studyAreaOptions = source.studyAreaOptions;
      }
      else {
        this.studyAreaOptions = studyAreaOptionsFromJson(source.studyAreaOptions);
      }
    }
    const usedata = source.useData;
    if (usedata) {
      if (usedata.sourceCountry) {
        this.countryID = usedata.sourceCountry;
      }
      if (usedata.hierarchy) {
        this.hierarchy = usedata.hierarchy;
      }
    }
    else {
      if (source.countryID) {
        this.countryID = source.countryID;
      }
      if (source.hierarchy) {
        this.hierarchy = source.hierarchy;
      }
    }
  }
  toJSON() {
    const json = {};
    const studyAreas = [];
    for (let i = 0; i < this.studyAreas.length; i++) {
      const studyArea = this.studyAreas[i];
      studyAreas.push(studyArea.toJSON());
    }
    //TO DO: use inSR if all study areas are in the same spatial reference
    //if (inSR) {
    //    json.inSR = inSR;
    //}
    if (studyAreas.length > 0) {
      json.studyAreas = studyAreas;
    }
    if (this.studyAreaOptions) {
      json.studyAreasOptions = this.studyAreaOptions.toJSON();
    }
    if (this.countryID || this.hierarchy) {
      const usedata = {};
      if (this.countryID) {
        usedata.sourceCountry = this.countryID;
      }
      if (this.hierarchy) {
        usedata.hierarchy = this.hierarchy;
      }
      json.useData = usedata;
    }
    return json;
  }
}

class IntersectingGeography {
  /**
   * Can be created from a json object or by passing some parameters directly.
   */
  constructor(source) {
    this.geometryType = "esriGeometryPoint";
    this.spatialRel = "esriSpatialRelIntersects";
    if (source) {
      this.name = source.name || null;
      this.outFields = source.outFields || null;
      if (source.intersectionInfo) {
        if (source.intersectionInfo.geometryType) {
          this.geometryType = source.intersectionInfo.geometryType;
        }
        if (source.intersectionInfo.spatialRel) {
          this.spatialRel = source.intersectionInfo.spatialRel;
        }
      }
      else {
        if (source.geometryType) {
          this.geometryType = source.geometryType;
        }
        if (source.spatialRel) {
          this.spatialRel = source.spatialRel;
        }
      }
    }
  }
  toJSON() {
    return {
      name: this.name,
      outFields: this.outFields,
      intersectionInfo: {
        geometryType: this.geometryType,
        spatialRel: this.spatialRel
      }
    };
  }
}

class StandardIntersectingGeography extends IntersectingGeography {
  /**
   * Can be created from a json object or by passing some parameters directly.
   */
  constructor(source) {
    super(source);
    if (source) {
      this.geographyLayerID = source.geographyLayer || source.geographyLayerID || null;
    }
  }
  toJSON() {
    const json = super.toJSON();
    json.geographyType = "standard";
    json.geographyLayer = this.geographyLayerID;
    return json;
  }
}

/**
 * Represents GeoenrichmentTask.enrich parameters.
 */
class EnrichParameters extends EnrichParametersBase {
  /**
   * Can be created from a json object or by passing some parameters directly.
   */
  constructor(source) {
    super(source);
    /**
     * Determines whether response will also include actual study area geometry.
     * For example, if input study area is a line, the response will inlude buffer polygon built around the line. Defaults to false.
     */
    this.returnGeometry = false;
    /**
     * The price for using the "Enrich" method varies according to whether the data returned is being persisted, i.e. being stored, or whether it is merely being used in an interactive context and is discarded after being viewed. If the data is being stored, the terms of use for the GeoEnrichment service require that you specify the "forStorage" parameter to true.
     */
    this.forStorage = true;
    this.variables = [];
    if (source) {
      this.variables = source.analysisVariables || source.variables || null;
      if (source.returnGeometry) {
        this.returnGeometry = true;
      }
      if (source.outSR) {
        this.outSR = new k$4(source.outSR);
      }
      if (source.forStorage) {
        this.forStorage = source.forStorage;
      }
      if (source.intersectingGeographies) {
        this.intersectingGeographies = [];
        for (let i = 0; i < source.intersectingGeographies.length; i++) {
          const intGeo = source.intersectingGeographies[i];
          if (intGeo.geographyType === "standard") {
            this.intersectingGeographies.push(new StandardIntersectingGeography(intGeo));
          }
          else if (intGeo.geographyType === "external") {
            //
            //TO DO: contruct "external" intersecting geos here
            //
            throw new Error("Not implemented");
          }
        }
      }
    }
  }
  toJSON() {
    const json = super.toJSON();
    json.analysisVariables = this.variables;
    if (this.returnGeometry) {
      json.returnGeometry = true;
    }
    if (this.outSR) {
      json.outSR = this.outSR.toJSON();
    }
    if (!this.forStorage) {
      json.forStorage = false;
    }
    if (this.intersectingGeographies) {
      json.intersectingGeographies = [];
      for (let i = 0; i < this.intersectingGeographies.length; i++) {
        json.intersectingGeographies.push(this.intersectingGeographies[i].toJSON());
      }
    }
    return json;
  }
}

/**
 * Adds some properties to the standard FeatureSet class that came from geoenrichment.enrich endpoint.
 */
function fieldTypeFromJSON(type) {
  return (type && type.replace("esriFieldType", "").toLowerCase());
}
function geomTypeFromJSON(type) {
  return (type && type.replace("esriGeometry", "").toLowerCase());
}
function fieldTypeToJSON(type) {
  return (type && ("esriFieldType" + type.charAt(0).toUpperCase() + type.substr(1)));
}
function geomTypeToJSON(type) {
  return (type && ("esriGeometry" + type.charAt(0).toUpperCase() + type.substr(1)));
}
/*
    Feature Set Example (This is how GE/Enrich returns it now):
  {
        "fieldAliases": {
          "TOP1NUM": "Top 1 Segment Number",
          "TOP1NAME": "Top 1 Segment Name",
            ...
        },
        "fields": [{
            "name": "TOP1NUM",
            "type": "esriFieldTypeDouble",
            "alias": "Top 1 Segment Number",
            "fullName": "TapestryNEW.TOP1NUM",
            "component": "demographics",
            "decimals": 0,
            "units": "count"
          }, {
            "name": "TOP1NAME",
            "type": "esriFieldTypeString",
            "alias": "Top 1 Segment Name",
            "fullName": "TapestryNEW.TOP1NAME",
            "component": "demographics",
            "length": 100,
            "units": "other"
          },
            ...
        ],
        "features": [{
            "attributes": {
              "TOP1NUM": 28,
              "TOP1NAME": "Urban Villages",
                    ...
            }
          }
        ]
    }
*/
class GEFeatureSet {
  constructor(json) {
    if (!json) {
      return;
    }
    this.fields =
      (json.fields &&
        json.fields.map((field) => ({
          name: field.name,
          type: fieldTypeFromJSON(field.type),
          alias: field.alias,
          description: field.description,
          length: field.length,
          // additional properties from Geoenrichment
          units: field.units,
          decimals: field.decimals,
          fullName: field.fullName
        }))) ||
        [];
    this.features =
      (json.features &&
        json.features.map((fJson) => {
          if (fJson.geometry) {
            fJson.geometry.spatialReference = json.spatialReference && y$v(json.spatialReference);
          }
          return new n$3({
            attributes: fJson.attributes,
            geometry: fJson.geometry && p$Q(fJson.geometry)
          });
        })) ||
        [];
    this.geometryType = geomTypeFromJSON(json.geometryType);
    this.fieldAliases = json.fieldAliases;
    this.spatialReference = json.spatialReference && new k$4(json.spatialReference);
  }
  toJSON() {
    return {
      fields: this.fields.map((field) => ({
        name: field.name,
        type: fieldTypeToJSON(field.type),
        alias: field.alias,
        description: field.description,
        length: field.length,
        // additional properties from Geoenrichment
        units: field.units,
        decimals: field.decimals,
        fullName: field.fullName
      })),
      features: this.features.map((feature) => feature.toJSON()),
      geometryType: geomTypeToJSON(this.geometryType),
      fieldAliases: this.fieldAliases && y$v(this.fieldAliases),
      spatialReference: this.spatialReference && this.spatialReference.toJSON()
    };
  }
  static fromField(field) {
    return {
      name: field.name,
      type: field.type,
      alias: field.alias,
      description: field.description,
      length: field.length
    };
  }
  static toField(field) {
    return new y$1({
      name: field.name,
      type: field.type,
      alias: field.alias,
      description: field.description,
      length: field.length
    });
  }
  static fromFeatureSet(fs) {
    if (fs instanceof GEFeatureSet) {
      return fs;
    }
    const geFs = new GEFeatureSet();
    geFs.fields = fs.fields.map(this.fromField) || [];
    geFs.features = fs.features.slice();
    geFs.geometryType = fs.geometryType;
    geFs.spatialReference = fs.spatialReference;
    return geFs;
  }
  static toFeatureSet(geFs) {
    const fs = new g$1();
    fs.fields = geFs.fields.map(this.toField) || [];
    fs.features = geFs.features.slice();
    fs.geometryType = geFs.geometryType;
    fs.spatialReference = geFs.spatialReference;
    return fs;
  }
}

/*!
 * @esri/arcgis-html-sanitizer - v2.5.0 - Mon Nov 09 2020 11:08:35 GMT-0500 (Eastern Standard Time)
 * Copyright (c) 2020 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2017 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 * 
 * Lodash/isPlainObject
 * Copyright (c) JS Foundation and other contributors <https://js.foundation/>
 * MIT License, see https://raw.githubusercontent.com/lodash/lodash/4.17.10-npm/LICENSE for details
 */
/**
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="npm" -o ./`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */

/** `Object#toString` result references. */
var objectTag = '[object Object]';

/**
 * Checks if `value` is a host object in IE < 9.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a host object, else `false`.
 */
function isHostObject(value) {
  // Many host objects are `Object` objects that can coerce to strings
  // despite having improperly defined `toString` methods.
  var result = false;
  if (value != null && typeof value.toString != 'function') {
    try {
      result = !!(value + '');
    } catch (e) {}
  }
  return result;
}

/**
 * Creates a unary function that invokes `func` with its argument transformed.
 *
 * @private
 * @param {Function} func The function to wrap.
 * @param {Function} transform The argument transform.
 * @returns {Function} Returns the new function.
 */
function overArg(func, transform) {
  return function(arg) {
    return func(transform(arg));
  };
}

/** Used for built-in method references. */
var funcProto = Function.prototype,
    objectProto = Object.prototype;

/** Used to resolve the decompiled source of functions. */
var funcToString = funcProto.toString;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/** Used to infer the `Object` constructor. */
var objectCtorString = funcToString.call(Object);

/**
 * Used to resolve the
 * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
 * of values.
 */
var objectToString = objectProto.toString;

/** Built-in value references. */
var getPrototype = overArg(Object.getPrototypeOf, Object);

/**
 * Checks if `value` is object-like. A value is object-like if it's not `null`
 * and has a `typeof` result of "object".
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
 * @example
 *
 * _.isObjectLike({});
 * // => true
 *
 * _.isObjectLike([1, 2, 3]);
 * // => true
 *
 * _.isObjectLike(_.noop);
 * // => false
 *
 * _.isObjectLike(null);
 * // => false
 */
function isObjectLike(value) {
  return !!value && typeof value == 'object';
}

/**
 * Checks if `value` is a plain object, that is, an object created by the
 * `Object` constructor or one with a `[[Prototype]]` of `null`.
 *
 * @static
 * @memberOf _
 * @since 0.8.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.
 * @example
 *
 * function Foo() {
 *   this.a = 1;
 * }
 *
 * _.isPlainObject(new Foo);
 * // => false
 *
 * _.isPlainObject([1, 2, 3]);
 * // => false
 *
 * _.isPlainObject({ 'x': 0, 'y': 0 });
 * // => true
 *
 * _.isPlainObject(Object.create(null));
 * // => true
 */
function isPlainObject(value) {
  if (!isObjectLike(value) ||
      objectToString.call(value) != objectTag || isHostObject(value)) {
    return false;
  }
  var proto = getPrototype(value);
  if (proto === null) {
    return true;
  }
  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;
  return (typeof Ctor == 'function' &&
    Ctor instanceof Ctor && funcToString.call(Ctor) == objectCtorString);
}

var lodash_isplainobject = isPlainObject;

function createCommonjsModule(fn, basedir, module) {
	return module = {
		path: basedir,
		exports: {},
		require: function (path, base) {
			return commonjsRequire();
		}
	}, fn(module, module.exports), module.exports;
}

function commonjsRequire () {
	throw new Error('Dynamic requires are not currently supported by @rollup/plugin-commonjs');
}

/**
 * cssfilter
 *
 * @author 老雷<leizongmin@gmail.com>
 */

function getDefaultWhiteList () {
  // 白名单值说明：
  // true: 允许该属性
  // Function: function (val) { } 返回true表示允许该属性，其他值均表示不允许
  // RegExp: regexp.test(val) 返回true表示允许该属性，其他值均表示不允许
  // 除上面列出的值外均表示不允许
  var whiteList = {};

  whiteList['align-content'] = false; // default: auto
  whiteList['align-items'] = false; // default: auto
  whiteList['align-self'] = false; // default: auto
  whiteList['alignment-adjust'] = false; // default: auto
  whiteList['alignment-baseline'] = false; // default: baseline
  whiteList['all'] = false; // default: depending on individual properties
  whiteList['anchor-point'] = false; // default: none
  whiteList['animation'] = false; // default: depending on individual properties
  whiteList['animation-delay'] = false; // default: 0
  whiteList['animation-direction'] = false; // default: normal
  whiteList['animation-duration'] = false; // default: 0
  whiteList['animation-fill-mode'] = false; // default: none
  whiteList['animation-iteration-count'] = false; // default: 1
  whiteList['animation-name'] = false; // default: none
  whiteList['animation-play-state'] = false; // default: running
  whiteList['animation-timing-function'] = false; // default: ease
  whiteList['azimuth'] = false; // default: center
  whiteList['backface-visibility'] = false; // default: visible
  whiteList['background'] = true; // default: depending on individual properties
  whiteList['background-attachment'] = true; // default: scroll
  whiteList['background-clip'] = true; // default: border-box
  whiteList['background-color'] = true; // default: transparent
  whiteList['background-image'] = true; // default: none
  whiteList['background-origin'] = true; // default: padding-box
  whiteList['background-position'] = true; // default: 0% 0%
  whiteList['background-repeat'] = true; // default: repeat
  whiteList['background-size'] = true; // default: auto
  whiteList['baseline-shift'] = false; // default: baseline
  whiteList['binding'] = false; // default: none
  whiteList['bleed'] = false; // default: 6pt
  whiteList['bookmark-label'] = false; // default: content()
  whiteList['bookmark-level'] = false; // default: none
  whiteList['bookmark-state'] = false; // default: open
  whiteList['border'] = true; // default: depending on individual properties
  whiteList['border-bottom'] = true; // default: depending on individual properties
  whiteList['border-bottom-color'] = true; // default: current color
  whiteList['border-bottom-left-radius'] = true; // default: 0
  whiteList['border-bottom-right-radius'] = true; // default: 0
  whiteList['border-bottom-style'] = true; // default: none
  whiteList['border-bottom-width'] = true; // default: medium
  whiteList['border-collapse'] = true; // default: separate
  whiteList['border-color'] = true; // default: depending on individual properties
  whiteList['border-image'] = true; // default: none
  whiteList['border-image-outset'] = true; // default: 0
  whiteList['border-image-repeat'] = true; // default: stretch
  whiteList['border-image-slice'] = true; // default: 100%
  whiteList['border-image-source'] = true; // default: none
  whiteList['border-image-width'] = true; // default: 1
  whiteList['border-left'] = true; // default: depending on individual properties
  whiteList['border-left-color'] = true; // default: current color
  whiteList['border-left-style'] = true; // default: none
  whiteList['border-left-width'] = true; // default: medium
  whiteList['border-radius'] = true; // default: 0
  whiteList['border-right'] = true; // default: depending on individual properties
  whiteList['border-right-color'] = true; // default: current color
  whiteList['border-right-style'] = true; // default: none
  whiteList['border-right-width'] = true; // default: medium
  whiteList['border-spacing'] = true; // default: 0
  whiteList['border-style'] = true; // default: depending on individual properties
  whiteList['border-top'] = true; // default: depending on individual properties
  whiteList['border-top-color'] = true; // default: current color
  whiteList['border-top-left-radius'] = true; // default: 0
  whiteList['border-top-right-radius'] = true; // default: 0
  whiteList['border-top-style'] = true; // default: none
  whiteList['border-top-width'] = true; // default: medium
  whiteList['border-width'] = true; // default: depending on individual properties
  whiteList['bottom'] = false; // default: auto
  whiteList['box-decoration-break'] = true; // default: slice
  whiteList['box-shadow'] = true; // default: none
  whiteList['box-sizing'] = true; // default: content-box
  whiteList['box-snap'] = true; // default: none
  whiteList['box-suppress'] = true; // default: show
  whiteList['break-after'] = true; // default: auto
  whiteList['break-before'] = true; // default: auto
  whiteList['break-inside'] = true; // default: auto
  whiteList['caption-side'] = false; // default: top
  whiteList['chains'] = false; // default: none
  whiteList['clear'] = true; // default: none
  whiteList['clip'] = false; // default: auto
  whiteList['clip-path'] = false; // default: none
  whiteList['clip-rule'] = false; // default: nonzero
  whiteList['color'] = true; // default: implementation dependent
  whiteList['color-interpolation-filters'] = true; // default: auto
  whiteList['column-count'] = false; // default: auto
  whiteList['column-fill'] = false; // default: balance
  whiteList['column-gap'] = false; // default: normal
  whiteList['column-rule'] = false; // default: depending on individual properties
  whiteList['column-rule-color'] = false; // default: current color
  whiteList['column-rule-style'] = false; // default: medium
  whiteList['column-rule-width'] = false; // default: medium
  whiteList['column-span'] = false; // default: none
  whiteList['column-width'] = false; // default: auto
  whiteList['columns'] = false; // default: depending on individual properties
  whiteList['contain'] = false; // default: none
  whiteList['content'] = false; // default: normal
  whiteList['counter-increment'] = false; // default: none
  whiteList['counter-reset'] = false; // default: none
  whiteList['counter-set'] = false; // default: none
  whiteList['crop'] = false; // default: auto
  whiteList['cue'] = false; // default: depending on individual properties
  whiteList['cue-after'] = false; // default: none
  whiteList['cue-before'] = false; // default: none
  whiteList['cursor'] = false; // default: auto
  whiteList['direction'] = false; // default: ltr
  whiteList['display'] = true; // default: depending on individual properties
  whiteList['display-inside'] = true; // default: auto
  whiteList['display-list'] = true; // default: none
  whiteList['display-outside'] = true; // default: inline-level
  whiteList['dominant-baseline'] = false; // default: auto
  whiteList['elevation'] = false; // default: level
  whiteList['empty-cells'] = false; // default: show
  whiteList['filter'] = false; // default: none
  whiteList['flex'] = false; // default: depending on individual properties
  whiteList['flex-basis'] = false; // default: auto
  whiteList['flex-direction'] = false; // default: row
  whiteList['flex-flow'] = false; // default: depending on individual properties
  whiteList['flex-grow'] = false; // default: 0
  whiteList['flex-shrink'] = false; // default: 1
  whiteList['flex-wrap'] = false; // default: nowrap
  whiteList['float'] = false; // default: none
  whiteList['float-offset'] = false; // default: 0 0
  whiteList['flood-color'] = false; // default: black
  whiteList['flood-opacity'] = false; // default: 1
  whiteList['flow-from'] = false; // default: none
  whiteList['flow-into'] = false; // default: none
  whiteList['font'] = true; // default: depending on individual properties
  whiteList['font-family'] = true; // default: implementation dependent
  whiteList['font-feature-settings'] = true; // default: normal
  whiteList['font-kerning'] = true; // default: auto
  whiteList['font-language-override'] = true; // default: normal
  whiteList['font-size'] = true; // default: medium
  whiteList['font-size-adjust'] = true; // default: none
  whiteList['font-stretch'] = true; // default: normal
  whiteList['font-style'] = true; // default: normal
  whiteList['font-synthesis'] = true; // default: weight style
  whiteList['font-variant'] = true; // default: normal
  whiteList['font-variant-alternates'] = true; // default: normal
  whiteList['font-variant-caps'] = true; // default: normal
  whiteList['font-variant-east-asian'] = true; // default: normal
  whiteList['font-variant-ligatures'] = true; // default: normal
  whiteList['font-variant-numeric'] = true; // default: normal
  whiteList['font-variant-position'] = true; // default: normal
  whiteList['font-weight'] = true; // default: normal
  whiteList['grid'] = false; // default: depending on individual properties
  whiteList['grid-area'] = false; // default: depending on individual properties
  whiteList['grid-auto-columns'] = false; // default: auto
  whiteList['grid-auto-flow'] = false; // default: none
  whiteList['grid-auto-rows'] = false; // default: auto
  whiteList['grid-column'] = false; // default: depending on individual properties
  whiteList['grid-column-end'] = false; // default: auto
  whiteList['grid-column-start'] = false; // default: auto
  whiteList['grid-row'] = false; // default: depending on individual properties
  whiteList['grid-row-end'] = false; // default: auto
  whiteList['grid-row-start'] = false; // default: auto
  whiteList['grid-template'] = false; // default: depending on individual properties
  whiteList['grid-template-areas'] = false; // default: none
  whiteList['grid-template-columns'] = false; // default: none
  whiteList['grid-template-rows'] = false; // default: none
  whiteList['hanging-punctuation'] = false; // default: none
  whiteList['height'] = true; // default: auto
  whiteList['hyphens'] = false; // default: manual
  whiteList['icon'] = false; // default: auto
  whiteList['image-orientation'] = false; // default: auto
  whiteList['image-resolution'] = false; // default: normal
  whiteList['ime-mode'] = false; // default: auto
  whiteList['initial-letters'] = false; // default: normal
  whiteList['inline-box-align'] = false; // default: last
  whiteList['justify-content'] = false; // default: auto
  whiteList['justify-items'] = false; // default: auto
  whiteList['justify-self'] = false; // default: auto
  whiteList['left'] = false; // default: auto
  whiteList['letter-spacing'] = true; // default: normal
  whiteList['lighting-color'] = true; // default: white
  whiteList['line-box-contain'] = false; // default: block inline replaced
  whiteList['line-break'] = false; // default: auto
  whiteList['line-grid'] = false; // default: match-parent
  whiteList['line-height'] = false; // default: normal
  whiteList['line-snap'] = false; // default: none
  whiteList['line-stacking'] = false; // default: depending on individual properties
  whiteList['line-stacking-ruby'] = false; // default: exclude-ruby
  whiteList['line-stacking-shift'] = false; // default: consider-shifts
  whiteList['line-stacking-strategy'] = false; // default: inline-line-height
  whiteList['list-style'] = true; // default: depending on individual properties
  whiteList['list-style-image'] = true; // default: none
  whiteList['list-style-position'] = true; // default: outside
  whiteList['list-style-type'] = true; // default: disc
  whiteList['margin'] = true; // default: depending on individual properties
  whiteList['margin-bottom'] = true; // default: 0
  whiteList['margin-left'] = true; // default: 0
  whiteList['margin-right'] = true; // default: 0
  whiteList['margin-top'] = true; // default: 0
  whiteList['marker-offset'] = false; // default: auto
  whiteList['marker-side'] = false; // default: list-item
  whiteList['marks'] = false; // default: none
  whiteList['mask'] = false; // default: border-box
  whiteList['mask-box'] = false; // default: see individual properties
  whiteList['mask-box-outset'] = false; // default: 0
  whiteList['mask-box-repeat'] = false; // default: stretch
  whiteList['mask-box-slice'] = false; // default: 0 fill
  whiteList['mask-box-source'] = false; // default: none
  whiteList['mask-box-width'] = false; // default: auto
  whiteList['mask-clip'] = false; // default: border-box
  whiteList['mask-image'] = false; // default: none
  whiteList['mask-origin'] = false; // default: border-box
  whiteList['mask-position'] = false; // default: center
  whiteList['mask-repeat'] = false; // default: no-repeat
  whiteList['mask-size'] = false; // default: border-box
  whiteList['mask-source-type'] = false; // default: auto
  whiteList['mask-type'] = false; // default: luminance
  whiteList['max-height'] = true; // default: none
  whiteList['max-lines'] = false; // default: none
  whiteList['max-width'] = true; // default: none
  whiteList['min-height'] = true; // default: 0
  whiteList['min-width'] = true; // default: 0
  whiteList['move-to'] = false; // default: normal
  whiteList['nav-down'] = false; // default: auto
  whiteList['nav-index'] = false; // default: auto
  whiteList['nav-left'] = false; // default: auto
  whiteList['nav-right'] = false; // default: auto
  whiteList['nav-up'] = false; // default: auto
  whiteList['object-fit'] = false; // default: fill
  whiteList['object-position'] = false; // default: 50% 50%
  whiteList['opacity'] = false; // default: 1
  whiteList['order'] = false; // default: 0
  whiteList['orphans'] = false; // default: 2
  whiteList['outline'] = false; // default: depending on individual properties
  whiteList['outline-color'] = false; // default: invert
  whiteList['outline-offset'] = false; // default: 0
  whiteList['outline-style'] = false; // default: none
  whiteList['outline-width'] = false; // default: medium
  whiteList['overflow'] = false; // default: depending on individual properties
  whiteList['overflow-wrap'] = false; // default: normal
  whiteList['overflow-x'] = false; // default: visible
  whiteList['overflow-y'] = false; // default: visible
  whiteList['padding'] = true; // default: depending on individual properties
  whiteList['padding-bottom'] = true; // default: 0
  whiteList['padding-left'] = true; // default: 0
  whiteList['padding-right'] = true; // default: 0
  whiteList['padding-top'] = true; // default: 0
  whiteList['page'] = false; // default: auto
  whiteList['page-break-after'] = false; // default: auto
  whiteList['page-break-before'] = false; // default: auto
  whiteList['page-break-inside'] = false; // default: auto
  whiteList['page-policy'] = false; // default: start
  whiteList['pause'] = false; // default: implementation dependent
  whiteList['pause-after'] = false; // default: implementation dependent
  whiteList['pause-before'] = false; // default: implementation dependent
  whiteList['perspective'] = false; // default: none
  whiteList['perspective-origin'] = false; // default: 50% 50%
  whiteList['pitch'] = false; // default: medium
  whiteList['pitch-range'] = false; // default: 50
  whiteList['play-during'] = false; // default: auto
  whiteList['position'] = false; // default: static
  whiteList['presentation-level'] = false; // default: 0
  whiteList['quotes'] = false; // default: text
  whiteList['region-fragment'] = false; // default: auto
  whiteList['resize'] = false; // default: none
  whiteList['rest'] = false; // default: depending on individual properties
  whiteList['rest-after'] = false; // default: none
  whiteList['rest-before'] = false; // default: none
  whiteList['richness'] = false; // default: 50
  whiteList['right'] = false; // default: auto
  whiteList['rotation'] = false; // default: 0
  whiteList['rotation-point'] = false; // default: 50% 50%
  whiteList['ruby-align'] = false; // default: auto
  whiteList['ruby-merge'] = false; // default: separate
  whiteList['ruby-position'] = false; // default: before
  whiteList['shape-image-threshold'] = false; // default: 0.0
  whiteList['shape-outside'] = false; // default: none
  whiteList['shape-margin'] = false; // default: 0
  whiteList['size'] = false; // default: auto
  whiteList['speak'] = false; // default: auto
  whiteList['speak-as'] = false; // default: normal
  whiteList['speak-header'] = false; // default: once
  whiteList['speak-numeral'] = false; // default: continuous
  whiteList['speak-punctuation'] = false; // default: none
  whiteList['speech-rate'] = false; // default: medium
  whiteList['stress'] = false; // default: 50
  whiteList['string-set'] = false; // default: none
  whiteList['tab-size'] = false; // default: 8
  whiteList['table-layout'] = false; // default: auto
  whiteList['text-align'] = true; // default: start
  whiteList['text-align-last'] = true; // default: auto
  whiteList['text-combine-upright'] = true; // default: none
  whiteList['text-decoration'] = true; // default: none
  whiteList['text-decoration-color'] = true; // default: currentColor
  whiteList['text-decoration-line'] = true; // default: none
  whiteList['text-decoration-skip'] = true; // default: objects
  whiteList['text-decoration-style'] = true; // default: solid
  whiteList['text-emphasis'] = true; // default: depending on individual properties
  whiteList['text-emphasis-color'] = true; // default: currentColor
  whiteList['text-emphasis-position'] = true; // default: over right
  whiteList['text-emphasis-style'] = true; // default: none
  whiteList['text-height'] = true; // default: auto
  whiteList['text-indent'] = true; // default: 0
  whiteList['text-justify'] = true; // default: auto
  whiteList['text-orientation'] = true; // default: mixed
  whiteList['text-overflow'] = true; // default: clip
  whiteList['text-shadow'] = true; // default: none
  whiteList['text-space-collapse'] = true; // default: collapse
  whiteList['text-transform'] = true; // default: none
  whiteList['text-underline-position'] = true; // default: auto
  whiteList['text-wrap'] = true; // default: normal
  whiteList['top'] = false; // default: auto
  whiteList['transform'] = false; // default: none
  whiteList['transform-origin'] = false; // default: 50% 50% 0
  whiteList['transform-style'] = false; // default: flat
  whiteList['transition'] = false; // default: depending on individual properties
  whiteList['transition-delay'] = false; // default: 0s
  whiteList['transition-duration'] = false; // default: 0s
  whiteList['transition-property'] = false; // default: all
  whiteList['transition-timing-function'] = false; // default: ease
  whiteList['unicode-bidi'] = false; // default: normal
  whiteList['vertical-align'] = false; // default: baseline
  whiteList['visibility'] = false; // default: visible
  whiteList['voice-balance'] = false; // default: center
  whiteList['voice-duration'] = false; // default: auto
  whiteList['voice-family'] = false; // default: implementation dependent
  whiteList['voice-pitch'] = false; // default: medium
  whiteList['voice-range'] = false; // default: medium
  whiteList['voice-rate'] = false; // default: normal
  whiteList['voice-stress'] = false; // default: normal
  whiteList['voice-volume'] = false; // default: medium
  whiteList['volume'] = false; // default: medium
  whiteList['white-space'] = false; // default: normal
  whiteList['widows'] = false; // default: 2
  whiteList['width'] = true; // default: auto
  whiteList['will-change'] = false; // default: auto
  whiteList['word-break'] = true; // default: normal
  whiteList['word-spacing'] = true; // default: normal
  whiteList['word-wrap'] = true; // default: normal
  whiteList['wrap-flow'] = false; // default: auto
  whiteList['wrap-through'] = false; // default: wrap
  whiteList['writing-mode'] = false; // default: horizontal-tb
  whiteList['z-index'] = false; // default: auto

  return whiteList;
}


/**
 * 匹配到白名单上的一个属性时
 *
 * @param {String} name
 * @param {String} value
 * @param {Object} options
 * @return {String}
 */
function onAttr (name, value, options) {
  // do nothing
}

/**
 * 匹配到不在白名单上的一个属性时
 *
 * @param {String} name
 * @param {String} value
 * @param {Object} options
 * @return {String}
 */
function onIgnoreAttr (name, value, options) {
  // do nothing
}

var REGEXP_URL_JAVASCRIPT = /javascript\s*\:/img;

/**
 * 过滤属性值
 *
 * @param {String} name
 * @param {String} value
 * @return {String}
 */
function safeAttrValue(name, value) {
  if (REGEXP_URL_JAVASCRIPT.test(value)) return '';
  return value;
}


var whiteList = getDefaultWhiteList();
var getDefaultWhiteList_1 = getDefaultWhiteList;
var onAttr_1 = onAttr;
var onIgnoreAttr_1 = onIgnoreAttr;
var safeAttrValue_1 = safeAttrValue;

var _default = {
	whiteList: whiteList,
	getDefaultWhiteList: getDefaultWhiteList_1,
	onAttr: onAttr_1,
	onIgnoreAttr: onIgnoreAttr_1,
	safeAttrValue: safeAttrValue_1
};

var util = {
  indexOf: function (arr, item) {
    var i, j;
    if (Array.prototype.indexOf) {
      return arr.indexOf(item);
    }
    for (i = 0, j = arr.length; i < j; i++) {
      if (arr[i] === item) {
        return i;
      }
    }
    return -1;
  },
  forEach: function (arr, fn, scope) {
    var i, j;
    if (Array.prototype.forEach) {
      return arr.forEach(fn, scope);
    }
    for (i = 0, j = arr.length; i < j; i++) {
      fn.call(scope, arr[i], i, arr);
    }
  },
  trim: function (str) {
    if (String.prototype.trim) {
      return str.trim();
    }
    return str.replace(/(^\s*)|(\s*$)/g, '');
  },
  trimRight: function (str) {
    if (String.prototype.trimRight) {
      return str.trimRight();
    }
    return str.replace(/(\s*$)/g, '');
  }
};

/**
 * cssfilter
 *
 * @author 老雷<leizongmin@gmail.com>
 */




/**
 * 解析style
 *
 * @param {String} css
 * @param {Function} onAttr 处理属性的函数
 *   参数格式： function (sourcePosition, position, name, value, source)
 * @return {String}
 */
function parseStyle (css, onAttr) {
  css = util.trimRight(css);
  if (css[css.length - 1] !== ';') css += ';';
  var cssLength = css.length;
  var isParenthesisOpen = false;
  var lastPos = 0;
  var i = 0;
  var retCSS = '';

  function addNewAttr () {
    // 如果没有正常的闭合圆括号，则直接忽略当前属性
    if (!isParenthesisOpen) {
      var source = util.trim(css.slice(lastPos, i));
      var j = source.indexOf(':');
      if (j !== -1) {
        var name = util.trim(source.slice(0, j));
        var value = util.trim(source.slice(j + 1));
        // 必须有属性名称
        if (name) {
          var ret = onAttr(lastPos, retCSS.length, name, value, source);
          if (ret) retCSS += ret + '; ';
        }
      }
    }
    lastPos = i + 1;
  }

  for (; i < cssLength; i++) {
    var c = css[i];
    if (c === '/' && css[i + 1] === '*') {
      // 备注开始
      var j = css.indexOf('*/', i + 2);
      // 如果没有正常的备注结束，则后面的部分全部跳过
      if (j === -1) break;
      // 直接将当前位置调到备注结尾，并且初始化状态
      i = j + 1;
      lastPos = i + 1;
      isParenthesisOpen = false;
    } else if (c === '(') {
      isParenthesisOpen = true;
    } else if (c === ')') {
      isParenthesisOpen = false;
    } else if (c === ';') {
      if (isParenthesisOpen) ; else {
        addNewAttr();
      }
    } else if (c === '\n') {
      addNewAttr();
    }
  }

  return util.trim(retCSS);
}

var parser = parseStyle;

/**
 * cssfilter
 *
 * @author 老雷<leizongmin@gmail.com>
 */






/**
 * 返回值是否为空
 *
 * @param {Object} obj
 * @return {Boolean}
 */
function isNull (obj) {
  return (obj === undefined || obj === null);
}

/**
 * 浅拷贝对象
 *
 * @param {Object} obj
 * @return {Object}
 */
function shallowCopyObject (obj) {
  var ret = {};
  for (var i in obj) {
    ret[i] = obj[i];
  }
  return ret;
}

/**
 * 创建CSS过滤器
 *
 * @param {Object} options
 *   - {Object} whiteList
 *   - {Function} onAttr
 *   - {Function} onIgnoreAttr
 *   - {Function} safeAttrValue
 */
function FilterCSS (options) {
  options = shallowCopyObject(options || {});
  options.whiteList = options.whiteList || _default.whiteList;
  options.onAttr = options.onAttr || _default.onAttr;
  options.onIgnoreAttr = options.onIgnoreAttr || _default.onIgnoreAttr;
  options.safeAttrValue = options.safeAttrValue || _default.safeAttrValue;
  this.options = options;
}

FilterCSS.prototype.process = function (css) {
  // 兼容各种奇葩输入
  css = css || '';
  css = css.toString();
  if (!css) return '';

  var me = this;
  var options = me.options;
  var whiteList = options.whiteList;
  var onAttr = options.onAttr;
  var onIgnoreAttr = options.onIgnoreAttr;
  var safeAttrValue = options.safeAttrValue;

  var retCSS = parser(css, function (sourcePosition, position, name, value, source) {

    var check = whiteList[name];
    var isWhite = false;
    if (check === true) isWhite = check;
    else if (typeof check === 'function') isWhite = check(value);
    else if (check instanceof RegExp) isWhite = check.test(value);
    if (isWhite !== true) isWhite = false;

    // 如果过滤后 value 为空则直接忽略
    value = safeAttrValue(name, value);
    if (!value) return;

    var opts = {
      position: position,
      sourcePosition: sourcePosition,
      source: source,
      isWhite: isWhite
    };

    if (isWhite) {

      var ret = onAttr(name, value, opts);
      if (isNull(ret)) {
        return name + ':' + value;
      } else {
        return ret;
      }

    } else {

      var ret = onIgnoreAttr(name, value, opts);
      if (!isNull(ret)) {
        return ret;
      }

    }
  });

  return retCSS;
};


var css = FilterCSS;

var lib = createCommonjsModule(function (module, exports) {
/**
 * cssfilter
 *
 * @author 老雷<leizongmin@gmail.com>
 */





/**
 * XSS过滤
 *
 * @param {String} css 要过滤的CSS代码
 * @param {Object} options 选项：whiteList, onAttr, onIgnoreAttr
 * @return {String}
 */
function filterCSS (html, options) {
  var xss = new css(options);
  return xss.process(html);
}


// 输出
exports = module.exports = filterCSS;
exports.FilterCSS = css;
for (var i in _default) exports[i] = _default[i];
});

var util$1 = {
  indexOf: function(arr, item) {
    var i, j;
    if (Array.prototype.indexOf) {
      return arr.indexOf(item);
    }
    for (i = 0, j = arr.length; i < j; i++) {
      if (arr[i] === item) {
        return i;
      }
    }
    return -1;
  },
  forEach: function(arr, fn, scope) {
    var i, j;
    if (Array.prototype.forEach) {
      return arr.forEach(fn, scope);
    }
    for (i = 0, j = arr.length; i < j; i++) {
      fn.call(scope, arr[i], i, arr);
    }
  },
  trim: function(str) {
    if (String.prototype.trim) {
      return str.trim();
    }
    return str.replace(/(^\s*)|(\s*$)/g, "");
  },
  spaceIndex: function(str) {
    var reg = /\s|\n|\t/;
    var match = reg.exec(str);
    return match ? match.index : -1;
  }
};

/**
 * default settings
 *
 * @author Zongmin Lei<leizongmin@gmail.com>
 */

var FilterCSS$1 = lib.FilterCSS;
var getDefaultCSSWhiteList = lib.getDefaultWhiteList;


function getDefaultWhiteList$1() {
  return {
    a: ["target", "href", "title"],
    abbr: ["title"],
    address: [],
    area: ["shape", "coords", "href", "alt"],
    article: [],
    aside: [],
    audio: ["autoplay", "controls", "loop", "preload", "src"],
    b: [],
    bdi: ["dir"],
    bdo: ["dir"],
    big: [],
    blockquote: ["cite"],
    br: [],
    caption: [],
    center: [],
    cite: [],
    code: [],
    col: ["align", "valign", "span", "width"],
    colgroup: ["align", "valign", "span", "width"],
    dd: [],
    del: ["datetime"],
    details: ["open"],
    div: [],
    dl: [],
    dt: [],
    em: [],
    font: ["color", "size", "face"],
    footer: [],
    h1: [],
    h2: [],
    h3: [],
    h4: [],
    h5: [],
    h6: [],
    header: [],
    hr: [],
    i: [],
    img: ["src", "alt", "title", "width", "height"],
    ins: ["datetime"],
    li: [],
    mark: [],
    nav: [],
    ol: [],
    p: [],
    pre: [],
    s: [],
    section: [],
    small: [],
    span: [],
    sub: [],
    sup: [],
    strong: [],
    table: ["width", "border", "align", "valign"],
    tbody: ["align", "valign"],
    td: ["width", "rowspan", "colspan", "align", "valign"],
    tfoot: ["align", "valign"],
    th: ["width", "rowspan", "colspan", "align", "valign"],
    thead: ["align", "valign"],
    tr: ["rowspan", "align", "valign"],
    tt: [],
    u: [],
    ul: [],
    video: ["autoplay", "controls", "loop", "preload", "src", "height", "width"]
  };
}

var defaultCSSFilter = new FilterCSS$1();

/**
 * default onTag function
 *
 * @param {String} tag
 * @param {String} html
 * @param {Object} options
 * @return {String}
 */
function onTag(tag, html, options) {
  // do nothing
}

/**
 * default onIgnoreTag function
 *
 * @param {String} tag
 * @param {String} html
 * @param {Object} options
 * @return {String}
 */
function onIgnoreTag(tag, html, options) {
  // do nothing
}

/**
 * default onTagAttr function
 *
 * @param {String} tag
 * @param {String} name
 * @param {String} value
 * @return {String}
 */
function onTagAttr(tag, name, value) {
  // do nothing
}

/**
 * default onIgnoreTagAttr function
 *
 * @param {String} tag
 * @param {String} name
 * @param {String} value
 * @return {String}
 */
function onIgnoreTagAttr(tag, name, value) {
  // do nothing
}

/**
 * default escapeHtml function
 *
 * @param {String} html
 */
function escapeHtml(html) {
  return html.replace(REGEXP_LT, "&lt;").replace(REGEXP_GT, "&gt;");
}

/**
 * default safeAttrValue function
 *
 * @param {String} tag
 * @param {String} name
 * @param {String} value
 * @param {Object} cssFilter
 * @return {String}
 */
function safeAttrValue$1(tag, name, value, cssFilter) {
  // unescape attribute value firstly
  value = friendlyAttrValue(value);

  if (name === "href" || name === "src") {
    // filter `href` and `src` attribute
    // only allow the value that starts with `http://` | `https://` | `mailto:` | `/` | `#`
    value = util$1.trim(value);
    if (value === "#") return "#";
    if (
      !(
        value.substr(0, 7) === "http://" ||
        value.substr(0, 8) === "https://" ||
        value.substr(0, 7) === "mailto:" ||
        value.substr(0, 4) === "tel:" ||
        value.substr(0, 11) === "data:image/" ||
        value.substr(0, 6) === "ftp://" ||
        value.substr(0, 2) === "./" ||
        value.substr(0, 3) === "../" ||
        value[0] === "#" ||
        value[0] === "/"
      )
    ) {
      return "";
    }
  } else if (name === "background") {
    // filter `background` attribute (maybe no use)
    // `javascript:`
    REGEXP_DEFAULT_ON_TAG_ATTR_4.lastIndex = 0;
    if (REGEXP_DEFAULT_ON_TAG_ATTR_4.test(value)) {
      return "";
    }
  } else if (name === "style") {
    // `expression()`
    REGEXP_DEFAULT_ON_TAG_ATTR_7.lastIndex = 0;
    if (REGEXP_DEFAULT_ON_TAG_ATTR_7.test(value)) {
      return "";
    }
    // `url()`
    REGEXP_DEFAULT_ON_TAG_ATTR_8.lastIndex = 0;
    if (REGEXP_DEFAULT_ON_TAG_ATTR_8.test(value)) {
      REGEXP_DEFAULT_ON_TAG_ATTR_4.lastIndex = 0;
      if (REGEXP_DEFAULT_ON_TAG_ATTR_4.test(value)) {
        return "";
      }
    }
    if (cssFilter !== false) {
      cssFilter = cssFilter || defaultCSSFilter;
      value = cssFilter.process(value);
    }
  }

  // escape `<>"` before returns
  value = escapeAttrValue(value);
  return value;
}

// RegExp list
var REGEXP_LT = /</g;
var REGEXP_GT = />/g;
var REGEXP_QUOTE = /"/g;
var REGEXP_QUOTE_2 = /&quot;/g;
var REGEXP_ATTR_VALUE_1 = /&#([a-zA-Z0-9]*);?/gim;
var REGEXP_ATTR_VALUE_COLON = /&colon;?/gim;
var REGEXP_ATTR_VALUE_NEWLINE = /&newline;?/gim;
var REGEXP_DEFAULT_ON_TAG_ATTR_4 = /((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi;
var REGEXP_DEFAULT_ON_TAG_ATTR_7 = /e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi;
var REGEXP_DEFAULT_ON_TAG_ATTR_8 = /u\s*r\s*l\s*\(.*/gi;

/**
 * escape doube quote
 *
 * @param {String} str
 * @return {String} str
 */
function escapeQuote(str) {
  return str.replace(REGEXP_QUOTE, "&quot;");
}

/**
 * unescape double quote
 *
 * @param {String} str
 * @return {String} str
 */
function unescapeQuote(str) {
  return str.replace(REGEXP_QUOTE_2, '"');
}

/**
 * escape html entities
 *
 * @param {String} str
 * @return {String}
 */
function escapeHtmlEntities(str) {
  return str.replace(REGEXP_ATTR_VALUE_1, function replaceUnicode(str, code) {
    return code[0] === "x" || code[0] === "X"
      ? String.fromCharCode(parseInt(code.substr(1), 16))
      : String.fromCharCode(parseInt(code, 10));
  });
}

/**
 * escape html5 new danger entities
 *
 * @param {String} str
 * @return {String}
 */
function escapeDangerHtml5Entities(str) {
  return str
    .replace(REGEXP_ATTR_VALUE_COLON, ":")
    .replace(REGEXP_ATTR_VALUE_NEWLINE, " ");
}

/**
 * clear nonprintable characters
 *
 * @param {String} str
 * @return {String}
 */
function clearNonPrintableCharacter(str) {
  var str2 = "";
  for (var i = 0, len = str.length; i < len; i++) {
    str2 += str.charCodeAt(i) < 32 ? " " : str.charAt(i);
  }
  return util$1.trim(str2);
}

/**
 * get friendly attribute value
 *
 * @param {String} str
 * @return {String}
 */
function friendlyAttrValue(str) {
  str = unescapeQuote(str);
  str = escapeHtmlEntities(str);
  str = escapeDangerHtml5Entities(str);
  str = clearNonPrintableCharacter(str);
  return str;
}

/**
 * unescape attribute value
 *
 * @param {String} str
 * @return {String}
 */
function escapeAttrValue(str) {
  str = escapeQuote(str);
  str = escapeHtml(str);
  return str;
}

/**
 * `onIgnoreTag` function for removing all the tags that are not in whitelist
 */
function onIgnoreTagStripAll() {
  return "";
}

/**
 * remove tag body
 * specify a `tags` list, if the tag is not in the `tags` list then process by the specify function (optional)
 *
 * @param {array} tags
 * @param {function} next
 */
function StripTagBody(tags, next) {
  if (typeof next !== "function") {
    next = function() {};
  }

  var isRemoveAllTag = !Array.isArray(tags);
  function isRemoveTag(tag) {
    if (isRemoveAllTag) return true;
    return util$1.indexOf(tags, tag) !== -1;
  }

  var removeList = [];
  var posStart = false;

  return {
    onIgnoreTag: function(tag, html, options) {
      if (isRemoveTag(tag)) {
        if (options.isClosing) {
          var ret = "[/removed]";
          var end = options.position + ret.length;
          removeList.push([
            posStart !== false ? posStart : options.position,
            end
          ]);
          posStart = false;
          return ret;
        } else {
          if (!posStart) {
            posStart = options.position;
          }
          return "[removed]";
        }
      } else {
        return next(tag, html, options);
      }
    },
    remove: function(html) {
      var rethtml = "";
      var lastPos = 0;
      util$1.forEach(removeList, function(pos) {
        rethtml += html.slice(lastPos, pos[0]);
        lastPos = pos[1];
      });
      rethtml += html.slice(lastPos);
      return rethtml;
    }
  };
}

/**
 * remove html comments
 *
 * @param {String} html
 * @return {String}
 */
function stripCommentTag(html) {
  return html.replace(STRIP_COMMENT_TAG_REGEXP, "");
}
var STRIP_COMMENT_TAG_REGEXP = /<!--[\s\S]*?-->/g;

/**
 * remove invisible characters
 *
 * @param {String} html
 * @return {String}
 */
function stripBlankChar(html) {
  var chars = html.split("");
  chars = chars.filter(function(char) {
    var c = char.charCodeAt(0);
    if (c === 127) return false;
    if (c <= 31) {
      if (c === 10 || c === 13) return true;
      return false;
    }
    return true;
  });
  return chars.join("");
}

var whiteList$1 = getDefaultWhiteList$1();
var getDefaultWhiteList_1$1 = getDefaultWhiteList$1;
var onTag_1 = onTag;
var onIgnoreTag_1 = onIgnoreTag;
var onTagAttr_1 = onTagAttr;
var onIgnoreTagAttr_1 = onIgnoreTagAttr;
var safeAttrValue_1$1 = safeAttrValue$1;
var escapeHtml_1 = escapeHtml;
var escapeQuote_1 = escapeQuote;
var unescapeQuote_1 = unescapeQuote;
var escapeHtmlEntities_1 = escapeHtmlEntities;
var escapeDangerHtml5Entities_1 = escapeDangerHtml5Entities;
var clearNonPrintableCharacter_1 = clearNonPrintableCharacter;
var friendlyAttrValue_1 = friendlyAttrValue;
var escapeAttrValue_1 = escapeAttrValue;
var onIgnoreTagStripAll_1 = onIgnoreTagStripAll;
var StripTagBody_1 = StripTagBody;
var stripCommentTag_1 = stripCommentTag;
var stripBlankChar_1 = stripBlankChar;
var cssFilter = defaultCSSFilter;
var getDefaultCSSWhiteList_1 = getDefaultCSSWhiteList;

var _default$1 = {
	whiteList: whiteList$1,
	getDefaultWhiteList: getDefaultWhiteList_1$1,
	onTag: onTag_1,
	onIgnoreTag: onIgnoreTag_1,
	onTagAttr: onTagAttr_1,
	onIgnoreTagAttr: onIgnoreTagAttr_1,
	safeAttrValue: safeAttrValue_1$1,
	escapeHtml: escapeHtml_1,
	escapeQuote: escapeQuote_1,
	unescapeQuote: unescapeQuote_1,
	escapeHtmlEntities: escapeHtmlEntities_1,
	escapeDangerHtml5Entities: escapeDangerHtml5Entities_1,
	clearNonPrintableCharacter: clearNonPrintableCharacter_1,
	friendlyAttrValue: friendlyAttrValue_1,
	escapeAttrValue: escapeAttrValue_1,
	onIgnoreTagStripAll: onIgnoreTagStripAll_1,
	StripTagBody: StripTagBody_1,
	stripCommentTag: stripCommentTag_1,
	stripBlankChar: stripBlankChar_1,
	cssFilter: cssFilter,
	getDefaultCSSWhiteList: getDefaultCSSWhiteList_1
};

/**
 * Simple HTML Parser
 *
 * @author Zongmin Lei<leizongmin@gmail.com>
 */



/**
 * get tag name
 *
 * @param {String} html e.g. '<a hef="#">'
 * @return {String}
 */
function getTagName(html) {
  var i = util$1.spaceIndex(html);
  if (i === -1) {
    var tagName = html.slice(1, -1);
  } else {
    var tagName = html.slice(1, i + 1);
  }
  tagName = util$1.trim(tagName).toLowerCase();
  if (tagName.slice(0, 1) === "/") tagName = tagName.slice(1);
  if (tagName.slice(-1) === "/") tagName = tagName.slice(0, -1);
  return tagName;
}

/**
 * is close tag?
 *
 * @param {String} html 如：'<a hef="#">'
 * @return {Boolean}
 */
function isClosing(html) {
  return html.slice(0, 2) === "</";
}

/**
 * parse input html and returns processed html
 *
 * @param {String} html
 * @param {Function} onTag e.g. function (sourcePosition, position, tag, html, isClosing)
 * @param {Function} escapeHtml
 * @return {String}
 */
function parseTag(html, onTag, escapeHtml) {

  var rethtml = "";
  var lastPos = 0;
  var tagStart = false;
  var quoteStart = false;
  var currentPos = 0;
  var len = html.length;
  var currentTagName = "";
  var currentHtml = "";

  chariterator: for (currentPos = 0; currentPos < len; currentPos++) {
    var c = html.charAt(currentPos);
    if (tagStart === false) {
      if (c === "<") {
        tagStart = currentPos;
        continue;
      }
    } else {
      if (quoteStart === false) {
        if (c === "<") {
          rethtml += escapeHtml(html.slice(lastPos, currentPos));
          tagStart = currentPos;
          lastPos = currentPos;
          continue;
        }
        if (c === ">") {
          rethtml += escapeHtml(html.slice(lastPos, tagStart));
          currentHtml = html.slice(tagStart, currentPos + 1);
          currentTagName = getTagName(currentHtml);
          rethtml += onTag(
            tagStart,
            rethtml.length,
            currentTagName,
            currentHtml,
            isClosing(currentHtml)
          );
          lastPos = currentPos + 1;
          tagStart = false;
          continue;
        }
        if ((c === '"' || c === "'")) {
          var i = 1;
          var ic = html.charAt(currentPos - i);

          while ((ic === " ") || (ic === "=")) {
            if (ic === "=") {
              quoteStart = c;
              continue chariterator;
            }
            ic = html.charAt(currentPos - ++i);
          }
        }
      } else {
        if (c === quoteStart) {
          quoteStart = false;
          continue;
        }
      }
    }
  }
  if (lastPos < html.length) {
    rethtml += escapeHtml(html.substr(lastPos));
  }

  return rethtml;
}

var REGEXP_ILLEGAL_ATTR_NAME = /[^a-zA-Z0-9_:\.\-]/gim;

/**
 * parse input attributes and returns processed attributes
 *
 * @param {String} html e.g. `href="#" target="_blank"`
 * @param {Function} onAttr e.g. `function (name, value)`
 * @return {String}
 */
function parseAttr(html, onAttr) {

  var lastPos = 0;
  var retAttrs = [];
  var tmpName = false;
  var len = html.length;

  function addAttr(name, value) {
    name = util$1.trim(name);
    name = name.replace(REGEXP_ILLEGAL_ATTR_NAME, "").toLowerCase();
    if (name.length < 1) return;
    var ret = onAttr(name, value || "");
    if (ret) retAttrs.push(ret);
  }

  // 逐个分析字符
  for (var i = 0; i < len; i++) {
    var c = html.charAt(i);
    var v, j;
    if (tmpName === false && c === "=") {
      tmpName = html.slice(lastPos, i);
      lastPos = i + 1;
      continue;
    }
    if (tmpName !== false) {
      if (
        i === lastPos &&
        (c === '"' || c === "'") &&
        html.charAt(i - 1) === "="
      ) {
        j = html.indexOf(c, i + 1);
        if (j === -1) {
          break;
        } else {
          v = util$1.trim(html.slice(lastPos + 1, j));
          addAttr(tmpName, v);
          tmpName = false;
          i = j;
          lastPos = i + 1;
          continue;
        }
      }
    }
    if (/\s|\n|\t/.test(c)) {
      html = html.replace(/\s|\n|\t/g, " ");
      if (tmpName === false) {
        j = findNextEqual(html, i);
        if (j === -1) {
          v = util$1.trim(html.slice(lastPos, i));
          addAttr(v);
          tmpName = false;
          lastPos = i + 1;
          continue;
        } else {
          i = j - 1;
          continue;
        }
      } else {
        j = findBeforeEqual(html, i - 1);
        if (j === -1) {
          v = util$1.trim(html.slice(lastPos, i));
          v = stripQuoteWrap(v);
          addAttr(tmpName, v);
          tmpName = false;
          lastPos = i + 1;
          continue;
        } else {
          continue;
        }
      }
    }
  }

  if (lastPos < html.length) {
    if (tmpName === false) {
      addAttr(html.slice(lastPos));
    } else {
      addAttr(tmpName, stripQuoteWrap(util$1.trim(html.slice(lastPos))));
    }
  }

  return util$1.trim(retAttrs.join(" "));
}

function findNextEqual(str, i) {
  for (; i < str.length; i++) {
    var c = str[i];
    if (c === " ") continue;
    if (c === "=") return i;
    return -1;
  }
}

function findBeforeEqual(str, i) {
  for (; i > 0; i--) {
    var c = str[i];
    if (c === " ") continue;
    if (c === "=") return i;
    return -1;
  }
}

function isQuoteWrapString(text) {
  if (
    (text[0] === '"' && text[text.length - 1] === '"') ||
    (text[0] === "'" && text[text.length - 1] === "'")
  ) {
    return true;
  } else {
    return false;
  }
}

function stripQuoteWrap(text) {
  if (isQuoteWrapString(text)) {
    return text.substr(1, text.length - 2);
  } else {
    return text;
  }
}

var parseTag_1 = parseTag;
var parseAttr_1 = parseAttr;

var parser$1 = {
	parseTag: parseTag_1,
	parseAttr: parseAttr_1
};

/**
 * filter xss
 *
 * @author Zongmin Lei<leizongmin@gmail.com>
 */

var FilterCSS$2 = lib.FilterCSS;


var parseTag$1 = parser$1.parseTag;
var parseAttr$1 = parser$1.parseAttr;


/**
 * returns `true` if the input value is `undefined` or `null`
 *
 * @param {Object} obj
 * @return {Boolean}
 */
function isNull$1(obj) {
  return obj === undefined || obj === null;
}

/**
 * get attributes for a tag
 *
 * @param {String} html
 * @return {Object}
 *   - {String} html
 *   - {Boolean} closing
 */
function getAttrs(html) {
  var i = util$1.spaceIndex(html);
  if (i === -1) {
    return {
      html: "",
      closing: html[html.length - 2] === "/"
    };
  }
  html = util$1.trim(html.slice(i + 1, -1));
  var isClosing = html[html.length - 1] === "/";
  if (isClosing) html = util$1.trim(html.slice(0, -1));
  return {
    html: html,
    closing: isClosing
  };
}

/**
 * shallow copy
 *
 * @param {Object} obj
 * @return {Object}
 */
function shallowCopyObject$1(obj) {
  var ret = {};
  for (var i in obj) {
    ret[i] = obj[i];
  }
  return ret;
}

/**
 * FilterXSS class
 *
 * @param {Object} options
 *        whiteList, onTag, onTagAttr, onIgnoreTag,
 *        onIgnoreTagAttr, safeAttrValue, escapeHtml
 *        stripIgnoreTagBody, allowCommentTag, stripBlankChar
 *        css{whiteList, onAttr, onIgnoreAttr} `css=false` means don't use `cssfilter`
 */
function FilterXSS(options) {
  options = shallowCopyObject$1(options || {});

  if (options.stripIgnoreTag) {
    if (options.onIgnoreTag) {
      console.error(
        'Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'
      );
    }
    options.onIgnoreTag = _default$1.onIgnoreTagStripAll;
  }

  options.whiteList = options.whiteList || _default$1.whiteList;
  options.onTag = options.onTag || _default$1.onTag;
  options.onTagAttr = options.onTagAttr || _default$1.onTagAttr;
  options.onIgnoreTag = options.onIgnoreTag || _default$1.onIgnoreTag;
  options.onIgnoreTagAttr = options.onIgnoreTagAttr || _default$1.onIgnoreTagAttr;
  options.safeAttrValue = options.safeAttrValue || _default$1.safeAttrValue;
  options.escapeHtml = options.escapeHtml || _default$1.escapeHtml;
  this.options = options;

  if (options.css === false) {
    this.cssFilter = false;
  } else {
    options.css = options.css || {};
    this.cssFilter = new FilterCSS$2(options.css);
  }
}

/**
 * start process and returns result
 *
 * @param {String} html
 * @return {String}
 */
FilterXSS.prototype.process = function(html) {
  // compatible with the input
  html = html || "";
  html = html.toString();
  if (!html) return "";

  var me = this;
  var options = me.options;
  var whiteList = options.whiteList;
  var onTag = options.onTag;
  var onIgnoreTag = options.onIgnoreTag;
  var onTagAttr = options.onTagAttr;
  var onIgnoreTagAttr = options.onIgnoreTagAttr;
  var safeAttrValue = options.safeAttrValue;
  var escapeHtml = options.escapeHtml;
  var cssFilter = me.cssFilter;

  // remove invisible characters
  if (options.stripBlankChar) {
    html = _default$1.stripBlankChar(html);
  }

  // remove html comments
  if (!options.allowCommentTag) {
    html = _default$1.stripCommentTag(html);
  }

  // if enable stripIgnoreTagBody
  var stripIgnoreTagBody = false;
  if (options.stripIgnoreTagBody) {
    var stripIgnoreTagBody = _default$1.StripTagBody(
      options.stripIgnoreTagBody,
      onIgnoreTag
    );
    onIgnoreTag = stripIgnoreTagBody.onIgnoreTag;
  }

  var retHtml = parseTag$1(
    html,
    function(sourcePosition, position, tag, html, isClosing) {
      var info = {
        sourcePosition: sourcePosition,
        position: position,
        isClosing: isClosing,
        isWhite: whiteList.hasOwnProperty(tag)
      };

      // call `onTag()`
      var ret = onTag(tag, html, info);
      if (!isNull$1(ret)) return ret;

      if (info.isWhite) {
        if (info.isClosing) {
          return "</" + tag + ">";
        }

        var attrs = getAttrs(html);
        var whiteAttrList = whiteList[tag];
        var attrsHtml = parseAttr$1(attrs.html, function(name, value) {
          // call `onTagAttr()`
          var isWhiteAttr = util$1.indexOf(whiteAttrList, name) !== -1;
          var ret = onTagAttr(tag, name, value, isWhiteAttr);
          if (!isNull$1(ret)) return ret;

          if (isWhiteAttr) {
            // call `safeAttrValue()`
            value = safeAttrValue(tag, name, value, cssFilter);
            if (value) {
              return name + '="' + value + '"';
            } else {
              return name;
            }
          } else {
            // call `onIgnoreTagAttr()`
            var ret = onIgnoreTagAttr(tag, name, value, isWhiteAttr);
            if (!isNull$1(ret)) return ret;
            return;
          }
        });

        // build new tag html
        var html = "<" + tag;
        if (attrsHtml) html += " " + attrsHtml;
        if (attrs.closing) html += " /";
        html += ">";
        return html;
      } else {
        // call `onIgnoreTag()`
        var ret = onIgnoreTag(tag, html, info);
        if (!isNull$1(ret)) return ret;
        return escapeHtml(html);
      }
    },
    escapeHtml
  );

  // if enable stripIgnoreTagBody
  if (stripIgnoreTagBody) {
    retHtml = stripIgnoreTagBody.remove(retHtml);
  }

  return retHtml;
};

var xss = FilterXSS;

var lib$1 = createCommonjsModule(function (module, exports) {
/**
 * xss
 *
 * @author Zongmin Lei<leizongmin@gmail.com>
 */





/**
 * filter xss function
 *
 * @param {String} html
 * @param {Object} options { whiteList, onTag, onTagAttr, onIgnoreTag, onIgnoreTagAttr, safeAttrValue, escapeHtml }
 * @return {String}
 */
function filterXSS(html, options) {
  var xss$1 = new xss(options);
  return xss$1.process(html);
}

exports = module.exports = filterXSS;
exports.filterXSS = filterXSS;
exports.FilterXSS = xss;
for (var i in _default$1) exports[i] = _default$1[i];
for (var i in parser$1) exports[i] = parser$1[i];

// using `xss` on the WebWorker, output `filterXSS` to the globals
function isWorkerEnv() {
  return typeof self !== 'undefined' && typeof DedicatedWorkerGlobalScope !== 'undefined' && self instanceof DedicatedWorkerGlobalScope;
}
if (isWorkerEnv()) {
  self.filterXSS = module.exports;
}
});

/* Copyright (c) 2020 Environmental Systems Research Institute, Inc.
 * Apache-2.0
 *
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 * http://ucdok.com
 * The MIT License, see
 * https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 *
 * Lodash/isPlainObject
 * Copyright (c) JS Foundation and other contributors <https://js.foundation/>
 * MIT License, see https://raw.githubusercontent.com/lodash/lodash/4.17.10-npm/LICENSE for details
 * */
/**
 * The Sanitizer Class
 *
 * @export
 * @class Sanitizer
 */
var Sanitizer = /** @class */ (function () {
    function Sanitizer(filterOptions, extendDefaults) {
        var _this = this;
        // Supported HTML Spec: https://doc.arcgis.com/en/arcgis-online/reference/supported-html.htm
        this.arcgisWhiteList = {
            a: ["href", "target", "style"],
            img: ["src", "width", "height", "border", "alt", "style"],
            video: [
                "autoplay",
                "controls",
                "height",
                "loop",
                "muted",
                "poster",
                "preload",
                "width"
            ],
            audio: ["autoplay", "controls", "loop", "muted", "preload"],
            source: ["media", "src", "type"],
            span: ["style"],
            table: ["width", "height", "cellpadding", "cellspacing", "border", "style"],
            div: ["style", "align"],
            font: ["size", "color", "style"],
            tr: ["height", "valign", "align", "style"],
            td: [
                "height",
                "width",
                "valign",
                "align",
                "colspan",
                "rowspan",
                "nowrap",
                "style"
            ],
            th: [
                "height",
                "width",
                "valign",
                "align",
                "colspan",
                "rowspan",
                "nowrap",
                "style"
            ],
            p: ["style"],
            b: [],
            strong: [],
            i: [],
            em: [],
            u: [],
            br: [],
            li: [],
            ul: [],
            ol: [],
            hr: [],
            tbody: []
        };
        this.allowedProtocols = [
            "http",
            "https",
            "mailto",
            "iform",
            "tel",
            "flow",
            "lfmobile",
            "arcgis-navigator",
            "arcgis-appstudio-player",
            "arcgis-survey123",
            "arcgis-collector",
            "arcgis-workforce",
            "arcgis-explorer",
            "arcgis-trek2there",
            "mspbi",
            "comgooglemaps",
            "pdfefile",
            "pdfehttp",
            "pdfehttps",
            "boxapp",
            "boxemm",
            "awb",
            "awbs",
            "gropen",
            "radarscope"
        ];
        this.arcgisFilterOptions = {
            allowCommentTag: true,
            safeAttrValue: function (tag, name, value, cssFilter) {
                // Take over safe attribute filtering for `a` `href`, `img` `src`,
                // and `source` `src` attributes, otherwise pass onto the
                // default `XSS.safeAttrValue` method.
                if ((tag === "a" && name === "href") ||
                    ((tag === "img" || tag === "source") && name === "src")) {
                    return _this.sanitizeUrl(value);
                }
                return lib$1.safeAttrValue(tag, name, value, cssFilter);
            }
        };
        var xssFilterOptions;
        if (filterOptions && !extendDefaults) {
            // Override the defaults
            xssFilterOptions = filterOptions;
        }
        else if (filterOptions && extendDefaults) {
            // Extend the defaults
            xssFilterOptions = Object.create(this.arcgisFilterOptions);
            Object.keys(filterOptions).forEach(function (key) {
                if (key === "whiteList") {
                    // Extend the whitelist by concatenating arrays
                    xssFilterOptions.whiteList = _this._extendObjectOfArrays([
                        _this.arcgisWhiteList,
                        filterOptions.whiteList || {}
                    ]);
                }
                else {
                    xssFilterOptions[key] = filterOptions[key];
                }
            });
        }
        else {
            // Only use the defaults
            xssFilterOptions = Object.create(this.arcgisFilterOptions);
            xssFilterOptions.whiteList = this.arcgisWhiteList;
        }
        this.xssFilterOptions = xssFilterOptions;
        // Make this readable to tests
        this._xssFilter = new lib$1.FilterXSS(xssFilterOptions);
    }
    /**
     * Sanitizes value to remove invalid HTML tags.
     *
     * Note: If the value passed does not contain a valid JSON data type (String,
     * Number, JSON Object, Array, Boolean, or null), the value will be nullified.
     *
     * @param {any} value The value to sanitize.
     * @returns {any} The sanitized value.
     * @memberof Sanitizer
     */
    Sanitizer.prototype.sanitize = function (value, options) {
        if (options === void 0) { options = {}; }
        switch (typeof value) {
            case "number":
                if (isNaN(value) || !isFinite(value)) {
                    return null;
                }
                return value;
            case "boolean":
                return value;
            case "string":
                return this._xssFilter.process(value);
            case "object":
                return this._iterateOverObject(value, options);
            default:
                if (options.allowUndefined && typeof value === "undefined") {
                    return;
                }
                return null;
        }
    };
    /**
     * Sanitizes a URL string following the allowed protocols and sanitization rules.
     *
     * @param {string} value The URL to sanitize.
     * @returns {string} The sanitized URL.
     */
    Sanitizer.prototype.sanitizeUrl = function (value) {
        var protocol = this._trim(value.substring(0, value.indexOf(":")));
        if (!(value === "/" ||
            value === "#" ||
            value[0] === "#" ||
            this.allowedProtocols.indexOf(protocol.toLowerCase()) > -1)) {
            return "";
        }
        else {
            return lib$1.escapeAttrValue(value);
        }
    };
    /**
     * Sanitizes an HTML attribute value.
     *
     * @param {string} tag The tagname of the HTML element.
     * @param {string} attribute The attribute name of the HTML element.
     * @param {string} value The raw value to be used for the HTML attribute value.
     * @param {XSS.ICSSFilter} [cssFilter] The CSS filter to be used.
     * @returns {string} The sanitized attribute value.
     * @memberof Sanitizer
     */
    Sanitizer.prototype.sanitizeHTMLAttribute = function (tag, attribute, value, cssFilter) {
        // use the custom safeAttrValue function if provided
        if (typeof this.xssFilterOptions.safeAttrValue === 'function') {
            // @ts-ignore safeAttrValue does handle undefined cssFilter
            return this.xssFilterOptions.safeAttrValue(tag, attribute, value, cssFilter);
        }
        // otherwise use the default
        // @ts-ignore safeAttrValue does handle undefined cssFilter
        return lib$1.safeAttrValue(tag, attribute, value, cssFilter);
    };
    /**
     * Checks if a value only contains valid HTML.
     *
     * @param {any} value The value to validate.
     * @returns {boolean}
     * @memberof Sanitizer
     */
    Sanitizer.prototype.validate = function (value, options) {
        if (options === void 0) { options = {}; }
        var sanitized = this.sanitize(value, options);
        return {
            isValid: value === sanitized,
            sanitized: sanitized
        };
    };
    /**
     * Extends an object of arrays by by concatenating arrays of the same object
     * keys. If the if the previous key's value is not an array, the next key's
     * value will replace the previous key. This method is used for extending the
     * whiteList in the XSS filter options.
     *
     * @private
     * @param {Array<{}>} objects An array of objects.
     * @returns {{}} The extended object.
     * @memberof Sanitizer
     */
    Sanitizer.prototype._extendObjectOfArrays = function (objects) {
        var finalObj = {};
        objects.forEach(function (obj) {
            Object.keys(obj).forEach(function (key) {
                if (Array.isArray(obj[key]) && Array.isArray(finalObj[key])) {
                    finalObj[key] = finalObj[key].concat(obj[key]);
                }
                else {
                    finalObj[key] = obj[key];
                }
            });
        });
        return finalObj;
    };
    /**
     * Iterate over a plain object or array to deeply sanitize each value.
     *
     * @private
     * @param {object} obj The object to iterate over.
     * @returns {(object | null)} The sanitized object.
     * @memberof Sanitizer
     */
    Sanitizer.prototype._iterateOverObject = function (obj, options) {
        var _this = this;
        if (options === void 0) { options = {}; }
        try {
            var hasChanged_1 = false;
            var changedObj = void 0;
            if (Array.isArray(obj)) {
                changedObj = obj.reduce(function (prev, value) {
                    var validation = _this.validate(value, options);
                    if (validation.isValid) {
                        return prev.concat([value]);
                    }
                    else {
                        hasChanged_1 = true;
                        return prev.concat([validation.sanitized]);
                    }
                }, []);
            }
            else if (!lodash_isplainobject(obj)) {
                if (options.allowUndefined && typeof obj === "undefined") {
                    return;
                }
                return null;
            }
            else {
                var keys = Object.keys(obj);
                changedObj = keys.reduce(function (prev, key) {
                    var value = obj[key];
                    var validation = _this.validate(value, options);
                    if (validation.isValid) {
                        prev[key] = value;
                    }
                    else {
                        hasChanged_1 = true;
                        prev[key] = validation.sanitized;
                    }
                    return prev;
                }, {});
            }
            if (hasChanged_1) {
                return changedObj;
            }
            return obj;
        }
        catch (err) {
            return null;
        }
    };
    /**
     * Trim whitespace from the start and ends of a string.
     * @param {string} val The string to trim.
     * @returns {string} The trimmed string.
     */
    Sanitizer.prototype._trim = function (val) {
        // @ts-ignore This is used by Jest,
        // but TypeScript errors since it assumes `trim` is always available.
        return String.prototype.trim
            ? val.trim()
            : val.replace(/(^\s*)|(\s*$)/g, "");
    };
    return Sanitizer;
}());

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
n$T.getLogger("esri.widgets.support.widgetUtils");function l$4(t){const n=o$q.acquire();for(let e=0;e<arguments.length;e++){const t=arguments[e],i=typeof t;if("string"===i)n.push(t);else if(Array.isArray(t))n.push.apply(n,t);else if("object"===i)for(const e in t)t[e]&&n.push(e);}const i=n.join(" ");return o$q.release(n),i}function p$5(t){const e="data-node-ref";this[t.getAttribute(e)]=t;}const m$1=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup",...["animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"]],f$2=m$1.reduce(((t,e)=>(t[e]=[],t)),{}),h$2=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],v$2=new Sanitizer({whiteList:f$2,onTagAttr:(t,e,n)=>{const i=`${e}="${n}"`;if(h$2.includes(e))return i},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function w$1(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-theme-name").replace(/\s|'|"/g,"")}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function e$3(e){return function(s,n){s.hasOwnProperty("_messageBundleProps")||(s._messageBundleProps=s._messageBundleProps?s._messageBundleProps.slice():[]);s._messageBundleProps.push({bundlePath:e,propertyName:n});}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var e$2=function(e){return {vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},r$1=function(o,t){for(var n=0,d=o.length;n<d;n++){var i=o[n];Array.isArray(i)?r$1(i,t):null!=i&&!1!==i&&(i.hasOwnProperty("vnodeSelector")||(i=e$2(i)),t.push(i));}},o$3=function(e,o){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];if(1===t.length&&"string"==typeof t[0])return {vnodeSelector:e,properties:o||void 0,children:void 0,text:t[0],domNode:null};var d=[];return r$1(t,d),{vnodeSelector:e,properties:o||void 0,children:d,text:void 0,domNode:null}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function c$1(n,t,r,e,o){const u=n.watch(t,((t,o,u,c)=>{r&&!r(t)||null==e||e.call(n,t,o,u,c);}),o);if(Array.isArray(t))for(const c of t){const o=n.get(c);r&&r(o)&&(null==e||e.call(n,o,o,t,n));}else {const o=n.get(t);r&&r(o)&&(null==e||e.call(n,o,o,t,n));}return u}function i$4(n,t,r,i,f){const l="function"==typeof i?i:null,s="object"==typeof i?i:null;"boolean"==typeof i&&(f=i);let a,m=!1;function p(){a&&(a.remove(),a=null);}const v=E$3();v$9(s,(()=>{p(),v.reject(m$x());}));const d={then:v.promise.then.bind(v.promise),catch:v.promise.catch.bind(v.promise),remove:p};return Object.freeze(d),a=c$1(n,t,r,((t,r,e,o)=>{m=!0,p(),l&&l.call(n,t,r,e,o),v.resolve({value:t,oldValue:r,propertyName:e,target:o});}),f),m&&p(),d}function f$1(n){return !!n}function l$3(n){return !n}function s$4(n){return !0===n}function a$3(n){return !1===n}const v$1=/\?(\.|$)/g;function d$5(n,t,r,e){const o=Array.isArray(t)?t:t.indexOf(",")>-1?t.split(","):[t],u=h$1(n,t,r,e);for(const c of o){const t=c.trim().replace(v$1,"$1"),e=n.get(t);r.call(n,e,e,t,n);}return u}function h$1(n,t,r,e){return n.watch(t,r,e)}function j$1(n,t,r,e){return i$4(n,t,f$1,r,e)}function A$1(n,t,r,e){return i$4(n,t,l$3,r,e)}function x$1(n,t,r,e){return i$4(n,t,s$4,r,e)}function $(n,t,r,e){return i$4(n,t,a$3,r,e)}function C$2(n,e,o,u,c,i,f){const l={};function s(t){const r=l[t];r&&(i&&i(r.target,t,n,o),r.handle.remove(),delete l[t]);}const a=d$5(n,e,((e,i,f)=>{s(f),e$v(e)&&(l[f]={handle:r$r(e,o,u),target:e},c&&c(e,f,n,o));}),f);return {remove(){a.remove();for(const n in l)s(n);}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function e$1(e){return "string"==typeof e?document.getElementById(e):e}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const t$2="http://www.w3.org/",r=`${t$2}2000/svg`,o$2=`${t$2}1999/xlink`;let i$3,l$2=[],n$2=(e,t)=>{let r={};return Object.keys(e).forEach((t=>{r[t]=e[t];})),t&&Object.keys(t).forEach((e=>{r[e]=t[e];})),r},s$3=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),p$4=e=>{if("string"!=typeof e)throw new Error("Style values must be strings")},d$4=(e,t,r)=>{if(""!==t.vnodeSelector)for(let o=r;o<e.length;o++)if(s$3(e[o],t))return o;return -1},a$2=(e,t,r,o)=>{let i=e[t];if(""===i.vnodeSelector)return;let l=i.properties;if(!(l?void 0===l.key?l.bind:l.key:void 0))for(let n=0;n<e.length;n++)if(n!==t){let t=e[n];if(s$3(t,i))throw new Error(`${r.vnodeSelector} had a ${i.vnodeSelector} child ${"added"===o?o:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}},f=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties);}},c=[],u=!1,h=e=>{(e.children||[]).forEach(h),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode]);},m=()=>{u=!1,c.forEach(h),c.length=0;},v=e=>{c.push(e),u||(u=!0,"undefined"!=typeof window&&"requestIdleCallback"in window?window.requestIdleCallback(m,{timeout:16}):setTimeout(m,16));},y=e=>{let t=e.domNode;if(e.properties){let r=e.properties.exitAnimation;if(r){t.style.pointerEvents="none";let o=()=>{t.parentNode&&(t.parentNode.removeChild(t),v(e));};return void r(t,o,e.properties)}}t.parentNode&&(t.parentNode.removeChild(t),v(e));},g=(t,i,l)=>{if(!i)return;let n=l.eventHandlerInterceptor,s=Object.keys(i),d=s.length;for(let a=0;a<d;a++){let d=s[a],f=i[d];if("className"===d)throw new Error('Property "className" is not supported, use "class".');if("class"===d)x(t,f,!0);else if("classes"===d){let e=Object.keys(f),r=e.length;for(let o=0;o<r;o++){let r=e[o];f[r]&&t.classList.add(r);}}else if("styles"===d){let e=Object.keys(f),r=e.length;for(let o=0;o<r;o++){let r=e[o],i=f[r];i&&(p$4(i),l.styleApplyer(t,r,i));}}else if("key"!==d&&null!=f){let s=typeof f;"function"===s?(0===d.lastIndexOf("on",0)&&(n&&(f=n(d,f,t,i)),"oninput"===d&&function(){let e=f;f=function(t){e.apply(this,[t]),t.target["oninput-value"]=t.target.value;};}()),t[d]=f):l.namespace===r?"href"===d?t.setAttributeNS(o$2,d,f):t.setAttribute(d,f):"string"===s&&"value"!==d?"innerHTML"===d?t[d]=v$2.sanitize(f):t.setAttribute(d,f):t[d]=f;}}},b$2=(e,t,r)=>{if(t)for(let o of t)w(o,e,void 0,r);},N$1=(e,t,r)=>{b$2(e,t.children,r),t.text&&(e.textContent=t.text),g(e,t.properties,r),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,r,t.vnodeSelector,t.properties,t.children]);},w=(e,t,o,i)=>{let l,s=0,p=e.vnodeSelector,d=t.ownerDocument;if(""===p)l=e.domNode=d.createTextNode(e.text),void 0!==o?t.insertBefore(l,o):t.appendChild(l);else {for(let a=0;a<=p.length;++a){let f=p.charAt(a);if(a===p.length||"."===f||"#"===f){let f=p.charAt(s-1),c=p.slice(s,a);"."===f?l.classList.add(c):"#"===f?l.id=c:("svg"===c&&(i=n$2(i,{namespace:r})),void 0!==i.namespace?l=e.domNode=d.createElementNS(i.namespace,c):(l=e.domNode=e.domNode||d.createElement(c),"input"===c&&e.properties&&void 0!==e.properties.type&&l.setAttribute("type",e.properties.type)),void 0!==o?t.insertBefore(l,o):l.parentNode!==t&&t.appendChild(l)),s=a+1;}}N$1(l,e,i);}},x=(e,t,r)=>{t&&t.split(" ").forEach((t=>{t&&e.classList.toggle(t,r);}));},k=(t,i,l,n)=>{if(!l)return;let s=!1,d=Object.keys(l),a=d.length;for(let f=0;f<a;f++){let a=d[f],c=l[a],u=i[a];if("class"===a)u!==c&&(x(t,u,!1),x(t,c,!0));else if("classes"===a){let e=t.classList,r=Object.keys(c),o=r.length;for(let t=0;t<o;t++){let o=r[t],i=!!c[o];i!==!!u[o]&&(s=!0,i?e.add(o):e.remove(o));}}else if("styles"===a){let e=Object.keys(c),r=e.length;for(let o=0;o<r;o++){let r=e[o],i=c[r];i!==u[r]&&(s=!0,i?(p$4(i),n.styleApplyer(t,r,i)):n.styleApplyer(t,r,""));}}else if(c||"string"!=typeof u||(c=""),"value"===a){let e=t[a];e!==c&&(t["oninput-value"]?e===t["oninput-value"]:c!==u)&&(t[a]=c,t["oninput-value"]=void 0),c!==u&&(s=!0);}else if(c!==u){let i=typeof c;"function"===i&&n.eventHandlerInterceptor||(n.namespace===r?"href"===a?t.setAttributeNS(o$2,a,c):t.setAttribute(a,c):"string"===i?"innerHTML"===a?t[a]=v$2.sanitize(c):"role"===a&&""===c?t.removeAttribute(a):t.setAttribute(a,c):t[a]!==c&&(t[a]=c),s=!0);}}return s},A=(e,t,r,o,n)=>{if(r===o)return !1;o=o||l$2;let p,c=(r=r||l$2).length,u=o.length,h=0,m=0,v=!1;for(;m<u;){let l=h<c?r[h]:void 0,u=o[m];if(void 0!==l&&s$3(l,u))v=i$3(l,u,n)||v,h++;else {let l=d$4(r,u,h+1);if(l>=0){for(p=h;p<l;p++)y(r[p]),a$2(r,p,e,"removed");v=i$3(r[l],u,n)||v,h=l+1;}else w(u,t,h<c?r[h].domNode:void 0,n),f(u),a$2(o,m,e,"added");}m++;}if(c>h)for(p=h;p<c;p++)y(r[p]),a$2(r,p,e,"removed");return v};i$3=(e,t,o)=>{let i=e.domNode,l=!1;if(e===t)return !1;let s=!1;if(""===t.vnodeSelector){if(t.text!==e.text){let e=i.ownerDocument.createTextNode(t.text);return i.parentNode.replaceChild(e,i),t.domNode=e,l=!0,l}t.domNode=i;}else 0===t.vnodeSelector.lastIndexOf("svg",0)&&(o=n$2(o,{namespace:r})),e.text!==t.text&&(s=!0,void 0===t.text?i.removeChild(i.firstChild):i.textContent=t.text),t.domNode=i,s=A(t,i,e.children,t.children,o)||s,s=k(i,e.properties,t.properties,o)||s,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[i,o,t.vnodeSelector,t.properties,t.children]);return s&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(i,t.properties,e.properties),l};let S=(e,t)=>({getLastRender:()=>e,update:r=>{if(e.vnodeSelector!==r.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let o=e;e=r,i$3(o,r,t);},domNode:e.domNode});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const p$3={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,r,o)=>{"-"===r.charAt(0)?e.style.setProperty(r,o):e.style[r]=o;}};let d$3=r=>n$2(p$3,r),n$1={create:(e,t)=>(t=d$3(t),w(e,document.createElement("div"),void 0,t),S(e,t)),append:(e,t,p)=>(p=d$3(p),w(t,e,void 0,p),S(t,p)),insertBefore:(e,t,p)=>(p=d$3(p),w(t,e.parentNode,e,p),S(t,p)),merge:(e,r,p)=>(p=d$3(p),r.domNode=e,N$1(e,r,p),S(r,p)),replace:(e,t,p)=>(p=d$3(p),w(t,e.parentNode,e,p),e.parentNode.removeChild(e),S(t,p))};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
let t$1,n=(e,r)=>{let t=[];for(;e&&e!==r;)t.push(e),e=e.parentNode;return t};t$1=Array.prototype.find?(e,r)=>e.find(r):(e,r)=>e.filter(r)[0];let o$1=(e,r)=>{let n=e;return r.forEach((e=>{n=n&&n.children?t$1(n.children,(r=>r.domNode===e)):void 0;})),n},d$2=(e,r,t)=>{let d=function(d){t("domEvent",d);let i=r(),p=n(d.currentTarget,i.domNode);p.reverse();let l,a=o$1(i.getLastRender(),p);return e.scheduleRender(),a&&(l=a.properties[`on${d.type}`].apply(a.properties.bind||this,arguments)),t("domEventProcessed",d),l};return (e,r,t,n)=>d},i$2=t=>{let n,o,i=d$3(t),p=i.performanceLogger,l=!0,a=!1,s=[],c=[],u=(e,r,t)=>{let o,l=()=>o;i.eventHandlerInterceptor=d$2(n,l,p),o=e(r,t(),i),s.push(o),c.push(t);},f=()=>{if(o=void 0,l){l=!1,p("renderStart",void 0);for(let e=0;e<s.length;e++){let r=c[e]();p("rendered",void 0),s[e].update(r),p("patched",void 0);}p("renderDone",void 0),l=!0;}};return n={renderNow:f,scheduleRender:()=>{o||a||(o=requestAnimationFrame(f));},stop:()=>{o&&(cancelAnimationFrame(o),o=void 0),a=!0;},resume:()=>{a=!1,l=!0,n.scheduleRender();},append:(e,t)=>{u(n$1.append,e,t);},insertBefore:(e,t)=>{u(n$1.insertBefore,e,t);},merge:(e,t)=>{u(n$1.merge,e,t);},replace:(e,t)=>{u(n$1.replace,e,t);},detach:e=>{for(let r=0;r<c.length;r++)if(c[r]===e)return c.splice(r,1),s.splice(r,1)[0];throw new Error("renderFunction was not found")}},n};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const b$1=n$T.getLogger("esri.widgets.Widget");let H=0;const N={widgetIcon:"esri-icon-checkbox-unchecked"},C$1=i$2();let R$1=!1,T=class extends(n$c(n$F.EventedAccessor)){constructor(e,t){super(e,t),this._attached=!1,this._internalHandles=new u$B,this._projector=C$1,this.domNode=null,this.iconClass=N.widgetIcon,this.label=this.declaredClass.split(".").pop(),this.visible=!0,this._loadLocale=z$5((async()=>{if(this._messageBundleProps&&this._messageBundleProps.length){const e=await A$8(this._messageBundleProps.map((async({bundlePath:e,propertyName:t})=>{this[t]=await c$e(e);})));for(const t of e)t.error&&b$1.error("widget-intl:locale-error",this.declaredClass,t.error);}await this.loadLocale();}));const r=["light","dark"],s=w$1()||"light";r.includes(s)||s$C(b$1,"The following themes are deprecated: light-blue, dark-blue, light-green, dark-green, light-purple, dark-purple, light-red, and dark-red.",{version:"4.19",warnOnce:!0,see:"https://developers.arcgis.com/javascript/latest/styling/"});const o="esri-widget-uid-"+o$u(),d=this.render.bind(this);let p=!1;this._trackingTarget=new s$s((()=>this.scheduleRender()));const m=()=>{if(!p||this.destroyed)return null;const e=d();return e.properties?e.properties.key||(e.properties.key=o):e.properties={key:o},e};this.render=()=>{if(R$1)return m();let e;this._trackingTarget.clear(),R$1=!0;try{e=a$J(this._trackingTarget,m);}finally{R$1=!1;}return e},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then((()=>{p=!0,this._postInitialize();})));}normalizeCtorArgs(e,t){const r={...e};return t&&(r.container=t),r}postInitialize(){}beforeFirstRender(){return this._loadLocale().catch(j$f)}async loadLocale(){}destroy(){this.destroyed||(this._trackingTarget.destroy(),this._trackingTarget=null,this.viewModel&&(this.viewModel.destroy(),this.viewModel=null),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null);}set container(e){this._get("container")||this._set("container",e);}castContainer(e){return e$1(e)}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+H++}set id(e){e&&this._set("id",e);}get renderable(){return this._resourcesFetch}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||this._projector.scheduleRender();}classes(...e){return l$4.apply(this,e)}own(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments)),this._internalHandles.add(e);}renderNow(){this._projector.renderNow();}_postInitialize(){var e;this.destroyed||(this.scheduleRender(),null!=(e=this._delegatedEventNames)&&e.length&&this._internalHandles.add(d$5(this,"viewModel",((e,t)=>{t&&this._internalHandles.remove("delegated-events"),e&&this._internalHandles.add(this._delegatedEventNames.map((t=>e.on(t,(e=>{this.emit(t,e);})))),"delegated-events");}))),this.postInitialize(),this._internalHandles.add((0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.f)((async()=>{await this._loadLocale().catch(j$f),this.scheduleRender();}))),this._internalHandles.add(j$1(this,"container",(async e=>{this.destroyed||this._attach(e);}))));}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0);}_detach(e){e&&this._attached&&(this._projector.detach(this.render),e.parentNode&&e.parentNode.removeChild(e),this._attached=!1);}};e$u([y$r({value:null})],T.prototype,"container",null),e$u([c$_("container")],T.prototype,"castContainer",null),e$u([y$r({aliasOf:"container"})],T.prototype,"domNode",void 0),e$u([y$r()],T.prototype,"iconClass",void 0),e$u([y$r()],T.prototype,"id",null),e$u([y$r()],T.prototype,"label",void 0),e$u([y$r()],T.prototype,"renderable",null),e$u([y$r()],T.prototype,"viewModel",void 0),e$u([y$r()],T.prototype,"visible",void 0),T=e$u([i$X("esri.widgets.Widget")],T);var L=T;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const l$1={base:"esri-identity-form",group:"esri-identity-form__group",label:"esri-identity-form__label",footer:"esri-identity-form__footer",esriInput:"esri-input",esriButton:"esri-button",esriButtonSecondary:"esri-button--secondary"},p$2="ArcGIS Online";let a$1=class extends L{constructor(s,e){super(s,e),this._usernameInputNode=null,this._passwordInputNode=null,this.messages=null,this.signingIn=!1,this.server=null,this.resource=null,this.error=null,this.oAuthPrompt=!1;}render(){const{error:s,server:e,resource:t,signingIn:i,oAuthPrompt:u,messages:a}=this,d=o$3("div",{class:l$1.group},s$7(u?a.oAuthInfo:a.info,{server:/\.arcgis\.com/i.test(e)?p$2:e,resource:`(${t||a.lblItem})`})),c=u?null:o$3("div",{class:l$1.group},o$3("label",{class:l$1.label},a.lblUser,o$3("input",{value:"",required:!0,autocomplete:"off",spellcheck:!1,type:"text",bind:this,afterCreate:p$5,"data-node-ref":"_usernameInputNode",class:l$1.esriInput}))),m=u?null:o$3("div",{class:l$1.group},o$3("label",{class:l$1.label},a.lblPwd,o$3("input",{value:"",required:!0,type:"password",bind:this,afterCreate:p$5,"data-node-ref":"_passwordInputNode",class:l$1.esriInput}))),h=o$3("div",{class:this.classes(l$1.group,l$1.footer)},o$3("input",{type:"submit",disabled:!!i,value:i?a.lblSigning:a.lblOk,class:l$1.esriButton}),o$3("input",{type:"button",value:a.lblCancel,bind:this,onclick:this._cancel,class:this.classes(l$1.esriButton,l$1.esriButtonSecondary)})),b=s?o$3("div",null,s.details&&s.details.httpStatus?a.invalidUser:a.noAuthService):null;return o$3("form",{class:l$1.base,bind:this,onsubmit:this._submit},d,b,c,m,h)}_cancel(){this._set("signingIn",!1),this._usernameInputNode&&(this._usernameInputNode.value=""),this._passwordInputNode&&(this._passwordInputNode.value=""),this.emit("cancel");}_submit(s){s.preventDefault(),this._set("signingIn",!0);const e=this.oAuthPrompt?{}:{username:this._usernameInputNode&&this._usernameInputNode.value,password:this._passwordInputNode&&this._passwordInputNode.value};this.emit("submit",e);}};e$u([y$r(),e$3("esri/identity/t9n/identity")],a$1.prototype,"messages",void 0),e$u([y$r()],a$1.prototype,"signingIn",void 0),e$u([y$r()],a$1.prototype,"server",void 0),e$u([y$r()],a$1.prototype,"resource",void 0),e$u([y$r()],a$1.prototype,"error",void 0),e$u([y$r()],a$1.prototype,"oAuthPrompt",void 0),a$1=e$u([i$X("esri.identity.IdentityForm")],a$1);var d$1=a$1;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function e(e){return e&&"function"==typeof e.render}

/*!
* tabbable 5.3.3
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/
var candidateSelectors = ['input', 'select', 'textarea', 'a[href]', 'button', '[tabindex]:not(slot)', 'audio[controls]', 'video[controls]', '[contenteditable]:not([contenteditable="false"])', 'details>summary:first-of-type', 'details'];
var candidateSelector = /* #__PURE__ */candidateSelectors.join(',');
var NoElement = typeof Element === 'undefined';
var matches = NoElement ? function () {} : Element.prototype.matches || Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;
var getRootNode = !NoElement && Element.prototype.getRootNode ? function (element) {
  return element.getRootNode();
} : function (element) {
  return element.ownerDocument;
};
/**
 * @param {Element} el container to check in
 * @param {boolean} includeContainer add container to check
 * @param {(node: Element) => boolean} filter filter candidates
 * @returns {Element[]}
 */

var getCandidates = function getCandidates(el, includeContainer, filter) {
  var candidates = Array.prototype.slice.apply(el.querySelectorAll(candidateSelector));

  if (includeContainer && matches.call(el, candidateSelector)) {
    candidates.unshift(el);
  }

  candidates = candidates.filter(filter);
  return candidates;
};
/**
 * @callback GetShadowRoot
 * @param {Element} element to check for shadow root
 * @returns {ShadowRoot|boolean} ShadowRoot if available or boolean indicating if a shadowRoot is attached but not available.
 */

/**
 * @callback ShadowRootFilter
 * @param {Element} shadowHostNode the element which contains shadow content
 * @returns {boolean} true if a shadow root could potentially contain valid candidates.
 */

/**
 * @typedef {Object} CandidatesScope
 * @property {Element} scope contains inner candidates
 * @property {Element[]} candidates
 */

/**
 * @typedef {Object} IterativeOptions
 * @property {GetShadowRoot|boolean} getShadowRoot true if shadow support is enabled; falsy if not;
 *  if a function, implies shadow support is enabled and either returns the shadow root of an element
 *  or a boolean stating if it has an undisclosed shadow root
 * @property {(node: Element) => boolean} filter filter candidates
 * @property {boolean} flatten if true then result will flatten any CandidatesScope into the returned list
 * @property {ShadowRootFilter} shadowRootFilter filter shadow roots;
 */

/**
 * @param {Element[]} elements list of element containers to match candidates from
 * @param {boolean} includeContainer add container list to check
 * @param {IterativeOptions} options
 * @returns {Array.<Element|CandidatesScope>}
 */


var getCandidatesIteratively = function getCandidatesIteratively(elements, includeContainer, options) {
  var candidates = [];
  var elementsToCheck = Array.from(elements);

  while (elementsToCheck.length) {
    var element = elementsToCheck.shift();

    if (element.tagName === 'SLOT') {
      // add shadow dom slot scope (slot itself cannot be focusable)
      var assigned = element.assignedElements();
      var content = assigned.length ? assigned : element.children;
      var nestedCandidates = getCandidatesIteratively(content, true, options);

      if (options.flatten) {
        candidates.push.apply(candidates, nestedCandidates);
      } else {
        candidates.push({
          scope: element,
          candidates: nestedCandidates
        });
      }
    } else {
      // check candidate element
      var validCandidate = matches.call(element, candidateSelector);

      if (validCandidate && options.filter(element) && (includeContainer || !elements.includes(element))) {
        candidates.push(element);
      } // iterate over shadow content if possible


      var shadowRoot = element.shadowRoot || // check for an undisclosed shadow
      typeof options.getShadowRoot === 'function' && options.getShadowRoot(element);
      var validShadowRoot = !options.shadowRootFilter || options.shadowRootFilter(element);

      if (shadowRoot && validShadowRoot) {
        // add shadow dom scope IIF a shadow root node was given; otherwise, an undisclosed
        //  shadow exists, so look at light dom children as fallback BUT create a scope for any
        //  child candidates found because they're likely slotted elements (elements that are
        //  children of the web component element (which has the shadow), in the light dom, but
        //  slotted somewhere _inside_ the undisclosed shadow) -- the scope is created below,
        //  _after_ we return from this recursive call
        var _nestedCandidates = getCandidatesIteratively(shadowRoot === true ? element.children : shadowRoot.children, true, options);

        if (options.flatten) {
          candidates.push.apply(candidates, _nestedCandidates);
        } else {
          candidates.push({
            scope: element,
            candidates: _nestedCandidates
          });
        }
      } else {
        // there's not shadow so just dig into the element's (light dom) children
        //  __without__ giving the element special scope treatment
        elementsToCheck.unshift.apply(elementsToCheck, element.children);
      }
    }
  }

  return candidates;
};

var getTabindex = function getTabindex(node, isScope) {
  if (node.tabIndex < 0) {
    // in Chrome, <details/>, <audio controls/> and <video controls/> elements get a default
    // `tabIndex` of -1 when the 'tabindex' attribute isn't specified in the DOM,
    // yet they are still part of the regular tab order; in FF, they get a default
    // `tabIndex` of 0; since Chrome still puts those elements in the regular tab
    // order, consider their tab index to be 0.
    // Also browsers do not return `tabIndex` correctly for contentEditable nodes;
    // so if they don't have a tabindex attribute specifically set, assume it's 0.
    //
    // isScope is positive for custom element with shadow root or slot that by default
    // have tabIndex -1, but need to be sorted by document order in order for their
    // content to be inserted in the correct position
    if ((isScope || /^(AUDIO|VIDEO|DETAILS)$/.test(node.tagName) || node.isContentEditable) && isNaN(parseInt(node.getAttribute('tabindex'), 10))) {
      return 0;
    }
  }

  return node.tabIndex;
};

var sortOrderedTabbables = function sortOrderedTabbables(a, b) {
  return a.tabIndex === b.tabIndex ? a.documentOrder - b.documentOrder : a.tabIndex - b.tabIndex;
};

var isInput = function isInput(node) {
  return node.tagName === 'INPUT';
};

var isHiddenInput = function isHiddenInput(node) {
  return isInput(node) && node.type === 'hidden';
};

var isDetailsWithSummary = function isDetailsWithSummary(node) {
  var r = node.tagName === 'DETAILS' && Array.prototype.slice.apply(node.children).some(function (child) {
    return child.tagName === 'SUMMARY';
  });
  return r;
};

var getCheckedRadio = function getCheckedRadio(nodes, form) {
  for (var i = 0; i < nodes.length; i++) {
    if (nodes[i].checked && nodes[i].form === form) {
      return nodes[i];
    }
  }
};

var isTabbableRadio = function isTabbableRadio(node) {
  if (!node.name) {
    return true;
  }

  var radioScope = node.form || getRootNode(node);

  var queryRadios = function queryRadios(name) {
    return radioScope.querySelectorAll('input[type="radio"][name="' + name + '"]');
  };

  var radioSet;

  if (typeof window !== 'undefined' && typeof window.CSS !== 'undefined' && typeof window.CSS.escape === 'function') {
    radioSet = queryRadios(window.CSS.escape(node.name));
  } else {
    try {
      radioSet = queryRadios(node.name);
    } catch (err) {
      // eslint-disable-next-line no-console
      console.error('Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s', err.message);
      return false;
    }
  }

  var checked = getCheckedRadio(radioSet, node.form);
  return !checked || checked === node;
};

var isRadio = function isRadio(node) {
  return isInput(node) && node.type === 'radio';
};

var isNonTabbableRadio = function isNonTabbableRadio(node) {
  return isRadio(node) && !isTabbableRadio(node);
};

var isZeroArea = function isZeroArea(node) {
  var _node$getBoundingClie = node.getBoundingClientRect(),
      width = _node$getBoundingClie.width,
      height = _node$getBoundingClie.height;

  return width === 0 && height === 0;
};

var isHidden = function isHidden(node, _ref) {
  var displayCheck = _ref.displayCheck,
      getShadowRoot = _ref.getShadowRoot;

  // NOTE: visibility will be `undefined` if node is detached from the document
  //  (see notes about this further down), which means we will consider it visible
  //  (this is legacy behavior from a very long way back)
  // NOTE: we check this regardless of `displayCheck="none"` because this is a
  //  _visibility_ check, not a _display_ check
  if (getComputedStyle(node).visibility === 'hidden') {
    return true;
  }

  var isDirectSummary = matches.call(node, 'details>summary:first-of-type');
  var nodeUnderDetails = isDirectSummary ? node.parentElement : node;

  if (matches.call(nodeUnderDetails, 'details:not([open]) *')) {
    return true;
  } // The root node is the shadow root if the node is in a shadow DOM; some document otherwise
  //  (but NOT _the_ document; see second 'If' comment below for more).
  // If rootNode is shadow root, it'll have a host, which is the element to which the shadow
  //  is attached, and the one we need to check if it's in the document or not (because the
  //  shadow, and all nodes it contains, is never considered in the document since shadows
  //  behave like self-contained DOMs; but if the shadow's HOST, which is part of the document,
  //  is hidden, or is not in the document itself but is detached, it will affect the shadow's
  //  visibility, including all the nodes it contains). The host could be any normal node,
  //  or a custom element (i.e. web component). Either way, that's the one that is considered
  //  part of the document, not the shadow root, nor any of its children (i.e. the node being
  //  tested).
  // If rootNode is not a shadow root, it won't have a host, and so rootNode should be the
  //  document (per the docs) and while it's a Document-type object, that document does not
  //  appear to be the same as the node's `ownerDocument` for some reason, so it's safer
  //  to ignore the rootNode at this point, and use `node.ownerDocument`. Otherwise,
  //  using `rootNode.contains(node)` will _always_ be true we'll get false-positives when
  //  node is actually detached.


  var nodeRootHost = getRootNode(node).host;
  var nodeIsAttached = (nodeRootHost === null || nodeRootHost === void 0 ? void 0 : nodeRootHost.ownerDocument.contains(nodeRootHost)) || node.ownerDocument.contains(node);

  if (!displayCheck || displayCheck === 'full') {
    if (typeof getShadowRoot === 'function') {
      // figure out if we should consider the node to be in an undisclosed shadow and use the
      //  'non-zero-area' fallback
      var originalNode = node;

      while (node) {
        var parentElement = node.parentElement;
        var rootNode = getRootNode(node);

        if (parentElement && !parentElement.shadowRoot && getShadowRoot(parentElement) === true // check if there's an undisclosed shadow
        ) {
          // node has an undisclosed shadow which means we can only treat it as a black box, so we
          //  fall back to a non-zero-area test
          return isZeroArea(node);
        } else if (node.assignedSlot) {
          // iterate up slot
          node = node.assignedSlot;
        } else if (!parentElement && rootNode !== node.ownerDocument) {
          // cross shadow boundary
          node = rootNode.host;
        } else {
          // iterate up normal dom
          node = parentElement;
        }
      }

      node = originalNode;
    } // else, `getShadowRoot` might be true, but all that does is enable shadow DOM support
    //  (i.e. it does not also presume that all nodes might have undisclosed shadows); or
    //  it might be a falsy value, which means shadow DOM support is disabled
    // Since we didn't find it sitting in an undisclosed shadow (or shadows are disabled)
    //  now we can just test to see if it would normally be visible or not, provided it's
    //  attached to the main document.
    // NOTE: We must consider case where node is inside a shadow DOM and given directly to
    //  `isTabbable()` or `isFocusable()` -- regardless of `getShadowRoot` option setting.


    if (nodeIsAttached) {
      // this works wherever the node is: if there's at least one client rect, it's
      //  somehow displayed; it also covers the CSS 'display: contents' case where the
      //  node itself is hidden in place of its contents; and there's no need to search
      //  up the hierarchy either
      return !node.getClientRects().length;
    } // Else, the node isn't attached to the document, which means the `getClientRects()`
    //  API will __always__ return zero rects (this can happen, for example, if React
    //  is used to render nodes onto a detached tree, as confirmed in this thread:
    //  https://github.com/facebook/react/issues/9117#issuecomment-284228870)
    //
    // It also means that even window.getComputedStyle(node).display will return `undefined`
    //  because styles are only computed for nodes that are in the document.
    //
    // NOTE: THIS HAS BEEN THE CASE FOR YEARS. It is not new, nor is it caused by tabbable
    //  somehow. Though it was never stated officially, anyone who has ever used tabbable
    //  APIs on nodes in detached containers has actually implicitly used tabbable in what
    //  was later (as of v5.2.0 on Apr 9, 2021) called `displayCheck="none"` mode -- essentially
    //  considering __everything__ to be visible because of the innability to determine styles.

  } else if (displayCheck === 'non-zero-area') {
    // NOTE: Even though this tests that the node's client rect is non-zero to determine
    //  whether it's displayed, and that a detached node will __always__ have a zero-area
    //  client rect, we don't special-case for whether the node is attached or not. In
    //  this mode, we do want to consider nodes that have a zero area to be hidden at all
    //  times, and that includes attached or not.
    return isZeroArea(node);
  } // visible, as far as we can tell, or per current `displayCheck` mode


  return false;
}; // form fields (nested) inside a disabled fieldset are not focusable/tabbable
//  unless they are in the _first_ <legend> element of the top-most disabled
//  fieldset


var isDisabledFromFieldset = function isDisabledFromFieldset(node) {
  if (/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(node.tagName)) {
    var parentNode = node.parentElement; // check if `node` is contained in a disabled <fieldset>

    while (parentNode) {
      if (parentNode.tagName === 'FIELDSET' && parentNode.disabled) {
        // look for the first <legend> among the children of the disabled <fieldset>
        for (var i = 0; i < parentNode.children.length; i++) {
          var child = parentNode.children.item(i); // when the first <legend> (in document order) is found

          if (child.tagName === 'LEGEND') {
            // if its parent <fieldset> is not nested in another disabled <fieldset>,
            // return whether `node` is a descendant of its first <legend>
            return matches.call(parentNode, 'fieldset[disabled] *') ? true : !child.contains(node);
          }
        } // the disabled <fieldset> containing `node` has no <legend>


        return true;
      }

      parentNode = parentNode.parentElement;
    }
  } // else, node's tabbable/focusable state should not be affected by a fieldset's
  //  enabled/disabled state


  return false;
};

var isNodeMatchingSelectorFocusable = function isNodeMatchingSelectorFocusable(options, node) {
  if (node.disabled || isHiddenInput(node) || isHidden(node, options) || // For a details element with a summary, the summary element gets the focus
  isDetailsWithSummary(node) || isDisabledFromFieldset(node)) {
    return false;
  }

  return true;
};

var isNodeMatchingSelectorTabbable = function isNodeMatchingSelectorTabbable(options, node) {
  if (isNonTabbableRadio(node) || getTabindex(node) < 0 || !isNodeMatchingSelectorFocusable(options, node)) {
    return false;
  }

  return true;
};

var isValidShadowRootTabbable = function isValidShadowRootTabbable(shadowHostNode) {
  var tabIndex = parseInt(shadowHostNode.getAttribute('tabindex'), 10);

  if (isNaN(tabIndex) || tabIndex >= 0) {
    return true;
  } // If a custom element has an explicit negative tabindex,
  // browsers will not allow tab targeting said element's children.


  return false;
};
/**
 * @param {Array.<Element|CandidatesScope>} candidates
 * @returns Element[]
 */


var sortByOrder = function sortByOrder(candidates) {
  var regularTabbables = [];
  var orderedTabbables = [];
  candidates.forEach(function (item, i) {
    var isScope = !!item.scope;
    var element = isScope ? item.scope : item;
    var candidateTabindex = getTabindex(element, isScope);
    var elements = isScope ? sortByOrder(item.candidates) : element;

    if (candidateTabindex === 0) {
      isScope ? regularTabbables.push.apply(regularTabbables, elements) : regularTabbables.push(element);
    } else {
      orderedTabbables.push({
        documentOrder: i,
        tabIndex: candidateTabindex,
        item: item,
        isScope: isScope,
        content: elements
      });
    }
  });
  return orderedTabbables.sort(sortOrderedTabbables).reduce(function (acc, sortable) {
    sortable.isScope ? acc.push.apply(acc, sortable.content) : acc.push(sortable.content);
    return acc;
  }, []).concat(regularTabbables);
};

var tabbable = function tabbable(el, options) {
  options = options || {};
  var candidates;

  if (options.getShadowRoot) {
    candidates = getCandidatesIteratively([el], options.includeContainer, {
      filter: isNodeMatchingSelectorTabbable.bind(null, options),
      flatten: false,
      getShadowRoot: options.getShadowRoot,
      shadowRootFilter: isValidShadowRootTabbable
    });
  } else {
    candidates = getCandidates(el, options.includeContainer, isNodeMatchingSelectorTabbable.bind(null, options));
  }

  return sortByOrder(candidates);
};

var focusableCandidateSelector = /* #__PURE__ */candidateSelectors.concat('iframe').join(',');

var isFocusable = function isFocusable(node, options) {
  options = options || {};

  if (!node) {
    throw new Error('No node provided');
  }

  if (matches.call(node, focusableCandidateSelector) === false) {
    return false;
  }

  return isNodeMatchingSelectorFocusable(options, node);
};

/*!
* focus-trap 6.3.0
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}

function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);

  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) symbols = symbols.filter(function (sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    });
    keys.push.apply(keys, symbols);
  }

  return keys;
}

function _objectSpread2(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};

    if (i % 2) {
      ownKeys(Object(source), true).forEach(function (key) {
        _defineProperty(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys(Object(source)).forEach(function (key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }

  return target;
}

var activeFocusDelay;

var activeFocusTraps = function () {
  var trapQueue = [];
  return {
    activateTrap: function activateTrap(trap) {
      if (trapQueue.length > 0) {
        var activeTrap = trapQueue[trapQueue.length - 1];

        if (activeTrap !== trap) {
          activeTrap.pause();
        }
      }

      var trapIndex = trapQueue.indexOf(trap);

      if (trapIndex === -1) {
        trapQueue.push(trap);
      } else {
        // move this existing trap to the front of the queue
        trapQueue.splice(trapIndex, 1);
        trapQueue.push(trap);
      }
    },
    deactivateTrap: function deactivateTrap(trap) {
      var trapIndex = trapQueue.indexOf(trap);

      if (trapIndex !== -1) {
        trapQueue.splice(trapIndex, 1);
      }

      if (trapQueue.length > 0) {
        trapQueue[trapQueue.length - 1].unpause();
      }
    }
  };
}();

var isSelectableInput = function isSelectableInput(node) {
  return node.tagName && node.tagName.toLowerCase() === 'input' && typeof node.select === 'function';
};

var isEscapeEvent = function isEscapeEvent(e) {
  return e.key === 'Escape' || e.key === 'Esc' || e.keyCode === 27;
};

var isTabEvent = function isTabEvent(e) {
  return e.key === 'Tab' || e.keyCode === 9;
};

var delay = function delay(fn) {
  return setTimeout(fn, 0);
}; // Array.find/findIndex() are not supported on IE; this replicates enough
//  of Array.findIndex() for our needs


var findIndex = function findIndex(arr, fn) {
  var idx = -1;
  arr.every(function (value, i) {
    if (fn(value)) {
      idx = i;
      return false; // break
    }

    return true; // next
  });
  return idx;
};
/**
 * Get an option's value when it could be a plain value, or a handler that provides
 *  the value.
 * @param {*} value Option's value to check.
 * @param {...*} [params] Any parameters to pass to the handler, if `value` is a function.
 * @returns {*} The `value`, or the handler's returned value.
 */


var valueOrHandler = function valueOrHandler(value) {
  for (var _len = arguments.length, params = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
    params[_key - 1] = arguments[_key];
  }

  return typeof value === 'function' ? value.apply(void 0, params) : value;
};

var createFocusTrap = function createFocusTrap(elements, userOptions) {
  var doc = document;

  var config = _objectSpread2({
    returnFocusOnDeactivate: true,
    escapeDeactivates: true,
    delayInitialFocus: true
  }, userOptions);

  var state = {
    // @type {Array<HTMLElement>}
    containers: [],
    // list of objects identifying the first and last tabbable nodes in all containers/groups in
    //  the trap
    // NOTE: it's possible that a group has no tabbable nodes if nodes get removed while the trap
    //  is active, but the trap should never get to a state where there isn't at least one group
    //  with at least one tabbable node in it (that would lead to an error condition that would
    //  result in an error being thrown)
    // @type {Array<{ container: HTMLElement, firstTabbableNode: HTMLElement|null, lastTabbableNode: HTMLElement|null }>}
    tabbableGroups: [],
    nodeFocusedBeforeActivation: null,
    mostRecentlyFocusedNode: null,
    active: false,
    paused: false
  };
  var trap; // eslint-disable-line prefer-const -- some private functions reference it, and its methods reference private functions, so we must declare here and define later

  var containersContain = function containersContain(element) {
    return state.containers.some(function (container) {
      return container.contains(element);
    });
  };

  var getNodeForOption = function getNodeForOption(optionName) {
    var optionValue = config[optionName];

    if (!optionValue) {
      return null;
    }

    var node = optionValue;

    if (typeof optionValue === 'string') {
      node = doc.querySelector(optionValue);

      if (!node) {
        throw new Error("`".concat(optionName, "` refers to no known node"));
      }
    }

    if (typeof optionValue === 'function') {
      node = optionValue();

      if (!node) {
        throw new Error("`".concat(optionName, "` did not return a node"));
      }
    }

    return node;
  };

  var getInitialFocusNode = function getInitialFocusNode() {
    var node;

    if (getNodeForOption('initialFocus') !== null) {
      node = getNodeForOption('initialFocus');
    } else if (containersContain(doc.activeElement)) {
      node = doc.activeElement;
    } else {
      var firstTabbableGroup = state.tabbableGroups[0];
      var firstTabbableNode = firstTabbableGroup && firstTabbableGroup.firstTabbableNode;
      node = firstTabbableNode || getNodeForOption('fallbackFocus');
    }

    if (!node) {
      throw new Error('Your focus-trap needs to have at least one focusable element');
    }

    return node;
  };

  var updateTabbableNodes = function updateTabbableNodes() {
    state.tabbableGroups = state.containers.map(function (container) {
      var tabbableNodes = tabbable(container);

      if (tabbableNodes.length > 0) {
        return {
          container: container,
          firstTabbableNode: tabbableNodes[0],
          lastTabbableNode: tabbableNodes[tabbableNodes.length - 1]
        };
      }

      return undefined;
    }).filter(function (group) {
      return !!group;
    }); // remove groups with no tabbable nodes
    // throw if no groups have tabbable nodes and we don't have a fallback focus node either

    if (state.tabbableGroups.length <= 0 && !getNodeForOption('fallbackFocus')) {
      throw new Error('Your focus-trap must have at least one container with at least one tabbable node in it at all times');
    }
  };

  var tryFocus = function tryFocus(node) {
    if (node === doc.activeElement) {
      return;
    }

    if (!node || !node.focus) {
      tryFocus(getInitialFocusNode());
      return;
    }

    node.focus({
      preventScroll: !!config.preventScroll
    });
    state.mostRecentlyFocusedNode = node;

    if (isSelectableInput(node)) {
      node.select();
    }
  };

  var getReturnFocusNode = function getReturnFocusNode(previousActiveElement) {
    var node = getNodeForOption('setReturnFocus');
    return node ? node : previousActiveElement;
  }; // This needs to be done on mousedown and touchstart instead of click
  // so that it precedes the focus event.


  var checkPointerDown = function checkPointerDown(e) {
    if (containersContain(e.target)) {
      // allow the click since it ocurred inside the trap
      return;
    }

    if (valueOrHandler(config.clickOutsideDeactivates, e)) {
      // immediately deactivate the trap
      trap.deactivate({
        // if, on deactivation, we should return focus to the node originally-focused
        //  when the trap was activated (or the configured `setReturnFocus` node),
        //  then assume it's also OK to return focus to the outside node that was
        //  just clicked, causing deactivation, as long as that node is focusable;
        //  if it isn't focusable, then return focus to the original node focused
        //  on activation (or the configured `setReturnFocus` node)
        // NOTE: by setting `returnFocus: false`, deactivate() will do nothing,
        //  which will result in the outside click setting focus to the node
        //  that was clicked, whether it's focusable or not; by setting
        //  `returnFocus: true`, we'll attempt to re-focus the node originally-focused
        //  on activation (or the configured `setReturnFocus` node)
        returnFocus: config.returnFocusOnDeactivate && !isFocusable(e.target)
      });
      return;
    } // This is needed for mobile devices.
    // (If we'll only let `click` events through,
    // then on mobile they will be blocked anyways if `touchstart` is blocked.)


    if (valueOrHandler(config.allowOutsideClick, e)) {
      // allow the click outside the trap to take place
      return;
    } // otherwise, prevent the click


    e.preventDefault();
  }; // In case focus escapes the trap for some strange reason, pull it back in.


  var checkFocusIn = function checkFocusIn(e) {
    var targetContained = containersContain(e.target); // In Firefox when you Tab out of an iframe the Document is briefly focused.

    if (targetContained || e.target instanceof Document) {
      if (targetContained) {
        state.mostRecentlyFocusedNode = e.target;
      }
    } else {
      // escaped! pull it back in to where it just left
      e.stopImmediatePropagation();
      tryFocus(state.mostRecentlyFocusedNode || getInitialFocusNode());
    }
  }; // Hijack Tab events on the first and last focusable nodes of the trap,
  // in order to prevent focus from escaping. If it escapes for even a
  // moment it can end up scrolling the page and causing confusion so we
  // kind of need to capture the action at the keydown phase.


  var checkTab = function checkTab(e) {
    updateTabbableNodes();
    var destinationNode = null;

    if (state.tabbableGroups.length > 0) {
      // make sure the target is actually contained in a group
      var containerIndex = findIndex(state.tabbableGroups, function (_ref) {
        var container = _ref.container;
        return container.contains(e.target);
      });

      if (containerIndex < 0) {
        // target not found in any group: quite possible focus has escaped the trap,
        //  so bring it back in to...
        if (e.shiftKey) {
          // ...the last node in the last group
          destinationNode = state.tabbableGroups[state.tabbableGroups.length - 1].lastTabbableNode;
        } else {
          // ...the first node in the first group
          destinationNode = state.tabbableGroups[0].firstTabbableNode;
        }
      } else if (e.shiftKey) {
        // REVERSE
        var startOfGroupIndex = findIndex(state.tabbableGroups, function (_ref2) {
          var firstTabbableNode = _ref2.firstTabbableNode;
          return e.target === firstTabbableNode;
        });

        if (startOfGroupIndex >= 0) {
          var destinationGroupIndex = startOfGroupIndex === 0 ? state.tabbableGroups.length - 1 : startOfGroupIndex - 1;
          var destinationGroup = state.tabbableGroups[destinationGroupIndex];
          destinationNode = destinationGroup.lastTabbableNode;
        }
      } else {
        // FORWARD
        var lastOfGroupIndex = findIndex(state.tabbableGroups, function (_ref3) {
          var lastTabbableNode = _ref3.lastTabbableNode;
          return e.target === lastTabbableNode;
        });

        if (lastOfGroupIndex >= 0) {
          var _destinationGroupIndex = lastOfGroupIndex === state.tabbableGroups.length - 1 ? 0 : lastOfGroupIndex + 1;

          var _destinationGroup = state.tabbableGroups[_destinationGroupIndex];
          destinationNode = _destinationGroup.firstTabbableNode;
        }
      }
    } else {
      destinationNode = getNodeForOption('fallbackFocus');
    }

    if (destinationNode) {
      e.preventDefault();
      tryFocus(destinationNode);
    }
  };

  var checkKey = function checkKey(e) {
    if (config.escapeDeactivates !== false && isEscapeEvent(e)) {
      e.preventDefault();
      trap.deactivate();
      return;
    }

    if (isTabEvent(e)) {
      checkTab(e);
      return;
    }
  };

  var checkClick = function checkClick(e) {
    if (valueOrHandler(config.clickOutsideDeactivates, e)) {
      return;
    }

    if (containersContain(e.target)) {
      return;
    }

    if (valueOrHandler(config.allowOutsideClick, e)) {
      return;
    }

    e.preventDefault();
    e.stopImmediatePropagation();
  }; //
  // EVENT LISTENERS
  //


  var addListeners = function addListeners() {
    if (!state.active) {
      return;
    } // There can be only one listening focus trap at a time


    activeFocusTraps.activateTrap(trap); // Delay ensures that the focused element doesn't capture the event
    // that caused the focus trap activation.

    activeFocusDelay = config.delayInitialFocus ? delay(function () {
      tryFocus(getInitialFocusNode());
    }) : tryFocus(getInitialFocusNode());
    doc.addEventListener('focusin', checkFocusIn, true);
    doc.addEventListener('mousedown', checkPointerDown, {
      capture: true,
      passive: false
    });
    doc.addEventListener('touchstart', checkPointerDown, {
      capture: true,
      passive: false
    });
    doc.addEventListener('click', checkClick, {
      capture: true,
      passive: false
    });
    doc.addEventListener('keydown', checkKey, {
      capture: true,
      passive: false
    });
    return trap;
  };

  var removeListeners = function removeListeners() {
    if (!state.active) {
      return;
    }

    doc.removeEventListener('focusin', checkFocusIn, true);
    doc.removeEventListener('mousedown', checkPointerDown, true);
    doc.removeEventListener('touchstart', checkPointerDown, true);
    doc.removeEventListener('click', checkClick, true);
    doc.removeEventListener('keydown', checkKey, true);
    return trap;
  }; //
  // TRAP DEFINITION
  //


  trap = {
    activate: function activate(activateOptions) {
      if (state.active) {
        return this;
      }

      updateTabbableNodes();
      state.active = true;
      state.paused = false;
      state.nodeFocusedBeforeActivation = doc.activeElement;
      var onActivate = activateOptions && activateOptions.onActivate ? activateOptions.onActivate : config.onActivate;

      if (onActivate) {
        onActivate();
      }

      addListeners();
      return this;
    },
    deactivate: function deactivate(deactivateOptions) {
      if (!state.active) {
        return this;
      }

      clearTimeout(activeFocusDelay);
      removeListeners();
      state.active = false;
      state.paused = false;
      activeFocusTraps.deactivateTrap(trap);
      var onDeactivate = deactivateOptions && deactivateOptions.onDeactivate !== undefined ? deactivateOptions.onDeactivate : config.onDeactivate;

      if (onDeactivate) {
        onDeactivate();
      }

      var returnFocus = deactivateOptions && deactivateOptions.returnFocus !== undefined ? deactivateOptions.returnFocus : config.returnFocusOnDeactivate;

      if (returnFocus) {
        delay(function () {
          tryFocus(getReturnFocusNode(state.nodeFocusedBeforeActivation));
        });
      }

      return this;
    },
    pause: function pause() {
      if (state.paused || !state.active) {
        return this;
      }

      state.paused = true;
      removeListeners();
      return this;
    },
    unpause: function unpause() {
      if (!state.paused || !state.active) {
        return this;
      }

      state.paused = false;
      updateTabbableNodes();
      addListeners();
      return this;
    },
    updateContainerElements: function updateContainerElements(containerElements) {
      var elementsAsArray = [].concat(containerElements).filter(Boolean);
      state.containers = elementsAsArray.map(function (element) {
        return typeof element === 'string' ? doc.querySelector(element) : element;
      });

      if (state.active) {
        updateTabbableNodes();
      }

      return this;
    }
  }; // initialize container elements

  trap.updateContainerElements(elements);
  return trap;
};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const l={base:"esri-identity-modal",open:"esri-identity-modal--open",closed:"esri-identity-modal--closed",title:"esri-identity-modal__title",dialog:"esri-identity-modal__dialog",content:"esri-identity-modal__content",closeButton:"esri-identity-modal__close-button",iconClose:"esri-icon-close"};let d=class extends L{constructor(t,e){super(t,e),this.container=document.createElement("div"),this.content=null,this.open=!1,this._close=()=>{this.open=!1;},document.body.appendChild(this.container),this.own(this.watch("open",(()=>this._toggleFocusTrap())));}destroy(){this._destroyFocusTrap();}render(){const t=this.id,{open:e,content:o,title:s,messages:i}=this,n=e&&!!o,a={[l.open]:n,[l.closed]:!n},c=o$3("button",{class:l.closeButton,"aria-label":i.close,title:i.close,bind:this,onclick:this._close},o$3("span",{"aria-hidden":"true",class:l.iconClose})),d=`${t}_title`,p=`${t}_content`,u=s?o$3("h1",{id:d,class:l.title},s):null,m=n?o$3("div",{bind:this,class:l.dialog,role:"dialog","aria-labelledby":d,"aria-describedby":p,afterCreate:this._createFocusTrap},c,u,this._renderContent(p)):null;return o$3("div",{tabIndex:-1,class:this.classes(l.base,a)},m)}_destroyFocusTrap(){var t;null==(t=this._focusTrap)||t.deactivate({onDeactivate:null}),this._focusTrap=null;}_toggleFocusTrap(){const{_focusTrap:t,open:e}=this;t&&(e?t.activate():t.deactivate());}_createFocusTrap(t){this._destroyFocusTrap();const o=requestAnimationFrame((()=>{this._focusTrap=createFocusTrap(t,{initialFocus:"input",onDeactivate:this._close}),this._toggleFocusTrap();}));this.own(n$R((()=>cancelAnimationFrame(o))));}_renderContent(t){const e$1=this.content;return "string"==typeof e$1?o$3("div",{class:l.content,id:t,innerHTML:e$1}):e(e$1)?o$3("div",{class:l.content,id:t},e$1.render()):e$1 instanceof HTMLElement?o$3("div",{class:l.content,id:t,bind:e$1,afterCreate:this._attachToNode}):null}_attachToNode(t){const e=this;t.appendChild(e);}};e$u([y$r({readOnly:!0})],d.prototype,"container",void 0),e$u([y$r()],d.prototype,"content",void 0),e$u([y$r()],d.prototype,"open",void 0),e$u([y$r(),e$3("esri/t9n/common")],d.prototype,"messages",void 0),e$u([y$r({aliasOf:"messages.auth.signIn"})],d.prototype,"title",void 0),d=e$u([i$X("esri.identity.IdentityModal")],d);var p$1=d;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const t="esriJSAPIOAuth";class s$2{constructor(t,s){this.oAuthInfo=null,this.storage=null,this.appId=null,this.expires=null,this.ssl=null,this.token=null,this.userId=null,this.oAuthInfo=t,this.storage=s,this._init();}isValid(){let t=!1;if(this.oAuthInfo&&this.token&&this.userId){const s=Date.now();if(this.expires>s){(this.expires-s)/1e3>60*this.oAuthInfo.minTimeUntilExpiration&&(t=!0);}}return t}save(){if(!this.storage)return;const s=this._load(),e=this.oAuthInfo;if(e&&e.authNamespace&&e.portalUrl){let o=s[e.authNamespace];o||(o=s[e.authNamespace]={}),o[e.portalUrl]={appId:this.appId=e.appId,expires:this.expires,ssl:this.ssl,token:this.token,userId:this.userId};try{this.storage.setItem(t,JSON.stringify(s));}catch(i){console.log(i);}}}destroy(){const s=this._load(),e=this.oAuthInfo;if(e&&e.appId&&e.portalUrl&&this.token&&this.expires>Date.now()){const t=e.portalUrl.replace(/^http:/i,"https:")+"/sharing/rest/oauth2/revokeToken",s=new FormData;if(s.append("f","json"),s.append("auth_token",this.token),s.append("client_id",e.appId),s.append("token_type_hint","access_token"),"function"==typeof navigator.sendBeacon)navigator.sendBeacon(t,s);else {const e=new XMLHttpRequest;e.open("POST",t),e.send(s);}}if(e&&e.authNamespace&&e.portalUrl&&this.storage){const o=s[e.authNamespace];if(o){delete o[e.portalUrl];try{this.storage.setItem(t,JSON.stringify(s));}catch(i){console.log(i);}}}e&&(e._oAuthCred=null,this.oAuthInfo=null);}_init(){const t=this._load(),s=this.oAuthInfo;if(s&&s.authNamespace&&s.portalUrl){let e=t[s.authNamespace];e&&(e=e[s.portalUrl],e&&(this.appId=e.appId,this.expires=e.expires,this.ssl=e.ssl,this.token=e.token,this.userId=e.userId));}}_load(){let s={};if(this.storage){const i=this.storage.getItem(t);if(i)try{s=JSON.parse(i);}catch(e){console.log(e);}}return s}}s$2.prototype.declaredClass="esri.identity.OAuthCredential";

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
var p;let s$1=p=class extends a$B{constructor(o){super(o),this._oAuthCred=null,this.appId=null,this.authNamespace="/",this.expiration=20160,this.forceLogin=!1,this.forceUserId=!1,this.locale=null,this.minTimeUntilExpiration=30,this.popup=!1,this.popupCallbackUrl="oauth-callback.html",this.popupWindowFeatures="height=490,width=800,resizable,scrollbars,status",this.portalUrl="https://www.arcgis.com",this.preserveUrlHash=!1,this.userId=null;}clone(){return p.fromJSON(this.toJSON())}};e$u([y$r({json:{write:!0}})],s$1.prototype,"appId",void 0),e$u([y$r({json:{write:!0}})],s$1.prototype,"authNamespace",void 0),e$u([y$r({json:{write:!0}})],s$1.prototype,"expiration",void 0),e$u([y$r({json:{write:!0}})],s$1.prototype,"forceLogin",void 0),e$u([y$r({json:{write:!0}})],s$1.prototype,"forceUserId",void 0),e$u([y$r({json:{write:!0}})],s$1.prototype,"locale",void 0),e$u([y$r({json:{write:!0}})],s$1.prototype,"minTimeUntilExpiration",void 0),e$u([y$r({json:{write:!0}})],s$1.prototype,"popup",void 0),e$u([y$r({json:{write:!0}})],s$1.prototype,"popupCallbackUrl",void 0),e$u([y$r({json:{write:!0}})],s$1.prototype,"popupWindowFeatures",void 0),e$u([y$r({json:{write:!0}})],s$1.prototype,"portalUrl",void 0),e$u([y$r({json:{write:!0}})],s$1.prototype,"preserveUrlHash",void 0),e$u([y$r({json:{write:!0}})],s$1.prototype,"userId",void 0),s$1=p=e$u([i$X("esri.identity.OAuthInfo")],s$1);var i$1=s$1;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
let s=class extends a$B{constructor(r){super(r),this.adminTokenServiceUrl=null,this.currentVersion=null,this.hasPortal=null,this.hasServer=null,this.owningSystemUrl=null,this.owningTenant=null,this.server=null,this.shortLivedTokenValidity=null,this.tokenServiceUrl=null,this.webTierAuth=null;}};e$u([y$r({json:{write:!0}})],s.prototype,"adminTokenServiceUrl",void 0),e$u([y$r({json:{write:!0}})],s.prototype,"currentVersion",void 0),e$u([y$r({json:{write:!0}})],s.prototype,"hasPortal",void 0),e$u([y$r({json:{write:!0}})],s.prototype,"hasServer",void 0),e$u([y$r({json:{write:!0}})],s.prototype,"owningSystemUrl",void 0),e$u([y$r({json:{write:!0}})],s.prototype,"owningTenant",void 0),e$u([y$r({json:{write:!0}})],s.prototype,"server",void 0),e$u([y$r({json:{write:!0}})],s.prototype,"shortLivedTokenValidity",void 0),e$u([y$r({json:{write:!0}})],s.prototype,"tokenServiceUrl",void 0),e$u([y$r({json:{write:!0}})],s.prototype,"webTierAuth",void 0),s=e$u([i$X("esri.identity.ServerInfo")],s);var i=s;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const R={},b=e=>{const t=new $$2(e.owningSystemUrl).host,s=new $$2(e.server).host,r=/.+\.arcgis\.com$/i;return r.test(t)&&r.test(s)},P=(e,t)=>!!(b(e)&&t&&t.some((t=>t.test(e.server))));let C=null,D=null;try{C=window.localStorage,D=window.sessionStorage;}catch{}let j=class extends n$F{constructor(){super(),this._portalConfig=_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.e.esriGeowConfig,this.serverInfos=[],this.oAuthInfos=[],this.credentials=[],this._soReqs=[],this._xoReqs=[],this._portals=[],this.defaultOAuthInfo=null,this.defaultTokenValidity=60,this.dialog=null,this.formConstructor=d$1,this.tokenValidity=null,this.normalizeWebTierAuth=!1,this._appUrlObj=U$4(window.location.href),this._busy=null,this._rejectOnPersistedPageShow=!1,this._oAuthHash=null,this._gwTokenUrl="/sharing/rest/generateToken",this._agsRest="/rest/services",this._agsPortal=/\/sharing(\/|$)/i,this._agsAdmin=/(https?:\/\/[^\/]+\/[^\/]+)\/admin\/?(\/.*)?$/i,this._adminSvcs=/\/rest\/admin\/services(\/|$)/i,this._gwDomains=[{regex:/^https?:\/\/www\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/(?:dev|[a-z\d-]+\.mapsdev)\.arcgis\.com/i,customBaseUrl:"mapsdev.arcgis.com",tokenServiceUrl:"https://dev.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/(?:devext|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,customBaseUrl:"mapsdevext.arcgis.com",tokenServiceUrl:"https://devext.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/(?:qaext|[a-z\d-]+\.mapsqa)\.arcgis\.com/i,customBaseUrl:"mapsqa.arcgis.com",tokenServiceUrl:"https://qaext.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/[a-z\d-]+\.maps\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/rest/generateToken"}],this._legacyFed=[],this._regexSDirUrl=/http.+\/rest\/services\/?/gi,this._regexServerType=/(\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|MapServer|MobileServer|NAServer|NetworkDiagramServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer)).*/gi,this._gwUser=/http.+\/users\/([^\/]+)\/?.*/i,this._gwItem=/http.+\/items\/([^\/]+)\/?.*/i,this._gwGroup=/http.+\/groups\/([^\/]+)\/?.*/i,this._rePortalTokenSvc=/\/sharing(\/rest)?\/generatetoken/i,this._createDefaultOAuthInfo=!0,this._hasTestedIfAppIsOnPortal=!1,this._getOAuthHash(),window.addEventListener("pageshow",(e=>{this._pageShowHandler(e);}));}registerServers(e){const t=this.serverInfos;t?(e=e.filter((e=>!this.findServerInfo(e.server))),this.serverInfos=t.concat(e)):this.serverInfos=e,e.forEach((e=>{e.owningSystemUrl&&this._portals.push(e.owningSystemUrl),e.hasPortal&&this._portals.push(e.server);}));}registerOAuthInfos(e){const t=this.oAuthInfos;if(t){for(const s of e){const e=this.findOAuthInfo(s.portalUrl);e&&t.splice(t.indexOf(e),1);}this.oAuthInfos=t.concat(e);}else this.oAuthInfos=e;}registerToken(e){e={...e};const t=this._sanitizeUrl(e.server),s=this._isServerRsrc(t);let r,i$1=this.findServerInfo(t),o=!0;i$1||(i$1=new i,i$1.server=this._getServerInstanceRoot(t),s?i$1.hasServer=!0:(i$1.tokenServiceUrl=this._getTokenSvcUrl(t),i$1.hasPortal=!0),this.registerServers([i$1])),r=this._findCredential(t),r?(delete e.server,Object.assign(r,e),o=!1):(r=new q({userId:e.userId,server:i$1.server,token:e.token,expires:e.expires,ssl:e.ssl,scope:s?"server":"portal"}),r.resources=[t],this.credentials.push(r)),r.emitTokenChange(!1),o||r.refreshServerTokens();}toJSON(){return p$18({serverInfos:this.serverInfos.map((e=>e.toJSON())),oAuthInfos:this.oAuthInfos.map((e=>e.toJSON())),credentials:this.credentials.map((e=>e.toJSON()))})}initialize(e){if(!e)return;"string"==typeof e&&(e=JSON.parse(e));const t=e.serverInfos,s=e.oAuthInfos,r=e.credentials;if(t){const e=[];t.forEach((t=>{t.server&&t.tokenServiceUrl&&e.push(t.declaredClass?t:new i(t));})),e.length&&this.registerServers(e);}if(s){const e=[];s.forEach((t=>{t.appId&&e.push(t.declaredClass?t:new i$1(t));})),e.length&&this.registerOAuthInfos(e);}r&&r.forEach((e=>{e.server&&e.token&&e.expires&&e.expires>Date.now()&&((e=e.declaredClass?e:new q(e)).emitTokenChange(),this.credentials.push(e));}));}findServerInfo(e){let t;e=this._sanitizeUrl(e);for(const s of this.serverInfos)if(this._hasSameServerInstance(s.server,e)){t=s;break}return t}findOAuthInfo(e){let t;e=this._sanitizeUrl(e);for(const s of this.oAuthInfos)if(this._hasSameServerInstance(s.portalUrl,e)){t=s;break}return t}findCredential(e,t){let s;e=this._sanitizeUrl(e);const r=this._isServerRsrc(e)?"server":"portal";if(t){for(const i of this.credentials)if(this._hasSameServerInstance(i.server,e)&&t===i.userId&&i.scope===r){s=i;break}}else for(const i of this.credentials)if(this._hasSameServerInstance(i.server,e)&&-1!==this._getIdenticalSvcIdx(e,i)&&i.scope===r){s=i;break}return s}getCredential(e,t){let s,r,i$1=!0;t&&(s=!!t.token,r=t.error,i$1=!1!==t.prompt),t={...t},e=this._sanitizeUrl(e);const o=h$u(),n=B$4();if(t.signal&&v$9(t.signal,(()=>{o.abort();})),v$9(o,(()=>{n.reject(new s$x("identity-manager:user-aborted","ABORTED"));})),b$b(o))return n.promise;t.signal=o.signal;const h=this._isAdminResource(e),c=s?this.findCredential(e):null;let d;if(c&&r&&r.details&&498===r.details.httpStatus)c.destroy();else if(c)return d=new s$x("identity-manager:not-authorized","You are currently signed in as: '"+c.userId+"'. You do not have access to this resource: "+e,{error:r}),n.reject(d),n.promise;const u=this._findCredential(e,t);if(u)return n.resolve(u),n.promise;let p=this.findServerInfo(e);if(p)!p.hasServer&&this._isServerRsrc(e)&&(p._restInfoPms=this._getTokenSvcUrl(e),p.hasServer=!0);else {const t=this._getTokenSvcUrl(e);if(!t)return d=new s$x("identity-manager:unknown-resource","Unknown resource - could not find token service endpoint."),n.reject(d),n.promise;p=new i,p.server=this._getServerInstanceRoot(e),"string"==typeof t?(p.tokenServiceUrl=t,p.hasPortal=!0):(p._restInfoPms=t,p.hasServer=!0),this.registerServers([p]);}return p.hasPortal&&void 0===p._selfReq&&(i$1||E$4(p.tokenServiceUrl,window.location.origin)||this._gwDomains.some((e=>e.tokenServiceUrl===p.tokenServiceUrl)))&&(p._selfReq={owningTenant:t&&t.owningTenant,selfDfd:this._getPortalSelf(p.tokenServiceUrl.replace(this._rePortalTokenSvc,"/sharing/rest/portals/self"),e)}),this._enqueue(e,p,t,n,h)}getResourceName(e){return this._isRESTService(e)?e.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(e)&&e.replace(this._gwUser,"$1")||this._gwItem.test(e)&&e.replace(this._gwItem,"$1")||this._gwGroup.test(e)&&e.replace(this._gwGroup,"$1")||""}generateToken(e,t,s){const r=this._rePortalTokenSvc.test(e.tokenServiceUrl),i=new $$2(window.location.href.toLowerCase()),o=e.shortLivedTokenValidity;let n,h,d,u,p,_,f,g;t&&(g=this.tokenValidity||o||this.defaultTokenValidity,g>o&&o>0&&(g=o)),s&&(n=s.isAdmin,h=s.serverUrl,d=s.token,_=s.signal,f=s.ssl,e.customParameters=s.customParameters),n?u=e.adminTokenServiceUrl:(u=e.tokenServiceUrl,p=new $$2(u.toLowerCase()),e.webTierAuth&&s&&s.serverUrl&&!f&&"http"===i.scheme&&(E$4(i.uri,u,!0)||"https"===p.scheme&&i.host===p.host&&"7080"===i.port&&"7443"===p.port)&&(u=u.replace(/^https:/i,"http:").replace(/:7443/i,":7080")));const m={query:{request:"getToken",username:null==t?void 0:t.username,password:null==t?void 0:t.password,serverUrl:h,token:d,expiration:g,referer:n||r?window.location.host:null,client:n?"referer":null,f:"json",...e.customParameters},method:"post",authMode:"anonymous",useProxy:this._useProxy(e,s),signal:_,...null==s?void 0:s.ioArgs};r||(m.withCredentials=!1);return U$1(u,m).then((s=>{const r=s.data;if(!r||!r.token)return new s$x("identity-manager:authentication-failed","Unable to generate token");const i=e.server;return R[i]||(R[i]={}),t&&(R[i][t.username]=t.password),r.validity=g,r}))}isBusy(){return !!this._busy}checkSignInStatus(e){return this.checkAppAccess(e,"").then((e=>e.credential))}checkAppAccess(e,t,s){let r=!1;return this.getCredential(e,{prompt:!1}).then((i=>{let o;const n={f:"json"};if("portal"===i.scope)if(t&&(this._doPortalSignIn(e)||s&&s.force))o=i.server+"/sharing/rest/oauth2/validateAppAccess",n.client_id=t;else {if(!i.token)return {credential:i};o=i.server+"/sharing/rest";}else {if(!i.token)return {credential:i};o=i.server+"/rest/services";}return i.token&&(n.token=i.token),U$1(o,{query:n,authMode:"anonymous"}).then((e=>{if(!1===e.data.valid)throw new s$x("identity-manager:not-authorized",`You are currently signed in as: '${i.userId}'.`,e.data);return r=!!e.data.viewOnlyUserTypeApp,{credential:i}})).catch((e=>{if("identity-manager:not-authorized"===e.name)throw e;const t=e.details&&e.details.httpStatus;if(498===t)throw i.destroy(),new s$x("identity-manager:not-authenticated","User is not signed in.");if(400===t)throw new s$x("identity-manager:invalid-request");return {credential:i}}))})).then((e=>({credential:e.credential,viewOnly:r})))}setOAuthResponseHash(e){var t;const s=this._oAuthDfd;if(this._oAuthDfd=null,!s||!e)return;clearInterval(this._oAuthIntervalId),null==(t=this._oAuthOnHashHandle)||t.remove(),"#"===e.charAt(0)&&(e=e.substring(1));const r=b$d(e);if(r.error){const e="access_denied"===r.error,t=new s$x(e?"identity-manager:user-aborted":"identity-manager:authentication-failed",e?"ABORTED":"OAuth: "+r.error+" - "+r.error_description);s.reject(t);}else {const e=s.sinfo_,t=s.oinfo_,i=t._oAuthCred,o=new q({userId:r.username,server:e.server,token:r.access_token,expires:Date.now()+1e3*Number(r.expires_in),ssl:"true"===r.ssl,_oAuthCred:i});t.userId=o.userId,i.storage=r.persist?C:D,i.token=o.token,i.expires=o.expires,i.userId=o.userId,i.ssl=o.ssl,i.save(),s.resolve(o);}}setOAuthRedirectionHandler(e){this._oAuthRedirectFunc=e;}setProtocolErrorHandler(e){this._protocolFunc=e;}signIn(e,t,s={}){const r=B$4(),i=()=>{var e,t,s,r,i;null==(e=h)||e.remove(),null==(t=l)||t.remove(),null==(s=c)||s.remove(),null==(r=n)||r.destroy(),null==(i=this.dialog)||i.destroy(),this.dialog=n=h=l=c=null;},o=()=>{i(),this._oAuthDfd=null,r.reject(new s$x("identity-manager:user-aborted","ABORTED"));};s.signal&&v$9(s.signal,(()=>{o();}));let n=new this.formConstructor;n.resource=this.getResourceName(e),n.server=t.server,this.dialog=new p$1,this.dialog.content=n,this.dialog.open=!0,this.emit("dialog-create");let h=n.on("cancel",o),l=this.dialog.watch("open",o),c=n.on("submit",(e=>{this.generateToken(t,e,{isAdmin:s.isAdmin,signal:s.signal}).then((o=>{i();const n=new q({userId:e.username,server:t.server,token:o.token,expires:null!=o.expires?Number(o.expires):null,ssl:!!o.ssl,isAdmin:s.isAdmin,validity:o.validity});r.resolve(n);})).catch((e=>{n.error=e,n.signingIn=!1;}));}));return r.promise}oAuthSignIn(e,t,s,r){this._oAuthDfd=B$4();const i=this._oAuthDfd;null!=r&&r.signal&&v$9(r.signal,(()=>{const e=this._oAuthDfd&&this._oAuthDfd.oAuthWin_;e&&!e.closed?e.close():this.dialog&&h();})),i.resUrl_=e,i.sinfo_=t,i.oinfo_=s;const o=!r||!1!==r.oAuthPopupConfirmation;if(!s.popup||!o)return this._doOAuthSignIn(e,t,s),i.promise;const n=new this.formConstructor;n.oAuthPrompt=!0,n.server=t.server,this.dialog=new p$1,this.dialog.content=n,this.dialog.open=!0,this.emit("dialog-create");const h=()=>{u(),this._oAuthDfd=null,i.reject(new s$x("identity-manager:user-aborted","ABORTED"));},l=n.on("cancel",h),c=this.dialog.watch("open",h),d=n.on("submit",(()=>{u(),this._doOAuthSignIn(e,t,s);})),u=()=>{l.remove(),c.remove(),d.remove(),n.destroy(),this.dialog.destroy(),this.dialog=null;};return i.promise}destroyCredentials(){if(this.credentials){this.credentials.slice().forEach((e=>{e.destroy();}));}this.emit("credentials-destroy");}enablePostMessageAuth(e="https://www.arcgis.com/sharing/rest"){this._postMessageAuthHandle&&this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=r$r(window,"message",(t=>{var s;if((t.origin===window.location.origin||t.origin.endsWith(".arcgis.com"))&&"arcgis:auth:requestCredential"===(null==(s=t.data)?void 0:s.type)){const s=t.source;this.getCredential(e).then((e=>{s.postMessage({type:"arcgis:auth:credential",credential:{expires:e.expires,server:e.server,ssl:e.ssl,token:e.token,userId:e.userId}},t.origin);})).catch((e=>{s.postMessage({type:"arcgis:auth:error",error:{name:e.name,message:e.message}},t.origin);}));}}));}disablePostMessageAuth(){this._postMessageAuthHandle&&(this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=null);}_getOAuthHash(){let e=window.location.hash;if(e){"#"===e.charAt(0)&&(e=e.substring(1));const t=b$d(e);let s=!1;if(t.access_token&&t.expires_in&&t.state&&t.hasOwnProperty("username"))try{t.state=JSON.parse(t.state),"object"==typeof t.state&&t.state.portalUrl&&(this._oAuthHash=t,s=!0);}catch{}else t.error&&t.error_description&&(console.log("IdentityManager OAuth Error: ",t.error," - ",t.error_description),"access_denied"===t.error&&(s=!0));s&&(window.location.hash="object"==typeof t.state&&t.state.hash||"");}}_pageShowHandler(e){if(e.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow){const e=new s$x("identity-manager:user-aborted","ABORTED");this._errbackFunc(e);}}_findCredential(e,t){let s,r,i,o,n=-1;const a=t&&t.token,h=t&&t.resource,l=this._isServerRsrc(e)?"server":"portal",c=this.credentials.filter((t=>this._hasSameServerInstance(t.server,e)&&t.scope===l));if(e=h||e,c.length)if(1===c.length){if(s=c[0],o=this.findServerInfo(s.server),r=o&&o.owningSystemUrl,i=r&&this.findCredential(r,s.userId),n=this._getIdenticalSvcIdx(e,s),!a)return -1===n&&s.resources.push(e),this._addResource(e,i),s;-1!==n&&(s.resources.splice(n,1),this._removeResource(e,i));}else {let t,s;if(c.some((a=>(s=this._getIdenticalSvcIdx(e,a),-1!==s&&(t=a,o=this.findServerInfo(t.server),r=o&&o.owningSystemUrl,i=r&&this.findCredential(r,t.userId),n=s,!0)))),a)t&&(t.resources.splice(n,1),this._removeResource(e,i));else if(t)return this._addResource(e,i),t}}_findOAuthInfo(e){let t=this.findOAuthInfo(e);if(!t)for(const s of this.oAuthInfos)if(this._isIdProvider(s.portalUrl,e)){t=s;break}return t}_addResource(e,t){t&&-1===this._getIdenticalSvcIdx(e,t)&&t.resources.push(e);}_removeResource(e,t){let s=-1;t&&(s=this._getIdenticalSvcIdx(e,t),s>-1&&t.resources.splice(s,1));}_useProxy(e,t){return t&&t.isAdmin&&!E$4(e.adminTokenServiceUrl,window.location.href)||!this._isPortalDomain(e.tokenServiceUrl)&&"10.1"===String(e.currentVersion)&&!E$4(e.tokenServiceUrl,window.location.href)}_getOrigin(e){const t=new $$2(e);return t.scheme+"://"+t.host+(null!=t.port?":"+t.port:"")}_getServerInstanceRoot(e){const t=e.toLowerCase();let s=t.indexOf(this._agsRest);return -1===s&&this._isAdminResource(e)&&(s=this._agsAdmin.test(e)?e.replace(this._agsAdmin,"$1").length:e.search(this._adminSvcs)),-1===s&&(s=t.indexOf("/sharing")),-1===s&&"/"===t.substr(-1)&&(s=t.length-1),s>-1?e.substring(0,s):e}_hasSameServerInstance(e,t){return "/"===e.substr(-1)&&(e=e.slice(0,-1)),e=e.toLowerCase(),t=this._getServerInstanceRoot(t).toLowerCase(),e=this._normalizeAGOLorgDomain(e),t=this._normalizeAGOLorgDomain(t),(e=e.substr(e.indexOf(":")))===(t=t.substr(t.indexOf(":")))}_normalizeAGOLorgDomain(e){const t=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,s=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,r=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return t.test(e)?e=e.replace(t,"https://www.arcgis.com"):s.test(e)?e=e.replace(s,"https://devext.arcgis.com"):r.test(e)&&(e=e.replace(r,"https://qaext.arcgis.com")),e}_sanitizeUrl(e){const t=(s$H.request.proxyUrl||"").toLowerCase(),s=t?e.toLowerCase().indexOf(t+"?"):-1;return -1!==s&&(e=e.substring(s+t.length+1)),e=z$6(e),U$4(e).path}_isRESTService(e){return e.indexOf(this._agsRest)>-1}_isAdminResource(e){return this._agsAdmin.test(e)||this._adminSvcs.test(e)}_isServerRsrc(e){return this._isRESTService(e)||this._isAdminResource(e)}_isIdenticalService(e,t){let s;if(this._isRESTService(e)&&this._isRESTService(t)){const r=this._getSuffix(e).toLowerCase(),i=this._getSuffix(t).toLowerCase();if(s=r===i,!s){const e=/(.*)\/(MapServer|FeatureServer).*/gi;s=r.replace(e,"$1")===i.replace(e,"$1");}}else this._isAdminResource(e)&&this._isAdminResource(t)?s=!0:this._isServerRsrc(e)||this._isServerRsrc(t)||!this._isPortalDomain(e)||(s=!0);return s}_isPortalDomain(e){const t=new $$2(e.toLowerCase()),s=this._portalConfig;let r=this._gwDomains.some((e=>e.regex.test(t.uri)));return !r&&s&&(r=this._hasSameServerInstance(this._getServerInstanceRoot(s.restBaseUrl),t.uri)),r||s$H.portalUrl&&(r=E$4(t,s$H.portalUrl,!0)),r||(r=this._portals.some((e=>this._hasSameServerInstance(e,t.uri)))),r=r||this._agsPortal.test(t.path),r}_isIdProvider(e,t){let s=-1,r=-1;this._gwDomains.forEach(((i,o)=>{-1===s&&i.regex.test(e)&&(s=o),-1===r&&i.regex.test(t)&&(r=o);}));let i=!1;if(s>-1&&r>-1&&(0===s||4===s?0!==r&&4!==r||(i=!0):1===s?1!==r&&2!==r||(i=!0):2===s?2===r&&(i=!0):3===s&&3===r&&(i=!0)),!i){const s=this.findServerInfo(t),r=s&&s.owningSystemUrl;r&&b(s)&&this._isPortalDomain(r)&&this._isIdProvider(e,r)&&(i=!0);}return i}_getIdenticalSvcIdx(e,t){let s=-1;for(let r=0;r<t.resources.length;r++){const i=t.resources[r];if(this._isIdenticalService(e,i)){s=r;break}}return s}_getSuffix(e){return e.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")}_getTokenSvcUrl(e){let t,s,r;if(this._isRESTService(e)||this._isAdminResource(e)){const r=this._getServerInstanceRoot(e);return t=r+"/admin/generateToken",s=U$1(e=r+"/rest/info",{query:{f:"json"}}).then((e=>e.data)),{adminUrl:t,promise:s}}if(this._isPortalDomain(e)){let t="";if(this._gwDomains.some((s=>(s.regex.test(e)&&(t=s.tokenServiceUrl),!!t))),t||this._portals.some((s=>(this._hasSameServerInstance(s,e)&&(t=s+this._gwTokenUrl),!!t))),t||(r=e.toLowerCase().indexOf("/sharing"),-1!==r&&(t=e.substring(0,r)+this._gwTokenUrl)),t||(t=this._getOrigin(e)+this._gwTokenUrl),t){const s=new $$2(e).port;/^http:\/\//i.test(e)&&"7080"===s&&(t=t.replace(/:7080/i,":7443")),t=t.replace(/http:/i,"https:");}return t}if(-1!==e.toLowerCase().indexOf("premium.arcgisonline.com"))return "https://premium.arcgisonline.com/server/tokens"}_exchangeToken(e,t,s){return U$1(`${e}/sharing/rest/oauth2/exchangeToken`,{authMode:"anonymous",method:"post",query:{f:"json",client_id:t,token:s}}).then((e=>e.data.token))}_getPlatformSelf(e,t){return U$1(`${e}/sharing/rest/oauth2/platformSelf`,{authMode:"anonymous",headers:{"X-Esri-Auth-Client-Id":t,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")},method:"post",query:{f:"json"},withCredentials:!0}).then((e=>e.data))}_getPortalSelf(e,t){let s;if(this._gwDomains.some((t=>(t.regex.test(e)&&(s=t.customBaseUrl),!!s))),s)return Promise.resolve({allSSL:!0,currentVersion:"4.4",customBaseUrl:s,portalMode:"multitenant",supportsOAuth:!0});"https:"===window.location.protocol?e=e.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):/^http:/i.test(t)&&(e=e.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));return U$1(e,{query:{f:"json"},authMode:"anonymous",withCredentials:!0}).then((e=>e.data))}_doPortalSignIn(e){const t=this._portalConfig,s=window.location.href,r=this.findServerInfo(e);return !(!t&&!this._isPortalDomain(s)||!(r?r.hasPortal||r.owningSystemUrl&&this._isPortalDomain(r.owningSystemUrl):this._isPortalDomain(e))||!(this._isIdProvider(s,e)||t&&(this._hasSameServerInstance(this._getServerInstanceRoot(t.restBaseUrl),e)||this._isIdProvider(t.restBaseUrl,e))||E$4(s,e,!0)))}_checkProtocol(e,t,s,r){let i=!0;const o=r?t.adminTokenServiceUrl:t.tokenServiceUrl;if(0===o.trim().toLowerCase().indexOf("https:")&&0!==window.location.href.toLowerCase().indexOf("https:")&&A$b(o)&&(i=!!this._protocolFunc&&!!this._protocolFunc({resourceUrl:e,serverInfo:t}),!i)){s(new s$x("identity-manager:aborted","Aborted the Sign-In process to avoid sending password over insecure connection."));}return i}_enqueue(e,t,s,r,i,o){return r||(r=B$4()),r.resUrl_=e,r.sinfo_=t,r.options_=s,r.admin_=i,r.refresh_=o,this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(e),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(r)):this._xoReqs.push(r):this._doSignIn(r),r.promise}_doSignIn(e){this._busy=e,this._rejectOnPersistedPageShow=!1;const t=t=>{const s=e.options_&&e.options_.resource,r=e.resUrl_,i=e.refresh_;let o=!1;-1===this.credentials.indexOf(t)&&(i&&-1!==this.credentials.indexOf(i)?(i.userId=t.userId,i.token=t.token,i.expires=t.expires,i.validity=t.validity,i.ssl=t.ssl,i.creationTime=t.creationTime,o=!0,t=i):this.credentials.push(t)),t.resources||(t.resources=[]),t.resources.push(s||r),t.scope=this._isServerRsrc(r)?"server":"portal",t.emitTokenChange();const n=this._soReqs,a={};this._soReqs=[],n.forEach((e=>{if(!this._isIdenticalService(r,e.resUrl_)){const s=this._getSuffix(e.resUrl_);a[s]||(a[s]=!0,t.resources.push(e.resUrl_));}})),e.resolve(t),n.forEach((e=>{this._hasSameServerInstance(this._getServerInstanceRoot(r),e.resUrl_)?e.resolve(t):this._soReqs.push(e);})),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,o||this.emit("credential-create",{credential:t}),this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift());},s=t=>{e.reject(t),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift());},i=(r,i,o,n)=>{var h,c;const d=e.sinfo_,u=!e.options_||!1!==e.options_.prompt,p=d.hasPortal&&this._findOAuthInfo(e.resUrl_);let _,f;if(r)t(new q({userId:r,server:d.server,token:o||null,expires:null!=n?Number(n):null,ssl:!!i}));else if(window!==window.parent&&null!=(h=this._appUrlObj.query)&&h["arcgis-auth-origin"]&&null!=(c=this._appUrlObj.query)&&c["arcgis-auth-portal"]&&this._hasSameServerInstance(this._getServerInstanceRoot(this._appUrlObj.query["arcgis-auth-portal"]),e.resUrl_)){var m;window.parent.postMessage({type:"arcgis:auth:requestCredential"},this._appUrlObj.query["arcgis-auth-origin"]);const r=r$r(window,"message",(e=>{e.source===window.parent&&e.data&&("arcgis:auth:credential"===e.data.type?(r.remove(),t(new q(e.data.credential))):"arcgis:auth:error"===e.data.type&&(r.remove(),s(s$x.fromJSON(e.data.error))));}));v$9(null==(m=e.options_)?void 0:m.signal,(()=>{r.remove();}));}else if(p){let r=p._oAuthCred;if(!r){const e=new s$2(p,C),t=new s$2(p,D);e.isValid()&&t.isValid()?e.expires>t.expires?(r=e,t.destroy()):(r=t,e.destroy()):r=e.isValid()?e:t,p._oAuthCred=r;}if(r.isValid())_=new q({userId:r.userId,server:d.server,token:r.token,expires:r.expires,ssl:r.ssl,_oAuthCred:r}),p.appId!==r.appId&&this._doPortalSignIn(e.resUrl_)?e._pendingDfd=this._exchangeToken(_.server,p.appId,_.token).then((e=>{_.token=e,r.token=e,r.save(),t(_);})).catch((()=>{t(_);})):t(_);else if(this._oAuthHash&&this._hasSameServerInstance(p.portalUrl,this._oAuthHash.state.portalUrl)){const e=this._oAuthHash;_=new q({userId:e.username,server:d.server,token:e.access_token,expires:Date.now()+1e3*Number(e.expires_in),ssl:"true"===e.ssl,oAuthState:e.state,_oAuthCred:r}),p.userId=_.userId,r.storage=e.persist?C:D,r.token=_.token,r.expires=_.expires,r.userId=_.userId,r.ssl=_.ssl,r.save(),this._oAuthHash=null,t(_);}else {const r=()=>{u?e._pendingDfd=this.oAuthSignIn(e.resUrl_,d,p,e.options_).then(t,s):(f=new s$x("identity-manager:not-authenticated","User is not signed in."),s(f));};this._doPortalSignIn(e.resUrl_)?e._pendingDfd=this._getPlatformSelf(d.server,p.appId).then((({portalUrl:e,token:s,username:i})=>{!e||E$4(e,window.location.origin,!0)?(_=new q({server:d.server,userId:i,token:s}),t(_)):r();})).catch(r):r();}}else if(u){if(this._checkProtocol(e.resUrl_,d,s,e.admin_)){let r=e.options_;e.admin_&&(r=r||{},r.isAdmin=!0),e._pendingDfd=this.signIn(e.resUrl_,d,r).then(t,s);}}else f=new s$x("identity-manager:not-authenticated","User is not signed in."),s(f);},o=()=>{const r=e.sinfo_,i=r.owningSystemUrl,o=e.options_;let n,a,h,l;if(o&&(n=o.token,a=o.error,h=o.prompt),l=this._findCredential(i,{token:n,resource:e.resUrl_}),!l)for(const e of this.credentials)if(this._isIdProvider(i,e.server)){l=e;break}if(l){const i=this.findCredential(e.resUrl_,l.userId);if(i)t(i);else if(P(r,this._legacyFed)){const e=l.toJSON();e.server=r.server,e.resources=null,t(new q(e));}else {(e._pendingDfd=this.generateToken(this.findServerInfo(l.server),null,{serverUrl:e.resUrl_,token:l.token,signal:e.options_.signal,ssl:l.ssl})).then((s=>{t(new q({userId:l.userId,server:r.server,token:s.token,expires:null!=s.expires?Number(s.expires):null,ssl:!!s.ssl,isAdmin:e.admin_,validity:s.validity}));}),s);}}else {this._busy=null,n&&(e.options_.token=null);(e._pendingDfd=this.getCredential(i.replace(/\/?$/,"/sharing"),{resource:e.resUrl_,owningTenant:r.owningTenant,signal:e.options_.signal,token:n,error:a,prompt:h})).then((()=>{this._enqueue(e.resUrl_,e.sinfo_,e.options_,e,e.admin_);}),(e=>{s(e);}));}};this._errbackFunc=s;const n=e.sinfo_.owningSystemUrl,h=this._isServerRsrc(e.resUrl_),c=e.sinfo_._restInfoPms;c?c.promise.then((t=>{const s=e.sinfo_;if(s._restInfoPms){s.adminTokenServiceUrl=s._restInfoPms.adminUrl,s._restInfoPms=null,s.tokenServiceUrl=t$N("authInfo.tokenServicesUrl",t)||t$N("authInfo.tokenServiceUrl",t)||t$N("tokenServiceUrl",t),s.shortLivedTokenValidity=t$N("authInfo.shortLivedTokenValidity",t),s.currentVersion=t.currentVersion,s.owningTenant=t.owningTenant;const e=s.owningSystemUrl=t.owningSystemUrl;e&&this._portals.push(e);}h&&s.owningSystemUrl?o():i();}),(()=>{e.sinfo_._restInfoPms=null;const t=new s$x("identity-manager:server-identification-failed","Unknown resource - could not find token service endpoint.");s(t);})):h&&n?o():e.sinfo_._selfReq?e.sinfo_._selfReq.selfDfd.then((t=>{const s={};let r,i,o,n;return t&&(r=t.user&&t.user.username,s.username=r,s.allSSL=t.allSSL,i=t.supportsOAuth,o=t.currentVersion,"multitenant"===t.portalMode&&(n=t.customBaseUrl)),e.sinfo_.webTierAuth=!!r,r&&this.normalizeWebTierAuth?this.generateToken(e.sinfo_,null,{ssl:s.allSSL}).catch((()=>null)).then((e=>(s.portalToken=e&&e.token,s.tokenExpiration=e&&e.expires,s))):!r&&i&&parseFloat(o)>=4.4&&!this._findOAuthInfo(e.resUrl_)?this._generateOAuthInfo({portalUrl:e.sinfo_.server,customBaseUrl:n,owningTenant:e.sinfo_._selfReq.owningTenant}).catch((()=>null)).then((()=>s)):s})).catch((()=>null)).then((t=>{e.sinfo_._selfReq=null,t?i(t.username,t.allSSL,t.portalToken,t.tokenExpiration):i();})):i();}_generateOAuthInfo(e){let t,s,r=e.portalUrl;const i=e.customBaseUrl,o=e.owningTenant,n=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal;if(n){s=window.location.href;let e=s.indexOf("?");e>-1&&(s=s.slice(0,e)),e=s.search(/\/(apps|home)\//),s=e>-1?s.slice(0,e):null;}return n&&s?(this._hasTestedIfAppIsOnPortal=!0,t=U$1(s+"/sharing/rest",{query:{f:"json"}}).then((()=>{this.defaultOAuthInfo=new i$1({appId:"arcgisonline",popupCallbackUrl:s+"/home/oauth-callback.html"});}))):t=Promise.resolve(),t.then((()=>{if(this.defaultOAuthInfo)return r=r.replace(/^http:/i,"https:"),U$1(r+"/sharing/rest/oauth2/validateRedirectUri",{query:{accountId:o,client_id:this.defaultOAuthInfo.appId,redirect_uri:T$6(this.defaultOAuthInfo.popupCallbackUrl),f:"json"}}).then((e=>{if(e.data.valid){const t=this.defaultOAuthInfo.clone();e.data.urlKey&&i?t.portalUrl="https://"+e.data.urlKey.toLowerCase()+"."+i:t.portalUrl=r,t.popup=window!==window.top||!(E$4(r,window.location.origin)||this._gwDomains.some((e=>e.regex.test(r)&&e.regex.test(window.location.origin)))),this.oAuthInfos.push(t);}}))}))}_doOAuthSignIn(e,s,r){const i={portalUrl:r.portalUrl};!r.popup&&r.preserveUrlHash&&window.location.hash&&(i.hash=window.location.hash);const o={client_id:r.appId,response_type:"token",state:JSON.stringify(i),expiration:r.expiration,locale:r.locale,redirect_uri:r.popup?T$6(r.popupCallbackUrl):window.location.href.replace(/#.*$/,"")};r.forceLogin&&(o.force_login=!0),r.forceUserId&&r.userId&&(o.prepopulatedusername=r.userId),!r.popup&&this._doPortalSignIn(e)&&(o.redirectToUserOrgUrl=!0);const n=r.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize",h=n+"?"+C$9(o);if(r.popup){const e=window.open(h,"esriJSAPIOAuth",r.popupWindowFeatures);if(e)e.focus(),this._oAuthDfd.oAuthWin_=e,this._oAuthIntervalId=setInterval((()=>{if(e.closed){clearInterval(this._oAuthIntervalId),this._oAuthOnHashHandle.remove();const e=this._oAuthDfd;if(e){const t=new s$x("identity-manager:user-aborted","ABORTED");e.reject(t);}}}),500),this._oAuthOnHashHandle=r$r(_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.e,"arcgis:auth:hash",(e=>{this.setOAuthResponseHash(e.detail);}));else {const e=new s$x("identity-manager:popup-blocked","ABORTED");this._oAuthDfd.reject(e);}}else this._rejectOnPersistedPageShow=!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:o,authorizeUrl:n,resourceUrl:e,serverInfo:s,oAuthInfo:r}):window.location.href=h;}};j=e$u([i$X("esri.identity.IdentityManagerBase")],j);let q=class extends n$F.EventedAccessor{constructor(e){super(e),this._oAuthCred=null,this.tokenRefreshBuffer=2,e&&e._oAuthCred&&(this._oAuthCred=e._oAuthCred);}initialize(){this.resources=this.resources||[],null==this.creationTime&&(this.creationTime=Date.now());}refreshToken(){const e=s$r.findServerInfo(this.server),t=e&&e.owningSystemUrl,s=!!t&&"server"===this.scope,r=s&&P(e,s$r._legacyFed),i=e.webTierAuth,o=i&&s$r.normalizeWebTierAuth,n=R[this.server],a=n&&n[this.userId];let h,l=this.resources&&this.resources[0],c=s&&s$r.findServerInfo(t),d={username:this.userId,password:a};if(i&&!o)return;s&&!c&&s$r.serverInfos.some((e=>(s$r._isIdProvider(t,e.server)&&(c=e),!!c)));const u=c&&s$r.findCredential(c.server,this.userId);if(!s||u){if(!r){if(s)h={serverUrl:l,token:u&&u.token,ssl:u&&u.ssl};else if(o)d=null,h={ssl:this.ssl};else {if(!a){let t;return l&&(l=s$r._sanitizeUrl(l),this._enqueued=1,t=s$r._enqueue(l,e,null,null,this.isAdmin,this),t.then((()=>{this._enqueued=0,this.refreshServerTokens();})).catch((()=>{this._enqueued=0;}))),t}this.isAdmin&&(h={isAdmin:!0});}return s$r.generateToken(s?c:e,s?null:d,h).then((e=>{this.token=e.token,this.expires=null!=e.expires?Number(e.expires):null,this.creationTime=Date.now(),this.validity=e.validity,this.emitTokenChange(),this.refreshServerTokens();})).catch((()=>{}))}u.refreshToken();}}refreshServerTokens(){"portal"===this.scope&&s$r.credentials.forEach((e=>{const t=s$r.findServerInfo(e.server),s=t&&t.owningSystemUrl;e!==this&&e.userId===this.userId&&s&&"server"===e.scope&&(s$r._hasSameServerInstance(this.server,s)||s$r._isIdProvider(s,this.server))&&(P(t,s$r._legacyFed)?(e.token=this.token,e.expires=this.expires,e.creationTime=this.creationTime,e.validity=this.validity,e.emitTokenChange()):e.refreshToken());}));}emitTokenChange(e){clearTimeout(this._refreshTimer);const t=this.server&&s$r.findServerInfo(this.server),s=t&&t.owningSystemUrl,r=s&&s$r.findServerInfo(s);!1===e||s&&"portal"!==this.scope&&(!r||!r.webTierAuth||s$r.normalizeWebTierAuth)||null==this.expires&&null==this.validity||this._startRefreshTimer(),this.emit("token-change");}destroy(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null,this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);const e=s$r.credentials.indexOf(this);e>-1&&s$r.credentials.splice(e,1),this.emitTokenChange(),this.emit("destroy");}toJSON(){const e=p$18({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),t=this.resources;return t&&t.length>0&&(e.resources=t.slice()),e}_startRefreshTimer(){clearTimeout(this._refreshTimer);const e=6e4*this.tokenRefreshBuffer,t=2**31-1;let s=(this.validity?this.creationTime+6e4*this.validity:this.expires)-Date.now();s<0?s=0:s>t&&(s=t),this._refreshTimer=setTimeout(this.refreshToken.bind(this),s>e?s-e:s);}};e$u([y$r()],q.prototype,"creationTime",void 0),e$u([y$r()],q.prototype,"expires",void 0),e$u([y$r()],q.prototype,"isAdmin",void 0),e$u([y$r()],q.prototype,"oAuthState",void 0),e$u([y$r()],q.prototype,"resources",void 0),e$u([y$r()],q.prototype,"scope",void 0),e$u([y$r()],q.prototype,"server",void 0),e$u([y$r()],q.prototype,"ssl",void 0),e$u([y$r()],q.prototype,"token",void 0),e$u([y$r()],q.prototype,"tokenRefreshBuffer",void 0),e$u([y$r()],q.prototype,"userId",void 0),e$u([y$r()],q.prototype,"validity",void 0),q=e$u([i$X("esri.identity.Credential")],q);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
let o=class extends j{};o=e$u([i$X("esri.identity.IdentityManager")],o);const a=new o;n$E(a);

const IdentityManager = /*#__PURE__*/Object.freeze({
    __proto__: null,
    'default': a
});

const amd = "define" in window && typeof window.define === 'function' && "amd" in window.define;
function invokeTaskMethod(task, url, createParams, readResponse) {
  const _deferred = (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.c)();
  function onComplete(response) {
    let result;
    try {
      result = readResponse(response);
    }
    catch (e) {
      onError(e);
      return;
    }
    _deferred.resolve(result);
  }
  function onError(error) {
    _deferred.reject(error);
  }
  try {
    const restParams = createParams ? createParams() : {};
    restParams.f = restParams.f || "json";
    getCredential(task.url).then((credential) => {
      if (credential === null || credential === void 0 ? void 0 : credential.token) {
        restParams.token = credential.token;
      }
      U$1(task.url + url, {
        query: restParams,
        responseType: "json"
      }).then(onComplete, onError);
    });
  }
  catch (e) {
    onError(e);
  }
  return _deferred.promise;
}
async function requireModule(modulePath) {
  return new Promise((resolve) => window.require([modulePath], (moduleDefault) => {
    resolve(moduleDefault);
  }));
}
async function getIdentityManager() {
  return requireModule("esri/identity/IdentityManager");
}
async function getCredential(url) {
  if (amd) {
    const amdIdentityManager = await getIdentityManager();
    const credential = await amdIdentityManager.getCredential(url, { oAuthPopupConfirmation: false });
    return credential;
  }
  else {
    const credential = await a.getCredential(url, { oAuthPopupConfirmation: false });
    return credential;
  }
}
/**
 * Copies the json object into the optional rest object.
 * @param json Object to copy.
 * @param rest Default 'rest' parameter.
 */
function jsonToRest(json, rest) {
  rest = Object.assign({}, rest);
  for (const p in json) {
    if (typeof json[p] === "string") {
      rest[p] = json[p];
    }
    else {
      const value = json[p];
      rest[p] = JSON.stringify(ensureSerialized(value));
    }
  }
  return rest;
}
function ensureSerialized(object) {
  return typeof object.toJSON === "function" ? object.toJSON() : object;
}
function throwEmptyTaskResponse() {
  throw new Error("Geoenrichment service returned empty response");
}

/**
 * Executes Geoenrichment methods.
 */
function getCenter(geometry) {
  const extent = geometry.extent;
  return new j$b({
    x: (extent.xmin + extent.xmax) / 2,
    y: (extent.ymin + extent.ymax) / 2,
    spatialReference: extent.spatialReference
  });
}
class GeoenrichmentTask {
  constructor(url, token) {
    // The url parameter can contain static query parameters such as appID, langCode.
    // We extract these parameters from the URL and pass them later in all requests to Geoenrichment server.
    if (url) {
      const urlObj = U$4(url);
      url = urlObj.path;
      this._query = mixin({
        langCode: (0,_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.b)()
      }, urlObj.query || {});
      // always pass token to the Geoenrichment server
      if (token) {
        this._query.token = token;
      }
    }
    const protocol = "https:"; // always HTTPS
    this.url = url || protocol + "//geoenrich.arcgis.com/arcgis/rest/services/World/GeoenrichmentServer";
    this.token = token;
  }
  //--------------------------------------------------------------------------
  //
  // Enrich
  //
  //--------------------------------------------------------------------------
  /**
   * Calculates contextual data such as demographic characteristics about input study areas
   * @param params EnrichParameters. Parameters for the enrich operation. See EnrichParameters class for full list of available parameters.
   *
   * @returns Promise => { featureSets: [] of FeatureSet, message: string }.
   *
   * @example
   *
   * var task = new GeoenrichmentTask();
   *     task.enrich({
   *         studyAreas: [{ geometry: { x: -117.1956, y: 34.0572 } }],
   *         studyAreaOptions: new DriveBuffer({ radii: [5, 10, 15] }), // minutes by default
   *         variables: ["Wealth.MEDNW_CY", "KeyUSFacts.*"]
   *     }).then(function(result) {
   *         // process result here
   *     }, function(error) {
   *         // handle error here
   *     });
   */
  enrich(params) {
    return invokeTaskMethod(this, "/Geoenrichment/enrich", () => jsonToRest(params instanceof EnrichParameters ? params.toJSON() : new EnrichParameters(params).toJSON(), this._query), (response) => {
      const data = response.data;
      if (!data.results ||
        data.results.length < 1 ||
        !data.results[0].value ||
        !data.results[0].value.FeatureSet ||
        data.results[0].value.FeatureSet.length < 1) {
        throwEmptyTaskResponse();
      }
      const result = {
        featureSets: [],
        messages: data.messages
      };
      const featureSets = data.results[0].value.FeatureSet;
      for (let i = 0; i < featureSets.length; i++) {
        result.featureSets.push(new GEFeatureSet(featureSets[i]));
      }
      return result;
    });
  }
  //--------------------------------------------------------------------------
  //
  // Data collections
  //
  //--------------------------------------------------------------------------
  /**
   * Gets the list of available data collections. Each data collection consists of a set of variables.
   * @param countryID String. Optional. Two-digit code of country of interest. If not provided, the method will only return those data collections that span the whole world.
   * @param dataCollectionID String. Optional. Useful to get information about one specific data collection.
   * @param outFields String[] | "*". Optional. List of metadata fields to return for each variable. Useful to optimize response size. If not provided, the method will return all metadata fields.
   * @param derivativeVariablesToAdd String[]. Optional. Array of derivative variable types to be added to requested data collections. It could contain the following values:
   *  - "percent" Add derivative variables providing a percentage value.
   *  - "average" Add derivative variables providing an average value.
   *  - "index"   Add derivative variables providing an index value.
   *  - "all"     Add all derivative variables.
   *
   * @returns Promise => [] of data collections.
   *
   * @example
   * var task = new GeoenrichmentTask();
   *     task.getDataCollections("GB").then(function(dataCollections) {
   *         // process result here
   *     }, function(error) {
   *         // handle error here
   *     });
   */
  getDataCollections(countryID, dataCollectionID, outFields, derivativeVariablesToAdd) {
    let url;
    if (dataCollectionID) {
      url = "/GetDataCollections/execute";
    }
    else {
      url = "/Geoenrichment/DataCollections";
      if (countryID) {
        url += "/" + countryID;
      }
    }
    return invokeTaskMethod(this, url, () => {
      const restParams = Object.assign({}, this._query);
      restParams.suppressNullValues = true;
      if (outFields) {
        if (outFields.length === 0) {
          restParams.outFields = "none";
        }
        else {
          restParams.outFields = JSON.stringify(outFields);
        }
      }
      if (dataCollectionID) {
        if (countryID) {
          restParams.sourcecountry = countryID;
        }
        restParams.searchtext = "id:" + dataCollectionID;
      }
      if (derivativeVariablesToAdd) {
        restParams.addDerivativeVariables = JSON.stringify(derivativeVariablesToAdd);
      }
      return restParams;
    }, (response) => {
      const data = response.data;
      if (data.error) {
        throw data.error;
      }
      return data.results || data.dataCollections || data.DataCollections;
    });
  }
  //--------------------------------------------------------------------------
  //
  // Reports
  //
  //--------------------------------------------------------------------------
  /**
   * Gets the list of reports available for specified country
   * @param countryID String. Required. Two-digit code of country of interest.
   *
   * @returns Promise => [] of reports.
   */
  getReports(countryID) {
    return invokeTaskMethod(this, "/Geoenrichment/Reports/" + countryID, () => (Object.assign({}, this._query)), (response) => response.data.reports);
  }
  //--------------------------------------------------------------------------
  //
  // Countries
  //
  //--------------------------------------------------------------------------
  /**
   * Gets the list of many countries Geoenrichment has data for.
   *
   * @returns Promise => [] of countries.
   */
  getAvailableCountries() {
    return invokeTaskMethod(this, "/Geoenrichment/Countries", () => (Object.assign({}, this._query)), (response) => {
      const data = response.data;
      if (data.error) {
        throw data.error;
      }
      return data.countries;
    });
  }
  /**
   * Determines country the given geometry belongs to.
   * @param geometry Geometry.
   *
   * @returns A promise of array of countries. The first item in this array the the country of interest.
   */
  getCountries(geometry) {
    let center;
    switch (geometry.type) {
      case "point":
        center = geometry;
        break;
      case "polyline":
        //
        //Pick one segment from the geometry and obtain its center
        //
        const path = geometry.paths[0];
        const polyline = new m$m({
          spatialReference: geometry.spatialReference
        });
        polyline.addPath(path);
        center = getCenter(polyline);
        break;
      case "polygon":
        //
        //Pick one ring from the geometry and obtain its center
        //
        const ring = geometry.rings[0];
        const polygon = new x$4({
          spatialReference: geometry.spatialReference
        });
        polygon.addRing(ring);
        center = getCenter(polygon);
        break;
    }
    return this.enrich(new EnrichParameters({
      analysisVariables: ["GlobalIntersect.*"],
      studyAreas: [{ geometry: center }],
      forStorage: false
    })).then((enrichResult) => {
      const countries = [];
      const features = enrichResult.featureSets[0].features;
      for (let i = 0; i < features.length; i++) {
        const countryID = features[i].attributes.sourceCountry;
        if (countries.indexOf(countryID) < 0) {
          countries.push(countryID);
        }
      }
      if (countries.length === 0) {
        throw new Error("There is no data for the selected area.");
      }
      return countries;
    });
  }
  //--------------------------------------------------------------------------
  //
  // Data layers
  //
  //--------------------------------------------------------------------------
  getDataLayerInfos(countryID) {
    return invokeTaskMethod(this, "/Geoenrichment/DataLayers" + countryID, () => (Object.assign({}, this._query)), (response) => response.data.layers);
  }
  getDataLayerInfo(countryID, layerID) {
    return invokeTaskMethod(this, "/Geoenrichment/DataLayers" + countryID + "/" + layerID, () => (Object.assign({}, this._query)), (response) => response.data.layer);
  }
}

const NumberState = "n_", PercentState = "p_", AverageState = "a_", IndexState = "i_", suffixCache = { n_: "", p_: " (%)", a_: " (avg)", i_: " (index)" }, statesCache = {
  n_p_: { labels: ["#", "%"], names: ["n_", "p_"], ids: null },
  n_a_: { labels: ["#", "Avg"], names: ["n_", "a_"], ids: null },
  n_i_: { labels: ["#", "Index"], names: ["n_", "i_"], ids: null },
  n_p_i_: { labels: ["#", "%", "Index"], names: ["n_", "p_", "i_"], ids: null },
  n_a_i_: { labels: ["#", "Avg", "Index"], names: ["n_", "a_", "i_"], ids: null }
};
class DerivativeVariables {
  setCache(variables) {
    this._variables = variables;
  }
  get(id) {
    if (!id) {
      return null;
    }
    const parsedId = this._parseId(id);
    let variable = this._variables[parsedId.id];
    if (variable && parsedId.state !== NumberState) {
      // Create a virtual variable
      variable = {
        fullName: id,
        alias: variable.alias + suffixCache[parsedId.state],
        description: variable.description + suffixCache[parsedId.state]
      };
    }
    return variable;
  }
  getStates(id) {
    id = id && this._parseId(id).id; // Get id without prefix
    const variable = this._variables[id];
    if (!variable) {
      return null;
    }
    let statesId = NumberState;
    if (variable.percentBase) {
      statesId += PercentState;
    }
    if (variable.averageBase) {
      statesId += AverageState;
    }
    if (Number(variable.indexBase)) {
      statesId += IndexState;
    }
    let states = statesCache[statesId];
    if (states) {
      states = Object.assign({}, states); // Create shallow copy
      states.ids = states.names.map((name) => name + id);
    }
    return states || null;
  }
  _parseId(id) {
    const state = id.substr(0, 2);
    return suffixCache.hasOwnProperty(state) ? { id: id.substr(2), state } : { id, state: NumberState };
  }
}

class KeywordFilter {
  //-----------------------------------------------------------
  // Constructor
  //-----------------------------------------------------------
  // Ctor.
  // searchString: String
  //      A search string containing comma and/or space separated keywords.
  // searchFields: String | String[]
  //      A field or an array of fields to search in.
  //      If it is missing, the text fields of a variable are used.
  constructor(searchString, searchFields) {
    this.isKeywordFilter = true;
    this.searchString = "";
    this.delimiters = /[\s;,\/?:@&=\$#'%"`~!^\(\)\[\]\{\}\\*|\u0000-\u001f\u007f-\u009f\u2000-\u2bff\ud800-\uffff]+/;
    this.totalCount = 0;
    this.bitIndex = 0;
    this.matchCount = 0;
    this.update(searchString);
    this.searchFields = !searchFields
      ? ["alias", "description", "fieldCategory"]
      : typeof searchFields === "string"
        ? [searchFields]
        : searchFields;
  }
  //-----------------------------------------------------------
  // update
  //-----------------------------------------------------------
  // Updates the filter with a new search string
  update(searchString) {
    this.searchString = (searchString && searchString.trim()) || "";
    this._keywords =
      !this.searchString || this.searchString === "*" ? null : this.searchString.toLowerCase().split(this.delimiters);
  }
  //-----------------------------------------------------------
  // isActive
  //-----------------------------------------------------------
  isActive() {
    return !!this._keywords;
  }
  //-----------------------------------------------------------
  //  match
  //-----------------------------------------------------------
  // Tests an object to match the keyword filter
  match(object) {
    return !this._keywords || this.searchFields.some((searchField) => this._matchField(object[searchField]));
  }
  _matchField(field) {
    if (!field) {
      return false;
    }
    field = field.toLowerCase();
    return this._keywords.every((keyword) => field.indexOf(keyword) >= 0);
  }
}

// geoenrichment.stores
class VariableStore {
  //--------------------------------------------------------------------------
  //
  // Constructor
  //
  //--------------------------------------------------------------------------
  constructor(params) {
    /**
     * For the Global "country" allows users to override the hideInDataBrowser variable property, and show all variables.
     * - Defaults to false
     */
    this.displayAllGlobalVariables = false;
    /**
     * FullName property is associated with one of full names of a variable.
     * If the same variable appears in more than one data collection,
     * its full name is generated from the first appearance, but the
     * variable is hashed under every of its full names. So, you can pass any of full names of
     * of a variable in the 'get' method.
     */
    this.idProperty = "fullName";
    /**
     * Query engine used.
     */
    this.queryEngine = createSimpleQueryEngine();
    /**
     * Module to provide derivative variables. If true, the default module will be used.
     */
    this.derivativeVariables = false;
    mixin(this, params);
    this.categories = new DeferredStore({ syncQuery: this._queryCategories.bind(this) });
    this.dataCollections = new DeferredStore({ syncQuery: this._queryDataCollections.bind(this) });
    if (this.derivativeVariables === true) {
      this.derivativeVariables = new DerivativeVariables();
    }
  }
  //--------------------------------------------------------------------------
  //
  // Category and data collection stores support
  //
  //--------------------------------------------------------------------------
  _queryCategories(query, options) {
    query = this._cleanUpCountryID(query);
    let data;
    if (query && query.dataCollectionID) {
      const dataCollection = this.dataCollections.get(query.dataCollectionID);
      delete query.dataCollectionID;
      data = !dataCollection ? [] : dataCollection.categories;
    }
    else {
      data = this.categories.data;
    }
    return this.categories.queryEngine(query, options)(data);
  }
  _queryDataCollections(query, options) {
    query = this._cleanUpCountryID(query);
    let data;
    if (typeof query === "object" && query.categoryID) {
      const category = this.categories.get(query.categoryID);
      delete query.categoryID;
      data = !category ? [] : category.dataCollections;
    }
    else {
      data = this.dataCollections.data;
    }
    return this.dataCollections.queryEngine(query, options)(data);
  }
  _cleanUpCountryID(query) {
    if (query) {
      query = Object.assign({}, query);
      delete query.countryID;
    }
    return query;
  }
  //--------------------------------------------------------------------------
  //
  // Clearing of all stores is applied when country changes.
  //
  //--------------------------------------------------------------------------
  _clearAllStores() {
    this._data = [];
    this._variables = {};
    this.derivativeVariables && this.derivativeVariables.setCache(this._variables);
    this.categories.setData();
    this.dataCollections.setData();
  }
  //--------------------------------------------------------------------------
  //
  // Public interface
  //
  //--------------------------------------------------------------------------
  //----------------------------------------------
  // Variable store synchronization
  //----------------------------------------------
  /**
   * Returns synchronization promise. Should be overriden in subclasses supporting countries.
   * @param countryID ID of country to synchronize the store with.
   * If this parameter is undefined, the method should return the current synchronization promise.
   */
  synchronize(_countryID) {
    return Promise.resolve();
  }
  //----------------------------------------------
  // Variable store methods
  //----------------------------------------------
  /**
   * Retrieves an variable by its identity.
   * @param id The identity to use to lookup the variable.
   * @returns The variable in the store that matches the given id.
   */
  get(id) {
    return this.derivativeVariables
      ? this.derivativeVariables.get(id)
      : this._variables[id] || null;
  }
  /**
   * Returns a variables's identity.
   * @param object The variable to get the identity from.
   * @returns The full name of the variable in the form 'dataCollectionID.variableID'.
   */
  getIdentity(object) {
    return (object && object[this.idProperty]) || null;
  }
  getLabel(object) {
    return object.alias;
  }
  /**
   * Queries the store for variables.
   * Additional parameters could be passed in the query and a query function case is also allowed.
   */
  query(query, options) {
    return this._asyncQuery(query, options);
  }
  /**
   * Async query used in friendly classes.
   * @param storeOptions Store options modifying the default behavior of the query.
   */
  _asyncQuery(query, options, storeOptions) {
    return DeferredStore.resolveCallback((storeOptions && storeOptions.resolver) || this.categories.resolver, query, () => this._syncQuery(query, options, storeOptions));
  }
  /**
   * Sync query used in friendly classes.
   */
  _syncQuery(query, options, storeOptions) {
    // Prepare variables query and filters.
    const variablesQuery = {}, filters = [(storeOptions && storeOptions.queryFilter) || this.queryFilter.bind(this)];
    let additionalData;
    if (typeof query === "function") {
      filters.push(query);
    }
    else {
      query = query || {};
      let additionalQuery;
      for (const key in query) {
        switch (key) {
          case "countryID": // Already resolved. Should ignore it.
            break;
          case "categoryID":
          case "dataCollectionID":
            variablesQuery[key] = query[key];
            break;
          case "searchString":
            const keywordFilter = new KeywordFilter(query[key]);
            filters.push((variable) => keywordFilter.match(variable));
            break;
          case "favorites":
            if (query[key]) {
              const favorites = (storeOptions && storeOptions.favorites) || this.favorites;
              filters.push((variable) => favorites && favorites.contains && favorites.contains(this.getIdentity(variable)));
            }
            break;
          case "filters":
            const filterHash = this._prepareFilterHash(query[key]);
            if (filterHash) {
              filters.push((variable) => {
                for (const id in variable.filteringTags) {
                  if (filterHash[id] || filterHash["*"]) {
                    return true;
                  }
                }
                return false;
              });
            }
            break;
          case "additionalData":
            additionalData = query[key];
            break;
          default:
            additionalQuery = additionalQuery || {};
            additionalQuery[key] = query[key];
            break;
        }
      }
      // If additional query parameters were collected, we add a filter for these parameters
      if (additionalQuery) {
        filters.push((variable) => {
          // The code below is just copied from the simple query engine
          for (const key in additionalQuery) {
            const required = additionalQuery[key];
            if (required && typeof required === "object" && "test" in required) {
              // an object can provide a test method, which makes it work with regex
              if (!required.test(variable[key], variable)) {
                return false;
              }
            }
            else if (required !== variable[key]) {
              return false;
            }
          }
          return true;
        });
      }
    }
    // Compose the query from the collected filters.
    const queryFilter = this._composeQuery(filters);
    return variablesQuery.dataCollectionID
      ? this._queryDCVariables(variablesQuery.dataCollectionID, queryFilter, options, additionalData)
      : variablesQuery.categoryID
        ? this._queryCategoryVariables(variablesQuery.categoryID, queryFilter, options, additionalData)
        : this._queryAllVariables(queryFilter, options, additionalData);
  }
  // Can be overriden
  _queryDCVariables(id, queryFilter, options, additionalData) {
    let dc = this.dataCollections.get(id);
    if (!dc && additionalData) {
      dc = additionalData.getDataCollection(id);
    }
    return (dc && this._query(dc.getVisibleVariables(), queryFilter, options)) || [];
  }
  // Can be overriden
  _queryCategoryVariables(id, queryFilter, options, additionalData) {
    let category = this.categories.get(id);
    if (!category && additionalData) {
      category = additionalData.getCategory(id);
    }
    return (category && this._query(category.data, queryFilter, options)) || [];
  }
  // Can be overriden
  _queryAllVariables(queryFilter, options, additionalData) {
    return this._query(this._data, queryFilter, options, additionalData && additionalData.getVariables());
  }
  /**
   * Composes a query from an array of filters.
   */
  _composeQuery(filters) {
    return filters.length === 1 ? filters[0] : (variable) => filters.every((filter) => filter(variable));
  }
  /**
   * Default query filter which filters out variables disallowed in the data browser.
   */
  queryFilter(variable) {
    return !variable.missedInCategories;
  }
  /**
   * The base query.
   * The additionalData is an array of additional variables.
   * It could also contain inner arrays.
   */
  _query(data, queryFilter, options, additionalData) {
    // We temporary add additional variables to the end of data array,
    // apply query, and then remove additional variables.
    const length = data.length;
    this._addAdditionalData(data, additionalData);
    const result = this.queryEngine(queryFilter, options)(data);
    data.length = length;
    return result;
  }
  /**
   * Recursively collects additional variables.
   */
  _addAdditionalData(data, additionalData) {
    additionalData &&
      additionalData.forEach((object) => {
        if (Array.isArray(object)) {
          this._addAdditionalData(data, object);
        }
        else if (object) {
          data.push(object);
        }
      });
  }
  /**
   * Requests popular variables for a category.
   * @param category        Variable category to request variables for.
   * @param options         Query options.
   * @param storeOptions    Additional store options. If storeOptions.queryFilter is specified, it overrides the default query filter.
   *
   * @returns Array of popular variables.
   */
  getPopularVariables(category, options, storeOptions) {
    return category && category.getPopularVariables ? category.getPopularVariables(options, storeOptions) : [];
  }
  //----------------------------------------------
  // Get refine filters
  //----------------------------------------------
  /**
   * Gets an array of all possible refine filters corresponding to the given variables query.
   * It is supposed that the Variable Store is already synchronized with the requested country.
   * @param query Variables query (see query method). Only 'categoryID', 'dataCollectionID', 'filters', and 'additionalData' properties are taken into account.
   * @returns a hash object with possible refine filters.
   */
  getRefineFilters(query) {
    let collectedFilters = {};
    if (query.dataCollectionID) {
      let dataCollection = this.dataCollections.get(query.dataCollectionID);
      if (!dataCollection && query.additionalData) {
        dataCollection = query.additionalData.getDataCollection(query.dataCollectionID);
      }
      if (dataCollection && dataCollection.filters) {
        this._combineFilters(dataCollection.filters, collectedFilters);
      }
    }
    else if (query.categoryID) {
      let category = this.categories.get(query.categoryID);
      if (!category && query.additionalData) {
        category = query.additionalData.getCategory(query.categoryID);
      }
      if (category) {
        this._collectCategoryFilters(category, collectedFilters);
      }
    }
    else {
      this._collectAllFilters(collectedFilters, query.additionalData);
    }
    // If query.filters property is specified, we filter already collected filters.
    const filterHash = this._prepareFilterHash(query.filters);
    if (filterHash && !filterHash["*"]) {
      const oldFilters = collectedFilters;
      collectedFilters = {};
      for (const id in oldFilters) {
        if (filterHash[id]) {
          collectedFilters[id] = oldFilters[id];
        }
      }
    }
    return collectedFilters;
  }
  _prepareFilterHash(filters) {
    if (typeof filters === "string") {
      filters = filters.split(",");
    }
    if (!filters || !filters.length) {
      return null;
    }
    const filterHash = {};
    filters.forEach((filter) => {
      filterHash[filter.trim()] = true;
    });
    return filterHash;
  }
  _collectAllFilters(collectedFilters, additionalData) {
    this.categories.data.forEach((category) => {
      this._collectCategoryFilters(category, collectedFilters);
    });
    additionalData &&
      additionalData.getCategories().forEach((category) => {
        this._collectCategoryFilters(category, collectedFilters);
      });
  }
  _collectCategoryFilters(category, collectedFilters) {
    category.dataCollections.forEach((dataCollection) => {
      this._combineFilters(dataCollection.filters, collectedFilters);
    });
  }
  _combineFilters(filters, collectedFilters) {
    for (const id in filters) {
      const newFilter = filters[id];
      let oldFilter = collectedFilters[newFilter.id];
      if (!oldFilter) {
        oldFilter = Object.assign({}, newFilter);
        collectedFilters[newFilter.id] = oldFilter;
      }
      else {
        this._mergeFilter(oldFilter, newFilter);
      }
    }
  }
  /**
   * Merges the new filter with the old one.
   */
  _mergeFilter(oldFilter, newFilter) {
    // Both merged filters should have the same type. If not, we ignore the new filter.
    if (oldFilter.type === "Range" && newFilter.type === "Range") {
      // In the case of a range filter, we just enlarge the range of values
      // of the old filter with new values.
      let oldValue = oldFilter.rangeMin;
      let newValue = newFilter.rangeMin;
      if (!isNaN(oldValue) && !isNaN(newValue) && oldValue > newValue) {
        oldFilter.rangeMin = newValue;
      }
      oldValue = oldFilter.rangeMax;
      newValue = newFilter.rangeMax;
      if (!isNaN(oldValue) && !isNaN(newValue) && oldValue < newValue) {
        oldFilter.rangeMax = newValue;
      }
    }
    else if (oldFilter.type === "Enumeration" && newFilter.type === "Enumeration") {
      // In the case of a enumeration filter, we add values from the new filter
      // that are missing in the old filter.
      const oldValue = this._arrayToObject(oldFilter.enumValues.split(","));
      const newValue = newFilter.enumValues.split(",");
      newValue.forEach((item) => {
        if (!oldValue[item]) {
          oldFilter.enumValues += "," + item;
        }
      });
    }
  }
  //----------------------------------------------
  // Get available states
  //----------------------------------------------
  /**
   * Returns an object of states available for the given variable.
   * If states are not supported on this store or the variable has a single state, null should be returned.
   */
  getStates(id) {
    return this.derivativeVariables ? this.derivativeVariables.getStates(id) : null;
  }
  //--------------------------------------------------------------------------
  //
  // Protected methods: Processing data collections
  //
  //--------------------------------------------------------------------------
  // Processes GE data collections and prepares the internal store structure.
  _processDataCollections(dataCollections, processedData) {
    // While processing data collections we collect results in the processedData object.
    // Variables are hashed in it using a combination of variable ID and variable description.
    // Also, we add variables to this._data array and register them in this._variables hash and
    // in internal hashes of created categories and data collections.
    // To allow collect variables from different data collection sources, we pass processedData in
    // parameters of this method and return it as a result of this method.
    processedData = processedData || {
      variables: {},
      categories: {},
      dataCollections: []
    };
    dataCollections.forEach((originalDataCollection) => {
      if (this._isDataCollectionDisallowed(originalDataCollection)) {
        return;
      }
      const originalData = originalDataCollection.data;
      // Modify the object to have more convenient interface
      const dataCollection = originalDataCollection;
      // Provide a more convenient id property
      dataCollection.id = originalDataCollection.dataCollectionID;
      // Move data collection metadata to the top.
      const metadata = originalDataCollection.metadata;
      dataCollection.title = metadata.title;
      dataCollection.name = metadata.name;
      dataCollection.shortDescription = metadata.shortDescription;
      dataCollection.longDescription = metadata.longDescription;
      dataCollection.countries = metadata.countries;
      dataCollection.keywords = metadata.keywords;
      dataCollection.datasets = metadata.datasets;
      dataCollection.hierarchies = metadata.hierarchies;
      dataCollection.author = metadata.author;
      // We need to normalize data collection filters.
      // For a range filter, its bounds are converted to numbers.
      // For a enum filter, we trim values in its string list.
      // Convert filters to hash.
      dataCollection.filters = this._arrayToObject(originalDataCollection.metadata.filters, "id", (filter) => this._prepareFilter(filter));
      // provide hasVariable method to ensure the given variable belongs to the data collection.
      dataCollection.hasVariable = function (variable) {
        const id = variable && variable.id;
        // let's convert to the upper case every time, because the variable may not be from this data collection
        return !!(id && this.hash[id.toUpperCase()] !== undefined);
      };
      // Provide a data collection with 'getVisibleVariables' method
      dataCollection.getVisibleVariables = function () {
        // TODO: toUpperCase is not needed here, because it should be already in the upper case, see _prepareVariable method
        return this.data.filter((variable) => this.hash[variable.id.toUpperCase()]);
      };
      // Prepare categories used in this data collection.
      dataCollection.categories = [];
      originalDataCollection.metadata.categories.map((category) => {
        const storeCateogry = this._prepareCategory(category, dataCollection, processedData);
        storeCateogry && dataCollection.categories.push(storeCateogry);
      });
      dataCollection.data = [];
      // We will cache data collection variable short IDs in its own hash as Boolean values
      // and also place variables in its own data array.
      dataCollection.hash = {};
      this._testOneYearIncrements(originalData);
      // Now we fill all hashes with variables within a data collection.
      originalData.forEach((variable) => {
        this._processVariable(variable, dataCollection, processedData);
      });
      // Finally, we add the data collection to processedData.
      processedData.dataCollections.push(dataCollection);
    });
    // Update stores of categories and data collections.
    const data = this.categories.queryEngine({}, { sort: [{ attribute: "displayOrder", descending: true }] })(this._objectToArray(processedData.categories));
    this.categories.setData(data);
    this.dataCollections.setData(processedData.dataCollections);
    return processedData;
  }
  _testOneYearIncrements(variables) {
    function getAgeTagValue(variable) {
      const tags = variable.filteringTags;
      let ageTagValue;
      for (let j = 0, count = tags ? tags.length : 0; j < count; j++) {
        if (tags[j].id === "Age") {
          ageTagValue = tags[j].value;
          break;
        }
      }
      return ageTagValue;
    }
    const length = variables.length;
    let oneYearCount = 0;
    // Test that all variables of a data collection have the Age tag as "N-N".
    for (let i = 0; i < length; i++) {
      const ageTagValue = getAgeTagValue(variables[i]);
      if (!ageTagValue) {
        // Ignore variables without Age tag.
        continue;
      }
      const range = ageTagValue.split("-");
      if (range.length !== 2 || range[0] !== range[1]) {
        return;
      }
      oneYearCount++;
    }
    // One-year increments data collection contains essentially more than 50 variables
    // with one-year ranges. We use the threshold of 50 to ensure that the number of
    // such variables is big enough.
    if (oneYearCount < 50) {
      return;
    }
    // This is the one-year increments data collection.
    // Add strictFilterTag property to all variables having the Age filter tag.
    for (let i = 0; i < length; i++) {
      if (getAgeTagValue(variables[i])) {
        variables[i].strictFilterTag = "Age";
      }
    }
  }
  _prepareFilter(filter) {
    if (filter.type === "Range") {
      const storeFilter = filter;
      // In the case of a range filter, we convert range values to numbers.
      // If rangeMin is missing, zero will be assigned.
      storeFilter.rangeMin = Number(filter.rangeMin);
      if (!storeFilter.rangeMin) {
        storeFilter.rangeMin = 0;
      }
      storeFilter.rangeMax = Number(filter.rangeMax);
      return storeFilter;
    }
    // In the case of a enumeration filter, we trim spaces aroung enumeration items.
    filter.enumValues = this._trimArray(filter.enumValues.split(",")).join(",");
    return filter;
  }
  _prepareCategory(sourceCategory, dataCollection, processedData) {
    // Convert display order to Number if it is not a number
    const displayOrder = Number(sourceCategory.displayOrder) || 0;
    let category = processedData.categories[sourceCategory.id];
    if (!category) {
      // If the category is new, we just registed it.
      category = sourceCategory;
      category.hash = {}; // A hash of variables belonging to the category (use the uppercase long ID as a key)
      category.data = []; // A list of variables belonging to the category
      category.dataCollections = []; // A list of data collections associated with the category
      category.displayOrder = displayOrder;
      category.popularityHash = {}; // The hash of popular variables is replaced later with array
      // Provide getting popular variables for a category
      const self = this;
      category.getPopularVariables = function (options, storeOptions) {
        if (!this.popularityArray) {
          this.popularityArray = self._objectToArray(this.popularityHash);
        }
        return self._queryPopularVariables(this.popularityArray, options, storeOptions);
      };
      processedData.categories[sourceCategory.id] = category;
    }
    else {
      category.displayOrder = Math.max(displayOrder, category.displayOrder);
    }
    category.dataCollections.push(dataCollection);
    return category;
  }
  _queryPopularVariables(popularityArray, options, storeOptions) {
    const filter = (storeOptions && storeOptions.queryFilter) || this.queryFilter;
    const data = this.queryEngine((popularityData) => {
      const variable = this.get(popularityData.id);
      return variable ? filter(variable) : false;
    }, options)(popularityArray);
    return data.map((data) => this.get(data.id));
  }
  _processVariable(sourceVariable, dataCollection, processedData) {
    // Popular variables fix should be the first action.
    let popularity = sourceVariable.popularity;
    if (popularity !== undefined) {
      delete sourceVariable.popularity;
      popularity = Number(popularity);
    }
    if (!dataCollection.categories || !dataCollection.categories.length) {
      sourceVariable.missedInCategories = true;
    }
    // Then we ensure that the variable is allowed.
    if (this._isVariableDisallowed(sourceVariable)) {
      return;
    }
    this._prepareVariable(sourceVariable);
    // The id of variable is used for collecting variables only. It is case insensitive.
    // In variables store we use the fullName as ID property.
    const id = this._createUniqueVariableId(sourceVariable).toUpperCase();
    let fullName = dataCollection.id + "." + sourceVariable.id; // variable id is in upper case here, see _prepareVariable() method
    const isAllowed = this._isVariableAllowedInCategories(sourceVariable, dataCollection);
    let variable = processedData.variables[id];
    if (!variable) {
      // The variable is new. Add the variable to the hash of unique variable instances.
      variable = sourceVariable;
      variable[this.idProperty] = fullName;
      processedData.variables[id] = variable;
      const isHidden = variable.hideInDataBrowser && sourceVariable.hideInDataBrowser && this._hideGlobalHiddenVariables();
      if (!!isHidden) {
        return;
      }
      this._data.push(variable);
    }
    else {
      const trustedSource = !sourceVariable.missedInCategories;
      const isHidden = variable.hideInDataBrowser && sourceVariable.hideInDataBrowser && this._hideGlobalHiddenVariables();
      let desc = variable.missedInCategories
        ? sourceVariable.__sourceDesc || variable.__sourceDesc
        : variable.__sourceDesc || sourceVariable.__sourceDesc;
      if (variable.missedInCategories && trustedSource) {
        delete variable.missedInCategories;
      }
      // The variable is already registered.
      // We update the old instance with the new one if the new variable has filtering tags
      // (_rep variables don't have filtering tags and are untrusted).
      if (trustedSource && Object.keys(sourceVariable.filteringTags).length) {
        if (Object.keys(variable.filteringTags).length) {
          // We merge key properties of variable instances if they both have filtering tags.
          // The old variable properties are more preferable.
          mixin(sourceVariable.filteringTags, variable.filteringTags);
          sourceVariable.indexBase = variable.indexBase || sourceVariable.indexBase;
          sourceVariable[this.idProperty] = variable[this.idProperty];
        }
        else {
          // The new variable is more preferable.
          sourceVariable[this.idProperty] = fullName;
          desc = sourceVariable.__sourceDesc || variable.__sourceDesc;
        }
        mixin(variable, sourceVariable);
      }
      // Update the description
      variable.__sourceDesc = desc;
      if (desc) {
        variable.description = desc;
      }
      variable.hideInDataBrowser = !!isHidden;
    }
    // We register this variable under fullName key to allow get it from the store by any of its full names.
    // This behavior could be overriden in subclasses.
    this._registerVariable(variable, fullName);
    // Get the primary full name of the variable.
    fullName = variable[this.idProperty];
    const fullNameUpperCase = fullName.toUpperCase();
    // Add the variable to the dataCollection.
    // We save the natural order of variables within the data collection.
    if (!dataCollection.hasVariable(variable)) {
      dataCollection.hash[variable.id] = !!isAllowed; // We save variable visibility for query in this hash
      dataCollection.data.push(variable);
    }
    // If the source variable isn't allowed in categories, we don't add it.
    if (!isAllowed) {
      return;
    }
    // Add the variable to the categories.
    // We save a natural order of variables within categories.
    // We also update popular variables if necessary.
    dataCollection.categories.forEach((category) => {
      if (!category.hash[fullNameUpperCase]) {
        category.hash[fullNameUpperCase] = variable;
        category.data.push(variable);
      }
      if (popularity) {
        let popularityData = category.popularityHash[fullNameUpperCase];
        if (!popularityData) {
          popularityData = { id: fullName, popularity };
          category.popularityHash[fullNameUpperCase] = popularityData;
        }
        else if (popularityData.popularity < popularity) {
          popularityData.popularity = popularity;
        }
      }
    });
  }
  //--------------------------------------------------------------------------
  //
  // Protected hooks
  //
  //--------------------------------------------------------------------------
  // This hook returns true if the data collection should be filtered out.
  _isDataCollectionDisallowed(dataCollection) {
    return !dataCollection.metadata || !dataCollection.metadata.categories;
  }
  // This hook returns true if the variable should be filtered out.
  _isVariableDisallowed(variable) {
    // If there's no field category, variable is not valid
    return !variable.fieldCategory;
  }
  // This hook returns a value uniquely identifying the given variable.
  // By default we provide a unique combination of variable ID and alias.
  _createUniqueVariableId(variable) {
    // We use alias instead of description because the description could be missing.
    return variable.id + "." + variable.alias;
  }
  // This hook returns true if the given variable can be added to category collections.
  _isVariableAllowedInCategories(_variable, _dataCollection) {
    return true;
  }
  // Prepares a source variable.
  // Default implementation converts filtering tags from an array to object, provides values for base properties of valiables,
  // and assigns an alias as a description if the description is missing.
  _prepareVariable(variable) {
    const storeVariable = variable;
    // GE variable IDs are case insensitive. Convert them to upper case.
    storeVariable.id = variable.id.toUpperCase();
    storeVariable.units = toVariableUnits(variable.units);
    // Convert filtering tags from an array to object.
    storeVariable.filteringTags = this._arrayToObject(variable.filteringTags, "id");
    // Replace missing base properties with null values.
    storeVariable.percentBase = variable.percentBase || null;
    storeVariable.percentBaseAlias = variable.percentBaseAlias || null;
    storeVariable.averageBase = variable.averageBase || null;
    storeVariable.averageBaseAlias = variable.averageBaseAlias || null;
    storeVariable.indexBase = variable.indexBase || null;
    // Ensure that the description property presents.
    // If it is missing (e.g. for KeyGlobalFacts), we assign alias as a description.
    storeVariable.__sourceDesc = variable.description;
    if (!storeVariable.description) {
      storeVariable.description = storeVariable.alias;
    }
  }
  // This hook registers a variable with the given full name in the variable hash
  _registerVariable(variable, fullName) {
    this._variables[fullName] = variable;
  }
  //--------------------------------------------------------------------------
  //
  // Protected utility methods
  //
  //--------------------------------------------------------------------------
  // Trims source array elements and returns the source array.
  _trimArray(source) {
    for (let i = 0; i < source.length; i++) {
      source[i] = source[i].trim();
    }
    return source;
  }
  // Converts a source object to array.
  _objectToArray(source) {
    const target = [];
    for (const id in source) {
      target.push(source[id]);
    }
    return target;
  }
  // Converts a source array to object.
  _arrayToObject(source, idProperty, converter) {
    const target = {};
    source.forEach((item) => {
      const id = idProperty ? item[idProperty] : item;
      target[id] = converter ? converter(item) : item;
    });
    return target;
  }
  // Overriden in GeoenrichmentVariableStore
  _hideGlobalHiddenVariables() {
    return !this.displayAllGlobalVariables;
  }
}

// geoenrichment.stores
class GeoenrichmentVariableStore extends VariableStore {
  //--------------------------------------------------------------------------
  //
  // Constructor
  //
  //--------------------------------------------------------------------------
  constructor(params) {
    super(params);
    /**
     * ID used for designating global settings in Country dropdown.
     */
    this.globalCountryID = "_";
    this.countries = new DeferredStore({ resolver: this._getCountries.bind(this) });
    this.categories.resolver = this.dataCollections.resolver = this._resolveCountryID.bind(this);
  }
  synchronize(countryID) {
    return countryID === undefined ? this._resolveCountryIDPromise : this._resolveCountryID({ countryID });
  }
  /**
   * @returns country ID or this.globalCountryID.
   */
  getCurrentCountryID() {
    return this._currentCountryID;
  }
  _getCountries(_query) {
    if (!this._getCountriesPromise) {
      this._getCountriesPromise = this._getGeoenrichmentTask()
        .getAvailableCountries()
        .then((countries) => {
        this.countries.setData(countries);
      });
    }
    return this._getCountriesPromise;
  }
  _resolveCountryID(query) {
    query = query || {};
    // We don't resolve countryID property in the case of non-object query.
    if (typeof query !== "object") {
      return null;
    }
    const countryID = query.countryID || this.globalCountryID;
    if (countryID !== this._currentCountryID) {
      this._currentCountryID = countryID;
      this._clearAllStores();
      this._resolveCountryIDPromise = this._getDataCollections(countryID === this.globalCountryID ? null : countryID).then((dataCollections) => {
        this._processDataCollections(dataCollections);
      });
      // If favorites are specified, the promise will also wait for their synchronization.
      // The synchronization of favorites should NEVER complete with error!
      if (this.favorites && this.favorites.synchronize) {
        this._resolveCountryIDPromise = Promise.all([
          this._resolveCountryIDPromise,
          this.favorites.synchronize(countryID)
        ]);
      }
    }
    return this._resolveCountryIDPromise;
  }
  _getDataCollections(countryID) {
    // If variableFields are not specified use * to retrieve the definition to display in info icon popup
    return this._getGeoenrichmentTask().getDataCollections(countryID, null, this.variableFields || "*");
  }
  _getGeoenrichmentTask() {
    return new GeoenrichmentTask(_arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.j.server, _arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_0__.j.token);
  }
  // Returns true if Global Variables should be hidden
  _hideGlobalHiddenVariables() {
    return !this.displayAllGlobalVariables || this._currentCountryID !== this.globalCountryID;
  }
}

let DataBrowser = class DataBrowser extends DataBrowserBase {
  postCreate() {
    this._set("variables", this.variables || new GeoenrichmentVariableStore({ derivativeVariables: this.allowDerivativeVariables, displayAllGlobalVariables: this.displayAllGlobalVariables }));
    this._contentFactory = this._contentFactory || new DataBrowserContentFactory();
    super.postCreate();
  }
};
DataBrowser = __decorate([
  i$X()
], DataBrowser);

const DataBrowser$1 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    get DataBrowser () { return DataBrowser; }
});



//# sourceMappingURL=DataBrowser-5ce2ade9.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfZ2VvZW5yaWNobWVudC1jb21wb25lbnRzX2Rpc3RfLWU1ZDE3My5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUE0UTs7QUFFNVE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLFFBQVE7QUFDckQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiwwQkFBMEIsaUJBQWlCLFdBQVcsaUJBQWlCLG9CQUFvQiwrQkFBK0IscUpBQXFKLGdEQUFnRCxZQUFZLElBQUksZ0JBQWdCLFNBQVMsZ0JBQWdCLHNGQUFzRixnQkFBZ0Isa0ZBQWtGLGlCQUFpQixvRkFBb0YsZ0JBQWdCLGtHQUFrRyxnQkFBZ0Isb0ZBQW9GLGdCQUFnQixzRkFBc0YsaUJBQWlCLG9GQUFvRixnQkFBZ0Isc0ZBQXNGLGdCQUFnQix3RkFBd0YsZ0JBQWdCOztBQUV0eUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsTUFBTSxzR0FBc0csZ0VBQWdFLFNBQVMsZ0JBQWdCLHlEQUF5RCwwRkFBMEYsa0RBQWtELDZCQUE2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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtRUFBbUU7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxnRkFBRztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMscUJBQXFCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsMEJBQTBCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiwyRUFBMkUsb0JBQW9CLGdGQUFnRiw2QkFBNkIscUJBQXFCLGtCQUFrQix5Q0FBeUMsUUFBUSxTQUFTLCtDQUErQyxnQ0FBZ0MsU0FBUyw4QkFBOEIsb0JBQW9CLGdGQUFnRixpQ0FBaUMscUJBQXFCLHdCQUF3QixHQUFHLFFBQVEsU0FBUzs7QUFFem5CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxnRkFBRztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QztBQUN4QyxpREFBaUQ7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsaUJBQWlCO0FBQzlDLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDBCQUEwQjtBQUMzQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUyxnRkFBRztBQUNaOztBQUVBO0FBQ0E7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QUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixPQUFPO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsT0FBTztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixPQUFPO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsT0FBTztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixPQUFPO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLE9BQU87QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsT0FBTztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixPQUFPO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLE9BQU87QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsT0FBTztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixPQUFPO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLE9BQU87QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsT0FBTztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixPQUFPO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLE9BQU87QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsT0FBTztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsUUFBUTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixRQUFRO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLFFBQVE7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixZQUFZO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0JBQWdCLGtCQUFrQjtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdCQUFnQjtBQUN4QyxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0JBQWdCO0FBQ3hDLHVEQUF1RDtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRDtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBLDJFQUEyRTtBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsK0JBQStCO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDLHdDQUF3QztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsaUNBQWlDO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsMEZBQTBGO0FBQzNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0VBQW9FO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLHNGQUFzRjtBQUM5SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyw2QkFBNkI7QUFDM0MsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDJCQUEyQiw2QkFBNkIsUUFBUTtBQUN4RixJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxnQ0FBZ0M7QUFDOUM7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsbUNBQW1DO0FBQy9FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCxNQUFNO0FBQ3pEO0FBQ0E7QUFDQSxtREFBbUQsT0FBTztBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QjtBQUM5QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxNQUFNO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG9EQUFvRDtBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsT0FBTztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsK0RBQStEO0FBQ3JHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBdUQ7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGdGQUFjO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGdGQUFJO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGdGQUFhO0FBQ3BDLHVCQUF1QixnRkFBYTtBQUNwQyxzQkFBc0IsZ0ZBQWE7QUFDbkMsMEJBQTBCLGdGQUFhO0FBQ3ZDLHdCQUF3QixnRkFBYTtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsMkJBQTJCO0FBQzVEO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsNEJBQTRCLE9BQU8sR0FBRztBQUNqRixzQ0FBc0MsNERBQTREO0FBQ2xHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlEO0FBQ2pEO0FBQ0E7QUFDQSxrREFBa0Q7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDO0FBQzNDLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsOEJBQThCLGtCQUFrQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsZ0ZBQWE7QUFDdkI7QUFDQSxZQUFZLGdGQUFhO0FBQ3pCLFlBQVksZ0ZBQWdCLENBQUMsZ0ZBQWE7QUFDMUM7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksZ0ZBQUk7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLDhDQUE4QztBQUN6RSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsOERBQThEO0FBQ3ZGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLDJDQUEyQztBQUMxRTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0Msc0NBQXNDO0FBQ3hFO0FBQ0E7QUFDQSxvQkFBb0IsdURBQXVEO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUVBQXFFO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUZBQW1GO0FBQ25GLHNIQUFzSDtBQUN0SCw2SEFBNkg7QUFDN0gsMERBQTBEO0FBQzFELHFJQUFxSTtBQUNySTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sZ0ZBQUk7QUFDVixLQUFLO0FBQ0w7QUFDQTtBQUNBLElBQUksZ0ZBQUk7QUFDUixNQUFNLGdGQUFJO0FBQ1Y7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLHFEQUFxRDtBQUM3RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLHdDQUF3Qyx5QkFBeUI7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixTQUFTLCtDQUErQztBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixVQUFVO0FBQ2xDLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnSUFBZ0k7QUFDaEksc0lBQXNJO0FBQ3RJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZUFBZTtBQUN2QywwQ0FBMEMscURBQXFELEdBQUc7QUFDbEc7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLCtCQUErQjtBQUMxRSxhQUFhO0FBQ2IsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBeUQ7QUFDekQsZ0RBQWdEO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLG9CQUFvQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QztBQUM1Qyw2QkFBNkIsWUFBWTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLCtCQUErQjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLGdGQUFhO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixnRkFBYTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELDhCQUE4QjtBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLG9CQUFvQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRDtBQUNqRCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxnRkFBYztBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksZ0ZBQUk7QUFDUjtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsa0JBQWtCO0FBQzlEO0FBQ0E7QUFDQSw0Q0FBNEMsZUFBZTtBQUMzRDtBQUNBO0FBQ0EsNENBQTRDLGtFQUFrRTtBQUM5RyxzQ0FBc0M7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxzREFBc0QsZ0NBQWdDO0FBQ3RGLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkM7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkM7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCwyQkFBMkI7QUFDM0Usb0NBQW9DLDBDQUEwQztBQUM5RSx3Q0FBd0Msc0JBQXNCO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsdUNBQXVDLEdBQUc7QUFDaEUsdUJBQXVCLCtDQUErQztBQUN0RTtBQUNBO0FBQ0E7QUFDQSwrRUFBK0UsMkJBQTJCO0FBQzFHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsZUFBZTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RDtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsa0JBQWtCO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixnRkFBYztBQUM5QixJQUFJLGdGQUFJO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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YSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsYUFBYSxVQUFVLGlCQUFpQixhQUFhLFVBQVUsaUJBQWlCLGFBQWEsVUFBVSxpQkFBaUIsY0FBYyxXQUFXLGlCQUFpQixjQUFjLFdBQVcsaUJBQWlCLGNBQWMsV0FBVyxpQkFBaUIsY0FBYyxXQUFXLGlCQUFpQixjQUFjLFdBQVcsaUJBQWlCLGNBQWMsV0FBVyxpQkFBaUIsY0FBYyxXQUFXLGlCQUFpQixjQUFjLFdBQVcsaUJBQWlCLGNBQWMsV0FBVyxpQkFBaUIsY0FBYyxXQUFXLGlCQUFpQixjQUFjLFdBQVcsaUJBQWlCLGNBQWMsV0FBVyxpQkFBaUIsY0FBYyxXQUFXLGlCQUFpQixjQUFjLFdBQVcsaUJBQWlCLGNBQWMsV0FBVyxpQkFBaUIsY0FBYyxXQUFXLGlCQUFpQixjQUFjLFdBQVcsaUJBQWlCLGNBQWMsV0FBVyxpQkFBaUIsY0FBYyxXQUFXLGlCQUFpQixjQUFjLFdBQVcsaUJBQWlCLGNBQWMsV0FBVyxpQkFBaUIsY0FBYyxXQUFXLGlCQUFpQixjQUFjLFdBQVcsaUJBQWlCLGNBQWMsV0FBVyxpQkFBaUIsY0FBYyxXQUFXLGlCQUFpQixjQUFjLFdBQVcsaUJBQWlCLGNBQWMsV0FBVyxpQkFBaUIsY0FBYyxXQUFXLGlCQUFpQixjQUFjLFdBQVcsaUJBQWlCLGNBQWMsV0FBVyxpQkFBaUIsY0FBYyxXQUFXLGlCQUFpQixjQUFjLFdBQVcsa0JBQWtCLGNBQWMsV0FBVyxpQkFBaUIsY0FBYyxXQUFXLGlCQUFpQixjQUFjLFdBQVcsaUJBQWlCLGNBQWMsV0FBVyxpQkFBaUIsY0FBYyxXQUFXLGlCQUFpQixjQUFjLFdBQVcsaUJBQWlCLGNBQWMsV0FBVyxpQkFBaUIsY0FBYyxXQUFXLGlCQUFpQixjQUFjLFdBQVcsaUJBQWlCLGNBQWMsV0FBVyxpQkFBaUIsY0FBYyxXQUFXLGlCQUFpQixjQUFjLFdBQVcsaUJBQWlCLGNBQWMsV0FBVyxpQkFBaUIsY0FBYyxXQUFXLGlCQUFpQixjQUFjLFdBQVcsaUJBQWlCLGNBQWMsV0FBVyxpQkFBaUIsY0FBYyxXQUFXLGlCQUFpQixjQUFjLFdBQVcsaUJBQWlCLGNBQWMsV0FBVyxpQkFBaUIsY0FBYyxXQUFXLGlCQUFpQixjQUFjLFdBQVcsaUJBQWlCLGNBQWMsV0FBVyxpQkFBaUIsY0FBYyxXQUFXLGlCQUFpQixjQUFjLFdBQVcsaUJBQWlCLGNBQWMsV0FBVyxpQkFBaUIsY0FBYyxXQUFXLGlCQUFpQixjQUFjLFdBQVcsaUJBQWlCLGNBQWMsV0FBVyxpQkFBaUIsY0FBYyxXQUFXLGlCQUFpQixjQUFjLFdBQVcsaUJBQWlCLGNBQWMsV0FBVyxpQkFBaUIsY0FBYyxXQUFXLGlCQUFpQixjQUFjLFdBQVcsaUJBQWlCLGNBQWMsV0FBVyxpQkFBaUIsY0FBYyxXQUFXLGlCQUFpQixjQUFjLFdBQVcsaUJBQWlCLGNBQWMsV0FBVyxpQkFBaUIsY0FBYyxXQUFXLGlCQUFpQixjQUFjLFdBQVcsaUJBQWlCLGNBQWMsV0FBVyxpQkFBaUIsY0FBYyxXQUFXLGlCQUFpQixjQUFjLFdBQVcsaUJBQWlCLGNBQWMsV0FBVyxpQkFBaUIsY0FBYyxXQUFXLGlCQUFpQixjQUFjLFdBQVcsaUJBQWlCLGNBQWMsVUFBVSxpQkFBaUIsY0FBYyxXQUFXLGlCQUFpQixjQUFjLFdBQVcsaUJBQWlCLGNBQWMsV0FBVyxpQkFBaUIsY0FBYyxXQUFXLGlCQUFpQixjQUFjLFdBQVcsaUJBQWlCLGNBQWMsV0FBVyxpQkFBaUIsY0FBYyxXQUFXLGlCQUFpQixjQUFjLFdBQVcsaUJBQWlCLGNBQWMsV0FBVyxpQkFBaUIsY0FBYyxXQUFXLGlCQUFpQixjQUFjLFdBQVcsaUJBQWlCLGNBQWMsV0FBVyxpQkFBaUIsY0FBYyxXQUFXLGlCQUFpQixjQUFjLFdBQVcsaUJBQWlCLGNBQWMsV0FBVyxpQkFBaUIsY0FBYyxXQUFXLGlCQUFpQixjQUFjLFdBQVcsaUJBQWlCLGNBQWMsV0FBVyxpQkFBaUIsY0FBYyxXQUFXLGlCQUFpQixjQUFjLFdBQVcsaUJBQWlCLGNBQWMsV0FBVyxpQkFBaUIsY0FBYyxXQUFXLGlCQUFpQixjQUFjLFdBQVcsaUJBQWlCLGNBQWMsV0FBVyxpQkFBaUIsY0FBYyxXQUFXLGlCQUFpQixjQUFjLFdBQVcsaUJBQWlCLGNBQWMsV0FBVyxpQkFBaUIsY0FBYyxXQUFXLGlCQUFpQixjQUFjLFdBQVcsaUJBQWlCLGVBQWUsWUFBWSxpQkFBaUIsZUFBZSxZQUFZLGlCQUFpQixlQUFlLFlBQVksaUJBQWlCLGVBQWUsWUFBWSxpQkFBaUIsZUFBZSxZQUFZLGlCQUFpQixlQUFlLFlBQVksaUJBQWlCLGVBQWUsWUFBWSxpQkFBaUIsZUFBZSxZQUFZLGlCQUFpQixlQUFlLFlBQVksaUJBQWlCLGVBQWUsWUFBWSxpQkFBaUIsZUFBZSxZQUFZLGlCQUFpQixlQUFlLFlBQVksaUJBQWlCLGVBQWUsWUFBWSxpQkFBaUIsZUFBZSxZQUFZLGlCQUFpQixlQUFlLFlBQVksaUJBQWlCLGVBQWUsWUFBWSxpQkFBaUIsZUFBZSxZQUFZLGlCQUFpQixlQUFlLFlBQVksaUJBQWlCLGVBQWUsWUFBWSxpQkFBaUIsZUFBZSxZQUFZLGlCQUFpQixlQUFlLFlBQVksaUJBQWlCLGVBQWUsWUFBWSxpQkFBaUIsZUFBZSxZQUFZLGlCQUFpQixlQUFlLFlBQVksaUJBQWlCLGVBQWUsWUFBWSxpQkFBaUIsZUFBZSxZQUFZLGlCQUFpQixlQUFlLFlBQVksaUJBQWlCLGVBQWUsWUFBWSxpQkFBaUIsZUFBZSxZQUFZLGlCQUFpQixlQUFlLFlBQVksaUJBQWlCLGVBQWUsWUFBWSxpQkFBaUIsZUFBZSxZQUFZLGlCQUFpQixlQUFlLFlBQVksaUJBQWlCLGVBQWUsWUFBWSxpQkFBaUIsZUFBZSxZQUFZLGlCQUFpQixlQUFlLFlBQVksaUJBQWlCLGVBQWUsWUFBWSxpQkFBaUIsZUFBZSxZQUFZLGlCQUFpQixlQUFlLFlBQVksaUJBQWlCLGVBQWUsWUFBWSxpQkFBaUIsZUFBZSxZQUFZLGlCQUFpQixlQUFlLFlBQVksaUJBQWlCLGVBQWUsWUFBWSxpQkFBaUIsZUFBZSxZQUFZLGlCQUFpQixlQUFlLFlBQVksaUJBQWlCLGVBQWUsWUFBWSxpQkFBaUIsZUFBZSxZQUFZLGlCQUFpQixlQUFlLFlBQVksaUJBQWlCLGVBQWUsWUFBWSxpQkFBaUIsZUFBZSxZQUFZLGlCQUFpQixlQUFlLFlBQVksaUJBQWlCLGVBQWUsWUFBWSxpQkFBaUIsZUFBZSxZQUFZLGlCQUFpQixlQUFlLFlBQVksaUJBQWlCLGVBQWUsWUFBWSxpQkFBaUIsZUFBZSxZQUFZLGlCQUFpQixlQUFlLFlBQVksaUJBQWlCLGVBQWUsWUFBWSxpQkFBaUIsZUFBZSxZQUFZLGlCQUFpQixlQUFlLFlBQVksaUJBQWlCLGVBQWUsWUFBWSxpQkFBaUIsZUFBZSxZQUFZLGlCQUFpQixlQUFlLFlBQVksaUJBQWlCLGVBQWUsWUFBWSxpQkFBaUIsZUFBZSxZQUFZLGlCQUFpQixlQUFlLFlBQVksaUJBQWlCLGVBQWUsWUFBWSxpQkFBaUIsZUFBZSxZQUFZLGlCQUFpQixlQUFlLFlBQVksaUJBQWlCLGVBQWUsWUFBWSxpQkFBaUIsZUFBZSxZQUFZLGlCQUFpQixlQUFlLFlBQVksaUJBQWlCLGVBQWUsWUFBWSxpQkFBaUIsZUFBZSxZQUFZLGlCQUFpQixlQUFlLFlBQVksaUJBQWlCLGVBQWUsWUFBWSxpQkFBaUIsZUFBZSxZQUFZLGlCQUFpQixlQUFlLFlBQVksaUJBQWlCLGVBQWUsWUFBWSxpQkFB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHVCQUF1QjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsNEJBQTRCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwyQ0FBMkM7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IseUNBQXlDO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBOztBQUVBLE1BQU07O0FBRU47QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7OztBQUdBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxPQUFPO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxPQUFPO0FBQ3ZDO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFVBQVU7QUFDckIsWUFBWTtBQUNaO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxrQkFBa0IsU0FBUztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLFNBQVMsZ0JBQWdCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFNBQVMsT0FBTztBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7O0FBR0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsWUFBWTtBQUNaLFFBQVEsUUFBUTtBQUNoQixRQUFRLFNBQVM7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CO0FBQ0E7QUFDQTtBQUNBLGNBQWMsaUNBQWlDO0FBQy9DO0FBQ0E7QUFDQSw2Q0FBNkM7O0FBRTdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFNQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRLFVBQVU7QUFDN0IsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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UUFBUSxpR0FBaUc7QUFDdkg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTs7QUFFWjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUssR0FBRztBQUNSOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQ7QUFDN0Q7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBLE1BQU07OztBQUdOO0FBQ0EsS0FBSzs7O0FBR0w7QUFDQSx1REFBdUQ7O0FBRXZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQSxNQUFNOzs7QUFHTix5Q0FBeUM7QUFDekM7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyw2Q0FBNkM7QUFDdkYsK0NBQStDLGtEQUFrRDtBQUNqRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkIsb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLCtDQUErQyxJQUFJ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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsNEVBQWtCLFNBQVMsNEVBQWtCO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsOEVBQThFLCtHQUErRztBQUM3TDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCLENBQUM7O0FBRTJzRzs7QUFFNXNHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYW5hbHlzaXMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvZ2VvZW5yaWNobWVudC1jb21wb25lbnRzL2Rpc3QvZXNtL0RhdGFCcm93c2VyLTVjZTJhZGU5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGUgYXMgZSRMLCB0IGFzIHQkUCwgaCBhcyBoYXMsIGMgYXMgY3JlYXRlRGVmZXJyZWQsIGcgYXMgZ2xvYmFsT2JqZWN0LCBhIGFzIGdldEdFTWVzc2FnZXMsIHcgYXMgd2hlbiwgcyBhcyBzdWJzdGl0dXRlU3RyaW5nLCBpIGFzIGlzSW1tZWRpYXRlUmVzdWx0LCBiIGFzIGMkMTUsIGQgYXMgaCRCLCBmIGFzIGYkQiwgaiBhcyBpbmZvZ3JhcGhpY3NDb25maWcgfSBmcm9tICcuL2FyY2dpcy1nZW9lbnJpY2htZW50LWRhdGFicm93c2VyLTZjYThlYTE0LmpzJztcblxuLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxyXG5cclxuUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55XHJcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEhcclxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXHJcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcclxuSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NXHJcbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXHJcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcclxuUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuXHJcbmZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmZ1bmN0aW9uIG4kVyhuLHIpe2lmKG4uZm9yRWFjaCluLmZvckVhY2gocik7ZWxzZSBmb3IobGV0IHQ9MDt0PG4ubGVuZ3RoO3QrKylyKG5bdF0sdCxuKTt9ZnVuY3Rpb24gciRCKG4scix0KXtpZihuLnNsaWNlKXJldHVybiBuLnNsaWNlKHIsdCk7dm9pZCAwPT09cj9yPTA6KHI8MCYmKHIrPW4ubGVuZ3RoKSxyPU1hdGgubWluKG4ubGVuZ3RoLE1hdGgubWF4KDAscikpKSx2b2lkIDA9PT10P3Q9bi5sZW5ndGg6KHQ8MCYmKHQrPW4ubGVuZ3RoKSx0PU1hdGgubWluKG4ubGVuZ3RoLE1hdGgubWF4KDAsdCkpKTtjb25zdCBvPU1hdGgubWF4KDAsdC1yKSxjPW5ldyhuLmNvbnN0cnVjdG9yKShvKTtmb3IobGV0IGU9MDtlPG87ZSsrKWNbZV09bltyK2VdO3JldHVybiBjfWZ1bmN0aW9uIHQkTyhuKXtyZXR1cm4gbiBpbnN0YW5jZW9mIEFycmF5QnVmZmVyfHxuJiZuLmNvbnN0cnVjdG9yJiZcIkFycmF5QnVmZmVyXCI9PT1uLmNvbnN0cnVjdG9yLm5hbWV9ZnVuY3Rpb24gbyRKKG4pe3JldHVybiBuIGluc3RhbmNlb2YgSW50OEFycmF5fHxuJiZuLmNvbnN0cnVjdG9yJiZcIkludDhBcnJheVwiPT09bi5jb25zdHJ1Y3Rvci5uYW1lfWZ1bmN0aW9uIGMkMTQobil7cmV0dXJuIG4gaW5zdGFuY2VvZiBVaW50OEFycmF5fHxuJiZuLmNvbnN0cnVjdG9yJiZcIlVpbnQ4QXJyYXlcIj09PW4uY29uc3RydWN0b3IubmFtZX1mdW5jdGlvbiBlJEsobil7cmV0dXJuIG4gaW5zdGFuY2VvZiBVaW50OENsYW1wZWRBcnJheXx8biYmbi5jb25zdHJ1Y3RvciYmXCJVaW50OENsYW1wZWRBcnJheVwiPT09bi5jb25zdHJ1Y3Rvci5uYW1lfWZ1bmN0aW9uIGEkUShuKXtyZXR1cm4gbiBpbnN0YW5jZW9mIEludDE2QXJyYXl8fG4mJm4uY29uc3RydWN0b3ImJlwiSW50MTZBcnJheVwiPT09bi5jb25zdHJ1Y3Rvci5uYW1lfWZ1bmN0aW9uIHUkUShuKXtyZXR1cm4gbiBpbnN0YW5jZW9mIFVpbnQxNkFycmF5fHxuJiZuLmNvbnN0cnVjdG9yJiZcIlVpbnQxNkFycmF5XCI9PT1uLmNvbnN0cnVjdG9yLm5hbWV9ZnVuY3Rpb24gaSQxNyhuKXtyZXR1cm4gbiBpbnN0YW5jZW9mIEludDMyQXJyYXl8fG4mJm4uY29uc3RydWN0b3ImJlwiSW50MzJBcnJheVwiPT09bi5jb25zdHJ1Y3Rvci5uYW1lfWZ1bmN0aW9uIGYkQShuKXtyZXR1cm4gbiBpbnN0YW5jZW9mIFVpbnQzMkFycmF5fHxuJiZuLmNvbnN0cnVjdG9yJiZcIlVpbnQzMkFycmF5XCI9PT1uLmNvbnN0cnVjdG9yLm5hbWV9ZnVuY3Rpb24gcyRJKG4pe3JldHVybiBuIGluc3RhbmNlb2YgRmxvYXQzMkFycmF5fHxuJiZuLmNvbnN0cnVjdG9yJiZcIkZsb2F0MzJBcnJheVwiPT09bi5jb25zdHJ1Y3Rvci5uYW1lfWZ1bmN0aW9uIHkkdyhuKXtyZXR1cm4gbiBpbnN0YW5jZW9mIEZsb2F0NjRBcnJheXx8biYmbi5jb25zdHJ1Y3RvciYmXCJGbG9hdDY0QXJyYXlcIj09PW4uY29uc3RydWN0b3IubmFtZX1cblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmZ1bmN0aW9uIHAkMTgoZSx0KXtsZXQgbjtpZih0KWZvcihuIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShuKSYmKHZvaWQgMD09PWVbbl0/ZGVsZXRlIGVbbl06ZVtuXWluc3RhbmNlb2YgT2JqZWN0JiZwJDE4KGVbbl0sITApKTtlbHNlIGZvcihuIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShuKSYmdm9pZCAwPT09ZVtuXSYmZGVsZXRlIGVbbl07cmV0dXJuIGV9ZnVuY3Rpb24geSR2KGUpe2lmKCFlfHxcIm9iamVjdFwiIT10eXBlb2YgZXx8XCJmdW5jdGlvblwiPT10eXBlb2YgZSlyZXR1cm4gZTtpZihvJEooZSl8fGMkMTQoZSl8fGUkSyhlKXx8YSRRKGUpfHx1JFEoZSl8fGkkMTcoZSl8fGYkQShlKXx8cyRJKGUpfHx5JHcoZSkpcmV0dXJuIHIkQihlKTtpZihlIGluc3RhbmNlb2YgRGF0ZSlyZXR1cm4gbmV3IERhdGUoZS5nZXRUaW1lKCkpO2lmKGUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcil7cmV0dXJuIGUuc2xpY2UoMCxlLmJ5dGVMZW5ndGgpfWlmKGUgaW5zdGFuY2VvZiBNYXApe2NvbnN0IHQ9bmV3IE1hcDtyZXR1cm4gZS5mb3JFYWNoKCgoZSxuKT0+e3Quc2V0KG4seSR2KGUpKTt9KSksdH1pZihlIGluc3RhbmNlb2YgU2V0KXtjb25zdCB0PW5ldyBTZXQ7cmV0dXJuIGUuZm9yRWFjaCgoZT0+e3QuYWRkKHkkdihlKSk7fSkpLHR9bGV0IHA7Y29uc3QgbD1lO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGwuY2xvbmUpcD1sLmNsb25lKCk7ZWxzZSBpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBsLm1hcCYmXCJmdW5jdGlvblwiPT10eXBlb2YgbC5mb3JFYWNoKXA9bC5tYXAoeSR2KTtlbHNlIGlmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGwubm90aWZ5Q2hhbmdlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBsLndhdGNoKXA9bC5jbG9uZSgpO2Vsc2Uge3A9e307Zm9yKGNvbnN0IHQgb2YgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZSkpcFt0XT15JHYoZVt0XSk7fXJldHVybiBwfWZ1bmN0aW9uIGwkUChlLHQpe3JldHVybiBlPT09dHx8XCJudW1iZXJcIj09dHlwZW9mIGUmJmlzTmFOKGUpJiZcIm51bWJlclwiPT10eXBlb2YgdCYmaXNOYU4odCl8fFwiZnVuY3Rpb25cIj09dHlwZW9mKGV8fHt9KS5nZXRUaW1lJiZcImZ1bmN0aW9uXCI9PXR5cGVvZih0fHx7fSkuZ2V0VGltZSYmZS5nZXRUaW1lKCk9PT10LmdldFRpbWUoKXx8ITF9XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5mdW5jdGlvbiBuJFYocixuLHQ9ITEpe3JldHVybiBlJEoocixuLHQpfWZ1bmN0aW9uIHQkTihyLG4pe2lmKG51bGwhPW4pcmV0dXJuIG5bcl18fGkkMTYoci5zcGxpdChcIi5cIiksITEsbil9ZnVuY3Rpb24gbyRJKHIsbix0KXtjb25zdCBvPXIuc3BsaXQoXCIuXCIpLGU9by5wb3AoKSx1PWkkMTYobywhMCx0KTt1JiZlJiYodVtlXT1uKTt9ZnVuY3Rpb24gaSQxNihyLG4sdCl7bGV0IG89dDtmb3IoY29uc3QgaSBvZiByKXtpZihudWxsPT1vKXJldHVybjtpZighKGkgaW4gbykpe2lmKCFuKXJldHVybjtvW2ldPXt9O31vPW9baV07fXJldHVybiBvfWZ1bmN0aW9uIGUkSihuLHQsbyl7cmV0dXJuIHQ/T2JqZWN0LmtleXModCkucmVkdWNlKChmdW5jdGlvbihuLGkpe2xldCB1PW5baV0sYz10W2ldO3JldHVybiB1PT09Yz9uOnZvaWQgMD09PXU/KG5baV09eSR2KGMpLG4pOihBcnJheS5pc0FycmF5KGMpfHxBcnJheS5pc0FycmF5KG4pPyh1PXU/QXJyYXkuaXNBcnJheSh1KT9uW2ldPXUuY29uY2F0KCk6bltpXT1bdV06bltpXT1bXSxjJiYoQXJyYXkuaXNBcnJheShjKXx8KGM9W2NdKSxvP2MuZm9yRWFjaCgocj0+ey0xPT09dS5pbmRleE9mKHIpJiZ1LnB1c2gocik7fSkpOm5baV09Yy5jb25jYXQoKSkpOmMmJlwib2JqZWN0XCI9PXR5cGVvZiBjP25baV09ZSRKKHUsYyxvKTpuLmhhc093blByb3BlcnR5KGkpJiYhdC5oYXNPd25Qcm9wZXJ0eShpKXx8KG5baV09Yyksbil9KSxufHx7fSk6bn1cblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmNvbnN0IHMkSD17YXBpS2V5OnZvaWQgMCxhcHBsaWNhdGlvblVybDplJEwubG9jYXRpb24mJmUkTC5sb2NhdGlvbi5ocmVmLGFzc2V0c1BhdGg6XCJcIixmb250c1VybDpcImh0dHBzOi8vc3RhdGljLmFyY2dpcy5jb20vZm9udHNcIixnZW9tZXRyeVNlcnZpY2U6bnVsbCxnZW9tZXRyeVNlcnZpY2VVcmw6XCJodHRwczovL3V0aWxpdHkuYXJjZ2lzb25saW5lLmNvbS9hcmNnaXMvcmVzdC9zZXJ2aWNlcy9HZW9tZXRyeS9HZW9tZXRyeVNlcnZlclwiLGdlb1JTU1NlcnZpY2VVcmw6XCJodHRwczovL3V0aWxpdHkuYXJjZ2lzLmNvbS9zaGFyaW5nL3Jzc1wiLGttbFNlcnZpY2VVcmw6XCJodHRwczovL3V0aWxpdHkuYXJjZ2lzLmNvbS9zaGFyaW5nL2ttbFwiLHBvcnRhbFVybDpcImh0dHBzOi8vd3d3LmFyY2dpcy5jb21cIix3b3JrZXJzOntsb2FkZXJDb25maWc6e2hhczp7fSxwYXRoczp7fSxtYXA6e30scGFja2FnZXM6W119fSxyZXF1ZXN0OntodHRwc0RvbWFpbnM6W1wiYXJjZ2lzLmNvbVwiLFwiYXJjZ2lzb25saW5lLmNvbVwiLFwiZXNyaWtyLmNvbVwiLFwicHJlbWl1bXNlcnZpY2VzLmJsYWNrYnJpZGdlLmNvbVwiLFwiZXNyaXByZW1pdW0uYWNjdXdlYXRoZXIuY29tXCIsXCJnYm0uZGlnaXRhbGdsb2JlLmNvbVwiLFwiZmlyc3Rsb29rLmRpZ2l0YWxnbG9iZS5jb21cIixcIm1zaS5kaWdpdGFsZ2xvYmUuY29tXCJdLGludGVyY2VwdG9yczpbXSxtYXhVcmxMZW5ndGg6MmUzLHByb3h5UnVsZXM6W10scHJveHlVcmw6bnVsbCx0aW1lb3V0OjZlNCx0cnVzdGVkU2VydmVyczpbXSx1c2VJZGVudGl0eTohMH0sbG9nOntpbnRlcmNlcHRvcnM6W10sbGV2ZWw6bnVsbH19O2lmKGUkTC5lc3JpQ29uZmlnJiYobiRWKHMkSCxlJEwuZXNyaUNvbmZpZywhMCksZGVsZXRlIHMkSC5oYXMpLCFzJEguYXNzZXRzUGF0aCl7Y29uc3QgZT1cIjQuMTkuMFwiO3MkSC5hc3NldHNQYXRoPWBodHRwczovL2pzLmFyY2dpcy5jb20vJHtlLnNsaWNlKDAsLTIpfS9AYXJjZ2lzL2NvcmUvYXNzZXRzYDt9cyRILmJhc2VVcmwmJmNvbnNvbGUud2FybihcIltlc3JpLmNvbmZpZ11cIixcImJhc2VVcmwgaGFzIGJlZW4gcmVwbGFjZWQgYnkgYXNzZXRzUGF0aFwiKSxPYmplY3QuZGVmaW5lUHJvcGVydHkocyRILFwiYmFzZVVybFwiLHtzZXQoKXtjb25zb2xlLndhcm4oXCJbZXNyaS5jb25maWddXCIsXCJiYXNlVXJsIGhhcyBiZWVuIHJlcGxhY2VkIGJ5IGFzc2V0c1BhdGhcIik7fX0pLHMkSC5yZXF1ZXN0LmNvcnNFbmFibGVkU2VydmVycz1bXSxzJEgucmVxdWVzdC5jb3JzRW5hYmxlZFNlcnZlcnMucHVzaD1mdW5jdGlvbigpe3JldHVybiBjb25zb2xlLndhcm4oXCJbZXNyaS5jb25maWddXCIsXCJyZXF1ZXN0LmNvcnNFbmFibGVkU2VydmVycyBpcyBub3Qgc3VwcG9ydGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgcmVsZWFzZS4gU2VlIGh0dHA6Ly9lc3JpdXJsLmNvbS9jb3JzODY2NFwiKSwwfTtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmZ1bmN0aW9uIHIkQShuKXtyZXR1cm4gbnVsbCE9bn1mdW5jdGlvbiB0JE0obil7cmV0dXJuIG51bGw9PW59ZnVuY3Rpb24gdSRQKG4pe3JldHVybiB2b2lkIDA9PT1ufWZ1bmN0aW9uIGUkSShuKXtyZXR1cm4gbn1mdW5jdGlvbiBjJDEzKG4sdCl7cmV0dXJuIHIkQShuKT9uOlwiZnVuY3Rpb25cIj09dHlwZW9mIHQ/dCgpOnR9ZnVuY3Rpb24gbCRPKG4pe3JldHVybiByJEEobikmJm4uZGVzdHJveSgpLG51bGx9ZnVuY3Rpb24gaSQxNShuKXtyZXR1cm4gciRBKG4pJiZuLmRpc3Bvc2UoKSxudWxsfWZ1bmN0aW9uIHMkRyhuKXtyZXR1cm4gciRBKG4pJiZuLnJlbW92ZSgpLG51bGx9ZnVuY3Rpb24gcCQxNyhuKXtyZXR1cm4gbnVsbH1mdW5jdGlvbiB5JHUobixyKXtjb25zdCB0PW5ldyBBcnJheTtmb3IoY29uc3QgdSBvZiBuKXQucHVzaCh2JGgodSxudWxsLHIpKTtyZXR1cm4gdH1mdW5jdGlvbiBkJEYobixyKXtmb3IoY29uc3QgdCBvZiBuKXYkaCh0LG51bGwscik7fWZ1bmN0aW9uIHYkaChuLHQsdSl7cmV0dXJuIHIkQShuKT91KG4pOnR9ZnVuY3Rpb24gQSRkKG4sdCl7cmV0dXJuIHIkQShuKT90KG4pOm51bGx9ZnVuY3Rpb24gZyRvKG4sLi4ucil7bGV0IHQ9bix1PTA7Zm9yKDt1PHIubGVuZ3RoJiZ0Oyl0PXRbclt1KytdXTtyZXR1cm4gdH1mdW5jdGlvbiBtJEYobil7cmV0dXJuIG59XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5jb25zdCBlJEg9L1xceyhbXlxcfV0rKVxcfS9nO2Z1bmN0aW9uIG4kVSh0KXtyZXR1cm4gbnVsbD09dD9cIlwiOnR9ZnVuY3Rpb24gciR6KHIsbyl7cmV0dXJuIHIucmVwbGFjZShlJEgsXCJvYmplY3RcIj09dHlwZW9mIG8/KGUscik9Pm4kVSh0JE4ocixvKSk6KHQsZSk9Pm4kVShvKGUpKSl9ZnVuY3Rpb24gbyRIKHQsZSl7cmV0dXJuIHQucmVwbGFjZSgvKFtcXC4kPyp8e31cXChcXClcXFtcXF1cXFxcXFwvXFwrXFwtXl0pL2csKHQ9PmUmJi0xIT09ZS5pbmRleE9mKHQpP3Q6YFxcXFwke3R9YCkpfWZ1bmN0aW9uIGMkMTIodCl7bGV0IGU9MDtmb3IobGV0IG49MDtuPHQubGVuZ3RoO24rKyllPShlPDw1KS1lK3QuY2hhckNvZGVBdChuKSxlfD0wO3JldHVybiBlfWZ1bmN0aW9uIHUkTyh0KXtyZXR1cm4gKG5ldyBET01QYXJzZXIpLnBhcnNlRnJvbVN0cmluZyh0fHxcIlwiLFwidGV4dC9odG1sXCIpLmJvZHkuaW5uZXJUZXh0fHxcIlwifVxuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuY29uc3QgbyRHPXtpbmZvOjAsd2FybjoxLGVycm9yOjIsbm9uZTozfTtjbGFzcyBuJFR7Y29uc3RydWN0b3IoZSl7dGhpcy5sZXZlbD1udWxsLHRoaXMuX21vZHVsZT1cIlwiLHRoaXMuX3BhcmVudD1udWxsLHRoaXMud3JpdGVyPW51bGwsdGhpcy5fbG9nZ2VkTWVzc2FnZXM9e2Vycm9yOm5ldyBNYXAsd2FybjpuZXcgTWFwLGluZm86bmV3IE1hcH0sbnVsbCE9ZS5sZXZlbCYmKHRoaXMubGV2ZWw9ZS5sZXZlbCksbnVsbCE9ZS53cml0ZXImJih0aGlzLndyaXRlcj1lLndyaXRlciksdGhpcy5fbW9kdWxlPWUubW9kdWxlLG4kVC5fbG9nZ2Vyc1t0aGlzLm1vZHVsZV09dGhpcztjb25zdCB0PXRoaXMubW9kdWxlLmxhc3RJbmRleE9mKFwiLlwiKTstMSE9PXQmJih0aGlzLl9wYXJlbnQ9biRULmdldExvZ2dlcih0aGlzLm1vZHVsZS5zbGljZSgwLHQpKSk7fWdldCBtb2R1bGUoKXtyZXR1cm4gdGhpcy5fbW9kdWxlfWdldCBwYXJlbnQoKXtyZXR1cm4gdGhpcy5fcGFyZW50fWVycm9yKC4uLmUpe3RoaXMuX2xvZyhcImVycm9yXCIsXCJhbHdheXNcIiwuLi5lKTt9d2FybiguLi5lKXt0aGlzLl9sb2coXCJ3YXJuXCIsXCJhbHdheXNcIiwuLi5lKTt9aW5mbyguLi5lKXt0aGlzLl9sb2coXCJpbmZvXCIsXCJhbHdheXNcIiwuLi5lKTt9ZXJyb3JPbmNlKC4uLmUpe3RoaXMuX2xvZyhcImVycm9yXCIsXCJvbmNlXCIsLi4uZSk7fXdhcm5PbmNlKC4uLmUpe3RoaXMuX2xvZyhcIndhcm5cIixcIm9uY2VcIiwuLi5lKTt9aW5mb09uY2UoLi4uZSl7dGhpcy5fbG9nKFwiaW5mb1wiLFwib25jZVwiLC4uLmUpO31lcnJvck9uY2VQZXJUaWNrKC4uLmUpe3RoaXMuX2xvZyhcImVycm9yXCIsXCJvbmNlUGVyVGlja1wiLC4uLmUpO313YXJuT25jZVBlclRpY2soLi4uZSl7dGhpcy5fbG9nKFwid2FyblwiLFwib25jZVBlclRpY2tcIiwuLi5lKTt9aW5mb09uY2VQZXJUaWNrKC4uLmUpe3RoaXMuX2xvZyhcImluZm9cIixcIm9uY2VQZXJUaWNrXCIsLi4uZSk7fWdldCB0ZXN0KCl7Y29uc3QgZT10aGlzO3JldHVybiB7bG9nZ2VkTWVzc2FnZXM6ZS5fbG9nZ2VkTWVzc2FnZXMsY2xlYXJMb2dnZWRXYXJuaW5nczooKT0+ZS5fbG9nZ2VkTWVzc2FnZXMud2Fybi5jbGVhcigpfX1zdGF0aWMgZ2V0IHRlc3RTaW5nbGV0b24oKXtyZXR1cm4ge3Jlc2V0TG9nZ2VycyhlPXt9KXtjb25zdCB0PW4kVC5fbG9nZ2VycztyZXR1cm4gbiRULl9sb2dnZXJzPWUsdH0sc2V0IHRocm90dGxpbmdEaXNhYmxlZChlKXtuJFQuX3Rocm90dGxpbmdEaXNhYmxlZD1lO319fXN0YXRpYyBnZXRMb2dnZXIoZSl7bGV0IHQ9biRULl9sb2dnZXJzW2VdO3JldHVybiB0fHwodD1uZXcgbiRUKHttb2R1bGU6ZX0pKSx0fV9sb2codCxyLC4uLm8pe2lmKCF0aGlzLl9tYXRjaExldmVsKHQpKXJldHVybjtpZihcImFsd2F5c1wiIT09ciYmIW4kVC5fdGhyb3R0bGluZ0Rpc2FibGVkKXtjb25zdCBlPXRoaXMuX2FyZ3NUb0tleShvKSxzPXRoaXMuX2xvZ2dlZE1lc3NhZ2VzW3RdLmdldChlKTtpZihcIm9uY2VcIj09PXImJm51bGwhPXN8fFwib25jZVBlclRpY2tcIj09PXImJnMmJnM+PW4kVC5fdGlja0NvdW50ZXIpcmV0dXJuO3RoaXMuX2xvZ2dlZE1lc3NhZ2VzW3RdLnNldChlLG4kVC5fdGlja0NvdW50ZXIpLG4kVC5fc2NoZWR1bGVUaWNrQ291bnRlckluY3JlbWVudCgpO31mb3IoY29uc3QgbiBvZiBzJEgubG9nLmludGVyY2VwdG9ycylpZihuKHQsdGhpcy5tb2R1bGUsLi4ubykpcmV0dXJuO3RoaXMuX2luaGVyaXRlZFdyaXRlcigpKHQsdGhpcy5tb2R1bGUsLi4ubyk7fV9wYXJlbnRXaXRoTWVtYmVyKGUscil7bGV0IG89dGhpcztmb3IoO3IkQShvKTspe2NvbnN0IHI9b1tlXTtpZihyJEEocikpcmV0dXJuIHI7bz1vLnBhcmVudDt9cmV0dXJuIHJ9X2luaGVyaXRlZFdyaXRlcigpe3JldHVybiB0aGlzLl9wYXJlbnRXaXRoTWVtYmVyKFwid3JpdGVyXCIsdGhpcy5fY29uc29sZVdyaXRlcil9X2NvbnNvbGVXcml0ZXIoZSx0LC4uLnIpe2NvbnNvbGVbZV0oYFske3R9XWAsLi4ucik7fV9tYXRjaExldmVsKHQpe2NvbnN0IHI9cyRILmxvZy5sZXZlbD9zJEgubG9nLmxldmVsOlwid2FyblwiO3JldHVybiBvJEdbdGhpcy5fcGFyZW50V2l0aE1lbWJlcihcImxldmVsXCIscildPD1vJEdbdF19X2FyZ3NUb0tleSguLi5lKXtjb25zdCB0PShlLHQpPT5cIm9iamVjdFwiIT10eXBlb2YgdHx8QXJyYXkuaXNBcnJheSh0KT90OlwiW09iamVjdF1cIjtyZXR1cm4gYyQxMihKU09OLnN0cmluZ2lmeShlLHQpKX1zdGF0aWMgX3NjaGVkdWxlVGlja0NvdW50ZXJJbmNyZW1lbnQoKXtuJFQuX3RpY2tDb3VudGVyU2NoZWR1bGVkfHwobiRULl90aWNrQ291bnRlclNjaGVkdWxlZD0hMCxQcm9taXNlLnJlc29sdmUoKS50aGVuKCgoKT0+e24kVC5fdGlja0NvdW50ZXIrKyxuJFQuX3RpY2tDb3VudGVyU2NoZWR1bGVkPSExO30pKSk7fX1uJFQuX2xvZ2dlcnM9e30sbiRULl90aWNrQ291bnRlcj0wLG4kVC5fdGlja0NvdW50ZXJTY2hlZHVsZWQ9ITEsbiRULl90aHJvdHRsaW5nRGlzYWJsZWQ9ITE7XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5jb25zdCBuJFM9biRULmdldExvZ2dlcihcImVzcmkuY29yZS5BY2Nlc3NvclwiKTtmdW5jdGlvbiByJHkoZSl7cmV0dXJuIG51bGw9PWU/ZTpuZXcgRGF0ZShlKX1mdW5jdGlvbiB0JEwoZSl7cmV0dXJuIG51bGw9PWU/ZTohIWV9ZnVuY3Rpb24gbyRGKGUpe3JldHVybiBudWxsPT1lP2U6ZS50b1N0cmluZygpfWZ1bmN0aW9uIHUkTihlKXtyZXR1cm4gbnVsbD09ZT9lOihlPXBhcnNlRmxvYXQoZSksaXNOYU4oZSk/MDplKX1mdW5jdGlvbiBhJFAoZSl7cmV0dXJuIG51bGw9PWU/ZTpNYXRoLnJvdW5kKHBhcnNlRmxvYXQoZSkpfWZ1bmN0aW9uIHMkRihlKXtyZXR1cm4gZSYmZS5jb25zdHJ1Y3RvciYmdm9pZCAwIT09ZS5jb25zdHJ1Y3Rvci5fX2FjY2Vzc29yTWV0YWRhdGFfX31mdW5jdGlvbiBsJE4oZSxuKXtyZXR1cm4gbnVsbCE9biYmZSYmIShuIGluc3RhbmNlb2YgZSl9ZnVuY3Rpb24gaSQxNChlKXtyZXR1cm4gZSYmXCJpc0NvbGxlY3Rpb25cImluIGV9ZnVuY3Rpb24gYyQxMShlKXtyZXR1cm4gZSYmZS5UeXBlP1wiZnVuY3Rpb25cIj09dHlwZW9mIGUuVHlwZT9lLlR5cGU6ZS5UeXBlLmJhc2U6bnVsbH1mdW5jdGlvbiBmJHooZSxuKXtpZighbnx8IW4uY29uc3RydWN0b3J8fCFpJDE0KG4uY29uc3RydWN0b3IpKXJldHVybiBwJDE2KGUsbik/bjpuZXcgZShuKTtjb25zdCByPWMkMTEoZS5wcm90b3R5cGUuaXRlbVR5cGUpLHQ9YyQxMShuLmNvbnN0cnVjdG9yLnByb3RvdHlwZS5pdGVtVHlwZSk7cmV0dXJuIHI/dD9yPT09dD9uOnIucHJvdG90eXBlLmlzUHJvdG90eXBlT2YodC5wcm90b3R5cGUpP25ldyBlKG4pOihwJDE2KGUsbiksbik6bmV3IGUobik6bn1mdW5jdGlvbiBwJDE2KGUscil7cmV0dXJuICEhcyRGKHIpJiYobiRTLmVycm9yKFwiQWNjZXNzb3Ijc2V0XCIsXCJBc3NpZ25pbmcgYW4gaW5zdGFuY2Ugb2YgJ1wiKyhyLmRlY2xhcmVkQ2xhc3N8fFwidW5rbm93blwiKStcIicgd2hpY2ggaXMgbm90IGEgc3ViY2xhc3Mgb2YgJ1wiK3YkZyhlKStcIidcIiksITApfWZ1bmN0aW9uIHkkdChlLG4pe3JldHVybiBudWxsPT1uP246aSQxNChlKT9mJHooZSxuKTpsJE4oZSxuKT9wJDE2KGUsbik/bjpuZXcgZShuKTpufWZ1bmN0aW9uIHYkZyhlKXtyZXR1cm4gZSYmZS5wcm90b3R5cGUmJmUucHJvdG90eXBlLmRlY2xhcmVkQ2xhc3N8fFwidW5rbm93blwifWZ1bmN0aW9uIGckbihlKXtzd2l0Y2goZSl7Y2FzZSBOdW1iZXI6cmV0dXJuIHUkTjtjYXNlIE4kNTpyZXR1cm4gYSRQO2Nhc2UgQm9vbGVhbjpyZXR1cm4gdCRMO2Nhc2UgU3RyaW5nOnJldHVybiBvJEY7Y2FzZSBEYXRlOnJldHVybiByJHk7ZGVmYXVsdDpyZXR1cm4geSR0LmJpbmQobnVsbCxlKX19ZnVuY3Rpb24gZCRFKGUsbil7Y29uc3Qgcj1nJG4oZSk7cmV0dXJuIDE9PT1hcmd1bWVudHMubGVuZ3RoP3I6cihuKX1mdW5jdGlvbiBoJEEoZSxuLHIpe3JldHVybiAxPT09YXJndW1lbnRzLmxlbmd0aD9oJEEuYmluZChudWxsLGUpOm4/QXJyYXkuaXNBcnJheShuKT9uLm1hcCgobj0+ZShuLHIpKSk6W2UobixyKV06bn1mdW5jdGlvbiBiJGUoZSxuKXtyZXR1cm4gMT09PWFyZ3VtZW50cy5sZW5ndGg/aCRBKGQkRS5iaW5kKG51bGwsZSkpOmgkQShkJEUuYmluZChudWxsLGUpLG4pfWZ1bmN0aW9uIG0kRShlLG4scil7cmV0dXJuIDAhPT1uJiZBcnJheS5pc0FycmF5KHIpP3IubWFwKChyPT5tJEUoZSxuLTEscikpKTplKHIpfWZ1bmN0aW9uIHckYyhlLG4scil7aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHckYy5iaW5kKG51bGwsZSxuKTtpZighcilyZXR1cm4gcjtsZXQgdD1uLG89cj1tJEUoZSxuLHIpO2Zvcig7dD4wJiZBcnJheS5pc0FycmF5KG8pOyl0LS0sbz1vWzBdO2lmKHZvaWQgMCE9PW8pZm9yKGxldCB1PTA7dTx0O3UrKylyPVtyXTtyZXR1cm4gcn1mdW5jdGlvbiBBJGMoZSxuLHIpe3JldHVybiAyPT09YXJndW1lbnRzLmxlbmd0aD93JGMoZCRFLmJpbmQobnVsbCxlKSxuKTp3JGMoZCRFLmJpbmQobnVsbCxlKSxuLHIpfWZ1bmN0aW9uICQkMyhlKXtyZXR1cm4gISFBcnJheS5pc0FycmF5KGUpJiYhZS5zb21lKChuPT57Y29uc3Qgcj10eXBlb2YgbjtyZXR1cm4gIShcInN0cmluZ1wiPT09cnx8XCJudW1iZXJcIj09PXJ8fFwiZnVuY3Rpb25cIj09PXImJmUubGVuZ3RoPjEpfSkpfWZ1bmN0aW9uIGokaihlLHIpe2lmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBqJGooZSkuY2FsbChudWxsLHIpO2NvbnN0IHQ9bmV3IFNldCxvPWUuZmlsdGVyKChlPT5cImZ1bmN0aW9uXCIhPXR5cGVvZiBlKSksdT1lLmZpbHRlcigoZT0+XCJmdW5jdGlvblwiPT10eXBlb2YgZSkpO2Zvcihjb25zdCBuIG9mIGUpXCJzdHJpbmdcIiE9dHlwZW9mIG4mJlwibnVtYmVyXCIhPXR5cGVvZiBufHx0LmFkZChuKTtsZXQgYT1udWxsLHM9bnVsbDtyZXR1cm4gKGUscik9PntpZihudWxsPT1lKXJldHVybiBlO2NvbnN0IGk9dHlwZW9mIGUsYz1cInN0cmluZ1wiPT09aXx8XCJudW1iZXJcIj09PWk7cmV0dXJuIGMmJih0LmhhcyhlKXx8dS5zb21lKChlPT5cInN0cmluZ1wiPT09aSYmZT09PVN0cmluZ3x8XCJudW1iZXJcIj09PWkmJmU9PT1OdW1iZXIpKSl8fFwib2JqZWN0XCI9PT1pJiZ1LnNvbWUoKG49PiFsJE4oZSxuKSkpP2U6KGMmJm8ubGVuZ3RoPyhhfHwoYT1vLm1hcCgoZT0+XCJzdHJpbmdcIj09dHlwZW9mIGU/YCcke2V9J2A6YCR7ZX1gKSkuam9pbihcIiwgXCIpKSxuJFMuZXJyb3IoXCJBY2Nlc3NvciNzZXRcIixgJyR7ZX0nIGlzIG5vdCBhIHZhbGlkIHZhbHVlIGZvciB0aGlzIHByb3BlcnR5LCBvbmx5IHRoZSBmb2xsb3dpbmcgdmFsdWVzIGFyZSB2YWxpZDogJHthfWApKTpcIm9iamVjdFwiPT10eXBlb2YgZSYmdS5sZW5ndGg/KHN8fChzPXUubWFwKChlPT52JGcoZSkpKS5qb2luKFwiLCBcIikpLG4kUy5lcnJvcihcIkFjY2Vzc29yI3NldFwiLGAnJHtlfScgaXMgbm90IGEgdmFsaWQgdmFsdWUgZm9yIHRoaXMgcHJvcGVydHksIHZhbHVlIG11c3QgYmUgb25lIG9mICR7c31gKSk6biRTLmVycm9yKFwiQWNjZXNzb3Ijc2V0XCIsYCcke2V9JyBpcyBub3QgYSB2YWxpZCB2YWx1ZSBmb3IgdGhpcyBwcm9wZXJ0eWApLHImJihyLnZhbGlkPSExKSxudWxsKX19ZnVuY3Rpb24gayRhKGUscil7aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGskYShlKS5jYWxsKG51bGwscik7Y29uc3QgdD17fSxvPVtdLHU9W107Zm9yKGNvbnN0IG4gaW4gZS50eXBlTWFwKXtjb25zdCByPWUudHlwZU1hcFtuXTt0W25dPWQkRShyKSxvLnB1c2godiRnKHIpKSx1LnB1c2gobik7fWNvbnN0IGE9KCk9PmAnJHtvLmpvaW4oXCInLCAnXCIpfSdgLGk9KCk9PmAnJHt1LmpvaW4oXCInLCAnXCIpfSdgLGM9XCJzdHJpbmdcIj09dHlwZW9mIGUua2V5P249Pm5bZS5rZXldOmUua2V5O3JldHVybiByPT57aWYoZS5iYXNlJiYhbCROKGUuYmFzZSxyKSlyZXR1cm4gcjtpZihudWxsPT1yKXJldHVybiByO2NvbnN0IG89YyhyKXx8ZS5kZWZhdWx0S2V5VmFsdWUsdT10W29dO2lmKCF1KXJldHVybiBuJFMuZXJyb3IoXCJBY2Nlc3NvciNzZXRcIixgSW52YWxpZCBwcm9wZXJ0eSB2YWx1ZSwgdmFsdWUgbmVlZHMgdG8gYmUgb25lIG9mICR7YSgpfSwgb3IgYSBwbGFpbiBvYmplY3QgdGhhdCBjYW4gYXV0b2Nhc3QgKGhhdmluZyAudHlwZSA9ICR7aSgpfSlgKSxudWxsO2lmKCFsJE4oZS50eXBlTWFwW29dLHIpKXJldHVybiByO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlLmtleSYmIXMkRihyKSl7Y29uc3Qgbj17fTtmb3IoY29uc3QgdCBpbiByKXQhPT1lLmtleSYmKG5bdF09clt0XSk7cmV0dXJuIHUobil9cmV0dXJuIHUocil9fWNsYXNzIE4kNXt9Y29uc3QgUyRhPXtuYXRpdmU6ZT0+KHt0eXBlOlwibmF0aXZlXCIsdmFsdWU6ZX0pLGFycmF5OmU9Pih7dHlwZTpcImFycmF5XCIsdmFsdWU6ZX0pLG9uZU9mOmU9Pih7dHlwZTpcIm9uZS1vZlwiLHZhbHVlczplfSl9O2Z1bmN0aW9uIFQkNyhlKXtpZighZXx8IShcInR5cGVcImluIGUpKXJldHVybiAhMTtzd2l0Y2goZS50eXBlKXtjYXNlXCJuYXRpdmVcIjpjYXNlXCJhcnJheVwiOmNhc2VcIm9uZS1vZlwiOnJldHVybiAhMH1yZXR1cm4gITF9ZnVuY3Rpb24gTSRiKGUpe3N3aXRjaChlLnR5cGUpe2Nhc2VcIm5hdGl2ZVwiOnJldHVybiBkJEUoZS52YWx1ZSk7Y2FzZVwiYXJyYXlcIjpyZXR1cm4gaCRBKE0kYihlLnZhbHVlKSk7Y2FzZVwib25lLW9mXCI6cmV0dXJuIF8kNyhlKTtkZWZhdWx0OnJldHVybiBudWxsfX1mdW5jdGlvbiBfJDcoZSl7bGV0IHI9bnVsbDtyZXR1cm4gKHQsbyk9PkMkYSh0LGUpP3Q6KG51bGw9PXImJihyPUIkNihlKSksbiRTLmVycm9yKFwiQWNjZXNzb3Ijc2V0XCIsYEludmFsaWQgcHJvcGVydHkgdmFsdWUsIHZhbHVlIG5lZWRzIHRvIGJlIG9mIHR5cGUgJHtyfWApLG8mJihvLnZhbGlkPSExKSxudWxsKX1mdW5jdGlvbiBCJDYoZSl7c3dpdGNoKGUudHlwZSl7Y2FzZVwibmF0aXZlXCI6c3dpdGNoKGUudmFsdWUpe2Nhc2UgTnVtYmVyOnJldHVybiBcIm51bWJlclwiO2Nhc2UgU3RyaW5nOnJldHVybiBcInN0cmluZ1wiO2Nhc2UgQm9vbGVhbjpyZXR1cm4gXCJib29sZWFuXCI7Y2FzZSBOJDU6cmV0dXJuIFwiaW50ZWdlclwiO2Nhc2UgRGF0ZTpyZXR1cm4gXCJkYXRlXCI7ZGVmYXVsdDpyZXR1cm4gdiRnKGUudmFsdWUpfWNhc2VcImFycmF5XCI6cmV0dXJuIGBhcnJheSBvZiAke0IkNihlLnZhbHVlKX1gO2Nhc2VcIm9uZS1vZlwiOntjb25zdCBuPWUudmFsdWVzLm1hcCgoZT0+QiQ2KGUpKSk7cmV0dXJuIGBvbmUgb2YgJHtuLnNsaWNlKDAsbi5sZW5ndGgtMSl9IG9yICR7bltuLmxlbmd0aC0xXX1gfX1yZXR1cm4gXCJ1bmtub3duXCJ9ZnVuY3Rpb24gQyRhKGUsbil7aWYobnVsbD09ZSlyZXR1cm4gITA7c3dpdGNoKG4udHlwZSl7Y2FzZVwibmF0aXZlXCI6c3dpdGNoKG4udmFsdWUpe2Nhc2UgTnVtYmVyOmNhc2UgTiQ1OnJldHVybiBcIm51bWJlclwiPT10eXBlb2YgZTtjYXNlIEJvb2xlYW46cmV0dXJuIFwiYm9vbGVhblwiPT10eXBlb2YgZTtjYXNlIFN0cmluZzpyZXR1cm4gXCJzdHJpbmdcIj09dHlwZW9mIGV9cmV0dXJuIGUgaW5zdGFuY2VvZiBuLnZhbHVlO2Nhc2VcImFycmF5XCI6cmV0dXJuICEhQXJyYXkuaXNBcnJheShlKSYmIWUuc29tZSgoZT0+IUMkYShlLG4udmFsdWUpKSk7Y2FzZVwib25lLW9mXCI6cmV0dXJuIG4udmFsdWVzLnNvbWUoKG49PkMkYShlLG4pKSl9fVxuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuZnVuY3Rpb24gciR4KHIpe3JldHVybiBuJFIoKCgpPT5yLmZvckVhY2goKHI9PnIkQShyKSYmci5yZW1vdmUoKSkpKSl9ZnVuY3Rpb24gbiRSKGUpe3JldHVybiB7cmVtb3ZlOigpPT57ZSYmKGUoKSxlPXZvaWQgMCk7fX19XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5mdW5jdGlvbiBlJEcocil7cmV0dXJuIHI/ci5fX2FjY2Vzc29yX18/ci5fX2FjY2Vzc29yX186ci5wcm9wZXJ0eUludmFsaWRhdGVkP3I6bnVsbDpudWxsfWZ1bmN0aW9uIGkkMTMocixuKXtyZXR1cm4gbnVsbCE9ciYmci5tZXRhZGF0YXMmJm51bGwhPXIubWV0YWRhdGFzW25dfWZ1bmN0aW9uIHUkTShyLG4sdCl7aWYodCl7cmV0dXJuIGEkTyhyLG4se3BvbGljeTp0LHBhdGg6XCJcIn0pfXJldHVybiBhJE8ocixuLG51bGwpfWZ1bmN0aW9uIGEkTyh0LGUsaSl7cmV0dXJuIGU/T2JqZWN0LmtleXMoZSkucmVkdWNlKChmdW5jdGlvbih0LG8pe2xldCB1PW51bGwsbD1cIm1lcmdlXCI7aWYoaSYmKHU9aS5wYXRoP2Ake2kucGF0aH0uJHtvfWA6byxsPWkucG9saWN5KHUpKSxcInJlcGxhY2VcIj09PWwpcmV0dXJuIHRbb109ZVtvXSx0O2lmKHZvaWQgMD09PXRbb10pcmV0dXJuIHRbb109eSR2KGVbb10pLHQ7bGV0IGY9dFtvXSxzPWVbb107aWYoZj09PXMpcmV0dXJuIHQ7aWYoQXJyYXkuaXNBcnJheShzKXx8QXJyYXkuaXNBcnJheSh0KSlmPWY/QXJyYXkuaXNBcnJheShmKT90W29dPWYuY29uY2F0KCk6dFtvXT1bZl06dFtvXT1bXSxzJiYoQXJyYXkuaXNBcnJheShzKXx8KHM9W3NdKSxzLmZvckVhY2goKHI9PnstMT09PWYuaW5kZXhPZihyKSYmZi5wdXNoKHIpO30pKSk7ZWxzZSBpZihzJiZcIm9iamVjdFwiPT10eXBlb2YgcylpZihpKXtjb25zdCByPWkucGF0aDtpLnBhdGg9bSRGKHUpLHRbb109YSRPKGYscyxpKSxpLnBhdGg9cjt9ZWxzZSB0W29dPWEkTyhmLHMsbnVsbCk7ZWxzZSB0Lmhhc093blByb3BlcnR5KG8pJiYhZS5oYXNPd25Qcm9wZXJ0eShvKXx8KHRbb109cyk7cmV0dXJuIHR9KSx0fHx7fSk6dH1mdW5jdGlvbiBsJE0ocil7cmV0dXJuIHI/XCJzdHJpbmdcIj09dHlwZW9mIHImJi0xPT09ci5pbmRleE9mKFwiLlwiKT9yOmYkeShyKTpyfWZ1bmN0aW9uIGYkeShyKXtyZXR1cm4gQXJyYXkuaXNBcnJheShyKT9yOnIuc3BsaXQoXCIuXCIpfWZ1bmN0aW9uIHMkRShyKXtyZXR1cm4gci5pbmRleE9mKFwiLFwiKT4tMT9yLnNwbGl0KFwiLFwiKS5tYXAoKHI9PnIudHJpbSgpKSk6W3IudHJpbSgpXX1mdW5jdGlvbiBjJDEwKHIpe2lmKEFycmF5LmlzQXJyYXkocikpe2NvbnN0IG49W107Zm9yKGNvbnN0IHQgb2YgciluLnB1c2goLi4ucyRFKHQpKTtyZXR1cm4gbn1yZXR1cm4gcyRFKHIpfWZ1bmN0aW9uIHkkcyhyLG4sZSxpKXtjb25zdCBvPWMkMTAobik7aWYoMSE9PW8ubGVuZ3RoKXtjb25zdCBuPW8ubWFwKChuPT5pKHIsbixlKSkpO3JldHVybiByJHgobil9cmV0dXJuIGkocixvWzBdLGUpfWZ1bmN0aW9uIGgkeihyKXtsZXQgbj0hMTtyZXR1cm4gKCk9PntufHwobj0hMCxyKCkpO319XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5mdW5jdGlvbiBlJEYodCxlKXtjb25zdCBpPVwiP1wiPT09dFt0Lmxlbmd0aC0xXT90LnNsaWNlKDAsLTEpOnQ7aWYobnVsbCE9ZS5nZXRJdGVtQXR8fEFycmF5LmlzQXJyYXkoZSkpe2NvbnN0IHQ9cGFyc2VJbnQoaSwxMCk7aWYoIWlzTmFOKHQpKXJldHVybiBBcnJheS5pc0FycmF5KGUpP2VbdF06ZS5nZXRJdGVtQXQodCl9Y29uc3Qgbz1lJEcoZSk7cmV0dXJuIGkkMTMobyxpKT9vLmdldChpKTplW2ldfWZ1bmN0aW9uIGkkMTIodCxuLHIpe2lmKG51bGw9PXQpcmV0dXJuIHQ7Y29uc3Qgbz1lJEYobltyXSx0KTtyZXR1cm4gIW8mJnI8bi5sZW5ndGgtMT92b2lkIDA6cj09PW4ubGVuZ3RoLTE/bzppJDEyKG8sbixyKzEpfWZ1bmN0aW9uIG8kRShuLHIsbz0wKXtyZXR1cm4gXCJzdHJpbmdcIj09dHlwZW9mIHImJi0xPT09ci5pbmRleE9mKFwiLlwiKT9lJEYocixuKTppJDEyKG4sZiR5KHIpLG8pfWZ1bmN0aW9uIHUkTCh0LG4pe3JldHVybiBvJEUodCxuKX1mdW5jdGlvbiBmJHgodCxuKXtyZXR1cm4gdm9pZCAwIT09byRFKG4sdCl9XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5jbGFzcyBvJER7Y29uc3RydWN0b3IodCl7dGhpcy5hdXRvRGVzdHJveT0hMSx0aGlzLnByb3BlcnRpZXM9dDt9fWZ1bmN0aW9uIG4kUShyKXtsZXQgbj1yLmNvbnN0cnVjdG9yLl9fYWNjZXNzb3JNZXRhZGF0YV9fO2NvbnN0IGM9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHIuY29uc3RydWN0b3IsXCJfX2FjY2Vzc29yTWV0YWRhdGFfX1wiKTtpZihuKXtpZighYyl7Y29uc3QgZT1PYmplY3QuY3JlYXRlKG4ucHJvcGVydGllcyksYz1uLmF1dG9EZXN0cm95O2Zvcihjb25zdCByIGluIGUpZVtyXT15JHYoZVtyXSk7bj1uZXcgbyREKGUpLG4uYXV0b0Rlc3Ryb3k9YyxPYmplY3QuZGVmaW5lUHJvcGVydHkoci5jb25zdHJ1Y3RvcixcIl9fYWNjZXNzb3JNZXRhZGF0YV9fXCIse3ZhbHVlOm4sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KTt9fWVsc2Ugbj1uZXcgbyREKHt9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoci5jb25zdHJ1Y3RvcixcIl9fYWNjZXNzb3JNZXRhZGF0YV9fXCIse3ZhbHVlOm4sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KTtyZXR1cm4gbSRGKHIuY29uc3RydWN0b3IuX19hY2Nlc3Nvck1ldGFkYXRhX18pfWZ1bmN0aW9uIGMkJCh0KXtyZXR1cm4gbiRRKHQpLnByb3BlcnRpZXN9ZnVuY3Rpb24gcyREKHQsZSl7Y29uc3Qgcj1jJCQodCk7bGV0IG89cltlXTtyZXR1cm4gb3x8KG89cltlXT17fSksb31mdW5jdGlvbiBpJDExKHQsZSl7cmV0dXJuIHUkTSh0LGUsXyQ2KX1jb25zdCBwJDE1PS9eKD86W14uXStcXC4pPyg/OnZhbHVlfHR5cGV8KD86anNvblxcLnR5cGV8anNvblxcLm9yaWdpbnNcXC5bXi5dXFwudHlwZSkpJC87ZnVuY3Rpb24gXyQ2KHQpe3JldHVybiBwJDE1LnRlc3QodCk/XCJyZXBsYWNlXCI6XCJtZXJnZVwifVxuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xubiRULmdldExvZ2dlcihcImVzcmkuY29yZS5hY2Nlc3NvclN1cHBvcnQuc2V0XCIpO2Z1bmN0aW9uIHQkSyhlLHIscyl7aWYoZSYmcilpZihcIm9iamVjdFwiPT10eXBlb2Ygcilmb3IoY29uc3QgbyBvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhyKSl0JEsoZSxvLHJbb10pO2Vsc2Uge2lmKC0xIT09ci5pbmRleE9mKFwiLlwiKSl7Y29uc3QgaT1yLnNwbGl0KFwiLlwiKSxmPWkuc3BsaWNlKGkubGVuZ3RoLTEsMSlbMF07cmV0dXJuIHZvaWQgdCRLKHUkTChlLGkpLGYscyl9ZVtyXT1zO319XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5jb25zdCBnJG09biRULmdldExvZ2dlcihcImVzcmkuY29yZS5hY2Nlc3NvclN1cHBvcnQuZGVjb3JhdG9ycy5wcm9wZXJ0eVwiKTtmdW5jdGlvbiB5JHIodD17fSl7cmV0dXJuIChuLG8scyk9PntpZihuPT09RnVuY3Rpb24ucHJvdG90eXBlKXRocm93IG5ldyBFcnJvcihgSW5hcHByb3ByaWF0ZSB1c2Ugb2YgQHByb3BlcnR5KCkgb24gYSBzdGF0aWMgZmllbGQ6ICR7bi5uYW1lfS4ke299LiBBY2Nlc3NvciBkb2VzIG5vdCBzdXBwb3J0IHN0YXRpYyBwcm9wZXJ0aWVzLmApO2NvbnN0IGk9cyREKG4sbyk7cyYmKHMuZ2V0fHxzLnNldD8oaS5nZXQ9cy5nZXR8fGkuZ2V0LGkuc2V0PXMuc2V0fHxpLnNldCk6XCJ2YWx1ZVwiaW4gcyYmKFwidmFsdWVcImluIHQmJmckbS53YXJuKGBAcHJvcGVydHkoKSB3aWxsIHJlZGVmaW5lIHRoZSB2YWx1ZSBvZiBcIiR7b31cIiBvbiBcIiR7bi5jb25zdHJ1Y3Rvci5uYW1lfVwiIGFscmVhZHkgZGVmaW5lZCBpbiB0aGUgbWV0YWRhdGFgLHQpLGkudmFsdWU9dC52YWx1ZT1zLnZhbHVlKSksbnVsbCE9dC5yZWFkT25seSYmKGkucmVhZE9ubHk9dC5yZWFkT25seSk7Y29uc3QgYT10LmFsaWFzT2Y7aWYoYSl7Y29uc3QgdD1cInN0cmluZ1wiPT10eXBlb2YgYT9hOmEuc291cmNlLGU9XCJzdHJpbmdcIj09dHlwZW9mIGE/bnVsbDohMD09PWEub3ZlcnJpZGFibGU7bGV0IHI7aS5kZXBlbmRzT249W3RdLGkuZ2V0PWZ1bmN0aW9uKCl7bGV0IGU9dSRMKHRoaXMsdCk7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZSl7cnx8KHI9dC5zcGxpdChcIi5cIikuc2xpY2UoMCwtMSkuam9pbihcIi5cIikpO2NvbnN0IG49dSRMKHRoaXMscik7biYmKGU9ZS5iaW5kKG4pKTt9cmV0dXJuIGV9LGkucmVhZE9ubHl8fChpLnNldD1lP2Z1bmN0aW9uKHQpe3ZvaWQgMCE9PXQ/dGhpcy5fb3ZlcnJpZGUobyx0KTp0aGlzLl9jbGVhck92ZXJyaWRlKG8pO306ZnVuY3Rpb24oZSl7dCRLKHRoaXMsdCxlKTt9KTt9Y29uc3QgdT10LnR5cGUsYz10LnR5cGVzO2kuY2FzdHx8KHU/aS5jYXN0PXYkZih1KTpjJiYoQXJyYXkuaXNBcnJheShjKT9pLmNhc3Q9aCRBKGskYShjWzBdKSk6aS5jYXN0PWskYShjKSkpLHQucmFuZ2UmJihpLmNhc3Q9aiRpKGkuY2FzdCx0LnJhbmdlKSksaSQxMShpLHQpO319ZnVuY3Rpb24gaCR5KHQsZSxyKXtjb25zdCBuPXMkRCh0LHIpO24uanNvbnx8KG4uanNvbj17fSk7bGV0IG89bi5qc29uO3JldHVybiB2b2lkIDAhPT1lJiYoby5vcmlnaW5zfHwoby5vcmlnaW5zPXt9KSxvLm9yaWdpbnNbZV18fChvLm9yaWdpbnNbZV09e30pLG89by5vcmlnaW5zW2VdKSxvfWZ1bmN0aW9uIHYkZih0KXtsZXQgZT0wLHI9dDtpZihUJDcodCkpcmV0dXJuIE0kYih0KTtmb3IoO0FycmF5LmlzQXJyYXkocikmJjE9PT1yLmxlbmd0aCYmXCJzdHJpbmdcIiE9dHlwZW9mIHJbMF0mJlwibnVtYmVyXCIhPXR5cGVvZiByWzBdOylyPXJbMF0sZSsrO2NvbnN0IGw9cjtpZigkJDMobCkpcmV0dXJuIDA9PT1lP2okaihsKTp3JGMoaiRqKGwpLGUpO2lmKDE9PT1lKXJldHVybiBiJGUobCk7aWYoZT4xKXJldHVybiBBJGMobCxlKTtjb25zdCBmPXQ7cmV0dXJuIGYuZnJvbT9mLmZyb206ZCRFKGYpfWZ1bmN0aW9uIGokaSh0LGUpe3JldHVybiByPT57bGV0IG49K3Qocik7cmV0dXJuIG51bGwhPWUuc3RlcCYmKG49TWF0aC5yb3VuZChuL2Uuc3RlcCkqZS5zdGVwKSxudWxsIT1lLm1pbiYmKG49TWF0aC5tYXgoZS5taW4sbikpLG51bGwhPWUubWF4JiYobj1NYXRoLm1pbihlLm1heCxuKSksbn19XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5mdW5jdGlvbiBvJEMobyx0KXtjb25zdCBlPXQ/ey4uLnQsc291cmNlOm99Om87cmV0dXJuIHkkcih7YWxpYXNPZjplfSl9XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5jb25zdCBvJEI9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztmdW5jdGlvbiByJHcobil7Y29uc3Qgbz1cIl9fYWNjZXNzb3JNZXRhZGF0YV9fXCJpbiBuP2QkRShuKTpuO3JldHVybiBmdW5jdGlvbiguLi50KXtpZih0LnB1c2gobyksXCJudW1iZXJcIj09dHlwZW9mIHRbMl0pdGhyb3cgbmV3IEVycm9yKFwiVXNpbmcgQGNhc3QgaGFzIHBhcmFtZXRlciBkZWNvcmF0b3IgaXMgbm90IHN1cHBvcnRlZCBzaW5jZSA0LjE2XCIpO3JldHVybiBlJEUuYXBwbHkodGhpcyx0KX19ZnVuY3Rpb24gZSRFKHQsbyxyLGUpe3MkRCh0LG8pLmNhc3Q9ZTt9ZnVuY3Rpb24gaSQxMCh0KXtyZXR1cm4gZnVuY3Rpb24obyxyKXtzJEQobyx0KS5jYXN0PW9bcl07fX1mdW5jdGlvbiBjJF8oLi4udCl7aWYoMyE9PXQubGVuZ3RofHxcInN0cmluZ1wiIT10eXBlb2YgdFsxXSlyZXR1cm4gMT09PXQubGVuZ3RoJiZcIltvYmplY3QgRnVuY3Rpb25dXCI9PT1vJEIuY2FsbCh0WzBdKT9yJHcodFswXSk6MT09PXQubGVuZ3RoJiZcInN0cmluZ1wiPT10eXBlb2YgdFswXT9pJDEwKHRbMF0pOnZvaWQgMH1cblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmNvbnN0IGUkRD1uZXcgU2V0O2Z1bmN0aW9uIGkkJChuLGksbz0hMSl7byYmZSRELmhhcyhpKXx8KG8mJmUkRC5hZGQoaSksbi53YXJuKGDwn5uRIERFUFJFQ0FURUQgLSAke2l9YCkpO31mdW5jdGlvbiB0JEooZSxpLG89e30pe2lmKHQkUChcImVzcmktZGVwcmVjYXRpb24td2FybmluZ3NcIikpe2NvbnN0e21vZHVsZU5hbWU6bn09bztzJEMoZSxgRnVuY3Rpb246ICR7KG4/bitcIjo6XCI6XCJcIikraStcIigpXCJ9YCxvKTt9fWZ1bmN0aW9uIHMkQyhlLG8sdD17fSl7aWYodCRQKFwiZXNyaS1kZXByZWNhdGlvbi13YXJuaW5nc1wiKSl7Y29uc3R7cmVwbGFjZW1lbnQ6bix2ZXJzaW9uOnIsc2VlOnMsd2Fybk9uY2U6YX09dDtsZXQgYz1vO24mJihjKz1gXFxuXFx08J+boO+4jyBSZXBsYWNlbWVudDogJHtufWApLHImJihjKz1gXFxuXFx04pqZ77iPIFZlcnNpb246ICR7cn1gKSxzJiYoYys9YFxcblxcdPCflJcgU2VlICR7c30gZm9yIG1vcmUgZGV0YWlscy5gKSxpJCQoZSxjLGEpO319XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5jbGFzcyB0JEl7Y29uc3RydWN0b3IodCxvPXtpZ25vcmVVbmtub3duOiExfSl7dGhpcy5qc29uVG9BUEk9dCx0aGlzLm9wdGlvbnM9byx0aGlzLmFwaVZhbHVlcz1bXSx0aGlzLmpzb25WYWx1ZXM9W10sdGhpcy5hcGlUb0pTT049dGhpcy5pbnZlcnRNYXAodCksdGhpcy5hcGlWYWx1ZXM9dGhpcy5nZXRLZXlzU29ydGVkKHRoaXMuYXBpVG9KU09OKSx0aGlzLmpzb25WYWx1ZXM9dGhpcy5nZXRLZXlzU29ydGVkKHRoaXMuanNvblRvQVBJKSx0aGlzLnJlYWQ9dD0+dGhpcy5mcm9tSlNPTih0KSx0aGlzLndyaXRlPSh0LG8scyk9Pntjb25zdCBpPXRoaXMudG9KU09OKHQpO3ZvaWQgMCE9PWkmJihvW3NdPWkpO30sdGhpcy53cml0ZS5pc0pTT05NYXBXcml0ZXI9ITA7fXRvSlNPTih0KXtyZXR1cm4gdGhpcy5hcGlUb0pTT04uaGFzT3duUHJvcGVydHkodCk/dGhpcy5hcGlUb0pTT05bdF06dGhpcy5vcHRpb25zLmlnbm9yZVVua25vd24/dm9pZCAwOnR9ZnJvbUpTT04odCl7cmV0dXJuIHRoaXMuanNvblRvQVBJLmhhc093blByb3BlcnR5KHQpP3RoaXMuanNvblRvQVBJW3RdOnRoaXMub3B0aW9ucy5pZ25vcmVVbmtub3duP3ZvaWQgMDp0fWludmVydE1hcCh0KXtjb25zdCBvPXt9O2Zvcihjb25zdCBzIGluIHQpb1t0W3NdXT1zO3JldHVybiBvfWdldEtleXNTb3J0ZWQodCl7Y29uc3Qgbz1bXTtmb3IoY29uc3QgcyBpbiB0KW8ucHVzaChzKTtyZXR1cm4gby5zb3J0KCksb319ZnVuY3Rpb24gbyRBKCl7cmV0dXJuIGZ1bmN0aW9uKG8pe3JldHVybiBuZXcgdCRJKG8se2lnbm9yZVVua25vd246ITB9KX19XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5mdW5jdGlvbiByJHYocixvPXtpZ25vcmVVbmtub3duOiEwfSl7Y29uc3QgdD1yIGluc3RhbmNlb2YgdCRJP3I6bmV3IHQkSShyLG8pLGw9e3R5cGU6bnVsbCE9byYmby5pZ25vcmVVbmtub3duP3QuYXBpVmFsdWVzOlN0cmluZyxyZWFkT25seTpudWxsPT1vP3ZvaWQgMDpvLnJlYWRPbmx5LGpzb246e3R5cGU6dC5qc29uVmFsdWVzLHJlYWQ6KG51bGw9PW98fCFvLnJlYWRPbmx5KSYme3JlYWRlcjp0LnJlYWR9LHdyaXRlOnt3cml0ZXI6dC53cml0ZX19fTtyZXR1cm4gdm9pZCAwIT09KG51bGw9PW8/dm9pZCAwOm8uZGVmYXVsdCkmJihsLmpzb24uZGVmYXVsdD1vLmRlZmF1bHQpLHkkcihsKX1cblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmZ1bmN0aW9uIGUkQyhlLHQsYSl7bGV0IGMsZDtyZXR1cm4gdm9pZCAwPT09dHx8QXJyYXkuaXNBcnJheSh0KT8oZD1lLGE9dCxjPVt2b2lkIDBdKTooZD10LGM9QXJyYXkuaXNBcnJheShlKT9lOltlXSksKGUsdCk9Pntjb25zdCBzPWUuY29uc3RydWN0b3IucHJvdG90eXBlO2MuZm9yRWFjaCgoYz0+e2NvbnN0IHA9aCR5KGUsYyxkKTtwLnJlYWQmJlwib2JqZWN0XCIhPXR5cGVvZiBwLnJlYWQmJihwLnJlYWQ9e30pLG8kSShcInJlYWQucmVhZGVyXCIsc1t0XSxwKSxhJiYocC5yZWFkLnNvdXJjZT0ocC5yZWFkLnNvdXJjZXx8W10pLmNvbmNhdChhKSk7fSkpO319XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5mdW5jdGlvbiBuJFAobil7aWYobi5qc29uJiZuLmpzb24ub3JpZ2lucyl7Y29uc3Qgbz1uLmpzb24ub3JpZ2lucyxlPXtcIndlYi1kb2N1bWVudFwiOltcIndlYi1zY2VuZVwiLFwid2ViLW1hcFwiXX07Zm9yKGNvbnN0IG4gaW4gZSlpZihvW25dKXtjb25zdCBzPW9bbl07ZVtuXS5mb3JFYWNoKChuPT57b1tuXT1zO30pKSxkZWxldGUgb1tuXTt9fX1cblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmZ1bmN0aW9uIGUkQihlLHMpe3JldHVybiBlLnJlcGxhY2UoL1xcJFxceyhbXlxcc1xcOlxcfV0qKSg/OlxcOihbXlxcc1xcOlxcfV0rKSk/XFx9L2csKGZ1bmN0aW9uKGUsbil7aWYoXCJcIj09PW4pcmV0dXJuIFwiJFwiO2NvbnN0IGk9dCROKG4scykscj1udWxsPT1pP1wiXCI6aTtpZih2b2lkIDA9PT1yKXRocm93IG5ldyBFcnJvcihgY291bGQgbm90IGZpbmQga2V5IFwiJHtufVwiIGluIHRlbXBsYXRlYCk7cmV0dXJuIHIudG9TdHJpbmcoKX0pKX1jbGFzcyBzJEJ7Y29uc3RydWN0b3IodCxuLGkpe3RoaXMubmFtZT10LHRoaXMuZGV0YWlscz1pLHRoaXMubWVzc2FnZT12b2lkIDAsdGhpcyBpbnN0YW5jZW9mIHMkQiYmKHRoaXMubWVzc2FnZT1uJiZlJEIobixpKXx8XCJcIik7fXRvU3RyaW5nKCl7cmV0dXJuIFwiW1wiK3RoaXMubmFtZStcIl06IFwiK3RoaXMubWVzc2FnZX19XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5jbGFzcyB0JEggZXh0ZW5kcyBzJEJ7Y29uc3RydWN0b3IoZSxyLHMpe2lmKHN1cGVyKGUscixzKSwhKHRoaXMgaW5zdGFuY2VvZiB0JEgpKXJldHVybiBuZXcgdCRIKGUscixzKX19dCRILnByb3RvdHlwZS50eXBlPVwid2FybmluZ1wiO1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuZnVuY3Rpb24gZSRBKGUpe3JldHVybiAhIWUmJmUucHJvdG90eXBlJiZlLnByb3RvdHlwZS5kZWNsYXJlZENsYXNzJiYwPT09ZS5wcm90b3R5cGUuZGVjbGFyZWRDbGFzcy5pbmRleE9mKFwiZXNyaS5jb3JlLkNvbGxlY3Rpb25cIil9XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5jb25zdCBpJF89biRULmdldExvZ2dlcihcImVzcmkuY29yZS5hY2Nlc3NvclN1cHBvcnQuZXh0ZW5zaW9ucy5zZXJpYWxpemFibGVQcm9wZXJ0eS5yZWFkZXJcIik7ZnVuY3Rpb24gcCQxNChlLHIsbil7dmFyIG8saTtlJiYoIW4mJiFyLnJlYWR8fG51bGwhPShvPXIucmVhZCkmJm8ucmVhZGVyfHwhMT09PShudWxsPT0oaT1yLnJlYWQpP3ZvaWQgMDppLmVuYWJsZWQpfHxkJEQoZSkmJm8kSShcInJlYWQucmVhZGVyXCIsdSRLKGUpLHIpKTt9ZnVuY3Rpb24gdSRLKHQpe3ZhciBlO2NvbnN0IHI9bnVsbCE9KGU9dC5uZGltQXJyYXkpP2U6MDtpZihyPjEpcmV0dXJuIGMkWih0KTtpZigxPT09cilyZXR1cm4gYSROKHQpO2lmKFwidHlwZVwiaW4gdCYmbCRMKHQudHlwZSkpe3ZhciBuLG87Y29uc3QgZT1udWxsPT0obj10LnR5cGUucHJvdG90eXBlKXx8bnVsbD09KG89bi5pdGVtVHlwZSk/dm9pZCAwOm8uVHlwZSxyPWEkTihcImZ1bmN0aW9uXCI9PXR5cGVvZiBlP3t0eXBlOmV9Ont0eXBlczplfSk7cmV0dXJuIChlLG4sbyk9Pntjb25zdCBpPXIoZSxuLG8pO3JldHVybiBpP25ldyB0LnR5cGUoaSk6aX19cmV0dXJuIHMkQSh0KX1mdW5jdGlvbiBzJEEodCl7cmV0dXJuIFwidHlwZVwiaW4gdD95JHEodC50eXBlKTpqJGgodC50eXBlcyl9ZnVuY3Rpb24geSRxKHQpe3JldHVybiB0LnByb3RvdHlwZS5yZWFkPyhlLHIsbik9PntpZihudWxsPT1lKXJldHVybiBlO2NvbnN0IG89dHlwZW9mIGU7aWYoXCJvYmplY3RcIiE9PW8pcmV0dXJuIHZvaWQgaSRfLmVycm9yKGBFeHBlY3RlZCBKU09OIHZhbHVlIG9mIHR5cGUgJ29iamVjdCcgdG8gZGVzZXJpYWxpemUgdHlwZSAnJHt0LnByb3RvdHlwZS5kZWNsYXJlZENsYXNzfScsIGJ1dCBnb3QgJyR7b30nYCk7Y29uc3QgcD1uZXcgdDtyZXR1cm4gcC5yZWFkKGUsbikscH06dC5mcm9tSlNPTn1mdW5jdGlvbiBmJHcodCxlLHIsbil7cmV0dXJuIDAhPT1uJiZBcnJheS5pc0FycmF5KGUpP2UubWFwKChlPT5mJHcodCxlLHIsbi0xKSkpOnQoZSx2b2lkIDAscil9ZnVuY3Rpb24gYyRaKHQpe3ZhciBlO2NvbnN0IHI9cyRBKHQpLG49ZiR3LmJpbmQobnVsbCxyKSxvPW51bGwhPShlPXQubmRpbUFycmF5KT9lOjA7cmV0dXJuICh0LGUscik9PntpZihudWxsPT10KXJldHVybiB0O3Q9bih0LHIsbyk7bGV0IGk9byxwPXQ7Zm9yKDtpPjAmJkFycmF5LmlzQXJyYXkocCk7KWktLSxwPXBbMF07aWYodm9pZCAwIT09cClmb3IobGV0IG49MDtuPGk7bisrKXQ9W3RdO3JldHVybiB0fX1mdW5jdGlvbiBhJE4odCl7Y29uc3QgZT1zJEEodCk7cmV0dXJuICh0LHIsbik9PntpZihudWxsPT10KXJldHVybiB0O2lmKEFycmF5LmlzQXJyYXkodCkpe2NvbnN0IHI9W107Zm9yKGNvbnN0IG8gb2YgdCl7Y29uc3QgdD1lKG8sdm9pZCAwLG4pO3ZvaWQgMCE9PXQmJnIucHVzaCh0KTt9cmV0dXJuIHJ9Y29uc3Qgbz1lKHQsdm9pZCAwLG4pO3JldHVybiB2b2lkIDAhPT1vP1tvXTp2b2lkIDB9fWZ1bmN0aW9uIGwkTCh0KXtpZighZSRBKHQpKXJldHVybiAhMTtjb25zdCBlPXQucHJvdG90eXBlLml0ZW1UeXBlO3JldHVybiAhKCFlfHwhZS5UeXBlKSYmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGUuVHlwZT92JGUoZS5UeXBlKTptJEQoZS5UeXBlKSl9ZnVuY3Rpb24gZCREKHQpe3JldHVybiBcInR5cGVzXCJpbiB0P20kRCh0LnR5cGVzKTp2JGUodC50eXBlKX1mdW5jdGlvbiB2JGUodCl7cmV0dXJuICFBcnJheS5pc0FycmF5KHQpJiYoISF0JiZ0LnByb3RvdHlwZSYmKFwicmVhZFwiaW4gdC5wcm90b3R5cGV8fFwiZnJvbUpTT05cImluIHR8fGwkTCh0KSkpfWZ1bmN0aW9uIG0kRCh0KXtmb3IoY29uc3QgZSBpbiB0LnR5cGVNYXApe2lmKCF2JGUodC50eXBlTWFwW2VdKSlyZXR1cm4gITF9cmV0dXJuICEwfWZ1bmN0aW9uIGokaCh0KXt2YXIgZTtsZXQgcj1udWxsO2NvbnN0IG89bnVsbCE9KGU9dC5lcnJvckNvbnRleHQpP2U6XCJ0eXBlXCI7cmV0dXJuIChlLHAsdSk9PntpZihudWxsPT1lKXJldHVybiBlO2NvbnN0IHM9dHlwZW9mIGU7aWYoXCJvYmplY3RcIiE9PXMpcmV0dXJuIHZvaWQgaSRfLmVycm9yKGBFeHBlY3RlZCBKU09OIHZhbHVlIG9mIHR5cGUgJ29iamVjdCcgdG8gZGVzZXJpYWxpemUsIGJ1dCBnb3QgJyR7c30nYCk7cnx8KHI9ZyRsKHQpKTtjb25zdCB5PXQua2V5O2lmKFwic3RyaW5nXCIhPXR5cGVvZiB5KXJldHVybjtjb25zdCBmPWVbeV0sYz1mP3JbZl06dC5kZWZhdWx0S2V5VmFsdWU/dC50eXBlTWFwW3QuZGVmYXVsdEtleVZhbHVlXTp2b2lkIDA7aWYoIWMpe2NvbnN0IHQ9YFR5cGUgJyR7Znx8XCJ1bmtub3duXCJ9JyBpcyBub3Qgc3VwcG9ydGVkYDtyZXR1cm4gdSYmdS5tZXNzYWdlcyYmZSYmdS5tZXNzYWdlcy5wdXNoKG5ldyB0JEgoYCR7b306dW5zdXBwb3J0ZWRgLHQse2RlZmluaXRpb246ZSxjb250ZXh0OnV9KSksdm9pZCBpJF8uZXJyb3IodCl9Y29uc3QgYT1uZXcgYztyZXR1cm4gYS5yZWFkKGUsdSksYX19ZnVuY3Rpb24gZyRsKHQpe2NvbnN0IGU9e307Zm9yKGNvbnN0IGkgaW4gdC50eXBlTWFwKXt2YXIgbixvO2NvbnN0IHA9dC50eXBlTWFwW2ldLHU9biRRKHAucHJvdG90eXBlKTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LmtleSljb250aW51ZTtjb25zdCBzPXUucHJvcGVydGllc1t0LmtleV07aWYoIXMpY29udGludWU7bnVsbCE9KG49cy5qc29uKSYmbi50eXBlJiZBcnJheS5pc0FycmF5KHMuanNvbi50eXBlKSYmMT09PXMuanNvbi50eXBlLmxlbmd0aCYmXCJzdHJpbmdcIj09dHlwZW9mIHMuanNvbi50eXBlWzBdJiYoZVtzLmpzb24udHlwZVswXV09cCk7Y29uc3QgeT1udWxsPT0obz1zLmpzb24pP3ZvaWQgMDpvLndyaXRlO2lmKCF5fHwheS53cml0ZXIpe2VbaV09cDtjb250aW51ZX1jb25zdCBmPXkudGFyZ2V0LGM9XCJzdHJpbmdcIj09dHlwZW9mIGY/Zjp0LmtleSxhPXt9O3kud3JpdGVyKGksYSxjKSxhW2NdJiYoZVthW2NdXT1wKTt9cmV0dXJuIGV9XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5mdW5jdGlvbiBlJHooZSl7aWYoZS5qc29ufHwoZS5qc29uPXt9KSxvJHooZS5qc29uKSxuJE8oZS5qc29uKSxyJHUoZS5qc29uKSxlLmpzb24ub3JpZ2lucylmb3IoY29uc3QgdCBpbiBlLmpzb24ub3JpZ2lucylvJHooZS5qc29uLm9yaWdpbnNbdF0pLG4kTyhlLmpzb24ub3JpZ2luc1t0XSksciR1KGUuanNvbi5vcmlnaW5zW3RdKTtyZXR1cm4gITB9ZnVuY3Rpb24gciR1KGUpe2UubmFtZSYmKGUucmVhZCYmXCJvYmplY3RcIj09dHlwZW9mIGUucmVhZD92b2lkIDA9PT1lLnJlYWQuc291cmNlJiYoZS5yZWFkLnNvdXJjZT1lLm5hbWUpOmUucmVhZD17c291cmNlOmUubmFtZX0sZS53cml0ZSYmXCJvYmplY3RcIj09dHlwZW9mIGUud3JpdGU/dm9pZCAwPT09ZS53cml0ZS50YXJnZXQmJihlLndyaXRlLnRhcmdldD1lLm5hbWUpOmUud3JpdGU9e3RhcmdldDplLm5hbWV9KTt9ZnVuY3Rpb24gbyR6KGUpe1wiYm9vbGVhblwiPT10eXBlb2YgZS5yZWFkP2UucmVhZD17ZW5hYmxlZDplLnJlYWR9OlwiZnVuY3Rpb25cIj09dHlwZW9mIGUucmVhZD9lLnJlYWQ9e2VuYWJsZWQ6ITAscmVhZGVyOmUucmVhZH06ZS5yZWFkJiZcIm9iamVjdFwiPT10eXBlb2YgZS5yZWFkJiZ2b2lkIDA9PT1lLnJlYWQuZW5hYmxlZCYmKGUucmVhZC5lbmFibGVkPSEwKTt9ZnVuY3Rpb24gbiRPKGUpe1wiYm9vbGVhblwiPT10eXBlb2YgZS53cml0ZT9lLndyaXRlPXtlbmFibGVkOmUud3JpdGV9OlwiZnVuY3Rpb25cIj09dHlwZW9mIGUud3JpdGU/ZS53cml0ZT17ZW5hYmxlZDohMCx3cml0ZXI6ZS53cml0ZX06ZS53cml0ZSYmXCJvYmplY3RcIj09dHlwZW9mIGUud3JpdGUmJnZvaWQgMD09PWUud3JpdGUuZW5hYmxlZCYmKGUud3JpdGUuZW5hYmxlZD0hMCk7fVxuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuZnVuY3Rpb24gbiROKHIsbil7dmFyIGk7aWYoIW4ud3JpdGV8fG4ud3JpdGUud3JpdGVyfHwhMT09PW4ud3JpdGUuZW5hYmxlZCYmIW4ud3JpdGUub3ZlcnJpZGVQb2xpY3kpcmV0dXJuO2NvbnN0IG89bnVsbCE9KGk9bnVsbD09cj92b2lkIDA6ci5uZGltQXJyYXkpP2k6MDtyJiYoMT09PW98fFwidHlwZVwiaW4gciYmZSRBKHIudHlwZSkpP24ud3JpdGUud3JpdGVyPXUkSjpuLndyaXRlLndyaXRlcj1vPjE/bCRLKG8pOmUkeTt9ZnVuY3Rpb24gZSR5KHQsbixlLG8pe28kSShlLGkkWih0LG8pLG4pO31mdW5jdGlvbiBpJFoocix0KXtyZXR1cm4gciYmXCJmdW5jdGlvblwiPT10eXBlb2Ygci53cml0ZT9yLndyaXRlKHt9LHQpOnImJlwiZnVuY3Rpb25cIj09dHlwZW9mIHIudG9KU09OP3IudG9KU09OKCk6XCJudW1iZXJcIj09dHlwZW9mIHI/byR5KHIpOnJ9ZnVuY3Rpb24gbyR5KHIpe3JldHVybiByPT09LTEvMD8tTnVtYmVyLk1BWF9WQUxVRTpyPT09MS8wP051bWJlci5NQVhfVkFMVUU6aXNOYU4ocik/bnVsbDpyfWZ1bmN0aW9uIHUkSih0LG4sZSxvKXtsZXQgdTtudWxsPT09dD91PW51bGw6dCYmXCJmdW5jdGlvblwiPT10eXBlb2YgdC5tYXA/KHU9dC5tYXAoKHI9PmkkWihyLG8pKSksXCJmdW5jdGlvblwiPT10eXBlb2YgdS50b0FycmF5JiYodT11LnRvQXJyYXkoKSkpOnU9W2kkWih0LG8pXSxvJEkoZSx1LG4pO31mdW5jdGlvbiBmJHYocix0LG4pe3JldHVybiAwIT09biYmQXJyYXkuaXNBcnJheShyKT9yLm1hcCgocj0+ZiR2KHIsdCxuLTEpKSk6aSRaKHIsdCl9ZnVuY3Rpb24gbCRLKHQpe3JldHVybiBmdW5jdGlvbihuLGUsaSxvKXtsZXQgdTtpZihudWxsPT09bil1PW51bGw7ZWxzZSB7dT1mJHYobixvLHQpO2xldCByPXQsZT11O2Zvcig7cj4wJiZBcnJheS5pc0FycmF5KGUpOylyLS0sZT1lWzBdO2lmKHZvaWQgMCE9PWUpZm9yKGxldCB0PTA7dDxyO3QrKyl1PVt1XTt9byRJKGksdSxlKTt9fVxuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuZnVuY3Rpb24gaSRZKHIsbyl7cmV0dXJuIGEkTShyLFwicmVhZFwiLG8pfWZ1bmN0aW9uIHMkeihyLG8pe3JldHVybiBhJE0ocixcIndyaXRlXCIsbyl9ZnVuY3Rpb24gYSRNKHIsbyx0KXtsZXQgbj1yJiZyLmpzb247aWYociYmci5qc29uJiZyLmpzb24ub3JpZ2lucyYmdCl7Y29uc3QgZT1yLmpzb24ub3JpZ2luc1t0Lm9yaWdpbl07ZSYmKFwiYW55XCI9PT1vfHxvIGluIGUpJiYobj1lKTt9cmV0dXJuIG59ZnVuY3Rpb24gcCQxMyhyKXtjb25zdCBvPXkkcChyKTtpZihyLmpzb24ub3JpZ2lucylmb3IoY29uc3QgbiBpbiByLmpzb24ub3JpZ2lucyl7Y29uc3QgaT1yLmpzb24ub3JpZ2luc1tuXTtwJDE0KG8saSwhMSksbiROKG8saSk7fXAkMTQobyxyLmpzb24sITApLG4kTihvLHIuanNvbik7fWZ1bmN0aW9uIHkkcChyKXtyZXR1cm4gci50eXBlP2YkdShyKTp1JEkocil9ZnVuY3Rpb24gZiR1KG8pe2lmKCFvLnR5cGUpcmV0dXJuO2xldCB0PTAsbj1vLnR5cGU7Zm9yKDtBcnJheS5pc0FycmF5KG4pJiYhJCQzKG4pOyluPW5bMF0sdCsrO3JldHVybiB7dHlwZTpuLG5kaW1BcnJheTp0fX1mdW5jdGlvbiB1JEkocil7aWYoIXIudHlwZXMpcmV0dXJuO2xldCBvPTAsdD1yLnR5cGVzO2Zvcig7QXJyYXkuaXNBcnJheSh0KTspdD10WzBdLG8rKztyZXR1cm4ge3R5cGVzOnQsbmRpbUFycmF5Om99fWNvbnN0IGMkWT17cHJvY2Vzc1Byb3RvdHlwZVByb3BlcnR5TWV0YWRhdGEocix0KXtlJHoodCkmJihuJFAodCkscCQxMyh0KSk7fX07XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5jb25zdCBvJHg9W2MkWV07ZnVuY3Rpb24gZSR4KHQsZSl7Zm9yKGNvbnN0IHIgb2YgbyR4KWlmKHIucHJvY2Vzc1Byb3RvdHlwZVByb3BlcnR5TWV0YWRhdGEpZm9yKGNvbnN0IG8gaW4gdCl7Y29uc3Qgcz10W29dO3IucHJvY2Vzc1Byb3RvdHlwZVByb3BlcnR5TWV0YWRhdGEobyxzLHQsZSk7fX1mdW5jdGlvbiByJHQodCxlKXtmb3IoY29uc3QgciBvZiBvJHgpaWYoci5wcm9jZXNzQ2xhc3NQcm9wZXJ0eU1ldGFkYXRhKWZvcihjb25zdCBvIGluIHQpe2NvbnN0IHM9dFtvXTtyLnByb2Nlc3NDbGFzc1Byb3BlcnR5TWV0YWRhdGEobyxzLHQsZSk7fX1cblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmNvbnN0IG8kdz1uZXcgU2V0LHMkeT1uZXcgU2V0O2Z1bmN0aW9uIGkkWChyKXtyZXR1cm4gaT0+e2kucHJvdG90eXBlLmRlY2xhcmVkQ2xhc3M9cixlJHgobiRRKGkucHJvdG90eXBlKS5wcm9wZXJ0aWVzLHIpLGMkWChpKTtjb25zdCBuPVtdLGE9W107bGV0IGw9aS5wcm90b3R5cGU7Zm9yKDtsOylsLmhhc093blByb3BlcnR5KFwiaW5pdGlhbGl6ZVwiKSYmIW8kdy5oYXMobC5pbml0aWFsaXplKSYmKG8kdy5hZGQobC5pbml0aWFsaXplKSxuLnB1c2gobC5pbml0aWFsaXplKSksbC5oYXNPd25Qcm9wZXJ0eShcImRlc3Ryb3lcIikmJiFzJHkuaGFzKGwuZGVzdHJveSkmJihzJHkuYWRkKGwuZGVzdHJveSksYS5wdXNoKGwuZGVzdHJveSkpLGw9T2JqZWN0LmdldFByb3RvdHlwZU9mKGwpO28kdy5jbGVhcigpLHMkeS5jbGVhcigpO2NsYXNzIHAgZXh0ZW5kcyBpe2NvbnN0cnVjdG9yKC4uLmUpe2lmKHN1cGVyKC4uLmUpLHRoaXMuY29uc3RydWN0b3I9PT1wJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzLnBvc3RzY3JpcHQpe2lmKG4ubGVuZ3RoJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImluaXRpYWxpemVcIix7ZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITAsdmFsdWUoKXtmb3IobGV0IGU9bi5sZW5ndGgtMTtlPj0wO2UtLSluW2VdLmNhbGwodGhpcyk7fX0pLGEubGVuZ3RoKXtsZXQgZT0hMTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImRlc3Ryb3lcIix7ZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITAsdmFsdWUoKXtpZighZSl7ZT0hMDtmb3IobGV0IGU9MDtlPGEubGVuZ3RoO2UrKylhW2VdLmNhbGwodGhpcyk7fX19KTt9dGhpcy5wb3N0c2NyaXB0KC4uLmUpO319fXJldHVybiBwLl9fYWNjZXNzb3JNZXRhZGF0YV9fPW4kUShpLnByb3RvdHlwZSkscC5wcm90b3R5cGUuZGVjbGFyZWRDbGFzcz1yLHB9fWZ1bmN0aW9uIG4kTShlLHQpe3JldHVybiBudWxsPT10LmdldD9mdW5jdGlvbigpe3JldHVybiB0aGlzLl9fYWNjZXNzb3JfXy5nZXR0ZXJTdGF0aWMoZSl9OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX19hY2Nlc3Nvcl9fLmdldHRlckNvbXB1dGVkKGUpfX1mdW5jdGlvbiBjJFgodCl7Y29uc3Qgbz10LnByb3RvdHlwZSxzPW8uZGVjbGFyZWRDbGFzcyxpPW4kUShvKS5wcm9wZXJ0aWVzO3IkdChpLHMpO2NvbnN0IGM9e307Zm9yKGNvbnN0IGUgb2YgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoaSkpe2NvbnN0IHQ9aVtlXTtjW2VdPXtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCxnZXQ6biRNKGUsdCksc2V0KHIpe2NvbnN0IG89dGhpcy5fX2FjY2Vzc29yX187aWYodm9pZCAwIT09byl7aWYoIU9iamVjdC5pc0Zyb3plbih0aGlzKSl7aWYoby5pbml0aWFsaXplZCYmdC5yZWFkT25seSl0aHJvdyBuZXcgVHlwZUVycm9yKGBbYWNjZXNzb3JdIGNhbm5vdCBhc3NpZ24gdG8gcmVhZC1vbmx5IHByb3BlcnR5ICcke2V9JyBvZiAke3RoaXMuZGVjbGFyZWRDbGFzc31gKTtpZigyPT09by5saWZlY3ljbGUmJnQuY29uc3RydWN0T25seSl0aHJvdyBuZXcgVHlwZUVycm9yKGBbYWNjZXNzb3JdIGNhbm5vdCBhc3NpZ24gdG8gY29uc3RydWN0LW9ubHkgcHJvcGVydHkgJyR7ZX0nIG9mICR7dGhpcy5kZWNsYXJlZENsYXNzfWApO28uc2V0KGUscik7fX1lbHNlIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLGUse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOnJ9KTt9fTt9T2JqZWN0LmRlZmluZVByb3BlcnRpZXModC5wcm90b3R5cGUsYyk7fVxuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuZnVuY3Rpb24gbyR2KG8sZSxpKXtsZXQgcCxjO3JldHVybiB2b2lkIDA9PT1lPyhjPW8scD1bdm9pZCAwXSk6XCJzdHJpbmdcIiE9dHlwZW9mIGU/KGM9byxwPVt2b2lkIDBdLGk9ZSk6KGM9ZSxwPUFycmF5LmlzQXJyYXkobyk/bzpbb10pLChvLGUpPT57Y29uc3Qgbj1vLmNvbnN0cnVjdG9yLnByb3RvdHlwZTtwLmZvckVhY2goKHA9Pntjb25zdCBzPWgkeShvLHAsYyk7cy53cml0ZSYmXCJvYmplY3RcIiE9dHlwZW9mIHMud3JpdGUmJihzLndyaXRlPXt9KSxpJiZvJEkoXCJ3cml0ZS50YXJnZXRcIixpLHMpLG8kSShcIndyaXRlLndyaXRlclwiLG5bZV0scyk7fSkpO319XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5jbGFzcyBzJHggZXh0ZW5kcyBzJEJ7Y29uc3RydWN0b3IoZSx0LHIpe2lmKHN1cGVyKGUsdCxyKSwhKHRoaXMgaW5zdGFuY2VvZiBzJHgpKXJldHVybiBuZXcgcyR4KGUsdCxyKX10b0pTT04oKXtpZihudWxsIT10aGlzLmRldGFpbHMpdHJ5e3JldHVybiB7bmFtZTp0aGlzLm5hbWUsbWVzc2FnZTp0aGlzLm1lc3NhZ2UsZGV0YWlsczpKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuZGV0YWlscywoKHQscik9PntpZihyJiZcIm9iamVjdFwiPT10eXBlb2YgciYmXCJmdW5jdGlvblwiPT10eXBlb2Ygci50b0pTT04pcmV0dXJuIHI7dHJ5e3JldHVybiB5JHYocil9Y2F0Y2gocyl7cmV0dXJuIFwiW29iamVjdF1cIn19KSkpfX1jYXRjaChyKXt0aHJvdyBuJFQuZ2V0TG9nZ2VyKFwiZXNyaS5jb3JlLkVycm9yXCIpLmVycm9yKHIpLHJ9cmV0dXJuIHtuYW1lOnRoaXMubmFtZSxtZXNzYWdlOnRoaXMubWVzc2FnZSxkZXRhaWxzOnRoaXMuZGV0YWlsc319c3RhdGljIGZyb21KU09OKGUpe3JldHVybiBuZXcgcyR4KGUubmFtZSxlLm1lc3NhZ2UsZS5kZXRhaWxzKX19cyR4LnByb3RvdHlwZS50eXBlPVwiZXJyb3JcIjtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmNvbnN0IHUkSD1uJFQuZ2V0TG9nZ2VyKFwiZXNyaS5jb3JlLnVybFV0aWxzXCIpLGwkSj1zJEgucmVxdWVzdCxjJFc9XCJlc3JpL2NvbmZpZzogZXNyaUNvbmZpZy5yZXF1ZXN0LnByb3h5VXJsIGlzIG5vdCBzZXQuXCIsZiR0PS9eXFxzKlthLXpdW2EtejAtOS0rLl0qOig/IVswLTldKS9pLGEkTD0vXlxccypodHRwOi9pLGgkeD0vXlxccypodHRwczovaSxwJDEyPS9eXFxzKmZpbGU6L2ksZCRDPS86XFxkKyQvLGckaz0vXmh0dHBzPzpcXC9cXC9bXi9dK1xcLmFyY2dpcy5jb21cXC9zaGFyaW5nKFxcL3wkKS9pLG0kQz1uZXcgUmVnRXhwKFwiXigoW146Lz8jXSspOik/KC8vKFteLz8jXSopKT8oW14/I10qKShcXFxcPyhbXiNdKikpPygjKC4qKSk/JFwiKSx5JG89bmV3IFJlZ0V4cChcIl4oKChbXlxcXFxbOl0rKTopPyhbXkBdKylAKT8oXFxcXFsoW15cXFxcXV0rKVxcXFxdfChbXlxcXFxbOl0qKSkoOihbMC05XSspKT8kXCIpO2NsYXNzICQkMntjb25zdHJ1Y3Rvcih0PVwiXCIpe3RoaXMudXJpPXQsdGhpcy5zY2hlbWU9bnVsbCx0aGlzLmF1dGhvcml0eT1udWxsLHRoaXMucGF0aD1udWxsLHRoaXMucXVlcnk9bnVsbCx0aGlzLmZyYWdtZW50PW51bGwsdGhpcy51c2VyPW51bGwsdGhpcy5wYXNzd29yZD1udWxsLHRoaXMuaG9zdD1udWxsLHRoaXMucG9ydD1udWxsO2xldCBlPW0kRih0aGlzLnVyaS5tYXRjaChtJEMpKTt0aGlzLnNjaGVtZT1lWzJdfHwoZVsxXT9cIlwiOm51bGwpLHRoaXMuYXV0aG9yaXR5PWVbNF18fChlWzNdP1wiXCI6bnVsbCksdGhpcy5wYXRoPWVbNV0sdGhpcy5xdWVyeT1lWzddfHwoZVs2XT9cIlwiOm51bGwpLHRoaXMuZnJhZ21lbnQ9ZVs5XXx8KGVbOF0/XCJcIjpudWxsKSxudWxsIT10aGlzLmF1dGhvcml0eSYmKGU9bSRGKHRoaXMuYXV0aG9yaXR5Lm1hdGNoKHkkbykpLHRoaXMudXNlcj1lWzNdfHxudWxsLHRoaXMucGFzc3dvcmQ9ZVs0XXx8bnVsbCx0aGlzLmhvc3Q9ZVs2XXx8ZVs3XSx0aGlzLnBvcnQ9ZVs5XXx8bnVsbCk7fXRvU3RyaW5nKCl7cmV0dXJuIHRoaXMudXJpfX1jb25zdCB4JGU9bmV3ICQkMihzJEguYXBwbGljYXRpb25VcmwpLE8kND17fSx3JGI9KCgpPT57Y29uc3QgdD1tJEYoeCRlLnBhdGgpLGU9dC5zdWJzdHJpbmcoMCx0Lmxhc3RJbmRleE9mKHQuc3BsaXQoXCIvXCIpW3Quc3BsaXQoXCIvXCIpLmxlbmd0aC0xXSkpO3JldHVybiBgJHtgJHt4JGUuc2NoZW1lfTovLyR7eCRlLmhvc3R9JHtudWxsIT14JGUucG9ydD9gOiR7eCRlLnBvcnR9YDpcIlwifWB9JHtlfWB9KSgpO2Z1bmN0aW9uIFUkNCh0KXtjb25zdCBlPXtwYXRoOm51bGwscXVlcnk6bnVsbH0sbj1uZXcgJCQyKHQpLHI9dC5pbmRleE9mKFwiP1wiKTtyZXR1cm4gbnVsbD09PW4ucXVlcnk/ZS5wYXRoPXQ6KGUucGF0aD10LnN1YnN0cmluZygwLHIpLGUucXVlcnk9YiRkKG4ucXVlcnkpKSxuLmZyYWdtZW50JiYoZS5oYXNoPW4uZnJhZ21lbnQsbnVsbD09PW4ucXVlcnkmJihlLnBhdGg9ZS5wYXRoLnN1YnN0cmluZygwLGUucGF0aC5sZW5ndGgtKG4uZnJhZ21lbnQubGVuZ3RoKzEpKSkpLGV9ZnVuY3Rpb24gYiRkKHQpe2NvbnN0IGU9dC5zcGxpdChcIiZcIiksbj17fTtmb3IoY29uc3QgciBvZiBlKXtpZighciljb250aW51ZTtjb25zdCB0PXIuaW5kZXhPZihcIj1cIik7bGV0IGUsbzt0PDA/KGU9ZGVjb2RlVVJJQ29tcG9uZW50KHIpLG89XCJcIik6KGU9ZGVjb2RlVVJJQ29tcG9uZW50KHIuc2xpY2UoMCx0KSksbz1kZWNvZGVVUklDb21wb25lbnQoci5zbGljZSh0KzEpKSk7bGV0IGk9bltlXTtcInN0cmluZ1wiPT10eXBlb2YgaSYmKGk9bltlXT1baV0pLEFycmF5LmlzQXJyYXkoaSk/aS5wdXNoKG8pOm5bZV09bzt9cmV0dXJuIG59ZnVuY3Rpb24gUiQ5KHQpe3JldHVybiB0JiZcIm9iamVjdFwiPT10eXBlb2YgdCYmXCJ0b0pTT05cImluIHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHQudG9KU09OfWZ1bmN0aW9uIEMkOSh0LGUpe3JldHVybiB0P2UmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGU/T2JqZWN0LmtleXModCkubWFwKChuPT5lbmNvZGVVUklDb21wb25lbnQobikrXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KGUobix0W25dKSkpKS5qb2luKFwiJlwiKTpPYmplY3Qua2V5cyh0KS5tYXAoKG49Pntjb25zdCByPXRbbl07aWYobnVsbD09cilyZXR1cm4gXCJcIjtjb25zdCBvPWVuY29kZVVSSUNvbXBvbmVudChuKStcIj1cIixpPWUmJmVbbl07cmV0dXJuIGk/bytlbmNvZGVVUklDb21wb25lbnQoaShyKSk6QXJyYXkuaXNBcnJheShyKT9yLm1hcCgodD0+UiQ5KHQpP28rZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHQpKTpvK2VuY29kZVVSSUNvbXBvbmVudCh0KSkpLmpvaW4oXCImXCIpOlIkOShyKT9vK2VuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShyKSk6bytlbmNvZGVVUklDb21wb25lbnQocil9KSkuZmlsdGVyKCh0PT50KSkuam9pbihcIiZcIik6XCJcIn1mdW5jdGlvbiBxJDUodD0hMSl7bGV0IGUsbj1sJEoucHJveHlVcmw7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHQpe2U9cnQodCk7Y29uc3Qgcj1BJGIodCk7ciYmKG49ci5wcm94eVVybCk7fWVsc2UgZT0hIXQ7aWYoIW4pdGhyb3cgdSRILndhcm4oYyRXKSxuZXcgcyR4KFwidXJsdXRpbHM6cHJveHktbm90LXNldFwiLGMkVyk7ZSYmY3QoKSYmKG49dXQobikpO3JldHVybiBVJDQobil9ZnVuY3Rpb24gaiRnKHQpe2NvbnN0IGU9QSRiKHQpO2xldCBuLHI7aWYoZSl7Y29uc3QgdD12JGQoZS5wcm94eVVybCk7bj10LnBhdGgscj10LnF1ZXJ5P2IkZCh0LnF1ZXJ5KTpudWxsO31pZihuKXtjb25zdCBlPVUkNCh0KTt0PW4rXCI/XCIrZS5wYXRoO2NvbnN0IG89QyQ5KHsuLi5yLC4uLmUucXVlcnl9KTtvJiYodD1gJHt0fT8ke299YCk7fXJldHVybiB0fWNvbnN0IEwkNz17cGF0aDpcIlwiLHF1ZXJ5OlwiXCJ9O2Z1bmN0aW9uIHYkZCh0KXtjb25zdCBlPXQuaW5kZXhPZihcIj9cIik7cmV0dXJuIC0xIT09ZT8oTCQ3LnBhdGg9dC5zbGljZSgwLGUpLEwkNy5xdWVyeT10LnNsaWNlKGUrMSkpOihMJDcucGF0aD10LEwkNy5xdWVyeT1udWxsKSxMJDd9ZnVuY3Rpb24gSSQ1KHQpe3JldHVybiB0PSh0PWZ0KHQ9ZHQodD12JGQodCkucGF0aCksITApKS50b0xvd2VyQ2FzZSgpfWZ1bmN0aW9uIFMkOSh0KXtjb25zdCBlPXtwcm94eVVybDp0LnByb3h5VXJsLHVybFByZWZpeDpJJDUodC51cmxQcmVmaXgpfSxuPWwkSi5wcm94eVJ1bGVzLHI9ZS51cmxQcmVmaXg7bGV0IG89bi5sZW5ndGg7Zm9yKGxldCBpPTA7aTxuLmxlbmd0aDtpKyspe2NvbnN0IHQ9bltpXS51cmxQcmVmaXg7aWYoMD09PXIuaW5kZXhPZih0KSl7aWYoci5sZW5ndGg9PT10Lmxlbmd0aClyZXR1cm4gLTE7bz1pO2JyZWFrfTA9PT10LmluZGV4T2YocikmJihvPWkrMSk7fXJldHVybiBuLnNwbGljZShvLDAsZSksb31mdW5jdGlvbiBBJGIodCl7Y29uc3QgZT1sJEoucHJveHlSdWxlcyxuPUkkNSh0KTtmb3IobGV0IHI9MDtyPGUubGVuZ3RoO3IrKylpZigwPT09bi5pbmRleE9mKGVbcl0udXJsUHJlZml4KSlyZXR1cm4gZVtyXX1mdW5jdGlvbiBQJDgodCxlKXtyZXR1cm4gdD1rJDkodCksZT1rJDkoZSksZnQodCk9PT1mdChlKX1mdW5jdGlvbiBrJDkodCl7Y29uc3QgZT0odD16JDYodCkpLmluZGV4T2YoXCIvc2hhcmluZ1wiKTtyZXR1cm4gZT4wP3Quc3Vic3RyaW5nKDAsZSk6dC5yZXBsYWNlKC9cXC8rJC8sXCJcIil9ZnVuY3Rpb24gQiQ1KHQpe2NvbnN0IGU9ZT0+bnVsbD09ZXx8ZSBpbnN0YW5jZW9mIFJlZ0V4cCYmZS50ZXN0KHQpfHxcInN0cmluZ1wiPT10eXBlb2YgZSYmdC5zdGFydHNXaXRoKGUpLG49bCRKLmludGVyY2VwdG9ycztpZihuKWZvcihjb25zdCByIG9mIG4paWYoQXJyYXkuaXNBcnJheShyLnVybHMpKXtpZihyLnVybHMuc29tZShlKSlyZXR1cm4gcn1lbHNlIGlmKGUoci51cmxzKSlyZXR1cm4gcjtyZXR1cm4gbnVsbH1mdW5jdGlvbiBFJDQodCxlLG49ITEpe2NvbnN0IHI9T3QodCksbz1PdChlKTtyZXR1cm4gISghbiYmci5zY2hlbWUhPT1vLnNjaGVtZSkmJihudWxsIT1yLmhvc3QmJm51bGwhPW8uaG9zdCYmKHIuaG9zdC50b0xvd2VyQ2FzZSgpPT09by5ob3N0LnRvTG93ZXJDYXNlKCkmJnIucG9ydD09PW8ucG9ydCkpfWZ1bmN0aW9uIEokMyh0KXtpZihcInN0cmluZ1wiPT10eXBlb2YgdCl7aWYoIVEkMih0KSlyZXR1cm4gITA7dD1PdCh0KTt9aWYoRSQ0KHQseCRlKSlyZXR1cm4gITA7Y29uc3QgZT1sJEoudHJ1c3RlZFNlcnZlcnN8fFtdO2ZvcihsZXQgbj0wO248ZS5sZW5ndGg7bisrKXtjb25zdCByPU4kNChlW25dKTtmb3IobGV0IGU9MDtlPHIubGVuZ3RoO2UrKylpZihFJDQodCxyW2VdKSlyZXR1cm4gITB9cmV0dXJuICExfWZ1bmN0aW9uIE4kNCh0KXtyZXR1cm4gTyQ0W3RdfHwobnQodCl8fGV0KHQpP08kNFt0XT1bbmV3ICQkMihUJDYodCkpXTpPJDRbdF09W25ldyAkJDIoYGh0dHA6Ly8ke3R9YCksbmV3ICQkMihgaHR0cHM6Ly8ke3R9YCldKSxPJDRbdF19ZnVuY3Rpb24gVCQ2KHQsZT13JGIscil7cmV0dXJuIGV0KHQpP3ImJnIucHJlc2VydmVQcm90b2NvbFJlbGF0aXZlP3Q6XCJodHRwXCI9PT14JGUuc2NoZW1lJiZ4JGUuYXV0aG9yaXR5PT09TSRhKHQpLnNsaWNlKDIpP2BodHRwOiR7dH1gOmBodHRwczoke3R9YDpudCh0KT90Om0kRihEJDYoXCIvXCI9PT10WzBdP2F0KGUpOmUsdCkpfWZ1bmN0aW9uIFckMih0LGU9dyRiLG4pe2lmKCFRJDIodCkpcmV0dXJuIHQ7Y29uc3Qgcj16JDYodCksbz1yLnRvTG93ZXJDYXNlKCksaT16JDYoZSkudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cXC8rJC8sXCJcIikscz1uP3okNihuKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1xcLyskLyxcIlwiKTpudWxsO2lmKHMmJjAhPT1pLmluZGV4T2YocykpcmV0dXJuIHQ7Y29uc3QgdT0odCxlLG4pPT4tMT09PShuPXQuaW5kZXhPZihlLG4pKT90Lmxlbmd0aDpuO2xldCBsPXUobyxcIi9cIixvLmluZGV4T2YoXCIvL1wiKSsyKSxjPS0xO2Zvcig7by5zbGljZSgwLGwrMSk9PT1pLnNsaWNlKDAsbCkrXCIvXCImJihjPWwrMSxsIT09by5sZW5ndGgpOylsPXUobyxcIi9cIixsKzEpO2lmKC0xPT09YylyZXR1cm4gdDtpZihzJiZjPHMubGVuZ3RoKXJldHVybiB0O3Q9ci5zbGljZShjKTtjb25zdCBmPWkuc2xpY2UoYy0xKS5yZXBsYWNlKC9bXi9dKy9nLFwiXCIpLmxlbmd0aDtpZihmPjApZm9yKGxldCBhPTA7YTxmO2ErKyl0PWAuLi8ke3R9YDtlbHNlIHQ9YC4vJHt0fWA7cmV0dXJuIHR9ZnVuY3Rpb24geiQ2KHQpe3JldHVybiB0PSR0KHQ9eXQodD1tdCh0PVQkNih0PXQudHJpbSgpKSkpKX1mdW5jdGlvbiBEJDYoLi4udCl7Y29uc3QgZT10LmZpbHRlcihyJEEpO2lmKCFlfHwhZS5sZW5ndGgpcmV0dXJuO2NvbnN0IG49W107aWYoUSQyKGVbMF0pKXtjb25zdCB0PWVbMF0scj10LmluZGV4T2YoXCIvL1wiKTstMSE9PXImJihuLnB1c2godC5zbGljZSgwLHIrMSkpLGl0KGVbMF0pJiYoblswXSs9XCIvXCIpLGVbMF09dC5zbGljZShyKzIpKTt9ZWxzZSBcIi9cIj09PWVbMF1bMF0mJm4ucHVzaChcIlwiKTtjb25zdCBvPWUucmVkdWNlKCgodCxlKT0+ZT90LmNvbmNhdChlLnNwbGl0KFwiL1wiKSk6dCksW10pO2ZvcihsZXQgcj0wO3I8by5sZW5ndGg7cisrKXtjb25zdCB0PW9bcl07XCIuLlwiPT09dCYmbi5sZW5ndGg+MCYmXCIuLlwiIT09bltuLmxlbmd0aC0xXT9uLnBvcCgpOighdCYmcj09PW8ubGVuZ3RoLTF8fHQmJihcIi5cIiE9PXR8fDA9PT1uLmxlbmd0aCkpJiZuLnB1c2godCk7fXJldHVybiBuLmpvaW4oXCIvXCIpfWZ1bmN0aW9uIE0kYSh0LGU9ITEpe2lmKEYkNSh0KXx8RyQ2KHQpKXJldHVybiBudWxsO2xldCBuPXQuaW5kZXhPZihcIjovL1wiKTtpZigtMT09PW4mJmV0KHQpKW49MjtlbHNlIHtpZigtMT09PW4pcmV0dXJuIG51bGw7bis9Mzt9Y29uc3Qgcj10LmluZGV4T2YoXCIvXCIsbik7cmV0dXJuIC0xIT09ciYmKHQ9dC5zbGljZSgwLHIpKSxlJiYodD1mdCh0LCEwKSksdH1mdW5jdGlvbiBRJDIodCl7cmV0dXJuIGV0KHQpfHxudCh0KX1mdW5jdGlvbiBGJDUodCl7cmV0dXJuIG51bGwhPXQmJlwiYmxvYjpcIj09PXQuc2xpY2UoMCw1KX1mdW5jdGlvbiBHJDYodCl7cmV0dXJuIFwiZGF0YTpcIj09PXQuc2xpY2UoMCw1KX1mdW5jdGlvbiBIJDModCl7Y29uc3QgZT1WJDIodCk7aWYoIWV8fCFlLmlzQmFzZTY0KXJldHVybiBudWxsO2NvbnN0IG49YXRvYihlLmRhdGEpLHI9bmV3IFVpbnQ4QXJyYXkobi5sZW5ndGgpO2ZvcihsZXQgbz0wO288bi5sZW5ndGg7bysrKXJbb109bi5jaGFyQ29kZUF0KG8pO3JldHVybiByLmJ1ZmZlcn1jb25zdCBLJDE9L15kYXRhOiguKj8pKDtiYXNlNjQpPywoLiopJC87ZnVuY3Rpb24gViQyKHQpe2NvbnN0IGU9dC5tYXRjaChLJDEpO2lmKCFlKXJldHVybiBudWxsO2NvbnN0WyxuLHIsb109ZTtyZXR1cm4ge21lZGlhVHlwZTpuLGlzQmFzZTY0OiEhcixkYXRhOm99fWZ1bmN0aW9uIFgkMih0KXtyZXR1cm4gdC5pc0Jhc2U2ND9gZGF0YToke3QubWVkaWFUeXBlfTtiYXNlNjQsJHt0LmRhdGF9YDpgZGF0YToke3QubWVkaWFUeXBlfSwke3QuZGF0YX1gfWZ1bmN0aW9uIGV0KHQpe3JldHVybiBudWxsIT10JiZ2b2lkIDAhPT10JiZcIi9cIj09PXRbMF0mJlwiL1wiPT09dFsxXX1mdW5jdGlvbiBudCh0KXtyZXR1cm4gZiR0LnRlc3QodCl9ZnVuY3Rpb24gcnQodCl7cmV0dXJuIGgkeC50ZXN0KHQpfHxcImh0dHBzXCI9PT14JGUuc2NoZW1lJiZldCh0KX1mdW5jdGlvbiBvdCh0KXtyZXR1cm4gYSRMLnRlc3QodCl8fFwiaHR0cFwiPT09eCRlLnNjaGVtZSYmZXQodCl9ZnVuY3Rpb24gaXQodCl7cmV0dXJuIHAkMTIudGVzdCh0KX1mdW5jdGlvbiB1dCh0KXtyZXR1cm4gZXQodCk/YGh0dHBzOiR7dH1gOnQucmVwbGFjZShhJEwsXCJodHRwczpcIil9ZnVuY3Rpb24gbHQoKXtyZXR1cm4gXCJodHRwXCI9PT14JGUuc2NoZW1lfWZ1bmN0aW9uIGN0KCl7cmV0dXJuIFwiaHR0cHNcIj09PXgkZS5zY2hlbWV9ZnVuY3Rpb24gZnQodCxlPSExKXtyZXR1cm4gZXQodCk/dC5zbGljZSgyKToodD10LnJlcGxhY2UoZiR0LFwiXCIpLGUmJnQubGVuZ3RoPjEmJlwiL1wiPT09dFswXSYmXCIvXCI9PT10WzFdJiYodD10LnNsaWNlKDIpKSx0KX1mdW5jdGlvbiBhdCh0KXtjb25zdCBlPXQuaW5kZXhPZihcIi8vXCIpLG49dC5pbmRleE9mKFwiL1wiLGUrMik7cmV0dXJuIC0xPT09bj90OnQuc2xpY2UoMCxuKX1mdW5jdGlvbiBodCh0KXtsZXQgZT0wO2lmKFEkMih0KSl7Y29uc3Qgbj10LmluZGV4T2YoXCIvL1wiKTstMSE9PW4mJihlPW4rMik7fWNvbnN0IG49dC5sYXN0SW5kZXhPZihcIi9cIik7cmV0dXJuIG48ZT90OnQuc2xpY2UoMCxuKzEpfWZ1bmN0aW9uIHB0KHQsZSl7aWYoIXQpcmV0dXJuIFwiXCI7Y29uc3Qgbj1VJDQodCkucGF0aC5yZXBsYWNlKC9cXC8rJC8sXCJcIikscj1uLnN1YnN0cmluZyhuLmxhc3RJbmRleE9mKFwiL1wiKSsxKTtpZihudWxsPT1lfHwhZS5sZW5ndGgpcmV0dXJuIHI7Y29uc3Qgbz1uZXcgUmVnRXhwKGAuKCR7ZS5qb2luKFwifFwiKX0pJGAsXCJpZ1wiKTtyZXR1cm4gci5yZXBsYWNlKG8sXCJcIil9ZnVuY3Rpb24gZHQodCl7cmV0dXJuIHQmJlwiL1wiPT09dFt0Lmxlbmd0aC0xXT90OmAke3R9L2B9ZnVuY3Rpb24gZ3QodCl7cmV0dXJuIHQucmVwbGFjZSgvXFwvKyQvLFwiXCIpfWZ1bmN0aW9uIG10KHQpe2lmKC9eaHR0cHM/OlxcL1xcLy9pLnRlc3QodCkpe2NvbnN0IGU9diRkKHQpO3Q9KHQ9ZS5wYXRoLnJlcGxhY2UoL1xcL3syLH0vZyxcIi9cIikpLnJlcGxhY2UoXCIvXCIsXCIvL1wiKSxlLnF1ZXJ5JiYodCs9YD8ke2UucXVlcnl9YCk7fXJldHVybiB0fWZ1bmN0aW9uIHl0KHQpe3JldHVybiB0LnJlcGxhY2UoL14oaHR0cHM/OlxcL1xcLykoYXJjZ2lzXFwuY29tKS9pLFwiJDF3d3cuJDJcIil9ZnVuY3Rpb24gJHQodCl7Y29uc3QgZT1sJEouaHR0cHNEb21haW5zO2lmKCFvdCh0KSlyZXR1cm4gdDtjb25zdCBuPXQuaW5kZXhPZihcIi9cIiw3KTtsZXQgcjtpZihyPS0xPT09bj90OnQuc2xpY2UoMCxuKSxyPXIudG9Mb3dlckNhc2UoKS5zbGljZSg3KSxkJEMudGVzdChyKSl7aWYoIXIuZW5kc1dpdGgoXCI6ODBcIikpcmV0dXJuIHQ7cj1yLnNsaWNlKDAsLTMpLHQ9dC5yZXBsYWNlKFwiOjgwXCIsXCJcIik7fXJldHVybiBsdCgpJiZyPT09eCRlLmF1dGhvcml0eSYmIWckay50ZXN0KHQpfHwoY3QoKSYmcj09PXgkZS5hdXRob3JpdHl8fGUmJmUuc29tZSgodD0+cj09PXR8fHIuZW5kc1dpdGgoYC4ke3R9YCkpKXx8Y3QoKSYmIUEkYih0KSkmJih0PXV0KHQpKSx0fWZ1bmN0aW9uIHh0KHQsZSxuKXtpZighKGUmJm4mJnQmJlEkMih0KSkpcmV0dXJuIHQ7Y29uc3Qgcj10LmluZGV4T2YoXCIvL1wiKSxvPXQuaW5kZXhPZihcIi9cIixyKzIpLGk9dC5pbmRleE9mKFwiOlwiLHIrMikscz1NYXRoLm1pbihvPDA/dC5sZW5ndGg6byxpPDA/dC5sZW5ndGg6aSk7aWYodC5zbGljZShyKzIscykudG9Mb3dlckNhc2UoKSE9PWUudG9Mb3dlckNhc2UoKSlyZXR1cm4gdDtyZXR1cm4gYCR7dC5zbGljZSgwLHIrMil9JHtufSR7dC5zbGljZShzKX1gfWZ1bmN0aW9uIE90KHQpe3JldHVybiBcInN0cmluZ1wiPT10eXBlb2YgdD9uZXcgJCQyKFQkNih0KSk6KHQuc2NoZW1lfHwodC5zY2hlbWU9eCRlLnNjaGVtZSksdCl9ZnVuY3Rpb24gVXQodCxlKXtjb25zdCBuPVUkNCh0KSxyPU9iamVjdC5rZXlzKG4ucXVlcnl8fHt9KTtyZXR1cm4gci5sZW5ndGg+MCYmZSYmZS53YXJuKFwicmVtb3ZlUXVlcnlQYXJhbWV0ZXJzKClcIixgVXJsIHF1ZXJ5IHBhcmFtZXRlcnMgYXJlIG5vdCBzdXBwb3J0ZWQsIHRoZSBmb2xsb3dpbmcgcGFyYW1ldGVycyBoYXZlIGJlZW4gcmVtb3ZlZDogJHtyLmpvaW4oXCIsIFwiKX0uYCksbi5wYXRofWZ1bmN0aW9uIGJ0KHQsZSxuKXtjb25zdCByPVUkNCh0KSxvPXIucXVlcnl8fHt9O3JldHVybiBvW2VdPVN0cmluZyhuKSxgJHtyLnBhdGh9PyR7QyQ5KG8pfWB9ZnVuY3Rpb24gUnQodCxlKXtjb25zdCBuPVUkNCh0KSxyPW4ucXVlcnl8fHt9O2Zvcihjb25zdCBpIGluIGUpcltpXT1lW2ldO2NvbnN0IG89QyQ5KHIpO3JldHVybiBvP2Ake24ucGF0aH0/JHtvfWA6bi5wYXRofWZ1bmN0aW9uIHF0KHQpe2lmKHQkTSh0KSlyZXR1cm4gbnVsbDtjb25zdCBlPXQubWF0Y2goanQpO3JldHVybiBlP2VbMV06bnVsbH1jb25zdCBqdD0vLio/XFwuKFteXFwvXSopJC87XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5mdW5jdGlvbiBvJHUoKXtjb25zdCB0PW4kTC5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQxNkFycmF5KDgpKTt0WzNdPTQwOTUmdFszXXwxNjM4NCx0WzRdPTE2MzgzJnRbNF18MzI3Njg7Y29uc3Qgbz1vPT50W29dLnRvU3RyaW5nKDE2KTtyZXR1cm4gbygwKStvKDEpK1wiLVwiK28oMikrXCItXCIrbygzKStcIi1cIitvKDQpK1wiLVwiK28oNSkrbyg2KStvKDcpfWNvbnN0IG4kTD1lJEwuY3J5cHRvfHxlJEwubXNDcnlwdG87XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5jb25zdCByJHM9NztmdW5jdGlvbiB0JEcoZSl7c3dpdGNoKGUpe2Nhc2VcImRlZmF1bHRzXCI6cmV0dXJuIDA7Y2FzZVwic2VydmljZVwiOnJldHVybiAyO2Nhc2VcInBvcnRhbC1pdGVtXCI6cmV0dXJuIDM7Y2FzZVwid2ViLXNjZW5lXCI6cmV0dXJuIDQ7Y2FzZVwid2ViLW1hcFwiOnJldHVybiA1O2Nhc2VcInVzZXJcIjpyZXR1cm4gNn19ZnVuY3Rpb24gbiRLKHIpe3N3aXRjaChyKXtjYXNlIDA6cmV0dXJuIFwiZGVmYXVsdHNcIjtjYXNlIDI6cmV0dXJuIFwic2VydmljZVwiO2Nhc2UgMzpyZXR1cm4gXCJwb3J0YWwtaXRlbVwiO2Nhc2UgNDpyZXR1cm4gXCJ3ZWItc2NlbmVcIjtjYXNlIDU6cmV0dXJuIFwid2ViLW1hcFwiO2Nhc2UgNjpyZXR1cm4gXCJ1c2VyXCJ9cmV0dXJuIG0kRih2b2lkIDApfWZ1bmN0aW9uIGMkVihlKXtyZXR1cm4gbiRLKGUpfVxuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuZnVuY3Rpb24gcCQxMShpKXtyZXR1cm4gbyR0W24kSihpKV18fGUkd31mdW5jdGlvbiBuJEooaSl7cmV0dXJuIGkgaW5zdGFuY2VvZiBCbG9iP2kudHlwZTp0JEYoaS51cmwpfWZ1bmN0aW9uIHQkRihwKXtjb25zdCBuPXF0KHApO3JldHVybiBnJGpbbl18fGEkS31jb25zdCBvJHQ9e30sYSRLPVwidGV4dC9wbGFpblwiLGUkdz1vJHRbYSRLXSxnJGo9e3BuZzpcImltYWdlL3BuZ1wiLGpwZWc6XCJpbWFnZS9qcGVnXCIsanBnOlwiaW1hZ2UvanBnXCIsYm1wOlwiaW1hZ2UvYm1wXCIsZ2lmOlwiaW1hZ2UvZ2lmXCIsanNvbjpcImFwcGxpY2F0aW9uL2pzb25cIix0eHQ6XCJ0ZXh0L3BsYWluXCIseG1sOlwiYXBwbGljYXRpb24veG1sXCIsc3ZnOlwiaW1hZ2Uvc3ZnK3htbFwiLHppcDpcImFwcGxpY2F0aW9uL3ppcFwiLHBiZjpcImFwcGxpY2F0aW9uL3ZuZC5tYXBib3gtdmVjdG9yLXRpbGVcIixnejpcImFwcGxpY2F0aW9uL2d6aXBcIn07Zm9yKGNvbnN0IGwgaW4gZyRqKW8kdFtnJGpbbF1dPWw7XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5mdW5jdGlvbiBjJFUocixvKXtjb25zdCBzPW8mJm8udXJsJiZvLnVybC5wYXRoO2lmKHImJnMmJihyPVQkNihyLHMse3ByZXNlcnZlUHJvdG9jb2xSZWxhdGl2ZTohMH0pLG8ucG9ydGFsSXRlbSYmby5yZWFkUmVzb3VyY2VQYXRocykpe2NvbnN0IGU9VyQyKHIsby5wb3J0YWxJdGVtLml0ZW1VcmwpO2gkdy50ZXN0KGUpJiZvLnJlYWRSZXNvdXJjZVBhdGhzLnB1c2goby5wb3J0YWxJdGVtLnJlc291cmNlRnJvbVBhdGgoZSkucGF0aCk7fXJldHVybiBJJDQocixvJiZvLnBvcnRhbCl9ZnVuY3Rpb24gaSRXKHIsYSx1PTApe2lmKCFyKXJldHVybiByOyFRJDIocikmJmEmJmEuYmxvY2tlZFJlbGF0aXZlVXJscyYmYS5ibG9ja2VkUmVsYXRpdmVVcmxzLnB1c2gocik7bGV0IG49VCQ2KHIpO2lmKGEpe2NvbnN0IGU9YS52ZXJpZnlJdGVtUmVsYXRpdmVVcmxzJiZhLnZlcmlmeUl0ZW1SZWxhdGl2ZVVybHMucm9vdFBhdGh8fGEudXJsJiZhLnVybC5wYXRoO2lmKGUpe2NvbnN0IG89SSQ0KGUsYS5wb3J0YWwpO249VyQyKEkkNChuLGEucG9ydGFsKSxvLG8pLG4hPT1yJiZhLnZlcmlmeUl0ZW1SZWxhdGl2ZVVybHMmJmEudmVyaWZ5SXRlbVJlbGF0aXZlVXJscy53cml0dGVuVXJscy5wdXNoKG4pO319cmV0dXJuIG49VSQzKG4sYSYmYS5wb3J0YWwpLFEkMihuKSYmKG49eiQ2KG4pKSxudWxsIT1hJiZhLnJlc291cmNlcyYmbnVsbCE9YSYmYS5wb3J0YWxJdGVtJiYhUSQyKG4pJiYhRyQ2KG4pJiYwPT09dSYmYS5yZXNvdXJjZXMudG9LZWVwLnB1c2goe3Jlc291cmNlOmEucG9ydGFsSXRlbS5yZXNvdXJjZUZyb21QYXRoKG4pfSksbn1mdW5jdGlvbiBtJEIocixlLHQpe3JldHVybiBjJFUocix0KX1mdW5jdGlvbiBwJDEwKHIsZSx0LG8pe2NvbnN0IHM9aSRXKHIsbyk7dm9pZCAwIT09cyYmKGVbdF09cyk7fWNvbnN0IGYkcz0vXFwvaXRlbXNcXC8oW15cXC9dKylcXC9yZXNvdXJjZXNcXC8vLGgkdz0vXlxcLlxcL3Jlc291cmNlc1xcLy87ZnVuY3Rpb24gdiRjKGUpe2NvbnN0IHQ9ciRBKGUpP2UubWF0Y2goZiRzKTpudWxsO3JldHVybiByJEEodCk/dFsxXTpudWxsfWZ1bmN0aW9uIFUkMyhyLGUpe3JldHVybiBlJiYhZS5pc1BvcnRhbCYmZS51cmxLZXkmJmUuY3VzdG9tQmFzZVVybD94dChyLGAke2UudXJsS2V5fS4ke2UuY3VzdG9tQmFzZVVybH1gLGUucG9ydGFsSG9zdG5hbWUpOnJ9ZnVuY3Rpb24gSSQ0KHIsZSl7aWYoIWV8fGUuaXNQb3J0YWx8fCFlLnVybEtleXx8IWUuY3VzdG9tQmFzZVVybClyZXR1cm4gcjtjb25zdCB0PWAke2UudXJsS2V5fS4ke2UuY3VzdG9tQmFzZVVybH1gO3JldHVybiBFJDQoeCRlLGAke3gkZS5zY2hlbWV9Oi8vJHt0fWApP3h0KHIsZS5wb3J0YWxIb3N0bmFtZSx0KTp4dChyLHQsZS5wb3J0YWxIb3N0bmFtZSl9dmFyIFIkOD1PYmplY3QuZnJlZXplKHtfX3Byb3RvX186bnVsbCxmcm9tSlNPTjpjJFUsdG9KU09OOmkkVyxyZWFkOm0kQix3cml0ZTpwJDEwLGl0ZW1JZEZyb21SZXNvdXJjZVVybDp2JGN9KTtcblxuLyoqXHJcbiAqIFVzZWZ1bCB1dGlsaXR5IG1ldGhvZHMgZm9yIHdvcmsgd2l0aCBET00gb2JqZWN0cy4gV2l0aCB0aGlzIHlvdSBjYW4gaGlkZSwgc2hvdywgZW5hYmxlLCBkaXNhYmxlIG5vZGVzLCBvciBjaGVjayBpZiB0aGV5IGFyZSBpbiB0aGUgbGF5b3V0LlxyXG4gKi9cclxuLy8gRW5zdXJlcyBhIHN0cmluZyBpcyBwcmVzZW50ZWQgYXMgYW4gW10gb2Ygc3RyaW5nLlxyXG5mdW5jdGlvbiBzdHIyYXJyYXkocykge1xyXG4gIGlmIChBcnJheS5pc0FycmF5KHMpKSB7XHJcbiAgICByZXR1cm4gcy5maWx0ZXIoKHMpID0+ICEhcyk7XHJcbiAgfVxyXG4gIHJldHVybiBzID8gcy5zcGxpdChcIiBcIikuZmlsdGVyKChzKSA9PiAhIXMpIDogW107XHJcbn1cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vL1xyXG4vLyBHZW5lcmFsIHV0aWxpdHkgbWV0aG9kc1xyXG4vL1xyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbmxldCB3b3JrZXJCb2R5RGlyO1xyXG4vKipcclxuICogQ2hlY2tzIHdoZXRoZXIgdGhlIGRvY3VtZW50IGlzIGZvcm1lZCBmb3IgYSBsZWZ0LXRvLXJpZ2h0IGxhbmd1YWdlLlxyXG4gKiBAcmV0dXJucyBUaGUgdHJ1ZSB2YWx1ZSBpbiB0aGUgY2FzZSBvZiBhIGxlZnQtdG8tcmlnaHQgbGFuZ3VhZ2UgYW5kIGZhbHNlIG90aGVyd2lzZS5cclxuICovXHJcbmZ1bmN0aW9uIGlzQm9keUx0cigpIHtcclxuICByZXR1cm4gKChoYXMoXCJ3b3JrZXJcIikgPyB3b3JrZXJCb2R5RGlyIDogZG9jdW1lbnQuYm9keS5kaXIpIHx8IFwibHRyXCIpLnRvTG93ZXJDYXNlKCkgPT09IFwibHRyXCI7IC8vIEJvb2xlYW5cclxufVxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8vXHJcbi8vIFdvcmsgd2l0aCBhdHRyaWJ1dGVzIChyZXBsYWNlbWVudCBmb3IgZG9qby9kb20tYXR0ci5qcylcclxuLy9cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vLyBhdHRyaWJ1dGUtcmVsYXRlZCBmdW5jdGlvbnMgKHRvIGJlIG9ic29sZXRlIHNvb24pXHJcbmNvbnN0IGZvcmNlUHJvcE5hbWVzID0ge1xyXG4gIGlubmVySFRNTDogMSxcclxuICB0ZXh0Q29udGVudDogMSxcclxuICBjbGFzc05hbWU6IDEsXHJcbiAgdmFsdWU6IDFcclxufTtcclxuY29uc3QgYXR0ck5hbWVzID0ge1xyXG4gIC8vIG9yaWdpbmFsIGF0dHJpYnV0ZSBuYW1lc1xyXG4gIGNsYXNzbmFtZTogXCJjbGFzc1wiXHJcbn07XHJcbmNvbnN0IG5hbWVzID0ge1xyXG4gIC8vIHByb3BlcnRpZXMgcmVuYW1lZCB0byBhdm9pZCBjbGFzaGVzIHdpdGggcmVzZXJ2ZWQgd29yZHNcclxuICBjbGFzczogXCJjbGFzc05hbWVcIixcclxuICAvLyBwcm9wZXJ0aWVzIHdyaXR0ZW4gYXMgY2FtZWxDYXNlXHJcbiAgdGFiaW5kZXg6IFwidGFiSW5kZXhcIixcclxuICByZWFkb25seTogXCJyZWFkT25seVwiLFxyXG4gIGNvbHNwYW46IFwiY29sU3BhblwiLFxyXG4gIGZyYW1lYm9yZGVyOiBcImZyYW1lQm9yZGVyXCIsXHJcbiAgcm93c3BhbjogXCJyb3dTcGFuXCIsXHJcbiAgdGV4dGNvbnRlbnQ6IFwidGV4dENvbnRlbnRcIlxyXG59O1xyXG5mdW5jdGlvbiBzZXRBdHRyaWJ1dGUobm9kZSwgYXR0cmlidXRlTWFwT3JOYW1lLCB2YWx1ZSkge1xyXG4gIGlmICh0eXBlb2YgYXR0cmlidXRlTWFwT3JOYW1lID09PSBcIm9iamVjdFwiKSB7XHJcbiAgICBmb3IgKGNvbnN0IG5hbWUgaW4gYXR0cmlidXRlTWFwT3JOYW1lKSB7XHJcbiAgICAgIGlmIChuYW1lID09PSBcInN0eWxlXCIpIHtcclxuICAgICAgICBzZXRBdHRyaWJ1dGUobm9kZSwgXCJzdHlsZVwiLCBhdHRyaWJ1dGVNYXBPck5hbWVbbmFtZV0pO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHNldEF0dHJpYnV0ZShub2RlLCBuYW1lLCBhdHRyaWJ1dGVNYXBPck5hbWVbbmFtZV0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbm9kZTtcclxuICB9XHJcbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcclxuICAgIHJldHVybiBub2RlO1xyXG4gIH1cclxuICBjb25zdCBuYW1lID0gYXR0cmlidXRlTWFwT3JOYW1lO1xyXG4gIGNvbnN0IGxjID0gbmFtZS50b0xvd2VyQ2FzZSgpO1xyXG4gIGNvbnN0IHByb3BOYW1lID0gbmFtZXNbbGNdIHx8IG5hbWU7XHJcbiAgY29uc3QgZm9yY2VQcm9wID0gZm9yY2VQcm9wTmFtZXNbcHJvcE5hbWVdO1xyXG4gIGlmIChwcm9wTmFtZSA9PT0gXCJzdHlsZVwiICYmIHR5cGVvZiB2YWx1ZSAhPT0gXCJzdHJpbmdcIikge1xyXG4gICAgc2V0U3R5bGUobm9kZSwgdmFsdWUpO1xyXG4gIH1cclxuICBlbHNlIGlmIChmb3JjZVByb3AgfHwgdHlwZW9mIHZhbHVlID09PSBcImJvb2xlYW5cIikge1xyXG4gICAgbm9kZVtwcm9wTmFtZV0gPSB2YWx1ZTtcclxuICB9XHJcbiAgZWxzZSB7XHJcbiAgICAvLyBub2RlJ3MgYXR0cmlidXRlXHJcbiAgICBub2RlLnNldEF0dHJpYnV0ZShhdHRyTmFtZXNbbGNdIHx8IG5hbWUsIHZhbHVlICsgXCJcIik7XHJcbiAgfVxyXG4gIHJldHVybiBub2RlO1xyXG59XHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuLy9cclxuLy8gV29yayB3aXRoIGNsYXNzZXMgKHJlcGxhY2VtZW50IGZvciBkb2pvL2RvbS1jbGFzcy5qcylcclxuLy9cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vKipcclxuICogQWRkcyBjbGFzc2VzIHRvIHRoZSBub2RlIGNsYXNzIGxpc3QuXHJcbiAqIEBwYXJhbSBub2RlIEEgbm9kZS5cclxuICogQHBhcmFtIGNsYXNzU3RyIENsYXNzZXMgdG8gYWRkLiBUaGlzIGNhbiBiZSBhIHNwYWNlLXNlcGFyYXRlZCBsaXN0IG9mIGNsYXNzIG5hbWVzXHJcbiAqIG9yIGFuIGFycmF5IG9mIGNsYXNzIG5hbWVzLlxyXG4gKi9cclxuZnVuY3Rpb24gYWRkQ2xhc3Mobm9kZSwgY2xhc3NTdHIpIHtcclxuICBub2RlICYmXHJcbiAgICBub2RlLmNsYXNzTGlzdCAmJlxyXG4gICAgc3RyMmFycmF5KGNsYXNzU3RyKS5mb3JFYWNoKChzKSA9PiB7XHJcbiAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZChzKTtcclxuICAgIH0pO1xyXG59XHJcbi8qKlxyXG4gKiBSZW1vdmVzIGNsYXNzZXMgZnJvbSB0aGUgbm9kZSBjbGFzcyBsaXN0LlxyXG4gKiBAcGFyYW0gbm9kZSBBIG5vZGUuXHJcbiAqIEBwYXJhbSBjbGFzc1N0ciBDbGFzc2VzIHRvIHJlbW92ZS4gVGhpcyBjYW4gYmUgYSBzcGFjZS1zZXBhcmF0ZWQgbGlzdCBvZiBjbGFzcyBuYW1lc1xyXG4gKiBvciBhbiBhcnJheSBvZiBjbGFzcyBuYW1lcy5cclxuICovXHJcbmZ1bmN0aW9uIHJlbW92ZUNsYXNzKG5vZGUsIGNsYXNzU3RyKSB7XHJcbiAgbm9kZSAmJlxyXG4gICAgbm9kZS5jbGFzc0xpc3QgJiZcclxuICAgIHN0cjJhcnJheShjbGFzc1N0cikuZm9yRWFjaCgocykgPT4ge1xyXG4gICAgICBub2RlLmNsYXNzTGlzdC5yZW1vdmUocyk7XHJcbiAgICB9KTtcclxufVxyXG4vKipcclxuICogUmVwbGFjZXMgb25lIG9yIG1vcmUgY2xhc3NlcyBvbiBhIG5vZGUgbGlzdC5cclxuICogQHBhcmFtIG5vZGUgQSBub2RlLlxyXG4gKiBAcGFyYW0gY2xhc3Nlc1RvQWRkIENsYXNzZXMgdG8gYWRkLlxyXG4gKiBAcGFyYW0gY2xhc3Nlc1RvUmVtb3ZlIENsYXNzZXMgdG8gcmVtb3ZlLlxyXG4gKi9cclxuZnVuY3Rpb24gcmVwbGFjZUNsYXNzKG5vZGUsIGFkZENsYXNzU3RyLCByZW1vdmVDbGFzc1N0cikge1xyXG4gIHJlbW92ZUNsYXNzKG5vZGUsIHJlbW92ZUNsYXNzU3RyKTtcclxuICBhZGRDbGFzcyhub2RlLCBhZGRDbGFzc1N0cik7XHJcbn1cclxuLyoqXHJcbiAqIEFkZHMvcmVtb3ZlcyBjbGFzc2VzIGluIGEgbm9kZSBjbGFzcyBsaXN0LlxyXG4gKiBAcGFyYW0gbm9kZSBBIG5vZGUuXHJcbiAqIEBwYXJhbSBjbGFzc2VzICBDbGFzc2VzIHRvIHRvZ2dsZS4gVGhpcyBjYW4gYmUgYSBzcGFjZS1zZXBhcmF0ZWQgbGlzdCBvZiBjbGFzcyBuYW1lc1xyXG4gKiBvciBhbiBhcnJheSBvZiBjbGFzcyBuYW1lcy5cclxuICogQHBhcmFtIGFkZCBBZGQvcmVtb3ZlIGZsYWc6IHRydWUgLSBhZGQsIGZhbHNlIC0gcmVtb3ZlLlxyXG4gKi9cclxuZnVuY3Rpb24gdG9nZ2xlQ2xhc3Mobm9kZSwgY2xhc3NTdHIsIGFkZCkge1xyXG4gIGFkZCA/IGFkZENsYXNzKG5vZGUsIGNsYXNzU3RyKSA6IHJlbW92ZUNsYXNzKG5vZGUsIGNsYXNzU3RyKTtcclxufVxyXG4vKipcclxuICogQ2hlY2tzIGEgbm9kZSB0byBjb250YWluIGEgY2xhc3MuXHJcbiAqIEBwYXJhbSBub2RlIEEgbm9kZS5cclxuICogQHBhcmFtIGNsYXNzU3RyIEEgY2xhc3MgbmFtZSB0byBsb29rIGZvci5cclxuICogQHJldHVybnMgVHJ1ZSBpZiB0aGlzIGNsYXNzIHByZXNlbnRzIGluIHRoZSBjbGFzcyBsaXN0IG9mIHRoZSBnaXZlbiBub2RlLlxyXG4gKi9cclxuZnVuY3Rpb24gY29udGFpbnNDbGFzcyhub2RlLCBjbGFzc1N0cikge1xyXG4gIHJldHVybiBub2RlICYmIG5vZGUuY2xhc3NMaXN0ID8gbm9kZS5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NTdHIpIDogZmFsc2U7XHJcbn1cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vL1xyXG4vLyBXb3JrIHdpdGggc3R5bGVzIChyZXBsYWNlbWVudCBmb3IgZG9qby9kb20tc3R5bGUuanMpXHJcbi8vXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuY29uc3QgX3BpeGVsTmFtZXNDYWNoZSA9IHtcclxuICBsZWZ0OiB0cnVlLFxyXG4gIHRvcDogdHJ1ZVxyXG59O1xyXG5jb25zdCBfZmxvYXRBbGlhc2VzID0ge1xyXG4gIGNzc0Zsb2F0OiAxLFxyXG4gIHN0eWxlRmxvYXQ6IDEsXHJcbiAgZmxvYXQ6IDFcclxufTtcclxuY29uc3QgX3BpeGVsUmVnRXhwID0gL21hcmdpbnxwYWRkaW5nfHdpZHRofGhlaWdodHxtYXh8bWlufG9mZnNldC87IC8vIHxib3JkZXJcclxuZnVuY3Rpb24gZ2V0U3R5bGUobm9kZSwgbmFtZSwgY29tcHV0ZWRTdHlsZSkge1xyXG4gIGNvbnN0IHN0eWxlID0gbm9kZS5zdHlsZTtcclxuICBpZiAobmFtZSA9PT0gXCJvcGFjaXR5XCIpIHtcclxuICAgIHJldHVybiBzdHlsZS5vcGFjaXR5O1xyXG4gIH1cclxuICBuYW1lID0gX2Zsb2F0QWxpYXNlc1tuYW1lXSA/IChcImNzc0Zsb2F0XCIgaW4gc3R5bGUgPyBcImNzc0Zsb2F0XCIgOiBcInN0eWxlRmxvYXRcIikgOiBuYW1lO1xyXG4gIGNvbnN0IHMgPSBjb21wdXRlZFN0eWxlIHx8IGdldENvbXB1dGVkU3R5bGUkMShub2RlKTtcclxuICByZXR1cm4gX3RvU3R5bGVWYWx1ZShub2RlLCBuYW1lLCBzW25hbWVdIHx8IHN0eWxlW25hbWVdKTtcclxufVxyXG5mdW5jdGlvbiBzZXRTdHlsZShub2RlLCBuYW1lLCB2YWx1ZSkge1xyXG4gIG5hbWUgPSBfZmxvYXRBbGlhc2VzW25hbWVdID8gKFwiY3NzRmxvYXRcIiBpbiBub2RlLnN0eWxlID8gXCJjc3NGbG9hdFwiIDogXCJzdHlsZUZsb2F0XCIpIDogbmFtZTtcclxuICBjb25zdCBpc09iamVjdFN0eWxlID0gbmFtZSAmJiB0eXBlb2YgbmFtZSA9PT0gXCJvYmplY3RcIiAmJiB2YWx1ZSA9PT0gdW5kZWZpbmVkO1xyXG4gIGlmICghaXNPYmplY3RTdHlsZSkge1xyXG4gICAgaWYgKG5hbWUgPT09IFwib3BhY2l0eVwiKSB7XHJcbiAgICAgIG5vZGUuc3R5bGUub3BhY2l0eSA9IHZhbHVlICsgXCJcIjtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBub2RlLnN0eWxlW25hbWVdID0gdmFsdWU7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGVsc2Uge1xyXG4gICAgZm9yIChjb25zdCB4IGluIG5hbWUpIHtcclxuICAgICAgc2V0U3R5bGUobm9kZSwgeCwgbmFtZVt4XSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBHZXRzIGNvbXB1dGVkIHN0eWxlIG9mIGEgZ2l2ZW4gSFRNTCBub2RlLlxyXG4gKiBAcGFyYW0gbm9kZSBBbiBIVE1MIG5vZGUuXHJcbiAqIEByZXR1cm5zIFRoZSBjb21wdXRlZCBzdHlsZS5cclxuICovXHJcbmZ1bmN0aW9uIGdldENvbXB1dGVkU3R5bGUkMShub2RlKSB7XHJcbiAgcmV0dXJuIG5vZGUgJiYgbm9kZS5ub2RlVHlwZSA9PT0gMSAmJiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShub2RlKTtcclxufVxyXG5mdW5jdGlvbiB0b1BpeGVsVmFsdWUodmFsdWUpIHtcclxuICByZXR1cm4gcGFyc2VGbG9hdCh2YWx1ZSkgfHwgMDtcclxufVxyXG5mdW5jdGlvbiBfdG9TdHlsZVZhbHVlKG5vZGUsIHR5cGUsIHZhbHVlKSB7XHJcbiAgdHlwZSA9IHR5cGUudG9Mb3dlckNhc2UoKTtcclxuICAvLyBBZGp1c3RtZW50cyBmb3IgSUUgYW5kIEVkZ2VcclxuICBpZiAodmFsdWUgPT09IFwiYXV0b1wiKSB7XHJcbiAgICBpZiAodHlwZSA9PT0gXCJoZWlnaHRcIikge1xyXG4gICAgICByZXR1cm4gbm9kZS5vZmZzZXRIZWlnaHQ7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZSA9PT0gXCJ3aWR0aFwiKSB7XHJcbiAgICAgIHJldHVybiBub2RlLm9mZnNldFdpZHRoO1xyXG4gICAgfVxyXG4gIH1cclxuICBpZiAodHlwZSA9PT0gXCJmb250d2VpZ2h0XCIpIHtcclxuICAgIHJldHVybiB2YWx1ZSArIFwiXCIgPT09IFwiNzAwXCIgPyBcImJvbGRcIiA6IFwibm9ybWFsXCI7XHJcbiAgfVxyXG4gIGlmICghKHR5cGUgaW4gX3BpeGVsTmFtZXNDYWNoZSkpIHtcclxuICAgIF9waXhlbE5hbWVzQ2FjaGVbdHlwZV0gPSBfcGl4ZWxSZWdFeHAudGVzdCh0eXBlKTtcclxuICB9XHJcbiAgcmV0dXJuIF9waXhlbE5hbWVzQ2FjaGVbdHlwZV0gPyB0b1BpeGVsVmFsdWUodmFsdWUpIDogdmFsdWU7XHJcbn1cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vL1xyXG4vLyBXb3JrIHdpdGggZ2VvbWV0cnkgKHJlcGxhY2VtZW50IGZvciBkb2pvL2RvbS1nZW9tZXRyeS5qcylcclxuLy9cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vKipcclxuICogR2V0cyB0aGUgcG9zaXRpb24gYW5kIHNpemUgb2YgYSBub2RlIHJlbGF0aXZlIHRvIHRoZSB2aWV3cG9ydC5cclxuICogQHBhcmFtIG5vZGUgQSBub2RlIHRvIGNhbGN1bGF0ZSB0aGUgc2l6ZSBhbmQgcG9zaXRpb24uXHJcbiAqIEBwYXJhbSBpbmNsdWRlU2Nyb2xsIEEgZmxhZyBpbmNsdWRlIGFueSBkb2N1bWVudCBvZmZzZXRzIHRoYXQgbWF5IGFmZmVjdCB0aGUgcG9zaXRpb24gcmVsYXRpdmUgdG8gdGhlIHZpZXdwb3J0LlxyXG4gKiBAcmV0dXJucyBUaGUgYm94OiB4L3kgLSBwb3NpdGlvbiwgdy9oIC0gZGltZW5zaW9ucy5cclxuICovXHJcbmZ1bmN0aW9uIHBvc2l0aW9uKG5vZGUsIGluY2x1ZGVTY3JvbGwpIHtcclxuICBjb25zdCBjbGllbnRSZWN0ID0gbm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICBjb25zdCByZXN1bHQgPSB7XHJcbiAgICB4OiBjbGllbnRSZWN0LmxlZnQsXHJcbiAgICB5OiBjbGllbnRSZWN0LnRvcCxcclxuICAgIHc6IGNsaWVudFJlY3QucmlnaHQgLSBjbGllbnRSZWN0LmxlZnQsXHJcbiAgICBoOiBjbGllbnRSZWN0LmJvdHRvbSAtIGNsaWVudFJlY3QudG9wXHJcbiAgfTtcclxuICBpZiAoaW5jbHVkZVNjcm9sbCkge1xyXG4gICAgY29uc3Qgc2Nyb2xsID0gZG9jU2Nyb2xsKCk7XHJcbiAgICByZXN1bHQueCArPSBzY3JvbGwueDtcclxuICAgIHJlc3VsdC55ICs9IHNjcm9sbC55O1xyXG4gIH1cclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbi8qKlxyXG4gKiBHZXRzIGEgbWFyZ2luIGJveCBvZiBhIG5vZGUuXHJcbiAqIEBwYXJhbSBub2RlIEEgbm9kZS5cclxuICogQHBhcmFtIGNvbXB1dGVkU3R5bGUgQW4gb3B0aW9uYWwgY29tcHV0ZWQgc3R5bGUgb2YgdGhlIGdpdmVuIG5vZGUuXHJcbiAqIEByZXR1cm5zIFRoZSBtYXJnaW4gYm94OiBsL3QgLSBwb3NpdGlvbiwgdy9oIC0gZGltZW5zaW9ucy5cclxuICovXHJcbmZ1bmN0aW9uIGdldE1hcmdpbkJveChub2RlLCBjb21wdXRlZFN0eWxlKSB7XHJcbiAgY29uc3QgcyA9IGNvbXB1dGVkU3R5bGUgfHwgZ2V0Q29tcHV0ZWRTdHlsZSQxKG5vZGUpLCBtZSA9IGdldE1hcmdpbkV4dGVudHMobm9kZSwgcyksIGwgPSBub2RlLm9mZnNldExlZnQgLSBtZS5sLCB0ID0gbm9kZS5vZmZzZXRUb3AgLSBtZS50O1xyXG4gIHJldHVybiB7XHJcbiAgICBsLFxyXG4gICAgdCxcclxuICAgIHc6IG5vZGUub2Zmc2V0V2lkdGggKyBtZS53LFxyXG4gICAgaDogbm9kZS5vZmZzZXRIZWlnaHQgKyBtZS5oXHJcbiAgfTtcclxufVxyXG5mdW5jdGlvbiBzZXRNYXJnaW5Cb3gobm9kZSwgYm94LCBjb21wdXRlZFN0eWxlKSB7XHJcbiAgbGV0IHcgPSBib3gudywgaCA9IGJveC5oO1xyXG4gIGNvbnN0IHMgPSBjb21wdXRlZFN0eWxlIHx8IGdldENvbXB1dGVkU3R5bGUkMShub2RlKSwgcGIgPSBnZXRQYWRCb3JkZXJFeHRlbnRzKG5vZGUsIHMpLCBtYiA9IGdldE1hcmdpbkV4dGVudHMobm9kZSwgcyk7XHJcbiAgaWYgKHcgPj0gMCkge1xyXG4gICAgdyA9IE1hdGgubWF4KHcgLSBwYi53IC0gbWIudywgMCk7XHJcbiAgfVxyXG4gIGlmIChoID49IDApIHtcclxuICAgIGggPSBNYXRoLm1heChoIC0gcGIuaCAtIG1iLmgsIDApO1xyXG4gIH1cclxuICBzZXRCb3gobm9kZSwgYm94LmwsIGJveC50LCB3LCBoKTtcclxufVxyXG5mdW5jdGlvbiBzZXRCb3gobm9kZSwgbCwgdCwgdywgaCwgdSkge1xyXG4gIHUgPSB1IHx8IFwicHhcIjtcclxuICBjb25zdCBzID0gbm9kZS5zdHlsZTtcclxuICBpZiAoIWlzTmFOKGwpKSB7XHJcbiAgICBzLmxlZnQgPSBsICsgdTtcclxuICB9XHJcbiAgaWYgKCFpc05hTih0KSkge1xyXG4gICAgcy50b3AgPSB0ICsgdTtcclxuICB9XHJcbiAgaWYgKHcgPj0gMCkge1xyXG4gICAgcy53aWR0aCA9IHcgKyB1O1xyXG4gIH1cclxuICBpZiAoaCA+PSAwKSB7XHJcbiAgICBzLmhlaWdodCA9IGggKyB1O1xyXG4gIH1cclxufVxyXG4vKipcclxuICogR2V0cyBhbiBvYmplY3Qgd2l0aCBwcm9wZXJ0aWVzIHVzZWZ1bCBmb3Igbm9kZSBmaXR0aW5nIHdpdGggcmVnYXJkcyB0byBib3ggbWFyZ2lucyAoaS5lLiwgdGhlIG91dGVyLWJveCkuXHJcbiAqIEBwYXJhbSBub2RlIEEgbm9kZS5cclxuICogQHBhcmFtIGNvbXB1dGVkU3R5bGUgQW4gb3B0aW9uYWwgY29tcHV0ZWQgc3R5bGUgb2YgdGhlIGdpdmVuIG5vZGUuXHJcbiAqIEByZXR1cm5zIENhbGN1bGF0ZWQgbWFyZ2luIHNpemVzOiBsL3Qvci9iIC0gcmVzcGVjdGl2ZSBtYXJnaW5zLCB3ID0gbCArIHIsIGggPSB0ICsgYi5cclxuICovXHJcbmZ1bmN0aW9uIGdldE1hcmdpbkV4dGVudHMobm9kZSwgY29tcHV0ZWRTdHlsZSkge1xyXG4gIGNvbnN0IHMgPSBjb21wdXRlZFN0eWxlIHx8IGdldENvbXB1dGVkU3R5bGUkMShub2RlKSwgcHggPSB0b1BpeGVsVmFsdWUsIGwgPSBweChzLm1hcmdpbkxlZnQpLCB0ID0gcHgocy5tYXJnaW5Ub3ApLCByID0gcHgocy5tYXJnaW5SaWdodCksIGIgPSBweChzLm1hcmdpbkJvdHRvbSk7XHJcbiAgcmV0dXJuIHtcclxuICAgIGwsXHJcbiAgICB0LFxyXG4gICAgcixcclxuICAgIGIsXHJcbiAgICB3OiBsICsgcixcclxuICAgIGg6IHQgKyBiXHJcbiAgfTtcclxufVxyXG4vKipcclxuICogR2V0cyBhIG1hcmdpbiBib3ggb2YgYSBub2RlLlxyXG4gKiBAcGFyYW0gbm9kZSBBIG5vZGUuXHJcbiAqIEBwYXJhbSBjb21wdXRlZFN0eWxlIEFuIG9wdGlvbmFsIGNvbXB1dGVkIHN0eWxlIG9mIHRoZSBnaXZlbiBub2RlLlxyXG4gKiBAcmV0dXJucyBUaGUgY29udGVudCBib3g6IGwvdCAtIHBvc2l0aW9uLCB3L2ggLSBkaW1lbnNpb25zLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0Q29udGVudEJveChub2RlLCBjb21wdXRlZFN0eWxlKSB7XHJcbiAgY29uc3QgcyA9IGNvbXB1dGVkU3R5bGUgfHwgZ2V0Q29tcHV0ZWRTdHlsZSQxKG5vZGUpLCBwZSA9IGdldFBhZEV4dGVudHMobm9kZSwgcyksIGJlID0gZ2V0Qm9yZGVyRXh0ZW50cyhub2RlLCBzKSwgbCA9IG5vZGUub2Zmc2V0TGVmdCArIHBlLmwgKyBiZS5sLCB0ID0gbm9kZS5vZmZzZXRUb3AgKyBwZS50ICsgYmUudDtcclxuICBsZXQgaCwgdyA9IG5vZGUuY2xpZW50V2lkdGg7XHJcbiAgaWYgKCF3KSB7XHJcbiAgICB3ID0gbm9kZS5vZmZzZXRXaWR0aCAtIGJlLnc7XHJcbiAgICBoID0gbm9kZS5vZmZzZXRIZWlnaHQgLSBiZS5oO1xyXG4gIH1cclxuICBlbHNlIHtcclxuICAgIGggPSBub2RlLmNsaWVudEhlaWdodDtcclxuICB9XHJcbiAgcmV0dXJuIHtcclxuICAgIGwsXHJcbiAgICB0LFxyXG4gICAgdzogdyAtIHBlLncsXHJcbiAgICBoOiBoIC0gcGUuaFxyXG4gIH07XHJcbn1cclxuLyoqXHJcbiAqIEdldHMgYW4gb2JqZWN0IHdpdGggcHJvcGVydGllcyB1c2VmdWwgZm9yIG5vZGUgZml0dGluZyB3aXRoIHJlZ2FyZHMgdG8gcGFkZGluZyBhbmQgYm9yZGVyLlxyXG4gKiBAcGFyYW0gbm9kZSBBIG5vZGUuXHJcbiAqIEBwYXJhbSBjb21wdXRlZFN0eWxlIEFuIG9wdGlvbmFsIGNvbXB1dGVkIHN0eWxlIG9mIHRoZSBnaXZlbiBub2RlLlxyXG4gKiBAcmV0dXJucyBDYWxjdWxhdGVkIHBhZGRpbmcgKyBib3JkZXIgc2l6ZXM6IGwvdC9yL2IgLSByZXNwZWN0aXZlIHNpemVzLCB3ID0gbCArIHIsIGggPSB0ICsgYi5cclxuICovXHJcbmZ1bmN0aW9uIGdldFBhZEJvcmRlckV4dGVudHMobm9kZSwgY29tcHV0ZWRTdHlsZSkge1xyXG4gIGNvbnN0IHMgPSBjb21wdXRlZFN0eWxlIHx8IGdldENvbXB1dGVkU3R5bGUkMShub2RlKSwgcCA9IGdldFBhZEV4dGVudHMobm9kZSwgcyksIGIgPSBnZXRCb3JkZXJFeHRlbnRzKG5vZGUsIHMpO1xyXG4gIHJldHVybiB7XHJcbiAgICBsOiBwLmwgKyBiLmwsXHJcbiAgICB0OiBwLnQgKyBiLnQsXHJcbiAgICByOiBwLnIgKyBiLnIsXHJcbiAgICBiOiBwLmIgKyBiLmIsXHJcbiAgICB3OiBwLncgKyBiLncsXHJcbiAgICBoOiBwLmggKyBiLmhcclxuICB9O1xyXG59XHJcbi8qKlxyXG4gKiBHZXRzIGFuIG9iamVjdCB3aXRoIHByb3BlcnRpZXMgdXNlZnVsIGZvciBub2RlIGZpdHRpbmcgcmVnYWRzIHRvIHBhZGRpbmdzLlxyXG4gKiBAcGFyYW0gbm9kZSBBIG5vZGUuXHJcbiAqIEBwYXJhbSBjb21wdXRlZFN0eWxlIEFuIG9wdGlvbmFsIGNvbXB1dGVkIHN0eWxlIG9mIHRoZSBnaXZlbiBub2RlLlxyXG4gKiBAcmV0dXJucyBDYWxjdWxhdGVkIHBhZGRpbmcgc2l6ZXM6IGwvdC9yL2IgLSByZXNwZWN0aXZlIHNpemVzLCB3ID0gbCArIHIsIGggPSB0ICsgYi5cclxuICovXHJcbmZ1bmN0aW9uIGdldFBhZEV4dGVudHMobm9kZSwgY29tcHV0ZWRTdHlsZSkge1xyXG4gIGNvbnN0IHMgPSBjb21wdXRlZFN0eWxlIHx8IGdldENvbXB1dGVkU3R5bGUkMShub2RlKSwgcHggPSB0b1BpeGVsVmFsdWUsIGwgPSBweChzLnBhZGRpbmdMZWZ0KSwgdCA9IHB4KHMucGFkZGluZ1RvcCksIHIgPSBweChzLnBhZGRpbmdSaWdodCksIGIgPSBweChzLnBhZGRpbmdCb3R0b20pO1xyXG4gIHJldHVybiB7XHJcbiAgICBsLFxyXG4gICAgdCxcclxuICAgIHIsXHJcbiAgICBiLFxyXG4gICAgdzogbCArIHIsXHJcbiAgICBoOiB0ICsgYlxyXG4gIH07XHJcbn1cclxuLyoqXHJcbiAqIEdldHMgYW4gb2JqZWN0IHdpdGggcHJvcGVydGllcyB1c2VmdWwgZm9yIG5vZGUgZml0dGluZyByZWdhZHMgdG8gYm9yZGVycy5cclxuICogQHBhcmFtIG5vZGUgQSBub2RlLlxyXG4gKiBAcGFyYW0gY29tcHV0ZWRTdHlsZSBBbiBvcHRpb25hbCBjb21wdXRlZCBzdHlsZSBvZiB0aGUgZ2l2ZW4gbm9kZS5cclxuICogQHJldHVybnMgQ2FsY3VsYXRlZCBib3JkZXIgc2l6ZXM6IGwvdC9yL2IgLSByZXNwZWN0aXZlIHNpemVzLCB3ID0gbCArIHIsIGggPSB0ICsgYi5cclxuICovXHJcbmZ1bmN0aW9uIGdldEJvcmRlckV4dGVudHMobm9kZSwgY29tcHV0ZWRTdHlsZSkge1xyXG4gIGNvbnN0IHB4ID0gdG9QaXhlbFZhbHVlLCBzID0gY29tcHV0ZWRTdHlsZSB8fCBnZXRDb21wdXRlZFN0eWxlJDEobm9kZSksIGwgPSBzLmJvcmRlckxlZnRTdHlsZSAhPT0gXCJub25lXCIgPyBweChzLmJvcmRlckxlZnRXaWR0aCkgOiAwLCB0ID0gcy5ib3JkZXJUb3BTdHlsZSAhPT0gXCJub25lXCIgPyBweChzLmJvcmRlclRvcFdpZHRoKSA6IDAsIHIgPSBzLmJvcmRlclJpZ2h0U3R5bGUgIT09IFwibm9uZVwiID8gcHgocy5ib3JkZXJSaWdodFdpZHRoKSA6IDAsIGIgPSBzLmJvcmRlckJvdHRvbVN0eWxlICE9PSBcIm5vbmVcIiA/IHB4KHMuYm9yZGVyQm90dG9tV2lkdGgpIDogMDtcclxuICByZXR1cm4ge1xyXG4gICAgbCxcclxuICAgIHQsXHJcbiAgICByLFxyXG4gICAgYixcclxuICAgIHc6IGwgKyByLFxyXG4gICAgaDogdCArIGJcclxuICB9O1xyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZSh0YWdOYW1lLCBhdHRycywgcmVmTm9kZSwgcG9zaXRpb24pIHtcclxuICBpZiAoaGFzKFwid29ya2VyXCIpKSB7XHJcbiAgICBjb25zdCBlID0gbmV3IEVycm9yKFwiQ2FuJ3QgY3JlYXRlIERPTSBlbGVtZW50cyBpbnNpZGUgYSB3ZWIgd29ya2VyLlwiKTtcclxuICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICBjb25zb2xlLmVycm9yKGUuc3RhY2spO1xyXG4gICAgdGhyb3cgZTtcclxuICB9XHJcbiAgY29uc3Qgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnTmFtZSk7XHJcbiAgaWYgKGF0dHJzKSB7XHJcbiAgICBzZXRBdHRyaWJ1dGUobm9kZSwgYXR0cnMpO1xyXG4gIH1cclxuICBpZiAocmVmTm9kZSkge1xyXG4gICAgcGxhY2Uobm9kZSwgcmVmTm9kZSwgcG9zaXRpb24pO1xyXG4gIH1cclxuICByZXR1cm4gbm9kZTtcclxufVxyXG4vKipcclxuICogQ3JlYXRlcyBhIG5vZGUgb3V0IG9mIHRoZSBnaXZlbiBIVE1MIHN0cmluZy5cclxuICogQHBhcmFtIGh0bWxUZXh0IFN0cmluZy4gRS5nLiBcIjxkaXY+SGVsbG88L2Rpdj5cIi5cclxuICogQHJldHVybnMgQSBjcmVhdGVkIEhUTUwgZWxlbWVudC5cclxuICovXHJcbmZ1bmN0aW9uIHRvRG9tKGh0bWxUZXh0KSB7XHJcbiAgcmV0dXJuIGh0bWxUZXh0ICYmIGNyZWF0ZShcImRpdlwiLCB7IGlubmVySFRNTDogaHRtbFRleHQgfSkuY2hpbGRyZW5bMF07XHJcbn1cclxuLyoqXHJcbiAqIEFkZHMgYSBub2RlIHRvIHRoZSBjaGlsZCBub2RlcyBvZiB0aGUgcmVmZXJlbmNlIG5vZGUgYXQgdGhlIHNwZWNpZmljIHBvc2l0aW9uLlxyXG4gKiBAcGFyYW0gbm9kZSBBIEhUTUwgbm9kZS5cclxuICogQHBhcmFtIHJlZk5vZGUgQSByZWZlcmVuY2Ugbm9kZS5cclxuICogQHBhcmFtIHBvc2l0aW9uICBBIHBvc2l0aW9uIG9mIHRoZSBub2RlIHJlbGF0aXZlIHRvIHRoZSByZWZlcmVuY2Ugbm9kZS4gRGVmYXVsdCBpcyBcImxhc3RcIi5cclxuICogQHJldHVybnMgVGhlIHBsYWNlZCBub2RlLlxyXG4gKi9cclxuZnVuY3Rpb24gcGxhY2Uobm9kZSwgcmVmTm9kZSwgcG9zaXRpb24pIHtcclxuICBpZiAodHlwZW9mIHBvc2l0aW9uID09PSBcIm51bWJlclwiKSB7XHJcbiAgICAvLyBpbmxpbmUnZCB0eXBlIGNoZWNrXHJcbiAgICBjb25zdCBjbiA9IHJlZk5vZGUuY2hpbGROb2RlcztcclxuICAgIGlmICghY24ubGVuZ3RoIHx8IGNuLmxlbmd0aCA8PSBwb3NpdGlvbikge1xyXG4gICAgICByZWZOb2RlLmFwcGVuZENoaWxkKG5vZGUpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIF9pbnNlcnRCZWZvcmUobm9kZSwgY25bcG9zaXRpb24gPCAwID8gMCA6IHBvc2l0aW9uXSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGVsc2Uge1xyXG4gICAgc3dpdGNoIChwb3NpdGlvbikge1xyXG4gICAgICBjYXNlIFwiYmVmb3JlXCI6XHJcbiAgICAgICAgX2luc2VydEJlZm9yZShub2RlLCByZWZOb2RlKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcImFmdGVyXCI6XHJcbiAgICAgICAgX2luc2VydEFmdGVyKG5vZGUsIHJlZk5vZGUpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwicmVwbGFjZVwiOlxyXG4gICAgICAgIHJlZk5vZGUucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQobm9kZSwgcmVmTm9kZSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJmaXJzdFwiOlxyXG4gICAgICAgIGlmIChyZWZOb2RlLmZpcnN0Q2hpbGQpIHtcclxuICAgICAgICAgIF9pbnNlcnRCZWZvcmUobm9kZSwgcmVmTm9kZS5maXJzdENoaWxkKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgLy8gZWxzZSBmYWxsdGhyb3VnaC4uLlxyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIC8vIGFrYTogbGFzdFxyXG4gICAgICAgIHJlZk5vZGUuYXBwZW5kQ2hpbGQobm9kZSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBub2RlO1xyXG59XHJcbmZ1bmN0aW9uIF9pbnNlcnRBZnRlcihub2RlLCByZWZOb2RlKSB7XHJcbiAgY29uc3QgcGFyZW50ID0gcmVmTm9kZS5wYXJlbnROb2RlO1xyXG4gIGlmIChwYXJlbnQpIHtcclxuICAgIGlmIChwYXJlbnQubGFzdENoaWxkID09PSByZWZOb2RlKSB7XHJcbiAgICAgIHBhcmVudC5hcHBlbmRDaGlsZChub2RlKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKG5vZGUsIHJlZk5vZGUubmV4dFNpYmxpbmcpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5mdW5jdGlvbiBfaW5zZXJ0QmVmb3JlKG5vZGUsIHJlZk5vZGUpIHtcclxuICBjb25zdCBwYXJlbnQgPSByZWZOb2RlLnBhcmVudE5vZGU7XHJcbiAgaWYgKHBhcmVudCkge1xyXG4gICAgcGFyZW50Lmluc2VydEJlZm9yZShub2RlLCByZWZOb2RlKTtcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFNhZmVseSByZW1vdmVzIGFsbCBjaGlsZHJlbiBvZiB0aGUgbm9kZS5cclxuICogQHBhcmFtIG5vZGUgQSBub2RlLlxyXG4gKi9cclxuZnVuY3Rpb24gZW1wdHkobm9kZSkge1xyXG4gIGlmIChcImlubmVySFRNTFwiIGluIG5vZGUpIHtcclxuICAgIG5vZGUuaW5uZXJIVE1MID0gXCJcIjtcclxuICB9XHJcbiAgLy8gU1ZHL3N0cmljdCBlbGVtZW50cyBkb24ndCBzdXBwb3J0IGlubmVySFRNTFxyXG4gIHdoaWxlIChub2RlLmxhc3RDaGlsZCkge1xyXG4gICAgbm9kZS5yZW1vdmVDaGlsZChub2RlLmxhc3RDaGlsZCk7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBSZW1vdmVzIGEgbm9kZSBmcm9tIGl0cyBwYXJlbnQsIGNsb2JiZXJpbmcgaXQgYW5kIGFsbCBvZiBpdHMgY2hpbGRyZW4uXHJcbiAqIEBwYXJhbSBub2RlIEEgbm9kZS5cclxuICovXHJcbmZ1bmN0aW9uIGRlc3Ryb3kobm9kZSkge1xyXG4gIGlmICghbm9kZSkge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICBpZiAobm9kZS5maXJzdENoaWxkKSB7XHJcbiAgICBlbXB0eShub2RlKTtcclxuICB9XHJcbiAgaWYgKG5vZGUucGFyZW50Tm9kZSkge1xyXG4gICAgbm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG5vZGUpO1xyXG4gIH1cclxufVxyXG4vKipcclxuICogUXVlcmllcyBmb3IgYW4gYXJyYXkgb2YgZWxlbWVudHMuXHJcbiAqIEBwYXJhbSBzZWxlY3RvciAgICAgICAgU3RyaW5nLiBTdXBwb3J0ZWQgdmFsdWVzOiBcIi5DbGFzc1wiIHwgXCJOb2RlTmFtZVwiIHwgXCIuQ2xhc3NBLkNsYXNzQlwiLiBUaGUgZG90IHJlcHJlc2VudHMgYSBjbGFzcywgb3RoZXJ3aXNlIGl0J3MgYSBub2RlTmFtZS5cclxuICogQHBhcmFtIHNvdXJjZU5vZGUgICAgICBPcHRpb25hbC4gSWYgbWlzc2luZywgZG9jdW1lbnQgYm9keSB3aWxsIGJlIHVzZWQuXHJcbiAqXHJcbiAqIEByZXR1cm5zIFtdIG9mIGZvdW5kIGVsZW1lbnRzLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiAxLiBxdWVyeShcIi5saXN0XCIpLlxyXG4gKlxyXG4gKiAyLiBxdWVyeShcIi5saXN0LmluZGV4ZWRMaXN0XCIpXHJcbiAqXHJcbiAqIDMuIHF1ZXJ5KFwiZGl2Lmxpc3RcIik7XHJcbiAqXHJcbiAqIDQuIHF1ZXJ5KFwiZGl2XCIpO1xyXG4gKi9cclxuZnVuY3Rpb24gcXVlcnkoc2VsZWN0b3IsIHNvdXJjZU5vZGUpIHtcclxuICBjb25zdCBmb3VuZEVsZW1lbnRzID0gW107XHJcbiAgY29uc3QgY2xhc3NlcyA9IHNlbGVjdG9yLnNwbGl0KFwiLlwiKS5maWx0ZXIoKGMpID0+ICEhYyk7XHJcbiAgY29uc3Qgbm9kZU5hbWUgPSBzZWxlY3Rvci5pbmRleE9mKFwiLlwiKSA9PT0gLTEgfHwgc2VsZWN0b3IuaW5kZXhPZihcIi5cIikgPiAwID8gY2xhc3Nlcy5zaGlmdCgpLnRvTG93ZXJDYXNlKCkgOiBudWxsO1xyXG4gIGlmICghbm9kZU5hbWUgJiYgIWNsYXNzZXMubGVuZ3RoKSB7XHJcbiAgICByZXR1cm4gZm91bmRFbGVtZW50cztcclxuICB9XHJcbiAgdHJhdmVyc2VDaGlsZHJlbihzb3VyY2VOb2RlIHx8IGRvY3VtZW50LmJvZHksIChub2RlKSA9PiB7XHJcbiAgICBjb25zdCBoYXNDbGFzc2VzID0gIWNsYXNzZXMubGVuZ3RoIHx8IGNsYXNzZXMuZXZlcnkoKGMpID0+IGNvbnRhaW5zQ2xhc3Mobm9kZSwgYykpO1xyXG4gICAgY29uc3QgaGFzTm9kZU5hbWUgPSAhbm9kZU5hbWUgfHwgbm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBub2RlTmFtZTtcclxuICAgIGlmIChoYXNDbGFzc2VzICYmIGhhc05vZGVOYW1lKSB7XHJcbiAgICAgIGZvdW5kRWxlbWVudHMucHVzaChub2RlKTtcclxuICAgIH1cclxuICB9KTtcclxuICByZXR1cm4gZm91bmRFbGVtZW50cztcclxufVxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8vXHJcbi8vIFZpc2liaWxpdHlcclxuLy9cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vKipcclxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBET00gZWxlbWVudCBjb250YWlucyBcImVzcmlHRUhpZGRlblwiIHRhZy5cclxuICovXHJcbmZ1bmN0aW9uIGlzSGlkZGVuJDEoZWxlbWVudCkge1xyXG4gIHJldHVybiBlbGVtZW50ICYmIGNvbnRhaW5zQ2xhc3MoZWxlbWVudCwgXCJlc3JpR0VIaWRkZW5cIik7XHJcbn1cclxuLyoqXHJcbiAqIEhpZGVzIERPTSBlbGVtZW50cyBieSBhZGRpbmcgXCJlc3JpR0VIaWRkZW5cIiB0YWcgdG8gdGhlaXIgY2xhc3MuXHJcbiAqIEByZXR1cm5zIGVsZW1lbnRzXHJcbiAqL1xyXG5mdW5jdGlvbiBoaWRlKGVsZW1lbnRzKSB7XHJcbiAgcmV0dXJuIGFkZFRhZyhlbGVtZW50cywgXCJlc3JpR0VIaWRkZW5cIik7XHJcbn1cclxuLyoqXHJcbiAqIFNob3dzIERPTSBlbGVtZW50cyBieSByZW1vdmluZyBcImVzcmlHRUhpZGRlblwiIHRhZyBmcm9tIHRoZWlyIGNsYXNzLlxyXG4gKiBAcmV0dXJucyBlbGVtZW50c1xyXG4gKi9cclxuZnVuY3Rpb24gc2hvdyhlbGVtZW50cykge1xyXG4gIHJldHVybiByZW1vdmVUYWcoZWxlbWVudHMsIFwiZXNyaUdFSGlkZGVuXCIpO1xyXG59XHJcbi8qKlxyXG4gKiBTaG93cy9oaWRlcyBET00gZWxlbWVudHMgYnkgYWRkaW5nL3JlbW92aW5nIFwiZXNyaUdFSGlkZGVuXCIgdGFnIGZyb20gdGhlaXIgY2xhc3MuXHJcbiAqIEBwYXJhbSB2aXNpYmxlOiBCb29sZWFuICAgdHJ1ZSAtIHNob3csIGZhbHNlIC0gaGlkZVxyXG4gKiBAcmV0dXJucyBlbGVtZW50c1xyXG4gKi9cclxuZnVuY3Rpb24gZGlzcGxheShlbGVtZW50cywgdmlzaWJsZSkge1xyXG4gIGlmICh2aXNpYmxlKSB7XHJcbiAgICByZXR1cm4gc2hvdyhlbGVtZW50cyk7XHJcbiAgfVxyXG4gIHJldHVybiBoaWRlKGVsZW1lbnRzKTtcclxufVxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8vXHJcbi8vIFRhZ3NcclxuLy9cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vKipcclxuICogQWRkcyB0aGUgZ2l2ZW4gdGFnIHRvIHRoZSBjbGFzcyBvZiBET00gZWxlbWVudHMuXHJcbiAqIEBwYXJhbSBlbGVtZW50cyBBIHNpbmdsZSBET00gZWxlbWVudCBvciBhbiBhcnJheSBvZiBET00gZWxlbWVudHMuXHJcbiAqIEBwYXJhbSB0YWcgQSB0YWcgdG8gYWRkLlxyXG4gKiBAcmV0dXJucyBlbGVtZW50cy5cclxuICovXHJcbmZ1bmN0aW9uIGFkZFRhZyhlbGVtZW50cywgdGFnKSB7XHJcbiAgcmV0dXJuIGFwcGx5Q2FsbGJhY2soZWxlbWVudHMsIChlbGVtZW50KSA9PiB7XHJcbiAgICBhZGRDbGFzcyhlbGVtZW50LCB0YWcpO1xyXG4gIH0pO1xyXG59XHJcbi8qKlxyXG4gKiBSZW1vdmVzIHRoZSBnaXZlbiB0YWcgZnJvbSB0aGUgY2xhc3Mgb2YgRE9NIGVsZW1lbnRzLlxyXG4gKiBAcGFyYW0gZWxlbWVudHMgQSBzaW5nbGUgRE9NIGVsZW1lbnQgb3IgYW4gYXJyYXkgb2YgRE9NIGVsZW1lbnRzLlxyXG4gKiBAcGFyYW0gdGFnIEEgdGFnIHRvIHJlbW92ZS5cclxuICogQHJldHVybnMgZWxlbWVudHMuXHJcbiAqL1xyXG5mdW5jdGlvbiByZW1vdmVUYWcoZWxlbWVudHMsIHRhZykge1xyXG4gIHJldHVybiBhcHBseUNhbGxiYWNrKGVsZW1lbnRzLCAoZWxlbWVudCkgPT4ge1xyXG4gICAgZWxlbWVudCAmJiByZW1vdmVDbGFzcyhlbGVtZW50LCB0YWcpO1xyXG4gIH0pO1xyXG59XHJcbi8qKlxyXG4gKiBBcHBsaWVzIGEgY2FsbGJhY2sgdG8gdGhlIGdpdmVuIERPTSBlbGVtZW50cy5cclxuICogQHBhcmFtIGVsZW1lbnRzIEEgc2luZ2xlIERPTSBlbGVtZW50IG9yIGFuIGFycmF5IG9mIERPTSBlbGVtZW50cyB0byBhcHBseSB0aGUgY2FsbGJhY2suXHJcbiAqIEBwYXJhbSBjYWxsYmFjayBBIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCBmb3IgZXZlcnkgZWxlbWVudC5cclxuICogQHBhcmFtIHNjb3BlIEFuIG9wdGlvbmFsIHNjb3BlIHRvIGV4ZWN1dGUgdGhlIGNhbGxiYWNrIG9uLlxyXG4gKiBAcmV0dXJucyBlbGVtZW50cy5cclxuICovXHJcbmZ1bmN0aW9uIGFwcGx5Q2FsbGJhY2soZWxlbWVudHMsIGNhbGxiYWNrKSB7XHJcbiAgaWYgKEFycmF5LmlzQXJyYXkoZWxlbWVudHMpKSB7XHJcbiAgICBlbGVtZW50cy5mb3JFYWNoKGNhbGxiYWNrKTtcclxuICB9XHJcbiAgZWxzZSB7XHJcbiAgICBjYWxsYmFjayhlbGVtZW50cyk7XHJcbiAgfVxyXG4gIHJldHVybiBlbGVtZW50cztcclxufVxyXG4vKipcclxuICogQ2hlY2tzIGlmIGEgbm9kZSBpcyBhIGNoaWxkIG9mIGFub3RoZXIgbm9kZS5cclxuICogQHBhcmFtIG5vZGUgQSBub2RlIHRvIGNoZWNrLlxyXG4gKiBAcGFyYW0gcGFyZW50IEFub3RoZXIgbm9kZSB0byBjaGVjayBpdCBhcyBhIHBhcmVudCBvZiB0aGUgZ2l2ZW4gbm9kZS5cclxuICogQHJldHVybiBUcnVlIGlmIHRoZSBub2RlIGlzIGEgY2hpbGQgb2YgYW5vdGhlciBub2RlIGluIHRoZSBjaGFpbiBvZiBpdHMgcGFyZW50cy5cclxuICovXHJcbmZ1bmN0aW9uIGlzQ2hpbGRPZihub2RlLCBwYXJlbnQsIGNoZWNrRnVuYykge1xyXG4gIGxldCBpc0NoaWxkID0gZmFsc2U7XHJcbiAgLy8gcmVjdXJzaXZlIGZ1bmN0aW9uXHJcbiAgY29uc3QgY2hlY2tQYXJlbnQgPSAobm9kZSkgPT4ge1xyXG4gICAgaWYgKGNoZWNrRnVuYyAmJiAhY2hlY2tGdW5jKG5vZGUpKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmIChub2RlLnBhcmVudE5vZGUgPT09IHBhcmVudCkge1xyXG4gICAgICBpc0NoaWxkID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBub2RlLnBhcmVudE5vZGUgJiYgY2hlY2tQYXJlbnQobm9kZS5wYXJlbnROb2RlKTtcclxuICAgIH1cclxuICB9O1xyXG4gIG5vZGUgJiYgY2hlY2tQYXJlbnQobm9kZSk7XHJcbiAgcmV0dXJuIGlzQ2hpbGQ7XHJcbn1cclxuLyoqXHJcbiAqIENoZWNrcyBpZiBhIG5vZGUgaXMgcGFydCBvZiB0aGUgRE9NIHRyZWUgYXR0YWNoZWQgdG8gdGhlIGRvY3VtZW50IGJvZHkuXHJcbiAqIFRPRE86IG5vdCBzdXJlIGlmIHdlIG5lZWQgdG8gY2hlY2sgdmlzaWJpbGl0eSBhbmQgb3BhY2l0eSBoZXJlXHJcbiAqIEEgYmV0dGVyIHdheSB0byBkbyBpdDpcclxuICogdmFyIHMgPSBnZXRTdHlsZUNvbXB1dGVkU3R5bGUobm9kZSk7XHJcbiAqIHMuZGlzcGxheSAhPT0gXCJub25lXCI7XHJcbiAqIHMudmlzaWJpbGl0eSAhPT0gXCJoaWRkZW5cIjtcclxuICogcy5vcGFjaXR5ICE9PSBcIjBcIjtcclxuICovXHJcbmZ1bmN0aW9uIGlzTm9kZUluTGF5b3V0KG5vZGUpIHtcclxuICByZXR1cm4gaXNDaGlsZE9mKG5vZGUsIGRvY3VtZW50LmJvZHksIChub2RlKSA9PiBfaW5MYXlvdXQobm9kZSkpO1xyXG59XHJcbmZ1bmN0aW9uIF9pbkxheW91dChub2RlKSB7XHJcbiAgcmV0dXJuICghaXNIaWRkZW4kMShub2RlKSAmJlxyXG4gICAgZ2V0U3R5bGUobm9kZSwgXCJkaXNwbGF5XCIpICE9PSBcIm5vbmVcIiAmJlxyXG4gICAgIWNvbnRhaW5zQ2xhc3Mobm9kZSwgXCJkaWppdEhpZGRlblwiKSAvKiBmb3IgdGFiIGNvbnRhaW5lciAqLyk7XHJcbn1cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vL1xyXG4vLyBUcmF2ZXJzZSBjaGlsZHJlblxyXG4vL1xyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8qKlxyXG4gKiBHb2VzIHRocm91Z2ggYWxsIGRlc2NlbmRhbnRzIG9mIGEgbm9kZSBhbmQgYXBwbGllcyBhIGZ1bmN0aW9uIGZvciBldmVyeSBub2RlLlxyXG4gKiBAcGFyYW0gbm9kZSBBIG5vZGUgdG8gc3RhcnQuXHJcbiAqIEBwYXJhbSBwcm9jZXNzb3IgQSBmdW5jdGlvbiB0byBiZSBhcHBsaWVkIHRvIGV2ZXJ5IGNoaWxkIG5vZGUuXHJcbiAqIElmIGl0IHJldHVybnMgdHJ1ZSwgdGhlIHByb2Nlc3Npbmcgc3RvcHMuXHJcbiAqL1xyXG5mdW5jdGlvbiB0cmF2ZXJzZUNoaWxkcmVuKG5vZGUsIHByb2Nlc3NGdW5jKSB7XHJcbiAgaWYgKCFub2RlIHx8ICFub2RlLmNoaWxkcmVuKSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZS5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgY29uc3QgY2hpbGQgPSBub2RlLmNoaWxkcmVuW2ldO1xyXG4gICAgaWYgKHByb2Nlc3NGdW5jKGNoaWxkLCBub2RlKSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0cmF2ZXJzZUNoaWxkcmVuKGNoaWxkLCBwcm9jZXNzRnVuYyk7XHJcbiAgfVxyXG59XHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuLy9cclxuLy8gU2Nyb2xsXHJcbi8vXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuLyoqXHJcbiAqIEByZXR1cm5zIEN1cnJlbnQgc2Nyb2xsIG9mZnNldHMgb2YgdGhlIGRvY3VtZW50IGJvZHkuXHJcbiAqL1xyXG5mdW5jdGlvbiBkb2NTY3JvbGwoKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHg6IHdpbmRvdy5wYWdlWE9mZnNldCB8fCAwLFxyXG4gICAgeTogd2luZG93LnBhZ2VZT2Zmc2V0IHx8IDBcclxuICB9O1xyXG59XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5mdW5jdGlvbiBlJHYoZSl7cmV0dXJuIGUmJihcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLm9ufHxcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLmFkZEV2ZW50TGlzdGVuZXIpfWZ1bmN0aW9uIHIkcihyLHQsbil7aWYoIWUkdihyKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwidGFyZ2V0IGlzIG5vdCBhIEV2ZW50ZWQgb3IgRXZlbnRUYXJnZXQgb2JqZWN0XCIpO2lmKFwib25cImluIHIpcmV0dXJuIHIub24odCxuKTtpZihBcnJheS5pc0FycmF5KHQpKXtjb25zdCBlPXQuc2xpY2UoKTtmb3IoY29uc3QgdCBvZiBlKXIuYWRkRXZlbnRMaXN0ZW5lcih0LG4pO3JldHVybiB7cmVtb3ZlKCl7Zm9yKGNvbnN0IHQgb2YgZSlyLnJlbW92ZUV2ZW50TGlzdGVuZXIodCxuKTt9fX1yZXR1cm4gci5hZGRFdmVudExpc3RlbmVyKHQsbikse3JlbW92ZSgpe3IucmVtb3ZlRXZlbnRMaXN0ZW5lcih0LG4pO319fWZ1bmN0aW9uIHQkRSh0LG4sbyl7aWYoIWUkdih0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwidGFyZ2V0IGlzIG5vdCBhIEV2ZW50ZWQgb3IgRXZlbnRUYXJnZXQgb2JqZWN0XCIpO2lmKFwib25jZVwiaW4gdClyZXR1cm4gdC5vbmNlKG4sbyk7Y29uc3QgaT1yJHIodCxuLChlPT57aS5yZW1vdmUoKSxvLmNhbGwodCxlKTt9KSk7cmV0dXJuIHtyZW1vdmUoKXtpLnJlbW92ZSgpO319fVxuXG4vLyBnZW9lbnJpY2htZW50XHJcbmxldCBfZGV2aWNlSW5mbztcclxuZnVuY3Rpb24gX2dldERldmljZSgpIHtcclxuICBpZiAoX2RldmljZUluZm8pIHtcclxuICAgIHJldHVybiBfZGV2aWNlSW5mbztcclxuICB9XHJcbiAgY29uc3QgZGV2aWNlID0ge1xyXG4gICAgaW9zOiBmYWxzZSxcclxuICAgIGFuZHJvaWQ6IGZhbHNlLFxyXG4gICAgYW5kcm9pZENocm9tZTogZmFsc2UsXHJcbiAgICBkZXNrdG9wOiBmYWxzZSxcclxuICAgIGlwaG9uZTogZmFsc2UsXHJcbiAgICBpcG9kOiBmYWxzZSxcclxuICAgIGlwYWQ6IGZhbHNlLFxyXG4gICAgZWRnZTogZmFsc2UsXHJcbiAgICBpZTogZmFsc2UsXHJcbiAgICBmaXJlZm94OiBmYWxzZSxcclxuICAgIHNhZmFyaTogZmFsc2UsXHJcbiAgICBtYWNvczogZmFsc2UsXHJcbiAgICB3aW5kb3dzOiBmYWxzZSxcclxuICAgIGVsZWN0cm9uOiBmYWxzZSxcclxuICAgIHBpeGVsUmF0aW86IDEsXHJcbiAgICBvczogbnVsbCxcclxuICAgIG9zVmVyc2lvbjogXCJcIixcclxuICAgIHdlYlZpZXc6IGZhbHNlLFxyXG4gICAgd29ya2VyOiBmYWxzZVxyXG4gIH07XHJcbiAgdHJ5IHtcclxuICAgIGlmIChoYXMoXCJ3b3JrZXJcIikgfHwgc2VsZi53aW5kb3cgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBkZXZpY2UuZGVza3RvcCA9IHRydWU7XHJcbiAgICAgIGRldmljZS53b3JrZXIgPSB0cnVlO1xyXG4gICAgICByZXR1cm4gKF9kZXZpY2VJbmZvID0gZGV2aWNlKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHdpbiA9IHdpbmRvdztcclxuICAgIGNvbnN0IHBsYXRmb3JtID0gd2luLm5hdmlnYXRvci5wbGF0Zm9ybTtcclxuICAgIGNvbnN0IHVhID0gd2luLm5hdmlnYXRvci51c2VyQWdlbnQ7XHJcbiAgICBjb25zdCBzY3JlZW5XaWR0aCA9IHdpbi5zY3JlZW4ud2lkdGg7XHJcbiAgICBjb25zdCBzY3JlZW5IZWlnaHQgPSB3aW4uc2NyZWVuLmhlaWdodDtcclxuICAgIGNvbnN0IGFuZHJvaWQgPSB1YS5tYXRjaCgvKEFuZHJvaWQpOz9bXFxzXFwvXSsoW1xcZC5dKyk/Lyk7XHJcbiAgICBsZXQgaXBhZCA9IHVhLm1hdGNoKC8oaVBhZCkuKk9TXFxzKFtcXGRfXSspLyk7IC8vIFtudW1iZXIsIG51bWJlciwgc3RyaW5nXTtcclxuICAgIGNvbnN0IGlwb2QgPSB1YS5tYXRjaCgvKGlQb2QpKC4qT1NcXHMoW1xcZF9dKykpPy8pO1xyXG4gICAgY29uc3QgaXBob25lID0gIWlwYWQgJiYgdWEubWF0Y2goLyhpUGhvbmVcXHNPU3xpT1MpXFxzKFtcXGRfXSspLyk7XHJcbiAgICBjb25zdCBpZSA9IHVhLmluZGV4T2YoXCJNU0lFIFwiKSA+PSAwIHx8IHVhLmluZGV4T2YoXCJUcmlkZW50L1wiKSA+PSAwO1xyXG4gICAgY29uc3QgZWRnZSA9IHVhLmluZGV4T2YoXCJFZGdlL1wiKSA+PSAwO1xyXG4gICAgY29uc3QgZmlyZWZveCA9IHVhLmluZGV4T2YoXCJHZWNrby9cIikgPj0gMCAmJiB1YS5pbmRleE9mKFwiRmlyZWZveC9cIikgPj0gMDtcclxuICAgIGNvbnN0IHdpbmRvd3MgPSBwbGF0Zm9ybSA9PT0gXCJXaW4zMlwiO1xyXG4gICAgY29uc3QgZWxlY3Ryb24gPSB1YS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJlbGVjdHJvblwiKSA+PSAwO1xyXG4gICAgbGV0IG1hY29zID0gcGxhdGZvcm0gPT09IFwiTWFjSW50ZWxcIjtcclxuICAgIGRldmljZS5zYWZhcmkgPSBtYWNvcyAmJiAhYW5kcm9pZCAmJiAhL2Nocm9tZS9pLnRlc3QodWEpICYmIC9zYWZhcmkvaS50ZXN0KHVhKTtcclxuICAgIC8vIGlQYWRPcyAxMyBmaXhcclxuICAgIGNvbnN0IGlQYWRTY3JlZW5zID0gW1xyXG4gICAgICBcIjEwMjR4MTM2NlwiLFxyXG4gICAgICBcIjEzNjZ4MTAyNFwiLFxyXG4gICAgICBcIjgzNHgxMTk0XCIsXHJcbiAgICAgIFwiMTE5NHg4MzRcIixcclxuICAgICAgXCI4MzR4MTExMlwiLFxyXG4gICAgICBcIjExMTJ4ODM0XCIsXHJcbiAgICAgIFwiNzY4eDEwMjRcIixcclxuICAgICAgXCIxMDI0eDc2OFwiXHJcbiAgICBdO1xyXG4gICAgaWYgKCFpcGFkICYmIG1hY29zICYmIGhhc1RvdWNoKCkgJiYgaVBhZFNjcmVlbnMuaW5kZXhPZihzY3JlZW5XaWR0aCArIFwieFwiICsgc2NyZWVuSGVpZ2h0KSA+PSAwKSB7XHJcbiAgICAgIGlwYWQgPSB1YS5tYXRjaCgvKFZlcnNpb24pXFwvKFtcXGQuXSspLyk7IC8vIFtudW1iZXIsIG51bWJlciwgc3RyaW5nXTtcclxuICAgICAgaWYgKCFpcGFkKSB7XHJcbiAgICAgICAgaXBhZCA9IFswLCAxLCBcIjEzXzBfMFwiXTtcclxuICAgICAgfVxyXG4gICAgICBtYWNvcyA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgZGV2aWNlLmllID0gaWU7XHJcbiAgICBkZXZpY2UuZWRnZSA9IGVkZ2U7XHJcbiAgICBkZXZpY2UuZmlyZWZveCA9IGZpcmVmb3g7XHJcbiAgICAvLyBBbmRyb2lkXHJcbiAgICBpZiAoYW5kcm9pZCAmJiAhd2luZG93cykge1xyXG4gICAgICBkZXZpY2Uub3MgPSBcImFuZHJvaWRcIjtcclxuICAgICAgZGV2aWNlLm9zVmVyc2lvbiA9IGFuZHJvaWRbMl07XHJcbiAgICAgIGRldmljZS5hbmRyb2lkID0gdHJ1ZTtcclxuICAgICAgZGV2aWNlLmFuZHJvaWRDaHJvbWUgPSB1YS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJjaHJvbWVcIikgPj0gMDtcclxuICAgIH1cclxuICAgIGlmIChpcGFkIHx8IGlwaG9uZSB8fCBpcG9kKSB7XHJcbiAgICAgIGRldmljZS5vcyA9IFwiaW9zXCI7XHJcbiAgICAgIGRldmljZS5pb3MgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgLy8gaU9TXHJcbiAgICBpZiAoaXBob25lICYmICFpcG9kKSB7XHJcbiAgICAgIGRldmljZS5vc1ZlcnNpb24gPSBpcGhvbmVbMl0ucmVwbGFjZSgvXy9nLCBcIi5cIik7XHJcbiAgICAgIGRldmljZS5pcGhvbmUgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgaWYgKGlwYWQpIHtcclxuICAgICAgZGV2aWNlLm9zVmVyc2lvbiA9IGlwYWRbMl0ucmVwbGFjZSgvXy9nLCBcIi5cIik7XHJcbiAgICAgIGRldmljZS5pcGFkID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIGlmIChpcG9kKSB7XHJcbiAgICAgIGRldmljZS5vc1ZlcnNpb24gPSBpcG9kWzNdID8gaXBvZFszXS5yZXBsYWNlKC9fL2csIFwiLlwiKSA6IG51bGw7XHJcbiAgICAgIGRldmljZS5pcG9kID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIC8vIGlPUyA4KyBjaGFuZ2VkIFVBXHJcbiAgICBpZiAoZGV2aWNlLmlvcyAmJiBkZXZpY2Uub3NWZXJzaW9uICYmIHVhLmluZGV4T2YoXCJWZXJzaW9uL1wiKSA+PSAwKSB7XHJcbiAgICAgIGlmIChkZXZpY2Uub3NWZXJzaW9uLnNwbGl0KFwiLlwiKVswXSA9PT0gXCIxMFwiKSB7XHJcbiAgICAgICAgZGV2aWNlLm9zVmVyc2lvbiA9IHVhLnRvTG93ZXJDYXNlKCkuc3BsaXQoXCJ2ZXJzaW9uL1wiKVsxXS5zcGxpdChcIiBcIilbMF07XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIFdlYnZpZXdcclxuICAgIGRldmljZS53ZWJWaWV3ID1cclxuICAgICAgISEoKGlwaG9uZSB8fCBpcGFkIHx8IGlwb2QpICYmICh1YS5tYXRjaCgvLipBcHBsZVdlYktpdCg/IS4qU2FmYXJpKS9pKSB8fCB3aW4ubmF2aWdhdG9yLnN0YW5kYWxvbmUpKSB8fFxyXG4gICAgICAgICh3aW4ubWF0Y2hNZWRpYSAmJiB3aW4ubWF0Y2hNZWRpYShcIihkaXNwbGF5LW1vZGU6IHN0YW5kYWxvbmUpXCIpLm1hdGNoZXMpO1xyXG4gICAgLy8gRGVza3RvcFxyXG4gICAgZGV2aWNlLmRlc2t0b3AgPSAhKGRldmljZS5pb3MgfHwgZGV2aWNlLmFuZHJvaWQpIHx8IGVsZWN0cm9uO1xyXG4gICAgaWYgKGRldmljZS5kZXNrdG9wKSB7XHJcbiAgICAgIGRldmljZS5lbGVjdHJvbiA9IGVsZWN0cm9uO1xyXG4gICAgICBkZXZpY2UubWFjb3MgPSBtYWNvcztcclxuICAgICAgZGV2aWNlLndpbmRvd3MgPSB3aW5kb3dzO1xyXG4gICAgICBpZiAoZGV2aWNlLm1hY29zKSB7XHJcbiAgICAgICAgZGV2aWNlLm9zID0gXCJtYWNvc1wiO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKGRldmljZS53aW5kb3dzKSB7XHJcbiAgICAgICAgZGV2aWNlLm9zID0gXCJ3aW5kb3dzXCI7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAoL0xpbnV4Ly50ZXN0KHBsYXRmb3JtKSkge1xyXG4gICAgICAgIGRldmljZS5vcyA9IFwibGludXhcIjtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gUGl4ZWwgUmF0aW9cclxuICAgIGRldmljZS5waXhlbFJhdGlvID0gd2luLmRldmljZVBpeGVsUmF0aW8gfHwgMTtcclxuICB9XHJcbiAgY2F0Y2ggKGUpIHtcclxuICAgIGRldmljZS5lcnJvciA9IFN0cmluZyhlKTtcclxuICB9XHJcbiAgcmV0dXJuIChfZGV2aWNlSW5mbyA9IGRldmljZSk7XHJcbn1cclxuLyoqXHJcbiAqIFRlc3RzIHRoZSBkZXZpY2UgdHlwZS5cclxuICogQHJldHVybnMgVHJ1ZSBpZiB0aGlzIGlzIGEgbW9iaWxlIGRldmljZS5cclxuICovXHJcbmZ1bmN0aW9uIGlzTW9iaWxlRGV2aWNlKCkge1xyXG4gIHJldHVybiAhX2dldERldmljZSgpLmRlc2t0b3A7XHJcbn1cclxuLyoqXHJcbiAqIFRlc3RzIHRvdWNoIHN1cHBvcnQgb24gdGhlIGRldmljZS5cclxuICogQHJldHVybnMgVHJ1ZSBpZiB0aGlzIGlzIGEgZGVza3RvcCBkZXZpY2Ugd2l0aCB0b3VjaCBzY3JlZW4uXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1BDV2l0aFRvdWNoU2NyZWVuKCkge1xyXG4gIHJldHVybiBfZ2V0RGV2aWNlKCkuZGVza3RvcCAmJiBoYXNUb3VjaCgpO1xyXG59XHJcbi8qKlxyXG4gKiBUZXN0cyB0b3VjaCBzdXBwb3J0IG9uIHRoZSBkZXZpY2UuXHJcbiAqIEByZXR1cm5zIFRydWUgaWYgdGhpcyBpcyBhIG1vYmlsZSBkZXZpY2Ugb3IgYSBkZXNrdG9wIGRldmljZSB3aXRoIHRvdWNoIHNjcmVlbi5cclxuICovXHJcbmZ1bmN0aW9uIGhhc1RvdWNoKCkge1xyXG4gIC8vIHRha2VuIGZyb20gZG9qby9oYXMuanNcclxuICByZXR1cm4gKFwib250b3VjaHN0YXJ0XCIgaW4gZG9jdW1lbnQgfHxcclxuICAgIChcIm9ucG9pbnRlcmRvd25cIiBpbiBkb2N1bWVudCAmJiBuYXZpZ2F0b3IubWF4VG91Y2hQb2ludHMgPiAwKSB8fFxyXG4gICAgbmF2aWdhdG9yLm1zTWF4VG91Y2hQb2ludHMgPiAwKTtcclxufVxuXG4vLyBlc3JpNC5jb3JlXHJcbmZ1bmN0aW9uIG9uKHRhcmdldCwgdHlwZSwgbGlzdGVuZXIpIHtcclxuICBjb25zdCBzdXBwb3J0ID0gdG91Y2hTdXBwb3J0KHRhcmdldCwgdHlwZSwgbGlzdGVuZXIpO1xyXG4gIHJldHVybiByJHIodGFyZ2V0LCBzdXBwb3J0LnR5cGUsIHN1cHBvcnQubGlzdGVuZXIpO1xyXG59XHJcbmZ1bmN0aW9uIG9uY2UodGFyZ2V0LCB0eXBlLCBsaXN0ZW5lcikge1xyXG4gIGNvbnN0IGhhbmRsZSA9IG9uKHRhcmdldCwgdHlwZSwgKGV2ZW50KSA9PiB7XHJcbiAgICBoYW5kbGUucmVtb3ZlKCk7XHJcbiAgICBsaXN0ZW5lci5jYWxsKG51bGwsIGV2ZW50KTtcclxuICB9KTtcclxuICByZXR1cm4gaGFuZGxlO1xyXG59XHJcbmNvbnN0IF9wY1RvdWNoTWFwID0ge1xyXG4gIGNsaWNrOiBbXCJjbGlja1wiLCBcInRvdWNoZW5kXCJdLFxyXG4gIHByZXNzOiBbXCJtb3VzZWRvd25cIiwgXCJ0b3VjaHN0YXJ0XCJdLFxyXG4gIG1vdmU6IFtcIm1vdXNlbW92ZVwiLCBcInRvdWNobW92ZVwiXSxcclxuICByZWxlYXNlOiBbXCJtb3VzZXVwXCIsIFwidG91Y2hlbmRcIl0sXHJcbiAgb3ZlcjogW1wibW91c2VvdmVyXCIsIFwidG91Y2hzdGFydFwiXSxcclxuICBvdXQ6IFtcIm1vdXNlb3V0XCIsIFwidG91Y2hlbmRcIl0sXHJcbiAgZW50ZXI6IFtcIm1vdXNlZW50ZXJcIiwgXCJ0b3VjaHN0YXJ0XCJdLFxyXG4gIGxlYXZlOiBbXCJtb3VzZWxlYXZlXCIsIFwidG91Y2hlbmRcIl1cclxufTtcclxuY29uc3QgRVZFTlRTX01BUCA9ICgoKSA9PiB7XHJcbiAgY29uc3QgbWFwID0ge307XHJcbiAgY29uc3QgaW5kZXggPSBpc01vYmlsZURldmljZSgpID8gMSA6IDA7XHJcbiAgZm9yIChjb25zdCBrZXkgaW4gX3BjVG91Y2hNYXApIHtcclxuICAgIG1hcFtrZXldID0gX3BjVG91Y2hNYXBba2V5XVtpbmRleF07XHJcbiAgfVxyXG4gIHJldHVybiBtYXA7XHJcbn0pKCk7XHJcbi8qKlxyXG4gKiBUZXN0cyBhIHRhcmdldCBvYmplY3QgYW5kIGFuIGV2ZW50IHR5cGUgdG8gc3VwcG9ydCB0b3VjaCBldmVudHMgYW5kIHJldHVybnNcclxuICogYW4gdXBkYXRlZCBldmVudCB0eXBlIGFuZCBsaXN0ZW5lci5cclxuICogQHBhcmFtIHRhcmdldCBBIHRhcmdldCBvYmplY3QuXHJcbiAqIEBwYXJhbSB0eXBlIEFuIGV2ZW50IHR5cGUgb3IgYW4gYXJyYXkgb2YgZXZlbnQgdHlwZXMuXHJcbiAqIEdlbmVyaWMgZXZlbnQgdHlwZXMgYXJlIGF1dG8tcmVwbGFjZWQgd2l0aCBhY3R1YWwgZXZlbnQgdHlwZXMgZGVwZW5kaW5nIG9uIGRldmljZSB1c2VkLlxyXG4gKiBGb3IgZXhhbXBsZSwgYSBcImNsaWNrXCIgdHlwZSBpcyBhdXRvLXJlcGxhY2VkIHdpdGggXCJ0b3VjaGVuZFwiIGZvciBtb2JpbGUgZGV2aWNlcy5cclxuICogQHBhcmFtIGxpc3RlbmVyIEV2ZW50IGxpc3RlbmVyLlxyXG4gKiBAcGFyYW0gY29tcG9zZXIgQW4gb3B0aW9uYWwgZnVuY3Rpb24gY29tcG9zaW5nIGEgcmVzdWx0IGV2ZW50IHR5cGUgZm9yIGEgY29udmVydGVkXHJcbiAqIGdlbmVyaWMgZXZlbnQgdHlwZS5cclxuICogQHJldHVybnMgVGhlIHVwZGF0ZWQgZXZlbnQgdHlwZSBhbmQgbGlzdGVuZXIuIEluIHRoZSBjYXNlIHdoZW4gdGhlIHRhcmdldCBpcyBub3QgYSBET00gbm9kZVxyXG4gKiBvciBhIGdlbmVyaWMgZXZlbnQgdHlwZSBpcyBub3QgcGFzc2VkLCB0aGUgb3JpZ2luYWwgdHlwZSBhbmQgbGlzdGVuZXIgYXJlIHJldHVybmVkLlxyXG4gKi9cclxuZnVuY3Rpb24gdG91Y2hTdXBwb3J0KHRhcmdldCwgdHlwZSwgbGlzdGVuZXIsIGNvbXBvc2VyKSB7XHJcbiAgaWYgKHR5cGVvZiB0eXBlID09PSBcInN0cmluZ1wiICYmIHR5cGUuaW5kZXhPZihcIixcIikgIT09IC0xKSB7XHJcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRXZlbnQgbm90YXRpb24gbGlrZSAnY2xpY2ssIG1vdXNldXAnIGlzIG5vdCBzdXBwb3J0ZWQuXCIpO1xyXG4gIH1cclxuICBpZiAodGFyZ2V0ICYmIHR5cGVvZiB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lciA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICBjb25zdCBnZW5lcmljcyA9IFtdO1xyXG4gICAgY29uc3Qgb3RoZXIgPSBbXTtcclxuICAgIChBcnJheS5pc0FycmF5KHR5cGUpID8gdHlwZSA6IFt0eXBlXSkuZm9yRWFjaCgodCkgPT4ge1xyXG4gICAgICAoRVZFTlRTX01BUFt0XSA/IGdlbmVyaWNzIDogb3RoZXIpLnB1c2godCk7XHJcbiAgICB9KTtcclxuICAgIGNvbnN0IHR5cGVDYWNoZSA9IHt9O1xyXG4gICAgY29uc3QgaWdub3JlQ2FjaGUgPSB7fTtcclxuICAgIGNvbnN0IHBjV2l0aFRvdWNoID0gaXNQQ1dpdGhUb3VjaFNjcmVlbigpO1xyXG4gICAgLy8gQ29sbGVjdCBjb252ZXJ0ZWQgZ2VuZXJpYyB2YWx1ZXMgaW4gdGhlIGNhY2hlLlxyXG4gICAgaWYgKGdlbmVyaWNzLmxlbmd0aCkge1xyXG4gICAgICBnZW5lcmljcy5mb3JFYWNoKCh0KSA9PiB7XHJcbiAgICAgICAgY29uc3QgZXZlbnRzID0gcGNXaXRoVG91Y2ggPyBfcGNUb3VjaE1hcFt0XSA6IFtFVkVOVFNfTUFQW3RdXTtcclxuICAgICAgICBldmVudHMuZm9yRWFjaCgoZykgPT4ge1xyXG4gICAgICAgICAgaWYgKCF0eXBlQ2FjaGVbZ10pIHtcclxuICAgICAgICAgICAgdHlwZUNhY2hlW2ddID0gIWNvbXBvc2VyID8gZyA6IGNvbXBvc2VyKGcpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmIChwY1dpdGhUb3VjaCkge1xyXG4gICAgICAgICAgLy8gSWdub3JlIGNhY2hlIGNvbGxlY3RzIG1vdXNlIGV2ZW50cyB0byBiZSBpZ25vcmVkXHJcbiAgICAgICAgICAvLyBhZnRlciB0b3VjaCBldmVudC5cclxuICAgICAgICAgIGNvbnN0IG1vdXNlRXZlbnQgPSBldmVudHNbMF07XHJcbiAgICAgICAgICBjb25zdCB0b3VjaEV2ZW50ID0gZXZlbnRzWzFdO1xyXG4gICAgICAgICAgbGV0IHRvdWNoTWFwID0gaWdub3JlQ2FjaGVbbW91c2VFdmVudF07XHJcbiAgICAgICAgICBpZiAoIXRvdWNoTWFwKSB7XHJcbiAgICAgICAgICAgIHRvdWNoTWFwID0gaWdub3JlQ2FjaGVbbW91c2VFdmVudF0gPSB7fTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRvdWNoTWFwW3RvdWNoRXZlbnRdID0gMTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICAvLyBOb3cgY29sbGVjdCBvdGhlciB2YWx1ZXMgaW4gdGhlIGNhY2hlLlxyXG4gICAgICBvdGhlci5mb3JFYWNoKCh0KSA9PiB7XHJcbiAgICAgICAgaWYgKCF0eXBlQ2FjaGVbdF0pIHtcclxuICAgICAgICAgIHR5cGVDYWNoZVt0XSA9IHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIERvbid0IGlnbm9yZSBtb3VzZSBldmVudCBpZiBpdCBpcyBleHBsaWNpdGVseSBwYXNzZWQuXHJcbiAgICAgICAgaWYgKGlnbm9yZUNhY2hlW3RdKSB7XHJcbiAgICAgICAgICBkZWxldGUgaWdub3JlQ2FjaGVbdF07XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgLy8gRmluYWxseSB3ZSBjb2xsZWN0IGFsbCB0eXBlc1xyXG4gICAgICB0eXBlID0gW107XHJcbiAgICAgIGZvciAoY29uc3QgdCBpbiB0eXBlQ2FjaGUpIHtcclxuICAgICAgICB0eXBlLnB1c2godHlwZUNhY2hlW3RdKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGdlbmVyaWNzLmxlbmd0aCAmJiBwY1dpdGhUb3VjaCkge1xyXG4gICAgICBsZXQgaWdub3JlTW91c2VIYW5kbGU7XHJcbiAgICAgIGxldCBsYXN0VG91Y2g7XHJcbiAgICAgIGNvbnN0IF9yZW1vdmVNb3VzZUhhbmRsZSA9ICgpID0+IHtcclxuICAgICAgICBpZ25vcmVNb3VzZUhhbmRsZSAmJiBjbGVhclRpbWVvdXQoaWdub3JlTW91c2VIYW5kbGUpO1xyXG4gICAgICAgIGlnbm9yZU1vdXNlSGFuZGxlID0gbnVsbDtcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICB0eXBlLFxyXG4gICAgICAgIGxpc3RlbmVyOiAoZXZlbnQpID0+IHtcclxuICAgICAgICAgIGlmIChldmVudC50b3VjaGVzKSB7XHJcbiAgICAgICAgICAgIC8vIFdlIGNhbm5vdCB1c2UgZXZlbnQucHJldmVudERlZmF1bHQoKSB0byBpZ25vcmUgbW91c2UgZXZlbnQgd2hlbiB0b3VjaCBldmVudCBhcHBlYXJzLFxyXG4gICAgICAgICAgICAvLyBiZWNhdXNlIG1vdXNlIGV2ZW50IHdpbGwgYmUgbG9zdCBhbmQgb3RoZXIgbGlzdGVuZXJzIGxpc3RlbmluZyBmb3IgbW91c2UgZXZlbnQgd2lsbCBub3QgcmVjZWl2ZSBpdCFcclxuICAgICAgICAgICAgLy8gSW5zdGVhZCBvZiB0aGlzLCB3ZSBzZXR1cCBhbiBpZ25vcmUgbW91c2UgaGFuZGxlIGZvciA1MDAgbWlsbGlzZWNvbmRzXHJcbiAgICAgICAgICAgIC8vIChtb3VzZSBldmVudCBpcyBnZW5lcmF0ZWQgYWZ0ZXIgdG91Y2ggZXZlbnQgaW4gMzAwIG1pbGxpc2Vjb25kcykuXHJcbiAgICAgICAgICAgIF9yZW1vdmVNb3VzZUhhbmRsZSgpOyAvLyBSZW1vdmUgcHJldmlvdXMgdGltZW91dCAodG91Y2htb3ZlIGV2ZW50IHN1cHBvcnQhKVxyXG4gICAgICAgICAgICBpZ25vcmVNb3VzZUhhbmRsZSA9IHNldFRpbWVvdXQoX3JlbW92ZU1vdXNlSGFuZGxlLCA1MDApO1xyXG4gICAgICAgICAgICBsYXN0VG91Y2ggPSBldmVudC50eXBlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSBpZiAoaWdub3JlTW91c2VIYW5kbGUpIHtcclxuICAgICAgICAgICAgY29uc3QgdG91Y2hNYXAgPSBpZ25vcmVDYWNoZVtldmVudC50eXBlXTtcclxuICAgICAgICAgICAgaWYgKHRvdWNoTWFwICYmIHRvdWNoTWFwW2xhc3RUb3VjaF0pIHtcclxuICAgICAgICAgICAgICAvLyBJZ25vcmUgbW91c2UgZXZlbnQhXHJcbiAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBsaXN0ZW5lci5jYWxsKG51bGwsIGV2ZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiB7IHR5cGUsIGxpc3RlbmVyIH07XHJcbn1cblxuLy8gZ2VvZW5yaWNobWVudC51dGlsc1xyXG5jbGFzcyBBbmltYXRpb25JdGVtIHtcclxuICBzdGFydCh0YXJnZXRzLCBvbGROb2RlKSB7XHJcbiAgICB0aGlzLl9kZWZlcnJlZCA9IGNyZWF0ZURlZmVycmVkKCk7XHJcbiAgICB0aGlzLl9vbGROb2RlID0gb2xkTm9kZTtcclxuICAgIGlmICghdGFyZ2V0cy5sZW5ndGggfHwgIXRhcmdldHNbMF0ubm9kZSkge1xyXG4gICAgICB0aGlzLmZpbmlzaCgpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHRoaXMuX3RhcmdldHMgPSB0YXJnZXRzO1xyXG4gICAgICBvbmNlKHRhcmdldHNbMF0ubm9kZSwgXCJhbmltYXRpb25lbmRcIiwgKCkgPT4gdGhpcy5maW5pc2goKSk7XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGFyZ2V0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IHRhcmdldCA9IHRhcmdldHNbaV07XHJcbiAgICAgICAgYWRkQ2xhc3ModGFyZ2V0Lm5vZGUsIHRhcmdldC5jbGFzc2VzKTtcclxuICAgICAgICBhZGRDbGFzcyh0YXJnZXQubm9kZSwgXCJBbmltX0NvbW1vblwiKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuX2RlZmVycmVkLnByb21pc2U7XHJcbiAgfVxyXG4gIGZpbmlzaCgpIHtcclxuICAgIGlmICh0aGlzLl90YXJnZXRzKSB7XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fdGFyZ2V0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IHRhcmdldCA9IHRoaXMuX3RhcmdldHNbaV07XHJcbiAgICAgICAgaWYgKHRhcmdldC5ub2RlKSB7XHJcbiAgICAgICAgICByZW1vdmVDbGFzcyh0YXJnZXQubm9kZSwgdGFyZ2V0LmNsYXNzZXMpO1xyXG4gICAgICAgICAgcmVtb3ZlQ2xhc3ModGFyZ2V0Lm5vZGUsIFwiQW5pbV9Db21tb25cIik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuX3RhcmdldHMgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuX29sZE5vZGUpIHtcclxuICAgICAgZGVzdHJveSh0aGlzLl9vbGROb2RlKTtcclxuICAgICAgdGhpcy5fb2xkTm9kZSA9IG51bGw7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9kZWZlcnJlZC5yZXNvbHZlKCk7XHJcbiAgfVxyXG59XHJcbmNsYXNzIEFuaW1hdGlvbkhlbHBlciB7XHJcbiAgY29uc3RydWN0b3IoZmx5U3VyZmFjZU5vZGUpIHtcclxuICAgIHRoaXMuX2x0ciA9IGlzQm9keUx0cigpO1xyXG4gICAgdGhpcy5fZmx5U3VyZmFjZU5vZGUgPSBmbHlTdXJmYWNlTm9kZTtcclxuICAgIHRoaXMuX2l0ZW1zID0gW107XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFNlbmRzIGEgZG9tIG5vZGUgZmx5aW5nLlxyXG4gICAqIEBwYXJhbSBub2RlIERvbSBub2RlLlxyXG4gICAqIEBwYXJhbSBjbGFzc05hbWUgQ2xhc3NlcyB0byBiZSBhcHBsaWVkIGR1cmluZyBhbmltYXRpb24uXHJcbiAgICogQHBhcmFtIGFuY2hvcnMgRGVmaW5lIGFuaW1hdGlvbiBkaXJlY3Rpb25zLlxyXG4gICAqIEBwYXJhbSBjbG9uZSBDbG9uZSBvZiB0aGUgbm9kZS4gUHJvYmFibHkgbmVlZGVkIGZvciBhIHBsYWNlaG9sZGVyIG9mIHRoZSBub2RlIGZseWluZyBhd2F5LlxyXG4gICAqXHJcbiAgICogQHJldHVybnMgVGhlIHBhc3NlZCBjbG9uZSBvciB0aGUgY29weSBvZiB0aGUgcGFzc2VkIGRvbSBub2RlLlxyXG4gICAqL1xyXG4gIGZseShub2RlLCBjbGFzc05hbWUsIGFuY2hvcnMsIGNsb25lKSB7XHJcbiAgICBjbG9uZSA9IGNsb25lIHx8IG5vZGUuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgaWYgKCFhbmNob3JzKSB7XHJcbiAgICAgIGFuY2hvcnMgPSBbXCJ0b3BcIiwgdGhpcy5fbHRyID8gXCJsZWZ0XCIgOiBcInJpZ2h0XCJdO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgbm9kZVJlY3QgPSBub2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgY29uc3QgcGFyZW50UmVjdCA9IHRoaXMuX2ZseVN1cmZhY2VOb2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgYWRkQ2xhc3MoY2xvbmUsIFwiQW5pbV9GbHlpbmdPYmpcIik7XHJcbiAgICBsZXQgZGlyLCBkaXJEaXN0O1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbmNob3JzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGFuY2hvciA9IGFuY2hvcnNbaV07XHJcbiAgICAgIGxldCBkaXN0ID0gbm9kZVJlY3RbYW5jaG9yXSAtIHBhcmVudFJlY3RbYW5jaG9yXTtcclxuICAgICAgaWYgKGFuY2hvciA9PT0gXCJyaWdodFwiIHx8IGFuY2hvciA9PT0gXCJib3R0b21cIikge1xyXG4gICAgICAgIGRpc3QgPSAtZGlzdDtcclxuICAgICAgfVxyXG4gICAgICBpZiAoKGFuY2hvciA9PT0gXCJsZWZ0XCIgJiYgIXRoaXMuX2x0cikgfHwgKGFuY2hvciA9PT0gXCJyaWdodFwiICYmIHRoaXMuX2x0cikpIHtcclxuICAgICAgICBkaXIgPSBhbmNob3I7XHJcbiAgICAgICAgZGlyRGlzdCA9IGRpc3Q7XHJcbiAgICAgIH1cclxuICAgICAgY2xvbmUuc3R5bGVbYW5jaG9yXSA9IGRpc3QgKyBcInB4XCI7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9mbHlTdXJmYWNlTm9kZS5hcHBlbmRDaGlsZChjbG9uZSk7XHJcbiAgICAvLyBJZiB0aGUgc3RhcnQgcG9pbnQgaXMgb3Bwb3NpdGUgdG8gdGV4dCBkaXJlY3Rpb24sIHdlIG5lZWQgdG8gY29ycmVjdCB0aGUgc3RhcnRpbmcgcG9zaXRpb25cclxuICAgIGlmIChkaXIpIHtcclxuICAgICAgZGlyRGlzdCArPSBub2RlUmVjdC53aWR0aCAtIGNsb25lLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xyXG4gICAgICBjbG9uZS5zdHlsZVtkaXJdID0gZGlyRGlzdCArIFwicHhcIjtcclxuICAgIH1cclxuICAgIHRoaXMuc3RhcnQoW1xyXG4gICAgICB7XHJcbiAgICAgICAgbm9kZTogY2xvbmUsXHJcbiAgICAgICAgY2xhc3NlczogW2NsYXNzTmFtZV1cclxuICAgICAgfVxyXG4gICAgXSwgY2xvbmUpO1xyXG4gICAgcmV0dXJuIGNsb25lO1xyXG4gIH1cclxuICBzdGFydCh0YXJnZXRzLCBvbGROb2RlKSB7XHJcbiAgICBjb25zdCBpdGVtID0gbmV3IEFuaW1hdGlvbkl0ZW0oKTtcclxuICAgIHRoaXMuX2l0ZW1zLnB1c2goaXRlbSk7XHJcbiAgICBpZiAoIXRoaXMuX3Byb2dyZXNzKSB7XHJcbiAgICAgIHRoaXMuX3Byb2dyZXNzID0gY3JlYXRlRGVmZXJyZWQoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBpdGVtLnN0YXJ0KHRhcmdldHMsIG9sZE5vZGUpLnRoZW4odGhpcy5fb25JdGVtRmluaXNoZWQuYmluZCh0aGlzLCBpdGVtKSk7XHJcbiAgfVxyXG4gIGZpbmlzaCgpIHtcclxuICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5faXRlbXM7XHJcbiAgICB3aGlsZSAoaXRlbXMubGVuZ3RoID4gMCkge1xyXG4gICAgICBpdGVtcy5wb3AoKS5maW5pc2goKTtcclxuICAgIH1cclxuICB9XHJcbiAgZ2V0UHJvbWlzZSgpIHtcclxuICAgIHJldHVybiB0aGlzLl9wcm9ncmVzcyAmJiB0aGlzLl9wcm9ncmVzcy5wcm9taXNlO1xyXG4gIH1cclxuICBfb25JdGVtRmluaXNoZWQoaXRlbSkge1xyXG4gICAgY29uc3QgaW5kZXggPSB0aGlzLl9pdGVtcy5pbmRleE9mKGl0ZW0pO1xyXG4gICAgaWYgKGluZGV4ID49IDApIHtcclxuICAgICAgdGhpcy5faXRlbXMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgaWYgKHRoaXMuX2l0ZW1zLmxlbmd0aCA9PT0gMCAmJiB0aGlzLl9wcm9ncmVzcykge1xyXG4gICAgICAgIHRoaXMuX3Byb2dyZXNzLnJlc29sdmUoKTtcclxuICAgICAgICB0aGlzLl9wcm9ncmVzcyA9IG51bGw7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cblxuLyoqXHJcbiAqICBBbGxvd3MgdG8gbW9uaXRvciB0aGUgbW91c2UgY3Vyc29yIGFuZCBjaGVjayBpZiBpdCdzIG92ZXIgYSBjb21wb25lbnQuXHJcbiAqL1xyXG5sZXQgbGF0ZXN0RXZlbnQ7XHJcbmxldCBpc0JlaW5nRHJhZ2dlZEZsYWc7XHJcbmZ1bmN0aW9uIF9zZXRMYXRlc3RFdmVudChldmVudCkge1xyXG4gIGxhdGVzdEV2ZW50ID0gZXZlbnQ7XHJcbn1cclxuLyoqXHJcbiAqIENoZWNrcyBpZiB0aGUgbW91c2UvdG91Y2ggZXZlbnQgcG9zaXRpb24gaXMgb3ZlciBhIERPTSBub2RlLlxyXG4gKiBAcGFyYW0gY29tcG9uZW50IERPTSBub2RlLlxyXG4gKiBAcGFyYW0gcGFyYW1zIEFkZGl0aW9uYWwgY2hlY2tpbmcgcGFyYW1ldGVycy5cclxuICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgZXZlbnQgcG9zaXRpb24gaXMgb3ZlciB0aGUgbm9kZS5cclxuICovXHJcbmZ1bmN0aW9uIGlzTW91c2VPdmVyKGNvbXBvbmVudCwgcGFyYW1zKSB7XHJcbiAgaWYgKCFjb21wb25lbnQgfHwgIWNvbXBvbmVudC5wYXJlbnROb2RlIHx8ICFjb21wb25lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0IHx8ICFsYXRlc3RFdmVudCkge1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuICBwYXJhbXMgPSBwYXJhbXMgfHwge307XHJcbiAgY29uc3QgaXNPdmVyU2VsZiA9IGlzTW91c2VPdmVyQm94KHBvc2l0aW9uKGNvbXBvbmVudCksIHtcclxuICAgIGlnbm9yZVBhZGRpbmc6IHBhcmFtcy5pZ25vcmVQYWRkaW5nLFxyXG4gICAgZXZlbnQ6IHBhcmFtcy5ldmVudFxyXG4gIH0pO1xyXG4gIGlmICghaXNPdmVyU2VsZiAmJiBwYXJhbXMuY2hlY2tBbGxDaGlsZHJlbikge1xyXG4gICAgbGV0IGlzTW91c2VPdmVyUmVzdWx0ID0gZmFsc2U7XHJcbiAgICB0cmF2ZXJzZUNoaWxkcmVuKGNvbXBvbmVudCwgKG5vZGUpID0+IHtcclxuICAgICAgaWYgKGlzTW91c2VPdmVyKG5vZGUsIHtcclxuICAgICAgICBpZ25vcmVQYWRkaW5nOiBwYXJhbXMuaWdub3JlUGFkZGluZyxcclxuICAgICAgICBldmVudDogcGFyYW1zLmV2ZW50XHJcbiAgICAgIH0pKSB7XHJcbiAgICAgICAgaXNNb3VzZU92ZXJSZXN1bHQgPSB0cnVlO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGlzTW91c2VPdmVyUmVzdWx0O1xyXG4gIH1cclxuICByZXR1cm4gaXNPdmVyU2VsZjtcclxufVxyXG4vKipcclxuICogQ2hlY2tzIGlmIHRoZSBtb3VzZS90b3VjaCBldmVudCBwb3NpdGlvbiBpcyBvdmVyIGEgYm94LlxyXG4gKiBAcGFyYW0gYm94IEJveCBhcyB7IHgsIHksIHcsIGggfS5cclxuICogQHBhcmFtIHBhcmFtcyBBZGRpdGlvbmFsIGNoZWNraW5nIHBhcmFtZXRlcnMuXHJcbiAqIEByZXR1cm5zIFRydWUgaWYgdGhlIGV2ZW50IHBvc2l0aW9uIGlzIG92ZXIgdGhlIGJveC5cclxuICovXHJcbmZ1bmN0aW9uIGlzTW91c2VPdmVyQm94KGJveCwgcGFyYW1zKSB7XHJcbiAgaWYgKCFib3ggfHwgIWxhdGVzdEV2ZW50KSB7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG4gIHBhcmFtcyA9IHBhcmFtcyB8fCB7fTtcclxuICBjb25zdCBidCA9IHBhcmFtcy5pZ25vcmVQYWRkaW5nO1xyXG4gIGlmIChidCkge1xyXG4gICAgYm94ID0gT2JqZWN0LmFzc2lnbih7fSwgYm94KTtcclxuICAgIGJveC54ICs9IGJ0O1xyXG4gICAgYm94LnkgKz0gYnQ7XHJcbiAgICBib3gudyAtPSBidCAqIDI7XHJcbiAgICBib3guaCAtPSBidCAqIDI7XHJcbiAgfVxyXG4gIGNvbnN0IGV2dCA9IHBhcmFtcy5ldmVudCA/IGZpeFRvdWNoRXZlbnQocGFyYW1zLmV2ZW50KSA6IGxhdGVzdEV2ZW50O1xyXG4gIHJldHVybiBib3gueCA8PSBldnQuY2xpZW50WCAmJiBib3gueCArIGJveC53ID49IGV2dC5jbGllbnRYICYmIGJveC55IDw9IGV2dC5jbGllbnRZICYmIGJveC55ICsgYm94LmggPj0gZXZ0LmNsaWVudFk7XHJcbn1cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vL1xyXG4vLyBGaXggdG91Y2ggZXZlbnRcclxuLy9cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vKipcclxuICogUHJvdmlkZXMgZXZlbnQgY29vcmRpbmF0ZXMgZm9yIG1vdXNlL3RvdWNoIGV2ZW50LlxyXG4gKiBAcGFyYW0gZXZlbnQgQSBtb3VzZS90b3VjaCBldmVudC5cclxuICogQHJldHVybnMgVGhlIG9yaWdpbmFsIG1vdXNlIGV2ZW50IG9yIHRoZSBvcmlnaW5hbCB0b3VjaCBldmVudCBlbnJpY2hlZCB3aXRoIGNvb3JkaW5hdGVzIG9mIHRoZSBsYXN0IHRvdWNoLlxyXG4gKi9cclxuZnVuY3Rpb24gZml4VG91Y2hFdmVudChldmVudCkge1xyXG4gIGNvbnN0IHRvdWNoID0gX2dldFRvdWNoKGV2ZW50KTtcclxuICBpZiAodG91Y2gpIHtcclxuICAgIGNvbnN0IGUgPSBldmVudDtcclxuICAgIGUuc2NyZWVuWCA9IHRvdWNoLnNjcmVlblg7XHJcbiAgICBlLnNjcmVlblkgPSB0b3VjaC5zY3JlZW5ZO1xyXG4gICAgZS5jbGllbnRYID0gdG91Y2guY2xpZW50WDtcclxuICAgIGUuY2xpZW50WSA9IHRvdWNoLmNsaWVudFk7XHJcbiAgICBlLnBhZ2VYID0gdG91Y2gucGFnZVg7XHJcbiAgICBlLnBhZ2VZID0gdG91Y2gucGFnZVk7XHJcbiAgfVxyXG4gIHJldHVybiBldmVudDtcclxufVxyXG5mdW5jdGlvbiBfZ2V0VG91Y2goX2V2ZW50KSB7XHJcbiAgY29uc3QgZXZlbnQgPSBfZXZlbnQ7XHJcbiAgaWYgKGV2ZW50LnRvdWNoZXMpIHtcclxuICAgIGlmICghZXZlbnQudG91Y2hlcy5sZW5ndGgpIHtcclxuICAgICAgcmV0dXJuIGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdOyAvLyBGaXJzdCB0b3VjaCB3YXMgcmVsZWFzZWQgLSBhdmFpbGFibGUgaW4gY2hhbmdlZFRvdWNoZXMuXHJcbiAgICB9XHJcbiAgICBjb25zdCBpZCA9IGV2ZW50LnRvdWNoZXNbMF0uaWRlbnRpZmllcjtcclxuICAgIGxldCB0b3VjaDsgLy8gRmluZCBhIGNoYW5nZWQgdG91Y2ggd2l0aCB0aGUgc2FtZSBpZCAoYXZhaWxhYmxlIG9uIHRvdWNobW92ZSkuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGV2ZW50LmNoYW5nZWRUb3VjaGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGlmIChldmVudC5jaGFuZ2VkVG91Y2hlc1tpXS5pZGVudGlmaWVyID09PSBpZCkge1xyXG4gICAgICAgIHRvdWNoID0gZXZlbnQuY2hhbmdlZFRvdWNoZXNbaV07XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0b3VjaCB8fCBldmVudC50b3VjaGVzWzBdO1xyXG4gIH1cclxuICByZXR1cm4gbnVsbDtcclxufVxyXG4vKipcclxuICogQHBhcmFtIG5vZGUgICAgICAgICAgICAgIERvbSBub2RlLlxyXG4gKiBAcGFyYW0gb25Nb3VzZU91dCAgICAgICAgRnVuY3Rpb24oZXZlbnQpLlxyXG4gKlxyXG4gKiBAcmV0dXJucyBhIGhhbmRsZSB3aXRoIHJlbW92ZSgpIG1ldGhvZC5cclxuICovXHJcbmZ1bmN0aW9uIGFkZE91dEhhbmRsZXIocGFyYW1zKSB7XHJcbiAgY29uc3QgaXNNb3VzZU92ZXJGdW5jID0gcGFyYW1zLmlzTW91c2VPdmVyIHx8XHJcbiAgICAoKCkgPT4gaXNNb3VzZU92ZXIocGFyYW1zLm5vZGUsIHtcclxuICAgICAgY2hlY2tBbGxDaGlsZHJlbjogdHJ1ZVxyXG4gICAgfSkpO1xyXG4gIGxldCBsZXRPdXRUaW1lb3V0SDtcclxuICBmdW5jdGlvbiBfY2xlYXIoKSB7XHJcbiAgICBjbGVhclRpbWVvdXQobGV0T3V0VGltZW91dEgpO1xyXG4gICAgbGV0T3V0VGltZW91dEggPSBudWxsO1xyXG4gIH1cclxuICBsZXQgaXNPdmVyO1xyXG4gIGNvbnN0IG1vdmVIID0gb24oZG9jdW1lbnQuYm9keSwgXCJtb3VzZW1vdmVcIiwgKG1vdmVFdmVudCkgPT4ge1xyXG4gICAgaWYgKGlzTW91c2VPdmVyRnVuYygpKSB7XHJcbiAgICAgIF9jbGVhcigpO1xyXG4gICAgICBpc092ZXIgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoaXNPdmVyKSB7XHJcbiAgICAgIGlzT3ZlciA9IGZhbHNlO1xyXG4gICAgICBsZXRPdXRUaW1lb3V0SCA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIF9jbGVhcigpO1xyXG4gICAgICAgIHBhcmFtcy5vbk1vdXNlT3V0ICYmIHBhcmFtcy5vbk1vdXNlT3V0KG1vdmVFdmVudCk7XHJcbiAgICAgIH0sIHBhcmFtcy5hbGxvd2VkT3V0RGVsYXkpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG4gIHJldHVybiB7XHJcbiAgICByZW1vdmU6ICgpID0+IHtcclxuICAgICAgbW92ZUgucmVtb3ZlKCk7XHJcbiAgICAgIF9jbGVhcigpO1xyXG4gICAgfVxyXG4gIH07XHJcbn1cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vL1xyXG4vLyBNb25pdG9yaW5nIHRoZSBsYXN0IGV2ZW50IHBvc2l0aW9uIGFuZCBkcmFnZ2luZyBzdGF0ZVxyXG4vL1xyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbmlmICghaGFzKFwid29ya2VyXCIpICYmIGdsb2JhbFRoaXMuYWRkRXZlbnRMaXN0ZW5lcikge1xyXG4gIGNvbnN0IF9maXhUb3VjaCA9IChldmVudCkgPT4ge1xyXG4gICAgY29uc3QgdG91Y2ggPSBfZ2V0VG91Y2goZXZlbnQpO1xyXG4gICAgaWYgKHRvdWNoKSB7XHJcbiAgICAgIHRvdWNoLnR5cGUgPSBldmVudC50eXBlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuICh0b3VjaCB8fCBldmVudCk7XHJcbiAgfTtcclxuICAvLyBUT0RPOiBTY29wZSB0byBwYXJlbnQgR0UgZWxlbWVudCwgbm90IGRvY3VtZW50LmJvZHlcclxuICAvLyBvbmNlIHdlIGxvYWQgdGhlIG1vZHVsZSwgaXQgc3RhcnRzIG1vbml0b3JpbmcgdGhlIGN1cnNvciBwb3NpdGlvblxyXG4gIG9uKGRvY3VtZW50LmJvZHksIFwidG91Y2hzdGFydFwiLCAoZXZlbnQpID0+IHtcclxuICAgIF9zZXRMYXRlc3RFdmVudChfZml4VG91Y2goZXZlbnQpKTtcclxuICB9KTtcclxuICBvbihkb2N1bWVudC5ib2R5LCBcInRvdWNobW92ZVwiLCAoZXZlbnQpID0+IHtcclxuICAgIF9zZXRMYXRlc3RFdmVudChfZml4VG91Y2goZXZlbnQpKTtcclxuICB9KTtcclxuICBpZiAoIWlzTW9iaWxlRGV2aWNlKCkpIHtcclxuICAgIG9uKGRvY3VtZW50LmJvZHksIFwibW91c2Vtb3ZlXCIsIChldmVudCkgPT4ge1xyXG4gICAgICBfc2V0TGF0ZXN0RXZlbnQoX2ZpeFRvdWNoKGV2ZW50KSk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgLy9UT0RPOiBzY29wZSB0byBwYXJlbnQgR0UgZWxlbWVudCwgbm90IGRvY3VtZW50LmJvZHlcclxuICBvbihkb2N1bWVudC5ib2R5LCBcIm1vdXNlZG93blwiLCAoKSA9PiB7XHJcbiAgICBpZiAoaXNCZWluZ0RyYWdnZWRGbGFnKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlzQmVpbmdEcmFnZ2VkRmxhZyA9IHRydWU7XHJcbiAgICBvbmNlKGRvY3VtZW50LmJvZHksIFtcIm1vdXNldXBcIiwgXCJjbGlja1wiXSwgKCkgPT4ge1xyXG4gICAgICBpc0JlaW5nRHJhZ2dlZEZsYWcgPSBmYWxzZTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5mdW5jdGlvbiBlJHUoZSx0LHIsbyl7dmFyIGMsZj1hcmd1bWVudHMubGVuZ3RoLG49ZjwzP3Q6bnVsbD09PW8/bz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQscik6bztpZihcIm9iamVjdFwiPT10eXBlb2YgUmVmbGVjdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSluPVJlZmxlY3QuZGVjb3JhdGUoZSx0LHIsbyk7ZWxzZSBmb3IodmFyIGw9ZS5sZW5ndGgtMTtsPj0wO2wtLSkoYz1lW2xdKSYmKG49KGY8Mz9jKG4pOmY+Mz9jKHQscixuKTpjKHQscikpfHxuKTtyZXR1cm4gZj4zJiZuJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLG4pLG59XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5mdW5jdGlvbiB0JEQodCl7cmV0dXJuIHQmJnQucmVsZWFzZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgdC5yZWxlYXNlfWZ1bmN0aW9uIGkkVih0KXtyZXR1cm4gdCYmdC5hY3F1aXJlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LmFjcXVpcmV9Y2xhc3MgZSR0e2NvbnN0cnVjdG9yKHQsaSxlLG89MSxzPTApe2lmKHRoaXMuY3Rvcj10LHRoaXMuYWNxdWlyZUZ1bmN0aW9uPWksdGhpcy5yZWxlYXNlRnVuY3Rpb249ZSx0aGlzLmFsbG9jYXRpb25TaXplPW8sdGhpcy5fcG9vbD1uZXcgQXJyYXkocyksdGhpcy5faW5pdGlhbFNpemU9cyx0aGlzLmN0b3IpZm9yKGxldCBuPTA7bjxzO24rKyl0aGlzLl9wb29sW25dPW5ldyB0aGlzLmN0b3I7dGhpcy5hbGxvY2F0aW9uU2l6ZT1NYXRoLm1heChvLDEpO31kZXN0cm95KCl7dGhpcy5wcnVuZSgwKTt9YWNxdWlyZSguLi50KXtsZXQgbztpZihlJHQudGVzdC5kaXNhYmxlZClvPW5ldyB0aGlzLmN0b3I7ZWxzZSB7aWYoMD09PXRoaXMuX3Bvb2wubGVuZ3RoKXtjb25zdCB0PXRoaXMuYWxsb2NhdGlvblNpemU7Zm9yKGxldCBpPTA7aTx0O2krKyl0aGlzLl9wb29sW2ldPW5ldyB0aGlzLmN0b3I7fW89dGhpcy5fcG9vbC5wb3AoKTt9cmV0dXJuIHRoaXMuYWNxdWlyZUZ1bmN0aW9uP3RoaXMuYWNxdWlyZUZ1bmN0aW9uKG8sLi4udCk6aSRWKG8pJiZvLmFjcXVpcmUoLi4udCksb31yZWxlYXNlKGkpe2kmJiFlJHQudGVzdC5kaXNhYmxlZCYmKHRoaXMucmVsZWFzZUZ1bmN0aW9uP3RoaXMucmVsZWFzZUZ1bmN0aW9uKGkpOnQkRChpKSYmaS5yZWxlYXNlKCksdGhpcy5fcG9vbC5wdXNoKGkpKTt9cHJ1bmUodD10aGlzLl9pbml0aWFsU2l6ZSl7aWYoISh0Pj10aGlzLl9wb29sLmxlbmd0aCkpe2ZvcihsZXQgaT10O2k8dGhpcy5fcG9vbC5sZW5ndGg7KytpKXtjb25zdCB0PXRoaXMuX3Bvb2xbaV07dGhpcy5fZGlzcG9zZSh0KTt9dGhpcy5fcG9vbC5sZW5ndGg9dDt9fV9kaXNwb3NlKHQpe3QuZGlzcG9zZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgdC5kaXNwb3NlJiZ0LmRpc3Bvc2UoKTt9fWUkdC50ZXN0PXtkaXNhYmxlZDohMX07XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5jbGFzcyBlJHN7Y29uc3RydWN0b3IoZSxzKXt0aGlzLl9vYnNlcnZlcnM9ZSx0aGlzLl9vYnNlcnZlcj1zO31yZW1vdmUoKXt0aGlzLl9vYnNlcnZlcnMuZGVsZXRlKHRoaXMuX29ic2VydmVyKTt9fVxuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xubGV0IGUkcj0hMTtmdW5jdGlvbiB0JEMoKXtyZXR1cm4gZSRyfWZ1bmN0aW9uIHIkcSgpe2Ukcj0hMDt9ZnVuY3Rpb24gbiRJKCl7ZSRyPSExO31mdW5jdGlvbiBpJFUocyl7cmV0dXJuIHZvaWQgMCE9PXMuZmxhZ3N9Y2xhc3MgbyRze2NvbnN0cnVjdG9yKHMsZSx0KXt0aGlzLmhvc3Q9cyx0aGlzLnByb3BlcnR5TmFtZT1lLHRoaXMubWV0YWRhdGE9dCx0aGlzLmZsYWdzPTEsdGhpcy5fb2JzZXJ2ZXJzPW51bGwsdGhpcy5fYWNjZXNzZWQ9bnVsbCx0aGlzLl9oYW5kbGVzPVtdLHRoaXMuZmxhZ3M9MXwodC5ub25OdWxsYWJsZT84OjApfCh0Lmhhc093blByb3BlcnR5KFwidmFsdWVcIik/MTY6MCl8KHZvaWQgMD09PXQuZ2V0PzMyOjApfCh2b2lkIDA9PT10LmRlcGVuZHNPbj82NDowKTt9ZGVzdHJveSgpe3RoaXMuX2FjY2Vzc2VkJiYodGhpcy5fYWNjZXNzZWQuY2xlYXIoKSx0aGlzLl9hY2Nlc3NlZD1udWxsKSx0aGlzLl9vYnNlcnZlcnMmJih0aGlzLl9vYnNlcnZlcnMuY2xlYXIoKSx0aGlzLl9vYnNlcnZlcnM9bnVsbCksdGhpcy5fY2xlYXJPYnNlcnZhdGlvbkhhbmRsZXMoKTt9b25PYnNlcnZhYmxlQWNjZXNzZWQocyl7cyE9PXRoaXMmJihudWxsPT09dGhpcy5fYWNjZXNzZWQmJih0aGlzLl9hY2Nlc3NlZD1uZXcgU2V0KSx0aGlzLl9hY2Nlc3NlZC5hZGQocykpO31vblRyYWNraW5nRW5kKCl7dGhpcy5fY2xlYXJPYnNlcnZhdGlvbkhhbmRsZXMoKSx0aGlzLmZsYWdzfD0zMjtjb25zdCBzPXRoaXMuX2FjY2Vzc2VkO2lmKG51bGw9PT1zKXJldHVybjtjb25zdCBlPXRoaXMuX2hhbmRsZXM7Zm9yKGNvbnN0IHQgb2YgcyllLnB1c2godC5vYnNlcnZlKHRoaXMpKTtzLmNsZWFyKCk7fW9ic2VydmUoZSl7cmV0dXJuIG51bGw9PT10aGlzLl9vYnNlcnZlcnMmJih0aGlzLl9vYnNlcnZlcnM9bmV3IFNldCksbmV3IGUkcyh0aGlzLl9vYnNlcnZlcnMuYWRkKGUpLGUpfW5vdGlmeSgpezImfnRoaXMuZmxhZ3MmJih0aGlzLmZsYWdzfD0xKSx0aGlzLl9ub3RpZnlPYnNlcnZlcnMoKTt9aW52YWxpZGF0ZSgpe3RoaXMubm90aWZ5KCk7fWNvbW1pdCgpe3RoaXMuZmxhZ3MmPS0yLHRoaXMuX25vdGlmeU9ic2VydmVycygpO31fbm90aWZ5T2JzZXJ2ZXJzKCl7aWYobnVsbD09PXRoaXMuX29ic2VydmVycylyZXR1cm47Y29uc3Qgcz10aGlzLl9vYnNlcnZlcnMuc2l6ZSx0PW5ldyBBcnJheShzKTtsZXQgcj1zLTE7Zm9yKGNvbnN0IGUgb2YgdGhpcy5fb2JzZXJ2ZXJzKXRbci0tXT1lO2NvbnN0IG49IWUkcjtmb3IoO3QubGVuZ3RoOyl7Y29uc3Qgcz10LnBvcCgpO2lmKGkkVShzKSl7aWYoMiZ+cy5mbGFncyYmKHMuZmxhZ3N8PTEpLG51bGw9PT1zLl9vYnNlcnZlcnMpY29udGludWU7Zm9yKGNvbnN0IGUgb2Ygcy5fb2JzZXJ2ZXJzKXQucHVzaChlKTt9ZWxzZSBuJiZzLm5vdGlmeSgpO319X2NsZWFyT2JzZXJ2YXRpb25IYW5kbGVzKCl7Zm9yKGNvbnN0IHMgb2YgdGhpcy5faGFuZGxlcylzLnJlbW92ZSgpO3RoaXMuX2hhbmRsZXMubGVuZ3RoPTA7fX1cblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmNsYXNzIHMkd3tjb25zdHJ1Y3Rvcigpe3RoaXMuX3ZhbHVlcz1uZXcgTWFwO31jbG9uZSh0KXtjb25zdCByPW5ldyBzJHc7cmV0dXJuIHRoaXMuX3ZhbHVlcy5mb3JFYWNoKCgocyxhKT0+e3QmJnQuaGFzKGEpfHxyLnNldChhLHkkdihzKSk7fSkpLHJ9Z2V0KGUpe3JldHVybiB0aGlzLl92YWx1ZXMuZ2V0KGUpfW9yaWdpbk9mKCl7cmV0dXJuIDZ9a2V5cygpe3JldHVybiBbLi4udGhpcy5fdmFsdWVzLmtleXMoKV19c2V0KGUscyl7dGhpcy5fdmFsdWVzLnNldChlLHMpO31kZWxldGUoZSl7dGhpcy5fdmFsdWVzLmRlbGV0ZShlKTt9aGFzKGUpe3JldHVybiB0aGlzLl92YWx1ZXMuaGFzKGUpfWZvckVhY2goZSl7dGhpcy5fdmFsdWVzLmZvckVhY2goZSk7fX1cblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmxldCBvJHIsciRwPVtdO2NvbnN0IHMkdj1uJFQuZ2V0TG9nZ2VyKFwiZXNyaS5jb3JlLkFjY2Vzc29yXCIpO2Z1bmN0aW9uIGkkVCh0KXt2b2lkIDAhPT1vJHImJm8kci5vbk9ic2VydmFibGVBY2Nlc3NlZCh0KTt9bGV0IGwkST0hMSxmJHI9ITE7ZnVuY3Rpb24gYSRKKHQsbixlKXtpZihsJEkpcmV0dXJuIGckaSh0LG4sZSk7dSRHKHQpO2NvbnN0IG89bi5jYWxsKGUpO3JldHVybiBwJCQoKSxvfWZ1bmN0aW9uIGckaSh0LG4sZSl7Y29uc3Qgbz1sJEk7bCRJPSEwLHUkRyh0KTtsZXQgcj1udWxsO3RyeXtyPW4uY2FsbChlKTt9Y2F0Y2goYyl7ZiRyJiZzJHYuZXJyb3IoYyk7fXJldHVybiBwJCQoKSxsJEk9byxyfWZ1bmN0aW9uIHUkRyh0KXtvJHI9dCxyJHAucHVzaCh0KTt9ZnVuY3Rpb24gcCQkKCl7Y29uc3QgdD1yJHAucG9wKCk7byRyPXIkcC5sZW5ndGg+MD9yJHBbciRwLmxlbmd0aC0xXTp2b2lkIDAsdm9pZCAwIT09dCYmdC5vblRyYWNraW5nRW5kKCk7fWZ1bmN0aW9uIGQkQih0LG4pe2lmKDMyJm4uZmxhZ3MpcmV0dXJuO2NvbnN0IGU9ZiRyO2Ykcj0hMSw2NCZuLmZsYWdzP2ckaShuLG4ubWV0YWRhdGEuZ2V0LHQpOmgkdih0LG4pLGYkcj1lO31jb25zdCBtJEE9W107ZnVuY3Rpb24gaCR2KHQsZSl7MTI4JmUuZmxhZ3N8fChlLmZsYWdzfD0xMjgsZyRpKGUsKCgpPT57Y29uc3Qgbz1lLm1ldGFkYXRhLmRlcGVuZHNPbnx8bSRBO2Zvcihjb25zdCBlIG9mIG8paWYoXCJzdHJpbmdcIj09dHlwZW9mIGUmJi0xPT09ZS5pbmRleE9mKFwiLlwiKSlBJGEodCxlLCExKTtlbHNlIHtjb25zdCBvPWYkeShlKTtmb3IobGV0IG49MCxlPXQ7bjxvLmxlbmd0aCYmbnVsbCE9ZSYmXCJvYmplY3RcIj09dHlwZW9mIGU7KytuKWU9QSRhKGUsb1tuXSxuIT09by5sZW5ndGgtMSk7fX0pKSxlLmZsYWdzJj0tMTI5KTt9ZnVuY3Rpb24gQSRhKHQsbixvKXtjb25zdCByPVwiP1wiPT09bltuLmxlbmd0aC0xXT9uLnNsaWNlKDAsLTEpOm47aWYobnVsbCE9dC5nZXRJdGVtQXR8fEFycmF5LmlzQXJyYXkodCkpe2NvbnN0IG49cGFyc2VJbnQociwxMCk7aWYoIWlzTmFOKG4pKXJldHVybiBBcnJheS5pc0FycmF5KHQpP3Rbbl06dC5nZXRJdGVtQXQobil9Y29uc3Qgcz1lJEcodCksYz1udWxsPT1zP3ZvaWQgMDpzLnByb3BlcnRpZXMuZ2V0KHIpO3JldHVybiBjJiYoaSRUKGMpLGQkQih0LGMpKSxvP3Rbcl06dm9pZCAwfVxuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xubiRULmdldExvZ2dlcihcImVzcmkuY29yZS5hY2Nlc3NvclN1cHBvcnQuUHJvcGVydGllc1wiKTtmdW5jdGlvbiBkJEEodCxlLHMpe3JldHVybiB2b2lkIDAhPT10fWZ1bmN0aW9uIG0keih0LGUscyxpKXtyZXR1cm4gdm9pZCAwIT09dCYmKCEobnVsbD09cyYmOCZ0LmZsYWdzKXx8KCExKSl9ZnVuY3Rpb24gdiRiKHQpe3JldHVybiB0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LmRlc3Ryb3l9Y2xhc3MgeSRue2NvbnN0cnVjdG9yKHQpe3RoaXMuaG9zdD10LHRoaXMucHJvcGVydGllcz1uZXcgTWFwLHRoaXMuY3RvckFyZ3M9bnVsbCx0aGlzLmRlc3Ryb3llZD0hMSx0aGlzLmxpZmVjeWNsZT0wLHRoaXMuc3RvcmU9bmV3IHMkdyx0aGlzLl9vcmlnaW49Njtjb25zdCBlPXRoaXMuaG9zdC5jb25zdHJ1Y3Rvci5fX2FjY2Vzc29yTWV0YWRhdGFfXyxzPWUucHJvcGVydGllcztmb3IoY29uc3QgaSBpbiBzKXtjb25zdCBlPW5ldyBvJHModCxpLHNbaV0pO3RoaXMucHJvcGVydGllcy5zZXQoaSxlKTt9dGhpcy5tZXRhZGF0YXM9cyx0aGlzLl9hdXRvRGVzdHJveT1lLmF1dG9EZXN0cm95O31pbml0aWFsaXplKCl7dGhpcy5saWZlY3ljbGU9MTt9Y29uc3RydWN0ZWQoKXt0aGlzLmxpZmVjeWNsZT0yO31kZXN0cm95KCl7aWYodGhpcy5kZXN0cm95ZWQ9ITAsdGhpcy5fYXV0b0Rlc3Ryb3kpZm9yKGNvbnN0W3QsZV1vZiB0aGlzLnByb3BlcnRpZXMpe2NvbnN0IHM9dGhpcy5pbnRlcm5hbEdldCh0KTtzJiZ2JGIocykmJihzLmRlc3Ryb3koKSw4Jn5lLmZsYWdzJiZ0aGlzLl9pbnRlcm5hbFNldChlLG51bGwpKSxlLmRlc3Ryb3koKTt9ZWxzZSBmb3IoY29uc3RbdCxlXW9mIHRoaXMucHJvcGVydGllcyllLmRlc3Ryb3koKTt9Z2V0IGluaXRpYWxpemVkKCl7cmV0dXJuIDAhPT10aGlzLmxpZmVjeWNsZX1nZXQodCl7cmV0dXJuIHRoaXMucHJvcGVydGllcy5nZXQodCkubWV0YWRhdGEuZ2V0P3RoaXMuZ2V0dGVyQ29tcHV0ZWQodCk6dGhpcy5nZXR0ZXJTdGF0aWModCl9Z2V0dGVyU3RhdGljKHQpe2NvbnN0IGU9dGhpcy5wcm9wZXJ0aWVzLmdldCh0KTtpZih2b2lkIDAhPT1lKXJldHVybiBpJFQoZSksdGhpcy5zdG9yZS5oYXModCk/dGhpcy5zdG9yZS5nZXQodCk6ZS5tZXRhZGF0YS52YWx1ZX1nZXR0ZXJDb21wdXRlZCh0KXtjb25zdCBlPXRoaXMucHJvcGVydGllcy5nZXQodCk7aSRUKGUpO2NvbnN0IHM9dGhpcy5zdG9yZSxpPWUuZmxhZ3Mscj10aGlzLnN0b3JlLmdldCh0KTtpZig0JmkpcmV0dXJuIHI7aWYocy5oYXModCkmJigxJn5pfHx0JEMoKSkpcmV0dXJuIHI7bGV0IG87ZS5mbGFnc3w9NDtjb25zdCBuPWUubWV0YWRhdGEuZ2V0OzY0Jmk/bz1hJEooZSxuLHRoaXMuaG9zdCk6KGgkdih0aGlzLmhvc3QsZSksbz1uLmNhbGwodGhpcy5ob3N0KSkscy5zZXQodCxvLDEpO2NvbnN0IGM9dGhpcy5zdG9yZS5nZXQodCk7cmV0dXJuIGM9PT1yP2UuZmxhZ3MmPS0yOmUuY29tbWl0KCksZS5mbGFncyY9LTUsY31vcmlnaW5PZih0KXtjb25zdCBlPXRoaXMuc3RvcmUub3JpZ2luT2YodCk7aWYodm9pZCAwPT09ZSl7Y29uc3QgZT10aGlzLnByb3BlcnRpZXMuZ2V0KHQpO2lmKHZvaWQgMCE9PWUmJjE2JmUuZmxhZ3MpcmV0dXJuIFwiZGVmYXVsdHNcIn1yZXR1cm4gbiRLKGUpfWhhcyh0KXtyZXR1cm4gISF0aGlzLnByb3BlcnRpZXMuaGFzKHQpJiZ0aGlzLnN0b3JlLmhhcyh0KX1rZXlzKCl7cmV0dXJuIFsuLi50aGlzLnByb3BlcnRpZXMua2V5cygpXX1pbnRlcm5hbEdldCh0KXtjb25zdCBlPXRoaXMucHJvcGVydGllcy5nZXQodCk7aWYoZCRBKGUpKXJldHVybiB0aGlzLnN0b3JlLmhhcyh0KT90aGlzLnN0b3JlLmdldCh0KTplLm1ldGFkYXRhLnZhbHVlfWludGVybmFsU2V0KHQsZSl7Y29uc3Qgcz10aGlzLnByb3BlcnRpZXMuZ2V0KHQpO2QkQShzKSYmdGhpcy5faW50ZXJuYWxTZXQocyxlKTt9Z2V0RGVwZW5kc0luZm8odCxlLGkpe2NvbnN0IHI9dGhpcy5wcm9wZXJ0aWVzLmdldChlKTtpZighZCRBKHIpKXJldHVybiBcIlwiO2NvbnN0IG89bmV3IFNldCxhPWEkSih7b25PYnNlcnZhYmxlQWNjZXNzZWQ6dD0+by5hZGQodCksb25UcmFja2luZ0VuZDooKT0+e319LCgoKT0+e3ZhciBlO3JldHVybiBudWxsPT0oZT1yLm1ldGFkYXRhLmdldCk/dm9pZCAwOmUuY2FsbCh0KX0pKTtsZXQgYz1gJHtpfSR7dC5kZWNsYXJlZENsYXNzLnNwbGl0KFwiLlwiKS5wb3AoKX0uJHtlfTogJHthfVxcbmA7aWYoMD09PW8uc2l6ZSlyZXR1cm4gYztpKz1cIiAgXCI7Zm9yKGNvbnN0IGwgb2Ygbyl7aWYoIShsIGluc3RhbmNlb2YgbyRzKSljb250aW51ZTtjb25zdCB0PWwuaG9zdCxlPWwucHJvcGVydHlOYW1lLHI9ZSRHKHQpO2MrPXI/ci5nZXREZXBlbmRzSW5mbyh0LGUsaSk6YCR7aX0ke2V9OiB1bmRlZmluZWRcXG5gO31yZXR1cm4gY31zZXRBdE9yaWdpbih0LGUscyl7Y29uc3QgaT10aGlzLnByb3BlcnRpZXMuZ2V0KHQpO2lmKGQkQShpKSlyZXR1cm4gdGhpcy5fc2V0QXRPcmlnaW4oaSxlLHMpfWlzT3ZlcnJpZGRlbih0KXtjb25zdCBlPXRoaXMucHJvcGVydGllcy5nZXQodCk7cmV0dXJuIHZvaWQgMCE9PWUmJiEhKDImZS5mbGFncyl9Y2xlYXJPdmVycmlkZSh0KXtjb25zdCBlPXRoaXMucHJvcGVydGllcy5nZXQodCk7dm9pZCAwIT09ZSYmMiZlLmZsYWdzJiYoZS5mbGFncyY9LTMsZS5pbnZhbGlkYXRlKCkpO31vdmVycmlkZSh0LGUpe2NvbnN0IHM9dGhpcy5wcm9wZXJ0aWVzLmdldCh0KTtpZighbSR6KHMsdCxlKSlyZXR1cm47Y29uc3QgaT1zLm1ldGFkYXRhLmNhc3Q7aWYoaSl7Y29uc3QgdD10aGlzLl9jYXN0KGksZSkse3ZhbGlkOnMsdmFsdWU6cn09dDtpZihPJDMucmVsZWFzZSh0KSwhcylyZXR1cm47ZT1yO31zLmZsYWdzfD0yLHRoaXMuX2ludGVybmFsU2V0KHMsZSk7fXNldCh0LGUpe2NvbnN0IHM9dGhpcy5wcm9wZXJ0aWVzLmdldCh0KTtpZighbSR6KHMsdCxlKSlyZXR1cm47Y29uc3QgaT1zLm1ldGFkYXRhLmNhc3Q7aWYoaSl7Y29uc3QgdD10aGlzLl9jYXN0KGksZSkse3ZhbGlkOnMsdmFsdWU6cn09dDtpZihPJDMucmVsZWFzZSh0KSwhcylyZXR1cm47ZT1yO31jb25zdCByPXMubWV0YWRhdGEuc2V0O3I/ci5jYWxsKHRoaXMuaG9zdCxlKTp0aGlzLl9pbnRlcm5hbFNldChzLGUpO31zZXREZWZhdWx0T3JpZ2luKHQpe3RoaXMuX29yaWdpbj10JEcodCk7fWdldERlZmF1bHRPcmlnaW4oKXtyZXR1cm4gbiRLKHRoaXMuX29yaWdpbil9cHJvcGVydHlJbnZhbGlkYXRlZCh0KXtjb25zdCBlPXRoaXMucHJvcGVydGllcy5nZXQodCk7dm9pZCAwIT09ZSYmZS5pbnZhbGlkYXRlKCk7fXByb3BlcnR5Q29tbWl0dGVkKHQpe2NvbnN0IGU9dGhpcy5wcm9wZXJ0aWVzLmdldCh0KTt2b2lkIDAhPT1lJiZlLmNvbW1pdCgpO31faW50ZXJuYWxTZXQodCxlKXtjb25zdCBzPTAhPT10aGlzLmxpZmVjeWNsZT90aGlzLl9vcmlnaW46MDt0aGlzLl9zZXRBdE9yaWdpbih0LGUscyk7fV9zZXRBdE9yaWdpbihlLHMsaSl7Y29uc3Qgcj10aGlzLnN0b3JlLG89ZS5wcm9wZXJ0eU5hbWU7ci5oYXMobyxpKSYmbCRQKHMsci5nZXQobykpJiYyJn5lLmZsYWdzJiZpPT09ci5vcmlnaW5PZihvKXx8KHIkcSgpLGUuaW52YWxpZGF0ZSgpLG4kSSgpLHIuc2V0KG8scyxpKSxlLmNvbW1pdCgpLGQkQih0aGlzLmhvc3QsZSkpO31fY2FzdCh0LGUpe2NvbnN0IHM9TyQzLmFjcXVpcmUoKTtyZXR1cm4gcy52YWxpZD0hMCxzLnZhbHVlPWUsdCYmKHMudmFsdWU9dC5jYWxsKHRoaXMuaG9zdCxlLHMpKSxzfX1jbGFzcyBfJDV7Y29uc3RydWN0b3IoKXt0aGlzLnZhbHVlPW51bGwsdGhpcy52YWxpZD0hMDt9YWNxdWlyZSgpe3RoaXMudmFsaWQ9ITA7fXJlbGVhc2UoKXt0aGlzLnZhbHVlPW51bGw7fX1jb25zdCBPJDM9bmV3IGUkdChfJDUpO1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuY29uc3QgciRvPUFycmF5LnByb3RvdHlwZS5zcGxpY2U7ZnVuY3Rpb24gdCRCKGUpe2UubGVuZ3RoPTA7fWNsYXNzIG8kcXtjb25zdHJ1Y3RvcihyPTUwLG89NTApe3RoaXMuX3Bvb2w9bmV3IGUkdChBcnJheSx2b2lkIDAsdCRCLG8scik7fWFjcXVpcmUoKXtyZXR1cm4gdGhpcy5fcG9vbC5hY3F1aXJlKCl9Y29weShlKXtjb25zdCB0PXRoaXMuYWNxdWlyZSgpO3JldHVybiBlLnVuc2hpZnQoMCwwKSxyJG8uYXBwbHkodCxlKSxlLnNwbGljZSgwLDIpLHR9cmVsZWFzZShlKXt0aGlzLl9wb29sLnJlbGVhc2UoZSk7fXBydW5lKCl7dGhpcy5fcG9vbC5wcnVuZSgwKTt9c3RhdGljIGFjcXVpcmUoKXtyZXR1cm4gcyR1LmFjcXVpcmUoKX1zdGF0aWMgY29weShlKXtyZXR1cm4gcyR1LmNvcHkoZSl9c3RhdGljIHJlbGVhc2UoZSl7cmV0dXJuIHMkdS5yZWxlYXNlKGUpfXN0YXRpYyBwcnVuZSgpe3MkdS5wcnVuZSgpO319Y29uc3QgcyR1PW5ldyBvJHEoMTAwKTtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmNsYXNzIHQkQSBleHRlbmRzIGUkdHtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5fc2V0PW5ldyBTZXQ7fWRlc3Ryb3koKXtzdXBlci5kZXN0cm95KCksdGhpcy5fc2V0PXAkMTcoKTt9YWNxdWlyZSguLi5lKXtjb25zdCBzPXN1cGVyLmFjcXVpcmUoLi4uZSk7cmV0dXJuIHRoaXMuX3NldC5kZWxldGUocyksc31yZWxlYXNlKGUpe2UmJiF0aGlzLl9zZXQuaGFzKGUpJiYoc3VwZXIucmVsZWFzZShlKSx0aGlzLl9zZXQuYWRkKGUpKTt9X2Rpc3Bvc2UoZSl7dGhpcy5fc2V0LmRlbGV0ZShlKSxzdXBlci5fZGlzcG9zZShlKTt9fVxuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuZnVuY3Rpb24gZSRxKCl7cmV0dXJuIGUkTC5xdWV1ZU1pY3JvdGFzaz9lJEwucXVldWVNaWNyb3Rhc2s6ZT0+e2UkTC5Qcm9taXNlLnJlc29sdmUoKS50aGVuKGUpO319Y29uc3QgdCR6PWUkcSgpLG4kSD1bXTtsZXQgciRuPVtdO2Z1bmN0aW9uIHUkRihvKXtuJEgucHVzaChvKSwxPT09biRILmxlbmd0aCYmdCR6KCgoKT0+e2Zvcihjb25zdCBlIG9mIHIkbillKCk7Y29uc3Qgbz1uJEguc2xpY2UoKTtuJEgubGVuZ3RoPTA7Zm9yKGNvbnN0IGUgb2YgbyllKCk7fSkpO30hZnVuY3Rpb24obyl7ZnVuY3Rpb24gZShvKXtyZXR1cm4gciRuLnB1c2gobykse3JlbW92ZSgpe3Ikbj1yJG4uZmlsdGVyKChlPT5lIT09bykpO319fW8uYmVmb3JlPWU7fSh1JEZ8fCh1JEY9e30pKTt2YXIgZiRxPXUkRjtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmNvbnN0IHQkeT0yOTtjbGFzcyBlJHB7Y29uc3RydWN0b3IoZSxzPXQkeSl7dGhpcy5uYW1lPWUsdGhpcy5fY291bnRlcj0wLHRoaXMuX2l0ZW1zPW5ldyBBcnJheShzKTt9cmVjb3JkKHQpe3RoaXMuX2l0ZW1zWysrdGhpcy5fY291bnRlciV0aGlzLl9pdGVtcy5sZW5ndGhdPXQ7fWdldCBtZWRpYW4oKXtyZXR1cm4gdGhpcy5faXRlbXMuc2xpY2UoKS5zb3J0KClbTWF0aC5mbG9vcih0aGlzLl9pdGVtcy5sZW5ndGgvMildfWdldCBhdmVyYWdlKCl7cmV0dXJuIHRoaXMuX2l0ZW1zLnJlZHVjZSgoKHQsZSk9PnQrZSksMCkvdGhpcy5faXRlbXMubGVuZ3RofWdldCBsYXN0KCl7cmV0dXJuIHRoaXMuX2l0ZW1zW3RoaXMuX2NvdW50ZXIldGhpcy5faXRlbXMubGVuZ3RoXX19XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5jbGFzcyB0JHh7Y29uc3RydWN0b3IodD0xKXt0aGlzLl9zZWVkPXQ7fXNldCBzZWVkKGUpe3RoaXMuX3NlZWQ9bnVsbD09ZT9NYXRoLnJhbmRvbSgpKnQkeC5fbTplO31nZXRJbnQoKXtyZXR1cm4gdGhpcy5fc2VlZD0odCR4Ll9hKnRoaXMuX3NlZWQrdCR4Ll9jKSV0JHguX20sdGhpcy5fc2VlZH1nZXRGbG9hdCgpe3JldHVybiB0aGlzLmdldEludCgpLyh0JHguX20tMSl9Z2V0SW50UmFuZ2UodCxlKXtyZXR1cm4gTWF0aC5yb3VuZCh0aGlzLmdldEZsb2F0UmFuZ2UodCxlKSl9Z2V0RmxvYXRSYW5nZShlLHMpe2NvbnN0IG49cy1lO3JldHVybiBlK3RoaXMuZ2V0SW50KCkvdCR4Ll9tKm59fXQkeC5fbT0yMTQ3NDgzNjQ3LHQkeC5fYT00ODI3MSx0JHguX2M9MDtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmZ1bmN0aW9uIGwkSCh0LHIsZSl7aWYodCRNKHQpJiZ0JE0ocikpcmV0dXJuICEwO2lmKHQkTSh0KXx8dCRNKHIpfHx0Lmxlbmd0aCE9PXIubGVuZ3RoKXJldHVybiAhMTtpZihlKXtmb3IobGV0IG49MDtuPHQubGVuZ3RoO24rKylpZighZSh0W25dLHJbbl0pKXJldHVybiAhMX1lbHNlIGZvcihsZXQgbj0wO248dC5sZW5ndGg7bisrKWlmKHRbbl0hPT1yW25dKXJldHVybiAhMTtyZXR1cm4gITB9Y29uc3QgZCR6PSEhQXJyYXkucHJvdG90eXBlLmZpbGw7ZnVuY3Rpb24gZyRoKG4sdCl7aWYoZCR6KXJldHVybiBuZXcgQXJyYXkobikuZmlsbCh0KTtjb25zdCByPW5ldyBBcnJheShuKTtmb3IobGV0IGU9MDtlPG47ZSsrKXJbZV09dDtyZXR1cm4gcn1mdW5jdGlvbiBtJHkobix0KXt2b2lkIDA9PT10JiYodD1uLG49MCk7Y29uc3Qgcj1uZXcgQXJyYXkodC1uKTtmb3IobGV0IGU9bjtlPHQ7ZSsrKXJbZS1uXT1lO3JldHVybiByfWNsYXNzIHckYXtjb25zdHJ1Y3Rvcigpe3RoaXMubGFzdD0wO319Y29uc3QgeSRtPW5ldyB3JGE7ZnVuY3Rpb24gYiRjKG4sdCxyLGUpe2U9ZXx8eSRtO2NvbnN0IG89TWF0aC5tYXgoMCxlLmxhc3QtMTApO2ZvcihsZXQgdT1vO3U8cjsrK3UpaWYoblt1XT09PXQpcmV0dXJuIGUubGFzdD11LHU7Y29uc3QgZj1NYXRoLm1pbihvLHIpO2ZvcihsZXQgdT0wO3U8ZjsrK3UpaWYoblt1XT09PXQpcmV0dXJuIGUubGFzdD11LHU7cmV0dXJuIC0xfWZ1bmN0aW9uIHYkYShuLHQscixlKXtjb25zdCBvPW51bGw9PXI/bi5sZW5ndGg6cixmPWIkYyhuLHQsbyxlKTtpZigtMSE9PWYpcmV0dXJuIG5bZl09bltvLTFdLG51bGw9PXImJm4ucG9wKCksdH1jb25zdCBBJDk9bmV3IFNldDtmdW5jdGlvbiBPJDIobix0LHI9bi5sZW5ndGgsZT10Lmxlbmd0aCxvLGYpe2lmKDA9PT1lfHwwPT09cilyZXR1cm4gcjtBJDkuY2xlYXIoKTtmb3IobGV0IGk9MDtpPGU7KytpKUEkOS5hZGQodFtpXSk7bz1vfHx5JG07Y29uc3QgdT1NYXRoLm1heCgwLG8ubGFzdC0xMCk7Zm9yKGxldCBpPXU7aTxyOysraSlpZihBJDkuaGFzKG5baV0pJiYoZiYmZi5wdXNoKG5baV0pLEEkOS5kZWxldGUobltpXSksbltpXT1uW3ItMV0sLS1yLC0taSwwPT09QSQ5LnNpemV8fDA9PT1yKSlyZXR1cm4gQSQ5LmNsZWFyKCkscjtmb3IobGV0IGk9MDtpPHU7KytpKWlmKEEkOS5oYXMobltpXSkmJihmJiZmLnB1c2gobltpXSksQSQ5LmRlbGV0ZShuW2ldKSxuW2ldPW5bci0xXSwtLXIsLS1pLDA9PT1BJDkuc2l6ZXx8MD09PXIpKXJldHVybiBBJDkuY2xlYXIoKSxyO3JldHVybiBBJDkuY2xlYXIoKSxyfWZ1bmN0aW9uIEMkOChuLHQpe2NvbnN0IHI9bi5pbmRleE9mKHQpO3JldHVybiAtMSE9PXI/KG4uc3BsaWNlKHIsMSksdCk6bnVsbH1cblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbnZhciBvJHA7IWZ1bmN0aW9uKG8pe2NvbnN0IHQ9KG8sdCxuLGUpPT57bGV0IGk9dCxyPXQ7Y29uc3QgbD1uPj4+MSxjPW9baS0xXTtmb3IoO3I8PWw7KXtyPWk8PDEscjxuJiZlKG9bci0xXSxvW3JdKTwwJiYrK3I7Y29uc3QgdD1vW3ItMV07aWYoZSh0LGMpPD0wKWJyZWFrO29baS0xXT10LGk9cjt9b1tpLTFdPWM7fSxuPShvLHQpPT5vPHQ/LTE6bz50PzE6MDtmdW5jdGlvbiBlKG8sZSxpLHIpe3ZvaWQgMD09PWUmJihlPTApLHZvaWQgMD09PWkmJihpPW8ubGVuZ3RoKSx2b2lkIDA9PT1yJiYocj1uKTtmb3IobGV0IG49aT4+PjE7bj5lO24tLSl0KG8sbixpLHIpO2NvbnN0IGw9ZSsxO2ZvcihsZXQgbj1pLTE7bj5lO24tLSl7Y29uc3QgaT1vW2VdO29bZV09b1tuXSxvW25dPWksdChvLGwsbixyKTt9fWZ1bmN0aW9uKmkobyxlLGkscil7dm9pZCAwPT09ZSYmKGU9MCksdm9pZCAwPT09aSYmKGk9by5sZW5ndGgpLHZvaWQgMD09PXImJihyPW4pO2ZvcihsZXQgbj1pPj4+MTtuPmU7bi0tKXQobyxuLGkscikseWllbGQ7Y29uc3QgbD1lKzE7Zm9yKGxldCBuPWktMTtuPmU7bi0tKXtjb25zdCBpPW9bZV07b1tlXT1vW25dLG9bbl09aSx0KG8sbCxuLHIpLHlpZWxkO319by5zb3J0PWUsby5pdGVyYWJsZVNvcnQ9aTt9KG8kcHx8KG8kcD17fSkpO3ZhciB0JHc9byRwO1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuY29uc3QgZSRvPTEuNSxsJEc9MS4xO2NsYXNzIG4kR3tjb25zdHJ1Y3RvcihoKXt0aGlzLmRhdGE9W10sdGhpcy5fbGVuZ3RoPTAsdGhpcy5fYWxsb2NhdG9yPXZvaWQgMCx0aGlzLl9kZWFsbG9jYXRvcj0oKT0+bnVsbCx0aGlzLl9zaHJpbms9KCk9Pnt9LHRoaXMuX2hpbnQ9bmV3IHckYSxoJiYoaC5pbml0aWFsU2l6ZSYmKHRoaXMuZGF0YT1uZXcgQXJyYXkoaC5pbml0aWFsU2l6ZSkpLGguYWxsb2NhdG9yJiYodGhpcy5fYWxsb2NhdG9yPWguYWxsb2NhdG9yKSx2b2lkIDAhPT1oLmRlYWxsb2NhdG9yJiYodGhpcy5fZGVhbGxvY2F0b3I9aC5kZWFsbG9jYXRvciksaC5zaHJpbmsmJih0aGlzLl9zaHJpbms9KCk9PnIkbSh0aGlzKSkpO310b0FycmF5KCl7cmV0dXJuIHRoaXMuZGF0YS5zbGljZSgwLHRoaXMubGVuZ3RoKX1nZXRJdGVtQXQodCl7aWYoISh0PDB8fHQ+PXRoaXMuX2xlbmd0aCkpcmV0dXJuIHRoaXMuZGF0YVt0XX1nZXQgbGVuZ3RoKCl7cmV0dXJuIHRoaXMuX2xlbmd0aH1zZXQgbGVuZ3RoKHQpe2lmKHQ+dGhpcy5fbGVuZ3RoKXtpZih0aGlzLl9hbGxvY2F0b3Ipe2Zvcig7dGhpcy5fbGVuZ3RoPHQ7KXRoaXMuZGF0YVt0aGlzLl9sZW5ndGgrK109dGhpcy5fYWxsb2NhdG9yKHRoaXMuZGF0YVt0aGlzLl9sZW5ndGhdKTtyZXR1cm59dGhpcy5fbGVuZ3RoPXQ7fWVsc2Uge2lmKHRoaXMuX2RlYWxsb2NhdG9yKWZvcihsZXQgaD10O2g8dGhpcy5fbGVuZ3RoOysraCl0aGlzLmRhdGFbaF09dGhpcy5fZGVhbGxvY2F0b3IodGhpcy5kYXRhW2hdKTt0aGlzLl9sZW5ndGg9dCx0aGlzLl9zaHJpbmsoKTt9fWNsZWFyKCl7dGhpcy5sZW5ndGg9MDt9cHJ1bmUoKXt0aGlzLmNsZWFyKCksdGhpcy5kYXRhPVtdO31wdXNoKHQpe3RoaXMuZGF0YVt0aGlzLl9sZW5ndGgrK109dDt9cHVzaEFycmF5KHQsaD10Lmxlbmd0aCl7Zm9yKGxldCBpPTA7aTxoO2krKyl0aGlzLmRhdGFbdGhpcy5fbGVuZ3RoKytdPXRbaV07fWZpbGwodCxoKXtmb3IobGV0IGk9MDtpPGg7aSsrKXRoaXMuZGF0YVt0aGlzLl9sZW5ndGgrK109dDt9cHVzaE5ldygpe3RoaXMuX2FsbG9jYXRvciYmKHRoaXMuZGF0YVt0aGlzLmxlbmd0aF09dGhpcy5fYWxsb2NhdG9yKHRoaXMuZGF0YVt0aGlzLmxlbmd0aF0pKTtjb25zdCB0PXRoaXMuZGF0YVt0aGlzLl9sZW5ndGhdO3JldHVybiArK3RoaXMuX2xlbmd0aCx0fXVuc2hpZnQodCl7dGhpcy5kYXRhLnVuc2hpZnQodCksdGhpcy5fbGVuZ3RoKyssciRtKHRoaXMpO31wb3AoKXtpZigwPT09dGhpcy5sZW5ndGgpcmV0dXJuO2NvbnN0IHQ9dGhpcy5kYXRhW3RoaXMubGVuZ3RoLTFdO3JldHVybiB0aGlzLmxlbmd0aD10aGlzLmxlbmd0aC0xLHRoaXMuX3NocmluaygpLHR9cmVtb3ZlKHQpe2NvbnN0IGk9YiRjKHRoaXMuZGF0YSx0LHRoaXMubGVuZ3RoLHRoaXMuX2hpbnQpO2lmKC0xIT09aSlyZXR1cm4gdGhpcy5kYXRhLnNwbGljZShpLDEpLHRoaXMubGVuZ3RoPXRoaXMubGVuZ3RoLTEsdH1yZW1vdmVVbm9yZGVyZWQodCl7Y29uc3QgaD12JGEodGhpcy5kYXRhLHQsdGhpcy5sZW5ndGgsdGhpcy5faGludCk7cmV0dXJuIHZvaWQgMCE9PWgmJih0aGlzLmxlbmd0aD10aGlzLmxlbmd0aC0xKSx0aGlzLl9zaHJpbmsoKSxofXJlbW92ZVVub3JkZXJlZEluZGV4KHQpe2lmKCEodD49dGhpcy5sZW5ndGh8fHQ8MCkpcmV0dXJuIHRoaXMuc3dhcEVsZW1lbnRzKHQsdGhpcy5sZW5ndGgtMSksdGhpcy5wb3AoKX1yZW1vdmVVbm9yZGVyZWRNYW55KHQsaD10Lmxlbmd0aCxpKXt0aGlzLmxlbmd0aD1PJDIodGhpcy5kYXRhLHQsdGhpcy5sZW5ndGgsaCx0aGlzLl9oaW50LGkpLHRoaXMuX3NocmluaygpO31mcm9udCgpe2lmKDAhPT10aGlzLmxlbmd0aClyZXR1cm4gdGhpcy5kYXRhWzBdfWJhY2soKXtpZigwIT09dGhpcy5sZW5ndGgpcmV0dXJuIHRoaXMuZGF0YVt0aGlzLmxlbmd0aC0xXX1zd2FwRWxlbWVudHModCxoKXt0Pj10aGlzLmxlbmd0aHx8aD49dGhpcy5sZW5ndGh8fHQ9PT1ofHwoW3RoaXMuZGF0YVt0XSx0aGlzLmRhdGFbaF1dPVt0aGlzLmRhdGFbaF0sdGhpcy5kYXRhW3RdXSk7fXNvcnQodCl7dCR3LnNvcnQodGhpcy5kYXRhLDAsdGhpcy5sZW5ndGgsdCk7fWl0ZXJhYmxlU29ydCh0KXtyZXR1cm4gdCR3Lml0ZXJhYmxlU29ydCh0aGlzLmRhdGEsMCx0aGlzLmxlbmd0aCx0KX1zb21lKHQsaCl7Zm9yKGxldCBpPTA7aTx0aGlzLmxlbmd0aDsrK2kpaWYodC5jYWxsKGgsdGhpcy5kYXRhW2ldLGksdGhpcy5kYXRhKSlyZXR1cm4gITA7cmV0dXJuICExfWZpbHRlckluUGxhY2UodCxoKXtsZXQgaT0wO2ZvcihsZXQgcz0wO3M8dGhpcy5fbGVuZ3RoOysrcyl7Y29uc3QgYT10aGlzLmRhdGFbc107dC5jYWxsKGgsYSxzLHRoaXMuZGF0YSkmJih0aGlzLmRhdGFbc109dGhpcy5kYXRhW2ldLHRoaXMuZGF0YVtpXT1hLGkrKyk7fWlmKHRoaXMuX2RlYWxsb2NhdG9yKWZvcihsZXQgcz1pO3M8dGhpcy5fbGVuZ3RoO3MrKyl0aGlzLmRhdGFbc109dGhpcy5fZGVhbGxvY2F0b3IodGhpcy5kYXRhW3NdKTtyZXR1cm4gdGhpcy5fbGVuZ3RoPWksdGhpcy5fc2hyaW5rKCksdGhpc31mb3JBbGwodCxoKXtjb25zdCBpPXRoaXMubGVuZ3RoLHM9dGhpcy5kYXRhO2ZvcihsZXQgYT0wO2E8aTsrK2EpdC5jYWxsKGgsc1thXSxhLHMpO31tYXAodCxoKXtjb25zdCBpPW5ldyBBcnJheSh0aGlzLmxlbmd0aCk7Zm9yKGxldCBzPTA7czx0aGlzLmxlbmd0aDsrK3MpaVtzXT10LmNhbGwoaCx0aGlzLmRhdGFbc10scyx0aGlzLmRhdGEpO3JldHVybiBpfXJlZHVjZSh0LGgpe2xldCBpPWg7Zm9yKGxldCBzPTA7czx0aGlzLmxlbmd0aDsrK3MpaT10KGksdGhpcy5kYXRhW3NdLHMsdGhpcy5kYXRhKTtyZXR1cm4gaX1oYXModCl7Y29uc3QgaD10aGlzLmxlbmd0aCxpPXRoaXMuZGF0YTtmb3IobGV0IHM9MDtzPGg7KytzKWlmKGlbc109PT10KXJldHVybiAhMDtyZXR1cm4gITF9fWZ1bmN0aW9uIHIkbSh0KXt0LmRhdGEubGVuZ3RoPmUkbyp0Lmxlbmd0aCYmKHQuZGF0YS5sZW5ndGg9TWF0aC5mbG9vcih0Lmxlbmd0aCpsJEcpKTt9XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5mdW5jdGlvbiB0JHYoZSl7cmV0dXJuIHtzZXRUaW1lb3V0Oih0LG8pPT57Y29uc3Qgcj1lLnNldFRpbWVvdXQodCxvKTtyZXR1cm4ge3JlbW92ZTooKT0+ZS5jbGVhclRpbWVvdXQocil9fX19dmFyIG8kbz10JHYoZSRMKTtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmZ1bmN0aW9uIHMkdCh0KXtyZXR1cm4gUHJvbWlzZS5hbGwodCl9ZnVuY3Rpb24gbCRGKHQpe3JldHVybiBuZXcgUHJvbWlzZSgoKG4sZSk9Pnt0cnl7dChuLGUpO31jYXRjaChyKXtQcm9taXNlLnJlc29sdmUoKS50aGVuKCgoKT0+ZShyKSkpO319KSl9ZnVuY3Rpb24gbSR4KHQ9XCJBYm9ydGVkXCIpe3JldHVybiBuZXcgcyR4KFwiQWJvcnRFcnJvclwiLHQpfWZ1bmN0aW9uIGgkdSgpe3JldHVybiBuZXcgQWJvcnRDb250cm9sbGVyfWZ1bmN0aW9uIGEkSSh0KXtpZihiJGIodCkpdGhyb3cgbSR4KCl9ZnVuY3Rpb24gcCRfKG4pe3JldHVybiByJEEobik/XCJhYm9ydGVkXCJpbiBuP246bi5zaWduYWw6bn1mdW5jdGlvbiBiJGIobil7Y29uc3QgZT1wJF8obik7cmV0dXJuIHIkQShlKSYmZS5hYm9ydGVkfWZ1bmN0aW9uIHckOSh0KXtpZihnJGcodCkpdGhyb3cgdH1mdW5jdGlvbiBqJGYodCl7aWYoIWckZyh0KSl0aHJvdyB0fWZ1bmN0aW9uIHYkOSh0LGUpe2NvbnN0IHI9cCRfKHQpO2lmKCF0JE0ocikpe2lmKCFyLmFib3J0ZWQpcmV0dXJuIHQkRShyLFwiYWJvcnRcIiwoKCk9PmUoKSkpO2UoKTt9fWZ1bmN0aW9uIFAkNyh0LGUpe2NvbnN0IHI9cCRfKHQpO2lmKCF0JE0ocikpcmV0dXJuIGEkSShyKSx0JEUocixcImFib3J0XCIsKCgpPT5lKG0keCgpKSkpfWZ1bmN0aW9uIGQkeSh0LHIpe2NvbnN0IG89cCRfKHIpO3JldHVybiB0JE0obyk/dDpuZXcgUHJvbWlzZSgoKG4sbyk9PntsZXQgaT12JDkociwoKCk9Pm8obSR4KCkpKSk7Y29uc3QgdT0oKT0+aT1zJEcoaSk7dC50aGVuKHUsdSksdC50aGVuKG4sbyk7fSkpfWZ1bmN0aW9uIGckZyh0KXtyZXR1cm4gdCYmXCJBYm9ydEVycm9yXCI9PT10Lm5hbWV9ZnVuY3Rpb24geSRsKHQpe3JldHVybiB0LmNhdGNoKCh0PT57aWYoIWckZyh0KSl0aHJvdyB0fSkpfWZ1bmN0aW9uIEUkMygpe2xldCB0PW51bGw7Y29uc3Qgbj1uZXcgUHJvbWlzZSgoKG4sZSk9Pnt0PXtwcm9taXNlOnZvaWQgMCxyZXNvbHZlOm4scmVqZWN0OmV9O30pKTtyZXR1cm4gdC5wcm9taXNlPW4sdH1mdW5jdGlvbiBBJDgodCl7aWYoIXQpcmV0dXJuO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQuZm9yRWFjaCl7Y29uc3Qgbj1PYmplY3Qua2V5cyh0KTtyZXR1cm4gQSQ4KG4ubWFwKChuPT50W25dKSkpLnRoZW4oKHQ9Pntjb25zdCBlPXt9O3JldHVybiBuLmZvckVhY2goKChuLHIpPT5lW25dPXRbcl0pKSxlfSkpfWNvbnN0IG49dDtyZXR1cm4gbCRGKCh0PT57Y29uc3QgZT1bXTtsZXQgcj1uLmxlbmd0aDswPT09ciYmdChlKSxuLmZvckVhY2goKG49Pntjb25zdCBvPXtwcm9taXNlOm58fFByb21pc2UucmVzb2x2ZShuKX07ZS5wdXNoKG8pLG8ucHJvbWlzZS50aGVuKCh0PT57by52YWx1ZT10O30pKS5jYXRjaCgodD0+e28uZXJyb3I9dDt9KSkudGhlbigoKCk9PnstLXIsMD09PXImJnQoZSk7fSkpO30pKTt9KSl9ZnVuY3Rpb24gTCQ2KHQpe3JldHVybiBQcm9taXNlLnJlamVjdCh0KX1mdW5jdGlvbiB4JGQodCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSh0KX1mdW5jdGlvbiBDJDcodCxuLGUpe2NvbnN0IHI9aCR1KCk7cmV0dXJuIHYkOShlLCgoKT0+ci5hYm9ydCgpKSksbmV3IFByb21pc2UoKChlLG8pPT57bGV0IGk9c2V0VGltZW91dCgoKCk9PntpPTAsZShuKTt9KSx0KTt2JDkociwoKCk9PntpJiYoY2xlYXJUaW1lb3V0KGkpLG8obSR4KCkpKTt9KSk7fSkpfWZ1bmN0aW9uIFUkMih0KXtyZXR1cm4gdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgdC50aGVufWZ1bmN0aW9uIHEkNCh0KXtyZXR1cm4gdCYmXCJvYmplY3RcIj09dHlwZW9mIHQmJlwidGhlblwiaW4gdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgdC50aGVuP3Q6UHJvbWlzZS5yZXNvbHZlKHQpfWZ1bmN0aW9uIHokNSh0LG49LTEpe2xldCBlLG8saSx1LGM9bnVsbDtjb25zdCBzPSguLi5mKT0+e2lmKGUpe289Zix1JiZ1LnJlamVjdChtJHgoKSksdT1FJDMoKTtjb25zdCB0PW0kRih1LnByb21pc2UpO2lmKGMpe2NvbnN0IHQ9YztjPW51bGwsdC5hYm9ydCgpO31yZXR1cm4gdH1pZihpPXV8fEUkMygpLHU9bnVsbCxuPjApe2NvbnN0IHI9aCR1KCk7ZT1xJDQodCguLi5mLHIuc2lnbmFsKSk7Y29uc3Qgbz1lO0MkNyhuKS50aGVuKCgoKT0+e2U9PT1vJiYodT9yLmFib3J0KCk6Yz1yKTt9KSk7fWVsc2UgZT0xLGU9cSQ0KHQoLi4uZikpO2NvbnN0IGw9KCk9Pntjb25zdCB0PW87bz1pPWU9Yz1udWxsLG51bGwhPXQmJnMoLi4udCk7fSxhPWUscD1pO3JldHVybiBhLnRoZW4obCxsKSxhLnRoZW4ocC5yZXNvbHZlLHAucmVqZWN0KSxtJEYocC5wcm9taXNlKX07cmV0dXJuIHN9ZnVuY3Rpb24gQiQ0KCl7bGV0IHQsbjtjb25zdCBlPW5ldyBQcm9taXNlKCgoZSxyKT0+e3Q9ZSxuPXI7fSkpLHI9bj0+e3Qobik7fTtyZXR1cm4gci5yZXNvbHZlPW49PnQobiksci5yZWplY3Q9dD0+bih0KSxyLnRpbWVvdXQ9KHQsbik9Pm8kby5zZXRUaW1lb3V0KCgoKT0+ci5yZWplY3QobikpLHQpLHIucHJvbWlzZT1lLHJ9ZnVuY3Rpb24gRiQ0KHQpe2xldCBuPWgkdSgpO2NvbnN0IGU9dChuLnNpZ25hbCk7bGV0IHI9e3Byb21pc2U6ZSxmaW5pc2hlZDohMSxhYm9ydDooKT0+e24mJihuLmFib3J0KCksbj1udWxsKTt9fTtjb25zdCBvPSgpPT57ciYmKHIuZmluaXNoZWQ9ITAscj1udWxsKSxuPW51bGw7fTtyZXR1cm4gZS50aGVuKG8sbykscn1cblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmNsYXNzIGkkU3tjb25zdHJ1Y3RvcihlKXt0aGlzLmNhbGxiYWNrPWUsdGhpcy5pc0FjdGl2ZT0hMDt9cmVtb3ZlKCl7dGhpcy5pc0FjdGl2ZT0hMTt9fWxldCBtJHc9MDtjb25zdCBwJFo9e3RpbWU6MCxkZWx0YVRpbWU6MCxlbGFwc2VkRnJhbWVUaW1lOjAsZnJhbWVEdXJhdGlvbjowfSx1JEU9W1wicHJlcGFyZVwiLFwicHJlUmVuZGVyXCIsXCJyZW5kZXJcIixcInBvc3RSZW5kZXJcIixcInVwZGF0ZVwiXSxmJHA9W10saCR0PW5ldyBuJEc7Y29uc3QgdyQ4PXtmcmFtZVRhc2tzOmgkdCx3aWxsRGlzcGF0Y2g6ITEsY2xlYXJGcmFtZVRhc2tzOlQkNSxkaXNwYXRjaDpfJDQsZXhlY3V0ZUZyYW1lVGFza3M6eCRjfTtmdW5jdGlvbiBrJDgoZSl7Y29uc3Qgcj1uZXcgaSRTKGUpO3JldHVybiBmJHAucHVzaChyKSx3JDgud2lsbERpc3BhdGNofHwodyQ4LndpbGxEaXNwYXRjaD0hMCxmJHEoXyQ0KSkscn1mdW5jdGlvbiBUJDUoZT0hMSl7aCR0LmZvckFsbCgoZT0+e2UucmVtb3ZlZD0hMDt9KSksZSYmZyRmKCk7fWZ1bmN0aW9uIHgkYyhlKXtjb25zdCB0PWUtbSR3O20kdz1lO2NvbnN0IHI9MWUzLzYwLHM9TWF0aC5tYXgoMCx0LXIpO2ZvcihsZXQgbj0wO248dSRFLmxlbmd0aDtuKyspe2NvbnN0IG89cGVyZm9ybWFuY2Uubm93KCksYT11JEVbbl07aCR0LmZvckFsbCgobz0+e3ZhciBjO2lmKG8ucGF1c2VkfHxvLnJlbW92ZWQpcmV0dXJuOzA9PT1uJiZvLnRpY2tzKys7by5waGFzZXNbYV0mJihwJFoudGltZT1lLHAkWi5kZWx0YVRpbWU9MD09PW8udGlja3M/MDp0LHAkWi5lbGFwc2VkRnJhbWVUaW1lPXBlcmZvcm1hbmNlLm5vdygpLWUscCRaLmZyYW1lRHVyYXRpb249ci1zLG51bGw9PShjPW8ucGhhc2VzW2FdKXx8Yy5jYWxsKG8scCRaKSk7fSkpLHkka1tuXS5yZWNvcmQocGVyZm9ybWFuY2Uubm93KCktbyk7fWckZigpLE0kOS5yZWNvcmQocGVyZm9ybWFuY2Uubm93KCktZSk7fWNvbnN0IEQkNT1uZXcgbiRHO2Z1bmN0aW9uIGckZigpe2gkdC5mb3JBbGwoKGU9PntlLnJlbW92ZWQmJkQkNS5wdXNoKGUpO30pKSxoJHQucmVtb3ZlVW5vcmRlcmVkTWFueShEJDUuZGF0YSxEJDUubGVuZ3RoKSxEJDUuY2xlYXIoKTt9ZnVuY3Rpb24gXyQ0KCl7Zm9yKDtmJHAubGVuZ3RoOyl7Y29uc3QgdD1tJEYoZiRwLnNoaWZ0KCkpO3QuaXNBY3RpdmUmJnQuY2FsbGJhY2soKTt9dyQ4LndpbGxEaXNwYXRjaD0hMTt9ZnVuY3Rpb24gYiRhKGU9MSxyKXtjb25zdCBzPUIkNCgpLGM9KCk9PntiJGIocik/cy5yZWplY3QobSR4KCkpOjA9PT1lP3MoKTooLS1lLGYkcSgoKCk9PmMoKSkpKTt9O3JldHVybiBjKCkscy5wcm9taXNlfWNvbnN0IHkkaz11JEUubWFwKChlPT5uZXcgZSRwKGUpKSksTSQ5PW5ldyBlJHAoXCJ0b3RhbFwiKTtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmNsYXNzIHMkc3tjb25zdHJ1Y3RvcihzKXt0aGlzLm5vdGlmeT1zLHRoaXMuX2FjY2Vzc2VkPW5ldyBTZXQsdGhpcy5faGFuZGxlcz1bXTt9ZGVzdHJveSgpe3RoaXMuX2FjY2Vzc2VkLmNsZWFyKCksdGhpcy5jbGVhcigpO31vbk9ic2VydmFibGVBY2Nlc3NlZChzKXt0aGlzLl9hY2Nlc3NlZC5hZGQocyk7fW9uVHJhY2tpbmdFbmQoKXtmb3IoY29uc3QgcyBvZiB0aGlzLl9hY2Nlc3NlZCl0aGlzLl9oYW5kbGVzLnB1c2gocy5vYnNlcnZlKHRoaXMpKTt0aGlzLl9hY2Nlc3NlZC5jbGVhcigpO31jbGVhcigpe2Zvcihjb25zdCBzIG9mIHRoaXMuX2hhbmRsZXMpcy5yZW1vdmUoKTt0aGlzLl9oYW5kbGVzLmxlbmd0aD0wO319XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5jb25zdCBlJG49e3J1bkltbWVkaWF0ZWx5OiExfTtmdW5jdGlvbiByJGwocix1LGw9ZSRuKXtsZXQgbz1uZXcgcyRzKG0pLGk9bnVsbCxjPSExO2Z1bmN0aW9uIG0oKXtpZighb3x8YylyZXR1cm47Y29uc3QgdD1pO28uY2xlYXIoKSxjPSEwLGk9YSRKKG8sciksYz0hMSx1KGksdCk7fWZ1bmN0aW9uIGYoKXtvJiYoby5kZXN0cm95KCksbz1udWxsLGk9bnVsbCk7fXJldHVybiBjPSEwLGk9YSRKKG8sciksYz0hMSxsLnJ1bkltbWVkaWF0ZWx5JiZ1KGksaSkse3JlbW92ZTpmfX1mdW5jdGlvbiBvJG4oZSxyKXtsZXQgdT1uZXcgcyRzKG8pLGw9bnVsbDtmdW5jdGlvbiBvKCl7cihsLGMpO31mdW5jdGlvbiBpKCl7dSYmKHUuZGVzdHJveSgpLHU9bnVsbCksbD1udWxsO31mdW5jdGlvbiBjKCl7cmV0dXJuIHU/KHUuY2xlYXIoKSxsPWEkSih1LGUpLGwpOm51bGx9cmV0dXJuIGMoKSx7cmVtb3ZlOml9fVxuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuY2xhc3MgYSRIe2NvbnN0cnVjdG9yKCl7dGhpcy51aWQ9MCx0aGlzLnRhcmdldD1udWxsLHRoaXMucGF0aD1udWxsLHRoaXMub2xkVmFsdWU9bnVsbCx0aGlzLmNhbGxiYWNrPW51bGwsdGhpcy5nZXRWYWx1ZT1udWxsLHRoaXMucmVtb3ZlZD0hMSx0aGlzLnByb3BlcnR5UGF0aD1udWxsO31hY3F1aXJlKGUsbyxyLGwsbil7dGhpcy50YXJnZXQ9ZSx0aGlzLnBhdGg9byx0aGlzLm9sZFZhbHVlPXIsdGhpcy5jYWxsYmFjaz1sLHRoaXMuZ2V0VmFsdWU9bix0aGlzLnByb3BlcnR5UGF0aD1sJE0obyksdGhpcy51aWQ9KythJEgudWlkLHRoaXMucmVtb3ZlZD0hMTt9cmVsZWFzZSgpe3RoaXMudGFyZ2V0PXRoaXMucGF0aD10aGlzLnByb3BlcnR5UGF0aD10aGlzLmNhbGxiYWNrPXRoaXMub2xkVmFsdWU9bnVsbCx0aGlzLnVpZD0rK2EkSC51aWQsdGhpcy5yZW1vdmVkPSEwO319YSRILnBvb2w9bmV3IHQkQShhJEgpLGEkSC51aWQ9MDtjb25zdCBkJHg9bmV3IG8kcSxoJHM9bmV3IFNldDtsZXQgZiRvLG0kdj1kJHguYWNxdWlyZSgpO2Z1bmN0aW9uIHAkWShlKXtoJHMuaGFzKGUpP20kdi5zcGxpY2UobSR2LmluZGV4T2YoZSksMSk6aCRzLmFkZChlKSxtJHYucHVzaChlKSxmJG98fChmJG89ayQ4KGokZSkpO31mdW5jdGlvbiBnJGUoZSl7aWYoZS5yZW1vdmVkKXJldHVybjtjb25zdHtjYWxsYmFjazp0LHBhdGg6byxvbGRWYWx1ZTpyLHRhcmdldDpsfT1lLG49ZS5nZXRWYWx1ZSgpO18kMyhyLG4pJiYoZS5vbGRWYWx1ZT1uLHQuY2FsbChsLG4scixvLGwpKTt9ZnVuY3Rpb24gXyQzKHQsbyl7cmV0dXJuICFsJFAodCxvKX1mdW5jdGlvbiBWJDEoZSl7Zm9yKGxldCB0PTA7dDxtJHYubGVuZ3RoO3QrKyl7Y29uc3Qgbz1tJHZbdF07by50YXJnZXQ9PT1lJiYoby5yZW1vdmVkPSEwKTt9fWZ1bmN0aW9uIGokZSgpe2xldCBlPTEwO2Zvcig7ZiRvJiZlLS07KXtmJG89bnVsbDtjb25zdCBlPW0kdjttJHY9ZCR4LmFjcXVpcmUoKSxoJHMuY2xlYXIoKTtjb25zdCB0PWQkeC5hY3F1aXJlKCk7Zm9yKGNvbnN0IG8gb2YgZSl7Y29uc3QgZT1vLnVpZDtnJGUobyksZT09PW8udWlkJiZvLnJlbW92ZWQmJnQucHVzaChvKTt9Zm9yKGxldCBvPTA7bzxtJHYubGVuZ3RoO28rKyl7Y29uc3QgZT1tJHZbb107ZS5yZW1vdmVkJiYodC5wdXNoKGUpLGgkcy5kZWxldGUoZSksbSR2LnNwbGljZShvLDEpLG8tPTEpO31mb3IobGV0IG89MDtvPHQubGVuZ3RoO28rKylhJEgucG9vbC5yZWxlYXNlKHRbb10pO2QkeC5yZWxlYXNlKGUpLGQkeC5yZWxlYXNlKHQpLHkkai5mb3JFYWNoKChlPT5lKCkpKTt9fWNvbnN0IHkkaj1uZXcgU2V0O2Z1bmN0aW9uIGskNyhlLHQsbil7bGV0IHM9eSRzKGUsdCxuLCgoZSx0LG8pPT57bGV0IG4saSxjPW8kbigoKCk9Pm8kRShlLHQpKSwoKHIsbCk9PntlLl9fYWNjZXNzb3JfXy5kZXN0cm95ZWR8fG4mJm4udWlkIT09aT9zLnJlbW92ZSgpOihufHwobj1hJEgucG9vbC5hY3F1aXJlKGUsdCxyLG8sbCksaT1uLnVpZCkscCRZKG4pKTt9KSk7cmV0dXJuIHtyZW1vdmU6aCR6KChmdW5jdGlvbigpe2MucmVtb3ZlKCksbiYmKG4udWlkIT09aXx8bi5yZW1vdmVkfHwobi5yZW1vdmVkPSEwLHAkWShuKSksbj1udWxsKSxzPWM9bnVsbDt9KSl9fSkpO3JldHVybiBzfWZ1bmN0aW9uIHEkMyhlLHQscil7Y29uc3Qgbj15JHMoZSx0LHIsKChlLHQsbyk9PntsZXQgcj0hMTtyZXR1cm4gciRsKCgoKT0+byRFKGUsdCkpLCgobCxzKT0+e2UuX19hY2Nlc3Nvcl9fLmRlc3Ryb3llZD9uLnJlbW92ZSgpOnJ8fChyPSEwLF8kMyhzLGwpJiZvLmNhbGwoZSxsLHMsdCxlKSxyPSExKTt9KSl9KSk7cmV0dXJuIG59ZnVuY3Rpb24gUCQ2KGUsdCxvLHI9ITEpe3JldHVybiAhZS5fX2FjY2Vzc29yX198fGUuX19hY2Nlc3Nvcl9fLmRlc3Ryb3llZD97cmVtb3ZlKCl7fX06cj9xJDMoZSx0LG8pOmskNyhlLHQsbyl9XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5mdW5jdGlvbiBwJFgodCl7aWYobnVsbD09dClyZXR1cm4ge3ZhbHVlOnR9O2lmKEFycmF5LmlzQXJyYXkodCkpcmV0dXJuIHt0eXBlOlt0WzBdXSx2YWx1ZTpudWxsfTtzd2l0Y2godHlwZW9mIHQpe2Nhc2VcIm9iamVjdFwiOnJldHVybiB0LmNvbnN0cnVjdG9yJiZ0LmNvbnN0cnVjdG9yLl9fYWNjZXNzb3JNZXRhZGF0YV9ffHx0IGluc3RhbmNlb2YgRGF0ZT97dHlwZTp0LmNvbnN0cnVjdG9yLHZhbHVlOnR9OnQ7Y2FzZVwiYm9vbGVhblwiOnJldHVybiB7dHlwZTpCb29sZWFuLHZhbHVlOnR9O2Nhc2VcInN0cmluZ1wiOnJldHVybiB7dHlwZTpTdHJpbmcsdmFsdWU6dH07Y2FzZVwibnVtYmVyXCI6cmV0dXJuIHt0eXBlOk51bWJlcix2YWx1ZTp0fTtjYXNlXCJmdW5jdGlvblwiOnJldHVybiB7dHlwZTp0LHZhbHVlOm51bGx9O2RlZmF1bHQ6cmV0dXJufX1jbGFzcyB1JER7Y29uc3RydWN0b3IoLi4udCl7aWYodGhpcy5jb25zdHJ1Y3Rvcj09PXUkRCl0aHJvdyBuZXcgRXJyb3IoXCJbYWNjZXNzb3JdIGNhbm5vdCBpbnN0YW50aWF0ZSBBY2Nlc3Nvci4gVGhpcyBjYW4gYmUgZml4ZWQgYnkgY3JlYXRpbmcgYSBzdWJjbGFzcyBvZiBBY2Nlc3NvclwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcIl9fYWNjZXNzb3JfX1wiLHtlbnVtZXJhYmxlOiExLHZhbHVlOm5ldyB5JG4odGhpcyl9KSx0Lmxlbmd0aD4wJiZ0aGlzLm5vcm1hbGl6ZUN0b3JBcmdzJiYodGhpcy5fX2FjY2Vzc29yX18uY3RvckFyZ3M9dGhpcy5ub3JtYWxpemVDdG9yQXJncy5hcHBseSh0aGlzLHQpKTt9c3RhdGljIGNyZWF0ZVN1YmNsYXNzKHQ9e30pe2lmKEFycmF5LmlzQXJyYXkodCkpdGhyb3cgbmV3IEVycm9yKFwiTXVsdGktaW5oZXJpdGFuY2UgdW5zdXBwb3J0ZWQgc2luY2UgNC4xNlwiKTtjb25zdHtwcm9wZXJ0aWVzOnIsZGVjbGFyZWRDbGFzczpzLGNvbnN0cnVjdG9yOmN9PXQ7ZGVsZXRlIHQuZGVjbGFyZWRDbGFzcyxkZWxldGUgdC5wcm9wZXJ0aWVzLGRlbGV0ZSB0LmNvbnN0cnVjdG9yO2NvbnN0IG49dGhpcztjbGFzcyBhIGV4dGVuZHMgbntjb25zdHJ1Y3RvciguLi50KXtzdXBlciguLi50KSx0aGlzLmluaGVyaXRlZD1udWxsLGMmJmMuYXBwbHkodGhpcyx0KTt9fW4kUShhLnByb3RvdHlwZSk7Zm9yKGNvbnN0IGUgaW4gdCl7Y29uc3Qgcj10W2VdO2EucHJvdG90eXBlW2VdPVwiZnVuY3Rpb25cIj09dHlwZW9mIHI/ZnVuY3Rpb24oLi4udCl7Y29uc3Qgcz10aGlzLmluaGVyaXRlZDtsZXQgbzt0aGlzLmluaGVyaXRlZD1mdW5jdGlvbiguLi50KXtpZihuLnByb3RvdHlwZVtlXSlyZXR1cm4gbi5wcm90b3R5cGVbZV0uYXBwbHkodGhpcyx0KX07dHJ5e289ci5hcHBseSh0aGlzLHQpO31jYXRjaChjKXt0aHJvdyB0aGlzLmluaGVyaXRlZD1zLGN9cmV0dXJuIHRoaXMuaW5oZXJpdGVkPXMsb306dFtlXTt9Zm9yKGNvbnN0IGUgaW4gcil7Y29uc3QgdD1wJFgocltlXSk7eSRyKHQpKGEucHJvdG90eXBlLGUpO31yZXR1cm4gaSRYKHMpKGEpfXBvc3RzY3JpcHQodCl7Y29uc3Qgcj10aGlzLl9fYWNjZXNzb3JfXyxlPXIuY3RvckFyZ3N8fHQ7ci5pbml0aWFsaXplKCksZSYmKHRoaXMuc2V0KGUpLHIuY3RvckFyZ3M9bnVsbCksci5jb25zdHJ1Y3RlZCgpLHRoaXMuaW5pdGlhbGl6ZSgpO31pbml0aWFsaXplKCl7fWRlc3Ryb3koKXt0aGlzLmRlc3Ryb3llZHx8KFYkMSh0aGlzKSx0aGlzLl9fYWNjZXNzb3JfXy5kZXN0cm95KCkpO31nZXQgaW5pdGlhbGl6ZWQoKXtyZXR1cm4gdGhpcy5fX2FjY2Vzc29yX18mJnRoaXMuX19hY2Nlc3Nvcl9fLmluaXRpYWxpemVkfHwhMX1nZXQgY29uc3RydWN0ZWQoKXtyZXR1cm4gdGhpcy5fX2FjY2Vzc29yX18mJjI9PT10aGlzLl9fYWNjZXNzb3JfXy5saWZlY3ljbGV8fCExfWdldCBkZXN0cm95ZWQoKXtyZXR1cm4gdGhpcy5fX2FjY2Vzc29yX18mJnRoaXMuX19hY2Nlc3Nvcl9fLmRlc3Ryb3llZHx8ITF9Y29tbWl0UHJvcGVydHkodCl7dGhpcy5nZXQodCk7fWdldCh0KXtyZXR1cm4gdSRMKHRoaXMsdCl9aGFzT3duUHJvcGVydHkodCl7cmV0dXJuIHRoaXMuX19hY2Nlc3Nvcl9fP3RoaXMuX19hY2Nlc3Nvcl9fLmhhcyh0KTpPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGhpcyx0KX1pc0luc3RhbmNlT2Yocil7cmV0dXJuIHQkSihuJFQuZ2V0TG9nZ2VyKHRoaXMuZGVjbGFyZWRDbGFzcyksXCJpc0luc3RhbmNlT2ZcIix7cmVwbGFjZW1lbnQ6XCJVc2UgaW5zdGFuY2VvZiBkaXJlY3RseVwiLHZlcnNpb246XCI0LjE2XCJ9KSx0aGlzIGluc3RhbmNlb2Ygcn1rZXlzKCl7cmV0dXJuIHRoaXMuX19hY2Nlc3Nvcl9fP3RoaXMuX19hY2Nlc3Nvcl9fLmtleXMoKTpbXX1zZXQodCxyKXtyZXR1cm4gdCRLKHRoaXMsdCxyKSx0aGlzfXdhdGNoKHQscixlKXtyZXR1cm4gUCQ2KHRoaXMsdCxyLGUpfV9jbGVhck92ZXJyaWRlKHQpe3JldHVybiB0aGlzLl9fYWNjZXNzb3JfXy5jbGVhck92ZXJyaWRlKHQpfV9vdmVycmlkZSh0LHIpe3JldHVybiB0aGlzLl9fYWNjZXNzb3JfXy5vdmVycmlkZSh0LHIpfV9pc092ZXJyaWRkZW4odCl7cmV0dXJuIHRoaXMuX19hY2Nlc3Nvcl9fLmlzT3ZlcnJpZGRlbih0KX1ub3RpZnlDaGFuZ2UodCl7dGhpcy5fX2FjY2Vzc29yX18ucHJvcGVydHlJbnZhbGlkYXRlZCh0KTt9X2dldCh0KXtyZXR1cm4gdGhpcy5fX2FjY2Vzc29yX18uaW50ZXJuYWxHZXQodCl9X3NldCh0LHIpe3JldHVybiB0aGlzLl9fYWNjZXNzb3JfXy5pbnRlcm5hbFNldCh0LHIpLHRoaXN9fVxuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuY2xhc3MgaSRSe2NvbnN0cnVjdG9yKCl7dGhpcy5fZW1pdHRlcj1uZXcgaSRSLkV2ZW50RW1pdHRlcih0aGlzKTt9ZW1pdCh0LGUpe3JldHVybiB0aGlzLl9lbWl0dGVyLmVtaXQodCxlKX1vbih0LGUpe3JldHVybiB0aGlzLl9lbWl0dGVyLm9uKHQsZSl9b25jZSh0LGUpe3JldHVybiB0aGlzLl9lbWl0dGVyLm9uY2UodCxlKX1oYXNFdmVudExpc3RlbmVyKHQpe3JldHVybiB0aGlzLl9lbWl0dGVyLmhhc0V2ZW50TGlzdGVuZXIodCl9fSFmdW5jdGlvbihuKXtjbGFzcyBve2NvbnN0cnVjdG9yKHQ9bnVsbCl7dGhpcy50YXJnZXQ9dCx0aGlzLl9saXN0ZW5lcnNNYXA9bnVsbDt9Y2xlYXIoKXt0aGlzLl9saXN0ZW5lcnNNYXAmJnRoaXMuX2xpc3RlbmVyc01hcC5jbGVhcigpO31lbWl0KHQsZSl7Y29uc3Qgcz10aGlzLl9saXN0ZW5lcnNNYXAmJnRoaXMuX2xpc3RlbmVyc01hcC5nZXQodCk7aWYoIXMpcmV0dXJuICExO2NvbnN0IHI9dGhpcy50YXJnZXR8fHRoaXM7cmV0dXJuIFsuLi5zXS5mb3JFYWNoKCh0PT57dC5jYWxsKHIsZSk7fSkpLHMubGVuZ3RoPjB9b24odCxzKXtpZihBcnJheS5pc0FycmF5KHQpKXtjb25zdCByPXQubWFwKCh0PT50aGlzLm9uKHQscykpKTtyZXR1cm4gciR4KHIpfWlmKHQuaW5kZXhPZihcIixcIik+LTEpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkV2ZW50ZWQub24oKSB3aXRoIGEgY29tbWEgZGVsaW1pdGVkIHN0cmluZyBvZiBldmVudCB0eXBlcyBpcyBub3Qgc3VwcG9ydGVkXCIpO3RoaXMuX2xpc3RlbmVyc01hcHx8KHRoaXMuX2xpc3RlbmVyc01hcD1uZXcgTWFwKTtjb25zdCByPXRoaXMuX2xpc3RlbmVyc01hcC5nZXQodCl8fFtdO3JldHVybiByLnB1c2gocyksdGhpcy5fbGlzdGVuZXJzTWFwLnNldCh0LHIpLHtyZW1vdmU6KCk9Pntjb25zdCBlPXRoaXMuX2xpc3RlbmVyc01hcCYmdGhpcy5fbGlzdGVuZXJzTWFwLmdldCh0KXx8W10scj1lLmluZGV4T2Yocyk7cj49MCYmZS5zcGxpY2UociwxKTt9fX1vbmNlKHQsZSl7Y29uc3Qgcz10aGlzLm9uKHQsKHQ9PntzLnJlbW92ZSgpLGUuY2FsbChudWxsLHQpO30pKTtyZXR1cm4gc31oYXNFdmVudExpc3RlbmVyKHQpe2NvbnN0IGU9dGhpcy5fbGlzdGVuZXJzTWFwJiZ0aGlzLl9saXN0ZW5lcnNNYXAuZ2V0KHQpO3JldHVybiBudWxsIT1lJiZlLmxlbmd0aD4wfX1uLkV2ZW50RW1pdHRlcj1vLG4uRXZlbnRlZE1peGluPWU9PntsZXQgcj1jbGFzcyBleHRlbmRzIGV7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuX2VtaXR0ZXI9bmV3IG87fWRlc3Ryb3koKXt0aGlzLl9lbWl0dGVyLmNsZWFyKCk7fWVtaXQodCxlKXtyZXR1cm4gdGhpcy5fZW1pdHRlci5lbWl0KHQsZSl9b24odCxlKXtyZXR1cm4gdGhpcy5fZW1pdHRlci5vbih0LGUpfW9uY2UodCxlKXtyZXR1cm4gdGhpcy5fZW1pdHRlci5vbmNlKHQsZSl9aGFzRXZlbnRMaXN0ZW5lcih0KXtyZXR1cm4gdGhpcy5fZW1pdHRlci5oYXNFdmVudExpc3RlbmVyKHQpfX07cmV0dXJuIHI9ZSR1KFtpJFgoXCJlc3JpLmNvcmUuRXZlbnRlZFwiKV0scikscn07bGV0IGg9Y2xhc3MgZXh0ZW5kcyB1JER7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuX2VtaXR0ZXI9bmV3IGkkUi5FdmVudEVtaXR0ZXIodGhpcyk7fWVtaXQodCxlKXtyZXR1cm4gdGhpcy5fZW1pdHRlci5lbWl0KHQsZSl9b24odCxlKXtyZXR1cm4gdGhpcy5fZW1pdHRlci5vbih0LGUpfW9uY2UodCxlKXtyZXR1cm4gdGhpcy5fZW1pdHRlci5vbmNlKHQsZSl9aGFzRXZlbnRMaXN0ZW5lcih0KXtyZXR1cm4gdGhpcy5fZW1pdHRlci5oYXNFdmVudExpc3RlbmVyKHQpfX07aD1lJHUoW2kkWChcImVzcmkuY29yZS5FdmVudGVkXCIpXSxoKSxuLkV2ZW50ZWRBY2Nlc3Nvcj1oO30oaSRSfHwoaSRSPXt9KSk7dmFyIG4kRj1pJFI7XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5jbGFzcyByJGt7Y29uc3RydWN0b3IoKXt0aGlzLl9vYnNlcnZlcnM9bmV3IFNldDt9b2JzZXJ2ZShyKXtyZXR1cm4gbmV3IGUkcyh0aGlzLl9vYnNlcnZlcnMuYWRkKHIpLHIpfW5vdGlmeSgpe2NvbnN0IGU9dGhpcy5fb2JzZXJ2ZXJzLHI9dGhpcy5fb2JzZXJ2ZXJzLnNpemUscz1uZXcgQXJyYXkocik7bGV0IG89MDtmb3IoY29uc3QgdCBvZiBlKXNbbysrXT10O2ZvcihsZXQgdD0wO3Q8cjt0Kyspc1t0XS5ub3RpZnkoKTt9fVxuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xudmFyIG0kdTtjbGFzcyB1JEN7Y29uc3RydWN0b3IoKXt0aGlzLnRhcmdldD1udWxsLHRoaXMuY2FuY2VsbGFibGU9ITEsdGhpcy5kZWZhdWx0UHJldmVudGVkPSExLHRoaXMuaXRlbT12b2lkIDAsdGhpcy50eXBlPXZvaWQgMDt9cHJldmVudERlZmF1bHQoKXt0aGlzLmNhbmNlbGxhYmxlJiYodGhpcy5kZWZhdWx0UHJldmVudGVkPSEwKTt9cmVzZXQoZSl7dGhpcy5kZWZhdWx0UHJldmVudGVkPSExLHRoaXMuaXRlbT1lO319Y29uc3QgZyRkPW5ldyBlJHQodSRDLHZvaWQgMCwoZT0+e2UuaXRlbT1udWxsLGUudGFyZ2V0PW51bGwsZS5kZWZhdWx0UHJldmVudGVkPSExLGUuY2FuY2VsbGFibGU9ITE7fSkpLHAkVz0oKT0+e307ZnVuY3Rpb24gYiQ5KGUpe3JldHVybiBlP2UgaW5zdGFuY2VvZiBCJDM/ZS50b0FycmF5KCk6ZS5sZW5ndGg/QXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGUpOltdOltdfWZ1bmN0aW9uIGQkdyhlKXtpZihlJiZlLmxlbmd0aClyZXR1cm4gZVswXX1mdW5jdGlvbiB2JDgoZSx0LHMsaSl7Y29uc3Qgcj1NYXRoLm1pbihlLmxlbmd0aC1zLHQubGVuZ3RoLWkpO2xldCBuPTA7Zm9yKDtuPHImJmVbcytuXT09PXRbaStuXTspbisrO3JldHVybiBufWZ1bmN0aW9uIHkkaShlLHQscyxpKXt0JiZ0LmZvckVhY2goKCh0LHIsbik9PntlLnB1c2godCkseSRpKGUscy5jYWxsKGksdCxyLG4pLHMsaSk7fSkpO31jb25zdCBDJDY9bmV3IFNldCxBJDc9bmV3IFNldCx4JGI9bmV3IFNldCxFJDI9bmV3IE1hcDtsZXQgaiRkPTAsQiQzPW0kdT1jbGFzcyBleHRlbmRzIG4kRi5FdmVudGVkQWNjZXNzb3J7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5fY2hnTGlzdGVuZXJzPVtdLHRoaXMuX25vdGlmaWNhdGlvbnM9bnVsbCx0aGlzLl90aW1lcj1udWxsLHRoaXMuX29ic2VydmFibGU9bmV3IHIkayx0aGlzLmxlbmd0aD0wLHRoaXMuX2l0ZW1zPVtdLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwidWlkXCIse3ZhbHVlOmokZCsrfSk7fXN0YXRpYyBpc0NvbGxlY3Rpb24oZSl7cmV0dXJuIG51bGwhPWUmJmUgaW5zdGFuY2VvZiBtJHV9bm9ybWFsaXplQ3RvckFyZ3MoZSl7cmV0dXJuIGU/QXJyYXkuaXNBcnJheShlKXx8ZSBpbnN0YW5jZW9mIG0kdT97aXRlbXM6ZX06ZTp7fX0qW1N5bWJvbC5pdGVyYXRvcl0oKXt5aWVsZCp0aGlzLml0ZW1zO31nZXQgaXRlbXMoKXtyZXR1cm4gaSRUKHRoaXMuX29ic2VydmFibGUpLHRoaXMuX2l0ZW1zfXNldCBpdGVtcyhlKXt0aGlzLl9lbWl0QmVmb3JlQ2hhbmdlcygxKXx8KHRoaXMuX3NwbGljZSgwLHRoaXMubGVuZ3RoLC4uLmIkOShlKSksdGhpcy5fZW1pdEFmdGVyQ2hhbmdlcygxKSk7fWhhc0V2ZW50TGlzdGVuZXIoZSl7cmV0dXJuIFwiY2hhbmdlXCI9PT1lP3RoaXMuX2NoZ0xpc3RlbmVycy5sZW5ndGg+MDp0aGlzLl9lbWl0dGVyLmhhc0V2ZW50TGlzdGVuZXIoZSl9b24oZSx0KXtpZihcImNoYW5nZVwiPT09ZSl7Y29uc3QgZT10aGlzLl9jaGdMaXN0ZW5lcnMscz17cmVtb3ZlZDohMSxjYWxsYmFjazp0fTtyZXR1cm4gZS5wdXNoKHMpLHRoaXMuX25vdGlmaWNhdGlvbnMmJnRoaXMuX25vdGlmaWNhdGlvbnMucHVzaCh7bGlzdGVuZXJzOmUuc2xpY2UoKSxpdGVtczp0aGlzLl9pdGVtcy5zbGljZSgpLGNoYW5nZXM6W119KSx7cmVtb3ZlKCl7dGhpcy5yZW1vdmU9cCRXLHMucmVtb3ZlZD0hMCxlLnNwbGljZShlLmluZGV4T2YocyksMSk7fX19cmV0dXJuIHRoaXMuX2VtaXR0ZXIub24oZSx0KX1vbmNlKGUsdCl7Y29uc3Qgcz10aGlzLm9uKGUsdCk7cmV0dXJuIHtyZW1vdmUoKXtzLnJlbW92ZSgpO319fWFkZChlLHQpe2lmKGkkVCh0aGlzLl9vYnNlcnZhYmxlKSx0aGlzLl9lbWl0QmVmb3JlQ2hhbmdlcygxKSlyZXR1cm4gdGhpcztjb25zdCBzPXRoaXMuZ2V0TmV4dEluZGV4KG51bGwhPXQ/dDpudWxsKTtyZXR1cm4gdGhpcy5fc3BsaWNlKHMsMCxlKSx0aGlzLl9lbWl0QWZ0ZXJDaGFuZ2VzKDEpLHRoaXN9YWRkTWFueShlLHQ9dGhpcy5faXRlbXMubGVuZ3RoKXtpZihpJFQodGhpcy5fb2JzZXJ2YWJsZSksIWV8fCFlLmxlbmd0aClyZXR1cm4gdGhpcztpZih0aGlzLl9lbWl0QmVmb3JlQ2hhbmdlcygxKSlyZXR1cm4gdGhpcztjb25zdCBzPXRoaXMuZ2V0TmV4dEluZGV4KHQpO3JldHVybiB0aGlzLl9zcGxpY2UocywwLC4uLmIkOShlKSksdGhpcy5fZW1pdEFmdGVyQ2hhbmdlcygxKSx0aGlzfXJlbW92ZUFsbCgpe2lmKGkkVCh0aGlzLl9vYnNlcnZhYmxlKSwhdGhpcy5sZW5ndGh8fHRoaXMuX2VtaXRCZWZvcmVDaGFuZ2VzKDIpKXJldHVybiBbXTtjb25zdCBlPXRoaXMuX3NwbGljZSgwLHRoaXMubGVuZ3RoKXx8W107cmV0dXJuIHRoaXMuX2VtaXRBZnRlckNoYW5nZXMoMiksZX1jbG9uZSgpe3JldHVybiBpJFQodGhpcy5fb2JzZXJ2YWJsZSksdGhpcy5fY3JlYXRlTmV3SW5zdGFuY2Uoe2l0ZW1zOnRoaXMuX2l0ZW1zLm1hcCh5JHYpfSl9Y29uY2F0KC4uLmUpe2kkVCh0aGlzLl9vYnNlcnZhYmxlKTtjb25zdCB0PWUubWFwKGIkOSk7cmV0dXJuIHRoaXMuX2NyZWF0ZU5ld0luc3RhbmNlKHtpdGVtczp0aGlzLl9pdGVtcy5jb25jYXQoLi4udCl9KX1kcmFpbihlLHQpe2lmKGkkVCh0aGlzLl9vYnNlcnZhYmxlKSwhdGhpcy5sZW5ndGh8fHRoaXMuX2VtaXRCZWZvcmVDaGFuZ2VzKDIpKXJldHVybjtjb25zdCBpPW0kRih0aGlzLl9zcGxpY2UoMCx0aGlzLmxlbmd0aCkpLHI9aS5sZW5ndGg7Zm9yKGxldCBzPTA7czxyO3MrKyllLmNhbGwodCxpW3NdLHMsaSk7dGhpcy5fZW1pdEFmdGVyQ2hhbmdlcygyKTt9ZXZlcnkoZSx0KXtyZXR1cm4gaSRUKHRoaXMuX29ic2VydmFibGUpLHRoaXMuX2l0ZW1zLmV2ZXJ5KGUsdCl9ZmlsdGVyKGUsdCl7bGV0IHM7cmV0dXJuIGkkVCh0aGlzLl9vYnNlcnZhYmxlKSxzPTI9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMuX2l0ZW1zLmZpbHRlcihlLHQpOnRoaXMuX2l0ZW1zLmZpbHRlcihlKSx0aGlzLl9jcmVhdGVOZXdJbnN0YW5jZSh7aXRlbXM6c30pfWZpbmQoZSx0KXtyZXR1cm4gaSRUKHRoaXMuX29ic2VydmFibGUpLHRoaXMuX2l0ZW1zLmZpbmQoZSx0KX1maW5kSW5kZXgoZSx0KXtyZXR1cm4gaSRUKHRoaXMuX29ic2VydmFibGUpLHRoaXMuX2l0ZW1zLmZpbmRJbmRleChlLHQpfWZsYXR0ZW4oZSx0KXtpJFQodGhpcy5fb2JzZXJ2YWJsZSk7Y29uc3Qgcz1bXTtyZXR1cm4geSRpKHMsdGhpcyxlLHQpLG5ldyBtJHUocyl9Zm9yRWFjaChlLHQpe3JldHVybiBpJFQodGhpcy5fb2JzZXJ2YWJsZSksdGhpcy5faXRlbXMuZm9yRWFjaChlLHQpfWdldEl0ZW1BdChlKXtyZXR1cm4gaSRUKHRoaXMuX29ic2VydmFibGUpLHRoaXMuX2l0ZW1zW2VdfWdldE5leHRJbmRleChlKXtpJFQodGhpcy5fb2JzZXJ2YWJsZSk7Y29uc3QgdD10aGlzLmxlbmd0aDtyZXR1cm4gKGU9bnVsbD09ZT90OmUpPDA/ZT0wOmU+dCYmKGU9dCksZX1pbmNsdWRlcyhlLHQ9MCl7cmV0dXJuIGkkVCh0aGlzLl9vYnNlcnZhYmxlKSx0aGlzLl9pdGVtcy5pbmNsdWRlcyhlLHQpfWluZGV4T2YoZSx0PTApe3JldHVybiBpJFQodGhpcy5fb2JzZXJ2YWJsZSksdGhpcy5faXRlbXMuaW5kZXhPZihlLHQpfWpvaW4oZT1cIixcIil7cmV0dXJuIGkkVCh0aGlzLl9vYnNlcnZhYmxlKSx0aGlzLl9pdGVtcy5qb2luKGUpfWxhc3RJbmRleE9mKGUsdD10aGlzLmxlbmd0aC0xKXtyZXR1cm4gaSRUKHRoaXMuX29ic2VydmFibGUpLHRoaXMuX2l0ZW1zLmxhc3RJbmRleE9mKGUsdCl9bWFwKGUsdCl7aSRUKHRoaXMuX29ic2VydmFibGUpO2NvbnN0IHM9dGhpcy5faXRlbXMubWFwKGUsdCk7cmV0dXJuIG5ldyBtJHUoe2l0ZW1zOnN9KX1yZW9yZGVyKGUsdD10aGlzLmxlbmd0aC0xKXtpJFQodGhpcy5fb2JzZXJ2YWJsZSk7Y29uc3Qgcz10aGlzLmluZGV4T2YoZSk7aWYoLTEhPT1zKXtpZih0PDA/dD0wOnQ+PXRoaXMubGVuZ3RoJiYodD10aGlzLmxlbmd0aC0xKSxzIT09dCl7aWYodGhpcy5fZW1pdEJlZm9yZUNoYW5nZXMoNCkpcmV0dXJuIGU7dGhpcy5fc3BsaWNlKHMsMSksdGhpcy5fc3BsaWNlKHQsMCxlKSx0aGlzLl9lbWl0QWZ0ZXJDaGFuZ2VzKDQpO31yZXR1cm4gZX19cG9wKCl7aWYoaSRUKHRoaXMuX29ic2VydmFibGUpLCF0aGlzLmxlbmd0aHx8dGhpcy5fZW1pdEJlZm9yZUNoYW5nZXMoMikpcmV0dXJuO2NvbnN0IGU9ZCR3KHRoaXMuX3NwbGljZSh0aGlzLmxlbmd0aC0xLDEpKTtyZXR1cm4gdGhpcy5fZW1pdEFmdGVyQ2hhbmdlcygyKSxlfXB1c2goLi4uZSl7cmV0dXJuIGkkVCh0aGlzLl9vYnNlcnZhYmxlKSx0aGlzLl9lbWl0QmVmb3JlQ2hhbmdlcygxKXx8KHRoaXMuX3NwbGljZSh0aGlzLmxlbmd0aCwwLC4uLmUpLHRoaXMuX2VtaXRBZnRlckNoYW5nZXMoMSkpLHRoaXMubGVuZ3RofXJlZHVjZShlLHQpe2kkVCh0aGlzLl9vYnNlcnZhYmxlKTtjb25zdCBzPXRoaXMuX2l0ZW1zO3JldHVybiAyPT09YXJndW1lbnRzLmxlbmd0aD9zLnJlZHVjZShlLHQpOnMucmVkdWNlKGUpfXJlZHVjZVJpZ2h0KGUsdCl7aSRUKHRoaXMuX29ic2VydmFibGUpO2NvbnN0IHM9dGhpcy5faXRlbXM7cmV0dXJuIDI9PT1hcmd1bWVudHMubGVuZ3RoP3MucmVkdWNlUmlnaHQoZSx0KTpzLnJlZHVjZVJpZ2h0KGUpfXJlbW92ZShlKXtyZXR1cm4gaSRUKHRoaXMuX29ic2VydmFibGUpLHRoaXMucmVtb3ZlQXQodGhpcy5pbmRleE9mKGUpKX1yZW1vdmVBdChlKXtpZihpJFQodGhpcy5fb2JzZXJ2YWJsZSksZTwwfHxlPj10aGlzLmxlbmd0aHx8dGhpcy5fZW1pdEJlZm9yZUNoYW5nZXMoMikpcmV0dXJuO2NvbnN0IHQ9ZCR3KHRoaXMuX3NwbGljZShlLDEpKTtyZXR1cm4gdGhpcy5fZW1pdEFmdGVyQ2hhbmdlcygyKSx0fXJlbW92ZU1hbnkoZSl7aWYoaSRUKHRoaXMuX29ic2VydmFibGUpLCFlfHwhZS5sZW5ndGh8fHRoaXMuX2VtaXRCZWZvcmVDaGFuZ2VzKDIpKXJldHVybiBbXTtjb25zdCB0PWUgaW5zdGFuY2VvZiBtJHU/ZS50b0FycmF5KCk6ZSxzPXRoaXMuX2l0ZW1zLGk9W10scj10Lmxlbmd0aDtmb3IobGV0IG49MDtuPHI7bisrKXtjb25zdCBlPXRbbl0scj1zLmluZGV4T2YoZSk7aWYocj4tMSl7Y29uc3QgZT0xK3YkOCh0LHMsbisxLHIrMSksaD10aGlzLl9zcGxpY2UocixlKTtoJiZoLmxlbmd0aD4wJiZpLnB1c2guYXBwbHkoaSxoKSxuKz1lLTE7fX1yZXR1cm4gdGhpcy5fZW1pdEFmdGVyQ2hhbmdlcygyKSxpfXJldmVyc2UoKXtpZihpJFQodGhpcy5fb2JzZXJ2YWJsZSksdGhpcy5fZW1pdEJlZm9yZUNoYW5nZXMoNCkpcmV0dXJuIHRoaXM7Y29uc3QgZT10aGlzLl9zcGxpY2UoMCx0aGlzLmxlbmd0aCk7cmV0dXJuIGUmJihlLnJldmVyc2UoKSx0aGlzLl9zcGxpY2UoMCwwLC4uLmUpKSx0aGlzLl9lbWl0QWZ0ZXJDaGFuZ2VzKDQpLHRoaXN9c2hpZnQoKXtpZihpJFQodGhpcy5fb2JzZXJ2YWJsZSksIXRoaXMubGVuZ3RofHx0aGlzLl9lbWl0QmVmb3JlQ2hhbmdlcygyKSlyZXR1cm47Y29uc3QgZT1kJHcodGhpcy5fc3BsaWNlKDAsMSkpO3JldHVybiB0aGlzLl9lbWl0QWZ0ZXJDaGFuZ2VzKDIpLGV9c2xpY2UoZT0wLHQ9dGhpcy5sZW5ndGgpe3JldHVybiBpJFQodGhpcy5fb2JzZXJ2YWJsZSksdGhpcy5fY3JlYXRlTmV3SW5zdGFuY2Uoe2l0ZW1zOnRoaXMuX2l0ZW1zLnNsaWNlKGUsdCl9KX1zb21lKGUsdCl7cmV0dXJuIGkkVCh0aGlzLl9vYnNlcnZhYmxlKSx0aGlzLl9pdGVtcy5zb21lKGUsdCl9c29ydChlKXtpZihpJFQodGhpcy5fb2JzZXJ2YWJsZSksIXRoaXMubGVuZ3RofHx0aGlzLl9lbWl0QmVmb3JlQ2hhbmdlcyg0KSlyZXR1cm4gdGhpcztjb25zdCB0PW0kRih0aGlzLl9zcGxpY2UoMCx0aGlzLmxlbmd0aCkpO3JldHVybiBhcmd1bWVudHMubGVuZ3RoP3Quc29ydChlKTp0LnNvcnQoKSx0aGlzLl9zcGxpY2UoMCwwLC4uLnQpLHRoaXMuX2VtaXRBZnRlckNoYW5nZXMoNCksdGhpc31zcGxpY2UoZSx0LC4uLnMpe2kkVCh0aGlzLl9vYnNlcnZhYmxlKTtjb25zdCBpPSh0PzI6MCl8KHMubGVuZ3RoPzE6MCk7aWYodGhpcy5fZW1pdEJlZm9yZUNoYW5nZXMoaSkpcmV0dXJuIFtdO2NvbnN0IHI9dGhpcy5fc3BsaWNlKGUsdCwuLi5zKXx8W107cmV0dXJuIHRoaXMuX2VtaXRBZnRlckNoYW5nZXMoaSkscn10b0FycmF5KCl7cmV0dXJuIGkkVCh0aGlzLl9vYnNlcnZhYmxlKSx0aGlzLl9pdGVtcy5zbGljZSgpfXRvSlNPTigpe3JldHVybiBpJFQodGhpcy5fb2JzZXJ2YWJsZSksdGhpcy50b0FycmF5KCl9dG9Mb2NhbGVTdHJpbmcoKXtyZXR1cm4gaSRUKHRoaXMuX29ic2VydmFibGUpLHRoaXMuX2l0ZW1zLnRvTG9jYWxlU3RyaW5nKCl9dG9TdHJpbmcoKXtyZXR1cm4gaSRUKHRoaXMuX29ic2VydmFibGUpLHRoaXMuX2l0ZW1zLnRvU3RyaW5nKCl9dW5zaGlmdCguLi5lKXtyZXR1cm4gaSRUKHRoaXMuX29ic2VydmFibGUpLCFlLmxlbmd0aHx8dGhpcy5fZW1pdEJlZm9yZUNoYW5nZXMoMSl8fCh0aGlzLl9zcGxpY2UoMCwwLC4uLmUpLHRoaXMuX2VtaXRBZnRlckNoYW5nZXMoMSkpLHRoaXMubGVuZ3RofV9jcmVhdGVOZXdJbnN0YW5jZShlKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IoZSl9X3NwbGljZShlLHQsLi4ucyl7Y29uc3QgaT10aGlzLl9pdGVtcyxyPXRoaXMuY29uc3RydWN0b3IucHJvdG90eXBlLml0ZW1UeXBlO2xldCBuLGg7aWYoIXRoaXMuX25vdGlmaWNhdGlvbnMmJnRoaXMuaGFzRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiKSYmKHRoaXMuX25vdGlmaWNhdGlvbnM9W3tsaXN0ZW5lcnM6dGhpcy5fY2hnTGlzdGVuZXJzLnNsaWNlKCksaXRlbXM6dGhpcy5faXRlbXMuc2xpY2UoKSxjaGFuZ2VzOltdfV0sdGhpcy5fdGltZXImJnRoaXMuX3RpbWVyLnJlbW92ZSgpLHRoaXMuX3RpbWVyPWskOCgoKCk9PnRoaXMuX2Rpc3BhdGNoQ2hhbmdlKCkpKSksdCl7aWYoaD1pLnNwbGljZShlLHQpLHRoaXMuaGFzRXZlbnRMaXN0ZW5lcihcImJlZm9yZS1yZW1vdmVcIikpe2NvbnN0IHQ9ZyRkLmFjcXVpcmUoKTt0LnRhcmdldD10aGlzLHQuY2FuY2VsbGFibGU9ITA7Zm9yKGxldCBzPTAscj1oLmxlbmd0aDtzPHI7cysrKW49aFtzXSx0LnJlc2V0KG4pLHRoaXMuZW1pdChcImJlZm9yZS1yZW1vdmVcIix0KSx0LmRlZmF1bHRQcmV2ZW50ZWQmJihoLnNwbGljZShzLDEpLGkuc3BsaWNlKGUsMCxuKSxlKz0xLHMtPTEsci09MSk7ZyRkLnJlbGVhc2UodCk7fWlmKHRoaXMubGVuZ3RoPXRoaXMuX2l0ZW1zLmxlbmd0aCx0aGlzLmhhc0V2ZW50TGlzdGVuZXIoXCJhZnRlci1yZW1vdmVcIikpe2NvbnN0IGU9ZyRkLmFjcXVpcmUoKTtlLnRhcmdldD10aGlzLGUuY2FuY2VsbGFibGU9ITE7Y29uc3QgdD1oLmxlbmd0aDtmb3IobGV0IHM9MDtzPHQ7cysrKWUucmVzZXQoaFtzXSksdGhpcy5lbWl0KFwiYWZ0ZXItcmVtb3ZlXCIsZSk7ZyRkLnJlbGVhc2UoZSk7fX1pZihzJiZzLmxlbmd0aCl7aWYocil7Y29uc3QgZT1bXTtmb3IoY29uc3QgdCBvZiBzKXtjb25zdCBzPXIuZW5zdXJlVHlwZSh0KTtudWxsPT1zJiZudWxsIT10fHxlLnB1c2gocyk7fXM9ZTt9Y29uc3QgdD10aGlzLmhhc0V2ZW50TGlzdGVuZXIoXCJiZWZvcmUtYWRkXCIpLG49dGhpcy5oYXNFdmVudExpc3RlbmVyKFwiYWZ0ZXItYWRkXCIpLGg9ZT09PXRoaXMubGVuZ3RoO2lmKHR8fG4pe2NvbnN0IHI9ZyRkLmFjcXVpcmUoKTtyLnRhcmdldD10aGlzLHIuY2FuY2VsbGFibGU9ITA7Y29uc3Qgbz1nJGQuYWNxdWlyZSgpO28udGFyZ2V0PXRoaXMsby5jYW5jZWxsYWJsZT0hMTtmb3IoY29uc3QgbCBvZiBzKXQ/KHIucmVzZXQobCksdGhpcy5lbWl0KFwiYmVmb3JlLWFkZFwiLHIpLHIuZGVmYXVsdFByZXZlbnRlZHx8KGg/aS5wdXNoKGwpOmkuc3BsaWNlKGUrKywwLGwpLHRoaXMuX3NldChcImxlbmd0aFwiLGkubGVuZ3RoKSxuJiYoby5yZXNldChsKSx0aGlzLmVtaXQoXCJhZnRlci1hZGRcIixvKSkpKTooaD9pLnB1c2gobCk6aS5zcGxpY2UoZSsrLDAsbCksdGhpcy5fc2V0KFwibGVuZ3RoXCIsaS5sZW5ndGgpLG8ucmVzZXQobCksdGhpcy5lbWl0KFwiYWZ0ZXItYWRkXCIsbykpO2ckZC5yZWxlYXNlKG8pLGckZC5yZWxlYXNlKHIpO31lbHNlIHtpZihoKWZvcihjb25zdCBlIG9mIHMpaS5wdXNoKGUpO2Vsc2UgaS5zcGxpY2UoZSwwLC4uLnMpO3RoaXMuX3NldChcImxlbmd0aFwiLGkubGVuZ3RoKTt9fXJldHVybiAocyYmcy5sZW5ndGh8fGgmJmgubGVuZ3RoKSYmdGhpcy5fbm90aWZ5Q2hhbmdlRXZlbnQocyxoKSxofV9lbWl0QmVmb3JlQ2hhbmdlcyhlKXtsZXQgdD0hMTtpZih0aGlzLmhhc0V2ZW50TGlzdGVuZXIoXCJiZWZvcmUtY2hhbmdlc1wiKSl7Y29uc3Qgcz1nJGQuYWNxdWlyZSgpO3MudGFyZ2V0PXRoaXMscy5jYW5jZWxsYWJsZT0hMCxzLnR5cGU9ZSx0aGlzLmVtaXQoXCJiZWZvcmUtY2hhbmdlc1wiLHMpLHQ9cy5kZWZhdWx0UHJldmVudGVkLGckZC5yZWxlYXNlKHMpO31yZXR1cm4gdH1fZW1pdEFmdGVyQ2hhbmdlcyhlKXtpZih0aGlzLmhhc0V2ZW50TGlzdGVuZXIoXCJhZnRlci1jaGFuZ2VzXCIpKXtjb25zdCB0PWckZC5hY3F1aXJlKCk7dC50YXJnZXQ9dGhpcyx0LmNhbmNlbGxhYmxlPSExLHQudHlwZT1lLHRoaXMuZW1pdChcImFmdGVyLWNoYW5nZXNcIix0KSxnJGQucmVsZWFzZSh0KTt9dGhpcy5fb2JzZXJ2YWJsZS5ub3RpZnkoKTt9X25vdGlmeUNoYW5nZUV2ZW50KGUsdCl7dGhpcy5oYXNFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIpJiZ0aGlzLl9ub3RpZmljYXRpb25zJiZ0aGlzLl9ub3RpZmljYXRpb25zW3RoaXMuX25vdGlmaWNhdGlvbnMubGVuZ3RoLTFdLmNoYW5nZXMucHVzaCh7YWRkZWQ6ZSxyZW1vdmVkOnR9KTt9X2Rpc3BhdGNoQ2hhbmdlKCl7aWYodGhpcy5fdGltZXImJih0aGlzLl90aW1lci5yZW1vdmUoKSx0aGlzLl90aW1lcj1udWxsKSwhdGhpcy5fbm90aWZpY2F0aW9ucylyZXR1cm47Y29uc3QgZT10aGlzLl9ub3RpZmljYXRpb25zO3RoaXMuX25vdGlmaWNhdGlvbnM9bnVsbDtmb3IoY29uc3QgdCBvZiBlKXtjb25zdCBlPXQuY2hhbmdlcztDJDYuY2xlYXIoKSxBJDcuY2xlYXIoKSx4JGIuY2xlYXIoKTtmb3IoY29uc3R7YWRkZWQ6dCxyZW1vdmVkOm99b2YgZSl7aWYodClpZigwPT09eCRiLnNpemUmJjA9PT1BJDcuc2l6ZSlmb3IoY29uc3QgZSBvZiB0KUMkNi5hZGQoZSk7ZWxzZSBmb3IoY29uc3QgZSBvZiB0KUEkNy5oYXMoZSk/KHgkYi5hZGQoZSksQSQ3LmRlbGV0ZShlKSk6eCRiLmhhcyhlKXx8QyQ2LmFkZChlKTtpZihvKWlmKDA9PT14JGIuc2l6ZSYmMD09PUMkNi5zaXplKWZvcihjb25zdCBlIG9mIG8pQSQ3LmFkZChlKTtlbHNlIGZvcihjb25zdCBlIG9mIG8pQyQ2LmhhcyhlKT9DJDYuZGVsZXRlKGUpOih4JGIuZGVsZXRlKGUpLEEkNy5hZGQoZSkpO31jb25zdCBzPW8kcS5hY3F1aXJlKCk7QyQ2LmZvckVhY2goKGU9PntzLnB1c2goZSk7fSkpO2NvbnN0IGk9byRxLmFjcXVpcmUoKTtBJDcuZm9yRWFjaCgoZT0+e2kucHVzaChlKTt9KSk7Y29uc3Qgcj10aGlzLl9pdGVtcyxuPXQuaXRlbXMsaD1vJHEuYWNxdWlyZSgpO2lmKHgkYi5mb3JFYWNoKChlPT57bi5pbmRleE9mKGUpIT09ci5pbmRleE9mKGUpJiZoLnB1c2goZSk7fSkpLHQubGlzdGVuZXJzJiYocy5sZW5ndGh8fGkubGVuZ3RofHxoLmxlbmd0aCkpe2NvbnN0IGU9e3RhcmdldDp0aGlzLGFkZGVkOnMscmVtb3ZlZDppLG1vdmVkOmh9LHI9dC5saXN0ZW5lcnMubGVuZ3RoO2ZvcihsZXQgcz0wO3M8cjtzKyspe2NvbnN0IGk9dC5saXN0ZW5lcnNbc107aS5yZW1vdmVkfHxpLmNhbGxiYWNrLmNhbGwodGhpcyxlKTt9fW8kcS5yZWxlYXNlKHMpLG8kcS5yZWxlYXNlKGkpLG8kcS5yZWxlYXNlKGgpO31DJDYuY2xlYXIoKSxBJDcuY2xlYXIoKSx4JGIuY2xlYXIoKTt9fTtCJDMub2ZUeXBlPXQ9PntpZighdClyZXR1cm4gbSR1O2lmKEUkMi5oYXModCkpcmV0dXJuIEUkMi5nZXQodCk7bGV0IHM9bnVsbDtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiB0KXM9dC5wcm90b3R5cGUuZGVjbGFyZWRDbGFzcztlbHNlIGlmKHQuYmFzZSlzPXQuYmFzZS5wcm90b3R5cGUuZGVjbGFyZWRDbGFzcztlbHNlIGZvcihjb25zdCBlIGluIHQudHlwZU1hcCl7Y29uc3QgaT10LnR5cGVNYXBbZV0ucHJvdG90eXBlLmRlY2xhcmVkQ2xhc3M7cz9zKz1gIHwgJHtpfWA6cz1pO31sZXQgbj1jbGFzcyBleHRlbmRzIG0kdXt9O249ZSR1KFtpJFgoYGVzcmkuY29yZS5Db2xsZWN0aW9uPCR7c30+YCldLG4pO2NvbnN0IG89e1R5cGU6dCxlbnN1cmVUeXBlOlwiZnVuY3Rpb25cIj09dHlwZW9mIHQ/ZCRFKHQpOmskYSh0KX07cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLnByb3RvdHlwZSxcIml0ZW1UeXBlXCIse3ZhbHVlOm99KSxFJDIuc2V0KHQsbiksbn0sZSR1KFt5JHIoKV0sQiQzLnByb3RvdHlwZSxcImxlbmd0aFwiLHZvaWQgMCksZSR1KFt5JHIoKV0sQiQzLnByb3RvdHlwZSxcIml0ZW1zXCIsbnVsbCksQiQzPW0kdT1lJHUoW2kkWChcImVzcmkuY29yZS5Db2xsZWN0aW9uXCIpXSxCJDMpO3ZhciBMJDU9QiQzO1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xubGV0IGgkcj1jbGFzcyBleHRlbmRzIHUkRHtjb25zdHJ1Y3RvcihyKXtzdXBlcihyKSx0aGlzLl9ncm91cHM9bmV3IE1hcDt9ZGVzdHJveSgpe3RoaXMucmVtb3ZlQWxsKCk7fWdldCBzaXplKCl7bGV0IHI9MDtyZXR1cm4gdGhpcy5fZ3JvdXBzLmZvckVhY2goKGU9PntyKz1lLmxlbmd0aDt9KSkscn1hZGQocixlKXtpZighdGhpcy5faXNIYW5kbGUocikmJiFBcnJheS5pc0FycmF5KHIpJiYhTCQ1LmlzQ29sbGVjdGlvbihyKSlyZXR1cm4gdGhpcztjb25zdCBzPXRoaXMuX2dldE9yQ3JlYXRlR3JvdXAoZSk7cmV0dXJuIEFycmF5LmlzQXJyYXkocil8fEwkNS5pc0NvbGxlY3Rpb24ocik/ci5mb3JFYWNoKChyPT50aGlzLl9pc0hhbmRsZShyKSYmcy5wdXNoKHIpKSk6cy5wdXNoKHIpLHRoaXMubm90aWZ5Q2hhbmdlKFwic2l6ZVwiKSx0aGlzfWZvckVhY2gocixlKXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiByKXRoaXMuX2dyb3Vwcy5mb3JFYWNoKChlPT5lLmZvckVhY2gocikpKTtlbHNlIHtjb25zdCBzPXRoaXMuX2dldEdyb3VwKHIpO3MmJmUmJnMuZm9yRWFjaChlKTt9fWhhcyhyKXtyZXR1cm4gdGhpcy5fZ3JvdXBzLmhhcyh0aGlzLl9lbnN1cmVHcm91cEtleShyKSl9cmVtb3ZlKHIpe2lmKEFycmF5LmlzQXJyYXkocil8fEwkNS5pc0NvbGxlY3Rpb24ocikpcmV0dXJuIHIuZm9yRWFjaCh0aGlzLnJlbW92ZSx0aGlzKSx0aGlzO2lmKCF0aGlzLmhhcyhyKSlyZXR1cm4gdGhpcztjb25zdCBlPXRoaXMuX2dldEdyb3VwKHIpO2ZvcihsZXQgcz0wO3M8ZS5sZW5ndGg7cysrKWVbc10ucmVtb3ZlKCk7cmV0dXJuIHRoaXMuX2RlbGV0ZUdyb3VwKHIpLHRoaXMubm90aWZ5Q2hhbmdlKFwic2l6ZVwiKSx0aGlzfXJlbW92ZUFsbCgpe3JldHVybiB0aGlzLl9ncm91cHMuZm9yRWFjaCgocj0+e2ZvcihsZXQgZT0wO2U8ci5sZW5ndGg7ZSsrKXJbZV0ucmVtb3ZlKCk7fSkpLHRoaXMuX2dyb3Vwcy5jbGVhcigpLHRoaXMubm90aWZ5Q2hhbmdlKFwic2l6ZVwiKSx0aGlzfV9pc0hhbmRsZShyKXtyZXR1cm4gciYmISFyLnJlbW92ZX1fZ2V0T3JDcmVhdGVHcm91cChyKXtpZih0aGlzLmhhcyhyKSlyZXR1cm4gdGhpcy5fZ2V0R3JvdXAocik7Y29uc3QgZT1bXTtyZXR1cm4gdGhpcy5fZ3JvdXBzLnNldCh0aGlzLl9lbnN1cmVHcm91cEtleShyKSxlKSxlfV9nZXRHcm91cChyKXtyZXR1cm4gbSRGKHRoaXMuX2dyb3Vwcy5nZXQodGhpcy5fZW5zdXJlR3JvdXBLZXkocikpKX1fZGVsZXRlR3JvdXAocil7cmV0dXJuIHRoaXMuX2dyb3Vwcy5kZWxldGUodGhpcy5fZW5zdXJlR3JvdXBLZXkocikpfV9lbnN1cmVHcm91cEtleShyKXtyZXR1cm4gcnx8XCJfZGVmYXVsdF9cIn19O2UkdShbeSRyKHtyZWFkT25seTohMH0pXSxoJHIucHJvdG90eXBlLFwic2l6ZVwiLG51bGwpLGgkcj1lJHUoW2kkWChcImVzcmkuY29yZS5IYW5kbGVzXCIpXSxoJHIpO3ZhciB1JEI9aCRyO1xuXG4vLyBnZW9lbnJpY2htZW50XHJcbi8qKlxyXG4gKiBJbnRlcnNlY3Rpb25PYnNlcnZlciBzaW5nbGV0b24gdXNlZCBpbiBvcmRlciBub3QgdG8gY3JlYXRlIG9ic2VydmVyIGluIGV2ZXJ5IFRlbXBsYXRlZFdpZGdldFxyXG4gKi9cclxubGV0IF9pbnRlcnNlY3Rpb25PYnNlcnZlcjtcclxuLy8gbWF5IG5vdCBiZSBzdXBwb3J0ZWQgKGNhc2U6IGluIHdvcmtlcnMpXHJcbmlmIChnbG9iYWxPYmplY3QuSW50ZXJzZWN0aW9uT2JzZXJ2ZXIpIHtcclxuICBfaW50ZXJzZWN0aW9uT2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoKGVudHJpZXMpID0+IHtcclxuICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xyXG4gICAgICBpZiAoZW50cnkuaXNJbnRlcnNlY3RpbmcpIHtcclxuICAgICAgICBjb25zdCByZXNvbHZlID0gX3Jlc29sdmVyTWFwLmdldChlbnRyeS50YXJnZXQpLnJlc29sdmU7XHJcbiAgICAgICAgX3Jlc29sdmVyTWFwLmRlbGV0ZShlbnRyeS50YXJnZXQpO1xyXG4gICAgICAgIF9pbnRlcnNlY3Rpb25PYnNlcnZlci51bm9ic2VydmUoZW50cnkudGFyZ2V0KTtcclxuICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LCB7IHJvb3Q6IGRvY3VtZW50LmJvZHkgfSk7XHJcbn1cclxuY29uc3QgX3Jlc29sdmVyTWFwID0gbmV3IFdlYWtNYXAoKTtcclxuZnVuY3Rpb24gb25EaXNwbGF5ZWQobm9kZSkge1xyXG4gIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICBfaW50ZXJzZWN0aW9uT2JzZXJ2ZXIgPT09IG51bGwgfHwgX2ludGVyc2VjdGlvbk9ic2VydmVyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaW50ZXJzZWN0aW9uT2JzZXJ2ZXIub2JzZXJ2ZShub2RlKTtcclxuICAgIGNvbnN0IHJlbW92ZSA9ICgpID0+IHtcclxuICAgICAgX3Jlc29sdmVyTWFwLmRlbGV0ZShub2RlKTtcclxuICAgICAgX2ludGVyc2VjdGlvbk9ic2VydmVyID09PSBudWxsIHx8IF9pbnRlcnNlY3Rpb25PYnNlcnZlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2ludGVyc2VjdGlvbk9ic2VydmVyLnVub2JzZXJ2ZShub2RlKTtcclxuICAgICAgcmVqZWN0KFwicmVtb3ZlZFwiKTtcclxuICAgIH07XHJcbiAgICBfcmVzb2x2ZXJNYXAuc2V0KG5vZGUsIHsgcmVzb2x2ZSwgcmVtb3ZlIH0pO1xyXG4gIH0pO1xyXG4gIHByb21pc2UuX19vbGRfdGhlbiA9IHByb21pc2UudGhlbjtcclxuICBwcm9taXNlLnRoZW4gPSAob25mdWxmaWxsZWQpID0+IHByb21pc2UuX19vbGRfdGhlbihvbmZ1bGZpbGxlZCkuY2F0Y2goKHJlYXNvbikgPT4ge1xyXG4gICAgaWYgKHJlYXNvbiAhPT0gXCJyZW1vdmVkXCIpIHtcclxuICAgICAgdGhyb3cgcmVhc29uO1xyXG4gICAgfVxyXG4gIH0pO1xyXG4gIHJldHVybiB7XHJcbiAgICBwcm9taXNlLFxyXG4gICAgcmVtb3ZlOiAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGluc3RhbmNlID0gX3Jlc29sdmVyTWFwLmdldChub2RlKTtcclxuICAgICAgaW5zdGFuY2UgJiYgaW5zdGFuY2UucmVtb3ZlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxufVxuXG4vKipcclxuICogV29ya3Mgd2l0aCBldmVudHMuXHJcbiAqL1xyXG5jbGFzcyBFdmVudGVkIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vXHJcbiAgICAvLyAgUHJvcGVydGllc1xyXG4gICAgLy9cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIHRoaXMuX2VtaXR0ZXIgPSBuZXcgRXZlbnRlZC5FdmVudEVtaXR0ZXIoKTtcclxuICB9XHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vXHJcbiAgLy8gIFB1YmxpYyBNZXRob2RzXHJcbiAgLy9cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLyoqXHJcbiAgICogRW1pdHMgYW4gZXZlbnQgb24gdGhlIGluc3RhbmNlLiBUaGlzIG1ldGhvZCBzaG91bGQgb25seSBiZSB1c2VkIHdoZW4gY3JlYXRpbmcgc3ViY2xhc3NlcyBvZiB0aGlzIGNsYXNzLlxyXG4gICAqL1xyXG4gIGVtaXQodHlwZSwgZXZlbnQpIHtcclxuICAgIHJldHVybiB0aGlzLl9lbWl0dGVyLmVtaXQodHlwZSwgZXZlbnQpO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBSZWdpc3RlcnMgYW4gZXZlbnQgaGFuZGxlciBvbiB0aGUgaW5zdGFuY2UuIENhbGwgdGhpcyBtZXRob2QgdG8gaG9vayBhblxyXG4gICAqIGV2ZW50IHdpdGggYSBsaXN0ZW5lci5cclxuICAgKi9cclxuICBvbih0eXBlLCBsaXN0ZW5lcikge1xyXG4gICAgcmV0dXJuIHRoaXMuX2VtaXR0ZXIub24odHlwZSwgbGlzdGVuZXIpO1xyXG4gIH1cclxuICBvbmNlKHR5cGUsIGxpc3RlbmVyKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fZW1pdHRlci5vbmNlKHR5cGUsIGxpc3RlbmVyKTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHdoZXRoZXIgdGhlcmUgaXMgYW4gZXZlbnQgbGlzdGVuZXIgb24gdGhlIGluc3RhbmNlIHRoYXQgbWF0Y2hlc1xyXG4gICAqIHRoZSBwcm92aWRlZCBldmVudCBuYW1lLlxyXG4gICAqL1xyXG4gIGhhc0V2ZW50TGlzdGVuZXIodHlwZSkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2VtaXR0ZXIuaGFzRXZlbnRMaXN0ZW5lcih0eXBlKTtcclxuICB9XHJcbn1cclxuZnVuY3Rpb24gX2hhbmRsZXNHcm91cChoYW5kbGVzKSB7XHJcbiAgcmV0dXJuIF9tYWtlSGFuZGxlKCgpID0+IGhhbmRsZXMuZm9yRWFjaCgoaGFuZGxlKSA9PiBoYW5kbGUgJiYgaGFuZGxlLnJlbW92ZSgpKSk7XHJcbn1cclxuZnVuY3Rpb24gX21ha2VIYW5kbGUocmVtb3ZlKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHJlbW92ZTogKCkgPT4ge1xyXG4gICAgICBpZiAocmVtb3ZlKSB7XHJcbiAgICAgICAgcmVtb3ZlKCk7XHJcbiAgICAgICAgcmVtb3ZlID0gbnVsbDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcbn1cclxuKGZ1bmN0aW9uIChFdmVudGVkKSB7XHJcbiAgY2xhc3MgRXZlbnRFbWl0dGVyIHtcclxuICAgIGNsZWFyKCkge1xyXG4gICAgICB0aGlzLl9saXN0ZW5lcnNNYXAgJiYgdGhpcy5fbGlzdGVuZXJzTWFwLmNsZWFyKCk7XHJcbiAgICB9XHJcbiAgICBlbWl0KHR5cGUsIGV2ZW50KSB7XHJcbiAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVyc01hcCAmJiB0aGlzLl9saXN0ZW5lcnNNYXAuZ2V0KHR5cGUpO1xyXG4gICAgICBpZiAoIWxpc3RlbmVycykge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICAvLyBzbGljZSB0aGUgYXJyYXkgdG8gaGFuZGxlIGxpc3RlbmVycyByZW1vdmluZyB0aGVtc2VsdmVzXHJcbiAgICAgIGxpc3RlbmVycy5zbGljZSgpLmZvckVhY2goKGxpc3RlbmVyKSA9PiB7XHJcbiAgICAgICAgbGlzdGVuZXIuY2FsbChudWxsLCBldmVudCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gbGlzdGVuZXJzLmxlbmd0aCA+IDA7XHJcbiAgICB9XHJcbiAgICBvbih0eXBlLCBsaXN0ZW5lcikge1xyXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh0eXBlKSkge1xyXG4gICAgICAgIGNvbnN0IGhhbmRsZXMgPSB0eXBlLm1hcCgob25lVHlwZSkgPT4gdGhpcy5vbihvbmVUeXBlLCBsaXN0ZW5lcikpO1xyXG4gICAgICAgIHJldHVybiBfaGFuZGxlc0dyb3VwKGhhbmRsZXMpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0eXBlLmluZGV4T2YoXCIsXCIpID4gLTEpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRXZlbnRlZC5vbigpIHdpdGggYSBjb21tYSBkZWxpbWl0ZWQgc3RyaW5nIG9mIGV2ZW50IHR5cGVzIGlzIG5vdCBzdXBwb3J0ZWRcIik7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKCF0aGlzLl9saXN0ZW5lcnNNYXApIHtcclxuICAgICAgICB0aGlzLl9saXN0ZW5lcnNNYXAgPSBuZXcgTWFwKCk7XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzTWFwLmdldCh0eXBlKSB8fCBbXTtcclxuICAgICAgbGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xyXG4gICAgICB0aGlzLl9saXN0ZW5lcnNNYXAuc2V0KHR5cGUsIGxpc3RlbmVycyk7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgcmVtb3ZlOiAoKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSAodGhpcy5fbGlzdGVuZXJzTWFwICYmIHRoaXMuX2xpc3RlbmVyc01hcC5nZXQodHlwZSkpIHx8IFtdO1xyXG4gICAgICAgICAgY29uc3QgaW5kZXggPSBsaXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcik7XHJcbiAgICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xyXG4gICAgICAgICAgICBsaXN0ZW5lcnMuc3BsaWNlKGxpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKSwgMSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gICAgb25jZSh0eXBlLCBsaXN0ZW5lcikge1xyXG4gICAgICBsZXQgaGFuZGxlO1xyXG4gICAgICBoYW5kbGUgPSB0aGlzLm9uKHR5cGUsIChldmVudCkgPT4ge1xyXG4gICAgICAgIGhhbmRsZS5yZW1vdmUoKTtcclxuICAgICAgICBsaXN0ZW5lci5jYWxsKG51bGwsIGV2ZW50KTtcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBoYW5kbGU7XHJcbiAgICB9XHJcbiAgICBoYXNFdmVudExpc3RlbmVyKHR5cGUpIHtcclxuICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzTWFwICYmIHRoaXMuX2xpc3RlbmVyc01hcC5nZXQodHlwZSk7XHJcbiAgICAgIHJldHVybiBsaXN0ZW5lcnMgIT0gbnVsbCAmJiBsaXN0ZW5lcnMubGVuZ3RoID4gMDtcclxuICAgIH1cclxuICB9XHJcbiAgRXZlbnRlZC5FdmVudEVtaXR0ZXIgPSBFdmVudEVtaXR0ZXI7XHJcbiAgbGV0IEV2ZW50ZWRBY2Nlc3NvciA9IGNsYXNzIEV2ZW50ZWRBY2Nlc3NvciBleHRlbmRzIHUkRCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcclxuICAgICAgdGhpcy5fZW1pdHRlciA9IG5ldyBFdmVudGVkLkV2ZW50RW1pdHRlcigpO1xyXG4gICAgfVxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLy9cclxuICAgIC8vICBQdWJsaWMgTWV0aG9kc1xyXG4gICAgLy9cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIGVtaXQodHlwZSwgZXZlbnQpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2VtaXR0ZXIuZW1pdCh0eXBlLCBldmVudCk7XHJcbiAgICB9XHJcbiAgICBvbih0eXBlLCBsaXN0ZW5lcikge1xyXG4gICAgICByZXR1cm4gdGhpcy5fZW1pdHRlci5vbih0eXBlLCBsaXN0ZW5lcik7XHJcbiAgICB9XHJcbiAgICBvbmNlKHR5cGUsIGxpc3RlbmVyKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9lbWl0dGVyLm9uY2UodHlwZSwgbGlzdGVuZXIpO1xyXG4gICAgfVxyXG4gICAgaGFzRXZlbnRMaXN0ZW5lcih0eXBlKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9lbWl0dGVyLmhhc0V2ZW50TGlzdGVuZXIodHlwZSk7XHJcbiAgICB9XHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAvL1xyXG4gICAgLy8gRGVwcmVjYXRlIGFjY2Vzc2luZyBwcm9wZXJ0aWVzIHZpYVxyXG4gICAgLy9cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8qKlxyXG4gICAgICogQGRlcHJlY2F0ZWQgQWNjZXNzIHByb3BlcnRpZXMgZGlyZWN0bHkuXHJcbiAgICAgKi9cclxuICAgIGdldChuYW1lKSB7XHJcbiAgICAgIHJldHVybiBzdXBlci5nZXQobmFtZSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBkZXByZWNhdGVkIEFjY2VzcyBwcm9wZXJ0aWVzIGRpcmVjdGx5LlxyXG4gICAgICovXHJcbiAgICBzZXQobmFtZSwgdmFsdWUpIHtcclxuICAgICAgcmV0dXJuIHN1cGVyLnNldChuYW1lLCB2YWx1ZSk7XHJcbiAgICB9XHJcbiAgfTtcclxuICBFdmVudGVkQWNjZXNzb3IgPSBfX2RlY29yYXRlKFtcclxuICAgIGkkWCgpXHJcbiAgXSwgRXZlbnRlZEFjY2Vzc29yKTtcclxuICBFdmVudGVkLkV2ZW50ZWRBY2Nlc3NvciA9IEV2ZW50ZWRBY2Nlc3NvcjtcclxufSkoRXZlbnRlZCB8fCAoRXZlbnRlZCA9IHt9KSk7XHJcbmNvbnN0IEV2ZW50ZWQkMSA9IEV2ZW50ZWQ7XG5cbi8qKlxyXG4gKiBUaGlzIHdpZGdldCBhbGxvd3MgdG8gbWlncmF0ZSBmcm9tIGRpaml0L19UZW1wbGF0ZWRXaWRnZXQuanMuIFNvbWUgaW50ZXJmYWNlIGFuZCBsaWZlY3ljbGUgYXJlIHByZXNlcnZlZC5cclxuICpcclxuICogTElGRUNZQ0xFXHJcbiAqXHJcbiAqIDEuIGJ1aWxkUmVuZGVyaW5nKCkgPT4gZG9tTm9kZSBpcyBjb25zdHJ1Y3RlZCBmcm9tIHRoZSB0ZW1wbGF0ZS5cclxuICogMi4gc2V0dGVycyBhcmUgYXBwbGllZC5cclxuICogMy4gcG9zdENyZWF0ZWQoKSBpcyBjYWxsZWQuXHJcbiAqL1xyXG5jb25zdCBTUEFDRVNfUkUgPSAvPlxccys8L2c7XHJcbi8qKlxyXG4gKiBSZXBsYWNlcyBOTFMgYW5kIHByb3ZpZGVzIHJlZmVyZW5jZXMgdG8gbm9kZXMgd2l0aCBcImRhdGEtYXR0YWNoLXBvaW50XCIgc3BlY2lmaWVkLlxyXG4gKiBPbmx5IG9uZSBvdXRlciBub2RlIGlzIHN1cHBvcnRlZC5cclxuICogQGV4YW1wbGVcclxuICogPGRpdj5cclxuICogICAgPGRpdiBjbGFzcz1cImNsYXNzQVwiIGRhdGEtYXR0YWNoLXBvaW50PVwibm9kZUFcIj5Tb21lIHRleHQ8L2Rpdj5cclxuICogPC9kaXY+XHJcbiAqL1xyXG5mdW5jdGlvbiBfcGFyc2VUZW1wbGF0ZVN0cmluZyh3aWRnZXQpIHtcclxuICBjb25zdCBfd2lkZ2V0ID0gd2lkZ2V0OyAvLyBuZWVkIHRvIGNhc3QgdG8gYW55IHRvIGFjY2VzcyBwcm90ZWN0ZWQgcHJvcGVydGllcyBhbmQgYXNzaWduIGFyYml0cmFyeSBwcm9wZXJ0aWVzIGZyb20gdGhlIHRlbXBsYXRlXHJcbiAgbGV0IHRlbXBsYXRlU3RyaW5nID0gdHlwZW9mIF93aWRnZXQuX3RlbXBsYXRlU3RyaW5nID09PSBcImZ1bmN0aW9uXCIgPyBfd2lkZ2V0Ll90ZW1wbGF0ZVN0cmluZygpIDogX3dpZGdldC5fdGVtcGxhdGVTdHJpbmc7XHJcbiAgLy8gcmVtb3ZlIGFueSBmb3JtYXR0aW5nIChub3Qgc3VwcG9ydGVkIGJ5IFRlbXBsYXRlZFdpZGdldC50cylcclxuICB0ZW1wbGF0ZVN0cmluZyA9IHRlbXBsYXRlU3RyaW5nLnJlcGxhY2UoU1BBQ0VTX1JFLCBcIj48XCIpO1xyXG4gIGNvbnN0IGRvbU5vZGUgPSB0b0RvbSh0ZW1wbGF0ZVN0cmluZyk7XHJcbiAgdHJhdmVyc2VDaGlsZHJlbihkb21Ob2RlLCAobm9kZSkgPT4ge1xyXG4gICAgY29uc3QgZG9qb1JlZiA9IG5vZGUuZ2V0QXR0cmlidXRlKFwiZGF0YS1kb2pvLWF0dGFjaC1wb2ludFwiKTtcclxuICAgIGlmIChkb2pvUmVmKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJEZXByZWNhdGVkICdkYXRhLWRvam8tYXR0YWNoLXBvaW50JyBpcyB1c2VkLiBSZXBsYWNlIHdpdGggJ2RhdGEtYXR0YWNoLXBvaW50Jy5cIik7XHJcbiAgICB9XHJcbiAgICBjb25zdCByZWYgPSBkb2pvUmVmIHx8IG5vZGUuZ2V0QXR0cmlidXRlKFwiZGF0YS1hdHRhY2gtcG9pbnRcIik7XHJcbiAgICBpZiAocmVmKSB7XHJcbiAgICAgIF93aWRnZXRbcmVmXSA9IG5vZGU7XHJcbiAgICB9XHJcbiAgfSk7XHJcbiAgcmV0dXJuIGRvbU5vZGU7XHJcbn1cclxuZnVuY3Rpb24gX2J5SWQobm9kZSkge1xyXG4gIHJldHVybiB0eXBlb2Ygbm9kZSA9PT0gXCJzdHJpbmdcIiA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG5vZGUpIDogbm9kZTtcclxufVxyXG5sZXQgVGVtcGxhdGVkV2lkZ2V0ID0gY2xhc3MgVGVtcGxhdGVkV2lkZ2V0IGV4dGVuZHMgRXZlbnRlZCQxLkV2ZW50ZWRBY2Nlc3NvciB7XHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vXHJcbiAgLy8gTGlmZWN5Y2xlXHJcbiAgLy9cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLyoqXHJcbiAgICogQ29uc3RydWN0cyB0aGlzIHdpZGdldC5cclxuICAgKiBAcGFyYW0gcGFyYW1zIFBhcm1ldGVycyB0byBhcHBseSB0byB0aGUgd2lkZ2V0LiBGb3IgZXZlcnkgcGFyYW1ldGVyIGEgY29ycmVzcG9uZGluZyBzZXR0ZXIgd2lsbCBiZSB0cmlnZ2VyZWQgaWYgaW1wbGVtZW50ZWQuXHJcbiAgICogQHBhcmFtIHJlZk5vZGUgT3B0aW9uYWwgZG9tIG5vZGUgdG8gcGxhY2UgdGhlIHdpZGdldCdzIGRvbSBub2RlIGluc3RlYWQgb2Ygb3IgaW50by4gQ2FuIGJlIHNwZWNpZmllZCBieSBhbiBIVE1MIGlkLiBUaGUgYmVoYXZpb3IgaXMgY29udHJvbGxlZCBieSBfcmVmTm9kZUJlaGF2b2lyIGF0dHJpYnV0ZS5cclxuICAgKi9cclxuICBjb25zdHJ1Y3RvcihfcGFyYW1zLCByZWZOb2RlLCBwb3NpdGlvbikge1xyXG4gICAgc3VwZXIoX3BhcmFtcyk7XHJcbiAgICAvKipcclxuICAgICAqIFNwZWNpZmllcyBob3cgdG8gdHJlYXQgdGhlIHJlZk5vZGUgcGFzc2VkIGluIHRoZSBjb25zdHJ1Y3Rvci5cclxuICAgICAqIC0gXCJyZXBsYWNlXCIgLSB0aGUgZG9tTm9kZSB3aWxsIHJlcGxhY2UgdGhlIHJlZiBub2RlLiBJdCdzIHRoZSBkZWZhdWx0IGJlaGF2aW9yIGFzIGluIGRpaml0L19UZW1wbGF0ZWRXaWRnZXQuanMuXHJcbiAgICAgKiAtIFwiYWRkXCIgLSB0aGUgZG9tTm9kZSB3aWxsIGJlIGFkZGVkIHRvIHRoZSByZWYgbm9kZS5cclxuICAgICAqL1xyXG4gICAgdGhpcy5fcmVmTm9kZUJlaGF2b2lyID0gXCJyZXBsYWNlXCI7IC8vIFwiYWRkXCIgfCBcInJlcGxhY2VcIlxyXG4gICAgdGhpcy5fcmVmTm9kZSA9IF9ieUlkKHJlZk5vZGUpO1xyXG4gICAgdGhpcy5fcmVmUG9zaXRpb24gPSBwb3NpdGlvbjtcclxuICB9XHJcbiAgLy8gb3ZlcnJpZGUgKHNlZSBBY2Nlc3Nvci5qcylcclxuICAvLyBBdCB0aGlzIHBvaW50IGFsbCBzZXR0ZXJzIGhhdmUgYmVlbiBhcHBsaWVkLlxyXG4gIGluaXRpYWxpemUoKSB7XHJcbiAgICB0aGlzLmJ1aWxkUmVuZGVyaW5nKCk7XHJcbiAgICB0aGlzLnBvc3RDcmVhdGUoKTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogUmVuZGVycyB0aGUgd2lkZ2V0J3MgRE9NIGFuZCBhcHBsaWVzIENTUyBjbGFzc2VzLlxyXG4gICAqIENhbGxlZCBhZnRlciB0aGUgc2V0dGVycyBhcmUgYXBwbGllZC5cclxuICAgKi9cclxuICBidWlsZFJlbmRlcmluZygpIHtcclxuICAgIHRoaXMuZG9tTm9kZSA9IHRoaXMuX3RlbXBsYXRlU3RyaW5nXHJcbiAgICAgID8gX3BhcnNlVGVtcGxhdGVTdHJpbmcodGhpcylcclxuICAgICAgOiB0aGlzLl9yZWZOb2RlICYmIHRoaXMuX3JlZk5vZGVCZWhhdm9pciA9PT0gXCJyZXBsYWNlXCJcclxuICAgICAgICA/IHRoaXMuX3JlZk5vZGVcclxuICAgICAgICA6IGNyZWF0ZShcImRpdlwiKTsgLy8gYXQgdGhpcyBwb2ludCByZW5kZXIoKSBtZXRob2QgaXMgY2FsbGVkXHJcbiAgICB0aGlzLmNsYXNzICYmIGFkZENsYXNzKHRoaXMuZG9tTm9kZSwgdGhpcy5jbGFzcyk7XHJcbiAgICBpZiAodGhpcy5fcmVmTm9kZSAmJiB0aGlzLmRvbU5vZGUgIT09IHRoaXMuX3JlZk5vZGUpIHtcclxuICAgICAgY29uc3QgaWQgPSB0aGlzLl9yZWZOb2RlLmlkO1xyXG4gICAgICBwbGFjZSh0aGlzLmRvbU5vZGUsIHRoaXMuX3JlZk5vZGUsIHRoaXMuX3JlZk5vZGVCZWhhdm9pciA9PT0gXCJyZXBsYWNlXCIgPyBcInJlcGxhY2VcIiA6IHRoaXMuX3JlZlBvc2l0aW9uKTtcclxuICAgICAgLy8gcHJlc2VydmUgaWRcclxuICAgICAgaWYgKGlkICYmIHRoaXMuX3JlZk5vZGVCZWhhdm9pciA9PT0gXCJyZXBsYWNlXCIpIHtcclxuICAgICAgICB0aGlzLmRvbU5vZGUuaWQgPSBpZDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gbm8gbmVlZCB0byBob2xkIHRoZXNlIHJlZmVyZW5jZXNcclxuICAgIHRoaXMuX3JlZk5vZGUgPSBudWxsO1xyXG4gICAgdGhpcy5fcmVmUG9zaXRpb24gPSBudWxsO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBDYWxsZWQgYWZ0ZXIgdGhlIGRvbU5vZGUgaXMgZnVsbHkgY3JlYXRlZCBmcm9tIHRoZSB0ZW1wbGF0ZSBhbmQgc2V0dGVycyBhcmUgYXBwbGllZC5cclxuICAgKi9cclxuICBwb3N0Q3JlYXRlKCkgeyB9XHJcbiAgLyoqXHJcbiAgICogTXVzdCBiZSBjYWxsZWQgdG8gZGlzcG9zZSB0aGUgd2lkZ2V0LlxyXG4gICAqXHJcbiAgICogTm90ZTogdGhpcyBtZXRob2QgaXMgY2hhaW5lZCBpbiBBY2Nlc3Nvci5qcywgc28gdGhlcmUgaXMgbm8gbmVlZCB0byBjYWxsIHN1cGVyLmRlc3Ryb3koKS5cclxuICAgKi9cclxuICBkZXN0cm95KCkge1xyXG4gICAgZGVzdHJveSh0aGlzLmRvbU5vZGUpO1xyXG4gICAgdGhpcy5kb21Ob2RlID0gbnVsbDtcclxuICAgIHRoaXMuX2ludGVybmFsSGFuZGxlcyAmJiB0aGlzLl9pbnRlcm5hbEhhbmRsZXMuZGVzdHJveSgpO1xyXG4gICAgdGhpcy5fb25EaXNwbGF5ZWQgJiYgdGhpcy5fb25EaXNwbGF5ZWQucmVtb3ZlKCk7XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vIFBsYWNlIGluIHBhcmVudFxyXG4gIC8vXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8qKlxyXG4gICAqIE1ldGhvZCB0byBwbGFjZSB0aGUgZG9tTm9kZSBpbnRvIGFub3RoZXIgbm9kZS5cclxuICAgKi9cclxuICBwbGFjZUF0KHBhcmVudE5vZGUsIHBvc2l0aW9uKSB7XHJcbiAgICBwYXJlbnROb2RlICYmIHBsYWNlKHRoaXMuZG9tTm9kZSwgX2J5SWQocGFyZW50Tm9kZSksIHBvc2l0aW9uKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBDb252ZW5pZW5jZSBtZXRob2QgdG8gb3duIGhhbmRsZXMgYW5kIG90aGVyIHdpZGdldCBvdXRzaWRlIG9mIHRoZSB3aWRnZXQuXHJcbiAgICovXHJcbiAgb3duKGhhbmRsZU9yV2lkZ2V0KSB7XHJcbiAgICBjb25zdCBvbmVUaW1lSGFuZGxlID0ge1xyXG4gICAgICByZW1vdmU6ICgpID0+IHtcclxuICAgICAgICBpZiAodHlwZW9mIGhhbmRsZU9yV2lkZ2V0LmRlc3Ryb3kgPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgICAgaWYgKGhhbmRsZU9yV2lkZ2V0LmRlc3Ryb3llZCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiV0FSTklORzogTXVsdGlwbGUgYXR0ZW1wdHMgdG8gZGlzcG9zZSByZXNvdXJjZXMhXCIpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGhhbmRsZU9yV2lkZ2V0LmRlc3Ryb3koKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICBoYW5kbGVPcldpZGdldC5yZW1vdmUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gcHJldmVudCBtdWx0aXBsZSByZW1vdmVcclxuICAgICAgICBvbmVUaW1lSGFuZGxlLnJlbW92ZSA9ICgpID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJXQVJOSU5HOiBNdWx0aXBsZSBhdHRlbXB0cyB0byBkaXNwb3NlIHJlc291cmNlcyFcIik7XHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRoaXMuX2ludGVybmFsSGFuZGxlcyA9IHRoaXMuX2ludGVybmFsSGFuZGxlcyB8fCBuZXcgdSRCKCk7XHJcbiAgICB0aGlzLl9pbnRlcm5hbEhhbmRsZXMuYWRkKG9uZVRpbWVIYW5kbGUpO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBPbmNlIGVsZW1lbnQgaXMgdmlzaWJsZSBvbiBwYWdlIHByb21pc2UgZ2V0cyByZXNvbHZlZCAocmVhbGx5IGhlbHBmdWwgaWYgeW91IG5lZWQgZWxlbWVudCdzIHNpemVzIG9yIGNvbXB1dGVkIHN0eWxlcylcclxuICAgKi9cclxuICBnZXQgb25EaXNwbGF5ZWQoKSB7XHJcbiAgICBpZiAoIXRoaXMuX29uRGlzcGxheWVkKSB7XHJcbiAgICAgIHRoaXMuX29uRGlzcGxheWVkID0gb25EaXNwbGF5ZWQodGhpcy5kb21Ob2RlKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLl9vbkRpc3BsYXllZC5wcm9taXNlO1xyXG4gIH1cclxufTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKClcclxuXSwgVGVtcGxhdGVkV2lkZ2V0LnByb3RvdHlwZSwgXCJjbGFzc1wiLCB2b2lkIDApO1xyXG5UZW1wbGF0ZWRXaWRnZXQgPSBfX2RlY29yYXRlKFtcclxuICBpJFgoKVxyXG5dLCBUZW1wbGF0ZWRXaWRnZXQpO1xuXG4vLyBlc3JpNC5jb3JlXHJcbmZ1bmN0aW9uIGlzQ3RybEtleShldmVudCkge1xyXG4gIHJldHVybiB0JFAoXCJtYWNcIikgPyBldmVudC5tZXRhS2V5IDogZXZlbnQuY3RybEtleTtcclxufVxuXG4vLyBnZW9lbnJpY2htZW50LnV0aWxzXHJcbmNvbnN0IE1PQklMRV9UT0xFUkFOQ0UgPSAxMDtcclxuY29uc3QgTE9OR19QUkVTU19USU1FT1VUID0gNTAwO1xyXG5mdW5jdGlvbiBhZGROb0RyYWdDbGlja0hhbmRsZXIobm9kZSwgY2FsbGJhY2ssIHBhcmFtcykge1xyXG4gIHJldHVybiBpc01vYmlsZURldmljZSgpID8gX2FkZE1vYmlsZShub2RlLCBjYWxsYmFjaywgcGFyYW1zKSA6IF9hZGRQQyhub2RlLCBjYWxsYmFjaywgcGFyYW1zKTtcclxufVxyXG5mdW5jdGlvbiBfYWRkUEMobm9kZSwgY2FsbGJhY2ssIHBhcmFtcykge1xyXG4gIHBhcmFtcyA9IHBhcmFtcyB8fCB7fTtcclxuICBjb25zdCB0b2xlcmFuY2UgPSBwYXJhbXMudG9sZXJhbmNlIHx8IDA7XHJcbiAgbGV0IG1vdmVIO1xyXG4gIGxldCB1cEg7XHJcbiAgY29uc3QgZG93bkggPSBvbihub2RlLCBcInByZXNzXCIsIChldmVudCkgPT4ge1xyXG4gICAgdXBIICYmIHVwSC5yZW1vdmUoKTtcclxuICAgIGNvbnN0IHN4ID0gZXZlbnQucGFnZVg7XHJcbiAgICBjb25zdCBzeSA9IGV2ZW50LnBhZ2VZO1xyXG4gICAgbGV0IG1vdmVIYXBwZW5lZDtcclxuICAgIG1vdmVIID0gb24oZG9jdW1lbnQuYm9keSwgXCJtb3ZlXCIsIChldmVudCkgPT4ge1xyXG4gICAgICBpZiAoZXZlbnQuc2hpZnRLZXkgfHwgaXNDdHJsS2V5KGV2ZW50KSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBjeCA9IGV2ZW50LnBhZ2VYO1xyXG4gICAgICBjb25zdCBjeSA9IGV2ZW50LnBhZ2VZO1xyXG4gICAgICBpZiAoTWF0aC5hYnMoY3ggLSBzeCkgPiB0b2xlcmFuY2UgfHwgTWF0aC5hYnMoY3kgLSBzeSkgPiB0b2xlcmFuY2UpIHtcclxuICAgICAgICBtb3ZlSGFwcGVuZWQgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHVwSCA9IG9uY2UoZG9jdW1lbnQuYm9keSwgXCJyZWxlYXNlXCIsIChldmVudCkgPT4ge1xyXG4gICAgICBtb3ZlSC5yZW1vdmUoKTtcclxuICAgICAgY29uc3QgY3ggPSBldmVudC5wYWdlWDtcclxuICAgICAgY29uc3QgY3kgPSBldmVudC5wYWdlWTtcclxuICAgICAgaWYgKCFtb3ZlSGFwcGVuZWQgJiYgTWF0aC5hYnMoY3ggLSBzeCkgPD0gdG9sZXJhbmNlICYmIE1hdGguYWJzKGN5IC0gc3kpIDw9IHRvbGVyYW5jZSkge1xyXG4gICAgICAgIGNhbGxiYWNrKGV2ZW50KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSk7XHJcbiAgcmV0dXJuIHtcclxuICAgIHJlbW92ZSgpIHtcclxuICAgICAgbW92ZUggJiYgbW92ZUgucmVtb3ZlKCk7XHJcbiAgICAgIHVwSCAmJiB1cEgucmVtb3ZlKCk7XHJcbiAgICAgIGRvd25IICYmIGRvd25ILnJlbW92ZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcbn1cclxuZnVuY3Rpb24gX2FkZE1vYmlsZShub2RlLCBjYWxsYmFjaywgcGFyYW1zKSB7XHJcbiAgcGFyYW1zID0gcGFyYW1zIHx8IHt9O1xyXG4gIGNvbnN0IHRvbGVyYW5jZSA9IHBhcmFtcy50b2xlcmFuY2UgfHwgTU9CSUxFX1RPTEVSQU5DRTtcclxuICBsZXQgc3RhcnRILCBlbmRILCBtb3ZlSCwgY2FuY2VsSCwgbG9uZ1ByZXNzVGltZW91dEg7XHJcbiAgZnVuY3Rpb24gY2xlYW51cCgpIHtcclxuICAgIGVuZEggJiYgZW5kSC5yZW1vdmUoKTtcclxuICAgIG1vdmVIICYmIG1vdmVILnJlbW92ZSgpO1xyXG4gICAgY2FuY2VsSCAmJiBjYW5jZWxILnJlbW92ZSgpO1xyXG4gICAgY2xlYXJUaW1lb3V0KGxvbmdQcmVzc1RpbWVvdXRIKTtcclxuICB9XHJcbiAgc3RhcnRIID0gb24obm9kZSwgXCJ0b3VjaHN0YXJ0XCIsIChldmVudFN0YXJ0KSA9PiB7XHJcbiAgICBjbGVhbnVwKCk7XHJcbiAgICBsZXQgaWdub3JlVG91Y2hFbmQ7XHJcbiAgICBmdW5jdGlvbiBfY2FuQ2FsbENhbGxiYWNrKGV2ZW50RW5kKSB7XHJcbiAgICAgIGNvbnN0IGVzID0gZml4VG91Y2hFdmVudChldmVudFN0YXJ0KTtcclxuICAgICAgY29uc3QgZWUgPSBmaXhUb3VjaEV2ZW50KGV2ZW50RW5kKTtcclxuICAgICAgcmV0dXJuIE1hdGguYWJzKGVzLnBhZ2VYIC0gZWUucGFnZVgpIDwgdG9sZXJhbmNlICYmIE1hdGguYWJzKGVzLnBhZ2VZIC0gZWUucGFnZVkpIDwgdG9sZXJhbmNlO1xyXG4gICAgfVxyXG4gICAgaWYgKHBhcmFtcy5kZXRlY3RMb25nUHJlc3MpIHtcclxuICAgICAgbGV0IG1vdmVFdmVudDtcclxuICAgICAgbW92ZUggPSBvbihub2RlLCBcInRvdWNobW92ZVwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgICBtb3ZlRXZlbnQgPSBldmVudDtcclxuICAgICAgfSk7XHJcbiAgICAgIGxvbmdQcmVzc1RpbWVvdXRIID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgaWYgKF9jYW5DYWxsQ2FsbGJhY2sobW92ZUV2ZW50IHx8IGV2ZW50U3RhcnQpKSB7XHJcbiAgICAgICAgICBpZiAocGFyYW1zLmlnbm9yZVJlbGVhc2VJZkxvbmdQcmVzc0hhcHBlbmVkKSB7XHJcbiAgICAgICAgICAgIGlnbm9yZVRvdWNoRW5kID0gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHBhcmFtcy5sb25nUHJlc3NDYWxsYmFjayhldmVudFN0YXJ0KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sIHBhcmFtcy5sb25nUHJlc3NUaW1lb3V0IHx8IExPTkdfUFJFU1NfVElNRU9VVCk7XHJcbiAgICB9XHJcbiAgICBlbmRIID0gb25jZShub2RlLCBcInRvdWNoZW5kXCIsIChldmVudEVuZCkgPT4ge1xyXG4gICAgICAhaWdub3JlVG91Y2hFbmQgJiYgX2NhbkNhbGxDYWxsYmFjayhldmVudEVuZCkgJiYgY2FsbGJhY2soZXZlbnRFbmQpO1xyXG4gICAgICBjbGVhbnVwKCk7XHJcbiAgICB9KTtcclxuICAgIGNhbmNlbEggPSBvbmNlKG5vZGUsIFwidG91Y2hjYW5jZWxcIiwgY2xlYW51cCk7XHJcbiAgfSk7XHJcbiAgcmV0dXJuIHtcclxuICAgIHJlbW92ZTogKCkgPT4ge1xyXG4gICAgICBzdGFydEggJiYgc3RhcnRILnJlbW92ZSgpO1xyXG4gICAgICBjbGVhbnVwKCk7XHJcbiAgICB9XHJcbiAgfTtcclxufVxuXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8vXHJcbi8vICBNaXhpblxyXG4vL1xyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbmZ1bmN0aW9uIG1peGluKHRhcmdldCA9IHt9LCAuLi5zb3VyY2VzKSB7XHJcbiAgZm9yIChjb25zdCBzb3VyY2Ugb2Ygc291cmNlcykge1xyXG4gICAgX21peGluKHRhcmdldCwgc291cmNlKTtcclxuICB9XHJcbiAgcmV0dXJuIHRhcmdldDtcclxufVxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8vXHJcbi8vICBQcml2YXRlIE1ldGhvZHNcclxuLy9cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5mdW5jdGlvbiBfbWl4aW4oZGVzdCwgc3JjLCBjb3B5RnVuYykge1xyXG4gIGxldCBuYW1lLCBzO1xyXG4gIGNvbnN0IGVtcHR5ID0ge307XHJcbiAgZm9yIChuYW1lIGluIHNyYykge1xyXG4gICAgLy8gdGhlICghKG5hbWUgaW4gZW1wdHkpIHx8IGVtcHR5W25hbWVdICE9PSBzKSBjb25kaXRpb24gYXZvaWRzIGNvcHlpbmcgcHJvcGVydGllcyBpbiBcInNyY1wiXHJcbiAgICAvLyBpbmhlcml0ZWQgZnJvbSBPYmplY3QucHJvdG90eXBlLlx0IEZvciBleGFtcGxlLCBpZiBkZXN0IGhhcyBhIGN1c3RvbSB0b1N0cmluZygpIG1ldGhvZCxcclxuICAgIC8vIGRvbid0IG92ZXJ3cml0ZSBpdCB3aXRoIHRoZSB0b1N0cmluZygpIG1ldGhvZCB0aGF0IHNvdXJjZSBpbmhlcml0ZWQgZnJvbSBPYmplY3QucHJvdG90eXBlXHJcbiAgICBzID0gc3JjW25hbWVdO1xyXG4gICAgY29uc3QgaXNQcm9wTm90SW5oZXJpdGVkID0gIShuYW1lIGluIGVtcHR5KSB8fCBlbXB0eVtuYW1lXSAhPT0gcztcclxuICAgIGlmICghKG5hbWUgaW4gZGVzdCkgfHwgKGRlc3RbbmFtZV0gIT09IHMgJiYgaXNQcm9wTm90SW5oZXJpdGVkKSkge1xyXG4gICAgICBkZXN0W25hbWVdID0gY29weUZ1bmMgPyBjb3B5RnVuYyhzKSA6IHM7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBkZXN0O1xyXG59XG5cbmNvbnN0IFhNTF9FTkNPREVfUkUgPSAvJnw8fD4vZywgWE1MX0VOQ09ERV9SRV9GVUxMID0gLyZ8PHw+fFwifCcvZywgWE1MX0VOQ09ERV9NQVBQSU5HID0ge1xyXG4gIFwiJlwiOiBcIiZhbXA7XCIsXHJcbiAgXCI8XCI6IFwiJmx0O1wiLFxyXG4gIFwiPlwiOiBcIiZndDtcIixcclxuICAnXCInOiBcIiZxdW90O1wiLFxyXG4gIFwiJ1wiOiBcIiZhcG9zO1wiXHJcbn07XHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuLy9cclxuLy8gR2VuZXJhbCByZXBsYWNlbWVudCBieSBtYXBwaW5nLlxyXG4vL1xyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8qKlxyXG4gKiBSZXBsYWNlcyB0b2tlbnMgZm91bmQgYnkgcmVnZXhwIHdpdGggb3RoZXIgdG9rZW5zIHVzaW5nIHRoZSBnaXZlbiBtYXBwaW5nLlxyXG4gKiBAcGFyYW0gc3RyICAgICAgICAgICAgIENvbnZlcnRlZCBzdHJpbmdcclxuICogQHBhcmFtIHJlICAgICAgICAgICAgICBSZWd1bGFyIGV4cHJlc3Npb24gbGlrZSAvJnw8fD58XCJ8Jy9nLlxyXG4gKiBAcGFyYW0gbWFwcGluZzogICAgICAgIFRva2VucyBtYXBwaW5nIGxpa2UgeyBcIiZcIjogXCImYW1wO1wiLCBcIjxcIjogXCImbHQ7XCIsIC4uLiB9XHJcbiAqL1xyXG5mdW5jdGlvbiByZXBsYWNlKHN0ciwgcmUsIG1hcHBpbmcpIHtcclxuICByZXR1cm4gc3RyID09IG51bGwgPyBcIlwiIDogKFwiXCIgKyBzdHIpLnJlcGxhY2UocmUsIChtYXRjaCkgPT4gbWFwcGluZ1ttYXRjaF0gfHwgXCJcIik7XHJcbn1cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vL1xyXG4vLyBFbmNvZGUvZGVjb2RlIFhNTFxyXG4vL1xyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8qKlxyXG4gKiBFbmNvZGVzIFhNTCBtYXJrdXAgc3ltYm9scyB3aXRoIFhNTCBlc2NhcGUgc2VxdWVuY2VzOlxyXG4gKlxyXG4gKiAtICcmJyAtPiAnXFwmYW1wOydcclxuICogLSAnPCcgLT4gJ1xcJmx0OydcclxuICogLSAnPicgLT4gJ1xcJmd0OydcclxuICogLSBldGMuXHJcbiAqXHJcbiAqIElmIG1hc2tRdW90ZXMgaXMgdHJ1ZSwgdGhlIGRvdWJsZSBxdW90ZSBhbmQgc2luZ2xlIHF1b3RlIGFyZSBhbHNvIGVzY2FwZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiBlbmNvZGVYTUwoc3RyLCBtYXNrUXVvdGVzKSB7XHJcbiAgcmV0dXJuIHJlcGxhY2Uoc3RyLCBtYXNrUXVvdGVzID8gWE1MX0VOQ09ERV9SRV9GVUxMIDogWE1MX0VOQ09ERV9SRSwgWE1MX0VOQ09ERV9NQVBQSU5HKTtcclxufVxyXG5jb25zdCBJU19VUkxfUkUgPSAvKCh3d3dcXC58aHR0cDpcXC9cXC98aHR0cHM6XFwvXFwvKVtBLVphLXowLTlfLlxcLX5dK1xcLltBLVphLXowLTlfLlxcLX4vXSspfChbQS1aYS16MC05Xy5cXC1+XStcXC5jb21bQS1aYS16MC05Xy5cXC1+L10qKS87XHJcbi8vTWV0aG9kcyBiZWxvdyBhcmUgbW92ZWQgZnJvbSBlc3JpQW5hbHlzdFgsIGJ1dCBjb21tZW50ZWQgYmVjYXVzZSBub3QgdXNlZC5cclxuLypcclxuIC8qKlxyXG4gKiBDcmVhdGVzIGEgcmVnIGV4cCAoZXNjYXBpbmcgc3BlY2lhbCBzeW1ib2xzKVxyXG4gKiAvXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVSZWdFeHBFc2NhcGVTcGVjaWFsKHRleHQ6IHN0cmluZywgZmxhZ3M6IHN0cmluZyk6IFJlZ0V4cCB7XHJcbiAgcmV0dXJuIG5ldyBSZWdFeHAoZXNjYXBlU3BlY2lhbCh0ZXh0KSwgZmxhZ3MpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZXNjYXBlU3BlY2lhbCh0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gIHJldHVybiB0ZXh0LnJlcGxhY2UoL1stW1xcXXt9KCkqKz8uLFxcXFxeJHwjXFxzXS9nLCBcIlxcXFwkJlwiKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEVtYWlsVmFsaWRhdGlvblBhdHRlcm4oKTogc3RyaW5nIHtcclxuICByZXR1cm4gXCJcXFxccypbXFxcXHdcXFxcV1xcXFwtXStAW1xcXFx3XFxcXFdcXFxcLV0rXFxcXC5bYS16QS1aXXsyLDR9KFxcXFxzKjtcXFxccypbXFxcXHdcXFxcV1xcXFwtXStAW1xcXFx3XFxcXFdcXFxcLV0rXFxcXC5bYS16QS1aXXsyLDR9KSpcXFxccyo7KlxcXFxzKlwiO1xyXG59XHJcbiovXG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5jb25zdCB0JHU9XCI0LjE5XCIsbyRtPXtyZXF1ZXN0OihlLHIpPT5Qcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlcXVlc3Q7IH0pLnRoZW4oKCh7ZGVmYXVsdDp0fSk9Pntjb25zdCBvPWUub3B0aW9uc3x8e307cmV0dXJuIG8ucmVzcG9uc2VUeXBlPVwiYXJyYXktYnVmZmVyXCIsby5zaWduYWw9bnVsbD09cj92b2lkIDA6ci5zaWduYWwsdChlLnVybCxvKX0pKS50aGVuKChlPT4oe3Jlc3VsdDp7ZGF0YTplLmRhdGEsc3NsOmUuc3NsfSx0cmFuc2Zlckxpc3Q6W2UuZGF0YV19KSkpfTtsZXQgcyRyO2Z1bmN0aW9uIG4kRShlKXtzJHI9ZTt9ZnVuY3Rpb24gaSRRKGUpe2NvbnN0IHQ9cyRyJiZzJHIuZmluZENyZWRlbnRpYWwoZSk7cmV0dXJuIHQmJnQudG9rZW4/YnQoZSxcInRva2VuXCIsdC50b2tlbik6ZX10JFAoXCJob3N0LXdlYndvcmtlclwiKXx8KHQkUChcImVkZ2VcIil8fHQkUChcInRyaWRlbnRcIikpJiZjb25zb2xlLndhcm4oXCJEZXByZWNhdGVkIGJyb3dzZXIgLSBzZWUgaHR0cDovL2Vzcml1cmwuY29tL29sZGJyb3dzZXJcIik7XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5jb25zdCB0JHQ9W1wiZWxldmF0aW9uM2QuYXJjZ2lzLmNvbVwiLFwianMuYXJjZ2lzLmNvbVwiLFwianNkZXYuYXJjZ2lzLmNvbVwiLFwianNxYS5hcmNnaXMuY29tXCIsXCJzdGF0aWMuYXJjZ2lzLmNvbVwiXTtmdW5jdGlvbiByJGooYyl7Y29uc3Qgcj1NJGEoYywhMCk7cmV0dXJuIHImJnIuZW5kc1dpdGgoXCIuYXJjZ2lzLmNvbVwiKSYmIXQkdC5pbmNsdWRlcyhyKSYmIWMuZW5kc1dpdGgoXCIvc2hhcmluZy9yZXN0L2dlbmVyYXRlVG9rZW5cIil9XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5mdW5jdGlvbiB0JHModCxpLHM9ITEsYyl7cmV0dXJuIG5ldyBQcm9taXNlKCgoZCxhKT0+e2lmKGIkYihjKSlyZXR1cm4gdm9pZCBhKG4kRCgpKTtsZXQgbT0oKT0+e3YoKSxhKG5ldyBFcnJvcihgVW5hYmxlIHRvIGxvYWQgJHtpfWApKTt9LGw9KCk9Pntjb25zdCBlPXQ7digpLGQoZSk7fSx1PSgpPT57aWYoIXQpcmV0dXJuO2NvbnN0IGU9dDt2KCksZS5zcmM9XCJcIixhKG4kRCgpKTt9O2NvbnN0IHY9KCk9Pnt0JFAoXCJlc3JpLWltYWdlLWRlY29kZVwiKXx8KHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsbSksdC5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9hZFwiLGwpKSxtPW51bGwsbD1udWxsLHQ9bnVsbCxyJEEoYykmJmMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsdSksdT1udWxsLHMmJlVSTC5yZXZva2VPYmplY3RVUkwoaSk7fTtyJEEoYykmJmMuYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsdSksdCRQKFwiZXNyaS1pbWFnZS1kZWNvZGVcIik/dC5kZWNvZGUoKS50aGVuKGwsbSk6KHQuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsbSksdC5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLGwpKTt9KSl9ZnVuY3Rpb24gbiREKCl7dHJ5e3JldHVybiBuZXcgRE9NRXhjZXB0aW9uKFwiQWJvcnRlZFwiLFwiQWJvcnRFcnJvclwiKX1jYXRjaHtjb25zdCBlPW5ldyBFcnJvcjtyZXR1cm4gZS5uYW1lPVwiQWJvcnRFcnJvclwiLGV9fVxuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuYXN5bmMgZnVuY3Rpb24gVSQxKGUscil7Y29uc3Qgbz1HJDYoZSksbj1GJDUoZSk7bnx8b3x8KGU9eiQ2KGUpKTtjb25zdCBjPXt1cmw6ZSxyZXF1ZXN0T3B0aW9uczp7Li4uZSRJKHIpfX07bGV0IGQ9QiQ1KGUpO2lmKGQpe2NvbnN0IGU9YXdhaXQgeiQ0KGQsYyk7aWYobnVsbCE9ZSlyZXR1cm4ge2RhdGE6ZSxnZXRIZWFkZXI6UiQ3LHJlcXVlc3RPcHRpb25zOmMucmVxdWVzdE9wdGlvbnMsdXJsOmMudXJsfTtkLmFmdGVyfHxkLmVycm9yfHwoZD1udWxsKTt9aWYoZT1jLnVybCxcImltYWdlXCI9PT0ocj1jLnJlcXVlc3RPcHRpb25zKS5yZXNwb25zZVR5cGUpe2lmKHQkUChcImhvc3Qtd2Vid29ya2VyXCIpfHx0JFAoXCJob3N0LW5vZGVcIikpdGhyb3cgTiQzKFwicmVxdWVzdDppbnZhbGlkLXBhcmFtZXRlcnNcIixuZXcgRXJyb3IoXCJyZXNwb25zZVR5cGUgJ2ltYWdlJyBpcyBub3Qgc3VwcG9ydGVkIGluIFdlYiBXb3JrZXJzIG9yIE5vZGUgZW52aXJvbm1lbnRcIiksYyl9ZWxzZSBpZihvKXRocm93IE4kMyhcInJlcXVlc3Q6aW52YWxpZC1wYXJhbWV0ZXJzXCIsbmV3IEVycm9yKFwiRGF0YSBVUkxzIGFyZSBub3Qgc3VwcG9ydGVkIGZvciByZXNwb25zZVR5cGUgPSBcIityLnJlc3BvbnNlVHlwZSksYyk7aWYoXCJoZWFkXCI9PT1yLm1ldGhvZCl7aWYoci5ib2R5KXRocm93IE4kMyhcInJlcXVlc3Q6aW52YWxpZC1wYXJhbWV0ZXJzXCIsbmV3IEVycm9yKFwiYm9keSBwYXJhbWV0ZXIgY2Fubm90IGJlIHNldCB3aGVuIG1ldGhvZCBpcyAnaGVhZCdcIiksYyk7aWYob3x8bil0aHJvdyBOJDMoXCJyZXF1ZXN0OmludmFsaWQtcGFyYW1ldGVyc1wiLG5ldyBFcnJvcihcImRhdGEgYW5kIGJsb2IgVVJMcyBhcmUgbm90IHN1cHBvcnRlZCBmb3IgbWV0aG9kICdoZWFkJ1wiKSxjKX1pZihhd2FpdCBBJDYoKSxQJDUpcmV0dXJuIFAkNS5leGVjdXRlKGUscik7Y29uc3QgcD1oJHUoKTt2JDkociwoKCk9PnAuYWJvcnQoKSkpO2NvbnN0IG09e2NvbnRyb2xsZXI6cCxjcmVkZW50aWFsOm51bGwsY3JlZGVudGlhbFRva2VuOm51bGwsZmV0Y2hPcHRpb25zOm51bGwsaGFzVG9rZW46ITEsaW50ZXJjZXB0b3I6ZCxwYXJhbXM6YyxyZWRvUmVxdWVzdDohMSx1c2VJZGVudGl0eTpEJDQudXNlSWRlbnRpdHksdXNlUHJveHk6ITEsdXNlU1NMOiExLHdpdGhDcmVkZW50aWFsczohMX0saD1hd2FpdCBRJDEobSk7cmV0dXJuIGQmJmQuYWZ0ZXImJmQuYWZ0ZXIoaCksaH1sZXQgUCQ1O2NvbnN0IEQkND1zJEgucmVxdWVzdCxfJDI9XCJGb3JtRGF0YVwiaW4gZSRMLEYkMz1bNDk5LDQ5OCw0MDMsNDAxXSxJJDM9W1wiQ09NXzAwNTZcIixcIkNPTV8wMDU3XCIsXCJTQl8wMDA4XCJdLE0kOD1bL1xcL2FyY2dpc1xcL3Rva2Vucy9pLC9cXC9zaGFyaW5nKFxcL3Jlc3QpP1xcL2dlbmVyYXRldG9rZW4vaSwvXFwvcmVzdFxcL2luZm8vaV0sUiQ3PSgpPT5udWxsO2Z1bmN0aW9uIEgkMihlKXtpZihGJDUoZSl8fEckNihlKSlyZXR1cm47Y29uc3QgdD1NJGEoZSk7dCYmLTE9PT1VJDEuX2NvcnNTZXJ2ZXJzLmluZGV4T2YodCkmJlUkMS5fY29yc1NlcnZlcnMucHVzaCh0KTt9ZnVuY3Rpb24gQiQyKGUpe2NvbnN0IHQ9TSRhKGUpO3JldHVybiAhdHx8dC5lbmRzV2l0aChcIi5hcmNnaXMuY29tXCIpfHwtMSE9PVUkMS5fY29yc1NlcnZlcnMuaW5kZXhPZih0KXx8SiQzKHQpfWZ1bmN0aW9uIE4kMyhlLHQsbyxzKXtsZXQgYT1cIkVycm9yXCI7Y29uc3QgaT17dXJsOm8udXJsLHJlcXVlc3RPcHRpb25zOm8ucmVxdWVzdE9wdGlvbnMsZ2V0SGVhZGVyOlIkNyxzc2w6ITF9O2lmKHQgaW5zdGFuY2VvZiBzJHgpcmV0dXJuIHQuZGV0YWlscz8odC5kZXRhaWxzPXkkdih0LmRldGFpbHMpLHQuZGV0YWlscy51cmw9by51cmwsdC5kZXRhaWxzLnJlcXVlc3RPcHRpb25zPW8ucmVxdWVzdE9wdGlvbnMpOnQuZGV0YWlscz1pLHQ7aWYodCl7Y29uc3QgZT1zJiYoZT0+cy5oZWFkZXJzLmdldChlKSkscj1zJiZzLnN0YXR1cyxvPXQubWVzc2FnZTtvJiYoYT1vKSxlJiYoaS5nZXRIZWFkZXI9ZSksaS5odHRwU3RhdHVzPShudWxsIT10Lmh0dHBDb2RlP3QuaHR0cENvZGU6dC5jb2RlKXx8cnx8MCxpLnN1YkNvZGU9dC5zdWJjb2RlLGkubWVzc2FnZUNvZGU9dC5tZXNzYWdlQ29kZSxcInN0cmluZ1wiPT10eXBlb2YgdC5kZXRhaWxzP2kubWVzc2FnZXM9W3QuZGV0YWlsc106aS5tZXNzYWdlcz10LmRldGFpbHM7fXJldHVybiBnJGcodCk/bSR4KCk6bmV3IHMkeChlLGEsaSl9YXN5bmMgZnVuY3Rpb24gQSQ2KCl7dCRQKFwiaG9zdC13ZWJ3b3JrZXJcIik/UCQ1fHwoUCQ1PWF3YWl0IGltcG9ydCgnLi9yZXF1ZXN0LWE3NjI2ZTE4LmpzJykpOlUkMS5fYWJvcnRhYmxlRmV0Y2h8fChVJDEuX2Fib3J0YWJsZUZldGNoPWUkTC5mZXRjaC5iaW5kKGUkTCkpO31hc3luYyBmdW5jdGlvbiAkJDEoKXtzJHJ8fGF3YWl0IFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gSWRlbnRpdHlNYW5hZ2VyOyB9KTt9YXN5bmMgZnVuY3Rpb24gSyh0KXtjb25zdCByPXQucGFyYW1zLnVybCxzPXQucGFyYW1zLnJlcXVlc3RPcHRpb25zLG49dC5jb250cm9sbGVyLnNpZ25hbCxhPXMuYm9keTtsZXQgaT1udWxsLGw9bnVsbCx1PW51bGw7aWYoXyQyJiZcIkhUTUxGb3JtRWxlbWVudFwiaW4gZSRMJiYoYSBpbnN0YW5jZW9mIEZvcm1EYXRhP2k9YTphIGluc3RhbmNlb2YgSFRNTEZvcm1FbGVtZW50JiYobD1hLGk9bmV3IEZvcm1EYXRhKGwpKSksXCJzdHJpbmdcIj09dHlwZW9mIGEmJih1PWEpLHQuZmV0Y2hPcHRpb25zPXtjYWNoZTpzLmNhY2hlQnVzdCYmIVUkMS5fYWJvcnRhYmxlRmV0Y2gucG9seWZpbGw/XCJuby1jYWNoZVwiOlwiZGVmYXVsdFwiLGNyZWRlbnRpYWxzOlwic2FtZS1vcmlnaW5cIixoZWFkZXJzOnMuaGVhZGVyc3x8e30sbWV0aG9kOlwiaGVhZFwiPT09cy5tZXRob2Q/XCJIRUFEXCI6XCJHRVRcIixtb2RlOlwiY29yc1wiLHJlZGlyZWN0OlwiZm9sbG93XCIsc2lnbmFsOm59LChpfHx1KSYmKHQuZmV0Y2hPcHRpb25zLmJvZHk9aXx8dSksXCJhbm9ueW1vdXNcIj09PXMuYXV0aE1vZGUmJih0LnVzZUlkZW50aXR5PSExKSx0Lmhhc1Rva2VuPSEhKC90b2tlbj0vaS50ZXN0KHIpfHxzLnF1ZXJ5JiZzLnF1ZXJ5LnRva2VufHxpJiZpLmdldCYmaS5nZXQoXCJ0b2tlblwiKXx8bCYmbC5lbGVtZW50cy50b2tlbiksIXQuaGFzVG9rZW4mJnMkSC5hcGlLZXkmJnIkaihyKSYmKHMucXVlcnl8fChzLnF1ZXJ5PXt9KSxzLnF1ZXJ5LnRva2VuPXMkSC5hcGlLZXksdC5oYXNUb2tlbj0hMCksdC51c2VJZGVudGl0eSYmIXQuaGFzVG9rZW4mJiF0LmNyZWRlbnRpYWxUb2tlbiYmIVckMShyKSYmIWIkYihuKSl7bGV0IGU7XCJpbW1lZGlhdGVcIj09PXMuYXV0aE1vZGU/KGF3YWl0ICQkMSgpLGU9YXdhaXQgcyRyLmdldENyZWRlbnRpYWwocix7c2lnbmFsOm59KSx0LmNyZWRlbnRpYWw9ZSk6XCJuby1wcm9tcHRcIj09PXMuYXV0aE1vZGU/KGF3YWl0ICQkMSgpLGU9YXdhaXQgcyRyLmdldENyZWRlbnRpYWwocix7cHJvbXB0OiExLHNpZ25hbDpufSkuY2F0Y2goKCgpPT57fSkpLHQuY3JlZGVudGlhbD1lKTpzJHImJihlPXMkci5maW5kQ3JlZGVudGlhbChyKSksZSYmKHQuY3JlZGVudGlhbFRva2VuPWUudG9rZW4sdC51c2VTU0w9ISFlLnNzbCk7fX1mdW5jdGlvbiBXJDEoZSl7cmV0dXJuIE0kOC5zb21lKCh0PT50LnRlc3QoZSkpKX1hc3luYyBmdW5jdGlvbiBHJDUoZSl7bGV0IHI9ZS5wYXJhbXMudXJsO2NvbnN0IG89ZS5wYXJhbXMucmVxdWVzdE9wdGlvbnMscz1lLmZldGNoT3B0aW9ucyxuPUYkNShyKXx8RyQ2KHIpLGw9by5yZXNwb25zZVR5cGV8fFwianNvblwiLHU9bj8wOm51bGwhPW8udGltZW91dD9vLnRpbWVvdXQ6RCQ0LnRpbWVvdXQ7bGV0IGQ9ITE7aWYoIW4pe2UudXNlU1NMJiYocj11dChyKSksby5jYWNoZUJ1c3QmJlwiZGVmYXVsdFwiPT09cy5jYWNoZSYmKHI9YnQocixcInJlcXVlc3QucHJldmVudENhY2hlXCIsRGF0ZS5ub3coKSkpO2xldCBuPXsuLi5vLnF1ZXJ5fTtlLmNyZWRlbnRpYWxUb2tlbiYmKG4udG9rZW49ZS5jcmVkZW50aWFsVG9rZW4pO2xldCBhPUMkOShuKTt0JFAoXCJlc3JpLXVybC1lbmNvZGVzLWFwb3N0cm9waGVcIikmJihhPWEucmVwbGFjZSgvJy9nLFwiJTI3XCIpKTtjb25zdCBpPXIubGVuZ3RoKzErYS5sZW5ndGg7bGV0IGw7ZD1cImRlbGV0ZVwiPT09by5tZXRob2R8fFwicG9zdFwiPT09by5tZXRob2R8fFwicHV0XCI9PT1vLm1ldGhvZHx8ISFvLmJvZHl8fGk+RCQ0Lm1heFVybExlbmd0aDtjb25zdCB1PW8udXNlUHJveHl8fCEhQSRiKHIpO2lmKHUpe2NvbnN0IGU9cSQ1KHIpO2w9ZS5wYXRoLCFkJiZsLmxlbmd0aCsxK2k+RCQ0Lm1heFVybExlbmd0aCYmKGQ9ITApLGUucXVlcnkmJihuPXsuLi5lLnF1ZXJ5LC4uLm59KTt9aWYoXCJIRUFEXCI9PT1zLm1ldGhvZCYmKGR8fHUpKXtpZihkKXtpZihpPkQkNC5tYXhVcmxMZW5ndGgpdGhyb3cgTiQzKFwicmVxdWVzdDppbnZhbGlkLXBhcmFtZXRlcnNcIixuZXcgRXJyb3IoXCJVUkwgZXhjZWVkcyBtYXhpbXVtIGxlbmd0aFwiKSxlLnBhcmFtcyk7dGhyb3cgTiQzKFwicmVxdWVzdDppbnZhbGlkLXBhcmFtZXRlcnNcIixuZXcgRXJyb3IoXCJjYW5ub3QgdXNlIFBPU1QgcmVxdWVzdCB3aGVuIG1ldGhvZCBpcyAnaGVhZCdcIiksZS5wYXJhbXMpfWlmKHUpdGhyb3cgTiQzKFwicmVxdWVzdDppbnZhbGlkLXBhcmFtZXRlcnNcIixuZXcgRXJyb3IoXCJjYW5ub3QgdXNlIHByb3h5IHdoZW4gbWV0aG9kIGlzICdoZWFkJ1wiKSxlLnBhcmFtcyl9aWYoZD8ocy5tZXRob2Q9XCJkZWxldGVcIj09PW8ubWV0aG9kP1wiREVMRVRFXCI6XCJwdXRcIj09PW8ubWV0aG9kP1wiUFVUXCI6XCJQT1NUXCIsby5ib2R5P3I9UnQocixuKToocy5ib2R5PUMkOShuKSxzLmhlYWRlcnNbXCJDb250ZW50LVR5cGVcIl09XCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIikpOnI9UnQocixuKSx1JiYoZS51c2VQcm94eT0hMCxyPWAke2x9PyR7cn1gKSxuLnRva2VuJiZfJDImJnMuYm9keSBpbnN0YW5jZW9mIEZvcm1EYXRhKXtjb25zdCBlPXMuYm9keTtlLnNldD9lLnNldChcInRva2VuXCIsbi50b2tlbik6ZS5hcHBlbmQoXCJ0b2tlblwiLG4udG9rZW4pO31pZihvLmhhc093blByb3BlcnR5KFwid2l0aENyZWRlbnRpYWxzXCIpKWUud2l0aENyZWRlbnRpYWxzPW8ud2l0aENyZWRlbnRpYWxzO2Vsc2UgaWYoIUUkNChyLHgkZSkpaWYoSiQzKHIpKWUud2l0aENyZWRlbnRpYWxzPSEwO2Vsc2UgaWYocyRyKXtjb25zdCB0PXMkci5maW5kU2VydmVySW5mbyhyKTt0JiZ0LndlYlRpZXJBdXRoJiYoZS53aXRoQ3JlZGVudGlhbHM9ITApO31lLndpdGhDcmVkZW50aWFscyYmKHMuY3JlZGVudGlhbHM9XCJpbmNsdWRlXCIpO31sZXQgVCx4LFM9MCxFPSExO3U+MCYmKFM9c2V0VGltZW91dCgoKCk9PntFPSEwLGUuY29udHJvbGxlci5hYm9ydCgpO30pLHUpKTt0cnl7aWYoXCJpbWFnZVwiIT09by5yZXNwb25zZVR5cGV8fFwiZGVmYXVsdFwiIT09cy5jYWNoZXx8XCJHRVRcIiE9PXMubWV0aG9kfHxkfHxKJDIoby5oZWFkZXJzKXx8IW4mJiFlLnVzZVByb3h5JiZEJDQucHJveHlVcmwmJiFCJDIocikpe2lmKFQ9YXdhaXQgVSQxLl9hYm9ydGFibGVGZXRjaChyLHMpLGUudXNlUHJveHl8fEgkMihyKSxULm9rJiZcIkhFQURcIiE9PXMubWV0aG9kKXtzd2l0Y2gobCl7Y2FzZVwiYXJyYXktYnVmZmVyXCI6eD1hd2FpdCBULmFycmF5QnVmZmVyKCk7YnJlYWs7Y2FzZVwiYmxvYlwiOmNhc2VcImltYWdlXCI6eD1hd2FpdCBULmJsb2IoKTticmVhaztkZWZhdWx0Ong9YXdhaXQgVC50ZXh0KCk7fWlmKFMmJihjbGVhclRpbWVvdXQoUyksUz0wKSxcImpzb25cIj09PWx8fFwieG1sXCI9PT1sfHxcImRvY3VtZW50XCI9PT1sKWlmKHgpc3dpdGNoKGwpe2Nhc2VcImpzb25cIjp4PUpTT04ucGFyc2UoeCk7YnJlYWs7Y2FzZVwieG1sXCI6eD1YJDEoeCxcImFwcGxpY2F0aW9uL3htbFwiKTticmVhaztjYXNlXCJkb2N1bWVudFwiOng9WCQxKHgsXCJ0ZXh0L2h0bWxcIik7fWVsc2UgeD1udWxsO2lmKHgpe2lmKFwiYXJyYXktYnVmZmVyXCI9PT1sfHxcImJsb2JcIj09PWwpe2NvbnN0IGU9VC5oZWFkZXJzLmdldChcIkNvbnRlbnQtVHlwZVwiKTtpZigvYXBwbGljYXRpb25cXC9qc29ufHRleHRcXC9wbGFpbi9pLnRlc3QoZSkmJnhbXCJibG9iXCI9PT1sP1wic2l6ZVwiOlwiYnl0ZUxlbmd0aFwiXTw9NzUwKXRyeXtjb25zdCBlPWF3YWl0IG5ldyBSZXNwb25zZSh4KS5qc29uKCk7ZS5lcnJvciYmKHg9ZSk7fWNhdGNoe319XCJpbWFnZVwiPT09bCYmeCBpbnN0YW5jZW9mIEJsb2ImJih4PWF3YWl0IFkkMShVUkwuY3JlYXRlT2JqZWN0VVJMKHgpLGUsITApKTt9fX1lbHNlIHg9YXdhaXQgWSQxKHIsZSk7fWNhdGNoKHYpe2lmKFwiQWJvcnRFcnJvclwiPT09di5uYW1lKXtpZihFKXRocm93IG5ldyBFcnJvcihcIlRpbWVvdXQgZXhjZWVkZWRcIik7dGhyb3cgbSR4KFwiUmVxdWVzdCBjYW5jZWxlZFwiKX1pZighKCFUJiZ2IGluc3RhbmNlb2YgVHlwZUVycm9yJiZEJDQucHJveHlVcmwpfHxvLmJvZHl8fFwiZGVsZXRlXCI9PT1vLm1ldGhvZHx8XCJoZWFkXCI9PT1vLm1ldGhvZHx8XCJwb3N0XCI9PT1vLm1ldGhvZHx8XCJwdXRcIj09PW8ubWV0aG9kfHxlLnVzZVByb3h5KXRocm93IHY7ZS5yZWRvUmVxdWVzdD0hMCxTJDkoe3Byb3h5VXJsOkQkNC5wcm94eVVybCx1cmxQcmVmaXg6aHQoVSQ0KHIpLnBhdGgpfSk7fWZpbmFsbHl7UyYmY2xlYXJUaW1lb3V0KFMpO31yZXR1cm4gW1QseF19YXN5bmMgZnVuY3Rpb24geiQ0KGUsdCl7aWYobnVsbCE9ZS5yZXNwb25zZURhdGEpcmV0dXJuIGUucmVzcG9uc2VEYXRhO2lmKGUuaGVhZGVycyYmKHQucmVxdWVzdE9wdGlvbnMuaGVhZGVycz17Li4udC5yZXF1ZXN0T3B0aW9ucy5oZWFkZXJzLC4uLmUuaGVhZGVyc30pLGUucXVlcnkmJih0LnJlcXVlc3RPcHRpb25zLnF1ZXJ5PXsuLi50LnJlcXVlc3RPcHRpb25zLnF1ZXJ5LC4uLmUucXVlcnl9KSxlLmJlZm9yZSl7bGV0IG8sczt0cnl7cz1hd2FpdCBlLmJlZm9yZSh0KTt9Y2F0Y2gocil7bz1OJDMoXCJyZXF1ZXN0OmludGVyY2VwdG9yXCIscix0KTt9aWYoKHMgaW5zdGFuY2VvZiBFcnJvcnx8cyBpbnN0YW5jZW9mIHMkeCkmJihvPU4kMyhcInJlcXVlc3Q6aW50ZXJjZXB0b3JcIixzLHQpKSxvKXRocm93IGUuZXJyb3ImJmUuZXJyb3IobyksbztyZXR1cm4gc319ZnVuY3Rpb24gSiQyKGUpe2lmKGUpZm9yKGNvbnN0IHQgb2YgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZSkpaWYoZVt0XSlyZXR1cm4gITA7cmV0dXJuICExfWZ1bmN0aW9uIFgkMShlLHQpe2xldCByO3RyeXtyPShuZXcgRE9NUGFyc2VyKS5wYXJzZUZyb21TdHJpbmcoZSx0KTt9Y2F0Y2h7fWlmKCFyfHxyLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwicGFyc2VyZXJyb3JcIikubGVuZ3RoKXRocm93IG5ldyBTeW50YXhFcnJvcihcIlhNTCBQYXJzZSBlcnJvclwiKTtyZXR1cm4gcn1hc3luYyBmdW5jdGlvbiBRJDEoZSl7bGV0IHQscjthd2FpdCBLKGUpO3RyeXtkb3tbdCxyXT1hd2FpdCBHJDUoZSk7fXdoaWxlKCFhd2FpdCBWKGUsdCxyKSl9Y2F0Y2gobil7Y29uc3Qgcj1OJDMoXCJyZXF1ZXN0OnNlcnZlclwiLG4sZS5wYXJhbXMsdCk7dGhyb3cgci5kZXRhaWxzLnNzbD1lLnVzZVNTTCxlLmludGVyY2VwdG9yJiZlLmludGVyY2VwdG9yLmVycm9yJiZlLmludGVyY2VwdG9yLmVycm9yKHIpLHJ9Y29uc3Qgbz1lLnBhcmFtcy51cmw7aWYoL1xcL3NoYXJpbmdcXC9yZXN0XFwvKGFjY291bnRzfHBvcnRhbHMpXFwvc2VsZi9pLnRlc3QobykmJiFlLmhhc1Rva2VuJiYhZS5jcmVkZW50aWFsVG9rZW4mJnImJnIudXNlciYmci51c2VyLnVzZXJuYW1lJiYhSiQzKG8pKXtjb25zdCBlPU0kYShvLCEwKTtlJiZEJDQudHJ1c3RlZFNlcnZlcnMucHVzaChlKTt9Y29uc3Qgcz1lLmNyZWRlbnRpYWw7aWYocyYmcyRyKXtjb25zdCBlPXMkci5maW5kU2VydmVySW5mbyhzLnNlcnZlcik7bGV0IHQ9ZSYmZS5vd25pbmdTeXN0ZW1Vcmw7aWYodCl7dD10LnJlcGxhY2UoL1xcLz8kLyxcIi9zaGFyaW5nXCIpO2NvbnN0IGU9cyRyLmZpbmRDcmVkZW50aWFsKHQscy51c2VySWQpO2UmJi0xPT09cyRyLl9nZXRJZGVudGljYWxTdmNJZHgodCxlKSYmZS5yZXNvdXJjZXMudW5zaGlmdCh0KTt9fXJldHVybiB7ZGF0YTpyLGdldEhlYWRlcjp0P2U9PnQuaGVhZGVycy5nZXQoZSk6UiQ3LHJlcXVlc3RPcHRpb25zOmUucGFyYW1zLnJlcXVlc3RPcHRpb25zLHNzbDplLnVzZVNTTCx1cmw6ZS5wYXJhbXMudXJsfX1hc3luYyBmdW5jdGlvbiBWKGUsdCxyKXtpZihlLnJlZG9SZXF1ZXN0KXJldHVybiBlLnJlZG9SZXF1ZXN0PSExLCExO2lmKCF0KXJldHVybiAhMDtpZighdC5vayl0aHJvdyBuZXcgRXJyb3IoYFVuYWJsZSB0byBsb2FkICR7dC51cmx9IHN0YXR1czogJHt0LnN0YXR1c31gKTtsZXQgbyxzLG4sYTtyJiZyLmVycm9yJiYobz1PYmplY3QuYXNzaWduKG5ldyBFcnJvcixyLmVycm9yKSksbyYmKHM9TnVtYmVyKG8uY29kZSksbj1vLmhhc093blByb3BlcnR5KFwic3ViY29kZVwiKT9OdW1iZXIoby5zdWJjb2RlKTpudWxsLGE9by5tZXNzYWdlQ29kZSxhPWEmJmEudG9VcHBlckNhc2UoKSk7Y29uc3QgaT1lLnBhcmFtcy5yZXF1ZXN0T3B0aW9ucy5hdXRoTW9kZTtpZig0MDM9PT1zJiYoND09PW58fG8ubWVzc2FnZSYmby5tZXNzYWdlLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcInNzbFwiKT4tMSYmLTE9PT1vLm1lc3NhZ2UudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwicGVybWlzc2lvblwiKSkpe2lmKCFlLnVzZVNTTClyZXR1cm4gZS51c2VTU0w9ITAsITF9ZWxzZSBpZighZS5oYXNUb2tlbiYmZS51c2VJZGVudGl0eSYmKFwibm8tcHJvbXB0XCIhPT1pfHw0OTg9PT1zKSYmLTEhPT1GJDMuaW5kZXhPZihzKSYmIVckMShlLnBhcmFtcy51cmwpJiYoNDAzIT09c3x8LTE9PT1JJDMuaW5kZXhPZihhKSYmKG51bGw9PW58fDI9PT1uJiZlLmNyZWRlbnRpYWxUb2tlbikpKXthd2FpdCAkJDEoKTt0cnl7Y29uc3QgdD1hd2FpdCBzJHIuZ2V0Q3JlZGVudGlhbChlLnBhcmFtcy51cmwse2Vycm9yOk4kMyhcInJlcXVlc3Q6c2VydmVyXCIsbyxlLnBhcmFtcykscHJvbXB0Olwibm8tcHJvbXB0XCIhPT1pLHNpZ25hbDplLmNvbnRyb2xsZXIuc2lnbmFsLHRva2VuOmUuY3JlZGVudGlhbFRva2VufSk7cmV0dXJuIGUuY3JlZGVudGlhbD10LGUuY3JlZGVudGlhbFRva2VuPXQudG9rZW4sZS51c2VTU0w9ZS51c2VTU0x8fHQuc3NsLCExfWNhdGNoKGwpe2lmKFwibm8tcHJvbXB0XCI9PT1pKXJldHVybiBlLmNyZWRlbnRpYWw9bnVsbCxlLmNyZWRlbnRpYWxUb2tlbj1udWxsLCExO289bDt9fWlmKG8pdGhyb3cgbztyZXR1cm4gITB9ZnVuY3Rpb24gWSQxKGUsdCxyPSExKXtjb25zdCBvPXQuY29udHJvbGxlci5zaWduYWwscz1uZXcgSW1hZ2U7cmV0dXJuIHQud2l0aENyZWRlbnRpYWxzP3MuY3Jvc3NPcmlnaW49XCJ1c2UtY3JlZGVudGlhbHNcIjpzLmNyb3NzT3JpZ2luPVwiYW5vbnltb3VzXCIscy5hbHQ9XCJcIixzLnNyYz1lLHQkcyhzLGUscixvKX1VJDEuX2Fib3J0YWJsZUZldGNoPW51bGwsVSQxLl9jb3JzU2VydmVycz1bXCJodHRwczovL3NlcnZlci5hcmNnaXNvbmxpbmUuY29tXCIsXCJodHRwczovL3NlcnZpY2VzLmFyY2dpc29ubGluZS5jb21cIl07XG5cbmNvbnN0IHJlcXVlc3QgPSAvKiNfX1BVUkVfXyovT2JqZWN0LmZyZWV6ZSh7XG4gICAgX19wcm90b19fOiBudWxsLFxuICAgICdkZWZhdWx0JzogVSQxXG59KTtcblxuLy8gZXNyaTRcclxuY29uc3Qgc2VjdXJlUG9ydHNNYXAgPSB7IFwiODBcIjogXCI0NDNcIiwgXCI4MDgwXCI6IFwiODQ0M1wiIH07XHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuLy9cclxuLy8gVVJMIGNvbnZlcnNpb25zXHJcbi8vXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuLyoqXHJcbiAqIFByb3ZpZGVzIGh0dHA6Ly8gcGFydCBpZiBpdCBpcyBtaXNzaW5nLlxyXG4gKiBAcGFyYW0gdXJsIEEgc291cmNlIFVSTC5cclxuICogQHJldHVybnMgVGhlIFVSTCBzdGFydGluZyBmcm9tIGh0dHAvaHR0cHMgcHJvdG9jb2wuXHJcbiAqL1xyXG5mdW5jdGlvbiB0b0h0dHBVcmwodXJsKSB7XHJcbiAgaWYgKCF1cmwgfHwgL15odHRwL2kudGVzdCh1cmwpKSB7XHJcbiAgICByZXR1cm4gdXJsO1xyXG4gIH1cclxuICByZXR1cm4gXCJodHRwOi8vXCIgKyB1cmw7XHJcbn1cclxuLyoqXHJcbiAqIENvbnZlcnRzIG5vbnNlY3VyZWQgSFRUUCBVUkwgdG8gSFRUUFMgVVJMLlxyXG4gKlxyXG4gKiBJZiB0aGUgaW5wdXQgVVJMIGlzIG51bGwgb3IgaXRzIHByb3RvY29sIGlzIG5vdCBcImh0dHBcIiwgdGhlIGlucHV0IFVSTCBpcyByZXR1cm5lZC5cclxuICogV2hlbiBjb252ZXJ0ZWQsIHRoZSBcImh0dHBcIiBwcm90b2NvbCBpcyByZXBsYWNlZCB3aXRoIFwiaHR0cHNcIiwgcG9ydCA4MCBpc1xyXG4gKiByZXBsYWNlZCB3aXRoIDQ0MywgYW5kIHBvcnQgODA4MCBpcyByZXBsYWNlZCB3aXRoIDg0NDMuXHJcbiAqIFRoaXMgYmVoYXZpb3IgY291bGQgYmUgY2hhbmdlZCBvciBleHRlbmRlZC5cclxuICpcclxuICogQHBhcmFtIHVybCBJbnB1dCBVUkwgc3RyaW5nIG9yIG51bGwuXHJcbiAqIEByZXR1cm5zIEhUVFBTIFVSTCBvciBhbiBvcmlnaW5hbCBVUkwgaWYgaXQgaXMgbm9uLUhUVFAgVVJMLlxyXG4gKi9cclxuZnVuY3Rpb24gdG9IdHRwc1VybCh1cmwpIHtcclxuICBpZiAodXJsKSB7XHJcbiAgICB1cmwgPSB0b0h0dHBVcmwodXJsKTsgLy8gY29udmVydCB0byBhIHZhbGlkIHVybFxyXG4gIH1cclxuICBpZiAoIXVybCB8fCAhL15odHRwOlxcL1xcLy9pLnRlc3QodXJsKSkge1xyXG4gICAgcmV0dXJuIHVybDtcclxuICB9XHJcbiAgLy8gYXNzdW1lIGltcGxlbWVudGVkIGJ1dCBub3QgZGVjbGFyZWRcclxuICBjb25zdCBwYXJzZWRVcmwgPSBuZXcgJCQyKHVybCk7XHJcbiAgdXJsID0gdXJsLnJlcGxhY2UoL15odHRwL2ksIFwiaHR0cHNcIik7XHJcbiAgY29uc3QgcG9ydCA9IHNlY3VyZVBvcnRzTWFwW3BhcnNlZFVybC5wb3J0XTtcclxuICBpZiAocG9ydCkge1xyXG4gICAgdXJsID0gdXJsLnJlcGxhY2UoXCI6XCIgKyBwYXJzZWRVcmwucG9ydCwgXCI6XCIgKyBwb3J0KTtcclxuICB9XHJcbiAgcmV0dXJuIHVybDtcclxufVxuXG4vKipcclxuICogRml0cyBhIGJveCBpbnRvIGFub3RoZXIgYm94LlxyXG4gKiBAcGFyYW0gYm94ICAgICAgICAgICAgICAgICAgICAgIEJveCB0byBmaXQgeyB3LCBoIH1cclxuICogQHBhcmFtIHBhcmVudEJveCAgICAgICAgICAgICAgICBCb3QgdG8gZml0IGludG8geyB3LCBoIH1cclxuICogQHBhcmFtIHBhcmFtcy52QWxpZ24gICAgICAgICAgICB0b3AvbWlkZGxlL2JvdHRvbS4gRGVmYXVsdCAtIG1pZGRsZS5cclxuICogQHBhcmFtIHBhcmFtcy5oQWxpZ24gICAgICAgICAgICBsZWZ0L2NlbnRlci9yaWdodC4gRGVmYXVsdCAtIGNlbnRlci5cclxuICpcclxuICogQHJldHVybnMgTmV3IGJveCB7IHgsIHksIHcsIGgsIHJhdGlvIChzY2FsZSkgfVxyXG4gKi9cclxuZnVuY3Rpb24gZml0Qm94KHsgYm94LCBwYXJlbnRCb3gsIHZBbGlnbiA9IFwibWlkZGxlXCIsIGhBbGlnbiA9IFwiY2VudGVyXCIgfSkge1xyXG4gIC8vIHcgJiBoIHJhdGlvc1xyXG4gIGxldCB3ciA9IGJveC53IC8gcGFyZW50Qm94Lnc7XHJcbiAgbGV0IGhyID0gYm94LmggLyBwYXJlbnRCb3guaDtcclxuICAvLyBkaXJlY3Rpb24gKC0xIC0gbmVlZCB0byBleHBhbmQsICsxIC0gbmVlZCB0byBzaHJpbmspXHJcbiAgY29uc3Qgd2QgPSB3ciA+IDEgPyAxIDogLTE7XHJcbiAgY29uc3QgaGQgPSBociA+IDEgPyAxIDogLTE7XHJcbiAgLy8gbm9ybWFsaXplXHJcbiAgd3IgPSB3ciA+IDEgPyAxIC8gd3IgOiB3cjsgLy8gPT4gMC4uMVxyXG4gIGhyID0gaHIgPiAxID8gMSAvIGhyIDogaHI7IC8vID0+IDAuLjFcclxuICAvLyBjYWxjIGZpbmFsIHJhdGlvXHJcbiAgbGV0IHJhdGlvO1xyXG4gIGlmICh3ZCA9PT0gLTEgJiYgaGQgPT09IC0xKSB7XHJcbiAgICByYXRpbyA9IDEgLyBNYXRoLm1heCh3ciwgaHIpO1xyXG4gIH1cclxuICBlbHNlIGlmICh3ZCA9PT0gLTEgJiYgaGQgPT09IDEpIHtcclxuICAgIHJhdGlvID0gaHI7XHJcbiAgfVxyXG4gIGVsc2UgaWYgKHdkID09PSAxICYmIGhkID09PSAtMSkge1xyXG4gICAgcmF0aW8gPSB3cjtcclxuICB9XHJcbiAgZWxzZSBpZiAod2QgPT09IDEgJiYgaGQgPT09IDEpIHtcclxuICAgIHJhdGlvID0gTWF0aC5taW4od3IsIGhyKTtcclxuICB9XHJcbiAgY29uc3QgbmV3Qm94ID0ge1xyXG4gICAgeDogMCxcclxuICAgIHk6IDAsXHJcbiAgICB3OiBib3gudyAqIHJhdGlvLFxyXG4gICAgaDogYm94LmggKiByYXRpbyxcclxuICAgIHJhdGlvXHJcbiAgfTtcclxuICAvLyBhbGlnblxyXG4gIHN3aXRjaCAoaEFsaWduKSB7XHJcbiAgICBjYXNlIFwibGVmdFwiOlxyXG4gICAgICBuZXdCb3gueCA9IDA7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSBcInJpZ2h0XCI6XHJcbiAgICAgIG5ld0JveC54ID0gcGFyZW50Qm94LncgLSBuZXdCb3gudztcclxuICAgICAgYnJlYWs7XHJcbiAgICBkZWZhdWx0OlxyXG4gICAgICBuZXdCb3gueCA9IChwYXJlbnRCb3gudyAtIG5ld0JveC53KSAvIDI7XHJcbiAgfVxyXG4gIHN3aXRjaCAodkFsaWduKSB7XHJcbiAgICBjYXNlIFwidG9wXCI6XHJcbiAgICAgIG5ld0JveC55ID0gMDtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIFwiYm90dG9tXCI6XHJcbiAgICAgIG5ld0JveC55ID0gcGFyZW50Qm94LmggLSBuZXdCb3guaDtcclxuICAgICAgYnJlYWs7XHJcbiAgICBkZWZhdWx0OlxyXG4gICAgICBuZXdCb3gueSA9IChwYXJlbnRCb3guaCAtIG5ld0JveC5oKSAvIDI7XHJcbiAgfVxyXG4gIHJldHVybiBuZXdCb3g7XHJcbn1cblxuLy8gZ2VvZW5yaWNobWVudC51dGlsc1xyXG4vKipcclxuICogUG9zaXRpb24gbm9kZSBhZGphY2VudCBvciBraXR0eS1jb3JuZXIgdG8gYW5jaG9yIHN1Y2ggdGhhdCBpdCdzIGZ1bGx5IHZpc2libGUgaW4gdmlld3BvcnQuXHJcbiAqIFBsYWNlIG5vZGUgc3VjaCB0aGF0IGNvcm5lciBvZiBub2RlIHRvdWNoZXMgYSBjb3JuZXIgb2ZcclxuICogYXJvdW5kTm9kZSwgYW5kIHRoYXQgbm9kZSBpcyBmdWxseSB2aXNpYmxlLlxyXG4gKi9cclxuZnVuY3Rpb24gcGxhY2VBcm91bmQobm9kZSwgYW5jaG9yLCBwb3NpdGlvbnMsIGxheW91dEZ1bmMpIHtcclxuICBjb25zdCBhcm91bmROb2RlUG9zID0gcG9zaXRpb24oYW5jaG9yLCB0cnVlKTtcclxuICBjb25zdCBfcG9zaXRpb25zID0gcHJlcGFyZU9yaWVudChwb3NpdGlvbnMpO1xyXG4gIC8vIEZvciBhYm92ZSBhbmQgYmVsb3cgZHJvcGRvd25zLCBzdWJ0cmFjdCB3aWR0aCBvZiBib3JkZXIgc28gdGhhdCBwb3B1cCBhbmQgYXJvdW5kTm9kZSBib3JkZXJzXHJcbiAgLy8gb3ZlcmxhcCwgcHJldmVudGluZyBhIGRvdWJsZS1ib3JkZXIgZWZmZWN0LiAgVW5mb3J0dW5hdGVseSwgZGlmZmljdWx0IHRvIG1lYXN1cmUgdGhlIGJvcmRlclxyXG4gIC8vIHdpZHRoIG9mIGVpdGhlciBhbmNob3Igb3IgcG9wdXAgYmVjYXVzZSBpbiBib3RoIGNhc2VzIHRoZSBib3JkZXIgbWF5IGJlIG9uIGFuIGlubmVyIG5vZGUuXHJcbiAgaWYgKC9eKGFib3ZlfGJlbG93KS8udGVzdChfcG9zaXRpb25zWzBdICsgXCJcIikpIHtcclxuICAgIGNvbnN0IGFuY2hvckJvcmRlciA9IGdldEJvcmRlckV4dGVudHMoYW5jaG9yKSwgYW5jaG9yQ2hpbGRCb3JkZXIgPSBhbmNob3IuZmlyc3RDaGlsZFxyXG4gICAgICA/IGdldEJvcmRlckV4dGVudHMoYW5jaG9yLmZpcnN0Q2hpbGQpXHJcbiAgICAgIDogeyB0OiAwLCBsOiAwLCBiOiAwLCByOiAwIH0sIG5vZGVCb3JkZXIgPSBnZXRCb3JkZXJFeHRlbnRzKG5vZGUpLCBub2RlQ2hpbGRCb3JkZXIgPSBub2RlLmZpcnN0Q2hpbGRcclxuICAgICAgPyBnZXRCb3JkZXJFeHRlbnRzKG5vZGUuZmlyc3RDaGlsZClcclxuICAgICAgOiB7IHQ6IDAsIGw6IDAsIGI6IDAsIHI6IDAgfTtcclxuICAgIGFyb3VuZE5vZGVQb3MueSArPSBNYXRoLm1pbihhbmNob3JCb3JkZXIudCArIGFuY2hvckNoaWxkQm9yZGVyLnQsIG5vZGVCb3JkZXIudCArIG5vZGVDaGlsZEJvcmRlci50KTtcclxuICAgIGFyb3VuZE5vZGVQb3MuaCAtPVxyXG4gICAgICBNYXRoLm1pbihhbmNob3JCb3JkZXIudCArIGFuY2hvckNoaWxkQm9yZGVyLnQsIG5vZGVCb3JkZXIudCArIG5vZGVDaGlsZEJvcmRlci50KSArXHJcbiAgICAgICAgTWF0aC5taW4oYW5jaG9yQm9yZGVyLmIgKyBhbmNob3JDaGlsZEJvcmRlci5iLCBub2RlQm9yZGVyLmIgKyBub2RlQ2hpbGRCb3JkZXIuYik7XHJcbiAgfVxyXG4gIC8vIENvbXB1dGUgcG9zaXRpb24gYW5kIHNpemUgb2YgdmlzaWJsZSBwYXJ0IG9mIGFuY2hvciAoaXQgbWF5IGJlIHBhcnRpYWxseSBoaWRkZW4gYnkgYW5jZXN0b3Igbm9kZXMgdy9zY3JvbGxiYXJzKVxyXG4gIGlmIChhbmNob3IucGFyZW50Tm9kZSkge1xyXG4gICAgLy8gaWdub3JlIG5vZGVzIGJldHdlZW4gcG9zaXRpb246cmVsYXRpdmUgYW5kIHBvc2l0aW9uOmFic29sdXRlXHJcbiAgICBsZXQgc2F3UG9zQWJzb2x1dGUgPSBnZXRDb21wdXRlZFN0eWxlJDEoYW5jaG9yKS5wb3NpdGlvbiA9PT0gXCJhYnNvbHV0ZVwiO1xyXG4gICAgbGV0IHBhcmVudCA9IGFuY2hvci5wYXJlbnROb2RlO1xyXG4gICAgd2hpbGUgKHBhcmVudCAmJiBwYXJlbnQubm9kZVR5cGUgPT09IDEgJiYgcGFyZW50Lm5vZGVOYW1lICE9PSBcIkJPRFlcIikge1xyXG4gICAgICAvL2lnbm9yaW5nIHRoZSBib2R5IHdpbGwgaGVscCBwZXJmb3JtYW5jZVxyXG4gICAgICBjb25zdCBwYXJlbnRQb3MgPSBwb3NpdGlvbihwYXJlbnQpLCBwY3MgPSBnZXRDb21wdXRlZFN0eWxlJDEocGFyZW50KTtcclxuICAgICAgaWYgKC9yZWxhdGl2ZXxhYnNvbHV0ZS8udGVzdChwY3MucG9zaXRpb24pKSB7XHJcbiAgICAgICAgc2F3UG9zQWJzb2x1dGUgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIXNhd1Bvc0Fic29sdXRlICYmIC9oaWRkZW58YXV0b3xzY3JvbGwvLnRlc3QocGNzLm92ZXJmbG93KSkge1xyXG4gICAgICAgIGNvbnN0IGJvdHRvbVlDb29yZCA9IE1hdGgubWluKGFyb3VuZE5vZGVQb3MueSArIGFyb3VuZE5vZGVQb3MuaCwgcGFyZW50UG9zLnkgKyBwYXJlbnRQb3MuaCk7XHJcbiAgICAgICAgY29uc3QgcmlnaHRYQ29vcmQgPSBNYXRoLm1pbihhcm91bmROb2RlUG9zLnggKyBhcm91bmROb2RlUG9zLncsIHBhcmVudFBvcy54ICsgcGFyZW50UG9zLncpO1xyXG4gICAgICAgIGFyb3VuZE5vZGVQb3MueCA9IE1hdGgubWF4KGFyb3VuZE5vZGVQb3MueCwgcGFyZW50UG9zLngpO1xyXG4gICAgICAgIGFyb3VuZE5vZGVQb3MueSA9IE1hdGgubWF4KGFyb3VuZE5vZGVQb3MueSwgcGFyZW50UG9zLnkpO1xyXG4gICAgICAgIGFyb3VuZE5vZGVQb3MuaCA9IGJvdHRvbVlDb29yZCAtIGFyb3VuZE5vZGVQb3MueTtcclxuICAgICAgICBhcm91bmROb2RlUG9zLncgPSByaWdodFhDb29yZCAtIGFyb3VuZE5vZGVQb3MueDtcclxuICAgICAgfVxyXG4gICAgICBpZiAocGNzLnBvc2l0aW9uID09PSBcImFic29sdXRlXCIpIHtcclxuICAgICAgICBzYXdQb3NBYnNvbHV0ZSA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudE5vZGU7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGNvbnN0IHggPSBhcm91bmROb2RlUG9zLngsIHkgPSBhcm91bmROb2RlUG9zLnksIHdpZHRoID0gYXJvdW5kTm9kZVBvcy53LCBoZWlnaHQgPSBhcm91bmROb2RlUG9zLmg7XHJcbiAgLy8gQ29udmVydCBwb3NpdGlvbnMgYXJndW1lbnRzIGludG8gY2hvaWNlcyBhcmd1bWVudCBmb3IgX3BsYWNlKClcclxuICBjb25zdCBjaG9pY2VzID0gW107XHJcbiAgZnVuY3Rpb24gcHVzaChhcm91bmRDb3JuZXIsIGNvcm5lcikge1xyXG4gICAgY2hvaWNlcy5wdXNoKHtcclxuICAgICAgYXJvdW5kQ29ybmVyLFxyXG4gICAgICBjb3JuZXIsXHJcbiAgICAgIHBvczoge1xyXG4gICAgICAgIHg6IHtcclxuICAgICAgICAgIEw6IHgsXHJcbiAgICAgICAgICBSOiB4ICsgd2lkdGgsXHJcbiAgICAgICAgICBNOiB4ICsgKHdpZHRoID4+IDEpXHJcbiAgICAgICAgfVthcm91bmRDb3JuZXIuY2hhckF0KDEpXSxcclxuICAgICAgICB5OiB7XHJcbiAgICAgICAgICBUOiB5LFxyXG4gICAgICAgICAgQjogeSArIGhlaWdodCxcclxuICAgICAgICAgIE06IHkgKyAoaGVpZ2h0ID4+IDEpXHJcbiAgICAgICAgfVthcm91bmRDb3JuZXIuY2hhckF0KDApXVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbiAgX3Bvc2l0aW9ucy5mb3JFYWNoKChwb3MpID0+IHtcclxuICAgIGxldCBsdHIgPSBpc0JvZHlMdHIoKTtcclxuICAgIHN3aXRjaCAocG9zKSB7XHJcbiAgICAgIGNhc2UgXCJhYm92ZS1jZW50ZXJlZFwiOlxyXG4gICAgICAgIHB1c2goXCJUTVwiLCBcIkJNXCIpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwiYmVsb3ctY2VudGVyZWRcIjpcclxuICAgICAgICBwdXNoKFwiQk1cIiwgXCJUTVwiKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcImFmdGVyLWNlbnRlcmVkXCI6XHJcbiAgICAgICAgbHRyID0gIWx0cjtcclxuICAgICAgLy8gZmFsbCB0aHJvdWdoXHJcbiAgICAgIGNhc2UgXCJiZWZvcmUtY2VudGVyZWRcIjpcclxuICAgICAgICBwdXNoKGx0ciA/IFwiTUxcIiA6IFwiTVJcIiwgbHRyID8gXCJNUlwiIDogXCJNTFwiKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcImFmdGVyXCI6XHJcbiAgICAgICAgbHRyID0gIWx0cjtcclxuICAgICAgLy8gZmFsbCB0aHJvdWdoXHJcbiAgICAgIGNhc2UgXCJiZWZvcmVcIjpcclxuICAgICAgICBwdXNoKGx0ciA/IFwiVExcIiA6IFwiVFJcIiwgbHRyID8gXCJUUlwiIDogXCJUTFwiKTtcclxuICAgICAgICBwdXNoKGx0ciA/IFwiQkxcIiA6IFwiQlJcIiwgbHRyID8gXCJCUlwiIDogXCJCTFwiKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcImJlbG93LWFsdFwiOlxyXG4gICAgICAgIGx0ciA9ICFsdHI7XHJcbiAgICAgIC8vIGZhbGwgdGhyb3VnaFxyXG4gICAgICBjYXNlIFwiYmVsb3dcIjpcclxuICAgICAgICAvLyBmaXJzdCB0cnkgdG8gYWxpZ24gbGVmdCBib3JkZXJzLCBuZXh0IHRyeSB0byBhbGlnbiByaWdodCBib3JkZXJzIChvciByZXZlcnNlIGZvciBSVEwgbW9kZSlcclxuICAgICAgICBwdXNoKGx0ciA/IFwiQkxcIiA6IFwiQlJcIiwgbHRyID8gXCJUTFwiIDogXCJUUlwiKTtcclxuICAgICAgICBwdXNoKGx0ciA/IFwiQlJcIiA6IFwiQkxcIiwgbHRyID8gXCJUUlwiIDogXCJUTFwiKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcImFib3ZlLWFsdFwiOlxyXG4gICAgICAgIGx0ciA9ICFsdHI7XHJcbiAgICAgIC8vIGZhbGwgdGhyb3VnaFxyXG4gICAgICBjYXNlIFwiYWJvdmVcIjpcclxuICAgICAgICAvLyBmaXJzdCB0cnkgdG8gYWxpZ24gbGVmdCBib3JkZXJzLCBuZXh0IHRyeSB0byBhbGlnbiByaWdodCBib3JkZXJzIChvciByZXZlcnNlIGZvciBSVEwgbW9kZSlcclxuICAgICAgICBwdXNoKGx0ciA/IFwiVExcIiA6IFwiVFJcIiwgbHRyID8gXCJCTFwiIDogXCJCUlwiKTtcclxuICAgICAgICBwdXNoKGx0ciA/IFwiVFJcIiA6IFwiVExcIiwgbHRyID8gXCJCUlwiIDogXCJCTFwiKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICBpZiAodHlwZW9mIHBvcyA9PT0gXCJvYmplY3RcIikge1xyXG4gICAgICAgICAgcHVzaChwb3MuYXJvdW5kQ29ybmVyLCBwb3MuY29ybmVyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgfSk7XHJcbiAgY29uc3QgcG9zaXRpb24kMSA9IF9wbGFjZShub2RlLCBjaG9pY2VzLCBsYXlvdXRGdW5jLCB7IHc6IHdpZHRoLCBoOiBoZWlnaHQgfSk7XHJcbiAgcG9zaXRpb24kMS5hcm91bmROb2RlUG9zID0gYXJvdW5kTm9kZVBvcztcclxuICByZXR1cm4gcG9zaXRpb24kMTtcclxufVxyXG5mdW5jdGlvbiBwcmVwYXJlT3JpZW50KG9yaWVudCkge1xyXG4gIGlmICghb3JpZW50KSB7XHJcbiAgICByZXR1cm4gW1wiYmVsb3dcIl07XHJcbiAgfVxyXG4gIGNvbnN0IHJlc3VsdCA9IFtdO1xyXG4gIG9yaWVudC5mb3JFYWNoKChwb3NpdGlvbikgPT4ge1xyXG4gICAgLy8gUHJvdmlkZSBhZGRpdGlvbmFsIHZhcmlhbnRzIG9mIG9yaWVudGF0aW9ucyB3aXRoIGRlZmF1bHQgYWxpZ25tZW50IGF0IHRoZSBib3R0b21cclxuICAgIGxldCBsdHIgPSBpc0JvZHlMdHIoKTtcclxuICAgIHN3aXRjaCAocG9zaXRpb24pIHtcclxuICAgICAgY2FzZSBcImJlZm9yZS1hbHRcIjpcclxuICAgICAgICBsdHIgPSAhbHRyO1xyXG4gICAgICBjYXNlIFwiYWZ0ZXItYWx0XCI6XHJcbiAgICAgICAgcmVzdWx0LnB1c2gobHRyID8geyBhcm91bmRDb3JuZXI6IFwiQlJcIiwgY29ybmVyOiBcIkJMXCIgfSA6IHsgYXJvdW5kQ29ybmVyOiBcIkJMXCIsIGNvcm5lcjogXCJCUlwiIH0pOyAvLyBUcmljaywgc2VlIHBsYWNlQXJvdW5kKCkgbWV0aG9kXHJcbiAgICAgICAgcmVzdWx0LnB1c2gobHRyID8geyBhcm91bmRDb3JuZXI6IFwiVFJcIiwgY29ybmVyOiBcIlRMXCIgfSA6IHsgYXJvdW5kQ29ybmVyOiBcIlRMXCIsIGNvcm5lcjogXCJUUlwiIH0pOyAvLyBUcmljaywgc2VlIHBsYWNlQXJvdW5kKCkgbWV0aG9kXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgcmVzdWx0LnB1c2gocG9zaXRpb24pO1xyXG4gIH0pO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuLyoqXHJcbiAqIEdpdmVuIGEgbGlzdCBvZiBzcG90cyB0byBwdXQgbm9kZSwgcHV0IGl0IGF0IHRoZSBmaXJzdCBzcG90IHdoZXJlIGl0IGZpdHMsXHJcbiAqIG9mIGlmIGl0IGRvZXNuJ3QgZml0IGFueXdoZXJlIHRoZW4gdGhlIHBsYWNlIHdpdGggdGhlIGxlYXN0IG92ZXJmbG93XHJcbiAqL1xyXG5mdW5jdGlvbiBfcGxhY2Uobm9kZSwgY2hvaWNlcywgbGF5b3V0RnVuYywgYXJvdW5kTm9kZUNvb3Jkcykge1xyXG4gIGNvbnN0IHZpZXcgPSB7XHJcbiAgICBsOiAwLFxyXG4gICAgdDogMCxcclxuICAgIHc6IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGgsXHJcbiAgICBoOiBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodFxyXG4gIH07XHJcbiAgLy8gVGhpcyB3b24ndCB3b3JrIGlmIHRoZSBub2RlIGlzIGluc2lkZSBhIDxkaXYgc3R5bGU9XCJwb3NpdGlvbjogcmVsYXRpdmVcIj4sXHJcbiAgLy8gc28gcmVhdHRhY2ggaXQgdG8gPGJvZHk+Llx0IChPdGhlcndpc2UsIHRoZSBwb3NpdGlvbmluZyB3aWxsIGJlIHdyb25nXHJcbiAgLy8gYW5kIGFsc28gaXQgbWlnaHQgZ2V0IGN1dG9mZi4pXHJcbiAgaWYgKCFub2RlLnBhcmVudE5vZGUgfHwgU3RyaW5nKG5vZGUucGFyZW50Tm9kZS5ub2RlTmFtZSkudG9Mb3dlckNhc2UoKSAhPT0gXCJib2R5XCIpIHtcclxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobm9kZSk7XHJcbiAgfVxyXG4gIGxldCBiZXN0ID0gbnVsbDtcclxuICBjaG9pY2VzLnNvbWUoKGNob2ljZSkgPT4ge1xyXG4gICAgY29uc3QgY29ybmVyID0gY2hvaWNlLmNvcm5lcjtcclxuICAgIGNvbnN0IHBvcyA9IGNob2ljZS5wb3M7XHJcbiAgICBsZXQgb3ZlcmZsb3cgPSAwO1xyXG4gICAgLy8gY2FsY3VsYXRlIGFtb3VudCBvZiBzcGFjZSBhdmFpbGFibGUgZ2l2ZW4gc3BlY2lmaWVkIHBvc2l0aW9uIG9mIG5vZGVcclxuICAgIGNvbnN0IHNwYWNlQXZhaWxhYmxlID0ge1xyXG4gICAgICB3OiB7XHJcbiAgICAgICAgTDogdmlldy5sICsgdmlldy53IC0gcG9zLngsXHJcbiAgICAgICAgUjogcG9zLnggLSB2aWV3LmwsXHJcbiAgICAgICAgTTogdmlldy53XHJcbiAgICAgIH1bY29ybmVyLmNoYXJBdCgxKV0sXHJcbiAgICAgIGg6IHtcclxuICAgICAgICBUOiB2aWV3LnQgKyB2aWV3LmggLSBwb3MueSxcclxuICAgICAgICBCOiBwb3MueSAtIHZpZXcudCxcclxuICAgICAgICBNOiB2aWV3LmhcclxuICAgICAgfVtjb3JuZXIuY2hhckF0KDApXVxyXG4gICAgfTtcclxuICAgIC8vIENsZWFyIGxlZnQvcmlnaHQgcG9zaXRpb24gc2V0dGluZ3Mgc2V0IGVhcmxpZXIgc28gdGhleSBkb24ndCBpbnRlcmZlcmUgd2l0aCBjYWxjdWxhdGlvbnMsXHJcbiAgICAvLyBzcGVjaWZpY2FsbHkgd2hlbiBsYXlvdXRGdW5jKCkgKGEuay5hLiBUb29sdGlwLm9yaWVudCgpKSBtZWFzdXJlcyBuYXR1cmFsIHdpZHRoIG9mIFRvb2x0aXBcclxuICAgIGNvbnN0IHMgPSBub2RlLnN0eWxlO1xyXG4gICAgcy5sZWZ0ID0gcy5yaWdodCA9IFwiYXV0b1wiO1xyXG4gICAgLy8gY29uZmlndXJlIG5vZGUgdG8gYmUgZGlzcGxheWVkIGluIGdpdmVuIHBvc2l0aW9uIHJlbGF0aXZlIHRvIGJ1dHRvblxyXG4gICAgLy8gKG5lZWQgdG8gZG8gdGhpcyBpbiBvcmRlciB0byBnZXQgYW4gYWNjdXJhdGUgc2l6ZSBmb3IgdGhlIG5vZGUsIGJlY2F1c2VcclxuICAgIC8vIGEgdG9vbHRpcCdzIHNpemUgY2hhbmdlcyBiYXNlZCBvbiBwb3NpdGlvbiwgZHVlIHRvIHRyaWFuZ2xlKVxyXG4gICAgaWYgKGxheW91dEZ1bmMpIHtcclxuICAgICAgY29uc3QgcmVzID0gbGF5b3V0RnVuYyhub2RlLCBjaG9pY2UuYXJvdW5kQ29ybmVyLCBjb3JuZXIsIHNwYWNlQXZhaWxhYmxlLCBhcm91bmROb2RlQ29vcmRzKTtcclxuICAgICAgb3ZlcmZsb3cgPSB0eXBlb2YgcmVzID09PSBcInVuZGVmaW5lZFwiID8gMCA6IHJlcztcclxuICAgIH1cclxuICAgIC8vIGdldCBub2RlJ3Mgc2l6ZVxyXG4gICAgY29uc3Qgc3R5bGUgPSBub2RlLnN0eWxlO1xyXG4gICAgY29uc3Qgb2xkRGlzcGxheSA9IHN0eWxlLmRpc3BsYXk7XHJcbiAgICBjb25zdCBvbGRWaXMgPSBzdHlsZS52aXNpYmlsaXR5O1xyXG4gICAgaWYgKHN0eWxlLmRpc3BsYXkgPT09IFwibm9uZVwiKSB7XHJcbiAgICAgIHN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xyXG4gICAgICBzdHlsZS5kaXNwbGF5ID0gXCJcIjtcclxuICAgIH1cclxuICAgIGNvbnN0IGJiID0gcG9zaXRpb24obm9kZSk7XHJcbiAgICBzdHlsZS5kaXNwbGF5ID0gb2xkRGlzcGxheTtcclxuICAgIHN0eWxlLnZpc2liaWxpdHkgPSBvbGRWaXM7XHJcbiAgICAvLyBjb29yZGluYXRlcyBhbmQgc2l6ZSBvZiBub2RlIHdpdGggc3BlY2lmaWVkIGNvcm5lciBwbGFjZWQgYXQgcG9zLFxyXG4gICAgLy8gYW5kIGNsaXBwZWQgYnkgdmlld3BvcnRcclxuICAgIGNvbnN0IHN0YXJ0WHBvcyA9IHtcclxuICAgICAgTDogcG9zLngsXHJcbiAgICAgIFI6IHBvcy54IC0gYmIudyxcclxuICAgICAgTTogTWF0aC5tYXgodmlldy5sLCBNYXRoLm1pbih2aWV3LmwgKyB2aWV3LncsIHBvcy54ICsgKGJiLncgPj4gMSkpIC0gYmIudykgLy8gTSBvcmllbnRhdGlvbiBpcyBtb3JlIGZsZXhpYmxlXHJcbiAgICB9W2Nvcm5lci5jaGFyQXQoMSldLCBzdGFydFlwb3MgPSB7XHJcbiAgICAgIFQ6IHBvcy55LFxyXG4gICAgICBCOiBwb3MueSAtIGJiLmgsXHJcbiAgICAgIE06IE1hdGgubWF4KHZpZXcudCwgTWF0aC5taW4odmlldy50ICsgdmlldy5oLCBwb3MueSArIChiYi5oID4+IDEpKSAtIGJiLmgpXHJcbiAgICB9W2Nvcm5lci5jaGFyQXQoMCldLCBzdGFydFggPSBNYXRoLm1heCh2aWV3LmwsIHN0YXJ0WHBvcyksIHN0YXJ0WSA9IE1hdGgubWF4KHZpZXcudCwgc3RhcnRZcG9zKSwgZW5kWCA9IE1hdGgubWluKHZpZXcubCArIHZpZXcudywgc3RhcnRYcG9zICsgYmIudyksIGVuZFkgPSBNYXRoLm1pbih2aWV3LnQgKyB2aWV3LmgsIHN0YXJ0WXBvcyArIGJiLmgpLCB3aWR0aCA9IGVuZFggLSBzdGFydFgsIGhlaWdodCA9IGVuZFkgLSBzdGFydFk7XHJcbiAgICBvdmVyZmxvdyArPSBiYi53IC0gd2lkdGggKyAoYmIuaCAtIGhlaWdodCk7XHJcbiAgICBpZiAoYmVzdCA9PSBudWxsIHx8IG92ZXJmbG93IDwgYmVzdC5vdmVyZmxvdykge1xyXG4gICAgICBiZXN0ID0ge1xyXG4gICAgICAgIGNvcm5lcixcclxuICAgICAgICBhcm91bmRDb3JuZXI6IGNob2ljZS5hcm91bmRDb3JuZXIsXHJcbiAgICAgICAgeDogc3RhcnRYLFxyXG4gICAgICAgIHk6IHN0YXJ0WSxcclxuICAgICAgICB3OiB3aWR0aCxcclxuICAgICAgICBoOiBoZWlnaHQsXHJcbiAgICAgICAgb3ZlcmZsb3csXHJcbiAgICAgICAgc3BhY2VBdmFpbGFibGVcclxuICAgICAgfTtcclxuICAgIH1cclxuICAgIHJldHVybiAhb3ZlcmZsb3c7XHJcbiAgfSk7XHJcbiAgLy8gSW4gY2FzZSB0aGUgYmVzdCBwb3NpdGlvbiBpcyBub3QgdGhlIGxhc3Qgb25lIHdlIGNoZWNrZWQsIG5lZWQgdG8gY2FsbFxyXG4gIC8vIGxheW91dEZ1bmMoKSBhZ2Fpbi5cclxuICBpZiAoYmVzdC5vdmVyZmxvdyAmJiBsYXlvdXRGdW5jKSB7XHJcbiAgICBsYXlvdXRGdW5jKG5vZGUsIGJlc3QuYXJvdW5kQ29ybmVyLCBiZXN0LmNvcm5lciwgYmVzdC5zcGFjZUF2YWlsYWJsZSwgYXJvdW5kTm9kZUNvb3Jkcyk7XHJcbiAgfVxyXG4gIC8vIGNvbXBlbnNhdGUgZm9yIG1hcmdpbiBvbiA8Ym9keT4sIHNlZSAjMTYxNDhcclxuICBjb25zdCB0b3AgPSBiZXN0LnkgLSArZ2V0U3R5bGUoZG9jdW1lbnQuYm9keSwgXCJtYXJnaW5Ub3BcIik7XHJcbiAgY29uc3Qgc2lkZSA9IGJlc3QueCAtICtnZXRTdHlsZShkb2N1bWVudC5ib2R5LCBcIm1hcmdpbkxlZnRcIik7XHJcbiAgbm9kZS5zdHlsZS50b3AgPSB0b3AgKyBcInB4XCI7XHJcbiAgbm9kZS5zdHlsZS5sZWZ0ID0gc2lkZSArIFwicHhcIjtcclxuICBub2RlLnN0eWxlLnJpZ2h0ID0gXCJhdXRvXCI7IC8vIG5lZWRlZCBmb3IgRkYgb3IgZWxzZSB0b29sdGlwIGdvZXMgdG8gZmFyIGxlZnRcclxuICByZXR1cm4gYmVzdDtcclxufVxuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuZnVuY3Rpb24gdCRyKHQpe3JldHVybiB0fWNvbnN0IHUkQT10PT50KnQsbyRsPXQ9PjEtdSRBKDEtdCksaSRQPXQ9PnQ8LjU/dSRBKDIqdCkvMjoobyRsKDIqKHQtLjUpKSsxKS8yLG4kQz10PT50KnQqdCxjJFQ9dD0+MS1uJEMoMS10KSxhJEc9dD0+dDwuNT9uJEMoMip0KS8yOihjJFQoMioodC0uNSkpKzEpLzIscyRxPXQ9PnQqdCp0KnQscSQyPXQ9PjEtcyRxKDEtdCksciRpPXQ9PnQ8LjU/cyRxKDIqdCkvMjoocSQyKDIqKHQtLjUpKSsxKS8yLGUkbT10PT50KnQqdCp0KnQsYiQ4PXQ9PjEtZSRtKDEtdCksZCR2PXQ9PnQ8LjU/ZSRtKDIqdCkvMjooYiQ4KDIqKHQtLjUpKSsxKS8yLGgkcT10PT4xLU1hdGguY29zKHQqTWF0aC5QSS8yKSxwJFY9dD0+MS1oJHEoMS10KSx4JGE9dD0+dDwuNT9oJHEoMip0KS8yOihwJFYoMioodC0uNSkpKzEpLzIsTSQ3PXQ9PjIqKigxMCoodC0xKSksZiRuPXQ9PjEtTSQ3KDEtdCksbCRFPXQ9PnQ8LjU/TSQ3KDIqdCkvMjooZiRuKDIqKHQtLjUpKSsxKS8yLEkkMj10PT4tKE1hdGguc3FydCgxLXQqdCktMSksUCQ0PXQ9PjEtSSQyKDEtdCksZyRjPXQ9PnQ8LjU/SSQyKDIqdCkvMjooUCQ0KDIqKHQtLjUpKSsxKS8yO2Z1bmN0aW9uIGokYyh0KXtjb25zdCB1PTIqKHQtTWF0aC5zcXJ0KCh0LTEpKnQpKSxvPXUvMi90O3JldHVybiBpPT5pPG8/dCppKmk6dSppLXUrMX1mdW5jdGlvbiBrJDYodCx1KXtyZXR1cm4gbz0+bzx1P3UqdChvL3UpOjEtdCgoMS1vKS8oMS11KSkqKDEtdSl9Y29uc3QgbSR0PWskNihqJGMoMSksMSksdiQ3PWskNihqJGMoMSksMCksdyQ3PWskNihqJGMoMSksLjUpLHkkaD1rJDYoaiRjKDIpLDEpLHokMz1rJDYoaiRjKDIpLDApLEEkNT1rJDYoaiRjKDIpLC41KSxCJDE9ayQ2KGokYygzKSwxKSxDJDU9ayQ2KGokYygzKSwwKSxEJDM9ayQ2KGokYygzKSwuNSksRSQxPWskNihqJGMoNCksMSksRiQyPWskNihqJGMoNCksMCksRyQ0PWskNihqJGMoNCksLjUpLEgkMT17bGluZWFyOnQkcixcImluLXF1YWRcIjp1JEEsXCJvdXQtcXVhZFwiOm8kbCxcImluLW91dC1xdWFkXCI6aSRQLFwiaW4tY29hc3QtcXVhZFwiOm0kdCxcIm91dC1jb2FzdC1xdWFkXCI6diQ3LFwiaW4tb3V0LWNvYXN0LXF1YWRcIjp3JDcsXCJpbi1jdWJpY1wiOm4kQyxcIm91dC1jdWJpY1wiOmMkVCxcImluLW91dC1jdWJpY1wiOmEkRyxcImluLWNvYXN0LWN1YmljXCI6eSRoLFwib3V0LWNvYXN0LWN1YmljXCI6eiQzLFwiaW4tb3V0LWNvYXN0LWN1YmljXCI6QSQ1LFwiaW4tcXVhcnRcIjpzJHEsXCJvdXQtcXVhcnRcIjpxJDIsXCJpbi1vdXQtcXVhcnRcIjpyJGksXCJpbi1jb2FzdC1xdWFydFwiOkIkMSxcIm91dC1jb2FzdC1xdWFydFwiOkMkNSxcImluLW91dC1jb2FzdC1xdWFydFwiOkQkMyxcImluLXF1aW50XCI6ZSRtLFwib3V0LXF1aW50XCI6YiQ4LFwiaW4tb3V0LXF1aW50XCI6ZCR2LFwiaW4tY29hc3QtcXVpbnRcIjpFJDEsXCJvdXQtY29hc3QtcXVpbnRcIjpGJDIsXCJpbi1vdXQtY29hc3QtcXVpbnRcIjpHJDQsXCJpbi1zaW5lXCI6aCRxLFwib3V0LXNpbmVcIjpwJFYsXCJpbi1vdXQtc2luZVwiOngkYSxcImluLWV4cG9cIjpNJDcsXCJvdXQtZXhwb1wiOmYkbixcImluLW91dC1leHBvXCI6bCRFLFwiaW4tY2lyY1wiOkkkMixcIm91dC1jaXJjXCI6UCQ0LFwiaW4tb3V0LWNpcmNcIjpnJGN9O1xuXG4vLyBlc3JpNC52aWV3cy5hbmltYXRpb25cclxuZnVuY3Rpb24gX2V4ZWN1dGVBbmltYXRpb24ocnVuSW5mbykge1xyXG4gIGlmIChydW5JbmZvLnByb2dyZXNzIDwgMSkge1xyXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuICAgICAgaWYgKHJ1bkluZm8uX3N0b3BNZXRob2QpIHtcclxuICAgICAgICByZXR1cm47IC8vIHN0b3BwZWRcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBjdXJyZW50VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gICAgICBydW5JbmZvLnByb2dyZXNzID0gMSAtIChydW5JbmZvLmVuZFRpbWUgLSBjdXJyZW50VGltZSkgLyBydW5JbmZvLmR1cmF0aW9uO1xyXG4gICAgICBydW5JbmZvLnByb2dyZXNzID0gTWF0aC5taW4oMSwgcnVuSW5mby5wcm9ncmVzcyk7XHJcbiAgICAgIF91cGRhdGVQcm9wZXJ0aWVzKHJ1bkluZm8pO1xyXG4gICAgICBfZXhlY3V0ZUFuaW1hdGlvbihydW5JbmZvKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBlbHNlIHtcclxuICAgIHJ1bkluZm8uX29uRW5kKCk7XHJcbiAgfVxyXG59XHJcbmZ1bmN0aW9uIF91cGRhdGVQcm9wZXJ0aWVzKHJ1bkluZm8pIHtcclxuICBmb3IgKGNvbnN0IGlkIGluIHJ1bkluZm8ucHJvcGVydGllcykge1xyXG4gICAgY29uc3QgcHJvcGVydHlJbmZvID0gcnVuSW5mby5wcm9wZXJ0aWVzW2lkXTtcclxuICAgIGNvbnN0IGVhc2luZ0Z1bmMgPSAhcHJvcGVydHlJbmZvLmVhc2luZ1xyXG4gICAgICA/IG51bGxcclxuICAgICAgOiB0eXBlb2YgcHJvcGVydHlJbmZvLmVhc2luZyA9PT0gXCJmdW5jdGlvblwiXHJcbiAgICAgICAgPyBwcm9wZXJ0eUluZm8uZWFzaW5nXHJcbiAgICAgICAgOiBIJDFbcHJvcGVydHlJbmZvLmVhc2luZ107XHJcbiAgICBjb25zdCBwcm9ncmVzcyA9IGVhc2luZ0Z1bmMgPyBlYXNpbmdGdW5jKHJ1bkluZm8ucHJvZ3Jlc3MpIDogcnVuSW5mby5wcm9ncmVzcztcclxuICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IHByb3BlcnR5SW5mby5zdGFydCArIHByb2dyZXNzICogKHByb3BlcnR5SW5mby5lbmQgLSBwcm9wZXJ0eUluZm8uc3RhcnQpO1xyXG4gICAgcnVuSW5mby5vYmpbaWRdID0gcHJvcGVydHlJbmZvLnVuaXRzID8gY3VycmVudFZhbHVlICsgcHJvcGVydHlJbmZvLnVuaXRzIDogY3VycmVudFZhbHVlO1xyXG4gICAgcnVuSW5mby5fb25Qcm9ncmVzcyhpZCwgY3VycmVudFZhbHVlLCBwcm9ncmVzcyk7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBBbmltYXRlcyBvbmUgb3IgbXVsdHBsZSBwcm9wZXJ0aWVzIG9mIGEgZG9tIG5vZGUgb3IgYW55IG9iamVjdC5cclxuICogQGV4YW1wbGVcclxuICogICAgQW5pbWF0b3IuYW5pbWF0ZVByb3BlcnR5KHtcclxuICogICAgICAgIG9iajogb2JqZWN0LCAtIGNhbiBiZSBtaXNzaW5nXHJcbiAqICAgICAgICBkdXJhdGlvbjogMTAwLCAvLyBtc1xyXG4gKiAgICAgICAgcHJvcGVydGllczoge1xyXG4gKiAgICAgICAgICAgIHByb3AxOiB7c3RhcnQ6IDAsIGVuZDogMSwgYWRkUHg6IEJvb2xlYW4gKGRlZmF1bHQgZmFsc2UpLCBlYXNpbmc6IEZ1bmN0aW9uIHwgU3RyaW5nIH1cclxuICogICAgICAgIH0sXHJcbiAqICAgICAgICBvbkVuZDogZnVuY3Rpb24oKXsgfSxcclxuICogICAgICAgIG9uUHJvZ3Jlc3M6IGZ1bmN0aW9uKHByb3AsIHZhbHVlLCBwcm9ncmVzcyl7IH1cclxuICogICAgfSk7XHJcbiAqXHJcbiAqIEByZXR1cm5zIEFuaW1hdGlvbkluZm8sIGFuIG9iamVjdCB3aXRoIGEgc3RvcCgpIG1ldGhvZCB0byBzdG9wIGFuaW1hdGlvbiwgYW5kIFByb21pc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBhbmltYXRlUHJvcGVydHkoeyBvYmosIG5vZGUsIGR1cmF0aW9uID0gMTAwMCwgcHJvcGVydGllcywgb25Qcm9ncmVzcywgb25FbmQsIG9uU3RvcCwgb25DYW5jZWwgfSkge1xyXG4gIGNvbnN0IGQgPSBjcmVhdGVEZWZlcnJlZCgpO1xyXG4gIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XHJcbiAgY29uc3QgZW1pdHRlciA9IG5ldyBFdmVudGVkJDEoKTtcclxuICBjb25zdCBydW5JbmZvID0ge1xyXG4gICAgcHJvcGVydGllcyxcclxuICAgIG9iajogb2JqIHx8IG5vZGUgfHwge30sXHJcbiAgICBwcm9ncmVzczogMCxcclxuICAgIHByb21pc2U6IGQucHJvbWlzZSxcclxuICAgIGR1cmF0aW9uLFxyXG4gICAgc3RhcnRUaW1lLFxyXG4gICAgZW5kVGltZTogc3RhcnRUaW1lICsgZHVyYXRpb24sXHJcbiAgICBzdG9wOiAoZ29Ub0VuZCkgPT4ge1xyXG4gICAgICBydW5JbmZvLl9zdG9wTWV0aG9kID0gZ29Ub0VuZCA/IFwic3RvcEVuZFwiIDogXCJzdG9wXCI7XHJcbiAgICAgIC8vIGZpbmFsaXplIGFuaW1hdGlvblxyXG4gICAgICBpZiAocnVuSW5mby5fc3RvcE1ldGhvZCA9PT0gXCJzdG9wXCIpIHtcclxuICAgICAgICBydW5JbmZvLl9vbkVuZCgpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBpZiAocnVuSW5mby5fc3RvcE1ldGhvZCA9PT0gXCJzdG9wRW5kXCIpIHtcclxuICAgICAgICBydW5JbmZvLnByb2dyZXNzID0gMTtcclxuICAgICAgICBfdXBkYXRlUHJvcGVydGllcyhydW5JbmZvKTtcclxuICAgICAgICBydW5JbmZvLl9vbkVuZCgpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIGNhbmNlbDogKCkgPT4ge1xyXG4gICAgICBydW5JbmZvLl9zdG9wTWV0aG9kID0gXCJjYW5jZWxcIjtcclxuICAgICAgcnVuSW5mby5fb25DYW5jZWwoKTsgLy8gZmluYWxpemUgYW5pbWF0aW9uXHJcbiAgICB9LFxyXG4gICAgLy8gUHJvbWlzZUxpa2UgbWV0aG9kc1xyXG4gICAgdGhlbjogKG9uZnVsZmlsbGVkLCBvbnJlamVjdGVkKSA9PiBkLnByb21pc2UudGhlbihvbmZ1bGZpbGxlZCwgb25yZWplY3RlZCksXHJcbiAgICAvLyBFdmVudHNcclxuICAgIGV2ZW50czogZW1pdHRlcixcclxuICAgIC8vIGludGVybmFsXHJcbiAgICBfc3RvcE1ldGhvZDogbnVsbCxcclxuICAgIF9vblByb2dyZXNzOiAocHJvcE5hbWUsIHZhbHVlLCBwcm9ncmVzcykgPT4ge1xyXG4gICAgICBvblByb2dyZXNzICYmIG9uUHJvZ3Jlc3MocHJvcE5hbWUsIHZhbHVlLCBwcm9ncmVzcyk7XHJcbiAgICB9LFxyXG4gICAgX29uRW5kOiAoKSA9PiB7XHJcbiAgICAgIG9uU3RvcCAmJiBvblN0b3AoKTtcclxuICAgICAgb25FbmQgJiYgb25FbmQoKTtcclxuICAgICAgZC5yZXNvbHZlKCk7XHJcbiAgICAgIGVtaXR0ZXIuZW1pdChcIm9uRW5kXCIpO1xyXG4gICAgfSxcclxuICAgIF9vbkNhbmNlbDogKCkgPT4ge1xyXG4gICAgICBvbkNhbmNlbCAmJiBvbkNhbmNlbCgpO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgX3VwZGF0ZVByb3BlcnRpZXMocnVuSW5mbyk7XHJcbiAgX2V4ZWN1dGVBbmltYXRpb24ocnVuSW5mbyk7XHJcbiAgcmV0dXJuIHJ1bkluZm87XHJcbn1cblxuLy8gZ2VvZW5yaWNobWVudC51dGlsc1xyXG5jb25zdCBBTklNQVRJT05fRFVSQVRJT04gPSAyNTA7IC8vIG1zXHJcbi8qKlxyXG4gKiBBbmltYXRlcyBhIG5vZGUgdG8gZmFkZSBpbi5cclxuICogQHBhcmFtIHBhcmFtcy5ub2RlICAgICAgICAgIERvbSBub2RlLlxyXG4gKiBAcGFyYW0gcGFyYW1zLmR1cmF0aW9uICAgICAgTnVtYmVyLiBEZWZhdWx0IEFOSU1BVElPTl9EVVJBVElPTi5cclxuICogQHBhcmFtIHBhcmFtcy5vbkVuZCAgICAgICAgIEZ1bmN0aW9uKCkuXHJcbiAqXHJcbiAqIEByZXR1cm5zIFByb21pc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBhbmltYXRlRmFkZUluKHBhcmFtcykge1xyXG4gIHJldHVybiBhbmltYXRlUHJvcGVydHkoe1xyXG4gICAgb2JqOiBwYXJhbXMubm9kZS5zdHlsZSxcclxuICAgIGR1cmF0aW9uOiBwYXJhbXMuZHVyYXRpb24gfHwgQU5JTUFUSU9OX0RVUkFUSU9OLFxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICBvcGFjaXR5OiB7IHN0YXJ0OiAwLCBlbmQ6IDEgfVxyXG4gICAgfSxcclxuICAgIG9uRW5kKCkge1xyXG4gICAgICBwYXJhbXMub25FbmQgJiYgcGFyYW1zLm9uRW5kKCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn1cclxuLyoqXHJcbiAqIEFuaW1hdGVzIGEgbm9kZSB0byBmYWRlIG91dC5cclxuICogQHBhcmFtIHBhcmFtcy5ub2RlICAgICAgICAgIERvbSBub2RlLlxyXG4gKiBAcGFyYW0gcGFyYW1zLmR1cmF0aW9uICAgICAgTnVtYmVyLiBEZWZhdWx0IEFOSU1BVElPTl9EVVJBVElPTi5cclxuICogQHBhcmFtIHBhcmFtcy5vbkVuZCAgICAgICAgIEZ1bmN0aW9uKCkuXHJcbiAqXHJcbiAqIEByZXR1cm5zIFByb21pc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBhbmltYXRlRmFkZU91dChwYXJhbXMpIHtcclxuICByZXR1cm4gYW5pbWF0ZVByb3BlcnR5KHtcclxuICAgIG9iajogcGFyYW1zLm5vZGUuc3R5bGUsXHJcbiAgICBkdXJhdGlvbjogcGFyYW1zLmR1cmF0aW9uIHx8IEFOSU1BVElPTl9EVVJBVElPTixcclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgb3BhY2l0eTogeyBzdGFydDogMSwgZW5kOiAwIH1cclxuICAgIH0sXHJcbiAgICBvbkVuZCgpIHtcclxuICAgICAgcGFyYW1zLm9uRW5kICYmIHBhcmFtcy5vbkVuZCgpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5jb25zdCBlJGw9e3RyYW5zcGFyZW50OlswLDAsMCwwXSxibGFjazpbMCwwLDAsMV0sc2lsdmVyOlsxOTIsMTkyLDE5MiwxXSxncmF5OlsxMjgsMTI4LDEyOCwxXSx3aGl0ZTpbMjU1LDI1NSwyNTUsMV0sbWFyb29uOlsxMjgsMCwwLDFdLHJlZDpbMjU1LDAsMCwxXSxwdXJwbGU6WzEyOCwwLDEyOCwxXSxmdWNoc2lhOlsyNTUsMCwyNTUsMV0sZ3JlZW46WzAsMTI4LDAsMV0sbGltZTpbMCwyNTUsMCwxXSxvbGl2ZTpbMTI4LDEyOCwwLDFdLHllbGxvdzpbMjU1LDI1NSwwLDFdLG5hdnk6WzAsMCwxMjgsMV0sYmx1ZTpbMCwwLDI1NSwxXSx0ZWFsOlswLDEyOCwxMjgsMV0sYXF1YTpbMCwyNTUsMjU1LDFdLGFsaWNlYmx1ZTpbMjQwLDI0OCwyNTUsMV0sYW50aXF1ZXdoaXRlOlsyNTAsMjM1LDIxNSwxXSxhcXVhbWFyaW5lOlsxMjcsMjU1LDIxMiwxXSxhenVyZTpbMjQwLDI1NSwyNTUsMV0sYmVpZ2U6WzI0NSwyNDUsMjIwLDFdLGJpc3F1ZTpbMjU1LDIyOCwxOTYsMV0sYmxhbmNoZWRhbG1vbmQ6WzI1NSwyMzUsMjA1LDFdLGJsdWV2aW9sZXQ6WzEzOCw0MywyMjYsMV0sYnJvd246WzE2NSw0Miw0MiwxXSxidXJseXdvb2Q6WzIyMiwxODQsMTM1LDFdLGNhZGV0Ymx1ZTpbOTUsMTU4LDE2MCwxXSxjaGFydHJldXNlOlsxMjcsMjU1LDAsMV0sY2hvY29sYXRlOlsyMTAsMTA1LDMwLDFdLGNvcmFsOlsyNTUsMTI3LDgwLDFdLGNvcm5mbG93ZXJibHVlOlsxMDAsMTQ5LDIzNywxXSxjb3Juc2lsazpbMjU1LDI0OCwyMjAsMV0sY3JpbXNvbjpbMjIwLDIwLDYwLDFdLGN5YW46WzAsMjU1LDI1NSwxXSxkYXJrYmx1ZTpbMCwwLDEzOSwxXSxkYXJrY3lhbjpbMCwxMzksMTM5LDFdLGRhcmtnb2xkZW5yb2Q6WzE4NCwxMzQsMTEsMV0sZGFya2dyYXk6WzE2OSwxNjksMTY5LDFdLGRhcmtncmVlbjpbMCwxMDAsMCwxXSxkYXJrZ3JleTpbMTY5LDE2OSwxNjksMV0sZGFya2toYWtpOlsxODksMTgzLDEwNywxXSxkYXJrbWFnZW50YTpbMTM5LDAsMTM5LDFdLGRhcmtvbGl2ZWdyZWVuOls4NSwxMDcsNDcsMV0sZGFya29yYW5nZTpbMjU1LDE0MCwwLDFdLGRhcmtvcmNoaWQ6WzE1Myw1MCwyMDQsMV0sZGFya3JlZDpbMTM5LDAsMCwxXSxkYXJrc2FsbW9uOlsyMzMsMTUwLDEyMiwxXSxkYXJrc2VhZ3JlZW46WzE0MywxODgsMTQzLDFdLGRhcmtzbGF0ZWJsdWU6WzcyLDYxLDEzOSwxXSxkYXJrc2xhdGVncmF5Ols0Nyw3OSw3OSwxXSxkYXJrc2xhdGVncmV5Ols0Nyw3OSw3OSwxXSxkYXJrdHVycXVvaXNlOlswLDIwNiwyMDksMV0sZGFya3Zpb2xldDpbMTQ4LDAsMjExLDFdLGRlZXBwaW5rOlsyNTUsMjAsMTQ3LDFdLGRlZXBza3libHVlOlswLDE5MSwyNTUsMV0sZGltZ3JheTpbMTA1LDEwNSwxMDUsMV0sZGltZ3JleTpbMTA1LDEwNSwxMDUsMV0sZG9kZ2VyYmx1ZTpbMzAsMTQ0LDI1NSwxXSxmaXJlYnJpY2s6WzE3OCwzNCwzNCwxXSxmbG9yYWx3aGl0ZTpbMjU1LDI1MCwyNDAsMV0sZm9yZXN0Z3JlZW46WzM0LDEzOSwzNCwxXSxnYWluc2Jvcm86WzIyMCwyMjAsMjIwLDFdLGdob3N0d2hpdGU6WzI0OCwyNDgsMjU1LDFdLGdvbGQ6WzI1NSwyMTUsMCwxXSxnb2xkZW5yb2Q6WzIxOCwxNjUsMzIsMV0sZ3JlZW55ZWxsb3c6WzE3MywyNTUsNDcsMV0sZ3JleTpbMTI4LDEyOCwxMjgsMV0saG9uZXlkZXc6WzI0MCwyNTUsMjQwLDFdLGhvdHBpbms6WzI1NSwxMDUsMTgwLDFdLGluZGlhbnJlZDpbMjA1LDkyLDkyLDFdLGluZGlnbzpbNzUsMCwxMzAsMV0saXZvcnk6WzI1NSwyNTUsMjQwLDFdLGtoYWtpOlsyNDAsMjMwLDE0MCwxXSxsYXZlbmRlcjpbMjMwLDIzMCwyNTAsMV0sbGF2ZW5kZXJibHVzaDpbMjU1LDI0MCwyNDUsMV0sbGF3bmdyZWVuOlsxMjQsMjUyLDAsMV0sbGVtb25jaGlmZm9uOlsyNTUsMjUwLDIwNSwxXSxsaWdodGJsdWU6WzE3MywyMTYsMjMwLDFdLGxpZ2h0Y29yYWw6WzI0MCwxMjgsMTI4LDFdLGxpZ2h0Y3lhbjpbMjI0LDI1NSwyNTUsMV0sbGlnaHRnb2xkZW5yb2R5ZWxsb3c6WzI1MCwyNTAsMjEwLDFdLGxpZ2h0Z3JheTpbMjExLDIxMSwyMTEsMV0sbGlnaHRncmVlbjpbMTQ0LDIzOCwxNDQsMV0sbGlnaHRncmV5OlsyMTEsMjExLDIxMSwxXSxsaWdodHBpbms6WzI1NSwxODIsMTkzLDFdLGxpZ2h0c2FsbW9uOlsyNTUsMTYwLDEyMiwxXSxsaWdodHNlYWdyZWVuOlszMiwxNzgsMTcwLDFdLGxpZ2h0c2t5Ymx1ZTpbMTM1LDIwNiwyNTAsMV0sbGlnaHRzbGF0ZWdyYXk6WzExOSwxMzYsMTUzLDFdLGxpZ2h0c2xhdGVncmV5OlsxMTksMTM2LDE1MywxXSxsaWdodHN0ZWVsYmx1ZTpbMTc2LDE5NiwyMjIsMV0sbGlnaHR5ZWxsb3c6WzI1NSwyNTUsMjI0LDFdLGxpbWVncmVlbjpbNTAsMjA1LDUwLDFdLGxpbmVuOlsyNTAsMjQwLDIzMCwxXSxtYWdlbnRhOlsyNTUsMCwyNTUsMV0sbWVkaXVtYXF1YW1hcmluZTpbMTAyLDIwNSwxNzAsMV0sbWVkaXVtYmx1ZTpbMCwwLDIwNSwxXSxtZWRpdW1vcmNoaWQ6WzE4Niw4NSwyMTEsMV0sbWVkaXVtcHVycGxlOlsxNDcsMTEyLDIxOSwxXSxtZWRpdW1zZWFncmVlbjpbNjAsMTc5LDExMywxXSxtZWRpdW1zbGF0ZWJsdWU6WzEyMywxMDQsMjM4LDFdLG1lZGl1bXNwcmluZ2dyZWVuOlswLDI1MCwxNTQsMV0sbWVkaXVtdHVycXVvaXNlOls3MiwyMDksMjA0LDFdLG1lZGl1bXZpb2xldHJlZDpbMTk5LDIxLDEzMywxXSxtaWRuaWdodGJsdWU6WzI1LDI1LDExMiwxXSxtaW50Y3JlYW06WzI0NSwyNTUsMjUwLDFdLG1pc3R5cm9zZTpbMjU1LDIyOCwyMjUsMV0sbW9jY2FzaW46WzI1NSwyMjgsMTgxLDFdLG5hdmFqb3doaXRlOlsyNTUsMjIyLDE3MywxXSxvbGRsYWNlOlsyNTMsMjQ1LDIzMCwxXSxvbGl2ZWRyYWI6WzEwNywxNDIsMzUsMV0sb3JhbmdlOlsyNTUsMTY1LDAsMV0sb3JhbmdlcmVkOlsyNTUsNjksMCwxXSxvcmNoaWQ6WzIxOCwxMTIsMjE0LDFdLHBhbGVnb2xkZW5yb2Q6WzIzOCwyMzIsMTcwLDFdLHBhbGVncmVlbjpbMTUyLDI1MSwxNTIsMV0scGFsZXR1cnF1b2lzZTpbMTc1LDIzOCwyMzgsMV0scGFsZXZpb2xldHJlZDpbMjE5LDExMiwxNDcsMV0scGFwYXlhd2hpcDpbMjU1LDIzOSwyMTMsMV0scGVhY2hwdWZmOlsyNTUsMjE4LDE4NSwxXSxwZXJ1OlsyMDUsMTMzLDYzLDFdLHBpbms6WzI1NSwxOTIsMjAzLDFdLHBsdW06WzIyMSwxNjAsMjIxLDFdLHBvd2RlcmJsdWU6WzE3NiwyMjQsMjMwLDFdLHJlYmVjY2FwdXJwbGU6WzEwMiw1MSwxNTMsMV0scm9zeWJyb3duOlsxODgsMTQzLDE0MywxXSxyb3lhbGJsdWU6WzY1LDEwNSwyMjUsMV0sc2FkZGxlYnJvd246WzEzOSw2OSwxOSwxXSxzYWxtb246WzI1MCwxMjgsMTE0LDFdLHNhbmR5YnJvd246WzI0NCwxNjQsOTYsMV0sc2VhZ3JlZW46WzQ2LDEzOSw4NywxXSxzZWFzaGVsbDpbMjU1LDI0NSwyMzgsMV0sc2llbm5hOlsxNjAsODIsNDUsMV0sc2t5Ymx1ZTpbMTM1LDIwNiwyMzUsMV0sc2xhdGVibHVlOlsxMDYsOTAsMjA1LDFdLHNsYXRlZ3JheTpbMTEyLDEyOCwxNDQsMV0sc2xhdGVncmV5OlsxMTIsMTI4LDE0NCwxXSxzbm93OlsyNTUsMjUwLDI1MCwxXSxzcHJpbmdncmVlbjpbMCwyNTUsMTI3LDFdLHN0ZWVsYmx1ZTpbNzAsMTMwLDE4MCwxXSx0YW46WzIxMCwxODAsMTQwLDFdLHRoaXN0bGU6WzIxNiwxOTEsMjE2LDFdLHRvbWF0bzpbMjU1LDk5LDcxLDFdLHR1cnF1b2lzZTpbNjQsMjI0LDIwOCwxXSx2aW9sZXQ6WzIzOCwxMzAsMjM4LDFdLHdoZWF0OlsyNDUsMjIyLDE3OSwxXSx3aGl0ZXNtb2tlOlsyNDUsMjQ1LDI0NSwxXSx5ZWxsb3dncmVlbjpbMTU0LDIwNSw1LDEwXX07ZnVuY3Rpb24gciRoKHIpe3ZhciBsO3JldHVybiBudWxsIT0obD1lJGxbci50b0xvd2VyQ2FzZSgpXSk/bDpudWxsfWZ1bmN0aW9uIGEkRihlLHIsbCl7bDwwJiYrK2wsbD4xJiYtLWw7Y29uc3QgYT02Kmw7cmV0dXJuIGE8MT9lKyhyLWUpKmE6MipsPDE/cjozKmw8Mj9lKyhyLWUpKigyLzMtbCkqNjplfWZ1bmN0aW9uIG4kQihlLHIsbCxuPTEpe2NvbnN0IGk9KGUlMzYwKzM2MCklMzYwLzM2MCxvPWw8PS41P2wqKHIrMSk6bCtyLWwqcix0PTIqbC1vO3JldHVybiBbTWF0aC5yb3VuZCgyNTYqYSRGKHQsbyxpKzEvMykpLE1hdGgucm91bmQoMjU2KmEkRih0LG8saSkpLE1hdGgucm91bmQoMjU2KmEkRih0LG8saS0xLzMpKSxuXX1cblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmNvbnN0IG4kQT1uZXcgRmxvYXQzMkFycmF5KDEpO2Z1bmN0aW9uIHUkeihuKXstLW47Zm9yKGxldCB0PTE7dDwzMjt0PDw9MSlufD1uPj50O3JldHVybiBuKzF9ZnVuY3Rpb24gZSRrKG4sdCxyKXtyZXR1cm4gbjx0P3Q6bj5yP3I6bn1mdW5jdGlvbiBpJE8obix0LHIpe3JldHVybiBNYXRoLm1pbihNYXRoLm1heChuLHQpLHIpfWZ1bmN0aW9uIG8kayhuKXtyZXR1cm4gMD09KG4mbi0xKX1jb25zdCBoJHA9TWF0aC5sb2cyfHxmdW5jdGlvbihuKXtyZXR1cm4gTWF0aC5sb2cobikvTWF0aC5MTjJ9O2Z1bmN0aW9uIE0kNihuLHQscil7cmV0dXJuIG4rKHQtbikqcn1mdW5jdGlvbiBtJHMobil7cmV0dXJuIG4qTWF0aC5QSS8xODB9ZnVuY3Rpb24gYiQ3KG4pe3JldHVybiAxODAqbi9NYXRoLlBJfWZ1bmN0aW9uIE4kMihuKXtyZXR1cm4gTWF0aC5hY29zKGUkayhuLC0xLDEpKX1mdW5jdGlvbiBnJGIobil7cmV0dXJuIE1hdGguYXNpbihlJGsobiwtMSwxKSl9ZnVuY3Rpb24gcCRVKHQpe3JldHVybiBuJEFbMF09dCxuJEFbMF19cCRVKDM0MDI4MjM0NjYzODUyODg2ZTIyKTtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmZ1bmN0aW9uIG4keih0KXtyZXR1cm4gZSRrKGEkUCh0KSwwLDI1NSl9ZnVuY3Rpb24gYSRFKHQscixzKXtyZXR1cm4gdD1OdW1iZXIodCksaXNOYU4odCk/czp0PHI/cjp0PnM/czp0fWNsYXNzIG8kantjb25zdHJ1Y3Rvcih0KXt0aGlzLnI9MjU1LHRoaXMuZz0yNTUsdGhpcy5iPTI1NSx0aGlzLmE9MSx0JiZ0aGlzLnNldENvbG9yKHQpO31zdGF0aWMgYmxlbmRDb2xvcnModCxyLHMsaT1uZXcgbyRqKXtyZXR1cm4gaS5yPU1hdGgucm91bmQodC5yKyhyLnItdC5yKSpzKSxpLmc9TWF0aC5yb3VuZCh0LmcrKHIuZy10LmcpKnMpLGkuYj1NYXRoLnJvdW5kKHQuYisoci5iLXQuYikqcyksaS5hPXQuYSsoci5hLXQuYSkqcyxpLl9zYW5pdGl6ZSgpfXN0YXRpYyBmcm9tUmdiKHQscil7Y29uc3QgaT10LnRvTG93ZXJDYXNlKCkubWF0Y2goL14ocmdiYT98aHNsYT8pXFwoKFtcXHNcXC5cXC0sJTAtOV0rKVxcKS8pO2lmKGkpe2NvbnN0IHQ9aVsyXS5zcGxpdCgvXFxzKixcXHMqLyksZT1pWzFdO2lmKFwicmdiXCI9PT1lJiYzPT09dC5sZW5ndGh8fFwicmdiYVwiPT09ZSYmND09PXQubGVuZ3RoKXtjb25zdCBzPXRbMF07aWYoXCIlXCI9PT1zLmNoYXJBdChzLmxlbmd0aC0xKSl7Y29uc3Qgcz10Lm1hcCgodD0+Mi41NipwYXJzZUZsb2F0KHQpKSk7cmV0dXJuIDQ9PT10Lmxlbmd0aCYmKHNbM109cGFyc2VGbG9hdCh0WzNdKSksbyRqLmZyb21BcnJheShzLHIpfXJldHVybiBvJGouZnJvbUFycmF5KHQubWFwKCh0PT5wYXJzZUZsb2F0KHQpKSkscil9aWYoXCJoc2xcIj09PWUmJjM9PT10Lmxlbmd0aHx8XCJoc2xhXCI9PT1lJiY0PT09dC5sZW5ndGgpcmV0dXJuIG8kai5mcm9tQXJyYXkobiRCKHBhcnNlRmxvYXQodFswXSkscGFyc2VGbG9hdCh0WzFdKS8xMDAscGFyc2VGbG9hdCh0WzJdKS8xMDAscGFyc2VGbG9hdCh0WzNdKSkscil9cmV0dXJuIG51bGx9c3RhdGljIGZyb21IZXgodCxyPW5ldyBvJGope2lmKDQhPT10Lmxlbmd0aCYmNyE9PXQubGVuZ3RofHxcIiNcIiE9PXRbMF0pcmV0dXJuIG51bGw7Y29uc3Qgcz00PT09dC5sZW5ndGg/NDo4LGk9KDE8PHMpLTE7bGV0IGU9TnVtYmVyKFwiMHhcIit0LnN1YnN0cigxKSk7cmV0dXJuIGlzTmFOKGUpP251bGw6KFtcImJcIixcImdcIixcInJcIl0uZm9yRWFjaCgodD0+e2NvbnN0IG49ZSZpO2U+Pj1zLHJbdF09ND09PXM/MTcqbjpuO30pKSxyLmE9MSxyKX1zdGF0aWMgZnJvbUFycmF5KHQscj1uZXcgbyRqKXtyZXR1cm4gci5fc2V0KE51bWJlcih0WzBdKSxOdW1iZXIodFsxXSksTnVtYmVyKHRbMl0pLE51bWJlcih0WzNdKSksaXNOYU4oci5hKSYmKHIuYT0xKSxyLl9zYW5pdGl6ZSgpfXN0YXRpYyBmcm9tU3RyaW5nKHQscil7Y29uc3Qgcz1yJGgodCk7cmV0dXJuIHMmJm8kai5mcm9tQXJyYXkocyxyKXx8byRqLmZyb21SZ2IodCxyKXx8byRqLmZyb21IZXgodCxyKX1zdGF0aWMgZnJvbUpTT04odCl7cmV0dXJuIHQmJm5ldyBvJGooW3RbMF0sdFsxXSx0WzJdLHRbM10vMjU1XSl9c3RhdGljIHRvVW5pdFJHQihyKXtyZXR1cm4gciRBKHIpP1tyLnIvMjU1LHIuZy8yNTUsci5iLzI1NV06bnVsbH1zdGF0aWMgdG9Vbml0UkdCQShyKXtyZXR1cm4gciRBKHIpP1tyLnIvMjU1LHIuZy8yNTUsci5iLzI1NSxudWxsIT1yLmE/ci5hOjFdOm51bGx9Z2V0IGlzQnJpZ2h0KCl7cmV0dXJuIC4yOTkqdGhpcy5yKy41ODcqdGhpcy5nKy4xMTQqdGhpcy5iPj0xMjd9c2V0Q29sb3IodCl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHQpbyRqLmZyb21TdHJpbmcodCx0aGlzKTtlbHNlIGlmKEFycmF5LmlzQXJyYXkodCkpbyRqLmZyb21BcnJheSh0LHRoaXMpO2Vsc2Uge3ZhciByLHMsaSxlO3RoaXMuX3NldChudWxsIT0ocj10LnIpP3I6MCxudWxsIT0ocz10LmcpP3M6MCxudWxsIT0oaT10LmIpP2k6MCxudWxsIT0oZT10LmEpP2U6MSksdCBpbnN0YW5jZW9mIG8kanx8dGhpcy5fc2FuaXRpemUoKTt9cmV0dXJuIHRoaXN9dG9SZ2IoKXtyZXR1cm4gW3RoaXMucix0aGlzLmcsdGhpcy5iXX10b1JnYmEoKXtyZXR1cm4gW3RoaXMucix0aGlzLmcsdGhpcy5iLHRoaXMuYV19dG9IZXgoKXtjb25zdCB0PXRoaXMuci50b1N0cmluZygxNikscj10aGlzLmcudG9TdHJpbmcoMTYpLHM9dGhpcy5iLnRvU3RyaW5nKDE2KTtyZXR1cm4gYCMke3QubGVuZ3RoPDI/XCIwXCIrdDp0fSR7ci5sZW5ndGg8Mj9cIjBcIityOnJ9JHtzLmxlbmd0aDwyP1wiMFwiK3M6c31gfXRvQ3NzKHQ9ITEpe2NvbnN0IHI9dGhpcy5yK1wiLCBcIit0aGlzLmcrXCIsIFwiK3RoaXMuYjtyZXR1cm4gdD9gcmdiYSgke3J9LCAke3RoaXMuYX0pYDpgcmdiKCR7cn0pYH10b1N0cmluZygpe3JldHVybiB0aGlzLnRvQ3NzKCEwKX10b0pTT04oKXtyZXR1cm4gdGhpcy50b0FycmF5KCl9dG9BcnJheSh0PTApe2NvbnN0IHI9biR6KHRoaXMucikscz1uJHoodGhpcy5nKSxpPW4keih0aGlzLmIpO3JldHVybiAwPT09dHx8MSE9PXRoaXMuYT9bcixzLGksbiR6KDI1NSp0aGlzLmEpXTpbcixzLGldfWNsb25lKCl7cmV0dXJuIG5ldyBvJGoodGhpcy50b1JnYmEoKSl9aGFzaCgpe3JldHVybiB0aGlzLnI8PDI0fHRoaXMuZzw8MTZ8dGhpcy5iPDw4fDI1NSp0aGlzLmF9X3Nhbml0aXplKCl7cmV0dXJuIHRoaXMucj1NYXRoLnJvdW5kKGEkRSh0aGlzLnIsMCwyNTUpKSx0aGlzLmc9TWF0aC5yb3VuZChhJEUodGhpcy5nLDAsMjU1KSksdGhpcy5iPU1hdGgucm91bmQoYSRFKHRoaXMuYiwwLDI1NSkpLHRoaXMuYT1hJEUodGhpcy5hLDAsMSksdGhpc31fc2V0KHQscixzLGkpe3RoaXMucj10LHRoaXMuZz1yLHRoaXMuYj1zLHRoaXMuYT1pO319byRqLnByb3RvdHlwZS5kZWNsYXJlZENsYXNzPVwiZXNyaS5Db2xvclwiO1xuXG4vLyBlc3JpNFxyXG4vKipcclxuICogQ29udmVydHMgYSB2YWx1ZSB0byBDU1MgY29sb3IuIElmIGNvbnZlcnNpb24gZmFpbHMsIHRoZSBkZWZhdWx0IHZhbHVlIGlzIHJldHVybmVkLlxyXG4gKiAgQHBhcmFtIHZhbHVlIFN0cmluZyB8IENvbG9yIChlc3JpIENvbG9yKSB8IE51bWJlciB8IE51bWJlcltdIGFzIFsxMDAsIDEwMCwgMTAwLCAwLjU/XS5cclxuICogICAgICBBIGNvbG9yIHZhbHVlIGNvdWxkIGJlIGEgc3RyaW5nLCBhIG51bWJlciwgb3IgQ29sb3IuXHJcbiAqICBAcGFyYW0gaWdub3JlQWxwaGEgQm9vbGVhbi5cclxuICogICAgICBUcnVlIHZhbHVlIG1lYW5zIGlnbm9yZSBhbHBoYSB2YWx1ZSBvZiBjb2xvciBhbmQgZm9yY2VzIGNvbnZlcnNpb24gdG8gaGV4IENTUyByZXByZXNlbnRhdGlvbi5cclxuICogIEBwYXJhbSBkZWZhdWx0VmFsdWUgU3RyaW5nIHwgQ29sb3IgfCBOdW1iZXIuXHJcbiAqICAgICAgRGVmYXVsdCB2YWx1ZS4gSWYgdGhlIGRlZmF1bHQgdmFsdWUgaXMgbWlzc2luZywgXCIjMDAwMDAwXCIgaXMgc3VwcG9zZWQuXHJcbiAqXHJcbiAqIEByZXR1cm5zIENTUyBjb2xvciBpbiB0aGUgZm9ybSBcIiN4eHh4eHhcIiBvciBcInJnYmEoUixHLEIsQSlcIi5cclxuICogSWYgdGhlIGNvbnZlcnNpb24gZmFpbHMsIGEgY29sb3IgcmVwcmVzZW50YXRpb24gZm9yIHRoZSBkZWZhdWx0IHZhbHVlIGlzIHJldHVybmVkLlxyXG4gKi9cclxuZnVuY3Rpb24gdG9DU1NDb2xvcih2YWx1ZSwgaWdub3JlQWxwaGEgPSBmYWxzZSwgZGVmYXVsdFZhbHVlKSB7XHJcbiAgLy8gQXQgZmlyc3Qgd2UgY29udmVydCBhIHN0cmluZyB0byBDb2xvci5cclxuICAvLyBUaGUgc3BlY2lhbCBjYXNlIGlzIGEgaGV4YWRlY2ltYWwgc3RyaW5nIHN0YXJ0aW5nIGZyb20gMHguIFdlIGRvbid0IGNvbnZlcnQgaXQuXHJcbiAgLy8gVGhlIHJlc3VsdCBjb3VsZCBiZSBudWxsIVxyXG4gIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiYgIS9eMHgvaS50ZXN0KHZhbHVlKSkge1xyXG4gICAgdmFsdWUgPSBvJGouZnJvbVN0cmluZyh2YWx1ZSk7XHJcbiAgfVxyXG4gIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xyXG4gICAgdmFsdWUgPSBvJGouZnJvbUFycmF5KHZhbHVlKTtcclxuICB9XHJcbiAgLy8gTm93IHdlIGNvbnZlcnQgYSBjb2xvciB0byBDU1MgcmVwcmVzZW50YXRpb24uXHJcbiAgaWYgKGlzQ29sb3JPYmplY3QodmFsdWUpKSB7XHJcbiAgICByZXR1cm4gaWdub3JlQWxwaGEgfHwgdmFsdWUuYSA9PT0gMSA/IHZhbHVlLnRvSGV4KCkgOiB2YWx1ZS50b0Nzcyh0cnVlKTtcclxuICB9XHJcbiAgLy8gT3RoZXJ3aXNlIHdlIHRocmVhdCB0aGUgaW5wdXQgYXMgTnVtYmVyIGFuZCBtYW51YWxseSBjb252ZXJ0IGl0IHRvIGhleCBDU1MgcmVwcmVzZW50YXRpb24uXHJcbiAgaWYgKHZhbHVlID09IG51bGwgLypudWxsIG9yIHVuZGVmaW5lZCovIHx8IGlzTmFOKHZhbHVlKSkge1xyXG4gICAgcmV0dXJuIGRlZmF1bHRWYWx1ZSA/IHRvQ1NTQ29sb3IoZGVmYXVsdFZhbHVlLCBpZ25vcmVBbHBoYSkgOiBcIiMwMDAwMDBcIjtcclxuICB9XHJcbiAgdmFsdWUgPSBcIjAwMDAwXCIgKyBOdW1iZXIodmFsdWUpLnRvU3RyaW5nKDE2KTtcclxuICByZXR1cm4gXCIjXCIgKyB2YWx1ZS5zdWJzdHIodmFsdWUubGVuZ3RoIC0gNik7XHJcbn1cclxuZnVuY3Rpb24gaXNDb2xvck9iamVjdChjb2xvcikge1xyXG4gIHJldHVybiBjb2xvciAmJiB0eXBlb2YgY29sb3IudG9IZXggPT09IFwiZnVuY3Rpb25cIjtcclxufVxyXG4vKipcclxuICogQ29udmVydHMgYSB2YWx1ZSB0byBhIG5ldyBDb2xvciBvYmplY3QuXHJcbiAqIEBwYXJhbSB2YWx1ZSBTdHJpbmcgfCBDb2xvciB8IE51bWJlci5cclxuICogICAgICBBIGNvbG9yIHZhbHVlIGNvdWxkIGJlIGEgc3RyaW5nLCBhIG51bWJlciwgb3IgQ29sb3IuXHJcbiAqIEBwYXJhbSBkZWZhdWx0VmFsdWUgU3RyaW5nIHwgQ29sb3IgfCBOdW1iZXIuXHJcbiAqICAgICAgRGVmYXVsdCB2YWx1ZS4gSWYgdGhlIGRlZmF1bHQgdmFsdWUgaXMgbWlzc2luZywgXCIjMDAwMDAwXCIgaXMgc3VwcG9zZWQuXHJcbiAqXHJcbiAqIEByZXR1cm5zIGEgbmV3IGluc3RhbmNlIG9mIENvbG9yLlxyXG4gKiBJZiB0aGUgY29udmVyc2lvbiBmYWlscywgYSBjb2xvciByZXByZXNlbnRhdGlvbiBmb3IgdGhlIGRlZmF1bHQgdmFsdWUgaXMgcmV0dXJuZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiB0b0NvbG9yKHZhbHVlLCBkZWZhdWx0VmFsdWUpIHtcclxuICBpZiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiKSB7XHJcbiAgICByZXR1cm4gbmV3IG8kaih2YWx1ZSk7XHJcbiAgfVxyXG4gIHJldHVybiBvJGouZnJvbVN0cmluZyh0b0NTU0NvbG9yKHZhbHVlLCBmYWxzZSwgZGVmYXVsdFZhbHVlKSk7XHJcbn1cblxuLy8ge3gseX0gPT4gW3gsIHldXHJcbmZ1bmN0aW9uIGRlZ1RvUmFkKGFuZ2xlRGVnKSB7XHJcbiAgcmV0dXJuIChhbmdsZURlZyAqIE1hdGguUEkpIC8gMTgwO1xyXG59XHJcbmZ1bmN0aW9uIHJhZFRvRGVnKGFuZ2xlUmFkKSB7XHJcbiAgcmV0dXJuIChhbmdsZVJhZCAqIDE4MCkgLyBNYXRoLlBJO1xyXG59XG5cbi8vIGdlb2VucmljaG1lbnQudXRpbHNcclxuLyoqXHJcbiAqIEBleGFtcGxlXHJcbiAqXHJcbiAqIFt4eCB4eSBkeF1cclxuICogW3l4IHl5IGR5XVxyXG4gKiBbIDAgIDAgIDFdXHJcbiAqXHJcbiAqIC8vIFNWRyBub3RhdGlvblxyXG4gKiBtYXRyaXgoYSxiLGMsZCxlLGYpXHJcbiAqIFthIGMgZV1cclxuICogW2IgZCBmXVxyXG4gKiBbMCAwIDFdXHJcbiAqIG1hdHJpeCh4eCx5eCx4eSx5eSxkeCxkeSlcclxuICovXHJcbmNsYXNzIEdGWE1hdHJpeDJEIHtcclxuICBjb25zdHJ1Y3RvcihwYXJhbXMpIHtcclxuICAgIHRoaXMuZHggPSAwO1xyXG4gICAgdGhpcy5keSA9IDA7XHJcbiAgICB0aGlzLnh4ID0gMTtcclxuICAgIHRoaXMueHkgPSAwO1xyXG4gICAgdGhpcy55eCA9IDA7XHJcbiAgICB0aGlzLnl5ID0gMTtcclxuICAgIG1peGluKHRoaXMsIHBhcmFtcyk7XHJcbiAgfVxyXG59XHJcbmNsYXNzIEdmeE1hdHJpeEJ1aWxkZXIge1xyXG4gIC8vIG1hdHJpeCBjcmVhdG9yc1xyXG4gIGNyZWF0ZShwYXJhbXMpIHtcclxuICAgIHJldHVybiBuZXcgR0ZYTWF0cml4MkQocGFyYW1zKTtcclxuICB9XHJcbiAgbm9ybWFsaXplKG1hdHJpeCkge1xyXG4gICAgcmV0dXJuIG1hdHJpeDtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBzcGVjaWZpZWQgbWF0cml4IGlzIHRoZSBpZGVudGl0eS5cclxuICAgKi9cclxuICBpc0lkZW50aXR5KG1hdHJpeCkge1xyXG4gICAgcmV0dXJuIChtYXRyaXgueHggPT09IDEgJiYgbWF0cml4Lnh5ID09PSAwICYmIG1hdHJpeC55eCA9PT0gMCAmJiBtYXRyaXgueXkgPT09IDEgJiYgbWF0cml4LmR4ID09PSAwICYmIG1hdHJpeC5keSA9PT0gMCk7XHJcbiAgfVxyXG4gIHRyYW5zbGF0ZShhLCBiKSB7XHJcbiAgICByZXR1cm4gbmV3IEdGWE1hdHJpeDJEKHsgZHg6IGEsIGR5OiBiIH0pO1xyXG4gIH1cclxuICBzY2FsZShhLCBiKSB7XHJcbiAgICByZXR1cm4gbmV3IEdGWE1hdHJpeDJEKHsgeHg6IGEsIHl5OiBiIH0pO1xyXG4gIH1cclxuICByb3RhdGUoYW5nbGVSYWQpIHtcclxuICAgIGNvbnN0IGMgPSBNYXRoLmNvcyhhbmdsZVJhZCk7XHJcbiAgICBjb25zdCBzID0gTWF0aC5zaW4oYW5nbGVSYWQpO1xyXG4gICAgcmV0dXJuIG5ldyBHRlhNYXRyaXgyRCh7IHh4OiBjLCB4eTogLXMsIHl4OiBzLCB5eTogYyB9KTtcclxuICB9XHJcbiAgcm90YXRlZyhkZWdyZWUpIHtcclxuICAgIHJldHVybiB0aGlzLnJvdGF0ZShkZWdUb1JhZChkZWdyZWUpKTtcclxuICB9XHJcbiAgcm90YXRlZ0F0KGRlZ3JlZSwgYSwgYikge1xyXG4gICAgcmV0dXJuIHRoaXMuX3NhbmR3aWNoKHRoaXMucm90YXRlZyhkZWdyZWUpLCBhLCBiKTtcclxuICB9XHJcbiAgbXVsdGlwbHkobWF0cmljZXMpIHtcclxuICAgIG1hdHJpY2VzID0gbWF0cmljZXMuZmlsdGVyKChtKSA9PiAhIW0pO1xyXG4gICAgbGV0IG1hdHJpeCA9IG1hdHJpY2VzWzBdO1xyXG4gICAgLy8gY29tYmluZSBtYXRyaWNlc1xyXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCBtYXRyaWNlcy5sZW5ndGg7ICsraSkge1xyXG4gICAgICBjb25zdCBsID0gbWF0cml4LCByID0gbWF0cmljZXNbaV07XHJcbiAgICAgIG1hdHJpeCA9IG5ldyBHRlhNYXRyaXgyRCgpO1xyXG4gICAgICBtYXRyaXgueHggPSBsLnh4ICogci54eCArIGwueHkgKiByLnl4O1xyXG4gICAgICBtYXRyaXgueHkgPSBsLnh4ICogci54eSArIGwueHkgKiByLnl5O1xyXG4gICAgICBtYXRyaXgueXggPSBsLnl4ICogci54eCArIGwueXkgKiByLnl4O1xyXG4gICAgICBtYXRyaXgueXkgPSBsLnl4ICogci54eSArIGwueXkgKiByLnl5O1xyXG4gICAgICBtYXRyaXguZHggPSBsLnh4ICogci5keCArIGwueHkgKiByLmR5ICsgbC5keDtcclxuICAgICAgbWF0cml4LmR5ID0gbC55eCAqIHIuZHggKyBsLnl5ICogci5keSArIGwuZHk7XHJcbiAgICB9XHJcbiAgICBtaXhpbih0aGlzLCBtYXRyaXgpO1xyXG4gICAgcmV0dXJuIG1hdHJpeDtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogQXBwbGllcyBhIG1hdHJpeCB0byBhIHJlY3RhbmdsZS5cclxuICAgKiBUaGUgbWV0aG9kIGFwcGxpZXMgdGhlIHRyYW5zZm9ybWF0aW9uIG9uIGFsbCBjb3JuZXJzIG9mIHRoZVxyXG4gICAqIHJlY3RhbmdsZSBhbmQgcmV0dXJucyB0aGUgc21hbGxlc3QgcmVjdGFuZ2xlIGVuY2xvc2luZyB0aGUgNCB0cmFuc2Zvcm1lZCBwb2ludHMuXHJcbiAgICovXHJcbiAgbXVsdGlwbHlSZWN0YW5nbGUobWF0cml4LCByZWN0KSB7XHJcbiAgICBjb25zdCBNID0gZ2Z4TWF0cml4QnVpbGRlci5ub3JtYWxpemUobWF0cml4KTtcclxuICAgIGlmICh0aGlzLmlzSWRlbnRpdHkoTSkpIHtcclxuICAgICAgcmV0dXJuIHsgeDogcmVjdC54LCB5OiByZWN0LnksIHc6IHJlY3QudywgaDogcmVjdC5oIH07XHJcbiAgICB9IC8vIGdmeC5SZWN0YW5nbGVcclxuICAgIGNvbnN0IHAwID0gdGhpcy5tdWx0aXBseVBvaW50KE0sIHJlY3QueCwgcmVjdC55KSwgcDEgPSB0aGlzLm11bHRpcGx5UG9pbnQoTSwgcmVjdC54LCByZWN0LnkgKyByZWN0LmgpLCBwMiA9IHRoaXMubXVsdGlwbHlQb2ludChNLCByZWN0LnggKyByZWN0LncsIHJlY3QueSksIHAzID0gdGhpcy5tdWx0aXBseVBvaW50KE0sIHJlY3QueCArIHJlY3QudywgcmVjdC55ICsgcmVjdC5oKSwgbWlueCA9IE1hdGgubWluKHAwLngsIHAxLngsIHAyLngsIHAzLngpLCBtaW55ID0gTWF0aC5taW4ocDAueSwgcDEueSwgcDIueSwgcDMueSksIG1heHggPSBNYXRoLm1heChwMC54LCBwMS54LCBwMi54LCBwMy54KSwgbWF4eSA9IE1hdGgubWF4KHAwLnksIHAxLnksIHAyLnksIHAzLnkpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgLy8gZ2Z4LlJlY3RhbmdsZVxyXG4gICAgICB4OiBtaW54LFxyXG4gICAgICB5OiBtaW55LFxyXG4gICAgICB3OiBtYXh4IC0gbWlueCxcclxuICAgICAgaDogbWF4eSAtIG1pbnlcclxuICAgIH07XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEFwcGxpZXMgYSBtYXRyaXggdG8gYSBwb2ludC5cclxuICAgKi9cclxuICBtdWx0aXBseVBvaW50KG1hdHJpeCwgYSwgYikge1xyXG4gICAgY29uc3QgTSA9IHRoaXMubm9ybWFsaXplKG1hdHJpeCk7XHJcbiAgICByZXR1cm4gdGhpcy5fbXVsdGlwbHlQb2ludChNLCBhLCBiKTtcclxuICB9XHJcbiAgX211bHRpcGx5UG9pbnQobWF0cml4LCB4LCB5KSB7XHJcbiAgICByZXR1cm4geyB4OiBtYXRyaXgueHggKiB4ICsgbWF0cml4Lnh5ICogeSArIG1hdHJpeC5keCwgeTogbWF0cml4Lnl4ICogeCArIG1hdHJpeC55eSAqIHkgKyBtYXRyaXguZHkgfTtcclxuICB9XHJcbiAgLy8gaGlnaCBsZXZlbCBvcGVyYXRpb25zXHJcbiAgX3NhbmR3aWNoKG1hdHJpeCwgeCwgeSkge1xyXG4gICAgcmV0dXJuIHRoaXMubXVsdGlwbHkoW3RoaXMudHJhbnNsYXRlKHgsIHkpLCBtYXRyaXgsIHRoaXMudHJhbnNsYXRlKC14LCAteSldKTtcclxuICB9XHJcbn1cclxuY29uc3QgZ2Z4TWF0cml4QnVpbGRlciA9IG5ldyBHZnhNYXRyaXhCdWlsZGVyKCk7XG5cbi8vIGdlb2VucmljaG1lbnQudXRpbHNcclxuLyoqXHJcbiAqIENhbGN1bGF0ZXMgdGhlIGJvdW5kaW5nIGJveCBvZiBjb250ZW50IGJveCBpbnNpZGUgY29udGFpbmVyIGJveCwgYW5kIGNvbnNpZGVyaW5nIHRoZSB2aWV3Qm94IGFuZCBwcmVzZXJ2ZUFzcGVjdFJhdGlvLlxyXG4gKiBAcGFyYW0gY29udGFpbmVyQm94IFNWRyBzaXplLlxyXG4gKiBAcGFyYW0gY29udGVudEJveCBPd24gYm91bmRpbmcgYm94IG9mIHRoZSBTVkcgY29udGVudC5cclxuICogQHBhcmFtIHZpZXdCb3ggU1ZHIHZpZXcgYm94LlxyXG4gKiBAcGFyYW0gcHJlc2VydmVBc3BlY3RSYXRpbyBTVkcgYXNwZWN0IHJhdGlvIHJ1bGUuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRCb3VuZGluZ0JveEluVmlld1BvcnQoY29udGFpbmVyQm94LCBjb250ZW50Qm94LCB2aWV3Qm94LCBwcmVzZXJ2ZUFzcGVjdFJhdGlvKSB7XHJcbiAgbGV0IHhtb2RpZmllcjtcclxuICBsZXQgeW1vZGlmaWVyO1xyXG4gIHByZXNlcnZlQXNwZWN0UmF0aW8gPSBwcmVzZXJ2ZUFzcGVjdFJhdGlvIHx8IFwieE1pZFlNaW4gbWVldFwiO1xyXG4gIHN3aXRjaCAocHJlc2VydmVBc3BlY3RSYXRpbykge1xyXG4gICAgY2FzZSBcIm5vbmVcIjpcclxuICAgICAgY29uc3QgcmF0aW9YID0gY29udGFpbmVyQm94LncgLyB2aWV3Qm94LndpZHRoO1xyXG4gICAgICBjb25zdCByYXRpb1kgPSBjb250YWluZXJCb3guaCAvIHZpZXdCb3guaGVpZ2h0O1xyXG4gICAgICB4bW9kaWZpZXIgPSAoeCkgPT4gcmF0aW9YICogKHggLSB2aWV3Qm94LnhtaW4pO1xyXG4gICAgICB5bW9kaWZpZXIgPSAoeSkgPT4gcmF0aW9ZICogKHkgLSB2aWV3Qm94LnltaW4pO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgXCJ4TWlkWU1pbiBtZWV0XCI6XHJcbiAgICAgIGNvbnN0IGZpdFZpZXdCb3ggPSBmaXRCb3goe1xyXG4gICAgICAgIGJveDogeyB3OiB2aWV3Qm94LndpZHRoLCBoOiB2aWV3Qm94LmhlaWdodCB9LFxyXG4gICAgICAgIHBhcmVudEJveDogY29udGFpbmVyQm94XHJcbiAgICAgIH0pO1xyXG4gICAgICB4bW9kaWZpZXIgPSAoeCkgPT4gZml0Vmlld0JveC54ICsgZml0Vmlld0JveC5yYXRpbyAqICh4IC0gdmlld0JveC54bWluKTtcclxuICAgICAgeW1vZGlmaWVyID0gKHkpID0+IGZpdFZpZXdCb3gueSArIGZpdFZpZXdCb3gucmF0aW8gKiAoeSAtIHZpZXdCb3gueW1pbik7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgLy8gVE9ETzogc3VwcG9ydCBvdGhlciBjYXNlc1xyXG4gIH1cclxuICBjb25zdCB4ID0geG1vZGlmaWVyKGNvbnRlbnRCb3gueCk7XHJcbiAgY29uc3QgeSA9IHltb2RpZmllcihjb250ZW50Qm94LnkpO1xyXG4gIGNvbnN0IHIgPSBjb250YWluZXJCb3gudyAtIHhtb2RpZmllcihjb250ZW50Qm94LnggKyBjb250ZW50Qm94LncpO1xyXG4gIGNvbnN0IGIgPSBjb250YWluZXJCb3guaCAtIHltb2RpZmllcihjb250ZW50Qm94LnkgKyBjb250ZW50Qm94LmgpO1xyXG4gIHJldHVybiB7XHJcbiAgICB4LFxyXG4gICAgeSxcclxuICAgIHIsXHJcbiAgICBiLFxyXG4gICAgdzogY29udGFpbmVyQm94LncgLSByIC0geCxcclxuICAgIGg6IGNvbnRhaW5lckJveC5oIC0gYiAtIHlcclxuICB9O1xyXG59XG5cbi8vIGVzcmk0LmNvcmVcclxuZnVuY3Rpb24gX3RvTnVtYmVyKHZhbHVlKSB7XHJcbiAgcmV0dXJuICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgPyBOdW1iZXIodmFsdWUucmVwbGFjZShcInB4XCIsIFwiXCIpKSA6IE51bWJlcih2YWx1ZSkpIHx8IDA7XHJcbn1cclxuZnVuY3Rpb24gdmlld0JveEZyb21TdHJpbmcodmlld0JveCwgd2lkdGgsIGhlaWdodCkge1xyXG4gIGlmICh2aWV3Qm94KSB7XHJcbiAgICBjb25zdCBwcyA9IHZpZXdCb3guc3BsaXQoXCIgXCIpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgeG1pbjogX3RvTnVtYmVyKHBzWzBdKSxcclxuICAgICAgeW1pbjogX3RvTnVtYmVyKHBzWzFdKSxcclxuICAgICAgd2lkdGg6IF90b051bWJlcihwc1syXSksXHJcbiAgICAgIGhlaWdodDogX3RvTnVtYmVyKHBzWzNdKVxyXG4gICAgfTtcclxuICB9XHJcbiAgaWYgKHdpZHRoICYmIGhlaWdodCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgeG1pbjogMCxcclxuICAgICAgeW1pbjogMCxcclxuICAgICAgd2lkdGg6IF90b051bWJlcih3aWR0aCksXHJcbiAgICAgIGhlaWdodDogX3RvTnVtYmVyKGhlaWdodClcclxuICAgIH07XHJcbiAgfVxyXG4gIHJldHVybiBudWxsO1xyXG59XG5cbi8vIGdlb2VucmljaG1lbnQudXRpbHNcclxuLyoqXHJcbiAqIFVzZWZ1bCByZWFkaW5nOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9ydS9kb2NzL1dlYi9TVkcvQXR0cmlidXRlL2RcclxuICovXHJcbmZ1bmN0aW9uIGdldEJCb3hDYWxjdWxhdG9yKCkge1xyXG4gIGxldCBfc2VnbWVudEJib3g7XHJcbiAgY29uc3QgbGFzdCA9IHt9O1xyXG4gIGNvbnN0IGNhbGN1bGF0b3IgPSB7XHJcbiAgICB1cGRhdGVCQm94OiAoc2VnZW1lbnQpID0+IHtcclxuICAgICAgY29uc3QgYWN0aW9uID0gc2VnZW1lbnQuYWN0aW9uO1xyXG4gICAgICBjb25zdCBuID0gc2VnZW1lbnQuYXJncztcclxuICAgICAgY29uc3QgbCA9IG4ubGVuZ3RoO1xyXG4gICAgICBsZXQgaTtcclxuICAgICAgc3dpdGNoIChhY3Rpb24pIHtcclxuICAgICAgICBjYXNlIFwiTVwiOlxyXG4gICAgICAgIGNhc2UgXCJMXCI6XHJcbiAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbDsgaSArPSAyKSB7XHJcbiAgICAgICAgICAgIF91cGRhdGVCQm94KG5baV0sIG5baSArIDFdKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGxhc3QueCA9IG5bbCAtIDJdO1xyXG4gICAgICAgICAgbGFzdC55ID0gbltsIC0gMV07XHJcbiAgICAgICAgICBpZiAoYWN0aW9uID09PSBcIk1cIikge1xyXG4gICAgICAgICAgICBsYXN0LnhtID0gbGFzdC54O1xyXG4gICAgICAgICAgICBsYXN0LnltID0gbGFzdC55O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcIkhcIjpcclxuICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsOyArK2kpIHtcclxuICAgICAgICAgICAgX3VwZGF0ZUJCb3gobltpXSwgbGFzdC55KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGxhc3QueCA9IG5bbCAtIDFdO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcIlZcIjpcclxuICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsOyArK2kpIHtcclxuICAgICAgICAgICAgX3VwZGF0ZUJCb3gobGFzdC54LCBuW2ldKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGxhc3QueSA9IG5bbCAtIDFdO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcIm1cIjpcclxuICAgICAgICAgIGxldCBzdGFydCA9IDA7XHJcbiAgICAgICAgICBpZiAoIShcInhcIiBpbiBsYXN0KSkge1xyXG4gICAgICAgICAgICBfdXBkYXRlQkJveCgobGFzdC54ID0gblswXSksIChsYXN0LnkgPSBuWzFdKSk7XHJcbiAgICAgICAgICAgIHN0YXJ0ID0gMjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGZvciAoaSA9IHN0YXJ0OyBpIDwgbDsgaSArPSAyKSB7XHJcbiAgICAgICAgICAgIF91cGRhdGVCQm94KChsYXN0LnggKz0gbltpXSksIChsYXN0LnkgKz0gbltpICsgMV0pKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChhY3Rpb24gPT09IFwibVwiKSB7XHJcbiAgICAgICAgICAgIGxhc3QueG0gPSBsYXN0Lng7XHJcbiAgICAgICAgICAgIGxhc3QueW0gPSBsYXN0Lnk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwibFwiOlxyXG4gICAgICAgICAgZm9yIChpID0gMDsgaSA8IGw7IGkgKz0gMikge1xyXG4gICAgICAgICAgICBfdXBkYXRlQkJveCgobGFzdC54ICs9IG5baV0pLCAobGFzdC55ICs9IG5baSArIDFdKSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwiaFwiOlxyXG4gICAgICAgICAgZm9yIChpID0gMDsgaSA8IGw7ICsraSkge1xyXG4gICAgICAgICAgICBfdXBkYXRlQkJveCgobGFzdC54ICs9IG5baV0pLCBsYXN0LnkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcInZcIjpcclxuICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsOyArK2kpIHtcclxuICAgICAgICAgICAgX3VwZGF0ZUJCb3gobGFzdC54LCAobGFzdC55ICs9IG5baV0pKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJDXCI6XHJcbiAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbDsgaSArPSA2KSB7XHJcbiAgICAgICAgICAgIF91cGRhdGVCQm94Q3ViaWMobGFzdC54LCBsYXN0LnksIG5baV0sIG5baSArIDFdLCAobGFzdC5jeCA9IG5baSArIDJdKSwgKGxhc3QuY3kgPSBuW2kgKyAzXSksIChsYXN0LnggPSBuW2kgKyA0XSksIChsYXN0LnkgPSBuW2kgKyA1XSkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcImNcIjpcclxuICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsOyBpICs9IDYpIHtcclxuICAgICAgICAgICAgX3VwZGF0ZUJCb3hDdWJpYyhsYXN0LngsIGxhc3QueSwgbGFzdC54ICsgbltpXSwgbGFzdC55ICsgbltpICsgMV0sIChsYXN0LmN4ID0gbGFzdC54ICsgbltpICsgMl0pLCAobGFzdC5jeSA9IGxhc3QueSArIG5baSArIDNdKSwgKGxhc3QueCArPSBuW2kgKyA0XSksIChsYXN0LnkgKz0gbltpICsgNV0pKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJTXCI6XHJcbiAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbDsgaSArPSA0KSB7XHJcbiAgICAgICAgICAgIC8vIGVxdWFscyB0byB0aGUgc3RhcnRpbmcgcG9pbnQgaWYgdGhlIHByZXZpb3VzIHdhc24ndCBhIGN1cnZlXHJcbiAgICAgICAgICAgIGNvbnN0IHhjID0gdHlwZW9mIGxhc3QuY3ggPT09IFwibnVtYmVyXCIgPyBsYXN0LmN4IDogbGFzdC54O1xyXG4gICAgICAgICAgICBjb25zdCB5YyA9IHR5cGVvZiBsYXN0LmN5ID09PSBcIm51bWJlclwiID8gbGFzdC5jeSA6IGxhc3QueTtcclxuICAgICAgICAgICAgLy8gcmVmbGVjdFxyXG4gICAgICAgICAgICBjb25zdCB4MSA9IGxhc3QueCArIChsYXN0LnggLSB4Yyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHkxID0gbGFzdC55ICsgKGxhc3QueSAtIHljKTtcclxuICAgICAgICAgICAgX3VwZGF0ZUJCb3hDdWJpYyhsYXN0LngsIGxhc3QueSwgeDEsIHkxLCAobGFzdC5jeCA9IG5baV0pLCAobGFzdC5jeSA9IG5baSArIDFdKSwgKGxhc3QueCA9IG5baSArIDJdKSwgKGxhc3QueSA9IG5baSArIDNdKSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwic1wiOlxyXG4gICAgICAgICAgZm9yIChpID0gMDsgaSA8IGw7IGkgKz0gNCkge1xyXG4gICAgICAgICAgICAvLyBlcXVhbHMgdG8gdGhlIHN0YXJ0aW5nIHBvaW50IGlmIHRoZSBwcmV2aW91cyB3YXNuJ3QgYSBjdXJ2ZVxyXG4gICAgICAgICAgICBjb25zdCB4YyA9IHR5cGVvZiBsYXN0LmN4ID09PSBcIm51bWJlclwiID8gbGFzdC5jeCA6IGxhc3QueDtcclxuICAgICAgICAgICAgY29uc3QgeWMgPSB0eXBlb2YgbGFzdC5jeSA9PT0gXCJudW1iZXJcIiA/IGxhc3QuY3kgOiBsYXN0Lnk7XHJcbiAgICAgICAgICAgIC8vIHJlZmxlY3RcclxuICAgICAgICAgICAgY29uc3QgeDEgPSBsYXN0LnggKyAobGFzdC54IC0geGMpO1xyXG4gICAgICAgICAgICBjb25zdCB5MSA9IGxhc3QueSArIChsYXN0LnkgLSB5Yyk7XHJcbiAgICAgICAgICAgIF91cGRhdGVCQm94Q3ViaWMobGFzdC54LCBsYXN0LnksIHgxLCB5MSwgKGxhc3QuY3ggPSBsYXN0LnggKyBuW2ldKSwgKGxhc3QuY3kgPSBsYXN0LnkgKyBuW2kgKyAxXSksIChsYXN0LnggKz0gbltpICsgMl0pLCAobGFzdC55ICs9IG5baSArIDNdKSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwiUVwiOlxyXG4gICAgICAgICAgZm9yIChpID0gMDsgaSA8IGw7IGkgKz0gNCkge1xyXG4gICAgICAgICAgICBfdXBkYXRlQkJveFF1YWRyYXRpYyhsYXN0LngsIGxhc3QueSwgKGxhc3QucXggPSBuW2ldKSwgKGxhc3QucXkgPSBuW2kgKyAxXSksIChsYXN0LnggPSBuW2kgKyAyXSksIChsYXN0LnkgPSBuW2kgKyAzXSkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcInFcIjpcclxuICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsOyBpICs9IDQpIHtcclxuICAgICAgICAgICAgX3VwZGF0ZUJCb3hRdWFkcmF0aWMobGFzdC54LCBsYXN0LnksIChsYXN0LnF4ID0gbGFzdC54ICsgbltpXSksIChsYXN0LnF5ID0gbGFzdC55ICsgbltpICsgMV0pLCAobGFzdC54ICs9IG5baSArIDJdKSwgKGxhc3QueSArPSBuW2kgKyAzXSkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcIlRcIjpcclxuICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsOyBpICs9IDIpIHtcclxuICAgICAgICAgICAgLy8gZXF1YWxzIHRvIHRoZSBzdGFydGluZyBwb2ludCBpZiB0aGUgcHJldmlvdXMgd2Fzbid0IGEgY3VydmVcclxuICAgICAgICAgICAgY29uc3QgeGMgPSB0eXBlb2YgbGFzdC5xeCA9PT0gXCJudW1iZXJcIiA/IGxhc3QucXggOiBsYXN0Lng7XHJcbiAgICAgICAgICAgIGNvbnN0IHljID0gdHlwZW9mIGxhc3QucXkgPT09IFwibnVtYmVyXCIgPyBsYXN0LnF5IDogbGFzdC55O1xyXG4gICAgICAgICAgICAvLyByZWZsZWN0XHJcbiAgICAgICAgICAgIGNvbnN0IHgxID0gbGFzdC54ICsgKGxhc3QueCAtIHhjKTtcclxuICAgICAgICAgICAgY29uc3QgeTEgPSBsYXN0LnkgKyAobGFzdC55IC0geWMpO1xyXG4gICAgICAgICAgICBfdXBkYXRlQkJveFF1YWRyYXRpYyhsYXN0LngsIGxhc3QueSwgKGxhc3QucXggPSB4MSksIChsYXN0LnF5ID0geTEpLCAobGFzdC54ID0gbltpXSksIChsYXN0LnkgPSBuW2kgKyAxXSkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcInRcIjpcclxuICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsOyBpICs9IDIpIHtcclxuICAgICAgICAgICAgLy8gZXF1YWxzIHRvIHRoZSBzdGFydGluZyBwb2ludCBpZiB0aGUgcHJldmlvdXMgd2Fzbid0IGEgY3VydmVcclxuICAgICAgICAgICAgY29uc3QgeGMgPSB0eXBlb2YgbGFzdC5xeCA9PT0gXCJudW1iZXJcIiA/IGxhc3QucXggOiBsYXN0Lng7XHJcbiAgICAgICAgICAgIGNvbnN0IHljID0gdHlwZW9mIGxhc3QucXkgPT09IFwibnVtYmVyXCIgPyBsYXN0LnF5IDogbGFzdC55O1xyXG4gICAgICAgICAgICAvLyByZWZsZWN0XHJcbiAgICAgICAgICAgIGNvbnN0IHgxID0gbGFzdC54ICsgKGxhc3QueCAtIHhjKTtcclxuICAgICAgICAgICAgY29uc3QgeTEgPSBsYXN0LnkgKyAobGFzdC55IC0geWMpO1xyXG4gICAgICAgICAgICBfdXBkYXRlQkJveFF1YWRyYXRpYyhsYXN0LngsIGxhc3QueSwgKGxhc3QucXggPSB4MSksIChsYXN0LnF5ID0geTEpLCAobGFzdC54ICs9IG5baV0pLCAobGFzdC55ICs9IG5baSArIDFdKSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwiQVwiOlxyXG4gICAgICAgICAgZm9yIChpID0gMDsgaSA8IGw7IGkgKz0gNykge1xyXG4gICAgICAgICAgICBfdXBkYXRlQkJveEFyYyhsYXN0LngsIGxhc3QueSwgbltpXSwgbltpICsgMV0sIG5baSArIDJdLCBuW2kgKyAzXSwgbltpICsgNF0sIChsYXN0LnggPSBuW2kgKyA1XSksIChsYXN0LnkgPSBuW2kgKyA2XSkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcImFcIjpcclxuICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsOyBpICs9IDcpIHtcclxuICAgICAgICAgICAgX3VwZGF0ZUJCb3hBcmMobGFzdC54LCBsYXN0LnksIG5baV0sIG5baSArIDFdLCBuW2kgKyAyXSwgbltpICsgM10sIG5baSArIDRdLCAobGFzdC54ICs9IG5baSArIDVdKSwgKGxhc3QueSArPSBuW2kgKyA2XSkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcInpcIjpcclxuICAgICAgICBjYXNlIFwiWlwiOlxyXG4gICAgICAgICAgbGFzdC54ID0gbGFzdC54bTtcclxuICAgICAgICAgIGxhc3QueSA9IGxhc3QueW07XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBzd2l0Y2ggKGFjdGlvbikge1xyXG4gICAgICAgIGNhc2UgXCJNXCI6XHJcbiAgICAgICAgY2FzZSBcIkxcIjpcclxuICAgICAgICBjYXNlIFwiSFwiOlxyXG4gICAgICAgIGNhc2UgXCJWXCI6XHJcbiAgICAgICAgY2FzZSBcIkFcIjpcclxuICAgICAgICBjYXNlIFwibVwiOlxyXG4gICAgICAgIGNhc2UgXCJsXCI6XHJcbiAgICAgICAgY2FzZSBcImhcIjpcclxuICAgICAgICBjYXNlIFwidlwiOlxyXG4gICAgICAgIGNhc2UgXCJhXCI6XHJcbiAgICAgICAgICBsYXN0LmN4ID0gbnVsbDtcclxuICAgICAgICAgIGxhc3QuY3kgPSBudWxsO1xyXG4gICAgICAgICAgbGFzdC5xeCA9IG51bGw7XHJcbiAgICAgICAgICBsYXN0LnF5ID0gbnVsbDtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGxhc3QucHJldkFjdGlvbiA9IGFjdGlvbjtcclxuICAgICAgZnVuY3Rpb24gX3VwZGF0ZUJCb3hDdWJpYyh4RnJvbSwgeUZyb20sIHgxLCB5MSwgeDIsIHkyLCB4VG8sIHlUbykge1xyXG4gICAgICAgIGZ1bmN0aW9uIF9nZXRQb2ludCh0LCBwMSwgcDIsIHAzLCBwNCkge1xyXG4gICAgICAgICAgY29uc3QgX3QgPSAxIC0gdDtcclxuICAgICAgICAgIHJldHVybiBfdCAqIF90ICogX3QgKiBwMSArIDMgKiBfdCAqIF90ICogdCAqIHAyICsgMyAqIF90ICogdCAqIHQgKiBwMyArIHQgKiB0ICogdCAqIHA0O1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBza2lwIHRoZSBzdGFydGluZyBwb2ludFxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkrKykge1xyXG4gICAgICAgICAgY29uc3QgdCA9IDAuMSAqIChpICsgMSk7XHJcbiAgICAgICAgICBfdXBkYXRlQkJveChfZ2V0UG9pbnQodCwgeEZyb20sIHgxLCB4MiwgeFRvKSwgX2dldFBvaW50KHQsIHlGcm9tLCB5MSwgeTIsIHlUbykpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBmdW5jdGlvbiBfdXBkYXRlQkJveFF1YWRyYXRpYyh4RnJvbSwgeUZyb20sIHgxLCB5MSwgeFRvLCB5VG8pIHtcclxuICAgICAgICBmdW5jdGlvbiBfZ2V0UG9pbnQodCwgcDEsIHAyLCBwMykge1xyXG4gICAgICAgICAgY29uc3QgX3QgPSAxIC0gdDtcclxuICAgICAgICAgIHJldHVybiBfdCAqIF90ICogcDEgKyAyICogX3QgKiB0ICogcDIgKyB0ICogdCAqIHAzO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBza2lwIHRoZSBzdGFydGluZyBwb2ludFxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkrKykge1xyXG4gICAgICAgICAgY29uc3QgdCA9IDAuMSAqIChpICsgMSk7XHJcbiAgICAgICAgICBfdXBkYXRlQkJveChfZ2V0UG9pbnQodCwgeEZyb20sIHgxLCB4VG8pLCBfZ2V0UG9pbnQodCwgeUZyb20sIHkxLCB5VG8pKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgZnVuY3Rpb24gX3VwZGF0ZUJCb3hBcmMoeEZyb20sIHlGcm9tLCByeCwgcnksIHJvdGF0aW9uRGVnLCBsYXJnZUFyY0ZsYWcsIHN3ZWVwRmxhZywgeFRvLCB5VG8pIHtcclxuICAgICAgICBjb25zdCBhcmNQYXJhbXMgPSBfY2FsY0FyY1BhcmFtcyh4RnJvbSwgeUZyb20sIHJ4LCByeSwgcm90YXRpb25EZWcsIGxhcmdlQXJjRmxhZywgc3dlZXBGbGFnLCB4VG8sIHlUbyk7XHJcbiAgICAgICAgY29uc3QgY29zX3IgPSBhcmNQYXJhbXMucm90YXRpb25SYWQgPyBNYXRoLmNvcyhhcmNQYXJhbXMucm90YXRpb25SYWQpIDogMTtcclxuICAgICAgICBjb25zdCBzaW5fciA9IGFyY1BhcmFtcy5yb3RhdGlvblJhZCA/IE1hdGguc2luKGFyY1BhcmFtcy5yb3RhdGlvblJhZCkgOiAwO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9nZXRQb2ludCh0KSB7XHJcbiAgICAgICAgICBjb25zdCBhbmdsZVJhZCA9IGFyY1BhcmFtcy5hbmdsZUZyb21SYWQgKyAoYXJjUGFyYW1zLmFuZ2xlVG9SYWQgLSBhcmNQYXJhbXMuYW5nbGVGcm9tUmFkKSAqIHQ7XHJcbiAgICAgICAgICBjb25zdCBjb3NfYSA9IGFuZ2xlUmFkID8gTWF0aC5jb3MoYW5nbGVSYWQpIDogMTtcclxuICAgICAgICAgIGNvbnN0IHNpbl9hID0gYW5nbGVSYWQgPyBNYXRoLnNpbihhbmdsZVJhZCkgOiAwO1xyXG4gICAgICAgICAgY29uc3QgcmVsWCA9IGFyY1BhcmFtcy5yeCAqIGNvc19hO1xyXG4gICAgICAgICAgY29uc3QgcmVsWSA9IGFyY1BhcmFtcy5yeSAqIHNpbl9hO1xyXG4gICAgICAgICAgY29uc3Qgcm90YXRlZFJlbFggPSBjb3NfciAqIHJlbFggLSBzaW5fciAqIHJlbFk7XHJcbiAgICAgICAgICBjb25zdCByb3RhdGVkUmVsWSA9IHNpbl9yICogcmVsWCArIGNvc19yICogcmVsWTtcclxuICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHg6IGFyY1BhcmFtcy5jeCArIHJvdGF0ZWRSZWxYLFxyXG4gICAgICAgICAgICB5OiBhcmNQYXJhbXMuY3kgKyByb3RhdGVkUmVsWVxyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gc2tpcCB0aGUgc3RhcnRpbmcgcG9pbnRcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpKyspIHtcclxuICAgICAgICAgIGNvbnN0IHQgPSAwLjEgKiAoaSArIDEpO1xyXG4gICAgICAgICAgY29uc3QgcCA9IF9nZXRQb2ludCh0KTtcclxuICAgICAgICAgIF91cGRhdGVCQm94KHAueCwgcC55KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgLy8gdXBkYXRlcyB0aGUgYm91bmRpbmcgYm94IG9mIHBhdGggd2l0aCBuZXcgcG9pbnRcclxuICAgICAgZnVuY3Rpb24gX3VwZGF0ZUJCb3goeCwgeSkge1xyXG4gICAgICAgIGNvbnN0IGJib3ggPSBfc2VnbWVudEJib3g7XHJcbiAgICAgICAgLy8gd2UgdXNlIHtsLCBiLCByLCB0fSByZXByZXNlbnRhdGlvbiBvZiBhIGJib3hcclxuICAgICAgICBpZiAoYmJveCAmJiBcImxcIiBpbiBiYm94KSB7XHJcbiAgICAgICAgICBpZiAoYmJveC5sID4geCkge1xyXG4gICAgICAgICAgICBiYm94LmwgPSB4O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKGJib3guciA8IHgpIHtcclxuICAgICAgICAgICAgYmJveC5yID0geDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChiYm94LnQgPiB5KSB7XHJcbiAgICAgICAgICAgIGJib3gudCA9IHk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAoYmJveC5iIDwgeSkge1xyXG4gICAgICAgICAgICBiYm94LmIgPSB5O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIF9zZWdtZW50QmJveCA9IHsgbDogeCwgYjogeSwgcjogeCwgdDogeSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIGdldEJCb3g6ICgpID0+IF9zZWdtZW50QmJveFxyXG4gIH07XHJcbiAgcmV0dXJuIGNhbGN1bGF0b3I7XHJcbn1cclxuZnVuY3Rpb24gX2NhbGNBcmNQYXJhbXMoeEZyb20sIHlGcm9tLCByeCwgcnksIHJvdGF0aW9uRGVnLCBsYXJnZUFyY0ZsYWcsIHN3ZWVwRmxhZywgeFRvLCB5VG8pIHtcclxuICAvLyBodHRwczovL3d3dy53My5vcmcvVFIvU1ZHMTEvaW1wbG5vdGUuaHRtbFxyXG4gIC8vIGh0dHA6Ly9zdm4uYXBhY2hlLm9yZy9yZXBvcy9hc2YveG1sZ3JhcGhpY3MvYmF0aWsvYnJhbmNoZXMvc3ZnMTEvc291cmNlcy9vcmcvYXBhY2hlL2JhdGlrL2V4dC9hd3QvZ2VvbS9FeHRlbmRlZEdlbmVyYWxQYXRoLmphdmFcclxuICAvL1xyXG4gIC8vIEVsbGlwdGljYWwgYXJjIGltcGxlbWVudGF0aW9uIGJhc2VkIG9uIHRoZSBTVkcgc3BlY2lmaWNhdGlvbiBub3Rlc1xyXG4gIC8vXHJcbiAgLy8gQ29tcHV0ZSB0aGUgaGFsZiBkaXN0YW5jZSBiZXR3ZWVuIHRoZSBjdXJyZW50IGFuZCB0aGUgZmluYWwgcG9pbnRcclxuICBjb25zdCBkeDIgPSAoeEZyb20gLSB4VG8pIC8gMi4wO1xyXG4gIGNvbnN0IGR5MiA9ICh5RnJvbSAtIHlUbykgLyAyLjA7XHJcbiAgLy8gQ29udmVydCBhbmdsZSBmcm9tIGRlZ3JlZXMgdG8gcmFkaWFuc1xyXG4gIGNvbnN0IHJvdGF0aW9uUmFkID0gZGVnVG9SYWQocm90YXRpb25EZWcgJSAzNjAuMCk7XHJcbiAgY29uc3QgY29zQW5nbGUgPSBNYXRoLmNvcyhyb3RhdGlvblJhZCk7XHJcbiAgY29uc3Qgc2luQW5nbGUgPSBNYXRoLnNpbihyb3RhdGlvblJhZCk7XHJcbiAgLy9cclxuICAvLyBTdGVwIDEgOiBDb21wdXRlICh4MSwgeTEpXHJcbiAgLy9cclxuICBjb25zdCB4MSA9IGNvc0FuZ2xlICogZHgyICsgc2luQW5nbGUgKiBkeTI7XHJcbiAgY29uc3QgeTEgPSAtc2luQW5nbGUgKiBkeDIgKyBjb3NBbmdsZSAqIGR5MjtcclxuICAvLyBFbnN1cmUgcmFkaWkgYXJlIGxhcmdlIGVub3VnaFxyXG4gIHJ4ID0gTWF0aC5hYnMocngpO1xyXG4gIHJ5ID0gTWF0aC5hYnMocnkpO1xyXG4gIGxldCBQcnggPSByeCAqIHJ4O1xyXG4gIGxldCBQcnkgPSByeSAqIHJ5O1xyXG4gIGNvbnN0IFB4MSA9IHgxICogeDE7XHJcbiAgY29uc3QgUHkxID0geTEgKiB5MTtcclxuICAvLyBjaGVjayB0aGF0IHJhZGlpIGFyZSBsYXJnZSBlbm91Z2hcclxuICBjb25zdCByYWRpaUNoZWNrID0gUHgxIC8gUHJ4ICsgUHkxIC8gUHJ5O1xyXG4gIGlmIChyYWRpaUNoZWNrID4gMSkge1xyXG4gICAgcnggPSBNYXRoLnNxcnQocmFkaWlDaGVjaykgKiByeDtcclxuICAgIHJ5ID0gTWF0aC5zcXJ0KHJhZGlpQ2hlY2spICogcnk7XHJcbiAgICBQcnggPSByeCAqIHJ4O1xyXG4gICAgUHJ5ID0gcnkgKiByeTtcclxuICB9XHJcbiAgLy9cclxuICAvLyBTdGVwIDIgOiBDb21wdXRlIChjeDEsIGN5MSlcclxuICAvL1xyXG4gIGxldCBzaWduID0gbGFyZ2VBcmNGbGFnID09PSBzd2VlcEZsYWcgPyAtMSA6IDE7XHJcbiAgbGV0IHNxID0gKFByeCAqIFByeSAtIFByeCAqIFB5MSAtIFByeSAqIFB4MSkgLyAoUHJ4ICogUHkxICsgUHJ5ICogUHgxKTtcclxuICBzcSA9IHNxIDwgMCA/IDAgOiBzcTtcclxuICBjb25zdCBjb2VmID0gc2lnbiAqIE1hdGguc3FydChzcSk7XHJcbiAgY29uc3QgY3gxID0gY29lZiAqICgocnggKiB5MSkgLyByeSk7XHJcbiAgY29uc3QgY3kxID0gY29lZiAqIC0oKHJ5ICogeDEpIC8gcngpO1xyXG4gIC8vXHJcbiAgLy8gU3RlcCAzIDogQ29tcHV0ZSAoY3gsIGN5KSBmcm9tIChjeDEsIGN5MSlcclxuICAvL1xyXG4gIGNvbnN0IHN4MiA9ICh4RnJvbSArIHhUbykgLyAyLjA7XHJcbiAgY29uc3Qgc3kyID0gKHlGcm9tICsgeVRvKSAvIDIuMDtcclxuICBjb25zdCBjeCA9IHN4MiArIChjb3NBbmdsZSAqIGN4MSAtIHNpbkFuZ2xlICogY3kxKTtcclxuICBjb25zdCBjeSA9IHN5MiArIChzaW5BbmdsZSAqIGN4MSArIGNvc0FuZ2xlICogY3kxKTtcclxuICAvL1xyXG4gIC8vIFN0ZXAgNCA6IENvbXB1dGUgdGhlIGFuZ2xlU3RhcnQgKGFuZ2xlMSkgYW5kIHRoZSBhbmdsZUV4dGVudCAoZGFuZ2xlKVxyXG4gIC8vXHJcbiAgY29uc3QgdXggPSAoeDEgLSBjeDEpIC8gcng7XHJcbiAgY29uc3QgdXkgPSAoeTEgLSBjeTEpIC8gcnk7XHJcbiAgY29uc3QgdnggPSAoLXgxIC0gY3gxKSAvIHJ4O1xyXG4gIGNvbnN0IHZ5ID0gKC15MSAtIGN5MSkgLyByeTtcclxuICBsZXQgcCwgbjtcclxuICAvLyBDb21wdXRlIHRoZSBhbmdsZSBzdGFydFxyXG4gIG4gPSBNYXRoLnNxcnQodXggKiB1eCArIHV5ICogdXkpO1xyXG4gIHAgPSB1eDsgLy8gKDEgKiB1eCkgKyAoMCAqIHV5KVxyXG4gIHNpZ24gPSB1eSA8IDAgPyAtMSA6IDE7XHJcbiAgbGV0IGFuZ2xlRnJvbURlZyA9IHJhZFRvRGVnKHNpZ24gKiBNYXRoLmFjb3MocCAvIG4pKTtcclxuICAvLyBDb21wdXRlIHRoZSBhbmdsZSBleHRlbnRcclxuICBuID0gTWF0aC5zcXJ0KCh1eCAqIHV4ICsgdXkgKiB1eSkgKiAodnggKiB2eCArIHZ5ICogdnkpKTtcclxuICBwID0gdXggKiB2eCArIHV5ICogdnk7XHJcbiAgc2lnbiA9IHV4ICogdnkgLSB1eSAqIHZ4IDwgMCA/IC0xIDogMTtcclxuICBsZXQgYW5nbGVFeHRlbnREZWcgPSByYWRUb0RlZyhzaWduICogTWF0aC5hY29zKHAgLyBuKSk7XHJcbiAgaWYgKCFzd2VlcEZsYWcgJiYgYW5nbGVFeHRlbnREZWcgPiAwKSB7XHJcbiAgICBhbmdsZUV4dGVudERlZyAtPSAzNjA7XHJcbiAgfVxyXG4gIGVsc2UgaWYgKHN3ZWVwRmxhZyAmJiBhbmdsZUV4dGVudERlZyA8IDApIHtcclxuICAgIGFuZ2xlRXh0ZW50RGVnICs9IDM2MDtcclxuICB9XHJcbiAgYW5nbGVFeHRlbnREZWcgJT0gMzYwO1xyXG4gIGFuZ2xlRnJvbURlZyAlPSAzNjA7XHJcbiAgcmV0dXJuIHtcclxuICAgIGN4LFxyXG4gICAgY3ksXHJcbiAgICByeCxcclxuICAgIHJ5LFxyXG4gICAgYW5nbGVGcm9tUmFkOiBkZWdUb1JhZChhbmdsZUZyb21EZWcpLFxyXG4gICAgYW5nbGVUb1JhZDogZGVnVG9SYWQoYW5nbGVGcm9tRGVnICsgYW5nbGVFeHRlbnREZWcpLFxyXG4gICAgcm90YXRpb25SYWRcclxuICB9O1xyXG59XG5cbi8qKlxyXG4gKiBUaGlzIGxpYnJhcnkgYWxsb3dzIHRvIGJ1aWxkIFNWRyBlbGVtZW50cyB2aWEganNvbiBtb2RlbCBhbmQgaW50ZXJmYWNlLiBBbHNvIGNhbiBiZSB1c2VkIHRvIHNlcGFyYXRlIGRhdGEgYnVpbGluZyBmcm9tIHRoZSBhY3R1YWwgcmVuZGVyaW5nLlxyXG4gKiBUaGlzIGxpYnJhcnkgY2FuIGJlIHVzZWQgaW4gdGhlIGZvbGxvd2luZyB3YXlzLlxyXG4gKlxyXG4gKiAxLiBMSVZFXHJcbiAqIFRoZSBzdXJmYWNlIGlzIGNyZWF0ZWQgb24gYSBET00gbm9kZS4gRXZlcnkgY2hhbmdlIGluIHRoZSBzaGFwZSBlbGVtZW50cyBpcyByZWZsZWN0ZWQgaW4gdGhlIERPTS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogY29uc3Qgc3VyZmFjZSA9IGNyZWF0ZUdGWFN1cmZhY2UoZG9jdW1lbnQuYm9keSwgMTAwLCAxMDApO1xyXG4gKiBzdXJmYWNlLmNyZWF0ZVJlY3QoeyB3OiAxMDAsIHk6IDEwMCB9KS5zZXRGaWxsKFwicmVkXCIpOyAvLyB3aWxsIGJlIHJlbmRlcmVkIHJpZ2h0IGF3YXlcclxuICpcclxuICpcclxuICogMi4gREVGRVJSRUQvREVUQUNIRUQgKGhmeCBsaWJyYXJ5KVxyXG4gKiBUaGUgc3VyZmFjZSBpcyBjcmVhdGVkIHdpdGhvdXQgYSBwYXJlbnQuIENoYW5nZXMgbWFkZSB0byB0aGUgc2hhcGUgZWxlbWVudHMgYXJlIGFjY3VtdWxhdGVkIGluIF9yYXdOb2RlIChET00gSlNPTikuXHJcbiAqIFRoZW4geW91IGNhbiBjYWxsIHN1cmZhY2UucmVuZGVyKCkgbWV0aG9kIHRvIGNyZWF0ZSB0aGUgRE9NIChfcmF3Tm9kZSA9PiByYXdOb2RlKS4gc3VyZmFjZS5yYXdOb2RlIHdpbGwgYmUgY3JlYXRlZCBhcyBhIGRldGFjaGVkIERPTSBub2RlIGFuZFxyXG4gKiB0aGVuIGNhbiBiZSBhZGRlZCB0byB0aGUgZG9jdW1lbnQuXHJcbiAqIEZyb20gdGhpcyB0aW1lIG9uLCBldmVyeSBjaGFuZ2UgaW4gdGhlIHNoYXBlIGVsZW1lbnRzIHdpbGwgYmUgcmVmbGVjdGVkIGluIHRoZSBET00uXHJcbiAqIENhbiBiZSB1c2VkIGZvciBvZmYtc2NyZWVuIHJlbmRlcmluZyB0byBvcHRpbWl6ZSBwZXJmb3JtYW5jZS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogY29uc3Qgc3VyZmFjZSA9IGNyZWF0ZUdGWFN1cmZhY2UobnVsbCwgMTAwLCAxMDApO1xyXG4gKiBzdXJmYWNlLmNyZWF0ZVJlY3QoeyB3OiAxMDAsIHk6IDEwMCB9KS5zZXRGaWxsKFwicmVkXCIpO1xyXG4gKiBzdXJmYWNlLnJlbmRlcigpOyAvLyBjcmVhdGVzIGEgZGV0YWNoZWQgcmF3Tm9kZVxyXG4gKiBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHN1cmZhY2UucmF3Tm9kZSk7XHJcbiAqXHJcbiAqXHJcbiAqIDMuIEhUTUwgU1RSSU5HIChoZnggbGlicmFyeSlcclxuICogVGhlIHN1cmZhY2UgaXMgY3JlYXRlZCB3aXRob3V0IGEgcGFyZW50LiBDaGFuZ2VzIG1hZGUgdG8gdGhlIHNoYXBlIGVsZW1lbnRzIGFyZSBhY2N1bXVsYXRlZCBpbiBfcmF3Tm9kZSAoRE9NIEpTT04pLlxyXG4gKiBDYWxsIHN1cmZhY2UuX2dldEhUTUxTdHJpbmcoKSB0byBjb252ZXJ0IF9yYXdOb2RlID0+IEhUTUwgU3RyaW5nLlxyXG4gKiBDYW4gYmUgdXNlZCBmb3Igb2ZmLXNjcmVlbiBvciBpbi13b3JrZXIgcmVuZGVyaW5nIHRvIG9wdGltaXplIHBlcmZvcm1hbmNlLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBjb25zdCBzdXJmYWNlID0gY3JlYXRlR0ZYU3VyZmFjZShudWxsLCAxMDAsIDEwMCk7XHJcbiAqIHN1cmZhY2UuY3JlYXRlUmVjdCh7IHc6IDEwMCwgeTogMTAwIH0pLnNldEZpbGwoXCJyZWRcIik7XHJcbiAqIGRvY3VtZW50LmJvZHkuaW5uZXJIVE1MID0gc3VyZmFjZS5fZ2V0SFRNTFN0cmluZygpOyAvLyB0aGlzIHdpbGwgbm90IGNyZWF0ZSBzdXJmYWNlLnJhd05vZGVcclxuICovXHJcbmNvbnN0IGRhc2hhcnJheSA9IHtcclxuICBzaG9ydGRhc2g6IFs0LCAxXSxcclxuICBzaG9ydGRvdDogWzEsIDFdLFxyXG4gIHNob3J0ZGFzaGRvdDogWzQsIDEsIDEsIDFdLFxyXG4gIHNob3J0ZGFzaGRvdGRvdDogWzQsIDEsIDEsIDEsIDEsIDFdLFxyXG4gIGRvdDogWzEsIDNdLFxyXG4gIGRhc2g6IFs0LCAzXSxcclxuICBsb25nZGFzaDogWzgsIDNdLFxyXG4gIGRhc2hkb3Q6IFs0LCAzLCAxLCAzXSxcclxuICBsb25nZGFzaGRvdDogWzgsIDMsIDEsIDNdLFxyXG4gIGxvbmdkYXNoZG90ZG90OiBbOCwgMywgMSwgMywgMSwgM11cclxufTtcclxuY29uc3QgeG1sbnMgPSB7XHJcbiAgeGxpbms6IFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiLFxyXG4gIHN2ZzogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXHJcbn07XHJcbmNvbnN0IHBhdGhTdmdSZWdFeHAgPSAvKFtBLURGLVphLWRmLXpdKXwoWy0rXT9cXGQqWy5dP1xcZCsoPzpbZUVdWy0rXT9cXGQrKT8pL2c7XHJcbmxldCBjbGlwQ291bnQgPSAwO1xyXG5jb25zdCBHRlhfREVGQVVMVFMgPSB7XHJcbiAgZGVmYXVsdFN0cm9rZToge1xyXG4gICAgdHlwZTogXCJzdHJva2VcIixcclxuICAgIGNvbG9yOiBcImJsYWNrXCIsXHJcbiAgICBzdHlsZTogXCJzb2xpZFwiLFxyXG4gICAgd2lkdGg6IDAsXHJcbiAgICBjYXA6IFwiYnV0dFwiLFxyXG4gICAgam9pbjogNFxyXG4gIH0sXHJcbiAgZGVmYXVsdFBhdGg6IHtcclxuICAgIHR5cGU6IFwicGF0aFwiLFxyXG4gICAgcGF0aDogXCJcIlxyXG4gIH0sXHJcbiAgZGVmYXVsdFBvbHlsaW5lOiB7XHJcbiAgICB0eXBlOiBcInBvbHlsaW5lXCIsXHJcbiAgICBwb2ludHM6IFtdXHJcbiAgfSxcclxuICBkZWZhdWx0UG9seWdvbjoge1xyXG4gICAgdHlwZTogXCJwb2x5Z29uXCIsXHJcbiAgICBwb2ludHM6IFtdXHJcbiAgfSxcclxuICBkZWZhdWx0UmVjdDoge1xyXG4gICAgdHlwZTogXCJyZWN0XCIsXHJcbiAgICB4OiAwLFxyXG4gICAgeTogMCxcclxuICAgIHc6IDEwMCxcclxuICAgIGg6IDEwMCxcclxuICAgIHI6IDBcclxuICB9LFxyXG4gIGRlZmF1bHRMaW5lOiB7XHJcbiAgICB0eXBlOiBcImxpbmVcIixcclxuICAgIHgxOiAwLFxyXG4gICAgeTE6IDAsXHJcbiAgICB4MjogMTAwLFxyXG4gICAgeTI6IDEwMFxyXG4gIH0sXHJcbiAgZGVmYXVsdEVsbGlwc2U6IHtcclxuICAgIHR5cGU6IFwiZWxsaXBzZVwiLFxyXG4gICAgY3g6IDAsXHJcbiAgICBjeTogMCxcclxuICAgIHJ4OiAyMDAsXHJcbiAgICByeTogMTAwXHJcbiAgfSxcclxuICBkZWZhdWx0Q2lyY2xlOiB7XHJcbiAgICB0eXBlOiBcImNpcmNsZVwiLFxyXG4gICAgY3g6IDAsXHJcbiAgICBjeTogMCxcclxuICAgIHI6IDEwMFxyXG4gIH0sXHJcbiAgZGVmYXVsdEltYWdlOiB7XHJcbiAgICB0eXBlOiBcImltYWdlXCIsXHJcbiAgICB4OiAwLFxyXG4gICAgeTogMCxcclxuICAgIHc6IDAsXHJcbiAgICBoOiAwLFxyXG4gICAgc3JjOiBcIlwiXHJcbiAgfSxcclxuICBkZWZhdWx0VGV4dDoge1xyXG4gICAgdHlwZTogXCJ0ZXh0XCIsXHJcbiAgICB4OiAwLFxyXG4gICAgeTogMCxcclxuICAgIHRleHQ6IFwiXCIsXHJcbiAgICBhbGlnbjogXCJzdGFydFwiLFxyXG4gICAgZGVjb3JhdGlvbjogXCJub25lXCIsXHJcbiAgICByb3RhdGVkOiBmYWxzZSxcclxuICAgIGtlcm5pbmc6IHRydWVcclxuICB9XHJcbn07XHJcbmZ1bmN0aW9uIF90b0F0dHJOYW1lKG5hbWUpIHtcclxuICByZXR1cm4gbmFtZSA9PT0gXCJ3XCIgPyBcIndpZHRoXCIgOiBuYW1lID09PSBcImhcIiA/IFwiaGVpZ2h0XCIgOiBuYW1lO1xyXG59XHJcbmZ1bmN0aW9uIF9jcmVhdGVSYXdOb2RlU3VwcG9ydChzb3VyY2UsIGlzR3JvdXAgPSBmYWxzZSkge1xyXG4gIGNvbnN0IG9iamVjdCA9IHNvdXJjZTtcclxuICBvYmplY3QuX3Jhd05vZGUgPSBudWxsO1xyXG4gIC8vIEFUVFJJQlVURVNcclxuICBvYmplY3QuZ2V0QXR0cmlidXRlID0gKG5hbWUpID0+IG9iamVjdC5fcmF3Tm9kZS5hdHRyc1tuYW1lXTtcclxuICBvYmplY3Quc2V0QXR0cmlidXRlID0gKG5hbWUsIHZhbHVlKSA9PiB7XHJcbiAgICBvYmplY3QuX3Jhd05vZGUuYXR0cnNbbmFtZV0gPSB2YWx1ZTtcclxuICAgIC8vIERPTVxyXG4gICAgb2JqZWN0LnJhd05vZGUgJiYgb2JqZWN0LnJhd05vZGUuc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlKTtcclxuICB9O1xyXG4gIG9iamVjdC5fc2V0QXR0cmlidXRlTlMgPSAobnMsIG5hbWUsIHZhbHVlKSA9PiB7XHJcbiAgICBvYmplY3QuX3Jhd05vZGUuYXR0cnNbbmFtZV0gPSB2YWx1ZTtcclxuICAgIC8vIERPTVxyXG4gICAgb2JqZWN0LnJhd05vZGUgJiYgb2JqZWN0LnJhd05vZGUuc2V0QXR0cmlidXRlTlMobnMsIG5hbWUsIHZhbHVlKTtcclxuICB9O1xyXG4gIG9iamVjdC5yZW1vdmVBdHRyaWJ1dGUgPSAobmFtZSkgPT4ge1xyXG4gICAgZGVsZXRlIG9iamVjdC5fcmF3Tm9kZS5hdHRyc1tuYW1lXTtcclxuICAgIC8vIERPTVxyXG4gICAgb2JqZWN0LnJhd05vZGUgJiYgb2JqZWN0LnJhd05vZGUucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xyXG4gIH07XHJcbiAgLy8gU1RZTEVcclxuICBvYmplY3QuZ2V0U3R5bGUgPSAoKSA9PiBvYmplY3QuX3Jhd05vZGUuc3R5bGU7XHJcbiAgb2JqZWN0LnNldFN0eWxlID0gKHN0eWxlKSA9PiB7XHJcbiAgICBpZiAoIW9iamVjdC5fcmF3Tm9kZS5zdHlsZSkge1xyXG4gICAgICBvYmplY3QuX3Jhd05vZGUuc3R5bGUgPSBzdHlsZTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBvYmplY3QuX3Jhd05vZGUuc3R5bGUgPSBtaXhpbihvYmplY3QuX3Jhd05vZGUuc3R5bGUsIHN0eWxlKTtcclxuICAgIH1cclxuICAgIGlmIChvYmplY3QucmF3Tm9kZSkge1xyXG4gICAgICBmb3IgKGNvbnN0IGlkIGluIHN0eWxlKSB7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSBzdHlsZVtpZF07XHJcbiAgICAgICAgb2JqZWN0LnJhd05vZGUuc3R5bGVbaWRdID0gdmFsdWUgPT0gbnVsbCA/IFwiXCIgOiB2YWx1ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcbiAgLy8gU0VUIFJBVyBOT0RFXHJcbiAgb2JqZWN0Ll9zZXRSYXdOb2RlID0gKF9uYW1lc3BhY2UsIG5vZGVUeXBlLCBjcmVhdGVEb20pID0+IHtcclxuICAgIG9iamVjdC5fcmF3Tm9kZSA9IHtcclxuICAgICAgbmFtZTogbm9kZVR5cGUsXHJcbiAgICAgIGF0dHJzOiB7fVxyXG4gICAgfTtcclxuICAgIGlmIChjcmVhdGVEb20pIHtcclxuICAgICAgb2JqZWN0Ll9hc3NpZ25SYXdOb2RlKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhfbmFtZXNwYWNlLCBub2RlVHlwZSkpO1xyXG4gICAgfVxyXG4gICAgLy8gc2hhcGUgb25seVxyXG4gICAgaWYgKGlzR3JvdXAgfHwgIW9iamVjdC5zaGFwZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAob2JqZWN0LnNoYXBlLnR5cGUgIT09IFwiaW1hZ2VcIikge1xyXG4gICAgICBvYmplY3Quc2V0QXR0cmlidXRlKFwiZmlsbFwiLCBcIm5vbmVcIik7XHJcbiAgICB9XHJcbiAgICBvYmplY3Quc2V0QXR0cmlidXRlKFwiZmlsbC1vcGFjaXR5XCIsIFwiMFwiKTtcclxuICAgIG9iamVjdC5zZXRBdHRyaWJ1dGUoXCJzdHJva2VcIiwgXCJub25lXCIpO1xyXG4gICAgb2JqZWN0LnNldEF0dHJpYnV0ZShcInN0cm9rZS1vcGFjaXR5XCIsIFwiMFwiKTtcclxuICAgIG9iamVjdC5zZXRBdHRyaWJ1dGUoXCJzdHJva2Utd2lkdGhcIiwgXCIxXCIpO1xyXG4gICAgb2JqZWN0LnNldEF0dHJpYnV0ZShcInN0cm9rZS1saW5lY2FwXCIsIFwiYnV0dFwiKTtcclxuICAgIG9iamVjdC5zZXRBdHRyaWJ1dGUoXCJzdHJva2UtbGluZWpvaW5cIiwgXCJtaXRlclwiKTtcclxuICAgIG9iamVjdC5zZXRBdHRyaWJ1dGUoXCJzdHJva2UtbWl0ZXJsaW1pdFwiLCBcIjRcIik7XHJcbiAgfTtcclxuICBvYmplY3QuX2Fzc2lnblJhd05vZGUgPSAobm9kZSkgPT4ge1xyXG4gICAgaWYgKCFub2RlKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFbXB0eSByYXdOb2RlIGFzc2lnbm1lbnQuIFRoaXMgbWlnaHQgYmUgYSBtaXN0YWtlLlwiKTtcclxuICAgIH1cclxuICAgIG9iamVjdC5yYXdOb2RlID0gbm9kZTtcclxuICAgIC8vIGRlbGVnYXRlIGV2ZW50IGxpc3RlbmVyc1xyXG4gICAgaWYgKG9iamVjdC5fcmF3Tm9kZS5wZW5kaW5nRXZlbnRzKSB7XHJcbiAgICAgIG9iamVjdC5fcmF3Tm9kZS5wZW5kaW5nRXZlbnRzLmZvckVhY2goKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgZXZlbnQuaGFuZGxlID0gb24ob2JqZWN0LnJhd05vZGUsIGV2ZW50LnR5cGUsIGV2ZW50LmNhbGxiYWNrKTtcclxuICAgICAgfSk7XHJcbiAgICAgIG9iamVjdC5fcmF3Tm9kZS5wZW5kaW5nRXZlbnRzID0gbnVsbDtcclxuICAgIH1cclxuICB9O1xyXG4gIG9iamVjdC5fc2V0VGV4dCA9ICh0ZXh0KSA9PiB7XHJcbiAgICBvYmplY3QuX3Jhd05vZGUudGV4dCA9IHRleHQ7XHJcbiAgICAvLyBET01cclxuICAgIGlmIChvYmplY3QucmF3Tm9kZSkge1xyXG4gICAgICBjb25zdCByID0gb2JqZWN0LnJhd05vZGU7XHJcbiAgICAgIGlmIChyLmZpcnN0Q2hpbGQpIHtcclxuICAgICAgICByLmZpcnN0Q2hpbGQubm9kZVZhbHVlID0gdGV4dDtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICByLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRleHQpKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcbiAgb2JqZWN0Ll9hcHBlbmRSYXdOb2RlQ2hpbGQgPSAoc2hhcGUsIG5vRG9tKSA9PiB7XHJcbiAgICAvLyBjaGVjayBhZ2FpbnN0IGRvdWJsZSByZWZlcmVuY2luZyBpcyBtYWRlIGVsc2V3aGVyZVxyXG4gICAgb2JqZWN0Ll9yYXdOb2RlLmNoaWxkcmVuID0gb2JqZWN0Ll9yYXdOb2RlLmNoaWxkcmVuIHx8IFtdO1xyXG4gICAgb2JqZWN0Ll9yYXdOb2RlLmNoaWxkcmVuLnB1c2goc2hhcGUuX3Jhd05vZGUpO1xyXG4gICAgLy8gRE9NXHJcbiAgICAhbm9Eb20gJiYgb2JqZWN0LnJhd05vZGUgJiYgb2JqZWN0LnJhd05vZGUuYXBwZW5kQ2hpbGQoc2hhcGUucmF3Tm9kZSk7XHJcbiAgfTtcclxuICBvYmplY3QuX3JlbW92ZVJhd05vZGVDaGlsZCA9IChzaGFwZSkgPT4ge1xyXG4gICAgLy8gY2hlY2sgZm9yIHJlZmVyZW5jaW5nIGlzIG1hZGUgZWxzZXdoZXJlXHJcbiAgICBjb25zdCBpbmRleCA9IG9iamVjdC5fcmF3Tm9kZS5jaGlsZHJlbi5pbmRleE9mKHNoYXBlLl9yYXdOb2RlKTtcclxuICAgIGluZGV4ICE9PSAtMSAmJiBvYmplY3QuX3Jhd05vZGUuY2hpbGRyZW4uc3BsaWNlKGluZGV4LCAxKTtcclxuICAgIC8vIERPTVxyXG4gICAgaWYgKG9iamVjdC5yYXdOb2RlICYmIHNoYXBlLnJhd05vZGUgJiYgb2JqZWN0LnJhd05vZGUgPT09IHNoYXBlLnJhd05vZGUucGFyZW50Tm9kZSkge1xyXG4gICAgICBvYmplY3QucmF3Tm9kZS5yZW1vdmVDaGlsZChzaGFwZS5yYXdOb2RlKTtcclxuICAgIH1cclxuICB9O1xyXG4gIG9iamVjdC5fZW1wdHJ5UmF3Tm9kZSA9ICgpID0+IHtcclxuICAgIG9iamVjdC5fcmF3Tm9kZS5jaGlsZHJlbiA9IG51bGw7XHJcbiAgICAvLyBET01cclxuICAgIGNvbnN0IHIgPSBvYmplY3QucmF3Tm9kZTtcclxuICAgIHdoaWxlIChyICYmIHIubGFzdENoaWxkKSB7XHJcbiAgICAgIHIucmVtb3ZlQ2hpbGQoci5sYXN0Q2hpbGQpO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgb2JqZWN0Ll9jcmVhdGVEZWZzTm9kZSA9ICgpID0+IHtcclxuICAgIG9iamVjdC5fcmF3Tm9kZS5jaGlsZHJlbiA9IG9iamVjdC5fcmF3Tm9kZS5jaGlsZHJlbiB8fCBbXTtcclxuICAgIG9iamVjdC5fcmF3Tm9kZS5jaGlsZHJlbi5wdXNoKHtcclxuICAgICAgbmFtZTogXCJkZWZzXCJcclxuICAgIH0pO1xyXG4gICAgLy8gRE9NXHJcbiAgICBvYmplY3QucmF3Tm9kZSAmJiBvYmplY3QucmF3Tm9kZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoeG1sbnMuc3ZnLCBcImRlZnNcIikpO1xyXG4gIH07XHJcbiAgb2JqZWN0Ll9nZXRIVE1MU3RyaW5nID0gKHBhcmFtcykgPT4ge1xyXG4gICAgZnVuY3Rpb24gX3Byb2Nlc3NOb2RlKG4pIHtcclxuICAgICAgaWYgKHBhcmFtcyAmJiBwYXJhbXMucmVtb3ZlSGlkZGVuICYmIG4uc3R5bGUgJiYgbi5zdHlsZS5kaXNwbGF5ID09PSBcIm5vbmVcIikge1xyXG4gICAgICAgIHJldHVybiBcIlwiOyAvLyBlbGVtZW50IGlzIGhpZGRlblxyXG4gICAgICB9XHJcbiAgICAgIGxldCByZXN1bHQgPSBcIjxcIiArIG4ubmFtZTtcclxuICAgICAgaWYgKG4ubmFtZSA9PT0gXCJzdmdcIikge1xyXG4gICAgICAgIHJlc3VsdCArPSAnIHhtbG5zPVwiJyArIHhtbG5zLnN2ZyArICdcIic7XHJcbiAgICAgICAgcmVzdWx0ICs9ICcgeG1sbnM6eGxpbms9XCInICsgeG1sbnMueGxpbmsgKyAnXCInO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIEFUVFJJQlVURVNcclxuICAgICAgZm9yIChjb25zdCBpZCBpbiBuLmF0dHJzKSB7XHJcbiAgICAgICAgcmVzdWx0ICs9IFwiIFwiICsgaWQgKyAnPVwiJyArIG4uYXR0cnNbaWRdICsgJ1wiJztcclxuICAgICAgfVxyXG4gICAgICAvLyBTVFlMRVxyXG4gICAgICBpZiAoIXBhcmFtcyB8fCAhcGFyYW1zLm5vU3R5bGUpIHtcclxuICAgICAgICBsZXQgc3R5bGU7XHJcbiAgICAgICAgZm9yIChjb25zdCBpZCBpbiBuLnN0eWxlKSB7XHJcbiAgICAgICAgICBzdHlsZSA9IHN0eWxlIHx8IFwiXCI7XHJcbiAgICAgICAgICBjb25zdCB2YWx1ZSA9IG4uc3R5bGVbaWRdO1xyXG4gICAgICAgICAgaWYgKHZhbHVlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgc3R5bGUgKz0gaWQgKyBcIjpcIiArIG4uc3R5bGVbaWRdICsgXCI7XCI7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzdHlsZSkge1xyXG4gICAgICAgICAgcmVzdWx0ICs9ICcgc3R5bGU9XCInICsgc3R5bGUgKyAnXCInO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICAvLyBDT05URU5UXHJcbiAgICAgIGxldCBjb250ZW50ID0gbi50ZXh0ID8gZW5jb2RlWE1MKG4udGV4dCkgOiBcIlwiO1xyXG4gICAgICBpZiAoIWNvbnRlbnQgJiYgbi5jaGlsZHJlbikge1xyXG4gICAgICAgIG4uY2hpbGRyZW4uZm9yRWFjaCgoYykgPT4ge1xyXG4gICAgICAgICAgY29udGVudCArPSBfcHJvY2Vzc05vZGUoYyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgcmVzdWx0ICs9IFwiPlwiICsgY29udGVudCArIFwiPC9cIiArIG4ubmFtZSArIFwiPlwiO1xyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9wcm9jZXNzTm9kZShvYmplY3QuX3Jhd05vZGUpO1xyXG4gIH07XHJcbiAgb2JqZWN0Lm9uID0gKHR5cGUsIGNhbGxiYWNrKSA9PiB7XHJcbiAgICBpZiAob2JqZWN0LnJhd05vZGUpIHtcclxuICAgICAgcmV0dXJuIG9uKG9iamVjdC5yYXdOb2RlLCB0eXBlLCBjYWxsYmFjayk7XHJcbiAgICB9XHJcbiAgICAvLyBjcmVhdGUgYW4gZXZlbnQgd3JhcHBlciB0byBsYXRlciBkZWxlZ2F0ZSBpdCB0byB0aGUgcmF3Tm9kZSB3aGVuIGNyZWF0ZWRcclxuICAgIG9iamVjdC5fcmF3Tm9kZS5wZW5kaW5nRXZlbnRzID0gb2JqZWN0Ll9yYXdOb2RlLnBlbmRpbmdFdmVudHMgfHwgW107XHJcbiAgICBjb25zdCBldmVudFdyYXBwZXIgPSB7XHJcbiAgICAgIHR5cGUsXHJcbiAgICAgIGNhbGxiYWNrLFxyXG4gICAgICBoYW5kbGU6IG51bGxcclxuICAgIH07XHJcbiAgICBvYmplY3QuX3Jhd05vZGUucGVuZGluZ0V2ZW50cy5wdXNoKGV2ZW50V3JhcHBlcik7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZW1vdmU6ICgpID0+IHtcclxuICAgICAgICBpZiAoZXZlbnRXcmFwcGVyLmhhbmRsZSkge1xyXG4gICAgICAgICAgLy8gcmVtb3ZlIGZyb20gcmF3Tm9kZVxyXG4gICAgICAgICAgZXZlbnRXcmFwcGVyLmhhbmRsZS5yZW1vdmUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAob2JqZWN0Ll9yYXdOb2RlLnBlbmRpbmdFdmVudHMpIHtcclxuICAgICAgICAgIGNvbnN0IGluZGV4ID0gb2JqZWN0Ll9yYXdOb2RlLnBlbmRpbmdFdmVudHMuaW5kZXhPZihldmVudFdyYXBwZXIpO1xyXG4gICAgICAgICAgaW5kZXggIT09IC0xICYmIG9iamVjdC5fcmF3Tm9kZS5wZW5kaW5nRXZlbnRzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH07XHJcbiAgb2JqZWN0Ll9kZXN0cm95UmF3Tm9kZSA9ICgpID0+IHtcclxuICAgIG9iamVjdC5fcmF3Tm9kZSA9IG51bGw7XHJcbiAgICBvYmplY3QucmF3Tm9kZSA9IG51bGw7XHJcbiAgfTtcclxufVxyXG5mdW5jdGlvbiBfY3JlYXRlR0ZYU2hhcGUoc291cmNlLCBpc0dyb3VwID0gZmFsc2UpIHtcclxuICBjb25zdCBzaGFwZSA9IHNvdXJjZSB8fCB7fTtcclxuICBfY3JlYXRlUmF3Tm9kZVN1cHBvcnQoc2hhcGUsIGlzR3JvdXApO1xyXG4gIHNoYXBlLmdldEZpbGwgPSAoKSA9PiBzaGFwZS5maWxsU3R5bGU7XHJcbiAgc2hhcGUuc2V0RmlsbCA9IChmaWxsKSA9PiB7XHJcbiAgICBpZiAoIWZpbGwpIHtcclxuICAgICAgc2hhcGUuc2V0QXR0cmlidXRlKFwiZmlsbFwiLCBcIm5vbmVcIik7XHJcbiAgICAgIHNoYXBlLnNldEF0dHJpYnV0ZShcImZpbGwtb3BhY2l0eVwiLCBcIjBcIik7XHJcbiAgICAgIHNoYXBlLmZpbGxTdHlsZSA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgY29uc3QgY29sb3IgPSB0b0NvbG9yKGZpbGwpO1xyXG4gICAgICBzaGFwZS5zZXRBdHRyaWJ1dGUoXCJmaWxsXCIsIGNvbG9yLnRvQ3NzKCkpO1xyXG4gICAgICBzaGFwZS5zZXRBdHRyaWJ1dGUoXCJmaWxsLW9wYWNpdHlcIiwgY29sb3IuYSArIFwiXCIpO1xyXG4gICAgICBzaGFwZS5zZXRBdHRyaWJ1dGUoXCJmaWxsLXJ1bGVcIiwgXCJldmVub2RkXCIpO1xyXG4gICAgICBzaGFwZS5maWxsU3R5bGUgPSBjb2xvcjtcclxuICAgIH1cclxuICAgIHJldHVybiBzaGFwZTtcclxuICB9O1xyXG4gIHNoYXBlLmdldFN0cm9rZSA9ICgpID0+IHNoYXBlLnN0cm9rZVN0eWxlO1xyXG4gIHNoYXBlLnNldFN0cm9rZSA9IChzdHJva2UpID0+IHtcclxuICAgIHNoYXBlLnN0cm9rZVN0eWxlID0gc3Ryb2tlO1xyXG4gICAgaWYgKCFzdHJva2UpIHtcclxuICAgICAgLy8gZG9uJ3Qgc3Ryb2tlXHJcbiAgICAgIHNoYXBlLnN0cm9rZVN0eWxlID0gbnVsbDtcclxuICAgICAgc2hhcGUuc2V0QXR0cmlidXRlKFwic3Ryb2tlXCIsIFwibm9uZVwiKTtcclxuICAgICAgc2hhcGUuc2V0QXR0cmlidXRlKFwic3Ryb2tlLW9wYWNpdHlcIiwgXCIwXCIpO1xyXG4gICAgICByZXR1cm4gc2hhcGU7XHJcbiAgICB9XHJcbiAgICBjb25zdCBzID0gKHNoYXBlLnN0cm9rZVN0eWxlID0gbWl4aW4oe30sIEdGWF9ERUZBVUxUUy5kZWZhdWx0U3Ryb2tlLCBzdHJva2UpKTtcclxuICAgIGNvbnN0IGNvbG9yID0gKHMuY29sb3IgPSB0b0NvbG9yKHMuY29sb3IpKTtcclxuICAgIC8vIGdlbmVyYXRlIGF0dHJpYnV0ZXNcclxuICAgIGlmIChzKSB7XHJcbiAgICAgIGNvbnN0IHcgPSBzLndpZHRoIDwgMCA/IDAgOiBzLndpZHRoO1xyXG4gICAgICBzaGFwZS5zZXRBdHRyaWJ1dGUoXCJzdHJva2VcIiwgY29sb3IudG9Dc3MoKSk7XHJcbiAgICAgIHNoYXBlLnNldEF0dHJpYnV0ZShcInN0cm9rZS1vcGFjaXR5XCIsIGNvbG9yLmEgKyBcIlwiKTtcclxuICAgICAgc2hhcGUuc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsICh3IHx8IDApICsgXCJcIik7XHJcbiAgICAgIHNoYXBlLnNldEF0dHJpYnV0ZShcInN0cm9rZS1saW5lY2FwXCIsIHMuY2FwKTtcclxuICAgICAgaWYgKHR5cGVvZiBzLmpvaW4gPT09IFwibnVtYmVyXCIpIHtcclxuICAgICAgICBzaGFwZS5zZXRBdHRyaWJ1dGUoXCJzdHJva2UtbGluZWpvaW5cIiwgXCJtaXRlclwiKTtcclxuICAgICAgICBzaGFwZS5zZXRBdHRyaWJ1dGUoXCJzdHJva2UtbWl0ZXJsaW1pdFwiLCBzLmpvaW4gKyBcIlwiKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBzaGFwZS5zZXRBdHRyaWJ1dGUoXCJzdHJva2UtbGluZWpvaW5cIiwgcy5qb2luKTtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBkYSA9IHMuc3R5bGUudG9Mb3dlckNhc2UoKTtcclxuICAgICAgaWYgKGRhICE9PSBcInNvbGlkXCIpIHtcclxuICAgICAgICBpZiAoZGEgaW4gZGFzaGFycmF5KSB7XHJcbiAgICAgICAgICBjb25zdCBkYVZhbHVlID0gZGFzaGFycmF5W2RhXS5zbGljZSgpO1xyXG4gICAgICAgICAgbGV0IGk7XHJcbiAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZGFWYWx1ZS5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICBkYVZhbHVlW2ldICo9IHc7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAocy5jYXAgIT09IFwiYnV0dFwiKSB7XHJcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBkYVZhbHVlLmxlbmd0aDsgaSArPSAyKSB7XHJcbiAgICAgICAgICAgICAgZGFWYWx1ZVtpXSAtPSB3O1xyXG4gICAgICAgICAgICAgIGlmIChkYVZhbHVlW2ldIDwgMSkge1xyXG4gICAgICAgICAgICAgICAgZGFWYWx1ZVtpXSA9IDE7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvciAoaSA9IDE7IGkgPCBkYVZhbHVlLmxlbmd0aDsgaSArPSAyKSB7XHJcbiAgICAgICAgICAgICAgZGFWYWx1ZVtpXSArPSB3O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBzaGFwZS5zZXRBdHRyaWJ1dGUoXCJzdHJva2UtZGFzaGFycmF5XCIsIGRhVmFsdWUuam9pbihcIixcIikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIHNoYXBlLnNldEF0dHJpYnV0ZShcInN0cm9rZS1kYXNoYXJyYXlcIiwgZGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHNoYXBlO1xyXG4gIH07XHJcbiAgc2hhcGUuYXBwbHlUcmFuc2Zvcm0gPSAobWF0cml4KSA9PiB7XHJcbiAgICBzaGFwZS5zZXRUcmFuc2Zvcm0oZ2Z4TWF0cml4QnVpbGRlci5tdWx0aXBseShbc2hhcGUubWF0cml4LCBtYXRyaXhdKSk7XHJcbiAgICByZXR1cm4gc2hhcGU7XHJcbiAgfTtcclxuICBzaGFwZS5zZXRUcmFuc2Zvcm0gPSAobWF0cml4T3JBcnJheSkgPT4ge1xyXG4gICAgc2hhcGUubWF0cml4ID0gQXJyYXkuaXNBcnJheShtYXRyaXhPckFycmF5KVxyXG4gICAgICA/IGdmeE1hdHJpeEJ1aWxkZXIubXVsdGlwbHkobWF0cml4T3JBcnJheSlcclxuICAgICAgOiBuZXcgR0ZYTWF0cml4MkQobWF0cml4T3JBcnJheSk7XHJcbiAgICByZXR1cm4gX2FwcGx5VHJhbnNmb3JtKCk7XHJcbiAgfTtcclxuICBmdW5jdGlvbiBfYXBwbHlUcmFuc2Zvcm0oKSB7XHJcbiAgICBjb25zdCBtYXRyaXggPSBzaGFwZS5tYXRyaXg7XHJcbiAgICBpZiAobWF0cml4KSB7XHJcbiAgICAgIGNvbnN0IHRtID0gc2hhcGUubWF0cml4O1xyXG4gICAgICBzaGFwZS5zZXRBdHRyaWJ1dGUoXCJ0cmFuc2Zvcm1cIiwgXCJtYXRyaXgoXCIgK1xyXG4gICAgICAgIHRtLnh4LnRvRml4ZWQoOCkgK1xyXG4gICAgICAgIFwiLFwiICtcclxuICAgICAgICB0bS55eC50b0ZpeGVkKDgpICtcclxuICAgICAgICBcIixcIiArXHJcbiAgICAgICAgdG0ueHkudG9GaXhlZCg4KSArXHJcbiAgICAgICAgXCIsXCIgK1xyXG4gICAgICAgIHRtLnl5LnRvRml4ZWQoOCkgK1xyXG4gICAgICAgIFwiLFwiICtcclxuICAgICAgICB0bS5keC50b0ZpeGVkKDgpICtcclxuICAgICAgICBcIixcIiArXHJcbiAgICAgICAgdG0uZHkudG9GaXhlZCg4KSArXHJcbiAgICAgICAgXCIpXCIpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHNoYXBlLnJlbW92ZUF0dHJpYnV0ZShcInRyYW5zZm9ybVwiKTtcclxuICAgIH1cclxuICAgIHJldHVybiBzaGFwZTtcclxuICB9XHJcbiAgc2hhcGUuX3NldFNoYXBlID0gKG5ld1NoYXBlKSA9PiB7XHJcbiAgICBzaGFwZS5zaGFwZSA9IG1peGluKHt9LCBzaGFwZS5zaGFwZSwgbmV3U2hhcGUpO1xyXG4gICAgZm9yIChjb25zdCBpIGluIHNoYXBlLnNoYXBlKSB7XHJcbiAgICAgIGlmIChpICE9PSBcInR5cGVcIiAmJiBpICE9PSBcInBhdGhcIikge1xyXG4gICAgICAgIGxldCB2ID0gc2hhcGUuc2hhcGVbaV07XHJcbiAgICAgICAgLy8gdmFsaWRhdGUgdmFsdWVzXHJcbiAgICAgICAgaWYgKGkgPT09IFwid1wiIHx8IGkgPT09IFwiaFwiKSB7XHJcbiAgICAgICAgICB2ID0gdiA8IDAgPyAwIDogdjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodiA9PSBudWxsICYmIChpID09PSBcInhcIiB8fCBpID09PSBcInlcIikpIHtcclxuICAgICAgICAgIHYgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzaGFwZS5zZXRBdHRyaWJ1dGUoX3RvQXR0ck5hbWUoaSksIHYpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc2hhcGU7XHJcbiAgfTtcclxuICBzaGFwZS5zZXRDbGlwID0gKGNsaXApID0+IHtcclxuICAgIHNoYXBlLmNsaXAgPSBjbGlwO1xyXG4gICAgbGV0IGNsaXBOb2RlO1xyXG4gICAgLy8gc2VhcmNoIGZvciB0aGUgY2xpcE5vZGUgaW4gdGhlIHBhcmVudCAobGltaXRhdGlvbikgYW5kIHJlbW92ZSBpdFxyXG4gICAgbGV0IGNsaXBJZCA9IHNoYXBlLmdldEF0dHJpYnV0ZShcImNsaXAtcGF0aFwiKTtcclxuICAgIGlmIChjbGlwSWQpIHtcclxuICAgICAgY2xpcElkID0gY2xpcElkLnN1YnN0cig1KS5yZXBsYWNlKFwiKVwiLCBcIlwiKTtcclxuICAgICAgc2hhcGUucGFyZW50Ll9yYXdOb2RlLmNoaWxkcmVuICYmXHJcbiAgICAgICAgc2hhcGUucGFyZW50Ll9yYXdOb2RlLmNoaWxkcmVuLnNvbWUoKGMpID0+IHtcclxuICAgICAgICAgIGlmIChjLm5hbWUgPT09IFwiY2xpcFBhdGhcIiAmJiBjLmF0dHJzLmlkID09PSBjbGlwSWQpIHtcclxuICAgICAgICAgICAgY2xpcE5vZGUgPSBjO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gc3RvcCB0aGUgY3ljbGVcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgICAgaWYgKGNsaXBOb2RlKSB7XHJcbiAgICAgICAgY29uc3QgaW5kZXggPSBzaGFwZS5wYXJlbnQuX3Jhd05vZGUuY2hpbGRyZW4uaW5kZXhPZihjbGlwTm9kZSk7XHJcbiAgICAgICAgaW5kZXggIT09IC0xICYmIHNoYXBlLnBhcmVudC5fcmF3Tm9kZS5jaGlsZHJlbi5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgIGlmIChzaGFwZS5yYXdOb2RlICYmIGNsaXBOb2RlKSB7XHJcbiAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gc2hhcGUucmF3Tm9kZS5wYXJlbnROb2RlLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkID0gc2hhcGUucmF3Tm9kZS5wYXJlbnROb2RlLmNoaWxkcmVuW2ldO1xyXG4gICAgICAgICAgICBpZiAoY2hpbGQuZ2V0QXR0cmlidXRlKFwiaWRcIikgPT09IGNsaXBJZCkge1xyXG4gICAgICAgICAgICAgIHNoYXBlLnJhd05vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjaGlsZCk7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChjbGlwKSB7XHJcbiAgICAgIGNvbnN0IGNsaXBUeXBlID0gXCJ3XCIgaW4gY2xpcCA/IFwicmVjdFwiIDogXCJlbGxpcHNlXCI7XHJcbiAgICAgIGNvbnN0IGNsaXBJZCA9IFwiZ2Z4X2NsaXBcIiArICsrY2xpcENvdW50O1xyXG4gICAgICBzaGFwZS5zZXRBdHRyaWJ1dGUoXCJjbGlwLXBhdGhcIiwgXCJ1cmwoI1wiICsgY2xpcElkICsgXCIpXCIpO1xyXG4gICAgICBjb25zdCBjbGlwU2hhcGUgPSB7XHJcbiAgICAgICAgbmFtZTogY2xpcFR5cGUsXHJcbiAgICAgICAgYXR0cnM6IHt9XHJcbiAgICAgIH07XHJcbiAgICAgIGZvciAoY29uc3QgaWQgaW4gY2xpcCkge1xyXG4gICAgICAgIGNsaXBTaGFwZS5hdHRyc1tfdG9BdHRyTmFtZShpZCldID0gY2xpcFtpZF07XHJcbiAgICAgIH1cclxuICAgICAgY2xpcE5vZGUgPSB7XHJcbiAgICAgICAgbmFtZTogXCJjbGlwUGF0aFwiLFxyXG4gICAgICAgIGF0dHJzOiB7XHJcbiAgICAgICAgICBpZDogY2xpcElkXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjaGlsZHJlbjogW2NsaXBTaGFwZV1cclxuICAgICAgfTtcclxuICAgICAgc2hhcGUucGFyZW50Ll9yYXdOb2RlLmNoaWxkcmVuLnNwbGljZShzaGFwZS5wYXJlbnQuX3Jhd05vZGUuY2hpbGRyZW4uaW5kZXhPZihzaGFwZS5fcmF3Tm9kZSksIDAsIGNsaXBOb2RlKTtcclxuICAgICAgLy8gRE9NXHJcbiAgICAgIGlmIChzaGFwZS5yYXdOb2RlKSB7XHJcbiAgICAgICAgY29uc3QgY2xpcE5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoeG1sbnMuc3ZnLCBcImNsaXBQYXRoXCIpO1xyXG4gICAgICAgIGNsaXBOb2RlLnNldEF0dHJpYnV0ZShcImlkXCIsIGNsaXBJZCk7XHJcbiAgICAgICAgY29uc3QgY2xpcFNoYXBlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHhtbG5zLnN2ZywgY2xpcFR5cGUpO1xyXG4gICAgICAgIGZvciAoY29uc3QgaWQgaW4gY2xpcCkge1xyXG4gICAgICAgICAgY2xpcFNoYXBlLnNldEF0dHJpYnV0ZShfdG9BdHRyTmFtZShpZCksIGNsaXBbaWRdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2xpcE5vZGUuYXBwZW5kQ2hpbGQoY2xpcFNoYXBlKTtcclxuICAgICAgICBzaGFwZS5yYXdOb2RlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGNsaXBOb2RlLCBzaGFwZS5yYXdOb2RlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHNoYXBlLnJlbW92ZUF0dHJpYnV0ZShcImNsaXAtcGF0aFwiKTtcclxuICAgIH1cclxuICAgIHJldHVybiBzaGFwZTtcclxuICB9O1xyXG4gIHNoYXBlLl9kZXN0cm95ID0gKCkgPT4ge1xyXG4gICAgc2hhcGUuX2Rlc3Ryb3lSYXdOb2RlKCk7XHJcbiAgfTtcclxuICByZXR1cm4gc2hhcGU7XHJcbn1cclxuZnVuY3Rpb24gX2NyZWF0ZUdGWFJlY3QoKSB7XHJcbiAgY29uc3QgcmVjdCA9IHt9O1xyXG4gIF9jcmVhdGVHRlhTaGFwZShyZWN0KTtcclxuICByZWN0LnNoYXBlID0gbWl4aW4oe30sIEdGWF9ERUZBVUxUUy5kZWZhdWx0UmVjdCk7XHJcbiAgY29uc3Qgc2V0U2hhcGVfYmFzZSA9IHJlY3QuX3NldFNoYXBlO1xyXG4gIHJlY3QuX3NldFNoYXBlID0gKG5ld1NoYXBlKSA9PiB7XHJcbiAgICBzZXRTaGFwZV9iYXNlKG5ld1NoYXBlKTtcclxuICAgIGlmIChyZWN0LnNoYXBlLnIgIT0gbnVsbCkge1xyXG4gICAgICByZWN0LnNldEF0dHJpYnV0ZShcInJ5XCIsIHJlY3Quc2hhcGUuciArIFwiXCIpO1xyXG4gICAgICByZWN0LnNldEF0dHJpYnV0ZShcInJ4XCIsIHJlY3Quc2hhcGUuciArIFwiXCIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlY3Q7XHJcbiAgfTtcclxuICByZWN0LmdldEJvdW5kaW5nQm94ID0gKCkgPT4gcmVjdC5zaGFwZTtcclxuICByZXR1cm4gcmVjdDtcclxufVxyXG5mdW5jdGlvbiBfY3JlYXRlR0ZYTGluZSgpIHtcclxuICBjb25zdCBsaW5lID0ge307XHJcbiAgX2NyZWF0ZUdGWFNoYXBlKGxpbmUpO1xyXG4gIGxpbmUuc2hhcGUgPSBtaXhpbih7fSwgR0ZYX0RFRkFVTFRTLmRlZmF1bHRMaW5lKTtcclxuICBsaW5lLmdldEJvdW5kaW5nQm94ID0gKCkgPT4gKHtcclxuICAgIHg6IE1hdGgubWluKGxpbmUuc2hhcGUueDEsIGxpbmUuc2hhcGUueDIpLFxyXG4gICAgeTogTWF0aC5taW4obGluZS5zaGFwZS55MSwgbGluZS5zaGFwZS55MiksXHJcbiAgICB3OiBNYXRoLmFicyhsaW5lLnNoYXBlLngyIC0gbGluZS5zaGFwZS54MSksXHJcbiAgICBoOiBNYXRoLmFicyhsaW5lLnNoYXBlLnkyIC0gbGluZS5zaGFwZS55MSlcclxuICB9KTtcclxuICByZXR1cm4gbGluZTtcclxufVxyXG5mdW5jdGlvbiBfY3JlYXRlR0ZYQ2lyY2xlKCkge1xyXG4gIGNvbnN0IGNpcmNsZSA9IHt9O1xyXG4gIF9jcmVhdGVHRlhTaGFwZShjaXJjbGUpO1xyXG4gIGNpcmNsZS5zaGFwZSA9IG1peGluKHt9LCBHRlhfREVGQVVMVFMuZGVmYXVsdENpcmNsZSk7XHJcbiAgY2lyY2xlLmdldEJvdW5kaW5nQm94ID0gKCkgPT4gKHtcclxuICAgIHg6IGNpcmNsZS5zaGFwZS5jeCAtIGNpcmNsZS5zaGFwZS5yLFxyXG4gICAgeTogY2lyY2xlLnNoYXBlLmN5IC0gY2lyY2xlLnNoYXBlLnIsXHJcbiAgICB3OiAyICogY2lyY2xlLnNoYXBlLnIsXHJcbiAgICBoOiAyICogY2lyY2xlLnNoYXBlLnJcclxuICB9KTtcclxuICByZXR1cm4gY2lyY2xlO1xyXG59XHJcbmZ1bmN0aW9uIF9jcmVhdGVHRlhFbGxpcHNlKCkge1xyXG4gIGNvbnN0IGVsbGlwc2UgPSB7fTtcclxuICBfY3JlYXRlR0ZYU2hhcGUoZWxsaXBzZSk7XHJcbiAgZWxsaXBzZS5zaGFwZSA9IG1peGluKHt9LCBHRlhfREVGQVVMVFMuZGVmYXVsdEVsbGlwc2UpO1xyXG4gIGVsbGlwc2UuZ2V0Qm91bmRpbmdCb3ggPSAoKSA9PiAoe1xyXG4gICAgeDogZWxsaXBzZS5zaGFwZS5jeCAtIGVsbGlwc2Uuc2hhcGUucngsXHJcbiAgICB5OiBlbGxpcHNlLnNoYXBlLmN5IC0gZWxsaXBzZS5zaGFwZS5yeSxcclxuICAgIHc6IDIgKiBlbGxpcHNlLnNoYXBlLnJ4LFxyXG4gICAgaDogMiAqIGVsbGlwc2Uuc2hhcGUucnlcclxuICB9KTtcclxuICByZXR1cm4gZWxsaXBzZTtcclxufVxyXG5mdW5jdGlvbiBfY3JlYXRlR0ZYUG9seWxpbmUoKSB7XHJcbiAgcmV0dXJuIF9jcmVhdGVHRlhQb2x5bGluZU9yUG9seWdvbih0cnVlKTtcclxufVxyXG5mdW5jdGlvbiBfY3JlYXRlR0ZYUG9seWdvbigpIHtcclxuICByZXR1cm4gX2NyZWF0ZUdGWFBvbHlsaW5lT3JQb2x5Z29uKGZhbHNlKTtcclxufVxyXG5mdW5jdGlvbiBfY3JlYXRlR0ZYUG9seWxpbmVPclBvbHlnb24oaXNQb2x5bGluZSkge1xyXG4gIGNvbnN0IHBvbHlsaW5lID0ge307XHJcbiAgX2NyZWF0ZUdGWFNoYXBlKHBvbHlsaW5lKTtcclxuICBwb2x5bGluZS5zaGFwZSA9IG1peGluKHt9LCBpc1BvbHlsaW5lID8gR0ZYX0RFRkFVTFRTLmRlZmF1bHRQb2x5bGluZSA6IEdGWF9ERUZBVUxUUy5kZWZhdWx0UG9seWdvbik7XHJcbiAgcG9seWxpbmUuX3NldFNoYXBlID0gKG5ld1NoYXBlKSA9PiB7XHJcbiAgICBwb2x5bGluZS5zaGFwZSA9IG1peGluKHt9LCBwb2x5bGluZS5zaGFwZSwgbmV3U2hhcGUpO1xyXG4gICAgY29uc3QgYXR0ciA9IFtdO1xyXG4gICAgcG9seWxpbmUuc2hhcGUucG9pbnRzLmZvckVhY2goKHApID0+IHtcclxuICAgICAgYXR0ci5wdXNoKHAueC50b0ZpeGVkKDgpLCBwLnkudG9GaXhlZCg4KSk7XHJcbiAgICB9KTtcclxuICAgIHBvbHlsaW5lLnNldEF0dHJpYnV0ZShcInBvaW50c1wiLCBhdHRyLmpvaW4oXCIgXCIpKTtcclxuICAgIHJldHVybiBwb2x5bGluZTtcclxuICB9O1xyXG4gIHBvbHlsaW5lLmdldEJvdW5kaW5nQm94ID0gKCkgPT4ge1xyXG4gICAgaWYgKCFwb2x5bGluZS5zaGFwZS5wb2ludHMubGVuZ3RoKSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgLy8gc3VtbWFyeTpcclxuICAgIC8vXHRcdHJldHVybnMgdGhlIGJvdW5kaW5nIGJveFxyXG4gICAgY29uc3QgcHMgPSBwb2x5bGluZS5zaGFwZS5wb2ludHM7XHJcbiAgICBjb25zdCBsID0gcHMubGVuZ3RoO1xyXG4gICAgbGV0IHQgPSBwc1swXTtcclxuICAgIGNvbnN0IGJib3ggPSB7IGw6IHQueCwgdDogdC55LCByOiB0LngsIGI6IHQueSB9O1xyXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCBsOyArK2kpIHtcclxuICAgICAgdCA9IHBzW2ldO1xyXG4gICAgICBpZiAoYmJveC5sID4gdC54KSB7XHJcbiAgICAgICAgYmJveC5sID0gdC54O1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChiYm94LnIgPCB0LngpIHtcclxuICAgICAgICBiYm94LnIgPSB0Lng7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGJib3gudCA+IHQueSkge1xyXG4gICAgICAgIGJib3gudCA9IHQueTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoYmJveC5iIDwgdC55KSB7XHJcbiAgICAgICAgYmJveC5iID0gdC55O1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB4OiBiYm94LmwsXHJcbiAgICAgIHk6IGJib3gudCxcclxuICAgICAgdzogYmJveC5yIC0gYmJveC5sLFxyXG4gICAgICBoOiBiYm94LmIgLSBiYm94LnRcclxuICAgIH07XHJcbiAgfTtcclxuICByZXR1cm4gcG9seWxpbmU7XHJcbn1cclxuY29uc3QgdmFsaWRTZWdtZW50cyA9IHtcclxuICBtOiAyLFxyXG4gIGw6IDIsXHJcbiAgaDogMSxcclxuICB2OiAxLFxyXG4gIGM6IDYsXHJcbiAgczogNCxcclxuICBxOiA0LFxyXG4gIHQ6IDIsXHJcbiAgYTogNyxcclxuICB6OiAwXHJcbn07XHJcbmZ1bmN0aW9uIF9jcmVhdGVHRlhQYXRoKCkge1xyXG4gIGNvbnN0IHBhdGggPSB7fTtcclxuICBfY3JlYXRlR0ZYU2hhcGUocGF0aCk7XHJcbiAgcGF0aC5zaGFwZSA9IG1peGluKHt9LCBHRlhfREVGQVVMVFMuZGVmYXVsdFBhdGgpO1xyXG4gIHBhdGguc2VnbWVudHMgPSBbXTtcclxuICBwYXRoLnNlZ21lbnRlZCA9IGZhbHNlO1xyXG4gIHBhdGguYWJzb2x1dGUgPSB0cnVlO1xyXG4gIGNvbnN0IHNldFNoYXBlX2Jhc2UgPSBwYXRoLl9zZXRTaGFwZTtcclxuICBwYXRoLl9zZXRTaGFwZSA9IChuZXdTaGFwZSkgPT4ge1xyXG4gICAgc2V0U2hhcGVfYmFzZShuZXdTaGFwZSk7XHJcbiAgICBwYXRoLnNlZ21lbnRlZCA9IGZhbHNlO1xyXG4gICAgcGF0aC5zZWdtZW50cyA9IFtdO1xyXG4gICAgX2NvbmZpcm1TZWdtZW50ZWQoKTtcclxuICAgIGlmIChwYXRoLnNoYXBlLnBhdGgpIHtcclxuICAgICAgcGF0aC5zZXRBdHRyaWJ1dGUoXCJkXCIsIHBhdGguc2hhcGUucGF0aCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgcGF0aC5yZW1vdmVBdHRyaWJ1dGUoXCJkXCIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBhdGg7XHJcbiAgfTtcclxuICBwYXRoLm1vdmVUbyA9ICh4LCB5KSA9PiB7XHJcbiAgICAvLyBzdW1tYXJ5OlxyXG4gICAgLy9cdFx0Zm9ybXMgYSBtb3ZlIHNlZ21lbnRcclxuICAgIF9jb25maXJtU2VnbWVudGVkKCk7XHJcbiAgICBfcHVzaFNlZ21lbnQocGF0aC5hYnNvbHV0ZSA/IFwiTVwiIDogXCJtXCIsIFt4LCB5XSk7XHJcbiAgICByZXR1cm4gcGF0aDtcclxuICB9O1xyXG4gIHBhdGgubGluZVRvID0gKHgsIHkpID0+IHtcclxuICAgIF9jb25maXJtU2VnbWVudGVkKCk7XHJcbiAgICBfcHVzaFNlZ21lbnQocGF0aC5hYnNvbHV0ZSA/IFwiTFwiIDogXCJsXCIsIFt4LCB5XSk7XHJcbiAgICByZXR1cm4gcGF0aDtcclxuICB9O1xyXG4gIHBhdGguaExpbmVUbyA9ICh4KSA9PiB7XHJcbiAgICBfY29uZmlybVNlZ21lbnRlZCgpO1xyXG4gICAgX3B1c2hTZWdtZW50KHBhdGguYWJzb2x1dGUgPyBcIkhcIiA6IFwiaFwiLCBbeF0pO1xyXG4gICAgcmV0dXJuIHBhdGg7XHJcbiAgfTtcclxuICBwYXRoLnZMaW5lVG8gPSAoeSkgPT4ge1xyXG4gICAgX2NvbmZpcm1TZWdtZW50ZWQoKTtcclxuICAgIF9wdXNoU2VnbWVudChwYXRoLmFic29sdXRlID8gXCJWXCIgOiBcInZcIiwgW3ldKTtcclxuICAgIHJldHVybiBwYXRoO1xyXG4gIH07XHJcbiAgcGF0aC5hcmNUbyA9IChyeCwgcnksIHhfYXhpc19yb3RhdGlvbiwgbGFyZ2VfYXJjX2ZsYWcsIHN3ZWVwX2ZsYWcsIHgsIHkpID0+IHtcclxuICAgIF9jb25maXJtU2VnbWVudGVkKCk7XHJcbiAgICBfcHVzaFNlZ21lbnQocGF0aC5hYnNvbHV0ZSA/IFwiQVwiIDogXCJhXCIsIFtcclxuICAgICAgcngsXHJcbiAgICAgIHJ5LFxyXG4gICAgICB4X2F4aXNfcm90YXRpb24sXHJcbiAgICAgIGxhcmdlX2FyY19mbGFnID8gMSA6IDAsXHJcbiAgICAgIHN3ZWVwX2ZsYWcgPyAxIDogMCxcclxuICAgICAgeCxcclxuICAgICAgeVxyXG4gICAgXSk7XHJcbiAgICByZXR1cm4gcGF0aDtcclxuICB9O1xyXG4gIHBhdGguY3VydmVUbyA9ICh4MSwgeTEsIHgyLCB5MiwgeCwgeSkgPT4ge1xyXG4gICAgX2NvbmZpcm1TZWdtZW50ZWQoKTtcclxuICAgIF9wdXNoU2VnbWVudChwYXRoLmFic29sdXRlID8gXCJDXCIgOiBcImNcIiwgW3gxLCB5MSwgeDIsIHkyLCB4LCB5XSk7XHJcbiAgICByZXR1cm4gcGF0aDtcclxuICB9O1xyXG4gIHBhdGguc21vb3RoQ3VydmVUbyA9ICh4MiwgeTIsIHgsIHkpID0+IHtcclxuICAgIF9jb25maXJtU2VnbWVudGVkKCk7XHJcbiAgICBfcHVzaFNlZ21lbnQocGF0aC5hYnNvbHV0ZSA/IFwiU1wiIDogXCJzXCIsIFt4MiwgeTIsIHgsIHldKTtcclxuICAgIHJldHVybiBwYXRoO1xyXG4gIH07XHJcbiAgcGF0aC5xQ3VydmVUbyA9ICh4MSwgeTEsIHgsIHkpID0+IHtcclxuICAgIF9jb25maXJtU2VnbWVudGVkKCk7XHJcbiAgICBfcHVzaFNlZ21lbnQocGF0aC5hYnNvbHV0ZSA/IFwiUVwiIDogXCJxXCIsIFt4MSwgeTEsIHgsIHldKTtcclxuICAgIHJldHVybiBwYXRoO1xyXG4gIH07XHJcbiAgcGF0aC5xU21vb3RoQ3VydmVUbyA9ICh4LCB5KSA9PiB7XHJcbiAgICBfY29uZmlybVNlZ21lbnRlZCgpO1xyXG4gICAgX3B1c2hTZWdtZW50KHBhdGguYWJzb2x1dGUgPyBcIlRcIiA6IFwidFwiLCBbeCwgeV0pO1xyXG4gICAgcmV0dXJuIHBhdGg7XHJcbiAgfTtcclxuICBwYXRoLmNsb3NlUGF0aCA9ICgpID0+IHtcclxuICAgIF9jb25maXJtU2VnbWVudGVkKCk7XHJcbiAgICBfcHVzaFNlZ21lbnQoXCJaXCIsIFtdKTtcclxuICAgIHJldHVybiBwYXRoO1xyXG4gIH07XHJcbiAgbGV0IHBhdGhBcnJheTtcclxuICBmdW5jdGlvbiBfY29uZmlybVNlZ21lbnRlZCgpIHtcclxuICAgIGlmICghcGF0aC5zZWdtZW50ZWQpIHtcclxuICAgICAgY29uc3QgcGF0aFN0cmluZyA9IHBhdGguc2hhcGUucGF0aDtcclxuICAgICAgLy8gc3dpdGNoIHRvIG5vbi11cGRhdGluZyB2ZXJzaW9uIG9mIHBhdGggYnVpbGRpbmdcclxuICAgICAgcGF0aEFycmF5ID0gW107XHJcbiAgICAgIF9zZXRQYXRoKHBhdGhTdHJpbmcpO1xyXG4gICAgICAvLyBzd2l0Y2ggYmFjayB0byB0aGUgc3RyaW5nIHBhdGhcclxuICAgICAgcGF0aC5zaGFwZS5wYXRoID0gcGF0aEFycmF5LmpvaW4oXCJcIik7XHJcbiAgICAgIHBhdGhBcnJheSA9IG51bGw7XHJcbiAgICAgIC8vIGJlY29tZSBzZWdtZW50ZWRcclxuICAgICAgcGF0aC5zZWdtZW50ZWQgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuICBmdW5jdGlvbiBfc2V0UGF0aChwYXRoU3RyaW5nKSB7XHJcbiAgICBjb25zdCBwID0gcGF0aFN0cmluZy5tYXRjaChwYXRoU3ZnUmVnRXhwKTtcclxuICAgIHBhdGguc2VnbWVudHMgPSBbXTtcclxuICAgIHBhdGguYWJzb2x1dGUgPSB0cnVlO1xyXG4gICAgaWYgKCFwKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIC8vIGNyZWF0ZSBzZWdtZW50c1xyXG4gICAgbGV0IGFjdGlvbjsgLy8gY3VycmVudCBhY3Rpb25cclxuICAgIGxldCBhcmdzID0gW107IC8vIGN1cnJlbnQgYXJndW1lbnRzXHJcbiAgICBjb25zdCBsID0gcC5sZW5ndGg7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGw7IGkrKykge1xyXG4gICAgICBsZXQgdCA9IHBbaV07XHJcbiAgICAgIGNvbnN0IHggPSBwYXJzZUZsb2F0KHQpO1xyXG4gICAgICBpZiAoeCA9PT0gMCAmJiB0ID09PSBcIjAwXCIpIHtcclxuICAgICAgICAvLyBmaXggYSBzcGVjaWFsIGNhc2U6IDAwIGFyZSB0d28gc2VwYXJhdGUgemVyb3NcclxuICAgICAgICB0ID0gXCIwXCI7XHJcbiAgICAgICAgcFtpXSA9IFwiMFwiO1xyXG4gICAgICAgIGktLTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoaXNOYU4oeCkpIHtcclxuICAgICAgICBpZiAoYWN0aW9uKSB7XHJcbiAgICAgICAgICBfcHVzaFNlZ21lbnQoYWN0aW9uLCBhcmdzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYXJncyA9IFtdO1xyXG4gICAgICAgIGFjdGlvbiA9IHQ7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgYXJncy5wdXNoKHgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBfcHVzaFNlZ21lbnQoYWN0aW9uLCBhcmdzKTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogQWRkcyBhIHNlZ21lbnQuXHJcbiAgICovXHJcbiAgZnVuY3Rpb24gX3B1c2hTZWdtZW50KGFjdGlvbiwgYXJncykge1xyXG4gICAgY29uc3QgZ3JvdXAgPSB2YWxpZFNlZ21lbnRzW2FjdGlvbi50b0xvd2VyQ2FzZSgpXTtcclxuICAgIGxldCBzZWdtZW50O1xyXG4gICAgaWYgKHR5cGVvZiBncm91cCA9PT0gXCJudW1iZXJcIikge1xyXG4gICAgICBpZiAoZ3JvdXApIHtcclxuICAgICAgICBpZiAoYXJncy5sZW5ndGggPj0gZ3JvdXApIHtcclxuICAgICAgICAgIHNlZ21lbnQgPSB7IGFjdGlvbiwgYXJnczogYXJncy5zbGljZSgwLCBhcmdzLmxlbmd0aCAtIChhcmdzLmxlbmd0aCAlIGdyb3VwKSkgfTtcclxuICAgICAgICAgIHBhdGguc2VnbWVudHMucHVzaChzZWdtZW50KTtcclxuICAgICAgICAgIF91cGRhdGVXaXRoU2VnbWVudChzZWdtZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgc2VnbWVudCA9IHsgYWN0aW9uLCBhcmdzOiBbXSB9O1xyXG4gICAgICAgIHBhdGguc2VnbWVudHMucHVzaChzZWdtZW50KTtcclxuICAgICAgICBfdXBkYXRlV2l0aFNlZ21lbnQoc2VnbWVudCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogVXBkYXRlcyB0aGUgYm91bmRpbmcgYm94IG9mIHBhdGggd2l0aCBuZXcgc2VnbWVudC5cclxuICAgKi9cclxuICBmdW5jdGlvbiBfdXBkYXRlV2l0aFNlZ21lbnQoc2VnbWVudCkge1xyXG4gICAgLy8gdXBkYXRlIGludGVybmFsIHZhcmlhYmxlczogYWJzb2x1dGUsIGxhc3RcclxuICAgIHN3aXRjaCAoc2VnbWVudC5hY3Rpb24pIHtcclxuICAgICAgY2FzZSBcIk1cIjpcclxuICAgICAgY2FzZSBcIkxcIjpcclxuICAgICAgY2FzZSBcIkhcIjpcclxuICAgICAgY2FzZSBcIlZcIjpcclxuICAgICAgY2FzZSBcIkNcIjpcclxuICAgICAgY2FzZSBcIlNcIjpcclxuICAgICAgY2FzZSBcIlFcIjpcclxuICAgICAgY2FzZSBcIlRcIjpcclxuICAgICAgY2FzZSBcIkFcIjpcclxuICAgICAgICBwYXRoLmFic29sdXRlID0gdHJ1ZTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcIm1cIjpcclxuICAgICAgY2FzZSBcImxcIjpcclxuICAgICAgY2FzZSBcImhcIjpcclxuICAgICAgY2FzZSBcInZcIjpcclxuICAgICAgY2FzZSBcImNcIjpcclxuICAgICAgY2FzZSBcInNcIjpcclxuICAgICAgY2FzZSBcInFcIjpcclxuICAgICAgY2FzZSBcInRcIjpcclxuICAgICAgY2FzZSBcImFcIjpcclxuICAgICAgICBwYXRoLmFic29sdXRlID0gZmFsc2U7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBjb25zdCBuID0gc2VnbWVudC5hcmdzO1xyXG4gICAgY29uc3QgbCA9IG4ubGVuZ3RoO1xyXG4gICAgX2Jib3hDYWxjdWxhdG9yICYmIF9iYm94Q2FsY3VsYXRvci51cGRhdGVCQm94KHNlZ21lbnQpO1xyXG4gICAgbGV0IGk7XHJcbiAgICAvLyBhZGQgYW4gU1ZHIHBhdGggc2VnbWVudFxyXG4gICAgaWYgKHBhdGhBcnJheSkge1xyXG4gICAgICBwYXRoQXJyYXkucHVzaChzZWdtZW50LmFjdGlvbik7XHJcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBsOyArK2kpIHtcclxuICAgICAgICBwYXRoQXJyYXkucHVzaChfZm9ybWF0TnVtYmVyKG5baV0sIHRydWUpKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHBhdGguc2hhcGUucGF0aCArPSBzZWdtZW50LmFjdGlvbjtcclxuICAgICAgZm9yIChpID0gMDsgaSA8IGw7ICsraSkge1xyXG4gICAgICAgIHBhdGguc2hhcGUucGF0aCArPSBfZm9ybWF0TnVtYmVyKG5baV0sIHRydWUpO1xyXG4gICAgICB9XHJcbiAgICAgIHBhdGguc2V0QXR0cmlidXRlKFwiZFwiLCBwYXRoLnNoYXBlLnBhdGgpO1xyXG4gICAgfVxyXG4gIH1cclxuICBmdW5jdGlvbiBfZm9ybWF0TnVtYmVyKHgsIGFkZFNwYWNlKSB7XHJcbiAgICByZXR1cm4geCA+PSAwICYmIGFkZFNwYWNlID8gXCIgXCIgKyB4IDogeCArIFwiXCI7XHJcbiAgfVxyXG4gIGxldCBfYmJveENhbGN1bGF0b3I7XHJcbiAgcGF0aC5nZXRCb3VuZGluZ0JveCA9ICgpID0+IHtcclxuICAgIF9iYm94Q2FsY3VsYXRvciA9IGdldEJCb3hDYWxjdWxhdG9yKCk7XHJcbiAgICBwYXRoLnNlZ21lbnRlZCA9IGZhbHNlO1xyXG4gICAgX2NvbmZpcm1TZWdtZW50ZWQoKTsgLy8gbGV0IGl0IHJlY2FsY3VsYXRlIHRoZSBlbnRpcmUgcGF0aCB3aXRoIHVwZGF0aW5nIHRoZSBiYm94IHRoaXMgdGltZVxyXG4gICAgY29uc3Qgc0Jib3ggPSBfYmJveENhbGN1bGF0b3IuZ2V0QkJveCgpO1xyXG4gICAgX2Jib3hDYWxjdWxhdG9yID0gbnVsbDtcclxuICAgIHJldHVybiBzQmJveFxyXG4gICAgICA/IHtcclxuICAgICAgICB4OiBzQmJveC5sLFxyXG4gICAgICAgIHk6IHNCYm94LnQsXHJcbiAgICAgICAgdzogc0Jib3guciAtIHNCYm94LmwsXHJcbiAgICAgICAgaDogc0Jib3guYiAtIHNCYm94LnRcclxuICAgICAgfVxyXG4gICAgICA6IHtcclxuICAgICAgICB4OiBOYU4sXHJcbiAgICAgICAgeTogTmFOLFxyXG4gICAgICAgIHc6IE5hTixcclxuICAgICAgICBoOiBOYU5cclxuICAgICAgfTtcclxuICB9O1xyXG4gIHJldHVybiBwYXRoO1xyXG59XHJcbmZ1bmN0aW9uIF9jcmVhdGVHRlhUZXh0KCkge1xyXG4gIGNvbnN0IHRleHQgPSB7fTtcclxuICBfY3JlYXRlR0ZYU2hhcGUodGV4dCk7XHJcbiAgdGV4dC5zaGFwZSA9IG1peGluKHt9LCBHRlhfREVGQVVMVFMuZGVmYXVsdFRleHQpO1xyXG4gIHRleHQuX3NldFNoYXBlID0gKG5ld1NoYXBlKSA9PiB7XHJcbiAgICB0ZXh0LnNoYXBlID0gbWl4aW4oe30sIHRleHQuc2hhcGUsIG5ld1NoYXBlKTtcclxuICAgIGNvbnN0IHMgPSB0ZXh0LnNoYXBlO1xyXG4gICAgdGV4dC5zZXRBdHRyaWJ1dGUoXCJ4XCIsIHMueCArIFwiXCIpO1xyXG4gICAgdGV4dC5zZXRBdHRyaWJ1dGUoXCJ5XCIsIHMueSArIFwiXCIpO1xyXG4gICAgdGV4dC5zZXRBdHRyaWJ1dGUoXCJ0ZXh0LWFuY2hvclwiLCBzLmFsaWduKTtcclxuICAgIHRleHQuc2V0QXR0cmlidXRlKFwidGV4dC1kZWNvcmF0aW9uXCIsIHMuZGVjb3JhdGlvbik7XHJcbiAgICB0ZXh0LnNldEF0dHJpYnV0ZShcInJvdGF0ZVwiLCBzLnJvdGF0ZWQgPyBcIjkwXCIgOiBcIjBcIik7XHJcbiAgICB0ZXh0LnNldEF0dHJpYnV0ZShcImtlcm5pbmdcIiwgcy5rZXJuaW5nID8gXCJhdXRvXCIgOiBcIjBcIik7XHJcbiAgICB0ZXh0LnNldEF0dHJpYnV0ZShcInRleHQtcmVuZGVyaW5nXCIsIFwiYXV0b1wiKTtcclxuICAgIC8vIHVwZGF0ZSB0aGUgdGV4dCBjb250ZW50XHJcbiAgICB0ZXh0Ll9zZXRUZXh0KHMudGV4dCk7XHJcbiAgICByZXR1cm4gdGV4dDtcclxuICB9O1xyXG4gIHRleHQuc2V0Rm9udCA9IChuZXdGb250KSA9PiB7XHJcbiAgICB0ZXh0LmZvbnQgPSBuZXdGb250O1xyXG4gICAgdGV4dC5zZXRBdHRyaWJ1dGUoXCJmb250LXN0eWxlXCIsIG5ld0ZvbnQuZm9udFN0eWxlIHx8IFwibm9ybWFsXCIpO1xyXG4gICAgLy90ZXh0LnNldEF0dHJpYnV0ZShcImZvbnQtdmFyaWFudFwiLCBmLnZhcmlhbnQpO1xyXG4gICAgdGV4dC5zZXRBdHRyaWJ1dGUoXCJmb250LXdlaWdodFwiLCBuZXdGb250LmZvbnRXZWlnaHQgfHwgXCJub3JtYWxcIik7XHJcbiAgICB0ZXh0LnNldEF0dHJpYnV0ZShcImZvbnQtc2l6ZVwiLCAobmV3Rm9udC5mb250U2l6ZSB8fCAwKSArIFwicHhcIik7XHJcbiAgICB0ZXh0LnNldEF0dHJpYnV0ZShcImZvbnQtZmFtaWx5XCIsIG5ld0ZvbnQuZm9udEZhbWlseSB8fCBcIlZlcmRhbmFcIik7XHJcbiAgICByZXR1cm4gdGV4dDtcclxuICB9O1xyXG4gIHRleHQuZ2V0Qm91bmRpbmdCb3ggPSAoKSA9PiBudWxsOyAvLyBub3Qgc3VwcG9ydGVkIChuZWVkIHRvIG1lYXN1cmUgdGhlIHRleHQgdXNpbmcgdGhlIGJyb3dzZXIpXHJcbiAgcmV0dXJuIHRleHQ7XHJcbn1cclxuZnVuY3Rpb24gX2NyZWF0ZUdGWEltYWdlKCkge1xyXG4gIGNvbnN0IGltYWdlID0ge307XHJcbiAgX2NyZWF0ZUdGWFNoYXBlKGltYWdlKTtcclxuICBpbWFnZS5zaGFwZSA9IG1peGluKHt9LCBHRlhfREVGQVVMVFMuZGVmYXVsdEltYWdlKTtcclxuICBpbWFnZS5fc2V0U2hhcGUgPSAobmV3U2hhcGUpID0+IHtcclxuICAgIGltYWdlLnNoYXBlID0gbWl4aW4oe30sIGltYWdlLnNoYXBlLCBuZXdTaGFwZSk7XHJcbiAgICBmb3IgKGNvbnN0IGkgaW4gaW1hZ2Uuc2hhcGUpIHtcclxuICAgICAgaWYgKGkgIT09IFwidHlwZVwiICYmIGkgIT09IFwic3JjXCIpIHtcclxuICAgICAgICBsZXQgdiA9IGltYWdlLnNoYXBlW2ldO1xyXG4gICAgICAgIGlmIChpID09PSBcIndcIiB8fCBpID09PSBcImhcIikge1xyXG4gICAgICAgICAgdiA9IHYgPCAwID8gMCA6IHY7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGltYWdlLnNldEF0dHJpYnV0ZShfdG9BdHRyTmFtZShpKSwgdik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGltYWdlLnNldEF0dHJpYnV0ZShcInByZXNlcnZlQXNwZWN0UmF0aW9cIiwgXCJub25lXCIpO1xyXG4gICAgaW1hZ2UuX3NldEF0dHJpYnV0ZU5TKHhtbG5zLnhsaW5rLCBcInhsaW5rOmhyZWZcIiwgaW1hZ2Uuc2hhcGUuc3JjKTtcclxuICAgIHJldHVybiBpbWFnZTtcclxuICB9O1xyXG4gIGltYWdlLmdldEJvdW5kaW5nQm94ID0gKCkgPT4gaW1hZ2Uuc2hhcGUgLyogYWxsIHByb3BlcnRpZXMgYXJlIGVuc3VyZWQgdXBvbiBpbml0aWFsaXphdGlvbiwgdGhlIGRlZmF1bHQgb25lcyB3ZXJlIG1peGVkIGluICovO1xyXG4gIHJldHVybiBpbWFnZTtcclxufVxyXG5mdW5jdGlvbiBfY3JlYXRlR0ZYQ29udGFpbmVyKHNvdXJjZSwgaXNTdXJmYWNlID0gZmFsc2UpIHtcclxuICBjb25zdCBjb250YWluZXIgPSBzb3VyY2UgfHwge307XHJcbiAgY29udGFpbmVyLmNoaWxkcmVuID0gW107XHJcbiAgbGV0IF9iYXRjaCA9IDA7XHJcbiAgbGV0IF9mcmFnbWVudDtcclxuICBjb250YWluZXIub3BlbkJhdGNoID0gKCkgPT4ge1xyXG4gICAgaWYgKCFfYmF0Y2ggJiZcclxuICAgICAgY29udGFpbmVyLnJhd05vZGUgLyogb3RoZXJ3aXNlIGJhdGNoaW5nIGRvZXNuJ3QgbWFrZSBzZW5jZSwgc2luY2Ugd2UgYXJlIHdvcmtpbmcgaW4gdGhlIERPTSBKU09OIG1vZGUgKi8pIHtcclxuICAgICAgX2ZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG4gICAgfVxyXG4gICAgKytfYmF0Y2g7XHJcbiAgICByZXR1cm4gY29udGFpbmVyO1xyXG4gIH07XHJcbiAgY29udGFpbmVyLmNsb3NlQmF0Y2ggPSAoKSA9PiB7XHJcbiAgICBfYmF0Y2ggPSBfYmF0Y2ggPiAwID8gLS1fYmF0Y2ggOiAwO1xyXG4gICAgaWYgKF9mcmFnbWVudCAmJiAhX2JhdGNoKSB7XHJcbiAgICAgIC8vIElmIF9mcmFnbWVudCB3YXMgY3JlYXRlZCwgaXQgbWVhbnMgd2UgaGF2ZSByYXdOb2RlLlxyXG4gICAgICAvLyBUaGVyZSBpcyBubyBuZWVkIHRvIHVwZGF0ZSBfcmF3Tm9kZSwgYmVjYXVzZSBpdCB3YXMgZG9uZSBpbiB0aGUgYWRkKCkgbWV0aG9kLlxyXG4gICAgICBjb250YWluZXIucmF3Tm9kZS5hcHBlbmRDaGlsZChfZnJhZ21lbnQpO1xyXG4gICAgICBfZnJhZ21lbnQgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNvbnRhaW5lcjtcclxuICB9O1xyXG4gIGNvbnRhaW5lci5hZGQgPSAoc2hhcGUpID0+IHtcclxuICAgIGlmIChzaGFwZS5wYXJlbnQpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHNoYXBlIGlzIGFscmVhZHkgYWRkZWQuXCIpO1xyXG4gICAgfVxyXG4gICAgaWYgKF9mcmFnbWVudCkge1xyXG4gICAgICAvLyBET01cclxuICAgICAgLy8gYmF0Y2ggbW9kZVxyXG4gICAgICBfZnJhZ21lbnQuYXBwZW5kQ2hpbGQoc2hhcGUucmF3Tm9kZSk7XHJcbiAgICAgIGNvbnRhaW5lci5fYXBwZW5kUmF3Tm9kZUNoaWxkKHNoYXBlLCB0cnVlIC8qIG5vIGRvbSAqLyk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgY29udGFpbmVyLl9hcHBlbmRSYXdOb2RlQ2hpbGQoc2hhcGUsIGZhbHNlKTtcclxuICAgIH1cclxuICAgIGNvbnRhaW5lci5jaGlsZHJlbi5wdXNoKHNoYXBlKTtcclxuICAgIHNoYXBlLnBhcmVudCA9IGNvbnRhaW5lcjtcclxuICAgIC8vIHVwZGF0ZSBjbGlwbm9kZSB3aXRoIG5ldyBwYXJlbnRcclxuICAgIHNoYXBlLnNldENsaXAoc2hhcGUuY2xpcCk7XHJcbiAgICByZXR1cm4gY29udGFpbmVyO1xyXG4gIH07XHJcbiAgY29udGFpbmVyLnJlbW92ZSA9IChzaGFwZSkgPT4ge1xyXG4gICAgaWYgKHNoYXBlLnBhcmVudCAhPT0gY29udGFpbmVyKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlNoYXBlIGRvZXNuJ3QgYmVsb25nIHRvIHRoaXMgcGFyZW50LlwiKTtcclxuICAgIH1cclxuICAgIC8vIHJlbW92aW5nIGVpdGhlciBhIGJhdGNoZWQgY2hpbGQgb3IgdGhlIG9uZSBhZGRlZCBiZWZvcmVcclxuICAgIGNvbnRhaW5lci5fcmVtb3ZlUmF3Tm9kZUNoaWxkKHNoYXBlKTtcclxuICAgIC8vIERPTVxyXG4gICAgLy8gYmF0Y2ggbW9kZVxyXG4gICAgaWYgKF9mcmFnbWVudCAmJiBfZnJhZ21lbnQgPT09IHNoYXBlLnJhd05vZGUucGFyZW50Tm9kZSkge1xyXG4gICAgICBfZnJhZ21lbnQucmVtb3ZlQ2hpbGQoc2hhcGUucmF3Tm9kZSk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBpbmRleCA9IGNvbnRhaW5lci5jaGlsZHJlbi5pbmRleE9mKHNoYXBlKTtcclxuICAgIGluZGV4ICE9PSAtMSAmJiBjb250YWluZXIuY2hpbGRyZW4uc3BsaWNlKGluZGV4LCAxKTtcclxuICAgIHNoYXBlLnBhcmVudCA9IG51bGw7XHJcbiAgICByZXR1cm4gY29udGFpbmVyO1xyXG4gIH07XHJcbiAgY29udGFpbmVyLmNsZWFyID0gKGRlc3Ryb3kpID0+IHtcclxuICAgIGNvbnRhaW5lci5fZW1wdHJ5UmF3Tm9kZSgpO1xyXG4gICAgLy8gcmVzdG9yZSB0aGUgZGVmcyBub2RlXHJcbiAgICBpc1N1cmZhY2UgJiYgY29udGFpbmVyLl9jcmVhdGVEZWZzTm9kZSgpO1xyXG4gICAgbGV0IHNoYXBlO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb250YWluZXIuY2hpbGRyZW4ubGVuZ3RoOyArK2kpIHtcclxuICAgICAgc2hhcGUgPSBjb250YWluZXIuY2hpbGRyZW5baV07XHJcbiAgICAgIHNoYXBlLnBhcmVudCA9IG51bGw7XHJcbiAgICAgIGRlc3Ryb3kgJiYgc2hhcGUuX2Rlc3Ryb3koKTtcclxuICAgIH1cclxuICAgIGNvbnRhaW5lci5jaGlsZHJlbiA9IFtdO1xyXG4gICAgcmV0dXJuIGNvbnRhaW5lcjtcclxuICB9O1xyXG4gIGNvbnRhaW5lci5nZXRCb3VuZGluZ0JveCA9ICgpID0+IHtcclxuICAgIGlmICghY29udGFpbmVyLmNoaWxkcmVuIHx8ICFjb250YWluZXIuY2hpbGRyZW4ubGVuZ3RoKSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgLy8gaWYgdGhpcyBpcyBhIGNvbXBvc2l0ZSBzaGFwZSwgdGhlbiBzdW0gdXAgYWxsIHRoZSBjaGlsZHJlblxyXG4gICAgbGV0IHJlc3VsdCA9IG51bGw7XHJcbiAgICBjb250YWluZXIuY2hpbGRyZW4uZm9yRWFjaCgoc2hhcGUpID0+IHtcclxuICAgICAgbGV0IGJiID0gc2hhcGUuZ2V0Qm91bmRpbmdCb3goKTtcclxuICAgICAgaWYgKCFiYikge1xyXG4gICAgICAgIHJldHVybjsgLy8gbm90IHN1cHBvcnRlZCBvciBlbXB0eVxyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IGN0ID0gc2hhcGUubWF0cml4O1xyXG4gICAgICBpZiAoY3QpIHtcclxuICAgICAgICBiYiA9IGdmeE1hdHJpeEJ1aWxkZXIubXVsdGlwbHlSZWN0YW5nbGUoY3QsIGJiKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgICAgLy8gbWVyZ2UgdHdvIGJib3hcclxuICAgICAgICByZXN1bHQueCA9IE1hdGgubWluKHJlc3VsdC54LCBiYi54KTtcclxuICAgICAgICByZXN1bHQueSA9IE1hdGgubWluKHJlc3VsdC55LCBiYi55KTtcclxuICAgICAgICByZXN1bHQuZW5kWCA9IE1hdGgubWF4KHJlc3VsdC5lbmRYLCBiYi54ICsgYmIudyk7XHJcbiAgICAgICAgcmVzdWx0LmVuZFkgPSBNYXRoLm1heChyZXN1bHQuZW5kWSwgYmIueSArIGJiLmgpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIC8vIGZpcnN0IGJib3hcclxuICAgICAgICByZXN1bHQgPSB7XHJcbiAgICAgICAgICB4OiBiYi54LFxyXG4gICAgICAgICAgeTogYmIueSxcclxuICAgICAgICAgIGVuZFg6IGJiLnggKyBiYi53LFxyXG4gICAgICAgICAgZW5kWTogYmIueSArIGJiLmgsXHJcbiAgICAgICAgICB3OiBudWxsLFxyXG4gICAgICAgICAgaDogbnVsbFxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgaWYgKHJlc3VsdCkge1xyXG4gICAgICByZXN1bHQudyA9IHJlc3VsdC5lbmRYIC0gcmVzdWx0Lng7XHJcbiAgICAgIHJlc3VsdC5oID0gcmVzdWx0LmVuZFkgLSByZXN1bHQueTtcclxuICAgIH1cclxuICAgIC8vIGNsZWFuIHVwXHJcbiAgICByZXN1bHQuZW5kWCA9IHVuZGVmaW5lZDtcclxuICAgIHJlc3VsdC5lbmRZID0gdW5kZWZpbmVkO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9O1xyXG4gIHJldHVybiBjb250YWluZXI7XHJcbn1cclxuZnVuY3Rpb24gX2NyZWF0ZUdGWENyZWF0b3Ioc291cmNlLCBpc1N1cmZhY2UgPSBmYWxzZSkge1xyXG4gIGNvbnN0IGNyZWF0b3IgPSBzb3VyY2UgfHwge307XHJcbiAgX2NyZWF0ZUdGWENvbnRhaW5lcihjcmVhdG9yLCBpc1N1cmZhY2UpO1xyXG4gIGNyZWF0b3IuY3JlYXRlR3JvdXAgPSAoKSA9PiBfcHJvY2Vzc09iamVjdChfY3JlYXRlR0ZYR3JvdXAoKSwgXCJnXCIpO1xyXG4gIGNyZWF0b3IuY3JlYXRlUmVjdCA9IChvcHRpb25zKSA9PiBfcHJvY2Vzc09iamVjdChfY3JlYXRlR0ZYUmVjdCgpLCBcInJlY3RcIiwgb3B0aW9ucyk7XHJcbiAgY3JlYXRvci5jcmVhdGVMaW5lID0gKG9wdGlvbnMpID0+IF9wcm9jZXNzT2JqZWN0KF9jcmVhdGVHRlhMaW5lKCksIFwibGluZVwiLCBvcHRpb25zKTtcclxuICBjcmVhdG9yLmNyZWF0ZUNpcmNsZSA9IChvcHRpb25zKSA9PiBfcHJvY2Vzc09iamVjdChfY3JlYXRlR0ZYQ2lyY2xlKCksIFwiY2lyY2xlXCIsIG9wdGlvbnMpO1xyXG4gIGNyZWF0b3IuY3JlYXRlRWxsaXBzZSA9IChvcHRpb25zKSA9PiBfcHJvY2Vzc09iamVjdChfY3JlYXRlR0ZYRWxsaXBzZSgpLCBcImVsbGlwc2VcIiwgb3B0aW9ucyk7XHJcbiAgY3JlYXRvci5jcmVhdGVQYXRoID0gKG9wdGlvbnMpID0+IF9wcm9jZXNzT2JqZWN0KF9jcmVhdGVHRlhQYXRoKCksIFwicGF0aFwiLCBvcHRpb25zKTtcclxuICBjcmVhdG9yLmNyZWF0ZVBvbHlsaW5lID0gKG9wdGlvbnMpID0+IF9wcm9jZXNzT2JqZWN0KF9jcmVhdGVHRlhQb2x5bGluZSgpLCBcInBvbHlsaW5lXCIsIG9wdGlvbnMpO1xyXG4gIGNyZWF0b3IuY3JlYXRlUG9seWdvbiA9IChvcHRpb25zKSA9PiBfcHJvY2Vzc09iamVjdChfY3JlYXRlR0ZYUG9seWdvbigpLCBcInBvbHlnb25cIiwgb3B0aW9ucyk7XHJcbiAgY3JlYXRvci5jcmVhdGVUZXh0ID0gKG9wdGlvbnMpID0+IF9wcm9jZXNzT2JqZWN0KF9jcmVhdGVHRlhUZXh0KCksIFwidGV4dFwiLCBvcHRpb25zKTtcclxuICBjcmVhdG9yLmNyZWF0ZUltYWdlID0gKG9wdGlvbnMpID0+IF9wcm9jZXNzT2JqZWN0KF9jcmVhdGVHRlhJbWFnZSgpLCBcImltYWdlXCIsIG9wdGlvbnMpO1xyXG4gIGNyZWF0b3IuY3JlYXRlU2hhcGUgPSAoc2hhcGUpID0+IHtcclxuICAgIHN3aXRjaCAoc2hhcGUudHlwZSkge1xyXG4gICAgICBjYXNlIEdGWF9ERUZBVUxUUy5kZWZhdWx0UGF0aC50eXBlOlxyXG4gICAgICAgIHJldHVybiBjcmVhdG9yLmNyZWF0ZVBhdGgoc2hhcGUpO1xyXG4gICAgICBjYXNlIEdGWF9ERUZBVUxUUy5kZWZhdWx0UmVjdC50eXBlOlxyXG4gICAgICAgIHJldHVybiBjcmVhdG9yLmNyZWF0ZVJlY3Qoc2hhcGUpO1xyXG4gICAgICBjYXNlIEdGWF9ERUZBVUxUUy5kZWZhdWx0TGluZS50eXBlOlxyXG4gICAgICAgIHJldHVybiBjcmVhdG9yLmNyZWF0ZUxpbmUoc2hhcGUpO1xyXG4gICAgICBjYXNlIEdGWF9ERUZBVUxUUy5kZWZhdWx0Q2lyY2xlLnR5cGU6XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0b3IuY3JlYXRlQ2lyY2xlKHNoYXBlKTtcclxuICAgICAgY2FzZSBHRlhfREVGQVVMVFMuZGVmYXVsdEVsbGlwc2UudHlwZTpcclxuICAgICAgICByZXR1cm4gY3JlYXRvci5jcmVhdGVFbGxpcHNlKHNoYXBlKTtcclxuICAgICAgY2FzZSBHRlhfREVGQVVMVFMuZGVmYXVsdFBvbHlsaW5lLnR5cGU6XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0b3IuY3JlYXRlUG9seWxpbmUoc2hhcGUpO1xyXG4gICAgICBjYXNlIEdGWF9ERUZBVUxUUy5kZWZhdWx0UG9seWdvbi50eXBlOlxyXG4gICAgICAgIHJldHVybiBjcmVhdG9yLmNyZWF0ZVBvbHlnb24oc2hhcGUpO1xyXG4gICAgICBjYXNlIEdGWF9ERUZBVUxUUy5kZWZhdWx0SW1hZ2UudHlwZTpcclxuICAgICAgICByZXR1cm4gY3JlYXRvci5jcmVhdGVJbWFnZShzaGFwZSk7XHJcbiAgICAgIGNhc2UgR0ZYX0RFRkFVTFRTLmRlZmF1bHRUZXh0LnR5cGU6XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0b3IuY3JlYXRlVGV4dChzaGFwZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9O1xyXG4gIGZ1bmN0aW9uIF9wcm9jZXNzT2JqZWN0KHNoYXBlLCBub2RlVHlwZSwgcmF3U2hhcGUpIHtcclxuICAgIGlmICghY3JlYXRvci5fcmF3Tm9kZSAmJiAhY3JlYXRvci5yYXdOb2RlKSB7XHJcbiAgICAgIHJldHVybiBudWxsOyAvLyBkZXN0cm95ZWRcclxuICAgIH1cclxuICAgIHNoYXBlLl9zZXRSYXdOb2RlKHhtbG5zLnN2Zywgbm9kZVR5cGUsICEhY3JlYXRvci5yYXdOb2RlKTtcclxuICAgIHNoYXBlLl9zZXRTaGFwZShyYXdTaGFwZSk7XHJcbiAgICBjcmVhdG9yLmFkZChzaGFwZSk7XHJcbiAgICByZXR1cm4gc2hhcGU7XHJcbiAgfVxyXG4gIHJldHVybiBjcmVhdG9yO1xyXG59XHJcbmZ1bmN0aW9uIF9jcmVhdGVHRlhTdXJmYWNlKCkge1xyXG4gIGNvbnN0IHN1cmZhY2UgPSB7fTtcclxuICBzdXJmYWNlLmlzU3VyZmFjZSA9IHRydWU7XHJcbiAgX2NyZWF0ZVJhd05vZGVTdXBwb3J0KHN1cmZhY2UpO1xyXG4gIF9jcmVhdGVHRlhDcmVhdG9yKHN1cmZhY2UsIHRydWUpO1xyXG4gIHN1cmZhY2Uuc2V0RGltZW5zaW9ucyA9ICh3aWR0aCwgaGVpZ2h0KSA9PiB7XHJcbiAgICBpZiAoIXN1cmZhY2UuX3Jhd05vZGUgJiYgIXN1cmZhY2UucmF3Tm9kZSkge1xyXG4gICAgICByZXR1cm4gc3VyZmFjZTsgLy8gZGVzdHJveWVkXHJcbiAgICB9XHJcbiAgICBsZXQgdyA9IHdpZHRoIDwgMCA/IDAgOiB3aWR0aCwgaCA9IGhlaWdodCA8IDAgPyAwIDogaGVpZ2h0O1xyXG4gICAgaWYgKHN1cmZhY2Uucm91bmREaW1lbnNpb25zKSB7XHJcbiAgICAgIHcgPSBNYXRoLnJvdW5kKHcgKiAyKSAvIDI7XHJcbiAgICAgIGggPSBNYXRoLnJvdW5kKGggKiAyKSAvIDI7XHJcbiAgICB9XHJcbiAgICBzdXJmYWNlLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsIHcgKyBcIlwiKTtcclxuICAgIHN1cmZhY2Uuc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsIGggKyBcIlwiKTtcclxuICAgIHJldHVybiBzdXJmYWNlO1xyXG4gIH07XHJcbiAgc3VyZmFjZS5nZXREaW1lbnNpb25zID0gKCkgPT4gKHtcclxuICAgIHc6IHBhcnNlRmxvYXQoc3VyZmFjZS5nZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiKSksXHJcbiAgICBoOiBwYXJzZUZsb2F0KHN1cmZhY2UuZ2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIpKVxyXG4gIH0pO1xyXG4gIHN1cmZhY2UuZ2V0Q29udGVudEJvdW5kaW5nQm94SW5WaWV3UG9ydCA9ICgpID0+IHtcclxuICAgIGNvbnN0IHNkID0gc3VyZmFjZS5nZXREaW1lbnNpb25zKCk7XHJcbiAgICBjb25zdCB2aWV3Qm94ID0gdmlld0JveEZyb21TdHJpbmcoc3VyZmFjZS5nZXRBdHRyaWJ1dGUoXCJ2aWV3Qm94XCIpLCBzZC53LCBzZC5oKTtcclxuICAgIHJldHVybiBnZXRCb3VuZGluZ0JveEluVmlld1BvcnQoc2QsIHN1cmZhY2UuZ2V0Qm91bmRpbmdCb3goKSwgdmlld0JveCwgc3VyZmFjZS5nZXRBdHRyaWJ1dGUoXCJwcmVzZXJ2ZUFzcGVjdFJhdGlvXCIpKTtcclxuICB9O1xyXG4gIHN1cmZhY2UuX3JlbmRlciA9ICgpID0+IHtcclxuICAgIGlmIChzdXJmYWNlLnJhd05vZGUpIHtcclxuICAgICAgcmV0dXJuOyAvLyBhbHJlYWR5IHJlbmRlcmVkXHJcbiAgICB9XHJcbiAgICBjb25zdCByZW5kZXJQYXJlbnQgPSBzdXJmYWNlLl9wYXJlbnQgfHwgZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTsgLy8gaWYgdGhlcmUgaXMgbm8gcGFyZW50IHlldCwgcmVuZGVyIG9mZiBzY3JlZW5cclxuICAgIHJlbmRlclBhcmVudC5pbm5lckhUTUwgPSBzdXJmYWNlLl9nZXRIVE1MU3RyaW5nKCk7XHJcbiAgICBzdXJmYWNlLl9hc3NpZ25SYXdOb2RlKHJlbmRlclBhcmVudC5jaGlsZHJlblswXSk7XHJcbiAgfTtcclxuICAvLyBvdmVycmlkZVxyXG4gIGNvbnN0IF9hc3NpZ25SYXdOb2RlQmFzZSA9IHN1cmZhY2UuX2Fzc2lnblJhd05vZGU7XHJcbiAgc3VyZmFjZS5fYXNzaWduUmF3Tm9kZSA9IChub2RlKSA9PiB7XHJcbiAgICBfYXNzaWduUmF3Tm9kZUJhc2Uobm9kZSk7XHJcbiAgICBmdW5jdGlvbiBfYXNzaWduUmF3Tm9kZXMoY29udGFpbmVyKSB7XHJcbiAgICAgIGxldCBpbmRleCA9IDA7XHJcbiAgICAgIGNvbnRhaW5lci5jaGlsZHJlbi5mb3JFYWNoKChjKSA9PiB7XHJcbiAgICAgICAgbGV0IHJhd0NoaWxkID0gY29udGFpbmVyLnJhd05vZGUuY2hpbGRyZW5baW5kZXhdO1xyXG4gICAgICAgIHdoaWxlIChyYXdDaGlsZC5ub2RlTmFtZSA9PT0gXCJkZWZzXCIgfHwgcmF3Q2hpbGQubm9kZU5hbWUgPT09IFwiY2xpcFBhdGhcIikge1xyXG4gICAgICAgICAgcmF3Q2hpbGQgPSBjb250YWluZXIucmF3Tm9kZS5jaGlsZHJlblsrK2luZGV4XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW5kZXgrKztcclxuICAgICAgICBjLl9hc3NpZ25SYXdOb2RlKHJhd0NoaWxkKTtcclxuICAgICAgICBjLmNoaWxkcmVuICYmIF9hc3NpZ25SYXdOb2RlcyhjKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBfYXNzaWduUmF3Tm9kZXMoc3VyZmFjZSk7XHJcbiAgfTtcclxuICBzdXJmYWNlLmRlc3Ryb3kgPSAoKSA9PiB7XHJcbiAgICBzdXJmYWNlLl9kZXN0cm95UmF3Tm9kZSgpO1xyXG4gICAgaWYgKHN1cmZhY2UuX3BhcmVudCkge1xyXG4gICAgICBzdXJmYWNlLl9wYXJlbnQuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgc3VyZmFjZS5fcGFyZW50ID0gbnVsbDtcclxuICAgIH1cclxuICB9O1xyXG4gIHJldHVybiBzdXJmYWNlO1xyXG59XHJcbi8qKlxyXG4gKiBAcGFyYW0gcGFyZW50Tm9kZSBJZiBwYXNzZWQsIHRoZSBsaWJyYXJ5IHdpbGwgd29yayBvbiBsaXZlIERPTSBub2Rlcywgb3RoZXJ3aXNlLCBkZWZlcnJlZCByZW5kZXJpbmcgY2FuIGJlIHVzZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVHRlhTdXJmYWNlKHBhcmVudE5vZGUsIHdpZHRoLCBoZWlnaHQsIHJvdW5kRGltZW5zaW9ucykge1xyXG4gIGNvbnN0IHMgPSBfY3JlYXRlR0ZYU3VyZmFjZSgpO1xyXG4gIHMucm91bmREaW1lbnNpb25zID0gcm91bmREaW1lbnNpb25zO1xyXG4gIHMuX3NldFJhd05vZGUoeG1sbnMuc3ZnLCBcInN2Z1wiLCAhIXBhcmVudE5vZGUpO1xyXG4gIHMuc2V0QXR0cmlidXRlKFwib3ZlcmZsb3dcIiwgXCJoaWRkZW5cIik7XHJcbiAgcy5zZXREaW1lbnNpb25zKHdpZHRoLCBoZWlnaHQpO1xyXG4gIHMuc2V0U3R5bGUoe1xyXG4gICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcclxuICAgIGxlZnQ6IDAsXHJcbiAgICB0b3A6IDBcclxuICB9KTtcclxuICBzLl9jcmVhdGVEZWZzTm9kZSgpO1xyXG4gIGlmIChwYXJlbnROb2RlKSB7XHJcbiAgICBzLl9wYXJlbnQgPSBwYXJlbnROb2RlO1xyXG4gICAgcGFyZW50Tm9kZS5hcHBlbmRDaGlsZChzLnJhd05vZGUpO1xyXG4gIH1cclxuICByZXR1cm4gcztcclxufVxyXG5mdW5jdGlvbiBfY3JlYXRlR0ZYR3JvdXAoKSB7XHJcbiAgY29uc3QgZ3JvdXAgPSB7fTtcclxuICBfY3JlYXRlR0ZYU2hhcGUoZ3JvdXAsIHRydWUpO1xyXG4gIF9jcmVhdGVHRlhDcmVhdG9yKGdyb3VwKTtcclxuICBncm91cC5fZGVzdHJveSA9ICgpID0+IHtcclxuICAgIGdyb3VwLmNsZWFyKHRydWUpO1xyXG4gICAgZ3JvdXAuX2Rlc3Ryb3lSYXdOb2RlKCk7XHJcbiAgfTtcclxuICByZXR1cm4gZ3JvdXA7XHJcbn1cblxuY29uc3QgREVGQVVMVF9QT1NJVElPTiA9IFtcImFmdGVyLWNlbnRlcmVkXCIsIFwiYmVmb3JlLWNlbnRlcmVkXCJdO1xyXG5sZXQgVG9vbHRpcCA9IGNsYXNzIFRvb2x0aXAgZXh0ZW5kcyBUZW1wbGF0ZWRXaWRnZXQge1xyXG4gIGNvbnN0cnVjdG9yKHBhcmFtcywgcmVmTm9kZSwgcG9zaXRpb24pIHtcclxuICAgIHN1cGVyKHBhcmFtcywgcmVmTm9kZSwgcG9zaXRpb24pO1xyXG4gICAgdGhpcy5fdGVtcGxhdGVTdHJpbmcgPSBgXHJcbiAgPGRpdiBjbGFzcz0nZXNyaTRHRVRvb2x0aXAgZXNyaTRHRVRvb2x0aXBMZWZ0Jz5cclxuICAgIDxkaXYgY2xhc3M9J2Vzcmk0R0VUb29sdGlwQ29udGFpbmVyIGVzcmk0R0VUb29sdGlwQ29udGVudHMnIGRhdGEtYXR0YWNoLXBvaW50PSdfY29udGFpbmVyTm9kZSc+PC9kaXY+XHJcbiAgICA8ZGl2IGNsYXNzPSdlc3JpNEdFVG9vbHRpcENvbm5lY3RvcicgZGF0YS1hdHRhY2gtcG9pbnQ9J19jb25uZWN0b3JOb2RlJz48L2Rpdj5cclxuICA8L2Rpdj5gO1xyXG4gICAgLyoqXHJcbiAgICAgKiBTaG93IGR1cmFjdGlvbi4gSW4gbWlsbGlzZWNvbmRzLlxyXG4gICAgICovXHJcbiAgICB0aGlzLmR1cmF0aW9uID0gMjAwO1xyXG4gIH1cclxuICBwb3N0Q3JlYXRlKCkge1xyXG4gICAgcGxhY2UodGhpcy5kb21Ob2RlLCBkb2N1bWVudC5ib2R5KTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogU2hvd3MgYSB0b29sdGlwIHdpdGggdGhlIHNwZWNpZmllZCBjb250ZW50LlxyXG4gICAqIEBwYXJhbSB0ZXh0T3JOb2RlT3JXaWRnZXQgICAgIFRvb2x0aXAgY29udGVudC5cclxuICAgKiBAcGFyYW0gYXJvdW5kTm9kZSAgICAgICAgICAgIERvbSBub2RlLlxyXG4gICAqIEBwYXJhbSBwb3NpdGlvbiAgICAgICAgICAgICAgU3RyaW5nW10uXHJcbiAgICovXHJcbiAgc2hvdyh0ZXh0T3JOb2RlT3JXaWRnZXQsIGFyb3VuZE5vZGUsIHBvc2l0aW9uKSB7XHJcbiAgICB0aGlzLl9zdG9wQW5pbWF0aW9uKCk7XHJcbiAgICB0aGlzLl9sYXN0UmVuZGVyRnVuYyA9ICgpID0+IHRoaXMuX3JlbmRlcih0ZXh0T3JOb2RlT3JXaWRnZXQsIGFyb3VuZE5vZGUsIHBvc2l0aW9uKTtcclxuICAgIHRoaXMuX2xhc3RSZW5kZXJGdW5jKCk7XHJcbiAgICAvLyBzaG93IGl0XHJcbiAgICBpZiAodHlwZW9mIHRoaXMuZHVyYXRpb24gPT09IFwibnVtYmVyXCIpIHtcclxuICAgICAgdGhpcy5kb21Ob2RlLnN0eWxlLm9wYWNpdHkgPSBcIjBcIjtcclxuICAgICAgdGhpcy5fZmFkZUluSGFuZGxlID0gYW5pbWF0ZUZhZGVJbih7IG5vZGU6IHRoaXMuZG9tTm9kZSwgZHVyYXRpb246IHRoaXMuZHVyYXRpb24gfSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9yZW5kZXIodGV4dE9yTm9kZU9yV2lkZ2V0LCBhcm91bmROb2RlLCBwb3NpdGlvbikge1xyXG4gICAgaWYgKHR5cGVvZiB0ZXh0T3JOb2RlT3JXaWRnZXQgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgdGhpcy5fY29udGFpbmVyTm9kZS5pbm5lckhUTUwgPSB0ZXh0T3JOb2RlT3JXaWRnZXQ7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgLy8gb3VyIGNvZGVcclxuICAgICAgdGhpcy5fY29udGFpbmVyTm9kZS5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICBwbGFjZSh0ZXh0T3JOb2RlT3JXaWRnZXQuZG9tTm9kZSB8fCB0ZXh0T3JOb2RlT3JXaWRnZXQsIHRoaXMuX2NvbnRhaW5lck5vZGUpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcG9zID0gcGxhY2VBcm91bmQodGhpcy5kb21Ob2RlLCBhcm91bmROb2RlLCBwb3NpdGlvbiAmJiBwb3NpdGlvbi5sZW5ndGggPyBwb3NpdGlvbiA6IERFRkFVTFRfUE9TSVRJT04sIHRoaXMuX29yaWVudC5iaW5kKHRoaXMpKTtcclxuICAgIGNvbnN0IGFyb3VuZE5vZGVDb29yZHMgPSBwb3MuYXJvdW5kTm9kZVBvcztcclxuICAgIGlmIChwb3MuY29ybmVyLmNoYXJBdCgwKSA9PT0gXCJNXCIgJiYgcG9zLmFyb3VuZENvcm5lci5jaGFyQXQoMCkgPT09IFwiTVwiKSB7XHJcbiAgICAgIHRoaXMuX2Nvbm5lY3Rvck5vZGUuc3R5bGUudG9wID1cclxuICAgICAgICBhcm91bmROb2RlQ29vcmRzLnkgKyAoKGFyb3VuZE5vZGVDb29yZHMuaCAtIHRoaXMuX2Nvbm5lY3Rvck5vZGUub2Zmc2V0SGVpZ2h0KSA+PiAxKSAtIHBvcy55ICsgXCJweFwiO1xyXG4gICAgICB0aGlzLl9jb25uZWN0b3JOb2RlLnN0eWxlLmxlZnQgPSBcIlwiO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAocG9zLmNvcm5lci5jaGFyQXQoMSkgPT09IFwiTVwiICYmIHBvcy5hcm91bmRDb3JuZXIuY2hhckF0KDEpID09PSBcIk1cIikge1xyXG4gICAgICB0aGlzLl9jb25uZWN0b3JOb2RlLnN0eWxlLmxlZnQgPVxyXG4gICAgICAgIGFyb3VuZE5vZGVDb29yZHMueCArICgoYXJvdW5kTm9kZUNvb3Jkcy53IC0gdGhpcy5fY29ubmVjdG9yTm9kZS5vZmZzZXRXaWR0aCkgPj4gMSkgLSBwb3MueCArIFwicHhcIjtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB0aGlzLl9jb25uZWN0b3JOb2RlLnN0eWxlLmxlZnQgPSBcIlwiO1xyXG4gICAgICB0aGlzLl9jb25uZWN0b3JOb2RlLnN0eWxlLnRvcCA9IFwiXCI7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9kcmF3QmFja2dyb3VuZCgpO1xyXG4gIH1cclxuICB1cGRhdGVQb3NpdGlvbigpIHtcclxuICAgIHRoaXMuX2xhc3RSZW5kZXJGdW5jICYmIHRoaXMuX2xhc3RSZW5kZXJGdW5jKCk7XHJcbiAgfVxyXG4gIF9vcmllbnQobm9kZSwgYXJvdW5kQ29ybmVyLCB0b29sdGlwQ29ybmVyLCBzcGFjZUF2YWlsYWJsZSwgYXJvdW5kTm9kZUNvb3Jkcykge1xyXG4gICAgdGhpcy5fY29ubmVjdG9yTm9kZS5zdHlsZS50b3AgPSBcIlwiOyAvL3Jlc2V0IHRvIGRlZmF1bHRcclxuICAgIGNvbnN0IHdpZHRoQXZhaWxhYmxlID0gc3BhY2VBdmFpbGFibGUudztcclxuICAgIGNvbnN0IGhlaWdodEF2YWlsYWJsZSA9IHNwYWNlQXZhaWxhYmxlLmg7XHJcbiAgICBub2RlLmNsYXNzTmFtZSA9XHJcbiAgICAgIFwiZXNyaTRHRVRvb2x0aXAgXCIgK1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIFwiTVItTUxcIjogXCJlc3JpNEdFVG9vbHRpcFJpZ2h0XCIsXHJcbiAgICAgICAgICBcIk1MLU1SXCI6IFwiZXNyaTRHRVRvb2x0aXBMZWZ0XCIsXHJcbiAgICAgICAgICBcIlRNLUJNXCI6IFwiZXNyaTRHRVRvb2x0aXBBYm92ZVwiLFxyXG4gICAgICAgICAgXCJCTS1UTVwiOiBcImVzcmk0R0VUb29sdGlwQmVsb3dcIixcclxuICAgICAgICAgIFwiQkwtVExcIjogXCJlc3JpNEdFVG9vbHRpcEJlbG93IGVzcmk0R0VUb29sdGlwQUJMZWZ0XCIsXHJcbiAgICAgICAgICBcIlRMLUJMXCI6IFwiZXNyaTRHRVRvb2x0aXBBYm92ZSBlc3JpNEdFVG9vbHRpcEFCTGVmdFwiLFxyXG4gICAgICAgICAgXCJCUi1UUlwiOiBcImVzcmk0R0VUb29sdGlwQmVsb3cgZXNyaTRHRVRvb2x0aXBBQlJpZ2h0XCIsXHJcbiAgICAgICAgICBcIlRSLUJSXCI6IFwiZXNyaTRHRVRvb2x0aXBBYm92ZSBlc3JpNEdFVG9vbHRpcEFCUmlnaHRcIixcclxuICAgICAgICAgIFwiQlItQkxcIjogXCJlc3JpNEdFVG9vbHRpcFJpZ2h0XCIsXHJcbiAgICAgICAgICBcIkJMLUJSXCI6IFwiZXNyaTRHRVRvb2x0aXBMZWZ0XCJcclxuICAgICAgICB9Wyh0aGlzLl9vcmllbnRLZXkgPSBhcm91bmRDb3JuZXIgKyBcIi1cIiArIHRvb2x0aXBDb3JuZXIpXSArXHJcbiAgICAgICAgXCIgXCIgK1xyXG4gICAgICAgIHRoaXMuY2xhc3M7XHJcbiAgICB0aGlzLmRvbU5vZGUuc3R5bGUud2lkdGggPSBcImF1dG9cIjtcclxuICAgIGNvbnN0IHNpemUgPSBwb3NpdGlvbih0aGlzLmRvbU5vZGUpO1xyXG4gICAgc2l6ZS53ID0gTWF0aC5jZWlsKHNpemUudyk7XHJcbiAgICBjb25zdCB3aWR0aCA9IE1hdGgubWluKE1hdGgubWF4KHdpZHRoQXZhaWxhYmxlLCAxKSwgc2l6ZS53KTtcclxuICAgIHNldE1hcmdpbkJveCh0aGlzLmRvbU5vZGUsIHsgdzogd2lkdGggfSk7XHJcbiAgICBpZiAodG9vbHRpcENvcm5lci5jaGFyQXQoMCkgPT09IFwiQlwiICYmIGFyb3VuZENvcm5lci5jaGFyQXQoMCkgPT09IFwiQlwiKSB7XHJcbiAgICAgIGNvbnN0IGJiID0gcG9zaXRpb24obm9kZSk7XHJcbiAgICAgIGNvbnN0IHRvb2x0aXBDb25uZWN0b3JIZWlnaHQgPSB0aGlzLl9jb25uZWN0b3JOb2RlLm9mZnNldEhlaWdodDtcclxuICAgICAgaWYgKGJiLmggPiBoZWlnaHRBdmFpbGFibGUpIHtcclxuICAgICAgICBjb25zdCBhcm91bmROb2RlUGxhY2VtZW50ID0gaGVpZ2h0QXZhaWxhYmxlIC0gKChhcm91bmROb2RlQ29vcmRzLmggKyB0b29sdGlwQ29ubmVjdG9ySGVpZ2h0KSA+PiAxKTtcclxuICAgICAgICB0aGlzLl9jb25uZWN0b3JOb2RlLnN0eWxlLnRvcCA9IGFyb3VuZE5vZGVQbGFjZW1lbnQgKyBcInB4XCI7XHJcbiAgICAgICAgdGhpcy5fY29ubmVjdG9yTm9kZS5zdHlsZS5ib3R0b20gPSBcIlwiO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHRoaXMuX2Nvbm5lY3Rvck5vZGUuc3R5bGUuYm90dG9tID1cclxuICAgICAgICAgIE1hdGgubWluKE1hdGgubWF4KGFyb3VuZE5vZGVDb29yZHMuaCAvIDIgLSB0b29sdGlwQ29ubmVjdG9ySGVpZ2h0IC8gMiwgMCksIGJiLmggLSB0b29sdGlwQ29ubmVjdG9ySGVpZ2h0KSArXHJcbiAgICAgICAgICAgIFwicHhcIjtcclxuICAgICAgICB0aGlzLl9jb25uZWN0b3JOb2RlLnN0eWxlLnRvcCA9IFwiXCI7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB0aGlzLl9jb25uZWN0b3JOb2RlLnN0eWxlLnRvcCA9IFwiXCI7XHJcbiAgICAgIHRoaXMuX2Nvbm5lY3Rvck5vZGUuc3R5bGUuYm90dG9tID0gXCJcIjtcclxuICAgIH1cclxuICAgIHRoaXMuX2RyYXdCYWNrZ3JvdW5kKCk7XHJcbiAgICByZXR1cm4gTWF0aC5tYXgoMCwgc2l6ZS53IC0gd2lkdGhBdmFpbGFibGUpO1xyXG4gIH1cclxuICBfZHJhd0JhY2tncm91bmQoKSB7XHJcbiAgICBpZiAoIXRoaXMuX29yaWVudEtleSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBjdXN0b21TdHlsZSA9IHR5cGVvZiB0aGlzLmN1c3RvbVN0eWxlID09PSBcImZ1bmN0aW9uXCIgPyB0aGlzLmN1c3RvbVN0eWxlKCkgOiB0aGlzLmN1c3RvbVN0eWxlO1xyXG4gICAgY29uc3QgdyA9IHRoaXMuZG9tTm9kZS5jbGllbnRXaWR0aDtcclxuICAgIGNvbnN0IGggPSB0aGlzLmRvbU5vZGUuY2xpZW50SGVpZ2h0O1xyXG4gICAgY29uc3QgcGFyZW50Qm94ID0gcG9zaXRpb24odGhpcy5kb21Ob2RlKTtcclxuICAgIGNvbnN0IHRpcEJveCA9IHBvc2l0aW9uKHRoaXMuX2Nvbm5lY3Rvck5vZGUpO1xyXG4gICAgY29uc3QgY29udGVudEJveCA9IHBvc2l0aW9uKHRoaXMuX2NvbnRhaW5lck5vZGUpO1xyXG4gICAgdGlwQm94LnggLT0gcGFyZW50Qm94Lng7XHJcbiAgICB0aXBCb3gueSAtPSBwYXJlbnRCb3gueTtcclxuICAgIGNvbnRlbnRCb3gueCAtPSBwYXJlbnRCb3gueDtcclxuICAgIGNvbnRlbnRCb3gueSAtPSBwYXJlbnRCb3gueTtcclxuICAgIC8vIGdpdmUgcm9vbSBmb3IgdGhlIGJvcmRlclxyXG4gICAgY29udGVudEJveC54ICs9IDE7XHJcbiAgICBjb250ZW50Qm94LnkgKz0gMTtcclxuICAgIGNvbnRlbnRCb3gudyAtPSAyO1xyXG4gICAgY29udGVudEJveC5oIC09IDI7XHJcbiAgICB0aGlzLl9zdXJmYWNlICYmIHRoaXMuX3N1cmZhY2UuZGVzdHJveSgpO1xyXG4gICAgdGhpcy5fc3VyZmFjZUNvbnRhaW5lciAmJiBkZXN0cm95KHRoaXMuX3N1cmZhY2VDb250YWluZXIpO1xyXG4gICAgY29uc3Qgc3VyZmFjZUNvbnRhaW5lciA9ICh0aGlzLl9zdXJmYWNlQ29udGFpbmVyID0gY3JlYXRlKFwiZGl2XCIsIHsgY2xhc3M6IFwiZXNyaUdFQWJzb2x1dGVTdHJldGNoZWRcIiB9LCB0aGlzLmRvbU5vZGUsIFwiZmlyc3RcIikpO1xyXG4gICAgc3VyZmFjZUNvbnRhaW5lci5zdHlsZS5wb2ludGVyRXZlbnRzID0gXCJub25lXCI7XHJcbiAgICBjb25zdCBzID0gKHRoaXMuX3N1cmZhY2UgPSBjcmVhdGVHRlhTdXJmYWNlKHN1cmZhY2VDb250YWluZXIsIHcsIGgpKTtcclxuICAgIGNvbnN0IHBvaW50cyA9IFtcclxuICAgICAgeyB4OiBjb250ZW50Qm94LngsIHk6IGNvbnRlbnRCb3gueSB9LFxyXG4gICAgICB7IHg6IGNvbnRlbnRCb3gueCArIGNvbnRlbnRCb3gudywgeTogY29udGVudEJveC55IH0sXHJcbiAgICAgIHsgeDogY29udGVudEJveC54ICsgY29udGVudEJveC53LCB5OiBjb250ZW50Qm94LnkgKyBjb250ZW50Qm94LmggfSxcclxuICAgICAgeyB4OiBjb250ZW50Qm94LngsIHk6IGNvbnRlbnRCb3gueSArIGNvbnRlbnRCb3guaCB9LFxyXG4gICAgICB7IHg6IGNvbnRlbnRCb3gueCwgeTogY29udGVudEJveC55IH1cclxuICAgIF07XHJcbiAgICBjb25zdCB0aXBDeCA9IHRpcEJveC54ICsgdGlwQm94LncgLyAyO1xyXG4gICAgY29uc3QgdGlwQ3kgPSB0aXBCb3gueSArIHRpcEJveC5oIC8gMjtcclxuICAgIGNvbnN0IHRpcFNpemUgPSA1O1xyXG4gICAgbGV0IHRpcFBvaW50cztcclxuICAgIHN3aXRjaCAodGhpcy5fb3JpZW50S2V5KSB7XHJcbiAgICAgIGNhc2UgXCJCTC1UTFwiOlxyXG4gICAgICBjYXNlIFwiQk0tVE1cIjpcclxuICAgICAgY2FzZSBcIkJSLVRSXCI6XHJcbiAgICAgICAgLy8gYmVsb3dcclxuICAgICAgICB0aXBQb2ludHMgPSBbXHJcbiAgICAgICAgICB7IHg6IHRpcEN4IC0gdGlwU2l6ZSwgeTogY29udGVudEJveC55IH0sXHJcbiAgICAgICAgICB7IHg6IHRpcEN4LCB5OiB0aXBDeSB9LFxyXG4gICAgICAgICAgeyB4OiB0aXBDeCArIHRpcFNpemUsIHk6IGNvbnRlbnRCb3gueSB9XHJcbiAgICAgICAgXTtcclxuICAgICAgICBwb2ludHMuc3BsaWNlLmFwcGx5KHBvaW50cywgWzEsIDBdLmNvbmNhdCh0aXBQb2ludHMpKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcIk1MLU1SXCI6XHJcbiAgICAgIGNhc2UgXCJCTC1CUlwiOlxyXG4gICAgICAgIC8vIGxlZnRcclxuICAgICAgICB0aXBQb2ludHMgPSBbXHJcbiAgICAgICAgICB7IHg6IGNvbnRlbnRCb3gueCArIGNvbnRlbnRCb3gudywgeTogdGlwQ3kgLSB0aXBTaXplIH0sXHJcbiAgICAgICAgICB7IHg6IHRpcEN4LCB5OiB0aXBDeSB9LFxyXG4gICAgICAgICAgeyB4OiBjb250ZW50Qm94LnggKyBjb250ZW50Qm94LncsIHk6IHRpcEN5ICsgdGlwU2l6ZSB9XHJcbiAgICAgICAgXTtcclxuICAgICAgICBwb2ludHMuc3BsaWNlLmFwcGx5KHBvaW50cywgWzIsIDBdLmNvbmNhdCh0aXBQb2ludHMpKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcIlRNLUJNXCI6XHJcbiAgICAgIGNhc2UgXCJUTC1CTFwiOlxyXG4gICAgICBjYXNlIFwiVFItQlJcIjpcclxuICAgICAgICAvLyBhYm92ZVxyXG4gICAgICAgIHRpcFBvaW50cyA9IFtcclxuICAgICAgICAgIHsgeDogdGlwQ3ggKyB0aXBTaXplLCB5OiBjb250ZW50Qm94LnkgKyBjb250ZW50Qm94LmggfSxcclxuICAgICAgICAgIHsgeDogdGlwQ3gsIHk6IHRpcEN5IH0sXHJcbiAgICAgICAgICB7IHg6IHRpcEN4IC0gdGlwU2l6ZSwgeTogY29udGVudEJveC55ICsgY29udGVudEJveC5oIH1cclxuICAgICAgICBdO1xyXG4gICAgICAgIHBvaW50cy5zcGxpY2UuYXBwbHkocG9pbnRzLCBbMywgMF0uY29uY2F0KHRpcFBvaW50cykpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwiTVItTUxcIjpcclxuICAgICAgY2FzZSBcIkJSLUJMXCI6XHJcbiAgICAgICAgLy8gcmlnaHRcclxuICAgICAgICB0aXBQb2ludHMgPSBbXHJcbiAgICAgICAgICB7IHg6IGNvbnRlbnRCb3gueCwgeTogdGlwQ3kgKyB0aXBTaXplIH0sXHJcbiAgICAgICAgICB7IHg6IHRpcEN4LCB5OiB0aXBDeSB9LFxyXG4gICAgICAgICAgeyB4OiBjb250ZW50Qm94LngsIHk6IHRpcEN5IC0gdGlwU2l6ZSB9XHJcbiAgICAgICAgXTtcclxuICAgICAgICBwb2ludHMuc3BsaWNlLmFwcGx5KHBvaW50cywgWzQsIDBdLmNvbmNhdCh0aXBQb2ludHMpKTtcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICAgIGNvbnN0IHAgPSBzLmNyZWF0ZVBvbHlsaW5lKHsgcG9pbnRzIH0pO1xyXG4gICAgY29uc3QgZmlsbENvbG9yID0gKGN1c3RvbVN0eWxlICYmIGN1c3RvbVN0eWxlLmJhY2tncm91bmRDb2xvcikgfHwgXCJ3aGl0ZVwiO1xyXG4gICAgY29uc3QgYm9yZGVyQ29sb3IgPSAoY3VzdG9tU3R5bGUgJiYgY3VzdG9tU3R5bGUuYm9yZGVyQ29sb3IpIHx8IFwiI2QzZDNkM1wiO1xyXG4gICAgcC5zZXRGaWxsKGZpbGxDb2xvcikuc2V0U3Ryb2tlKHtcclxuICAgICAgY29sb3I6IGJvcmRlckNvbG9yLFxyXG4gICAgICB3aWR0aDogMSxcclxuICAgICAgam9pbjogXCJyb3VuZFwiXHJcbiAgICB9KTtcclxuICAgIGlmIChjdXN0b21TdHlsZSAmJiBjdXN0b21TdHlsZS5jb2xvcikge1xyXG4gICAgICB0aGlzLl9jb250YWluZXJOb2RlLnN0eWxlLmNvbG9yID0gY3VzdG9tU3R5bGUuY29sb3I7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEhpZGVzIHRoZSBzaG93biB0b29sdGlwLlxyXG4gICAqL1xyXG4gIGhpZGUoKSB7XHJcbiAgICB0aGlzLl9zdG9wQW5pbWF0aW9uKCk7XHJcbiAgICBpZiAodHlwZW9mIHRoaXMuZHVyYXRpb24gPT09IFwibnVtYmVyXCIpIHtcclxuICAgICAgdGhpcy5fZmFkZU91dEhhbmRsZSA9IGFuaW1hdGVGYWRlT3V0KHsgbm9kZTogdGhpcy5kb21Ob2RlLCBkdXJhdGlvbjogdGhpcy5kdXJhdGlvbiB9KTtcclxuICAgIH1cclxuICB9XHJcbiAgX3N0b3BBbmltYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mYWRlSW5IYW5kbGUgJiYgdGhpcy5fZmFkZUluSGFuZGxlLnN0b3AoKTtcclxuICAgIHRoaXMuX2ZhZGVJbkhhbmRsZSA9IG51bGw7XHJcbiAgICB0aGlzLl9mYWRlT3V0SGFuZGxlICYmIHRoaXMuX2ZhZGVPdXRIYW5kbGUuc3RvcCgpO1xyXG4gICAgdGhpcy5fZmFkZU91dEhhbmRsZSA9IG51bGw7XHJcbiAgfVxyXG59O1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoKVxyXG5dLCBUb29sdGlwLnByb3RvdHlwZSwgXCJkdXJhdGlvblwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoKVxyXG5dLCBUb29sdGlwLnByb3RvdHlwZSwgXCJjdXN0b21TdHlsZVwiLCB2b2lkIDApO1xyXG5Ub29sdGlwID0gX19kZWNvcmF0ZShbXHJcbiAgaSRYKClcclxuXSwgVG9vbHRpcCk7XG5cbi8vIGdlb2VucmljaG1lbnQudXRpbHNcclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vL1xyXG4vLyBUb29sdGlwIHdpZGdldFxyXG4vL1xyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbmNvbnN0IGFjdGl2ZVRvb2x0aXBOb2RlcyA9IFtdO1xyXG5jb25zdCBUb29sdGlwQnVpbGRlciA9IHtcclxuICBzaG93KHBhcmFtcykge1xyXG4gICAgY29uc3QgdGV4dE9yTm9kZU9yV2lkZ2V0ID0gcGFyYW1zLnRleHRPck5vZGVPcldpZGdldDtcclxuICAgIGNvbnN0IGFyb3VuZE5vZGUgPSBwYXJhbXMuYXJvdW5kTm9kZTtcclxuICAgIGxldCBwb3NpdGlvbiA9IHBhcmFtcy5wb3NpdGlvbjtcclxuICAgIGNvbnN0IGNsYXNzZXMgPSBwYXJhbXMuY2xhc3NlcztcclxuICAgIGNvbnN0IHN0eWxlID0gcGFyYW1zLnN0eWxlO1xyXG4gICAgLy8gZG8gbm90IGRlc3Ryb3ksIG9ubHkgaGlkZSBzaG93biB0b29sdGlwcyB0byBkZS1jbHV0dGVyIHRoZSB2aWV3XHJcbiAgICAvLyB0b29sdGlwcyB3aWxsIGJlIGRlc3Ryb3llZCBlbHNld2hlcmUgaW4gdGhlIHV0aWxpdHkgY2xhc3NcclxuICAgIGFjdGl2ZVRvb2x0aXBOb2Rlcy5mb3JFYWNoKChuZCkgPT4gbmQuX3Nob3duVG9vbHRpcCAmJiAobmQuX3Nob3duVG9vbHRpcC5kb21Ob2RlLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIikpO1xyXG4gICAgYWN0aXZlVG9vbHRpcE5vZGVzLmxlbmd0aCA9IDA7XHJcbiAgICBpZiAodHlwZW9mIHBvc2l0aW9uID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgIHBvc2l0aW9uID0gW3Bvc2l0aW9uXTtcclxuICAgIH1cclxuICAgIGNvbnN0IG1hcCA9IHsgYWZ0ZXI6IFwiYWZ0ZXItY2VudGVyZWRcIiwgYmVmb3JlOiBcImJlZm9yZS1jZW50ZXJlZFwiIH07XHJcbiAgICBwb3NpdGlvbiA9IHBvc2l0aW9uICYmIHBvc2l0aW9uLm1hcCgodmFsKSA9PiBtYXBbdmFsXSB8fCB2YWwpO1xyXG4gICAgY29uc3QgdG9vbHRpcCA9IG5ldyBUb29sdGlwKHtcclxuICAgICAgY2xhc3M6IEFycmF5LmlzQXJyYXkoY2xhc3NlcykgPyBjbGFzc2VzLmpvaW4oXCIgXCIpIDogY2xhc3NlcyxcclxuICAgICAgY3VzdG9tU3R5bGU6IHN0eWxlLFxyXG4gICAgICBkdXJhdGlvbjogcGFyYW1zLmR1cmF0aW9uXHJcbiAgICB9KTtcclxuICAgIHRvb2x0aXAuc2hvdyh0ZXh0T3JOb2RlT3JXaWRnZXQsIGFyb3VuZE5vZGUsIHBvc2l0aW9uKTtcclxuICAgIGFyb3VuZE5vZGUuX3Nob3duVG9vbHRpcCA9IHRvb2x0aXA7XHJcbiAgICBpZiAoIXBhcmFtcy5rZWVwV2hlbk90aGVyU2hvd24pIHtcclxuICAgICAgYWN0aXZlVG9vbHRpcE5vZGVzLnB1c2goYXJvdW5kTm9kZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdG9vbHRpcDtcclxuICB9LFxyXG4gIGhpZGUoYXJvdW5kTm9kZSkge1xyXG4gICAgaWYgKCFhcm91bmROb2RlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGFyb3VuZE5vZGUuX3Nob3duVG9vbHRpcCAmJiBhcm91bmROb2RlLl9zaG93blRvb2x0aXAuZGVzdHJveSgpO1xyXG4gICAgYXJvdW5kTm9kZS5fc2hvd25Ub29sdGlwID0gdW5kZWZpbmVkO1xyXG4gICAgY29uc3QgaW5kZXggPSBhY3RpdmVUb29sdGlwTm9kZXMuaW5kZXhPZihhcm91bmROb2RlKTtcclxuICAgIGluZGV4ICE9PSAtMSAmJiBhY3RpdmVUb29sdGlwTm9kZXMuc3BsaWNlKGluZGV4LCAxKTtcclxuICB9XHJcbn07XHJcbi8qKlxyXG4gKiBTZXRzIGEgdG9vbHRpcCB0byBub2RlLCB0aGF0IHdpbGwgYmUgc2hvd24gb24gbW91c2Ugb3Zlci5cclxuICogQHBhcmFtIG5vZGUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERvbWUgbm9kZS4gUmVxdWlyZWQuXHJcbiAqIEBwYXJhbSB0ZXh0T3JGdW5jICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmd8RnVuY3Rpb24oKSA9PiBTdHJpbmcgb3IgV2lkZ2V0LlxyXG4gKiBAcGFyYW0gcGFyYW1zICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LiBTZWUgdXRpbC5zaG93VG9vbHRpcEZvck5vZGUoKSBtZXRob2QgZm9yIGRldGFpbHMuXHJcbiAqXHJcbiAqIE90aGVyIHBhcmFtZXRlcnM6XHJcbiAqIEBwYXJhbSBwYXJhbXMuc2hvd1Rvb2x0aXAgICAgICAgICAgICAgICAgICAgICAgICBCb29sZWFuLiBJZiB0cnVlLCB0aGUgdG9vbHRpcCB3aWxsIGJlIHNob3duIHJpZ2h0IGF3YXkuXHJcbiAqXHJcbiAqIEByZXR1cm5zIGEgc2lnbmFsIHdpdGggcmVtb3ZlKCksIHN1c3BlbmQoKSwgcmVzdW1lKCkgYW5kIHJlZnJlc2goKSBtZXRob2RzLlxyXG4gKi9cclxuZnVuY3Rpb24gc2V0VG9vbHRpcFRvTm9kZShub2RlLCB0ZXh0T3JGdW5jLCBwYXJhbXMpIHtcclxuICBjb25zdCBuZCA9IG5vZGU7XHJcbiAgcGFyYW1zID0gcGFyYW1zIHx8IHt9O1xyXG4gIGlmICghbmQpIHtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuICAvLyBjbGVhbiB1cFxyXG4gIGhpZGVUb29sdGlwRm9yTm9kZShuZCk7XHJcbiAgbmQuX19zZXRUb29sdGlwVG9Ob2RlTW91c2VFbnRlckhhbmRsZSAmJiBuZC5fX3NldFRvb2x0aXBUb05vZGVNb3VzZUVudGVySGFuZGxlLnJlbW92ZSgpO1xyXG4gIGlmICghdGV4dE9yRnVuYykge1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG4gIGxldCBpc1N1c3BlbmRlZCA9IGZhbHNlO1xyXG4gIGZ1bmN0aW9uIHNob3dUb29sdGlwRnVuY3Rpb24oKSB7XHJcbiAgICAhaXNTdXNwZW5kZWQgJiYgIWlzVG9vbHRpcFNob3duKG5kKSAmJiBzaG93VG9vbHRpcEZvck5vZGUobmQsIHRleHRPckZ1bmMsIHBhcmFtcyk7XHJcbiAgfVxyXG4gIGlmIChpc01vYmlsZURldmljZSgpKSB7XHJcbiAgICBuZC5fX3NldFRvb2x0aXBUb05vZGVNb3VzZUVudGVySGFuZGxlID0gYWRkTm9EcmFnQ2xpY2tIYW5kbGVyKG5kLCBzaG93VG9vbHRpcEZ1bmN0aW9uKTtcclxuICB9XHJcbiAgZWxzZSB7XHJcbiAgICBuZC5fX3NldFRvb2x0aXBUb05vZGVNb3VzZUVudGVySGFuZGxlID0gb24obmQsIFwib3ZlclwiIC8qIGZvcm1lciBtb3VzZS5lbnRlciAqLywgc2hvd1Rvb2x0aXBGdW5jdGlvbik7XHJcbiAgfVxyXG4gIGlmIChwYXJhbXMuc2hvd1Rvb2x0aXApIHtcclxuICAgIHNob3dUb29sdGlwRnVuY3Rpb24oKTtcclxuICB9XHJcbiAgcmV0dXJuIHtcclxuICAgIHJlbW92ZSgpIHtcclxuICAgICAgdGV4dE9yRnVuYyA9IG51bGw7XHJcbiAgICAgIGhpZGVUb29sdGlwRm9yTm9kZShuZCk7XHJcbiAgICB9LFxyXG4gICAgc3VzcGVuZCgpIHtcclxuICAgICAgaGlkZVRvb2x0aXBGb3JOb2RlKG5kKTtcclxuICAgICAgaXNTdXNwZW5kZWQgPSB0cnVlO1xyXG4gICAgfSxcclxuICAgIHJlc3VtZSgpIHtcclxuICAgICAgaXNTdXNwZW5kZWQgPSBmYWxzZTtcclxuICAgIH0sXHJcbiAgICByZWZyZXNoKCkge1xyXG4gICAgICBuZC5fc2hvd25Ub29sdGlwICYmIHNob3dUb29sdGlwRnVuY3Rpb24oKTtcclxuICAgIH1cclxuICB9O1xyXG59XHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuLy9cclxuLy8gU2hvdyB0b29sdGlwXHJcbi8vXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuLyoqXHJcbiAqIFNob3dzIGEgdG9vbHRpcCBmb3IgYSBub2RlLlxyXG4gKiBAcGFyYW0gbm9kZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRG9tZSBub2RlLiBSZXF1aXJlZC5cclxuICogQHBhcmFtIHRleHROb2RlRnVuYyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nfEZ1bmN0aW9uKCkgPT4gU3RyaW5nIG9yIFdpZGdldC5cclxuICogQHBhcmFtIHBhcmFtcy5zdGF5T25Ib3ZlciAgICAgICAgICAgICAgICAgICAgICAgIEJvb2xlYW4uXHJcbiAqIEBwYXJhbSBwYXJhbXMuaGlkZU9uQ2xpY2sgICAgICAgICAgICAgICAgICAgICAgICBCb29sZWFuLlxyXG4gKiBAcGFyYW0gcGFyYW1zLmNsYXNzZXMgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXl8U3RyaW5nLlxyXG4gKiBAcGFyYW0gcGFyYW1zLnBvc2l0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXl8U3RyaW5nLiBEZWZhdWx0IFtcImFmdGVyXCIsIFwiYmVmb3JlXCJdLlxyXG4gKiBAcGFyYW0gcGFyYW1zLmlnbm9yZU5vZGVSZW1vdmFsICAgICAgICAgICAgICAgICAgQm9vbGVhbi4gSWYgdHJ1ZSwgdGhlIHRvb2x0aXAgd2lsbCBub3QgYmUgaGlkZGVuIGV2ZW4gYWZ0ZXIgdGhlIG5vZGUgaXMgcmVtb3ZlZCBmcm9tIHRoZSBsYXlvdXQuXHJcbiAqIEBwYXJhbSBwYXJhbXMuaWdub3JlTW91c2VQb3NpdGlvbiAgICAgICAgICAgICAgICBCb29sZWFuLiBJZiB0cnVlLCB0aGUgbW91c2UgZG9lc24ndCBoYXZlIHRvIGJlIG92ZXIgdGhlIHRvb2x0aXAgb3IgaXRzIG5vZGUgYWxsIHRoZSB0aW1lLlxyXG4gKiBAcGFyYW0gcGFyYW1zLnRleHRBbGlnbiAgICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nOiBzdGFydCB8IGNlbnRlciB8IGVuZC4gRGVmYXVsdCBcImNlbnRlclwiLlxyXG4gKiBAcGFyYW0gcGFyYW1zLnN0eWxlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0IHwgRnVuY3Rpb24oKSA9PiBPYmplY3QuXHJcbiAqIEBwYXJhbSBwYXJhbXMubm90UmVzdHJpY3RlZCAgICAgICAgICAgICAgICAgICAgICBCb29sZWFuLiBJZiB0cnVlLCBhIHNwZWNpYWwgQ1NTIGNsYXNzIFwibm90UmVzdHJpY3RlZFwiIHdpbGwgYmUgYXBwbGllZC5cclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVzZSBpdCB0byBzcGVjaWZ5IHRoYXQgdGhlIHRvb2x0aXAgc2hvdWxkIGJlIHdpZGVyIHRoYW4gbm9ybWFsLlxyXG4gKlxyXG4gKiBAcmV0dXJucyBhIG5ldyB0b29sdGlwIGluc3RhbmNlIG9yIG51bGwuXHJcbiAqL1xyXG5mdW5jdGlvbiBzaG93VG9vbHRpcEZvck5vZGUobm9kZSwgdGV4dE5vZGVGdW5jLCBwYXJhbXMpIHtcclxuICBjb25zdCBuZCA9IG5vZGU7XHJcbiAgcGFyYW1zID0gcGFyYW1zIHx8IHt9O1xyXG4gIHBhcmFtcy5zdGF5T25Ib3ZlciA9IHBhcmFtcy5zdGF5T25Ib3ZlciA9PSBudWxsID8gXCJoeXBlcmxpbmtcIiA6IHBhcmFtcy5zdGF5T25Ib3ZlcjtcclxuICBsZXQgc3RheU9uSG92ZXIgPSBwYXJhbXMuc3RheU9uSG92ZXI7XHJcbiAgaWYgKCFuZCkge1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG4gIGhpZGVUb29sdGlwRm9yTm9kZShuZCk7XHJcbiAgbGV0IHRleHRPck5vZGUgPSB0eXBlb2YgdGV4dE5vZGVGdW5jID09PSBcImZ1bmN0aW9uXCIgPyB0ZXh0Tm9kZUZ1bmMoKSA6IHRleHROb2RlRnVuYztcclxuICBpZiAoIXRleHRPck5vZGUpIHtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuICBpZiAocGFyYW1zLnRleHRBbGlnbiAmJiB0eXBlb2YgdGV4dE9yTm9kZSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgdGV4dE9yTm9kZSA9XHJcbiAgICAgIFwiPGRpdiBjbGFzcz0nXCIgK1xyXG4gICAgICAgIChwYXJhbXMudGV4dEFsaWduID09PSBcInN0YXJ0XCJcclxuICAgICAgICAgID8gXCJlc3JpR0VTdGFydCBlc3JpR0VGbGV4U3RhcnRcIlxyXG4gICAgICAgICAgOiBwYXJhbXMudGV4dEFsaWduID09PSBcImVuZFwiXHJcbiAgICAgICAgICAgID8gXCJlc3JpR0VFbmQgZXNyaUdFRmxleEVuZFwiXHJcbiAgICAgICAgICAgIDogXCJcIikgK1xyXG4gICAgICAgIFwiJz5cIiArXHJcbiAgICAgICAgdGV4dE9yTm9kZSArXHJcbiAgICAgICAgXCI8L2Rpdj5cIjtcclxuICB9XHJcbiAgLy8gZGV0ZWN0IGlmIHNob3VsZCBzdGF5IGJhc2VkIG9uIHRoZSBwcmVzZW5jZSBvZiBhIGh5cGVybGluayBpbiB0aGUgdGV4dFxyXG4gIGlmIChwYXJhbXMuc3RheU9uSG92ZXIgPT09IFwiaHlwZXJsaW5rXCIpIHtcclxuICAgIGxldCB0ZXh0O1xyXG4gICAgaWYgKHR5cGVvZiB0ZXh0T3JOb2RlID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgIHRleHQgPSB0ZXh0T3JOb2RlO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodGV4dE9yTm9kZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XHJcbiAgICAgIHRleHQgPSB0ZXh0T3JOb2RlLm91dGVySFRNTDtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHRleHRPck5vZGUuZG9tTm9kZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XHJcbiAgICAgIHRleHQgPSB0ZXh0T3JOb2RlLmRvbU5vZGUub3V0ZXJIVE1MO1xyXG4gICAgfVxyXG4gICAgc3RheU9uSG92ZXIgPSB0ZXh0ICYmIC9ocmVmPXxlc3JpR0VMaW5rfGVzcmk0R0VMaW5rLy50ZXN0KHRleHQpO1xyXG4gIH1cclxuICBhZGRDbGFzcyhuZCwgXCJlc3JpNEdFU2ltcGxlVGV4dFRvb2x0aXBcIik7XHJcbiAgZnVuY3Rpb24gX2lzTW91c2VPdmVyKG5vZGUsIGV2ZW50KSB7XHJcbiAgICByZXR1cm4gaXNNb3VzZU92ZXIobm9kZSwgeyBjaGVja0FsbENoaWxkcmVuOiB0cnVlLCBldmVudCB9KTtcclxuICB9XHJcbiAgLy8gU0hPV1xyXG4gIGxldCBzaG93blRvb2x0aXA7XHJcbiAgZnVuY3Rpb24gX3Nob3dUb29sdGlwKCkge1xyXG4gICAgaGlkZVRvb2x0aXBGb3JOb2RlKG5kKTtcclxuICAgIC8vIERlZmluZSBkZWZhdWx0IHBhcmFtc1xyXG4gICAgbGV0IGNsYXNzZXMgPSBBcnJheS5pc0FycmF5KHBhcmFtcy5jbGFzc2VzKSA/IHBhcmFtcy5jbGFzc2VzLmpvaW4oXCIgXCIpIDogcGFyYW1zLmNsYXNzZXM7XHJcbiAgICBjbGFzc2VzID0gY2xhc3NlcyB8fCBcIlwiO1xyXG4gICAgaWYgKCFzdGF5T25Ib3Zlcikge1xyXG4gICAgICAvLyBpZiBkb2Vzbid0IGhhdmUgdG8gc3RheSBvbiBob3Zlciwgc2hvdWxkbid0IGdldCBpbiB0aGUgd2F5IG9mIHRoZSBtb3VzZSBjdXJzb3JcclxuICAgICAgY2xhc3NlcyArPSBcIiBlc3JpR0VOb25JbnRlcmFjdGFibGVcIjtcclxuICAgIH1cclxuICAgIGlmIChwYXJhbXMubm90UmVzdHJpY3RlZCkge1xyXG4gICAgICBjbGFzc2VzICs9IFwiIG5vdFJlc3RyaWN0ZWRcIjtcclxuICAgIH1cclxuICAgIHNob3duVG9vbHRpcCA9IFRvb2x0aXBCdWlsZGVyLnNob3coe1xyXG4gICAgICB0ZXh0T3JOb2RlT3JXaWRnZXQ6IHRleHRPck5vZGUsXHJcbiAgICAgIGFyb3VuZE5vZGU6IG5kLFxyXG4gICAgICBwb3NpdGlvbjogW1wiYWZ0ZXJcIiwgXCJiZWZvcmVcIl0sXHJcbiAgICAgIGNsYXNzZXMsXHJcbiAgICAgIHN0eWxlOiBwYXJhbXMuc3R5bGUsXHJcbiAgICAgIGR1cmF0aW9uOiBwYXJhbXMuZHVyYXRpb24sXHJcbiAgICAgIGtlZXBXaGVuT3RoZXJTaG93bjogcGFyYW1zLmtlZXBXaGVuT3RoZXJTaG93blxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIF9zaG93VG9vbHRpcCgpO1xyXG4gIC8vIEhJREVcclxuICAvLyBEZXRlY3Qgd2hlbiBuZWVkIHRvIGhpZGVcclxuICAvLyBjYXNlIDE6IG1vdXNlIGxlZnRcclxuICBpZiAoIXBhcmFtcy5pZ25vcmVNb3VzZVBvc2l0aW9uKSB7XHJcbiAgICBpZiAoIWlzTW9iaWxlRGV2aWNlKCkpIHtcclxuICAgICAgbmQuX19zZXRUb29sdGlwVG9Ob2RlTW91c2VMZWF2ZUhhbmRsZSA9IG9uY2UobmQsIFwibW91c2VvdXRcIiAvKiBmb3JtZXIgbW91c2UubGVhdmUgKi8sICgpID0+IHtcclxuICAgICAgICAvLyBub3Qgc3VyZSB3aHkgbW91c2VvdXQgY2FuIHRyaWdnZXIgZm9yIGEgbm9kZSBldmVuIHRob3VnaCB0aGUgbW91c2UgY2FuIGJlIGhvdmVyaW5nIGl0XHJcbiAgICAgICAgIXN0YXlPbkhvdmVyICYmICFfaXNNb3VzZU92ZXIobmQpICYmIGhpZGVUb29sdGlwRm9yTm9kZShuZCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIG5kLl9fc2V0VG9vbHRpcFRvTm9kZU1vdXNlTGVhdmVIYW5kbGUgPSBvbihkb2N1bWVudC5ib2R5LCBcInByZXNzXCIsIChldmVudCkgPT4ge1xyXG4gICAgICAgIGlmIChfaXNNb3VzZU92ZXIobmQsIGV2ZW50KSkge1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBoaWRlVG9vbHRpcEZvck5vZGUobmQpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcbiAgLy8gY2FzZSAyOiBub2RlIHdhcyByZW1vdmVkIGZyb20gdGhlIGxheW91dFxyXG4gIGlmICghcGFyYW1zLmlnbm9yZU5vZGVSZW1vdmFsKSB7XHJcbiAgICBuZC5fX3NldFRvb2x0aXBUb05vZGVJbkxheW91dEhhbmRsZSA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgLy8gZmFsbGJhY2sgaW4gY2FzZSBcIm1vdXNlb3V0XCIgZGlkbid0IHRyaWdnZXJcclxuICAgICAgIWlzTm9kZUluTGF5b3V0KG5kKSAmJiBoaWRlVG9vbHRpcEZvck5vZGUobmQpO1xyXG4gICAgfSwgNTApO1xyXG4gIH1cclxuICBpZiAoIWlzTW9iaWxlRGV2aWNlKCkpIHtcclxuICAgIC8vIGNhc2UgMzogbW91c2UgaXMgbm90IG92ZXIgdGhlIG5vZGVcclxuICAgIG5kLl9fc2V0VG9vbHRpcFRvTm9kZU1vdXNlT3ZlckhhbmRsZSA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgLy8gZmFsbGJhY2sgaW4gY2FzZSBcIm1vdXNlb3V0XCIgZGlkbid0IHRyaWdnZXJcclxuICAgICAgIXBhcmFtcy5pZ25vcmVNb3VzZVBvc2l0aW9uICYmXHJcbiAgICAgICAgKCFzdGF5T25Ib3ZlciB8fCAhX2lzTW91c2VPdmVyKHNob3duVG9vbHRpcC5kb21Ob2RlKSkgJiZcclxuICAgICAgICAhX2lzTW91c2VPdmVyKG5kKSAmJlxyXG4gICAgICAgIGhpZGVUb29sdGlwRm9yTm9kZShuZCk7XHJcbiAgICB9LCAzMDApO1xyXG4gICAgLy8gQ2xpY2sgYWN0aW9uXHJcbiAgICBuZC5fX3NldFRvb2x0aXBUb05vZGVDbGlja0hhbmRsZSA9IG9uKG5kLCBcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgcGFyYW1zLmhpZGVPbkNsaWNrID8gaGlkZVRvb2x0aXBGb3JOb2RlKG5kKSA6ICFuZC5fc2hvd25Ub29sdGlwICYmIF9zaG93VG9vbHRpcCgpO1xyXG4gICAgfSk7XHJcbiAgICAvLyBMaXN0ZW4gdG8gbWFzdGVyXHJcbiAgICBpZiAoc3RheU9uSG92ZXIpIHtcclxuICAgICAgbmQuX19zZXRUb29sdGlwVG9Ob2RlTW91c2VMZWF2ZU1hc3RlckhhbmRsZSA9IG9uKHNob3duVG9vbHRpcC5kb21Ob2RlLCBcIm91dFwiIC8qIGZvcm1lciBtb3VzZS5sZWF2ZSAqLywgKCkgPT4ge1xyXG4gICAgICAgIC8vIG5vdCBzdXJlIHdoeSBtb3VzZW91dCBjYW4gdHJpZ2dlciBmb3IgYSBub2RlIGV2ZW4gdGhvdWdoIHRoZSBtb3VzZSBjYW4gYmUgaG92ZXJpbmcgaXRcclxuICAgICAgICAhX2lzTW91c2VPdmVyKHNob3duVG9vbHRpcC5kb21Ob2RlKSAmJiBoaWRlVG9vbHRpcEZvck5vZGUobmQpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcbiAgLy8gYXV0by1jb3JyZWN0IHBvc2l0aW9uXHJcbiAgaWYgKHBhcmFtcy5hdXRvQWRqdXN0UG9zaXRpb24pIHtcclxuICAgIGxldCBwb3MgPSBwb3NpdGlvbihuZCk7XHJcbiAgICBuZC5fX3NldFRvb2x0aXBUb05vZGVBZGp1c3RIYW5kbGUgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG5ld1BvcyA9IHBvc2l0aW9uKG5kKTtcclxuICAgICAgaWYgKHBvcy54ICE9PSBuZXdQb3MueCB8fCBwb3MueSAhPT0gbmV3UG9zLnkpIHtcclxuICAgICAgICBwb3MgPSBuZXdQb3M7XHJcbiAgICAgICAgbmQuX3Nob3duVG9vbHRpcCAmJiBuZC5fc2hvd25Ub29sdGlwLnVwZGF0ZVBvc2l0aW9uKCk7XHJcbiAgICAgIH1cclxuICAgIH0sIDMwKTtcclxuICB9XHJcbiAgcmV0dXJuIG5kLl9zaG93blRvb2x0aXA7XHJcbn1cclxuZnVuY3Rpb24gaXNUb29sdGlwU2hvd24obm9kZSkge1xyXG4gIGNvbnN0IG5kID0gbm9kZTtcclxuICByZXR1cm4gISEobmQgJiYgbmQuX3Nob3duVG9vbHRpcCk7XHJcbn1cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vL1xyXG4vLyBIaWRlIHRvb2x0aXBcclxuLy9cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vKipcclxuICogSGlkZXMgc2hvd24gdG9vbHRpcCBvbiB0aGUgZ2l2ZW4gbm9kZS5cclxuICovXHJcbmZ1bmN0aW9uIGhpZGVUb29sdGlwRm9yTm9kZShub2RlKSB7XHJcbiAgY29uc3QgbmQgPSBub2RlO1xyXG4gIGlmICghbmQpIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgLy8gcmVtb3ZlIHRoZSBuYXRpdmUgdG9vbHRpcFxyXG4gIG5kLnJlbW92ZUF0dHJpYnV0ZShcInRpdGxlXCIpO1xyXG4gIHJlbW92ZUNsYXNzKG5kLCBcImVzcmk0R0VTaW1wbGVUZXh0VG9vbHRpcFwiKTtcclxuICBUb29sdGlwQnVpbGRlci5oaWRlKG5kKTtcclxuICBuZC5fX3NldFRvb2x0aXBUb05vZGVNb3VzZUxlYXZlSGFuZGxlICYmIG5kLl9fc2V0VG9vbHRpcFRvTm9kZU1vdXNlTGVhdmVIYW5kbGUucmVtb3ZlKCk7XHJcbiAgY2xlYXJJbnRlcnZhbChuZC5fX3NldFRvb2x0aXBUb05vZGVJbkxheW91dEhhbmRsZSk7XHJcbiAgY2xlYXJJbnRlcnZhbChuZC5fX3NldFRvb2x0aXBUb05vZGVNb3VzZU92ZXJIYW5kbGUpO1xyXG4gIG5kLl9fc2V0VG9vbHRpcFRvTm9kZUNsaWNrSGFuZGxlICYmIG5kLl9fc2V0VG9vbHRpcFRvTm9kZUNsaWNrSGFuZGxlLnJlbW92ZSgpO1xyXG4gIG5kLl9fc2V0VG9vbHRpcFRvTm9kZU1vdXNlTGVhdmVNYXN0ZXJIYW5kbGUgJiYgbmQuX19zZXRUb29sdGlwVG9Ob2RlTW91c2VMZWF2ZU1hc3RlckhhbmRsZS5yZW1vdmUoKTtcclxuICBuZC5fX3NldFRvb2x0aXBUb05vZGVBZGp1c3RIYW5kbGUgJiYgY2xlYXJJbnRlcnZhbChuZC5fX3NldFRvb2x0aXBUb05vZGVBZGp1c3RIYW5kbGUpO1xyXG59XHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuLy9cclxuLy8gQXV0by10b29sdGlwXHJcbi8vXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxubGV0IGF1dG9Ub29sdGlwTm9kZTtcclxubGV0IHNob3duQXV0b1Rvb2x0aXBJbmZvO1xyXG4vKipcclxuICogU3BlY2lmaWMgdG8gYGVzcmlHRVRyaW1XaXRoRWxsaXBzZXNgIENTUyBjbGFzcy5cclxuICovXHJcbmZ1bmN0aW9uIGF1dG9Ub29sdGlwKHJvb3QpIHtcclxuICByZXR1cm4gb24ocm9vdCwgXCJvdmVyXCIsIChldmVudCkgPT4ge1xyXG4gICAgY29uc3QgX3RoaXMgPSBldmVudC50YXJnZXQ7XHJcbiAgICBpZiAoX3RoaXMgPT09IGF1dG9Ub29sdGlwTm9kZSB8fCAhY29udGFpbnNDbGFzcyhfdGhpcywgXCJlc3JpR0VUcmltV2l0aEVsbGlwc2VzXCIpKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIF9jbGVhblVwKCkge1xyXG4gICAgICBpZiAoc2hvd25BdXRvVG9vbHRpcEluZm8pIHtcclxuICAgICAgICBUb29sdGlwQnVpbGRlci5oaWRlKGF1dG9Ub29sdGlwTm9kZSk7XHJcbiAgICAgICAgc2hvd25BdXRvVG9vbHRpcEluZm8ubW91c2VPdXRILnJlbW92ZSgpO1xyXG4gICAgICAgIHNob3duQXV0b1Rvb2x0aXBJbmZvLm1vdXNlTW92ZUgucmVtb3ZlKCk7XHJcbiAgICAgICAgc2hvd25BdXRvVG9vbHRpcEluZm8gPSBudWxsO1xyXG4gICAgICB9XHJcbiAgICAgIGF1dG9Ub29sdGlwTm9kZSA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBpZiAoX3RoaXMub2Zmc2V0V2lkdGggPCBfdGhpcy5zY3JvbGxXaWR0aCkge1xyXG4gICAgICBfY2xlYW5VcCgpO1xyXG4gICAgICBhdXRvVG9vbHRpcE5vZGUgPSBfdGhpcztcclxuICAgICAgVG9vbHRpcEJ1aWxkZXIuc2hvdyh7XHJcbiAgICAgICAgdGV4dE9yTm9kZU9yV2lkZ2V0OiBhdXRvVG9vbHRpcE5vZGUudGV4dENvbnRlbnQsXHJcbiAgICAgICAgYXJvdW5kTm9kZTogYXV0b1Rvb2x0aXBOb2RlLFxyXG4gICAgICAgIHBvc2l0aW9uOiBbXCJhYm92ZVwiLCBcImJlbG93XCJdXHJcbiAgICAgIH0pO1xyXG4gICAgICBzaG93bkF1dG9Ub29sdGlwSW5mbyA9IHtcclxuICAgICAgICBtb3VzZU91dEg6IG9uY2UoYXV0b1Rvb2x0aXBOb2RlLCBbXCJtb3VzZW91dFwiLCBcIm1vdXNlZG93blwiLCBcInRvdWNoc3RhcnRcIl0sIF9jbGVhblVwKSxcclxuICAgICAgICBtb3VzZU1vdmVIOiBvbihkb2N1bWVudC5ib2R5LCBcIm1vdXNlbW92ZVwiLCAoKSA9PiB7XHJcbiAgICAgICAgICBpZiAoIWlzTW91c2VPdmVyKGF1dG9Ub29sdGlwTm9kZSkpIHtcclxuICAgICAgICAgICAgX2NsZWFuVXAoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH0pO1xyXG59XG5cbi8vIGdlb2VucmljaG1lbnQudXRpbHNcclxuY2xhc3MgRmxvd0xpc3REZWZhdWx0SXRlbVJlbmRlcmVyIHtcclxuICBjb25zdHJ1Y3RvcihwYXJhbXMpIHtcclxuICAgIC8vIGFkZGl0aW9uYWwgY2xhc3Nlc1xyXG4gICAgdGhpcy5pdGVtQ2xhc3MgPSBcIlwiO1xyXG4gICAgdGhpcy5pdGVtQ2xhc3NTZWxlY3RlZCA9IFwiXCI7XHJcbiAgICB0aGlzLmxhYmVsQ2xhc3MgPSBcIlwiO1xyXG4gICAgdGhpcy5jcmVhdGVMYWJlbE5vZGUgPSBmYWxzZTsgLy8gQm9vbGVhbi4gSWYgdHJ1ZSwgYSBzZXBhcmF0ZSBkb20gbm9kZSBmb3IgdGhlIGxhYmVsIHdpbGwgYmUgY3JlYXRlZC5cclxuICAgIHRoaXMuY3JlYXRlSW1hZ2VBZnRlckxhYmVsID0gZmFsc2U7IC8vIEJvb2xlYW4uIElmIHRydWUsIGxhYmVsIHdpbGwgYmUgY3JlYXRlZCBmaXJzdC5cclxuICAgIHRoaXMubWFrZUxhYmVsRmlsbFNwYWNlID0gZmFsc2U7XHJcbiAgICBtaXhpbih0aGlzLCBwYXJhbXMpO1xyXG4gIH1cclxuICAvLyBjcmVhdGVzIGEgdmlzdWFsIHByZXNlbnRhdGlvbiBhbmQgYWRkcyBpdCB0byB0aGUgbGlzdE5vZGVcclxuICAvLyBOb3RlOiBpZiB5b3UgZG9uJ3QgYWRkIGl0IHRvIHRoZSBsaXN0Tm9kZSBpdCB3b24ndCBiZSBpbiB0aGUgbGlzdFxyXG4gIC8vIFRoZSBmb2xsb3dpbmcgaXRlbSBwcm9wZXJ0aWVzIGFyZSBzdXBwb3J0ZWQ6XHJcbiAgLy8gSU1BR0VcclxuICAvLyBpdGVtLmltYWdlVXJsICAgICAgICAgICAgICAgIFN0cmluZy5cclxuICAvLyBpdGVtLmltYWdlQ2xhc3MgICAgICAgICAgICAgIFN0cmluZy5cclxuICAvLyBMQUJFTFxyXG4gIC8vIGl0ZW1bbGlzdC5sYWJlbFByb3BlcnR5XVxyXG4gIC8vIGl0ZW0ubGFiZWxDbGFzcyAgICAgICAgICAgICAgU3RyaW5nLlxyXG4gIC8vIE9USEVSXHJcbiAgLy8gaXRlbS50b29sdGlwICAgICAgICAgICAgICAgICBTdHJpbmcuXHJcbiAgLy8gaXRlbS5pc1NlcGFyYXRvciAgICAgICAgICAgICBCb29sZWFuLlxyXG4gIC8vIGl0ZW0uaXNMaW5rICAgICAgICAgICAgICAgICAgQm9vbGVhbi5cclxuICAvLyBpdGVtLmVuYWJsZWQgICAgICAgICAgICAgICAgIEJvb2xlYW4uIEFsc28gc3VwcG9ydGVkIGJ5IEZsb3dMaXN0LmpzLlxyXG4gIC8vIGl0ZW0uaXRlbUNsYXNzICAgICAgICAgICAgICAgU3RyaW5nLlxyXG4gIC8vIGl0ZW0uc3R5bGUgICAgICAgICAgICAgICAgICAgU3RyaW5nLlxyXG4gIGNyZWF0ZVByZXNlbnRhdGlvbihpdGVtLCBpc1NlbGVjdGVkLCBsaXN0Tm9kZSwgbGlzdCwgX2l0ZW1XcmFwcGVyIC8qU2hhbGxvdyBjb3B5IG9mIHRoZSBpdGVtLiBJbiBjYXNlIHlvdSB3YW50IHRvIGFkZCBzb21lIGN1c3RvbSBwcm9wZXJ0aWVzIHRvIHRoZSBpdGVtKi8pIHtcclxuICAgIGlmIChpdGVtLmlzU2VwYXJhdG9yKSB7XHJcbiAgICAgIGNvbnN0IHNlcFJvb3QgPSBjcmVhdGUoXCJkaXZcIiwgeyBjbGFzczogXCJmbG93TGlzdF9saXN0U2VwYXJhdG9yXCIgfSwgbGlzdE5vZGUpO1xyXG4gICAgICBpZiAoaXRlbS5oaWRkZW4pIHtcclxuICAgICAgICBoaWRlKHNlcFJvb3QpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBzZXBSb290O1xyXG4gICAgfVxyXG4gICAgY29uc3Qgcm9vdCA9IGNyZWF0ZShcImRpdlwiLCB7IGNsYXNzOiBcImxpc3RJdGVtIFwiICsgKHRoaXMuaXRlbUNsYXNzIHx8IFwiIFwiKSArIChpdGVtLml0ZW1DbGFzcyB8fCBcIlwiKSwgc3R5bGU6IGl0ZW0uc3R5bGUgfSwgbGlzdE5vZGUpO1xyXG4gICAgaWYgKGl0ZW0uaXNMaW5rKSB7XHJcbiAgICAgIGFkZENsYXNzKHJvb3QsIFwiZXNyaTRHRUxpbmtcIik7XHJcbiAgICB9XHJcbiAgICBpZiAoaXRlbS5lbmFibGVkID09PSBmYWxzZSkge1xyXG4gICAgICBhZGRDbGFzcyhyb290LCBcImRpc2FibGVkXCIpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fY3JlYXRlUGFydHMoaXRlbSwgcm9vdCwgbGlzdCk7XHJcbiAgICB0aGlzLl9zZXRUb29sdGlwKGl0ZW0sIHJvb3QsIGxpc3QpO1xyXG4gICAgdGhpcy5zZWxlY3RQcmVzZW50YXRpb24ocm9vdCwgaXNTZWxlY3RlZCwgaXRlbSk7XHJcbiAgICBpZiAoaXRlbS5oaWRkZW4pIHtcclxuICAgICAgaGlkZShyb290KTtcclxuICAgIH1cclxuICAgIC8vIEV4YW1wbGU6XHJcbiAgICAvLyB0aGlzIGlzIGhvdyB5b3UgY2FuIGFkZCBhIGRlc3Ryb3kgZnVuY3Rpb24gdG8gYSB3cmFwcGVyLiBJdCB3aWxsIGJlIGNhbGxlZCBvbiB0aGUgbmV4dCBjbGVhci9yZWZyZXNoLlxyXG4gICAgLy8gaXRlbVdyYXBwZXIuZGVzdHJveVByZXNlbnRhdGlvbiA9IGZ1bmN0aW9uKCl7fTtcclxuICAgIHJldHVybiByb290O1xyXG4gIH1cclxuICBfc2V0VG9vbHRpcChpdGVtLCByb290LCBfbGlzdCkge1xyXG4gICAgaWYgKGl0ZW0udG9vbHRpcCkge1xyXG4gICAgICBzZXRUb29sdGlwVG9Ob2RlKHJvb3QsIGl0ZW0udG9vbHRpcCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9jcmVhdGVQYXJ0cyhpdGVtLCByb290LCBsaXN0KSB7XHJcbiAgICBsZXQgbGFiZWxDcmVhdGVkO1xyXG4gICAgaWYgKHRoaXMuY3JlYXRlSW1hZ2VBZnRlckxhYmVsKSB7XHJcbiAgICAgIHRoaXMuX2NyZWF0ZUxhYmVsKGl0ZW0sIHJvb3QsIGxpc3QpO1xyXG4gICAgICBsYWJlbENyZWF0ZWQgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fY3JlYXRlSW1hZ2UoaXRlbSwgcm9vdCwgbGlzdCk7XHJcbiAgICAhbGFiZWxDcmVhdGVkICYmIHRoaXMuX2NyZWF0ZUxhYmVsKGl0ZW0sIHJvb3QsIGxpc3QpO1xyXG4gIH1cclxuICBfY3JlYXRlSW1hZ2UoaXRlbSwgcm9vdCwgbGlzdCkge1xyXG4gICAgY29uc3QgaW1hZ2VOb2RlID0gdGhpcy5fY3JlYXRlSW1hZ2VOb2RlKGl0ZW0sIHJvb3QsIGxpc3QpO1xyXG4gICAgaWYgKCFpbWFnZU5vZGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKGl0ZW0uaW1hZ2VDbGFzcykge1xyXG4gICAgICBhZGRDbGFzcyhpbWFnZU5vZGUsIGl0ZW0uaW1hZ2VDbGFzcyk7XHJcbiAgICB9XHJcbiAgICBpZiAoaXRlbS5pbWFnZVVybCkge1xyXG4gICAgICBpbWFnZU5vZGUuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gXCJ1cmwoXCIgKyBpdGVtLmltYWdlVXJsICsgXCIpO1wiO1xyXG4gICAgfVxyXG4gIH1cclxuICBfY3JlYXRlSW1hZ2VOb2RlKF9pdGVtLCByb290LCBfbGlzdCkge1xyXG4gICAgcmV0dXJuIHJvb3Q7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEByZXR1cm5zIE5ldyBsYWJlbCBub2RlIG9yIHJvb3QuXHJcbiAgICovXHJcbiAgX2NyZWF0ZUxhYmVsKGl0ZW0sIHJvb3QsIGxpc3QpIHtcclxuICAgIGlmICh0aGlzLmNyZWF0ZUxhYmVsTm9kZSkge1xyXG4gICAgICBjb25zdCBsYWJlbE5vZGUgPSBjcmVhdGUoXCJkaXZcIiwgeyB0ZXh0Q29udGVudDogaXRlbVtsaXN0LmxhYmVsUHJvcGVydHldLCBjbGFzczogXCJlc3JpR0VUcmltV2l0aEVsbGlwc2VzIGxpc3RJdGVtTGFiZWxcIiB9LCByb290KTtcclxuICAgICAgaWYgKGl0ZW0ubGFiZWxDbGFzcykge1xyXG4gICAgICAgIGFkZENsYXNzKGxhYmVsTm9kZSwgaXRlbS5sYWJlbENsYXNzKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5sYWJlbENsYXNzKSB7XHJcbiAgICAgICAgYWRkQ2xhc3MobGFiZWxOb2RlLCB0aGlzLmxhYmVsQ2xhc3MpO1xyXG4gICAgICB9XHJcbiAgICAgIGxpc3QuYXV0b0RldGVjdFVybHNJbkxhYmVscyAmJiB0aGlzLl90cnlDb252ZXJ0VG9VcmxzKGxhYmVsTm9kZSk7XHJcbiAgICAgIGlmICh0aGlzLm1ha2VMYWJlbEZpbGxTcGFjZSkge1xyXG4gICAgICAgIGxhYmVsTm9kZS5zdHlsZS5mbGV4R3JvdyA9IFwiMVwiO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBsYWJlbE5vZGU7XHJcbiAgICB9XHJcbiAgICBpZiAoaXRlbVtsaXN0LmxhYmVsUHJvcGVydHldKSB7XHJcbiAgICAgIHJvb3QudGV4dENvbnRlbnQgPSBpdGVtW2xpc3QubGFiZWxQcm9wZXJ0eV07XHJcbiAgICAgIGxpc3QuYXV0b0RldGVjdFVybHNJbkxhYmVscyAmJiB0aGlzLl90cnlDb252ZXJ0VG9VcmxzKHJvb3QpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG4gIF90cnlDb252ZXJ0VG9VcmxzKGxhYmVsTm9kZSkge1xyXG4gICAgY29uc3QgbSA9IGxhYmVsTm9kZS5pbm5lckhUTUwubWF0Y2goSVNfVVJMX1JFKTtcclxuICAgIGNvbnN0IHVybCA9IG0gJiYgbVswXTtcclxuICAgIGlmICh1cmwpIHtcclxuICAgICAgbGFiZWxOb2RlLmlubmVySFRNTCA9IGxhYmVsTm9kZS5pbm5lckhUTUwucmVwbGFjZSh1cmwsIFwiPGEgaHJlZj0nXCIgKyB0b0h0dHBzVXJsKHVybCkgKyBcIicgdGFyZ2V0PSdfYmxhbmsnPlwiICsgdXJsICsgXCI8L2E+XCIpO1xyXG4gICAgfVxyXG4gIH1cclxuICBzZWxlY3RQcmVzZW50YXRpb24ocm9vdCwgdmFsdWUsIF9pdGVtKSB7XHJcbiAgICB0b2dnbGVDbGFzcyhyb290LCBcImxpc3RJdGVtU2VsZWN0ZWQgXCIgKyB0aGlzLml0ZW1DbGFzc1NlbGVjdGVkLCB2YWx1ZSk7XHJcbiAgfVxyXG59XG5cbi8qKlxyXG4gKiBGbGV4aWJsZSBsaXN0IHRvIHJlbmRlciBpdGVtcy5cclxuICogLSBZb3UgY2FuIHVzZSBhbiBhcnJheSBvZiBpdGVtcyBvciBzdG9yZSBhcyBkYXRhLlxyXG4gKiAtIElmIHN0b3JlIGlzIHVzZWQsIHRoZSBsaXN0IGNhbiB3b3JrIGluIHRoZSBvbi1kZW1hbmQgbW9kZS4gVGhpcyBhbGxvd3MgdG8gdmlldyB1cCB0byAxLDAwMCwwMDAgaXRlbXMuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIDEuIENyZWF0ZSBmcm9tIGl0ZW1zLlxyXG4gKlxyXG4gKiBuZXcgRmxvd0xpc3Qoe1xyXG4gKiAgaWRQcm9wZXJ0eTogXCJpZFwiLCAvLyBkZWZhdWx0IGlzIFwidmFsdWVcIlxyXG4gKiAgaXRlbXM6IFt7IGlkOiBcIjBcIiwgbGFiZWw6IFwiRmlyc3QgaXRlbVwifSwgLi4uXVxyXG4gKiB9KS5wbGFjZUF0KG5vZGUpO1xyXG4gKlxyXG4gKiAyLiBDcmVhdGUgZnJvbSBhIHN0b3JlLlxyXG4gKlxyXG4gKiBuZXcgRmxvd0xpc3Qoe1xyXG4gKiAgc3RvcmU6IG5ldyBNZW1vcnkoeyBpZFByb3BlcnR5OiBcImlkXCIsIGRhdGE6IFt7IGlkOiBcIjBcIiwgbGFiZWw6IFwiRmlyc3QgaXRlbVwifSwgLi4uXSB9KVxyXG4gKiB9KS5wbGFjZUF0KG5vZGUpO1xyXG4gKlxyXG4gKiAzLiBVc2luZyBhIGN1c3RvbSBpdGVtIHJlbmRlcmVyLlxyXG4gKlxyXG4gKiBjbGFzcyBNeUl0ZW1SZW5kZXJlciBleHRlbmRzIEZsb3dMaXN0RGVmYXVsdEl0ZW1SZW5kZXJlciB7XHJcbiAqICAvLyBvdmVyaWRlXHJcbiAqICBjcmVhdGVQcmVzZW50YXRpb24oaXRlbTogRmxvd0xpc3RJdGVtLCBpc1NlbGVjdGVkOiBib29sZWFuLCBsaXN0Tm9kZTogSFRNTEVsZW1lbnQpOiBIVE1MRWxlbWVudCB7XHJcbiAqICAgIGNvbnN0IHJvb3QgPSBzdXBlci5jcmVhdGVQcmVzZW50YXRpb24oaXRlbSwgaXNTZWxlY3RlZCwgbGlzdE5vZGUpO1xyXG4gKlxyXG4gKiAgICAvLyBjdXN0b20gY2hhbmdlc1xyXG4gKiAgICByb290LnN0eWxlLmZvbnRTaXplID0gXCIxNnB4XCI7XHJcbiAqXHJcbiAqICAgIHJldHVybiByb290O1xyXG4gKiAgfVxyXG4gKlxyXG4gKiAgLy8gb3ZlcnJpZGVcclxuICogIHNlbGVjdFByZXNlbnRhdGlvbihyb290OiBIVE1MRWxlbWVudCwgaXNTZWxlY3RlZDogYm9vbGVhbik6IHZvaWQge1xyXG4gKiAgICByb290LnN0eWxlLmNvbG9yID0gaXNTZWxlY3RlZCA/IFwicmVkXCIgOiBcImJsdWVcIjtcclxuICogIH1cclxuICogfVxyXG4gKlxyXG4gKiBuZXcgRmxvd0xpc3Qoe1xyXG4gKiAgaXRlbXM6IFt7IHZhbHVlOiBcIjBcIiwgbGFiZWw6IFwiRmlyc3QgaXRlbVwifSwgLi4uXSxcclxuICogIGl0ZW1SZW5kZXJlcjogbmV3IE15SXRlbVJlbmRlcmVyKClcclxuICogfSkucGxhY2VBdChub2RlKTtcclxuICovXHJcbmxldCBGbG93TGlzdCA9IGNsYXNzIEZsb3dMaXN0IGV4dGVuZHMgVGVtcGxhdGVkV2lkZ2V0IHtcclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyBJbml0aWFsaXphdGlvblxyXG4gIC8vXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIGNvbnN0cnVjdG9yKHBhcmFtcywgcmVmTm9kZSwgcG9zaXRpb24pIHtcclxuICAgIHN1cGVyKHBhcmFtcywgcmVmTm9kZSwgcG9zaXRpb24pO1xyXG4gICAgdGhpcy5fdGVtcGxhdGVTdHJpbmcgPSBcIjxkaXYgY2xhc3M9J2Vzcmk0R0VGbG93TGlzdCBlc3JpR0VOb25TZWxlY3RhYmxlJz48L2Rpdj5cIjtcclxuICAgIHRoaXMuaWRQcm9wZXJ0eSA9IFwidmFsdWVcIjtcclxuICAgIHRoaXMubGFiZWxQcm9wZXJ0eSA9IFwibGFiZWxcIjtcclxuICAgIC8qKlxyXG4gICAgICogT3B0aW9uYWwuXHJcbiAgICAgKi9cclxuICAgIHRoaXMuaXRlbVJlbmRlcmVyID0gbnVsbDtcclxuICAgIC8qKlxyXG4gICAgICogV2lsbCBiZSBwYXNzZWQgdG8gdGhlIGl0ZW0gcmVuZGVyZXIuXHJcbiAgICAgKi9cclxuICAgIHRoaXMuaXRlbUNsYXNzID0gbnVsbDtcclxuICAgIC8qKlxyXG4gICAgICogV2lsbCBiZSBwYXNzZWQgdG8gdGhlIGl0ZW0gcmVuZGVyZXIuXHJcbiAgICAgKi9cclxuICAgIHRoaXMuaXRlbUNsYXNzU2VsZWN0ZWQgPSBudWxsO1xyXG4gICAgLy8gRkxBR1NcclxuICAgIC8qKlxyXG4gICAgICogSWYgdHJ1ZSwgd2lsbCBrZWVwIHRoZSBzY3JvbGwgcG9zaXRpb24gd2hlbiByZWZyZXNoZWQuXHJcbiAgICAgKi9cclxuICAgIHRoaXMua2VlcFNjcm9sbFBvc2l0aW9uID0gZmFsc2U7XHJcbiAgICAvKipcclxuICAgICAqIElmIHRydWUsIGNsaWNraW5nIGFuIGFscmVhZHkgc2VsZWN0ZWQgaXRlbSB3aWxsIHRyaWdnZXIgb25DaGFuZ2UoKSBldmVudC5cclxuICAgICAqL1xyXG4gICAgdGhpcy5hbGxvd1JlcGV0aXRpdmVTZWxlY3Rpb24gPSB0cnVlO1xyXG4gICAgLyoqXHJcbiAgICAgKiBJZiB0cnVlIGl0ZW1zIHdpbGwgYmUgc2VsZWN0ZWQgb24gbW91c2UgZG93biwgbm90IG9uIGNsaWNrLlxyXG4gICAgICovXHJcbiAgICB0aGlzLnNlbGVjdE9uTW91c2VEb3duID0gZmFsc2U7XHJcbiAgICAvKipcclxuICAgICAqIElmIHNwZWNpZmllZCwgbm8gZHJhZyBjbGljayBoYW5kbGVyIHdpbGwgYmUgdXNlZC5cclxuICAgICAqL1xyXG4gICAgdGhpcy5ub0RyYWdUb2xlcmFuY2UgPSAwO1xyXG4gICAgLyoqXHJcbiAgICAgKiBWYWxpZGF0ZXMgYSBzZWxlY3RlZCBpdGVtICh1c2UgaXQgdG8gcHJldmVudCBzZWxlY3Rpb24gb2YgZGlzYWJsZWQgaXRlbXMpLlxyXG4gICAgICovXHJcbiAgICB0aGlzLnNlbGVjdGlvblZhbGlkYXRvciA9IG51bGw7XHJcbiAgICAvKipcclxuICAgICAqIElmIGZhbHNlLCBhIHVzZXIgd29uJ3QgYmUgYWJsZSB0byBzZWxlY3QgaXRlbXMgd2l0aCB0aGUgbW91c2UsIGRlZmF1bHQgdHJ1ZS5cclxuICAgICAqL1xyXG4gICAgdGhpcy5hbGxvd01hbnVhbFNlbGVjdGlvbiA9IHRydWU7XHJcbiAgICAvKipcclxuICAgICAqIElmIHRydWUsIHByb3BhZ2F0aW9uIG9mIGEgY2xpY2sgZXZlbnQgd2lsbCBiZSBzdG9wcGVkLlxyXG4gICAgICovXHJcbiAgICB0aGlzLnN0b3BNb3VzZUV2ZW50UHJvcGFnYXRpb24gPSB0cnVlO1xyXG4gICAgLyoqXHJcbiAgICAgKiBJZiBmYWxzZSwgaXRlbXMgY2FuJ3QgYmUgbWFya2VkIGFzIHNlbGVjdGVkIGluIHRoZSBsaXN0LlxyXG4gICAgICovXHJcbiAgICB0aGlzLmhhc1NlbGVjdGFibGVJdGVtcyA9IHRydWU7XHJcbiAgICAvKipcclxuICAgICAqIElmIHRydWUsIFVSTC1saWtlIHRleHQgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gY2xpY2thYmxlIGh5cGVybGlua3MgaW4gbGFiZWxzLlxyXG4gICAgICovXHJcbiAgICB0aGlzLmF1dG9EZXRlY3RVcmxzSW5MYWJlbHMgPSBmYWxzZTtcclxuICAgIC8qKlxyXG4gICAgICogSWYgdHJ1ZSwgaXRlbXMgd2lsbCBiZSByZW5kZXJlZCBpbiB0aGUgaW5uZXIgZGl2IGFuZCBub3QgaW4gdGhlIGRvbU5vZGUuXHJcbiAgICAgKi9cclxuICAgIHRoaXMuc3RvcmVJdGVtc0luSW5uZXJEaXYgPSBmYWxzZTtcclxuICAgIC8qKlxyXG4gICAgICogRG9tIG5vZGUuIFJlYWQtb25seS4gVGhlIGNvbnRhaW5lciBvZiB0aGUgbGlzdCBpdGVtcy5cclxuICAgICAqIENhbiBiZSB1c2VkIHRvIGFkZCBhZGRpdGlvbmFsIG5vZGVzIHRvIHRoZSBsaXN0IGFib3ZlIG9yIGJlbG93IHRoZSBpdGVtcy5cclxuICAgICAqL1xyXG4gICAgdGhpcy5pdGVtc0RpdiA9IG51bGw7XHJcbiAgICAvLyBPTi1ERU1BTkQgb3B0aW9uc1xyXG4gICAgLyoqXHJcbiAgICAgKiBOdW1iZXIgb2YgaXRlbXMgcGVyIGxvYWQgaXRlcmF0aW9uLlxyXG4gICAgICovXHJcbiAgICB0aGlzLm9uRGVtYW5kTW9kZUxvYWRTdGVwID0gMTAwMDtcclxuICAgIC8qKlxyXG4gICAgICogTnVtYmVyIG9mIGl0ZW1zIHRvIGJlIGxvYWRlZCB3aGVuIHRoZSBsaXN0IGlzIG9wZW5lZC5cclxuICAgICAqL1xyXG4gICAgdGhpcy5vbkRlbWFuZFBvcHVsYXRlTGltaXQgPSAxMDAwO1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbiBtaWxsaXNlY29uZHMuXHJcbiAgICAgKi9cclxuICAgIHRoaXMub25EZW1hbmRQb3B1bGF0ZVBlcmlvZCA9IDIwMDtcclxuICAgIC8vIGludGVybmFsIHByb3BlcnRpZXNcclxuICAgIHRoaXMuX2FkZGVkV3JhcHBlcnMgPSBbXTtcclxuICAgIHRoaXMuX2NsaWNrSGFuZGxlcyA9IG51bGw7XHJcbiAgICB0aGlzLl92YWx1ZU9uQ3JlYXRpb24gPSBudWxsO1xyXG4gICAgdGhpcy5faXNDcmVhdGVkID0gZmFsc2U7XHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAvL1xyXG4gICAgLy8gUHJlYXJpbmcgaXRlbXMgYW5kIHdyYXBwZXJzXHJcbiAgICAvL1xyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgdGhpcy5fc2VsZWN0ZWRQcmVzZW50YXRpb24gPSBudWxsO1xyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLy9cclxuICAgIC8vIFNjcm9sbFxyXG4gICAgLy9cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIHRoaXMuX3Njcm9sbFRvcE1lbW8gPSAwO1xyXG4gIH1cclxuICBwb3N0Q3JlYXRlKCkge1xyXG4gICAgaWYgKHRoaXMuc3RvcmVJdGVtc0luSW5uZXJEaXYpIHtcclxuICAgICAgdGhpcy5fc2V0KFwiaXRlbXNEaXZcIiwgY3JlYXRlKFwiZGl2XCIsIHsgY2xhc3M6IFwiZXNyaTRHRUZsb3dMaXN0X2lubmVyRGl2XCIgfSwgdGhpcy5kb21Ob2RlKSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgdGhpcy5fc2V0KFwiaXRlbXNEaXZcIiwgdGhpcy5kb21Ob2RlKTtcclxuICAgIH1cclxuICAgIHRoaXMuX2NsZWFySGFuZGxlcnMoKTtcclxuICAgIHRoaXMuX3NldFVwSXRlbVJlbmRlcmVyKCk7XHJcbiAgICBhdXRvVG9vbHRpcCh0aGlzLmRvbU5vZGUpO1xyXG4gICAgdGhpcy5faXNDcmVhdGVkID0gdHJ1ZTtcclxuICAgIHRoaXMucmVmcmVzaCgpO1xyXG4gICAgaWYgKHRoaXMuX3ZhbHVlT25DcmVhdGlvbikge1xyXG4gICAgICB0aGlzLnZhbHVlID0gdGhpcy5fdmFsdWVPbkNyZWF0aW9uO1xyXG4gICAgfVxyXG4gIH1cclxuICBfc2V0VXBJdGVtUmVuZGVyZXIoKSB7XHJcbiAgICBpZiAoIXRoaXMuaXRlbVJlbmRlcmVyKSB7XHJcbiAgICAgIHRoaXMuaXRlbVJlbmRlcmVyID0gbmV3IEZsb3dMaXN0RGVmYXVsdEl0ZW1SZW5kZXJlcigpO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuaXRlbUNsYXNzKSB7XHJcbiAgICAgIHRoaXMuaXRlbVJlbmRlcmVyLml0ZW1DbGFzcyA9IHRoaXMuaXRlbUNsYXNzO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuaXRlbUNsYXNzU2VsZWN0ZWQpIHtcclxuICAgICAgdGhpcy5pdGVtUmVuZGVyZXIuaXRlbUNsYXNzU2VsZWN0ZWQgPSB0aGlzLml0ZW1DbGFzc1NlbGVjdGVkO1xyXG4gICAgfVxyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyBHZXR0aW5nICYgc2V0dGluZyB2YWx1ZVxyXG4gIC8vXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8qKlxyXG4gICAqIEN1cnJlbnQgc2VsZWN0ZWQgaXRlbSB2YWx1ZS5cclxuICAgKi9cclxuICBnZXQgdmFsdWUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5zZWxlY3RlZEl0ZW0gJiYgdGhpcy5zZWxlY3RlZEl0ZW1bdGhpcy5pZFByb3BlcnR5XTtcclxuICB9XHJcbiAgc2V0IHZhbHVlKHZhbHVlKSB7XHJcbiAgICBpZiAoIXRoaXMuX2lzQ3JlYXRlZCkge1xyXG4gICAgICB0aGlzLl92YWx1ZU9uQ3JlYXRpb24gPSB2YWx1ZTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fc2V0KFwidmFsdWVcIiwgdmFsdWUpO1xyXG4gICAgY29uc3Qgc291cmNlID0gdGhpcy5pdGVtcyB8fCAodGhpcy5zdG9yZSAmJiB0aGlzLnN0b3JlLmRhdGEpO1xyXG4gICAgc291cmNlICYmXHJcbiAgICAgIHNvdXJjZS5zb21lKChpdGVtKSA9PiB7XHJcbiAgICAgICAgaWYgKGl0ZW1bdGhpcy5pZFByb3BlcnR5XSA9PT0gdmFsdWUpIHtcclxuICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJdGVtID0gaXRlbTtcclxuICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBzdG9wIHRoZSBjeWNsZVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyBTZXR0aW5nIGl0ZW1zXHJcbiAgLy9cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLyoqXHJcbiAgICogTGlzdCBpdGVtcy4gQSBsaXN0IGNhbiBiZSBmZWQgd2l0aCBlaXRoZXIgYW4gYXJyYXkgb2YgaXRlbXMgb3Igc3RvcmUuXHJcbiAgICovXHJcbiAgc2V0IGl0ZW1zKGl0ZW1zKSB7XHJcbiAgICB0aGlzLl9zZXRJdGVtcyhpdGVtcyk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFNldHMgaXRlbXMgdG8gdGhlIGxpc3QuXHJcbiAgICovXHJcbiAgX3NldEl0ZW1zKGl0ZW1zKSB7XHJcbiAgICBpZiAodGhpcy5rZWVwU2Nyb2xsUG9zaXRpb24pIHtcclxuICAgICAgdGhpcy5tZW1vU2Nyb2xsKCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmNsZWFyKCk7XHJcbiAgICB0aGlzLl9zZXQoXCJpdGVtc1wiLCBpdGVtcyk7XHJcbiAgICBpZiAoIXRoaXMuaXRlbXMgfHwgIXRoaXMuX2lzQ3JlYXRlZCkge1xyXG4gICAgICB0aGlzLl9jaGVja0lmU3RpbGxTZWxlY3RlZCgpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLl9hZGRJdGVtcyhpdGVtcyk7XHJcbiAgICB0aGlzLl9jaGVja0lmU3RpbGxTZWxlY3RlZCgpO1xyXG4gICAgaWYgKHRoaXMua2VlcFNjcm9sbFBvc2l0aW9uKSB7XHJcbiAgICAgIHRoaXMuYXBwbHlTY3JvbGxGcm9tTWVtbygpO1xyXG4gICAgfVxyXG4gIH1cclxuICBfY2hlY2tJZlN0aWxsU2VsZWN0ZWQoKSB7XHJcbiAgICBpZiAodGhpcy5zZWxlY3RlZEluZGV4ID09PSAtMSAmJiAhdGhpcy5zZWxlY3RlZEl0ZW0pIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKCF0aGlzLl9hZGRlZFdyYXBwZXJzIHx8ICF0aGlzLl9hZGRlZFdyYXBwZXJzLnNvbWUoKHdyYXBwZXIsIGluZGV4KSA9PiB0aGlzLl9pc0l0ZW1TZWxlY3RlZCh3cmFwcGVyLCBpbmRleCkpKSB7XHJcbiAgICAgIHRoaXMuX3NldChcInNlbGVjdGVkSW5kZXhcIiwgLTEpO1xyXG4gICAgICB0aGlzLl9zZXQoXCJzZWxlY3RlZEl0ZW1cIiwgbnVsbCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vIERBVEFcclxuICAvKipcclxuICAgKiBJdGVtcyBzdG9yZS4gQSBsaXN0IGNhbiBiZSBmZWQgd2l0aCBlaXRoZXIgYW4gYXJyYXkgb2YgaXRlbXMgb3Igc3RvcmUuXHJcbiAgICogVGhlIGZpcnN0IG9uRGVtYW5kUG9wdWxhdGVMaW1pdCBpdGVtcyB3aWxsIGJlIGxvYWRlZCBlYWNoIG9uRGVtYW5kUG9wdWxhdGVQZXJpb2QgaW50ZXJ2YWwuXHJcbiAgICogVGhlIHJlc3QgaXRlbXMgd2lsbCBiZSBsb2FkZWQgYXMgYSB1c2VyIHNjcm9sbHMgZG93biB0aGUgbGlzdC5cclxuICAgKiBOT1RFOiBpZiB5b3Ugd2FudCB0aGUgbGlzdCB0byBiZSBpbiB0aGUgb24tZGVtYW5kIG1vZGUsIHVzZSBhIHN0b3JlLCBub3QgaXRlbXMuXHJcbiAgICovXHJcbiAgc2V0IHN0b3JlKHN0b3JlKSB7XHJcbiAgICB0aGlzLl9zZXRTdG9yZShzdG9yZSk7XHJcbiAgfVxyXG4gIF9zZXRTdG9yZShzdG9yZSkge1xyXG4gICAgaWYgKHRoaXMua2VlcFNjcm9sbFBvc2l0aW9uKSB7XHJcbiAgICAgIHRoaXMubWVtb1Njcm9sbCgpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5jbGVhcigpO1xyXG4gICAgdGhpcy5fc2V0KFwic3RvcmVcIiwgc3RvcmUpO1xyXG4gICAgdGhpcy5pZFByb3BlcnR5ID0gc3RvcmUgJiYgc3RvcmUuaWRQcm9wZXJ0eTtcclxuICAgIGlmICghdGhpcy5zdG9yZSB8fCAhdGhpcy5faXNDcmVhdGVkKSB7XHJcbiAgICAgIHRoaXMuX2NoZWNrSWZTdGlsbFNlbGVjdGVkKCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIC8vIGFkZCBpbml0aWFsIGFtb3VudCBvZiBpdGVtc1xyXG4gICAgdGhpcy5fbG9hZE5leHRQYXJ0KCk7XHJcbiAgICB0aGlzLl9jaGVja0lmU3RpbGxTZWxlY3RlZCgpO1xyXG4gICAgaWYgKHRoaXMua2VlcFNjcm9sbFBvc2l0aW9uKSB7XHJcbiAgICAgIHRoaXMuYXBwbHlTY3JvbGxGcm9tTWVtbygpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fZG9tTm9kZVNjcm9sbEggJiYgdGhpcy5fZG9tTm9kZVNjcm9sbEgucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9kb21Ob2RlU2Nyb2xsSCA9IG9uKHRoaXMuZG9tTm9kZSwgXCJzY3JvbGxcIiwgKCkgPT4ge1xyXG4gICAgICAvLyB0cnkgdG8gZ2V0IHRoZSBvbmUgb2YgdGhlIGxhc3QgZWxlbWVudHMgaW4gdGhlIGxpc3RcclxuICAgICAgY29uc3Qgd3JhcHBlciA9IHRoaXMuX2FkZGVkV3JhcHBlcnNbdGhpcy5fYWRkZWRXcmFwcGVycy5sZW5ndGggLSAzMF07XHJcbiAgICAgIGNvbnN0IHByZXNlbnRhdGlvbiA9IHdyYXBwZXIgPyB3cmFwcGVyLml0ZW1QcmVzZW50YXRpb24gOiBudWxsO1xyXG4gICAgICBpZiAocHJlc2VudGF0aW9uICYmIHByZXNlbnRhdGlvbi5vZmZzZXRUb3AgPCB0aGlzLmRvbU5vZGUuc2Nyb2xsVG9wKSB7XHJcbiAgICAgICAgdGhpcy5fbG9hZE5leHRQYXJ0KCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICBfbG9hZE5leHRQYXJ0KCkge1xyXG4gICAgaWYgKCF0aGlzLnN0b3JlIHx8IHRoaXMuc3RvcmUuZGF0YS5sZW5ndGggPT09IHRoaXMuX2FkZGVkV3JhcHBlcnMubGVuZ3RoKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5zdG9yZS5xdWVyeShudWxsLCB7XHJcbiAgICAgIHN0YXJ0OiB0aGlzLl9hZGRlZFdyYXBwZXJzLmxlbmd0aCxcclxuICAgICAgY291bnQ6IHRoaXMub25EZW1hbmRNb2RlTG9hZFN0ZXBcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fYWRkSXRlbXMoaXRlbXMpO1xyXG4gICAgaWYgKGl0ZW1zLmxlbmd0aCAmJiB0aGlzLl9hZGRlZFdyYXBwZXJzLmxlbmd0aCA8IHRoaXMub25EZW1hbmRQb3B1bGF0ZUxpbWl0KSB7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5fbG9hZE5leHRQYXJ0KCksIHRoaXMub25EZW1hbmRQb3B1bGF0ZVBlcmlvZCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vIFNlbGVjdGluZyBpdGVtcyBieSBpdGVtIG9yIGluZGV4XHJcbiAgLy9cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgc2V0IHNlbGVjdGVkSXRlbShpdGVtKSB7XHJcbiAgICB0aGlzLl9zZXRTZWxlY3RlZFByZXNlbnRhdGlvbih0aGlzLnF1ZXJ5SXRlbSh7IGl0ZW0gfSkubm9kZSk7XHJcbiAgfVxyXG4gIHNldCBzZWxlY3RlZEluZGV4KGluZGV4KSB7XHJcbiAgICB0aGlzLl9zZXRTZWxlY3RlZFByZXNlbnRhdGlvbih0aGlzLnF1ZXJ5SXRlbSh7IGluZGV4IH0pLm5vZGUpO1xyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyBSZWZyZXNoXHJcbiAgLy9cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgcmVmcmVzaCgpIHtcclxuICAgIGlmICh0aGlzLnN0b3JlKSB7XHJcbiAgICAgIHRoaXMuX3NldFN0b3JlKHRoaXMuc3RvcmUpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHRoaXMuX3NldEl0ZW1zKHRoaXMuaXRlbXMpO1xyXG4gICAgfVxyXG4gIH1cclxuICBfYWRkSXRlbXMoaXRlbXMpIHtcclxuICAgIHRoaXMuX2FkZGVkV3JhcHBlcnMgPSB0aGlzLl9hZGRlZFdyYXBwZXJzIHx8IFtdO1xyXG4gICAgLy8gcHJlcGFyZSB3cmFwcGVycyBzbyB3ZSBjYW4gYWRkIHByaXZhdGUgcHJvcGVydGllc1xyXG4gICAgLy8ganVzdCBjb3B5IHRoZSBpdGVtc1xyXG4gICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICBjb25zdCB3cmFwcGVyID0gbWl4aW4oe30sIGl0ZW0pO1xyXG4gICAgICB3cmFwcGVyLml0ZW1SZWYgPSBpdGVtO1xyXG4gICAgICB0aGlzLl9hZGRXcmFwcGVyKHdyYXBwZXIpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIF9hZGRXcmFwcGVyKHdyYXBwZXIpIHtcclxuICAgIGNvbnN0IGkgPSB0aGlzLl9hZGRlZFdyYXBwZXJzLmxlbmd0aDtcclxuICAgIGNvbnN0IGl0ZW1QcmVzZW50YXRpb24gPSB0aGlzLml0ZW1SZW5kZXJlci5jcmVhdGVQcmVzZW50YXRpb24od3JhcHBlci5pdGVtUmVmLCB0aGlzLl9pc0l0ZW1TZWxlY3RlZCh3cmFwcGVyLCBpKSwgdGhpcy5pdGVtc0RpdiwgdGhpcywgd3JhcHBlcik7XHJcbiAgICBpZiAoIWl0ZW1QcmVzZW50YXRpb24pIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaXRlbVByZXNlbnRhdGlvbi5pbmRleCA9IGk7XHJcbiAgICBpdGVtUHJlc2VudGF0aW9uLml0ZW0gPSB3cmFwcGVyLml0ZW1SZWY7XHJcbiAgICB3cmFwcGVyLml0ZW1QcmVzZW50YXRpb24gPSBpdGVtUHJlc2VudGF0aW9uO1xyXG4gICAgaWYgKHRoaXMuX2lzSXRlbVNlbGVjdGVkKHdyYXBwZXIsIGkpKSB7XHJcbiAgICAgIHRoaXMuX3NldFNlbGVjdGVkUHJlc2VudGF0aW9uKGl0ZW1QcmVzZW50YXRpb24pO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fYWRkQ2xpY2tIYW5kbGVyKGl0ZW1QcmVzZW50YXRpb24pO1xyXG4gICAgLy8gcHJvdmlkZSBpbnRlcm5hbCBpZFxyXG4gICAgdGhpcy5fYWRkZWRXcmFwcGVycy5wdXNoKHdyYXBwZXIpO1xyXG4gICAgY29uc3Qgd3JhcHBlckluZGV4ID0gdGhpcy5fYWRkZWRXcmFwcGVycy5sZW5ndGggLSAxO1xyXG4gICAgYWRkQ2xhc3MoaXRlbVByZXNlbnRhdGlvbiwgXCJsaXN0SXRlbV9cIiArIHdyYXBwZXJJbmRleCk7XHJcbiAgICBhZGRDbGFzcyhpdGVtUHJlc2VudGF0aW9uLCBcImxpc3RJdGVtX1wiICsgKHdyYXBwZXJJbmRleCAlIDIgPT09IDAgPyBcImV2ZW5cIiA6IFwib2RkXCIpKTtcclxuICB9XHJcbiAgX2lzSXRlbVNlbGVjdGVkKHdyYXBwZXIsIGluZGV4KSB7XHJcbiAgICBpZiAoIXRoaXMuaGFzU2VsZWN0YWJsZUl0ZW1zIHx8ICF0aGlzLl9pc0l0ZW1DbGlja2FibGUod3JhcHBlcikpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgaWYgKGluZGV4ID09PSB0aGlzLnNlbGVjdGVkSW5kZXgpIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICBpZiAod3JhcHBlci5pdGVtUmVmID09PSB0aGlzLnNlbGVjdGVkSXRlbSkge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGlmICh3cmFwcGVyLml0ZW1SZWYgJiYgdGhpcy5zZWxlY3RlZEl0ZW0pIHtcclxuICAgICAgY29uc3QgdmFsdWUxID0gd3JhcHBlci5pdGVtUmVmW3RoaXMuaWRQcm9wZXJ0eV07XHJcbiAgICAgIGNvbnN0IHZhbHVlMiA9IHRoaXMuc2VsZWN0ZWRJdGVtW3RoaXMuaWRQcm9wZXJ0eV07XHJcbiAgICAgIHJldHVybiB2YWx1ZTEgIT09IHVuZGVmaW5lZCAmJiB2YWx1ZTEgPT09IHZhbHVlMjtcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vXHJcbiAgLy8gV29ya2luZyBzZWxlY3Rpb25cclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICBfaXNJdGVtQ2xpY2thYmxlKGl0ZW0pIHtcclxuICAgIHJldHVybiB0aGlzLnNlbGVjdGlvblZhbGlkYXRvciA/IHRoaXMuc2VsZWN0aW9uVmFsaWRhdG9yKGl0ZW0pIDogdGhpcy5fc2VsZWN0aW9uVmFsaWRhdG9yRGVmYXVsdChpdGVtKTtcclxuICB9XHJcbiAgX3NlbGVjdGlvblZhbGlkYXRvckRlZmF1bHQoaXRlbSkge1xyXG4gICAgcmV0dXJuICEhaXRlbSAmJiAhaXRlbS5pc1NlcGFyYXRvciAmJiBpdGVtLmVuYWJsZWQgIT09IGZhbHNlO1xyXG4gIH1cclxuICBfYWRkQ2xpY2tIYW5kbGVyKHByZXNlbnRhdGlvbikge1xyXG4gICAgaWYgKCF0aGlzLmFsbG93TWFudWFsU2VsZWN0aW9uKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IHByb2Nlc3NTZWxlY3Rpb24gPSAoKSA9PiB7XHJcbiAgICAgIGlmICghdGhpcy5hbGxvd1JlcGV0aXRpdmVTZWxlY3Rpb24gJiYgdGhpcy5fc2VsZWN0ZWRQcmVzZW50YXRpb24gPT09IHByZXNlbnRhdGlvbikge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLl9zZXRTZWxlY3RlZFByZXNlbnRhdGlvbihwcmVzZW50YXRpb24pICYmIHRoaXMuX2Rpc3BhdGNoQ2hhbmdlRXZlbnQoKTtcclxuICAgIH07XHJcbiAgICBsZXQgaGFuZGxlO1xyXG4gICAgaWYgKHRoaXMuc2VsZWN0T25Nb3VzZURvd24gfHwgIXRoaXMubm9EcmFnVG9sZXJhbmNlKSB7XHJcbiAgICAgIGhhbmRsZSA9IG9uKHByZXNlbnRhdGlvbiwgdGhpcy5zZWxlY3RPbk1vdXNlRG93biA/IFwicHJlc3NcIiA6IFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgdGhpcy5zdG9wTW91c2VFdmVudFByb3BhZ2F0aW9uICYmIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIHByb2Nlc3NTZWxlY3Rpb24oKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgaGFuZGxlID0gYWRkTm9EcmFnQ2xpY2tIYW5kbGVyKHByZXNlbnRhdGlvbiwgcHJvY2Vzc1NlbGVjdGlvbiwge1xyXG4gICAgICAgIHRvbGVyYW5jZTogdGhpcy5ub0RyYWdUb2xlcmFuY2VcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9jbGlja0hhbmRsZXMucHVzaChoYW5kbGUpO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBAcmV0dXJucyB0cnVlLCBpZiB0aGUgc2VsZWN0aW9uIHdhcyBzdWNjZXNzZnVsXHJcbiAgICovXHJcbiAgX3NldFNlbGVjdGVkUHJlc2VudGF0aW9uKHByZXNlbnRhdGlvbikge1xyXG4gICAgdGhpcy5fc2V0KFwic2VsZWN0ZWRJbmRleFwiLCAtMSk7XHJcbiAgICB0aGlzLl9zZXQoXCJzZWxlY3RlZEl0ZW1cIiwgbnVsbCk7XHJcbiAgICAvLyB2YWxpZGF0ZSBzZWxlY3Rpb25cclxuICAgIGlmICghdGhpcy5oYXNTZWxlY3RhYmxlSXRlbXMgfHwgIShwcmVzZW50YXRpb24gJiYgdGhpcy5faXNJdGVtQ2xpY2thYmxlKHByZXNlbnRhdGlvbi5pdGVtKSkpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuX3NlbGVjdGVkUHJlc2VudGF0aW9uKSB7XHJcbiAgICAgIHRoaXMuaXRlbVJlbmRlcmVyLnNlbGVjdFByZXNlbnRhdGlvbiAmJlxyXG4gICAgICAgIHRoaXMuaXRlbVJlbmRlcmVyLnNlbGVjdFByZXNlbnRhdGlvbih0aGlzLl9zZWxlY3RlZFByZXNlbnRhdGlvbiwgZmFsc2UsIHRoaXMuX3NlbGVjdGVkUHJlc2VudGF0aW9uLml0ZW0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHByZXNlbnRhdGlvbikge1xyXG4gICAgICB0aGlzLml0ZW1SZW5kZXJlci5zZWxlY3RQcmVzZW50YXRpb24gJiZcclxuICAgICAgICB0aGlzLml0ZW1SZW5kZXJlci5zZWxlY3RQcmVzZW50YXRpb24ocHJlc2VudGF0aW9uLCB0aGlzLmhhc1NlbGVjdGFibGVJdGVtcywgcHJlc2VudGF0aW9uLml0ZW0pO1xyXG4gICAgICB0aGlzLl9zZWxlY3RlZFByZXNlbnRhdGlvbiA9IHByZXNlbnRhdGlvbjtcclxuICAgICAgdGhpcy5fc2V0KFwic2VsZWN0ZWRJbmRleFwiLCBwcmVzZW50YXRpb24uaW5kZXgpO1xyXG4gICAgICB0aGlzLl9zZXQoXCJzZWxlY3RlZEl0ZW1cIiwgcHJlc2VudGF0aW9uLml0ZW0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG4gIF9kaXNwYXRjaENoYW5nZUV2ZW50KCkge1xyXG4gICAgdGhpcy5fb25DaGFuZ2Uoe1xyXG4gICAgICB0eXBlOiBcImNoYW5nZVwiLFxyXG4gICAgICBzZWxlY3RlZEluZGV4OiB0aGlzLnNlbGVjdGVkSW5kZXgsXHJcbiAgICAgIHNlbGVjdGVkSXRlbTogdGhpcy5zZWxlY3RlZEl0ZW0sXHJcbiAgICAgIHZhbHVlOiB0aGlzLnZhbHVlXHJcbiAgICB9KTtcclxuICB9XHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vXHJcbiAgLy8gQ2xlYXJpbmcgdGhlIGxpc3RcclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICBjbGVhcigpIHtcclxuICAgIHRoaXMuX3NlbGVjdGVkUHJlc2VudGF0aW9uID0gbnVsbDtcclxuICAgIHRoaXMuX2FkZGVkV3JhcHBlcnMgPSB0aGlzLl9hZGRlZFdyYXBwZXJzIHx8IFtdO1xyXG4gICAgLy8gdGhpcyBjYW4gYmUgdXNlZCB0byBkZXN0cm95IHdpZGdldHMgY3JlYXRlZCBpbiB0aGUgaXRlbSByZW5kZXJlclxyXG4gICAgdGhpcy5fYWRkZWRXcmFwcGVycyAmJlxyXG4gICAgICB0aGlzLl9hZGRlZFdyYXBwZXJzLmZvckVhY2goKHdyYXBwZXIpID0+IHtcclxuICAgICAgICB3cmFwcGVyLmRlc3Ryb3lQcmVzZW50YXRpb24gJiYgd3JhcHBlci5kZXN0cm95UHJlc2VudGF0aW9uKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgdGhpcy5fYWRkZWRXcmFwcGVycy5sZW5ndGggPSAwO1xyXG4gICAgdGhpcy5pdGVtc0RpdiAmJiBlbXB0eSh0aGlzLml0ZW1zRGl2KTtcclxuICAgIHRoaXMuX2NsZWFySGFuZGxlcnMoKTtcclxuICB9XHJcbiAgX2NsZWFySGFuZGxlcnMoKSB7XHJcbiAgICB0aGlzLl9jbGlja0hhbmRsZXMgPSB0aGlzLl9jbGlja0hhbmRsZXMgfHwgW107XHJcbiAgICB0aGlzLl9jbGlja0hhbmRsZXMuZm9yRWFjaCgoaCkgPT4ge1xyXG4gICAgICBoLnJlbW92ZSgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9jbGlja0hhbmRsZXMubGVuZ3RoID0gMDtcclxuICB9XHJcbiAgbWVtb1Njcm9sbCgpIHtcclxuICAgIHRoaXMuX3Njcm9sbFRvcE1lbW8gPSB0aGlzLmRvbU5vZGUgPyB0aGlzLmRvbU5vZGUuc2Nyb2xsVG9wIDogMDtcclxuICB9XHJcbiAgYXBwbHlTY3JvbGxGcm9tTWVtbygpIHtcclxuICAgIHRoaXMuZG9tTm9kZS5zY3JvbGxUb3AgPSB0aGlzLl9zY3JvbGxUb3BNZW1vIHx8IDA7XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vIE5hdmlnYXRpb25cclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICBzY3JvbGxUb0l0ZW0oaXRlbSkge1xyXG4gICAgY29uc3Qgbm9kZSA9IHRoaXMucXVlcnlJdGVtKHsgaXRlbSB9KS5ub2RlO1xyXG4gICAgaWYgKG5vZGUpIHtcclxuICAgICAgdGhpcy5kb21Ob2RlLnNjcm9sbFRvcCA9IG5vZGUub2Zmc2V0VG9wO1xyXG4gICAgfVxyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyBTb21lIHF1ZXJ5IG1ldGhvZHNcclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvKipcclxuICAgKiBRdWVyaWVzIHRoZSBsaXN0IGZvciBpdGVtcyBvciBub2Rlcy5cclxuICAgKiBAcGFyYW0gcXVlcnkuaXRlbSAgICBJdGVtIHRvIHF1ZXJ5IGJ5LlxyXG4gICAqIEBwYXJhbSBxdWVyeS5ub2RlICAgIE5vZGUgdG8gcXVlcnkgYnkuXHJcbiAgICogQHBhcmFtIHF1ZXJ5LnZhbHVlICAgSXRlbSB2YWx1ZSB0byBxdWVyeSBieS5cclxuICAgKiBAcGFyYW0gcXVlcnkuaW5kZXggICBJdGVtIGluZGV4IHRvIHF1ZXJ5IGJ5LlxyXG4gICAqXHJcbiAgICogQHJldHVybnMgT2JqZWN0IHsgaXRlbTogTGlzdCBpdGVtLCBub2RlOiBEb20gbm9kZSwgaW5kZXg6IEl0ZW0gaW5kZXggfS4gTnVsbCBpcyBuZXZlciByZXR1cm5lZC5cclxuICAgKi9cclxuICBxdWVyeUl0ZW0ocXVlcnkpIHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IHtcclxuICAgICAgaXRlbTogbnVsbCxcclxuICAgICAgbm9kZTogbnVsbCxcclxuICAgICAgaW5kZXg6IC0xXHJcbiAgICB9O1xyXG4gICAgdGhpcy5fYWRkZWRXcmFwcGVycyAmJlxyXG4gICAgICB0aGlzLl9hZGRlZFdyYXBwZXJzLnNvbWUoKHcsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgaWYgKChxdWVyeS5pdGVtICYmIHcuaXRlbVJlZiA9PT0gcXVlcnkuaXRlbSkgfHxcclxuICAgICAgICAgIChxdWVyeS5ub2RlICYmIHcuaXRlbVByZXNlbnRhdGlvbiA9PT0gcXVlcnkubm9kZSkgfHxcclxuICAgICAgICAgIChxdWVyeS52YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHcuaXRlbVJlZlt0aGlzLmlkUHJvcGVydHldID09PSBxdWVyeS52YWx1ZSkgfHxcclxuICAgICAgICAgIChxdWVyeS5pbmRleCAhPT0gdW5kZWZpbmVkICYmIGluZGV4ID09PSBxdWVyeS5pbmRleCkpIHtcclxuICAgICAgICAgIHJlc3VsdC5pdGVtID0gdy5pdGVtUmVmO1xyXG4gICAgICAgICAgcmVzdWx0Lm5vZGUgPSB3Lml0ZW1QcmVzZW50YXRpb247XHJcbiAgICAgICAgICByZXN1bHQuaW5kZXggPSBpbmRleDtcclxuICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBzdG9wIHRoZSBjeWNsZVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vXHJcbiAgLy8gTW91c2Ugb3ZlclxyXG4gIC8vXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIGlzTW91c2VPdmVyKGV2ZW50KSB7XHJcbiAgICByZXR1cm4gaXNNb3VzZU92ZXIodGhpcy5kb21Ob2RlLCB7IGV2ZW50IH0pO1xyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyBFdmVudHNcclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICBfb25DaGFuZ2UoZXZlbnQpIHtcclxuICAgIHRoaXMub25DaGFuZ2UoZXZlbnQpO1xyXG4gIH1cclxuICAvLyB0cmlnZ2VyZWQgd2hlbiBhIHNlbGVjdGVkIGl0ZW0gaXMgY2hhbmdlZFxyXG4gIG9uQ2hhbmdlKF9ldmVudCkgeyB9XHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vXHJcbiAgLy8gRGVzdHJveVxyXG4gIC8vXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIGRlc3Ryb3koKSB7XHJcbiAgICB0aGlzLmNsZWFyKCk7XHJcbiAgfVxyXG59O1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoKVxyXG5dLCBGbG93TGlzdC5wcm90b3R5cGUsIFwiaWRQcm9wZXJ0eVwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoe1xyXG4gICAgY29uc3RydWN0T25seTogdHJ1ZVxyXG4gIH0pXHJcbl0sIEZsb3dMaXN0LnByb3RvdHlwZSwgXCJsYWJlbFByb3BlcnR5XCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gIHkkcigpXHJcbl0sIEZsb3dMaXN0LnByb3RvdHlwZSwgXCJpdGVtUmVuZGVyZXJcIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKHtcclxuICAgIGNvbnN0cnVjdE9ubHk6IHRydWVcclxuICB9KVxyXG5dLCBGbG93TGlzdC5wcm90b3R5cGUsIFwiaXRlbUNsYXNzXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gIHkkcih7XHJcbiAgICBjb25zdHJ1Y3RPbmx5OiB0cnVlXHJcbiAgfSlcclxuXSwgRmxvd0xpc3QucHJvdG90eXBlLCBcIml0ZW1DbGFzc1NlbGVjdGVkXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gIHkkcigpXHJcbl0sIEZsb3dMaXN0LnByb3RvdHlwZSwgXCJrZWVwU2Nyb2xsUG9zaXRpb25cIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKClcclxuXSwgRmxvd0xpc3QucHJvdG90eXBlLCBcImFsbG93UmVwZXRpdGl2ZVNlbGVjdGlvblwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoKVxyXG5dLCBGbG93TGlzdC5wcm90b3R5cGUsIFwic2VsZWN0T25Nb3VzZURvd25cIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKClcclxuXSwgRmxvd0xpc3QucHJvdG90eXBlLCBcIm5vRHJhZ1RvbGVyYW5jZVwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoKVxyXG5dLCBGbG93TGlzdC5wcm90b3R5cGUsIFwic2VsZWN0aW9uVmFsaWRhdG9yXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gIHkkcigpXHJcbl0sIEZsb3dMaXN0LnByb3RvdHlwZSwgXCJhbGxvd01hbnVhbFNlbGVjdGlvblwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoKVxyXG5dLCBGbG93TGlzdC5wcm90b3R5cGUsIFwic3RvcE1vdXNlRXZlbnRQcm9wYWdhdGlvblwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoKVxyXG5dLCBGbG93TGlzdC5wcm90b3R5cGUsIFwiaGFzU2VsZWN0YWJsZUl0ZW1zXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gIHkkcigpXHJcbl0sIEZsb3dMaXN0LnByb3RvdHlwZSwgXCJhdXRvRGV0ZWN0VXJsc0luTGFiZWxzXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gIHkkcigpXHJcbl0sIEZsb3dMaXN0LnByb3RvdHlwZSwgXCJzdG9yZUl0ZW1zSW5Jbm5lckRpdlwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoe1xyXG4gICAgcmVhZE9ubHk6IHRydWVcclxuICB9KVxyXG5dLCBGbG93TGlzdC5wcm90b3R5cGUsIFwiaXRlbXNEaXZcIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKClcclxuXSwgRmxvd0xpc3QucHJvdG90eXBlLCBcIm9uRGVtYW5kTW9kZUxvYWRTdGVwXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gIHkkcigpXHJcbl0sIEZsb3dMaXN0LnByb3RvdHlwZSwgXCJvbkRlbWFuZFBvcHVsYXRlTGltaXRcIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKClcclxuXSwgRmxvd0xpc3QucHJvdG90eXBlLCBcIm9uRGVtYW5kUG9wdWxhdGVQZXJpb2RcIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKHtcclxuICAgIGRlcGVuZHNPbjogW1wic2VsZWN0ZWRJdGVtXCJdXHJcbiAgfSlcclxuXSwgRmxvd0xpc3QucHJvdG90eXBlLCBcInZhbHVlXCIsIG51bGwpO1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoKVxyXG5dLCBGbG93TGlzdC5wcm90b3R5cGUsIFwiaXRlbXNcIiwgbnVsbCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gIHkkcigpXHJcbl0sIEZsb3dMaXN0LnByb3RvdHlwZSwgXCJzdG9yZVwiLCBudWxsKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKClcclxuXSwgRmxvd0xpc3QucHJvdG90eXBlLCBcInNlbGVjdGVkSXRlbVwiLCBudWxsKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKHtcclxuICAgIHZhbHVlOiAtMVxyXG4gIH0pXHJcbl0sIEZsb3dMaXN0LnByb3RvdHlwZSwgXCJzZWxlY3RlZEluZGV4XCIsIG51bGwpO1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoKVxyXG5dLCBGbG93TGlzdC5wcm90b3R5cGUsIFwib25DaGFuZ2VcIiwgbnVsbCk7XHJcbkZsb3dMaXN0ID0gX19kZWNvcmF0ZShbXHJcbiAgaSRYKClcclxuXSwgRmxvd0xpc3QpO1xuXG4vKipcclxuICogRXh0ZW5kcyBGbG93TGlzdC5cclxuICovXHJcbmxldCBCdXR0b25CYXIgPSBjbGFzcyBCdXR0b25CYXIgZXh0ZW5kcyBGbG93TGlzdCB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBzdXBlciguLi5hcmd1bWVudHMpO1xyXG4gICAgdGhpcy5hbGxvd1JlcGV0aXRpdmVTZWxlY3Rpb24gPSBmYWxzZTtcclxuICAgIHRoaXMuc3RvcE1vdXNlRXZlbnRQcm9wYWdhdGlvbiA9IGZhbHNlO1xyXG4gIH1cclxuICBwb3N0Q3JlYXRlKCkge1xyXG4gICAgYWRkQ2xhc3ModGhpcy5kb21Ob2RlLCBcImVzcmk0R0VCdXR0b25CYXJcIik7XHJcbiAgICBzdXBlci5wb3N0Q3JlYXRlKCk7XHJcbiAgfVxyXG59O1xyXG5CdXR0b25CYXIgPSBfX2RlY29yYXRlKFtcclxuICBpJFgoKVxyXG5dLCBCdXR0b25CYXIpO1xuXG5sZXQgVmFyaWFibGVUb2dnbGUgPSBjbGFzcyBWYXJpYWJsZVRvZ2dsZSBleHRlbmRzIEJ1dHRvbkJhciB7XHJcbiAgY29uc3RydWN0b3IocGFyYW1zLCByZWZOb2RlLCBwb3NpdGlvbikge1xyXG4gICAgc3VwZXIocGFyYW1zLCByZWZOb2RlLCBwb3NpdGlvbik7XHJcbiAgICB0aGlzLnN0b3BNb3VzZUV2ZW50UHJvcGFnYXRpb24gPSB0cnVlO1xyXG4gIH1cclxuICBwb3N0Q3JlYXRlKCkge1xyXG4gICAgdGhpcy5pdGVtcyA9IHRoaXMuc3RhdGVzLmlkcy5tYXAoKGlkLCBpKSA9PiAoe1xyXG4gICAgICB2YWx1ZTogaWQsXHJcbiAgICAgIGxhYmVsOiB0aGlzLnN0YXRlcy5sYWJlbHNbaV1cclxuICAgIH0pKTtcclxuICAgIHN1cGVyLnBvc3RDcmVhdGUoKTtcclxuICAgIGFkZENsYXNzKHRoaXMuZG9tTm9kZSwgXCJlc3JpNEdFVmFyaWFibGVUb2dnbGVcIik7XHJcbiAgfVxyXG4gIGdldFN0YXRlTmFtZSh2YWx1ZSkge1xyXG4gICAgcmV0dXJuICh0aGlzLnN0YXRlcy5uYW1lcyAmJiB0aGlzLnN0YXRlcy5uYW1lc1t0aGlzLnF1ZXJ5SXRlbSh7IHZhbHVlOiB2YWx1ZSB8fCB0aGlzLnZhbHVlIH0pLmluZGV4XSkgfHwgbnVsbDtcclxuICB9XHJcbn07XHJcbl9fZGVjb3JhdGUoW1xyXG4gIHkkcigpXHJcbl0sIFZhcmlhYmxlVG9nZ2xlLnByb3RvdHlwZSwgXCJzdGF0ZXNcIiwgdm9pZCAwKTtcclxuVmFyaWFibGVUb2dnbGUgPSBfX2RlY29yYXRlKFtcclxuICBpJFgoKVxyXG5dLCBWYXJpYWJsZVRvZ2dsZSk7XG5cbi8qKlxyXG4gKiBDcmVhdGVzIGdyb3VwcyBieSB0aGUgZ2l2ZW4gdmFyaWFibGVzLlxyXG4gKiBAcGFyYW0gdmFyaWFibGVzICAgVmFyaWFibGVTdG9yZS5cclxuICogQHBhcmFtIGlkcyAgICAgICAgIEFycmF5IG9mIHZhcmlhYmxlIElEcy5cclxuICogQHBhcmFtIGV4YWN0TWF0Y2ggIFRydWUgdmFsdWUgbWVhbnMgdGhhdCB0aGUgaGFzaCB3aWxsIGNvbnRhaW4gYXMga2V5cyBvbmx5IHZhbHVlcyBmcm9tIGlkcyBhcnJheS5cclxuICogT3RoZXJ3aXNlLCBldmVyeSB2YXJpYWJsZSBmcm9tIHRoZSByZXF1ZXN0ZWQgZ3JvdXAgd2lsbCBiZSBoYXNoZWQgaW4gdGhlIG91dHB1dCBoYXNoLlxyXG4gKiBUaGUgZXhhY3QgbWF0Y2ggbW9kZSBhbGxvd3MgbXVsdGlwbGUgc2VsZWN0aW9uIG9mIHZhcmlhYmxlcyBpbiBhIGdyb3VwLlxyXG4gKlxyXG4gKiBAcmV0dXJucyBBIGNvbGxlY3Rpb24gb2YgdG9nZ2xlIGdyb3VwczpcclxuICogVGhlICdncm91cHMnIHByb3BlcnR5IGlzIGFuIGFycmF5IG9mIGdyb3VwcyBvZiByZWxhdGVkIHZhcmlhYmxlcy4gU2VlIGdldFRvZ2dsZUdyb3VwLlxyXG4gKiBUaGUgJ2hhc2gnIG9iamVjdCBhc3NvY2lhdGVzIElEcyBvZiB2YXJpYWJsZXMgaW4gZ3JvdXBzIHdpdGggdGhlaXIgZ3JvdXBzLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0VG9nZ2xlR3JvdXBzKHZhcmlhYmxlcywgaWRzLCBleGFjdE1hdGNoID0gZmFsc2UpIHtcclxuICBjb25zdCBoYXNoID0ge307XHJcbiAgY29uc3QgZ3JvdXBzID0gW107XHJcbiAgaWRzLmZvckVhY2goKGlkKSA9PiB7XHJcbiAgICBncm91cHMucHVzaChnZXRUb2dnbGVHcm91cCh2YXJpYWJsZXMsIGlkLCBoYXNoLCBleGFjdE1hdGNoKSk7XHJcbiAgfSk7XHJcbiAgcmV0dXJuIHsgZ3JvdXBzLCBoYXNoIH07XHJcbn1cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBncm91cCBieSB0aGUgZ2l2ZW4gdmFyaWFibGUuXHJcbiAqIEBwYXJhbSB2YXJpYWJsZXMgIFZhcmlhYmxlIHN0b3JlLlxyXG4gKiBAcGFyYW0gaWQgICAgICAgICBWYXJpYWJsZSBpZGVudGl0eSAoZnVsbE5hbWUpLlxyXG4gKiBAcGFyYW0gaGFzaCAgICAgICBBbiBvcHRpb25hbCBvYmplY3QgdG8gY29sbGVjdCByZWZlcmVuY2VzIHRvIHRoZSBncm91cCBieSBJRHMgb2YgaXRzIHZhcmlhYmxlcy5cclxuICogQHBhcmFtIGV4YWN0TWF0Y2ggVHJ1ZSB2YWx1ZSBtZWFucyBjb2xsZWN0aW5nIGdyb3VwcyBpbiB0aGUgaGFzaCBmb3IgdGhlIGV4YWN0bHkgbWF0Y2hpbmcgdmFyaWFibGUgSURzIGFzIGtleS5cclxuICpcclxuICogQHJldHVybnMgQSB0b2dnbGUgZ3JvdXA6XHJcbiAqIFRoZSAndmFsdWUnIHByb3BlcnR5IGlzIGFuIElEIG9mIGEgdmFyaWFibGUgc2VsZWN0ZWQgaW4gdGhpcyBncm91cC5cclxuICogVGhlIG9wdGlvbmFsICdzdGF0ZXMnIHByb3BlcnR5IGlzIGEgY29sbGVjdGlvbiBvZiBzdGF0ZXMgcmV0dXJuZWQgYnkgdmFyaWFibGVzLmdldFN0YXRlcyhpZCkgbWV0aG9kLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0VG9nZ2xlR3JvdXAodmFyaWFibGVzLCBpZCwgaGFzaCwgZXhhY3RNYXRjaCA9IGZhbHNlKSB7XHJcbiAgaGFzaCA9IGhhc2ggfHwge307XHJcbiAgY29uc3Qgc3RhdGVzID0gdmFyaWFibGVzLmdldFN0YXRlcyAmJiB2YXJpYWJsZXMuZ2V0U3RhdGVzKGlkKTtcclxuICBjb25zdCBncm91cCA9IHsgdmFsdWU6IGlkLCBzdGF0ZXMgfTtcclxuICBoYXNoW2lkXSA9IGdyb3VwO1xyXG4gIGlmIChzdGF0ZXMpIHtcclxuICAgIGxldCBpZEZvdW5kID0gZmFsc2U7XHJcbiAgICBzdGF0ZXMuaWRzLmZvckVhY2goKHN0YXRlSWQpID0+IHtcclxuICAgICAgaWYgKGlkID09PSBzdGF0ZUlkKSB7XHJcbiAgICAgICAgaWRGb3VuZCA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAoIWV4YWN0TWF0Y2gpIHtcclxuICAgICAgICBoYXNoW3N0YXRlSWRdID0gZ3JvdXA7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgLy8gRW5zdXJlIHRoYXQgdGhlIGlkIGlzIGluIHRoZSBzdGF0ZXMuIElmIG5vdCwgd2UgY2hhbmdlIGl0IHRvIHRoZSBmaXJzdCBzdGF0ZSBpZC5cclxuICAgIGlmICghaWRGb3VuZCkge1xyXG4gICAgICBpZCA9IGdyb3VwLnZhbHVlID0gc3RhdGVzLmlkc1swXTtcclxuICAgICAgaGFzaFtpZF0gPSBncm91cDtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIGdyb3VwO1xyXG59XHJcbi8qKlxyXG4gKiBXZSB1c2VkIHRvIGdldCB1bml0cyBpbiB0aGUgdXBwZXIgY2FzZSBmcm9tIHRoZSBzZXJ2ZXIuIE5vdyB0aGV5IGNvbWUgaW4gdGhlIGxvd2VyIGNhc2UuXHJcbiAqIE5lZWQgdG8gcHJlc2VydmUgdGhlIHByZXZpb3VzIGJlaGF2aW9yLlxyXG4gKi9cclxuZnVuY3Rpb24gdG9WYXJpYWJsZVVuaXRzKHVuaXRzKSB7XHJcbiAgcmV0dXJuIHR5cGVvZiB1bml0cyA9PT0gXCJzdHJpbmdcIiA/IHVuaXRzLnRvVXBwZXJDYXNlKCkgOiBudWxsO1xyXG59XG5cbmNvbnN0IG5scyQ0ID0gZ2V0R0VNZXNzYWdlcyhcIkRhdGFCcm93c2VyXCIpLlNob3BwaW5nQ2FydDtcclxubGV0IFNob3BwaW5nQ2FydCA9IGNsYXNzIFNob3BwaW5nQ2FydCBleHRlbmRzIFRlbXBsYXRlZFdpZGdldCB7XHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vXHJcbiAgLy8gSW5pdGlhbGl6YXRpb25cclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICBjb25zdHJ1Y3RvcihwYXJhbXMsIHJlZk5vZGUsIHBvc2l0aW9uKSB7XHJcbiAgICBzdXBlcihwYXJhbXMsIHJlZk5vZGUsIHBvc2l0aW9uKTtcclxuICAgIHRoaXMuX3RlbXBsYXRlU3RyaW5nID0gYFxyXG4gIDxkaXYgY2xhc3M9XCJlc3JpNEdFU2hvcHBpbmdDYXJ0XCI+XHJcbiAgICA8dGFibGUgZGF0YS1hdHRhY2gtcG9pbnQ9XCJfY291bnRMYWJlbFwiIGNsYXNzPVwiU2hvcHBpbmdDYXJ0X0xhYmVsXCI+XHJcbiAgICAgIDx0cj5cclxuICAgICAgICA8dGQgY2xhc3M9XCJTaG9wcGluZ0NhcnRfQ291bnRlclREXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiU2hvcHBpbmdDYXJ0X0NvdW50ZXJEaXZMZWZ0Qm9yZGVyXCI+PC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGRhdGEtYXR0YWNoLXBvaW50PVwiX2RpdkNvdW50ZXJcIiBjbGFzcz1cIlNob3BwaW5nQ2FydF9Db3VudGVyRGl2XCI+PC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiU2hvcHBpbmdDYXJ0X0NvdW50ZXJEaXZSaWdodEJvcmRlclwiPjwvZGl2PlxyXG4gICAgICAgIDwvdGQ+XHJcbiAgICAgICAgPHRkIGNsYXNzPVwiU2hvcHBpbmdDYXJ0X0xhYmVsVGRcIj5cclxuICAgICAgICAgIDxkaXYgZGF0YS1hdHRhY2gtcG9pbnQ9XCJfc2VsZWN0ZWRWYXJpYWJsZXNMYWJlbFwiPjwvZGl2PlxyXG4gICAgICAgIDwvdGQ+XHJcbiAgICAgICAgPHRkPlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cIlNob3BwaW5nQ2FydE9wZW5lclwiIGRhdGEtYXR0YWNoLXBvaW50PVwiX2RpdlNob3BwaW5nQ2FydE9wZW5lclwiPjwvZGl2PlxyXG4gICAgICAgIDwvdGQ+XHJcbiAgICAgIDwvdHI+XHJcbiAgICA8L3RhYmxlPlxyXG5cclxuICAgIDxkaXYgZGF0YS1hdHRhY2gtcG9pbnQ9XCJfZGl2T3V0ZXJcIiBjbGFzcz1cIlNob3BwaW5nQ2FydF9PdXRlckRpdlwiPlxyXG4gICAgICA8ZGl2IGRhdGEtYXR0YWNoLXBvaW50PVwiX2Rpdkxpc3RcIiBjbGFzcz1cIlNob3BwaW5nQ2FydF9EaXZMaXN0XCI+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGRhdGEtYXR0YWNoLXBvaW50PVwiX2RpdkVtcHR5XCIgY2xhc3M9XCJlc3JpR0VBYnNvbHV0ZVN0cmV0Y2hlZCBTaG9wcGluZ0NhcnRfRGl2RW1wdHlcIj5cclxuICAgICAgICA8ZGl2PiR7bmxzJDQubm9WYXJpYWJsZXN9PC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgPC9kaXY+YDtcclxuICAgIC8qKlxyXG4gICAgICogIEFsbG93cyB2YXJpYWJsZSB0b2dnbGVzIGluIHNob3BwaW5nIGNhcnQuXHJcbiAgICAgKi9cclxuICAgIHRoaXMuYWxsb3dUb2dnbGVzID0gdHJ1ZTtcclxuICAgIC8qKlxyXG4gICAgICogQWxsb3dzIG1vdmluZyB2YXJpYWJsZXMgdXAgYW5kIGRvd24gaW4gdGhlIGxpc3QuXHJcbiAgICAgKi9cclxuICAgIHRoaXMuYWxsb3dNb3ZlQnV0dG9ucyA9IGZhbHNlO1xyXG4gICAgLyoqXHJcbiAgICAgKiBBbGxvd3MgZWRpdGluZyBpbmRpdmlkdWFsIHZhcmlhYmxlcyAod2lsbCB3b3JrIGZvciBjdXN0b20gdmFyaWFibGVzKS5cclxuICAgICAqL1xyXG4gICAgdGhpcy5hbGxvd0VkaXRCdXR0b25zID0gZmFsc2U7XHJcbiAgICAvKipcclxuICAgICAqIEFsbG93cyByZXBsYWNpbmcgaW5kaXZpZHVhbCB2YXJpYWJsZXMuXHJcbiAgICAgKi9cclxuICAgIHRoaXMuYWxsb3dSZXBsYWNlQnV0dG9ucyA9IGZhbHNlO1xyXG4gIH1cclxuICBwb3N0Q3JlYXRlKCkge1xyXG4gICAgb24odGhpcy5fY291bnRMYWJlbCwgXCJjbGlja1wiLCB0aGlzLl90b2dnbGVMaXN0LmJpbmQodGhpcykpO1xyXG4gICAgdGhpcy5fYnVpbGRWYXJpYWJsZUxhYmVsKCk7XHJcbiAgICB0aGlzLl9zZXQoXCJzZWxlY3Rpb25cIiwgW10pO1xyXG4gICAgdGhpcy5fY29udGVudCA9IFtdO1xyXG4gICAgdGhpcy5fbGlzdCA9IG5ldyBGbG93TGlzdCh7XHJcbiAgICAgIGhhc1NlbGVjdGFibGVJdGVtczogZmFsc2UsXHJcbiAgICAgIGtlZXBTY3JvbGxQb3NpdGlvbjogdHJ1ZSxcclxuICAgICAgaXRlbVJlbmRlcmVyOiBuZXcgRmxvd0xpc3REZWZhdWx0SXRlbVJlbmRlcmVyKHtcclxuICAgICAgICBjcmVhdGVQcmVzZW50YXRpb246IHRoaXMuX3JlbmRlclZhcmlhYmxlLmJpbmQodGhpcylcclxuICAgICAgfSlcclxuICAgIH0pLnBsYWNlQXQodGhpcy5fZGl2TGlzdCk7XHJcbiAgICB0aGlzLl91cGRhdGVMYWJlbCgpO1xyXG4gICAgdGhpcy5fZGl2T3V0ZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgdGhpcy53YXRjaChcInNlbGVjdGlvblwiLCAoKSA9PiB7XHJcbiAgICAgIHdoZW4odGhpcy52YXJpYWJsZXMuc3luY2hyb25pemUoKSkudGhlbih0aGlzLl9vblNlbGVjdGlvbkNoYW5nZWQuYmluZCh0aGlzKSk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgX2J1aWxkVmFyaWFibGVMYWJlbCgpIHtcclxuICAgIC8vIEZpbmQgdGhlIGJlc3QgcG9zaXRpb24gZm9yIHNwbGl0dGluZyBhIGxvbmcgXCJzZWxlY3RlZCB2YXJpYWJsZXNcIiBsYWJlbCBpbnRvIHR3byBsaW5lcy5cclxuICAgIGxldCB2YXJMYWJlbCA9IG5scyQ0LnNlbGVjdGVkVmFycztcclxuICAgIGNvbnN0IHdvcmRzID0gdmFyTGFiZWwuc3BsaXQoL1xccysvKTtcclxuICAgIGNvbnN0IG51bUJyZWFrcyA9IHdvcmRzLmxlbmd0aCAtIDE7XHJcbiAgICBpZiAobnVtQnJlYWtzIDwgMikge1xyXG4gICAgICB2YXJMYWJlbCA9IHdvcmRzLmpvaW4oXCI8YnIvPlwiKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAvLyBUaGUgbnVtYmVyIG9mIG5vbnNwYWNlIHN5bWJvbHNcclxuICAgICAgY29uc3Qgd29yZHNMZW4gPSB2YXJMYWJlbC5sZW5ndGggLSBudW1CcmVha3M7XHJcbiAgICAgIGxldCBzdW0gPSB3b3Jkc1swXS5sZW5ndGg7XHJcbiAgICAgIGxldCBpbmRleCA9IDA7XHJcbiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgbnVtQnJlYWtzOyBpKyspIHtcclxuICAgICAgICBjb25zdCBuZXh0U3VtID0gc3VtICsgd29yZHNbaV0ubGVuZ3RoO1xyXG4gICAgICAgIGlmIChNYXRoLmFicyhzdW0gKiAyIC0gd29yZHNMZW4pID4gTWF0aC5hYnMobmV4dFN1bSAqIDIgLSB3b3Jkc0xlbikpIHtcclxuICAgICAgICAgIGluZGV4ID0gaTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc3VtID0gbmV4dFN1bTtcclxuICAgICAgfVxyXG4gICAgICB2YXJMYWJlbCA9IHdvcmRzLnNsaWNlKDAsIGluZGV4ICsgMSkuam9pbihcIiZuYnNwO1wiKSArIFwiPGJyLz5cIiArIHdvcmRzLnNsaWNlKGluZGV4ICsgMSkuam9pbihcIiZuYnNwO1wiKTtcclxuICAgIH1cclxuICAgIHRoaXMuX3NlbGVjdGVkVmFyaWFibGVzTGFiZWwuaW5uZXJIVE1MID0gdmFyTGFiZWw7XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vIFJlbmRlciBsaXN0IGl0ZW1cclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICBfcmVuZGVyVmFyaWFibGUoZGF0YSwgX2lzU2VsZWN0ZWQsIGxpc3ROb2RlKSB7XHJcbiAgICBjb25zdCBkaXYgPSBjcmVhdGUoXCJkaXZcIiwgeyBjbGFzczogXCJTaG9wcGluZ0NhcnRSb3dcIiB9LCBsaXN0Tm9kZSk7XHJcbiAgICBmdW5jdGlvbiBhZGRTcGFjZXIoKSB7XHJcbiAgICAgIGNyZWF0ZShcImRpdlwiLCB7IGNsYXNzOiBcIlNob3BwaW5nQ2FydFJvd1NwYWNlclwiLCBpbm5lckhUTUw6IFwiJm5ic3A7XCIgfSwgZGl2KTtcclxuICAgIH1cclxuICAgIC8vIExBQkVMXHJcbiAgICBjb25zdCBpZCA9IGRhdGEuZ3JvdXAuc3RhdGVzICYmIHRoaXMuYWxsb3dUb2dnbGVzID8gZGF0YS5ncm91cC5zdGF0ZXMuaWRzWzBdIDogZGF0YS5ncm91cC52YWx1ZTtcclxuICAgIGNvbnN0IHZhcmlhYmxlID0gdGhpcy52YXJpYWJsZXMuZ2V0KGlkKTtcclxuICAgIGNvbnN0IGxhYmVsID0gY3JlYXRlKFwiZGl2XCIsIHsgY2xhc3M6IFwiZXNyaUdFVHJpbVdpdGhFbGxpcHNlcyBTaG9wcGluZ0NhcnRSb3dMYWJlbFwiLCB0ZXh0Q29udGVudDogdGhpcy5fZ2V0TGFiZWwodmFyaWFibGUpIHx8IFwiXCIgfSwgZGl2KTtcclxuICAgIC8vIENoZWNrIGZvciBhIHNwZWNpYWwgY2FzZSB3aGVuIGEgdmFyaWFibGUgaXMgbWlzc2luZyBmcm9tIHRoZSBzdG9yZS5cclxuICAgIGlmICh2YXJpYWJsZSAmJiB2YXJpYWJsZS5pc01pc3NpbmcpIHtcclxuICAgICAgYWRkQ2xhc3MobGFiZWwsIFwiU2hvcHBpbmdDYXJ0Um93TGFiZWxfbWlzc2luZ1wiKTtcclxuICAgIH1cclxuICAgIC8vIE1PVkVcclxuICAgIGlmICh0aGlzLmFsbG93TW92ZUJ1dHRvbnMpIHtcclxuICAgICAgYWRkU3BhY2VyKCk7XHJcbiAgICAgIGNvbnN0IG1vdmVCdXR0b25zUm9vdCA9IGNyZWF0ZShcImRpdlwiLCB7IGNsYXNzOiBcInVwRG93bkFycm93c0Jsb2NrXCIgfSwgZGl2KTtcclxuICAgICAgaWYgKHRoaXMuX2NvbnRlbnQuaW5kZXhPZihkYXRhKSA+IDApIHtcclxuICAgICAgICBjb25zdCB1cEJ1dHRvbiA9IGNyZWF0ZShcImRpdlwiLCB7IGNsYXNzOiBcInVwQXJyb3dcIiB9LCBtb3ZlQnV0dG9uc1Jvb3QpO1xyXG4gICAgICAgIG9uKHVwQnV0dG9uLCBcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgIHRoaXMuX29uTW92ZShkYXRhLCB0cnVlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5fY29udGVudC5pbmRleE9mKGRhdGEpIDwgdGhpcy5fY29udGVudC5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgY29uc3QgZG93bkJ1dHRvbiA9IGNyZWF0ZShcImRpdlwiLCB7IGNsYXNzOiBcImRvd25BcnJvd1wiIH0sIG1vdmVCdXR0b25zUm9vdCk7XHJcbiAgICAgICAgb24oZG93bkJ1dHRvbiwgXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLl9vbk1vdmUoZGF0YSwgZmFsc2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBSRVBMQUNFXHJcbiAgICBpZiAodGhpcy5hbGxvd1JlcGxhY2VCdXR0b25zKSB7XHJcbiAgICAgIGFkZFNwYWNlcigpO1xyXG4gICAgICBjb25zdCByZXBsYWNlQnV0dG9uID0gY3JlYXRlKFwiZGl2XCIsIHsgY2xhc3M6IFwiU2hvcHBpbmdDYXJ0Um93UmVwbGFjZUJ1dHRvblwiIH0sIGRpdik7XHJcbiAgICAgIHNldFRvb2x0aXBUb05vZGUocmVwbGFjZUJ1dHRvbiwgbmxzJDQucmVwbGFjZVZhcmlhYmxlKTtcclxuICAgICAgb24ocmVwbGFjZUJ1dHRvbiwgXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fb25SZXBsYWNlRGF0YShkYXRhKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvLyBFRElUXHJcbiAgICBpZiAodGhpcy5hbGxvd0VkaXRCdXR0b25zICYmIHRoaXMuX2NhbkVkaXREYXRhKGRhdGEpKSB7XHJcbiAgICAgIGFkZFNwYWNlcigpO1xyXG4gICAgICBjb25zdCBlZGl0QnV0dG9uID0gY3JlYXRlKFwiZGl2XCIsIHsgY2xhc3M6IFwiU2hvcHBpbmdDYXJ0Um93RWRpdEJ1dHRvblwiIH0sIGRpdik7XHJcbiAgICAgIHNldFRvb2x0aXBUb05vZGUoZWRpdEJ1dHRvbiwgbmxzJDQuZWRpdFZhcmlhYmxlKTtcclxuICAgICAgb24oZWRpdEJ1dHRvbiwgXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fb25FZGl0RGF0YShkYXRhKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvLyBUT0dHTEVcclxuICAgIC8vIEFsbCBpdGVtcyBpbnNpZGUgZmxvYXRpbmcgZWxlbWVudCBzaG91bGQgYmUgaW5saW5lIGVsZW1lbnRzIHRvIHJlbmRlciB0aGVtIGluIGEgbGluZS5cclxuICAgIGlmIChkYXRhLmdyb3VwLnN0YXRlcyAmJiB0aGlzLmFsbG93VG9nZ2xlcykge1xyXG4gICAgICBhZGRTcGFjZXIoKTtcclxuICAgICAgY29uc3QgdG9nZ2xlID0gbmV3IFZhcmlhYmxlVG9nZ2xlKHtcclxuICAgICAgICBzdGF0ZXM6IGRhdGEuZ3JvdXAuc3RhdGVzLFxyXG4gICAgICAgIHZhbHVlOiBkYXRhLmdyb3VwLnZhbHVlLFxyXG4gICAgICAgIG9uQ2hhbmdlOiAoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLl9vblRvZ2dsZUNoYW5nZSh0b2dnbGUsIGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSkucGxhY2VBdChkaXYpO1xyXG4gICAgfVxyXG4gICAgLy8gQ0xPU0VcclxuICAgIGFkZFNwYWNlcigpO1xyXG4gICAgY29uc3QgY2xvc2VyID0gY3JlYXRlKFwiZGl2XCIsIHsgY2xhc3M6IFwiZXNyaTRHRUNsb3NlQ3Jvc3NCdXR0b25cIiB9LCBkaXYpO1xyXG4gICAgc2V0VG9vbHRpcFRvTm9kZShjbG9zZXIsIG5scyQ0LnJlbW92ZVZhcmlhYmxlKTtcclxuICAgIG9uKGNsb3NlciwgXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX29uUmVtb3ZlKGRhdGEpO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gZGl2O1xyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyBIYW5kbGUgc2VsZWN0b24gY2hhbmdlXHJcbiAgLy9cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgX29uU2VsZWN0aW9uQ2hhbmdlZCgpIHtcclxuICAgIC8vIFRoZSBzZWxlY3Rpb24gY2FuIGNoYW5nZSBpbiB0aGUgZm9sbG93aW5nIGNhc2VzOiBhZGQvcmVtb3ZlL3VwZGF0ZS5cclxuICAgIC8vIEluIHRoZSBjYXNlIG9mIGFkZGluZywgbmV3IGl0ZW1zIGFyZSBhZGRlZCB0byB0aGUgZW5kLlxyXG4gICAgLy8gSW4gdGhlIGNhc2Ugb2YgcmVtb3ZpbmcsIGFueSBpdGVtcyBjb3VsZCBiZSByZW1vdmVkIGZyb20gYW55IHBsYWNlLlxyXG4gICAgLy8gSW4gdGhlIGNhc2Ugb2YgdXBkYXRpbmcsIGFuIGl0ZW0gc3RhdGUgY2FuIGJlIGNoYW5nZWQuXHJcbiAgICAvLyBXZSBvcHRpbWl6ZSB0aGlzIG1ldGhvZCBmb3IgYWRkaW5nIGFuZCB1cGRhdGluZyBvbmx5LlxyXG4gICAgY29uc3QgbmV3Q29udGVudCA9IFtdO1xyXG4gICAgLy8gQ29sbGVjdCB1bmNoYW5nZWQgaXRlbXMuXHJcbiAgICBsZXQgbGVuID0gTWF0aC5taW4odGhpcy5fY29udGVudC5sZW5ndGgsIHRoaXMuc2VsZWN0aW9uLmxlbmd0aCk7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGlkID0gdGhpcy5zZWxlY3Rpb25baV07XHJcbiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLl9jb250ZW50W2ldO1xyXG4gICAgICBpZiAoIWRhdGEuaGFzaFtpZF0pIHtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBkYXRhLmdyb3VwLnZhbHVlID0gaWQ7IC8vIFN5bmNocm9uaXplIHNlbGVjdGVkIElEIGZvciB0aGUgdXBkYXRlIGNhc2VcclxuICAgICAgbmV3Q29udGVudC5wdXNoKGRhdGEpO1xyXG4gICAgfVxyXG4gICAgLy8gQWRkIG90aGVyIGl0ZW1zLlxyXG4gICAgbGVuID0gdGhpcy5zZWxlY3Rpb24ubGVuZ3RoO1xyXG4gICAgZm9yIChsZXQgaSA9IG5ld0NvbnRlbnQubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgbGV0IGlkID0gdGhpcy5zZWxlY3Rpb25baV07XHJcbiAgICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgICAgaGFzaDoge30sXHJcbiAgICAgICAgZ3JvdXA6IG51bGxcclxuICAgICAgfTtcclxuICAgICAgZGF0YS5ncm91cCA9IGdldFRvZ2dsZUdyb3VwKHRoaXMudmFyaWFibGVzLCBpZCwgZGF0YS5oYXNoKTtcclxuICAgICAgLy8gVGl0bGUgaXMgYW4gYWxpYXMgb2YgdGhlIGZpcnN0IHZhcmlhYmxlIGluIHRoZSBncm91cCBpbiB0aGUgY2FzZSBvZiBhbGxvd1RvZ2dsZXMuXHJcbiAgICAgIC8vIE90aGVyd2lzZSwgaXQgaXMgYW4gYWxpYXMgb2YgdGhlIGN1cnJlbnQgdmFyaWFibGUuXHJcbiAgICAgIGlkID0gZGF0YS5ncm91cC5zdGF0ZXMgJiYgdGhpcy5hbGxvd1RvZ2dsZXMgPyBkYXRhLmdyb3VwLnN0YXRlcy5pZHNbMF0gOiBkYXRhLmdyb3VwLnZhbHVlO1xyXG4gICAgICBjb25zdCB2YXJpYWJsZSA9IHRoaXMudmFyaWFibGVzLmdldChpZCk7XHJcbiAgICAgIGRhdGEubGFiZWwgPSB0aGlzLl9nZXRMYWJlbCh2YXJpYWJsZSk7XHJcbiAgICAgIG5ld0NvbnRlbnQucHVzaChkYXRhKTtcclxuICAgIH1cclxuICAgIHRoaXMuX2NvbnRlbnQgPSBuZXdDb250ZW50O1xyXG4gICAgdGhpcy5fdXBkYXRlTGFiZWwoKTtcclxuICAgIGlmICghdGhpcy5fY29udGVudC5sZW5ndGgpIHtcclxuICAgICAgdGhpcy5faGlkZUxpc3QoKTtcclxuICAgIH1cclxuICB9XHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vXHJcbiAgLy8gVmFyaWFibGUgbGFiZWxcclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICBfZ2V0TGFiZWwodmFyaWFibGUpIHtcclxuICAgIGlmICghdmFyaWFibGUpIHtcclxuICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIHRoaXMudmFyaWFibGVzLmdldExhYmVsID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgcmV0dXJuIHRoaXMudmFyaWFibGVzLmdldExhYmVsKHZhcmlhYmxlKTtcclxuICAgIH1cclxuICAgIHJldHVybiB2YXJpYWJsZS5hbGlhcyB8fCBcIlwiO1xyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyBIYW5kbGUgYWRkaXRpb25hbCBhY3Rpb25zXHJcbiAgLy9cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgX29uUmVtb3ZlKGRhdGEpIHtcclxuICAgIGNvbnN0IG5ld1NlbGVjdGlvbiA9IHRoaXMuc2VsZWN0aW9uLnNsaWNlKCk7XHJcbiAgICBjb25zdCBkYXRhSW5kZXggPSB0aGlzLl9jb250ZW50LmluZGV4T2YoZGF0YSk7XHJcbiAgICBuZXdTZWxlY3Rpb24uc3BsaWNlKGRhdGFJbmRleCwgMSk7XHJcbiAgICB0aGlzLl9jb250ZW50LnNwbGljZShkYXRhSW5kZXgsIDEpO1xyXG4gICAgdGhpcy5zZWxlY3Rpb24gPSBuZXdTZWxlY3Rpb247XHJcbiAgICB0aGlzLl9yZWZyZXNoKCk7XHJcbiAgfVxyXG4gIF9vblRvZ2dsZUNoYW5nZSh0b2dnbGUsIGRhdGEpIHtcclxuICAgIGRhdGEuZ3JvdXAudmFsdWUgPSB0b2dnbGUudmFsdWU7XHJcbiAgICBjb25zdCBuZXdTZWxlY3Rpb24gPSB0aGlzLnNlbGVjdGlvbi5zbGljZSgpO1xyXG4gICAgbmV3U2VsZWN0aW9uW3RoaXMuX2NvbnRlbnQuaW5kZXhPZihkYXRhKV0gPSB0b2dnbGUudmFsdWU7XHJcbiAgICB0aGlzLnNlbGVjdGlvbiA9IG5ld1NlbGVjdGlvbjtcclxuICB9XHJcbiAgX29uTW92ZShkYXRhLCBpc1VwKSB7XHJcbiAgICBjb25zdCBuZXdTZWxlY3Rpb24gPSB0aGlzLnNlbGVjdGlvbi5zbGljZSgpO1xyXG4gICAgY29uc3QgZGF0YUluZGV4ID0gdGhpcy5fY29udGVudC5pbmRleE9mKGRhdGEpO1xyXG4gICAgY29uc3Qgc2VsZWN0aW9uID0gbmV3U2VsZWN0aW9uW2RhdGFJbmRleF07XHJcbiAgICAvLyByZW1vdmVcclxuICAgIG5ld1NlbGVjdGlvbi5zcGxpY2UoZGF0YUluZGV4LCAxKTtcclxuICAgIHRoaXMuX2NvbnRlbnQuc3BsaWNlKGRhdGFJbmRleCwgMSk7XHJcbiAgICAvLyBhZGRcclxuICAgIG5ld1NlbGVjdGlvbi5zcGxpY2UoaXNVcCA/IGRhdGFJbmRleCAtIDEgOiBkYXRhSW5kZXggKyAxLCAwLCBzZWxlY3Rpb24pO1xyXG4gICAgdGhpcy5fY29udGVudC5zcGxpY2UoaXNVcCA/IGRhdGFJbmRleCAtIDEgOiBkYXRhSW5kZXggKyAxLCAwLCBkYXRhKTtcclxuICAgIHRoaXMuc2VsZWN0aW9uID0gbmV3U2VsZWN0aW9uO1xyXG4gICAgdGhpcy5fcmVmcmVzaCgpO1xyXG4gIH1cclxuICBfY2FuRWRpdERhdGEoX2RhdGEpIHtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbiAgX29uRWRpdERhdGEoX2RhdGEpIHtcclxuICAgIC8vIG5vdCBpbXBsZW1lbnRlZFxyXG4gIH1cclxuICBfb25SZXBsYWNlRGF0YShfZGF0YSkge1xyXG4gICAgLy8gbm90IGltcGxlbWVudGVkXHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vIFJlZnJlc2ggJiB1cGRhdGVcclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICBfcmVmcmVzaCgpIHtcclxuICAgIHRoaXMuX2xpc3QuaXRlbXMgPSB0aGlzLl9jb250ZW50O1xyXG4gICAgdGhpcy5fdXBkYXRlTGFiZWwoKTtcclxuICAgIHRoaXMuX2RpdkVtcHR5LnN0eWxlLnZpc2liaWxpdHkgPSAhdGhpcy5fY29udGVudC5sZW5ndGggPyBcInZpc2libGVcIiA6IFwiaGlkZGVuXCI7XHJcbiAgfVxyXG4gIF91cGRhdGVMYWJlbCgpIHtcclxuICAgIHRoaXMuX2RpdkNvdW50ZXIudGV4dENvbnRlbnQgPSB0aGlzLl9jb250ZW50Lmxlbmd0aC50b1N0cmluZygpO1xyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyBUb2dnbGUgbGlzdFxyXG4gIC8vXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIGlzT3BlbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9kaXZPdXRlci5zdHlsZS5kaXNwbGF5ICE9PSBcIm5vbmVcIjtcclxuICB9XHJcbiAgaGlkZUxpc3QoKSB7XHJcbiAgICB0aGlzLl9oaWRlTGlzdCgpO1xyXG4gIH1cclxuICBfdG9nZ2xlTGlzdCgpIHtcclxuICAgIGlmICh0aGlzLl9kaXZPdXRlci5zdHlsZS5kaXNwbGF5ID09PSBcIm5vbmVcIikge1xyXG4gICAgICB0aGlzLl9kaXNwbGF5TGlzdCgpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVMaXN0KCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9kaXNwbGF5TGlzdCgpIHtcclxuICAgIHRoaXMuX3JlZnJlc2goKTtcclxuICAgIHRoaXMuX2Rpdk91dGVyLnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xyXG4gICAgdGhpcy5fbGlzdGVuVG9Nb3VzZUxlYXZlKCk7XHJcbiAgfVxyXG4gIF9saXN0ZW5Ub01vdXNlTGVhdmUoKSB7XHJcbiAgICB0aGlzLl9tb3VzZU91dEggJiYgdGhpcy5fbW91c2VPdXRILnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fbW91c2VPdXRIID0gYWRkT3V0SGFuZGxlcih7IG5vZGU6IHRoaXMuZG9tTm9kZSwgb25Nb3VzZU91dDogdGhpcy5fb25Nb3VzZUxlYXZlLmJpbmQodGhpcykgfSk7XHJcbiAgfVxyXG4gIF9vbk1vdXNlTGVhdmUoKSB7XHJcbiAgICB0aGlzLl9tb3VzZU91dEggJiYgdGhpcy5fbW91c2VPdXRILnJlbW92ZSgpO1xyXG4gICAgdGhpcy5faGlkZUxpc3QoKTtcclxuICB9XHJcbiAgX2hpZGVMaXN0KCkge1xyXG4gICAgdGhpcy5fZGl2T3V0ZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyBFdmVudHNcclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICBvblNlbGVjdGlvbkNoYW5nZWQoX2V2ZW50KSB7IH1cclxufTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKClcclxuXSwgU2hvcHBpbmdDYXJ0LnByb3RvdHlwZSwgXCJ2YXJpYWJsZXNcIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKClcclxuXSwgU2hvcHBpbmdDYXJ0LnByb3RvdHlwZSwgXCJzZWxlY3Rpb25cIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKClcclxuXSwgU2hvcHBpbmdDYXJ0LnByb3RvdHlwZSwgXCJhbGxvd1RvZ2dsZXNcIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKClcclxuXSwgU2hvcHBpbmdDYXJ0LnByb3RvdHlwZSwgXCJhbGxvd01vdmVCdXR0b25zXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gIHkkcigpXHJcbl0sIFNob3BwaW5nQ2FydC5wcm90b3R5cGUsIFwiYWxsb3dFZGl0QnV0dG9uc1wiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoKVxyXG5dLCBTaG9wcGluZ0NhcnQucHJvdG90eXBlLCBcImFsbG93UmVwbGFjZUJ1dHRvbnNcIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKClcclxuXSwgU2hvcHBpbmdDYXJ0LnByb3RvdHlwZSwgXCJvblNlbGVjdGlvbkNoYW5nZWRcIiwgbnVsbCk7XHJcblNob3BwaW5nQ2FydCA9IF9fZGVjb3JhdGUoW1xyXG4gIGkkWCgpXHJcbl0sIFNob3BwaW5nQ2FydCk7XG5cbi8vIGdlb2VucmljaG1lbnQudXRpbHNcclxuY29uc3QgVVRJTF9LRVkgPSBcIl9fd2FpdGluZ0RpdlwiO1xyXG4vKipcclxuICogU2FmZSBtZXRob2QgdG8gc3RhcnQgd2FpdGluZyBvbiBhIG5vZGUuXHJcbiAqL1xyXG5mdW5jdGlvbiBzaG93UHJvZ3Jlc3Mobm9kZSwgcGFyYW1zKSB7XHJcbiAgaWYgKCFub2RlIHx8IG5vZGVbVVRJTF9LRVldKSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG4gIC8vIHJlbGF0aXZlIG9yIGFic29sdXRlIHBvc2l0aW9uIGlzIHJlcXVpcmVkXHJcbiAgY29uc3QgcG9zID0gZ2V0U3R5bGUobm9kZSwgXCJwb3NpdGlvblwiKTtcclxuICBpZiAocG9zICE9PSBcImFic29sdXRlXCIgJiYgcG9zICE9PSBcInJlbGF0aXZlXCIpIHtcclxuICAgIG5vZGUuc3R5bGUucG9zaXRpb24gPSBcInJlbGF0aXZlXCI7XHJcbiAgfVxyXG4gIGNvbnN0IHBvc2l0aW9uID0gcGFyYW1zICYmIHBhcmFtcy5wb3NpdGlvbjtcclxuICBjb25zdCB3YWl0aW5nTm9kZSA9IChub2RlW1VUSUxfS0VZXSA9IGNyZWF0ZShcImRpdlwiLCB7XHJcbiAgICBjbGFzczogXCJlc3JpNEdFUHJvZ3Jlc3MgXCIgK1xyXG4gICAgICAocG9zaXRpb24gPT09IFwiYm90dG9tLXJpZ2h0XCIgPyBcImVzcmk0R0VQcm9ncmVzc0JvdHRvbVJpZ2h0XCIgOiBcImVzcmlHRUFic29sdXRlU3RyZXRjaGVkIFwiKSArXHJcbiAgICAgICgocGFyYW1zICYmIHBhcmFtcy5wcm9ncmVzc0NsYXNzKSB8fCBcIlwiKVxyXG4gIH0sIG5vZGUpKTtcclxuICBpZiAocGFyYW1zICYmIHBhcmFtcy5pbmRpY2F0b3JTaXplKSB7XHJcbiAgICB3YWl0aW5nTm9kZS5zdHlsZS5iYWNrZ3JvdW5kU2l6ZSA9IHBhcmFtcy5pbmRpY2F0b3JTaXplICsgXCJweFwiO1xyXG4gIH1cclxuICBpZiAocGFyYW1zICYmIHBhcmFtcy5iYWNrZ3JvdW5kQ29sb3IpIHtcclxuICAgIHdhaXRpbmdOb2RlLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHBhcmFtcy5iYWNrZ3JvdW5kQ29sb3I7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBSZW1vdmVzIHRoZSBjdXJyZW50IHdhaXRpbmcgZnJvbSBhIG5vZGUuXHJcbiAqL1xyXG5mdW5jdGlvbiByZW1vdmVQcm9ncmVzcyhub2RlKSB7XHJcbiAgaWYgKCFub2RlIHx8ICFub2RlW1VUSUxfS0VZXSkge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICBkZXN0cm95KG5vZGVbVVRJTF9LRVldKTtcclxuICBkZWxldGUgbm9kZVtVVElMX0tFWV07XHJcbn1cclxuLyoqXHJcbiAqIEBwYXJhbSBwYXJhbXMucHJvZ3Jlc3NDbGFzcyAgICAgICAgICBTdHJpbmcuXHJcbiAqIEBwYXJhbSBwYXJhbXMub25TaG93UHJvZ3Jlc3MgICAgICAgICBGdW5jdGlvbigpLiBDYWxsZWQgb25jZSB0aGUgd2FpdGluZyBpcyBzdGFydGVkIGZvciB0aGUgbm9kZSwgZXZlbiBhZnRlciBzaG93UHJvZ3Jlc3NQcm9taXNlKCkgaXMgY2FsbGVkIG11bHRpcGxlIHRpbWVzLlxyXG4gKiBAcGFyYW0gcGFyYW1zLm9uUmVtb3ZlUHJvZ3Jlc3MgICAgICAgRnVuY3Rpb24oKS4gQ2FsbGVkIG9uY2UgdGhlIHdhaXRpbmcgaXMgZmluaWFsbHkgZmluaXNoZWQgZm9yIHRoZSBub2RlLCBldmVuIGFmdGVyIHNob3dQcm9ncmVzc1Byb21pc2UoKSBpcyBjYWxsZWQgbXVsdGlwbGUgdGltZXMuXHJcbiAqXHJcbiAqIHJldHVybnMgdGhlIHBhc3NlZCBQcm9taXNlLlxyXG4gKi9cclxuZnVuY3Rpb24gc2hvd1Byb2dyZXNzUHJvbWlzZShub2RlLCBwcm9taXNlLCBwYXJhbXMgPSB7fSkge1xyXG4gIGNvbnN0IG5kID0gbm9kZTtcclxuICBpZiAoIW5kKSB7XHJcbiAgICByZXR1cm4gcHJvbWlzZTtcclxuICB9XHJcbiAgbmQuX19wcm9ncmVzc0luZGV4ID0gbmQuX19wcm9ncmVzc0luZGV4IHx8IDA7XHJcbiAgaWYgKG5kLl9fcHJvZ3Jlc3NJbmRleCA9PT0gMCkge1xyXG4gICAgbmQuX19wcm9ncmVzc0RmZCA9IGNyZWF0ZURlZmVycmVkKCk7XHJcbiAgICBzaG93UHJvZ3Jlc3MobmQsIHtcclxuICAgICAgcHJvZ3Jlc3NDbGFzczogcGFyYW1zLnByb2dyZXNzQ2xhc3MsXHJcbiAgICAgIHBvc2l0aW9uOiBwYXJhbXMucG9zaXRpb24sXHJcbiAgICAgIGluZGljYXRvclNpemU6IHBhcmFtcy5pbmRpY2F0b3JTaXplLFxyXG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IHBhcmFtcy5iYWNrZ3JvdW5kQ29sb3JcclxuICAgIH0pO1xyXG4gICAgcGFyYW1zLm9uU2hvd1Byb2dyZXNzICYmIHBhcmFtcy5vblNob3dQcm9ncmVzcygpO1xyXG4gIH1cclxuICBuZC5fX3Byb2dyZXNzSW5kZXgrKztcclxuICBwcm9taXNlLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgbmQuX19wcm9ncmVzc0luZGV4ID0gTWF0aC5tYXgoMCwgLS1uZC5fX3Byb2dyZXNzSW5kZXgpO1xyXG4gICAgaWYgKG5kLl9fcHJvZ3Jlc3NJbmRleCA9PT0gMCkge1xyXG4gICAgICBuZC5fX3Byb2dyZXNzRGZkICYmIG5kLl9fcHJvZ3Jlc3NEZmQucmVzb2x2ZSgpO1xyXG4gICAgICBkZWxldGUgbmQuX19wcm9ncmVzc0RmZDtcclxuICAgICAgcmVtb3ZlUHJvZ3Jlc3MobmQpO1xyXG4gICAgICBwYXJhbXMub25SZW1vdmVQcm9ncmVzcyAmJiBwYXJhbXMub25SZW1vdmVQcm9ncmVzcygpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG4gIHJldHVybiBwcm9taXNlO1xyXG59XG5cbmxldCBXaXphcmQgPSBjbGFzcyBXaXphcmQgZXh0ZW5kcyBUZW1wbGF0ZWRXaWRnZXQge1xyXG4gIGNvbnN0cnVjdG9yKHBhcmFtcywgcmVmTm9kZSwgcG9zaXRpb24pIHtcclxuICAgIHN1cGVyKHBhcmFtcywgcmVmTm9kZSwgcG9zaXRpb24pO1xyXG4gICAgLy9cclxuICAgIC8qKlxyXG4gICAgICogU3RhY2tpbmcgc3RyYXRlZ3kgb2YgdGhlIHdpemFyZDpcclxuICAgICAqXHJcbiAgICAgKiAtIFwic3RyZXRjaFwiIC0gYm90dG9tIHBhbmVsIHdpbGwgYWx3YXlzIGJlIGJvdHRvbi1hbGlnbmVkIGFuZCBjZW50ZXIgcGFuZWwgd2lsbCBiZVxyXG4gICAgICogc3RyZXRjaGVkIHRvIGZpdCB0aGUgc3BhY2UgaW4gYmV0d2Vlbi4gVGhpcyBpcyB0aGUgZGVmYXVsdC5cclxuICAgICAqXHJcbiAgICAgKiAtIFwic3RhY2tcIiAtIGNlbnRlciBwYW5lbCB3aWxsIGJlIHNpemVkIHRvIGNvbnRlbnQgYW5kIGJvdHRvbSBwYW5lbCB3aWxsIGJlIHN0YWNrZWQgcmlnaHRcclxuICAgICAqIGJlbG93IHRoZSBjZW50ZXIgcGFuZWwuIFNjcm9sbCB3aWxsIGJlIHNob3duIGluIHRoZSBjZW50ZXIgcGFuZWwgaWYgY29udGVudHMgYXJlIHRvb1xyXG4gICAgICogdGFsbC5cclxuICAgICAqL1xyXG4gICAgdGhpcy5zdGFja2luZyA9IFwic3RyZXRjaFwiO1xyXG4gICAgdGhpcy5fcGFnZXMgPSB7fTtcclxuICAgIHRoaXMuX2FuaW0gPSBuZXcgQW5pbWF0aW9uSGVscGVyKCk7XHJcbiAgfVxyXG4gIHBvc3RDcmVhdGUoKSB7XHJcbiAgICBhZGRDbGFzcyh0aGlzLmRvbU5vZGUsIFwiZXNyaTRHRVdpemFyZF9Sb290XCIpO1xyXG4gIH1cclxuICBsb2FkUGFnZShwYWdlSWQpIHtcclxuICAgIGNvbnN0IHBhZ2UgPSB0aGlzLl9wYWdlc1twYWdlSWRdO1xyXG4gICAgY29uc3Qgb2xkUGFnZSA9IHRoaXMuY3VycmVudFBhZ2U7XHJcbiAgICBpZiAocGFnZSA9PT0gb2xkUGFnZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLl9hbmltLmZpbmlzaCgpO1xyXG4gICAgaWYgKG9sZFBhZ2UpIHtcclxuICAgICAgdGhpcy5fYW5pbVBhZ2UoXCJBbmltX0ZhZGVPdXRcIikudGhlbigoKSA9PiB7XHJcbiAgICAgICAgb2xkUGFnZS5wYWdlSXNBY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmRvbU5vZGUucmVtb3ZlQ2hpbGQob2xkUGFnZS5kb21Ob2RlKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9zZXQoXCJjdXJyZW50UGFnZVwiLCBwYWdlKTtcclxuICAgIHRoaXMuX3NldChcImN1cnJlbnRQYWdlSWRcIiwgcGFnZUlkKTtcclxuICAgIHBsYWNlKHRoaXMuY3VycmVudFBhZ2UuZG9tTm9kZSwgdGhpcy5kb21Ob2RlLCBcImZpcnN0XCIpO1xyXG4gICAgaWYgKG9sZFBhZ2UpIHtcclxuICAgICAgdGhpcy5fYW5pbVBhZ2UoXCJBbmltX0ZhZGVJblwiKTtcclxuICAgIH1cclxuICAgIHBhZ2Uuc3RhY2tpbmcgPSB0aGlzLnN0YWNraW5nO1xyXG4gICAgcGFnZS5wYWdlSXNBY3RpdmUgPSB0cnVlO1xyXG4gICAgcGFnZS5yZXNpemUoKTtcclxuICB9XHJcbiAgX2FuaW1QYWdlKGZhZGVDbGFzcykge1xyXG4gICAgcmV0dXJuIHRoaXMuX2FuaW0uc3RhcnQoW1xyXG4gICAgICB7XHJcbiAgICAgICAgbm9kZTogdGhpcy5jdXJyZW50UGFnZS5kb21Ob2RlLFxyXG4gICAgICAgIGNsYXNzZXM6IFtmYWRlQ2xhc3MsIFwiZXNyaTRHRVdpemFyZF9GYWRlQW5pbVwiXVxyXG4gICAgICB9XHJcbiAgICBdKTtcclxuICB9XHJcbiAgcmVzaXplKCkge1xyXG4gICAgdGhpcy5jdXJyZW50UGFnZSAmJiB0aGlzLmN1cnJlbnRQYWdlLnJlc2l6ZSgpO1xyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyBQcm9ncmVzc1xyXG4gIC8vXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8qKlxyXG4gICAqIFNob3dzIHByb2dyZXNzIGluIHRoZSBwcm9ncmVzc0RpdiBvZiB0aGUgcGFnZS4gV3JhcHMgdGhlIHJlc3VsdCBpbiBhIHByb21pc2UuXHJcbiAgICovXHJcbiAgX3Nob3dQcm9ncmVzcyhwcm9taXNlKSB7XHJcbiAgICByZXR1cm4gd2hlbihzaG93UHJvZ3Jlc3NQcm9taXNlKHRoaXMuZG9tTm9kZSwgcHJvbWlzZSkpO1xyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyBEZXN0cm95XHJcbiAgLy9cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgZGVzdHJveSgpIHtcclxuICAgIGZvciAoY29uc3QgaWQgaW4gdGhpcy5fcGFnZXMpIHtcclxuICAgICAgdGhpcy5fcGFnZXNbaWRdLmRlc3Ryb3koKTtcclxuICAgIH1cclxuICAgIHRoaXMuX3BhZ2VzID0ge307XHJcbiAgfVxyXG59O1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoe1xyXG4gICAgcmVhZE9ubHk6IHRydWVcclxuICB9KVxyXG5dLCBXaXphcmQucHJvdG90eXBlLCBcImN1cnJlbnRQYWdlXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gIHkkcih7XHJcbiAgICByZWFkT25seTogdHJ1ZVxyXG4gIH0pXHJcbl0sIFdpemFyZC5wcm90b3R5cGUsIFwiY3VycmVudFBhZ2VJZFwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoKVxyXG5dLCBXaXphcmQucHJvdG90eXBlLCBcInN0YWNraW5nXCIsIHZvaWQgMCk7XHJcbldpemFyZCA9IF9fZGVjb3JhdGUoW1xyXG4gIGkkWCgpXHJcbl0sIFdpemFyZCk7XG5cbi8qKlxyXG4gKiBXaWRnZXQgdG8gYnJvd3NlIGFuZCBzZWxlY3QgdmFyaWFibGVzIGF2YWlsYWJsZSBpbiBHZW9lbnJpY2htZW50LlxyXG4gKi9cclxuZnVuY3Rpb24gc3luYyhvYmoxLCBvYmoyLCBwcm9wKSB7XHJcbiAgbGV0IGlzQnVzeSA9IGZhbHNlO1xyXG4gIG9iajEud2F0Y2gocHJvcCwgKCkgPT4ge1xyXG4gICAgaWYgKGlzQnVzeSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpc0J1c3kgPSB0cnVlO1xyXG4gICAgb2JqMi5zZXQocHJvcCwgb2JqMS5nZXQocHJvcCkpO1xyXG4gICAgaXNCdXN5ID0gZmFsc2U7XHJcbiAgfSk7XHJcbiAgb2JqMi53YXRjaChwcm9wLCAoKSA9PiB7XHJcbiAgICBpZiAoaXNCdXN5KSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlzQnVzeSA9IHRydWU7XHJcbiAgICBvYmoxLnNldChwcm9wLCBvYmoyLmdldChwcm9wKSk7XHJcbiAgICBpc0J1c3kgPSBmYWxzZTtcclxuICB9KTtcclxufVxyXG5sZXQgRGF0YUJyb3dzZXJCYXNlID0gY2xhc3MgRGF0YUJyb3dzZXJCYXNlIGV4dGVuZHMgV2l6YXJkIHtcclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyBHZXR0ZXJzICYgc2V0dGVyc1xyXG4gIC8vXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8qKlxyXG4gICAqIFRpdGxlIHRvIHNob3cgaW4gdGhlIHRvcCBsZWZ0IGhhbmQgY29ybmVyLiBEZWZhdWx0cyB0byBcIkRhdGEgQnJvd3NlclwiLlxyXG4gICAqL1xyXG4gIHNldCB0aXRsZSh2YWx1ZSkge1xyXG4gICAgdGhpcy5fc2V0KFwidGl0bGVcIiwgdmFsdWUpO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBTZWxlY3RlZCB2YXJpYWJsZXMgYXJyYXkuIEVhY2ggaXRlbSBpcyBhIGZ1bGwgbmFtZSBvZiB2YXJpYWJsZSBsaWtlIFwiS2V5R2xvYmFsRmFjdHMuVE9UUE9QXCIuXHJcbiAgICovXHJcbiAgc2V0IHNlbGVjdGlvbih2YWx1ZSkge1xyXG4gICAgdGhpcy5fc2V0U2VsZWN0aW9uKHZhbHVlKTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogVHdvLWNoYXIgY291bnRyeSBjb2RlIHNlbGVjdGVkIGluIHRoZSBjb3VudHJ5IGRyb3AgZG93bi5cclxuICAgKiBEZWZhdWx0cyB0byBudWxsIHdoaWNoIHdpbGwgc2hvdyBcIkdsb2JhbFwiIHZhcmlhYmxlcyBhdmFpbGFibGUgZm9yIGFsbCBjb3VudHJpZXMuXHJcbiAgICovXHJcbiAgc2V0IGNvdW50cnlJRCh2YWx1ZSkge1xyXG4gICAgdGhpcy5fc2V0Q291bnRyeUlEKHZhbHVlKTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogSUQgb2YgaGllcmFyY2h5IHNlbGVjdGVkIGZvciB0aGUgZ2l2ZW4gY291bnRyeS5cclxuICAgKiBJdCBpcyBhdmFpbGFibGUgaWYgYWxsb3dIaWVyYXJjaGllcyBwcm9wZXJ0eSB2YWx1ZSBpcyB0cnVlLlxyXG4gICAqL1xyXG4gIHNldCBoaWVyYXJjaHlJRCh2YWx1ZSkge1xyXG4gICAgdGhpcy5fc2V0Q291bnRyeUlEKHRoaXMuX2dldFF1ZXJ5Q291bnRyeUlEKHRoaXMuY291bnRyeUlELCB2YWx1ZSkpO1xyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyBJbml0aWFsaXphdGlvblxyXG4gIC8vXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIGNvbnN0cnVjdG9yKHBhcmFtcywgcmVmTm9kZSwgcG9zaXRpb24pIHtcclxuICAgIHN1cGVyKHBhcmFtcywgcmVmTm9kZSwgcG9zaXRpb24pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUcnVlIHZhbHVlIGFsbG93cyBoaWVyYXJjaGllcyBzZWxlY3Rpb24gaW4gdGhlIGNvdW50cnkgZHJvcCBkb3duLlxyXG4gICAgICogSXQgYWxzbyBhbGxvd3MgdG8gc2V0IGEgaGllcmFyY2h5SUQgcHJvcGVydHkgdmFsdWUgZm9yIGRhdGEgYnJvd3Nlci5cclxuICAgICAqL1xyXG4gICAgdGhpcy5hbGxvd0hpZXJhcmNoaWVzID0gZmFsc2U7XHJcbiAgICAvKipcclxuICAgICAqIFNob3cvaGlkZSB0aGUgY291bnRyeSBkcm9wIGRvd24uIERlZmF1bHRzIHRvIHRydWUuXHJcbiAgICAgKiBPYmplY3QgdmFsdWUgc3BlY2lmaWVzIGFuIGluc3RhbmNlIG9mIHdpZGdldCB0byBiZSB1c2VkIGZvciBzaG93aW5nIHRoZSBjb3VudHJ5IGRyb3AgZG93bi5cclxuICAgICAqIEl0IHNob3VsZCBmb2xsb3cgdGhlIGNvbnRhY3Qgb2YgSUNvdW50cnlTZWxlY3QuXHJcbiAgICAgKi9cclxuICAgIHRoaXMuY291bnRyeUJveCA9IHRydWU7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBtYXhpbXVtIG51bWJlciBvZiB2YXJpYWJsZXMgdG8gc2VsZWN0LlxyXG4gICAgICogLSAtMSBtZWFucyB1bmxpbWl0dGVkIG51bWJlciBvZiB2YXJpYWJsZXMgdG8gc2VsZWN0LlxyXG4gICAgICogLSAwIG1lYW5zIG5vIHNlbGVjdGlvbi4gSW4gdGhpcyBjYXNlLCBzZWxlY3Rpb24gY2hlY2sgYm94ZXMgYW5kIHNob3BwaW5nIGNhcnQgYXJlIG1pc3NpbmcuXHJcbiAgICAgKiAtIDEgbWVhbnMgYSBzaW5nbGUgc2VsZWN0aW9uIG1vZGUuIEluIHRoaXMgY2FzZSwgc2VsZWN0aW9uIGNoZWNrIGJveGVzIGFuZCBzaG9wcGluZyBjYXJ0IGFyZSBtaXNzaW5nXHJcbiAgICAgKiBhbmQgdGhlIGluaXRpYWwgc2VsZWN0aW9uIGlzIGlnbm9yZWQuXHJcbiAgICAgKiBHcmVhdGVyIHZhbHVlIGFsbG93cyBtdWx0aXBsZSBzZWxlY3Rpb24gd2l0aCBzaG9wcGluZyBjYXJ0LlxyXG4gICAgICovXHJcbiAgICB0aGlzLnNlbGVjdGlvbkxpbWl0ID0gLTE7XHJcbiAgICAvKipcclxuICAgICAqIEZvciB0aGUgR2xvYmFsIFwiY291bnRyeVwiIGFsbG93cyB1c2VycyB0byBvdmVycmlkZSB0aGUgaGlkZUluRGF0YUJyb3dzZXIgdmFyaWFibGUgcHJvcGVydHksIGFuZCBzaG93IGFsbCB2YXJpYWJsZXMuXHJcbiAgICAgKiAtIERlZmF1bHRzIHRvIGZhbHNlXHJcbiAgICAgKi9cclxuICAgIHRoaXMuZGlzcGxheUFsbEdsb2JhbFZhcmlhYmxlcyA9IGZhbHNlO1xyXG4gICAgLyoqXHJcbiAgICAgKiBDdXN0b21pemVzIHZhcmlhYmxlIGluZm8gdG9vbHRpcCBiZWhhdmlvci5cclxuICAgICAqXHJcbiAgICAgKiAtIGZhbHNlIHZhbHVlIG1lYW5zIHNob3dpbmcgdmFyaWFibGVzIHdpdGhvdXQgaW5mbyBpY29uXHJcbiAgICAgKlxyXG4gICAgICogLSB0cnVlIHZhbHVlIG1lYW5zIHNob3dpbmcgYSBzdGFuZGFyZCBpbmZvIHRvb2x0aXAgd2l0aCB0aGUgZGVmYXVsdCBjb2xsZWN0aW9uIG9mXHJcbiAgICAgKiB2YXJpYWJsZSBwcm9wZXJ0aWVzXHJcbiAgICAgKlxyXG4gICAgICogLSBTdHJpbmcgdmFsdWUgcHJvdmlkZXMgYSBjb21tYS1zZXBhcmF0ZWQgbGlzdCBvZiBhZGRpdGlvbmFsIGluZm8gZmllbGRzIHRvIGJlIHNob3duXHJcbiAgICAgKlxyXG4gICAgICogLSBTdHJpbmdbXSB2YWx1ZSBwcm92aWRlcyBhIGxpc3Qgb2YgYWRkaXRpb25hbCBpbmZvIGZpZWxkcyB0byBiZSBzaG93blxyXG4gICAgICpcclxuICAgICAqIC0gT2JqZWN0IHZhbHVlIHNwZWNpZmllcyBhbiBpbnN0YW5jZSBvZiB3aWRnZXQgdG8gYmUgdXNlZCBmb3Igc2hvd2luZyBhIHZhcmlhYmxlIGluZm8gdG9vbHRpcC5cclxuICAgICAqIEl0IHNob3VsZCBmb2xsb3cgdGhlIGNvbnRhY3Qgb2YgVmFyaWFibGVJbmZvIG1vZHVsZS5cclxuICAgICAqXHJcbiAgICAgKiBUaGUgZm9sbG93aW5nIGFkZGl0aW9uYWwgZmllbGRzIGNhbiBiZSBzaG93biB3aXRoaW4gdGhlIHN0YW5kYXJkIGluZm8gdG9vbHRpcDpcclxuICAgICAqIC0gZnVsbE5hbWUgICAgICAgIFVuaXF1ZSB2YXJpYWJsZSBuYW1lIGNvbXBvc2VkIGFzIFwiZGF0YUNvbGxlY3Rpb25JRC52YXJpYWJsZUlEXCIuXHJcbiAgICAgKiBUaGlzIGZpZWxkIGlzIHNob3duIGJ5IGRlZmF1bHRcclxuICAgICAqIC0gcGVyY2VudEJhc2UgICAgIElEIG9mIHRoZSBiYXNlIHZhcmlhYmxlIHVzZWQgZm9yIHBlcmNlbnRhZ2UgY2FsY3VsYXRpb247XHJcbiAgICAgKiAtIGF2ZXJhZ2VCYXNlICAgICBJRCBvZiB0aGUgYmFzZSB2YXJpYWJsZSB1c2VkIGZvciBhdmVyYWdlIHZhbHVlIGNhbGN1bGF0aW9uO1xyXG4gICAgICogLSBpbmRleEJhc2UgICAgICAgSW5kZXggYmFzZSB2YWx1ZTtcclxuICAgICAqIC0gZmlsdGVyaW5nVGFncyAgIFZhcmlhYmxlIGZpbHRlcmluZyB0YWdzLlxyXG4gICAgICpcclxuICAgICAqIFNwZWNpYWwgY2FzZXM6XHJcbiAgICAgKiAtIFwiKlwiICAgICAgICAgICAgIEFsbCBhZGRpdGlvbmFsIGZpZWxkcyB3aWxsIGJlIHNob3duXHJcbiAgICAgKiAtIFwiXCIgICAgICAgICAgICAgIE5vIGFkZGl0aW9uYWwgZmllbGRzIHdpbGwgYmUgc2hvd25cclxuICAgICAqL1xyXG4gICAgdGhpcy52YXJpYWJsZUluZm8gPSB0cnVlO1xyXG4gICAgLyoqXHJcbiAgICAgKiBDb250cm9scyB0aGUgYXBwZWFyYW5jZSBvZiBzaG9wcGluZyBjYXJ0IGluIERhdGEgQnJvd3NlciBpbiB0aGUgbXVsdGlwbGUgc2VsZWN0aW9uIG1vZGU6XHJcbiAgICAgKiAtIGZhbHNlICAgRGlzYWJsZSBhIHNob3BwaW5nIGNhcnRcclxuICAgICAqIC0gdHJ1ZSAgICBFbmFibGUgdGhlIHN0YW5kYXJkIHNob3BwaW5nIGNhcnQgKGRlZmF1bHQpXHJcbiAgICAgKiAtIFdpZGdldCAgQWxyZWFkeSBjcmVhdGVkIHNob3BwaW5nIGNhcnQgd2lkZ2V0XHJcbiAgICAgKiAtIGZ1bmN0aW9uKFZhcmlhYmxlU3RvcmUpIEEgZmFjdG9yeSBmdW5jdGlvbiB1c2VkIGZvciBjcmVhdGluZyBhIHNob3BwaW5nIGNhcnQuXHJcbiAgICAgKiAtIEl0IHJlY2VpdmVzIHRoZSB2YXJpYWJsZSBzdG9yZSBvZiB0aGlzIGRhdGEgYnJvd3Nlci5cclxuICAgICAqL1xyXG4gICAgdGhpcy5zaG9wcGluZ0NhcnQgPSB0cnVlO1xyXG4gICAgLyoqXHJcbiAgICAgKiBJZiB0cnVlLCBkZXJpdmF0aXZlIHZhcmFpYmxlcyB3aWxsIGJlIGFsbG93ZWQuXHJcbiAgICAgKi9cclxuICAgIHRoaXMuYWxsb3dEZXJpdmF0aXZlVmFyaWFibGVzID0gZmFsc2U7XHJcbiAgICB0aGlzLl9pc0NyZWF0ZWQgPSBmYWxzZTtcclxuICB9XHJcbiAgcG9zdENyZWF0ZSgpIHtcclxuICAgIHRoaXMuX3NldChcInRpdGxlXCIsIGdldEdFTWVzc2FnZXMoXCJEYXRhQnJvd3NlclwiKS5EYXRhQnJvd3Nlci50aXRsZSk7XHJcbiAgICB0aGlzLmFwcGx5QnV0dG9uID0gZ2V0R0VNZXNzYWdlcyhcIkRhdGFCcm93c2VyXCIpLldpemFyZEJ1dHRvbnMuYXBwbHk7XHJcbiAgICB0aGlzLmJhY2tCdXR0b24gPSBnZXRHRU1lc3NhZ2VzKFwiRGF0YUJyb3dzZXJcIikuV2l6YXJkQnV0dG9ucy5iYWNrO1xyXG4gICAgdGhpcy5wYWdlQmFja0J1dHRvbiA9IGdldEdFTWVzc2FnZXMoXCJEYXRhQnJvd3NlclwiKS5XaXphcmRCdXR0b25zLmJhY2s7XHJcbiAgICB0aGlzLmNhbmNlbEJ1dHRvbiA9IGdldEdFTWVzc2FnZXMoXCJEYXRhQnJvd3NlclwiKS5XaXphcmRCdXR0b25zLmNhbmNlbDtcclxuICAgIHRoaXMuX2luaXRpYWxTdGFydHVwKCk7XHJcbiAgICBzdXBlci5wb3N0Q3JlYXRlKCk7XHJcbiAgICB0aGlzLl9pc0NyZWF0ZWQgPSB0cnVlO1xyXG4gIH1cclxuICBfaW5pdGlhbFN0YXJ0dXAoKSB7XHJcbiAgICAvLyBDcmVhdGUgZGF0YSBicm93c2VyIG1hbmFnZXJcclxuICAgIHRoaXMuX21hbmFnZXIgPSB0aGlzLl9jb250ZW50RmFjdG9yeS5jcmVhdGVNYW5hZ2VyKHRoaXMpO1xyXG4gICAgaWYgKHRoaXMuX21hbmFnZXIuc2VsZWN0aW9uTGltaXQgPiAwKSB7XHJcbiAgICAgIHRoaXMuX21hbmFnZXIub25MaW1pdCA9IHRoaXMuX29uTGltaXQuYmluZCh0aGlzKTtcclxuICAgICAgaWYgKHRoaXMuX21hbmFnZXIuc2VsZWN0aW9uTGltaXQgPT09IDEpIHtcclxuICAgICAgICB0aGlzLl9tYW5hZ2VyLndhdGNoKFwic2VsZWN0aW9uXCIsIHRoaXMuX29uQXBwbHkuYmluZCh0aGlzKSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHN5bmModGhpcywgdGhpcy5fbWFuYWdlciwgXCJ2YXJpYWJsZVF1ZXJ5XCIpO1xyXG4gICAgaWYgKHRoaXMuX21hbmFnZXIubXVsdGlwbGVTZWxlY3RJc0FsbG93ZWQoKSkge1xyXG4gICAgICB0aGlzLl9tYW5hZ2VyLndhdGNoKFwic2VsZWN0aW9uXCIsIHRoaXMuX3VwZGF0ZVNlbGVjdGlvbkZyb21NYW5hZ2VyLmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG4gICAgLy8gQ3JlYXRlIHNob3BwaW5nIGNhcnQgaWYgbW9yZSB0aGFuIG9uZSB2YXJpYWJsZSBpcyBhbGxvd2VkIGluIHNlbGVjdGlvbiBhbmQgdGhlIHNob3BwaW5nIGNhcnQgaXMgZW5hYmxlZC5cclxuICAgIGlmICh0aGlzLl9tYW5hZ2VyLmFsbG93U2hvcHBpbmdDYXJ0KSB7XHJcbiAgICAgIHRoaXMuX3Nob3BwaW5nQ2FydCA9XHJcbiAgICAgICAgdHlwZW9mIHRoaXMuc2hvcHBpbmdDYXJ0ID09PSBcImZ1bmN0aW9uXCJcclxuICAgICAgICAgID8gdGhpcy5zaG9wcGluZ0NhcnQodGhpcy52YXJpYWJsZXMpXHJcbiAgICAgICAgICA6IHR5cGVvZiB0aGlzLnNob3BwaW5nQ2FydCA9PT0gXCJvYmplY3RcIiAmJiB0aGlzLnNob3BwaW5nQ2FydC5wbGFjZUF0XHJcbiAgICAgICAgICAgID8gdGhpcy5zaG9wcGluZ0NhcnRcclxuICAgICAgICAgICAgOiBuZXcgU2hvcHBpbmdDYXJ0KHsgdmFyaWFibGVzOiB0aGlzLnZhcmlhYmxlcyB9KTtcclxuICAgICAgLy8gV2Ugb3duIGEgbmV3bHkgY3JlYXRlZCBzaG9wcGluZyBjYXJ0IG9ubHkuXHJcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5zaG9wcGluZ0NhcnQgIT09IFwib2JqZWN0XCIpIHtcclxuICAgICAgICB0aGlzLm93bih0aGlzLl9zaG9wcGluZ0NhcnQpOyAvLyBuZWVkIHRvIG93biwgYmVjYXVzZSBpdCBjYW4gYmUgZXh0ZXJuYWxcclxuICAgICAgfVxyXG4gICAgICB0aGlzLl9zeW5jTWFuYWdlcldpdGhTaG9wcGluZ0NhcnQoKTtcclxuICAgIH1cclxuICAgIHRoaXMuX2JyZWFkY3J1bWIgPSB0aGlzLl9jb250ZW50RmFjdG9yeS5jcmVhdGVCcmVhZGNydW1iKHtcclxuICAgICAgb25DYXRlZ29yaWVzQ2xpY2s6IHRoaXMuX2xvYWRDYXRlZ29yaWVzUGFnZS5iaW5kKHRoaXMpLFxyXG4gICAgICBvbkRDc0NsaWNrOiB0aGlzLl9sb2FkQ29sbGVjdGlvbnNQYWdlLmJpbmQodGhpcylcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fYnJlYWRjcnVtYi5kb21Ob2RlLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIHRoaXMuX21hbmFnZXIuZmx5QW5pbSA9IHRoaXMuX2JyZWFkY3J1bWIuZmx5QW5pbSA9IG5ldyBBbmltYXRpb25IZWxwZXIodGhpcy5kb21Ob2RlKTtcclxuICAgIGFkZENsYXNzKHRoaXMuZG9tTm9kZSwgXCJlc3JpNEdFRGF0YUJyb3dzZXJcIik7XHJcbiAgICB0aGlzLl9zaG9wcGluZ0NhcnQgJiYgdGhpcy5fc2hvcHBpbmdDYXJ0LnBsYWNlQXQodGhpcy5kb21Ob2RlKTtcclxuICAgIHRoaXMuX2JyZWFkY3J1bWIucGxhY2VBdCh0aGlzLmRvbU5vZGUpO1xyXG4gICAgdGhpcy5fYWRkVGl0bGVOb2RlKCk7XHJcbiAgICB0aGlzLl9tYW5hZ2VyLmNyZWF0ZVZhcmlhYmxlR3JpZCA9IChvcHRpb25zLCByZWZOb2RlKSA9PiB7XHJcbiAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xyXG4gICAgICBvcHRpb25zLm1hbmFnZXIgPSB0aGlzLl9tYW5hZ2VyO1xyXG4gICAgICByZXR1cm4gdGhpcy5fY29udGVudEZhY3RvcnkuY3JlYXRlVmFyaWFibGVHcmlkKG9wdGlvbnMsIHJlZk5vZGUpO1xyXG4gICAgfTtcclxuICAgIHRoaXMuX2FkZEF1dG9Ub29sdGlwKCk7XHJcbiAgfVxyXG4gIF9zeW5jTWFuYWdlcldpdGhTaG9wcGluZ0NhcnQoKSB7XHJcbiAgICBzeW5jKHRoaXMuX21hbmFnZXIsIHRoaXMuX3Nob3BwaW5nQ2FydCwgXCJzZWxlY3Rpb25cIik7XHJcbiAgfVxyXG4gIF9hZGRBdXRvVG9vbHRpcCgpIHtcclxuICAgIGF1dG9Ub29sdGlwKHRoaXMuZG9tTm9kZSk7XHJcbiAgfVxyXG4gIF9hZGRUaXRsZU5vZGUoKSB7XHJcbiAgICBjb25zdCB0aXRsZUNvbnRhaW5lciA9IGNyZWF0ZShcImRpdlwiLCB7IHN0eWxlOiBcInBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAwO1wiIH0sIHRoaXMuZG9tTm9kZSk7XHJcbiAgICB0aGlzLl90aXRsZU5vZGUgPSBjcmVhdGUoXCJkaXZcIiwgeyBjbGFzczogXCJlc3JpNEdFRGF0YUJyb3dzZXJfVGl0bGVcIiwgdGV4dENvbnRlbnQ6IHRoaXMudGl0bGUgfSwgdGl0bGVDb250YWluZXIpO1xyXG4gIH1cclxuICBfdXBkYXRlU2VsZWN0aW9uRnJvbU1hbmFnZXIoKSB7XHJcbiAgICBpZiAodGhpcy5zZWxlY3Rpb24gIT09IHRoaXMuX21hbmFnZXIuc2VsZWN0aW9uKSB7XHJcbiAgICAgIC8vIE9ubHkgc2VuZCBTZWxlY3QgZXZlbnQgd2hlbiB2YXJpYWJsZSBoYXMgYmVlbiBhZGRlZC5cclxuICAgICAgY29uc3Qgc2VuZFNlbGVjdEV2ZW50ID0gdGhpcy5fbWFuYWdlci5zZWxlY3Rpb24ubGVuZ3RoID4gdGhpcy5zZWxlY3Rpb24ubGVuZ3RoO1xyXG4gICAgICB0aGlzLl9zZXQoXCJzZWxlY3Rpb25cIiwgdGhpcy5fbWFuYWdlci5zZWxlY3Rpb24pO1xyXG4gICAgICBzZW5kU2VsZWN0RXZlbnQgJiYgdGhpcy5fb25TZWxlY3QoKTtcclxuICAgIH1cclxuICB9XHJcbiAgX3NldFNlbGVjdGlvbih2YWx1ZSkge1xyXG4gICAgLy8gU2VsZWN0aW9uIGNoYW5nZSBmcm9tIG91dHNpZGUgb2YgRGF0YSBCcm93c2VyIGlzIGFsbG93ZWQgaW4gdGhlIG11bHRpcGxlIHNlbGVjdGlvbiBjYXNlIG9ubHkuXHJcbiAgICBpZiAoIXRoaXMuX21hbmFnZXIgfHwgIXRoaXMuX21hbmFnZXIubXVsdGlwbGVTZWxlY3RJc0FsbG93ZWQoKSkge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIHZhbHVlID0gdmFsdWUgfHwgW107XHJcbiAgICBpZiAodGhpcy5zZWxlY3Rpb24gPT09IHZhbHVlKSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fdXBkYXRlU2VsZWN0aW9uKHZhbHVlKTtcclxuICAgIHJldHVybiB0aGlzLl9tYW5hZ2VyLmNoYW5nZVNlbGVjdGlvbih2YWx1ZSk7IC8vIENoYW5nZSBzZWxlY3Rpb24gYWZ0ZXIgc3luY2hyb25pemF0aW9uXHJcbiAgfVxyXG4gIF91cGRhdGVTZWxlY3Rpb24obmV3U2VsZWN0aW9uKSB7XHJcbiAgICB0aGlzLl9zZXQoXCJzZWxlY3Rpb25cIiwgbmV3U2VsZWN0aW9uLnNsaWNlKCkpOyAvLyBEb24ndCB3YXRjaCBzZWxlY3Rpb24gaGVyZSAoPylcclxuICB9XHJcbiAgX3NldENvdW50cnlJRCh2YWx1ZSwgc2tpcFVwZGF0ZXMgPSBmYWxzZSkge1xyXG4gICAgaWYgKHZhbHVlID09PSB0aGlzLl9nZXRRdWVyeUNvdW50cnlJRCgpKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICh2YWx1ZSAmJiB0aGlzLmFsbG93SGllcmFyY2hpZXMpIHtcclxuICAgICAgY29uc3QgaGllcmFyY2h5SUQgPSB2YWx1ZS5zdWJzdHIoMyk7IC8vIFNraXAgMi1jaGFyIGNvdW50cnkgY29kZSBhbmQgJy8nXHJcbiAgICAgIHZhbHVlID0gdmFsdWUuc3Vic3RyKDAsIDIpOyAvLyBFeHRyYWN0IGNvdW50cnkgY29kZVxyXG4gICAgICB0aGlzLl9zZXQoXCJoaWVyYXJjaHlJRFwiLCBoaWVyYXJjaHlJRCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9zZXQoXCJjb3VudHJ5SURcIiwgdmFsdWUpO1xyXG4gICAgaWYgKCF0aGlzLl9tYW5hZ2VyIHx8IHNraXBVcGRhdGVzKSB7XHJcbiAgICAgIC8vIFRoZSBjYXNlIHdoZW4gdGhpcyBtZXRob2QgaXMgY2FsbGVkIGluIHRoZSBjb25zdHJ1Y3RvclxyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB2YWx1ZSA9IHRoaXMuX2dldFF1ZXJ5Q291bnRyeUlEKCk7XHJcbiAgICBpZiAodGhpcy5faXNDcmVhdGVkKSB7XHJcbiAgICAgIHRoaXMuX2xvYWRDYXRlZ29yaWVzUGFnZSgpLmNoYW5nZUNvdW50cnkodmFsdWUpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHRoaXMuX21hbmFnZXIudmFyaWFibGVRdWVyeSA9IHsgY291bnRyeUlEOiB2YWx1ZSB9O1xyXG4gICAgICB0aGlzLl9tYW5hZ2VyLnZhcmlhYmxlcy5zeW5jaHJvbml6ZSh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9nZXRRdWVyeUNvdW50cnlJRChjb3VudHJ5SUQsIGhpZXJhcmNoeUlEKSB7XHJcbiAgICBpZiAodHlwZW9mIGNvdW50cnlJRCA9PT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICBjb3VudHJ5SUQgPSB0aGlzLmNvdW50cnlJRDtcclxuICAgICAgaGllcmFyY2h5SUQgPSB0aGlzLmhpZXJhcmNoeUlEO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuYWxsb3dIaWVyYXJjaGllcyAmJiBjb3VudHJ5SUQgJiYgaGllcmFyY2h5SUQgPyBjb3VudHJ5SUQgKyBcIi9cIiArIGhpZXJhcmNoeUlEIDogY291bnRyeUlEO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBBbGxvd3MgdG8gbW92ZSBEYXRhIEJyb3dzZXIgdG8gYSBwYWdlIGRlcGVuZGluZyBvbiBxdWVyeSBwYXJhbWV0ZXJzLlxyXG4gICAqIFNlZSB2YXJpYWJsZVF1ZXJ5IHByb3BlcnR5IGRlc2NyaXB0aW9uIGZvciBkZXRhaWwuXHJcbiAgICogSWYgcXVlcnkgcGFyYW1ldGVyIGlzIG1pc3NpbmcsIGl0IHJlc3RhcnRzIHRoZSBjdXJyZW50IHBhZ2UuXHJcbiAgICovXHJcbiAgbGF1bmNoKHF1ZXJ5KSB7XHJcbiAgICBpZiAocXVlcnkpIHtcclxuICAgICAgY29uc3QgcXVlcnlDb3VudHJ5SUQgPSB0aGlzLl9nZXRRdWVyeUNvdW50cnlJRCgpO1xyXG4gICAgICBxdWVyeSA9IE9iamVjdC5hc3NpZ24oe30sIHF1ZXJ5KTtcclxuICAgICAgaWYgKHR5cGVvZiBxdWVyeS5jb3VudHJ5SUQgPT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICBxdWVyeS5jb3VudHJ5SUQgPSBxdWVyeUNvdW50cnlJRDtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLl9tYW5hZ2VyLnZhcmlhYmxlUXVlcnkgPSBxdWVyeTtcclxuICAgICAgaWYgKHF1ZXJ5Q291bnRyeUlEICE9PSBxdWVyeS5jb3VudHJ5SUQpIHtcclxuICAgICAgICB0aGlzLl9zZXQoXCJjb3VudHJ5SURcIiwgcXVlcnkuY291bnRyeUlEKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5fbGF1bmNoKCk7XHJcbiAgfVxyXG4gIF9sYXVuY2goKSB7XHJcbiAgICB0aGlzLl9zaG93UHJvZ3Jlc3ModGhpcy5fbWFuYWdlci52YWxpZGF0ZVF1ZXJ5KCkudGhlbigocXVlcnlSZXN1bHQpID0+IHtcclxuICAgICAgdGhpcy5fbWFuYWdlci52YWxpZGF0ZVNlbGVjdGlvbigpO1xyXG4gICAgICB0aGlzLl9sb2FkTmV4dFBhZ2UocXVlcnlSZXN1bHQpO1xyXG4gICAgfSkpO1xyXG4gIH1cclxuICAvLyBCYWNrIGJ1dHRvbiBmdW5jdGlvbmFsaXR5LCB1c2VkIHRvIHN1cHBvcnQgZXh0ZXJuYWwgYmFjayBidXR0b25zIG91dHNpZGUgdGhlIERhdGFCcm93c2VyXHJcbiAgYmFjaygpIHtcclxuICAgIHRoaXMuY3VycmVudFBhZ2UgJiYgdGhpcy5jdXJyZW50UGFnZS5lbWl0KFwiYmFja1wiKTtcclxuICB9XHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyAgTmF2aWdhdGlvbiBiZXR3ZWVuIHBhZ2VzXHJcbiAgLy9cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICBfbG9hZE5leHRQYWdlKHF1ZXJ5UmVzdWx0KSB7XHJcbiAgICBjb25zdCBxdWVyeSA9IHRoaXMuX21hbmFnZXIudmFyaWFibGVRdWVyeTtcclxuICAgIGlmIChxdWVyeS5zZWFyY2hTdHJpbmcgfHwgcXVlcnkuZmF2b3JpdGVzIHx8IHF1ZXJ5LmRhdGFDb2xsZWN0aW9uSUQpIHtcclxuICAgICAgdGhpcy5fbG9hZFZhcmlhYmxlc1BhZ2UocXVlcnlSZXN1bHQpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAocXVlcnkuY2F0ZWdvcnlJRCkge1xyXG4gICAgICB0aGlzLl9pc05vbkVtcHR5Q2F0ZWdvcnkoKG5vbmVtcHR5KSA9PiB7XHJcbiAgICAgICAgaWYgKG5vbmVtcHR5KSB7XHJcbiAgICAgICAgICB0aGlzLl9sb2FkQ29sbGVjdGlvbnNQYWdlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5fbG9hZFZhcmlhYmxlc1BhZ2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHRoaXMuX2xvYWRDYXRlZ29yaWVzUGFnZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuICBfbG9hZFByZXZpb3VzUGFnZSgpIHtcclxuICAgIGlmICh0aGlzLmN1cnJlbnRQYWdlSWQgPT09IFwiY29sbGVjdGlvbnNcIikge1xyXG4gICAgICB0aGlzLl9sb2FkQ2F0ZWdvcmllc1BhZ2UoKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB0aGlzLl9pc05vbkVtcHR5Q2F0ZWdvcnkoKG5vbmVtcHR5KSA9PiB7XHJcbiAgICAgICAgaWYgKG5vbmVtcHR5KSB7XHJcbiAgICAgICAgICB0aGlzLl9sb2FkQ29sbGVjdGlvbnNQYWdlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5fbG9hZENhdGVnb3JpZXNQYWdlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcbiAgX2xvYWRDYXRlZ29yaWVzUGFnZSgpIHtcclxuICAgIGxldCBwYWdlID0gdGhpcy5fcGFnZXNbXCJjYXRlZ29yaWVzXCJdO1xyXG4gICAgaWYgKCFwYWdlKSB7XHJcbiAgICAgIHBhZ2UgPSB0aGlzLl9wYWdlc1tcImNhdGVnb3JpZXNcIl0gPSB0aGlzLl9jb250ZW50RmFjdG9yeS5jcmVhdGVDYXRlZ29yaWVzUGFnZSh7XHJcbiAgICAgICAgY291bnRyeUJveDogdGhpcy5jb3VudHJ5Qm94LFxyXG4gICAgICAgIGFsbG93SGllcmFyY2hpZXM6IHRoaXMuYWxsb3dIaWVyYXJjaGllcyxcclxuICAgICAgICBtYW5hZ2VyOiB0aGlzLl9tYW5hZ2VyLFxyXG4gICAgICAgIGJhY2tCdXR0b246IHRoaXMuYmFja0J1dHRvbixcclxuICAgICAgICBhcHBseUJ1dHRvbjogdGhpcy5fbWFuYWdlci5tdWx0aXBsZVNlbGVjdElzQWxsb3dlZCgpID8gdGhpcy5hcHBseUJ1dHRvbiA6IG51bGwsXHJcbiAgICAgICAgY2FuY2VsQnV0dG9uOiB0aGlzLmNhbmNlbEJ1dHRvbixcclxuICAgICAgICBvblNlbGVjdDogKCkgPT4gdGhpcy5fbG9hZE5leHRQYWdlKG51bGwpLFxyXG4gICAgICAgIG9uU2VhcmNoOiB0aGlzLl9sb2FkTmV4dFBhZ2UuYmluZCh0aGlzKSxcclxuICAgICAgICBvbkNvdW50cnlDaGFuZ2U6IChjb3VudHJ5SUQpID0+IHtcclxuICAgICAgICAgIHRoaXMuX3NldENvdW50cnlJRChjb3VudHJ5SUQsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIHBhZ2Uub24oXCJiYWNrXCIsIHRoaXMuX29uQmFjay5iaW5kKHRoaXMpKTtcclxuICAgICAgcGFnZS5vbihcImFwcGx5XCIsIHRoaXMuX29uQXBwbHkuYmluZCh0aGlzKSk7XHJcbiAgICAgIHBhZ2Uub24oXCJjYW5jZWxcIiwgdGhpcy5fb25DYW5jZWwuYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmxvYWRQYWdlKFwiY2F0ZWdvcmllc1wiKTtcclxuICAgIHJldHVybiBwYWdlO1xyXG4gIH1cclxuICBfbG9hZENvbGxlY3Rpb25zUGFnZSgpIHtcclxuICAgIGxldCBwYWdlID0gdGhpcy5fcGFnZXNbXCJjb2xsZWN0aW9uc1wiXTtcclxuICAgIGlmICghcGFnZSkge1xyXG4gICAgICBwYWdlID0gdGhpcy5fcGFnZXNbXCJjb2xsZWN0aW9uc1wiXSA9IHRoaXMuX2NvbnRlbnRGYWN0b3J5LmNyZWF0ZURhdGFDb2xsZWN0aW9uc1BhZ2Uoe1xyXG4gICAgICAgIG1hbmFnZXI6IHRoaXMuX21hbmFnZXIsXHJcbiAgICAgICAgYmFja0J1dHRvbjogdGhpcy5wYWdlQmFja0J1dHRvbixcclxuICAgICAgICBhcHBseUJ1dHRvbjogdGhpcy5fbWFuYWdlci5tdWx0aXBsZVNlbGVjdElzQWxsb3dlZCgpID8gdGhpcy5hcHBseUJ1dHRvbiA6IG51bGwsXHJcbiAgICAgICAgY2FuY2VsQnV0dG9uOiB0aGlzLmNhbmNlbEJ1dHRvbixcclxuICAgICAgICBvblNlbGVjdDogdGhpcy5fbG9hZE5leHRQYWdlLmJpbmQodGhpcylcclxuICAgICAgfSk7XHJcbiAgICAgIHBhZ2Uub24oXCJiYWNrXCIsIHRoaXMuX2xvYWRQcmV2aW91c1BhZ2UuYmluZCh0aGlzKSk7XHJcbiAgICAgIHBhZ2Uub24oXCJhcHBseVwiLCB0aGlzLl9vbkFwcGx5LmJpbmQodGhpcykpO1xyXG4gICAgICBwYWdlLm9uKFwiY2FuY2VsXCIsIHRoaXMuX29uQ2FuY2VsLmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG4gICAgcGFnZS5sYXN0RGF0YUNvbGxlY3Rpb25JRCA9IHRoaXMuX21hbmFnZXIudmFyaWFibGVRdWVyeS5kYXRhQ29sbGVjdGlvbklEO1xyXG4gICAgdGhpcy5sb2FkUGFnZShcImNvbGxlY3Rpb25zXCIpO1xyXG4gICAgcmV0dXJuIHBhZ2U7XHJcbiAgfVxyXG4gIF9sb2FkVmFyaWFibGVzUGFnZShzZWFyY2hSZXN1bHRzKSB7XHJcbiAgICBsZXQgcGFnZSA9IHRoaXMuX3BhZ2VzW1widmFyaWFibGVzXCJdO1xyXG4gICAgaWYgKCFwYWdlKSB7XHJcbiAgICAgIHBhZ2UgPSB0aGlzLl9wYWdlc1tcInZhcmlhYmxlc1wiXSA9IHRoaXMuX2NvbnRlbnRGYWN0b3J5LmNyZWF0ZVZhcmlhYmxlc1BhZ2Uoe1xyXG4gICAgICAgIG1hbmFnZXI6IHRoaXMuX21hbmFnZXIsXHJcbiAgICAgICAgYmFja0J1dHRvbjogdGhpcy5wYWdlQmFja0J1dHRvbixcclxuICAgICAgICBhcHBseUJ1dHRvbjogdGhpcy5fbWFuYWdlci5tdWx0aXBsZVNlbGVjdElzQWxsb3dlZCgpID8gdGhpcy5hcHBseUJ1dHRvbiA6IG51bGwsXHJcbiAgICAgICAgY2FuY2VsQnV0dG9uOiB0aGlzLmNhbmNlbEJ1dHRvblxyXG4gICAgICB9KTtcclxuICAgICAgcGFnZS5vbihcImJhY2tcIiwgdGhpcy5fbG9hZFByZXZpb3VzUGFnZS5iaW5kKHRoaXMpKTtcclxuICAgICAgcGFnZS5vbihcImFwcGx5XCIsIHRoaXMuX29uQXBwbHkuYmluZCh0aGlzKSk7XHJcbiAgICAgIHBhZ2Uub24oXCJjYW5jZWxcIiwgdGhpcy5fb25DYW5jZWwuYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcbiAgICBwYWdlLnNlYXJjaFJlc3VsdHMgPSBzZWFyY2hSZXN1bHRzO1xyXG4gICAgdGhpcy5sb2FkUGFnZShcInZhcmlhYmxlc1wiKTtcclxuICAgIHJldHVybiBwYWdlO1xyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vICBMb2FkIFBhZ2UgaW1wcm92ZWRcclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIGxvYWRQYWdlKHBhZ2VJZCkge1xyXG4gICAgLy8gV2UgYWxsb3cgcmVsb2FkaW5nIHRoZSBzYW1lIHBhZ2Ugd2l0aCBvdGhlciBxdWVyeSBwYXJhbWV0ZXIuXHJcbiAgICAvLyBTbywgd2UgZG9uJ3QgdGVzdCB0aGF0IHRoZSBjdXJyZW50IHBhZ2UgZGlmZmVycyBmcm9tIHRoZSByZXF1aXJlZCBwYWdlLlxyXG4gICAgc3dpdGNoIChwYWdlSWQpIHtcclxuICAgICAgY2FzZSBcImNhdGVnb3JpZXNcIjpcclxuICAgICAgICB0aGlzLl9tYW5hZ2VyLnZhcmlhYmxlUXVlcnkgPSB0aGlzLl9tYW5hZ2VyLmNvbXBvc2VRdWVyeSgpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwiY29sbGVjdGlvbnNcIjpcclxuICAgICAgICB0aGlzLl9tYW5hZ2VyLnZhcmlhYmxlUXVlcnkgPSB0aGlzLl9tYW5hZ2VyLmNvbXBvc2VRdWVyeShcImNhdGVnb3J5SURcIik7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBzdXBlci5sb2FkUGFnZShwYWdlSWQpO1xyXG4gICAgLy8gU2hvdWxkIHVwZGF0ZSBicmVhZGNydW1iIHdoZW4gRGF0YSBCcm93c2VyIGlzIGFscmVhZHkgc2hvd24uXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgdGhpcy5fdXBkYXRlQnJlYWRjcnVtYihwYWdlSWQpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLmVtaXQoXCJwYWdlTG9hZGVkXCIsIHsgcGFnZU5hbWU6IHBhZ2VJZCB9KTtcclxuICB9XHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyAgV29yayB3aXRoIGJyZWFkY3J1bWJcclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIF91cGRhdGVCcmVhZGNydW1iKHBhZ2VJZCkge1xyXG4gICAgaWYgKCF0aGlzLl9icmVhZGNydW1iLmRvbU5vZGUpIHtcclxuICAgICAgcmV0dXJuOyAvLyBBbHJlYWR5IGRlc3Ryb3llZFxyXG4gICAgfVxyXG4gICAgc3dpdGNoIChwYWdlSWQpIHtcclxuICAgICAgY2FzZSBcImNhdGVnb3JpZXNcIjpcclxuICAgICAgICB0aGlzLl9icmVhZGNydW1iLmRvbU5vZGUuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgIHRoaXMuX2JyZWFkY3J1bWIuY2xlYXJTZWxlY3Rpb24oKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcImNvbGxlY3Rpb25zXCI6XHJcbiAgICAgICAgdGhpcy5fYnJlYWRjcnVtYi5kb21Ob2RlLnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuX2JyZWFkY3J1bWIuc2VsZWN0Q2F0ZWdvcnkodGhpcy5fbWFuYWdlci5nZXRDYXRlZ29yeSgpKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcInZhcmlhYmxlc1wiOlxyXG4gICAgICAgIHRoaXMuX2JyZWFkY3J1bWIuZG9tTm9kZS5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcclxuICAgICAgICB0aGlzLl9pc05vbkVtcHR5Q2F0ZWdvcnkoKG5vbmVtcHR5LCBjYXRlZ29yeSkgPT4ge1xyXG4gICAgICAgICAgaWYgKG5vbmVtcHR5IHx8ICFjYXRlZ29yeSkge1xyXG4gICAgICAgICAgICAvLyBvbmx5IHRoZSB0aXRsZSBpcyBuZWVkZWRcclxuICAgICAgICAgICAgbGV0IGRhdGFDb2xsZWN0aW9uID0gdGhpcy5fbWFuYWdlci5nZXREYXRhQ29sbGVjdGlvbigpO1xyXG4gICAgICAgICAgICBpZiAoIWRhdGFDb2xsZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgZGF0YUNvbGxlY3Rpb24gPSB0aGlzLl9wcmVwYXJlTm9EQ0JyZWFkY3J1bWJJbmZvKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fYnJlYWRjcnVtYi5zZWxlY3REYXRhQ29sbGVjdGlvbihkYXRhQ29sbGVjdGlvbiwgY2F0ZWdvcnkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2JyZWFkY3J1bWIuc2VsZWN0Q2F0ZWdvcnkoY2F0ZWdvcnkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH1cclxuICBfcHJlcGFyZU5vRENCcmVhZGNydW1iSW5mbygpIHtcclxuICAgIGNvbnN0IHF1ZXJ5ID0gdGhpcy5fbWFuYWdlci52YXJpYWJsZVF1ZXJ5O1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdGl0bGU6IHRoaXMuX21hbmFnZXIudmFyaWFibGVRdWVyeS5mYXZvcml0ZXNcclxuICAgICAgICA/IGdldEdFTWVzc2FnZXMoXCJEYXRhQnJvd3NlclwiKS5EYXRhVmFyaWFibGVzUGFnZS5mYXZvcml0ZVZhcmlhYmxlc1RpdGxlXHJcbiAgICAgICAgOiAhcXVlcnkgfHwgIXF1ZXJ5LnNlYXJjaFN0cmluZyB8fCBxdWVyeS5zZWFyY2hTdHJpbmcgPT09IFwiKlwiXHJcbiAgICAgICAgICA/IGdldEdFTWVzc2FnZXMoXCJEYXRhQnJvd3NlclwiKS5EYXRhVmFyaWFibGVzUGFnZS5hbGxWYXJpYWJsZXNUaXRsZVxyXG4gICAgICAgICAgOiBzdWJzdGl0dXRlU3RyaW5nKGdldEdFTWVzc2FnZXMoXCJEYXRhQnJvd3NlclwiKS5EYXRhVmFyaWFibGVzUGFnZS5jdXN0b21TZWFyY2gsIHtcclxuICAgICAgICAgICAgc2VhcmNoS2V5OiBxdWVyeS5zZWFyY2hTdHJpbmdcclxuICAgICAgICAgIH0pXHJcbiAgICB9O1xyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vICBVdGlsaXRpZXNcclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8qKlxyXG4gICAqIFRlc3RzIHRoZSBjdXJyZW50IGNhdGVnb3J5IHRvIGJlIG5vbmVtcHR5ICh0byBoYXZlIHBvcHVsYXIgdmFyaWFibGVzIG9yIG1vcmUgdGhhbiBvbmUgZGF0YSBjb2xsZWN0aW9uKS5cclxuICAgKi9cclxuICBfaXNOb25FbXB0eUNhdGVnb3J5KGNhbGxiYWNrKSB7XHJcbiAgICB3aGVuKHRoaXMuX21hbmFnZXIuZ2V0Q2F0ZWdvcnkoKSkudGhlbigoY2F0ZWdvcnkpID0+IHtcclxuICAgICAgY29uc3Qgbm9uZW1wdHkgPSBjYXRlZ29yeVxyXG4gICAgICAgID8gdGhpcy52YXJpYWJsZXMuZ2V0UG9wdWxhclZhcmlhYmxlcyhjYXRlZ29yeSkubGVuZ3RoIHx8IGNhdGVnb3J5LmRhdGFDb2xsZWN0aW9ucy5sZW5ndGggPiAxXHJcbiAgICAgICAgOiBmYWxzZTtcclxuICAgICAgY2FsbGJhY2soISFub25lbXB0eSwgY2F0ZWdvcnkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vIEV2ZW50c1xyXG4gIC8vXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIF9vbkxpbWl0KCkge1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHRoaXMuZW1pdChcImxpbWl0XCIsIHsgc2VsZWN0aW9uTGltaXQ6IHRoaXMuX21hbmFnZXIuc2VsZWN0aW9uTGltaXQgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgX29uQmFjaygpIHtcclxuICAgIHRoaXMuZW1pdChcImJhY2tcIik7XHJcbiAgfVxyXG4gIF9vbkFwcGx5KCkge1xyXG4gICAgaWYgKHRoaXMuX21hbmFnZXIuc2VsZWN0aW9uTGltaXQgPT09IDEpIHtcclxuICAgICAgLy8gTW92ZSBzZWxlY3Rpb24gZnJvbSB0aGUgbWFuYWdlciB0byB0aGlzIG9iamVjdCBpbiB0aGUgc2luZ2xlXHJcbiAgICAgIC8vIHNlbGVjdGlvbiBjYXNlIHRvIGFsbG93IHJlLWxhdW5jaCB0aGUgZGF0YSBicm93c2VyIGFmdGVyIHNlbGVjdGlvbiBpcyBkb25lLlxyXG4gICAgICB0aGlzLl91cGRhdGVTZWxlY3Rpb25Gcm9tTWFuYWdlcigpO1xyXG4gICAgICBpZiAodGhpcy5fbWFuYWdlci5zZWxlY3Rpb24ubGVuZ3RoKSB7XHJcbiAgICAgICAgdGhpcy5fbWFuYWdlci5zZWxlY3Rpb24gPSBbXTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5lbWl0KFwiYXBwbHlcIiwgeyBzZWxlY3Rpb246IHRoaXMuc2VsZWN0aW9uLCB2YXJpYWJsZVF1ZXJ5OiB0aGlzLnZhcmlhYmxlUXVlcnkgfSk7XHJcbiAgfVxyXG4gIF9vbkNhbmNlbCgpIHtcclxuICAgIHRoaXMuZW1pdChcImNhbmNlbFwiKTtcclxuICB9XHJcbiAgX29uU2VsZWN0KCkge1xyXG4gICAgdGhpcy5lbWl0KFwic2VsZWN0XCIpO1xyXG4gIH1cclxufTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKClcclxuXSwgRGF0YUJyb3dzZXJCYXNlLnByb3RvdHlwZSwgXCJhcHBseUJ1dHRvblwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoKVxyXG5dLCBEYXRhQnJvd3NlckJhc2UucHJvdG90eXBlLCBcImJhY2tCdXR0b25cIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKClcclxuXSwgRGF0YUJyb3dzZXJCYXNlLnByb3RvdHlwZSwgXCJwYWdlQmFja0J1dHRvblwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoKVxyXG5dLCBEYXRhQnJvd3NlckJhc2UucHJvdG90eXBlLCBcImNhbmNlbEJ1dHRvblwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoe1xyXG4gICAgY29uc3RydWN0T25seTogdHJ1ZVxyXG4gIH0pXHJcbl0sIERhdGFCcm93c2VyQmFzZS5wcm90b3R5cGUsIFwiYWxsb3dIaWVyYXJjaGllc1wiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoe1xyXG4gICAgY29uc3RydWN0T25seTogdHJ1ZVxyXG4gIH0pXHJcbl0sIERhdGFCcm93c2VyQmFzZS5wcm90b3R5cGUsIFwiY291bnRyeUJveFwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoe1xyXG4gICAgY29uc3RydWN0T25seTogdHJ1ZVxyXG4gIH0pXHJcbl0sIERhdGFCcm93c2VyQmFzZS5wcm90b3R5cGUsIFwidmFyaWFibGVzXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gIHkkcih7XHJcbiAgICBjb25zdHJ1Y3RPbmx5OiB0cnVlXHJcbiAgfSlcclxuXSwgRGF0YUJyb3dzZXJCYXNlLnByb3RvdHlwZSwgXCJzZWxlY3Rpb25MaW1pdFwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoe1xyXG4gICAgY29uc3RydWN0T25seTogdHJ1ZVxyXG4gIH0pXHJcbl0sIERhdGFCcm93c2VyQmFzZS5wcm90b3R5cGUsIFwiZGlzcGxheUFsbEdsb2JhbFZhcmlhYmxlc1wiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoKVxyXG5dLCBEYXRhQnJvd3NlckJhc2UucHJvdG90eXBlLCBcInZhcmlhYmxlUXVlcnlcIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKHtcclxuICAgIGNvbnN0cnVjdE9ubHk6IHRydWVcclxuICB9KVxyXG5dLCBEYXRhQnJvd3NlckJhc2UucHJvdG90eXBlLCBcImZhdm9yaXRlc1wiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoe1xyXG4gICAgY29uc3RydWN0T25seTogdHJ1ZVxyXG4gIH0pXHJcbl0sIERhdGFCcm93c2VyQmFzZS5wcm90b3R5cGUsIFwidmFyaWFibGVJbmZvXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gIHkkcih7XHJcbiAgICBjb25zdHJ1Y3RPbmx5OiB0cnVlXHJcbiAgfSlcclxuXSwgRGF0YUJyb3dzZXJCYXNlLnByb3RvdHlwZSwgXCJzaG9wcGluZ0NhcnRcIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKHtcclxuICAgIGNvbnN0cnVjdE9ubHk6IHRydWVcclxuICB9KVxyXG5dLCBEYXRhQnJvd3NlckJhc2UucHJvdG90eXBlLCBcImFsbG93RGVyaXZhdGl2ZVZhcmlhYmxlc1wiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoe1xyXG4gICAgY29uc3RydWN0T25seTogdHJ1ZVxyXG4gIH0pXHJcbl0sIERhdGFCcm93c2VyQmFzZS5wcm90b3R5cGUsIFwiYWxsb3dNdWx0aXBsZVNlbGVjdEluR3JvdXBcIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKClcclxuXSwgRGF0YUJyb3dzZXJCYXNlLnByb3RvdHlwZSwgXCJ0aXRsZVwiLCBudWxsKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKHtcclxuICAgIHZhbHVlOiBbXVxyXG4gIH0pXHJcbl0sIERhdGFCcm93c2VyQmFzZS5wcm90b3R5cGUsIFwic2VsZWN0aW9uXCIsIG51bGwpO1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoKVxyXG5dLCBEYXRhQnJvd3NlckJhc2UucHJvdG90eXBlLCBcImNvdW50cnlJRFwiLCBudWxsKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKClcclxuXSwgRGF0YUJyb3dzZXJCYXNlLnByb3RvdHlwZSwgXCJoaWVyYXJjaHlJRFwiLCBudWxsKTtcclxuRGF0YUJyb3dzZXJCYXNlID0gX19kZWNvcmF0ZShbXHJcbiAgaSRYKClcclxuXSwgRGF0YUJyb3dzZXJCYXNlKTtcblxuLy8gZ2VvZW5yaWNobWVudC51dGlsc1xyXG4vKipcclxuICogQ3JlYXRlcyBhIERPTSBub2RlIGJ5IGNhdGVnb3J5LlxyXG4gKiBAcGFyYW0gY2F0ZWdvcnkgRGF0YSBjb2xsZWN0aW9uIGNhdGVnb3J5LlxyXG4gKiBAcGFyYW0gcGFyZW50Tm9kZSBQYXJlbnQgSFRNTCBlbGVtZW50LlxyXG4gKiBAcGFyYW0gcGFyYW1zIElmIHBhc3NlZCBhbmQgJ25vTGFiZWwnIGlzIHRydWUsIGEgdGV4dCBsYWJlbCB1bmRlciB0aGUgaWNvbiB3aWxsIG5vdCBiZSBhZGRlZC5cclxuICogQHJldHVybnMgQSBkYXRhIGNvbGxlY3Rpb24gY2F0ZWdvcnkgbm9kZSBleHRlbmRlZCB3aXRoIGljb24gbm9kZSByZWZlcmVuY2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVDYXRlZ29yeU5vZGUoY2F0ZWdvcnksIHBhcmVudE5vZGUsIHBhcmFtcykge1xyXG4gIGNvbnN0IG5vZGUgPSBjcmVhdGUoXCJkaXZcIiwgeyBjbGFzczogXCJEYXRhQ2F0ZWdvcnlJdGVtIGVzcmlHRUNsaWNrYWJsZVwiIH0sIHBhcmVudE5vZGUpO1xyXG4gIC8vIE5lZWQgd3JhcCBhbiBpY29uIHdpdGggYSBtYXJnaW4gY29udGFpbmVyIHRvIHByb3ZpZGUgYSBzbW9vdGggZmx5IGFuaW1hdGlvbi5cclxuICAvLyBUaGUgZmx5aW5nIG5vZGUgc2hvdWxkIGhhdmUgdGhlIHNhbWUgd2lkdGgsIG1hcmdpbnMgYW5kIHBhZGRpbmdzIGFzIHRoZSBkZXN0aW5hdGlvbiBub2RlLlxyXG4gIC8vIE90aGVyd2lzZSwgaXQgd2lsbCBmaW5hbGx5IGp1bXAgYSBiaXQuXHJcbiAgY29uc3QgbWFyZ2lucyA9IGNyZWF0ZShcImRpdlwiLCB7IGNsYXNzOiBcIkRhdGFDYXRlZ29yeUl0ZW1JY29uTWFyZ2luc1wiIH0sIG5vZGUpO1xyXG4gIG5vZGUuaWNvbiA9IGNyZWF0ZShcImRpdlwiLCBudWxsLCBtYXJnaW5zKTtcclxuICBpZiAoIXBhcmFtcyB8fCAhcGFyYW1zLm5vTGFiZWwpXHJcbiAgICBjcmVhdGUoXCJkaXZcIiwgeyBjbGFzczogXCJEYXRhQ2F0ZWdvcnlJdGVtTGFiZWwgZXNyaUdFVHJpbVdpdGhFbGxpcHNlc1wiIH0sIG5vZGUpO1xyXG4gIHVwZGF0ZUNhdGVnb3J5Tm9kZShub2RlLCBjYXRlZ29yeSk7XHJcbiAgcmV0dXJuIG5vZGU7XHJcbn1cclxuLyoqXHJcbiAqIFVwZGF0ZXMgYSBET00gbm9kZSBlYXJsaWVyIGNyZWF0ZWQgd2l0aCBjcmVhdGVDYXRlZ29yeU5vZGUgbWV0aG9kLlxyXG4gKiBAcGFyYW0gbm9kZSBEYXRhIGNvbGxlY3Rpb24gY2F0ZWdvcnkgbm9kZS5cclxuICogQHBhcmFtIGNhdGVnb3J5IERhdGEgY29sbGVjdGlvbiBjYXRlZ29yeS5cclxuICovXHJcbmZ1bmN0aW9uIHVwZGF0ZUNhdGVnb3J5Tm9kZShub2RlLCBjYXRlZ29yeSkge1xyXG4gIG5vZGUuaWNvbi5jbGFzc05hbWUgPSBcIkRhdGFDYXRlZ29yeUl0ZW1JY29uIFwiICsgZ2V0Q2F0ZWdvcnlJbWFnZUNsYXNzKGNhdGVnb3J5KTtcclxuICBub2RlLmljb24uc2V0QXR0cmlidXRlKFwiY2F0ZWdvcnlJZFwiLCBjYXRlZ29yeSA/IGNhdGVnb3J5LmlkIDogXCJcIik7IC8vIGhlbHBzIGlkZW50aWZ5IGljb25zIGlmIG5lZWRlZCAodXNlZCBvdXRzaWRlIG9mIHRoaXMgQVBJKVxyXG4gIG5vZGUuY2hpbGRyZW5bMV0gJiYgKG5vZGUuY2hpbGRyZW5bMV0udGV4dENvbnRlbnQgPSAoY2F0ZWdvcnkgJiYgY2F0ZWdvcnkubmFtZSkgfHwgXCJcIik7XHJcbn1cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBjc3MgaW1hZ2UgY2xhc3MgYnkgdGhlIGNhdGVnb3J5IElELlxyXG4gKiBAcGFyYW0gY2F0ZWdvcnlPcklkIENhdGVnb3J5IG9yIGNhdGVnb3J5IElELlxyXG4gKiBAcmV0dXJucyBDYXRlZ29yeSBpbWFnZWUgY2xhc3MuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRDYXRlZ29yeUltYWdlQ2xhc3MoY2F0ZWdvcnlPcklkKSB7XHJcbiAgbGV0IGNhdGVnb3J5SWQgPSB0eXBlb2YgY2F0ZWdvcnlPcklkID09PSBcInN0cmluZ1wiID8gY2F0ZWdvcnlPcklkIDogY2F0ZWdvcnlPcklkICYmIGNhdGVnb3J5T3JJZC5pZDtcclxuICBsZXQgaW1hZ2VDbGFzcyA9IFwiZXNyaTRHRURhdGFDYXRlZ29yeUltYWdlXCI7XHJcbiAgaWYgKGNhdGVnb3J5SWQpIHtcclxuICAgIGNhdGVnb3J5SWQgPSBjYXRlZ29yeUlkLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvKFxcc3xffFxcZHxcXCh8XFwpKS9nLCBcIlwiKTtcclxuICAgIGNhdGVnb3J5SWQgPSBjYXRlZ29yeUlkLnNwbGl0KC9cXFcrLylbMF07XHJcbiAgICBpZiAoY2F0ZWdvcnlJZCkge1xyXG4gICAgICBpbWFnZUNsYXNzICs9IFwiIGVzcmk0R0VEYXRhQ2F0ZWdvcnlJbWFnZV9cIiArIGNhdGVnb3J5SWQ7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBpbWFnZUNsYXNzO1xyXG59XG5cbmxldCBCcmVhZGNydW1iID0gY2xhc3MgQnJlYWRjcnVtYiBleHRlbmRzIFRlbXBsYXRlZFdpZGdldCB7XHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vXHJcbiAgLy8gSW5pdGlhbGl6YXRpb25cclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICBjb25zdHJ1Y3RvcihwYXJhbXMsIHJlZk5vZGUsIHBvc2l0aW9uKSB7XHJcbiAgICBzdXBlcihwYXJhbXMsIHJlZk5vZGUsIHBvc2l0aW9uKTtcclxuICAgIHRoaXMuX3RlbXBsYXRlU3RyaW5nID0gYFxyXG4gIDxkaXYgY2xhc3M9XCJCcmVhZGNydW1iIEJyZWFkY3J1bWJIZWlnaHRcIj5cclxuICAgIDxkaXYgY2xhc3M9XCJCcmVhZGNydW1iX0xpbmVcIiBkYXRhLWF0dGFjaC1wb2ludD1cIl9jb25uZWN0XCIgc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiPjwvZGl2PlxyXG4gICAgPGRpdiBjbGFzcz1cIkJyZWFkY3J1bWJfTGluZSBCcmVhZGNydW1iX0FuaW1hdGVkQ29ubmVjdFwiIGRhdGEtYXR0YWNoLXBvaW50PVwiX2FuaW1hdGVkQ29ubmVjdFwiIHN0eWxlPVwiZGlzcGxheTogbm9uZTtcIj48L2Rpdj5cclxuICAgIDxkaXYgY2xhc3M9XCJCcmVhZGNydW1iX0FsbENhdGVnb3JpZXMgZXNyaTRHRURhdGFDYXRlZ29yeUltYWdlX0FsbENhdGVnb3JpZXNcIiBkYXRhLWF0dGFjaC1wb2ludD1cIl9hbGxDYXRlZ29yaWVzRGl2XCI+Jm5ic3A7PC9kaXY+XHJcbiAgICA8ZGl2IGRhdGEtYXR0YWNoLXBvaW50PVwiX2RjSWNvblwiIHN0eWxlPVwiZGlzcGxheTogbm9uZTtcIj48L2Rpdj5cclxuICAgIDxkaXYgY2xhc3M9XCJCcmVhZGNydW1iX1ZhcmlhYmxlcyBEYXRhQ29sbGVjdGlvbkJ1dHRvbiBlc3JpR0VUcmltV2l0aEVsbGlwc2VzXCIgZGF0YS1hdHRhY2gtcG9pbnQ9XCJfdmFyc05vZGVcIiBzdHlsZT1cImRpc3BsYXk6IG5vbmU7XCI+PC9kaXY+XHJcbiAgPC9kaXY+YDtcclxuICAgIHRoaXMuX2NhdGVnb3J5Q2xpY2tBbGxvd2VkID0gZmFsc2U7XHJcbiAgICB0aGlzLl9hbmltYXRpb25SYXRlID0gNzAwOyAvLyA3MDAgcGl4ZWxzIHBlciBzZWNvbmRcclxuICB9XHJcbiAgcG9zdENyZWF0ZSgpIHtcclxuICAgIG9uKHRoaXMuX2FsbENhdGVnb3JpZXNEaXYsIFwiY2xpY2tcIiwgdGhpcy5fb25DYXRlZ29yaWVzQ2xpY2suYmluZCh0aGlzKSk7XHJcbiAgICBvbih0aGlzLl9kY0ljb24sIFwiY2xpY2tcIiwgdGhpcy5fb25EQ3NDbGljay5iaW5kKHRoaXMpKTtcclxuICB9XHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vIFNlbGVjdFxyXG4gIC8vXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICBzZWxlY3RDYXRlZ29yeShjYXRlZ29yeU9yUHJvbWlzZSkge1xyXG4gICAgaWYgKCF0aGlzLl9sYXN0RGF0YUNvbGxlY3Rpb24pIHtcclxuICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHRoaXMuX3VwZGF0ZURhdGFDb2xsZWN0aW9uKCk7XHJcbiAgICB9XHJcbiAgICBpZiAoY2F0ZWdvcnlPclByb21pc2UpIHtcclxuICAgICAgdGhpcy5fc2VsZWN0Q2F0ZWdvcnkoY2F0ZWdvcnlPclByb21pc2UsIHRoaXMuX3VwZGF0ZUNhdGVnb3J5LmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG4gIH1cclxuICBzZWxlY3REYXRhQ29sbGVjdGlvbihkYXRhQ29sbGVjdGlvbk9yUHJvbWlzZSwgY2F0ZWdvcnlPclByb21pc2UpIHtcclxuICAgIGlmICghY2F0ZWdvcnlPclByb21pc2UpIHtcclxuICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHRoaXMuX3VwZGF0ZUNvbm5lY3Rpb25MaW5lKFwiQnJlYWRjcnVtYl9Db25uZWN0XCIpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fc2VsZWN0Q2F0ZWdvcnkoY2F0ZWdvcnlPclByb21pc2UsIChjYXRlZ29yeSkgPT4ge1xyXG4gICAgICB0aGlzLl91cGRhdGVDYXRlZ29yeShjYXRlZ29yeSwgdHJ1ZSk7XHJcbiAgICAgIHdoZW4oZGF0YUNvbGxlY3Rpb25PclByb21pc2UpLnRoZW4odGhpcy5fdXBkYXRlRGF0YUNvbGxlY3Rpb24uYmluZCh0aGlzKSk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgX3NlbGVjdENhdGVnb3J5KGNhdGVnb3J5T3JQcm9taXNlLCBjYWxsYmFjaykge1xyXG4gICAgd2hlbihjYXRlZ29yeU9yUHJvbWlzZSkudGhlbigoY2F0ZWdvcnkpID0+IHtcclxuICAgICAgd2hlbih0aGlzLmZseUFuaW0uZ2V0UHJvbWlzZSgpKS50aGVuKCgpID0+IHtcclxuICAgICAgICBjYWxsYmFjayhjYXRlZ29yeSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGNsZWFyU2VsZWN0aW9uKCkge1xyXG4gICAgdGhpcy5fdXBkYXRlQ2F0ZWdvcnkoKTtcclxuICAgIHRoaXMuX3VwZGF0ZURhdGFDb2xsZWN0aW9uKCk7XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyBVcGRhdGUgY2F0ZWdvcnlcclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgX3VwZGF0ZUNhdGVnb3J5KGNhdGVnb3J5LCBjbGlja2FibGUgPSBmYWxzZSkge1xyXG4gICAgdGhpcy5fY2F0ZWdvcnlDbGlja0FsbG93ZWQgPSBjbGlja2FibGU7XHJcbiAgICB0aGlzLl9sYXN0Q2F0ZWdvcnkgPSBjYXRlZ29yeTtcclxuICAgIGlmIChjYXRlZ29yeSkge1xyXG4gICAgICB0aGlzLl9kY0ljb24uY2xhc3NOYW1lID0gXCJCcmVhZGNydW1iX0RhdGFDb2xsZWN0aW9uc1wiO1xyXG4gICAgICB0aGlzLl91cGRhdGVDYXRlZ29yeUljb24odGhpcy5fZGNJY29uLCBjYXRlZ29yeSk7XHJcbiAgICAgIHRvZ2dsZUNsYXNzKHRoaXMuX2RjSWNvbiwgXCJlc3JpR0VDbGlja2FibGVcIiwgY2xpY2thYmxlKTtcclxuICAgICAgaWYgKCFjbGlja2FibGUpIHtcclxuICAgICAgICB0aGlzLl91cGRhdGVDb25uZWN0aW9uTGluZShcIkJyZWFkY3J1bWJfQ29ubmVjdERDXCIpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLl9kY0ljb24uc3R5bGUuZGlzcGxheSA9IGNhdGVnb3J5ID8gXCJcIiA6IFwibm9uZVwiO1xyXG4gIH1cclxuICBfdXBkYXRlQ2F0ZWdvcnlJY29uKGljb24sIGNhdGVnb3J5KSB7XHJcbiAgICBhZGRDbGFzcyhpY29uLCBnZXRDYXRlZ29yeUltYWdlQ2xhc3MoY2F0ZWdvcnkpKTtcclxuICB9XHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vIFVwZGF0ZSBkYXRhIGNvbGxlY3Rpb25cclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgX3VwZGF0ZURhdGFDb2xsZWN0aW9uKGRhdGFDb2xsZWN0aW9uKSB7XHJcbiAgICB0aGlzLl9sYXN0RGF0YUNvbGxlY3Rpb24gPSBkYXRhQ29sbGVjdGlvbjtcclxuICAgIGlmIChkYXRhQ29sbGVjdGlvbikge1xyXG4gICAgICB0b2dnbGVDbGFzcyh0aGlzLl92YXJzTm9kZSwgXCJCcmVhZGNydW1iX1ZhcmlhYmxlc05vRENcIiwgIXRoaXMuX2xhc3RDYXRlZ29yeSk7XHJcbiAgICAgIHRoaXMuX3ZhcnNOb2RlLmlubmVySFRNTCA9IGRhdGFDb2xsZWN0aW9uLnRpdGxlO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fdmFyc05vZGUuc3R5bGUuZGlzcGxheSA9IGRhdGFDb2xsZWN0aW9uID8gXCJcIiA6IFwibm9uZVwiO1xyXG4gICAgbGV0IGxpbmVDbGFzcztcclxuICAgIGlmICghZGF0YUNvbGxlY3Rpb24pIHtcclxuICAgICAgbGluZUNsYXNzID0gdGhpcy5fbGFzdENhdGVnb3J5ID8gXCJCcmVhZGNydW1iX0Nvbm5lY3RcIiA6IFwiXCI7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgbGluZUNsYXNzID0gdGhpcy5fbGFzdENhdGVnb3J5ID8gXCJCcmVhZGNydW1iX0Nvbm5lY3REQ1ZhcnNcIiA6IFwiQnJlYWRjcnVtYl9Db25uZWN0VmFyc1wiO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fdXBkYXRlQ29ubmVjdGlvbkxpbmUobGluZUNsYXNzKTtcclxuICB9XHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vIFVwZGF0ZSBjb25uZWN0aW9uIGxpbmVcclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgX3VwZGF0ZUNvbm5lY3Rpb25MaW5lKGxpbmVDbGFzcykge1xyXG4gICAgdGhpcy5fc3RvcEFuaW1hdGlvbigpO1xyXG4gICAgaWYgKCFsaW5lQ2xhc3MpIHtcclxuICAgICAgdGhpcy5fY29ubmVjdC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgIHRoaXMuX2FuaW1hdGVkQ29ubmVjdC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgY29uc3Qgbm9BbmltYXRpb24gPSBsaW5lQ2xhc3MgPT09IFwiQnJlYWRjcnVtYl9Db25uZWN0XCI7XHJcbiAgICAgIHJlcGxhY2VDbGFzcyh0aGlzLl9jb25uZWN0LCBsaW5lQ2xhc3MsIFwiQnJlYWRjcnVtYl9Db25uZWN0IEJyZWFkY3J1bWJfQ29ubmVjdERDIEJyZWFkY3J1bWJfQ29ubmVjdERDVmFycyBCcmVhZGNydW1iX0Nvbm5lY3RWYXJzXCIpO1xyXG4gICAgICB0aGlzLl9jb25uZWN0LnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xyXG4gICAgICB0aGlzLl9hbmltYXRlQ29ubmVjdChnZXRDb250ZW50Qm94KHRoaXMuX2Nvbm5lY3QpLCBub0FuaW1hdGlvbik7XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9hbmltYXRlQ29ubmVjdChmaW5hbEJveCwgbm9BbmltYXRpb24gPSBmYWxzZSkge1xyXG4gICAgaWYgKG5vQW5pbWF0aW9uKSB7XHJcbiAgICAgIHNldFN0eWxlKHRoaXMuX2FuaW1hdGVkQ29ubmVjdCwgeyB3aWR0aDogZmluYWxCb3gudyArIFwicHhcIiwgaGVpZ2h0OiBmaW5hbEJveC5oICsgXCJweFwiIH0pO1xyXG4gICAgICB0aGlzLl9hbmltYXRlZENvbm5lY3Quc3R5bGUuZGlzcGxheSA9IFwiXCI7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGxldCBjdXJyZW50Qm94O1xyXG4gICAgaWYgKCF0aGlzLl9hbmltYXRlZENvbm5lY3Quc3R5bGUuZGlzcGxheSkge1xyXG4gICAgICBjdXJyZW50Qm94ID0gZ2V0Q29udGVudEJveCh0aGlzLl9hbmltYXRlZENvbm5lY3QpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIGN1cnJlbnRCb3ggPSB7IHc6IDAsIGg6IDAgfTtcclxuICAgICAgc2V0U3R5bGUodGhpcy5fYW5pbWF0ZWRDb25uZWN0LCB7IHdpZHRoOiBcIjBcIiwgaGVpZ2h0OiBcIjBcIiB9KTtcclxuICAgICAgdGhpcy5fYW5pbWF0ZWRDb25uZWN0LnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fZG9BbmltYXRpb24oY3VycmVudEJveCwgZmluYWxCb3gpO1xyXG4gIH1cclxuICBfZG9BbmltYXRpb24oZnJvbUJveCwgdG9Cb3gpIHtcclxuICAgIHRoaXMuX2FuaW1hdGlvbiA9IGFuaW1hdGVQcm9wZXJ0eSh7XHJcbiAgICAgIG9iajogdGhpcy5fYW5pbWF0ZWRDb25uZWN0LnN0eWxlLFxyXG4gICAgICBkdXJhdGlvbjogKCh0b0JveC53IC0gZnJvbUJveC53KSAvIHRoaXMuX2FuaW1hdGlvblJhdGUpICogMTAwMCxcclxuICAgICAgcHJvcGVydGllczogeyB3aWR0aDogeyBzdGFydDogZnJvbUJveC53LCBlbmQ6IHRvQm94LncsIHVuaXRzOiBcInB4XCIgfSB9LFxyXG4gICAgICBvbkVuZDogKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2FuaW1hdGlvbiA9IGFuaW1hdGVQcm9wZXJ0eSh7XHJcbiAgICAgICAgICBvYmo6IHRoaXMuX2FuaW1hdGVkQ29ubmVjdC5zdHlsZSxcclxuICAgICAgICAgIGR1cmF0aW9uOiAoKHRvQm94LmggLSBmcm9tQm94LmgpIC8gdGhpcy5fYW5pbWF0aW9uUmF0ZSkgKiAxMDAwLFxyXG4gICAgICAgICAgcHJvcGVydGllczogeyBoZWlnaHQ6IHsgc3RhcnQ6IGZyb21Cb3guaCwgZW5kOiB0b0JveC5oLCB1bml0czogXCJweFwiIH0gfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbiAgX3N0b3BBbmltYXRpb24oKSB7XHJcbiAgICB0aGlzLl9hbmltYXRpb24gJiYgdGhpcy5fYW5pbWF0aW9uLmNhbmNlbCgpO1xyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vXHJcbiAgLy8gQ2xpY2sgaGFuZGxlcnNcclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgX29uQ2F0ZWdvcmllc0NsaWNrKCkge1xyXG4gICAgdGhpcy5vbkNhdGVnb3JpZXNDbGljaygpO1xyXG4gIH1cclxuICBvbkNhdGVnb3JpZXNDbGljaygpIHsgfVxyXG4gIF9vbkRDc0NsaWNrKCkge1xyXG4gICAgaWYgKHRoaXMuX2NhdGVnb3J5Q2xpY2tBbGxvd2VkKSB7XHJcbiAgICAgIHRoaXMub25EQ3NDbGljaygpO1xyXG4gICAgfVxyXG4gIH1cclxuICBvbkRDc0NsaWNrKCkgeyB9XHJcbn07XHJcbl9fZGVjb3JhdGUoW1xyXG4gIHkkcigpXHJcbl0sIEJyZWFkY3J1bWIucHJvdG90eXBlLCBcImZseUFuaW1cIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKClcclxuXSwgQnJlYWRjcnVtYi5wcm90b3R5cGUsIFwib25DYXRlZ29yaWVzQ2xpY2tcIiwgbnVsbCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gIHkkcigpXHJcbl0sIEJyZWFkY3J1bWIucHJvdG90eXBlLCBcIm9uRENzQ2xpY2tcIiwgbnVsbCk7XHJcbkJyZWFkY3J1bWIgPSBfX2RlY29yYXRlKFtcclxuICBpJFgoKVxyXG5dLCBCcmVhZGNydW1iKTtcblxubGV0IFBhZ2luYXRpb24gPSBjbGFzcyBQYWdpbmF0aW9uIGV4dGVuZHMgVGVtcGxhdGVkV2lkZ2V0IHtcclxuICBjb25zdHJ1Y3RvcihwYXJhbXMsIHJlZk5vZGUsIHBvc2l0aW9uKSB7XHJcbiAgICBzdXBlcihwYXJhbXMsIHJlZk5vZGUsIHBvc2l0aW9uKTtcclxuICAgIHRoaXMuX3RlbXBsYXRlU3RyaW5nID0gYFxyXG4gIDxkaXYgY2xhc3M9XCJlc3JpNEdFUGFnaW5hdGlvblwiPlxyXG4gICAgPGRpdiBjbGFzcz1cImVzcmk0R0VQYWdpbmF0aW9uX1BhZ2VBbmRBcnJvd3NcIj5cclxuICAgIDxkaXYgY2xhc3M9XCJlc3JpNEdFUGFnaW5hdGlvbl9JdGVtc1wiPlxyXG4gICAgICA8ZGl2IGRhdGEtYXR0YWNoLXBvaW50PVwiX2l0ZW1zTm9kZVwiIGNsYXNzPVwiZXNyaTRHRVBhZ2luYXRpb25JdGVtc05vZGVcIj48L2Rpdj48L2Rpdj5cclxuICAgICAgPGRpdiBkYXRhLWF0dGFjaC1wb2ludD1cIl9iYWNrTm9kZVwiIGNsYXNzPVwiZXNyaTRHRVBhZ2luYXRpb25fVHJpYW5nbGUgZXNyaTRHRVBhZ2luYXRpb25fVHJpYW5nbGVCYWNrXCIgc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiPjwvZGl2PlxyXG4gICAgICA8ZGl2IGRhdGEtYXR0YWNoLXBvaW50PVwiX2ZvcndhcmROb2RlXCIgY2xhc3M9XCJlc3JpNEdFUGFnaW5hdGlvbl9UcmlhbmdsZSBlc3JpNEdFUGFnaW5hdGlvbl9UcmlhbmdsZUZvcndhcmRcIiBzdHlsZT1cImRpc3BsYXk6IG5vbmU7XCI+PC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICAgIDxkaXYgZGF0YS1hdHRhY2gtcG9pbnQ9XCJfYnVsbGV0c05vZGVcIiBjbGFzcz1cImVzcmk0R0VQYWdpbmF0aW9uX0J1bGxldHNcIj48L2Rpdj5cclxuICA8L2Rpdj5gO1xyXG4gICAgLy8gcHJvcGVydGllc1xyXG4gICAgLy8gYXV0b0NlbnRlcjogQm9vbGVhbiB8IFwid2lkdGhcIiB8IFwiaGVpZ2h0XCIgfCBcInN0cmV0Y2g6dyxoXCIgfCBcInN0cmV0Y2gtd2lkdGg6d1wiIHwgc3RyZXRjaC1oZWlnaHQ6aFwiXHJcbiAgICAvLyAgICAgIFNwZWNpZmllcyBob3cgdG8gcGxhY2UgcGFnaW5hdGlvbiBpdGVtcyB3aXRoaW4gdGhlIHBhZ2luYXRpb24gYXJlYTpcclxuICAgIC8vICAgICAgRmFsc2UgdmFsdWUgbWVhbnMgcGxhY2luZyBpdGVtcyBhcyBpcy5cclxuICAgIC8vICAgICAgVHJ1ZSB2YWx1ZSBtZWFucyBhdXRvIGNlbnRlcmluZyB0aGUgcGFnaW5hdGlvbiBwYW5lbCB3aXRoIGl0ZW1zIGluIHRoZSB3aWR0aCBhbmQgaGVpZ2h0LlxyXG4gICAgLy8gICAgICBcIndpZHRoXCIgdmFsdWUgbWVhbnMgYXV0byBjZW50ZXJpbmcgaW4gdGhlIHdpZHRoIG9ubHkuXHJcbiAgICAvLyAgICAgIFwiaGVpZ2h0XCIgdmFsdWUgbWVhbnMgYXV0byBjZW50ZXJpbmcgaW4gdGhlIGhlaWdodCBvbmx5LlxyXG4gICAgLy8gICAgICBcInN0cmV0Y2hcIiB2YWx1ZSBtZWFucyBhdXRvIHN0cmV0Y2hpbmcgdGhlIHBhZ2luYXRpb24gY29udGVudCBpbiB0aGUgd2lkdGggYW5kIGhlaWdodC5cclxuICAgIC8vICAgICAgICAgIE9wdGlvbmFsIHBvc2l0aXZlIG51bWJlcnMgYWZ0ZXIgXCI6XCIgc3BlY2lmeSB0aGUgY29uc3RyYWludHMgb24gdGhlIG51bWJlciBvZiBpdGVtcyBpbiB3aWR0aCBhbmQgaGVpZ2h0LlxyXG4gICAgLy8gICAgICAgICAgRm9yIGV4YW1wbGUsIFwic3RyZXRjaDo0LDJcIiBtZWFucyBzdHJldGNoIHRoZSBwYWdpbmF0aW9uIGluIG5vdCBtb3JlIHRoYW4gNCBjb2x1bW5zXHJcbiAgICAvLyAgICAgICAgICBhbmQgMiByb3dzLiBBbnkgb3RoZXIgdmFsdWUgbWVhbnMgbm8gY29uc3RyYWludCBpbiB0aGlzIGRpcmVjdGlvbixcclxuICAgIC8vICAgICAgICAgIGUuZy4sIFwic3RyZXRjaFwiIGlzIGVxdWl2YWxlbnQgdG8gXCJzdHJldGNoOiosKlwiLlxyXG4gICAgLy8gICAgICBcInN0cmV0Y2gtd2lkdGhcIiB2YWx1ZSBtZWFucyBhdXRvIHN0cmV0Y2hpbmcgaW4gdGhlIHdpZHRoIG9ubHkgYW5kIGFuIG9wdGlvbmFsIHBvc2l0aXZlIG51bWJlclxyXG4gICAgLy8gICAgICAgICAgbWVhbnMgdGhlIGNvbnN0cmFpbnQgb24gdGhlIG51bWJlciBvZiBpdGVtcy5cclxuICAgIC8vICAgICAgXCJzdHJldGNoLWhlaWdodFwiIHZhbHVlIGF1dG8gc3RyZXRjaGluZyBpbiB0aGUgaGVpZ2h0IG9ubHkgYW5kIGFuIG9wdGlvbmFsIHBvc2l0aXZlIG51bWJlclxyXG4gICAgLy8gICAgICAgICAgbWVhbnMgdGhlIGNvbnN0cmFpbnQgb24gdGhlIG51bWJlciBvZiBpdGVtcy5cclxuICAgIC8vICAgICAgQW55IG90aGVyIG5vbmVtcHR5IHN0cmluZyB2YWx1ZSBpcyBlcXVpdmFsZW50IHRvIHRydWUuXHJcbiAgICAvL1xyXG4gICAgLy8gICAgICBJZiB0aGUgcGFnaW5hdGlvbiBpcyBjZW50ZXJlZCBvciBzdHJldGNoZWQgaW4gd2lkdGgsIGl0cyBjb250ZW50IGlzIGNlbnRlcmVkIGluIHRoZSBjYXNlIG9mIGEgc2luZ2xlIHBhZ2VcclxuICAgIC8vICAgICAgY29udGFpbmluZyBhIHNpbmdsZSByb3cuIFRvIGF2b2lkIGNvbnRlbnQgY2VudGVyaW5nLCBhZGQgdGhlIHByZWZpeCAnJCcgdG8gdGhlIGF1dG9DZW50ZXIgb3B0aW9uLFxyXG4gICAgLy8gICAgICBlLmcuIFwiJFwiIHZhbHVlIG9mIGF1dG9DZW50ZXIgb3B0aW9uIGlzIGVxdWl2YWxlbnQgdG8gYXV0by1jZW50ZXJpbmcgaW4gYm90aCBkaXJlY3Rpb25zIGJ1dCB3aXRob3V0IHNpbmdsZSByb3cgY2VudGVyaW5nLlxyXG4gICAgLy8gICAgICBPdGhlciBleGFtcGxlczogXCIkc3RyZXRjaC13aWR0aFwiLCBcIiRzdHJldGNoOjQsMlwiLlxyXG4gICAgLy9cclxuICAgIC8vICAgICAgSWYgdGhlIHBhZ2luYXRpb24gaXMgY2VudGVyZWQgb3Igc3RyZXRjaGVkIGluIGhlaWdodCwgY29udGFpbnMgdGhlIHNpbmdsZSBwYWdlIG9ubHkgYW5kIHRoZSBudW1iZXIgb2Ygcm93c1xyXG4gICAgLy8gICAgICBpcyBsZXNzIHRoYW4gdGhlIGF2YWlsYWJsZSBjYXBhY2l0eSwgdGhlIHJvd3MgY2FuIGJlIHZlcnRpY2FsbHkgY2VudGVyZWQgdXNpbmcgdGhlIHByZWZpeCBcIkBcIi5cclxuICAgIC8vXHJcbiAgICAvLyAgICAgIEJvdGggXCIkXCIgYW5kIFwiQFwiIHByZWZpeGVzIGNhbiBiZSBhZGRlZCBpbiBhbnkgb3JkZXIuXHJcbiAgICB0aGlzLmF1dG9DZW50ZXIgPSBmYWxzZTtcclxuICAgIC8vIHNjcm9sbEFuaW1hdGlvbjogQm9vbGVhbiB8IFwiZmFkZTFcIiB8IFwiZmFkZTJcIiB8IFwic2xpZGVcIlxyXG4gICAgLy8gICAgICBTcGVjaWZpZXMgaG93IHRvIGFuaW1hdGUgcGFnZSBjaGFuZ2VzIGJ5IGNsaWNrIG9uIGEgcGFnZSBidWxsZXQuXHJcbiAgICAvLyAgICAgICAgICBUaGUgZmFsc2UgdmFsdWUgbWVhbnMgbm8gYW5pbWF0aW9uLlxyXG4gICAgLy8gICAgICAgICAgVGhlIHRydWUgKGRlZmF1bHQpIHZhbHVlIG1lYW5zIHJlcGxhY2luZyB0aGUgcGFnZSB3aXRoIGZhZGVvdXQgYW5pbWF0aW9uLlxyXG4gICAgLy8gICAgICAgICAgVGhlIFwiZmFkZTFcIiB2YWx1ZSBtZWFucyAxLXN0ZXAgZmFkZSBhbmltYXRpb24uXHJcbiAgICAvLyAgICAgICAgICBUaGUgXCJmYWRlMlwiIHZhbHVlIG1lYW5zIDItc3RlcCBmYWRlIGFuaW1hdGlvbi5cclxuICAgIC8vICAgICAgICAgIFRoZSBcInNsaWRlXCIgdmFsdWUgbWVhbnMgMS1zdGVwIGFuaW1hdGlvbiB3aXRoIHNsaWRpbmcgdGhlIG9sZCBjb250ZW50IHdpdGggdGhlIG5ldyBvbmUuXHJcbiAgICB0aGlzLnNjcm9sbEFuaW1hdGlvbiA9IHRydWU7XHJcbiAgICAvLyBjeWNsaWNQYWdpbmF0aW9uOiBCb29sZWFuXHJcbiAgICAvLyAgICAgIEFsbG93cyBtYWtlIGEgY3ljbGljIHBhZ2luYXRpb24gd2hlbiBjbGljayBvbiBwYWdpbmF0aW9uIGFycm93cy5cclxuICAgIC8vICAgICAgVGhlIGZhbHNlIChkZWZhdWx0KSB2YWx1ZSBtZWFucyBubyBjeWNsaWMgcGFnaW5hdGlvbi5cclxuICAgIC8vICAgICAgVGhlIHRydWUgdmFsdWUgbWVhbnMgdGhhdCB0aGUgZmlyc3QgYW5kIHRoZSBsYXN0IHBhZ2VzIG9mIHRoZSBwYWdpbmF0aW9uIGFyZSBuZWlnaGJvcnMuXHJcbiAgICAvLyAgICAgIENsaWNrIG9uIHRoZSBhcnJvdyBCYWNrIGF0IHRoZSBmaXJzdCBwYWdlIHdpbGwgc2hvdyB0aGUgbGFzdCBwYWdlIGFuZCBjbGljayBvblxyXG4gICAgLy8gICAgICB0aGUgYXJyb3cgTmV4dCBhdCB0aGUgbGFzdCBwYWdlIHdpbGwgc2hvdyB0aGUgZmlyc3QgcGFnZS5cclxuICAgIHRoaXMuY3ljbGljUGFnaW5hdGlvbiA9IGZhbHNlO1xyXG4gICAgLy8gYWx3YXlTaG93QXJyb3dzOiBCb29sZWFuXHJcbiAgICAvLyAgICAgIFRoZSB0cnVlIHZhbHVlIG1lYW5zIHRoYXQgcGFnaW5hdGlvbiBhcnJvd3MgYXJlIGFsd2F5cyBzaG93bi5cclxuICAgIC8vICAgICAgVGhlIGZhbHNlIChkZWZhdWx0KSB2YWx1ZSBtZWFucyB0aGF0IHBhZ2luYXRpb24gYXJyb3dzIHdpbGwgYmUgc2hvd24gaWYgbW9yZSB0aGFuIG9uZSBwYWdlIGlzIGF2YWlsYWJsZS5cclxuICAgIHRoaXMuYWx3YXlzU2hvd0Fycm93cyA9IGZhbHNlO1xyXG4gICAgLy8gaW50ZXJuYWwgbWVtYmVyc1xyXG4gICAgdGhpcy5fcGFnZUNvdW50ID0gMDtcclxuICAgIHRoaXMuX3BhZ2VTaXplID0gMDtcclxuICB9XHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vXHJcbiAgLy8gR2V0dGVycyAmIHNldHRlcnNcclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICBzZXQgaXRlbXMoaXRlbXMpIHtcclxuICAgIHRoaXMuX3NldEl0ZW1zKGl0ZW1zKTtcclxuICB9XHJcbiAgc2V0IGN1cnJlbnRQYWdlKHZhbHVlKSB7XHJcbiAgICB0aGlzLnNldEN1cnJlbnRQYWdlKHZhbHVlLCBmYWxzZSk7XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vIEluaXRpYWxpemF0aW9uXHJcbiAgLy9cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgcG9zdENyZWF0ZSgpIHtcclxuICAgIHRoaXMuX2FuaW1hdGlvbiA9IG5ldyBBbmltYXRpb25IZWxwZXIoKTtcclxuICAgIG9uKHRoaXMuX2JhY2tOb2RlLCBcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5zZXRDdXJyZW50UGFnZShcInByZXZcIiwgZmFsc2UpO1xyXG4gICAgfSk7XHJcbiAgICBvbih0aGlzLl9mb3J3YXJkTm9kZSwgXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuc2V0Q3VycmVudFBhZ2UoXCJuZXh0XCIsIGZhbHNlKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vIEJpbmRhYmxlIGZ1bmN0aW9uc1xyXG4gIC8vXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLyoqXHJcbiAgICogU2hvdWxkIGNyZWF0ZSBhIGRvbSBub2RlIGNvbnRhaW5lciBmb3IgYW4gaXRlbSB3aXRoIGFscmVhZHkgY29ycmVjdCBzaXplLlxyXG4gICAqIFRoaXMgbXVzdCBiZSBhbiBpbmxpbmUtYmxvY2sgbm9kZS4gSW4gdGhlIGNhc2Ugb2Ygc3RyZXRjaCBwYWdpbmF0aW9uIGl0cyBtYXJnaW5zIGFyZSBpZ25vcmVkLlxyXG4gICAqL1xyXG4gIGNyZWF0ZUl0ZW1Db250YWluZXIoKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgaW1wbGVtZW50ZWRcIik7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFNob3VsZCB1cGRhdGUgYSBkb20gbm9kZSBjb250YWluZXIgd2l0aCB0aGUgZ2l2ZW4gaXRlbS5cclxuICAgKi9cclxuICB1cGRhdGVJdGVtQ29udGFpbmVyKF9ub2RlLCBfaXRlbSkgeyB9XHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyBMYXlvdXRcclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8qKlxyXG4gICAqIEhhcyB0byBiZSBjYWxsZWQgYWZ0ZXIgaXRlbXMgaGF2ZSBiZWVuIHNldCB0byBpbml0aWFsaXplIGxheW91dC5cclxuICAgKi9cclxuICByZXNpemUobmF2aWdhdGVUb1BhZ2VJbmRleCkge1xyXG4gICAgbGV0IG5vZGU7XHJcbiAgICBsZXQgcm93Q291bnQ7XHJcbiAgICBsZXQgbGluZUhlaWdodDtcclxuICAgIGxldCBtYXJnaW5FeHRlbnRzO1xyXG4gICAgbGV0IGNvbHVtbkNvdW50O1xyXG4gICAgbGV0IG1hcmdpbjtcclxuICAgIGxldCBtYXJnaW5Cb3g7XHJcbiAgICB0aGlzLl9hbmltYXRpb24uZmluaXNoKCk7XHJcbiAgICBjb25zdCBpdGVtcyA9IHRoaXMuaXRlbXM7XHJcbiAgICBpZiAoIWl0ZW1zIHx8ICFpdGVtcy5sZW5ndGgpIHtcclxuICAgICAgdGhpcy5pdGVtcyA9IFtdOyAvLyBDbGVhbiB1cCB0aGUgbGF5b3V0XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IGl0ZW1zUGFuZSA9IHRoaXMuX2l0ZW1zTm9kZS5wYXJlbnROb2RlO1xyXG4gICAgLy8gSWdub3JlIHBhZ2luYXRpb24gb24gaW52aXNpYmxlIHBhbmVcclxuICAgIGlmICghaXRlbXNQYW5lIHx8ICFpdGVtc1BhbmUuY2xpZW50SGVpZ2h0KSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IGF1dG9DZW50ZXIgPSB0aGlzLl9wYXJzZUF1dG9DZW50ZXJPcHRpb24odGhpcy5hdXRvQ2VudGVyKTtcclxuICAgIGlmIChhdXRvQ2VudGVyLnR5cGUpIHtcclxuICAgICAgLy8gUmVtb3ZlIHBhZGRpbmdzIGJlZm9yZSBjYWxjdWxhdGlvblxyXG4gICAgICBzZXRTdHlsZShpdGVtc1BhbmUsIFwicGFkZGluZ1wiLCBcIjBweFwiKTtcclxuICAgIH1cclxuICAgIGxldCBpdGVtc05vZGUgPSB0aGlzLl9pdGVtc05vZGUuZmlyc3RDaGlsZDtcclxuICAgIGlmICghaXRlbXNOb2RlKSB7XHJcbiAgICAgIGl0ZW1zTm9kZSA9IGNyZWF0ZShcImRpdlwiLCBudWxsLCB0aGlzLl9pdGVtc05vZGUpO1xyXG4gICAgICBhZGRDbGFzcyhpdGVtc05vZGUsIFwiZXNyaTRHRVBhZ2luYXRpb25JdGVtc05vZGVDaGlsZERpdlwiKTtcclxuICAgIH1cclxuICAgIC8vIE5vdyB3ZSBjYWxjdWxhdGUgdGhlIHBhZ2Ugc2l6ZSBhbmQgcGFnZSBjb3VudC5cclxuICAgIC8vIEluIHRoZSBjYXNlIG9mIHN0cmV0Y2ggd2UgYXQgZmlyc3QgdmFuaXNoIG1hcmdpbnMgb2YgYWxsIGl0ZW1zXHJcbiAgICBpZiAoYXV0b0NlbnRlci50eXBlID09PSBcInN0cmV0Y2hcIikge1xyXG4gICAgICB0aGlzLl9pdGVtTWFyZ2lucyA9IHt9O1xyXG4gICAgICB0aGlzLl9lbXB0eU5vZGUoaXRlbXNOb2RlKTsgLy8gU2hvdWxkIGNsZWFyIHRoZSBjb250ZW50IGluIHRoaXMgY2FzZSwgYmVjYXVzZSBpdHMgaXRlbSBtYXJnaW5zIGFyZSBhbHJlYWR5IGNvcnJlY3RlZFxyXG4gICAgfVxyXG4gICAgLy8gSW4gdGhlIGNhc2Ugb2YgYXV0b0NlbnRlciB3ZSBwb3B1bGF0ZSBpdGVtcyBub2RlIHdpdGggdGhlIG1heGltdW0gcG9zc2libGUgbnVtYmVyIG9mXHJcbiAgICAvLyBub2RlcyB0byBpbnNwZWN0IGl0cyBjYXBhY2l0eS5cclxuICAgIGZ1bmN0aW9uIG5lZWRTY3JvbGwoKSB7XHJcbiAgICAgIHJldHVybiBpdGVtc1BhbmUuc2Nyb2xsSGVpZ2h0IC0gMiA+IGl0ZW1zUGFuZS5jbGllbnRIZWlnaHQ7XHJcbiAgICB9XHJcbiAgICBjb25zdCBjaGlsZE5vZGVzID0gaXRlbXNOb2RlLmNoaWxkcmVuO1xyXG4gICAgd2hpbGUgKCFuZWVkU2Nyb2xsKCkgJiYgKGF1dG9DZW50ZXIudHlwZSB8fCBjaGlsZE5vZGVzLmxlbmd0aCA8IGl0ZW1zLmxlbmd0aCkpIHtcclxuICAgICAgbm9kZSA9IHRoaXMuY3JlYXRlSXRlbUNvbnRhaW5lcigpO1xyXG4gICAgICBvbihub2RlLCBcImNsaWNrXCIsIHRoaXMuX29uSXRlbUNsaWNrLmJpbmQodGhpcywgbm9kZSkpO1xyXG4gICAgICBpdGVtc05vZGUuYXBwZW5kQ2hpbGQobm9kZSk7XHJcbiAgICB9XHJcbiAgICAvLyBOb3cgd2UgcmVtb3ZlIG5vZGVzIHdoaWNoIGxlYWQgdG8gc2Nyb2xsaW5nLiBUaGVyZSBtYXkgYmUgbW9yZSB0aGFuIG9uZSBzdWNoIG5vZGVcclxuICAgIC8vIGlmIHBhZ2luYXRpb24gd2lkdGggd2FzIHJlZHVjZWQuXHJcbiAgICB3aGlsZSAobmVlZFNjcm9sbCgpICYmIGNoaWxkTm9kZXMubGVuZ3RoID4gMSkge1xyXG4gICAgICB0aGlzLl9kZXN0cm95Tm9kZShpdGVtc05vZGUubGFzdENoaWxkKTtcclxuICAgIH1cclxuICAgIGxldCBlbXB0eVdpZHRoLCBlbXB0eUhlaWdodDtcclxuICAgIC8vIE5vdyB3ZSBjYWxjdWxhdGUgdGhlIG51bWJlciBvZiByb3dzIGFuZCBjb2x1bW5zIGZvciB0aGUgY2FzZSBvZiBhdXRvQ2VudGVyXHJcbiAgICAvLyBhbmQgY2FsY3VsYXRlIHRoZSBlbXB0eSBzcGFjZXMgaW4gd2lkdGggYW5kIGhlaWdodFxyXG4gICAgbGV0IGNhcGFjaXR5ID0gY2hpbGROb2Rlcy5sZW5ndGg7XHJcbiAgICBpZiAoYXV0b0NlbnRlci50eXBlKSB7XHJcbiAgICAgIG5vZGUgPSBpdGVtc05vZGUuZmlyc3RDaGlsZDtcclxuICAgICAgY29uc3Qgbm9kZVN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZSQxKG5vZGUpO1xyXG4gICAgICBtYXJnaW5Cb3ggPSBnZXRNYXJnaW5Cb3gobm9kZSwgbm9kZVN0eWxlKTtcclxuICAgICAgaWYgKGF1dG9DZW50ZXIudHlwZSA9PT0gXCJzdHJldGNoXCIpIHtcclxuICAgICAgICBtYXJnaW5FeHRlbnRzID0gZ2V0TWFyZ2luRXh0ZW50cyhub2RlLCBub2RlU3R5bGUpO1xyXG4gICAgICB9XHJcbiAgICAgIHJvd0NvdW50ID0gTWF0aC5tYXgoMSwgTWF0aC5mbG9vcihpdGVtc05vZGUuY2xpZW50SGVpZ2h0IC8gbWFyZ2luQm94LmgpKTtcclxuICAgICAgbGluZUhlaWdodCA9IGl0ZW1zTm9kZS5jbGllbnRIZWlnaHQgLyByb3dDb3VudDtcclxuICAgICAgcm93Q291bnQgPSBNYXRoLm1heChNYXRoLmZsb29yKGl0ZW1zUGFuZS5jbGllbnRIZWlnaHQgLyBsaW5lSGVpZ2h0KSwgcm93Q291bnQpO1xyXG4gICAgICBjb2x1bW5Db3VudCA9IE1hdGgubWF4KDEsIGNhcGFjaXR5IC8gcm93Q291bnQpO1xyXG4gICAgICBpZiAoYXV0b0NlbnRlci5oZWlnaHRMaW1pdCAmJiByb3dDb3VudCA+IGF1dG9DZW50ZXIuaGVpZ2h0TGltaXQpIHtcclxuICAgICAgICByb3dDb3VudCA9IGF1dG9DZW50ZXIuaGVpZ2h0TGltaXQ7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGF1dG9DZW50ZXIud2lkdGhMaW1pdCAmJiBjb2x1bW5Db3VudCA+IGF1dG9DZW50ZXIud2lkdGhMaW1pdCkge1xyXG4gICAgICAgIGNvbHVtbkNvdW50ID0gYXV0b0NlbnRlci53aWR0aExpbWl0O1xyXG4gICAgICB9XHJcbiAgICAgIGNhcGFjaXR5ID0gcm93Q291bnQgKiBjb2x1bW5Db3VudDtcclxuICAgICAgbGluZUhlaWdodCA9IG1hcmdpbkJveC5oO1xyXG4gICAgICBlbXB0eVdpZHRoID0gTWF0aC5tYXgoaXRlbXNQYW5lLmNsaWVudFdpZHRoIC0gY29sdW1uQ291bnQgKiBtYXJnaW5Cb3gudywgMCk7XHJcbiAgICAgIGVtcHR5SGVpZ2h0ID0gTWF0aC5tYXgoaXRlbXNQYW5lLmNsaWVudEhlaWdodCAtIHJvd0NvdW50ICogbWFyZ2luQm94LmgsIDApO1xyXG4gICAgfVxyXG4gICAgLy8gQ2FsY3VsYXRlIHBhZ2Ugc2l6ZSBhbmQgY291bnQuIFRoZSBwYWdlIHNpemUgaXMgYWx3YXlzIHBvc2l0aXZlIGhlcmUuXHJcbiAgICBjb25zdCBwYWdlU2l6ZSA9ICh0aGlzLl9wYWdlU2l6ZSA9IE1hdGgubWluKGNhcGFjaXR5LCBpdGVtcy5sZW5ndGgpKTtcclxuICAgIGNvbnN0IHBhZ2VDb3VudCA9ICh0aGlzLl9wYWdlQ291bnQgPSBNYXRoLmNlaWwodGhpcy5pdGVtcy5sZW5ndGggLyBwYWdlU2l6ZSkpO1xyXG4gICAgLy8gQXQgZmlyc3Qgd2UgY2FsY3VsYXRlIHZlcnRpY2FsIG1hcmdpbnMgb2YgaXRlbXMgYW5kIHNldCB2ZXJ0aWNhbCBpdGVtcyBwYW5lIHBhZGRpbmdzXHJcbiAgICBpZiAoYXV0b0NlbnRlci50eXBlICYmIGF1dG9DZW50ZXIuaGVpZ2h0KSB7XHJcbiAgICAgIGlmIChhdXRvQ2VudGVyLnR5cGUgPT09IFwic3RyZXRjaFwiKSB7XHJcbiAgICAgICAgbWFyZ2luID0gTWF0aC5mbG9vcihlbXB0eUhlaWdodCAvIHJvd0NvdW50KTtcclxuICAgICAgICBlbXB0eUhlaWdodCAtPSBtYXJnaW4gKiByb3dDb3VudDtcclxuICAgICAgICB0aGlzLl9pdGVtTWFyZ2lucy5tYXJnaW5Ub3AgPSAoTWF0aC5mbG9vcihtYXJnaW4gLyAyKSArIG1hcmdpbkV4dGVudHMudCkudG9TdHJpbmcoKSArIFwicHhcIjtcclxuICAgICAgICB0aGlzLl9pdGVtTWFyZ2lucy5tYXJnaW5Cb3R0b20gPSAoTWF0aC5jZWlsKG1hcmdpbiAvIDIpICsgbWFyZ2luRXh0ZW50cy5iKS50b1N0cmluZygpICsgXCJweFwiO1xyXG4gICAgICAgIGxpbmVIZWlnaHQgKz0gbWFyZ2luO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChwYWdlQ291bnQgPT09IDEgJiYgYXV0b0NlbnRlci5hbGxvd1ZlcnRpY2FsbHlDZW50ZXIpIHtcclxuICAgICAgICBjb25zdCBwYWdlUm93cyA9IE1hdGguZmxvb3IoKHBhZ2VTaXplIC0gMSkgLyBjb2x1bW5Db3VudCkgKyAxO1xyXG4gICAgICAgIGlmIChwYWdlUm93cyA8IHJvd0NvdW50KSB7XHJcbiAgICAgICAgICBlbXB0eUhlaWdodCArPSBsaW5lSGVpZ2h0ICogKHJvd0NvdW50IC0gcGFnZVJvd3MpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBzZXRTdHlsZShpdGVtc1BhbmUsIHtcclxuICAgICAgICBwYWRkaW5nVG9wOiBNYXRoLmZsb29yKGVtcHR5SGVpZ2h0IC8gMikudG9TdHJpbmcoKSArIFwicHhcIixcclxuICAgICAgICBwYWRkaW5nQm90dG9tOiBcIjBcIlxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIC8vIE5vdyB3ZSBwcmVwYXJlIG5vZGVzIGZvciB0aGUgY3VycmVudCBwYWdlXHJcbiAgICB0aGlzLl9zZXQoXCJjdXJyZW50UGFnZVwiLCB0aGlzLl9jb2VyY2VDdXJyZW50UGFnZSh0eXBlb2YgbmF2aWdhdGVUb1BhZ2VJbmRleCA9PT0gXCJudW1iZXJcIiA/IG5hdmlnYXRlVG9QYWdlSW5kZXggOiB0aGlzLmN1cnJlbnRQYWdlKSk7XHJcbiAgICBsZXQgbm9kZUluZGV4ID0gMDtcclxuICAgIGxldCBpdGVtSW5kZXggPSBwYWdlU2l6ZSAqIHRoaXMuY3VycmVudFBhZ2U7XHJcbiAgICB3aGlsZSAobm9kZUluZGV4IDwgcGFnZVNpemUgJiYgaXRlbUluZGV4IDwgaXRlbXMubGVuZ3RoKSB7XHJcbiAgICAgIG5vZGUgPSBjaGlsZE5vZGVzW25vZGVJbmRleCsrXTtcclxuICAgICAgY29uc3QgaXRlbSA9IGl0ZW1zW2l0ZW1JbmRleCsrXTtcclxuICAgICAgdGhpcy51cGRhdGVJdGVtQ29udGFpbmVyKG5vZGUsIGl0ZW0pO1xyXG4gICAgICB0aGlzLm9uTm9kZVBsYWNlZChub2RlLCBpdGVtKTtcclxuICAgIH1cclxuICAgIC8vIGFuZCByZW1vdmUgc3VwZXJmbHVvdXMgbm9kZXNcclxuICAgIHdoaWxlIChub2RlSW5kZXggPCBjaGlsZE5vZGVzLmxlbmd0aCkge1xyXG4gICAgICB0aGlzLl9kZXN0cm95Tm9kZShpdGVtc05vZGUubGFzdENoaWxkKTtcclxuICAgIH1cclxuICAgIC8vIFRoZW4gd2UgY2FsY3VsYXRlIGhvcml6b250YWwgbWFyZ2lucyBmb3IgaXRlbXMgYW5kIHNldCBob3Jpem9udGFsIGl0ZW1zIHBhbmUgcGFkZGluZ3NcclxuICAgIGlmIChhdXRvQ2VudGVyLnR5cGUgJiYgYXV0b0NlbnRlci53aWR0aCkge1xyXG4gICAgICBpZiAoYXV0b0NlbnRlci50eXBlID09PSBcInN0cmV0Y2hcIikge1xyXG4gICAgICAgIG1hcmdpbiA9IE1hdGguZmxvb3IoZW1wdHlXaWR0aCAvIGNvbHVtbkNvdW50KTtcclxuICAgICAgICBlbXB0eVdpZHRoIC09IG1hcmdpbiAqIGNvbHVtbkNvdW50O1xyXG4gICAgICAgIHRoaXMuX2l0ZW1NYXJnaW5zLm1hcmdpbkxlZnQgPSAoTWF0aC5mbG9vcihtYXJnaW4gLyAyKSArIG1hcmdpbkV4dGVudHMubCkudG9TdHJpbmcoKSArIFwicHhcIjtcclxuICAgICAgICAvLyBSZW1vdmUgMSBhZGRpdG9uYWwgcHgsIGZyb20gbWFyZ2luIHRvIHByZXZlbnQgdGhlIGxhc3QgaXRlbSBmcm9tIHNvbWV0aW1lcyBcImRpc2FwcGVhcmluZ1wiIChkcm9wcGVkIHRvIG5leHQgbGluZSBhbmQgb3V0IG9mIHZpZXcpXHJcbiAgICAgICAgdGhpcy5faXRlbU1hcmdpbnMubWFyZ2luUmlnaHQgPSAoTWF0aC5jZWlsKG1hcmdpbiAvIDIpICsgbWFyZ2luRXh0ZW50cy5yIC0gMSkudG9TdHJpbmcoKSArIFwicHhcIjtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBtYXJnaW4gPSAwO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIFRoZSBzcGVjaWFsIGNhc2Ugb2YgYSBzaW5nbGUgcGFnZSB3aXRoIGEgc2luZ2xlIHJvd1xyXG4gICAgICBpZiAocGFnZUNvdW50ID09PSAxICYmIHBhZ2VTaXplIDwgY29sdW1uQ291bnQgJiYgIWF1dG9DZW50ZXIucHJldmVudFNpbmdsZVJvd0NlbnRlcikge1xyXG4gICAgICAgIGVtcHR5V2lkdGggPSBNYXRoLm1heChpdGVtc1BhbmUuY2xpZW50V2lkdGggLSAobWFyZ2luQm94LncgKyBtYXJnaW4pICogcGFnZVNpemUsIDApO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IGVtcHR5V2lkdGhQeCA9IE1hdGguZmxvb3IoZW1wdHlXaWR0aCAvIDIpLnRvU3RyaW5nKCkgKyBcInB4XCI7XHJcbiAgICAgIHNldFN0eWxlKGl0ZW1zUGFuZSwge1xyXG4gICAgICAgIHBhZGRpbmdMZWZ0OiBlbXB0eVdpZHRoUHgsXHJcbiAgICAgICAgcGFkZGluZ1JpZ2h0OiBlbXB0eVdpZHRoUHhcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvLyBOb3cgd2UgdXBkYXRlIG1hcmdpbnMgZm9yIGNoaWxkIG5vZGVzXHJcbiAgICBub2RlSW5kZXggPSB0aGlzLl9pdGVtTWFyZ2lucyA/IDAgOiBjaGlsZE5vZGVzLmxlbmd0aDtcclxuICAgIHdoaWxlIChub2RlSW5kZXggPCBjaGlsZE5vZGVzLmxlbmd0aCkge1xyXG4gICAgICBzZXRTdHlsZShjaGlsZE5vZGVzW25vZGVJbmRleCsrXSwgdGhpcy5faXRlbU1hcmdpbnMpO1xyXG4gICAgfVxyXG4gICAgLy8gUG9wdWxhdGUgYnVsbGV0IG5vZGVzIHBhbmUgd2l0aCBidWxsZXRzXHJcbiAgICBpZiAodGhpcy5fYnVsbGV0c05vZGUpIHtcclxuICAgICAgdGhpcy5fYnVsbGV0c05vZGUuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgaWYgKHBhZ2VDb3VudCA+IDEpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhZ2VDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICBjb25zdCBidWxsZXQgPSBjcmVhdGUoXCJzcGFuXCIsIHsgY2xhc3M6IFwiZXNyaTRHRVBhZ2luYXRpb25fQnVsbGV0XCIsIGlubmVySFRNTDogXCImbmJzcDtcIiB9LCB0aGlzLl9idWxsZXRzTm9kZSk7XHJcbiAgICAgICAgICAoKGkpID0+IHtcclxuICAgICAgICAgICAgb24oYnVsbGV0LCBcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlID0gaTtcclxuICAgICAgICAgICAgICB0aGlzLm9uUGFnZUNoYW5nZWRNYW51YWxseSh7IGN1cnJlbnRQYWdlOiB0aGlzLmN1cnJlbnRQYWdlIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0pKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5fdXBkYXRlTmF2aWdhdGlvbkNvbnRyb2xzKCk7XHJcbiAgfVxyXG4gIF9wYXJzZUF1dG9DZW50ZXJPcHRpb24ob3B0aW9uKSB7XHJcbiAgICBpZiAoIW9wdGlvbikge1xyXG4gICAgICByZXR1cm4ge307XHJcbiAgICB9XHJcbiAgICAvLyBSZWNvZ25pemUgYXV0by1jZW50ZXJpbmcgY2FzZXNcclxuICAgIGNvbnN0IHBhcnNlZCA9IHsgdHlwZTogXCJjZW50ZXJcIiB9O1xyXG4gICAgaWYgKHR5cGVvZiBvcHRpb24gIT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgb3B0aW9uID0gXCJcIjtcclxuICAgIH1cclxuICAgIGxldCBoYXNGbGFnID0gdHJ1ZTtcclxuICAgIHdoaWxlIChoYXNGbGFnKSB7XHJcbiAgICAgIHN3aXRjaCAob3B0aW9uLmNoYXJBdCgwKSkge1xyXG4gICAgICAgIGNhc2UgXCIkXCI6XHJcbiAgICAgICAgICBwYXJzZWQucHJldmVudFNpbmdsZVJvd0NlbnRlciA9IHRydWU7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwiQFwiOlxyXG4gICAgICAgICAgcGFyc2VkLmFsbG93VmVydGljYWxseUNlbnRlciA9IHRydWU7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgaGFzRmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGhhc0ZsYWcpIHtcclxuICAgICAgICBvcHRpb24gPSBvcHRpb24uc3Vic3RyKDEpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBzd2l0Y2ggKG9wdGlvbikge1xyXG4gICAgICBjYXNlIFwid2lkdGhcIjpcclxuICAgICAgICBwYXJzZWQud2lkdGggPSB0cnVlO1xyXG4gICAgICAgIHJldHVybiBwYXJzZWQ7XHJcbiAgICAgIGNhc2UgXCJoZWlnaHRcIjpcclxuICAgICAgICBwYXJzZWQuaGVpZ2h0ID0gdHJ1ZTtcclxuICAgICAgICByZXR1cm4gcGFyc2VkO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIGlmIChvcHRpb24uaW5kZXhPZihcInN0cmV0Y2hcIikgIT09IDApIHtcclxuICAgICAgICAgIHBhcnNlZC53aWR0aCA9IHBhcnNlZC5oZWlnaHQgPSB0cnVlO1xyXG4gICAgICAgICAgcmV0dXJuIHBhcnNlZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICAvLyBQYXJzZSBzdHJldGNoIGNhc2VzXHJcbiAgICBwYXJzZWQudHlwZSA9IFwic3RyZXRjaFwiO1xyXG4gICAgb3B0aW9uID0gb3B0aW9uLnN1YnN0cig3KTtcclxuICAgIGxldCBpID0gb3B0aW9uLmluZGV4T2YoXCI6XCIpO1xyXG4gICAgY29uc3Qgc3VmZml4ID0gaSA8IDAgPyBvcHRpb24gOiBvcHRpb24uc3Vic3RyKDAsIGkpOyAvLyBDb250YWlucyBzdHJldGNoIHR5cGUgc3VmZml4XHJcbiAgICBvcHRpb24gPSBpIDwgMCA/IFwiXCIgOiBvcHRpb24uc3Vic3RyKGkgKyAxKTsgLy8gQ29udGFpbnMgY29uc3RyYWludHMgYWZ0ZXIgXCI6XCJcclxuICAgIHN3aXRjaCAoc3VmZml4KSB7XHJcbiAgICAgIGNhc2UgXCItd2lkdGhcIjpcclxuICAgICAgICBwYXJzZWQud2lkdGggPSB0cnVlO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwiLWhlaWdodFwiOlxyXG4gICAgICAgIHBhcnNlZC5oZWlnaHQgPSB0cnVlO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHBhcnNlZC53aWR0aCA9IHBhcnNlZC5oZWlnaHQgPSB0cnVlO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgaWYgKCFvcHRpb24pIHtcclxuICAgICAgcmV0dXJuIHBhcnNlZDtcclxuICAgIH1cclxuICAgIC8vIFBhcnNlIGNvbnN0cmFpbnRzXHJcbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uLnNwbGl0KFwiLFwiKTtcclxuICAgIGkgPSAwO1xyXG4gICAgW1wid2lkdGhcIiwgXCJoZWlnaHRcIl0uZm9yRWFjaCgocHJvcCkgPT4ge1xyXG4gICAgICBpZiAoIXBhcnNlZFtwcm9wXSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCB2YWx1ZSA9IE51bWJlcihvcHRpb25zW2krK10pO1xyXG4gICAgICBpZiAoIWlzTmFOKHZhbHVlKSAmJiB2YWx1ZSA+IDApIHtcclxuICAgICAgICBwYXJzZWRbcHJvcCArIFwiTGltaXRcIl0gPSB2YWx1ZTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gcGFyc2VkO1xyXG4gIH1cclxuICBfb25JdGVtQ2xpY2sobm9kZSkge1xyXG4gICAgdGhpcy5vblNlbGVjdChub2RlKTtcclxuICB9XHJcbiAgX2NvZXJjZUN1cnJlbnRQYWdlKGN1cnJlbnRQYWdlKSB7XHJcbiAgICBpZiAoY3VycmVudFBhZ2UgPj0gdGhpcy5fcGFnZUNvdW50KSB7XHJcbiAgICAgIGN1cnJlbnRQYWdlID0gdGhpcy5fcGFnZUNvdW50IC0gMTtcclxuICAgIH1cclxuICAgIGlmIChjdXJyZW50UGFnZSA8IDApIHtcclxuICAgICAgY3VycmVudFBhZ2UgPSAwO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGN1cnJlbnRQYWdlO1xyXG4gIH1cclxuICBfdXBkYXRlTmF2aWdhdGlvbkNvbnRyb2xzKCkge1xyXG4gICAgY29uc3QgY3VycmVudFBhZ2UgPSB0aGlzLmN1cnJlbnRQYWdlO1xyXG4gICAgY29uc3Qgc2luZ2xlUGFnZSA9IHRoaXMuX3BhZ2VDb3VudCA8PSAxO1xyXG4gICAgY29uc3QgbmF2aWdhdGlvbkRpc2FibGUgPSBzaW5nbGVQYWdlICYmICF0aGlzLmFsd2F5c1Nob3dBcnJvd3MgPyBcIm5vbmVcIiA6IFwiXCI7XHJcbiAgICBjb25zdCBzdGF0ZXMgPSBbXCJlc3JpNEdFUGFnaW5hdGlvbl9UcmlhbmdsZURpc2FibGVkXCIsIFwiZXNyaTRHRVBhZ2luYXRpb25fVHJpYW5nbGVFbmFibGVkXCJdO1xyXG4gICAgbGV0IGVuYWJsZTtcclxuICAgIC8vIFVwZGF0ZSB0cmlhbmdsZSBidXR0b25zIHZpc2liaWxpdHlcclxuICAgIGlmICh0aGlzLl9iYWNrTm9kZSkge1xyXG4gICAgICBlbmFibGUgPSBzaW5nbGVQYWdlIHx8IChjdXJyZW50UGFnZSA9PT0gMCAmJiAhdGhpcy5jeWNsaWNQYWdpbmF0aW9uKSA/IDAgOiAxO1xyXG4gICAgICByZXBsYWNlQ2xhc3ModGhpcy5fYmFja05vZGUsIHN0YXRlc1tlbmFibGVdLCBzdGF0ZXNbMSAtIGVuYWJsZV0pO1xyXG4gICAgICB0aGlzLl9iYWNrTm9kZS5zdHlsZS5kaXNwbGF5ID0gbmF2aWdhdGlvbkRpc2FibGU7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5fZm9yd2FyZE5vZGUpIHtcclxuICAgICAgZW5hYmxlID0gc2luZ2xlUGFnZSB8fCAoY3VycmVudFBhZ2UgPT09IHRoaXMuX3BhZ2VDb3VudCAtIDEgJiYgIXRoaXMuY3ljbGljUGFnaW5hdGlvbikgPyAwIDogMTtcclxuICAgICAgcmVwbGFjZUNsYXNzKHRoaXMuX2ZvcndhcmROb2RlLCBzdGF0ZXNbZW5hYmxlXSwgc3RhdGVzWzEgLSBlbmFibGVdKTtcclxuICAgICAgdGhpcy5fZm9yd2FyZE5vZGUuc3R5bGUuZGlzcGxheSA9IG5hdmlnYXRpb25EaXNhYmxlO1xyXG4gICAgfVxyXG4gICAgLy8gVXBkYXRlIGJ1bGxldCBidXR0b25zXHJcbiAgICBpZiAodGhpcy5fYnVsbGV0c05vZGUpIHtcclxuICAgICAgY29uc3QgYnVsbGV0cyA9IHRoaXMuX2J1bGxldHNOb2RlLmNoaWxkcmVuO1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ1bGxldHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAoaSA9PT0gY3VycmVudFBhZ2UpIHtcclxuICAgICAgICAgIGFkZENsYXNzKGJ1bGxldHNbaV0sIFwiZXNyaTRHRVBhZ2luYXRpb25fQnVsbGV0Q3VycmVudFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICByZW1vdmVDbGFzcyhidWxsZXRzW2ldLCBcImVzcmk0R0VQYWdpbmF0aW9uX0J1bGxldEN1cnJlbnRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9zZXRJdGVtcyhpdGVtcykge1xyXG4gICAgdGhpcy5fc2V0KFwiaXRlbXNcIiwgaXRlbXMpO1xyXG4gICAgdGhpcy5fZW1wdHlOb2RlKHRoaXMuX2l0ZW1zTm9kZSk7XHJcbiAgICBpZiAodGhpcy5fYnVsbGV0c05vZGUpIHtcclxuICAgICAgdGhpcy5fYnVsbGV0c05vZGUuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgIH1cclxuICAgIHRoaXMuX3NldChcImN1cnJlbnRQYWdlXCIsIDApO1xyXG4gICAgdGhpcy5fcGFnZUNvdW50ID0gMDtcclxuICAgIHRoaXMuX3VwZGF0ZU5hdmlnYXRpb25Db250cm9scygpO1xyXG4gIH1cclxuICAvLyBTZWxlY3RzIGEgcGFnZSB0byBiZSBzaG93biBieSBhbiBpbmRleCBvZiBpdGVtLlxyXG4gIHNlbGVjdFBhZ2VCeUl0ZW1JbmRleChpbmRleCwgc2tpcEFuaW1hdGlvbikge1xyXG4gICAgaWYgKGluZGV4IDwgMCB8fCAhdGhpcy5pdGVtcyB8fCBpbmRleCA+PSB0aGlzLml0ZW1zLmxlbmd0aCB8fCB0aGlzLl9wYWdlQ291bnQgPD0gMSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLnNldEN1cnJlbnRQYWdlKE1hdGguZmxvb3IoaW5kZXggLyB0aGlzLl9wYWdlU2l6ZSksIHNraXBBbmltYXRpb24pO1xyXG4gIH1cclxuICBzZWxlY3RJdGVtKGl0ZW0pIHtcclxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5pdGVtcy5pbmRleE9mKGl0ZW0pO1xyXG4gICAgaWYgKGluZGV4ID09PSAtMSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAoaW5kZXggPCAwIHx8ICF0aGlzLml0ZW1zIHx8IGluZGV4ID49IHRoaXMuaXRlbXMubGVuZ3RoIHx8IHRoaXMuX3BhZ2VDb3VudCA8PSAxKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IGl0ZW1JbmRleE9uUGFnZSA9IHRoaXMuaXRlbXMubGVuZ3RoICUgdGhpcy5fcGFnZVNpemU7XHJcbiAgICBjb25zdCBub2RlVG9TZWxlY3QgPSB0aGlzLl9pdGVtc05vZGUuZmlyc3RDaGlsZC5jaGlsZHJlbltpdGVtSW5kZXhPblBhZ2VdO1xyXG4gICAgaWYgKG5vZGVUb1NlbGVjdCkge1xyXG4gICAgICB0aGlzLm9uU2VsZWN0KG5vZGVUb1NlbGVjdCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIG5hdmlnYXRlVG9JdGVtKGl0ZW0pIHtcclxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5pdGVtcy5pbmRleE9mKGl0ZW0pO1xyXG4gICAgdGhpcy5zZWxlY3RQYWdlQnlJdGVtSW5kZXgoaW5kZXgsIHRydWUpO1xyXG4gIH1cclxuICBzZXRDdXJyZW50UGFnZU5vQW5pbWF0aW9uKGN1cnJlbnRQYWdlKSB7XHJcbiAgICB0aGlzLnNldEN1cnJlbnRQYWdlKGN1cnJlbnRQYWdlLCB0cnVlKTtcclxuICB9XHJcbiAgLy8gU2V0cyB0aGUgaW5kZXggb2YgYSBuZXcgY3VycmVudCBwYWdlIHRvIGJlIHNob3duLlxyXG4gIC8vIFR3byBzcGVjaWFsIHZhbHVlcyBhcmUgYWxzbyBhbGxvd2VkOlxyXG4gIC8vICAgICAgXCJuZXh0XCIgbW92ZXMgdG8gdGhlIG5leHQgcGFnZSB3aXRoIHNsaWRlIGFuaW1hdGlvblxyXG4gIC8vICAgICAgXCJwcmV2XCIgbW92ZXMgdG8gdGhlIHByZXZpb3VzIHBhZ2Ugd2l0aCBzbGlkZSBhbmltYXRpb25cclxuICAvLyBJbiB0aGUgY2FzZSBvZiBjeWNsaWMgcGFnaW5hdGlvbiwgdGhlIG5leHQgcGFnZSBmb3IgdGhlIGxhc3QgcGFnZSBpcyB0aGUgZmlyc3QgcGFnZVxyXG4gIC8vIGFuZCB0aGUgcHJldmlvdXMgcGFnZSBmb3IgdGhlIGZpcnN0IHBhZ2UgaXMgdGhlIGxhc3QgcGFnZS5cclxuICBzZXRDdXJyZW50UGFnZShjdXJyZW50UGFnZSwgc2tpcEFuaW1hdGlvbiA9IGZhbHNlKSB7XHJcbiAgICB0aGlzLl9hbmltYXRpb24uZmluaXNoKCk7XHJcbiAgICBsZXQgYW5pbWF0ZTtcclxuICAgIGlmIChjdXJyZW50UGFnZSA9PT0gXCJuZXh0XCIpIHtcclxuICAgICAgYW5pbWF0ZSA9IFwiZm9yd2FyZFwiO1xyXG4gICAgICBjdXJyZW50UGFnZSA9IHRoaXMuY3VycmVudFBhZ2UgKyAxO1xyXG4gICAgICBpZiAodGhpcy5jeWNsaWNQYWdpbmF0aW9uICYmIGN1cnJlbnRQYWdlID09PSB0aGlzLl9wYWdlQ291bnQpIHtcclxuICAgICAgICBjdXJyZW50UGFnZSA9IDA7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGN1cnJlbnRQYWdlID09PSBcInByZXZcIikge1xyXG4gICAgICBhbmltYXRlID0gXCJiYWNrd2FyZFwiO1xyXG4gICAgICBjdXJyZW50UGFnZSA9IHRoaXMuY3VycmVudFBhZ2UgLSAxO1xyXG4gICAgICBpZiAodGhpcy5jeWNsaWNQYWdpbmF0aW9uICYmIGN1cnJlbnRQYWdlID09PSAtMSkge1xyXG4gICAgICAgIGN1cnJlbnRQYWdlID0gdGhpcy5fcGFnZUNvdW50IC0gMTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIGFuaW1hdGUgPSB0aGlzLnNjcm9sbEFuaW1hdGlvbiA9PT0gdHJ1ZSA/IFwiZmFkZTFcIiA6IHRoaXMuc2Nyb2xsQW5pbWF0aW9uO1xyXG4gICAgfVxyXG4gICAgaWYgKHNraXBBbmltYXRpb24gPT09IHRydWUpIHtcclxuICAgICAgYW5pbWF0ZSA9IFwiXCI7XHJcbiAgICB9XHJcbiAgICBjdXJyZW50UGFnZSA9IHRoaXMuX2NvZXJjZUN1cnJlbnRQYWdlKGN1cnJlbnRQYWdlKTtcclxuICAgIGlmICh0aGlzLmN1cnJlbnRQYWdlID09PSBjdXJyZW50UGFnZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBpdGVtcyA9IHRoaXMuaXRlbXMgfHwgW107XHJcbiAgICBjb25zdCBpdGVtc05vZGUgPSB0aGlzLl9pdGVtc05vZGU7XHJcbiAgICBsZXQgbm9kZUluZGV4ID0gMDtcclxuICAgIGxldCBpdGVtSW5kZXggPSB0aGlzLl9wYWdlU2l6ZSAqIGN1cnJlbnRQYWdlO1xyXG4gICAgY29uc3Qgb2xkSXRlbXNOb2RlID0gdGhpcy5faXRlbXNOb2RlLmZpcnN0Q2hpbGQ7XHJcbiAgICBjb25zdCBuZXdJdGVtc05vZGUgPSBjcmVhdGUoXCJkaXZcIik7XHJcbiAgICBhZGRDbGFzcyhuZXdJdGVtc05vZGUsIFwiZXNyaTRHRVBhZ2luYXRpb25JdGVtc05vZGVDaGlsZERpdlwiKTtcclxuICAgIGNvbnN0IHBsYWNlZE5vZGVJbmZvcyA9IFtdO1xyXG4gICAgd2hpbGUgKG5vZGVJbmRleCsrIDwgdGhpcy5fcGFnZVNpemUgJiYgaXRlbUluZGV4IDwgaXRlbXMubGVuZ3RoKSB7XHJcbiAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLmNyZWF0ZUl0ZW1Db250YWluZXIoKTtcclxuICAgICAgb24obm9kZSwgXCJjbGlja1wiLCB0aGlzLl9vbkl0ZW1DbGljay5iaW5kKHRoaXMsIG5vZGUpKTtcclxuICAgICAgdGhpcy5faXRlbU1hcmdpbnMgJiYgc2V0U3R5bGUobm9kZSwgdGhpcy5faXRlbU1hcmdpbnMpO1xyXG4gICAgICBuZXdJdGVtc05vZGUuYXBwZW5kQ2hpbGQobm9kZSk7XHJcbiAgICAgIGNvbnN0IGl0ZW0gPSBpdGVtc1tpdGVtSW5kZXgrK107XHJcbiAgICAgIHRoaXMudXBkYXRlSXRlbUNvbnRhaW5lcihub2RlLCBpdGVtKTsgLy8gdXBkYXRlIGFmdGVyIGFkZGluZyB0byB0aGUgbGF5b3V0XHJcbiAgICAgIHBsYWNlZE5vZGVJbmZvcy5wdXNoKHsgbm9kZSwgaXRlbSB9KTtcclxuICAgIH1cclxuICAgIHN3aXRjaCAoYW5pbWF0ZSkge1xyXG4gICAgICBjYXNlIFwiZm9yd2FyZFwiOlxyXG4gICAgICAgIHRoaXMuX3NsaWRlQW5pbWF0aW9uKGl0ZW1zTm9kZSwgb2xkSXRlbXNOb2RlLCBuZXdJdGVtc05vZGUsIHRydWUsIHBsYWNlZE5vZGVJbmZvcyk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJiYWNrd2FyZFwiOlxyXG4gICAgICAgIHRoaXMuX3NsaWRlQW5pbWF0aW9uKGl0ZW1zTm9kZSwgb2xkSXRlbXNOb2RlLCBuZXdJdGVtc05vZGUsIGZhbHNlLCBwbGFjZWROb2RlSW5mb3MpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIGlmIChhbmltYXRlKSB7XHJcbiAgICAgICAgICBhbmltYXRlID0gYW5pbWF0ZSA/IFwiX1wiICsgYW5pbWF0ZSArIFwiQW5pbWF0aW9uXCIgOiBudWxsO1xyXG4gICAgICAgICAgaWYgKHR5cGVvZiB0aGlzW2FuaW1hdGVdID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgICAgdGhpc1thbmltYXRlXShpdGVtc05vZGUsIG9sZEl0ZW1zTm9kZSwgbmV3SXRlbXNOb2RlLCBjdXJyZW50UGFnZSA+IHRoaXMuY3VycmVudFBhZ2UsIHBsYWNlZE5vZGVJbmZvcyk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9lbXB0eU5vZGUoaXRlbXNOb2RlKTtcclxuICAgICAgICBpdGVtc05vZGUuYXBwZW5kQ2hpbGQobmV3SXRlbXNOb2RlKTtcclxuICAgICAgICB0aGlzLl9ub3RpZnlOb2Rlc1BsYWNlZChwbGFjZWROb2RlSW5mb3MpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fc2V0KFwiY3VycmVudFBhZ2VcIiwgY3VycmVudFBhZ2UpO1xyXG4gICAgdGhpcy5fdXBkYXRlTmF2aWdhdGlvbkNvbnRyb2xzKCk7XHJcbiAgICB0aGlzLm9uUGFnZUNoYW5nZWQoeyBjdXJyZW50UGFnZTogdGhpcy5jdXJyZW50UGFnZSB9KTtcclxuICB9XHJcbiAgX25vdGlmeU5vZGVzUGxhY2VkKHBsYWNlZE5vZGVJbmZvcykge1xyXG4gICAgcGxhY2VkTm9kZUluZm9zLmZvckVhY2goKGluZm8pID0+IHtcclxuICAgICAgdGhpcy5vbk5vZGVQbGFjZWQoaW5mby5ub2RlLCBpbmZvLml0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIC8vIFJlcGxhY2VzIGFuIG9sZCBpdGVtcyBub2RlIHdpdGggdGhlIG5ldyBvbmUgdXNpbmcgc2xpZGluZy5cclxuICAvLyBmb3J3YXJkOiBCb29sZWFuXHJcbiAgLy8gICAgICB0cnVlIHZhbHVlIG1lYW5zIG1vdmluZyBmb3J3YXJkIHRvIHRoZSBuZXh0IHBhZ2luYXRpb24gbm9kZS5cclxuICBfc2xpZGVBbmltYXRpb24oaXRlbXNDb250YWluZXIsIG9sZEl0ZW1zTm9kZSwgbmV3SXRlbXNOb2RlLCBmb3J3YXJkLCBwbGFjZWROb2RlSW5mb3MpIHtcclxuICAgIGlmIChmb3J3YXJkKSB7XHJcbiAgICAgIGl0ZW1zQ29udGFpbmVyLmFwcGVuZENoaWxkKG5ld0l0ZW1zTm9kZSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgaXRlbXNDb250YWluZXIuaW5zZXJ0QmVmb3JlKG5ld0l0ZW1zTm9kZSwgaXRlbXNDb250YWluZXIuZmlyc3RDaGlsZCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9ub3RpZnlOb2Rlc1BsYWNlZChwbGFjZWROb2RlSW5mb3MpO1xyXG4gICAgaXRlbXNDb250YWluZXIucGFyZW50Tm9kZS5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XHJcbiAgICB0aGlzLl9hbmltYXRpb25cclxuICAgICAgLnN0YXJ0KFtcclxuICAgICAge1xyXG4gICAgICAgIG5vZGU6IGl0ZW1zQ29udGFpbmVyLFxyXG4gICAgICAgIGNsYXNzZXM6IFtcImVzcmk0R0VQYWdpbmF0aW9uX1NsaWRlQW5pbVwiLCBmb3J3YXJkID8gXCJBbmltX1NsaWRlU3RhcnRcIiA6IFwiQW5pbV9TbGlkZUVuZFwiXVxyXG4gICAgICB9XHJcbiAgICBdLCBvbGRJdGVtc05vZGUpXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgaXRlbXNDb250YWluZXIucGFyZW50Tm9kZS5zdHlsZS5vdmVyZmxvdyA9IFwiXCI7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgLy8gMS1zdGVwIGZhZGUgb3V0IGFuaW1hdGlvbi5cclxuICBfZmFkZTFBbmltYXRpb24oaXRlbXNDb250YWluZXIsIG9sZEl0ZW1zTm9kZSwgbmV3SXRlbXNOb2RlLCBfZm9yd2FyZCwgcGxhY2VkTm9kZUluZm9zKSB7XHJcbiAgICBpdGVtc0NvbnRhaW5lci5hcHBlbmRDaGlsZChuZXdJdGVtc05vZGUpO1xyXG4gICAgdGhpcy5fbm90aWZ5Tm9kZXNQbGFjZWQocGxhY2VkTm9kZUluZm9zKTtcclxuICAgIHRoaXMuX2FuaW1hdGlvbi5zdGFydChbXHJcbiAgICAgIHtcclxuICAgICAgICBub2RlOiBvbGRJdGVtc05vZGUsXHJcbiAgICAgICAgY2xhc3NlczogW1wiZXNyaTRHRVBhZ2luYXRpb25fRmFkZUFuaW1cIiwgXCJBbmltX0ZhZGVPdXRcIl1cclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIG5vZGU6IG5ld0l0ZW1zTm9kZSxcclxuICAgICAgICBjbGFzc2VzOiBbXCJlc3JpNEdFUGFnaW5hdGlvbl9GYWRlQW5pbVwiLCBcIkFuaW1fRmFkZUluXCJdXHJcbiAgICAgIH1cclxuICAgIF0sIG9sZEl0ZW1zTm9kZSk7XHJcbiAgfVxyXG4gIC8vIDItc3RlcCBmYWRlIGluIGFuaW1hdGlvbi5cclxuICBfZmFkZTJBbmltYXRpb24oaXRlbXNDb250YWluZXIsIG9sZEl0ZW1zTm9kZSwgbmV3SXRlbXNOb2RlLCBfZm9yd2FyZCwgcGxhY2VkTm9kZUluZm9zKSB7XHJcbiAgICBjb25zdCBhbmltYXRpb24gPSB0aGlzLl9hbmltYXRpb247XHJcbiAgICBhbmltYXRpb25cclxuICAgICAgLnN0YXJ0KFtcclxuICAgICAge1xyXG4gICAgICAgIG5vZGU6IG9sZEl0ZW1zTm9kZSxcclxuICAgICAgICBjbGFzc2VzOiBbXCJlc3JpNEdFUGFnaW5hdGlvbl9GYWRlQW5pbVwiLCBcIkFuaW1fRmFkZU91dFwiXVxyXG4gICAgICB9XHJcbiAgICBdLCBvbGRJdGVtc05vZGUpXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgaXRlbXNDb250YWluZXIuYXBwZW5kQ2hpbGQobmV3SXRlbXNOb2RlKTtcclxuICAgICAgdGhpcy5fbm90aWZ5Tm9kZXNQbGFjZWQocGxhY2VkTm9kZUluZm9zKTtcclxuICAgICAgYW5pbWF0aW9uLnN0YXJ0KFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBub2RlOiBuZXdJdGVtc05vZGUsXHJcbiAgICAgICAgICBjbGFzc2VzOiBbXCJlc3JpNEdFUGFnaW5hdGlvbl9GYWRlQW5pbVwiLCBcIkFuaW1fRmFkZUluXCJdXHJcbiAgICAgICAgfVxyXG4gICAgICBdLCBvbGRJdGVtc05vZGUpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIF9kZXN0cm95Tm9kZShub2RlKSB7XHJcbiAgICBub2RlICYmIG5vZGUucGFyZW50Tm9kZSAmJiBub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7XHJcbiAgfVxyXG4gIF9lbXB0eU5vZGUobm9kZSkge1xyXG4gICAgaWYgKG5vZGUpIHtcclxuICAgICAgbm9kZS5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgfVxyXG4gIH1cclxuICBnZXROdW1TaG93bkl0ZW1zKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2l0ZW1zTm9kZS5jaGlsZHJlblswXSAmJiB0aGlzLl9pdGVtc05vZGUuY2hpbGRyZW5bMF0uY2hpbGRyZW4ubGVuZ3RoO1xyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vIEV2ZW50c1xyXG4gIC8vXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLyoqXHJcbiAgICogQ2FsbGVkIHdoZW4gYSBub2RlIGlzIGFkZGVkIHRvIHRoZSBsYXlvdXQuXHJcbiAgICovXHJcbiAgb25Ob2RlUGxhY2VkKF9ub2RlLCBfaXRlbSkgeyB9XHJcbiAgLyoqXHJcbiAgICogSXMgY2FsbGVkIG9uIG5vZGUgc2VsZWN0aW9uLlxyXG4gICAqL1xyXG4gIG9uU2VsZWN0KF9ub2RlKSB7IH1cclxuICAvKipcclxuICAgKiBDYWxsZWQgb24gZXZlcnkgcGFnZSBjaGFuZ2UsIGJvdGggbWFudWFsIGFuZCBwcm9ncmFtbWF0aWMuXHJcbiAgICovXHJcbiAgb25QYWdlQ2hhbmdlZChfZXZlbnQpIHsgfVxyXG4gIC8qKlxyXG4gICAqIENhbGxlZCBvbiBldmVyeSBtYW51YWwgcGFnZSBjaGFuZ2UuXHJcbiAgICovXHJcbiAgb25QYWdlQ2hhbmdlZE1hbnVhbGx5KF9ldmVudCkgeyB9XHJcbn07XHJcbl9fZGVjb3JhdGUoW1xyXG4gIHkkcigpXHJcbl0sIFBhZ2luYXRpb24ucHJvdG90eXBlLCBcImF1dG9DZW50ZXJcIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKClcclxuXSwgUGFnaW5hdGlvbi5wcm90b3R5cGUsIFwic2Nyb2xsQW5pbWF0aW9uXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gIHkkcigpXHJcbl0sIFBhZ2luYXRpb24ucHJvdG90eXBlLCBcImN5Y2xpY1BhZ2luYXRpb25cIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKClcclxuXSwgUGFnaW5hdGlvbi5wcm90b3R5cGUsIFwiYWx3YXlzU2hvd0Fycm93c1wiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoKVxyXG5dLCBQYWdpbmF0aW9uLnByb3RvdHlwZSwgXCJpdGVtc1wiLCBudWxsKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKHtcclxuICAgIHZhbHVlOiAwXHJcbiAgfSlcclxuXSwgUGFnaW5hdGlvbi5wcm90b3R5cGUsIFwiY3VycmVudFBhZ2VcIiwgbnVsbCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gIHkkcigpXHJcbl0sIFBhZ2luYXRpb24ucHJvdG90eXBlLCBcImNyZWF0ZUl0ZW1Db250YWluZXJcIiwgbnVsbCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gIHkkcigpXHJcbl0sIFBhZ2luYXRpb24ucHJvdG90eXBlLCBcInVwZGF0ZUl0ZW1Db250YWluZXJcIiwgbnVsbCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gIHkkcigpXHJcbl0sIFBhZ2luYXRpb24ucHJvdG90eXBlLCBcIm9uTm9kZVBsYWNlZFwiLCBudWxsKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKClcclxuXSwgUGFnaW5hdGlvbi5wcm90b3R5cGUsIFwib25TZWxlY3RcIiwgbnVsbCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gIHkkcigpXHJcbl0sIFBhZ2luYXRpb24ucHJvdG90eXBlLCBcIm9uUGFnZUNoYW5nZWRcIiwgbnVsbCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gIHkkcigpXHJcbl0sIFBhZ2luYXRpb24ucHJvdG90eXBlLCBcIm9uUGFnZUNoYW5nZWRNYW51YWxseVwiLCBudWxsKTtcclxuUGFnaW5hdGlvbiA9IF9fZGVjb3JhdGUoW1xyXG4gIGkkWCgpXHJcbl0sIFBhZ2luYXRpb24pO1xuXG5sZXQgQ291bnRyeVNlbGVjdCA9IGNsYXNzIENvdW50cnlTZWxlY3QgZXh0ZW5kcyBUZW1wbGF0ZWRXaWRnZXQge1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vIEluaXRpYWxpemF0aW9uXHJcbiAgLy9cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgY29uc3RydWN0b3IocGFyYW1zLCByZWZOb2RlLCBwb3NpdGlvbikge1xyXG4gICAgc3VwZXIocGFyYW1zLCByZWZOb2RlLCBwb3NpdGlvbik7XHJcbiAgICB0aGlzLl90ZW1wbGF0ZVN0cmluZyA9ICc8ZGl2IGNsYXNzPVwiZXNyaTRHRURhdGFCcm93c2VyX0NvdW50cnlCb3hDb250YWluZXJcIj48ZGl2IGNsYXNzPVwiRGF0YUJyb3dzZXJfQ291bnRyeUJveFwiIGRhdGEtYXR0YWNoLXBvaW50PVwiX2RpdkNvdW50cnlTZWxlY3RcIj48Y2FsY2l0ZS1zZWxlY3QgaWQ9XCJjYWxjaXRlQ291bnRyeVNlbGVjdFwiIGNsYXNzPVwiY291bnRyeVNlbGVjdCBjYWxjaXRlU2VsZWN0XCIgbGFuZz1cImhlXCIgLz48L2Rpdj48ZGl2IGNsYXNzPVwiZXNyaTRHRURhdGFCcm93c2VyX0NvdW50cnlCb3hDb250YWluZXJcIiBkYXRhLWF0dGFjaC1wb2ludD1cIl9kaXZIaWVyYXJjaHlTZWxlY3RcIj48Y2FsY2l0ZS1zZWxlY3QgaWQ9XCJjYWxjaXRlSGllcmFyY2h5U2VsZWN0XCIgY2xhc3M9XCJjYWxjaXRlU2VsZWN0IGhpZXJhcmNoeVNlbGVjdFwiIC8+PC9kaXY+PC9kaXY+JztcclxuICAgIHRoaXMuYWxsb3dIaWVyYXJjaGllcyA9IGZhbHNlO1xyXG4gICAgLy8gb3RoZXIgcHJvcGVydGllc1xyXG4gICAgdGhpcy5fY291bnRyaWVzID0ge307XHJcbiAgfVxyXG4gIHBvc3RDcmVhdGUoKSB7XHJcbiAgICB0aGlzLl9jb3VudHJ5U2VsZWN0Q2FsY2l0ZSA9IHRoaXMuZG9tTm9kZS5xdWVyeVNlbGVjdG9yKFwiI2NhbGNpdGVDb3VudHJ5U2VsZWN0XCIpO1xyXG4gICAgdGhpcy5fY291bnRyeVNlbGVjdENhbGNpdGUuYWRkRXZlbnRMaXN0ZW5lcihcImNhbGNpdGVTZWxlY3RDaGFuZ2VcIiwgKGUpID0+IHtcclxuICAgICAgdGhpcy5fdHJ5U2hvd0hpZXJhcmNoaWVzKCk7XHJcbiAgICAgIHRoaXMub25DaGFuZ2UoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5faGllcmFyY2h5U2VsZWN0Q2FsY2l0ZSA9IHRoaXMuZG9tTm9kZS5xdWVyeVNlbGVjdG9yKFwiI2NhbGNpdGVIaWVyYXJjaHlTZWxlY3RcIik7XHJcbiAgICB0aGlzLl9oaWVyYXJjaHlTZWxlY3RDYWxjaXRlLmFkZEV2ZW50TGlzdGVuZXIoXCJjYWxjaXRlU2VsZWN0Q2hhbmdlXCIsIChlKSA9PiB7XHJcbiAgICAgIHRoaXMub25DaGFuZ2UoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fdXBkYXRlSGllcmFyY2hpZXNWaXNpYmlsaXR5KCk7XHJcbiAgfVxyXG4gIHNldENvdW50cmllcyhkYXRhKSB7XHJcbiAgICAvLyBBZGQgR2xvYmFsIG9wdGlvblxyXG4gICAgY29uc3QgZ2xvYmFsT3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbGNpdGUtb3B0aW9uXCIpO1xyXG4gICAgZ2xvYmFsT3B0aW9uLmxhYmVsID0gZ2V0R0VNZXNzYWdlcyhcIkRhdGFCcm93c2VyXCIpLkNvdW50cnlTZWxlY3QuZ2xvYmFsO1xyXG4gICAgZ2xvYmFsT3B0aW9uLnZhbHVlID0gdGhpcy5nbG9iYWxDb3VudHJ5SUQ7XHJcbiAgICB0aGlzLl9jb3VudHJ5U2VsZWN0Q2FsY2l0ZS5hcHBlbmRDaGlsZChnbG9iYWxPcHRpb24pO1xyXG4gICAgZGF0YS5tYXAoKGNvdW50cnkpID0+IHtcclxuICAgICAgdGhpcy5fY291bnRyaWVzW2NvdW50cnkuaWRdID0gY291bnRyeTtcclxuICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbGNpdGUtb3B0aW9uXCIpO1xyXG4gICAgICBvcHRpb24udmFsdWUgPSBjb3VudHJ5LmlkO1xyXG4gICAgICBvcHRpb24ubGFiZWwgPSBjb3VudHJ5Lm5hbWU7XHJcbiAgICAgIHRoaXMuX2NvdW50cnlTZWxlY3RDYWxjaXRlLmFwcGVuZENoaWxkKG9wdGlvbik7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgX3RyeVNob3dIaWVyYXJjaGllcygpIHtcclxuICAgIHRoaXMuX2hpZXJhcmNoeVNlbGVjdENhbGNpdGUuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgIGlmICghdGhpcy5hbGxvd0hpZXJhcmNoaWVzKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IGNvdW50cnkgPSB0aGlzLl9jb3VudHJpZXNbdGhpcy5fY291bnRyeVNlbGVjdENhbGNpdGUudmFsdWVdO1xyXG4gICAgY29uc3QgaGllcmFyY2hpZXMgPSBjb3VudHJ5ICYmIGNvdW50cnkuaGllcmFyY2hpZXM7XHJcbiAgICBpZiAoIWhpZXJhcmNoaWVzIHx8IGhpZXJhcmNoaWVzLmxlbmd0aCA8IDIpIHtcclxuICAgICAgdGhpcy5fdXBkYXRlSGllcmFyY2hpZXNWaXNpYmlsaXR5KCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIC8vIEZpbmQgdGhlIGRlZmF1bHQgaGllcmFyY2h5XHJcbiAgICBjb25zdCBnbG9iYWxEYXRhU2V0cyA9IGNvdW50cnkuZGVmYXVsdERhdGFzZXRJRC50b1VwcGVyQ2FzZSgpO1xyXG4gICAgaGllcmFyY2hpZXMuc29tZSgoaGllcmFyY2h5KSA9PiB7XHJcbiAgICAgIGlmIChoaWVyYXJjaHkuZGF0YXNldHMuc29tZSgoZGF0YXNldCkgPT4gZGF0YXNldC50b1VwcGVyQ2FzZSgpID09PSBnbG9iYWxEYXRhU2V0cykpIHtcclxuICAgICAgICB0aGlzLl9kZWZhdWx0SGllcmFyY2h5SUQgPSBoaWVyYXJjaHkuSUQ7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7IC8vIHN0b3AgdGhlIGN5Y2xlXHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSk7XHJcbiAgICBjb25zdCBvcHRpb25zID0gbmV3IEFycmF5O1xyXG4gICAgaWYgKCFjb3VudHJ5LmRpc2FibGVNdWx0aUhpZXJhcmNoeVN1cHBvcnQpIHtcclxuICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbGNpdGUtb3B0aW9uXCIpO1xyXG4gICAgICBvcHRpb24ubGFiZWwgPSBnZXRHRU1lc3NhZ2VzKFwiRGF0YUJyb3dzZXJcIikuQ291bnRyeVNlbGVjdC5hbGxIaWVyYXJjaGllcztcclxuICAgICAgb3B0aW9uLnZhbHVlID0gXCJhbGxcIjtcclxuICAgICAgb3B0aW9ucy5wdXNoKG9wdGlvbik7XHJcbiAgICB9XHJcbiAgICBoaWVyYXJjaGllcy5mb3JFYWNoKChoaWVyYXJjaHkpID0+IHtcclxuICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbGNpdGUtb3B0aW9uXCIpO1xyXG4gICAgICBvcHRpb24ubGFiZWwgPSBoaWVyYXJjaHkuYWxpYXM7XHJcbiAgICAgIG9wdGlvbi52YWx1ZSA9IGhpZXJhcmNoeS5JRDtcclxuICAgICAgb3B0aW9ucy5wdXNoKG9wdGlvbik7XHJcbiAgICB9KTtcclxuICAgIG9wdGlvbnMuZm9yRWFjaCgob3B0aW9uKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZXJhcmNoeVNlbGVjdENhbGNpdGUuYXBwZW5kQ2hpbGQob3B0aW9uKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5faGllcmFyY2h5U2VsZWN0Q2FsY2l0ZS52YWx1ZSA9IGNvdW50cnkuZGlzYWJsZU11bHRpSGllcmFyY2h5U3VwcG9ydCA/IHRoaXMuX2RlZmF1bHRIaWVyYXJjaHlJRCA6IFwiYWxsXCI7XHJcbiAgICB0aGlzLl91cGRhdGVIaWVyYXJjaGllc1Zpc2liaWxpdHkoKTtcclxuICB9XHJcbiAgX3VwZGF0ZUhpZXJhcmNoaWVzVmlzaWJpbGl0eSgpIHtcclxuICAgIGRpc3BsYXkodGhpcy5fZGl2SGllcmFyY2h5U2VsZWN0LCAhIXRoaXMuX2hpZXJhcmNoeVNlbGVjdENhbGNpdGUuY2hpbGRyZW4ubGVuZ3RoKTtcclxuICB9XHJcbiAgZ2V0VmFsdWUoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBjb3VudHJ5SUQ6IHRoaXMuX2NvdW50cnlTZWxlY3RDYWxjaXRlLnZhbHVlLFxyXG4gICAgICBoaWVyYXJjaHlJRDogKHRoaXMuX2hpZXJhcmNoeVNlbGVjdENhbGNpdGUuY2hpbGRyZW4ubGVuZ3RoICYmXHJcbiAgICAgICAgdGhpcy5faGllcmFyY2h5U2VsZWN0Q2FsY2l0ZS52YWx1ZSAhPT0gXCJhbGxcIiAmJlxyXG4gICAgICAgIHRoaXMuX2hpZXJhcmNoeVNlbGVjdENhbGNpdGUudmFsdWUpIHx8XHJcbiAgICAgICAgbnVsbFxyXG4gICAgfTtcclxuICB9XHJcbiAgc2V0VmFsdWUodmFsdWUpIHtcclxuICAgIHRoaXMuX2NvdW50cnlTZWxlY3RDYWxjaXRlLnZhbHVlID0gdmFsdWUuY291bnRyeUlEO1xyXG4gICAgdGhpcy5fdHJ5U2hvd0hpZXJhcmNoaWVzKCk7XHJcbiAgICBjb25zdCBjb3VudHJ5ID0gdGhpcy5fY291bnRyaWVzW3ZhbHVlLmNvdW50cnlJRF07XHJcbiAgICB0aGlzLl9oaWVyYXJjaHlTZWxlY3RDYWxjaXRlLnZhbHVlID0gdmFsdWUuaGllcmFyY2h5SUQgfHwgY291bnRyeS5kaXNhYmxlTXVsdGlIaWVyYXJjaHlTdXBwb3J0ID8gdGhpcy5fZGVmYXVsdEhpZXJhcmNoeUlEIDogXCJhbGxcIjtcclxuICB9XHJcbiAgb25DaGFuZ2UoKSB7IH1cclxufTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKClcclxuXSwgQ291bnRyeVNlbGVjdC5wcm90b3R5cGUsIFwiZ2xvYmFsQ291bnRyeUlEXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gIHkkcigpXHJcbl0sIENvdW50cnlTZWxlY3QucHJvdG90eXBlLCBcImFsbG93SGllcmFyY2hpZXNcIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKClcclxuXSwgQ291bnRyeVNlbGVjdC5wcm90b3R5cGUsIFwib25DaGFuZ2VcIiwgbnVsbCk7XHJcbkNvdW50cnlTZWxlY3QgPSBfX2RlY29yYXRlKFtcclxuICBpJFgoKVxyXG5dLCBDb3VudHJ5U2VsZWN0KTtcblxubGV0IFNlYXJjaFRleHRCb3ggPSBjbGFzcyBTZWFyY2hUZXh0Qm94IGV4dGVuZHMgVGVtcGxhdGVkV2lkZ2V0IHtcclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyBHZXR0ZXJzICYgc2V0dGVyc1xyXG4gIC8vXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vIFZBTFVFXHJcbiAgZ2V0IHZhbHVlKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3RleHRCb3ggJiYgdGhpcy5fdGV4dEJveC52YWx1ZTtcclxuICB9XHJcbiAgc2V0IHZhbHVlKHZhbHVlKSB7XHJcbiAgICB0aGlzLl9zZXQoXCJ2YWx1ZVwiLCB2YWx1ZSk7XHJcbiAgICB0aGlzLl90ZXh0Qm94ICYmICh0aGlzLl90ZXh0Qm94LnZhbHVlID0gdmFsdWUpO1xyXG4gIH1cclxuICAvLyBQUk9NUFRTXHJcbiAgc2V0IHByb21wdCh2YWx1ZSkge1xyXG4gICAgdGhpcy5fc2V0KFwicHJvbXB0XCIsIHZhbHVlKTtcclxuICAgIHRoaXMuX3RleHRCb3ggJiYgKHRoaXMuX3RleHRCb3gucGxhY2Vob2xkZXIgPSB2YWx1ZSk7XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vIEluaXRpYWxpemF0aW9uXHJcbiAgLy9cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgY29uc3RydWN0b3IocGFyYW1zLCByZWZOb2RlLCBwb3NpdGlvbikge1xyXG4gICAgc3VwZXIocGFyYW1zLCByZWZOb2RlLCBwb3NpdGlvbik7XHJcbiAgICAvL3Byb3RlY3RlZCBvdmVycmlkZSBfdGVtcGxhdGVTdHJpbmcgPSBcIjxkaXYgY2xhc3M9J2Vzcmk0R0VTZWFyY2hUZXh0Qm94Jz48L2Rpdj48Y2FsY2l0ZS1pbnB1dC10ZXh0IC8+XCI7XHJcbiAgICB0aGlzLl90ZW1wbGF0ZVN0cmluZyA9ICc8Y2FsY2l0ZS1pbnB1dC10ZXh0IGlkPVwiY2FsY2l0ZVNlYXJjaFRleHRCb3hcIiBpY29uPVwic2VhcmNoXCIgLz4nO1xyXG4gIH1cclxuICBwb3N0Q3JlYXRlKCkge1xyXG4gICAgdGhpcy5fdGV4dEJveCA9IHRoaXMuZG9tTm9kZS5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FsY2l0ZVNlYXJjaFRleHRCb3hcIik7XHJcbiAgICB0aGlzLl90ZXh0Qm94LnBsYWNlaG9sZGVyID0gdGhpcy5wcm9tcHQ7XHJcbiAgICB0aGlzLl90ZXh0Qm94LmFkZEV2ZW50TGlzdGVuZXIoXCJjYWxjaXRlSW5wdXRUZXh0Q2hhbmdlXCIsIChlKSA9PiB7XHJcbiAgICAgIHRoaXMudmFsdWUgPSB0aGlzLl90ZXh0Qm94LnZhbHVlO1xyXG4gICAgICB0aGlzLl9vblNlYXJjaCgpO1xyXG4gICAgfSk7XHJcbiAgICAvKlxyXG4gICAgbmV3IFRleHRCb3goe1xyXG4gICAgICBjbGFzczogXCJzZWFyY2hUZXh0Qm94SW5wdXRcIixcclxuICAgICAgcGxhY2VIb2xkZXI6IHRoaXMucHJvbXB0LFxyXG4gICAgICBjbGVhcmFibGU6IHRydWUsXHJcbiAgICAgIGFkZGl0aW9uYWxCdXR0b246IHtcclxuICAgICAgICBjbGFzczogXCJzZWFyY2hUZXh0Qm94QnV0dG9uXCIsXHJcbiAgICAgICAgb25DbGljazogdGhpcy5fb25TZWFyY2guYmluZCh0aGlzKVxyXG4gICAgICB9LFxyXG4gICAgICBvbkVudGVyOiB0aGlzLl9vblNlYXJjaC5iaW5kKHRoaXMpLFxyXG4gICAgICBvbkNoYW5nZTogKCkgPT4gdGhpcy5ub3RpZnlDaGFuZ2UoXCJ2YWx1ZVwiKVxyXG4gICAgfSkucGxhY2VBdCh0aGlzLmRvbU5vZGUpO1xyXG4gICAgKi9cclxuICAgIC8qXHJcbiAgICBvbih0aGlzLl90ZXh0Qm94LnRleHRib3gsIFwia2V5dXBcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgIC8vIEhpZGluZyB0b29sYm94IG9uIGtleXVwIHNvIHRoYXQgaXQgZG9lc24ndCBoaW5kZXIgdmlzaWJpbGl0eVxyXG4gICAgICBoaWRlVG9vbHRpcEZvck5vZGUodGhpcy5fdGV4dEJveC50ZXh0Ym94KTtcclxuICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IEtFWVMuRW50ZXIpIHtcclxuICAgICAgICB0aGlzLl9vblNlYXJjaCgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgb24odGhpcy5fdGV4dEJveC50ZXh0Ym94LCBcImJsdXJcIiwgKCkgPT4ge1xyXG4gICAgICBoaWRlVG9vbHRpcEZvck5vZGUodGhpcy5fdGV4dEJveC50ZXh0Ym94KTtcclxuICAgIH0pO1xyXG4gICAgKi9cclxuICB9XHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vXHJcbiAgLy8gVG9vbHRpcFxyXG4gIC8vXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIHNob3dUb29sdGlwKG1lc3NhZ2UpIHtcclxuICAgIHNob3dUb29sdGlwRm9yTm9kZSh0aGlzLmRvbU5vZGUsIG1lc3NhZ2UsIHsgcG9zaXRpb246IFtcImFib3ZlXCIsIFwiYmVsb3dcIl0gfSk7XHJcbiAgfVxyXG4gIGhpZGVUb29sdGlwKCkge1xyXG4gICAgaGlkZVRvb2x0aXBGb3JOb2RlKHRoaXMuZG9tTm9kZSk7XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vIEZvY3VzXHJcbiAgLy9cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgZm9jdXMoKSB7XHJcbiAgICB0aGlzLl90ZXh0Qm94LmZvY3VzKCk7XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vIEV2ZW50c1xyXG4gIC8vXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIF9vblNlYXJjaCgpIHtcclxuICAgIGlmICh0aGlzLnZhbHVlKSB7XHJcbiAgICAgIHRoaXMub25TZWFyY2goKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB0aGlzLl90ZXh0Qm94ICYmIHRoaXMuX3RleHRCb3guZm9jdXMoKTtcclxuICAgIH1cclxuICB9XHJcbiAgb25TZWFyY2goKSB7IH1cclxufTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKClcclxuXSwgU2VhcmNoVGV4dEJveC5wcm90b3R5cGUsIFwiX3RleHRCb3hcIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKHtcclxuICAgIGRlcGVuZHNPbjogW1wiX3RleHRCb3gudmFsdWVcIl1cclxuICB9KVxyXG5dLCBTZWFyY2hUZXh0Qm94LnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCBudWxsKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKClcclxuXSwgU2VhcmNoVGV4dEJveC5wcm90b3R5cGUsIFwicHJvbXB0XCIsIG51bGwpO1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoKVxyXG5dLCBTZWFyY2hUZXh0Qm94LnByb3RvdHlwZSwgXCJvblNlYXJjaFwiLCBudWxsKTtcclxuU2VhcmNoVGV4dEJveCA9IF9fZGVjb3JhdGUoW1xyXG4gIGkkWCgpXHJcbl0sIFNlYXJjaFRleHRCb3gpO1xuXG5mdW5jdGlvbiBtZWFzdXJlRWxlbWVudEhlaWdodChlbGVtKSB7XHJcbiAgZWxlbS5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcclxuICBhZGRDbGFzcyhlbGVtLCBcImVzcmk0R0VHcmlkQ2VsbF9NZWFzdXJlXCIpO1xyXG4gIGNvbnN0IGhlaWdodCA9IGVsZW0uc2Nyb2xsSGVpZ2h0O1xyXG4gIHJlbW92ZUNsYXNzKGVsZW0sIFwiZXNyaTRHRUdyaWRDZWxsX01lYXN1cmVcIik7XHJcbiAgcmV0dXJuIGhlaWdodDtcclxufVxyXG5mdW5jdGlvbiBjYWxjUm93SGVpZ2h0cyhyb3dIZWlnaHRzLCBncmlkSGVpZ2h0cywgZnJlZUhlaWdodCkge1xyXG4gIGxldCBmbGV4aWJsZVJvd0NvdW50ID0gMDtcclxuICBsZXQgaTtcclxuICBmb3IgKGkgPSAwOyBpIDwgcm93SGVpZ2h0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgc3dpdGNoIChncmlkSGVpZ2h0c1tpXSkge1xyXG4gICAgICBjYXNlIFwiYXV0b1wiOlxyXG4gICAgICAgIGZyZWVIZWlnaHQgLT0gcm93SGVpZ2h0c1tpXTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcInN0cmV0Y2hcIjpcclxuICAgICAgY2FzZSBcInN0YWNrXCI6XHJcbiAgICAgICAgZmxleGlibGVSb3dDb3VudCsrO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH1cclxuICBpZiAoZmxleGlibGVSb3dDb3VudCA+IDEpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihcIk11bHRpcGxlIHJvd3Mgd2l0aCBmbGV4aWJsZSBoZWlnaHRzIGFyZSBub3Qgc3VwcG9ydGVkXCIpO1xyXG4gIH1cclxuICBjb25zdCB5cyA9IFswXTtcclxuICBmb3IgKGkgPSAwOyBpIDwgcm93SGVpZ2h0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgbGV0IGhlaWdodDtcclxuICAgIHN3aXRjaCAoZ3JpZEhlaWdodHNbaV0pIHtcclxuICAgICAgY2FzZSBcImF1dG9cIjpcclxuICAgICAgICBoZWlnaHQgPSByb3dIZWlnaHRzW2ldO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwic3RyZXRjaFwiOlxyXG4gICAgICAgIGhlaWdodCA9IGZyZWVIZWlnaHQ7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJzdGFja1wiOlxyXG4gICAgICAgIGhlaWdodCA9IE1hdGgubWluKGZyZWVIZWlnaHQsIHJvd0hlaWdodHNbaV0pO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgeXMucHVzaCh5c1tpXSArIGhlaWdodCk7XHJcbiAgfVxyXG4gIHJldHVybiB5cztcclxufVxyXG5sZXQgTGF5b3V0R3JpZCA9IGNsYXNzIExheW91dEdyaWQgZXh0ZW5kcyBUZW1wbGF0ZWRXaWRnZXQge1xyXG4gIGNvbnN0cnVjdG9yKHBhcmFtcywgcmVmTm9kZSwgcG9zaXRpb24pIHtcclxuICAgIHN1cGVyKHBhcmFtcywgcmVmTm9kZSwgcG9zaXRpb24pO1xyXG4gICAgdGhpcy5yb3dzID0gW107XHJcbiAgfVxyXG4gIHBvc3RDcmVhdGUoKSB7XHJcbiAgICBhZGRDbGFzcyh0aGlzLmRvbU5vZGUsIFwiZXNyaTRHRUxheW91dEdyaWRcIik7XHJcbiAgfVxyXG4gIHJlc2l6ZSgpIHtcclxuICAgIGNvbnN0IHJvd0hlaWdodHMgPSBbMTA2XTsgLy8gRml4ZWQgaGVpZ2h0IGZvciBmaXJzdCByb3dcclxuICAgIGxldCBpLCBjaGlsZDtcclxuICAgIGZvciAoaSA9IDE7IGkgPCB0aGlzLnJvd3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgcm93SGVpZ2h0cy5wdXNoKDApO1xyXG4gICAgfVxyXG4gICAgY29uc3QgY2hpbGRyZW4gPSB0aGlzLl9nZXRDaGlsZHJlbigpO1xyXG4gICAgYWRkQ2xhc3ModGhpcy5kb21Ob2RlLCBcImVzcmk0R0VHcmlkX01lYXN1cmVcIik7XHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgY2hpbGQgPSBjaGlsZHJlbltpXTtcclxuICAgICAgY29uc3QgaGVpZ2h0ID0gbWVhc3VyZUVsZW1lbnRIZWlnaHQoY2hpbGQpO1xyXG4gICAgICBpZiAoaGVpZ2h0ID4gcm93SGVpZ2h0c1tpXSkge1xyXG4gICAgICAgIHJvd0hlaWdodHNbaV0gPSBoZWlnaHQ7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IGZyZWVIZWlnaHQgPSBnZXRDb250ZW50Qm94KHRoaXMuZG9tTm9kZSkuaDtcclxuICAgIHJlbW92ZUNsYXNzKHRoaXMuZG9tTm9kZSwgXCJlc3JpNEdFR3JpZF9NZWFzdXJlXCIpO1xyXG4gICAgY29uc3QgeXMgPSBjYWxjUm93SGVpZ2h0cyhyb3dIZWlnaHRzLCB0aGlzLnJvd3MsIGZyZWVIZWlnaHQpO1xyXG4gICAgZm9yIChpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGNoaWxkID0gY2hpbGRyZW5baV07XHJcbiAgICAgIC8vIHBvc2l0aW9uICYgcmVzaXplXHJcbiAgICAgIGNoaWxkLnN0eWxlLnRvcCA9IHlzW2ldICsgXCJweFwiO1xyXG4gICAgICBjaGlsZC5zdHlsZS5oZWlnaHQgPSB5c1tpICsgMV0gLSB5c1tpXSArIFwicHhcIjtcclxuICAgIH1cclxuICAgIC8vIHByb3ZpZGVyIHRoZSBmaWxsZXIgbm9kZSB0byBmb3JjZSB0aGUgY29ycmVjdCBoZWlnaHRcclxuICAgIGlmICghdGhpcy5fZmlsbGVyKSB7XHJcbiAgICAgIHRoaXMuX2ZpbGxlciA9IGNyZWF0ZShcImRpdlwiLCBudWxsLCB0aGlzLmRvbU5vZGUsIFwiZmlyc3RcIik7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9maWxsZXIuc3R5bGUuaGVpZ2h0ID0geXNbeXMubGVuZ3RoIC0gMl0gKyBcInB4XCI7XHJcbiAgfVxyXG4gIF9nZXRDaGlsZHJlbigpIHtcclxuICAgIGNvbnN0IGNoaWxkcmVuID0gW107XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZG9tTm9kZS5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICBpZiAodGhpcy5kb21Ob2RlLmNoaWxkcmVuW2ldICE9PSB0aGlzLl9maWxsZXIpIHtcclxuICAgICAgICBjaGlsZHJlbi5wdXNoKHRoaXMuZG9tTm9kZS5jaGlsZHJlbltpXSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBjaGlsZHJlbjtcclxuICB9XHJcbn07XHJcbl9fZGVjb3JhdGUoW1xyXG4gIHkkcigpXHJcbl0sIExheW91dEdyaWQucHJvdG90eXBlLCBcInJvd3NcIiwgdm9pZCAwKTtcclxuTGF5b3V0R3JpZCA9IF9fZGVjb3JhdGUoW1xyXG4gIGkkWCgpXHJcbl0sIExheW91dEdyaWQpO1xuXG5sZXQgV2l6YXJkUGFnZSA9IGNsYXNzIFdpemFyZFBhZ2UgZXh0ZW5kcyBMYXlvdXRHcmlkIHtcclxuICBzZXQgcGFnZUlzQWN0aXZlKF92YWx1ZSkge1xyXG4gICAgLy8gbm90IGltcGxlbWVudGVkXHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vIEdldHRlcnMgJiBzZXR0ZXJzXHJcbiAgLy9cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy8gU1RBQ0tJTkdcclxuICBzZXQgc3RhY2tpbmcoc3RhY2tpbmcpIHtcclxuICAgIHN3aXRjaCAoc3RhY2tpbmcpIHtcclxuICAgICAgY2FzZSBcInN0cmV0Y2hcIjpcclxuICAgICAgICB0aGlzLnJvd3NbMV0gPSBzdGFja2luZztcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcInN0YWNrXCI6XHJcbiAgICAgICAgdGhpcy5yb3dzWzFdID0gc3RhY2tpbmc7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vIEluaXRpYWxpemF0aW9uXHJcbiAgLy9cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgY29uc3RydWN0b3IocGFyYW1zLCByZWZOb2RlLCBwb3NpdGlvbikge1xyXG4gICAgc3VwZXIocGFyYW1zLCByZWZOb2RlLCBwb3NpdGlvbik7XHJcbiAgICB0aGlzLnJvd3MgPSBbXCJhdXRvXCIsIFwiYXV0b1wiLCBcImF1dG9cIl07XHJcbiAgfVxyXG4gIHBvc3RDcmVhdGUoKSB7XHJcbiAgICBzdXBlci5wb3N0Q3JlYXRlKCk7XHJcbiAgICB0aGlzLl9hZGRCdXR0b25zKCk7XHJcbiAgfVxyXG4gIF9hZGRCdXR0b25zKCkge1xyXG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICB0aGlzLl9idXR0b25JbmZvcyA9IFtdO1xyXG4gICAgZnVuY3Rpb24gYWRkQnV0dG9uKHR5cGUpIHtcclxuICAgICAgbGV0IGxhYmVsID0gc2VsZlt0eXBlICsgXCJCdXR0b25cIl07XHJcbiAgICAgIGlmIChsYWJlbCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgIGxhYmVsID0gZ2V0R0VNZXNzYWdlcyhcIkRhdGFCcm93c2VyXCIpLldpemFyZEJ1dHRvbnNbdHlwZV07XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGxhYmVsKSB7XHJcbiAgICAgICAgY29uc3QgaW5mbyA9IHtcclxuICAgICAgICAgIGlkOiB0eXBlLFxyXG4gICAgICAgICAgbGFiZWwsXHJcbiAgICAgICAgICBvbkNsaWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICFpbmZvLmRpc2FibGVkICYmIHNlbGYuZW1pdCh0eXBlKTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBub2RlOiBudWxsLFxyXG4gICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlXHJcbiAgICAgICAgfTtcclxuICAgICAgICBzZWxmLl9idXR0b25JbmZvcy5wdXNoKGluZm8pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBBZGQgYnV0dG9ucyBpbiB0aGUgcmV2ZXJzZSBvcmRlciBiZWNhdXNlIHRoZXkgd2lsbCBiZSBmbG9hdGVkIHRvIHRoZSBlbmQgb2YgbGluZVxyXG4gICAgYWRkQnV0dG9uKFwiY2FuY2VsXCIpO1xyXG4gICAgYWRkQnV0dG9uKFwiYXBwbHlcIik7XHJcbiAgICBhZGRCdXR0b24oXCJiYWNrXCIpO1xyXG4gICAgaWYgKHRoaXMuX2J1dHRvbkluZm9zLmxlbmd0aCkge1xyXG4gICAgICB0aGlzLl9hZGRCdXR0b25zUGFuZSgpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodGhpcy5fYnV0dG9uc05vZGUpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uc05vZGUuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgfVxyXG4gIH1cclxuICBfYWRkQnV0dG9uc1BhbmUoKSB7XHJcbiAgICBpZiAoIXRoaXMuX2J1dHRvbnNOb2RlKSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbnNOb2RlID0gY3JlYXRlKFwiZGl2XCIsIHsgY2xhc3M6IFwiZXNyaTRHRVdpemFyZF9CdXR0b25zXCIgfSwgdGhpcy5kb21Ob2RlLmNoaWxkcmVuWzJdIC8qIGJvdHRvbSBwYW5lLCBtdXN0IGJlIHByZXNlbnQgaW4gdGhlIHdpZGdldCAqLyk7XHJcbiAgICB9XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2J1dHRvbkluZm9zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGJ1dHRvbkluZm8gPSB0aGlzLl9idXR0b25JbmZvc1tpXTtcclxuICAgICAgY29uc3QgYnV0dG9uID0gY3JlYXRlKFwiZGl2XCIsIHsgY2xhc3M6IFwiZXNyaTRHRVdpemFyZF9CdXR0b25cIiwgdGV4dENvbnRlbnQ6IGJ1dHRvbkluZm8ubGFiZWwgfHwgXCJcIiB9LCB0aGlzLl9idXR0b25zTm9kZSk7XHJcbiAgICAgIGlmIChidXR0b25JbmZvLm9uQ2xpY2spIHtcclxuICAgICAgICBvbihidXR0b24sIFwiY2xpY2tcIiwgYnV0dG9uSW5mby5vbkNsaWNrKTtcclxuICAgICAgfVxyXG4gICAgICBidXR0b25JbmZvLm5vZGUgPSBidXR0b247XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vIFdvcmsgd2l0aCBidXR0b25zXHJcbiAgLy9cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgX3NldEJ1dHRvbkVuYWJsZWQoYnV0dG9uSWQsIHZhbHVlKSB7XHJcbiAgICBjb25zdCBpbmZvID0gdGhpcy5fYnV0dG9uSW5mb3MuZmlsdGVyKChpbmZvKSA9PiBpbmZvLmlkID09PSBidXR0b25JZClbMF07XHJcbiAgICBpZiAoaW5mbykge1xyXG4gICAgICBpbmZvLmRpc2FibGVkID0gIXZhbHVlO1xyXG4gICAgICB0b2dnbGVDbGFzcyhpbmZvLm5vZGUsIFwiZGlzYWJsZWRcIiwgaW5mby5kaXNhYmxlZCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vIFByb2dyZXNzXHJcbiAgLy9cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLyoqXHJcbiAgICogU2hvd3MgcHJvZ3Jlc3MgaW4gdGhlIHByb2dyZXNzRGl2IG9mIHRoZSBwYWdlLiBXcmFwcyB0aGUgcmVzdWx0IGluIGEgcHJvbWlzZS5cclxuICAgKi9cclxuICBfc2hvd1Byb2dyZXNzKHByb21pc2UpIHtcclxuICAgIHJldHVybiB3aGVuKHNob3dQcm9ncmVzc1Byb21pc2UodGhpcy5fcHJvZ3Jlc3NEaXYgfHwgdGhpcy5kb21Ob2RlLCBwcm9taXNlKSk7XHJcbiAgfVxyXG59O1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoKVxyXG5dLCBXaXphcmRQYWdlLnByb3RvdHlwZSwgXCJyb3dzXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gIHkkcigpXHJcbl0sIFdpemFyZFBhZ2UucHJvdG90eXBlLCBcInBhZ2VJc0FjdGl2ZVwiLCBudWxsKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKClcclxuXSwgV2l6YXJkUGFnZS5wcm90b3R5cGUsIFwiYmFja0J1dHRvblwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoKVxyXG5dLCBXaXphcmRQYWdlLnByb3RvdHlwZSwgXCJhcHBseUJ1dHRvblwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoKVxyXG5dLCBXaXphcmRQYWdlLnByb3RvdHlwZSwgXCJjYW5jZWxCdXR0b25cIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKClcclxuXSwgV2l6YXJkUGFnZS5wcm90b3R5cGUsIFwic3RhY2tpbmdcIiwgbnVsbCk7XHJcbldpemFyZFBhZ2UgPSBfX2RlY29yYXRlKFtcclxuICBpJFgoKVxyXG5dLCBXaXphcmRQYWdlKTtcblxuY29uc3QgbmxzJDMgPSAoKSA9PiBnZXRHRU1lc3NhZ2VzKFwiRGF0YUJyb3dzZXJcIikuRGF0YUNhdGVnb3JpZXNQYWdlO1xyXG5sZXQgRGF0YUNhdGVnb3JpZXNQYWdlID0gY2xhc3MgRGF0YUNhdGVnb3JpZXNQYWdlIGV4dGVuZHMgV2l6YXJkUGFnZSB7XHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vXHJcbiAgLy8gR2V0dGVycyAmIHNldHRlcnNcclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvLyBBQ1RJVkFURSBQQUdFXHJcbiAgc2V0IHBhZ2VJc0FjdGl2ZSh2YWx1ZSkge1xyXG4gICAgdGhpcy5fc2V0KFwicGFnZUlzQWN0aXZlXCIsIHZhbHVlKTtcclxuICAgIHRoaXMuX3NlYXJjaFRleHRCb3ggJiYgKHRoaXMuX3NlYXJjaFRleHRCb3gudmFsdWUgPSBcIlwiKTtcclxuICAgIC8vIFN5bmNocm9uaXplIHRoZSBwYWdlIHdpdGggdGhlIGN1cnJlbnQgY291bnRyeSBvbiBhY3RpdmF0aW9uXHJcbiAgICB2YWx1ZSAmJiB0aGlzLmNoYW5nZUNvdW50cnkodGhpcy5tYW5hZ2VyLnZhcmlhYmxlUXVlcnkuY291bnRyeUlEKTtcclxuICB9XHJcbiAgLy8gSVRFTVNcclxuICBzZXQgaXRlbXMoaXRlbXMpIHtcclxuICAgIHRoaXMuX3BhZ2luYXRpb24uaXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMucmVzaXplKCk7XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vIEluaXRpYWxpemF0aW9uXHJcbiAgLy9cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgY29uc3RydWN0b3IocGFyYW1zLCByZWZOb2RlLCBwb3NpdGlvbikge1xyXG4gICAgc3VwZXIocGFyYW1zLCByZWZOb2RlLCBwb3NpdGlvbik7XHJcbiAgICB0aGlzLl90ZW1wbGF0ZVN0cmluZyA9IGBcclxuICA8ZGl2IGNsYXNzPVwiRGF0YUNhdGVnb3JpZXNQYWdlXCI+XHJcbiAgICA8ZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzPVwiRGF0YUNhdGVnb3JpZXNQYWdlX0NvdW50cnlcIiBkYXRhLWF0dGFjaC1wb2ludD1cIl9kaXZDb3VudHJ5U2VsZWN0XCI+PC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJEYXRhQ2F0ZWdvcmllc1BhZ2VfU2VhcmNoXCIgZGF0YS1hdHRhY2gtcG9pbnQ9XCJfdHhiU2VhcmNoRGl2XCI+PC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICAgIDxkaXY+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJEYXRhQ2F0ZWdvcmllc1BhZ2VfUGFnaW5hdGlvblwiPlxyXG4gICAgICAgIDxkaXYgZGF0YS1hdHRhY2gtcG9pbnQ9XCJfcGFnaW5hdGlvbkRpdlwiPjwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBkYXRhLWF0dGFjaC1wb2ludD1cIl9wcm9ncmVzc0RpdlwiPjwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgICA8ZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzPVwiZXNyaTRHRVdpemFyZF9MaW5rIERhdGFDYXRlZ29yaWVzUGFnZV9TaG93RmF2b3JpdGVzXCIgZGF0YS1hdHRhY2gtcG9pbnQ9XCJfc3BuU2hvd0Zhdm9yaXRlc1wiPjwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgPC9kaXY+YDtcclxuICAgIC8qKlxyXG4gICAgICogQ291bnRyeSBib3ggd2lkZ2V0IG9yIEJvb2xlYW4gKGRlZmF1bHQgY291bnRyeSBib3ggd2lsbCBiZSBjcmVhdGVkKS5cclxuICAgICAqL1xyXG4gICAgdGhpcy5jb3VudHJ5Qm94ID0gdHJ1ZTtcclxuICAgIHRoaXMuYWxsb3dIaWVyYXJjaGllcyA9IGZhbHNlO1xyXG4gICAgdGhpcy5faW5uZXJDaGFuZ2UgPSBmYWxzZTtcclxuICB9XHJcbiAgcG9zdENyZWF0ZSgpIHtcclxuICAgIHN1cGVyLnBvc3RDcmVhdGUoKTtcclxuICAgIC8vIENPVU5UUllcclxuICAgIGlmICh0aGlzLmNvdW50cnlCb3ggJiYgdGhpcy5fZ2V0VmFyaWFibGVTdG9yZSgpLmNvdW50cmllcyAmJiB0aGlzLl9kaXZDb3VudHJ5U2VsZWN0KSB7XHJcbiAgICAgIHRoaXMuX2NvdW50cnlTZWxlY3QgPVxyXG4gICAgICAgIHRoaXMuY291bnRyeUJveCA9PT0gdHJ1ZVxyXG4gICAgICAgICAgPyBuZXcgQ291bnRyeVNlbGVjdCgpXHJcbiAgICAgICAgICA6IHR5cGVvZiB0aGlzLmNvdW50cnlCb3ggPT09IFwib2JqZWN0XCIgJiYgdGhpcy5jb3VudHJ5Qm94LmRvbU5vZGVcclxuICAgICAgICAgICAgPyB0aGlzLmNvdW50cnlCb3hcclxuICAgICAgICAgICAgOiBudWxsO1xyXG4gICAgICBpZiAodGhpcy5fY291bnRyeVNlbGVjdCkge1xyXG4gICAgICAgIHRoaXMuX2NvdW50cnlTZWxlY3QuZ2xvYmFsQ291bnRyeUlEID0gdGhpcy5fZ2V0VmFyaWFibGVTdG9yZSgpLmdsb2JhbENvdW50cnlJRDtcclxuICAgICAgICB0aGlzLl9jb3VudHJ5U2VsZWN0LmFsbG93SGllcmFyY2hpZXMgPSB0aGlzLmFsbG93SGllcmFyY2hpZXM7XHJcbiAgICAgICAgdGhpcy5fY291bnRyeVNlbGVjdC5wbGFjZUF0KHRoaXMuX2RpdkNvdW50cnlTZWxlY3QpO1xyXG4gICAgICAgIHRoaXMuX2NvdW50cnlTZWxlY3Qub25DaGFuZ2UgPSAoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLl9jaGFuZ2VDb3VudHJ5KHRoaXMuX2NvdW50cnlTZWxlY3QuZ2V0VmFsdWUoKSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5jb3VudHJ5Qm94ID0gISF0aGlzLl9jb3VudHJ5U2VsZWN0O1xyXG4gICAgaWYgKHRoaXMuX2RpdkNvdW50cnlTZWxlY3QpIHtcclxuICAgICAgdGhpcy5fZGl2Q291bnRyeVNlbGVjdC5zdHlsZS5kaXNwbGF5ID0gdGhpcy5jb3VudHJ5Qm94ID8gXCJcIiA6IFwibm9uZVwiO1xyXG4gICAgfVxyXG4gICAgLy8gU0VBUkNIXHJcbiAgICB0aGlzLl9zZWFyY2hUZXh0Qm94ID0gbmV3IFNlYXJjaFRleHRCb3goe1xyXG4gICAgICBwcm9tcHQ6IG5scyQzKCkuc2VhcmNoLFxyXG4gICAgICBvblNlYXJjaDogdGhpcy5fc2VhcmNoLmJpbmQodGhpcylcclxuICAgIH0pLnBsYWNlQXQodGhpcy5fdHhiU2VhcmNoRGl2KTtcclxuICAgIC8vIFBBR0lOQVRJT05cclxuICAgIHRoaXMuX3BhZ2luYXRpb24gPSBuZXcgUGFnaW5hdGlvbih7XHJcbiAgICAgIGF1dG9DZW50ZXI6IHRydWUsXHJcbiAgICAgIHNjcm9sbEFuaW1hdGlvbjogXCJmYWRlMlwiLFxyXG4gICAgICBjcmVhdGVJdGVtQ29udGFpbmVyOiAoKSA9PiBjcmVhdGVDYXRlZ29yeU5vZGUoKSxcclxuICAgICAgdXBkYXRlSXRlbUNvbnRhaW5lcjogKG5vZGUsIGNhdGVnb3J5KSA9PiB7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlQ2F0ZWdvcnlOb2RlKG5vZGUsIGNhdGVnb3J5KTtcclxuICAgICAgfSxcclxuICAgICAgb25TZWxlY3Q6IHRoaXMuX29uSXRlbUNsaWNrLmJpbmQodGhpcylcclxuICAgIH0pLnBsYWNlQXQodGhpcy5fcGFnaW5hdGlvbkRpdik7XHJcbiAgICAvLyBGQVZPUklURVNcclxuICAgIG9uKHRoaXMuX3NwblNob3dGYXZvcml0ZXMsIFwiY2xpY2tcIiwgdGhpcy5fc2hvd0Zhdm9yaXRlcy5iaW5kKHRoaXMpKTtcclxuICAgIC8vIEFQUExZIEJVVFRPTlxyXG4gICAgdGhpcy5tYW5hZ2VyLndhdGNoKFwic2VsZWN0aW9uXCIsIHRoaXMuX3VwZGF0ZUFwcGx5QnV0dG9uQXZhaWxhYmlsaXR5LmJpbmQodGhpcykpO1xyXG4gICAgdGhpcy5fdXBkYXRlQXBwbHlCdXR0b25BdmFpbGFiaWxpdHkoKTtcclxuICAgIC8vIExvYWQgY291bnRyaWVzICYgY2F0ZWdvcmllc1xyXG4gICAgaWYgKHRoaXMuY291bnRyeUJveCkge1xyXG4gICAgICB3aGVuKHRoaXMuX3Nob3dQcm9ncmVzcyh0aGlzLl9nZXRDb3VudHJpZXMoKSkpLnRoZW4odGhpcy5fb25Db3VudHJpZXNSZXNwb25zZS5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB0aGlzLl9nZXRDYXRlZ29yaWVzKHRydWUpO1xyXG4gICAgfVxyXG4gIH1cclxuICBfdXBkYXRlQXBwbHlCdXR0b25BdmFpbGFiaWxpdHkoKSB7XHJcbiAgICB0aGlzLl9zZXRCdXR0b25FbmFibGVkKFwiYXBwbHlcIiwgISF0aGlzLm1hbmFnZXIuc2VsZWN0aW9uLmxlbmd0aCk7XHJcbiAgfVxyXG4gIF9nZXRWYXJpYWJsZVN0b3JlKCkge1xyXG4gICAgcmV0dXJuIHRoaXMubWFuYWdlci52YXJpYWJsZXM7XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vIFdvcmtpbmcgd2l0aCBjb3VudHJpZXNcclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICBjaGFuZ2VDb3VudHJ5KGNvdW50cnlJRCkge1xyXG4gICAgLy8gbWFrZSBzdXJlIGFzeW5jIG9wZXJhdGlvbnMgZG9uJ3Qgb3ZlcmxhcFxyXG4gICAgcmV0dXJuICh0aGlzLl9jaGFuZ2VDb3VudHJ5UHJvbWlzZSA9IHdoZW4odGhpcy5fY2hhbmdlQ291bnRyeVByb21pc2UpLnRoZW4oKCkgPT4ge1xyXG4gICAgICB0aGlzLl91cGRhdGVGYXZvcml0ZXMoKTtcclxuICAgICAgaWYgKHRoaXMuY291bnRyeUJveCkge1xyXG4gICAgICAgIHJldHVybiB3aGVuKHRoaXMuX2dldENvdW50cmllcygpKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgIHRoaXMuX3NldENvdW50cnkoY291bnRyeUlEKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdGhpcy5fY2hhbmdlQ291bnRyeSh0aGlzLl90b0NvdW50cnlCb3hJRChjb3VudHJ5SUQpKTtcclxuICAgIH0pKTtcclxuICB9XHJcbiAgX2dldENvdW50cmllcygpIHtcclxuICAgIGlmICghdGhpcy5fZ2V0Q291bnRyaWVzUXVlcnkgJiYgdGhpcy5jb3VudHJ5Qm94KSB7XHJcbiAgICAgIHRoaXMuX2dldENvdW50cmllc1F1ZXJ5ID0gd2hlbih0aGlzLl9nZXRWYXJpYWJsZVN0b3JlKCkuY291bnRyaWVzLnF1ZXJ5KCkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuX2dldENvdW50cmllc1F1ZXJ5O1xyXG4gIH1cclxuICBfb25Db3VudHJpZXNSZXNwb25zZShjb3VudHJpZXMpIHtcclxuICAgIHRoaXMuX2NvdW50cnlTZWxlY3Quc2V0Q291bnRyaWVzKGNvdW50cmllcyk7XHJcbiAgICB0aGlzLl9zZXRDb3VudHJ5KHRoaXMubWFuYWdlci52YXJpYWJsZVF1ZXJ5LmNvdW50cnlJRCk7XHJcbiAgfVxyXG4gIC8vIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCB3aGVuIGNvdW50cnlCb3ggcHJlc2VudHMhISFcclxuICAvLyBJdCBjaGFuZ2VzIHNlbGVjdGVkIHZhbHVlIGluIHRoZSBjb3VudHJ5U2VsZWN0IGFuZCBhcHBsaWVzIGNvdW50cnkgY2hhbmdlIGlmIG5lY2Vzc2FyeVxyXG4gIF9zZXRDb3VudHJ5KGNvdW50cnlJRCkge1xyXG4gICAgY29uc3QgZnVsbFZhbHVlID0gdGhpcy5fdG9Db3VudHJ5Qm94SUQoY291bnRyeUlEKTtcclxuICAgIGlmICh0aGlzLl9mdWxsVmFsdWVUb1FOYW1lKGZ1bGxWYWx1ZSkgIT09IHRoaXMuX2Z1bGxWYWx1ZVRvUU5hbWUodGhpcy5fY291bnRyeVNlbGVjdC5nZXRWYWx1ZSgpKSkge1xyXG4gICAgICB0aGlzLl9pbm5lckNoYW5nZSA9IHRydWU7XHJcbiAgICAgIHRoaXMuX2NvdW50cnlTZWxlY3Quc2V0VmFsdWUoZnVsbFZhbHVlKTtcclxuICAgICAgdGhpcy5faW5uZXJDaGFuZ2UgPSBmYWxzZTtcclxuICAgICAgcmV0dXJuIHRoaXMuX2NoYW5nZUNvdW50cnkodGhpcy5fY291bnRyeVNlbGVjdC5nZXRWYWx1ZSgpKTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuICBfY2hhbmdlQ291bnRyeShjb3VudHJ5RnVsbFZhbHVlKSB7XHJcbiAgICBpZiAodGhpcy5faW5uZXJDaGFuZ2UgfHwgIXRoaXMuZG9tTm9kZSAvKiBBbHJlYWR5IGRlc3Ryb3llZCAqLykge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGNvbnN0IGNvdW50cnlJRCA9IHRoaXMuX3RvQ291bnRyeUlEKGNvdW50cnlGdWxsVmFsdWUpO1xyXG4gICAgdGhpcy5vbkNvdW50cnlDaGFuZ2UoY291bnRyeUlEKTtcclxuICAgIGNvbnN0IHByZXNlcnZlU2VsZWN0aW9uID0gIXRoaXMuX3BhZ2luYXRpb25Db3VudHJ5SUQgLyogTG9hZGVkIGZpcnN0IHRpbWUgKi8gfHxcclxuICAgICAgdGhpcy5fcGFnaW5hdGlvbkNvdW50cnlJRCA9PT0gdGhpcy5fZnVsbFZhbHVlVG9RTmFtZShjb3VudHJ5RnVsbFZhbHVlKTtcclxuICAgIHRoaXMuX3BhZ2luYXRpb25Db3VudHJ5SUQgPSB0aGlzLl9mdWxsVmFsdWVUb1FOYW1lKGNvdW50cnlGdWxsVmFsdWUpO1xyXG4gICAgaWYgKCFwcmVzZXJ2ZVNlbGVjdGlvbikge1xyXG4gICAgICB0aGlzLm1hbmFnZXIudmFyaWFibGVRdWVyeSA9IHsgY291bnRyeUlEIH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5fZ2V0Q2F0ZWdvcmllcyhwcmVzZXJ2ZVNlbGVjdGlvbik7XHJcbiAgfVxyXG4gIF90b0NvdW50cnlCb3hJRChjb3VudHJ5SUQpIHtcclxuICAgIHJldHVybiB0aGlzLl9xTmFtZVRvRnVsbE5hbWUoY291bnRyeUlEIHx8IHRoaXMuX2dldFZhcmlhYmxlU3RvcmUoKS5nbG9iYWxDb3VudHJ5SUQpIHx8IG51bGw7XHJcbiAgfVxyXG4gIF90b0NvdW50cnlJRChjb3VudHJ5RnVsbFZhbHVlKSB7XHJcbiAgICByZXR1cm4gY291bnRyeUZ1bGxWYWx1ZS5jb3VudHJ5SUQgPT09IHRoaXMuX2dldFZhcmlhYmxlU3RvcmUoKS5nbG9iYWxDb3VudHJ5SURcclxuICAgICAgPyBudWxsXHJcbiAgICAgIDogdGhpcy5fZnVsbFZhbHVlVG9RTmFtZShjb3VudHJ5RnVsbFZhbHVlKTtcclxuICB9XHJcbiAgX2Z1bGxWYWx1ZVRvUU5hbWUoY291bnRyeUZ1bGxWYWx1ZSkge1xyXG4gICAgcmV0dXJuIGNvdW50cnlGdWxsVmFsdWUuY291bnRyeUlEICsgKGNvdW50cnlGdWxsVmFsdWUuaGllcmFyY2h5SUQgPyBcIi9cIiArIGNvdW50cnlGdWxsVmFsdWUuaGllcmFyY2h5SUQgOiBcIlwiKTtcclxuICB9XHJcbiAgX3FOYW1lVG9GdWxsTmFtZShjb3VudHJ5SUQpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGNvdW50cnlJRDogY291bnRyeUlELnNwbGl0KFwiL1wiKVswXSxcclxuICAgICAgaGllcmFyY2h5SUQ6IGNvdW50cnlJRC5zcGxpdChcIi9cIilbMV0gfHwgbnVsbFxyXG4gICAgfTtcclxuICB9XHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vXHJcbiAgLy8gV29ya2luZyB3aXRoIGNhdGVnb3JpZXMgJiBmYXZvcml0ZXNcclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICBfZ2V0Q2F0ZWdvcmllcyhwcmVzZXJ2ZVNlbGVjdGlvbikge1xyXG4gICAgbGV0IGNhdGVnb3J5UGFnZUluZGV4ID0gMDtcclxuICAgIGlmIChwcmVzZXJ2ZVNlbGVjdGlvbikge1xyXG4gICAgICAvLyBzYXZlIHRoZSBwcmV2aW91cyBwYWdpbmF0aW9uIGluZGV4XHJcbiAgICAgIGNhdGVnb3J5UGFnZUluZGV4ID0gdGhpcy5fcGFnaW5hdGlvbi5jdXJyZW50UGFnZTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB0aGlzLm1hbmFnZXIuc2VsZWN0aW9uID0gW107XHJcbiAgICB9XHJcbiAgICB0aGlzLm1hbmFnZXIuY2F0ZWdvcnlQYWdlSW5kZXggPSBjYXRlZ29yeVBhZ2VJbmRleDtcclxuICAgIHJldHVybiB0aGlzLl9zaG93UHJvZ3Jlc3ModGhpcy5tYW5hZ2VyLmdldENhdGVnb3JpZXMoKS50aGVuKChjYXRlZ29yaWVzKSA9PiB7XHJcbiAgICAgIHRoaXMuaXRlbXMgPSBjYXRlZ29yaWVzO1xyXG4gICAgICB0aGlzLl9wYWdpbmF0aW9uQ291bnRyeUlEID0gdGhpcy5fZnVsbFZhbHVlVG9RTmFtZSh0aGlzLl9jb3VudHJ5U2VsZWN0LmdldFZhbHVlKCkpOyAvLyB3aWxsIGNhc2UgdG8gdGhlIGdsb2JhbCBpZCBpZiBuZWVkZWRcclxuICAgICAgaWYgKHByZXNlcnZlU2VsZWN0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5fcGFnaW5hdGlvbi5zZXRDdXJyZW50UGFnZU5vQW5pbWF0aW9uKHRoaXMubWFuYWdlci5jYXRlZ29yeVBhZ2VJbmRleCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHdoZW4odGhpcy5fZ2V0VmFyaWFibGVTdG9yZSgpLnN5bmNocm9uaXplKCkpLnRoZW4odGhpcy5fdXBkYXRlRmF2b3JpdGVzLmJpbmQodGhpcykpO1xyXG4gICAgfSkpO1xyXG4gIH1cclxuICBfdXBkYXRlQ2F0ZWdvcnlOb2RlKG5vZGUsIGNhdGVnb3J5KSB7XHJcbiAgICB1cGRhdGVDYXRlZ29yeU5vZGUobm9kZSwgY2F0ZWdvcnkpO1xyXG4gIH1cclxuICBfdXBkYXRlRmF2b3JpdGVzKCkge1xyXG4gICAgaWYgKHRoaXMuX3NwblNob3dGYXZvcml0ZXMpIHtcclxuICAgICAgdGhpcy5fc3BuU2hvd0Zhdm9yaXRlcy50ZXh0Q29udGVudCA9XHJcbiAgICAgICAgdGhpcy5fZ2V0VmFyaWFibGVTdG9yZSgpLmZhdm9yaXRlcyAmJiB0aGlzLl9nZXRWYXJpYWJsZVN0b3JlKCkuZmF2b3JpdGVzLmdldEl0ZW1zQ291bnQoKVxyXG4gICAgICAgICAgPyBubHMkMygpLnNob3dGYXZvcml0ZXNcclxuICAgICAgICAgIDogXCJcIjtcclxuICAgIH1cclxuICB9XHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vXHJcbiAgLy8gUmVzaXplXHJcbiAgLy9cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgcmVzaXplKCkge1xyXG4gICAgc3VwZXIucmVzaXplKCk7XHJcbiAgICB0aGlzLl9wYWdpbmF0aW9uLnJlc2l6ZSgpO1xyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyBIYW5kbGUgZXZlbnRzXHJcbiAgLy9cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgX29uSXRlbUNsaWNrKG5vZGUpIHtcclxuICAgIGNvbnN0IGNsb25lID0gbm9kZS5pY29uLmNsb25lTm9kZSh0cnVlKTtcclxuICAgIHJlbW92ZUNsYXNzKGNsb25lLCBcIkRhdGFDYXRlZ29yeUl0ZW1JY29uXCIpO1xyXG4gICAgdGhpcy5tYW5hZ2VyLmZseUFuaW0uZmx5KG5vZGUuaWNvbiwgXCJCcmVhZGNydW1iX1NlbGVjdENhdGVnb3J5XCIsIG51bGwsIGNsb25lKTtcclxuICAgIHRoaXMubWFuYWdlci52YXJpYWJsZVF1ZXJ5LmNhdGVnb3J5SUQgPSBjbG9uZS5nZXRBdHRyaWJ1dGUoXCJjYXRlZ29yeUlkXCIpO1xyXG4gICAgdGhpcy5vblNlbGVjdCgpO1xyXG4gIH1cclxuICBvblNlbGVjdCgpIHsgfVxyXG4gIF9zaG93RmF2b3JpdGVzKCkge1xyXG4gICAgdGhpcy5tYW5hZ2VyLnZhcmlhYmxlUXVlcnkuZmF2b3JpdGVzID0gdHJ1ZTtcclxuICAgIHRoaXMub25TZWFyY2goKTtcclxuICB9XHJcbiAgX3NlYXJjaCgpIHtcclxuICAgIGNvbnN0IGtleSA9IHRoaXMuX3NlYXJjaFRleHRCb3gudmFsdWU7XHJcbiAgICBpZiAoIWtleSkge1xyXG4gICAgICB0aGlzLl9zZWFyY2hUZXh0Qm94LnZhbHVlID0gXCJcIjtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5tYW5hZ2VyLnZhcmlhYmxlUXVlcnkuc2VhcmNoU3RyaW5nID0ga2V5O1xyXG4gICAgdGhpcy5fc2hvd1Byb2dyZXNzKHRoaXMubWFuYWdlci5xdWVyeVZhcmlhYmxlcygpLnRoZW4oKHJlc3VsdHMpID0+IHtcclxuICAgICAgaWYgKHJlc3VsdHMubGVuZ3RoKSB7XHJcbiAgICAgICAgdGhpcy5fb25TZWFyY2gocmVzdWx0cyk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMubWFuYWdlci52YXJpYWJsZVF1ZXJ5LnNlYXJjaFN0cmluZztcclxuICAgICAgICB0aGlzLl9zZWFyY2hUZXh0Qm94LnNob3dUb29sdGlwKHN1YnN0aXR1dGVTdHJpbmcobmxzJDMoKS5ub1Jlc3VsdHMsIHsgc2VhY2hLZXk6IGtleSB9KSk7XHJcbiAgICAgICAgLy8gTWFpbnRhaW5pbmcgZm9jdXMgb24gdGhlIHNlYXJjaCBib3hcclxuICAgICAgICB0aGlzLl9zZWFyY2hUZXh0Qm94LmZvY3VzKCk7XHJcbiAgICAgIH1cclxuICAgIH0pKTtcclxuICB9XHJcbiAgX29uU2VhcmNoKHJlc3VsdHMpIHtcclxuICAgIHRoaXMub25TZWFyY2gocmVzdWx0cyk7XHJcbiAgfVxyXG4gIG9uU2VhcmNoKF9yZXN1bHRzKSB7IH1cclxuICBvbkNvdW50cnlDaGFuZ2UoX2NvdW50cnlJRCkgeyB9XHJcbn07XHJcbl9fZGVjb3JhdGUoW1xyXG4gIHkkcigpXHJcbl0sIERhdGFDYXRlZ29yaWVzUGFnZS5wcm90b3R5cGUsIFwibWFuYWdlclwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoKVxyXG5dLCBEYXRhQ2F0ZWdvcmllc1BhZ2UucHJvdG90eXBlLCBcImNvdW50cnlCb3hcIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKClcclxuXSwgRGF0YUNhdGVnb3JpZXNQYWdlLnByb3RvdHlwZSwgXCJhbGxvd0hpZXJhcmNoaWVzXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gIHkkcigpXHJcbl0sIERhdGFDYXRlZ29yaWVzUGFnZS5wcm90b3R5cGUsIFwicGFnZUlzQWN0aXZlXCIsIG51bGwpO1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoKVxyXG5dLCBEYXRhQ2F0ZWdvcmllc1BhZ2UucHJvdG90eXBlLCBcIml0ZW1zXCIsIG51bGwpO1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoKVxyXG5dLCBEYXRhQ2F0ZWdvcmllc1BhZ2UucHJvdG90eXBlLCBcIm9uU2VsZWN0XCIsIG51bGwpO1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoKVxyXG5dLCBEYXRhQ2F0ZWdvcmllc1BhZ2UucHJvdG90eXBlLCBcIm9uU2VhcmNoXCIsIG51bGwpO1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoKVxyXG5dLCBEYXRhQ2F0ZWdvcmllc1BhZ2UucHJvdG90eXBlLCBcIm9uQ291bnRyeUNoYW5nZVwiLCBudWxsKTtcclxuRGF0YUNhdGVnb3JpZXNQYWdlID0gX19kZWNvcmF0ZShbXHJcbiAgaSRYKClcclxuXSwgRGF0YUNhdGVnb3JpZXNQYWdlKTtcblxuY29uc3QgbmxzJDIgPSBnZXRHRU1lc3NhZ2VzKFwiRGF0YUJyb3dzZXJcIikuRGF0YUNvbGxlY3Rpb25zUGFnZTtcclxubGV0IERhdGFDb2xsZWN0aW9uc1BhZ2UgPSBjbGFzcyBEYXRhQ29sbGVjdGlvbnNQYWdlIGV4dGVuZHMgV2l6YXJkUGFnZSB7XHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vXHJcbiAgLy8gR2V0dGVycyAmIHNldHRlcnNcclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvLyBBQ1RJVkFURVxyXG4gIHNldCBwYWdlSXNBY3RpdmUodmFsdWUpIHtcclxuICAgIHRoaXMuX3NldChcInBhZ2VJc0FjdGl2ZVwiLCB2YWx1ZSk7XHJcbiAgICBpZiAodGhpcy5fZ3JpZCkge1xyXG4gICAgICB0aGlzLl9ncmlkLnNldFZhcmlhYmxlcyhbXSk7XHJcbiAgICAgIHRoaXMuX3BhZ2luYXRpb24uaXRlbXMgPSBbXTtcclxuICAgICAgdGhpcy5fc2VhcmNoVGV4dEJveC52YWx1ZSA9IFwiXCI7XHJcbiAgICB9XHJcbiAgICB2YWx1ZSAmJiB0aGlzLl9xdWVyeVNlbGVjdGVkQ2F0ZWdvcnkoKTtcclxuICB9XHJcbiAgLy8gSVRFTVNcclxuICBzZXQgaXRlbXMoaXRlbXMpIHtcclxuICAgIHRoaXMuX3BhZ2luYXRpb24uaXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMucmVzaXplKCk7XHJcbiAgICBpZiAodGhpcy5sYXN0RGF0YUNvbGxlY3Rpb25JRCkge1xyXG4gICAgICBjb25zdCBpdGVtcyA9IHRoaXMuX3BhZ2luYXRpb24uaXRlbXM7XHJcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBpdGVtcy5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICBjb25zdCBpdGVtID0gaXRlbXNbaW5kZXhdO1xyXG4gICAgICAgIGlmIChpdGVtLmlkID09PSB0aGlzLmxhc3REYXRhQ29sbGVjdGlvbklEKSB7XHJcbiAgICAgICAgICB0aGlzLl9wYWdpbmF0aW9uLnNlbGVjdFBhZ2VCeUl0ZW1JbmRleChpbmRleCwgdHJ1ZSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5sYXN0RGF0YUNvbGxlY3Rpb25JRCA9IG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vIEluaXRpYWxpemF0aW9uXHJcbiAgLy9cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgY29uc3RydWN0b3IocGFyYW1zLCByZWZOb2RlLCBwb3NpdGlvbikge1xyXG4gICAgc3VwZXIocGFyYW1zLCByZWZOb2RlLCBwb3NpdGlvbik7XHJcbiAgICB0aGlzLl90ZW1wbGF0ZVN0cmluZyA9IGBcclxuICA8ZGl2IGNsYXNzPVwiRGF0YUNvbGxlY3Rpb25zUGFnZVwiPlxyXG4gICAgPGRpdj5cclxuICAgICAgPGRpdiBjbGFzcz1cIkJyZWFkY3J1bWJIZWlnaHRcIj48L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzcz1cIkRhdGFDb2xsZWN0aW9uc1BhZ2VfUGFuZWwgRGF0YUNvbGxlY3Rpb25zUGFnZV9QYW5lbFRvcFwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJlc3JpNEdFRGF0YUJyb3dzZXJWYXJIZWFkZXIgRGF0YUNvbGxlY3Rpb25zUGFnZV9IZWFkZXJcIiBkYXRhLWF0dGFjaC1wb2ludD1cIl9jYXRlZ29yeU5hbWVcIj48L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiRGF0YUNvbGxlY3Rpb25zUGFnZV9TZWFyY2hcIiBkYXRhLWF0dGFjaC1wb2ludD1cIl90eGJTZWFyY2hEaXZcIj48L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiZXNyaTRHRURhdGFCcm93c2VyVmFySGVhZGVyIERhdGFDb2xsZWN0aW9uc1BhZ2VfSGVhZGVyXCI+XHJcbiAgICAgICAgICAke25scyQyLm1hcFBvcFZhcn1cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGRhdGEtYXR0YWNoLXBvaW50PVwiX2RpdlZhcmlhYmxlc1wiIGNsYXNzPVwiRGF0YUNvbGxlY3Rpb25zUGFnZV9Qb3B1bGFyVmFyaWFibGVzXCI+PC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImVzcmk0R0VEYXRhQnJvd3NlclZhckhlYWRlciBEYXRhQ29sbGVjdGlvbnNQYWdlX0hlYWRlclwiPlxyXG4gICAgICAgICAgJHtubHMkMi5rZWVwQnJvd3NlfVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gICAgPGRpdiBjbGFzcz1cIkRhdGFDb2xsZWN0aW9uc1BhZ2VfQ29udGVudFBhbmVfRGF0YUNvbGxlY3Rpb25Db250YWluZXJcIj5cclxuICAgICAgPGRpdiBjbGFzcz1cIkRhdGFDb2xsZWN0aW9uc1BhZ2VfRGF0YUNvbGxlY3Rpb25Db250YWluZXJcIj5cclxuICAgICAgICA8ZGl2IGRhdGEtYXR0YWNoLXBvaW50PVwiX3BhZ2luYXRpb25EaXZcIj48L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgZGF0YS1hdHRhY2gtcG9pbnQ9XCJfcHJvZ3Jlc3NEaXZcIj48L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gICAgPGRpdiBjbGFzcz1cIkRhdGFDb2xsZWN0aW9uc1BhZ2VCb3R0b21Db250YWluZXJcIj5cclxuICAgICAgPGRpdiBjbGFzcz1cIkRhdGFDb2xsZWN0aW9uc1BhZ2VfUGFuZWwgRGF0YUNvbGxlY3Rpb25zUGFnZV9QYW5lbEJvdHRvbVwiPlxyXG4gICAgICAgIDxkaXYgZGF0YS1hdHRhY2gtcG9pbnQ9XCJfc3BuU2hvd0FsbFwiIGNsYXNzPVwiZXNyaTRHRVdpemFyZF9MaW5rIERhdGFDb2xsZWN0aW9uc1BhZ2VfU2hvd0FsbFwiPjwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gIDxkaXY+YDtcclxuICB9XHJcbiAgcG9zdENyZWF0ZSgpIHtcclxuICAgIHN1cGVyLnBvc3RDcmVhdGUoKTtcclxuICAgIC8vIFNFQVJDSFxyXG4gICAgdGhpcy5fc2VhcmNoVGV4dEJveCA9IG5ldyBTZWFyY2hUZXh0Qm94KHtcclxuICAgICAgcHJvbXB0OiBnZXRHRU1lc3NhZ2VzKFwiRGF0YUJyb3dzZXJcIikuRGF0YUNvbGxlY3Rpb25zUGFnZS5zZWFyY2gsXHJcbiAgICAgIG9uU2VhcmNoOiB0aGlzLl9zZWFyY2guYmluZCh0aGlzKVxyXG4gICAgfSkucGxhY2VBdCh0aGlzLl90eGJTZWFyY2hEaXYpO1xyXG4gICAgLy8gVkFSSUFCTEVTXHJcbiAgICB0aGlzLl9ncmlkID0gdGhpcy5tYW5hZ2VyLmNyZWF0ZVZhcmlhYmxlR3JpZCh7IGdyb3VwQ2F0ZWdvcmllczogZmFsc2UgfSwgdGhpcy5fZGl2VmFyaWFibGVzKTtcclxuICAgIC8vIFBBR0lOQVRJT05cclxuICAgIHRoaXMuX3BhZ2luYXRpb24gPSBuZXcgUGFnaW5hdGlvbih7XHJcbiAgICAgIGF1dG9DZW50ZXI6IHRydWUsXHJcbiAgICAgIHNjcm9sbEFuaW1hdGlvbjogXCJzbGlkZVwiLFxyXG4gICAgICBjcmVhdGVJdGVtQ29udGFpbmVyOiAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gY3JlYXRlKFwiZGl2XCIsIHsgY2xhc3M6IFwiRGF0YUNvbGxlY3Rpb25CdXR0b25Db250YWluZXJcIiB9KTtcclxuICAgICAgICBjcmVhdGUoXCJkaXZcIiwgeyBjbGFzczogXCJEYXRhQ29sbGVjdGlvbkJ1dHRvbiBlc3JpR0VDbGlja2FibGUgZXNyaUdFVHJpbVdpdGhFbGxpcHNlc1wiIH0sIGNvbnRhaW5lcik7XHJcbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcclxuICAgICAgfSxcclxuICAgICAgdXBkYXRlSXRlbUNvbnRhaW5lcjogKG5vZGUsIGl0ZW0pID0+IHtcclxuICAgICAgICBub2RlLmNoaWxkcmVuWzBdLnRleHRDb250ZW50ID0gaXRlbS50aXRsZTtcclxuICAgICAgICBub2RlLmRhdGEgPSBpdGVtO1xyXG4gICAgICB9LFxyXG4gICAgICBvblNlbGVjdDogdGhpcy5fb25TZWxlY3RDb2xsZWN0aW9uLmJpbmQodGhpcylcclxuICAgIH0pLnBsYWNlQXQodGhpcy5fcGFnaW5hdGlvbkRpdik7XHJcbiAgICAvLyBBUFBMWSBCVVRUT05cclxuICAgIHRoaXMubWFuYWdlci53YXRjaChcInNlbGVjdGlvblwiLCB0aGlzLl91cGRhdGVBcHBseUJ1dHRvbkF2YWlsYWJpbGl0eS5iaW5kKHRoaXMpKTtcclxuICAgIHRoaXMuX3VwZGF0ZUFwcGx5QnV0dG9uQXZhaWxhYmlsaXR5KCk7XHJcbiAgICAvLyBTSE9XIEFMTFxyXG4gICAgb24odGhpcy5fc3BuU2hvd0FsbCwgXCJjbGlja1wiLCB0aGlzLl9zaG93QWxsLmJpbmQodGhpcykpO1xyXG4gICAgLy8gU2hvdyBjYXRlZ29yeSBkYXRhXHJcbiAgICB0aGlzLl9xdWVyeVNlbGVjdGVkQ2F0ZWdvcnkoKTtcclxuICB9XHJcbiAgX3VwZGF0ZUFwcGx5QnV0dG9uQXZhaWxhYmlsaXR5KCkge1xyXG4gICAgdGhpcy5fc2V0QnV0dG9uRW5hYmxlZChcImFwcGx5XCIsICEhdGhpcy5tYW5hZ2VyLnNlbGVjdGlvbi5sZW5ndGgpO1xyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyBXb3JrIHdpdGggZGF0YSBjb2xsZWN0aW9uc1xyXG4gIC8vXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIF9xdWVyeVNlbGVjdGVkQ2F0ZWdvcnkoKSB7XHJcbiAgICAvLyBXZSBxdWVyeSB0aGUgcmVxdWlyZWQgY2F0ZWdvcnkgYW5kLCBpZiBjYXRlZ29yeSBmb3VuZCwgcG9wdWxhdGUgdGhlIHBhZ2UuXHJcbiAgICAvLyBUaGlzIHF1ZXJ5IGNhbiBiZSBhc3luYyBiZWNhdXNlIGRhdGEgYnJvd3NlciBjYW4gc3RhcnQgZnJvbSB0aGUgY2F0ZWdvcmllcyBwYWdlLlxyXG4gICAgLy8gV2hlbiBhIGNhdGVnb3J5IGlzIHJlY2VpdmVkLCBhbGwgb3RoZXIgcXVlcmllcyB3aWxsIGJlIHN5bmMuXHJcbiAgICB0aGlzLl9zaG93UHJvZ3Jlc3Mod2hlbih0aGlzLm1hbmFnZXIuZ2V0Q2F0ZWdvcnkoKSkudGhlbigoY2F0ZWdvcnkpID0+IHtcclxuICAgICAgaWYgKGNhdGVnb3J5KSB7XHJcbiAgICAgICAgdGhpcy5fc2hvd0NhdGVnb3J5KGNhdGVnb3J5KTtcclxuICAgICAgfVxyXG4gICAgfSkpO1xyXG4gIH1cclxuICBfc2hvd0NhdGVnb3J5KGNhdGVnb3J5KSB7XHJcbiAgICB0aGlzLl9wcmVwYXJlQ2F0ZWdvcnlUaXRsZShjYXRlZ29yeSk7XHJcbiAgICB0aGlzLl9zcG5TaG93QWxsLnRleHRDb250ZW50ID0gc3Vic3RpdHV0ZVN0cmluZyhubHMkMi5zaG93QWxsLCB7IGNhdGVnb3J5TmFtZTogY2F0ZWdvcnkubmFtZSB9KTtcclxuICAgIGNvbnN0IHZhcmlhYmxlcyA9IHRoaXMubWFuYWdlci52YXJpYWJsZXMuZ2V0UG9wdWxhclZhcmlhYmxlcyhjYXRlZ29yeSwge1xyXG4gICAgICBzb3J0OiBbeyBhdHRyaWJ1dGU6IFwicG9wdWxhcml0eVwiLCBkZXNjZW5kaW5nOiB0cnVlIH1dLFxyXG4gICAgICBzdGFydDogMCxcclxuICAgICAgY291bnQ6IDNcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fZ3JpZC5zZXRWYXJpYWJsZXModmFyaWFibGVzKTtcclxuICAgIGNvbnN0IHF1ZXJ5ID0gdGhpcy5tYW5hZ2VyLmNvbXBvc2VRdWVyeShcImNhdGVnb3J5SURcIik7XHJcbiAgICB3aGVuKHRoaXMuX2dldERhdGFDb2xsZWN0aW9ucyhxdWVyeSwgeyBzb3J0OiBbeyBhdHRyaWJ1dGU6IFwidGl0bGVcIiB9XSB9KSkudGhlbigoZGF0YUNvbGxlY3Rpb25zKSA9PiB7XHJcbiAgICAgIHRoaXMuaXRlbXMgPSBkYXRhQ29sbGVjdGlvbnM7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgLy8gQ291bGQgYmUgb3ZlcnJpZGVuIHRvIHF1ZXJ5IGFkZGl0aW9uYWwgZGF0YSBjb2xsZWN0aW9uc1xyXG4gIF9nZXREYXRhQ29sbGVjdGlvbnMocXVlcnksIG9wdGlvbnMpIHtcclxuICAgIHJldHVybiB0aGlzLm1hbmFnZXIudmFyaWFibGVzLmRhdGFDb2xsZWN0aW9ucy5xdWVyeShxdWVyeSwgb3B0aW9ucyk7XHJcbiAgfVxyXG4gIF9wcmVwYXJlQ2F0ZWdvcnlUaXRsZShjYXRlZ29yeSkge1xyXG4gICAgdGhpcy5fY2F0ZWdvcnlOYW1lLnRleHRDb250ZW50ID0gc3Vic3RpdHV0ZVN0cmluZyhubHMkMi5jYXRlZ29yeU5hbWUsIHsgY2F0ZWdvcnlOYW1lOiBjYXRlZ29yeS5uYW1lIH0pO1xyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyBSZXNpemVcclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICByZXNpemUoKSB7XHJcbiAgICBzdXBlci5yZXNpemUoKTtcclxuICAgIHRoaXMuX3BhZ2luYXRpb24ucmVzaXplKCk7XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vIEhhbmRsZSBldmVudHNcclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICBfb25TZWxlY3RDb2xsZWN0aW9uKHNlbGVjdGVkQ29sbGVjdGlvbk5vZGUpIHtcclxuICAgIGNvbnN0IHNlbGVjdGVkQ29sbGVjdGlvbiA9IHNlbGVjdGVkQ29sbGVjdGlvbk5vZGUuZGF0YTtcclxuICAgIGlmICghaXNCb2R5THRyKCkpIHtcclxuICAgICAgY29uc3QgcG9zID0gcG9zaXRpb24oc2VsZWN0ZWRDb2xsZWN0aW9uTm9kZSk7XHJcbiAgICAgIGNvbnN0IHJpZ2h0ID0gd2luZG93LmlubmVyV2lkdGggLSBwb3MueCAtIHBvcy53O1xyXG4gICAgICBzZWxlY3RlZENvbGxlY3Rpb25Ob2RlLnN0eWxlLnJpZ2h0ID0gXCJcIiArIHJpZ2h0ICsgXCJweFwiO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fYW5pbWF0ZUJ1dHRvbkNsaWNrKHNlbGVjdGVkQ29sbGVjdGlvbk5vZGUpO1xyXG4gICAgaWYgKCFpc0JvZHlMdHIoKSkge1xyXG4gICAgICBzZWxlY3RlZENvbGxlY3Rpb25Ob2RlLnN0eWxlLnJpZ2h0ID0gXCJhdXRvXCI7XHJcbiAgICB9XHJcbiAgICB0aGlzLm1hbmFnZXIudmFyaWFibGVRdWVyeS5kYXRhQ29sbGVjdGlvbklEID0gc2VsZWN0ZWRDb2xsZWN0aW9uLmlkO1xyXG4gICAgdGhpcy5vblNlbGVjdCgpO1xyXG4gIH1cclxuICBfYW5pbWF0ZUJ1dHRvbkNsaWNrKGJ1dHRvbikge1xyXG4gICAgcmV0dXJuIHRoaXMubWFuYWdlci5mbHlBbmltLmZseShidXR0b24uY2hpbGRyZW5bMF0sIFwiQnJlYWRjcnVtYl9TZWxlY3REQ1wiKTtcclxuICB9XHJcbiAgX3Nob3dBbGwoKSB7XHJcbiAgICB0aGlzLm1hbmFnZXIudmFyaWFibGVRdWVyeS5zZWFyY2hTdHJpbmcgPSBcIipcIjtcclxuICAgIHRoaXMub25TZWxlY3QoKTtcclxuICB9XHJcbiAgX3NlYXJjaCgpIHtcclxuICAgIGNvbnN0IGtleSA9IHRoaXMuX3NlYXJjaFRleHRCb3gudmFsdWU7XHJcbiAgICBpZiAoIWtleSkge1xyXG4gICAgICB0aGlzLl9zZWFyY2hUZXh0Qm94LnZhbHVlID0gXCJcIjtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5tYW5hZ2VyLnZhcmlhYmxlUXVlcnkuc2VhcmNoU3RyaW5nID0ga2V5O1xyXG4gICAgdGhpcy5fc2hvd1Byb2dyZXNzKHRoaXMubWFuYWdlci5xdWVyeVZhcmlhYmxlcygpLnRoZW4oKHJlc3VsdHMpID0+IHtcclxuICAgICAgaWYgKHJlc3VsdHMubGVuZ3RoKSB7XHJcbiAgICAgICAgdGhpcy5fb25TZWFyY2gocmVzdWx0cyk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMubWFuYWdlci52YXJpYWJsZVF1ZXJ5LnNlYXJjaFN0cmluZztcclxuICAgICAgICB0aGlzLl9zZWFyY2hUZXh0Qm94LnNob3dUb29sdGlwKHN1YnN0aXR1dGVTdHJpbmcobmxzJDIubm9SZXN1bHRzLCB7IHNlYWNoS2V5OiBrZXkgfSkpO1xyXG4gICAgICB9XHJcbiAgICB9KSk7XHJcbiAgfVxyXG4gIF9vblNlYXJjaChyZXN1bHRzKSB7XHJcbiAgICB0aGlzLm9uU2VsZWN0KHJlc3VsdHMpO1xyXG4gIH1cclxuICBvblNlbGVjdChfcmVzdWx0cykgeyB9XHJcbn07XHJcbl9fZGVjb3JhdGUoW1xyXG4gIHkkcigpXHJcbl0sIERhdGFDb2xsZWN0aW9uc1BhZ2UucHJvdG90eXBlLCBcIm1hbmFnZXJcIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKClcclxuXSwgRGF0YUNvbGxlY3Rpb25zUGFnZS5wcm90b3R5cGUsIFwibGFzdERhdGFDb2xsZWN0aW9uSURcIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKClcclxuXSwgRGF0YUNvbGxlY3Rpb25zUGFnZS5wcm90b3R5cGUsIFwicGFnZUlzQWN0aXZlXCIsIG51bGwpO1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoKVxyXG5dLCBEYXRhQ29sbGVjdGlvbnNQYWdlLnByb3RvdHlwZSwgXCJpdGVtc1wiLCBudWxsKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKClcclxuXSwgRGF0YUNvbGxlY3Rpb25zUGFnZS5wcm90b3R5cGUsIFwib25TZWxlY3RcIiwgbnVsbCk7XHJcbkRhdGFDb2xsZWN0aW9uc1BhZ2UgPSBfX2RlY29yYXRlKFtcclxuICBpJFgoKVxyXG5dLCBEYXRhQ29sbGVjdGlvbnNQYWdlKTtcblxuZnVuY3Rpb24gY29tcGFyZU1pc3NpbmdWYWx1ZXMoYSwgYiwgZGVzY2VuZGluZywgX21pc3NpbmdEZXNjZW5kaW5nKSB7XHJcbiAgY29uc3QgbWlzc2luZ0Rlc2NlbmRpbmcgPSBfbWlzc2luZ0Rlc2NlbmRpbmcgPT09IHVuZGVmaW5lZCA/IGRlc2NlbmRpbmcgOiBfbWlzc2luZ0Rlc2NlbmRpbmc7XHJcbiAgY29uc3QgYW1pc3NpbmcgPSBhID09PSB1bmRlZmluZWQgfHwgYSA9PT0gbnVsbDtcclxuICBjb25zdCBibWlzc2luZyA9IGIgPT09IHVuZGVmaW5lZCB8fCBiID09PSBudWxsO1xyXG4gIGlmIChhbWlzc2luZyAhPT0gYm1pc3NpbmcpIHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGFtaXNzaW5nID8gLTEgOiAxO1xyXG4gICAgcmV0dXJuIG1pc3NpbmdEZXNjZW5kaW5nID8gLXJlc3VsdCA6IHJlc3VsdDtcclxuICB9XHJcbiAgcmV0dXJuIGFtaXNzaW5nID8gMCA6IG51bGw7XHJcbn1cclxuLyoqXHJcbiAqIFRoZSBzb3J0IGZ1bmN0aW9uIHVzZWQgZm9yIHNvcnRpbmcgc3RyaW5nIHZhbHVlcy5cclxuICogVXNlIHRoaXMgZnVuY3Rpb24gdG8gc29ydCBhbiBhcnJheSBhbHBoYWJldGljYWxseS4gRS5nLiBhcnJheS5zb3J0KE9iamVjdFV0aWwuY29tcGFyZVN0cmluZyk7XHJcbiAqIEBwYXJhbSBhIFN0cmluZyB0byBjb21wYXJlLlxyXG4gKiBAcGFyYW0gYiBTdHJpbmcgdG8gY29tcGFyZS5cclxuICogQHBhcmFtIGRlc2NlbmRpbmcgVGhlIG9yZGVyIG9mIHNvcnRpbmcuIElmIHRydWUsIHRoZSB2YWx1ZXMgd2lsbCBiZSBzb3J0ZWQgaW4gYSBkZXNjZW5kaW5nIG9yZGVyLlxyXG4gKiBAcGFyYW0gbWlzc2luZ0Rlc2NlbmRpbmcgVGhlIG9yZGVyIG9mIHNvcnRpbmcgbnVsbCBhbmQgdW5kZWZpbmVkIHZhbHVlcy4gRGVmYXVsdHMgdG8gdGhlIHZhbHVlIG9mICdkZXNjZW5kaW5nJyBwYXJhbWV0ZXIuXHJcbiAqIEByZXR1cm5zIEEgbnVtYmVyIGluZGljYXRpbmcgd2hldGhlciBhIGZpcnN0IHN0cmluZyBjb21lcyBiZWZvcmUgb3IgYWZ0ZXIgb3IgaXMgdGhlIHNhbWUgYXMgdGhlIHNlY29uZCB2YWx1ZSBpbiBzb3J0IG9yZGVyLlxyXG4gKi9cclxuZnVuY3Rpb24gY29tcGFyZVN0cmluZyhhLCBiLCBkZXNjZW5kaW5nLCBtaXNzaW5nRGVzY2VuZGluZykge1xyXG4gIGxldCByZXN1bHQgPSBjb21wYXJlTWlzc2luZ1ZhbHVlcyhhLCBiLCBkZXNjZW5kaW5nLCBtaXNzaW5nRGVzY2VuZGluZyk7XHJcbiAgaWYgKHJlc3VsdCAhPT0gbnVsbCkge1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcbiAgLy8gY29udmVydCB0byBTdHJpbmdcclxuICBhID0gU3RyaW5nKGEpO1xyXG4gIGIgPSBTdHJpbmcoYik7XHJcbiAgcmVzdWx0ID0gYS5sb2NhbGVDb21wYXJlKGIpO1xyXG4gIHJldHVybiBkZXNjZW5kaW5nID8gLXJlc3VsdCA6IHJlc3VsdDtcclxufVxyXG4vKipcclxuICogVGhlIHNvcnQgZnVuY3Rpb24gdXNlZCBmb3Igc29ydGluZyBhbiBhcnJheS5UaGUgdHlwZSBvZiB0aGUgb2JqZWN0cyBpbiB0aGUgYXJyYXkgYXJlIGRldGVybWluZWQgYXV0b21hdGljYWxseS5cclxuICogRS5nLiBhcnJheS5zb3J0KE9iamVjdFV0aWwuY29tcGFyZSk7XHJcbiAqIEBwYXJhbSBhIFZhbHVlIHRvIGNvbXBhcmUuXHJcbiAqIEBwYXJhbSBiIFZhbHVlIHRvIGNvbXBhcmUuXHJcbiAqIEBwYXJhbSBkZXNjZW5kaW5nIFRoZSBvcmRlciBvZiBzb3J0aW5nLiBJZiB0cnVlLCB0aGUgdmFsdWVzIHdpbGwgYmUgc29ydGVkIGluIGEgZGVzY2VuZGluZyBvcmRlci5cclxuICogQHBhcmFtIG1pc3NpbmdEZXNjZW5kaW5nIFRoZSBvcmRlciBvZiBzb3J0aW5nIG51bGwgYW5kIHVuZGVmaW5lZCB2YWx1ZXMuIERlZmF1bHRzIHRvIHRoZSB2YWx1ZSBvZiAnZGVzY2VuZGluZycgcGFyYW1ldGVyLlxyXG4gKiBAcmV0dXJucyBBIG51bWJlciBpbmRpY2F0aW5nIHdoZXRoZXIgYSBmaXJzdCB2YWx1ZSBjb21lcyBiZWZvcmUgb3IgYWZ0ZXIgb3IgaXMgdGhlIHNhbWUgYXMgdGhlIHNlY29uZCB2YWx1ZSBpbiBzb3J0IG9yZGVyXHJcbiAqL1xyXG5mdW5jdGlvbiBjb21wYXJlKGEsIGIsIGRlc2NlbmRpbmcsIG1pc3NpbmdEZXNjZW5kaW5nKSB7XHJcbiAgbGV0IHJlc3VsdCA9IGNvbXBhcmVNaXNzaW5nVmFsdWVzKGEsIGIsIGRlc2NlbmRpbmcsIG1pc3NpbmdEZXNjZW5kaW5nKTtcclxuICBpZiAocmVzdWx0ICE9PSBudWxsKSB7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuICBsZXQgY29tcGFyZVR5cGUgPSB0eXBlb2YgYTtcclxuICBpZiAodHlwZW9mIGIgIT09IGNvbXBhcmVUeXBlKSB7XHJcbiAgICBjb21wYXJlVHlwZSA9IFwiXCI7XHJcbiAgfVxyXG4gIHN3aXRjaCAoY29tcGFyZVR5cGUpIHtcclxuICAgIGNhc2UgXCJudW1iZXJcIjpcclxuICAgIGNhc2UgXCJib29sZWFuXCI6XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSBcIm9iamVjdFwiOlxyXG4gICAgICBhID0gYS52YWx1ZU9mKCk7XHJcbiAgICAgIGIgPSBiLnZhbHVlT2YoKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBkZWZhdWx0OlxyXG4gICAgICByZXR1cm4gY29tcGFyZVN0cmluZyhTdHJpbmcoYSksIFN0cmluZyhiKSwgZGVzY2VuZGluZywgbWlzc2luZ0Rlc2NlbmRpbmcpO1xyXG4gIH1cclxuICByZXN1bHQgPSBhID4gYiA/IDEgOiBhIDwgYiA/IC0xIDogMDtcclxuICByZXR1cm4gZGVzY2VuZGluZyA/IC1yZXN1bHQgOiByZXN1bHQ7XHJcbn1cblxuLy8gZ2VvZW5yaWNobWVudC51dGlsc1xyXG5mdW5jdGlvbiBjcmVhdGVTaW1wbGVRdWVyeUVuZ2luZSgpIHtcclxuICByZXR1cm4gZnVuY3Rpb24gKHF1ZXJ5LCBvcHRpb25zKSB7XHJcbiAgICByZXR1cm4gKGRhdGEpID0+IHtcclxuICAgICAgLy8gZXhlY3V0ZSB0aGUgd2hvbGUgcXVlcnksIGZpcnN0IHdlIGZpbHRlclxyXG4gICAgICBjb25zdCBxdWVyeUZ1bmMgPSB0eXBlb2YgcXVlcnkgPT09IFwiZnVuY3Rpb25cIlxyXG4gICAgICAgID8gcXVlcnlcclxuICAgICAgICA6IChvYmplY3QpID0+IHtcclxuICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHF1ZXJ5KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlcXVpcmVkID0gcXVlcnlba2V5XTtcclxuICAgICAgICAgICAgaWYgKHJlcXVpcmVkICYmIHR5cGVvZiByZXF1aXJlZC50ZXN0ID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgICAgICAvLyBhbiBvYmplY3QgY2FuIHByb3ZpZGUgYSB0ZXN0IG1ldGhvZCwgd2hpY2ggbWFrZXMgaXQgd29yayB3aXRoIHJlZ2V4XHJcbiAgICAgICAgICAgICAgaWYgKCFyZXF1aXJlZC50ZXN0KG9iamVjdFtrZXldLCBvYmplY3QpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHJlcXVpcmVkICE9PSBvYmplY3Rba2V5XSkge1xyXG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfTtcclxuICAgICAgbGV0IHJlc3VsdHMgPSBkYXRhLmZpbHRlcihxdWVyeUZ1bmMpO1xyXG4gICAgICAvLyBuZXh0IHdlIHNvcnRcclxuICAgICAgY29uc3Qgc29ydFNldCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5zb3J0O1xyXG4gICAgICBpZiAoc29ydFNldCkge1xyXG4gICAgICAgIHJlc3VsdHMuc29ydCh0eXBlb2Ygc29ydFNldCA9PT0gXCJmdW5jdGlvblwiXHJcbiAgICAgICAgICA/IHNvcnRTZXRcclxuICAgICAgICAgIDogKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgbGV0IHNvcnRJdGVtO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNvcnRTZXQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICBzb3J0SXRlbSA9IHNvcnRTZXRbaV07XHJcbiAgICAgICAgICAgICAgY29uc3QgY29tcGFyZVJlc3VsdCA9IGNvbXBhcmUoYVtzb3J0SXRlbS5hdHRyaWJ1dGVdLCBiW3NvcnRJdGVtLmF0dHJpYnV0ZV0sIHNvcnRJdGVtLmRlc2NlbmRpbmcpO1xyXG4gICAgICAgICAgICAgIGlmIChjb21wYXJlUmVzdWx0ICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tcGFyZVJlc3VsdDtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICAvLyBub3cgd2UgcGFnaW5hdGVcclxuICAgICAgaWYgKG9wdGlvbnMgJiYgKG9wdGlvbnMuc3RhcnQgfHwgb3B0aW9ucy5jb3VudCkpIHtcclxuICAgICAgICBjb25zdCB0b3RhbCA9IHJlc3VsdHMubGVuZ3RoO1xyXG4gICAgICAgIHJlc3VsdHMgPSByZXN1bHRzLnNsaWNlKG9wdGlvbnMuc3RhcnQgfHwgMCwgKG9wdGlvbnMuc3RhcnQgfHwgMCkgKyAob3B0aW9ucy5jb3VudCB8fCBJbmZpbml0eSkpO1xyXG4gICAgICAgIHJlc3VsdHMudG90YWwgPSB0b3RhbDtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gcmVzdWx0cztcclxuICAgIH07XHJcbiAgfTtcclxufVxuXG4vLyBlc3JpNC5jb3JlXHJcbmNsYXNzIFNlbGVjdGFibGVUcmVlIGV4dGVuZHMgbiRGIHtcclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy8gQ29uc3RydWN0b3JcclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHJvb3ROb2RlcyAgICAgICAgICAgICAgICAgICBBcnJheSBvZiByb290IHRyZWUgbm9kZXMuXHJcbiAgICogQHBhcmFtIG9wdGlvbnMuaWRQcm9wZXJ0eSAgICAgICAgICBUaGUgaWRlbnRpdHkgcHJvcGVydHkuXHJcbiAgICogQHBhcmFtIG9wdGlvbnMucm9vdExhYmVsICAgICAgICAgICBSb290IGxhYmVsLlxyXG4gICAqIEBwYXJhbSBvcHRpb25zLmF1dG9JZGVudGlmeSAgICAgICAgVGhlIG1vZGUgb2YgY3JlYXRpb24gYW4gaWRlbnRpdHkuIERlZmF1bHQgaXMgdHJ1ZSwgd2hpY2ggbWVhbnMgYXV0byBjcmVhdGlvbiBvZiB1bmlxdWUgSURzIGZvciBhbGwgbm9kZXMuXHJcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZiBmYWxzZSwgdGhlIElEIHZhbHVlIHNob3VsZCBiZSBhbHJlYWR5IHByb3ZpZGVkIHdpdGggdHJlZSBub2Rlcy5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihyb290Tm9kZXMsIG9wdGlvbnMpIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAvLyBFdmVudHNcclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIHRoaXMuZW1pdChcInVwZGF0ZWRcIikgaWYgdGhlIHRyZWUgY29udGVudCBpcyB1cGRhdGVkXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAvLyBJbnN0YW5jZSBwcm9wZXJ0aWVzXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICB0aGlzLmlkUHJvcGVydHkgPSBcImlkXCI7XHJcbiAgICAvKipcclxuICAgICAqIFRydWUgbWVhbnMgYXV0b2NyZWF0aW9uIG9mIElEIHByb3BlcnR5IG9uIGNvbnN0cnVjdGlvbi5cclxuICAgICAqL1xyXG4gICAgdGhpcy5hdXRvSWRlbnRpZnkgPSB0cnVlO1xyXG4gICAgLyoqXHJcbiAgICAgKiBEZWZhdWx0IHF1ZXJ5IGVuZ2luZS5cclxuICAgICAqL1xyXG4gICAgdGhpcy5xdWVyeUVuZ2luZSA9IGNyZWF0ZVNpbXBsZVF1ZXJ5RW5naW5lKCk7XHJcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmlkUHJvcGVydHkpIHtcclxuICAgICAgdGhpcy5pZFByb3BlcnR5ID0gb3B0aW9ucy5pZFByb3BlcnR5O1xyXG4gICAgfVxyXG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5hdXRvSWRlbnRpZnkgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICB0aGlzLmF1dG9JZGVudGlmeSA9IG9wdGlvbnMuYXV0b0lkZW50aWZ5O1xyXG4gICAgfVxyXG4gICAgdGhpcy5yb290ID0ge1xyXG4gICAgICBsYWJlbDogb3B0aW9ucyAmJiBvcHRpb25zLnJvb3RMYWJlbCxcclxuICAgICAgZGVlcG5lc3M6IC0xLFxyXG4gICAgICBzZWxlY3RDb3VudDogMCxcclxuICAgICAgbGVhZkNvdW50OiAwLFxyXG4gICAgICBjaGlsZHJlbjogcm9vdE5vZGVzIHx8IFtdXHJcbiAgICB9O1xyXG4gICAgdGhpcy5faGFzaCA9IHt9O1xyXG4gICAgLy8gU3RhcnQgYXV0byBpZGVudGl0eSBpZiBuZWNlc3NhcnlcclxuICAgIGlmICh0aGlzLmlkUHJvcGVydHkgJiYgdGhpcy5hdXRvSWRlbnRpZnkpIHtcclxuICAgICAgdGhpcy5fYXV0b0lkID0gMTtcclxuICAgIH0gLy8gU2hvdWxkIHN0YXJ0IGZyb20gMSFcclxuICAgIHRoaXMuX2luaXRpYWxpemVOb2RlKHRoaXMucm9vdCwgMCk7XHJcbiAgICB0aGlzLmRhdGEgPSB0aGlzLnJvb3QuY2hpbGRyZW47XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvLyBJbml0aWFsaXplIG5vZGVcclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgX2luaXRpYWxpemVOb2RlKG5vZGUsIGRlZXBuZXNzKSB7XHJcbiAgICBub2RlLnNlbGVjdGVkID0gISFub2RlLnNlbGVjdGVkOyAvLyBCb29sZWFuXHJcbiAgICAvLyBJbml0aWFsaXplIGNvdW50cyBmb3IgYSBsZWFmLlxyXG4gICAgLy8gSWYgbGVhZkNvdW50IGlzIGFscmVhZHkgaW5pdGlhbGl6ZWQgd2l0aCBhIG51bWJlciwgd2UgZG9uJ3QgY2hhbmdlIGl0LlxyXG4gICAgLy8gU28sIHdlIGNhbiBhc3NvY2lhdGUgYW55IG5vbm5lZ2F0aXZlIFwid2VpZ2h0XCIgd2l0aCBhIGxlYWYuXHJcbiAgICAvLyBaZXJvIHdlaWdodCBpcyBhbHNvIGFsbG93ZWQhXHJcbiAgICBpZiAoIW5vZGUuY2hpbGRyZW4pIHtcclxuICAgICAgaWYgKHR5cGVvZiBub2RlLmxlYWZDb3VudCAhPT0gXCJudW1iZXJcIikge1xyXG4gICAgICAgIG5vZGUubGVhZkNvdW50ID0gMTtcclxuICAgICAgfVxyXG4gICAgICBub2RlLnNlbGVjdENvdW50ID0gbm9kZS5zZWxlY3RlZCA/IG5vZGUubGVhZkNvdW50IDogMDtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgLy8gSW5pdGlhbGl6ZSBhIGJyYW5jaFxyXG4gICAgbm9kZS5zZWxlY3RDb3VudCA9IDA7XHJcbiAgICBub2RlLmxlYWZDb3VudCA9IDA7XHJcbiAgICBub2RlLmNoaWxkcmVuLmZvckVhY2goKGNoaWxkKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlZ2lzdGVyTm9kZShjaGlsZCk7XHJcbiAgICAgIGNoaWxkLnBhcmVudCA9IG5vZGU7XHJcbiAgICAgIGNoaWxkLmRlZXBuZXNzID0gZGVlcG5lc3M7XHJcbiAgICAgIHRoaXMuX2luaXRpYWxpemVOb2RlKGNoaWxkLCBkZWVwbmVzcyArIDEpO1xyXG4gICAgICBub2RlLnNlbGVjdENvdW50ICs9IGNoaWxkLnNlbGVjdENvdW50O1xyXG4gICAgICBub2RlLmxlYWZDb3VudCArPSBjaGlsZC5sZWFmQ291bnQ7XHJcbiAgICB9KTtcclxuICAgIC8vIFVwZGF0ZSB0aGUgc2VsZWN0ZWQgc3RhdGUgaW4gdGhlIGNhc2Ugd2hlbiBpdCBjYW4gYmUgZGV0ZW1pbmVkXHJcbiAgICBpZiAoIW5vZGUuc2VsZWN0Q291bnQpIHtcclxuICAgICAgbm9kZS5zZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAobm9kZS5zZWxlY3RDb3VudCA9PT0gbm9kZS5sZWFmQ291bnQpIHtcclxuICAgICAgbm9kZS5zZWxlY3RlZCA9IHRydWU7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvLyBUZXN0IG9uIG93bmluZ1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvKipcclxuICAgKiBAcGFyYW0gbm9kZSAgICAgICAgICAgIE5vZGUgdG8gdGVzdC5cclxuICAgKiBAcGFyYW0gc2tpcFJvb3QgICAgICAgIFRydWUgbWVhbnMgdGhhdCB0aGUgcm9vdCBub2RlIGlzIGRpc2FsbG93ZWQgaW4gdGhlIHRlc3RpbmcsXHJcbiAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gbm9kZSBpcyBvd25lZCBieSB0aGUgdHJlZS5cclxuICAgKi9cclxuICBpc093bmVkKG5vZGUsIHNraXBSb290ID0gZmFsc2UpIHtcclxuICAgIGlmICghc2tpcFJvb3QgJiYgbm9kZSA9PT0gdGhpcy5yb290KSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcmVnaXN0ZXJlZE5vZGUgPSB0aGlzLmdldCh0aGlzLmdldElkZW50aXR5KG5vZGUpKTtcclxuICAgIHJldHVybiByZWdpc3RlcmVkTm9kZSA9PT0gbm9kZTtcclxuICB9XHJcbiAgX3JlZ2lzdGVyTm9kZShub2RlKSB7XHJcbiAgICBpZiAodGhpcy5fYXV0b0lkICYmIG5vZGVbdGhpcy5pZFByb3BlcnR5XSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIG5vZGVbdGhpcy5pZFByb3BlcnR5XSA9IHRoaXMuX2F1dG9JZCsrO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuaWRQcm9wZXJ0eSkge1xyXG4gICAgICB0aGlzLl9oYXNoW25vZGVbdGhpcy5pZFByb3BlcnR5XV0gPSBub2RlO1xyXG4gICAgfVxyXG4gIH1cclxuICBfdW5yZWdpc3Rlck5vZGUobm9kZSkge1xyXG4gICAgaWYgKHRoaXMuaXNPd25lZChub2RlLCB0cnVlKSkge1xyXG4gICAgICBkZWxldGUgdGhpcy5faGFzaFtub2RlW3RoaXMuaWRQcm9wZXJ0eV1dO1xyXG4gICAgfVxyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy8gQ2xlYXJcclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLyoqXHJcbiAgICogQ2xlYXJzIHRoZSB0cmVlIGFuZCByZW1vdmVzIHRoZSBiaW5kaW5nIGluIGFsbCBpdHMgdHJlZSBub2Rlcy5cclxuICAgKi9cclxuICBjbGVhcigpIHtcclxuICAgIGlmICh0aGlzLnJvb3QuY2hpbGRyZW4ubGVuZ3RoKSB7XHJcbiAgICAgIHRoaXMucm9vdC5jaGlsZHJlbi5mb3JFYWNoKChjaGlsZCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX3VuYmluZE5vZGUoY2hpbGQpO1xyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5kYXRhID0gdGhpcy5yb290LmNoaWxkcmVuID0gW107XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIERlc3Ryb3lzIHRoZSBiaW5kaW5nIG9mIGFsbCB0cmVlIG5vZGVzLlxyXG4gICAqL1xyXG4gIGRlc3Ryb3koKSB7XHJcbiAgICB0aGlzLmNsZWFyKCk7XHJcbiAgfVxyXG4gIF91bmJpbmROb2RlKG5vZGUpIHtcclxuICAgIGlmIChub2RlLmNoaWxkcmVuKSB7XHJcbiAgICAgIG5vZGUuY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQpID0+IHtcclxuICAgICAgICBkZWxldGUgY2hpbGQucGFyZW50OyAvLyBBdm9pZCBwcm9wb2dhdGlvbiBvZiBfaW5jcmVtZW50Q291bnRzXHJcbiAgICAgICAgdGhpcy5fdW5iaW5kTm9kZShjaGlsZCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fdW5yZWdpc3Rlck5vZGUobm9kZSk7XHJcbiAgICBpZiAobm9kZS5wYXJlbnQpIHtcclxuICAgICAgdGhpcy5faW5jcmVtZW50Q291bnRzKG5vZGUucGFyZW50LCAtbm9kZS5zZWxlY3RDb3VudCwgLW5vZGUubGVhZkNvdW50KTtcclxuICAgICAgZGVsZXRlIG5vZGUucGFyZW50O1xyXG4gICAgfVxyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy8gUmVtb3ZlIG5vZGVzXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8qKlxyXG4gICAqIFJlbW92ZXMgbm9kZXMgZnJvbSB0aGUgdHJlZS5cclxuICAgKiBAcGFyYW0gbm9kZXMgICAgICAgQW4gYXJyYXkgb2Ygbm9kZXMgdG8gcmVtb3ZlLlxyXG4gICAqIEBwYXJhbSBzaWxlbnQgICAgICBBbiBhcnJheSBvZiBub2RlcyB0byByZW1vdmUuXHJcbiAgICovXHJcbiAgcmVtb3ZlTm9kZXMobm9kZXMsIHNpbGVudCA9IGZhbHNlKSB7XHJcbiAgICBub2RlcyAmJlxyXG4gICAgICBub2Rlcy5zbGljZSgpLmZvckVhY2goKG5vZGUpID0+IHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNPd25lZChub2RlLCB0cnVlKSkge1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBwYXJlbnQgPSBub2RlLnBhcmVudDtcclxuICAgICAgICBjb25zdCBpID0gcGFyZW50LmNoaWxkcmVuLmluZGV4T2Yobm9kZSk7XHJcbiAgICAgICAgaWYgKGkgPj0gMCkge1xyXG4gICAgICAgICAgcGFyZW50LmNoaWxkcmVuLnNwbGljZShpLCAxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fdW5iaW5kTm9kZShub2RlKTtcclxuICAgICAgfSk7XHJcbiAgICAhc2lsZW50ICYmIHRoaXMuZW1pdChcInVwZGF0ZWRcIik7XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvLyBBZGQgbm9kZXNcclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLyoqXHJcbiAgICogQWRkcyBub2RlcyB0byBjaGlsZHJlbiBvZiB0aGUgZ2l2ZW4gdHJlZSBub2RlLlxyXG4gICAqIEBwYXJhbSBub2RlcyAgICAgICBBZGRzIG5vZGVzIHRvIGNoaWxkcmVuIG9mIHRoZSBnaXZlbiB0cmVlIG5vZGUuXHJcbiAgICogQHBhcmFtIHBhcmVudCAgICAgIEFkZHMgbm9kZXMgdG8gY2hpbGRyZW4gb2YgdGhlIGdpdmVuIHRyZWUgbm9kZS5cclxuICAgKiBAcGFyYW0gc2lsZW50ICAgICAgQWRkcyBub2RlcyB0byBjaGlsZHJlbiBvZiB0aGUgZ2l2ZW4gdHJlZSBub2RlLlxyXG4gICAqL1xyXG4gIGFkZE5vZGVzKG5vZGVzLCBwYXJlbnQsIHNpbGVudCA9IGZhbHNlKSB7XHJcbiAgICBpZiAoIXBhcmVudCkge1xyXG4gICAgICBwYXJlbnQgPSB0aGlzLnJvb3Q7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICghdGhpcy5pc093bmVkKHBhcmVudCkgfHwgIXBhcmVudC5jaGlsZHJlbikge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBjb25zdCBkZWVwbmVzcyA9IHBhcmVudC5kZWVwbmVzcyArIDE7XHJcbiAgICBsZXQgc2VsZWN0Q291bnQgPSAwO1xyXG4gICAgbGV0IGxlYWZDb3VudCA9IDA7XHJcbiAgICBub2Rlcy5mb3JFYWNoKChub2RlKSA9PiB7XHJcbiAgICAgIGlmICh0aGlzLmlzT3duZWQobm9kZSkpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH0gLy8gQXZvaWQgYWRkaW5nIGEgbm9kZSB0d2ljZVxyXG4gICAgICBwYXJlbnQuY2hpbGRyZW4ucHVzaChub2RlKTtcclxuICAgICAgdGhpcy5fcmVnaXN0ZXJOb2RlKG5vZGUpO1xyXG4gICAgICBub2RlLnBhcmVudCA9IHBhcmVudDtcclxuICAgICAgbm9kZS5kZWVwbmVzcyA9IGRlZXBuZXNzO1xyXG4gICAgICB0aGlzLl9pbml0aWFsaXplTm9kZShub2RlLCBkZWVwbmVzcyArIDEpO1xyXG4gICAgICBzZWxlY3RDb3VudCArPSBub2RlLnNlbGVjdENvdW50O1xyXG4gICAgICBsZWFmQ291bnQgKz0gbm9kZS5sZWFmQ291bnQ7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2luY3JlbWVudENvdW50cyhwYXJlbnQsIHNlbGVjdENvdW50LCBsZWFmQ291bnQpO1xyXG4gICAgIXNpbGVudCAmJiB0aGlzLmVtaXQoXCJ1cGRhdGVkXCIpO1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvLyBTZWxlY3Rpb24vZGVzZWxlY3Rpb25cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLyoqXHJcbiAgICogU2VsZWN0cyBhIG5vZGUgYW5kIGFsbCBpdHMgZGVzY2VuZGFudHMuXHJcbiAgICogQHBhcmFtIHNlbGVjdGlvbkxpbWl0ICBUaGUgb3B0aW9uYWwgc2VsZWN0aW9uTGltaXQgcGFyYW1ldGVyIGxpbWl0cyB0aGUgbWF4aW11bSBudW1iZXIgb2YgbGVhdmVzIHRvIGJlIHNlbGVjdGVkXHJcbiAgICogICAgICAgICAgICAgICAgICAgICAgICBpbiB0aGUgd2hvbGUgdHJlZS4gV2l0aCB0aGlzIGxpbWl0IGV4Y2VlZGVkLCB0aGUgbWV0aG9kIHRyaWVzIHRvIHNlbGVjdCBhcyBtb3JlIGxlYXZlcyBpbiB0aGUgdHJlZSBhcyBwb3NzaWJsZS5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHRydWUgaWYgc2VsZWN0aW9uIHdhcyBzdWNjZXNzZnVsIGFuZCBmYWxzZSBpbiB0aGUgY2FzZSB3aGVuIHNvbWUgbGVhdmVzIHdlcmUgbm90IHNlbGVjdGVkIGJlY2F1c2UgdGhlIHNlbGVjdGlvbiBsaW1pdCB3YXMgYWNoaWV2ZWQuXHJcbiAgICovXHJcbiAgc2VsZWN0KG5vZGUsIHNlbGVjdGlvbkxpbWl0KSB7XHJcbiAgICByZXR1cm4gdGhpcy5jaGFuZ2VTZWxlY3Qobm9kZSwgdHJ1ZSwgc2VsZWN0aW9uTGltaXQpO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBEZXNlbGVjdHMgYSBub2RlIGFuZCBhbGwgaXRzIGRlc2NlbmRhbnRzLlxyXG4gICAqL1xyXG4gIGRlc2VsZWN0KG5vZGUpIHtcclxuICAgIHRoaXMuY2hhbmdlU2VsZWN0KG5vZGUsIGZhbHNlKTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogU2VsZWN0cy9kZXNlbGVjdHMgYSBub2RlIGFuZCBhbGwgaXRzIGRlc2NlbmRhbnRzLlxyXG4gICAqL1xyXG4gIGNoYW5nZVNlbGVjdChub2RlLCBzZWxlY3RlZCwgc2VsZWN0aW9uTGltaXQpIHtcclxuICAgIHNlbGVjdGlvbkxpbWl0ID0gc2VsZWN0aW9uTGltaXQgfHwgdGhpcy5yb290LmxlYWZDb3VudDtcclxuICAgIGlmICghbm9kZSkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBzZWxlY3RlZCA9ICEhc2VsZWN0ZWQ7XHJcbiAgICBjb25zdCBpbmNyZW1lbnQgPSAoc2VsZWN0ZWQgPyBub2RlLmxlYWZDb3VudCA6IDApIC0gbm9kZS5zZWxlY3RDb3VudDtcclxuICAgIGNvbnN0IGNhbkNoYW5nZVNlbGVjdCA9IGluY3JlbWVudCA8IDAgfHwgdGhpcy5yb290LnNlbGVjdENvdW50ICsgaW5jcmVtZW50IDw9IHNlbGVjdGlvbkxpbWl0O1xyXG4gICAgLy8gVHJ5IGNoYW5nZSBzZWxlY3QgZm9yIGEgbGVhZlxyXG4gICAgaWYgKCFub2RlLmNoaWxkcmVuKSB7XHJcbiAgICAgIGlmIChjYW5DaGFuZ2VTZWxlY3QpIHtcclxuICAgICAgICBub2RlLnNlbGVjdGVkID0gc2VsZWN0ZWQ7XHJcbiAgICAgICAgaWYgKGluY3JlbWVudCkge1xyXG4gICAgICAgICAgdGhpcy5faW5jcmVtZW50Q291bnRzKG5vZGUsIGluY3JlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBjYW5DaGFuZ2VTZWxlY3Q7XHJcbiAgICB9XHJcbiAgICAvLyBUcnkgY2hhbmdlIHNlbGVjdCBmb3IgYSBicmFuY2hcclxuICAgIGlmIChjYW5DaGFuZ2VTZWxlY3QpIHtcclxuICAgICAgbm9kZS5zZWxlY3RlZCA9IHNlbGVjdGVkO1xyXG4gICAgfVxyXG4gICAgbm9kZS5jaGlsZHJlbi5mb3JFYWNoKChjaGlsZCkgPT4ge1xyXG4gICAgICB0aGlzLmNoYW5nZVNlbGVjdChjaGlsZCwgc2VsZWN0ZWQsIHNlbGVjdGlvbkxpbWl0KTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGNhbkNoYW5nZVNlbGVjdDtcclxuICB9XHJcbiAgX2luY3JlbWVudENvdW50cyhub2RlLCBpbmNyZW1lbnQsIGxlYWZJbmNyZW1lbnQpIHtcclxuICAgIG5vZGUuc2VsZWN0Q291bnQgKz0gaW5jcmVtZW50O1xyXG4gICAgaWYgKGxlYWZJbmNyZW1lbnQpIHtcclxuICAgICAgbm9kZS5sZWFmQ291bnQgKz0gbGVhZkluY3JlbWVudDtcclxuICAgIH1cclxuICAgIGlmICghbm9kZS5zZWxlY3RDb3VudCkge1xyXG4gICAgICBub2RlLnNlbGVjdGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChub2RlLnNlbGVjdENvdW50ID09PSBub2RlLmxlYWZDb3VudCkge1xyXG4gICAgICBub2RlLnNlbGVjdGVkID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIGlmIChub2RlLnBhcmVudCkge1xyXG4gICAgICB0aGlzLl9pbmNyZW1lbnRDb3VudHMobm9kZS5wYXJlbnQsIGluY3JlbWVudCwgbGVhZkluY3JlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvLyBHZXQgU2VsZWN0aW9uIFN0YXRlXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8qKlxyXG4gICAqIEByZXR1cm5zIHNlbGVjdGlvbiBzdGF0ZSBvZiBhIG5vZGUgdGhhdCBpcyBhIHZhbHVlIGZyb20gdHJ1ZXxmYWxzZXxcIm1peGVkXCIuXHJcbiAgICovXHJcbiAgZ2V0U2VsZWN0aW9uU3RhdGUobm9kZSkge1xyXG4gICAgaWYgKCF0aGlzLmlzT3duZWQobm9kZSkpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5vZGUuc2VsZWN0Q291bnQgJiYgbm9kZS5zZWxlY3RDb3VudCAhPT0gbm9kZS5sZWFmQ291bnQgPyBcIm1peGVkXCIgOiAobm9kZS5zZWxlY3RlZCA9ICEhbm9kZS5zZWxlY3RDb3VudCk7XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvLyBDb2xsZWN0IG5vZGVzXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSBsZWF2ZXNPbmx5ICAgICAgVGhlIGxlYXZlc09ubHkgcGFyYW1ldGVycyBhZmZlY3RzIG9uIGJyYW5jaCBub2RlcyB3aG9zZSBhbGwgZGVzY2VuZGFuZCBsZWF2ZXNcclxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgIGFyZSBzZWxlY3RlZC4gSWYgbGVhdmVzT25seSBpcyBtaXNzaW5nIG9yIGZhbHNlLCB0aGUgd2hvbGUgYnJhbmNoIG5vZGVcclxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgIHdpbGwgYmUgYWRkZWQgdG8gcmVzdWx0cy4gT3RoZXJ3aXNlLCBpdHMgZGVzY2VuZGluZyBsZWF2ZXMgd2lsbCBiZSBhZGRlZC5cclxuICAgKiBAcmV0dXJucyBhbiBhcnJheSBvZiBzZWxlY3RlZCBub2Rlcy5cclxuICAgKi9cclxuICBnZXRTZWxlY3RlZE5vZGVzKGxlYXZlc09ubHkpIHtcclxuICAgIHJldHVybiB0aGlzLmdldERlc2NlbmRpbmdOb2Rlcyh0aGlzLnJvb3QsIHRydWUsIGxlYXZlc09ubHkpO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBUaGlzIG1ldGhvZCBjYW4gYmUgdXNlZCB0byB0ZXN0IGEgcHJlY29uZGl0aW9uIGJlZm9yZSBzZWxlY3RpbmcvdW5zZWxlY3RpbmcgYSBicmFuY2ggbm9kZS5cclxuICAgKiBAcGFyYW0gbGVhdmVzT25seSAgICAgIFRoZSBsZWF2ZXNPbmx5IHBhcmFtZXRlcnMgYWZmZWN0cyBvbiBicmFuY2ggbm9kZXMgd2hvc2UgYWxsIGRlc2NlbmRhbmQgbGVhdmVzXHJcbiAgICogICAgICAgICAgICAgICAgICAgICAgICB3aWxsIGJlIGFkZGVkIHRvIHJlc3VsdHMuIE90aGVyd2lzZSwgaXRzIGRlc2NlbmRpbmcgbGVhdmVzIHdpbGwgYmUgYWRkZWQuXHJcbiAgICogQHJldHVybnMgYW4gYXJyYXkgb2YgZGVjc2VuZGluZyBub2RlcyB3aGljaCBoYXZlIHRoZSBnaXZlbiBzdGF0ZS5cclxuICAgKi9cclxuICBnZXREZXNjZW5kaW5nTm9kZXMobm9kZSwgc2VsZWN0ZWQsIGxlYXZlc09ubHkpIHtcclxuICAgIGlmICghdGhpcy5pc093bmVkKG5vZGUpKSB7XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuICAgIGNvbnN0IGNvbGxlY3RlZE5vZGVzID0gW107XHJcbiAgICB0aGlzLl9jb2xsZWN0Tm9kZXMobm9kZS5jaGlsZHJlbiwgY29sbGVjdGVkTm9kZXMsIHNlbGVjdGVkLCBsZWF2ZXNPbmx5KTtcclxuICAgIHJldHVybiBjb2xsZWN0ZWROb2RlcztcclxuICB9XHJcbiAgX2NvbGxlY3ROb2Rlcyhub2RlcywgY29sbGVjdGVkTm9kZXMsIHNlbGVjdGVkLCBsZWF2ZXNPbmx5KSB7XHJcbiAgICBub2Rlcy5mb3JFYWNoKChub2RlKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1hdGNoQ291bnQgPSBzZWxlY3RlZCA9PT0gbnVsbCB8fCBzZWxlY3RlZCA9PT0gdW5kZWZpbmVkXHJcbiAgICAgICAgPyBub2RlLmxlYWZDb3VudFxyXG4gICAgICAgIDogc2VsZWN0ZWRcclxuICAgICAgICAgID8gbm9kZS5zZWxlY3RDb3VudFxyXG4gICAgICAgICAgOiBub2RlLmxlYWZDb3VudCAtIG5vZGUuc2VsZWN0Q291bnQ7XHJcbiAgICAgIGlmICghbWF0Y2hDb3VudCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIW5vZGUuY2hpbGRyZW4gfHwgKCFsZWF2ZXNPbmx5ICYmIG1hdGNoQ291bnQgPT09IG5vZGUubGVhZkNvdW50KSkge1xyXG4gICAgICAgIGNvbGxlY3RlZE5vZGVzLnB1c2gobm9kZSk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgdGhpcy5fY29sbGVjdE5vZGVzKG5vZGUuY2hpbGRyZW4sIGNvbGxlY3RlZE5vZGVzLCBzZWxlY3RlZCwgbGVhdmVzT25seSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy8gSW5zcGVjdCBjaGlsZHJlbiBvZiBhIHRyZWUgbm9kZVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvKipcclxuICAgKiBJbnNwZWN0cyBjaGlsZHJlbiBvZiBhIHRyZWUgbm9kZSBpbiB0aGUgb3JkZXIgc3BlY2lmaWVkIGJ5IGFuIG9wdGlvbmFsIHNvcnRpbmcgZnVuY3Rpb24uXHJcbiAgICogQHBhcmFtIG5vZGUgICAgICAgICAgICBBIG5vZGUgd2hvc2UgY2hpbGQgbm9kZXMgYXJlIGluc3BlY3RlZC4gVGhlIG51bGwgdmFsdWUgbWVhbnMgdGhlIHJvb3Qgbm9kZSBvZiB0aGUgdHJlZS5cclxuICAgKiBAcGFyYW0gaW5zcGVjdG9yICAgICAgIEZ1bmN0aW9uKG5vZGUpLiBIZXJlIHRoZSAnbm9kZScgcGFyYW1ldGVyIGlzIHRoZSBjdXJyZW50bHkgaW5zcGVjdGVkIG5vZGUuXHJcbiAgICogICAgICAgICAgICAgICAgICAgICAgICBUaGUgaW5zcGVjdG9yIGZ1bmN0aW9uIGNvdWxkIGNvbnRyb2wgdGhlIHByb2Nlc3Mgb2Ygbm9kZXMgaW5zcGVjdGlvbiBieSBhIHZhbHVlIHJldHVybmVkOlxyXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgLSB1bmRlZmluZWQgICBubyBjb250cm9sXHJcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAtIHRydWUgICAgICAgIGFsbG93cyB0byBpbnNwZWN0IHRoZSBuZXh0IG5vZGUgaW5jbHVkaW5nIHRoZSBjaGlsZCBub2RlcyBvZiB0aGUgZ2l2ZW4gbm9kZS5cclxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgIC0gZmFsc2UgICAgICAgYWxsb3dzIHRvIGluc3BlY3QgdGhlIG5leHQgc2libGluZyBub2RlIGJ1dCBkaXNhbGxvd3MgaW5zcGVjdGlvbiBvZiB0aGUgY2hpbGQgbm9kZXMgb2YgdGhlIGdpdmVuIG5vZGUuXHJcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAtIG51bGwgICAgICAgIHN0b3BzIGluc3BlY3Rpb25cclxuICAgKiBAcGFyYW0gc29ydGluZyAgICAgICAgIEZ1bmN0aW9uIChvYmoxLCBvYmoyKSA9PiBudW1iZXIuXHJcbiAgICogICAgICAgICAgICAgICAgICAgICAgICBBbiBvcHRpb25hbCBzb3J0aW5nIGZ1bmN0aW9uIGNvbnRyb2xsaW5nIHRoZSBvcmRlciBvZiBub2RlcyBpbnNwZWN0aW9ucy5cclxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgIElmIGl0IGlzIG1pc3NpbmcsIHRoZSB0cmVlIG5vZGVzIGFyZSBpbnNwZWN0ZWQgaW4gdGhlIG5hdHVyYWwgb3JkZXIuXHJcbiAgICogQHBhcmFtIHNjb3BlICAgICAgICAgICBBbiBvcHRpb25hbCBzY29wZSBvZiBleGVjdXRpb24gdGhlIGluc3BlY3RvciBmdW5jdGlvbi5cclxuICAgKi9cclxuICBpbnNwZWN0Q2hpbGRyZW4obm9kZSwgaW5zcGVjdG9yLCBzb3J0aW5nLCBzY29wZSkge1xyXG4gICAgaWYgKHNjb3BlKSB7XHJcbiAgICAgIGluc3BlY3RvciA9IGluc3BlY3Rvci5iaW5kKHNjb3BlKTtcclxuICAgIH1cclxuICAgIG5vZGUgPSBub2RlIHx8IHRoaXMucm9vdDtcclxuICAgIGxldCBjaGlsZHJlbiA9IG5vZGUuY2hpbGRyZW47XHJcbiAgICBpZiAoY2hpbGRyZW4gJiYgc29ydGluZykge1xyXG4gICAgICBjaGlsZHJlbiA9IGNoaWxkcmVuLnNsaWNlKCk7XHJcbiAgICAgIGNoaWxkcmVuLnNvcnQoc29ydGluZyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY2hpbGRyZW4uZXZlcnkoKG5vZGUpID0+IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gaW5zcGVjdG9yKG5vZGUpO1xyXG4gICAgICByZXR1cm4gcmVzdWx0ID09PSBudWxsXHJcbiAgICAgICAgPyBmYWxzZVxyXG4gICAgICAgIDogcmVzdWx0ID09PSBmYWxzZSB8fCAhbm9kZS5jaGlsZHJlblxyXG4gICAgICAgICAgPyB0cnVlXHJcbiAgICAgICAgICA6IHRoaXMuaW5zcGVjdENoaWxkcmVuKG5vZGUsIGluc3BlY3Rvciwgc29ydGluZyk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vIE5vZGVzIGV4cGFuc2lvbiBpbnRlcmZhY2VcclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLyoqXHJcbiAgICogVXBkYXRlcyBCb29sZWFuICdleHBhbmRlZCcgcHJvcGVydHkgb2YgYWxsIGJyYW5jaCBub2RlcyBhbmQgcHJvdmlkZXMgYWxsICd2aXNpYmxlJyBub2RlcyB3aXRoICdpc09kZCcgcHJvcGVydHkgdmFsdWUuXHJcbiAgICogQHBhcmFtIGV4cGFuZGVkQnJhbmNoZXMgICAgQSBjYWNoZSBvZiBicmFuY2ggbm9kZXMgd2hvc2UgZXhwYW5kZWQgdmFsdWUgaXMgYWxyZWFkeSBrbm93bi4gQSBrZXkgaXMgYSBub2RlIElEIGFuZCBpdHMgdmFsdWUgaXMgQm9vbGVhbi5cclxuICAgKiBAcGFyYW0gc29ydGluZyAgICAgICAgICAgICBBbiBvcHRpb25hbCB0cmVlIG5vZGVzIHNvcnRpbmcgZnVuY3Rpb24uXHJcbiAgICovXHJcbiAgdXBkYXRlRXhwYW5kZWROb2RlcyhleHBhbmRlZEJyYW5jaGVzLCBzb3J0aW5nKSB7XHJcbiAgICAvLyBJbnNwZWN0IGFsbCBicmFuY2ggbm9kZXNcclxuICAgIGZvciAoY29uc3QgaWQgaW4gdGhpcy5faGFzaCkge1xyXG4gICAgICBjb25zdCBub2RlID0gdGhpcy5faGFzaFtpZF07XHJcbiAgICAgIHRoaXMudXBkYXRlRXhwYW5kKG5vZGUsICEhZXhwYW5kZWRCcmFuY2hlc1tpZF0pO1xyXG4gICAgfVxyXG4gICAgLy8gSW5zcGVjdCBhbGwgdmlzaWJsZSBub2RlcyBhbmQgdXBkYXRlIHRoZWlyIGlzT2RkIHByb3BlcnR5XHJcbiAgICB0aGlzLl91cGRhdGVPZGRFdmVuKG51bGwsIHNvcnRpbmcpO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBVcGRhdGVzIEJvb2xlYW4gJ2V4cGFuZGVkJyBwcm9wZXJ0eSBvZiB0aGUgZ2l2ZW4gYnJhbmNoIG5vZGUgYW5kIHByb3ZpZGVzIGFsbCAndmlzaWJsZScgbm9kZXNcclxuICAgKiB3aXRoICdpc09kZCcgcHJvcGVydHkgdmFsdWUgKDAgb3IgMSkuXHJcbiAgICogQHBhcmFtIG5vZGUgICAgICAgICAgICAgICAgICAgICAgICBBIG5vZGUgdG8gYmUgdXBkYXRlZC5cclxuICAgKiBAcGFyYW0gZXhwYW5kZWQgICAgICAgICAgICAgICAgICAgIEV4cGFuZCB2YWx1ZS5cclxuICAgKiBAcGFyYW0gY29sbGVjdE9kZEV2ZW5DaGFuZ2VzICAgICAgIEFsbG93cyBjb2xsZWN0aW5nICd2aXNpYmxlJyBub2RlcyB3aG9zZSAnaXNPZGQnIHByb3BlcnR5IHZhbHVlIHdhcyBjaGFuZ2VkLlxyXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW4gdGhpcyBjYXNlLCB0aGUgcmVzdWx0IG9mIHRoaXMgbWV0aG9kIHdpbGwgYmUgYSBjYWNoZSBvZiBub2RlIElEcyBhcyBrZXlzXHJcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aXRoIHRoZWlyICdpc09kZCcgcHJvcGVydHkgdmFsdWVzLlxyXG4gICAqIEBwYXJhbSBzb3J0aW5nICAgICAgICAgICAgICAgICAgICAgQW4gb3B0aW9uYWwgdHJlZSBub2RlcyBzb3J0aW5nIGZ1bmN0aW9uLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMgYSBjYWNoZSBvZiBjaGFuZ2VkIG5vZGVzIG9yIGFuIGVtcHR5IG9iamVjdCBpZiBjaGFuZ2VzIHdlcmUgbm90IGNvbGxlY3RlZC5cclxuICAgKi9cclxuICB1cGRhdGVFeHBhbmQobm9kZSwgZXhwYW5kZWQsIGNvbGxlY3RPZGRFdmVuQ2hhbmdlcyA9IGZhbHNlLCBzb3J0aW5nKSB7XHJcbiAgICBpZiAoIW5vZGUpIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBsZXQgY2hhbmdlZCA9IGZhbHNlO1xyXG4gICAgaWYgKG5vZGUuY2hpbGRyZW4pIHtcclxuICAgICAgaWYgKG5vZGUuZXhwYW5kZWQgIT09IGV4cGFuZGVkKSB7XHJcbiAgICAgICAgY2hhbmdlZCA9IHRydWU7XHJcbiAgICAgICAgbm9kZS5leHBhbmRlZCA9IGV4cGFuZGVkO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBjYWNoZSA9IHt9O1xyXG4gICAgaWYgKGNoYW5nZWQgJiYgY29sbGVjdE9kZEV2ZW5DaGFuZ2VzKSB7XHJcbiAgICAgIHRoaXMuX3VwZGF0ZU9kZEV2ZW4oY2FjaGUsIHNvcnRpbmcpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNhY2hlO1xyXG4gIH1cclxuICBfdXBkYXRlT2RkRXZlbihjYWNoZSwgc29ydGluZykge1xyXG4gICAgbGV0IGlzT2RkID0gdHJ1ZTtcclxuICAgIHRoaXMuaW5zcGVjdENoaWxkcmVuKG51bGwsIChub2RlKSA9PiB7XHJcbiAgICAgIGlmIChub2RlLnZpc2libGUgIT09IGZhbHNlKSB7XHJcbiAgICAgICAgaXNPZGQgPSAhaXNPZGQ7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGNhY2hlICYmIG5vZGUuaXNPZGQgIT09IGlzT2RkKSB7XHJcbiAgICAgICAgY2FjaGVbdGhpcy5nZXRJZGVudGl0eShub2RlKV0gPSBpc09kZDtcclxuICAgICAgfVxyXG4gICAgICBub2RlLmlzT2RkID0gaXNPZGQ7XHJcbiAgICAgIHJldHVybiAhIShub2RlLmNoaWxkcmVuICYmIG5vZGUuZXhwYW5kZWQpOyAvLyBCb29sZWFuXHJcbiAgICB9LCBzb3J0aW5nLCB0aGlzKTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gbm9kZSBoYXMgYW4gb2RkIGluZGV4LlxyXG4gICAqL1xyXG4gIGlzT2RkKG5vZGUpIHtcclxuICAgIHJldHVybiBub2RlICYmIG5vZGUuaXNPZGQ7XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvLyBzdG9yZSBpbnRlcmZhY2VcclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyBhIHN0b3JlZCBub2RlIGJ5IGlkLlxyXG4gICAqL1xyXG4gIGdldChpZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2hhc2hbaWRdO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBSZXR1cm5zIHRoZSBub2RlIGlkZW50aXR5IHZhbHVlLlxyXG4gICAqL1xyXG4gIGdldElkZW50aXR5KG5vZGUpIHtcclxuICAgIHJldHVybiB0aGlzLmlkUHJvcGVydHkgPyBub2RlW3RoaXMuaWRQcm9wZXJ0eV0gOiBudWxsO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBRdWVyaWVzIHJvb3Qgbm9kZXMuXHJcbiAgICovXHJcbiAgcXVlcnkocXVlcnksIG9wdGlvbnMpIHtcclxuICAgIHJldHVybiB0aGlzLl9xdWVyeSh0aGlzLmRhdGEsIHF1ZXJ5LCBvcHRpb25zKTtcclxuICB9XHJcbiAgX3F1ZXJ5KGRhdGEsIHF1ZXJ5LCBvcHRpb25zKSB7XHJcbiAgICByZXR1cm4gdGhpcy5xdWVyeUVuZ2luZShxdWVyeSwgb3B0aW9ucykoZGF0YSk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFRlc3RzIGNoaWxkcmVuIGF2YWlsYWJpbGl0eVxyXG4gICAqL1xyXG4gIG1heUhhdmVDaGlsZHJlbihub2RlKSB7XHJcbiAgICByZXR1cm4gISFub2RlLmNoaWxkcmVuO1xyXG4gIH1cclxufVxuXG4vLyBnZW9lbnJpY2htZW50LnV0aWxzXHJcbi8qKlxyXG4gKiBJbnZva2VzIGEgc3BlY2lmaWVkIG1ldGhvZCBvZiBhIGdpdmVuIG9iamVjdCBhZnRlciB0aGUgZ2l2ZW4gZGVsYXkuXHJcbiAqIEFsbG93cyB0byBpbnZva2UgYSBtZXRob2QgbXVsdGlwbGUgdGltZXMsIGJ1dCBjYWxsIGl0IG9ubHkgb25jZS5cclxuICogQHBhcmFtIG9iamVjdCBBbiBvYmplY3QuXHJcbiAqIEBwYXJhbSBtZXRob2ROYW1lIEEgbmFtZSBvZiBtZXRob2QgdG8gYmUgY2FsbGVkLlxyXG4gKiBAcGFyYW0gdGltZW91dCBBIHRpbWVvdXQgdG8gY2FsbCB0aGlzIG1ldGhvZCBhZnRlci5cclxuICogSWYgaXQgaXMgbWlzc2luZyBvciBudWxsIGFuZCB0aGlzIG1ldGhvZCB3YXMgYWxyZWFkeSBpbnZva2VkIGJlZm9yZSxcclxuICogdGhlIHByZXZpb3VzIGludm9jYXRpb24gcHJvbWlzZSB3aWxsIGJlIHJldHVybmVkLlxyXG4gKiBAcGFyYW0gY2xlYXJQcmV2aW91c1RpbWVvdXQgSWYgdGhlIGZhbHNlIHZhbHVlIGlzIHBhc3NlZCBhbmQgdGhpcyBtZXRob2Qgd2FzIGFscmVhZHkgaW52b2tlZCBiZWZvcmUsXHJcbiAqIHRoZSBwcmV2aW91cyBpbnZvY2F0aW9uIHByb21pc2Ugd2lsbCBiZSByZXR1cm5lZC5cclxuICogT3RoZXJ3aXNlLCB0aGUgd2FpdGluZyB3aWxsIHN0YXJ0IG92ZXIgYWdhaW4gd2l0aCB0aGUgc3BlY2lmaWVkIHRpbWVvdXQuXHJcbiAqIEBwYXJhbSBhcmdzIEFyZ3VtZW50cyB0byBiZSBwYXNzZWQgdG8gdGhlIG1ldGhvZC5cclxuICogQHJldHVybnMgQSBwcm9taXNlIHJlc29sdmVkIHdpdGggdGhlIHJlc3VsdCBvZiB0aGUgbWV0aG9kIGNhbGwuXHJcbiAqL1xyXG5mdW5jdGlvbiBpbnZva2Uob2JqZWN0LCBtZXRob2ROYW1lLCB0aW1lb3V0LCBjbGVhclByZXZpb3VzVGltZW91dCwgYXJncykge1xyXG4gIGNvbnN0IG9iaiA9IG9iamVjdDtcclxuICAvLyBjcmVhdGUgYW4gaW50ZXJuYWwgaGFzaCBpZiBuZWNlc3NhcnlcclxuICBpZiAoIW9iai5fX2ludm9rZUluZm8pIHtcclxuICAgIG9iai5fX2ludm9rZUluZm8gPSB7fTtcclxuICB9XHJcbiAgbGV0IGludm9rZUluZm8gPSBvYmouX19pbnZva2VJbmZvW21ldGhvZE5hbWVdO1xyXG4gIC8vIGNoZWNrIGlmIG5lZWQgdG8gcmVtb3ZlIHRoZSBwcmV2aW91cyByZWNvcmRcclxuICBpZiAoaW52b2tlSW5mbykge1xyXG4gICAgaWYgKHRpbWVvdXQgPT0gbnVsbCAvKiBudWxsIG9yIHVuZGVmaW5lZCAqLyB8fCBjbGVhclByZXZpb3VzVGltZW91dCA9PT0gZmFsc2UpIHtcclxuICAgICAgcmV0dXJuIGludm9rZUluZm8uZGZkLnByb21pc2U7XHJcbiAgICB9XHJcbiAgICBjbGVhclRpbWVvdXQoaW52b2tlSW5mby5oYW5kbGUpO1xyXG4gIH1cclxuICAvLyBjcmVhdGUgYW4gaW5mbyBvYmplY3RcclxuICBpZiAoIWludm9rZUluZm8pIHtcclxuICAgIGludm9rZUluZm8gPSB7XHJcbiAgICAgIGRmZDogY3JlYXRlRGVmZXJyZWQoKSxcclxuICAgICAgaGFuZGxlOiBudWxsXHJcbiAgICB9O1xyXG4gICAgb2JqLl9faW52b2tlSW5mb1ttZXRob2ROYW1lXSA9IGludm9rZUluZm87XHJcbiAgfVxyXG4gIC8vIHN0YXJ0IHRoZSB0aW1lclxyXG4gIGludm9rZUluZm8uaGFuZGxlID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICBvYmouX19pbnZva2VJbmZvW21ldGhvZE5hbWVdID0gdW5kZWZpbmVkO1xyXG4gICAgd2hlbihhcmdzID8gb2JqW21ldGhvZE5hbWVdLmFwcGx5KG9iaiwgYXJncykgOiBvYmpbbWV0aG9kTmFtZV0oKSkudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgIGludm9rZUluZm8uZGZkLnJlc29sdmUocmVzdWx0KTtcclxuICAgIH0sIChlcnJvcikgPT4ge1xyXG4gICAgICBpbnZva2VJbmZvLmRmZC5yZWplY3QoZXJyb3IpO1xyXG4gICAgfSk7XHJcbiAgfSwgdGltZW91dCB8fCAwKTtcclxuICByZXR1cm4gaW52b2tlSW5mby5kZmQucHJvbWlzZTtcclxufVxuXG4vKipcclxuICogUmVnaXN0ZXJzIGEgbm9kZSBhcyBhIGJ1dHRvbiAtIHNldHMgXCJ0YWJpbmRleFwiLCBcImFyaWEtbGFiZWxcIiBhbmQgaW5zdGFsbCB0aGUga2V5Ym9hcmQgZXZlbnRzIGxpc3RlbmVyLlxyXG4gKiBAcGFyYW0gbm9kZSBBIGJ1dHRvbiBub2RlLlxyXG4gKiBAcGFyYW0gbGlzdGVuZXIgQSBsaXN0ZW5lciB0byBiZSBjYWxsZWQgb24gRW50ZXIvUmV0dXJuIGtleSBwcmVzcy5cclxuICogQHBhcmFtIGxhYmVsIEFyaWEgbGFiZWwuXHJcbiAqL1xyXG5mdW5jdGlvbiByZWdpc3RlckJ1dHRvbihub2RlLCBsaXN0ZW5lciwgbGFiZWwsIHRhYkluZGV4KSB7XHJcbiAgdGFiSW5kZXggJiYgbm9kZS5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLCB0YWJJbmRleCk7XHJcbiAgbGFiZWwgJiYgbm9kZS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIGxhYmVsKTtcclxuICBvbihub2RlLCBcImtleWRvd25cIiwgKGUpID0+IHtcclxuICAgIGlmIChlLmtleUNvZGUgPT09IDEzKSB7XHJcbiAgICAgIC8vIFRoZSBFbnRlci9SZXR1cm4ga2V5XHJcbiAgICAgIGxpc3RlbmVyKGUpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59XG5cbi8qKlxyXG4gKiBDaGVja2JveCB3aWRnZXQuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIDEuIFN0YW5kLWFsb25lIGNoZWNrYm94IHdpdGggbm8gbGFiZWwsIHBsYWNlZCBpbnNpZGUgYSBkaXYuXHJcbiAqICAgICAgY29uc3QgY2hlY2tib3ggPSBuZXcgVHJpU3RhdGVJdGVtKHsgY2hlY2tlZDogXCJtaXhlZFwiIH0sIGRpdk5vZGUpO1xyXG4gKlxyXG4gKiAyLiBJbi1sYWJlbCBjaGVja2JveC5cclxuICogICAgICBjb25zdCBjaGVja2JveCA9IG5ldyBUcmlTdGF0ZUl0ZW0oeyBjaGVja2VkOiB0cnVlIH0sIGxhYmVsTm9kZSk7XHJcbiAqXHJcbiAqIDMuIEluLWxhYmVsIGNoZWNrYm94IGNyZWF0ZWQgZnJvbSB0ZXh0LlxyXG4gKiAgICAgIGNvbnN0IGNoZWNrYm94ID0gbmV3IFRyaVN0YXRlSXRlbSh7IGNoZWNrZWQ6IHRydWUsIGxhYmVsVGV4dDogXCJUaGlzIHRleHQgd2lsbCBhcHBlYXIgaW4gYSBuZXcgbGFiZWxcIiB9LCBkaXZOb2RlKTtcclxuICogICAgICBjaGVja2JveC5vbkNsaWNrID0gKCkgPT4geyB9OyAvLyBjbGljayBoYW5kbGVyXHJcbiAqL1xyXG5sZXQgVHJpU3RhdGVJdGVtID0gY2xhc3MgVHJpU3RhdGVJdGVtIGV4dGVuZHMgVGVtcGxhdGVkV2lkZ2V0IHtcclxuICAvKipcclxuICAgKiBPbiBjbGljayBjb25uZWN0b3IgZnVuY3Rpb24uXHJcbiAgICogVGhlIGV2ZW50LmNoZWNrZWQgcHJvcGVydHkgY29udGFpbnMgdGhlIGN1cnJlbnQgY2hlY2tlZCBzdGF0ZSBvZiB0aGlzIGl0ZW0uXHJcbiAgICovXHJcbiAgb25DbGljayhfZXZlbnQpIHsgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vIEdldHRlcnMgJiBzZXR0ZXJzXHJcbiAgLy9cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgZ2V0IHNjYWxlKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2NoZWNrYm94LnNjYWxlO1xyXG4gIH1cclxuICAvLyAxMngxNSwgMTR4MTcsIDE2eDE5XHJcbiAgc2V0IHNjYWxlKHZhbHVlKSB7XHJcbiAgICBpZiAodGhpcy5fY2hlY2tib3gpIHtcclxuICAgICAgdGhpcy5fY2hlY2tib3guc2NhbGUgPSB2YWx1ZTtcclxuICAgICAgcmVwbGFjZUNsYXNzKHRoaXMuX2NoZWNrYm94Tm9kZSwgXCJzY2FsZV9cIiArIHZhbHVlLCBcInNjYWxlX3Mgc2NhbGVfbSBzY2FsZV9sXCIpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHRoaXMuX2luaXRpYWxTY2FsZSA9IHZhbHVlO1xyXG4gICAgfVxyXG4gIH1cclxuICBnZXQgY2hlY2tlZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9jaGVja2VkO1xyXG4gIH1cclxuICBzZXQgY2hlY2tlZCh2YWx1ZSkge1xyXG4gICAgaWYgKHZhbHVlID09PSBcIm1peGVkXCIpIHtcclxuICAgICAgdGhpcy5fY2hlY2tlZCA9IHZhbHVlO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHRoaXMuX2NoZWNrZWQgPSB0aGlzLl9sYXN0Q2hlY2tlZCA9ICEhdmFsdWU7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5fY2hlY2tib3gpIHtcclxuICAgICAgdGhpcy5fY2hlY2tib3guaW5kZXRlcm1pbmF0ZSA9IHZhbHVlID09PSBcIm1peGVkXCI7XHJcbiAgICAgIHRoaXMuX2NoZWNrYm94LmNoZWNrZWQgPSB0aGlzLl9sYXN0Q2hlY2tlZDtcclxuICAgIH1cclxuICB9XHJcbiAgZ2V0IGRpc2FibGVkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2Rpc2FibGVkO1xyXG4gIH1cclxuICBzZXQgZGlzYWJsZWQodmFsdWUpIHtcclxuICAgIHRoaXMuX2Rpc2FibGVkID0gdmFsdWU7XHJcbiAgICB0aGlzLl9jaGVja2JveCAmJiAodGhpcy5fY2hlY2tib3guZGlzYWJsZWQgPSB2YWx1ZSk7XHJcbiAgfVxyXG4gIGdldCBzaGFkb3dSb290UmVhZHkoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fc2hhZG93Um9vdFJlYWR5UHJvbWlzZVxyXG4gICAgICA/IHRoaXMuX3NoYWRvd1Jvb3RSZWFkeVByb21pc2UgLy8gd2UgbmVlZCB0byBzdG9yZSB0aGlzIGVuZGVkIHByb21pc2UgZm9yIHNoYWRvd1Jvb3RSZWFkeSBwcm9wZXJ0eVxyXG4gICAgICA6ICh0aGlzLl9zaGFkb3dSb290UmVhZHlQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChyZWNvcmRzLCBfKSA9PiB7XHJcbiAgICAgICAgICBvYnNlcnZlci5kaXNjb25uZWN0KCk7IC8vIGNhbGNpdGUgYWRkcyB0aGVzZSBub2RlcyBieSB3aG9sZSBwaWVjZSwgc28gd2UgY2FuIGRpc2Nvbm5lY3QgYWZ0ZXIgcmVjaWV2aW5nIGFueXRoaW5nXHJcbiAgICAgICAgICBpZiAocmVjb3Jkc1swXS5hZGRlZE5vZGVzWzBdLnRhZ05hbWUgPT09IFwiU1RZTEVcIikge1xyXG4gICAgICAgICAgICAvLyBpbiBmaXJlZm94IGNhbGNpdGUgaW5qZWN0cyBhZGRpdGlvbmFsIDxzdHlsZT4gYmxvY2tcclxuICAgICAgICAgICAgcmVzb2x2ZShyZWNvcmRzWzFdLmFkZGVkTm9kZXNbMF0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGluIGNocm9tZSB0aGVyZSdzIG9ubHkgb25lIGRpdi5jb250YWluZXIgYmxvY2tcclxuICAgICAgICAgICAgcmVzb2x2ZShyZWNvcmRzWzBdLmFkZGVkTm9kZXNbMF0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIG9ic2VydmVyLm9ic2VydmUodGhpcy5fY2hlY2tib3guc2hhZG93Um9vdCwgeyBjaGlsZExpc3Q6IHRydWUsIHN1YnRyZWU6IHRydWUgfSk7XHJcbiAgICAgIH0pKTtcclxuICB9XHJcbiAgZ2V0IGlucHV0Tm9kZSgpIHtcclxuICAgIHZhciBfYTtcclxuICAgIHJldHVybiAoKF9hID0gdGhpcy5faW5wdXROb2RlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAodGhpcy5faW5wdXROb2RlID0gdGhpcy5zaGFkb3dSb290UmVhZHkudGhlbigoXykgPT4gdGhpcy5fY2hlY2tib3gucXVlcnlTZWxlY3RvcihcImlucHV0XCIpKSkpO1xyXG4gIH1cclxuICBzZXQgYXJpYUxhYmVsKHRleHQpIHtcclxuICAgIHRoaXMuX2FyaWFMYWJlbCA9IHRleHQ7XHJcbiAgICB0aGlzLl9mb2N1c05vZGUgJiYgdGhpcy5fZm9jdXNOb2RlLnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgdGV4dCk7XHJcbiAgfVxyXG4gIGdldCBhcmlhTGFiZWwoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fYXJpYUxhYmVsO1xyXG4gIH1cclxuICBnZXQgZm9jdXNOb2RlKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2ZvY3VzTm9kZTtcclxuICB9XHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vXHJcbiAgLy8gSW5pdGlhbGl6YXRpb25cclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvKipcclxuICAgKiBDdG9yLlxyXG4gICAqIEBleGFtcGxlXHJcbiAgICogY29uc3QgY2hlY2tib3ggPSBuZXcgVHJpU3RhdGVJdGVtKG51bGwsIHRoaXMuX2NoZWNrYm94TGFiZWwpO1xyXG4gICAqXHJcbiAgICogQHBhcmFtIHBhcmFtcyBDaGVja2JveCBwYXJhbWV0ZXJzLlxyXG4gICAqXHJcbiAgICogSWYgbGFiZWxUZXh0IGlzIHNwZWNpZmllZCwgdGhlIGNoZWNrYm94IHdpbGwgYmUgd3JhcHBlZCB3aXRoIGxhYmVsIGhhdmluZyB0aGlzIHRleHQuXHJcbiAgICogSWYgcmVmTm9kZSBpcyBhIGxhYmVsIGVsZW1lbnQsIHRoaXMgdGV4dCB3aWxsIGJlIGFzc2lnbmVkIHRvIGl0LlxyXG4gICAqIE90aGVyd2lzZSwgYSBuZXcgbGFiZWwgZWxlbWVudCB3aWxsIGJlIGNyZWF0ZWQgYW5kIHdpbGwgYmUgc2V0IGFzIGRvbU5vZGUuXHJcbiAgICogSW4gdGhpcyBjYXNlLCB0aGUgYWRkaXRpb25hbCBsYWJlbEF0dHJzIGNhbiBiZSBwcm92aWRlZCBmb3IgdGhlIGxhYmVsIGVsZW1lbnQuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gcmVmTm9kZSBBIHJlZmVyZW5jZSBub2RlIHRvIEFERCBjaGVja2JveCBpbnRvLlxyXG4gICAqIE9wcG9zaXRlIHRvIG90aGVyIHdpZGdldHMsIGNoZWNrYm94IG5vZGUgZG9lc24ndCByZXBsYWNlIHRoZSByZWZlcmVuY2Ugbm9kZS5cclxuICAgKiBJbiBvdGhlciB3b3JkcywgdGhpcyBjb25zdHJ1Y3RvciB3b3JrcyB0aGUgc2FtZSB3YXkgYXMgRG9tVXRpbC5jcmVhdGUuXHJcbiAgICpcclxuICAgKiBJZiByZWZlcmVuY2Ugbm9kZSBpcyBhIGxhYmVsIGVsZW1lbnQsIHRoZSBjaGVja2JveCBpcyBhZGRlZCBhcyB0aGUgZmlyc3QgY2hpbGRcclxuICAgKiBvZiB0aGUgcmVmZXJlbmNlIG5vZGUgYW5kIGNsaWNrIG9uIGxhYmVsIHdpbGwgd29yayB0aGUgc2FtZSB3YXkgYXMgY2xpY2sgb24gY2hlY2tib3guXHJcbiAgICpcclxuICAgKiBAcGFyYW0gcG9zaXRpb24gUG9zaXRpb24gdG8gYWRkIGNoZWNrYm94IGludG8gY2hpbGRyZW4gb2YgcmVmZXJlbmNlIG5vZGUuXHJcbiAgICogSWYgcmVmZXJlbmNlIG5vZGUgaXMgYSBsYWJlbCBlbGVtZW50LCB0aGUgcG9zaXRpb24gaXMgaWdub3JlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3RvcihwYXJhbXMsIHJlZk5vZGUsIHBvc2l0aW9uKSB7XHJcbiAgICBzdXBlcihwYXJhbXMsIHJlZk5vZGUsIHBvc2l0aW9uKTtcclxuICAgIHRoaXMuX2xhc3RDaGVja2VkID0gZmFsc2U7XHJcbiAgfVxyXG4gIGJ1aWxkUmVuZGVyaW5nKCkge1xyXG4gICAgbGV0IHJlZk5vZGUgPSB0aGlzLl9yZWZOb2RlO1xyXG4gICAgbGV0IGxhYmVsTm9kZTtcclxuICAgIGlmICh0aGlzLmxhYmVsVGV4dCkge1xyXG4gICAgICBpZiAocmVmTm9kZSBpbnN0YW5jZW9mIEhUTUxMYWJlbEVsZW1lbnQpIHtcclxuICAgICAgICByZWZOb2RlLmlubmVySFRNTCA9IFwiJm5ic3A7XCIgKyB0aGlzLmxhYmVsVGV4dDtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBjb25zdCBsYWJlbEF0dHJzID0gdGhpcy5sYWJlbEF0dHJzIHx8IHt9O1xyXG4gICAgICAgIGxhYmVsQXR0cnMuaW5uZXJIVE1MID0gXCImbmJzcDtcIiArIHRoaXMubGFiZWxUZXh0O1xyXG4gICAgICAgIGxhYmVsTm9kZSA9IGNyZWF0ZShcImxhYmVsXCIsIGxhYmVsQXR0cnMpO1xyXG4gICAgICAgIHJlZk5vZGUgJiYgcGxhY2UobGFiZWxOb2RlLCByZWZOb2RlKTtcclxuICAgICAgICByZWZOb2RlID0gbGFiZWxOb2RlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLl9jaGVja2JveE5vZGUgPSBjcmVhdGUoXCJkaXZcIiwgbnVsbCwgcmVmTm9kZSwgcmVmTm9kZSBpbnN0YW5jZW9mIEhUTUxMYWJlbEVsZW1lbnQgPyBcImZpcnN0XCIgOiB0aGlzLl9yZWZQb3NpdGlvbik7XHJcbiAgICByZWZOb2RlIGluc3RhbmNlb2YgSFRNTExhYmVsRWxlbWVudCAmJiAodGhpcy5fcGFyZW50TGFiZWwgPSByZWZOb2RlKTtcclxuICAgIHRoaXMuY2xhc3MgJiYgYWRkQ2xhc3ModGhpcy5fY2hlY2tib3hOb2RlLCB0aGlzLmNsYXNzKTtcclxuICAgIHRoaXMuZG9tTm9kZSA9IGxhYmVsTm9kZSB8fCB0aGlzLl9jaGVja2JveE5vZGU7XHJcbiAgICBkZWxldGUgdGhpcy5fcmVmTm9kZTtcclxuICAgIGRlbGV0ZSB0aGlzLl9yZWZQb3NpdGlvbjtcclxuICB9XHJcbiAgcG9zdENyZWF0ZSgpIHtcclxuICAgIC8vIENhbid0IGFzc2lnbiBkZWZhdWx0IHZhbHVlcyBpbiBwcm9wZXJ0aWVzISBUaGV5IHdpbGwgb3ZlcnJpZGUgc2V0dGluZ3MgZnJvbSBwYXJhbWV0ZXJzLlxyXG4gICAgaWYgKHRoaXMuYXV0b1RvZ2dsZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHRoaXMuYXV0b1RvZ2dsZSA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5fY2hlY2tlZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHRoaXMuX2NoZWNrZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLl9kaXNhYmxlZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHRoaXMuX2Rpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICAvLyBDcmVhdGUgY2hlY2tib3hcclxuICAgIHRoaXMuX2NoZWNrYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbGNpdGUtY2hlY2tib3hcIik7XHJcbiAgICB0aGlzLl9jaGVja2JveC5jaGVja2VkID0gdGhpcy5fbGFzdENoZWNrZWQ7XHJcbiAgICB0aGlzLl9jaGVja2JveC5pbmRldGVybWluYXRlID0gdGhpcy5fY2hlY2tlZCA9PT0gXCJtaXhlZFwiO1xyXG4gICAgdGhpcy5fY2hlY2tib3guZGlzYWJsZWQgPSB0aGlzLl9kaXNhYmxlZDtcclxuICAgIHRoaXMuX2NoZWNrYm94LmNsYXNzTmFtZSA9IFwiZXNyaVRyaVN0YXRlSXRlbUNhbGNpdGVfY2hlY2tib3hcIjtcclxuICAgIHBsYWNlKHRoaXMuX2NoZWNrYm94LCB0aGlzLl9jaGVja2JveE5vZGUpO1xyXG4gICAgYWRkQ2xhc3ModGhpcy5fY2hlY2tib3hOb2RlLCBcImVzcmlUcmlTdGF0ZUl0ZW1DYWxjaXRlXCIpO1xyXG4gICAgLy8gU2V0IHNjYWxlXHJcbiAgICB0aGlzLnNjYWxlID0gdGhpcy5faW5pdGlhbFNjYWxlIHx8IFwibVwiO1xyXG4gICAgY29uc3Qgb25DbGljayA9IChlKSA9PiB7XHJcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgaWYgKCF0aGlzLl9kaXNhYmxlZCkge1xyXG4gICAgICAgIGlmICh0aGlzLmF1dG9Ub2dnbGUpIHtcclxuICAgICAgICAgIHRoaXMudG9nZ2xlKCk7XHJcbiAgICAgICAgICBlLmNoZWNrZWQgPSB0aGlzLmNoZWNrZWQ7XHJcbiAgICAgICAgICB0aGlzLm9uQ2xpY2soZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgLy8gVGhlIGV2ZW50IGFueXdheSBwcm9wYWdhdGVzIHRvIHNoYWRvdyByb290LlxyXG4gICAgICAgICAgLy8gTmVlZCByZXN0b3JlIHRoZSBzdGF0ZSBvZiBjaGVja2JveCBvbiB0aGUgbmV4dCBzdGFnZS5cclxuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9jaGVja2JveC5pbmRldGVybWluYXRlID0gdGhpcy5fY2hlY2tlZCA9PT0gXCJtaXhlZFwiO1xyXG4gICAgICAgICAgICB0aGlzLl9jaGVja2JveC5jaGVja2VkID0gdGhpcy5fbGFzdENoZWNrZWQ7XHJcbiAgICAgICAgICAgIGUuY2hlY2tlZCA9IHRoaXMuY2hlY2tlZDtcclxuICAgICAgICAgICAgdGhpcy5vbkNsaWNrKGUpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgLy8gQWRkIGV2ZW50IGxpc3RlbmVyXHJcbiAgICBjb25zdCByZWZOb2RlID0gdGhpcy5fY2hlY2tib3hOb2RlLnBhcmVudEVsZW1lbnQ7XHJcbiAgICBpZiAocmVmTm9kZSBpbnN0YW5jZW9mIEhUTUxMYWJlbEVsZW1lbnQpIHtcclxuICAgICAgb24ocmVmTm9kZSwgXCJjbGlja1wiLCBvbkNsaWNrKTtcclxuICAgICAgYWRkQ2xhc3MocmVmTm9kZSwgXCJlc3JpVHJpU3RhdGVDaGVja0JveExhYmVsXCIpO1xyXG4gICAgICB0aGlzLl9mb2N1c05vZGUgPSByZWZOb2RlO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIG9uKHRoaXMuX2NoZWNrYm94Tm9kZSwgXCJjbGlja1wiLCBvbkNsaWNrKTtcclxuICAgICAgdGhpcy5fZm9jdXNOb2RlID0gdGhpcy5fY2hlY2tib3hOb2RlO1xyXG4gICAgfVxyXG4gICAgdGhpcy5lbmFibGVUYWJiaW5nICYmIHJlZ2lzdGVyQnV0dG9uKHRoaXMuX2ZvY3VzTm9kZSwgb25DbGljayk7XHJcbiAgICAvLyBTZXQgYXJpYS1sYWJlbFxyXG4gICAgY29uc3QgbGFiZWwgPSB0aGlzLl9hcmlhTGFiZWwgfHwgdGhpcy5sYWJlbFRleHQ7XHJcbiAgICBsYWJlbCAmJiAodGhpcy5hcmlhTGFiZWwgPSBsYWJlbCk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFRvZ2dsZSBjaGVja2JveC5cclxuICAgKiBAcmV0dXJucyBUaGUgbmV3IHN0YXRlLlxyXG4gICAqL1xyXG4gIHRvZ2dsZSgpIHtcclxuICAgIHRoaXMuX2NoZWNrYm94LmluZGV0ZXJtaW5hdGUgPSBmYWxzZTtcclxuICAgIHRoaXMuX2NoZWNrYm94LmNoZWNrZWQgPSB0aGlzLl9jaGVja2VkID0gdGhpcy5fbGFzdENoZWNrZWQgPSAhdGhpcy5fbGFzdENoZWNrZWQ7XHJcbiAgICByZXR1cm4gdGhpcy5fY2hlY2tlZDtcclxuICB9XHJcbiAgdXBkYXRlTGFiZWwodGV4dCkge1xyXG4gICAgaWYgKHRoaXMuX3BhcmVudExhYmVsKSB7XHJcbiAgICAgIHRoaXMuX3BhcmVudExhYmVsLnJlbW92ZUNoaWxkKHRoaXMuX2NoZWNrYm94Tm9kZSk7XHJcbiAgICAgIHRoaXMuX3BhcmVudExhYmVsLmlubmVySFRNTCA9IFwiJm5ic3A7XCIgKyB0ZXh0O1xyXG4gICAgICBwbGFjZSh0aGlzLl9jaGVja2JveE5vZGUsIHRoaXMuX3BhcmVudExhYmVsLCBcImZpcnN0XCIpO1xyXG4gICAgICB0aGlzLmFyaWFMYWJlbCA9IHRleHQ7XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoe1xyXG4gICAgY29uc3RydWN0T25seTogdHJ1ZVxyXG4gIH0pXHJcbl0sIFRyaVN0YXRlSXRlbS5wcm90b3R5cGUsIFwibGFiZWxUZXh0XCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gIHkkcih7XHJcbiAgICBjb25zdHJ1Y3RPbmx5OiB0cnVlXHJcbiAgfSlcclxuXSwgVHJpU3RhdGVJdGVtLnByb3RvdHlwZSwgXCJsYWJlbEF0dHJzXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gIHkkcigpXHJcbl0sIFRyaVN0YXRlSXRlbS5wcm90b3R5cGUsIFwib25DbGlja1wiLCBudWxsKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKClcclxuXSwgVHJpU3RhdGVJdGVtLnByb3RvdHlwZSwgXCJhdXRvVG9nZ2xlXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gIHkkcih7XHJcbiAgICBjb25zdHJ1Y3RPbmx5OiB0cnVlXHJcbiAgfSlcclxuXSwgVHJpU3RhdGVJdGVtLnByb3RvdHlwZSwgXCJlbmFibGVUYWJiaW5nXCIsIHZvaWQgMCk7XHJcblRyaVN0YXRlSXRlbSA9IF9fZGVjb3JhdGUoW1xyXG4gIGkkWCgpXHJcbl0sIFRyaVN0YXRlSXRlbSk7XG5cbi8vIGdlb2VucmljaG1lbnQudXRpbHNcclxuY2xhc3MgU2VsZWN0YWJsZVRyZWVMaXN0UmVuZGVyZXIgZXh0ZW5kcyBGbG93TGlzdERlZmF1bHRJdGVtUmVuZGVyZXIge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcclxuICAgIHRoaXMuY2hpbGRMaXN0cyA9IHt9O1xyXG4gICAgdGhpcy5fbGFzdENsaWNrZWRJdGVtID0gbnVsbDtcclxuICAgIHRoaXMuX2NhY2hlID0ge307XHJcbiAgfVxyXG4gIGNyZWF0ZVByZXNlbnRhdGlvbihpdGVtLCBfLCBsaXN0Tm9kZSwgbGlzdCkge1xyXG4gICAgY29uc3QgaGFzQ2hpbGRyZW4gPSBpdGVtLmNoaWxkcmVuICYmIGl0ZW0uY2hpbGRyZW4ubGVuZ3RoO1xyXG4gICAgY29uc3Qgcm9vdCA9IGhhc0NoaWxkcmVuICYmIGNyZWF0ZShcImRpdlwiLCB7IGNsYXNzOiBcImNoaWxkcmVuTGlzdFJvb3RcIiB9LCBsaXN0Tm9kZSk7XHJcbiAgICBjb25zdCByb3dSb290ID0gY3JlYXRlKFwiZGl2XCIsIHsgY2xhc3M6IFwiZXNyaUdFVHJpbVdpdGhFbGxpcHNlcyBsaXN0SXRlbVwiIH0sIHJvb3QgfHwgbGlzdE5vZGUpO1xyXG4gICAgY29uc3QgZXhwYW5kb0ljb24gPSBjcmVhdGUoXCJkaXZcIiwgeyBjbGFzczogXCJleHBhbmRvSWNvblwiIH0sIHJvd1Jvb3QpO1xyXG4gICAgY29uc3QgY2hlY2tib3ggPSBuZXcgVHJpU3RhdGVJdGVtKG51bGwsIHJvd1Jvb3QpO1xyXG4gICAgY2hlY2tib3guYXV0b1RvZ2dsZSA9IGZhbHNlO1xyXG4gICAgY29uc3QgaXRlbUJpbmRpbmcgPSB7XHJcbiAgICAgIGl0ZW0sXHJcbiAgICAgIHJvd1Jvb3QsXHJcbiAgICAgIGxpc3QsXHJcbiAgICAgIGV4cGFuZG9JY29uLFxyXG4gICAgICBjaGVja2JveFxyXG4gICAgfTtcclxuICAgIHRoaXMuX2NhY2hlW2l0ZW1bdGhpcy5pZFByb3BlcnR5XV0gPSBpdGVtQmluZGluZztcclxuICAgIGlmICh0aGlzLnRvcExpc3Qucm93UmVuZGVyZXIpIHtcclxuICAgICAgdGhpcy50b3BMaXN0LnJvd1JlbmRlcmVyKGl0ZW0sIHJvd1Jvb3QsIGNoZWNrYm94LCBpdGVtQmluZGluZyk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgY3JlYXRlKFwiZGl2XCIsIHsgY2xhc3M6IFwiaXRlbVNwYWNlclwiLCBpbm5lckhUTUw6IFwiJm5ic3A7XCIgfSwgcm93Um9vdCk7XHJcbiAgICAgIGNyZWF0ZShcInNwYW5cIiwgeyB0ZXh0Q29udGVudDogaXRlbVt0aGlzLnRvcExpc3QubGFiZWxQcm9wZXJ0eV0gfSwgcm93Um9vdCk7XHJcbiAgICB9XHJcbiAgICAvLyBSRU5ERVIgQ0hJTERSRU5cclxuICAgIGlmIChoYXNDaGlsZHJlbikge1xyXG4gICAgICBjb25zdCBjaGlsZHJlbkxpc3RSb290ID0gKGl0ZW1CaW5kaW5nLmNoaWxkcmVuTGlzdFJvb3QgPSBjcmVhdGUoXCJkaXZcIiwgeyBjbGFzczogXCJjaGlsZHJlbkxpc3RSb290XCIgfSwgcm9vdCkpO1xyXG4gICAgICBjaGlsZHJlbkxpc3RSb290LnN0eWxlW2lzQm9keUx0cigpID8gXCJtYXJnaW5MZWZ0XCIgOiBcIm1hcmdpblJpZ2h0XCJdID0gKGl0ZW0uZGVlcG5lc3MgKyAxKSAqIDIwICsgXCJweFwiO1xyXG4gICAgICAvLyBFWFBBTkRFIEhBTkRMSU5HXHJcbiAgICAgIG9uKGV4cGFuZG9JY29uLCBcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLnNldEV4cGFuZGVkKGl0ZW0sICFpdGVtLmV4cGFuZGVkLCBmYWxzZSwgdHJ1ZSk7XHJcbiAgICAgICAgdGhpcy50b3BMaXN0Lm9uRXhwYW5kQ2hhbmdlZFVzZXIoaXRlbSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLl9oYW5kbGVFeHBhbmQoaXRlbSwgZmFsc2UpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIGlmICh0aGlzLnRvcExpc3QuaGlkZUludmlzaWJsZUV4cGFuZG9JY29ucykge1xyXG4gICAgICAgIGV4cGFuZG9JY29uLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBleHBhbmRvSWNvbi5zdHlsZS5vcGFjaXR5ID0gXCIwLjAwMVwiO1xyXG4gICAgICB9XHJcbiAgICAgIGV4cGFuZG9JY29uLnN0eWxlLmN1cnNvciA9IFwiZGVmYXVsdFwiO1xyXG4gICAgfVxyXG4gICAgLy8gU0VMRUNUSU9OXHJcbiAgICB0aGlzLnVwZGF0ZVNlbGVjdGlvbihpdGVtKTtcclxuICAgIC8vIENMSUNLIEhBTkRMSU5HXHJcbiAgICBjaGVja2JveC5vbkNsaWNrID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuZXhlY3V0ZVNlbGVjdGlvbkNsaWNrKGl0ZW0sIGV2ZW50KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gcm93Um9vdDtcclxuICB9XHJcbiAgZXhlY3V0ZVNlbGVjdGlvbkNsaWNrKGl0ZW0sIGV2ZW50KSB7XHJcbiAgICBjb25zdCBzZWxlY3Rpb25TdGF0ZSA9IHRoaXMudG9wTGlzdC5nZXRTZWxlY3RlZFN0YXRlKHRydWUpO1xyXG4gICAgY29uc3QgaW5mbyA9IHRoaXMuX2NhY2hlW2l0ZW1bdGhpcy5pZFByb3BlcnR5XV07XHJcbiAgICBjb25zdCBpdGVtcyA9IGluZm8ubGlzdC5pdGVtcztcclxuICAgIGlmIChldmVudCAmJiBldmVudC5zaGlmdEtleSAmJiB0aGlzLl9sYXN0Q2xpY2tlZEl0ZW0gJiYgaXRlbXMuaW5kZXhPZih0aGlzLl9sYXN0Q2xpY2tlZEl0ZW0pICE9PSAtMSkge1xyXG4gICAgICBjb25zdCBmcm9tSW5kZXggPSBpdGVtcy5pbmRleE9mKHRoaXMuX2xhc3RDbGlja2VkSXRlbSk7XHJcbiAgICAgIGNvbnN0IHRvSW5kZXggPSBpdGVtcy5pbmRleE9mKGl0ZW0pO1xyXG4gICAgICBjb25zdCBtaW5JbmRleCA9IE1hdGgubWluKGZyb21JbmRleCwgdG9JbmRleCk7XHJcbiAgICAgIGNvbnN0IG1heEluZGV4ID0gTWF0aC5tYXgoZnJvbUluZGV4LCB0b0luZGV4KTtcclxuICAgICAgZm9yIChsZXQgaSA9IG1pbkluZGV4OyBpIDw9IG1heEluZGV4OyBpKyspIHtcclxuICAgICAgICBjb25zdCBpdGVtVG9Ub2dnbGUgPSBpdGVtc1tpXTtcclxuICAgICAgICBpZiAoaXRlbVRvVG9nZ2xlICE9PSB0aGlzLl9sYXN0Q2xpY2tlZEl0ZW0pIHtcclxuICAgICAgICAgIHRoaXMudHJlZS5jaGFuZ2VTZWxlY3QoaXRlbVRvVG9nZ2xlLCAhdGhpcy50cmVlLmdldFNlbGVjdGlvblN0YXRlKGl0ZW1Ub1RvZ2dsZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHRoaXMudHJlZS5jaGFuZ2VTZWxlY3QoaXRlbSwgIXRoaXMudHJlZS5nZXRTZWxlY3Rpb25TdGF0ZShpdGVtKSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9sYXN0Q2xpY2tlZEl0ZW0gPSBpdGVtO1xyXG4gICAgdGhpcy50b3BMaXN0Ll9vbkNoZWNrYm94Q2xpY2tlZChzZWxlY3Rpb25TdGF0ZSwgaW5mby5yb3dSb290KTtcclxuICB9XHJcbiAgdXBkYXRlU2VsZWN0aW9uKGl0ZW0pIHtcclxuICAgIGNvbnN0IGluZm8gPSB0aGlzLl9jYWNoZVtpdGVtW3RoaXMuaWRQcm9wZXJ0eV1dO1xyXG4gICAgaWYgKCFpbmZvIHx8ICFpbmZvLmNoZWNrYm94KSB7XHJcbiAgICAgIHJldHVybjsgLy8gaXNuJ3QgcmVuZGVyZWQgeWV0XHJcbiAgICB9XHJcbiAgICBjb25zdCB2YWx1ZSA9IHRoaXMudHJlZS5nZXRTZWxlY3Rpb25TdGF0ZShpdGVtKTtcclxuICAgIGluZm8uY2hlY2tib3guY2hlY2tlZCA9IHZhbHVlO1xyXG4gICAgdG9nZ2xlQ2xhc3MoaW5mby5yb3dSb290LCBcImxpc3RJdGVtU2VsZWN0ZWRcIiwgISF2YWx1ZSk7XHJcbiAgfVxyXG4gIHNldEV4cGFuZGVkKGl0ZW0sIHZhbHVlLCBkb05vdFVwZGF0ZSwgc2hvd0FuaW1hdGlvbikge1xyXG4gICAgaWYgKCFpdGVtLmNoaWxkcmVuIHx8ICFpdGVtLmNoaWxkcmVuLmxlbmd0aCkge1xyXG4gICAgICByZXR1cm47IC8vIG5vdCBhcHBsaWNhYmxlXHJcbiAgICB9XHJcbiAgICB0aGlzLnRyZWUudXBkYXRlRXhwYW5kKGl0ZW0sIHZhbHVlKTtcclxuICAgIGlmICghZG9Ob3RVcGRhdGUpIHtcclxuICAgICAgdGhpcy5faGFuZGxlRXhwYW5kKGl0ZW0sIHNob3dBbmltYXRpb24pO1xyXG4gICAgfVxyXG4gIH1cclxuICBfaGFuZGxlRXhwYW5kKGl0ZW0sIHNob3dBbmltYXRpb24pIHtcclxuICAgIGNvbnN0IGluZm8gPSB0aGlzLl9jYWNoZVtpdGVtW3RoaXMuaWRQcm9wZXJ0eV1dO1xyXG4gICAgaWYgKCFpbmZvKSB7XHJcbiAgICAgIHJldHVybjsgLy8gaXNuJ3QgcmVuZGVyZWQgeWV0XHJcbiAgICB9XHJcbiAgICB0b2dnbGVDbGFzcyhpbmZvLmV4cGFuZG9JY29uLCBcIm9wZW5cIiwgISFpdGVtLmV4cGFuZGVkKTtcclxuICAgIGlmICghc2hvd0FuaW1hdGlvbikge1xyXG4gICAgICBpdGVtLmV4cGFuZGVkICYmIHRoaXMuX3Byb3ZpZGVDaGlsZHJlbkxpc3QoaXRlbSk7XHJcbiAgICAgIGl0ZW0uZXhwYW5kZWQgPyBzaG93KGluZm8uY2hpbGRyZW5MaXN0Um9vdCkgOiBoaWRlKGluZm8uY2hpbGRyZW5MaXN0Um9vdCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgdGhpcy5fcHJvdmlkZUNoaWxkcmVuTGlzdChpdGVtKTtcclxuICAgICAgc2hvdyhpbmZvLmNoaWxkcmVuTGlzdFJvb3QpO1xyXG4gICAgICBhbmltYXRlUHJvcGVydHkoe1xyXG4gICAgICAgIG9iajogaW5mby5jaGlsZHJlbkxpc3RSb290LnN0eWxlLFxyXG4gICAgICAgIGR1cmF0aW9uOiAyMDAsXHJcbiAgICAgICAgcHJvcGVydGllczoge1xyXG4gICAgICAgICAgaGVpZ2h0OiB7XHJcbiAgICAgICAgICAgIHN0YXJ0OiBpdGVtLmV4cGFuZGVkID8gMCA6IGluZm8uY2hpbGRyZW5MaXN0LmRvbU5vZGUuY2xpZW50SGVpZ2h0LFxyXG4gICAgICAgICAgICBlbmQ6IGl0ZW0uZXhwYW5kZWQgPyBpbmZvLmNoaWxkcmVuTGlzdC5kb21Ob2RlLmNsaWVudEhlaWdodCA6IDAsXHJcbiAgICAgICAgICAgIHVuaXRzOiBcInB4XCJcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIG9uRW5kOiAoKSA9PiB7XHJcbiAgICAgICAgICAhaXRlbS5leHBhbmRlZCAmJiBoaWRlKGluZm8uY2hpbGRyZW5MaXN0Um9vdCk7XHJcbiAgICAgICAgICBpbmZvLmNoaWxkcmVuTGlzdFJvb3Quc3R5bGUuaGVpZ2h0ID0gXCJcIjtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuICBfcHJvdmlkZUNoaWxkcmVuTGlzdChpdGVtKSB7XHJcbiAgICBjb25zdCBpbmZvID0gdGhpcy5fY2FjaGVbaXRlbVt0aGlzLmlkUHJvcGVydHldXTtcclxuICAgIGlmICghaW5mbyB8fCBpbmZvLmNoaWxkcmVuTGlzdCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBtYXJnaW5MZWZ0ID0gaW5mby5jaGlsZHJlbkxpc3RSb290LnN0eWxlLm1hcmdpbkxlZnQ7XHJcbiAgICBjb25zdCBtYXJnaW5SaWdodCA9IGluZm8uY2hpbGRyZW5MaXN0Um9vdC5zdHlsZS5tYXJnaW5SaWdodDtcclxuICAgIGluZm8uY2hpbGRyZW5MaXN0ID0gdGhpcy5jcmVhdGVMaXN0KGluZm8uY2hpbGRyZW5MaXN0Um9vdCAvKiB3aWxsIGJlIHJlcGxhY2VkICovKTtcclxuICAgIGluZm8uY2hpbGRyZW5MaXN0Um9vdCA9IGluZm8uY2hpbGRyZW5MaXN0LmRvbU5vZGU7XHJcbiAgICBpbmZvLmNoaWxkcmVuTGlzdC5kb21Ob2RlLmNsYXNzTmFtZSA9IFwiY2hpbGRyZW5MaXN0Um9vdFwiO1xyXG4gICAgaW5mby5jaGlsZHJlbkxpc3QuZG9tTm9kZS5zdHlsZS5tYXJnaW5MZWZ0ID0gbWFyZ2luTGVmdDtcclxuICAgIGluZm8uY2hpbGRyZW5MaXN0LmRvbU5vZGUuc3R5bGUubWFyZ2luUmlnaHQgPSBtYXJnaW5SaWdodDtcclxuICAgIGluZm8uY2hpbGRyZW5MaXN0Lml0ZW1SZW5kZXJlciA9IHRoaXM7IC8vIHNvIHdlIGNhbiBoYXZlIGEgc2luZ2xlIGNhY2hlIG9mIGl0ZW0gYmluZGluZ3NcclxuICAgIHRoaXMuY2hpbGRMaXN0c1tpdGVtW3RoaXMuaWRQcm9wZXJ0eV1dID0gaW5mby5jaGlsZHJlbkxpc3Q7XHJcbiAgICBpbmZvLmNoaWxkcmVuTGlzdC5pdGVtcyA9IGl0ZW0uY2hpbGRyZW47XHJcbiAgfVxyXG4gIGdldEl0ZW1CaW5kaW5nKGl0ZW0pIHtcclxuICAgIHJldHVybiB0aGlzLl9jYWNoZVtpdGVtW3RoaXMuaWRQcm9wZXJ0eV1dO1xyXG4gIH1cclxuICBzZWxlY3RQcmVzZW50YXRpb24oX3Jvd1Jvb3QsIF92YWx1ZSwgX2l0ZW0pIHtcclxuICAgIC8vIGRvZXMgbm90aGluZ1xyXG4gIH1cclxuICAvLyBtdXN0IGJlIG92ZXJyaWRlbiBieSB0aGUgd2l6YXJkIHRvIGF2b2lkIGN5Y2xpYyBkZXBlbmRlbmNpZXNcclxuICBjcmVhdGVMaXN0KF9ub2RlVG9SZXBsYWNlKSB7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn1cblxudmFyIFNlbGVjdGFibGVUcmVlTGlzdF8xO1xyXG5sZXQgU2VsZWN0YWJsZVRyZWVMaXN0ID0gU2VsZWN0YWJsZVRyZWVMaXN0XzEgPSBjbGFzcyBTZWxlY3RhYmxlVHJlZUxpc3QgZXh0ZW5kcyBGbG93TGlzdCB7XHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vXHJcbiAgLy8gSW5pdGlhbGl6YXRpb25cclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICBjb25zdHJ1Y3RvcihwYXJhbXMsIHJlZk5vZGUsIHBvc2l0aW9uKSB7XHJcbiAgICBzdXBlcihwYXJhbXMsIHJlZk5vZGUsIHBvc2l0aW9uKTtcclxuICAgIC8qKlxyXG4gICAgICogSWYgdHJ1ZSwgaW52aXNpYmxlIGV4cGFuZG8gaWNvbnMgd2lsbCBiZSBoaWRkZW4uXHJcbiAgICAgKi9cclxuICAgIHRoaXMuaGlkZUludmlzaWJsZUV4cGFuZG9JY29ucyA9IGZhbHNlO1xyXG4gICAgdGhpcy5oYXNTZWxlY3RhYmxlSXRlbXMgPSBmYWxzZTtcclxuICAgIHRoaXMuaXRlbVJlbmRlcmVyID0gbmV3IFNlbGVjdGFibGVUcmVlTGlzdFJlbmRlcmVyKCk7XHJcbiAgICB0aGlzLmtlZXBTY3JvbGxQb3NpdGlvbiA9IHRydWU7XHJcbiAgfVxyXG4gIHBvc3RDcmVhdGUoKSB7XHJcbiAgICBhZGRDbGFzcyh0aGlzLmRvbU5vZGUsIFwiZXNyaTRHRVNlbGVjdGFibGVUcmVlTGlzdFwiKTtcclxuICAgIHN1cGVyLnBvc3RDcmVhdGUoKTtcclxuICB9XHJcbiAgX3NldFN0b3JlKHN0b3JlKSB7XHJcbiAgICB0aGlzLml0ZW1SZW5kZXJlci5jcmVhdGVMaXN0ID0gKG5vZGVUb1JlcGxhY2UpID0+IG5ldyBTZWxlY3RhYmxlVHJlZUxpc3RfMShudWxsLCBub2RlVG9SZXBsYWNlKTtcclxuICAgIHRoaXMuaXRlbVJlbmRlcmVyLmlkUHJvcGVydHkgPSB0aGlzLmlkUHJvcGVydHkgPSBzdG9yZS5pZFByb3BlcnR5O1xyXG4gICAgdGhpcy5pdGVtUmVuZGVyZXIudHJlZSA9IHN0b3JlO1xyXG4gICAgdGhpcy5pdGVtUmVuZGVyZXIudG9wTGlzdCA9IHRoaXM7XHJcbiAgICB0aGlzLl9zZXRJdGVtcyh0aGlzLml0ZW1SZW5kZXJlci50cmVlLmRhdGEpO1xyXG4gIH1cclxuICBnZXRUcmVlKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuaXRlbVJlbmRlcmVyLnRyZWU7XHJcbiAgfVxyXG4gIC8vIGlmIHRoZSBpdGVtIGlzbid0IHJlbmRlcmVkIHlldCwgbnVsbCB3aWxsIGJlIHJldHVybmVkLlxyXG4gIGdldEl0ZW1CaW5kaW5nKGl0ZW0pIHtcclxuICAgIHJldHVybiB0aGlzLml0ZW1SZW5kZXJlci5nZXRJdGVtQmluZGluZyhpdGVtKTtcclxuICB9XHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vXHJcbiAgLy8gV29yayB3aXRoIGNoZWNrYm94IHNlbGVjdGlvblxyXG4gIC8vXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIGVtdWxhdGVNYW51YWxTZWxlY3Rpb25Ub2dnbGUoaXRlbSkge1xyXG4gICAgdGhpcy5pdGVtUmVuZGVyZXIuZXhlY3V0ZVNlbGVjdGlvbkNsaWNrKGl0ZW0pO1xyXG4gIH1cclxuICBpc0l0ZW1TZWxlY3RlZChpdGVtKSB7XHJcbiAgICByZXR1cm4gaXRlbSAmJiBpdGVtLnNlbGVjdGVkO1xyXG4gIH1cclxuICAvLyBjb25zaWRlcnMgaW5kZXBTZWxlY3Rpb24uXHJcbiAgZ2V0U2VsZWN0ZWRJdGVtcyhsZWF2ZXNPbmx5KSB7XHJcbiAgICByZXR1cm4gdGhpcy5nZXRUcmVlKCkgPyB0aGlzLmdldFRyZWUoKS5nZXRTZWxlY3RlZE5vZGVzKGxlYXZlc09ubHkpIDogW107XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgYSBjYWNoZSwgd2hlcmUga2V5IC0gaXRlbSBpZCwgdmFsdWUgLSB0cnVlIGlmIHNlbGVjdGVkLiBGYWxzZSB2YWx1ZXMgYXJlIG5vdCBpbmNsdWRlZC5cclxuICAgKi9cclxuICBnZXRTZWxlY3RlZFN0YXRlKGxlYXZlc09ubHkpIHtcclxuICAgIGNvbnN0IHN0YXRlID0ge307XHJcbiAgICB0aGlzLmdldFRyZWUoKSAmJlxyXG4gICAgICB0aGlzLmdldFRyZWUoKVxyXG4gICAgICAgIC5nZXRTZWxlY3RlZE5vZGVzKGxlYXZlc09ubHkpXHJcbiAgICAgICAgLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICBzdGF0ZVtpdGVtW3RoaXMuaWRQcm9wZXJ0eV1dID0gdHJ1ZTtcclxuICAgICAgfSk7XHJcbiAgICByZXR1cm4gc3RhdGU7XHJcbiAgfVxyXG4gIHNldFNlbGVjdGVkU3RhdGUoc3RhdGUpIHtcclxuICAgIHRoaXMuZ2V0VHJlZSgpLmNoYW5nZVNlbGVjdCh0aGlzLmdldFRyZWUoKS5yb290LCBmYWxzZSk7IC8vIHVuc2VsZWN0IGFsbCBmaXJzdFxyXG4gICAgaWYgKHN0YXRlKSB7XHJcbiAgICAgIGZvciAoY29uc3QgaWQgaW4gc3RhdGUpIHtcclxuICAgICAgICBjb25zdCBpdGVtID0gdGhpcy5nZXRUcmVlKCkuZ2V0KGlkKTtcclxuICAgICAgICBpdGVtICYmIHRoaXMuZ2V0VHJlZSgpLmNoYW5nZVNlbGVjdChpdGVtLCAhIXN0YXRlW2lkXSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMuX3JlZnJlc2hDaGVja2JveGVzKCk7XHJcbiAgfVxyXG4gIHNldEl0ZW1TZWxlY3RlZChpdGVtLCB2YWx1ZSwgZG9Ob3RVcGRhdGUgPSBmYWxzZSkge1xyXG4gICAgdGhpcy5nZXRUcmVlKCkuY2hhbmdlU2VsZWN0KGl0ZW0sIHZhbHVlKTtcclxuICAgIGlmICghZG9Ob3RVcGRhdGUpIHtcclxuICAgICAgdGhpcy5fcmVmcmVzaENoZWNrYm94ZXMoKTtcclxuICAgIH1cclxuICB9XHJcbiAgc2V0SXRlbXNTZWxlY3RlZChpdGVtcywgdmFsdWUsIGRvTm90VXBkYXRlID0gZmFsc2UpIHtcclxuICAgIGl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHRoaXMuZ2V0VHJlZSgpLmNoYW5nZVNlbGVjdChpdGVtLCB2YWx1ZSkpO1xyXG4gICAgaWYgKCFkb05vdFVwZGF0ZSkge1xyXG4gICAgICB0aGlzLl9yZWZyZXNoQ2hlY2tib3hlcygpO1xyXG4gICAgfVxyXG4gIH1cclxuICAvLyB1c2VkIGluIGl0ZW0gcmVuZGVyZXJcclxuICBfb25DaGVja2JveENsaWNrZWQocHJlU2VsZWN0aW9uU3RhdGUsIHJvd1Jvb3QpIHtcclxuICAgIHRoaXMuX3JlZnJlc2hDaGVja2JveGVzKCk7XHJcbiAgICBjb25zdCBjdXJyZW50U3RhdGUgPSB0aGlzLmdldFNlbGVjdGVkU3RhdGUodHJ1ZSk7XHJcbiAgICBjb25zdCBzZWxlY3RlZEl0ZW1zID0gW107XHJcbiAgICBmb3IgKGNvbnN0IGlkIGluIGN1cnJlbnRTdGF0ZSkge1xyXG4gICAgICBpZiAoY3VycmVudFN0YXRlW2lkXSAmJiAhcHJlU2VsZWN0aW9uU3RhdGVbaWRdKSB7XHJcbiAgICAgICAgc2VsZWN0ZWRJdGVtcy5wdXNoKHRoaXMuZ2V0VHJlZSgpLmdldChpZCkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCB1bnNlbGVjdGVkSXRlbXMgPSBbXTtcclxuICAgIGZvciAoY29uc3QgaWQgaW4gcHJlU2VsZWN0aW9uU3RhdGUpIHtcclxuICAgICAgaWYgKHByZVNlbGVjdGlvblN0YXRlW2lkXSAmJiAhY3VycmVudFN0YXRlW2lkXSkge1xyXG4gICAgICAgIHVuc2VsZWN0ZWRJdGVtcy5wdXNoKHRoaXMuZ2V0VHJlZSgpLmdldChpZCkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLm9uU2VsZWN0aW9uQ2hhbmdlZCh7XHJcbiAgICAgIHNlbGVjdGVkSXRlbXMsXHJcbiAgICAgIHVuc2VsZWN0ZWRJdGVtcyxcclxuICAgICAgY2xpY2tOb2RlOiByb3dSb290XHJcbiAgICB9KTtcclxuICB9XHJcbiAgX3JlZnJlc2hDaGVja2JveGVzKCkge1xyXG4gICAgZnVuY3Rpb24gdXBkYXRlU2VsZWN0aW9uKGxpc3QpIHtcclxuICAgICAgbGlzdC5pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiBsaXN0Lml0ZW1SZW5kZXJlci51cGRhdGVTZWxlY3Rpb24oaXRlbSkpO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlU2VsZWN0aW9uKHRoaXMpO1xyXG4gICAgZm9yIChjb25zdCBpZCBpbiB0aGlzLml0ZW1SZW5kZXJlci5jaGlsZExpc3RzKSB7XHJcbiAgICAgIHVwZGF0ZVNlbGVjdGlvbih0aGlzLml0ZW1SZW5kZXJlci5jaGlsZExpc3RzW2lkXSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vIGVtaXR0ZWQgb24gdXNlciBhY3Rpb25cclxuICBvblNlbGVjdGlvbkNoYW5nZWQoX2V2ZW50KSB7IH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyBXb3JrIHdpdGggZXhwYW5kZWQgc3RhdGVcclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICBpc0V4cGFuZGVkKGl0ZW1PcklkKSB7XHJcbiAgICBjb25zdCBpdGVtID0gdHlwZW9mIGl0ZW1PcklkID09PSBcInN0cmluZ1wiID8gdGhpcy5nZXRUcmVlKCkuZ2V0KGl0ZW1PcklkKSA6IGl0ZW1PcklkO1xyXG4gICAgcmV0dXJuIGl0ZW0gJiYgaXRlbS5leHBhbmRlZDtcclxuICB9XHJcbiAgc2V0RXhwYW5kZWQoaXRlbU9ySWQsIHZhbHVlLCBkb05vdFVwZGF0ZSA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCBpdGVtID0gdHlwZW9mIGl0ZW1PcklkID09PSBcInN0cmluZ1wiID8gdGhpcy5nZXRUcmVlKCkuZ2V0KGl0ZW1PcklkKSA6IGl0ZW1PcklkO1xyXG4gICAgaXRlbSAmJiB0aGlzLml0ZW1SZW5kZXJlci5zZXRFeHBhbmRlZChpdGVtLCB2YWx1ZSwgZG9Ob3RVcGRhdGUsIGZhbHNlKTtcclxuICB9XHJcbiAgdG9nZ2xlRXhwYW5kKGl0ZW1PcklkKSB7XHJcbiAgICB0aGlzLnNldEV4cGFuZGVkKGl0ZW1PcklkLCAhdGhpcy5pc0V4cGFuZGVkKGl0ZW1PcklkKSk7XHJcbiAgfVxyXG4gIGdldEV4cGFuZGVkU3RhdGUoKSB7XHJcbiAgICBjb25zdCBzdGF0ZSA9IHt9O1xyXG4gICAgdGhpcy5nZXRUcmVlKCkgJiZcclxuICAgICAgdGhpcy5nZXRUcmVlKCkuaW5zcGVjdENoaWxkcmVuKG51bGwsIChpdGVtKSA9PiB7XHJcbiAgICAgICAgaWYgKGl0ZW0uY2hpbGRyZW4gJiYgaXRlbS5jaGlsZHJlbi5sZW5ndGgpIHtcclxuICAgICAgICAgIHN0YXRlW2l0ZW1bdGhpcy5pZFByb3BlcnR5XV0gPSAhIWl0ZW0uZXhwYW5kZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9KTtcclxuICAgIHJldHVybiBzdGF0ZTtcclxuICB9XHJcbiAgc2V0RXhwYW5kZWRTdGF0ZShzdGF0ZSwgZG9Ob3RVcGRhdGUgPSBmYWxzZSkge1xyXG4gICAgZm9yIChjb25zdCBpZCBpbiBzdGF0ZSkge1xyXG4gICAgICB0aGlzLnNldEV4cGFuZGVkKGlkLCAhIXN0YXRlW2lkXSwgZG9Ob3RVcGRhdGUpO1xyXG4gICAgfVxyXG4gIH1cclxuICBvbkV4cGFuZENoYW5nZWRVc2VyKF9pdGVtKSB7IH1cclxufTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKClcclxuXSwgU2VsZWN0YWJsZVRyZWVMaXN0LnByb3RvdHlwZSwgXCJoaWRlSW52aXNpYmxlRXhwYW5kb0ljb25zXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gIHkkcigpXHJcbl0sIFNlbGVjdGFibGVUcmVlTGlzdC5wcm90b3R5cGUsIFwicm93UmVuZGVyZXJcIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKClcclxuXSwgU2VsZWN0YWJsZVRyZWVMaXN0LnByb3RvdHlwZSwgXCJoYXNTZWxlY3RhYmxlSXRlbXNcIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKClcclxuXSwgU2VsZWN0YWJsZVRyZWVMaXN0LnByb3RvdHlwZSwgXCJvblNlbGVjdGlvbkNoYW5nZWRcIiwgbnVsbCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gIHkkcigpXHJcbl0sIFNlbGVjdGFibGVUcmVlTGlzdC5wcm90b3R5cGUsIFwib25FeHBhbmRDaGFuZ2VkVXNlclwiLCBudWxsKTtcclxuU2VsZWN0YWJsZVRyZWVMaXN0ID0gU2VsZWN0YWJsZVRyZWVMaXN0XzEgPSBfX2RlY29yYXRlKFtcclxuICBpJFgoKVxyXG5dLCBTZWxlY3RhYmxlVHJlZUxpc3QpO1xuXG5mdW5jdGlvbiBfaXNWYXJpYWJsZU5vZGUobm9kZSkge1xyXG4gIHJldHVybiAhIW5vZGUudmFyaWFibGU7XHJcbn1cclxubGV0IERhdGFWYXJpYWJsZUdyaWQgPSBjbGFzcyBEYXRhVmFyaWFibGVHcmlkIGV4dGVuZHMgVGVtcGxhdGVkV2lkZ2V0IHtcclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyBJbml0aWFsaXphdGlvblxyXG4gIC8vXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIGNvbnN0cnVjdG9yKHBhcmFtcywgcmVmTm9kZSwgcG9zaXRpb24pIHtcclxuICAgIHN1cGVyKHBhcmFtcywgcmVmTm9kZSwgcG9zaXRpb24pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIGZvciBzYXZpbmcgZXhwYW5zaW9uIGluZm8uXHJcbiAgICAgKi9cclxuICAgIHRoaXMucXVlcnlJRCA9IFwiL1wiO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUcnVlIGlmIHZhcmlhYmxlcyBoYXZlIHRvIGJlIGdyb3VwZWQgaW50byBjYXRlZ29yaWVzLlxyXG4gICAgICovXHJcbiAgICB0aGlzLmdyb3VwQ2F0ZWdvcmllcyA9IHRydWU7XHJcbiAgICAvKipcclxuICAgICAqIEludGVybmFsIGZsYWcgcHJldmVudGluZyBzZWxlY3Rpb24gbGlzdGVuaW5nLlxyXG4gICAgICovXHJcbiAgICB0aGlzLl9pblVwZGF0ZSA9IGZhbHNlO1xyXG4gICAgLyoqXHJcbiAgICAgKiBFeHBhbnNpb24gc3RhdGVzIGhhc2guIFVzZWQgdG8gc2F2ZSBleHBhbmRlZCBzdGF0ZSBmb3IgYSBjb25jcmV0ZSBzZWFyY2guXHJcbiAgICAgKi9cclxuICAgIHRoaXMuX2V4cGFuc2lvbkNhY2hlID0ge307XHJcbiAgfVxyXG4gIHBvc3RDcmVhdGUoKSB7XHJcbiAgICBhZGRDbGFzcyh0aGlzLmRvbU5vZGUsIFwiRGF0YVZhcmlhYmxlR3JpZFwiKTtcclxuICAgIHRoaXMuX3RyZWVMaXN0ID0gbmV3IFNlbGVjdGFibGVUcmVlTGlzdCh7XHJcbiAgICAgIHJvd1JlbmRlcmVyOiB0aGlzLl9yZW5kZXJOb2RlLmJpbmQodGhpcyksXHJcbiAgICAgIG9uU2VsZWN0aW9uQ2hhbmdlZDogdGhpcy5fb25TZWxlY3Rpb25DaGFuZ2VkLmJpbmQodGhpcyksXHJcbiAgICAgIGhpZGVJbnZpc2libGVFeHBhbmRvSWNvbnM6ICF0aGlzLmdyb3VwQ2F0ZWdvcmllc1xyXG4gICAgICAvLyB0cmVlSW5kZW50V2lkdGggPSB0aGlzLm1hbmFnZXIudmFyaWFibGVzLmZhdm9yaXRlcyA/IDEgOiB0aGlzLm1hbmFnZXIubXVsdGlwbGVTZWxlY3RJc0FsbG93ZWQoKSA/IDE2IDogODtcclxuICAgIH0pLnBsYWNlQXQodGhpcy5kb21Ob2RlKTtcclxuICAgIHRoaXMuc2V0VmFyaWFibGVzKFtdKTsgLy8gU2V0IGFuIGVtcHR5IHN0b3JlXHJcbiAgfVxyXG4gIHJlZnJlc2goKSB7XHJcbiAgICB0aGlzLl90cmVlTGlzdC5yZWZyZXNoKCk7XHJcbiAgfVxyXG4gIHNldFZhcmlhYmxlcyh2YXJpYWJsZXMpIHtcclxuICAgIC8vIHNhdmUgdGhlIGV4cGFuZGVkIHN0YXRlXHJcbiAgICBpZiAodGhpcy5ncm91cENhdGVnb3JpZXMpIHtcclxuICAgICAgdGhpcy5fZXhwYW5zaW9uQ2FjaGVbdGhpcy5xdWVyeUlEXSA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5fZXhwYW5zaW9uQ2FjaGVbdGhpcy5xdWVyeUlEXSksIHRoaXMuX3RyZWVMaXN0LmdldEV4cGFuZGVkU3RhdGUoKSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9jbGVhbnVwKCk7XHJcbiAgICBjb25zdCBub2RlcyA9IHRoaXMuX3ByZXBhcmVWYXJpYWJsZXModmFyaWFibGVzKTtcclxuICAgIGlmIChub2Rlcy5sZW5ndGgpIHtcclxuICAgICAgdGhpcy5fc2VsZWN0aW9uSGFuZGxlciA9IHRoaXMubWFuYWdlci53YXRjaChcInNlbGVjdGlvblwiLCB0aGlzLl9zZWxlY3Rpb25VcGRhdGVkLmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fdHJlZUxpc3Quc3RvcmUgPSBuZXcgU2VsZWN0YWJsZVRyZWUobm9kZXMpO1xyXG4gICAgLy8gRVhQQU5EXHJcbiAgICBpZiAodGhpcy5ncm91cENhdGVnb3JpZXMgJiYgbm9kZXMubGVuZ3RoKSB7XHJcbiAgICAgIGNvbnN0IGV4cGFuZGVkU3RhdGUgPSAodGhpcy5fZXhwYW5zaW9uQ2FjaGVbdGhpcy5xdWVyeUlEXSA9IHRoaXMuX2V4cGFuc2lvbkNhY2hlW3RoaXMucXVlcnlJRF0gfHwge30pO1xyXG4gICAgICAvLyBFeHBhbmQgYSBzaW5nbGUgY2F0ZWdvcnkuXHJcbiAgICAgIGlmIChub2Rlcy5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICBleHBhbmRlZFN0YXRlW25vZGVzWzBdLmlkXSA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5fdHJlZUxpc3Quc2V0RXhwYW5kZWRTdGF0ZShleHBhbmRlZFN0YXRlKTtcclxuICAgIH1cclxuICB9XHJcbiAgX3ByZXBhcmVWYXJpYWJsZXModmFyaWFibGVzKSB7XHJcbiAgICByZXR1cm4gdGhpcy5ncm91cENhdGVnb3JpZXNcclxuICAgICAgPyB0aGlzLl9wcmVwYXJlVmFyaWFibGVDYXRlZ29yaWVzKHZhcmlhYmxlcylcclxuICAgICAgOiB2YXJpYWJsZXMubWFwKCh2YXJpYWJsZSkgPT4gdGhpcy5fcHJlcGFyZVZhcmlhYmxlSXRlbSh2YXJpYWJsZSkpO1xyXG4gIH1cclxuICBfcHJlcGFyZVZhcmlhYmxlQ2F0ZWdvcmllcyh2YXJpYWJsZXMpIHtcclxuICAgIGNvbnN0IGNhdGVnb3JpZXMgPSB7fTtcclxuICAgIHZhcmlhYmxlcy5mb3JFYWNoKCh2YXJpYWJsZSkgPT4ge1xyXG4gICAgICBjb25zdCBjYXRlZ29yeSA9IHZhcmlhYmxlLmZpZWxkQ2F0ZWdvcnk7XHJcbiAgICAgIGxldCBjYXRlZ29yeU5vZGUgPSBjYXRlZ29yaWVzW2NhdGVnb3J5XTtcclxuICAgICAgaWYgKCFjYXRlZ29yeU5vZGUpIHtcclxuICAgICAgICBjYXRlZ29yeU5vZGUgPSB7IGxhYmVsOiBjYXRlZ29yeSwgaWQ6IGNhdGVnb3J5LCBjaGlsZHJlbjogW10gfTtcclxuICAgICAgICBjYXRlZ29yaWVzW2NhdGVnb3J5XSA9IGNhdGVnb3J5Tm9kZTtcclxuICAgICAgfVxyXG4gICAgICBjYXRlZ29yeU5vZGUuY2hpbGRyZW4ucHVzaCh0aGlzLl9wcmVwYXJlVmFyaWFibGVJdGVtKHZhcmlhYmxlKSk7XHJcbiAgICB9KTtcclxuICAgIGNvbnN0IG5vZGVzID0gW107XHJcbiAgICBmb3IgKGNvbnN0IGNhdGVnb3J5IGluIGNhdGVnb3JpZXMpIHtcclxuICAgICAgbm9kZXMucHVzaChjYXRlZ29yaWVzW2NhdGVnb3J5XSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5tYW5hZ2VyLnZhcmlhYmxlcy5xdWVyeUVuZ2luZShudWxsLCB7IHNvcnQ6IFt7IGF0dHJpYnV0ZTogXCJsYWJlbFwiIH1dIH0pKG5vZGVzKTtcclxuICB9XHJcbiAgX3ByZXBhcmVWYXJpYWJsZUl0ZW0odmFyaWFibGUpIHtcclxuICAgIGNvbnN0IG5vZGUgPSB0aGlzLl9wcmVwYXJlVmFyaWFibGVOb2RlKHZhcmlhYmxlKTtcclxuICAgIG5vZGUuaWQgPSB0aGlzLm1hbmFnZXIudmFyaWFibGVzLmdldElkZW50aXR5KHZhcmlhYmxlKTtcclxuICAgIHJldHVybiBub2RlO1xyXG4gIH1cclxuICBfcHJlcGFyZVZhcmlhYmxlTm9kZSh2YXJpYWJsZSkge1xyXG4gICAgY29uc3Qgbm9kZSA9IHtcclxuICAgICAgbGFiZWw6IHZhcmlhYmxlLmRlc2NyaXB0aW9uLFxyXG4gICAgICB2YXJpYWJsZSxcclxuICAgICAgZ3JvdXA6IGdldFRvZ2dsZUdyb3VwKHRoaXMubWFuYWdlci52YXJpYWJsZXMsIHRoaXMubWFuYWdlci52YXJpYWJsZXMuZ2V0SWRlbnRpdHkodmFyaWFibGUpKVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHNlbGVjdGlvbkdyb3VwID0gdGhpcy5tYW5hZ2VyLmdldFNlbGVjdGlvbkdyb3VwcygpLmhhc2hbbm9kZS5ncm91cC52YWx1ZV07XHJcbiAgICBpZiAoc2VsZWN0aW9uR3JvdXApIHtcclxuICAgICAgbm9kZS5zZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgIG5vZGUuZ3JvdXAudmFsdWUgPSBzZWxlY3Rpb25Hcm91cC52YWx1ZTsgLy8gU3luY2hyb25pemUgc2VsZWN0aW9uIHN0YXRlc1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5vZGU7XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyBSZW5kZXJpbmdcclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgX3JlbmRlck5vZGUobm9kZSwgcm9vdCwgY2hlY2tib3gsIGl0ZW1CaW5kaW5nKSB7XHJcbiAgICBhZGRDbGFzcyhyb290LCBcImVzcmk0R0VEYXRhQnJvd3NlclZhckNlbGxcIik7XHJcbiAgICByZXR1cm4gX2lzVmFyaWFibGVOb2RlKG5vZGUpXHJcbiAgICAgID8gdGhpcy5fcmVuZGVyVmFyaWFibGVOb2RlKG5vZGUsIHJvb3QsIGNoZWNrYm94LCBpdGVtQmluZGluZylcclxuICAgICAgOiB0aGlzLl9yZW5kZXJDYXRlZ29yeU5vZGUobm9kZSwgcm9vdCk7XHJcbiAgfVxyXG4gIF9yZW5kZXJWYXJpYWJsZU5vZGUobm9kZSwgcm9vdCwgY2hlY2tib3gsIGl0ZW1CaW5kaW5nKSB7XHJcbiAgICBmdW5jdGlvbiBiZWZvcmVDYihub2RlKSB7XHJcbiAgICAgIG5vZGUgJiYgcGxhY2Uobm9kZSwgY2hlY2tib3guZG9tTm9kZSwgXCJiZWZvcmVcIik7XHJcbiAgICAgIHJldHVybiBub2RlO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gYWRkVG9Sb290KG5vZGUsIHBvc2l0aW9uKSB7XHJcbiAgICAgIG5vZGUgJiYgcGxhY2Uobm9kZSwgcm9vdCwgcG9zaXRpb24pO1xyXG4gICAgICByZXR1cm4gbm9kZTtcclxuICAgIH1cclxuICAgIC8vIEZBVk9SSVRFXHJcbiAgICAvLyBBZGQgYW4gaWNvbiB3aXRoIGZhdm9yaXRlIGZpcnN0XHJcbiAgICBpZiAodGhpcy5tYW5hZ2VyLnZhcmlhYmxlcy5mYXZvcml0ZXMpIHtcclxuICAgICAgY29uc3QgaWNvbiA9IGJlZm9yZUNiKHRoaXMuX2NyZWF0ZVZhcmlhYmxlRmF2b3JpdGVJY29uKCkpO1xyXG4gICAgICBpZiAoaWNvbikge1xyXG4gICAgICAgIGNvbnN0IGZhdm9yaXRlSWQgPSB0aGlzLl9nZXRGYXZvcml0ZUlkKG5vZGUpO1xyXG4gICAgICAgIHRoaXMuX3VwZGF0ZUZhdm9yaXRlKGljb24sIHRoaXMubWFuYWdlci52YXJpYWJsZXMuZmF2b3JpdGVzLmNvbnRhaW5zKGZhdm9yaXRlSWQpKTtcclxuICAgICAgICBvbihpY29uLCBcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgIHRoaXMuX3RvZ2dsZUZhdm9yaXRlKGljb24sIGZhdm9yaXRlSWQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGJlZm9yZUNiKHRoaXMuX2NyZWF0ZVNwYWNlcigpKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gQ0hFQ0tCT1hcclxuICAgIGlmICghdGhpcy5tYW5hZ2VyLm11bHRpcGxlU2VsZWN0SXNBbGxvd2VkKCkpIHtcclxuICAgICAgY2hlY2tib3guZG9tTm9kZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgYWRkVG9Sb290KHRoaXMuX2NyZWF0ZVNwYWNlcigpKTtcclxuICAgIH1cclxuICAgIC8vIExBQkVMXHJcbiAgICBjb25zdCBsYWJlbCA9IGNyZWF0ZShcImRpdlwiLCB7IGNsYXNzOiBcImVzcmlHRVRyaW1XaXRoRWxsaXBzZXMgZXNyaTRHRURhdGFCcm93c2VyVmFyTGFiZWxcIiwgdGV4dENvbnRlbnQ6IG5vZGUubGFiZWwgfSwgcm9vdCk7XHJcbiAgICAvLyBUT0dHTEVcclxuICAgIC8vIEFkZCBhIHZhcmlhYmxlIHRvZ2dsZSBpZiBuZWNlc3NhcnlcclxuICAgIGlmIChub2RlLmdyb3VwLnN0YXRlcykge1xyXG4gICAgICBhZGRUb1Jvb3QodGhpcy5fY3JlYXRlU3BhY2VyKCkpO1xyXG4gICAgICBjb25zdCB0b2dnbGUgPSBuZXcgVmFyaWFibGVUb2dnbGUoe1xyXG4gICAgICAgIHN0YXRlczogbm9kZS5ncm91cC5zdGF0ZXMsXHJcbiAgICAgICAgdmFsdWU6IG5vZGUuZ3JvdXAudmFsdWUsXHJcbiAgICAgICAgb25DaGFuZ2U6ICgpID0+IHtcclxuICAgICAgICAgIHRoaXMuX29uVmFyaWFibGVUb2dnbGVDaGFuZ2Uobm9kZSwgdG9nZ2xlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pLnBsYWNlQXQocm9vdCk7XHJcbiAgICAgIGl0ZW1CaW5kaW5nLnZhcmlhYmxlVG9nZ2xlID0gdG9nZ2xlOyAvLyB0byBiZSB1c2VkIGluIHRoaXMgY2xhc3MgbGF0ZXJcclxuICAgIH1cclxuICAgIC8vIElORk9cclxuICAgIC8vIEFkZCBpbmZvIGljb24gZm9yIGEgdmFyaWFibGUgbm9kZVxyXG4gICAgY29uc3QgaWNvbiA9IHRoaXMuX2NyZWF0ZUluZm9JY29uKCk7XHJcbiAgICBpZiAoaWNvbikge1xyXG4gICAgICBhZGRUb1Jvb3QodGhpcy5fY3JlYXRlU3BhY2VyKCkpO1xyXG4gICAgICBhZGRUb1Jvb3QoaWNvbik7XHJcbiAgICAgIHNldFRvb2x0aXBUb05vZGUoaWNvbiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMubWFuYWdlci52YXJpYWJsZUluZm8udmFyaWFibGUgPSBub2RlLnZhcmlhYmxlO1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1hbmFnZXIudmFyaWFibGVJbmZvLmRvbU5vZGUub3V0ZXJIVE1MO1xyXG4gICAgICB9LCB7XHJcbiAgICAgICAgcG9zaXRpb246IFtcImFib3ZlXCIsIFwiYmVsb3dcIl0sXHJcbiAgICAgICAgc3RheU9uSG92ZXI6IHRydWUsXHJcbiAgICAgICAgaGlkZU9uQ2xpY2s6IHRydWVcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5tYW5hZ2VyLnNlbGVjdGlvbkxpbWl0KSB7XHJcbiAgICAgIGFkZENsYXNzKGxhYmVsLCBcImVzcmlHRUNsaWNrYWJsZVwiKTtcclxuICAgICAgb24obGFiZWwsIFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX3RyZWVMaXN0LmVtdWxhdGVNYW51YWxTZWxlY3Rpb25Ub2dnbGUobm9kZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBpZiAodGhpcy5tYW5hZ2VyLnNlbGVjdGlvbkxpbWl0ID09PSAxKSB7XHJcbiAgICAgICAgYWRkQ2xhc3Mocm9vdCwgXCJEYXRhQnJvd3Nlcl9TZWxlY3RhYmxlXCIpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9yZW5kZXJDYXRlZ29yeU5vZGUobm9kZSwgcm9vdCkge1xyXG4gICAgcGxhY2UodGhpcy5fY3JlYXRlU3BhY2VyKCksIHJvb3QpO1xyXG4gICAgLy8gQWRkIGEgQkxPQ0sgd2l0aCB0ZXh0IGxhYmVsIGhhdmluZyBhIGR5bmFtaWMgd2lkdGggYXMgdGhlIGxhc3QgY2hpbGQuIFRoZSBvcmRlciBpcyBpbXBvcnRhbnQhISFcclxuICAgIGNvbnN0IGxhYmVsID0gY3JlYXRlKFwiZGl2XCIsIHsgY2xhc3M6IFwiZXNyaUdFVHJpbVdpdGhFbGxpcHNlcyBlc3JpNEdFRGF0YUJyb3dzZXJWYXJMYWJlbFwiLCB0ZXh0Q29udGVudDogbm9kZS5sYWJlbCB9LCByb290KTtcclxuICAgIGFkZENsYXNzKGxhYmVsLCBcImVzcmlHRUNsaWNrYWJsZVwiKTtcclxuICAgIG9uKGxhYmVsLCBcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5fb25DYXRlZ29yeUV4cGFuZChub2RlLmlkKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBfY3JlYXRlVmFyaWFibGVGYXZvcml0ZUljb24oKSB7XHJcbiAgICByZXR1cm4gY3JlYXRlKFwiZGl2XCIsIHsgY2xhc3M6IFwiZXNyaTRHRURhdGFCcm93c2VyVmFySWNvbiBGYXZvcml0ZUl0ZW1JY29uXCIgfSk7XHJcbiAgfVxyXG4gIF9nZXRGYXZvcml0ZUlkKG5vZGUpIHtcclxuICAgIHJldHVybiBub2RlLmlkO1xyXG4gIH1cclxuICBfY3JlYXRlSW5mb0ljb24oKSB7XHJcbiAgICBpZiAodGhpcy5tYW5hZ2VyLnZhcmlhYmxlSW5mbykge1xyXG4gICAgICBjb25zdCBpY29uID0gY3JlYXRlKFwiZGl2XCIsIHtcclxuICAgICAgICBjbGFzczogXCJlc3JpNEdFRGF0YUJyb3dzZXJWYXJJY29uIGVzcmk0R0VJbmZvSWNvblwiXHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gaWNvbjtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuICBfY3JlYXRlU3BhY2VyKCkge1xyXG4gICAgcmV0dXJuIGNyZWF0ZShcImRpdlwiLCB7XHJcbiAgICAgIGNsYXNzOiBcImVzcmk0R0VEYXRhQnJvd3NlclZhclNwYWNlclwiLFxyXG4gICAgICBpbm5lckhUTUw6IFwiJm5ic3A7XCJcclxuICAgIH0pO1xyXG4gIH1cclxuICBfb25DYXRlZ29yeUV4cGFuZChpZCkge1xyXG4gICAgdGhpcy5fdHJlZUxpc3QudG9nZ2xlRXhwYW5kKGlkKTtcclxuICB9XHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vIFdvcmsgd2l0aCBmYXZvcml0ZXNcclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgX3RvZ2dsZUZhdm9yaXRlKGljb24sIGZhdm9yaXRlSUQpIHtcclxuICAgIGNvbnN0IGZhdm9yaXRlcyA9IHRoaXMubWFuYWdlci52YXJpYWJsZXMuZmF2b3JpdGVzO1xyXG4gICAgaWYgKCFmYXZvcml0ZXMuY29udGFpbnMoZmF2b3JpdGVJRCkpIHtcclxuICAgICAgZmF2b3JpdGVzLmFkZChmYXZvcml0ZUlEKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBmYXZvcml0ZXMucmVtb3ZlKGZhdm9yaXRlSUQpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgaXNGYXZvcml0ZSA9IGZhdm9yaXRlcy5jb250YWlucyhmYXZvcml0ZUlEKTtcclxuICAgIHRoaXMuX3VwZGF0ZUZhdm9yaXRlKGljb24sIGlzRmF2b3JpdGUpO1xyXG4gICAgaW52b2tlKHRoaXMsIFwiX3NhdmVGYXZvcml0ZXNcIiwgMTAwMCk7XHJcbiAgICByZXR1cm4gaXNGYXZvcml0ZTtcclxuICB9XHJcbiAgX3VwZGF0ZUZhdm9yaXRlKGljb24sIGNoZWNrZWQpIHtcclxuICAgIGlmIChjaGVja2VkKSB7XHJcbiAgICAgIHJlbW92ZUNsYXNzKGljb24sIFwiRmF2b3JpdGVJdGVtXCIpO1xyXG4gICAgICBhZGRDbGFzcyhpY29uLCBcIkZhdm9yaXRlSXRlbUNoZWNrZWRcIik7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgcmVtb3ZlQ2xhc3MoaWNvbiwgXCJGYXZvcml0ZUl0ZW1DaGVja2VkXCIpO1xyXG4gICAgICBhZGRDbGFzcyhpY29uLCBcIkZhdm9yaXRlSXRlbVwiKTtcclxuICAgIH1cclxuICB9XHJcbiAgLy8ga2VlcCBwdWJsaWMgdG8gYWxsb3cgdHlwaW5nIGluIGludm9rZVxyXG4gIF9zYXZlRmF2b3JpdGVzKCkge1xyXG4gICAgdGhpcy5tYW5hZ2VyLnZhcmlhYmxlcy5mYXZvcml0ZXMuc2F2ZSgpO1xyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vXHJcbiAgLy8gV29yayB3aXRoIGNoZWNrYm94ZXMgYW5kIHRvZ2dsZXNcclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy8gQ0hFQ0tCT1hcclxuICBfb25TZWxlY3Rpb25DaGFuZ2VkKGV2ZW50KSB7XHJcbiAgICAvLyBVcGRhdGUgdGhlIGN1cnJlbnQgc2VsZWN0aW9uLiBUaGUgX2luVXBkYXRlIGludGVybmFsIGZsYWcgYmxvY2tzIHRoZSBfc2VsZWN0aW9uVXBkYXRlZCBtZXRob2QuXHJcbiAgICB0aGlzLl9pblVwZGF0ZSA9IHRydWU7XHJcbiAgICB0aGlzLm1hbmFnZXIucmVtb3ZlRnJvbVNlbGVjdGlvbihldmVudC51bnNlbGVjdGVkSXRlbXMubWFwKChpdGVtKSA9PiBpdGVtLmdyb3VwLnZhbHVlKSk7XHJcbiAgICBjb25zdCBzZWxlY3RlZEl0ZW1zID0gZXZlbnQuc2VsZWN0ZWRJdGVtcy5zbGljZSgpO1xyXG4gICAgLy8gbWFrZSBzdXJlIHdlIGRvbid0IGFkZCBtb3JlIHRoYW4gdGhlIGFsbG93ZWQgbGltaXRcclxuICAgIGlmICh0aGlzLm1hbmFnZXIuc2VsZWN0aW9uTGltaXQgPiAwKSB7XHJcbiAgICAgIGNvbnN0IHByZXZOdW1iZXIgPSBzZWxlY3RlZEl0ZW1zLmxlbmd0aDtcclxuICAgICAgc2VsZWN0ZWRJdGVtcy5sZW5ndGggPSBNYXRoLm1heCgwLCBNYXRoLm1pbihzZWxlY3RlZEl0ZW1zLmxlbmd0aCwgdGhpcy5tYW5hZ2VyLnNlbGVjdGlvbkxpbWl0IC0gdGhpcy5tYW5hZ2VyLnNlbGVjdGlvbi5sZW5ndGgpKTtcclxuICAgICAgaWYgKHNlbGVjdGVkSXRlbXMubGVuZ3RoIDwgcHJldk51bWJlcikge1xyXG4gICAgICAgIC8vIHdlJ3ZlIHJlYWNoZWQgdGhlIGxpbWl0LCBuZWVkIHRvIHVuc2VsZWN0IGl0ZW1zIGluIHRoZSB0cmVlIGxpc3RcclxuICAgICAgICBjb25zdCBpdGVtc1RvVW5zZWxlY3QgPSBldmVudC5zZWxlY3RlZEl0ZW1zLnNsaWNlKHNlbGVjdGVkSXRlbXMubGVuZ3RoKTtcclxuICAgICAgICB0aGlzLl90cmVlTGlzdC5zZXRJdGVtc1NlbGVjdGVkKGl0ZW1zVG9VbnNlbGVjdCwgZmFsc2UpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBMaW1pdCBpcyBhbHNvIGhhbmRsZWQgaW4gdGhlIG1hbmFnZXIsIHNvIHdlIGp1c3QgcGFzcyB0aGUgc2VsZWN0aW9uIGFzIGlzIGFuZCBsZXQgaXQgZW1pdCB0aGUgXCJsaW1pdFwiIGV2ZW50IGlmIG5lZWRlZFxyXG4gICAgbGV0IGhhc1NlbGVjdGVkID0gZmFsc2U7XHJcbiAgICBpZiAoZXZlbnQuc2VsZWN0ZWRJdGVtcy5sZW5ndGgpIHtcclxuICAgICAgaGFzU2VsZWN0ZWQgPSAhIXRoaXMubWFuYWdlci5hZGRUb1NlbGVjdGlvbihldmVudC5zZWxlY3RlZEl0ZW1zLm1hcCgoaXRlbSkgPT4gaXRlbS5ncm91cC52YWx1ZSkpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5faW5VcGRhdGUgPSBmYWxzZTtcclxuICAgIGNvbnN0IGlzU2luZ2xlU2VsZWN0aW9uTW9kZSA9IHRoaXMubWFuYWdlci5zZWxlY3Rpb25MaW1pdCA9PT0gMTtcclxuICAgIGhhc1NlbGVjdGVkICYmXHJcbiAgICAgICFpc1NpbmdsZVNlbGVjdGlvbk1vZGUgJiZcclxuICAgICAgdGhpcy5hbmltYXRlU2VsZWN0aW9uICYmXHJcbiAgICAgIHRoaXMuYW5pbWF0ZVNlbGVjdGlvbihxdWVyeShcIi5lc3JpNEdFRGF0YUJyb3dzZXJWYXJMYWJlbFwiLCBldmVudC5jbGlja05vZGUpWzBdKTtcclxuICB9XHJcbiAgLy8gVE9HR0xFXHJcbiAgX29uVmFyaWFibGVUb2dnbGVDaGFuZ2Uobm9kZSwgdG9nZ2xlKSB7XHJcbiAgICBub2RlLmdyb3VwLnZhbHVlID0gdG9nZ2xlLnZhbHVlO1xyXG4gICAgdGhpcy5faW5VcGRhdGUgPSB0cnVlO1xyXG4gICAgdGhpcy5tYW5hZ2VyLnVwZGF0ZVNlbGVjdGlvbih0b2dnbGUudmFsdWUpO1xyXG4gICAgdGhpcy5faW5VcGRhdGUgPSBmYWxzZTtcclxuICAgIC8vIEZvcmNlIHVwZGF0ZXNcclxuICAgIGlmICh0aGlzLm1hbmFnZXIuYWxsb3dNdWx0aXBsZVNlbGVjdEluR3JvdXApIHtcclxuICAgICAgdGhpcy5fc2VsZWN0aW9uVXBkYXRlZCgpO1xyXG4gICAgfVxyXG4gIH1cclxuICAvLyBTRUxFQ1RJT04gU1lOQ1xyXG4gIF9zZWxlY3Rpb25VcGRhdGVkKCkge1xyXG4gICAgaWYgKHRoaXMuX2luVXBkYXRlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIC8vIFVwZGF0ZSBzZWxlY3Rpb24gc3RhdGUgb2Ygbm9kZXMgaW4gdGhlIHN0b3JlXHJcbiAgICBjb25zdCBzZWxlY3RlZFN0YXRlID0ge307XHJcbiAgICBjb25zdCBzZWxlY3Rpb25Hcm91cHMgPSB0aGlzLm1hbmFnZXIuZ2V0U2VsZWN0aW9uR3JvdXBzKCk7XHJcbiAgICB0aGlzLl90cmVlTGlzdC5nZXRUcmVlKCkuZGF0YS5mb3JFYWNoKChub2RlKSA9PiB7XHJcbiAgICAgIChub2RlLmNoaWxkcmVuIHx8IFtub2RlXSkuZm9yRWFjaCgodmFyaWFibGVOb2RlKSA9PiB7XHJcbiAgICAgICAgbGV0IHNlbGVjdGlvbkdyb3VwID0gc2VsZWN0aW9uR3JvdXBzLmhhc2hbdmFyaWFibGVOb2RlLmdyb3VwLnZhbHVlXTtcclxuICAgICAgICBpZiAoc2VsZWN0aW9uR3JvdXApIHtcclxuICAgICAgICAgIHZhcmlhYmxlTm9kZS5ncm91cC52YWx1ZSA9IHNlbGVjdGlvbkdyb3VwLnZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBTeW5jaHJvbml6ZSB2YXJpYWJsZSB0b2dnbGVcclxuICAgICAgICBjb25zdCBpdGVtQmluZGluZyA9IHRoaXMuX3RyZWVMaXN0LmdldEl0ZW1CaW5kaW5nKHZhcmlhYmxlTm9kZSk7XHJcbiAgICAgICAgY29uc3QgdG9nZ2xlID0gaXRlbUJpbmRpbmcgJiYgaXRlbUJpbmRpbmcudmFyaWFibGVUb2dnbGU7XHJcbiAgICAgICAgaWYgKHRvZ2dsZSkge1xyXG4gICAgICAgICAgc2VsZWN0aW9uR3JvdXAgPSB0b2dnbGUgJiYgc2VsZWN0aW9uR3JvdXBzLmhhc2hbdG9nZ2xlLnZhbHVlXTtcclxuICAgICAgICAgIGlmIChzZWxlY3Rpb25Hcm91cCkge1xyXG4gICAgICAgICAgICB0b2dnbGUudmFsdWUgPSBzZWxlY3Rpb25Hcm91cC52YWx1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gU3luY2hyb25pemUgc2VsZWN0aW9uIHN0YXRlc1xyXG4gICAgICAgIHNlbGVjdGVkU3RhdGVbdmFyaWFibGVOb2RlLmlkXSA9ICEhc2VsZWN0aW9uR3JvdXA7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl90cmVlTGlzdC5zZXRTZWxlY3RlZFN0YXRlKHNlbGVjdGVkU3RhdGUpO1xyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vXHJcbiAgLy8gQW5pbWF0aW9uXHJcbiAgLy9cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIGFuaW1hdGVTZWxlY3Rpb24obm9kZSkge1xyXG4gICAgaWYgKHRoaXMubWFuYWdlci5hbGxvd1Nob3BwaW5nQ2FydCkge1xyXG4gICAgICB0aGlzLm1hbmFnZXIuYW5pbWF0ZVNlbGVjdGlvbihub2RlKTtcclxuICAgIH1cclxuICB9XHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vIERlc3Ryb3lcclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgZGVzdHJveSgpIHtcclxuICAgIHRoaXMuX2NsZWFudXAoKTtcclxuICB9XHJcbiAgX2NsZWFudXAoKSB7XHJcbiAgICBpZiAodGhpcy5fc2VsZWN0aW9uSGFuZGxlcikge1xyXG4gICAgICB0aGlzLl9zZWxlY3Rpb25IYW5kbGVyLnJlbW92ZSgpO1xyXG4gICAgICB0aGlzLl9zZWxlY3Rpb25IYW5kbGVyID0gbnVsbDtcclxuICAgIH1cclxuICB9XHJcbn07XHJcbl9fZGVjb3JhdGUoW1xyXG4gIHkkcigpXHJcbl0sIERhdGFWYXJpYWJsZUdyaWQucHJvdG90eXBlLCBcIm1hbmFnZXJcIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKClcclxuXSwgRGF0YVZhcmlhYmxlR3JpZC5wcm90b3R5cGUsIFwicXVlcnlJRFwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoKVxyXG5dLCBEYXRhVmFyaWFibGVHcmlkLnByb3RvdHlwZSwgXCJncm91cENhdGVnb3JpZXNcIiwgdm9pZCAwKTtcclxuRGF0YVZhcmlhYmxlR3JpZCA9IF9fZGVjb3JhdGUoW1xyXG4gIGkkWCgpXHJcbl0sIERhdGFWYXJpYWJsZUdyaWQpO1xuXG5jb25zdCBubHMkMSA9IGdldEdFTWVzc2FnZXMoXCJEYXRhQnJvd3NlclwiKS5EYXRhVmFyaWFibGVzUGFnZTtcclxubGV0IERhdGFWYXJpYWJsZXNQYWdlID0gY2xhc3MgRGF0YVZhcmlhYmxlc1BhZ2UgZXh0ZW5kcyBXaXphcmRQYWdlIHtcclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyBHZXR0ZXJzICYgc2V0dGVyc1xyXG4gIC8vXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIHNldCBwYWdlSXNBY3RpdmUodmFsdWUpIHtcclxuICAgIHRoaXMuX3NldChcInBhZ2VJc0FjdGl2ZVwiLCB2YWx1ZSk7XHJcbiAgICB0aGlzLl9ncmlkICYmIHRoaXMuX2dyaWQuc2V0VmFyaWFibGVzKFtdKTtcclxuICAgIHZhbHVlICYmIHRoaXMuX3F1ZXJ5U2VsZWN0ZWRWYXJpYWJsZXMoKTtcclxuICB9XHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vXHJcbiAgLy8gSW5pdGlhbGl6YXRpb25cclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICBjb25zdHJ1Y3RvcihwYXJhbXMsIHJlZk5vZGUsIHBvc2l0aW9uKSB7XHJcbiAgICBzdXBlcihwYXJhbXMsIHJlZk5vZGUsIHBvc2l0aW9uKTtcclxuICAgIHRoaXMuX3RlbXBsYXRlU3RyaW5nID0gYFxyXG4gIDxkaXYgY2xhc3M9XCJEYXRhVmFyaWFibGVzUGFnZVwiPlxyXG4gICAgPGRpdj5cclxuICAgICAgPGRpdiBjbGFzcz1cIkJyZWFkY3J1bWJIZWlnaHRcIj48L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzcz1cImVzcmk0R0VEYXRhQnJvd3NlclZhckhlYWRlciBEYXRhVmFyaWFibGVzUGFnZV9WYXJDb3VudFwiIGRhdGEtYXR0YWNoLXBvaW50PVwiX3ZhckNvdW50Tm9kZVwiPiZuYnNwOzwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgICA8ZGl2PlxyXG4gICAgICA8ZGl2IGRhdGEtYXR0YWNoLXBvaW50PVwiX2RpdlRyZWVcIiBjbGFzcz1cIkRhdGFWYXJpYWJsZXNQYWdlX0NvbnRhaW5lciBEYXRhVmFyaWFibGVzUGFnZV9WYXJpYWJsZXNcIj48L2Rpdj5cclxuICAgICAgPGRpdiBkYXRhLWF0dGFjaC1wb2ludD1cIl9wcm9ncmVzc0RpdlwiPjwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgICA8ZGl2PjwvZGl2PlxyXG4gIDwvZGl2PmA7XHJcbiAgfVxyXG4gIHBvc3RDcmVhdGUoKSB7XHJcbiAgICBzdXBlci5wb3N0Q3JlYXRlKCk7XHJcbiAgICAvLyBHUklEXHJcbiAgICB0aGlzLl9ncmlkID0gdGhpcy5tYW5hZ2VyLmNyZWF0ZVZhcmlhYmxlR3JpZCh7IGdyb3VwQ2F0ZWdvcmllczogdHJ1ZSB9LCB0aGlzLl9kaXZUcmVlKTtcclxuICAgIC8vIEFQUExZIEJVVFRPTlxyXG4gICAgdGhpcy5tYW5hZ2VyLndhdGNoKFwic2VsZWN0aW9uXCIsIHRoaXMuX3VwZGF0ZUFwcGx5QnV0dG9uQXZhaWxhYmlsaXR5LmJpbmQodGhpcykpO1xyXG4gICAgdGhpcy5fdXBkYXRlQXBwbHlCdXR0b25BdmFpbGFiaWxpdHkoKTtcclxuICAgIC8vIFNUQVJUXHJcbiAgICB0aGlzLl9xdWVyeVNlbGVjdGVkVmFyaWFibGVzKCk7XHJcbiAgfVxyXG4gIF91cGRhdGVBcHBseUJ1dHRvbkF2YWlsYWJpbGl0eSgpIHtcclxuICAgIHRoaXMuX3NldEJ1dHRvbkVuYWJsZWQoXCJhcHBseVwiLCAhIXRoaXMubWFuYWdlci5zZWxlY3Rpb24ubGVuZ3RoKTtcclxuICB9XHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vXHJcbiAgLy8gU2hvdyB2YXJpYWJsZXNcclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICBfcXVlcnlTZWxlY3RlZFZhcmlhYmxlcygpIHtcclxuICAgIHRoaXMuX3ZhckNvdW50Tm9kZS5pbm5lckhUTUwgPSBcIiZuYnNwO1wiO1xyXG4gICAgY29uc3QgcXVlcnlSZXN1bHRzID0gdGhpcy5zZWFyY2hSZXN1bHRzIHx8IHRoaXMubWFuYWdlci5xdWVyeVZhcmlhYmxlcygpO1xyXG4gICAgdGhpcy5zZWFyY2hSZXN1bHRzID0gbnVsbDtcclxuICAgIHRoaXMuX3Nob3dQcm9ncmVzcyh3aGVuKHF1ZXJ5UmVzdWx0cykudGhlbigodmFyaWFibGVzKSA9PiB7XHJcbiAgICAgIHRoaXMuX3Nob3dWYXJpYWJsZXModmFyaWFibGVzKTtcclxuICAgIH0pKTtcclxuICB9XHJcbiAgX3Nob3dWYXJpYWJsZXModmFyaWFibGVzKSB7XHJcbiAgICB0aGlzLl9jb21wb3NlVmFyVGl0bGUodmFyaWFibGVzLmxlbmd0aCk7XHJcbiAgICB0aGlzLl9ncmlkLnNldFZhcmlhYmxlcyh2YXJpYWJsZXMpO1xyXG4gIH1cclxuICBfY29tcG9zZVZhclRpdGxlKHZhcmlhYmxlQ291bnQpIHtcclxuICAgIGNvbnN0IHF1ZXJ5ID0gdGhpcy5tYW5hZ2VyLnZhcmlhYmxlUXVlcnk7XHJcbiAgICBsZXQgc2VhcmNoS2V5ID0gcXVlcnkuc2VhcmNoU3RyaW5nO1xyXG4gICAgY29uc3QgZ3JvdXBQcm9taXNlTGlrZSA9IHF1ZXJ5LmRhdGFDb2xsZWN0aW9uSURcclxuICAgICAgPyB0aGlzLm1hbmFnZXIuZ2V0RGF0YUNvbGxlY3Rpb24oKSB8fCB7fVxyXG4gICAgICA6IHF1ZXJ5LmNhdGVnb3J5SURcclxuICAgICAgICA/IHRoaXMubWFuYWdlci5nZXRDYXRlZ29yeSgpIHx8IHt9XHJcbiAgICAgICAgOiBudWxsO1xyXG4gICAgcmV0dXJuIHdoZW4oZ3JvdXBQcm9taXNlTGlrZSkudGhlbigoZ3JvdXApID0+IHtcclxuICAgICAgaWYgKHNlYXJjaEtleSA9PT0gXCIqXCIgJiYgZ3JvdXApIHtcclxuICAgICAgICBzZWFyY2hLZXkgPSBudWxsO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IHJlc291cmNlID0gIWdyb3VwXHJcbiAgICAgICAgPyBxdWVyeS5mYXZvcml0ZXNcclxuICAgICAgICAgID8gbmxzJDEuZmF2b3JpdGVWYXJpYWJsZXNcclxuICAgICAgICAgIDogc2VhcmNoS2V5ID09PSBcIipcIlxyXG4gICAgICAgICAgICA/IG5scyQxLmFsbFZhcmlhYmxlc1xyXG4gICAgICAgICAgICA6IG5scyQxLnNlYXJjaFZhcmlhYmxlc1xyXG4gICAgICAgIDogIXNlYXJjaEtleVxyXG4gICAgICAgICAgPyBubHMkMS5ncm91cFZhcmlhYmxlc1xyXG4gICAgICAgICAgOiBubHMkMS5zZWFyY2hJbkdyb3VwVmFyaWFibGVzO1xyXG4gICAgICBjb25zdCBwYXJhbXMgPSB7XHJcbiAgICAgICAgc2VhcmNoS2V5LFxyXG4gICAgICAgIGdyb3VwTmFtZTogZ3JvdXAgJiYgKGdyb3VwLnRpdGxlIHx8IGdyb3VwLm5hbWUgfHwgXCI/XCIpXHJcbiAgICAgIH07XHJcbiAgICAgIHRoaXMuX3ZhckNvdW50Tm9kZS50ZXh0Q29udGVudCA9IHN1YnN0aXR1dGVTdHJpbmcocmVzb3VyY2UsIHBhcmFtcykgKyBcIiAoXCIgKyB2YXJpYWJsZUNvdW50ICsgXCIpXCI7XHJcbiAgICAgIC8vIENvbXBvc2UgYSB1bmlxdWUgaWQgb2YgdGhlIHF1ZXJ5IHRvIGRlc2lnbmF0ZSBleHBhbnNpb24gbm9kZXMgaW4gdGhlIHZhcmlhYmxlIGdyaWRcclxuICAgICAgY29uc3QgaWRzID0gW1wiYzpcIiArIChxdWVyeS5jb3VudHJ5SUQgfHwgXCJfXCIpXTtcclxuICAgICAgaWYgKHBhcmFtcy5zZWFyY2hLZXkpIHtcclxuICAgICAgICBpZHMucHVzaChcInM6XCIgKyBwYXJhbXMuc2VhcmNoS2V5KTtcclxuICAgICAgfVxyXG4gICAgICBpZiAocGFyYW1zLmdyb3VwTmFtZSkge1xyXG4gICAgICAgIGlkcy5wdXNoKFwiZzpcIiArIHBhcmFtcy5ncm91cE5hbWUpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChxdWVyeS5mYXZvcml0ZXMpIHtcclxuICAgICAgICBpZHMucHVzaChcImZcIik7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5fZ3JpZC5xdWVyeUlEID0gaWRzLmpvaW4oXCIvXCIpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59O1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoKVxyXG5dLCBEYXRhVmFyaWFibGVzUGFnZS5wcm90b3R5cGUsIFwic2VhcmNoUmVzdWx0c1wiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoKVxyXG5dLCBEYXRhVmFyaWFibGVzUGFnZS5wcm90b3R5cGUsIFwibWFuYWdlclwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoKVxyXG5dLCBEYXRhVmFyaWFibGVzUGFnZS5wcm90b3R5cGUsIFwicGFnZUlzQWN0aXZlXCIsIG51bGwpO1xyXG5EYXRhVmFyaWFibGVzUGFnZSA9IF9fZGVjb3JhdGUoW1xyXG4gIGkkWCgpXHJcbl0sIERhdGFWYXJpYWJsZXNQYWdlKTtcblxuY29uc3QgbmxzID0gZ2V0R0VNZXNzYWdlcyhcIkRhdGFCcm93c2VyXCIpLlZhcmlhYmxlSW5mbztcclxubGV0IFZhcmlhYmxlSW5mbyA9IGNsYXNzIFZhcmlhYmxlSW5mbyBleHRlbmRzIFRlbXBsYXRlZFdpZGdldCB7XHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vXHJcbiAgLy8gR2V0dGVycyAmIHNldHRlcnNcclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICBzZXQgdmFyaWFibGUodmFyaWFibGUpIHtcclxuICAgIHRoaXMuX3NldChcInZhcmlhYmxlXCIsIHZhcmlhYmxlKTtcclxuICAgIHRoaXMuX2J1aWxkSW5mb0Zyb21WYXJpYWJsZSh2YXJpYWJsZSk7XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vIEluaXRpYWxpemF0aW9uXHJcbiAgLy9cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgY29uc3RydWN0b3IocGFyYW1zLCByZWZOb2RlLCBwb3NpdGlvbikge1xyXG4gICAgc3VwZXIocGFyYW1zLCByZWZOb2RlLCBwb3NpdGlvbik7XHJcbiAgICB0aGlzLl90ZW1wbGF0ZVN0cmluZyA9IGBcclxuICA8ZGl2IGNsYXNzPVwiVmFyaWFibGVJbmZvXCI+XHJcbiAgICA8ZGl2IGNsYXNzPVwiVmFyaWFibGVJbmZvX0hlYWRlclwiIGRhdGEtYXR0YWNoLXBvaW50PVwiZGVzY3JpcHRpb25IZWFkZXJcIj4ke25scy5uYW1lfTwvZGl2PlxyXG4gICAgPGRpdiBjbGFzcz1cIlZhcmlhYmxlSW5mb19WYWx1ZVwiIGRhdGEtYXR0YWNoLXBvaW50PVwiX2Rlc2NyaXB0aW9uVmFsdWVcIj48L2Rpdj5cclxuICAgIDxkaXYgZGF0YS1hdHRhY2gtcG9pbnQ9XCJmdWxsTmFtZUdyb3VwXCI+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJWYXJpYWJsZUluZm9fU3BhY2VyXCI+Jm5ic3A7PC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJWYXJpYWJsZUluZm9fSGVhZGVyXCIgZGF0YS1hdHRhY2gtcG9pbnQ9XCJmdWxsTmFtZUhlYWRlclwiPiR7bmxzLnZhcmlhYmxlfTwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzPVwiVmFyaWFibGVJbmZvX1ZhbHVlXCIgZGF0YS1hdHRhY2gtcG9pbnQ9XCJmdWxsTmFtZVZhbHVlXCI+PC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICAgIDxkaXYgZGF0YS1hdHRhY2gtcG9pbnQ9XCJwZXJjZW50QmFzZUdyb3VwXCI+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJWYXJpYWJsZUluZm9fU3BhY2VyXCI+Jm5ic3A7PC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJWYXJpYWJsZUluZm9fSGVhZGVyXCIgZGF0YS1hdHRhY2gtcG9pbnQ9XCJwZXJjZW50QmFzZUhlYWRlclwiPiR7bmxzLnBlcmNlbnRCYXNlfTwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzPVwiVmFyaWFibGVJbmZvX1ZhbHVlXCIgZGF0YS1hdHRhY2gtcG9pbnQ9XCJwZXJjZW50QmFzZVZhbHVlXCI+PC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICAgIDxkaXYgZGF0YS1hdHRhY2gtcG9pbnQ9XCJhdmVyYWdlQmFzZUdyb3VwXCI+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJWYXJpYWJsZUluZm9fU3BhY2VyXCI+Jm5ic3A7PC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJWYXJpYWJsZUluZm9fSGVhZGVyXCIgZGF0YS1hdHRhY2gtcG9pbnQ9XCJhdmVyYWdlQmFzZUhlYWRlclwiPiR7bmxzLmF2ZXJhZ2VCYXNlfTwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzPVwiVmFyaWFibGVJbmZvX1ZhbHVlXCIgZGF0YS1hdHRhY2gtcG9pbnQ9XCJhdmVyYWdlQmFzZVZhbHVlXCI+PC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICAgIDxkaXYgZGF0YS1hdHRhY2gtcG9pbnQ9XCJzb3VyY2VHcm91cFwiPlxyXG4gICAgICA8ZGl2IGNsYXNzPVwiVmFyaWFibGVJbmZvX1NwYWNlclwiPiZuYnNwOzwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzPVwiVmFyaWFibGVJbmZvX0hlYWRlclwiIGRhdGEtYXR0YWNoLXBvaW50PVwic291cmNlSGVhZGVyXCI+JHtubHMuc291cmNlfTwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzPVwiVmFyaWFibGVJbmZvX1ZhbHVlXCIgZGF0YS1hdHRhY2gtcG9pbnQ9XCJzb3VyY2VWYWx1ZVwiPjwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgICA8ZGl2IGRhdGEtYXR0YWNoLXBvaW50PVwidmludGFnZUdyb3VwXCI+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJWYXJpYWJsZUluZm9fU3BhY2VyXCI+Jm5ic3A7PC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJWYXJpYWJsZUluZm9fSGVhZGVyXCIgZGF0YS1hdHRhY2gtcG9pbnQ9XCJ2aW50YWdlSGVhZGVyXCI+JHtubHMudmludGFnZX08L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzcz1cIlZhcmlhYmxlSW5mb19WYWx1ZVwiIGRhdGEtYXR0YWNoLXBvaW50PVwidmludGFnZVZhbHVlXCI+PC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICAgIDxkaXYgZGF0YS1hdHRhY2gtcG9pbnQ9XCJkZWZpbml0aW9uR3JvdXBcIj5cclxuICAgICAgPGRpdiBjbGFzcz1cIlZhcmlhYmxlSW5mb19TcGFjZXJcIj4mbmJzcDs8L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzcz1cIlZhcmlhYmxlSW5mb19IZWFkZXJcIiBkYXRhLWF0dGFjaC1wb2ludD1cImRlZmluaXRpb25IZWFkZXJcIj4ke25scy5kZWZpbml0aW9ufTwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzPVwiVmFyaWFibGVJbmZvX1ZhbHVlXCIgZGF0YS1hdHRhY2gtcG9pbnQ9XCJkZWZpbml0aW9uVmFsdWVcIj48L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gICAgPGRpdiBkYXRhLWF0dGFjaC1wb2ludD1cImluZGV4QmFzZUdyb3VwXCI+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJWYXJpYWJsZUluZm9fU3BhY2VyXCI+Jm5ic3A7PC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJWYXJpYWJsZUluZm9fSGVhZGVyXCIgZGF0YS1hdHRhY2gtcG9pbnQ9XCJpbmRleEJhc2VIZWFkZXJcIj4ke25scy5pbmRleEJhc2V9PC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJWYXJpYWJsZUluZm9fVmFsdWVcIiBkYXRhLWF0dGFjaC1wb2ludD1cImluZGV4QmFzZVZhbHVlXCI+PC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICAgIDxkaXYgZGF0YS1hdHRhY2gtcG9pbnQ9XCJfZmlsdGVyaW5nVGFnc0dyb3VwXCI+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJWYXJpYWJsZUluZm9fU3BhY2VyXCI+Jm5ic3A7PC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJWYXJpYWJsZUluZm9fSGVhZGVyXCIgZGF0YS1hdHRhY2gtcG9pbnQ9XCJmaWx0ZXJpbmdUYWdzSGVhZGVyXCI+JHtubHMuZmlsdGVyc308L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzcz1cIlZhcmlhYmxlSW5mb19WYWx1ZVwiIGRhdGEtYXR0YWNoLXBvaW50PVwiX2ZpbHRlcmluZ1RhZ3NWYWx1ZVwiPjwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgPC9kaXY+YDtcclxuICB9XHJcbiAgcG9zdENyZWF0ZSgpIHtcclxuICAgIHRoaXMuX2ZpZWxkc0NhY2hlID0ge307XHJcbiAgICB0aGlzLmluZm9GaWVsZHMgPSB0eXBlb2YgdGhpcy5pbmZvRmllbGRzID09PSBcInN0cmluZ1wiID8gdGhpcy5pbmZvRmllbGRzLnNwbGl0KFwiLFwiKSA6IHRoaXMuaW5mb0ZpZWxkcyB8fCBbXTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5pbmZvRmllbGRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGxldCBmaWVsZCA9IHRoaXMuaW5mb0ZpZWxkc1tpXTtcclxuICAgICAgY29uc3QgaGVhZGVySW5kZXggPSBmaWVsZC5pbmRleE9mKFwiOlwiKTtcclxuICAgICAgaWYgKGhlYWRlckluZGV4ID4gMCkge1xyXG4gICAgICAgIGNvbnN0IGhlYWRlciA9IGZpZWxkLnN1YnN0cihoZWFkZXJJbmRleCArIDEpO1xyXG4gICAgICAgIGZpZWxkID0gZmllbGQuc3Vic3RyKDAsIGhlYWRlckluZGV4KTtcclxuICAgICAgICBjb25zdCBoZWFkZXJEaXYgPSB0aGlzW2ZpZWxkICsgXCJIZWFkZXJcIl07XHJcbiAgICAgICAgaWYgKGhlYWRlckRpdikge1xyXG4gICAgICAgICAgaGVhZGVyRGl2LnRleHRDb250ZW50ID0gaGVhZGVyO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICB0aGlzLl9maWVsZHNDYWNoZVtmaWVsZF0gPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyBCdWlsZCBpbmZvXHJcbiAgLy9cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgX2J1aWxkSW5mb0Zyb21WYXJpYWJsZSh2YXJpYWJsZSkge1xyXG4gICAgdGhpcy5fZGVzY3JpcHRpb25WYWx1ZS5pbm5lckhUTUwgPSB2YXJpYWJsZS5kZXNjcmlwdGlvbjtcclxuICAgIHRoaXMuX3VwZGF0ZUdyb3VwKHZhcmlhYmxlLCBcInZpbnRhZ2VcIik7XHJcbiAgICAvLyBWYXJpYWJsZSB0YWdzIGFyZSBjb252ZXJ0ZWQgZnJvbSBhcnJheSB0byBoYXNoIHdoaWxlIHBhcnNpbmcgZGF0YSBjb2xsZWN0aW9ucy5cclxuICAgIC8vIFNvLCB3ZSBkaXJlY3RseSBnZXQgdGhlIFNvdXJjZSB0YWcgYW5kIHNob3cgaXRzIHZhbHVlLlxyXG4gICAgY29uc3Qgc291cmNlVGFnID0gdmFyaWFibGUuZmlsdGVyaW5nVGFncy5Tb3VyY2U7XHJcbiAgICB0aGlzLl91cGRhdGVHcm91cCh2YXJpYWJsZSwgXCJzb3VyY2VcIiwgc291cmNlVGFnICYmIHNvdXJjZVRhZy52YWx1ZSk7XHJcbiAgICAvLyBVcGRhdGUgb3B0aW9uYWwgZmllbGRzXHJcbiAgICB0aGlzLl91cGRhdGVHcm91cCh2YXJpYWJsZSwgXCJmdWxsTmFtZVwiLCB0cnVlKTtcclxuICAgIGNvbnN0IHBlcmNlbnRCYXNlID0gdGhpcy5fZ2V0T3B0aW9uYWxGaWVsZCh2YXJpYWJsZSwgXCJwZXJjZW50QmFzZVwiKTtcclxuICAgIHRoaXMuX3VwZGF0ZUdyb3VwKHZhcmlhYmxlLCBcInBlcmNlbnRCYXNlXCIsIHBlcmNlbnRCYXNlICYmIHRoaXMuX2dldEJhc2VGaWVsZERlc2NyaXB0aW9uKHZhcmlhYmxlLCBcInBlcmNlbnRCYXNlXCIpKTtcclxuICAgIGNvbnN0IGF2ZXJhZ2VCYXNlID0gdGhpcy5fZ2V0T3B0aW9uYWxGaWVsZCh2YXJpYWJsZSwgXCJhdmVyYWdlQmFzZVwiKTtcclxuICAgIHRoaXMuX3VwZGF0ZUdyb3VwKHZhcmlhYmxlLCBcImF2ZXJhZ2VCYXNlXCIsIGF2ZXJhZ2VCYXNlICYmIHRoaXMuX2dldEJhc2VGaWVsZERlc2NyaXB0aW9uKHZhcmlhYmxlLCBcImF2ZXJhZ2VCYXNlXCIpKTtcclxuICAgIHRoaXMuX3VwZGF0ZUdyb3VwKHZhcmlhYmxlLCBcImluZGV4QmFzZVwiLCB0cnVlKTtcclxuICAgIHRoaXMuX3VwZGF0ZUdyb3VwKHZhcmlhYmxlLCBcImRlZmluaXRpb25cIik7XHJcbiAgICAvLyBJbiB0aGUgY2FzZSBvZiBmaWx0ZXJpbmcgdGFncyB3ZSBhZGQgZGl2cyBhcyBcIm5hbWU6IHZhbHVlXCIgcGFpcnNcclxuICAgIGNvbnN0IGZpbHRlcnMgPSB0aGlzLl9nZXRPcHRpb25hbEZpZWxkKHZhcmlhYmxlLCBcImZpbHRlcmluZ1RhZ3NcIik7XHJcbiAgICB0aGlzLl9maWx0ZXJpbmdUYWdzR3JvdXAuc3R5bGUuZGlzcGxheSA9IGZpbHRlcnMgPyBcIlwiIDogXCJub25lXCI7XHJcbiAgICBpZiAoZmlsdGVycykge1xyXG4gICAgICBlbXB0eSh0aGlzLl9maWx0ZXJpbmdUYWdzVmFsdWUpO1xyXG4gICAgICBmb3IgKGNvbnN0IGlkIGluIGZpbHRlcnMpIHtcclxuICAgICAgICBjb25zdCBmaWx0ZXIgPSBmaWx0ZXJzW2lkXTtcclxuICAgICAgICBjcmVhdGUoXCJkaXZcIiwgeyB0ZXh0Q29udGVudDogZmlsdGVyLm5hbWUgKyBcIjogXCIgKyBmaWx0ZXIudmFsdWUgfSwgdGhpcy5fZmlsdGVyaW5nVGFnc1ZhbHVlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICBfZ2V0QmFzZUZpZWxkRGVzY3JpcHRpb24odmFyaWFibGUsIGJhc2VGaWVsZCkge1xyXG4gICAgcmV0dXJuIHZhcmlhYmxlW2Jhc2VGaWVsZCArIFwiQWxpYXNcIl0gKyBcIiAoXCIgKyB2YXJpYWJsZVtiYXNlRmllbGRdICsgXCIpXCI7XHJcbiAgfVxyXG4gIF91cGRhdGVHcm91cCh2YXJpYWJsZSwgZmllbGQsIHZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgIC8vIFRoZSBjYXNlIG9mIHJlcXVpcmVkIGZpZWxkXHJcbiAgICAgIHZhbHVlID0gdmFyaWFibGVbZmllbGRdO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodmFsdWUgPT09IHRydWUpIHtcclxuICAgICAgLy8gVGhlIGNhc2Ugb2YgYW4gb3B0aW9uYWwgZmllbGRcclxuICAgICAgdmFsdWUgPSB0aGlzLl9nZXRPcHRpb25hbEZpZWxkKHZhcmlhYmxlLCBmaWVsZCk7XHJcbiAgICB9XHJcbiAgICBsZXQgZGl2ID0gdGhpc1tmaWVsZCArIFwiVmFsdWVcIl07XHJcbiAgICBkaXYuaW5uZXJIVE1MID0gdmFsdWU7XHJcbiAgICBkaXYgPSB0aGlzW2ZpZWxkICsgXCJHcm91cFwiXTtcclxuICAgIGRpdi5zdHlsZS5kaXNwbGF5ID0gdmFsdWUgPyBcIlwiIDogXCJub25lXCI7XHJcbiAgfVxyXG4gIF9nZXRPcHRpb25hbEZpZWxkKHZhcmlhYmxlLCBmaWVsZE5hbWUpIHtcclxuICAgIHJldHVybiB0aGlzLl9maWVsZHNDYWNoZVtcIipcIl0gfHwgdGhpcy5fZmllbGRzQ2FjaGVbZmllbGROYW1lXSA/IHZhcmlhYmxlW2ZpZWxkTmFtZV0gOiBudWxsO1xyXG4gIH1cclxufTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKClcclxuXSwgVmFyaWFibGVJbmZvLnByb3RvdHlwZSwgXCJpbmZvRmllbGRzXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gIHkkcigpXHJcbl0sIFZhcmlhYmxlSW5mby5wcm90b3R5cGUsIFwidmFyaWFibGVcIiwgbnVsbCk7XHJcblZhcmlhYmxlSW5mbyA9IF9fZGVjb3JhdGUoW1xyXG4gIGkkWCgpXHJcbl0sIFZhcmlhYmxlSW5mbyk7XG5cbmxldCBEYXRhQnJvd3Nlck1hbmFnZXIgPSBjbGFzcyBEYXRhQnJvd3Nlck1hbmFnZXIgZXh0ZW5kcyB1JEQge1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vIEdldHRlcnMgJiBzZXR0ZXJzXHJcbiAgLy9cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLyoqXHJcbiAgICogQXJyYXkgb2Ygc2VsZWN0ZWQgdmFyaWFibGVzIGZ1bGwgbmFtZXMuXHJcbiAgICovXHJcbiAgc2V0IHNlbGVjdGlvbih2YWx1ZSkge1xyXG4gICAgdGhpcy5fc2VsZWN0aW9uR3JvdXBzID0gbnVsbDtcclxuICAgIHRoaXMuX3NldChcInNlbGVjdGlvblwiLCB2YWx1ZSk7XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vIENvbnN0cnVjdG9yXHJcbiAgLy9cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgY29uc3RydWN0b3IoZGF0YUJyb3dzZXIpIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICB0aGlzLnNlbGVjdGlvbkxpbWl0ID0gLTE7XHJcbiAgICB0aGlzLmFsbG93U2hvcHBpbmdDYXJ0ID0gZmFsc2U7XHJcbiAgICAvKipcclxuICAgICAqIFVuZG9jdW1lbnRlZCBmZWF0dXJlIHVzZWQgaW4gQ29tcGFyaXNvbiBSZXBvcnRzLlxyXG4gICAgICovXHJcbiAgICB0aGlzLmFsbG93TXVsdGlwbGVTZWxlY3RJbkdyb3VwID0gZmFsc2U7XHJcbiAgICAvKipcclxuICAgICAqIExhc3QgcGFnaW5hdGlvbiBpbmRleCBvbiB0aGUgY2F0ZWdvcnkgcGFnZS5cclxuICAgICAqL1xyXG4gICAgdGhpcy5jYXRlZ29yeVBhZ2VJbmRleCA9IDA7XHJcbiAgICB0aGlzLnZhcmlhYmxlcyA9IGRhdGFCcm93c2VyLnZhcmlhYmxlcztcclxuICAgIHRoaXMuc2VsZWN0aW9uTGltaXQgPSBpc05hTihkYXRhQnJvd3Nlci5zZWxlY3Rpb25MaW1pdCkgPyAtMSA6IGRhdGFCcm93c2VyLnNlbGVjdGlvbkxpbWl0O1xyXG4gICAgdGhpcy5hbGxvd1Nob3BwaW5nQ2FydCA9IHRoaXMubXVsdGlwbGVTZWxlY3RJc0FsbG93ZWQoKSAmJiAhIWRhdGFCcm93c2VyLnNob3BwaW5nQ2FydDtcclxuICAgIHRoaXMuYWxsb3dNdWx0aXBsZVNlbGVjdEluR3JvdXAgPSB0aGlzLm11bHRpcGxlU2VsZWN0SXNBbGxvd2VkKCkgJiYgISFkYXRhQnJvd3Nlci5hbGxvd011bHRpcGxlU2VsZWN0SW5Hcm91cDtcclxuICAgIC8vIFN5bmNocm9uaXplIHZhcmlhYmxlIHF1ZXJ5IHdpdGggZGF0YUJyb3dzZXJcclxuICAgIGRhdGFCcm93c2VyLnZhcmlhYmxlUXVlcnkgPSB0aGlzLnZhcmlhYmxlUXVlcnkgPSBkYXRhQnJvd3Nlci52YXJpYWJsZVF1ZXJ5IHx8IHt9O1xyXG4gICAgLy8gU3luY2hyb25pemUgY291bnRyeUlEIHdpdGggZGF0YUJyb3dzZXJcclxuICAgIGRhdGFCcm93c2VyLmNvdW50cnlJRCA9IHRoaXMudmFyaWFibGVRdWVyeS5jb3VudHJ5SUQgPVxyXG4gICAgICB0aGlzLnZhcmlhYmxlUXVlcnkuY291bnRyeUlEIHx8IGRhdGFCcm93c2VyLmNvdW50cnlJRCB8fCBudWxsO1xyXG4gICAgLy8gQWRkIGZhdm9yaXRlcyB0byB2YXJpYWJsZSBzdG9yZSBpZiBuZWNlc3NhcnkuXHJcbiAgICBpZiAoZGF0YUJyb3dzZXIuZmF2b3JpdGVzICYmICF0aGlzLnZhcmlhYmxlcy5mYXZvcml0ZXMpIHtcclxuICAgICAgdGhpcy52YXJpYWJsZXMuZmF2b3JpdGVzID0gZGF0YUJyb3dzZXIuZmF2b3JpdGVzO1xyXG4gICAgfVxyXG4gICAgLy8gU3RhcnQgdGhlIHN5bmNocm9uaXphdGlvbiB3aXRoIHRoZSBnaXZlbiBjb3VudHJ5LlxyXG4gICAgdGhpcy52YXJpYWJsZXMuc3luY2hyb25pemUoZGF0YUJyb3dzZXIuY291bnRyeUlEKTtcclxuICAgIC8vIFdlIGFzeW5jIGFwcGx5IHRoZSBpbnB1dCBzZWxlY3Rpb24gaW4gdGhlIGNhc2Ugb2YgbXVsdGlwbGUgc2VsZWN0aW9uLlxyXG4gICAgaWYgKGRhdGFCcm93c2VyLnNlbGVjdGlvbiAmJiBkYXRhQnJvd3Nlci5zZWxlY3Rpb24ubGVuZ3RoICYmIHRoaXMubXVsdGlwbGVTZWxlY3RJc0FsbG93ZWQoKSkge1xyXG4gICAgICB0aGlzLmNoYW5nZVNlbGVjdGlvbihkYXRhQnJvd3Nlci5zZWxlY3Rpb24pO1xyXG4gICAgfVxyXG4gICAgLy8gQW55d2F5LCB0aGUgc2VsZWN0aW9uIGluIGRhdGFCcm93c2VyIGlzIG5vdyBzeW5jaHJvbml6ZWQgd2l0aCB0aGlzIHNlbGVjdGlvbi5cclxuICAgIC8vIEl0IHdpbGwgYmUgdXBkYXRlZCBsYXRlciB3aGVuIHZhcmlhYmxlIHN0b3JlIHdpbGwgYmUgc3luY2hyb25pemVkLlxyXG4gICAgdGhpcy5fc2V0KFwic2VsZWN0aW9uXCIsIFtdKTtcclxuICAgIGRhdGFCcm93c2VyLnNlbGVjdGlvbiA9IHRoaXMuc2VsZWN0aW9uO1xyXG4gICAgLy8gUHJlcGFyZSB2YXJpYWJsZSBpbmZvXHJcbiAgICBsZXQgaW5mbyA9IGRhdGFCcm93c2VyLnZhcmlhYmxlSW5mbztcclxuICAgIGlmIChpbmZvID09PSBmYWxzZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAoaW5mbyA9PT0gdHJ1ZSkge1xyXG4gICAgICBpbmZvID0gXCJmdWxsTmFtZVwiO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoaW5mbyBpbnN0YW5jZW9mIFZhcmlhYmxlSW5mbykge1xyXG4gICAgICB0aGlzLnZhcmlhYmxlSW5mbyA9IGluZm87XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRoaXMudmFyaWFibGVJbmZvID0gbmV3IFZhcmlhYmxlSW5mbyh7IGluZm9GaWVsZHM6IGluZm8gfSk7XHJcbiAgfVxyXG4gIC8vIG92ZXJyaWRlXHJcbiAgcG9zdHNjcmlwdCgpIHtcclxuICAgIC8vIGRvIG5vdGhpbmdcclxuICB9XHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vXHJcbiAgLy8gV29yayB3aXRoIHNlbGVjdGlvblxyXG4gIC8vXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIG11bHRpcGxlU2VsZWN0SXNBbGxvd2VkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuc2VsZWN0aW9uTGltaXQgPCAwIHx8IHRoaXMuc2VsZWN0aW9uTGltaXQgPiAxO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBBc3luY2hyb25vdXNseSBjaGFuZ2VzIGEgc2VsZWN0aW9uIHdoZW4gdmFyaWFibGUgc3RvcmUgY29tcGxldGVzXHJcbiAgICogc3luY2hyb25pemF0aW9uIHdpdGggdGhlIGN1cnJlbnQgY291bnRyeS5cclxuICAgKi9cclxuICBjaGFuZ2VTZWxlY3Rpb24oc2VsZWN0aW9uKSB7XHJcbiAgICBjb25zdCBkZmQgPSBjcmVhdGVEZWZlcnJlZCgpO1xyXG4gICAgd2hlbih0aGlzLnZhcmlhYmxlcy5zeW5jaHJvbml6ZSgpKS50aGVuKCgpID0+IHtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fc2V0KFwic2VsZWN0aW9uXCIsIFtdKTtcclxuICAgICAgICB0aGlzLmFkZFRvU2VsZWN0aW9uKHNlbGVjdGlvbiwgdHJ1ZSk7XHJcbiAgICAgICAgZGZkLnJlc29sdmUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBkZmQucHJvbWlzZTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogVmFsaWRhdGVzIHZhcmlhYmxlcyBvZiB0aGUgY3VycmVudCBzZWxlY3Rpb24gdG8gYmUgYXZhaWxhYmxlIGluIHRoZSB2YXJpYWJsZSBzdG9yZS5cclxuICAgKiBUaGlzIHNpdHVhdGlvbiBjYW4gd2hlbiB2YXJpYWJsZXMgZm9ybSBhIHRlbXBvcmFyeSBzb3VyY2UgKGUuZy4gV2ViIE1hcCB2YXJpYWJsZXMpXHJcbiAgICogYXJlIHJlbW92ZWQgZnJvbSB0aGUgdmFyaWFibGUgc3RvcmUuXHJcbiAgICovXHJcbiAgdmFsaWRhdGVTZWxlY3Rpb24oKSB7XHJcbiAgICBjb25zdCB2YWxpZFNlbGVjdGlvbiA9IHRoaXMuc2VsZWN0aW9uLmZpbHRlcigoaWQpID0+IHRoaXMudmFyaWFibGVzLmdldChpZCkpO1xyXG4gICAgaWYgKHZhbGlkU2VsZWN0aW9uLmxlbmd0aCAhPT0gdGhpcy5zZWxlY3Rpb24ubGVuZ3RoKSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0aW9uID0gdmFsaWRTZWxlY3Rpb247XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEFkZHMgdmFyaWFibGUgSUQocykgdG8gc2VsZWN0aW9uLlxyXG4gICAqIEByZXR1cm5zIGEgaGFzaCBvZiBJRHMgb2YgdmFyaWFibGVzIGFkZGVkIHRvIHNlbGVjdGlvbi5cclxuICAgKi9cclxuICBhZGRUb1NlbGVjdGlvbihpZHNPcklkLCBmb3JjZVNldCA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCBpZHMgPSB0eXBlb2YgaWRzT3JJZCA9PT0gXCJzdHJpbmdcIiA/IFtpZHNPcklkXSA6IGlkc09ySWQgfHwgW107XHJcbiAgICBjb25zdCBuZXdTZWxlY3Rpb24gPSB0aGlzLnNlbGVjdGlvbi5zbGljZSgpO1xyXG4gICAgbGV0IGFkZGVkID0ge307XHJcbiAgICBsZXQgbGltaXRSZWFjaGVkID0gZmFsc2U7XHJcbiAgICBpZHMuZm9yRWFjaCgoaWQpID0+IHtcclxuICAgICAgaWYgKCF0aGlzLnZhcmlhYmxlcy5nZXQoaWQpKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLnNlbGVjdGlvbkxpbWl0ID49IDAgJiYgbmV3U2VsZWN0aW9uLmxlbmd0aCA9PT0gdGhpcy5zZWxlY3Rpb25MaW1pdCkge1xyXG4gICAgICAgIGxpbWl0UmVhY2hlZCA9IHRydWU7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IGRhdGEgPSBnZXRUb2dnbGVHcm91cHModGhpcy52YXJpYWJsZXMsIFtpZF0sIHRoaXMuYWxsb3dNdWx0aXBsZVNlbGVjdEluR3JvdXApO1xyXG4gICAgICBpZiAobmV3U2VsZWN0aW9uLmV2ZXJ5KChuZXdJZCkgPT4gIWRhdGEuaGFzaFtuZXdJZF0pKSB7XHJcbiAgICAgICAgbmV3U2VsZWN0aW9uLnB1c2goZGF0YS5ncm91cHNbMF0udmFsdWUpO1xyXG4gICAgICAgIGFkZGVkW2lkXSA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgaWYgKG5ld1NlbGVjdGlvbi5sZW5ndGggJiYgIXRoaXMuX2Vuc3VyZVZhbGlkU2VsZWN0aW9uKG5ld1NlbGVjdGlvbikpIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBpZiAoZm9yY2VTZXQgfHwgdGhpcy5zZWxlY3Rpb24ubGVuZ3RoICE9PSBuZXdTZWxlY3Rpb24ubGVuZ3RoKSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0aW9uID0gbmV3U2VsZWN0aW9uO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIGFkZGVkID0gbnVsbDtcclxuICAgIH1cclxuICAgIGxpbWl0UmVhY2hlZCAmJiB0aGlzLm9uTGltaXQoKTtcclxuICAgIHJldHVybiBhZGRlZDtcclxuICB9XHJcbiAgLy8gQ291bGQgYmUgb3ZlcnJpZGVuIHRvIHRlc3QgdGhhdCBzZWxlY3RlZCB2YXJpYWJsZXMgY2FuIGJlIHVzZWQgdG9nZXRoZXJcclxuICBfZW5zdXJlVmFsaWRTZWxlY3Rpb24oX3NlbGVjdGlvbikge1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFJlbW92ZXMgdmFyaWFibGUgSUQocykgZnJvbSBzZWxlY3Rpb24uXHJcbiAgICogQHJldHVybnMgYSBoYXNoIG9mIElEcyBvZiB2YXJpYWJsZXMgcmVtb3ZlZCBmcm9tIHRoZSBzZWxlY3Rpb24uXHJcbiAgICovXHJcbiAgcmVtb3ZlRnJvbVNlbGVjdGlvbihpZHNPcklkLCByZW1vdmVNdWx0aXBsZU5vZGVzID0gZmFsc2UpIHtcclxuICAgIGNvbnN0IGlkcyA9IHR5cGVvZiBpZHNPcklkID09PSBcInN0cmluZ1wiID8gW2lkc09ySWRdIDogaWRzT3JJZCB8fCBbXTtcclxuICAgIGNvbnN0IG5ld1NlbGVjdGlvbiA9IFtdO1xyXG4gICAgY29uc3QgaGFzaCA9IGdldFRvZ2dsZUdyb3Vwcyh0aGlzLnZhcmlhYmxlcywgaWRzLCAhcmVtb3ZlTXVsdGlwbGVOb2RlcyAmJiB0aGlzLmFsbG93TXVsdGlwbGVTZWxlY3RJbkdyb3VwKS5oYXNoO1xyXG4gICAgY29uc3QgcmVtb3ZlZCA9IHt9O1xyXG4gICAgdGhpcy5zZWxlY3Rpb24uZm9yRWFjaCgoaWQpID0+IHtcclxuICAgICAgaWYgKCFoYXNoW2lkXSkge1xyXG4gICAgICAgIG5ld1NlbGVjdGlvbi5wdXNoKGlkKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICByZW1vdmVkW2lkXSA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgaWYgKHRoaXMuc2VsZWN0aW9uLmxlbmd0aCAhPT0gbmV3U2VsZWN0aW9uLmxlbmd0aCkge1xyXG4gICAgICB0aGlzLnNlbGVjdGlvbiA9IG5ld1NlbGVjdGlvbjtcclxuICAgICAgcmV0dXJuIHJlbW92ZWQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogVXBkYXRlcyB0aGUgY3VycmVudCBzZWxlY3Rpb24gYnkgcmVwbGFjaW5nIElEIG9mIGEgcmVsYXRlZCB2YXJpYWJsZSB3aXRoIHRoZSBuZXcgSUQuXHJcbiAgICovXHJcbiAgdXBkYXRlU2VsZWN0aW9uKGlkKSB7XHJcbiAgICBjb25zdCBkYXRhID0gZ2V0VG9nZ2xlR3JvdXBzKHRoaXMudmFyaWFibGVzLCBbaWRdLCB0aGlzLmFsbG93TXVsdGlwbGVTZWxlY3RJbkdyb3VwKTtcclxuICAgIGxldCBpbmRleCA9IC0xO1xyXG4gICAgdGhpcy5zZWxlY3Rpb24uc29tZSgoaWQsIGkpID0+IHtcclxuICAgICAgaWYgKGRhdGEuaGFzaFtpZF0pIHtcclxuICAgICAgICBpbmRleCA9IGk7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSk7XHJcbiAgICBpZiAoaW5kZXggPj0gMCkge1xyXG4gICAgICBjb25zdCBuZXdTZWxlY3Rpb24gPSB0aGlzLnNlbGVjdGlvbi5zbGljZSgpO1xyXG4gICAgICBuZXdTZWxlY3Rpb25baW5kZXhdID0gZGF0YS5ncm91cHNbMF0udmFsdWU7XHJcbiAgICAgIHRoaXMuc2VsZWN0aW9uID0gbmV3U2VsZWN0aW9uO1xyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBHZXRzIHZhcmlhYmxlIGdyb3VwcyBmb3IgdGhlIGN1cnJlbnQgc2VsZWN0aW9uLlxyXG4gICAqL1xyXG4gIGdldFNlbGVjdGlvbkdyb3VwcygpIHtcclxuICAgIGlmICghdGhpcy5fc2VsZWN0aW9uR3JvdXBzKSB7XHJcbiAgICAgIHRoaXMuX3NlbGVjdGlvbkdyb3VwcyA9IGdldFRvZ2dsZUdyb3Vwcyh0aGlzLnZhcmlhYmxlcywgdGhpcy5zZWxlY3Rpb24sIHRoaXMuYWxsb3dNdWx0aXBsZVNlbGVjdEluR3JvdXApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuX3NlbGVjdGlvbkdyb3VwcztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogQW5pbWF0ZXMgdmFyaWFibGVzIHNlbGVjdGlvbi5cclxuICAgKi9cclxuICBhbmltYXRlU2VsZWN0aW9uKG5vZGUpIHtcclxuICAgIHRoaXMuZmx5QW5pbS5mbHkobm9kZSwgXCJlc3JpNEdFRGF0YUJyb3dzZXJfU2VsZWN0VmFyXCIsIFtcInRvcFwiLCBpc0JvZHlMdHIoKSA/IFwicmlnaHRcIiA6IFwibGVmdFwiXSk7XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vIFdvcmsgd2l0aCB2YXJpYWJsZXMgc3RvcmVcclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvKipcclxuICAgKiBDcmVhdGVzIGEgcXVlcnkgYmFzZWQgb24gdGhlIGN1cnJlbnQgdmFyaWFibGUgcXVlcnkgYW5kIGluY2x1ZGluZyB0aGUgZ2l2ZW4gcHJvcGVydGllcyBvbmx5LlxyXG4gICAqIEl0IGlzIG5vdCBuZWNlc3NhcnkgdG8gc3BlY2lmeSBjb3VudHJ5SUQgcHJvcGVydHkgYmVjYXVzZSBpdCBpcyBhZGRlZCBhdXRvbWF0aWNhbGx5LlxyXG4gICAqL1xyXG4gIGNvbXBvc2VRdWVyeShhbGxvd2VkUHJvcGVydGllcykge1xyXG4gICAgY29uc3QgcHJvcHMgPSB0eXBlb2YgYWxsb3dlZFByb3BlcnRpZXMgPT09IFwic3RyaW5nXCIgPyBbYWxsb3dlZFByb3BlcnRpZXNdIDogYWxsb3dlZFByb3BlcnRpZXMgfHwgW107XHJcbiAgICBjb25zdCBuZXdRdWVyeSA9IHsgY291bnRyeUlEOiB0aGlzLl9nZXRRdWVyeUNvdW50cnlJRCgpIH07XHJcbiAgICBwcm9wcy5mb3JFYWNoKChwcm9wZXJ0eSkgPT4ge1xyXG4gICAgICBjb25zdCB2YWx1ZSA9IHRoaXMudmFyaWFibGVRdWVyeVtwcm9wZXJ0eV07XHJcbiAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgIG5ld1F1ZXJ5W3Byb3BlcnR5XSA9IHZhbHVlO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBuZXdRdWVyeTtcclxuICB9XHJcbiAgX2dldFF1ZXJ5Q291bnRyeUlEKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmFyaWFibGVRdWVyeS5jb3VudHJ5SUQ7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFZhbGlkYXRlcyB0aGUgY3VycmVudCB2YXJpYWJsZSBxdWVyeS5cclxuICAgKiBAcmV0dXJucyBhIHByb21pc2Ugd2hvc2UgcmVzdWx0IGlzIG51bGwgb3IgdmFyaWFibGUgcXVlcnkgcmVzdWx0LlxyXG4gICAqIElmIHZhcmlhYmxlIHF1ZXJ5IGlzIGludmFsaWQsIGFsbCBpdHMgcHJvcGVydGllcyBleGNlcHRcclxuICAgKiBjb3VudHJ5SUQgYXJlIHJlbW92ZWQsIHNvIHRoYXQgdGhlIHN0YXJ0aW5nIHBhZ2Ugb2YgRGF0YSBCcm93c2VyIHdpbGwgYmUgc2hvd24uXHJcbiAgICovXHJcbiAgdmFsaWRhdGVRdWVyeSgpIHtcclxuICAgIGNvbnN0IHF1ZXJ5ID0gdGhpcy52YXJpYWJsZVF1ZXJ5O1xyXG4gICAgY29uc3QgcHJvbWlzZSA9IHF1ZXJ5LmRhdGFDb2xsZWN0aW9uSURcclxuICAgICAgPyB0aGlzLmdldERhdGFDb2xsZWN0aW9uKClcclxuICAgICAgOiBxdWVyeS5jYXRlZ29yeUlEXHJcbiAgICAgICAgPyB0aGlzLmdldENhdGVnb3J5KClcclxuICAgICAgICA6IHRoaXMucXVlcnlWYXJpYWJsZXMoKTtcclxuICAgIHJldHVybiB3aGVuKHByb21pc2UpLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgICBpZiAoIXJlc3VsdCkge1xyXG4gICAgICAgIHRoaXMudmFyaWFibGVRdWVyeSA9IHRoaXMuY29tcG9zZVF1ZXJ5KCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHF1ZXJ5LmRhdGFDb2xsZWN0aW9uSUQgfHwgcXVlcnkuY2F0ZWdvcnlJRCA/IG51bGwgOiByZXN1bHQ7XHJcbiAgICB9LCAoKSA9PiB7XHJcbiAgICAgIHRoaXMudmFyaWFibGVRdWVyeSA9IHRoaXMuY29tcG9zZVF1ZXJ5KCk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogUmVxdWVzdCBhbGwgY2F0ZWdvcmllcyBmb3IgdGhlIGN1cnJlbnQgY291bnRyeS5cclxuICAgKi9cclxuICBnZXRDYXRlZ29yaWVzKCkge1xyXG4gICAgcmV0dXJuIHdoZW4odGhpcy52YXJpYWJsZXMuY2F0ZWdvcmllcy5xdWVyeSh0aGlzLmNvbXBvc2VRdWVyeSgpKSk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFJlcXVlc3RzIHZhcmlhYmxlcyBhcHBseWluZyB0aGUgY3VycmVudCB2YXJpYWJsZSBxdWVyeS5cclxuICAgKi9cclxuICBxdWVyeVZhcmlhYmxlcyhvcHRpb25zKSB7XHJcbiAgICByZXR1cm4gd2hlbih0aGlzLnZhcmlhYmxlcy5xdWVyeSh0aGlzLnZhcmlhYmxlUXVlcnksIG9wdGlvbnMpKTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogUmVxdWVzdHMgYSBjYXRlZ29yeSBieSBJRC4gSWYgSUQgaXMgYWJzZW50LCB0aGUgY2F0ZWdvcnkgZnJvbSB0aGUgY3VycmVudCB2YXJpYWJsZSBxdWVyeSBpcyByZXF1ZXN0ZWQuXHJcbiAgICovXHJcbiAgZ2V0Q2F0ZWdvcnkoaWQpIHtcclxuICAgIGlkID0gaWQgfHwgdGhpcy52YXJpYWJsZVF1ZXJ5LmNhdGVnb3J5SUQ7XHJcbiAgICBpZiAoIWlkKSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcXVlcnkgPSB0aGlzLmNvbXBvc2VRdWVyeSgpO1xyXG4gICAgcXVlcnkuaWQgPSBpZDtcclxuICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMudmFyaWFibGVzLmNhdGVnb3JpZXMucXVlcnkocXVlcnkpO1xyXG4gICAgaWYgKFwidGhlblwiIGluIHJlc3VsdCkge1xyXG4gICAgICByZXR1cm4gd2hlbihyZXN1bHQpLnRoZW4oKGNhdGVnb3JpZXMpID0+IHRoaXMuX2dldENhdGVnb3J5KGNhdGVnb3JpZXMsIGlkKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5fZ2V0Q2F0ZWdvcnkocmVzdWx0LCBpZCk7XHJcbiAgfVxyXG4gIC8vIENvdWxkIGJlIG92ZXJyaWRlbiB0byBxdWVyeSBhZGRpdGlvbmFsIGNhdGVnb3JpZXNcclxuICBfZ2V0Q2F0ZWdvcnkoY2F0ZWdvcmllcywgX2lkKSB7XHJcbiAgICByZXR1cm4gY2F0ZWdvcmllc1swXTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogUmVxdWVzdHMgYSBkYXRhIGNvbGxlY3Rpb24gYnkgSUQuIElmIElEIGlzIGFic2VudCwgdGhlIGRhdGEgY29sbGVjdGlvbiBmcm9tIHRoZSBjdXJyZW50IHZhcmlhYmxlIHF1ZXJ5IGlzIHJlcXVlc3RlZC5cclxuICAgKi9cclxuICBnZXREYXRhQ29sbGVjdGlvbihpZCkge1xyXG4gICAgaWQgPSBpZCB8fCB0aGlzLnZhcmlhYmxlUXVlcnkuZGF0YUNvbGxlY3Rpb25JRDtcclxuICAgIGlmICghaWQpIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBjb25zdCBxdWVyeSA9IHRoaXMuY29tcG9zZVF1ZXJ5KCk7XHJcbiAgICBxdWVyeS5pZCA9IGlkO1xyXG4gICAgY29uc3QgcmVzdWx0ID0gdGhpcy52YXJpYWJsZXMuZGF0YUNvbGxlY3Rpb25zLnF1ZXJ5KHF1ZXJ5KTtcclxuICAgIGlmIChcInRoZW5cIiBpbiByZXN1bHQpIHtcclxuICAgICAgcmV0dXJuIHdoZW4ocmVzdWx0KS50aGVuKChkYXRhQ29sbGVjdGlvbnMpID0+IHRoaXMuX2dldERhdGFDb2xsZWN0aW9uKGRhdGFDb2xsZWN0aW9ucywgaWQpKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLl9nZXREYXRhQ29sbGVjdGlvbihyZXN1bHQsIGlkKTtcclxuICB9XHJcbiAgLy8gQ291bGQgYmUgb3ZlcnJpZGVuIHRvIHF1ZXJ5IGFkZGl0aW9uYWwgZGF0YSBjb2xsZWN0aW9uc1xyXG4gIF9nZXREYXRhQ29sbGVjdGlvbihkYXRhQ29sbGVjdGlvbnMsIF9pZCkge1xyXG4gICAgcmV0dXJuIGRhdGFDb2xsZWN0aW9uc1swXTtcclxuICB9XHJcbiAgb25MaW1pdCgpIHsgfVxyXG59O1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoKVxyXG5dLCBEYXRhQnJvd3Nlck1hbmFnZXIucHJvdG90eXBlLCBcInZhcmlhYmxlc1wiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoKVxyXG5dLCBEYXRhQnJvd3Nlck1hbmFnZXIucHJvdG90eXBlLCBcInNlbGVjdGlvbkxpbWl0XCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gIHkkcigpXHJcbl0sIERhdGFCcm93c2VyTWFuYWdlci5wcm90b3R5cGUsIFwidmFyaWFibGVRdWVyeVwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoKVxyXG5dLCBEYXRhQnJvd3Nlck1hbmFnZXIucHJvdG90eXBlLCBcInZhcmlhYmxlSW5mb1wiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoKVxyXG5dLCBEYXRhQnJvd3Nlck1hbmFnZXIucHJvdG90eXBlLCBcImZseUFuaW1cIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKClcclxuXSwgRGF0YUJyb3dzZXJNYW5hZ2VyLnByb3RvdHlwZSwgXCJhbGxvd1Nob3BwaW5nQ2FydFwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICB5JHIoKVxyXG5dLCBEYXRhQnJvd3Nlck1hbmFnZXIucHJvdG90eXBlLCBcImFsbG93TXVsdGlwbGVTZWxlY3RJbkdyb3VwXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gIHkkcigpXHJcbl0sIERhdGFCcm93c2VyTWFuYWdlci5wcm90b3R5cGUsIFwiY2F0ZWdvcnlQYWdlSW5kZXhcIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKClcclxuXSwgRGF0YUJyb3dzZXJNYW5hZ2VyLnByb3RvdHlwZSwgXCJjcmVhdGVWYXJpYWJsZUdyaWRcIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgeSRyKClcclxuXSwgRGF0YUJyb3dzZXJNYW5hZ2VyLnByb3RvdHlwZSwgXCJzZWxlY3Rpb25cIiwgbnVsbCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gIHkkcigpXHJcbl0sIERhdGFCcm93c2VyTWFuYWdlci5wcm90b3R5cGUsIFwib25MaW1pdFwiLCBudWxsKTtcclxuRGF0YUJyb3dzZXJNYW5hZ2VyID0gX19kZWNvcmF0ZShbXHJcbiAgaSRYKClcclxuXSwgRGF0YUJyb3dzZXJNYW5hZ2VyKTtcblxuLy8gZ2VvZW5yaWNobWVudC53aWRnZXRzLkRhdGFCcm93c2VyXHJcbmNsYXNzIERhdGFCcm93c2VyQ29udGVudEZhY3Rvcnkge1xyXG4gIGNyZWF0ZU1hbmFnZXIoZGF0YUJyb3dzZXIpIHtcclxuICAgIHJldHVybiBuZXcgRGF0YUJyb3dzZXJNYW5hZ2VyKGRhdGFCcm93c2VyKTtcclxuICB9XHJcbiAgY3JlYXRlQnJlYWRjcnVtYihvcHRpb25zKSB7XHJcbiAgICByZXR1cm4gbmV3IEJyZWFkY3J1bWIob3B0aW9ucyk7XHJcbiAgfVxyXG4gIGNyZWF0ZUNhdGVnb3JpZXNQYWdlKG9wdGlvbnMpIHtcclxuICAgIHJldHVybiBuZXcgRGF0YUNhdGVnb3JpZXNQYWdlKG9wdGlvbnMpO1xyXG4gIH1cclxuICBjcmVhdGVEYXRhQ29sbGVjdGlvbnNQYWdlKG9wdGlvbnMpIHtcclxuICAgIHJldHVybiBuZXcgRGF0YUNvbGxlY3Rpb25zUGFnZShvcHRpb25zKTtcclxuICB9XHJcbiAgY3JlYXRlVmFyaWFibGVzUGFnZShvcHRpb25zKSB7XHJcbiAgICByZXR1cm4gbmV3IERhdGFWYXJpYWJsZXNQYWdlKG9wdGlvbnMpO1xyXG4gIH1cclxuICBjcmVhdGVWYXJpYWJsZUdyaWQob3B0aW9ucywgcmVmTm9kZSkge1xyXG4gICAgcmV0dXJuIG5ldyBEYXRhVmFyaWFibGVHcmlkKG9wdGlvbnMpLnBsYWNlQXQocmVmTm9kZSk7XHJcbiAgfVxyXG59XG5cbi8vIEV4ZWN1dGVzIHRoZSBjYWxsYmFjayBhZnRlciB0aGUgcmVzb2x2ZXIncyBwcm9taXNlIGlzIGZ1bGZpbGxlZC5cclxuZnVuY3Rpb24gcmVzb2x2ZUNhbGxiYWNrKHJlc29sdmVyLCBxdWVyeSwgY2FsbGJhY2spIHtcclxuICBjb25zdCBwcm9taXNlID0gcmVzb2x2ZXIgJiYgcmVzb2x2ZXIocXVlcnkpO1xyXG4gIHJldHVybiBpc0ltbWVkaWF0ZVJlc3VsdChwcm9taXNlKSA/IGNhbGxiYWNrKCkgOiBwcm9taXNlLmNhdGNoKCgpID0+IHsgfSkudGhlbigoKSA9PiBjYWxsYmFjaygpKTtcclxufVxyXG5jbGFzcyBEZWZlcnJlZFN0b3JlIHtcclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyAgTWV0aG9kc1xyXG4gIC8vXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vXHJcbiAgICAvLyAgSW5zdGFuY2UgdmFyaWFibGVzXHJcbiAgICAvL1xyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgdGhpcy5pZFByb3BlcnR5ID0gXCJpZFwiO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUcnVlIGlmIGlkIHByb3BlcnR5IHNob3VsZCBiZSBjYXNlIGluc2Vuc2l0aXZlLiBEZWZhdWx0cyB0byB0cnVlLlxyXG4gICAgICovXHJcbiAgICB0aGlzLmluZGV4SWdub3JlQ2FzZSA9IHRydWU7XHJcbiAgICB0aGlzLnF1ZXJ5RW5naW5lID0gY3JlYXRlU2ltcGxlUXVlcnlFbmdpbmUoKTtcclxuICAgIG1peGluKHRoaXMsIG9wdGlvbnMpO1xyXG4gICAgdGhpcy5zZXREYXRhKHRoaXMuZGF0YSk7XHJcbiAgfVxyXG4gIHNldERhdGEoZGF0YSkge1xyXG4gICAgdGhpcy5kYXRhID0gW107XHJcbiAgICB0aGlzLmluZGV4ID0ge307XHJcbiAgICBkYXRhICYmXHJcbiAgICAgIGRhdGEuZm9yRWFjaCgob2JqZWN0LCBpKSA9PiB7XHJcbiAgICAgICAgdGhpcy5kYXRhW2ldID0gb2JqZWN0O1xyXG4gICAgICAgIGxldCBpZCA9IHRoaXMuZ2V0SWRlbnRpdHkob2JqZWN0KTtcclxuICAgICAgICBpZiAodGhpcy5pbmRleElnbm9yZUNhc2UpIHtcclxuICAgICAgICAgIGlkID0gaWQudG9VcHBlckNhc2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pbmRleFtpZF0gPSBpO1xyXG4gICAgICB9KTtcclxuICB9XHJcbiAgZ2V0KGlkKSB7XHJcbiAgICBpZiAodGhpcy5pbmRleElnbm9yZUNhc2UgJiYgaWQpIHtcclxuICAgICAgaWQgPSBpZC50b1VwcGVyQ2FzZSgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuZGF0YVt0aGlzLmluZGV4W2lkXV07XHJcbiAgfVxyXG4gIGdldElkZW50aXR5KG9iamVjdCkge1xyXG4gICAgcmV0dXJuIG9iamVjdFt0aGlzLmlkUHJvcGVydHldO1xyXG4gIH1cclxuICBxdWVyeShxdWVyeSwgb3B0aW9ucykge1xyXG4gICAgcmV0dXJuIHJlc29sdmVDYWxsYmFjayh0aGlzLnJlc29sdmVyLCBxdWVyeSwgKCkgPT4gdGhpcy5zeW5jUXVlcnkocXVlcnksIG9wdGlvbnMpKTtcclxuICB9XHJcbiAgc3luY1F1ZXJ5KHF1ZXJ5LCBvcHRpb25zKSB7XHJcbiAgICByZXR1cm4gdGhpcy5xdWVyeUVuZ2luZShxdWVyeSwgb3B0aW9ucykodGhpcy5kYXRhKTtcclxuICB9XHJcbn1cclxuRGVmZXJyZWRTdG9yZS5yZXNvbHZlQ2FsbGJhY2sgPSByZXNvbHZlQ2FsbGJhY2s7XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5mdW5jdGlvbiBzJHAoZSx0LG8pe2lmKCFlfHwhZS5yZWFkfHwhMT09PWUucmVhZC5lbmFibGVkfHwhZS5yZWFkLnNvdXJjZSlyZXR1cm4gITE7Y29uc3Qgbj1lLnJlYWQuc291cmNlO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBuKXtpZihuPT09dClyZXR1cm4gITA7aWYobi5pbmRleE9mKFwiLlwiKT4tMSYmMD09PW4uaW5kZXhPZih0KSYmZiR4KG4sbykpcmV0dXJuICEwfWVsc2UgZm9yKGNvbnN0IHMgb2Ygbil7aWYocz09PXQpcmV0dXJuICEwO2lmKHMuaW5kZXhPZihcIi5cIik+LTEmJjA9PT1zLmluZGV4T2YodCkmJmYkeChzLG8pKXJldHVybiAhMH1yZXR1cm4gITF9ZnVuY3Rpb24gaSROKGUpe3JldHVybiBlJiYoIWUucmVhZHx8ITEhPT1lLnJlYWQuZW5hYmxlZCYmIWUucmVhZC5zb3VyY2UpfWZ1bmN0aW9uIGYkbShlLHQscixuLGYpe2xldCBhPWkkWSh0W3JdLGYpO2kkTihhKSYmKGVbcl09ITApO2Zvcihjb25zdCBpIG9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHQpKWE9aSRZKHRbaV0sZikscyRwKGEscixuKSYmKGVbaV09ITApO31mdW5jdGlvbiBhJEQoZSx0LHIsbyl7Y29uc3Qgcz1yLm1ldGFkYXRhcyxpPWEkTShzW3RdLFwiYW55XCIsbyksZj1pJiZpLmRlZmF1bHQ7aWYodm9pZCAwPT09ZilyZXR1cm47Y29uc3QgYT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBmP2YuY2FsbChlLHQsbyk6Zjt2b2lkIDAhPT1hJiZyLnNldCh0LGEpO31jb25zdCBjJFM9e29yaWdpbjpcInNlcnZpY2VcIn07ZnVuY3Rpb24gdSR5KHIsbixzPWMkUyl7aWYoIW58fFwib2JqZWN0XCIhPXR5cGVvZiBuKXJldHVybjtjb25zdCBpPWUkRyhyKSx1PWkubWV0YWRhdGFzLGQ9e307Zm9yKGNvbnN0IGUgb2YgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMobikpZiRtKGQsdSxlLG4scyk7aS5zZXREZWZhdWx0T3JpZ2luKHMub3JpZ2luKTtmb3IoY29uc3QgZSBvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhkKSl7Y29uc3QgZj1pJFkodVtlXSxzKS5yZWFkLGE9ZiYmZi5zb3VyY2U7bGV0IGM7Yz1hJiZcInN0cmluZ1wiPT10eXBlb2YgYT9vJEUobixhKTpuW2VdLGYmJmYucmVhZGVyJiYoYz1mLnJlYWRlci5jYWxsKHIsYyxuLHMpKSx2b2lkIDAhPT1jJiZpLnNldChlLGMpO31pZighc3x8IXMuaWdub3JlRGVmYXVsdHMpZm9yKGNvbnN0IGUgb2YgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModSkpZFtlXXx8YSREKHIsZSxpLHMpO2kuc2V0RGVmYXVsdE9yaWdpbihcInVzZXJcIik7fWZ1bmN0aW9uIGQkdShlLHQscixvPWMkUyl7dmFyIG47Y29uc3Qgcz17Li4ubyxtZXNzYWdlczpbXX07cihzKSxudWxsPT0obj1zLm1lc3NhZ2VzKXx8bi5mb3JFYWNoKCh0PT57XCJ3YXJuaW5nXCIhPT10LnR5cGV8fGUubG9hZGVkP28mJm8ubWVzc2FnZXMmJm8ubWVzc2FnZXMucHVzaCh0KTplLmxvYWRXYXJuaW5ncy5wdXNoKHQpO30pKTt9XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5jb25zdCBsJEQ9biRULmdldExvZ2dlcihcImVzcmkuY29yZS5hY2Nlc3NvclN1cHBvcnQud3JpdGVcIik7ZnVuY3Rpb24gYSRDKHIsZSx0LGksbyl7dmFyIG4scztjb25zdCB1PXt9O3JldHVybiBudWxsPT0obj1lLndyaXRlKXx8bnVsbD09KHM9bi53cml0ZXIpfHxzLmNhbGwocixpLHUsdCxvKSx1fWZ1bmN0aW9uIGYkbChyLGUsdCxpLG4sdSl7aWYoIWl8fCFpLndyaXRlKXJldHVybiAhMTtjb25zdCBhPXIuZ2V0KHQpO2lmKCFuJiZpLndyaXRlLm92ZXJyaWRlUG9saWN5KXtjb25zdCBlPWkud3JpdGUub3ZlcnJpZGVQb2xpY3kuY2FsbChyLGEsdCx1KTt2b2lkIDAhPT1lJiYobj1lKTt9aWYobnx8KG49aS53cml0ZSksIW58fCExPT09bi5lbmFibGVkKXJldHVybiAhMTtpZigobnVsbD09PWEmJiFuLmFsbG93TnVsbHx8dm9pZCAwPT09YSkmJm4uaXNSZXF1aXJlZCl7Y29uc3QgZT1uZXcgcyR4KFwid2ViLWRvY3VtZW50LXdyaXRlOnByb3BlcnR5LXJlcXVpcmVkXCIsYE1pc3NpbmcgdmFsdWUgZm9yIHJlcXVpcmVkIHByb3BlcnR5ICcke3R9JyBvbiAnJHtyLmRlY2xhcmVkQ2xhc3N9J2Ase3Byb3BlcnR5TmFtZTp0LHRhcmdldDpyfSk7cmV0dXJuIGUmJnUmJnUubWVzc2FnZXM/dS5tZXNzYWdlcy5wdXNoKGUpOmUmJiF1JiZsJEQuZXJyb3IoZS5uYW1lLGUubWVzc2FnZSksITF9aWYodm9pZCAwPT09YSlyZXR1cm4gITE7aWYobnVsbD09PWEmJiFuLmFsbG93TnVsbClyZXR1cm4gITE7aWYoYyRSKHIsdCx1LGksYSkpcmV0dXJuICExO2lmKHZvaWQgMCE9PWkuZGVmYXVsdClyZXR1cm4gITA7aWYoIW4uaWdub3JlT3JpZ2luJiZ1JiZ1Lm9yaWdpbil7aWYoZS5zdG9yZS5vcmlnaW5PZih0KTx0JEcodS5vcmlnaW4pKXJldHVybiAhMX1yZXR1cm4gITB9ZnVuY3Rpb24gYyRSKHIsZSx0LGksbyl7Y29uc3Qgbj1pLmRlZmF1bHQ7aWYodm9pZCAwPT09bilyZXR1cm4gITE7aWYobnVsbCE9aS5kZWZhdWx0RXF1YWxzKXJldHVybiBpLmRlZmF1bHRFcXVhbHMobyk7aWYoXCJmdW5jdGlvblwiPT10eXBlb2Ygbil7aWYoQXJyYXkuaXNBcnJheShvKSl7Y29uc3QgaT1uLmNhbGwocixlLHQpO3JldHVybiBsJEgoaSxvKX1yZXR1cm4gITF9cmV0dXJuIG49PT1vfWZ1bmN0aW9uIHAkVChyLHQsbyxuKXtjb25zdCBzPWUkRyhyKSx1PXMubWV0YWRhdGFzLGw9cyR6KHVbdF0sbik7cmV0dXJuICEhbCYmZiRsKHIscyx0LGwsbyxuKX1mdW5jdGlvbiBnJGEocixvLHMpe2lmKHImJlwiZnVuY3Rpb25cIj09dHlwZW9mIHIudG9KU09OJiYoIXIudG9KU09OLmlzRGVmYXVsdFRvSlNPTnx8IXIud3JpdGUpKXJldHVybiB1JE0obyxyLnRvSlNPTigpKTtjb25zdCB1PWUkRyhyKSxsPXUubWV0YWRhdGFzO2Zvcihjb25zdCBlIGluIGwpe2NvbnN0IGc9cyR6KGxbZV0scyk7aWYoIWYkbChyLHUsZSxnLHZvaWQgMCxzKSljb250aW51ZTtjb25zdCBkPXIuZ2V0KGUpLG09YSRDKHIsZyxnLndyaXRlJiZcInN0cmluZ1wiPT10eXBlb2YgZy53cml0ZS50YXJnZXQ/Zy53cml0ZS50YXJnZXQ6ZSxkLHMpO3ZhciBjLHA7aWYoT2JqZWN0LmtleXMobSkubGVuZ3RoPjApbz11JE0obyxtKSxudWxsIT1zJiZudWxsIT0oYz1zLnJlc291cmNlcykmJm51bGwhPShwPWMucGVuZGluZ09wZXJhdGlvbnMpJiZwLmxlbmd0aCYmUHJvbWlzZS5hbGwocy5yZXNvdXJjZXMucGVuZGluZ09wZXJhdGlvbnMpLnRoZW4oKCgpPT51JE0obyxtKSkpLHMmJnMud3JpdHRlblByb3BlcnRpZXMmJnMud3JpdHRlblByb3BlcnRpZXMucHVzaCh7dGFyZ2V0OnIscHJvcE5hbWU6ZSxvbGRPcmlnaW46YyRWKHUuc3RvcmUub3JpZ2luT2YoZSkpLG5ld09yaWdpbjpzLm9yaWdpbn0pO31yZXR1cm4gb31cblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmNvbnN0IGkkTT1zPT57bGV0IGk9Y2xhc3MgZXh0ZW5kcyBze2NvbnN0cnVjdG9yKC4uLnIpe3N1cGVyKC4uLnIpO31yZWFkKHIsdCl7dSR5KHRoaXMscix0KTt9d3JpdGUocj17fSx0KXtyZXR1cm4gZyRhKHRoaXMscix0KX10b0pTT04ocil7cmV0dXJuIHRoaXMud3JpdGUoe30scil9c3RhdGljIGZyb21KU09OKHIsdCl7cmV0dXJuIGMkUS5jYWxsKHRoaXMscix0KX19O3JldHVybiBpPWUkdShbaSRYKFwiZXNyaS5jb3JlLkpTT05TdXBwb3J0XCIpXSxpKSxpLnByb3RvdHlwZS50b0pTT04uaXNEZWZhdWx0VG9KU09OPSEwLGl9O2Z1bmN0aW9uIGMkUShyLHQpe2lmKCFyKXJldHVybiBudWxsO2lmKHIuZGVjbGFyZWRDbGFzcyl0aHJvdyBuZXcgRXJyb3IoXCJKU09OIG9iamVjdCBpcyBhbHJlYWR5IGh5ZHJhdGVkXCIpO2NvbnN0IHM9bmV3IHRoaXM7cmV0dXJuIHMucmVhZChyLHQpLHN9bGV0IGEkQj1jbGFzcyBleHRlbmRzKGkkTSh1JEQpKXt9O2EkQj1lJHUoW2kkWChcImVzcmkuY29yZS5KU09OU3VwcG9ydFwiKV0sYSRCKTtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmxldCBvJGk7Y29uc3QgciRnPXt2YWx1ZXM6WzEsLjMwNDgsLjMwNDgwMDYwOTYwMTIxOTIsLjMwNDc5NzI2NTQsLjkxNDM5MTc5NjIsLjIwMTE2NjE5NTE2NCwuOTE0Mzk4NDE0NjE2MDI4NywuMzA0Nzk5NDcxNTM4Njc2MiwyMC4xMTY3NjUxMjE1NTI2MywyMC4xMTY3ODI0OTQzNzU4NywuOTE0Mzk4NTMwNzQ0NDQwOCwuOTE0Mzk1MjMsLjMwNDc5OTcxMDE4MTUwODgsMjAuMTE2NzU2LDVlNCwxNWU0XSx1bml0czpbXCJNZXRlclwiLFwiRm9vdFwiLFwiRm9vdF9VU1wiLFwiRm9vdF9DbGFya2VcIixcIllhcmRfQ2xhcmtlXCIsXCJMaW5rX0NsYXJrZVwiLFwiWWFyZF9TZWFyc1wiLFwiRm9vdF9TZWFyc1wiLFwiQ2hhaW5fU2VhcnNcIixcIkNoYWluX0Jlbm9pdF8xODk1X0JcIixcIllhcmRfSW5kaWFuXCIsXCJZYXJkX0luZGlhbl8xOTM3XCIsXCJGb290X0dvbGRfQ29hc3RcIixcIkNoYWluX1NlYXJzXzE5MjJfVHJ1bmNhdGVkXCIsXCI1MF9LaWxvbWV0ZXJzXCIsXCIxNTBfS2lsb21ldGVyc1wiXSwyMDY2OjUsMjEzNjoxMiwyMTU1OjIsMjE1NzowLDIxNTg6MCwyMTU5OjEyLDIxNjA6MTIsMjIwNDoyLDIyMTk6MCwyMjIwOjAsMjI1NDoyLDIyNTU6MiwyMjU2OjEsMjI2NToxLDIyNjY6MSwyMjY3OjIsMjI2ODoyLDIyNjk6MSwyMjcwOjEsMjI3MToyLDIyNzI6MiwyMjczOjEsMjI5NDowLDIyOTU6MCwyMzE0OjMsMjg5OToyLDI5MDA6MiwyOTAxOjEsMjkwOToxLDI5MTA6MSwyOTExOjIsMjkxMjoyLDI5MTM6MSwyOTE0OjEsMjk5MjoxLDI5OTM6MCwyOTk0OjEsMzA4MDoxLDMwODk6MiwzMDkwOjAsMzA5MToyLDMxMDI6MiwzMTQxOjAsMzE0MjowLDMxNjc6MTMsMzM1OToyLDMzNjA6MCwzMzYxOjEsMzM2MjowLDMzNjM6MiwzMzY0OjAsMzM2NToyLDMzNjY6MywzNDA0OjIsMzQwNTowLDM0MDY6MCwzNDA3OjMsMzQzOTowLDM0NDA6MCwzNDc5OjEsMzQ4MDowLDM0ODE6MSwzNDgyOjAsMzQ4MzoxLDM0ODQ6MCwzNDg1OjIsMzQ4NjowLDM0ODc6MiwzNDg4OjAsMzQ4OTowLDM0OTA6MiwzNDkxOjAsMzQ5MjoyLDM0OTM6MCwzNDk0OjIsMzQ5NTowLDM0OTY6MiwzNDk3OjAsMzQ5ODoyLDM0OTk6MCwzNTAwOjIsMzUwMTowLDM1MDI6MiwzNTAzOjAsMzUwNDoyLDM1MDU6MCwzNTA2OjIsMzUwNzowLDM1MDg6MiwzNTA5OjAsMzUxMDoyLDM1MTE6MCwzNTEyOjIsMzUxMzowLDM1MTQ6MCwzNTE1OjIsMzUxNjowLDM1MTc6MiwzNTE4OjAsMzUxOToyLDM1MjA6MCwzNTIxOjIsMzUyMjowLDM1MjM6MiwzNTI0OjAsMzUyNToyLDM1MjY6MCwzNTI3OjIsMzUyODowLDM1Mjk6MiwzNTMwOjAsMzUzMToyLDM1MzI6MCwzNTMzOjIsMzUzNDowLDM1MzU6MiwzNTM2OjAsMzUzNzoyLDM1Mzg6MCwzNTM5OjIsMzU0MDowLDM1NDE6MiwzNTQyOjAsMzU0MzoyLDM1NDQ6MCwzNTQ1OjIsMzU0NjowLDM1NDc6MiwzNTQ4OjAsMzU0OToyLDM1NTA6MCwzNTUxOjIsMzU1MjowLDM1NTM6MiwzNTgyOjIsMzU4MzowLDM1ODQ6MiwzNTg1OjAsMzU4NjoyLDM1ODc6MCwzNTg4OjEsMzU4OTowLDM1OTA6MSwzNTkxOjAsMzU5MjowLDM1OTM6MSwzNTk4OjIsMzU5OTowLDM2MDA6MiwzNjA1OjEsMzYwNjowLDM2MDc6MCwzNjA4OjIsMzYwOTowLDM2MTA6MiwzNjExOjAsMzYxMjoyLDM2MTM6MCwzNjE0OjIsMzYxNTowLDM2MTY6MiwzNjE3OjAsMzYxODoyLDM2MTk6MCwzNjIwOjIsMzYyMTowLDM2MjI6MiwzNjIzOjAsMzYyNDoyLDM2MjU6MCwzNjI2OjIsMzYyNzowLDM2Mjg6MiwzNjI5OjAsMzYzMDoyLDM2MzE6MCwzNjMyOjIsMzYzMzowLDM2MzQ6MSwzNjM1OjAsMzYzNjoxLDM2NDA6MiwzNjQxOjAsMzY0MjoyLDM2NDM6MCwzNjQ0OjEsMzY0NTowLDM2NDY6MSwzNjQ3OjAsMzY0ODoxLDM2NDk6MCwzNjUwOjIsMzY1MTowLDM2NTI6MiwzNjUzOjAsMzY1NDoyLDM2NTU6MCwzNjU2OjEsMzY1NzowLDM2NTg6MiwzNjU5OjAsMzY2MDoyLDM2NjE6MCwzNjYyOjIsMzY2MzowLDM2NjQ6MiwzNjY4OjIsMzY2OTowLDM2NzA6MiwzNjcxOjAsMzY3MjoyLDM2NzM6MCwzNjc0OjIsMzY3NTowLDM2NzY6MSwzNjc3OjIsMzY3ODowLDM2Nzk6MSwzNjgwOjIsMzY4MTowLDM2ODI6MSwzNjgzOjIsMzY4NDowLDM2ODU6MCwzNjg2OjIsMzY4NzowLDM2ODg6MiwzNjg5OjAsMzY5MDoyLDM2OTE6MCwzNjkyOjIsMzY5NjoyLDM2OTc6MCwzNjk4OjIsMzY5OTowLDM3MDA6MiwzNzkzOjAsMzc5NDowLDM4MTI6MCwzODU0OjAsMzg1NzowLDM5MjA6MCwzOTc4OjAsMzk3OTowLDM5OTE6MiwzOTkyOjIsNDAyNjowLDQwMzc6MCw0MDM4OjAsNDA3MTowLDQwODI6MCw0MDgzOjAsNDA4NzowLDQwODg6MCw0MjE3OjIsNDQxNDowLDQ0MTU6MCw0NDE3OjAsNDQzNDowLDQ0Mzc6MCw0NDM4OjIsNDQzOToyLDQ0NjI6MCw0NDY3OjAsNDQ3MTowLDQ0NzQ6MCw0NTU5OjAsNDY0NzowLDQ4MjI6MCw0ODI2OjAsNDgzOTowLDUwMTg6MCw1MDQ4OjAsNTE2NzowLDUxNjg6MCw1MjIxOjAsNTIyMzowLDUyMzQ6MCw1MjM1OjAsNTI0MzowLDUyNDc6MCw1MjY2OjAsNTMxNjowLDUzMjA6MCw1MzIxOjAsNTMyNTowLDUzMzc6MCw1MzYxOjAsNTM2MjowLDUzNjc6MCw1MzgyOjAsNTM4MzowLDUzOTY6MCw1NDU2OjAsNTQ1NzowLDU0Njk6MCw1NDcyOjQsNTQ5MDowLDU1MTM6MCw1NTE0OjAsNTUyMzowLDU1NTk6MCw1NTg4OjEsNTU4OTozLDU1OTY6MCw1NjI3OjAsNTYyOTowLDU2NDE6MCw1NjQzOjAsNTY0NDowLDU2NDY6Miw1NjU0OjIsNTY1NToyLDU2NTk6MCw1NzAwOjAsNTgyNTowLDU4MzY6MCw1ODM3OjAsNTgzOTowLDU4NDI6MCw1ODQ0OjAsNTg1ODowLDU4Nzk6MCw1ODgwOjAsNTg4NzowLDU4OTA6MCw2MTI4OjEsNjEyOToxLDYxNDE6MSw2MjA0OjAsNjIxMDowLDYyMTE6MCw2MzA3OjAsNjMxMjowLDYzMTY6MCw2MzYyOjAsNjM5MToxLDY0MDU6MSw2NDA2OjAsNjQwNzoxLDY0MDg6MCw2NDA5OjEsNjQxMDowLDY0MTE6Miw2NDEyOjAsNjQxMzoyLDY0MTQ6MCw2NDE1OjAsNjQxNjoyLDY0MTc6MCw2NDE4OjIsNjQxOTowLDY0MjA6Miw2NDIxOjAsNjQyMjoyLDY0MjM6MCw2NDI0OjIsNjQyNTowLDY0MjY6Miw2NDI3OjAsNjQyODoyLDY0Mjk6MCw2NDMwOjIsNjQzMTowLDY0MzI6Miw2NDMzOjAsNjQzNDoyLDY0MzU6MCw2NDM2OjIsNjQzNzowLDY0Mzg6Miw2NDM5OjAsNjQ0MDowLDY0NDE6Miw2NDQyOjAsNjQ0MzoyLDY0NDQ6MCw2NDQ1OjIsNjQ0NjowLDY0NDc6Miw2NDQ4OjAsNjQ0OToyLDY0NTA6MCw2NDUxOjIsNjQ1MjowLDY0NTM6Miw2NDU0OjAsNjQ1NToyLDY0NTY6MCw2NDU3OjIsNjQ1ODowLDY0NTk6Miw2NDYwOjAsNjQ2MToyLDY0NjI6MCw2NDYzOjIsNjQ2NDowLDY0NjU6Miw2NDY2OjAsNjQ2NzoyLDY0Njg6MCw2NDY5OjIsNjQ3MDowLDY0NzE6Miw2NDcyOjAsNjQ3MzoyLDY0NzQ6MCw2NDc1OjIsNjQ3NjowLDY0Nzc6Miw2NDc4OjAsNjQ3OToyLDY0ODQ6Miw2NDg1OjAsNjQ4NjoyLDY0ODc6MCw2NDg4OjIsNjQ4OTowLDY0OTA6Miw2NDkxOjAsNjQ5MjoyLDY0OTM6MCw2NDk0OjEsNjQ5NTowLDY0OTY6MSw2NDk3OjAsNjQ5ODowLDY0OTk6MSw2NTAwOjAsNjUwMToyLDY1MDI6MCw2NTAzOjIsNjUwNDowLDY1MDU6Miw2NTA2OjAsNjUwNzoyLDY1MDg6MCw2NTA5OjAsNjUxMDoyLDY1MTU6MSw2NTE2OjAsNjUxODowLDY1MTk6Miw2NTIwOjAsNjUyMToyLDY1MjI6MCw2NTIzOjIsNjUyNDowLDY1MjU6Miw2NTI2OjAsNjUyNzoyLDY1Mjg6MCw2NTI5OjIsNjUzMDowLDY1MzE6Miw2NTMyOjAsNjUzMzoyLDY1MzQ6MCw2NTM1OjIsNjUzNjowLDY1Mzc6Miw2NTM4OjAsNjUzOToyLDY1NDA6MCw2NTQxOjIsNjU0MjowLDY1NDM6Miw2NTQ0OjAsNjU0NToxLDY1NDY6MCw2NTQ3OjEsNjU0ODowLDY1NDk6Miw2NTUwOjAsNjU1MToyLDY1NTI6MCw2NTUzOjIsNjU1NDowLDY1NTU6Miw2NTU2OjAsNjU1NzoxLDY1NTg6MCw2NTU5OjEsNjU2MDowLDY1NjE6MSw2NTYyOjAsNjU2MzoyLDY1NjQ6MCw2NTY1OjIsNjU2NjowLDY1Njc6MCw2NTY4OjIsNjU2OTowLDY1NzA6MSw2NTcxOjAsNjU3MjoyLDY1NzM6MCw2NTc0OjIsNjU3NTowLDY1NzY6Miw2NTc3OjAsNjU3ODoyLDY1ODI6Miw2NTgzOjAsNjU4NDoyLDY1ODU6MCw2NTg2OjIsNjU4NzowLDY1ODg6Miw2NTg5OjAsNjU5MDoyLDY1OTE6MCw2NTkyOjAsNjU5MzoyLDY1OTQ6MCw2NTk1OjIsNjU5NjowLDY1OTc6Miw2NTk4OjAsNjU5OToyLDY2MDA6MCw2NjAxOjIsNjYwMjowLDY2MDM6Miw2NjA1OjIsNjYwNjowLDY2MDc6Miw2NjA4OjAsNjYwOToyLDY2MTA6MCw2NjExOjAsNjYxMjoyLDY2MTM6MCw2NjE0OjIsNjYxNTowLDY2MTY6Miw2NjE3OjAsNjYxODoyLDY2MzM6Miw2NjQ2OjAsNjcwMzowLDY3ODQ6MCw2Nzg1OjEsNjc4NjowLDY3ODc6MSw2Nzg4OjAsNjc4OToxLDY3OTA6MCw2NzkxOjEsNjc5MjowLDY3OTM6MSw2Nzk0OjAsNjc5NToxLDY3OTY6MCw2Nzk3OjEsNjc5ODowLDY3OTk6MSw2ODAwOjAsNjgwMToxLDY4MDI6MCw2ODAzOjEsNjgwNDowLDY4MDU6MSw2ODA2OjAsNjgwNzoxLDY4MDg6MCw2ODA5OjEsNjgxMDowLDY4MTE6MSw2ODEyOjAsNjgxMzoxLDY4MTQ6MCw2ODE1OjEsNjgxNjowLDY4MTc6MSw2ODE4OjAsNjgxOToxLDY4MjA6MCw2ODIxOjEsNjgyMjowLDY4MjM6MSw2ODI0OjAsNjgyNToxLDY4MjY6MCw2ODI3OjEsNjgyODowLDY4Mjk6MSw2ODMwOjAsNjgzMToxLDY4MzI6MCw2ODMzOjEsNjgzNDowLDY4MzU6MSw2ODM2OjAsNjgzNzoxLDY4Mzg6MCw2ODM5OjEsNjg0MDowLDY4NDE6MSw2ODQyOjAsNjg0MzoxLDY4NDQ6MCw2ODQ1OjEsNjg0NjowLDY4NDc6MSw2ODQ4OjAsNjg0OToxLDY4NTA6MCw2ODUxOjEsNjg1MjowLDY4NTM6MSw2ODU0OjAsNjg1NToxLDY4NTY6MCw2ODU3OjEsNjg1ODowLDY4NTk6MSw2ODYwOjAsNjg2MToxLDY4NjI6MCw2ODYzOjEsNjg2NzowLDY4Njg6MSw2ODcwOjAsNjg3NTowLDY4NzY6MCw2ODc5OjAsNjg4MDoyLDY4ODQ6MCw2ODg1OjEsNjg4NjowLDY4ODc6MSw2OTE1OjAsNjkyMjowLDY5MjM6Miw2OTI0OjAsNjkyNToyLDY5NjI6MCw2OTg0OjAsNjk5MTowLDcxMjg6Miw3MTMxOjAsNzEzMjoyLDcxNDI6MCw3MjU3OjAsNzI1ODoyLDcyNTk6MCw3MjYwOjIsNzI2MTowLDcyNjI6Miw3MjYzOjAsNzI2NDoyLDcyNjU6MCw3MjY2OjIsNzI2NzowLDcyNjg6Miw3MjY5OjAsNzI3MDoyLDcyNzE6MCw3MjcyOjIsNzI3MzowLDcyNzQ6Miw3Mjc1OjAsNzI3NjoyLDcyNzc6MCw3Mjc4OjIsNzI3OTowLDcyODA6Miw3MjgxOjAsNzI4MjoyLDcyODM6MCw3Mjg0OjIsNzI4NTowLDcyODY6Miw3Mjg3OjAsNzI4ODoyLDcyODk6MCw3MjkwOjIsNzI5MTowLDcyOTI6Miw3MjkzOjAsNzI5NDoyLDcyOTU6MCw3Mjk2OjIsNzI5NzowLDcyOTg6Miw3Mjk5OjAsNzMwMDoyLDczMDE6MCw3MzAyOjIsNzMwMzowLDczMDQ6Miw3MzA1OjAsNzMwNjoyLDczMDc6MCw3MzA4OjIsNzMwOTowLDczMTA6Miw3MzExOjAsNzMxMjoyLDczMTM6MCw3MzE0OjIsNzMxNTowLDczMTY6Miw3MzE3OjAsNzMxODoyLDczMTk6MCw3MzIwOjIsNzMyMTowLDczMjI6Miw3MzIzOjAsNzMyNDoyLDczMjU6MCw3MzI2OjIsNzMyNzowLDczMjg6Miw3MzI5OjAsNzMzMDoyLDczMzE6MCw3MzMyOjIsNzMzMzowLDczMzQ6Miw3MzM1OjAsNzMzNjoyLDczMzc6MCw3MzM4OjIsNzMzOTowLDczNDA6Miw3MzQxOjAsNzM0MjoyLDczNDM6MCw3MzQ0OjIsNzM0NTowLDczNDY6Miw3MzQ3OjAsNzM0ODoyLDczNDk6MCw3MzUwOjIsNzM1MTowLDczNTI6Miw3MzUzOjAsNzM1NDoyLDczNTU6MCw3MzU2OjIsNzM1NzowLDczNTg6Miw3MzU5OjAsNzM2MDoyLDczNjE6MCw3MzYyOjIsNzM2MzowLDczNjQ6Miw3MzY1OjAsNzM2NjoyLDczNjc6MCw3MzY4OjIsNzM2OTowLDczNzA6Miw3ODc3OjAsNzg3ODowLDc4ODI6MCw3ODgzOjAsNzg4NzowLDc4OTk6MCw3OTkxOjAsNzk5MjowLDgwMzU6Miw4MDM2OjIsODA1ODowLDgwNTk6MCw4MDgyOjAsODA4MzowLDgwODg6MCw4MDkwOjAsODA5MToyLDgwOTI6MCw4MDkzOjIsODA5NTowLDgwOTY6Miw4MDk3OjAsODA5ODoyLDgwOTk6MCw4MTAwOjIsODEwMTowLDgxMDI6Miw4MTAzOjAsODEwNDoyLDgxMDU6MCw4MTA2OjIsODEwNzowLDgxMDg6Miw4MTA5OjAsODExMDoyLDgxMTE6MCw4MTEyOjIsODExMzowLDgxMTQ6Miw4MTE1OjAsODExNjoyLDgxMTc6MCw4MTE4OjIsODExOTowLDgxMjA6Miw4MTIxOjAsODEyMjoyLDgxMjM6MCw4MTI0OjIsODEyNTowLDgxMjY6Miw4MTI3OjAsODEyODoyLDgxMjk6MCw4MTMwOjIsODEzMTowLDgxMzI6Miw4MTMzOjAsODEzNDoyLDgxMzU6MCw4MTM2OjIsODEzNzowLDgxMzg6Miw4MTM5OjAsODE0MDoyLDgxNDE6MCw4MTQyOjIsODE0MzowLDgxNDQ6Miw4MTQ1OjAsODE0NjoyLDgxNDc6MCw4MTQ4OjIsODE0OTowLDgxNTA6Miw4MTUxOjAsODE1MjoyLDgxNTM6MCw4MTU0OjIsODE1NTowLDgxNTY6Miw4MTU3OjAsODE1ODoyLDgxNTk6MCw4MTYwOjIsODE2MTowLDgxNjI6Miw4MTYzOjAsODE2NDoyLDgxNjU6MCw4MTY2OjIsODE2NzowLDgxNjg6Miw4MTY5OjAsODE3MDoyLDgxNzE6MCw4MTcyOjIsODE3MzowLDgxNzc6Miw4MTc5OjAsODE4MDoyLDgxODE6MCw4MTgyOjIsODE4NDowLDgxODU6Miw4MTg3OjAsODE4OToyLDgxOTE6MCw4MTkzOjIsODE5NjowLDgxOTc6Miw4MTk4OjAsODIwMDoyLDgyMDE6MCw4MjAyOjIsODIwMzowLDgyMDQ6Miw4MjA1OjAsODIwNjoyLDgyMDc6MCw4MjA4OjIsODIwOTowLDgyMTA6Miw4MjEyOjAsODIxMzoyLDgyMTQ6MCw4MjE2OjIsODIxODowLDgyMjA6Miw4MjIyOjAsODIyNDoyLDgyMjU6MCw4MjI2OjIsODMxMTowLDgzMTI6MSw4MzEzOjAsODMxNDoxLDgzMTU6MCw4MzE2OjEsODMxNzowLDgzMTg6MSw4MzE5OjAsODMyMDoxLDgzMjE6MCw4MzIyOjEsODMyMzowLDgzMjQ6MSw4MzI1OjAsODMyNjoxLDgzMjc6MCw4MzI4OjEsODMyOTowLDgzMzA6MSw4MzMxOjAsODMzMjoxLDgzMzM6MCw4MzM0OjEsODMzNTowLDgzMzY6MSw4MzM3OjAsODMzODoxLDgzMzk6MCw4MzQwOjEsODM0MTowLDgzNDI6MSw4MzQzOjAsODM0NDoxLDgzNDU6MCw4MzQ2OjEsODM0NzowLDgzNDg6MSw4MzUyOjAsODM1MzowLDgzNzk6MCw4MzgwOjIsODM4MTowLDgzODI6Miw4MzgzOjAsODM4NDoyLDgzODU6MCw4Mzg3OjIsODM5MTowLDgzOTU6MCw4NDMzOjAsODQ0MTowLDg0NTU6MCw4NDU2OjAsODUzMToyLDg2ODI6MCw4Njg2OjAsODY4NzowLDg2OTI6MCw4NjkzOjAsODgyNjowLDg5MDM6MCw4OTUwOjAsODk1MTowLDkwMzk6MCw5MDQwOjAsOTE0MTowLDkxNDk6MCw5MTUwOjAsOTE5MTowLDkyMjE6MCw5MjIyOjAsOTI0OTowLDkyNTA6MCw5MjUyOjAsOTI1NDowLDkyNjU6MCw5Mjg0OjAsOTI4NTowLDkzNjc6MCwyMDQ5OTowLDIwNTM4OjAsMjA1Mzk6MCwyMDc5MDowLDIwNzkxOjAsMjEyOTE6MCwyMTI5MjowLDIxNTAwOjAsMjE4MTc6MCwyMTgxODowLDIyMDMyOjAsMjIwMzM6MCwyMjA5MTowLDIyMDkyOjAsMjIzMzI6MCwyMjM5MTowLDIyMzkyOjAsMjI3MDA6MCwyMjc3MDowLDIyNzgwOjAsMjI4MzI6MCwyMzA5MDowLDIzMDk1OjAsMjMyMzk6MCwyMzI0MDowLDIzNDMzOjAsMjM3MDA6MCwyNDA0NzowLDI0MDQ4OjAsMjQxMDA6MywyNDIwMDowLDI0MzA1OjAsMjQzMDY6MCwyNDM4MjoxMCwyNDM4MzowLDI0NTAwOjAsMjQ1NDc6MCwyNDU0ODowLDI0NTcxOjksMjQ2MDA6MCwyNWUzOjAsMjUyMzE6MCwyNTg4NDowLDI1OTMyOjAsMjYyMzc6MCwyNjMzMTowLDI2MzMyOjAsMjY0MzI6MCwyNjU5MTowLDI2NTkyOjAsMjY2MzI6MCwyNjY5MjowLDI3MTIwOjAsMjcyMDA6MCwyNzI5MTo2LDI3MjkyOjYsMjc0Mjk6MCwyNzQ5MjowLDI3NDkzOjAsMjc1MDA6MCwyNzcwMDowLDI4MjMyOjAsMjg2MDA6MCwyODk5MTowLDI4OTkyOjAsMjkxMDA6MCwyOTEwMTowLDI5MjIwOjAsMjkyMjE6MCwyOTMzMzowLDI5NjM1OjAsMjk2MzY6MCwyOTcwMTowLDI5NzM4OjAsMjk3Mzk6MCwyOTg0OTowLDI5ODUwOjAsMjk4NzE6OCwyOTg3Mjo3LDI5ODczOjAsMzAyMDA6NSwzMDMzOTowLDMwMzQwOjAsMzA1OTE6MCwzMDU5MjowLDMwNzkxOjAsMzA3OTI6MCwzMDgwMDowLDMxMDI4OjAsMzExMjE6MCwzMTE1NDowLDMxMTcwOjAsMzExNzE6MCwzMTM3MDowLDMxNTI4OjAsMzE1Mjk6MCwzMTYwMDowLDMxNzAwOjAsMzE4Mzg6MCwzMTgzOTowLDMxOTAwOjAsMzE5MDE6MCwzMjA2MTowLDMyMDYyOjAsMzIwOTg6MCwzMjA5OToyLDMyMTAwOjAsMzIxMDQ6MCwzMjE2MTowLDMyNzY2OjAsNTMwNDg6MCw1MzA0OTowLDU0MDkwOjAsNTQwOTE6MCw2NTA2MToyLDY1MDYyOjIsNjUxNjE6MCw2NTE2MzowLDEwMjA0MToyLDEwMjA2NDoxMSwxMDIwNjg6MTQsMTAyMDY5OjE1LDEwMjExODoyLDEwMjExOToxLDEwMjEyMDoyLDEwMjEyMToyLDEwMjIxNzoyLDEwMjIxODowLDEwMjIxOToyLDEwMjIyMDoyLDEwMjM3ODoxLDEwMjM3OToxLDEwMjM4MDowLDEwMjM4MToxLDEwMjU4OToyLDEwMjU5OToyLDEwMjYwMDoyLDEwMjYwNDoyLDEwMjY0NzowLDEwMjcwNDoyLDEwMjcwNToyLDEwMjcwNjowLDEwMjc2MToyLDEwMjc2MjowLDEwMjc2MzoyLDEwMjc2NDowLDEwMjc2NTowLDEwMjc2NjoyLDEwMjk2MjowLDEwMjk2MzowLDEwMjk3MDoxLDEwMjk3NDoyLDEwMjk5MzowLDEwMjk5NDowLDEwMjk5NToyLDEwMjk5NjoyLDEwMzAxNTowLDEwMzAxNjoyLDEwMzAxNzowLDEwMzAxODoyLDEwMzAyNTowLDEwMzAyNjowLDEwMzAyNzoyLDEwMzAyODoyLDEwMzAzNTowLDEwMzAzNjowLDEwMzAzNzoyLDEwMzAzODoyLDEwMzAzOTowLDEwMzA0MDowLDEwMzA0MToyLDEwMzA0MjoyLDEwMzA0MzowLDEwMzA0NDowLDEwMzA0NToyLDEwMzA0NjoyLDEwMzA0NzowLDEwMzA0ODowLDEwMzA0OToyLDEwMzA1MDoyLDEwMzA1MTowLDEwMzA1MjoyLDEwMzA1MzowLDEwMzA1NDoyLDEwMzA1NTowLDEwMzA1NjoyLDEwMzA1NzowLDEwMzA1ODowLDEwMzA1OToyLDEwMzA2MDoyLDEwMzA2MTowLDEwMzA2MjowLDEwMzA2MzoyLDEwMzA2NDoyLDEwMzA2OToyLDEwMzA3MDowLDEwMzA3MTowLDEwMzA3MjoyLDEwMzA3MzoyLDEwMzA4NjowLDEwMzA4NzowLDEwMzA4ODoyLDEwMzA4OToyLDEwMzA5NDoxLDEwMzA5NTowLDEwMzA5NjoyLDEwMzEwMzowLDEwMzEwNDoyLDEwMzEwNTowLDEwMzEwNjoyLDEwMzEyMTowLDEwMzEyMjoyLDEwMzEyMzowLDEwMzEyNDowLDEwMzEyNToxLDEwMzEyNjoxLDEwMzEyNzowLDEwMzEyODowLDEwMzEyOToyLDEwMzEzMDoyLDEwMzEzMTowLDEwMzEzMjowLDEwMzEzMzoyLDEwMzEzNDoyLDEwMzEzNTowLDEwMzEzNjowLDEwMzEzNzoxLDEwMzEzODoxLDEwMzEzOTowLDEwMzE0MDoyLDEwMzE0MTowLDEwMzE0MjoyLDEwMzE0MzowLDEwMzE0NDoyLDEwMzE0NTowLDEwMzE0NjoxLDEwMzE0NzowLDEwMzE0ODowLDEwMzE0OToyLDEwMzE1MDoyLDEwMzE1MTowLDEwMzE1MjoyLDEwMzE3MjowLDEwMzE3MzoyLDEwMzE3NDowLDEwMzE3NTowLDEwMzE3NjoyLDEwMzE3NzoyLDEwMzE3ODowLDEwMzE3OTowLDEwMzE4MDoyLDEwMzE4MToyLDEwMzE4MjowLDEwMzE4MzowLDEwMzE4NDoyLDEwMzE4NToyLDEwMzIyODowLDEwMzIyOTowLDEwMzIzMDoyLDEwMzIzMToyLDEwMzI1MDowLDEwMzI1MToyLDEwMzI1MjowLDEwMzI1MzoyLDEwMzI2MDowLDEwMzI2MTowLDEwMzI2MjoyLDEwMzI2MzoyLDEwMzI3MDowLDEwMzI3MTowLDEwMzI3MjoyLDEwMzI3MzoyLDEwMzI3NDowLDEwMzI3NTowLDEwMzI3NjoyLDEwMzI3NzoyLDEwMzI3ODowLDEwMzI3OTowLDEwMzI4MDoyLDEwMzI4MToyLDEwMzI4MjowLDEwMzI4MzowLDEwMzI4NDoyLDEwMzI4NToyLDEwMzI4NjowLDEwMzI4NzoyLDEwMzI4ODowLDEwMzI4OToyLDEwMzI5MDowLDEwMzI5MToyLDEwMzI5MjowLDEwMzI5MzowLDEwMzI5NDoyLDEwMzI5NToyLDEwMzI5NjowLDEwMzI5NzowLDEwMzI5ODoyLDEwMzI5OToyLDEwMzM3NjoyLDEwMzM3NzowLDEwMzM3ODowLDEwMzM3OToyLDEwMzM4MDoyLDEwMzM5MzowLDEwMzM5NDowLDEwMzM5NToyLDEwMzM5NjoyLDEwMzQ3MjowLDEwMzQ3MzoxLDEwMzQ3NDowLDEwMzQ3NToyLDEwMzQ4MjowLDEwMzQ4MzoyLDEwMzQ4NDowLDEwMzQ4NToyLDEwMzUwMDowLDEwMzUwMToyLDEwMzUwMjowLDEwMzUwMzowLDEwMzUwNDoxLDEwMzUwNToxLDEwMzUwNjowLDEwMzUwNzowLDEwMzUwODoyLDEwMzUwOToyLDEwMzUxMDowLDEwMzUxMTowLDEwMzUxMjoyLDEwMzUxMzoyLDEwMzUxNDowLDEwMzUxNToyLDEwMzUxNjowLDEwMzUxNzoyLDEwMzUxODowLDEwMzUxOToyLDEwMzUyMDowLDEwMzUyMToxLDEwMzUyMjowLDEwMzUyMzowLDEwMzUyNDoyLDEwMzUyNToyLDEwMzUyNjowLDEwMzUyNzoyLDEwMzU2MToyLDEwMzU2MjoyLDEwMzU2MzowLDEwMzU2NDowLDEwMzU2NToyLDEwMzU2NjoyLDEwMzU2NzowLDEwMzU2ODowLDEwMzU2OToyLDEwMzU3MDoyLDEwMzU4NDowLDEwMzU4NToyLDEwMzU4NjowLDEwMzU4NzoyLDEwMzU4ODoxLDEwMzU4OTowLDEwMzU5MDoyLDEwMzU5MToxLDEwMzU5MjowLDEwMzU5MzoyLDEwMzU5NDoxLDEwMzY5NToyfTtmb3IobyRpPTJlMztvJGk8PTIwNDU7byRpKyspciRnW28kaV09MDtmb3IobyRpPTIwNTY7byRpPD0yMDY1O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0yMDY3O28kaTw9MjEzNTtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MjEzNztvJGk8PTIxNTQ7byRpKyspciRnW28kaV09MDtmb3IobyRpPTIxNjE7byRpPD0yMTcwO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0yMTcyO28kaTw9MjE5MztvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MjE5NTtvJGk8PTIxOTg7byRpKyspciRnW28kaV09MDtmb3IobyRpPTIyMDA7byRpPD0yMjAzO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0yMjA1O28kaTw9MjIxNztvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MjIyMjtvJGk8PTIyMjQ7byRpKyspciRnW28kaV09MTtmb3IobyRpPTIyMjU7byRpPD0yMjUwO28kaSsrKXIkZ1tvJGldPTI7Zm9yKG8kaT0yMjUxO28kaTw9MjI1MztvJGkrKylyJGdbbyRpXT0xO2ZvcihvJGk9MjI1NztvJGk8PTIyNjQ7byRpKyspciRnW28kaV09Mjtmb3IobyRpPTIyNzQ7byRpPD0yMjc5O28kaSsrKXIkZ1tvJGldPTI7Zm9yKG8kaT0yMjgwO28kaTw9MjI4MjtvJGkrKylyJGdbbyRpXT0xO2ZvcihvJGk9MjI4MztvJGk8PTIyODk7byRpKyspciRnW28kaV09Mjtmb3IobyRpPTIyOTA7byRpPD0yMjkyO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0yMzA4O28kaTw9MjMxMztvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MjMxNTtvJGk8PTI0OTE7byRpKyspciRnW28kaV09MDtmb3IobyRpPTI0OTQ7byRpPD0yODY2O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0yODY3O28kaTw9Mjg2OTtvJGkrKylyJGdbbyRpXT0xO2ZvcihvJGk9Mjg3MDtvJGk8PTI4ODg7byRpKyspciRnW28kaV09Mjtmb3IobyRpPTI4OTE7byRpPD0yODk1O28kaSsrKXIkZ1tvJGldPTI7Zm9yKG8kaT0yODk2O28kaTw9Mjg5ODtvJGkrKylyJGdbbyRpXT0xO2ZvcihvJGk9MjkwMjtvJGk8PTI5MDg7byRpKyspciRnW28kaV09Mjtmb3IobyRpPTI5MTU7byRpPD0yOTIwO28kaSsrKXIkZ1tvJGldPTI7Zm9yKG8kaT0yOTIxO28kaTw9MjkyMztvJGkrKylyJGdbbyRpXT0xO2ZvcihvJGk9MjkyNDtvJGk8PTI5MzA7byRpKyspciRnW28kaV09Mjtmb3IobyRpPTI5MzE7byRpPD0yOTYyO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0yOTY0O28kaTw9Mjk2ODtvJGkrKylyJGdbbyRpXT0yO2ZvcihvJGk9Mjk2OTtvJGk8PTI5NzM7byRpKyspciRnW28kaV09MDtmb3IobyRpPTI5NzU7byRpPD0yOTkxO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0yOTk1O28kaTw9MzA1MTtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MzA1NDtvJGk8PTMwNzk7byRpKyspciRnW28kaV09MDtmb3IobyRpPTMwODE7byRpPD0zMDg4O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0zMDkyO28kaTw9MzEwMTtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MzEwNjtvJGk8PTMxMzg7byRpKyspciRnW28kaV09MDtmb3IobyRpPTMxNDY7byRpPD0zMTUxO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0zMTUzO28kaTw9MzE2NjtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MzE2ODtvJGk8PTMxNzI7byRpKyspciRnW28kaV09MDtmb3IobyRpPTMxNzQ7byRpPD0zMjAzO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0zMjk0O28kaTw9MzM1ODtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MzM2NztvJGk8PTM0MDM7byRpKyspciRnW28kaV09MDtmb3IobyRpPTM0MDg7byRpPD0zNDE2O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0zNDE3O28kaTw9MzQzODtvJGkrKylyJGdbbyRpXT0yO2ZvcihvJGk9MzQ0MTtvJGk8PTM0NDY7byRpKyspciRnW28kaV09Mjtmb3IobyRpPTM0NDc7byRpPD0zNDUwO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0zNDUxO28kaTw9MzQ1OTtvJGkrKylyJGdbbyRpXT0yO2ZvcihvJGk9MzQ2MDtvJGk8PTM0Nzg7byRpKyspciRnW28kaV09MDtmb3IobyRpPTM1NTQ7byRpPD0zNTU5O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0zNTYwO28kaTw9MzU3MDtvJGkrKylyJGdbbyRpXT0yO2ZvcihvJGk9MzU3MTtvJGk8PTM1ODE7byRpKyspciRnW28kaV09MDtmb3IobyRpPTM1OTQ7byRpPD0zNTk3O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0zNjAxO28kaTw9MzYwNDtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MzYzNztvJGk8PTM2Mzk7byRpKyspciRnW28kaV09MDtmb3IobyRpPTM2NjU7byRpPD0zNjY3O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0zNjkzO28kaTw9MzY5NTtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MzcwMTtvJGk8PTM3Mjc7byRpKyspciRnW28kaV09MDtmb3IobyRpPTM3Mjg7byRpPD0zNzM5O28kaSsrKXIkZ1tvJGldPTI7Zm9yKG8kaT0zNzQwO28kaTw9Mzc1MTtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9Mzc1MztvJGk8PTM3NjA7byRpKyspciRnW28kaV09Mjtmb3IobyRpPTM3NjE7byRpPD0zNzczO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0zNzc1O28kaTw9Mzc3NztvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9Mzc3OTtvJGk8PTM3ODE7byRpKyspciRnW28kaV09MDtmb3IobyRpPTM3ODM7byRpPD0zNzg1O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0zNzg4O28kaTw9Mzc5MTtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9Mzc5NztvJGk8PTM4MDI7byRpKyspciRnW28kaV09MDtmb3IobyRpPTM4MTQ7byRpPD0zODE2O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0zODI1O28kaTw9MzgyOTtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MzgzMjtvJGk8PTM4NDE7byRpKyspciRnW28kaV09MDtmb3IobyRpPTM4NDQ7byRpPD0zODUyO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0zODczO28kaTw9Mzg4NTtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9Mzg5MDtvJGk8PTM4OTM7byRpKyspciRnW28kaV09MDtmb3IobyRpPTM5MDc7byRpPD0zOTEyO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0zOTQyO28kaTw9Mzk1MDtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9Mzk2ODtvJGk8PTM5NzA7byRpKyspciRnW28kaV09MDtmb3IobyRpPTM5NzM7byRpPD0zOTc2O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0zOTg2O28kaTw9Mzk4OTtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9Mzk5NDtvJGk8PTM5OTc7byRpKyspciRnW28kaV09MDtmb3IobyRpPTQwNDg7byRpPD00MDUxO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT00MDU2O28kaTw9NDA2MztvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9NDA5MztvJGk8PTQwOTY7byRpKyspciRnW28kaV09MDtmb3IobyRpPTQzOTA7byRpPD00Mzk4O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT00Mzk5O28kaTw9NDQxMztvJGkrKylyJGdbbyRpXT0yO2ZvcihvJGk9NDQxODtvJGk8PTQ0MzM7byRpKyspciRnW28kaV09Mjtmb3IobyRpPTQ0NTU7byRpPD00NDU3O28kaSsrKXIkZ1tvJGldPTI7Zm9yKG8kaT00NDg0O28kaTw9NDQ4OTtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9NDQ5MTtvJGk8PTQ1NTQ7byRpKyspciRnW28kaV09MDtmb3IobyRpPTQ1Njg7byRpPD00NTg5O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT00NjUyO28kaTw9NDY1NjtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9NDc2NjtvJGk8PTQ4MDA7byRpKyspciRnW28kaV09MDtmb3IobyRpPTUwMTQ7byRpPD01MDE2O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT01MDY5O28kaTw9NTA3MjtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9NTEwNTtvJGk8PTUxMzA7byRpKyspciRnW28kaV09MDtmb3IobyRpPTUxNzM7byRpPD01MTg4O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT01MjUzO28kaTw9NTI1OTtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9NTI2OTtvJGk8PTUyNzU7byRpKyspciRnW28kaV09MDtmb3IobyRpPTUyOTI7byRpPD01MzExO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT01MzI5O28kaTw9NTMzMTtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9NTM0MztvJGk8PTUzNDk7byRpKyspciRnW28kaV09MDtmb3IobyRpPTUzNTU7byRpPD01MzU3O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT01Mzg3O28kaTw9NTM4OTtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9NTQ1OTtvJGk8PTU0NjM7byRpKyspciRnW28kaV09MDtmb3IobyRpPTU0Nzk7byRpPD01NDgyO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT01NTE4O28kaTw9NTUyMDtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9NTUzMDtvJGk8PTU1Mzk7byRpKyspciRnW28kaV09MDtmb3IobyRpPTU1NTA7byRpPD01NTUyO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT01NTYyO28kaTw9NTU4MztvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9NTYyMztvJGk8PTU2MjU7byRpKyspciRnW28kaV09Mjtmb3IobyRpPTU2MzE7byRpPD01NjM5O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT01NjQ5O28kaTw9NTY1MztvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9NTY2MztvJGk8PTU2ODA7byRpKyspciRnW28kaV09MDtmb3IobyRpPTU2ODI7byRpPD01Njg1O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT01ODc1O28kaTw9NTg3NztvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9NTg5NjtvJGk8PTU4OTk7byRpKyspciRnW28kaV09MDtmb3IobyRpPTU5MjE7byRpPD01OTQwO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT02MDUwO28kaTw9NjEyNTtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9NjI0NDtvJGk8PTYyNzU7byRpKyspciRnW28kaV09MDtmb3IobyRpPTYzMjg7byRpPD02MzQ4O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT02MzUwO28kaTw9NjM1NjtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9NjM2NjtvJGk8PTYzNzI7byRpKyspciRnW28kaV09MDtmb3IobyRpPTYzODE7byRpPD02Mzg3O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT02MzkzO28kaTw9NjQwNDtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9NjQ4MDtvJGk8PTY0ODM7byRpKyspciRnW28kaV09MDtmb3IobyRpPTY1MTE7byRpPD02NTE0O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT02NTc5O28kaTw9NjU4MTtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9NjYxOTtvJGk8PTY2MjQ7byRpKyspciRnW28kaV09MDtmb3IobyRpPTY2MjU7byRpPD02NjI3O28kaSsrKXIkZ1tvJGldPTI7Zm9yKG8kaT02NjI4O28kaTw9NjYzMjtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9NjYzNDtvJGk8PTY2Mzc7byRpKyspciRnW28kaV09MDtmb3IobyRpPTY2Njk7byRpPD02NjkyO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT02NzA3O28kaTw9NjcwOTtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9NjcyMDtvJGk8PTY3MjM7byRpKyspciRnW28kaV09MDtmb3IobyRpPTY3MzI7byRpPD02NzM4O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT02OTMxO28kaTw9NjkzMztvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9Njk1NjtvJGk8PTY5NTk7byRpKyspciRnW28kaV09MDtmb3IobyRpPTcwMDU7byRpPD03MDA3O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT03MDU3O28kaTw9NzA3MDtvJGkrKylyJGdbbyRpXT0yO2ZvcihvJGk9NzA3NDtvJGk8PTcwODI7byRpKyspciRnW28kaV09MDtmb3IobyRpPTcxMDk7byRpPD03MTE4O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT03MTE5O28kaTw9NzEyNztvJGkrKylyJGdbbyRpXT0xO2ZvcihvJGk9NzM3NDtvJGk8PTczNzY7byRpKyspciRnW28kaV09MDtmb3IobyRpPTc1Mjg7byRpPD03NTg2O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT03NTg3O28kaTw9NzY0NTtvJGkrKylyJGdbbyRpXT0yO2ZvcihvJGk9NzY5MjtvJGk8PTc2OTY7byRpKyspciRnW28kaV09MDtmb3IobyRpPTc3NTU7byRpPD03Nzg3O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT03NzkxO28kaTw9Nzc5NTtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9Nzc5OTtvJGk8PTc4MDE7byRpKyspciRnW28kaV09MDtmb3IobyRpPTc4MDM7byRpPD03ODA1O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT03ODI1O28kaTw9NzgzMTtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9Nzg0NTtvJGk8PTc4NTk7byRpKyspciRnW28kaV09MDtmb3IobyRpPTgwMTM7byRpPD04MDMyO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT04MDY1O28kaTw9ODA2ODtvJGkrKylyJGdbbyRpXT0xO2ZvcihvJGk9ODUxODtvJGk8PTg1Mjk7byRpKyspciRnW28kaV09Mjtmb3IobyRpPTg1MzM7byRpPD04NTM2O28kaSsrKXIkZ1tvJGldPTI7Zm9yKG8kaT04NTM4O28kaTw9ODU0MDtvJGkrKylyJGdbbyRpXT0yO2ZvcihvJGk9ODY3NztvJGk8PTg2Nzk7byRpKyspciRnW28kaV09MDtmb3IobyRpPTg4MzY7byRpPD04ODQwO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT04ODU3O28kaTw9ODg1OTtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9ODkwODtvJGk8PTg5MTA7byRpKyspciRnW28kaV09MDtmb3IobyRpPTkxNTQ7byRpPD05MTU5O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT05MjA1O28kaTw9OTIxODtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9OTI3MTtvJGk8PTkyNzM7byRpKyspciRnW28kaV09MDtmb3IobyRpPTkyOTU7byRpPD05Mjk3O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0yMDAwMjtvJGk8PTIwMDMyO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0yMDA2MjtvJGk8PTIwMDkyO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0yMDEzNTtvJGk8PTIwMTM4O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0yMDI0ODtvJGk8PTIwMjU4O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0yMDM0ODtvJGk8PTIwMzU4O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0yMDQzNjtvJGk8PTIwNDQwO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0yMDgyMjtvJGk8PTIwODI0O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0yMDkzNDtvJGk8PTIwOTM2O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0yMTAzNTtvJGk8PTIxMDM3O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0yMTA5NTtvJGk8PTIxMDk3O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0yMTE0ODtvJGk8PTIxMTUwO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0yMTQxMztvJGk8PTIxNDIzO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0yMTQ1MztvJGk8PTIxNDYzO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0yMTQ3MztvJGk8PTIxNDgzO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0yMTc4MDtvJGk8PTIxNzgyO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0yMTg5MTtvJGk8PTIxODk0O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0yMTg5NjtvJGk8PTIxODk5O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0yMjE3MTtvJGk8PTIyMTc3O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0yMjE4MTtvJGk8PTIyMTg3O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0yMjE5MTtvJGk8PTIyMTk3O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0yMjIzNDtvJGk8PTIyMjM2O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0yMjUyMTtvJGk8PTIyNTI1O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0yMjk5MTtvJGk8PTIyOTk0O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0yMzAyODtvJGk8PTIzMDM4O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0yMzgzMDtvJGk8PTIzODUzO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0yMzg2NjtvJGk8PTIzODcyO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0yMzg3NztvJGk8PTIzODg0O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0yMzg4NjtvJGk8PTIzODk0O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0yMzk0NjtvJGk8PTIzOTQ4O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0yNDMxMTtvJGk8PTI0MzEzO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0yNDM0MjtvJGk8PTI0MzQ3O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0yNDM3MDtvJGk8PTI0Mzc0O28kaSsrKXIkZ1tvJGldPTEwO2ZvcihvJGk9MjQzNzU7byRpPD0yNDM4MTtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MjQ3MTg7byRpPD0yNDcyMTtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MjQ4MTc7byRpPD0yNDgyMTtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MjQ4Nzc7byRpPD0yNDg4MjtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MjQ4OTE7byRpPD0yNDg5MztvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MjUzOTE7byRpPD0yNTM5NTtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MjU4Mjg7byRpPD0yNTgzODtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MjYxOTE7byRpPD0yNjE5NTtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MjYzOTE7byRpPD0yNjM5MztvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MjY3MDE7byRpPD0yNjcyMjtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MjY3Mjk7byRpPD0yNjc5OTtvJGkrKylyJGdbbyRpXT0yO2ZvcihvJGk9MjY4MDE7byRpPD0yNjgwMztvJGkrKylyJGdbbyRpXT0yO2ZvcihvJGk9MjY4MTE7byRpPD0yNjgxMztvJGkrKylyJGdbbyRpXT0yO2ZvcihvJGk9MjY4NDc7byRpPD0yNjg3MDtvJGkrKylyJGdbbyRpXT0yO2ZvcihvJGk9MjY4OTE7byRpPD0yNjg5OTtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MjY5MDE7byRpPD0yNjkyMztvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MjY5Mjk7byRpPD0yNjk0NjtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MjY5NDg7byRpPD0yNjk5ODtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MjcwMzc7byRpPD0yNzA0MDtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MjcyMDU7byRpPD0yNzIzMjtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MjcyNTg7byRpPD0yNzI2MDtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MjczOTE7byRpPD0yNzM5ODtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9Mjc1NjE7byRpPD0yNzU2NDtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9Mjc1NzE7byRpPD0yNzU3NDtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9Mjc1ODE7byRpPD0yNzU4NDtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9Mjc1OTE7byRpPD0yNzU5NDtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MjgxOTE7byRpPD0yODE5MztvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MjgzNDg7byRpPD0yODM1ODtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9Mjg0MDI7byRpPD0yODQzMjtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9Mjg0NjI7byRpPD0yODQ5MjtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MjkxMTg7byRpPD0yOTEyMjtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MjkxNjg7byRpPD0yOTE3MjtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MjkxNzc7byRpPD0yOTE4NTtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MjkxODc7byRpPD0yOTE5NTtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9Mjk5MDA7byRpPD0yOTkwMztvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MzAxNjE7byRpPD0zMDE3OTtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MzA0OTE7byRpPD0zMDQ5NDtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MzA3Mjk7byRpPD0zMDczMjtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MzEyNTE7byRpPD0zMTI1OTtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MzEyNjU7byRpPD0zMTI2ODtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MzEyNzU7byRpPD0zMTI3OTtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MzEyODE7byRpPD0zMTI5NztvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MzE0NjE7byRpPD0zMTQ2OTtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MzE0OTE7byRpPD0zMTQ5NTtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MzE5MTc7byRpPD0zMTkyMjtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MzE5NjU7byRpPD0zMmUzO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0zMjAwMTtvJGk8PTMyMDAzO28kaSsrKXIkZ1tvJGldPTI7Zm9yKG8kaT0zMjAwNTtvJGk8PTMyMDMxO28kaSsrKXIkZ1tvJGldPTI7Zm9yKG8kaT0zMjAzMztvJGk8PTMyMDYwO28kaSsrKXIkZ1tvJGldPTI7Zm9yKG8kaT0zMjA2NDtvJGk8PTMyMDY3O28kaSsrKXIkZ1tvJGldPTI7Zm9yKG8kaT0zMjA3NDtvJGk8PTMyMDc3O28kaSsrKXIkZ1tvJGldPTI7Zm9yKG8kaT0zMjA4MTtvJGk8PTMyMDg2O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0zMjEwNztvJGk8PTMyMTMwO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0zMjEzMztvJGk8PTMyMTU4O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0zMjE2NDtvJGk8PTMyMTY3O28kaSsrKXIkZ1tvJGldPTI7Zm9yKG8kaT0zMjE4MDtvJGk8PTMyMTk5O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0zMjIwMTtvJGk8PTMyMjYwO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0zMjMwMTtvJGk8PTMyMzYwO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0zMjYwMTtvJGk8PTMyNjYyO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0zMjY2NDtvJGk8PTMyNjY3O28kaSsrKXIkZ1tvJGldPTI7Zm9yKG8kaT0zMjcwMTtvJGk8PTMyNzYxO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT01MzAwMTtvJGk8PTUzMDA0O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT01MzAwODtvJGk8PTUzMDE5O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT01MzAyMTtvJGk8PTUzMDMyO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT01MzAzNDtvJGk8PTUzMDM3O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT01MzA0MjtvJGk8PTUzMDQ2O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT01MzA3NDtvJGk8PTUzMDgwO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT01NDAwMTtvJGk8PTU0MDA0O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT01NDAwODtvJGk8PTU0MDE5O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT01NDAyMTtvJGk8PTU0MDMyO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT01NDAzNDtvJGk8PTU0MDM3O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT01NDA0MjtvJGk8PTU0MDQ2O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT01NDA0ODtvJGk8PTU0MDUzO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT01NDA3NDtvJGk8PTU0MDgwO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT01NDA5ODtvJGk8PTU0MTAxO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0xMDIwMDE7byRpPD0xMDIwNDA7byRpKyspciRnW28kaV09MDtmb3IobyRpPTEwMjA0MjtvJGk8PTEwMjA2MztvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MTAyMDY1O28kaTw9MTAyMDY3O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0xMDIwNzA7byRpPD0xMDIxMTc7byRpKyspciRnW28kaV09MDtmb3IobyRpPTEwMjEyMjtvJGk8PTEwMjIxNjtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MTAyMjIxO28kaTw9MTAyMzc3O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0xMDIzODI7byRpPD0xMDIzODg7byRpKyspciRnW28kaV09MDtmb3IobyRpPTEwMjM4OTtvJGk8PTEwMjM5ODtvJGkrKylyJGdbbyRpXT0yO2ZvcihvJGk9MTAyMzk5O28kaTw9MTAyNDQ0O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0xMDI0NDU7byRpPD0xMDI0NDc7byRpKyspciRnW28kaV09Mjtmb3IobyRpPTEwMjQ0ODtvJGk8PTEwMjQ1ODtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MTAyNDU5O28kaTw9MTAyNDY4O28kaSsrKXIkZ1tvJGldPTI7Zm9yKG8kaT0xMDI0Njk7byRpPD0xMDI0OTk7byRpKyspciRnW28kaV09MDtmb3IobyRpPTEwMjUwMDtvJGk8PTEwMjUxOTtvJGkrKylyJGdbbyRpXT0xO2ZvcihvJGk9MTAyNTIwO28kaTw9MTAyNTI0O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0xMDI1MjU7byRpPD0xMDI1Mjk7byRpKyspciRnW28kaV09Mjtmb3IobyRpPTEwMjUzMDtvJGk8PTEwMjU4ODtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MTAyNTkwO28kaTw9MTAyNTk4O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0xMDI2MDE7byRpPD0xMDI2MDM7byRpKyspciRnW28kaV09MDtmb3IobyRpPTEwMjYwNTtvJGk8PTEwMjYyODtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MTAyNjI5O28kaTw9MTAyNjQ2O28kaSsrKXIkZ1tvJGldPTI7Zm9yKG8kaT0xMDI2NDg7byRpPD0xMDI3MDA7byRpKyspciRnW28kaV09Mjtmb3IobyRpPTEwMjcwMTtvJGk8PTEwMjcwMztvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MTAyNzA3O28kaTw9MTAyNzMwO28kaSsrKXIkZ1tvJGldPTI7Zm9yKG8kaT0xMDI3MzM7byRpPD0xMDI3NTg7byRpKyspciRnW28kaV09Mjtmb3IobyRpPTEwMjc2NztvJGk8PTEwMjkwMDtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MTAyOTY1O28kaTw9MTAyOTY5O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0xMDI5NzE7byRpPD0xMDI5NzM7byRpKyspciRnW28kaV09MDtmb3IobyRpPTEwMjk3NTtvJGk8PTEwMjk4OTtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MTAyOTkwO28kaTw9MTAyOTkyO28kaSsrKXIkZ1tvJGldPTE7Zm9yKG8kaT0xMDI5OTc7byRpPD0xMDMwMDI7byRpKyspciRnW28kaV09MDtmb3IobyRpPTEwMzAwMztvJGk8PTEwMzAwODtvJGkrKylyJGdbbyRpXT0yO2ZvcihvJGk9MTAzMDA5O28kaTw9MTAzMDExO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0xMDMwMTI7byRpPD0xMDMwMTQ7byRpKyspciRnW28kaV09Mjtmb3IobyRpPTEwMzAxOTtvJGk8PTEwMzAyMTtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MTAzMDIyO28kaTw9MTAzMDI0O28kaSsrKXIkZ1tvJGldPTI7Zm9yKG8kaT0xMDMwMjk7byRpPD0xMDMwMzE7byRpKyspciRnW28kaV09MDtmb3IobyRpPTEwMzAzMjtvJGk8PTEwMzAzNDtvJGkrKylyJGdbbyRpXT0yO2ZvcihvJGk9MTAzMDY1O28kaTw9MTAzMDY4O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0xMDMwNzQ7byRpPD0xMDMwNzY7byRpKyspciRnW28kaV09MDtmb3IobyRpPTEwMzA3NztvJGk8PTEwMzA3OTtvJGkrKylyJGdbbyRpXT0xO2ZvcihvJGk9MTAzMDgwO28kaTw9MTAzMDgyO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0xMDMwODM7byRpPD0xMDMwODU7byRpKyspciRnW28kaV09Mjtmb3IobyRpPTEwMzA5MDtvJGk8PTEwMzA5MztvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MTAzMDk3O28kaTw9MTAzMDk5O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0xMDMxMDA7byRpPD0xMDMxMDI7byRpKyspciRnW28kaV09Mjtmb3IobyRpPTEwMzEwNztvJGk8PTEwMzEwOTtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MTAzMTEwO28kaTw9MTAzMTEyO28kaSsrKXIkZ1tvJGldPTI7Zm9yKG8kaT0xMDMxMTM7byRpPD0xMDMxMTY7byRpKyspciRnW28kaV09MDtmb3IobyRpPTEwMzExNztvJGk8PTEwMzEyMDtvJGkrKylyJGdbbyRpXT0yO2ZvcihvJGk9MTAzMTUzO28kaTw9MTAzMTU3O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0xMDMxNTg7byRpPD0xMDMxNjI7byRpKyspciRnW28kaV09Mjtmb3IobyRpPTEwMzE2MztvJGk8PTEwMzE2NTtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MTAzMTY2O28kaTw9MTAzMTY4O28kaSsrKXIkZ1tvJGldPTE7Zm9yKG8kaT0xMDMxNjk7byRpPD0xMDMxNzE7byRpKyspciRnW28kaV09Mjtmb3IobyRpPTEwMzE4NjtvJGk8PTEwMzE4ODtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MTAzMTg5O28kaTw9MTAzMTkxO28kaSsrKXIkZ1tvJGldPTI7Zm9yKG8kaT0xMDMxOTI7byRpPD0xMDMxOTU7byRpKyspciRnW28kaV09MDtmb3IobyRpPTEwMzE5NjtvJGk8PTEwMzE5OTtvJGkrKylyJGdbbyRpXT0yO2ZvcihvJGk9MTAzMjAwO28kaTw9MTAzMjI0O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0xMDMyMjU7byRpPD0xMDMyMjc7byRpKyspciRnW28kaV09MTtmb3IobyRpPTEwMzIzMjtvJGk8PTEwMzIzNztvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MTAzMjM4O28kaTw9MTAzMjQzO28kaSsrKXIkZ1tvJGldPTI7Zm9yKG8kaT0xMDMyNDQ7byRpPD0xMDMyNDY7byRpKyspciRnW28kaV09MDtmb3IobyRpPTEwMzI0NztvJGk8PTEwMzI0OTtvJGkrKylyJGdbbyRpXT0yO2ZvcihvJGk9MTAzMjU0O28kaTw9MTAzMjU2O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0xMDMyNTc7byRpPD0xMDMyNTk7byRpKyspciRnW28kaV09Mjtmb3IobyRpPTEwMzI2NDtvJGk8PTEwMzI2NjtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MTAzMjY3O28kaTw9MTAzMjY5O28kaSsrKXIkZ1tvJGldPTI7Zm9yKG8kaT0xMDMzMDA7byRpPD0xMDMzNzU7byRpKyspciRnW28kaV09MDtmb3IobyRpPTEwMzM4MTtvJGk8PTEwMzM4MztvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MTAzMzg0O28kaTw9MTAzMzg2O28kaSsrKXIkZ1tvJGldPTE7Zm9yKG8kaT0xMDMzODc7byRpPD0xMDMzODk7byRpKyspciRnW28kaV09MDtmb3IobyRpPTEwMzM5MDtvJGk8PTEwMzM5MjtvJGkrKylyJGdbbyRpXT0yO2ZvcihvJGk9MTAzMzk3O28kaTw9MTAzMzk5O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0xMDM0MDA7byRpPD0xMDM0NzE7byRpKyspciRnW28kaV09Mjtmb3IobyRpPTEwMzQ3NjtvJGk8PTEwMzQ3ODtvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MTAzNDc5O28kaTw9MTAzNDgxO28kaSsrKXIkZ1tvJGldPTI7Zm9yKG8kaT0xMDM0ODY7byRpPD0xMDM0ODg7byRpKyspciRnW28kaV09MDtmb3IobyRpPTEwMzQ4OTtvJGk8PTEwMzQ5MTtvJGkrKylyJGdbbyRpXT0yO2ZvcihvJGk9MTAzNDkyO28kaTw9MTAzNDk1O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0xMDM0OTY7byRpPD0xMDM0OTk7byRpKyspciRnW28kaV09Mjtmb3IobyRpPTEwMzUyODtvJGk8PTEwMzU0MztvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MTAzNTQ0O28kaTw9MTAzNTQ4O28kaSsrKXIkZ1tvJGldPTI7Zm9yKG8kaT0xMDM1NDk7byRpPD0xMDM1NTE7byRpKyspciRnW28kaV09MDtmb3IobyRpPTEwMzU1MjtvJGk8PTEwMzU1NDtvJGkrKylyJGdbbyRpXT0xO2ZvcihvJGk9MTAzNTU1O28kaTw9MTAzNTU3O28kaSsrKXIkZ1tvJGldPTI7Zm9yKG8kaT0xMDM1NTg7byRpPD0xMDM1NjA7byRpKyspciRnW28kaV09MDtmb3IobyRpPTEwMzU3MTtvJGk8PTEwMzU3MztvJGkrKylyJGdbbyRpXT0wO2ZvcihvJGk9MTAzNTc0O28kaTw9MTAzNTc2O28kaSsrKXIkZ1tvJGldPTI7Zm9yKG8kaT0xMDM1Nzc7byRpPD0xMDM1ODA7byRpKyspciRnW28kaV09MDtmb3IobyRpPTEwMzU4MTtvJGk8PTEwMzU4MztvJGkrKylyJGdbbyRpXT0yO2ZvcihvJGk9MTAzNTk1O28kaTw9MTAzNjk0O28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0xMDM2OTY7byRpPD0xMDM2OTk7byRpKyspciRnW28kaV09MDtmb3IobyRpPTEwMzcwMDtvJGk8PTEwMzc5MztvJGkrKylyJGdbbyRpXT0yO2ZvcihvJGk9MTAzNzk0O28kaTw9MTAzODcyO28kaSsrKXIkZ1tvJGldPTA7Zm9yKG8kaT0xMDM5MDA7byRpPD0xMDM5NzE7byRpKyspciRnW28kaV09MjtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmNvbnN0IGEkQT17MTAyMTEzOiEwLDEwMjEwMDohMCwzODU3OiEwLDM3ODU6ITB9LF8kMT17MTAyMTEzOiEwLDEwMjEwMDohMCwzODU3OiEwLDM3ODU6ITAsNDMyNjohMH0sdCRxPSdQUk9KQ1NbXCJXR1NfMTk4NF9XZWJfTWVyY2F0b3JfQXV4aWxpYXJ5X1NwaGVyZVwiLEdFT0dDU1tcIkdDU19XR1NfMTk4NFwiLERBVFVNW1wiRF9XR1NfMTk4NFwiLFNQSEVST0lEW1wiV0dTXzE5ODRcIiw2Mzc4MTM3LjAsMjk4LjI1NzIyMzU2M11dLFBSSU1FTVtcIkdyZWVud2ljaFwiLDAuMF0sVU5JVFtcIkRlZ3JlZVwiLDAuMDE3NDUzMjkyNTE5OTQzM11dLFBST0pFQ1RJT05bXCJNZXJjYXRvcl9BdXhpbGlhcnlfU3BoZXJlXCJdLFBBUkFNRVRFUltcIkZhbHNlX0Vhc3RpbmdcIiwwLjBdLFBBUkFNRVRFUltcIkZhbHNlX05vcnRoaW5nXCIsMC4wXSxQQVJBTUVURVJbXCJDZW50cmFsX01lcmlkaWFuXCIse0NlbnRyYWxfTWVyaWRpYW59XSxQQVJBTUVURVJbXCJTdGFuZGFyZF9QYXJhbGxlbF8xXCIsMC4wXSxQQVJBTUVURVJbXCJBdXhpbGlhcnlfU3BoZXJlX1R5cGVcIiwwLjBdLFVOSVRbXCJNZXRlclwiLDEuMF1dJyxsJEM9Wy0yMDAzNzUwOC4zNDI3ODg5MDUsMjAwMzc1MDguMzQyNzg4OTA1XSxNJDU9Wy0yMDAzNzUwOC4zNDI3ODcsMjAwMzc1MDguMzQyNzg3XSxFPXsxMDIxMTM6e3drVGVtcGxhdGU6J1BST0pDU1tcIldHU18xOTg0X1dlYl9NZXJjYXRvclwiLEdFT0dDU1tcIkdDU19XR1NfMTk4NF9NYWpvcl9BdXhpbGlhcnlfU3BoZXJlXCIsREFUVU1bXCJEX1dHU18xOTg0X01ham9yX0F1eGlsaWFyeV9TcGhlcmVcIixTUEhFUk9JRFtcIldHU18xOTg0X01ham9yX0F1eGlsaWFyeV9TcGhlcmVcIiw2Mzc4MTM3LjAsMC4wXV0sUFJJTUVNW1wiR3JlZW53aWNoXCIsMC4wXSxVTklUW1wiRGVncmVlXCIsMC4wMTc0NTMyOTI1MTk5NDMzXV0sUFJPSkVDVElPTltcIk1lcmNhdG9yXCJdLFBBUkFNRVRFUltcIkZhbHNlX0Vhc3RpbmdcIiwwLjBdLFBBUkFNRVRFUltcIkZhbHNlX05vcnRoaW5nXCIsMC4wXSxQQVJBTUVURVJbXCJDZW50cmFsX01lcmlkaWFuXCIse0NlbnRyYWxfTWVyaWRpYW59XSxQQVJBTUVURVJbXCJTdGFuZGFyZF9QYXJhbGxlbF8xXCIsMC4wXSxVTklUW1wiTWV0ZXJcIiwxLjBdXScsdmFsaWQ6bCRDLG9yaWdpbjpNJDUsZHg6MWUtNX0sMTAyMTAwOnt3a1RlbXBsYXRlOnQkcSx2YWxpZDpsJEMsb3JpZ2luOk0kNSxkeDoxZS01fSwzNzg1Ont3a1RlbXBsYXRlOidQUk9KQ1NbXCJXR1NfMTk4NF9XZWJfTWVyY2F0b3JcIixHRU9HQ1NbXCJHQ1NfV0dTXzE5ODRfTWFqb3JfQXV4aWxpYXJ5X1NwaGVyZVwiLERBVFVNW1wiRF9XR1NfMTk4NF9NYWpvcl9BdXhpbGlhcnlfU3BoZXJlXCIsU1BIRVJPSURbXCJXR1NfMTk4NF9NYWpvcl9BdXhpbGlhcnlfU3BoZXJlXCIsNjM3ODEzNy4wLDAuMF1dLFBSSU1FTVtcIkdyZWVud2ljaFwiLDAuMF0sVU5JVFtcIkRlZ3JlZVwiLDAuMDE3NDUzMjkyNTE5OTQzM11dLFBST0pFQ1RJT05bXCJNZXJjYXRvclwiXSxQQVJBTUVURVJbXCJGYWxzZV9FYXN0aW5nXCIsMC4wXSxQQVJBTUVURVJbXCJGYWxzZV9Ob3J0aGluZ1wiLDAuMF0sUEFSQU1FVEVSW1wiQ2VudHJhbF9NZXJpZGlhblwiLHtDZW50cmFsX01lcmlkaWFufV0sUEFSQU1FVEVSW1wiU3RhbmRhcmRfUGFyYWxsZWxfMVwiLDAuMF0sVU5JVFtcIk1ldGVyXCIsMS4wXV0nLHZhbGlkOmwkQyxvcmlnaW46TSQ1LGR4OjFlLTV9LDM4NTc6e3drVGVtcGxhdGU6dCRxLHZhbGlkOmwkQyxvcmlnaW46TSQ1LGR4OjFlLTV9LDQzMjY6e3drVGVtcGxhdGU6J0dFT0dDU1tcIkdDU19XR1NfMTk4NFwiLERBVFVNW1wiRF9XR1NfMTk4NFwiLFNQSEVST0lEW1wiV0dTXzE5ODRcIiw2Mzc4MTM3LjAsMjk4LjI1NzIyMzU2M11dLFBSSU1FTVtcIkdyZWVud2ljaFwiLHtDZW50cmFsX01lcmlkaWFufV0sVU5JVFtcIkRlZ3JlZVwiLDAuMDE3NDUzMjkyNTE5OTQzM11dJyxhbHRUZW1wbGF0ZTonUFJPSkNTW1wiV0dTXzE5ODRfUGxhdGVfQ2FycmVlXCIsR0VPR0NTW1wiR0NTX1dHU18xOTg0XCIsREFUVU1bXCJEX1dHU18xOTg0XCIsU1BIRVJPSURbXCJXR1NfMTk4NFwiLDYzNzgxMzcuMCwyOTguMjU3MjIzNTYzXV0sUFJJTUVNW1wiR3JlZW53aWNoXCIsMC4wXSxVTklUW1wiRGVncmVlXCIsMC4wMTc0NTMyOTI1MTk5NDMzXV0sUFJPSkVDVElPTltcIlBsYXRlX0NhcnJlZVwiXSxQQVJBTUVURVJbXCJGYWxzZV9FYXN0aW5nXCIsMC4wXSxQQVJBTUVURVJbXCJGYWxzZV9Ob3J0aGluZ1wiLDAuMF0sUEFSQU1FVEVSW1wiQ2VudHJhbF9NZXJpZGlhblwiLHtDZW50cmFsX01lcmlkaWFufV0sVU5JVFtcIkRlZ3JlZXNcIiwxMTEzMTkuNDkxXV0nLHZhbGlkOlstMTgwLDE4MF0sb3JpZ2luOlstMTgwLDkwXSxkeDoxZS01fSwxMDQ5NzE6e3drVGVtcGxhdGU6J0dFT0dDU1tcIk1hcnNfMjAwMF8oU3BoZXJlKVwiLERBVFVNW1wiTWFyc18yMDAwXyhTcGhlcmUpXCIsU1BIRVJPSURbXCJNYXJzXzIwMDBfKFNwaGVyZSlcIiwzMzk2MTkwLjAsMC4wXV0sUFJJTUVNW1wiUmVmZXJlbmNlX01lcmlkaWFuXCIsMC4wXSxVTklUW1wiRGVncmVlXCIsMC4wMTc0NTMyOTI1MTk5NDMzXV0nLHZhbGlkOlstMTgwLDE4MF0sb3JpZ2luOlstMTgwLDkwXSxkeDoxZS01fSwxMDQ5MDU6e3drVGVtcGxhdGU6J0dFT0dDU1tcIkdDU19NYXJzXzIwMDBcIixEQVRVTVtcIkRfTWFyc18yMDAwXCIsU1BIRVJPSURbXCJNYXJzXzIwMDBfSUFVX0lBR1wiLDMzOTYxOTAuMCwxNjkuODk0NDQ3MjIzNjExOF1dLFBSSU1FTVtcIlJlZmVyZW5jZV9NZXJpZGlhblwiLDAuMF0sVU5JVFtcIkRlZ3JlZVwiLDAuMDE3NDUzMjkyNTE5OTQzM11dJyx2YWxpZDpbLTE4MCwxODBdLG9yaWdpbjpbLTE4MCw5MF0sZHg6MWUtNX19O2Z1bmN0aW9uIGQkdChlLGkpe3JldHVybiAhdCRNKGUpJiYhdCRNKGkpJiYoZT09PWl8fChudWxsIT1lLndraWR8fG51bGwhPWkud2tpZD9lLndraWQ9PT1pLndraWR8fHUkeChlKSYmdSR4KGkpfHxudWxsIT1pLmxhdGVzdFdraWQmJmUud2tpZD09PWkubGF0ZXN0V2tpZHx8bnVsbCE9ZS5sYXRlc3RXa2lkJiZpLndraWQ9PT1lLmxhdGVzdFdraWQ6ISghZS53a3R8fCFpLndrdCkmJmUud2t0LnRvVXBwZXJDYXNlKCk9PT1pLndrdC50b1VwcGVyQ2FzZSgpKSl9ZnVuY3Rpb24gUyQ4KGUpe3JldHVybiBzJG8oZSkmJmUud2tpZD9FW2Uud2tpZF06bnVsbH1mdW5jdGlvbiBSJDYoZSl7cmV0dXJuICEhcyRvKGUpJiYoZS53a2lkP251bGw9PXIkZ1tlLndraWRdOiEhZS53a3QmJiEhL15cXHMqR0VPR0NTL2kudGVzdChlLndrdCkpfWZ1bmN0aW9uIG8kaChlKXtyZXR1cm4gIShrJDUoZSl8fFAkMyhlKSl9ZnVuY3Rpb24gQSQ0KGUpe3JldHVybiBzJG8oZSkmJjQzMjY9PT1lLndraWR9ZnVuY3Rpb24gdSR4KGUpe3JldHVybiBzJG8oZSkmJm51bGwhPWUud2tpZCYmITA9PT1hJEFbZS53a2lkXX1mdW5jdGlvbiBHJDMoZSl7cmV0dXJuIDEwNDk3MT09PWV8fDEwNDkwNT09PWV9ZnVuY3Rpb24gayQ1KGUpe3JldHVybiBzJG8oZSkmJm51bGwhPWUud2tpZCYmRyQzKGUud2tpZCl9ZnVuY3Rpb24gdyQ2KGUpe3JldHVybiAxMDQ5MDM9PT1lfWZ1bmN0aW9uIFAkMyhlKXtyZXR1cm4gcyRvKGUpJiZudWxsIT1lLndraWQmJnckNihlLndraWQpfWZ1bmN0aW9uIEMkNChlKXtyZXR1cm4gcyRvKGUpJiZudWxsIT1lLndraWQmJiEwPT09XyQxW2Uud2tpZF19ZnVuY3Rpb24gcyRvKHIpe3JldHVybiByJEEocikmJihudWxsIT1yLndraWQmJnIud2tpZD49MmUzfHxudWxsIT1yLndrdCl9Y29uc3QgSSQxPXt3a2lkOjQzMjYsd2t0OnIkeihFWzQzMjZdLndrVGVtcGxhdGUse0NlbnRyYWxfTWVyaWRpYW46XCIwLjBcIn0pfSxjJFA9e3draWQ6MTAyMTAwLGxhdGVzdFdraWQ6Mzg1N307XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG52YXIgeSRnO2xldCBTJDc9eSRnPWNsYXNzIGV4dGVuZHMgYSRCe2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMubGF0ZXN0V2tpZD1udWxsLHRoaXMud2tpZD1udWxsLHRoaXMud2t0PW51bGwsdGhpcy52Y3NXa2lkPW51bGwsdGhpcy5sYXRlc3RWY3NXa2lkPW51bGwsdGhpcy5pbWFnZUNvb3JkaW5hdGVTeXN0ZW09bnVsbDt9c3RhdGljIGZyb21KU09OKGUpe2lmKCFlKXJldHVybiBudWxsO2lmKGUud2tpZCl7aWYoMTAyMTAwPT09ZS53a2lkKXJldHVybiB5JGcuV2ViTWVyY2F0b3I7aWYoNDMyNj09PWUud2tpZClyZXR1cm4geSRnLldHUzg0fWNvbnN0IHQ9bmV3IHkkZztyZXR1cm4gdC5yZWFkKGUpLHR9bm9ybWFsaXplQ3RvckFyZ3MoZSl7aWYoZSYmXCJvYmplY3RcIj09dHlwZW9mIGUpcmV0dXJuIGU7cmV0dXJuIHtbXCJzdHJpbmdcIj09dHlwZW9mIGU/XCJ3a3RcIjpcIndraWRcIl06ZX19Z2V0IGlzV0dTODQoKXtyZXR1cm4gQSQ0KHRoaXMpfWdldCBpc1dlYk1lcmNhdG9yKCl7cmV0dXJuIHUkeCh0aGlzKX1nZXQgaXNHZW9ncmFwaGljKCl7cmV0dXJuIFIkNih0aGlzKX1nZXQgaXNXcmFwcGFibGUoKXtyZXR1cm4gQyQ0KHRoaXMpfXdyaXRlV2t0KGUsdCl7dGhpcy53a2lkfHwodC53a3Q9ZSk7fWNsb25lKCl7aWYodGhpcz09PXkkZy5XR1M4NClyZXR1cm4geSRnLldHUzg0O2lmKHRoaXM9PT15JGcuV2ViTWVyY2F0b3IpcmV0dXJuIHkkZy5XZWJNZXJjYXRvcjtjb25zdCBlPW5ldyB5JGc7cmV0dXJuIG51bGwhPXRoaXMud2tpZD8oZS53a2lkPXRoaXMud2tpZCxudWxsIT10aGlzLmxhdGVzdFdraWQmJihlLmxhdGVzdFdraWQ9dGhpcy5sYXRlc3RXa2lkKSxudWxsIT10aGlzLnZjc1draWQmJihlLnZjc1draWQ9dGhpcy52Y3NXa2lkKSxudWxsIT10aGlzLmxhdGVzdFZjc1draWQmJihlLmxhdGVzdFZjc1draWQ9dGhpcy5sYXRlc3RWY3NXa2lkKSk6bnVsbCE9dGhpcy53a3QmJihlLndrdD10aGlzLndrdCksdGhpcy5pbWFnZUNvb3JkaW5hdGVTeXN0ZW0mJihlLmltYWdlQ29vcmRpbmF0ZVN5c3RlbT15JHYodGhpcy5pbWFnZUNvb3JkaW5hdGVTeXN0ZW0pKSxlfWVxdWFscyhlKXtpZihudWxsPT1lKXJldHVybiAhMTtpZih0aGlzLmltYWdlQ29vcmRpbmF0ZVN5c3RlbXx8ZS5pbWFnZUNvb3JkaW5hdGVTeXN0ZW0pe2lmKG51bGw9PXRoaXMuaW1hZ2VDb29yZGluYXRlU3lzdGVtfHxudWxsPT1lLmltYWdlQ29vcmRpbmF0ZVN5c3RlbSlyZXR1cm4gITE7Y29uc3R7aWQ6dCxyZWZlcmVuY2VTZXJ2aWNlTmFtZTpyfT1lLmltYWdlQ29vcmRpbmF0ZVN5c3RlbSx7Z2VvZGF0YVhmb3JtOml9PWUuaW1hZ2VDb29yZGluYXRlU3lzdGVtLG89dGhpcy5pbWFnZUNvb3JkaW5hdGVTeXN0ZW07cmV0dXJuIG51bGw9PXR8fGk/SlNPTi5zdHJpbmdpZnkobyk9PT1KU09OLnN0cmluZ2lmeShlLmltYWdlQ29vcmRpbmF0ZVN5c3RlbSk6cj9vLmlkPT09dCYmby5yZWZlcmVuY2VTZXJ2aWNlTmFtZT09PXI6by5pZD09PXR9cmV0dXJuIGQkdCh0aGlzLGUpfXRvSlNPTihlKXtyZXR1cm4gdGhpcy53cml0ZSh2b2lkIDAsZSl9fTtTJDcuR0NTX05BRF8xOTI3PW51bGwsUyQ3LldHUzg0PW51bGwsUyQ3LldlYk1lcmNhdG9yPW51bGwsZSR1KFt5JHIoe3JlYWRPbmx5OiEwfSldLFMkNy5wcm90b3R5cGUsXCJpc1dHUzg0XCIsbnVsbCksZSR1KFt5JHIoe3JlYWRPbmx5OiEwfSldLFMkNy5wcm90b3R5cGUsXCJpc1dlYk1lcmNhdG9yXCIsbnVsbCksZSR1KFt5JHIoe3JlYWRPbmx5OiEwfSldLFMkNy5wcm90b3R5cGUsXCJpc0dlb2dyYXBoaWNcIixudWxsKSxlJHUoW3kkcih7cmVhZE9ubHk6ITB9KV0sUyQ3LnByb3RvdHlwZSxcImlzV3JhcHBhYmxlXCIsbnVsbCksZSR1KFt5JHIoe3R5cGU6TiQ1LGpzb246e3dyaXRlOiEwfX0pXSxTJDcucHJvdG90eXBlLFwibGF0ZXN0V2tpZFwiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6TiQ1LGpzb246e3dyaXRlOiEwLG9yaWdpbnM6e1wid2ViLXNjZW5lXCI6e3dyaXRlOntvdmVycmlkZVBvbGljeSgpe3JldHVybiB7aXNSZXF1aXJlZDpudWxsPT09dGhpcy53a3R9fX19fX19KV0sUyQ3LnByb3RvdHlwZSxcIndraWRcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOlN0cmluZyxqc29uOntvcmlnaW5zOntcIndlYi1zY2VuZVwiOnt3cml0ZTp7b3ZlcnJpZGVQb2xpY3koKXtyZXR1cm4ge2lzUmVxdWlyZWQ6bnVsbD09PXRoaXMud2tpZH19fX19fX0pXSxTJDcucHJvdG90eXBlLFwid2t0XCIsdm9pZCAwKSxlJHUoW28kdihcIndrdFwiKSxvJHYoXCJ3ZWItc2NlbmVcIixcIndrdFwiKV0sUyQ3LnByb3RvdHlwZSxcIndyaXRlV2t0XCIsbnVsbCksZSR1KFt5JHIoe3R5cGU6TiQ1LGpzb246e3dyaXRlOiEwfX0pXSxTJDcucHJvdG90eXBlLFwidmNzV2tpZFwiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6TiQ1LGpzb246e3dyaXRlOiEwfX0pXSxTJDcucHJvdG90eXBlLFwibGF0ZXN0VmNzV2tpZFwiLHZvaWQgMCksZSR1KFt5JHIoKV0sUyQ3LnByb3RvdHlwZSxcImltYWdlQ29vcmRpbmF0ZVN5c3RlbVwiLHZvaWQgMCksUyQ3PXkkZz1lJHUoW2kkWChcImVzcmkuZ2VvbWV0cnkuU3BhdGlhbFJlZmVyZW5jZVwiKV0sUyQ3KSxTJDcucHJvdG90eXBlLnRvSlNPTi5pc0RlZmF1bHRUb0pTT049ITAsUyQ3LkdDU19OQURfMTkyNz1uZXcgUyQ3KHt3a2lkOjQyNjcsd2t0OidHRU9HQ1NbXCJHQ1NfTm9ydGhfQW1lcmljYW5fMTkyN1wiLERBVFVNW1wiRF9Ob3J0aF9BbWVyaWNhbl8xOTI3XCIsU1BIRVJPSURbXCJDbGFya2VfMTg2NlwiLDYzNzgyMDYuNCwyOTQuOTc4Njk4Ml1dLFBSSU1FTVtcIkdyZWVud2ljaFwiLDAuMF0sVU5JVFtcIkRlZ3JlZVwiLDAuMDE3NDUzMjkyNTE5OTQzM11dJ30pLFMkNy5XR1M4ND1uZXcgUyQ3KEkkMSksUyQ3LldlYk1lcmNhdG9yPW5ldyBTJDcoYyRQKSxPYmplY3QuZnJlZXplJiYoT2JqZWN0LmZyZWV6ZShTJDcuR0NTX05BRF8xOTI3KSxPYmplY3QuZnJlZXplKFMkNy5XR1M4NCksT2JqZWN0LmZyZWV6ZShTJDcuV2ViTWVyY2F0b3IpKTt2YXIgayQ0PVMkNztcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmxldCBwJFM9Y2xhc3MgZXh0ZW5kcyBhJEJ7Y29uc3RydWN0b3IoLi4uZSl7c3VwZXIoLi4uZSksdGhpcy50eXBlPW51bGwsdGhpcy5oYXNNPSExLHRoaXMuaGFzWj0hMSx0aGlzLnNwYXRpYWxSZWZlcmVuY2U9ayQ0LldHUzg0O31nZXQgY2FjaGUoKXtyZXR1cm4gdGhpcy5jb21taXRQcm9wZXJ0eShcInNwYXRpYWxSZWZlcmVuY2VcIikse319Z2V0IGV4dGVudCgpe3JldHVybiBudWxsfXJlYWRTcGF0aWFsUmVmZXJlbmNlKGUscil7aWYoZSBpbnN0YW5jZW9mIGskNClyZXR1cm4gZTtpZihudWxsIT1lKXtjb25zdCB0PW5ldyBrJDQ7cmV0dXJuIHQucmVhZChlLHIpLHR9cmV0dXJuIGV9Y2xvbmUoKXtyZXR1cm4gY29uc29sZS53YXJuKFwiLmNsb25lKCkgaXMgbm90IGltcGxlbWVudGVkIGZvciBcIit0aGlzLmRlY2xhcmVkQ2xhc3MpLG51bGx9Y2xlYXJDYWNoZSgpe3RoaXMubm90aWZ5Q2hhbmdlKFwiY2FjaGVcIik7fWdldENhY2hlVmFsdWUoZSl7cmV0dXJuIHRoaXMuY2FjaGVbZV19c2V0Q2FjaGVWYWx1ZShlLHIpe3RoaXMuY2FjaGVbZV09cjt9fTtlJHUoW3kkcigpXSxwJFMucHJvdG90eXBlLFwidHlwZVwiLHZvaWQgMCksZSR1KFt5JHIoe3JlYWRPbmx5OiEwfSldLHAkUy5wcm90b3R5cGUsXCJjYWNoZVwiLG51bGwpLGUkdShbeSRyKHtyZWFkT25seTohMH0pXSxwJFMucHJvdG90eXBlLFwiZXh0ZW50XCIsbnVsbCksZSR1KFt5JHIoe3R5cGU6Qm9vbGVhbixqc29uOnt3cml0ZTp7b3ZlcnJpZGVQb2xpY3k6ZT0+KHtlbmFibGVkOmV9KX19fSldLHAkUy5wcm90b3R5cGUsXCJoYXNNXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpCb29sZWFuLGpzb246e3dyaXRlOntvdmVycmlkZVBvbGljeTplPT4oe2VuYWJsZWQ6ZX0pfX19KV0scCRTLnByb3RvdHlwZSxcImhhc1pcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOmskNCxqc29uOnt3cml0ZTohMH19KV0scCRTLnByb3RvdHlwZSxcInNwYXRpYWxSZWZlcmVuY2VcIix2b2lkIDApLGUkdShbZSRDKFwic3BhdGlhbFJlZmVyZW5jZVwiKV0scCRTLnByb3RvdHlwZSxcInJlYWRTcGF0aWFsUmVmZXJlbmNlXCIsbnVsbCkscCRTPWUkdShbaSRYKFwiZXNyaS5nZW9tZXRyeS5HZW9tZXRyeVwiKV0scCRTKTt2YXIgYyRPPXAkUztcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmZ1bmN0aW9uIG4keShuLHUscix0KXtyZXR1cm4gbi54PW4ueCt1LG4ueT1uLnkrcixudWxsIT10JiZudWxsIT1uLnomJihuLno9bi56K3QpLG59XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5mdW5jdGlvbiB0JHAodCxuKXtjb25zdCBzPXQueC1uLngscj10Lnktbi55LGE9dC5oYXNaJiZuLmhhc1o/dC56LW4uejowO3JldHVybiBNYXRoLnNxcnQocypzK3IqcithKmEpfVxuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuY2xhc3MgaSRMe2NvbnN0cnVjdG9yKGkscyx0LGUpe3RoaXMuc2VtaU1ham9yQXhpcz1pLHRoaXMuZmxhdHRlbmluZz1zLHRoaXMub3V0ZXJBdG1vc3BoZXJlUmltV2lkdGg9dDtjb25zdCBoPTEtdGhpcy5mbGF0dGVuaW5nO3RoaXMuc2VtaU1pbm9yQXhpcz10aGlzLnNlbWlNYWpvckF4aXMqaCx0aGlzLmhhbGZTZW1pTWFqb3JBeGlzPXRoaXMuc2VtaU1ham9yQXhpcy8yLHRoaXMuaGFsZkNpcmN1bWZlcmVuY2U9TWF0aC5QSSp0aGlzLnNlbWlNYWpvckF4aXMsdGhpcy5tZXRlcnNQZXJEZWdyZWU9dGhpcy5oYWxmQ2lyY3VtZmVyZW5jZS8xODAsdGhpcy5pbnZlcnNlRmxhdHRlbmluZz0xLygxLXRoaXMuZmxhdHRlbmluZyktMSx0aGlzLmVjY2VudHJpY2l0eVNxdWFyZWQ9ZXx8Mip0aGlzLmZsYXR0ZW5pbmctdGhpcy5mbGF0dGVuaW5nKnRoaXMuZmxhdHRlbmluZyx0aGlzLm1lYW5SYWRpdXNTZW1pQXhlcz0oMip0aGlzLnNlbWlNYWpvckF4aXMrdGhpcy5zZW1pTWlub3JBeGlzKS8zO31nZXQgcmFkaXVzKCl7cmV0dXJuIHRoaXMuc2VtaU1ham9yQXhpc319Y29uc3QgcyRuPW5ldyBpJEwoNjM3ODEzNywxLzI5OC4yNTcyMjM1NjMsM2U1LC4wMDY2OTQzNzk5OTAxMzc3OTkpLHQkbz1uZXcgaSRMKDMzOTYxOTAsMS8xNjkuODk0NDQ3MjIzNjExOCwyM2U0KSxlJGo9bmV3IGkkTCgxNzM3NDAwLDAsMCk7XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5jb25zdCBhJHo9NTcuMjk1Nzc5NTEzMDgyMzIsbyRnPS4wMTc0NTMyOTI1MTk5NDM7ZnVuY3Rpb24gdSR3KG4pe3JldHVybiBuKmEken1mdW5jdGlvbiBsJEIobil7cmV0dXJuIG4qbyRnfWZ1bmN0aW9uIGYkayhuKXtyZXR1cm4gbnVsbCE9bi53a2lkfHxudWxsIT1uLndrdH1jb25zdCBoJG89WzAsMF07ZnVuY3Rpb24gbSRyKG4sdCxlLGkscil7Y29uc3Qgcz1uLGE9cjtpZihhLnNwYXRpYWxSZWZlcmVuY2U9ZSxcInhcImluIHMmJlwieFwiaW4gYSlbYS54LGEueV09dChzLngscy55LGgkbyxpKTtlbHNlIGlmKFwieG1pblwiaW4gcyYmXCJ4bWluXCJpbiBhKVthLnhtaW4sYS55bWluXT10KHMueG1pbixzLnltaW4saCRvLGkpLFthLnhtYXgsYS55bWF4XT10KHMueG1heCxzLnltYXgsaCRvLGkpO2Vsc2UgaWYoXCJwYXRoc1wiaW4gcyYmXCJwYXRoc1wiaW4gYXx8XCJyaW5nc1wiaW4gcyYmXCJyaW5nc1wiaW4gYSl7Y29uc3Qgbj1cInBhdGhzXCJpbiBzP3MucGF0aHM6cy5yaW5ncyxlPVtdO2xldCByO2ZvcihsZXQgcz0wO3M8bi5sZW5ndGg7cysrKXtjb25zdCBhPW5bc107cj1bXSxlLnB1c2gocik7Zm9yKGxldCBuPTA7bjxhLmxlbmd0aDtuKyspci5wdXNoKHQoYVtuXVswXSxhW25dWzFdLFswLDBdLGkpKSxhW25dLmxlbmd0aD4yJiZyW25dLnB1c2goYVtuXVsyXSksYVtuXS5sZW5ndGg+MyYmcltuXS5wdXNoKGFbbl1bM10pO31cInBhdGhzXCJpbiBhP2EucGF0aHM9ZTphLnJpbmdzPWU7fWVsc2UgaWYoXCJwb2ludHNcImluIHMmJlwicG9pbnRzXCJpbiBhKXtjb25zdCBuPXMucG9pbnRzLGU9W107Zm9yKGxldCByPTA7cjxuLmxlbmd0aDtyKyspZVtyXT10KG5bcl1bMF0sbltyXVsxXSxbMCwwXSxpKSxuW3JdLmxlbmd0aD4yJiZlW3JdLnB1c2gobltyXVsyXSksbltyXS5sZW5ndGg+MyYmZVtyXS5wdXNoKG5bcl1bM10pO2EucG9pbnRzPWU7fXJldHVybiByfWZ1bmN0aW9uIHgkOShuLHIpe2NvbnN0IHM9biYmKGYkayhuKT9uOm4uc3BhdGlhbFJlZmVyZW5jZSksYT1yJiYoZiRrKHIpP3I6ci5zcGF0aWFsUmVmZXJlbmNlKTtyZXR1cm4gIShuJiZcInR5cGVcImluIG4mJlwibWVzaFwiPT09bi50eXBlfHxyJiZcInR5cGVcImluIHImJlwibWVzaFwiPT09ci50eXBlfHwhc3x8IWEpJiYoISFkJHQoYSxzKXx8KHUkeChhKSYmQSQ0KHMpfHx1JHgocykmJkEkNChhKSkpfWZ1bmN0aW9uIGckOShzLGEpe2NvbnN0IG89cyYmcy5zcGF0aWFsUmVmZXJlbmNlLHU9YSYmKGYkayhhKT9hOmEuc3BhdGlhbFJlZmVyZW5jZSk7cmV0dXJuIHgkOShvLHUpP2QkdChvLHUpP3kkdihzKTp1JHgodSk/bSRyKHMsTSQ0LGskNC5XZWJNZXJjYXRvciwhMSx5JHYocykpOkEkNCh1KT9tJHIocyx5JGYsayQ0LldHUzg0LCExLHkkdihzKSk6bnVsbDpudWxsfWZ1bmN0aW9uIE0kNChuLHQsZT1bMCwwXSl7dD44OS45OTk5OT90PTg5Ljk5OTk5OnQ8LTg5Ljk5OTk5JiYodD0tODkuOTk5OTkpO2NvbnN0IGk9bCRCKHQpO3JldHVybiBlWzBdPWwkQihuKSpzJG4ucmFkaXVzLGVbMV09cyRuLmhhbGZTZW1pTWFqb3JBeGlzKk1hdGgubG9nKCgxK01hdGguc2luKGkpKS8oMS1NYXRoLnNpbihpKSkpLGV9ZnVuY3Rpb24geSRmKG4sdCxlPVswLDBdLGk9ITEpe2NvbnN0IHI9dSR3KG4vcyRuLnJhZGl1cyk7cmV0dXJuIGVbMF09aT9yOnItMzYwKk1hdGguZmxvb3IoKHIrMTgwKS8zNjApLGVbMV09dSR3KE1hdGguUEkvMi0yKk1hdGguYXRhbihNYXRoLmV4cCgtMSp0L3Mkbi5yYWRpdXMpKSksZX1mdW5jdGlvbiBkJHModCxlPSExLGk9eSR2KHQpKXtyZXR1cm4gbSRyKHQsTSQ0LGskNC5XZWJNZXJjYXRvcixlLGkpfWZ1bmN0aW9uIFIkNSh0LGU9ITEsaT15JHYodCkpe3JldHVybiBtJHIodCx5JGYsayQ0LldHUzg0LGUsaSl9XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG52YXIgeSRlO2NvbnN0IGYkaj1bMCwwXTtmdW5jdGlvbiBnJDgoZSl7cmV0dXJuIGUmJihcImVzcmkuZ2VvbWV0cnkuU3BhdGlhbFJlZmVyZW5jZVwiPT09ZS5kZWNsYXJlZENsYXNzfHxudWxsIT1lLndraWQpfWNvbnN0IHgkOD1uJFQuZ2V0TG9nZ2VyKFwiZXNyaS5nZW9tZXRyeS5Qb2ludFwiKTtsZXQgdyQ1PXkkZT1jbGFzcyBleHRlbmRzIGMkT3tjb25zdHJ1Y3RvciguLi5lKXtzdXBlciguLi5lKSx0aGlzLng9MCx0aGlzLnk9MCx0aGlzLno9dm9pZCAwLHRoaXMubT12b2lkIDAsdGhpcy50eXBlPVwicG9pbnRcIjt9c3RhdGljIGNvcHkoZSx0KXt0Ll9zZXQoXCJ4XCIsZS5fZ2V0KFwieFwiKSksdC5fc2V0KFwieVwiLGUuX2dldChcInlcIikpLHQuX3NldChcInpcIixlLl9nZXQoXCJ6XCIpKSx0Ll9zZXQoXCJtXCIsZS5fZ2V0KFwibVwiKSk7Y29uc3Qgcj1lLl9nZXQoXCJzcGF0aWFsUmVmZXJlbmNlXCIpO3QuX3NldChcInNwYXRpYWxSZWZlcmVuY2VcIixPYmplY3QuaXNGcm96ZW4ocik/cjpyLmNsb25lKCkpO31ub3JtYWxpemVDdG9yQXJncyhlLHQscixzLGkpe2xldCBvO2lmKEFycmF5LmlzQXJyYXkoZSkpbz1lLGk9dCxlPW9bMF0sdD1vWzFdLHI9b1syXSxzPW9bM107ZWxzZSBpZihlJiZcIm9iamVjdFwiPT10eXBlb2YgZSl7aWYobz1lLGU9bnVsbCE9by54P28ueDpvLmxvbmdpdHVkZSx0PW51bGwhPW8ueT9vLnk6by5sYXRpdHVkZSxyPW8ueixzPW8ubSwoaT1vLnNwYXRpYWxSZWZlcmVuY2UpJiZcImVzcmkuZ2VvbWV0cnkuU3BhdGlhbFJlZmVyZW5jZVwiIT09aS5kZWNsYXJlZENsYXNzJiYoaT1uZXcgayQ0KGkpKSxudWxsIT1vLmxvbmdpdHVkZXx8bnVsbCE9by5sYXRpdHVkZSlpZihudWxsPT1vLmxvbmdpdHVkZSl4JDgud2FybihcIi5sb25naXR1ZGU9XCIsXCJMYXRpdHVkZSB3YXMgZGVmaW5lZCB3aXRob3V0IGxvbmdpdHVkZVwiKTtlbHNlIGlmKG51bGw9PW8ubGF0aXR1ZGUpeCQ4Lndhcm4oXCIubGF0aXR1ZGU9XCIsXCJMb25naXR1ZGUgd2FzIGRlZmluZWQgd2l0aG91dCBsYXRpdHVkZVwiKTtlbHNlIGlmKCFvLmRlY2xhcmVkQ2xhc3MmJmkmJmkuaXNXZWJNZXJjYXRvcil7Y29uc3Qgcj1NJDQoby5sb25naXR1ZGUsby5sYXRpdHVkZSxmJGopO2U9clswXSx0PXJbMV07fX1lbHNlIGckOChyKT8oaT1yLHI9bnVsbCk6ZyQ4KHMpJiYoaT1zLHM9bnVsbCk7Y29uc3QgYT17eDplLHk6dH07cmV0dXJuIG51bGw9PWEueCYmbnVsbCE9YS55P3gkOC53YXJuKFwiLnk9XCIsXCJZIGNvb3JkaW5hdGUgd2FzIGRlZmluZWQgd2l0aG91dCBhbiBYIGNvb3JkaW5hdGVcIik6bnVsbD09YS55JiZudWxsIT1hLngmJngkOC53YXJuKFwiLng9XCIsXCJYIGNvb3JkaW5hdGUgd2FzIGRlZmluZWQgd2l0aG91dCBhIFkgY29vcmRpbmF0ZVwiKSxudWxsIT1pJiYoYS5zcGF0aWFsUmVmZXJlbmNlPWkpLG51bGwhPXImJihhLno9ciksbnVsbCE9cyYmKGEubT1zKSxhfWdldCBjYWNoZSgpe3JldHVybiB0aGlzLmNvbW1pdFByb3BlcnR5KFwieFwiKSx0aGlzLmNvbW1pdFByb3BlcnR5KFwieVwiKSx0aGlzLmNvbW1pdFByb3BlcnR5KFwielwiKSx0aGlzLmNvbW1pdFByb3BlcnR5KFwibVwiKSx0aGlzLmNvbW1pdFByb3BlcnR5KFwic3BhdGlhbFJlZmVyZW5jZVwiKSx7fX1nZXQgaGFzTSgpe3JldHVybiB2b2lkIDAhPT10aGlzLm19c2V0IGhhc00oZSl7ZSE9PSh2b2lkIDAhPT10aGlzLl9nZXQoXCJtXCIpKSYmKHRoaXMuX3NldChcIm1cIixlPzA6dm9pZCAwKSx0aGlzLl9zZXQoXCJoYXNNXCIsZSkpO31nZXQgaGFzWigpe3JldHVybiB2b2lkIDAhPT10aGlzLnp9c2V0IGhhc1ooZSl7ZSE9PSh2b2lkIDAhPT10aGlzLl9nZXQoXCJ6XCIpKSYmKHRoaXMuX3NldChcInpcIixlPzA6dm9pZCAwKSx0aGlzLl9zZXQoXCJoYXNaXCIsZSkpO31nZXQgbGF0aXR1ZGUoKXtjb25zdHtzcGF0aWFsUmVmZXJlbmNlOmUseDp0LHk6cn09dGhpcztpZihlKXtpZihlLmlzV2ViTWVyY2F0b3IpcmV0dXJuIHkkZih0LHIsZiRqKVsxXTtpZihlLmlzR2VvZ3JhcGhpYylyZXR1cm4gcn1yZXR1cm4gbnVsbH1zZXQgbGF0aXR1ZGUoZSl7Y29uc3R7c3BhdGlhbFJlZmVyZW5jZTp0LHg6cn09dGhpczt0JiYodC5pc1dlYk1lcmNhdG9yP3RoaXMuX3NldChcInlcIixNJDQocixlLGYkailbMV0pOnQuaXNHZW9ncmFwaGljJiZ0aGlzLl9zZXQoXCJ5XCIsZSksdGhpcy5fc2V0KFwibGF0aXR1ZGVcIixlKSk7fWdldCBsb25naXR1ZGUoKXtjb25zdHt4OmUseTp0LHNwYXRpYWxSZWZlcmVuY2U6cn09dGhpcztpZihyKXtpZihyLmlzV2ViTWVyY2F0b3IpcmV0dXJuIHkkZihlLHQsZiRqKVswXTtpZihyLmlzR2VvZ3JhcGhpYylyZXR1cm4gZX1yZXR1cm4gTmFOfXNldCBsb25naXR1ZGUoZSl7Y29uc3R7eTp0LHNwYXRpYWxSZWZlcmVuY2U6cn09dGhpcztyJiYoci5pc1dlYk1lcmNhdG9yP3RoaXMuX3NldChcInhcIixNJDQoZSx0LGYkailbMF0pOnIuaXNHZW9ncmFwaGljJiZ0aGlzLl9zZXQoXCJ4XCIsZSksdGhpcy5fc2V0KFwibG9uZ2l0dWRlXCIsZSkpO313cml0ZVgoZSx0LHIpe3Rbcl09aXNOYU4oZSk/XCJOYU5cIjplO31yZWFkWChlKXtyZXR1cm4gXCJzdHJpbmdcIj09dHlwZW9mIGU/TmFOOmV9Y2xvbmUoKXtjb25zdCBlPW5ldyB5JGU7cmV0dXJuIGUueD10aGlzLngsZS55PXRoaXMueSxlLno9dGhpcy56LGUubT10aGlzLm0sZS5zcGF0aWFsUmVmZXJlbmNlPXRoaXMuc3BhdGlhbFJlZmVyZW5jZSxlfWNvcHkoZSl7cmV0dXJuIHkkZS5jb3B5KGUsdGhpcyksdGhpc31lcXVhbHMoZSl7aWYoIWUpcmV0dXJuICExO2NvbnN0e3g6dCx5OnIsejpzLG06aSxzcGF0aWFsUmVmZXJlbmNlOm99PXRoaXMse3o6YSxtOm59PWU7bGV0e3g6bCx5OnAsc3BhdGlhbFJlZmVyZW5jZTp1fT1lO2lmKCFvLmVxdWFscyh1KSlpZihvLmlzV2ViTWVyY2F0b3ImJnUuaXNXR1M4NClbbCxwXT1NJDQobCxwKSx1PW87ZWxzZSB7aWYoIW8uaXNXR1M4NHx8IXUuaXNXZWJNZXJjYXRvcilyZXR1cm4gITE7W2wscF09eSRmKGwscCksdT1vO31yZXR1cm4gdD09PWwmJnI9PT1wJiZzPT09YSYmaT09PW4mJm8ud2tpZD09PXUud2tpZH1vZmZzZXQoZSx0LHIpe3JldHVybiBuJHkodGhpcyxlLHQscil9bm9ybWFsaXplKCl7aWYoIXRoaXMuc3BhdGlhbFJlZmVyZW5jZSlyZXR1cm4gdGhpcztjb25zdCBlPVMkOCh0aGlzLnNwYXRpYWxSZWZlcmVuY2UpO2lmKCFlKXJldHVybiB0aGlzO2xldCB0PXRoaXMueDtjb25zdFtyLHNdPWUudmFsaWQsaT0yKnM7bGV0IG87cmV0dXJuIHQ+cz8obz1NYXRoLmNlaWwoTWF0aC5hYnModC1zKS9pKSx0LT1vKmkpOnQ8ciYmKG89TWF0aC5jZWlsKE1hdGguYWJzKHQtcikvaSksdCs9byppKSx0aGlzLl9zZXQoXCJ4XCIsdCksdGhpc31kaXN0YW5jZShlKXtyZXR1cm4gdCRwKHRoaXMsZSl9dG9BcnJheSgpe2NvbnN0IGU9dGhpcy5oYXNaLHQ9dGhpcy5oYXNNO3JldHVybiBlJiZ0P1t0aGlzLngsdGhpcy55LHRoaXMueix0aGlzLm1dOmU/W3RoaXMueCx0aGlzLnksdGhpcy56XTp0P1t0aGlzLngsdGhpcy55LHRoaXMubV06W3RoaXMueCx0aGlzLnldfXRvSlNPTihlKXtyZXR1cm4gdGhpcy53cml0ZShudWxsLGUpfX07ZSR1KFt5JHIoe3JlYWRPbmx5OiEwfSldLHckNS5wcm90b3R5cGUsXCJjYWNoZVwiLG51bGwpLGUkdShbeSRyKHt0eXBlOkJvb2xlYW4sanNvbjp7cmVhZDohMSx3cml0ZTp7ZW5hYmxlZDohMSxvdmVycmlkZVBvbGljeTpudWxsfX19KV0sdyQ1LnByb3RvdHlwZSxcImhhc01cIixudWxsKSxlJHUoW3kkcih7dHlwZTpCb29sZWFuLGpzb246e3JlYWQ6ITEsd3JpdGU6e2VuYWJsZWQ6ITEsb3ZlcnJpZGVQb2xpY3k6bnVsbH19fSldLHckNS5wcm90b3R5cGUsXCJoYXNaXCIsbnVsbCksZSR1KFt5JHIoe3R5cGU6TnVtYmVyfSldLHckNS5wcm90b3R5cGUsXCJsYXRpdHVkZVwiLG51bGwpLGUkdShbeSRyKHt0eXBlOk51bWJlcn0pXSx3JDUucHJvdG90eXBlLFwibG9uZ2l0dWRlXCIsbnVsbCksZSR1KFt5JHIoe3R5cGU6TnVtYmVyLGpzb246e3R5cGU6W051bWJlcixTdHJpbmddLHdyaXRlOntpc1JlcXVpcmVkOiEwLGFsbG93TnVsbDohMH19fSksYyRfKChlPT5pc05hTihlKT9lOnUkTihlKSkpXSx3JDUucHJvdG90eXBlLFwieFwiLHZvaWQgMCksZSR1KFtvJHYoXCJ4XCIpXSx3JDUucHJvdG90eXBlLFwid3JpdGVYXCIsbnVsbCksZSR1KFtlJEMoXCJ4XCIpXSx3JDUucHJvdG90eXBlLFwicmVhZFhcIixudWxsKSxlJHUoW3kkcih7dHlwZTpOdW1iZXIsanNvbjp7d3JpdGU6ITB9fSldLHckNS5wcm90b3R5cGUsXCJ5XCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpOdW1iZXIsanNvbjp7d3JpdGU6e292ZXJyaWRlUG9saWN5KCl7cmV0dXJuIHtlbmFibGVkOnRoaXMuaGFzWn19fX19KV0sdyQ1LnByb3RvdHlwZSxcInpcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOk51bWJlcixqc29uOnt3cml0ZTp7b3ZlcnJpZGVQb2xpY3koKXtyZXR1cm4ge2VuYWJsZWQ6dGhpcy5oYXNNfX19fX0pXSx3JDUucHJvdG90eXBlLFwibVwiLHZvaWQgMCksdyQ1PXkkZT1lJHUoW2kkWChcImVzcmkuZ2VvbWV0cnkuUG9pbnRcIildLHckNSksdyQ1LnByb3RvdHlwZS50b0pTT04uaXNEZWZhdWx0VG9KU09OPSEwO3ZhciBqJGI9dyQ1O1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuY29uc3QgbiR4PVswLDBdO2Z1bmN0aW9uIHQkbihuLHQpe3JldHVybiBlJGkobix0LngsdC55LHQueil9ZnVuY3Rpb24gciRmKG4sdCl7aWYoIXQucG9pbnRzfHx0LnBvaW50cy5sZW5ndGgpcmV0dXJuICExO2Zvcihjb25zdCByIG9mIHQucG9pbnRzKWlmKCFpJEsobixyKSlyZXR1cm4gITE7cmV0dXJuICEwfWZ1bmN0aW9uIHUkdihuLHQpe2NvbnN0e3htaW46cix5bWluOnUsem1pbjppLHhtYXg6byx5bWF4OmYsem1heDpjfT10O3JldHVybiBuLmhhc1omJnQuaGFzWj9lJGkobixyLHUsaSkmJmUkaShuLHIsZixpKSYmZSRpKG4sbyxmLGkpJiZlJGkobixvLHUsaSkmJmUkaShuLHIsdSxjKSYmZSRpKG4scixmLGMpJiZlJGkobixvLGYsYykmJmUkaShuLG8sdSxjKTplJGkobixyLHUpJiZlJGkobixyLGYpJiZlJGkobixvLGYpJiZlJGkobixvLHUpfWZ1bmN0aW9uIGkkSyhuLHQpe3JldHVybiBlJGkobix0WzBdLHRbMV0pfWZ1bmN0aW9uIG8kZihuLHQpe3JldHVybiBlJGkobix0WzBdLHRbMV0sdFsyXSl9ZnVuY3Rpb24gZSRpKG4sdCxyLHUpe3JldHVybiB0Pj1uLnhtaW4mJnQ8PW4ueG1heCYmcj49bi55bWluJiZyPD1uLnltYXgmJihudWxsPT11fHwhbi5oYXNafHx1Pj1uLnptaW4mJnU8PW4uem1heCl9ZnVuY3Rpb24gZiRpKHQscil7cmV0dXJuIG4keFsxXT1yLnksbiR4WzBdPXIueCxjJE4odCxuJHgpfWZ1bmN0aW9uIGMkTihuLHQpe3JldHVybiBzJG0obi5yaW5ncyx0KX1mdW5jdGlvbiBzJG0obix0KXtpZighbilyZXR1cm4gITE7aWYoeCQ3KG4pKXJldHVybiBtJHEoITEsbix0KTtsZXQgcj0hMTtmb3IobGV0IHU9MCxpPW4ubGVuZ3RoO3U8aTt1Kyspcj1tJHEocixuW3VdLHQpO3JldHVybiByfWZ1bmN0aW9uIHgkNyhuKXtyZXR1cm4gIUFycmF5LmlzQXJyYXkoblswXVswXSl9ZnVuY3Rpb24gbSRxKG4sdCxyKXtjb25zdFt1LGldPXI7bGV0IG89bixlPTA7Zm9yKGxldCBmPTAsYz10Lmxlbmd0aDtmPGM7ZisrKXtlKyssZT09PWMmJihlPTApO2NvbnN0W24scl09dFtmXSxbcyx4XT10W2VdOyhyPGkmJng+PWl8fHg8aSYmcj49aSkmJm4rKGktcikvKHgtcikqKHMtbik8dSYmKG89IW8pO31yZXR1cm4gb31cblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmZ1bmN0aW9uIGkkSih0LGUpe3JldHVybiB0JG4odCxlKX1mdW5jdGlvbiBvJGUobix0KXtjb25zdCBlPW4uaGFzWiYmdC5oYXNaO2xldCByLGksbztpZihuLnhtaW48PXQueG1pbil7aWYocj10LnhtaW4sbi54bWF4PHIpcmV0dXJuICExfWVsc2UgaWYocj1uLnhtaW4sdC54bWF4PHIpcmV0dXJuICExO2lmKG4ueW1pbjw9dC55bWluKXtpZihpPXQueW1pbixuLnltYXg8aSlyZXR1cm4gITF9ZWxzZSBpZihpPW4ueW1pbix0LnltYXg8aSlyZXR1cm4gITE7aWYoZSYmdC5oYXNaKWlmKG4uem1pbjw9dC56bWluKXtpZihvPXQuem1pbixuLnptYXg8bylyZXR1cm4gITF9ZWxzZSBpZihvPW4uem1pbix0LnptYXg8bylyZXR1cm4gITE7cmV0dXJuICEwfWZ1bmN0aW9uIGYkaChuLHQpe2NvbnN0e3BvaW50czppLGhhc1o6b309dCxmPW8/byRmOmkkSztmb3IoY29uc3QgZSBvZiBpKWlmKGYobixlKSlyZXR1cm4gITA7cmV0dXJuICExfWNvbnN0IHMkbD1bMCwwXSxjJE09WzAsMF0sbSRwPVswLDBdLHUkdT1bMCwwXSxsJEE9W3MkbCxjJE0sbSRwLHUkdV0sYSR5PVtbbSRwLHMkbF0sW3MkbCxjJE1dLFtjJE0sdSR1XSxbdSR1LG0kcF1dO2Z1bmN0aW9uIHgkNihuLHIpe3MkbFswXT1uLnhtaW4scyRsWzFdPW4ueW1heCxjJE1bMF09bi54bWF4LGMkTVsxXT1uLnltYXgsbSRwWzBdPW4ueG1pbixtJHBbMV09bi55bWluLHUkdVswXT1uLnhtYXgsdSR1WzFdPW4ueW1pbjtmb3IoY29uc3QgZSBvZiBsJEEpaWYoYyROKHIsZSkpcmV0dXJuICEwO2Zvcihjb25zdCB0IG9mIHIucmluZ3Mpe2lmKCF0Lmxlbmd0aCljb250aW51ZTtsZXQgcj10WzBdO2lmKGkkSyhuLHIpKXJldHVybiAhMDtmb3IobGV0IGk9MTtpPHQubGVuZ3RoO2krKyl7Y29uc3Qgbz10W2ldO2lmKGkkSyhuLG8pfHxwJFIocixvLGEkeSkpcmV0dXJuICEwO3I9bzt9fXJldHVybiAhMX1mdW5jdGlvbiB5JGQobix0KXtzJGxbMF09bi54bWluLHMkbFsxXT1uLnltYXgsYyRNWzBdPW4ueG1heCxjJE1bMV09bi55bWF4LG0kcFswXT1uLnhtaW4sbSRwWzFdPW4ueW1pbix1JHVbMF09bi54bWF4LHUkdVsxXT1uLnltaW47Y29uc3Qgcj10LnBhdGhzO2Zvcihjb25zdCBpIG9mIHIpe2lmKCFyLmxlbmd0aCljb250aW51ZTtsZXQgdD1pWzBdO2lmKGkkSyhuLHQpKXJldHVybiAhMDtmb3IobGV0IHI9MTtyPGkubGVuZ3RoO3IrKyl7Y29uc3Qgbz1pW3JdO2lmKGkkSyhuLG8pfHxwJFIodCxvLGEkeSkpcmV0dXJuICEwO3Q9bzt9fXJldHVybiAhMX1jb25zdCBoJG49WzAsMF07ZnVuY3Rpb24gZyQ3KG4pe2ZvcihsZXQgdD0wO3Q8bi5sZW5ndGg7dCsrKXtjb25zdCBlPW5bdF07Zm9yKGxldCBpPTA7aTxlLmxlbmd0aC0xO2krKyl7Y29uc3Qgcj1lW2ldLG89ZVtpKzFdO2ZvcihsZXQgZT10KzE7ZTxuLmxlbmd0aDtlKyspZm9yKGxldCB0PTA7dDxuW2VdLmxlbmd0aC0xO3QrKyl7Y29uc3QgaT1uW2VdW3RdLGY9bltlXVt0KzFdO2lmKHokMihyLG8saSxmLGgkbikmJiEoaCRuWzBdPT09clswXSYmaCRuWzFdPT09clsxXXx8aCRuWzBdPT09aVswXSYmaCRuWzFdPT09aVsxXXx8aCRuWzBdPT09b1swXSYmaCRuWzFdPT09b1sxXXx8aCRuWzBdPT09ZlswXSYmaCRuWzFdPT09ZlsxXSkpcmV0dXJuICEwfX1jb25zdCByPWUubGVuZ3RoO2lmKCEocjw9NCkpZm9yKGxldCBuPTA7bjxyLTM7bisrKXtsZXQgdD1yLTE7MD09PW4mJih0PXItMik7Y29uc3QgaT1lW25dLG89ZVtuKzFdO2ZvcihsZXQgcj1uKzI7cjx0O3IrKyl7Y29uc3Qgbj1lW3JdLHQ9ZVtyKzFdO2lmKHokMihpLG8sbix0LGgkbikmJiEoaCRuWzBdPT09aVswXSYmaCRuWzFdPT09aVsxXXx8aCRuWzBdPT09blswXSYmaCRuWzFdPT09blsxXXx8aCRuWzBdPT09b1swXSYmaCRuWzFdPT09b1sxXXx8aCRuWzBdPT09dFswXSYmaCRuWzFdPT09dFsxXSkpcmV0dXJuICEwfX19cmV0dXJuICExfWZ1bmN0aW9uIHAkUihuLHQsZSl7Zm9yKGxldCByPTA7cjxlLmxlbmd0aDtyKyspaWYoeiQyKG4sdCxlW3JdWzBdLGVbcl1bMV0pKXJldHVybiAhMDtyZXR1cm4gITF9ZnVuY3Rpb24geiQyKG4sdCxlLHIsaSl7Y29uc3RbbyxmXT1uLFtzLGNdPXQsW20sdV09ZSxbbCxhXT1yLHg9bC1tLHk9by1tLGg9cy1vLGc9YS11LHA9Zi11LHo9Yy1mLEc9ZypoLXgqejtpZigwPT09RylyZXR1cm4gITE7Y29uc3QgWj0oeCpwLWcqeSkvRyxQPShoKnAteip5KS9HO3JldHVybiBaPj0wJiZaPD0xJiZQPj0wJiZQPD0xJiYoaSYmKGlbMF09bytaKihzLW8pLGlbMV09ZitaKihjLWYpKSwhMCl9ZnVuY3Rpb24gRyQyKG4pe3N3aXRjaChuKXtjYXNlXCJlc3JpR2VvbWV0cnlFbnZlbG9wZVwiOmNhc2VcImV4dGVudFwiOnJldHVybiBvJGU7Y2FzZVwiZXNyaUdlb21ldHJ5TXVsdGlwb2ludFwiOmNhc2VcIm11bHRpcG9pbnRcIjpyZXR1cm4gZiRoO2Nhc2VcImVzcmlHZW9tZXRyeVBvaW50XCI6Y2FzZVwicG9pbnRcIjpyZXR1cm4gaSRKO2Nhc2VcImVzcmlHZW9tZXRyeVBvbHlnb25cIjpjYXNlXCJwb2x5Z29uXCI6cmV0dXJuIHgkNjtjYXNlXCJlc3JpR2VvbWV0cnlQb2x5bGluZVwiOmNhc2VcInBvbHlsaW5lXCI6cmV0dXJuIHkkZDtjYXNlXCJtZXNoXCI6cmV0dXJuIG8kZX19XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG52YXIgeSRjO2Z1bmN0aW9uIGYkZyh0KXtyZXR1cm4gdCYmKFwiZXNyaS5nZW9tZXRyeS5TcGF0aWFsUmVmZXJlbmNlXCI9PT10LmRlY2xhcmVkQ2xhc3N8fG51bGwhPXQud2tpZCl9ZnVuY3Rpb24gZCRyKHQsaSxlKXtyZXR1cm4gbnVsbD09aT9lOm51bGw9PWU/aTp0KGksZSl9bGV0IHokMT15JGM9Y2xhc3MgZXh0ZW5kcyBjJE97Y29uc3RydWN0b3IoLi4udCl7c3VwZXIoLi4udCksdGhpcy50eXBlPVwiZXh0ZW50XCIsdGhpcy54bWluPTAsdGhpcy55bWluPTAsdGhpcy5tbWluPXZvaWQgMCx0aGlzLnptaW49dm9pZCAwLHRoaXMueG1heD0wLHRoaXMueW1heD0wLHRoaXMubW1heD12b2lkIDAsdGhpcy56bWF4PXZvaWQgMDt9bm9ybWFsaXplQ3RvckFyZ3ModCxpLGUscyxuKXtyZXR1cm4gZiRnKHQpP3tzcGF0aWFsUmVmZXJlbmNlOnQseG1pbjowLHltaW46MCx4bWF4OjAseW1heDowfTpcIm9iamVjdFwiPT10eXBlb2YgdD8odC5zcGF0aWFsUmVmZXJlbmNlPW51bGw9PXQuc3BhdGlhbFJlZmVyZW5jZT9rJDQuV0dTODQ6dC5zcGF0aWFsUmVmZXJlbmNlLHQpOnt4bWluOnQseW1pbjppLHhtYXg6ZSx5bWF4OnMsc3BhdGlhbFJlZmVyZW5jZTpudWxsPT1uP2skNC5XR1M4NDpufX1zdGF0aWMgZnJvbUJvdW5kcyh0LGkpe3JldHVybiBuZXcgeSRjKHt4bWluOnRbMF0seW1pbjp0WzFdLHhtYXg6dFsyXSx5bWF4OnRbM10sc3BhdGlhbFJlZmVyZW5jZTppfSl9Z2V0IGNhY2hlKCl7cmV0dXJuIHRoaXMuY29tbWl0UHJvcGVydHkoXCJ4bWluXCIpLHRoaXMuY29tbWl0UHJvcGVydHkoXCJ5bWluXCIpLHRoaXMuY29tbWl0UHJvcGVydHkoXCJ6bWluXCIpLHRoaXMuY29tbWl0UHJvcGVydHkoXCJtbWluXCIpLHRoaXMuY29tbWl0UHJvcGVydHkoXCJ4bWF4XCIpLHRoaXMuY29tbWl0UHJvcGVydHkoXCJ5bWF4XCIpLHRoaXMuY29tbWl0UHJvcGVydHkoXCJ6bWF4XCIpLHRoaXMuY29tbWl0UHJvcGVydHkoXCJtbWF4XCIpLHRoaXMuY29tbWl0UHJvcGVydHkoXCJzcGF0aWFsUmVmZXJlbmNlXCIpLHt9fWdldCBjZW50ZXIoKXtjb25zdCB0PW5ldyBqJGIoe3g6LjUqKHRoaXMueG1pbit0aGlzLnhtYXgpLHk6LjUqKHRoaXMueW1pbit0aGlzLnltYXgpLHNwYXRpYWxSZWZlcmVuY2U6dGhpcy5zcGF0aWFsUmVmZXJlbmNlfSk7cmV0dXJuIHRoaXMuaGFzWiYmKHQuej0uNSoodGhpcy56bWluK3RoaXMuem1heCkpLHRoaXMuaGFzTSYmKHQubT0uNSoodGhpcy5tbWluK3RoaXMubW1heCkpLHR9Z2V0IGV4dGVudCgpe3JldHVybiB0aGlzLmNsb25lKCl9Z2V0IGhhc00oKXtyZXR1cm4gbnVsbCE9dGhpcy5tbWluJiZudWxsIT10aGlzLm1tYXh9Z2V0IGhhc1ooKXtyZXR1cm4gbnVsbCE9dGhpcy56bWluJiZudWxsIT10aGlzLnptYXh9Z2V0IGhlaWdodCgpe3JldHVybiBNYXRoLmFicyh0aGlzLnltYXgtdGhpcy55bWluKX1nZXQgd2lkdGgoKXtyZXR1cm4gTWF0aC5hYnModGhpcy54bWF4LXRoaXMueG1pbil9Y2VudGVyQXQodCl7Y29uc3QgaT10aGlzLmNlbnRlcjtyZXR1cm4gbnVsbCE9dC56JiZ0aGlzLmhhc1o/dGhpcy5vZmZzZXQodC54LWkueCx0LnktaS55LHQuei1pLnopOnRoaXMub2Zmc2V0KHQueC1pLngsdC55LWkueSl9Y2xvbmUoKXtjb25zdCB0PW5ldyB5JGM7cmV0dXJuIHQueG1pbj10aGlzLnhtaW4sdC55bWluPXRoaXMueW1pbix0LnhtYXg9dGhpcy54bWF4LHQueW1heD10aGlzLnltYXgsdC5zcGF0aWFsUmVmZXJlbmNlPXRoaXMuc3BhdGlhbFJlZmVyZW5jZSxudWxsIT10aGlzLnptaW4mJih0LnptaW49dGhpcy56bWluLHQuem1heD10aGlzLnptYXgpLG51bGwhPXRoaXMubW1pbiYmKHQubW1pbj10aGlzLm1taW4sdC5tbWF4PXRoaXMubW1heCksdH1jb250YWlucyh0KXtpZighdClyZXR1cm4gITE7Y29uc3QgaT10aGlzLnNwYXRpYWxSZWZlcmVuY2UsZT10LnNwYXRpYWxSZWZlcmVuY2U7cmV0dXJuIGkmJmUmJiFpLmVxdWFscyhlKSYmeCQ5KGksZSkmJih0PWkuaXNXZWJNZXJjYXRvcj9kJHModCk6UiQ1KHQsITApKSxcInBvaW50XCI9PT10LnR5cGU/dCRuKHRoaXMsdCk6XCJleHRlbnRcIj09PXQudHlwZSYmdSR2KHRoaXMsdCl9ZXF1YWxzKHQpe2lmKCF0KXJldHVybiAhMTtjb25zdCBpPXRoaXMuc3BhdGlhbFJlZmVyZW5jZSxlPXQuc3BhdGlhbFJlZmVyZW5jZTtyZXR1cm4gaSYmZSYmIWkuZXF1YWxzKGUpJiZ4JDkoaSxlKSYmKHQ9aS5pc1dlYk1lcmNhdG9yP2Qkcyh0KTpSJDUodCwhMCkpLHRoaXMueG1pbj09PXQueG1pbiYmdGhpcy55bWluPT09dC55bWluJiZ0aGlzLnptaW49PT10LnptaW4mJnRoaXMubW1pbj09PXQubW1pbiYmdGhpcy54bWF4PT09dC54bWF4JiZ0aGlzLnltYXg9PT10LnltYXgmJnRoaXMuem1heD09PXQuem1heCYmdGhpcy5tbWF4PT09dC5tbWF4fWV4cGFuZCh0KXtjb25zdCBpPS41KigxLXQpLGU9dGhpcy53aWR0aCppLHM9dGhpcy5oZWlnaHQqaTtpZih0aGlzLnhtaW4rPWUsdGhpcy55bWluKz1zLHRoaXMueG1heC09ZSx0aGlzLnltYXgtPXMsdGhpcy5oYXNaKXtjb25zdCB0PSh0aGlzLnptYXgtdGhpcy56bWluKSppO3RoaXMuem1pbis9dCx0aGlzLnptYXgtPXQ7fWlmKHRoaXMuaGFzTSl7Y29uc3QgdD0odGhpcy5tbWF4LXRoaXMubW1pbikqaTt0aGlzLm1taW4rPXQsdGhpcy5tbWF4LT10O31yZXR1cm4gdGhpc31pbnRlcnNlY3RzKHQpe2lmKHQkTSh0KSlyZXR1cm4gITE7XCJtZXNoXCI9PT10LnR5cGUmJih0PXQuZXh0ZW50KTtjb25zdCBlPXRoaXMuc3BhdGlhbFJlZmVyZW5jZSxzPXQuc3BhdGlhbFJlZmVyZW5jZTtlJiZzJiYhZS5lcXVhbHMocykmJngkOShlLHMpJiYodD1lLmlzV2ViTWVyY2F0b3I/ZCRzKHQpOlIkNSh0LCEwKSk7cmV0dXJuIEckMih0LnR5cGUpKHRoaXMsdCl9bm9ybWFsaXplKCl7Y29uc3QgdD10aGlzLl9ub3JtYWxpemUoITEsITApO3JldHVybiBBcnJheS5pc0FycmF5KHQpP3Q6W3RdfW9mZnNldCh0LGksZSl7cmV0dXJuIHRoaXMueG1pbis9dCx0aGlzLnltaW4rPWksdGhpcy54bWF4Kz10LHRoaXMueW1heCs9aSxudWxsIT1lJiYodGhpcy56bWluKz1lLHRoaXMuem1heCs9ZSksdGhpc31zaGlmdENlbnRyYWxNZXJpZGlhbigpe3JldHVybiB0aGlzLl9ub3JtYWxpemUoITApfXVuaW9uKHQpe3JldHVybiB0aGlzLnhtaW49TWF0aC5taW4odGhpcy54bWluLHQueG1pbiksdGhpcy55bWluPU1hdGgubWluKHRoaXMueW1pbix0LnltaW4pLHRoaXMueG1heD1NYXRoLm1heCh0aGlzLnhtYXgsdC54bWF4KSx0aGlzLnltYXg9TWF0aC5tYXgodGhpcy55bWF4LHQueW1heCksKHRoaXMuaGFzWnx8dC5oYXNaKSYmKHRoaXMuem1pbj1kJHIoTWF0aC5taW4sdGhpcy56bWluLHQuem1pbiksdGhpcy56bWF4PWQkcihNYXRoLm1heCx0aGlzLnptYXgsdC56bWF4KSksKHRoaXMuaGFzTXx8dC5oYXNNKSYmKHRoaXMubW1pbj1kJHIoTWF0aC5taW4sdGhpcy5tbWluLHQubW1pbiksdGhpcy5tbWF4PWQkcihNYXRoLm1heCx0aGlzLm1tYXgsdC5tbWF4KSksdGhpc31pbnRlcnNlY3Rpb24odCl7cmV0dXJuIHRoaXMuaW50ZXJzZWN0cyh0KT8odGhpcy54bWluPU1hdGgubWF4KHRoaXMueG1pbix0LnhtaW4pLHRoaXMueW1pbj1NYXRoLm1heCh0aGlzLnltaW4sdC55bWluKSx0aGlzLnhtYXg9TWF0aC5taW4odGhpcy54bWF4LHQueG1heCksdGhpcy55bWF4PU1hdGgubWluKHRoaXMueW1heCx0LnltYXgpLCh0aGlzLmhhc1p8fHQuaGFzWikmJih0aGlzLnptaW49ZCRyKE1hdGgubWF4LHRoaXMuem1pbix0LnptaW4pLHRoaXMuem1heD1kJHIoTWF0aC5taW4sdGhpcy56bWF4LHQuem1heCkpLCh0aGlzLmhhc018fHQuaGFzTSkmJih0aGlzLm1taW49ZCRyKE1hdGgubWF4LHRoaXMubW1pbix0Lm1taW4pLHRoaXMubW1heD1kJHIoTWF0aC5taW4sdGhpcy5tbWF4LHQubW1heCkpLHRoaXMpOm51bGx9dG9KU09OKHQpe3JldHVybiB0aGlzLndyaXRlKG51bGwsdCl9X3NoaWZ0Q00odD1TJDgodGhpcy5zcGF0aWFsUmVmZXJlbmNlKSl7aWYoIXR8fCF0aGlzLnNwYXRpYWxSZWZlcmVuY2UpcmV0dXJuIHRoaXM7Y29uc3QgaT10aGlzLnNwYXRpYWxSZWZlcmVuY2Uscz10aGlzLl9nZXRDTSh0KTtpZihzKXtjb25zdCBuPWkuaXNXZWJNZXJjYXRvcj9SJDUocyk6czt0aGlzLnhtaW4tPXMueCx0aGlzLnhtYXgtPXMueCxpLmlzV2ViTWVyY2F0b3J8fChuLng9dGhpcy5fbm9ybWFsaXplWChuLngsdCkueCksdGhpcy5zcGF0aWFsUmVmZXJlbmNlPW5ldyBrJDQociR6KGkuaXNXR1M4ND90LmFsdFRlbXBsYXRlOnQud2tUZW1wbGF0ZSx7Q2VudHJhbF9NZXJpZGlhbjpuLnh9KSk7fXJldHVybiB0aGlzfV9nZXRDTSh0KXtsZXQgaT1udWxsO2NvbnN0W2Usc109dC52YWxpZCxuPXRoaXMueG1pbixyPXRoaXMueG1heDtyZXR1cm4gbj49ZSYmbjw9cyYmKHI+PWUmJnI8PXMpfHwoaT10aGlzLmNlbnRlciksaX1fbm9ybWFsaXplKHQsaSxlKXtjb25zdCBzPXRoaXMuc3BhdGlhbFJlZmVyZW5jZTtpZighcylyZXR1cm4gdGhpcztpZighKGU9ZXx8UyQ4KHMpKSlyZXR1cm4gdGhpcztjb25zdCBuPXRoaXMuX2dldFBhcnRzKGUpLm1hcCgodD0+dC5leHRlbnQpKTtpZihuLmxlbmd0aDwyKXJldHVybiBuWzBdfHx0aGlzO2lmKG4ubGVuZ3RoPjIpcmV0dXJuIHQ/dGhpcy5fc2hpZnRDTShlKTp0aGlzLnNldCh7eG1pbjplLnZhbGlkWzBdLHhtYXg6ZS52YWxpZFsxXX0pO2lmKHQpcmV0dXJuIHRoaXMuX3NoaWZ0Q00oZSk7aWYoaSlyZXR1cm4gbjtsZXQgbT0hMCxhPSEwO3JldHVybiBuLmZvckVhY2goKHQ9Pnt0Lmhhc1p8fChtPSExKSx0Lmhhc018fChhPSExKTt9KSkse3JpbmdzOm4ubWFwKCh0PT57Y29uc3QgaT1bW3QueG1pbix0LnltaW5dLFt0LnhtaW4sdC55bWF4XSxbdC54bWF4LHQueW1heF0sW3QueG1heCx0LnltaW5dLFt0LnhtaW4sdC55bWluXV07aWYobSl7Y29uc3QgZT0odC56bWF4LXQuem1pbikvMjtmb3IobGV0IHQ9MDt0PGkubGVuZ3RoO3QrKylpW3RdLnB1c2goZSk7fWlmKGEpe2NvbnN0IGU9KHQubW1heC10Lm1taW4pLzI7Zm9yKGxldCB0PTA7dDxpLmxlbmd0aDt0KyspaVt0XS5wdXNoKGUpO31yZXR1cm4gaX0pKSxoYXNaOm0saGFzTTphLHNwYXRpYWxSZWZlcmVuY2U6c319X2dldFBhcnRzKHQpe2xldCBpPXRoaXMuY2FjaGUuX3BhcnRzO2lmKCFpKXtpPVtdO2NvbnN0e3ltaW46ZSx5bWF4OnMsc3BhdGlhbFJlZmVyZW5jZTpufT10aGlzLG09dGhpcy53aWR0aCxhPXRoaXMueG1pbixoPXRoaXMueG1heDtsZXQgbzt0PXR8fFMkOChuKTtjb25zdFt4LGxdPXQudmFsaWQ7bz10aGlzLl9ub3JtYWxpemVYKHRoaXMueG1pbix0KTtjb25zdCBwPW8ueCxjPW8uZnJhbWVJZDtvPXRoaXMuX25vcm1hbGl6ZVgodGhpcy54bWF4LHQpO2NvbnN0IHU9by54LGY9by5mcmFtZUlkLGQ9cD09PXUmJm0+MDtpZihtPjIqbCl7Y29uc3QgdD1uZXcgeSRjKGE8aD9wOnUsZSxsLHMsbikscj1uZXcgeSRjKHgsZSxhPGg/dTpwLHMsbiksbT1uZXcgeSRjKDAsZSxsLHMsbiksbz1uZXcgeSRjKHgsZSwwLHMsbiksZD1bXSx6PVtdO3QuY29udGFpbnMobSkmJmQucHVzaChjKSx0LmNvbnRhaW5zKG8pJiZ6LnB1c2goYyksci5jb250YWlucyhtKSYmZC5wdXNoKGYpLHIuY29udGFpbnMobykmJnoucHVzaChmKTtmb3IobGV0IGk9YysxO2k8ZjtpKyspZC5wdXNoKGkpLHoucHVzaChpKTtpLnB1c2goe2V4dGVudDp0LGZyYW1lSWRzOltjXX0se2V4dGVudDpyLGZyYW1lSWRzOltmXX0se2V4dGVudDptLGZyYW1lSWRzOmR9LHtleHRlbnQ6byxmcmFtZUlkczp6fSk7fWVsc2UgcD51fHxkP2kucHVzaCh7ZXh0ZW50Om5ldyB5JGMocCxlLGwscyxuKSxmcmFtZUlkczpbY119LHtleHRlbnQ6bmV3IHkkYyh4LGUsdSxzLG4pLGZyYW1lSWRzOltmXX0pOmkucHVzaCh7ZXh0ZW50Om5ldyB5JGMocCxlLHUscyxuKSxmcmFtZUlkczpbY119KTt0aGlzLmNhY2hlLl9wYXJ0cz1pO31jb25zdCBlPXRoaXMuaGFzWixzPXRoaXMuaGFzTTtpZihlfHxzKXtjb25zdCB0PXt9O2UmJih0LnptaW49dGhpcy56bWluLHQuem1heD10aGlzLnptYXgpLHMmJih0Lm1taW49dGhpcy5tbWluLHQubW1heD10aGlzLm1tYXgpO2ZvcihsZXQgZT0wO2U8aS5sZW5ndGg7ZSsrKWlbZV0uZXh0ZW50LnNldCh0KTt9cmV0dXJuIGl9X25vcm1hbGl6ZVgodCxpKXtjb25zdFtlLHNdPWkudmFsaWQsbj0yKnM7bGV0IHIsbT0wO3JldHVybiB0PnM/KHI9TWF0aC5jZWlsKE1hdGguYWJzKHQtcykvbiksdC09cipuLG09cik6dDxlJiYocj1NYXRoLmNlaWwoTWF0aC5hYnModC1lKS9uKSx0Kz1yKm4sbT0tcikse3g6dCxmcmFtZUlkOm19fX07ZSR1KFt5JHIoe3JlYWRPbmx5OiEwfSldLHokMS5wcm90b3R5cGUsXCJjYWNoZVwiLG51bGwpLGUkdShbeSRyKHtyZWFkT25seTohMH0pXSx6JDEucHJvdG90eXBlLFwiY2VudGVyXCIsbnVsbCksZSR1KFt5JHIoe3JlYWRPbmx5OiEwfSldLHokMS5wcm90b3R5cGUsXCJleHRlbnRcIixudWxsKSxlJHUoW3kkcih7cmVhZE9ubHk6ITAsanNvbjp7d3JpdGU6e2VuYWJsZWQ6ITEsb3ZlcnJpZGVQb2xpY3k6bnVsbH19fSldLHokMS5wcm90b3R5cGUsXCJoYXNNXCIsbnVsbCksZSR1KFt5JHIoe3JlYWRPbmx5OiEwLGpzb246e3dyaXRlOntlbmFibGVkOiExLG92ZXJyaWRlUG9saWN5Om51bGx9fX0pXSx6JDEucHJvdG90eXBlLFwiaGFzWlwiLG51bGwpLGUkdShbeSRyKHtyZWFkT25seTohMH0pXSx6JDEucHJvdG90eXBlLFwiaGVpZ2h0XCIsbnVsbCksZSR1KFt5JHIoe3JlYWRPbmx5OiEwfSldLHokMS5wcm90b3R5cGUsXCJ3aWR0aFwiLG51bGwpLGUkdShbeSRyKHt0eXBlOk51bWJlcixqc29uOnt0eXBlOltOdW1iZXIsU3RyaW5nXSx3cml0ZTp7ZW5hYmxlZDohMCxhbGxvd051bGw6ITB9fX0pXSx6JDEucHJvdG90eXBlLFwieG1pblwiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6TnVtYmVyLGpzb246e3dyaXRlOiEwfX0pXSx6JDEucHJvdG90eXBlLFwieW1pblwiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6TnVtYmVyLGpzb246e29yaWdpbnM6e1wid2ViLXNjZW5lXCI6e3dyaXRlOiExfX0sd3JpdGU6e292ZXJyaWRlUG9saWN5KCl7cmV0dXJuIHtlbmFibGVkOnRoaXMuaGFzTX19fX19KV0seiQxLnByb3RvdHlwZSxcIm1taW5cIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOk51bWJlcixqc29uOntvcmlnaW5zOntcIndlYi1zY2VuZVwiOnt3cml0ZTohMX19LHdyaXRlOntvdmVycmlkZVBvbGljeSgpe3JldHVybiB7ZW5hYmxlZDp0aGlzLmhhc1p9fX19fSldLHokMS5wcm90b3R5cGUsXCJ6bWluXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpOdW1iZXIsanNvbjp7d3JpdGU6ITB9fSldLHokMS5wcm90b3R5cGUsXCJ4bWF4XCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpOdW1iZXIsanNvbjp7d3JpdGU6ITB9fSldLHokMS5wcm90b3R5cGUsXCJ5bWF4XCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpOdW1iZXIsanNvbjp7b3JpZ2luczp7XCJ3ZWItc2NlbmVcIjp7d3JpdGU6ITF9fSx3cml0ZTp7b3ZlcnJpZGVQb2xpY3koKXtyZXR1cm4ge2VuYWJsZWQ6dGhpcy5oYXNNfX19fX0pXSx6JDEucHJvdG90eXBlLFwibW1heFwiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6TnVtYmVyLGpzb246e29yaWdpbnM6e1wid2ViLXNjZW5lXCI6e3dyaXRlOiExfX0sd3JpdGU6e292ZXJyaWRlUG9saWN5KCl7cmV0dXJuIHtlbmFibGVkOnRoaXMuaGFzWn19fX19KV0seiQxLnByb3RvdHlwZSxcInptYXhcIix2b2lkIDApLHokMT15JGM9ZSR1KFtpJFgoXCJlc3JpLmdlb21ldHJ5LkV4dGVudFwiKV0seiQxKSx6JDEucHJvdG90eXBlLnRvSlNPTi5pc0RlZmF1bHRUb0pTT049ITA7dmFyIE0kMz16JDE7XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5mdW5jdGlvbiBoJG0oaCxhLHM9ITEpe2xldHtoYXNNOnQsaGFzWjplfT1oO0FycmF5LmlzQXJyYXkoYSk/NCE9PWEubGVuZ3RofHx0fHxlPzM9PT1hLmxlbmd0aCYmcyYmIXQ/KGU9ITAsdD0hMSk6Mz09PWEubGVuZ3RoJiZ0JiZlJiYodD0hMSxlPSExKToodD0hMCxlPSEwKTooZT0hZSYmYS5oYXNaJiYoIXR8fGEuaGFzTSksdD0hdCYmYS5oYXNNJiYoIWV8fGEuaGFzWikpLGguaGFzWj1lLGguaGFzTT10O31cblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbnZhciBoJGw7ZnVuY3Rpb24gbCR6KHQpe3JldHVybiAocyxlKT0+bnVsbD09cz9lOm51bGw9PWU/czp0KHMsZSl9ZnVuY3Rpb24gYyRMKHQpe3JldHVybiB0JiYoXCJlc3JpLmdlb21ldHJ5LlNwYXRpYWxSZWZlcmVuY2VcIj09PXQuZGVjbGFyZWRDbGFzc3x8bnVsbCE9dC53a2lkKX1sZXQgdSR0PWgkbD1jbGFzcyBleHRlbmRzIGMkT3tjb25zdHJ1Y3RvciguLi50KXtzdXBlciguLi50KSx0aGlzLnBvaW50cz1bXSx0aGlzLnR5cGU9XCJtdWx0aXBvaW50XCI7fW5vcm1hbGl6ZUN0b3JBcmdzKHQscyl7aWYoIXQmJiFzKXJldHVybiBudWxsO2NvbnN0IGU9e307QXJyYXkuaXNBcnJheSh0KT8oZS5wb2ludHM9dCxlLnNwYXRpYWxSZWZlcmVuY2U9cyk6YyRMKHQpP2Uuc3BhdGlhbFJlZmVyZW5jZT10Oih0LnBvaW50cyYmKGUucG9pbnRzPXQucG9pbnRzKSx0LnNwYXRpYWxSZWZlcmVuY2UmJihlLnNwYXRpYWxSZWZlcmVuY2U9dC5zcGF0aWFsUmVmZXJlbmNlKSx0Lmhhc1omJihlLmhhc1o9dC5oYXNaKSx0Lmhhc00mJihlLmhhc009dC5oYXNNKSk7Y29uc3Qgcj1lLnBvaW50cyYmZS5wb2ludHNbMF07cmV0dXJuIHImJih2b2lkIDA9PT1lLmhhc1omJnZvaWQgMD09PWUuaGFzTT8oZS5oYXNaPXIubGVuZ3RoPjIsZS5oYXNNPSExKTp2b2lkIDA9PT1lLmhhc1o/ZS5oYXNaPXIubGVuZ3RoPjM6dm9pZCAwPT09ZS5oYXNNJiYoZS5oYXNNPXIubGVuZ3RoPjMpKSxlfWdldCBjYWNoZSgpe3JldHVybiB0aGlzLmNvbW1pdFByb3BlcnR5KFwicG9pbnRzXCIpLHRoaXMuY29tbWl0UHJvcGVydHkoXCJoYXNaXCIpLHRoaXMuY29tbWl0UHJvcGVydHkoXCJoYXNNXCIpLHRoaXMuY29tbWl0UHJvcGVydHkoXCJzcGF0aWFsUmVmZXJlbmNlXCIpLHt9fWdldCBleHRlbnQoKXtjb25zdCB0PXRoaXMucG9pbnRzO2lmKCF0Lmxlbmd0aClyZXR1cm4gbnVsbDtjb25zdCBzPW5ldyBNJDMsZT10aGlzLmhhc1oscj10aGlzLmhhc00saT1lPzM6MixvPXRbMF0sbj1sJHooTWF0aC5taW4pLHA9bCR6KE1hdGgubWF4KTtsZXQgaCxjLHUsbSxbZix5XT1vLFtkLGddPW87Zm9yKGxldCBhPTAsbD10Lmxlbmd0aDthPGw7YSsrKXtjb25zdCBzPXRbYV0sW28sbF09cztpZihmPW4oZixvKSx5PW4oeSxsKSxkPXAoZCxvKSxnPXAoZyxsKSxlJiZzLmxlbmd0aD4yKXtjb25zdCB0PXNbMl07aD1uKGgsdCksdT1wKHUsdCk7fWlmKHImJnMubGVuZ3RoPmkpe2NvbnN0IHQ9c1tpXTtjPW4oYyx0KSxtPXAobSx0KTt9fXJldHVybiBzLnhtaW49ZixzLnltaW49eSxzLnhtYXg9ZCxzLnltYXg9ZyxzLnNwYXRpYWxSZWZlcmVuY2U9dGhpcy5zcGF0aWFsUmVmZXJlbmNlLGU/KHMuem1pbj1oLHMuem1heD11KToocy56bWluPW51bGwscy56bWF4PW51bGwpLHI/KHMubW1pbj1jLHMubW1heD1tKToocy5tbWluPW51bGwscy5tbWF4PW51bGwpLHN9d3JpdGVQb2ludHModCxlKXtlLnBvaW50cz15JHYodGhpcy5wb2ludHMpO31hZGRQb2ludCh0KXtyZXR1cm4gaCRtKHRoaXMsdCksQXJyYXkuaXNBcnJheSh0KT90aGlzLnBvaW50cy5wdXNoKHQpOnRoaXMucG9pbnRzLnB1c2godC50b0FycmF5KCkpLHRoaXMubm90aWZ5Q2hhbmdlKFwicG9pbnRzXCIpLHRoaXN9Y2xvbmUoKXtjb25zdCB0PXtwb2ludHM6eSR2KHRoaXMucG9pbnRzKSxzcGF0aWFsUmVmZXJlbmNlOnRoaXMuc3BhdGlhbFJlZmVyZW5jZX07cmV0dXJuIHRoaXMuaGFzWiYmKHQuaGFzWj0hMCksdGhpcy5oYXNNJiYodC5oYXNNPSEwKSxuZXcgaCRsKHQpfWdldFBvaW50KHQpe2lmKCF0aGlzLl92YWxpZGF0ZUlucHV0cyh0KSlyZXR1cm4gbnVsbDtjb25zdCBzPXRoaXMucG9pbnRzW3RdLGU9e3g6c1swXSx5OnNbMV0sc3BhdGlhbFJlZmVyZW5jZTp0aGlzLnNwYXRpYWxSZWZlcmVuY2V9O2xldCByPTI7cmV0dXJuIHRoaXMuaGFzWiYmKGUuej1zWzJdLHI9MyksdGhpcy5oYXNNJiYoZS5tPXNbcl0pLG5ldyBqJGIoZSl9cmVtb3ZlUG9pbnQodCl7aWYoIXRoaXMuX3ZhbGlkYXRlSW5wdXRzKHQpKXJldHVybiBudWxsO2NvbnN0IHM9bmV3IGokYih0aGlzLnBvaW50cy5zcGxpY2UodCwxKVswXSx0aGlzLnNwYXRpYWxSZWZlcmVuY2UpO3JldHVybiB0aGlzLm5vdGlmeUNoYW5nZShcInBvaW50c1wiKSxzfXNldFBvaW50KHQscyl7cmV0dXJuIHRoaXMuX3ZhbGlkYXRlSW5wdXRzKHQpPyhoJG0odGhpcyxzKSxBcnJheS5pc0FycmF5KHMpfHwocz1zLnRvQXJyYXkoKSksdGhpcy5wb2ludHNbdF09cyx0aGlzLm5vdGlmeUNoYW5nZShcInBvaW50c1wiKSx0aGlzKTp0aGlzfXRvSlNPTih0KXtyZXR1cm4gdGhpcy53cml0ZShudWxsLHQpfV92YWxpZGF0ZUlucHV0cyh0KXtyZXR1cm4gbnVsbCE9dCYmdD49MCYmdDx0aGlzLnBvaW50cy5sZW5ndGh9fTtlJHUoW3kkcih7cmVhZE9ubHk6ITB9KV0sdSR0LnByb3RvdHlwZSxcImNhY2hlXCIsbnVsbCksZSR1KFt5JHIoKV0sdSR0LnByb3RvdHlwZSxcImV4dGVudFwiLG51bGwpLGUkdShbeSRyKHt0eXBlOltbTnVtYmVyXV0sanNvbjp7d3JpdGU6e2lzUmVxdWlyZWQ6ITB9fX0pXSx1JHQucHJvdG90eXBlLFwicG9pbnRzXCIsdm9pZCAwKSxlJHUoW28kdihcInBvaW50c1wiKV0sdSR0LnByb3RvdHlwZSxcIndyaXRlUG9pbnRzXCIsbnVsbCksdSR0PWgkbD1lJHUoW2kkWChcImVzcmkuZ2VvbWV0cnkuTXVsdGlwb2ludFwiKV0sdSR0KSx1JHQucHJvdG90eXBlLnRvSlNPTi5pc0RlZmF1bHRUb0pTT049ITA7dmFyIG0kbz11JHQ7XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5mdW5jdGlvbiBlJGgobix0KXtjb25zdCBlPXRbMF0tblswXSxyPXRbMV0tblsxXTtpZihuLmxlbmd0aD4yJiZ0Lmxlbmd0aD4yKXtjb25zdCBvPW5bMl0tdFsyXTtyZXR1cm4gTWF0aC5zcXJ0KGUqZStyKnIrbypvKX1yZXR1cm4gTWF0aC5zcXJ0KGUqZStyKnIpfWZ1bmN0aW9uIHIkZShuLHQsZSl7Y29uc3Qgcj1uWzBdK2UqKHRbMF0tblswXSksbz1uWzFdK2UqKHRbMV0tblsxXSk7cmV0dXJuIG4ubGVuZ3RoPjImJnQubGVuZ3RoPjI/W3IsbyxuWzJdK2UqKHRbMl0tblsyXSldOltyLG9dfWZ1bmN0aW9uIGkkSShuLHQpe3JldHVybiByJGUobix0LC41KX1mdW5jdGlvbiBmJGYobix0LGUpe2NvbnN0IHI9bi5sZW5ndGg7bGV0IG89MCxpPTAscz0wO2ZvcihsZXQgbD0wO2w8cjtsKyspe2NvbnN0IGY9bltsXSx1PW5bKGwrMSklcl07bGV0IGg9MjtvKz1mWzBdKnVbMV0tdVswXSpmWzFdLGYubGVuZ3RoPjImJnUubGVuZ3RoPjImJmUmJihpKz1mWzBdKnVbMl0tdVswXSpmWzJdLGg9MyksZi5sZW5ndGg+aCYmdS5sZW5ndGg+aCYmdCYmKHMrPWZbMF0qdVtoXS11WzBdKmZbaF0pO31yZXR1cm4gbzw9MCYmaTw9MCYmczw9MH1cblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmZ1bmN0aW9uIGUkZyhuKXtyZXR1cm4gbj9yJGQobi5yaW5ncyxuLmhhc1opOm51bGx9ZnVuY3Rpb24gciRkKG4sdCl7aWYoIW58fCFuLmxlbmd0aClyZXR1cm4gbnVsbDtjb25zdCBsPVtdLGU9W10scj10P1sxLzAsLTEvMCwxLzAsLTEvMCwxLzAsLTEvMF06WzEvMCwtMS8wLDEvMCwtMS8wXTtmb3IobGV0IHU9MCxpPW4ubGVuZ3RoO3U8aTt1Kyspe2NvbnN0IGw9byRkKG5bdV0sdCxyKTtsJiZlLnB1c2gobCk7fWlmKGUuc29ydCgoKG4sbCk9PntsZXQgZT1uWzJdLWxbMl07cmV0dXJuIDA9PT1lJiZ0JiYoZT1uWzRdLWxbNF0pLGV9KSksZS5sZW5ndGgpe2xldCBuPTYqZVswXVsyXTtsWzBdPWVbMF1bMF0vbixsWzFdPWVbMF1bMV0vbix0JiYobj02KmVbMF1bNF0sbFsyXT0wIT09bj9lWzBdWzNdL246MCksKGxbMF08clswXXx8bFswXT5yWzFdfHxsWzFdPHJbMl18fGxbMV0+clszXXx8dCYmKGxbMl08cls0XXx8bFsyXT5yWzVdKSkmJihsLmxlbmd0aD0wKTt9aWYoIWwubGVuZ3RoKXtjb25zdCBlPW5bMF0mJm5bMF0ubGVuZ3RoP3UkcyhuWzBdLHQpOm51bGw7aWYoIWUpcmV0dXJuIG51bGw7bFswXT1lWzBdLGxbMV09ZVsxXSx0JiZlLmxlbmd0aD4yJiYobFsyXT1lWzJdKTt9cmV0dXJuIGx9ZnVuY3Rpb24gbyRkKG4sdCxsKXtsZXQgZT0wLHI9MCxvPTAsdT0wLGk9MDtmb3IobGV0IGc9MDtnPG4ubGVuZ3RoO2crKyl7Y29uc3QgaD1uW2ddLFtzLGYsY109aCxtPW5bKGcrMSklbi5sZW5ndGhdLFt4LGEseV09bTtsZXQgcD1zKmEteCpmO3UrPXAsZSs9KHMreCkqcCxyKz0oZithKSpwLHQmJmgubGVuZ3RoPjImJm0ubGVuZ3RoPjImJihwPXMqeS14KmMsbys9KGMreSkqcCxpKz1wKSxzPGxbMF0mJihsWzBdPXMpLHM+bFsxXSYmKGxbMV09cyksZjxsWzJdJiYobFsyXT1mKSxmPmxbM10mJihsWzNdPWYpLHQmJihjPGxbNF0mJihsWzRdPWMpLGM+bFs1XSYmKGxbNV09YykpO31pZih1PjAmJih1Kj0tMSksaT4wJiYoaSo9LTEpLCF1KXJldHVybiBudWxsO2NvbnN0IGg9W2UsciwuNSp1XTtyZXR1cm4gdCYmKGhbM109byxoWzRdPS41KmkpLGh9ZnVuY3Rpb24gdSRzKGwsZSl7Y29uc3Qgcj1lP1swLDAsMF06WzAsMF0sbz1lP1swLDAsMF06WzAsMF07bGV0IHU9MCxpPTAsaD0wLGc9MDtmb3IobGV0IHM9MCxmPWwubGVuZ3RoO3M8Zi0xO3MrKyl7Y29uc3QgZj1sW3NdLGM9bFtzKzFdO2lmKGYmJmMpe3JbMF09ZlswXSxyWzFdPWZbMV0sb1swXT1jWzBdLG9bMV09Y1sxXSxlJiZmLmxlbmd0aD4yJiZjLmxlbmd0aD4yJiYoclsyXT1mWzJdLG9bMl09Y1syXSk7Y29uc3QgbD1lJGgocixvKTtpZihsKXt1Kz1sO2NvbnN0IG49aSRJKGYsYyk7aSs9bCpuWzBdLGgrPWwqblsxXSxlJiZuLmxlbmd0aD4yJiYoZys9bCpuWzJdKTt9fX1yZXR1cm4gdT4wP2U/W2kvdSxoL3UsZy91XTpbaS91LGgvdV06bC5sZW5ndGg/bFswXTpudWxsfVxuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuZnVuY3Rpb24gbiR3KG4pe3JldHVybiB2b2lkIDAhPT1uLnhtaW4mJnZvaWQgMCE9PW4ueW1pbiYmdm9pZCAwIT09bi54bWF4JiZ2b2lkIDAhPT1uLnltYXh9ZnVuY3Rpb24gdCRtKG4pe3JldHVybiB2b2lkIDAhPT1uLnBvaW50c31mdW5jdGlvbiBlJGYobil7cmV0dXJuIHZvaWQgMCE9PW4ueCYmdm9pZCAwIT09bi55fWZ1bmN0aW9uIG8kYyhuKXtyZXR1cm4gdm9pZCAwIT09bi5wYXRoc31mdW5jdGlvbiBpJEgobil7cmV0dXJuIHZvaWQgMCE9PW4ucmluZ3N9ZnVuY3Rpb24gbCR5KG4pe3JldHVybiAodCxlKT0+bnVsbD09dD9lOm51bGw9PWU/dDpuKHQsZSl9Y29uc3QgciRjPWwkeShNYXRoLm1pbiksdSRyPWwkeShNYXRoLm1heCk7ZnVuY3Rpb24gYyRLKGwscil7cmV0dXJuIG8kYyhyKT9oJGsobCxyLnBhdGhzLCExLCExKTppJEgocik/aCRrKGwsci5yaW5ncywhMSwhMSk6dCRtKHIpP3MkayhsLHIucG9pbnRzLCExLCExLCExLCExKTpuJHcocik/ZyQ2KGwscik6KGUkZihyKSYmKGxbMF09ci54LGxbMV09ci55LGxbMl09ci54LGxbM109ci55KSxsKX1mdW5jdGlvbiBmJGUobCxyKXtyZXR1cm4gbyRjKHIpP2gkayhsLHIucGF0aHMsITAsITEpOmkkSChyKT9oJGsobCxyLnJpbmdzLCEwLCExKTp0JG0ocik/cyRrKGwsci5wb2ludHMsITAsITEsITAsITEpOm4kdyhyKT9nJDYobCxyLCEwLCExLCEwLCExKTooZSRmKHIpJiYobFswXT1yLngsbFsxXT1yLnksbFsyXT1yLnosbFszXT1yLngsbFs0XT1yLnksbFs1XT1yLnopLGwpfWZ1bmN0aW9uIGgkayhuLHQsZSxvKXtjb25zdCBpPWU/MzoyO2lmKCF0Lmxlbmd0aHx8IXRbMF0ubGVuZ3RoKXJldHVybiBudWxsO2xldCBsLGMsZixoLFtnLHNdPXRbMF1bMF0sW3gsbV09dFswXVswXTtmb3IobGV0IGE9MDthPHQubGVuZ3RoO2ErKyl7Y29uc3Qgbj10W2FdO2ZvcihsZXQgdD0wO3Q8bi5sZW5ndGg7dCsrKXtjb25zdCBhPW5bdF0sW2Qsdl09YTtpZihnPXIkYyhnLGQpLHM9ciRjKHMsdikseD11JHIoeCxkKSxtPXUkcihtLHYpLGUmJmEubGVuZ3RoPjIpe2NvbnN0IG49YVsyXTtsPXIkYyhsLG4pLGM9dSRyKGMsbik7fWlmKG8mJmEubGVuZ3RoPmkpe2NvbnN0IG49YVtpXTtmPXIkYyhsLG4pLGg9dSRyKGMsbik7fX19cmV0dXJuIGU/bz8oblswXT1nLG5bMV09cyxuWzJdPWwsblszXT1mLG5bNF09eCxuWzVdPW0sbls2XT1jLG5bN109aCxuLmxlbmd0aD04LG4pOihuWzBdPWcsblsxXT1zLG5bMl09bCxuWzNdPXgsbls0XT1tLG5bNV09YyxuLmxlbmd0aD02LG4pOm8/KG5bMF09ZyxuWzFdPXMsblsyXT1mLG5bM109eCxuWzRdPW0sbls1XT1oLG4ubGVuZ3RoPTYsbik6KG5bMF09ZyxuWzFdPXMsblsyXT14LG5bM109bSxuLmxlbmd0aD00LG4pfWZ1bmN0aW9uIGckNihuLHQsZSxvLGksbCl7Y29uc3Qgcj10LnhtaW4sdT10LnhtYXgsYz10LnltaW4sZj10LnltYXg7bGV0IGg9dC56bWluLGc9dC56bWF4LHM9dC5tbWluLHg9dC5tbWF4O3JldHVybiBpPyhoPWh8fDAsZz1nfHwwLGw/KHM9c3x8MCx4PXh8fDAsblswXT1yLG5bMV09YyxuWzJdPWgsblszXT1zLG5bNF09dSxuWzVdPWYsbls2XT1nLG5bN109eCxuKTooblswXT1yLG5bMV09YyxuWzJdPWgsblszXT11LG5bNF09ZixuWzVdPWcsbikpOmw/KHM9c3x8MCx4PXh8fDAsblswXT1yLG5bMV09YyxuWzJdPXMsblszXT11LG5bNF09ZixuWzVdPXgsbik6KG5bMF09cixuWzFdPWMsblsyXT11LG5bM109ZixuKX1mdW5jdGlvbiBzJGsobix0LGUsbyxpLGwpe2NvbnN0IGM9ZT8zOjIsZj1vJiZsLGg9ZSYmaTtpZighdC5sZW5ndGh8fCF0WzBdLmxlbmd0aClyZXR1cm4gbnVsbDtsZXQgZyxzLHgsbSxbYSxkXT10WzBdLFt2LHldPXRbMF07Zm9yKGxldCBwPTA7cDx0Lmxlbmd0aDtwKyspe2NvbnN0IG49dFtwXSxbZSxvXT1uO2lmKGE9ciRjKGEsZSksZD1yJGMoZCxvKSx2PXUkcih2LGUpLHk9dSRyKHksbyksaCYmbi5sZW5ndGg+Mil7Y29uc3QgdD1uWzJdO2c9ciRjKGcsdCkscz11JHIocyx0KTt9aWYoZiYmbi5sZW5ndGg+Yyl7Y29uc3QgdD1uW2NdO3g9ciRjKGcsdCksbT11JHIocyx0KTt9fXJldHVybiBpPyhnPWd8fDAscz1zfHwwLGw/KHg9eHx8MCxtPW18fDAsblswXT1hLG5bMV09ZCxuWzJdPWcsblszXT14LG5bNF09dixuWzVdPXksbls2XT1zLG5bN109bSxuKTooblswXT1hLG5bMV09ZCxuWzJdPWcsblszXT12LG5bNF09eSxuWzVdPXMsbikpOmw/KHg9eHx8MCxtPW18fDAsblswXT1hLG5bMV09ZCxuWzJdPXgsblszXT12LG5bNF09eSxuWzVdPW0sbik6KG5bMF09YSxuWzFdPWQsblsyXT12LG5bM109eSxuKX1cblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmZ1bmN0aW9uIHQkbChuKXtyZXR1cm4gdm9pZCAwIT09bi54bWluJiZ2b2lkIDAhPT1uLnltaW4mJnZvaWQgMCE9PW4ueG1heCYmdm9pZCAwIT09bi55bWF4fWZ1bmN0aW9uIHUkcShuKXtyZXR1cm4gdm9pZCAwIT09bi5wb2ludHN9ZnVuY3Rpb24gbSRuKG4pe3JldHVybiB2b2lkIDAhPT1uLngmJnZvaWQgMCE9PW4ueX1mdW5jdGlvbiBvJGIobil7cmV0dXJuIHZvaWQgMCE9PW4ucGF0aHN9ZnVuY3Rpb24gciRiKG4pe3JldHVybiB2b2lkIDAhPT1uLnJpbmdzfWNvbnN0IHgkNT1bXTtmdW5jdGlvbiBhJHgobixpLHQsdSl7cmV0dXJuIHt4bWluOm4seW1pbjppLHhtYXg6dCx5bWF4OnV9fWZ1bmN0aW9uIGMkSihuLGksdCx1LG0sbyl7cmV0dXJuIHt4bWluOm4seW1pbjppLHptaW46dCx4bWF4OnUseW1heDptLHptYXg6b319ZnVuY3Rpb24gcyRqKG4saSx0LHUsbSxvKXtyZXR1cm4ge3htaW46bix5bWluOmksbW1pbjp0LHhtYXg6dSx5bWF4Om0sbW1heDpvfX1mdW5jdGlvbiBlJGUobixpLHQsdSxtLG8scix4KXtyZXR1cm4ge3htaW46bix5bWluOmksem1pbjp0LG1taW46dSx4bWF4Om0seW1heDpvLHptYXg6cixtbWF4Onh9fWZ1bmN0aW9uIGYkZChuLGk9ITEsdD0hMSl7cmV0dXJuIGk/dD9lJGUoblswXSxuWzFdLG5bMl0sblszXSxuWzRdLG5bNV0sbls2XSxuWzddKTpjJEooblswXSxuWzFdLG5bMl0sblszXSxuWzRdLG5bNV0pOnQ/cyRqKG5bMF0sblsxXSxuWzJdLG5bM10sbls0XSxuWzVdKTphJHgoblswXSxuWzFdLG5bMl0sblszXSl9ZnVuY3Rpb24gbCR4KG4pe3JldHVybiBuP3QkbChuKT9uOm0kbihuKT9kJHEobik6ciRiKG4pP3YkNihuKTpvJGIobik/aCRqKG4pOnUkcShuKT95JGIobik6bnVsbDpudWxsfWZ1bmN0aW9uIHkkYihpKXtjb25zdHtoYXNaOnQsaGFzTTp1LHBvaW50czptfT1pO3JldHVybiBmJGQocyRrKHgkNSxtLHQsdSksdCx1KX1mdW5jdGlvbiBkJHEobil7Y29uc3R7eDppLHk6dCx6OnUsbX09bixvPW51bGwhPW07cmV0dXJuIG51bGwhPXU/bz9lJGUoaSx0LHUsbSxpLHQsdSxtKTpjJEooaSx0LHUsaSx0LHUpOm8/cyRqKGksdCxtLGksdCxtKTphJHgoaSx0LGksdCl9ZnVuY3Rpb24gdiQ2KG4pe2NvbnN0e2hhc1o6dCxoYXNNOnUscmluZ3M6bX09bixvPWgkayh4JDUsbSx0LHUpO3JldHVybiBvP2YkZChvLHQsdSk6bnVsbH1mdW5jdGlvbiBoJGoobil7Y29uc3R7aGFzWjp0LGhhc006dSxwYXRoczptfT1uLG89aCRrKHgkNSxtLHQsdSk7cmV0dXJuIG8/ZiRkKG8sdCx1KTpudWxsfVxuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xudmFyIGQkcDtmdW5jdGlvbiBSJDQodCl7cmV0dXJuICFBcnJheS5pc0FycmF5KHRbMF0pfWxldCBqJGE9ZCRwPWNsYXNzIGV4dGVuZHMgYyRPe2NvbnN0cnVjdG9yKC4uLnQpe3N1cGVyKC4uLnQpLHRoaXMucmluZ3M9W10sdGhpcy50eXBlPVwicG9seWdvblwiO31zdGF0aWMgZnJvbUV4dGVudCh0KXtjb25zdCByPXQuY2xvbmUoKS5ub3JtYWxpemUoKSxlPXQuc3BhdGlhbFJlZmVyZW5jZTtsZXQgcz0hMSxpPSExO3IubWFwKCh0PT57dC5oYXNaJiYocz0hMCksdC5oYXNNJiYoaT0hMCk7fSkpO2NvbnN0IG49e3JpbmdzOnIubWFwKChmdW5jdGlvbih0KXtjb25zdCByPVtbdC54bWluLHQueW1pbl0sW3QueG1pbix0LnltYXhdLFt0LnhtYXgsdC55bWF4XSxbdC54bWF4LHQueW1pbl0sW3QueG1pbix0LnltaW5dXTtpZihzJiZ0Lmhhc1ope2NvbnN0IGU9dC56bWluKy41Kih0LnptYXgtdC56bWluKTtmb3IobGV0IHQ9MDt0PHIubGVuZ3RoO3QrKylyW3RdLnB1c2goZSk7fWlmKGkmJnQuaGFzTSl7Y29uc3QgZT10Lm1taW4rLjUqKHQubW1heC10Lm1taW4pO2ZvcihsZXQgdD0wO3Q8ci5sZW5ndGg7dCsrKXJbdF0ucHVzaChlKTt9cmV0dXJuIHJ9KSksc3BhdGlhbFJlZmVyZW5jZTplfTtyZXR1cm4gcyYmKG4uaGFzWj0hMCksaSYmKG4uaGFzTT0hMCksbmV3IGQkcChuKX1ub3JtYWxpemVDdG9yQXJncyh0LHIpe2xldCBlLHMsaT1udWxsLG89bnVsbDtyZXR1cm4gdCYmIUFycmF5LmlzQXJyYXkodCk/KGk9dC5yaW5ncz90LnJpbmdzOm51bGwscnx8KHQuc3BhdGlhbFJlZmVyZW5jZT9yPXQuc3BhdGlhbFJlZmVyZW5jZTp0LnJpbmdzfHwocj10KSksZT10Lmhhc1oscz10Lmhhc00pOmk9dCxpPWl8fFtdLHI9cnx8ayQ0LldHUzg0LGkubGVuZ3RoJiZpWzBdJiZudWxsIT1pWzBdWzBdJiZcIm51bWJlclwiPT10eXBlb2YgaVswXVswXSYmKGk9W2ldKSxvPWlbMF0mJmlbMF1bMF0sbyYmKHZvaWQgMD09PWUmJnZvaWQgMD09PXM/KGU9by5sZW5ndGg+MixzPSExKTp2b2lkIDA9PT1lP2U9IXMmJm8ubGVuZ3RoPjM6dm9pZCAwPT09cyYmKHM9IWUmJm8ubGVuZ3RoPjMpKSx7cmluZ3M6aSxzcGF0aWFsUmVmZXJlbmNlOnIsaGFzWjplLGhhc006c319Z2V0IGNhY2hlKCl7cmV0dXJuIHRoaXMuY29tbWl0UHJvcGVydHkoXCJyaW5nc1wiKSx0aGlzLmNvbW1pdFByb3BlcnR5KFwiaGFzWlwiKSx0aGlzLmNvbW1pdFByb3BlcnR5KFwiaGFzTVwiKSx0aGlzLmNvbW1pdFByb3BlcnR5KFwic3BhdGlhbFJlZmVyZW5jZVwiKSx7fX1nZXQgY2VudHJvaWQoKXtjb25zdCB0PWUkZyh0aGlzKTtpZighdHx8aXNOYU4odFswXSl8fGlzTmFOKHRbMV0pfHx0aGlzLmhhc1omJmlzTmFOKHRbMl0pKXJldHVybiBudWxsO2NvbnN0IHI9bmV3IGokYjtyZXR1cm4gci54PXRbMF0sci55PXRbMV0sci5zcGF0aWFsUmVmZXJlbmNlPXRoaXMuc3BhdGlhbFJlZmVyZW5jZSx0aGlzLmhhc1omJihyLno9dFsyXSkscn1nZXQgZXh0ZW50KCl7Y29uc3R7c3BhdGlhbFJlZmVyZW5jZTp0fT10aGlzLHI9diQ2KHRoaXMpO2lmKCFyKXJldHVybiBudWxsO2NvbnN0IGU9bmV3IE0kMyhyKTtyZXR1cm4gZS5zcGF0aWFsUmVmZXJlbmNlPXQsZX1nZXQgaXNTZWxmSW50ZXJzZWN0aW5nKCl7cmV0dXJuIGckNyh0aGlzLnJpbmdzKX13cml0ZVJpbmdzKHQsZSl7ZS5yaW5ncz15JHYodGhpcy5yaW5ncyk7fWFkZFJpbmcodCl7aWYoIXQpcmV0dXJuO2NvbnN0IHI9dGhpcy5yaW5ncyxlPXIubGVuZ3RoO2lmKFIkNCh0KSl7Y29uc3Qgcz1bXTtmb3IobGV0IHI9MCxlPXQubGVuZ3RoO3I8ZTtyKyspc1tyXT10W3JdLnRvQXJyYXkoKTtyW2VdPXM7fWVsc2UgcltlXT10LmNvbmNhdCgpO3JldHVybiB0aGlzLm5vdGlmeUNoYW5nZShcInJpbmdzXCIpLHRoaXN9Y2xvbmUoKXtjb25zdCB0PW5ldyBkJHA7cmV0dXJuIHQuc3BhdGlhbFJlZmVyZW5jZT10aGlzLnNwYXRpYWxSZWZlcmVuY2UsdC5yaW5ncz15JHYodGhpcy5yaW5ncyksdC5oYXNaPXRoaXMuaGFzWix0Lmhhc009dGhpcy5oYXNNLHR9Y29udGFpbnModCl7cmV0dXJuICEhdCYmKHgkOSh0LHRoaXMuc3BhdGlhbFJlZmVyZW5jZSkmJih0PWckOSh0LHRoaXMuc3BhdGlhbFJlZmVyZW5jZSkpLGYkaSh0aGlzLHQpKX1pc0Nsb2Nrd2lzZSh0KXtsZXQgcjtyZXR1cm4gcj1SJDQodCk/dC5tYXAoKHQ9PnRoaXMuaGFzWj90aGlzLmhhc00/W3QueCx0LnksdC56LHQubV06W3QueCx0LnksdC56XTpbdC54LHQueV0pKTp0LGYkZihyLHRoaXMuaGFzTSx0aGlzLmhhc1opfWdldFBvaW50KHQscil7aWYoIXRoaXMuX3ZhbGlkYXRlSW5wdXRzKHQscikpcmV0dXJuIG51bGw7Y29uc3QgZT10aGlzLnJpbmdzW3RdW3JdLHM9dGhpcy5oYXNaLGk9dGhpcy5oYXNNO3JldHVybiBzJiYhaT9uZXcgaiRiKGVbMF0sZVsxXSxlWzJdLHZvaWQgMCx0aGlzLnNwYXRpYWxSZWZlcmVuY2UpOmkmJiFzP25ldyBqJGIoZVswXSxlWzFdLHZvaWQgMCxlWzJdLHRoaXMuc3BhdGlhbFJlZmVyZW5jZSk6cyYmaT9uZXcgaiRiKGVbMF0sZVsxXSxlWzJdLGVbM10sdGhpcy5zcGF0aWFsUmVmZXJlbmNlKTpuZXcgaiRiKGVbMF0sZVsxXSx0aGlzLnNwYXRpYWxSZWZlcmVuY2UpfWluc2VydFBvaW50KHQscixlKXtyZXR1cm4gdGhpcy5fdmFsaWRhdGVJbnB1dHModCxyLCEwKT8oaCRtKHRoaXMsZSksQXJyYXkuaXNBcnJheShlKXx8KGU9ZS50b0FycmF5KCkpLHRoaXMucmluZ3NbdF0uc3BsaWNlKHIsMCxlKSx0aGlzLm5vdGlmeUNoYW5nZShcInJpbmdzXCIpLHRoaXMpOnRoaXN9cmVtb3ZlUG9pbnQodCxyKXtpZighdGhpcy5fdmFsaWRhdGVJbnB1dHModCxyKSlyZXR1cm4gbnVsbDtjb25zdCBlPW5ldyBqJGIodGhpcy5yaW5nc1t0XS5zcGxpY2UociwxKVswXSx0aGlzLnNwYXRpYWxSZWZlcmVuY2UpO3JldHVybiB0aGlzLm5vdGlmeUNoYW5nZShcInJpbmdzXCIpLGV9cmVtb3ZlUmluZyh0KXtpZighdGhpcy5fdmFsaWRhdGVJbnB1dHModCxudWxsKSlyZXR1cm4gbnVsbDtjb25zdCByPXRoaXMucmluZ3Muc3BsaWNlKHQsMSlbMF0sZT10aGlzLnNwYXRpYWxSZWZlcmVuY2Uscz1yLm1hcCgodD0+bmV3IGokYih0LGUpKSk7cmV0dXJuIHRoaXMubm90aWZ5Q2hhbmdlKFwicmluZ3NcIiksc31zZXRQb2ludCh0LHIsZSl7cmV0dXJuIHRoaXMuX3ZhbGlkYXRlSW5wdXRzKHQscik/KGgkbSh0aGlzLGUpLEFycmF5LmlzQXJyYXkoZSl8fChlPWUudG9BcnJheSgpKSx0aGlzLnJpbmdzW3RdW3JdPWUsdGhpcy5ub3RpZnlDaGFuZ2UoXCJyaW5nc1wiKSx0aGlzKTp0aGlzfV92YWxpZGF0ZUlucHV0cyh0LHIsZT0hMSl7aWYobnVsbD09dHx8dDwwfHx0Pj10aGlzLnJpbmdzLmxlbmd0aClyZXR1cm4gITE7aWYobnVsbCE9cil7Y29uc3Qgcz10aGlzLnJpbmdzW3RdO2lmKGUmJihyPDB8fHI+cy5sZW5ndGgpKXJldHVybiAhMTtpZighZSYmKHI8MHx8cj49cy5sZW5ndGgpKXJldHVybiAhMX1yZXR1cm4gITB9dG9KU09OKHQpe3JldHVybiB0aGlzLndyaXRlKG51bGwsdCl9fTtlJHUoW3kkcih7cmVhZE9ubHk6ITB9KV0saiRhLnByb3RvdHlwZSxcImNhY2hlXCIsbnVsbCksZSR1KFt5JHIoe3JlYWRPbmx5OiEwfSldLGokYS5wcm90b3R5cGUsXCJjZW50cm9pZFwiLG51bGwpLGUkdShbeSRyKHtyZWFkT25seTohMH0pXSxqJGEucHJvdG90eXBlLFwiZXh0ZW50XCIsbnVsbCksZSR1KFt5JHIoe3JlYWRPbmx5OiEwfSldLGokYS5wcm90b3R5cGUsXCJpc1NlbGZJbnRlcnNlY3RpbmdcIixudWxsKSxlJHUoW3kkcih7dHlwZTpbW1tOdW1iZXJdXV0sanNvbjp7d3JpdGU6e2lzUmVxdWlyZWQ6ITB9fX0pXSxqJGEucHJvdG90eXBlLFwicmluZ3NcIix2b2lkIDApLGUkdShbbyR2KFwicmluZ3NcIildLGokYS5wcm90b3R5cGUsXCJ3cml0ZVJpbmdzXCIsbnVsbCksaiRhPWQkcD1lJHUoW2kkWChcImVzcmkuZ2VvbWV0cnkuUG9seWdvblwiKV0saiRhKSxqJGEucHJvdG90eXBlLnRvSlNPTi5pc0RlZmF1bHRUb0pTT049ITA7dmFyIHgkND1qJGE7XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG52YXIgYyRJO2Z1bmN0aW9uIHUkcCh0KXtyZXR1cm4gIUFycmF5LmlzQXJyYXkodFswXSl9bGV0IGYkYz1jJEk9Y2xhc3MgZXh0ZW5kcyBjJE97Y29uc3RydWN0b3IoLi4udCl7c3VwZXIoLi4udCksdGhpcy5wYXRocz1bXSx0aGlzLnR5cGU9XCJwb2x5bGluZVwiO31ub3JtYWxpemVDdG9yQXJncyh0LGUpe2xldCByLHMsaT1udWxsLGE9bnVsbDtyZXR1cm4gdCYmIUFycmF5LmlzQXJyYXkodCk/KGk9dC5wYXRocz90LnBhdGhzOm51bGwsZXx8KHQuc3BhdGlhbFJlZmVyZW5jZT9lPXQuc3BhdGlhbFJlZmVyZW5jZTp0LnBhdGhzfHwoZT10KSkscj10Lmhhc1oscz10Lmhhc00pOmk9dCxpPWl8fFtdLGU9ZXx8ayQ0LldHUzg0LGkubGVuZ3RoJiZpWzBdJiZudWxsIT1pWzBdWzBdJiZcIm51bWJlclwiPT10eXBlb2YgaVswXVswXSYmKGk9W2ldKSxhPWlbMF0mJmlbMF1bMF0sYSYmKHZvaWQgMD09PXImJnZvaWQgMD09PXM/KHI9YS5sZW5ndGg+MixzPSExKTp2b2lkIDA9PT1yP3I9IXMmJmEubGVuZ3RoPjM6dm9pZCAwPT09cyYmKHM9IXImJmEubGVuZ3RoPjMpKSx7cGF0aHM6aSxzcGF0aWFsUmVmZXJlbmNlOmUsaGFzWjpyLGhhc006c319Z2V0IGNhY2hlKCl7cmV0dXJuIHRoaXMuY29tbWl0UHJvcGVydHkoXCJwYXRoc1wiKSx0aGlzLmNvbW1pdFByb3BlcnR5KFwiaGFzWlwiKSx0aGlzLmNvbW1pdFByb3BlcnR5KFwiaGFzTVwiKSx0aGlzLmNvbW1pdFByb3BlcnR5KFwic3BhdGlhbFJlZmVyZW5jZVwiKSx7fX1nZXQgZXh0ZW50KCl7Y29uc3R7c3BhdGlhbFJlZmVyZW5jZTp0fT10aGlzLGU9aCRqKHRoaXMpO2lmKCFlKXJldHVybiBudWxsO2NvbnN0IHI9bmV3IE0kMyhlKTtyZXR1cm4gci5zcGF0aWFsUmVmZXJlbmNlPXQscn13cml0ZVBhdGhzKHQscil7ci5wYXRocz15JHYodGhpcy5wYXRocyk7fWFkZFBhdGgodCl7aWYoIXQpcmV0dXJuO2NvbnN0IGU9dGhpcy5wYXRocyxyPWUubGVuZ3RoO2lmKHUkcCh0KSl7Y29uc3Qgcz1bXTtmb3IobGV0IGU9MCxyPXQubGVuZ3RoO2U8cjtlKyspc1tlXT10W2VdLnRvQXJyYXkoKTtlW3JdPXM7fWVsc2UgZVtyXT10LmNvbmNhdCgpO3JldHVybiB0aGlzLm5vdGlmeUNoYW5nZShcInBhdGhzXCIpLHRoaXN9Y2xvbmUoKXtjb25zdCB0PW5ldyBjJEk7cmV0dXJuIHQuc3BhdGlhbFJlZmVyZW5jZT10aGlzLnNwYXRpYWxSZWZlcmVuY2UsdC5wYXRocz15JHYodGhpcy5wYXRocyksdC5oYXNaPXRoaXMuaGFzWix0Lmhhc009dGhpcy5oYXNNLHR9Z2V0UG9pbnQodCxlKXtpZighdGhpcy5fdmFsaWRhdGVJbnB1dHModCxlKSlyZXR1cm4gbnVsbDtjb25zdCByPXRoaXMucGF0aHNbdF1bZV0scz10aGlzLmhhc1osaT10aGlzLmhhc007cmV0dXJuIHMmJiFpP25ldyBqJGIoclswXSxyWzFdLHJbMl0sdm9pZCAwLHRoaXMuc3BhdGlhbFJlZmVyZW5jZSk6aSYmIXM/bmV3IGokYihyWzBdLHJbMV0sdm9pZCAwLHJbMl0sdGhpcy5zcGF0aWFsUmVmZXJlbmNlKTpzJiZpP25ldyBqJGIoclswXSxyWzFdLHJbMl0sclszXSx0aGlzLnNwYXRpYWxSZWZlcmVuY2UpOm5ldyBqJGIoclswXSxyWzFdLHRoaXMuc3BhdGlhbFJlZmVyZW5jZSl9aW5zZXJ0UG9pbnQodCxlLHIpe3JldHVybiB0aGlzLl92YWxpZGF0ZUlucHV0cyh0LGUsITApPyhoJG0odGhpcyxyKSxBcnJheS5pc0FycmF5KHIpfHwocj1yLnRvQXJyYXkoKSksdGhpcy5wYXRoc1t0XS5zcGxpY2UoZSwwLHIpLHRoaXMubm90aWZ5Q2hhbmdlKFwicGF0aHNcIiksdGhpcyk6dGhpc31yZW1vdmVQYXRoKHQpe2lmKCF0aGlzLl92YWxpZGF0ZUlucHV0cyh0LG51bGwpKXJldHVybiBudWxsO2NvbnN0IGU9dGhpcy5wYXRocy5zcGxpY2UodCwxKVswXSxyPXRoaXMuc3BhdGlhbFJlZmVyZW5jZSxzPWUubWFwKCh0PT5uZXcgaiRiKHQscikpKTtyZXR1cm4gdGhpcy5ub3RpZnlDaGFuZ2UoXCJwYXRoc1wiKSxzfXJlbW92ZVBvaW50KHQsZSl7aWYoIXRoaXMuX3ZhbGlkYXRlSW5wdXRzKHQsZSkpcmV0dXJuIG51bGw7Y29uc3Qgcj1uZXcgaiRiKHRoaXMucGF0aHNbdF0uc3BsaWNlKGUsMSlbMF0sdGhpcy5zcGF0aWFsUmVmZXJlbmNlKTtyZXR1cm4gdGhpcy5ub3RpZnlDaGFuZ2UoXCJwYXRoc1wiKSxyfXNldFBvaW50KHQsZSxyKXtyZXR1cm4gdGhpcy5fdmFsaWRhdGVJbnB1dHModCxlKT8oaCRtKHRoaXMsciksQXJyYXkuaXNBcnJheShyKXx8KHI9ci50b0FycmF5KCkpLHRoaXMucGF0aHNbdF1bZV09cix0aGlzLm5vdGlmeUNoYW5nZShcInBhdGhzXCIpLHRoaXMpOnRoaXN9X3ZhbGlkYXRlSW5wdXRzKHQsZSxyPSExKXtpZihudWxsPT10fHx0PDB8fHQ+PXRoaXMucGF0aHMubGVuZ3RoKXJldHVybiAhMTtpZihudWxsIT1lKXtjb25zdCBzPXRoaXMucGF0aHNbdF07aWYociYmKGU8MHx8ZT5zLmxlbmd0aCkpcmV0dXJuICExO2lmKCFyJiYoZTwwfHxlPj1zLmxlbmd0aCkpcmV0dXJuICExfXJldHVybiAhMH10b0pTT04odCl7cmV0dXJuIHRoaXMud3JpdGUobnVsbCx0KX19O2UkdShbeSRyKHtyZWFkT25seTohMH0pXSxmJGMucHJvdG90eXBlLFwiY2FjaGVcIixudWxsKSxlJHUoW3kkcih7cmVhZE9ubHk6ITB9KV0sZiRjLnByb3RvdHlwZSxcImV4dGVudFwiLG51bGwpLGUkdShbeSRyKHt0eXBlOltbW051bWJlcl1dXSxqc29uOnt3cml0ZTp7aXNSZXF1aXJlZDohMH19fSldLGYkYy5wcm90b3R5cGUsXCJwYXRoc1wiLHZvaWQgMCksZSR1KFtvJHYoXCJwYXRoc1wiKV0sZiRjLnByb3RvdHlwZSxcIndyaXRlUGF0aHNcIixudWxsKSxmJGM9YyRJPWUkdShbaSRYKFwiZXNyaS5nZW9tZXRyeS5Qb2x5bGluZVwiKV0sZiRjKSxmJGMucHJvdG90eXBlLnRvSlNPTi5pc0RlZmF1bHRUb0pTT049ITA7dmFyIG0kbT1mJGM7XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5jb25zdCBpJEc9byRBKCkoe2VzcmlHZW9tZXRyeVBvaW50OlwicG9pbnRcIixlc3JpR2VvbWV0cnlNdWx0aXBvaW50OlwibXVsdGlwb2ludFwiLGVzcmlHZW9tZXRyeVBvbHlsaW5lOlwicG9seWxpbmVcIixlc3JpR2VvbWV0cnlQb2x5Z29uOlwicG9seWdvblwifSksdCRrPW8kQSgpKHtlc3JpR2VvbWV0cnlQb2ludDpcInBvaW50XCIsZXNyaUdlb21ldHJ5TXVsdGlwb2ludDpcIm11bHRpcG9pbnRcIixlc3JpR2VvbWV0cnlQb2x5bGluZTpcInBvbHlsaW5lXCIsZXNyaUdlb21ldHJ5UG9seWdvbjpcInBvbHlnb25cIixlc3JpR2VvbWV0cnlFbnZlbG9wZTpcImV4dGVudFwiLG1lc2g6XCJtZXNoXCJ9KTtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmZ1bmN0aW9uIHUkbyhvKXtyZXR1cm4gdm9pZCAwIT09by54bWluJiZ2b2lkIDAhPT1vLnltaW4mJnZvaWQgMCE9PW8ueG1heCYmdm9pZCAwIT09by55bWF4fWZ1bmN0aW9uIHMkaShvKXtyZXR1cm4gdm9pZCAwIT09by5wb2ludHN9ZnVuY3Rpb24gbCR3KG8pe3JldHVybiB2b2lkIDAhPT1vLngmJnZvaWQgMCE9PW8ueX1mdW5jdGlvbiBmJGIobyl7cmV0dXJuIHZvaWQgMCE9PW8ucGF0aHN9ZnVuY3Rpb24geSRhKG8pe3JldHVybiB2b2lkIDAhPT1vLnJpbmdzfWZ1bmN0aW9uIHAkUShtKXtyZXR1cm4gbT9tIGluc3RhbmNlb2YgYyRPP206bCR3KG0pP2okYi5mcm9tSlNPTihtKTpmJGIobSk/bSRtLmZyb21KU09OKG0pOnkkYShtKT94JDQuZnJvbUpTT04obSk6cyRpKG0pP20kby5mcm9tSlNPTihtKTp1JG8obSk/TSQzLmZyb21KU09OKG0pOm51bGw6bnVsbH1mdW5jdGlvbiBkJG8obyl7cmV0dXJuIG8/bCR3KG8pP1wiZXNyaUdlb21ldHJ5UG9pbnRcIjpmJGIobyk/XCJlc3JpR2VvbWV0cnlQb2x5bGluZVwiOnkkYShvKT9cImVzcmlHZW9tZXRyeVBvbHlnb25cIjp1JG8obyk/XCJlc3JpR2VvbWV0cnlFbnZlbG9wZVwiOnMkaShvKT9cImVzcmlHZW9tZXRyeU11bHRpcG9pbnRcIjpudWxsOm51bGx9Y29uc3QgdiQ1PXtlc3JpR2VvbWV0cnlQb2ludDpqJGIsZXNyaUdlb21ldHJ5UG9seWxpbmU6bSRtLGVzcmlHZW9tZXRyeVBvbHlnb246eCQ0LGVzcmlHZW9tZXRyeUVudmVsb3BlOk0kMyxlc3JpR2VvbWV0cnlNdWx0aXBvaW50Om0kb307ZnVuY3Rpb24gRyQxKG8pe3JldHVybiBvJiZ2JDVbb118fG51bGx9XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5jb25zdCBpJEY9e2Jhc2U6YyRPLGtleTpcInR5cGVcIix0eXBlTWFwOntleHRlbnQ6TSQzLG11bHRpcG9pbnQ6bSRvLHBvaW50OmokYixwb2x5bGluZTptJG0scG9seWdvbjp4JDR9fTtrJGEoaSRGKTtcblxuLyoqXHJcbiAqIElkZW50aWZpZXMgYSBzdGFuZGFyZCBnZW9ncmFwaHkgbGV2ZWwgaW4gR2VvZW5yaWNobWVudCBkYXRhLlxyXG4gKiBFeGFtcGxlcyBvZiBzdGFuZGFyZCBnZW9ncmFwaHkgbGV2ZWxzIGFyZTogWklQIGNvZGVzIGluIFVTQTsgcHJvdmluY2VzIGluIENhbmFkYTsgZGlzdHJpY3RzIGluIEdCLlxyXG4gKiBGdWxsIGxpc3Qgb2Ygc3RhbmRhcmQgZ2VvZ3JhcGh5IGxldmVscyBpbiBhbGwgY291bnRyaWVzIGNhbiBiZSBvYnRhaW5lZCB3aXRoICdHZW9lbnJpY2htZW50VGFzay5nZXRTdGFuZGFyZEdlb2dyYXBoeUxldmVscycgbWV0aG9kLlxyXG4gKi9cclxuY2xhc3MgR2VvZ3JhcGh5TGV2ZWwge1xyXG4gIC8qKlxyXG4gICAqIENhbiBiZSBjcmVhdGVkIGZyb20gYSBqc29uIG9iamVjdCBvciBieSBwYXNzaW5nIHNvbWUgcGFyYW1ldGVycyBkaXJlY3RseS5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2UpIHtcclxuICAgIGlmIChzb3VyY2UpIHtcclxuICAgICAgdGhpcy5sYXllcklEID0gc291cmNlLmxheWVyIHx8IHNvdXJjZS5sYXllcklEIHx8IG51bGw7XHJcbiAgICAgIHRoaXMuaGllcmFyY2h5ID0gc291cmNlLmhpZXJhcmNoeSB8fCBudWxsO1xyXG4gICAgICB0aGlzLmNvdW50cnlJRCA9IHNvdXJjZS5zb3VyY2VDb3VudHJ5IHx8IHNvdXJjZS5jb3VudHJ5SUQgfHwgbnVsbDtcclxuICAgIH1cclxuICB9XHJcbiAgdG9KU09OKCkge1xyXG4gICAgY29uc3QganNvbiA9IHt9O1xyXG4gICAgaWYgKHRoaXMubGF5ZXJJRCkge1xyXG4gICAgICBqc29uLmxheWVyID0gdGhpcy5sYXllcklEO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuaGllcmFyY2h5KSB7XHJcbiAgICAgIGpzb24uaGllcmFyY2h5ID0gdGhpcy5oaWVyYXJjaHk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5jb3VudHJ5SUQpIHtcclxuICAgICAganNvbi5zb3VyY2VDb3VudHJ5ID0gdGhpcy5jb3VudHJ5SUQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4ganNvbjtcclxuICB9XHJcbiAgc3RhdGljIGZyb21Kc29uQXJyYXkoanNvbkFycmF5KSB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBbXTtcclxuICAgIGlmICghanNvbkFycmF5KSB7XHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGpzb25BcnJheS5sZW5ndGg7IGkrKykge1xyXG4gICAgICBsZXQgb2JqID0ganNvbkFycmF5W2ldO1xyXG4gICAgICBpZiAoIShvYmogaW5zdGFuY2VvZiBHZW9ncmFwaHlMZXZlbCkpIHtcclxuICAgICAgICBvYmogPSBuZXcgR2VvZ3JhcGh5TGV2ZWwob2JqKTtcclxuICAgICAgfVxyXG4gICAgICByZXN1bHQucHVzaChvYmopO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcbiAgc3RhdGljIHRvSnNvbkFycmF5KGFycmF5KSB7XHJcbiAgICBpZiAoIWFycmF5IHx8IGFycmF5Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xyXG4gICAgICByZXN1bHQucHVzaChhcnJheVtpXS50b0pTT04oKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxufVxuXG5jbGFzcyBTdHVkeUFyZWFPcHRpb25zIHtcclxufVxuXG4vKipcclxuICogV2hlbiB1c2VkIHdpdGggcG9pbnQtdHlwZSBzdHVkeSBhcmVhcywgaW5kaWNhdGVzIHRoYXQgZHJpdmUgdGltZSBidWZmZXIgd2lsbCBiZSBidWlsdCBhcm91ZCBnaXZlbiBwb2ludC5cclxuICovXHJcbmNsYXNzIERyaXZlQnVmZmVyIGV4dGVuZHMgU3R1ZHlBcmVhT3B0aW9ucyB7XHJcbiAgLyoqXHJcbiAgICogQ2FuIGJlIGNyZWF0ZWQgZnJvbSBhIGpzb24gb2JqZWN0IG9yIGJ5IHBhc3Npbmcgc29tZSBwYXJhbWV0ZXJzIGRpcmVjdGx5LlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZSkge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIGlmIChzb3VyY2UpIHtcclxuICAgICAgaWYgKHNvdXJjZS5idWZmZXJSYWRpaSkge1xyXG4gICAgICAgIHRoaXMucmFkaWkgPSBzb3VyY2UuYnVmZmVyUmFkaWk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAoc291cmNlLnJhZGl1cykge1xyXG4gICAgICAgIHRoaXMucmFkaWkgPSBbc291cmNlLnJhZGl1c107XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAoc291cmNlLnJhZGlpKSB7XHJcbiAgICAgICAgdGhpcy5yYWRpaSA9IHNvdXJjZS5yYWRpaTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnVuaXRzID0gc291cmNlLmJ1ZmZlclVuaXRzIHx8IHNvdXJjZS51bml0cztcclxuICAgIH1cclxuICAgIC8vIGRlZmF1bHQgcGFyYW1ldGVyc1xyXG4gICAgaWYgKCF0aGlzLnJhZGlpKSB7XHJcbiAgICAgIHRoaXMucmFkaWkgPSBbNV07XHJcbiAgICB9XHJcbiAgICBpZiAoIXRoaXMudW5pdHMpIHtcclxuICAgICAgdGhpcy51bml0cyA9IFwiZXNyaURyaXZlVGltZVVuaXRzTWludXRlc1wiO1xyXG4gICAgfVxyXG4gIH1cclxuICB0b0pTT04oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBhcmVhVHlwZTogXCJEcml2ZVRpbWVCdWZmZXJcIixcclxuICAgICAgYnVmZmVyVW5pdHM6IHRoaXMudW5pdHMsXHJcbiAgICAgIGJ1ZmZlclJhZGlpOiB0aGlzLnJhZGlpICYmIHRoaXMucmFkaWkuc2xpY2UoKVxyXG4gICAgfTtcclxuICB9XHJcbn1cblxuLyoqXHJcbiAqICBJbmRpY2F0ZXMgdGhhdCBzdHVkeSBhcmVhIHdpbGwgYmUgdXNlZCB0byByZXRyaXZlIGludGVyc2VjdGluZyBzdGFuZGFyZCBnZW9ncmFwaGllcyBhbmQgRW5yaWNobWVudCBjYWxjdWxhdGlvbnMgd2lsbCBiZSBwZXJmb3JtZWQgZm9yIHRob3NlIHN0YW5kYXJkIGdlb2dyYXBoaWVzIHJhdGhlciB0aGFuIHRoZSBvcmlnaW5hbCBzdHVkeSBhcmVhLlxyXG4gKlxyXG4gKiBGb3IgZXhhbXBsZSwgaWYgc3R1ZHkgYXJlYSBpcyBhIHBvaW50IHRoZW4gdGhlIGRlZmF1bHQgRW5yaWNobWVudCBiZWhhdmlvdXIgaXMgdG8gYnVpbGQgMS1taWxlIGNpcmNsZSBhcm91bmQgdGhhdCBwb2ludDsgdXNpbmcgSW50ZXJzZWN0aW5nR2VvZ3JhcGhpZXMgYXMgc3R1ZHkgYXJlYSBvcHRpb25zIGNoYW5nZXMgdGhlIGJlaGF2aW91ciB0byByZXRyaWV2ZSBlLmcuIFpJUCBjb2RlIGludGVyc2VjdGluZyB0aGF0IHBvaW50LlxyXG4gKi9cclxuY2xhc3MgSW50ZXJzZWN0aW5nR2VvZ3JhcGhpZXMgZXh0ZW5kcyBTdHVkeUFyZWFPcHRpb25zIHtcclxuICAvKipcclxuICAgKiBDYW4gYmUgY3JlYXRlZCBmcm9tIGEganNvbiBvYmplY3Qgb3IgYnkgcGFzc2luZyBzb21lIHBhcmFtZXRlcnMgZGlyZWN0bHkuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlKSB7XHJcbiAgICBzdXBlcigpO1xyXG4gICAgbGV0IGxldmVscztcclxuICAgIGlmIChzb3VyY2UpIHtcclxuICAgICAgbGV2ZWxzID0gc291cmNlLmludGVyc2VjdGluZ0dlb2dyYXBoaWVzIHx8IHNvdXJjZS5sZXZlbHMgfHwgc291cmNlLmdlb2dyYXBoeUxldmVscztcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBsZXZlbHMgPSBbeyBsYXllcjogXCJBZG1pbjJcIiB9XTtcclxuICAgIH1cclxuICAgIHRoaXMuZ2VvZ3JhcGh5TGV2ZWxzID0gR2VvZ3JhcGh5TGV2ZWwuZnJvbUpzb25BcnJheShsZXZlbHMpO1xyXG4gIH1cclxuICB0b0pTT04oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBhcmVhVHlwZTogXCJTdGFuZGFyZEdlb2dyYXBoeVwiLFxyXG4gICAgICBpbnRlcnNlY3RpbmdHZW9ncmFwaGllczogR2VvZ3JhcGh5TGV2ZWwudG9Kc29uQXJyYXkodGhpcy5nZW9ncmFwaHlMZXZlbHMpXHJcbiAgICB9O1xyXG4gIH1cclxufVxuXG4vKipcclxuICogV2hlbiB1c2VkIHdpdGggcG9pbnQtdHlwZSBvciBsaW5lLXR5cGUgc3R1ZHkgYXJlYXMsIGluZGljYXRlcyB0aGF0IGJ1ZmZlciB3aWxsIGJlIGJ1aWx0IGFyb3VkIGdpdmVuIGZlYXR1cmVcclxuICovXHJcbmNsYXNzIFJpbmdCdWZmZXIgZXh0ZW5kcyBTdHVkeUFyZWFPcHRpb25zIHtcclxuICAvKipcclxuICAgKiBDYW4gYmUgY3JlYXRlZCBmcm9tIGEganNvbiBvYmplY3Qgb3IgYnkgcGFzc2luZyBzb21lIHBhcmFtZXRlcnMgZGlyZWN0bHkuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlKSB7XHJcbiAgICBzdXBlcigpO1xyXG4gICAgaWYgKHNvdXJjZSkge1xyXG4gICAgICBpZiAoc291cmNlLmJ1ZmZlclJhZGlpKSB7XHJcbiAgICAgICAgdGhpcy5yYWRpaSA9IHNvdXJjZS5idWZmZXJSYWRpaTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmIChzb3VyY2UucmFkaXVzKSB7XHJcbiAgICAgICAgdGhpcy5yYWRpaSA9IFtzb3VyY2UucmFkaXVzXTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmIChzb3VyY2UucmFkaWkpIHtcclxuICAgICAgICB0aGlzLnJhZGlpID0gc291cmNlLnJhZGlpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMudW5pdHMgPSBzb3VyY2UuYnVmZmVyVW5pdHMgfHwgc291cmNlLnVuaXRzO1xyXG4gICAgfVxyXG4gICAgLy8gZGVmYXVsdCBwYXJhbWV0ZXJzXHJcbiAgICBpZiAoIXRoaXMucmFkaWkpIHtcclxuICAgICAgdGhpcy5yYWRpaSA9IFsxXTtcclxuICAgIH1cclxuICAgIGlmICghdGhpcy51bml0cykge1xyXG4gICAgICB0aGlzLnVuaXRzID0gXCJlc3JpTWlsZXNcIjtcclxuICAgIH1cclxuICB9XHJcbiAgdG9KU09OKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgYXJlYVR5cGU6IFwiUmluZ0J1ZmZlclwiLFxyXG4gICAgICBidWZmZXJVbml0czogdGhpcy51bml0cyxcclxuICAgICAgYnVmZmVyUmFkaWk6IHRoaXMucmFkaWkgJiYgdGhpcy5yYWRpaS5zbGljZSgpXHJcbiAgICB9O1xyXG4gIH1cclxufVxuXG4vLyBnZW9lbnJpY2htZW50LnRhc2tzXHJcbi8qKlxyXG4gKiBVdGlsaXR5IGZ1bmN0aW9uIHRvIGRlc2VyaWFsaXplIHN0dWR5IGFyZWEgb3B0aW9ucyBmcm9tIEpTT04uXHJcbiAqL1xyXG5jb25zdCBzdHVkeUFyZWFPcHRpb25zRnJvbUpzb24gPSBmdW5jdGlvbiAoanNvbikge1xyXG4gIGlmIChqc29uKSB7XHJcbiAgICBzd2l0Y2ggKGpzb24uYXJlYVR5cGUpIHtcclxuICAgICAgY2FzZSBcIkRyaXZlVGltZUJ1ZmZlclwiOlxyXG4gICAgICAgIHJldHVybiBuZXcgRHJpdmVCdWZmZXIoanNvbik7XHJcbiAgICAgIGNhc2UgXCJTdGFuZGFyZEdlb2dyYXBoeVwiOlxyXG4gICAgICAgIHJldHVybiBuZXcgSW50ZXJzZWN0aW5nR2VvZ3JhcGhpZXMoanNvbik7XHJcbiAgICB9XHJcbiAgICAvKlxyXG4gICAgUHJvYmFibHkgc29tZSBsZWdhY3kgZm9ybWF0XHJcbiAgICBzd2l0Y2ggKGpzb24udHlwZSkge1xyXG4gICAgICBjYXNlIFwiRHJpdmVUaW1lXCI6XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEcml2ZUJ1ZmZlcihqc29uKTtcclxuICAgICAgY2FzZSBcIlN0ZEdlb1wiOlxyXG4gICAgICAgIHJldHVybiBuZXcgSW50ZXJzZWN0aW5nR2VvZ3JhcGhpZXMoanNvbik7XHJcbiAgICB9XHJcbiAgICAqL1xyXG4gICAgcmV0dXJuIG5ldyBSaW5nQnVmZmVyKGpzb24pO1xyXG4gIH1cclxuICByZXR1cm4gbmV3IFJpbmdCdWZmZXIoKTtcclxufTtcblxuLy8gZ2VvZW5yaWNobWVudC50YXNrc1xyXG4vKipcclxuICogUmVwcmVzZW50cyBhIHN0dWR5IGFyZWEuIFRoaXMgY2xhc3MgaXMgYWJzdHJhY3QsIHNlZSBHZW9tZXRyeVN0dWR5QXJlYSwgU3RhbmRhcmRHZW9ncmFwaHlTdHVkeUFyZWEgYW5kIEFkZHJlc3NTdHVkeUFyZWEgaW5zdGVhZC5cclxuICovXHJcbmNsYXNzIFN0dWR5QXJlYSB7XHJcbiAgLyoqXHJcbiAgICogQ2FuIGJlIGNyZWF0ZWQgZnJvbSBhIGpzb24gb2JqZWN0IG9yIGJ5IHBhc3Npbmcgc29tZSBwYXJhbWV0ZXJzIGRpcmVjdGx5LlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZSkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgcmVzcG9uc2Ugd2lsbCBhbHNvIGluY2x1ZGUgYWN0dWFsIHN0dWR5IGFyZWEgZ2VvbWV0cnkuXHJcbiAgICAgKiBGb3IgZXhhbXBsZSwgaWYgaW5wdXQgc3R1ZHkgYXJlYSBpcyBhIGxpbmUsIHRoZSByZXNwb25zZSB3aWxsIGlubHVkZSBidWZmZXIgcG9seWdvbiBidWlsdCBhcm91bmQgdGhlIGxpbmUuXHJcbiAgICAgKiBEZWZhdWx0cyB0byBmYWxzZS4gU2V0dGluZ3MgRW5yaWNoUGFyYW1ldGVycy5yZXR1cm5HZW9tZXRyeSB0byB0cnVlIHdpbGwgdGFrZSBwcmVjZWRlbmNlIG92ZXIgdGhpcyB2YWx1ZSBhbmQgZ2VvbWV0cnkgd2lsbCBiZSByZXR1cm5lZCBhbnl3YXkuXHJcbiAgICAgKi9cclxuICAgIHRoaXMucmV0dXJuR2VvbWV0cnkgPSBmYWxzZTtcclxuICAgIGlmIChzb3VyY2UpIHtcclxuICAgICAgaWYgKHNvdXJjZS5hdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVzID0gc291cmNlLmF0dHJpYnV0ZXM7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHNvdXJjZS5hcmVhVHlwZSkge1xyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHN0dWR5QXJlYU9wdGlvbnNGcm9tSnNvbihzb3VyY2UpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKHNvdXJjZS5vcHRpb25zIGluc3RhbmNlb2YgU3R1ZHlBcmVhT3B0aW9ucykge1xyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHNvdXJjZS5vcHRpb25zO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMucmV0dXJuR2VvbWV0cnkgPSAhIXNvdXJjZS5yZXR1cm5HZW9tZXRyeTtcclxuICAgICAgdGhpcy5jb21wYXJpc29uR2VvZ3JhcGh5TGV2ZWxzID0gR2VvZ3JhcGh5TGV2ZWwuZnJvbUpzb25BcnJheShzb3VyY2UuY29tcGFyaXNvbkdlb2dyYXBoeUxldmVscyB8fCBzb3VyY2UuY29tcGFyaXNvbkxldmVscyk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmNvbXBhcmlzb25HZW9ncmFwaHlMZXZlbHMgPSB0aGlzLmNvbXBhcmlzb25HZW9ncmFwaHlMZXZlbHMgfHwgW107XHJcbiAgfVxyXG4gIGdldEdlb21UeXBlKCkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkXCIpOyAvLyBhYnN0cmFjdFxyXG4gIH1cclxuICAvKipcclxuICAgKiBDb252ZXJ0cyB0aGlzIHN0dWR5IGFyZWEgdG8gc2VyaWFsaXphYmxlIEpTT04uXHJcbiAgICovXHJcbiAgdG9KU09OKCkge1xyXG4gICAgY29uc3QganNvbiA9IHRoaXMub3B0aW9ucyA/IHRoaXMub3B0aW9ucy50b0pTT04oKSA6IHt9O1xyXG4gICAgaWYgKHRoaXMuYXR0cmlidXRlcykge1xyXG4gICAgICBqc29uLmF0dHJpYnV0ZXMgPSB0aGlzLmF0dHJpYnV0ZXM7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5yZXR1cm5HZW9tZXRyeSkge1xyXG4gICAgICBqc29uLnJldHVybkdlb21ldHJ5ID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIGNvbnN0IGNvbXBhcmlzb25MZXZlbHMgPSBHZW9ncmFwaHlMZXZlbC50b0pzb25BcnJheSh0aGlzLmNvbXBhcmlzb25HZW9ncmFwaHlMZXZlbHMpO1xyXG4gICAgaWYgKGNvbXBhcmlzb25MZXZlbHMpIHtcclxuICAgICAganNvbi5jb21wYXJpc29uTGV2ZWxzID0gY29tcGFyaXNvbkxldmVscztcclxuICAgIH1cclxuICAgIHJldHVybiBqc29uO1xyXG4gIH1cclxufVxuXG4vKipcclxuICogU3R1ZHkgYXJlYSBkZWZpbmVkIGJ5IGFkZHJlc3MuXHJcbiAqL1xyXG5jbGFzcyBBZGRyZXNzU3R1ZHlBcmVhIGV4dGVuZHMgU3R1ZHlBcmVhIHtcclxuICAvKipcclxuICAgKiBDYW4gYmUgY3JlYXRlZCBmcm9tIGEganNvbiBvYmplY3Qgb3IgYnkgcGFzc2luZyBzb21lIHBhcmFtZXRlcnMgZGlyZWN0bHkuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlKSB7XHJcbiAgICBzdXBlcihzb3VyY2UpO1xyXG4gICAgLyoqXHJcbiAgICAgKiBPYmplY3Qgd2l0aCBhZGRyZXNzIGZpZWxkcy5cclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiAxLiB7IHRleHQ6IFwiMzgwIE5ldyBZb3JrIFN0LiBSZWRsYW5kcywgQ0EgOTIzNzNcIiB9XHJcbiAgICAgKiAyLiB7IEFkZHJlc3M6IFwiMzgwIE5ldyBZb3JrIFN0LlwiLCBBZG1pbjE6IFwiUmVkbGFuZHNcIiwgQWRtaW4yOiBcIkNBXCIsIFBvc3RhbDogXCI5MjM3M1wiLCBDb3VudHJ5Q29kZTogXCJVU0FcIiB9XHJcbiAgICAgKiAzLiB7IHRleHQ6IFwiMTIgQ29uY29yZGUgUGxhY2UgVG9yb250byBPTiBNM0MgM1I4XCIsIHNvdXJjZUNvdW50cnk6IFwiQ2FuYWRhXCIgfVxyXG4gICAgICovXHJcbiAgICB0aGlzLmFkZHJlc3MgPSBudWxsO1xyXG4gICAgdGhpcy5hZGRyZXNzID0gc291cmNlICYmIHNvdXJjZS5hZGRyZXNzO1xyXG4gIH1cclxuICBnZXRHZW9tVHlwZSgpIHtcclxuICAgIHJldHVybiBcInBvaW50XCI7XHJcbiAgfVxyXG4gIHRvSlNPTigpIHtcclxuICAgIGNvbnN0IGpzb24gPSBzdXBlci50b0pTT04oKTtcclxuICAgIGpzb24uYWRkcmVzcyA9IHRoaXMuYWRkcmVzcztcclxuICAgIHJldHVybiBqc29uO1xyXG4gIH1cclxufVxuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuY29uc3QgYyRIPW5ldyB0JEkoe2luaGVyaXRlZDpcImluaGVyaXRlZFwiLGNvZGVkVmFsdWU6XCJjb2RlZC12YWx1ZVwiLHJhbmdlOlwicmFuZ2VcIn0pO2xldCBpJEU9Y2xhc3MgZXh0ZW5kcyBhJEJ7Y29uc3RydWN0b3Iocil7c3VwZXIociksdGhpcy5uYW1lPW51bGwsdGhpcy50eXBlPW51bGw7fX07ZSR1KFt5JHIoe3R5cGU6U3RyaW5nLGpzb246e3dyaXRlOiEwfX0pXSxpJEUucHJvdG90eXBlLFwibmFtZVwiLHZvaWQgMCksZSR1KFtyJHYoYyRIKV0saSRFLnByb3RvdHlwZSxcInR5cGVcIix2b2lkIDApLGkkRT1lJHUoW2kkWChcImVzcmkubGF5ZXJzLnN1cHBvcnQuRG9tYWluXCIpXSxpJEUpO3ZhciBhJHc9aSRFO1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xudmFyIHQkajtsZXQgcCRQPXQkaj1jbGFzcyBleHRlbmRzIGEkQntjb25zdHJ1Y3RvcihyKXtzdXBlcihyKSx0aGlzLm5hbWU9bnVsbCx0aGlzLmNvZGU9bnVsbDt9Y2xvbmUoKXtyZXR1cm4gbmV3IHQkaih7bmFtZTp0aGlzLm5hbWUsY29kZTp0aGlzLmNvZGV9KX19O2UkdShbeSRyKHt0eXBlOlN0cmluZyxqc29uOnt3cml0ZTohMH19KV0scCRQLnByb3RvdHlwZSxcIm5hbWVcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOltTdHJpbmcsTnVtYmVyXSxqc29uOnt3cml0ZTohMH19KV0scCRQLnByb3RvdHlwZSxcImNvZGVcIix2b2lkIDApLHAkUD10JGo9ZSR1KFtpJFgoXCJlc3JpLmxheWVycy5zdXBwb3J0LkNvZGVkVmFsdWVcIildLHAkUCk7dmFyIGMkRz1wJFA7XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG52YXIgYSR2O2xldCBpJEQ9YSR2PWNsYXNzIGV4dGVuZHMgYSR3e2NvbnN0cnVjdG9yKG8pe3N1cGVyKG8pLHRoaXMuY29kZWRWYWx1ZXM9bnVsbCx0aGlzLnR5cGU9XCJjb2RlZC12YWx1ZVwiO31nZXROYW1lKG8pe2xldCBlPW51bGw7aWYodGhpcy5jb2RlZFZhbHVlcyl7Y29uc3Qgcj1TdHJpbmcobyk7dGhpcy5jb2RlZFZhbHVlcy5zb21lKChvPT4oU3RyaW5nKG8uY29kZSk9PT1yJiYoZT1vLm5hbWUpLCEhZSkpKTt9cmV0dXJuIGV9Y2xvbmUoKXtyZXR1cm4gbmV3IGEkdih7Y29kZWRWYWx1ZXM6eSR2KHRoaXMuY29kZWRWYWx1ZXMpLG5hbWU6dGhpcy5uYW1lfSl9fTtlJHUoW3kkcih7dHlwZTpbYyRHXSxqc29uOnt3cml0ZTohMH19KV0saSRELnByb3RvdHlwZSxcImNvZGVkVmFsdWVzXCIsdm9pZCAwKSxlJHUoW3Ikdih7Y29kZWRWYWx1ZTpcImNvZGVkLXZhbHVlXCJ9KV0saSRELnByb3RvdHlwZSxcInR5cGVcIix2b2lkIDApLGkkRD1hJHY9ZSR1KFtpJFgoXCJlc3JpLmxheWVycy5zdXBwb3J0LkNvZGVkVmFsdWVEb21haW5cIildLGkkRCk7dmFyIHUkbj1pJEQ7XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG52YXIgdCRpO2xldCBwJE89dCRpPWNsYXNzIGV4dGVuZHMgYSR3e2NvbnN0cnVjdG9yKHIpe3N1cGVyKHIpLHRoaXMudHlwZT1cImluaGVyaXRlZFwiO31jbG9uZSgpe3JldHVybiBuZXcgdCRpfX07ZSR1KFtyJHYoe2luaGVyaXRlZDpcImluaGVyaXRlZFwifSldLHAkTy5wcm90b3R5cGUsXCJ0eXBlXCIsdm9pZCAwKSxwJE89dCRpPWUkdShbaSRYKFwiZXNyaS5sYXllcnMuc3VwcG9ydC5Jbmhlcml0ZWREb21haW5cIildLHAkTyk7dmFyIGkkQz1wJE87XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG52YXIgcyRoO2xldCBpJEI9cyRoPWNsYXNzIGV4dGVuZHMgYSR3e2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMubWF4VmFsdWU9bnVsbCx0aGlzLm1pblZhbHVlPW51bGwsdGhpcy50eXBlPVwicmFuZ2VcIjt9Y2xvbmUoKXtyZXR1cm4gbmV3IHMkaCh7bWF4VmFsdWU6dGhpcy5tYXhWYWx1ZSxtaW5WYWx1ZTp0aGlzLm1pblZhbHVlLG5hbWU6dGhpcy5uYW1lfSl9fTtlJHUoW3kkcih7dHlwZTpOdW1iZXIsanNvbjp7dHlwZTpbTnVtYmVyXSxyZWFkOntzb3VyY2U6XCJyYW5nZVwiLHJlYWRlcjooZSxyKT0+ci5yYW5nZSYmci5yYW5nZVsxXX0sd3JpdGU6e2VuYWJsZWQ6ITEsb3ZlcnJpZGVQb2xpY3koKXtyZXR1cm4ge2VuYWJsZWQ6bnVsbCE9dGhpcy5tYXhWYWx1ZSYmbnVsbD09dGhpcy5taW5WYWx1ZX19LHRhcmdldDpcInJhbmdlXCIsd3JpdGVyKGUscixvKXtyW29dPVt0aGlzLm1pblZhbHVlfHwwLGVdO319fX0pXSxpJEIucHJvdG90eXBlLFwibWF4VmFsdWVcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOk51bWJlcixqc29uOnt0eXBlOltOdW1iZXJdLHJlYWQ6e3NvdXJjZTpcInJhbmdlXCIscmVhZGVyOihlLHIpPT5yLnJhbmdlJiZyLnJhbmdlWzBdfSx3cml0ZTp7dGFyZ2V0OlwicmFuZ2VcIix3cml0ZXIoZSxyLG8pe3Jbb109W2UsdGhpcy5tYXhWYWx1ZXx8MF07fX19fSldLGkkQi5wcm90b3R5cGUsXCJtaW5WYWx1ZVwiLHZvaWQgMCksZSR1KFtyJHYoe3JhbmdlOlwicmFuZ2VcIn0pXSxpJEIucHJvdG90eXBlLFwidHlwZVwiLHZvaWQgMCksaSRCPXMkaD1lJHUoW2kkWChcImVzcmkubGF5ZXJzLnN1cHBvcnQuUmFuZ2VEb21haW5cIildLGkkQik7dmFyIG4kdj1pJEI7XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG52YXIgbyRhO2Z1bmN0aW9uIHQkaChlLG4pe3N3aXRjaChlLnR5cGUpe2Nhc2VcInJhbmdlXCI6e2NvbnN0IGE9XCJyYW5nZVwiaW4gZT9lLnJhbmdlWzBdOmUubWluVmFsdWUscj1cInJhbmdlXCJpbiBlP2UucmFuZ2VbMV06ZS5tYXhWYWx1ZTtpZigrbjxhfHwrbj5yKXJldHVybiBvJGEuVkFMVUVfT1VUX09GX1JBTkdFO2JyZWFrfWNhc2VcImNvZGVkLXZhbHVlXCI6Y2FzZVwiY29kZWRWYWx1ZVwiOmlmKG51bGw9PWUuY29kZWRWYWx1ZXN8fGUuY29kZWRWYWx1ZXMuZXZlcnkoKGU9Pm51bGw9PWV8fGUuY29kZSE9PW4pKSlyZXR1cm4gbyRhLklOVkFMSURfQ09ERURfVkFMVUV9cmV0dXJuIG51bGx9IWZ1bmN0aW9uKGUpe2UuVkFMVUVfT1VUX09GX1JBTkdFPVwiZG9tYWluLXZhbGlkYXRpb24tZXJyb3I6OnZhbHVlLW91dC1vZi1yYW5nZVwiLGUuSU5WQUxJRF9DT0RFRF9WQUxVRT1cImRvbWFpbi12YWxpZGF0aW9uLWVycm9yOjppbnZhbGlkLWNvZGVkLXZhbHVlXCI7fShvJGF8fChvJGE9e30pKTtjb25zdCB1JG09e2tleTpcInR5cGVcIixiYXNlOmEkdyx0eXBlTWFwOntyYW5nZTpuJHYsXCJjb2RlZC12YWx1ZVwiOnUkbixpbmhlcml0ZWQ6aSRDfX07ZnVuY3Rpb24gZCRuKGUpe2lmKCFlfHwhZS50eXBlKXJldHVybiBudWxsO3N3aXRjaChlLnR5cGUpe2Nhc2VcInJhbmdlXCI6cmV0dXJuIG4kdi5mcm9tSlNPTihlKTtjYXNlXCJjb2RlZFZhbHVlXCI6cmV0dXJuIHUkbi5mcm9tSlNPTihlKTtjYXNlXCJpbmhlcml0ZWRcIjpyZXR1cm4gaSRDLmZyb21KU09OKGUpfXJldHVybiBudWxsfVxuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xubGV0IHQkZzthc3luYyBmdW5jdGlvbiBhJHUoKXtyZXR1cm4gdCRnfHwodCRnPShhc3luYygpPT57Y29uc3QgZT1hd2FpdCBpbXBvcnQoJy4vYXJjYWRlVXRpbHMtZDFjNjlkY2MuanMnKS50aGVuKGZ1bmN0aW9uIChuKSB7IHJldHVybiBuLmFxOyB9KTtyZXR1cm4gYXdhaXQgZS5hcmNhZGUubG9hZCgpLHthcmNhZGU6ZS5hcmNhZGUsYXJjYWRlVXRpbHM6ZSxEaWN0aW9uYXJ5OmUuRGljdGlvbmFyeSxGZWF0dXJlOmUuYXJjYWRlRmVhdHVyZX19KSgpKSx0JGd9Y29uc3QgcyRnPShlLHIsdCk9Pm8kOS5jcmVhdGUoZSxyLHQsbnVsbCxbXCIkZmVhdHVyZVwiXSksaSRBPShlLHIsdCk9Pm8kOS5jcmVhdGUoZSxyLHQsbnVsbCxbXCIkZmVhdHVyZVwiLFwiJHZpZXdcIl0pLG4kdT0oZSxyLHQsYSk9Pm8kOS5jcmVhdGUoZSxyLHQsYSxbXCIkZmVhdHVyZVwiLFwiJHZpZXdcIl0pO2NsYXNzIG8kOXtjb25zdHJ1Y3RvcihlLHIsdCxhLHMsaSxjLG4pe3RoaXMuc2NyaXB0PWUsdGhpcy5ldmFsdWF0ZT1zLHRoaXMuZmllbGRzPWMsdGhpcy5fc3ludGF4VHJlZT1hLHRoaXMuX2FyY2FkZT1yLHRoaXMuX2FyY2FkZURpY3Rpb25hcnk9dCx0aGlzLl9hcmNhZGVGZWF0dXJlPWksdGhpcy5fc3BhdGlhbFJlZmVyZW5jZT1uLHRoaXMuX3JlZmVyZW5jZXNHZW9tZXRyeT1yLnNjcmlwdFRvdWNoZXNHZW9tZXRyeSh0aGlzLl9zeW50YXhUcmVlKSx0aGlzLl9yZWZlcmVuY2VzU2NhbGU9dGhpcy5fYXJjYWRlLnJlZmVyZW5jZXNNZW1iZXIodGhpcy5fc3ludGF4VHJlZSxcInNjYWxlXCIpO31zdGF0aWMgYXN5bmMgY3JlYXRlKHQscyxpLGMsbixsKXtjb25zdHthcmNhZGU6dSxGZWF0dXJlOnAsRGljdGlvbmFyeTpkfT1hd2FpdCBhJHUoKSxmPWskNC5mcm9tSlNPTihzKSxoPXUucGFyc2VTY3JpcHQodCxsKSxtPW4ucmVkdWNlKCgoZSxyKT0+KHsuLi5lLFtyXTpudWxsfSkpLHt9KTtsZXQgeT1udWxsO3IkQShjKSYmKHk9bmV3IGQoYykseS5pbW11dGFibGU9ITAsbS4kY29uZmlnPW51bGwpO2NvbnN0IF89dS5zY3JpcHRVc2VzR2VvbWV0cnlFbmdpbmUoaCkmJnUuZW5hYmxlR2VvbWV0cnlTdXBwb3J0KCksRj11LnNjcmlwdFVzZXNGZWF0dXJlU2V0KGgpJiZ1LmVuYWJsZUZlYXR1cmVTZXRTdXBwb3J0KCksdz11LnNjcmlwdElzQXN5bmMoaCkmJnUuZW5hYmxlQXN5bmNTdXBwb3J0KCksUz17dmFyczptLHNwYXRpYWxSZWZlcmVuY2U6Zix1c2VBc3luYzohIXd9LGI9bmV3IGQ7Yi5pbW11dGFibGU9ITEsYi5zZXRGaWVsZChcInNjYWxlXCIsMCk7Y29uc3QgJD11LmNvbXBpbGVTY3JpcHQoaCxTKSx4PWU9PihcIiR2aWV3XCJpbiBlJiZlLiR2aWV3JiYoYi5zZXRGaWVsZChcInNjYWxlXCIsZS4kdmlldy5zY2FsZSksZS4kdmlldz1iKSx5JiYoZS4kY29uZmlnPXkpLCQoe3ZhcnM6ZSxzcGF0aWFsUmVmZXJlbmNlOmZ9KSk7cmV0dXJuIGF3YWl0IFByb21pc2UuYWxsKFtfLEYsd10pLG5ldyBvJDkodCx1LGQsaCx4LG5ldyBwLGksZil9cmVwdXJwb3NlRmVhdHVyZShlKXtyZXR1cm4gZS5nZW9tZXRyeSYmIWUuZ2VvbWV0cnkuc3BhdGlhbFJlZmVyZW5jZSYmKGUuZ2VvbWV0cnkuc3BhdGlhbFJlZmVyZW5jZT10aGlzLl9zcGF0aWFsUmVmZXJlbmNlKSx0aGlzLl9hcmNhZGVGZWF0dXJlLnJlcHVycG9zZUZyb21HcmFwaGljTGlrZU9iamVjdChlLmdlb21ldHJ5LGUuYXR0cmlidXRlcyx7ZmllbGRzOnRoaXMuZmllbGRzfSksdGhpcy5fYXJjYWRlRmVhdHVyZX1yZXB1cnBvc2VBZGFwdGVyKGUpe3JldHVybiB0aGlzLl9hcmNhZGVGZWF0dXJlLnJlcHVycG9zZUZyb21BZGFwdGVyKGUse2ZpZWxkczp0aGlzLmZpZWxkc30pLHRoaXMuX2FyY2FkZUZlYXR1cmV9Y3JlYXRlRGljdGlvbmFyeSgpe3JldHVybiBuZXcgdGhpcy5fYXJjYWRlRGljdGlvbmFyeX1yZWZlcmVuY2VzTWVtYmVyKGUpe3JldHVybiB0aGlzLl9hcmNhZGUucmVmZXJlbmNlc01lbWJlcih0aGlzLl9zeW50YXhUcmVlLGUpfXJlZmVyZW5jZXNGdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fYXJjYWRlLnJlZmVyZW5jZXNGdW5jdGlvbih0aGlzLl9zeW50YXhUcmVlLGUpfXJlZmVyZW5jZXNHZW9tZXRyeSgpe3JldHVybiB0aGlzLl9yZWZlcmVuY2VzR2VvbWV0cnl9cmVmZXJlbmNlc1NjYWxlKCl7cmV0dXJuIHRoaXMuX3JlZmVyZW5jZXNTY2FsZX1leHRyYWN0RmllbGRMaXRlcmFscyhlKXtyZXR1cm4gdGhpcy5fYXJjYWRlLmV4dHJhY3RGaWVsZExpdGVyYWxzKHRoaXMuX3N5bnRheFRyZWUsZSl9fVxuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuY29uc3QgdSRsPVtcImZpZWxkXCIsXCJmaWVsZDJcIixcImZpZWxkM1wiLFwibm9ybWFsaXphdGlvbkZpZWxkXCIsXCJyb3RhdGlvbkluZm8uZmllbGRcIixcInByb3BvcnRpb25hbFN5bWJvbEluZm8uZmllbGRcIixcInByb3BvcnRpb25hbFN5bWJvbEluZm8ubm9ybWFsaXphdGlvbkZpZWxkXCIsXCJjb2xvckluZm8uZmllbGRcIixcImNvbG9ySW5mby5ub3JtYWxpemF0aW9uRmllbGRcIl0sZiRhPVtcImZpZWxkXCIsXCJub3JtYWxpemF0aW9uRmllbGRcIl07ZnVuY3Rpb24gYyRGKGUsbil7aWYobnVsbCE9ZSYmbnVsbCE9bilmb3IoY29uc3QgaSBvZiBBcnJheS5pc0FycmF5KGUpP2U6W2VdKWlmKGQkbSh1JGwsaSxuKSxcInZpc3VhbFZhcmlhYmxlc1wiaW4gaSYmaS52aXN1YWxWYXJpYWJsZXMpZm9yKGNvbnN0IGUgb2YgaS52aXN1YWxWYXJpYWJsZXMpZCRtKGYkYSxlLG4pO31mdW5jdGlvbiBkJG0oaSx0LHIpe2lmKGkpZm9yKGNvbnN0IG8gb2YgaSl7Y29uc3QgaT10JE4obyx0KSxsPWkmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGkmJlQkNChyLGkpO2wmJm8kSShvLGwubmFtZSx0KTt9fWZ1bmN0aW9uIG0kbChlLG4pe2lmKG51bGwhPWUmJm51bGwhPW4paWYoXCJzdGFydEZpZWxkXCJpbiBlKXtjb25zdCBpPVQkNChuLGUuc3RhcnRGaWVsZCksdD1UJDQobixlLmVuZEZpZWxkKTtlLnN0YXJ0RmllbGQ9aSYmaS5uYW1lfHxudWxsLGUuZW5kRmllbGQ9dCYmdC5uYW1lfHxudWxsO31lbHNlIHtjb25zdCBpPVQkNChuLGUuc3RhcnRUaW1lRmllbGQpLHQ9VCQ0KG4sZS5lbmRUaW1lRmllbGQpO2Uuc3RhcnRUaW1lRmllbGQ9aSYmaS5uYW1lfHxudWxsLGUuZW5kVGltZUZpZWxkPXQmJnQubmFtZXx8bnVsbDt9fWNvbnN0IHAkTj1uZXcgU2V0O2Z1bmN0aW9uIHkkOShlLG4pe3JldHVybiBlJiZuPyhwJE4uY2xlYXIoKSxnJDUocCROLGUsbiksQXJyYXkuZnJvbShwJE4pLnNvcnQoKSk6W119ZnVuY3Rpb24gZyQ1KGUsbixpKXtpZihpKWlmKG4mJm4ubGVuZ3RoKWlmKGkuaW5jbHVkZXMoXCIqXCIpKWZvcihjb25zdHtuYW1lOnR9b2YgbillLmFkZCh0KTtlbHNlIGZvcihjb25zdCB0IG9mIGkpRiQxKGUsbix0KTtlbHNlIHtpZihpLmluY2x1ZGVzKFwiKlwiKSlyZXR1cm4gZS5jbGVhcigpLHZvaWQgZS5hZGQoXCIqXCIpO2Zvcihjb25zdCBuIG9mIGkpZS5hZGQobik7fX1mdW5jdGlvbiBGJDEoZSxuLGkpe2lmKG4mJm4ubGVuZ3RoKXtjb25zdCB0PVQkNChuLGkpO3QmJmUuYWRkKHQubmFtZSk7fWVsc2UgXCJzdHJpbmdcIj09dHlwZW9mIGkmJmUuYWRkKGkpO31mdW5jdGlvbiBUJDQoZSxuKXtpZihcInN0cmluZ1wiIT10eXBlb2YgbilyZXR1cm4gbnVsbDtpZihudWxsIT1lKXtuPW4udG9Mb3dlckNhc2UoKTtmb3IoY29uc3QgaSBvZiBlKWlmKGkmJmkubmFtZS50b0xvd2VyQ2FzZSgpPT09bilyZXR1cm4gaX1yZXR1cm4gbnVsbH1mdW5jdGlvbiBoJGkoZSxuKXtpZighZXx8IW58fFwic3RyaW5nXCIhPXR5cGVvZiBuKXJldHVybiAhMTtuPW4udG9Mb3dlckNhc2UoKTtmb3IoY29uc3QgaSBvZiBlKWlmKGkmJmkubmFtZS50b0xvd2VyQ2FzZSgpPT09bilyZXR1cm4gITA7cmV0dXJuICExfWFzeW5jIGZ1bmN0aW9uIHckNChlLG4saSl7aWYoIWkpcmV0dXJuO2NvbnN0e2FyY2FkZVV0aWxzOnR9PWF3YWl0IGEkdSgpLHI9dC5leHRyYWN0RmllbGROYW1lcyhpKTtmb3IoY29uc3QgbyBvZiByKUYkMShlLG4sbyk7fWZ1bmN0aW9uIFMkNih7ZGlzcGxheUZpZWxkOmUsZmllbGRzOm59KXtyZXR1cm4gZXx8KG4mJm4ubGVuZ3RoP0EkMyhuLFwibmFtZS1vci10aXRsZVwiKXx8QSQzKG4sXCJ1bmlxdWUtaWRlbnRpZmllclwiKXx8QSQzKG4sXCJ0eXBlLW9yLWNhdGVnb3J5XCIpfHx4JDMobik6bnVsbCl9ZnVuY3Rpb24geCQzKGUpe2Zvcihjb25zdCBuIG9mIGUpe2lmKCFufHwhbi5uYW1lKWNvbnRpbnVlO2NvbnN0IGU9bi5uYW1lLnRvTG93ZXJDYXNlKCk7aWYoZS5pbmRleE9mKFwibmFtZVwiKT4tMXx8ZS5pbmRleE9mKFwidGl0bGVcIik+LTEpcmV0dXJuIG4ubmFtZX1yZXR1cm4gbnVsbH1mdW5jdGlvbiBBJDMoZSxuKXtmb3IoY29uc3QgaSBvZiBlKWlmKGkmJmkudmFsdWVUeXBlJiZpLnZhbHVlVHlwZT09PW4pcmV0dXJuIGkubmFtZTtyZXR1cm4gbnVsbH1mdW5jdGlvbiBqJDkoZSl7Y29uc3Qgbj1lLmRlZmF1bHRWYWx1ZTtyZXR1cm4gdm9pZCAwIT09biYmVyhlLG4pP246ZS5udWxsYWJsZT9udWxsOnZvaWQgMH1mdW5jdGlvbiB6KGUpe3JldHVybiBcIm51bWJlclwiPT10eXBlb2YgZSYmIWlzTmFOKGUpJiZpc0Zpbml0ZShlKX1mdW5jdGlvbiBrJDMoZSl7cmV0dXJuIG51bGw9PT1lfHx6KGUpfWNvbnN0IFAkMj1cImlzSW50ZWdlclwiaW4gTnVtYmVyP051bWJlci5pc0ludGVnZXI6ZT0+XCJudW1iZXJcIj09dHlwZW9mIGUmJmlzRmluaXRlKGUpJiZNYXRoLmZsb29yKGUpPT09ZTtmdW5jdGlvbiBSJDMoZSl7cmV0dXJuIG51bGw9PT1lfHxQJDIoZSl9ZnVuY3Rpb24gRyhlKXtyZXR1cm4gbnVsbCE9ZSYmXCJzdHJpbmdcIj09dHlwZW9mIGV9ZnVuY3Rpb24gcSQxKGUpe3JldHVybiBudWxsPT09ZXx8RyhlKX1mdW5jdGlvbiBNJDIoKXtyZXR1cm4gITB9ZnVuY3Rpb24gVyhlLG4pe2xldCBpO3N3aXRjaChlLnR5cGUpe2Nhc2VcImRhdGVcIjpjYXNlXCJpbnRlZ2VyXCI6Y2FzZVwibG9uZ1wiOmNhc2VcInNtYWxsLWludGVnZXJcIjpjYXNlXCJlc3JpRmllbGRUeXBlRGF0ZVwiOmNhc2VcImVzcmlGaWVsZFR5cGVJbnRlZ2VyXCI6Y2FzZVwiZXNyaUZpZWxkVHlwZUxvbmdcIjpjYXNlXCJlc3JpRmllbGRUeXBlU21hbGxJbnRlZ2VyXCI6aT1lLm51bGxhYmxlP1IkMzpQJDI7YnJlYWs7Y2FzZVwiZG91YmxlXCI6Y2FzZVwic2luZ2xlXCI6Y2FzZVwiZXNyaUZpZWxkVHlwZVNpbmdsZVwiOmNhc2VcImVzcmlGaWVsZFR5cGVEb3VibGVcIjppPWUubnVsbGFibGU/ayQzOno7YnJlYWs7Y2FzZVwic3RyaW5nXCI6Y2FzZVwiZXNyaUZpZWxkVHlwZVN0cmluZ1wiOmk9ZS5udWxsYWJsZT9xJDE6RzticmVhaztkZWZhdWx0Omk9TSQyO31yZXR1cm4gMT09PWFyZ3VtZW50cy5sZW5ndGg/aTppKG4pfWNvbnN0IFk9W1wiaW50ZWdlclwiLFwic21hbGwtaW50ZWdlclwiLFwic2luZ2xlXCIsXCJkb3VibGVcIl0sSiQxPW5ldyBTZXQoWy4uLlksXCJlc3JpRmllbGRUeXBlSW50ZWdlclwiLFwiZXNyaUZpZWxkVHlwZVNtYWxsSW50ZWdlclwiLFwiZXNyaUZpZWxkVHlwZVNpbmdsZVwiLFwiZXNyaUZpZWxkVHlwZURvdWJsZVwiXSk7ZnVuY3Rpb24gWChlKXtyZXR1cm4gbnVsbCE9ZSYmSiQxLmhhcyhlLnR5cGUpfWZ1bmN0aW9uIEIoZSl7cmV0dXJuIG51bGwhPWUmJihcInN0cmluZ1wiPT09ZS50eXBlfHxcImVzcmlGaWVsZFR5cGVTdHJpbmdcIj09PWUudHlwZSl9dmFyIFEsWjtmdW5jdGlvbiBlZShlKXtyZXR1cm4gbnVsbD09ZXx8XCJudW1iZXJcIj09dHlwZW9mIGUmJmlzTmFOKGUpP251bGw6ZX1mdW5jdGlvbiBuZShlLG4pe3JldHVybiBlLm51bGxhYmxlJiZudWxsPT09bj9udWxsOlgoZSkmJiFpZShlLnR5cGUsTnVtYmVyKG4pKT9RLk9VVF9PRl9SQU5HRTpXKGUsbik/ZS5kb21haW4/dCRoKGUuZG9tYWluLG4pOm51bGw6Wi5JTlZBTElEX1RZUEV9ZnVuY3Rpb24gaWUoZSxuKXtjb25zdCBpPVwic3RyaW5nXCI9PXR5cGVvZiBlP3JlKGUpOmU7cmV0dXJuICEhaSYmKGkuaXNJbnRlZ2VyP1AkMihuKSYmbj49aS5taW4mJm48PWkubWF4Om4+PWkubWluJiZuPD1pLm1heCl9ZnVuY3Rpb24gcmUoZSl7c3dpdGNoKGUpe2Nhc2VcImVzcmlGaWVsZFR5cGVTbWFsbEludGVnZXJcIjpjYXNlXCJzbWFsbC1pbnRlZ2VyXCI6cmV0dXJuIGxlO2Nhc2VcImVzcmlGaWVsZFR5cGVJbnRlZ2VyXCI6Y2FzZVwiaW50ZWdlclwiOnJldHVybiBhZTtjYXNlXCJlc3JpRmllbGRUeXBlU2luZ2xlXCI6Y2FzZVwic2luZ2xlXCI6cmV0dXJuIHNlO2Nhc2VcImVzcmlGaWVsZFR5cGVEb3VibGVcIjpjYXNlXCJkb3VibGVcIjpyZXR1cm4gdWV9fSFmdW5jdGlvbihlKXtlLk9VVF9PRl9SQU5HRT1cIm51bWVyaWMtcmFuZ2UtdmFsaWRhdGlvbi1lcnJvcjo6b3V0LW9mLXJhbmdlXCI7fShRfHwoUT17fSkpLGZ1bmN0aW9uKGUpe2UuSU5WQUxJRF9UWVBFPVwidHlwZS12YWxpZGF0aW9uLWVycm9yOjppbnZhbGlkLXR5cGVcIjt9KFp8fChaPXt9KSk7Y29uc3QgbGU9e21pbjotMzI3NjgsbWF4OjMyNzY3LGlzSW50ZWdlcjohMH0sYWU9e21pbjotMjE0NzQ4MzY0OCxtYXg6MjE0NzQ4MzY0Nyxpc0ludGVnZXI6ITB9LHNlPXttaW46LTM0ZTM3LG1heDoxMmUzNyxpc0ludGVnZXI6ITF9LHVlPXttaW46LU51bWJlci5NQVhfVkFMVUUsbWF4Ok51bWJlci5NQVhfVkFMVUUsaXNJbnRlZ2VyOiExfTtmdW5jdGlvbiBmZShlLG4saSl7c3dpdGNoKGUpe2Nhc2UgbyRhLklOVkFMSURfQ09ERURfVkFMVUU6cmV0dXJuIGBWYWx1ZSAke2l9IGlzIG5vdCBpbiB0aGUgY29kZWQgZG9tYWluIC0gZmllbGQ6ICR7bi5uYW1lfSwgZG9tYWluOiAke0pTT04uc3RyaW5naWZ5KG4uZG9tYWluKX1gO2Nhc2UgbyRhLlZBTFVFX09VVF9PRl9SQU5HRTpyZXR1cm4gYFZhbHVlICR7aX0gaXMgb3V0IG9mIHRoZSByYW5nZSBvZiB2YWxpZCB2YWx1ZXMgLSBmaWVsZDogJHtuLm5hbWV9LCBkb21haW46ICR7SlNPTi5zdHJpbmdpZnkobi5kb21haW4pfWA7Y2FzZSBaLklOVkFMSURfVFlQRTpyZXR1cm4gYFZhbHVlICR7aX0gaXMgbm90IGEgdmFsaWQgdmFsdWUgZm9yIHRoZSBmaWVsZCB0eXBlIC0gZmllbGQ6ICR7bi5uYW1lfSwgdHlwZTogJHtuLnR5cGV9LCBudWxsYWJsZTogJHtuLm51bGxhYmxlfWA7Y2FzZSBRLk9VVF9PRl9SQU5HRTp7Y29uc3R7bWluOmUsbWF4OnR9PXJlKG4udHlwZSk7cmV0dXJuIGBWYWx1ZSAke2l9IGlzIG91dCBvZiByYW5nZSBmb3IgdGhlIG51bWJlciB0eXBlIC0gZmllbGQ6ICR7bi5uYW1lfSwgdHlwZTogJHtuLnR5cGV9LCB2YWx1ZSByYW5nZSBpcyAke2V9IHRvICR7dH1gfX19XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5sZXQgcyRmPWNsYXNzIGV4dGVuZHMgYSRCe2NvbnN0cnVjdG9yKHIpe3N1cGVyKHIpLHRoaXMudHlwZT1udWxsO319O2UkdShbeSRyKHt0eXBlOltcImF0dGFjaG1lbnRzXCIsXCJjdXN0b21cIixcImZpZWxkc1wiLFwibWVkaWFcIixcInRleHRcIl0scmVhZE9ubHk6ITAsanNvbjp7cmVhZDohMSx3cml0ZTohMH19KV0scyRmLnByb3RvdHlwZSxcInR5cGVcIix2b2lkIDApLHMkZj1lJHUoW2kkWChcImVzcmkucG9wdXAuY29udGVudC5Db250ZW50XCIpXSxzJGYpO3ZhciBwJE09cyRmO1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xudmFyIHMkZTtsZXQgaSR6PXMkZT1jbGFzcyBleHRlbmRzIHAkTXtjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KSx0aGlzLmRlc2NyaXB0aW9uPW51bGwsdGhpcy5kaXNwbGF5VHlwZT1udWxsLHRoaXMudGl0bGU9bnVsbCx0aGlzLnR5cGU9XCJhdHRhY2htZW50c1wiO31jbG9uZSgpe3JldHVybiBuZXcgcyRlKHtkZXNjcmlwdGlvbjp0aGlzLmRlc2NyaXB0aW9uLGRpc3BsYXlUeXBlOnRoaXMuZGlzcGxheVR5cGUsdGl0bGU6dGhpcy50aXRsZX0pfX07ZSR1KFt5JHIoe2pzb246e3dyaXRlOiEwLG9yaWdpbnM6e1wid2ViLXNjZW5lXCI6e3dyaXRlOiExLHJlYWQ6ITF9fX19KV0saSR6LnByb3RvdHlwZSxcImRlc2NyaXB0aW9uXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpbXCJwcmV2aWV3XCIsXCJsaXN0XCJdLGpzb246e3dyaXRlOiEwfX0pXSxpJHoucHJvdG90eXBlLFwiZGlzcGxheVR5cGVcIix2b2lkIDApLGUkdShbeSRyKHtqc29uOnt3cml0ZTohMCxvcmlnaW5zOntcIndlYi1zY2VuZVwiOnt3cml0ZTohMSxyZWFkOiExfX19fSldLGkkei5wcm90b3R5cGUsXCJ0aXRsZVwiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6W1wiYXR0YWNobWVudHNcIl0scmVhZE9ubHk6ITAsanNvbjp7cmVhZDohMSx3cml0ZTohMH19KV0saSR6LnByb3RvdHlwZSxcInR5cGVcIix2b2lkIDApLGkkej1zJGU9ZSR1KFtpJFgoXCJlc3JpLnBvcHVwLmNvbnRlbnQuQXR0YWNobWVudHNDb250ZW50XCIpXSxpJHopO3ZhciBwJEw9aSR6O1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xudmFyIHAkSztsZXQgaSR5PXAkSz1jbGFzcyBleHRlbmRzIHAkTXtjb25zdHJ1Y3RvcihyKXtzdXBlcihyKSx0aGlzLmNyZWF0b3I9bnVsbCx0aGlzLmRlc3Ryb3llcj1udWxsLHRoaXMub3V0RmllbGRzPW51bGwsdGhpcy50eXBlPVwiY3VzdG9tXCI7fWNsb25lKCl7cmV0dXJuIG5ldyBwJEsoe2NyZWF0b3I6dGhpcy5jcmVhdG9yLGRlc3Ryb3llcjp0aGlzLmRlc3Ryb3llcixvdXRGaWVsZHM6QXJyYXkuaXNBcnJheSh0aGlzLm91dEZpZWxkcyk/eSR2KHRoaXMub3V0RmllbGRzKTpudWxsfSl9fTtlJHUoW3kkcigpXSxpJHkucHJvdG90eXBlLFwiY3JlYXRvclwiLHZvaWQgMCksZSR1KFt5JHIoKV0saSR5LnByb3RvdHlwZSxcImRlc3Ryb3llclwiLHZvaWQgMCksZSR1KFt5JHIoKV0saSR5LnByb3RvdHlwZSxcIm91dEZpZWxkc1wiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6W1wiY3VzdG9tXCJdLHJlYWRPbmx5OiEwfSldLGkkeS5wcm90b3R5cGUsXCJ0eXBlXCIsdm9pZCAwKSxpJHk9cCRLPWUkdShbaSRYKFwiZXNyaS5wb3B1cC5jb250ZW50LkN1c3RvbUNvbnRlbnRcIildLGkkeSk7dmFyIGMkRT1pJHk7XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5jb25zdCBhJHQ9byRBKCkoe3Nob3J0RGF0ZTpcInNob3J0LWRhdGVcIixzaG9ydERhdGVTaG9ydFRpbWU6XCJzaG9ydC1kYXRlLXNob3J0LXRpbWVcIixzaG9ydERhdGVTaG9ydFRpbWUyNDpcInNob3J0LWRhdGUtc2hvcnQtdGltZS0yNFwiLHNob3J0RGF0ZUxvbmdUaW1lOlwic2hvcnQtZGF0ZS1sb25nLXRpbWVcIixzaG9ydERhdGVMb25nVGltZTI0Olwic2hvcnQtZGF0ZS1sb25nLXRpbWUtMjRcIixzaG9ydERhdGVMRTpcInNob3J0LWRhdGUtbGVcIixzaG9ydERhdGVMRVNob3J0VGltZTpcInNob3J0LWRhdGUtbGUtc2hvcnQtdGltZVwiLHNob3J0RGF0ZUxFU2hvcnRUaW1lMjQ6XCJzaG9ydC1kYXRlLWxlLXNob3J0LXRpbWUtMjRcIixzaG9ydERhdGVMRUxvbmdUaW1lOlwic2hvcnQtZGF0ZS1sZS1sb25nLXRpbWVcIixzaG9ydERhdGVMRUxvbmdUaW1lMjQ6XCJzaG9ydC1kYXRlLWxlLWxvbmctdGltZS0yNFwiLGxvbmdNb250aERheVllYXI6XCJsb25nLW1vbnRoLWRheS15ZWFyXCIsbG9uZ01vbnRoRGF5WWVhclNob3J0VGltZTpcImxvbmctbW9udGgtZGF5LXllYXItc2hvcnQtdGltZVwiLGxvbmdNb250aERheVllYXJTaG9ydFRpbWUyNDpcImxvbmctbW9udGgtZGF5LXllYXItc2hvcnQtdGltZS0yNFwiLGxvbmdNb250aERheVllYXJMb25nVGltZTpcImxvbmctbW9udGgtZGF5LXllYXItbG9uZy10aW1lXCIsbG9uZ01vbnRoRGF5WWVhckxvbmdUaW1lMjQ6XCJsb25nLW1vbnRoLWRheS15ZWFyLWxvbmctdGltZS0yNFwiLGRheVNob3J0TW9udGhZZWFyOlwiZGF5LXNob3J0LW1vbnRoLXllYXJcIixkYXlTaG9ydE1vbnRoWWVhclNob3J0VGltZTpcImRheS1zaG9ydC1tb250aC15ZWFyLXNob3J0LXRpbWVcIixkYXlTaG9ydE1vbnRoWWVhclNob3J0VGltZTI0OlwiZGF5LXNob3J0LW1vbnRoLXllYXItc2hvcnQtdGltZS0yNFwiLGRheVNob3J0TW9udGhZZWFyTG9uZ1RpbWU6XCJkYXktc2hvcnQtbW9udGgteWVhci1sb25nLXRpbWVcIixkYXlTaG9ydE1vbnRoWWVhckxvbmdUaW1lMjQ6XCJkYXktc2hvcnQtbW9udGgteWVhci1sb25nLXRpbWUtMjRcIixsb25nRGF0ZTpcImxvbmctZGF0ZVwiLGxvbmdEYXRlU2hvcnRUaW1lOlwibG9uZy1kYXRlLXNob3J0LXRpbWVcIixsb25nRGF0ZVNob3J0VGltZTI0OlwibG9uZy1kYXRlLXNob3J0LXRpbWUtMjRcIixsb25nRGF0ZUxvbmdUaW1lOlwibG9uZy1kYXRlLWxvbmctdGltZVwiLGxvbmdEYXRlTG9uZ1RpbWUyNDpcImxvbmctZGF0ZS1sb25nLXRpbWUtMjRcIixsb25nTW9udGhZZWFyOlwibG9uZy1tb250aC15ZWFyXCIsc2hvcnRNb250aFllYXI6XCJzaG9ydC1tb250aC15ZWFyXCIseWVhcjpcInllYXJcIn0pO2EkdC50b0pTT04uYmluZChhJHQpO2EkdC5mcm9tSlNPTi5iaW5kKGEkdCk7XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5jb25zdCByJGE9e3llYXI6XCJudW1lcmljXCIsbW9udGg6XCJudW1lcmljXCIsZGF5OlwibnVtZXJpY1wifSxuJHQ9e3llYXI6XCJudW1lcmljXCIsbW9udGg6XCJsb25nXCIsZGF5OlwibnVtZXJpY1wifSxhJHM9e3llYXI6XCJudW1lcmljXCIsbW9udGg6XCJzaG9ydFwiLGRheTpcIm51bWVyaWNcIn0saCRoPXt5ZWFyOlwibnVtZXJpY1wiLG1vbnRoOlwibG9uZ1wiLHdlZWtkYXk6XCJsb25nXCIsZGF5OlwibnVtZXJpY1wifSxtJGs9e2hvdXI6XCJudW1lcmljXCIsbWludXRlOlwibnVtZXJpY1wifSxpJHg9ey4uLm0kayxzZWNvbmQ6XCJudW1lcmljXCJ9LHMkZD17XCJzaG9ydC1kYXRlXCI6ciRhLFwic2hvcnQtZGF0ZS1zaG9ydC10aW1lXCI6ey4uLnIkYSwuLi5tJGt9LFwic2hvcnQtZGF0ZS1zaG9ydC10aW1lLTI0XCI6ey4uLnIkYSwuLi5tJGssaG91cjEyOiExfSxcInNob3J0LWRhdGUtbG9uZy10aW1lXCI6ey4uLnIkYSwuLi5pJHh9LFwic2hvcnQtZGF0ZS1sb25nLXRpbWUtMjRcIjp7Li4uciRhLC4uLmkkeCxob3VyMTI6ITF9LFwic2hvcnQtZGF0ZS1sZVwiOnIkYSxcInNob3J0LWRhdGUtbGUtc2hvcnQtdGltZVwiOnsuLi5yJGEsLi4ubSRrfSxcInNob3J0LWRhdGUtbGUtc2hvcnQtdGltZS0yNFwiOnsuLi5yJGEsLi4ubSRrLGhvdXIxMjohMX0sXCJzaG9ydC1kYXRlLWxlLWxvbmctdGltZVwiOnsuLi5yJGEsLi4uaSR4fSxcInNob3J0LWRhdGUtbGUtbG9uZy10aW1lLTI0XCI6ey4uLnIkYSwuLi5pJHgsaG91cjEyOiExfSxcImxvbmctbW9udGgtZGF5LXllYXJcIjpuJHQsXCJsb25nLW1vbnRoLWRheS15ZWFyLXNob3J0LXRpbWVcIjp7Li4ubiR0LC4uLm0ka30sXCJsb25nLW1vbnRoLWRheS15ZWFyLXNob3J0LXRpbWUtMjRcIjp7Li4ubiR0LC4uLm0kayxob3VyMTI6ITF9LFwibG9uZy1tb250aC1kYXkteWVhci1sb25nLXRpbWVcIjp7Li4ubiR0LC4uLmkkeH0sXCJsb25nLW1vbnRoLWRheS15ZWFyLWxvbmctdGltZS0yNFwiOnsuLi5uJHQsLi4uaSR4LGhvdXIxMjohMX0sXCJkYXktc2hvcnQtbW9udGgteWVhclwiOmEkcyxcImRheS1zaG9ydC1tb250aC15ZWFyLXNob3J0LXRpbWVcIjp7Li4uYSRzLC4uLm0ka30sXCJkYXktc2hvcnQtbW9udGgteWVhci1zaG9ydC10aW1lLTI0XCI6ey4uLmEkcywuLi5tJGssaG91cjEyOiExfSxcImRheS1zaG9ydC1tb250aC15ZWFyLWxvbmctdGltZVwiOnsuLi5hJHMsLi4uaSR4fSxcImRheS1zaG9ydC1tb250aC15ZWFyLWxvbmctdGltZS0yNFwiOnsuLi5hJHMsLi4uaSR4LGhvdXIxMjohMX0sXCJsb25nLWRhdGVcIjpoJGgsXCJsb25nLWRhdGUtc2hvcnQtdGltZVwiOnsuLi5oJGgsLi4ubSRrfSxcImxvbmctZGF0ZS1zaG9ydC10aW1lLTI0XCI6ey4uLmgkaCwuLi5tJGssaG91cjEyOiExfSxcImxvbmctZGF0ZS1sb25nLXRpbWVcIjp7Li4uaCRoLC4uLmkkeH0sXCJsb25nLWRhdGUtbG9uZy10aW1lLTI0XCI6ey4uLmgkaCwuLi5pJHgsaG91cjEyOiExfSxcImxvbmctbW9udGgteWVhclwiOnttb250aDpcImxvbmdcIix5ZWFyOlwibnVtZXJpY1wifSxcInNob3J0LW1vbnRoLXllYXJcIjp7bW9udGg6XCJzaG9ydFwiLHllYXI6XCJudW1lcmljXCJ9LHllYXI6e3llYXI6XCJudW1lcmljXCJ9LFwic2hvcnQtdGltZVwiOm0kayxcImxvbmctdGltZVwiOmkkeH0sbCR2PW8kQSgpKHtzaG9ydERhdGU6XCJzaG9ydC1kYXRlXCIsc2hvcnREYXRlU2hvcnRUaW1lOlwic2hvcnQtZGF0ZS1zaG9ydC10aW1lXCIsc2hvcnREYXRlU2hvcnRUaW1lMjQ6XCJzaG9ydC1kYXRlLXNob3J0LXRpbWUtMjRcIixzaG9ydERhdGVMb25nVGltZTpcInNob3J0LWRhdGUtbG9uZy10aW1lXCIsc2hvcnREYXRlTG9uZ1RpbWUyNDpcInNob3J0LWRhdGUtbG9uZy10aW1lLTI0XCIsc2hvcnREYXRlTEU6XCJzaG9ydC1kYXRlLWxlXCIsc2hvcnREYXRlTEVTaG9ydFRpbWU6XCJzaG9ydC1kYXRlLWxlLXNob3J0LXRpbWVcIixzaG9ydERhdGVMRVNob3J0VGltZTI0Olwic2hvcnQtZGF0ZS1sZS1zaG9ydC10aW1lLTI0XCIsc2hvcnREYXRlTEVMb25nVGltZTpcInNob3J0LWRhdGUtbGUtbG9uZy10aW1lXCIsc2hvcnREYXRlTEVMb25nVGltZTI0Olwic2hvcnQtZGF0ZS1sZS1sb25nLXRpbWUtMjRcIixsb25nTW9udGhEYXlZZWFyOlwibG9uZy1tb250aC1kYXkteWVhclwiLGxvbmdNb250aERheVllYXJTaG9ydFRpbWU6XCJsb25nLW1vbnRoLWRheS15ZWFyLXNob3J0LXRpbWVcIixsb25nTW9udGhEYXlZZWFyU2hvcnRUaW1lMjQ6XCJsb25nLW1vbnRoLWRheS15ZWFyLXNob3J0LXRpbWUtMjRcIixsb25nTW9udGhEYXlZZWFyTG9uZ1RpbWU6XCJsb25nLW1vbnRoLWRheS15ZWFyLWxvbmctdGltZVwiLGxvbmdNb250aERheVllYXJMb25nVGltZTI0OlwibG9uZy1tb250aC1kYXkteWVhci1sb25nLXRpbWUtMjRcIixkYXlTaG9ydE1vbnRoWWVhcjpcImRheS1zaG9ydC1tb250aC15ZWFyXCIsZGF5U2hvcnRNb250aFllYXJTaG9ydFRpbWU6XCJkYXktc2hvcnQtbW9udGgteWVhci1zaG9ydC10aW1lXCIsZGF5U2hvcnRNb250aFllYXJTaG9ydFRpbWUyNDpcImRheS1zaG9ydC1tb250aC15ZWFyLXNob3J0LXRpbWUtMjRcIixkYXlTaG9ydE1vbnRoWWVhckxvbmdUaW1lOlwiZGF5LXNob3J0LW1vbnRoLXllYXItbG9uZy10aW1lXCIsZGF5U2hvcnRNb250aFllYXJMb25nVGltZTI0OlwiZGF5LXNob3J0LW1vbnRoLXllYXItbG9uZy10aW1lLTI0XCIsbG9uZ0RhdGU6XCJsb25nLWRhdGVcIixsb25nRGF0ZVNob3J0VGltZTpcImxvbmctZGF0ZS1zaG9ydC10aW1lXCIsbG9uZ0RhdGVTaG9ydFRpbWUyNDpcImxvbmctZGF0ZS1zaG9ydC10aW1lLTI0XCIsbG9uZ0RhdGVMb25nVGltZTpcImxvbmctZGF0ZS1sb25nLXRpbWVcIixsb25nRGF0ZUxvbmdUaW1lMjQ6XCJsb25nLWRhdGUtbG9uZy10aW1lLTI0XCIsbG9uZ01vbnRoWWVhcjpcImxvbmctbW9udGgteWVhclwiLHNob3J0TW9udGhZZWFyOlwic2hvcnQtbW9udGgteWVhclwiLHllYXI6XCJ5ZWFyXCJ9KTtsJHYudG9KU09OLmJpbmQobCR2KTtsJHYuZnJvbUpTT04uYmluZChsJHYpO2NvbnN0IHUkaz17YXI6XCJhci11LW51LWxhdG4tY2EtZ3JlZ29yeVwifTtsZXQgYyREPW5ldyBXZWFrTWFwLEQkMj1zJGRbXCJzaG9ydC1kYXRlLXNob3J0LXRpbWVcIl07ZnVuY3Rpb24gVCQzKHQpe2NvbnN0IGU9dHx8RCQyO2lmKCFjJEQuaGFzKGUpKXtjb25zdCB0PWMkMTUoKSxyPXUka1tjJDE1KCldfHx0O2MkRC5zZXQoZSxuZXcgSW50bC5EYXRlVGltZUZvcm1hdChyLGUpKTt9cmV0dXJuIGMkRC5nZXQoZSl9ZnVuY3Rpb24gUyQ1KHQpe3JldHVybiBzJGRbdF18fG51bGx9ZnVuY3Rpb24gTCQ0KHQsbyl7cmV0dXJuIFQkMyhvKS5mb3JtYXQodCl9aCRCKCgoKT0+e2MkRD1uZXcgV2Vha01hcCxEJDI9cyRkW1wic2hvcnQtZGF0ZS1zaG9ydC10aW1lXCJdO30pKTtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmNvbnN0IGEkcj17YXI6XCJhci11LW51LWxhdG5cIn07bGV0IGUkZD1uZXcgV2Vha01hcCxvJDg9e307ZnVuY3Rpb24gaSR3KHIpe2NvbnN0IGk9cnx8byQ4O2lmKCFlJGQuaGFzKGkpKXtjb25zdCB0PWMkMTUoKSxvPWEkcltjJDE1KCldfHx0O2UkZC5zZXQoaSxuZXcgSW50bC5OdW1iZXJGb3JtYXQobyxyKSk7fXJldHVybiBtJEYoZSRkLmdldChpKSl9ZnVuY3Rpb24gdSRqKHQ9e30pe2NvbnN0IG49e307cmV0dXJuIG51bGwhPXQuZGlnaXRTZXBhcmF0b3ImJihuLnVzZUdyb3VwaW5nPXQuZGlnaXRTZXBhcmF0b3IpLG51bGwhPXQucGxhY2VzJiYobi5taW5pbXVtRnJhY3Rpb25EaWdpdHM9bi5tYXhpbXVtRnJhY3Rpb25EaWdpdHM9dC5wbGFjZXMpLG59ZnVuY3Rpb24gbSRqKHQsbil7cmV0dXJuIGkkdyhuKS5mb3JtYXQodCl9aCRCKCgoKT0+e2UkZD1uZXcgV2Vha01hcCxvJDg9e307fSkpO1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xudmFyIGQkbDtsZXQgbCR1PWQkbD1jbGFzcyBleHRlbmRzIGEkQntjb25zdHJ1Y3RvcihyKXtzdXBlcihyKSx0aGlzLmRhdGVGb3JtYXQ9bnVsbCx0aGlzLmRpZ2l0U2VwYXJhdG9yPSExLHRoaXMucGxhY2VzPW51bGw7fWNsb25lKCl7cmV0dXJuIG5ldyBkJGwoe2RhdGVGb3JtYXQ6dGhpcy5kYXRlRm9ybWF0LGRpZ2l0U2VwYXJhdG9yOnRoaXMuZGlnaXRTZXBhcmF0b3IscGxhY2VzOnRoaXMucGxhY2VzfSl9Zm9ybWF0KHIpe3JldHVybiB0aGlzLmRhdGVGb3JtYXQ/TCQ0KHIsUyQ1KHRoaXMuZGF0ZUZvcm1hdCkpOm0kaihyLHUkaih0aGlzKSl9fTtlJHUoW3IkdihhJHQpXSxsJHUucHJvdG90eXBlLFwiZGF0ZUZvcm1hdFwiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6Qm9vbGVhbixqc29uOnt3cml0ZTohMH19KV0sbCR1LnByb3RvdHlwZSxcImRpZ2l0U2VwYXJhdG9yXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpOJDUsanNvbjp7d3JpdGU6ITB9fSldLGwkdS5wcm90b3R5cGUsXCJwbGFjZXNcIix2b2lkIDApLGwkdT1kJGw9ZSR1KFtpJFgoXCJlc3JpLnBvcHVwLnN1cHBvcnQuRmllbGRJbmZvRm9ybWF0XCIpXSxsJHUpO3ZhciBuJHM9bCR1O1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xudmFyIGEkcTtsZXQgbiRyPWEkcT1jbGFzcyBleHRlbmRzIGEkQntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KSx0aGlzLmZpZWxkTmFtZT1udWxsLHRoaXMuZm9ybWF0PW51bGwsdGhpcy5pc0VkaXRhYmxlPSExLHRoaXMubGFiZWw9bnVsbCx0aGlzLnN0cmluZ0ZpZWxkT3B0aW9uPVwidGV4dC1ib3hcIix0aGlzLnN0YXRpc3RpY1R5cGU9bnVsbCx0aGlzLnRvb2x0aXA9bnVsbCx0aGlzLnZpc2libGU9ITA7fWNsb25lKCl7cmV0dXJuIG5ldyBhJHEoe2ZpZWxkTmFtZTp0aGlzLmZpZWxkTmFtZSxmb3JtYXQ6dGhpcy5mb3JtYXQ/eSR2KHRoaXMuZm9ybWF0KTpudWxsLGlzRWRpdGFibGU6dGhpcy5pc0VkaXRhYmxlLGxhYmVsOnRoaXMubGFiZWwsc3RyaW5nRmllbGRPcHRpb246dGhpcy5zdHJpbmdGaWVsZE9wdGlvbixzdGF0aXN0aWNUeXBlOnRoaXMuc3RhdGlzdGljVHlwZSx0b29sdGlwOnRoaXMudG9vbHRpcCx2aXNpYmxlOnRoaXMudmlzaWJsZX0pfX07ZSR1KFt5JHIoe3R5cGU6U3RyaW5nLGpzb246e3dyaXRlOiEwfX0pXSxuJHIucHJvdG90eXBlLFwiZmllbGROYW1lXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpuJHMsanNvbjp7d3JpdGU6ITB9fSldLG4kci5wcm90b3R5cGUsXCJmb3JtYXRcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOkJvb2xlYW4sanNvbjp7d3JpdGU6ITAsZGVmYXVsdDohMX19KV0sbiRyLnByb3RvdHlwZSxcImlzRWRpdGFibGVcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOlN0cmluZyxqc29uOnt3cml0ZTohMH19KV0sbiRyLnByb3RvdHlwZSxcImxhYmVsXCIsdm9pZCAwKSxlJHUoW3IkdihuZXcgdCRJKHtyaWNodGV4dDpcInJpY2gtdGV4dFwiLHRleHRhcmVhOlwidGV4dC1hcmVhXCIsdGV4dGJveDpcInRleHQtYm94XCJ9KSx7ZGVmYXVsdDpcInRleHQtYm94XCJ9KV0sbiRyLnByb3RvdHlwZSxcInN0cmluZ0ZpZWxkT3B0aW9uXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpbXCJjb3VudFwiLFwic3VtXCIsXCJtaW5cIixcIm1heFwiLFwiYXZnXCIsXCJzdGRkZXZcIixcInZhclwiXSxqc29uOnt3cml0ZTohMH19KV0sbiRyLnByb3RvdHlwZSxcInN0YXRpc3RpY1R5cGVcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOlN0cmluZyxqc29uOnt3cml0ZTohMH19KV0sbiRyLnByb3RvdHlwZSxcInRvb2x0aXBcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOkJvb2xlYW4sanNvbjp7d3JpdGU6ITB9fSldLG4kci5wcm90b3R5cGUsXCJ2aXNpYmxlXCIsdm9pZCAwKSxuJHI9YSRxPWUkdShbaSRYKFwiZXNyaS5wb3B1cC5GaWVsZEluZm9cIildLG4kcik7dmFyIGMkQz1uJHI7XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG52YXIgbiRxO2xldCBsJHQ9biRxPWNsYXNzIGV4dGVuZHMgcCRNe2NvbnN0cnVjdG9yKG8pe3N1cGVyKG8pLHRoaXMuZGVzY3JpcHRpb249bnVsbCx0aGlzLmZpZWxkSW5mb3M9bnVsbCx0aGlzLnRpdGxlPW51bGwsdGhpcy50eXBlPVwiZmllbGRzXCI7fXdyaXRlRmllbGRJbmZvcyhvLHIpe3IuZmllbGRJbmZvcz1vJiZvLm1hcCgobz0+by50b0pTT04oKSkpO31jbG9uZSgpe3JldHVybiBuZXcgbiRxKHtkZXNjcmlwdGlvbjp0aGlzLmRlc2NyaXB0aW9uLGZpZWxkSW5mb3M6QXJyYXkuaXNBcnJheSh0aGlzLmZpZWxkSW5mb3MpP3kkdih0aGlzLmZpZWxkSW5mb3MpOm51bGwsdGl0bGU6dGhpcy50aXRsZX0pfX07ZSR1KFt5JHIoe2pzb246e3dyaXRlOiEwLG9yaWdpbnM6e1wid2ViLXNjZW5lXCI6e3dyaXRlOiExLHJlYWQ6ITF9fX19KV0sbCR0LnByb3RvdHlwZSxcImRlc2NyaXB0aW9uXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpbYyRDXX0pXSxsJHQucHJvdG90eXBlLFwiZmllbGRJbmZvc1wiLHZvaWQgMCksZSR1KFtvJHYoXCJmaWVsZEluZm9zXCIpXSxsJHQucHJvdG90eXBlLFwid3JpdGVGaWVsZEluZm9zXCIsbnVsbCksZSR1KFt5JHIoe2pzb246e3dyaXRlOiEwLG9yaWdpbnM6e1wid2ViLXNjZW5lXCI6e3dyaXRlOiExLHJlYWQ6ITF9fX19KV0sbCR0LnByb3RvdHlwZSxcInRpdGxlXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpbXCJmaWVsZHNcIl0scmVhZE9ubHk6ITAsanNvbjp7cmVhZDohMSx3cml0ZTohMH19KV0sbCR0LnByb3RvdHlwZSxcInR5cGVcIix2b2lkIDApLGwkdD1uJHE9ZSR1KFtpJFgoXCJlc3JpLnBvcHVwLmNvbnRlbnQuRmllbGRzQ29udGVudFwiKV0sbCR0KTt2YXIgYyRCPWwkdDtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmxldCBwJEo9Y2xhc3MgZXh0ZW5kcyBhJEJ7Y29uc3RydWN0b3IodCl7c3VwZXIodCksdGhpcy5hbHRUZXh0PW51bGwsdGhpcy5jYXB0aW9uPVwiXCIsdGhpcy50aXRsZT1cIlwiLHRoaXMudHlwZT1udWxsO319O2UkdShbeSRyKHt0eXBlOlN0cmluZyxqc29uOnt3cml0ZTohMH19KV0scCRKLnByb3RvdHlwZSxcImFsdFRleHRcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOlN0cmluZyxqc29uOnt3cml0ZTohMH19KV0scCRKLnByb3RvdHlwZSxcImNhcHRpb25cIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOlN0cmluZyxqc29uOnt3cml0ZTohMH19KV0scCRKLnByb3RvdHlwZSxcInRpdGxlXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpbXCJpbWFnZVwiLFwiYmFyLWNoYXJ0XCIsXCJjb2x1bW4tY2hhcnRcIixcImxpbmUtY2hhcnRcIixcInBpZS1jaGFydFwiXSxyZWFkT25seTohMCxqc29uOntyZWFkOiExLHdyaXRlOiEwfX0pXSxwJEoucHJvdG90eXBlLFwidHlwZVwiLHZvaWQgMCkscCRKPWUkdShbaSRYKFwiZXNyaS5wb3B1cC5jb250ZW50Lm1peGlucy5NZWRpYUluZm9cIildLHAkSik7dmFyIHMkYz1wJEo7XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG52YXIgcCRJO2xldCBpJHY9cCRJPWNsYXNzIGV4dGVuZHMgdSREe2NvbnN0cnVjdG9yKG8pe3N1cGVyKG8pLHRoaXMudG9vbHRpcD1udWxsLHRoaXMudmFsdWU9bnVsbCx0aGlzLng9bnVsbCx0aGlzLnk9bnVsbDt9Y2xvbmUoKXtyZXR1cm4gbmV3IHAkSSh7dG9vbHRpcDp0aGlzLnRvb2x0aXAsdmFsdWU6dGhpcy52YWx1ZX0pfX07ZSR1KFt5JHIoKV0saSR2LnByb3RvdHlwZSxcInRvb2x0aXBcIix2b2lkIDApLGUkdShbeSRyKCldLGkkdi5wcm90b3R5cGUsXCJ2YWx1ZVwiLHZvaWQgMCksZSR1KFtvJEMoXCJ2YWx1ZVwiKV0saSR2LnByb3RvdHlwZSxcInhcIix2b2lkIDApLGUkdShbbyRDKFwidG9vbHRpcFwiKV0saSR2LnByb3RvdHlwZSxcInlcIix2b2lkIDApLGkkdj1wJEk9ZSR1KFtpJFgoXCJlc3JpLnBvcHVwLmNvbnRlbnQuc3VwcG9ydC5DaGFydE1lZGlhSW5mb1ZhbHVlU2VyaWVzXCIpXSxpJHYpO3ZhciBjJEE9aSR2O1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xudmFyIHAkSDtsZXQgbCRzPXAkSD1jbGFzcyBleHRlbmRzIGEkQntjb25zdHJ1Y3RvcihvKXtzdXBlcihvKSx0aGlzLmZpZWxkcz1bXSx0aGlzLm5vcm1hbGl6ZUZpZWxkPW51bGwsdGhpcy5zZXJpZXM9W10sdGhpcy50b29sdGlwRmllbGQ9bnVsbDt9Y2xvbmUoKXtyZXR1cm4gbmV3IHAkSCh7ZmllbGRzOnkkdih0aGlzLmZpZWxkcyksbm9ybWFsaXplRmllbGQ6dGhpcy5ub3JtYWxpemVGaWVsZCx0b29sdGlwRmllbGQ6dGhpcy50b29sdGlwRmllbGR9KX19O2UkdShbeSRyKHt0eXBlOltTdHJpbmddLGpzb246e3dyaXRlOiEwfX0pXSxsJHMucHJvdG90eXBlLFwiZmllbGRzXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpTdHJpbmcsanNvbjp7d3JpdGU6ITB9fSldLGwkcy5wcm90b3R5cGUsXCJub3JtYWxpemVGaWVsZFwiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6W2MkQV0sanNvbjp7cmVhZDohMX19KV0sbCRzLnByb3RvdHlwZSxcInNlcmllc1wiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6U3RyaW5nLGpzb246e3dyaXRlOiEwfX0pXSxsJHMucHJvdG90eXBlLFwidG9vbHRpcEZpZWxkXCIsdm9pZCAwKSxsJHM9cCRIPWUkdShbaSRYKFwiZXNyaS5wb3B1cC5jb250ZW50LnN1cHBvcnQuQ2hhcnRNZWRpYUluZm9WYWx1ZVwiKV0sbCRzKTt2YXIgbiRwPWwkcztcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmxldCBwJEc9Y2xhc3MgZXh0ZW5kcyBzJGN7Y29uc3RydWN0b3Iocil7c3VwZXIociksdGhpcy50eXBlPW51bGwsdGhpcy52YWx1ZT1udWxsO319O2UkdShbeSRyKHt0eXBlOltcImJhci1jaGFydFwiLFwiY29sdW1uLWNoYXJ0XCIsXCJsaW5lLWNoYXJ0XCIsXCJwaWUtY2hhcnRcIl0scmVhZE9ubHk6ITAsanNvbjp7cmVhZDohMSx3cml0ZTohMH19KV0scCRHLnByb3RvdHlwZSxcInR5cGVcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOm4kcCxqc29uOnt3cml0ZTohMH19KV0scCRHLnByb3RvdHlwZSxcInZhbHVlXCIsdm9pZCAwKSxwJEc9ZSR1KFtpJFgoXCJlc3JpLnBvcHVwLmNvbnRlbnQubWl4aW5zLkNoYXJ0TWVkaWFJbmZvXCIpXSxwJEcpO3ZhciBpJHU9cCRHO1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuY29uc3QgYyR6PW8kQSgpKHtiYXJjaGFydDpcImJhci1jaGFydFwiLGNvbHVtbmNoYXJ0OlwiY29sdW1uLWNoYXJ0XCIsbGluZWNoYXJ0OlwibGluZS1jaGFydFwiLHBpZWNoYXJ0OlwicGllLWNoYXJ0XCJ9KTtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbnZhciBwJEY7bGV0IGEkcD1wJEY9Y2xhc3MgZXh0ZW5kcyBpJHV7Y29uc3RydWN0b3Iocil7c3VwZXIociksdGhpcy50eXBlPVwiYmFyLWNoYXJ0XCI7fWNsb25lKCl7cmV0dXJuIG5ldyBwJEYoe2FsdFRleHQ6dGhpcy5hbHRUZXh0LHRpdGxlOnRoaXMudGl0bGUsY2FwdGlvbjp0aGlzLmNhcHRpb24sdmFsdWU6dGhpcy52YWx1ZT90aGlzLnZhbHVlLmNsb25lKCk6bnVsbH0pfX07ZSR1KFt5JHIoe3R5cGU6W1wiYmFyLWNoYXJ0XCJdLHJlYWRPbmx5OiEwLGpzb246e3R5cGU6W1wiYmFyY2hhcnRcIl0scmVhZDohMSx3cml0ZTpjJHoud3JpdGV9fSldLGEkcC5wcm90b3R5cGUsXCJ0eXBlXCIsdm9pZCAwKSxhJHA9cCRGPWUkdShbaSRYKFwiZXNyaS5wb3B1cC5jb250ZW50LkJhckNoYXJ0TWVkaWFJbmZvXCIpXSxhJHApO3ZhciBpJHQ9YSRwO1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xudmFyIHAkRTtsZXQgaSRzPXAkRT1jbGFzcyBleHRlbmRzIGkkdXtjb25zdHJ1Y3RvcihyKXtzdXBlcihyKSx0aGlzLnR5cGU9XCJjb2x1bW4tY2hhcnRcIjt9Y2xvbmUoKXtyZXR1cm4gbmV3IHAkRSh7YWx0VGV4dDp0aGlzLmFsdFRleHQsdGl0bGU6dGhpcy50aXRsZSxjYXB0aW9uOnRoaXMuY2FwdGlvbix2YWx1ZTp0aGlzLnZhbHVlP3RoaXMudmFsdWUuY2xvbmUoKTpudWxsfSl9fTtlJHUoW3kkcih7dHlwZTpbXCJjb2x1bW4tY2hhcnRcIl0scmVhZE9ubHk6ITAsanNvbjp7dHlwZTpbXCJjb2x1bW5jaGFydFwiXSxyZWFkOiExLHdyaXRlOmMkei53cml0ZX19KV0saSRzLnByb3RvdHlwZSxcInR5cGVcIix2b2lkIDApLGkkcz1wJEU9ZSR1KFtpJFgoXCJlc3JpLnBvcHVwLmNvbnRlbnQuQ29sdW1uQ2hhcnRNZWRpYUluZm9cIildLGkkcyk7dmFyIGMkeT1pJHM7XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG52YXIgdCRmO2xldCBwJEQ9dCRmPWNsYXNzIGV4dGVuZHMgYSRCe2NvbnN0cnVjdG9yKHIpe3N1cGVyKHIpLHRoaXMubGlua1VSTD1udWxsLHRoaXMuc291cmNlVVJMPW51bGw7fWNsb25lKCl7cmV0dXJuIG5ldyB0JGYoe2xpbmtVUkw6dGhpcy5saW5rVVJMLHNvdXJjZVVSTDp0aGlzLnNvdXJjZVVSTH0pfX07ZSR1KFt5JHIoe3R5cGU6U3RyaW5nLGpzb246e3dyaXRlOiEwfX0pXSxwJEQucHJvdG90eXBlLFwibGlua1VSTFwiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6U3RyaW5nLGpzb246e3dyaXRlOiEwfX0pXSxwJEQucHJvdG90eXBlLFwic291cmNlVVJMXCIsdm9pZCAwKSxwJEQ9dCRmPWUkdShbaSRYKFwiZXNyaS5wb3B1cC5jb250ZW50LnN1cHBvcnQuSW1hZ2VNZWRpYUluZm9WYWx1ZVwiKV0scCREKTt2YXIgaSRyPXAkRDtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbnZhciBwJEM7bGV0IGkkcT1wJEM9Y2xhc3MgZXh0ZW5kcyBzJGN7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5yZWZyZXNoSW50ZXJ2YWw9bnVsbCx0aGlzLnR5cGU9XCJpbWFnZVwiLHRoaXMudmFsdWU9bnVsbDt9Y2xvbmUoKXtyZXR1cm4gbmV3IHAkQyh7YWx0VGV4dDp0aGlzLmFsdFRleHQsdGl0bGU6dGhpcy50aXRsZSxjYXB0aW9uOnRoaXMuY2FwdGlvbixyZWZyZXNoSW50ZXJ2YWw6dGhpcy5yZWZyZXNoSW50ZXJ2YWwsdmFsdWU6dGhpcy52YWx1ZT90aGlzLnZhbHVlLmNsb25lKCk6bnVsbH0pfX07ZSR1KFt5JHIoe3R5cGU6TnVtYmVyLGpzb246e3dyaXRlOiEwfX0pXSxpJHEucHJvdG90eXBlLFwicmVmcmVzaEludGVydmFsXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpbXCJpbWFnZVwiXSxyZWFkT25seTohMCxqc29uOntyZWFkOiExLHdyaXRlOiEwfX0pXSxpJHEucHJvdG90eXBlLFwidHlwZVwiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6aSRyLGpzb246e3dyaXRlOiEwfX0pXSxpJHEucHJvdG90eXBlLFwidmFsdWVcIix2b2lkIDApLGkkcT1wJEM9ZSR1KFtpJFgoXCJlc3JpLnBvcHVwLmNvbnRlbnQuSW1hZ2VNZWRpYUluZm9cIildLGkkcSk7dmFyIGEkbz1pJHE7XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG52YXIgaSRwO2xldCBwJEI9aSRwPWNsYXNzIGV4dGVuZHMgaSR1e2NvbnN0cnVjdG9yKHIpe3N1cGVyKHIpLHRoaXMudHlwZT1cImxpbmUtY2hhcnRcIjt9Y2xvbmUoKXtyZXR1cm4gbmV3IGkkcCh7YWx0VGV4dDp0aGlzLmFsdFRleHQsdGl0bGU6dGhpcy50aXRsZSxjYXB0aW9uOnRoaXMuY2FwdGlvbix2YWx1ZTp0aGlzLnZhbHVlP3RoaXMudmFsdWUuY2xvbmUoKTpudWxsfSl9fTtlJHUoW3kkcih7dHlwZTpbXCJsaW5lLWNoYXJ0XCJdLHJlYWRPbmx5OiEwLGpzb246e3R5cGU6W1wibGluZWNoYXJ0XCJdLHJlYWQ6ITEsd3JpdGU6YyR6LndyaXRlfX0pXSxwJEIucHJvdG90eXBlLFwidHlwZVwiLHZvaWQgMCkscCRCPWkkcD1lJHUoW2kkWChcImVzcmkucG9wdXAuY29udGVudC5MaW5lQ2hhcnRNZWRpYUluZm9cIildLHAkQik7dmFyIGEkbj1wJEI7XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG52YXIgcCRBO2xldCBpJG89cCRBPWNsYXNzIGV4dGVuZHMgaSR1e2NvbnN0cnVjdG9yKHIpe3N1cGVyKHIpLHRoaXMudHlwZT1cInBpZS1jaGFydFwiO31jbG9uZSgpe3JldHVybiBuZXcgcCRBKHthbHRUZXh0OnRoaXMuYWx0VGV4dCx0aXRsZTp0aGlzLnRpdGxlLGNhcHRpb246dGhpcy5jYXB0aW9uLHZhbHVlOnRoaXMudmFsdWU/dGhpcy52YWx1ZS5jbG9uZSgpOm51bGx9KX19O2UkdShbeSRyKHt0eXBlOltcInBpZS1jaGFydFwiXSxyZWFkT25seTohMCxqc29uOnt0eXBlOltcInBpZWNoYXJ0XCJdLHJlYWQ6ITEsd3JpdGU6YyR6LndyaXRlfX0pXSxpJG8ucHJvdG90eXBlLFwidHlwZVwiLHZvaWQgMCksaSRvPXAkQT1lJHUoW2kkWChcImVzcmkucG9wdXAuY29udGVudC5QaWVDaGFydE1lZGlhSW5mb1wiKV0saSRvKTt2YXIgYSRtPWkkbztcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmNvbnN0IG0kaT17YmFzZTpzJGMsa2V5OlwidHlwZVwiLGRlZmF1bHRLZXlWYWx1ZTpcImltYWdlXCIsdHlwZU1hcDp7XCJiYXItY2hhcnRcIjppJHQsXCJjb2x1bW4tY2hhcnRcIjpjJHksXCJsaW5lLWNoYXJ0XCI6YSRuLFwicGllLWNoYXJ0XCI6YSRtLGltYWdlOmEkb319O1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xudmFyIGwkcjtsZXQgdSRpPWwkcj1jbGFzcyBleHRlbmRzIHAkTXtjb25zdHJ1Y3RvcihvKXtzdXBlcihvKSx0aGlzLmFjdGl2ZU1lZGlhSW5mb0luZGV4PW51bGwsdGhpcy5kZXNjcmlwdGlvbj1udWxsLHRoaXMubWVkaWFJbmZvcz1udWxsLHRoaXMudGl0bGU9bnVsbCx0aGlzLnR5cGU9XCJtZWRpYVwiO31yZWFkTWVkaWFJbmZvcyhvKXtyZXR1cm4gbyYmby5tYXAoKG89PlwiaW1hZ2VcIj09PW8udHlwZT9hJG8uZnJvbUpTT04obyk6XCJiYXJjaGFydFwiPT09by50eXBlP2kkdC5mcm9tSlNPTihvKTpcImNvbHVtbmNoYXJ0XCI9PT1vLnR5cGU/YyR5LmZyb21KU09OKG8pOlwibGluZWNoYXJ0XCI9PT1vLnR5cGU/YSRuLmZyb21KU09OKG8pOlwicGllY2hhcnRcIj09PW8udHlwZT9hJG0uZnJvbUpTT04obyk6dm9pZCAwKSkuZmlsdGVyKEJvb2xlYW4pfXdyaXRlTWVkaWFJbmZvcyhvLGUpe2UubWVkaWFJbmZvcz1vJiZvLm1hcCgobz0+by50b0pTT04oKSkpO31jbG9uZSgpe3JldHVybiBuZXcgbCRyKHthY3RpdmVNZWRpYUluZm9JbmRleDp0aGlzLmFjdGl2ZU1lZGlhSW5mb0luZGV4LGRlc2NyaXB0aW9uOnRoaXMuZGVzY3JpcHRpb24sbWVkaWFJbmZvczp0aGlzLm1lZGlhSW5mb3M/eSR2KHRoaXMubWVkaWFJbmZvcyk6bnVsbCx0aXRsZTp0aGlzLnRpdGxlfSl9fTtlJHUoW3kkcigpXSx1JGkucHJvdG90eXBlLFwiYWN0aXZlTWVkaWFJbmZvSW5kZXhcIix2b2lkIDApLGUkdShbeSRyKHtqc29uOnt3cml0ZTohMCxvcmlnaW5zOntcIndlYi1zY2VuZVwiOnt3cml0ZTohMSxyZWFkOiExfX19fSldLHUkaS5wcm90b3R5cGUsXCJkZXNjcmlwdGlvblwiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGVzOlttJGldfSldLHUkaS5wcm90b3R5cGUsXCJtZWRpYUluZm9zXCIsdm9pZCAwKSxlJHUoW2UkQyhcIm1lZGlhSW5mb3NcIildLHUkaS5wcm90b3R5cGUsXCJyZWFkTWVkaWFJbmZvc1wiLG51bGwpLGUkdShbbyR2KFwibWVkaWFJbmZvc1wiKV0sdSRpLnByb3RvdHlwZSxcIndyaXRlTWVkaWFJbmZvc1wiLG51bGwpLGUkdShbeSRyKHtqc29uOnt3cml0ZTohMCxvcmlnaW5zOntcIndlYi1zY2VuZVwiOnt3cml0ZTohMSxyZWFkOiExfX19fSldLHUkaS5wcm90b3R5cGUsXCJ0aXRsZVwiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6W1wibWVkaWFcIl0scmVhZE9ubHk6ITAsanNvbjp7cmVhZDohMSx3cml0ZTohMH19KV0sdSRpLnByb3RvdHlwZSxcInR5cGVcIix2b2lkIDApLHUkaT1sJHI9ZSR1KFtpJFgoXCJlc3JpLnBvcHVwLmNvbnRlbnQuTWVkaWFDb250ZW50XCIpXSx1JGkpO3ZhciBJPXUkaTtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbnZhciBzJGI7bGV0IHAkej1zJGI9Y2xhc3MgZXh0ZW5kcyBwJE17Y29uc3RydWN0b3IodCl7c3VwZXIodCksdGhpcy50ZXh0PW51bGwsdGhpcy50eXBlPVwidGV4dFwiO31jbG9uZSgpe3JldHVybiBuZXcgcyRiKHt0ZXh0OnRoaXMudGV4dH0pfX07ZSR1KFt5JHIoe3R5cGU6U3RyaW5nLGpzb246e3dyaXRlOiEwfX0pXSxwJHoucHJvdG90eXBlLFwidGV4dFwiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6W1widGV4dFwiXSxyZWFkT25seTohMCxqc29uOntyZWFkOiExLHdyaXRlOiEwfX0pXSxwJHoucHJvdG90eXBlLFwidHlwZVwiLHZvaWQgMCkscCR6PXMkYj1lJHUoW2kkWChcImVzcmkucG9wdXAuY29udGVudC5UZXh0Q29udGVudFwiKV0scCR6KTt2YXIgYyR4PXAkejtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmNvbnN0IHIkOT17YmFzZTpudWxsLGtleTpcInR5cGVcIix0eXBlTWFwOnthdHRhY2htZW50OnAkTCxtZWRpYTpJLHRleHQ6YyR4LGZpZWxkOmMkQn19O1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xudmFyIHMkYTtsZXQgcCR5PXMkYT1jbGFzcyBleHRlbmRzIGEkQntjb25zdHJ1Y3RvcihyKXtzdXBlcihyKSx0aGlzLm5hbWU9bnVsbCx0aGlzLnRpdGxlPW51bGwsdGhpcy5leHByZXNzaW9uPW51bGwsdGhpcy5yZXR1cm5UeXBlPW51bGw7fWNsb25lKCl7cmV0dXJuIG5ldyBzJGEoe25hbWU6dGhpcy5uYW1lLHRpdGxlOnRoaXMudGl0bGUsZXhwcmVzc2lvbjp0aGlzLmV4cHJlc3Npb24scmV0dXJuVHlwZTp0aGlzLnJldHVyblR5cGV9KX19O2UkdShbeSRyKHt0eXBlOlN0cmluZyxqc29uOnt3cml0ZTohMH19KV0scCR5LnByb3RvdHlwZSxcIm5hbWVcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOlN0cmluZyxqc29uOnt3cml0ZTohMH19KV0scCR5LnByb3RvdHlwZSxcInRpdGxlXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpTdHJpbmcsanNvbjp7d3JpdGU6ITB9fSldLHAkeS5wcm90b3R5cGUsXCJleHByZXNzaW9uXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpbXCJzdHJpbmdcIixcIm51bWJlclwiXSxqc29uOnt3cml0ZTohMH19KV0scCR5LnByb3RvdHlwZSxcInJldHVyblR5cGVcIix2b2lkIDApLHAkeT1zJGE9ZSR1KFtpJFgoXCJlc3JpLnBvcHVwLkV4cHJlc3Npb25JbmZvXCIpXSxwJHkpO3ZhciBpJG49cCR5O1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xudmFyIGUkYztsZXQgcCR4PWUkYz1jbGFzcyBleHRlbmRzIGEkQntjb25zdHJ1Y3RvcihvKXtzdXBlcihvKSx0aGlzLnJldHVyblRvcG1vc3RSYXN0ZXI9bnVsbCx0aGlzLnNob3dOb0RhdGFSZWNvcmRzPW51bGw7fWNsb25lKCl7cmV0dXJuIG5ldyBlJGMoe3Nob3dOb0RhdGFSZWNvcmRzOnRoaXMuc2hvd05vRGF0YVJlY29yZHMscmV0dXJuVG9wbW9zdFJhc3Rlcjp0aGlzLnJldHVyblRvcG1vc3RSYXN0ZXJ9KX19O2UkdShbeSRyKHt0eXBlOkJvb2xlYW4sanNvbjp7d3JpdGU6ITB9fSldLHAkeC5wcm90b3R5cGUsXCJyZXR1cm5Ub3Btb3N0UmFzdGVyXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpCb29sZWFuLGpzb246e3dyaXRlOiEwfX0pXSxwJHgucHJvdG90eXBlLFwic2hvd05vRGF0YVJlY29yZHNcIix2b2lkIDApLHAkeD1lJGM9ZSR1KFtpJFgoXCJlc3JpLnBvcHVwLkxheWVyT3B0aW9uc1wiKV0scCR4KTt2YXIgYSRsPXAkeDtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbnZhciB0JGU7bGV0IHAkdz10JGU9Y2xhc3MgZXh0ZW5kcyBhJEJ7Y29uc3RydWN0b3Iocil7c3VwZXIociksdGhpcy5maWVsZD1udWxsLHRoaXMub3JkZXI9bnVsbDt9Y2xvbmUoKXtyZXR1cm4gbmV3IHQkZSh7ZmllbGQ6dGhpcy5maWVsZCxvcmRlcjp0aGlzLm9yZGVyfSl9fTtlJHUoW3kkcih7dHlwZTpTdHJpbmcsanNvbjp7d3JpdGU6ITB9fSldLHAkdy5wcm90b3R5cGUsXCJmaWVsZFwiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6W1wiYXNjXCIsXCJkZXNjXCJdLGpzb246e3dyaXRlOiEwfX0pXSxwJHcucHJvdG90eXBlLFwib3JkZXJcIix2b2lkIDApLHAkdz10JGU9ZSR1KFtpJFgoXCJlc3JpLnBvcHVwLnN1cHBvcnQuUmVsYXRlZFJlY29yZHNJbmZvRmllbGRPcmRlclwiKV0scCR3KTt2YXIgaSRtPXAkdztcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbnZhciBpJGw7bGV0IGQkaz1pJGw9Y2xhc3MgZXh0ZW5kcyBhJEJ7Y29uc3RydWN0b3Iocil7c3VwZXIociksdGhpcy5zaG93UmVsYXRlZFJlY29yZHM9bnVsbCx0aGlzLm9yZGVyQnlGaWVsZHM9bnVsbDt9Y2xvbmUoKXtyZXR1cm4gbmV3IGkkbCh7c2hvd1JlbGF0ZWRSZWNvcmRzOnRoaXMuc2hvd1JlbGF0ZWRSZWNvcmRzLG9yZGVyQnlGaWVsZHM6dGhpcy5vcmRlckJ5RmllbGRzP3kkdih0aGlzLm9yZGVyQnlGaWVsZHMpOm51bGx9KX19O2UkdShbeSRyKHt0eXBlOkJvb2xlYW4sanNvbjp7d3JpdGU6ITB9fSldLGQkay5wcm90b3R5cGUsXCJzaG93UmVsYXRlZFJlY29yZHNcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOltpJG1dLGpzb246e3dyaXRlOiEwfX0pXSxkJGsucHJvdG90eXBlLFwib3JkZXJCeUZpZWxkc1wiLHZvaWQgMCksZCRrPWkkbD1lJHUoW2kkWChcImVzcmkucG9wdXAuUmVsYXRlZFJlY29yZHNJbmZvXCIpXSxkJGspO3ZhciBjJHc9ZCRrO1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xubGV0IHQkZD0wO2NvbnN0IHIkOD1yPT57bGV0IG89Y2xhc3MgZXh0ZW5kcyBye2NvbnN0cnVjdG9yKC4uLmUpe3N1cGVyKC4uLmUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwidWlkXCIse3dyaXRhYmxlOiExLGNvbmZpZ3VyYWJsZTohMSx2YWx1ZTpEYXRlLm5vdygpLnRvU3RyaW5nKDE2KStcIi1vYmplY3QtXCIrdCRkKyt9KTt9fTtyZXR1cm4gbz1lJHUoW2kkWChcImVzcmkuY29yZS5JZGVudGlmaWFibGVcIildLG8pLG99O2xldCBvJDc9Y2xhc3MgZXh0ZW5kcyhyJDgoY2xhc3N7fSkpe307byQ3PWUkdShbaSRYKFwiZXNyaS5jb3JlLklkZW50aWZpYWJsZVwiKV0sbyQ3KTtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbnZhciByJDc7bGV0IHAkdj1yJDc9Y2xhc3MgZXh0ZW5kcyhyJDgodSREKSl7Y29uc3RydWN0b3IodCl7c3VwZXIodCksdGhpcy5hY3RpdmU9ITEsdGhpcy5jbGFzc05hbWU9bnVsbCx0aGlzLmRpc2FibGVkPSExLHRoaXMuaWQ9bnVsbCx0aGlzLmluZGljYXRvcj0hMSx0aGlzLnRpdGxlPW51bGwsdGhpcy50eXBlPW51bGwsdGhpcy52aXNpYmxlPSEwO31jbG9uZSgpe3JldHVybiBuZXcgciQ3KHthY3RpdmU6dGhpcy5hY3RpdmUsY2xhc3NOYW1lOnRoaXMuY2xhc3NOYW1lLGRpc2FibGVkOnRoaXMuZGlzYWJsZWQsaWQ6dGhpcy5pZCxpbmRpY2F0b3I6dGhpcy5pbmRpY2F0b3IsdGl0bGU6dGhpcy50aXRsZSx2aXNpYmxlOnRoaXMudmlzaWJsZX0pfX07ZSR1KFt5JHIoKV0scCR2LnByb3RvdHlwZSxcImFjdGl2ZVwiLHZvaWQgMCksZSR1KFt5JHIoKV0scCR2LnByb3RvdHlwZSxcImNsYXNzTmFtZVwiLHZvaWQgMCksZSR1KFt5JHIoKV0scCR2LnByb3RvdHlwZSxcImRpc2FibGVkXCIsdm9pZCAwKSxlJHUoW3kkcigpXSxwJHYucHJvdG90eXBlLFwiaWRcIix2b2lkIDApLGUkdShbeSRyKCldLHAkdi5wcm90b3R5cGUsXCJpbmRpY2F0b3JcIix2b2lkIDApLGUkdShbeSRyKCldLHAkdi5wcm90b3R5cGUsXCJ0aXRsZVwiLHZvaWQgMCksZSR1KFt5JHIoKV0scCR2LnByb3RvdHlwZSxcInR5cGVcIix2b2lkIDApLGUkdShbeSRyKCldLHAkdi5wcm90b3R5cGUsXCJ2aXNpYmxlXCIsdm9pZCAwKSxwJHY9ciQ3PWUkdShbaSRYKFwiZXNyaS5zdXBwb3J0LmFjdGlvbnMuQWN0aW9uQmFzZVwiKV0scCR2KTt2YXIgYyR2PXAkdjtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbnZhciBpJGs7bGV0IGUkYj1pJGs9Y2xhc3MgZXh0ZW5kcyBjJHZ7Y29uc3RydWN0b3Iocyl7c3VwZXIocyksdGhpcy5pbWFnZT1udWxsLHRoaXMudHlwZT1cImJ1dHRvblwiO31jbG9uZSgpe3JldHVybiBuZXcgaSRrKHthY3RpdmU6dGhpcy5hY3RpdmUsY2xhc3NOYW1lOnRoaXMuY2xhc3NOYW1lLGRpc2FibGVkOnRoaXMuZGlzYWJsZWQsaWQ6dGhpcy5pZCxpbmRpY2F0b3I6dGhpcy5pbmRpY2F0b3IsdGl0bGU6dGhpcy50aXRsZSx2aXNpYmxlOnRoaXMudmlzaWJsZSxpbWFnZTp0aGlzLmltYWdlfSl9fTtlJHUoW3kkcigpXSxlJGIucHJvdG90eXBlLFwiaW1hZ2VcIix2b2lkIDApLGUkYj1pJGs9ZSR1KFtpJFgoXCJlc3JpLnN1cHBvcnQuQWN0aW9uLkFjdGlvbkJ1dHRvblwiKV0sZSRiKTt2YXIgYyR1PWUkYjtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbnZhciByJDY7bGV0IGkkaj1yJDY9Y2xhc3MgZXh0ZW5kcyBjJHZ7Y29uc3RydWN0b3Iocyl7c3VwZXIocyksdGhpcy5pbWFnZT1udWxsLHRoaXMudHlwZT1cInRvZ2dsZVwiLHRoaXMudmFsdWU9ITE7fWNsb25lKCl7cmV0dXJuIG5ldyByJDYoe2FjdGl2ZTp0aGlzLmFjdGl2ZSxjbGFzc05hbWU6dGhpcy5jbGFzc05hbWUsZGlzYWJsZWQ6dGhpcy5kaXNhYmxlZCxpZDp0aGlzLmlkLGluZGljYXRvcjp0aGlzLmluZGljYXRvcix0aXRsZTp0aGlzLnRpdGxlLHZpc2libGU6dGhpcy52aXNpYmxlLGltYWdlOnRoaXMuaW1hZ2UsdmFsdWU6dGhpcy52YWx1ZX0pfX07ZSR1KFt5JHIoKV0saSRqLnByb3RvdHlwZSxcImltYWdlXCIsdm9pZCAwKSxlJHUoW3kkcigpXSxpJGoucHJvdG90eXBlLFwidmFsdWVcIix2b2lkIDApLGkkaj1yJDY9ZSR1KFtpJFgoXCJlc3JpLnN1cHBvcnQuQWN0aW9uLkFjdGlvblRvZ2dsZVwiKV0saSRqKTt2YXIgYSRrPWkkajtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbnZhciBPJDE7Y29uc3QgUyQ0PUwkNS5vZlR5cGUoe2tleTpcInR5cGVcIixkZWZhdWx0S2V5VmFsdWU6XCJidXR0b25cIixiYXNlOmMkdix0eXBlTWFwOntidXR0b246YyR1LHRvZ2dsZTphJGt9fSksVCQyPXtiYXNlOnAkTSxrZXk6XCJ0eXBlXCIsdHlwZU1hcDp7bWVkaWE6SSxjdXN0b206YyRFLHRleHQ6YyR4LGF0dGFjaG1lbnRzOnAkTCxmaWVsZHM6YyRCfX0sYiQ2PVwiZXNyaS5Qb3B1cFRlbXBsYXRlXCIsUiQyPW4kVC5nZXRMb2dnZXIoYiQ2KSxMJDM9W1wiYXR0YWNobWVudHNcIixcImZpZWxkc1wiLFwibWVkaWFcIixcInRleHRcIl07bGV0IEo9TyQxPWNsYXNzIGV4dGVuZHMgYSRCe2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLmFjdGlvbnM9bnVsbCx0aGlzLmNvbnRlbnQ9XCJcIix0aGlzLmV4cHJlc3Npb25JbmZvcz1udWxsLHRoaXMuZmllbGRJbmZvcz1udWxsLHRoaXMubGF5ZXJPcHRpb25zPW51bGwsdGhpcy5sYXN0RWRpdEluZm9FbmFibGVkPSEwLHRoaXMub3V0RmllbGRzPW51bGwsdGhpcy5vdmVyd3JpdGVBY3Rpb25zPSExLHRoaXMucmV0dXJuR2VvbWV0cnk9ITEsdGhpcy50aXRsZT1cIlwiLHRoaXMucmVsYXRlZFJlY29yZHNJbmZvPW51bGw7fWNhc3RDb250ZW50KHQpe3JldHVybiBBcnJheS5pc0FycmF5KHQpP3QubWFwKCh0PT5rJGEoVCQyLHQpKSk6XCJzdHJpbmdcIj09dHlwZW9mIHR8fFwiZnVuY3Rpb25cIj09dHlwZW9mIHR8fHQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudHx8VSQyKHQpP3Q6KFIkMi5lcnJvcihcImNvbnRlbnQgZXJyb3JcIixcInVuc3VwcG9ydGVkIGNvbnRlbnQgdmFsdWVcIix7dmFsdWU6dH0pLG51bGwpfXJlYWRDb250ZW50KHQsZSl7Y29uc3R7cG9wdXBFbGVtZW50czpvfT1lO3JldHVybiBBcnJheS5pc0FycmF5KG8pJiZvLmxlbmd0aD4wP3RoaXMuX3JlYWRQb3B1cEluZm9FbGVtZW50cyhlKTp0aGlzLl9yZWFkUG9wdXBJbmZvKGUpfXdyaXRlQ29udGVudCh0LGUsbyxzKXtcInN0cmluZ1wiIT10eXBlb2YgdD9BcnJheS5pc0FycmF5KHQpJiYoZS5wb3B1cEVsZW1lbnRzPXQuZmlsdGVyKCh0PT4tMSE9PUwkMy5pbmRleE9mKHQudHlwZSkpKS5tYXAoKHQ9PnQmJnQudG9KU09OKHMpKSksZS5wb3B1cEVsZW1lbnRzLmZvckVhY2goKHQ9PntcImF0dGFjaG1lbnRzXCI9PT10LnR5cGU/dGhpcy5fd3JpdGVBdHRhY2htZW50Q29udGVudChlKTpcIm1lZGlhXCI9PT10LnR5cGU/dGhpcy5fd3JpdGVNZWRpYUNvbnRlbnQodCxlKTpcInRleHRcIj09PXQudHlwZSYmdGhpcy5fd3JpdGVUZXh0Q29udGVudCh0LGUpO30pKSk6ZS5kZXNjcmlwdGlvbj10O313cml0ZUZpZWxkSW5mb3ModCxlLG8scyl7Y29uc3R7Y29udGVudDpyfT10aGlzLGk9QXJyYXkuaXNBcnJheShyKT9yOm51bGw7aWYodCl7Y29uc3Qgbz1pP2kuZmlsdGVyKCh0PT5cImZpZWxkc1wiPT09dC50eXBlKSk6W10scj1vLmxlbmd0aCYmby5ldmVyeSgodD0+e3ZhciBlO3JldHVybiBudWxsPT0oZT10LmZpZWxkSW5mb3MpP3ZvaWQgMDplLmxlbmd0aH0pKTtlLmZpZWxkSW5mb3M9dC5maWx0ZXIoQm9vbGVhbikubWFwKCh0PT57Y29uc3QgZT10LnRvSlNPTihzKTtyZXR1cm4gciYmKGUudmlzaWJsZT0hMSksZX0pKTt9aWYoaSlmb3IoY29uc3QgbiBvZiBpKVwiZmllbGRzXCI9PT1uLnR5cGUmJnRoaXMuX3dyaXRlRmllbGRzQ29udGVudChuLGUpO313cml0ZUxheWVyT3B0aW9ucyh0LGUsbyxzKXtlW29dPSF0fHxudWxsPT09dC5zaG93Tm9EYXRhUmVjb3JkcyYmbnVsbD09PXQucmV0dXJuVG9wbW9zdFJhc3Rlcj9udWxsOnQudG9KU09OKHMpO313cml0ZVRpdGxlKHQsZSl7ZS50aXRsZT10fHxcIlwiO31jbG9uZSgpe2NvbnN0e2FjdGlvbnM6dH09dGhpcyxvPXQ/eSR2KHQudG9BcnJheSgpKTpbXTtyZXR1cm4gbmV3IE8kMSh7YWN0aW9uczpvLGNvbnRlbnQ6QXJyYXkuaXNBcnJheSh0aGlzLmNvbnRlbnQpP3kkdih0aGlzLmNvbnRlbnQpOnRoaXMuY29udGVudCxleHByZXNzaW9uSW5mb3M6QXJyYXkuaXNBcnJheSh0aGlzLmV4cHJlc3Npb25JbmZvcyk/eSR2KHRoaXMuZXhwcmVzc2lvbkluZm9zKTpudWxsLGZpZWxkSW5mb3M6QXJyYXkuaXNBcnJheSh0aGlzLmZpZWxkSW5mb3MpP3kkdih0aGlzLmZpZWxkSW5mb3MpOm51bGwsbGF5ZXJPcHRpb25zOnRoaXMubGF5ZXJPcHRpb25zP3kkdih0aGlzLmxheWVyT3B0aW9ucyk6bnVsbCxsYXN0RWRpdEluZm9FbmFibGVkOnRoaXMubGFzdEVkaXRJbmZvRW5hYmxlZCxvdXRGaWVsZHM6QXJyYXkuaXNBcnJheSh0aGlzLm91dEZpZWxkcyk/eSR2KHRoaXMub3V0RmllbGRzKTpudWxsLG92ZXJ3cml0ZUFjdGlvbnM6dGhpcy5vdmVyd3JpdGVBY3Rpb25zLHJldHVybkdlb21ldHJ5OnRoaXMucmV0dXJuR2VvbWV0cnksdGl0bGU6dGhpcy50aXRsZSxyZWxhdGVkUmVjb3Jkc0luZm86dGhpcy5yZWxhdGVkUmVjb3Jkc0luZm8/eSR2KHRoaXMucmVsYXRlZFJlY29yZHNJbmZvKTpudWxsfSl9YXN5bmMgY29sbGVjdFJlcXVpcmVkRmllbGRzKHQsZSl7YXdhaXQgdGhpcy5fY29sbGVjdEV4cHJlc3Npb25JbmZvRmllbGRzKHQsZSx0aGlzLmV4cHJlc3Npb25JbmZvcyksZyQ1KHQsZSxbLi4udGhpcy5vdXRGaWVsZHN8fFtdLC4uLnRoaXMuX2dldEFjdGlvbnNGaWVsZHModGhpcy5hY3Rpb25zKSwuLi50aGlzLl9nZXRUaXRsZUZpZWxkcyh0aGlzLnRpdGxlKSwuLi50aGlzLl9nZXRDb250ZW50RmllbGRzKHRoaXMuY29udGVudCldKTt9YXN5bmMgZ2V0UmVxdWlyZWRGaWVsZHModCl7Y29uc3QgZT1uZXcgU2V0O3JldHVybiBhd2FpdCB0aGlzLmNvbGxlY3RSZXF1aXJlZEZpZWxkcyhlLHQpLFsuLi5lXS5zb3J0KCl9X3dyaXRlRmllbGRzQ29udGVudCh0LG8pe2lmKCFBcnJheS5pc0FycmF5KHQuZmllbGRJbmZvcyl8fCF0LmZpZWxkSW5mb3MubGVuZ3RoKXJldHVybjtjb25zdCBzPXkkdih0LmZpZWxkSW5mb3MpO0FycmF5LmlzQXJyYXkoby5maWVsZEluZm9zKT9zLmZvckVhY2goKHQ9Pntjb25zdCBlPW8uZmllbGRJbmZvcy5maW5kKChlPT5lLmZpZWxkTmFtZS50b0xvd2VyQ2FzZSgpPT09dC5maWVsZE5hbWUudG9Mb3dlckNhc2UoKSkpO2U/ZS52aXNpYmxlPSEwOm8uZmllbGRJbmZvcy5wdXNoKHQpO30pKTpvLmZpZWxkSW5mb3M9czt9X3dyaXRlQXR0YWNobWVudENvbnRlbnQodCl7dC5zaG93QXR0YWNobWVudHN8fCh0LnNob3dBdHRhY2htZW50cz0hMCk7fV93cml0ZVRleHRDb250ZW50KHQsZSl7IWUuZGVzY3JpcHRpb24mJnQudGV4dCYmKGUuZGVzY3JpcHRpb249dC50ZXh0KTt9X3dyaXRlTWVkaWFDb250ZW50KHQsbyl7aWYoIUFycmF5LmlzQXJyYXkodC5tZWRpYUluZm9zKXx8IXQubWVkaWFJbmZvcy5sZW5ndGgpcmV0dXJuO2NvbnN0IHM9eSR2KHQubWVkaWFJbmZvcyk7QXJyYXkuaXNBcnJheShvLm1lZGlhSW5mb3MpP28ubWVkaWFJbmZvcz1bLi4uby5tZWRpYUluZm9zLC4uLnNdOm8ubWVkaWFJbmZvcz1zO31fcmVhZFBvcHVwSW5mb0VsZW1lbnRzKHtkZXNjcmlwdGlvbjp0LG1lZGlhSW5mb3M6ZSxwb3B1cEVsZW1lbnRzOm99KXtjb25zdCBzPXtkZXNjcmlwdGlvbjohMSxtZWRpYUluZm9zOiExfTtyZXR1cm4gby5tYXAoKG89PlwibWVkaWFcIj09PW8udHlwZT8oby5tZWRpYUluZm9zfHwhZXx8cy5tZWRpYUluZm9zfHwoby5tZWRpYUluZm9zPWUscy5tZWRpYUluZm9zPSEwKSxJLmZyb21KU09OKG8pKTpcInRleHRcIj09PW8udHlwZT8oby50ZXh0fHwhdHx8cy5kZXNjcmlwdGlvbnx8KG8udGV4dD10LHMuZGVzY3JpcHRpb249ITApLGMkeC5mcm9tSlNPTihvKSk6XCJhdHRhY2htZW50c1wiPT09by50eXBlP3AkTC5mcm9tSlNPTihvKTpcImZpZWxkc1wiPT09by50eXBlP2MkQi5mcm9tSlNPTihvKTp2b2lkIDApKS5maWx0ZXIoQm9vbGVhbil9X3JlYWRQb3B1cEluZm8oe2Rlc2NyaXB0aW9uOnQsbWVkaWFJbmZvczplLHNob3dBdHRhY2htZW50czpvfSl7Y29uc3Qgcz1bXTtyZXR1cm4gdD9zLnB1c2gobmV3IGMkeCh7dGV4dDp0fSkpOnMucHVzaChuZXcgYyRCKSxBcnJheS5pc0FycmF5KGUpJiZlLmxlbmd0aCYmcy5wdXNoKEkuZnJvbUpTT04oe21lZGlhSW5mb3M6ZX0pKSxvJiZzLnB1c2gocCRMLmZyb21KU09OKHtkaXNwbGF5VHlwZTpcImxpc3RcIn0pKSxzLmxlbmd0aD9zOnR9X2dldENvbnRlbnRFbGVtZW50RmllbGRzKHQpe2lmKCF0fHxcImF0dGFjaG1lbnRzXCI9PT10LnR5cGUpcmV0dXJuIFtdO2lmKFwiY3VzdG9tXCI9PT10LnR5cGUpcmV0dXJuIHQub3V0RmllbGRzfHxbXTtpZihcImZpZWxkc1wiPT09dC50eXBlKXJldHVybiB0aGlzLl9nZXRGaWVsZEluZm9GaWVsZHModC5maWVsZEluZm9zfHx0aGlzLmZpZWxkSW5mb3MpO2lmKFwibWVkaWFcIj09PXQudHlwZSl7cmV0dXJuICh0Lm1lZGlhSW5mb3N8fFtdKS5yZWR1Y2UoKCh0LGUpPT5bLi4udCwuLi50aGlzLl9nZXRNZWRpYUluZm9GaWVsZHMoZSldKSxbXSl9cmV0dXJuIFwidGV4dFwiPT09dC50eXBlP3RoaXMuX2V4dHJhY3RGaWVsZE5hbWVzKHQudGV4dCk6dm9pZCAwfV9nZXRNZWRpYUluZm9GaWVsZHModCl7Y29uc3R7Y2FwdGlvbjplLHRpdGxlOm8sdmFsdWU6c309dCxyPXN8fHt9LHtmaWVsZHM6aT1bXSxub3JtYWxpemVGaWVsZDpuLHRvb2x0aXBGaWVsZDpwLHNvdXJjZVVSTDpsLGxpbmtVUkw6YX09cixkPVsuLi50aGlzLl9leHRyYWN0RmllbGROYW1lcyhvKSwuLi50aGlzLl9leHRyYWN0RmllbGROYW1lcyhlKSwuLi50aGlzLl9leHRyYWN0RmllbGROYW1lcyhsKSwuLi50aGlzLl9leHRyYWN0RmllbGROYW1lcyhhKSwuLi5pXTtyZXR1cm4gbiYmZC5wdXNoKG4pLHAmJmQucHVzaChwKSxkfV9nZXRDb250ZW50RmllbGRzKHQpe3JldHVybiBcInN0cmluZ1wiPT10eXBlb2YgdD90aGlzLl9leHRyYWN0RmllbGROYW1lcyh0KTpBcnJheS5pc0FycmF5KHQpP3QucmVkdWNlKCgodCxlKT0+Wy4uLnQsLi4udGhpcy5fZ2V0Q29udGVudEVsZW1lbnRGaWVsZHMoZSldKSxbXSk6W119YXN5bmMgX2NvbGxlY3RFeHByZXNzaW9uSW5mb0ZpZWxkcyh0LGUsbyl7byYmYXdhaXQgUHJvbWlzZS5hbGwoby5tYXAoKG89PnckNCh0LGUsby5leHByZXNzaW9uKSkpKTt9X2dldEZpZWxkSW5mb0ZpZWxkcyh0KXtyZXR1cm4gdD90LmZpbHRlcigodD0+dm9pZCAwPT09dC52aXNpYmxlfHwhIXQudmlzaWJsZSkpLm1hcCgodD0+dC5maWVsZE5hbWUpKS5maWx0ZXIoKHQ9Pi0xPT09dC5pbmRleE9mKFwicmVsYXRpb25zaGlwcy9cIikmJi0xPT09dC5pbmRleE9mKFwiZXhwcmVzc2lvbi9cIikpKTpbXX1fZ2V0QWN0aW9uc0ZpZWxkcyh0KXtyZXR1cm4gdD90LnRvQXJyYXkoKS5yZWR1Y2UoKCh0LGUpPT5bLi4udCwuLi50aGlzLl9nZXRBY3Rpb25GaWVsZHMoZSldKSxbXSk6W119X2dldEFjdGlvbkZpZWxkcyh0KXtjb25zdHtjbGFzc05hbWU6ZSx0aXRsZTpvLHR5cGU6c309dCxyPVwiYnV0dG9uXCI9PT1zfHxcInRvZ2dsZVwiPT09cz90LmltYWdlOlwiXCI7cmV0dXJuIFsuLi50aGlzLl9leHRyYWN0RmllbGROYW1lcyhvKSwuLi50aGlzLl9leHRyYWN0RmllbGROYW1lcyhlKSwuLi50aGlzLl9leHRyYWN0RmllbGROYW1lcyhyKV19X2dldFRpdGxlRmllbGRzKHQpe3JldHVybiBcInN0cmluZ1wiPT10eXBlb2YgdD90aGlzLl9leHRyYWN0RmllbGROYW1lcyh0KTpbXX1fZXh0cmFjdEZpZWxkTmFtZXModCl7aWYoIXR8fFwic3RyaW5nXCIhPXR5cGVvZiB0KXJldHVybiBbXTtjb25zdCBlPS97W159XSp9L2csbz10Lm1hdGNoKGUpO2lmKCFvKXJldHVybiBbXTtjb25zdCBzPS9cXHsoXFx3Kyk6LitcXH0vLHI9by5maWx0ZXIoKHQ9PiEoMD09PXQuaW5kZXhPZihcIntyZWxhdGlvbnNoaXBzL1wiKXx8MD09PXQuaW5kZXhPZihcIntleHByZXNzaW9uL1wiKSkpKS5tYXAoKHQ9PnQucmVwbGFjZShzLFwieyQxfVwiKSkpO3JldHVybiByP3IubWFwKCh0PT50LnNsaWNlKDEsLTEpKSk6W119fTtlJHUoW3kkcih7dHlwZTpTJDR9KV0sSi5wcm90b3R5cGUsXCJhY3Rpb25zXCIsdm9pZCAwKSxlJHUoW3kkcigpXSxKLnByb3RvdHlwZSxcImNvbnRlbnRcIix2b2lkIDApLGUkdShbYyRfKFwiY29udGVudFwiKV0sSi5wcm90b3R5cGUsXCJjYXN0Q29udGVudFwiLG51bGwpLGUkdShbZSRDKFwiY29udGVudFwiLFtcImRlc2NyaXB0aW9uXCIsXCJmaWVsZEluZm9zXCIsXCJwb3B1cEVsZW1lbnRzXCIsXCJtZWRpYUluZm9zXCIsXCJzaG93QXR0YWNobWVudHNcIl0pXSxKLnByb3RvdHlwZSxcInJlYWRDb250ZW50XCIsbnVsbCksZSR1KFtvJHYoXCJjb250ZW50XCIse3BvcHVwRWxlbWVudHM6e3R5cGU6TCQ1Lm9mVHlwZShyJDkpfSxzaG93QXR0YWNobWVudHM6e3R5cGU6Qm9vbGVhbn0sbWVkaWFJbmZvczp7dHlwZTpMJDUub2ZUeXBlKG0kaSl9LGRlc2NyaXB0aW9uOnt0eXBlOlN0cmluZ319KV0sSi5wcm90b3R5cGUsXCJ3cml0ZUNvbnRlbnRcIixudWxsKSxlJHUoW3kkcih7dHlwZTpbaSRuXSxqc29uOnt3cml0ZTohMH19KV0sSi5wcm90b3R5cGUsXCJleHByZXNzaW9uSW5mb3NcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOltjJENdfSldLEoucHJvdG90eXBlLFwiZmllbGRJbmZvc1wiLHZvaWQgMCksZSR1KFtvJHYoXCJmaWVsZEluZm9zXCIpXSxKLnByb3RvdHlwZSxcIndyaXRlRmllbGRJbmZvc1wiLG51bGwpLGUkdShbeSRyKHt0eXBlOmEkbH0pXSxKLnByb3RvdHlwZSxcImxheWVyT3B0aW9uc1wiLHZvaWQgMCksZSR1KFtvJHYoXCJsYXllck9wdGlvbnNcIildLEoucHJvdG90eXBlLFwid3JpdGVMYXllck9wdGlvbnNcIixudWxsKSxlJHUoW3kkcih7dHlwZTpCb29sZWFuLGpzb246e3JlYWQ6e3NvdXJjZTpcInNob3dMYXN0RWRpdEluZm9cIn0sd3JpdGU6e3RhcmdldDpcInNob3dMYXN0RWRpdEluZm9cIn0sZGVmYXVsdDohMH19KV0sSi5wcm90b3R5cGUsXCJsYXN0RWRpdEluZm9FbmFibGVkXCIsdm9pZCAwKSxlJHUoW3kkcigpXSxKLnByb3RvdHlwZSxcIm91dEZpZWxkc1wiLHZvaWQgMCksZSR1KFt5JHIoKV0sSi5wcm90b3R5cGUsXCJvdmVyd3JpdGVBY3Rpb25zXCIsdm9pZCAwKSxlJHUoW3kkcigpXSxKLnByb3RvdHlwZSxcInJldHVybkdlb21ldHJ5XCIsdm9pZCAwKSxlJHUoW3kkcih7anNvbjp7dHlwZTpTdHJpbmd9fSldLEoucHJvdG90eXBlLFwidGl0bGVcIix2b2lkIDApLGUkdShbbyR2KFwidGl0bGVcIildLEoucHJvdG90eXBlLFwid3JpdGVUaXRsZVwiLG51bGwpLGUkdShbeSRyKHt0eXBlOmMkdyxqc29uOnt3cml0ZTohMH19KV0sSi5wcm90b3R5cGUsXCJyZWxhdGVkUmVjb3Jkc0luZm9cIix2b2lkIDApLEo9TyQxPWUkdShbaSRYKGIkNildLEopO3ZhciBNJDE9SjtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmNvbnN0IHAkdT1uZXcgdCRJKHtlc3JpU01TOlwic2ltcGxlLW1hcmtlclwiLGVzcmlQTVM6XCJwaWN0dXJlLW1hcmtlclwiLGVzcmlTTFM6XCJzaW1wbGUtbGluZVwiLGVzcmlTRlM6XCJzaW1wbGUtZmlsbFwiLGVzcmlQRlM6XCJwaWN0dXJlLWZpbGxcIixlc3JpVFM6XCJ0ZXh0XCIsZXNyaVNIRDpcInNoaWVsZC1sYWJlbC1zeW1ib2xcIixQb2ludFN5bWJvbDNEOlwicG9pbnQtM2RcIixMaW5lU3ltYm9sM0Q6XCJsaW5lLTNkXCIsUG9seWdvblN5bWJvbDNEOlwicG9seWdvbi0zZFwiLFdlYlN0eWxlU3ltYm9sOlwid2ViLXN0eWxlXCIsTWVzaFN5bWJvbDNEOlwibWVzaC0zZFwiLExhYmVsU3ltYm9sM0Q6XCJsYWJlbC0zZFwiLENJTVN5bWJvbFJlZmVyZW5jZTpcImNpbVwifSk7bGV0IGMkdD0wLG0kaD1jbGFzcyBleHRlbmRzIGEkQntjb25zdHJ1Y3RvcihyKXtzdXBlcihyKSx0aGlzLmlkPVwic3ltXCIrYyR0KyssdGhpcy50eXBlPW51bGw7fXNldCBjb2xvcihyKXt0aGlzLl9zZXQoXCJjb2xvclwiLHIpO31yZWFkQ29sb3Iocil7cmV0dXJuIHImJm51bGwhPXJbMF0/W3JbMF0sclsxXSxyWzJdLHJbM10vMjU1XTpyfWFzeW5jIGNvbGxlY3RSZXF1aXJlZEZpZWxkcyhyLG8pe31oYXNoKCl7cmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMudG9KU09OKCkpfWNsb25lKCl7fX07ZSR1KFt5JHIoe3R5cGU6cCR1LmFwaVZhbHVlcyxyZWFkT25seTohMCxqc29uOntyZWFkOiExLHdyaXRlOntpZ25vcmVPcmlnaW46ITAsd3JpdGVyOnAkdS53cml0ZX19fSldLG0kaC5wcm90b3R5cGUsXCJ0eXBlXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpvJGosdmFsdWU6bmV3IG8kaihbMCwwLDAsMV0pLGpzb246e3dyaXRlOnthbGxvd051bGw6ITB9fX0pXSxtJGgucHJvdG90eXBlLFwiY29sb3JcIixudWxsKSxlJHUoW2UkQyhcImNvbG9yXCIpXSxtJGgucHJvdG90eXBlLFwicmVhZENvbG9yXCIsbnVsbCksbSRoPWUkdShbaSRYKFwiZXNyaS5zeW1ib2xzLlN5bWJvbFwiKV0sbSRoKTt2YXIgbiRvPW0kaDtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbnZhciBuJG47bGV0IGwkcT1uJG49Y2xhc3MgZXh0ZW5kcyBuJG97Y29uc3RydWN0b3Iocil7c3VwZXIociksdGhpcy5kYXRhPW51bGwsdGhpcy50eXBlPVwiY2ltXCI7fXJlYWREYXRhKHIsbyl7cmV0dXJuIG99d3JpdGVEYXRhKHIsbyl7aWYocilmb3IoY29uc3QgdCBpbiByKW9bdF09clt0XTt9YXN5bmMgY29sbGVjdFJlcXVpcmVkRmllbGRzKHIsbyl7aWYoXCJDSU1TeW1ib2xSZWZlcmVuY2VcIj09PXRoaXMuZGF0YS50eXBlKXtjb25zdCB0PXRoaXMuZGF0YS5wcmltaXRpdmVPdmVycmlkZXM7aWYodCl7Y29uc3QgZT10Lm1hcCgodD0+e2NvbnN0IGU9dC52YWx1ZUV4cHJlc3Npb25JbmZvO3JldHVybiB3JDQocixvLGUuZXhwcmVzc2lvbil9KSk7YXdhaXQgUHJvbWlzZS5hbGwoZSk7fX19Y2xvbmUoKXtyZXR1cm4gbmV3IG4kbih7ZGF0YTp5JHYodGhpcy5kYXRhKX0pfWhhc2goKXtyZXR1cm4gYyQxMihKU09OLnN0cmluZ2lmeSh0aGlzLmRhdGEpKS50b1N0cmluZygpfX07ZSR1KFt5JHIoe2pzb246e3dyaXRlOiExfX0pXSxsJHEucHJvdG90eXBlLFwiY29sb3JcIix2b2lkIDApLGUkdShbeSRyKHtqc29uOnt3cml0ZTohMH19KV0sbCRxLnByb3RvdHlwZSxcImRhdGFcIix2b2lkIDApLGUkdShbZSRDKFwiZGF0YVwiLFtcInN5bWJvbFwiXSldLGwkcS5wcm90b3R5cGUsXCJyZWFkRGF0YVwiLG51bGwpLGUkdShbbyR2KFwiZGF0YVwiKV0sbCRxLnByb3RvdHlwZSxcIndyaXRlRGF0YVwiLG51bGwpLGUkdShbciR2KHtDSU1TeW1ib2xSZWZlcmVuY2U6XCJjaW1cIn0se3JlYWRPbmx5OiEwfSldLGwkcS5wcm90b3R5cGUsXCJ0eXBlXCIsdm9pZCAwKSxsJHE9biRuPWUkdShbaSRYKFwiZXNyaS5zeW1ib2xzLkNJTVN5bWJvbFwiKV0sbCRxKTt2YXIgZCRqPWwkcTtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmxldCBwJHQ9Y2xhc3MgZXh0ZW5kcyBhJEJ7Y29uc3RydWN0b3Iocil7c3VwZXIociksdGhpcy5lbmFibGVkPSEwLHRoaXMudHlwZT1udWxsO313cml0ZUVuYWJsZWQocixlLG8pe3J8fChlW29dPXIpO319O2UkdShbeSRyKHt0eXBlOkJvb2xlYW4sanNvbjp7cmVhZDp7c291cmNlOlwiZW5hYmxlXCJ9LHdyaXRlOnt0YXJnZXQ6XCJlbmFibGVcIn19fSldLHAkdC5wcm90b3R5cGUsXCJlbmFibGVkXCIsdm9pZCAwKSxlJHUoW28kdihcImVuYWJsZWRcIildLHAkdC5wcm90b3R5cGUsXCJ3cml0ZUVuYWJsZWRcIixudWxsKSxlJHUoW3kkcih7dHlwZTpbXCJpY29uXCIsXCJvYmplY3RcIixcImxpbmVcIixcInBhdGhcIixcImZpbGxcIixcIndhdGVyXCIsXCJleHRydWRlXCIsXCJ0ZXh0XCJdLHJlYWRPbmx5OiEwfSldLHAkdC5wcm90b3R5cGUsXCJ0eXBlXCIsdm9pZCAwKSxwJHQ9ZSR1KFtpJFgoXCJlc3JpLnN5bWJvbHMuU3ltYm9sM0RMYXllclwiKV0scCR0KTt2YXIgYyRzPXAkdDtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmNvbnN0IG4kbT0vXi0/KFxcZCsoXFwuXFxkKyk/KVxccyooKHB4KXwocHQpKT8kL2ksdCRjPVwic2NyZWVuVXRpbHMudG9QdDogaW5wdXQgbm90IHJlY29nbml6ZWQhXCIsciQ1PTk2O2Z1bmN0aW9uIHUkaChuKXtyZXR1cm4gbj9uLzcyKnIkNTowfWZ1bmN0aW9uIGUkYShuKXtyZXR1cm4gbj83MipuL3IkNTowfWZ1bmN0aW9uIG8kNihyKXtpZihcInN0cmluZ1wiPT10eXBlb2Ygcil7aWYobiRtLnRlc3Qocikpe2NvbnN0IHQ9ci5tYXRjaChuJG0pLHU9TnVtYmVyKHRbMV0pLG89dFszXSYmdFszXS50b0xvd2VyQ2FzZSgpLGM9XCItXCI9PT1yLmNoYXJBdCgwKSxpPVwicHhcIj09PW8/ZSRhKHUpOnU7cmV0dXJuIGM/LWk6aX1yZXR1cm4gY29uc29sZS53YXJuKHQkYyksbnVsbH1yZXR1cm4gcn1mdW5jdGlvbiBjJHIobj0wLHQ9MCl7cmV0dXJuIHt4Om4seTp0fX1mdW5jdGlvbiBwJHMobil7cmV0dXJuIG59XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5mdW5jdGlvbiBuJGwobil7Y29uc3Qgcj1hJFAoMTAwKigxLW4pKTtyZXR1cm4gTWF0aC5tYXgoMCxNYXRoLm1pbihyLDEwMCkpfWZ1bmN0aW9uIHIkNCh0KXtjb25zdCBuPTEtdC8xMDA7cmV0dXJuIE1hdGgubWF4KDAsTWF0aC5taW4obiwxKSl9XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5mdW5jdGlvbiBzJDkocix0KXtjb25zdCBuPW51bGwhPXQudHJhbnNwYXJlbmN5P3IkNCh0LnRyYW5zcGFyZW5jeSk6MSxzPXQuY29sb3I7cmV0dXJuIHMmJkFycmF5LmlzQXJyYXkocyk/bmV3IG8kaihbc1swXXx8MCxzWzFdfHwwLHNbMl18fDAsbl0pOm51bGx9ZnVuY3Rpb24gYSRqKHIsZSl7ZS5jb2xvcj1yLnRvSlNPTigpLnNsaWNlKDAsMyk7Y29uc3QgdD1uJGwoci5hKTswIT09dCYmKGUudHJhbnNwYXJlbmN5PXQpO31jb25zdCBjJHE9e3R5cGU6byRqLGpzb246e3R5cGU6W04kNV0sZGVmYXVsdDpudWxsLHJlYWQ6e3NvdXJjZTpbXCJjb2xvclwiLFwidHJhbnNwYXJlbmN5XCJdLHJlYWRlcjpzJDl9LHdyaXRlOnt0YXJnZXQ6e2NvbG9yOnt0eXBlOltOJDVdfSx0cmFuc3BhcmVuY3k6e3R5cGU6TiQ1fX0sd3JpdGVyOmEkan19fSxwJHI9e3R5cGU6TnVtYmVyLGNhc3Q6byQ2LGpzb246e3dyaXRlOiEwfX0sbCRwPXt0eXBlOltOdW1iZXJdLGNhc3Q6cj0+bnVsbCE9cj9yOkFycmF5LmlzQXJyYXkocik/ci5tYXAobyQ2KTpudWxsLGpzb246e3JlYWQ6ITEsd3JpdGU6ITF9fTtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmxldCBsJG89Y2xhc3MgZXh0ZW5kcyBhJEJ7Y29uc3RydWN0b3Iobyl7c3VwZXIobyksdGhpcy5jb2xvcj1uZXcgbyRqKFswLDAsMCwxXSksdGhpcy5leHRlbnNpb25MZW5ndGg9MCx0aGlzLnNpemU9ZSRhKDEpO31jbG9uZSgpe31jbG9uZVByb3BlcnRpZXMoKXtyZXR1cm4ge2NvbG9yOnkkdih0aGlzLmNvbG9yKSxzaXplOnRoaXMuc2l6ZSxleHRlbnNpb25MZW5ndGg6dGhpcy5leHRlbnNpb25MZW5ndGh9fX07ZSR1KFt5JHIoe3R5cGU6W1wic29saWRcIixcInNrZXRjaFwiXSxyZWFkT25seTohMCxqc29uOntyZWFkOiEwLHdyaXRlOntpZ25vcmVPcmlnaW46ITB9fX0pXSxsJG8ucHJvdG90eXBlLFwidHlwZVwiLHZvaWQgMCksZSR1KFt5JHIoYyRxKV0sbCRvLnByb3RvdHlwZSxcImNvbG9yXCIsdm9pZCAwKSxlJHUoW3kkcih7Li4ucCRyLGpzb246e3dyaXRlOntvdmVycmlkZVBvbGljeTpvPT4oe2VuYWJsZWQ6ISFvfSl9fX0pXSxsJG8ucHJvdG90eXBlLFwiZXh0ZW5zaW9uTGVuZ3RoXCIsdm9pZCAwKSxlJHUoW3kkcihwJHIpXSxsJG8ucHJvdG90eXBlLFwic2l6ZVwiLHZvaWQgMCksbCRvPWUkdShbaSRYKFwiZXNyaS5zeW1ib2xzLmVkZ2VzLkVkZ2VzM0RcIildLGwkbyk7dmFyIG0kZz1sJG87XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG52YXIgdCRiO2xldCBwJHE9dCRiPWNsYXNzIGV4dGVuZHMgbSRne2NvbnN0cnVjdG9yKHIpe3N1cGVyKHIpLHRoaXMudHlwZT1cInNrZXRjaFwiO31jbG9uZSgpe3JldHVybiBuZXcgdCRiKHRoaXMuY2xvbmVQcm9wZXJ0aWVzKCkpfX07ZSR1KFtyJHYoe3NrZXRjaDpcInNrZXRjaFwifSx7cmVhZE9ubHk6ITB9KV0scCRxLnByb3RvdHlwZSxcInR5cGVcIix2b2lkIDApLHAkcT10JGI9ZSR1KFtpJFgoXCJlc3JpLnN5bWJvbHMuZWRnZXMuU2tldGNoRWRnZXMzRFwiKV0scCRxKTt2YXIgYyRwPXAkcTtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbnZhciB0JGE7bGV0IHAkcD10JGE9Y2xhc3MgZXh0ZW5kcyBtJGd7Y29uc3RydWN0b3Iocil7c3VwZXIociksdGhpcy50eXBlPVwic29saWRcIjt9Y2xvbmUoKXtyZXR1cm4gbmV3IHQkYSh0aGlzLmNsb25lUHJvcGVydGllcygpKX19O2UkdShbciR2KHtzb2xpZDpcInNvbGlkXCJ9LHtyZWFkT25seTohMH0pXSxwJHAucHJvdG90eXBlLFwidHlwZVwiLHZvaWQgMCkscCRwPXQkYT1lJHUoW2kkWChcImVzcmkuc3ltYm9scy5zdXBwb3J0LlNvbGlkRWRnZXMzRFwiKV0scCRwKTt2YXIgYyRvPXAkcDtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmNvbnN0IHQkOT17dHlwZXM6e2tleTpcInR5cGVcIixiYXNlOm0kZyx0eXBlTWFwOntzb2xpZDpjJG8sc2tldGNoOmMkcH19LGpzb246e3dyaXRlOiEwfX07XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG52YXIgYyRuO2xldCBpJGk9YyRuPWNsYXNzIGV4dGVuZHMgYSRCe2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLmNvbG9yPW51bGw7fWNsb25lKCl7cmV0dXJuIG5ldyBjJG4oe2NvbG9yOnIkQSh0aGlzLmNvbG9yKT90aGlzLmNvbG9yLmNsb25lKCk6bnVsbH0pfX07ZSR1KFt5JHIoYyRxKV0saSRpLnByb3RvdHlwZSxcImNvbG9yXCIsdm9pZCAwKSxpJGk9YyRuPWUkdShbaSRYKFwiZXNyaS5zeW1ib2xzLnN1cHBvcnQuU3ltYm9sM0RNYXRlcmlhbFwiKV0saSRpKTt2YXIgbCRuPWkkaTtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbnZhciBsJG07bGV0IG0kZj1sJG09Y2xhc3MgZXh0ZW5kcyBjJHN7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy50eXBlPVwiZXh0cnVkZVwiLHRoaXMuc2l6ZT0xLHRoaXMubWF0ZXJpYWw9bnVsbCx0aGlzLmNhc3RTaGFkb3dzPSEwLHRoaXMuZWRnZXM9bnVsbDt9Y2xvbmUoKXtyZXR1cm4gbmV3IGwkbSh7ZWRnZXM6dGhpcy5lZGdlcyYmdGhpcy5lZGdlcy5jbG9uZSgpLGVuYWJsZWQ6dGhpcy5lbmFibGVkLG1hdGVyaWFsOnIkQSh0aGlzLm1hdGVyaWFsKT90aGlzLm1hdGVyaWFsLmNsb25lKCk6bnVsbCxjYXN0U2hhZG93czp0aGlzLmNhc3RTaGFkb3dzLHNpemU6dGhpcy5zaXplfSl9fTtlJHUoW3Ikdih7RXh0cnVkZTpcImV4dHJ1ZGVcIn0se3JlYWRPbmx5OiEwfSldLG0kZi5wcm90b3R5cGUsXCJ0eXBlXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpOdW1iZXIsanNvbjp7d3JpdGU6e2VuYWJsZWQ6ITAsaXNSZXF1aXJlZDohMH19LG5vbk51bGxhYmxlOiEwfSldLG0kZi5wcm90b3R5cGUsXCJzaXplXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpsJG4sanNvbjp7d3JpdGU6ITB9fSldLG0kZi5wcm90b3R5cGUsXCJtYXRlcmlhbFwiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6Qm9vbGVhbixub25OdWxsYWJsZTohMCxqc29uOnt3cml0ZTohMCxkZWZhdWx0OiEwfX0pXSxtJGYucHJvdG90eXBlLFwiY2FzdFNoYWRvd3NcIix2b2lkIDApLGUkdShbeSRyKHQkOSldLG0kZi5wcm90b3R5cGUsXCJlZGdlc1wiLHZvaWQgMCksbSRmPWwkbT1lJHUoW2kkWChcImVzcmkuc3ltYm9scy5FeHRydWRlU3ltYm9sM0RMYXllclwiKV0sbSRmKTt2YXIgYyRtPW0kZjtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmxldCBpJGg9Y2xhc3MgZXh0ZW5kcyBuJG97Y29uc3RydWN0b3Iocil7c3VwZXIociksdGhpcy50eXBlPVwic2ltcGxlLWxpbmVcIix0aGlzLndpZHRoPS43NTt9aGFzaCgpe3JldHVybiBgJHt0aGlzLnR5cGV9LiR7dGhpcy53aWR0aH1gfX07ZSR1KFtyJHYoe2VzcmlTTFM6XCJzaW1wbGUtbGluZVwifSx7cmVhZE9ubHk6ITB9KV0saSRoLnByb3RvdHlwZSxcInR5cGVcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOk51bWJlcixjYXN0Om8kNixqc29uOnt3cml0ZTohMH19KV0saSRoLnByb3RvdHlwZSxcIndpZHRoXCIsdm9pZCAwKSxpJGg9ZSR1KFtpJFgoXCJlc3JpLnN5bWJvbHMuTGluZVN5bWJvbFwiKV0saSRoKTt2YXIgYyRsPWkkaDtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbnZhciBhJGk7bGV0IG4kaz1hJGk9Y2xhc3MgZXh0ZW5kcyBhJEJ7Y29uc3RydWN0b3Iocil7c3VwZXIociksdGhpcy5wbGFjZW1lbnQ9XCJiZWdpbi1lbmRcIix0aGlzLnR5cGU9XCJsaW5lLW1hcmtlclwiLHRoaXMuc3R5bGU9XCJhcnJvd1wiO313cml0ZVN0eWxlKHIsbyxlLHQpe1wid2ViLW1hcFwiPT09KG51bGw9PXQ/dm9pZCAwOnQub3JpZ2luKT9vW2VdPVwiYXJyb3dcIjpvW2VdPXI7fXNldCBjb2xvcihyKXt0aGlzLl9zZXQoXCJjb2xvclwiLHIpO31yZWFkQ29sb3Iocil7cmV0dXJuIHImJm51bGwhPXJbMF0/W3JbMF0sclsxXSxyWzJdLHJbM10vMjU1XTpyfXdyaXRlQ29sb3IocixvLGUsdCl7XCJ3ZWItbWFwXCI9PT0obnVsbD09dD92b2lkIDA6dC5vcmlnaW4pfHwob1tlXT1yKTt9Y2xvbmUoKXtyZXR1cm4gbmV3IGEkaSh7Y29sb3I6eSR2KHRoaXMuY29sb3IpLHBsYWNlbWVudDp0aGlzLnBsYWNlbWVudCxzdHlsZTp0aGlzLnN0eWxlfSl9aGFzaCgpe3ZhciByO3JldHVybiBgJHt0aGlzLnBsYWNlbWVudH0uJHtudWxsPT0ocj10aGlzLmNvbG9yKT92b2lkIDA6ci5oYXNoKCl9LiR7dGhpcy5zdHlsZX1gfX07ZSR1KFt5JHIoe3R5cGU6W1wiYmVnaW5cIixcImVuZFwiLFwiYmVnaW4tZW5kXCJdLGpzb246e3dyaXRlOiEwfX0pXSxuJGsucHJvdG90eXBlLFwicGxhY2VtZW50XCIsdm9pZCAwKSxlJHUoW3Ikdih7XCJsaW5lLW1hcmtlclwiOlwibGluZS1tYXJrZXJcIn0se3JlYWRPbmx5OiEwfSkseSRyKHtqc29uOntvcmlnaW5zOntcIndlYi1tYXBcIjp7d3JpdGU6ITF9fX19KV0sbiRrLnByb3RvdHlwZSxcInR5cGVcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOltcImFycm93XCIsXCJjaXJjbGVcIixcInNxdWFyZVwiLFwiZGlhbW9uZFwiLFwiY3Jvc3NcIixcInhcIl19KV0sbiRrLnByb3RvdHlwZSxcInN0eWxlXCIsdm9pZCAwKSxlJHUoW28kdihcInN0eWxlXCIpXSxuJGsucHJvdG90eXBlLFwid3JpdGVTdHlsZVwiLG51bGwpLGUkdShbeSRyKHt0eXBlOm8kaix2YWx1ZTpudWxsLGpzb246e3dyaXRlOnthbGxvd051bGw6ITB9fX0pXSxuJGsucHJvdG90eXBlLFwiY29sb3JcIixudWxsKSxlJHUoW2UkQyhcImNvbG9yXCIpXSxuJGsucHJvdG90eXBlLFwicmVhZENvbG9yXCIsbnVsbCksZSR1KFtvJHYoXCJjb2xvclwiKV0sbiRrLnByb3RvdHlwZSxcIndyaXRlQ29sb3JcIixudWxsKSxuJGs9YSRpPWUkdShbaSRYKFwiZXNyaS5zeW1ib2xzLkxpbmVTeW1ib2xNYXJrZXJcIildLG4kayk7dmFyIG0kZT1uJGs7XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG52YXIgcCRvO2NvbnN0IGgkZz1uZXcgdCRJKHtlc3JpU0xTU29saWQ6XCJzb2xpZFwiLGVzcmlTTFNEYXNoOlwiZGFzaFwiLGVzcmlTTFNEb3Q6XCJkb3RcIixlc3JpU0xTRGFzaERvdDpcImRhc2gtZG90XCIsZXNyaVNMU0Rhc2hEb3REb3Q6XCJsb25nLWRhc2gtZG90LWRvdFwiLGVzcmlTTFNOdWxsOlwibm9uZVwiLGVzcmlTTFNJbnNpZGVGcmFtZTpcImluc2lkZS1mcmFtZVwiLGVzcmlTTFNTaG9ydERhc2g6XCJzaG9ydC1kYXNoXCIsZXNyaVNMU1Nob3J0RG90Olwic2hvcnQtZG90XCIsZXNyaVNMU1Nob3J0RGFzaERvdDpcInNob3J0LWRhc2gtZG90XCIsZXNyaVNMU1Nob3J0RGFzaERvdERvdDpcInNob3J0LWRhc2gtZG90LWRvdFwiLGVzcmlTTFNMb25nRGFzaDpcImxvbmctZGFzaFwiLGVzcmlTTFNMb25nRGFzaERvdDpcImxvbmctZGFzaC1kb3RcIn0pO2xldCBtJGQ9cCRvPWNsYXNzIGV4dGVuZHMgYyRse2NvbnN0cnVjdG9yKC4uLnIpe3N1cGVyKC4uLnIpLHRoaXMudHlwZT1cInNpbXBsZS1saW5lXCIsdGhpcy5zdHlsZT1cInNvbGlkXCIsdGhpcy5jYXA9XCJyb3VuZFwiLHRoaXMuam9pbj1cInJvdW5kXCIsdGhpcy5tYXJrZXI9bnVsbCx0aGlzLm1pdGVyTGltaXQ9Mjt9bm9ybWFsaXplQ3RvckFyZ3MocixvLGUsdCxzLGkpe2lmKHImJlwic3RyaW5nXCIhPXR5cGVvZiByKXJldHVybiByO2NvbnN0IG49e307cmV0dXJuIG51bGwhPXImJihuLnN0eWxlPXIpLG51bGwhPW8mJihuLmNvbG9yPW8pLG51bGwhPWUmJihuLndpZHRoPW8kNihlKSksbnVsbCE9dCYmKG4uY2FwPXQpLG51bGwhPXMmJihuLmpvaW49cyksbnVsbCE9aSYmKG4ubWl0ZXJMaW1pdD1vJDYoaSkpLG59Y2xvbmUoKXt2YXIgcjtyZXR1cm4gbmV3IHAkbyh7Y29sb3I6eSR2KHRoaXMuY29sb3IpLHN0eWxlOnRoaXMuc3R5bGUsd2lkdGg6dGhpcy53aWR0aCxjYXA6dGhpcy5jYXAsam9pbjp0aGlzLmpvaW4sbWl0ZXJMaW1pdDp0aGlzLm1pdGVyTGltaXQsbWFya2VyOm51bGw9PShyPXRoaXMubWFya2VyKT92b2lkIDA6ci5jbG9uZSgpfSl9aGFzaCgpe3ZhciByLG87cmV0dXJuIGAke3N1cGVyLmhhc2goKX0uJHtudWxsPT0ocj10aGlzLmNvbG9yKT92b2lkIDA6ci5oYXNoKCl9LiR7dGhpcy5zdHlsZX0uJHt0aGlzLmNhcH0uJHt0aGlzLmpvaW59LiR7dGhpcy5taXRlckxpbWl0fS4ke251bGw9PShvPXRoaXMubWFya2VyKT92b2lkIDA6by5oYXNoKCl9YH19O2UkdShbciR2KHtlc3JpU0xTOlwic2ltcGxlLWxpbmVcIn0se3JlYWRPbmx5OiEwfSldLG0kZC5wcm90b3R5cGUsXCJ0eXBlXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpoJGcuYXBpVmFsdWVzLGpzb246e3JlYWQ6aCRnLnJlYWQsd3JpdGU6aCRnLndyaXRlfX0pXSxtJGQucHJvdG90eXBlLFwic3R5bGVcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOltcImJ1dHRcIixcInJvdW5kXCIsXCJzcXVhcmVcIl0sanNvbjp7d3JpdGU6e292ZXJyaWRlUG9saWN5OihyLG8sZSk9Pih7ZW5hYmxlZDpcInJvdW5kXCIhPT1yJiYobnVsbD09ZXx8bnVsbD09ZS5vcmlnaW4pfSl9fX0pXSxtJGQucHJvdG90eXBlLFwiY2FwXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpbXCJtaXRlclwiLFwicm91bmRcIixcImJldmVsXCJdLGpzb246e3dyaXRlOntvdmVycmlkZVBvbGljeToocixvLGUpPT4oe2VuYWJsZWQ6XCJyb3VuZFwiIT09ciYmKG51bGw9PWV8fG51bGw9PWUub3JpZ2luKX0pfX19KV0sbSRkLnByb3RvdHlwZSxcImpvaW5cIix2b2lkIDApLGUkdShbeSRyKHt0eXBlczp7a2V5OlwidHlwZVwiLGJhc2U6bnVsbCxkZWZhdWx0S2V5VmFsdWU6XCJsaW5lLW1hcmtlclwiLHR5cGVNYXA6e1wibGluZS1tYXJrZXJcIjptJGV9fSxqc29uOnt3cml0ZTohMCxvcmlnaW5zOntcIndlYi1zY2VuZVwiOnt3cml0ZTohMX19fX0pXSxtJGQucHJvdG90eXBlLFwibWFya2VyXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpOdW1iZXIsanNvbjp7cmVhZDohMSx3cml0ZTohMX19KV0sbSRkLnByb3RvdHlwZSxcIm1pdGVyTGltaXRcIix2b2lkIDApLG0kZD1wJG89ZSR1KFtpJFgoXCJlc3JpLnN5bWJvbHMuU2ltcGxlTGluZVN5bWJvbFwiKV0sbSRkKTt2YXIgZCRpPW0kZDtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmxldCBwJG49Y2xhc3MgZXh0ZW5kcyBuJG97Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5vdXRsaW5lPW51bGwsdGhpcy50eXBlPW51bGw7fWhhc2goKXtyZXR1cm4gYCR7dGhpcy50eXBlfS4ke3RoaXMub3V0bGluZSYmdGhpcy5vdXRsaW5lLmhhc2goKX1gfX07ZSR1KFt5JHIoe3R5cGVzOntrZXk6XCJ0eXBlXCIsYmFzZTpudWxsLGRlZmF1bHRLZXlWYWx1ZTpcInNpbXBsZS1saW5lXCIsdHlwZU1hcDp7XCJzaW1wbGUtbGluZVwiOmQkaX19LGpzb246e2RlZmF1bHQ6bnVsbCx3cml0ZTohMH19KV0scCRuLnByb3RvdHlwZSxcIm91dGxpbmVcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOltcInNpbXBsZS1maWxsXCIsXCJwaWN0dXJlLWZpbGxcIl0scmVhZE9ubHk6ITB9KV0scCRuLnByb3RvdHlwZSxcInR5cGVcIix2b2lkIDApLHAkbj1lJHUoW2kkWChcImVzcmkuc3ltYm9scy5GaWxsU3ltYm9sXCIpXSxwJG4pO3ZhciBsJGw9cCRuO1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xubGV0IHQkOD1jbGFzcyBleHRlbmRzIGEkQntjb25zdHJ1Y3RvcihyKXtzdXBlcihyKTt9Y2xvbmUoKXt9fTtlJHUoW3kkcih7dHlwZTpbXCJzdHlsZVwiXSxyZWFkT25seTohMCxqc29uOntyZWFkOiEwLHdyaXRlOntpZ25vcmVPcmlnaW46ITB9fX0pXSx0JDgucHJvdG90eXBlLFwidHlwZVwiLHZvaWQgMCksdCQ4PWUkdShbaSRYKFwiZXNyaS5zeW1ib2xzLnBhdHRlcm5zLlBhdHRlcm4zRFwiKV0sdCQ4KTt2YXIgcCRtPXQkODtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbnZhciBhJGg9W1wiYmFja3dhcmQtZGlhZ29uYWxcIixcImNyb3NzXCIsXCJkaWFnb25hbC1jcm9zc1wiLFwiZm9yd2FyZC1kaWFnb25hbFwiLFwiaG9yaXpvbnRhbFwiLFwibm9uZVwiLFwic29saWRcIixcInZlcnRpY2FsXCJdO1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xudmFyIHAkbDtsZXQgaSRnPXAkbD1jbGFzcyBleHRlbmRzIHAkbXtjb25zdHJ1Y3RvcihyKXtzdXBlcihyKSx0aGlzLnR5cGU9XCJzdHlsZVwiLHRoaXMuc3R5bGU9XCJzb2xpZFwiO31jbG9uZSgpe3JldHVybiBuZXcgcCRsKHtzdHlsZTp0aGlzLnN0eWxlfSl9fTtlJHUoW3kkcih7dHlwZTpbXCJzdHlsZVwiXX0pXSxpJGcucHJvdG90eXBlLFwidHlwZVwiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6YSRoLGpzb246e3JlYWQ6ITAsd3JpdGU6ITB9fSldLGkkZy5wcm90b3R5cGUsXCJzdHlsZVwiLHZvaWQgMCksaSRnPXAkbD1lJHUoW2kkWChcImVzcmkuc3ltYm9scy5wYXR0ZXJucy5TdHlsZVBhdHRlcm4zRFwiKV0saSRnKTt2YXIgYyRrPWkkZztcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmZ1bmN0aW9uIHIkMyh0LHIscyl7aWYoIXQpcmV0dXJuIHQ7c3dpdGNoKHQudHlwZSl7Y2FzZVwic3R5bGVcIjp7Y29uc3Qgcj1uZXcgYyRrO3JldHVybiByLnJlYWQodCxzKSxyfX19Y29uc3QgcyQ4PXt0eXBlczp7a2V5OlwidHlwZVwiLGJhc2U6cCRtLHR5cGVNYXA6e3N0eWxlOmMka319LGpzb246e3JlYWQ6ciQzLHdyaXRlOiEwfX07XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5jb25zdCBvJDU9bmV3IG8kaihcIndoaXRlXCIpO25ldyBvJGooXCJibGFja1wiKTtjb25zdCBlJDk9bmV3IG8kaihbMjU1LDI1NSwyNTUsMF0pO2Z1bmN0aW9uIHQkNyhuKXtyZXR1cm4gMD09PW4uciYmMD09PW4uZyYmMD09PW4uYn1cblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbnZhciBwJGs7bGV0IGMkaj1wJGs9Y2xhc3MgZXh0ZW5kcyBsJG57Y2xvbmUoKXtyZXR1cm4gbmV3IHAkayh7Y29sb3I6ciRBKHRoaXMuY29sb3IpP3RoaXMuY29sb3IuY2xvbmUoKTpudWxsLGNvbG9yTWl4TW9kZTp0aGlzLmNvbG9yTWl4TW9kZX0pfX07ZSR1KFtyJHYoe211bHRpcGx5OlwibXVsdGlwbHlcIixyZXBsYWNlOlwicmVwbGFjZVwiLHRpbnQ6XCJ0aW50XCJ9KV0sYyRqLnByb3RvdHlwZSxcImNvbG9yTWl4TW9kZVwiLHZvaWQgMCksYyRqPXAkaz1lJHUoW2kkWChcImVzcmkuc3ltYm9scy5zdXBwb3J0LlN5bWJvbDNERmlsbE1hdGVyaWFsXCIpXSxjJGopO3ZhciBpJGY9YyRqO1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xudmFyIG4kajtsZXQgdSRnPW4kaj1jbGFzcyBleHRlbmRzIGEkQntjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5jb2xvcj1uZXcgbyRqKFswLDAsMCwxXSksdGhpcy5zaXplPWUkYSgxKSx0aGlzLnN0aXBwbGVQYXR0ZXJuPW51bGwsdGhpcy5zdGlwcGxlT2ZmQ29sb3I9bnVsbDt9Y2xvbmUoKXtyZXR1cm4gbmV3IG4kaih7Y29sb3I6ciRBKHRoaXMuY29sb3IpP3RoaXMuY29sb3IuY2xvbmUoKTpudWxsLHNpemU6dGhpcy5zaXplLHN0aXBwbGVQYXR0ZXJuOnRoaXMuc3RpcHBsZVBhdHRlcm4/dGhpcy5zdGlwcGxlUGF0dGVybi5zbGljZSgpOm51bGwsc3RpcHBsZU9mZkNvbG9yOnRoaXMuc3RpcHBsZU9mZkNvbG9yP3RoaXMuc3RpcHBsZU9mZkNvbG9yLmNsb25lKCk6bnVsbH0pfX07ZSR1KFt5JHIoYyRxKV0sdSRnLnByb3RvdHlwZSxcImNvbG9yXCIsdm9pZCAwKSxlJHUoW3kkcihwJHIpXSx1JGcucHJvdG90eXBlLFwic2l6ZVwiLHZvaWQgMCksZSR1KFt5JHIobCRwKV0sdSRnLnByb3RvdHlwZSxcInN0aXBwbGVQYXR0ZXJuXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpvJGp9KV0sdSRnLnByb3RvdHlwZSxcInN0aXBwbGVPZmZDb2xvclwiLHZvaWQgMCksdSRnPW4kaj1lJHUoW2kkWChcImVzcmkuc3ltYm9scy5zdXBwb3J0LlN5bWJvbDNET3V0bGluZVwiKV0sdSRnKTt2YXIgYSRnPXUkZztcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbnZhciBkJGg7bGV0IHkkOD1kJGg9Y2xhc3MgZXh0ZW5kcyBjJHN7Y29uc3RydWN0b3IodCl7c3VwZXIodCksdGhpcy50eXBlPVwiZmlsbFwiLHRoaXMubWF0ZXJpYWw9bnVsbCx0aGlzLnBhdHRlcm49bnVsbCx0aGlzLmNhc3RTaGFkb3dzPSEwLHRoaXMub3V0bGluZT1udWxsLHRoaXMuZWRnZXM9bnVsbDt9Y2xvbmUoKXtyZXR1cm4gbmV3IGQkaCh7ZWRnZXM6ciRBKHRoaXMuZWRnZXMpP3RoaXMuZWRnZXMuY2xvbmUoKTpudWxsLGVuYWJsZWQ6dGhpcy5lbmFibGVkLG1hdGVyaWFsOnIkQSh0aGlzLm1hdGVyaWFsKT90aGlzLm1hdGVyaWFsLmNsb25lKCk6bnVsbCxwYXR0ZXJuOnIkQSh0aGlzLnBhdHRlcm4pP3RoaXMucGF0dGVybi5jbG9uZSgpOm51bGwsY2FzdFNoYWRvd3M6dGhpcy5jYXN0U2hhZG93cyxvdXRsaW5lOnIkQSh0aGlzLm91dGxpbmUpP3RoaXMub3V0bGluZS5jbG9uZSgpOm51bGx9KX1zdGF0aWMgZnJvbVNpbXBsZUZpbGxTeW1ib2wodCl7cmV0dXJuIG5ldyBkJGgoe21hdGVyaWFsOntjb2xvcjoodC5jb2xvcnx8ZSQ5KS5jbG9uZSgpfSxwYXR0ZXJuOnQuc3R5bGUmJlwic29saWRcIiE9PXQuc3R5bGU/bmV3IGMkayh7c3R5bGU6dC5zdHlsZX0pOm51bGwsb3V0bGluZTp0Lm91dGxpbmU/bmV3IGEkZyh7c2l6ZTp0Lm91dGxpbmUud2lkdGh8fDAsY29sb3I6KHQub3V0bGluZS5jb2xvcnx8byQ1KS5jbG9uZSgpfSk6bnVsbH0pfX07ZSR1KFtyJHYoe0ZpbGw6XCJmaWxsXCJ9LHtyZWFkT25seTohMH0pXSx5JDgucHJvdG90eXBlLFwidHlwZVwiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6aSRmLGpzb246e3dyaXRlOiEwfX0pXSx5JDgucHJvdG90eXBlLFwibWF0ZXJpYWxcIix2b2lkIDApLGUkdShbeSRyKHMkOCldLHkkOC5wcm90b3R5cGUsXCJwYXR0ZXJuXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpCb29sZWFuLG5vbk51bGxhYmxlOiEwLGpzb246e3dyaXRlOiEwLGRlZmF1bHQ6ITB9fSldLHkkOC5wcm90b3R5cGUsXCJjYXN0U2hhZG93c1wiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6YSRnLGpzb246e3dyaXRlOiEwfX0pXSx5JDgucHJvdG90eXBlLFwib3V0bGluZVwiLHZvaWQgMCksZSR1KFt5JHIodCQ5KV0seSQ4LnByb3RvdHlwZSxcImVkZ2VzXCIsdm9pZCAwKSx5JDg9ZCRoPWUkdShbaSRYKFwiZXNyaS5zeW1ib2xzLkZpbGxTeW1ib2wzRExheWVyXCIpXSx5JDgpO3ZhciBoJGY9eSQ4O1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xudmFyIHAkajtsZXQgbCRrPXAkaj1jbGFzcyBleHRlbmRzIGEkQntjb25zdHJ1Y3RvcihvKXtzdXBlcihvKSx0aGlzLmRlY29yYXRpb249XCJub25lXCIsdGhpcy5mYW1pbHk9XCJzYW5zLXNlcmlmXCIsdGhpcy5zaXplPTksdGhpcy5zdHlsZT1cIm5vcm1hbFwiLHRoaXMud2VpZ2h0PVwibm9ybWFsXCI7fWNhc3RTaXplKG8pe3JldHVybiBvJDYobyl9Y2xvbmUoKXtyZXR1cm4gbmV3IHAkaih7ZGVjb3JhdGlvbjp0aGlzLmRlY29yYXRpb24sZmFtaWx5OnRoaXMuZmFtaWx5LHNpemU6dGhpcy5zaXplLHN0eWxlOnRoaXMuc3R5bGUsd2VpZ2h0OnRoaXMud2VpZ2h0fSl9aGFzaCgpe3JldHVybiBgJHt0aGlzLmRlY29yYXRpb259LiR7dGhpcy5mYW1pbHl9LiR7dGhpcy5zaXplfS4ke3RoaXMuc3R5bGV9LiR7dGhpcy53ZWlnaHR9YH19O2UkdShbeSRyKHt0eXBlOltcInVuZGVybGluZVwiLFwibGluZS10aHJvdWdoXCIsXCJub25lXCJdLGpzb246e2RlZmF1bHQ6XCJub25lXCIsd3JpdGU6ITB9fSldLGwkay5wcm90b3R5cGUsXCJkZWNvcmF0aW9uXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpTdHJpbmcsanNvbjp7d3JpdGU6ITB9fSldLGwkay5wcm90b3R5cGUsXCJmYW1pbHlcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOk51bWJlcixqc29uOnt3cml0ZTp7b3ZlcnJpZGVQb2xpY3k6KG8sdCxlKT0+KHtlbmFibGVkOiFlfHwhZS50ZXh0U3ltYm9sM0R9KX19fSldLGwkay5wcm90b3R5cGUsXCJzaXplXCIsdm9pZCAwKSxlJHUoW2MkXyhcInNpemVcIildLGwkay5wcm90b3R5cGUsXCJjYXN0U2l6ZVwiLG51bGwpLGUkdShbeSRyKHt0eXBlOltcIm5vcm1hbFwiLFwiaXRhbGljXCIsXCJvYmxpcXVlXCJdLGpzb246e2RlZmF1bHQ6XCJub3JtYWxcIix3cml0ZTohMH19KV0sbCRrLnByb3RvdHlwZSxcInN0eWxlXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpbXCJub3JtYWxcIixcImJvbGRcIixcImJvbGRlclwiLFwibGlnaHRlclwiXSxqc29uOntkZWZhdWx0Olwibm9ybWFsXCIsd3JpdGU6ITB9fSldLGwkay5wcm90b3R5cGUsXCJ3ZWlnaHRcIix2b2lkIDApLGwkaz1wJGo9ZSR1KFtpJFgoXCJlc3JpLnN5bWJvbHMuRm9udFwiKV0sbCRrKTt2YXIgbiRpPWwkaztcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbnZhciBsJGo7Y29uc3QgZCRnPW8kQSgpKHtjaXJjbGU6XCJjaXJjbGVcIixzcXVhcmU6XCJzcXVhcmVcIixjcm9zczpcImNyb3NzXCIseDpcInhcIixraXRlOlwia2l0ZVwiLHRyaWFuZ2xlOlwidHJpYW5nbGVcIn0pO2xldCBqJDg9bCRqPWNsYXNzIGV4dGVuZHMgYSRCe2NvbnN0cnVjdG9yKHIpe3N1cGVyKHIpO31yZWFkSHJlZihyLGUsbyl7cmV0dXJuIHI/YyRVKHIsbyk6ZS5kYXRhVVJJfXdyaXRlSHJlZihyLGUsbyx0KXtyJiYoRyQ2KHIpP2UuZGF0YVVSST1yOihlLmhyZWY9aSRXKHIsdCksUSQyKGUuaHJlZikmJihlLmhyZWY9eiQ2KGUuaHJlZikpKSk7fWNsb25lKCl7cmV0dXJuIG5ldyBsJGooe2hyZWY6dGhpcy5ocmVmLHByaW1pdGl2ZTp0aGlzLnByaW1pdGl2ZX0pfX07ZSR1KFt5JHIoe3R5cGU6U3RyaW5nLGpzb246e3dyaXRlOiEwLHJlYWQ6e3NvdXJjZTpbXCJocmVmXCIsXCJkYXRhVVJJXCJdfX19KV0saiQ4LnByb3RvdHlwZSxcImhyZWZcIix2b2lkIDApLGUkdShbZSRDKFwiaHJlZlwiKV0saiQ4LnByb3RvdHlwZSxcInJlYWRIcmVmXCIsbnVsbCksZSR1KFtvJHYoXCJocmVmXCIse2hyZWY6e3R5cGU6U3RyaW5nfSxkYXRhVVJJOnt0eXBlOlN0cmluZ319KV0saiQ4LnByb3RvdHlwZSxcIndyaXRlSHJlZlwiLG51bGwpLGUkdShbciR2KGQkZyldLGokOC5wcm90b3R5cGUsXCJwcmltaXRpdmVcIix2b2lkIDApLGokOD1sJGo9ZSR1KFtpJFgoXCJlc3JpLnN5bWJvbHMuc3VwcG9ydC5JY29uU3ltYm9sM0RMYXllclJlc291cmNlXCIpXSxqJDgpO3ZhciB5JDc9aiQ4O1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xudmFyIGUkODtsZXQgcCRpPWUkOD1jbGFzcyBleHRlbmRzIHUkRHtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy54PTAsdGhpcy55PTA7fWNsb25lKCl7cmV0dXJuIG5ldyBlJDgoe3g6dGhpcy54LHk6dGhpcy55fSl9fTtlJHUoW3kkcih7dHlwZTpOdW1iZXJ9KV0scCRpLnByb3RvdHlwZSxcInhcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOk51bWJlcn0pXSxwJGkucHJvdG90eXBlLFwieVwiLHZvaWQgMCkscCRpPWUkOD1lJHUoW2kkWChcImVzcmkuc3ltYm9scy5zdXBwb3J0LlN5bWJvbDNEQW5jaG9yUG9zaXRpb24yRFwiKV0scCRpKTtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbnZhciBkJGY7Y29uc3QgZiQ5PW4kVC5nZXRMb2dnZXIoXCJlc3JpLnN5bWJvbHMuSWNvblN5bWJvbDNETGF5ZXJcIik7bGV0IGIkNT1kJGY9Y2xhc3MgZXh0ZW5kcyBjJHN7Y29uc3RydWN0b3Iobyl7c3VwZXIobyksdGhpcy5tYXRlcmlhbD1udWxsLHRoaXMucmVzb3VyY2U9bnVsbCx0aGlzLnR5cGU9XCJpY29uXCIsdGhpcy5zaXplPTEyLHRoaXMuYW5jaG9yPVwiY2VudGVyXCIsdGhpcy5hbmNob3JQb3NpdGlvbj12b2lkIDAsdGhpcy5vdXRsaW5lPXZvaWQgMDt9Y2xvbmUoKXtyZXR1cm4gbmV3IGQkZih7YW5jaG9yOnRoaXMuYW5jaG9yLGFuY2hvclBvc2l0aW9uOnRoaXMuYW5jaG9yUG9zaXRpb24mJnRoaXMuYW5jaG9yUG9zaXRpb24uY2xvbmUoKSxlbmFibGVkOnRoaXMuZW5hYmxlZCxtYXRlcmlhbDpyJEEodGhpcy5tYXRlcmlhbCk/dGhpcy5tYXRlcmlhbC5jbG9uZSgpOm51bGwsb3V0bGluZTpyJEEodGhpcy5vdXRsaW5lKT90aGlzLm91dGxpbmUuY2xvbmUoKTpudWxsLHJlc291cmNlOnRoaXMucmVzb3VyY2UmJnRoaXMucmVzb3VyY2UuY2xvbmUoKSxzaXplOnRoaXMuc2l6ZX0pfXN0YXRpYyBmcm9tU2ltcGxlTWFya2VyU3ltYm9sKG8pe2NvbnN0IHQ9by5jb2xvcnx8byQ1LHI9aiQ3KG8pLGU9by5vdXRsaW5lJiZvLm91dGxpbmUud2lkdGg+MD97c2l6ZTpvLm91dGxpbmUud2lkdGgsY29sb3I6KG8ub3V0bGluZS5jb2xvcnx8byQ1KS5jbG9uZSgpfTpudWxsO3JldHVybiBuZXcgZCRmKHtzaXplOm8uc2l6ZSxyZXNvdXJjZTp7cHJpbWl0aXZlOnckMyhvLnN0eWxlKX0sbWF0ZXJpYWw6e2NvbG9yOnR9LG91dGxpbmU6ZSxhbmNob3I6cj9cInJlbGF0aXZlXCI6dm9pZCAwLGFuY2hvclBvc2l0aW9uOnJ9KX1zdGF0aWMgZnJvbVBpY3R1cmVNYXJrZXJTeW1ib2wobyl7Y29uc3QgdD0hby5jb2xvcnx8dCQ3KG8uY29sb3IpP28kNTpvLmNvbG9yLHI9aiQ3KG8pO3JldHVybiBuZXcgZCRmKHtzaXplOm8ud2lkdGg8PW8uaGVpZ2h0P28uaGVpZ2h0Om8ud2lkdGgscmVzb3VyY2U6e2hyZWY6by51cmx9LG1hdGVyaWFsOntjb2xvcjp0LmNsb25lKCl9LGFuY2hvcjpyP1wicmVsYXRpdmVcIjp2b2lkIDAsYW5jaG9yUG9zaXRpb246cn0pfXN0YXRpYyBmcm9tQ0lNU3ltYm9sKG8pe3JldHVybiBuZXcgZCRmKHtyZXNvdXJjZTp7aHJlZjpYJDIoe21lZGlhVHlwZTpcImFwcGxpY2F0aW9uL2pzb25cIixkYXRhOkpTT04uc3RyaW5naWZ5KG8uZGF0YSl9KX19KX19O2Z1bmN0aW9uIGokNyhvKXtjb25zdCB0PVwid2lkdGhcImluIG8/by53aWR0aDpvLnNpemUscj1cImhlaWdodFwiaW4gbz9vLmhlaWdodDpvLnNpemUsZT12JDQoby54b2Zmc2V0KSxpPXYkNChvLnlvZmZzZXQpO3JldHVybiAoZXx8aSkmJnQmJnI/e3g6LWUvdCx5Omkvcn06bnVsbH1mdW5jdGlvbiB2JDQobyl7cmV0dXJuIGlzRmluaXRlKG8pP286MH1lJHUoW3kkcih7dHlwZTpsJG4sanNvbjp7d3JpdGU6ITB9fSldLGIkNS5wcm90b3R5cGUsXCJtYXRlcmlhbFwiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6eSQ3LGpzb246e3dyaXRlOiEwfX0pXSxiJDUucHJvdG90eXBlLFwicmVzb3VyY2VcIix2b2lkIDApLGUkdShbciR2KHtJY29uOlwiaWNvblwifSx7cmVhZE9ubHk6ITB9KV0sYiQ1LnByb3RvdHlwZSxcInR5cGVcIix2b2lkIDApLGUkdShbeSRyKHAkcildLGIkNS5wcm90b3R5cGUsXCJzaXplXCIsdm9pZCAwKSxlJHUoW3Ikdih7Y2VudGVyOlwiY2VudGVyXCIsbGVmdDpcImxlZnRcIixyaWdodDpcInJpZ2h0XCIsdG9wOlwidG9wXCIsYm90dG9tOlwiYm90dG9tXCIsdG9wTGVmdDpcInRvcC1sZWZ0XCIsdG9wUmlnaHQ6XCJ0b3AtcmlnaHRcIixib3R0b21MZWZ0OlwiYm90dG9tLWxlZnRcIixib3R0b21SaWdodDpcImJvdHRvbS1yaWdodFwiLHJlbGF0aXZlOlwicmVsYXRpdmVcIn0pLHkkcih7anNvbjp7ZGVmYXVsdDpcImNlbnRlclwifX0pXSxiJDUucHJvdG90eXBlLFwiYW5jaG9yXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpwJGksanNvbjp7dHlwZTpbTnVtYmVyXSxyZWFkOntyZWFkZXI6bz0+bmV3IHAkaSh7eDpvWzBdLHk6b1sxXX0pfSx3cml0ZTp7d3JpdGVyOihvLHQpPT57dC5hbmNob3JQb3NpdGlvbj1bby54LG8ueV07fSxvdmVycmlkZVBvbGljeSgpe3JldHVybiB7ZW5hYmxlZDpcInJlbGF0aXZlXCI9PT10aGlzLmFuY2hvcn19fX19KV0sYiQ1LnByb3RvdHlwZSxcImFuY2hvclBvc2l0aW9uXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTphJGcsanNvbjp7d3JpdGU6ITB9fSldLGIkNS5wcm90b3R5cGUsXCJvdXRsaW5lXCIsdm9pZCAwKSxiJDU9ZCRmPWUkdShbaSRYKFwiZXNyaS5zeW1ib2xzLkljb25TeW1ib2wzRExheWVyXCIpXSxiJDUpO2NvbnN0IGckND17Y2lyY2xlOlwiY2lyY2xlXCIsY3Jvc3M6XCJjcm9zc1wiLGRpYW1vbmQ6XCJraXRlXCIsc3F1YXJlOlwic3F1YXJlXCIseDpcInhcIix0cmlhbmdsZTpcInRyaWFuZ2xlXCIscGF0aDpudWxsfTtmdW5jdGlvbiB3JDMobyl7Y29uc3QgdD1nJDRbb107cmV0dXJuIHR8fChmJDkud2FybihgJHtvfSBjYW5ub3QgYmUgbWFwcGVkIHRvIEljb24gc3ltYm9sLiBGYWxsYmFjayB0byBcImNpcmNsZVwiYCksXCJjaXJjbGVcIil9dmFyIFMkMz1iJDU7XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG52YXIgdSRmO2xldCBqJDY9dSRmPWNsYXNzIGV4dGVuZHMgYyRze2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpLHRoaXMubWF0ZXJpYWw9bnVsbCx0aGlzLnR5cGU9XCJsaW5lXCIsdGhpcy5qb2luPVwibWl0ZXJcIix0aGlzLmNhcD1cImJ1dHRcIix0aGlzLnNpemU9ZSRhKDEpLHRoaXMuc3RpcHBsZVBhdHRlcm49bnVsbCx0aGlzLnN0aXBwbGVPZmZDb2xvcj1udWxsO31jbG9uZSgpe3JldHVybiBuZXcgdSRmKHtlbmFibGVkOnRoaXMuZW5hYmxlZCxtYXRlcmlhbDpyJEEodGhpcy5tYXRlcmlhbCk/dGhpcy5tYXRlcmlhbC5jbG9uZSgpOm51bGwsc2l6ZTp0aGlzLnNpemUsam9pbjp0aGlzLmpvaW4sY2FwOnRoaXMuY2FwLHN0aXBwbGVQYXR0ZXJuOnRoaXMuc3RpcHBsZVBhdHRlcm4/dGhpcy5zdGlwcGxlUGF0dGVybi5zbGljZSgpOm51bGwsc3RpcHBsZU9mZkNvbG9yOnRoaXMuc3RpcHBsZU9mZkNvbG9yP3RoaXMuc3RpcHBsZU9mZkNvbG9yLmNsb25lKCk6bnVsbH0pfXN0YXRpYyBmcm9tU2ltcGxlTGluZVN5bWJvbCh0KXtyZXR1cm4gbmV3IHUkZih7c2l6ZTp0LndpZHRofHwxLGNhcDp0LmNhcHx8XCJidXR0XCIsam9pbjp0LmpvaW58fFwibWl0ZXJcIixtYXRlcmlhbDp7Y29sb3I6KHQuY29sb3J8fG8kNSkuY2xvbmUoKX19KX19O2UkdShbeSRyKHt0eXBlOmwkbixqc29uOnt3cml0ZTohMH19KV0saiQ2LnByb3RvdHlwZSxcIm1hdGVyaWFsXCIsdm9pZCAwKSxlJHUoW3Ikdih7TGluZTpcImxpbmVcIn0se3JlYWRPbmx5OiEwfSldLGokNi5wcm90b3R5cGUsXCJ0eXBlXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpbXCJtaXRlclwiLFwiYmV2ZWxcIixcInJvdW5kXCJdLGpzb246e3dyaXRlOiEwLGRlZmF1bHQ6XCJtaXRlclwifX0pXSxqJDYucHJvdG90eXBlLFwiam9pblwiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6W1wiYnV0dFwiLFwic3F1YXJlXCIsXCJyb3VuZFwiXSxqc29uOnt3cml0ZTohMCxkZWZhdWx0OlwiYnV0dFwifX0pXSxqJDYucHJvdG90eXBlLFwiY2FwXCIsdm9pZCAwKSxlJHUoW3kkcihwJHIpXSxqJDYucHJvdG90eXBlLFwic2l6ZVwiLHZvaWQgMCksZSR1KFt5JHIobCRwKV0saiQ2LnByb3RvdHlwZSxcInN0aXBwbGVQYXR0ZXJuXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpvJGp9KV0saiQ2LnByb3RvdHlwZSxcInN0aXBwbGVPZmZDb2xvclwiLHZvaWQgMCksaiQ2PXUkZj1lJHUoW2kkWChcImVzcmkuc3ltYm9scy5MaW5lU3ltYm9sM0RMYXllclwiKV0saiQ2KTt2YXIgZiQ4PWokNjtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbnZhciBtJGM7Y29uc3QgbiRoPW8kQSgpKHtzcGhlcmU6XCJzcGhlcmVcIixjeWxpbmRlcjpcImN5bGluZGVyXCIsY3ViZTpcImN1YmVcIixjb25lOlwiY29uZVwiLGRpYW1vbmQ6XCJkaWFtb25kXCIsdGV0cmFoZWRyb246XCJ0ZXRyYWhlZHJvblwiLGludmVydGVkQ29uZTpcImludmVydGVkLWNvbmVcIn0pO2xldCBhJGY9bSRjPWNsYXNzIGV4dGVuZHMgYSRCe2Nsb25lKCl7cmV0dXJuIG5ldyBtJGMoe2hyZWY6dGhpcy5ocmVmLHByaW1pdGl2ZTp0aGlzLnByaW1pdGl2ZX0pfX07ZSR1KFt5JHIoe3R5cGU6U3RyaW5nLGpzb246e3JlYWQ6bSRCLHdyaXRlOnAkMTB9fSldLGEkZi5wcm90b3R5cGUsXCJocmVmXCIsdm9pZCAwKSxlJHUoW3IkdihuJGgpXSxhJGYucHJvdG90eXBlLFwicHJpbWl0aXZlXCIsdm9pZCAwKSxhJGY9bSRjPWUkdShbaSRYKFwiZXNyaS5zeW1ib2xzLnN1cHBvcnQuT2JqZWN0U3ltYm9sM0RMYXllclJlc291cmNlXCIpXSxhJGYpO3ZhciBkJGU9YSRmO1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xudmFyIGUkNztsZXQgcCRoPWUkNz1jbGFzcyBleHRlbmRzIHUkRHtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy54PTAsdGhpcy55PTAsdGhpcy56PTA7fWNsb25lKCl7cmV0dXJuIG5ldyBlJDcoe3g6dGhpcy54LHk6dGhpcy55LHo6dGhpcy56fSl9fTtlJHUoW3kkcih7dHlwZTpOdW1iZXJ9KV0scCRoLnByb3RvdHlwZSxcInhcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOk51bWJlcn0pXSxwJGgucHJvdG90eXBlLFwieVwiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6TnVtYmVyfSldLHAkaC5wcm90b3R5cGUsXCJ6XCIsdm9pZCAwKSxwJGg9ZSQ3PWUkdShbaSRYKFwiZXNyaS5zeW1ib2xzLnN1cHBvcnQuU3ltYm9sM0RBbmNob3JQb3NpdGlvbjNEXCIpXSxwJGgpO1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xudmFyIG4kZztsZXQgYyRpPW4kZz1jbGFzcyBleHRlbmRzIGMkc3tjb25zdHJ1Y3RvcihvKXtzdXBlcihvKSx0aGlzLm1hdGVyaWFsPW51bGwsdGhpcy5jYXN0U2hhZG93cz0hMCx0aGlzLnJlc291cmNlPW51bGwsdGhpcy50eXBlPVwib2JqZWN0XCIsdGhpcy53aWR0aD12b2lkIDAsdGhpcy5oZWlnaHQ9dm9pZCAwLHRoaXMuZGVwdGg9dm9pZCAwLHRoaXMuYW5jaG9yPXZvaWQgMCx0aGlzLmFuY2hvclBvc2l0aW9uPXZvaWQgMCx0aGlzLmhlYWRpbmc9dm9pZCAwLHRoaXMudGlsdD12b2lkIDAsdGhpcy5yb2xsPXZvaWQgMDt9Y2xvbmUoKXtyZXR1cm4gbmV3IG4kZyh7aGVhZGluZzp0aGlzLmhlYWRpbmcsdGlsdDp0aGlzLnRpbHQscm9sbDp0aGlzLnJvbGwsYW5jaG9yOnRoaXMuYW5jaG9yLGFuY2hvclBvc2l0aW9uOnRoaXMuYW5jaG9yUG9zaXRpb24mJnRoaXMuYW5jaG9yUG9zaXRpb24uY2xvbmUoKSxkZXB0aDp0aGlzLmRlcHRoLGVuYWJsZWQ6dGhpcy5lbmFibGVkLGhlaWdodDp0aGlzLmhlaWdodCxtYXRlcmlhbDpyJEEodGhpcy5tYXRlcmlhbCk/dGhpcy5tYXRlcmlhbC5jbG9uZSgpOm51bGwsY2FzdFNoYWRvd3M6dGhpcy5jYXN0U2hhZG93cyxyZXNvdXJjZTp0aGlzLnJlc291cmNlJiZ0aGlzLnJlc291cmNlLmNsb25lKCksd2lkdGg6dGhpcy53aWR0aH0pfWdldCBpc1ByaW1pdGl2ZSgpe3JldHVybiAhdGhpcy5yZXNvdXJjZXx8XCJzdHJpbmdcIiE9dHlwZW9mIHRoaXMucmVzb3VyY2UuaHJlZn19O2UkdShbeSRyKHt0eXBlOmwkbixqc29uOnt3cml0ZTohMH19KV0sYyRpLnByb3RvdHlwZSxcIm1hdGVyaWFsXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpCb29sZWFuLG5vbk51bGxhYmxlOiEwLGpzb246e3dyaXRlOiEwLGRlZmF1bHQ6ITB9fSldLGMkaS5wcm90b3R5cGUsXCJjYXN0U2hhZG93c1wiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6ZCRlLGpzb246e3dyaXRlOiEwfX0pXSxjJGkucHJvdG90eXBlLFwicmVzb3VyY2VcIix2b2lkIDApLGUkdShbciR2KHtPYmplY3Q6XCJvYmplY3RcIn0se3JlYWRPbmx5OiEwfSldLGMkaS5wcm90b3R5cGUsXCJ0eXBlXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpOdW1iZXIsanNvbjp7d3JpdGU6ITB9fSldLGMkaS5wcm90b3R5cGUsXCJ3aWR0aFwiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6TnVtYmVyLGpzb246e3dyaXRlOiEwfX0pXSxjJGkucHJvdG90eXBlLFwiaGVpZ2h0XCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpOdW1iZXIsanNvbjp7d3JpdGU6ITB9fSldLGMkaS5wcm90b3R5cGUsXCJkZXB0aFwiLHZvaWQgMCksZSR1KFtyJHYoe2NlbnRlcjpcImNlbnRlclwiLHRvcDpcInRvcFwiLGJvdHRvbTpcImJvdHRvbVwiLG9yaWdpbjpcIm9yaWdpblwiLHJlbGF0aXZlOlwicmVsYXRpdmVcIn0pLHkkcih7anNvbjp7ZGVmYXVsdDpcIm9yaWdpblwifX0pXSxjJGkucHJvdG90eXBlLFwiYW5jaG9yXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpwJGgsanNvbjp7dHlwZTpbTnVtYmVyXSxyZWFkOntyZWFkZXI6bz0+bmV3IHAkaCh7eDpvWzBdLHk6b1sxXSx6Om9bMl19KX0sd3JpdGU6e3dyaXRlcjoobyx0KT0+e3QuYW5jaG9yUG9zaXRpb249W28ueCxvLnksby56XTt9LG92ZXJyaWRlUG9saWN5KCl7cmV0dXJuIHtlbmFibGVkOlwicmVsYXRpdmVcIj09PXRoaXMuYW5jaG9yfX19fX0pXSxjJGkucHJvdG90eXBlLFwiYW5jaG9yUG9zaXRpb25cIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOk51bWJlcixqc29uOnt3cml0ZTohMH19KV0sYyRpLnByb3RvdHlwZSxcImhlYWRpbmdcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOk51bWJlcixqc29uOnt3cml0ZTohMH19KV0sYyRpLnByb3RvdHlwZSxcInRpbHRcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOk51bWJlcixqc29uOnt3cml0ZTohMH19KV0sYyRpLnByb3RvdHlwZSxcInJvbGxcIix2b2lkIDApLGUkdShbeSRyKHtyZWFkT25seTohMH0pXSxjJGkucHJvdG90eXBlLFwiaXNQcmltaXRpdmVcIixudWxsKSxjJGk9biRnPWUkdShbaSRYKFwiZXNyaS5zeW1ib2xzLk9iamVjdFN5bWJvbDNETGF5ZXJcIildLGMkaSk7dmFyIGwkaT1jJGk7XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG52YXIgYSRlO2xldCBsJGg9YSRlPWNsYXNzIGV4dGVuZHMgYyRze2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpLHRoaXMubWF0ZXJpYWw9bnVsbCx0aGlzLmNhc3RTaGFkb3dzPSEwLHRoaXMudHlwZT1cInBhdGhcIix0aGlzLnByb2ZpbGU9XCJjaXJjbGVcIix0aGlzLmpvaW49XCJtaXRlclwiLHRoaXMuY2FwPVwiYnV0dFwiLHRoaXMud2lkdGg9dm9pZCAwLHRoaXMuaGVpZ2h0PXZvaWQgMCx0aGlzLmFuY2hvcj1cImNlbnRlclwiLHRoaXMucHJvZmlsZVJvdGF0aW9uPVwiYWxsXCI7fWdldCBzaXplKCl7cmV0dXJuIHRoaXMud2lkdGgmJnRoaXMuaGVpZ2h0P3RoaXMud2lkdGg9PT10aGlzLmhlaWdodD90aGlzLndpZHRoOnZvaWQgMDp0aGlzLndpZHRoP3RoaXMud2lkdGg6dGhpcy5oZWlnaHQ/dGhpcy5oZWlnaHQ6dm9pZCAwfXNldCBzaXplKHQpe3RoaXMud2lkdGg9dCx0aGlzLmhlaWdodD10O31yZWFkU2l6ZSh0LGUpe3JldHVybiBlLmhlaWdodHx8ZS53aWR0aD90OmUuc2l6ZX1jbG9uZSgpe3JldHVybiBuZXcgYSRlKHtlbmFibGVkOnRoaXMuZW5hYmxlZCxtYXRlcmlhbDpyJEEodGhpcy5tYXRlcmlhbCk/dGhpcy5tYXRlcmlhbC5jbG9uZSgpOm51bGwsY2FzdFNoYWRvd3M6dGhpcy5jYXN0U2hhZG93cyxzaXplOnRoaXMuc2l6ZSxwcm9maWxlOnRoaXMucHJvZmlsZSxqb2luOnRoaXMuam9pbixjYXA6dGhpcy5jYXAsd2lkdGg6dGhpcy53aWR0aCxoZWlnaHQ6dGhpcy5oZWlnaHQscHJvZmlsZVJvdGF0aW9uOnRoaXMucHJvZmlsZVJvdGF0aW9uLGFuY2hvcjp0aGlzLmFuY2hvcn0pfX07ZSR1KFt5JHIoe3R5cGU6bCRuLGpzb246e3dyaXRlOiEwfX0pXSxsJGgucHJvdG90eXBlLFwibWF0ZXJpYWxcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOkJvb2xlYW4sbm9uTnVsbGFibGU6ITAsanNvbjp7d3JpdGU6ITAsZGVmYXVsdDohMH19KV0sbCRoLnByb3RvdHlwZSxcImNhc3RTaGFkb3dzXCIsdm9pZCAwKSxlJHUoW3Ikdih7UGF0aDpcInBhdGhcIn0se3JlYWRPbmx5OiEwfSldLGwkaC5wcm90b3R5cGUsXCJ0eXBlXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpOdW1iZXJ9KV0sbCRoLnByb3RvdHlwZSxcInNpemVcIixudWxsKSxlJHUoW2UkQyhcInNpemVcIildLGwkaC5wcm90b3R5cGUsXCJyZWFkU2l6ZVwiLG51bGwpLGUkdShbeSRyKHt0eXBlOltcImNpcmNsZVwiLFwicXVhZFwiXSxqc29uOnt3cml0ZTohMCxkZWZhdWx0OlwiY2lyY2xlXCJ9fSldLGwkaC5wcm90b3R5cGUsXCJwcm9maWxlXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpbXCJtaXRlclwiLFwiYmV2ZWxcIixcInJvdW5kXCJdLGpzb246e3dyaXRlOiEwLGRlZmF1bHQ6XCJtaXRlclwifX0pXSxsJGgucHJvdG90eXBlLFwiam9pblwiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6W1wibm9uZVwiLFwiYnV0dFwiLFwic3F1YXJlXCIsXCJyb3VuZFwiXSxqc29uOnt3cml0ZTohMCxkZWZhdWx0OlwiYnV0dFwifX0pXSxsJGgucHJvdG90eXBlLFwiY2FwXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpOdW1iZXIsanNvbjp7d3JpdGU6e2VuYWJsZWQ6ITAsdGFyZ2V0Ont3aWR0aDp7dHlwZTpOdW1iZXJ9LHNpemU6e3R5cGU6TnVtYmVyfX19fX0pXSxsJGgucHJvdG90eXBlLFwid2lkdGhcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOk51bWJlcixqc29uOnt3cml0ZTohMH19KV0sbCRoLnByb3RvdHlwZSxcImhlaWdodFwiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6W1wiY2VudGVyXCIsXCJib3R0b21cIixcInRvcFwiXSxqc29uOnt3cml0ZTohMCxkZWZhdWx0OlwiY2VudGVyXCJ9fSldLGwkaC5wcm90b3R5cGUsXCJhbmNob3JcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOltcImhlYWRpbmdcIixcImFsbFwiXSxqc29uOnt3cml0ZTohMCxkZWZhdWx0OlwiYWxsXCJ9fSldLGwkaC5wcm90b3R5cGUsXCJwcm9maWxlUm90YXRpb25cIix2b2lkIDApLGwkaD1hJGU9ZSR1KFtpJFgoXCJlc3JpLnN5bWJvbHMuUGF0aFN5bWJvbDNETGF5ZXJcIildLGwkaCk7dmFyIGQkZD1sJGg7XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG52YXIgbSRiO2xldCBsJGc9bSRiPWNsYXNzIGV4dGVuZHMgYSRCe2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLmNvbG9yPW5ldyBvJGooWzAsMCwwLDFdKSx0aGlzLnNpemU9MDt9Y2xvbmUoKXtyZXR1cm4gbmV3IG0kYih7Y29sb3I6eSR2KHRoaXMuY29sb3IpLHNpemU6dGhpcy5zaXplfSl9fTtlJHUoW3kkcihjJHEpXSxsJGcucHJvdG90eXBlLFwiY29sb3JcIix2b2lkIDApLGUkdShbeSRyKHAkcildLGwkZy5wcm90b3R5cGUsXCJzaXplXCIsdm9pZCAwKSxsJGc9bSRiPWUkdShbaSRYKFwiZXNyaS5zeW1ib2xzLnN1cHBvcnQuU3ltYm9sM0RIYWxvXCIpXSxsJGcpO3ZhciBhJGQ9bCRnO1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xudmFyIGMkaDtsZXQgaCRlPWMkaD1jbGFzcyBleHRlbmRzIGMkc3tjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KSx0aGlzLl91c2VyU2l6ZT12b2lkIDAsdGhpcy5oYWxvPW51bGwsdGhpcy5tYXRlcmlhbD1udWxsLHRoaXMudGV4dD12b2lkIDAsdGhpcy50eXBlPVwidGV4dFwiO31nZXQgZm9udCgpe3JldHVybiB0aGlzLl9nZXQoXCJmb250XCIpfHxudWxsfXNldCBmb250KHQpe3QmJnRoaXMuX3VzZXJTaXplJiYodC5zaXplPXRoaXMuX3VzZXJTaXplKSx0aGlzLl9zZXQoXCJmb250XCIsdCk7fXdyaXRlRm9udCh0LG8sZSxyKXtjb25zdCBzPXsuLi5yLHRleHRTeW1ib2wzRDohMH07by5mb250PXQud3JpdGUoe30scyksZGVsZXRlIG8uZm9udC5zaXplO31nZXQgc2l6ZSgpe3JldHVybiBudWxsIT10aGlzLl91c2VyU2l6ZT90aGlzLl91c2VyU2l6ZTp0aGlzLmZvbnQmJm51bGwhPXRoaXMuZm9udC5zaXplP3RoaXMuZm9udC5zaXplOjl9c2V0IHNpemUodCl7dGhpcy5fdXNlclNpemU9dCx0aGlzLmZvbnQmJih0aGlzLmZvbnQuc2l6ZT10aGlzLl91c2VyU2l6ZSksdGhpcy5ub3RpZnlDaGFuZ2UoXCJzaXplXCIpO31jbG9uZSgpe3JldHVybiBuZXcgYyRoKHtlbmFibGVkOnRoaXMuZW5hYmxlZCxmb250OnRoaXMuZm9udCYmeSR2KHRoaXMuZm9udCksaGFsbzp0aGlzLmhhbG8mJnkkdih0aGlzLmhhbG8pLG1hdGVyaWFsOnIkQSh0aGlzLm1hdGVyaWFsKT90aGlzLm1hdGVyaWFsLmNsb25lKCk6bnVsbCxzaXplOnRoaXMuc2l6ZSx0ZXh0OnRoaXMudGV4dH0pfXN0YXRpYyBmcm9tVGV4dFN5bWJvbCh0KXtjb25zdCBvPWYkNyh0LmhhbG9Db2xvcix0LmhhbG9TaXplKSxlPXQuZm9udD90LmZvbnQuY2xvbmUoKTpuZXcgbiRpO3JldHVybiBuZXcgYyRoKHtzaXplOmUuc2l6ZSxmb250OmUsaGFsbzpvLG1hdGVyaWFsOnQuY29sb3I/e2NvbG9yOnQuY29sb3IuY2xvbmUoKX06bnVsbCx0ZXh0OnQudGV4dH0pfX07ZnVuY3Rpb24gZiQ3KHQsZSl7cmV0dXJuIHQmJmU+MD97Y29sb3I6eSR2KHQpLHNpemU6ZX06bnVsbH1lJHUoW3kkcih7dHlwZTpuJGksanNvbjp7d3JpdGU6ITB9fSldLGgkZS5wcm90b3R5cGUsXCJmb250XCIsbnVsbCksZSR1KFtvJHYoXCJmb250XCIpXSxoJGUucHJvdG90eXBlLFwid3JpdGVGb250XCIsbnVsbCksZSR1KFt5JHIoe3R5cGU6YSRkLGpzb246e3dyaXRlOiEwfX0pXSxoJGUucHJvdG90eXBlLFwiaGFsb1wiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6bCRuLGpzb246e3dyaXRlOiEwfX0pXSxoJGUucHJvdG90eXBlLFwibWF0ZXJpYWxcIix2b2lkIDApLGUkdShbeSRyKHAkcikseSRyKCldLGgkZS5wcm90b3R5cGUsXCJzaXplXCIsbnVsbCksZSR1KFt5JHIoe3R5cGU6U3RyaW5nLGpzb246e3dyaXRlOiEwfX0pXSxoJGUucHJvdG90eXBlLFwidGV4dFwiLHZvaWQgMCksZSR1KFtyJHYoe1RleHQ6XCJ0ZXh0XCJ9LHtyZWFkT25seTohMH0pXSxoJGUucHJvdG90eXBlLFwidHlwZVwiLHZvaWQgMCksaCRlPWMkaD1lJHUoW2kkWChcImVzcmkuc3ltYm9scy5UZXh0U3ltYm9sM0RMYXllclwiKV0saCRlKTt2YXIgeSQ2PWgkZTtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbnZhciBsJGY7bGV0IGMkZz1sJGY9Y2xhc3MgZXh0ZW5kcyBjJHN7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5jb2xvcj1tJGEuY2xvbmUoKSx0aGlzLnR5cGU9XCJ3YXRlclwiLHRoaXMud2F0ZXJib2R5U2l6ZT1cIm1lZGl1bVwiLHRoaXMud2F2ZURpcmVjdGlvbj1udWxsLHRoaXMud2F2ZVN0cmVuZ3RoPVwibW9kZXJhdGVcIjt9Y2xvbmUoKXtyZXR1cm4gbmV3IGwkZih7Y29sb3I6eSR2KHRoaXMuY29sb3IpLHdhdGVyYm9keVNpemU6dGhpcy53YXRlcmJvZHlTaXplLHdhdmVEaXJlY3Rpb246dGhpcy53YXZlRGlyZWN0aW9uLHdhdmVTdHJlbmd0aDp0aGlzLndhdmVTdHJlbmd0aH0pfX07ZSR1KFt5JHIoe3R5cGU6byRqLG5vbk51bGxhYmxlOiEwLGpzb246e3R5cGU6W04kNV0sd3JpdGU6KGUsbyxyKT0+b1tyXT1lLnRvQXJyYXkoMSksZGVmYXVsdDooKT0+bSRhLmNsb25lKCksZGVmYXVsdEVxdWFsczplPT5lLnRvQ3NzKCEwKT09PW0kYS50b0NzcyghMCl9fSldLGMkZy5wcm90b3R5cGUsXCJjb2xvclwiLHZvaWQgMCksZSR1KFtyJHYoe1dhdGVyOlwid2F0ZXJcIn0se3JlYWRPbmx5OiEwfSldLGMkZy5wcm90b3R5cGUsXCJ0eXBlXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpbXCJzbWFsbFwiLFwibWVkaXVtXCIsXCJsYXJnZVwiXSxqc29uOnt3cml0ZTohMCxkZWZhdWx0OlwibWVkaXVtXCJ9fSldLGMkZy5wcm90b3R5cGUsXCJ3YXRlcmJvZHlTaXplXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpOdW1iZXIsanNvbjp7d3JpdGU6ITAsZGVmYXVsdDpudWxsfX0pXSxjJGcucHJvdG90eXBlLFwid2F2ZURpcmVjdGlvblwiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6W1wiY2FsbVwiLFwicmlwcGxlZFwiLFwic2xpZ2h0XCIsXCJtb2RlcmF0ZVwiXSxqc29uOnt3cml0ZTohMCxkZWZhdWx0OlwibW9kZXJhdGVcIn19KV0sYyRnLnByb3RvdHlwZSxcIndhdmVTdHJlbmd0aFwiLHZvaWQgMCksYyRnPWwkZj1lJHUoW2kkWChcImVzcmkuc3ltYm9scy5XYXRlclN5bWJvbDNETGF5ZXJcIildLGMkZyk7Y29uc3QgbSRhPW5ldyBvJGooWzAsMTE5LDE5MF0pO3ZhciBuJGY9YyRnO1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuZnVuY3Rpb24gbiRlKG4sdCxpPUwkNSl7cmV0dXJuIHR8fCh0PW5ldyBpKSx0PT09bnx8KHQucmVtb3ZlQWxsKCksZSQ2KG4pP3QuYWRkTWFueShuKTpuJiZ0LmFkZChuKSksdH1mdW5jdGlvbiB0JDYocil7cmV0dXJuIHJ9ZnVuY3Rpb24gZSQ2KHIpe3JldHVybiByJiYoQXJyYXkuaXNBcnJheShyKXx8XCJpdGVtc1wiaW4gciYmQXJyYXkuaXNBcnJheShyLml0ZW1zKSl9XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5jb25zdCBpJGU9biRULmdldExvZ2dlcihcImVzcmkuaW50bFwiKTtmdW5jdGlvbiBzJDcodCxlLG49e30pe2NvbnN0e2Zvcm1hdDpvPXt9fT1uO3JldHVybiByJHoodCwodD0+dSRlKHQsZSxvKSkpfWZ1bmN0aW9uIHUkZShyLGUsbil7bGV0IG8saTtjb25zdCBzPXIuaW5kZXhPZihcIjpcIik7aWYoLTE9PT1zP289ci50cmltKCk6KG89ci5zbGljZSgwLHMpLnRyaW0oKSxpPXIuc2xpY2UocysxKS50cmltKCkpLCFvKXJldHVybiBcIlwiO2NvbnN0IHU9dCROKG8sZSk7aWYobnVsbD09dSlyZXR1cm4gXCJcIjtjb25zdCBtPW5baV18fG5bb107cmV0dXJuIG0/YyRmKHUsbSk6aT9hJGModSxpKTpmJDYodSl9ZnVuY3Rpb24gYyRmKHQscil7c3dpdGNoKHIudHlwZSl7Y2FzZVwiZGF0ZVwiOnJldHVybiBMJDQodCxyLmludGxPcHRpb25zKTtjYXNlXCJudW1iZXJcIjpyZXR1cm4gbSRqKHQsci5pbnRsT3B0aW9ucyk7ZGVmYXVsdDpyZXR1cm4gaSRlLndhcm4oXCJtaXNzaW5nIGZvcm1hdCBkZXNjcmlwdG9yIGZvciBrZXkge2tleX1cIiksZiQ2KHQpfX1mdW5jdGlvbiBhJGModCxyKXtzd2l0Y2goci50b0xvd2VyQ2FzZSgpKXtjYXNlXCJkYXRlZm9ybWF0XCI6cmV0dXJuIEwkNCh0KTtjYXNlXCJudW1iZXJmb3JtYXRcIjpyZXR1cm4gbSRqKHQpO2RlZmF1bHQ6cmV0dXJuIGkkZS53YXJuKGBpbmxpbmUgZm9ybWF0IGlzIHVuc3VwcG9ydGVkIHNpbmNlIDQuMTI6ICR7cn1gKSwvXihkYXRlZm9ybWF0fGRhdGVzdHJpbmcpL2kudGVzdChyKT9MJDQodCk6L15udW1iZXJmb3JtYXQvaS50ZXN0KHIpP20kaih0KTpmJDYodCl9fWZ1bmN0aW9uIGYkNih0KXtzd2l0Y2godHlwZW9mIHQpe2Nhc2VcInN0cmluZ1wiOnJldHVybiB0O2Nhc2VcIm51bWJlclwiOnJldHVybiBtJGoodCk7Y2FzZVwiYm9vbGVhblwiOnJldHVybiBcIlwiK3Q7ZGVmYXVsdDpyZXR1cm4gdCBpbnN0YW5jZW9mIERhdGU/TCQ0KHQpOlwiXCJ9fVxuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuY29uc3QgbiRkPS9eKFthLXpdezJ9KSg/OlstX10oW0EtWmEtel17Mn0pKT8kLyxvJDQ9bmV3IFNldChbXCJhclwiLFwiYnNcIixcImNhXCIsXCJjc1wiLFwiZGFcIixcImRlXCIsXCJlbFwiLFwiZW5cIixcImVzXCIsXCJldFwiLFwiZmlcIixcImZyXCIsXCJoZVwiLFwiaGlcIixcImhyXCIsXCJodVwiLFwiaWRcIixcIml0XCIsXCJqYVwiLFwia29cIixcImx0XCIsXCJsdlwiLFwibmJcIixcIm5sXCIsXCJwbFwiLFwicHQtQlJcIixcInB0LVBUXCIsXCJyb1wiLFwicnVcIixcInNrXCIsXCJzbFwiLFwic3JcIixcInN2XCIsXCJ0aFwiLFwidHJcIixcInVrXCIsXCJ2aVwiLFwiemgtQ05cIixcInpoLUhLXCIsXCJ6aC1UV1wiXSksaSRkPVtdLGEkYj1uZXcgTWFwO2Z1bmN0aW9uIGQkYyh0KXtpZighaSRkLmluY2x1ZGVzKHQpKXtmb3IoY29uc3QgZSBvZiBhJGIua2V5cygpKXUkZCh0LnBhdHRlcm4sZSkmJmEkYi5kZWxldGUoZSk7aSRkLnVuc2hpZnQodCk7fX1hc3luYyBmdW5jdGlvbiBjJGUodCl7Y29uc3QgZT1jJDE1KCk7YSRiLmhhcyh0KXx8YSRiLnNldCh0LGwkZSh0LGUpKTtjb25zdCByPWEkYi5nZXQodCk7cmV0dXJuIGF3YWl0IGYkNS5hZGQocikscn1mdW5jdGlvbiBoJGQodCl7aWYoIW4kZC50ZXN0KHQpKXJldHVybiBudWxsO2NvbnN0WyxlLHNdPW4kZC5leGVjKHQpLHI9ZSsocz9cIi1cIitzLnRvVXBwZXJDYXNlKCk6XCJcIik7cmV0dXJuIG8kNC5oYXMocik/cjpvJDQuaGFzKGUpP2U6bnVsbH1hc3luYyBmdW5jdGlvbiBsJGUoZSxzKXtjb25zdCByPVtdO2Zvcihjb25zdCB0IG9mIGkkZClpZih1JGQodC5wYXR0ZXJuLGUpKXRyeXtyZXR1cm4gYXdhaXQgdC5mZXRjaE1lc3NhZ2VCdW5kbGUoZSxzKX1jYXRjaChuKXtyLnB1c2gobik7fWlmKHIubGVuZ3RoKXRocm93IG5ldyBzJHgoXCJpbnRsOm1lc3NhZ2UtYnVuZGxlLWVycm9yXCIsYEVycm9ycyBvY2N1cnJlZCB3aGlsZSBsb2FkaW5nIFwiJHtlfVwiYCx7ZXJyb3JzOnJ9KTt0aHJvdyBuZXcgcyR4KFwiaW50bDpuby1tZXNzYWdlLWJ1bmRsZS1sb2FkZXJcIixgTm8gbG9hZGVyIGZvdW5kIGZvciBtZXNzYWdlIGJ1bmRsZSBcIiR7ZX1cImApfWZ1bmN0aW9uIHUkZCh0LGUpe3JldHVybiBcInN0cmluZ1wiPT10eXBlb2YgdD9lLnN0YXJ0c1dpdGgodCk6dC50ZXN0KGUpfWgkQigoKCk9PnthJGIuY2xlYXIoKTt9KSk7Y29uc3QgZiQ1PW5ldyBjbGFzc3tjb25zdHJ1Y3Rvcigpe3RoaXMuX251bUxvYWRpbmc9MDt9YXN5bmMgd2FpdEZvckFsbCgpe3RoaXMuX2RmZCYmYXdhaXQgdGhpcy5fZGZkLnByb21pc2U7fWFkZCh0KXtyZXR1cm4gdGhpcy5faW5jcmVhc2UoKSx0LnRoZW4oKCgpPT50aGlzLl9kZWNyZWFzZSgpKSwoKCk9PnRoaXMuX2RlY3JlYXNlKCkpKSx0aGlzLndhaXRGb3JBbGwoKX1faW5jcmVhc2UoKXt0aGlzLl9udW1Mb2FkaW5nKyssdGhpcy5fZGZkfHwodGhpcy5fZGZkPUUkMygpKTt9X2RlY3JlYXNlKCl7dGhpcy5fbnVtTG9hZGluZz1NYXRoLm1heCh0aGlzLl9udW1Mb2FkaW5nLTEsMCksdGhpcy5fZGZkJiYwPT09dGhpcy5fbnVtTG9hZGluZyYmKHRoaXMuX2RmZC5yZXNvbHZlKCksdGhpcy5fZGZkPW51bGwpO319O1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuYXN5bmMgZnVuY3Rpb24gcyQ2KGUsdCxvLHMpe2NvbnN0IGE9dC5leGVjKG8pO2lmKCFhKXRocm93IG5ldyBzJHgoXCJlc3JpLWludGw6aW52YWxpZC1idW5kbGVcIixgQnVuZGxlIGlkIFwiJHtvfVwiIGlzIG5vdCBjb21wYXRpYmxlIHdpdGggdGhlIHBhdHRlcm4gXCIke3R9XCJgKTtjb25zdCBjPWFbMV0/YCR7YVsxXX0vYDpcIlwiLGw9YVsyXSxoPWgkZChzKSx1PWAke2N9JHtsfS5qc29uYCx3PWg/YCR7Y30ke2x9XyR7aH0uanNvbmA6dTtsZXQgZjt0cnl7Zj1hd2FpdCBpJGMoZSh3KSk7fWNhdGNoKGQpe2lmKHc9PT11KXRocm93IG5ldyBzJHgoXCJpbnRsOnVua25vd24tYnVuZGxlXCIsYEJ1bmRsZSBcIiR7b31cIiBjYW5ub3QgYmUgbG9hZGVkYCx7ZXJyb3I6ZH0pO3RyeXtmPWF3YWl0IGkkYyhlKHUpKTt9Y2F0Y2goZCl7dGhyb3cgbmV3IHMkeChcImludGw6dW5rbm93bi1idW5kbGVcIixgQnVuZGxlIFwiJHtvfVwiIGNhbm5vdCBiZSBsb2FkZWRgLHtlcnJvcjpkfSl9fXJldHVybiBmfWFzeW5jIGZ1bmN0aW9uIGkkYyhlKXtpZihyJEEobCRkLmZldGNoQnVuZGxlQXNzZXQpKXJldHVybiBsJGQuZmV0Y2hCdW5kbGVBc3NldChlKTtjb25zdCBuPWF3YWl0IFUkMShlLHtyZXNwb25zZVR5cGU6XCJ0ZXh0XCJ9KTtyZXR1cm4gSlNPTi5wYXJzZShuLmRhdGEpfWNsYXNzIGEkYXtjb25zdHJ1Y3Rvcih7YmFzZTp0PVwiXCIscGF0dGVybjpuLGxvY2F0aW9uOnI9bmV3IFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZil9KXtsZXQgbztvPVwic3RyaW5nXCI9PXR5cGVvZiByP3Q9Pm5ldyBVUkwodCxuZXcgVVJMKHIsZSRMLmxvY2F0aW9uKSkuaHJlZjpyIGluc3RhbmNlb2YgVVJMP2U9Pm5ldyBVUkwoZSxyKS5ocmVmOnIsdGhpcy5wYXR0ZXJuPVwic3RyaW5nXCI9PXR5cGVvZiBuP25ldyBSZWdFeHAoYF4ke259YCk6bix0aGlzLmdldEFzc2V0VXJsPW8sdD10P3QuZW5kc1dpdGgoXCIvXCIpP3Q6dCtcIi9cIjpcIlwiLHRoaXMubWF0Y2hlcj1uZXcgUmVnRXhwKGBeJHt0fSg/OiguKikvKT8oLiopJGApO31mZXRjaE1lc3NhZ2VCdW5kbGUoZSx0KXtyZXR1cm4gcyQ2KHRoaXMuZ2V0QXNzZXRVcmwsdGhpcy5tYXRjaGVyLGUsdCl9fWZ1bmN0aW9uIGMkZChlKXtyZXR1cm4gbmV3IGEkYShlKX1jb25zdCBsJGQ9e307XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5jb25zdCBpJGI9biRULmdldExvZ2dlcihcImVzcmkuYXNzZXRzXCIpO2Z1bmN0aW9uIGEkOSh0KXtpZighcyRILmFzc2V0c1BhdGgpdGhyb3cgaSRiLmVycm9yT25jZShcIlRoZSBBUEkgYXNzZXRzIGxvY2F0aW9uIG5lZWRzIHRvIGJlIHNldCB1c2luZyBjb25maWcuYXNzZXRzUGF0aC4gTW9yZSBpbmZvcm1hdGlvbjogaHR0cHM6Ly9hcmNnLmlzLzFPekxlNTBcIiksbmV3IHMkeChcImFzc2V0czpwYXRoLW5vdC1zZXRcIixcImNvbmZpZy5hc3NldHNQYXRoIGlzIG5vdCBzZXRcIik7cmV0dXJuIEQkNihzJEguYXNzZXRzUGF0aCx0KX1cblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmQkYyhjJGQoe3BhdHRlcm46XCJlc3JpL1wiLGxvY2F0aW9uOmEkOX0pKTtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmNsYXNzIGgkY3tjb25zdHJ1Y3RvcihzKXt0aGlzLmluc3RhbmNlPXMsdGhpcy5fcmVzb2x2ZXI9RSQzKCksdGhpcy5fc3RhdHVzPTAsdGhpcy5fcmVzb2x2aW5nUHJvbWlzZXM9W10sdGhpcy5fcmVzb2x2ZXIucHJvbWlzZS50aGVuKCgoKT0+e3RoaXMuX3N0YXR1cz0xLHRoaXMuX2NsZWFuVXAoKTt9KSwoKCk9Pnt0aGlzLl9zdGF0dXM9Mix0aGlzLl9jbGVhblVwKCk7fSkpO31hZGRSZXNvbHZpbmdQcm9taXNlKHMpe3RoaXMuX3Jlc29sdmluZ1Byb21pc2VzLnB1c2gocyksdGhpcy5fdHJ5UmVzb2x2ZSgpO31pc1Jlc29sdmVkKCl7cmV0dXJuIDE9PT10aGlzLl9zdGF0dXN9aXNSZWplY3RlZCgpe3JldHVybiAyPT09dGhpcy5fc3RhdHVzfWlzRnVsZmlsbGVkKCl7cmV0dXJuIDAhPT10aGlzLl9zdGF0dXN9YWJvcnQoKXt0aGlzLl9yZXNvbHZlci5yZWplY3QobSR4KCkpO313aGVuKHMsZSl7cmV0dXJuIHRoaXMuX3Jlc29sdmVyLnByb21pc2UudGhlbihzLGUpfV9jbGVhblVwKCl7dGhpcy5fYWxsUHJvbWlzZT10aGlzLl9yZXNvbHZpbmdQcm9taXNlcz10aGlzLl9hbGxQcm9taXNlPW51bGw7fV90cnlSZXNvbHZlKCl7aWYodGhpcy5pc0Z1bGZpbGxlZCgpKXJldHVybjtjb25zdCBzPUUkMygpLGk9Wy4uLnRoaXMuX3Jlc29sdmluZ1Byb21pc2VzLG0kRihzLnByb21pc2UpXSx0PXRoaXMuX2FsbFByb21pc2U9UHJvbWlzZS5hbGwoaSk7dC50aGVuKCgoKT0+e3RoaXMuaXNGdWxmaWxsZWQoKXx8dGhpcy5fYWxsUHJvbWlzZSE9PXR8fHRoaXMuX3Jlc29sdmVyLnJlc29sdmUodGhpcy5pbnN0YW5jZSk7fSksKHM9Pnt0aGlzLmlzRnVsZmlsbGVkKCl8fHRoaXMuX2FsbFByb21pc2UhPT10fHxnJGcocyl8fHRoaXMuX3Jlc29sdmVyLnJlamVjdChzKTt9KSkscy5yZXNvbHZlKCk7fX1jb25zdCBuJGM9ZT0+e2xldCByPWNsYXNzIGV4dGVuZHMgZXtjb25zdHJ1Y3RvciguLi5zKXtzdXBlciguLi5zKSx0aGlzLl9wcm9taXNlUHJvcHM9bmV3IGgkYyh0aGlzKSx0aGlzLmFkZFJlc29sdmluZ1Byb21pc2UoUHJvbWlzZS5yZXNvbHZlKCkpO31pc1Jlc29sdmVkKCl7cmV0dXJuIHRoaXMuX3Byb21pc2VQcm9wcy5pc1Jlc29sdmVkKCl9aXNSZWplY3RlZCgpe3JldHVybiB0aGlzLl9wcm9taXNlUHJvcHMuaXNSZWplY3RlZCgpfWlzRnVsZmlsbGVkKCl7cmV0dXJuIHRoaXMuX3Byb21pc2VQcm9wcy5pc0Z1bGZpbGxlZCgpfXdoZW4ocyxlKXtyZXR1cm4gbmV3IFByb21pc2UoKChzLGUpPT57dGhpcy5fcHJvbWlzZVByb3BzLndoZW4ocyxlKTt9KSkudGhlbihzLGUpfWNhdGNoKHMpe3JldHVybiB0aGlzLndoZW4obnVsbCxzKX1hZGRSZXNvbHZpbmdQcm9taXNlKHMpe3MmJiF0aGlzLl9wcm9taXNlUHJvcHMuaXNGdWxmaWxsZWQoKSYmdGhpcy5fcHJvbWlzZVByb3BzLmFkZFJlc29sdmluZ1Byb21pc2UoXCJfcHJvbWlzZVByb3BzXCJpbiBzP3Mud2hlbigpOnMpO319O3JldHVybiByPWUkdShbaSRYKFwiZXNyaS5jb3JlLlByb21pc2VcIildLHIpLHJ9O2xldCBtJDk9Y2xhc3MgZXh0ZW5kcyhuJGModSREKSl7fTttJDk9ZSR1KFtpJFgoXCJlc3JpLmNvcmUuUHJvbWlzZVwiKV0sbSQ5KTtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmNvbnN0IGQkYj1cIm5vdC1sb2FkZWRcIix1JGM9XCJsb2FkaW5nXCIsYyRjPVwiZmFpbGVkXCIsaCRiPVwibG9hZGVkXCIscCRnPW49PntsZXQgcD1jbGFzcyBleHRlbmRzIG57Y29uc3RydWN0b3IoLi4ubyl7c3VwZXIoLi4ubyksdGhpcy5fbG9hZENvbnRyb2xsZXI9bnVsbCx0aGlzLmxvYWRFcnJvcj1udWxsLHRoaXMubG9hZFN0YXR1cz1cIm5vdC1sb2FkZWRcIix0aGlzLl9zZXQoXCJsb2FkV2FybmluZ3NcIixbXSksdGhpcy5hZGRSZXNvbHZpbmdQcm9taXNlKG5ldyBQcm9taXNlKChvPT57Y29uc3QgdD10aGlzLmxvYWQuYmluZCh0aGlzKTt0aGlzLmxvYWQ9cz0+e2NvbnN0IHI9bmV3IFByb21pc2UoKChvLHQpPT57Y29uc3Qgcj1QJDcocyx0KTt0aGlzLmRlc3Ryb3llZCYmdChuZXcgcyR4KFwibG9hZDppbnN0YW5jZS1kZXN0cm95ZWRcIixgSW5zdGFuY2Ugb2YgJyR7dGhpcy5kZWNsYXJlZENsYXNzfHx0aGlzLmNvbnN0cnVjdG9yLm5hbWV9JyBpcyBhbHJlYWR5IGRlc3Ryb3llZGAse2luc3RhbmNlOnRoaXN9KSksdGhpcy5fcHJvbWlzZVByb3BzLndoZW4obyx0KS5maW5hbGx5KCgoKT0+e3ImJnIucmVtb3ZlKCk7fSkpO30pKTtpZih0aGlzLmxvYWRTdGF0dXM9PT1kJGIpe3RoaXMuX3NldChcImxvYWRTdGF0dXNcIix1JGMpO2NvbnN0IG89dGhpcy5fbG9hZENvbnRyb2xsZXI9aCR1KCk7dCh7c2lnbmFsOm8uc2lnbmFsfSksdiQ5KG8uc2lnbmFsLCgoKT0+e3RoaXMuX3Byb21pc2VQcm9wcy5hYm9ydCgpO30pKTt9cmV0dXJuIG8oKSxyfTt9KSkpLHRoaXMud2hlbigoKCk9Pnt0aGlzLl9zZXQoXCJsb2FkU3RhdHVzXCIsaCRiKSx0aGlzLl9sb2FkQ29udHJvbGxlcj1udWxsO30pLChvPT57dGhpcy5fc2V0KFwibG9hZFN0YXR1c1wiLGMkYyksdGhpcy5fc2V0KFwibG9hZEVycm9yXCIsbyksdGhpcy5fbG9hZENvbnRyb2xsZXI9bnVsbDt9KSk7fWdldCBsb2FkZWQoKXtyZXR1cm4gdGhpcy5sb2FkU3RhdHVzPT09aCRifWdldCBsb2FkV2FybmluZ3MoKXtyZXR1cm4gdGhpcy5fZ2V0KFwibG9hZFdhcm5pbmdzXCIpfWxvYWQoKXtyZXR1cm4gbnVsbH1jYW5jZWxMb2FkKCl7dmFyIG87cmV0dXJuIHRoaXMuaXNGdWxmaWxsZWQoKXx8KHRoaXMuX3NldChcImxvYWRFcnJvclwiLG5ldyBzJHgoXCJsb2FkOmNhbmNlbGxlZFwiLFwiQ2FuY2VsbGVkXCIpKSxudWxsPT0obz10aGlzLl9sb2FkQ29udHJvbGxlcil8fG8uYWJvcnQoKSksdGhpc319O3JldHVybiBlJHUoW3kkcih7cmVhZE9ubHk6ITB9KV0scC5wcm90b3R5cGUsXCJsb2FkZWRcIixudWxsKSxlJHUoW3kkcih7cmVhZE9ubHk6ITB9KV0scC5wcm90b3R5cGUsXCJsb2FkRXJyb3JcIix2b2lkIDApLGUkdShbeSRyKCldLHAucHJvdG90eXBlLFwibG9hZFN0YXR1c1wiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6W3QkSF0scmVhZE9ubHk6ITB9KV0scC5wcm90b3R5cGUsXCJsb2FkV2FybmluZ3NcIixudWxsKSxwPWUkdShbaSRYKFwiZXNyaS5jb3JlLkxvYWRhYmxlXCIpXSxwKSxwfTtsZXQgbSQ4PWNsYXNzIGV4dGVuZHMocCRnKG0kOSkpe307bSQ4PWUkdShbaSRYKFwiZXNyaS5jb3JlLkxvYWRhYmxlXCIpXSxtJDgpLGZ1bmN0aW9uKG8pe2Z1bmN0aW9uIHQobyl7cmV0dXJuICEoIW98fCFvLmxvYWQpfW8uTG9hZGFibGVNaXhpbj1wJGcsby5pc0xvYWRhYmxlPXQ7fShtJDh8fChtJDg9e30pKTt2YXIgZiQ0PW0kODtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbnZhciB1JGI7Y29uc3QgbSQ3PW5ldyB0JEkoe2F2Z1JhdGluZzpcImF2Zy1yYXRpbmdcIixudW1SYXRpbmdzOlwibnVtLXJhdGluZ3NcIixudW1Db21tZW50czpcIm51bS1jb21tZW50c1wiLG51bVZpZXdzOlwibnVtLXZpZXdzXCJ9KTtsZXQgbCRjPXUkYj1jbGFzcyBleHRlbmRzIHUkRHtjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KSx0aGlzLmNhdGVnb3JpZXM9bnVsbCx0aGlzLmRpc2FibGVFeHRyYVF1ZXJ5PSExLHRoaXMuZXh0ZW50PW51bGwsdGhpcy5udW09MTAsdGhpcy5xdWVyeT1udWxsLHRoaXMuc29ydEZpZWxkPW51bGwsdGhpcy5zdGFydD0xO31nZXQgc29ydE9yZGVyKCl7cmV0dXJuIHRoaXMuX2dldChcInNvcnRPcmRlclwiKXx8XCJhc2NcIn1zZXQgc29ydE9yZGVyKHQpe1wiYXNjXCIhPT10JiZcImRlc2NcIiE9PXR8fHRoaXMuX3NldChcInNvcnRPcmRlclwiLHQpO31jbG9uZSgpe3JldHVybiBuZXcgdSRiKHtjYXRlZ29yaWVzOnRoaXMuY2F0ZWdvcmllcz95JHYodGhpcy5jYXRlZ29yaWVzKTpudWxsLGRpc2FibGVFeHRyYVF1ZXJ5OnRoaXMuZGlzYWJsZUV4dHJhUXVlcnksZXh0ZW50OnRoaXMuZXh0ZW50P3RoaXMuZXh0ZW50LmNsb25lKCk6bnVsbCxudW06dGhpcy5udW0scXVlcnk6dGhpcy5xdWVyeSxzb3J0RmllbGQ6dGhpcy5zb3J0RmllbGQsc29ydE9yZGVyOnRoaXMuc29ydE9yZGVyLHN0YXJ0OnRoaXMuc3RhcnR9KX10b1JlcXVlc3RPcHRpb25zKHQscil7bGV0IGUscztpZih0aGlzLmNhdGVnb3JpZXMmJihlPXRoaXMuY2F0ZWdvcmllcy5tYXAoKHQ9PkFycmF5LmlzQXJyYXkodCk/SlNPTi5zdHJpbmdpZnkodCk6dCkpKSx0aGlzLmV4dGVudCl7Y29uc3QgdD1nJDkodGhpcy5leHRlbnQsayQ0LldHUzg0KTt0JiYocz1gJHt0LnhtaW59LCR7dC55bWlufSwke3QueG1heH0sJHt0LnltYXh9YCk7fWxldCBvPXRoaXMucXVlcnk7IXRoaXMuZGlzYWJsZUV4dHJhUXVlcnkmJnQuZXh0cmFRdWVyeSYmKG89XCIoXCIrbytcIilcIit0LmV4dHJhUXVlcnkpO2NvbnN0IGk9e2NhdGVnb3JpZXM6ZSxiYm94OnMscTpvLG51bTp0aGlzLm51bSxzb3J0RmllbGQ6bnVsbCxzb3J0T3JkZXI6bnVsbCxzdGFydDp0aGlzLnN0YXJ0fTtyZXR1cm4gdGhpcy5zb3J0RmllbGQmJihpLnNvcnRGaWVsZD10aGlzLnNvcnRGaWVsZC5zcGxpdChcIixcIikubWFwKCh0PT5tJDcudG9KU09OKHQudHJpbSgpKSkpLmpvaW4oXCIsXCIpLGkuc29ydE9yZGVyPXRoaXMuc29ydE9yZGVyKSx7cXVlcnk6ey4uLnIsLi4uaX19fX07ZSR1KFt5JHIoKV0sbCRjLnByb3RvdHlwZSxcImNhdGVnb3JpZXNcIix2b2lkIDApLGUkdShbeSRyKCldLGwkYy5wcm90b3R5cGUsXCJkaXNhYmxlRXh0cmFRdWVyeVwiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6TSQzfSldLGwkYy5wcm90b3R5cGUsXCJleHRlbnRcIix2b2lkIDApLGUkdShbeSRyKCldLGwkYy5wcm90b3R5cGUsXCJudW1cIix2b2lkIDApLGUkdShbeSRyKCldLGwkYy5wcm90b3R5cGUsXCJxdWVyeVwiLHZvaWQgMCksZSR1KFt5JHIoKV0sbCRjLnByb3RvdHlwZSxcInNvcnRGaWVsZFwiLHZvaWQgMCksZSR1KFt5JHIoKV0sbCRjLnByb3RvdHlwZSxcInNvcnRPcmRlclwiLG51bGwpLGUkdShbeSRyKCldLGwkYy5wcm90b3R5cGUsXCJzdGFydFwiLHZvaWQgMCksbCRjPXUkYj1lJHUoW2kkWChcImVzcmkucG9ydGFsLlBvcnRhbFF1ZXJ5UGFyYW1zXCIpXSxsJGMpO3ZhciBjJGI9bCRjO1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xubGV0IGUkNT1jbGFzcyBleHRlbmRzIHUkRHtjb25zdHJ1Y3RvcihyKXtzdXBlcihyKSx0aGlzLm5leHRRdWVyeVBhcmFtcz1udWxsLHRoaXMucXVlcnlQYXJhbXM9bnVsbCx0aGlzLnJlc3VsdHM9bnVsbCx0aGlzLnRvdGFsPW51bGw7fX07ZSR1KFt5JHIoKV0sZSQ1LnByb3RvdHlwZSxcIm5leHRRdWVyeVBhcmFtc1wiLHZvaWQgMCksZSR1KFt5JHIoKV0sZSQ1LnByb3RvdHlwZSxcInF1ZXJ5UGFyYW1zXCIsdm9pZCAwKSxlJHUoW3kkcigpXSxlJDUucHJvdG90eXBlLFwicmVzdWx0c1wiLHZvaWQgMCksZSR1KFt5JHIoKV0sZSQ1LnByb3RvdHlwZSxcInRvdGFsXCIsdm9pZCAwKSxlJDU9ZSR1KFtpJFgoXCJlc3JpLnBvcnRhbC5Qb3J0YWxRdWVyeVJlc3VsdFwiKV0sZSQ1KTt2YXIgcCRmPWUkNTtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmxldCBwJGU9Y2xhc3MgZXh0ZW5kcyBhJEJ7Y29uc3RydWN0b3Iocil7c3VwZXIociksdGhpcy5jcmVhdGVkPW51bGwsdGhpcy5pZD1udWxsLHRoaXMucG9ydGFsPW51bGwsdGhpcy50aXRsZT1udWxsLHRoaXMudXNlcm5hbWU9bnVsbDt9Z2V0IHVybCgpe2NvbnN0IHI9dGhpcy5nZXQoXCJwb3J0YWwucmVzdFVybFwiKTtyZXR1cm4gcj9gJHtyfS9jb250ZW50L3VzZXJzLyR7dGhpcy51c2VybmFtZX0vJHt0aGlzLmlkfWA6bnVsbH10b0pTT04oKXt0aHJvdyBuZXcgcyR4KFwiaW50ZXJuYWw6bm90LXlldC1pbXBsZW1lbnRlZFwiLFwiUG9ydGFsRm9sZGVyLnRvSlNPTiBpcyBub3QgeWV0IGltcGxlbWVudGVkXCIpfX07ZSR1KFt5JHIoe3R5cGU6RGF0ZX0pXSxwJGUucHJvdG90eXBlLFwiY3JlYXRlZFwiLHZvaWQgMCksZSR1KFt5JHIoKV0scCRlLnByb3RvdHlwZSxcImlkXCIsdm9pZCAwKSxlJHUoW3kkcigpXSxwJGUucHJvdG90eXBlLFwicG9ydGFsXCIsdm9pZCAwKSxlJHUoW3kkcigpXSxwJGUucHJvdG90eXBlLFwidGl0bGVcIix2b2lkIDApLGUkdShbeSRyKHtyZWFkT25seTohMH0pXSxwJGUucHJvdG90eXBlLFwidXJsXCIsbnVsbCksZSR1KFt5JHIoKV0scCRlLnByb3RvdHlwZSxcInVzZXJuYW1lXCIsdm9pZCAwKSxwJGU9ZSR1KFtpJFgoXCJlc3JpLnBvcnRhbC5Qb3J0YWxGb2xkZXJcIildLHAkZSk7dmFyIGkkYT1wJGU7XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5sZXQgbCRiPWNsYXNzIGV4dGVuZHMgYSRCe2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpLHRoaXMuYWNjZXNzPW51bGwsdGhpcy5jcmVhdGVkPW51bGwsdGhpcy5kZXNjcmlwdGlvbj1udWxsLHRoaXMuaWQ9bnVsbCx0aGlzLmlzSW52aXRhdGlvbk9ubHk9ITEsdGhpcy5tb2RpZmllZD1udWxsLHRoaXMub3duZXI9bnVsbCx0aGlzLnBvcnRhbD1udWxsLHRoaXMuc25pcHBldD1udWxsLHRoaXMuc29ydEZpZWxkPW51bGwsdGhpcy5zb3J0T3JkZXI9bnVsbCx0aGlzLnRhZ3M9bnVsbCx0aGlzLnRpdGxlPW51bGw7fWdldCB0aHVtYm5haWxVcmwoKXtjb25zdCB0PXRoaXMudXJsLHI9dGhpcy50aHVtYm5haWw7cmV0dXJuIHQmJnI/dGhpcy5wb3J0YWwuX25vcm1hbGl6ZVVybChgJHt0fS9pbmZvLyR7cn0/Zj1qc29uYCk6bnVsbH1nZXQgdXJsKCl7Y29uc3QgdD10aGlzLmdldChcInBvcnRhbC5yZXN0VXJsXCIpO3JldHVybiB0P3QrXCIvY29tbXVuaXR5L2dyb3Vwcy9cIit0aGlzLmlkOm51bGx9ZmV0Y2hDYXRlZ29yeVNjaGVtYSh0KXtyZXR1cm4gdGhpcy5wb3J0YWwuX3JlcXVlc3QodGhpcy51cmwrXCIvY2F0ZWdvcnlTY2hlbWFcIix0KS50aGVuKChyPT57Y29uc3QgZT1yLmNhdGVnb3J5U2NoZW1hfHxbXTtyZXR1cm4gZS5zb21lKCh0PT5cImNvbnRlbnRDYXRlZ29yeVNldHNHcm91cFF1ZXJ5LkxpdmluZ0F0bGFzXCI9PT10LnNvdXJjZSkpP3RoaXMuX2ZldGNoQ2F0ZWdvcnlTY2hlbWFTZXQoXCJMaXZpbmdBdGxhc1wiLHQpOmV9KSl9ZmV0Y2hNZW1iZXJzKHQpe3JldHVybiB0aGlzLnBvcnRhbC5fcmVxdWVzdCh0aGlzLnVybCtcIi91c2Vyc1wiLHQpfWdldFRodW1ibmFpbFVybCh0KXtsZXQgcj10aGlzLnRodW1ibmFpbFVybDtyZXR1cm4gciYmdCYmKHIrPWAmdz0ke3R9YCkscn10b0pTT04oKXt0aHJvdyBuZXcgcyR4KFwiaW50ZXJuYWw6bm90LXlldC1pbXBsZW1lbnRlZFwiLFwiUG9ydGFsR3JvdXAudG9KU09OIGlzIG5vdCB5ZXQgaW1wbGVtZW50ZWRcIil9cXVlcnlJdGVtcyh0LGUpe2xldCBvPWQkRShjJGIsdCk7cmV0dXJuIHBhcnNlRmxvYXQodGhpcy5wb3J0YWwuY3VycmVudFZlcnNpb24pPjU/KG89b3x8bmV3IGMkYix0aGlzLnBvcnRhbC5fcXVlcnlQb3J0YWwoYC9jb250ZW50L2dyb3Vwcy8ke3RoaXMuaWR9L3NlYXJjaGAsbyxcIlBvcnRhbEl0ZW1cIixlKSk6KG89bz9vLmNsb25lKCk6bmV3IGMkYixvLnF1ZXJ5PVwiZ3JvdXA6XCIrdGhpcy5pZCsoby5xdWVyeT9cIiBcIitvLnF1ZXJ5OlwiXCIpLHRoaXMucG9ydGFsLnF1ZXJ5SXRlbXMobyxlKSl9X2ZldGNoQ2F0ZWdvcnlTY2hlbWFTZXQodCxyKXtyZXR1cm4gdGhpcy5wb3J0YWwuX2ZldGNoU2VsZih0aGlzLnBvcnRhbC5hdXRoTW9kZSwhMCxyKS50aGVuKCh0PT57Y29uc3QgZT10LmNvbnRlbnRDYXRlZ29yeVNldHNHcm91cFF1ZXJ5O2lmKGUpe2NvbnN0IHQ9bmV3IGMkYjtyZXR1cm4gdC5kaXNhYmxlRXh0cmFRdWVyeT0hMCx0Lm51bT0xLHQucXVlcnk9ZSx0aGlzLnBvcnRhbC5xdWVyeUdyb3Vwcyh0LHIpfXRocm93IG5ldyBzJHgoXCJwb3J0YWwtZ3JvdXA6ZmV0Y2hDYXRlZ29yeVNjaGVtYVwiLFwiY29udGVudENhdGVnb3J5U2V0c0dyb3VwUXVlcnkgdmFsdWUgbm90IGZvdW5kXCIpfSkpLnRoZW4oKGU9PntpZihlLnRvdGFsKXtjb25zdCBvPWUucmVzdWx0c1swXSxzPW5ldyBjJGI7cmV0dXJuIHMubnVtPTEscy5xdWVyeT1gdHlwZWtleXdvcmRzOlwiJHt0fVwiYCxvLnF1ZXJ5SXRlbXMocyxyKX10aHJvdyBuZXcgcyR4KFwicG9ydGFsLWdyb3VwOmZldGNoQ2F0ZWdvcnlTY2hlbWFcIixcImNvbnRlbnRDYXRlZ29yeVNldHNHcm91cFF1ZXJ5IGdyb3VwIG5vdCBmb3VuZFwiKX0pKS50aGVuKCh0PT57aWYodC50b3RhbCl7cmV0dXJuIHQucmVzdWx0c1swXS5mZXRjaERhdGEoXCJqc29uXCIscikudGhlbigodD0+e2NvbnN0IHI9dCYmdC5jYXRlZ29yeVNjaGVtYTtyZXR1cm4gciYmci5sZW5ndGg/cjpbXX0pKX1yZXR1cm4gW119KSl9fTtlJHUoW3kkcigpXSxsJGIucHJvdG90eXBlLFwiYWNjZXNzXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpEYXRlfSldLGwkYi5wcm90b3R5cGUsXCJjcmVhdGVkXCIsdm9pZCAwKSxlJHUoW3kkcigpXSxsJGIucHJvdG90eXBlLFwiZGVzY3JpcHRpb25cIix2b2lkIDApLGUkdShbeSRyKCldLGwkYi5wcm90b3R5cGUsXCJpZFwiLHZvaWQgMCksZSR1KFt5JHIoKV0sbCRiLnByb3RvdHlwZSxcImlzSW52aXRhdGlvbk9ubHlcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOkRhdGV9KV0sbCRiLnByb3RvdHlwZSxcIm1vZGlmaWVkXCIsdm9pZCAwKSxlJHUoW3kkcigpXSxsJGIucHJvdG90eXBlLFwib3duZXJcIix2b2lkIDApLGUkdShbeSRyKCldLGwkYi5wcm90b3R5cGUsXCJwb3J0YWxcIix2b2lkIDApLGUkdShbeSRyKCldLGwkYi5wcm90b3R5cGUsXCJzbmlwcGV0XCIsdm9pZCAwKSxlJHUoW3kkcigpXSxsJGIucHJvdG90eXBlLFwic29ydEZpZWxkXCIsdm9pZCAwKSxlJHUoW3kkcigpXSxsJGIucHJvdG90eXBlLFwic29ydE9yZGVyXCIsdm9pZCAwKSxlJHUoW3kkcigpXSxsJGIucHJvdG90eXBlLFwidGFnc1wiLHZvaWQgMCksZSR1KFt5JHIoKV0sbCRiLnByb3RvdHlwZSxcInRodW1ibmFpbFwiLHZvaWQgMCksZSR1KFt5JHIoe3JlYWRPbmx5OiEwfSldLGwkYi5wcm90b3R5cGUsXCJ0aHVtYm5haWxVcmxcIixudWxsKSxlJHUoW3kkcigpXSxsJGIucHJvdG90eXBlLFwidGl0bGVcIix2b2lkIDApLGUkdShbeSRyKHtyZWFkT25seTohMH0pXSxsJGIucHJvdG90eXBlLFwidXJsXCIsbnVsbCksbCRiPWUkdShbaSRYKFwiZXNyaS5wb3J0YWwuUG9ydGFsR3JvdXBcIildLGwkYik7dmFyIHAkZD1sJGI7XG5cbmNvbnN0IFBvcnRhbEdyb3VwID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe1xuICAgIF9fcHJvdG9fXzogbnVsbCxcbiAgICAnZGVmYXVsdCc6IHAkZFxufSk7XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG52YXIgbiRiO2xldCB1JGE9biRiPWNsYXNzIGV4dGVuZHMgYSRCe2NvbnN0cnVjdG9yKC4uLnQpe3N1cGVyKC4uLnQpLHRoaXMuYWNjZXNzPW51bGwsdGhpcy5jcmVhdGVkPW51bGwsdGhpcy5jdWx0dXJlPW51bGwsdGhpcy5kZXNjcmlwdGlvbj1udWxsLHRoaXMuZW1haWw9bnVsbCx0aGlzLmZ1bGxOYW1lPW51bGwsdGhpcy5tb2RpZmllZD1udWxsLHRoaXMub3JnSWQ9bnVsbCx0aGlzLnBvcnRhbD1udWxsLHRoaXMucHJlZmVycmVkVmlldz1udWxsLHRoaXMucHJpdmlsZWdlcz1udWxsLHRoaXMucmVnaW9uPW51bGwsdGhpcy5yb2xlPW51bGwsdGhpcy5yb2xlSWQ9bnVsbCx0aGlzLnNvdXJjZUpTT049bnVsbCx0aGlzLnVuaXRzPW51bGwsdGhpcy51c2VybmFtZT1udWxsLHRoaXMudXNlclR5cGU9bnVsbDt9Z2V0IHRodW1ibmFpbFVybCgpe2NvbnN0IHQ9dGhpcy51cmwscj10aGlzLnRodW1ibmFpbDtyZXR1cm4gdCYmcj90aGlzLnBvcnRhbC5fbm9ybWFsaXplVXJsKGAke3R9L2luZm8vJHtyfT9mPWpzb25gKTpudWxsfWdldCB1c2VyQ29udGVudFVybCgpe2NvbnN0IHQ9dGhpcy5nZXQoXCJwb3J0YWwucmVzdFVybFwiKTtyZXR1cm4gdD9gJHt0fS9jb250ZW50L3VzZXJzLyR7dGhpcy51c2VybmFtZX1gOm51bGx9Z2V0IHVybCgpe2NvbnN0IHQ9dGhpcy5nZXQoXCJwb3J0YWwucmVzdFVybFwiKTtyZXR1cm4gdD9gJHt0fS9jb21tdW5pdHkvdXNlcnMvJHt0aGlzLnVzZXJuYW1lfWA6bnVsbH1hZGRJdGVtKHQpe2NvbnN0IHI9dCYmdC5pdGVtLGU9dCYmdC5kYXRhLG89dCYmdC5mb2xkZXIscz17bWV0aG9kOlwicG9zdFwifTtyJiYocy5xdWVyeT1yLmNyZWF0ZVBvc3RRdWVyeSgpLG51bGwhPWUmJihcInN0cmluZ1wiPT10eXBlb2YgZT9zLnF1ZXJ5LnRleHQ9ZTpcIm9iamVjdFwiPT10eXBlb2YgZSYmKHMucXVlcnkudGV4dD1KU09OLnN0cmluZ2lmeShlKSkpKTtsZXQgbD10aGlzLnVzZXJDb250ZW50VXJsO3JldHVybiBvJiYobCs9XCIvXCIrKFwic3RyaW5nXCI9PXR5cGVvZiBvP286by5pZCkpLHRoaXMucG9ydGFsLl9yZXF1ZXN0KGwrXCIvYWRkSXRlbVwiLHMpLnRoZW4oKHQ9PihyLmlkPXQuaWQsci5wb3J0YWw9dGhpcy5wb3J0YWwsci5sb2FkZWQ/ci5yZWxvYWQoKTpyLmxvYWQoKSkpKX1kZWxldGVJdGVtKHQpe2xldCByPXRoaXMudXNlckNvbnRlbnRVcmw7cmV0dXJuIHQub3duZXJGb2xkZXImJihyKz1cIi9cIit0Lm93bmVyRm9sZGVyKSx0aGlzLnBvcnRhbC5fcmVxdWVzdChyK2AvaXRlbXMvJHt0LmlkfS9kZWxldGVgLHttZXRob2Q6XCJwb3N0XCJ9KS50aGVuKCgoKT0+e3QuaWQ9bnVsbCx0LnBvcnRhbD1udWxsO30pKX1kZWxldGVJdGVtcyh0KXtjb25zdCByPXRoaXMudXNlckNvbnRlbnRVcmwrXCIvZGVsZXRlSXRlbXNcIixlPXQubWFwKCh0PT50LmlkKSk7aWYoZS5sZW5ndGgpe2NvbnN0IG89e21ldGhvZDpcInBvc3RcIixxdWVyeTp7aXRlbXM6ZS5qb2luKFwiLFwiKX19O3JldHVybiB0aGlzLnBvcnRhbC5fcmVxdWVzdChyLG8pLnRoZW4oKCgpPT57dC5mb3JFYWNoKCh0PT57dC5pZD1udWxsLHQucG9ydGFsPW51bGw7fSkpO30pKX1yZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHZvaWQgMCl9ZmV0Y2hGb2xkZXJzKCl7Y29uc3QgdD17cXVlcnk6e251bToxfX07cmV0dXJuIHRoaXMucG9ydGFsLl9yZXF1ZXN0KHRoaXMudXNlckNvbnRlbnRVcmwsdCkudGhlbigodD0+e2xldCByO3JldHVybiByPXQmJnQuZm9sZGVycz90LmZvbGRlcnMubWFwKCh0PT57Y29uc3Qgcj1pJGEuZnJvbUpTT04odCk7cmV0dXJuIHIucG9ydGFsPXRoaXMucG9ydGFsLHJ9KSk6W10scn0pKX1mZXRjaEdyb3Vwcygpe3JldHVybiB0aGlzLnBvcnRhbC5fcmVxdWVzdCh0aGlzLnVybCkudGhlbigodD0+e2xldCByO3JldHVybiByPXQmJnQuZ3JvdXBzP3QuZ3JvdXBzLm1hcCgodD0+e2NvbnN0IHI9cCRkLmZyb21KU09OKHQpO3JldHVybiByLnBvcnRhbD10aGlzLnBvcnRhbCxyfSkpOltdLHJ9KSl9ZmV0Y2hJdGVtcyh0KXt0fHwodD17fSk7bGV0IHIsZT10aGlzLnVzZXJDb250ZW50VXJsO3JldHVybiB0LmZvbGRlciYmKGUrPVwiL1wiK3QuZm9sZGVyLmlkKSxpbXBvcnQoJy4vUG9ydGFsSXRlbS0wMzYxODJjZC5qcycpLnRoZW4oKCh7ZGVmYXVsdDpvfSk9PntyPW87Y29uc3Qgcz17Zm9sZGVyczohMSxudW06dC5udW18fDEwLHN0YXJ0OnQuc3RhcnR8fDEsc29ydEZpZWxkOnQuc29ydEZpZWxkfHxcImNyZWF0ZWRcIixzb3J0T3JkZXI6dC5zb3J0T3JkZXJ8fFwiYXNjXCJ9O3JldHVybiB0aGlzLnBvcnRhbC5fcmVxdWVzdChlLHtxdWVyeTpzfSl9KSkudGhlbigodD0+e2xldCBlO3JldHVybiB0JiZ0Lml0ZW1zPyhlPXQuaXRlbXMubWFwKCh0PT57Y29uc3QgZT1yLmZyb21KU09OKHQpO3JldHVybiBlLnBvcnRhbD10aGlzLnBvcnRhbCxlfSkpLFByb21pc2UuYWxsKGUubWFwKCh0PT50LmxvYWQoKSkpKS5jYXRjaCgodD0+dCkpLnRoZW4oKCgpPT4oe2l0ZW1zOmUsbmV4dFN0YXJ0OnQubmV4dFN0YXJ0LHRvdGFsOnQudG90YWx9KSkpKTp7aXRlbXM6W10sbmV4dFN0YXJ0Oi0xLHRvdGFsOjB9fSkpfWZldGNoVGFncygpe3JldHVybiB0aGlzLnBvcnRhbC5fcmVxdWVzdCh0aGlzLnVybCtcIi90YWdzXCIpLnRoZW4oKHQ9PnQudGFncykpfWdldFRodW1ibmFpbFVybCh0KXtsZXQgcj10aGlzLnRodW1ibmFpbFVybDtyZXR1cm4gciYmdCYmKHIrPWAmdz0ke3R9YCkscn1xdWVyeUZhdm9yaXRlcyh0KXtyZXR1cm4gdGhpcy5mYXZHcm91cElkPyh0aGlzLl9mYXZHcm91cHx8KHRoaXMuX2Zhdkdyb3VwPW5ldyBwJGQoe2lkOnRoaXMuZmF2R3JvdXBJZCxwb3J0YWw6dGhpcy5wb3J0YWx9KSksdGhpcy5fZmF2R3JvdXAucXVlcnlJdGVtcyh0KSk6UHJvbWlzZS5yZWplY3QobmV3IHMkeChcImludGVybmFsOnVua25vd25cIixcIlVua25vd24gaW50ZXJuYWwgZXJyb3JcIix7aW50ZXJuYWxFcnJvcjpcIlVua25vd24gZmF2R3JvdXBJZFwifSkpfXRvSlNPTigpe3Rocm93IG5ldyBzJHgoXCJpbnRlcm5hbDpub3QteWV0LWltcGxlbWVudGVkXCIsXCJQb3J0YWxHcm91cC50b0pTT04gaXMgbm90IHlldCBpbXBsZW1lbnRlZFwiKX1zdGF0aWMgZnJvbUpTT04odCl7aWYoIXQpcmV0dXJuIG51bGw7aWYodC5kZWNsYXJlZENsYXNzKXRocm93IG5ldyBFcnJvcihcIkpTT04gb2JqZWN0IGlzIGFscmVhZHkgaHlkcmF0ZWRcIik7Y29uc3Qgcj1uZXcgbiRiO3JldHVybiByLnNvdXJjZUpTT049dCxyLnJlYWQodCkscn19O2UkdShbeSRyKCldLHUkYS5wcm90b3R5cGUsXCJhY2Nlc3NcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOkRhdGV9KV0sdSRhLnByb3RvdHlwZSxcImNyZWF0ZWRcIix2b2lkIDApLGUkdShbeSRyKCldLHUkYS5wcm90b3R5cGUsXCJjdWx0dXJlXCIsdm9pZCAwKSxlJHUoW3kkcigpXSx1JGEucHJvdG90eXBlLFwiZGVzY3JpcHRpb25cIix2b2lkIDApLGUkdShbeSRyKCldLHUkYS5wcm90b3R5cGUsXCJlbWFpbFwiLHZvaWQgMCksZSR1KFt5JHIoKV0sdSRhLnByb3RvdHlwZSxcImZhdkdyb3VwSWRcIix2b2lkIDApLGUkdShbeSRyKCldLHUkYS5wcm90b3R5cGUsXCJmdWxsTmFtZVwiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6RGF0ZX0pXSx1JGEucHJvdG90eXBlLFwibW9kaWZpZWRcIix2b2lkIDApLGUkdShbeSRyKCldLHUkYS5wcm90b3R5cGUsXCJvcmdJZFwiLHZvaWQgMCksZSR1KFt5JHIoKV0sdSRhLnByb3RvdHlwZSxcInBvcnRhbFwiLHZvaWQgMCksZSR1KFt5JHIoKV0sdSRhLnByb3RvdHlwZSxcInByZWZlcnJlZFZpZXdcIix2b2lkIDApLGUkdShbeSRyKCldLHUkYS5wcm90b3R5cGUsXCJwcml2aWxlZ2VzXCIsdm9pZCAwKSxlJHUoW3kkcigpXSx1JGEucHJvdG90eXBlLFwicmVnaW9uXCIsdm9pZCAwKSxlJHUoW3kkcigpXSx1JGEucHJvdG90eXBlLFwicm9sZVwiLHZvaWQgMCksZSR1KFt5JHIoKV0sdSRhLnByb3RvdHlwZSxcInJvbGVJZFwiLHZvaWQgMCksZSR1KFt5JHIoKV0sdSRhLnByb3RvdHlwZSxcInNvdXJjZUpTT05cIix2b2lkIDApLGUkdShbeSRyKCldLHUkYS5wcm90b3R5cGUsXCJ0aHVtYm5haWxcIix2b2lkIDApLGUkdShbeSRyKHtyZWFkT25seTohMH0pXSx1JGEucHJvdG90eXBlLFwidGh1bWJuYWlsVXJsXCIsbnVsbCksZSR1KFt5JHIoKV0sdSRhLnByb3RvdHlwZSxcInVuaXRzXCIsdm9pZCAwKSxlJHUoW3kkcih7cmVhZE9ubHk6ITB9KV0sdSRhLnByb3RvdHlwZSxcInVzZXJDb250ZW50VXJsXCIsbnVsbCksZSR1KFt5JHIoe3JlYWRPbmx5OiEwfSldLHUkYS5wcm90b3R5cGUsXCJ1cmxcIixudWxsKSxlJHUoW3kkcigpXSx1JGEucHJvdG90eXBlLFwidXNlcm5hbWVcIix2b2lkIDApLGUkdShbeSRyKCldLHUkYS5wcm90b3R5cGUsXCJ1c2VyVHlwZVwiLHZvaWQgMCksdSRhPW4kYj1lJHUoW2kkWChcImVzcmkucG9ydGFsLlBvcnRhbFVzZXJcIildLHUkYSk7dmFyIHAkYz11JGE7XG5cbmNvbnN0IFBvcnRhbFVzZXIgPSAvKiNfX1BVUkVfXyovT2JqZWN0LmZyZWV6ZSh7XG4gICAgX19wcm90b19fOiBudWxsLFxuICAgICdkZWZhdWx0JzogcCRjXG59KTtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbnZhciBfO2xldCBPO2NvbnN0IFU9e1BvcnRhbEdyb3VwOigpPT5Qcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIFBvcnRhbEdyb3VwOyB9KSxQb3J0YWxJdGVtOigpPT5pbXBvcnQoJy4vUG9ydGFsSXRlbS0wMzYxODJjZC5qcycpLFBvcnRhbFVzZXI6KCk9PlByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gUG9ydGFsVXNlcjsgfSl9O2xldCBqJDU9Xz1jbGFzcyBleHRlbmRzKGkkTShmJDQpKXtjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLmFjY2Vzcz1udWxsLHRoaXMuYWxsU1NMPSExLHRoaXMuYXV0aE1vZGU9XCJhdXRvXCIsdGhpcy5hdXRob3JpemVkQ3Jvc3NPcmlnaW5Eb21haW5zPW51bGwsdGhpcy5iYXNlbWFwR2FsbGVyeUdyb3VwUXVlcnk9bnVsbCx0aGlzLmJpbmdLZXk9bnVsbCx0aGlzLmNhbkxpc3RBcHBzPSExLHRoaXMuY2FuTGlzdERhdGE9ITEsdGhpcy5jYW5MaXN0UHJlUHJvdmlzaW9uZWRJdGVtcz0hMSx0aGlzLmNhblByb3Zpc2lvbkRpcmVjdFB1cmNoYXNlPSExLHRoaXMuY2FuU2VhcmNoUHVibGljPSEwLHRoaXMuY2FuU2hhcmVCaW5nUHVibGljPSExLHRoaXMuY2FuU2hhcmVQdWJsaWM9ITEsdGhpcy5jYW5TaWduSW5BcmNHSVM9ITEsdGhpcy5jYW5TaWduSW5JRFA9ITEsdGhpcy5jb2xvclNldHNHcm91cFF1ZXJ5PW51bGwsdGhpcy5jb21tZW50c0VuYWJsZWQ9ITEsdGhpcy5jcmVhdGVkPW51bGwsdGhpcy5jdWx0dXJlPW51bGwsdGhpcy5jdXN0b21CYXNlVXJsPW51bGwsdGhpcy5kZWZhdWx0QmFzZW1hcD1udWxsLHRoaXMuZGVmYXVsdEV4dGVudD1udWxsLHRoaXMuZGVmYXVsdFZlY3RvckJhc2VtYXA9bnVsbCx0aGlzLmRlc2NyaXB0aW9uPW51bGwsdGhpcy5ldWVpRW5hYmxlZD1udWxsLHRoaXMuZmVhdHVyZWRHcm91cHM9bnVsbCx0aGlzLmZlYXR1cmVkSXRlbXNHcm91cFF1ZXJ5PW51bGwsdGhpcy5nYWxsZXJ5VGVtcGxhdGVzR3JvdXBRdWVyeT1udWxsLHRoaXMubGl2aW5nQXRsYXNHcm91cFF1ZXJ5PW51bGwsdGhpcy5oYXNDYXRlZ29yeVNjaGVtYT0hMSx0aGlzLmhlbHBlclNlcnZpY2VzPW51bGwsdGhpcy5ob21lUGFnZUZlYXR1cmVkQ29udGVudD1udWxsLHRoaXMuaG9tZVBhZ2VGZWF0dXJlZENvbnRlbnRDb3VudD1udWxsLHRoaXMuaHR0cFBvcnQ9bnVsbCx0aGlzLmh0dHBzUG9ydD1udWxsLHRoaXMuaWQ9bnVsbCx0aGlzLmlwQ250cnlDb2RlPW51bGwsdGhpcy5pc1BvcnRhbD0hMSx0aGlzLmlzUmVhZE9ubHk9ITEsdGhpcy5sYXllclRlbXBsYXRlc0dyb3VwUXVlcnk9bnVsbCx0aGlzLm1heFRva2VuRXhwaXJhdGlvbk1pbnV0ZXM9bnVsbCx0aGlzLm1vZGlmaWVkPW51bGwsdGhpcy5uYW1lPW51bGwsdGhpcy5wb3J0YWxIb3N0bmFtZT1udWxsLHRoaXMucG9ydGFsTW9kZT1udWxsLHRoaXMucG9ydGFsUHJvcGVydGllcz1udWxsLHRoaXMucmVnaW9uPW51bGwsdGhpcy5yb3RhdG9yUGFuZWxzPW51bGwsdGhpcy5zaG93SG9tZVBhZ2VEZXNjcmlwdGlvbj0hMSx0aGlzLnNvdXJjZUpTT049bnVsbCx0aGlzLnN1cHBvcnRzSG9zdGVkU2VydmljZXM9ITEsdGhpcy5zeW1ib2xTZXRzR3JvdXBRdWVyeT1udWxsLHRoaXMudGVtcGxhdGVzR3JvdXBRdWVyeT1udWxsLHRoaXMudW5pdHM9bnVsbCx0aGlzLnVybD1zJEgucG9ydGFsVXJsLHRoaXMudXJsS2V5PW51bGwsdGhpcy51c2VyPW51bGwsdGhpcy51c2VTdGFuZGFyZGl6ZWRRdWVyeT0hMSx0aGlzLnVzZVZlY3RvckJhc2VtYXBzPSExLHRoaXMudmVjdG9yQmFzZW1hcEdhbGxlcnlHcm91cFF1ZXJ5PW51bGw7fW5vcm1hbGl6ZUN0b3JBcmdzKGUpe3JldHVybiBcInN0cmluZ1wiPT10eXBlb2YgZT97dXJsOmV9OmV9ZGVzdHJveSgpe3RoaXMuX2VzcmlJZF9jcmVkZW50aWFsQ3JlYXRlSGFuZGxlJiYodGhpcy5fZXNyaUlkX2NyZWRlbnRpYWxDcmVhdGVIYW5kbGUucmVtb3ZlKCksdGhpcy5fZXNyaUlkX2NyZWRlbnRpYWxDcmVhdGVIYW5kbGU9bnVsbCk7fXJlYWRBdXRob3JpemVkQ3Jvc3NPcmlnaW5Eb21haW5zKGUpe2lmKGUpZm9yKGNvbnN0IHIgb2YgZSktMT09PXMkSC5yZXF1ZXN0LnRydXN0ZWRTZXJ2ZXJzLmluZGV4T2YocikmJnMkSC5yZXF1ZXN0LnRydXN0ZWRTZXJ2ZXJzLnB1c2gocik7cmV0dXJuIGV9cmVhZERlZmF1bHRCYXNlbWFwKGUpe2lmKGUpe2NvbnN0IHQ9Ty5mcm9tSlNPTihlKTtyZXR1cm4gdC5wb3J0YWxJdGVtPXtwb3J0YWw6dGhpc30sdH1yZXR1cm4gbnVsbH1yZWFkRGVmYXVsdFZlY3RvckJhc2VtYXAoZSl7aWYoZSl7Y29uc3QgdD1PLmZyb21KU09OKGUpO3JldHVybiB0LnBvcnRhbEl0ZW09e3BvcnRhbDp0aGlzfSx0fXJldHVybiBudWxsfWdldCBleHRyYVF1ZXJ5KCl7Y29uc3QgZT0hKHRoaXMudXNlciYmdGhpcy51c2VyLm9yZ0lkKXx8dGhpcy5jYW5TZWFyY2hQdWJsaWM7cmV0dXJuIHRoaXMuaWQmJiFlP2AgQU5EIG9yZ2lkOiR7dGhpcy5pZH1gOm51bGx9Z2V0IGlzT3JnYW5pemF0aW9uKCl7cmV0dXJuICEhdGhpcy5hY2Nlc3N9Z2V0IHJlc3RVcmwoKXtsZXQgZT10aGlzLnVybDtpZihlKXtjb25zdCB0PWUuaW5kZXhPZihcIi9zaGFyaW5nXCIpO2U9dD4wP2Uuc3Vic3RyaW5nKDAsdCk6dGhpcy51cmwucmVwbGFjZSgvXFwvKyQvLFwiXCIpLGUrPVwiL3NoYXJpbmcvcmVzdFwiO31yZXR1cm4gZX1nZXQgdGh1bWJuYWlsVXJsKCl7Y29uc3QgZT10aGlzLnJlc3RVcmwsdD10aGlzLnRodW1ibmFpbDtyZXR1cm4gZSYmdD90aGlzLl9ub3JtYWxpemVTU0woZStcIi9wb3J0YWxzL3NlbGYvcmVzb3VyY2VzL1wiK3QpOm51bGx9cmVhZFVybEtleShlKXtyZXR1cm4gZT9lLnRvTG93ZXJDYXNlKCk6ZX1yZWFkVXNlcihlKXtsZXQgdD1udWxsO3JldHVybiBlJiYodD1wJGMuZnJvbUpTT04oZSksdC5wb3J0YWw9dGhpcyksdH1sb2FkKGUpe2NvbnN0IHQ9aW1wb3J0KCcuL0Jhc2VtYXAtZDYwNDU0ZmQuanMnKS50aGVuKCgoe2RlZmF1bHQ6dH0pPT57YSRJKGUpLE89dDt9KSkudGhlbigoKCk9PnRoaXMuc291cmNlSlNPTj90aGlzLnNvdXJjZUpTT046dGhpcy5fZmV0Y2hTZWxmKHRoaXMuYXV0aE1vZGUsITEsZSkpKS50aGVuKChlPT57aWYocyRyKXtjb25zdCBlPXMkcjt0aGlzLmNyZWRlbnRpYWw9ZS5maW5kQ3JlZGVudGlhbCh0aGlzLnJlc3RVcmwpLHRoaXMuY3JlZGVudGlhbHx8dGhpcy5hdXRoTW9kZSE9PV8uQVVUSF9NT0RFX0FVVE98fCh0aGlzLl9lc3JpSWRfY3JlZGVudGlhbENyZWF0ZUhhbmRsZT1lLm9uKFwiY3JlZGVudGlhbC1jcmVhdGVcIiwoKCk9PntlLmZpbmRDcmVkZW50aWFsKHRoaXMucmVzdFVybCkmJnRoaXMuX3NpZ25JbigpO30pKSk7fXRoaXMuc291cmNlSlNPTj1lLHRoaXMucmVhZChlKTt9KSk7cmV0dXJuIHRoaXMuYWRkUmVzb2x2aW5nUHJvbWlzZSh0KSxQcm9taXNlLnJlc29sdmUodGhpcyl9YXN5bmMgY3JlYXRlQ2xvc2VzdEZhY2lsaXR5VGFzaygpe2F3YWl0IHRoaXMubG9hZCgpO2NvbnN0IGU9dGhpcy5fZ2V0SGVscGVyU2VydmljZVVybChcImNsb3Nlc3RGYWNpbGl0eVwiKTtyZXR1cm4gbmV3KChhd2FpdCBpbXBvcnQoJy4vQ2xvc2VzdEZhY2lsaXR5VGFzay0yNDcwYmJkOS5qcycpKS5kZWZhdWx0KShlKX1hc3luYyBjcmVhdGVFbGV2YXRpb25MYXllcnMoKXthd2FpdCB0aGlzLmxvYWQoKTtjb25zdCBlPXRoaXMuX2dldEhlbHBlclNlcnZpY2UoXCJkZWZhdWx0RWxldmF0aW9uTGF5ZXJzXCIpLHQ9KGF3YWl0IGltcG9ydCgnLi9FbGV2YXRpb25MYXllci0yNGNhNmM4Zi5qcycpKS5kZWZhdWx0O3JldHVybiBlP2UubWFwKChlPT5uZXcgdCh7aWQ6ZS5pZCx1cmw6ZS51cmx9KSkpOltdfWFzeW5jIGNyZWF0ZUdlb21ldHJ5U2VydmljZSgpe2F3YWl0IHRoaXMubG9hZCgpO2NvbnN0IGU9dGhpcy5fZ2V0SGVscGVyU2VydmljZVVybChcImdlb21ldHJ5XCIpO3JldHVybiBuZXcoKGF3YWl0IGltcG9ydCgnLi9HZW9tZXRyeVNlcnZpY2UtMzkyNGYyYjEuanMnKSkuZGVmYXVsdCkoe3VybDplfSl9YXN5bmMgY3JlYXRlUHJpbnRUYXNrKCl7YXdhaXQgdGhpcy5sb2FkKCk7Y29uc3QgZT10aGlzLl9nZXRIZWxwZXJTZXJ2aWNlVXJsKFwicHJpbnRUYXNrXCIpO3JldHVybiBuZXcoKGF3YWl0IGltcG9ydCgnLi9QcmludFRhc2stNzYyZjZkYmEuanMnKSkuZGVmYXVsdCkoZSl9YXN5bmMgY3JlYXRlUm91dGVUYXNrKCl7YXdhaXQgdGhpcy5sb2FkKCk7Y29uc3QgZT10aGlzLl9nZXRIZWxwZXJTZXJ2aWNlVXJsKFwicm91dGVcIik7cmV0dXJuIG5ldygoYXdhaXQgaW1wb3J0KCcuL1JvdXRlVGFzay0zZWZjZTQwNC5qcycpKS5kZWZhdWx0KShlKX1hc3luYyBjcmVhdGVTZXJ2aWNlQXJlYVRhc2soKXthd2FpdCB0aGlzLmxvYWQoKTtjb25zdCBlPXRoaXMuX2dldEhlbHBlclNlcnZpY2VVcmwoXCJzZXJ2aWNlQXJlYVwiKTtyZXR1cm4gbmV3KChhd2FpdCBpbXBvcnQoJy4vU2VydmljZUFyZWFUYXNrLTdkYzM5NWM0LmpzJykpLmRlZmF1bHQpKGUpfWZldGNoQmFzZW1hcHMoZSx0KXtjb25zdCByPW5ldyBjJGI7cmV0dXJuIHIucXVlcnk9ZXx8KHRoaXMudXNlVmVjdG9yQmFzZW1hcHM/dGhpcy52ZWN0b3JCYXNlbWFwR2FsbGVyeUdyb3VwUXVlcnk6dGhpcy5iYXNlbWFwR2FsbGVyeUdyb3VwUXVlcnkpLHIuZGlzYWJsZUV4dHJhUXVlcnk9ITAsdGhpcy5xdWVyeUdyb3VwcyhyLHQpLnRoZW4oKGU9PntpZihyLm51bT0xMDAsci5xdWVyeT0ndHlwZTpcIldlYiBNYXBcIiAtdHlwZTpcIldlYiBBcHBsaWNhdGlvblwiJyxlLnRvdGFsKXtjb25zdCBvPWUucmVzdWx0c1swXTtyZXR1cm4gci5zb3J0RmllbGQ9by5zb3J0RmllbGR8fFwibmFtZVwiLHIuc29ydE9yZGVyPW8uc29ydE9yZGVyfHxcImRlc2NcIixvLnF1ZXJ5SXRlbXMocix0KX1yZXR1cm4gbnVsbH0pKS50aGVuKChlPT57bGV0IHQ7cmV0dXJuIHQ9ZSYmZS50b3RhbD9lLnJlc3VsdHMuZmlsdGVyKChlPT5cIldlYiBNYXBcIj09PWUudHlwZSkpLm1hcCgoZT0+bmV3IE8oe3BvcnRhbEl0ZW06ZX0pKSk6W10sdH0pKX1mZXRjaENhdGVnb3J5U2NoZW1hKGUpe3JldHVybiB0aGlzLmhhc0NhdGVnb3J5U2NoZW1hP3RoaXMuX3JlcXVlc3QodGhpcy5yZXN0VXJsK1wiL3BvcnRhbHMvc2VsZi9jYXRlZ29yeVNjaGVtYVwiLGUpLnRoZW4oKGU9PmUuY2F0ZWdvcnlTY2hlbWEpKTpiJGIoZSk/UHJvbWlzZS5yZWplY3QobSR4KCkpOlByb21pc2UucmVzb2x2ZShbXSl9ZmV0Y2hGZWF0dXJlZEdyb3VwcyhlKXtjb25zdCB0PXRoaXMuZmVhdHVyZWRHcm91cHMscj1uZXcgYyRiO2lmKHIubnVtPTEwMCxyLnNvcnRGaWVsZD1cInRpdGxlXCIsdCYmdC5sZW5ndGgpe2NvbnN0IG89W107Zm9yKGNvbnN0IGUgb2YgdClvLnB1c2goYCh0aXRsZTpcIiR7ZS50aXRsZX1cIiBBTkQgb3duZXI6JHtlLm93bmVyfSlgKTtyZXR1cm4gci5xdWVyeT1vLmpvaW4oXCIgT1IgXCIpLHRoaXMucXVlcnlHcm91cHMocixlKS50aGVuKChlPT5lLnJlc3VsdHMpKX1yZXR1cm4gYiRiKGUpP1Byb21pc2UucmVqZWN0KG0keCgpKTpQcm9taXNlLnJlc29sdmUoW10pfWZldGNoUmVnaW9ucyhlKXtjb25zdCB0PXRoaXMudXNlciYmdGhpcy51c2VyLmN1bHR1cmV8fHRoaXMuY3VsdHVyZXx8YyQxNSgpO3JldHVybiB0aGlzLl9yZXF1ZXN0KHRoaXMucmVzdFVybCtcIi9wb3J0YWxzL3JlZ2lvbnNcIix7Li4uZSxxdWVyeTp7Y3VsdHVyZTp0fX0pfXN0YXRpYyBnZXREZWZhdWx0KCl7cmV0dXJuIF8uX2RlZmF1bHQmJiFfLl9kZWZhdWx0LmRlc3Ryb3llZHx8KF8uX2RlZmF1bHQ9bmV3IF8pLF8uX2RlZmF1bHR9cXVlcnlHcm91cHMoZSx0KXtyZXR1cm4gdGhpcy5fcXVlcnlQb3J0YWwoXCIvY29tbXVuaXR5L2dyb3Vwc1wiLGUsXCJQb3J0YWxHcm91cFwiLHQpfXF1ZXJ5SXRlbXMoZSx0KXtyZXR1cm4gdGhpcy5fcXVlcnlQb3J0YWwoXCIvc2VhcmNoXCIsZSxcIlBvcnRhbEl0ZW1cIix0KX1xdWVyeVVzZXJzKGUsdCl7cmV0dXJuIGUuc29ydEZpZWxkfHwoZS5zb3J0RmllbGQ9XCJ1c2VybmFtZVwiKSx0aGlzLl9xdWVyeVBvcnRhbChcIi9jb21tdW5pdHkvdXNlcnNcIixlLFwiUG9ydGFsVXNlclwiLHQpfXRvSlNPTigpe3Rocm93IG5ldyBzJHgoXCJpbnRlcm5hbDpub3QteWV0LWltcGxlbWVudGVkXCIsXCJQb3J0YWwudG9KU09OIGlzIG5vdCB5ZXQgaW1wbGVtZW50ZWRcIil9c3RhdGljIGZyb21KU09OKGUpe2lmKCFlKXJldHVybiBudWxsO2lmKGUuZGVjbGFyZWRDbGFzcyl0aHJvdyBuZXcgRXJyb3IoXCJKU09OIG9iamVjdCBpcyBhbHJlYWR5IGh5ZHJhdGVkXCIpO3JldHVybiBuZXcgXyh7c291cmNlSlNPTjplfSl9X2dldEhlbHBlclNlcnZpY2UoZSl7Y29uc3QgdD10aGlzLmhlbHBlclNlcnZpY2VzJiZ0aGlzLmhlbHBlclNlcnZpY2VzW2VdO2lmKCF0KXRocm93IG5ldyBzJHgoXCJwb3J0YWw6c2VydmljZS1ub3QtZm91bmRcIixgVGhlIFxcYGhlbHBlclNlcnZpY2VzXFxgIGRvIG5vdCBpbmNsdWRlIGFuIGVudHJ5IG5hbWVkIFwiJHtlfVwiYCk7cmV0dXJuIHR9X2dldEhlbHBlclNlcnZpY2VVcmwoZSl7Y29uc3QgdD10aGlzLl9nZXRIZWxwZXJTZXJ2aWNlKGUpO2lmKCF0LnVybCl0aHJvdyBuZXcgcyR4KFwicG9ydGFsOnNlcnZpY2UtdXJsLW5vdC1mb3VuZFwiLGBUaGUgXFxgaGVscGVyU2VydmljZXNcXGAgZW50cnkgXCIke2V9XCIgZG9lcyBub3QgaW5jbHVkZSBhIFxcYHVybFxcYCB2YWx1ZWApO3JldHVybiB0LnVybH1fZmV0Y2hTZWxmKGU9dGhpcy5hdXRoTW9kZSx0PSExLHIpe2NvbnN0IG89dGhpcy5yZXN0VXJsK1wiL3BvcnRhbHMvc2VsZlwiLHM9e2F1dGhNb2RlOmUscXVlcnk6e2N1bHR1cmU6YyQxNSgpLnRvTG93ZXJDYXNlKCl9LC4uLnJ9O3JldHVybiBcImF1dG9cIj09PXMuYXV0aE1vZGUmJihzLmF1dGhNb2RlPVwibm8tcHJvbXB0XCIpLHQmJihzLnF1ZXJ5LmRlZmF1bHQ9ITApLHRoaXMuX3JlcXVlc3QobyxzKX1fcXVlcnlQb3J0YWwoZSx0LHIscyl7Y29uc3QgaT1kJEUoYyRiLHQpLGE9dD0+dGhpcy5fcmVxdWVzdCh0aGlzLnJlc3RVcmwrZSx7Li4uaS50b1JlcXVlc3RPcHRpb25zKHRoaXMpLC4uLnN9KS50aGVuKChlPT57Y29uc3Qgcj1pLmNsb25lKCk7cmV0dXJuIHIuc3RhcnQ9ZS5uZXh0U3RhcnQsbmV3IHAkZih7bmV4dFF1ZXJ5UGFyYW1zOnIscXVlcnlQYXJhbXM6aSx0b3RhbDplLnRvdGFsLHJlc3VsdHM6Xy5fcmVzdWx0c1RvVHlwZWRBcnJheSh0LHtwb3J0YWw6dGhpc30sZSxzKX0pfSkpLnRoZW4oKGU9PlByb21pc2UuYWxsKGUucmVzdWx0cy5tYXAoKHQ9PlwiZnVuY3Rpb25cIj09dHlwZW9mIHQud2hlbj90LndoZW4oKTplKSkpLnRoZW4oKCgpPT5lKSwodD0+KHckOSh0KSxlKSkpKSk7cmV0dXJuIHImJlVbcl0/VVtyXSgpLnRoZW4oKCh7ZGVmYXVsdDplfSk9PihhJEkocyksYShlKSkpKTphKCl9X3NpZ25Jbigpe2lmKHRoaXMuYXV0aE1vZGU9PT1fLkFVVEhfTU9ERV9BTk9OWU1PVVMpcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBzJHgoXCJwb3J0YWw6aW52YWxpZC1hdXRoLW1vZGVcIixgQ3VycmVudCBcImF1dGhNb2RlXCInIGlzIFwiJHt0aGlzLmF1dGhNb2RlfVwiYCkpO2lmKFwiZmFpbGVkXCI9PT10aGlzLmxvYWRTdGF0dXMpcmV0dXJuIFByb21pc2UucmVqZWN0KHRoaXMubG9hZEVycm9yKTtjb25zdCBlPWU9PlByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCgpPT5cIm5vdC1sb2FkZWRcIj09PXRoaXMubG9hZFN0YXR1cz8oZXx8KHRoaXMuYXV0aE1vZGU9XCJpbW1lZGlhdGVcIiksdGhpcy5sb2FkKCkudGhlbigoKCk9Pm51bGwpKSk6XCJsb2FkaW5nXCI9PT10aGlzLmxvYWRTdGF0dXM/dGhpcy5sb2FkKCkudGhlbigoKCk9PnRoaXMuY3JlZGVudGlhbD9udWxsOih0aGlzLmNyZWRlbnRpYWw9ZSx0aGlzLl9mZXRjaFNlbGYoXCJpbW1lZGlhdGVcIikpKSk6dGhpcy51c2VyJiZ0aGlzLmNyZWRlbnRpYWw9PT1lP251bGw6KHRoaXMuY3JlZGVudGlhbD1lLHRoaXMuX2ZldGNoU2VsZihcImltbWVkaWF0ZVwiKSkpKS50aGVuKChlPT57ZSYmKHRoaXMuc291cmNlSlNPTj1lLHRoaXMucmVhZChlKSk7fSkpO3JldHVybiBzJHI/cyRyLmdldENyZWRlbnRpYWwodGhpcy5yZXN0VXJsKS50aGVuKCh0PT5lKHQpKSk6ZSh0aGlzLmNyZWRlbnRpYWwpfV9ub3JtYWxpemVTU0woZSl7cmV0dXJuIGUucmVwbGFjZSgvXmh0dHA6L2ksXCJodHRwczpcIikucmVwbGFjZShcIjo3MDgwXCIsXCI6NzQ0M1wiKX1fbm9ybWFsaXplVXJsKGUpe2NvbnN0IHQ9dGhpcy5jcmVkZW50aWFsJiZ0aGlzLmNyZWRlbnRpYWwudG9rZW47cmV0dXJuIHRoaXMuX25vcm1hbGl6ZVNTTCh0P2UrKGUuaW5kZXhPZihcIj9cIik+LTE/XCImXCI6XCI/XCIpK1widG9rZW49XCIrdDplKX1fcmVxdWVzdFRvVHlwZWRBcnJheShlLHQscil7cmV0dXJuIHRoaXMuX3JlcXVlc3QoZSx0KS50aGVuKChlPT57Y29uc3QgdD1fLl9yZXN1bHRzVG9UeXBlZEFycmF5KHIse3BvcnRhbDp0aGlzfSxlKTtyZXR1cm4gUHJvbWlzZS5hbGwodC5tYXAoKHQ9PlwiZnVuY3Rpb25cIj09dHlwZW9mIHQud2hlbj90LndoZW4oKTplKSkpLnRoZW4oKCgpPT50KSwoKCk9PnQpKX0pKX1fcmVxdWVzdChlLHQ9e30pe2NvbnN0IHI9e2Y6XCJqc29uXCIsLi4udC5xdWVyeX0se2F1dGhNb2RlOm89KHRoaXMuYXV0aE1vZGU9PT1fLkFVVEhfTU9ERV9BTk9OWU1PVVM/XCJhbm9ueW1vdXNcIjpcImF1dG9cIiksYm9keTpzPW51bGwsY2FjaGVCdXN0Omk9ITEsbWV0aG9kOmE9XCJhdXRvXCIscmVzcG9uc2VUeXBlOmw9XCJqc29uXCIsc2lnbmFsOm59PXQsdT17YXV0aE1vZGU6byxib2R5OnMsY2FjaGVCdXN0OmksbWV0aG9kOmEscXVlcnk6cixyZXNwb25zZVR5cGU6bCx0aW1lb3V0OjAsc2lnbmFsOm59O3JldHVybiBVJDEodGhpcy5fbm9ybWFsaXplU1NMKGUpLHUpLnRoZW4oKGU9PmUuZGF0YSkpfXN0YXRpYyBfcmVzdWx0c1RvVHlwZWRBcnJheShlLHQsbyxzKXtsZXQgaTtpZihvKXtjb25zdCBhPXIkQShzKT9zLnNpZ25hbDpudWxsO2k9by5saXN0aW5nc3x8by5ub3RpZmljYXRpb25zfHxvLnVzZXJJbnZpdGF0aW9uc3x8by50YWdzfHxvLml0ZW1zfHxvLmdyb3Vwc3x8by5jb21tZW50c3x8by5wcm92aXNpb25zfHxvLnJlc3VsdHN8fG8ucmVsYXRlZEl0ZW1zfHxvLChlfHx0KSYmKGk9aS5tYXAoKHI9Pntjb25zdCBvPU9iamVjdC5hc3NpZ24oZT9lLmZyb21KU09OKHIpOnIsdCk7cmV0dXJuIFwiZnVuY3Rpb25cIj09dHlwZW9mIG8ubG9hZCYmby5sb2FkKGEpLG99KSkpO31lbHNlIGk9W107cmV0dXJuIGl9fTtqJDUuQVVUSF9NT0RFX0FOT05ZTU9VUz1cImFub255bW91c1wiLGokNS5BVVRIX01PREVfQVVUTz1cImF1dG9cIixqJDUuQVVUSF9NT0RFX0lNTUVESUFURT1cImltbWVkaWF0ZVwiLGUkdShbeSRyKCldLGokNS5wcm90b3R5cGUsXCJhY2Nlc3NcIix2b2lkIDApLGUkdShbeSRyKCldLGokNS5wcm90b3R5cGUsXCJhbGxTU0xcIix2b2lkIDApLGUkdShbeSRyKCldLGokNS5wcm90b3R5cGUsXCJhdXRoTW9kZVwiLHZvaWQgMCksZSR1KFt5JHIoKV0saiQ1LnByb3RvdHlwZSxcImF1dGhvcml6ZWRDcm9zc09yaWdpbkRvbWFpbnNcIix2b2lkIDApLGUkdShbZSRDKFwiYXV0aG9yaXplZENyb3NzT3JpZ2luRG9tYWluc1wiKV0saiQ1LnByb3RvdHlwZSxcInJlYWRBdXRob3JpemVkQ3Jvc3NPcmlnaW5Eb21haW5zXCIsbnVsbCksZSR1KFt5JHIoKV0saiQ1LnByb3RvdHlwZSxcImJhc2VtYXBHYWxsZXJ5R3JvdXBRdWVyeVwiLHZvaWQgMCksZSR1KFt5JHIoKV0saiQ1LnByb3RvdHlwZSxcImJpbmdLZXlcIix2b2lkIDApLGUkdShbeSRyKCldLGokNS5wcm90b3R5cGUsXCJjYW5MaXN0QXBwc1wiLHZvaWQgMCksZSR1KFt5JHIoKV0saiQ1LnByb3RvdHlwZSxcImNhbkxpc3REYXRhXCIsdm9pZCAwKSxlJHUoW3kkcigpXSxqJDUucHJvdG90eXBlLFwiY2FuTGlzdFByZVByb3Zpc2lvbmVkSXRlbXNcIix2b2lkIDApLGUkdShbeSRyKCldLGokNS5wcm90b3R5cGUsXCJjYW5Qcm92aXNpb25EaXJlY3RQdXJjaGFzZVwiLHZvaWQgMCksZSR1KFt5JHIoKV0saiQ1LnByb3RvdHlwZSxcImNhblNlYXJjaFB1YmxpY1wiLHZvaWQgMCksZSR1KFt5JHIoKV0saiQ1LnByb3RvdHlwZSxcImNhblNoYXJlQmluZ1B1YmxpY1wiLHZvaWQgMCksZSR1KFt5JHIoKV0saiQ1LnByb3RvdHlwZSxcImNhblNoYXJlUHVibGljXCIsdm9pZCAwKSxlJHUoW3kkcigpXSxqJDUucHJvdG90eXBlLFwiY2FuU2lnbkluQXJjR0lTXCIsdm9pZCAwKSxlJHUoW3kkcigpXSxqJDUucHJvdG90eXBlLFwiY2FuU2lnbkluSURQXCIsdm9pZCAwKSxlJHUoW3kkcigpXSxqJDUucHJvdG90eXBlLFwiY29sb3JTZXRzR3JvdXBRdWVyeVwiLHZvaWQgMCksZSR1KFt5JHIoKV0saiQ1LnByb3RvdHlwZSxcImNvbW1lbnRzRW5hYmxlZFwiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6RGF0ZX0pXSxqJDUucHJvdG90eXBlLFwiY3JlYXRlZFwiLHZvaWQgMCksZSR1KFt5JHIoKV0saiQ1LnByb3RvdHlwZSxcImNyZWRlbnRpYWxcIix2b2lkIDApLGUkdShbeSRyKCldLGokNS5wcm90b3R5cGUsXCJjdWx0dXJlXCIsdm9pZCAwKSxlJHUoW3kkcigpXSxqJDUucHJvdG90eXBlLFwiY3VycmVudFZlcnNpb25cIix2b2lkIDApLGUkdShbeSRyKCldLGokNS5wcm90b3R5cGUsXCJjdXN0b21CYXNlVXJsXCIsdm9pZCAwKSxlJHUoW3kkcigpXSxqJDUucHJvdG90eXBlLFwiZGVmYXVsdEJhc2VtYXBcIix2b2lkIDApLGUkdShbZSRDKFwiZGVmYXVsdEJhc2VtYXBcIildLGokNS5wcm90b3R5cGUsXCJyZWFkRGVmYXVsdEJhc2VtYXBcIixudWxsKSxlJHUoW3kkcih7dHlwZTpNJDN9KV0saiQ1LnByb3RvdHlwZSxcImRlZmF1bHRFeHRlbnRcIix2b2lkIDApLGUkdShbeSRyKCldLGokNS5wcm90b3R5cGUsXCJkZWZhdWx0VmVjdG9yQmFzZW1hcFwiLHZvaWQgMCksZSR1KFtlJEMoXCJkZWZhdWx0VmVjdG9yQmFzZW1hcFwiKV0saiQ1LnByb3RvdHlwZSxcInJlYWREZWZhdWx0VmVjdG9yQmFzZW1hcFwiLG51bGwpLGUkdShbeSRyKCldLGokNS5wcm90b3R5cGUsXCJkZXNjcmlwdGlvblwiLHZvaWQgMCksZSR1KFt5JHIoKV0saiQ1LnByb3RvdHlwZSxcImV1ZWlFbmFibGVkXCIsdm9pZCAwKSxlJHUoW3kkcih7cmVhZE9ubHk6ITB9KV0saiQ1LnByb3RvdHlwZSxcImV4dHJhUXVlcnlcIixudWxsKSxlJHUoW3kkcigpXSxqJDUucHJvdG90eXBlLFwiZmVhdHVyZWRHcm91cHNcIix2b2lkIDApLGUkdShbeSRyKCldLGokNS5wcm90b3R5cGUsXCJmZWF0dXJlZEl0ZW1zR3JvdXBRdWVyeVwiLHZvaWQgMCksZSR1KFt5JHIoKV0saiQ1LnByb3RvdHlwZSxcImdhbGxlcnlUZW1wbGF0ZXNHcm91cFF1ZXJ5XCIsdm9pZCAwKSxlJHUoW3kkcigpXSxqJDUucHJvdG90eXBlLFwibGl2aW5nQXRsYXNHcm91cFF1ZXJ5XCIsdm9pZCAwKSxlJHUoW3kkcigpXSxqJDUucHJvdG90eXBlLFwiaGFzQ2F0ZWdvcnlTY2hlbWFcIix2b2lkIDApLGUkdShbeSRyKCldLGokNS5wcm90b3R5cGUsXCJoZWxwQmFzZVwiLHZvaWQgMCksZSR1KFt5JHIoKV0saiQ1LnByb3RvdHlwZSxcImhlbHBlclNlcnZpY2VzXCIsdm9pZCAwKSxlJHUoW3kkcigpXSxqJDUucHJvdG90eXBlLFwiaGVscE1hcFwiLHZvaWQgMCksZSR1KFt5JHIoKV0saiQ1LnByb3RvdHlwZSxcImhvbWVQYWdlRmVhdHVyZWRDb250ZW50XCIsdm9pZCAwKSxlJHUoW3kkcigpXSxqJDUucHJvdG90eXBlLFwiaG9tZVBhZ2VGZWF0dXJlZENvbnRlbnRDb3VudFwiLHZvaWQgMCksZSR1KFt5JHIoKV0saiQ1LnByb3RvdHlwZSxcImh0dHBQb3J0XCIsdm9pZCAwKSxlJHUoW3kkcigpXSxqJDUucHJvdG90eXBlLFwiaHR0cHNQb3J0XCIsdm9pZCAwKSxlJHUoW3kkcigpXSxqJDUucHJvdG90eXBlLFwiaWRcIix2b2lkIDApLGUkdShbeSRyKCldLGokNS5wcm90b3R5cGUsXCJpcENudHJ5Q29kZVwiLHZvaWQgMCksZSR1KFt5JHIoe3JlYWRPbmx5OiEwfSldLGokNS5wcm90b3R5cGUsXCJpc09yZ2FuaXphdGlvblwiLG51bGwpLGUkdShbeSRyKCldLGokNS5wcm90b3R5cGUsXCJpc1BvcnRhbFwiLHZvaWQgMCksZSR1KFt5JHIoKV0saiQ1LnByb3RvdHlwZSxcImlzUmVhZE9ubHlcIix2b2lkIDApLGUkdShbeSRyKCldLGokNS5wcm90b3R5cGUsXCJsYXllclRlbXBsYXRlc0dyb3VwUXVlcnlcIix2b2lkIDApLGUkdShbeSRyKCldLGokNS5wcm90b3R5cGUsXCJtYXhUb2tlbkV4cGlyYXRpb25NaW51dGVzXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpEYXRlfSldLGokNS5wcm90b3R5cGUsXCJtb2RpZmllZFwiLHZvaWQgMCksZSR1KFt5JHIoKV0saiQ1LnByb3RvdHlwZSxcIm5hbWVcIix2b2lkIDApLGUkdShbeSRyKCldLGokNS5wcm90b3R5cGUsXCJwb3J0YWxIb3N0bmFtZVwiLHZvaWQgMCksZSR1KFt5JHIoKV0saiQ1LnByb3RvdHlwZSxcInBvcnRhbE1vZGVcIix2b2lkIDApLGUkdShbeSRyKCldLGokNS5wcm90b3R5cGUsXCJwb3J0YWxQcm9wZXJ0aWVzXCIsdm9pZCAwKSxlJHUoW3kkcigpXSxqJDUucHJvdG90eXBlLFwicmVnaW9uXCIsdm9pZCAwKSxlJHUoW3kkcih7cmVhZE9ubHk6ITB9KV0saiQ1LnByb3RvdHlwZSxcInJlc3RVcmxcIixudWxsKSxlJHUoW3kkcigpXSxqJDUucHJvdG90eXBlLFwicm90YXRvclBhbmVsc1wiLHZvaWQgMCksZSR1KFt5JHIoKV0saiQ1LnByb3RvdHlwZSxcInNob3dIb21lUGFnZURlc2NyaXB0aW9uXCIsdm9pZCAwKSxlJHUoW3kkcigpXSxqJDUucHJvdG90eXBlLFwic291cmNlSlNPTlwiLHZvaWQgMCksZSR1KFt5JHIoKV0saiQ1LnByb3RvdHlwZSxcInN0YXRpY0ltYWdlc1VybFwiLHZvaWQgMCksZSR1KFt5JHIoKV0saiQ1LnByb3RvdHlwZSxcInN0eWxlc0dyb3VwUXVlcnlcIix2b2lkIDApLGUkdShbeSRyKCldLGokNS5wcm90b3R5cGUsXCJzdXBwb3J0c0hvc3RlZFNlcnZpY2VzXCIsdm9pZCAwKSxlJHUoW3kkcigpXSxqJDUucHJvdG90eXBlLFwic3ltYm9sU2V0c0dyb3VwUXVlcnlcIix2b2lkIDApLGUkdShbeSRyKCldLGokNS5wcm90b3R5cGUsXCJ0ZW1wbGF0ZXNHcm91cFF1ZXJ5XCIsdm9pZCAwKSxlJHUoW3kkcigpXSxqJDUucHJvdG90eXBlLFwidGh1bWJuYWlsXCIsdm9pZCAwKSxlJHUoW3kkcih7cmVhZE9ubHk6ITB9KV0saiQ1LnByb3RvdHlwZSxcInRodW1ibmFpbFVybFwiLG51bGwpLGUkdShbeSRyKCldLGokNS5wcm90b3R5cGUsXCJ1bml0c1wiLHZvaWQgMCksZSR1KFt5JHIoKV0saiQ1LnByb3RvdHlwZSxcInVybFwiLHZvaWQgMCksZSR1KFt5JHIoKV0saiQ1LnByb3RvdHlwZSxcInVybEtleVwiLHZvaWQgMCksZSR1KFtlJEMoXCJ1cmxLZXlcIildLGokNS5wcm90b3R5cGUsXCJyZWFkVXJsS2V5XCIsbnVsbCksZSR1KFt5JHIoKV0saiQ1LnByb3RvdHlwZSxcInVzZXJcIix2b2lkIDApLGUkdShbZSRDKFwidXNlclwiKV0saiQ1LnByb3RvdHlwZSxcInJlYWRVc2VyXCIsbnVsbCksZSR1KFt5JHIoKV0saiQ1LnByb3RvdHlwZSxcInVzZVN0YW5kYXJkaXplZFF1ZXJ5XCIsdm9pZCAwKSxlJHUoW3kkcigpXSxqJDUucHJvdG90eXBlLFwidXNlVmVjdG9yQmFzZW1hcHNcIix2b2lkIDApLGUkdShbeSRyKCldLGokNS5wcm90b3R5cGUsXCJ2ZWN0b3JCYXNlbWFwR2FsbGVyeUdyb3VwUXVlcnlcIix2b2lkIDApLGokNT1fPWUkdShbaSRYKFwiZXNyaS5wb3J0YWwuUG9ydGFsXCIpXSxqJDUpO3ZhciB3JDI9aiQ1O1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xudmFyIHAkYjtsZXQgaSQ5PXAkYj1jbGFzcyBleHRlbmRzIHUkRHtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5wb3J0YWw9bnVsbDt9Y2xvbmUoKXtyZXR1cm4gbmV3IHAkYih7bmFtZTp0aGlzLm5hbWUsc3R5bGVVcmw6dGhpcy5zdHlsZVVybCxzdHlsZU5hbWU6dGhpcy5zdHlsZU5hbWUscG9ydGFsOnRoaXMucG9ydGFsfSl9fTtlJHUoW3kkcih7dHlwZTpTdHJpbmd9KV0saSQ5LnByb3RvdHlwZSxcIm5hbWVcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOlN0cmluZ30pXSxpJDkucHJvdG90eXBlLFwic3R5bGVVcmxcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOlN0cmluZ30pXSxpJDkucHJvdG90eXBlLFwic3R5bGVOYW1lXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTp3JDJ9KV0saSQ5LnByb3RvdHlwZSxcInBvcnRhbFwiLHZvaWQgMCksaSQ5PXAkYj1lJHUoW2kkWChcImVzcmkuc3ltYm9scy5zdXBwb3J0LlN0eWxlT3JpZ2luXCIpXSxpJDkpO3ZhciBsJGE9aSQ5O1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xudmFyIHQkNTtsZXQgcCRhPXQkNT1jbGFzcyBleHRlbmRzIHUkRHtjbG9uZSgpe3JldHVybiBuZXcgdCQ1KHt1cmw6dGhpcy51cmx9KX19O2UkdShbeSRyKHt0eXBlOlN0cmluZ30pXSxwJGEucHJvdG90eXBlLFwidXJsXCIsdm9pZCAwKSxwJGE9dCQ1PWUkdShbaSRYKFwiZXNyaS5zeW1ib2xzLnN1cHBvcnQuVGh1bWJuYWlsXCIpXSxwJGEpO3ZhciBjJGE9cCRhO1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuY29uc3QgdiQzPXtpY29uOlMkMyxvYmplY3Q6bCRpLGxpbmU6ZiQ4LHBhdGg6ZCRkLGZpbGw6aCRmLGV4dHJ1ZGU6YyRtLHRleHQ6eSQ2LHdhdGVyOm4kZn0sQyQzPUwkNS5vZlR5cGUoe2Jhc2U6YyRzLGtleTpcInR5cGVcIix0eXBlTWFwOnYkMyxlcnJvckNvbnRleHQ6XCJzeW1ib2wtbGF5ZXJcIn0pLFQkMT1uJFQuZ2V0TG9nZ2VyKFwiZXNyaS5zeW1ib2xzLlN5bWJvbDNEXCIpO2xldCBrJDI9Y2xhc3MgZXh0ZW5kcyBuJG97Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5zdHlsZU9yaWdpbj1udWxsLHRoaXMudGh1bWJuYWlsPW51bGwsdGhpcy50eXBlPW51bGw7Y29uc3Qgcj10aGlzLl9fYWNjZXNzb3JfXyYmdGhpcy5fX2FjY2Vzc29yX18ubWV0YWRhdGFzJiZ0aGlzLl9fYWNjZXNzb3JfXy5tZXRhZGF0YXMuc3ltYm9sTGF5ZXJzLG89ciYmci50eXBlfHxMJDU7dGhpcy5fc2V0KFwic3ltYm9sTGF5ZXJzXCIsbmV3IG8pO31nZXQgY29sb3IoKXtyZXR1cm4gbnVsbH1zZXQgY29sb3IoZSl7VCQxLmVycm9yKFwiU3ltYm9sM0QgZG9lcyBub3Qgc3VwcG9ydCBjb2xvcnMgb24gdGhlIHN5bWJvbCBsZXZlbC4gQ29sb3JzIG1heSBiZSBzZXQgb24gaW5kaXZpZHVhbCBzeW1ib2wgbGF5ZXIgbWF0ZXJpYWxzIGluc3RlYWQuXCIpO31zZXQgc3ltYm9sTGF5ZXJzKGUpe24kZShlLHRoaXMuX2dldChcInN5bWJvbExheWVyc1wiKSk7fXJlYWRTdHlsZU9yaWdpbihlLHIsbyl7aWYoZS5zdHlsZVVybCYmZS5uYW1lKXtjb25zdCByPWMkVShlLnN0eWxlVXJsLG8pO3JldHVybiBuZXcgbCRhKHtzdHlsZVVybDpyLG5hbWU6ZS5uYW1lfSl9aWYoZS5zdHlsZU5hbWUmJmUubmFtZSlyZXR1cm4gbmV3IGwkYSh7cG9ydGFsOm8mJm8ucG9ydGFsfHx3JDIuZ2V0RGVmYXVsdCgpLHN0eWxlTmFtZTplLnN0eWxlTmFtZSxuYW1lOmUubmFtZX0pO28mJm8ubWVzc2FnZXMmJm8ubWVzc2FnZXMucHVzaChuZXcgdCRIKFwic3ltYm9sM2Q6aW5jb21wbGV0ZS1zdHlsZS1vcmlnaW5cIixcIlN0eWxlIG9yaWdpbiByZXF1aXJlcyBlaXRoZXIgYSAnc3R5bGVVcmwnIG9yICdzdHlsZU5hbWUnIGFuZCBhICduYW1lJyBwcm9wZXJ0eVwiLHtjb250ZXh0Om8sZGVmaW5pdGlvbjplfSkpO313cml0ZVN0eWxlT3JpZ2luKGUscixvLHQpe2lmKGUuc3R5bGVVcmwmJmUubmFtZSl7bGV0IG89aSRXKGUuc3R5bGVVcmwsdCk7USQyKG8pJiYobz16JDYobykpLHIuc3R5bGVPcmlnaW49e3N0eWxlVXJsOm8sbmFtZTplLm5hbWV9O31lbHNlIGUuc3R5bGVOYW1lJiZlLm5hbWUmJihlLnBvcnRhbCYmdCYmdC5wb3J0YWwmJiFQJDgoZS5wb3J0YWwucmVzdFVybCx0LnBvcnRhbC5yZXN0VXJsKT90JiZ0Lm1lc3NhZ2VzJiZ0Lm1lc3NhZ2VzLnB1c2gobmV3IHQkSChcInN5bWJvbDpjcm9zcy1wb3J0YWxcIixcIlRoZSBzeW1ib2wgc3R5bGUgb3JpZ2luIGNhbm5vdCBiZSBwZXJzaXN0ZWQgYmVjYXVzZSBpdCByZWZlcnMgdG8gYW4gaXRlbSBvbiBhIGRpZmZlcmVudCBwb3J0YWwgdGhhbiB0aGUgb25lIGJlaW5nIHNhdmVkIHRvLlwiLHtzeW1ib2w6dGhpc30pKTpyLnN0eWxlT3JpZ2luPXtzdHlsZU5hbWU6ZS5zdHlsZU5hbWUsbmFtZTplLm5hbWV9KTt9bm9ybWFsaXplQ3RvckFyZ3MoZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBjJHN8fGUmJnYkM1tlLnR5cGVdP3tzeW1ib2xMYXllcnM6W2VdfTpBcnJheS5pc0FycmF5KGUpP3tzeW1ib2xMYXllcnM6ZX06ZX19O2UkdShbeSRyKHtqc29uOntyZWFkOiExLHdyaXRlOiExfX0pXSxrJDIucHJvdG90eXBlLFwiY29sb3JcIixudWxsKSxlJHUoW3kkcih7dHlwZTpDJDMsbm9uTnVsbGFibGU6ITAsanNvbjp7d3JpdGU6ITB9fSksYyRfKHQkNildLGskMi5wcm90b3R5cGUsXCJzeW1ib2xMYXllcnNcIixudWxsKSxlJHUoW3kkcih7dHlwZTpsJGF9KV0sayQyLnByb3RvdHlwZSxcInN0eWxlT3JpZ2luXCIsdm9pZCAwKSxlJHUoW2UkQyhcInN0eWxlT3JpZ2luXCIpXSxrJDIucHJvdG90eXBlLFwicmVhZFN0eWxlT3JpZ2luXCIsbnVsbCksZSR1KFtvJHYoXCJzdHlsZU9yaWdpblwiLHtcInN0eWxlT3JpZ2luLnN0eWxlVXJsXCI6e3R5cGU6U3RyaW5nfSxcInN0eWxlT3JpZ2luLnN0eWxlTmFtZVwiOnt0eXBlOlN0cmluZ30sXCJzdHlsZU9yaWdpbi5uYW1lXCI6e3R5cGU6U3RyaW5nfX0pXSxrJDIucHJvdG90eXBlLFwid3JpdGVTdHlsZU9yaWdpblwiLG51bGwpLGUkdShbeSRyKHt0eXBlOmMkYSxqc29uOntyZWFkOiExfX0pXSxrJDIucHJvdG90eXBlLFwidGh1bWJuYWlsXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpbXCJwb2ludC0zZFwiLFwibGluZS0zZFwiLFwicG9seWdvbi0zZFwiLFwibWVzaC0zZFwiLFwibGFiZWwtM2RcIl0scmVhZE9ubHk6ITB9KV0sayQyLnByb3RvdHlwZSxcInR5cGVcIix2b2lkIDApLGskMj1lJHUoW2kkWChcImVzcmkuc3ltYm9scy5TeW1ib2wzRFwiKV0sayQyKTt2YXIgQSQyPWskMjtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbnZhciBsJDk7bGV0IGkkOD1sJDk9Y2xhc3MgZXh0ZW5kcyBhJEJ7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuY29sb3I9bmV3IG8kaihcIndoaXRlXCIpO31jbG9uZSgpe3JldHVybiBuZXcgbCQ5KHtjb2xvcjp5JHYodGhpcy5jb2xvcil9KX19O2UkdShbeSRyKGMkcSldLGkkOC5wcm90b3R5cGUsXCJjb2xvclwiLHZvaWQgMCksaSQ4PWwkOT1lJHUoW2kkWChcImVzcmkuc3ltYm9scy5jYWxsb3V0cy5MaW5lQ2FsbG91dDNEQm9yZGVyXCIpXSxpJDgpO3ZhciBhJDg9aSQ4O09iamVjdC5mcmVlemUoe19fcHJvdG9fXzpudWxsLGdldCBMaW5lQ2FsbG91dDNEQm9yZGVyKCl7cmV0dXJuIGkkOH0sZGVmYXVsdDphJDh9KTtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmxldCB0JDQ9Y2xhc3MgZXh0ZW5kcyBhJEJ7Y29uc3RydWN0b3Iocil7c3VwZXIociksdGhpcy52aXNpYmxlPSEwO31jbG9uZSgpe319O2UkdShbeSRyKHt0eXBlOltcImxpbmVcIl0scmVhZE9ubHk6ITAsanNvbjp7cmVhZDohMSx3cml0ZTp7aWdub3JlT3JpZ2luOiEwfX19KV0sdCQ0LnByb3RvdHlwZSxcInR5cGVcIix2b2lkIDApLGUkdShbeSRyKHtyZWFkT25seTohMH0pXSx0JDQucHJvdG90eXBlLFwidmlzaWJsZVwiLHZvaWQgMCksdCQ0PWUkdShbaSRYKFwiZXNyaS5zeW1ib2xzLmNhbGxvdXRzLkNhbGxvdXQzRFwiKV0sdCQ0KTt2YXIgcCQ5PXQkNDtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbnZhciB1JDk7bGV0IGokND11JDk9Y2xhc3MgZXh0ZW5kcyBwJDl7Y29uc3RydWN0b3Iobyl7c3VwZXIobyksdGhpcy50eXBlPVwibGluZVwiLHRoaXMuY29sb3I9bmV3IG8kaihbMCwwLDAsMV0pLHRoaXMuc2l6ZT1lJGEoMSksdGhpcy5ib3JkZXI9bnVsbDt9Z2V0IHZpc2libGUoKXtyZXR1cm4gdGhpcy5zaXplPjAmJnIkQSh0aGlzLmNvbG9yKSYmdGhpcy5jb2xvci5hPjB9Y2xvbmUoKXtyZXR1cm4gbmV3IHUkOSh7Y29sb3I6eSR2KHRoaXMuY29sb3IpLHNpemU6dGhpcy5zaXplLGJvcmRlcjp5JHYodGhpcy5ib3JkZXIpfSl9fTtlJHUoW3Ikdih7bGluZTpcImxpbmVcIn0se3JlYWRPbmx5OiEwfSldLGokNC5wcm90b3R5cGUsXCJ0eXBlXCIsdm9pZCAwKSxlJHUoW3kkcihjJHEpXSxqJDQucHJvdG90eXBlLFwiY29sb3JcIix2b2lkIDApLGUkdShbeSRyKHAkcildLGokNC5wcm90b3R5cGUsXCJzaXplXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTphJDgsanNvbjp7d3JpdGU6ITB9fSldLGokNC5wcm90b3R5cGUsXCJib3JkZXJcIix2b2lkIDApLGUkdShbeSRyKHtyZWFkT25seTohMH0pXSxqJDQucHJvdG90eXBlLFwidmlzaWJsZVwiLG51bGwpLGokND11JDk9ZSR1KFtpJFgoXCJlc3JpLnN5bWJvbHMuY2FsbG91dHMuTGluZUNhbGxvdXQzRFwiKV0saiQ0KTt2YXIgZCRhPWokNDtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbnZhciBwJDg7bGV0IGkkNz1wJDg9Y2xhc3MgZXh0ZW5kcyBhJEJ7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuc2NyZWVuTGVuZ3RoPTAsdGhpcy5taW5Xb3JsZExlbmd0aD0wO31jbG9uZSgpe3JldHVybiBuZXcgcCQ4KHtzY3JlZW5MZW5ndGg6dGhpcy5zY3JlZW5MZW5ndGgsbWluV29ybGRMZW5ndGg6dGhpcy5taW5Xb3JsZExlbmd0aCxtYXhXb3JsZExlbmd0aDp0aGlzLm1heFdvcmxkTGVuZ3RofSl9fTtlJHUoW3kkcihwJHIpXSxpJDcucHJvdG90eXBlLFwic2NyZWVuTGVuZ3RoXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpOdW1iZXIsanNvbjp7d3JpdGU6ITAsZGVmYXVsdDowfX0pXSxpJDcucHJvdG90eXBlLFwibWluV29ybGRMZW5ndGhcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOk51bWJlcixqc29uOnt3cml0ZTohMH19KV0saSQ3LnByb3RvdHlwZSxcIm1heFdvcmxkTGVuZ3RoXCIsdm9pZCAwKSxpJDc9cCQ4PWUkdShbaSRYKFwiZXNyaS5zeW1ib2xzLnN1cHBvcnQuU3ltYm9sM0RWZXJ0aWNhbE9mZnNldFwiKV0saSQ3KTt2YXIgbiRhPWkkNztcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmZ1bmN0aW9uIHIkMih0KXtpZighdClyZXR1cm4gITE7Y29uc3QgZT10LnZlcnRpY2FsT2Zmc2V0O3JldHVybiAhIWUmJiEoZS5zY3JlZW5MZW5ndGg8PTB8fGUubWF4V29ybGRMZW5ndGg8PTApfWZ1bmN0aW9uIG4kOSh0KXtpZighdClyZXR1cm4gITE7aWYoIXQuc3VwcG9ydHNDYWxsb3V0fHwhdC5zdXBwb3J0c0NhbGxvdXQoKSlyZXR1cm4gITE7Y29uc3QgZT10LmNhbGxvdXQ7cmV0dXJuICEhZSYmKCEhZS52aXNpYmxlJiYhIXIkMih0KSl9Y29uc3QgbCQ4PXt0eXBlczp7a2V5OlwidHlwZVwiLGJhc2U6cCQ5LHR5cGVNYXA6e2xpbmU6ZCRhfX0sanNvbjp7d3JpdGU6ITB9fTtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbnZhciB1JDg7Y29uc3QgbiQ4PUwkNS5vZlR5cGUoe2Jhc2U6bnVsbCxrZXk6XCJ0eXBlXCIsdHlwZU1hcDp7dGV4dDp5JDZ9fSk7bGV0IGYkMz11JDg9Y2xhc3MgZXh0ZW5kcyBBJDJ7Y29uc3RydWN0b3IodCl7c3VwZXIodCksdGhpcy52ZXJ0aWNhbE9mZnNldD1udWxsLHRoaXMuY2FsbG91dD1udWxsLHRoaXMuc3R5bGVPcmlnaW49bnVsbCx0aGlzLnN5bWJvbExheWVycz1uZXcgbiQ4LHRoaXMudHlwZT1cImxhYmVsLTNkXCI7fXN1cHBvcnRzQ2FsbG91dCgpe3JldHVybiAhMH1oYXNWaXNpYmxlQ2FsbG91dCgpe3JldHVybiBuJDkodGhpcyl9aGFzVmlzaWJsZVZlcnRpY2FsT2Zmc2V0KCl7cmV0dXJuIHIkMih0aGlzKX1jbG9uZSgpe3JldHVybiBuZXcgdSQ4KHtzdHlsZU9yaWdpbjp5JHYodGhpcy5zdHlsZU9yaWdpbiksc3ltYm9sTGF5ZXJzOnkkdih0aGlzLnN5bWJvbExheWVycyksdGh1bWJuYWlsOnkkdih0aGlzLnRodW1ibmFpbCksY2FsbG91dDp5JHYodGhpcy5jYWxsb3V0KSx2ZXJ0aWNhbE9mZnNldDp5JHYodGhpcy52ZXJ0aWNhbE9mZnNldCl9KX1zdGF0aWMgZnJvbVRleHRTeW1ib2wodCl7cmV0dXJuIG5ldyB1JDgoe3N5bWJvbExheWVyczpbeSQ2LmZyb21UZXh0U3ltYm9sKHQpXX0pfX07ZSR1KFt5JHIoe3R5cGU6biRhLGpzb246e3dyaXRlOiEwfX0pXSxmJDMucHJvdG90eXBlLFwidmVydGljYWxPZmZzZXRcIix2b2lkIDApLGUkdShbeSRyKGwkOCldLGYkMy5wcm90b3R5cGUsXCJjYWxsb3V0XCIsdm9pZCAwKSxlJHUoW3kkcih7anNvbjp7cmVhZDohMSx3cml0ZTohMX19KV0sZiQzLnByb3RvdHlwZSxcInN0eWxlT3JpZ2luXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpuJDh9KV0sZiQzLnByb3RvdHlwZSxcInN5bWJvbExheWVyc1wiLHZvaWQgMCksZSR1KFtyJHYoe0xhYmVsU3ltYm9sM0Q6XCJsYWJlbC0zZFwifSx7cmVhZE9ubHk6ITB9KV0sZiQzLnByb3RvdHlwZSxcInR5cGVcIix2b2lkIDApLGYkMz11JDg9ZSR1KFtpJFgoXCJlc3JpLnN5bWJvbHMuTGFiZWxTeW1ib2wzRFwiKV0sZiQzKTt2YXIgYiQ0PWYkMztcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbnZhciB5JDU7Y29uc3QgYSQ3PUwkNS5vZlR5cGUoe2Jhc2U6bnVsbCxrZXk6XCJ0eXBlXCIsdHlwZU1hcDp7bGluZTpmJDgscGF0aDpkJGR9fSksbiQ3PUwkNS5vZlR5cGUoe2Jhc2U6bnVsbCxrZXk6XCJ0eXBlXCIsdHlwZU1hcDp7bGluZTpmJDgscGF0aDpkJGR9fSk7bGV0IGMkOT15JDU9Y2xhc3MgZXh0ZW5kcyBBJDJ7Y29uc3RydWN0b3Iobyl7c3VwZXIobyksdGhpcy5zeW1ib2xMYXllcnM9bmV3IGEkNyx0aGlzLnR5cGU9XCJsaW5lLTNkXCI7fWNsb25lKCl7cmV0dXJuIG5ldyB5JDUoe3N0eWxlT3JpZ2luOnkkdih0aGlzLnN0eWxlT3JpZ2luKSxzeW1ib2xMYXllcnM6eSR2KHRoaXMuc3ltYm9sTGF5ZXJzKSx0aHVtYm5haWw6eSR2KHRoaXMudGh1bWJuYWlsKX0pfXN0YXRpYyBmcm9tU2ltcGxlTGluZVN5bWJvbChvKXtyZXR1cm4gbmV3IHkkNSh7c3ltYm9sTGF5ZXJzOltmJDguZnJvbVNpbXBsZUxpbmVTeW1ib2wobyldfSl9fTtlJHUoW3kkcih7dHlwZTphJDcsanNvbjp7dHlwZTpuJDd9fSldLGMkOS5wcm90b3R5cGUsXCJzeW1ib2xMYXllcnNcIix2b2lkIDApLGUkdShbciR2KHtMaW5lU3ltYm9sM0Q6XCJsaW5lLTNkXCJ9LHtyZWFkT25seTohMH0pXSxjJDkucHJvdG90eXBlLFwidHlwZVwiLHZvaWQgMCksYyQ5PXkkNT1lJHUoW2kkWChcImVzcmkuc3ltYm9scy5MaW5lU3ltYm9sM0RcIildLGMkOSk7dmFyIHUkNz1jJDk7XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5sZXQgcCQ3PWNsYXNzIGV4dGVuZHMgbiRve2NvbnN0cnVjdG9yKHIpe3N1cGVyKHIpLHRoaXMuYW5nbGU9MCx0aGlzLnR5cGU9bnVsbCx0aGlzLnhvZmZzZXQ9MCx0aGlzLnlvZmZzZXQ9MCx0aGlzLnNpemU9OTt9aGFzaCgpe3JldHVybiBgJHt0aGlzLnR5cGV9LiR7dGhpcy5hbmdsZX0uJHt0aGlzLnNpemV9LiR7dGhpcy54b2Zmc2V0fS4ke3RoaXMueW9mZnNldH1gfX07ZSR1KFt5JHIoe3R5cGU6TnVtYmVyLGpzb246e3JlYWQ6cj0+ciYmLTEqcix3cml0ZToocixlKT0+ZS5hbmdsZT1yJiYtMSpyfX0pXSxwJDcucHJvdG90eXBlLFwiYW5nbGVcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOltcInNpbXBsZS1tYXJrZXJcIixcInBpY3R1cmUtbWFya2VyXCJdLHJlYWRPbmx5OiEwfSldLHAkNy5wcm90b3R5cGUsXCJ0eXBlXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpOdW1iZXIsY2FzdDpvJDYsanNvbjp7d3JpdGU6ITB9fSldLHAkNy5wcm90b3R5cGUsXCJ4b2Zmc2V0XCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpOdW1iZXIsY2FzdDpvJDYsanNvbjp7d3JpdGU6ITB9fSldLHAkNy5wcm90b3R5cGUsXCJ5b2Zmc2V0XCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpOdW1iZXIsY2FzdDpyPT5cImF1dG9cIj09PXI/cjpvJDYociksanNvbjp7d3JpdGU6ITB9fSldLHAkNy5wcm90b3R5cGUsXCJzaXplXCIsdm9pZCAwKSxwJDc9ZSR1KFtpJFgoXCJlc3JpLnN5bWJvbHMuTWFya2VyU3ltYm9sXCIpXSxwJDcpO3ZhciBpJDY9cCQ3O1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xudmFyIGwkNztjb25zdCBjJDg9TCQ1Lm9mVHlwZSh7YmFzZTpudWxsLGtleTpcInR5cGVcIix0eXBlTWFwOntmaWxsOmgkZn19KTtsZXQgeSQ0PWwkNz1jbGFzcyBleHRlbmRzIEEkMntjb25zdHJ1Y3RvcihvKXtzdXBlcihvKSx0aGlzLnN5bWJvbExheWVycz1uZXcgYyQ4LHRoaXMudHlwZT1cIm1lc2gtM2RcIjt9Y2xvbmUoKXtyZXR1cm4gbmV3IGwkNyh7c3R5bGVPcmlnaW46eSR2KHRoaXMuc3R5bGVPcmlnaW4pLHN5bWJvbExheWVyczp5JHYodGhpcy5zeW1ib2xMYXllcnMpLHRodW1ibmFpbDp5JHYodGhpcy50aHVtYm5haWwpfSl9fTtlJHUoW3kkcih7dHlwZTpjJDh9KV0seSQ0LnByb3RvdHlwZSxcInN5bWJvbExheWVyc1wiLHZvaWQgMCksZSR1KFtyJHYoe01lc2hTeW1ib2wzRDpcIm1lc2gtM2RcIn0se3JlYWRPbmx5OiEwfSldLHkkNC5wcm90b3R5cGUsXCJ0eXBlXCIsdm9pZCAwKSx5JDQ9bCQ3PWUkdShbaSRYKFwiZXNyaS5zeW1ib2xzLk1lc2hTeW1ib2wzRFwiKV0seSQ0KTt2YXIgYSQ2PXkkNDtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmZ1bmN0aW9uIHMkNShhLHIsdCl7cmV0dXJuIHIuaW1hZ2VEYXRhP1gkMih7bWVkaWFUeXBlOnIuY29udGVudFR5cGV8fFwiaW1hZ2UvcG5nXCIsaXNCYXNlNjQ6ITAsZGF0YTpyLmltYWdlRGF0YX0pOmwkNihyLnVybCx0KX1mdW5jdGlvbiBsJDYoZSx0KXtyZXR1cm4gcCQ2KHQpJiYhUSQyKGUpJiZ0LmxheWVyLnBhcnNlZFVybD9EJDYodC5sYXllci5wYXJzZWRVcmwucGF0aCxcImltYWdlc1wiLGUpOmMkVShlLHQpfWZ1bmN0aW9uIHUkNihlLGEscixuKXtpZihHJDYoZSkpe2NvbnN0IHQ9ViQyKGUpO2EuY29udGVudFR5cGU9dC5tZWRpYVR5cGUsYS5pbWFnZURhdGE9dC5kYXRhLHImJnIuaW1hZ2VEYXRhPT09YS5pbWFnZURhdGEmJnIudXJsJiZwJDEwKHIudXJsLGEsXCJ1cmxcIixuKTt9ZWxzZSBwJDEwKGUsYSxcInVybFwiLG4pO31jb25zdCBtJDY9e2pzb246e3JlYWQ6e3NvdXJjZTpbXCJpbWFnZURhdGFcIixcInVybFwiXSxyZWFkZXI6cyQ1fSx3cml0ZTp7d3JpdGVyKGUsYSxyLHQpe3UkNihlLGEsdGhpcy5zb3VyY2UsdCk7fX19fSxjJDc9e3JlYWRPbmx5OiEwLGpzb246e3JlYWQ6e3NvdXJjZTpbXCJpbWFnZURhdGFcIixcInVybFwiXSxyZWFkZXIoZSxhLHIpe2NvbnN0IHQ9e307cmV0dXJuIGEuaW1hZ2VEYXRhJiYodC5pbWFnZURhdGE9YS5pbWFnZURhdGEpLGEuY29udGVudFR5cGUmJih0LmNvbnRlbnRUeXBlPWEuY29udGVudFR5cGUpLGEudXJsJiYodC51cmw9bCQ2KGEudXJsLHIpKSx0fX19fTtmdW5jdGlvbiBwJDYoZSl7cmV0dXJuIGUmJihcInNlcnZpY2VcIj09PWUub3JpZ2lufHxcInBvcnRhbC1pdGVtXCI9PT1lLm9yaWdpbikmJmUubGF5ZXImJihcImZlYXR1cmVcIj09PWUubGF5ZXIudHlwZXx8XCJzdHJlYW1cIj09PWUubGF5ZXIudHlwZSl9XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG52YXIgaCRhO2xldCB1JDU9aCRhPWNsYXNzIGV4dGVuZHMgbCRse2NvbnN0cnVjdG9yKC4uLnQpe3N1cGVyKC4uLnQpLHRoaXMudHlwZT1cInBpY3R1cmUtZmlsbFwiLHRoaXMudXJsPW51bGwsdGhpcy54c2NhbGU9MSx0aGlzLnlzY2FsZT0xLHRoaXMud2lkdGg9MTIsdGhpcy5oZWlnaHQ9MTIsdGhpcy54b2Zmc2V0PTAsdGhpcy55b2Zmc2V0PTAsdGhpcy5zb3VyY2U9bnVsbDt9bm9ybWFsaXplQ3RvckFyZ3ModCxvLHMscil7aWYodCYmXCJzdHJpbmdcIiE9dHlwZW9mIHQmJm51bGw9PXQuaW1hZ2VEYXRhKXJldHVybiB0O2NvbnN0IGU9e307cmV0dXJuIHQmJihlLnVybD10KSxvJiYoZS5vdXRsaW5lPW8pLG51bGwhPXMmJihlLndpZHRoPW8kNihzKSksbnVsbCE9ciYmKGUuaGVpZ2h0PW8kNihyKSksZX1jbG9uZSgpe2NvbnN0IHQ9bmV3IGgkYSh7Y29sb3I6eSR2KHRoaXMuY29sb3IpLGhlaWdodDp0aGlzLmhlaWdodCxvdXRsaW5lOnRoaXMub3V0bGluZSYmdGhpcy5vdXRsaW5lLmNsb25lKCksdXJsOnRoaXMudXJsLHdpZHRoOnRoaXMud2lkdGgseG9mZnNldDp0aGlzLnhvZmZzZXQseHNjYWxlOnRoaXMueHNjYWxlLHlvZmZzZXQ6dGhpcy55b2Zmc2V0LHlzY2FsZTp0aGlzLnlzY2FsZX0pO3JldHVybiB0Ll9zZXQoXCJzb3VyY2VcIix5JHYodGhpcy5zb3VyY2UpKSx0fWhhc2goKXt2YXIgdDtyZXR1cm4gYCR7c3VwZXIuaGFzaCgpfS4ke251bGw9PSh0PXRoaXMuY29sb3IpP3ZvaWQgMDp0Lmhhc2goKX0uJHt0aGlzLmhlaWdodH0uJHt0aGlzLnVybH0uJHt0aGlzLndpZHRofS4ke3RoaXMueG9mZnNldH0uJHt0aGlzLnhzY2FsZX0uJHt0aGlzLnlvZmZzZXR9LiR7dGhpcy55c2NhbGV9YH19O2UkdShbciR2KHtlc3JpUEZTOlwicGljdHVyZS1maWxsXCJ9LHtyZWFkT25seTohMH0pXSx1JDUucHJvdG90eXBlLFwidHlwZVwiLHZvaWQgMCksZSR1KFt5JHIobSQ2KV0sdSQ1LnByb3RvdHlwZSxcInVybFwiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6TnVtYmVyLGpzb246e3dyaXRlOiEwfX0pXSx1JDUucHJvdG90eXBlLFwieHNjYWxlXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpOdW1iZXIsanNvbjp7d3JpdGU6ITB9fSldLHUkNS5wcm90b3R5cGUsXCJ5c2NhbGVcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOk51bWJlcixjYXN0Om8kNixqc29uOnt3cml0ZTohMH19KV0sdSQ1LnByb3RvdHlwZSxcIndpZHRoXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpOdW1iZXIsY2FzdDpvJDYsanNvbjp7d3JpdGU6ITB9fSldLHUkNS5wcm90b3R5cGUsXCJoZWlnaHRcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOk51bWJlcixjYXN0Om8kNixqc29uOnt3cml0ZTohMH19KV0sdSQ1LnByb3RvdHlwZSxcInhvZmZzZXRcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOk51bWJlcixjYXN0Om8kNixqc29uOnt3cml0ZTohMH19KV0sdSQ1LnByb3RvdHlwZSxcInlvZmZzZXRcIix2b2lkIDApLGUkdShbeSRyKGMkNyldLHUkNS5wcm90b3R5cGUsXCJzb3VyY2VcIix2b2lkIDApLHUkNT1oJGE9ZSR1KFtpJFgoXCJlc3JpLnN5bWJvbHMuUGljdHVyZUZpbGxTeW1ib2xcIildLHUkNSk7dmFyIGEkNT11JDU7XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG52YXIgbCQ1O2xldCBhJDQ9bCQ1PWNsYXNzIGV4dGVuZHMgaSQ2e2NvbnN0cnVjdG9yKC4uLnIpe3N1cGVyKC4uLnIpLHRoaXMuY29sb3I9bnVsbCx0aGlzLnR5cGU9XCJwaWN0dXJlLW1hcmtlclwiLHRoaXMudXJsPW51bGwsdGhpcy5zb3VyY2U9bnVsbCx0aGlzLmhlaWdodD0xMix0aGlzLndpZHRoPTEyLHRoaXMuc2l6ZT1udWxsO31ub3JtYWxpemVDdG9yQXJncyhyLHQsbyl7aWYociYmXCJzdHJpbmdcIiE9dHlwZW9mIHImJm51bGw9PXIuaW1hZ2VEYXRhKXJldHVybiByO2NvbnN0IGU9e307cmV0dXJuIHImJihlLnVybD1yKSxudWxsIT10JiYoZS53aWR0aD1vJDYodCkpLG51bGwhPW8mJihlLmhlaWdodD1vJDYobykpLGV9cmVhZEhlaWdodChyLHQpe3JldHVybiB0LnNpemV8fHJ9cmVhZFdpZHRoKHIsdCl7cmV0dXJuIHQuc2l6ZXx8cn1jbG9uZSgpe2NvbnN0IHI9bmV3IGwkNSh7YW5nbGU6dGhpcy5hbmdsZSxoZWlnaHQ6dGhpcy5oZWlnaHQsdXJsOnRoaXMudXJsLHdpZHRoOnRoaXMud2lkdGgseG9mZnNldDp0aGlzLnhvZmZzZXQseW9mZnNldDp0aGlzLnlvZmZzZXR9KTtyZXR1cm4gci5fc2V0KFwic291cmNlXCIseSR2KHRoaXMuc291cmNlKSkscn1oYXNoKCl7cmV0dXJuIGAke3N1cGVyLmhhc2goKX0uJHt0aGlzLmhlaWdodH0uJHt0aGlzLnVybH0uJHt0aGlzLndpZHRofWB9fTtlJHUoW3kkcih7anNvbjp7d3JpdGU6ITF9fSldLGEkNC5wcm90b3R5cGUsXCJjb2xvclwiLHZvaWQgMCksZSR1KFtyJHYoe2VzcmlQTVM6XCJwaWN0dXJlLW1hcmtlclwifSx7cmVhZE9ubHk6ITB9KV0sYSQ0LnByb3RvdHlwZSxcInR5cGVcIix2b2lkIDApLGUkdShbeSRyKG0kNildLGEkNC5wcm90b3R5cGUsXCJ1cmxcIix2b2lkIDApLGUkdShbeSRyKGMkNyldLGEkNC5wcm90b3R5cGUsXCJzb3VyY2VcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOk51bWJlcixjYXN0Om8kNixqc29uOnt3cml0ZTohMH19KV0sYSQ0LnByb3RvdHlwZSxcImhlaWdodFwiLHZvaWQgMCksZSR1KFtlJEMoXCJoZWlnaHRcIixbXCJoZWlnaHRcIixcInNpemVcIl0pXSxhJDQucHJvdG90eXBlLFwicmVhZEhlaWdodFwiLG51bGwpLGUkdShbeSRyKHt0eXBlOk51bWJlcixjYXN0Om8kNixqc29uOnt3cml0ZTohMH19KV0sYSQ0LnByb3RvdHlwZSxcIndpZHRoXCIsdm9pZCAwKSxlJHUoW3kkcih7anNvbjp7d3JpdGU6ITF9fSldLGEkNC5wcm90b3R5cGUsXCJzaXplXCIsdm9pZCAwKSxhJDQ9bCQ1PWUkdShbaSRYKFwiZXNyaS5zeW1ib2xzLlBpY3R1cmVNYXJrZXJTeW1ib2xcIildLGEkNCk7dmFyIG4kNj1hJDQ7XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG52YXIgUyQyO2NvbnN0IGgkOT1MJDUub2ZUeXBlKHtiYXNlOm51bGwsa2V5OlwidHlwZVwiLHR5cGVNYXA6e2ljb246UyQzLG9iamVjdDpsJGksdGV4dDp5JDZ9fSksaiQzPUwkNS5vZlR5cGUoe2Jhc2U6bnVsbCxrZXk6XCJ0eXBlXCIsdHlwZU1hcDp7aWNvbjpTJDMsb2JqZWN0OmwkaX19KTtsZXQgZCQ5PVMkMj1jbGFzcyBleHRlbmRzIEEkMntjb25zdHJ1Y3RvcihvKXtzdXBlcihvKSx0aGlzLnZlcnRpY2FsT2Zmc2V0PW51bGwsdGhpcy5jYWxsb3V0PW51bGwsdGhpcy5zeW1ib2xMYXllcnM9bmV3IGgkOSx0aGlzLnR5cGU9XCJwb2ludC0zZFwiO313cml0ZVN5bWJvbExheWVycyhvLHQsZSxyKXtjb25zdCBzPW8uZmlsdGVyKChvPT5cInRleHRcIiE9PW8udHlwZSkpO2lmKHImJnIubWVzc2FnZXMmJnMubGVuZ3RoPG8ubGVuZ3RoKXtjb25zdCB0PW8uZmluZCgobz0+XCJ0ZXh0XCI9PT1vLnR5cGUpKTtyLm1lc3NhZ2VzLnB1c2gobmV3IHMkeChcInN5bWJvbC1sYXllcjp1bnN1cHBvcnRlZFwiLFwiU3ltYm9sIGxheWVycyBvZiB0eXBlICd0ZXh0JyBjYW5ub3QgYmUgcGVyc2lzdGVkIGluIFBvaW50U3ltYm9sM0RcIix7c3ltYm9sTGF5ZXI6dH0pKTt9dFtlXT1zLm1hcCgobz0+by53cml0ZSh7fSxyKSkpLnRvQXJyYXkoKTt9c3VwcG9ydHNDYWxsb3V0KCl7aWYoKHRoaXMuc3ltYm9sTGF5ZXJzP3RoaXMuc3ltYm9sTGF5ZXJzLmxlbmd0aDowKTwxKXJldHVybiAhMTtmb3IoY29uc3QgbyBvZiB0aGlzLnN5bWJvbExheWVycy5pdGVtcylzd2l0Y2goby50eXBlKXtjYXNlXCJpY29uXCI6Y2FzZVwidGV4dFwiOmNhc2VcIm9iamVjdFwiOmNvbnRpbnVlO2RlZmF1bHQ6cmV0dXJuICExfXJldHVybiAhMH1oYXNWaXNpYmxlQ2FsbG91dCgpe3JldHVybiBuJDkodGhpcyl9aGFzVmlzaWJsZVZlcnRpY2FsT2Zmc2V0KCl7cmV0dXJuIHIkMih0aGlzKX1jbG9uZSgpe3JldHVybiBuZXcgUyQyKHt2ZXJ0aWNhbE9mZnNldDp5JHYodGhpcy52ZXJ0aWNhbE9mZnNldCksY2FsbG91dDp5JHYodGhpcy5jYWxsb3V0KSxzdHlsZU9yaWdpbjp5JHYodGhpcy5zdHlsZU9yaWdpbiksc3ltYm9sTGF5ZXJzOnkkdih0aGlzLnN5bWJvbExheWVycyksdGh1bWJuYWlsOnkkdih0aGlzLnRodW1ibmFpbCl9KX1zdGF0aWMgZnJvbVNpbXBsZU1hcmtlclN5bWJvbChvKXtyZXR1cm4gbmV3IFMkMih7c3ltYm9sTGF5ZXJzOltTJDMuZnJvbVNpbXBsZU1hcmtlclN5bWJvbChvKV19KX1zdGF0aWMgZnJvbVBpY3R1cmVNYXJrZXJTeW1ib2wobyl7cmV0dXJuIG5ldyBTJDIoe3N5bWJvbExheWVyczpbUyQzLmZyb21QaWN0dXJlTWFya2VyU3ltYm9sKG8pXX0pfXN0YXRpYyBmcm9tQ0lNU3ltYm9sKG8pe2lmKG8uZGF0YSYmby5kYXRhLnN5bWJvbCl7Y29uc3QgdD1vLmRhdGEuc3ltYm9sO2lmKFwiQ0lNUG9pbnRTeW1ib2xcIj09PXQudHlwZSYmdC5jYWxsb3V0KXJldHVybiBuZXcgUyQyKHtzeW1ib2xMYXllcnM6W1MkMy5mcm9tQ0lNU3ltYm9sKG8pXSxjYWxsb3V0Ont0eXBlOlwibGluZVwiLHNpemU6LjUsY29sb3I6WzAsMCwwXX0sdmVydGljYWxPZmZzZXQ6e3NjcmVlbkxlbmd0aDo0MH19KX1yZXR1cm4gbmV3IFMkMih7c3ltYm9sTGF5ZXJzOltTJDMuZnJvbUNJTVN5bWJvbChvKV19KX1zdGF0aWMgZnJvbVRleHRTeW1ib2wobyl7cmV0dXJuIG5ldyBTJDIoe3N5bWJvbExheWVyczpbeSQ2LmZyb21UZXh0U3ltYm9sKG8pXX0pfX07ZSR1KFt5JHIoe3R5cGU6biRhLGpzb246e3dyaXRlOiEwfX0pXSxkJDkucHJvdG90eXBlLFwidmVydGljYWxPZmZzZXRcIix2b2lkIDApLGUkdShbeSRyKGwkOCldLGQkOS5wcm90b3R5cGUsXCJjYWxsb3V0XCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpoJDksanNvbjp7dHlwZTpqJDMsb3JpZ2luczp7XCJ3ZWItc2NlbmVcIjp7dHlwZTpqJDN9fX19KV0sZCQ5LnByb3RvdHlwZSxcInN5bWJvbExheWVyc1wiLHZvaWQgMCksZSR1KFtvJHYoXCJ3ZWItc2NlbmVcIixcInN5bWJvbExheWVyc1wiKV0sZCQ5LnByb3RvdHlwZSxcIndyaXRlU3ltYm9sTGF5ZXJzXCIsbnVsbCksZSR1KFtyJHYoe1BvaW50U3ltYm9sM0Q6XCJwb2ludC0zZFwifSx7cmVhZE9ubHk6ITB9KV0sZCQ5LnByb3RvdHlwZSxcInR5cGVcIix2b2lkIDApLGQkOT1TJDI9ZSR1KFtpJFgoXCJlc3JpLnN5bWJvbHMuUG9pbnRTeW1ib2wzRFwiKV0sZCQ5KTt2YXIgTCQyPWQkOTtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbnZhciBMJDE7Y29uc3QgUyQxPUwkNS5vZlR5cGUoe2Jhc2U6bnVsbCxrZXk6XCJ0eXBlXCIsdHlwZU1hcDp7ZXh0cnVkZTpjJG0sZmlsbDpoJGYsaWNvbjpTJDMsbGluZTpmJDgsb2JqZWN0OmwkaSx0ZXh0OnkkNix3YXRlcjpuJGZ9fSksZCQ4PUwkNS5vZlR5cGUoe2Jhc2U6bnVsbCxrZXk6XCJ0eXBlXCIsdHlwZU1hcDp7ZXh0cnVkZTpjJG0sZmlsbDpoJGYsaWNvbjpTJDMsbGluZTpmJDgsb2JqZWN0OmwkaSx3YXRlcjpuJGZ9fSk7bGV0IGckMz1MJDE9Y2xhc3MgZXh0ZW5kcyBBJDJ7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5zeW1ib2xMYXllcnM9bmV3IFMkMSx0aGlzLnR5cGU9XCJwb2x5Z29uLTNkXCI7fXdyaXRlU3ltYm9sTGF5ZXJzKGUsbyxyLHQpe2NvbnN0IHM9ZS5maWx0ZXIoKGU9PlwidGV4dFwiIT09ZS50eXBlKSk7aWYodCYmdC5tZXNzYWdlcyYmcy5sZW5ndGg8ZS5sZW5ndGgpe2NvbnN0IG89ZS5maW5kKChlPT5cInRleHRcIj09PWUudHlwZSkpO3QubWVzc2FnZXMucHVzaChuZXcgcyR4KFwic3ltYm9sLWxheWVyOnVuc3VwcG9ydGVkXCIsXCJTeW1ib2wgbGF5ZXJzIG9mIHR5cGUgJ3RleHQnIGNhbm5vdCBiZSBwZXJzaXN0ZWQgaW4gUG9seWdvblN5bWJvbDNEXCIse3N5bWJvbExheWVyOm99KSk7fW9bcl09cy5tYXAoKGU9PmUud3JpdGUoe30sdCkpKS50b0FycmF5KCk7fWNsb25lKCl7cmV0dXJuIG5ldyBMJDEoe3N0eWxlT3JpZ2luOnkkdih0aGlzLnN0eWxlT3JpZ2luKSxzeW1ib2xMYXllcnM6eSR2KHRoaXMuc3ltYm9sTGF5ZXJzKSx0aHVtYm5haWw6eSR2KHRoaXMudGh1bWJuYWlsKX0pfXN0YXRpYyBmcm9tSlNPTihlKXtjb25zdCBvPW5ldyBMJDE7aWYoby5yZWFkKGUpLDI9PT1vLnN5bWJvbExheWVycy5sZW5ndGgmJlwiZmlsbFwiPT09by5zeW1ib2xMYXllcnMuZ2V0SXRlbUF0KDApLnR5cGUmJlwibGluZVwiPT09by5zeW1ib2xMYXllcnMuZ2V0SXRlbUF0KDEpLnR5cGUpe2NvbnN0IHQ9by5zeW1ib2xMYXllcnMuZ2V0SXRlbUF0KDApLHM9by5zeW1ib2xMYXllcnMuZ2V0SXRlbUF0KDEpOyFzLmVuYWJsZWR8fGUuc3ltYm9sTGF5ZXJzJiZlLnN5bWJvbExheWVyc1sxXSYmITE9PT1lLnN5bWJvbExheWVyc1sxXS5lbmFibGV8fCh0Lm91dGxpbmU9e3NpemU6cy5zaXplLGNvbG9yOnIkQShzLm1hdGVyaWFsKT9zLm1hdGVyaWFsLmNvbG9yOm51bGx9KSxvLnN5bWJvbExheWVycy5yZW1vdmVBdCgxKTt9cmV0dXJuIG99c3RhdGljIGZyb21TaW1wbGVGaWxsU3ltYm9sKGUpe3JldHVybiBuZXcgTCQxKHtzeW1ib2xMYXllcnM6W2gkZi5mcm9tU2ltcGxlRmlsbFN5bWJvbChlKV19KX19O2UkdShbeSRyKHt0eXBlOlMkMSxqc29uOnt0eXBlOmQkOH19KV0sZyQzLnByb3RvdHlwZSxcInN5bWJvbExheWVyc1wiLHZvaWQgMCksZSR1KFtvJHYoXCJ3ZWItc2NlbmVcIixcInN5bWJvbExheWVyc1wiKV0sZyQzLnByb3RvdHlwZSxcIndyaXRlU3ltYm9sTGF5ZXJzXCIsbnVsbCksZSR1KFtyJHYoe1BvbHlnb25TeW1ib2wzRDpcInBvbHlnb24tM2RcIn0se3JlYWRPbmx5OiEwfSldLGckMy5wcm90b3R5cGUsXCJ0eXBlXCIsdm9pZCAwKSxnJDM9TCQxPWUkdShbaSRYKFwiZXNyaS5zeW1ib2xzLlBvbHlnb25TeW1ib2wzRFwiKV0sZyQzKTt2YXIgaCQ4PWckMztcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbnZhciBjJDY7Y29uc3QgbiQ1PW5ldyB0JEkoe2VzcmlTRlNTb2xpZDpcInNvbGlkXCIsZXNyaVNGU051bGw6XCJub25lXCIsZXNyaVNGU0hvcml6b250YWw6XCJob3Jpem9udGFsXCIsZXNyaVNGU1ZlcnRpY2FsOlwidmVydGljYWxcIixlc3JpU0ZTRm9yd2FyZERpYWdvbmFsOlwiZm9yd2FyZC1kaWFnb25hbFwiLGVzcmlTRlNCYWNrd2FyZERpYWdvbmFsOlwiYmFja3dhcmQtZGlhZ29uYWxcIixlc3JpU0ZTQ3Jvc3M6XCJjcm9zc1wiLGVzcmlTRlNEaWFnb25hbENyb3NzOlwiZGlhZ29uYWwtY3Jvc3NcIn0pO2xldCBtJDU9YyQ2PWNsYXNzIGV4dGVuZHMgbCRse2NvbnN0cnVjdG9yKC4uLm8pe3N1cGVyKC4uLm8pLHRoaXMuY29sb3I9bmV3IG8kaihbMCwwLDAsLjI1XSksdGhpcy5vdXRsaW5lPW5ldyBkJGksdGhpcy50eXBlPVwic2ltcGxlLWZpbGxcIix0aGlzLnN0eWxlPVwic29saWRcIjt9bm9ybWFsaXplQ3RvckFyZ3MobyxyLHMpe2lmKG8mJlwic3RyaW5nXCIhPXR5cGVvZiBvKXJldHVybiBvO2NvbnN0IGU9e307cmV0dXJuIG8mJihlLnN0eWxlPW8pLHImJihlLm91dGxpbmU9cikscyYmKGUuY29sb3I9cyksZX1jbG9uZSgpe3JldHVybiBuZXcgYyQ2KHtjb2xvcjp5JHYodGhpcy5jb2xvciksb3V0bGluZTp0aGlzLm91dGxpbmUmJnRoaXMub3V0bGluZS5jbG9uZSgpLHN0eWxlOnRoaXMuc3R5bGV9KX1oYXNoKCl7cmV0dXJuIGAke3N1cGVyLmhhc2goKX0ke3RoaXMuc3R5bGV9LiR7dGhpcy5jb2xvciYmdGhpcy5jb2xvci5oYXNoKCl9YH19O2UkdShbeSRyKCldLG0kNS5wcm90b3R5cGUsXCJjb2xvclwiLHZvaWQgMCksZSR1KFt5JHIoKV0sbSQ1LnByb3RvdHlwZSxcIm91dGxpbmVcIix2b2lkIDApLGUkdShbciR2KHtlc3JpU0ZTOlwic2ltcGxlLWZpbGxcIn0se3JlYWRPbmx5OiEwfSldLG0kNS5wcm90b3R5cGUsXCJ0eXBlXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpuJDUuYXBpVmFsdWVzLGpzb246e3JlYWQ6biQ1LnJlYWQsd3JpdGU6biQ1LndyaXRlfX0pXSxtJDUucHJvdG90eXBlLFwic3R5bGVcIix2b2lkIDApLG0kNT1jJDY9ZSR1KFtpJFgoXCJlc3JpLnN5bWJvbHMuU2ltcGxlRmlsbFN5bWJvbFwiKV0sbSQ1KTt2YXIgdSQ0PW0kNTtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbnZhciBtJDQ7Y29uc3QgdSQzPW5ldyB0JEkoe2VzcmlTTVNDaXJjbGU6XCJjaXJjbGVcIixlc3JpU01TU3F1YXJlOlwic3F1YXJlXCIsZXNyaVNNU0Nyb3NzOlwiY3Jvc3NcIixlc3JpU01TWDpcInhcIixlc3JpU01TRGlhbW9uZDpcImRpYW1vbmRcIixlc3JpU01TVHJpYW5nbGU6XCJ0cmlhbmdsZVwiLGVzcmlTTVNQYXRoOlwicGF0aFwifSk7bGV0IGgkNz1tJDQ9Y2xhc3MgZXh0ZW5kcyBpJDZ7Y29uc3RydWN0b3IoLi4ucil7c3VwZXIoLi4uciksdGhpcy5jb2xvcj1uZXcgbyRqKFsyNTUsMjU1LDI1NSwuMjVdKSx0aGlzLnR5cGU9XCJzaW1wbGUtbWFya2VyXCIsdGhpcy5zaXplPTEyLHRoaXMuc3R5bGU9XCJjaXJjbGVcIix0aGlzLm91dGxpbmU9bmV3IGQkaTt9bm9ybWFsaXplQ3RvckFyZ3MocixvLGUsdCl7aWYociYmXCJzdHJpbmdcIiE9dHlwZW9mIHIpcmV0dXJuIHI7Y29uc3Qgcz17fTtyZXR1cm4gciYmKHMuc3R5bGU9ciksbnVsbCE9byYmKHMuc2l6ZT1vJDYobykpLGUmJihzLm91dGxpbmU9ZSksdCYmKHMuY29sb3I9dCksc313cml0ZUNvbG9yKHIsbyl7ciYmXCJ4XCIhPT10aGlzLnN0eWxlJiZcImNyb3NzXCIhPT10aGlzLnN0eWxlJiYoby5jb2xvcj1yLnRvSlNPTigpKSxudWxsPT09ciYmKG8uY29sb3I9bnVsbCk7fXNldCBwYXRoKHIpe3RoaXMuc3R5bGU9XCJwYXRoXCIsdGhpcy5fc2V0KFwicGF0aFwiLHIpO31jbG9uZSgpe3JldHVybiBuZXcgbSQ0KHthbmdsZTp0aGlzLmFuZ2xlLGNvbG9yOnkkdih0aGlzLmNvbG9yKSxvdXRsaW5lOnRoaXMub3V0bGluZSYmdGhpcy5vdXRsaW5lLmNsb25lKCkscGF0aDp0aGlzLnBhdGgsc2l6ZTp0aGlzLnNpemUsc3R5bGU6dGhpcy5zdHlsZSx4b2Zmc2V0OnRoaXMueG9mZnNldCx5b2Zmc2V0OnRoaXMueW9mZnNldH0pfWhhc2goKXt2YXIgcjtyZXR1cm4gYCR7c3VwZXIuaGFzaCgpfS4ke3RoaXMuY29sb3ImJnRoaXMuY29sb3IuaGFzaCgpfS4ke3RoaXMucGF0aH0uJHt0aGlzLnN0eWxlfS4ke251bGw9PShyPXRoaXMub3V0bGluZSk/dm9pZCAwOnIuaGFzaCgpfWB9fTtlJHUoW3kkcigpXSxoJDcucHJvdG90eXBlLFwiY29sb3JcIix2b2lkIDApLGUkdShbbyR2KFwiY29sb3JcIildLGgkNy5wcm90b3R5cGUsXCJ3cml0ZUNvbG9yXCIsbnVsbCksZSR1KFtyJHYoe2VzcmlTTVM6XCJzaW1wbGUtbWFya2VyXCJ9LHtyZWFkT25seTohMH0pXSxoJDcucHJvdG90eXBlLFwidHlwZVwiLHZvaWQgMCksZSR1KFt5JHIoKV0saCQ3LnByb3RvdHlwZSxcInNpemVcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOnUkMy5hcGlWYWx1ZXMsanNvbjp7cmVhZDp1JDMucmVhZCx3cml0ZTp1JDMud3JpdGV9fSldLGgkNy5wcm90b3R5cGUsXCJzdHlsZVwiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6U3RyaW5nLGpzb246e3dyaXRlOiEwfX0pXSxoJDcucHJvdG90eXBlLFwicGF0aFwiLG51bGwpLGUkdShbeSRyKHt0eXBlczp7a2V5OlwidHlwZVwiLGJhc2U6bnVsbCxkZWZhdWx0S2V5VmFsdWU6XCJzaW1wbGUtbGluZVwiLHR5cGVNYXA6e1wic2ltcGxlLWxpbmVcIjpkJGl9fSxqc29uOntkZWZhdWx0Om51bGwsd3JpdGU6ITB9fSldLGgkNy5wcm90b3R5cGUsXCJvdXRsaW5lXCIsdm9pZCAwKSxoJDc9bSQ0PWUkdShbaSRYKFwiZXNyaS5zeW1ib2xzLlNpbXBsZU1hcmtlclN5bWJvbFwiKV0saCQ3KTt2YXIgeSQzPWgkNztcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbnZhciBkJDc7bGV0IGMkNT1kJDc9Y2xhc3MgZXh0ZW5kcyBuJG97Y29uc3RydWN0b3IoLi4udCl7c3VwZXIoLi4udCksdGhpcy5iYWNrZ3JvdW5kQ29sb3I9bnVsbCx0aGlzLmJvcmRlckxpbmVDb2xvcj1udWxsLHRoaXMuYm9yZGVyTGluZVNpemU9bnVsbCx0aGlzLmZvbnQ9bmV3IG4kaSx0aGlzLmhvcml6b250YWxBbGlnbm1lbnQ9XCJjZW50ZXJcIix0aGlzLmtlcm5pbmc9ITAsdGhpcy5oYWxvQ29sb3I9bnVsbCx0aGlzLmhhbG9TaXplPW51bGwsdGhpcy5yaWdodFRvTGVmdD1udWxsLHRoaXMucm90YXRlZD0hMSx0aGlzLnRleHQ9XCJcIix0aGlzLnR5cGU9XCJ0ZXh0XCIsdGhpcy52ZXJ0aWNhbEFsaWdubWVudD1udWxsLHRoaXMueG9mZnNldD0wLHRoaXMueW9mZnNldD0wLHRoaXMuYW5nbGU9MCx0aGlzLndpZHRoPW51bGwsdGhpcy5saW5lV2lkdGg9MTkyLHRoaXMubGluZUhlaWdodD0xO31ub3JtYWxpemVDdG9yQXJncyh0LG8sZSl7aWYodCYmXCJzdHJpbmdcIiE9dHlwZW9mIHQpcmV0dXJuIHQ7Y29uc3QgaT17fTtyZXR1cm4gdCYmKGkudGV4dD10KSxvJiYoaS5mb250PW8pLGUmJihpLmNvbG9yPWUpLGl9d3JpdGVMaW5lV2lkdGgodCxvLGUsaSl7aSYmXCJzdHJpbmdcIiE9dHlwZW9mIGk/aS5vcmlnaW46b1tlXT10O31jYXN0TGluZVdpZHRoKHQpe3JldHVybiBvJDYodCl9d3JpdGVMaW5lSGVpZ2h0KHQsbyxlLGkpe2kmJlwic3RyaW5nXCIhPXR5cGVvZiBpP2kub3JpZ2luOm9bZV09dDt9Y2xvbmUoKXtyZXR1cm4gbmV3IGQkNyh7YW5nbGU6dGhpcy5hbmdsZSxiYWNrZ3JvdW5kQ29sb3I6eSR2KHRoaXMuYmFja2dyb3VuZENvbG9yKSxib3JkZXJMaW5lQ29sb3I6eSR2KHRoaXMuYm9yZGVyTGluZUNvbG9yKSxib3JkZXJMaW5lU2l6ZTp0aGlzLmJvcmRlckxpbmVTaXplLGNvbG9yOnkkdih0aGlzLmNvbG9yKSxmb250OnRoaXMuZm9udCYmdGhpcy5mb250LmNsb25lKCksaGFsb0NvbG9yOnkkdih0aGlzLmhhbG9Db2xvciksaGFsb1NpemU6dGhpcy5oYWxvU2l6ZSxob3Jpem9udGFsQWxpZ25tZW50OnRoaXMuaG9yaXpvbnRhbEFsaWdubWVudCxrZXJuaW5nOnRoaXMua2VybmluZyxsaW5lSGVpZ2h0OnRoaXMubGluZUhlaWdodCxsaW5lV2lkdGg6dGhpcy5saW5lV2lkdGgscmlnaHRUb0xlZnQ6dGhpcy5yaWdodFRvTGVmdCxyb3RhdGVkOnRoaXMucm90YXRlZCx0ZXh0OnRoaXMudGV4dCx2ZXJ0aWNhbEFsaWdubWVudDp0aGlzLnZlcnRpY2FsQWxpZ25tZW50LHdpZHRoOnRoaXMud2lkdGgseG9mZnNldDp0aGlzLnhvZmZzZXQseW9mZnNldDp0aGlzLnlvZmZzZXR9KX1oYXNoKCl7cmV0dXJuIGAke3RoaXMuYmFja2dyb3VuZENvbG9yJiZ0aGlzLmJhY2tncm91bmRDb2xvci5oYXNoKCl9LiR7dGhpcy5ib3JkZXJMaW5lQ29sb3J9LiR7dGhpcy5ib3JkZXJMaW5lU2l6ZX0uJHt0aGlzLmNvbG9yLmhhc2goKX0uJHt0aGlzLmZvbnQmJnRoaXMuZm9udC5oYXNoKCl9LiR7dGhpcy5oYWxvQ29sb3ImJnRoaXMuaGFsb0NvbG9yLmhhc2goKX0uJHt0aGlzLmhhbG9TaXplfS4ke3RoaXMuaG9yaXpvbnRhbEFsaWdubWVudH0uJHt0aGlzLmtlcm5pbmd9LiR7dGhpcy5yaWdodFRvTGVmdH0uJHt0aGlzLnJvdGF0ZWR9LiR7dGhpcy50ZXh0fS4ke3RoaXMudmVydGljYWxBbGlnbm1lbnR9LiR7dGhpcy53aWR0aH0uJHt0aGlzLnhvZmZzZXR9LiR7dGhpcy55b2Zmc2V0fS4ke3RoaXMubGluZUhlaWdodH0uJHt0aGlzLmxpbmVXaWR0aH0uJHt0aGlzLmFuZ2xlfWB9fTtlJHUoW3kkcih7dHlwZTpvJGosanNvbjp7d3JpdGU6ITB9fSldLGMkNS5wcm90b3R5cGUsXCJiYWNrZ3JvdW5kQ29sb3JcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOm8kaixqc29uOnt3cml0ZTohMH19KV0sYyQ1LnByb3RvdHlwZSxcImJvcmRlckxpbmVDb2xvclwiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6TnVtYmVyLGpzb246e3dyaXRlOiEwfX0pXSxjJDUucHJvdG90eXBlLFwiYm9yZGVyTGluZVNpemVcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOm4kaSxqc29uOnt3cml0ZTohMH19KV0sYyQ1LnByb3RvdHlwZSxcImZvbnRcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOltcImxlZnRcIixcInJpZ2h0XCIsXCJjZW50ZXJcIixcImp1c3RpZnlcIl0sanNvbjp7d3JpdGU6ITB9fSldLGMkNS5wcm90b3R5cGUsXCJob3Jpem9udGFsQWxpZ25tZW50XCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpCb29sZWFuLGpzb246e3dyaXRlOiEwfX0pXSxjJDUucHJvdG90eXBlLFwia2VybmluZ1wiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6byRqLGpzb246e3dyaXRlOiEwfX0pXSxjJDUucHJvdG90eXBlLFwiaGFsb0NvbG9yXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpOdW1iZXIsY2FzdDpvJDYsanNvbjp7d3JpdGU6ITB9fSldLGMkNS5wcm90b3R5cGUsXCJoYWxvU2l6ZVwiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6Qm9vbGVhbixqc29uOnt3cml0ZTohMH19KV0sYyQ1LnByb3RvdHlwZSxcInJpZ2h0VG9MZWZ0XCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpCb29sZWFuLGpzb246e3dyaXRlOiEwfX0pXSxjJDUucHJvdG90eXBlLFwicm90YXRlZFwiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6U3RyaW5nLGpzb246e3dyaXRlOiEwfX0pXSxjJDUucHJvdG90eXBlLFwidGV4dFwiLHZvaWQgMCksZSR1KFtyJHYoe2VzcmlUUzpcInRleHRcIn0se3JlYWRPbmx5OiEwfSldLGMkNS5wcm90b3R5cGUsXCJ0eXBlXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpbXCJiYXNlbGluZVwiLFwidG9wXCIsXCJtaWRkbGVcIixcImJvdHRvbVwiXSxqc29uOnt3cml0ZTohMH19KV0sYyQ1LnByb3RvdHlwZSxcInZlcnRpY2FsQWxpZ25tZW50XCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpOdW1iZXIsY2FzdDpvJDYsanNvbjp7d3JpdGU6ITB9fSldLGMkNS5wcm90b3R5cGUsXCJ4b2Zmc2V0XCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpOdW1iZXIsY2FzdDpvJDYsanNvbjp7d3JpdGU6ITB9fSldLGMkNS5wcm90b3R5cGUsXCJ5b2Zmc2V0XCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpOdW1iZXIsanNvbjp7cmVhZDp0PT50JiYtMSp0LHdyaXRlOih0LG8pPT5vLmFuZ2xlPXQmJi0xKnR9fSldLGMkNS5wcm90b3R5cGUsXCJhbmdsZVwiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6TnVtYmVyLGpzb246e3dyaXRlOiEwfX0pXSxjJDUucHJvdG90eXBlLFwid2lkdGhcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOk51bWJlcn0pXSxjJDUucHJvdG90eXBlLFwibGluZVdpZHRoXCIsdm9pZCAwKSxlJHUoW28kdihcImxpbmVXaWR0aFwiKV0sYyQ1LnByb3RvdHlwZSxcIndyaXRlTGluZVdpZHRoXCIsbnVsbCksZSR1KFtjJF8oXCJsaW5lV2lkdGhcIildLGMkNS5wcm90b3R5cGUsXCJjYXN0TGluZVdpZHRoXCIsbnVsbCksZSR1KFt5JHIoe3R5cGU6TnVtYmVyfSldLGMkNS5wcm90b3R5cGUsXCJsaW5lSGVpZ2h0XCIsdm9pZCAwKSxlJHUoW28kdihcImxpbmVIZWlnaHRcIildLGMkNS5wcm90b3R5cGUsXCJ3cml0ZUxpbmVIZWlnaHRcIixudWxsKSxjJDU9ZCQ3PWUkdShbaSRYKFwiZXNyaS5zeW1ib2xzLlRleHRTeW1ib2xcIildLGMkNSk7dmFyIHkkMj1jJDU7XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG52YXIgYyQ0O2NvbnN0IG4kND1uJFQuZ2V0TG9nZ2VyKFwiZXNyaS5zeW1ib2xzLldlYlN0eWxlU3ltYm9sXCIpO2xldCB1JDI9YyQ0PWNsYXNzIGV4dGVuZHMgbiRve2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpLHRoaXMuc3R5bGVOYW1lPW51bGwsdGhpcy5wb3J0YWw9bnVsbCx0aGlzLnN0eWxlVXJsPW51bGwsdGhpcy50aHVtYm5haWw9bnVsbCx0aGlzLm5hbWU9bnVsbCx0aGlzLnR5cGU9XCJ3ZWItc3R5bGVcIjt9cmVhZCh0LHIpe3RoaXMucG9ydGFsPXI/ci5wb3J0YWw6dm9pZCAwLHN1cGVyLnJlYWQodCxyKTt9Y2xvbmUoKXtyZXR1cm4gbmV3IGMkNCh7bmFtZTp0aGlzLm5hbWUsc3R5bGVVcmw6dGhpcy5zdHlsZVVybCxzdHlsZU5hbWU6dGhpcy5zdHlsZU5hbWUscG9ydGFsOnRoaXMucG9ydGFsfSl9ZmV0Y2hTeW1ib2wodCl7cmV0dXJuIHRoaXMuX2ZldGNoU3ltYm9sKFwid2ViUmVmXCIsdCl9ZmV0Y2hDSU1TeW1ib2wodCl7cmV0dXJuIHRoaXMuX2ZldGNoU3ltYm9sKFwiY2ltUmVmXCIsdCl9YXN5bmMgX2ZldGNoU3ltYm9sKHQscil7Y29uc3Qgbz1hd2FpdCBoJDYoKTthJEkocik7Y29uc3QgZT1vLnJlc29sdmVXZWJTdHlsZVN5bWJvbCh0aGlzLHtwb3J0YWw6dGhpcy5wb3J0YWx9LHQscik7cmV0dXJuIGUuY2F0Y2goKHQ9PntuJDQuZXJyb3IoXCIjZmV0Y2hTeW1ib2woKVwiLFwiRmFpbGVkIHRvIGNyZWF0ZSBzeW1ib2wgZnJvbSBzdHlsZVwiLHQpO30pKSxlfX07ZnVuY3Rpb24gaCQ2KCl7cmV0dXJuIGltcG9ydCgnLi9zdHlsZVV0aWxzLTYwMTlmM2I5LmpzJykudGhlbihmdW5jdGlvbiAobikgeyByZXR1cm4gbi5zOyB9KX1lJHUoW3kkcih7anNvbjp7d3JpdGU6ITF9fSldLHUkMi5wcm90b3R5cGUsXCJjb2xvclwiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6U3RyaW5nLGpzb246e3dyaXRlOiEwfX0pXSx1JDIucHJvdG90eXBlLFwic3R5bGVOYW1lXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTp3JDIsanNvbjp7d3JpdGU6ITF9fSldLHUkMi5wcm90b3R5cGUsXCJwb3J0YWxcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOlN0cmluZyxqc29uOntyZWFkOm0kQix3cml0ZTpwJDEwfX0pXSx1JDIucHJvdG90eXBlLFwic3R5bGVVcmxcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOmMkYSxqc29uOntyZWFkOiExfX0pXSx1JDIucHJvdG90eXBlLFwidGh1bWJuYWlsXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpTdHJpbmcsanNvbjp7d3JpdGU6ITB9fSldLHUkMi5wcm90b3R5cGUsXCJuYW1lXCIsdm9pZCAwKSxlJHUoW3Ikdih7c3R5bGVTeW1ib2xSZWZlcmVuY2U6XCJ3ZWItc3R5bGVcIn0se3JlYWRPbmx5OiEwfSldLHUkMi5wcm90b3R5cGUsXCJ0eXBlXCIsdm9pZCAwKSx1JDI9YyQ0PWUkdShbaSRYKFwiZXNyaS5zeW1ib2xzLldlYlN0eWxlU3ltYm9sXCIpXSx1JDIpO3ZhciBiJDM9dSQyO1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuZnVuY3Rpb24geCQyKGUpe2lmKCFlKXJldHVybiAhMTtzd2l0Y2goZS50eXBlKXtjYXNlXCJwaWN0dXJlLWZpbGxcIjpjYXNlXCJwaWN0dXJlLW1hcmtlclwiOmNhc2VcInNpbXBsZS1maWxsXCI6Y2FzZVwic2ltcGxlLWxpbmVcIjpjYXNlXCJzaW1wbGUtbWFya2VyXCI6Y2FzZVwidGV4dFwiOmNhc2VcImNpbVwiOnJldHVybiAhMDtkZWZhdWx0OnJldHVybiAhMX19ZnVuY3Rpb24gYyQzKGUpe2lmKCFlKXJldHVybiAhMTtzd2l0Y2goZS50eXBlKXtjYXNlXCJsYWJlbC0zZFwiOmNhc2VcImxpbmUtM2RcIjpjYXNlXCJtZXNoLTNkXCI6Y2FzZVwicG9pbnQtM2RcIjpjYXNlXCJwb2x5Z29uLTNkXCI6cmV0dXJuICEwO2RlZmF1bHQ6cmV0dXJuICExfX1jb25zdCBqJDI9e2Jhc2U6biRvLGtleTpcInR5cGVcIix0eXBlTWFwOntcInNpbXBsZS1maWxsXCI6dSQ0LFwicGljdHVyZS1maWxsXCI6YSQ1LFwicGljdHVyZS1tYXJrZXJcIjpuJDYsXCJzaW1wbGUtbGluZVwiOmQkaSxcInNpbXBsZS1tYXJrZXJcIjp5JDMsdGV4dDp5JDIsXCJsYWJlbC0zZFwiOmIkNCxcImxpbmUtM2RcIjp1JDcsXCJtZXNoLTNkXCI6YSQ2LFwicG9pbnQtM2RcIjpMJDIsXCJwb2x5Z29uLTNkXCI6aCQ4LFwid2ViLXN0eWxlXCI6YiQzLGNpbTpkJGp9LGVycm9yQ29udGV4dDpcInN5bWJvbFwifSxEJDE9e2Jhc2U6biRvLGtleTpcInR5cGVcIix0eXBlTWFwOntcInBpY3R1cmUtbWFya2VyXCI6biQ2LFwic2ltcGxlLW1hcmtlclwiOnkkMyx0ZXh0OnkkMixcIndlYi1zdHlsZVwiOmIkMyxjaW06ZCRqfSxlcnJvckNvbnRleHQ6XCJzeW1ib2xcIn0sayQxPXUkSyh7dHlwZXM6aiQyfSksTT17YmFzZTpuJG8sa2V5OlwidHlwZVwiLHR5cGVNYXA6e1wic2ltcGxlLWZpbGxcIjp1JDQsXCJwaWN0dXJlLWZpbGxcIjphJDUsXCJwaWN0dXJlLW1hcmtlclwiOm4kNixcInNpbXBsZS1saW5lXCI6ZCRpLFwic2ltcGxlLW1hcmtlclwiOnkkMyx0ZXh0OnkkMixcImxpbmUtM2RcIjp1JDcsXCJtZXNoLTNkXCI6YSQ2LFwicG9pbnQtM2RcIjpMJDIsXCJwb2x5Z29uLTNkXCI6aCQ4LFwid2ViLXN0eWxlXCI6YiQzLGNpbTpkJGp9LGVycm9yQ29udGV4dDpcInN5bWJvbFwifSxQJDE9e2Jhc2U6biRvLGtleTpcInR5cGVcIix0eXBlTWFwOnt0ZXh0OnkkMixcImxhYmVsLTNkXCI6YiQ0fSxlcnJvckNvbnRleHQ6XCJzeW1ib2xcIn0saCQ1PXtiYXNlOm4kbyxrZXk6XCJ0eXBlXCIsdHlwZU1hcDp7XCJsaW5lLTNkXCI6dSQ3LFwibWVzaC0zZFwiOmEkNixcInBvaW50LTNkXCI6TCQyLFwicG9seWdvbi0zZFwiOmgkOCxcIndlYi1zdHlsZVwiOmIkM30sZXJyb3JDb250ZXh0Olwic3ltYm9sXCJ9LEY9e2Jhc2U6biRvLGtleTpcInR5cGVcIix0eXBlTWFwOntcImxhYmVsLTNkXCI6YiQ0fSxlcnJvckNvbnRleHQ6XCJzeW1ib2xcIn0sZyQyPWskYShqJDIpO1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xubGV0IHQkMz0wO2Z1bmN0aW9uIGUkNCgpe3JldHVybiArK3QkM31cblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbnZhciBtJDM7bGV0IGgkND1tJDM9Y2xhc3MgZXh0ZW5kcyBhJEJ7Y29uc3RydWN0b3IoLi4udCl7c3VwZXIoLi4udCksdGhpcy5pc0FnZ3JlZ2F0ZT0hMSx0aGlzLmxheWVyPW51bGwsdGhpcy5wb3B1cFRlbXBsYXRlPW51bGwsdGhpcy5zb3VyY2VMYXllcj1udWxsLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwidWlkXCIse3ZhbHVlOmUkNCgpLGNvbmZpZ3VyYWJsZTohMH0pO31ub3JtYWxpemVDdG9yQXJncyh0LGUscixzKXtyZXR1cm4gdCYmIXQuZGVjbGFyZWRDbGFzcz90OntnZW9tZXRyeTp0LHN5bWJvbDplLGF0dHJpYnV0ZXM6cixwb3B1cFRlbXBsYXRlOnN9fXNldCBhdHRyaWJ1dGVzKHQpe2NvbnN0IGU9dGhpcy5fZ2V0KFwiYXR0cmlidXRlc1wiKTtlIT09dCYmKHRoaXMuX3NldChcImF0dHJpYnV0ZXNcIix0KSx0aGlzLl9ub3RpZnlMYXllcihcImF0dHJpYnV0ZXNcIixlLHQpKTt9c2V0IGdlb21ldHJ5KHQpe2NvbnN0IGU9dGhpcy5fZ2V0KFwiZ2VvbWV0cnlcIik7ZSE9PXQmJih0aGlzLl9zZXQoXCJnZW9tZXRyeVwiLHQpLHRoaXMuX25vdGlmeUxheWVyKFwiZ2VvbWV0cnlcIixlLHQpKTt9c2V0IHN5bWJvbCh0KXtjb25zdCBlPXRoaXMuX2dldChcInN5bWJvbFwiKTtlIT09dCYmKHRoaXMuX3NldChcInN5bWJvbFwiLHQpLHRoaXMuX25vdGlmeUxheWVyKFwic3ltYm9sXCIsZSx0KSk7fXNldCB2aXNpYmxlKHQpe2NvbnN0IGU9dGhpcy5fZ2V0KFwidmlzaWJsZVwiKTtlIT09dCYmKHRoaXMuX3NldChcInZpc2libGVcIix0KSx0aGlzLl9ub3RpZnlMYXllcihcInZpc2libGVcIixlLHQpKTt9Z2V0RWZmZWN0aXZlUG9wdXBUZW1wbGF0ZSh0PSExKXtyZXR1cm4gdGhpcy5wb3B1cFRlbXBsYXRlP3RoaXMucG9wdXBUZW1wbGF0ZTp0aGlzLnNvdXJjZUxheWVyP1wicG9wdXBUZW1wbGF0ZVwiaW4gdGhpcy5zb3VyY2VMYXllciYmdGhpcy5zb3VyY2VMYXllci5wb3B1cFRlbXBsYXRlP3RoaXMuc291cmNlTGF5ZXIucG9wdXBUZW1wbGF0ZTp0JiZcImRlZmF1bHRQb3B1cFRlbXBsYXRlXCJpbiB0aGlzLnNvdXJjZUxheWVyJiZyJEEodGhpcy5zb3VyY2VMYXllci5kZWZhdWx0UG9wdXBUZW1wbGF0ZSk/dGhpcy5zb3VyY2VMYXllci5kZWZhdWx0UG9wdXBUZW1wbGF0ZTpudWxsOm51bGx9Z2V0QXR0cmlidXRlKHQpe3JldHVybiB0aGlzLmF0dHJpYnV0ZXMmJnRoaXMuYXR0cmlidXRlc1t0XX1zZXRBdHRyaWJ1dGUodCxlKXtpZih0aGlzLmF0dHJpYnV0ZXMpe2NvbnN0IHI9dGhpcy5nZXRBdHRyaWJ1dGUodCk7dGhpcy5hdHRyaWJ1dGVzW3RdPWUsdGhpcy5fbm90aWZ5TGF5ZXIoXCJhdHRyaWJ1dGVzXCIscixlLHQpO31lbHNlIHRoaXMuYXR0cmlidXRlcz17W3RdOmV9LHRoaXMuX25vdGlmeUxheWVyKFwiYXR0cmlidXRlc1wiLHZvaWQgMCxlLHQpO31nZXRPYmplY3RJZCgpe3JldHVybiB0aGlzLnNvdXJjZUxheWVyJiZcIm9iamVjdElkRmllbGRcImluIHRoaXMuc291cmNlTGF5ZXImJnRoaXMuc291cmNlTGF5ZXIub2JqZWN0SWRGaWVsZD90aGlzLmdldEF0dHJpYnV0ZSh0aGlzLnNvdXJjZUxheWVyLm9iamVjdElkRmllbGQpOm51bGx9dG9KU09OKCl7cmV0dXJuIHtnZW9tZXRyeTpyJEEodGhpcy5nZW9tZXRyeSk/dGhpcy5nZW9tZXRyeS50b0pTT04oKTpudWxsLHN5bWJvbDpyJEEodGhpcy5zeW1ib2wpP3RoaXMuc3ltYm9sLnRvSlNPTigpOm51bGwsYXR0cmlidXRlczp7Li4udGhpcy5hdHRyaWJ1dGVzfSxwb3B1cFRlbXBsYXRlOnRoaXMucG9wdXBUZW1wbGF0ZSYmdGhpcy5wb3B1cFRlbXBsYXRlLnRvSlNPTigpfX1jbG9uZSgpe3JldHVybiBuZXcgbSQzKHRoaXMuY2xvbmVQcm9wZXJ0aWVzKCkpfWNsb25lUHJvcGVydGllcygpe3JldHVybiB7YXR0cmlidXRlczp5JHYodGhpcy5hdHRyaWJ1dGVzKSxnZW9tZXRyeTp5JHYodGhpcy5nZW9tZXRyeSksbGF5ZXI6dGhpcy5sYXllcixwb3B1cFRlbXBsYXRlOnRoaXMucG9wdXBUZW1wbGF0ZSYmdGhpcy5wb3B1cFRlbXBsYXRlLmNsb25lKCksc291cmNlTGF5ZXI6dGhpcy5zb3VyY2VMYXllcixzeW1ib2w6eSR2KHRoaXMuc3ltYm9sKSx2aXNpYmxlOnRoaXMudmlzaWJsZX19X25vdGlmeUxheWVyKHQsZSxyLHMpe2lmKCF0aGlzLmxheWVyfHwhKFwiZ3JhcGhpY0NoYW5nZWRcImluIHRoaXMubGF5ZXIpKXJldHVybjtjb25zdCBvPXtncmFwaGljOnRoaXMscHJvcGVydHk6dCxvbGRWYWx1ZTplLG5ld1ZhbHVlOnJ9O1wiYXR0cmlidXRlc1wiPT09dCYmKG8uYXR0cmlidXRlTmFtZT1zKSx0aGlzLmxheWVyLmdyYXBoaWNDaGFuZ2VkKG8pO319O2UkdShbeSRyKHt2YWx1ZTpudWxsfSldLGgkNC5wcm90b3R5cGUsXCJhdHRyaWJ1dGVzXCIsbnVsbCksZSR1KFt5JHIoe3ZhbHVlOm51bGwsdHlwZXM6aSRGLGpzb246e3JlYWQ6cCRRfX0pXSxoJDQucHJvdG90eXBlLFwiZ2VvbWV0cnlcIixudWxsKSxlJHUoW3kkcih7dHlwZTpCb29sZWFufSldLGgkNC5wcm90b3R5cGUsXCJpc0FnZ3JlZ2F0ZVwiLHZvaWQgMCksZSR1KFt5JHIoKV0saCQ0LnByb3RvdHlwZSxcImxheWVyXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpNJDF9KV0saCQ0LnByb3RvdHlwZSxcInBvcHVwVGVtcGxhdGVcIix2b2lkIDApLGUkdShbeSRyKCldLGgkNC5wcm90b3R5cGUsXCJzb3VyY2VMYXllclwiLHZvaWQgMCksZSR1KFt5JHIoe3ZhbHVlOm51bGwsdHlwZXM6aiQyfSldLGgkNC5wcm90b3R5cGUsXCJzeW1ib2xcIixudWxsKSxlJHUoW3kkcih7dHlwZTpCb29sZWFuLHZhbHVlOiEwfSldLGgkNC5wcm90b3R5cGUsXCJ2aXNpYmxlXCIsbnVsbCksaCQ0PW0kMz1lJHUoW2kkWChcImVzcmkuR3JhcGhpY1wiKV0saCQ0KSxmdW5jdGlvbih0KXt0LmdlbmVyYXRlVUlEPWUkNDt9KGgkNHx8KGgkND17fSkpO3ZhciBuJDM9aCQ0O1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuY29uc3QgaSQ1PW5ldyB0JEkoe2VzcmlGaWVsZFR5cGVTbWFsbEludGVnZXI6XCJzbWFsbC1pbnRlZ2VyXCIsZXNyaUZpZWxkVHlwZUludGVnZXI6XCJpbnRlZ2VyXCIsZXNyaUZpZWxkVHlwZVNpbmdsZTpcInNpbmdsZVwiLGVzcmlGaWVsZFR5cGVEb3VibGU6XCJkb3VibGVcIixlc3JpRmllbGRUeXBlTG9uZzpcImxvbmdcIixlc3JpRmllbGRUeXBlU3RyaW5nOlwic3RyaW5nXCIsZXNyaUZpZWxkVHlwZURhdGU6XCJkYXRlXCIsZXNyaUZpZWxkVHlwZU9JRDpcIm9pZFwiLGVzcmlGaWVsZFR5cGVHZW9tZXRyeTpcImdlb21ldHJ5XCIsZXNyaUZpZWxkVHlwZUJsb2I6XCJibG9iXCIsZXNyaUZpZWxkVHlwZVJhc3RlcjpcInJhc3RlclwiLGVzcmlGaWVsZFR5cGVHVUlEOlwiZ3VpZFwiLGVzcmlGaWVsZFR5cGVHbG9iYWxJRDpcImdsb2JhbC1pZFwiLGVzcmlGaWVsZFR5cGVYTUw6XCJ4bWxcIn0pO1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xudmFyIHUkMTtjb25zdCBjJDI9bmV3IHQkSSh7YmluYXJ5OlwiYmluYXJ5XCIsY29vcmRpbmF0ZTpcImNvb3JkaW5hdGVcIixjb3VudE9yQW1vdW50OlwiY291bnQtb3ItYW1vdW50XCIsZGF0ZUFuZFRpbWU6XCJkYXRlLWFuZC10aW1lXCIsZGVzY3JpcHRpb246XCJkZXNjcmlwdGlvblwiLGxvY2F0aW9uT3JQbGFjZU5hbWU6XCJsb2NhdGlvbi1vci1wbGFjZS1uYW1lXCIsbWVhc3VyZW1lbnQ6XCJtZWFzdXJlbWVudFwiLG5hbWVPclRpdGxlOlwibmFtZS1vci10aXRsZVwiLG5vbmU6XCJub25lXCIsb3JkZXJlZE9yUmFua2VkOlwib3JkZXJlZC1vci1yYW5rZWRcIixwZXJjZW50YWdlT3JSYXRpbzpcInBlcmNlbnRhZ2Utb3ItcmF0aW9cIix0eXBlT3JDYXRlZ29yeTpcInR5cGUtb3ItY2F0ZWdvcnlcIix1bmlxdWVJZGVudGlmaWVyOlwidW5pcXVlLWlkZW50aWZpZXJcIn0pO2xldCBtJDI9dSQxPWNsYXNzIGV4dGVuZHMgYSRCe2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuYWxpYXM9bnVsbCx0aGlzLmRlZmF1bHRWYWx1ZT12b2lkIDAsdGhpcy5kZXNjcmlwdGlvbj1udWxsLHRoaXMuZG9tYWluPW51bGwsdGhpcy5lZGl0YWJsZT0hMCx0aGlzLmxlbmd0aD0tMSx0aGlzLm5hbWU9bnVsbCx0aGlzLm51bGxhYmxlPSEwLHRoaXMudHlwZT1udWxsLHRoaXMudmFsdWVUeXBlPW51bGw7fXJlYWREZXNjcmlwdGlvbihlLHtkZXNjcmlwdGlvbjp0fSl7bGV0IG87dHJ5e289SlNPTi5wYXJzZSh0KTt9Y2F0Y2gocil7fXJldHVybiBvP28udmFsdWU6bnVsbH1yZWFkVmFsdWVUeXBlKGUse2Rlc2NyaXB0aW9uOnR9KXtsZXQgbzt0cnl7bz1KU09OLnBhcnNlKHQpO31jYXRjaChyKXt9cmV0dXJuIG8/YyQyLmZyb21KU09OKG8uZmllbGRWYWx1ZVR5cGUpOm51bGx9Y2xvbmUoKXtyZXR1cm4gbmV3IHUkMSh7YWxpYXM6dGhpcy5hbGlhcyxkZWZhdWx0VmFsdWU6dGhpcy5kZWZhdWx0VmFsdWUsZGVzY3JpcHRpb246dGhpcy5kZXNjcmlwdGlvbixkb21haW46dGhpcy5kb21haW4mJnRoaXMuZG9tYWluLmNsb25lKCl8fG51bGwsZWRpdGFibGU6dGhpcy5lZGl0YWJsZSxsZW5ndGg6dGhpcy5sZW5ndGgsbmFtZTp0aGlzLm5hbWUsbnVsbGFibGU6dGhpcy5udWxsYWJsZSx0eXBlOnRoaXMudHlwZSx2YWx1ZVR5cGU6dGhpcy52YWx1ZVR5cGV9KX19O2UkdShbeSRyKHt0eXBlOlN0cmluZyxqc29uOnt3cml0ZTohMH19KV0sbSQyLnByb3RvdHlwZSxcImFsaWFzXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpbU3RyaW5nLE51bWJlcl0sanNvbjp7d3JpdGU6e2FsbG93TnVsbDohMH19fSldLG0kMi5wcm90b3R5cGUsXCJkZWZhdWx0VmFsdWVcIix2b2lkIDApLGUkdShbeSRyKCldLG0kMi5wcm90b3R5cGUsXCJkZXNjcmlwdGlvblwiLHZvaWQgMCksZSR1KFtlJEMoXCJkZXNjcmlwdGlvblwiKV0sbSQyLnByb3RvdHlwZSxcInJlYWREZXNjcmlwdGlvblwiLG51bGwpLGUkdShbeSRyKHt0eXBlczp1JG0sanNvbjp7cmVhZDp7cmVhZGVyOmQkbn0sd3JpdGU6ITB9fSldLG0kMi5wcm90b3R5cGUsXCJkb21haW5cIix2b2lkIDApLGUkdShbeSRyKHt0eXBlOkJvb2xlYW4sanNvbjp7d3JpdGU6ITB9fSldLG0kMi5wcm90b3R5cGUsXCJlZGl0YWJsZVwiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6TiQ1LGpzb246e3dyaXRlOiEwfX0pXSxtJDIucHJvdG90eXBlLFwibGVuZ3RoXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpTdHJpbmcsanNvbjp7d3JpdGU6ITB9fSldLG0kMi5wcm90b3R5cGUsXCJuYW1lXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpCb29sZWFuLGpzb246e3dyaXRlOiEwfX0pXSxtJDIucHJvdG90eXBlLFwibnVsbGFibGVcIix2b2lkIDApLGUkdShbciR2KGkkNSldLG0kMi5wcm90b3R5cGUsXCJ0eXBlXCIsdm9pZCAwKSxlJHUoW3kkcigpXSxtJDIucHJvdG90eXBlLFwidmFsdWVUeXBlXCIsdm9pZCAwKSxlJHUoW2UkQyhcInZhbHVlVHlwZVwiLFtcImRlc2NyaXB0aW9uXCJdKV0sbSQyLnByb3RvdHlwZSxcInJlYWRWYWx1ZVR5cGVcIixudWxsKSxtJDI9dSQxPWUkdShbaSRYKFwiZXNyaS5sYXllcnMuc3VwcG9ydC5GaWVsZFwiKV0sbSQyKTt2YXIgeSQxPW0kMjtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmNvbnN0IGgkMz1uZXcgdCRJKHtlc3JpR2VvbWV0cnlQb2ludDpcInBvaW50XCIsZXNyaUdlb21ldHJ5TXVsdGlwb2ludDpcIm11bHRpcG9pbnRcIixlc3JpR2VvbWV0cnlQb2x5bGluZTpcInBvbHlsaW5lXCIsZXNyaUdlb21ldHJ5UG9seWdvbjpcInBvbHlnb25cIixlc3JpR2VvbWV0cnlFbnZlbG9wZTpcImV4dGVudFwiLG1lc2g6XCJtZXNoXCIsXCJcIjpudWxsfSk7bGV0IGQkNj1jbGFzcyBleHRlbmRzIGEkQntjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLmRpc3BsYXlGaWVsZE5hbWU9bnVsbCx0aGlzLmV4Y2VlZGVkVHJhbnNmZXJMaW1pdD0hMSx0aGlzLmZlYXR1cmVzPVtdLHRoaXMuZmllbGRzPW51bGwsdGhpcy5nZW9tZXRyeVR5cGU9bnVsbCx0aGlzLmhhc009ITEsdGhpcy5oYXNaPSExLHRoaXMucXVlcnlHZW9tZXRyeT1udWxsLHRoaXMuc3BhdGlhbFJlZmVyZW5jZT1udWxsO31yZWFkRmVhdHVyZXMoZSxyKXtjb25zdCBvPWskNC5mcm9tSlNPTihyLnNwYXRpYWxSZWZlcmVuY2UpLHM9W107Zm9yKGxldCBpPTA7aTxlLmxlbmd0aDtpKyspe2NvbnN0IHI9ZVtpXSxuPW4kMy5mcm9tSlNPTihyKSxwPXIuZ2VvbWV0cnkmJnIuZ2VvbWV0cnkuc3BhdGlhbFJlZmVyZW5jZTtyJEEobi5nZW9tZXRyeSkmJiFwJiYobi5nZW9tZXRyeS5zcGF0aWFsUmVmZXJlbmNlPW8pLHMucHVzaChuKTt9cmV0dXJuIHN9d3JpdGVHZW9tZXRyeVR5cGUoZSxyLG8scyl7aWYoZSlyZXR1cm4gdm9pZCBoJDMud3JpdGUoZSxyLG8scyk7Y29uc3R7ZmVhdHVyZXM6aX09dGhpcztpZihpKWZvcihjb25zdCBuIG9mIGkpaWYobiYmciRBKG4uZ2VvbWV0cnkpKXJldHVybiB2b2lkIGgkMy53cml0ZShuLmdlb21ldHJ5LnR5cGUscixvLHMpfXJlYWRRdWVyeUdlb21ldHJ5KGUsdCl7aWYoIWUpcmV0dXJuIG51bGw7Y29uc3Qgcj0hIWUuc3BhdGlhbFJlZmVyZW5jZSxvPXAkUShlKTtyZXR1cm4gIXImJnQuc3BhdGlhbFJlZmVyZW5jZSYmKG8uc3BhdGlhbFJlZmVyZW5jZT1rJDQuZnJvbUpTT04odC5zcGF0aWFsUmVmZXJlbmNlKSksb313cml0ZVNwYXRpYWxSZWZlcmVuY2UoZSxyKXtpZihlKXJldHVybiB2b2lkKHIuc3BhdGlhbFJlZmVyZW5jZT1lLnRvSlNPTigpKTtjb25zdHtmZWF0dXJlczpvfT10aGlzO2lmKG8pZm9yKGNvbnN0IHMgb2YgbylpZihzJiZyJEEocy5nZW9tZXRyeSkmJnMuZ2VvbWV0cnkuc3BhdGlhbFJlZmVyZW5jZSlyZXR1cm4gdm9pZChyLnNwYXRpYWxSZWZlcmVuY2U9cy5nZW9tZXRyeS5zcGF0aWFsUmVmZXJlbmNlLnRvSlNPTigpKX10b0pTT04oZSl7Y29uc3QgdD10aGlzLndyaXRlKG51bGwpO2lmKHQuZmVhdHVyZXMmJkFycmF5LmlzQXJyYXkoZSkmJmUubGVuZ3RoPjApZm9yKGxldCByPTA7cjx0LmZlYXR1cmVzLmxlbmd0aDtyKyspe2NvbnN0IG89dC5mZWF0dXJlc1tyXTtpZihvLmdlb21ldHJ5KXtjb25zdCB0PWUmJmVbcl07by5nZW9tZXRyeT10JiZ0LnRvSlNPTigpfHxvLmdlb21ldHJ5O319cmV0dXJuIHR9cXVhbnRpemUoZSl7Y29uc3R7c2NhbGU6W3Qsb10sdHJhbnNsYXRlOltzLGldfT1lLG49ZT0+TWF0aC5yb3VuZCgoZS1zKS90KSxwPWU9Pk1hdGgucm91bmQoKGktZSkvbyksbD10aGlzLmZlYXR1cmVzLGE9dGhpcy5fZ2V0UXVhbnRpemF0aW9uRnVuY3Rpb24odGhpcy5nZW9tZXRyeVR5cGUsbixwKTtmb3IobGV0IHk9MCx1PWwubGVuZ3RoO3k8dTt5KyspYShlJEkobFt5XS5nZW9tZXRyeSkpfHwobC5zcGxpY2UoeSwxKSx5LS0sdS0tKTtyZXR1cm4gdGhpcy50cmFuc2Zvcm09ZSx0aGlzfXVucXVhbnRpemUoKXtjb25zdHtnZW9tZXRyeVR5cGU6ZSxmZWF0dXJlczpyLHRyYW5zZm9ybTpvfT10aGlzO2lmKCFvKXJldHVybiB0aGlzO2NvbnN0e3RyYW5zbGF0ZTpbcyxpXSxzY2FsZTpbbixwXX09byxsPWU9PmUqbitzLGE9ZT0+aS1lKnAseT10aGlzLl9nZXRIeWRyYXRpb25GdW5jdGlvbihlLGwsYSk7Zm9yKGNvbnN0e2dlb21ldHJ5OnV9b2YgcilyJEEodSkmJnkodSk7cmV0dXJuIHRoaXMudHJhbnNmb3JtPW51bGwsdGhpc31fcXVhbnRpemVQb2ludHMoZSx0LHIpe2xldCBvLHM7Y29uc3QgaT1bXTtmb3IobGV0IG49MCxwPWUubGVuZ3RoO248cDtuKyspe2NvbnN0IHA9ZVtuXTtpZihuPjApe2NvbnN0IGU9dChwWzBdKSxuPXIocFsxXSk7ZT09PW8mJm49PT1zfHwoaS5wdXNoKFtlLW8sbi1zXSksbz1lLHM9bik7fWVsc2Ugbz10KHBbMF0pLHM9cihwWzFdKSxpLnB1c2goW28sc10pO31yZXR1cm4gaS5sZW5ndGg+MD9pOm51bGx9X2dldFF1YW50aXphdGlvbkZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gXCJwb2ludFwiPT09ZT9lPT4oZS54PXQoZS54KSxlLnk9cihlLnkpLGUpOlwicG9seWxpbmVcIj09PWV8fFwicG9seWdvblwiPT09ZT9lPT57Y29uc3Qgbz15JGEoZSk/ZS5yaW5nczplLnBhdGhzLHM9W107Zm9yKGxldCBpPTAsbj1vLmxlbmd0aDtpPG47aSsrKXtjb25zdCBlPW9baV0sbj10aGlzLl9xdWFudGl6ZVBvaW50cyhlLHQscik7biYmcy5wdXNoKG4pO31yZXR1cm4gcy5sZW5ndGg+MD8oeSRhKGUpP2UucmluZ3M9czplLnBhdGhzPXMsZSk6bnVsbH06XCJtdWx0aXBvaW50XCI9PT1lP2U9Pntjb25zdCBvPXRoaXMuX3F1YW50aXplUG9pbnRzKGUucG9pbnRzLHQscik7cmV0dXJuIG8ubGVuZ3RoPjA/KGUucG9pbnRzPW8sZSk6bnVsbH06XCJleHRlbnRcIj09PWU/ZT0+ZTpudWxsfV9nZXRIeWRyYXRpb25GdW5jdGlvbihlLHQscil7cmV0dXJuIFwicG9pbnRcIj09PWU/ZT0+e2UueD10KGUueCksZS55PXIoZS55KTt9OlwicG9seWxpbmVcIj09PWV8fFwicG9seWdvblwiPT09ZT9lPT57Y29uc3Qgbz15JGEoZSk/ZS5yaW5nczplLnBhdGhzO2xldCBzLGk7Zm9yKGxldCBuPTAscD1vLmxlbmd0aDtuPHA7bisrKXtjb25zdCBlPW9bbl07Zm9yKGxldCBvPTAsbj1lLmxlbmd0aDtvPG47bysrKXtjb25zdCBuPWVbb107bz4wPyhzKz1uWzBdLGkrPW5bMV0pOihzPW5bMF0saT1uWzFdKSxuWzBdPXQocyksblsxXT1yKGkpO319fTpcImV4dGVudFwiPT09ZT9lPT57ZS54bWluPXQoZS54bWluKSxlLnltaW49cihlLnltaW4pLGUueG1heD10KGUueG1heCksZS55bWF4PXIoZS55bWF4KTt9OlwibXVsdGlwb2ludFwiPT09ZT9lPT57Y29uc3Qgbz1lLnBvaW50cztsZXQgcyxpO2ZvcihsZXQgbj0wLHA9by5sZW5ndGg7bjxwO24rKyl7Y29uc3QgZT1vW25dO24+MD8ocys9ZVswXSxpKz1lWzFdKToocz1lWzBdLGk9ZVsxXSksZVswXT10KHMpLGVbMV09cihpKTt9fTp2b2lkIDB9fTtlJHUoW3kkcih7dHlwZTpTdHJpbmcsanNvbjp7d3JpdGU6ITB9fSldLGQkNi5wcm90b3R5cGUsXCJkaXNwbGF5RmllbGROYW1lXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpCb29sZWFuLGpzb246e3dyaXRlOntvdmVycmlkZVBvbGljeTplPT4oe2VuYWJsZWQ6ZX0pfX19KV0sZCQ2LnByb3RvdHlwZSxcImV4Y2VlZGVkVHJhbnNmZXJMaW1pdFwiLHZvaWQgMCksZSR1KFt5JHIoe3R5cGU6W24kM10sanNvbjp7d3JpdGU6ITB9fSldLGQkNi5wcm90b3R5cGUsXCJmZWF0dXJlc1wiLHZvaWQgMCksZSR1KFtlJEMoXCJmZWF0dXJlc1wiKV0sZCQ2LnByb3RvdHlwZSxcInJlYWRGZWF0dXJlc1wiLG51bGwpLGUkdShbeSRyKHt0eXBlOlt5JDFdLGpzb246e3dyaXRlOiEwfX0pXSxkJDYucHJvdG90eXBlLFwiZmllbGRzXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpbXCJwb2ludFwiLFwibXVsdGlwb2ludFwiLFwicG9seWxpbmVcIixcInBvbHlnb25cIixcImV4dGVudFwiLFwibWVzaFwiXSxqc29uOntyZWFkOntyZWFkZXI6aCQzLnJlYWR9fX0pXSxkJDYucHJvdG90eXBlLFwiZ2VvbWV0cnlUeXBlXCIsdm9pZCAwKSxlJHUoW28kdihcImdlb21ldHJ5VHlwZVwiKV0sZCQ2LnByb3RvdHlwZSxcIndyaXRlR2VvbWV0cnlUeXBlXCIsbnVsbCksZSR1KFt5JHIoe3R5cGU6Qm9vbGVhbixqc29uOnt3cml0ZTp7b3ZlcnJpZGVQb2xpY3k6ZT0+KHtlbmFibGVkOmV9KX19fSldLGQkNi5wcm90b3R5cGUsXCJoYXNNXCIsdm9pZCAwKSxlJHUoW3kkcih7dHlwZTpCb29sZWFuLGpzb246e3dyaXRlOntvdmVycmlkZVBvbGljeTplPT4oe2VuYWJsZWQ6ZX0pfX19KV0sZCQ2LnByb3RvdHlwZSxcImhhc1pcIix2b2lkIDApLGUkdShbeSRyKHt0eXBlczppJEYsanNvbjp7d3JpdGU6ITB9fSldLGQkNi5wcm90b3R5cGUsXCJxdWVyeUdlb21ldHJ5XCIsdm9pZCAwKSxlJHUoW2UkQyhcInF1ZXJ5R2VvbWV0cnlcIildLGQkNi5wcm90b3R5cGUsXCJyZWFkUXVlcnlHZW9tZXRyeVwiLG51bGwpLGUkdShbeSRyKHt0eXBlOmskNCxqc29uOnt3cml0ZTohMH19KV0sZCQ2LnByb3RvdHlwZSxcInNwYXRpYWxSZWZlcmVuY2VcIix2b2lkIDApLGUkdShbbyR2KFwic3BhdGlhbFJlZmVyZW5jZVwiKV0sZCQ2LnByb3RvdHlwZSxcIndyaXRlU3BhdGlhbFJlZmVyZW5jZVwiLG51bGwpLGUkdShbeSRyKHtqc29uOnt3cml0ZTohMH19KV0sZCQ2LnByb3RvdHlwZSxcInRyYW5zZm9ybVwiLHZvaWQgMCksZCQ2PWUkdShbaSRYKFwiZXNyaS50YXNrcy5zdXBwb3J0LkZlYXR1cmVTZXRcIildLGQkNiksZCQ2LnByb3RvdHlwZS50b0pTT04uaXNEZWZhdWx0VG9KU09OPSEwLGQkNnx8KGQkNj17fSk7dmFyIGckMT1kJDY7XG5cbmNvbnN0IEZlYXR1cmVTZXQgPSAvKiNfX1BVUkVfXyovT2JqZWN0LmZyZWV6ZSh7XG4gICAgX19wcm90b19fOiBudWxsLFxuICAgICdkZWZhdWx0JzogZyQxXG59KTtcblxuLyoqXHJcbiAqIFN0dWR5IGFyZWEgZGVmaW5lZCBieSBhIGZlYXR1cmUgc2V0LlxyXG4gKi9cclxuY2xhc3MgRmVhdHVyZVNldFN0dWR5QXJlYSBleHRlbmRzIFN0dWR5QXJlYSB7XHJcbiAgLyoqXHJcbiAgICogQ2FuIGJlIGNyZWF0ZWQgZnJvbSBhIGpzb24gb2JqZWN0IG9yIGJ5IHBhc3Npbmcgc29tZSBwYXJhbWV0ZXJzIGRpcmVjdGx5LlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZSkge1xyXG4gICAgc3VwZXIoc291cmNlKTtcclxuICAgIGlmIChzb3VyY2UpIHtcclxuICAgICAgaWYgKHNvdXJjZS5mZWF0dXJlU2V0KSB7XHJcbiAgICAgICAgaWYgKHNvdXJjZS5mZWF0dXJlU2V0IGluc3RhbmNlb2YgZyQxKSB7XHJcbiAgICAgICAgICB0aGlzLmZlYXR1cmVTZXQgPSBzb3VyY2UuZmVhdHVyZVNldDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLmZlYXR1cmVTZXQgPSBnJDEuZnJvbUpTT04oc291cmNlLmZlYXR1cmVTZXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICB0b0pTT04oKSB7XHJcbiAgICBjb25zdCBqc29uID0gc3VwZXIudG9KU09OKCk7XHJcbiAgICBqc29uLmZlYXR1cmVTZXQgPSB0aGlzLmZlYXR1cmVTZXQgJiYgdGhpcy5mZWF0dXJlU2V0LnRvSlNPTigpO1xyXG4gICAgcmV0dXJuIGpzb247XHJcbiAgfVxyXG59XG5cbi8qKlxyXG4gKiBTdHVkeSBhcmVhIGRlZmluZWQgYnkgYSBnZW9tZXRyeS5cclxuICovXHJcbmNvbnN0IFBSRUNJU0lPTiA9IDEwO1xyXG5mdW5jdGlvbiBfcHJvY2Vzc1BvaW50cyhwb2ludHMpIHtcclxuICBwb2ludHMuZm9yRWFjaCgocG9pbnQpID0+IHtcclxuICAgIHBvaW50WzBdID0gcGFyc2VGbG9hdChwb2ludFswXS50b0ZpeGVkKFBSRUNJU0lPTikpO1xyXG4gICAgcG9pbnRbMV0gPSBwYXJzZUZsb2F0KHBvaW50WzFdLnRvRml4ZWQoUFJFQ0lTSU9OKSk7XHJcbiAgfSk7XHJcbn1cclxuY2xhc3MgR2VvbWV0cnlTdHVkeUFyZWEgZXh0ZW5kcyBTdHVkeUFyZWEge1xyXG4gIC8qKlxyXG4gICAqIENhbiBiZSBjcmVhdGVkIGZyb20gYSBqc29uIG9iamVjdCBvciBieSBwYXNzaW5nIHNvbWUgcGFyYW1ldGVycyBkaXJlY3RseS5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2UpIHtcclxuICAgIHN1cGVyKHNvdXJjZSk7XHJcbiAgICBpZiAoc291cmNlKSB7XHJcbiAgICAgIGlmIChzb3VyY2UuZ2VvbWV0cnkpIHtcclxuICAgICAgICBpZiAoc291cmNlLmdlb21ldHJ5IGluc3RhbmNlb2YgYyRPKSB7XHJcbiAgICAgICAgICB0aGlzLmdlb21ldHJ5ID0gc291cmNlLmdlb21ldHJ5O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuZ2VvbWV0cnkgPSBwJFEoc291cmNlLmdlb21ldHJ5KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgZ2V0R2VvbVR5cGUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5nZW9tZXRyeS50eXBlO1xyXG4gIH1cclxuICB0b0pTT04oKSB7XHJcbiAgICBjb25zdCBqc29uID0gc3VwZXIudG9KU09OKCk7XHJcbiAgICBqc29uLmdlb21ldHJ5ID0gdGhpcy5nZW9tZXRyeSAmJiB0aGlzLmdlb21ldHJ5LnRvSlNPTigpO1xyXG4gICAgY29uc3QgZ2VvbWV0cnkgPSBqc29uLmdlb21ldHJ5O1xyXG4gICAgLy8gU29tZSBudW1iZXIgZG8gbm90IGdldCB1c2VkIGNvcnJlY3RseSBpbiBDaHJvbWUgJiBGRiwgZS5nLiBOdW1iZXJzIDMzLjg2MTI1MjM3MjU5OTM0NSBvciAzMy44NjEyNTIzNzI1OTkzNDdcclxuICAgIC8vIGFwcGVhciB0byBiZSAzMy44NjEyNTIzNzI1OTkzNDYgaW4gdGhlIHJ1biB0aW1lLlxyXG4gICAgLy8gVGhpcyBiZWNvbWVzIGEgcHJvYmxlbSB3aGVuIHVzaW5nIGtleXMgYWNjcm9zcyBkaWZmZXJlbnQgYnJvd2VycyB0aGF0IG1pZ2h0IHdvcmsgd2l0aCBudW1iZXJzIGRpZmZlcmVudGx5LlxyXG4gICAgLy8gbmVlZCB0byByZWR1Y2UgdGhlIHByZWNpc2lvbiBvZiBwb2ludHMgaW4gZ2VvbWV0cnlcclxuICAgIGlmIChnZW9tZXRyeSkge1xyXG4gICAgICAvLyBtdWx0aXBvaW50XHJcbiAgICAgIGlmIChnZW9tZXRyeS5wb2ludHMpIHtcclxuICAgICAgICBfcHJvY2Vzc1BvaW50cyhnZW9tZXRyeS5wb2ludHMpO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIHBvbHlsaW5lXHJcbiAgICAgIGVsc2UgaWYgKGdlb21ldHJ5LnBhdGhzKSB7XHJcbiAgICAgICAgZ2VvbWV0cnkucGF0aHMuZm9yRWFjaChfcHJvY2Vzc1BvaW50cyk7XHJcbiAgICAgIH1cclxuICAgICAgLy8gcG9seWdvblxyXG4gICAgICBlbHNlIGlmIChnZW9tZXRyeS5yaW5ncykge1xyXG4gICAgICAgIGdlb21ldHJ5LnJpbmdzLmZvckVhY2goX3Byb2Nlc3NQb2ludHMpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4ganNvbjtcclxuICB9XHJcbn1cblxuLyoqXHJcbiAqIFN0dWR5IGFyZWEgZGVmaW5lZCBieSBhIHN0YW5kYXJkIGdlb2dyYXBoeS5cclxuICovXHJcbmNsYXNzIFN0YW5kYXJkR2VvZ3JhcGh5U3R1ZHlBcmVhIGV4dGVuZHMgU3R1ZHlBcmVhIHtcclxuICAvKipcclxuICAgKiBDYW4gYmUgY3JlYXRlZCBmcm9tIGEganNvbiBvYmplY3Qgb3IgYnkgcGFzc2luZyBzb21lIHBhcmFtZXRlcnMgZGlyZWN0bHkuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlKSB7XHJcbiAgICBzdXBlcihzb3VyY2UpO1xyXG4gICAgaWYgKHNvdXJjZSkge1xyXG4gICAgICBjb25zdCBjb3VudHJ5SUQgPSBzb3VyY2Uuc291cmNlQ291bnRyeSB8fCBzb3VyY2UuY291bnRyeUlEO1xyXG4gICAgICBpZiAoY291bnRyeUlEKSB7XHJcbiAgICAgICAgdGhpcy5jb3VudHJ5SUQgPSBjb3VudHJ5SUQ7XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgbGF5ZXIgPSBzb3VyY2UubGF5ZXIgfHwgc291cmNlLmdlb2dyYXBoeUxheWVySUQ7XHJcbiAgICAgIGlmIChsYXllcikge1xyXG4gICAgICAgIHRoaXMuZ2VvZ3JhcGh5TGF5ZXJJRCA9IGxheWVyO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChzb3VyY2UuaWRzKSB7XHJcbiAgICAgICAgdGhpcy5pZHMgPSBzb3VyY2UuaWRzO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIGdldEdlb21UeXBlKCkge1xyXG4gICAgcmV0dXJuIFwicG9seWdvblwiO1xyXG4gIH1cclxuICB0b0pTT04oKSB7XHJcbiAgICBjb25zdCBqc29uID0gc3VwZXIudG9KU09OKCk7XHJcbiAgICBpZiAodGhpcy5jb3VudHJ5SUQpIHtcclxuICAgICAganNvbi5zb3VyY2VDb3VudHJ5ID0gdGhpcy5jb3VudHJ5SUQ7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5nZW9ncmFwaHlMYXllcklEKSB7XHJcbiAgICAgIGpzb24ubGF5ZXIgPSB0aGlzLmdlb2dyYXBoeUxheWVySUQ7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5pZHMpIHtcclxuICAgICAganNvbi5pZHMgPSB0aGlzLmlkcy5zbGljZSgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGpzb247XHJcbiAgfVxyXG59XG5cbi8vIGdlb2VucmljaG1lbnQudGFza3NcclxuLyoqXHJcbiAqIFV0aWxpdHkgZnVuY3Rpb24gdG8gZGVzZXJpYWxpemUgc3R1ZHkgYXJlYSBmcm9tIEpTT05cclxuICovXHJcbmNvbnN0IHN0dWR5QXJlYUZyb21Kc29uID0gZnVuY3Rpb24gKGpzb24pIHtcclxuICBpZiAoanNvbi5nZW9tZXRyeSkge1xyXG4gICAgcmV0dXJuIG5ldyBHZW9tZXRyeVN0dWR5QXJlYShqc29uKTtcclxuICB9XHJcbiAgaWYgKGpzb24uZmVhdHVyZVNldCkge1xyXG4gICAgcmV0dXJuIG5ldyBGZWF0dXJlU2V0U3R1ZHlBcmVhKGpzb24pO1xyXG4gIH1cclxuICBpZiAoanNvbi5hZGRyZXNzKSB7XHJcbiAgICByZXR1cm4gbmV3IEFkZHJlc3NTdHVkeUFyZWEoanNvbik7XHJcbiAgfVxyXG4gIGlmIChqc29uLmxheWVyKSB7XHJcbiAgICByZXR1cm4gbmV3IFN0YW5kYXJkR2VvZ3JhcGh5U3R1ZHlBcmVhKGpzb24pO1xyXG4gIH1cclxuICByZXR1cm4gbnVsbDtcclxufTtcblxuZnVuY3Rpb24gaXNHZW9tZXRyeVN0dWR5QXJlYShzdHVkeUFyZWEpIHtcclxuICByZXR1cm4gISFzdHVkeUFyZWEuZ2VvbWV0cnk7XHJcbn1cblxuLyoqXHJcbiAqIEJhc2UgY2xhc3MgZm9yIHBhcmFtZXRlcnMgb2YgR2VvZW5yaWNobWVudFRhc2suZW5yaWNoIGFuZCBHZW9lbnJpY2htZW50VGFzay5jcmVhdGVSZXBvcnQgbWV0aG9kcy5cclxuICovXHJcbmNsYXNzIEVucmljaFBhcmFtZXRlcnNCYXNlIHtcclxuICAvKipcclxuICAgKiBDYW4gYmUgY3JlYXRlZCBmcm9tIGEganNvbiBvYmplY3Qgb3IgYnkgcGFzc2luZyBzb21lIHBhcmFtZXRlcnMgZGlyZWN0bHkuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioc291cmNlKSB7XHJcbiAgICB0aGlzLnN0dWR5QXJlYXMgPSBbXTtcclxuICAgIGlmICghc291cmNlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmIChzb3VyY2Uuc3R1ZHlBcmVhcykge1xyXG4gICAgICBsZXQgaW5TUjtcclxuICAgICAgaWYgKHNvdXJjZS5pblNSKSB7XHJcbiAgICAgICAgaW5TUiA9IHNvdXJjZS5pblNSO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IHN0dWR5QXJlYXMgPSBzb3VyY2Uuc3R1ZHlBcmVhcztcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHVkeUFyZWFzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3Qgc3R1ZHlBcmVhID0gc3R1ZHlBcmVhRnJvbUpzb24oc3R1ZHlBcmVhc1tpXSk7XHJcbiAgICAgICAgaWYgKGluU1IgJiYgaXNHZW9tZXRyeVN0dWR5QXJlYShzdHVkeUFyZWEpKSB7XHJcbiAgICAgICAgICBzdHVkeUFyZWEuZ2VvbWV0cnkuc3BhdGlhbFJlZmVyZW5jZSA9IG5ldyBrJDQoaW5TUik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc3R1ZHlBcmVhcy5wdXNoKHN0dWR5QXJlYSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChzb3VyY2Uuc3R1ZHlBcmVhc09wdGlvbnMpIHtcclxuICAgICAgdGhpcy5zdHVkeUFyZWFPcHRpb25zID0gc3R1ZHlBcmVhT3B0aW9uc0Zyb21Kc29uKHNvdXJjZS5zdHVkeUFyZWFzT3B0aW9ucyk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2Uuc3R1ZHlBcmVhT3B0aW9ucykge1xyXG4gICAgICBpZiAoc291cmNlLnN0dWR5QXJlYU9wdGlvbnMgaW5zdGFuY2VvZiBTdHVkeUFyZWFPcHRpb25zKSB7XHJcbiAgICAgICAgdGhpcy5zdHVkeUFyZWFPcHRpb25zID0gc291cmNlLnN0dWR5QXJlYU9wdGlvbnM7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgdGhpcy5zdHVkeUFyZWFPcHRpb25zID0gc3R1ZHlBcmVhT3B0aW9uc0Zyb21Kc29uKHNvdXJjZS5zdHVkeUFyZWFPcHRpb25zKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgdXNlZGF0YSA9IHNvdXJjZS51c2VEYXRhO1xyXG4gICAgaWYgKHVzZWRhdGEpIHtcclxuICAgICAgaWYgKHVzZWRhdGEuc291cmNlQ291bnRyeSkge1xyXG4gICAgICAgIHRoaXMuY291bnRyeUlEID0gdXNlZGF0YS5zb3VyY2VDb3VudHJ5O1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh1c2VkYXRhLmhpZXJhcmNoeSkge1xyXG4gICAgICAgIHRoaXMuaGllcmFyY2h5ID0gdXNlZGF0YS5oaWVyYXJjaHk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBpZiAoc291cmNlLmNvdW50cnlJRCkge1xyXG4gICAgICAgIHRoaXMuY291bnRyeUlEID0gc291cmNlLmNvdW50cnlJRDtcclxuICAgICAgfVxyXG4gICAgICBpZiAoc291cmNlLmhpZXJhcmNoeSkge1xyXG4gICAgICAgIHRoaXMuaGllcmFyY2h5ID0gc291cmNlLmhpZXJhcmNoeTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICB0b0pTT04oKSB7XHJcbiAgICBjb25zdCBqc29uID0ge307XHJcbiAgICBjb25zdCBzdHVkeUFyZWFzID0gW107XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc3R1ZHlBcmVhcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBjb25zdCBzdHVkeUFyZWEgPSB0aGlzLnN0dWR5QXJlYXNbaV07XHJcbiAgICAgIHN0dWR5QXJlYXMucHVzaChzdHVkeUFyZWEudG9KU09OKCkpO1xyXG4gICAgfVxyXG4gICAgLy9UTyBETzogdXNlIGluU1IgaWYgYWxsIHN0dWR5IGFyZWFzIGFyZSBpbiB0aGUgc2FtZSBzcGF0aWFsIHJlZmVyZW5jZVxyXG4gICAgLy9pZiAoaW5TUikge1xyXG4gICAgLy8gICAganNvbi5pblNSID0gaW5TUjtcclxuICAgIC8vfVxyXG4gICAgaWYgKHN0dWR5QXJlYXMubGVuZ3RoID4gMCkge1xyXG4gICAgICBqc29uLnN0dWR5QXJlYXMgPSBzdHVkeUFyZWFzO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuc3R1ZHlBcmVhT3B0aW9ucykge1xyXG4gICAgICBqc29uLnN0dWR5QXJlYXNPcHRpb25zID0gdGhpcy5zdHVkeUFyZWFPcHRpb25zLnRvSlNPTigpO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuY291bnRyeUlEIHx8IHRoaXMuaGllcmFyY2h5KSB7XHJcbiAgICAgIGNvbnN0IHVzZWRhdGEgPSB7fTtcclxuICAgICAgaWYgKHRoaXMuY291bnRyeUlEKSB7XHJcbiAgICAgICAgdXNlZGF0YS5zb3VyY2VDb3VudHJ5ID0gdGhpcy5jb3VudHJ5SUQ7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMuaGllcmFyY2h5KSB7XHJcbiAgICAgICAgdXNlZGF0YS5oaWVyYXJjaHkgPSB0aGlzLmhpZXJhcmNoeTtcclxuICAgICAgfVxyXG4gICAgICBqc29uLnVzZURhdGEgPSB1c2VkYXRhO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGpzb247XHJcbiAgfVxyXG59XG5cbmNsYXNzIEludGVyc2VjdGluZ0dlb2dyYXBoeSB7XHJcbiAgLyoqXHJcbiAgICogQ2FuIGJlIGNyZWF0ZWQgZnJvbSBhIGpzb24gb2JqZWN0IG9yIGJ5IHBhc3Npbmcgc29tZSBwYXJhbWV0ZXJzIGRpcmVjdGx5LlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZSkge1xyXG4gICAgdGhpcy5nZW9tZXRyeVR5cGUgPSBcImVzcmlHZW9tZXRyeVBvaW50XCI7XHJcbiAgICB0aGlzLnNwYXRpYWxSZWwgPSBcImVzcmlTcGF0aWFsUmVsSW50ZXJzZWN0c1wiO1xyXG4gICAgaWYgKHNvdXJjZSkge1xyXG4gICAgICB0aGlzLm5hbWUgPSBzb3VyY2UubmFtZSB8fCBudWxsO1xyXG4gICAgICB0aGlzLm91dEZpZWxkcyA9IHNvdXJjZS5vdXRGaWVsZHMgfHwgbnVsbDtcclxuICAgICAgaWYgKHNvdXJjZS5pbnRlcnNlY3Rpb25JbmZvKSB7XHJcbiAgICAgICAgaWYgKHNvdXJjZS5pbnRlcnNlY3Rpb25JbmZvLmdlb21ldHJ5VHlwZSkge1xyXG4gICAgICAgICAgdGhpcy5nZW9tZXRyeVR5cGUgPSBzb3VyY2UuaW50ZXJzZWN0aW9uSW5mby5nZW9tZXRyeVR5cGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzb3VyY2UuaW50ZXJzZWN0aW9uSW5mby5zcGF0aWFsUmVsKSB7XHJcbiAgICAgICAgICB0aGlzLnNwYXRpYWxSZWwgPSBzb3VyY2UuaW50ZXJzZWN0aW9uSW5mby5zcGF0aWFsUmVsO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBpZiAoc291cmNlLmdlb21ldHJ5VHlwZSkge1xyXG4gICAgICAgICAgdGhpcy5nZW9tZXRyeVR5cGUgPSBzb3VyY2UuZ2VvbWV0cnlUeXBlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc291cmNlLnNwYXRpYWxSZWwpIHtcclxuICAgICAgICAgIHRoaXMuc3BhdGlhbFJlbCA9IHNvdXJjZS5zcGF0aWFsUmVsO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICB0b0pTT04oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLm5hbWUsXHJcbiAgICAgIG91dEZpZWxkczogdGhpcy5vdXRGaWVsZHMsXHJcbiAgICAgIGludGVyc2VjdGlvbkluZm86IHtcclxuICAgICAgICBnZW9tZXRyeVR5cGU6IHRoaXMuZ2VvbWV0cnlUeXBlLFxyXG4gICAgICAgIHNwYXRpYWxSZWw6IHRoaXMuc3BhdGlhbFJlbFxyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH1cclxufVxuXG5jbGFzcyBTdGFuZGFyZEludGVyc2VjdGluZ0dlb2dyYXBoeSBleHRlbmRzIEludGVyc2VjdGluZ0dlb2dyYXBoeSB7XHJcbiAgLyoqXHJcbiAgICogQ2FuIGJlIGNyZWF0ZWQgZnJvbSBhIGpzb24gb2JqZWN0IG9yIGJ5IHBhc3Npbmcgc29tZSBwYXJhbWV0ZXJzIGRpcmVjdGx5LlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZSkge1xyXG4gICAgc3VwZXIoc291cmNlKTtcclxuICAgIGlmIChzb3VyY2UpIHtcclxuICAgICAgdGhpcy5nZW9ncmFwaHlMYXllcklEID0gc291cmNlLmdlb2dyYXBoeUxheWVyIHx8IHNvdXJjZS5nZW9ncmFwaHlMYXllcklEIHx8IG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHRvSlNPTigpIHtcclxuICAgIGNvbnN0IGpzb24gPSBzdXBlci50b0pTT04oKTtcclxuICAgIGpzb24uZ2VvZ3JhcGh5VHlwZSA9IFwic3RhbmRhcmRcIjtcclxuICAgIGpzb24uZ2VvZ3JhcGh5TGF5ZXIgPSB0aGlzLmdlb2dyYXBoeUxheWVySUQ7XHJcbiAgICByZXR1cm4ganNvbjtcclxuICB9XHJcbn1cblxuLyoqXHJcbiAqIFJlcHJlc2VudHMgR2VvZW5yaWNobWVudFRhc2suZW5yaWNoIHBhcmFtZXRlcnMuXHJcbiAqL1xyXG5jbGFzcyBFbnJpY2hQYXJhbWV0ZXJzIGV4dGVuZHMgRW5yaWNoUGFyYW1ldGVyc0Jhc2Uge1xyXG4gIC8qKlxyXG4gICAqIENhbiBiZSBjcmVhdGVkIGZyb20gYSBqc29uIG9iamVjdCBvciBieSBwYXNzaW5nIHNvbWUgcGFyYW1ldGVycyBkaXJlY3RseS5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2UpIHtcclxuICAgIHN1cGVyKHNvdXJjZSk7XHJcbiAgICAvKipcclxuICAgICAqIERldGVybWluZXMgd2hldGhlciByZXNwb25zZSB3aWxsIGFsc28gaW5jbHVkZSBhY3R1YWwgc3R1ZHkgYXJlYSBnZW9tZXRyeS5cclxuICAgICAqIEZvciBleGFtcGxlLCBpZiBpbnB1dCBzdHVkeSBhcmVhIGlzIGEgbGluZSwgdGhlIHJlc3BvbnNlIHdpbGwgaW5sdWRlIGJ1ZmZlciBwb2x5Z29uIGJ1aWx0IGFyb3VuZCB0aGUgbGluZS4gRGVmYXVsdHMgdG8gZmFsc2UuXHJcbiAgICAgKi9cclxuICAgIHRoaXMucmV0dXJuR2VvbWV0cnkgPSBmYWxzZTtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHByaWNlIGZvciB1c2luZyB0aGUgXCJFbnJpY2hcIiBtZXRob2QgdmFyaWVzIGFjY29yZGluZyB0byB3aGV0aGVyIHRoZSBkYXRhIHJldHVybmVkIGlzIGJlaW5nIHBlcnNpc3RlZCwgaS5lLiBiZWluZyBzdG9yZWQsIG9yIHdoZXRoZXIgaXQgaXMgbWVyZWx5IGJlaW5nIHVzZWQgaW4gYW4gaW50ZXJhY3RpdmUgY29udGV4dCBhbmQgaXMgZGlzY2FyZGVkIGFmdGVyIGJlaW5nIHZpZXdlZC4gSWYgdGhlIGRhdGEgaXMgYmVpbmcgc3RvcmVkLCB0aGUgdGVybXMgb2YgdXNlIGZvciB0aGUgR2VvRW5yaWNobWVudCBzZXJ2aWNlIHJlcXVpcmUgdGhhdCB5b3Ugc3BlY2lmeSB0aGUgXCJmb3JTdG9yYWdlXCIgcGFyYW1ldGVyIHRvIHRydWUuXHJcbiAgICAgKi9cclxuICAgIHRoaXMuZm9yU3RvcmFnZSA9IHRydWU7XHJcbiAgICB0aGlzLnZhcmlhYmxlcyA9IFtdO1xyXG4gICAgaWYgKHNvdXJjZSkge1xyXG4gICAgICB0aGlzLnZhcmlhYmxlcyA9IHNvdXJjZS5hbmFseXNpc1ZhcmlhYmxlcyB8fCBzb3VyY2UudmFyaWFibGVzIHx8IG51bGw7XHJcbiAgICAgIGlmIChzb3VyY2UucmV0dXJuR2VvbWV0cnkpIHtcclxuICAgICAgICB0aGlzLnJldHVybkdlb21ldHJ5ID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoc291cmNlLm91dFNSKSB7XHJcbiAgICAgICAgdGhpcy5vdXRTUiA9IG5ldyBrJDQoc291cmNlLm91dFNSKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoc291cmNlLmZvclN0b3JhZ2UpIHtcclxuICAgICAgICB0aGlzLmZvclN0b3JhZ2UgPSBzb3VyY2UuZm9yU3RvcmFnZTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoc291cmNlLmludGVyc2VjdGluZ0dlb2dyYXBoaWVzKSB7XHJcbiAgICAgICAgdGhpcy5pbnRlcnNlY3RpbmdHZW9ncmFwaGllcyA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc291cmNlLmludGVyc2VjdGluZ0dlb2dyYXBoaWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBjb25zdCBpbnRHZW8gPSBzb3VyY2UuaW50ZXJzZWN0aW5nR2VvZ3JhcGhpZXNbaV07XHJcbiAgICAgICAgICBpZiAoaW50R2VvLmdlb2dyYXBoeVR5cGUgPT09IFwic3RhbmRhcmRcIikge1xyXG4gICAgICAgICAgICB0aGlzLmludGVyc2VjdGluZ0dlb2dyYXBoaWVzLnB1c2gobmV3IFN0YW5kYXJkSW50ZXJzZWN0aW5nR2VvZ3JhcGh5KGludEdlbykpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSBpZiAoaW50R2VvLmdlb2dyYXBoeVR5cGUgPT09IFwiZXh0ZXJuYWxcIikge1xyXG4gICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAvL1RPIERPOiBjb250cnVjdCBcImV4dGVybmFsXCIgaW50ZXJzZWN0aW5nIGdlb3MgaGVyZVxyXG4gICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgaW1wbGVtZW50ZWRcIik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIHRvSlNPTigpIHtcclxuICAgIGNvbnN0IGpzb24gPSBzdXBlci50b0pTT04oKTtcclxuICAgIGpzb24uYW5hbHlzaXNWYXJpYWJsZXMgPSB0aGlzLnZhcmlhYmxlcztcclxuICAgIGlmICh0aGlzLnJldHVybkdlb21ldHJ5KSB7XHJcbiAgICAgIGpzb24ucmV0dXJuR2VvbWV0cnkgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMub3V0U1IpIHtcclxuICAgICAganNvbi5vdXRTUiA9IHRoaXMub3V0U1IudG9KU09OKCk7XHJcbiAgICB9XHJcbiAgICBpZiAoIXRoaXMuZm9yU3RvcmFnZSkge1xyXG4gICAgICBqc29uLmZvclN0b3JhZ2UgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmludGVyc2VjdGluZ0dlb2dyYXBoaWVzKSB7XHJcbiAgICAgIGpzb24uaW50ZXJzZWN0aW5nR2VvZ3JhcGhpZXMgPSBbXTtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmludGVyc2VjdGluZ0dlb2dyYXBoaWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAganNvbi5pbnRlcnNlY3RpbmdHZW9ncmFwaGllcy5wdXNoKHRoaXMuaW50ZXJzZWN0aW5nR2VvZ3JhcGhpZXNbaV0udG9KU09OKCkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4ganNvbjtcclxuICB9XHJcbn1cblxuLyoqXHJcbiAqIEFkZHMgc29tZSBwcm9wZXJ0aWVzIHRvIHRoZSBzdGFuZGFyZCBGZWF0dXJlU2V0IGNsYXNzIHRoYXQgY2FtZSBmcm9tIGdlb2VucmljaG1lbnQuZW5yaWNoIGVuZHBvaW50LlxyXG4gKi9cclxuZnVuY3Rpb24gZmllbGRUeXBlRnJvbUpTT04odHlwZSkge1xyXG4gIHJldHVybiAodHlwZSAmJiB0eXBlLnJlcGxhY2UoXCJlc3JpRmllbGRUeXBlXCIsIFwiXCIpLnRvTG93ZXJDYXNlKCkpO1xyXG59XHJcbmZ1bmN0aW9uIGdlb21UeXBlRnJvbUpTT04odHlwZSkge1xyXG4gIHJldHVybiAodHlwZSAmJiB0eXBlLnJlcGxhY2UoXCJlc3JpR2VvbWV0cnlcIiwgXCJcIikudG9Mb3dlckNhc2UoKSk7XHJcbn1cclxuZnVuY3Rpb24gZmllbGRUeXBlVG9KU09OKHR5cGUpIHtcclxuICByZXR1cm4gKHR5cGUgJiYgKFwiZXNyaUZpZWxkVHlwZVwiICsgdHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHR5cGUuc3Vic3RyKDEpKSk7XHJcbn1cclxuZnVuY3Rpb24gZ2VvbVR5cGVUb0pTT04odHlwZSkge1xyXG4gIHJldHVybiAodHlwZSAmJiAoXCJlc3JpR2VvbWV0cnlcIiArIHR5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB0eXBlLnN1YnN0cigxKSkpO1xyXG59XHJcbi8qXHJcbiAgICBGZWF0dXJlIFNldCBFeGFtcGxlIChUaGlzIGlzIGhvdyBHRS9FbnJpY2ggcmV0dXJucyBpdCBub3cpOlxyXG4gIHtcclxuICAgICAgICBcImZpZWxkQWxpYXNlc1wiOiB7XHJcbiAgICAgICAgICBcIlRPUDFOVU1cIjogXCJUb3AgMSBTZWdtZW50IE51bWJlclwiLFxyXG4gICAgICAgICAgXCJUT1AxTkFNRVwiOiBcIlRvcCAxIFNlZ21lbnQgTmFtZVwiLFxyXG4gICAgICAgICAgICAuLi5cclxuICAgICAgICB9LFxyXG4gICAgICAgIFwiZmllbGRzXCI6IFt7XHJcbiAgICAgICAgICAgIFwibmFtZVwiOiBcIlRPUDFOVU1cIixcclxuICAgICAgICAgICAgXCJ0eXBlXCI6IFwiZXNyaUZpZWxkVHlwZURvdWJsZVwiLFxyXG4gICAgICAgICAgICBcImFsaWFzXCI6IFwiVG9wIDEgU2VnbWVudCBOdW1iZXJcIixcclxuICAgICAgICAgICAgXCJmdWxsTmFtZVwiOiBcIlRhcGVzdHJ5TkVXLlRPUDFOVU1cIixcclxuICAgICAgICAgICAgXCJjb21wb25lbnRcIjogXCJkZW1vZ3JhcGhpY3NcIixcclxuICAgICAgICAgICAgXCJkZWNpbWFsc1wiOiAwLFxyXG4gICAgICAgICAgICBcInVuaXRzXCI6IFwiY291bnRcIlxyXG4gICAgICAgICAgfSwge1xyXG4gICAgICAgICAgICBcIm5hbWVcIjogXCJUT1AxTkFNRVwiLFxyXG4gICAgICAgICAgICBcInR5cGVcIjogXCJlc3JpRmllbGRUeXBlU3RyaW5nXCIsXHJcbiAgICAgICAgICAgIFwiYWxpYXNcIjogXCJUb3AgMSBTZWdtZW50IE5hbWVcIixcclxuICAgICAgICAgICAgXCJmdWxsTmFtZVwiOiBcIlRhcGVzdHJ5TkVXLlRPUDFOQU1FXCIsXHJcbiAgICAgICAgICAgIFwiY29tcG9uZW50XCI6IFwiZGVtb2dyYXBoaWNzXCIsXHJcbiAgICAgICAgICAgIFwibGVuZ3RoXCI6IDEwMCxcclxuICAgICAgICAgICAgXCJ1bml0c1wiOiBcIm90aGVyXCJcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC4uLlxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgXCJmZWF0dXJlc1wiOiBbe1xyXG4gICAgICAgICAgICBcImF0dHJpYnV0ZXNcIjoge1xyXG4gICAgICAgICAgICAgIFwiVE9QMU5VTVwiOiAyOCxcclxuICAgICAgICAgICAgICBcIlRPUDFOQU1FXCI6IFwiVXJiYW4gVmlsbGFnZXNcIixcclxuICAgICAgICAgICAgICAgICAgICAuLi5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIF1cclxuICAgIH1cclxuKi9cclxuY2xhc3MgR0VGZWF0dXJlU2V0IHtcclxuICBjb25zdHJ1Y3Rvcihqc29uKSB7XHJcbiAgICBpZiAoIWpzb24pIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5maWVsZHMgPVxyXG4gICAgICAoanNvbi5maWVsZHMgJiZcclxuICAgICAgICBqc29uLmZpZWxkcy5tYXAoKGZpZWxkKSA9PiAoe1xyXG4gICAgICAgICAgbmFtZTogZmllbGQubmFtZSxcclxuICAgICAgICAgIHR5cGU6IGZpZWxkVHlwZUZyb21KU09OKGZpZWxkLnR5cGUpLFxyXG4gICAgICAgICAgYWxpYXM6IGZpZWxkLmFsaWFzLFxyXG4gICAgICAgICAgZGVzY3JpcHRpb246IGZpZWxkLmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgbGVuZ3RoOiBmaWVsZC5sZW5ndGgsXHJcbiAgICAgICAgICAvLyBhZGRpdGlvbmFsIHByb3BlcnRpZXMgZnJvbSBHZW9lbnJpY2htZW50XHJcbiAgICAgICAgICB1bml0czogZmllbGQudW5pdHMsXHJcbiAgICAgICAgICBkZWNpbWFsczogZmllbGQuZGVjaW1hbHMsXHJcbiAgICAgICAgICBmdWxsTmFtZTogZmllbGQuZnVsbE5hbWVcclxuICAgICAgICB9KSkpIHx8XHJcbiAgICAgICAgW107XHJcbiAgICB0aGlzLmZlYXR1cmVzID1cclxuICAgICAgKGpzb24uZmVhdHVyZXMgJiZcclxuICAgICAgICBqc29uLmZlYXR1cmVzLm1hcCgoZkpzb24pID0+IHtcclxuICAgICAgICAgIGlmIChmSnNvbi5nZW9tZXRyeSkge1xyXG4gICAgICAgICAgICBmSnNvbi5nZW9tZXRyeS5zcGF0aWFsUmVmZXJlbmNlID0ganNvbi5zcGF0aWFsUmVmZXJlbmNlICYmIHkkdihqc29uLnNwYXRpYWxSZWZlcmVuY2UpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIG5ldyBuJDMoe1xyXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiBmSnNvbi5hdHRyaWJ1dGVzLFxyXG4gICAgICAgICAgICBnZW9tZXRyeTogZkpzb24uZ2VvbWV0cnkgJiYgcCRRKGZKc29uLmdlb21ldHJ5KVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSkpIHx8XHJcbiAgICAgICAgW107XHJcbiAgICB0aGlzLmdlb21ldHJ5VHlwZSA9IGdlb21UeXBlRnJvbUpTT04oanNvbi5nZW9tZXRyeVR5cGUpO1xyXG4gICAgdGhpcy5maWVsZEFsaWFzZXMgPSBqc29uLmZpZWxkQWxpYXNlcztcclxuICAgIHRoaXMuc3BhdGlhbFJlZmVyZW5jZSA9IGpzb24uc3BhdGlhbFJlZmVyZW5jZSAmJiBuZXcgayQ0KGpzb24uc3BhdGlhbFJlZmVyZW5jZSk7XHJcbiAgfVxyXG4gIHRvSlNPTigpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGZpZWxkczogdGhpcy5maWVsZHMubWFwKChmaWVsZCkgPT4gKHtcclxuICAgICAgICBuYW1lOiBmaWVsZC5uYW1lLFxyXG4gICAgICAgIHR5cGU6IGZpZWxkVHlwZVRvSlNPTihmaWVsZC50eXBlKSxcclxuICAgICAgICBhbGlhczogZmllbGQuYWxpYXMsXHJcbiAgICAgICAgZGVzY3JpcHRpb246IGZpZWxkLmRlc2NyaXB0aW9uLFxyXG4gICAgICAgIGxlbmd0aDogZmllbGQubGVuZ3RoLFxyXG4gICAgICAgIC8vIGFkZGl0aW9uYWwgcHJvcGVydGllcyBmcm9tIEdlb2VucmljaG1lbnRcclxuICAgICAgICB1bml0czogZmllbGQudW5pdHMsXHJcbiAgICAgICAgZGVjaW1hbHM6IGZpZWxkLmRlY2ltYWxzLFxyXG4gICAgICAgIGZ1bGxOYW1lOiBmaWVsZC5mdWxsTmFtZVxyXG4gICAgICB9KSksXHJcbiAgICAgIGZlYXR1cmVzOiB0aGlzLmZlYXR1cmVzLm1hcCgoZmVhdHVyZSkgPT4gZmVhdHVyZS50b0pTT04oKSksXHJcbiAgICAgIGdlb21ldHJ5VHlwZTogZ2VvbVR5cGVUb0pTT04odGhpcy5nZW9tZXRyeVR5cGUpLFxyXG4gICAgICBmaWVsZEFsaWFzZXM6IHRoaXMuZmllbGRBbGlhc2VzICYmIHkkdih0aGlzLmZpZWxkQWxpYXNlcyksXHJcbiAgICAgIHNwYXRpYWxSZWZlcmVuY2U6IHRoaXMuc3BhdGlhbFJlZmVyZW5jZSAmJiB0aGlzLnNwYXRpYWxSZWZlcmVuY2UudG9KU09OKClcclxuICAgIH07XHJcbiAgfVxyXG4gIHN0YXRpYyBmcm9tRmllbGQoZmllbGQpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWU6IGZpZWxkLm5hbWUsXHJcbiAgICAgIHR5cGU6IGZpZWxkLnR5cGUsXHJcbiAgICAgIGFsaWFzOiBmaWVsZC5hbGlhcyxcclxuICAgICAgZGVzY3JpcHRpb246IGZpZWxkLmRlc2NyaXB0aW9uLFxyXG4gICAgICBsZW5ndGg6IGZpZWxkLmxlbmd0aFxyXG4gICAgfTtcclxuICB9XHJcbiAgc3RhdGljIHRvRmllbGQoZmllbGQpIHtcclxuICAgIHJldHVybiBuZXcgeSQxKHtcclxuICAgICAgbmFtZTogZmllbGQubmFtZSxcclxuICAgICAgdHlwZTogZmllbGQudHlwZSxcclxuICAgICAgYWxpYXM6IGZpZWxkLmFsaWFzLFxyXG4gICAgICBkZXNjcmlwdGlvbjogZmllbGQuZGVzY3JpcHRpb24sXHJcbiAgICAgIGxlbmd0aDogZmllbGQubGVuZ3RoXHJcbiAgICB9KTtcclxuICB9XHJcbiAgc3RhdGljIGZyb21GZWF0dXJlU2V0KGZzKSB7XHJcbiAgICBpZiAoZnMgaW5zdGFuY2VvZiBHRUZlYXR1cmVTZXQpIHtcclxuICAgICAgcmV0dXJuIGZzO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZ2VGcyA9IG5ldyBHRUZlYXR1cmVTZXQoKTtcclxuICAgIGdlRnMuZmllbGRzID0gZnMuZmllbGRzLm1hcCh0aGlzLmZyb21GaWVsZCkgfHwgW107XHJcbiAgICBnZUZzLmZlYXR1cmVzID0gZnMuZmVhdHVyZXMuc2xpY2UoKTtcclxuICAgIGdlRnMuZ2VvbWV0cnlUeXBlID0gZnMuZ2VvbWV0cnlUeXBlO1xyXG4gICAgZ2VGcy5zcGF0aWFsUmVmZXJlbmNlID0gZnMuc3BhdGlhbFJlZmVyZW5jZTtcclxuICAgIHJldHVybiBnZUZzO1xyXG4gIH1cclxuICBzdGF0aWMgdG9GZWF0dXJlU2V0KGdlRnMpIHtcclxuICAgIGNvbnN0IGZzID0gbmV3IGckMSgpO1xyXG4gICAgZnMuZmllbGRzID0gZ2VGcy5maWVsZHMubWFwKHRoaXMudG9GaWVsZCkgfHwgW107XHJcbiAgICBmcy5mZWF0dXJlcyA9IGdlRnMuZmVhdHVyZXMuc2xpY2UoKTtcclxuICAgIGZzLmdlb21ldHJ5VHlwZSA9IGdlRnMuZ2VvbWV0cnlUeXBlO1xyXG4gICAgZnMuc3BhdGlhbFJlZmVyZW5jZSA9IGdlRnMuc3BhdGlhbFJlZmVyZW5jZTtcclxuICAgIHJldHVybiBmcztcclxuICB9XHJcbn1cblxuLyohXG4gKiBAZXNyaS9hcmNnaXMtaHRtbC1zYW5pdGl6ZXIgLSB2Mi41LjAgLSBNb24gTm92IDA5IDIwMjAgMTE6MDg6MzUgR01ULTA1MDAgKEVhc3Rlcm4gU3RhbmRhcmQgVGltZSlcbiAqIENvcHlyaWdodCAoYykgMjAyMCAtIEVudmlyb25tZW50YWwgU3lzdGVtcyBSZXNlYXJjaCBJbnN0aXR1dGUsIEluYy5cbiAqIEFwYWNoZS0yLjBcbiAqIFxuICoganMteHNzXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTItMjAxNyBab25nbWluIExlaSjpm7flrpfmsJEpIDxsZWl6b25nbWluQGdtYWlsLmNvbT5cbiAqIGh0dHA6Ly91Y2Rvay5jb21cbiAqIE1JVCBMaWNlbnNlLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2xlaXpvbmdtaW4vanMteHNzL2Jsb2IvbWFzdGVyL0xJQ0VOU0UgZm9yIGRldGFpbHNcbiAqIFxuICogTG9kYXNoL2lzUGxhaW5PYmplY3RcbiAqIENvcHlyaWdodCAoYykgSlMgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzIDxodHRwczovL2pzLmZvdW5kYXRpb24vPlxuICogTUlUIExpY2Vuc2UsIHNlZSBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vbG9kYXNoL2xvZGFzaC80LjE3LjEwLW5wbS9MSUNFTlNFIGZvciBkZXRhaWxzXG4gKi9cbi8qKlxuICogbG9kYXNoIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuICogQnVpbGQ6IGBsb2Rhc2ggbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycyA8aHR0cHM6Ly9qcXVlcnkub3JnLz5cbiAqIFJlbGVhc2VkIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cbiAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG4gKiBDb3B5cmlnaHQgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqL1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0VGFnID0gJ1tvYmplY3QgT2JqZWN0XSc7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBob3N0IG9iamVjdCBpbiBJRSA8IDkuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBob3N0IG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc0hvc3RPYmplY3QodmFsdWUpIHtcbiAgLy8gTWFueSBob3N0IG9iamVjdHMgYXJlIGBPYmplY3RgIG9iamVjdHMgdGhhdCBjYW4gY29lcmNlIHRvIHN0cmluZ3NcbiAgLy8gZGVzcGl0ZSBoYXZpbmcgaW1wcm9wZXJseSBkZWZpbmVkIGB0b1N0cmluZ2AgbWV0aG9kcy5cbiAgdmFyIHJlc3VsdCA9IGZhbHNlO1xuICBpZiAodmFsdWUgIT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUudG9TdHJpbmcgIT0gJ2Z1bmN0aW9uJykge1xuICAgIHRyeSB7XG4gICAgICByZXN1bHQgPSAhISh2YWx1ZSArICcnKTtcbiAgICB9IGNhdGNoIChlKSB7fVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHVuYXJ5IGZ1bmN0aW9uIHRoYXQgaW52b2tlcyBgZnVuY2Agd2l0aCBpdHMgYXJndW1lbnQgdHJhbnNmb3JtZWQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHdyYXAuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSB0cmFuc2Zvcm0gVGhlIGFyZ3VtZW50IHRyYW5zZm9ybS5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBvdmVyQXJnKGZ1bmMsIHRyYW5zZm9ybSkge1xuICByZXR1cm4gZnVuY3Rpb24oYXJnKSB7XG4gICAgcmV0dXJuIGZ1bmModHJhbnNmb3JtKGFyZykpO1xuICB9O1xufVxuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgZnVuY1Byb3RvID0gRnVuY3Rpb24ucHJvdG90eXBlLFxuICAgIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgZGVjb21waWxlZCBzb3VyY2Ugb2YgZnVuY3Rpb25zLiAqL1xudmFyIGZ1bmNUb1N0cmluZyA9IGZ1bmNQcm90by50b1N0cmluZztcblxuLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG52YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqIFVzZWQgdG8gaW5mZXIgdGhlIGBPYmplY3RgIGNvbnN0cnVjdG9yLiAqL1xudmFyIG9iamVjdEN0b3JTdHJpbmcgPSBmdW5jVG9TdHJpbmcuY2FsbChPYmplY3QpO1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcbiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovXG52YXIgZ2V0UHJvdG90eXBlID0gb3ZlckFyZyhPYmplY3QuZ2V0UHJvdG90eXBlT2YsIE9iamVjdCk7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuIEEgdmFsdWUgaXMgb2JqZWN0LWxpa2UgaWYgaXQncyBub3QgYG51bGxgXG4gKiBhbmQgaGFzIGEgYHR5cGVvZmAgcmVzdWx0IG9mIFwib2JqZWN0XCIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdExpa2Uoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc09iamVjdExpa2UobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcbiAgcmV0dXJuICEhdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgcGxhaW4gb2JqZWN0LCB0aGF0IGlzLCBhbiBvYmplY3QgY3JlYXRlZCBieSB0aGVcbiAqIGBPYmplY3RgIGNvbnN0cnVjdG9yIG9yIG9uZSB3aXRoIGEgYFtbUHJvdG90eXBlXV1gIG9mIGBudWxsYC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuOC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHBsYWluIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBmdW5jdGlvbiBGb28oKSB7XG4gKiAgIHRoaXMuYSA9IDE7XG4gKiB9XG4gKlxuICogXy5pc1BsYWluT2JqZWN0KG5ldyBGb28pO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzUGxhaW5PYmplY3QoWzEsIDIsIDNdKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc1BsYWluT2JqZWN0KHsgJ3gnOiAwLCAneSc6IDAgfSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc1BsYWluT2JqZWN0KE9iamVjdC5jcmVhdGUobnVsbCkpO1xuICogLy8gPT4gdHJ1ZVxuICovXG5mdW5jdGlvbiBpc1BsYWluT2JqZWN0KHZhbHVlKSB7XG4gIGlmICghaXNPYmplY3RMaWtlKHZhbHVlKSB8fFxuICAgICAgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgIT0gb2JqZWN0VGFnIHx8IGlzSG9zdE9iamVjdCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdmFyIHByb3RvID0gZ2V0UHJvdG90eXBlKHZhbHVlKTtcbiAgaWYgKHByb3RvID09PSBudWxsKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgdmFyIEN0b3IgPSBoYXNPd25Qcm9wZXJ0eS5jYWxsKHByb3RvLCAnY29uc3RydWN0b3InKSAmJiBwcm90by5jb25zdHJ1Y3RvcjtcbiAgcmV0dXJuICh0eXBlb2YgQ3RvciA9PSAnZnVuY3Rpb24nICYmXG4gICAgQ3RvciBpbnN0YW5jZW9mIEN0b3IgJiYgZnVuY1RvU3RyaW5nLmNhbGwoQ3RvcikgPT0gb2JqZWN0Q3RvclN0cmluZyk7XG59XG5cbnZhciBsb2Rhc2hfaXNwbGFpbm9iamVjdCA9IGlzUGxhaW5PYmplY3Q7XG5cbmZ1bmN0aW9uIGNyZWF0ZUNvbW1vbmpzTW9kdWxlKGZuLCBiYXNlZGlyLCBtb2R1bGUpIHtcblx0cmV0dXJuIG1vZHVsZSA9IHtcblx0XHRwYXRoOiBiYXNlZGlyLFxuXHRcdGV4cG9ydHM6IHt9LFxuXHRcdHJlcXVpcmU6IGZ1bmN0aW9uIChwYXRoLCBiYXNlKSB7XG5cdFx0XHRyZXR1cm4gY29tbW9uanNSZXF1aXJlKCk7XG5cdFx0fVxuXHR9LCBmbihtb2R1bGUsIG1vZHVsZS5leHBvcnRzKSwgbW9kdWxlLmV4cG9ydHM7XG59XG5cbmZ1bmN0aW9uIGNvbW1vbmpzUmVxdWlyZSAoKSB7XG5cdHRocm93IG5ldyBFcnJvcignRHluYW1pYyByZXF1aXJlcyBhcmUgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgYnkgQHJvbGx1cC9wbHVnaW4tY29tbW9uanMnKTtcbn1cblxuLyoqXG4gKiBjc3NmaWx0ZXJcbiAqXG4gKiBAYXV0aG9yIOiAgembtzxsZWl6b25nbWluQGdtYWlsLmNvbT5cbiAqL1xuXG5mdW5jdGlvbiBnZXREZWZhdWx0V2hpdGVMaXN0ICgpIHtcbiAgLy8g55m95ZCN5Y2V5YC86K+05piO77yaXG4gIC8vIHRydWU6IOWFgeiuuOivpeWxnuaAp1xuICAvLyBGdW5jdGlvbjogZnVuY3Rpb24gKHZhbCkgeyB9IOi/lOWbnnRydWXooajnpLrlhYHorrjor6XlsZ7mgKfvvIzlhbbku5blgLzlnYfooajnpLrkuI3lhYHorrhcbiAgLy8gUmVnRXhwOiByZWdleHAudGVzdCh2YWwpIOi/lOWbnnRydWXooajnpLrlhYHorrjor6XlsZ7mgKfvvIzlhbbku5blgLzlnYfooajnpLrkuI3lhYHorrhcbiAgLy8g6Zmk5LiK6Z2i5YiX5Ye655qE5YC85aSW5Z2H6KGo56S65LiN5YWB6K64XG4gIHZhciB3aGl0ZUxpc3QgPSB7fTtcblxuICB3aGl0ZUxpc3RbJ2FsaWduLWNvbnRlbnQnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBhdXRvXG4gIHdoaXRlTGlzdFsnYWxpZ24taXRlbXMnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBhdXRvXG4gIHdoaXRlTGlzdFsnYWxpZ24tc2VsZiddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IGF1dG9cbiAgd2hpdGVMaXN0WydhbGlnbm1lbnQtYWRqdXN0J10gPSBmYWxzZTsgLy8gZGVmYXVsdDogYXV0b1xuICB3aGl0ZUxpc3RbJ2FsaWdubWVudC1iYXNlbGluZSddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IGJhc2VsaW5lXG4gIHdoaXRlTGlzdFsnYWxsJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogZGVwZW5kaW5nIG9uIGluZGl2aWR1YWwgcHJvcGVydGllc1xuICB3aGl0ZUxpc3RbJ2FuY2hvci1wb2ludCddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IG5vbmVcbiAgd2hpdGVMaXN0WydhbmltYXRpb24nXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBkZXBlbmRpbmcgb24gaW5kaXZpZHVhbCBwcm9wZXJ0aWVzXG4gIHdoaXRlTGlzdFsnYW5pbWF0aW9uLWRlbGF5J10gPSBmYWxzZTsgLy8gZGVmYXVsdDogMFxuICB3aGl0ZUxpc3RbJ2FuaW1hdGlvbi1kaXJlY3Rpb24nXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBub3JtYWxcbiAgd2hpdGVMaXN0WydhbmltYXRpb24tZHVyYXRpb24nXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiAwXG4gIHdoaXRlTGlzdFsnYW5pbWF0aW9uLWZpbGwtbW9kZSddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IG5vbmVcbiAgd2hpdGVMaXN0WydhbmltYXRpb24taXRlcmF0aW9uLWNvdW50J10gPSBmYWxzZTsgLy8gZGVmYXVsdDogMVxuICB3aGl0ZUxpc3RbJ2FuaW1hdGlvbi1uYW1lJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogbm9uZVxuICB3aGl0ZUxpc3RbJ2FuaW1hdGlvbi1wbGF5LXN0YXRlJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogcnVubmluZ1xuICB3aGl0ZUxpc3RbJ2FuaW1hdGlvbi10aW1pbmctZnVuY3Rpb24nXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBlYXNlXG4gIHdoaXRlTGlzdFsnYXppbXV0aCddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IGNlbnRlclxuICB3aGl0ZUxpc3RbJ2JhY2tmYWNlLXZpc2liaWxpdHknXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiB2aXNpYmxlXG4gIHdoaXRlTGlzdFsnYmFja2dyb3VuZCddID0gdHJ1ZTsgLy8gZGVmYXVsdDogZGVwZW5kaW5nIG9uIGluZGl2aWR1YWwgcHJvcGVydGllc1xuICB3aGl0ZUxpc3RbJ2JhY2tncm91bmQtYXR0YWNobWVudCddID0gdHJ1ZTsgLy8gZGVmYXVsdDogc2Nyb2xsXG4gIHdoaXRlTGlzdFsnYmFja2dyb3VuZC1jbGlwJ10gPSB0cnVlOyAvLyBkZWZhdWx0OiBib3JkZXItYm94XG4gIHdoaXRlTGlzdFsnYmFja2dyb3VuZC1jb2xvciddID0gdHJ1ZTsgLy8gZGVmYXVsdDogdHJhbnNwYXJlbnRcbiAgd2hpdGVMaXN0WydiYWNrZ3JvdW5kLWltYWdlJ10gPSB0cnVlOyAvLyBkZWZhdWx0OiBub25lXG4gIHdoaXRlTGlzdFsnYmFja2dyb3VuZC1vcmlnaW4nXSA9IHRydWU7IC8vIGRlZmF1bHQ6IHBhZGRpbmctYm94XG4gIHdoaXRlTGlzdFsnYmFja2dyb3VuZC1wb3NpdGlvbiddID0gdHJ1ZTsgLy8gZGVmYXVsdDogMCUgMCVcbiAgd2hpdGVMaXN0WydiYWNrZ3JvdW5kLXJlcGVhdCddID0gdHJ1ZTsgLy8gZGVmYXVsdDogcmVwZWF0XG4gIHdoaXRlTGlzdFsnYmFja2dyb3VuZC1zaXplJ10gPSB0cnVlOyAvLyBkZWZhdWx0OiBhdXRvXG4gIHdoaXRlTGlzdFsnYmFzZWxpbmUtc2hpZnQnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBiYXNlbGluZVxuICB3aGl0ZUxpc3RbJ2JpbmRpbmcnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBub25lXG4gIHdoaXRlTGlzdFsnYmxlZWQnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiA2cHRcbiAgd2hpdGVMaXN0Wydib29rbWFyay1sYWJlbCddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IGNvbnRlbnQoKVxuICB3aGl0ZUxpc3RbJ2Jvb2ttYXJrLWxldmVsJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogbm9uZVxuICB3aGl0ZUxpc3RbJ2Jvb2ttYXJrLXN0YXRlJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogb3BlblxuICB3aGl0ZUxpc3RbJ2JvcmRlciddID0gdHJ1ZTsgLy8gZGVmYXVsdDogZGVwZW5kaW5nIG9uIGluZGl2aWR1YWwgcHJvcGVydGllc1xuICB3aGl0ZUxpc3RbJ2JvcmRlci1ib3R0b20nXSA9IHRydWU7IC8vIGRlZmF1bHQ6IGRlcGVuZGluZyBvbiBpbmRpdmlkdWFsIHByb3BlcnRpZXNcbiAgd2hpdGVMaXN0Wydib3JkZXItYm90dG9tLWNvbG9yJ10gPSB0cnVlOyAvLyBkZWZhdWx0OiBjdXJyZW50IGNvbG9yXG4gIHdoaXRlTGlzdFsnYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1cyddID0gdHJ1ZTsgLy8gZGVmYXVsdDogMFxuICB3aGl0ZUxpc3RbJ2JvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzJ10gPSB0cnVlOyAvLyBkZWZhdWx0OiAwXG4gIHdoaXRlTGlzdFsnYm9yZGVyLWJvdHRvbS1zdHlsZSddID0gdHJ1ZTsgLy8gZGVmYXVsdDogbm9uZVxuICB3aGl0ZUxpc3RbJ2JvcmRlci1ib3R0b20td2lkdGgnXSA9IHRydWU7IC8vIGRlZmF1bHQ6IG1lZGl1bVxuICB3aGl0ZUxpc3RbJ2JvcmRlci1jb2xsYXBzZSddID0gdHJ1ZTsgLy8gZGVmYXVsdDogc2VwYXJhdGVcbiAgd2hpdGVMaXN0Wydib3JkZXItY29sb3InXSA9IHRydWU7IC8vIGRlZmF1bHQ6IGRlcGVuZGluZyBvbiBpbmRpdmlkdWFsIHByb3BlcnRpZXNcbiAgd2hpdGVMaXN0Wydib3JkZXItaW1hZ2UnXSA9IHRydWU7IC8vIGRlZmF1bHQ6IG5vbmVcbiAgd2hpdGVMaXN0Wydib3JkZXItaW1hZ2Utb3V0c2V0J10gPSB0cnVlOyAvLyBkZWZhdWx0OiAwXG4gIHdoaXRlTGlzdFsnYm9yZGVyLWltYWdlLXJlcGVhdCddID0gdHJ1ZTsgLy8gZGVmYXVsdDogc3RyZXRjaFxuICB3aGl0ZUxpc3RbJ2JvcmRlci1pbWFnZS1zbGljZSddID0gdHJ1ZTsgLy8gZGVmYXVsdDogMTAwJVxuICB3aGl0ZUxpc3RbJ2JvcmRlci1pbWFnZS1zb3VyY2UnXSA9IHRydWU7IC8vIGRlZmF1bHQ6IG5vbmVcbiAgd2hpdGVMaXN0Wydib3JkZXItaW1hZ2Utd2lkdGgnXSA9IHRydWU7IC8vIGRlZmF1bHQ6IDFcbiAgd2hpdGVMaXN0Wydib3JkZXItbGVmdCddID0gdHJ1ZTsgLy8gZGVmYXVsdDogZGVwZW5kaW5nIG9uIGluZGl2aWR1YWwgcHJvcGVydGllc1xuICB3aGl0ZUxpc3RbJ2JvcmRlci1sZWZ0LWNvbG9yJ10gPSB0cnVlOyAvLyBkZWZhdWx0OiBjdXJyZW50IGNvbG9yXG4gIHdoaXRlTGlzdFsnYm9yZGVyLWxlZnQtc3R5bGUnXSA9IHRydWU7IC8vIGRlZmF1bHQ6IG5vbmVcbiAgd2hpdGVMaXN0Wydib3JkZXItbGVmdC13aWR0aCddID0gdHJ1ZTsgLy8gZGVmYXVsdDogbWVkaXVtXG4gIHdoaXRlTGlzdFsnYm9yZGVyLXJhZGl1cyddID0gdHJ1ZTsgLy8gZGVmYXVsdDogMFxuICB3aGl0ZUxpc3RbJ2JvcmRlci1yaWdodCddID0gdHJ1ZTsgLy8gZGVmYXVsdDogZGVwZW5kaW5nIG9uIGluZGl2aWR1YWwgcHJvcGVydGllc1xuICB3aGl0ZUxpc3RbJ2JvcmRlci1yaWdodC1jb2xvciddID0gdHJ1ZTsgLy8gZGVmYXVsdDogY3VycmVudCBjb2xvclxuICB3aGl0ZUxpc3RbJ2JvcmRlci1yaWdodC1zdHlsZSddID0gdHJ1ZTsgLy8gZGVmYXVsdDogbm9uZVxuICB3aGl0ZUxpc3RbJ2JvcmRlci1yaWdodC13aWR0aCddID0gdHJ1ZTsgLy8gZGVmYXVsdDogbWVkaXVtXG4gIHdoaXRlTGlzdFsnYm9yZGVyLXNwYWNpbmcnXSA9IHRydWU7IC8vIGRlZmF1bHQ6IDBcbiAgd2hpdGVMaXN0Wydib3JkZXItc3R5bGUnXSA9IHRydWU7IC8vIGRlZmF1bHQ6IGRlcGVuZGluZyBvbiBpbmRpdmlkdWFsIHByb3BlcnRpZXNcbiAgd2hpdGVMaXN0Wydib3JkZXItdG9wJ10gPSB0cnVlOyAvLyBkZWZhdWx0OiBkZXBlbmRpbmcgb24gaW5kaXZpZHVhbCBwcm9wZXJ0aWVzXG4gIHdoaXRlTGlzdFsnYm9yZGVyLXRvcC1jb2xvciddID0gdHJ1ZTsgLy8gZGVmYXVsdDogY3VycmVudCBjb2xvclxuICB3aGl0ZUxpc3RbJ2JvcmRlci10b3AtbGVmdC1yYWRpdXMnXSA9IHRydWU7IC8vIGRlZmF1bHQ6IDBcbiAgd2hpdGVMaXN0Wydib3JkZXItdG9wLXJpZ2h0LXJhZGl1cyddID0gdHJ1ZTsgLy8gZGVmYXVsdDogMFxuICB3aGl0ZUxpc3RbJ2JvcmRlci10b3Atc3R5bGUnXSA9IHRydWU7IC8vIGRlZmF1bHQ6IG5vbmVcbiAgd2hpdGVMaXN0Wydib3JkZXItdG9wLXdpZHRoJ10gPSB0cnVlOyAvLyBkZWZhdWx0OiBtZWRpdW1cbiAgd2hpdGVMaXN0Wydib3JkZXItd2lkdGgnXSA9IHRydWU7IC8vIGRlZmF1bHQ6IGRlcGVuZGluZyBvbiBpbmRpdmlkdWFsIHByb3BlcnRpZXNcbiAgd2hpdGVMaXN0Wydib3R0b20nXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBhdXRvXG4gIHdoaXRlTGlzdFsnYm94LWRlY29yYXRpb24tYnJlYWsnXSA9IHRydWU7IC8vIGRlZmF1bHQ6IHNsaWNlXG4gIHdoaXRlTGlzdFsnYm94LXNoYWRvdyddID0gdHJ1ZTsgLy8gZGVmYXVsdDogbm9uZVxuICB3aGl0ZUxpc3RbJ2JveC1zaXppbmcnXSA9IHRydWU7IC8vIGRlZmF1bHQ6IGNvbnRlbnQtYm94XG4gIHdoaXRlTGlzdFsnYm94LXNuYXAnXSA9IHRydWU7IC8vIGRlZmF1bHQ6IG5vbmVcbiAgd2hpdGVMaXN0Wydib3gtc3VwcHJlc3MnXSA9IHRydWU7IC8vIGRlZmF1bHQ6IHNob3dcbiAgd2hpdGVMaXN0WydicmVhay1hZnRlciddID0gdHJ1ZTsgLy8gZGVmYXVsdDogYXV0b1xuICB3aGl0ZUxpc3RbJ2JyZWFrLWJlZm9yZSddID0gdHJ1ZTsgLy8gZGVmYXVsdDogYXV0b1xuICB3aGl0ZUxpc3RbJ2JyZWFrLWluc2lkZSddID0gdHJ1ZTsgLy8gZGVmYXVsdDogYXV0b1xuICB3aGl0ZUxpc3RbJ2NhcHRpb24tc2lkZSddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IHRvcFxuICB3aGl0ZUxpc3RbJ2NoYWlucyddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IG5vbmVcbiAgd2hpdGVMaXN0WydjbGVhciddID0gdHJ1ZTsgLy8gZGVmYXVsdDogbm9uZVxuICB3aGl0ZUxpc3RbJ2NsaXAnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBhdXRvXG4gIHdoaXRlTGlzdFsnY2xpcC1wYXRoJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogbm9uZVxuICB3aGl0ZUxpc3RbJ2NsaXAtcnVsZSddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IG5vbnplcm9cbiAgd2hpdGVMaXN0Wydjb2xvciddID0gdHJ1ZTsgLy8gZGVmYXVsdDogaW1wbGVtZW50YXRpb24gZGVwZW5kZW50XG4gIHdoaXRlTGlzdFsnY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzJ10gPSB0cnVlOyAvLyBkZWZhdWx0OiBhdXRvXG4gIHdoaXRlTGlzdFsnY29sdW1uLWNvdW50J10gPSBmYWxzZTsgLy8gZGVmYXVsdDogYXV0b1xuICB3aGl0ZUxpc3RbJ2NvbHVtbi1maWxsJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogYmFsYW5jZVxuICB3aGl0ZUxpc3RbJ2NvbHVtbi1nYXAnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBub3JtYWxcbiAgd2hpdGVMaXN0Wydjb2x1bW4tcnVsZSddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IGRlcGVuZGluZyBvbiBpbmRpdmlkdWFsIHByb3BlcnRpZXNcbiAgd2hpdGVMaXN0Wydjb2x1bW4tcnVsZS1jb2xvciddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IGN1cnJlbnQgY29sb3JcbiAgd2hpdGVMaXN0Wydjb2x1bW4tcnVsZS1zdHlsZSddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IG1lZGl1bVxuICB3aGl0ZUxpc3RbJ2NvbHVtbi1ydWxlLXdpZHRoJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogbWVkaXVtXG4gIHdoaXRlTGlzdFsnY29sdW1uLXNwYW4nXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBub25lXG4gIHdoaXRlTGlzdFsnY29sdW1uLXdpZHRoJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogYXV0b1xuICB3aGl0ZUxpc3RbJ2NvbHVtbnMnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBkZXBlbmRpbmcgb24gaW5kaXZpZHVhbCBwcm9wZXJ0aWVzXG4gIHdoaXRlTGlzdFsnY29udGFpbiddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IG5vbmVcbiAgd2hpdGVMaXN0Wydjb250ZW50J10gPSBmYWxzZTsgLy8gZGVmYXVsdDogbm9ybWFsXG4gIHdoaXRlTGlzdFsnY291bnRlci1pbmNyZW1lbnQnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBub25lXG4gIHdoaXRlTGlzdFsnY291bnRlci1yZXNldCddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IG5vbmVcbiAgd2hpdGVMaXN0Wydjb3VudGVyLXNldCddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IG5vbmVcbiAgd2hpdGVMaXN0Wydjcm9wJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogYXV0b1xuICB3aGl0ZUxpc3RbJ2N1ZSddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IGRlcGVuZGluZyBvbiBpbmRpdmlkdWFsIHByb3BlcnRpZXNcbiAgd2hpdGVMaXN0WydjdWUtYWZ0ZXInXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBub25lXG4gIHdoaXRlTGlzdFsnY3VlLWJlZm9yZSddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IG5vbmVcbiAgd2hpdGVMaXN0WydjdXJzb3InXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBhdXRvXG4gIHdoaXRlTGlzdFsnZGlyZWN0aW9uJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogbHRyXG4gIHdoaXRlTGlzdFsnZGlzcGxheSddID0gdHJ1ZTsgLy8gZGVmYXVsdDogZGVwZW5kaW5nIG9uIGluZGl2aWR1YWwgcHJvcGVydGllc1xuICB3aGl0ZUxpc3RbJ2Rpc3BsYXktaW5zaWRlJ10gPSB0cnVlOyAvLyBkZWZhdWx0OiBhdXRvXG4gIHdoaXRlTGlzdFsnZGlzcGxheS1saXN0J10gPSB0cnVlOyAvLyBkZWZhdWx0OiBub25lXG4gIHdoaXRlTGlzdFsnZGlzcGxheS1vdXRzaWRlJ10gPSB0cnVlOyAvLyBkZWZhdWx0OiBpbmxpbmUtbGV2ZWxcbiAgd2hpdGVMaXN0Wydkb21pbmFudC1iYXNlbGluZSddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IGF1dG9cbiAgd2hpdGVMaXN0WydlbGV2YXRpb24nXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBsZXZlbFxuICB3aGl0ZUxpc3RbJ2VtcHR5LWNlbGxzJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogc2hvd1xuICB3aGl0ZUxpc3RbJ2ZpbHRlciddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IG5vbmVcbiAgd2hpdGVMaXN0WydmbGV4J10gPSBmYWxzZTsgLy8gZGVmYXVsdDogZGVwZW5kaW5nIG9uIGluZGl2aWR1YWwgcHJvcGVydGllc1xuICB3aGl0ZUxpc3RbJ2ZsZXgtYmFzaXMnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBhdXRvXG4gIHdoaXRlTGlzdFsnZmxleC1kaXJlY3Rpb24nXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiByb3dcbiAgd2hpdGVMaXN0WydmbGV4LWZsb3cnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBkZXBlbmRpbmcgb24gaW5kaXZpZHVhbCBwcm9wZXJ0aWVzXG4gIHdoaXRlTGlzdFsnZmxleC1ncm93J10gPSBmYWxzZTsgLy8gZGVmYXVsdDogMFxuICB3aGl0ZUxpc3RbJ2ZsZXgtc2hyaW5rJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogMVxuICB3aGl0ZUxpc3RbJ2ZsZXgtd3JhcCddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IG5vd3JhcFxuICB3aGl0ZUxpc3RbJ2Zsb2F0J10gPSBmYWxzZTsgLy8gZGVmYXVsdDogbm9uZVxuICB3aGl0ZUxpc3RbJ2Zsb2F0LW9mZnNldCddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IDAgMFxuICB3aGl0ZUxpc3RbJ2Zsb29kLWNvbG9yJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogYmxhY2tcbiAgd2hpdGVMaXN0WydmbG9vZC1vcGFjaXR5J10gPSBmYWxzZTsgLy8gZGVmYXVsdDogMVxuICB3aGl0ZUxpc3RbJ2Zsb3ctZnJvbSddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IG5vbmVcbiAgd2hpdGVMaXN0WydmbG93LWludG8nXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBub25lXG4gIHdoaXRlTGlzdFsnZm9udCddID0gdHJ1ZTsgLy8gZGVmYXVsdDogZGVwZW5kaW5nIG9uIGluZGl2aWR1YWwgcHJvcGVydGllc1xuICB3aGl0ZUxpc3RbJ2ZvbnQtZmFtaWx5J10gPSB0cnVlOyAvLyBkZWZhdWx0OiBpbXBsZW1lbnRhdGlvbiBkZXBlbmRlbnRcbiAgd2hpdGVMaXN0Wydmb250LWZlYXR1cmUtc2V0dGluZ3MnXSA9IHRydWU7IC8vIGRlZmF1bHQ6IG5vcm1hbFxuICB3aGl0ZUxpc3RbJ2ZvbnQta2VybmluZyddID0gdHJ1ZTsgLy8gZGVmYXVsdDogYXV0b1xuICB3aGl0ZUxpc3RbJ2ZvbnQtbGFuZ3VhZ2Utb3ZlcnJpZGUnXSA9IHRydWU7IC8vIGRlZmF1bHQ6IG5vcm1hbFxuICB3aGl0ZUxpc3RbJ2ZvbnQtc2l6ZSddID0gdHJ1ZTsgLy8gZGVmYXVsdDogbWVkaXVtXG4gIHdoaXRlTGlzdFsnZm9udC1zaXplLWFkanVzdCddID0gdHJ1ZTsgLy8gZGVmYXVsdDogbm9uZVxuICB3aGl0ZUxpc3RbJ2ZvbnQtc3RyZXRjaCddID0gdHJ1ZTsgLy8gZGVmYXVsdDogbm9ybWFsXG4gIHdoaXRlTGlzdFsnZm9udC1zdHlsZSddID0gdHJ1ZTsgLy8gZGVmYXVsdDogbm9ybWFsXG4gIHdoaXRlTGlzdFsnZm9udC1zeW50aGVzaXMnXSA9IHRydWU7IC8vIGRlZmF1bHQ6IHdlaWdodCBzdHlsZVxuICB3aGl0ZUxpc3RbJ2ZvbnQtdmFyaWFudCddID0gdHJ1ZTsgLy8gZGVmYXVsdDogbm9ybWFsXG4gIHdoaXRlTGlzdFsnZm9udC12YXJpYW50LWFsdGVybmF0ZXMnXSA9IHRydWU7IC8vIGRlZmF1bHQ6IG5vcm1hbFxuICB3aGl0ZUxpc3RbJ2ZvbnQtdmFyaWFudC1jYXBzJ10gPSB0cnVlOyAvLyBkZWZhdWx0OiBub3JtYWxcbiAgd2hpdGVMaXN0Wydmb250LXZhcmlhbnQtZWFzdC1hc2lhbiddID0gdHJ1ZTsgLy8gZGVmYXVsdDogbm9ybWFsXG4gIHdoaXRlTGlzdFsnZm9udC12YXJpYW50LWxpZ2F0dXJlcyddID0gdHJ1ZTsgLy8gZGVmYXVsdDogbm9ybWFsXG4gIHdoaXRlTGlzdFsnZm9udC12YXJpYW50LW51bWVyaWMnXSA9IHRydWU7IC8vIGRlZmF1bHQ6IG5vcm1hbFxuICB3aGl0ZUxpc3RbJ2ZvbnQtdmFyaWFudC1wb3NpdGlvbiddID0gdHJ1ZTsgLy8gZGVmYXVsdDogbm9ybWFsXG4gIHdoaXRlTGlzdFsnZm9udC13ZWlnaHQnXSA9IHRydWU7IC8vIGRlZmF1bHQ6IG5vcm1hbFxuICB3aGl0ZUxpc3RbJ2dyaWQnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBkZXBlbmRpbmcgb24gaW5kaXZpZHVhbCBwcm9wZXJ0aWVzXG4gIHdoaXRlTGlzdFsnZ3JpZC1hcmVhJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogZGVwZW5kaW5nIG9uIGluZGl2aWR1YWwgcHJvcGVydGllc1xuICB3aGl0ZUxpc3RbJ2dyaWQtYXV0by1jb2x1bW5zJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogYXV0b1xuICB3aGl0ZUxpc3RbJ2dyaWQtYXV0by1mbG93J10gPSBmYWxzZTsgLy8gZGVmYXVsdDogbm9uZVxuICB3aGl0ZUxpc3RbJ2dyaWQtYXV0by1yb3dzJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogYXV0b1xuICB3aGl0ZUxpc3RbJ2dyaWQtY29sdW1uJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogZGVwZW5kaW5nIG9uIGluZGl2aWR1YWwgcHJvcGVydGllc1xuICB3aGl0ZUxpc3RbJ2dyaWQtY29sdW1uLWVuZCddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IGF1dG9cbiAgd2hpdGVMaXN0WydncmlkLWNvbHVtbi1zdGFydCddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IGF1dG9cbiAgd2hpdGVMaXN0WydncmlkLXJvdyddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IGRlcGVuZGluZyBvbiBpbmRpdmlkdWFsIHByb3BlcnRpZXNcbiAgd2hpdGVMaXN0WydncmlkLXJvdy1lbmQnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBhdXRvXG4gIHdoaXRlTGlzdFsnZ3JpZC1yb3ctc3RhcnQnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBhdXRvXG4gIHdoaXRlTGlzdFsnZ3JpZC10ZW1wbGF0ZSddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IGRlcGVuZGluZyBvbiBpbmRpdmlkdWFsIHByb3BlcnRpZXNcbiAgd2hpdGVMaXN0WydncmlkLXRlbXBsYXRlLWFyZWFzJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogbm9uZVxuICB3aGl0ZUxpc3RbJ2dyaWQtdGVtcGxhdGUtY29sdW1ucyddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IG5vbmVcbiAgd2hpdGVMaXN0WydncmlkLXRlbXBsYXRlLXJvd3MnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBub25lXG4gIHdoaXRlTGlzdFsnaGFuZ2luZy1wdW5jdHVhdGlvbiddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IG5vbmVcbiAgd2hpdGVMaXN0WydoZWlnaHQnXSA9IHRydWU7IC8vIGRlZmF1bHQ6IGF1dG9cbiAgd2hpdGVMaXN0WydoeXBoZW5zJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogbWFudWFsXG4gIHdoaXRlTGlzdFsnaWNvbiddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IGF1dG9cbiAgd2hpdGVMaXN0WydpbWFnZS1vcmllbnRhdGlvbiddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IGF1dG9cbiAgd2hpdGVMaXN0WydpbWFnZS1yZXNvbHV0aW9uJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogbm9ybWFsXG4gIHdoaXRlTGlzdFsnaW1lLW1vZGUnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBhdXRvXG4gIHdoaXRlTGlzdFsnaW5pdGlhbC1sZXR0ZXJzJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogbm9ybWFsXG4gIHdoaXRlTGlzdFsnaW5saW5lLWJveC1hbGlnbiddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IGxhc3RcbiAgd2hpdGVMaXN0WydqdXN0aWZ5LWNvbnRlbnQnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBhdXRvXG4gIHdoaXRlTGlzdFsnanVzdGlmeS1pdGVtcyddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IGF1dG9cbiAgd2hpdGVMaXN0WydqdXN0aWZ5LXNlbGYnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBhdXRvXG4gIHdoaXRlTGlzdFsnbGVmdCddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IGF1dG9cbiAgd2hpdGVMaXN0WydsZXR0ZXItc3BhY2luZyddID0gdHJ1ZTsgLy8gZGVmYXVsdDogbm9ybWFsXG4gIHdoaXRlTGlzdFsnbGlnaHRpbmctY29sb3InXSA9IHRydWU7IC8vIGRlZmF1bHQ6IHdoaXRlXG4gIHdoaXRlTGlzdFsnbGluZS1ib3gtY29udGFpbiddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IGJsb2NrIGlubGluZSByZXBsYWNlZFxuICB3aGl0ZUxpc3RbJ2xpbmUtYnJlYWsnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBhdXRvXG4gIHdoaXRlTGlzdFsnbGluZS1ncmlkJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogbWF0Y2gtcGFyZW50XG4gIHdoaXRlTGlzdFsnbGluZS1oZWlnaHQnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBub3JtYWxcbiAgd2hpdGVMaXN0WydsaW5lLXNuYXAnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBub25lXG4gIHdoaXRlTGlzdFsnbGluZS1zdGFja2luZyddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IGRlcGVuZGluZyBvbiBpbmRpdmlkdWFsIHByb3BlcnRpZXNcbiAgd2hpdGVMaXN0WydsaW5lLXN0YWNraW5nLXJ1YnknXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBleGNsdWRlLXJ1YnlcbiAgd2hpdGVMaXN0WydsaW5lLXN0YWNraW5nLXNoaWZ0J10gPSBmYWxzZTsgLy8gZGVmYXVsdDogY29uc2lkZXItc2hpZnRzXG4gIHdoaXRlTGlzdFsnbGluZS1zdGFja2luZy1zdHJhdGVneSddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IGlubGluZS1saW5lLWhlaWdodFxuICB3aGl0ZUxpc3RbJ2xpc3Qtc3R5bGUnXSA9IHRydWU7IC8vIGRlZmF1bHQ6IGRlcGVuZGluZyBvbiBpbmRpdmlkdWFsIHByb3BlcnRpZXNcbiAgd2hpdGVMaXN0WydsaXN0LXN0eWxlLWltYWdlJ10gPSB0cnVlOyAvLyBkZWZhdWx0OiBub25lXG4gIHdoaXRlTGlzdFsnbGlzdC1zdHlsZS1wb3NpdGlvbiddID0gdHJ1ZTsgLy8gZGVmYXVsdDogb3V0c2lkZVxuICB3aGl0ZUxpc3RbJ2xpc3Qtc3R5bGUtdHlwZSddID0gdHJ1ZTsgLy8gZGVmYXVsdDogZGlzY1xuICB3aGl0ZUxpc3RbJ21hcmdpbiddID0gdHJ1ZTsgLy8gZGVmYXVsdDogZGVwZW5kaW5nIG9uIGluZGl2aWR1YWwgcHJvcGVydGllc1xuICB3aGl0ZUxpc3RbJ21hcmdpbi1ib3R0b20nXSA9IHRydWU7IC8vIGRlZmF1bHQ6IDBcbiAgd2hpdGVMaXN0WydtYXJnaW4tbGVmdCddID0gdHJ1ZTsgLy8gZGVmYXVsdDogMFxuICB3aGl0ZUxpc3RbJ21hcmdpbi1yaWdodCddID0gdHJ1ZTsgLy8gZGVmYXVsdDogMFxuICB3aGl0ZUxpc3RbJ21hcmdpbi10b3AnXSA9IHRydWU7IC8vIGRlZmF1bHQ6IDBcbiAgd2hpdGVMaXN0WydtYXJrZXItb2Zmc2V0J10gPSBmYWxzZTsgLy8gZGVmYXVsdDogYXV0b1xuICB3aGl0ZUxpc3RbJ21hcmtlci1zaWRlJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogbGlzdC1pdGVtXG4gIHdoaXRlTGlzdFsnbWFya3MnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBub25lXG4gIHdoaXRlTGlzdFsnbWFzayddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IGJvcmRlci1ib3hcbiAgd2hpdGVMaXN0WydtYXNrLWJveCddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IHNlZSBpbmRpdmlkdWFsIHByb3BlcnRpZXNcbiAgd2hpdGVMaXN0WydtYXNrLWJveC1vdXRzZXQnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiAwXG4gIHdoaXRlTGlzdFsnbWFzay1ib3gtcmVwZWF0J10gPSBmYWxzZTsgLy8gZGVmYXVsdDogc3RyZXRjaFxuICB3aGl0ZUxpc3RbJ21hc2stYm94LXNsaWNlJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogMCBmaWxsXG4gIHdoaXRlTGlzdFsnbWFzay1ib3gtc291cmNlJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogbm9uZVxuICB3aGl0ZUxpc3RbJ21hc2stYm94LXdpZHRoJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogYXV0b1xuICB3aGl0ZUxpc3RbJ21hc2stY2xpcCddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IGJvcmRlci1ib3hcbiAgd2hpdGVMaXN0WydtYXNrLWltYWdlJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogbm9uZVxuICB3aGl0ZUxpc3RbJ21hc2stb3JpZ2luJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogYm9yZGVyLWJveFxuICB3aGl0ZUxpc3RbJ21hc2stcG9zaXRpb24nXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBjZW50ZXJcbiAgd2hpdGVMaXN0WydtYXNrLXJlcGVhdCddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IG5vLXJlcGVhdFxuICB3aGl0ZUxpc3RbJ21hc2stc2l6ZSddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IGJvcmRlci1ib3hcbiAgd2hpdGVMaXN0WydtYXNrLXNvdXJjZS10eXBlJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogYXV0b1xuICB3aGl0ZUxpc3RbJ21hc2stdHlwZSddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IGx1bWluYW5jZVxuICB3aGl0ZUxpc3RbJ21heC1oZWlnaHQnXSA9IHRydWU7IC8vIGRlZmF1bHQ6IG5vbmVcbiAgd2hpdGVMaXN0WydtYXgtbGluZXMnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBub25lXG4gIHdoaXRlTGlzdFsnbWF4LXdpZHRoJ10gPSB0cnVlOyAvLyBkZWZhdWx0OiBub25lXG4gIHdoaXRlTGlzdFsnbWluLWhlaWdodCddID0gdHJ1ZTsgLy8gZGVmYXVsdDogMFxuICB3aGl0ZUxpc3RbJ21pbi13aWR0aCddID0gdHJ1ZTsgLy8gZGVmYXVsdDogMFxuICB3aGl0ZUxpc3RbJ21vdmUtdG8nXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBub3JtYWxcbiAgd2hpdGVMaXN0WyduYXYtZG93biddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IGF1dG9cbiAgd2hpdGVMaXN0WyduYXYtaW5kZXgnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBhdXRvXG4gIHdoaXRlTGlzdFsnbmF2LWxlZnQnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBhdXRvXG4gIHdoaXRlTGlzdFsnbmF2LXJpZ2h0J10gPSBmYWxzZTsgLy8gZGVmYXVsdDogYXV0b1xuICB3aGl0ZUxpc3RbJ25hdi11cCddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IGF1dG9cbiAgd2hpdGVMaXN0WydvYmplY3QtZml0J10gPSBmYWxzZTsgLy8gZGVmYXVsdDogZmlsbFxuICB3aGl0ZUxpc3RbJ29iamVjdC1wb3NpdGlvbiddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IDUwJSA1MCVcbiAgd2hpdGVMaXN0WydvcGFjaXR5J10gPSBmYWxzZTsgLy8gZGVmYXVsdDogMVxuICB3aGl0ZUxpc3RbJ29yZGVyJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogMFxuICB3aGl0ZUxpc3RbJ29ycGhhbnMnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiAyXG4gIHdoaXRlTGlzdFsnb3V0bGluZSddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IGRlcGVuZGluZyBvbiBpbmRpdmlkdWFsIHByb3BlcnRpZXNcbiAgd2hpdGVMaXN0WydvdXRsaW5lLWNvbG9yJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogaW52ZXJ0XG4gIHdoaXRlTGlzdFsnb3V0bGluZS1vZmZzZXQnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiAwXG4gIHdoaXRlTGlzdFsnb3V0bGluZS1zdHlsZSddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IG5vbmVcbiAgd2hpdGVMaXN0WydvdXRsaW5lLXdpZHRoJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogbWVkaXVtXG4gIHdoaXRlTGlzdFsnb3ZlcmZsb3cnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBkZXBlbmRpbmcgb24gaW5kaXZpZHVhbCBwcm9wZXJ0aWVzXG4gIHdoaXRlTGlzdFsnb3ZlcmZsb3ctd3JhcCddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IG5vcm1hbFxuICB3aGl0ZUxpc3RbJ292ZXJmbG93LXgnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiB2aXNpYmxlXG4gIHdoaXRlTGlzdFsnb3ZlcmZsb3cteSddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IHZpc2libGVcbiAgd2hpdGVMaXN0WydwYWRkaW5nJ10gPSB0cnVlOyAvLyBkZWZhdWx0OiBkZXBlbmRpbmcgb24gaW5kaXZpZHVhbCBwcm9wZXJ0aWVzXG4gIHdoaXRlTGlzdFsncGFkZGluZy1ib3R0b20nXSA9IHRydWU7IC8vIGRlZmF1bHQ6IDBcbiAgd2hpdGVMaXN0WydwYWRkaW5nLWxlZnQnXSA9IHRydWU7IC8vIGRlZmF1bHQ6IDBcbiAgd2hpdGVMaXN0WydwYWRkaW5nLXJpZ2h0J10gPSB0cnVlOyAvLyBkZWZhdWx0OiAwXG4gIHdoaXRlTGlzdFsncGFkZGluZy10b3AnXSA9IHRydWU7IC8vIGRlZmF1bHQ6IDBcbiAgd2hpdGVMaXN0WydwYWdlJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogYXV0b1xuICB3aGl0ZUxpc3RbJ3BhZ2UtYnJlYWstYWZ0ZXInXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBhdXRvXG4gIHdoaXRlTGlzdFsncGFnZS1icmVhay1iZWZvcmUnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBhdXRvXG4gIHdoaXRlTGlzdFsncGFnZS1icmVhay1pbnNpZGUnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBhdXRvXG4gIHdoaXRlTGlzdFsncGFnZS1wb2xpY3knXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBzdGFydFxuICB3aGl0ZUxpc3RbJ3BhdXNlJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogaW1wbGVtZW50YXRpb24gZGVwZW5kZW50XG4gIHdoaXRlTGlzdFsncGF1c2UtYWZ0ZXInXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBpbXBsZW1lbnRhdGlvbiBkZXBlbmRlbnRcbiAgd2hpdGVMaXN0WydwYXVzZS1iZWZvcmUnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBpbXBsZW1lbnRhdGlvbiBkZXBlbmRlbnRcbiAgd2hpdGVMaXN0WydwZXJzcGVjdGl2ZSddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IG5vbmVcbiAgd2hpdGVMaXN0WydwZXJzcGVjdGl2ZS1vcmlnaW4nXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiA1MCUgNTAlXG4gIHdoaXRlTGlzdFsncGl0Y2gnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBtZWRpdW1cbiAgd2hpdGVMaXN0WydwaXRjaC1yYW5nZSddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IDUwXG4gIHdoaXRlTGlzdFsncGxheS1kdXJpbmcnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBhdXRvXG4gIHdoaXRlTGlzdFsncG9zaXRpb24nXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBzdGF0aWNcbiAgd2hpdGVMaXN0WydwcmVzZW50YXRpb24tbGV2ZWwnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiAwXG4gIHdoaXRlTGlzdFsncXVvdGVzJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogdGV4dFxuICB3aGl0ZUxpc3RbJ3JlZ2lvbi1mcmFnbWVudCddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IGF1dG9cbiAgd2hpdGVMaXN0WydyZXNpemUnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBub25lXG4gIHdoaXRlTGlzdFsncmVzdCddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IGRlcGVuZGluZyBvbiBpbmRpdmlkdWFsIHByb3BlcnRpZXNcbiAgd2hpdGVMaXN0WydyZXN0LWFmdGVyJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogbm9uZVxuICB3aGl0ZUxpc3RbJ3Jlc3QtYmVmb3JlJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogbm9uZVxuICB3aGl0ZUxpc3RbJ3JpY2huZXNzJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogNTBcbiAgd2hpdGVMaXN0WydyaWdodCddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IGF1dG9cbiAgd2hpdGVMaXN0Wydyb3RhdGlvbiddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IDBcbiAgd2hpdGVMaXN0Wydyb3RhdGlvbi1wb2ludCddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IDUwJSA1MCVcbiAgd2hpdGVMaXN0WydydWJ5LWFsaWduJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogYXV0b1xuICB3aGl0ZUxpc3RbJ3J1YnktbWVyZ2UnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBzZXBhcmF0ZVxuICB3aGl0ZUxpc3RbJ3J1YnktcG9zaXRpb24nXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBiZWZvcmVcbiAgd2hpdGVMaXN0WydzaGFwZS1pbWFnZS10aHJlc2hvbGQnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiAwLjBcbiAgd2hpdGVMaXN0WydzaGFwZS1vdXRzaWRlJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogbm9uZVxuICB3aGl0ZUxpc3RbJ3NoYXBlLW1hcmdpbiddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IDBcbiAgd2hpdGVMaXN0WydzaXplJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogYXV0b1xuICB3aGl0ZUxpc3RbJ3NwZWFrJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogYXV0b1xuICB3aGl0ZUxpc3RbJ3NwZWFrLWFzJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogbm9ybWFsXG4gIHdoaXRlTGlzdFsnc3BlYWstaGVhZGVyJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogb25jZVxuICB3aGl0ZUxpc3RbJ3NwZWFrLW51bWVyYWwnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBjb250aW51b3VzXG4gIHdoaXRlTGlzdFsnc3BlYWstcHVuY3R1YXRpb24nXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBub25lXG4gIHdoaXRlTGlzdFsnc3BlZWNoLXJhdGUnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBtZWRpdW1cbiAgd2hpdGVMaXN0WydzdHJlc3MnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiA1MFxuICB3aGl0ZUxpc3RbJ3N0cmluZy1zZXQnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBub25lXG4gIHdoaXRlTGlzdFsndGFiLXNpemUnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiA4XG4gIHdoaXRlTGlzdFsndGFibGUtbGF5b3V0J10gPSBmYWxzZTsgLy8gZGVmYXVsdDogYXV0b1xuICB3aGl0ZUxpc3RbJ3RleHQtYWxpZ24nXSA9IHRydWU7IC8vIGRlZmF1bHQ6IHN0YXJ0XG4gIHdoaXRlTGlzdFsndGV4dC1hbGlnbi1sYXN0J10gPSB0cnVlOyAvLyBkZWZhdWx0OiBhdXRvXG4gIHdoaXRlTGlzdFsndGV4dC1jb21iaW5lLXVwcmlnaHQnXSA9IHRydWU7IC8vIGRlZmF1bHQ6IG5vbmVcbiAgd2hpdGVMaXN0Wyd0ZXh0LWRlY29yYXRpb24nXSA9IHRydWU7IC8vIGRlZmF1bHQ6IG5vbmVcbiAgd2hpdGVMaXN0Wyd0ZXh0LWRlY29yYXRpb24tY29sb3InXSA9IHRydWU7IC8vIGRlZmF1bHQ6IGN1cnJlbnRDb2xvclxuICB3aGl0ZUxpc3RbJ3RleHQtZGVjb3JhdGlvbi1saW5lJ10gPSB0cnVlOyAvLyBkZWZhdWx0OiBub25lXG4gIHdoaXRlTGlzdFsndGV4dC1kZWNvcmF0aW9uLXNraXAnXSA9IHRydWU7IC8vIGRlZmF1bHQ6IG9iamVjdHNcbiAgd2hpdGVMaXN0Wyd0ZXh0LWRlY29yYXRpb24tc3R5bGUnXSA9IHRydWU7IC8vIGRlZmF1bHQ6IHNvbGlkXG4gIHdoaXRlTGlzdFsndGV4dC1lbXBoYXNpcyddID0gdHJ1ZTsgLy8gZGVmYXVsdDogZGVwZW5kaW5nIG9uIGluZGl2aWR1YWwgcHJvcGVydGllc1xuICB3aGl0ZUxpc3RbJ3RleHQtZW1waGFzaXMtY29sb3InXSA9IHRydWU7IC8vIGRlZmF1bHQ6IGN1cnJlbnRDb2xvclxuICB3aGl0ZUxpc3RbJ3RleHQtZW1waGFzaXMtcG9zaXRpb24nXSA9IHRydWU7IC8vIGRlZmF1bHQ6IG92ZXIgcmlnaHRcbiAgd2hpdGVMaXN0Wyd0ZXh0LWVtcGhhc2lzLXN0eWxlJ10gPSB0cnVlOyAvLyBkZWZhdWx0OiBub25lXG4gIHdoaXRlTGlzdFsndGV4dC1oZWlnaHQnXSA9IHRydWU7IC8vIGRlZmF1bHQ6IGF1dG9cbiAgd2hpdGVMaXN0Wyd0ZXh0LWluZGVudCddID0gdHJ1ZTsgLy8gZGVmYXVsdDogMFxuICB3aGl0ZUxpc3RbJ3RleHQtanVzdGlmeSddID0gdHJ1ZTsgLy8gZGVmYXVsdDogYXV0b1xuICB3aGl0ZUxpc3RbJ3RleHQtb3JpZW50YXRpb24nXSA9IHRydWU7IC8vIGRlZmF1bHQ6IG1peGVkXG4gIHdoaXRlTGlzdFsndGV4dC1vdmVyZmxvdyddID0gdHJ1ZTsgLy8gZGVmYXVsdDogY2xpcFxuICB3aGl0ZUxpc3RbJ3RleHQtc2hhZG93J10gPSB0cnVlOyAvLyBkZWZhdWx0OiBub25lXG4gIHdoaXRlTGlzdFsndGV4dC1zcGFjZS1jb2xsYXBzZSddID0gdHJ1ZTsgLy8gZGVmYXVsdDogY29sbGFwc2VcbiAgd2hpdGVMaXN0Wyd0ZXh0LXRyYW5zZm9ybSddID0gdHJ1ZTsgLy8gZGVmYXVsdDogbm9uZVxuICB3aGl0ZUxpc3RbJ3RleHQtdW5kZXJsaW5lLXBvc2l0aW9uJ10gPSB0cnVlOyAvLyBkZWZhdWx0OiBhdXRvXG4gIHdoaXRlTGlzdFsndGV4dC13cmFwJ10gPSB0cnVlOyAvLyBkZWZhdWx0OiBub3JtYWxcbiAgd2hpdGVMaXN0Wyd0b3AnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBhdXRvXG4gIHdoaXRlTGlzdFsndHJhbnNmb3JtJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogbm9uZVxuICB3aGl0ZUxpc3RbJ3RyYW5zZm9ybS1vcmlnaW4nXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiA1MCUgNTAlIDBcbiAgd2hpdGVMaXN0Wyd0cmFuc2Zvcm0tc3R5bGUnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBmbGF0XG4gIHdoaXRlTGlzdFsndHJhbnNpdGlvbiddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IGRlcGVuZGluZyBvbiBpbmRpdmlkdWFsIHByb3BlcnRpZXNcbiAgd2hpdGVMaXN0Wyd0cmFuc2l0aW9uLWRlbGF5J10gPSBmYWxzZTsgLy8gZGVmYXVsdDogMHNcbiAgd2hpdGVMaXN0Wyd0cmFuc2l0aW9uLWR1cmF0aW9uJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogMHNcbiAgd2hpdGVMaXN0Wyd0cmFuc2l0aW9uLXByb3BlcnR5J10gPSBmYWxzZTsgLy8gZGVmYXVsdDogYWxsXG4gIHdoaXRlTGlzdFsndHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb24nXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBlYXNlXG4gIHdoaXRlTGlzdFsndW5pY29kZS1iaWRpJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogbm9ybWFsXG4gIHdoaXRlTGlzdFsndmVydGljYWwtYWxpZ24nXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBiYXNlbGluZVxuICB3aGl0ZUxpc3RbJ3Zpc2liaWxpdHknXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiB2aXNpYmxlXG4gIHdoaXRlTGlzdFsndm9pY2UtYmFsYW5jZSddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IGNlbnRlclxuICB3aGl0ZUxpc3RbJ3ZvaWNlLWR1cmF0aW9uJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogYXV0b1xuICB3aGl0ZUxpc3RbJ3ZvaWNlLWZhbWlseSddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IGltcGxlbWVudGF0aW9uIGRlcGVuZGVudFxuICB3aGl0ZUxpc3RbJ3ZvaWNlLXBpdGNoJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogbWVkaXVtXG4gIHdoaXRlTGlzdFsndm9pY2UtcmFuZ2UnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBtZWRpdW1cbiAgd2hpdGVMaXN0Wyd2b2ljZS1yYXRlJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogbm9ybWFsXG4gIHdoaXRlTGlzdFsndm9pY2Utc3RyZXNzJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogbm9ybWFsXG4gIHdoaXRlTGlzdFsndm9pY2Utdm9sdW1lJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogbWVkaXVtXG4gIHdoaXRlTGlzdFsndm9sdW1lJ10gPSBmYWxzZTsgLy8gZGVmYXVsdDogbWVkaXVtXG4gIHdoaXRlTGlzdFsnd2hpdGUtc3BhY2UnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBub3JtYWxcbiAgd2hpdGVMaXN0Wyd3aWRvd3MnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiAyXG4gIHdoaXRlTGlzdFsnd2lkdGgnXSA9IHRydWU7IC8vIGRlZmF1bHQ6IGF1dG9cbiAgd2hpdGVMaXN0Wyd3aWxsLWNoYW5nZSddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IGF1dG9cbiAgd2hpdGVMaXN0Wyd3b3JkLWJyZWFrJ10gPSB0cnVlOyAvLyBkZWZhdWx0OiBub3JtYWxcbiAgd2hpdGVMaXN0Wyd3b3JkLXNwYWNpbmcnXSA9IHRydWU7IC8vIGRlZmF1bHQ6IG5vcm1hbFxuICB3aGl0ZUxpc3RbJ3dvcmQtd3JhcCddID0gdHJ1ZTsgLy8gZGVmYXVsdDogbm9ybWFsXG4gIHdoaXRlTGlzdFsnd3JhcC1mbG93J10gPSBmYWxzZTsgLy8gZGVmYXVsdDogYXV0b1xuICB3aGl0ZUxpc3RbJ3dyYXAtdGhyb3VnaCddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IHdyYXBcbiAgd2hpdGVMaXN0Wyd3cml0aW5nLW1vZGUnXSA9IGZhbHNlOyAvLyBkZWZhdWx0OiBob3Jpem9udGFsLXRiXG4gIHdoaXRlTGlzdFsnei1pbmRleCddID0gZmFsc2U7IC8vIGRlZmF1bHQ6IGF1dG9cblxuICByZXR1cm4gd2hpdGVMaXN0O1xufVxuXG5cbi8qKlxuICog5Yy56YWN5Yiw55m95ZCN5Y2V5LiK55qE5LiA5Liq5bGe5oCn5pe2XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuZnVuY3Rpb24gb25BdHRyIChuYW1lLCB2YWx1ZSwgb3B0aW9ucykge1xuICAvLyBkbyBub3RoaW5nXG59XG5cbi8qKlxuICog5Yy56YWN5Yiw5LiN5Zyo55m95ZCN5Y2V5LiK55qE5LiA5Liq5bGe5oCn5pe2XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuZnVuY3Rpb24gb25JZ25vcmVBdHRyIChuYW1lLCB2YWx1ZSwgb3B0aW9ucykge1xuICAvLyBkbyBub3RoaW5nXG59XG5cbnZhciBSRUdFWFBfVVJMX0pBVkFTQ1JJUFQgPSAvamF2YXNjcmlwdFxccypcXDovaW1nO1xuXG4vKipcbiAqIOi/h+a7pOWxnuaAp+WAvFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gKiBAcGFyYW0ge1N0cmluZ30gdmFsdWVcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuZnVuY3Rpb24gc2FmZUF0dHJWYWx1ZShuYW1lLCB2YWx1ZSkge1xuICBpZiAoUkVHRVhQX1VSTF9KQVZBU0NSSVBULnRlc3QodmFsdWUpKSByZXR1cm4gJyc7XG4gIHJldHVybiB2YWx1ZTtcbn1cblxuXG52YXIgd2hpdGVMaXN0ID0gZ2V0RGVmYXVsdFdoaXRlTGlzdCgpO1xudmFyIGdldERlZmF1bHRXaGl0ZUxpc3RfMSA9IGdldERlZmF1bHRXaGl0ZUxpc3Q7XG52YXIgb25BdHRyXzEgPSBvbkF0dHI7XG52YXIgb25JZ25vcmVBdHRyXzEgPSBvbklnbm9yZUF0dHI7XG52YXIgc2FmZUF0dHJWYWx1ZV8xID0gc2FmZUF0dHJWYWx1ZTtcblxudmFyIF9kZWZhdWx0ID0ge1xuXHR3aGl0ZUxpc3Q6IHdoaXRlTGlzdCxcblx0Z2V0RGVmYXVsdFdoaXRlTGlzdDogZ2V0RGVmYXVsdFdoaXRlTGlzdF8xLFxuXHRvbkF0dHI6IG9uQXR0cl8xLFxuXHRvbklnbm9yZUF0dHI6IG9uSWdub3JlQXR0cl8xLFxuXHRzYWZlQXR0clZhbHVlOiBzYWZlQXR0clZhbHVlXzFcbn07XG5cbnZhciB1dGlsID0ge1xuICBpbmRleE9mOiBmdW5jdGlvbiAoYXJyLCBpdGVtKSB7XG4gICAgdmFyIGksIGo7XG4gICAgaWYgKEFycmF5LnByb3RvdHlwZS5pbmRleE9mKSB7XG4gICAgICByZXR1cm4gYXJyLmluZGV4T2YoaXRlbSk7XG4gICAgfVxuICAgIGZvciAoaSA9IDAsIGogPSBhcnIubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICBpZiAoYXJyW2ldID09PSBpdGVtKSB7XG4gICAgICAgIHJldHVybiBpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gLTE7XG4gIH0sXG4gIGZvckVhY2g6IGZ1bmN0aW9uIChhcnIsIGZuLCBzY29wZSkge1xuICAgIHZhciBpLCBqO1xuICAgIGlmIChBcnJheS5wcm90b3R5cGUuZm9yRWFjaCkge1xuICAgICAgcmV0dXJuIGFyci5mb3JFYWNoKGZuLCBzY29wZSk7XG4gICAgfVxuICAgIGZvciAoaSA9IDAsIGogPSBhcnIubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICBmbi5jYWxsKHNjb3BlLCBhcnJbaV0sIGksIGFycik7XG4gICAgfVxuICB9LFxuICB0cmltOiBmdW5jdGlvbiAoc3RyKSB7XG4gICAgaWYgKFN0cmluZy5wcm90b3R5cGUudHJpbSkge1xuICAgICAgcmV0dXJuIHN0ci50cmltKCk7XG4gICAgfVxuICAgIHJldHVybiBzdHIucmVwbGFjZSgvKF5cXHMqKXwoXFxzKiQpL2csICcnKTtcbiAgfSxcbiAgdHJpbVJpZ2h0OiBmdW5jdGlvbiAoc3RyKSB7XG4gICAgaWYgKFN0cmluZy5wcm90b3R5cGUudHJpbVJpZ2h0KSB7XG4gICAgICByZXR1cm4gc3RyLnRyaW1SaWdodCgpO1xuICAgIH1cbiAgICByZXR1cm4gc3RyLnJlcGxhY2UoLyhcXHMqJCkvZywgJycpO1xuICB9XG59O1xuXG4vKipcbiAqIGNzc2ZpbHRlclxuICpcbiAqIEBhdXRob3Ig6ICB6Zu3PGxlaXpvbmdtaW5AZ21haWwuY29tPlxuICovXG5cblxuXG5cbi8qKlxuICog6Kej5p6Qc3R5bGVcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gY3NzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBvbkF0dHIg5aSE55CG5bGe5oCn55qE5Ye95pWwXG4gKiAgIOWPguaVsOagvOW8j++8miBmdW5jdGlvbiAoc291cmNlUG9zaXRpb24sIHBvc2l0aW9uLCBuYW1lLCB2YWx1ZSwgc291cmNlKVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5mdW5jdGlvbiBwYXJzZVN0eWxlIChjc3MsIG9uQXR0cikge1xuICBjc3MgPSB1dGlsLnRyaW1SaWdodChjc3MpO1xuICBpZiAoY3NzW2Nzcy5sZW5ndGggLSAxXSAhPT0gJzsnKSBjc3MgKz0gJzsnO1xuICB2YXIgY3NzTGVuZ3RoID0gY3NzLmxlbmd0aDtcbiAgdmFyIGlzUGFyZW50aGVzaXNPcGVuID0gZmFsc2U7XG4gIHZhciBsYXN0UG9zID0gMDtcbiAgdmFyIGkgPSAwO1xuICB2YXIgcmV0Q1NTID0gJyc7XG5cbiAgZnVuY3Rpb24gYWRkTmV3QXR0ciAoKSB7XG4gICAgLy8g5aaC5p6c5rKh5pyJ5q2j5bi455qE6Zet5ZCI5ZyG5ous5Y+377yM5YiZ55u05o6l5b+955Wl5b2T5YmN5bGe5oCnXG4gICAgaWYgKCFpc1BhcmVudGhlc2lzT3Blbikge1xuICAgICAgdmFyIHNvdXJjZSA9IHV0aWwudHJpbShjc3Muc2xpY2UobGFzdFBvcywgaSkpO1xuICAgICAgdmFyIGogPSBzb3VyY2UuaW5kZXhPZignOicpO1xuICAgICAgaWYgKGogIT09IC0xKSB7XG4gICAgICAgIHZhciBuYW1lID0gdXRpbC50cmltKHNvdXJjZS5zbGljZSgwLCBqKSk7XG4gICAgICAgIHZhciB2YWx1ZSA9IHV0aWwudHJpbShzb3VyY2Uuc2xpY2UoaiArIDEpKTtcbiAgICAgICAgLy8g5b+F6aG75pyJ5bGe5oCn5ZCN56ewXG4gICAgICAgIGlmIChuYW1lKSB7XG4gICAgICAgICAgdmFyIHJldCA9IG9uQXR0cihsYXN0UG9zLCByZXRDU1MubGVuZ3RoLCBuYW1lLCB2YWx1ZSwgc291cmNlKTtcbiAgICAgICAgICBpZiAocmV0KSByZXRDU1MgKz0gcmV0ICsgJzsgJztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBsYXN0UG9zID0gaSArIDE7XG4gIH1cblxuICBmb3IgKDsgaSA8IGNzc0xlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGMgPSBjc3NbaV07XG4gICAgaWYgKGMgPT09ICcvJyAmJiBjc3NbaSArIDFdID09PSAnKicpIHtcbiAgICAgIC8vIOWkh+azqOW8gOWni1xuICAgICAgdmFyIGogPSBjc3MuaW5kZXhPZignKi8nLCBpICsgMik7XG4gICAgICAvLyDlpoLmnpzmsqHmnInmraPluLjnmoTlpIfms6jnu5PmnZ/vvIzliJnlkI7pnaLnmoTpg6jliIblhajpg6jot7Pov4dcbiAgICAgIGlmIChqID09PSAtMSkgYnJlYWs7XG4gICAgICAvLyDnm7TmjqXlsIblvZPliY3kvY3nva7osIPliLDlpIfms6jnu5PlsL7vvIzlubbkuJTliJ3lp4vljJbnirbmgIFcbiAgICAgIGkgPSBqICsgMTtcbiAgICAgIGxhc3RQb3MgPSBpICsgMTtcbiAgICAgIGlzUGFyZW50aGVzaXNPcGVuID0gZmFsc2U7XG4gICAgfSBlbHNlIGlmIChjID09PSAnKCcpIHtcbiAgICAgIGlzUGFyZW50aGVzaXNPcGVuID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKGMgPT09ICcpJykge1xuICAgICAgaXNQYXJlbnRoZXNpc09wZW4gPSBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKGMgPT09ICc7Jykge1xuICAgICAgaWYgKGlzUGFyZW50aGVzaXNPcGVuKSA7IGVsc2Uge1xuICAgICAgICBhZGROZXdBdHRyKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChjID09PSAnXFxuJykge1xuICAgICAgYWRkTmV3QXR0cigpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB1dGlsLnRyaW0ocmV0Q1NTKTtcbn1cblxudmFyIHBhcnNlciA9IHBhcnNlU3R5bGU7XG5cbi8qKlxuICogY3NzZmlsdGVyXG4gKlxuICogQGF1dGhvciDogIHpm7c8bGVpem9uZ21pbkBnbWFpbC5jb20+XG4gKi9cblxuXG5cblxuXG5cbi8qKlxuICog6L+U5Zue5YC85piv5ZCm5Li656m6XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNOdWxsIChvYmopIHtcbiAgcmV0dXJuIChvYmogPT09IHVuZGVmaW5lZCB8fCBvYmogPT09IG51bGwpO1xufVxuXG4vKipcbiAqIOa1heaLt+i0neWvueixoVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuZnVuY3Rpb24gc2hhbGxvd0NvcHlPYmplY3QgKG9iaikge1xuICB2YXIgcmV0ID0ge307XG4gIGZvciAodmFyIGkgaW4gb2JqKSB7XG4gICAgcmV0W2ldID0gb2JqW2ldO1xuICB9XG4gIHJldHVybiByZXQ7XG59XG5cbi8qKlxuICog5Yib5bu6Q1NT6L+H5ruk5ZmoXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqICAgLSB7T2JqZWN0fSB3aGl0ZUxpc3RcbiAqICAgLSB7RnVuY3Rpb259IG9uQXR0clxuICogICAtIHtGdW5jdGlvbn0gb25JZ25vcmVBdHRyXG4gKiAgIC0ge0Z1bmN0aW9ufSBzYWZlQXR0clZhbHVlXG4gKi9cbmZ1bmN0aW9uIEZpbHRlckNTUyAob3B0aW9ucykge1xuICBvcHRpb25zID0gc2hhbGxvd0NvcHlPYmplY3Qob3B0aW9ucyB8fCB7fSk7XG4gIG9wdGlvbnMud2hpdGVMaXN0ID0gb3B0aW9ucy53aGl0ZUxpc3QgfHwgX2RlZmF1bHQud2hpdGVMaXN0O1xuICBvcHRpb25zLm9uQXR0ciA9IG9wdGlvbnMub25BdHRyIHx8IF9kZWZhdWx0Lm9uQXR0cjtcbiAgb3B0aW9ucy5vbklnbm9yZUF0dHIgPSBvcHRpb25zLm9uSWdub3JlQXR0ciB8fCBfZGVmYXVsdC5vbklnbm9yZUF0dHI7XG4gIG9wdGlvbnMuc2FmZUF0dHJWYWx1ZSA9IG9wdGlvbnMuc2FmZUF0dHJWYWx1ZSB8fCBfZGVmYXVsdC5zYWZlQXR0clZhbHVlO1xuICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xufVxuXG5GaWx0ZXJDU1MucHJvdG90eXBlLnByb2Nlc3MgPSBmdW5jdGlvbiAoY3NzKSB7XG4gIC8vIOWFvOWuueWQhOenjeWlh+iRqei+k+WFpVxuICBjc3MgPSBjc3MgfHwgJyc7XG4gIGNzcyA9IGNzcy50b1N0cmluZygpO1xuICBpZiAoIWNzcykgcmV0dXJuICcnO1xuXG4gIHZhciBtZSA9IHRoaXM7XG4gIHZhciBvcHRpb25zID0gbWUub3B0aW9ucztcbiAgdmFyIHdoaXRlTGlzdCA9IG9wdGlvbnMud2hpdGVMaXN0O1xuICB2YXIgb25BdHRyID0gb3B0aW9ucy5vbkF0dHI7XG4gIHZhciBvbklnbm9yZUF0dHIgPSBvcHRpb25zLm9uSWdub3JlQXR0cjtcbiAgdmFyIHNhZmVBdHRyVmFsdWUgPSBvcHRpb25zLnNhZmVBdHRyVmFsdWU7XG5cbiAgdmFyIHJldENTUyA9IHBhcnNlcihjc3MsIGZ1bmN0aW9uIChzb3VyY2VQb3NpdGlvbiwgcG9zaXRpb24sIG5hbWUsIHZhbHVlLCBzb3VyY2UpIHtcblxuICAgIHZhciBjaGVjayA9IHdoaXRlTGlzdFtuYW1lXTtcbiAgICB2YXIgaXNXaGl0ZSA9IGZhbHNlO1xuICAgIGlmIChjaGVjayA9PT0gdHJ1ZSkgaXNXaGl0ZSA9IGNoZWNrO1xuICAgIGVsc2UgaWYgKHR5cGVvZiBjaGVjayA9PT0gJ2Z1bmN0aW9uJykgaXNXaGl0ZSA9IGNoZWNrKHZhbHVlKTtcbiAgICBlbHNlIGlmIChjaGVjayBpbnN0YW5jZW9mIFJlZ0V4cCkgaXNXaGl0ZSA9IGNoZWNrLnRlc3QodmFsdWUpO1xuICAgIGlmIChpc1doaXRlICE9PSB0cnVlKSBpc1doaXRlID0gZmFsc2U7XG5cbiAgICAvLyDlpoLmnpzov4fmu6TlkI4gdmFsdWUg5Li656m65YiZ55u05o6l5b+955WlXG4gICAgdmFsdWUgPSBzYWZlQXR0clZhbHVlKG5hbWUsIHZhbHVlKTtcbiAgICBpZiAoIXZhbHVlKSByZXR1cm47XG5cbiAgICB2YXIgb3B0cyA9IHtcbiAgICAgIHBvc2l0aW9uOiBwb3NpdGlvbixcbiAgICAgIHNvdXJjZVBvc2l0aW9uOiBzb3VyY2VQb3NpdGlvbixcbiAgICAgIHNvdXJjZTogc291cmNlLFxuICAgICAgaXNXaGl0ZTogaXNXaGl0ZVxuICAgIH07XG5cbiAgICBpZiAoaXNXaGl0ZSkge1xuXG4gICAgICB2YXIgcmV0ID0gb25BdHRyKG5hbWUsIHZhbHVlLCBvcHRzKTtcbiAgICAgIGlmIChpc051bGwocmV0KSkge1xuICAgICAgICByZXR1cm4gbmFtZSArICc6JyArIHZhbHVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgIH1cblxuICAgIH0gZWxzZSB7XG5cbiAgICAgIHZhciByZXQgPSBvbklnbm9yZUF0dHIobmFtZSwgdmFsdWUsIG9wdHMpO1xuICAgICAgaWYgKCFpc051bGwocmV0KSkge1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgfVxuXG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gcmV0Q1NTO1xufTtcblxuXG52YXIgY3NzID0gRmlsdGVyQ1NTO1xuXG52YXIgbGliID0gY3JlYXRlQ29tbW9uanNNb2R1bGUoZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykge1xuLyoqXG4gKiBjc3NmaWx0ZXJcbiAqXG4gKiBAYXV0aG9yIOiAgembtzxsZWl6b25nbWluQGdtYWlsLmNvbT5cbiAqL1xuXG5cblxuXG5cbi8qKlxuICogWFNT6L+H5rukXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGNzcyDopoHov4fmu6TnmoRDU1Pku6PnoIFcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIOmAiemhue+8mndoaXRlTGlzdCwgb25BdHRyLCBvbklnbm9yZUF0dHJcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZmlsdGVyQ1NTIChodG1sLCBvcHRpb25zKSB7XG4gIHZhciB4c3MgPSBuZXcgY3NzKG9wdGlvbnMpO1xuICByZXR1cm4geHNzLnByb2Nlc3MoaHRtbCk7XG59XG5cblxuLy8g6L6T5Ye6XG5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBmaWx0ZXJDU1M7XG5leHBvcnRzLkZpbHRlckNTUyA9IGNzcztcbmZvciAodmFyIGkgaW4gX2RlZmF1bHQpIGV4cG9ydHNbaV0gPSBfZGVmYXVsdFtpXTtcbn0pO1xuXG52YXIgdXRpbCQxID0ge1xuICBpbmRleE9mOiBmdW5jdGlvbihhcnIsIGl0ZW0pIHtcbiAgICB2YXIgaSwgajtcbiAgICBpZiAoQXJyYXkucHJvdG90eXBlLmluZGV4T2YpIHtcbiAgICAgIHJldHVybiBhcnIuaW5kZXhPZihpdGVtKTtcbiAgICB9XG4gICAgZm9yIChpID0gMCwgaiA9IGFyci5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgIGlmIChhcnJbaV0gPT09IGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAtMTtcbiAgfSxcbiAgZm9yRWFjaDogZnVuY3Rpb24oYXJyLCBmbiwgc2NvcGUpIHtcbiAgICB2YXIgaSwgajtcbiAgICBpZiAoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpIHtcbiAgICAgIHJldHVybiBhcnIuZm9yRWFjaChmbiwgc2NvcGUpO1xuICAgIH1cbiAgICBmb3IgKGkgPSAwLCBqID0gYXJyLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgICAgZm4uY2FsbChzY29wZSwgYXJyW2ldLCBpLCBhcnIpO1xuICAgIH1cbiAgfSxcbiAgdHJpbTogZnVuY3Rpb24oc3RyKSB7XG4gICAgaWYgKFN0cmluZy5wcm90b3R5cGUudHJpbSkge1xuICAgICAgcmV0dXJuIHN0ci50cmltKCk7XG4gICAgfVxuICAgIHJldHVybiBzdHIucmVwbGFjZSgvKF5cXHMqKXwoXFxzKiQpL2csIFwiXCIpO1xuICB9LFxuICBzcGFjZUluZGV4OiBmdW5jdGlvbihzdHIpIHtcbiAgICB2YXIgcmVnID0gL1xcc3xcXG58XFx0LztcbiAgICB2YXIgbWF0Y2ggPSByZWcuZXhlYyhzdHIpO1xuICAgIHJldHVybiBtYXRjaCA/IG1hdGNoLmluZGV4IDogLTE7XG4gIH1cbn07XG5cbi8qKlxuICogZGVmYXVsdCBzZXR0aW5nc1xuICpcbiAqIEBhdXRob3IgWm9uZ21pbiBMZWk8bGVpem9uZ21pbkBnbWFpbC5jb20+XG4gKi9cblxudmFyIEZpbHRlckNTUyQxID0gbGliLkZpbHRlckNTUztcbnZhciBnZXREZWZhdWx0Q1NTV2hpdGVMaXN0ID0gbGliLmdldERlZmF1bHRXaGl0ZUxpc3Q7XG5cblxuZnVuY3Rpb24gZ2V0RGVmYXVsdFdoaXRlTGlzdCQxKCkge1xuICByZXR1cm4ge1xuICAgIGE6IFtcInRhcmdldFwiLCBcImhyZWZcIiwgXCJ0aXRsZVwiXSxcbiAgICBhYmJyOiBbXCJ0aXRsZVwiXSxcbiAgICBhZGRyZXNzOiBbXSxcbiAgICBhcmVhOiBbXCJzaGFwZVwiLCBcImNvb3Jkc1wiLCBcImhyZWZcIiwgXCJhbHRcIl0sXG4gICAgYXJ0aWNsZTogW10sXG4gICAgYXNpZGU6IFtdLFxuICAgIGF1ZGlvOiBbXCJhdXRvcGxheVwiLCBcImNvbnRyb2xzXCIsIFwibG9vcFwiLCBcInByZWxvYWRcIiwgXCJzcmNcIl0sXG4gICAgYjogW10sXG4gICAgYmRpOiBbXCJkaXJcIl0sXG4gICAgYmRvOiBbXCJkaXJcIl0sXG4gICAgYmlnOiBbXSxcbiAgICBibG9ja3F1b3RlOiBbXCJjaXRlXCJdLFxuICAgIGJyOiBbXSxcbiAgICBjYXB0aW9uOiBbXSxcbiAgICBjZW50ZXI6IFtdLFxuICAgIGNpdGU6IFtdLFxuICAgIGNvZGU6IFtdLFxuICAgIGNvbDogW1wiYWxpZ25cIiwgXCJ2YWxpZ25cIiwgXCJzcGFuXCIsIFwid2lkdGhcIl0sXG4gICAgY29sZ3JvdXA6IFtcImFsaWduXCIsIFwidmFsaWduXCIsIFwic3BhblwiLCBcIndpZHRoXCJdLFxuICAgIGRkOiBbXSxcbiAgICBkZWw6IFtcImRhdGV0aW1lXCJdLFxuICAgIGRldGFpbHM6IFtcIm9wZW5cIl0sXG4gICAgZGl2OiBbXSxcbiAgICBkbDogW10sXG4gICAgZHQ6IFtdLFxuICAgIGVtOiBbXSxcbiAgICBmb250OiBbXCJjb2xvclwiLCBcInNpemVcIiwgXCJmYWNlXCJdLFxuICAgIGZvb3RlcjogW10sXG4gICAgaDE6IFtdLFxuICAgIGgyOiBbXSxcbiAgICBoMzogW10sXG4gICAgaDQ6IFtdLFxuICAgIGg1OiBbXSxcbiAgICBoNjogW10sXG4gICAgaGVhZGVyOiBbXSxcbiAgICBocjogW10sXG4gICAgaTogW10sXG4gICAgaW1nOiBbXCJzcmNcIiwgXCJhbHRcIiwgXCJ0aXRsZVwiLCBcIndpZHRoXCIsIFwiaGVpZ2h0XCJdLFxuICAgIGluczogW1wiZGF0ZXRpbWVcIl0sXG4gICAgbGk6IFtdLFxuICAgIG1hcms6IFtdLFxuICAgIG5hdjogW10sXG4gICAgb2w6IFtdLFxuICAgIHA6IFtdLFxuICAgIHByZTogW10sXG4gICAgczogW10sXG4gICAgc2VjdGlvbjogW10sXG4gICAgc21hbGw6IFtdLFxuICAgIHNwYW46IFtdLFxuICAgIHN1YjogW10sXG4gICAgc3VwOiBbXSxcbiAgICBzdHJvbmc6IFtdLFxuICAgIHRhYmxlOiBbXCJ3aWR0aFwiLCBcImJvcmRlclwiLCBcImFsaWduXCIsIFwidmFsaWduXCJdLFxuICAgIHRib2R5OiBbXCJhbGlnblwiLCBcInZhbGlnblwiXSxcbiAgICB0ZDogW1wid2lkdGhcIiwgXCJyb3dzcGFuXCIsIFwiY29sc3BhblwiLCBcImFsaWduXCIsIFwidmFsaWduXCJdLFxuICAgIHRmb290OiBbXCJhbGlnblwiLCBcInZhbGlnblwiXSxcbiAgICB0aDogW1wid2lkdGhcIiwgXCJyb3dzcGFuXCIsIFwiY29sc3BhblwiLCBcImFsaWduXCIsIFwidmFsaWduXCJdLFxuICAgIHRoZWFkOiBbXCJhbGlnblwiLCBcInZhbGlnblwiXSxcbiAgICB0cjogW1wicm93c3BhblwiLCBcImFsaWduXCIsIFwidmFsaWduXCJdLFxuICAgIHR0OiBbXSxcbiAgICB1OiBbXSxcbiAgICB1bDogW10sXG4gICAgdmlkZW86IFtcImF1dG9wbGF5XCIsIFwiY29udHJvbHNcIiwgXCJsb29wXCIsIFwicHJlbG9hZFwiLCBcInNyY1wiLCBcImhlaWdodFwiLCBcIndpZHRoXCJdXG4gIH07XG59XG5cbnZhciBkZWZhdWx0Q1NTRmlsdGVyID0gbmV3IEZpbHRlckNTUyQxKCk7XG5cbi8qKlxuICogZGVmYXVsdCBvblRhZyBmdW5jdGlvblxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0YWdcbiAqIEBwYXJhbSB7U3RyaW5nfSBodG1sXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5mdW5jdGlvbiBvblRhZyh0YWcsIGh0bWwsIG9wdGlvbnMpIHtcbiAgLy8gZG8gbm90aGluZ1xufVxuXG4vKipcbiAqIGRlZmF1bHQgb25JZ25vcmVUYWcgZnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdGFnXG4gKiBAcGFyYW0ge1N0cmluZ30gaHRtbFxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuZnVuY3Rpb24gb25JZ25vcmVUYWcodGFnLCBodG1sLCBvcHRpb25zKSB7XG4gIC8vIGRvIG5vdGhpbmdcbn1cblxuLyoqXG4gKiBkZWZhdWx0IG9uVGFnQXR0ciBmdW5jdGlvblxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0YWdcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gKiBAcGFyYW0ge1N0cmluZ30gdmFsdWVcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuZnVuY3Rpb24gb25UYWdBdHRyKHRhZywgbmFtZSwgdmFsdWUpIHtcbiAgLy8gZG8gbm90aGluZ1xufVxuXG4vKipcbiAqIGRlZmF1bHQgb25JZ25vcmVUYWdBdHRyIGZ1bmN0aW9uXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHRhZ1xuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5mdW5jdGlvbiBvbklnbm9yZVRhZ0F0dHIodGFnLCBuYW1lLCB2YWx1ZSkge1xuICAvLyBkbyBub3RoaW5nXG59XG5cbi8qKlxuICogZGVmYXVsdCBlc2NhcGVIdG1sIGZ1bmN0aW9uXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGh0bWxcbiAqL1xuZnVuY3Rpb24gZXNjYXBlSHRtbChodG1sKSB7XG4gIHJldHVybiBodG1sLnJlcGxhY2UoUkVHRVhQX0xULCBcIiZsdDtcIikucmVwbGFjZShSRUdFWFBfR1QsIFwiJmd0O1wiKTtcbn1cblxuLyoqXG4gKiBkZWZhdWx0IHNhZmVBdHRyVmFsdWUgZnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdGFnXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG4gKiBAcGFyYW0ge09iamVjdH0gY3NzRmlsdGVyXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIHNhZmVBdHRyVmFsdWUkMSh0YWcsIG5hbWUsIHZhbHVlLCBjc3NGaWx0ZXIpIHtcbiAgLy8gdW5lc2NhcGUgYXR0cmlidXRlIHZhbHVlIGZpcnN0bHlcbiAgdmFsdWUgPSBmcmllbmRseUF0dHJWYWx1ZSh2YWx1ZSk7XG5cbiAgaWYgKG5hbWUgPT09IFwiaHJlZlwiIHx8IG5hbWUgPT09IFwic3JjXCIpIHtcbiAgICAvLyBmaWx0ZXIgYGhyZWZgIGFuZCBgc3JjYCBhdHRyaWJ1dGVcbiAgICAvLyBvbmx5IGFsbG93IHRoZSB2YWx1ZSB0aGF0IHN0YXJ0cyB3aXRoIGBodHRwOi8vYCB8IGBodHRwczovL2AgfCBgbWFpbHRvOmAgfCBgL2AgfCBgI2BcbiAgICB2YWx1ZSA9IHV0aWwkMS50cmltKHZhbHVlKTtcbiAgICBpZiAodmFsdWUgPT09IFwiI1wiKSByZXR1cm4gXCIjXCI7XG4gICAgaWYgKFxuICAgICAgIShcbiAgICAgICAgdmFsdWUuc3Vic3RyKDAsIDcpID09PSBcImh0dHA6Ly9cIiB8fFxuICAgICAgICB2YWx1ZS5zdWJzdHIoMCwgOCkgPT09IFwiaHR0cHM6Ly9cIiB8fFxuICAgICAgICB2YWx1ZS5zdWJzdHIoMCwgNykgPT09IFwibWFpbHRvOlwiIHx8XG4gICAgICAgIHZhbHVlLnN1YnN0cigwLCA0KSA9PT0gXCJ0ZWw6XCIgfHxcbiAgICAgICAgdmFsdWUuc3Vic3RyKDAsIDExKSA9PT0gXCJkYXRhOmltYWdlL1wiIHx8XG4gICAgICAgIHZhbHVlLnN1YnN0cigwLCA2KSA9PT0gXCJmdHA6Ly9cIiB8fFxuICAgICAgICB2YWx1ZS5zdWJzdHIoMCwgMikgPT09IFwiLi9cIiB8fFxuICAgICAgICB2YWx1ZS5zdWJzdHIoMCwgMykgPT09IFwiLi4vXCIgfHxcbiAgICAgICAgdmFsdWVbMF0gPT09IFwiI1wiIHx8XG4gICAgICAgIHZhbHVlWzBdID09PSBcIi9cIlxuICAgICAgKVxuICAgICkge1xuICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfVxuICB9IGVsc2UgaWYgKG5hbWUgPT09IFwiYmFja2dyb3VuZFwiKSB7XG4gICAgLy8gZmlsdGVyIGBiYWNrZ3JvdW5kYCBhdHRyaWJ1dGUgKG1heWJlIG5vIHVzZSlcbiAgICAvLyBgamF2YXNjcmlwdDpgXG4gICAgUkVHRVhQX0RFRkFVTFRfT05fVEFHX0FUVFJfNC5sYXN0SW5kZXggPSAwO1xuICAgIGlmIChSRUdFWFBfREVGQVVMVF9PTl9UQUdfQVRUUl80LnRlc3QodmFsdWUpKSB7XG4gICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG4gIH0gZWxzZSBpZiAobmFtZSA9PT0gXCJzdHlsZVwiKSB7XG4gICAgLy8gYGV4cHJlc3Npb24oKWBcbiAgICBSRUdFWFBfREVGQVVMVF9PTl9UQUdfQVRUUl83Lmxhc3RJbmRleCA9IDA7XG4gICAgaWYgKFJFR0VYUF9ERUZBVUxUX09OX1RBR19BVFRSXzcudGVzdCh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBcIlwiO1xuICAgIH1cbiAgICAvLyBgdXJsKClgXG4gICAgUkVHRVhQX0RFRkFVTFRfT05fVEFHX0FUVFJfOC5sYXN0SW5kZXggPSAwO1xuICAgIGlmIChSRUdFWFBfREVGQVVMVF9PTl9UQUdfQVRUUl84LnRlc3QodmFsdWUpKSB7XG4gICAgICBSRUdFWFBfREVGQVVMVF9PTl9UQUdfQVRUUl80Lmxhc3RJbmRleCA9IDA7XG4gICAgICBpZiAoUkVHRVhQX0RFRkFVTFRfT05fVEFHX0FUVFJfNC50ZXN0KHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGNzc0ZpbHRlciAhPT0gZmFsc2UpIHtcbiAgICAgIGNzc0ZpbHRlciA9IGNzc0ZpbHRlciB8fCBkZWZhdWx0Q1NTRmlsdGVyO1xuICAgICAgdmFsdWUgPSBjc3NGaWx0ZXIucHJvY2Vzcyh2YWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgLy8gZXNjYXBlIGA8PlwiYCBiZWZvcmUgcmV0dXJuc1xuICB2YWx1ZSA9IGVzY2FwZUF0dHJWYWx1ZSh2YWx1ZSk7XG4gIHJldHVybiB2YWx1ZTtcbn1cblxuLy8gUmVnRXhwIGxpc3RcbnZhciBSRUdFWFBfTFQgPSAvPC9nO1xudmFyIFJFR0VYUF9HVCA9IC8+L2c7XG52YXIgUkVHRVhQX1FVT1RFID0gL1wiL2c7XG52YXIgUkVHRVhQX1FVT1RFXzIgPSAvJnF1b3Q7L2c7XG52YXIgUkVHRVhQX0FUVFJfVkFMVUVfMSA9IC8mIyhbYS16QS1aMC05XSopOz8vZ2ltO1xudmFyIFJFR0VYUF9BVFRSX1ZBTFVFX0NPTE9OID0gLyZjb2xvbjs/L2dpbTtcbnZhciBSRUdFWFBfQVRUUl9WQUxVRV9ORVdMSU5FID0gLyZuZXdsaW5lOz8vZ2ltO1xudmFyIFJFR0VYUF9ERUZBVUxUX09OX1RBR19BVFRSXzQgPSAvKChqXFxzKmFcXHMqdlxccyphfHZcXHMqYnxsXFxzKmlcXHMqdlxccyplKVxccypzXFxzKmNcXHMqclxccyppXFxzKnBcXHMqdFxccyp8bVxccypvXFxzKmNcXHMqaFxccyphKVxcOi9naTtcbnZhciBSRUdFWFBfREVGQVVMVF9PTl9UQUdfQVRUUl83ID0gL2VcXHMqeFxccypwXFxzKnJcXHMqZVxccypzXFxzKnNcXHMqaVxccypvXFxzKm5cXHMqXFwoLiovZ2k7XG52YXIgUkVHRVhQX0RFRkFVTFRfT05fVEFHX0FUVFJfOCA9IC91XFxzKnJcXHMqbFxccypcXCguKi9naTtcblxuLyoqXG4gKiBlc2NhcGUgZG91YmUgcXVvdGVcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHN0clxuICovXG5mdW5jdGlvbiBlc2NhcGVRdW90ZShzdHIpIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKFJFR0VYUF9RVU9URSwgXCImcXVvdDtcIik7XG59XG5cbi8qKlxuICogdW5lc2NhcGUgZG91YmxlIHF1b3RlXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7U3RyaW5nfSBzdHJcbiAqL1xuZnVuY3Rpb24gdW5lc2NhcGVRdW90ZShzdHIpIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKFJFR0VYUF9RVU9URV8yLCAnXCInKTtcbn1cblxuLyoqXG4gKiBlc2NhcGUgaHRtbCBlbnRpdGllc1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZXNjYXBlSHRtbEVudGl0aWVzKHN0cikge1xuICByZXR1cm4gc3RyLnJlcGxhY2UoUkVHRVhQX0FUVFJfVkFMVUVfMSwgZnVuY3Rpb24gcmVwbGFjZVVuaWNvZGUoc3RyLCBjb2RlKSB7XG4gICAgcmV0dXJuIGNvZGVbMF0gPT09IFwieFwiIHx8IGNvZGVbMF0gPT09IFwiWFwiXG4gICAgICA/IFN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQoY29kZS5zdWJzdHIoMSksIDE2KSlcbiAgICAgIDogU3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludChjb2RlLCAxMCkpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBlc2NhcGUgaHRtbDUgbmV3IGRhbmdlciBlbnRpdGllc1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZXNjYXBlRGFuZ2VySHRtbDVFbnRpdGllcyhzdHIpIHtcbiAgcmV0dXJuIHN0clxuICAgIC5yZXBsYWNlKFJFR0VYUF9BVFRSX1ZBTFVFX0NPTE9OLCBcIjpcIilcbiAgICAucmVwbGFjZShSRUdFWFBfQVRUUl9WQUxVRV9ORVdMSU5FLCBcIiBcIik7XG59XG5cbi8qKlxuICogY2xlYXIgbm9ucHJpbnRhYmxlIGNoYXJhY3RlcnNcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGNsZWFyTm9uUHJpbnRhYmxlQ2hhcmFjdGVyKHN0cikge1xuICB2YXIgc3RyMiA9IFwiXCI7XG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSBzdHIubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICBzdHIyICs9IHN0ci5jaGFyQ29kZUF0KGkpIDwgMzIgPyBcIiBcIiA6IHN0ci5jaGFyQXQoaSk7XG4gIH1cbiAgcmV0dXJuIHV0aWwkMS50cmltKHN0cjIpO1xufVxuXG4vKipcbiAqIGdldCBmcmllbmRseSBhdHRyaWJ1dGUgdmFsdWVcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGZyaWVuZGx5QXR0clZhbHVlKHN0cikge1xuICBzdHIgPSB1bmVzY2FwZVF1b3RlKHN0cik7XG4gIHN0ciA9IGVzY2FwZUh0bWxFbnRpdGllcyhzdHIpO1xuICBzdHIgPSBlc2NhcGVEYW5nZXJIdG1sNUVudGl0aWVzKHN0cik7XG4gIHN0ciA9IGNsZWFyTm9uUHJpbnRhYmxlQ2hhcmFjdGVyKHN0cik7XG4gIHJldHVybiBzdHI7XG59XG5cbi8qKlxuICogdW5lc2NhcGUgYXR0cmlidXRlIHZhbHVlXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5mdW5jdGlvbiBlc2NhcGVBdHRyVmFsdWUoc3RyKSB7XG4gIHN0ciA9IGVzY2FwZVF1b3RlKHN0cik7XG4gIHN0ciA9IGVzY2FwZUh0bWwoc3RyKTtcbiAgcmV0dXJuIHN0cjtcbn1cblxuLyoqXG4gKiBgb25JZ25vcmVUYWdgIGZ1bmN0aW9uIGZvciByZW1vdmluZyBhbGwgdGhlIHRhZ3MgdGhhdCBhcmUgbm90IGluIHdoaXRlbGlzdFxuICovXG5mdW5jdGlvbiBvbklnbm9yZVRhZ1N0cmlwQWxsKCkge1xuICByZXR1cm4gXCJcIjtcbn1cblxuLyoqXG4gKiByZW1vdmUgdGFnIGJvZHlcbiAqIHNwZWNpZnkgYSBgdGFnc2AgbGlzdCwgaWYgdGhlIHRhZyBpcyBub3QgaW4gdGhlIGB0YWdzYCBsaXN0IHRoZW4gcHJvY2VzcyBieSB0aGUgc3BlY2lmeSBmdW5jdGlvbiAob3B0aW9uYWwpXG4gKlxuICogQHBhcmFtIHthcnJheX0gdGFnc1xuICogQHBhcmFtIHtmdW5jdGlvbn0gbmV4dFxuICovXG5mdW5jdGlvbiBTdHJpcFRhZ0JvZHkodGFncywgbmV4dCkge1xuICBpZiAodHlwZW9mIG5leHQgIT09IFwiZnVuY3Rpb25cIikge1xuICAgIG5leHQgPSBmdW5jdGlvbigpIHt9O1xuICB9XG5cbiAgdmFyIGlzUmVtb3ZlQWxsVGFnID0gIUFycmF5LmlzQXJyYXkodGFncyk7XG4gIGZ1bmN0aW9uIGlzUmVtb3ZlVGFnKHRhZykge1xuICAgIGlmIChpc1JlbW92ZUFsbFRhZykgcmV0dXJuIHRydWU7XG4gICAgcmV0dXJuIHV0aWwkMS5pbmRleE9mKHRhZ3MsIHRhZykgIT09IC0xO1xuICB9XG5cbiAgdmFyIHJlbW92ZUxpc3QgPSBbXTtcbiAgdmFyIHBvc1N0YXJ0ID0gZmFsc2U7XG5cbiAgcmV0dXJuIHtcbiAgICBvbklnbm9yZVRhZzogZnVuY3Rpb24odGFnLCBodG1sLCBvcHRpb25zKSB7XG4gICAgICBpZiAoaXNSZW1vdmVUYWcodGFnKSkge1xuICAgICAgICBpZiAob3B0aW9ucy5pc0Nsb3NpbmcpIHtcbiAgICAgICAgICB2YXIgcmV0ID0gXCJbL3JlbW92ZWRdXCI7XG4gICAgICAgICAgdmFyIGVuZCA9IG9wdGlvbnMucG9zaXRpb24gKyByZXQubGVuZ3RoO1xuICAgICAgICAgIHJlbW92ZUxpc3QucHVzaChbXG4gICAgICAgICAgICBwb3NTdGFydCAhPT0gZmFsc2UgPyBwb3NTdGFydCA6IG9wdGlvbnMucG9zaXRpb24sXG4gICAgICAgICAgICBlbmRcbiAgICAgICAgICBdKTtcbiAgICAgICAgICBwb3NTdGFydCA9IGZhbHNlO1xuICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKCFwb3NTdGFydCkge1xuICAgICAgICAgICAgcG9zU3RhcnQgPSBvcHRpb25zLnBvc2l0aW9uO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gXCJbcmVtb3ZlZF1cIjtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG5leHQodGFnLCBodG1sLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHJlbW92ZTogZnVuY3Rpb24oaHRtbCkge1xuICAgICAgdmFyIHJldGh0bWwgPSBcIlwiO1xuICAgICAgdmFyIGxhc3RQb3MgPSAwO1xuICAgICAgdXRpbCQxLmZvckVhY2gocmVtb3ZlTGlzdCwgZnVuY3Rpb24ocG9zKSB7XG4gICAgICAgIHJldGh0bWwgKz0gaHRtbC5zbGljZShsYXN0UG9zLCBwb3NbMF0pO1xuICAgICAgICBsYXN0UG9zID0gcG9zWzFdO1xuICAgICAgfSk7XG4gICAgICByZXRodG1sICs9IGh0bWwuc2xpY2UobGFzdFBvcyk7XG4gICAgICByZXR1cm4gcmV0aHRtbDtcbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogcmVtb3ZlIGh0bWwgY29tbWVudHNcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gaHRtbFxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5mdW5jdGlvbiBzdHJpcENvbW1lbnRUYWcoaHRtbCkge1xuICByZXR1cm4gaHRtbC5yZXBsYWNlKFNUUklQX0NPTU1FTlRfVEFHX1JFR0VYUCwgXCJcIik7XG59XG52YXIgU1RSSVBfQ09NTUVOVF9UQUdfUkVHRVhQID0gLzwhLS1bXFxzXFxTXSo/LS0+L2c7XG5cbi8qKlxuICogcmVtb3ZlIGludmlzaWJsZSBjaGFyYWN0ZXJzXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGh0bWxcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuZnVuY3Rpb24gc3RyaXBCbGFua0NoYXIoaHRtbCkge1xuICB2YXIgY2hhcnMgPSBodG1sLnNwbGl0KFwiXCIpO1xuICBjaGFycyA9IGNoYXJzLmZpbHRlcihmdW5jdGlvbihjaGFyKSB7XG4gICAgdmFyIGMgPSBjaGFyLmNoYXJDb2RlQXQoMCk7XG4gICAgaWYgKGMgPT09IDEyNykgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChjIDw9IDMxKSB7XG4gICAgICBpZiAoYyA9PT0gMTAgfHwgYyA9PT0gMTMpIHJldHVybiB0cnVlO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSk7XG4gIHJldHVybiBjaGFycy5qb2luKFwiXCIpO1xufVxuXG52YXIgd2hpdGVMaXN0JDEgPSBnZXREZWZhdWx0V2hpdGVMaXN0JDEoKTtcbnZhciBnZXREZWZhdWx0V2hpdGVMaXN0XzEkMSA9IGdldERlZmF1bHRXaGl0ZUxpc3QkMTtcbnZhciBvblRhZ18xID0gb25UYWc7XG52YXIgb25JZ25vcmVUYWdfMSA9IG9uSWdub3JlVGFnO1xudmFyIG9uVGFnQXR0cl8xID0gb25UYWdBdHRyO1xudmFyIG9uSWdub3JlVGFnQXR0cl8xID0gb25JZ25vcmVUYWdBdHRyO1xudmFyIHNhZmVBdHRyVmFsdWVfMSQxID0gc2FmZUF0dHJWYWx1ZSQxO1xudmFyIGVzY2FwZUh0bWxfMSA9IGVzY2FwZUh0bWw7XG52YXIgZXNjYXBlUXVvdGVfMSA9IGVzY2FwZVF1b3RlO1xudmFyIHVuZXNjYXBlUXVvdGVfMSA9IHVuZXNjYXBlUXVvdGU7XG52YXIgZXNjYXBlSHRtbEVudGl0aWVzXzEgPSBlc2NhcGVIdG1sRW50aXRpZXM7XG52YXIgZXNjYXBlRGFuZ2VySHRtbDVFbnRpdGllc18xID0gZXNjYXBlRGFuZ2VySHRtbDVFbnRpdGllcztcbnZhciBjbGVhck5vblByaW50YWJsZUNoYXJhY3Rlcl8xID0gY2xlYXJOb25QcmludGFibGVDaGFyYWN0ZXI7XG52YXIgZnJpZW5kbHlBdHRyVmFsdWVfMSA9IGZyaWVuZGx5QXR0clZhbHVlO1xudmFyIGVzY2FwZUF0dHJWYWx1ZV8xID0gZXNjYXBlQXR0clZhbHVlO1xudmFyIG9uSWdub3JlVGFnU3RyaXBBbGxfMSA9IG9uSWdub3JlVGFnU3RyaXBBbGw7XG52YXIgU3RyaXBUYWdCb2R5XzEgPSBTdHJpcFRhZ0JvZHk7XG52YXIgc3RyaXBDb21tZW50VGFnXzEgPSBzdHJpcENvbW1lbnRUYWc7XG52YXIgc3RyaXBCbGFua0NoYXJfMSA9IHN0cmlwQmxhbmtDaGFyO1xudmFyIGNzc0ZpbHRlciA9IGRlZmF1bHRDU1NGaWx0ZXI7XG52YXIgZ2V0RGVmYXVsdENTU1doaXRlTGlzdF8xID0gZ2V0RGVmYXVsdENTU1doaXRlTGlzdDtcblxudmFyIF9kZWZhdWx0JDEgPSB7XG5cdHdoaXRlTGlzdDogd2hpdGVMaXN0JDEsXG5cdGdldERlZmF1bHRXaGl0ZUxpc3Q6IGdldERlZmF1bHRXaGl0ZUxpc3RfMSQxLFxuXHRvblRhZzogb25UYWdfMSxcblx0b25JZ25vcmVUYWc6IG9uSWdub3JlVGFnXzEsXG5cdG9uVGFnQXR0cjogb25UYWdBdHRyXzEsXG5cdG9uSWdub3JlVGFnQXR0cjogb25JZ25vcmVUYWdBdHRyXzEsXG5cdHNhZmVBdHRyVmFsdWU6IHNhZmVBdHRyVmFsdWVfMSQxLFxuXHRlc2NhcGVIdG1sOiBlc2NhcGVIdG1sXzEsXG5cdGVzY2FwZVF1b3RlOiBlc2NhcGVRdW90ZV8xLFxuXHR1bmVzY2FwZVF1b3RlOiB1bmVzY2FwZVF1b3RlXzEsXG5cdGVzY2FwZUh0bWxFbnRpdGllczogZXNjYXBlSHRtbEVudGl0aWVzXzEsXG5cdGVzY2FwZURhbmdlckh0bWw1RW50aXRpZXM6IGVzY2FwZURhbmdlckh0bWw1RW50aXRpZXNfMSxcblx0Y2xlYXJOb25QcmludGFibGVDaGFyYWN0ZXI6IGNsZWFyTm9uUHJpbnRhYmxlQ2hhcmFjdGVyXzEsXG5cdGZyaWVuZGx5QXR0clZhbHVlOiBmcmllbmRseUF0dHJWYWx1ZV8xLFxuXHRlc2NhcGVBdHRyVmFsdWU6IGVzY2FwZUF0dHJWYWx1ZV8xLFxuXHRvbklnbm9yZVRhZ1N0cmlwQWxsOiBvbklnbm9yZVRhZ1N0cmlwQWxsXzEsXG5cdFN0cmlwVGFnQm9keTogU3RyaXBUYWdCb2R5XzEsXG5cdHN0cmlwQ29tbWVudFRhZzogc3RyaXBDb21tZW50VGFnXzEsXG5cdHN0cmlwQmxhbmtDaGFyOiBzdHJpcEJsYW5rQ2hhcl8xLFxuXHRjc3NGaWx0ZXI6IGNzc0ZpbHRlcixcblx0Z2V0RGVmYXVsdENTU1doaXRlTGlzdDogZ2V0RGVmYXVsdENTU1doaXRlTGlzdF8xXG59O1xuXG4vKipcbiAqIFNpbXBsZSBIVE1MIFBhcnNlclxuICpcbiAqIEBhdXRob3IgWm9uZ21pbiBMZWk8bGVpem9uZ21pbkBnbWFpbC5jb20+XG4gKi9cblxuXG5cbi8qKlxuICogZ2V0IHRhZyBuYW1lXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGh0bWwgZS5nLiAnPGEgaGVmPVwiI1wiPidcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZ2V0VGFnTmFtZShodG1sKSB7XG4gIHZhciBpID0gdXRpbCQxLnNwYWNlSW5kZXgoaHRtbCk7XG4gIGlmIChpID09PSAtMSkge1xuICAgIHZhciB0YWdOYW1lID0gaHRtbC5zbGljZSgxLCAtMSk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHRhZ05hbWUgPSBodG1sLnNsaWNlKDEsIGkgKyAxKTtcbiAgfVxuICB0YWdOYW1lID0gdXRpbCQxLnRyaW0odGFnTmFtZSkudG9Mb3dlckNhc2UoKTtcbiAgaWYgKHRhZ05hbWUuc2xpY2UoMCwgMSkgPT09IFwiL1wiKSB0YWdOYW1lID0gdGFnTmFtZS5zbGljZSgxKTtcbiAgaWYgKHRhZ05hbWUuc2xpY2UoLTEpID09PSBcIi9cIikgdGFnTmFtZSA9IHRhZ05hbWUuc2xpY2UoMCwgLTEpO1xuICByZXR1cm4gdGFnTmFtZTtcbn1cblxuLyoqXG4gKiBpcyBjbG9zZSB0YWc/XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGh0bWwg5aaC77yaJzxhIGhlZj1cIiNcIj4nXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5mdW5jdGlvbiBpc0Nsb3NpbmcoaHRtbCkge1xuICByZXR1cm4gaHRtbC5zbGljZSgwLCAyKSA9PT0gXCI8L1wiO1xufVxuXG4vKipcbiAqIHBhcnNlIGlucHV0IGh0bWwgYW5kIHJldHVybnMgcHJvY2Vzc2VkIGh0bWxcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gaHRtbFxuICogQHBhcmFtIHtGdW5jdGlvbn0gb25UYWcgZS5nLiBmdW5jdGlvbiAoc291cmNlUG9zaXRpb24sIHBvc2l0aW9uLCB0YWcsIGh0bWwsIGlzQ2xvc2luZylcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGVzY2FwZUh0bWxcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuZnVuY3Rpb24gcGFyc2VUYWcoaHRtbCwgb25UYWcsIGVzY2FwZUh0bWwpIHtcblxuICB2YXIgcmV0aHRtbCA9IFwiXCI7XG4gIHZhciBsYXN0UG9zID0gMDtcbiAgdmFyIHRhZ1N0YXJ0ID0gZmFsc2U7XG4gIHZhciBxdW90ZVN0YXJ0ID0gZmFsc2U7XG4gIHZhciBjdXJyZW50UG9zID0gMDtcbiAgdmFyIGxlbiA9IGh0bWwubGVuZ3RoO1xuICB2YXIgY3VycmVudFRhZ05hbWUgPSBcIlwiO1xuICB2YXIgY3VycmVudEh0bWwgPSBcIlwiO1xuXG4gIGNoYXJpdGVyYXRvcjogZm9yIChjdXJyZW50UG9zID0gMDsgY3VycmVudFBvcyA8IGxlbjsgY3VycmVudFBvcysrKSB7XG4gICAgdmFyIGMgPSBodG1sLmNoYXJBdChjdXJyZW50UG9zKTtcbiAgICBpZiAodGFnU3RhcnQgPT09IGZhbHNlKSB7XG4gICAgICBpZiAoYyA9PT0gXCI8XCIpIHtcbiAgICAgICAgdGFnU3RhcnQgPSBjdXJyZW50UG9zO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHF1b3RlU3RhcnQgPT09IGZhbHNlKSB7XG4gICAgICAgIGlmIChjID09PSBcIjxcIikge1xuICAgICAgICAgIHJldGh0bWwgKz0gZXNjYXBlSHRtbChodG1sLnNsaWNlKGxhc3RQb3MsIGN1cnJlbnRQb3MpKTtcbiAgICAgICAgICB0YWdTdGFydCA9IGN1cnJlbnRQb3M7XG4gICAgICAgICAgbGFzdFBvcyA9IGN1cnJlbnRQb3M7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGMgPT09IFwiPlwiKSB7XG4gICAgICAgICAgcmV0aHRtbCArPSBlc2NhcGVIdG1sKGh0bWwuc2xpY2UobGFzdFBvcywgdGFnU3RhcnQpKTtcbiAgICAgICAgICBjdXJyZW50SHRtbCA9IGh0bWwuc2xpY2UodGFnU3RhcnQsIGN1cnJlbnRQb3MgKyAxKTtcbiAgICAgICAgICBjdXJyZW50VGFnTmFtZSA9IGdldFRhZ05hbWUoY3VycmVudEh0bWwpO1xuICAgICAgICAgIHJldGh0bWwgKz0gb25UYWcoXG4gICAgICAgICAgICB0YWdTdGFydCxcbiAgICAgICAgICAgIHJldGh0bWwubGVuZ3RoLFxuICAgICAgICAgICAgY3VycmVudFRhZ05hbWUsXG4gICAgICAgICAgICBjdXJyZW50SHRtbCxcbiAgICAgICAgICAgIGlzQ2xvc2luZyhjdXJyZW50SHRtbClcbiAgICAgICAgICApO1xuICAgICAgICAgIGxhc3RQb3MgPSBjdXJyZW50UG9zICsgMTtcbiAgICAgICAgICB0YWdTdGFydCA9IGZhbHNlO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoYyA9PT0gJ1wiJyB8fCBjID09PSBcIidcIikpIHtcbiAgICAgICAgICB2YXIgaSA9IDE7XG4gICAgICAgICAgdmFyIGljID0gaHRtbC5jaGFyQXQoY3VycmVudFBvcyAtIGkpO1xuXG4gICAgICAgICAgd2hpbGUgKChpYyA9PT0gXCIgXCIpIHx8IChpYyA9PT0gXCI9XCIpKSB7XG4gICAgICAgICAgICBpZiAoaWMgPT09IFwiPVwiKSB7XG4gICAgICAgICAgICAgIHF1b3RlU3RhcnQgPSBjO1xuICAgICAgICAgICAgICBjb250aW51ZSBjaGFyaXRlcmF0b3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpYyA9IGh0bWwuY2hhckF0KGN1cnJlbnRQb3MgLSArK2kpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGMgPT09IHF1b3RlU3RhcnQpIHtcbiAgICAgICAgICBxdW90ZVN0YXJ0ID0gZmFsc2U7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgaWYgKGxhc3RQb3MgPCBodG1sLmxlbmd0aCkge1xuICAgIHJldGh0bWwgKz0gZXNjYXBlSHRtbChodG1sLnN1YnN0cihsYXN0UG9zKSk7XG4gIH1cblxuICByZXR1cm4gcmV0aHRtbDtcbn1cblxudmFyIFJFR0VYUF9JTExFR0FMX0FUVFJfTkFNRSA9IC9bXmEtekEtWjAtOV86XFwuXFwtXS9naW07XG5cbi8qKlxuICogcGFyc2UgaW5wdXQgYXR0cmlidXRlcyBhbmQgcmV0dXJucyBwcm9jZXNzZWQgYXR0cmlidXRlc1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBodG1sIGUuZy4gYGhyZWY9XCIjXCIgdGFyZ2V0PVwiX2JsYW5rXCJgXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBvbkF0dHIgZS5nLiBgZnVuY3Rpb24gKG5hbWUsIHZhbHVlKWBcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuZnVuY3Rpb24gcGFyc2VBdHRyKGh0bWwsIG9uQXR0cikge1xuXG4gIHZhciBsYXN0UG9zID0gMDtcbiAgdmFyIHJldEF0dHJzID0gW107XG4gIHZhciB0bXBOYW1lID0gZmFsc2U7XG4gIHZhciBsZW4gPSBodG1sLmxlbmd0aDtcblxuICBmdW5jdGlvbiBhZGRBdHRyKG5hbWUsIHZhbHVlKSB7XG4gICAgbmFtZSA9IHV0aWwkMS50cmltKG5hbWUpO1xuICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoUkVHRVhQX0lMTEVHQUxfQVRUUl9OQU1FLCBcIlwiKS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmIChuYW1lLmxlbmd0aCA8IDEpIHJldHVybjtcbiAgICB2YXIgcmV0ID0gb25BdHRyKG5hbWUsIHZhbHVlIHx8IFwiXCIpO1xuICAgIGlmIChyZXQpIHJldEF0dHJzLnB1c2gocmV0KTtcbiAgfVxuXG4gIC8vIOmAkOS4quWIhuaekOWtl+esplxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgdmFyIGMgPSBodG1sLmNoYXJBdChpKTtcbiAgICB2YXIgdiwgajtcbiAgICBpZiAodG1wTmFtZSA9PT0gZmFsc2UgJiYgYyA9PT0gXCI9XCIpIHtcbiAgICAgIHRtcE5hbWUgPSBodG1sLnNsaWNlKGxhc3RQb3MsIGkpO1xuICAgICAgbGFzdFBvcyA9IGkgKyAxO1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmICh0bXBOYW1lICE9PSBmYWxzZSkge1xuICAgICAgaWYgKFxuICAgICAgICBpID09PSBsYXN0UG9zICYmXG4gICAgICAgIChjID09PSAnXCInIHx8IGMgPT09IFwiJ1wiKSAmJlxuICAgICAgICBodG1sLmNoYXJBdChpIC0gMSkgPT09IFwiPVwiXG4gICAgICApIHtcbiAgICAgICAgaiA9IGh0bWwuaW5kZXhPZihjLCBpICsgMSk7XG4gICAgICAgIGlmIChqID09PSAtMSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHYgPSB1dGlsJDEudHJpbShodG1sLnNsaWNlKGxhc3RQb3MgKyAxLCBqKSk7XG4gICAgICAgICAgYWRkQXR0cih0bXBOYW1lLCB2KTtcbiAgICAgICAgICB0bXBOYW1lID0gZmFsc2U7XG4gICAgICAgICAgaSA9IGo7XG4gICAgICAgICAgbGFzdFBvcyA9IGkgKyAxO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICgvXFxzfFxcbnxcXHQvLnRlc3QoYykpIHtcbiAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoL1xcc3xcXG58XFx0L2csIFwiIFwiKTtcbiAgICAgIGlmICh0bXBOYW1lID09PSBmYWxzZSkge1xuICAgICAgICBqID0gZmluZE5leHRFcXVhbChodG1sLCBpKTtcbiAgICAgICAgaWYgKGogPT09IC0xKSB7XG4gICAgICAgICAgdiA9IHV0aWwkMS50cmltKGh0bWwuc2xpY2UobGFzdFBvcywgaSkpO1xuICAgICAgICAgIGFkZEF0dHIodik7XG4gICAgICAgICAgdG1wTmFtZSA9IGZhbHNlO1xuICAgICAgICAgIGxhc3RQb3MgPSBpICsgMTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpID0gaiAtIDE7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGogPSBmaW5kQmVmb3JlRXF1YWwoaHRtbCwgaSAtIDEpO1xuICAgICAgICBpZiAoaiA9PT0gLTEpIHtcbiAgICAgICAgICB2ID0gdXRpbCQxLnRyaW0oaHRtbC5zbGljZShsYXN0UG9zLCBpKSk7XG4gICAgICAgICAgdiA9IHN0cmlwUXVvdGVXcmFwKHYpO1xuICAgICAgICAgIGFkZEF0dHIodG1wTmFtZSwgdik7XG4gICAgICAgICAgdG1wTmFtZSA9IGZhbHNlO1xuICAgICAgICAgIGxhc3RQb3MgPSBpICsgMTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChsYXN0UG9zIDwgaHRtbC5sZW5ndGgpIHtcbiAgICBpZiAodG1wTmFtZSA9PT0gZmFsc2UpIHtcbiAgICAgIGFkZEF0dHIoaHRtbC5zbGljZShsYXN0UG9zKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFkZEF0dHIodG1wTmFtZSwgc3RyaXBRdW90ZVdyYXAodXRpbCQxLnRyaW0oaHRtbC5zbGljZShsYXN0UG9zKSkpKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdXRpbCQxLnRyaW0ocmV0QXR0cnMuam9pbihcIiBcIikpO1xufVxuXG5mdW5jdGlvbiBmaW5kTmV4dEVxdWFsKHN0ciwgaSkge1xuICBmb3IgKDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgIHZhciBjID0gc3RyW2ldO1xuICAgIGlmIChjID09PSBcIiBcIikgY29udGludWU7XG4gICAgaWYgKGMgPT09IFwiPVwiKSByZXR1cm4gaTtcbiAgICByZXR1cm4gLTE7XG4gIH1cbn1cblxuZnVuY3Rpb24gZmluZEJlZm9yZUVxdWFsKHN0ciwgaSkge1xuICBmb3IgKDsgaSA+IDA7IGktLSkge1xuICAgIHZhciBjID0gc3RyW2ldO1xuICAgIGlmIChjID09PSBcIiBcIikgY29udGludWU7XG4gICAgaWYgKGMgPT09IFwiPVwiKSByZXR1cm4gaTtcbiAgICByZXR1cm4gLTE7XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNRdW90ZVdyYXBTdHJpbmcodGV4dCkge1xuICBpZiAoXG4gICAgKHRleHRbMF0gPT09ICdcIicgJiYgdGV4dFt0ZXh0Lmxlbmd0aCAtIDFdID09PSAnXCInKSB8fFxuICAgICh0ZXh0WzBdID09PSBcIidcIiAmJiB0ZXh0W3RleHQubGVuZ3RoIC0gMV0gPT09IFwiJ1wiKVxuICApIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZnVuY3Rpb24gc3RyaXBRdW90ZVdyYXAodGV4dCkge1xuICBpZiAoaXNRdW90ZVdyYXBTdHJpbmcodGV4dCkpIHtcbiAgICByZXR1cm4gdGV4dC5zdWJzdHIoMSwgdGV4dC5sZW5ndGggLSAyKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdGV4dDtcbiAgfVxufVxuXG52YXIgcGFyc2VUYWdfMSA9IHBhcnNlVGFnO1xudmFyIHBhcnNlQXR0cl8xID0gcGFyc2VBdHRyO1xuXG52YXIgcGFyc2VyJDEgPSB7XG5cdHBhcnNlVGFnOiBwYXJzZVRhZ18xLFxuXHRwYXJzZUF0dHI6IHBhcnNlQXR0cl8xXG59O1xuXG4vKipcbiAqIGZpbHRlciB4c3NcbiAqXG4gKiBAYXV0aG9yIFpvbmdtaW4gTGVpPGxlaXpvbmdtaW5AZ21haWwuY29tPlxuICovXG5cbnZhciBGaWx0ZXJDU1MkMiA9IGxpYi5GaWx0ZXJDU1M7XG5cblxudmFyIHBhcnNlVGFnJDEgPSBwYXJzZXIkMS5wYXJzZVRhZztcbnZhciBwYXJzZUF0dHIkMSA9IHBhcnNlciQxLnBhcnNlQXR0cjtcblxuXG4vKipcbiAqIHJldHVybnMgYHRydWVgIGlmIHRoZSBpbnB1dCB2YWx1ZSBpcyBgdW5kZWZpbmVkYCBvciBgbnVsbGBcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5mdW5jdGlvbiBpc051bGwkMShvYmopIHtcbiAgcmV0dXJuIG9iaiA9PT0gdW5kZWZpbmVkIHx8IG9iaiA9PT0gbnVsbDtcbn1cblxuLyoqXG4gKiBnZXQgYXR0cmlidXRlcyBmb3IgYSB0YWdcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gaHRtbFxuICogQHJldHVybiB7T2JqZWN0fVxuICogICAtIHtTdHJpbmd9IGh0bWxcbiAqICAgLSB7Qm9vbGVhbn0gY2xvc2luZ1xuICovXG5mdW5jdGlvbiBnZXRBdHRycyhodG1sKSB7XG4gIHZhciBpID0gdXRpbCQxLnNwYWNlSW5kZXgoaHRtbCk7XG4gIGlmIChpID09PSAtMSkge1xuICAgIHJldHVybiB7XG4gICAgICBodG1sOiBcIlwiLFxuICAgICAgY2xvc2luZzogaHRtbFtodG1sLmxlbmd0aCAtIDJdID09PSBcIi9cIlxuICAgIH07XG4gIH1cbiAgaHRtbCA9IHV0aWwkMS50cmltKGh0bWwuc2xpY2UoaSArIDEsIC0xKSk7XG4gIHZhciBpc0Nsb3NpbmcgPSBodG1sW2h0bWwubGVuZ3RoIC0gMV0gPT09IFwiL1wiO1xuICBpZiAoaXNDbG9zaW5nKSBodG1sID0gdXRpbCQxLnRyaW0oaHRtbC5zbGljZSgwLCAtMSkpO1xuICByZXR1cm4ge1xuICAgIGh0bWw6IGh0bWwsXG4gICAgY2xvc2luZzogaXNDbG9zaW5nXG4gIH07XG59XG5cbi8qKlxuICogc2hhbGxvdyBjb3B5XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5mdW5jdGlvbiBzaGFsbG93Q29weU9iamVjdCQxKG9iaikge1xuICB2YXIgcmV0ID0ge307XG4gIGZvciAodmFyIGkgaW4gb2JqKSB7XG4gICAgcmV0W2ldID0gb2JqW2ldO1xuICB9XG4gIHJldHVybiByZXQ7XG59XG5cbi8qKlxuICogRmlsdGVyWFNTIGNsYXNzXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqICAgICAgICB3aGl0ZUxpc3QsIG9uVGFnLCBvblRhZ0F0dHIsIG9uSWdub3JlVGFnLFxuICogICAgICAgIG9uSWdub3JlVGFnQXR0ciwgc2FmZUF0dHJWYWx1ZSwgZXNjYXBlSHRtbFxuICogICAgICAgIHN0cmlwSWdub3JlVGFnQm9keSwgYWxsb3dDb21tZW50VGFnLCBzdHJpcEJsYW5rQ2hhclxuICogICAgICAgIGNzc3t3aGl0ZUxpc3QsIG9uQXR0ciwgb25JZ25vcmVBdHRyfSBgY3NzPWZhbHNlYCBtZWFucyBkb24ndCB1c2UgYGNzc2ZpbHRlcmBcbiAqL1xuZnVuY3Rpb24gRmlsdGVyWFNTKG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IHNoYWxsb3dDb3B5T2JqZWN0JDEob3B0aW9ucyB8fCB7fSk7XG5cbiAgaWYgKG9wdGlvbnMuc3RyaXBJZ25vcmVUYWcpIHtcbiAgICBpZiAob3B0aW9ucy5vbklnbm9yZVRhZykge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgJ05vdGVzOiBjYW5ub3QgdXNlIHRoZXNlIHR3byBvcHRpb25zIFwic3RyaXBJZ25vcmVUYWdcIiBhbmQgXCJvbklnbm9yZVRhZ1wiIGF0IHRoZSBzYW1lIHRpbWUnXG4gICAgICApO1xuICAgIH1cbiAgICBvcHRpb25zLm9uSWdub3JlVGFnID0gX2RlZmF1bHQkMS5vbklnbm9yZVRhZ1N0cmlwQWxsO1xuICB9XG5cbiAgb3B0aW9ucy53aGl0ZUxpc3QgPSBvcHRpb25zLndoaXRlTGlzdCB8fCBfZGVmYXVsdCQxLndoaXRlTGlzdDtcbiAgb3B0aW9ucy5vblRhZyA9IG9wdGlvbnMub25UYWcgfHwgX2RlZmF1bHQkMS5vblRhZztcbiAgb3B0aW9ucy5vblRhZ0F0dHIgPSBvcHRpb25zLm9uVGFnQXR0ciB8fCBfZGVmYXVsdCQxLm9uVGFnQXR0cjtcbiAgb3B0aW9ucy5vbklnbm9yZVRhZyA9IG9wdGlvbnMub25JZ25vcmVUYWcgfHwgX2RlZmF1bHQkMS5vbklnbm9yZVRhZztcbiAgb3B0aW9ucy5vbklnbm9yZVRhZ0F0dHIgPSBvcHRpb25zLm9uSWdub3JlVGFnQXR0ciB8fCBfZGVmYXVsdCQxLm9uSWdub3JlVGFnQXR0cjtcbiAgb3B0aW9ucy5zYWZlQXR0clZhbHVlID0gb3B0aW9ucy5zYWZlQXR0clZhbHVlIHx8IF9kZWZhdWx0JDEuc2FmZUF0dHJWYWx1ZTtcbiAgb3B0aW9ucy5lc2NhcGVIdG1sID0gb3B0aW9ucy5lc2NhcGVIdG1sIHx8IF9kZWZhdWx0JDEuZXNjYXBlSHRtbDtcbiAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcblxuICBpZiAob3B0aW9ucy5jc3MgPT09IGZhbHNlKSB7XG4gICAgdGhpcy5jc3NGaWx0ZXIgPSBmYWxzZTtcbiAgfSBlbHNlIHtcbiAgICBvcHRpb25zLmNzcyA9IG9wdGlvbnMuY3NzIHx8IHt9O1xuICAgIHRoaXMuY3NzRmlsdGVyID0gbmV3IEZpbHRlckNTUyQyKG9wdGlvbnMuY3NzKTtcbiAgfVxufVxuXG4vKipcbiAqIHN0YXJ0IHByb2Nlc3MgYW5kIHJldHVybnMgcmVzdWx0XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGh0bWxcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuRmlsdGVyWFNTLnByb3RvdHlwZS5wcm9jZXNzID0gZnVuY3Rpb24oaHRtbCkge1xuICAvLyBjb21wYXRpYmxlIHdpdGggdGhlIGlucHV0XG4gIGh0bWwgPSBodG1sIHx8IFwiXCI7XG4gIGh0bWwgPSBodG1sLnRvU3RyaW5nKCk7XG4gIGlmICghaHRtbCkgcmV0dXJuIFwiXCI7XG5cbiAgdmFyIG1lID0gdGhpcztcbiAgdmFyIG9wdGlvbnMgPSBtZS5vcHRpb25zO1xuICB2YXIgd2hpdGVMaXN0ID0gb3B0aW9ucy53aGl0ZUxpc3Q7XG4gIHZhciBvblRhZyA9IG9wdGlvbnMub25UYWc7XG4gIHZhciBvbklnbm9yZVRhZyA9IG9wdGlvbnMub25JZ25vcmVUYWc7XG4gIHZhciBvblRhZ0F0dHIgPSBvcHRpb25zLm9uVGFnQXR0cjtcbiAgdmFyIG9uSWdub3JlVGFnQXR0ciA9IG9wdGlvbnMub25JZ25vcmVUYWdBdHRyO1xuICB2YXIgc2FmZUF0dHJWYWx1ZSA9IG9wdGlvbnMuc2FmZUF0dHJWYWx1ZTtcbiAgdmFyIGVzY2FwZUh0bWwgPSBvcHRpb25zLmVzY2FwZUh0bWw7XG4gIHZhciBjc3NGaWx0ZXIgPSBtZS5jc3NGaWx0ZXI7XG5cbiAgLy8gcmVtb3ZlIGludmlzaWJsZSBjaGFyYWN0ZXJzXG4gIGlmIChvcHRpb25zLnN0cmlwQmxhbmtDaGFyKSB7XG4gICAgaHRtbCA9IF9kZWZhdWx0JDEuc3RyaXBCbGFua0NoYXIoaHRtbCk7XG4gIH1cblxuICAvLyByZW1vdmUgaHRtbCBjb21tZW50c1xuICBpZiAoIW9wdGlvbnMuYWxsb3dDb21tZW50VGFnKSB7XG4gICAgaHRtbCA9IF9kZWZhdWx0JDEuc3RyaXBDb21tZW50VGFnKGh0bWwpO1xuICB9XG5cbiAgLy8gaWYgZW5hYmxlIHN0cmlwSWdub3JlVGFnQm9keVxuICB2YXIgc3RyaXBJZ25vcmVUYWdCb2R5ID0gZmFsc2U7XG4gIGlmIChvcHRpb25zLnN0cmlwSWdub3JlVGFnQm9keSkge1xuICAgIHZhciBzdHJpcElnbm9yZVRhZ0JvZHkgPSBfZGVmYXVsdCQxLlN0cmlwVGFnQm9keShcbiAgICAgIG9wdGlvbnMuc3RyaXBJZ25vcmVUYWdCb2R5LFxuICAgICAgb25JZ25vcmVUYWdcbiAgICApO1xuICAgIG9uSWdub3JlVGFnID0gc3RyaXBJZ25vcmVUYWdCb2R5Lm9uSWdub3JlVGFnO1xuICB9XG5cbiAgdmFyIHJldEh0bWwgPSBwYXJzZVRhZyQxKFxuICAgIGh0bWwsXG4gICAgZnVuY3Rpb24oc291cmNlUG9zaXRpb24sIHBvc2l0aW9uLCB0YWcsIGh0bWwsIGlzQ2xvc2luZykge1xuICAgICAgdmFyIGluZm8gPSB7XG4gICAgICAgIHNvdXJjZVBvc2l0aW9uOiBzb3VyY2VQb3NpdGlvbixcbiAgICAgICAgcG9zaXRpb246IHBvc2l0aW9uLFxuICAgICAgICBpc0Nsb3Npbmc6IGlzQ2xvc2luZyxcbiAgICAgICAgaXNXaGl0ZTogd2hpdGVMaXN0Lmhhc093blByb3BlcnR5KHRhZylcbiAgICAgIH07XG5cbiAgICAgIC8vIGNhbGwgYG9uVGFnKClgXG4gICAgICB2YXIgcmV0ID0gb25UYWcodGFnLCBodG1sLCBpbmZvKTtcbiAgICAgIGlmICghaXNOdWxsJDEocmV0KSkgcmV0dXJuIHJldDtcblxuICAgICAgaWYgKGluZm8uaXNXaGl0ZSkge1xuICAgICAgICBpZiAoaW5mby5pc0Nsb3NpbmcpIHtcbiAgICAgICAgICByZXR1cm4gXCI8L1wiICsgdGFnICsgXCI+XCI7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYXR0cnMgPSBnZXRBdHRycyhodG1sKTtcbiAgICAgICAgdmFyIHdoaXRlQXR0ckxpc3QgPSB3aGl0ZUxpc3RbdGFnXTtcbiAgICAgICAgdmFyIGF0dHJzSHRtbCA9IHBhcnNlQXR0ciQxKGF0dHJzLmh0bWwsIGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgICAgICAgLy8gY2FsbCBgb25UYWdBdHRyKClgXG4gICAgICAgICAgdmFyIGlzV2hpdGVBdHRyID0gdXRpbCQxLmluZGV4T2Yod2hpdGVBdHRyTGlzdCwgbmFtZSkgIT09IC0xO1xuICAgICAgICAgIHZhciByZXQgPSBvblRhZ0F0dHIodGFnLCBuYW1lLCB2YWx1ZSwgaXNXaGl0ZUF0dHIpO1xuICAgICAgICAgIGlmICghaXNOdWxsJDEocmV0KSkgcmV0dXJuIHJldDtcblxuICAgICAgICAgIGlmIChpc1doaXRlQXR0cikge1xuICAgICAgICAgICAgLy8gY2FsbCBgc2FmZUF0dHJWYWx1ZSgpYFxuICAgICAgICAgICAgdmFsdWUgPSBzYWZlQXR0clZhbHVlKHRhZywgbmFtZSwgdmFsdWUsIGNzc0ZpbHRlcik7XG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG5hbWUgKyAnPVwiJyArIHZhbHVlICsgJ1wiJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVybiBuYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBjYWxsIGBvbklnbm9yZVRhZ0F0dHIoKWBcbiAgICAgICAgICAgIHZhciByZXQgPSBvbklnbm9yZVRhZ0F0dHIodGFnLCBuYW1lLCB2YWx1ZSwgaXNXaGl0ZUF0dHIpO1xuICAgICAgICAgICAgaWYgKCFpc051bGwkMShyZXQpKSByZXR1cm4gcmV0O1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gYnVpbGQgbmV3IHRhZyBodG1sXG4gICAgICAgIHZhciBodG1sID0gXCI8XCIgKyB0YWc7XG4gICAgICAgIGlmIChhdHRyc0h0bWwpIGh0bWwgKz0gXCIgXCIgKyBhdHRyc0h0bWw7XG4gICAgICAgIGlmIChhdHRycy5jbG9zaW5nKSBodG1sICs9IFwiIC9cIjtcbiAgICAgICAgaHRtbCArPSBcIj5cIjtcbiAgICAgICAgcmV0dXJuIGh0bWw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBjYWxsIGBvbklnbm9yZVRhZygpYFxuICAgICAgICB2YXIgcmV0ID0gb25JZ25vcmVUYWcodGFnLCBodG1sLCBpbmZvKTtcbiAgICAgICAgaWYgKCFpc051bGwkMShyZXQpKSByZXR1cm4gcmV0O1xuICAgICAgICByZXR1cm4gZXNjYXBlSHRtbChodG1sKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGVzY2FwZUh0bWxcbiAgKTtcblxuICAvLyBpZiBlbmFibGUgc3RyaXBJZ25vcmVUYWdCb2R5XG4gIGlmIChzdHJpcElnbm9yZVRhZ0JvZHkpIHtcbiAgICByZXRIdG1sID0gc3RyaXBJZ25vcmVUYWdCb2R5LnJlbW92ZShyZXRIdG1sKTtcbiAgfVxuXG4gIHJldHVybiByZXRIdG1sO1xufTtcblxudmFyIHhzcyA9IEZpbHRlclhTUztcblxudmFyIGxpYiQxID0gY3JlYXRlQ29tbW9uanNNb2R1bGUoZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykge1xuLyoqXG4gKiB4c3NcbiAqXG4gKiBAYXV0aG9yIFpvbmdtaW4gTGVpPGxlaXpvbmdtaW5AZ21haWwuY29tPlxuICovXG5cblxuXG5cblxuLyoqXG4gKiBmaWx0ZXIgeHNzIGZ1bmN0aW9uXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGh0bWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIHsgd2hpdGVMaXN0LCBvblRhZywgb25UYWdBdHRyLCBvbklnbm9yZVRhZywgb25JZ25vcmVUYWdBdHRyLCBzYWZlQXR0clZhbHVlLCBlc2NhcGVIdG1sIH1cbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZmlsdGVyWFNTKGh0bWwsIG9wdGlvbnMpIHtcbiAgdmFyIHhzcyQxID0gbmV3IHhzcyhvcHRpb25zKTtcbiAgcmV0dXJuIHhzcyQxLnByb2Nlc3MoaHRtbCk7XG59XG5cbmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IGZpbHRlclhTUztcbmV4cG9ydHMuZmlsdGVyWFNTID0gZmlsdGVyWFNTO1xuZXhwb3J0cy5GaWx0ZXJYU1MgPSB4c3M7XG5mb3IgKHZhciBpIGluIF9kZWZhdWx0JDEpIGV4cG9ydHNbaV0gPSBfZGVmYXVsdCQxW2ldO1xuZm9yICh2YXIgaSBpbiBwYXJzZXIkMSkgZXhwb3J0c1tpXSA9IHBhcnNlciQxW2ldO1xuXG4vLyB1c2luZyBgeHNzYCBvbiB0aGUgV2ViV29ya2VyLCBvdXRwdXQgYGZpbHRlclhTU2AgdG8gdGhlIGdsb2JhbHNcbmZ1bmN0aW9uIGlzV29ya2VyRW52KCkge1xuICByZXR1cm4gdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBEZWRpY2F0ZWRXb3JrZXJHbG9iYWxTY29wZSAhPT0gJ3VuZGVmaW5lZCcgJiYgc2VsZiBpbnN0YW5jZW9mIERlZGljYXRlZFdvcmtlckdsb2JhbFNjb3BlO1xufVxuaWYgKGlzV29ya2VyRW52KCkpIHtcbiAgc2VsZi5maWx0ZXJYU1MgPSBtb2R1bGUuZXhwb3J0cztcbn1cbn0pO1xuXG4vKiBDb3B5cmlnaHQgKGMpIDIwMjAgRW52aXJvbm1lbnRhbCBTeXN0ZW1zIFJlc2VhcmNoIEluc3RpdHV0ZSwgSW5jLlxuICogQXBhY2hlLTIuMFxuICpcbiAqIGpzLXhzc1xuICogQ29weXJpZ2h0IChjKSAyMDEyLTIwMTggWm9uZ21pbiBMZWko6Zu35a6X5rCRKSA8bGVpem9uZ21pbkBnbWFpbC5jb20+XG4gKiBodHRwOi8vdWNkb2suY29tXG4gKiBUaGUgTUlUIExpY2Vuc2UsIHNlZVxuICogaHR0cHM6Ly9naXRodWIuY29tL2xlaXpvbmdtaW4vanMteHNzL2Jsb2IvbWFzdGVyL0xJQ0VOU0UgZm9yIGRldGFpbHNcbiAqXG4gKiBMb2Rhc2gvaXNQbGFpbk9iamVjdFxuICogQ29weXJpZ2h0IChjKSBKUyBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMgPGh0dHBzOi8vanMuZm91bmRhdGlvbi8+XG4gKiBNSVQgTGljZW5zZSwgc2VlIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9sb2Rhc2gvbG9kYXNoLzQuMTcuMTAtbnBtL0xJQ0VOU0UgZm9yIGRldGFpbHNcbiAqICovXG4vKipcbiAqIFRoZSBTYW5pdGl6ZXIgQ2xhc3NcbiAqXG4gKiBAZXhwb3J0XG4gKiBAY2xhc3MgU2FuaXRpemVyXG4gKi9cbnZhciBTYW5pdGl6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU2FuaXRpemVyKGZpbHRlck9wdGlvbnMsIGV4dGVuZERlZmF1bHRzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIC8vIFN1cHBvcnRlZCBIVE1MIFNwZWM6IGh0dHBzOi8vZG9jLmFyY2dpcy5jb20vZW4vYXJjZ2lzLW9ubGluZS9yZWZlcmVuY2Uvc3VwcG9ydGVkLWh0bWwuaHRtXG4gICAgICAgIHRoaXMuYXJjZ2lzV2hpdGVMaXN0ID0ge1xuICAgICAgICAgICAgYTogW1wiaHJlZlwiLCBcInRhcmdldFwiLCBcInN0eWxlXCJdLFxuICAgICAgICAgICAgaW1nOiBbXCJzcmNcIiwgXCJ3aWR0aFwiLCBcImhlaWdodFwiLCBcImJvcmRlclwiLCBcImFsdFwiLCBcInN0eWxlXCJdLFxuICAgICAgICAgICAgdmlkZW86IFtcbiAgICAgICAgICAgICAgICBcImF1dG9wbGF5XCIsXG4gICAgICAgICAgICAgICAgXCJjb250cm9sc1wiLFxuICAgICAgICAgICAgICAgIFwiaGVpZ2h0XCIsXG4gICAgICAgICAgICAgICAgXCJsb29wXCIsXG4gICAgICAgICAgICAgICAgXCJtdXRlZFwiLFxuICAgICAgICAgICAgICAgIFwicG9zdGVyXCIsXG4gICAgICAgICAgICAgICAgXCJwcmVsb2FkXCIsXG4gICAgICAgICAgICAgICAgXCJ3aWR0aFwiXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgYXVkaW86IFtcImF1dG9wbGF5XCIsIFwiY29udHJvbHNcIiwgXCJsb29wXCIsIFwibXV0ZWRcIiwgXCJwcmVsb2FkXCJdLFxuICAgICAgICAgICAgc291cmNlOiBbXCJtZWRpYVwiLCBcInNyY1wiLCBcInR5cGVcIl0sXG4gICAgICAgICAgICBzcGFuOiBbXCJzdHlsZVwiXSxcbiAgICAgICAgICAgIHRhYmxlOiBbXCJ3aWR0aFwiLCBcImhlaWdodFwiLCBcImNlbGxwYWRkaW5nXCIsIFwiY2VsbHNwYWNpbmdcIiwgXCJib3JkZXJcIiwgXCJzdHlsZVwiXSxcbiAgICAgICAgICAgIGRpdjogW1wic3R5bGVcIiwgXCJhbGlnblwiXSxcbiAgICAgICAgICAgIGZvbnQ6IFtcInNpemVcIiwgXCJjb2xvclwiLCBcInN0eWxlXCJdLFxuICAgICAgICAgICAgdHI6IFtcImhlaWdodFwiLCBcInZhbGlnblwiLCBcImFsaWduXCIsIFwic3R5bGVcIl0sXG4gICAgICAgICAgICB0ZDogW1xuICAgICAgICAgICAgICAgIFwiaGVpZ2h0XCIsXG4gICAgICAgICAgICAgICAgXCJ3aWR0aFwiLFxuICAgICAgICAgICAgICAgIFwidmFsaWduXCIsXG4gICAgICAgICAgICAgICAgXCJhbGlnblwiLFxuICAgICAgICAgICAgICAgIFwiY29sc3BhblwiLFxuICAgICAgICAgICAgICAgIFwicm93c3BhblwiLFxuICAgICAgICAgICAgICAgIFwibm93cmFwXCIsXG4gICAgICAgICAgICAgICAgXCJzdHlsZVwiXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgdGg6IFtcbiAgICAgICAgICAgICAgICBcImhlaWdodFwiLFxuICAgICAgICAgICAgICAgIFwid2lkdGhcIixcbiAgICAgICAgICAgICAgICBcInZhbGlnblwiLFxuICAgICAgICAgICAgICAgIFwiYWxpZ25cIixcbiAgICAgICAgICAgICAgICBcImNvbHNwYW5cIixcbiAgICAgICAgICAgICAgICBcInJvd3NwYW5cIixcbiAgICAgICAgICAgICAgICBcIm5vd3JhcFwiLFxuICAgICAgICAgICAgICAgIFwic3R5bGVcIlxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIHA6IFtcInN0eWxlXCJdLFxuICAgICAgICAgICAgYjogW10sXG4gICAgICAgICAgICBzdHJvbmc6IFtdLFxuICAgICAgICAgICAgaTogW10sXG4gICAgICAgICAgICBlbTogW10sXG4gICAgICAgICAgICB1OiBbXSxcbiAgICAgICAgICAgIGJyOiBbXSxcbiAgICAgICAgICAgIGxpOiBbXSxcbiAgICAgICAgICAgIHVsOiBbXSxcbiAgICAgICAgICAgIG9sOiBbXSxcbiAgICAgICAgICAgIGhyOiBbXSxcbiAgICAgICAgICAgIHRib2R5OiBbXVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmFsbG93ZWRQcm90b2NvbHMgPSBbXG4gICAgICAgICAgICBcImh0dHBcIixcbiAgICAgICAgICAgIFwiaHR0cHNcIixcbiAgICAgICAgICAgIFwibWFpbHRvXCIsXG4gICAgICAgICAgICBcImlmb3JtXCIsXG4gICAgICAgICAgICBcInRlbFwiLFxuICAgICAgICAgICAgXCJmbG93XCIsXG4gICAgICAgICAgICBcImxmbW9iaWxlXCIsXG4gICAgICAgICAgICBcImFyY2dpcy1uYXZpZ2F0b3JcIixcbiAgICAgICAgICAgIFwiYXJjZ2lzLWFwcHN0dWRpby1wbGF5ZXJcIixcbiAgICAgICAgICAgIFwiYXJjZ2lzLXN1cnZleTEyM1wiLFxuICAgICAgICAgICAgXCJhcmNnaXMtY29sbGVjdG9yXCIsXG4gICAgICAgICAgICBcImFyY2dpcy13b3JrZm9yY2VcIixcbiAgICAgICAgICAgIFwiYXJjZ2lzLWV4cGxvcmVyXCIsXG4gICAgICAgICAgICBcImFyY2dpcy10cmVrMnRoZXJlXCIsXG4gICAgICAgICAgICBcIm1zcGJpXCIsXG4gICAgICAgICAgICBcImNvbWdvb2dsZW1hcHNcIixcbiAgICAgICAgICAgIFwicGRmZWZpbGVcIixcbiAgICAgICAgICAgIFwicGRmZWh0dHBcIixcbiAgICAgICAgICAgIFwicGRmZWh0dHBzXCIsXG4gICAgICAgICAgICBcImJveGFwcFwiLFxuICAgICAgICAgICAgXCJib3hlbW1cIixcbiAgICAgICAgICAgIFwiYXdiXCIsXG4gICAgICAgICAgICBcImF3YnNcIixcbiAgICAgICAgICAgIFwiZ3JvcGVuXCIsXG4gICAgICAgICAgICBcInJhZGFyc2NvcGVcIlxuICAgICAgICBdO1xuICAgICAgICB0aGlzLmFyY2dpc0ZpbHRlck9wdGlvbnMgPSB7XG4gICAgICAgICAgICBhbGxvd0NvbW1lbnRUYWc6IHRydWUsXG4gICAgICAgICAgICBzYWZlQXR0clZhbHVlOiBmdW5jdGlvbiAodGFnLCBuYW1lLCB2YWx1ZSwgY3NzRmlsdGVyKSB7XG4gICAgICAgICAgICAgICAgLy8gVGFrZSBvdmVyIHNhZmUgYXR0cmlidXRlIGZpbHRlcmluZyBmb3IgYGFgIGBocmVmYCwgYGltZ2AgYHNyY2AsXG4gICAgICAgICAgICAgICAgLy8gYW5kIGBzb3VyY2VgIGBzcmNgIGF0dHJpYnV0ZXMsIG90aGVyd2lzZSBwYXNzIG9udG8gdGhlXG4gICAgICAgICAgICAgICAgLy8gZGVmYXVsdCBgWFNTLnNhZmVBdHRyVmFsdWVgIG1ldGhvZC5cbiAgICAgICAgICAgICAgICBpZiAoKHRhZyA9PT0gXCJhXCIgJiYgbmFtZSA9PT0gXCJocmVmXCIpIHx8XG4gICAgICAgICAgICAgICAgICAgICgodGFnID09PSBcImltZ1wiIHx8IHRhZyA9PT0gXCJzb3VyY2VcIikgJiYgbmFtZSA9PT0gXCJzcmNcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnNhbml0aXplVXJsKHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxpYiQxLnNhZmVBdHRyVmFsdWUodGFnLCBuYW1lLCB2YWx1ZSwgY3NzRmlsdGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHhzc0ZpbHRlck9wdGlvbnM7XG4gICAgICAgIGlmIChmaWx0ZXJPcHRpb25zICYmICFleHRlbmREZWZhdWx0cykge1xuICAgICAgICAgICAgLy8gT3ZlcnJpZGUgdGhlIGRlZmF1bHRzXG4gICAgICAgICAgICB4c3NGaWx0ZXJPcHRpb25zID0gZmlsdGVyT3B0aW9ucztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChmaWx0ZXJPcHRpb25zICYmIGV4dGVuZERlZmF1bHRzKSB7XG4gICAgICAgICAgICAvLyBFeHRlbmQgdGhlIGRlZmF1bHRzXG4gICAgICAgICAgICB4c3NGaWx0ZXJPcHRpb25zID0gT2JqZWN0LmNyZWF0ZSh0aGlzLmFyY2dpc0ZpbHRlck9wdGlvbnMpO1xuICAgICAgICAgICAgT2JqZWN0LmtleXMoZmlsdGVyT3B0aW9ucykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gXCJ3aGl0ZUxpc3RcIikge1xuICAgICAgICAgICAgICAgICAgICAvLyBFeHRlbmQgdGhlIHdoaXRlbGlzdCBieSBjb25jYXRlbmF0aW5nIGFycmF5c1xuICAgICAgICAgICAgICAgICAgICB4c3NGaWx0ZXJPcHRpb25zLndoaXRlTGlzdCA9IF90aGlzLl9leHRlbmRPYmplY3RPZkFycmF5cyhbXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5hcmNnaXNXaGl0ZUxpc3QsXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJPcHRpb25zLndoaXRlTGlzdCB8fCB7fVxuICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHhzc0ZpbHRlck9wdGlvbnNba2V5XSA9IGZpbHRlck9wdGlvbnNba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIE9ubHkgdXNlIHRoZSBkZWZhdWx0c1xuICAgICAgICAgICAgeHNzRmlsdGVyT3B0aW9ucyA9IE9iamVjdC5jcmVhdGUodGhpcy5hcmNnaXNGaWx0ZXJPcHRpb25zKTtcbiAgICAgICAgICAgIHhzc0ZpbHRlck9wdGlvbnMud2hpdGVMaXN0ID0gdGhpcy5hcmNnaXNXaGl0ZUxpc3Q7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy54c3NGaWx0ZXJPcHRpb25zID0geHNzRmlsdGVyT3B0aW9ucztcbiAgICAgICAgLy8gTWFrZSB0aGlzIHJlYWRhYmxlIHRvIHRlc3RzXG4gICAgICAgIHRoaXMuX3hzc0ZpbHRlciA9IG5ldyBsaWIkMS5GaWx0ZXJYU1MoeHNzRmlsdGVyT3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNhbml0aXplcyB2YWx1ZSB0byByZW1vdmUgaW52YWxpZCBIVE1MIHRhZ3MuXG4gICAgICpcbiAgICAgKiBOb3RlOiBJZiB0aGUgdmFsdWUgcGFzc2VkIGRvZXMgbm90IGNvbnRhaW4gYSB2YWxpZCBKU09OIGRhdGEgdHlwZSAoU3RyaW5nLFxuICAgICAqIE51bWJlciwgSlNPTiBPYmplY3QsIEFycmF5LCBCb29sZWFuLCBvciBudWxsKSwgdGhlIHZhbHVlIHdpbGwgYmUgbnVsbGlmaWVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHthbnl9IHZhbHVlIFRoZSB2YWx1ZSB0byBzYW5pdGl6ZS5cbiAgICAgKiBAcmV0dXJucyB7YW55fSBUaGUgc2FuaXRpemVkIHZhbHVlLlxuICAgICAqIEBtZW1iZXJvZiBTYW5pdGl6ZXJcbiAgICAgKi9cbiAgICBTYW5pdGl6ZXIucHJvdG90eXBlLnNhbml0aXplID0gZnVuY3Rpb24gKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IHt9OyB9XG4gICAgICAgIHN3aXRjaCAodHlwZW9mIHZhbHVlKSB7XG4gICAgICAgICAgICBjYXNlIFwibnVtYmVyXCI6XG4gICAgICAgICAgICAgICAgaWYgKGlzTmFOKHZhbHVlKSB8fCAhaXNGaW5pdGUodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICBjYXNlIFwiYm9vbGVhblwiOlxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5feHNzRmlsdGVyLnByb2Nlc3ModmFsdWUpO1xuICAgICAgICAgICAgY2FzZSBcIm9iamVjdFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9pdGVyYXRlT3Zlck9iamVjdCh2YWx1ZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmFsbG93VW5kZWZpbmVkICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTYW5pdGl6ZXMgYSBVUkwgc3RyaW5nIGZvbGxvd2luZyB0aGUgYWxsb3dlZCBwcm90b2NvbHMgYW5kIHNhbml0aXphdGlvbiBydWxlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSBUaGUgVVJMIHRvIHNhbml0aXplLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBzYW5pdGl6ZWQgVVJMLlxuICAgICAqL1xuICAgIFNhbml0aXplci5wcm90b3R5cGUuc2FuaXRpemVVcmwgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIHByb3RvY29sID0gdGhpcy5fdHJpbSh2YWx1ZS5zdWJzdHJpbmcoMCwgdmFsdWUuaW5kZXhPZihcIjpcIikpKTtcbiAgICAgICAgaWYgKCEodmFsdWUgPT09IFwiL1wiIHx8XG4gICAgICAgICAgICB2YWx1ZSA9PT0gXCIjXCIgfHxcbiAgICAgICAgICAgIHZhbHVlWzBdID09PSBcIiNcIiB8fFxuICAgICAgICAgICAgdGhpcy5hbGxvd2VkUHJvdG9jb2xzLmluZGV4T2YocHJvdG9jb2wudG9Mb3dlckNhc2UoKSkgPiAtMSkpIHtcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGxpYiQxLmVzY2FwZUF0dHJWYWx1ZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNhbml0aXplcyBhbiBIVE1MIGF0dHJpYnV0ZSB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0YWcgVGhlIHRhZ25hbWUgb2YgdGhlIEhUTUwgZWxlbWVudC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYXR0cmlidXRlIFRoZSBhdHRyaWJ1dGUgbmFtZSBvZiB0aGUgSFRNTCBlbGVtZW50LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSBUaGUgcmF3IHZhbHVlIHRvIGJlIHVzZWQgZm9yIHRoZSBIVE1MIGF0dHJpYnV0ZSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge1hTUy5JQ1NTRmlsdGVyfSBbY3NzRmlsdGVyXSBUaGUgQ1NTIGZpbHRlciB0byBiZSB1c2VkLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBzYW5pdGl6ZWQgYXR0cmlidXRlIHZhbHVlLlxuICAgICAqIEBtZW1iZXJvZiBTYW5pdGl6ZXJcbiAgICAgKi9cbiAgICBTYW5pdGl6ZXIucHJvdG90eXBlLnNhbml0aXplSFRNTEF0dHJpYnV0ZSA9IGZ1bmN0aW9uICh0YWcsIGF0dHJpYnV0ZSwgdmFsdWUsIGNzc0ZpbHRlcikge1xuICAgICAgICAvLyB1c2UgdGhlIGN1c3RvbSBzYWZlQXR0clZhbHVlIGZ1bmN0aW9uIGlmIHByb3ZpZGVkXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy54c3NGaWx0ZXJPcHRpb25zLnNhZmVBdHRyVmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmUgc2FmZUF0dHJWYWx1ZSBkb2VzIGhhbmRsZSB1bmRlZmluZWQgY3NzRmlsdGVyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy54c3NGaWx0ZXJPcHRpb25zLnNhZmVBdHRyVmFsdWUodGFnLCBhdHRyaWJ1dGUsIHZhbHVlLCBjc3NGaWx0ZXIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIG90aGVyd2lzZSB1c2UgdGhlIGRlZmF1bHRcbiAgICAgICAgLy8gQHRzLWlnbm9yZSBzYWZlQXR0clZhbHVlIGRvZXMgaGFuZGxlIHVuZGVmaW5lZCBjc3NGaWx0ZXJcbiAgICAgICAgcmV0dXJuIGxpYiQxLnNhZmVBdHRyVmFsdWUodGFnLCBhdHRyaWJ1dGUsIHZhbHVlLCBjc3NGaWx0ZXIpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGEgdmFsdWUgb25seSBjb250YWlucyB2YWxpZCBIVE1MLlxuICAgICAqXG4gICAgICogQHBhcmFtIHthbnl9IHZhbHVlIFRoZSB2YWx1ZSB0byB2YWxpZGF0ZS5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgKiBAbWVtYmVyb2YgU2FuaXRpemVyXG4gICAgICovXG4gICAgU2FuaXRpemVyLnByb3RvdHlwZS52YWxpZGF0ZSA9IGZ1bmN0aW9uICh2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7IG9wdGlvbnMgPSB7fTsgfVxuICAgICAgICB2YXIgc2FuaXRpemVkID0gdGhpcy5zYW5pdGl6ZSh2YWx1ZSwgb3B0aW9ucyk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpc1ZhbGlkOiB2YWx1ZSA9PT0gc2FuaXRpemVkLFxuICAgICAgICAgICAgc2FuaXRpemVkOiBzYW5pdGl6ZWRcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEV4dGVuZHMgYW4gb2JqZWN0IG9mIGFycmF5cyBieSBieSBjb25jYXRlbmF0aW5nIGFycmF5cyBvZiB0aGUgc2FtZSBvYmplY3RcbiAgICAgKiBrZXlzLiBJZiB0aGUgaWYgdGhlIHByZXZpb3VzIGtleSdzIHZhbHVlIGlzIG5vdCBhbiBhcnJheSwgdGhlIG5leHQga2V5J3NcbiAgICAgKiB2YWx1ZSB3aWxsIHJlcGxhY2UgdGhlIHByZXZpb3VzIGtleS4gVGhpcyBtZXRob2QgaXMgdXNlZCBmb3IgZXh0ZW5kaW5nIHRoZVxuICAgICAqIHdoaXRlTGlzdCBpbiB0aGUgWFNTIGZpbHRlciBvcHRpb25zLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5PHt9Pn0gb2JqZWN0cyBBbiBhcnJheSBvZiBvYmplY3RzLlxuICAgICAqIEByZXR1cm5zIHt7fX0gVGhlIGV4dGVuZGVkIG9iamVjdC5cbiAgICAgKiBAbWVtYmVyb2YgU2FuaXRpemVyXG4gICAgICovXG4gICAgU2FuaXRpemVyLnByb3RvdHlwZS5fZXh0ZW5kT2JqZWN0T2ZBcnJheXMgPSBmdW5jdGlvbiAob2JqZWN0cykge1xuICAgICAgICB2YXIgZmluYWxPYmogPSB7fTtcbiAgICAgICAgb2JqZWN0cy5mb3JFYWNoKGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKG9iaikuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob2JqW2tleV0pICYmIEFycmF5LmlzQXJyYXkoZmluYWxPYmpba2V5XSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZmluYWxPYmpba2V5XSA9IGZpbmFsT2JqW2tleV0uY29uY2F0KG9ialtrZXldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbmFsT2JqW2tleV0gPSBvYmpba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmaW5hbE9iajtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEl0ZXJhdGUgb3ZlciBhIHBsYWluIG9iamVjdCBvciBhcnJheSB0byBkZWVwbHkgc2FuaXRpemUgZWFjaCB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtvYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcmV0dXJucyB7KG9iamVjdCB8IG51bGwpfSBUaGUgc2FuaXRpemVkIG9iamVjdC5cbiAgICAgKiBAbWVtYmVyb2YgU2FuaXRpemVyXG4gICAgICovXG4gICAgU2FuaXRpemVyLnByb3RvdHlwZS5faXRlcmF0ZU92ZXJPYmplY3QgPSBmdW5jdGlvbiAob2JqLCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IHt9OyB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgaGFzQ2hhbmdlZF8xID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgY2hhbmdlZE9iaiA9IHZvaWQgMDtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHtcbiAgICAgICAgICAgICAgICBjaGFuZ2VkT2JqID0gb2JqLnJlZHVjZShmdW5jdGlvbiAocHJldiwgdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbGlkYXRpb24gPSBfdGhpcy52YWxpZGF0ZSh2YWx1ZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWxpZGF0aW9uLmlzVmFsaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2LmNvbmNhdChbdmFsdWVdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc0NoYW5nZWRfMSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJldi5jb25jYXQoW3ZhbGlkYXRpb24uc2FuaXRpemVkXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCBbXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghbG9kYXNoX2lzcGxhaW5vYmplY3Qob2JqKSkge1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmFsbG93VW5kZWZpbmVkICYmIHR5cGVvZiBvYmogPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqKTtcbiAgICAgICAgICAgICAgICBjaGFuZ2VkT2JqID0ga2V5cy5yZWR1Y2UoZnVuY3Rpb24gKHByZXYsIGtleSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBvYmpba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbGlkYXRpb24gPSBfdGhpcy52YWxpZGF0ZSh2YWx1ZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWxpZGF0aW9uLmlzVmFsaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFzQ2hhbmdlZF8xID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZba2V5XSA9IHZhbGlkYXRpb24uc2FuaXRpemVkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICAgICAgICAgIH0sIHt9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChoYXNDaGFuZ2VkXzEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2hhbmdlZE9iajtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRyaW0gd2hpdGVzcGFjZSBmcm9tIHRoZSBzdGFydCBhbmQgZW5kcyBvZiBhIHN0cmluZy5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsIFRoZSBzdHJpbmcgdG8gdHJpbS5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgdHJpbW1lZCBzdHJpbmcuXG4gICAgICovXG4gICAgU2FuaXRpemVyLnByb3RvdHlwZS5fdHJpbSA9IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZSBUaGlzIGlzIHVzZWQgYnkgSmVzdCxcbiAgICAgICAgLy8gYnV0IFR5cGVTY3JpcHQgZXJyb3JzIHNpbmNlIGl0IGFzc3VtZXMgYHRyaW1gIGlzIGFsd2F5cyBhdmFpbGFibGUuXG4gICAgICAgIHJldHVybiBTdHJpbmcucHJvdG90eXBlLnRyaW1cbiAgICAgICAgICAgID8gdmFsLnRyaW0oKVxuICAgICAgICAgICAgOiB2YWwucmVwbGFjZSgvKF5cXHMqKXwoXFxzKiQpL2csIFwiXCIpO1xuICAgIH07XG4gICAgcmV0dXJuIFNhbml0aXplcjtcbn0oKSk7XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5uJFQuZ2V0TG9nZ2VyKFwiZXNyaS53aWRnZXRzLnN1cHBvcnQud2lkZ2V0VXRpbHNcIik7ZnVuY3Rpb24gbCQ0KHQpe2NvbnN0IG49byRxLmFjcXVpcmUoKTtmb3IobGV0IGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXtjb25zdCB0PWFyZ3VtZW50c1tlXSxpPXR5cGVvZiB0O2lmKFwic3RyaW5nXCI9PT1pKW4ucHVzaCh0KTtlbHNlIGlmKEFycmF5LmlzQXJyYXkodCkpbi5wdXNoLmFwcGx5KG4sdCk7ZWxzZSBpZihcIm9iamVjdFwiPT09aSlmb3IoY29uc3QgZSBpbiB0KXRbZV0mJm4ucHVzaChlKTt9Y29uc3QgaT1uLmpvaW4oXCIgXCIpO3JldHVybiBvJHEucmVsZWFzZShuKSxpfWZ1bmN0aW9uIHAkNSh0KXtjb25zdCBlPVwiZGF0YS1ub2RlLXJlZlwiO3RoaXNbdC5nZXRBdHRyaWJ1dGUoZSldPXQ7fWNvbnN0IG0kMT1bXCJkZFwiLFwiZGxcIixcImR0XCIsXCJoMVwiLFwiaDJcIixcImgzXCIsXCJoNFwiLFwiaDVcIixcImg2XCIsXCJzdWJcIixcInN1cFwiLC4uLltcImFuaW1hdGVcIixcImFuaW1hdGV0cmFuc2Zvcm1cIixcImNpcmNsZVwiLFwiY2xpcHBhdGhcIixcImRlZnNcIixcImVsbGlwc2VcIixcImdcIixcImltYWdlXCIsXCJsaW5lXCIsXCJsaW5lYXJncmFkaWVudFwiLFwibWFya2VyXCIsXCJtYXNrXCIsXCJwYXRoXCIsXCJwYXR0ZXJuXCIsXCJwb2x5Z29uXCIsXCJwb2x5bGluZVwiLFwicmFkaWFsZ3JhZGllbnRcIixcInJlY3RcIixcInN0b3BcIixcInN2Z1wiLFwic3dpdGNoXCIsXCJzeW1ib2xcIixcInRleHRcIixcInRleHRwYXRoXCIsXCJ0c3BhblwiLFwidXNlXCJdXSxmJDI9bSQxLnJlZHVjZSgoKHQsZSk9Pih0W2VdPVtdLHQpKSx7fSksaCQyPVtcImFsaWduXCIsXCJhbGlua1wiLFwiYWx0XCIsXCJiZ2NvbG9yXCIsXCJib3JkZXJcIixcImNlbGxwYWRkaW5nXCIsXCJjZWxsc3BhY2luZ1wiLFwiY2xhc3NcIixcImNvbG9yXCIsXCJjb2xzXCIsXCJjb2xzcGFuXCIsXCJjb29yZHNcIixcImRpclwiLFwiZmFjZVwiLFwiaGVpZ2h0XCIsXCJoc3BhY2VcIixcImlzbWFwXCIsXCJsYW5nXCIsXCJtYXJnaW5oZWlnaHRcIixcIm1hcmdpbndpZHRoXCIsXCJtdWx0aXBsZVwiLFwibm9ocmVmXCIsXCJub3Jlc2l6ZVwiLFwibm9zaGFkZVwiLFwibm93cmFwXCIsXCJyZWZcIixcInJlbFwiLFwicmV2XCIsXCJyb3dzXCIsXCJyb3dzcGFuXCIsXCJzY3JvbGxpbmdcIixcInNoYXBlXCIsXCJzcGFuXCIsXCJzdW1tYXJ5XCIsXCJ0YWJpbmRleFwiLFwidGl0bGVcIixcInVzZW1hcFwiLFwidmFsaWduXCIsXCJ2YWx1ZVwiLFwidmxpbmtcIixcInZzcGFjZVwiLFwid2lkdGhcIl0sdiQyPW5ldyBTYW5pdGl6ZXIoe3doaXRlTGlzdDpmJDIsb25UYWdBdHRyOih0LGUsbik9Pntjb25zdCBpPWAke2V9PVwiJHtufVwiYDtpZihoJDIuaW5jbHVkZXMoZSkpcmV0dXJuIGl9LHN0cmlwSWdub3JlVGFnOiEwLHN0cmlwSWdub3JlVGFnQm9keTpbXCJzY3JpcHRcIixcInN0eWxlXCJdfSwhMCk7ZnVuY3Rpb24gdyQxKCl7cmV0dXJuIGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZShcIi0tZXNyaS1jYWxjaXRlLXRoZW1lLW5hbWVcIikucmVwbGFjZSgvXFxzfCd8XCIvZyxcIlwiKX1cblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmZ1bmN0aW9uIGUkMyhlKXtyZXR1cm4gZnVuY3Rpb24ocyxuKXtzLmhhc093blByb3BlcnR5KFwiX21lc3NhZ2VCdW5kbGVQcm9wc1wiKXx8KHMuX21lc3NhZ2VCdW5kbGVQcm9wcz1zLl9tZXNzYWdlQnVuZGxlUHJvcHM/cy5fbWVzc2FnZUJ1bmRsZVByb3BzLnNsaWNlKCk6W10pO3MuX21lc3NhZ2VCdW5kbGVQcm9wcy5wdXNoKHtidW5kbGVQYXRoOmUscHJvcGVydHlOYW1lOm59KTt9fVxuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xudmFyIGUkMj1mdW5jdGlvbihlKXtyZXR1cm4ge3Zub2RlU2VsZWN0b3I6XCJcIixwcm9wZXJ0aWVzOnZvaWQgMCxjaGlsZHJlbjp2b2lkIDAsdGV4dDplLnRvU3RyaW5nKCksZG9tTm9kZTpudWxsfX0sciQxPWZ1bmN0aW9uKG8sdCl7Zm9yKHZhciBuPTAsZD1vLmxlbmd0aDtuPGQ7bisrKXt2YXIgaT1vW25dO0FycmF5LmlzQXJyYXkoaSk/ciQxKGksdCk6bnVsbCE9aSYmITEhPT1pJiYoaS5oYXNPd25Qcm9wZXJ0eShcInZub2RlU2VsZWN0b3JcIil8fChpPWUkMihpKSksdC5wdXNoKGkpKTt9fSxvJDM9ZnVuY3Rpb24oZSxvKXtmb3IodmFyIHQ9W10sbj0yO248YXJndW1lbnRzLmxlbmd0aDtuKyspdFtuLTJdPWFyZ3VtZW50c1tuXTtpZigxPT09dC5sZW5ndGgmJlwic3RyaW5nXCI9PXR5cGVvZiB0WzBdKXJldHVybiB7dm5vZGVTZWxlY3RvcjplLHByb3BlcnRpZXM6b3x8dm9pZCAwLGNoaWxkcmVuOnZvaWQgMCx0ZXh0OnRbMF0sZG9tTm9kZTpudWxsfTt2YXIgZD1bXTtyZXR1cm4gciQxKHQsZCkse3Zub2RlU2VsZWN0b3I6ZSxwcm9wZXJ0aWVzOm98fHZvaWQgMCxjaGlsZHJlbjpkLHRleHQ6dm9pZCAwLGRvbU5vZGU6bnVsbH19O1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuZnVuY3Rpb24gYyQxKG4sdCxyLGUsbyl7Y29uc3QgdT1uLndhdGNoKHQsKCh0LG8sdSxjKT0+e3ImJiFyKHQpfHxudWxsPT1lfHxlLmNhbGwobix0LG8sdSxjKTt9KSxvKTtpZihBcnJheS5pc0FycmF5KHQpKWZvcihjb25zdCBjIG9mIHQpe2NvbnN0IG89bi5nZXQoYyk7ciYmcihvKSYmKG51bGw9PWV8fGUuY2FsbChuLG8sbyx0LG4pKTt9ZWxzZSB7Y29uc3Qgbz1uLmdldCh0KTtyJiZyKG8pJiYobnVsbD09ZXx8ZS5jYWxsKG4sbyxvLHQsbikpO31yZXR1cm4gdX1mdW5jdGlvbiBpJDQobix0LHIsaSxmKXtjb25zdCBsPVwiZnVuY3Rpb25cIj09dHlwZW9mIGk/aTpudWxsLHM9XCJvYmplY3RcIj09dHlwZW9mIGk/aTpudWxsO1wiYm9vbGVhblwiPT10eXBlb2YgaSYmKGY9aSk7bGV0IGEsbT0hMTtmdW5jdGlvbiBwKCl7YSYmKGEucmVtb3ZlKCksYT1udWxsKTt9Y29uc3Qgdj1FJDMoKTt2JDkocywoKCk9PntwKCksdi5yZWplY3QobSR4KCkpO30pKTtjb25zdCBkPXt0aGVuOnYucHJvbWlzZS50aGVuLmJpbmQodi5wcm9taXNlKSxjYXRjaDp2LnByb21pc2UuY2F0Y2guYmluZCh2LnByb21pc2UpLHJlbW92ZTpwfTtyZXR1cm4gT2JqZWN0LmZyZWV6ZShkKSxhPWMkMShuLHQsciwoKHQscixlLG8pPT57bT0hMCxwKCksbCYmbC5jYWxsKG4sdCxyLGUsbyksdi5yZXNvbHZlKHt2YWx1ZTp0LG9sZFZhbHVlOnIscHJvcGVydHlOYW1lOmUsdGFyZ2V0Om99KTt9KSxmKSxtJiZwKCksZH1mdW5jdGlvbiBmJDEobil7cmV0dXJuICEhbn1mdW5jdGlvbiBsJDMobil7cmV0dXJuICFufWZ1bmN0aW9uIHMkNChuKXtyZXR1cm4gITA9PT1ufWZ1bmN0aW9uIGEkMyhuKXtyZXR1cm4gITE9PT1ufWNvbnN0IHYkMT0vXFw/KFxcLnwkKS9nO2Z1bmN0aW9uIGQkNShuLHQscixlKXtjb25zdCBvPUFycmF5LmlzQXJyYXkodCk/dDp0LmluZGV4T2YoXCIsXCIpPi0xP3Quc3BsaXQoXCIsXCIpOlt0XSx1PWgkMShuLHQscixlKTtmb3IoY29uc3QgYyBvZiBvKXtjb25zdCB0PWMudHJpbSgpLnJlcGxhY2UodiQxLFwiJDFcIiksZT1uLmdldCh0KTtyLmNhbGwobixlLGUsdCxuKTt9cmV0dXJuIHV9ZnVuY3Rpb24gaCQxKG4sdCxyLGUpe3JldHVybiBuLndhdGNoKHQscixlKX1mdW5jdGlvbiBqJDEobix0LHIsZSl7cmV0dXJuIGkkNChuLHQsZiQxLHIsZSl9ZnVuY3Rpb24gQSQxKG4sdCxyLGUpe3JldHVybiBpJDQobix0LGwkMyxyLGUpfWZ1bmN0aW9uIHgkMShuLHQscixlKXtyZXR1cm4gaSQ0KG4sdCxzJDQscixlKX1mdW5jdGlvbiAkKG4sdCxyLGUpe3JldHVybiBpJDQobix0LGEkMyxyLGUpfWZ1bmN0aW9uIEMkMihuLGUsbyx1LGMsaSxmKXtjb25zdCBsPXt9O2Z1bmN0aW9uIHModCl7Y29uc3Qgcj1sW3RdO3ImJihpJiZpKHIudGFyZ2V0LHQsbixvKSxyLmhhbmRsZS5yZW1vdmUoKSxkZWxldGUgbFt0XSk7fWNvbnN0IGE9ZCQ1KG4sZSwoKGUsaSxmKT0+e3MoZiksZSR2KGUpJiYobFtmXT17aGFuZGxlOnIkcihlLG8sdSksdGFyZ2V0OmV9LGMmJmMoZSxmLG4sbykpO30pLGYpO3JldHVybiB7cmVtb3ZlKCl7YS5yZW1vdmUoKTtmb3IoY29uc3QgbiBpbiBsKXMobik7fX19XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5mdW5jdGlvbiBlJDEoZSl7cmV0dXJuIFwic3RyaW5nXCI9PXR5cGVvZiBlP2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKGUpOmV9XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5jb25zdCB0JDI9XCJodHRwOi8vd3d3LnczLm9yZy9cIixyPWAke3QkMn0yMDAwL3N2Z2AsbyQyPWAke3QkMn0xOTk5L3hsaW5rYDtsZXQgaSQzLGwkMj1bXSxuJDI9KGUsdCk9PntsZXQgcj17fTtyZXR1cm4gT2JqZWN0LmtleXMoZSkuZm9yRWFjaCgodD0+e3JbdF09ZVt0XTt9KSksdCYmT2JqZWN0LmtleXModCkuZm9yRWFjaCgoZT0+e3JbZV09dFtlXTt9KSkscn0scyQzPShlLHQpPT5lLnZub2RlU2VsZWN0b3I9PT10LnZub2RlU2VsZWN0b3ImJihlLnByb3BlcnRpZXMmJnQucHJvcGVydGllcz9lLnByb3BlcnRpZXMua2V5PT09dC5wcm9wZXJ0aWVzLmtleSYmZS5wcm9wZXJ0aWVzLmJpbmQ9PT10LnByb3BlcnRpZXMuYmluZDohZS5wcm9wZXJ0aWVzJiYhdC5wcm9wZXJ0aWVzKSxwJDQ9ZT0+e2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlKXRocm93IG5ldyBFcnJvcihcIlN0eWxlIHZhbHVlcyBtdXN0IGJlIHN0cmluZ3NcIil9LGQkND0oZSx0LHIpPT57aWYoXCJcIiE9PXQudm5vZGVTZWxlY3Rvcilmb3IobGV0IG89cjtvPGUubGVuZ3RoO28rKylpZihzJDMoZVtvXSx0KSlyZXR1cm4gbztyZXR1cm4gLTF9LGEkMj0oZSx0LHIsbyk9PntsZXQgaT1lW3RdO2lmKFwiXCI9PT1pLnZub2RlU2VsZWN0b3IpcmV0dXJuO2xldCBsPWkucHJvcGVydGllcztpZighKGw/dm9pZCAwPT09bC5rZXk/bC5iaW5kOmwua2V5OnZvaWQgMCkpZm9yKGxldCBuPTA7bjxlLmxlbmd0aDtuKyspaWYobiE9PXQpe2xldCB0PWVbbl07aWYocyQzKHQsaSkpdGhyb3cgbmV3IEVycm9yKGAke3Iudm5vZGVTZWxlY3Rvcn0gaGFkIGEgJHtpLnZub2RlU2VsZWN0b3J9IGNoaWxkICR7XCJhZGRlZFwiPT09bz9vOlwicmVtb3ZlZFwifSwgYnV0IHRoZXJlIGlzIG5vdyBtb3JlIHRoYW4gb25lLiBZb3UgbXVzdCBhZGQgdW5pcXVlIGtleSBwcm9wZXJ0aWVzIHRvIG1ha2UgdGhlbSBkaXN0aW5ndWlzaGFibGUuYCl9fSxmPWU9PntpZihlLnByb3BlcnRpZXMpe2xldCB0PWUucHJvcGVydGllcy5lbnRlckFuaW1hdGlvbjt0JiZ0KGUuZG9tTm9kZSxlLnByb3BlcnRpZXMpO319LGM9W10sdT0hMSxoPWU9PnsoZS5jaGlsZHJlbnx8W10pLmZvckVhY2goaCksZS5wcm9wZXJ0aWVzJiZlLnByb3BlcnRpZXMuYWZ0ZXJSZW1vdmVkJiZlLnByb3BlcnRpZXMuYWZ0ZXJSZW1vdmVkLmFwcGx5KGUucHJvcGVydGllcy5iaW5kfHxlLnByb3BlcnRpZXMsW2UuZG9tTm9kZV0pO30sbT0oKT0+e3U9ITEsYy5mb3JFYWNoKGgpLGMubGVuZ3RoPTA7fSx2PWU9PntjLnB1c2goZSksdXx8KHU9ITAsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyYmXCJyZXF1ZXN0SWRsZUNhbGxiYWNrXCJpbiB3aW5kb3c/d2luZG93LnJlcXVlc3RJZGxlQ2FsbGJhY2sobSx7dGltZW91dDoxNn0pOnNldFRpbWVvdXQobSwxNikpO30seT1lPT57bGV0IHQ9ZS5kb21Ob2RlO2lmKGUucHJvcGVydGllcyl7bGV0IHI9ZS5wcm9wZXJ0aWVzLmV4aXRBbmltYXRpb247aWYocil7dC5zdHlsZS5wb2ludGVyRXZlbnRzPVwibm9uZVwiO2xldCBvPSgpPT57dC5wYXJlbnROb2RlJiYodC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQpLHYoZSkpO307cmV0dXJuIHZvaWQgcih0LG8sZS5wcm9wZXJ0aWVzKX19dC5wYXJlbnROb2RlJiYodC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQpLHYoZSkpO30sZz0odCxpLGwpPT57aWYoIWkpcmV0dXJuO2xldCBuPWwuZXZlbnRIYW5kbGVySW50ZXJjZXB0b3Iscz1PYmplY3Qua2V5cyhpKSxkPXMubGVuZ3RoO2ZvcihsZXQgYT0wO2E8ZDthKyspe2xldCBkPXNbYV0sZj1pW2RdO2lmKFwiY2xhc3NOYW1lXCI9PT1kKXRocm93IG5ldyBFcnJvcignUHJvcGVydHkgXCJjbGFzc05hbWVcIiBpcyBub3Qgc3VwcG9ydGVkLCB1c2UgXCJjbGFzc1wiLicpO2lmKFwiY2xhc3NcIj09PWQpeCh0LGYsITApO2Vsc2UgaWYoXCJjbGFzc2VzXCI9PT1kKXtsZXQgZT1PYmplY3Qua2V5cyhmKSxyPWUubGVuZ3RoO2ZvcihsZXQgbz0wO288cjtvKyspe2xldCByPWVbb107ZltyXSYmdC5jbGFzc0xpc3QuYWRkKHIpO319ZWxzZSBpZihcInN0eWxlc1wiPT09ZCl7bGV0IGU9T2JqZWN0LmtleXMoZikscj1lLmxlbmd0aDtmb3IobGV0IG89MDtvPHI7bysrKXtsZXQgcj1lW29dLGk9ZltyXTtpJiYocCQ0KGkpLGwuc3R5bGVBcHBseWVyKHQscixpKSk7fX1lbHNlIGlmKFwia2V5XCIhPT1kJiZudWxsIT1mKXtsZXQgcz10eXBlb2YgZjtcImZ1bmN0aW9uXCI9PT1zPygwPT09ZC5sYXN0SW5kZXhPZihcIm9uXCIsMCkmJihuJiYoZj1uKGQsZix0LGkpKSxcIm9uaW5wdXRcIj09PWQmJmZ1bmN0aW9uKCl7bGV0IGU9ZjtmPWZ1bmN0aW9uKHQpe2UuYXBwbHkodGhpcyxbdF0pLHQudGFyZ2V0W1wib25pbnB1dC12YWx1ZVwiXT10LnRhcmdldC52YWx1ZTt9O30oKSksdFtkXT1mKTpsLm5hbWVzcGFjZT09PXI/XCJocmVmXCI9PT1kP3Quc2V0QXR0cmlidXRlTlMobyQyLGQsZik6dC5zZXRBdHRyaWJ1dGUoZCxmKTpcInN0cmluZ1wiPT09cyYmXCJ2YWx1ZVwiIT09ZD9cImlubmVySFRNTFwiPT09ZD90W2RdPXYkMi5zYW5pdGl6ZShmKTp0LnNldEF0dHJpYnV0ZShkLGYpOnRbZF09Zjt9fX0sYiQyPShlLHQscik9PntpZih0KWZvcihsZXQgbyBvZiB0KXcobyxlLHZvaWQgMCxyKTt9LE4kMT0oZSx0LHIpPT57YiQyKGUsdC5jaGlsZHJlbixyKSx0LnRleHQmJihlLnRleHRDb250ZW50PXQudGV4dCksZyhlLHQucHJvcGVydGllcyxyKSx0LnByb3BlcnRpZXMmJnQucHJvcGVydGllcy5hZnRlckNyZWF0ZSYmdC5wcm9wZXJ0aWVzLmFmdGVyQ3JlYXRlLmFwcGx5KHQucHJvcGVydGllcy5iaW5kfHx0LnByb3BlcnRpZXMsW2Uscix0LnZub2RlU2VsZWN0b3IsdC5wcm9wZXJ0aWVzLHQuY2hpbGRyZW5dKTt9LHc9KGUsdCxvLGkpPT57bGV0IGwscz0wLHA9ZS52bm9kZVNlbGVjdG9yLGQ9dC5vd25lckRvY3VtZW50O2lmKFwiXCI9PT1wKWw9ZS5kb21Ob2RlPWQuY3JlYXRlVGV4dE5vZGUoZS50ZXh0KSx2b2lkIDAhPT1vP3QuaW5zZXJ0QmVmb3JlKGwsbyk6dC5hcHBlbmRDaGlsZChsKTtlbHNlIHtmb3IobGV0IGE9MDthPD1wLmxlbmd0aDsrK2Epe2xldCBmPXAuY2hhckF0KGEpO2lmKGE9PT1wLmxlbmd0aHx8XCIuXCI9PT1mfHxcIiNcIj09PWYpe2xldCBmPXAuY2hhckF0KHMtMSksYz1wLnNsaWNlKHMsYSk7XCIuXCI9PT1mP2wuY2xhc3NMaXN0LmFkZChjKTpcIiNcIj09PWY/bC5pZD1jOihcInN2Z1wiPT09YyYmKGk9biQyKGkse25hbWVzcGFjZTpyfSkpLHZvaWQgMCE9PWkubmFtZXNwYWNlP2w9ZS5kb21Ob2RlPWQuY3JlYXRlRWxlbWVudE5TKGkubmFtZXNwYWNlLGMpOihsPWUuZG9tTm9kZT1lLmRvbU5vZGV8fGQuY3JlYXRlRWxlbWVudChjKSxcImlucHV0XCI9PT1jJiZlLnByb3BlcnRpZXMmJnZvaWQgMCE9PWUucHJvcGVydGllcy50eXBlJiZsLnNldEF0dHJpYnV0ZShcInR5cGVcIixlLnByb3BlcnRpZXMudHlwZSkpLHZvaWQgMCE9PW8/dC5pbnNlcnRCZWZvcmUobCxvKTpsLnBhcmVudE5vZGUhPT10JiZ0LmFwcGVuZENoaWxkKGwpKSxzPWErMTt9fU4kMShsLGUsaSk7fX0seD0oZSx0LHIpPT57dCYmdC5zcGxpdChcIiBcIikuZm9yRWFjaCgodD0+e3QmJmUuY2xhc3NMaXN0LnRvZ2dsZSh0LHIpO30pKTt9LGs9KHQsaSxsLG4pPT57aWYoIWwpcmV0dXJuO2xldCBzPSExLGQ9T2JqZWN0LmtleXMobCksYT1kLmxlbmd0aDtmb3IobGV0IGY9MDtmPGE7ZisrKXtsZXQgYT1kW2ZdLGM9bFthXSx1PWlbYV07aWYoXCJjbGFzc1wiPT09YSl1IT09YyYmKHgodCx1LCExKSx4KHQsYywhMCkpO2Vsc2UgaWYoXCJjbGFzc2VzXCI9PT1hKXtsZXQgZT10LmNsYXNzTGlzdCxyPU9iamVjdC5rZXlzKGMpLG89ci5sZW5ndGg7Zm9yKGxldCB0PTA7dDxvO3QrKyl7bGV0IG89clt0XSxpPSEhY1tvXTtpIT09ISF1W29dJiYocz0hMCxpP2UuYWRkKG8pOmUucmVtb3ZlKG8pKTt9fWVsc2UgaWYoXCJzdHlsZXNcIj09PWEpe2xldCBlPU9iamVjdC5rZXlzKGMpLHI9ZS5sZW5ndGg7Zm9yKGxldCBvPTA7bzxyO28rKyl7bGV0IHI9ZVtvXSxpPWNbcl07aSE9PXVbcl0mJihzPSEwLGk/KHAkNChpKSxuLnN0eWxlQXBwbHllcih0LHIsaSkpOm4uc3R5bGVBcHBseWVyKHQscixcIlwiKSk7fX1lbHNlIGlmKGN8fFwic3RyaW5nXCIhPXR5cGVvZiB1fHwoYz1cIlwiKSxcInZhbHVlXCI9PT1hKXtsZXQgZT10W2FdO2UhPT1jJiYodFtcIm9uaW5wdXQtdmFsdWVcIl0/ZT09PXRbXCJvbmlucHV0LXZhbHVlXCJdOmMhPT11KSYmKHRbYV09Yyx0W1wib25pbnB1dC12YWx1ZVwiXT12b2lkIDApLGMhPT11JiYocz0hMCk7fWVsc2UgaWYoYyE9PXUpe2xldCBpPXR5cGVvZiBjO1wiZnVuY3Rpb25cIj09PWkmJm4uZXZlbnRIYW5kbGVySW50ZXJjZXB0b3J8fChuLm5hbWVzcGFjZT09PXI/XCJocmVmXCI9PT1hP3Quc2V0QXR0cmlidXRlTlMobyQyLGEsYyk6dC5zZXRBdHRyaWJ1dGUoYSxjKTpcInN0cmluZ1wiPT09aT9cImlubmVySFRNTFwiPT09YT90W2FdPXYkMi5zYW5pdGl6ZShjKTpcInJvbGVcIj09PWEmJlwiXCI9PT1jP3QucmVtb3ZlQXR0cmlidXRlKGEpOnQuc2V0QXR0cmlidXRlKGEsYyk6dFthXSE9PWMmJih0W2FdPWMpLHM9ITApO319cmV0dXJuIHN9LEE9KGUsdCxyLG8sbik9PntpZihyPT09bylyZXR1cm4gITE7bz1vfHxsJDI7bGV0IHAsYz0ocj1yfHxsJDIpLmxlbmd0aCx1PW8ubGVuZ3RoLGg9MCxtPTAsdj0hMTtmb3IoO208dTspe2xldCBsPWg8Yz9yW2hdOnZvaWQgMCx1PW9bbV07aWYodm9pZCAwIT09bCYmcyQzKGwsdSkpdj1pJDMobCx1LG4pfHx2LGgrKztlbHNlIHtsZXQgbD1kJDQocix1LGgrMSk7aWYobD49MCl7Zm9yKHA9aDtwPGw7cCsrKXkocltwXSksYSQyKHIscCxlLFwicmVtb3ZlZFwiKTt2PWkkMyhyW2xdLHUsbil8fHYsaD1sKzE7fWVsc2Ugdyh1LHQsaDxjP3JbaF0uZG9tTm9kZTp2b2lkIDAsbiksZih1KSxhJDIobyxtLGUsXCJhZGRlZFwiKTt9bSsrO31pZihjPmgpZm9yKHA9aDtwPGM7cCsrKXkocltwXSksYSQyKHIscCxlLFwicmVtb3ZlZFwiKTtyZXR1cm4gdn07aSQzPShlLHQsbyk9PntsZXQgaT1lLmRvbU5vZGUsbD0hMTtpZihlPT09dClyZXR1cm4gITE7bGV0IHM9ITE7aWYoXCJcIj09PXQudm5vZGVTZWxlY3Rvcil7aWYodC50ZXh0IT09ZS50ZXh0KXtsZXQgZT1pLm93bmVyRG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodC50ZXh0KTtyZXR1cm4gaS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChlLGkpLHQuZG9tTm9kZT1lLGw9ITAsbH10LmRvbU5vZGU9aTt9ZWxzZSAwPT09dC52bm9kZVNlbGVjdG9yLmxhc3RJbmRleE9mKFwic3ZnXCIsMCkmJihvPW4kMihvLHtuYW1lc3BhY2U6cn0pKSxlLnRleHQhPT10LnRleHQmJihzPSEwLHZvaWQgMD09PXQudGV4dD9pLnJlbW92ZUNoaWxkKGkuZmlyc3RDaGlsZCk6aS50ZXh0Q29udGVudD10LnRleHQpLHQuZG9tTm9kZT1pLHM9QSh0LGksZS5jaGlsZHJlbix0LmNoaWxkcmVuLG8pfHxzLHM9ayhpLGUucHJvcGVydGllcyx0LnByb3BlcnRpZXMsbyl8fHMsdC5wcm9wZXJ0aWVzJiZ0LnByb3BlcnRpZXMuYWZ0ZXJVcGRhdGUmJnQucHJvcGVydGllcy5hZnRlclVwZGF0ZS5hcHBseSh0LnByb3BlcnRpZXMuYmluZHx8dC5wcm9wZXJ0aWVzLFtpLG8sdC52bm9kZVNlbGVjdG9yLHQucHJvcGVydGllcyx0LmNoaWxkcmVuXSk7cmV0dXJuIHMmJnQucHJvcGVydGllcyYmdC5wcm9wZXJ0aWVzLnVwZGF0ZUFuaW1hdGlvbiYmdC5wcm9wZXJ0aWVzLnVwZGF0ZUFuaW1hdGlvbihpLHQucHJvcGVydGllcyxlLnByb3BlcnRpZXMpLGx9O2xldCBTPShlLHQpPT4oe2dldExhc3RSZW5kZXI6KCk9PmUsdXBkYXRlOnI9PntpZihlLnZub2RlU2VsZWN0b3IhPT1yLnZub2RlU2VsZWN0b3IpdGhyb3cgbmV3IEVycm9yKFwiVGhlIHNlbGVjdG9yIGZvciB0aGUgcm9vdCBWTm9kZSBtYXkgbm90IGJlIGNoYW5nZWQuIChjb25zaWRlciB1c2luZyBkb20ubWVyZ2UgYW5kIGFkZCBvbmUgZXh0cmEgbGV2ZWwgdG8gdGhlIHZpcnR1YWwgRE9NKVwiKTtsZXQgbz1lO2U9cixpJDMobyxyLHQpO30sZG9tTm9kZTplLmRvbU5vZGV9KTtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmNvbnN0IHAkMz17bmFtZXNwYWNlOnZvaWQgMCxwZXJmb3JtYW5jZUxvZ2dlcjooKT0+e30sZXZlbnRIYW5kbGVySW50ZXJjZXB0b3I6dm9pZCAwLHN0eWxlQXBwbHllcjooZSxyLG8pPT57XCItXCI9PT1yLmNoYXJBdCgwKT9lLnN0eWxlLnNldFByb3BlcnR5KHIsbyk6ZS5zdHlsZVtyXT1vO319O2xldCBkJDM9cj0+biQyKHAkMyxyKSxuJDE9e2NyZWF0ZTooZSx0KT0+KHQ9ZCQzKHQpLHcoZSxkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHZvaWQgMCx0KSxTKGUsdCkpLGFwcGVuZDooZSx0LHApPT4ocD1kJDMocCksdyh0LGUsdm9pZCAwLHApLFModCxwKSksaW5zZXJ0QmVmb3JlOihlLHQscCk9PihwPWQkMyhwKSx3KHQsZS5wYXJlbnROb2RlLGUscCksUyh0LHApKSxtZXJnZTooZSxyLHApPT4ocD1kJDMocCksci5kb21Ob2RlPWUsTiQxKGUscixwKSxTKHIscCkpLHJlcGxhY2U6KGUsdCxwKT0+KHA9ZCQzKHApLHcodCxlLnBhcmVudE5vZGUsZSxwKSxlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZSksUyh0LHApKX07XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5sZXQgdCQxLG49KGUscik9PntsZXQgdD1bXTtmb3IoO2UmJmUhPT1yOyl0LnB1c2goZSksZT1lLnBhcmVudE5vZGU7cmV0dXJuIHR9O3QkMT1BcnJheS5wcm90b3R5cGUuZmluZD8oZSxyKT0+ZS5maW5kKHIpOihlLHIpPT5lLmZpbHRlcihyKVswXTtsZXQgbyQxPShlLHIpPT57bGV0IG49ZTtyZXR1cm4gci5mb3JFYWNoKChlPT57bj1uJiZuLmNoaWxkcmVuP3QkMShuLmNoaWxkcmVuLChyPT5yLmRvbU5vZGU9PT1lKSk6dm9pZCAwO30pKSxufSxkJDI9KGUscix0KT0+e2xldCBkPWZ1bmN0aW9uKGQpe3QoXCJkb21FdmVudFwiLGQpO2xldCBpPXIoKSxwPW4oZC5jdXJyZW50VGFyZ2V0LGkuZG9tTm9kZSk7cC5yZXZlcnNlKCk7bGV0IGwsYT1vJDEoaS5nZXRMYXN0UmVuZGVyKCkscCk7cmV0dXJuIGUuc2NoZWR1bGVSZW5kZXIoKSxhJiYobD1hLnByb3BlcnRpZXNbYG9uJHtkLnR5cGV9YF0uYXBwbHkoYS5wcm9wZXJ0aWVzLmJpbmR8fHRoaXMsYXJndW1lbnRzKSksdChcImRvbUV2ZW50UHJvY2Vzc2VkXCIsZCksbH07cmV0dXJuIChlLHIsdCxuKT0+ZH0saSQyPXQ9PntsZXQgbixvLGk9ZCQzKHQpLHA9aS5wZXJmb3JtYW5jZUxvZ2dlcixsPSEwLGE9ITEscz1bXSxjPVtdLHU9KGUscix0KT0+e2xldCBvLGw9KCk9Pm87aS5ldmVudEhhbmRsZXJJbnRlcmNlcHRvcj1kJDIobixsLHApLG89ZShyLHQoKSxpKSxzLnB1c2gobyksYy5wdXNoKHQpO30sZj0oKT0+e2lmKG89dm9pZCAwLGwpe2w9ITEscChcInJlbmRlclN0YXJ0XCIsdm9pZCAwKTtmb3IobGV0IGU9MDtlPHMubGVuZ3RoO2UrKyl7bGV0IHI9Y1tlXSgpO3AoXCJyZW5kZXJlZFwiLHZvaWQgMCksc1tlXS51cGRhdGUocikscChcInBhdGNoZWRcIix2b2lkIDApO31wKFwicmVuZGVyRG9uZVwiLHZvaWQgMCksbD0hMDt9fTtyZXR1cm4gbj17cmVuZGVyTm93OmYsc2NoZWR1bGVSZW5kZXI6KCk9PntvfHxhfHwobz1yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZikpO30sc3RvcDooKT0+e28mJihjYW5jZWxBbmltYXRpb25GcmFtZShvKSxvPXZvaWQgMCksYT0hMDt9LHJlc3VtZTooKT0+e2E9ITEsbD0hMCxuLnNjaGVkdWxlUmVuZGVyKCk7fSxhcHBlbmQ6KGUsdCk9Pnt1KG4kMS5hcHBlbmQsZSx0KTt9LGluc2VydEJlZm9yZTooZSx0KT0+e3UobiQxLmluc2VydEJlZm9yZSxlLHQpO30sbWVyZ2U6KGUsdCk9Pnt1KG4kMS5tZXJnZSxlLHQpO30scmVwbGFjZTooZSx0KT0+e3UobiQxLnJlcGxhY2UsZSx0KTt9LGRldGFjaDplPT57Zm9yKGxldCByPTA7cjxjLmxlbmd0aDtyKyspaWYoY1tyXT09PWUpcmV0dXJuIGMuc3BsaWNlKHIsMSkscy5zcGxpY2UociwxKVswXTt0aHJvdyBuZXcgRXJyb3IoXCJyZW5kZXJGdW5jdGlvbiB3YXMgbm90IGZvdW5kXCIpfX0sbn07XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5jb25zdCBiJDE9biRULmdldExvZ2dlcihcImVzcmkud2lkZ2V0cy5XaWRnZXRcIik7bGV0IEg9MDtjb25zdCBOPXt3aWRnZXRJY29uOlwiZXNyaS1pY29uLWNoZWNrYm94LXVuY2hlY2tlZFwifSxDJDE9aSQyKCk7bGV0IFIkMT0hMSxUPWNsYXNzIGV4dGVuZHMobiRjKG4kRi5FdmVudGVkQWNjZXNzb3IpKXtjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKGUsdCksdGhpcy5fYXR0YWNoZWQ9ITEsdGhpcy5faW50ZXJuYWxIYW5kbGVzPW5ldyB1JEIsdGhpcy5fcHJvamVjdG9yPUMkMSx0aGlzLmRvbU5vZGU9bnVsbCx0aGlzLmljb25DbGFzcz1OLndpZGdldEljb24sdGhpcy5sYWJlbD10aGlzLmRlY2xhcmVkQ2xhc3Muc3BsaXQoXCIuXCIpLnBvcCgpLHRoaXMudmlzaWJsZT0hMCx0aGlzLl9sb2FkTG9jYWxlPXokNSgoYXN5bmMoKT0+e2lmKHRoaXMuX21lc3NhZ2VCdW5kbGVQcm9wcyYmdGhpcy5fbWVzc2FnZUJ1bmRsZVByb3BzLmxlbmd0aCl7Y29uc3QgZT1hd2FpdCBBJDgodGhpcy5fbWVzc2FnZUJ1bmRsZVByb3BzLm1hcCgoYXN5bmMoe2J1bmRsZVBhdGg6ZSxwcm9wZXJ0eU5hbWU6dH0pPT57dGhpc1t0XT1hd2FpdCBjJGUoZSk7fSkpKTtmb3IoY29uc3QgdCBvZiBlKXQuZXJyb3ImJmIkMS5lcnJvcihcIndpZGdldC1pbnRsOmxvY2FsZS1lcnJvclwiLHRoaXMuZGVjbGFyZWRDbGFzcyx0LmVycm9yKTt9YXdhaXQgdGhpcy5sb2FkTG9jYWxlKCk7fSkpO2NvbnN0IHI9W1wibGlnaHRcIixcImRhcmtcIl0scz13JDEoKXx8XCJsaWdodFwiO3IuaW5jbHVkZXMocyl8fHMkQyhiJDEsXCJUaGUgZm9sbG93aW5nIHRoZW1lcyBhcmUgZGVwcmVjYXRlZDogbGlnaHQtYmx1ZSwgZGFyay1ibHVlLCBsaWdodC1ncmVlbiwgZGFyay1ncmVlbiwgbGlnaHQtcHVycGxlLCBkYXJrLXB1cnBsZSwgbGlnaHQtcmVkLCBhbmQgZGFyay1yZWQuXCIse3ZlcnNpb246XCI0LjE5XCIsd2Fybk9uY2U6ITAsc2VlOlwiaHR0cHM6Ly9kZXZlbG9wZXJzLmFyY2dpcy5jb20vamF2YXNjcmlwdC9sYXRlc3Qvc3R5bGluZy9cIn0pO2NvbnN0IG89XCJlc3JpLXdpZGdldC11aWQtXCIrbyR1KCksZD10aGlzLnJlbmRlci5iaW5kKHRoaXMpO2xldCBwPSExO3RoaXMuX3RyYWNraW5nVGFyZ2V0PW5ldyBzJHMoKCgpPT50aGlzLnNjaGVkdWxlUmVuZGVyKCkpKTtjb25zdCBtPSgpPT57aWYoIXB8fHRoaXMuZGVzdHJveWVkKXJldHVybiBudWxsO2NvbnN0IGU9ZCgpO3JldHVybiBlLnByb3BlcnRpZXM/ZS5wcm9wZXJ0aWVzLmtleXx8KGUucHJvcGVydGllcy5rZXk9byk6ZS5wcm9wZXJ0aWVzPXtrZXk6b30sZX07dGhpcy5yZW5kZXI9KCk9PntpZihSJDEpcmV0dXJuIG0oKTtsZXQgZTt0aGlzLl90cmFja2luZ1RhcmdldC5jbGVhcigpLFIkMT0hMDt0cnl7ZT1hJEoodGhpcy5fdHJhY2tpbmdUYXJnZXQsbSk7fWZpbmFsbHl7UiQxPSExO31yZXR1cm4gZX0sdGhpcy5hZGRSZXNvbHZpbmdQcm9taXNlKHRoaXMuX3Jlc291cmNlc0ZldGNoPXRoaXMuYmVmb3JlRmlyc3RSZW5kZXIoKS50aGVuKCgoKT0+e3A9ITAsdGhpcy5fcG9zdEluaXRpYWxpemUoKTt9KSkpO31ub3JtYWxpemVDdG9yQXJncyhlLHQpe2NvbnN0IHI9ey4uLmV9O3JldHVybiB0JiYoci5jb250YWluZXI9dCkscn1wb3N0SW5pdGlhbGl6ZSgpe31iZWZvcmVGaXJzdFJlbmRlcigpe3JldHVybiB0aGlzLl9sb2FkTG9jYWxlKCkuY2F0Y2goaiRmKX1hc3luYyBsb2FkTG9jYWxlKCl7fWRlc3Ryb3koKXt0aGlzLmRlc3Ryb3llZHx8KHRoaXMuX3RyYWNraW5nVGFyZ2V0LmRlc3Ryb3koKSx0aGlzLl90cmFja2luZ1RhcmdldD1udWxsLHRoaXMudmlld01vZGVsJiYodGhpcy52aWV3TW9kZWwuZGVzdHJveSgpLHRoaXMudmlld01vZGVsPW51bGwpLHRoaXMuX2RldGFjaCh0aGlzLmNvbnRhaW5lciksdGhpcy5fc2V0KFwiY29udGFpbmVyXCIsbnVsbCksdGhpcy5faW50ZXJuYWxIYW5kbGVzLmRlc3Ryb3koKSx0aGlzLl9lbWl0dGVyLmNsZWFyKCksdGhpcy5yZW5kZXI9KCk9Pm51bGwsdGhpcy5fcHJvamVjdG9yPW51bGwpO31zZXQgY29udGFpbmVyKGUpe3RoaXMuX2dldChcImNvbnRhaW5lclwiKXx8dGhpcy5fc2V0KFwiY29udGFpbmVyXCIsZSk7fWNhc3RDb250YWluZXIoZSl7cmV0dXJuIGUkMShlKX1nZXQgaWQoKXtyZXR1cm4gdGhpcy5fZ2V0KFwiaWRcIil8fHRoaXMuZ2V0KFwiY29udGFpbmVyLmlkXCIpfHxEYXRlLm5vdygpLnRvU3RyaW5nKDE2KStcIi13aWRnZXQtXCIrSCsrfXNldCBpZChlKXtlJiZ0aGlzLl9zZXQoXCJpZFwiLGUpO31nZXQgcmVuZGVyYWJsZSgpe3JldHVybiB0aGlzLl9yZXNvdXJjZXNGZXRjaH1yZW5kZXIoKXt0aHJvdyBuZXcgRXJyb3IoXCJub3QgaW1wbGVtZW50ZWRcIil9c2NoZWR1bGVSZW5kZXIoKXt0aGlzLmRlc3Ryb3llZHx8dGhpcy5fcHJvamVjdG9yLnNjaGVkdWxlUmVuZGVyKCk7fWNsYXNzZXMoLi4uZSl7cmV0dXJuIGwkNC5hcHBseSh0aGlzLGUpfW93bihlKXthcmd1bWVudHMubGVuZ3RoPjEmJihlPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpLHRoaXMuX2ludGVybmFsSGFuZGxlcy5hZGQoZSk7fXJlbmRlck5vdygpe3RoaXMuX3Byb2plY3Rvci5yZW5kZXJOb3coKTt9X3Bvc3RJbml0aWFsaXplKCl7dmFyIGU7dGhpcy5kZXN0cm95ZWR8fCh0aGlzLnNjaGVkdWxlUmVuZGVyKCksbnVsbCE9KGU9dGhpcy5fZGVsZWdhdGVkRXZlbnROYW1lcykmJmUubGVuZ3RoJiZ0aGlzLl9pbnRlcm5hbEhhbmRsZXMuYWRkKGQkNSh0aGlzLFwidmlld01vZGVsXCIsKChlLHQpPT57dCYmdGhpcy5faW50ZXJuYWxIYW5kbGVzLnJlbW92ZShcImRlbGVnYXRlZC1ldmVudHNcIiksZSYmdGhpcy5faW50ZXJuYWxIYW5kbGVzLmFkZCh0aGlzLl9kZWxlZ2F0ZWRFdmVudE5hbWVzLm1hcCgodD0+ZS5vbih0LChlPT57dGhpcy5lbWl0KHQsZSk7fSkpKSksXCJkZWxlZ2F0ZWQtZXZlbnRzXCIpO30pKSksdGhpcy5wb3N0SW5pdGlhbGl6ZSgpLHRoaXMuX2ludGVybmFsSGFuZGxlcy5hZGQoZiRCKChhc3luYygpPT57YXdhaXQgdGhpcy5fbG9hZExvY2FsZSgpLmNhdGNoKGokZiksdGhpcy5zY2hlZHVsZVJlbmRlcigpO30pKSksdGhpcy5faW50ZXJuYWxIYW5kbGVzLmFkZChqJDEodGhpcyxcImNvbnRhaW5lclwiLChhc3luYyBlPT57dGhpcy5kZXN0cm95ZWR8fHRoaXMuX2F0dGFjaChlKTt9KSkpKTt9X2F0dGFjaChlKXtlJiYodGhpcy5fcHJvamVjdG9yLm1lcmdlKGUsdGhpcy5yZW5kZXIpLHRoaXMuX2F0dGFjaGVkPSEwKTt9X2RldGFjaChlKXtlJiZ0aGlzLl9hdHRhY2hlZCYmKHRoaXMuX3Byb2plY3Rvci5kZXRhY2godGhpcy5yZW5kZXIpLGUucGFyZW50Tm9kZSYmZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGUpLHRoaXMuX2F0dGFjaGVkPSExKTt9fTtlJHUoW3kkcih7dmFsdWU6bnVsbH0pXSxULnByb3RvdHlwZSxcImNvbnRhaW5lclwiLG51bGwpLGUkdShbYyRfKFwiY29udGFpbmVyXCIpXSxULnByb3RvdHlwZSxcImNhc3RDb250YWluZXJcIixudWxsKSxlJHUoW3kkcih7YWxpYXNPZjpcImNvbnRhaW5lclwifSldLFQucHJvdG90eXBlLFwiZG9tTm9kZVwiLHZvaWQgMCksZSR1KFt5JHIoKV0sVC5wcm90b3R5cGUsXCJpY29uQ2xhc3NcIix2b2lkIDApLGUkdShbeSRyKCldLFQucHJvdG90eXBlLFwiaWRcIixudWxsKSxlJHUoW3kkcigpXSxULnByb3RvdHlwZSxcImxhYmVsXCIsdm9pZCAwKSxlJHUoW3kkcigpXSxULnByb3RvdHlwZSxcInJlbmRlcmFibGVcIixudWxsKSxlJHUoW3kkcigpXSxULnByb3RvdHlwZSxcInZpZXdNb2RlbFwiLHZvaWQgMCksZSR1KFt5JHIoKV0sVC5wcm90b3R5cGUsXCJ2aXNpYmxlXCIsdm9pZCAwKSxUPWUkdShbaSRYKFwiZXNyaS53aWRnZXRzLldpZGdldFwiKV0sVCk7dmFyIEw9VDtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmNvbnN0IGwkMT17YmFzZTpcImVzcmktaWRlbnRpdHktZm9ybVwiLGdyb3VwOlwiZXNyaS1pZGVudGl0eS1mb3JtX19ncm91cFwiLGxhYmVsOlwiZXNyaS1pZGVudGl0eS1mb3JtX19sYWJlbFwiLGZvb3RlcjpcImVzcmktaWRlbnRpdHktZm9ybV9fZm9vdGVyXCIsZXNyaUlucHV0OlwiZXNyaS1pbnB1dFwiLGVzcmlCdXR0b246XCJlc3JpLWJ1dHRvblwiLGVzcmlCdXR0b25TZWNvbmRhcnk6XCJlc3JpLWJ1dHRvbi0tc2Vjb25kYXJ5XCJ9LHAkMj1cIkFyY0dJUyBPbmxpbmVcIjtsZXQgYSQxPWNsYXNzIGV4dGVuZHMgTHtjb25zdHJ1Y3RvcihzLGUpe3N1cGVyKHMsZSksdGhpcy5fdXNlcm5hbWVJbnB1dE5vZGU9bnVsbCx0aGlzLl9wYXNzd29yZElucHV0Tm9kZT1udWxsLHRoaXMubWVzc2FnZXM9bnVsbCx0aGlzLnNpZ25pbmdJbj0hMSx0aGlzLnNlcnZlcj1udWxsLHRoaXMucmVzb3VyY2U9bnVsbCx0aGlzLmVycm9yPW51bGwsdGhpcy5vQXV0aFByb21wdD0hMTt9cmVuZGVyKCl7Y29uc3R7ZXJyb3I6cyxzZXJ2ZXI6ZSxyZXNvdXJjZTp0LHNpZ25pbmdJbjppLG9BdXRoUHJvbXB0OnUsbWVzc2FnZXM6YX09dGhpcyxkPW8kMyhcImRpdlwiLHtjbGFzczpsJDEuZ3JvdXB9LHMkNyh1P2Eub0F1dGhJbmZvOmEuaW5mbyx7c2VydmVyOi9cXC5hcmNnaXNcXC5jb20vaS50ZXN0KGUpP3AkMjplLHJlc291cmNlOmAoJHt0fHxhLmxibEl0ZW19KWB9KSksYz11P251bGw6byQzKFwiZGl2XCIse2NsYXNzOmwkMS5ncm91cH0sbyQzKFwibGFiZWxcIix7Y2xhc3M6bCQxLmxhYmVsfSxhLmxibFVzZXIsbyQzKFwiaW5wdXRcIix7dmFsdWU6XCJcIixyZXF1aXJlZDohMCxhdXRvY29tcGxldGU6XCJvZmZcIixzcGVsbGNoZWNrOiExLHR5cGU6XCJ0ZXh0XCIsYmluZDp0aGlzLGFmdGVyQ3JlYXRlOnAkNSxcImRhdGEtbm9kZS1yZWZcIjpcIl91c2VybmFtZUlucHV0Tm9kZVwiLGNsYXNzOmwkMS5lc3JpSW5wdXR9KSkpLG09dT9udWxsOm8kMyhcImRpdlwiLHtjbGFzczpsJDEuZ3JvdXB9LG8kMyhcImxhYmVsXCIse2NsYXNzOmwkMS5sYWJlbH0sYS5sYmxQd2QsbyQzKFwiaW5wdXRcIix7dmFsdWU6XCJcIixyZXF1aXJlZDohMCx0eXBlOlwicGFzc3dvcmRcIixiaW5kOnRoaXMsYWZ0ZXJDcmVhdGU6cCQ1LFwiZGF0YS1ub2RlLXJlZlwiOlwiX3Bhc3N3b3JkSW5wdXROb2RlXCIsY2xhc3M6bCQxLmVzcmlJbnB1dH0pKSksaD1vJDMoXCJkaXZcIix7Y2xhc3M6dGhpcy5jbGFzc2VzKGwkMS5ncm91cCxsJDEuZm9vdGVyKX0sbyQzKFwiaW5wdXRcIix7dHlwZTpcInN1Ym1pdFwiLGRpc2FibGVkOiEhaSx2YWx1ZTppP2EubGJsU2lnbmluZzphLmxibE9rLGNsYXNzOmwkMS5lc3JpQnV0dG9ufSksbyQzKFwiaW5wdXRcIix7dHlwZTpcImJ1dHRvblwiLHZhbHVlOmEubGJsQ2FuY2VsLGJpbmQ6dGhpcyxvbmNsaWNrOnRoaXMuX2NhbmNlbCxjbGFzczp0aGlzLmNsYXNzZXMobCQxLmVzcmlCdXR0b24sbCQxLmVzcmlCdXR0b25TZWNvbmRhcnkpfSkpLGI9cz9vJDMoXCJkaXZcIixudWxsLHMuZGV0YWlscyYmcy5kZXRhaWxzLmh0dHBTdGF0dXM/YS5pbnZhbGlkVXNlcjphLm5vQXV0aFNlcnZpY2UpOm51bGw7cmV0dXJuIG8kMyhcImZvcm1cIix7Y2xhc3M6bCQxLmJhc2UsYmluZDp0aGlzLG9uc3VibWl0OnRoaXMuX3N1Ym1pdH0sZCxiLGMsbSxoKX1fY2FuY2VsKCl7dGhpcy5fc2V0KFwic2lnbmluZ0luXCIsITEpLHRoaXMuX3VzZXJuYW1lSW5wdXROb2RlJiYodGhpcy5fdXNlcm5hbWVJbnB1dE5vZGUudmFsdWU9XCJcIiksdGhpcy5fcGFzc3dvcmRJbnB1dE5vZGUmJih0aGlzLl9wYXNzd29yZElucHV0Tm9kZS52YWx1ZT1cIlwiKSx0aGlzLmVtaXQoXCJjYW5jZWxcIik7fV9zdWJtaXQocyl7cy5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuX3NldChcInNpZ25pbmdJblwiLCEwKTtjb25zdCBlPXRoaXMub0F1dGhQcm9tcHQ/e306e3VzZXJuYW1lOnRoaXMuX3VzZXJuYW1lSW5wdXROb2RlJiZ0aGlzLl91c2VybmFtZUlucHV0Tm9kZS52YWx1ZSxwYXNzd29yZDp0aGlzLl9wYXNzd29yZElucHV0Tm9kZSYmdGhpcy5fcGFzc3dvcmRJbnB1dE5vZGUudmFsdWV9O3RoaXMuZW1pdChcInN1Ym1pdFwiLGUpO319O2UkdShbeSRyKCksZSQzKFwiZXNyaS9pZGVudGl0eS90OW4vaWRlbnRpdHlcIildLGEkMS5wcm90b3R5cGUsXCJtZXNzYWdlc1wiLHZvaWQgMCksZSR1KFt5JHIoKV0sYSQxLnByb3RvdHlwZSxcInNpZ25pbmdJblwiLHZvaWQgMCksZSR1KFt5JHIoKV0sYSQxLnByb3RvdHlwZSxcInNlcnZlclwiLHZvaWQgMCksZSR1KFt5JHIoKV0sYSQxLnByb3RvdHlwZSxcInJlc291cmNlXCIsdm9pZCAwKSxlJHUoW3kkcigpXSxhJDEucHJvdG90eXBlLFwiZXJyb3JcIix2b2lkIDApLGUkdShbeSRyKCldLGEkMS5wcm90b3R5cGUsXCJvQXV0aFByb21wdFwiLHZvaWQgMCksYSQxPWUkdShbaSRYKFwiZXNyaS5pZGVudGl0eS5JZGVudGl0eUZvcm1cIildLGEkMSk7dmFyIGQkMT1hJDE7XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5mdW5jdGlvbiBlKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLnJlbmRlcn1cblxuLyohXG4qIHRhYmJhYmxlIDUuMy4zXG4qIEBsaWNlbnNlIE1JVCwgaHR0cHM6Ly9naXRodWIuY29tL2ZvY3VzLXRyYXAvdGFiYmFibGUvYmxvYi9tYXN0ZXIvTElDRU5TRVxuKi9cbnZhciBjYW5kaWRhdGVTZWxlY3RvcnMgPSBbJ2lucHV0JywgJ3NlbGVjdCcsICd0ZXh0YXJlYScsICdhW2hyZWZdJywgJ2J1dHRvbicsICdbdGFiaW5kZXhdOm5vdChzbG90KScsICdhdWRpb1tjb250cm9sc10nLCAndmlkZW9bY29udHJvbHNdJywgJ1tjb250ZW50ZWRpdGFibGVdOm5vdChbY29udGVudGVkaXRhYmxlPVwiZmFsc2VcIl0pJywgJ2RldGFpbHM+c3VtbWFyeTpmaXJzdC1vZi10eXBlJywgJ2RldGFpbHMnXTtcbnZhciBjYW5kaWRhdGVTZWxlY3RvciA9IC8qICNfX1BVUkVfXyAqL2NhbmRpZGF0ZVNlbGVjdG9ycy5qb2luKCcsJyk7XG52YXIgTm9FbGVtZW50ID0gdHlwZW9mIEVsZW1lbnQgPT09ICd1bmRlZmluZWQnO1xudmFyIG1hdGNoZXMgPSBOb0VsZW1lbnQgPyBmdW5jdGlvbiAoKSB7fSA6IEVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXMgfHwgRWxlbWVudC5wcm90b3R5cGUubXNNYXRjaGVzU2VsZWN0b3IgfHwgRWxlbWVudC5wcm90b3R5cGUud2Via2l0TWF0Y2hlc1NlbGVjdG9yO1xudmFyIGdldFJvb3ROb2RlID0gIU5vRWxlbWVudCAmJiBFbGVtZW50LnByb3RvdHlwZS5nZXRSb290Tm9kZSA/IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gIHJldHVybiBlbGVtZW50LmdldFJvb3ROb2RlKCk7XG59IDogZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgcmV0dXJuIGVsZW1lbnQub3duZXJEb2N1bWVudDtcbn07XG4vKipcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWwgY29udGFpbmVyIHRvIGNoZWNrIGluXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGluY2x1ZGVDb250YWluZXIgYWRkIGNvbnRhaW5lciB0byBjaGVja1xuICogQHBhcmFtIHsobm9kZTogRWxlbWVudCkgPT4gYm9vbGVhbn0gZmlsdGVyIGZpbHRlciBjYW5kaWRhdGVzXG4gKiBAcmV0dXJucyB7RWxlbWVudFtdfVxuICovXG5cbnZhciBnZXRDYW5kaWRhdGVzID0gZnVuY3Rpb24gZ2V0Q2FuZGlkYXRlcyhlbCwgaW5jbHVkZUNvbnRhaW5lciwgZmlsdGVyKSB7XG4gIHZhciBjYW5kaWRhdGVzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGVsLnF1ZXJ5U2VsZWN0b3JBbGwoY2FuZGlkYXRlU2VsZWN0b3IpKTtcblxuICBpZiAoaW5jbHVkZUNvbnRhaW5lciAmJiBtYXRjaGVzLmNhbGwoZWwsIGNhbmRpZGF0ZVNlbGVjdG9yKSkge1xuICAgIGNhbmRpZGF0ZXMudW5zaGlmdChlbCk7XG4gIH1cblxuICBjYW5kaWRhdGVzID0gY2FuZGlkYXRlcy5maWx0ZXIoZmlsdGVyKTtcbiAgcmV0dXJuIGNhbmRpZGF0ZXM7XG59O1xuLyoqXG4gKiBAY2FsbGJhY2sgR2V0U2hhZG93Um9vdFxuICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50IHRvIGNoZWNrIGZvciBzaGFkb3cgcm9vdFxuICogQHJldHVybnMge1NoYWRvd1Jvb3R8Ym9vbGVhbn0gU2hhZG93Um9vdCBpZiBhdmFpbGFibGUgb3IgYm9vbGVhbiBpbmRpY2F0aW5nIGlmIGEgc2hhZG93Um9vdCBpcyBhdHRhY2hlZCBidXQgbm90IGF2YWlsYWJsZS5cbiAqL1xuXG4vKipcbiAqIEBjYWxsYmFjayBTaGFkb3dSb290RmlsdGVyXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHNoYWRvd0hvc3ROb2RlIHRoZSBlbGVtZW50IHdoaWNoIGNvbnRhaW5zIHNoYWRvdyBjb250ZW50XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiBhIHNoYWRvdyByb290IGNvdWxkIHBvdGVudGlhbGx5IGNvbnRhaW4gdmFsaWQgY2FuZGlkYXRlcy5cbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IENhbmRpZGF0ZXNTY29wZVxuICogQHByb3BlcnR5IHtFbGVtZW50fSBzY29wZSBjb250YWlucyBpbm5lciBjYW5kaWRhdGVzXG4gKiBAcHJvcGVydHkge0VsZW1lbnRbXX0gY2FuZGlkYXRlc1xuICovXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gSXRlcmF0aXZlT3B0aW9uc1xuICogQHByb3BlcnR5IHtHZXRTaGFkb3dSb290fGJvb2xlYW59IGdldFNoYWRvd1Jvb3QgdHJ1ZSBpZiBzaGFkb3cgc3VwcG9ydCBpcyBlbmFibGVkOyBmYWxzeSBpZiBub3Q7XG4gKiAgaWYgYSBmdW5jdGlvbiwgaW1wbGllcyBzaGFkb3cgc3VwcG9ydCBpcyBlbmFibGVkIGFuZCBlaXRoZXIgcmV0dXJucyB0aGUgc2hhZG93IHJvb3Qgb2YgYW4gZWxlbWVudFxuICogIG9yIGEgYm9vbGVhbiBzdGF0aW5nIGlmIGl0IGhhcyBhbiB1bmRpc2Nsb3NlZCBzaGFkb3cgcm9vdFxuICogQHByb3BlcnR5IHsobm9kZTogRWxlbWVudCkgPT4gYm9vbGVhbn0gZmlsdGVyIGZpbHRlciBjYW5kaWRhdGVzXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGZsYXR0ZW4gaWYgdHJ1ZSB0aGVuIHJlc3VsdCB3aWxsIGZsYXR0ZW4gYW55IENhbmRpZGF0ZXNTY29wZSBpbnRvIHRoZSByZXR1cm5lZCBsaXN0XG4gKiBAcHJvcGVydHkge1NoYWRvd1Jvb3RGaWx0ZXJ9IHNoYWRvd1Jvb3RGaWx0ZXIgZmlsdGVyIHNoYWRvdyByb290cztcbiAqL1xuXG4vKipcbiAqIEBwYXJhbSB7RWxlbWVudFtdfSBlbGVtZW50cyBsaXN0IG9mIGVsZW1lbnQgY29udGFpbmVycyB0byBtYXRjaCBjYW5kaWRhdGVzIGZyb21cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaW5jbHVkZUNvbnRhaW5lciBhZGQgY29udGFpbmVyIGxpc3QgdG8gY2hlY2tcbiAqIEBwYXJhbSB7SXRlcmF0aXZlT3B0aW9uc30gb3B0aW9uc1xuICogQHJldHVybnMge0FycmF5LjxFbGVtZW50fENhbmRpZGF0ZXNTY29wZT59XG4gKi9cblxuXG52YXIgZ2V0Q2FuZGlkYXRlc0l0ZXJhdGl2ZWx5ID0gZnVuY3Rpb24gZ2V0Q2FuZGlkYXRlc0l0ZXJhdGl2ZWx5KGVsZW1lbnRzLCBpbmNsdWRlQ29udGFpbmVyLCBvcHRpb25zKSB7XG4gIHZhciBjYW5kaWRhdGVzID0gW107XG4gIHZhciBlbGVtZW50c1RvQ2hlY2sgPSBBcnJheS5mcm9tKGVsZW1lbnRzKTtcblxuICB3aGlsZSAoZWxlbWVudHNUb0NoZWNrLmxlbmd0aCkge1xuICAgIHZhciBlbGVtZW50ID0gZWxlbWVudHNUb0NoZWNrLnNoaWZ0KCk7XG5cbiAgICBpZiAoZWxlbWVudC50YWdOYW1lID09PSAnU0xPVCcpIHtcbiAgICAgIC8vIGFkZCBzaGFkb3cgZG9tIHNsb3Qgc2NvcGUgKHNsb3QgaXRzZWxmIGNhbm5vdCBiZSBmb2N1c2FibGUpXG4gICAgICB2YXIgYXNzaWduZWQgPSBlbGVtZW50LmFzc2lnbmVkRWxlbWVudHMoKTtcbiAgICAgIHZhciBjb250ZW50ID0gYXNzaWduZWQubGVuZ3RoID8gYXNzaWduZWQgOiBlbGVtZW50LmNoaWxkcmVuO1xuICAgICAgdmFyIG5lc3RlZENhbmRpZGF0ZXMgPSBnZXRDYW5kaWRhdGVzSXRlcmF0aXZlbHkoY29udGVudCwgdHJ1ZSwgb3B0aW9ucyk7XG5cbiAgICAgIGlmIChvcHRpb25zLmZsYXR0ZW4pIHtcbiAgICAgICAgY2FuZGlkYXRlcy5wdXNoLmFwcGx5KGNhbmRpZGF0ZXMsIG5lc3RlZENhbmRpZGF0ZXMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FuZGlkYXRlcy5wdXNoKHtcbiAgICAgICAgICBzY29wZTogZWxlbWVudCxcbiAgICAgICAgICBjYW5kaWRhdGVzOiBuZXN0ZWRDYW5kaWRhdGVzXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBjaGVjayBjYW5kaWRhdGUgZWxlbWVudFxuICAgICAgdmFyIHZhbGlkQ2FuZGlkYXRlID0gbWF0Y2hlcy5jYWxsKGVsZW1lbnQsIGNhbmRpZGF0ZVNlbGVjdG9yKTtcblxuICAgICAgaWYgKHZhbGlkQ2FuZGlkYXRlICYmIG9wdGlvbnMuZmlsdGVyKGVsZW1lbnQpICYmIChpbmNsdWRlQ29udGFpbmVyIHx8ICFlbGVtZW50cy5pbmNsdWRlcyhlbGVtZW50KSkpIHtcbiAgICAgICAgY2FuZGlkYXRlcy5wdXNoKGVsZW1lbnQpO1xuICAgICAgfSAvLyBpdGVyYXRlIG92ZXIgc2hhZG93IGNvbnRlbnQgaWYgcG9zc2libGVcblxuXG4gICAgICB2YXIgc2hhZG93Um9vdCA9IGVsZW1lbnQuc2hhZG93Um9vdCB8fCAvLyBjaGVjayBmb3IgYW4gdW5kaXNjbG9zZWQgc2hhZG93XG4gICAgICB0eXBlb2Ygb3B0aW9ucy5nZXRTaGFkb3dSb290ID09PSAnZnVuY3Rpb24nICYmIG9wdGlvbnMuZ2V0U2hhZG93Um9vdChlbGVtZW50KTtcbiAgICAgIHZhciB2YWxpZFNoYWRvd1Jvb3QgPSAhb3B0aW9ucy5zaGFkb3dSb290RmlsdGVyIHx8IG9wdGlvbnMuc2hhZG93Um9vdEZpbHRlcihlbGVtZW50KTtcblxuICAgICAgaWYgKHNoYWRvd1Jvb3QgJiYgdmFsaWRTaGFkb3dSb290KSB7XG4gICAgICAgIC8vIGFkZCBzaGFkb3cgZG9tIHNjb3BlIElJRiBhIHNoYWRvdyByb290IG5vZGUgd2FzIGdpdmVuOyBvdGhlcndpc2UsIGFuIHVuZGlzY2xvc2VkXG4gICAgICAgIC8vICBzaGFkb3cgZXhpc3RzLCBzbyBsb29rIGF0IGxpZ2h0IGRvbSBjaGlsZHJlbiBhcyBmYWxsYmFjayBCVVQgY3JlYXRlIGEgc2NvcGUgZm9yIGFueVxuICAgICAgICAvLyAgY2hpbGQgY2FuZGlkYXRlcyBmb3VuZCBiZWNhdXNlIHRoZXkncmUgbGlrZWx5IHNsb3R0ZWQgZWxlbWVudHMgKGVsZW1lbnRzIHRoYXQgYXJlXG4gICAgICAgIC8vICBjaGlsZHJlbiBvZiB0aGUgd2ViIGNvbXBvbmVudCBlbGVtZW50ICh3aGljaCBoYXMgdGhlIHNoYWRvdyksIGluIHRoZSBsaWdodCBkb20sIGJ1dFxuICAgICAgICAvLyAgc2xvdHRlZCBzb21ld2hlcmUgX2luc2lkZV8gdGhlIHVuZGlzY2xvc2VkIHNoYWRvdykgLS0gdGhlIHNjb3BlIGlzIGNyZWF0ZWQgYmVsb3csXG4gICAgICAgIC8vICBfYWZ0ZXJfIHdlIHJldHVybiBmcm9tIHRoaXMgcmVjdXJzaXZlIGNhbGxcbiAgICAgICAgdmFyIF9uZXN0ZWRDYW5kaWRhdGVzID0gZ2V0Q2FuZGlkYXRlc0l0ZXJhdGl2ZWx5KHNoYWRvd1Jvb3QgPT09IHRydWUgPyBlbGVtZW50LmNoaWxkcmVuIDogc2hhZG93Um9vdC5jaGlsZHJlbiwgdHJ1ZSwgb3B0aW9ucyk7XG5cbiAgICAgICAgaWYgKG9wdGlvbnMuZmxhdHRlbikge1xuICAgICAgICAgIGNhbmRpZGF0ZXMucHVzaC5hcHBseShjYW5kaWRhdGVzLCBfbmVzdGVkQ2FuZGlkYXRlcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2FuZGlkYXRlcy5wdXNoKHtcbiAgICAgICAgICAgIHNjb3BlOiBlbGVtZW50LFxuICAgICAgICAgICAgY2FuZGlkYXRlczogX25lc3RlZENhbmRpZGF0ZXNcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gdGhlcmUncyBub3Qgc2hhZG93IHNvIGp1c3QgZGlnIGludG8gdGhlIGVsZW1lbnQncyAobGlnaHQgZG9tKSBjaGlsZHJlblxuICAgICAgICAvLyAgX193aXRob3V0X18gZ2l2aW5nIHRoZSBlbGVtZW50IHNwZWNpYWwgc2NvcGUgdHJlYXRtZW50XG4gICAgICAgIGVsZW1lbnRzVG9DaGVjay51bnNoaWZ0LmFwcGx5KGVsZW1lbnRzVG9DaGVjaywgZWxlbWVudC5jaGlsZHJlbik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGNhbmRpZGF0ZXM7XG59O1xuXG52YXIgZ2V0VGFiaW5kZXggPSBmdW5jdGlvbiBnZXRUYWJpbmRleChub2RlLCBpc1Njb3BlKSB7XG4gIGlmIChub2RlLnRhYkluZGV4IDwgMCkge1xuICAgIC8vIGluIENocm9tZSwgPGRldGFpbHMvPiwgPGF1ZGlvIGNvbnRyb2xzLz4gYW5kIDx2aWRlbyBjb250cm9scy8+IGVsZW1lbnRzIGdldCBhIGRlZmF1bHRcbiAgICAvLyBgdGFiSW5kZXhgIG9mIC0xIHdoZW4gdGhlICd0YWJpbmRleCcgYXR0cmlidXRlIGlzbid0IHNwZWNpZmllZCBpbiB0aGUgRE9NLFxuICAgIC8vIHlldCB0aGV5IGFyZSBzdGlsbCBwYXJ0IG9mIHRoZSByZWd1bGFyIHRhYiBvcmRlcjsgaW4gRkYsIHRoZXkgZ2V0IGEgZGVmYXVsdFxuICAgIC8vIGB0YWJJbmRleGAgb2YgMDsgc2luY2UgQ2hyb21lIHN0aWxsIHB1dHMgdGhvc2UgZWxlbWVudHMgaW4gdGhlIHJlZ3VsYXIgdGFiXG4gICAgLy8gb3JkZXIsIGNvbnNpZGVyIHRoZWlyIHRhYiBpbmRleCB0byBiZSAwLlxuICAgIC8vIEFsc28gYnJvd3NlcnMgZG8gbm90IHJldHVybiBgdGFiSW5kZXhgIGNvcnJlY3RseSBmb3IgY29udGVudEVkaXRhYmxlIG5vZGVzO1xuICAgIC8vIHNvIGlmIHRoZXkgZG9uJ3QgaGF2ZSBhIHRhYmluZGV4IGF0dHJpYnV0ZSBzcGVjaWZpY2FsbHkgc2V0LCBhc3N1bWUgaXQncyAwLlxuICAgIC8vXG4gICAgLy8gaXNTY29wZSBpcyBwb3NpdGl2ZSBmb3IgY3VzdG9tIGVsZW1lbnQgd2l0aCBzaGFkb3cgcm9vdCBvciBzbG90IHRoYXQgYnkgZGVmYXVsdFxuICAgIC8vIGhhdmUgdGFiSW5kZXggLTEsIGJ1dCBuZWVkIHRvIGJlIHNvcnRlZCBieSBkb2N1bWVudCBvcmRlciBpbiBvcmRlciBmb3IgdGhlaXJcbiAgICAvLyBjb250ZW50IHRvIGJlIGluc2VydGVkIGluIHRoZSBjb3JyZWN0IHBvc2l0aW9uXG4gICAgaWYgKChpc1Njb3BlIHx8IC9eKEFVRElPfFZJREVPfERFVEFJTFMpJC8udGVzdChub2RlLnRhZ05hbWUpIHx8IG5vZGUuaXNDb250ZW50RWRpdGFibGUpICYmIGlzTmFOKHBhcnNlSW50KG5vZGUuZ2V0QXR0cmlidXRlKCd0YWJpbmRleCcpLCAxMCkpKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbm9kZS50YWJJbmRleDtcbn07XG5cbnZhciBzb3J0T3JkZXJlZFRhYmJhYmxlcyA9IGZ1bmN0aW9uIHNvcnRPcmRlcmVkVGFiYmFibGVzKGEsIGIpIHtcbiAgcmV0dXJuIGEudGFiSW5kZXggPT09IGIudGFiSW5kZXggPyBhLmRvY3VtZW50T3JkZXIgLSBiLmRvY3VtZW50T3JkZXIgOiBhLnRhYkluZGV4IC0gYi50YWJJbmRleDtcbn07XG5cbnZhciBpc0lucHV0ID0gZnVuY3Rpb24gaXNJbnB1dChub2RlKSB7XG4gIHJldHVybiBub2RlLnRhZ05hbWUgPT09ICdJTlBVVCc7XG59O1xuXG52YXIgaXNIaWRkZW5JbnB1dCA9IGZ1bmN0aW9uIGlzSGlkZGVuSW5wdXQobm9kZSkge1xuICByZXR1cm4gaXNJbnB1dChub2RlKSAmJiBub2RlLnR5cGUgPT09ICdoaWRkZW4nO1xufTtcblxudmFyIGlzRGV0YWlsc1dpdGhTdW1tYXJ5ID0gZnVuY3Rpb24gaXNEZXRhaWxzV2l0aFN1bW1hcnkobm9kZSkge1xuICB2YXIgciA9IG5vZGUudGFnTmFtZSA9PT0gJ0RFVEFJTFMnICYmIEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShub2RlLmNoaWxkcmVuKS5zb21lKGZ1bmN0aW9uIChjaGlsZCkge1xuICAgIHJldHVybiBjaGlsZC50YWdOYW1lID09PSAnU1VNTUFSWSc7XG4gIH0pO1xuICByZXR1cm4gcjtcbn07XG5cbnZhciBnZXRDaGVja2VkUmFkaW8gPSBmdW5jdGlvbiBnZXRDaGVja2VkUmFkaW8obm9kZXMsIGZvcm0pIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykge1xuICAgIGlmIChub2Rlc1tpXS5jaGVja2VkICYmIG5vZGVzW2ldLmZvcm0gPT09IGZvcm0pIHtcbiAgICAgIHJldHVybiBub2Rlc1tpXTtcbiAgICB9XG4gIH1cbn07XG5cbnZhciBpc1RhYmJhYmxlUmFkaW8gPSBmdW5jdGlvbiBpc1RhYmJhYmxlUmFkaW8obm9kZSkge1xuICBpZiAoIW5vZGUubmFtZSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgdmFyIHJhZGlvU2NvcGUgPSBub2RlLmZvcm0gfHwgZ2V0Um9vdE5vZGUobm9kZSk7XG5cbiAgdmFyIHF1ZXJ5UmFkaW9zID0gZnVuY3Rpb24gcXVlcnlSYWRpb3MobmFtZSkge1xuICAgIHJldHVybiByYWRpb1Njb3BlLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJyYWRpb1wiXVtuYW1lPVwiJyArIG5hbWUgKyAnXCJdJyk7XG4gIH07XG5cbiAgdmFyIHJhZGlvU2V0O1xuXG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygd2luZG93LkNTUyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHdpbmRvdy5DU1MuZXNjYXBlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmFkaW9TZXQgPSBxdWVyeVJhZGlvcyh3aW5kb3cuQ1NTLmVzY2FwZShub2RlLm5hbWUpKTtcbiAgfSBlbHNlIHtcbiAgICB0cnkge1xuICAgICAgcmFkaW9TZXQgPSBxdWVyeVJhZGlvcyhub2RlLm5hbWUpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0xvb2tzIGxpa2UgeW91IGhhdmUgYSByYWRpbyBidXR0b24gd2l0aCBhIG5hbWUgYXR0cmlidXRlIGNvbnRhaW5pbmcgaW52YWxpZCBDU1Mgc2VsZWN0b3IgY2hhcmFjdGVycyBhbmQgbmVlZCB0aGUgQ1NTLmVzY2FwZSBwb2x5ZmlsbDogJXMnLCBlcnIubWVzc2FnZSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgdmFyIGNoZWNrZWQgPSBnZXRDaGVja2VkUmFkaW8ocmFkaW9TZXQsIG5vZGUuZm9ybSk7XG4gIHJldHVybiAhY2hlY2tlZCB8fCBjaGVja2VkID09PSBub2RlO1xufTtcblxudmFyIGlzUmFkaW8gPSBmdW5jdGlvbiBpc1JhZGlvKG5vZGUpIHtcbiAgcmV0dXJuIGlzSW5wdXQobm9kZSkgJiYgbm9kZS50eXBlID09PSAncmFkaW8nO1xufTtcblxudmFyIGlzTm9uVGFiYmFibGVSYWRpbyA9IGZ1bmN0aW9uIGlzTm9uVGFiYmFibGVSYWRpbyhub2RlKSB7XG4gIHJldHVybiBpc1JhZGlvKG5vZGUpICYmICFpc1RhYmJhYmxlUmFkaW8obm9kZSk7XG59O1xuXG52YXIgaXNaZXJvQXJlYSA9IGZ1bmN0aW9uIGlzWmVyb0FyZWEobm9kZSkge1xuICB2YXIgX25vZGUkZ2V0Qm91bmRpbmdDbGllID0gbm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcbiAgICAgIHdpZHRoID0gX25vZGUkZ2V0Qm91bmRpbmdDbGllLndpZHRoLFxuICAgICAgaGVpZ2h0ID0gX25vZGUkZ2V0Qm91bmRpbmdDbGllLmhlaWdodDtcblxuICByZXR1cm4gd2lkdGggPT09IDAgJiYgaGVpZ2h0ID09PSAwO1xufTtcblxudmFyIGlzSGlkZGVuID0gZnVuY3Rpb24gaXNIaWRkZW4obm9kZSwgX3JlZikge1xuICB2YXIgZGlzcGxheUNoZWNrID0gX3JlZi5kaXNwbGF5Q2hlY2ssXG4gICAgICBnZXRTaGFkb3dSb290ID0gX3JlZi5nZXRTaGFkb3dSb290O1xuXG4gIC8vIE5PVEU6IHZpc2liaWxpdHkgd2lsbCBiZSBgdW5kZWZpbmVkYCBpZiBub2RlIGlzIGRldGFjaGVkIGZyb20gdGhlIGRvY3VtZW50XG4gIC8vICAoc2VlIG5vdGVzIGFib3V0IHRoaXMgZnVydGhlciBkb3duKSwgd2hpY2ggbWVhbnMgd2Ugd2lsbCBjb25zaWRlciBpdCB2aXNpYmxlXG4gIC8vICAodGhpcyBpcyBsZWdhY3kgYmVoYXZpb3IgZnJvbSBhIHZlcnkgbG9uZyB3YXkgYmFjaylcbiAgLy8gTk9URTogd2UgY2hlY2sgdGhpcyByZWdhcmRsZXNzIG9mIGBkaXNwbGF5Q2hlY2s9XCJub25lXCJgIGJlY2F1c2UgdGhpcyBpcyBhXG4gIC8vICBfdmlzaWJpbGl0eV8gY2hlY2ssIG5vdCBhIF9kaXNwbGF5XyBjaGVja1xuICBpZiAoZ2V0Q29tcHV0ZWRTdHlsZShub2RlKS52aXNpYmlsaXR5ID09PSAnaGlkZGVuJykge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgdmFyIGlzRGlyZWN0U3VtbWFyeSA9IG1hdGNoZXMuY2FsbChub2RlLCAnZGV0YWlscz5zdW1tYXJ5OmZpcnN0LW9mLXR5cGUnKTtcbiAgdmFyIG5vZGVVbmRlckRldGFpbHMgPSBpc0RpcmVjdFN1bW1hcnkgPyBub2RlLnBhcmVudEVsZW1lbnQgOiBub2RlO1xuXG4gIGlmIChtYXRjaGVzLmNhbGwobm9kZVVuZGVyRGV0YWlscywgJ2RldGFpbHM6bm90KFtvcGVuXSkgKicpKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gLy8gVGhlIHJvb3Qgbm9kZSBpcyB0aGUgc2hhZG93IHJvb3QgaWYgdGhlIG5vZGUgaXMgaW4gYSBzaGFkb3cgRE9NOyBzb21lIGRvY3VtZW50IG90aGVyd2lzZVxuICAvLyAgKGJ1dCBOT1QgX3RoZV8gZG9jdW1lbnQ7IHNlZSBzZWNvbmQgJ0lmJyBjb21tZW50IGJlbG93IGZvciBtb3JlKS5cbiAgLy8gSWYgcm9vdE5vZGUgaXMgc2hhZG93IHJvb3QsIGl0J2xsIGhhdmUgYSBob3N0LCB3aGljaCBpcyB0aGUgZWxlbWVudCB0byB3aGljaCB0aGUgc2hhZG93XG4gIC8vICBpcyBhdHRhY2hlZCwgYW5kIHRoZSBvbmUgd2UgbmVlZCB0byBjaGVjayBpZiBpdCdzIGluIHRoZSBkb2N1bWVudCBvciBub3QgKGJlY2F1c2UgdGhlXG4gIC8vICBzaGFkb3csIGFuZCBhbGwgbm9kZXMgaXQgY29udGFpbnMsIGlzIG5ldmVyIGNvbnNpZGVyZWQgaW4gdGhlIGRvY3VtZW50IHNpbmNlIHNoYWRvd3NcbiAgLy8gIGJlaGF2ZSBsaWtlIHNlbGYtY29udGFpbmVkIERPTXM7IGJ1dCBpZiB0aGUgc2hhZG93J3MgSE9TVCwgd2hpY2ggaXMgcGFydCBvZiB0aGUgZG9jdW1lbnQsXG4gIC8vICBpcyBoaWRkZW4sIG9yIGlzIG5vdCBpbiB0aGUgZG9jdW1lbnQgaXRzZWxmIGJ1dCBpcyBkZXRhY2hlZCwgaXQgd2lsbCBhZmZlY3QgdGhlIHNoYWRvdydzXG4gIC8vICB2aXNpYmlsaXR5LCBpbmNsdWRpbmcgYWxsIHRoZSBub2RlcyBpdCBjb250YWlucykuIFRoZSBob3N0IGNvdWxkIGJlIGFueSBub3JtYWwgbm9kZSxcbiAgLy8gIG9yIGEgY3VzdG9tIGVsZW1lbnQgKGkuZS4gd2ViIGNvbXBvbmVudCkuIEVpdGhlciB3YXksIHRoYXQncyB0aGUgb25lIHRoYXQgaXMgY29uc2lkZXJlZFxuICAvLyAgcGFydCBvZiB0aGUgZG9jdW1lbnQsIG5vdCB0aGUgc2hhZG93IHJvb3QsIG5vciBhbnkgb2YgaXRzIGNoaWxkcmVuIChpLmUuIHRoZSBub2RlIGJlaW5nXG4gIC8vICB0ZXN0ZWQpLlxuICAvLyBJZiByb290Tm9kZSBpcyBub3QgYSBzaGFkb3cgcm9vdCwgaXQgd29uJ3QgaGF2ZSBhIGhvc3QsIGFuZCBzbyByb290Tm9kZSBzaG91bGQgYmUgdGhlXG4gIC8vICBkb2N1bWVudCAocGVyIHRoZSBkb2NzKSBhbmQgd2hpbGUgaXQncyBhIERvY3VtZW50LXR5cGUgb2JqZWN0LCB0aGF0IGRvY3VtZW50IGRvZXMgbm90XG4gIC8vICBhcHBlYXIgdG8gYmUgdGhlIHNhbWUgYXMgdGhlIG5vZGUncyBgb3duZXJEb2N1bWVudGAgZm9yIHNvbWUgcmVhc29uLCBzbyBpdCdzIHNhZmVyXG4gIC8vICB0byBpZ25vcmUgdGhlIHJvb3ROb2RlIGF0IHRoaXMgcG9pbnQsIGFuZCB1c2UgYG5vZGUub3duZXJEb2N1bWVudGAuIE90aGVyd2lzZSxcbiAgLy8gIHVzaW5nIGByb290Tm9kZS5jb250YWlucyhub2RlKWAgd2lsbCBfYWx3YXlzXyBiZSB0cnVlIHdlJ2xsIGdldCBmYWxzZS1wb3NpdGl2ZXMgd2hlblxuICAvLyAgbm9kZSBpcyBhY3R1YWxseSBkZXRhY2hlZC5cblxuXG4gIHZhciBub2RlUm9vdEhvc3QgPSBnZXRSb290Tm9kZShub2RlKS5ob3N0O1xuICB2YXIgbm9kZUlzQXR0YWNoZWQgPSAobm9kZVJvb3RIb3N0ID09PSBudWxsIHx8IG5vZGVSb290SG9zdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogbm9kZVJvb3RIb3N0Lm93bmVyRG9jdW1lbnQuY29udGFpbnMobm9kZVJvb3RIb3N0KSkgfHwgbm9kZS5vd25lckRvY3VtZW50LmNvbnRhaW5zKG5vZGUpO1xuXG4gIGlmICghZGlzcGxheUNoZWNrIHx8IGRpc3BsYXlDaGVjayA9PT0gJ2Z1bGwnKSB7XG4gICAgaWYgKHR5cGVvZiBnZXRTaGFkb3dSb290ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAvLyBmaWd1cmUgb3V0IGlmIHdlIHNob3VsZCBjb25zaWRlciB0aGUgbm9kZSB0byBiZSBpbiBhbiB1bmRpc2Nsb3NlZCBzaGFkb3cgYW5kIHVzZSB0aGVcbiAgICAgIC8vICAnbm9uLXplcm8tYXJlYScgZmFsbGJhY2tcbiAgICAgIHZhciBvcmlnaW5hbE5vZGUgPSBub2RlO1xuXG4gICAgICB3aGlsZSAobm9kZSkge1xuICAgICAgICB2YXIgcGFyZW50RWxlbWVudCA9IG5vZGUucGFyZW50RWxlbWVudDtcbiAgICAgICAgdmFyIHJvb3ROb2RlID0gZ2V0Um9vdE5vZGUobm9kZSk7XG5cbiAgICAgICAgaWYgKHBhcmVudEVsZW1lbnQgJiYgIXBhcmVudEVsZW1lbnQuc2hhZG93Um9vdCAmJiBnZXRTaGFkb3dSb290KHBhcmVudEVsZW1lbnQpID09PSB0cnVlIC8vIGNoZWNrIGlmIHRoZXJlJ3MgYW4gdW5kaXNjbG9zZWQgc2hhZG93XG4gICAgICAgICkge1xuICAgICAgICAgIC8vIG5vZGUgaGFzIGFuIHVuZGlzY2xvc2VkIHNoYWRvdyB3aGljaCBtZWFucyB3ZSBjYW4gb25seSB0cmVhdCBpdCBhcyBhIGJsYWNrIGJveCwgc28gd2VcbiAgICAgICAgICAvLyAgZmFsbCBiYWNrIHRvIGEgbm9uLXplcm8tYXJlYSB0ZXN0XG4gICAgICAgICAgcmV0dXJuIGlzWmVyb0FyZWEobm9kZSk7XG4gICAgICAgIH0gZWxzZSBpZiAobm9kZS5hc3NpZ25lZFNsb3QpIHtcbiAgICAgICAgICAvLyBpdGVyYXRlIHVwIHNsb3RcbiAgICAgICAgICBub2RlID0gbm9kZS5hc3NpZ25lZFNsb3Q7XG4gICAgICAgIH0gZWxzZSBpZiAoIXBhcmVudEVsZW1lbnQgJiYgcm9vdE5vZGUgIT09IG5vZGUub3duZXJEb2N1bWVudCkge1xuICAgICAgICAgIC8vIGNyb3NzIHNoYWRvdyBib3VuZGFyeVxuICAgICAgICAgIG5vZGUgPSByb290Tm9kZS5ob3N0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIGl0ZXJhdGUgdXAgbm9ybWFsIGRvbVxuICAgICAgICAgIG5vZGUgPSBwYXJlbnRFbGVtZW50O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG5vZGUgPSBvcmlnaW5hbE5vZGU7XG4gICAgfSAvLyBlbHNlLCBgZ2V0U2hhZG93Um9vdGAgbWlnaHQgYmUgdHJ1ZSwgYnV0IGFsbCB0aGF0IGRvZXMgaXMgZW5hYmxlIHNoYWRvdyBET00gc3VwcG9ydFxuICAgIC8vICAoaS5lLiBpdCBkb2VzIG5vdCBhbHNvIHByZXN1bWUgdGhhdCBhbGwgbm9kZXMgbWlnaHQgaGF2ZSB1bmRpc2Nsb3NlZCBzaGFkb3dzKTsgb3JcbiAgICAvLyAgaXQgbWlnaHQgYmUgYSBmYWxzeSB2YWx1ZSwgd2hpY2ggbWVhbnMgc2hhZG93IERPTSBzdXBwb3J0IGlzIGRpc2FibGVkXG4gICAgLy8gU2luY2Ugd2UgZGlkbid0IGZpbmQgaXQgc2l0dGluZyBpbiBhbiB1bmRpc2Nsb3NlZCBzaGFkb3cgKG9yIHNoYWRvd3MgYXJlIGRpc2FibGVkKVxuICAgIC8vICBub3cgd2UgY2FuIGp1c3QgdGVzdCB0byBzZWUgaWYgaXQgd291bGQgbm9ybWFsbHkgYmUgdmlzaWJsZSBvciBub3QsIHByb3ZpZGVkIGl0J3NcbiAgICAvLyAgYXR0YWNoZWQgdG8gdGhlIG1haW4gZG9jdW1lbnQuXG4gICAgLy8gTk9URTogV2UgbXVzdCBjb25zaWRlciBjYXNlIHdoZXJlIG5vZGUgaXMgaW5zaWRlIGEgc2hhZG93IERPTSBhbmQgZ2l2ZW4gZGlyZWN0bHkgdG9cbiAgICAvLyAgYGlzVGFiYmFibGUoKWAgb3IgYGlzRm9jdXNhYmxlKClgIC0tIHJlZ2FyZGxlc3Mgb2YgYGdldFNoYWRvd1Jvb3RgIG9wdGlvbiBzZXR0aW5nLlxuXG5cbiAgICBpZiAobm9kZUlzQXR0YWNoZWQpIHtcbiAgICAgIC8vIHRoaXMgd29ya3Mgd2hlcmV2ZXIgdGhlIG5vZGUgaXM6IGlmIHRoZXJlJ3MgYXQgbGVhc3Qgb25lIGNsaWVudCByZWN0LCBpdCdzXG4gICAgICAvLyAgc29tZWhvdyBkaXNwbGF5ZWQ7IGl0IGFsc28gY292ZXJzIHRoZSBDU1MgJ2Rpc3BsYXk6IGNvbnRlbnRzJyBjYXNlIHdoZXJlIHRoZVxuICAgICAgLy8gIG5vZGUgaXRzZWxmIGlzIGhpZGRlbiBpbiBwbGFjZSBvZiBpdHMgY29udGVudHM7IGFuZCB0aGVyZSdzIG5vIG5lZWQgdG8gc2VhcmNoXG4gICAgICAvLyAgdXAgdGhlIGhpZXJhcmNoeSBlaXRoZXJcbiAgICAgIHJldHVybiAhbm9kZS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aDtcbiAgICB9IC8vIEVsc2UsIHRoZSBub2RlIGlzbid0IGF0dGFjaGVkIHRvIHRoZSBkb2N1bWVudCwgd2hpY2ggbWVhbnMgdGhlIGBnZXRDbGllbnRSZWN0cygpYFxuICAgIC8vICBBUEkgd2lsbCBfX2Fsd2F5c19fIHJldHVybiB6ZXJvIHJlY3RzICh0aGlzIGNhbiBoYXBwZW4sIGZvciBleGFtcGxlLCBpZiBSZWFjdFxuICAgIC8vICBpcyB1c2VkIHRvIHJlbmRlciBub2RlcyBvbnRvIGEgZGV0YWNoZWQgdHJlZSwgYXMgY29uZmlybWVkIGluIHRoaXMgdGhyZWFkOlxuICAgIC8vICBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvaXNzdWVzLzkxMTcjaXNzdWVjb21tZW50LTI4NDIyODg3MClcbiAgICAvL1xuICAgIC8vIEl0IGFsc28gbWVhbnMgdGhhdCBldmVuIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKG5vZGUpLmRpc3BsYXkgd2lsbCByZXR1cm4gYHVuZGVmaW5lZGBcbiAgICAvLyAgYmVjYXVzZSBzdHlsZXMgYXJlIG9ubHkgY29tcHV0ZWQgZm9yIG5vZGVzIHRoYXQgYXJlIGluIHRoZSBkb2N1bWVudC5cbiAgICAvL1xuICAgIC8vIE5PVEU6IFRISVMgSEFTIEJFRU4gVEhFIENBU0UgRk9SIFlFQVJTLiBJdCBpcyBub3QgbmV3LCBub3IgaXMgaXQgY2F1c2VkIGJ5IHRhYmJhYmxlXG4gICAgLy8gIHNvbWVob3cuIFRob3VnaCBpdCB3YXMgbmV2ZXIgc3RhdGVkIG9mZmljaWFsbHksIGFueW9uZSB3aG8gaGFzIGV2ZXIgdXNlZCB0YWJiYWJsZVxuICAgIC8vICBBUElzIG9uIG5vZGVzIGluIGRldGFjaGVkIGNvbnRhaW5lcnMgaGFzIGFjdHVhbGx5IGltcGxpY2l0bHkgdXNlZCB0YWJiYWJsZSBpbiB3aGF0XG4gICAgLy8gIHdhcyBsYXRlciAoYXMgb2YgdjUuMi4wIG9uIEFwciA5LCAyMDIxKSBjYWxsZWQgYGRpc3BsYXlDaGVjaz1cIm5vbmVcImAgbW9kZSAtLSBlc3NlbnRpYWxseVxuICAgIC8vICBjb25zaWRlcmluZyBfX2V2ZXJ5dGhpbmdfXyB0byBiZSB2aXNpYmxlIGJlY2F1c2Ugb2YgdGhlIGlubmFiaWxpdHkgdG8gZGV0ZXJtaW5lIHN0eWxlcy5cblxuICB9IGVsc2UgaWYgKGRpc3BsYXlDaGVjayA9PT0gJ25vbi16ZXJvLWFyZWEnKSB7XG4gICAgLy8gTk9URTogRXZlbiB0aG91Z2ggdGhpcyB0ZXN0cyB0aGF0IHRoZSBub2RlJ3MgY2xpZW50IHJlY3QgaXMgbm9uLXplcm8gdG8gZGV0ZXJtaW5lXG4gICAgLy8gIHdoZXRoZXIgaXQncyBkaXNwbGF5ZWQsIGFuZCB0aGF0IGEgZGV0YWNoZWQgbm9kZSB3aWxsIF9fYWx3YXlzX18gaGF2ZSBhIHplcm8tYXJlYVxuICAgIC8vICBjbGllbnQgcmVjdCwgd2UgZG9uJ3Qgc3BlY2lhbC1jYXNlIGZvciB3aGV0aGVyIHRoZSBub2RlIGlzIGF0dGFjaGVkIG9yIG5vdC4gSW5cbiAgICAvLyAgdGhpcyBtb2RlLCB3ZSBkbyB3YW50IHRvIGNvbnNpZGVyIG5vZGVzIHRoYXQgaGF2ZSBhIHplcm8gYXJlYSB0byBiZSBoaWRkZW4gYXQgYWxsXG4gICAgLy8gIHRpbWVzLCBhbmQgdGhhdCBpbmNsdWRlcyBhdHRhY2hlZCBvciBub3QuXG4gICAgcmV0dXJuIGlzWmVyb0FyZWEobm9kZSk7XG4gIH0gLy8gdmlzaWJsZSwgYXMgZmFyIGFzIHdlIGNhbiB0ZWxsLCBvciBwZXIgY3VycmVudCBgZGlzcGxheUNoZWNrYCBtb2RlXG5cblxuICByZXR1cm4gZmFsc2U7XG59OyAvLyBmb3JtIGZpZWxkcyAobmVzdGVkKSBpbnNpZGUgYSBkaXNhYmxlZCBmaWVsZHNldCBhcmUgbm90IGZvY3VzYWJsZS90YWJiYWJsZVxuLy8gIHVubGVzcyB0aGV5IGFyZSBpbiB0aGUgX2ZpcnN0XyA8bGVnZW5kPiBlbGVtZW50IG9mIHRoZSB0b3AtbW9zdCBkaXNhYmxlZFxuLy8gIGZpZWxkc2V0XG5cblxudmFyIGlzRGlzYWJsZWRGcm9tRmllbGRzZXQgPSBmdW5jdGlvbiBpc0Rpc2FibGVkRnJvbUZpZWxkc2V0KG5vZGUpIHtcbiAgaWYgKC9eKElOUFVUfEJVVFRPTnxTRUxFQ1R8VEVYVEFSRUEpJC8udGVzdChub2RlLnRhZ05hbWUpKSB7XG4gICAgdmFyIHBhcmVudE5vZGUgPSBub2RlLnBhcmVudEVsZW1lbnQ7IC8vIGNoZWNrIGlmIGBub2RlYCBpcyBjb250YWluZWQgaW4gYSBkaXNhYmxlZCA8ZmllbGRzZXQ+XG5cbiAgICB3aGlsZSAocGFyZW50Tm9kZSkge1xuICAgICAgaWYgKHBhcmVudE5vZGUudGFnTmFtZSA9PT0gJ0ZJRUxEU0VUJyAmJiBwYXJlbnROb2RlLmRpc2FibGVkKSB7XG4gICAgICAgIC8vIGxvb2sgZm9yIHRoZSBmaXJzdCA8bGVnZW5kPiBhbW9uZyB0aGUgY2hpbGRyZW4gb2YgdGhlIGRpc2FibGVkIDxmaWVsZHNldD5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJlbnROb2RlLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIGNoaWxkID0gcGFyZW50Tm9kZS5jaGlsZHJlbi5pdGVtKGkpOyAvLyB3aGVuIHRoZSBmaXJzdCA8bGVnZW5kPiAoaW4gZG9jdW1lbnQgb3JkZXIpIGlzIGZvdW5kXG5cbiAgICAgICAgICBpZiAoY2hpbGQudGFnTmFtZSA9PT0gJ0xFR0VORCcpIHtcbiAgICAgICAgICAgIC8vIGlmIGl0cyBwYXJlbnQgPGZpZWxkc2V0PiBpcyBub3QgbmVzdGVkIGluIGFub3RoZXIgZGlzYWJsZWQgPGZpZWxkc2V0PixcbiAgICAgICAgICAgIC8vIHJldHVybiB3aGV0aGVyIGBub2RlYCBpcyBhIGRlc2NlbmRhbnQgb2YgaXRzIGZpcnN0IDxsZWdlbmQ+XG4gICAgICAgICAgICByZXR1cm4gbWF0Y2hlcy5jYWxsKHBhcmVudE5vZGUsICdmaWVsZHNldFtkaXNhYmxlZF0gKicpID8gdHJ1ZSA6ICFjaGlsZC5jb250YWlucyhub2RlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gLy8gdGhlIGRpc2FibGVkIDxmaWVsZHNldD4gY29udGFpbmluZyBgbm9kZWAgaGFzIG5vIDxsZWdlbmQ+XG5cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgcGFyZW50Tm9kZSA9IHBhcmVudE5vZGUucGFyZW50RWxlbWVudDtcbiAgICB9XG4gIH0gLy8gZWxzZSwgbm9kZSdzIHRhYmJhYmxlL2ZvY3VzYWJsZSBzdGF0ZSBzaG91bGQgbm90IGJlIGFmZmVjdGVkIGJ5IGEgZmllbGRzZXQnc1xuICAvLyAgZW5hYmxlZC9kaXNhYmxlZCBzdGF0ZVxuXG5cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxudmFyIGlzTm9kZU1hdGNoaW5nU2VsZWN0b3JGb2N1c2FibGUgPSBmdW5jdGlvbiBpc05vZGVNYXRjaGluZ1NlbGVjdG9yRm9jdXNhYmxlKG9wdGlvbnMsIG5vZGUpIHtcbiAgaWYgKG5vZGUuZGlzYWJsZWQgfHwgaXNIaWRkZW5JbnB1dChub2RlKSB8fCBpc0hpZGRlbihub2RlLCBvcHRpb25zKSB8fCAvLyBGb3IgYSBkZXRhaWxzIGVsZW1lbnQgd2l0aCBhIHN1bW1hcnksIHRoZSBzdW1tYXJ5IGVsZW1lbnQgZ2V0cyB0aGUgZm9jdXNcbiAgaXNEZXRhaWxzV2l0aFN1bW1hcnkobm9kZSkgfHwgaXNEaXNhYmxlZEZyb21GaWVsZHNldChub2RlKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufTtcblxudmFyIGlzTm9kZU1hdGNoaW5nU2VsZWN0b3JUYWJiYWJsZSA9IGZ1bmN0aW9uIGlzTm9kZU1hdGNoaW5nU2VsZWN0b3JUYWJiYWJsZShvcHRpb25zLCBub2RlKSB7XG4gIGlmIChpc05vblRhYmJhYmxlUmFkaW8obm9kZSkgfHwgZ2V0VGFiaW5kZXgobm9kZSkgPCAwIHx8ICFpc05vZGVNYXRjaGluZ1NlbGVjdG9yRm9jdXNhYmxlKG9wdGlvbnMsIG5vZGUpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG52YXIgaXNWYWxpZFNoYWRvd1Jvb3RUYWJiYWJsZSA9IGZ1bmN0aW9uIGlzVmFsaWRTaGFkb3dSb290VGFiYmFibGUoc2hhZG93SG9zdE5vZGUpIHtcbiAgdmFyIHRhYkluZGV4ID0gcGFyc2VJbnQoc2hhZG93SG9zdE5vZGUuZ2V0QXR0cmlidXRlKCd0YWJpbmRleCcpLCAxMCk7XG5cbiAgaWYgKGlzTmFOKHRhYkluZGV4KSB8fCB0YWJJbmRleCA+PSAwKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gLy8gSWYgYSBjdXN0b20gZWxlbWVudCBoYXMgYW4gZXhwbGljaXQgbmVnYXRpdmUgdGFiaW5kZXgsXG4gIC8vIGJyb3dzZXJzIHdpbGwgbm90IGFsbG93IHRhYiB0YXJnZXRpbmcgc2FpZCBlbGVtZW50J3MgY2hpbGRyZW4uXG5cblxuICByZXR1cm4gZmFsc2U7XG59O1xuLyoqXG4gKiBAcGFyYW0ge0FycmF5LjxFbGVtZW50fENhbmRpZGF0ZXNTY29wZT59IGNhbmRpZGF0ZXNcbiAqIEByZXR1cm5zIEVsZW1lbnRbXVxuICovXG5cblxudmFyIHNvcnRCeU9yZGVyID0gZnVuY3Rpb24gc29ydEJ5T3JkZXIoY2FuZGlkYXRlcykge1xuICB2YXIgcmVndWxhclRhYmJhYmxlcyA9IFtdO1xuICB2YXIgb3JkZXJlZFRhYmJhYmxlcyA9IFtdO1xuICBjYW5kaWRhdGVzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGkpIHtcbiAgICB2YXIgaXNTY29wZSA9ICEhaXRlbS5zY29wZTtcbiAgICB2YXIgZWxlbWVudCA9IGlzU2NvcGUgPyBpdGVtLnNjb3BlIDogaXRlbTtcbiAgICB2YXIgY2FuZGlkYXRlVGFiaW5kZXggPSBnZXRUYWJpbmRleChlbGVtZW50LCBpc1Njb3BlKTtcbiAgICB2YXIgZWxlbWVudHMgPSBpc1Njb3BlID8gc29ydEJ5T3JkZXIoaXRlbS5jYW5kaWRhdGVzKSA6IGVsZW1lbnQ7XG5cbiAgICBpZiAoY2FuZGlkYXRlVGFiaW5kZXggPT09IDApIHtcbiAgICAgIGlzU2NvcGUgPyByZWd1bGFyVGFiYmFibGVzLnB1c2guYXBwbHkocmVndWxhclRhYmJhYmxlcywgZWxlbWVudHMpIDogcmVndWxhclRhYmJhYmxlcy5wdXNoKGVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvcmRlcmVkVGFiYmFibGVzLnB1c2goe1xuICAgICAgICBkb2N1bWVudE9yZGVyOiBpLFxuICAgICAgICB0YWJJbmRleDogY2FuZGlkYXRlVGFiaW5kZXgsXG4gICAgICAgIGl0ZW06IGl0ZW0sXG4gICAgICAgIGlzU2NvcGU6IGlzU2NvcGUsXG4gICAgICAgIGNvbnRlbnQ6IGVsZW1lbnRzXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gb3JkZXJlZFRhYmJhYmxlcy5zb3J0KHNvcnRPcmRlcmVkVGFiYmFibGVzKS5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgc29ydGFibGUpIHtcbiAgICBzb3J0YWJsZS5pc1Njb3BlID8gYWNjLnB1c2guYXBwbHkoYWNjLCBzb3J0YWJsZS5jb250ZW50KSA6IGFjYy5wdXNoKHNvcnRhYmxlLmNvbnRlbnQpO1xuICAgIHJldHVybiBhY2M7XG4gIH0sIFtdKS5jb25jYXQocmVndWxhclRhYmJhYmxlcyk7XG59O1xuXG52YXIgdGFiYmFibGUgPSBmdW5jdGlvbiB0YWJiYWJsZShlbCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgdmFyIGNhbmRpZGF0ZXM7XG5cbiAgaWYgKG9wdGlvbnMuZ2V0U2hhZG93Um9vdCkge1xuICAgIGNhbmRpZGF0ZXMgPSBnZXRDYW5kaWRhdGVzSXRlcmF0aXZlbHkoW2VsXSwgb3B0aW9ucy5pbmNsdWRlQ29udGFpbmVyLCB7XG4gICAgICBmaWx0ZXI6IGlzTm9kZU1hdGNoaW5nU2VsZWN0b3JUYWJiYWJsZS5iaW5kKG51bGwsIG9wdGlvbnMpLFxuICAgICAgZmxhdHRlbjogZmFsc2UsXG4gICAgICBnZXRTaGFkb3dSb290OiBvcHRpb25zLmdldFNoYWRvd1Jvb3QsXG4gICAgICBzaGFkb3dSb290RmlsdGVyOiBpc1ZhbGlkU2hhZG93Um9vdFRhYmJhYmxlXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgY2FuZGlkYXRlcyA9IGdldENhbmRpZGF0ZXMoZWwsIG9wdGlvbnMuaW5jbHVkZUNvbnRhaW5lciwgaXNOb2RlTWF0Y2hpbmdTZWxlY3RvclRhYmJhYmxlLmJpbmQobnVsbCwgb3B0aW9ucykpO1xuICB9XG5cbiAgcmV0dXJuIHNvcnRCeU9yZGVyKGNhbmRpZGF0ZXMpO1xufTtcblxudmFyIGZvY3VzYWJsZUNhbmRpZGF0ZVNlbGVjdG9yID0gLyogI19fUFVSRV9fICovY2FuZGlkYXRlU2VsZWN0b3JzLmNvbmNhdCgnaWZyYW1lJykuam9pbignLCcpO1xuXG52YXIgaXNGb2N1c2FibGUgPSBmdW5jdGlvbiBpc0ZvY3VzYWJsZShub2RlLCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gIGlmICghbm9kZSkge1xuICAgIHRocm93IG5ldyBFcnJvcignTm8gbm9kZSBwcm92aWRlZCcpO1xuICB9XG5cbiAgaWYgKG1hdGNoZXMuY2FsbChub2RlLCBmb2N1c2FibGVDYW5kaWRhdGVTZWxlY3RvcikgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIGlzTm9kZU1hdGNoaW5nU2VsZWN0b3JGb2N1c2FibGUob3B0aW9ucywgbm9kZSk7XG59O1xuXG4vKiFcbiogZm9jdXMtdHJhcCA2LjMuMFxuKiBAbGljZW5zZSBNSVQsIGh0dHBzOi8vZ2l0aHViLmNvbS9mb2N1cy10cmFwL2ZvY3VzLXRyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRVxuKi9cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkge1xuICBpZiAoa2V5IGluIG9iaikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgb2JqW2tleV0gPSB2YWx1ZTtcbiAgfVxuXG4gIHJldHVybiBvYmo7XG59XG5cbmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkge1xuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7XG5cbiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHtcbiAgICB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTtcbiAgICBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7XG4gICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTtcbiAgICB9KTtcbiAgICBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7XG4gIH1cblxuICByZXR1cm4ga2V5cztcbn1cblxuZnVuY3Rpb24gX29iamVjdFNwcmVhZDIodGFyZ2V0KSB7XG4gIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307XG5cbiAgICBpZiAoaSAlIDIpIHtcbiAgICAgIG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0YXJnZXQ7XG59XG5cbnZhciBhY3RpdmVGb2N1c0RlbGF5O1xuXG52YXIgYWN0aXZlRm9jdXNUcmFwcyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHRyYXBRdWV1ZSA9IFtdO1xuICByZXR1cm4ge1xuICAgIGFjdGl2YXRlVHJhcDogZnVuY3Rpb24gYWN0aXZhdGVUcmFwKHRyYXApIHtcbiAgICAgIGlmICh0cmFwUXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICB2YXIgYWN0aXZlVHJhcCA9IHRyYXBRdWV1ZVt0cmFwUXVldWUubGVuZ3RoIC0gMV07XG5cbiAgICAgICAgaWYgKGFjdGl2ZVRyYXAgIT09IHRyYXApIHtcbiAgICAgICAgICBhY3RpdmVUcmFwLnBhdXNlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIHRyYXBJbmRleCA9IHRyYXBRdWV1ZS5pbmRleE9mKHRyYXApO1xuXG4gICAgICBpZiAodHJhcEluZGV4ID09PSAtMSkge1xuICAgICAgICB0cmFwUXVldWUucHVzaCh0cmFwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIG1vdmUgdGhpcyBleGlzdGluZyB0cmFwIHRvIHRoZSBmcm9udCBvZiB0aGUgcXVldWVcbiAgICAgICAgdHJhcFF1ZXVlLnNwbGljZSh0cmFwSW5kZXgsIDEpO1xuICAgICAgICB0cmFwUXVldWUucHVzaCh0cmFwKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGRlYWN0aXZhdGVUcmFwOiBmdW5jdGlvbiBkZWFjdGl2YXRlVHJhcCh0cmFwKSB7XG4gICAgICB2YXIgdHJhcEluZGV4ID0gdHJhcFF1ZXVlLmluZGV4T2YodHJhcCk7XG5cbiAgICAgIGlmICh0cmFwSW5kZXggIT09IC0xKSB7XG4gICAgICAgIHRyYXBRdWV1ZS5zcGxpY2UodHJhcEluZGV4LCAxKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRyYXBRdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRyYXBRdWV1ZVt0cmFwUXVldWUubGVuZ3RoIC0gMV0udW5wYXVzZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn0oKTtcblxudmFyIGlzU2VsZWN0YWJsZUlucHV0ID0gZnVuY3Rpb24gaXNTZWxlY3RhYmxlSW5wdXQobm9kZSkge1xuICByZXR1cm4gbm9kZS50YWdOYW1lICYmIG5vZGUudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaW5wdXQnICYmIHR5cGVvZiBub2RlLnNlbGVjdCA9PT0gJ2Z1bmN0aW9uJztcbn07XG5cbnZhciBpc0VzY2FwZUV2ZW50ID0gZnVuY3Rpb24gaXNFc2NhcGVFdmVudChlKSB7XG4gIHJldHVybiBlLmtleSA9PT0gJ0VzY2FwZScgfHwgZS5rZXkgPT09ICdFc2MnIHx8IGUua2V5Q29kZSA9PT0gMjc7XG59O1xuXG52YXIgaXNUYWJFdmVudCA9IGZ1bmN0aW9uIGlzVGFiRXZlbnQoZSkge1xuICByZXR1cm4gZS5rZXkgPT09ICdUYWInIHx8IGUua2V5Q29kZSA9PT0gOTtcbn07XG5cbnZhciBkZWxheSA9IGZ1bmN0aW9uIGRlbGF5KGZuKSB7XG4gIHJldHVybiBzZXRUaW1lb3V0KGZuLCAwKTtcbn07IC8vIEFycmF5LmZpbmQvZmluZEluZGV4KCkgYXJlIG5vdCBzdXBwb3J0ZWQgb24gSUU7IHRoaXMgcmVwbGljYXRlcyBlbm91Z2hcbi8vICBvZiBBcnJheS5maW5kSW5kZXgoKSBmb3Igb3VyIG5lZWRzXG5cblxudmFyIGZpbmRJbmRleCA9IGZ1bmN0aW9uIGZpbmRJbmRleChhcnIsIGZuKSB7XG4gIHZhciBpZHggPSAtMTtcbiAgYXJyLmV2ZXJ5KGZ1bmN0aW9uICh2YWx1ZSwgaSkge1xuICAgIGlmIChmbih2YWx1ZSkpIHtcbiAgICAgIGlkeCA9IGk7XG4gICAgICByZXR1cm4gZmFsc2U7IC8vIGJyZWFrXG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7IC8vIG5leHRcbiAgfSk7XG4gIHJldHVybiBpZHg7XG59O1xuLyoqXG4gKiBHZXQgYW4gb3B0aW9uJ3MgdmFsdWUgd2hlbiBpdCBjb3VsZCBiZSBhIHBsYWluIHZhbHVlLCBvciBhIGhhbmRsZXIgdGhhdCBwcm92aWRlc1xuICogIHRoZSB2YWx1ZS5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgT3B0aW9uJ3MgdmFsdWUgdG8gY2hlY2suXG4gKiBAcGFyYW0gey4uLip9IFtwYXJhbXNdIEFueSBwYXJhbWV0ZXJzIHRvIHBhc3MgdG8gdGhlIGhhbmRsZXIsIGlmIGB2YWx1ZWAgaXMgYSBmdW5jdGlvbi5cbiAqIEByZXR1cm5zIHsqfSBUaGUgYHZhbHVlYCwgb3IgdGhlIGhhbmRsZXIncyByZXR1cm5lZCB2YWx1ZS5cbiAqL1xuXG5cbnZhciB2YWx1ZU9ySGFuZGxlciA9IGZ1bmN0aW9uIHZhbHVlT3JIYW5kbGVyKHZhbHVlKSB7XG4gIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBwYXJhbXMgPSBuZXcgQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgIHBhcmFtc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG4gIH1cblxuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nID8gdmFsdWUuYXBwbHkodm9pZCAwLCBwYXJhbXMpIDogdmFsdWU7XG59O1xuXG52YXIgY3JlYXRlRm9jdXNUcmFwID0gZnVuY3Rpb24gY3JlYXRlRm9jdXNUcmFwKGVsZW1lbnRzLCB1c2VyT3B0aW9ucykge1xuICB2YXIgZG9jID0gZG9jdW1lbnQ7XG5cbiAgdmFyIGNvbmZpZyA9IF9vYmplY3RTcHJlYWQyKHtcbiAgICByZXR1cm5Gb2N1c09uRGVhY3RpdmF0ZTogdHJ1ZSxcbiAgICBlc2NhcGVEZWFjdGl2YXRlczogdHJ1ZSxcbiAgICBkZWxheUluaXRpYWxGb2N1czogdHJ1ZVxuICB9LCB1c2VyT3B0aW9ucyk7XG5cbiAgdmFyIHN0YXRlID0ge1xuICAgIC8vIEB0eXBlIHtBcnJheTxIVE1MRWxlbWVudD59XG4gICAgY29udGFpbmVyczogW10sXG4gICAgLy8gbGlzdCBvZiBvYmplY3RzIGlkZW50aWZ5aW5nIHRoZSBmaXJzdCBhbmQgbGFzdCB0YWJiYWJsZSBub2RlcyBpbiBhbGwgY29udGFpbmVycy9ncm91cHMgaW5cbiAgICAvLyAgdGhlIHRyYXBcbiAgICAvLyBOT1RFOiBpdCdzIHBvc3NpYmxlIHRoYXQgYSBncm91cCBoYXMgbm8gdGFiYmFibGUgbm9kZXMgaWYgbm9kZXMgZ2V0IHJlbW92ZWQgd2hpbGUgdGhlIHRyYXBcbiAgICAvLyAgaXMgYWN0aXZlLCBidXQgdGhlIHRyYXAgc2hvdWxkIG5ldmVyIGdldCB0byBhIHN0YXRlIHdoZXJlIHRoZXJlIGlzbid0IGF0IGxlYXN0IG9uZSBncm91cFxuICAgIC8vICB3aXRoIGF0IGxlYXN0IG9uZSB0YWJiYWJsZSBub2RlIGluIGl0ICh0aGF0IHdvdWxkIGxlYWQgdG8gYW4gZXJyb3IgY29uZGl0aW9uIHRoYXQgd291bGRcbiAgICAvLyAgcmVzdWx0IGluIGFuIGVycm9yIGJlaW5nIHRocm93bilcbiAgICAvLyBAdHlwZSB7QXJyYXk8eyBjb250YWluZXI6IEhUTUxFbGVtZW50LCBmaXJzdFRhYmJhYmxlTm9kZTogSFRNTEVsZW1lbnR8bnVsbCwgbGFzdFRhYmJhYmxlTm9kZTogSFRNTEVsZW1lbnR8bnVsbCB9Pn1cbiAgICB0YWJiYWJsZUdyb3VwczogW10sXG4gICAgbm9kZUZvY3VzZWRCZWZvcmVBY3RpdmF0aW9uOiBudWxsLFxuICAgIG1vc3RSZWNlbnRseUZvY3VzZWROb2RlOiBudWxsLFxuICAgIGFjdGl2ZTogZmFsc2UsXG4gICAgcGF1c2VkOiBmYWxzZVxuICB9O1xuICB2YXIgdHJhcDsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBwcmVmZXItY29uc3QgLS0gc29tZSBwcml2YXRlIGZ1bmN0aW9ucyByZWZlcmVuY2UgaXQsIGFuZCBpdHMgbWV0aG9kcyByZWZlcmVuY2UgcHJpdmF0ZSBmdW5jdGlvbnMsIHNvIHdlIG11c3QgZGVjbGFyZSBoZXJlIGFuZCBkZWZpbmUgbGF0ZXJcblxuICB2YXIgY29udGFpbmVyc0NvbnRhaW4gPSBmdW5jdGlvbiBjb250YWluZXJzQ29udGFpbihlbGVtZW50KSB7XG4gICAgcmV0dXJuIHN0YXRlLmNvbnRhaW5lcnMuc29tZShmdW5jdGlvbiAoY29udGFpbmVyKSB7XG4gICAgICByZXR1cm4gY29udGFpbmVyLmNvbnRhaW5zKGVsZW1lbnQpO1xuICAgIH0pO1xuICB9O1xuXG4gIHZhciBnZXROb2RlRm9yT3B0aW9uID0gZnVuY3Rpb24gZ2V0Tm9kZUZvck9wdGlvbihvcHRpb25OYW1lKSB7XG4gICAgdmFyIG9wdGlvblZhbHVlID0gY29uZmlnW29wdGlvbk5hbWVdO1xuXG4gICAgaWYgKCFvcHRpb25WYWx1ZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgdmFyIG5vZGUgPSBvcHRpb25WYWx1ZTtcblxuICAgIGlmICh0eXBlb2Ygb3B0aW9uVmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICBub2RlID0gZG9jLnF1ZXJ5U2VsZWN0b3Iob3B0aW9uVmFsdWUpO1xuXG4gICAgICBpZiAoIW5vZGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYFwiLmNvbmNhdChvcHRpb25OYW1lLCBcImAgcmVmZXJzIHRvIG5vIGtub3duIG5vZGVcIikpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0eXBlb2Ygb3B0aW9uVmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIG5vZGUgPSBvcHRpb25WYWx1ZSgpO1xuXG4gICAgICBpZiAoIW5vZGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYFwiLmNvbmNhdChvcHRpb25OYW1lLCBcImAgZGlkIG5vdCByZXR1cm4gYSBub2RlXCIpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbm9kZTtcbiAgfTtcblxuICB2YXIgZ2V0SW5pdGlhbEZvY3VzTm9kZSA9IGZ1bmN0aW9uIGdldEluaXRpYWxGb2N1c05vZGUoKSB7XG4gICAgdmFyIG5vZGU7XG5cbiAgICBpZiAoZ2V0Tm9kZUZvck9wdGlvbignaW5pdGlhbEZvY3VzJykgIT09IG51bGwpIHtcbiAgICAgIG5vZGUgPSBnZXROb2RlRm9yT3B0aW9uKCdpbml0aWFsRm9jdXMnKTtcbiAgICB9IGVsc2UgaWYgKGNvbnRhaW5lcnNDb250YWluKGRvYy5hY3RpdmVFbGVtZW50KSkge1xuICAgICAgbm9kZSA9IGRvYy5hY3RpdmVFbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgZmlyc3RUYWJiYWJsZUdyb3VwID0gc3RhdGUudGFiYmFibGVHcm91cHNbMF07XG4gICAgICB2YXIgZmlyc3RUYWJiYWJsZU5vZGUgPSBmaXJzdFRhYmJhYmxlR3JvdXAgJiYgZmlyc3RUYWJiYWJsZUdyb3VwLmZpcnN0VGFiYmFibGVOb2RlO1xuICAgICAgbm9kZSA9IGZpcnN0VGFiYmFibGVOb2RlIHx8IGdldE5vZGVGb3JPcHRpb24oJ2ZhbGxiYWNrRm9jdXMnKTtcbiAgICB9XG5cbiAgICBpZiAoIW5vZGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignWW91ciBmb2N1cy10cmFwIG5lZWRzIHRvIGhhdmUgYXQgbGVhc3Qgb25lIGZvY3VzYWJsZSBlbGVtZW50Jyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5vZGU7XG4gIH07XG5cbiAgdmFyIHVwZGF0ZVRhYmJhYmxlTm9kZXMgPSBmdW5jdGlvbiB1cGRhdGVUYWJiYWJsZU5vZGVzKCkge1xuICAgIHN0YXRlLnRhYmJhYmxlR3JvdXBzID0gc3RhdGUuY29udGFpbmVycy5tYXAoZnVuY3Rpb24gKGNvbnRhaW5lcikge1xuICAgICAgdmFyIHRhYmJhYmxlTm9kZXMgPSB0YWJiYWJsZShjb250YWluZXIpO1xuXG4gICAgICBpZiAodGFiYmFibGVOb2Rlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY29udGFpbmVyOiBjb250YWluZXIsXG4gICAgICAgICAgZmlyc3RUYWJiYWJsZU5vZGU6IHRhYmJhYmxlTm9kZXNbMF0sXG4gICAgICAgICAgbGFzdFRhYmJhYmxlTm9kZTogdGFiYmFibGVOb2Rlc1t0YWJiYWJsZU5vZGVzLmxlbmd0aCAtIDFdXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSkuZmlsdGVyKGZ1bmN0aW9uIChncm91cCkge1xuICAgICAgcmV0dXJuICEhZ3JvdXA7XG4gICAgfSk7IC8vIHJlbW92ZSBncm91cHMgd2l0aCBubyB0YWJiYWJsZSBub2Rlc1xuICAgIC8vIHRocm93IGlmIG5vIGdyb3VwcyBoYXZlIHRhYmJhYmxlIG5vZGVzIGFuZCB3ZSBkb24ndCBoYXZlIGEgZmFsbGJhY2sgZm9jdXMgbm9kZSBlaXRoZXJcblxuICAgIGlmIChzdGF0ZS50YWJiYWJsZUdyb3Vwcy5sZW5ndGggPD0gMCAmJiAhZ2V0Tm9kZUZvck9wdGlvbignZmFsbGJhY2tGb2N1cycpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdXIgZm9jdXMtdHJhcCBtdXN0IGhhdmUgYXQgbGVhc3Qgb25lIGNvbnRhaW5lciB3aXRoIGF0IGxlYXN0IG9uZSB0YWJiYWJsZSBub2RlIGluIGl0IGF0IGFsbCB0aW1lcycpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgdHJ5Rm9jdXMgPSBmdW5jdGlvbiB0cnlGb2N1cyhub2RlKSB7XG4gICAgaWYgKG5vZGUgPT09IGRvYy5hY3RpdmVFbGVtZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCFub2RlIHx8ICFub2RlLmZvY3VzKSB7XG4gICAgICB0cnlGb2N1cyhnZXRJbml0aWFsRm9jdXNOb2RlKCkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIG5vZGUuZm9jdXMoe1xuICAgICAgcHJldmVudFNjcm9sbDogISFjb25maWcucHJldmVudFNjcm9sbFxuICAgIH0pO1xuICAgIHN0YXRlLm1vc3RSZWNlbnRseUZvY3VzZWROb2RlID0gbm9kZTtcblxuICAgIGlmIChpc1NlbGVjdGFibGVJbnB1dChub2RlKSkge1xuICAgICAgbm9kZS5zZWxlY3QoKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIGdldFJldHVybkZvY3VzTm9kZSA9IGZ1bmN0aW9uIGdldFJldHVybkZvY3VzTm9kZShwcmV2aW91c0FjdGl2ZUVsZW1lbnQpIHtcbiAgICB2YXIgbm9kZSA9IGdldE5vZGVGb3JPcHRpb24oJ3NldFJldHVybkZvY3VzJyk7XG4gICAgcmV0dXJuIG5vZGUgPyBub2RlIDogcHJldmlvdXNBY3RpdmVFbGVtZW50O1xuICB9OyAvLyBUaGlzIG5lZWRzIHRvIGJlIGRvbmUgb24gbW91c2Vkb3duIGFuZCB0b3VjaHN0YXJ0IGluc3RlYWQgb2YgY2xpY2tcbiAgLy8gc28gdGhhdCBpdCBwcmVjZWRlcyB0aGUgZm9jdXMgZXZlbnQuXG5cblxuICB2YXIgY2hlY2tQb2ludGVyRG93biA9IGZ1bmN0aW9uIGNoZWNrUG9pbnRlckRvd24oZSkge1xuICAgIGlmIChjb250YWluZXJzQ29udGFpbihlLnRhcmdldCkpIHtcbiAgICAgIC8vIGFsbG93IHRoZSBjbGljayBzaW5jZSBpdCBvY3VycmVkIGluc2lkZSB0aGUgdHJhcFxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh2YWx1ZU9ySGFuZGxlcihjb25maWcuY2xpY2tPdXRzaWRlRGVhY3RpdmF0ZXMsIGUpKSB7XG4gICAgICAvLyBpbW1lZGlhdGVseSBkZWFjdGl2YXRlIHRoZSB0cmFwXG4gICAgICB0cmFwLmRlYWN0aXZhdGUoe1xuICAgICAgICAvLyBpZiwgb24gZGVhY3RpdmF0aW9uLCB3ZSBzaG91bGQgcmV0dXJuIGZvY3VzIHRvIHRoZSBub2RlIG9yaWdpbmFsbHktZm9jdXNlZFxuICAgICAgICAvLyAgd2hlbiB0aGUgdHJhcCB3YXMgYWN0aXZhdGVkIChvciB0aGUgY29uZmlndXJlZCBgc2V0UmV0dXJuRm9jdXNgIG5vZGUpLFxuICAgICAgICAvLyAgdGhlbiBhc3N1bWUgaXQncyBhbHNvIE9LIHRvIHJldHVybiBmb2N1cyB0byB0aGUgb3V0c2lkZSBub2RlIHRoYXQgd2FzXG4gICAgICAgIC8vICBqdXN0IGNsaWNrZWQsIGNhdXNpbmcgZGVhY3RpdmF0aW9uLCBhcyBsb25nIGFzIHRoYXQgbm9kZSBpcyBmb2N1c2FibGU7XG4gICAgICAgIC8vICBpZiBpdCBpc24ndCBmb2N1c2FibGUsIHRoZW4gcmV0dXJuIGZvY3VzIHRvIHRoZSBvcmlnaW5hbCBub2RlIGZvY3VzZWRcbiAgICAgICAgLy8gIG9uIGFjdGl2YXRpb24gKG9yIHRoZSBjb25maWd1cmVkIGBzZXRSZXR1cm5Gb2N1c2Agbm9kZSlcbiAgICAgICAgLy8gTk9URTogYnkgc2V0dGluZyBgcmV0dXJuRm9jdXM6IGZhbHNlYCwgZGVhY3RpdmF0ZSgpIHdpbGwgZG8gbm90aGluZyxcbiAgICAgICAgLy8gIHdoaWNoIHdpbGwgcmVzdWx0IGluIHRoZSBvdXRzaWRlIGNsaWNrIHNldHRpbmcgZm9jdXMgdG8gdGhlIG5vZGVcbiAgICAgICAgLy8gIHRoYXQgd2FzIGNsaWNrZWQsIHdoZXRoZXIgaXQncyBmb2N1c2FibGUgb3Igbm90OyBieSBzZXR0aW5nXG4gICAgICAgIC8vICBgcmV0dXJuRm9jdXM6IHRydWVgLCB3ZSdsbCBhdHRlbXB0IHRvIHJlLWZvY3VzIHRoZSBub2RlIG9yaWdpbmFsbHktZm9jdXNlZFxuICAgICAgICAvLyAgb24gYWN0aXZhdGlvbiAob3IgdGhlIGNvbmZpZ3VyZWQgYHNldFJldHVybkZvY3VzYCBub2RlKVxuICAgICAgICByZXR1cm5Gb2N1czogY29uZmlnLnJldHVybkZvY3VzT25EZWFjdGl2YXRlICYmICFpc0ZvY3VzYWJsZShlLnRhcmdldClcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gVGhpcyBpcyBuZWVkZWQgZm9yIG1vYmlsZSBkZXZpY2VzLlxuICAgIC8vIChJZiB3ZSdsbCBvbmx5IGxldCBgY2xpY2tgIGV2ZW50cyB0aHJvdWdoLFxuICAgIC8vIHRoZW4gb24gbW9iaWxlIHRoZXkgd2lsbCBiZSBibG9ja2VkIGFueXdheXMgaWYgYHRvdWNoc3RhcnRgIGlzIGJsb2NrZWQuKVxuXG5cbiAgICBpZiAodmFsdWVPckhhbmRsZXIoY29uZmlnLmFsbG93T3V0c2lkZUNsaWNrLCBlKSkge1xuICAgICAgLy8gYWxsb3cgdGhlIGNsaWNrIG91dHNpZGUgdGhlIHRyYXAgdG8gdGFrZSBwbGFjZVxuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gb3RoZXJ3aXNlLCBwcmV2ZW50IHRoZSBjbGlja1xuXG5cbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIH07IC8vIEluIGNhc2UgZm9jdXMgZXNjYXBlcyB0aGUgdHJhcCBmb3Igc29tZSBzdHJhbmdlIHJlYXNvbiwgcHVsbCBpdCBiYWNrIGluLlxuXG5cbiAgdmFyIGNoZWNrRm9jdXNJbiA9IGZ1bmN0aW9uIGNoZWNrRm9jdXNJbihlKSB7XG4gICAgdmFyIHRhcmdldENvbnRhaW5lZCA9IGNvbnRhaW5lcnNDb250YWluKGUudGFyZ2V0KTsgLy8gSW4gRmlyZWZveCB3aGVuIHlvdSBUYWIgb3V0IG9mIGFuIGlmcmFtZSB0aGUgRG9jdW1lbnQgaXMgYnJpZWZseSBmb2N1c2VkLlxuXG4gICAgaWYgKHRhcmdldENvbnRhaW5lZCB8fCBlLnRhcmdldCBpbnN0YW5jZW9mIERvY3VtZW50KSB7XG4gICAgICBpZiAodGFyZ2V0Q29udGFpbmVkKSB7XG4gICAgICAgIHN0YXRlLm1vc3RSZWNlbnRseUZvY3VzZWROb2RlID0gZS50YXJnZXQ7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGVzY2FwZWQhIHB1bGwgaXQgYmFjayBpbiB0byB3aGVyZSBpdCBqdXN0IGxlZnRcbiAgICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gICAgICB0cnlGb2N1cyhzdGF0ZS5tb3N0UmVjZW50bHlGb2N1c2VkTm9kZSB8fCBnZXRJbml0aWFsRm9jdXNOb2RlKCkpO1xuICAgIH1cbiAgfTsgLy8gSGlqYWNrIFRhYiBldmVudHMgb24gdGhlIGZpcnN0IGFuZCBsYXN0IGZvY3VzYWJsZSBub2RlcyBvZiB0aGUgdHJhcCxcbiAgLy8gaW4gb3JkZXIgdG8gcHJldmVudCBmb2N1cyBmcm9tIGVzY2FwaW5nLiBJZiBpdCBlc2NhcGVzIGZvciBldmVuIGFcbiAgLy8gbW9tZW50IGl0IGNhbiBlbmQgdXAgc2Nyb2xsaW5nIHRoZSBwYWdlIGFuZCBjYXVzaW5nIGNvbmZ1c2lvbiBzbyB3ZVxuICAvLyBraW5kIG9mIG5lZWQgdG8gY2FwdHVyZSB0aGUgYWN0aW9uIGF0IHRoZSBrZXlkb3duIHBoYXNlLlxuXG5cbiAgdmFyIGNoZWNrVGFiID0gZnVuY3Rpb24gY2hlY2tUYWIoZSkge1xuICAgIHVwZGF0ZVRhYmJhYmxlTm9kZXMoKTtcbiAgICB2YXIgZGVzdGluYXRpb25Ob2RlID0gbnVsbDtcblxuICAgIGlmIChzdGF0ZS50YWJiYWJsZUdyb3Vwcy5sZW5ndGggPiAwKSB7XG4gICAgICAvLyBtYWtlIHN1cmUgdGhlIHRhcmdldCBpcyBhY3R1YWxseSBjb250YWluZWQgaW4gYSBncm91cFxuICAgICAgdmFyIGNvbnRhaW5lckluZGV4ID0gZmluZEluZGV4KHN0YXRlLnRhYmJhYmxlR3JvdXBzLCBmdW5jdGlvbiAoX3JlZikge1xuICAgICAgICB2YXIgY29udGFpbmVyID0gX3JlZi5jb250YWluZXI7XG4gICAgICAgIHJldHVybiBjb250YWluZXIuY29udGFpbnMoZS50YXJnZXQpO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChjb250YWluZXJJbmRleCA8IDApIHtcbiAgICAgICAgLy8gdGFyZ2V0IG5vdCBmb3VuZCBpbiBhbnkgZ3JvdXA6IHF1aXRlIHBvc3NpYmxlIGZvY3VzIGhhcyBlc2NhcGVkIHRoZSB0cmFwLFxuICAgICAgICAvLyAgc28gYnJpbmcgaXQgYmFjayBpbiB0by4uLlxuICAgICAgICBpZiAoZS5zaGlmdEtleSkge1xuICAgICAgICAgIC8vIC4uLnRoZSBsYXN0IG5vZGUgaW4gdGhlIGxhc3QgZ3JvdXBcbiAgICAgICAgICBkZXN0aW5hdGlvbk5vZGUgPSBzdGF0ZS50YWJiYWJsZUdyb3Vwc1tzdGF0ZS50YWJiYWJsZUdyb3Vwcy5sZW5ndGggLSAxXS5sYXN0VGFiYmFibGVOb2RlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIC4uLnRoZSBmaXJzdCBub2RlIGluIHRoZSBmaXJzdCBncm91cFxuICAgICAgICAgIGRlc3RpbmF0aW9uTm9kZSA9IHN0YXRlLnRhYmJhYmxlR3JvdXBzWzBdLmZpcnN0VGFiYmFibGVOb2RlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGUuc2hpZnRLZXkpIHtcbiAgICAgICAgLy8gUkVWRVJTRVxuICAgICAgICB2YXIgc3RhcnRPZkdyb3VwSW5kZXggPSBmaW5kSW5kZXgoc3RhdGUudGFiYmFibGVHcm91cHMsIGZ1bmN0aW9uIChfcmVmMikge1xuICAgICAgICAgIHZhciBmaXJzdFRhYmJhYmxlTm9kZSA9IF9yZWYyLmZpcnN0VGFiYmFibGVOb2RlO1xuICAgICAgICAgIHJldHVybiBlLnRhcmdldCA9PT0gZmlyc3RUYWJiYWJsZU5vZGU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChzdGFydE9mR3JvdXBJbmRleCA+PSAwKSB7XG4gICAgICAgICAgdmFyIGRlc3RpbmF0aW9uR3JvdXBJbmRleCA9IHN0YXJ0T2ZHcm91cEluZGV4ID09PSAwID8gc3RhdGUudGFiYmFibGVHcm91cHMubGVuZ3RoIC0gMSA6IHN0YXJ0T2ZHcm91cEluZGV4IC0gMTtcbiAgICAgICAgICB2YXIgZGVzdGluYXRpb25Hcm91cCA9IHN0YXRlLnRhYmJhYmxlR3JvdXBzW2Rlc3RpbmF0aW9uR3JvdXBJbmRleF07XG4gICAgICAgICAgZGVzdGluYXRpb25Ob2RlID0gZGVzdGluYXRpb25Hcm91cC5sYXN0VGFiYmFibGVOb2RlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGT1JXQVJEXG4gICAgICAgIHZhciBsYXN0T2ZHcm91cEluZGV4ID0gZmluZEluZGV4KHN0YXRlLnRhYmJhYmxlR3JvdXBzLCBmdW5jdGlvbiAoX3JlZjMpIHtcbiAgICAgICAgICB2YXIgbGFzdFRhYmJhYmxlTm9kZSA9IF9yZWYzLmxhc3RUYWJiYWJsZU5vZGU7XG4gICAgICAgICAgcmV0dXJuIGUudGFyZ2V0ID09PSBsYXN0VGFiYmFibGVOb2RlO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAobGFzdE9mR3JvdXBJbmRleCA+PSAwKSB7XG4gICAgICAgICAgdmFyIF9kZXN0aW5hdGlvbkdyb3VwSW5kZXggPSBsYXN0T2ZHcm91cEluZGV4ID09PSBzdGF0ZS50YWJiYWJsZUdyb3Vwcy5sZW5ndGggLSAxID8gMCA6IGxhc3RPZkdyb3VwSW5kZXggKyAxO1xuXG4gICAgICAgICAgdmFyIF9kZXN0aW5hdGlvbkdyb3VwID0gc3RhdGUudGFiYmFibGVHcm91cHNbX2Rlc3RpbmF0aW9uR3JvdXBJbmRleF07XG4gICAgICAgICAgZGVzdGluYXRpb25Ob2RlID0gX2Rlc3RpbmF0aW9uR3JvdXAuZmlyc3RUYWJiYWJsZU5vZGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZGVzdGluYXRpb25Ob2RlID0gZ2V0Tm9kZUZvck9wdGlvbignZmFsbGJhY2tGb2N1cycpO1xuICAgIH1cblxuICAgIGlmIChkZXN0aW5hdGlvbk5vZGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRyeUZvY3VzKGRlc3RpbmF0aW9uTm9kZSk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBjaGVja0tleSA9IGZ1bmN0aW9uIGNoZWNrS2V5KGUpIHtcbiAgICBpZiAoY29uZmlnLmVzY2FwZURlYWN0aXZhdGVzICE9PSBmYWxzZSAmJiBpc0VzY2FwZUV2ZW50KGUpKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0cmFwLmRlYWN0aXZhdGUoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoaXNUYWJFdmVudChlKSkge1xuICAgICAgY2hlY2tUYWIoZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9O1xuXG4gIHZhciBjaGVja0NsaWNrID0gZnVuY3Rpb24gY2hlY2tDbGljayhlKSB7XG4gICAgaWYgKHZhbHVlT3JIYW5kbGVyKGNvbmZpZy5jbGlja091dHNpZGVEZWFjdGl2YXRlcywgZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoY29udGFpbmVyc0NvbnRhaW4oZS50YXJnZXQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHZhbHVlT3JIYW5kbGVyKGNvbmZpZy5hbGxvd091dHNpZGVDbGljaywgZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgfTsgLy9cbiAgLy8gRVZFTlQgTElTVEVORVJTXG4gIC8vXG5cblxuICB2YXIgYWRkTGlzdGVuZXJzID0gZnVuY3Rpb24gYWRkTGlzdGVuZXJzKCkge1xuICAgIGlmICghc3RhdGUuYWN0aXZlKSB7XG4gICAgICByZXR1cm47XG4gICAgfSAvLyBUaGVyZSBjYW4gYmUgb25seSBvbmUgbGlzdGVuaW5nIGZvY3VzIHRyYXAgYXQgYSB0aW1lXG5cblxuICAgIGFjdGl2ZUZvY3VzVHJhcHMuYWN0aXZhdGVUcmFwKHRyYXApOyAvLyBEZWxheSBlbnN1cmVzIHRoYXQgdGhlIGZvY3VzZWQgZWxlbWVudCBkb2Vzbid0IGNhcHR1cmUgdGhlIGV2ZW50XG4gICAgLy8gdGhhdCBjYXVzZWQgdGhlIGZvY3VzIHRyYXAgYWN0aXZhdGlvbi5cblxuICAgIGFjdGl2ZUZvY3VzRGVsYXkgPSBjb25maWcuZGVsYXlJbml0aWFsRm9jdXMgPyBkZWxheShmdW5jdGlvbiAoKSB7XG4gICAgICB0cnlGb2N1cyhnZXRJbml0aWFsRm9jdXNOb2RlKCkpO1xuICAgIH0pIDogdHJ5Rm9jdXMoZ2V0SW5pdGlhbEZvY3VzTm9kZSgpKTtcbiAgICBkb2MuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNpbicsIGNoZWNrRm9jdXNJbiwgdHJ1ZSk7XG4gICAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGNoZWNrUG9pbnRlckRvd24sIHtcbiAgICAgIGNhcHR1cmU6IHRydWUsXG4gICAgICBwYXNzaXZlOiBmYWxzZVxuICAgIH0pO1xuICAgIGRvYy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgY2hlY2tQb2ludGVyRG93biwge1xuICAgICAgY2FwdHVyZTogdHJ1ZSxcbiAgICAgIHBhc3NpdmU6IGZhbHNlXG4gICAgfSk7XG4gICAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2hlY2tDbGljaywge1xuICAgICAgY2FwdHVyZTogdHJ1ZSxcbiAgICAgIHBhc3NpdmU6IGZhbHNlXG4gICAgfSk7XG4gICAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBjaGVja0tleSwge1xuICAgICAgY2FwdHVyZTogdHJ1ZSxcbiAgICAgIHBhc3NpdmU6IGZhbHNlXG4gICAgfSk7XG4gICAgcmV0dXJuIHRyYXA7XG4gIH07XG5cbiAgdmFyIHJlbW92ZUxpc3RlbmVycyA9IGZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVycygpIHtcbiAgICBpZiAoIXN0YXRlLmFjdGl2ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1c2luJywgY2hlY2tGb2N1c0luLCB0cnVlKTtcbiAgICBkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgY2hlY2tQb2ludGVyRG93biwgdHJ1ZSk7XG4gICAgZG9jLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBjaGVja1BvaW50ZXJEb3duLCB0cnVlKTtcbiAgICBkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjaGVja0NsaWNrLCB0cnVlKTtcbiAgICBkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGNoZWNrS2V5LCB0cnVlKTtcbiAgICByZXR1cm4gdHJhcDtcbiAgfTsgLy9cbiAgLy8gVFJBUCBERUZJTklUSU9OXG4gIC8vXG5cblxuICB0cmFwID0ge1xuICAgIGFjdGl2YXRlOiBmdW5jdGlvbiBhY3RpdmF0ZShhY3RpdmF0ZU9wdGlvbnMpIHtcbiAgICAgIGlmIChzdGF0ZS5hY3RpdmUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIHVwZGF0ZVRhYmJhYmxlTm9kZXMoKTtcbiAgICAgIHN0YXRlLmFjdGl2ZSA9IHRydWU7XG4gICAgICBzdGF0ZS5wYXVzZWQgPSBmYWxzZTtcbiAgICAgIHN0YXRlLm5vZGVGb2N1c2VkQmVmb3JlQWN0aXZhdGlvbiA9IGRvYy5hY3RpdmVFbGVtZW50O1xuICAgICAgdmFyIG9uQWN0aXZhdGUgPSBhY3RpdmF0ZU9wdGlvbnMgJiYgYWN0aXZhdGVPcHRpb25zLm9uQWN0aXZhdGUgPyBhY3RpdmF0ZU9wdGlvbnMub25BY3RpdmF0ZSA6IGNvbmZpZy5vbkFjdGl2YXRlO1xuXG4gICAgICBpZiAob25BY3RpdmF0ZSkge1xuICAgICAgICBvbkFjdGl2YXRlKCk7XG4gICAgICB9XG5cbiAgICAgIGFkZExpc3RlbmVycygpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICBkZWFjdGl2YXRlOiBmdW5jdGlvbiBkZWFjdGl2YXRlKGRlYWN0aXZhdGVPcHRpb25zKSB7XG4gICAgICBpZiAoIXN0YXRlLmFjdGl2ZSkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cblxuICAgICAgY2xlYXJUaW1lb3V0KGFjdGl2ZUZvY3VzRGVsYXkpO1xuICAgICAgcmVtb3ZlTGlzdGVuZXJzKCk7XG4gICAgICBzdGF0ZS5hY3RpdmUgPSBmYWxzZTtcbiAgICAgIHN0YXRlLnBhdXNlZCA9IGZhbHNlO1xuICAgICAgYWN0aXZlRm9jdXNUcmFwcy5kZWFjdGl2YXRlVHJhcCh0cmFwKTtcbiAgICAgIHZhciBvbkRlYWN0aXZhdGUgPSBkZWFjdGl2YXRlT3B0aW9ucyAmJiBkZWFjdGl2YXRlT3B0aW9ucy5vbkRlYWN0aXZhdGUgIT09IHVuZGVmaW5lZCA/IGRlYWN0aXZhdGVPcHRpb25zLm9uRGVhY3RpdmF0ZSA6IGNvbmZpZy5vbkRlYWN0aXZhdGU7XG5cbiAgICAgIGlmIChvbkRlYWN0aXZhdGUpIHtcbiAgICAgICAgb25EZWFjdGl2YXRlKCk7XG4gICAgICB9XG5cbiAgICAgIHZhciByZXR1cm5Gb2N1cyA9IGRlYWN0aXZhdGVPcHRpb25zICYmIGRlYWN0aXZhdGVPcHRpb25zLnJldHVybkZvY3VzICE9PSB1bmRlZmluZWQgPyBkZWFjdGl2YXRlT3B0aW9ucy5yZXR1cm5Gb2N1cyA6IGNvbmZpZy5yZXR1cm5Gb2N1c09uRGVhY3RpdmF0ZTtcblxuICAgICAgaWYgKHJldHVybkZvY3VzKSB7XG4gICAgICAgIGRlbGF5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0cnlGb2N1cyhnZXRSZXR1cm5Gb2N1c05vZGUoc3RhdGUubm9kZUZvY3VzZWRCZWZvcmVBY3RpdmF0aW9uKSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICAgIHBhdXNlOiBmdW5jdGlvbiBwYXVzZSgpIHtcbiAgICAgIGlmIChzdGF0ZS5wYXVzZWQgfHwgIXN0YXRlLmFjdGl2ZSkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cblxuICAgICAgc3RhdGUucGF1c2VkID0gdHJ1ZTtcbiAgICAgIHJlbW92ZUxpc3RlbmVycygpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICB1bnBhdXNlOiBmdW5jdGlvbiB1bnBhdXNlKCkge1xuICAgICAgaWYgKCFzdGF0ZS5wYXVzZWQgfHwgIXN0YXRlLmFjdGl2ZSkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cblxuICAgICAgc3RhdGUucGF1c2VkID0gZmFsc2U7XG4gICAgICB1cGRhdGVUYWJiYWJsZU5vZGVzKCk7XG4gICAgICBhZGRMaXN0ZW5lcnMoKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgdXBkYXRlQ29udGFpbmVyRWxlbWVudHM6IGZ1bmN0aW9uIHVwZGF0ZUNvbnRhaW5lckVsZW1lbnRzKGNvbnRhaW5lckVsZW1lbnRzKSB7XG4gICAgICB2YXIgZWxlbWVudHNBc0FycmF5ID0gW10uY29uY2F0KGNvbnRhaW5lckVsZW1lbnRzKS5maWx0ZXIoQm9vbGVhbik7XG4gICAgICBzdGF0ZS5jb250YWluZXJzID0gZWxlbWVudHNBc0FycmF5Lm1hcChmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGVsZW1lbnQgPT09ICdzdHJpbmcnID8gZG9jLnF1ZXJ5U2VsZWN0b3IoZWxlbWVudCkgOiBlbGVtZW50O1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChzdGF0ZS5hY3RpdmUpIHtcbiAgICAgICAgdXBkYXRlVGFiYmFibGVOb2RlcygpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gIH07IC8vIGluaXRpYWxpemUgY29udGFpbmVyIGVsZW1lbnRzXG5cbiAgdHJhcC51cGRhdGVDb250YWluZXJFbGVtZW50cyhlbGVtZW50cyk7XG4gIHJldHVybiB0cmFwO1xufTtcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmNvbnN0IGw9e2Jhc2U6XCJlc3JpLWlkZW50aXR5LW1vZGFsXCIsb3BlbjpcImVzcmktaWRlbnRpdHktbW9kYWwtLW9wZW5cIixjbG9zZWQ6XCJlc3JpLWlkZW50aXR5LW1vZGFsLS1jbG9zZWRcIix0aXRsZTpcImVzcmktaWRlbnRpdHktbW9kYWxfX3RpdGxlXCIsZGlhbG9nOlwiZXNyaS1pZGVudGl0eS1tb2RhbF9fZGlhbG9nXCIsY29udGVudDpcImVzcmktaWRlbnRpdHktbW9kYWxfX2NvbnRlbnRcIixjbG9zZUJ1dHRvbjpcImVzcmktaWRlbnRpdHktbW9kYWxfX2Nsb3NlLWJ1dHRvblwiLGljb25DbG9zZTpcImVzcmktaWNvbi1jbG9zZVwifTtsZXQgZD1jbGFzcyBleHRlbmRzIEx7Y29uc3RydWN0b3IodCxlKXtzdXBlcih0LGUpLHRoaXMuY29udGFpbmVyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdGhpcy5jb250ZW50PW51bGwsdGhpcy5vcGVuPSExLHRoaXMuX2Nsb3NlPSgpPT57dGhpcy5vcGVuPSExO30sZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmNvbnRhaW5lciksdGhpcy5vd24odGhpcy53YXRjaChcIm9wZW5cIiwoKCk9PnRoaXMuX3RvZ2dsZUZvY3VzVHJhcCgpKSkpO31kZXN0cm95KCl7dGhpcy5fZGVzdHJveUZvY3VzVHJhcCgpO31yZW5kZXIoKXtjb25zdCB0PXRoaXMuaWQse29wZW46ZSxjb250ZW50Om8sdGl0bGU6cyxtZXNzYWdlczppfT10aGlzLG49ZSYmISFvLGE9e1tsLm9wZW5dOm4sW2wuY2xvc2VkXTohbn0sYz1vJDMoXCJidXR0b25cIix7Y2xhc3M6bC5jbG9zZUJ1dHRvbixcImFyaWEtbGFiZWxcIjppLmNsb3NlLHRpdGxlOmkuY2xvc2UsYmluZDp0aGlzLG9uY2xpY2s6dGhpcy5fY2xvc2V9LG8kMyhcInNwYW5cIix7XCJhcmlhLWhpZGRlblwiOlwidHJ1ZVwiLGNsYXNzOmwuaWNvbkNsb3NlfSkpLGQ9YCR7dH1fdGl0bGVgLHA9YCR7dH1fY29udGVudGAsdT1zP28kMyhcImgxXCIse2lkOmQsY2xhc3M6bC50aXRsZX0scyk6bnVsbCxtPW4/byQzKFwiZGl2XCIse2JpbmQ6dGhpcyxjbGFzczpsLmRpYWxvZyxyb2xlOlwiZGlhbG9nXCIsXCJhcmlhLWxhYmVsbGVkYnlcIjpkLFwiYXJpYS1kZXNjcmliZWRieVwiOnAsYWZ0ZXJDcmVhdGU6dGhpcy5fY3JlYXRlRm9jdXNUcmFwfSxjLHUsdGhpcy5fcmVuZGVyQ29udGVudChwKSk6bnVsbDtyZXR1cm4gbyQzKFwiZGl2XCIse3RhYkluZGV4Oi0xLGNsYXNzOnRoaXMuY2xhc3NlcyhsLmJhc2UsYSl9LG0pfV9kZXN0cm95Rm9jdXNUcmFwKCl7dmFyIHQ7bnVsbD09KHQ9dGhpcy5fZm9jdXNUcmFwKXx8dC5kZWFjdGl2YXRlKHtvbkRlYWN0aXZhdGU6bnVsbH0pLHRoaXMuX2ZvY3VzVHJhcD1udWxsO31fdG9nZ2xlRm9jdXNUcmFwKCl7Y29uc3R7X2ZvY3VzVHJhcDp0LG9wZW46ZX09dGhpczt0JiYoZT90LmFjdGl2YXRlKCk6dC5kZWFjdGl2YXRlKCkpO31fY3JlYXRlRm9jdXNUcmFwKHQpe3RoaXMuX2Rlc3Ryb3lGb2N1c1RyYXAoKTtjb25zdCBvPXJlcXVlc3RBbmltYXRpb25GcmFtZSgoKCk9Pnt0aGlzLl9mb2N1c1RyYXA9Y3JlYXRlRm9jdXNUcmFwKHQse2luaXRpYWxGb2N1czpcImlucHV0XCIsb25EZWFjdGl2YXRlOnRoaXMuX2Nsb3NlfSksdGhpcy5fdG9nZ2xlRm9jdXNUcmFwKCk7fSkpO3RoaXMub3duKG4kUigoKCk9PmNhbmNlbEFuaW1hdGlvbkZyYW1lKG8pKSkpO31fcmVuZGVyQ29udGVudCh0KXtjb25zdCBlJDE9dGhpcy5jb250ZW50O3JldHVybiBcInN0cmluZ1wiPT10eXBlb2YgZSQxP28kMyhcImRpdlwiLHtjbGFzczpsLmNvbnRlbnQsaWQ6dCxpbm5lckhUTUw6ZSQxfSk6ZShlJDEpP28kMyhcImRpdlwiLHtjbGFzczpsLmNvbnRlbnQsaWQ6dH0sZSQxLnJlbmRlcigpKTplJDEgaW5zdGFuY2VvZiBIVE1MRWxlbWVudD9vJDMoXCJkaXZcIix7Y2xhc3M6bC5jb250ZW50LGlkOnQsYmluZDplJDEsYWZ0ZXJDcmVhdGU6dGhpcy5fYXR0YWNoVG9Ob2RlfSk6bnVsbH1fYXR0YWNoVG9Ob2RlKHQpe2NvbnN0IGU9dGhpczt0LmFwcGVuZENoaWxkKGUpO319O2UkdShbeSRyKHtyZWFkT25seTohMH0pXSxkLnByb3RvdHlwZSxcImNvbnRhaW5lclwiLHZvaWQgMCksZSR1KFt5JHIoKV0sZC5wcm90b3R5cGUsXCJjb250ZW50XCIsdm9pZCAwKSxlJHUoW3kkcigpXSxkLnByb3RvdHlwZSxcIm9wZW5cIix2b2lkIDApLGUkdShbeSRyKCksZSQzKFwiZXNyaS90OW4vY29tbW9uXCIpXSxkLnByb3RvdHlwZSxcIm1lc3NhZ2VzXCIsdm9pZCAwKSxlJHUoW3kkcih7YWxpYXNPZjpcIm1lc3NhZ2VzLmF1dGguc2lnbkluXCJ9KV0sZC5wcm90b3R5cGUsXCJ0aXRsZVwiLHZvaWQgMCksZD1lJHUoW2kkWChcImVzcmkuaWRlbnRpdHkuSWRlbnRpdHlNb2RhbFwiKV0sZCk7dmFyIHAkMT1kO1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuY29uc3QgdD1cImVzcmlKU0FQSU9BdXRoXCI7Y2xhc3MgcyQye2NvbnN0cnVjdG9yKHQscyl7dGhpcy5vQXV0aEluZm89bnVsbCx0aGlzLnN0b3JhZ2U9bnVsbCx0aGlzLmFwcElkPW51bGwsdGhpcy5leHBpcmVzPW51bGwsdGhpcy5zc2w9bnVsbCx0aGlzLnRva2VuPW51bGwsdGhpcy51c2VySWQ9bnVsbCx0aGlzLm9BdXRoSW5mbz10LHRoaXMuc3RvcmFnZT1zLHRoaXMuX2luaXQoKTt9aXNWYWxpZCgpe2xldCB0PSExO2lmKHRoaXMub0F1dGhJbmZvJiZ0aGlzLnRva2VuJiZ0aGlzLnVzZXJJZCl7Y29uc3Qgcz1EYXRlLm5vdygpO2lmKHRoaXMuZXhwaXJlcz5zKXsodGhpcy5leHBpcmVzLXMpLzFlMz42MCp0aGlzLm9BdXRoSW5mby5taW5UaW1lVW50aWxFeHBpcmF0aW9uJiYodD0hMCk7fX1yZXR1cm4gdH1zYXZlKCl7aWYoIXRoaXMuc3RvcmFnZSlyZXR1cm47Y29uc3Qgcz10aGlzLl9sb2FkKCksZT10aGlzLm9BdXRoSW5mbztpZihlJiZlLmF1dGhOYW1lc3BhY2UmJmUucG9ydGFsVXJsKXtsZXQgbz1zW2UuYXV0aE5hbWVzcGFjZV07b3x8KG89c1tlLmF1dGhOYW1lc3BhY2VdPXt9KSxvW2UucG9ydGFsVXJsXT17YXBwSWQ6dGhpcy5hcHBJZD1lLmFwcElkLGV4cGlyZXM6dGhpcy5leHBpcmVzLHNzbDp0aGlzLnNzbCx0b2tlbjp0aGlzLnRva2VuLHVzZXJJZDp0aGlzLnVzZXJJZH07dHJ5e3RoaXMuc3RvcmFnZS5zZXRJdGVtKHQsSlNPTi5zdHJpbmdpZnkocykpO31jYXRjaChpKXtjb25zb2xlLmxvZyhpKTt9fX1kZXN0cm95KCl7Y29uc3Qgcz10aGlzLl9sb2FkKCksZT10aGlzLm9BdXRoSW5mbztpZihlJiZlLmFwcElkJiZlLnBvcnRhbFVybCYmdGhpcy50b2tlbiYmdGhpcy5leHBpcmVzPkRhdGUubm93KCkpe2NvbnN0IHQ9ZS5wb3J0YWxVcmwucmVwbGFjZSgvXmh0dHA6L2ksXCJodHRwczpcIikrXCIvc2hhcmluZy9yZXN0L29hdXRoMi9yZXZva2VUb2tlblwiLHM9bmV3IEZvcm1EYXRhO2lmKHMuYXBwZW5kKFwiZlwiLFwianNvblwiKSxzLmFwcGVuZChcImF1dGhfdG9rZW5cIix0aGlzLnRva2VuKSxzLmFwcGVuZChcImNsaWVudF9pZFwiLGUuYXBwSWQpLHMuYXBwZW5kKFwidG9rZW5fdHlwZV9oaW50XCIsXCJhY2Nlc3NfdG9rZW5cIiksXCJmdW5jdGlvblwiPT10eXBlb2YgbmF2aWdhdG9yLnNlbmRCZWFjb24pbmF2aWdhdG9yLnNlbmRCZWFjb24odCxzKTtlbHNlIHtjb25zdCBlPW5ldyBYTUxIdHRwUmVxdWVzdDtlLm9wZW4oXCJQT1NUXCIsdCksZS5zZW5kKHMpO319aWYoZSYmZS5hdXRoTmFtZXNwYWNlJiZlLnBvcnRhbFVybCYmdGhpcy5zdG9yYWdlKXtjb25zdCBvPXNbZS5hdXRoTmFtZXNwYWNlXTtpZihvKXtkZWxldGUgb1tlLnBvcnRhbFVybF07dHJ5e3RoaXMuc3RvcmFnZS5zZXRJdGVtKHQsSlNPTi5zdHJpbmdpZnkocykpO31jYXRjaChpKXtjb25zb2xlLmxvZyhpKTt9fX1lJiYoZS5fb0F1dGhDcmVkPW51bGwsdGhpcy5vQXV0aEluZm89bnVsbCk7fV9pbml0KCl7Y29uc3QgdD10aGlzLl9sb2FkKCkscz10aGlzLm9BdXRoSW5mbztpZihzJiZzLmF1dGhOYW1lc3BhY2UmJnMucG9ydGFsVXJsKXtsZXQgZT10W3MuYXV0aE5hbWVzcGFjZV07ZSYmKGU9ZVtzLnBvcnRhbFVybF0sZSYmKHRoaXMuYXBwSWQ9ZS5hcHBJZCx0aGlzLmV4cGlyZXM9ZS5leHBpcmVzLHRoaXMuc3NsPWUuc3NsLHRoaXMudG9rZW49ZS50b2tlbix0aGlzLnVzZXJJZD1lLnVzZXJJZCkpO319X2xvYWQoKXtsZXQgcz17fTtpZih0aGlzLnN0b3JhZ2Upe2NvbnN0IGk9dGhpcy5zdG9yYWdlLmdldEl0ZW0odCk7aWYoaSl0cnl7cz1KU09OLnBhcnNlKGkpO31jYXRjaChlKXtjb25zb2xlLmxvZyhlKTt9fXJldHVybiBzfX1zJDIucHJvdG90eXBlLmRlY2xhcmVkQ2xhc3M9XCJlc3JpLmlkZW50aXR5Lk9BdXRoQ3JlZGVudGlhbFwiO1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xudmFyIHA7bGV0IHMkMT1wPWNsYXNzIGV4dGVuZHMgYSRCe2NvbnN0cnVjdG9yKG8pe3N1cGVyKG8pLHRoaXMuX29BdXRoQ3JlZD1udWxsLHRoaXMuYXBwSWQ9bnVsbCx0aGlzLmF1dGhOYW1lc3BhY2U9XCIvXCIsdGhpcy5leHBpcmF0aW9uPTIwMTYwLHRoaXMuZm9yY2VMb2dpbj0hMSx0aGlzLmZvcmNlVXNlcklkPSExLHRoaXMubG9jYWxlPW51bGwsdGhpcy5taW5UaW1lVW50aWxFeHBpcmF0aW9uPTMwLHRoaXMucG9wdXA9ITEsdGhpcy5wb3B1cENhbGxiYWNrVXJsPVwib2F1dGgtY2FsbGJhY2suaHRtbFwiLHRoaXMucG9wdXBXaW5kb3dGZWF0dXJlcz1cImhlaWdodD00OTAsd2lkdGg9ODAwLHJlc2l6YWJsZSxzY3JvbGxiYXJzLHN0YXR1c1wiLHRoaXMucG9ydGFsVXJsPVwiaHR0cHM6Ly93d3cuYXJjZ2lzLmNvbVwiLHRoaXMucHJlc2VydmVVcmxIYXNoPSExLHRoaXMudXNlcklkPW51bGw7fWNsb25lKCl7cmV0dXJuIHAuZnJvbUpTT04odGhpcy50b0pTT04oKSl9fTtlJHUoW3kkcih7anNvbjp7d3JpdGU6ITB9fSldLHMkMS5wcm90b3R5cGUsXCJhcHBJZFwiLHZvaWQgMCksZSR1KFt5JHIoe2pzb246e3dyaXRlOiEwfX0pXSxzJDEucHJvdG90eXBlLFwiYXV0aE5hbWVzcGFjZVwiLHZvaWQgMCksZSR1KFt5JHIoe2pzb246e3dyaXRlOiEwfX0pXSxzJDEucHJvdG90eXBlLFwiZXhwaXJhdGlvblwiLHZvaWQgMCksZSR1KFt5JHIoe2pzb246e3dyaXRlOiEwfX0pXSxzJDEucHJvdG90eXBlLFwiZm9yY2VMb2dpblwiLHZvaWQgMCksZSR1KFt5JHIoe2pzb246e3dyaXRlOiEwfX0pXSxzJDEucHJvdG90eXBlLFwiZm9yY2VVc2VySWRcIix2b2lkIDApLGUkdShbeSRyKHtqc29uOnt3cml0ZTohMH19KV0scyQxLnByb3RvdHlwZSxcImxvY2FsZVwiLHZvaWQgMCksZSR1KFt5JHIoe2pzb246e3dyaXRlOiEwfX0pXSxzJDEucHJvdG90eXBlLFwibWluVGltZVVudGlsRXhwaXJhdGlvblwiLHZvaWQgMCksZSR1KFt5JHIoe2pzb246e3dyaXRlOiEwfX0pXSxzJDEucHJvdG90eXBlLFwicG9wdXBcIix2b2lkIDApLGUkdShbeSRyKHtqc29uOnt3cml0ZTohMH19KV0scyQxLnByb3RvdHlwZSxcInBvcHVwQ2FsbGJhY2tVcmxcIix2b2lkIDApLGUkdShbeSRyKHtqc29uOnt3cml0ZTohMH19KV0scyQxLnByb3RvdHlwZSxcInBvcHVwV2luZG93RmVhdHVyZXNcIix2b2lkIDApLGUkdShbeSRyKHtqc29uOnt3cml0ZTohMH19KV0scyQxLnByb3RvdHlwZSxcInBvcnRhbFVybFwiLHZvaWQgMCksZSR1KFt5JHIoe2pzb246e3dyaXRlOiEwfX0pXSxzJDEucHJvdG90eXBlLFwicHJlc2VydmVVcmxIYXNoXCIsdm9pZCAwKSxlJHUoW3kkcih7anNvbjp7d3JpdGU6ITB9fSldLHMkMS5wcm90b3R5cGUsXCJ1c2VySWRcIix2b2lkIDApLHMkMT1wPWUkdShbaSRYKFwiZXNyaS5pZGVudGl0eS5PQXV0aEluZm9cIildLHMkMSk7dmFyIGkkMT1zJDE7XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5sZXQgcz1jbGFzcyBleHRlbmRzIGEkQntjb25zdHJ1Y3RvcihyKXtzdXBlcihyKSx0aGlzLmFkbWluVG9rZW5TZXJ2aWNlVXJsPW51bGwsdGhpcy5jdXJyZW50VmVyc2lvbj1udWxsLHRoaXMuaGFzUG9ydGFsPW51bGwsdGhpcy5oYXNTZXJ2ZXI9bnVsbCx0aGlzLm93bmluZ1N5c3RlbVVybD1udWxsLHRoaXMub3duaW5nVGVuYW50PW51bGwsdGhpcy5zZXJ2ZXI9bnVsbCx0aGlzLnNob3J0TGl2ZWRUb2tlblZhbGlkaXR5PW51bGwsdGhpcy50b2tlblNlcnZpY2VVcmw9bnVsbCx0aGlzLndlYlRpZXJBdXRoPW51bGw7fX07ZSR1KFt5JHIoe2pzb246e3dyaXRlOiEwfX0pXSxzLnByb3RvdHlwZSxcImFkbWluVG9rZW5TZXJ2aWNlVXJsXCIsdm9pZCAwKSxlJHUoW3kkcih7anNvbjp7d3JpdGU6ITB9fSldLHMucHJvdG90eXBlLFwiY3VycmVudFZlcnNpb25cIix2b2lkIDApLGUkdShbeSRyKHtqc29uOnt3cml0ZTohMH19KV0scy5wcm90b3R5cGUsXCJoYXNQb3J0YWxcIix2b2lkIDApLGUkdShbeSRyKHtqc29uOnt3cml0ZTohMH19KV0scy5wcm90b3R5cGUsXCJoYXNTZXJ2ZXJcIix2b2lkIDApLGUkdShbeSRyKHtqc29uOnt3cml0ZTohMH19KV0scy5wcm90b3R5cGUsXCJvd25pbmdTeXN0ZW1VcmxcIix2b2lkIDApLGUkdShbeSRyKHtqc29uOnt3cml0ZTohMH19KV0scy5wcm90b3R5cGUsXCJvd25pbmdUZW5hbnRcIix2b2lkIDApLGUkdShbeSRyKHtqc29uOnt3cml0ZTohMH19KV0scy5wcm90b3R5cGUsXCJzZXJ2ZXJcIix2b2lkIDApLGUkdShbeSRyKHtqc29uOnt3cml0ZTohMH19KV0scy5wcm90b3R5cGUsXCJzaG9ydExpdmVkVG9rZW5WYWxpZGl0eVwiLHZvaWQgMCksZSR1KFt5JHIoe2pzb246e3dyaXRlOiEwfX0pXSxzLnByb3RvdHlwZSxcInRva2VuU2VydmljZVVybFwiLHZvaWQgMCksZSR1KFt5JHIoe2pzb246e3dyaXRlOiEwfX0pXSxzLnByb3RvdHlwZSxcIndlYlRpZXJBdXRoXCIsdm9pZCAwKSxzPWUkdShbaSRYKFwiZXNyaS5pZGVudGl0eS5TZXJ2ZXJJbmZvXCIpXSxzKTt2YXIgaT1zO1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuY29uc3QgUj17fSxiPWU9Pntjb25zdCB0PW5ldyAkJDIoZS5vd25pbmdTeXN0ZW1VcmwpLmhvc3Qscz1uZXcgJCQyKGUuc2VydmVyKS5ob3N0LHI9Ly4rXFwuYXJjZ2lzXFwuY29tJC9pO3JldHVybiByLnRlc3QodCkmJnIudGVzdChzKX0sUD0oZSx0KT0+ISEoYihlKSYmdCYmdC5zb21lKCh0PT50LnRlc3QoZS5zZXJ2ZXIpKSkpO2xldCBDPW51bGwsRD1udWxsO3RyeXtDPXdpbmRvdy5sb2NhbFN0b3JhZ2UsRD13aW5kb3cuc2Vzc2lvblN0b3JhZ2U7fWNhdGNoe31sZXQgaj1jbGFzcyBleHRlbmRzIG4kRntjb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5fcG9ydGFsQ29uZmlnPWUkTC5lc3JpR2Vvd0NvbmZpZyx0aGlzLnNlcnZlckluZm9zPVtdLHRoaXMub0F1dGhJbmZvcz1bXSx0aGlzLmNyZWRlbnRpYWxzPVtdLHRoaXMuX3NvUmVxcz1bXSx0aGlzLl94b1JlcXM9W10sdGhpcy5fcG9ydGFscz1bXSx0aGlzLmRlZmF1bHRPQXV0aEluZm89bnVsbCx0aGlzLmRlZmF1bHRUb2tlblZhbGlkaXR5PTYwLHRoaXMuZGlhbG9nPW51bGwsdGhpcy5mb3JtQ29uc3RydWN0b3I9ZCQxLHRoaXMudG9rZW5WYWxpZGl0eT1udWxsLHRoaXMubm9ybWFsaXplV2ViVGllckF1dGg9ITEsdGhpcy5fYXBwVXJsT2JqPVUkNCh3aW5kb3cubG9jYXRpb24uaHJlZiksdGhpcy5fYnVzeT1udWxsLHRoaXMuX3JlamVjdE9uUGVyc2lzdGVkUGFnZVNob3c9ITEsdGhpcy5fb0F1dGhIYXNoPW51bGwsdGhpcy5fZ3dUb2tlblVybD1cIi9zaGFyaW5nL3Jlc3QvZ2VuZXJhdGVUb2tlblwiLHRoaXMuX2Fnc1Jlc3Q9XCIvcmVzdC9zZXJ2aWNlc1wiLHRoaXMuX2Fnc1BvcnRhbD0vXFwvc2hhcmluZyhcXC98JCkvaSx0aGlzLl9hZ3NBZG1pbj0vKGh0dHBzPzpcXC9cXC9bXlxcL10rXFwvW15cXC9dKylcXC9hZG1pblxcLz8oXFwvLiopPyQvaSx0aGlzLl9hZG1pblN2Y3M9L1xcL3Jlc3RcXC9hZG1pblxcL3NlcnZpY2VzKFxcL3wkKS9pLHRoaXMuX2d3RG9tYWlucz1be3JlZ2V4Oi9eaHR0cHM/OlxcL1xcL3d3d1xcLmFyY2dpc1xcLmNvbS9pLGN1c3RvbUJhc2VVcmw6XCJtYXBzLmFyY2dpcy5jb21cIix0b2tlblNlcnZpY2VVcmw6XCJodHRwczovL3d3dy5hcmNnaXMuY29tL3NoYXJpbmcvcmVzdC9nZW5lcmF0ZVRva2VuXCJ9LHtyZWdleDovXmh0dHBzPzpcXC9cXC8oPzpkZXZ8W2EtelxcZC1dK1xcLm1hcHNkZXYpXFwuYXJjZ2lzXFwuY29tL2ksY3VzdG9tQmFzZVVybDpcIm1hcHNkZXYuYXJjZ2lzLmNvbVwiLHRva2VuU2VydmljZVVybDpcImh0dHBzOi8vZGV2LmFyY2dpcy5jb20vc2hhcmluZy9yZXN0L2dlbmVyYXRlVG9rZW5cIn0se3JlZ2V4Oi9eaHR0cHM/OlxcL1xcLyg/OmRldmV4dHxbYS16XFxkLV0rXFwubWFwc2RldmV4dClcXC5hcmNnaXNcXC5jb20vaSxjdXN0b21CYXNlVXJsOlwibWFwc2RldmV4dC5hcmNnaXMuY29tXCIsdG9rZW5TZXJ2aWNlVXJsOlwiaHR0cHM6Ly9kZXZleHQuYXJjZ2lzLmNvbS9zaGFyaW5nL3Jlc3QvZ2VuZXJhdGVUb2tlblwifSx7cmVnZXg6L15odHRwcz86XFwvXFwvKD86cWFleHR8W2EtelxcZC1dK1xcLm1hcHNxYSlcXC5hcmNnaXNcXC5jb20vaSxjdXN0b21CYXNlVXJsOlwibWFwc3FhLmFyY2dpcy5jb21cIix0b2tlblNlcnZpY2VVcmw6XCJodHRwczovL3FhZXh0LmFyY2dpcy5jb20vc2hhcmluZy9yZXN0L2dlbmVyYXRlVG9rZW5cIn0se3JlZ2V4Oi9eaHR0cHM/OlxcL1xcL1thLXpcXGQtXStcXC5tYXBzXFwuYXJjZ2lzXFwuY29tL2ksY3VzdG9tQmFzZVVybDpcIm1hcHMuYXJjZ2lzLmNvbVwiLHRva2VuU2VydmljZVVybDpcImh0dHBzOi8vd3d3LmFyY2dpcy5jb20vc2hhcmluZy9yZXN0L2dlbmVyYXRlVG9rZW5cIn1dLHRoaXMuX2xlZ2FjeUZlZD1bXSx0aGlzLl9yZWdleFNEaXJVcmw9L2h0dHAuK1xcL3Jlc3RcXC9zZXJ2aWNlc1xcLz8vZ2ksdGhpcy5fcmVnZXhTZXJ2ZXJUeXBlPS8oXFwvKEZlYXR1cmVTZXJ2ZXJ8R1BTZXJ2ZXJ8R2VvRGF0YVNlcnZlcnxHZW9jb2RlU2VydmVyfEdlb2VucmljaG1lbnRTZXJ2ZXJ8R2VvbWV0cnlTZXJ2ZXJ8R2xvYmVTZXJ2ZXJ8SW1hZ2VTZXJ2ZXJ8TWFwU2VydmVyfE1vYmlsZVNlcnZlcnxOQVNlcnZlcnxOZXR3b3JrRGlhZ3JhbVNlcnZlcnxQYXJjZWxGYWJyaWNTZXJ2ZXJ8UmVsYXRpb25hbENhdGFsb2dTZXJ2ZXJ8U2NlbmVTZXJ2ZXJ8U3RyZWFtU2VydmVyfFV0aWxpdHlOZXR3b3JrU2VydmVyfFZhbGlkYXRpb25TZXJ2ZXJ8VmVjdG9yVGlsZVNlcnZlcnxWZXJzaW9uTWFuYWdlbWVudFNlcnZlcikpLiovZ2ksdGhpcy5fZ3dVc2VyPS9odHRwLitcXC91c2Vyc1xcLyhbXlxcL10rKVxcLz8uKi9pLHRoaXMuX2d3SXRlbT0vaHR0cC4rXFwvaXRlbXNcXC8oW15cXC9dKylcXC8/LiovaSx0aGlzLl9nd0dyb3VwPS9odHRwLitcXC9ncm91cHNcXC8oW15cXC9dKylcXC8/LiovaSx0aGlzLl9yZVBvcnRhbFRva2VuU3ZjPS9cXC9zaGFyaW5nKFxcL3Jlc3QpP1xcL2dlbmVyYXRldG9rZW4vaSx0aGlzLl9jcmVhdGVEZWZhdWx0T0F1dGhJbmZvPSEwLHRoaXMuX2hhc1Rlc3RlZElmQXBwSXNPblBvcnRhbD0hMSx0aGlzLl9nZXRPQXV0aEhhc2goKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBhZ2VzaG93XCIsKGU9Pnt0aGlzLl9wYWdlU2hvd0hhbmRsZXIoZSk7fSkpO31yZWdpc3RlclNlcnZlcnMoZSl7Y29uc3QgdD10aGlzLnNlcnZlckluZm9zO3Q/KGU9ZS5maWx0ZXIoKGU9PiF0aGlzLmZpbmRTZXJ2ZXJJbmZvKGUuc2VydmVyKSkpLHRoaXMuc2VydmVySW5mb3M9dC5jb25jYXQoZSkpOnRoaXMuc2VydmVySW5mb3M9ZSxlLmZvckVhY2goKGU9PntlLm93bmluZ1N5c3RlbVVybCYmdGhpcy5fcG9ydGFscy5wdXNoKGUub3duaW5nU3lzdGVtVXJsKSxlLmhhc1BvcnRhbCYmdGhpcy5fcG9ydGFscy5wdXNoKGUuc2VydmVyKTt9KSk7fXJlZ2lzdGVyT0F1dGhJbmZvcyhlKXtjb25zdCB0PXRoaXMub0F1dGhJbmZvcztpZih0KXtmb3IoY29uc3QgcyBvZiBlKXtjb25zdCBlPXRoaXMuZmluZE9BdXRoSW5mbyhzLnBvcnRhbFVybCk7ZSYmdC5zcGxpY2UodC5pbmRleE9mKGUpLDEpO310aGlzLm9BdXRoSW5mb3M9dC5jb25jYXQoZSk7fWVsc2UgdGhpcy5vQXV0aEluZm9zPWU7fXJlZ2lzdGVyVG9rZW4oZSl7ZT17Li4uZX07Y29uc3QgdD10aGlzLl9zYW5pdGl6ZVVybChlLnNlcnZlcikscz10aGlzLl9pc1NlcnZlclJzcmModCk7bGV0IHIsaSQxPXRoaXMuZmluZFNlcnZlckluZm8odCksbz0hMDtpJDF8fChpJDE9bmV3IGksaSQxLnNlcnZlcj10aGlzLl9nZXRTZXJ2ZXJJbnN0YW5jZVJvb3QodCkscz9pJDEuaGFzU2VydmVyPSEwOihpJDEudG9rZW5TZXJ2aWNlVXJsPXRoaXMuX2dldFRva2VuU3ZjVXJsKHQpLGkkMS5oYXNQb3J0YWw9ITApLHRoaXMucmVnaXN0ZXJTZXJ2ZXJzKFtpJDFdKSkscj10aGlzLl9maW5kQ3JlZGVudGlhbCh0KSxyPyhkZWxldGUgZS5zZXJ2ZXIsT2JqZWN0LmFzc2lnbihyLGUpLG89ITEpOihyPW5ldyBxKHt1c2VySWQ6ZS51c2VySWQsc2VydmVyOmkkMS5zZXJ2ZXIsdG9rZW46ZS50b2tlbixleHBpcmVzOmUuZXhwaXJlcyxzc2w6ZS5zc2wsc2NvcGU6cz9cInNlcnZlclwiOlwicG9ydGFsXCJ9KSxyLnJlc291cmNlcz1bdF0sdGhpcy5jcmVkZW50aWFscy5wdXNoKHIpKSxyLmVtaXRUb2tlbkNoYW5nZSghMSksb3x8ci5yZWZyZXNoU2VydmVyVG9rZW5zKCk7fXRvSlNPTigpe3JldHVybiBwJDE4KHtzZXJ2ZXJJbmZvczp0aGlzLnNlcnZlckluZm9zLm1hcCgoZT0+ZS50b0pTT04oKSkpLG9BdXRoSW5mb3M6dGhpcy5vQXV0aEluZm9zLm1hcCgoZT0+ZS50b0pTT04oKSkpLGNyZWRlbnRpYWxzOnRoaXMuY3JlZGVudGlhbHMubWFwKChlPT5lLnRvSlNPTigpKSl9KX1pbml0aWFsaXplKGUpe2lmKCFlKXJldHVybjtcInN0cmluZ1wiPT10eXBlb2YgZSYmKGU9SlNPTi5wYXJzZShlKSk7Y29uc3QgdD1lLnNlcnZlckluZm9zLHM9ZS5vQXV0aEluZm9zLHI9ZS5jcmVkZW50aWFscztpZih0KXtjb25zdCBlPVtdO3QuZm9yRWFjaCgodD0+e3Quc2VydmVyJiZ0LnRva2VuU2VydmljZVVybCYmZS5wdXNoKHQuZGVjbGFyZWRDbGFzcz90Om5ldyBpKHQpKTt9KSksZS5sZW5ndGgmJnRoaXMucmVnaXN0ZXJTZXJ2ZXJzKGUpO31pZihzKXtjb25zdCBlPVtdO3MuZm9yRWFjaCgodD0+e3QuYXBwSWQmJmUucHVzaCh0LmRlY2xhcmVkQ2xhc3M/dDpuZXcgaSQxKHQpKTt9KSksZS5sZW5ndGgmJnRoaXMucmVnaXN0ZXJPQXV0aEluZm9zKGUpO31yJiZyLmZvckVhY2goKGU9PntlLnNlcnZlciYmZS50b2tlbiYmZS5leHBpcmVzJiZlLmV4cGlyZXM+RGF0ZS5ub3coKSYmKChlPWUuZGVjbGFyZWRDbGFzcz9lOm5ldyBxKGUpKS5lbWl0VG9rZW5DaGFuZ2UoKSx0aGlzLmNyZWRlbnRpYWxzLnB1c2goZSkpO30pKTt9ZmluZFNlcnZlckluZm8oZSl7bGV0IHQ7ZT10aGlzLl9zYW5pdGl6ZVVybChlKTtmb3IoY29uc3QgcyBvZiB0aGlzLnNlcnZlckluZm9zKWlmKHRoaXMuX2hhc1NhbWVTZXJ2ZXJJbnN0YW5jZShzLnNlcnZlcixlKSl7dD1zO2JyZWFrfXJldHVybiB0fWZpbmRPQXV0aEluZm8oZSl7bGV0IHQ7ZT10aGlzLl9zYW5pdGl6ZVVybChlKTtmb3IoY29uc3QgcyBvZiB0aGlzLm9BdXRoSW5mb3MpaWYodGhpcy5faGFzU2FtZVNlcnZlckluc3RhbmNlKHMucG9ydGFsVXJsLGUpKXt0PXM7YnJlYWt9cmV0dXJuIHR9ZmluZENyZWRlbnRpYWwoZSx0KXtsZXQgcztlPXRoaXMuX3Nhbml0aXplVXJsKGUpO2NvbnN0IHI9dGhpcy5faXNTZXJ2ZXJSc3JjKGUpP1wic2VydmVyXCI6XCJwb3J0YWxcIjtpZih0KXtmb3IoY29uc3QgaSBvZiB0aGlzLmNyZWRlbnRpYWxzKWlmKHRoaXMuX2hhc1NhbWVTZXJ2ZXJJbnN0YW5jZShpLnNlcnZlcixlKSYmdD09PWkudXNlcklkJiZpLnNjb3BlPT09cil7cz1pO2JyZWFrfX1lbHNlIGZvcihjb25zdCBpIG9mIHRoaXMuY3JlZGVudGlhbHMpaWYodGhpcy5faGFzU2FtZVNlcnZlckluc3RhbmNlKGkuc2VydmVyLGUpJiYtMSE9PXRoaXMuX2dldElkZW50aWNhbFN2Y0lkeChlLGkpJiZpLnNjb3BlPT09cil7cz1pO2JyZWFrfXJldHVybiBzfWdldENyZWRlbnRpYWwoZSx0KXtsZXQgcyxyLGkkMT0hMDt0JiYocz0hIXQudG9rZW4scj10LmVycm9yLGkkMT0hMSE9PXQucHJvbXB0KSx0PXsuLi50fSxlPXRoaXMuX3Nhbml0aXplVXJsKGUpO2NvbnN0IG89aCR1KCksbj1CJDQoKTtpZih0LnNpZ25hbCYmdiQ5KHQuc2lnbmFsLCgoKT0+e28uYWJvcnQoKTt9KSksdiQ5KG8sKCgpPT57bi5yZWplY3QobmV3IHMkeChcImlkZW50aXR5LW1hbmFnZXI6dXNlci1hYm9ydGVkXCIsXCJBQk9SVEVEXCIpKTt9KSksYiRiKG8pKXJldHVybiBuLnByb21pc2U7dC5zaWduYWw9by5zaWduYWw7Y29uc3QgaD10aGlzLl9pc0FkbWluUmVzb3VyY2UoZSksYz1zP3RoaXMuZmluZENyZWRlbnRpYWwoZSk6bnVsbDtsZXQgZDtpZihjJiZyJiZyLmRldGFpbHMmJjQ5OD09PXIuZGV0YWlscy5odHRwU3RhdHVzKWMuZGVzdHJveSgpO2Vsc2UgaWYoYylyZXR1cm4gZD1uZXcgcyR4KFwiaWRlbnRpdHktbWFuYWdlcjpub3QtYXV0aG9yaXplZFwiLFwiWW91IGFyZSBjdXJyZW50bHkgc2lnbmVkIGluIGFzOiAnXCIrYy51c2VySWQrXCInLiBZb3UgZG8gbm90IGhhdmUgYWNjZXNzIHRvIHRoaXMgcmVzb3VyY2U6IFwiK2Use2Vycm9yOnJ9KSxuLnJlamVjdChkKSxuLnByb21pc2U7Y29uc3QgdT10aGlzLl9maW5kQ3JlZGVudGlhbChlLHQpO2lmKHUpcmV0dXJuIG4ucmVzb2x2ZSh1KSxuLnByb21pc2U7bGV0IHA9dGhpcy5maW5kU2VydmVySW5mbyhlKTtpZihwKSFwLmhhc1NlcnZlciYmdGhpcy5faXNTZXJ2ZXJSc3JjKGUpJiYocC5fcmVzdEluZm9QbXM9dGhpcy5fZ2V0VG9rZW5TdmNVcmwoZSkscC5oYXNTZXJ2ZXI9ITApO2Vsc2Uge2NvbnN0IHQ9dGhpcy5fZ2V0VG9rZW5TdmNVcmwoZSk7aWYoIXQpcmV0dXJuIGQ9bmV3IHMkeChcImlkZW50aXR5LW1hbmFnZXI6dW5rbm93bi1yZXNvdXJjZVwiLFwiVW5rbm93biByZXNvdXJjZSAtIGNvdWxkIG5vdCBmaW5kIHRva2VuIHNlcnZpY2UgZW5kcG9pbnQuXCIpLG4ucmVqZWN0KGQpLG4ucHJvbWlzZTtwPW5ldyBpLHAuc2VydmVyPXRoaXMuX2dldFNlcnZlckluc3RhbmNlUm9vdChlKSxcInN0cmluZ1wiPT10eXBlb2YgdD8ocC50b2tlblNlcnZpY2VVcmw9dCxwLmhhc1BvcnRhbD0hMCk6KHAuX3Jlc3RJbmZvUG1zPXQscC5oYXNTZXJ2ZXI9ITApLHRoaXMucmVnaXN0ZXJTZXJ2ZXJzKFtwXSk7fXJldHVybiBwLmhhc1BvcnRhbCYmdm9pZCAwPT09cC5fc2VsZlJlcSYmKGkkMXx8RSQ0KHAudG9rZW5TZXJ2aWNlVXJsLHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4pfHx0aGlzLl9nd0RvbWFpbnMuc29tZSgoZT0+ZS50b2tlblNlcnZpY2VVcmw9PT1wLnRva2VuU2VydmljZVVybCkpKSYmKHAuX3NlbGZSZXE9e293bmluZ1RlbmFudDp0JiZ0Lm93bmluZ1RlbmFudCxzZWxmRGZkOnRoaXMuX2dldFBvcnRhbFNlbGYocC50b2tlblNlcnZpY2VVcmwucmVwbGFjZSh0aGlzLl9yZVBvcnRhbFRva2VuU3ZjLFwiL3NoYXJpbmcvcmVzdC9wb3J0YWxzL3NlbGZcIiksZSl9KSx0aGlzLl9lbnF1ZXVlKGUscCx0LG4saCl9Z2V0UmVzb3VyY2VOYW1lKGUpe3JldHVybiB0aGlzLl9pc1JFU1RTZXJ2aWNlKGUpP2UucmVwbGFjZSh0aGlzLl9yZWdleFNEaXJVcmwsXCJcIikucmVwbGFjZSh0aGlzLl9yZWdleFNlcnZlclR5cGUsXCJcIil8fFwiXCI6dGhpcy5fZ3dVc2VyLnRlc3QoZSkmJmUucmVwbGFjZSh0aGlzLl9nd1VzZXIsXCIkMVwiKXx8dGhpcy5fZ3dJdGVtLnRlc3QoZSkmJmUucmVwbGFjZSh0aGlzLl9nd0l0ZW0sXCIkMVwiKXx8dGhpcy5fZ3dHcm91cC50ZXN0KGUpJiZlLnJlcGxhY2UodGhpcy5fZ3dHcm91cCxcIiQxXCIpfHxcIlwifWdlbmVyYXRlVG9rZW4oZSx0LHMpe2NvbnN0IHI9dGhpcy5fcmVQb3J0YWxUb2tlblN2Yy50ZXN0KGUudG9rZW5TZXJ2aWNlVXJsKSxpPW5ldyAkJDIod2luZG93LmxvY2F0aW9uLmhyZWYudG9Mb3dlckNhc2UoKSksbz1lLnNob3J0TGl2ZWRUb2tlblZhbGlkaXR5O2xldCBuLGgsZCx1LHAsXyxmLGc7dCYmKGc9dGhpcy50b2tlblZhbGlkaXR5fHxvfHx0aGlzLmRlZmF1bHRUb2tlblZhbGlkaXR5LGc+byYmbz4wJiYoZz1vKSkscyYmKG49cy5pc0FkbWluLGg9cy5zZXJ2ZXJVcmwsZD1zLnRva2VuLF89cy5zaWduYWwsZj1zLnNzbCxlLmN1c3RvbVBhcmFtZXRlcnM9cy5jdXN0b21QYXJhbWV0ZXJzKSxuP3U9ZS5hZG1pblRva2VuU2VydmljZVVybDoodT1lLnRva2VuU2VydmljZVVybCxwPW5ldyAkJDIodS50b0xvd2VyQ2FzZSgpKSxlLndlYlRpZXJBdXRoJiZzJiZzLnNlcnZlclVybCYmIWYmJlwiaHR0cFwiPT09aS5zY2hlbWUmJihFJDQoaS51cmksdSwhMCl8fFwiaHR0cHNcIj09PXAuc2NoZW1lJiZpLmhvc3Q9PT1wLmhvc3QmJlwiNzA4MFwiPT09aS5wb3J0JiZcIjc0NDNcIj09PXAucG9ydCkmJih1PXUucmVwbGFjZSgvXmh0dHBzOi9pLFwiaHR0cDpcIikucmVwbGFjZSgvOjc0NDMvaSxcIjo3MDgwXCIpKSk7Y29uc3QgbT17cXVlcnk6e3JlcXVlc3Q6XCJnZXRUb2tlblwiLHVzZXJuYW1lOm51bGw9PXQ/dm9pZCAwOnQudXNlcm5hbWUscGFzc3dvcmQ6bnVsbD09dD92b2lkIDA6dC5wYXNzd29yZCxzZXJ2ZXJVcmw6aCx0b2tlbjpkLGV4cGlyYXRpb246ZyxyZWZlcmVyOm58fHI/d2luZG93LmxvY2F0aW9uLmhvc3Q6bnVsbCxjbGllbnQ6bj9cInJlZmVyZXJcIjpudWxsLGY6XCJqc29uXCIsLi4uZS5jdXN0b21QYXJhbWV0ZXJzfSxtZXRob2Q6XCJwb3N0XCIsYXV0aE1vZGU6XCJhbm9ueW1vdXNcIix1c2VQcm94eTp0aGlzLl91c2VQcm94eShlLHMpLHNpZ25hbDpfLC4uLm51bGw9PXM/dm9pZCAwOnMuaW9BcmdzfTtyfHwobS53aXRoQ3JlZGVudGlhbHM9ITEpO3JldHVybiBVJDEodSxtKS50aGVuKChzPT57Y29uc3Qgcj1zLmRhdGE7aWYoIXJ8fCFyLnRva2VuKXJldHVybiBuZXcgcyR4KFwiaWRlbnRpdHktbWFuYWdlcjphdXRoZW50aWNhdGlvbi1mYWlsZWRcIixcIlVuYWJsZSB0byBnZW5lcmF0ZSB0b2tlblwiKTtjb25zdCBpPWUuc2VydmVyO3JldHVybiBSW2ldfHwoUltpXT17fSksdCYmKFJbaV1bdC51c2VybmFtZV09dC5wYXNzd29yZCksci52YWxpZGl0eT1nLHJ9KSl9aXNCdXN5KCl7cmV0dXJuICEhdGhpcy5fYnVzeX1jaGVja1NpZ25JblN0YXR1cyhlKXtyZXR1cm4gdGhpcy5jaGVja0FwcEFjY2VzcyhlLFwiXCIpLnRoZW4oKGU9PmUuY3JlZGVudGlhbCkpfWNoZWNrQXBwQWNjZXNzKGUsdCxzKXtsZXQgcj0hMTtyZXR1cm4gdGhpcy5nZXRDcmVkZW50aWFsKGUse3Byb21wdDohMX0pLnRoZW4oKGk9PntsZXQgbztjb25zdCBuPXtmOlwianNvblwifTtpZihcInBvcnRhbFwiPT09aS5zY29wZSlpZih0JiYodGhpcy5fZG9Qb3J0YWxTaWduSW4oZSl8fHMmJnMuZm9yY2UpKW89aS5zZXJ2ZXIrXCIvc2hhcmluZy9yZXN0L29hdXRoMi92YWxpZGF0ZUFwcEFjY2Vzc1wiLG4uY2xpZW50X2lkPXQ7ZWxzZSB7aWYoIWkudG9rZW4pcmV0dXJuIHtjcmVkZW50aWFsOml9O289aS5zZXJ2ZXIrXCIvc2hhcmluZy9yZXN0XCI7fWVsc2Uge2lmKCFpLnRva2VuKXJldHVybiB7Y3JlZGVudGlhbDppfTtvPWkuc2VydmVyK1wiL3Jlc3Qvc2VydmljZXNcIjt9cmV0dXJuIGkudG9rZW4mJihuLnRva2VuPWkudG9rZW4pLFUkMShvLHtxdWVyeTpuLGF1dGhNb2RlOlwiYW5vbnltb3VzXCJ9KS50aGVuKChlPT57aWYoITE9PT1lLmRhdGEudmFsaWQpdGhyb3cgbmV3IHMkeChcImlkZW50aXR5LW1hbmFnZXI6bm90LWF1dGhvcml6ZWRcIixgWW91IGFyZSBjdXJyZW50bHkgc2lnbmVkIGluIGFzOiAnJHtpLnVzZXJJZH0nLmAsZS5kYXRhKTtyZXR1cm4gcj0hIWUuZGF0YS52aWV3T25seVVzZXJUeXBlQXBwLHtjcmVkZW50aWFsOml9fSkpLmNhdGNoKChlPT57aWYoXCJpZGVudGl0eS1tYW5hZ2VyOm5vdC1hdXRob3JpemVkXCI9PT1lLm5hbWUpdGhyb3cgZTtjb25zdCB0PWUuZGV0YWlscyYmZS5kZXRhaWxzLmh0dHBTdGF0dXM7aWYoNDk4PT09dCl0aHJvdyBpLmRlc3Ryb3koKSxuZXcgcyR4KFwiaWRlbnRpdHktbWFuYWdlcjpub3QtYXV0aGVudGljYXRlZFwiLFwiVXNlciBpcyBub3Qgc2lnbmVkIGluLlwiKTtpZig0MDA9PT10KXRocm93IG5ldyBzJHgoXCJpZGVudGl0eS1tYW5hZ2VyOmludmFsaWQtcmVxdWVzdFwiKTtyZXR1cm4ge2NyZWRlbnRpYWw6aX19KSl9KSkudGhlbigoZT0+KHtjcmVkZW50aWFsOmUuY3JlZGVudGlhbCx2aWV3T25seTpyfSkpKX1zZXRPQXV0aFJlc3BvbnNlSGFzaChlKXt2YXIgdDtjb25zdCBzPXRoaXMuX29BdXRoRGZkO2lmKHRoaXMuX29BdXRoRGZkPW51bGwsIXN8fCFlKXJldHVybjtjbGVhckludGVydmFsKHRoaXMuX29BdXRoSW50ZXJ2YWxJZCksbnVsbD09KHQ9dGhpcy5fb0F1dGhPbkhhc2hIYW5kbGUpfHx0LnJlbW92ZSgpLFwiI1wiPT09ZS5jaGFyQXQoMCkmJihlPWUuc3Vic3RyaW5nKDEpKTtjb25zdCByPWIkZChlKTtpZihyLmVycm9yKXtjb25zdCBlPVwiYWNjZXNzX2RlbmllZFwiPT09ci5lcnJvcix0PW5ldyBzJHgoZT9cImlkZW50aXR5LW1hbmFnZXI6dXNlci1hYm9ydGVkXCI6XCJpZGVudGl0eS1tYW5hZ2VyOmF1dGhlbnRpY2F0aW9uLWZhaWxlZFwiLGU/XCJBQk9SVEVEXCI6XCJPQXV0aDogXCIrci5lcnJvcitcIiAtIFwiK3IuZXJyb3JfZGVzY3JpcHRpb24pO3MucmVqZWN0KHQpO31lbHNlIHtjb25zdCBlPXMuc2luZm9fLHQ9cy5vaW5mb18saT10Ll9vQXV0aENyZWQsbz1uZXcgcSh7dXNlcklkOnIudXNlcm5hbWUsc2VydmVyOmUuc2VydmVyLHRva2VuOnIuYWNjZXNzX3Rva2VuLGV4cGlyZXM6RGF0ZS5ub3coKSsxZTMqTnVtYmVyKHIuZXhwaXJlc19pbiksc3NsOlwidHJ1ZVwiPT09ci5zc2wsX29BdXRoQ3JlZDppfSk7dC51c2VySWQ9by51c2VySWQsaS5zdG9yYWdlPXIucGVyc2lzdD9DOkQsaS50b2tlbj1vLnRva2VuLGkuZXhwaXJlcz1vLmV4cGlyZXMsaS51c2VySWQ9by51c2VySWQsaS5zc2w9by5zc2wsaS5zYXZlKCkscy5yZXNvbHZlKG8pO319c2V0T0F1dGhSZWRpcmVjdGlvbkhhbmRsZXIoZSl7dGhpcy5fb0F1dGhSZWRpcmVjdEZ1bmM9ZTt9c2V0UHJvdG9jb2xFcnJvckhhbmRsZXIoZSl7dGhpcy5fcHJvdG9jb2xGdW5jPWU7fXNpZ25JbihlLHQscz17fSl7Y29uc3Qgcj1CJDQoKSxpPSgpPT57dmFyIGUsdCxzLHIsaTtudWxsPT0oZT1oKXx8ZS5yZW1vdmUoKSxudWxsPT0odD1sKXx8dC5yZW1vdmUoKSxudWxsPT0ocz1jKXx8cy5yZW1vdmUoKSxudWxsPT0ocj1uKXx8ci5kZXN0cm95KCksbnVsbD09KGk9dGhpcy5kaWFsb2cpfHxpLmRlc3Ryb3koKSx0aGlzLmRpYWxvZz1uPWg9bD1jPW51bGw7fSxvPSgpPT57aSgpLHRoaXMuX29BdXRoRGZkPW51bGwsci5yZWplY3QobmV3IHMkeChcImlkZW50aXR5LW1hbmFnZXI6dXNlci1hYm9ydGVkXCIsXCJBQk9SVEVEXCIpKTt9O3Muc2lnbmFsJiZ2JDkocy5zaWduYWwsKCgpPT57bygpO30pKTtsZXQgbj1uZXcgdGhpcy5mb3JtQ29uc3RydWN0b3I7bi5yZXNvdXJjZT10aGlzLmdldFJlc291cmNlTmFtZShlKSxuLnNlcnZlcj10LnNlcnZlcix0aGlzLmRpYWxvZz1uZXcgcCQxLHRoaXMuZGlhbG9nLmNvbnRlbnQ9bix0aGlzLmRpYWxvZy5vcGVuPSEwLHRoaXMuZW1pdChcImRpYWxvZy1jcmVhdGVcIik7bGV0IGg9bi5vbihcImNhbmNlbFwiLG8pLGw9dGhpcy5kaWFsb2cud2F0Y2goXCJvcGVuXCIsbyksYz1uLm9uKFwic3VibWl0XCIsKGU9Pnt0aGlzLmdlbmVyYXRlVG9rZW4odCxlLHtpc0FkbWluOnMuaXNBZG1pbixzaWduYWw6cy5zaWduYWx9KS50aGVuKChvPT57aSgpO2NvbnN0IG49bmV3IHEoe3VzZXJJZDplLnVzZXJuYW1lLHNlcnZlcjp0LnNlcnZlcix0b2tlbjpvLnRva2VuLGV4cGlyZXM6bnVsbCE9by5leHBpcmVzP051bWJlcihvLmV4cGlyZXMpOm51bGwsc3NsOiEhby5zc2wsaXNBZG1pbjpzLmlzQWRtaW4sdmFsaWRpdHk6by52YWxpZGl0eX0pO3IucmVzb2x2ZShuKTt9KSkuY2F0Y2goKGU9PntuLmVycm9yPWUsbi5zaWduaW5nSW49ITE7fSkpO30pKTtyZXR1cm4gci5wcm9taXNlfW9BdXRoU2lnbkluKGUsdCxzLHIpe3RoaXMuX29BdXRoRGZkPUIkNCgpO2NvbnN0IGk9dGhpcy5fb0F1dGhEZmQ7bnVsbCE9ciYmci5zaWduYWwmJnYkOShyLnNpZ25hbCwoKCk9Pntjb25zdCBlPXRoaXMuX29BdXRoRGZkJiZ0aGlzLl9vQXV0aERmZC5vQXV0aFdpbl87ZSYmIWUuY2xvc2VkP2UuY2xvc2UoKTp0aGlzLmRpYWxvZyYmaCgpO30pKSxpLnJlc1VybF89ZSxpLnNpbmZvXz10LGkub2luZm9fPXM7Y29uc3Qgbz0hcnx8ITEhPT1yLm9BdXRoUG9wdXBDb25maXJtYXRpb247aWYoIXMucG9wdXB8fCFvKXJldHVybiB0aGlzLl9kb09BdXRoU2lnbkluKGUsdCxzKSxpLnByb21pc2U7Y29uc3Qgbj1uZXcgdGhpcy5mb3JtQ29uc3RydWN0b3I7bi5vQXV0aFByb21wdD0hMCxuLnNlcnZlcj10LnNlcnZlcix0aGlzLmRpYWxvZz1uZXcgcCQxLHRoaXMuZGlhbG9nLmNvbnRlbnQ9bix0aGlzLmRpYWxvZy5vcGVuPSEwLHRoaXMuZW1pdChcImRpYWxvZy1jcmVhdGVcIik7Y29uc3QgaD0oKT0+e3UoKSx0aGlzLl9vQXV0aERmZD1udWxsLGkucmVqZWN0KG5ldyBzJHgoXCJpZGVudGl0eS1tYW5hZ2VyOnVzZXItYWJvcnRlZFwiLFwiQUJPUlRFRFwiKSk7fSxsPW4ub24oXCJjYW5jZWxcIixoKSxjPXRoaXMuZGlhbG9nLndhdGNoKFwib3BlblwiLGgpLGQ9bi5vbihcInN1Ym1pdFwiLCgoKT0+e3UoKSx0aGlzLl9kb09BdXRoU2lnbkluKGUsdCxzKTt9KSksdT0oKT0+e2wucmVtb3ZlKCksYy5yZW1vdmUoKSxkLnJlbW92ZSgpLG4uZGVzdHJveSgpLHRoaXMuZGlhbG9nLmRlc3Ryb3koKSx0aGlzLmRpYWxvZz1udWxsO307cmV0dXJuIGkucHJvbWlzZX1kZXN0cm95Q3JlZGVudGlhbHMoKXtpZih0aGlzLmNyZWRlbnRpYWxzKXt0aGlzLmNyZWRlbnRpYWxzLnNsaWNlKCkuZm9yRWFjaCgoZT0+e2UuZGVzdHJveSgpO30pKTt9dGhpcy5lbWl0KFwiY3JlZGVudGlhbHMtZGVzdHJveVwiKTt9ZW5hYmxlUG9zdE1lc3NhZ2VBdXRoKGU9XCJodHRwczovL3d3dy5hcmNnaXMuY29tL3NoYXJpbmcvcmVzdFwiKXt0aGlzLl9wb3N0TWVzc2FnZUF1dGhIYW5kbGUmJnRoaXMuX3Bvc3RNZXNzYWdlQXV0aEhhbmRsZS5yZW1vdmUoKSx0aGlzLl9wb3N0TWVzc2FnZUF1dGhIYW5kbGU9ciRyKHdpbmRvdyxcIm1lc3NhZ2VcIiwodD0+e3ZhciBzO2lmKCh0Lm9yaWdpbj09PXdpbmRvdy5sb2NhdGlvbi5vcmlnaW58fHQub3JpZ2luLmVuZHNXaXRoKFwiLmFyY2dpcy5jb21cIikpJiZcImFyY2dpczphdXRoOnJlcXVlc3RDcmVkZW50aWFsXCI9PT0obnVsbD09KHM9dC5kYXRhKT92b2lkIDA6cy50eXBlKSl7Y29uc3Qgcz10LnNvdXJjZTt0aGlzLmdldENyZWRlbnRpYWwoZSkudGhlbigoZT0+e3MucG9zdE1lc3NhZ2Uoe3R5cGU6XCJhcmNnaXM6YXV0aDpjcmVkZW50aWFsXCIsY3JlZGVudGlhbDp7ZXhwaXJlczplLmV4cGlyZXMsc2VydmVyOmUuc2VydmVyLHNzbDplLnNzbCx0b2tlbjplLnRva2VuLHVzZXJJZDplLnVzZXJJZH19LHQub3JpZ2luKTt9KSkuY2F0Y2goKGU9PntzLnBvc3RNZXNzYWdlKHt0eXBlOlwiYXJjZ2lzOmF1dGg6ZXJyb3JcIixlcnJvcjp7bmFtZTplLm5hbWUsbWVzc2FnZTplLm1lc3NhZ2V9fSx0Lm9yaWdpbik7fSkpO319KSk7fWRpc2FibGVQb3N0TWVzc2FnZUF1dGgoKXt0aGlzLl9wb3N0TWVzc2FnZUF1dGhIYW5kbGUmJih0aGlzLl9wb3N0TWVzc2FnZUF1dGhIYW5kbGUucmVtb3ZlKCksdGhpcy5fcG9zdE1lc3NhZ2VBdXRoSGFuZGxlPW51bGwpO31fZ2V0T0F1dGhIYXNoKCl7bGV0IGU9d2luZG93LmxvY2F0aW9uLmhhc2g7aWYoZSl7XCIjXCI9PT1lLmNoYXJBdCgwKSYmKGU9ZS5zdWJzdHJpbmcoMSkpO2NvbnN0IHQ9YiRkKGUpO2xldCBzPSExO2lmKHQuYWNjZXNzX3Rva2VuJiZ0LmV4cGlyZXNfaW4mJnQuc3RhdGUmJnQuaGFzT3duUHJvcGVydHkoXCJ1c2VybmFtZVwiKSl0cnl7dC5zdGF0ZT1KU09OLnBhcnNlKHQuc3RhdGUpLFwib2JqZWN0XCI9PXR5cGVvZiB0LnN0YXRlJiZ0LnN0YXRlLnBvcnRhbFVybCYmKHRoaXMuX29BdXRoSGFzaD10LHM9ITApO31jYXRjaHt9ZWxzZSB0LmVycm9yJiZ0LmVycm9yX2Rlc2NyaXB0aW9uJiYoY29uc29sZS5sb2coXCJJZGVudGl0eU1hbmFnZXIgT0F1dGggRXJyb3I6IFwiLHQuZXJyb3IsXCIgLSBcIix0LmVycm9yX2Rlc2NyaXB0aW9uKSxcImFjY2Vzc19kZW5pZWRcIj09PXQuZXJyb3ImJihzPSEwKSk7cyYmKHdpbmRvdy5sb2NhdGlvbi5oYXNoPVwib2JqZWN0XCI9PXR5cGVvZiB0LnN0YXRlJiZ0LnN0YXRlLmhhc2h8fFwiXCIpO319X3BhZ2VTaG93SGFuZGxlcihlKXtpZihlLnBlcnNpc3RlZCYmdGhpcy5pc0J1c3koKSYmdGhpcy5fcmVqZWN0T25QZXJzaXN0ZWRQYWdlU2hvdyl7Y29uc3QgZT1uZXcgcyR4KFwiaWRlbnRpdHktbWFuYWdlcjp1c2VyLWFib3J0ZWRcIixcIkFCT1JURURcIik7dGhpcy5fZXJyYmFja0Z1bmMoZSk7fX1fZmluZENyZWRlbnRpYWwoZSx0KXtsZXQgcyxyLGksbyxuPS0xO2NvbnN0IGE9dCYmdC50b2tlbixoPXQmJnQucmVzb3VyY2UsbD10aGlzLl9pc1NlcnZlclJzcmMoZSk/XCJzZXJ2ZXJcIjpcInBvcnRhbFwiLGM9dGhpcy5jcmVkZW50aWFscy5maWx0ZXIoKHQ9PnRoaXMuX2hhc1NhbWVTZXJ2ZXJJbnN0YW5jZSh0LnNlcnZlcixlKSYmdC5zY29wZT09PWwpKTtpZihlPWh8fGUsYy5sZW5ndGgpaWYoMT09PWMubGVuZ3RoKXtpZihzPWNbMF0sbz10aGlzLmZpbmRTZXJ2ZXJJbmZvKHMuc2VydmVyKSxyPW8mJm8ub3duaW5nU3lzdGVtVXJsLGk9ciYmdGhpcy5maW5kQ3JlZGVudGlhbChyLHMudXNlcklkKSxuPXRoaXMuX2dldElkZW50aWNhbFN2Y0lkeChlLHMpLCFhKXJldHVybiAtMT09PW4mJnMucmVzb3VyY2VzLnB1c2goZSksdGhpcy5fYWRkUmVzb3VyY2UoZSxpKSxzOy0xIT09biYmKHMucmVzb3VyY2VzLnNwbGljZShuLDEpLHRoaXMuX3JlbW92ZVJlc291cmNlKGUsaSkpO31lbHNlIHtsZXQgdCxzO2lmKGMuc29tZSgoYT0+KHM9dGhpcy5fZ2V0SWRlbnRpY2FsU3ZjSWR4KGUsYSksLTEhPT1zJiYodD1hLG89dGhpcy5maW5kU2VydmVySW5mbyh0LnNlcnZlcikscj1vJiZvLm93bmluZ1N5c3RlbVVybCxpPXImJnRoaXMuZmluZENyZWRlbnRpYWwocix0LnVzZXJJZCksbj1zLCEwKSkpKSxhKXQmJih0LnJlc291cmNlcy5zcGxpY2UobiwxKSx0aGlzLl9yZW1vdmVSZXNvdXJjZShlLGkpKTtlbHNlIGlmKHQpcmV0dXJuIHRoaXMuX2FkZFJlc291cmNlKGUsaSksdH19X2ZpbmRPQXV0aEluZm8oZSl7bGV0IHQ9dGhpcy5maW5kT0F1dGhJbmZvKGUpO2lmKCF0KWZvcihjb25zdCBzIG9mIHRoaXMub0F1dGhJbmZvcylpZih0aGlzLl9pc0lkUHJvdmlkZXIocy5wb3J0YWxVcmwsZSkpe3Q9czticmVha31yZXR1cm4gdH1fYWRkUmVzb3VyY2UoZSx0KXt0JiYtMT09PXRoaXMuX2dldElkZW50aWNhbFN2Y0lkeChlLHQpJiZ0LnJlc291cmNlcy5wdXNoKGUpO31fcmVtb3ZlUmVzb3VyY2UoZSx0KXtsZXQgcz0tMTt0JiYocz10aGlzLl9nZXRJZGVudGljYWxTdmNJZHgoZSx0KSxzPi0xJiZ0LnJlc291cmNlcy5zcGxpY2UocywxKSk7fV91c2VQcm94eShlLHQpe3JldHVybiB0JiZ0LmlzQWRtaW4mJiFFJDQoZS5hZG1pblRva2VuU2VydmljZVVybCx3aW5kb3cubG9jYXRpb24uaHJlZil8fCF0aGlzLl9pc1BvcnRhbERvbWFpbihlLnRva2VuU2VydmljZVVybCkmJlwiMTAuMVwiPT09U3RyaW5nKGUuY3VycmVudFZlcnNpb24pJiYhRSQ0KGUudG9rZW5TZXJ2aWNlVXJsLHdpbmRvdy5sb2NhdGlvbi5ocmVmKX1fZ2V0T3JpZ2luKGUpe2NvbnN0IHQ9bmV3ICQkMihlKTtyZXR1cm4gdC5zY2hlbWUrXCI6Ly9cIit0Lmhvc3QrKG51bGwhPXQucG9ydD9cIjpcIit0LnBvcnQ6XCJcIil9X2dldFNlcnZlckluc3RhbmNlUm9vdChlKXtjb25zdCB0PWUudG9Mb3dlckNhc2UoKTtsZXQgcz10LmluZGV4T2YodGhpcy5fYWdzUmVzdCk7cmV0dXJuIC0xPT09cyYmdGhpcy5faXNBZG1pblJlc291cmNlKGUpJiYocz10aGlzLl9hZ3NBZG1pbi50ZXN0KGUpP2UucmVwbGFjZSh0aGlzLl9hZ3NBZG1pbixcIiQxXCIpLmxlbmd0aDplLnNlYXJjaCh0aGlzLl9hZG1pblN2Y3MpKSwtMT09PXMmJihzPXQuaW5kZXhPZihcIi9zaGFyaW5nXCIpKSwtMT09PXMmJlwiL1wiPT09dC5zdWJzdHIoLTEpJiYocz10Lmxlbmd0aC0xKSxzPi0xP2Uuc3Vic3RyaW5nKDAscyk6ZX1faGFzU2FtZVNlcnZlckluc3RhbmNlKGUsdCl7cmV0dXJuIFwiL1wiPT09ZS5zdWJzdHIoLTEpJiYoZT1lLnNsaWNlKDAsLTEpKSxlPWUudG9Mb3dlckNhc2UoKSx0PXRoaXMuX2dldFNlcnZlckluc3RhbmNlUm9vdCh0KS50b0xvd2VyQ2FzZSgpLGU9dGhpcy5fbm9ybWFsaXplQUdPTG9yZ0RvbWFpbihlKSx0PXRoaXMuX25vcm1hbGl6ZUFHT0xvcmdEb21haW4odCksKGU9ZS5zdWJzdHIoZS5pbmRleE9mKFwiOlwiKSkpPT09KHQ9dC5zdWJzdHIodC5pbmRleE9mKFwiOlwiKSkpfV9ub3JtYWxpemVBR09Mb3JnRG9tYWluKGUpe2NvbnN0IHQ9L15odHRwcz86XFwvXFwvKD86Y2RufFthLXpcXGQtXStcXC5tYXBzKVxcLmFyY2dpc1xcLmNvbS9pLHM9L15odHRwcz86XFwvXFwvKD86Y2RuZGV2fFthLXpcXGQtXStcXC5tYXBzZGV2ZXh0KVxcLmFyY2dpc1xcLmNvbS9pLHI9L15odHRwcz86XFwvXFwvKD86Y2RucWF8W2EtelxcZC1dK1xcLm1hcHNxYSlcXC5hcmNnaXNcXC5jb20vaTtyZXR1cm4gdC50ZXN0KGUpP2U9ZS5yZXBsYWNlKHQsXCJodHRwczovL3d3dy5hcmNnaXMuY29tXCIpOnMudGVzdChlKT9lPWUucmVwbGFjZShzLFwiaHR0cHM6Ly9kZXZleHQuYXJjZ2lzLmNvbVwiKTpyLnRlc3QoZSkmJihlPWUucmVwbGFjZShyLFwiaHR0cHM6Ly9xYWV4dC5hcmNnaXMuY29tXCIpKSxlfV9zYW5pdGl6ZVVybChlKXtjb25zdCB0PShzJEgucmVxdWVzdC5wcm94eVVybHx8XCJcIikudG9Mb3dlckNhc2UoKSxzPXQ/ZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YodCtcIj9cIik6LTE7cmV0dXJuIC0xIT09cyYmKGU9ZS5zdWJzdHJpbmcocyt0Lmxlbmd0aCsxKSksZT16JDYoZSksVSQ0KGUpLnBhdGh9X2lzUkVTVFNlcnZpY2UoZSl7cmV0dXJuIGUuaW5kZXhPZih0aGlzLl9hZ3NSZXN0KT4tMX1faXNBZG1pblJlc291cmNlKGUpe3JldHVybiB0aGlzLl9hZ3NBZG1pbi50ZXN0KGUpfHx0aGlzLl9hZG1pblN2Y3MudGVzdChlKX1faXNTZXJ2ZXJSc3JjKGUpe3JldHVybiB0aGlzLl9pc1JFU1RTZXJ2aWNlKGUpfHx0aGlzLl9pc0FkbWluUmVzb3VyY2UoZSl9X2lzSWRlbnRpY2FsU2VydmljZShlLHQpe2xldCBzO2lmKHRoaXMuX2lzUkVTVFNlcnZpY2UoZSkmJnRoaXMuX2lzUkVTVFNlcnZpY2UodCkpe2NvbnN0IHI9dGhpcy5fZ2V0U3VmZml4KGUpLnRvTG93ZXJDYXNlKCksaT10aGlzLl9nZXRTdWZmaXgodCkudG9Mb3dlckNhc2UoKTtpZihzPXI9PT1pLCFzKXtjb25zdCBlPS8oLiopXFwvKE1hcFNlcnZlcnxGZWF0dXJlU2VydmVyKS4qL2dpO3M9ci5yZXBsYWNlKGUsXCIkMVwiKT09PWkucmVwbGFjZShlLFwiJDFcIik7fX1lbHNlIHRoaXMuX2lzQWRtaW5SZXNvdXJjZShlKSYmdGhpcy5faXNBZG1pblJlc291cmNlKHQpP3M9ITA6dGhpcy5faXNTZXJ2ZXJSc3JjKGUpfHx0aGlzLl9pc1NlcnZlclJzcmModCl8fCF0aGlzLl9pc1BvcnRhbERvbWFpbihlKXx8KHM9ITApO3JldHVybiBzfV9pc1BvcnRhbERvbWFpbihlKXtjb25zdCB0PW5ldyAkJDIoZS50b0xvd2VyQ2FzZSgpKSxzPXRoaXMuX3BvcnRhbENvbmZpZztsZXQgcj10aGlzLl9nd0RvbWFpbnMuc29tZSgoZT0+ZS5yZWdleC50ZXN0KHQudXJpKSkpO3JldHVybiAhciYmcyYmKHI9dGhpcy5faGFzU2FtZVNlcnZlckluc3RhbmNlKHRoaXMuX2dldFNlcnZlckluc3RhbmNlUm9vdChzLnJlc3RCYXNlVXJsKSx0LnVyaSkpLHJ8fHMkSC5wb3J0YWxVcmwmJihyPUUkNCh0LHMkSC5wb3J0YWxVcmwsITApKSxyfHwocj10aGlzLl9wb3J0YWxzLnNvbWUoKGU9PnRoaXMuX2hhc1NhbWVTZXJ2ZXJJbnN0YW5jZShlLHQudXJpKSkpKSxyPXJ8fHRoaXMuX2Fnc1BvcnRhbC50ZXN0KHQucGF0aCkscn1faXNJZFByb3ZpZGVyKGUsdCl7bGV0IHM9LTEscj0tMTt0aGlzLl9nd0RvbWFpbnMuZm9yRWFjaCgoKGksbyk9PnstMT09PXMmJmkucmVnZXgudGVzdChlKSYmKHM9byksLTE9PT1yJiZpLnJlZ2V4LnRlc3QodCkmJihyPW8pO30pKTtsZXQgaT0hMTtpZihzPi0xJiZyPi0xJiYoMD09PXN8fDQ9PT1zPzAhPT1yJiY0IT09cnx8KGk9ITApOjE9PT1zPzEhPT1yJiYyIT09cnx8KGk9ITApOjI9PT1zPzI9PT1yJiYoaT0hMCk6Mz09PXMmJjM9PT1yJiYoaT0hMCkpLCFpKXtjb25zdCBzPXRoaXMuZmluZFNlcnZlckluZm8odCkscj1zJiZzLm93bmluZ1N5c3RlbVVybDtyJiZiKHMpJiZ0aGlzLl9pc1BvcnRhbERvbWFpbihyKSYmdGhpcy5faXNJZFByb3ZpZGVyKGUscikmJihpPSEwKTt9cmV0dXJuIGl9X2dldElkZW50aWNhbFN2Y0lkeChlLHQpe2xldCBzPS0xO2ZvcihsZXQgcj0wO3I8dC5yZXNvdXJjZXMubGVuZ3RoO3IrKyl7Y29uc3QgaT10LnJlc291cmNlc1tyXTtpZih0aGlzLl9pc0lkZW50aWNhbFNlcnZpY2UoZSxpKSl7cz1yO2JyZWFrfX1yZXR1cm4gc31fZ2V0U3VmZml4KGUpe3JldHVybiBlLnJlcGxhY2UodGhpcy5fcmVnZXhTRGlyVXJsLFwiXCIpLnJlcGxhY2UodGhpcy5fcmVnZXhTZXJ2ZXJUeXBlLFwiJDFcIil9X2dldFRva2VuU3ZjVXJsKGUpe2xldCB0LHMscjtpZih0aGlzLl9pc1JFU1RTZXJ2aWNlKGUpfHx0aGlzLl9pc0FkbWluUmVzb3VyY2UoZSkpe2NvbnN0IHI9dGhpcy5fZ2V0U2VydmVySW5zdGFuY2VSb290KGUpO3JldHVybiB0PXIrXCIvYWRtaW4vZ2VuZXJhdGVUb2tlblwiLHM9VSQxKGU9citcIi9yZXN0L2luZm9cIix7cXVlcnk6e2Y6XCJqc29uXCJ9fSkudGhlbigoZT0+ZS5kYXRhKSkse2FkbWluVXJsOnQscHJvbWlzZTpzfX1pZih0aGlzLl9pc1BvcnRhbERvbWFpbihlKSl7bGV0IHQ9XCJcIjtpZih0aGlzLl9nd0RvbWFpbnMuc29tZSgocz0+KHMucmVnZXgudGVzdChlKSYmKHQ9cy50b2tlblNlcnZpY2VVcmwpLCEhdCkpKSx0fHx0aGlzLl9wb3J0YWxzLnNvbWUoKHM9Pih0aGlzLl9oYXNTYW1lU2VydmVySW5zdGFuY2UocyxlKSYmKHQ9cyt0aGlzLl9nd1Rva2VuVXJsKSwhIXQpKSksdHx8KHI9ZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCIvc2hhcmluZ1wiKSwtMSE9PXImJih0PWUuc3Vic3RyaW5nKDAscikrdGhpcy5fZ3dUb2tlblVybCkpLHR8fCh0PXRoaXMuX2dldE9yaWdpbihlKSt0aGlzLl9nd1Rva2VuVXJsKSx0KXtjb25zdCBzPW5ldyAkJDIoZSkucG9ydDsvXmh0dHA6XFwvXFwvL2kudGVzdChlKSYmXCI3MDgwXCI9PT1zJiYodD10LnJlcGxhY2UoLzo3MDgwL2ksXCI6NzQ0M1wiKSksdD10LnJlcGxhY2UoL2h0dHA6L2ksXCJodHRwczpcIik7fXJldHVybiB0fWlmKC0xIT09ZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJwcmVtaXVtLmFyY2dpc29ubGluZS5jb21cIikpcmV0dXJuIFwiaHR0cHM6Ly9wcmVtaXVtLmFyY2dpc29ubGluZS5jb20vc2VydmVyL3Rva2Vuc1wifV9leGNoYW5nZVRva2VuKGUsdCxzKXtyZXR1cm4gVSQxKGAke2V9L3NoYXJpbmcvcmVzdC9vYXV0aDIvZXhjaGFuZ2VUb2tlbmAse2F1dGhNb2RlOlwiYW5vbnltb3VzXCIsbWV0aG9kOlwicG9zdFwiLHF1ZXJ5OntmOlwianNvblwiLGNsaWVudF9pZDp0LHRva2VuOnN9fSkudGhlbigoZT0+ZS5kYXRhLnRva2VuKSl9X2dldFBsYXRmb3JtU2VsZihlLHQpe3JldHVybiBVJDEoYCR7ZX0vc2hhcmluZy9yZXN0L29hdXRoMi9wbGF0Zm9ybVNlbGZgLHthdXRoTW9kZTpcImFub255bW91c1wiLGhlYWRlcnM6e1wiWC1Fc3JpLUF1dGgtQ2xpZW50LUlkXCI6dCxcIlgtRXNyaS1BdXRoLVJlZGlyZWN0LVVyaVwiOndpbmRvdy5sb2NhdGlvbi5ocmVmLnJlcGxhY2UoLyMuKiQvLFwiXCIpfSxtZXRob2Q6XCJwb3N0XCIscXVlcnk6e2Y6XCJqc29uXCJ9LHdpdGhDcmVkZW50aWFsczohMH0pLnRoZW4oKGU9PmUuZGF0YSkpfV9nZXRQb3J0YWxTZWxmKGUsdCl7bGV0IHM7aWYodGhpcy5fZ3dEb21haW5zLnNvbWUoKHQ9Pih0LnJlZ2V4LnRlc3QoZSkmJihzPXQuY3VzdG9tQmFzZVVybCksISFzKSkpLHMpcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7YWxsU1NMOiEwLGN1cnJlbnRWZXJzaW9uOlwiNC40XCIsY3VzdG9tQmFzZVVybDpzLHBvcnRhbE1vZGU6XCJtdWx0aXRlbmFudFwiLHN1cHBvcnRzT0F1dGg6ITB9KTtcImh0dHBzOlwiPT09d2luZG93LmxvY2F0aW9uLnByb3RvY29sP2U9ZS5yZXBsYWNlKC9eaHR0cDovaSxcImh0dHBzOlwiKS5yZXBsYWNlKC86NzA4MC9pLFwiOjc0NDNcIik6L15odHRwOi9pLnRlc3QodCkmJihlPWUucmVwbGFjZSgvXmh0dHBzOi9pLFwiaHR0cDpcIikucmVwbGFjZSgvOjc0NDMvaSxcIjo3MDgwXCIpKTtyZXR1cm4gVSQxKGUse3F1ZXJ5OntmOlwianNvblwifSxhdXRoTW9kZTpcImFub255bW91c1wiLHdpdGhDcmVkZW50aWFsczohMH0pLnRoZW4oKGU9PmUuZGF0YSkpfV9kb1BvcnRhbFNpZ25JbihlKXtjb25zdCB0PXRoaXMuX3BvcnRhbENvbmZpZyxzPXdpbmRvdy5sb2NhdGlvbi5ocmVmLHI9dGhpcy5maW5kU2VydmVySW5mbyhlKTtyZXR1cm4gISghdCYmIXRoaXMuX2lzUG9ydGFsRG9tYWluKHMpfHwhKHI/ci5oYXNQb3J0YWx8fHIub3duaW5nU3lzdGVtVXJsJiZ0aGlzLl9pc1BvcnRhbERvbWFpbihyLm93bmluZ1N5c3RlbVVybCk6dGhpcy5faXNQb3J0YWxEb21haW4oZSkpfHwhKHRoaXMuX2lzSWRQcm92aWRlcihzLGUpfHx0JiYodGhpcy5faGFzU2FtZVNlcnZlckluc3RhbmNlKHRoaXMuX2dldFNlcnZlckluc3RhbmNlUm9vdCh0LnJlc3RCYXNlVXJsKSxlKXx8dGhpcy5faXNJZFByb3ZpZGVyKHQucmVzdEJhc2VVcmwsZSkpfHxFJDQocyxlLCEwKSkpfV9jaGVja1Byb3RvY29sKGUsdCxzLHIpe2xldCBpPSEwO2NvbnN0IG89cj90LmFkbWluVG9rZW5TZXJ2aWNlVXJsOnQudG9rZW5TZXJ2aWNlVXJsO2lmKDA9PT1vLnRyaW0oKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJodHRwczpcIikmJjAhPT13aW5kb3cubG9jYXRpb24uaHJlZi50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJodHRwczpcIikmJkEkYihvKSYmKGk9ISF0aGlzLl9wcm90b2NvbEZ1bmMmJiEhdGhpcy5fcHJvdG9jb2xGdW5jKHtyZXNvdXJjZVVybDplLHNlcnZlckluZm86dH0pLCFpKSl7cyhuZXcgcyR4KFwiaWRlbnRpdHktbWFuYWdlcjphYm9ydGVkXCIsXCJBYm9ydGVkIHRoZSBTaWduLUluIHByb2Nlc3MgdG8gYXZvaWQgc2VuZGluZyBwYXNzd29yZCBvdmVyIGluc2VjdXJlIGNvbm5lY3Rpb24uXCIpKTt9cmV0dXJuIGl9X2VucXVldWUoZSx0LHMscixpLG8pe3JldHVybiByfHwocj1CJDQoKSksci5yZXNVcmxfPWUsci5zaW5mb189dCxyLm9wdGlvbnNfPXMsci5hZG1pbl89aSxyLnJlZnJlc2hfPW8sdGhpcy5fYnVzeT90aGlzLl9oYXNTYW1lU2VydmVySW5zdGFuY2UodGhpcy5fZ2V0U2VydmVySW5zdGFuY2VSb290KGUpLHRoaXMuX2J1c3kucmVzVXJsXyk/KHRoaXMuX29BdXRoRGZkJiZ0aGlzLl9vQXV0aERmZC5vQXV0aFdpbl8mJnRoaXMuX29BdXRoRGZkLm9BdXRoV2luXy5mb2N1cygpLHRoaXMuX3NvUmVxcy5wdXNoKHIpKTp0aGlzLl94b1JlcXMucHVzaChyKTp0aGlzLl9kb1NpZ25JbihyKSxyLnByb21pc2V9X2RvU2lnbkluKGUpe3RoaXMuX2J1c3k9ZSx0aGlzLl9yZWplY3RPblBlcnNpc3RlZFBhZ2VTaG93PSExO2NvbnN0IHQ9dD0+e2NvbnN0IHM9ZS5vcHRpb25zXyYmZS5vcHRpb25zXy5yZXNvdXJjZSxyPWUucmVzVXJsXyxpPWUucmVmcmVzaF87bGV0IG89ITE7LTE9PT10aGlzLmNyZWRlbnRpYWxzLmluZGV4T2YodCkmJihpJiYtMSE9PXRoaXMuY3JlZGVudGlhbHMuaW5kZXhPZihpKT8oaS51c2VySWQ9dC51c2VySWQsaS50b2tlbj10LnRva2VuLGkuZXhwaXJlcz10LmV4cGlyZXMsaS52YWxpZGl0eT10LnZhbGlkaXR5LGkuc3NsPXQuc3NsLGkuY3JlYXRpb25UaW1lPXQuY3JlYXRpb25UaW1lLG89ITAsdD1pKTp0aGlzLmNyZWRlbnRpYWxzLnB1c2godCkpLHQucmVzb3VyY2VzfHwodC5yZXNvdXJjZXM9W10pLHQucmVzb3VyY2VzLnB1c2goc3x8ciksdC5zY29wZT10aGlzLl9pc1NlcnZlclJzcmMocik/XCJzZXJ2ZXJcIjpcInBvcnRhbFwiLHQuZW1pdFRva2VuQ2hhbmdlKCk7Y29uc3Qgbj10aGlzLl9zb1JlcXMsYT17fTt0aGlzLl9zb1JlcXM9W10sbi5mb3JFYWNoKChlPT57aWYoIXRoaXMuX2lzSWRlbnRpY2FsU2VydmljZShyLGUucmVzVXJsXykpe2NvbnN0IHM9dGhpcy5fZ2V0U3VmZml4KGUucmVzVXJsXyk7YVtzXXx8KGFbc109ITAsdC5yZXNvdXJjZXMucHVzaChlLnJlc1VybF8pKTt9fSkpLGUucmVzb2x2ZSh0KSxuLmZvckVhY2goKGU9Pnt0aGlzLl9oYXNTYW1lU2VydmVySW5zdGFuY2UodGhpcy5fZ2V0U2VydmVySW5zdGFuY2VSb290KHIpLGUucmVzVXJsXyk/ZS5yZXNvbHZlKHQpOnRoaXMuX3NvUmVxcy5wdXNoKGUpO30pKSx0aGlzLl9idXN5PWUucmVzVXJsXz1lLnNpbmZvXz1lLnJlZnJlc2hfPW51bGwsb3x8dGhpcy5lbWl0KFwiY3JlZGVudGlhbC1jcmVhdGVcIix7Y3JlZGVudGlhbDp0fSksdGhpcy5fc29SZXFzLmxlbmd0aD90aGlzLl9kb1NpZ25Jbih0aGlzLl9zb1JlcXMuc2hpZnQoKSk6dGhpcy5feG9SZXFzLmxlbmd0aCYmdGhpcy5fZG9TaWduSW4odGhpcy5feG9SZXFzLnNoaWZ0KCkpO30scz10PT57ZS5yZWplY3QodCksdGhpcy5fYnVzeT1lLnJlc1VybF89ZS5zaW5mb189ZS5yZWZyZXNoXz1udWxsLHRoaXMuX3NvUmVxcy5sZW5ndGg/dGhpcy5fZG9TaWduSW4odGhpcy5fc29SZXFzLnNoaWZ0KCkpOnRoaXMuX3hvUmVxcy5sZW5ndGgmJnRoaXMuX2RvU2lnbkluKHRoaXMuX3hvUmVxcy5zaGlmdCgpKTt9LGk9KHIsaSxvLG4pPT57dmFyIGgsYztjb25zdCBkPWUuc2luZm9fLHU9IWUub3B0aW9uc198fCExIT09ZS5vcHRpb25zXy5wcm9tcHQscD1kLmhhc1BvcnRhbCYmdGhpcy5fZmluZE9BdXRoSW5mbyhlLnJlc1VybF8pO2xldCBfLGY7aWYocil0KG5ldyBxKHt1c2VySWQ6cixzZXJ2ZXI6ZC5zZXJ2ZXIsdG9rZW46b3x8bnVsbCxleHBpcmVzOm51bGwhPW4/TnVtYmVyKG4pOm51bGwsc3NsOiEhaX0pKTtlbHNlIGlmKHdpbmRvdyE9PXdpbmRvdy5wYXJlbnQmJm51bGwhPShoPXRoaXMuX2FwcFVybE9iai5xdWVyeSkmJmhbXCJhcmNnaXMtYXV0aC1vcmlnaW5cIl0mJm51bGwhPShjPXRoaXMuX2FwcFVybE9iai5xdWVyeSkmJmNbXCJhcmNnaXMtYXV0aC1wb3J0YWxcIl0mJnRoaXMuX2hhc1NhbWVTZXJ2ZXJJbnN0YW5jZSh0aGlzLl9nZXRTZXJ2ZXJJbnN0YW5jZVJvb3QodGhpcy5fYXBwVXJsT2JqLnF1ZXJ5W1wiYXJjZ2lzLWF1dGgtcG9ydGFsXCJdKSxlLnJlc1VybF8pKXt2YXIgbTt3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKHt0eXBlOlwiYXJjZ2lzOmF1dGg6cmVxdWVzdENyZWRlbnRpYWxcIn0sdGhpcy5fYXBwVXJsT2JqLnF1ZXJ5W1wiYXJjZ2lzLWF1dGgtb3JpZ2luXCJdKTtjb25zdCByPXIkcih3aW5kb3csXCJtZXNzYWdlXCIsKGU9PntlLnNvdXJjZT09PXdpbmRvdy5wYXJlbnQmJmUuZGF0YSYmKFwiYXJjZ2lzOmF1dGg6Y3JlZGVudGlhbFwiPT09ZS5kYXRhLnR5cGU/KHIucmVtb3ZlKCksdChuZXcgcShlLmRhdGEuY3JlZGVudGlhbCkpKTpcImFyY2dpczphdXRoOmVycm9yXCI9PT1lLmRhdGEudHlwZSYmKHIucmVtb3ZlKCkscyhzJHguZnJvbUpTT04oZS5kYXRhLmVycm9yKSkpKTt9KSk7diQ5KG51bGw9PShtPWUub3B0aW9uc18pP3ZvaWQgMDptLnNpZ25hbCwoKCk9PntyLnJlbW92ZSgpO30pKTt9ZWxzZSBpZihwKXtsZXQgcj1wLl9vQXV0aENyZWQ7aWYoIXIpe2NvbnN0IGU9bmV3IHMkMihwLEMpLHQ9bmV3IHMkMihwLEQpO2UuaXNWYWxpZCgpJiZ0LmlzVmFsaWQoKT9lLmV4cGlyZXM+dC5leHBpcmVzPyhyPWUsdC5kZXN0cm95KCkpOihyPXQsZS5kZXN0cm95KCkpOnI9ZS5pc1ZhbGlkKCk/ZTp0LHAuX29BdXRoQ3JlZD1yO31pZihyLmlzVmFsaWQoKSlfPW5ldyBxKHt1c2VySWQ6ci51c2VySWQsc2VydmVyOmQuc2VydmVyLHRva2VuOnIudG9rZW4sZXhwaXJlczpyLmV4cGlyZXMsc3NsOnIuc3NsLF9vQXV0aENyZWQ6cn0pLHAuYXBwSWQhPT1yLmFwcElkJiZ0aGlzLl9kb1BvcnRhbFNpZ25JbihlLnJlc1VybF8pP2UuX3BlbmRpbmdEZmQ9dGhpcy5fZXhjaGFuZ2VUb2tlbihfLnNlcnZlcixwLmFwcElkLF8udG9rZW4pLnRoZW4oKGU9PntfLnRva2VuPWUsci50b2tlbj1lLHIuc2F2ZSgpLHQoXyk7fSkpLmNhdGNoKCgoKT0+e3QoXyk7fSkpOnQoXyk7ZWxzZSBpZih0aGlzLl9vQXV0aEhhc2gmJnRoaXMuX2hhc1NhbWVTZXJ2ZXJJbnN0YW5jZShwLnBvcnRhbFVybCx0aGlzLl9vQXV0aEhhc2guc3RhdGUucG9ydGFsVXJsKSl7Y29uc3QgZT10aGlzLl9vQXV0aEhhc2g7Xz1uZXcgcSh7dXNlcklkOmUudXNlcm5hbWUsc2VydmVyOmQuc2VydmVyLHRva2VuOmUuYWNjZXNzX3Rva2VuLGV4cGlyZXM6RGF0ZS5ub3coKSsxZTMqTnVtYmVyKGUuZXhwaXJlc19pbiksc3NsOlwidHJ1ZVwiPT09ZS5zc2wsb0F1dGhTdGF0ZTplLnN0YXRlLF9vQXV0aENyZWQ6cn0pLHAudXNlcklkPV8udXNlcklkLHIuc3RvcmFnZT1lLnBlcnNpc3Q/QzpELHIudG9rZW49Xy50b2tlbixyLmV4cGlyZXM9Xy5leHBpcmVzLHIudXNlcklkPV8udXNlcklkLHIuc3NsPV8uc3NsLHIuc2F2ZSgpLHRoaXMuX29BdXRoSGFzaD1udWxsLHQoXyk7fWVsc2Uge2NvbnN0IHI9KCk9Pnt1P2UuX3BlbmRpbmdEZmQ9dGhpcy5vQXV0aFNpZ25JbihlLnJlc1VybF8sZCxwLGUub3B0aW9uc18pLnRoZW4odCxzKTooZj1uZXcgcyR4KFwiaWRlbnRpdHktbWFuYWdlcjpub3QtYXV0aGVudGljYXRlZFwiLFwiVXNlciBpcyBub3Qgc2lnbmVkIGluLlwiKSxzKGYpKTt9O3RoaXMuX2RvUG9ydGFsU2lnbkluKGUucmVzVXJsXyk/ZS5fcGVuZGluZ0RmZD10aGlzLl9nZXRQbGF0Zm9ybVNlbGYoZC5zZXJ2ZXIscC5hcHBJZCkudGhlbigoKHtwb3J0YWxVcmw6ZSx0b2tlbjpzLHVzZXJuYW1lOml9KT0+eyFlfHxFJDQoZSx3aW5kb3cubG9jYXRpb24ub3JpZ2luLCEwKT8oXz1uZXcgcSh7c2VydmVyOmQuc2VydmVyLHVzZXJJZDppLHRva2VuOnN9KSx0KF8pKTpyKCk7fSkpLmNhdGNoKHIpOnIoKTt9fWVsc2UgaWYodSl7aWYodGhpcy5fY2hlY2tQcm90b2NvbChlLnJlc1VybF8sZCxzLGUuYWRtaW5fKSl7bGV0IHI9ZS5vcHRpb25zXztlLmFkbWluXyYmKHI9cnx8e30sci5pc0FkbWluPSEwKSxlLl9wZW5kaW5nRGZkPXRoaXMuc2lnbkluKGUucmVzVXJsXyxkLHIpLnRoZW4odCxzKTt9fWVsc2UgZj1uZXcgcyR4KFwiaWRlbnRpdHktbWFuYWdlcjpub3QtYXV0aGVudGljYXRlZFwiLFwiVXNlciBpcyBub3Qgc2lnbmVkIGluLlwiKSxzKGYpO30sbz0oKT0+e2NvbnN0IHI9ZS5zaW5mb18saT1yLm93bmluZ1N5c3RlbVVybCxvPWUub3B0aW9uc187bGV0IG4sYSxoLGw7aWYobyYmKG49by50b2tlbixhPW8uZXJyb3IsaD1vLnByb21wdCksbD10aGlzLl9maW5kQ3JlZGVudGlhbChpLHt0b2tlbjpuLHJlc291cmNlOmUucmVzVXJsX30pLCFsKWZvcihjb25zdCBlIG9mIHRoaXMuY3JlZGVudGlhbHMpaWYodGhpcy5faXNJZFByb3ZpZGVyKGksZS5zZXJ2ZXIpKXtsPWU7YnJlYWt9aWYobCl7Y29uc3QgaT10aGlzLmZpbmRDcmVkZW50aWFsKGUucmVzVXJsXyxsLnVzZXJJZCk7aWYoaSl0KGkpO2Vsc2UgaWYoUChyLHRoaXMuX2xlZ2FjeUZlZCkpe2NvbnN0IGU9bC50b0pTT04oKTtlLnNlcnZlcj1yLnNlcnZlcixlLnJlc291cmNlcz1udWxsLHQobmV3IHEoZSkpO31lbHNlIHsoZS5fcGVuZGluZ0RmZD10aGlzLmdlbmVyYXRlVG9rZW4odGhpcy5maW5kU2VydmVySW5mbyhsLnNlcnZlciksbnVsbCx7c2VydmVyVXJsOmUucmVzVXJsXyx0b2tlbjpsLnRva2VuLHNpZ25hbDplLm9wdGlvbnNfLnNpZ25hbCxzc2w6bC5zc2x9KSkudGhlbigocz0+e3QobmV3IHEoe3VzZXJJZDpsLnVzZXJJZCxzZXJ2ZXI6ci5zZXJ2ZXIsdG9rZW46cy50b2tlbixleHBpcmVzOm51bGwhPXMuZXhwaXJlcz9OdW1iZXIocy5leHBpcmVzKTpudWxsLHNzbDohIXMuc3NsLGlzQWRtaW46ZS5hZG1pbl8sdmFsaWRpdHk6cy52YWxpZGl0eX0pKTt9KSxzKTt9fWVsc2Uge3RoaXMuX2J1c3k9bnVsbCxuJiYoZS5vcHRpb25zXy50b2tlbj1udWxsKTsoZS5fcGVuZGluZ0RmZD10aGlzLmdldENyZWRlbnRpYWwoaS5yZXBsYWNlKC9cXC8/JC8sXCIvc2hhcmluZ1wiKSx7cmVzb3VyY2U6ZS5yZXNVcmxfLG93bmluZ1RlbmFudDpyLm93bmluZ1RlbmFudCxzaWduYWw6ZS5vcHRpb25zXy5zaWduYWwsdG9rZW46bixlcnJvcjphLHByb21wdDpofSkpLnRoZW4oKCgpPT57dGhpcy5fZW5xdWV1ZShlLnJlc1VybF8sZS5zaW5mb18sZS5vcHRpb25zXyxlLGUuYWRtaW5fKTt9KSwoZT0+e3MoZSk7fSkpO319O3RoaXMuX2VycmJhY2tGdW5jPXM7Y29uc3Qgbj1lLnNpbmZvXy5vd25pbmdTeXN0ZW1VcmwsaD10aGlzLl9pc1NlcnZlclJzcmMoZS5yZXNVcmxfKSxjPWUuc2luZm9fLl9yZXN0SW5mb1BtcztjP2MucHJvbWlzZS50aGVuKCh0PT57Y29uc3Qgcz1lLnNpbmZvXztpZihzLl9yZXN0SW5mb1Btcyl7cy5hZG1pblRva2VuU2VydmljZVVybD1zLl9yZXN0SW5mb1Btcy5hZG1pblVybCxzLl9yZXN0SW5mb1Btcz1udWxsLHMudG9rZW5TZXJ2aWNlVXJsPXQkTihcImF1dGhJbmZvLnRva2VuU2VydmljZXNVcmxcIix0KXx8dCROKFwiYXV0aEluZm8udG9rZW5TZXJ2aWNlVXJsXCIsdCl8fHQkTihcInRva2VuU2VydmljZVVybFwiLHQpLHMuc2hvcnRMaXZlZFRva2VuVmFsaWRpdHk9dCROKFwiYXV0aEluZm8uc2hvcnRMaXZlZFRva2VuVmFsaWRpdHlcIix0KSxzLmN1cnJlbnRWZXJzaW9uPXQuY3VycmVudFZlcnNpb24scy5vd25pbmdUZW5hbnQ9dC5vd25pbmdUZW5hbnQ7Y29uc3QgZT1zLm93bmluZ1N5c3RlbVVybD10Lm93bmluZ1N5c3RlbVVybDtlJiZ0aGlzLl9wb3J0YWxzLnB1c2goZSk7fWgmJnMub3duaW5nU3lzdGVtVXJsP28oKTppKCk7fSksKCgpPT57ZS5zaW5mb18uX3Jlc3RJbmZvUG1zPW51bGw7Y29uc3QgdD1uZXcgcyR4KFwiaWRlbnRpdHktbWFuYWdlcjpzZXJ2ZXItaWRlbnRpZmljYXRpb24tZmFpbGVkXCIsXCJVbmtub3duIHJlc291cmNlIC0gY291bGQgbm90IGZpbmQgdG9rZW4gc2VydmljZSBlbmRwb2ludC5cIik7cyh0KTt9KSk6aCYmbj9vKCk6ZS5zaW5mb18uX3NlbGZSZXE/ZS5zaW5mb18uX3NlbGZSZXEuc2VsZkRmZC50aGVuKCh0PT57Y29uc3Qgcz17fTtsZXQgcixpLG8sbjtyZXR1cm4gdCYmKHI9dC51c2VyJiZ0LnVzZXIudXNlcm5hbWUscy51c2VybmFtZT1yLHMuYWxsU1NMPXQuYWxsU1NMLGk9dC5zdXBwb3J0c09BdXRoLG89dC5jdXJyZW50VmVyc2lvbixcIm11bHRpdGVuYW50XCI9PT10LnBvcnRhbE1vZGUmJihuPXQuY3VzdG9tQmFzZVVybCkpLGUuc2luZm9fLndlYlRpZXJBdXRoPSEhcixyJiZ0aGlzLm5vcm1hbGl6ZVdlYlRpZXJBdXRoP3RoaXMuZ2VuZXJhdGVUb2tlbihlLnNpbmZvXyxudWxsLHtzc2w6cy5hbGxTU0x9KS5jYXRjaCgoKCk9Pm51bGwpKS50aGVuKChlPT4ocy5wb3J0YWxUb2tlbj1lJiZlLnRva2VuLHMudG9rZW5FeHBpcmF0aW9uPWUmJmUuZXhwaXJlcyxzKSkpOiFyJiZpJiZwYXJzZUZsb2F0KG8pPj00LjQmJiF0aGlzLl9maW5kT0F1dGhJbmZvKGUucmVzVXJsXyk/dGhpcy5fZ2VuZXJhdGVPQXV0aEluZm8oe3BvcnRhbFVybDplLnNpbmZvXy5zZXJ2ZXIsY3VzdG9tQmFzZVVybDpuLG93bmluZ1RlbmFudDplLnNpbmZvXy5fc2VsZlJlcS5vd25pbmdUZW5hbnR9KS5jYXRjaCgoKCk9Pm51bGwpKS50aGVuKCgoKT0+cykpOnN9KSkuY2F0Y2goKCgpPT5udWxsKSkudGhlbigodD0+e2Uuc2luZm9fLl9zZWxmUmVxPW51bGwsdD9pKHQudXNlcm5hbWUsdC5hbGxTU0wsdC5wb3J0YWxUb2tlbix0LnRva2VuRXhwaXJhdGlvbik6aSgpO30pKTppKCk7fV9nZW5lcmF0ZU9BdXRoSW5mbyhlKXtsZXQgdCxzLHI9ZS5wb3J0YWxVcmw7Y29uc3QgaT1lLmN1c3RvbUJhc2VVcmwsbz1lLm93bmluZ1RlbmFudCxuPSF0aGlzLmRlZmF1bHRPQXV0aEluZm8mJnRoaXMuX2NyZWF0ZURlZmF1bHRPQXV0aEluZm8mJiF0aGlzLl9oYXNUZXN0ZWRJZkFwcElzT25Qb3J0YWw7aWYobil7cz13aW5kb3cubG9jYXRpb24uaHJlZjtsZXQgZT1zLmluZGV4T2YoXCI/XCIpO2U+LTEmJihzPXMuc2xpY2UoMCxlKSksZT1zLnNlYXJjaCgvXFwvKGFwcHN8aG9tZSlcXC8vKSxzPWU+LTE/cy5zbGljZSgwLGUpOm51bGw7fXJldHVybiBuJiZzPyh0aGlzLl9oYXNUZXN0ZWRJZkFwcElzT25Qb3J0YWw9ITAsdD1VJDEocytcIi9zaGFyaW5nL3Jlc3RcIix7cXVlcnk6e2Y6XCJqc29uXCJ9fSkudGhlbigoKCk9Pnt0aGlzLmRlZmF1bHRPQXV0aEluZm89bmV3IGkkMSh7YXBwSWQ6XCJhcmNnaXNvbmxpbmVcIixwb3B1cENhbGxiYWNrVXJsOnMrXCIvaG9tZS9vYXV0aC1jYWxsYmFjay5odG1sXCJ9KTt9KSkpOnQ9UHJvbWlzZS5yZXNvbHZlKCksdC50aGVuKCgoKT0+e2lmKHRoaXMuZGVmYXVsdE9BdXRoSW5mbylyZXR1cm4gcj1yLnJlcGxhY2UoL15odHRwOi9pLFwiaHR0cHM6XCIpLFUkMShyK1wiL3NoYXJpbmcvcmVzdC9vYXV0aDIvdmFsaWRhdGVSZWRpcmVjdFVyaVwiLHtxdWVyeTp7YWNjb3VudElkOm8sY2xpZW50X2lkOnRoaXMuZGVmYXVsdE9BdXRoSW5mby5hcHBJZCxyZWRpcmVjdF91cmk6VCQ2KHRoaXMuZGVmYXVsdE9BdXRoSW5mby5wb3B1cENhbGxiYWNrVXJsKSxmOlwianNvblwifX0pLnRoZW4oKGU9PntpZihlLmRhdGEudmFsaWQpe2NvbnN0IHQ9dGhpcy5kZWZhdWx0T0F1dGhJbmZvLmNsb25lKCk7ZS5kYXRhLnVybEtleSYmaT90LnBvcnRhbFVybD1cImh0dHBzOi8vXCIrZS5kYXRhLnVybEtleS50b0xvd2VyQ2FzZSgpK1wiLlwiK2k6dC5wb3J0YWxVcmw9cix0LnBvcHVwPXdpbmRvdyE9PXdpbmRvdy50b3B8fCEoRSQ0KHIsd2luZG93LmxvY2F0aW9uLm9yaWdpbil8fHRoaXMuX2d3RG9tYWlucy5zb21lKChlPT5lLnJlZ2V4LnRlc3QocikmJmUucmVnZXgudGVzdCh3aW5kb3cubG9jYXRpb24ub3JpZ2luKSkpKSx0aGlzLm9BdXRoSW5mb3MucHVzaCh0KTt9fSkpfSkpfV9kb09BdXRoU2lnbkluKGUscyxyKXtjb25zdCBpPXtwb3J0YWxVcmw6ci5wb3J0YWxVcmx9OyFyLnBvcHVwJiZyLnByZXNlcnZlVXJsSGFzaCYmd2luZG93LmxvY2F0aW9uLmhhc2gmJihpLmhhc2g9d2luZG93LmxvY2F0aW9uLmhhc2gpO2NvbnN0IG89e2NsaWVudF9pZDpyLmFwcElkLHJlc3BvbnNlX3R5cGU6XCJ0b2tlblwiLHN0YXRlOkpTT04uc3RyaW5naWZ5KGkpLGV4cGlyYXRpb246ci5leHBpcmF0aW9uLGxvY2FsZTpyLmxvY2FsZSxyZWRpcmVjdF91cmk6ci5wb3B1cD9UJDYoci5wb3B1cENhbGxiYWNrVXJsKTp3aW5kb3cubG9jYXRpb24uaHJlZi5yZXBsYWNlKC8jLiokLyxcIlwiKX07ci5mb3JjZUxvZ2luJiYoby5mb3JjZV9sb2dpbj0hMCksci5mb3JjZVVzZXJJZCYmci51c2VySWQmJihvLnByZXBvcHVsYXRlZHVzZXJuYW1lPXIudXNlcklkKSwhci5wb3B1cCYmdGhpcy5fZG9Qb3J0YWxTaWduSW4oZSkmJihvLnJlZGlyZWN0VG9Vc2VyT3JnVXJsPSEwKTtjb25zdCBuPXIucG9ydGFsVXJsLnJlcGxhY2UoL15odHRwOi9pLFwiaHR0cHM6XCIpK1wiL3NoYXJpbmcvb2F1dGgyL2F1dGhvcml6ZVwiLGg9bitcIj9cIitDJDkobyk7aWYoci5wb3B1cCl7Y29uc3QgZT13aW5kb3cub3BlbihoLFwiZXNyaUpTQVBJT0F1dGhcIixyLnBvcHVwV2luZG93RmVhdHVyZXMpO2lmKGUpZS5mb2N1cygpLHRoaXMuX29BdXRoRGZkLm9BdXRoV2luXz1lLHRoaXMuX29BdXRoSW50ZXJ2YWxJZD1zZXRJbnRlcnZhbCgoKCk9PntpZihlLmNsb3NlZCl7Y2xlYXJJbnRlcnZhbCh0aGlzLl9vQXV0aEludGVydmFsSWQpLHRoaXMuX29BdXRoT25IYXNoSGFuZGxlLnJlbW92ZSgpO2NvbnN0IGU9dGhpcy5fb0F1dGhEZmQ7aWYoZSl7Y29uc3QgdD1uZXcgcyR4KFwiaWRlbnRpdHktbWFuYWdlcjp1c2VyLWFib3J0ZWRcIixcIkFCT1JURURcIik7ZS5yZWplY3QodCk7fX19KSw1MDApLHRoaXMuX29BdXRoT25IYXNoSGFuZGxlPXIkcihlJEwsXCJhcmNnaXM6YXV0aDpoYXNoXCIsKGU9Pnt0aGlzLnNldE9BdXRoUmVzcG9uc2VIYXNoKGUuZGV0YWlsKTt9KSk7ZWxzZSB7Y29uc3QgZT1uZXcgcyR4KFwiaWRlbnRpdHktbWFuYWdlcjpwb3B1cC1ibG9ja2VkXCIsXCJBQk9SVEVEXCIpO3RoaXMuX29BdXRoRGZkLnJlamVjdChlKTt9fWVsc2UgdGhpcy5fcmVqZWN0T25QZXJzaXN0ZWRQYWdlU2hvdz0hMCx0aGlzLl9vQXV0aFJlZGlyZWN0RnVuYz90aGlzLl9vQXV0aFJlZGlyZWN0RnVuYyh7YXV0aG9yaXplUGFyYW1zOm8sYXV0aG9yaXplVXJsOm4scmVzb3VyY2VVcmw6ZSxzZXJ2ZXJJbmZvOnMsb0F1dGhJbmZvOnJ9KTp3aW5kb3cubG9jYXRpb24uaHJlZj1oO319O2o9ZSR1KFtpJFgoXCJlc3JpLmlkZW50aXR5LklkZW50aXR5TWFuYWdlckJhc2VcIildLGopO2xldCBxPWNsYXNzIGV4dGVuZHMgbiRGLkV2ZW50ZWRBY2Nlc3Nvcntjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLl9vQXV0aENyZWQ9bnVsbCx0aGlzLnRva2VuUmVmcmVzaEJ1ZmZlcj0yLGUmJmUuX29BdXRoQ3JlZCYmKHRoaXMuX29BdXRoQ3JlZD1lLl9vQXV0aENyZWQpO31pbml0aWFsaXplKCl7dGhpcy5yZXNvdXJjZXM9dGhpcy5yZXNvdXJjZXN8fFtdLG51bGw9PXRoaXMuY3JlYXRpb25UaW1lJiYodGhpcy5jcmVhdGlvblRpbWU9RGF0ZS5ub3coKSk7fXJlZnJlc2hUb2tlbigpe2NvbnN0IGU9cyRyLmZpbmRTZXJ2ZXJJbmZvKHRoaXMuc2VydmVyKSx0PWUmJmUub3duaW5nU3lzdGVtVXJsLHM9ISF0JiZcInNlcnZlclwiPT09dGhpcy5zY29wZSxyPXMmJlAoZSxzJHIuX2xlZ2FjeUZlZCksaT1lLndlYlRpZXJBdXRoLG89aSYmcyRyLm5vcm1hbGl6ZVdlYlRpZXJBdXRoLG49Ult0aGlzLnNlcnZlcl0sYT1uJiZuW3RoaXMudXNlcklkXTtsZXQgaCxsPXRoaXMucmVzb3VyY2VzJiZ0aGlzLnJlc291cmNlc1swXSxjPXMmJnMkci5maW5kU2VydmVySW5mbyh0KSxkPXt1c2VybmFtZTp0aGlzLnVzZXJJZCxwYXNzd29yZDphfTtpZihpJiYhbylyZXR1cm47cyYmIWMmJnMkci5zZXJ2ZXJJbmZvcy5zb21lKChlPT4ocyRyLl9pc0lkUHJvdmlkZXIodCxlLnNlcnZlcikmJihjPWUpLCEhYykpKTtjb25zdCB1PWMmJnMkci5maW5kQ3JlZGVudGlhbChjLnNlcnZlcix0aGlzLnVzZXJJZCk7aWYoIXN8fHUpe2lmKCFyKXtpZihzKWg9e3NlcnZlclVybDpsLHRva2VuOnUmJnUudG9rZW4sc3NsOnUmJnUuc3NsfTtlbHNlIGlmKG8pZD1udWxsLGg9e3NzbDp0aGlzLnNzbH07ZWxzZSB7aWYoIWEpe2xldCB0O3JldHVybiBsJiYobD1zJHIuX3Nhbml0aXplVXJsKGwpLHRoaXMuX2VucXVldWVkPTEsdD1zJHIuX2VucXVldWUobCxlLG51bGwsbnVsbCx0aGlzLmlzQWRtaW4sdGhpcyksdC50aGVuKCgoKT0+e3RoaXMuX2VucXVldWVkPTAsdGhpcy5yZWZyZXNoU2VydmVyVG9rZW5zKCk7fSkpLmNhdGNoKCgoKT0+e3RoaXMuX2VucXVldWVkPTA7fSkpKSx0fXRoaXMuaXNBZG1pbiYmKGg9e2lzQWRtaW46ITB9KTt9cmV0dXJuIHMkci5nZW5lcmF0ZVRva2VuKHM/YzplLHM/bnVsbDpkLGgpLnRoZW4oKGU9Pnt0aGlzLnRva2VuPWUudG9rZW4sdGhpcy5leHBpcmVzPW51bGwhPWUuZXhwaXJlcz9OdW1iZXIoZS5leHBpcmVzKTpudWxsLHRoaXMuY3JlYXRpb25UaW1lPURhdGUubm93KCksdGhpcy52YWxpZGl0eT1lLnZhbGlkaXR5LHRoaXMuZW1pdFRva2VuQ2hhbmdlKCksdGhpcy5yZWZyZXNoU2VydmVyVG9rZW5zKCk7fSkpLmNhdGNoKCgoKT0+e30pKX11LnJlZnJlc2hUb2tlbigpO319cmVmcmVzaFNlcnZlclRva2Vucygpe1wicG9ydGFsXCI9PT10aGlzLnNjb3BlJiZzJHIuY3JlZGVudGlhbHMuZm9yRWFjaCgoZT0+e2NvbnN0IHQ9cyRyLmZpbmRTZXJ2ZXJJbmZvKGUuc2VydmVyKSxzPXQmJnQub3duaW5nU3lzdGVtVXJsO2UhPT10aGlzJiZlLnVzZXJJZD09PXRoaXMudXNlcklkJiZzJiZcInNlcnZlclwiPT09ZS5zY29wZSYmKHMkci5faGFzU2FtZVNlcnZlckluc3RhbmNlKHRoaXMuc2VydmVyLHMpfHxzJHIuX2lzSWRQcm92aWRlcihzLHRoaXMuc2VydmVyKSkmJihQKHQscyRyLl9sZWdhY3lGZWQpPyhlLnRva2VuPXRoaXMudG9rZW4sZS5leHBpcmVzPXRoaXMuZXhwaXJlcyxlLmNyZWF0aW9uVGltZT10aGlzLmNyZWF0aW9uVGltZSxlLnZhbGlkaXR5PXRoaXMudmFsaWRpdHksZS5lbWl0VG9rZW5DaGFuZ2UoKSk6ZS5yZWZyZXNoVG9rZW4oKSk7fSkpO31lbWl0VG9rZW5DaGFuZ2UoZSl7Y2xlYXJUaW1lb3V0KHRoaXMuX3JlZnJlc2hUaW1lcik7Y29uc3QgdD10aGlzLnNlcnZlciYmcyRyLmZpbmRTZXJ2ZXJJbmZvKHRoaXMuc2VydmVyKSxzPXQmJnQub3duaW5nU3lzdGVtVXJsLHI9cyYmcyRyLmZpbmRTZXJ2ZXJJbmZvKHMpOyExPT09ZXx8cyYmXCJwb3J0YWxcIiE9PXRoaXMuc2NvcGUmJighcnx8IXIud2ViVGllckF1dGh8fHMkci5ub3JtYWxpemVXZWJUaWVyQXV0aCl8fG51bGw9PXRoaXMuZXhwaXJlcyYmbnVsbD09dGhpcy52YWxpZGl0eXx8dGhpcy5fc3RhcnRSZWZyZXNoVGltZXIoKSx0aGlzLmVtaXQoXCJ0b2tlbi1jaGFuZ2VcIik7fWRlc3Ryb3koKXt0aGlzLnVzZXJJZD10aGlzLnNlcnZlcj10aGlzLnRva2VuPXRoaXMuZXhwaXJlcz10aGlzLnZhbGlkaXR5PXRoaXMucmVzb3VyY2VzPXRoaXMuY3JlYXRpb25UaW1lPW51bGwsdGhpcy5fb0F1dGhDcmVkJiYodGhpcy5fb0F1dGhDcmVkLmRlc3Ryb3koKSx0aGlzLl9vQXV0aENyZWQ9bnVsbCk7Y29uc3QgZT1zJHIuY3JlZGVudGlhbHMuaW5kZXhPZih0aGlzKTtlPi0xJiZzJHIuY3JlZGVudGlhbHMuc3BsaWNlKGUsMSksdGhpcy5lbWl0VG9rZW5DaGFuZ2UoKSx0aGlzLmVtaXQoXCJkZXN0cm95XCIpO310b0pTT04oKXtjb25zdCBlPXAkMTgoe3VzZXJJZDp0aGlzLnVzZXJJZCxzZXJ2ZXI6dGhpcy5zZXJ2ZXIsdG9rZW46dGhpcy50b2tlbixleHBpcmVzOnRoaXMuZXhwaXJlcyx2YWxpZGl0eTp0aGlzLnZhbGlkaXR5LHNzbDp0aGlzLnNzbCxpc0FkbWluOnRoaXMuaXNBZG1pbixjcmVhdGlvblRpbWU6dGhpcy5jcmVhdGlvblRpbWUsc2NvcGU6dGhpcy5zY29wZX0pLHQ9dGhpcy5yZXNvdXJjZXM7cmV0dXJuIHQmJnQubGVuZ3RoPjAmJihlLnJlc291cmNlcz10LnNsaWNlKCkpLGV9X3N0YXJ0UmVmcmVzaFRpbWVyKCl7Y2xlYXJUaW1lb3V0KHRoaXMuX3JlZnJlc2hUaW1lcik7Y29uc3QgZT02ZTQqdGhpcy50b2tlblJlZnJlc2hCdWZmZXIsdD0yKiozMS0xO2xldCBzPSh0aGlzLnZhbGlkaXR5P3RoaXMuY3JlYXRpb25UaW1lKzZlNCp0aGlzLnZhbGlkaXR5OnRoaXMuZXhwaXJlcyktRGF0ZS5ub3coKTtzPDA/cz0wOnM+dCYmKHM9dCksdGhpcy5fcmVmcmVzaFRpbWVyPXNldFRpbWVvdXQodGhpcy5yZWZyZXNoVG9rZW4uYmluZCh0aGlzKSxzPmU/cy1lOnMpO319O2UkdShbeSRyKCldLHEucHJvdG90eXBlLFwiY3JlYXRpb25UaW1lXCIsdm9pZCAwKSxlJHUoW3kkcigpXSxxLnByb3RvdHlwZSxcImV4cGlyZXNcIix2b2lkIDApLGUkdShbeSRyKCldLHEucHJvdG90eXBlLFwiaXNBZG1pblwiLHZvaWQgMCksZSR1KFt5JHIoKV0scS5wcm90b3R5cGUsXCJvQXV0aFN0YXRlXCIsdm9pZCAwKSxlJHUoW3kkcigpXSxxLnByb3RvdHlwZSxcInJlc291cmNlc1wiLHZvaWQgMCksZSR1KFt5JHIoKV0scS5wcm90b3R5cGUsXCJzY29wZVwiLHZvaWQgMCksZSR1KFt5JHIoKV0scS5wcm90b3R5cGUsXCJzZXJ2ZXJcIix2b2lkIDApLGUkdShbeSRyKCldLHEucHJvdG90eXBlLFwic3NsXCIsdm9pZCAwKSxlJHUoW3kkcigpXSxxLnByb3RvdHlwZSxcInRva2VuXCIsdm9pZCAwKSxlJHUoW3kkcigpXSxxLnByb3RvdHlwZSxcInRva2VuUmVmcmVzaEJ1ZmZlclwiLHZvaWQgMCksZSR1KFt5JHIoKV0scS5wcm90b3R5cGUsXCJ1c2VySWRcIix2b2lkIDApLGUkdShbeSRyKCldLHEucHJvdG90eXBlLFwidmFsaWRpdHlcIix2b2lkIDApLHE9ZSR1KFtpJFgoXCJlc3JpLmlkZW50aXR5LkNyZWRlbnRpYWxcIildLHEpO1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xubGV0IG89Y2xhc3MgZXh0ZW5kcyBqe307bz1lJHUoW2kkWChcImVzcmkuaWRlbnRpdHkuSWRlbnRpdHlNYW5hZ2VyXCIpXSxvKTtjb25zdCBhPW5ldyBvO24kRShhKTtcblxuY29uc3QgSWRlbnRpdHlNYW5hZ2VyID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe1xuICAgIF9fcHJvdG9fXzogbnVsbCxcbiAgICAnZGVmYXVsdCc6IGFcbn0pO1xuXG5jb25zdCBhbWQgPSBcImRlZmluZVwiIGluIHdpbmRvdyAmJiB0eXBlb2Ygd2luZG93LmRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBcImFtZFwiIGluIHdpbmRvdy5kZWZpbmU7XHJcbmZ1bmN0aW9uIGludm9rZVRhc2tNZXRob2QodGFzaywgdXJsLCBjcmVhdGVQYXJhbXMsIHJlYWRSZXNwb25zZSkge1xyXG4gIGNvbnN0IF9kZWZlcnJlZCA9IGNyZWF0ZURlZmVycmVkKCk7XHJcbiAgZnVuY3Rpb24gb25Db21wbGV0ZShyZXNwb25zZSkge1xyXG4gICAgbGV0IHJlc3VsdDtcclxuICAgIHRyeSB7XHJcbiAgICAgIHJlc3VsdCA9IHJlYWRSZXNwb25zZShyZXNwb25zZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICBvbkVycm9yKGUpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBfZGVmZXJyZWQucmVzb2x2ZShyZXN1bHQpO1xyXG4gIH1cclxuICBmdW5jdGlvbiBvbkVycm9yKGVycm9yKSB7XHJcbiAgICBfZGVmZXJyZWQucmVqZWN0KGVycm9yKTtcclxuICB9XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlc3RQYXJhbXMgPSBjcmVhdGVQYXJhbXMgPyBjcmVhdGVQYXJhbXMoKSA6IHt9O1xyXG4gICAgcmVzdFBhcmFtcy5mID0gcmVzdFBhcmFtcy5mIHx8IFwianNvblwiO1xyXG4gICAgZ2V0Q3JlZGVudGlhbCh0YXNrLnVybCkudGhlbigoY3JlZGVudGlhbCkgPT4ge1xyXG4gICAgICBpZiAoY3JlZGVudGlhbCA9PT0gbnVsbCB8fCBjcmVkZW50aWFsID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjcmVkZW50aWFsLnRva2VuKSB7XHJcbiAgICAgICAgcmVzdFBhcmFtcy50b2tlbiA9IGNyZWRlbnRpYWwudG9rZW47XHJcbiAgICAgIH1cclxuICAgICAgVSQxKHRhc2sudXJsICsgdXJsLCB7XHJcbiAgICAgICAgcXVlcnk6IHJlc3RQYXJhbXMsXHJcbiAgICAgICAgcmVzcG9uc2VUeXBlOiBcImpzb25cIlxyXG4gICAgICB9KS50aGVuKG9uQ29tcGxldGUsIG9uRXJyb3IpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGNhdGNoIChlKSB7XHJcbiAgICBvbkVycm9yKGUpO1xyXG4gIH1cclxuICByZXR1cm4gX2RlZmVycmVkLnByb21pc2U7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gcmVxdWlyZU1vZHVsZShtb2R1bGVQYXRoKSB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB3aW5kb3cucmVxdWlyZShbbW9kdWxlUGF0aF0sIChtb2R1bGVEZWZhdWx0KSA9PiB7XHJcbiAgICByZXNvbHZlKG1vZHVsZURlZmF1bHQpO1xyXG4gIH0pKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBnZXRJZGVudGl0eU1hbmFnZXIoKSB7XHJcbiAgcmV0dXJuIHJlcXVpcmVNb2R1bGUoXCJlc3JpL2lkZW50aXR5L0lkZW50aXR5TWFuYWdlclwiKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBnZXRDcmVkZW50aWFsKHVybCkge1xyXG4gIGlmIChhbWQpIHtcclxuICAgIGNvbnN0IGFtZElkZW50aXR5TWFuYWdlciA9IGF3YWl0IGdldElkZW50aXR5TWFuYWdlcigpO1xyXG4gICAgY29uc3QgY3JlZGVudGlhbCA9IGF3YWl0IGFtZElkZW50aXR5TWFuYWdlci5nZXRDcmVkZW50aWFsKHVybCwgeyBvQXV0aFBvcHVwQ29uZmlybWF0aW9uOiBmYWxzZSB9KTtcclxuICAgIHJldHVybiBjcmVkZW50aWFsO1xyXG4gIH1cclxuICBlbHNlIHtcclxuICAgIGNvbnN0IGNyZWRlbnRpYWwgPSBhd2FpdCBhLmdldENyZWRlbnRpYWwodXJsLCB7IG9BdXRoUG9wdXBDb25maXJtYXRpb246IGZhbHNlIH0pO1xyXG4gICAgcmV0dXJuIGNyZWRlbnRpYWw7XHJcbiAgfVxyXG59XHJcbi8qKlxyXG4gKiBDb3BpZXMgdGhlIGpzb24gb2JqZWN0IGludG8gdGhlIG9wdGlvbmFsIHJlc3Qgb2JqZWN0LlxyXG4gKiBAcGFyYW0ganNvbiBPYmplY3QgdG8gY29weS5cclxuICogQHBhcmFtIHJlc3QgRGVmYXVsdCAncmVzdCcgcGFyYW1ldGVyLlxyXG4gKi9cclxuZnVuY3Rpb24ganNvblRvUmVzdChqc29uLCByZXN0KSB7XHJcbiAgcmVzdCA9IE9iamVjdC5hc3NpZ24oe30sIHJlc3QpO1xyXG4gIGZvciAoY29uc3QgcCBpbiBqc29uKSB7XHJcbiAgICBpZiAodHlwZW9mIGpzb25bcF0gPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgcmVzdFtwXSA9IGpzb25bcF07XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgY29uc3QgdmFsdWUgPSBqc29uW3BdO1xyXG4gICAgICByZXN0W3BdID0gSlNPTi5zdHJpbmdpZnkoZW5zdXJlU2VyaWFsaXplZCh2YWx1ZSkpO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gcmVzdDtcclxufVxyXG5mdW5jdGlvbiBlbnN1cmVTZXJpYWxpemVkKG9iamVjdCkge1xyXG4gIHJldHVybiB0eXBlb2Ygb2JqZWN0LnRvSlNPTiA9PT0gXCJmdW5jdGlvblwiID8gb2JqZWN0LnRvSlNPTigpIDogb2JqZWN0O1xyXG59XHJcbmZ1bmN0aW9uIHRocm93RW1wdHlUYXNrUmVzcG9uc2UoKSB7XHJcbiAgdGhyb3cgbmV3IEVycm9yKFwiR2VvZW5yaWNobWVudCBzZXJ2aWNlIHJldHVybmVkIGVtcHR5IHJlc3BvbnNlXCIpO1xyXG59XG5cbi8qKlxyXG4gKiBFeGVjdXRlcyBHZW9lbnJpY2htZW50IG1ldGhvZHMuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRDZW50ZXIoZ2VvbWV0cnkpIHtcclxuICBjb25zdCBleHRlbnQgPSBnZW9tZXRyeS5leHRlbnQ7XHJcbiAgcmV0dXJuIG5ldyBqJGIoe1xyXG4gICAgeDogKGV4dGVudC54bWluICsgZXh0ZW50LnhtYXgpIC8gMixcclxuICAgIHk6IChleHRlbnQueW1pbiArIGV4dGVudC55bWF4KSAvIDIsXHJcbiAgICBzcGF0aWFsUmVmZXJlbmNlOiBleHRlbnQuc3BhdGlhbFJlZmVyZW5jZVxyXG4gIH0pO1xyXG59XHJcbmNsYXNzIEdlb2VucmljaG1lbnRUYXNrIHtcclxuICBjb25zdHJ1Y3Rvcih1cmwsIHRva2VuKSB7XHJcbiAgICAvLyBUaGUgdXJsIHBhcmFtZXRlciBjYW4gY29udGFpbiBzdGF0aWMgcXVlcnkgcGFyYW1ldGVycyBzdWNoIGFzIGFwcElELCBsYW5nQ29kZS5cclxuICAgIC8vIFdlIGV4dHJhY3QgdGhlc2UgcGFyYW1ldGVycyBmcm9tIHRoZSBVUkwgYW5kIHBhc3MgdGhlbSBsYXRlciBpbiBhbGwgcmVxdWVzdHMgdG8gR2VvZW5yaWNobWVudCBzZXJ2ZXIuXHJcbiAgICBpZiAodXJsKSB7XHJcbiAgICAgIGNvbnN0IHVybE9iaiA9IFUkNCh1cmwpO1xyXG4gICAgICB1cmwgPSB1cmxPYmoucGF0aDtcclxuICAgICAgdGhpcy5fcXVlcnkgPSBtaXhpbih7XHJcbiAgICAgICAgbGFuZ0NvZGU6IGMkMTUoKVxyXG4gICAgICB9LCB1cmxPYmoucXVlcnkgfHwge30pO1xyXG4gICAgICAvLyBhbHdheXMgcGFzcyB0b2tlbiB0byB0aGUgR2VvZW5yaWNobWVudCBzZXJ2ZXJcclxuICAgICAgaWYgKHRva2VuKSB7XHJcbiAgICAgICAgdGhpcy5fcXVlcnkudG9rZW4gPSB0b2tlbjtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgcHJvdG9jb2wgPSBcImh0dHBzOlwiOyAvLyBhbHdheXMgSFRUUFNcclxuICAgIHRoaXMudXJsID0gdXJsIHx8IHByb3RvY29sICsgXCIvL2dlb2VucmljaC5hcmNnaXMuY29tL2FyY2dpcy9yZXN0L3NlcnZpY2VzL1dvcmxkL0dlb2VucmljaG1lbnRTZXJ2ZXJcIjtcclxuICAgIHRoaXMudG9rZW4gPSB0b2tlbjtcclxuICB9XHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vXHJcbiAgLy8gRW5yaWNoXHJcbiAgLy9cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLyoqXHJcbiAgICogQ2FsY3VsYXRlcyBjb250ZXh0dWFsIGRhdGEgc3VjaCBhcyBkZW1vZ3JhcGhpYyBjaGFyYWN0ZXJpc3RpY3MgYWJvdXQgaW5wdXQgc3R1ZHkgYXJlYXNcclxuICAgKiBAcGFyYW0gcGFyYW1zIEVucmljaFBhcmFtZXRlcnMuIFBhcmFtZXRlcnMgZm9yIHRoZSBlbnJpY2ggb3BlcmF0aW9uLiBTZWUgRW5yaWNoUGFyYW1ldGVycyBjbGFzcyBmb3IgZnVsbCBsaXN0IG9mIGF2YWlsYWJsZSBwYXJhbWV0ZXJzLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMgUHJvbWlzZSA9PiB7IGZlYXR1cmVTZXRzOiBbXSBvZiBGZWF0dXJlU2V0LCBtZXNzYWdlOiBzdHJpbmcgfS5cclxuICAgKlxyXG4gICAqIEBleGFtcGxlXHJcbiAgICpcclxuICAgKiB2YXIgdGFzayA9IG5ldyBHZW9lbnJpY2htZW50VGFzaygpO1xyXG4gICAqICAgICB0YXNrLmVucmljaCh7XHJcbiAgICogICAgICAgICBzdHVkeUFyZWFzOiBbeyBnZW9tZXRyeTogeyB4OiAtMTE3LjE5NTYsIHk6IDM0LjA1NzIgfSB9XSxcclxuICAgKiAgICAgICAgIHN0dWR5QXJlYU9wdGlvbnM6IG5ldyBEcml2ZUJ1ZmZlcih7IHJhZGlpOiBbNSwgMTAsIDE1XSB9KSwgLy8gbWludXRlcyBieSBkZWZhdWx0XHJcbiAgICogICAgICAgICB2YXJpYWJsZXM6IFtcIldlYWx0aC5NRUROV19DWVwiLCBcIktleVVTRmFjdHMuKlwiXVxyXG4gICAqICAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc3VsdCkge1xyXG4gICAqICAgICAgICAgLy8gcHJvY2VzcyByZXN1bHQgaGVyZVxyXG4gICAqICAgICB9LCBmdW5jdGlvbihlcnJvcikge1xyXG4gICAqICAgICAgICAgLy8gaGFuZGxlIGVycm9yIGhlcmVcclxuICAgKiAgICAgfSk7XHJcbiAgICovXHJcbiAgZW5yaWNoKHBhcmFtcykge1xyXG4gICAgcmV0dXJuIGludm9rZVRhc2tNZXRob2QodGhpcywgXCIvR2VvZW5yaWNobWVudC9lbnJpY2hcIiwgKCkgPT4ganNvblRvUmVzdChwYXJhbXMgaW5zdGFuY2VvZiBFbnJpY2hQYXJhbWV0ZXJzID8gcGFyYW1zLnRvSlNPTigpIDogbmV3IEVucmljaFBhcmFtZXRlcnMocGFyYW1zKS50b0pTT04oKSwgdGhpcy5fcXVlcnkpLCAocmVzcG9uc2UpID0+IHtcclxuICAgICAgY29uc3QgZGF0YSA9IHJlc3BvbnNlLmRhdGE7XHJcbiAgICAgIGlmICghZGF0YS5yZXN1bHRzIHx8XHJcbiAgICAgICAgZGF0YS5yZXN1bHRzLmxlbmd0aCA8IDEgfHxcclxuICAgICAgICAhZGF0YS5yZXN1bHRzWzBdLnZhbHVlIHx8XHJcbiAgICAgICAgIWRhdGEucmVzdWx0c1swXS52YWx1ZS5GZWF0dXJlU2V0IHx8XHJcbiAgICAgICAgZGF0YS5yZXN1bHRzWzBdLnZhbHVlLkZlYXR1cmVTZXQubGVuZ3RoIDwgMSkge1xyXG4gICAgICAgIHRocm93RW1wdHlUYXNrUmVzcG9uc2UoKTtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCByZXN1bHQgPSB7XHJcbiAgICAgICAgZmVhdHVyZVNldHM6IFtdLFxyXG4gICAgICAgIG1lc3NhZ2VzOiBkYXRhLm1lc3NhZ2VzXHJcbiAgICAgIH07XHJcbiAgICAgIGNvbnN0IGZlYXR1cmVTZXRzID0gZGF0YS5yZXN1bHRzWzBdLnZhbHVlLkZlYXR1cmVTZXQ7XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmVhdHVyZVNldHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICByZXN1bHQuZmVhdHVyZVNldHMucHVzaChuZXcgR0VGZWF0dXJlU2V0KGZlYXR1cmVTZXRzW2ldKSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH0pO1xyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyBEYXRhIGNvbGxlY3Rpb25zXHJcbiAgLy9cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLyoqXHJcbiAgICogR2V0cyB0aGUgbGlzdCBvZiBhdmFpbGFibGUgZGF0YSBjb2xsZWN0aW9ucy4gRWFjaCBkYXRhIGNvbGxlY3Rpb24gY29uc2lzdHMgb2YgYSBzZXQgb2YgdmFyaWFibGVzLlxyXG4gICAqIEBwYXJhbSBjb3VudHJ5SUQgU3RyaW5nLiBPcHRpb25hbC4gVHdvLWRpZ2l0IGNvZGUgb2YgY291bnRyeSBvZiBpbnRlcmVzdC4gSWYgbm90IHByb3ZpZGVkLCB0aGUgbWV0aG9kIHdpbGwgb25seSByZXR1cm4gdGhvc2UgZGF0YSBjb2xsZWN0aW9ucyB0aGF0IHNwYW4gdGhlIHdob2xlIHdvcmxkLlxyXG4gICAqIEBwYXJhbSBkYXRhQ29sbGVjdGlvbklEIFN0cmluZy4gT3B0aW9uYWwuIFVzZWZ1bCB0byBnZXQgaW5mb3JtYXRpb24gYWJvdXQgb25lIHNwZWNpZmljIGRhdGEgY29sbGVjdGlvbi5cclxuICAgKiBAcGFyYW0gb3V0RmllbGRzIFN0cmluZ1tdIHwgXCIqXCIuIE9wdGlvbmFsLiBMaXN0IG9mIG1ldGFkYXRhIGZpZWxkcyB0byByZXR1cm4gZm9yIGVhY2ggdmFyaWFibGUuIFVzZWZ1bCB0byBvcHRpbWl6ZSByZXNwb25zZSBzaXplLiBJZiBub3QgcHJvdmlkZWQsIHRoZSBtZXRob2Qgd2lsbCByZXR1cm4gYWxsIG1ldGFkYXRhIGZpZWxkcy5cclxuICAgKiBAcGFyYW0gZGVyaXZhdGl2ZVZhcmlhYmxlc1RvQWRkIFN0cmluZ1tdLiBPcHRpb25hbC4gQXJyYXkgb2YgZGVyaXZhdGl2ZSB2YXJpYWJsZSB0eXBlcyB0byBiZSBhZGRlZCB0byByZXF1ZXN0ZWQgZGF0YSBjb2xsZWN0aW9ucy4gSXQgY291bGQgY29udGFpbiB0aGUgZm9sbG93aW5nIHZhbHVlczpcclxuICAgKiAgLSBcInBlcmNlbnRcIiBBZGQgZGVyaXZhdGl2ZSB2YXJpYWJsZXMgcHJvdmlkaW5nIGEgcGVyY2VudGFnZSB2YWx1ZS5cclxuICAgKiAgLSBcImF2ZXJhZ2VcIiBBZGQgZGVyaXZhdGl2ZSB2YXJpYWJsZXMgcHJvdmlkaW5nIGFuIGF2ZXJhZ2UgdmFsdWUuXHJcbiAgICogIC0gXCJpbmRleFwiICAgQWRkIGRlcml2YXRpdmUgdmFyaWFibGVzIHByb3ZpZGluZyBhbiBpbmRleCB2YWx1ZS5cclxuICAgKiAgLSBcImFsbFwiICAgICBBZGQgYWxsIGRlcml2YXRpdmUgdmFyaWFibGVzLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMgUHJvbWlzZSA9PiBbXSBvZiBkYXRhIGNvbGxlY3Rpb25zLlxyXG4gICAqXHJcbiAgICogQGV4YW1wbGVcclxuICAgKiB2YXIgdGFzayA9IG5ldyBHZW9lbnJpY2htZW50VGFzaygpO1xyXG4gICAqICAgICB0YXNrLmdldERhdGFDb2xsZWN0aW9ucyhcIkdCXCIpLnRoZW4oZnVuY3Rpb24oZGF0YUNvbGxlY3Rpb25zKSB7XHJcbiAgICogICAgICAgICAvLyBwcm9jZXNzIHJlc3VsdCBoZXJlXHJcbiAgICogICAgIH0sIGZ1bmN0aW9uKGVycm9yKSB7XHJcbiAgICogICAgICAgICAvLyBoYW5kbGUgZXJyb3IgaGVyZVxyXG4gICAqICAgICB9KTtcclxuICAgKi9cclxuICBnZXREYXRhQ29sbGVjdGlvbnMoY291bnRyeUlELCBkYXRhQ29sbGVjdGlvbklELCBvdXRGaWVsZHMsIGRlcml2YXRpdmVWYXJpYWJsZXNUb0FkZCkge1xyXG4gICAgbGV0IHVybDtcclxuICAgIGlmIChkYXRhQ29sbGVjdGlvbklEKSB7XHJcbiAgICAgIHVybCA9IFwiL0dldERhdGFDb2xsZWN0aW9ucy9leGVjdXRlXCI7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgdXJsID0gXCIvR2VvZW5yaWNobWVudC9EYXRhQ29sbGVjdGlvbnNcIjtcclxuICAgICAgaWYgKGNvdW50cnlJRCkge1xyXG4gICAgICAgIHVybCArPSBcIi9cIiArIGNvdW50cnlJRDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGludm9rZVRhc2tNZXRob2QodGhpcywgdXJsLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3RQYXJhbXMgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLl9xdWVyeSk7XHJcbiAgICAgIHJlc3RQYXJhbXMuc3VwcHJlc3NOdWxsVmFsdWVzID0gdHJ1ZTtcclxuICAgICAgaWYgKG91dEZpZWxkcykge1xyXG4gICAgICAgIGlmIChvdXRGaWVsZHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICByZXN0UGFyYW1zLm91dEZpZWxkcyA9IFwibm9uZVwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIHJlc3RQYXJhbXMub3V0RmllbGRzID0gSlNPTi5zdHJpbmdpZnkob3V0RmllbGRzKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGRhdGFDb2xsZWN0aW9uSUQpIHtcclxuICAgICAgICBpZiAoY291bnRyeUlEKSB7XHJcbiAgICAgICAgICByZXN0UGFyYW1zLnNvdXJjZWNvdW50cnkgPSBjb3VudHJ5SUQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJlc3RQYXJhbXMuc2VhcmNodGV4dCA9IFwiaWQ6XCIgKyBkYXRhQ29sbGVjdGlvbklEO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChkZXJpdmF0aXZlVmFyaWFibGVzVG9BZGQpIHtcclxuICAgICAgICByZXN0UGFyYW1zLmFkZERlcml2YXRpdmVWYXJpYWJsZXMgPSBKU09OLnN0cmluZ2lmeShkZXJpdmF0aXZlVmFyaWFibGVzVG9BZGQpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiByZXN0UGFyYW1zO1xyXG4gICAgfSwgKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgIGNvbnN0IGRhdGEgPSByZXNwb25zZS5kYXRhO1xyXG4gICAgICBpZiAoZGF0YS5lcnJvcikge1xyXG4gICAgICAgIHRocm93IGRhdGEuZXJyb3I7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGRhdGEucmVzdWx0cyB8fCBkYXRhLmRhdGFDb2xsZWN0aW9ucyB8fCBkYXRhLkRhdGFDb2xsZWN0aW9ucztcclxuICAgIH0pO1xyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyBSZXBvcnRzXHJcbiAgLy9cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLyoqXHJcbiAgICogR2V0cyB0aGUgbGlzdCBvZiByZXBvcnRzIGF2YWlsYWJsZSBmb3Igc3BlY2lmaWVkIGNvdW50cnlcclxuICAgKiBAcGFyYW0gY291bnRyeUlEIFN0cmluZy4gUmVxdWlyZWQuIFR3by1kaWdpdCBjb2RlIG9mIGNvdW50cnkgb2YgaW50ZXJlc3QuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyBQcm9taXNlID0+IFtdIG9mIHJlcG9ydHMuXHJcbiAgICovXHJcbiAgZ2V0UmVwb3J0cyhjb3VudHJ5SUQpIHtcclxuICAgIHJldHVybiBpbnZva2VUYXNrTWV0aG9kKHRoaXMsIFwiL0dlb2VucmljaG1lbnQvUmVwb3J0cy9cIiArIGNvdW50cnlJRCwgKCkgPT4gKE9iamVjdC5hc3NpZ24oe30sIHRoaXMuX3F1ZXJ5KSksIChyZXNwb25zZSkgPT4gcmVzcG9uc2UuZGF0YS5yZXBvcnRzKTtcclxuICB9XHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vXHJcbiAgLy8gQ291bnRyaWVzXHJcbiAgLy9cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLyoqXHJcbiAgICogR2V0cyB0aGUgbGlzdCBvZiBtYW55IGNvdW50cmllcyBHZW9lbnJpY2htZW50IGhhcyBkYXRhIGZvci5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIFByb21pc2UgPT4gW10gb2YgY291bnRyaWVzLlxyXG4gICAqL1xyXG4gIGdldEF2YWlsYWJsZUNvdW50cmllcygpIHtcclxuICAgIHJldHVybiBpbnZva2VUYXNrTWV0aG9kKHRoaXMsIFwiL0dlb2VucmljaG1lbnQvQ291bnRyaWVzXCIsICgpID0+IChPYmplY3QuYXNzaWduKHt9LCB0aGlzLl9xdWVyeSkpLCAocmVzcG9uc2UpID0+IHtcclxuICAgICAgY29uc3QgZGF0YSA9IHJlc3BvbnNlLmRhdGE7XHJcbiAgICAgIGlmIChkYXRhLmVycm9yKSB7XHJcbiAgICAgICAgdGhyb3cgZGF0YS5lcnJvcjtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZGF0YS5jb3VudHJpZXM7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogRGV0ZXJtaW5lcyBjb3VudHJ5IHRoZSBnaXZlbiBnZW9tZXRyeSBiZWxvbmdzIHRvLlxyXG4gICAqIEBwYXJhbSBnZW9tZXRyeSBHZW9tZXRyeS5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIEEgcHJvbWlzZSBvZiBhcnJheSBvZiBjb3VudHJpZXMuIFRoZSBmaXJzdCBpdGVtIGluIHRoaXMgYXJyYXkgdGhlIHRoZSBjb3VudHJ5IG9mIGludGVyZXN0LlxyXG4gICAqL1xyXG4gIGdldENvdW50cmllcyhnZW9tZXRyeSkge1xyXG4gICAgbGV0IGNlbnRlcjtcclxuICAgIHN3aXRjaCAoZ2VvbWV0cnkudHlwZSkge1xyXG4gICAgICBjYXNlIFwicG9pbnRcIjpcclxuICAgICAgICBjZW50ZXIgPSBnZW9tZXRyeTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcInBvbHlsaW5lXCI6XHJcbiAgICAgICAgLy9cclxuICAgICAgICAvL1BpY2sgb25lIHNlZ21lbnQgZnJvbSB0aGUgZ2VvbWV0cnkgYW5kIG9idGFpbiBpdHMgY2VudGVyXHJcbiAgICAgICAgLy9cclxuICAgICAgICBjb25zdCBwYXRoID0gZ2VvbWV0cnkucGF0aHNbMF07XHJcbiAgICAgICAgY29uc3QgcG9seWxpbmUgPSBuZXcgbSRtKHtcclxuICAgICAgICAgIHNwYXRpYWxSZWZlcmVuY2U6IGdlb21ldHJ5LnNwYXRpYWxSZWZlcmVuY2VcclxuICAgICAgICB9KTtcclxuICAgICAgICBwb2x5bGluZS5hZGRQYXRoKHBhdGgpO1xyXG4gICAgICAgIGNlbnRlciA9IGdldENlbnRlcihwb2x5bGluZSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJwb2x5Z29uXCI6XHJcbiAgICAgICAgLy9cclxuICAgICAgICAvL1BpY2sgb25lIHJpbmcgZnJvbSB0aGUgZ2VvbWV0cnkgYW5kIG9idGFpbiBpdHMgY2VudGVyXHJcbiAgICAgICAgLy9cclxuICAgICAgICBjb25zdCByaW5nID0gZ2VvbWV0cnkucmluZ3NbMF07XHJcbiAgICAgICAgY29uc3QgcG9seWdvbiA9IG5ldyB4JDQoe1xyXG4gICAgICAgICAgc3BhdGlhbFJlZmVyZW5jZTogZ2VvbWV0cnkuc3BhdGlhbFJlZmVyZW5jZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHBvbHlnb24uYWRkUmluZyhyaW5nKTtcclxuICAgICAgICBjZW50ZXIgPSBnZXRDZW50ZXIocG9seWdvbik7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5lbnJpY2gobmV3IEVucmljaFBhcmFtZXRlcnMoe1xyXG4gICAgICBhbmFseXNpc1ZhcmlhYmxlczogW1wiR2xvYmFsSW50ZXJzZWN0LipcIl0sXHJcbiAgICAgIHN0dWR5QXJlYXM6IFt7IGdlb21ldHJ5OiBjZW50ZXIgfV0sXHJcbiAgICAgIGZvclN0b3JhZ2U6IGZhbHNlXHJcbiAgICB9KSkudGhlbigoZW5yaWNoUmVzdWx0KSA9PiB7XHJcbiAgICAgIGNvbnN0IGNvdW50cmllcyA9IFtdO1xyXG4gICAgICBjb25zdCBmZWF0dXJlcyA9IGVucmljaFJlc3VsdC5mZWF0dXJlU2V0c1swXS5mZWF0dXJlcztcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmZWF0dXJlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IGNvdW50cnlJRCA9IGZlYXR1cmVzW2ldLmF0dHJpYnV0ZXMuc291cmNlQ291bnRyeTtcclxuICAgICAgICBpZiAoY291bnRyaWVzLmluZGV4T2YoY291bnRyeUlEKSA8IDApIHtcclxuICAgICAgICAgIGNvdW50cmllcy5wdXNoKGNvdW50cnlJRCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChjb3VudHJpZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlcmUgaXMgbm8gZGF0YSBmb3IgdGhlIHNlbGVjdGVkIGFyZWEuXCIpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBjb3VudHJpZXM7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vXHJcbiAgLy8gRGF0YSBsYXllcnNcclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICBnZXREYXRhTGF5ZXJJbmZvcyhjb3VudHJ5SUQpIHtcclxuICAgIHJldHVybiBpbnZva2VUYXNrTWV0aG9kKHRoaXMsIFwiL0dlb2VucmljaG1lbnQvRGF0YUxheWVyc1wiICsgY291bnRyeUlELCAoKSA9PiAoT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5fcXVlcnkpKSwgKHJlc3BvbnNlKSA9PiByZXNwb25zZS5kYXRhLmxheWVycyk7XHJcbiAgfVxyXG4gIGdldERhdGFMYXllckluZm8oY291bnRyeUlELCBsYXllcklEKSB7XHJcbiAgICByZXR1cm4gaW52b2tlVGFza01ldGhvZCh0aGlzLCBcIi9HZW9lbnJpY2htZW50L0RhdGFMYXllcnNcIiArIGNvdW50cnlJRCArIFwiL1wiICsgbGF5ZXJJRCwgKCkgPT4gKE9iamVjdC5hc3NpZ24oe30sIHRoaXMuX3F1ZXJ5KSksIChyZXNwb25zZSkgPT4gcmVzcG9uc2UuZGF0YS5sYXllcik7XHJcbiAgfVxyXG59XG5cbmNvbnN0IE51bWJlclN0YXRlID0gXCJuX1wiLCBQZXJjZW50U3RhdGUgPSBcInBfXCIsIEF2ZXJhZ2VTdGF0ZSA9IFwiYV9cIiwgSW5kZXhTdGF0ZSA9IFwiaV9cIiwgc3VmZml4Q2FjaGUgPSB7IG5fOiBcIlwiLCBwXzogXCIgKCUpXCIsIGFfOiBcIiAoYXZnKVwiLCBpXzogXCIgKGluZGV4KVwiIH0sIHN0YXRlc0NhY2hlID0ge1xyXG4gIG5fcF86IHsgbGFiZWxzOiBbXCIjXCIsIFwiJVwiXSwgbmFtZXM6IFtcIm5fXCIsIFwicF9cIl0sIGlkczogbnVsbCB9LFxyXG4gIG5fYV86IHsgbGFiZWxzOiBbXCIjXCIsIFwiQXZnXCJdLCBuYW1lczogW1wibl9cIiwgXCJhX1wiXSwgaWRzOiBudWxsIH0sXHJcbiAgbl9pXzogeyBsYWJlbHM6IFtcIiNcIiwgXCJJbmRleFwiXSwgbmFtZXM6IFtcIm5fXCIsIFwiaV9cIl0sIGlkczogbnVsbCB9LFxyXG4gIG5fcF9pXzogeyBsYWJlbHM6IFtcIiNcIiwgXCIlXCIsIFwiSW5kZXhcIl0sIG5hbWVzOiBbXCJuX1wiLCBcInBfXCIsIFwiaV9cIl0sIGlkczogbnVsbCB9LFxyXG4gIG5fYV9pXzogeyBsYWJlbHM6IFtcIiNcIiwgXCJBdmdcIiwgXCJJbmRleFwiXSwgbmFtZXM6IFtcIm5fXCIsIFwiYV9cIiwgXCJpX1wiXSwgaWRzOiBudWxsIH1cclxufTtcclxuY2xhc3MgRGVyaXZhdGl2ZVZhcmlhYmxlcyB7XHJcbiAgc2V0Q2FjaGUodmFyaWFibGVzKSB7XHJcbiAgICB0aGlzLl92YXJpYWJsZXMgPSB2YXJpYWJsZXM7XHJcbiAgfVxyXG4gIGdldChpZCkge1xyXG4gICAgaWYgKCFpZCkge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGNvbnN0IHBhcnNlZElkID0gdGhpcy5fcGFyc2VJZChpZCk7XHJcbiAgICBsZXQgdmFyaWFibGUgPSB0aGlzLl92YXJpYWJsZXNbcGFyc2VkSWQuaWRdO1xyXG4gICAgaWYgKHZhcmlhYmxlICYmIHBhcnNlZElkLnN0YXRlICE9PSBOdW1iZXJTdGF0ZSkge1xyXG4gICAgICAvLyBDcmVhdGUgYSB2aXJ0dWFsIHZhcmlhYmxlXHJcbiAgICAgIHZhcmlhYmxlID0ge1xyXG4gICAgICAgIGZ1bGxOYW1lOiBpZCxcclxuICAgICAgICBhbGlhczogdmFyaWFibGUuYWxpYXMgKyBzdWZmaXhDYWNoZVtwYXJzZWRJZC5zdGF0ZV0sXHJcbiAgICAgICAgZGVzY3JpcHRpb246IHZhcmlhYmxlLmRlc2NyaXB0aW9uICsgc3VmZml4Q2FjaGVbcGFyc2VkSWQuc3RhdGVdXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdmFyaWFibGU7XHJcbiAgfVxyXG4gIGdldFN0YXRlcyhpZCkge1xyXG4gICAgaWQgPSBpZCAmJiB0aGlzLl9wYXJzZUlkKGlkKS5pZDsgLy8gR2V0IGlkIHdpdGhvdXQgcHJlZml4XHJcbiAgICBjb25zdCB2YXJpYWJsZSA9IHRoaXMuX3ZhcmlhYmxlc1tpZF07XHJcbiAgICBpZiAoIXZhcmlhYmxlKSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgbGV0IHN0YXRlc0lkID0gTnVtYmVyU3RhdGU7XHJcbiAgICBpZiAodmFyaWFibGUucGVyY2VudEJhc2UpIHtcclxuICAgICAgc3RhdGVzSWQgKz0gUGVyY2VudFN0YXRlO1xyXG4gICAgfVxyXG4gICAgaWYgKHZhcmlhYmxlLmF2ZXJhZ2VCYXNlKSB7XHJcbiAgICAgIHN0YXRlc0lkICs9IEF2ZXJhZ2VTdGF0ZTtcclxuICAgIH1cclxuICAgIGlmIChOdW1iZXIodmFyaWFibGUuaW5kZXhCYXNlKSkge1xyXG4gICAgICBzdGF0ZXNJZCArPSBJbmRleFN0YXRlO1xyXG4gICAgfVxyXG4gICAgbGV0IHN0YXRlcyA9IHN0YXRlc0NhY2hlW3N0YXRlc0lkXTtcclxuICAgIGlmIChzdGF0ZXMpIHtcclxuICAgICAgc3RhdGVzID0gT2JqZWN0LmFzc2lnbih7fSwgc3RhdGVzKTsgLy8gQ3JlYXRlIHNoYWxsb3cgY29weVxyXG4gICAgICBzdGF0ZXMuaWRzID0gc3RhdGVzLm5hbWVzLm1hcCgobmFtZSkgPT4gbmFtZSArIGlkKTtcclxuICAgIH1cclxuICAgIHJldHVybiBzdGF0ZXMgfHwgbnVsbDtcclxuICB9XHJcbiAgX3BhcnNlSWQoaWQpIHtcclxuICAgIGNvbnN0IHN0YXRlID0gaWQuc3Vic3RyKDAsIDIpO1xyXG4gICAgcmV0dXJuIHN1ZmZpeENhY2hlLmhhc093blByb3BlcnR5KHN0YXRlKSA/IHsgaWQ6IGlkLnN1YnN0cigyKSwgc3RhdGUgfSA6IHsgaWQsIHN0YXRlOiBOdW1iZXJTdGF0ZSB9O1xyXG4gIH1cclxufVxuXG5jbGFzcyBLZXl3b3JkRmlsdGVyIHtcclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy8gQ29uc3RydWN0b3JcclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy8gQ3Rvci5cclxuICAvLyBzZWFyY2hTdHJpbmc6IFN0cmluZ1xyXG4gIC8vICAgICAgQSBzZWFyY2ggc3RyaW5nIGNvbnRhaW5pbmcgY29tbWEgYW5kL29yIHNwYWNlIHNlcGFyYXRlZCBrZXl3b3Jkcy5cclxuICAvLyBzZWFyY2hGaWVsZHM6IFN0cmluZyB8IFN0cmluZ1tdXHJcbiAgLy8gICAgICBBIGZpZWxkIG9yIGFuIGFycmF5IG9mIGZpZWxkcyB0byBzZWFyY2ggaW4uXHJcbiAgLy8gICAgICBJZiBpdCBpcyBtaXNzaW5nLCB0aGUgdGV4dCBmaWVsZHMgb2YgYSB2YXJpYWJsZSBhcmUgdXNlZC5cclxuICBjb25zdHJ1Y3RvcihzZWFyY2hTdHJpbmcsIHNlYXJjaEZpZWxkcykge1xyXG4gICAgdGhpcy5pc0tleXdvcmRGaWx0ZXIgPSB0cnVlO1xyXG4gICAgdGhpcy5zZWFyY2hTdHJpbmcgPSBcIlwiO1xyXG4gICAgdGhpcy5kZWxpbWl0ZXJzID0gL1tcXHM7LFxcLz86QCY9XFwkIyclXCJgfiFeXFwoXFwpXFxbXFxdXFx7XFx9XFxcXCp8XFx1MDAwMC1cXHUwMDFmXFx1MDA3Zi1cXHUwMDlmXFx1MjAwMC1cXHUyYmZmXFx1ZDgwMC1cXHVmZmZmXSsvO1xyXG4gICAgdGhpcy50b3RhbENvdW50ID0gMDtcclxuICAgIHRoaXMuYml0SW5kZXggPSAwO1xyXG4gICAgdGhpcy5tYXRjaENvdW50ID0gMDtcclxuICAgIHRoaXMudXBkYXRlKHNlYXJjaFN0cmluZyk7XHJcbiAgICB0aGlzLnNlYXJjaEZpZWxkcyA9ICFzZWFyY2hGaWVsZHNcclxuICAgICAgPyBbXCJhbGlhc1wiLCBcImRlc2NyaXB0aW9uXCIsIFwiZmllbGRDYXRlZ29yeVwiXVxyXG4gICAgICA6IHR5cGVvZiBzZWFyY2hGaWVsZHMgPT09IFwic3RyaW5nXCJcclxuICAgICAgICA/IFtzZWFyY2hGaWVsZHNdXHJcbiAgICAgICAgOiBzZWFyY2hGaWVsZHM7XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvLyB1cGRhdGVcclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy8gVXBkYXRlcyB0aGUgZmlsdGVyIHdpdGggYSBuZXcgc2VhcmNoIHN0cmluZ1xyXG4gIHVwZGF0ZShzZWFyY2hTdHJpbmcpIHtcclxuICAgIHRoaXMuc2VhcmNoU3RyaW5nID0gKHNlYXJjaFN0cmluZyAmJiBzZWFyY2hTdHJpbmcudHJpbSgpKSB8fCBcIlwiO1xyXG4gICAgdGhpcy5fa2V5d29yZHMgPVxyXG4gICAgICAhdGhpcy5zZWFyY2hTdHJpbmcgfHwgdGhpcy5zZWFyY2hTdHJpbmcgPT09IFwiKlwiID8gbnVsbCA6IHRoaXMuc2VhcmNoU3RyaW5nLnRvTG93ZXJDYXNlKCkuc3BsaXQodGhpcy5kZWxpbWl0ZXJzKTtcclxuICB9XHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vIGlzQWN0aXZlXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIGlzQWN0aXZlKCkge1xyXG4gICAgcmV0dXJuICEhdGhpcy5fa2V5d29yZHM7XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvLyAgbWF0Y2hcclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy8gVGVzdHMgYW4gb2JqZWN0IHRvIG1hdGNoIHRoZSBrZXl3b3JkIGZpbHRlclxyXG4gIG1hdGNoKG9iamVjdCkge1xyXG4gICAgcmV0dXJuICF0aGlzLl9rZXl3b3JkcyB8fCB0aGlzLnNlYXJjaEZpZWxkcy5zb21lKChzZWFyY2hGaWVsZCkgPT4gdGhpcy5fbWF0Y2hGaWVsZChvYmplY3Rbc2VhcmNoRmllbGRdKSk7XHJcbiAgfVxyXG4gIF9tYXRjaEZpZWxkKGZpZWxkKSB7XHJcbiAgICBpZiAoIWZpZWxkKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGZpZWxkID0gZmllbGQudG9Mb3dlckNhc2UoKTtcclxuICAgIHJldHVybiB0aGlzLl9rZXl3b3Jkcy5ldmVyeSgoa2V5d29yZCkgPT4gZmllbGQuaW5kZXhPZihrZXl3b3JkKSA+PSAwKTtcclxuICB9XHJcbn1cblxuLy8gZ2VvZW5yaWNobWVudC5zdG9yZXNcclxuY2xhc3MgVmFyaWFibGVTdG9yZSB7XHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vXHJcbiAgLy8gQ29uc3RydWN0b3JcclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICBjb25zdHJ1Y3RvcihwYXJhbXMpIHtcclxuICAgIC8qKlxyXG4gICAgICogRm9yIHRoZSBHbG9iYWwgXCJjb3VudHJ5XCIgYWxsb3dzIHVzZXJzIHRvIG92ZXJyaWRlIHRoZSBoaWRlSW5EYXRhQnJvd3NlciB2YXJpYWJsZSBwcm9wZXJ0eSwgYW5kIHNob3cgYWxsIHZhcmlhYmxlcy5cclxuICAgICAqIC0gRGVmYXVsdHMgdG8gZmFsc2VcclxuICAgICAqL1xyXG4gICAgdGhpcy5kaXNwbGF5QWxsR2xvYmFsVmFyaWFibGVzID0gZmFsc2U7XHJcbiAgICAvKipcclxuICAgICAqIEZ1bGxOYW1lIHByb3BlcnR5IGlzIGFzc29jaWF0ZWQgd2l0aCBvbmUgb2YgZnVsbCBuYW1lcyBvZiBhIHZhcmlhYmxlLlxyXG4gICAgICogSWYgdGhlIHNhbWUgdmFyaWFibGUgYXBwZWFycyBpbiBtb3JlIHRoYW4gb25lIGRhdGEgY29sbGVjdGlvbixcclxuICAgICAqIGl0cyBmdWxsIG5hbWUgaXMgZ2VuZXJhdGVkIGZyb20gdGhlIGZpcnN0IGFwcGVhcmFuY2UsIGJ1dCB0aGVcclxuICAgICAqIHZhcmlhYmxlIGlzIGhhc2hlZCB1bmRlciBldmVyeSBvZiBpdHMgZnVsbCBuYW1lcy4gU28sIHlvdSBjYW4gcGFzcyBhbnkgb2YgZnVsbCBuYW1lcyBvZlxyXG4gICAgICogb2YgYSB2YXJpYWJsZSBpbiB0aGUgJ2dldCcgbWV0aG9kLlxyXG4gICAgICovXHJcbiAgICB0aGlzLmlkUHJvcGVydHkgPSBcImZ1bGxOYW1lXCI7XHJcbiAgICAvKipcclxuICAgICAqIFF1ZXJ5IGVuZ2luZSB1c2VkLlxyXG4gICAgICovXHJcbiAgICB0aGlzLnF1ZXJ5RW5naW5lID0gY3JlYXRlU2ltcGxlUXVlcnlFbmdpbmUoKTtcclxuICAgIC8qKlxyXG4gICAgICogTW9kdWxlIHRvIHByb3ZpZGUgZGVyaXZhdGl2ZSB2YXJpYWJsZXMuIElmIHRydWUsIHRoZSBkZWZhdWx0IG1vZHVsZSB3aWxsIGJlIHVzZWQuXHJcbiAgICAgKi9cclxuICAgIHRoaXMuZGVyaXZhdGl2ZVZhcmlhYmxlcyA9IGZhbHNlO1xyXG4gICAgbWl4aW4odGhpcywgcGFyYW1zKTtcclxuICAgIHRoaXMuY2F0ZWdvcmllcyA9IG5ldyBEZWZlcnJlZFN0b3JlKHsgc3luY1F1ZXJ5OiB0aGlzLl9xdWVyeUNhdGVnb3JpZXMuYmluZCh0aGlzKSB9KTtcclxuICAgIHRoaXMuZGF0YUNvbGxlY3Rpb25zID0gbmV3IERlZmVycmVkU3RvcmUoeyBzeW5jUXVlcnk6IHRoaXMuX3F1ZXJ5RGF0YUNvbGxlY3Rpb25zLmJpbmQodGhpcykgfSk7XHJcbiAgICBpZiAodGhpcy5kZXJpdmF0aXZlVmFyaWFibGVzID09PSB0cnVlKSB7XHJcbiAgICAgIHRoaXMuZGVyaXZhdGl2ZVZhcmlhYmxlcyA9IG5ldyBEZXJpdmF0aXZlVmFyaWFibGVzKCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vIENhdGVnb3J5IGFuZCBkYXRhIGNvbGxlY3Rpb24gc3RvcmVzIHN1cHBvcnRcclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICBfcXVlcnlDYXRlZ29yaWVzKHF1ZXJ5LCBvcHRpb25zKSB7XHJcbiAgICBxdWVyeSA9IHRoaXMuX2NsZWFuVXBDb3VudHJ5SUQocXVlcnkpO1xyXG4gICAgbGV0IGRhdGE7XHJcbiAgICBpZiAocXVlcnkgJiYgcXVlcnkuZGF0YUNvbGxlY3Rpb25JRCkge1xyXG4gICAgICBjb25zdCBkYXRhQ29sbGVjdGlvbiA9IHRoaXMuZGF0YUNvbGxlY3Rpb25zLmdldChxdWVyeS5kYXRhQ29sbGVjdGlvbklEKTtcclxuICAgICAgZGVsZXRlIHF1ZXJ5LmRhdGFDb2xsZWN0aW9uSUQ7XHJcbiAgICAgIGRhdGEgPSAhZGF0YUNvbGxlY3Rpb24gPyBbXSA6IGRhdGFDb2xsZWN0aW9uLmNhdGVnb3JpZXM7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgZGF0YSA9IHRoaXMuY2F0ZWdvcmllcy5kYXRhO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuY2F0ZWdvcmllcy5xdWVyeUVuZ2luZShxdWVyeSwgb3B0aW9ucykoZGF0YSk7XHJcbiAgfVxyXG4gIF9xdWVyeURhdGFDb2xsZWN0aW9ucyhxdWVyeSwgb3B0aW9ucykge1xyXG4gICAgcXVlcnkgPSB0aGlzLl9jbGVhblVwQ291bnRyeUlEKHF1ZXJ5KTtcclxuICAgIGxldCBkYXRhO1xyXG4gICAgaWYgKHR5cGVvZiBxdWVyeSA9PT0gXCJvYmplY3RcIiAmJiBxdWVyeS5jYXRlZ29yeUlEKSB7XHJcbiAgICAgIGNvbnN0IGNhdGVnb3J5ID0gdGhpcy5jYXRlZ29yaWVzLmdldChxdWVyeS5jYXRlZ29yeUlEKTtcclxuICAgICAgZGVsZXRlIHF1ZXJ5LmNhdGVnb3J5SUQ7XHJcbiAgICAgIGRhdGEgPSAhY2F0ZWdvcnkgPyBbXSA6IGNhdGVnb3J5LmRhdGFDb2xsZWN0aW9ucztcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBkYXRhID0gdGhpcy5kYXRhQ29sbGVjdGlvbnMuZGF0YTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLmRhdGFDb2xsZWN0aW9ucy5xdWVyeUVuZ2luZShxdWVyeSwgb3B0aW9ucykoZGF0YSk7XHJcbiAgfVxyXG4gIF9jbGVhblVwQ291bnRyeUlEKHF1ZXJ5KSB7XHJcbiAgICBpZiAocXVlcnkpIHtcclxuICAgICAgcXVlcnkgPSBPYmplY3QuYXNzaWduKHt9LCBxdWVyeSk7XHJcbiAgICAgIGRlbGV0ZSBxdWVyeS5jb3VudHJ5SUQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcXVlcnk7XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vIENsZWFyaW5nIG9mIGFsbCBzdG9yZXMgaXMgYXBwbGllZCB3aGVuIGNvdW50cnkgY2hhbmdlcy5cclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICBfY2xlYXJBbGxTdG9yZXMoKSB7XHJcbiAgICB0aGlzLl9kYXRhID0gW107XHJcbiAgICB0aGlzLl92YXJpYWJsZXMgPSB7fTtcclxuICAgIHRoaXMuZGVyaXZhdGl2ZVZhcmlhYmxlcyAmJiB0aGlzLmRlcml2YXRpdmVWYXJpYWJsZXMuc2V0Q2FjaGUodGhpcy5fdmFyaWFibGVzKTtcclxuICAgIHRoaXMuY2F0ZWdvcmllcy5zZXREYXRhKCk7XHJcbiAgICB0aGlzLmRhdGFDb2xsZWN0aW9ucy5zZXREYXRhKCk7XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vIFB1YmxpYyBpbnRlcmZhY2VcclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvLyBWYXJpYWJsZSBzdG9yZSBzeW5jaHJvbml6YXRpb25cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvKipcclxuICAgKiBSZXR1cm5zIHN5bmNocm9uaXphdGlvbiBwcm9taXNlLiBTaG91bGQgYmUgb3ZlcnJpZGVuIGluIHN1YmNsYXNzZXMgc3VwcG9ydGluZyBjb3VudHJpZXMuXHJcbiAgICogQHBhcmFtIGNvdW50cnlJRCBJRCBvZiBjb3VudHJ5IHRvIHN5bmNocm9uaXplIHRoZSBzdG9yZSB3aXRoLlxyXG4gICAqIElmIHRoaXMgcGFyYW1ldGVyIGlzIHVuZGVmaW5lZCwgdGhlIG1ldGhvZCBzaG91bGQgcmV0dXJuIHRoZSBjdXJyZW50IHN5bmNocm9uaXphdGlvbiBwcm9taXNlLlxyXG4gICAqL1xyXG4gIHN5bmNocm9uaXplKF9jb3VudHJ5SUQpIHtcclxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICB9XHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy8gVmFyaWFibGUgc3RvcmUgbWV0aG9kc1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8qKlxyXG4gICAqIFJldHJpZXZlcyBhbiB2YXJpYWJsZSBieSBpdHMgaWRlbnRpdHkuXHJcbiAgICogQHBhcmFtIGlkIFRoZSBpZGVudGl0eSB0byB1c2UgdG8gbG9va3VwIHRoZSB2YXJpYWJsZS5cclxuICAgKiBAcmV0dXJucyBUaGUgdmFyaWFibGUgaW4gdGhlIHN0b3JlIHRoYXQgbWF0Y2hlcyB0aGUgZ2l2ZW4gaWQuXHJcbiAgICovXHJcbiAgZ2V0KGlkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5kZXJpdmF0aXZlVmFyaWFibGVzXHJcbiAgICAgID8gdGhpcy5kZXJpdmF0aXZlVmFyaWFibGVzLmdldChpZClcclxuICAgICAgOiB0aGlzLl92YXJpYWJsZXNbaWRdIHx8IG51bGw7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgYSB2YXJpYWJsZXMncyBpZGVudGl0eS5cclxuICAgKiBAcGFyYW0gb2JqZWN0IFRoZSB2YXJpYWJsZSB0byBnZXQgdGhlIGlkZW50aXR5IGZyb20uXHJcbiAgICogQHJldHVybnMgVGhlIGZ1bGwgbmFtZSBvZiB0aGUgdmFyaWFibGUgaW4gdGhlIGZvcm0gJ2RhdGFDb2xsZWN0aW9uSUQudmFyaWFibGVJRCcuXHJcbiAgICovXHJcbiAgZ2V0SWRlbnRpdHkob2JqZWN0KSB7XHJcbiAgICByZXR1cm4gKG9iamVjdCAmJiBvYmplY3RbdGhpcy5pZFByb3BlcnR5XSkgfHwgbnVsbDtcclxuICB9XHJcbiAgZ2V0TGFiZWwob2JqZWN0KSB7XHJcbiAgICByZXR1cm4gb2JqZWN0LmFsaWFzO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBRdWVyaWVzIHRoZSBzdG9yZSBmb3IgdmFyaWFibGVzLlxyXG4gICAqIEFkZGl0aW9uYWwgcGFyYW1ldGVycyBjb3VsZCBiZSBwYXNzZWQgaW4gdGhlIHF1ZXJ5IGFuZCBhIHF1ZXJ5IGZ1bmN0aW9uIGNhc2UgaXMgYWxzbyBhbGxvd2VkLlxyXG4gICAqL1xyXG4gIHF1ZXJ5KHF1ZXJ5LCBvcHRpb25zKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fYXN5bmNRdWVyeShxdWVyeSwgb3B0aW9ucyk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEFzeW5jIHF1ZXJ5IHVzZWQgaW4gZnJpZW5kbHkgY2xhc3Nlcy5cclxuICAgKiBAcGFyYW0gc3RvcmVPcHRpb25zIFN0b3JlIG9wdGlvbnMgbW9kaWZ5aW5nIHRoZSBkZWZhdWx0IGJlaGF2aW9yIG9mIHRoZSBxdWVyeS5cclxuICAgKi9cclxuICBfYXN5bmNRdWVyeShxdWVyeSwgb3B0aW9ucywgc3RvcmVPcHRpb25zKSB7XHJcbiAgICByZXR1cm4gRGVmZXJyZWRTdG9yZS5yZXNvbHZlQ2FsbGJhY2soKHN0b3JlT3B0aW9ucyAmJiBzdG9yZU9wdGlvbnMucmVzb2x2ZXIpIHx8IHRoaXMuY2F0ZWdvcmllcy5yZXNvbHZlciwgcXVlcnksICgpID0+IHRoaXMuX3N5bmNRdWVyeShxdWVyeSwgb3B0aW9ucywgc3RvcmVPcHRpb25zKSk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFN5bmMgcXVlcnkgdXNlZCBpbiBmcmllbmRseSBjbGFzc2VzLlxyXG4gICAqL1xyXG4gIF9zeW5jUXVlcnkocXVlcnksIG9wdGlvbnMsIHN0b3JlT3B0aW9ucykge1xyXG4gICAgLy8gUHJlcGFyZSB2YXJpYWJsZXMgcXVlcnkgYW5kIGZpbHRlcnMuXHJcbiAgICBjb25zdCB2YXJpYWJsZXNRdWVyeSA9IHt9LCBmaWx0ZXJzID0gWyhzdG9yZU9wdGlvbnMgJiYgc3RvcmVPcHRpb25zLnF1ZXJ5RmlsdGVyKSB8fCB0aGlzLnF1ZXJ5RmlsdGVyLmJpbmQodGhpcyldO1xyXG4gICAgbGV0IGFkZGl0aW9uYWxEYXRhO1xyXG4gICAgaWYgKHR5cGVvZiBxdWVyeSA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgIGZpbHRlcnMucHVzaChxdWVyeSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgcXVlcnkgPSBxdWVyeSB8fCB7fTtcclxuICAgICAgbGV0IGFkZGl0aW9uYWxRdWVyeTtcclxuICAgICAgZm9yIChjb25zdCBrZXkgaW4gcXVlcnkpIHtcclxuICAgICAgICBzd2l0Y2ggKGtleSkge1xyXG4gICAgICAgICAgY2FzZSBcImNvdW50cnlJRFwiOiAvLyBBbHJlYWR5IHJlc29sdmVkLiBTaG91bGQgaWdub3JlIGl0LlxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgXCJjYXRlZ29yeUlEXCI6XHJcbiAgICAgICAgICBjYXNlIFwiZGF0YUNvbGxlY3Rpb25JRFwiOlxyXG4gICAgICAgICAgICB2YXJpYWJsZXNRdWVyeVtrZXldID0gcXVlcnlba2V5XTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFwic2VhcmNoU3RyaW5nXCI6XHJcbiAgICAgICAgICAgIGNvbnN0IGtleXdvcmRGaWx0ZXIgPSBuZXcgS2V5d29yZEZpbHRlcihxdWVyeVtrZXldKTtcclxuICAgICAgICAgICAgZmlsdGVycy5wdXNoKCh2YXJpYWJsZSkgPT4ga2V5d29yZEZpbHRlci5tYXRjaCh2YXJpYWJsZSkpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgXCJmYXZvcml0ZXNcIjpcclxuICAgICAgICAgICAgaWYgKHF1ZXJ5W2tleV0pIHtcclxuICAgICAgICAgICAgICBjb25zdCBmYXZvcml0ZXMgPSAoc3RvcmVPcHRpb25zICYmIHN0b3JlT3B0aW9ucy5mYXZvcml0ZXMpIHx8IHRoaXMuZmF2b3JpdGVzO1xyXG4gICAgICAgICAgICAgIGZpbHRlcnMucHVzaCgodmFyaWFibGUpID0+IGZhdm9yaXRlcyAmJiBmYXZvcml0ZXMuY29udGFpbnMgJiYgZmF2b3JpdGVzLmNvbnRhaW5zKHRoaXMuZ2V0SWRlbnRpdHkodmFyaWFibGUpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFwiZmlsdGVyc1wiOlxyXG4gICAgICAgICAgICBjb25zdCBmaWx0ZXJIYXNoID0gdGhpcy5fcHJlcGFyZUZpbHRlckhhc2gocXVlcnlba2V5XSk7XHJcbiAgICAgICAgICAgIGlmIChmaWx0ZXJIYXNoKSB7XHJcbiAgICAgICAgICAgICAgZmlsdGVycy5wdXNoKCh2YXJpYWJsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBpZCBpbiB2YXJpYWJsZS5maWx0ZXJpbmdUYWdzKSB7XHJcbiAgICAgICAgICAgICAgICAgIGlmIChmaWx0ZXJIYXNoW2lkXSB8fCBmaWx0ZXJIYXNoW1wiKlwiXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFwiYWRkaXRpb25hbERhdGFcIjpcclxuICAgICAgICAgICAgYWRkaXRpb25hbERhdGEgPSBxdWVyeVtrZXldO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIGFkZGl0aW9uYWxRdWVyeSA9IGFkZGl0aW9uYWxRdWVyeSB8fCB7fTtcclxuICAgICAgICAgICAgYWRkaXRpb25hbFF1ZXJ5W2tleV0gPSBxdWVyeVtrZXldO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgLy8gSWYgYWRkaXRpb25hbCBxdWVyeSBwYXJhbWV0ZXJzIHdlcmUgY29sbGVjdGVkLCB3ZSBhZGQgYSBmaWx0ZXIgZm9yIHRoZXNlIHBhcmFtZXRlcnNcclxuICAgICAgaWYgKGFkZGl0aW9uYWxRdWVyeSkge1xyXG4gICAgICAgIGZpbHRlcnMucHVzaCgodmFyaWFibGUpID0+IHtcclxuICAgICAgICAgIC8vIFRoZSBjb2RlIGJlbG93IGlzIGp1c3QgY29waWVkIGZyb20gdGhlIHNpbXBsZSBxdWVyeSBlbmdpbmVcclxuICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGFkZGl0aW9uYWxRdWVyeSkge1xyXG4gICAgICAgICAgICBjb25zdCByZXF1aXJlZCA9IGFkZGl0aW9uYWxRdWVyeVtrZXldO1xyXG4gICAgICAgICAgICBpZiAocmVxdWlyZWQgJiYgdHlwZW9mIHJlcXVpcmVkID09PSBcIm9iamVjdFwiICYmIFwidGVzdFwiIGluIHJlcXVpcmVkKSB7XHJcbiAgICAgICAgICAgICAgLy8gYW4gb2JqZWN0IGNhbiBwcm92aWRlIGEgdGVzdCBtZXRob2QsIHdoaWNoIG1ha2VzIGl0IHdvcmsgd2l0aCByZWdleFxyXG4gICAgICAgICAgICAgIGlmICghcmVxdWlyZWQudGVzdCh2YXJpYWJsZVtrZXldLCB2YXJpYWJsZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAocmVxdWlyZWQgIT09IHZhcmlhYmxlW2tleV0pIHtcclxuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBDb21wb3NlIHRoZSBxdWVyeSBmcm9tIHRoZSBjb2xsZWN0ZWQgZmlsdGVycy5cclxuICAgIGNvbnN0IHF1ZXJ5RmlsdGVyID0gdGhpcy5fY29tcG9zZVF1ZXJ5KGZpbHRlcnMpO1xyXG4gICAgcmV0dXJuIHZhcmlhYmxlc1F1ZXJ5LmRhdGFDb2xsZWN0aW9uSURcclxuICAgICAgPyB0aGlzLl9xdWVyeURDVmFyaWFibGVzKHZhcmlhYmxlc1F1ZXJ5LmRhdGFDb2xsZWN0aW9uSUQsIHF1ZXJ5RmlsdGVyLCBvcHRpb25zLCBhZGRpdGlvbmFsRGF0YSlcclxuICAgICAgOiB2YXJpYWJsZXNRdWVyeS5jYXRlZ29yeUlEXHJcbiAgICAgICAgPyB0aGlzLl9xdWVyeUNhdGVnb3J5VmFyaWFibGVzKHZhcmlhYmxlc1F1ZXJ5LmNhdGVnb3J5SUQsIHF1ZXJ5RmlsdGVyLCBvcHRpb25zLCBhZGRpdGlvbmFsRGF0YSlcclxuICAgICAgICA6IHRoaXMuX3F1ZXJ5QWxsVmFyaWFibGVzKHF1ZXJ5RmlsdGVyLCBvcHRpb25zLCBhZGRpdGlvbmFsRGF0YSk7XHJcbiAgfVxyXG4gIC8vIENhbiBiZSBvdmVycmlkZW5cclxuICBfcXVlcnlEQ1ZhcmlhYmxlcyhpZCwgcXVlcnlGaWx0ZXIsIG9wdGlvbnMsIGFkZGl0aW9uYWxEYXRhKSB7XHJcbiAgICBsZXQgZGMgPSB0aGlzLmRhdGFDb2xsZWN0aW9ucy5nZXQoaWQpO1xyXG4gICAgaWYgKCFkYyAmJiBhZGRpdGlvbmFsRGF0YSkge1xyXG4gICAgICBkYyA9IGFkZGl0aW9uYWxEYXRhLmdldERhdGFDb2xsZWN0aW9uKGlkKTtcclxuICAgIH1cclxuICAgIHJldHVybiAoZGMgJiYgdGhpcy5fcXVlcnkoZGMuZ2V0VmlzaWJsZVZhcmlhYmxlcygpLCBxdWVyeUZpbHRlciwgb3B0aW9ucykpIHx8IFtdO1xyXG4gIH1cclxuICAvLyBDYW4gYmUgb3ZlcnJpZGVuXHJcbiAgX3F1ZXJ5Q2F0ZWdvcnlWYXJpYWJsZXMoaWQsIHF1ZXJ5RmlsdGVyLCBvcHRpb25zLCBhZGRpdGlvbmFsRGF0YSkge1xyXG4gICAgbGV0IGNhdGVnb3J5ID0gdGhpcy5jYXRlZ29yaWVzLmdldChpZCk7XHJcbiAgICBpZiAoIWNhdGVnb3J5ICYmIGFkZGl0aW9uYWxEYXRhKSB7XHJcbiAgICAgIGNhdGVnb3J5ID0gYWRkaXRpb25hbERhdGEuZ2V0Q2F0ZWdvcnkoaWQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIChjYXRlZ29yeSAmJiB0aGlzLl9xdWVyeShjYXRlZ29yeS5kYXRhLCBxdWVyeUZpbHRlciwgb3B0aW9ucykpIHx8IFtdO1xyXG4gIH1cclxuICAvLyBDYW4gYmUgb3ZlcnJpZGVuXHJcbiAgX3F1ZXJ5QWxsVmFyaWFibGVzKHF1ZXJ5RmlsdGVyLCBvcHRpb25zLCBhZGRpdGlvbmFsRGF0YSkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3F1ZXJ5KHRoaXMuX2RhdGEsIHF1ZXJ5RmlsdGVyLCBvcHRpb25zLCBhZGRpdGlvbmFsRGF0YSAmJiBhZGRpdGlvbmFsRGF0YS5nZXRWYXJpYWJsZXMoKSk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIENvbXBvc2VzIGEgcXVlcnkgZnJvbSBhbiBhcnJheSBvZiBmaWx0ZXJzLlxyXG4gICAqL1xyXG4gIF9jb21wb3NlUXVlcnkoZmlsdGVycykge1xyXG4gICAgcmV0dXJuIGZpbHRlcnMubGVuZ3RoID09PSAxID8gZmlsdGVyc1swXSA6ICh2YXJpYWJsZSkgPT4gZmlsdGVycy5ldmVyeSgoZmlsdGVyKSA9PiBmaWx0ZXIodmFyaWFibGUpKTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBxdWVyeSBmaWx0ZXIgd2hpY2ggZmlsdGVycyBvdXQgdmFyaWFibGVzIGRpc2FsbG93ZWQgaW4gdGhlIGRhdGEgYnJvd3Nlci5cclxuICAgKi9cclxuICBxdWVyeUZpbHRlcih2YXJpYWJsZSkge1xyXG4gICAgcmV0dXJuICF2YXJpYWJsZS5taXNzZWRJbkNhdGVnb3JpZXM7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFRoZSBiYXNlIHF1ZXJ5LlxyXG4gICAqIFRoZSBhZGRpdGlvbmFsRGF0YSBpcyBhbiBhcnJheSBvZiBhZGRpdGlvbmFsIHZhcmlhYmxlcy5cclxuICAgKiBJdCBjb3VsZCBhbHNvIGNvbnRhaW4gaW5uZXIgYXJyYXlzLlxyXG4gICAqL1xyXG4gIF9xdWVyeShkYXRhLCBxdWVyeUZpbHRlciwgb3B0aW9ucywgYWRkaXRpb25hbERhdGEpIHtcclxuICAgIC8vIFdlIHRlbXBvcmFyeSBhZGQgYWRkaXRpb25hbCB2YXJpYWJsZXMgdG8gdGhlIGVuZCBvZiBkYXRhIGFycmF5LFxyXG4gICAgLy8gYXBwbHkgcXVlcnksIGFuZCB0aGVuIHJlbW92ZSBhZGRpdGlvbmFsIHZhcmlhYmxlcy5cclxuICAgIGNvbnN0IGxlbmd0aCA9IGRhdGEubGVuZ3RoO1xyXG4gICAgdGhpcy5fYWRkQWRkaXRpb25hbERhdGEoZGF0YSwgYWRkaXRpb25hbERhdGEpO1xyXG4gICAgY29uc3QgcmVzdWx0ID0gdGhpcy5xdWVyeUVuZ2luZShxdWVyeUZpbHRlciwgb3B0aW9ucykoZGF0YSk7XHJcbiAgICBkYXRhLmxlbmd0aCA9IGxlbmd0aDtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFJlY3Vyc2l2ZWx5IGNvbGxlY3RzIGFkZGl0aW9uYWwgdmFyaWFibGVzLlxyXG4gICAqL1xyXG4gIF9hZGRBZGRpdGlvbmFsRGF0YShkYXRhLCBhZGRpdGlvbmFsRGF0YSkge1xyXG4gICAgYWRkaXRpb25hbERhdGEgJiZcclxuICAgICAgYWRkaXRpb25hbERhdGEuZm9yRWFjaCgob2JqZWN0KSA9PiB7XHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob2JqZWN0KSkge1xyXG4gICAgICAgICAgdGhpcy5fYWRkQWRkaXRpb25hbERhdGEoZGF0YSwgb2JqZWN0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAob2JqZWN0KSB7XHJcbiAgICAgICAgICBkYXRhLnB1c2gob2JqZWN0KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBSZXF1ZXN0cyBwb3B1bGFyIHZhcmlhYmxlcyBmb3IgYSBjYXRlZ29yeS5cclxuICAgKiBAcGFyYW0gY2F0ZWdvcnkgICAgICAgIFZhcmlhYmxlIGNhdGVnb3J5IHRvIHJlcXVlc3QgdmFyaWFibGVzIGZvci5cclxuICAgKiBAcGFyYW0gb3B0aW9ucyAgICAgICAgIFF1ZXJ5IG9wdGlvbnMuXHJcbiAgICogQHBhcmFtIHN0b3JlT3B0aW9ucyAgICBBZGRpdGlvbmFsIHN0b3JlIG9wdGlvbnMuIElmIHN0b3JlT3B0aW9ucy5xdWVyeUZpbHRlciBpcyBzcGVjaWZpZWQsIGl0IG92ZXJyaWRlcyB0aGUgZGVmYXVsdCBxdWVyeSBmaWx0ZXIuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyBBcnJheSBvZiBwb3B1bGFyIHZhcmlhYmxlcy5cclxuICAgKi9cclxuICBnZXRQb3B1bGFyVmFyaWFibGVzKGNhdGVnb3J5LCBvcHRpb25zLCBzdG9yZU9wdGlvbnMpIHtcclxuICAgIHJldHVybiBjYXRlZ29yeSAmJiBjYXRlZ29yeS5nZXRQb3B1bGFyVmFyaWFibGVzID8gY2F0ZWdvcnkuZ2V0UG9wdWxhclZhcmlhYmxlcyhvcHRpb25zLCBzdG9yZU9wdGlvbnMpIDogW107XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vIEdldCByZWZpbmUgZmlsdGVyc1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8qKlxyXG4gICAqIEdldHMgYW4gYXJyYXkgb2YgYWxsIHBvc3NpYmxlIHJlZmluZSBmaWx0ZXJzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGdpdmVuIHZhcmlhYmxlcyBxdWVyeS5cclxuICAgKiBJdCBpcyBzdXBwb3NlZCB0aGF0IHRoZSBWYXJpYWJsZSBTdG9yZSBpcyBhbHJlYWR5IHN5bmNocm9uaXplZCB3aXRoIHRoZSByZXF1ZXN0ZWQgY291bnRyeS5cclxuICAgKiBAcGFyYW0gcXVlcnkgVmFyaWFibGVzIHF1ZXJ5IChzZWUgcXVlcnkgbWV0aG9kKS4gT25seSAnY2F0ZWdvcnlJRCcsICdkYXRhQ29sbGVjdGlvbklEJywgJ2ZpbHRlcnMnLCBhbmQgJ2FkZGl0aW9uYWxEYXRhJyBwcm9wZXJ0aWVzIGFyZSB0YWtlbiBpbnRvIGFjY291bnQuXHJcbiAgICogQHJldHVybnMgYSBoYXNoIG9iamVjdCB3aXRoIHBvc3NpYmxlIHJlZmluZSBmaWx0ZXJzLlxyXG4gICAqL1xyXG4gIGdldFJlZmluZUZpbHRlcnMocXVlcnkpIHtcclxuICAgIGxldCBjb2xsZWN0ZWRGaWx0ZXJzID0ge307XHJcbiAgICBpZiAocXVlcnkuZGF0YUNvbGxlY3Rpb25JRCkge1xyXG4gICAgICBsZXQgZGF0YUNvbGxlY3Rpb24gPSB0aGlzLmRhdGFDb2xsZWN0aW9ucy5nZXQocXVlcnkuZGF0YUNvbGxlY3Rpb25JRCk7XHJcbiAgICAgIGlmICghZGF0YUNvbGxlY3Rpb24gJiYgcXVlcnkuYWRkaXRpb25hbERhdGEpIHtcclxuICAgICAgICBkYXRhQ29sbGVjdGlvbiA9IHF1ZXJ5LmFkZGl0aW9uYWxEYXRhLmdldERhdGFDb2xsZWN0aW9uKHF1ZXJ5LmRhdGFDb2xsZWN0aW9uSUQpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChkYXRhQ29sbGVjdGlvbiAmJiBkYXRhQ29sbGVjdGlvbi5maWx0ZXJzKSB7XHJcbiAgICAgICAgdGhpcy5fY29tYmluZUZpbHRlcnMoZGF0YUNvbGxlY3Rpb24uZmlsdGVycywgY29sbGVjdGVkRmlsdGVycyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHF1ZXJ5LmNhdGVnb3J5SUQpIHtcclxuICAgICAgbGV0IGNhdGVnb3J5ID0gdGhpcy5jYXRlZ29yaWVzLmdldChxdWVyeS5jYXRlZ29yeUlEKTtcclxuICAgICAgaWYgKCFjYXRlZ29yeSAmJiBxdWVyeS5hZGRpdGlvbmFsRGF0YSkge1xyXG4gICAgICAgIGNhdGVnb3J5ID0gcXVlcnkuYWRkaXRpb25hbERhdGEuZ2V0Q2F0ZWdvcnkocXVlcnkuY2F0ZWdvcnlJRCk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGNhdGVnb3J5KSB7XHJcbiAgICAgICAgdGhpcy5fY29sbGVjdENhdGVnb3J5RmlsdGVycyhjYXRlZ29yeSwgY29sbGVjdGVkRmlsdGVycyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB0aGlzLl9jb2xsZWN0QWxsRmlsdGVycyhjb2xsZWN0ZWRGaWx0ZXJzLCBxdWVyeS5hZGRpdGlvbmFsRGF0YSk7XHJcbiAgICB9XHJcbiAgICAvLyBJZiBxdWVyeS5maWx0ZXJzIHByb3BlcnR5IGlzIHNwZWNpZmllZCwgd2UgZmlsdGVyIGFscmVhZHkgY29sbGVjdGVkIGZpbHRlcnMuXHJcbiAgICBjb25zdCBmaWx0ZXJIYXNoID0gdGhpcy5fcHJlcGFyZUZpbHRlckhhc2gocXVlcnkuZmlsdGVycyk7XHJcbiAgICBpZiAoZmlsdGVySGFzaCAmJiAhZmlsdGVySGFzaFtcIipcIl0pIHtcclxuICAgICAgY29uc3Qgb2xkRmlsdGVycyA9IGNvbGxlY3RlZEZpbHRlcnM7XHJcbiAgICAgIGNvbGxlY3RlZEZpbHRlcnMgPSB7fTtcclxuICAgICAgZm9yIChjb25zdCBpZCBpbiBvbGRGaWx0ZXJzKSB7XHJcbiAgICAgICAgaWYgKGZpbHRlckhhc2hbaWRdKSB7XHJcbiAgICAgICAgICBjb2xsZWN0ZWRGaWx0ZXJzW2lkXSA9IG9sZEZpbHRlcnNbaWRdO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNvbGxlY3RlZEZpbHRlcnM7XHJcbiAgfVxyXG4gIF9wcmVwYXJlRmlsdGVySGFzaChmaWx0ZXJzKSB7XHJcbiAgICBpZiAodHlwZW9mIGZpbHRlcnMgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgZmlsdGVycyA9IGZpbHRlcnMuc3BsaXQoXCIsXCIpO1xyXG4gICAgfVxyXG4gICAgaWYgKCFmaWx0ZXJzIHx8ICFmaWx0ZXJzLmxlbmd0aCkge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGNvbnN0IGZpbHRlckhhc2ggPSB7fTtcclxuICAgIGZpbHRlcnMuZm9yRWFjaCgoZmlsdGVyKSA9PiB7XHJcbiAgICAgIGZpbHRlckhhc2hbZmlsdGVyLnRyaW0oKV0gPSB0cnVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gZmlsdGVySGFzaDtcclxuICB9XHJcbiAgX2NvbGxlY3RBbGxGaWx0ZXJzKGNvbGxlY3RlZEZpbHRlcnMsIGFkZGl0aW9uYWxEYXRhKSB7XHJcbiAgICB0aGlzLmNhdGVnb3JpZXMuZGF0YS5mb3JFYWNoKChjYXRlZ29yeSkgPT4ge1xyXG4gICAgICB0aGlzLl9jb2xsZWN0Q2F0ZWdvcnlGaWx0ZXJzKGNhdGVnb3J5LCBjb2xsZWN0ZWRGaWx0ZXJzKTtcclxuICAgIH0pO1xyXG4gICAgYWRkaXRpb25hbERhdGEgJiZcclxuICAgICAgYWRkaXRpb25hbERhdGEuZ2V0Q2F0ZWdvcmllcygpLmZvckVhY2goKGNhdGVnb3J5KSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY29sbGVjdENhdGVnb3J5RmlsdGVycyhjYXRlZ29yeSwgY29sbGVjdGVkRmlsdGVycyk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuICBfY29sbGVjdENhdGVnb3J5RmlsdGVycyhjYXRlZ29yeSwgY29sbGVjdGVkRmlsdGVycykge1xyXG4gICAgY2F0ZWdvcnkuZGF0YUNvbGxlY3Rpb25zLmZvckVhY2goKGRhdGFDb2xsZWN0aW9uKSA9PiB7XHJcbiAgICAgIHRoaXMuX2NvbWJpbmVGaWx0ZXJzKGRhdGFDb2xsZWN0aW9uLmZpbHRlcnMsIGNvbGxlY3RlZEZpbHRlcnMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIF9jb21iaW5lRmlsdGVycyhmaWx0ZXJzLCBjb2xsZWN0ZWRGaWx0ZXJzKSB7XHJcbiAgICBmb3IgKGNvbnN0IGlkIGluIGZpbHRlcnMpIHtcclxuICAgICAgY29uc3QgbmV3RmlsdGVyID0gZmlsdGVyc1tpZF07XHJcbiAgICAgIGxldCBvbGRGaWx0ZXIgPSBjb2xsZWN0ZWRGaWx0ZXJzW25ld0ZpbHRlci5pZF07XHJcbiAgICAgIGlmICghb2xkRmlsdGVyKSB7XHJcbiAgICAgICAgb2xkRmlsdGVyID0gT2JqZWN0LmFzc2lnbih7fSwgbmV3RmlsdGVyKTtcclxuICAgICAgICBjb2xsZWN0ZWRGaWx0ZXJzW25ld0ZpbHRlci5pZF0gPSBvbGRGaWx0ZXI7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgdGhpcy5fbWVyZ2VGaWx0ZXIob2xkRmlsdGVyLCBuZXdGaWx0ZXIpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIE1lcmdlcyB0aGUgbmV3IGZpbHRlciB3aXRoIHRoZSBvbGQgb25lLlxyXG4gICAqL1xyXG4gIF9tZXJnZUZpbHRlcihvbGRGaWx0ZXIsIG5ld0ZpbHRlcikge1xyXG4gICAgLy8gQm90aCBtZXJnZWQgZmlsdGVycyBzaG91bGQgaGF2ZSB0aGUgc2FtZSB0eXBlLiBJZiBub3QsIHdlIGlnbm9yZSB0aGUgbmV3IGZpbHRlci5cclxuICAgIGlmIChvbGRGaWx0ZXIudHlwZSA9PT0gXCJSYW5nZVwiICYmIG5ld0ZpbHRlci50eXBlID09PSBcIlJhbmdlXCIpIHtcclxuICAgICAgLy8gSW4gdGhlIGNhc2Ugb2YgYSByYW5nZSBmaWx0ZXIsIHdlIGp1c3QgZW5sYXJnZSB0aGUgcmFuZ2Ugb2YgdmFsdWVzXHJcbiAgICAgIC8vIG9mIHRoZSBvbGQgZmlsdGVyIHdpdGggbmV3IHZhbHVlcy5cclxuICAgICAgbGV0IG9sZFZhbHVlID0gb2xkRmlsdGVyLnJhbmdlTWluO1xyXG4gICAgICBsZXQgbmV3VmFsdWUgPSBuZXdGaWx0ZXIucmFuZ2VNaW47XHJcbiAgICAgIGlmICghaXNOYU4ob2xkVmFsdWUpICYmICFpc05hTihuZXdWYWx1ZSkgJiYgb2xkVmFsdWUgPiBuZXdWYWx1ZSkge1xyXG4gICAgICAgIG9sZEZpbHRlci5yYW5nZU1pbiA9IG5ld1ZhbHVlO1xyXG4gICAgICB9XHJcbiAgICAgIG9sZFZhbHVlID0gb2xkRmlsdGVyLnJhbmdlTWF4O1xyXG4gICAgICBuZXdWYWx1ZSA9IG5ld0ZpbHRlci5yYW5nZU1heDtcclxuICAgICAgaWYgKCFpc05hTihvbGRWYWx1ZSkgJiYgIWlzTmFOKG5ld1ZhbHVlKSAmJiBvbGRWYWx1ZSA8IG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgb2xkRmlsdGVyLnJhbmdlTWF4ID0gbmV3VmFsdWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2UgaWYgKG9sZEZpbHRlci50eXBlID09PSBcIkVudW1lcmF0aW9uXCIgJiYgbmV3RmlsdGVyLnR5cGUgPT09IFwiRW51bWVyYXRpb25cIikge1xyXG4gICAgICAvLyBJbiB0aGUgY2FzZSBvZiBhIGVudW1lcmF0aW9uIGZpbHRlciwgd2UgYWRkIHZhbHVlcyBmcm9tIHRoZSBuZXcgZmlsdGVyXHJcbiAgICAgIC8vIHRoYXQgYXJlIG1pc3NpbmcgaW4gdGhlIG9sZCBmaWx0ZXIuXHJcbiAgICAgIGNvbnN0IG9sZFZhbHVlID0gdGhpcy5fYXJyYXlUb09iamVjdChvbGRGaWx0ZXIuZW51bVZhbHVlcy5zcGxpdChcIixcIikpO1xyXG4gICAgICBjb25zdCBuZXdWYWx1ZSA9IG5ld0ZpbHRlci5lbnVtVmFsdWVzLnNwbGl0KFwiLFwiKTtcclxuICAgICAgbmV3VmFsdWUuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICAgIGlmICghb2xkVmFsdWVbaXRlbV0pIHtcclxuICAgICAgICAgIG9sZEZpbHRlci5lbnVtVmFsdWVzICs9IFwiLFwiICsgaXRlbTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvLyBHZXQgYXZhaWxhYmxlIHN0YXRlc1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgYW4gb2JqZWN0IG9mIHN0YXRlcyBhdmFpbGFibGUgZm9yIHRoZSBnaXZlbiB2YXJpYWJsZS5cclxuICAgKiBJZiBzdGF0ZXMgYXJlIG5vdCBzdXBwb3J0ZWQgb24gdGhpcyBzdG9yZSBvciB0aGUgdmFyaWFibGUgaGFzIGEgc2luZ2xlIHN0YXRlLCBudWxsIHNob3VsZCBiZSByZXR1cm5lZC5cclxuICAgKi9cclxuICBnZXRTdGF0ZXMoaWQpIHtcclxuICAgIHJldHVybiB0aGlzLmRlcml2YXRpdmVWYXJpYWJsZXMgPyB0aGlzLmRlcml2YXRpdmVWYXJpYWJsZXMuZ2V0U3RhdGVzKGlkKSA6IG51bGw7XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vIFByb3RlY3RlZCBtZXRob2RzOiBQcm9jZXNzaW5nIGRhdGEgY29sbGVjdGlvbnNcclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvLyBQcm9jZXNzZXMgR0UgZGF0YSBjb2xsZWN0aW9ucyBhbmQgcHJlcGFyZXMgdGhlIGludGVybmFsIHN0b3JlIHN0cnVjdHVyZS5cclxuICBfcHJvY2Vzc0RhdGFDb2xsZWN0aW9ucyhkYXRhQ29sbGVjdGlvbnMsIHByb2Nlc3NlZERhdGEpIHtcclxuICAgIC8vIFdoaWxlIHByb2Nlc3NpbmcgZGF0YSBjb2xsZWN0aW9ucyB3ZSBjb2xsZWN0IHJlc3VsdHMgaW4gdGhlIHByb2Nlc3NlZERhdGEgb2JqZWN0LlxyXG4gICAgLy8gVmFyaWFibGVzIGFyZSBoYXNoZWQgaW4gaXQgdXNpbmcgYSBjb21iaW5hdGlvbiBvZiB2YXJpYWJsZSBJRCBhbmQgdmFyaWFibGUgZGVzY3JpcHRpb24uXHJcbiAgICAvLyBBbHNvLCB3ZSBhZGQgdmFyaWFibGVzIHRvIHRoaXMuX2RhdGEgYXJyYXkgYW5kIHJlZ2lzdGVyIHRoZW0gaW4gdGhpcy5fdmFyaWFibGVzIGhhc2ggYW5kXHJcbiAgICAvLyBpbiBpbnRlcm5hbCBoYXNoZXMgb2YgY3JlYXRlZCBjYXRlZ29yaWVzIGFuZCBkYXRhIGNvbGxlY3Rpb25zLlxyXG4gICAgLy8gVG8gYWxsb3cgY29sbGVjdCB2YXJpYWJsZXMgZnJvbSBkaWZmZXJlbnQgZGF0YSBjb2xsZWN0aW9uIHNvdXJjZXMsIHdlIHBhc3MgcHJvY2Vzc2VkRGF0YSBpblxyXG4gICAgLy8gcGFyYW1ldGVycyBvZiB0aGlzIG1ldGhvZCBhbmQgcmV0dXJuIGl0IGFzIGEgcmVzdWx0IG9mIHRoaXMgbWV0aG9kLlxyXG4gICAgcHJvY2Vzc2VkRGF0YSA9IHByb2Nlc3NlZERhdGEgfHwge1xyXG4gICAgICB2YXJpYWJsZXM6IHt9LFxyXG4gICAgICBjYXRlZ29yaWVzOiB7fSxcclxuICAgICAgZGF0YUNvbGxlY3Rpb25zOiBbXVxyXG4gICAgfTtcclxuICAgIGRhdGFDb2xsZWN0aW9ucy5mb3JFYWNoKChvcmlnaW5hbERhdGFDb2xsZWN0aW9uKSA9PiB7XHJcbiAgICAgIGlmICh0aGlzLl9pc0RhdGFDb2xsZWN0aW9uRGlzYWxsb3dlZChvcmlnaW5hbERhdGFDb2xsZWN0aW9uKSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBvcmlnaW5hbERhdGEgPSBvcmlnaW5hbERhdGFDb2xsZWN0aW9uLmRhdGE7XHJcbiAgICAgIC8vIE1vZGlmeSB0aGUgb2JqZWN0IHRvIGhhdmUgbW9yZSBjb252ZW5pZW50IGludGVyZmFjZVxyXG4gICAgICBjb25zdCBkYXRhQ29sbGVjdGlvbiA9IG9yaWdpbmFsRGF0YUNvbGxlY3Rpb247XHJcbiAgICAgIC8vIFByb3ZpZGUgYSBtb3JlIGNvbnZlbmllbnQgaWQgcHJvcGVydHlcclxuICAgICAgZGF0YUNvbGxlY3Rpb24uaWQgPSBvcmlnaW5hbERhdGFDb2xsZWN0aW9uLmRhdGFDb2xsZWN0aW9uSUQ7XHJcbiAgICAgIC8vIE1vdmUgZGF0YSBjb2xsZWN0aW9uIG1ldGFkYXRhIHRvIHRoZSB0b3AuXHJcbiAgICAgIGNvbnN0IG1ldGFkYXRhID0gb3JpZ2luYWxEYXRhQ29sbGVjdGlvbi5tZXRhZGF0YTtcclxuICAgICAgZGF0YUNvbGxlY3Rpb24udGl0bGUgPSBtZXRhZGF0YS50aXRsZTtcclxuICAgICAgZGF0YUNvbGxlY3Rpb24ubmFtZSA9IG1ldGFkYXRhLm5hbWU7XHJcbiAgICAgIGRhdGFDb2xsZWN0aW9uLnNob3J0RGVzY3JpcHRpb24gPSBtZXRhZGF0YS5zaG9ydERlc2NyaXB0aW9uO1xyXG4gICAgICBkYXRhQ29sbGVjdGlvbi5sb25nRGVzY3JpcHRpb24gPSBtZXRhZGF0YS5sb25nRGVzY3JpcHRpb247XHJcbiAgICAgIGRhdGFDb2xsZWN0aW9uLmNvdW50cmllcyA9IG1ldGFkYXRhLmNvdW50cmllcztcclxuICAgICAgZGF0YUNvbGxlY3Rpb24ua2V5d29yZHMgPSBtZXRhZGF0YS5rZXl3b3JkcztcclxuICAgICAgZGF0YUNvbGxlY3Rpb24uZGF0YXNldHMgPSBtZXRhZGF0YS5kYXRhc2V0cztcclxuICAgICAgZGF0YUNvbGxlY3Rpb24uaGllcmFyY2hpZXMgPSBtZXRhZGF0YS5oaWVyYXJjaGllcztcclxuICAgICAgZGF0YUNvbGxlY3Rpb24uYXV0aG9yID0gbWV0YWRhdGEuYXV0aG9yO1xyXG4gICAgICAvLyBXZSBuZWVkIHRvIG5vcm1hbGl6ZSBkYXRhIGNvbGxlY3Rpb24gZmlsdGVycy5cclxuICAgICAgLy8gRm9yIGEgcmFuZ2UgZmlsdGVyLCBpdHMgYm91bmRzIGFyZSBjb252ZXJ0ZWQgdG8gbnVtYmVycy5cclxuICAgICAgLy8gRm9yIGEgZW51bSBmaWx0ZXIsIHdlIHRyaW0gdmFsdWVzIGluIGl0cyBzdHJpbmcgbGlzdC5cclxuICAgICAgLy8gQ29udmVydCBmaWx0ZXJzIHRvIGhhc2guXHJcbiAgICAgIGRhdGFDb2xsZWN0aW9uLmZpbHRlcnMgPSB0aGlzLl9hcnJheVRvT2JqZWN0KG9yaWdpbmFsRGF0YUNvbGxlY3Rpb24ubWV0YWRhdGEuZmlsdGVycywgXCJpZFwiLCAoZmlsdGVyKSA9PiB0aGlzLl9wcmVwYXJlRmlsdGVyKGZpbHRlcikpO1xyXG4gICAgICAvLyBwcm92aWRlIGhhc1ZhcmlhYmxlIG1ldGhvZCB0byBlbnN1cmUgdGhlIGdpdmVuIHZhcmlhYmxlIGJlbG9uZ3MgdG8gdGhlIGRhdGEgY29sbGVjdGlvbi5cclxuICAgICAgZGF0YUNvbGxlY3Rpb24uaGFzVmFyaWFibGUgPSBmdW5jdGlvbiAodmFyaWFibGUpIHtcclxuICAgICAgICBjb25zdCBpZCA9IHZhcmlhYmxlICYmIHZhcmlhYmxlLmlkO1xyXG4gICAgICAgIC8vIGxldCdzIGNvbnZlcnQgdG8gdGhlIHVwcGVyIGNhc2UgZXZlcnkgdGltZSwgYmVjYXVzZSB0aGUgdmFyaWFibGUgbWF5IG5vdCBiZSBmcm9tIHRoaXMgZGF0YSBjb2xsZWN0aW9uXHJcbiAgICAgICAgcmV0dXJuICEhKGlkICYmIHRoaXMuaGFzaFtpZC50b1VwcGVyQ2FzZSgpXSAhPT0gdW5kZWZpbmVkKTtcclxuICAgICAgfTtcclxuICAgICAgLy8gUHJvdmlkZSBhIGRhdGEgY29sbGVjdGlvbiB3aXRoICdnZXRWaXNpYmxlVmFyaWFibGVzJyBtZXRob2RcclxuICAgICAgZGF0YUNvbGxlY3Rpb24uZ2V0VmlzaWJsZVZhcmlhYmxlcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBUT0RPOiB0b1VwcGVyQ2FzZSBpcyBub3QgbmVlZGVkIGhlcmUsIGJlY2F1c2UgaXQgc2hvdWxkIGJlIGFscmVhZHkgaW4gdGhlIHVwcGVyIGNhc2UsIHNlZSBfcHJlcGFyZVZhcmlhYmxlIG1ldGhvZFxyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuZmlsdGVyKCh2YXJpYWJsZSkgPT4gdGhpcy5oYXNoW3ZhcmlhYmxlLmlkLnRvVXBwZXJDYXNlKCldKTtcclxuICAgICAgfTtcclxuICAgICAgLy8gUHJlcGFyZSBjYXRlZ29yaWVzIHVzZWQgaW4gdGhpcyBkYXRhIGNvbGxlY3Rpb24uXHJcbiAgICAgIGRhdGFDb2xsZWN0aW9uLmNhdGVnb3JpZXMgPSBbXTtcclxuICAgICAgb3JpZ2luYWxEYXRhQ29sbGVjdGlvbi5tZXRhZGF0YS5jYXRlZ29yaWVzLm1hcCgoY2F0ZWdvcnkpID0+IHtcclxuICAgICAgICBjb25zdCBzdG9yZUNhdGVvZ3J5ID0gdGhpcy5fcHJlcGFyZUNhdGVnb3J5KGNhdGVnb3J5LCBkYXRhQ29sbGVjdGlvbiwgcHJvY2Vzc2VkRGF0YSk7XHJcbiAgICAgICAgc3RvcmVDYXRlb2dyeSAmJiBkYXRhQ29sbGVjdGlvbi5jYXRlZ29yaWVzLnB1c2goc3RvcmVDYXRlb2dyeSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBkYXRhQ29sbGVjdGlvbi5kYXRhID0gW107XHJcbiAgICAgIC8vIFdlIHdpbGwgY2FjaGUgZGF0YSBjb2xsZWN0aW9uIHZhcmlhYmxlIHNob3J0IElEcyBpbiBpdHMgb3duIGhhc2ggYXMgQm9vbGVhbiB2YWx1ZXNcclxuICAgICAgLy8gYW5kIGFsc28gcGxhY2UgdmFyaWFibGVzIGluIGl0cyBvd24gZGF0YSBhcnJheS5cclxuICAgICAgZGF0YUNvbGxlY3Rpb24uaGFzaCA9IHt9O1xyXG4gICAgICB0aGlzLl90ZXN0T25lWWVhckluY3JlbWVudHMob3JpZ2luYWxEYXRhKTtcclxuICAgICAgLy8gTm93IHdlIGZpbGwgYWxsIGhhc2hlcyB3aXRoIHZhcmlhYmxlcyB3aXRoaW4gYSBkYXRhIGNvbGxlY3Rpb24uXHJcbiAgICAgIG9yaWdpbmFsRGF0YS5mb3JFYWNoKCh2YXJpYWJsZSkgPT4ge1xyXG4gICAgICAgIHRoaXMuX3Byb2Nlc3NWYXJpYWJsZSh2YXJpYWJsZSwgZGF0YUNvbGxlY3Rpb24sIHByb2Nlc3NlZERhdGEpO1xyXG4gICAgICB9KTtcclxuICAgICAgLy8gRmluYWxseSwgd2UgYWRkIHRoZSBkYXRhIGNvbGxlY3Rpb24gdG8gcHJvY2Vzc2VkRGF0YS5cclxuICAgICAgcHJvY2Vzc2VkRGF0YS5kYXRhQ29sbGVjdGlvbnMucHVzaChkYXRhQ29sbGVjdGlvbik7XHJcbiAgICB9KTtcclxuICAgIC8vIFVwZGF0ZSBzdG9yZXMgb2YgY2F0ZWdvcmllcyBhbmQgZGF0YSBjb2xsZWN0aW9ucy5cclxuICAgIGNvbnN0IGRhdGEgPSB0aGlzLmNhdGVnb3JpZXMucXVlcnlFbmdpbmUoe30sIHsgc29ydDogW3sgYXR0cmlidXRlOiBcImRpc3BsYXlPcmRlclwiLCBkZXNjZW5kaW5nOiB0cnVlIH1dIH0pKHRoaXMuX29iamVjdFRvQXJyYXkocHJvY2Vzc2VkRGF0YS5jYXRlZ29yaWVzKSk7XHJcbiAgICB0aGlzLmNhdGVnb3JpZXMuc2V0RGF0YShkYXRhKTtcclxuICAgIHRoaXMuZGF0YUNvbGxlY3Rpb25zLnNldERhdGEocHJvY2Vzc2VkRGF0YS5kYXRhQ29sbGVjdGlvbnMpO1xyXG4gICAgcmV0dXJuIHByb2Nlc3NlZERhdGE7XHJcbiAgfVxyXG4gIF90ZXN0T25lWWVhckluY3JlbWVudHModmFyaWFibGVzKSB7XHJcbiAgICBmdW5jdGlvbiBnZXRBZ2VUYWdWYWx1ZSh2YXJpYWJsZSkge1xyXG4gICAgICBjb25zdCB0YWdzID0gdmFyaWFibGUuZmlsdGVyaW5nVGFncztcclxuICAgICAgbGV0IGFnZVRhZ1ZhbHVlO1xyXG4gICAgICBmb3IgKGxldCBqID0gMCwgY291bnQgPSB0YWdzID8gdGFncy5sZW5ndGggOiAwOyBqIDwgY291bnQ7IGorKykge1xyXG4gICAgICAgIGlmICh0YWdzW2pdLmlkID09PSBcIkFnZVwiKSB7XHJcbiAgICAgICAgICBhZ2VUYWdWYWx1ZSA9IHRhZ3Nbal0udmFsdWU7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGFnZVRhZ1ZhbHVlO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbGVuZ3RoID0gdmFyaWFibGVzLmxlbmd0aDtcclxuICAgIGxldCBvbmVZZWFyQ291bnQgPSAwO1xyXG4gICAgLy8gVGVzdCB0aGF0IGFsbCB2YXJpYWJsZXMgb2YgYSBkYXRhIGNvbGxlY3Rpb24gaGF2ZSB0aGUgQWdlIHRhZyBhcyBcIk4tTlwiLlxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xyXG4gICAgICBjb25zdCBhZ2VUYWdWYWx1ZSA9IGdldEFnZVRhZ1ZhbHVlKHZhcmlhYmxlc1tpXSk7XHJcbiAgICAgIGlmICghYWdlVGFnVmFsdWUpIHtcclxuICAgICAgICAvLyBJZ25vcmUgdmFyaWFibGVzIHdpdGhvdXQgQWdlIHRhZy5cclxuICAgICAgICBjb250aW51ZTtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCByYW5nZSA9IGFnZVRhZ1ZhbHVlLnNwbGl0KFwiLVwiKTtcclxuICAgICAgaWYgKHJhbmdlLmxlbmd0aCAhPT0gMiB8fCByYW5nZVswXSAhPT0gcmFuZ2VbMV0pIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgb25lWWVhckNvdW50Kys7XHJcbiAgICB9XHJcbiAgICAvLyBPbmUteWVhciBpbmNyZW1lbnRzIGRhdGEgY29sbGVjdGlvbiBjb250YWlucyBlc3NlbnRpYWxseSBtb3JlIHRoYW4gNTAgdmFyaWFibGVzXHJcbiAgICAvLyB3aXRoIG9uZS15ZWFyIHJhbmdlcy4gV2UgdXNlIHRoZSB0aHJlc2hvbGQgb2YgNTAgdG8gZW5zdXJlIHRoYXQgdGhlIG51bWJlciBvZlxyXG4gICAgLy8gc3VjaCB2YXJpYWJsZXMgaXMgYmlnIGVub3VnaC5cclxuICAgIGlmIChvbmVZZWFyQ291bnQgPCA1MCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICAvLyBUaGlzIGlzIHRoZSBvbmUteWVhciBpbmNyZW1lbnRzIGRhdGEgY29sbGVjdGlvbi5cclxuICAgIC8vIEFkZCBzdHJpY3RGaWx0ZXJUYWcgcHJvcGVydHkgdG8gYWxsIHZhcmlhYmxlcyBoYXZpbmcgdGhlIEFnZSBmaWx0ZXIgdGFnLlxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xyXG4gICAgICBpZiAoZ2V0QWdlVGFnVmFsdWUodmFyaWFibGVzW2ldKSkge1xyXG4gICAgICAgIHZhcmlhYmxlc1tpXS5zdHJpY3RGaWx0ZXJUYWcgPSBcIkFnZVwiO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9wcmVwYXJlRmlsdGVyKGZpbHRlcikge1xyXG4gICAgaWYgKGZpbHRlci50eXBlID09PSBcIlJhbmdlXCIpIHtcclxuICAgICAgY29uc3Qgc3RvcmVGaWx0ZXIgPSBmaWx0ZXI7XHJcbiAgICAgIC8vIEluIHRoZSBjYXNlIG9mIGEgcmFuZ2UgZmlsdGVyLCB3ZSBjb252ZXJ0IHJhbmdlIHZhbHVlcyB0byBudW1iZXJzLlxyXG4gICAgICAvLyBJZiByYW5nZU1pbiBpcyBtaXNzaW5nLCB6ZXJvIHdpbGwgYmUgYXNzaWduZWQuXHJcbiAgICAgIHN0b3JlRmlsdGVyLnJhbmdlTWluID0gTnVtYmVyKGZpbHRlci5yYW5nZU1pbik7XHJcbiAgICAgIGlmICghc3RvcmVGaWx0ZXIucmFuZ2VNaW4pIHtcclxuICAgICAgICBzdG9yZUZpbHRlci5yYW5nZU1pbiA9IDA7XHJcbiAgICAgIH1cclxuICAgICAgc3RvcmVGaWx0ZXIucmFuZ2VNYXggPSBOdW1iZXIoZmlsdGVyLnJhbmdlTWF4KTtcclxuICAgICAgcmV0dXJuIHN0b3JlRmlsdGVyO1xyXG4gICAgfVxyXG4gICAgLy8gSW4gdGhlIGNhc2Ugb2YgYSBlbnVtZXJhdGlvbiBmaWx0ZXIsIHdlIHRyaW0gc3BhY2VzIGFyb3VuZyBlbnVtZXJhdGlvbiBpdGVtcy5cclxuICAgIGZpbHRlci5lbnVtVmFsdWVzID0gdGhpcy5fdHJpbUFycmF5KGZpbHRlci5lbnVtVmFsdWVzLnNwbGl0KFwiLFwiKSkuam9pbihcIixcIik7XHJcbiAgICByZXR1cm4gZmlsdGVyO1xyXG4gIH1cclxuICBfcHJlcGFyZUNhdGVnb3J5KHNvdXJjZUNhdGVnb3J5LCBkYXRhQ29sbGVjdGlvbiwgcHJvY2Vzc2VkRGF0YSkge1xyXG4gICAgLy8gQ29udmVydCBkaXNwbGF5IG9yZGVyIHRvIE51bWJlciBpZiBpdCBpcyBub3QgYSBudW1iZXJcclxuICAgIGNvbnN0IGRpc3BsYXlPcmRlciA9IE51bWJlcihzb3VyY2VDYXRlZ29yeS5kaXNwbGF5T3JkZXIpIHx8IDA7XHJcbiAgICBsZXQgY2F0ZWdvcnkgPSBwcm9jZXNzZWREYXRhLmNhdGVnb3JpZXNbc291cmNlQ2F0ZWdvcnkuaWRdO1xyXG4gICAgaWYgKCFjYXRlZ29yeSkge1xyXG4gICAgICAvLyBJZiB0aGUgY2F0ZWdvcnkgaXMgbmV3LCB3ZSBqdXN0IHJlZ2lzdGVkIGl0LlxyXG4gICAgICBjYXRlZ29yeSA9IHNvdXJjZUNhdGVnb3J5O1xyXG4gICAgICBjYXRlZ29yeS5oYXNoID0ge307IC8vIEEgaGFzaCBvZiB2YXJpYWJsZXMgYmVsb25naW5nIHRvIHRoZSBjYXRlZ29yeSAodXNlIHRoZSB1cHBlcmNhc2UgbG9uZyBJRCBhcyBhIGtleSlcclxuICAgICAgY2F0ZWdvcnkuZGF0YSA9IFtdOyAvLyBBIGxpc3Qgb2YgdmFyaWFibGVzIGJlbG9uZ2luZyB0byB0aGUgY2F0ZWdvcnlcclxuICAgICAgY2F0ZWdvcnkuZGF0YUNvbGxlY3Rpb25zID0gW107IC8vIEEgbGlzdCBvZiBkYXRhIGNvbGxlY3Rpb25zIGFzc29jaWF0ZWQgd2l0aCB0aGUgY2F0ZWdvcnlcclxuICAgICAgY2F0ZWdvcnkuZGlzcGxheU9yZGVyID0gZGlzcGxheU9yZGVyO1xyXG4gICAgICBjYXRlZ29yeS5wb3B1bGFyaXR5SGFzaCA9IHt9OyAvLyBUaGUgaGFzaCBvZiBwb3B1bGFyIHZhcmlhYmxlcyBpcyByZXBsYWNlZCBsYXRlciB3aXRoIGFycmF5XHJcbiAgICAgIC8vIFByb3ZpZGUgZ2V0dGluZyBwb3B1bGFyIHZhcmlhYmxlcyBmb3IgYSBjYXRlZ29yeVxyXG4gICAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgICAgY2F0ZWdvcnkuZ2V0UG9wdWxhclZhcmlhYmxlcyA9IGZ1bmN0aW9uIChvcHRpb25zLCBzdG9yZU9wdGlvbnMpIHtcclxuICAgICAgICBpZiAoIXRoaXMucG9wdWxhcml0eUFycmF5KSB7XHJcbiAgICAgICAgICB0aGlzLnBvcHVsYXJpdHlBcnJheSA9IHNlbGYuX29iamVjdFRvQXJyYXkodGhpcy5wb3B1bGFyaXR5SGFzaCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzZWxmLl9xdWVyeVBvcHVsYXJWYXJpYWJsZXModGhpcy5wb3B1bGFyaXR5QXJyYXksIG9wdGlvbnMsIHN0b3JlT3B0aW9ucyk7XHJcbiAgICAgIH07XHJcbiAgICAgIHByb2Nlc3NlZERhdGEuY2F0ZWdvcmllc1tzb3VyY2VDYXRlZ29yeS5pZF0gPSBjYXRlZ29yeTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBjYXRlZ29yeS5kaXNwbGF5T3JkZXIgPSBNYXRoLm1heChkaXNwbGF5T3JkZXIsIGNhdGVnb3J5LmRpc3BsYXlPcmRlcik7XHJcbiAgICB9XHJcbiAgICBjYXRlZ29yeS5kYXRhQ29sbGVjdGlvbnMucHVzaChkYXRhQ29sbGVjdGlvbik7XHJcbiAgICByZXR1cm4gY2F0ZWdvcnk7XHJcbiAgfVxyXG4gIF9xdWVyeVBvcHVsYXJWYXJpYWJsZXMocG9wdWxhcml0eUFycmF5LCBvcHRpb25zLCBzdG9yZU9wdGlvbnMpIHtcclxuICAgIGNvbnN0IGZpbHRlciA9IChzdG9yZU9wdGlvbnMgJiYgc3RvcmVPcHRpb25zLnF1ZXJ5RmlsdGVyKSB8fCB0aGlzLnF1ZXJ5RmlsdGVyO1xyXG4gICAgY29uc3QgZGF0YSA9IHRoaXMucXVlcnlFbmdpbmUoKHBvcHVsYXJpdHlEYXRhKSA9PiB7XHJcbiAgICAgIGNvbnN0IHZhcmlhYmxlID0gdGhpcy5nZXQocG9wdWxhcml0eURhdGEuaWQpO1xyXG4gICAgICByZXR1cm4gdmFyaWFibGUgPyBmaWx0ZXIodmFyaWFibGUpIDogZmFsc2U7XHJcbiAgICB9LCBvcHRpb25zKShwb3B1bGFyaXR5QXJyYXkpO1xyXG4gICAgcmV0dXJuIGRhdGEubWFwKChkYXRhKSA9PiB0aGlzLmdldChkYXRhLmlkKSk7XHJcbiAgfVxyXG4gIF9wcm9jZXNzVmFyaWFibGUoc291cmNlVmFyaWFibGUsIGRhdGFDb2xsZWN0aW9uLCBwcm9jZXNzZWREYXRhKSB7XHJcbiAgICAvLyBQb3B1bGFyIHZhcmlhYmxlcyBmaXggc2hvdWxkIGJlIHRoZSBmaXJzdCBhY3Rpb24uXHJcbiAgICBsZXQgcG9wdWxhcml0eSA9IHNvdXJjZVZhcmlhYmxlLnBvcHVsYXJpdHk7XHJcbiAgICBpZiAocG9wdWxhcml0eSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIGRlbGV0ZSBzb3VyY2VWYXJpYWJsZS5wb3B1bGFyaXR5O1xyXG4gICAgICBwb3B1bGFyaXR5ID0gTnVtYmVyKHBvcHVsYXJpdHkpO1xyXG4gICAgfVxyXG4gICAgaWYgKCFkYXRhQ29sbGVjdGlvbi5jYXRlZ29yaWVzIHx8ICFkYXRhQ29sbGVjdGlvbi5jYXRlZ29yaWVzLmxlbmd0aCkge1xyXG4gICAgICBzb3VyY2VWYXJpYWJsZS5taXNzZWRJbkNhdGVnb3JpZXMgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgLy8gVGhlbiB3ZSBlbnN1cmUgdGhhdCB0aGUgdmFyaWFibGUgaXMgYWxsb3dlZC5cclxuICAgIGlmICh0aGlzLl9pc1ZhcmlhYmxlRGlzYWxsb3dlZChzb3VyY2VWYXJpYWJsZSkpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fcHJlcGFyZVZhcmlhYmxlKHNvdXJjZVZhcmlhYmxlKTtcclxuICAgIC8vIFRoZSBpZCBvZiB2YXJpYWJsZSBpcyB1c2VkIGZvciBjb2xsZWN0aW5nIHZhcmlhYmxlcyBvbmx5LiBJdCBpcyBjYXNlIGluc2Vuc2l0aXZlLlxyXG4gICAgLy8gSW4gdmFyaWFibGVzIHN0b3JlIHdlIHVzZSB0aGUgZnVsbE5hbWUgYXMgSUQgcHJvcGVydHkuXHJcbiAgICBjb25zdCBpZCA9IHRoaXMuX2NyZWF0ZVVuaXF1ZVZhcmlhYmxlSWQoc291cmNlVmFyaWFibGUpLnRvVXBwZXJDYXNlKCk7XHJcbiAgICBsZXQgZnVsbE5hbWUgPSBkYXRhQ29sbGVjdGlvbi5pZCArIFwiLlwiICsgc291cmNlVmFyaWFibGUuaWQ7IC8vIHZhcmlhYmxlIGlkIGlzIGluIHVwcGVyIGNhc2UgaGVyZSwgc2VlIF9wcmVwYXJlVmFyaWFibGUoKSBtZXRob2RcclxuICAgIGNvbnN0IGlzQWxsb3dlZCA9IHRoaXMuX2lzVmFyaWFibGVBbGxvd2VkSW5DYXRlZ29yaWVzKHNvdXJjZVZhcmlhYmxlLCBkYXRhQ29sbGVjdGlvbik7XHJcbiAgICBsZXQgdmFyaWFibGUgPSBwcm9jZXNzZWREYXRhLnZhcmlhYmxlc1tpZF07XHJcbiAgICBpZiAoIXZhcmlhYmxlKSB7XHJcbiAgICAgIC8vIFRoZSB2YXJpYWJsZSBpcyBuZXcuIEFkZCB0aGUgdmFyaWFibGUgdG8gdGhlIGhhc2ggb2YgdW5pcXVlIHZhcmlhYmxlIGluc3RhbmNlcy5cclxuICAgICAgdmFyaWFibGUgPSBzb3VyY2VWYXJpYWJsZTtcclxuICAgICAgdmFyaWFibGVbdGhpcy5pZFByb3BlcnR5XSA9IGZ1bGxOYW1lO1xyXG4gICAgICBwcm9jZXNzZWREYXRhLnZhcmlhYmxlc1tpZF0gPSB2YXJpYWJsZTtcclxuICAgICAgY29uc3QgaXNIaWRkZW4gPSB2YXJpYWJsZS5oaWRlSW5EYXRhQnJvd3NlciAmJiBzb3VyY2VWYXJpYWJsZS5oaWRlSW5EYXRhQnJvd3NlciAmJiB0aGlzLl9oaWRlR2xvYmFsSGlkZGVuVmFyaWFibGVzKCk7XHJcbiAgICAgIGlmICghIWlzSGlkZGVuKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuX2RhdGEucHVzaCh2YXJpYWJsZSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgY29uc3QgdHJ1c3RlZFNvdXJjZSA9ICFzb3VyY2VWYXJpYWJsZS5taXNzZWRJbkNhdGVnb3JpZXM7XHJcbiAgICAgIGNvbnN0IGlzSGlkZGVuID0gdmFyaWFibGUuaGlkZUluRGF0YUJyb3dzZXIgJiYgc291cmNlVmFyaWFibGUuaGlkZUluRGF0YUJyb3dzZXIgJiYgdGhpcy5faGlkZUdsb2JhbEhpZGRlblZhcmlhYmxlcygpO1xyXG4gICAgICBsZXQgZGVzYyA9IHZhcmlhYmxlLm1pc3NlZEluQ2F0ZWdvcmllc1xyXG4gICAgICAgID8gc291cmNlVmFyaWFibGUuX19zb3VyY2VEZXNjIHx8IHZhcmlhYmxlLl9fc291cmNlRGVzY1xyXG4gICAgICAgIDogdmFyaWFibGUuX19zb3VyY2VEZXNjIHx8IHNvdXJjZVZhcmlhYmxlLl9fc291cmNlRGVzYztcclxuICAgICAgaWYgKHZhcmlhYmxlLm1pc3NlZEluQ2F0ZWdvcmllcyAmJiB0cnVzdGVkU291cmNlKSB7XHJcbiAgICAgICAgZGVsZXRlIHZhcmlhYmxlLm1pc3NlZEluQ2F0ZWdvcmllcztcclxuICAgICAgfVxyXG4gICAgICAvLyBUaGUgdmFyaWFibGUgaXMgYWxyZWFkeSByZWdpc3RlcmVkLlxyXG4gICAgICAvLyBXZSB1cGRhdGUgdGhlIG9sZCBpbnN0YW5jZSB3aXRoIHRoZSBuZXcgb25lIGlmIHRoZSBuZXcgdmFyaWFibGUgaGFzIGZpbHRlcmluZyB0YWdzXHJcbiAgICAgIC8vIChfcmVwIHZhcmlhYmxlcyBkb24ndCBoYXZlIGZpbHRlcmluZyB0YWdzIGFuZCBhcmUgdW50cnVzdGVkKS5cclxuICAgICAgaWYgKHRydXN0ZWRTb3VyY2UgJiYgT2JqZWN0LmtleXMoc291cmNlVmFyaWFibGUuZmlsdGVyaW5nVGFncykubGVuZ3RoKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHZhcmlhYmxlLmZpbHRlcmluZ1RhZ3MpLmxlbmd0aCkge1xyXG4gICAgICAgICAgLy8gV2UgbWVyZ2Uga2V5IHByb3BlcnRpZXMgb2YgdmFyaWFibGUgaW5zdGFuY2VzIGlmIHRoZXkgYm90aCBoYXZlIGZpbHRlcmluZyB0YWdzLlxyXG4gICAgICAgICAgLy8gVGhlIG9sZCB2YXJpYWJsZSBwcm9wZXJ0aWVzIGFyZSBtb3JlIHByZWZlcmFibGUuXHJcbiAgICAgICAgICBtaXhpbihzb3VyY2VWYXJpYWJsZS5maWx0ZXJpbmdUYWdzLCB2YXJpYWJsZS5maWx0ZXJpbmdUYWdzKTtcclxuICAgICAgICAgIHNvdXJjZVZhcmlhYmxlLmluZGV4QmFzZSA9IHZhcmlhYmxlLmluZGV4QmFzZSB8fCBzb3VyY2VWYXJpYWJsZS5pbmRleEJhc2U7XHJcbiAgICAgICAgICBzb3VyY2VWYXJpYWJsZVt0aGlzLmlkUHJvcGVydHldID0gdmFyaWFibGVbdGhpcy5pZFByb3BlcnR5XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAvLyBUaGUgbmV3IHZhcmlhYmxlIGlzIG1vcmUgcHJlZmVyYWJsZS5cclxuICAgICAgICAgIHNvdXJjZVZhcmlhYmxlW3RoaXMuaWRQcm9wZXJ0eV0gPSBmdWxsTmFtZTtcclxuICAgICAgICAgIGRlc2MgPSBzb3VyY2VWYXJpYWJsZS5fX3NvdXJjZURlc2MgfHwgdmFyaWFibGUuX19zb3VyY2VEZXNjO1xyXG4gICAgICAgIH1cclxuICAgICAgICBtaXhpbih2YXJpYWJsZSwgc291cmNlVmFyaWFibGUpO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIFVwZGF0ZSB0aGUgZGVzY3JpcHRpb25cclxuICAgICAgdmFyaWFibGUuX19zb3VyY2VEZXNjID0gZGVzYztcclxuICAgICAgaWYgKGRlc2MpIHtcclxuICAgICAgICB2YXJpYWJsZS5kZXNjcmlwdGlvbiA9IGRlc2M7XHJcbiAgICAgIH1cclxuICAgICAgdmFyaWFibGUuaGlkZUluRGF0YUJyb3dzZXIgPSAhIWlzSGlkZGVuO1xyXG4gICAgfVxyXG4gICAgLy8gV2UgcmVnaXN0ZXIgdGhpcyB2YXJpYWJsZSB1bmRlciBmdWxsTmFtZSBrZXkgdG8gYWxsb3cgZ2V0IGl0IGZyb20gdGhlIHN0b3JlIGJ5IGFueSBvZiBpdHMgZnVsbCBuYW1lcy5cclxuICAgIC8vIFRoaXMgYmVoYXZpb3IgY291bGQgYmUgb3ZlcnJpZGVuIGluIHN1YmNsYXNzZXMuXHJcbiAgICB0aGlzLl9yZWdpc3RlclZhcmlhYmxlKHZhcmlhYmxlLCBmdWxsTmFtZSk7XHJcbiAgICAvLyBHZXQgdGhlIHByaW1hcnkgZnVsbCBuYW1lIG9mIHRoZSB2YXJpYWJsZS5cclxuICAgIGZ1bGxOYW1lID0gdmFyaWFibGVbdGhpcy5pZFByb3BlcnR5XTtcclxuICAgIGNvbnN0IGZ1bGxOYW1lVXBwZXJDYXNlID0gZnVsbE5hbWUudG9VcHBlckNhc2UoKTtcclxuICAgIC8vIEFkZCB0aGUgdmFyaWFibGUgdG8gdGhlIGRhdGFDb2xsZWN0aW9uLlxyXG4gICAgLy8gV2Ugc2F2ZSB0aGUgbmF0dXJhbCBvcmRlciBvZiB2YXJpYWJsZXMgd2l0aGluIHRoZSBkYXRhIGNvbGxlY3Rpb24uXHJcbiAgICBpZiAoIWRhdGFDb2xsZWN0aW9uLmhhc1ZhcmlhYmxlKHZhcmlhYmxlKSkge1xyXG4gICAgICBkYXRhQ29sbGVjdGlvbi5oYXNoW3ZhcmlhYmxlLmlkXSA9ICEhaXNBbGxvd2VkOyAvLyBXZSBzYXZlIHZhcmlhYmxlIHZpc2liaWxpdHkgZm9yIHF1ZXJ5IGluIHRoaXMgaGFzaFxyXG4gICAgICBkYXRhQ29sbGVjdGlvbi5kYXRhLnB1c2godmFyaWFibGUpO1xyXG4gICAgfVxyXG4gICAgLy8gSWYgdGhlIHNvdXJjZSB2YXJpYWJsZSBpc24ndCBhbGxvd2VkIGluIGNhdGVnb3JpZXMsIHdlIGRvbid0IGFkZCBpdC5cclxuICAgIGlmICghaXNBbGxvd2VkKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIC8vIEFkZCB0aGUgdmFyaWFibGUgdG8gdGhlIGNhdGVnb3JpZXMuXHJcbiAgICAvLyBXZSBzYXZlIGEgbmF0dXJhbCBvcmRlciBvZiB2YXJpYWJsZXMgd2l0aGluIGNhdGVnb3JpZXMuXHJcbiAgICAvLyBXZSBhbHNvIHVwZGF0ZSBwb3B1bGFyIHZhcmlhYmxlcyBpZiBuZWNlc3NhcnkuXHJcbiAgICBkYXRhQ29sbGVjdGlvbi5jYXRlZ29yaWVzLmZvckVhY2goKGNhdGVnb3J5KSA9PiB7XHJcbiAgICAgIGlmICghY2F0ZWdvcnkuaGFzaFtmdWxsTmFtZVVwcGVyQ2FzZV0pIHtcclxuICAgICAgICBjYXRlZ29yeS5oYXNoW2Z1bGxOYW1lVXBwZXJDYXNlXSA9IHZhcmlhYmxlO1xyXG4gICAgICAgIGNhdGVnb3J5LmRhdGEucHVzaCh2YXJpYWJsZSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHBvcHVsYXJpdHkpIHtcclxuICAgICAgICBsZXQgcG9wdWxhcml0eURhdGEgPSBjYXRlZ29yeS5wb3B1bGFyaXR5SGFzaFtmdWxsTmFtZVVwcGVyQ2FzZV07XHJcbiAgICAgICAgaWYgKCFwb3B1bGFyaXR5RGF0YSkge1xyXG4gICAgICAgICAgcG9wdWxhcml0eURhdGEgPSB7IGlkOiBmdWxsTmFtZSwgcG9wdWxhcml0eSB9O1xyXG4gICAgICAgICAgY2F0ZWdvcnkucG9wdWxhcml0eUhhc2hbZnVsbE5hbWVVcHBlckNhc2VdID0gcG9wdWxhcml0eURhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHBvcHVsYXJpdHlEYXRhLnBvcHVsYXJpdHkgPCBwb3B1bGFyaXR5KSB7XHJcbiAgICAgICAgICBwb3B1bGFyaXR5RGF0YS5wb3B1bGFyaXR5ID0gcG9wdWxhcml0eTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyBQcm90ZWN0ZWQgaG9va3NcclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvLyBUaGlzIGhvb2sgcmV0dXJucyB0cnVlIGlmIHRoZSBkYXRhIGNvbGxlY3Rpb24gc2hvdWxkIGJlIGZpbHRlcmVkIG91dC5cclxuICBfaXNEYXRhQ29sbGVjdGlvbkRpc2FsbG93ZWQoZGF0YUNvbGxlY3Rpb24pIHtcclxuICAgIHJldHVybiAhZGF0YUNvbGxlY3Rpb24ubWV0YWRhdGEgfHwgIWRhdGFDb2xsZWN0aW9uLm1ldGFkYXRhLmNhdGVnb3JpZXM7XHJcbiAgfVxyXG4gIC8vIFRoaXMgaG9vayByZXR1cm5zIHRydWUgaWYgdGhlIHZhcmlhYmxlIHNob3VsZCBiZSBmaWx0ZXJlZCBvdXQuXHJcbiAgX2lzVmFyaWFibGVEaXNhbGxvd2VkKHZhcmlhYmxlKSB7XHJcbiAgICAvLyBJZiB0aGVyZSdzIG5vIGZpZWxkIGNhdGVnb3J5LCB2YXJpYWJsZSBpcyBub3QgdmFsaWRcclxuICAgIHJldHVybiAhdmFyaWFibGUuZmllbGRDYXRlZ29yeTtcclxuICB9XHJcbiAgLy8gVGhpcyBob29rIHJldHVybnMgYSB2YWx1ZSB1bmlxdWVseSBpZGVudGlmeWluZyB0aGUgZ2l2ZW4gdmFyaWFibGUuXHJcbiAgLy8gQnkgZGVmYXVsdCB3ZSBwcm92aWRlIGEgdW5pcXVlIGNvbWJpbmF0aW9uIG9mIHZhcmlhYmxlIElEIGFuZCBhbGlhcy5cclxuICBfY3JlYXRlVW5pcXVlVmFyaWFibGVJZCh2YXJpYWJsZSkge1xyXG4gICAgLy8gV2UgdXNlIGFsaWFzIGluc3RlYWQgb2YgZGVzY3JpcHRpb24gYmVjYXVzZSB0aGUgZGVzY3JpcHRpb24gY291bGQgYmUgbWlzc2luZy5cclxuICAgIHJldHVybiB2YXJpYWJsZS5pZCArIFwiLlwiICsgdmFyaWFibGUuYWxpYXM7XHJcbiAgfVxyXG4gIC8vIFRoaXMgaG9vayByZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIHZhcmlhYmxlIGNhbiBiZSBhZGRlZCB0byBjYXRlZ29yeSBjb2xsZWN0aW9ucy5cclxuICBfaXNWYXJpYWJsZUFsbG93ZWRJbkNhdGVnb3JpZXMoX3ZhcmlhYmxlLCBfZGF0YUNvbGxlY3Rpb24pIHtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuICAvLyBQcmVwYXJlcyBhIHNvdXJjZSB2YXJpYWJsZS5cclxuICAvLyBEZWZhdWx0IGltcGxlbWVudGF0aW9uIGNvbnZlcnRzIGZpbHRlcmluZyB0YWdzIGZyb20gYW4gYXJyYXkgdG8gb2JqZWN0LCBwcm92aWRlcyB2YWx1ZXMgZm9yIGJhc2UgcHJvcGVydGllcyBvZiB2YWxpYWJsZXMsXHJcbiAgLy8gYW5kIGFzc2lnbnMgYW4gYWxpYXMgYXMgYSBkZXNjcmlwdGlvbiBpZiB0aGUgZGVzY3JpcHRpb24gaXMgbWlzc2luZy5cclxuICBfcHJlcGFyZVZhcmlhYmxlKHZhcmlhYmxlKSB7XHJcbiAgICBjb25zdCBzdG9yZVZhcmlhYmxlID0gdmFyaWFibGU7XHJcbiAgICAvLyBHRSB2YXJpYWJsZSBJRHMgYXJlIGNhc2UgaW5zZW5zaXRpdmUuIENvbnZlcnQgdGhlbSB0byB1cHBlciBjYXNlLlxyXG4gICAgc3RvcmVWYXJpYWJsZS5pZCA9IHZhcmlhYmxlLmlkLnRvVXBwZXJDYXNlKCk7XHJcbiAgICBzdG9yZVZhcmlhYmxlLnVuaXRzID0gdG9WYXJpYWJsZVVuaXRzKHZhcmlhYmxlLnVuaXRzKTtcclxuICAgIC8vIENvbnZlcnQgZmlsdGVyaW5nIHRhZ3MgZnJvbSBhbiBhcnJheSB0byBvYmplY3QuXHJcbiAgICBzdG9yZVZhcmlhYmxlLmZpbHRlcmluZ1RhZ3MgPSB0aGlzLl9hcnJheVRvT2JqZWN0KHZhcmlhYmxlLmZpbHRlcmluZ1RhZ3MsIFwiaWRcIik7XHJcbiAgICAvLyBSZXBsYWNlIG1pc3NpbmcgYmFzZSBwcm9wZXJ0aWVzIHdpdGggbnVsbCB2YWx1ZXMuXHJcbiAgICBzdG9yZVZhcmlhYmxlLnBlcmNlbnRCYXNlID0gdmFyaWFibGUucGVyY2VudEJhc2UgfHwgbnVsbDtcclxuICAgIHN0b3JlVmFyaWFibGUucGVyY2VudEJhc2VBbGlhcyA9IHZhcmlhYmxlLnBlcmNlbnRCYXNlQWxpYXMgfHwgbnVsbDtcclxuICAgIHN0b3JlVmFyaWFibGUuYXZlcmFnZUJhc2UgPSB2YXJpYWJsZS5hdmVyYWdlQmFzZSB8fCBudWxsO1xyXG4gICAgc3RvcmVWYXJpYWJsZS5hdmVyYWdlQmFzZUFsaWFzID0gdmFyaWFibGUuYXZlcmFnZUJhc2VBbGlhcyB8fCBudWxsO1xyXG4gICAgc3RvcmVWYXJpYWJsZS5pbmRleEJhc2UgPSB2YXJpYWJsZS5pbmRleEJhc2UgfHwgbnVsbDtcclxuICAgIC8vIEVuc3VyZSB0aGF0IHRoZSBkZXNjcmlwdGlvbiBwcm9wZXJ0eSBwcmVzZW50cy5cclxuICAgIC8vIElmIGl0IGlzIG1pc3NpbmcgKGUuZy4gZm9yIEtleUdsb2JhbEZhY3RzKSwgd2UgYXNzaWduIGFsaWFzIGFzIGEgZGVzY3JpcHRpb24uXHJcbiAgICBzdG9yZVZhcmlhYmxlLl9fc291cmNlRGVzYyA9IHZhcmlhYmxlLmRlc2NyaXB0aW9uO1xyXG4gICAgaWYgKCFzdG9yZVZhcmlhYmxlLmRlc2NyaXB0aW9uKSB7XHJcbiAgICAgIHN0b3JlVmFyaWFibGUuZGVzY3JpcHRpb24gPSBzdG9yZVZhcmlhYmxlLmFsaWFzO1xyXG4gICAgfVxyXG4gIH1cclxuICAvLyBUaGlzIGhvb2sgcmVnaXN0ZXJzIGEgdmFyaWFibGUgd2l0aCB0aGUgZ2l2ZW4gZnVsbCBuYW1lIGluIHRoZSB2YXJpYWJsZSBoYXNoXHJcbiAgX3JlZ2lzdGVyVmFyaWFibGUodmFyaWFibGUsIGZ1bGxOYW1lKSB7XHJcbiAgICB0aGlzLl92YXJpYWJsZXNbZnVsbE5hbWVdID0gdmFyaWFibGU7XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vIFByb3RlY3RlZCB1dGlsaXR5IG1ldGhvZHNcclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvLyBUcmltcyBzb3VyY2UgYXJyYXkgZWxlbWVudHMgYW5kIHJldHVybnMgdGhlIHNvdXJjZSBhcnJheS5cclxuICBfdHJpbUFycmF5KHNvdXJjZSkge1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzb3VyY2UubGVuZ3RoOyBpKyspIHtcclxuICAgICAgc291cmNlW2ldID0gc291cmNlW2ldLnRyaW0oKTtcclxuICAgIH1cclxuICAgIHJldHVybiBzb3VyY2U7XHJcbiAgfVxyXG4gIC8vIENvbnZlcnRzIGEgc291cmNlIG9iamVjdCB0byBhcnJheS5cclxuICBfb2JqZWN0VG9BcnJheShzb3VyY2UpIHtcclxuICAgIGNvbnN0IHRhcmdldCA9IFtdO1xyXG4gICAgZm9yIChjb25zdCBpZCBpbiBzb3VyY2UpIHtcclxuICAgICAgdGFyZ2V0LnB1c2goc291cmNlW2lkXSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGFyZ2V0O1xyXG4gIH1cclxuICAvLyBDb252ZXJ0cyBhIHNvdXJjZSBhcnJheSB0byBvYmplY3QuXHJcbiAgX2FycmF5VG9PYmplY3Qoc291cmNlLCBpZFByb3BlcnR5LCBjb252ZXJ0ZXIpIHtcclxuICAgIGNvbnN0IHRhcmdldCA9IHt9O1xyXG4gICAgc291cmNlLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgY29uc3QgaWQgPSBpZFByb3BlcnR5ID8gaXRlbVtpZFByb3BlcnR5XSA6IGl0ZW07XHJcbiAgICAgIHRhcmdldFtpZF0gPSBjb252ZXJ0ZXIgPyBjb252ZXJ0ZXIoaXRlbSkgOiBpdGVtO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdGFyZ2V0O1xyXG4gIH1cclxuICAvLyBPdmVycmlkZW4gaW4gR2VvZW5yaWNobWVudFZhcmlhYmxlU3RvcmVcclxuICBfaGlkZUdsb2JhbEhpZGRlblZhcmlhYmxlcygpIHtcclxuICAgIHJldHVybiAhdGhpcy5kaXNwbGF5QWxsR2xvYmFsVmFyaWFibGVzO1xyXG4gIH1cclxufVxuXG4vLyBnZW9lbnJpY2htZW50LnN0b3Jlc1xyXG5jbGFzcyBHZW9lbnJpY2htZW50VmFyaWFibGVTdG9yZSBleHRlbmRzIFZhcmlhYmxlU3RvcmUge1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vIENvbnN0cnVjdG9yXHJcbiAgLy9cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgY29uc3RydWN0b3IocGFyYW1zKSB7XHJcbiAgICBzdXBlcihwYXJhbXMpO1xyXG4gICAgLyoqXHJcbiAgICAgKiBJRCB1c2VkIGZvciBkZXNpZ25hdGluZyBnbG9iYWwgc2V0dGluZ3MgaW4gQ291bnRyeSBkcm9wZG93bi5cclxuICAgICAqL1xyXG4gICAgdGhpcy5nbG9iYWxDb3VudHJ5SUQgPSBcIl9cIjtcclxuICAgIHRoaXMuY291bnRyaWVzID0gbmV3IERlZmVycmVkU3RvcmUoeyByZXNvbHZlcjogdGhpcy5fZ2V0Q291bnRyaWVzLmJpbmQodGhpcykgfSk7XHJcbiAgICB0aGlzLmNhdGVnb3JpZXMucmVzb2x2ZXIgPSB0aGlzLmRhdGFDb2xsZWN0aW9ucy5yZXNvbHZlciA9IHRoaXMuX3Jlc29sdmVDb3VudHJ5SUQuYmluZCh0aGlzKTtcclxuICB9XHJcbiAgc3luY2hyb25pemUoY291bnRyeUlEKSB7XHJcbiAgICByZXR1cm4gY291bnRyeUlEID09PSB1bmRlZmluZWQgPyB0aGlzLl9yZXNvbHZlQ291bnRyeUlEUHJvbWlzZSA6IHRoaXMuX3Jlc29sdmVDb3VudHJ5SUQoeyBjb3VudHJ5SUQgfSk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEByZXR1cm5zIGNvdW50cnkgSUQgb3IgdGhpcy5nbG9iYWxDb3VudHJ5SUQuXHJcbiAgICovXHJcbiAgZ2V0Q3VycmVudENvdW50cnlJRCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9jdXJyZW50Q291bnRyeUlEO1xyXG4gIH1cclxuICBfZ2V0Q291bnRyaWVzKF9xdWVyeSkge1xyXG4gICAgaWYgKCF0aGlzLl9nZXRDb3VudHJpZXNQcm9taXNlKSB7XHJcbiAgICAgIHRoaXMuX2dldENvdW50cmllc1Byb21pc2UgPSB0aGlzLl9nZXRHZW9lbnJpY2htZW50VGFzaygpXHJcbiAgICAgICAgLmdldEF2YWlsYWJsZUNvdW50cmllcygpXHJcbiAgICAgICAgLnRoZW4oKGNvdW50cmllcykgPT4ge1xyXG4gICAgICAgIHRoaXMuY291bnRyaWVzLnNldERhdGEoY291bnRyaWVzKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5fZ2V0Q291bnRyaWVzUHJvbWlzZTtcclxuICB9XHJcbiAgX3Jlc29sdmVDb3VudHJ5SUQocXVlcnkpIHtcclxuICAgIHF1ZXJ5ID0gcXVlcnkgfHwge307XHJcbiAgICAvLyBXZSBkb24ndCByZXNvbHZlIGNvdW50cnlJRCBwcm9wZXJ0eSBpbiB0aGUgY2FzZSBvZiBub24tb2JqZWN0IHF1ZXJ5LlxyXG4gICAgaWYgKHR5cGVvZiBxdWVyeSAhPT0gXCJvYmplY3RcIikge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGNvbnN0IGNvdW50cnlJRCA9IHF1ZXJ5LmNvdW50cnlJRCB8fCB0aGlzLmdsb2JhbENvdW50cnlJRDtcclxuICAgIGlmIChjb3VudHJ5SUQgIT09IHRoaXMuX2N1cnJlbnRDb3VudHJ5SUQpIHtcclxuICAgICAgdGhpcy5fY3VycmVudENvdW50cnlJRCA9IGNvdW50cnlJRDtcclxuICAgICAgdGhpcy5fY2xlYXJBbGxTdG9yZXMoKTtcclxuICAgICAgdGhpcy5fcmVzb2x2ZUNvdW50cnlJRFByb21pc2UgPSB0aGlzLl9nZXREYXRhQ29sbGVjdGlvbnMoY291bnRyeUlEID09PSB0aGlzLmdsb2JhbENvdW50cnlJRCA/IG51bGwgOiBjb3VudHJ5SUQpLnRoZW4oKGRhdGFDb2xsZWN0aW9ucykgPT4ge1xyXG4gICAgICAgIHRoaXMuX3Byb2Nlc3NEYXRhQ29sbGVjdGlvbnMoZGF0YUNvbGxlY3Rpb25zKTtcclxuICAgICAgfSk7XHJcbiAgICAgIC8vIElmIGZhdm9yaXRlcyBhcmUgc3BlY2lmaWVkLCB0aGUgcHJvbWlzZSB3aWxsIGFsc28gd2FpdCBmb3IgdGhlaXIgc3luY2hyb25pemF0aW9uLlxyXG4gICAgICAvLyBUaGUgc3luY2hyb25pemF0aW9uIG9mIGZhdm9yaXRlcyBzaG91bGQgTkVWRVIgY29tcGxldGUgd2l0aCBlcnJvciFcclxuICAgICAgaWYgKHRoaXMuZmF2b3JpdGVzICYmIHRoaXMuZmF2b3JpdGVzLnN5bmNocm9uaXplKSB7XHJcbiAgICAgICAgdGhpcy5fcmVzb2x2ZUNvdW50cnlJRFByb21pc2UgPSBQcm9taXNlLmFsbChbXHJcbiAgICAgICAgICB0aGlzLl9yZXNvbHZlQ291bnRyeUlEUHJvbWlzZSxcclxuICAgICAgICAgIHRoaXMuZmF2b3JpdGVzLnN5bmNocm9uaXplKGNvdW50cnlJRClcclxuICAgICAgICBdKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuX3Jlc29sdmVDb3VudHJ5SURQcm9taXNlO1xyXG4gIH1cclxuICBfZ2V0RGF0YUNvbGxlY3Rpb25zKGNvdW50cnlJRCkge1xyXG4gICAgLy8gSWYgdmFyaWFibGVGaWVsZHMgYXJlIG5vdCBzcGVjaWZpZWQgdXNlICogdG8gcmV0cmlldmUgdGhlIGRlZmluaXRpb24gdG8gZGlzcGxheSBpbiBpbmZvIGljb24gcG9wdXBcclxuICAgIHJldHVybiB0aGlzLl9nZXRHZW9lbnJpY2htZW50VGFzaygpLmdldERhdGFDb2xsZWN0aW9ucyhjb3VudHJ5SUQsIG51bGwsIHRoaXMudmFyaWFibGVGaWVsZHMgfHwgXCIqXCIpO1xyXG4gIH1cclxuICBfZ2V0R2VvZW5yaWNobWVudFRhc2soKSB7XHJcbiAgICByZXR1cm4gbmV3IEdlb2VucmljaG1lbnRUYXNrKGluZm9ncmFwaGljc0NvbmZpZy5zZXJ2ZXIsIGluZm9ncmFwaGljc0NvbmZpZy50b2tlbik7XHJcbiAgfVxyXG4gIC8vIFJldHVybnMgdHJ1ZSBpZiBHbG9iYWwgVmFyaWFibGVzIHNob3VsZCBiZSBoaWRkZW5cclxuICBfaGlkZUdsb2JhbEhpZGRlblZhcmlhYmxlcygpIHtcclxuICAgIHJldHVybiAhdGhpcy5kaXNwbGF5QWxsR2xvYmFsVmFyaWFibGVzIHx8IHRoaXMuX2N1cnJlbnRDb3VudHJ5SUQgIT09IHRoaXMuZ2xvYmFsQ291bnRyeUlEO1xyXG4gIH1cclxufVxuXG5sZXQgRGF0YUJyb3dzZXIgPSBjbGFzcyBEYXRhQnJvd3NlciBleHRlbmRzIERhdGFCcm93c2VyQmFzZSB7XHJcbiAgcG9zdENyZWF0ZSgpIHtcclxuICAgIHRoaXMuX3NldChcInZhcmlhYmxlc1wiLCB0aGlzLnZhcmlhYmxlcyB8fCBuZXcgR2VvZW5yaWNobWVudFZhcmlhYmxlU3RvcmUoeyBkZXJpdmF0aXZlVmFyaWFibGVzOiB0aGlzLmFsbG93RGVyaXZhdGl2ZVZhcmlhYmxlcywgZGlzcGxheUFsbEdsb2JhbFZhcmlhYmxlczogdGhpcy5kaXNwbGF5QWxsR2xvYmFsVmFyaWFibGVzIH0pKTtcclxuICAgIHRoaXMuX2NvbnRlbnRGYWN0b3J5ID0gdGhpcy5fY29udGVudEZhY3RvcnkgfHwgbmV3IERhdGFCcm93c2VyQ29udGVudEZhY3RvcnkoKTtcclxuICAgIHN1cGVyLnBvc3RDcmVhdGUoKTtcclxuICB9XHJcbn07XHJcbkRhdGFCcm93c2VyID0gX19kZWNvcmF0ZShbXHJcbiAgaSRYKClcclxuXSwgRGF0YUJyb3dzZXIpO1xuXG5jb25zdCBEYXRhQnJvd3NlciQxID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe1xuICAgIF9fcHJvdG9fXzogbnVsbCxcbiAgICBnZXQgRGF0YUJyb3dzZXIgKCkgeyByZXR1cm4gRGF0YUJyb3dzZXI7IH1cbn0pO1xuXG5leHBvcnQgeyBjJF8gYXMgJCwgQSQyIGFzIEEsIG0kbyBhcyBCLCBmJGYgYXMgQywgbCRGIGFzIEQsIHkkMSBhcyBFLCBMJDYgYXMgRiwgeCRkIGFzIEcsIHIkQSBhcyBILCBlJEkgYXMgSSwgcCRRIGFzIEosIHokMiBhcyBLLCBMJDIgYXMgTCwgTSQzIGFzIE0sIHQkdSBhcyBOLCBrJDQgYXMgTywgcyR0IGFzIFAsIFUkMiBhcyBRLCB5JHYgYXMgUiwgbiRUIGFzIFMsIGwkdyBhcyBULCBVJDEgYXMgVSwgeSRhIGFzIFYsIGYkYiBhcyBXLCBzJGkgYXMgWCwgYyQxMyBhcyBZLCBlJHUgYXMgWiwgeSRyIGFzIF8sIHUkNCBhcyBhLCByJGcgYXMgYSQsIGkkWCBhcyBhMCwgdSREIGFzIGExLCBRJDIgYXMgYTIsIGckbyBhcyBhMywgVyQyIGFzIGE0LCBpJE0gYXMgYTUsIHkkdCBhcyBhNiwgYSQ5IGFzIGE3LCBHJDYgYXMgYTgsIFQkNiBhcyBhOSwgQyQ5IGFzIGFBLCBuJEYgYXMgYUIsIHIkOCBhcyBhQywgZyRnIGFzIGFELCByJHMgYXMgYUUsIG0kRiBhcyBhRiwgdSR5IGFzIGFHLCBuJEsgYXMgYUgsIGUkRyBhcyBhSSwgdCRHIGFzIGFKLCBnJGEgYXMgYUssIG8kQSBhcyBhTCwgdiRhIGFzIGFNLCB0JEggYXMgYU4sIHckNCBhcyBhTywgcCQxMCBhcyBhUCwgcCRUIGFzIGFRLCByJDQgYXMgYVIsIGQkdSBhcyBhUywgUCQ4IGFzIGFULCB0JG8gYXMgYVUsIGUkaiBhcyBhViwgcyRuIGFzIGFXLCBrJDUgYXMgYVgsIFAkMyBhcyBhWSwgRyQzIGFzIGFaLCB3JDYgYXMgYV8sIHAkMTggYXMgYWEsIGUkQyBhcyBhYiwgZiQ0IGFzIGFjLCBjJGUgYXMgYWQsIEwkNSBhcyBhZSwgbiRlIGFzIGFmLCBldCBhcyBhZywgYSRJIGFzIGFoLCBBJDggYXMgYWksIG8kdiBhcyBhaiwgbyR5IGFzIGFrLCB0JE4gYXMgYWwsIHckOSBhcyBhbSwgbiQzIGFzIGFuLCBhJEIgYXMgYW8sIGckMSBhcyBhcCwgdCRJIGFzIGFxLCBkJG8gYXMgYXIsIEckMSBhcyBhcywgZCRzIGFzIGF0LCBSJDUgYXMgYXUsIFMkOCBhcyBhdiwgcyRIIGFzIGF3LCBuJFIgYXMgYXgsIEMkOCBhcyBheSwgaCR1IGFzIGF6LCBiJDMgYXMgYiwgbyRDIGFzIGIkLCBvJGggYXMgYjAsIGd0IGFzIGIxLCBVdCBhcyBiMiwgRCQ2IGFzIGIzLCBnJGggYXMgYjQsIG4kRyBhcyBiNSwgdSRCIGFzIGI2LCBkJDUgYXMgYjcsIHYkOSBhcyBiOCwgbSR4IGFzIGI5LCB1JG0gYXMgYkEsIGQkbiBhcyBiQiwgaSRtIGFzIGJDLCBuJGMgYXMgYkQsIHQkayBhcyBiRSwgbCRPIGFzIGJGLCBvJEkgYXMgYkcsIGMkRiBhcyBiSCwgVCQ0IGFzIGJJLCBtJGwgYXMgYkosIGokMiBhcyBiSywgTSQxIGFzIGJMLCBNIGFzIGJNLCBvJEYgYXMgYk4sIG4kbCBhcyBiTywgbyQ2IGFzIGJQLCBGJDEgYXMgYlEsIGgkNSBhcyBiUiwgbiRvIGFzIGJTLCBnJDIgYXMgYlQsIGEkdSBhcyBiVSwgdSROIGFzIGJWLCBpJFcgYXMgYlcsIG4kViBhcyBiWCwgYyQxMiBhcyBiWSwgbiR1IGFzIGJaLCBkJGogYXMgYl8sIGIkYSBhcyBiYSwgYiRiIGFzIGJiLCBOJDUgYXMgYmMsIHMkbyBhcyBiZCwgUiQ2IGFzIGJlLCBkJHQgYXMgYmYsIGckOSBhcyBiZywgZSRwIGFzIGJoLCBxJDQgYXMgYmksIFAkNyBhcyBiaiwgcyRHIGFzIGJrLCByJHIgYXMgYmwsIHIkeCBhcyBibSwgbyRtIGFzIGJuLCBkJEUgYXMgYm8sIGUkYSBhcyBicCwgYyRyIGFzIGJxLCBWJDIgYXMgYnIsIHMkciBhcyBicywgdSRoIGFzIGJ0LCBvJGogYXMgYnUsIHIkdiBhcyBidiwgaSRHIGFzIGJ3LCB1JEsgYXMgYngsIGskYSBhcyBieSwgaSRGIGFzIGJ6LCBjJDMgYXMgYywgeSRsIGFzIGMkLCBpJEMgYXMgYzAsIHUkbiBhcyBjMSwgbiR2IGFzIGMyLCBEJDEgYXMgYzMsIFAkMSBhcyBjNCwgRiBhcyBjNSwgaCRpIGFzIGM2LCB5JDkgYXMgYzcsIGMkQyBhcyBjOCwgYyRCIGFzIGM5LCBjJEsgYXMgY0EsIGIkYyBhcyBjQiwgdyRhIGFzIGNDLCB1JHogYXMgY0QsIHQkeCBhcyBjRSwgbSR5IGFzIGNGLCBuJFcgYXMgY0csIE4kMiBhcyBjSCwgaSQ1IGFzIGNJLCBqJDkgYXMgY0osIFggYXMgY0ssIEIgYXMgY0wsIGVlIGFzIGNNLCBuZSBhcyBjTiwgZmUgYXMgY08sIGUkNCBhcyBjUCwgbyRxIGFzIGNRLCBFJDMgYXMgY1IsIGskOCBhcyBjUywgQiQ0IGFzIGNULCB5JHUgYXMgY1UsIGQkRiBhcyBjViwgQSRkIGFzIGNXLCBpJEEgYXMgY1gsIEMkNyBhcyBjWSwgaiRmIGFzIGNaLCB2JGggYXMgY18sIHAkTCBhcyBjYSwgbiRzIGFzIGNiLCBTJDYgYXMgY2MsIGokZyBhcyBjZCwgaSRRIGFzIGNlLCByJHogYXMgY2YsIGUkdCBhcyBjZywgcXQgYXMgY2gsIHgkOSBhcyBjaSwgdCRuIGFzIGNqLCBkJHkgYXMgY2ssIEEkNCBhcyBjbCwgdSR4IGFzIGNtLCBiJDcgYXMgY24sIG0kcyBhcyBjbywgZyRiIGFzIGNwLCBlJGsgYXMgY3EsIHB0IGFzIGNyLCBNJDQgYXMgY3MsIEkkMSBhcyBjdCwgeSRmIGFzIGN1LCBsJHggYXMgY3YsIHUkbyBhcyBjdywgciRmIGFzIGN4LCBHJDIgYXMgY3ksIHUkUCBhcyBjeiwgZCRpIGFzIGQsICQgYXMgZDAsIEMkMiBhcyBkMSwgciRsIGFzIGQyLCBvJEUgYXMgZDMsIG8kayBhcyBkNCwgdCRPIGFzIGQ1LCByJEIgYXMgZDYsIEYkNCBhcyBkNywgbCRIIGFzIGQ4LCBBJDEgYXMgZDksIG8kOSBhcyBkQSwgaCRwIGFzIGRCLCBzJGcgYXMgZEMsIEwkNCBhcyBkRCwgUyQ1IGFzIGRFLCBtJGogYXMgZEYsIGYkcSBhcyBkRywgcCQxNyBhcyBkSCwgcCRzIGFzIGRJLCBNJDYgYXMgZEosIGkkTyBhcyBkSywgdSRRIGFzIGRMLCBmJEEgYXMgZE0sIGkkMTUgYXMgZE4sIGMkMTQgYXMgZE8sIHQkcyBhcyBkUCwgSCQzIGFzIGRRLCByZXF1ZXN0IGFzIGRSLCBGZWF0dXJlU2V0IGFzIGRTLCBEYXRhQnJvd3NlciQxIGFzIGRULCBhJFAgYXMgZGEsIHQkOSBhcyBkYiwgbyR1IGFzIGRjLCB6JDUgYXMgZGQsIG0kQiBhcyBkZSwgaiRpIGFzIGRmLCB4JDIgYXMgZGcsIFMkYSBhcyBkaCwgaCR5IGFzIGRpLCB2JGMgYXMgZGosIEYkNSBhcyBkaywgcyREIGFzIGRsLCBwJDExIGFzIGRtLCBSJDggYXMgZG4sIFJ0IGFzIGRwLCBmJGUgYXMgZHEsIGokMSBhcyBkciwgeCQxIGFzIGRzLCB1JE8gYXMgZHQsIHQkNiBhcyBkdSwgJCQyIGFzIGR2LCBpJG4gYXMgZHcsIGkkNCBhcyBkeCwgTSRhIGFzIGR5LCB3JGIgYXMgZHosIHkkMiBhcyBlLCBiJDQgYXMgZiwgaHQgYXMgZywgaCQ4IGFzIGgsIGMkYiBhcyBpLCBVJDQgYXMgaiwgayQxIGFzIGssIGMkVSBhcyBsLCBjJGEgYXMgbSwgbiQ2IGFzIG4sIG8kSCBhcyBvLCBsJGEgYXMgcCwgaiRiIGFzIHEsIGMkTyBhcyByLCBzJHggYXMgcywgdCRNIGFzIHQsIHUkNyBhcyB1LCBtJG0gYXMgdiwgdyQyIGFzIHcsIHgkNCBhcyB4LCB5JDMgYXMgeSwgeiQ2IGFzIHogfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RGF0YUJyb3dzZXItNWNlMmFkZTkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9