"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_ba-infographic_node_modules_arcgis_business-analyst-components_dis-21a668"],{

/***/ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/calcite-time-picker.entry.js":
/*!**********************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/calcite-time-picker.entry.js ***!
  \**********************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   calcite_time_picker: () => (/* binding */ TimePicker)
/* harmony export */ });
/* harmony import */ var _index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-4e647411.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/index-4e647411.js");
/* harmony import */ var _key_b75491c4_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./key-b75491c4.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/key-b75491c4.js");
/* harmony import */ var _locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./locale-f7b2fbb0.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/locale-f7b2fbb0.js");
/* harmony import */ var _t9n_dc67ab96_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./t9n-dc67ab96.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/t9n-dc67ab96.js");
/* harmony import */ var _time_0dbb0f96_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./time-0dbb0f96.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/time-0dbb0f96.js");
/* harmony import */ var _loadable_cc14d728_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./loadable-cc14d728.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/loadable-cc14d728.js");












/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.5
 */
const CSS = {
  button: "button",
  buttonBottomLeft: "button--bottom-left",
  buttonBottomRight: "button--bottom-right",
  buttonHourDown: "button--hour-down",
  buttonHourUp: "button--hour-up",
  buttonMeridiemDown: "button--meridiem-down",
  buttonMeridiemUp: "button--meridiem-up",
  buttonMinuteDown: "button--minute-down",
  buttonMinuteUp: "button--minute-up",
  buttonSecondDown: "button--second-down",
  buttonSecondUp: "button--second-up",
  buttonTopLeft: "button--top-left",
  buttonTopRight: "button--top-right",
  column: "column",
  delimiter: "delimiter",
  hour: "hour",
  input: "input",
  meridiem: "meridiem",
  minute: "minute",
  second: "second",
  showMeridiem: "show-meridiem",
  showSecond: "show-second",
  "scale-s": "scale-s",
  "scale-m": "scale-m",
  "scale-l": "scale-l",
  timePicker: "time-picker",
  meridiemStart: "meridiem--start"
};

const timePickerCss = "@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{display:inline-block}.time-picker{display:flex;-webkit-user-select:none;user-select:none;align-items:center;background-color:var(--calcite-ui-foreground-1);font-weight:var(--calcite-font-weight-medium);color:var(--calcite-ui-text-1);--tw-shadow:0 6px 20px -4px rgba(0, 0, 0, 0.1), 0 4px 12px -2px rgba(0, 0, 0, 0.08);--tw-shadow-colored:0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);border-radius:var(--calcite-border-radius)}.time-picker .column{display:flex;flex-direction:column}.time-picker .meridiem--start{order:-1}.time-picker .button{display:inline-flex;cursor:pointer;align-items:center;justify-content:center;background-color:var(--calcite-ui-foreground-1)}.time-picker .button:hover,.time-picker .button:focus{background-color:var(--calcite-ui-foreground-2);outline:2px solid transparent;outline-offset:2px;z-index:400;outline-offset:0}.time-picker .button:active{background-color:var(--calcite-ui-foreground-3)}.time-picker .button.top-left{border-start-start-radius:var(--calcite-border-radius)}.time-picker .button.bottom-left{border-end-start-radius:var(--calcite-border-radius)}.time-picker .button.top-right{border-start-end-radius:var(--calcite-border-radius)}.time-picker .button.bottom-right{border-end-end-radius:var(--calcite-border-radius)}.time-picker .button calcite-icon{color:var(--calcite-ui-text-3)}.time-picker .input{display:inline-flex;cursor:pointer;align-items:center;justify-content:center;background-color:var(--calcite-ui-foreground-1);font-weight:var(--calcite-font-weight-medium)}.time-picker .input:hover{box-shadow:inset 0 0 0 2px var(--calcite-ui-foreground-2);z-index:400}.time-picker .input:focus,.time-picker .input:hover:focus{outline:2px solid transparent;outline-offset:2px;box-shadow:inset 0 0 0 2px var(--calcite-ui-brand);z-index:400;outline-offset:0}.time-picker.scale-s{font-size:var(--calcite-font-size--1)}.time-picker.scale-s .button,.time-picker.scale-s .input{padding-inline:0.75rem;padding-block:0.25rem}.time-picker.scale-s:not(.show-meridiem) .delimiter:last-child{padding-inline-end:0.75rem}.time-picker.scale-m{font-size:var(--calcite-font-size-0)}.time-picker.scale-m .button,.time-picker.scale-m .input{padding-inline:1rem;padding-block:0.5rem}.time-picker.scale-m:not(.show-meridiem) .delimiter:last-child{padding-inline-end:1rem}.time-picker.scale-l{font-size:var(--calcite-font-size-1)}.time-picker.scale-l .button,.time-picker.scale-l .input{padding-inline:1.25rem;padding-block:0.75rem}.time-picker.scale-l:not(.show-meridiem) .delimiter:last-child{padding-inline-end:1.25rem}";

function capitalize(str) {
  return str.charAt(0).toUpperCase() + str.slice(1);
}
const TimePicker = class {
  constructor(hostRef) {
    (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.calciteInternalTimePickerBlur = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteInternalTimePickerBlur", 6);
    this.calciteInternalTimePickerChange = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteInternalTimePickerChange", 6);
    this.calciteInternalTimePickerFocus = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteInternalTimePickerFocus", 6);
    this.decrementHour = () => {
      const newHour = !this.hour ? 0 : this.hour === "00" ? 23 : parseInt(this.hour) - 1;
      this.setValuePart("hour", newHour);
    };
    this.decrementMeridiem = () => {
      const newMeridiem = this.meridiem === "PM" ? "AM" : "PM";
      this.setValuePart("meridiem", newMeridiem);
    };
    this.decrementMinuteOrSecond = (key) => {
      let newValue;
      if ((0,_locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_1__.i)(this[key])) {
        const valueAsNumber = parseInt(this[key]);
        newValue = valueAsNumber === 0 ? 59 : valueAsNumber - 1;
      }
      else {
        newValue = 59;
      }
      this.setValuePart(key, newValue);
    };
    this.decrementMinute = () => {
      this.decrementMinuteOrSecond("minute");
    };
    this.decrementSecond = () => {
      this.decrementMinuteOrSecond("second");
    };
    this.focusHandler = (event) => {
      this.activeEl = event.currentTarget;
    };
    this.hourDownButtonKeyDownHandler = (event) => {
      if (this.buttonActivated(event)) {
        this.decrementHour();
      }
    };
    this.hourKeyDownHandler = (event) => {
      const { key } = event;
      if (_key_b75491c4_js__WEBPACK_IMPORTED_MODULE_2__.n.includes(key)) {
        const keyAsNumber = parseInt(key);
        let newHour;
        if ((0,_locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_1__.i)(this.hour)) {
          switch (this.hourCycle) {
            case "12":
              newHour =
                this.hour === "01" && keyAsNumber >= 0 && keyAsNumber <= 2
                  ? `1${keyAsNumber}`
                  : keyAsNumber;
              break;
            case "24":
              if (this.hour === "01") {
                newHour = `1${keyAsNumber}`;
              }
              else if (this.hour === "02" && keyAsNumber >= 0 && keyAsNumber <= 3) {
                newHour = `2${keyAsNumber}`;
              }
              else {
                newHour = keyAsNumber;
              }
              break;
          }
        }
        else {
          newHour = keyAsNumber;
        }
        this.setValuePart("hour", newHour);
      }
      else {
        switch (key) {
          case "Backspace":
          case "Delete":
            this.setValuePart("hour", null);
            break;
          case "ArrowDown":
            event.preventDefault();
            this.decrementHour();
            break;
          case "ArrowUp":
            event.preventDefault();
            this.incrementHour();
            break;
          case " ":
            event.preventDefault();
            break;
        }
      }
    };
    this.hourUpButtonKeyDownHandler = (event) => {
      if (this.buttonActivated(event)) {
        this.incrementHour();
      }
    };
    this.incrementMeridiem = () => {
      const newMeridiem = this.meridiem === "AM" ? "PM" : "AM";
      this.setValuePart("meridiem", newMeridiem);
    };
    this.incrementHour = () => {
      const newHour = (0,_locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_1__.i)(this.hour)
        ? this.hour === "23"
          ? 0
          : parseInt(this.hour) + 1
        : 1;
      this.setValuePart("hour", newHour);
    };
    this.incrementMinuteOrSecond = (key) => {
      const newValue = (0,_locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_1__.i)(this[key])
        ? this[key] === "59"
          ? 0
          : parseInt(this[key]) + 1
        : 0;
      this.setValuePart(key, newValue);
    };
    this.incrementMinute = () => {
      this.incrementMinuteOrSecond("minute");
    };
    this.incrementSecond = () => {
      this.incrementMinuteOrSecond("second");
    };
    this.meridiemDownButtonKeyDownHandler = (event) => {
      if (this.buttonActivated(event)) {
        this.decrementMeridiem();
      }
    };
    this.meridiemKeyDownHandler = (event) => {
      switch (event.key) {
        case "a":
          this.setValuePart("meridiem", "AM");
          break;
        case "p":
          this.setValuePart("meridiem", "PM");
          break;
        case "Backspace":
        case "Delete":
          this.setValuePart("meridiem", null);
          break;
        case "ArrowUp":
          event.preventDefault();
          this.incrementMeridiem();
          break;
        case "ArrowDown":
          event.preventDefault();
          this.decrementMeridiem();
          break;
        case " ":
          event.preventDefault();
          break;
      }
    };
    this.meridiemUpButtonKeyDownHandler = (event) => {
      if (this.buttonActivated(event)) {
        this.incrementMeridiem();
      }
    };
    this.minuteDownButtonKeyDownHandler = (event) => {
      if (this.buttonActivated(event)) {
        this.decrementMinute();
      }
    };
    this.minuteKeyDownHandler = (event) => {
      const { key } = event;
      if (_key_b75491c4_js__WEBPACK_IMPORTED_MODULE_2__.n.includes(key)) {
        const keyAsNumber = parseInt(key);
        let newMinute;
        if ((0,_locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_1__.i)(this.minute) && this.minute.startsWith("0")) {
          const minuteAsNumber = parseInt(this.minute);
          newMinute =
            minuteAsNumber > _time_0dbb0f96_js__WEBPACK_IMPORTED_MODULE_3__.m
              ? keyAsNumber
              : `${minuteAsNumber}${keyAsNumber}`;
        }
        else {
          newMinute = keyAsNumber;
        }
        this.setValuePart("minute", newMinute);
      }
      else {
        switch (key) {
          case "Backspace":
          case "Delete":
            this.setValuePart("minute", null);
            break;
          case "ArrowDown":
            event.preventDefault();
            this.decrementMinute();
            break;
          case "ArrowUp":
            event.preventDefault();
            this.incrementMinute();
            break;
          case " ":
            event.preventDefault();
            break;
        }
      }
    };
    this.minuteUpButtonKeyDownHandler = (event) => {
      if (this.buttonActivated(event)) {
        this.incrementMinute();
      }
    };
    this.secondDownButtonKeyDownHandler = (event) => {
      if (this.buttonActivated(event)) {
        this.decrementSecond();
      }
    };
    this.secondKeyDownHandler = (event) => {
      const { key } = event;
      if (_key_b75491c4_js__WEBPACK_IMPORTED_MODULE_2__.n.includes(key)) {
        const keyAsNumber = parseInt(key);
        let newSecond;
        if ((0,_locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_1__.i)(this.second) && this.second.startsWith("0")) {
          const secondAsNumber = parseInt(this.second);
          newSecond =
            secondAsNumber > _time_0dbb0f96_js__WEBPACK_IMPORTED_MODULE_3__.m
              ? keyAsNumber
              : `${secondAsNumber}${keyAsNumber}`;
        }
        else {
          newSecond = keyAsNumber;
        }
        this.setValuePart("second", newSecond);
      }
      else {
        switch (key) {
          case "Backspace":
          case "Delete":
            this.setValuePart("second", null);
            break;
          case "ArrowDown":
            event.preventDefault();
            this.decrementSecond();
            break;
          case "ArrowUp":
            event.preventDefault();
            this.incrementSecond();
            break;
          case " ":
            event.preventDefault();
            break;
        }
      }
    };
    this.secondUpButtonKeyDownHandler = (event) => {
      if (this.buttonActivated(event)) {
        this.incrementSecond();
      }
    };
    this.setHourEl = (el) => (this.hourEl = el);
    this.setMeridiemEl = (el) => (this.meridiemEl = el);
    this.setMinuteEl = (el) => (this.minuteEl = el);
    this.setSecondEl = (el) => (this.secondEl = el);
    this.setValue = (value, emit = true) => {
      if ((0,_time_0dbb0f96_js__WEBPACK_IMPORTED_MODULE_3__.i)(value)) {
        const { hour, minute, second } = (0,_time_0dbb0f96_js__WEBPACK_IMPORTED_MODULE_3__.p)(value);
        const { effectiveLocale: locale, numberingSystem } = this;
        const { localizedHour, localizedHourSuffix, localizedMinute, localizedMinuteSuffix, localizedSecond, localizedSecondSuffix, localizedMeridiem } = (0,_time_0dbb0f96_js__WEBPACK_IMPORTED_MODULE_3__.a)({ value, locale, numberingSystem });
        this.localizedHour = localizedHour;
        this.localizedHourSuffix = localizedHourSuffix;
        this.localizedMinute = localizedMinute;
        this.localizedMinuteSuffix = localizedMinuteSuffix;
        this.localizedSecond = localizedSecond;
        this.localizedSecondSuffix = localizedSecondSuffix;
        this.hour = hour;
        this.minute = minute;
        this.second = second;
        if (localizedMeridiem) {
          this.localizedMeridiem = localizedMeridiem;
          this.meridiem = (0,_time_0dbb0f96_js__WEBPACK_IMPORTED_MODULE_3__.g)(this.hour);
          const formatParts = (0,_time_0dbb0f96_js__WEBPACK_IMPORTED_MODULE_3__.b)({ value, locale, numberingSystem });
          this.meridiemOrder = this.getMeridiemOrder(formatParts);
        }
      }
      else {
        this.hour = null;
        this.localizedHour = null;
        this.localizedHourSuffix = null;
        this.localizedMeridiem = null;
        this.localizedMinute = null;
        this.localizedMinuteSuffix = null;
        this.localizedSecond = null;
        this.localizedSecondSuffix = null;
        this.meridiem = null;
        this.minute = null;
        this.second = null;
        this.value = null;
      }
      if (emit) {
        this.calciteInternalTimePickerChange.emit();
      }
    };
    this.setValuePart = (key, value, emit = true) => {
      const { effectiveLocale: locale, numberingSystem } = this;
      if (key === "meridiem") {
        this.meridiem = value;
        if ((0,_locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_1__.i)(this.hour)) {
          const hourAsNumber = parseInt(this.hour);
          switch (value) {
            case "AM":
              if (hourAsNumber >= 12) {
                this.hour = (0,_time_0dbb0f96_js__WEBPACK_IMPORTED_MODULE_3__.c)(hourAsNumber - 12);
              }
              break;
            case "PM":
              if (hourAsNumber < 12) {
                this.hour = (0,_time_0dbb0f96_js__WEBPACK_IMPORTED_MODULE_3__.c)(hourAsNumber + 12);
              }
              break;
          }
          this.localizedHour = (0,_time_0dbb0f96_js__WEBPACK_IMPORTED_MODULE_3__.d)({
            value: this.hour,
            part: "hour",
            locale,
            numberingSystem
          });
        }
      }
      else {
        this[key] = typeof value === "number" ? (0,_time_0dbb0f96_js__WEBPACK_IMPORTED_MODULE_3__.c)(value) : value;
        this[`localized${capitalize(key)}`] = (0,_time_0dbb0f96_js__WEBPACK_IMPORTED_MODULE_3__.d)({
          value: this[key],
          part: key,
          locale,
          numberingSystem
        });
      }
      if (this.hour && this.minute) {
        const showSeconds = this.second && this.showSecond;
        this.value = `${this.hour}:${this.minute}:${showSeconds ? this.second : "00"}`;
      }
      else {
        this.value = null;
      }
      this.localizedMeridiem = this.value
        ? (0,_time_0dbb0f96_js__WEBPACK_IMPORTED_MODULE_3__.a)({ value: this.value, locale, numberingSystem })
          ?.localizedMeridiem || null
        : (0,_time_0dbb0f96_js__WEBPACK_IMPORTED_MODULE_3__.d)({ value: this.meridiem, part: "meridiem", locale, numberingSystem });
      if (emit) {
        this.calciteInternalTimePickerChange.emit();
      }
    };
    this.scale = "m";
    this.step = 60;
    this.numberingSystem = undefined;
    this.value = null;
    this.messages = undefined;
    this.messageOverrides = undefined;
    this.effectiveLocale = "";
    this.hour = undefined;
    this.hourCycle = undefined;
    this.localizedHour = undefined;
    this.localizedHourSuffix = undefined;
    this.localizedMeridiem = undefined;
    this.localizedMinute = undefined;
    this.localizedMinuteSuffix = undefined;
    this.localizedSecond = undefined;
    this.localizedSecondSuffix = undefined;
    this.meridiem = undefined;
    this.minute = undefined;
    this.second = undefined;
    this.showSecond = this.step < 60;
    this.defaultMessages = undefined;
  }
  valueWatcher(newValue) {
    this.setValue(newValue, false);
  }
  onMessagesChange() {
    /* wired up by t9n util */
  }
  effectiveLocaleWatcher() {
    this.updateLocale();
  }
  //--------------------------------------------------------------------------
  //
  //  Event Listeners
  //
  //--------------------------------------------------------------------------
  hostBlurHandler() {
    this.calciteInternalTimePickerBlur.emit();
  }
  hostFocusHandler() {
    this.calciteInternalTimePickerFocus.emit();
  }
  keyDownHandler(event) {
    const { defaultPrevented, key } = event;
    if (defaultPrevented) {
      return;
    }
    switch (this.activeEl) {
      case this.hourEl:
        if (key === "ArrowRight") {
          this.focusPart("minute");
          event.preventDefault();
        }
        break;
      case this.minuteEl:
        switch (key) {
          case "ArrowLeft":
            this.focusPart("hour");
            event.preventDefault();
            break;
          case "ArrowRight":
            if (this.step !== 60) {
              this.focusPart("second");
              event.preventDefault();
            }
            else if (this.hourCycle === "12") {
              this.focusPart("meridiem");
              event.preventDefault();
            }
            break;
        }
        break;
      case this.secondEl:
        switch (key) {
          case "ArrowLeft":
            this.focusPart("minute");
            event.preventDefault();
            break;
          case "ArrowRight":
            if (this.hourCycle === "12") {
              this.focusPart("meridiem");
              event.preventDefault();
            }
            break;
        }
        break;
      case this.meridiemEl:
        switch (key) {
          case "ArrowLeft":
            if (this.step !== 60) {
              this.focusPart("second");
              event.preventDefault();
            }
            else {
              this.focusPart("minute");
              event.preventDefault();
            }
            break;
        }
        break;
    }
  }
  //--------------------------------------------------------------------------
  //
  //  Public Methods
  //
  //--------------------------------------------------------------------------
  /**
   * Sets focus on the component's first focusable element.
   */
  async setFocus() {
    await (0,_loadable_cc14d728_js__WEBPACK_IMPORTED_MODULE_4__.c)(this);
    this.el?.focus();
  }
  // --------------------------------------------------------------------------
  //
  //  Private Methods
  //
  // --------------------------------------------------------------------------
  async focusPart(target) {
    await (0,_loadable_cc14d728_js__WEBPACK_IMPORTED_MODULE_4__.c)(this);
    this[`${target || "hour"}El`]?.focus();
  }
  buttonActivated(event) {
    const { key } = event;
    if (key === " ") {
      event.preventDefault();
    }
    return (0,_key_b75491c4_js__WEBPACK_IMPORTED_MODULE_2__.i)(key);
  }
  getMeridiemOrder(formatParts) {
    const locale = this.effectiveLocale;
    const isRTLKind = locale === "ar" || locale === "he";
    if (formatParts && !isRTLKind) {
      const index = formatParts.findIndex((parts) => {
        return parts.value === this.localizedMeridiem;
      });
      return index;
    }
    return 0;
  }
  updateLocale() {
    (0,_t9n_dc67ab96_js__WEBPACK_IMPORTED_MODULE_5__.u)(this, this.effectiveLocale);
    this.hourCycle = (0,_time_0dbb0f96_js__WEBPACK_IMPORTED_MODULE_3__.e)(this.effectiveLocale, this.numberingSystem);
    this.setValue(this.value, false);
  }
  // --------------------------------------------------------------------------
  //
  //  Lifecycle
  //
  // --------------------------------------------------------------------------
  connectedCallback() {
    (0,_locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_1__.c)(this);
    this.updateLocale();
    (0,_t9n_dc67ab96_js__WEBPACK_IMPORTED_MODULE_5__.c)(this);
    this.meridiemOrder = this.getMeridiemOrder((0,_time_0dbb0f96_js__WEBPACK_IMPORTED_MODULE_3__.b)({
      value: "0:00:00",
      locale: this.effectiveLocale,
      numberingSystem: this.numberingSystem
    }));
  }
  async componentWillLoad() {
    (0,_loadable_cc14d728_js__WEBPACK_IMPORTED_MODULE_4__.a)(this);
    await (0,_t9n_dc67ab96_js__WEBPACK_IMPORTED_MODULE_5__.s)(this);
  }
  componentDidLoad() {
    (0,_loadable_cc14d728_js__WEBPACK_IMPORTED_MODULE_4__.s)(this);
  }
  disconnectedCallback() {
    (0,_locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_1__.d)(this);
    (0,_t9n_dc67ab96_js__WEBPACK_IMPORTED_MODULE_5__.d)(this);
  }
  // --------------------------------------------------------------------------
  //
  //  Render Methods
  //
  // --------------------------------------------------------------------------
  render() {
    const hourIsNumber = (0,_locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_1__.i)(this.hour);
    const iconScale = this.scale === "s" || this.scale === "m" ? "s" : "m";
    const minuteIsNumber = (0,_locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_1__.i)(this.minute);
    const secondIsNumber = (0,_locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_1__.i)(this.second);
    const showMeridiem = this.hourCycle === "12";
    return ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: {
        [CSS.timePicker]: true,
        [CSS.showMeridiem]: showMeridiem,
        [CSS.showSecond]: this.showSecond,
        [CSS[`scale-${this.scale}`]]: true
      }, dir: "ltr" }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: CSS.column, role: "group" }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-label": this.messages.hourUp, class: {
        [CSS.button]: true,
        [CSS.buttonHourUp]: true,
        [CSS.buttonTopLeft]: true
      }, onClick: this.incrementHour, onKeyDown: this.hourUpButtonKeyDownHandler, role: "button", tabIndex: -1 }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { icon: "chevron-up", scale: iconScale })), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-label": this.messages.hour, "aria-valuemax": "23", "aria-valuemin": "1", "aria-valuenow": (hourIsNumber && parseInt(this.hour)) || "0", "aria-valuetext": this.hour, class: {
        [CSS.input]: true,
        [CSS.hour]: true
      }, onFocus: this.focusHandler, onKeyDown: this.hourKeyDownHandler, ref: this.setHourEl, role: "spinbutton", tabIndex: 0 }, this.localizedHour || "--"), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-label": this.messages.hourDown, class: {
        [CSS.button]: true,
        [CSS.buttonHourDown]: true,
        [CSS.buttonBottomLeft]: true
      }, onClick: this.decrementHour, onKeyDown: this.hourDownButtonKeyDownHandler, role: "button", tabIndex: -1 }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { icon: "chevron-down", scale: iconScale }))), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: CSS.delimiter }, this.localizedHourSuffix), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: CSS.column, role: "group" }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-label": this.messages.minuteUp, class: {
        [CSS.button]: true,
        [CSS.buttonMinuteUp]: true
      }, onClick: this.incrementMinute, onKeyDown: this.minuteUpButtonKeyDownHandler, role: "button", tabIndex: -1 }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { icon: "chevron-up", scale: iconScale })), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-label": this.messages.minute, "aria-valuemax": "12", "aria-valuemin": "1", "aria-valuenow": (minuteIsNumber && parseInt(this.minute)) || "0", "aria-valuetext": this.minute, class: {
        [CSS.input]: true,
        [CSS.minute]: true
      }, onFocus: this.focusHandler, onKeyDown: this.minuteKeyDownHandler, ref: this.setMinuteEl, role: "spinbutton", tabIndex: 0 }, this.localizedMinute || "--"), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-label": this.messages.minuteDown, class: {
        [CSS.button]: true,
        [CSS.buttonMinuteDown]: true
      }, onClick: this.decrementMinute, onKeyDown: this.minuteDownButtonKeyDownHandler, role: "button", tabIndex: -1 }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { icon: "chevron-down", scale: iconScale }))), this.showSecond && (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: CSS.delimiter }, this.localizedMinuteSuffix), this.showSecond && ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: CSS.column, role: "group" }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-label": this.messages.secondUp, class: {
        [CSS.button]: true,
        [CSS.buttonSecondUp]: true
      }, onClick: this.incrementSecond, onKeyDown: this.secondUpButtonKeyDownHandler, role: "button", tabIndex: -1 }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { icon: "chevron-up", scale: iconScale })), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-label": this.messages.second, "aria-valuemax": "59", "aria-valuemin": "0", "aria-valuenow": (secondIsNumber && parseInt(this.second)) || "0", "aria-valuetext": this.second, class: {
        [CSS.input]: true,
        [CSS.second]: true
      }, onFocus: this.focusHandler, onKeyDown: this.secondKeyDownHandler, ref: this.setSecondEl, role: "spinbutton", tabIndex: 0 }, this.localizedSecond || "--"), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-label": this.messages.secondDown, class: {
        [CSS.button]: true,
        [CSS.buttonSecondDown]: true
      }, onClick: this.decrementSecond, onKeyDown: this.secondDownButtonKeyDownHandler, role: "button", tabIndex: -1 }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { icon: "chevron-down", scale: iconScale })))), this.localizedSecondSuffix && ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: CSS.delimiter }, this.localizedSecondSuffix)), showMeridiem && ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: {
        [CSS.column]: true,
        [CSS.meridiemStart]: this.meridiemOrder === 0
      }, role: "group" }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-label": this.messages.meridiemUp, class: {
        [CSS.button]: true,
        [CSS.buttonMeridiemUp]: true,
        [CSS.buttonTopRight]: true
      }, onClick: this.incrementMeridiem, onKeyDown: this.meridiemUpButtonKeyDownHandler, role: "button", tabIndex: -1 }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { icon: "chevron-up", scale: iconScale })), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-label": this.messages.meridiem, "aria-valuemax": "2", "aria-valuemin": "1", "aria-valuenow": (this.meridiem === "PM" && "2") || "1", "aria-valuetext": this.meridiem, class: {
        [CSS.input]: true,
        [CSS.meridiem]: true
      }, onFocus: this.focusHandler, onKeyDown: this.meridiemKeyDownHandler, ref: this.setMeridiemEl, role: "spinbutton", tabIndex: 0 }, this.localizedMeridiem || "--"), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-label": this.messages.meridiemDown, class: {
        [CSS.button]: true,
        [CSS.buttonMeridiemDown]: true,
        [CSS.buttonBottomRight]: true
      }, onClick: this.decrementMeridiem, onKeyDown: this.meridiemDownButtonKeyDownHandler, role: "button", tabIndex: -1 }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { icon: "chevron-down", scale: iconScale }))))));
  }
  static get delegatesFocus() { return true; }
  static get assetsDirs() { return ["assets"]; }
  get el() { return (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.g)(this); }
  static get watchers() { return {
    "value": ["valueWatcher"],
    "messageOverrides": ["onMessagesChange"],
    "effectiveLocale": ["effectiveLocaleWatcher"]
  }; }
};
TimePicker.style = timePickerCss;



//# sourceMappingURL=calcite-time-picker.entry.js.map

/***/ }),

/***/ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/loadable-cc14d728.js":
/*!**************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/loadable-cc14d728.js ***!
  \**************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ setUpLoadableComponent),
/* harmony export */   c: () => (/* binding */ componentLoaded),
/* harmony export */   s: () => (/* binding */ setComponentLoaded)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.5
 */
const resolveMap = new WeakMap();
const promiseMap = new WeakMap();
/**
 * This helper util sets up the component for the ability to know when the component has been loaded.
 *
 * This should be used in the `componentWillLoad` lifecycle hook.
 *
 * ```
 * componentWillLoad(): void {
 *   setUpLoadableComponent(this);
 * }
 * ```
 *
 * @param component
 */
function setUpLoadableComponent(component) {
  promiseMap.set(component, new Promise((resolve) => resolveMap.set(component, resolve)));
}
/**
 * This helper util lets the loadable component know that it is now loaded.
 *
 * This should be used in the `componentDidLoad` lifecycle hook.
 *
 * ```
 * componentDidLoad(): void {
 *   setComponentLoaded(this);
 * }
 * ```
 *
 * @param component
 */
function setComponentLoaded(component) {
  resolveMap.get(component)();
}
/**
 * This helper util can be used to ensure a component has been loaded (The "componentDidLoad" stencil lifecycle method has been called).
 *
 * Requires "setUpLoadableComponent" and "setComponentLoaded" to be called first.
 *
 * A component developer can await this method before proceeding with any logic that requires a component to be loaded first.
 *
 * ```
 * async setFocus(): Promise<void> {
 *   await componentLoaded(this);
 * }
 * ```
 *
 * @param component
 * @returns Promise<void>
 */
function componentLoaded(component) {
  return promiseMap.get(component);
}



//# sourceMappingURL=loadable-cc14d728.js.map

/***/ }),

/***/ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/t9n-dc67ab96.js":
/*!*********************************************************************************************************************************************!*\
  !*** ./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/t9n-dc67ab96.js ***!
  \*********************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ connectMessages),
/* harmony export */   d: () => (/* binding */ disconnectMessages),
/* harmony export */   s: () => (/* binding */ setUpMessages),
/* harmony export */   u: () => (/* binding */ updateMessages)
/* harmony export */ });
/* harmony import */ var _index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-4e647411.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/index-4e647411.js");
/* harmony import */ var _locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./locale-f7b2fbb0.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/locale-f7b2fbb0.js");



/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.5
 */
const componentLangToMessageBundleCache = {};
async function getMessageBundle(lang, component) {
  const key = `${component}_${lang}`;
  if (componentLangToMessageBundleCache[key]) {
    return componentLangToMessageBundleCache[key];
  }
  componentLangToMessageBundleCache[key] = fetch((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.a)(`./assets/${component}/t9n/messages_${lang}.json`))
    .then((resp) => {
    if (!resp.ok) {
      throwMessageFetchError();
    }
    return resp.json();
  })
    .catch(() => throwMessageFetchError());
  return componentLangToMessageBundleCache[key];
}
function throwMessageFetchError() {
  throw new Error("could not fetch component message bundle");
}
function mergeMessages(component) {
  component.messages = {
    ...component.defaultMessages,
    ...component.messageOverrides
  };
}
/**
 * This utility sets up the messages used by the component. It should be awaited in the `componentWillLoad` lifecycle hook.
 *
 * @param component
 */
async function setUpMessages(component) {
  component.defaultMessages = await fetchMessages(component, component.effectiveLocale);
  mergeMessages(component);
}
async function fetchMessages(component, lang) {
  const { el } = component;
  const tag = el.tagName.toLowerCase();
  const componentName = tag.replace("calcite-", "");
  return getMessageBundle((0,_locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_1__.g)(lang, "t9n"), componentName);
}
/**
 * This utility must be set up for the component to update its default message bundle if the locale changes.
 *
 * It can be set up in **either** of the following ways:
 *
 * 1. called from `LocalizedComponent`'s `onLocaleChange` method or
 * 2. called from a watcher configured to watch `LocalizedComponent`'s `effectiveLocale` prop
 *
 * @param component
 * @param lang
 */
async function updateMessages(component, lang) {
  component.defaultMessages = await fetchMessages(component, lang);
  mergeMessages(component);
}
/**
 * This utility sets up internals for messages support.
 *
 * It needs to be called in `connectedCallback`
 *
 * **Note**: this must be called after `LocalizedComponent`'s `connectLocalized` method.
 *
 * @param component
 */
function connectMessages(component) {
  component.onMessagesChange = defaultOnMessagesChange;
}
/**
 * This utility tears down internals for messages support.
 *
 * It needs to be called in `disconnectedCallback`
 *
 * @param component
 */
function disconnectMessages(component) {
  component.onMessagesChange = undefined;
}
function defaultOnMessagesChange() {
  mergeMessages(this);
}



//# sourceMappingURL=t9n-dc67ab96.js.map

/***/ }),

/***/ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/time-0dbb0f96.js":
/*!**********************************************************************************************************************************************!*\
  !*** ./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/time-0dbb0f96.js ***!
  \**********************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ localizeTimeStringToParts),
/* harmony export */   b: () => (/* binding */ getTimeParts),
/* harmony export */   c: () => (/* binding */ formatTimePart),
/* harmony export */   d: () => (/* binding */ localizeTimePart),
/* harmony export */   e: () => (/* binding */ getLocaleHourCycle),
/* harmony export */   f: () => (/* binding */ formatTimeString),
/* harmony export */   g: () => (/* binding */ getMeridiem),
/* harmony export */   i: () => (/* binding */ isValidTime),
/* harmony export */   l: () => (/* binding */ localizeTimeString),
/* harmony export */   m: () => (/* binding */ maxTenthForMinuteAndSecond),
/* harmony export */   p: () => (/* binding */ parseTimeString)
/* harmony export */ });
/* harmony import */ var _locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./locale-f7b2fbb0.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/locale-f7b2fbb0.js");


/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.5
 */
const maxTenthForMinuteAndSecond = 5;
function createLocaleDateTimeFormatter(locale, numberingSystem, includeSeconds = true) {
  try {
    const options = {
      hour: "2-digit",
      minute: "2-digit",
      timeZone: "UTC",
      numberingSystem: (0,_locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_0__.a)(numberingSystem)
    };
    if (includeSeconds) {
      options.second = "2-digit";
    }
    return new Intl.DateTimeFormat((0,_locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_0__.g)(locale), options);
  }
  catch (error) {
    throw new Error(`Invalid locale supplied while attempting to create a DateTime formatter: ${locale}`);
  }
}
function formatTimePart(number) {
  const numberAsString = number.toString();
  return number >= 0 && number <= 9 ? numberAsString.padStart(2, "0") : numberAsString;
}
function formatTimeString(value) {
  if (!isValidTime(value)) {
    return null;
  }
  const [hourString, minuteString, secondString] = value.split(":");
  const hour = formatTimePart(parseInt(hourString));
  const minute = formatTimePart(parseInt(minuteString));
  if (secondString) {
    const second = formatTimePart(parseInt(secondString));
    return `${hour}:${minute}:${second}`;
  }
  return `${hour}:${minute}`;
}
function getLocaleHourCycle(locale, numberingSystem) {
  const formatter = createLocaleDateTimeFormatter(locale, numberingSystem);
  const parts = formatter.formatToParts(new Date(Date.UTC(0, 0, 0, 0, 0, 0)));
  return getLocalizedTimePart("meridiem", parts) ? "12" : "24";
}
function getLocalizedTimePart(part, parts) {
  if (!part || !parts) {
    return null;
  }
  if (part === "hourSuffix") {
    const hourIndex = parts.indexOf(parts.find(({ type }) => type === "hour"));
    const minuteIndex = parts.indexOf(parts.find(({ type }) => type === "minute"));
    const hourSuffix = parts[hourIndex + 1];
    return hourSuffix && hourSuffix.type === "literal" && minuteIndex - hourIndex === 2
      ? hourSuffix.value?.trim() || null
      : null;
  }
  if (part === "minuteSuffix") {
    const minuteIndex = parts.indexOf(parts.find(({ type }) => type === "minute"));
    const secondIndex = parts.indexOf(parts.find(({ type }) => type === "second"));
    const minuteSuffix = parts[minuteIndex + 1];
    return minuteSuffix && minuteSuffix.type === "literal" && secondIndex - minuteIndex === 2
      ? minuteSuffix.value?.trim() || null
      : null;
  }
  if (part === "secondSuffix") {
    const secondIndex = parts.indexOf(parts.find(({ type }) => type === "second"));
    const secondSuffix = parts[secondIndex + 1];
    return secondSuffix && secondSuffix.type === "literal" ? secondSuffix.value?.trim() || null : null;
  }
  return parts.find(({ type }) => (part == "meridiem" ? type === "dayPeriod" : type === part))?.value || null;
}
function getMeridiem(hour) {
  if (!(0,_locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_0__.i)(hour)) {
    return null;
  }
  const hourAsNumber = parseInt(hour);
  return hourAsNumber >= 0 && hourAsNumber <= 11 ? "AM" : "PM";
}
function isValidTime(value) {
  if (!value || value.startsWith(":") || value.endsWith(":")) {
    return false;
  }
  const splitValue = value.split(":");
  const validLength = splitValue.length > 1 && splitValue.length < 4;
  if (!validLength) {
    return false;
  }
  const [hour, minute, second] = splitValue;
  const hourAsNumber = parseInt(splitValue[0]);
  const minuteAsNumber = parseInt(splitValue[1]);
  const secondAsNumber = parseInt(splitValue[2]);
  const hourValid = (0,_locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_0__.i)(hour) && hourAsNumber >= 0 && hourAsNumber < 24;
  const minuteValid = (0,_locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_0__.i)(minute) && minuteAsNumber >= 0 && minuteAsNumber < 60;
  const secondValid = (0,_locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_0__.i)(second) && secondAsNumber >= 0 && secondAsNumber < 60;
  if ((hourValid && minuteValid && !second) || (hourValid && minuteValid && secondValid)) {
    return true;
  }
}
function isValidTimePart(value, part) {
  if (part === "meridiem") {
    return value === "AM" || value === "PM";
  }
  if (!(0,_locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_0__.i)(value)) {
    return false;
  }
  const valueAsNumber = Number(value);
  return part === "hour" ? valueAsNumber >= 0 && valueAsNumber < 24 : valueAsNumber >= 0 && valueAsNumber < 60;
}
function localizeTimePart({ value, part, locale, numberingSystem }) {
  if (!isValidTimePart(value, part)) {
    return;
  }
  const valueAsNumber = parseInt(value);
  const date = new Date(Date.UTC(0, 0, 0, part === "hour" ? valueAsNumber : part === "meridiem" ? (value === "AM" ? 0 : 12) : 0, part === "minute" ? valueAsNumber : 0, part === "second" ? valueAsNumber : 0));
  if (!date) {
    return;
  }
  const formatter = createLocaleDateTimeFormatter(locale, numberingSystem);
  const parts = formatter.formatToParts(date);
  return getLocalizedTimePart(part, parts);
}
function localizeTimeString({ value, locale, numberingSystem, includeSeconds = true }) {
  if (!isValidTime(value)) {
    return null;
  }
  const { hour, minute, second = "0" } = parseTimeString(value);
  const dateFromTimeString = new Date(Date.UTC(0, 0, 0, parseInt(hour), parseInt(minute), parseInt(second)));
  const formatter = createLocaleDateTimeFormatter(locale, numberingSystem, includeSeconds);
  return formatter?.format(dateFromTimeString) || null;
}
function localizeTimeStringToParts({ value, locale, numberingSystem }) {
  if (!isValidTime(value)) {
    return null;
  }
  const { hour, minute, second = "0" } = parseTimeString(value);
  const dateFromTimeString = new Date(Date.UTC(0, 0, 0, parseInt(hour), parseInt(minute), parseInt(second)));
  if (dateFromTimeString) {
    const formatter = createLocaleDateTimeFormatter(locale, numberingSystem);
    const parts = formatter.formatToParts(dateFromTimeString);
    return {
      localizedHour: getLocalizedTimePart("hour", parts),
      localizedHourSuffix: getLocalizedTimePart("hourSuffix", parts),
      localizedMinute: getLocalizedTimePart("minute", parts),
      localizedMinuteSuffix: getLocalizedTimePart("minuteSuffix", parts),
      localizedSecond: getLocalizedTimePart("second", parts),
      localizedSecondSuffix: getLocalizedTimePart("secondSuffix", parts),
      localizedMeridiem: getLocalizedTimePart("meridiem", parts)
    };
  }
  return null;
}
function getTimeParts({ value, locale, numberingSystem }) {
  if (!isValidTime(value)) {
    return null;
  }
  const { hour, minute, second = "0" } = parseTimeString(value);
  const dateFromTimeString = new Date(Date.UTC(0, 0, 0, parseInt(hour), parseInt(minute), parseInt(second)));
  if (dateFromTimeString) {
    const formatter = createLocaleDateTimeFormatter(locale, numberingSystem);
    const parts = formatter.formatToParts(dateFromTimeString);
    return parts;
  }
  return null;
}
function parseTimeString(value) {
  if (isValidTime(value)) {
    const [hour, minute, second] = value.split(":");
    return {
      hour,
      minute,
      second
    };
  }
  return {
    hour: null,
    minute: null,
    second: null
  };
}



//# sourceMappingURL=time-0dbb0f96.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYmEtaW5mb2dyYXBoaWNfbm9kZV9tb2R1bGVzX2FyY2dpc19idXNpbmVzcy1hbmFseXN0LWNvbXBvbmVudHNfZGlzLTIxYTY2OC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWtHO0FBQ3hCO0FBQ2lDO0FBQ2dCO0FBQzRIO0FBQ25JO0FBQ3pGO0FBQ007QUFDTDtBQUNLO0FBQ0E7O0FBRWpDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHFDQUFxQyxHQUFHLFVBQVUsS0FBSyxXQUFXLG1CQUFtQixHQUFHLFVBQVUsa0NBQWtDLEtBQUssVUFBVSxnQ0FBZ0MsaUJBQWlCLEdBQUcsVUFBVSxpQ0FBaUMsS0FBSyxVQUFVLGdDQUFnQyxvQkFBb0IsR0FBRyxVQUFVLGlDQUFpQyxLQUFLLFVBQVUsNEJBQTRCLE1BQU0saUZBQWlGLHFFQUFxRSwrRkFBK0YsaUdBQWlHLCtGQUErRixpQkFBaUIsVUFBVSx5QkFBeUIsbURBQW1ELHFCQUFxQixrQkFBa0IsMEJBQTBCLHVCQUF1Qix3QkFBd0IscUJBQXFCLDJCQUEyQix3QkFBd0Isd0NBQXdDLE1BQU0sc0NBQXNDLE1BQU0saUVBQWlFLGtDQUFrQyxnQkFBZ0IsYUFBYSxNQUFNLHFCQUFxQixhQUFhLGFBQWEseUJBQXlCLGlCQUFpQixtQkFBbUIsZ0RBQWdELDhDQUE4QywrQkFBK0Isb0ZBQW9GLG1HQUFtRyx1R0FBdUcsMkNBQTJDLHFCQUFxQixhQUFhLHNCQUFzQiw4QkFBOEIsU0FBUyxxQkFBcUIsb0JBQW9CLGVBQWUsbUJBQW1CLHVCQUF1QixnREFBZ0Qsc0RBQXNELGdEQUFnRCw4QkFBOEIsbUJBQW1CLFlB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dXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYmEtaW5mb2dyYXBoaWMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYnVzaW5lc3MtYW5hbHlzdC1jb21wb25lbnRzL2Rpc3Qvc3RlbmNpbC1jb21wb25lbnRzL2Rpc3QvZXNtL2NhbGNpdGUtdGltZS1waWNrZXIuZW50cnkuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9iYS1pbmZvZ3JhcGhpYy9ub2RlX21vZHVsZXMvQGFyY2dpcy9idXNpbmVzcy1hbmFseXN0LWNvbXBvbmVudHMvZGlzdC9zdGVuY2lsLWNvbXBvbmVudHMvZGlzdC9lc20vbG9hZGFibGUtY2MxNGQ3MjguanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9iYS1pbmZvZ3JhcGhpYy9ub2RlX21vZHVsZXMvQGFyY2dpcy9idXNpbmVzcy1hbmFseXN0LWNvbXBvbmVudHMvZGlzdC9zdGVuY2lsLWNvbXBvbmVudHMvZGlzdC9lc20vdDluLWRjNjdhYjk2LmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYmEtaW5mb2dyYXBoaWMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYnVzaW5lc3MtYW5hbHlzdC1jb21wb25lbnRzL2Rpc3Qvc3RlbmNpbC1jb21wb25lbnRzL2Rpc3QvZXNtL3RpbWUtMGRiYjBmOTYuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgciBhcyByZWdpc3Rlckluc3RhbmNlLCBjIGFzIGNyZWF0ZUV2ZW50LCBoLCBnIGFzIGdldEVsZW1lbnQgfSBmcm9tICcuL2luZGV4LTRlNjQ3NDExLmpzJztcbmltcG9ydCB7IG4gYXMgbnVtYmVyS2V5cywgaSBhcyBpc0FjdGl2YXRpb25LZXkgfSBmcm9tICcuL2tleS1iNzU0OTFjNC5qcyc7XG5pbXBvcnQgeyBpIGFzIGlzVmFsaWROdW1iZXIsIGMgYXMgY29ubmVjdExvY2FsaXplZCwgZCBhcyBkaXNjb25uZWN0TG9jYWxpemVkIH0gZnJvbSAnLi9sb2NhbGUtZjdiMmZiYjAuanMnO1xuaW1wb3J0IHsgdSBhcyB1cGRhdGVNZXNzYWdlcywgYyBhcyBjb25uZWN0TWVzc2FnZXMsIHMgYXMgc2V0VXBNZXNzYWdlcywgZCBhcyBkaXNjb25uZWN0TWVzc2FnZXMgfSBmcm9tICcuL3Q5bi1kYzY3YWI5Ni5qcyc7XG5pbXBvcnQgeyBpIGFzIGlzVmFsaWRUaW1lLCBwIGFzIHBhcnNlVGltZVN0cmluZywgYSBhcyBsb2NhbGl6ZVRpbWVTdHJpbmdUb1BhcnRzLCBnIGFzIGdldE1lcmlkaWVtLCBiIGFzIGdldFRpbWVQYXJ0cywgYyBhcyBmb3JtYXRUaW1lUGFydCwgZCBhcyBsb2NhbGl6ZVRpbWVQYXJ0LCBlIGFzIGdldExvY2FsZUhvdXJDeWNsZSwgbSBhcyBtYXhUZW50aEZvck1pbnV0ZUFuZFNlY29uZCB9IGZyb20gJy4vdGltZS0wZGJiMGY5Ni5qcyc7XG5pbXBvcnQgeyBjIGFzIGNvbXBvbmVudExvYWRlZCwgYSBhcyBzZXRVcExvYWRhYmxlQ29tcG9uZW50LCBzIGFzIHNldENvbXBvbmVudExvYWRlZCB9IGZyb20gJy4vbG9hZGFibGUtY2MxNGQ3MjguanMnO1xuaW1wb3J0ICcuL2RvbS1mMWVlNGQwNC5qcyc7XG5pbXBvcnQgJy4vaW5kZXguZXNtLTFjNjVkOGM3LmpzJztcbmltcG9ydCAnLi9ndWlkLTg4YTM3MjlmLmpzJztcbmltcG9ydCAnLi9yZXNvdXJjZXMtNDg0MzZlZWEuanMnO1xuaW1wb3J0ICcuL29ic2VydmVycy01Njc0MGU5OS5qcyc7XG5cbi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvYmxvYi9tYXN0ZXIvTElDRU5TRS5tZCBmb3IgZGV0YWlscy5cbiAqIHYxLjAuNVxuICovXG5jb25zdCBDU1MgPSB7XG4gIGJ1dHRvbjogXCJidXR0b25cIixcbiAgYnV0dG9uQm90dG9tTGVmdDogXCJidXR0b24tLWJvdHRvbS1sZWZ0XCIsXG4gIGJ1dHRvbkJvdHRvbVJpZ2h0OiBcImJ1dHRvbi0tYm90dG9tLXJpZ2h0XCIsXG4gIGJ1dHRvbkhvdXJEb3duOiBcImJ1dHRvbi0taG91ci1kb3duXCIsXG4gIGJ1dHRvbkhvdXJVcDogXCJidXR0b24tLWhvdXItdXBcIixcbiAgYnV0dG9uTWVyaWRpZW1Eb3duOiBcImJ1dHRvbi0tbWVyaWRpZW0tZG93blwiLFxuICBidXR0b25NZXJpZGllbVVwOiBcImJ1dHRvbi0tbWVyaWRpZW0tdXBcIixcbiAgYnV0dG9uTWludXRlRG93bjogXCJidXR0b24tLW1pbnV0ZS1kb3duXCIsXG4gIGJ1dHRvbk1pbnV0ZVVwOiBcImJ1dHRvbi0tbWludXRlLXVwXCIsXG4gIGJ1dHRvblNlY29uZERvd246IFwiYnV0dG9uLS1zZWNvbmQtZG93blwiLFxuICBidXR0b25TZWNvbmRVcDogXCJidXR0b24tLXNlY29uZC11cFwiLFxuICBidXR0b25Ub3BMZWZ0OiBcImJ1dHRvbi0tdG9wLWxlZnRcIixcbiAgYnV0dG9uVG9wUmlnaHQ6IFwiYnV0dG9uLS10b3AtcmlnaHRcIixcbiAgY29sdW1uOiBcImNvbHVtblwiLFxuICBkZWxpbWl0ZXI6IFwiZGVsaW1pdGVyXCIsXG4gIGhvdXI6IFwiaG91clwiLFxuICBpbnB1dDogXCJpbnB1dFwiLFxuICBtZXJpZGllbTogXCJtZXJpZGllbVwiLFxuICBtaW51dGU6IFwibWludXRlXCIsXG4gIHNlY29uZDogXCJzZWNvbmRcIixcbiAgc2hvd01lcmlkaWVtOiBcInNob3ctbWVyaWRpZW1cIixcbiAgc2hvd1NlY29uZDogXCJzaG93LXNlY29uZFwiLFxuICBcInNjYWxlLXNcIjogXCJzY2FsZS1zXCIsXG4gIFwic2NhbGUtbVwiOiBcInNjYWxlLW1cIixcbiAgXCJzY2FsZS1sXCI6IFwic2NhbGUtbFwiLFxuICB0aW1lUGlja2VyOiBcInRpbWUtcGlja2VyXCIsXG4gIG1lcmlkaWVtU3RhcnQ6IFwibWVyaWRpZW0tLXN0YXJ0XCJcbn07XG5cbmNvbnN0IHRpbWVQaWNrZXJDc3MgPSBcIkBrZXlmcmFtZXMgaW57MCV7b3BhY2l0eTowfTEwMCV7b3BhY2l0eToxfX1Aa2V5ZnJhbWVzIGluLWRvd257MCV7b3BhY2l0eTowO3RyYW5zZm9ybTp0cmFuc2xhdGUzRCgwLCAtNXB4LCAwKX0xMDAle29wYWNpdHk6MTt0cmFuc2Zvcm06dHJhbnNsYXRlM0QoMCwgMCwgMCl9fUBrZXlmcmFtZXMgaW4tdXB7MCV7b3BhY2l0eTowO3RyYW5zZm9ybTp0cmFuc2xhdGUzRCgwLCA1cHgsIDApfTEwMCV7b3BhY2l0eToxO3RyYW5zZm9ybTp0cmFuc2xhdGUzRCgwLCAwLCAwKX19QGtleWZyYW1lcyBpbi1zY2FsZXswJXtvcGFjaXR5OjA7dHJhbnNmb3JtOnNjYWxlM0QoMC45NSwgMC45NSwgMSl9MTAwJXtvcGFjaXR5OjE7dHJhbnNmb3JtOnNjYWxlM0QoMSwgMSwgMSl9fTpyb290ey0tY2FsY2l0ZS1hbmltYXRpb24tdGltaW5nOmNhbGMoMTUwbXMgKiB2YXIoLS1jYWxjaXRlLWludGVybmFsLWR1cmF0aW9uLWZhY3RvcikpOy0tY2FsY2l0ZS1pbnRlcm5hbC1kdXJhdGlvbi1mYWN0b3I6dmFyKC0tY2FsY2l0ZS1kdXJhdGlvbi1mYWN0b3IsIDEpOy0tY2FsY2l0ZS1pbnRlcm5hbC1hbmltYXRpb24tdGltaW5nLWZhc3Q6Y2FsYygxMDBtcyAqIHZhcigtLWNhbGNpdGUtaW50ZXJuYWwtZHVyYXRpb24tZmFjdG9yKSk7LS1jYWxjaXRlLWludGVybmFsLWFuaW1hdGlvbi10aW1pbmctbWVkaXVtOmNhbGMoMjAwbXMgKiB2YXIoLS1jYWxjaXRlLWludGVybmFsLWR1cmF0aW9uLWZhY3RvcikpOy0tY2FsY2l0ZS1pbnRlcm5hbC1hbmltYXRpb24tdGltaW5nLXNsb3c6Y2FsYygzMDBtcyAqIHZhcigtLWNhbGNpdGUtaW50ZXJuYWwtZHVyYXRpb24tZmFjdG9yKSl9LmNhbGNpdGUtYW5pbWF0ZXtvcGFjaXR5OjA7YW5pbWF0aW9uLWZpbGwtbW9kZTpib3RoO2FuaW1hdGlvbi1kdXJhdGlvbjp2YXIoLS1jYWxjaXRlLWFuaW1hdGlvbi10aW1pbmcpfS5jYWxjaXRlLWFuaW1hdGVfX2lue2FuaW1hdGlvbi1uYW1lOmlufS5jYWxjaXRlLWFuaW1hdGVfX2luLWRvd257YW5pbWF0aW9uLW5hbWU6aW4tZG93bn0uY2FsY2l0ZS1hbmltYXRlX19pbi11cHthbmltYXRpb24tbmFtZTppbi11cH0uY2FsY2l0ZS1hbmltYXRlX19pbi1zY2FsZXthbmltYXRpb24tbmFtZTppbi1zY2FsZX1AbWVkaWEgKHByZWZlcnMtcmVkdWNlZC1tb3Rpb246IHJlZHVjZSl7OnJvb3R7LS1jYWxjaXRlLWludGVybmFsLWR1cmF0aW9uLWZhY3RvcjowfX06cm9vdHstLWNhbGNpdGUtZmxvYXRpbmctdWktdHJhbnNpdGlvbjp2YXIoLS1jYWxjaXRlLWFuaW1hdGlvbi10aW1pbmcpOy0tY2FsY2l0ZS1mbG9hdGluZy11aS16LWluZGV4OjYwMH06aG9zdChbaGlkZGVuXSl7ZGlzcGxheTpub25lfTpob3N0e2Rpc3BsYXk6aW5saW5lLWJsb2NrfS50aW1lLXBpY2tlcntkaXNwbGF5OmZsZXg7LXdlYmtpdC11c2VyLXNlbGVjdDpub25lO3VzZXItc2VsZWN0Om5vbmU7YWxpZ24taXRlbXM6Y2VudGVyO2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS11aS1mb3JlZ3JvdW5kLTEpO2ZvbnQtd2VpZ2h0OnZhcigtLWNhbGNpdGUtZm9udC13ZWlnaHQtbWVkaXVtKTtjb2xvcjp2YXIoLS1jYWxjaXRlLXVpLXRleHQtMSk7LS10dy1zaGFkb3c6MCA2cHggMjBweCAtNHB4IHJnYmEoMCwgMCwgMCwgMC4xKSwgMCA0cHggMTJweCAtMnB4IHJnYmEoMCwgMCwgMCwgMC4wOCk7LS10dy1zaGFkb3ctY29sb3JlZDowIDZweCAyMHB4IC00cHggdmFyKC0tdHctc2hhZG93LWNvbG9yKSwgMCA0cHggMTJweCAtMnB4IHZhcigtLXR3LXNoYWRvdy1jb2xvcik7Ym94LXNoYWRvdzp2YXIoLS10dy1yaW5nLW9mZnNldC1zaGFkb3csIDAgMCAjMDAwMCksIHZhcigtLXR3LXJpbmctc2hhZG93LCAwIDAgIzAwMDApLCB2YXIoLS10dy1zaGFkb3cpO2JvcmRlci1yYWRpdXM6dmFyKC0tY2FsY2l0ZS1ib3JkZXItcmFkaXVzKX0udGltZS1waWNrZXIgLmNvbHVtbntkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1ufS50aW1lLXBpY2tlciAubWVyaWRpZW0tLXN0YXJ0e29yZGVyOi0xfS50aW1lLXBpY2tlciAuYnV0dG9ue2Rpc3BsYXk6aW5saW5lLWZsZXg7Y3Vyc29yOnBvaW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWZvcmVncm91bmQtMSl9LnRpbWUtcGlja2VyIC5idXR0b246aG92ZXIsLnRpbWUtcGlja2VyIC5idXR0b246Zm9jdXN7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWZvcmVncm91bmQtMik7b3V0bGluZToycHggc29saWQgdHJhbnNwYXJlbnQ7b3V0bGluZS1vZmZzZXQ6MnB4O3otaW5kZXg6NDAwO291dGxpbmUtb2Zmc2V0OjB9LnRpbWUtcGlja2VyIC5idXR0b246YWN0aXZle2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS11aS1mb3JlZ3JvdW5kLTMpfS50aW1lLXBpY2tlciAuYnV0dG9uLnRvcC1sZWZ0e2JvcmRlci1zdGFydC1zdGFydC1yYWRpdXM6dmFyKC0tY2FsY2l0ZS1ib3JkZXItcmFkaXVzKX0udGltZS1waWNrZXIgLmJ1dHRvbi5ib3R0b20tbGVmdHtib3JkZXItZW5kLXN0YXJ0LXJhZGl1czp2YXIoLS1jYWxjaXRlLWJvcmRlci1yYWRpdXMpfS50aW1lLXBpY2tlciAuYnV0dG9uLnRvcC1yaWdodHtib3JkZXItc3RhcnQtZW5kLXJhZGl1czp2YXIoLS1jYWxjaXRlLWJvcmRlci1yYWRpdXMpfS50aW1lLXBpY2tlciAuYnV0dG9uLmJvdHRvbS1yaWdodHtib3JkZXItZW5kLWVuZC1yYWRpdXM6dmFyKC0tY2FsY2l0ZS1ib3JkZXItcmFkaXVzKX0udGltZS1waWNrZXIgLmJ1dHRvbiBjYWxjaXRlLWljb257Y29sb3I6dmFyKC0tY2FsY2l0ZS11aS10ZXh0LTMpfS50aW1lLXBpY2tlciAuaW5wdXR7ZGlzcGxheTppbmxpbmUtZmxleDtjdXJzb3I6cG9pbnRlcjthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtdWktZm9yZWdyb3VuZC0xKTtmb250LXdlaWdodDp2YXIoLS1jYWxjaXRlLWZvbnQtd2VpZ2h0LW1lZGl1bSl9LnRpbWUtcGlja2VyIC5pbnB1dDpob3Zlcntib3gtc2hhZG93Omluc2V0IDAgMCAwIDJweCB2YXIoLS1jYWxjaXRlLXVpLWZvcmVncm91bmQtMik7ei1pbmRleDo0MDB9LnRpbWUtcGlja2VyIC5pbnB1dDpmb2N1cywudGltZS1waWNrZXIgLmlucHV0OmhvdmVyOmZvY3Vze291dGxpbmU6MnB4IHNvbGlkIHRyYW5zcGFyZW50O291dGxpbmUtb2Zmc2V0OjJweDtib3gtc2hhZG93Omluc2V0IDAgMCAwIDJweCB2YXIoLS1jYWxjaXRlLXVpLWJyYW5kKTt6LWluZGV4OjQwMDtvdXRsaW5lLW9mZnNldDowfS50aW1lLXBpY2tlci5zY2FsZS1ze2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0tMSl9LnRpbWUtcGlja2VyLnNjYWxlLXMgLmJ1dHRvbiwudGltZS1waWNrZXIuc2NhbGUtcyAuaW5wdXR7cGFkZGluZy1pbmxpbmU6MC43NXJlbTtwYWRkaW5nLWJsb2NrOjAuMjVyZW19LnRpbWUtcGlja2VyLnNjYWxlLXM6bm90KC5zaG93LW1lcmlkaWVtKSAuZGVsaW1pdGVyOmxhc3QtY2hpbGR7cGFkZGluZy1pbmxpbmUtZW5kOjAuNzVyZW19LnRpbWUtcGlja2VyLnNjYWxlLW17Zm9udC1zaXplOnZhcigtLWNhbGNpdGUtZm9udC1zaXplLTApfS50aW1lLXBpY2tlci5zY2FsZS1tIC5idXR0b24sLnRpbWUtcGlja2VyLnNjYWxlLW0gLmlucHV0e3BhZGRpbmctaW5saW5lOjFyZW07cGFkZGluZy1ibG9jazowLjVyZW19LnRpbWUtcGlja2VyLnNjYWxlLW06bm90KC5zaG93LW1lcmlkaWVtKSAuZGVsaW1pdGVyOmxhc3QtY2hpbGR7cGFkZGluZy1pbmxpbmUtZW5kOjFyZW19LnRpbWUtcGlja2VyLnNjYWxlLWx7Zm9udC1zaXplOnZhcigtLWNhbGNpdGUtZm9udC1zaXplLTEpfS50aW1lLXBpY2tlci5zY2FsZS1sIC5idXR0b24sLnRpbWUtcGlja2VyLnNjYWxlLWwgLmlucHV0e3BhZGRpbmctaW5saW5lOjEuMjVyZW07cGFkZGluZy1ibG9jazowLjc1cmVtfS50aW1lLXBpY2tlci5zY2FsZS1sOm5vdCguc2hvdy1tZXJpZGllbSkgLmRlbGltaXRlcjpsYXN0LWNoaWxke3BhZGRpbmctaW5saW5lLWVuZDoxLjI1cmVtfVwiO1xuXG5mdW5jdGlvbiBjYXBpdGFsaXplKHN0cikge1xyXG4gIHJldHVybiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSk7XHJcbn1cclxuY29uc3QgVGltZVBpY2tlciA9IGNsYXNzIHtcclxuICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XHJcbiAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xyXG4gICAgdGhpcy5jYWxjaXRlSW50ZXJuYWxUaW1lUGlja2VyQmx1ciA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiY2FsY2l0ZUludGVybmFsVGltZVBpY2tlckJsdXJcIiwgNik7XHJcbiAgICB0aGlzLmNhbGNpdGVJbnRlcm5hbFRpbWVQaWNrZXJDaGFuZ2UgPSBjcmVhdGVFdmVudCh0aGlzLCBcImNhbGNpdGVJbnRlcm5hbFRpbWVQaWNrZXJDaGFuZ2VcIiwgNik7XHJcbiAgICB0aGlzLmNhbGNpdGVJbnRlcm5hbFRpbWVQaWNrZXJGb2N1cyA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiY2FsY2l0ZUludGVybmFsVGltZVBpY2tlckZvY3VzXCIsIDYpO1xyXG4gICAgdGhpcy5kZWNyZW1lbnRIb3VyID0gKCkgPT4ge1xyXG4gICAgICBjb25zdCBuZXdIb3VyID0gIXRoaXMuaG91ciA/IDAgOiB0aGlzLmhvdXIgPT09IFwiMDBcIiA/IDIzIDogcGFyc2VJbnQodGhpcy5ob3VyKSAtIDE7XHJcbiAgICAgIHRoaXMuc2V0VmFsdWVQYXJ0KFwiaG91clwiLCBuZXdIb3VyKTtcclxuICAgIH07XHJcbiAgICB0aGlzLmRlY3JlbWVudE1lcmlkaWVtID0gKCkgPT4ge1xyXG4gICAgICBjb25zdCBuZXdNZXJpZGllbSA9IHRoaXMubWVyaWRpZW0gPT09IFwiUE1cIiA/IFwiQU1cIiA6IFwiUE1cIjtcclxuICAgICAgdGhpcy5zZXRWYWx1ZVBhcnQoXCJtZXJpZGllbVwiLCBuZXdNZXJpZGllbSk7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5kZWNyZW1lbnRNaW51dGVPclNlY29uZCA9IChrZXkpID0+IHtcclxuICAgICAgbGV0IG5ld1ZhbHVlO1xyXG4gICAgICBpZiAoaXNWYWxpZE51bWJlcih0aGlzW2tleV0pKSB7XHJcbiAgICAgICAgY29uc3QgdmFsdWVBc051bWJlciA9IHBhcnNlSW50KHRoaXNba2V5XSk7XHJcbiAgICAgICAgbmV3VmFsdWUgPSB2YWx1ZUFzTnVtYmVyID09PSAwID8gNTkgOiB2YWx1ZUFzTnVtYmVyIC0gMTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBuZXdWYWx1ZSA9IDU5O1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuc2V0VmFsdWVQYXJ0KGtleSwgbmV3VmFsdWUpO1xyXG4gICAgfTtcclxuICAgIHRoaXMuZGVjcmVtZW50TWludXRlID0gKCkgPT4ge1xyXG4gICAgICB0aGlzLmRlY3JlbWVudE1pbnV0ZU9yU2Vjb25kKFwibWludXRlXCIpO1xyXG4gICAgfTtcclxuICAgIHRoaXMuZGVjcmVtZW50U2Vjb25kID0gKCkgPT4ge1xyXG4gICAgICB0aGlzLmRlY3JlbWVudE1pbnV0ZU9yU2Vjb25kKFwic2Vjb25kXCIpO1xyXG4gICAgfTtcclxuICAgIHRoaXMuZm9jdXNIYW5kbGVyID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuYWN0aXZlRWwgPSBldmVudC5jdXJyZW50VGFyZ2V0O1xyXG4gICAgfTtcclxuICAgIHRoaXMuaG91ckRvd25CdXR0b25LZXlEb3duSGFuZGxlciA9IChldmVudCkgPT4ge1xyXG4gICAgICBpZiAodGhpcy5idXR0b25BY3RpdmF0ZWQoZXZlbnQpKSB7XHJcbiAgICAgICAgdGhpcy5kZWNyZW1lbnRIb3VyKCk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aGlzLmhvdXJLZXlEb3duSGFuZGxlciA9IChldmVudCkgPT4ge1xyXG4gICAgICBjb25zdCB7IGtleSB9ID0gZXZlbnQ7XHJcbiAgICAgIGlmIChudW1iZXJLZXlzLmluY2x1ZGVzKGtleSkpIHtcclxuICAgICAgICBjb25zdCBrZXlBc051bWJlciA9IHBhcnNlSW50KGtleSk7XHJcbiAgICAgICAgbGV0IG5ld0hvdXI7XHJcbiAgICAgICAgaWYgKGlzVmFsaWROdW1iZXIodGhpcy5ob3VyKSkge1xyXG4gICAgICAgICAgc3dpdGNoICh0aGlzLmhvdXJDeWNsZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwiMTJcIjpcclxuICAgICAgICAgICAgICBuZXdIb3VyID1cclxuICAgICAgICAgICAgICAgIHRoaXMuaG91ciA9PT0gXCIwMVwiICYmIGtleUFzTnVtYmVyID49IDAgJiYga2V5QXNOdW1iZXIgPD0gMlxyXG4gICAgICAgICAgICAgICAgICA/IGAxJHtrZXlBc051bWJlcn1gXHJcbiAgICAgICAgICAgICAgICAgIDoga2V5QXNOdW1iZXI7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCIyNFwiOlxyXG4gICAgICAgICAgICAgIGlmICh0aGlzLmhvdXIgPT09IFwiMDFcIikge1xyXG4gICAgICAgICAgICAgICAgbmV3SG91ciA9IGAxJHtrZXlBc051bWJlcn1gO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLmhvdXIgPT09IFwiMDJcIiAmJiBrZXlBc051bWJlciA+PSAwICYmIGtleUFzTnVtYmVyIDw9IDMpIHtcclxuICAgICAgICAgICAgICAgIG5ld0hvdXIgPSBgMiR7a2V5QXNOdW1iZXJ9YDtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBuZXdIb3VyID0ga2V5QXNOdW1iZXI7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIG5ld0hvdXIgPSBrZXlBc051bWJlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZXRWYWx1ZVBhcnQoXCJob3VyXCIsIG5ld0hvdXIpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHN3aXRjaCAoa2V5KSB7XHJcbiAgICAgICAgICBjYXNlIFwiQmFja3NwYWNlXCI6XHJcbiAgICAgICAgICBjYXNlIFwiRGVsZXRlXCI6XHJcbiAgICAgICAgICAgIHRoaXMuc2V0VmFsdWVQYXJ0KFwiaG91clwiLCBudWxsKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFwiQXJyb3dEb3duXCI6XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuZGVjcmVtZW50SG91cigpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgXCJBcnJvd1VwXCI6XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5jcmVtZW50SG91cigpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgXCIgXCI6XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRoaXMuaG91clVwQnV0dG9uS2V5RG93bkhhbmRsZXIgPSAoZXZlbnQpID0+IHtcclxuICAgICAgaWYgKHRoaXMuYnV0dG9uQWN0aXZhdGVkKGV2ZW50KSkge1xyXG4gICAgICAgIHRoaXMuaW5jcmVtZW50SG91cigpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhpcy5pbmNyZW1lbnRNZXJpZGllbSA9ICgpID0+IHtcclxuICAgICAgY29uc3QgbmV3TWVyaWRpZW0gPSB0aGlzLm1lcmlkaWVtID09PSBcIkFNXCIgPyBcIlBNXCIgOiBcIkFNXCI7XHJcbiAgICAgIHRoaXMuc2V0VmFsdWVQYXJ0KFwibWVyaWRpZW1cIiwgbmV3TWVyaWRpZW0pO1xyXG4gICAgfTtcclxuICAgIHRoaXMuaW5jcmVtZW50SG91ciA9ICgpID0+IHtcclxuICAgICAgY29uc3QgbmV3SG91ciA9IGlzVmFsaWROdW1iZXIodGhpcy5ob3VyKVxyXG4gICAgICAgID8gdGhpcy5ob3VyID09PSBcIjIzXCJcclxuICAgICAgICAgID8gMFxyXG4gICAgICAgICAgOiBwYXJzZUludCh0aGlzLmhvdXIpICsgMVxyXG4gICAgICAgIDogMTtcclxuICAgICAgdGhpcy5zZXRWYWx1ZVBhcnQoXCJob3VyXCIsIG5ld0hvdXIpO1xyXG4gICAgfTtcclxuICAgIHRoaXMuaW5jcmVtZW50TWludXRlT3JTZWNvbmQgPSAoa2V5KSA9PiB7XHJcbiAgICAgIGNvbnN0IG5ld1ZhbHVlID0gaXNWYWxpZE51bWJlcih0aGlzW2tleV0pXHJcbiAgICAgICAgPyB0aGlzW2tleV0gPT09IFwiNTlcIlxyXG4gICAgICAgICAgPyAwXHJcbiAgICAgICAgICA6IHBhcnNlSW50KHRoaXNba2V5XSkgKyAxXHJcbiAgICAgICAgOiAwO1xyXG4gICAgICB0aGlzLnNldFZhbHVlUGFydChrZXksIG5ld1ZhbHVlKTtcclxuICAgIH07XHJcbiAgICB0aGlzLmluY3JlbWVudE1pbnV0ZSA9ICgpID0+IHtcclxuICAgICAgdGhpcy5pbmNyZW1lbnRNaW51dGVPclNlY29uZChcIm1pbnV0ZVwiKTtcclxuICAgIH07XHJcbiAgICB0aGlzLmluY3JlbWVudFNlY29uZCA9ICgpID0+IHtcclxuICAgICAgdGhpcy5pbmNyZW1lbnRNaW51dGVPclNlY29uZChcInNlY29uZFwiKTtcclxuICAgIH07XHJcbiAgICB0aGlzLm1lcmlkaWVtRG93bkJ1dHRvbktleURvd25IYW5kbGVyID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgIGlmICh0aGlzLmJ1dHRvbkFjdGl2YXRlZChldmVudCkpIHtcclxuICAgICAgICB0aGlzLmRlY3JlbWVudE1lcmlkaWVtKCk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aGlzLm1lcmlkaWVtS2V5RG93bkhhbmRsZXIgPSAoZXZlbnQpID0+IHtcclxuICAgICAgc3dpdGNoIChldmVudC5rZXkpIHtcclxuICAgICAgICBjYXNlIFwiYVwiOlxyXG4gICAgICAgICAgdGhpcy5zZXRWYWx1ZVBhcnQoXCJtZXJpZGllbVwiLCBcIkFNXCIpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcInBcIjpcclxuICAgICAgICAgIHRoaXMuc2V0VmFsdWVQYXJ0KFwibWVyaWRpZW1cIiwgXCJQTVwiKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJCYWNrc3BhY2VcIjpcclxuICAgICAgICBjYXNlIFwiRGVsZXRlXCI6XHJcbiAgICAgICAgICB0aGlzLnNldFZhbHVlUGFydChcIm1lcmlkaWVtXCIsIG51bGwpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcIkFycm93VXBcIjpcclxuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICB0aGlzLmluY3JlbWVudE1lcmlkaWVtKCk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwiQXJyb3dEb3duXCI6XHJcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgdGhpcy5kZWNyZW1lbnRNZXJpZGllbSgpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcIiBcIjpcclxuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRoaXMubWVyaWRpZW1VcEJ1dHRvbktleURvd25IYW5kbGVyID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgIGlmICh0aGlzLmJ1dHRvbkFjdGl2YXRlZChldmVudCkpIHtcclxuICAgICAgICB0aGlzLmluY3JlbWVudE1lcmlkaWVtKCk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aGlzLm1pbnV0ZURvd25CdXR0b25LZXlEb3duSGFuZGxlciA9IChldmVudCkgPT4ge1xyXG4gICAgICBpZiAodGhpcy5idXR0b25BY3RpdmF0ZWQoZXZlbnQpKSB7XHJcbiAgICAgICAgdGhpcy5kZWNyZW1lbnRNaW51dGUoKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRoaXMubWludXRlS2V5RG93bkhhbmRsZXIgPSAoZXZlbnQpID0+IHtcclxuICAgICAgY29uc3QgeyBrZXkgfSA9IGV2ZW50O1xyXG4gICAgICBpZiAobnVtYmVyS2V5cy5pbmNsdWRlcyhrZXkpKSB7XHJcbiAgICAgICAgY29uc3Qga2V5QXNOdW1iZXIgPSBwYXJzZUludChrZXkpO1xyXG4gICAgICAgIGxldCBuZXdNaW51dGU7XHJcbiAgICAgICAgaWYgKGlzVmFsaWROdW1iZXIodGhpcy5taW51dGUpICYmIHRoaXMubWludXRlLnN0YXJ0c1dpdGgoXCIwXCIpKSB7XHJcbiAgICAgICAgICBjb25zdCBtaW51dGVBc051bWJlciA9IHBhcnNlSW50KHRoaXMubWludXRlKTtcclxuICAgICAgICAgIG5ld01pbnV0ZSA9XHJcbiAgICAgICAgICAgIG1pbnV0ZUFzTnVtYmVyID4gbWF4VGVudGhGb3JNaW51dGVBbmRTZWNvbmRcclxuICAgICAgICAgICAgICA/IGtleUFzTnVtYmVyXHJcbiAgICAgICAgICAgICAgOiBgJHttaW51dGVBc051bWJlcn0ke2tleUFzTnVtYmVyfWA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgbmV3TWludXRlID0ga2V5QXNOdW1iZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2V0VmFsdWVQYXJ0KFwibWludXRlXCIsIG5ld01pbnV0ZSk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgc3dpdGNoIChrZXkpIHtcclxuICAgICAgICAgIGNhc2UgXCJCYWNrc3BhY2VcIjpcclxuICAgICAgICAgIGNhc2UgXCJEZWxldGVcIjpcclxuICAgICAgICAgICAgdGhpcy5zZXRWYWx1ZVBhcnQoXCJtaW51dGVcIiwgbnVsbCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSBcIkFycm93RG93blwiOlxyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzLmRlY3JlbWVudE1pbnV0ZSgpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgXCJBcnJvd1VwXCI6XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5jcmVtZW50TWludXRlKCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSBcIiBcIjpcclxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhpcy5taW51dGVVcEJ1dHRvbktleURvd25IYW5kbGVyID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgIGlmICh0aGlzLmJ1dHRvbkFjdGl2YXRlZChldmVudCkpIHtcclxuICAgICAgICB0aGlzLmluY3JlbWVudE1pbnV0ZSgpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhpcy5zZWNvbmREb3duQnV0dG9uS2V5RG93bkhhbmRsZXIgPSAoZXZlbnQpID0+IHtcclxuICAgICAgaWYgKHRoaXMuYnV0dG9uQWN0aXZhdGVkKGV2ZW50KSkge1xyXG4gICAgICAgIHRoaXMuZGVjcmVtZW50U2Vjb25kKCk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aGlzLnNlY29uZEtleURvd25IYW5kbGVyID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgIGNvbnN0IHsga2V5IH0gPSBldmVudDtcclxuICAgICAgaWYgKG51bWJlcktleXMuaW5jbHVkZXMoa2V5KSkge1xyXG4gICAgICAgIGNvbnN0IGtleUFzTnVtYmVyID0gcGFyc2VJbnQoa2V5KTtcclxuICAgICAgICBsZXQgbmV3U2Vjb25kO1xyXG4gICAgICAgIGlmIChpc1ZhbGlkTnVtYmVyKHRoaXMuc2Vjb25kKSAmJiB0aGlzLnNlY29uZC5zdGFydHNXaXRoKFwiMFwiKSkge1xyXG4gICAgICAgICAgY29uc3Qgc2Vjb25kQXNOdW1iZXIgPSBwYXJzZUludCh0aGlzLnNlY29uZCk7XHJcbiAgICAgICAgICBuZXdTZWNvbmQgPVxyXG4gICAgICAgICAgICBzZWNvbmRBc051bWJlciA+IG1heFRlbnRoRm9yTWludXRlQW5kU2Vjb25kXHJcbiAgICAgICAgICAgICAgPyBrZXlBc051bWJlclxyXG4gICAgICAgICAgICAgIDogYCR7c2Vjb25kQXNOdW1iZXJ9JHtrZXlBc051bWJlcn1gO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIG5ld1NlY29uZCA9IGtleUFzTnVtYmVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNldFZhbHVlUGFydChcInNlY29uZFwiLCBuZXdTZWNvbmQpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHN3aXRjaCAoa2V5KSB7XHJcbiAgICAgICAgICBjYXNlIFwiQmFja3NwYWNlXCI6XHJcbiAgICAgICAgICBjYXNlIFwiRGVsZXRlXCI6XHJcbiAgICAgICAgICAgIHRoaXMuc2V0VmFsdWVQYXJ0KFwic2Vjb25kXCIsIG51bGwpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgXCJBcnJvd0Rvd25cIjpcclxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy5kZWNyZW1lbnRTZWNvbmQoKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFwiQXJyb3dVcFwiOlxyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzLmluY3JlbWVudFNlY29uZCgpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgXCIgXCI6XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRoaXMuc2Vjb25kVXBCdXR0b25LZXlEb3duSGFuZGxlciA9IChldmVudCkgPT4ge1xyXG4gICAgICBpZiAodGhpcy5idXR0b25BY3RpdmF0ZWQoZXZlbnQpKSB7XHJcbiAgICAgICAgdGhpcy5pbmNyZW1lbnRTZWNvbmQoKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRoaXMuc2V0SG91ckVsID0gKGVsKSA9PiAodGhpcy5ob3VyRWwgPSBlbCk7XHJcbiAgICB0aGlzLnNldE1lcmlkaWVtRWwgPSAoZWwpID0+ICh0aGlzLm1lcmlkaWVtRWwgPSBlbCk7XHJcbiAgICB0aGlzLnNldE1pbnV0ZUVsID0gKGVsKSA9PiAodGhpcy5taW51dGVFbCA9IGVsKTtcclxuICAgIHRoaXMuc2V0U2Vjb25kRWwgPSAoZWwpID0+ICh0aGlzLnNlY29uZEVsID0gZWwpO1xyXG4gICAgdGhpcy5zZXRWYWx1ZSA9ICh2YWx1ZSwgZW1pdCA9IHRydWUpID0+IHtcclxuICAgICAgaWYgKGlzVmFsaWRUaW1lKHZhbHVlKSkge1xyXG4gICAgICAgIGNvbnN0IHsgaG91ciwgbWludXRlLCBzZWNvbmQgfSA9IHBhcnNlVGltZVN0cmluZyh2YWx1ZSk7XHJcbiAgICAgICAgY29uc3QgeyBlZmZlY3RpdmVMb2NhbGU6IGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnN0IHsgbG9jYWxpemVkSG91ciwgbG9jYWxpemVkSG91clN1ZmZpeCwgbG9jYWxpemVkTWludXRlLCBsb2NhbGl6ZWRNaW51dGVTdWZmaXgsIGxvY2FsaXplZFNlY29uZCwgbG9jYWxpemVkU2Vjb25kU3VmZml4LCBsb2NhbGl6ZWRNZXJpZGllbSB9ID0gbG9jYWxpemVUaW1lU3RyaW5nVG9QYXJ0cyh7IHZhbHVlLCBsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSB9KTtcclxuICAgICAgICB0aGlzLmxvY2FsaXplZEhvdXIgPSBsb2NhbGl6ZWRIb3VyO1xyXG4gICAgICAgIHRoaXMubG9jYWxpemVkSG91clN1ZmZpeCA9IGxvY2FsaXplZEhvdXJTdWZmaXg7XHJcbiAgICAgICAgdGhpcy5sb2NhbGl6ZWRNaW51dGUgPSBsb2NhbGl6ZWRNaW51dGU7XHJcbiAgICAgICAgdGhpcy5sb2NhbGl6ZWRNaW51dGVTdWZmaXggPSBsb2NhbGl6ZWRNaW51dGVTdWZmaXg7XHJcbiAgICAgICAgdGhpcy5sb2NhbGl6ZWRTZWNvbmQgPSBsb2NhbGl6ZWRTZWNvbmQ7XHJcbiAgICAgICAgdGhpcy5sb2NhbGl6ZWRTZWNvbmRTdWZmaXggPSBsb2NhbGl6ZWRTZWNvbmRTdWZmaXg7XHJcbiAgICAgICAgdGhpcy5ob3VyID0gaG91cjtcclxuICAgICAgICB0aGlzLm1pbnV0ZSA9IG1pbnV0ZTtcclxuICAgICAgICB0aGlzLnNlY29uZCA9IHNlY29uZDtcclxuICAgICAgICBpZiAobG9jYWxpemVkTWVyaWRpZW0pIHtcclxuICAgICAgICAgIHRoaXMubG9jYWxpemVkTWVyaWRpZW0gPSBsb2NhbGl6ZWRNZXJpZGllbTtcclxuICAgICAgICAgIHRoaXMubWVyaWRpZW0gPSBnZXRNZXJpZGllbSh0aGlzLmhvdXIpO1xyXG4gICAgICAgICAgY29uc3QgZm9ybWF0UGFydHMgPSBnZXRUaW1lUGFydHMoeyB2YWx1ZSwgbG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0gfSk7XHJcbiAgICAgICAgICB0aGlzLm1lcmlkaWVtT3JkZXIgPSB0aGlzLmdldE1lcmlkaWVtT3JkZXIoZm9ybWF0UGFydHMpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICB0aGlzLmhvdXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMubG9jYWxpemVkSG91ciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5sb2NhbGl6ZWRIb3VyU3VmZml4ID0gbnVsbDtcclxuICAgICAgICB0aGlzLmxvY2FsaXplZE1lcmlkaWVtID0gbnVsbDtcclxuICAgICAgICB0aGlzLmxvY2FsaXplZE1pbnV0ZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5sb2NhbGl6ZWRNaW51dGVTdWZmaXggPSBudWxsO1xyXG4gICAgICAgIHRoaXMubG9jYWxpemVkU2Vjb25kID0gbnVsbDtcclxuICAgICAgICB0aGlzLmxvY2FsaXplZFNlY29uZFN1ZmZpeCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5tZXJpZGllbSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5taW51dGUgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuc2Vjb25kID0gbnVsbDtcclxuICAgICAgICB0aGlzLnZhbHVlID0gbnVsbDtcclxuICAgICAgfVxyXG4gICAgICBpZiAoZW1pdCkge1xyXG4gICAgICAgIHRoaXMuY2FsY2l0ZUludGVybmFsVGltZVBpY2tlckNoYW5nZS5lbWl0KCk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aGlzLnNldFZhbHVlUGFydCA9IChrZXksIHZhbHVlLCBlbWl0ID0gdHJ1ZSkgPT4ge1xyXG4gICAgICBjb25zdCB7IGVmZmVjdGl2ZUxvY2FsZTogbG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0gfSA9IHRoaXM7XHJcbiAgICAgIGlmIChrZXkgPT09IFwibWVyaWRpZW1cIikge1xyXG4gICAgICAgIHRoaXMubWVyaWRpZW0gPSB2YWx1ZTtcclxuICAgICAgICBpZiAoaXNWYWxpZE51bWJlcih0aGlzLmhvdXIpKSB7XHJcbiAgICAgICAgICBjb25zdCBob3VyQXNOdW1iZXIgPSBwYXJzZUludCh0aGlzLmhvdXIpO1xyXG4gICAgICAgICAgc3dpdGNoICh2YWx1ZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwiQU1cIjpcclxuICAgICAgICAgICAgICBpZiAoaG91ckFzTnVtYmVyID49IDEyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhvdXIgPSBmb3JtYXRUaW1lUGFydChob3VyQXNOdW1iZXIgLSAxMik7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiUE1cIjpcclxuICAgICAgICAgICAgICBpZiAoaG91ckFzTnVtYmVyIDwgMTIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaG91ciA9IGZvcm1hdFRpbWVQYXJ0KGhvdXJBc051bWJlciArIDEyKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aGlzLmxvY2FsaXplZEhvdXIgPSBsb2NhbGl6ZVRpbWVQYXJ0KHtcclxuICAgICAgICAgICAgdmFsdWU6IHRoaXMuaG91cixcclxuICAgICAgICAgICAgcGFydDogXCJob3VyXCIsXHJcbiAgICAgICAgICAgIGxvY2FsZSxcclxuICAgICAgICAgICAgbnVtYmVyaW5nU3lzdGVtXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgdGhpc1trZXldID0gdHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiID8gZm9ybWF0VGltZVBhcnQodmFsdWUpIDogdmFsdWU7XHJcbiAgICAgICAgdGhpc1tgbG9jYWxpemVkJHtjYXBpdGFsaXplKGtleSl9YF0gPSBsb2NhbGl6ZVRpbWVQYXJ0KHtcclxuICAgICAgICAgIHZhbHVlOiB0aGlzW2tleV0sXHJcbiAgICAgICAgICBwYXJ0OiBrZXksXHJcbiAgICAgICAgICBsb2NhbGUsXHJcbiAgICAgICAgICBudW1iZXJpbmdTeXN0ZW1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5ob3VyICYmIHRoaXMubWludXRlKSB7XHJcbiAgICAgICAgY29uc3Qgc2hvd1NlY29uZHMgPSB0aGlzLnNlY29uZCAmJiB0aGlzLnNob3dTZWNvbmQ7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IGAke3RoaXMuaG91cn06JHt0aGlzLm1pbnV0ZX06JHtzaG93U2Vjb25kcyA/IHRoaXMuc2Vjb25kIDogXCIwMFwifWA7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IG51bGw7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5sb2NhbGl6ZWRNZXJpZGllbSA9IHRoaXMudmFsdWVcclxuICAgICAgICA/IGxvY2FsaXplVGltZVN0cmluZ1RvUGFydHMoeyB2YWx1ZTogdGhpcy52YWx1ZSwgbG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0gfSlcclxuICAgICAgICAgID8ubG9jYWxpemVkTWVyaWRpZW0gfHwgbnVsbFxyXG4gICAgICAgIDogbG9jYWxpemVUaW1lUGFydCh7IHZhbHVlOiB0aGlzLm1lcmlkaWVtLCBwYXJ0OiBcIm1lcmlkaWVtXCIsIGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtIH0pO1xyXG4gICAgICBpZiAoZW1pdCkge1xyXG4gICAgICAgIHRoaXMuY2FsY2l0ZUludGVybmFsVGltZVBpY2tlckNoYW5nZS5lbWl0KCk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aGlzLnNjYWxlID0gXCJtXCI7XHJcbiAgICB0aGlzLnN0ZXAgPSA2MDtcclxuICAgIHRoaXMubnVtYmVyaW5nU3lzdGVtID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy52YWx1ZSA9IG51bGw7XHJcbiAgICB0aGlzLm1lc3NhZ2VzID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5tZXNzYWdlT3ZlcnJpZGVzID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5lZmZlY3RpdmVMb2NhbGUgPSBcIlwiO1xyXG4gICAgdGhpcy5ob3VyID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5ob3VyQ3ljbGUgPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLmxvY2FsaXplZEhvdXIgPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLmxvY2FsaXplZEhvdXJTdWZmaXggPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLmxvY2FsaXplZE1lcmlkaWVtID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5sb2NhbGl6ZWRNaW51dGUgPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLmxvY2FsaXplZE1pbnV0ZVN1ZmZpeCA9IHVuZGVmaW5lZDtcclxuICAgIHRoaXMubG9jYWxpemVkU2Vjb25kID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5sb2NhbGl6ZWRTZWNvbmRTdWZmaXggPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLm1lcmlkaWVtID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5taW51dGUgPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLnNlY29uZCA9IHVuZGVmaW5lZDtcclxuICAgIHRoaXMuc2hvd1NlY29uZCA9IHRoaXMuc3RlcCA8IDYwO1xyXG4gICAgdGhpcy5kZWZhdWx0TWVzc2FnZXMgPSB1bmRlZmluZWQ7XHJcbiAgfVxyXG4gIHZhbHVlV2F0Y2hlcihuZXdWYWx1ZSkge1xyXG4gICAgdGhpcy5zZXRWYWx1ZShuZXdWYWx1ZSwgZmFsc2UpO1xyXG4gIH1cclxuICBvbk1lc3NhZ2VzQ2hhbmdlKCkge1xyXG4gICAgLyogd2lyZWQgdXAgYnkgdDluIHV0aWwgKi9cclxuICB9XHJcbiAgZWZmZWN0aXZlTG9jYWxlV2F0Y2hlcigpIHtcclxuICAgIHRoaXMudXBkYXRlTG9jYWxlKCk7XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vICBFdmVudCBMaXN0ZW5lcnNcclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICBob3N0Qmx1ckhhbmRsZXIoKSB7XHJcbiAgICB0aGlzLmNhbGNpdGVJbnRlcm5hbFRpbWVQaWNrZXJCbHVyLmVtaXQoKTtcclxuICB9XHJcbiAgaG9zdEZvY3VzSGFuZGxlcigpIHtcclxuICAgIHRoaXMuY2FsY2l0ZUludGVybmFsVGltZVBpY2tlckZvY3VzLmVtaXQoKTtcclxuICB9XHJcbiAga2V5RG93bkhhbmRsZXIoZXZlbnQpIHtcclxuICAgIGNvbnN0IHsgZGVmYXVsdFByZXZlbnRlZCwga2V5IH0gPSBldmVudDtcclxuICAgIGlmIChkZWZhdWx0UHJldmVudGVkKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHN3aXRjaCAodGhpcy5hY3RpdmVFbCkge1xyXG4gICAgICBjYXNlIHRoaXMuaG91ckVsOlxyXG4gICAgICAgIGlmIChrZXkgPT09IFwiQXJyb3dSaWdodFwiKSB7XHJcbiAgICAgICAgICB0aGlzLmZvY3VzUGFydChcIm1pbnV0ZVwiKTtcclxuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIHRoaXMubWludXRlRWw6XHJcbiAgICAgICAgc3dpdGNoIChrZXkpIHtcclxuICAgICAgICAgIGNhc2UgXCJBcnJvd0xlZnRcIjpcclxuICAgICAgICAgICAgdGhpcy5mb2N1c1BhcnQoXCJob3VyXCIpO1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgXCJBcnJvd1JpZ2h0XCI6XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0ZXAgIT09IDYwKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5mb2N1c1BhcnQoXCJzZWNvbmRcIik7XHJcbiAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmhvdXJDeWNsZSA9PT0gXCIxMlwiKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5mb2N1c1BhcnQoXCJtZXJpZGllbVwiKTtcclxuICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSB0aGlzLnNlY29uZEVsOlxyXG4gICAgICAgIHN3aXRjaCAoa2V5KSB7XHJcbiAgICAgICAgICBjYXNlIFwiQXJyb3dMZWZ0XCI6XHJcbiAgICAgICAgICAgIHRoaXMuZm9jdXNQYXJ0KFwibWludXRlXCIpO1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgXCJBcnJvd1JpZ2h0XCI6XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmhvdXJDeWNsZSA9PT0gXCIxMlwiKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5mb2N1c1BhcnQoXCJtZXJpZGllbVwiKTtcclxuICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSB0aGlzLm1lcmlkaWVtRWw6XHJcbiAgICAgICAgc3dpdGNoIChrZXkpIHtcclxuICAgICAgICAgIGNhc2UgXCJBcnJvd0xlZnRcIjpcclxuICAgICAgICAgICAgaWYgKHRoaXMuc3RlcCAhPT0gNjApIHtcclxuICAgICAgICAgICAgICB0aGlzLmZvY3VzUGFydChcInNlY29uZFwiKTtcclxuICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgIHRoaXMuZm9jdXNQYXJ0KFwibWludXRlXCIpO1xyXG4gICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyAgUHVibGljIE1ldGhvZHNcclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvKipcclxuICAgKiBTZXRzIGZvY3VzIG9uIHRoZSBjb21wb25lbnQncyBmaXJzdCBmb2N1c2FibGUgZWxlbWVudC5cclxuICAgKi9cclxuICBhc3luYyBzZXRGb2N1cygpIHtcclxuICAgIGF3YWl0IGNvbXBvbmVudExvYWRlZCh0aGlzKTtcclxuICAgIHRoaXMuZWw/LmZvY3VzKCk7XHJcbiAgfVxyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyAgUHJpdmF0ZSBNZXRob2RzXHJcbiAgLy9cclxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIGFzeW5jIGZvY3VzUGFydCh0YXJnZXQpIHtcclxuICAgIGF3YWl0IGNvbXBvbmVudExvYWRlZCh0aGlzKTtcclxuICAgIHRoaXNbYCR7dGFyZ2V0IHx8IFwiaG91clwifUVsYF0/LmZvY3VzKCk7XHJcbiAgfVxyXG4gIGJ1dHRvbkFjdGl2YXRlZChldmVudCkge1xyXG4gICAgY29uc3QgeyBrZXkgfSA9IGV2ZW50O1xyXG4gICAgaWYgKGtleSA9PT0gXCIgXCIpIHtcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBpc0FjdGl2YXRpb25LZXkoa2V5KTtcclxuICB9XHJcbiAgZ2V0TWVyaWRpZW1PcmRlcihmb3JtYXRQYXJ0cykge1xyXG4gICAgY29uc3QgbG9jYWxlID0gdGhpcy5lZmZlY3RpdmVMb2NhbGU7XHJcbiAgICBjb25zdCBpc1JUTEtpbmQgPSBsb2NhbGUgPT09IFwiYXJcIiB8fCBsb2NhbGUgPT09IFwiaGVcIjtcclxuICAgIGlmIChmb3JtYXRQYXJ0cyAmJiAhaXNSVExLaW5kKSB7XHJcbiAgICAgIGNvbnN0IGluZGV4ID0gZm9ybWF0UGFydHMuZmluZEluZGV4KChwYXJ0cykgPT4ge1xyXG4gICAgICAgIHJldHVybiBwYXJ0cy52YWx1ZSA9PT0gdGhpcy5sb2NhbGl6ZWRNZXJpZGllbTtcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBpbmRleDtcclxuICAgIH1cclxuICAgIHJldHVybiAwO1xyXG4gIH1cclxuICB1cGRhdGVMb2NhbGUoKSB7XHJcbiAgICB1cGRhdGVNZXNzYWdlcyh0aGlzLCB0aGlzLmVmZmVjdGl2ZUxvY2FsZSk7XHJcbiAgICB0aGlzLmhvdXJDeWNsZSA9IGdldExvY2FsZUhvdXJDeWNsZSh0aGlzLmVmZmVjdGl2ZUxvY2FsZSwgdGhpcy5udW1iZXJpbmdTeXN0ZW0pO1xyXG4gICAgdGhpcy5zZXRWYWx1ZSh0aGlzLnZhbHVlLCBmYWxzZSk7XHJcbiAgfVxyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyAgTGlmZWN5Y2xlXHJcbiAgLy9cclxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xyXG4gICAgY29ubmVjdExvY2FsaXplZCh0aGlzKTtcclxuICAgIHRoaXMudXBkYXRlTG9jYWxlKCk7XHJcbiAgICBjb25uZWN0TWVzc2FnZXModGhpcyk7XHJcbiAgICB0aGlzLm1lcmlkaWVtT3JkZXIgPSB0aGlzLmdldE1lcmlkaWVtT3JkZXIoZ2V0VGltZVBhcnRzKHtcclxuICAgICAgdmFsdWU6IFwiMDowMDowMFwiLFxyXG4gICAgICBsb2NhbGU6IHRoaXMuZWZmZWN0aXZlTG9jYWxlLFxyXG4gICAgICBudW1iZXJpbmdTeXN0ZW06IHRoaXMubnVtYmVyaW5nU3lzdGVtXHJcbiAgICB9KSk7XHJcbiAgfVxyXG4gIGFzeW5jIGNvbXBvbmVudFdpbGxMb2FkKCkge1xyXG4gICAgc2V0VXBMb2FkYWJsZUNvbXBvbmVudCh0aGlzKTtcclxuICAgIGF3YWl0IHNldFVwTWVzc2FnZXModGhpcyk7XHJcbiAgfVxyXG4gIGNvbXBvbmVudERpZExvYWQoKSB7XHJcbiAgICBzZXRDb21wb25lbnRMb2FkZWQodGhpcyk7XHJcbiAgfVxyXG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xyXG4gICAgZGlzY29ubmVjdExvY2FsaXplZCh0aGlzKTtcclxuICAgIGRpc2Nvbm5lY3RNZXNzYWdlcyh0aGlzKTtcclxuICB9XHJcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vICBSZW5kZXIgTWV0aG9kc1xyXG4gIC8vXHJcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCBob3VySXNOdW1iZXIgPSBpc1ZhbGlkTnVtYmVyKHRoaXMuaG91cik7XHJcbiAgICBjb25zdCBpY29uU2NhbGUgPSB0aGlzLnNjYWxlID09PSBcInNcIiB8fCB0aGlzLnNjYWxlID09PSBcIm1cIiA/IFwic1wiIDogXCJtXCI7XHJcbiAgICBjb25zdCBtaW51dGVJc051bWJlciA9IGlzVmFsaWROdW1iZXIodGhpcy5taW51dGUpO1xyXG4gICAgY29uc3Qgc2Vjb25kSXNOdW1iZXIgPSBpc1ZhbGlkTnVtYmVyKHRoaXMuc2Vjb25kKTtcclxuICAgIGNvbnN0IHNob3dNZXJpZGllbSA9IHRoaXMuaG91ckN5Y2xlID09PSBcIjEyXCI7XHJcbiAgICByZXR1cm4gKGgoXCJkaXZcIiwgeyBjbGFzczoge1xyXG4gICAgICAgIFtDU1MudGltZVBpY2tlcl06IHRydWUsXHJcbiAgICAgICAgW0NTUy5zaG93TWVyaWRpZW1dOiBzaG93TWVyaWRpZW0sXHJcbiAgICAgICAgW0NTUy5zaG93U2Vjb25kXTogdGhpcy5zaG93U2Vjb25kLFxyXG4gICAgICAgIFtDU1NbYHNjYWxlLSR7dGhpcy5zY2FsZX1gXV06IHRydWVcclxuICAgICAgfSwgZGlyOiBcImx0clwiIH0sIGgoXCJkaXZcIiwgeyBjbGFzczogQ1NTLmNvbHVtbiwgcm9sZTogXCJncm91cFwiIH0sIGgoXCJzcGFuXCIsIHsgXCJhcmlhLWxhYmVsXCI6IHRoaXMubWVzc2FnZXMuaG91clVwLCBjbGFzczoge1xyXG4gICAgICAgIFtDU1MuYnV0dG9uXTogdHJ1ZSxcclxuICAgICAgICBbQ1NTLmJ1dHRvbkhvdXJVcF06IHRydWUsXHJcbiAgICAgICAgW0NTUy5idXR0b25Ub3BMZWZ0XTogdHJ1ZVxyXG4gICAgICB9LCBvbkNsaWNrOiB0aGlzLmluY3JlbWVudEhvdXIsIG9uS2V5RG93bjogdGhpcy5ob3VyVXBCdXR0b25LZXlEb3duSGFuZGxlciwgcm9sZTogXCJidXR0b25cIiwgdGFiSW5kZXg6IC0xIH0sIGgoXCJjYWxjaXRlLWljb25cIiwgeyBpY29uOiBcImNoZXZyb24tdXBcIiwgc2NhbGU6IGljb25TY2FsZSB9KSksIGgoXCJzcGFuXCIsIHsgXCJhcmlhLWxhYmVsXCI6IHRoaXMubWVzc2FnZXMuaG91ciwgXCJhcmlhLXZhbHVlbWF4XCI6IFwiMjNcIiwgXCJhcmlhLXZhbHVlbWluXCI6IFwiMVwiLCBcImFyaWEtdmFsdWVub3dcIjogKGhvdXJJc051bWJlciAmJiBwYXJzZUludCh0aGlzLmhvdXIpKSB8fCBcIjBcIiwgXCJhcmlhLXZhbHVldGV4dFwiOiB0aGlzLmhvdXIsIGNsYXNzOiB7XHJcbiAgICAgICAgW0NTUy5pbnB1dF06IHRydWUsXHJcbiAgICAgICAgW0NTUy5ob3VyXTogdHJ1ZVxyXG4gICAgICB9LCBvbkZvY3VzOiB0aGlzLmZvY3VzSGFuZGxlciwgb25LZXlEb3duOiB0aGlzLmhvdXJLZXlEb3duSGFuZGxlciwgcmVmOiB0aGlzLnNldEhvdXJFbCwgcm9sZTogXCJzcGluYnV0dG9uXCIsIHRhYkluZGV4OiAwIH0sIHRoaXMubG9jYWxpemVkSG91ciB8fCBcIi0tXCIpLCBoKFwic3BhblwiLCB7IFwiYXJpYS1sYWJlbFwiOiB0aGlzLm1lc3NhZ2VzLmhvdXJEb3duLCBjbGFzczoge1xyXG4gICAgICAgIFtDU1MuYnV0dG9uXTogdHJ1ZSxcclxuICAgICAgICBbQ1NTLmJ1dHRvbkhvdXJEb3duXTogdHJ1ZSxcclxuICAgICAgICBbQ1NTLmJ1dHRvbkJvdHRvbUxlZnRdOiB0cnVlXHJcbiAgICAgIH0sIG9uQ2xpY2s6IHRoaXMuZGVjcmVtZW50SG91ciwgb25LZXlEb3duOiB0aGlzLmhvdXJEb3duQnV0dG9uS2V5RG93bkhhbmRsZXIsIHJvbGU6IFwiYnV0dG9uXCIsIHRhYkluZGV4OiAtMSB9LCBoKFwiY2FsY2l0ZS1pY29uXCIsIHsgaWNvbjogXCJjaGV2cm9uLWRvd25cIiwgc2NhbGU6IGljb25TY2FsZSB9KSkpLCBoKFwic3BhblwiLCB7IGNsYXNzOiBDU1MuZGVsaW1pdGVyIH0sIHRoaXMubG9jYWxpemVkSG91clN1ZmZpeCksIGgoXCJkaXZcIiwgeyBjbGFzczogQ1NTLmNvbHVtbiwgcm9sZTogXCJncm91cFwiIH0sIGgoXCJzcGFuXCIsIHsgXCJhcmlhLWxhYmVsXCI6IHRoaXMubWVzc2FnZXMubWludXRlVXAsIGNsYXNzOiB7XHJcbiAgICAgICAgW0NTUy5idXR0b25dOiB0cnVlLFxyXG4gICAgICAgIFtDU1MuYnV0dG9uTWludXRlVXBdOiB0cnVlXHJcbiAgICAgIH0sIG9uQ2xpY2s6IHRoaXMuaW5jcmVtZW50TWludXRlLCBvbktleURvd246IHRoaXMubWludXRlVXBCdXR0b25LZXlEb3duSGFuZGxlciwgcm9sZTogXCJidXR0b25cIiwgdGFiSW5kZXg6IC0xIH0sIGgoXCJjYWxjaXRlLWljb25cIiwgeyBpY29uOiBcImNoZXZyb24tdXBcIiwgc2NhbGU6IGljb25TY2FsZSB9KSksIGgoXCJzcGFuXCIsIHsgXCJhcmlhLWxhYmVsXCI6IHRoaXMubWVzc2FnZXMubWludXRlLCBcImFyaWEtdmFsdWVtYXhcIjogXCIxMlwiLCBcImFyaWEtdmFsdWVtaW5cIjogXCIxXCIsIFwiYXJpYS12YWx1ZW5vd1wiOiAobWludXRlSXNOdW1iZXIgJiYgcGFyc2VJbnQodGhpcy5taW51dGUpKSB8fCBcIjBcIiwgXCJhcmlhLXZhbHVldGV4dFwiOiB0aGlzLm1pbnV0ZSwgY2xhc3M6IHtcclxuICAgICAgICBbQ1NTLmlucHV0XTogdHJ1ZSxcclxuICAgICAgICBbQ1NTLm1pbnV0ZV06IHRydWVcclxuICAgICAgfSwgb25Gb2N1czogdGhpcy5mb2N1c0hhbmRsZXIsIG9uS2V5RG93bjogdGhpcy5taW51dGVLZXlEb3duSGFuZGxlciwgcmVmOiB0aGlzLnNldE1pbnV0ZUVsLCByb2xlOiBcInNwaW5idXR0b25cIiwgdGFiSW5kZXg6IDAgfSwgdGhpcy5sb2NhbGl6ZWRNaW51dGUgfHwgXCItLVwiKSwgaChcInNwYW5cIiwgeyBcImFyaWEtbGFiZWxcIjogdGhpcy5tZXNzYWdlcy5taW51dGVEb3duLCBjbGFzczoge1xyXG4gICAgICAgIFtDU1MuYnV0dG9uXTogdHJ1ZSxcclxuICAgICAgICBbQ1NTLmJ1dHRvbk1pbnV0ZURvd25dOiB0cnVlXHJcbiAgICAgIH0sIG9uQ2xpY2s6IHRoaXMuZGVjcmVtZW50TWludXRlLCBvbktleURvd246IHRoaXMubWludXRlRG93bkJ1dHRvbktleURvd25IYW5kbGVyLCByb2xlOiBcImJ1dHRvblwiLCB0YWJJbmRleDogLTEgfSwgaChcImNhbGNpdGUtaWNvblwiLCB7IGljb246IFwiY2hldnJvbi1kb3duXCIsIHNjYWxlOiBpY29uU2NhbGUgfSkpKSwgdGhpcy5zaG93U2Vjb25kICYmIGgoXCJzcGFuXCIsIHsgY2xhc3M6IENTUy5kZWxpbWl0ZXIgfSwgdGhpcy5sb2NhbGl6ZWRNaW51dGVTdWZmaXgpLCB0aGlzLnNob3dTZWNvbmQgJiYgKGgoXCJkaXZcIiwgeyBjbGFzczogQ1NTLmNvbHVtbiwgcm9sZTogXCJncm91cFwiIH0sIGgoXCJzcGFuXCIsIHsgXCJhcmlhLWxhYmVsXCI6IHRoaXMubWVzc2FnZXMuc2Vjb25kVXAsIGNsYXNzOiB7XHJcbiAgICAgICAgW0NTUy5idXR0b25dOiB0cnVlLFxyXG4gICAgICAgIFtDU1MuYnV0dG9uU2Vjb25kVXBdOiB0cnVlXHJcbiAgICAgIH0sIG9uQ2xpY2s6IHRoaXMuaW5jcmVtZW50U2Vjb25kLCBvbktleURvd246IHRoaXMuc2Vjb25kVXBCdXR0b25LZXlEb3duSGFuZGxlciwgcm9sZTogXCJidXR0b25cIiwgdGFiSW5kZXg6IC0xIH0sIGgoXCJjYWxjaXRlLWljb25cIiwgeyBpY29uOiBcImNoZXZyb24tdXBcIiwgc2NhbGU6IGljb25TY2FsZSB9KSksIGgoXCJzcGFuXCIsIHsgXCJhcmlhLWxhYmVsXCI6IHRoaXMubWVzc2FnZXMuc2Vjb25kLCBcImFyaWEtdmFsdWVtYXhcIjogXCI1OVwiLCBcImFyaWEtdmFsdWVtaW5cIjogXCIwXCIsIFwiYXJpYS12YWx1ZW5vd1wiOiAoc2Vjb25kSXNOdW1iZXIgJiYgcGFyc2VJbnQodGhpcy5zZWNvbmQpKSB8fCBcIjBcIiwgXCJhcmlhLXZhbHVldGV4dFwiOiB0aGlzLnNlY29uZCwgY2xhc3M6IHtcclxuICAgICAgICBbQ1NTLmlucHV0XTogdHJ1ZSxcclxuICAgICAgICBbQ1NTLnNlY29uZF06IHRydWVcclxuICAgICAgfSwgb25Gb2N1czogdGhpcy5mb2N1c0hhbmRsZXIsIG9uS2V5RG93bjogdGhpcy5zZWNvbmRLZXlEb3duSGFuZGxlciwgcmVmOiB0aGlzLnNldFNlY29uZEVsLCByb2xlOiBcInNwaW5idXR0b25cIiwgdGFiSW5kZXg6IDAgfSwgdGhpcy5sb2NhbGl6ZWRTZWNvbmQgfHwgXCItLVwiKSwgaChcInNwYW5cIiwgeyBcImFyaWEtbGFiZWxcIjogdGhpcy5tZXNzYWdlcy5zZWNvbmREb3duLCBjbGFzczoge1xyXG4gICAgICAgIFtDU1MuYnV0dG9uXTogdHJ1ZSxcclxuICAgICAgICBbQ1NTLmJ1dHRvblNlY29uZERvd25dOiB0cnVlXHJcbiAgICAgIH0sIG9uQ2xpY2s6IHRoaXMuZGVjcmVtZW50U2Vjb25kLCBvbktleURvd246IHRoaXMuc2Vjb25kRG93bkJ1dHRvbktleURvd25IYW5kbGVyLCByb2xlOiBcImJ1dHRvblwiLCB0YWJJbmRleDogLTEgfSwgaChcImNhbGNpdGUtaWNvblwiLCB7IGljb246IFwiY2hldnJvbi1kb3duXCIsIHNjYWxlOiBpY29uU2NhbGUgfSkpKSksIHRoaXMubG9jYWxpemVkU2Vjb25kU3VmZml4ICYmIChoKFwic3BhblwiLCB7IGNsYXNzOiBDU1MuZGVsaW1pdGVyIH0sIHRoaXMubG9jYWxpemVkU2Vjb25kU3VmZml4KSksIHNob3dNZXJpZGllbSAmJiAoaChcImRpdlwiLCB7IGNsYXNzOiB7XHJcbiAgICAgICAgW0NTUy5jb2x1bW5dOiB0cnVlLFxyXG4gICAgICAgIFtDU1MubWVyaWRpZW1TdGFydF06IHRoaXMubWVyaWRpZW1PcmRlciA9PT0gMFxyXG4gICAgICB9LCByb2xlOiBcImdyb3VwXCIgfSwgaChcInNwYW5cIiwgeyBcImFyaWEtbGFiZWxcIjogdGhpcy5tZXNzYWdlcy5tZXJpZGllbVVwLCBjbGFzczoge1xyXG4gICAgICAgIFtDU1MuYnV0dG9uXTogdHJ1ZSxcclxuICAgICAgICBbQ1NTLmJ1dHRvbk1lcmlkaWVtVXBdOiB0cnVlLFxyXG4gICAgICAgIFtDU1MuYnV0dG9uVG9wUmlnaHRdOiB0cnVlXHJcbiAgICAgIH0sIG9uQ2xpY2s6IHRoaXMuaW5jcmVtZW50TWVyaWRpZW0sIG9uS2V5RG93bjogdGhpcy5tZXJpZGllbVVwQnV0dG9uS2V5RG93bkhhbmRsZXIsIHJvbGU6IFwiYnV0dG9uXCIsIHRhYkluZGV4OiAtMSB9LCBoKFwiY2FsY2l0ZS1pY29uXCIsIHsgaWNvbjogXCJjaGV2cm9uLXVwXCIsIHNjYWxlOiBpY29uU2NhbGUgfSkpLCBoKFwic3BhblwiLCB7IFwiYXJpYS1sYWJlbFwiOiB0aGlzLm1lc3NhZ2VzLm1lcmlkaWVtLCBcImFyaWEtdmFsdWVtYXhcIjogXCIyXCIsIFwiYXJpYS12YWx1ZW1pblwiOiBcIjFcIiwgXCJhcmlhLXZhbHVlbm93XCI6ICh0aGlzLm1lcmlkaWVtID09PSBcIlBNXCIgJiYgXCIyXCIpIHx8IFwiMVwiLCBcImFyaWEtdmFsdWV0ZXh0XCI6IHRoaXMubWVyaWRpZW0sIGNsYXNzOiB7XHJcbiAgICAgICAgW0NTUy5pbnB1dF06IHRydWUsXHJcbiAgICAgICAgW0NTUy5tZXJpZGllbV06IHRydWVcclxuICAgICAgfSwgb25Gb2N1czogdGhpcy5mb2N1c0hhbmRsZXIsIG9uS2V5RG93bjogdGhpcy5tZXJpZGllbUtleURvd25IYW5kbGVyLCByZWY6IHRoaXMuc2V0TWVyaWRpZW1FbCwgcm9sZTogXCJzcGluYnV0dG9uXCIsIHRhYkluZGV4OiAwIH0sIHRoaXMubG9jYWxpemVkTWVyaWRpZW0gfHwgXCItLVwiKSwgaChcInNwYW5cIiwgeyBcImFyaWEtbGFiZWxcIjogdGhpcy5tZXNzYWdlcy5tZXJpZGllbURvd24sIGNsYXNzOiB7XHJcbiAgICAgICAgW0NTUy5idXR0b25dOiB0cnVlLFxyXG4gICAgICAgIFtDU1MuYnV0dG9uTWVyaWRpZW1Eb3duXTogdHJ1ZSxcclxuICAgICAgICBbQ1NTLmJ1dHRvbkJvdHRvbVJpZ2h0XTogdHJ1ZVxyXG4gICAgICB9LCBvbkNsaWNrOiB0aGlzLmRlY3JlbWVudE1lcmlkaWVtLCBvbktleURvd246IHRoaXMubWVyaWRpZW1Eb3duQnV0dG9uS2V5RG93bkhhbmRsZXIsIHJvbGU6IFwiYnV0dG9uXCIsIHRhYkluZGV4OiAtMSB9LCBoKFwiY2FsY2l0ZS1pY29uXCIsIHsgaWNvbjogXCJjaGV2cm9uLWRvd25cIiwgc2NhbGU6IGljb25TY2FsZSB9KSkpKSkpO1xyXG4gIH1cclxuICBzdGF0aWMgZ2V0IGRlbGVnYXRlc0ZvY3VzKCkgeyByZXR1cm4gdHJ1ZTsgfVxyXG4gIHN0YXRpYyBnZXQgYXNzZXRzRGlycygpIHsgcmV0dXJuIFtcImFzc2V0c1wiXTsgfVxyXG4gIGdldCBlbCgpIHsgcmV0dXJuIGdldEVsZW1lbnQodGhpcyk7IH1cclxuICBzdGF0aWMgZ2V0IHdhdGNoZXJzKCkgeyByZXR1cm4ge1xyXG4gICAgXCJ2YWx1ZVwiOiBbXCJ2YWx1ZVdhdGNoZXJcIl0sXHJcbiAgICBcIm1lc3NhZ2VPdmVycmlkZXNcIjogW1wib25NZXNzYWdlc0NoYW5nZVwiXSxcclxuICAgIFwiZWZmZWN0aXZlTG9jYWxlXCI6IFtcImVmZmVjdGl2ZUxvY2FsZVdhdGNoZXJcIl1cclxuICB9OyB9XHJcbn07XHJcblRpbWVQaWNrZXIuc3R5bGUgPSB0aW1lUGlja2VyQ3NzO1xuXG5leHBvcnQgeyBUaW1lUGlja2VyIGFzIGNhbGNpdGVfdGltZV9waWNrZXIgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2FsY2l0ZS10aW1lLXBpY2tlci5lbnRyeS5qcy5tYXAiLCIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1jb21wb25lbnRzL2Jsb2IvbWFzdGVyL0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG4gKiB2MS4wLjVcbiAqL1xuY29uc3QgcmVzb2x2ZU1hcCA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCBwcm9taXNlTWFwID0gbmV3IFdlYWtNYXAoKTtcbi8qKlxuICogVGhpcyBoZWxwZXIgdXRpbCBzZXRzIHVwIHRoZSBjb21wb25lbnQgZm9yIHRoZSBhYmlsaXR5IHRvIGtub3cgd2hlbiB0aGUgY29tcG9uZW50IGhhcyBiZWVuIGxvYWRlZC5cbiAqXG4gKiBUaGlzIHNob3VsZCBiZSB1c2VkIGluIHRoZSBgY29tcG9uZW50V2lsbExvYWRgIGxpZmVjeWNsZSBob29rLlxuICpcbiAqIGBgYFxuICogY29tcG9uZW50V2lsbExvYWQoKTogdm9pZCB7XG4gKiAgIHNldFVwTG9hZGFibGVDb21wb25lbnQodGhpcyk7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gY29tcG9uZW50XG4gKi9cbmZ1bmN0aW9uIHNldFVwTG9hZGFibGVDb21wb25lbnQoY29tcG9uZW50KSB7XG4gIHByb21pc2VNYXAuc2V0KGNvbXBvbmVudCwgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHJlc29sdmVNYXAuc2V0KGNvbXBvbmVudCwgcmVzb2x2ZSkpKTtcbn1cbi8qKlxuICogVGhpcyBoZWxwZXIgdXRpbCBsZXRzIHRoZSBsb2FkYWJsZSBjb21wb25lbnQga25vdyB0aGF0IGl0IGlzIG5vdyBsb2FkZWQuXG4gKlxuICogVGhpcyBzaG91bGQgYmUgdXNlZCBpbiB0aGUgYGNvbXBvbmVudERpZExvYWRgIGxpZmVjeWNsZSBob29rLlxuICpcbiAqIGBgYFxuICogY29tcG9uZW50RGlkTG9hZCgpOiB2b2lkIHtcbiAqICAgc2V0Q29tcG9uZW50TG9hZGVkKHRoaXMpO1xuICogfVxuICogYGBgXG4gKlxuICogQHBhcmFtIGNvbXBvbmVudFxuICovXG5mdW5jdGlvbiBzZXRDb21wb25lbnRMb2FkZWQoY29tcG9uZW50KSB7XG4gIHJlc29sdmVNYXAuZ2V0KGNvbXBvbmVudCkoKTtcbn1cbi8qKlxuICogVGhpcyBoZWxwZXIgdXRpbCBjYW4gYmUgdXNlZCB0byBlbnN1cmUgYSBjb21wb25lbnQgaGFzIGJlZW4gbG9hZGVkIChUaGUgXCJjb21wb25lbnREaWRMb2FkXCIgc3RlbmNpbCBsaWZlY3ljbGUgbWV0aG9kIGhhcyBiZWVuIGNhbGxlZCkuXG4gKlxuICogUmVxdWlyZXMgXCJzZXRVcExvYWRhYmxlQ29tcG9uZW50XCIgYW5kIFwic2V0Q29tcG9uZW50TG9hZGVkXCIgdG8gYmUgY2FsbGVkIGZpcnN0LlxuICpcbiAqIEEgY29tcG9uZW50IGRldmVsb3BlciBjYW4gYXdhaXQgdGhpcyBtZXRob2QgYmVmb3JlIHByb2NlZWRpbmcgd2l0aCBhbnkgbG9naWMgdGhhdCByZXF1aXJlcyBhIGNvbXBvbmVudCB0byBiZSBsb2FkZWQgZmlyc3QuXG4gKlxuICogYGBgXG4gKiBhc3luYyBzZXRGb2N1cygpOiBQcm9taXNlPHZvaWQ+IHtcbiAqICAgYXdhaXQgY29tcG9uZW50TG9hZGVkKHRoaXMpO1xuICogfVxuICogYGBgXG4gKlxuICogQHBhcmFtIGNvbXBvbmVudFxuICogQHJldHVybnMgUHJvbWlzZTx2b2lkPlxuICovXG5mdW5jdGlvbiBjb21wb25lbnRMb2FkZWQoY29tcG9uZW50KSB7XG4gIHJldHVybiBwcm9taXNlTWFwLmdldChjb21wb25lbnQpO1xufVxuXG5leHBvcnQgeyBzZXRVcExvYWRhYmxlQ29tcG9uZW50IGFzIGEsIGNvbXBvbmVudExvYWRlZCBhcyBjLCBzZXRDb21wb25lbnRMb2FkZWQgYXMgcyB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1sb2FkYWJsZS1jYzE0ZDcyOC5qcy5tYXAiLCJpbXBvcnQgeyBhIGFzIGdldEFzc2V0UGF0aCB9IGZyb20gJy4vaW5kZXgtNGU2NDc0MTEuanMnO1xuaW1wb3J0IHsgZyBhcyBnZXRTdXBwb3J0ZWRMb2NhbGUgfSBmcm9tICcuL2xvY2FsZS1mN2IyZmJiMC5qcyc7XG5cbi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvYmxvYi9tYXN0ZXIvTElDRU5TRS5tZCBmb3IgZGV0YWlscy5cbiAqIHYxLjAuNVxuICovXG5jb25zdCBjb21wb25lbnRMYW5nVG9NZXNzYWdlQnVuZGxlQ2FjaGUgPSB7fTtcbmFzeW5jIGZ1bmN0aW9uIGdldE1lc3NhZ2VCdW5kbGUobGFuZywgY29tcG9uZW50KSB7XG4gIGNvbnN0IGtleSA9IGAke2NvbXBvbmVudH1fJHtsYW5nfWA7XG4gIGlmIChjb21wb25lbnRMYW5nVG9NZXNzYWdlQnVuZGxlQ2FjaGVba2V5XSkge1xuICAgIHJldHVybiBjb21wb25lbnRMYW5nVG9NZXNzYWdlQnVuZGxlQ2FjaGVba2V5XTtcbiAgfVxuICBjb21wb25lbnRMYW5nVG9NZXNzYWdlQnVuZGxlQ2FjaGVba2V5XSA9IGZldGNoKGdldEFzc2V0UGF0aChgLi9hc3NldHMvJHtjb21wb25lbnR9L3Q5bi9tZXNzYWdlc18ke2xhbmd9Lmpzb25gKSlcbiAgICAudGhlbigocmVzcCkgPT4ge1xuICAgIGlmICghcmVzcC5vaykge1xuICAgICAgdGhyb3dNZXNzYWdlRmV0Y2hFcnJvcigpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzcC5qc29uKCk7XG4gIH0pXG4gICAgLmNhdGNoKCgpID0+IHRocm93TWVzc2FnZUZldGNoRXJyb3IoKSk7XG4gIHJldHVybiBjb21wb25lbnRMYW5nVG9NZXNzYWdlQnVuZGxlQ2FjaGVba2V5XTtcbn1cbmZ1bmN0aW9uIHRocm93TWVzc2FnZUZldGNoRXJyb3IoKSB7XG4gIHRocm93IG5ldyBFcnJvcihcImNvdWxkIG5vdCBmZXRjaCBjb21wb25lbnQgbWVzc2FnZSBidW5kbGVcIik7XG59XG5mdW5jdGlvbiBtZXJnZU1lc3NhZ2VzKGNvbXBvbmVudCkge1xuICBjb21wb25lbnQubWVzc2FnZXMgPSB7XG4gICAgLi4uY29tcG9uZW50LmRlZmF1bHRNZXNzYWdlcyxcbiAgICAuLi5jb21wb25lbnQubWVzc2FnZU92ZXJyaWRlc1xuICB9O1xufVxuLyoqXG4gKiBUaGlzIHV0aWxpdHkgc2V0cyB1cCB0aGUgbWVzc2FnZXMgdXNlZCBieSB0aGUgY29tcG9uZW50LiBJdCBzaG91bGQgYmUgYXdhaXRlZCBpbiB0aGUgYGNvbXBvbmVudFdpbGxMb2FkYCBsaWZlY3ljbGUgaG9vay5cbiAqXG4gKiBAcGFyYW0gY29tcG9uZW50XG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHNldFVwTWVzc2FnZXMoY29tcG9uZW50KSB7XG4gIGNvbXBvbmVudC5kZWZhdWx0TWVzc2FnZXMgPSBhd2FpdCBmZXRjaE1lc3NhZ2VzKGNvbXBvbmVudCwgY29tcG9uZW50LmVmZmVjdGl2ZUxvY2FsZSk7XG4gIG1lcmdlTWVzc2FnZXMoY29tcG9uZW50KTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGZldGNoTWVzc2FnZXMoY29tcG9uZW50LCBsYW5nKSB7XG4gIGNvbnN0IHsgZWwgfSA9IGNvbXBvbmVudDtcbiAgY29uc3QgdGFnID0gZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuICBjb25zdCBjb21wb25lbnROYW1lID0gdGFnLnJlcGxhY2UoXCJjYWxjaXRlLVwiLCBcIlwiKTtcbiAgcmV0dXJuIGdldE1lc3NhZ2VCdW5kbGUoZ2V0U3VwcG9ydGVkTG9jYWxlKGxhbmcsIFwidDluXCIpLCBjb21wb25lbnROYW1lKTtcbn1cbi8qKlxuICogVGhpcyB1dGlsaXR5IG11c3QgYmUgc2V0IHVwIGZvciB0aGUgY29tcG9uZW50IHRvIHVwZGF0ZSBpdHMgZGVmYXVsdCBtZXNzYWdlIGJ1bmRsZSBpZiB0aGUgbG9jYWxlIGNoYW5nZXMuXG4gKlxuICogSXQgY2FuIGJlIHNldCB1cCBpbiAqKmVpdGhlcioqIG9mIHRoZSBmb2xsb3dpbmcgd2F5czpcbiAqXG4gKiAxLiBjYWxsZWQgZnJvbSBgTG9jYWxpemVkQ29tcG9uZW50YCdzIGBvbkxvY2FsZUNoYW5nZWAgbWV0aG9kIG9yXG4gKiAyLiBjYWxsZWQgZnJvbSBhIHdhdGNoZXIgY29uZmlndXJlZCB0byB3YXRjaCBgTG9jYWxpemVkQ29tcG9uZW50YCdzIGBlZmZlY3RpdmVMb2NhbGVgIHByb3BcbiAqXG4gKiBAcGFyYW0gY29tcG9uZW50XG4gKiBAcGFyYW0gbGFuZ1xuICovXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVNZXNzYWdlcyhjb21wb25lbnQsIGxhbmcpIHtcbiAgY29tcG9uZW50LmRlZmF1bHRNZXNzYWdlcyA9IGF3YWl0IGZldGNoTWVzc2FnZXMoY29tcG9uZW50LCBsYW5nKTtcbiAgbWVyZ2VNZXNzYWdlcyhjb21wb25lbnQpO1xufVxuLyoqXG4gKiBUaGlzIHV0aWxpdHkgc2V0cyB1cCBpbnRlcm5hbHMgZm9yIG1lc3NhZ2VzIHN1cHBvcnQuXG4gKlxuICogSXQgbmVlZHMgdG8gYmUgY2FsbGVkIGluIGBjb25uZWN0ZWRDYWxsYmFja2BcbiAqXG4gKiAqKk5vdGUqKjogdGhpcyBtdXN0IGJlIGNhbGxlZCBhZnRlciBgTG9jYWxpemVkQ29tcG9uZW50YCdzIGBjb25uZWN0TG9jYWxpemVkYCBtZXRob2QuXG4gKlxuICogQHBhcmFtIGNvbXBvbmVudFxuICovXG5mdW5jdGlvbiBjb25uZWN0TWVzc2FnZXMoY29tcG9uZW50KSB7XG4gIGNvbXBvbmVudC5vbk1lc3NhZ2VzQ2hhbmdlID0gZGVmYXVsdE9uTWVzc2FnZXNDaGFuZ2U7XG59XG4vKipcbiAqIFRoaXMgdXRpbGl0eSB0ZWFycyBkb3duIGludGVybmFscyBmb3IgbWVzc2FnZXMgc3VwcG9ydC5cbiAqXG4gKiBJdCBuZWVkcyB0byBiZSBjYWxsZWQgaW4gYGRpc2Nvbm5lY3RlZENhbGxiYWNrYFxuICpcbiAqIEBwYXJhbSBjb21wb25lbnRcbiAqL1xuZnVuY3Rpb24gZGlzY29ubmVjdE1lc3NhZ2VzKGNvbXBvbmVudCkge1xuICBjb21wb25lbnQub25NZXNzYWdlc0NoYW5nZSA9IHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRPbk1lc3NhZ2VzQ2hhbmdlKCkge1xuICBtZXJnZU1lc3NhZ2VzKHRoaXMpO1xufVxuXG5leHBvcnQgeyBjb25uZWN0TWVzc2FnZXMgYXMgYywgZGlzY29ubmVjdE1lc3NhZ2VzIGFzIGQsIHNldFVwTWVzc2FnZXMgYXMgcywgdXBkYXRlTWVzc2FnZXMgYXMgdSB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD10OW4tZGM2N2FiOTYuanMubWFwIiwiaW1wb3J0IHsgaSBhcyBpc1ZhbGlkTnVtYmVyLCBnIGFzIGdldFN1cHBvcnRlZExvY2FsZSwgYSBhcyBnZXRTdXBwb3J0ZWROdW1iZXJpbmdTeXN0ZW0gfSBmcm9tICcuL2xvY2FsZS1mN2IyZmJiMC5qcyc7XG5cbi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvYmxvYi9tYXN0ZXIvTElDRU5TRS5tZCBmb3IgZGV0YWlscy5cbiAqIHYxLjAuNVxuICovXG5jb25zdCBtYXhUZW50aEZvck1pbnV0ZUFuZFNlY29uZCA9IDU7XG5mdW5jdGlvbiBjcmVhdGVMb2NhbGVEYXRlVGltZUZvcm1hdHRlcihsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSwgaW5jbHVkZVNlY29uZHMgPSB0cnVlKSB7XG4gIHRyeSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgIGhvdXI6IFwiMi1kaWdpdFwiLFxuICAgICAgbWludXRlOiBcIjItZGlnaXRcIixcbiAgICAgIHRpbWVab25lOiBcIlVUQ1wiLFxuICAgICAgbnVtYmVyaW5nU3lzdGVtOiBnZXRTdXBwb3J0ZWROdW1iZXJpbmdTeXN0ZW0obnVtYmVyaW5nU3lzdGVtKVxuICAgIH07XG4gICAgaWYgKGluY2x1ZGVTZWNvbmRzKSB7XG4gICAgICBvcHRpb25zLnNlY29uZCA9IFwiMi1kaWdpdFwiO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoZ2V0U3VwcG9ydGVkTG9jYWxlKGxvY2FsZSksIG9wdGlvbnMpO1xuICB9XG4gIGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBsb2NhbGUgc3VwcGxpZWQgd2hpbGUgYXR0ZW1wdGluZyB0byBjcmVhdGUgYSBEYXRlVGltZSBmb3JtYXR0ZXI6ICR7bG9jYWxlfWApO1xuICB9XG59XG5mdW5jdGlvbiBmb3JtYXRUaW1lUGFydChudW1iZXIpIHtcbiAgY29uc3QgbnVtYmVyQXNTdHJpbmcgPSBudW1iZXIudG9TdHJpbmcoKTtcbiAgcmV0dXJuIG51bWJlciA+PSAwICYmIG51bWJlciA8PSA5ID8gbnVtYmVyQXNTdHJpbmcucGFkU3RhcnQoMiwgXCIwXCIpIDogbnVtYmVyQXNTdHJpbmc7XG59XG5mdW5jdGlvbiBmb3JtYXRUaW1lU3RyaW5nKHZhbHVlKSB7XG4gIGlmICghaXNWYWxpZFRpbWUodmFsdWUpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3QgW2hvdXJTdHJpbmcsIG1pbnV0ZVN0cmluZywgc2Vjb25kU3RyaW5nXSA9IHZhbHVlLnNwbGl0KFwiOlwiKTtcbiAgY29uc3QgaG91ciA9IGZvcm1hdFRpbWVQYXJ0KHBhcnNlSW50KGhvdXJTdHJpbmcpKTtcbiAgY29uc3QgbWludXRlID0gZm9ybWF0VGltZVBhcnQocGFyc2VJbnQobWludXRlU3RyaW5nKSk7XG4gIGlmIChzZWNvbmRTdHJpbmcpIHtcbiAgICBjb25zdCBzZWNvbmQgPSBmb3JtYXRUaW1lUGFydChwYXJzZUludChzZWNvbmRTdHJpbmcpKTtcbiAgICByZXR1cm4gYCR7aG91cn06JHttaW51dGV9OiR7c2Vjb25kfWA7XG4gIH1cbiAgcmV0dXJuIGAke2hvdXJ9OiR7bWludXRlfWA7XG59XG5mdW5jdGlvbiBnZXRMb2NhbGVIb3VyQ3ljbGUobG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0pIHtcbiAgY29uc3QgZm9ybWF0dGVyID0gY3JlYXRlTG9jYWxlRGF0ZVRpbWVGb3JtYXR0ZXIobG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0pO1xuICBjb25zdCBwYXJ0cyA9IGZvcm1hdHRlci5mb3JtYXRUb1BhcnRzKG5ldyBEYXRlKERhdGUuVVRDKDAsIDAsIDAsIDAsIDAsIDApKSk7XG4gIHJldHVybiBnZXRMb2NhbGl6ZWRUaW1lUGFydChcIm1lcmlkaWVtXCIsIHBhcnRzKSA/IFwiMTJcIiA6IFwiMjRcIjtcbn1cbmZ1bmN0aW9uIGdldExvY2FsaXplZFRpbWVQYXJ0KHBhcnQsIHBhcnRzKSB7XG4gIGlmICghcGFydCB8fCAhcGFydHMpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBpZiAocGFydCA9PT0gXCJob3VyU3VmZml4XCIpIHtcbiAgICBjb25zdCBob3VySW5kZXggPSBwYXJ0cy5pbmRleE9mKHBhcnRzLmZpbmQoKHsgdHlwZSB9KSA9PiB0eXBlID09PSBcImhvdXJcIikpO1xuICAgIGNvbnN0IG1pbnV0ZUluZGV4ID0gcGFydHMuaW5kZXhPZihwYXJ0cy5maW5kKCh7IHR5cGUgfSkgPT4gdHlwZSA9PT0gXCJtaW51dGVcIikpO1xuICAgIGNvbnN0IGhvdXJTdWZmaXggPSBwYXJ0c1tob3VySW5kZXggKyAxXTtcbiAgICByZXR1cm4gaG91clN1ZmZpeCAmJiBob3VyU3VmZml4LnR5cGUgPT09IFwibGl0ZXJhbFwiICYmIG1pbnV0ZUluZGV4IC0gaG91ckluZGV4ID09PSAyXG4gICAgICA/IGhvdXJTdWZmaXgudmFsdWU/LnRyaW0oKSB8fCBudWxsXG4gICAgICA6IG51bGw7XG4gIH1cbiAgaWYgKHBhcnQgPT09IFwibWludXRlU3VmZml4XCIpIHtcbiAgICBjb25zdCBtaW51dGVJbmRleCA9IHBhcnRzLmluZGV4T2YocGFydHMuZmluZCgoeyB0eXBlIH0pID0+IHR5cGUgPT09IFwibWludXRlXCIpKTtcbiAgICBjb25zdCBzZWNvbmRJbmRleCA9IHBhcnRzLmluZGV4T2YocGFydHMuZmluZCgoeyB0eXBlIH0pID0+IHR5cGUgPT09IFwic2Vjb25kXCIpKTtcbiAgICBjb25zdCBtaW51dGVTdWZmaXggPSBwYXJ0c1ttaW51dGVJbmRleCArIDFdO1xuICAgIHJldHVybiBtaW51dGVTdWZmaXggJiYgbWludXRlU3VmZml4LnR5cGUgPT09IFwibGl0ZXJhbFwiICYmIHNlY29uZEluZGV4IC0gbWludXRlSW5kZXggPT09IDJcbiAgICAgID8gbWludXRlU3VmZml4LnZhbHVlPy50cmltKCkgfHwgbnVsbFxuICAgICAgOiBudWxsO1xuICB9XG4gIGlmIChwYXJ0ID09PSBcInNlY29uZFN1ZmZpeFwiKSB7XG4gICAgY29uc3Qgc2Vjb25kSW5kZXggPSBwYXJ0cy5pbmRleE9mKHBhcnRzLmZpbmQoKHsgdHlwZSB9KSA9PiB0eXBlID09PSBcInNlY29uZFwiKSk7XG4gICAgY29uc3Qgc2Vjb25kU3VmZml4ID0gcGFydHNbc2Vjb25kSW5kZXggKyAxXTtcbiAgICByZXR1cm4gc2Vjb25kU3VmZml4ICYmIHNlY29uZFN1ZmZpeC50eXBlID09PSBcImxpdGVyYWxcIiA/IHNlY29uZFN1ZmZpeC52YWx1ZT8udHJpbSgpIHx8IG51bGwgOiBudWxsO1xuICB9XG4gIHJldHVybiBwYXJ0cy5maW5kKCh7IHR5cGUgfSkgPT4gKHBhcnQgPT0gXCJtZXJpZGllbVwiID8gdHlwZSA9PT0gXCJkYXlQZXJpb2RcIiA6IHR5cGUgPT09IHBhcnQpKT8udmFsdWUgfHwgbnVsbDtcbn1cbmZ1bmN0aW9uIGdldE1lcmlkaWVtKGhvdXIpIHtcbiAgaWYgKCFpc1ZhbGlkTnVtYmVyKGhvdXIpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3QgaG91ckFzTnVtYmVyID0gcGFyc2VJbnQoaG91cik7XG4gIHJldHVybiBob3VyQXNOdW1iZXIgPj0gMCAmJiBob3VyQXNOdW1iZXIgPD0gMTEgPyBcIkFNXCIgOiBcIlBNXCI7XG59XG5mdW5jdGlvbiBpc1ZhbGlkVGltZSh2YWx1ZSkge1xuICBpZiAoIXZhbHVlIHx8IHZhbHVlLnN0YXJ0c1dpdGgoXCI6XCIpIHx8IHZhbHVlLmVuZHNXaXRoKFwiOlwiKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBjb25zdCBzcGxpdFZhbHVlID0gdmFsdWUuc3BsaXQoXCI6XCIpO1xuICBjb25zdCB2YWxpZExlbmd0aCA9IHNwbGl0VmFsdWUubGVuZ3RoID4gMSAmJiBzcGxpdFZhbHVlLmxlbmd0aCA8IDQ7XG4gIGlmICghdmFsaWRMZW5ndGgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgY29uc3QgW2hvdXIsIG1pbnV0ZSwgc2Vjb25kXSA9IHNwbGl0VmFsdWU7XG4gIGNvbnN0IGhvdXJBc051bWJlciA9IHBhcnNlSW50KHNwbGl0VmFsdWVbMF0pO1xuICBjb25zdCBtaW51dGVBc051bWJlciA9IHBhcnNlSW50KHNwbGl0VmFsdWVbMV0pO1xuICBjb25zdCBzZWNvbmRBc051bWJlciA9IHBhcnNlSW50KHNwbGl0VmFsdWVbMl0pO1xuICBjb25zdCBob3VyVmFsaWQgPSBpc1ZhbGlkTnVtYmVyKGhvdXIpICYmIGhvdXJBc051bWJlciA+PSAwICYmIGhvdXJBc051bWJlciA8IDI0O1xuICBjb25zdCBtaW51dGVWYWxpZCA9IGlzVmFsaWROdW1iZXIobWludXRlKSAmJiBtaW51dGVBc051bWJlciA+PSAwICYmIG1pbnV0ZUFzTnVtYmVyIDwgNjA7XG4gIGNvbnN0IHNlY29uZFZhbGlkID0gaXNWYWxpZE51bWJlcihzZWNvbmQpICYmIHNlY29uZEFzTnVtYmVyID49IDAgJiYgc2Vjb25kQXNOdW1iZXIgPCA2MDtcbiAgaWYgKChob3VyVmFsaWQgJiYgbWludXRlVmFsaWQgJiYgIXNlY29uZCkgfHwgKGhvdXJWYWxpZCAmJiBtaW51dGVWYWxpZCAmJiBzZWNvbmRWYWxpZCkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufVxuZnVuY3Rpb24gaXNWYWxpZFRpbWVQYXJ0KHZhbHVlLCBwYXJ0KSB7XG4gIGlmIChwYXJ0ID09PSBcIm1lcmlkaWVtXCIpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IFwiQU1cIiB8fCB2YWx1ZSA9PT0gXCJQTVwiO1xuICB9XG4gIGlmICghaXNWYWxpZE51bWJlcih2YWx1ZSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgY29uc3QgdmFsdWVBc051bWJlciA9IE51bWJlcih2YWx1ZSk7XG4gIHJldHVybiBwYXJ0ID09PSBcImhvdXJcIiA/IHZhbHVlQXNOdW1iZXIgPj0gMCAmJiB2YWx1ZUFzTnVtYmVyIDwgMjQgOiB2YWx1ZUFzTnVtYmVyID49IDAgJiYgdmFsdWVBc051bWJlciA8IDYwO1xufVxuZnVuY3Rpb24gbG9jYWxpemVUaW1lUGFydCh7IHZhbHVlLCBwYXJ0LCBsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSB9KSB7XG4gIGlmICghaXNWYWxpZFRpbWVQYXJ0KHZhbHVlLCBwYXJ0KSkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCB2YWx1ZUFzTnVtYmVyID0gcGFyc2VJbnQodmFsdWUpO1xuICBjb25zdCBkYXRlID0gbmV3IERhdGUoRGF0ZS5VVEMoMCwgMCwgMCwgcGFydCA9PT0gXCJob3VyXCIgPyB2YWx1ZUFzTnVtYmVyIDogcGFydCA9PT0gXCJtZXJpZGllbVwiID8gKHZhbHVlID09PSBcIkFNXCIgPyAwIDogMTIpIDogMCwgcGFydCA9PT0gXCJtaW51dGVcIiA/IHZhbHVlQXNOdW1iZXIgOiAwLCBwYXJ0ID09PSBcInNlY29uZFwiID8gdmFsdWVBc051bWJlciA6IDApKTtcbiAgaWYgKCFkYXRlKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IGZvcm1hdHRlciA9IGNyZWF0ZUxvY2FsZURhdGVUaW1lRm9ybWF0dGVyKGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtKTtcbiAgY29uc3QgcGFydHMgPSBmb3JtYXR0ZXIuZm9ybWF0VG9QYXJ0cyhkYXRlKTtcbiAgcmV0dXJuIGdldExvY2FsaXplZFRpbWVQYXJ0KHBhcnQsIHBhcnRzKTtcbn1cbmZ1bmN0aW9uIGxvY2FsaXplVGltZVN0cmluZyh7IHZhbHVlLCBsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSwgaW5jbHVkZVNlY29uZHMgPSB0cnVlIH0pIHtcbiAgaWYgKCFpc1ZhbGlkVGltZSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCB7IGhvdXIsIG1pbnV0ZSwgc2Vjb25kID0gXCIwXCIgfSA9IHBhcnNlVGltZVN0cmluZyh2YWx1ZSk7XG4gIGNvbnN0IGRhdGVGcm9tVGltZVN0cmluZyA9IG5ldyBEYXRlKERhdGUuVVRDKDAsIDAsIDAsIHBhcnNlSW50KGhvdXIpLCBwYXJzZUludChtaW51dGUpLCBwYXJzZUludChzZWNvbmQpKSk7XG4gIGNvbnN0IGZvcm1hdHRlciA9IGNyZWF0ZUxvY2FsZURhdGVUaW1lRm9ybWF0dGVyKGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBpbmNsdWRlU2Vjb25kcyk7XG4gIHJldHVybiBmb3JtYXR0ZXI/LmZvcm1hdChkYXRlRnJvbVRpbWVTdHJpbmcpIHx8IG51bGw7XG59XG5mdW5jdGlvbiBsb2NhbGl6ZVRpbWVTdHJpbmdUb1BhcnRzKHsgdmFsdWUsIGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtIH0pIHtcbiAgaWYgKCFpc1ZhbGlkVGltZSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCB7IGhvdXIsIG1pbnV0ZSwgc2Vjb25kID0gXCIwXCIgfSA9IHBhcnNlVGltZVN0cmluZyh2YWx1ZSk7XG4gIGNvbnN0IGRhdGVGcm9tVGltZVN0cmluZyA9IG5ldyBEYXRlKERhdGUuVVRDKDAsIDAsIDAsIHBhcnNlSW50KGhvdXIpLCBwYXJzZUludChtaW51dGUpLCBwYXJzZUludChzZWNvbmQpKSk7XG4gIGlmIChkYXRlRnJvbVRpbWVTdHJpbmcpIHtcbiAgICBjb25zdCBmb3JtYXR0ZXIgPSBjcmVhdGVMb2NhbGVEYXRlVGltZUZvcm1hdHRlcihsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSk7XG4gICAgY29uc3QgcGFydHMgPSBmb3JtYXR0ZXIuZm9ybWF0VG9QYXJ0cyhkYXRlRnJvbVRpbWVTdHJpbmcpO1xuICAgIHJldHVybiB7XG4gICAgICBsb2NhbGl6ZWRIb3VyOiBnZXRMb2NhbGl6ZWRUaW1lUGFydChcImhvdXJcIiwgcGFydHMpLFxuICAgICAgbG9jYWxpemVkSG91clN1ZmZpeDogZ2V0TG9jYWxpemVkVGltZVBhcnQoXCJob3VyU3VmZml4XCIsIHBhcnRzKSxcbiAgICAgIGxvY2FsaXplZE1pbnV0ZTogZ2V0TG9jYWxpemVkVGltZVBhcnQoXCJtaW51dGVcIiwgcGFydHMpLFxuICAgICAgbG9jYWxpemVkTWludXRlU3VmZml4OiBnZXRMb2NhbGl6ZWRUaW1lUGFydChcIm1pbnV0ZVN1ZmZpeFwiLCBwYXJ0cyksXG4gICAgICBsb2NhbGl6ZWRTZWNvbmQ6IGdldExvY2FsaXplZFRpbWVQYXJ0KFwic2Vjb25kXCIsIHBhcnRzKSxcbiAgICAgIGxvY2FsaXplZFNlY29uZFN1ZmZpeDogZ2V0TG9jYWxpemVkVGltZVBhcnQoXCJzZWNvbmRTdWZmaXhcIiwgcGFydHMpLFxuICAgICAgbG9jYWxpemVkTWVyaWRpZW06IGdldExvY2FsaXplZFRpbWVQYXJ0KFwibWVyaWRpZW1cIiwgcGFydHMpXG4gICAgfTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIGdldFRpbWVQYXJ0cyh7IHZhbHVlLCBsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSB9KSB7XG4gIGlmICghaXNWYWxpZFRpbWUodmFsdWUpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3QgeyBob3VyLCBtaW51dGUsIHNlY29uZCA9IFwiMFwiIH0gPSBwYXJzZVRpbWVTdHJpbmcodmFsdWUpO1xuICBjb25zdCBkYXRlRnJvbVRpbWVTdHJpbmcgPSBuZXcgRGF0ZShEYXRlLlVUQygwLCAwLCAwLCBwYXJzZUludChob3VyKSwgcGFyc2VJbnQobWludXRlKSwgcGFyc2VJbnQoc2Vjb25kKSkpO1xuICBpZiAoZGF0ZUZyb21UaW1lU3RyaW5nKSB7XG4gICAgY29uc3QgZm9ybWF0dGVyID0gY3JlYXRlTG9jYWxlRGF0ZVRpbWVGb3JtYXR0ZXIobG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0pO1xuICAgIGNvbnN0IHBhcnRzID0gZm9ybWF0dGVyLmZvcm1hdFRvUGFydHMoZGF0ZUZyb21UaW1lU3RyaW5nKTtcbiAgICByZXR1cm4gcGFydHM7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBwYXJzZVRpbWVTdHJpbmcodmFsdWUpIHtcbiAgaWYgKGlzVmFsaWRUaW1lKHZhbHVlKSkge1xuICAgIGNvbnN0IFtob3VyLCBtaW51dGUsIHNlY29uZF0gPSB2YWx1ZS5zcGxpdChcIjpcIik7XG4gICAgcmV0dXJuIHtcbiAgICAgIGhvdXIsXG4gICAgICBtaW51dGUsXG4gICAgICBzZWNvbmRcbiAgICB9O1xuICB9XG4gIHJldHVybiB7XG4gICAgaG91cjogbnVsbCxcbiAgICBtaW51dGU6IG51bGwsXG4gICAgc2Vjb25kOiBudWxsXG4gIH07XG59XG5cbmV4cG9ydCB7IGxvY2FsaXplVGltZVN0cmluZ1RvUGFydHMgYXMgYSwgZ2V0VGltZVBhcnRzIGFzIGIsIGZvcm1hdFRpbWVQYXJ0IGFzIGMsIGxvY2FsaXplVGltZVBhcnQgYXMgZCwgZ2V0TG9jYWxlSG91ckN5Y2xlIGFzIGUsIGZvcm1hdFRpbWVTdHJpbmcgYXMgZiwgZ2V0TWVyaWRpZW0gYXMgZywgaXNWYWxpZFRpbWUgYXMgaSwgbG9jYWxpemVUaW1lU3RyaW5nIGFzIGwsIG1heFRlbnRoRm9yTWludXRlQW5kU2Vjb25kIGFzIG0sIHBhcnNlVGltZVN0cmluZyBhcyBwIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRpbWUtMGRiYjBmOTYuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9