"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_ba-infographic_node_modules_arcgis_business-analyst-components_dis-a02741"],{

/***/ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/array-030ec70a.js":
/*!***********************************************************************************************************************************************!*\
  !*** ./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/array-030ec70a.js ***!
  \***********************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   g: () => (/* binding */ getRoundRobinIndex)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.5
 */
function getRoundRobinIndex(index, total) {
  return (index + total) % total;
}



//# sourceMappingURL=array-030ec70a.js.map

/***/ }),

/***/ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/loadable-cc14d728.js":
/*!**************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/loadable-cc14d728.js ***!
  \**************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ setUpLoadableComponent),
/* harmony export */   c: () => (/* binding */ componentLoaded),
/* harmony export */   s: () => (/* binding */ setComponentLoaded)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.5
 */
const resolveMap = new WeakMap();
const promiseMap = new WeakMap();
/**
 * This helper util sets up the component for the ability to know when the component has been loaded.
 *
 * This should be used in the `componentWillLoad` lifecycle hook.
 *
 * ```
 * componentWillLoad(): void {
 *   setUpLoadableComponent(this);
 * }
 * ```
 *
 * @param component
 */
function setUpLoadableComponent(component) {
  promiseMap.set(component, new Promise((resolve) => resolveMap.set(component, resolve)));
}
/**
 * This helper util lets the loadable component know that it is now loaded.
 *
 * This should be used in the `componentDidLoad` lifecycle hook.
 *
 * ```
 * componentDidLoad(): void {
 *   setComponentLoaded(this);
 * }
 * ```
 *
 * @param component
 */
function setComponentLoaded(component) {
  resolveMap.get(component)();
}
/**
 * This helper util can be used to ensure a component has been loaded (The "componentDidLoad" stencil lifecycle method has been called).
 *
 * Requires "setUpLoadableComponent" and "setComponentLoaded" to be called first.
 *
 * A component developer can await this method before proceeding with any logic that requires a component to be loaded first.
 *
 * ```
 * async setFocus(): Promise<void> {
 *   await componentLoaded(this);
 * }
 * ```
 *
 * @param component
 * @returns Promise<void>
 */
function componentLoaded(component) {
  return promiseMap.get(component);
}



//# sourceMappingURL=loadable-cc14d728.js.map

/***/ }),

/***/ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/resources-4e20ca72.js":
/*!***************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/resources-4e20ca72.js ***!
  \***************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   C: () => (/* binding */ CSS),
/* harmony export */   S: () => (/* binding */ SLOTS)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.5
 */
const CSS = {
  heading: "heading",
  container: "container",
  indented: "container--indented"
};
const SLOTS = {
  parentItem: "parent-item"
};



//# sourceMappingURL=resources-4e20ca72.js.map

/***/ }),

/***/ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/resources-a363eb6e.js":
/*!***************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/resources-a363eb6e.js ***!
  \***************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   C: () => (/* binding */ CSS),
/* harmony export */   I: () => (/* binding */ ICON_TYPES),
/* harmony export */   S: () => (/* binding */ SLOTS)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.5
 */
const CSS = {
  sticky: "sticky-pos"
};
var ICON_TYPES;
(function (ICON_TYPES) {
  ICON_TYPES["circle"] = "circle";
  ICON_TYPES["square"] = "square";
  ICON_TYPES["grip"] = "grip";
})(ICON_TYPES || (ICON_TYPES = {}));
const SLOTS = {
  menuActions: "menu-actions"
};



//# sourceMappingURL=resources-a363eb6e.js.map

/***/ }),

/***/ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/shared-list-render-e57aa33f.js":
/*!************************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/shared-list-render-e57aa33f.js ***!
  \************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   L: () => (/* binding */ List),
/* harmony export */   a: () => (/* binding */ deselectSiblingItems),
/* harmony export */   b: () => (/* binding */ handleFilterEvent),
/* harmony export */   c: () => (/* binding */ initializeObserver),
/* harmony export */   d: () => (/* binding */ deselectRemovedItems),
/* harmony export */   e: () => (/* binding */ cleanUpObserver),
/* harmony export */   f: () => (/* binding */ handleInitialFilter),
/* harmony export */   g: () => (/* binding */ getItemData),
/* harmony export */   h: () => (/* binding */ handleFilter),
/* harmony export */   i: () => (/* binding */ initialize),
/* harmony export */   j: () => (/* binding */ calciteListItemChangeHandler),
/* harmony export */   k: () => (/* binding */ keyDownHandler),
/* harmony export */   l: () => (/* binding */ calciteInternalListItemValueChangeHandler),
/* harmony export */   m: () => (/* binding */ mutationObserverCallback),
/* harmony export */   n: () => (/* binding */ calciteListFocusOutHandler),
/* harmony export */   o: () => (/* binding */ setUpItems),
/* harmony export */   p: () => (/* binding */ setFocus),
/* harmony export */   q: () => (/* binding */ getItemIndex),
/* harmony export */   r: () => (/* binding */ removeItem),
/* harmony export */   s: () => (/* binding */ selectSiblings),
/* harmony export */   t: () => (/* binding */ moveItemIndex)
/* harmony export */ });
/* harmony import */ var _array_030ec70a_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./array-030ec70a.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/array-030ec70a.js");
/* harmony import */ var _dom_f1ee4d04_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./dom-f1ee4d04.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/dom-f1ee4d04.js");
/* harmony import */ var _resources_4e20ca72_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./resources-4e20ca72.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/resources-4e20ca72.js");
/* harmony import */ var _debounce_047e09f4_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./debounce-047e09f4.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/debounce-047e09f4.js");
/* harmony import */ var _index_4e647411_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./index-4e647411.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/index-4e647411.js");
/* harmony import */ var _resources_a363eb6e_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./resources-a363eb6e.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/resources-a363eb6e.js");







/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.5
 */
function mutationObserverCallback() {
  this.setUpItems();
  this.setUpFilter();
  this.deselectRemovedItems();
}
const SUPPORTED_ARROW_KEYS = ["ArrowUp", "ArrowDown"];
// --------------------------------------------------------------------------
//
//  Lifecycle
//
// --------------------------------------------------------------------------
function initialize() {
  this.setUpItems();
  this.setUpFilter();
  this.emitCalciteListChange = (0,_debounce_047e09f4_js__WEBPACK_IMPORTED_MODULE_0__.d)(internalCalciteListChangeEvent.bind(this), 0);
  this.emitCalciteListFilter = (0,_debounce_047e09f4_js__WEBPACK_IMPORTED_MODULE_0__.d)(internalCalciteListFilterEvent.bind(this), 0);
}
function initializeObserver() {
  this.mutationObserver?.observe(this.el, { childList: true, subtree: true });
}
function cleanUpObserver() {
  this.mutationObserver?.disconnect();
}
// --------------------------------------------------------------------------
//
//  Listeners
//
// --------------------------------------------------------------------------
function calciteListItemChangeHandler(event) {
  const { selectedValues } = this;
  const { item, value, selected, shiftPressed } = event.detail;
  if (selected) {
    if (this.multiple && shiftPressed) {
      this.selectSiblings(item);
    }
    if (!this.multiple) {
      this.deselectSiblingItems(item);
    }
    selectedValues.set(value, item);
  }
  else {
    selectedValues.delete(value);
    if (this.multiple && shiftPressed) {
      this.selectSiblings(item, true);
    }
  }
  if (!this.multiple) {
    toggleSingleSelectItemTabbing(item, selected);
    if (selected) {
      (0,_dom_f1ee4d04_js__WEBPACK_IMPORTED_MODULE_1__.h)(item);
    }
  }
  this.lastSelectedItem = item;
  this.emitCalciteListChange();
}
function calciteInternalListItemValueChangeHandler(event) {
  const oldValue = event.detail.oldValue;
  const selectedValues = this.selectedValues;
  if (selectedValues.has(oldValue)) {
    const item = selectedValues.get(oldValue);
    selectedValues.delete(oldValue);
    selectedValues.set(event.detail.newValue, item);
  }
  event.stopPropagation();
}
// --------------------------------------------------------------------------
//
//  Private Methods
//
// --------------------------------------------------------------------------
function isValidNavigationKey(key) {
  return !!SUPPORTED_ARROW_KEYS.find((k) => k === key);
}
function calciteListFocusOutHandler(event) {
  const { el, items, multiple, selectedValues } = this;
  if (multiple) {
    return;
  }
  const focusedInside = el.contains(event.relatedTarget);
  if (focusedInside) {
    return;
  }
  filterOutDisabled(items).forEach((item) => {
    toggleSingleSelectItemTabbing(item, selectedValues.size === 0 ? item.contains(event.target) || event.target === item : item.selected);
  });
}
function keyDownHandler(event) {
  const { key, target } = event;
  if (!isValidNavigationKey(key)) {
    return;
  }
  const { items, multiple, selectionFollowsFocus } = this;
  const { length: totalItems } = items;
  const currentIndex = items.indexOf(target);
  if (!totalItems || currentIndex === -1) {
    return;
  }
  event.preventDefault();
  const index = moveItemIndex(this, target, key === "ArrowUp" ? "up" : "down");
  const item = items[index];
  items.forEach((i) => toggleSingleSelectItemTabbing(i, i === item));
  if (!multiple && selectionFollowsFocus) {
    item.selected = true;
  }
  (0,_dom_f1ee4d04_js__WEBPACK_IMPORTED_MODULE_1__.h)(item);
}
function moveItemIndex(list, item, direction) {
  const { items } = list;
  const { length: totalItems } = items;
  const currentIndex = items.indexOf(item);
  const directionFactor = direction === "up" ? -1 : 1;
  let moveOffset = 1;
  let index = (0,_array_030ec70a_js__WEBPACK_IMPORTED_MODULE_2__.g)(currentIndex + directionFactor * moveOffset++, totalItems);
  const firstMovedIndex = index;
  while (items[index].disabled) {
    index = (0,_array_030ec70a_js__WEBPACK_IMPORTED_MODULE_2__.g)(currentIndex + directionFactor * moveOffset++, totalItems);
    if (index === firstMovedIndex) {
      break;
    }
  }
  return index;
}
function getItemIndex(list, item) {
  const { items } = list;
  return items.indexOf(item);
}
function filterOutDisabled(items) {
  return items.filter((item) => !item.disabled);
}
function internalCalciteListFilterEvent() {
  this.calciteListFilter.emit();
}
function internalCalciteListChangeEvent() {
  this.calciteListChange.emit(this.selectedValues);
}
function removeItem(event) {
  if (event.defaultPrevented) {
    return;
  }
  const item = event.target;
  const selectedValues = this.selectedValues;
  if (item.parentElement.tagName === "CALCITE-PICK-LIST-GROUP" && item.slot === _resources_4e20ca72_js__WEBPACK_IMPORTED_MODULE_3__.S.parentItem) {
    item.parentElement.remove();
    Array.from(item.parentElement.children).forEach((item) => selectedValues.delete(item.value));
  }
  else {
    item.remove();
    selectedValues.delete(item.value);
  }
  this.emitCalciteListChange();
}
function toggleSingleSelectItemTabbing(item, selectable) {
  if (item.disabled) {
    return;
  }
  // using attribute intentionally
  if (selectable) {
    item.removeAttribute("tabindex");
  }
  else {
    item.setAttribute("tabindex", "-1");
  }
}
async function setFocus(focusId) {
  if (this.filterEnabled && focusId === "filter") {
    await (0,_dom_f1ee4d04_js__WEBPACK_IMPORTED_MODULE_1__.h)(this.filterEl);
    return;
  }
  const { items, multiple, selectionFollowsFocus } = this;
  if (items.length === 0) {
    return;
  }
  if (multiple) {
    return filterOutDisabled(items)[0]?.setFocus();
  }
  const filtered = filterOutDisabled(items);
  const focusTarget = filtered.find((item) => item.selected) || filtered[0];
  if (selectionFollowsFocus && focusTarget) {
    focusTarget.selected = true;
  }
  return focusTarget.setFocus();
}
function setUpItems(tagName) {
  this.items = Array.from(this.el.querySelectorAll(tagName));
  let hasSelected = false;
  const { items } = this;
  items.forEach((item) => {
    item.icon = this.getIconType();
    if (!this.multiple) {
      item.deselectDisabled = true;
      toggleSingleSelectItemTabbing(item, false);
    }
    if (item.selected) {
      hasSelected = true;
      toggleSingleSelectItemTabbing(item, true);
      this.selectedValues.set(item.value, item);
    }
  });
  const [first] = items;
  if (!hasSelected && first && !first.disabled) {
    toggleSingleSelectItemTabbing(first, true);
  }
}
function deselectRemovedItems() {
  const selectedValues = this.selectedValues;
  const itemValues = this.items.map(({ value }) => value);
  selectedValues.forEach((selectedItem) => {
    if (!itemValues.includes(selectedItem.value)) {
      this.selectedValues.delete(selectedItem.value);
    }
  });
}
function deselectSiblingItems(item) {
  this.items.forEach((currentItem) => {
    if (currentItem.value !== item.value) {
      currentItem.toggleSelected(false);
      if (this.selectedValues.has(currentItem.value)) {
        this.selectedValues.delete(currentItem.value);
      }
    }
  });
}
function selectSiblings(item, deselect = false) {
  if (!this.lastSelectedItem) {
    return;
  }
  const { items } = this;
  const start = items.findIndex((currentItem) => {
    return currentItem.value === this.lastSelectedItem.value;
  });
  const end = items.findIndex((currentItem) => {
    return currentItem.value === item.value;
  });
  items.slice(Math.min(start, end), Math.max(start, end)).forEach((currentItem) => {
    currentItem.toggleSelected(!deselect);
    if (!deselect) {
      this.selectedValues.set(currentItem.value, currentItem);
    }
    else {
      this.selectedValues.delete(currentItem.value);
    }
  });
}
let groups;
function handleFilter(emit = false) {
  const { filteredData, filterText } = this;
  const values = filteredData.map((item) => item.value);
  let hasSelectedMatch = false;
  if (!groups) {
    groups = new Set();
  }
  const matchedItems = this.items?.filter((item) => {
    const parent = item.parentElement;
    const grouped = parent.matches("calcite-pick-list-group");
    if (grouped) {
      groups.add(parent);
    }
    const matches = filterText ? values.includes(item.value) : true;
    item.hidden = !matches;
    if (!hasSelectedMatch) {
      hasSelectedMatch = matches && item.selected;
    }
    return matches;
  }) || [];
  groups.forEach((group) => {
    const hasAtLeastOneMatch = matchedItems.some((item) => group.contains(item));
    group.hidden = !hasAtLeastOneMatch;
    if (!hasAtLeastOneMatch) {
      return;
    }
    const parentItem = (0,_dom_f1ee4d04_js__WEBPACK_IMPORTED_MODULE_1__.g)(group, "parent-item");
    if (parentItem) {
      parentItem.hidden = false;
      if (matchedItems.includes(parentItem)) {
        Array.from(group.children).forEach((child) => (child.hidden = false));
      }
    }
  });
  groups.clear();
  if (matchedItems.length > 0 && !hasSelectedMatch && !this.multiple) {
    toggleSingleSelectItemTabbing(matchedItems[0], true);
  }
  this.setFilteredItems(matchedItems);
  if (emit) {
    this.emitCalciteListFilter();
  }
}
function handleInitialFilter() {
  const filteredItems = this.filterEl?.filteredItems;
  if (filteredItems) {
    this.filteredData = filteredItems;
  }
  this.handleFilter();
}
function handleFilterEvent(event) {
  event.stopPropagation();
  const { filteredItems, value } = event.currentTarget;
  this.filterText = value;
  this.filteredData = filteredItems;
  this.handleFilter(true);
}
function getItemData() {
  return this.items.map((item) => ({
    label: item.label,
    description: item.description,
    metadata: item.metadata,
    value: item.value
  }));
}

/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.5
 */
const List = ({ props: { disabled, loading, filterEnabled, dataForFilter, handleFilterEvent, filterPlaceholder, filterText, setFilterEl, dragEnabled, storeAssistiveEl }, ...rest }) => {
  const defaultSlot = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_4__.h)("slot", null);
  return ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_4__.h)(_index_4e647411_js__WEBPACK_IMPORTED_MODULE_4__.H, { "aria-busy": (0,_dom_f1ee4d04_js__WEBPACK_IMPORTED_MODULE_1__.t)(loading), role: "menu", ...rest }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_4__.h)("section", null, dragEnabled ? ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_4__.h)("span", { "aria-live": "assertive", class: "assistive-text", ref: storeAssistiveEl })) : null, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_4__.h)("header", { class: { [_resources_a363eb6e_js__WEBPACK_IMPORTED_MODULE_5__.C.sticky]: true } }, filterEnabled ? ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_4__.h)("calcite-filter", { "aria-label": filterPlaceholder, disabled: loading || disabled, items: dataForFilter, onCalciteFilterChange: handleFilterEvent, placeholder: filterPlaceholder, ref: setFilterEl, value: filterText })) : null, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_4__.h)("slot", { name: _resources_a363eb6e_js__WEBPACK_IMPORTED_MODULE_5__.S.menuActions })), loading ? (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_4__.h)("calcite-scrim", { loading: loading }) : null, defaultSlot)));
};



//# sourceMappingURL=shared-list-render-e57aa33f.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYmEtaW5mb2dyYXBoaWNfbm9kZV9tb2R1bGVzX2FyY2dpc19idXNpbmVzcy1hbmFseXN0LWNvbXBvbmVudHNfZGlzLWEwMjc0MS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFbUM7O0FBRW5DOzs7Ozs7Ozs7Ozs7Ozs7O0FDWEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRXNGOztBQUV0Rjs7Ozs7Ozs7Ozs7Ozs7O0FDN0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVnQzs7QUFFaEM7Ozs7Ozs7Ozs7Ozs7Ozs7QUNoQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGdDQUFnQztBQUNqQztBQUNBO0FBQ0E7O0FBRWlEOztBQUVqRDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3BCOEQ7QUFDNkI7QUFDdEM7QUFDRTtBQUNKO0FBQ2M7O0FBRWpFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsU0FBUywrSUFBK0ksV0FBVztBQUNuTCxzQkFBc0IscURBQUM7QUFDdkIsVUFBVSxxREFBQyxDQUFDLGlEQUFJLElBQUksYUFBYSxtREFBYSxrQ0FBa0MsRUFBRSxxREFBQyxpQ0FBaUMscURBQUMsV0FBVywwRUFBMEUsV0FBVyxxREFBQyxhQUFhLFNBQVMsQ0FBQyxxREFBRyxrQkFBa0IsbUJBQW1CLHFEQUFDLHFCQUFxQixxTUFBcU0sV0FBVyxxREFBQyxXQUFXLE1BQU0scURBQU8sY0FBYyxjQUFjLHFEQUFDLG9CQUFvQixrQkFBa0I7QUFDdmxCOztBQUV1Zjs7QUFFdmYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2JhLWluZm9ncmFwaGljL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2J1c2luZXNzLWFuYWx5c3QtY29tcG9uZW50cy9kaXN0L3N0ZW5jaWwtY29tcG9uZW50cy9kaXN0L2VzbS9hcnJheS0wMzBlYzcwYS5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2JhLWluZm9ncmFwaGljL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2J1c2luZXNzLWFuYWx5c3QtY29tcG9uZW50cy9kaXN0L3N0ZW5jaWwtY29tcG9uZW50cy9kaXN0L2VzbS9sb2FkYWJsZS1jYzE0ZDcyOC5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2JhLWluZm9ncmFwaGljL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2J1c2luZXNzLWFuYWx5c3QtY29tcG9uZW50cy9kaXN0L3N0ZW5jaWwtY29tcG9uZW50cy9kaXN0L2VzbS9yZXNvdXJjZXMtNGUyMGNhNzIuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9iYS1pbmZvZ3JhcGhpYy9ub2RlX21vZHVsZXMvQGFyY2dpcy9idXNpbmVzcy1hbmFseXN0LWNvbXBvbmVudHMvZGlzdC9zdGVuY2lsLWNvbXBvbmVudHMvZGlzdC9lc20vcmVzb3VyY2VzLWEzNjNlYjZlLmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYmEtaW5mb2dyYXBoaWMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYnVzaW5lc3MtYW5hbHlzdC1jb21wb25lbnRzL2Rpc3Qvc3RlbmNpbC1jb21wb25lbnRzL2Rpc3QvZXNtL3NoYXJlZC1saXN0LXJlbmRlci1lNTdhYTMzZi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1jb21wb25lbnRzL2Jsb2IvbWFzdGVyL0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG4gKiB2MS4wLjVcbiAqL1xuZnVuY3Rpb24gZ2V0Um91bmRSb2JpbkluZGV4KGluZGV4LCB0b3RhbCkge1xuICByZXR1cm4gKGluZGV4ICsgdG90YWwpICUgdG90YWw7XG59XG5cbmV4cG9ydCB7IGdldFJvdW5kUm9iaW5JbmRleCBhcyBnIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFycmF5LTAzMGVjNzBhLmpzLm1hcCIsIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvYmxvYi9tYXN0ZXIvTElDRU5TRS5tZCBmb3IgZGV0YWlscy5cbiAqIHYxLjAuNVxuICovXG5jb25zdCByZXNvbHZlTWFwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHByb21pc2VNYXAgPSBuZXcgV2Vha01hcCgpO1xuLyoqXG4gKiBUaGlzIGhlbHBlciB1dGlsIHNldHMgdXAgdGhlIGNvbXBvbmVudCBmb3IgdGhlIGFiaWxpdHkgdG8ga25vdyB3aGVuIHRoZSBjb21wb25lbnQgaGFzIGJlZW4gbG9hZGVkLlxuICpcbiAqIFRoaXMgc2hvdWxkIGJlIHVzZWQgaW4gdGhlIGBjb21wb25lbnRXaWxsTG9hZGAgbGlmZWN5Y2xlIGhvb2suXG4gKlxuICogYGBgXG4gKiBjb21wb25lbnRXaWxsTG9hZCgpOiB2b2lkIHtcbiAqICAgc2V0VXBMb2FkYWJsZUNvbXBvbmVudCh0aGlzKTtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBjb21wb25lbnRcbiAqL1xuZnVuY3Rpb24gc2V0VXBMb2FkYWJsZUNvbXBvbmVudChjb21wb25lbnQpIHtcbiAgcHJvbWlzZU1hcC5zZXQoY29tcG9uZW50LCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gcmVzb2x2ZU1hcC5zZXQoY29tcG9uZW50LCByZXNvbHZlKSkpO1xufVxuLyoqXG4gKiBUaGlzIGhlbHBlciB1dGlsIGxldHMgdGhlIGxvYWRhYmxlIGNvbXBvbmVudCBrbm93IHRoYXQgaXQgaXMgbm93IGxvYWRlZC5cbiAqXG4gKiBUaGlzIHNob3VsZCBiZSB1c2VkIGluIHRoZSBgY29tcG9uZW50RGlkTG9hZGAgbGlmZWN5Y2xlIGhvb2suXG4gKlxuICogYGBgXG4gKiBjb21wb25lbnREaWRMb2FkKCk6IHZvaWQge1xuICogICBzZXRDb21wb25lbnRMb2FkZWQodGhpcyk7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gY29tcG9uZW50XG4gKi9cbmZ1bmN0aW9uIHNldENvbXBvbmVudExvYWRlZChjb21wb25lbnQpIHtcbiAgcmVzb2x2ZU1hcC5nZXQoY29tcG9uZW50KSgpO1xufVxuLyoqXG4gKiBUaGlzIGhlbHBlciB1dGlsIGNhbiBiZSB1c2VkIHRvIGVuc3VyZSBhIGNvbXBvbmVudCBoYXMgYmVlbiBsb2FkZWQgKFRoZSBcImNvbXBvbmVudERpZExvYWRcIiBzdGVuY2lsIGxpZmVjeWNsZSBtZXRob2QgaGFzIGJlZW4gY2FsbGVkKS5cbiAqXG4gKiBSZXF1aXJlcyBcInNldFVwTG9hZGFibGVDb21wb25lbnRcIiBhbmQgXCJzZXRDb21wb25lbnRMb2FkZWRcIiB0byBiZSBjYWxsZWQgZmlyc3QuXG4gKlxuICogQSBjb21wb25lbnQgZGV2ZWxvcGVyIGNhbiBhd2FpdCB0aGlzIG1ldGhvZCBiZWZvcmUgcHJvY2VlZGluZyB3aXRoIGFueSBsb2dpYyB0aGF0IHJlcXVpcmVzIGEgY29tcG9uZW50IHRvIGJlIGxvYWRlZCBmaXJzdC5cbiAqXG4gKiBgYGBcbiAqIGFzeW5jIHNldEZvY3VzKCk6IFByb21pc2U8dm9pZD4ge1xuICogICBhd2FpdCBjb21wb25lbnRMb2FkZWQodGhpcyk7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gY29tcG9uZW50XG4gKiBAcmV0dXJucyBQcm9taXNlPHZvaWQ+XG4gKi9cbmZ1bmN0aW9uIGNvbXBvbmVudExvYWRlZChjb21wb25lbnQpIHtcbiAgcmV0dXJuIHByb21pc2VNYXAuZ2V0KGNvbXBvbmVudCk7XG59XG5cbmV4cG9ydCB7IHNldFVwTG9hZGFibGVDb21wb25lbnQgYXMgYSwgY29tcG9uZW50TG9hZGVkIGFzIGMsIHNldENvbXBvbmVudExvYWRlZCBhcyBzIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxvYWRhYmxlLWNjMTRkNzI4LmpzLm1hcCIsIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvYmxvYi9tYXN0ZXIvTElDRU5TRS5tZCBmb3IgZGV0YWlscy5cbiAqIHYxLjAuNVxuICovXG5jb25zdCBDU1MgPSB7XG4gIGhlYWRpbmc6IFwiaGVhZGluZ1wiLFxuICBjb250YWluZXI6IFwiY29udGFpbmVyXCIsXG4gIGluZGVudGVkOiBcImNvbnRhaW5lci0taW5kZW50ZWRcIlxufTtcbmNvbnN0IFNMT1RTID0ge1xuICBwYXJlbnRJdGVtOiBcInBhcmVudC1pdGVtXCJcbn07XG5cbmV4cG9ydCB7IENTUyBhcyBDLCBTTE9UUyBhcyBTIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlc291cmNlcy00ZTIwY2E3Mi5qcy5tYXAiLCIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1jb21wb25lbnRzL2Jsb2IvbWFzdGVyL0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG4gKiB2MS4wLjVcbiAqL1xuY29uc3QgQ1NTID0ge1xuICBzdGlja3k6IFwic3RpY2t5LXBvc1wiXG59O1xudmFyIElDT05fVFlQRVM7XG4oZnVuY3Rpb24gKElDT05fVFlQRVMpIHtcbiAgSUNPTl9UWVBFU1tcImNpcmNsZVwiXSA9IFwiY2lyY2xlXCI7XG4gIElDT05fVFlQRVNbXCJzcXVhcmVcIl0gPSBcInNxdWFyZVwiO1xuICBJQ09OX1RZUEVTW1wiZ3JpcFwiXSA9IFwiZ3JpcFwiO1xufSkoSUNPTl9UWVBFUyB8fCAoSUNPTl9UWVBFUyA9IHt9KSk7XG5jb25zdCBTTE9UUyA9IHtcbiAgbWVudUFjdGlvbnM6IFwibWVudS1hY3Rpb25zXCJcbn07XG5cbmV4cG9ydCB7IENTUyBhcyBDLCBJQ09OX1RZUEVTIGFzIEksIFNMT1RTIGFzIFMgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVzb3VyY2VzLWEzNjNlYjZlLmpzLm1hcCIsImltcG9ydCB7IGcgYXMgZ2V0Um91bmRSb2JpbkluZGV4IH0gZnJvbSAnLi9hcnJheS0wMzBlYzcwYS5qcyc7XG5pbXBvcnQgeyBoIGFzIGZvY3VzRWxlbWVudCwgZyBhcyBnZXRTbG90dGVkLCB0IGFzIHRvQXJpYUJvb2xlYW4gfSBmcm9tICcuL2RvbS1mMWVlNGQwNC5qcyc7XG5pbXBvcnQgeyBTIGFzIFNMT1RTIH0gZnJvbSAnLi9yZXNvdXJjZXMtNGUyMGNhNzIuanMnO1xuaW1wb3J0IHsgZCBhcyBkZWJvdW5jZSB9IGZyb20gJy4vZGVib3VuY2UtMDQ3ZTA5ZjQuanMnO1xuaW1wb3J0IHsgaCwgSCBhcyBIb3N0IH0gZnJvbSAnLi9pbmRleC00ZTY0NzQxMS5qcyc7XG5pbXBvcnQgeyBDIGFzIENTUywgUyBhcyBTTE9UUyQxIH0gZnJvbSAnLi9yZXNvdXJjZXMtYTM2M2ViNmUuanMnO1xuXG4vKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1jb21wb25lbnRzL2Jsb2IvbWFzdGVyL0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG4gKiB2MS4wLjVcbiAqL1xuZnVuY3Rpb24gbXV0YXRpb25PYnNlcnZlckNhbGxiYWNrKCkge1xuICB0aGlzLnNldFVwSXRlbXMoKTtcbiAgdGhpcy5zZXRVcEZpbHRlcigpO1xuICB0aGlzLmRlc2VsZWN0UmVtb3ZlZEl0ZW1zKCk7XG59XG5jb25zdCBTVVBQT1JURURfQVJST1dfS0VZUyA9IFtcIkFycm93VXBcIiwgXCJBcnJvd0Rvd25cIl07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy9cbi8vICBMaWZlY3ljbGVcbi8vXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHtcbiAgdGhpcy5zZXRVcEl0ZW1zKCk7XG4gIHRoaXMuc2V0VXBGaWx0ZXIoKTtcbiAgdGhpcy5lbWl0Q2FsY2l0ZUxpc3RDaGFuZ2UgPSBkZWJvdW5jZShpbnRlcm5hbENhbGNpdGVMaXN0Q2hhbmdlRXZlbnQuYmluZCh0aGlzKSwgMCk7XG4gIHRoaXMuZW1pdENhbGNpdGVMaXN0RmlsdGVyID0gZGVib3VuY2UoaW50ZXJuYWxDYWxjaXRlTGlzdEZpbHRlckV2ZW50LmJpbmQodGhpcyksIDApO1xufVxuZnVuY3Rpb24gaW5pdGlhbGl6ZU9ic2VydmVyKCkge1xuICB0aGlzLm11dGF0aW9uT2JzZXJ2ZXI/Lm9ic2VydmUodGhpcy5lbCwgeyBjaGlsZExpc3Q6IHRydWUsIHN1YnRyZWU6IHRydWUgfSk7XG59XG5mdW5jdGlvbiBjbGVhblVwT2JzZXJ2ZXIoKSB7XG4gIHRoaXMubXV0YXRpb25PYnNlcnZlcj8uZGlzY29ubmVjdCgpO1xufVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vXG4vLyAgTGlzdGVuZXJzXG4vL1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmZ1bmN0aW9uIGNhbGNpdGVMaXN0SXRlbUNoYW5nZUhhbmRsZXIoZXZlbnQpIHtcbiAgY29uc3QgeyBzZWxlY3RlZFZhbHVlcyB9ID0gdGhpcztcbiAgY29uc3QgeyBpdGVtLCB2YWx1ZSwgc2VsZWN0ZWQsIHNoaWZ0UHJlc3NlZCB9ID0gZXZlbnQuZGV0YWlsO1xuICBpZiAoc2VsZWN0ZWQpIHtcbiAgICBpZiAodGhpcy5tdWx0aXBsZSAmJiBzaGlmdFByZXNzZWQpIHtcbiAgICAgIHRoaXMuc2VsZWN0U2libGluZ3MoaXRlbSk7XG4gICAgfVxuICAgIGlmICghdGhpcy5tdWx0aXBsZSkge1xuICAgICAgdGhpcy5kZXNlbGVjdFNpYmxpbmdJdGVtcyhpdGVtKTtcbiAgICB9XG4gICAgc2VsZWN0ZWRWYWx1ZXMuc2V0KHZhbHVlLCBpdGVtKTtcbiAgfVxuICBlbHNlIHtcbiAgICBzZWxlY3RlZFZhbHVlcy5kZWxldGUodmFsdWUpO1xuICAgIGlmICh0aGlzLm11bHRpcGxlICYmIHNoaWZ0UHJlc3NlZCkge1xuICAgICAgdGhpcy5zZWxlY3RTaWJsaW5ncyhpdGVtLCB0cnVlKTtcbiAgICB9XG4gIH1cbiAgaWYgKCF0aGlzLm11bHRpcGxlKSB7XG4gICAgdG9nZ2xlU2luZ2xlU2VsZWN0SXRlbVRhYmJpbmcoaXRlbSwgc2VsZWN0ZWQpO1xuICAgIGlmIChzZWxlY3RlZCkge1xuICAgICAgZm9jdXNFbGVtZW50KGl0ZW0pO1xuICAgIH1cbiAgfVxuICB0aGlzLmxhc3RTZWxlY3RlZEl0ZW0gPSBpdGVtO1xuICB0aGlzLmVtaXRDYWxjaXRlTGlzdENoYW5nZSgpO1xufVxuZnVuY3Rpb24gY2FsY2l0ZUludGVybmFsTGlzdEl0ZW1WYWx1ZUNoYW5nZUhhbmRsZXIoZXZlbnQpIHtcbiAgY29uc3Qgb2xkVmFsdWUgPSBldmVudC5kZXRhaWwub2xkVmFsdWU7XG4gIGNvbnN0IHNlbGVjdGVkVmFsdWVzID0gdGhpcy5zZWxlY3RlZFZhbHVlcztcbiAgaWYgKHNlbGVjdGVkVmFsdWVzLmhhcyhvbGRWYWx1ZSkpIHtcbiAgICBjb25zdCBpdGVtID0gc2VsZWN0ZWRWYWx1ZXMuZ2V0KG9sZFZhbHVlKTtcbiAgICBzZWxlY3RlZFZhbHVlcy5kZWxldGUob2xkVmFsdWUpO1xuICAgIHNlbGVjdGVkVmFsdWVzLnNldChldmVudC5kZXRhaWwubmV3VmFsdWUsIGl0ZW0pO1xuICB9XG4gIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xufVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vXG4vLyAgUHJpdmF0ZSBNZXRob2RzXG4vL1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmZ1bmN0aW9uIGlzVmFsaWROYXZpZ2F0aW9uS2V5KGtleSkge1xuICByZXR1cm4gISFTVVBQT1JURURfQVJST1dfS0VZUy5maW5kKChrKSA9PiBrID09PSBrZXkpO1xufVxuZnVuY3Rpb24gY2FsY2l0ZUxpc3RGb2N1c091dEhhbmRsZXIoZXZlbnQpIHtcbiAgY29uc3QgeyBlbCwgaXRlbXMsIG11bHRpcGxlLCBzZWxlY3RlZFZhbHVlcyB9ID0gdGhpcztcbiAgaWYgKG11bHRpcGxlKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IGZvY3VzZWRJbnNpZGUgPSBlbC5jb250YWlucyhldmVudC5yZWxhdGVkVGFyZ2V0KTtcbiAgaWYgKGZvY3VzZWRJbnNpZGUpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgZmlsdGVyT3V0RGlzYWJsZWQoaXRlbXMpLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICB0b2dnbGVTaW5nbGVTZWxlY3RJdGVtVGFiYmluZyhpdGVtLCBzZWxlY3RlZFZhbHVlcy5zaXplID09PSAwID8gaXRlbS5jb250YWlucyhldmVudC50YXJnZXQpIHx8IGV2ZW50LnRhcmdldCA9PT0gaXRlbSA6IGl0ZW0uc2VsZWN0ZWQpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGtleURvd25IYW5kbGVyKGV2ZW50KSB7XG4gIGNvbnN0IHsga2V5LCB0YXJnZXQgfSA9IGV2ZW50O1xuICBpZiAoIWlzVmFsaWROYXZpZ2F0aW9uS2V5KGtleSkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgeyBpdGVtcywgbXVsdGlwbGUsIHNlbGVjdGlvbkZvbGxvd3NGb2N1cyB9ID0gdGhpcztcbiAgY29uc3QgeyBsZW5ndGg6IHRvdGFsSXRlbXMgfSA9IGl0ZW1zO1xuICBjb25zdCBjdXJyZW50SW5kZXggPSBpdGVtcy5pbmRleE9mKHRhcmdldCk7XG4gIGlmICghdG90YWxJdGVtcyB8fCBjdXJyZW50SW5kZXggPT09IC0xKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIGNvbnN0IGluZGV4ID0gbW92ZUl0ZW1JbmRleCh0aGlzLCB0YXJnZXQsIGtleSA9PT0gXCJBcnJvd1VwXCIgPyBcInVwXCIgOiBcImRvd25cIik7XG4gIGNvbnN0IGl0ZW0gPSBpdGVtc1tpbmRleF07XG4gIGl0ZW1zLmZvckVhY2goKGkpID0+IHRvZ2dsZVNpbmdsZVNlbGVjdEl0ZW1UYWJiaW5nKGksIGkgPT09IGl0ZW0pKTtcbiAgaWYgKCFtdWx0aXBsZSAmJiBzZWxlY3Rpb25Gb2xsb3dzRm9jdXMpIHtcbiAgICBpdGVtLnNlbGVjdGVkID0gdHJ1ZTtcbiAgfVxuICBmb2N1c0VsZW1lbnQoaXRlbSk7XG59XG5mdW5jdGlvbiBtb3ZlSXRlbUluZGV4KGxpc3QsIGl0ZW0sIGRpcmVjdGlvbikge1xuICBjb25zdCB7IGl0ZW1zIH0gPSBsaXN0O1xuICBjb25zdCB7IGxlbmd0aDogdG90YWxJdGVtcyB9ID0gaXRlbXM7XG4gIGNvbnN0IGN1cnJlbnRJbmRleCA9IGl0ZW1zLmluZGV4T2YoaXRlbSk7XG4gIGNvbnN0IGRpcmVjdGlvbkZhY3RvciA9IGRpcmVjdGlvbiA9PT0gXCJ1cFwiID8gLTEgOiAxO1xuICBsZXQgbW92ZU9mZnNldCA9IDE7XG4gIGxldCBpbmRleCA9IGdldFJvdW5kUm9iaW5JbmRleChjdXJyZW50SW5kZXggKyBkaXJlY3Rpb25GYWN0b3IgKiBtb3ZlT2Zmc2V0KyssIHRvdGFsSXRlbXMpO1xuICBjb25zdCBmaXJzdE1vdmVkSW5kZXggPSBpbmRleDtcbiAgd2hpbGUgKGl0ZW1zW2luZGV4XS5kaXNhYmxlZCkge1xuICAgIGluZGV4ID0gZ2V0Um91bmRSb2JpbkluZGV4KGN1cnJlbnRJbmRleCArIGRpcmVjdGlvbkZhY3RvciAqIG1vdmVPZmZzZXQrKywgdG90YWxJdGVtcyk7XG4gICAgaWYgKGluZGV4ID09PSBmaXJzdE1vdmVkSW5kZXgpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gaW5kZXg7XG59XG5mdW5jdGlvbiBnZXRJdGVtSW5kZXgobGlzdCwgaXRlbSkge1xuICBjb25zdCB7IGl0ZW1zIH0gPSBsaXN0O1xuICByZXR1cm4gaXRlbXMuaW5kZXhPZihpdGVtKTtcbn1cbmZ1bmN0aW9uIGZpbHRlck91dERpc2FibGVkKGl0ZW1zKSB7XG4gIHJldHVybiBpdGVtcy5maWx0ZXIoKGl0ZW0pID0+ICFpdGVtLmRpc2FibGVkKTtcbn1cbmZ1bmN0aW9uIGludGVybmFsQ2FsY2l0ZUxpc3RGaWx0ZXJFdmVudCgpIHtcbiAgdGhpcy5jYWxjaXRlTGlzdEZpbHRlci5lbWl0KCk7XG59XG5mdW5jdGlvbiBpbnRlcm5hbENhbGNpdGVMaXN0Q2hhbmdlRXZlbnQoKSB7XG4gIHRoaXMuY2FsY2l0ZUxpc3RDaGFuZ2UuZW1pdCh0aGlzLnNlbGVjdGVkVmFsdWVzKTtcbn1cbmZ1bmN0aW9uIHJlbW92ZUl0ZW0oZXZlbnQpIHtcbiAgaWYgKGV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgaXRlbSA9IGV2ZW50LnRhcmdldDtcbiAgY29uc3Qgc2VsZWN0ZWRWYWx1ZXMgPSB0aGlzLnNlbGVjdGVkVmFsdWVzO1xuICBpZiAoaXRlbS5wYXJlbnRFbGVtZW50LnRhZ05hbWUgPT09IFwiQ0FMQ0lURS1QSUNLLUxJU1QtR1JPVVBcIiAmJiBpdGVtLnNsb3QgPT09IFNMT1RTLnBhcmVudEl0ZW0pIHtcbiAgICBpdGVtLnBhcmVudEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgQXJyYXkuZnJvbShpdGVtLnBhcmVudEVsZW1lbnQuY2hpbGRyZW4pLmZvckVhY2goKGl0ZW0pID0+IHNlbGVjdGVkVmFsdWVzLmRlbGV0ZShpdGVtLnZhbHVlKSk7XG4gIH1cbiAgZWxzZSB7XG4gICAgaXRlbS5yZW1vdmUoKTtcbiAgICBzZWxlY3RlZFZhbHVlcy5kZWxldGUoaXRlbS52YWx1ZSk7XG4gIH1cbiAgdGhpcy5lbWl0Q2FsY2l0ZUxpc3RDaGFuZ2UoKTtcbn1cbmZ1bmN0aW9uIHRvZ2dsZVNpbmdsZVNlbGVjdEl0ZW1UYWJiaW5nKGl0ZW0sIHNlbGVjdGFibGUpIHtcbiAgaWYgKGl0ZW0uZGlzYWJsZWQpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgLy8gdXNpbmcgYXR0cmlidXRlIGludGVudGlvbmFsbHlcbiAgaWYgKHNlbGVjdGFibGUpIHtcbiAgICBpdGVtLnJlbW92ZUF0dHJpYnV0ZShcInRhYmluZGV4XCIpO1xuICB9XG4gIGVsc2Uge1xuICAgIGl0ZW0uc2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIiwgXCItMVwiKTtcbiAgfVxufVxuYXN5bmMgZnVuY3Rpb24gc2V0Rm9jdXMoZm9jdXNJZCkge1xuICBpZiAodGhpcy5maWx0ZXJFbmFibGVkICYmIGZvY3VzSWQgPT09IFwiZmlsdGVyXCIpIHtcbiAgICBhd2FpdCBmb2N1c0VsZW1lbnQodGhpcy5maWx0ZXJFbCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHsgaXRlbXMsIG11bHRpcGxlLCBzZWxlY3Rpb25Gb2xsb3dzRm9jdXMgfSA9IHRoaXM7XG4gIGlmIChpdGVtcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKG11bHRpcGxlKSB7XG4gICAgcmV0dXJuIGZpbHRlck91dERpc2FibGVkKGl0ZW1zKVswXT8uc2V0Rm9jdXMoKTtcbiAgfVxuICBjb25zdCBmaWx0ZXJlZCA9IGZpbHRlck91dERpc2FibGVkKGl0ZW1zKTtcbiAgY29uc3QgZm9jdXNUYXJnZXQgPSBmaWx0ZXJlZC5maW5kKChpdGVtKSA9PiBpdGVtLnNlbGVjdGVkKSB8fCBmaWx0ZXJlZFswXTtcbiAgaWYgKHNlbGVjdGlvbkZvbGxvd3NGb2N1cyAmJiBmb2N1c1RhcmdldCkge1xuICAgIGZvY3VzVGFyZ2V0LnNlbGVjdGVkID0gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZm9jdXNUYXJnZXQuc2V0Rm9jdXMoKTtcbn1cbmZ1bmN0aW9uIHNldFVwSXRlbXModGFnTmFtZSkge1xuICB0aGlzLml0ZW1zID0gQXJyYXkuZnJvbSh0aGlzLmVsLnF1ZXJ5U2VsZWN0b3JBbGwodGFnTmFtZSkpO1xuICBsZXQgaGFzU2VsZWN0ZWQgPSBmYWxzZTtcbiAgY29uc3QgeyBpdGVtcyB9ID0gdGhpcztcbiAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgIGl0ZW0uaWNvbiA9IHRoaXMuZ2V0SWNvblR5cGUoKTtcbiAgICBpZiAoIXRoaXMubXVsdGlwbGUpIHtcbiAgICAgIGl0ZW0uZGVzZWxlY3REaXNhYmxlZCA9IHRydWU7XG4gICAgICB0b2dnbGVTaW5nbGVTZWxlY3RJdGVtVGFiYmluZyhpdGVtLCBmYWxzZSk7XG4gICAgfVxuICAgIGlmIChpdGVtLnNlbGVjdGVkKSB7XG4gICAgICBoYXNTZWxlY3RlZCA9IHRydWU7XG4gICAgICB0b2dnbGVTaW5nbGVTZWxlY3RJdGVtVGFiYmluZyhpdGVtLCB0cnVlKTtcbiAgICAgIHRoaXMuc2VsZWN0ZWRWYWx1ZXMuc2V0KGl0ZW0udmFsdWUsIGl0ZW0pO1xuICAgIH1cbiAgfSk7XG4gIGNvbnN0IFtmaXJzdF0gPSBpdGVtcztcbiAgaWYgKCFoYXNTZWxlY3RlZCAmJiBmaXJzdCAmJiAhZmlyc3QuZGlzYWJsZWQpIHtcbiAgICB0b2dnbGVTaW5nbGVTZWxlY3RJdGVtVGFiYmluZyhmaXJzdCwgdHJ1ZSk7XG4gIH1cbn1cbmZ1bmN0aW9uIGRlc2VsZWN0UmVtb3ZlZEl0ZW1zKCkge1xuICBjb25zdCBzZWxlY3RlZFZhbHVlcyA9IHRoaXMuc2VsZWN0ZWRWYWx1ZXM7XG4gIGNvbnN0IGl0ZW1WYWx1ZXMgPSB0aGlzLml0ZW1zLm1hcCgoeyB2YWx1ZSB9KSA9PiB2YWx1ZSk7XG4gIHNlbGVjdGVkVmFsdWVzLmZvckVhY2goKHNlbGVjdGVkSXRlbSkgPT4ge1xuICAgIGlmICghaXRlbVZhbHVlcy5pbmNsdWRlcyhzZWxlY3RlZEl0ZW0udmFsdWUpKSB7XG4gICAgICB0aGlzLnNlbGVjdGVkVmFsdWVzLmRlbGV0ZShzZWxlY3RlZEl0ZW0udmFsdWUpO1xuICAgIH1cbiAgfSk7XG59XG5mdW5jdGlvbiBkZXNlbGVjdFNpYmxpbmdJdGVtcyhpdGVtKSB7XG4gIHRoaXMuaXRlbXMuZm9yRWFjaCgoY3VycmVudEl0ZW0pID0+IHtcbiAgICBpZiAoY3VycmVudEl0ZW0udmFsdWUgIT09IGl0ZW0udmFsdWUpIHtcbiAgICAgIGN1cnJlbnRJdGVtLnRvZ2dsZVNlbGVjdGVkKGZhbHNlKTtcbiAgICAgIGlmICh0aGlzLnNlbGVjdGVkVmFsdWVzLmhhcyhjdXJyZW50SXRlbS52YWx1ZSkpIHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZFZhbHVlcy5kZWxldGUoY3VycmVudEl0ZW0udmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG59XG5mdW5jdGlvbiBzZWxlY3RTaWJsaW5ncyhpdGVtLCBkZXNlbGVjdCA9IGZhbHNlKSB7XG4gIGlmICghdGhpcy5sYXN0U2VsZWN0ZWRJdGVtKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHsgaXRlbXMgfSA9IHRoaXM7XG4gIGNvbnN0IHN0YXJ0ID0gaXRlbXMuZmluZEluZGV4KChjdXJyZW50SXRlbSkgPT4ge1xuICAgIHJldHVybiBjdXJyZW50SXRlbS52YWx1ZSA9PT0gdGhpcy5sYXN0U2VsZWN0ZWRJdGVtLnZhbHVlO1xuICB9KTtcbiAgY29uc3QgZW5kID0gaXRlbXMuZmluZEluZGV4KChjdXJyZW50SXRlbSkgPT4ge1xuICAgIHJldHVybiBjdXJyZW50SXRlbS52YWx1ZSA9PT0gaXRlbS52YWx1ZTtcbiAgfSk7XG4gIGl0ZW1zLnNsaWNlKE1hdGgubWluKHN0YXJ0LCBlbmQpLCBNYXRoLm1heChzdGFydCwgZW5kKSkuZm9yRWFjaCgoY3VycmVudEl0ZW0pID0+IHtcbiAgICBjdXJyZW50SXRlbS50b2dnbGVTZWxlY3RlZCghZGVzZWxlY3QpO1xuICAgIGlmICghZGVzZWxlY3QpIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWRWYWx1ZXMuc2V0KGN1cnJlbnRJdGVtLnZhbHVlLCBjdXJyZW50SXRlbSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhpcy5zZWxlY3RlZFZhbHVlcy5kZWxldGUoY3VycmVudEl0ZW0udmFsdWUpO1xuICAgIH1cbiAgfSk7XG59XG5sZXQgZ3JvdXBzO1xuZnVuY3Rpb24gaGFuZGxlRmlsdGVyKGVtaXQgPSBmYWxzZSkge1xuICBjb25zdCB7IGZpbHRlcmVkRGF0YSwgZmlsdGVyVGV4dCB9ID0gdGhpcztcbiAgY29uc3QgdmFsdWVzID0gZmlsdGVyZWREYXRhLm1hcCgoaXRlbSkgPT4gaXRlbS52YWx1ZSk7XG4gIGxldCBoYXNTZWxlY3RlZE1hdGNoID0gZmFsc2U7XG4gIGlmICghZ3JvdXBzKSB7XG4gICAgZ3JvdXBzID0gbmV3IFNldCgpO1xuICB9XG4gIGNvbnN0IG1hdGNoZWRJdGVtcyA9IHRoaXMuaXRlbXM/LmZpbHRlcigoaXRlbSkgPT4ge1xuICAgIGNvbnN0IHBhcmVudCA9IGl0ZW0ucGFyZW50RWxlbWVudDtcbiAgICBjb25zdCBncm91cGVkID0gcGFyZW50Lm1hdGNoZXMoXCJjYWxjaXRlLXBpY2stbGlzdC1ncm91cFwiKTtcbiAgICBpZiAoZ3JvdXBlZCkge1xuICAgICAgZ3JvdXBzLmFkZChwYXJlbnQpO1xuICAgIH1cbiAgICBjb25zdCBtYXRjaGVzID0gZmlsdGVyVGV4dCA/IHZhbHVlcy5pbmNsdWRlcyhpdGVtLnZhbHVlKSA6IHRydWU7XG4gICAgaXRlbS5oaWRkZW4gPSAhbWF0Y2hlcztcbiAgICBpZiAoIWhhc1NlbGVjdGVkTWF0Y2gpIHtcbiAgICAgIGhhc1NlbGVjdGVkTWF0Y2ggPSBtYXRjaGVzICYmIGl0ZW0uc2VsZWN0ZWQ7XG4gICAgfVxuICAgIHJldHVybiBtYXRjaGVzO1xuICB9KSB8fCBbXTtcbiAgZ3JvdXBzLmZvckVhY2goKGdyb3VwKSA9PiB7XG4gICAgY29uc3QgaGFzQXRMZWFzdE9uZU1hdGNoID0gbWF0Y2hlZEl0ZW1zLnNvbWUoKGl0ZW0pID0+IGdyb3VwLmNvbnRhaW5zKGl0ZW0pKTtcbiAgICBncm91cC5oaWRkZW4gPSAhaGFzQXRMZWFzdE9uZU1hdGNoO1xuICAgIGlmICghaGFzQXRMZWFzdE9uZU1hdGNoKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHBhcmVudEl0ZW0gPSBnZXRTbG90dGVkKGdyb3VwLCBcInBhcmVudC1pdGVtXCIpO1xuICAgIGlmIChwYXJlbnRJdGVtKSB7XG4gICAgICBwYXJlbnRJdGVtLmhpZGRlbiA9IGZhbHNlO1xuICAgICAgaWYgKG1hdGNoZWRJdGVtcy5pbmNsdWRlcyhwYXJlbnRJdGVtKSkge1xuICAgICAgICBBcnJheS5mcm9tKGdyb3VwLmNoaWxkcmVuKS5mb3JFYWNoKChjaGlsZCkgPT4gKGNoaWxkLmhpZGRlbiA9IGZhbHNlKSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgZ3JvdXBzLmNsZWFyKCk7XG4gIGlmIChtYXRjaGVkSXRlbXMubGVuZ3RoID4gMCAmJiAhaGFzU2VsZWN0ZWRNYXRjaCAmJiAhdGhpcy5tdWx0aXBsZSkge1xuICAgIHRvZ2dsZVNpbmdsZVNlbGVjdEl0ZW1UYWJiaW5nKG1hdGNoZWRJdGVtc1swXSwgdHJ1ZSk7XG4gIH1cbiAgdGhpcy5zZXRGaWx0ZXJlZEl0ZW1zKG1hdGNoZWRJdGVtcyk7XG4gIGlmIChlbWl0KSB7XG4gICAgdGhpcy5lbWl0Q2FsY2l0ZUxpc3RGaWx0ZXIoKTtcbiAgfVxufVxuZnVuY3Rpb24gaGFuZGxlSW5pdGlhbEZpbHRlcigpIHtcbiAgY29uc3QgZmlsdGVyZWRJdGVtcyA9IHRoaXMuZmlsdGVyRWw/LmZpbHRlcmVkSXRlbXM7XG4gIGlmIChmaWx0ZXJlZEl0ZW1zKSB7XG4gICAgdGhpcy5maWx0ZXJlZERhdGEgPSBmaWx0ZXJlZEl0ZW1zO1xuICB9XG4gIHRoaXMuaGFuZGxlRmlsdGVyKCk7XG59XG5mdW5jdGlvbiBoYW5kbGVGaWx0ZXJFdmVudChldmVudCkge1xuICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgY29uc3QgeyBmaWx0ZXJlZEl0ZW1zLCB2YWx1ZSB9ID0gZXZlbnQuY3VycmVudFRhcmdldDtcbiAgdGhpcy5maWx0ZXJUZXh0ID0gdmFsdWU7XG4gIHRoaXMuZmlsdGVyZWREYXRhID0gZmlsdGVyZWRJdGVtcztcbiAgdGhpcy5oYW5kbGVGaWx0ZXIodHJ1ZSk7XG59XG5mdW5jdGlvbiBnZXRJdGVtRGF0YSgpIHtcbiAgcmV0dXJuIHRoaXMuaXRlbXMubWFwKChpdGVtKSA9PiAoe1xuICAgIGxhYmVsOiBpdGVtLmxhYmVsLFxuICAgIGRlc2NyaXB0aW9uOiBpdGVtLmRlc2NyaXB0aW9uLFxuICAgIG1ldGFkYXRhOiBpdGVtLm1ldGFkYXRhLFxuICAgIHZhbHVlOiBpdGVtLnZhbHVlXG4gIH0pKTtcbn1cblxuLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtY29tcG9uZW50cy9ibG9iL21hc3Rlci9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxuICogdjEuMC41XG4gKi9cbmNvbnN0IExpc3QgPSAoeyBwcm9wczogeyBkaXNhYmxlZCwgbG9hZGluZywgZmlsdGVyRW5hYmxlZCwgZGF0YUZvckZpbHRlciwgaGFuZGxlRmlsdGVyRXZlbnQsIGZpbHRlclBsYWNlaG9sZGVyLCBmaWx0ZXJUZXh0LCBzZXRGaWx0ZXJFbCwgZHJhZ0VuYWJsZWQsIHN0b3JlQXNzaXN0aXZlRWwgfSwgLi4ucmVzdCB9KSA9PiB7XG4gIGNvbnN0IGRlZmF1bHRTbG90ID0gaChcInNsb3RcIiwgbnVsbCk7XG4gIHJldHVybiAoaChIb3N0LCB7IFwiYXJpYS1idXN5XCI6IHRvQXJpYUJvb2xlYW4obG9hZGluZyksIHJvbGU6IFwibWVudVwiLCAuLi5yZXN0IH0sIGgoXCJzZWN0aW9uXCIsIG51bGwsIGRyYWdFbmFibGVkID8gKGgoXCJzcGFuXCIsIHsgXCJhcmlhLWxpdmVcIjogXCJhc3NlcnRpdmVcIiwgY2xhc3M6IFwiYXNzaXN0aXZlLXRleHRcIiwgcmVmOiBzdG9yZUFzc2lzdGl2ZUVsIH0pKSA6IG51bGwsIGgoXCJoZWFkZXJcIiwgeyBjbGFzczogeyBbQ1NTLnN0aWNreV06IHRydWUgfSB9LCBmaWx0ZXJFbmFibGVkID8gKGgoXCJjYWxjaXRlLWZpbHRlclwiLCB7IFwiYXJpYS1sYWJlbFwiOiBmaWx0ZXJQbGFjZWhvbGRlciwgZGlzYWJsZWQ6IGxvYWRpbmcgfHwgZGlzYWJsZWQsIGl0ZW1zOiBkYXRhRm9yRmlsdGVyLCBvbkNhbGNpdGVGaWx0ZXJDaGFuZ2U6IGhhbmRsZUZpbHRlckV2ZW50LCBwbGFjZWhvbGRlcjogZmlsdGVyUGxhY2Vob2xkZXIsIHJlZjogc2V0RmlsdGVyRWwsIHZhbHVlOiBmaWx0ZXJUZXh0IH0pKSA6IG51bGwsIGgoXCJzbG90XCIsIHsgbmFtZTogU0xPVFMkMS5tZW51QWN0aW9ucyB9KSksIGxvYWRpbmcgPyBoKFwiY2FsY2l0ZS1zY3JpbVwiLCB7IGxvYWRpbmc6IGxvYWRpbmcgfSkgOiBudWxsLCBkZWZhdWx0U2xvdCkpKTtcbn07XG5cbmV4cG9ydCB7IExpc3QgYXMgTCwgZGVzZWxlY3RTaWJsaW5nSXRlbXMgYXMgYSwgaGFuZGxlRmlsdGVyRXZlbnQgYXMgYiwgaW5pdGlhbGl6ZU9ic2VydmVyIGFzIGMsIGRlc2VsZWN0UmVtb3ZlZEl0ZW1zIGFzIGQsIGNsZWFuVXBPYnNlcnZlciBhcyBlLCBoYW5kbGVJbml0aWFsRmlsdGVyIGFzIGYsIGdldEl0ZW1EYXRhIGFzIGcsIGhhbmRsZUZpbHRlciBhcyBoLCBpbml0aWFsaXplIGFzIGksIGNhbGNpdGVMaXN0SXRlbUNoYW5nZUhhbmRsZXIgYXMgaiwga2V5RG93bkhhbmRsZXIgYXMgaywgY2FsY2l0ZUludGVybmFsTGlzdEl0ZW1WYWx1ZUNoYW5nZUhhbmRsZXIgYXMgbCwgbXV0YXRpb25PYnNlcnZlckNhbGxiYWNrIGFzIG0sIGNhbGNpdGVMaXN0Rm9jdXNPdXRIYW5kbGVyIGFzIG4sIHNldFVwSXRlbXMgYXMgbywgc2V0Rm9jdXMgYXMgcCwgZ2V0SXRlbUluZGV4IGFzIHEsIHJlbW92ZUl0ZW0gYXMgciwgc2VsZWN0U2libGluZ3MgYXMgcywgbW92ZUl0ZW1JbmRleCBhcyB0IH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNoYXJlZC1saXN0LXJlbmRlci1lNTdhYTMzZi5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=