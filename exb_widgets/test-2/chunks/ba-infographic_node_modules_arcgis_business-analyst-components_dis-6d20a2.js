"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_ba-infographic_node_modules_arcgis_business-analyst-components_dis-6d20a2"],{

/***/ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/array-030ec70a.js":
/*!***********************************************************************************************************************************************!*\
  !*** ./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/array-030ec70a.js ***!
  \***********************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   g: () => (/* binding */ getRoundRobinIndex)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.5
 */
function getRoundRobinIndex(index, total) {
  return (index + total) % total;
}



//# sourceMappingURL=array-030ec70a.js.map

/***/ }),

/***/ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/calcite-action-menu.entry.js":
/*!**********************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/calcite-action-menu.entry.js ***!
  \**********************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   calcite_action_menu: () => (/* binding */ ActionMenu)
/* harmony export */ });
/* harmony import */ var _index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-4e647411.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/index-4e647411.js");
/* harmony import */ var _array_030ec70a_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./array-030ec70a.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/array-030ec70a.js");
/* harmony import */ var _dom_f1ee4d04_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./dom-f1ee4d04.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/dom-f1ee4d04.js");
/* harmony import */ var _guid_88a3729f_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./guid-88a3729f.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/guid-88a3729f.js");
/* harmony import */ var _key_b75491c4_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./key-b75491c4.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/key-b75491c4.js");
/* harmony import */ var _loadable_cc14d728_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./loadable-cc14d728.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/loadable-cc14d728.js");
/* harmony import */ var _resources_5d25f976_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./resources-5d25f976.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/resources-5d25f976.js");










const actionMenuCss = "@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{box-sizing:border-box;display:flex;flex-direction:column;background-color:var(--calcite-ui-foreground-1);font-size:var(--calcite-font-size-1);color:var(--calcite-ui-text-2)}.menu ::slotted(calcite-action){margin:0.125rem;display:flex;outline-color:transparent}.menu ::slotted(calcite-action[active]){outline:2px solid var(--calcite-ui-brand);outline-offset:0px}.default-trigger{position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}slot[name=trigger]::slotted(calcite-action),calcite-action::slotted([slot=trigger]){position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}.menu{flex-direction:column;flex-wrap:nowrap;outline:2px solid transparent;outline-offset:2px}";

const SUPPORTED_MENU_NAV_KEYS = ["ArrowUp", "ArrowDown", "End", "Home"];
const ActionMenu = class {
  constructor(hostRef) {
    (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.calciteActionMenuOpen = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteActionMenuOpen", 6);
    this.actionElements = [];
    this.guid = `calcite-action-menu-${(0,_guid_88a3729f_js__WEBPACK_IMPORTED_MODULE_1__.g)()}`;
    this.menuId = `${this.guid}-menu`;
    this.menuButtonId = `${this.guid}-menu-button`;
    // --------------------------------------------------------------------------
    //
    //  Component Methods
    //
    // --------------------------------------------------------------------------
    this.connectMenuButtonEl = () => {
      const { menuButtonId, menuId, open, label } = this;
      const menuButtonEl = this.slottedMenuButtonEl || this.defaultMenuButtonEl;
      if (this.menuButtonEl === menuButtonEl) {
        return;
      }
      this.disconnectMenuButtonEl();
      this.menuButtonEl = menuButtonEl;
      this.setTooltipReferenceElement();
      if (!menuButtonEl) {
        return;
      }
      menuButtonEl.active = open;
      menuButtonEl.setAttribute("aria-controls", menuId);
      menuButtonEl.setAttribute("aria-expanded", (0,_dom_f1ee4d04_js__WEBPACK_IMPORTED_MODULE_2__.t)(open));
      menuButtonEl.setAttribute("aria-haspopup", "true");
      if (!menuButtonEl.id) {
        menuButtonEl.id = menuButtonId;
      }
      if (!menuButtonEl.label) {
        menuButtonEl.label = label;
      }
      if (!menuButtonEl.text) {
        menuButtonEl.text = label;
      }
      menuButtonEl.addEventListener("pointerdown", this.menuButtonClick);
      menuButtonEl.addEventListener("keydown", this.menuButtonKeyDown);
    };
    this.disconnectMenuButtonEl = () => {
      const { menuButtonEl } = this;
      if (!menuButtonEl) {
        return;
      }
      menuButtonEl.removeEventListener("pointerdown", this.menuButtonClick);
      menuButtonEl.removeEventListener("keydown", this.menuButtonKeyDown);
    };
    this.setMenuButtonEl = (event) => {
      const actions = event.target
        .assignedElements({
        flatten: true
      })
        .filter((el) => el?.matches("calcite-action"));
      this.slottedMenuButtonEl = actions[0];
      this.connectMenuButtonEl();
    };
    this.setDefaultMenuButtonEl = (el) => {
      this.defaultMenuButtonEl = el;
      this.connectMenuButtonEl();
    };
    // --------------------------------------------------------------------------
    //
    //  Private Methods
    //
    // --------------------------------------------------------------------------
    this.handleCalciteActionClick = () => {
      this.open = false;
      this.setFocus();
    };
    this.menuButtonClick = (event) => {
      if (!(0,_dom_f1ee4d04_js__WEBPACK_IMPORTED_MODULE_2__.i)(event)) {
        return;
      }
      this.toggleOpen();
    };
    this.updateTooltip = (event) => {
      const tooltips = event.target
        .assignedElements({
        flatten: true
      })
        .filter((el) => el?.matches("calcite-tooltip"));
      this.tooltipEl = tooltips[0];
      this.setTooltipReferenceElement();
    };
    this.setTooltipReferenceElement = () => {
      const { tooltipEl, expanded, menuButtonEl, open } = this;
      if (tooltipEl) {
        tooltipEl.referenceElement = !expanded && !open ? menuButtonEl : null;
      }
    };
    this.updateAction = (action, index) => {
      const { guid, activeMenuItemIndex } = this;
      const id = `${guid}-action-${index}`;
      action.tabIndex = -1;
      action.setAttribute("role", "menuitem");
      if (!action.id) {
        action.id = id;
      }
      action.active = index === activeMenuItemIndex;
    };
    this.updateActions = (actions) => {
      actions?.forEach(this.updateAction);
    };
    this.handleDefaultSlotChange = (event) => {
      const actions = event.target
        .assignedElements({
        flatten: true
      })
        .filter((el) => el?.matches("calcite-action"));
      this.actionElements = actions;
    };
    this.menuButtonKeyDown = (event) => {
      const { key } = event;
      const { actionElements, activeMenuItemIndex, open } = this;
      if (!actionElements.length) {
        return;
      }
      if ((0,_key_b75491c4_js__WEBPACK_IMPORTED_MODULE_3__.i)(key)) {
        event.preventDefault();
        if (!open) {
          this.toggleOpen();
          return;
        }
        const action = actionElements[activeMenuItemIndex];
        action ? action.click() : this.toggleOpen(false);
      }
      if (key === "Tab") {
        this.open = false;
        return;
      }
      if (key === "Escape") {
        this.toggleOpen(false);
        event.preventDefault();
        return;
      }
      this.handleActionNavigation(event, key, actionElements);
    };
    this.handleActionNavigation = (event, key, actions) => {
      if (!this.isValidKey(key, SUPPORTED_MENU_NAV_KEYS)) {
        return;
      }
      event.preventDefault();
      if (!this.open) {
        this.toggleOpen();
        if (key === "Home" || key === "ArrowDown") {
          this.activeMenuItemIndex = 0;
        }
        if (key === "End" || key === "ArrowUp") {
          this.activeMenuItemIndex = actions.length - 1;
        }
        return;
      }
      if (key === "Home") {
        this.activeMenuItemIndex = 0;
      }
      if (key === "End") {
        this.activeMenuItemIndex = actions.length - 1;
      }
      const currentIndex = this.activeMenuItemIndex;
      if (key === "ArrowUp") {
        this.activeMenuItemIndex = (0,_array_030ec70a_js__WEBPACK_IMPORTED_MODULE_4__.g)(Math.max(currentIndex - 1, -1), actions.length);
      }
      if (key === "ArrowDown") {
        this.activeMenuItemIndex = (0,_array_030ec70a_js__WEBPACK_IMPORTED_MODULE_4__.g)(currentIndex + 1, actions.length);
      }
    };
    this.toggleOpenEnd = () => {
      this.setFocus();
      this.el.removeEventListener("calcitePopoverOpen", this.toggleOpenEnd);
    };
    this.toggleOpen = (value = !this.open) => {
      this.el.addEventListener("calcitePopoverOpen", this.toggleOpenEnd);
      this.open = value;
    };
    this.expanded = false;
    this.flipPlacements = undefined;
    this.label = undefined;
    this.open = false;
    this.overlayPositioning = "absolute";
    this.placement = "auto";
    this.scale = undefined;
    this.menuButtonEl = undefined;
    this.activeMenuItemIndex = -1;
  }
  // --------------------------------------------------------------------------
  //
  //  Lifecycle
  //
  // --------------------------------------------------------------------------
  componentWillLoad() {
    (0,_loadable_cc14d728_js__WEBPACK_IMPORTED_MODULE_5__.a)(this);
  }
  componentDidLoad() {
    (0,_loadable_cc14d728_js__WEBPACK_IMPORTED_MODULE_5__.s)(this);
  }
  disconnectedCallback() {
    this.disconnectMenuButtonEl();
  }
  expandedHandler() {
    this.open = false;
    this.setTooltipReferenceElement();
  }
  openHandler(open) {
    this.activeMenuItemIndex = this.open ? 0 : -1;
    if (this.menuButtonEl) {
      this.menuButtonEl.active = open;
    }
    this.calciteActionMenuOpen.emit();
    this.setTooltipReferenceElement();
  }
  closeCalciteActionMenuOnClick(event) {
    if (!(0,_dom_f1ee4d04_js__WEBPACK_IMPORTED_MODULE_2__.i)(event)) {
      return;
    }
    const composedPath = event.composedPath();
    if (composedPath.includes(this.el)) {
      return;
    }
    this.open = false;
  }
  activeMenuItemIndexHandler() {
    this.updateActions(this.actionElements);
  }
  // --------------------------------------------------------------------------
  //
  //  Methods
  //
  // --------------------------------------------------------------------------
  /** Sets focus on the component. */
  async setFocus() {
    await (0,_loadable_cc14d728_js__WEBPACK_IMPORTED_MODULE_5__.c)(this);
    (0,_dom_f1ee4d04_js__WEBPACK_IMPORTED_MODULE_2__.h)(this.menuButtonEl);
  }
  renderMenuButton() {
    const { label, scale, expanded } = this;
    const menuButtonSlot = ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { name: _resources_5d25f976_js__WEBPACK_IMPORTED_MODULE_6__.S.trigger, onSlotchange: this.setMenuButtonEl }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-action", { class: _resources_5d25f976_js__WEBPACK_IMPORTED_MODULE_6__.C.defaultTrigger, icon: _resources_5d25f976_js__WEBPACK_IMPORTED_MODULE_6__.I.menu, ref: this.setDefaultMenuButtonEl, scale: scale, text: label, textEnabled: expanded })));
    return menuButtonSlot;
  }
  renderMenuItems() {
    const { actionElements, activeMenuItemIndex, open, menuId, menuButtonEl, label, placement, overlayPositioning, flipPlacements } = this;
    const activeAction = actionElements[activeMenuItemIndex];
    const activeDescendantId = activeAction?.id || null;
    return ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-popover", { flipPlacements: flipPlacements, focusTrapDisabled: true, label: label, offsetDistance: 0, open: open, overlayPositioning: overlayPositioning, placement: placement, pointerDisabled: true, referenceElement: menuButtonEl }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { "aria-activedescendant": activeDescendantId, "aria-labelledby": menuButtonEl?.id, class: _resources_5d25f976_js__WEBPACK_IMPORTED_MODULE_6__.C.menu, id: menuId, onClick: this.handleCalciteActionClick, role: "menu", tabIndex: -1 }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { onSlotchange: this.handleDefaultSlotChange }))));
  }
  render() {
    return ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.F, null, this.renderMenuButton(), this.renderMenuItems(), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { name: _resources_5d25f976_js__WEBPACK_IMPORTED_MODULE_6__.S.tooltip, onSlotchange: this.updateTooltip })));
  }
  isValidKey(key, supportedKeys) {
    return !!supportedKeys.find((k) => k === key);
  }
  get el() { return (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.g)(this); }
  static get watchers() { return {
    "expanded": ["expandedHandler"],
    "open": ["openHandler"],
    "activeMenuItemIndex": ["activeMenuItemIndexHandler"]
  }; }
};
ActionMenu.style = actionMenuCss;



//# sourceMappingURL=calcite-action-menu.entry.js.map

/***/ }),

/***/ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/key-b75491c4.js":
/*!*********************************************************************************************************************************************!*\
  !*** ./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/key-b75491c4.js ***!
  \*********************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   i: () => (/* binding */ isActivationKey),
/* harmony export */   n: () => (/* binding */ numberKeys)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.5
 */
function isActivationKey(key) {
  return key === "Enter" || key === " ";
}
const numberKeys = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"];



//# sourceMappingURL=key-b75491c4.js.map

/***/ }),

/***/ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/loadable-cc14d728.js":
/*!**************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/loadable-cc14d728.js ***!
  \**************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ setUpLoadableComponent),
/* harmony export */   c: () => (/* binding */ componentLoaded),
/* harmony export */   s: () => (/* binding */ setComponentLoaded)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.5
 */
const resolveMap = new WeakMap();
const promiseMap = new WeakMap();
/**
 * This helper util sets up the component for the ability to know when the component has been loaded.
 *
 * This should be used in the `componentWillLoad` lifecycle hook.
 *
 * ```
 * componentWillLoad(): void {
 *   setUpLoadableComponent(this);
 * }
 * ```
 *
 * @param component
 */
function setUpLoadableComponent(component) {
  promiseMap.set(component, new Promise((resolve) => resolveMap.set(component, resolve)));
}
/**
 * This helper util lets the loadable component know that it is now loaded.
 *
 * This should be used in the `componentDidLoad` lifecycle hook.
 *
 * ```
 * componentDidLoad(): void {
 *   setComponentLoaded(this);
 * }
 * ```
 *
 * @param component
 */
function setComponentLoaded(component) {
  resolveMap.get(component)();
}
/**
 * This helper util can be used to ensure a component has been loaded (The "componentDidLoad" stencil lifecycle method has been called).
 *
 * Requires "setUpLoadableComponent" and "setComponentLoaded" to be called first.
 *
 * A component developer can await this method before proceeding with any logic that requires a component to be loaded first.
 *
 * ```
 * async setFocus(): Promise<void> {
 *   await componentLoaded(this);
 * }
 * ```
 *
 * @param component
 * @returns Promise<void>
 */
function componentLoaded(component) {
  return promiseMap.get(component);
}



//# sourceMappingURL=loadable-cc14d728.js.map

/***/ }),

/***/ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/resources-5d25f976.js":
/*!***************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/resources-5d25f976.js ***!
  \***************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   C: () => (/* binding */ CSS),
/* harmony export */   I: () => (/* binding */ ICONS),
/* harmony export */   S: () => (/* binding */ SLOTS)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.5
 */
const CSS = {
  menu: "menu",
  defaultTrigger: "default-trigger"
};
const SLOTS = {
  tooltip: "tooltip",
  trigger: "trigger"
};
const ICONS = {
  menu: "ellipsis"
};



//# sourceMappingURL=resources-5d25f976.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYmEtaW5mb2dyYXBoaWNfbm9kZV9tb2R1bGVzX2FyY2dpc19idXNpbmVzcy1hbmFseXN0LWNvbXBvbmVudHNfZGlzLTZkMjBhMi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFbUM7O0FBRW5DOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNYaUg7QUFDbkQ7QUFDeUM7QUFDeEQ7QUFDVTtBQUMyRDtBQUN6QztBQUMxQztBQUNBOztBQUVqQyxxQ0FBcUMsR0FBRyxVQUFVLEtBQUssV0FBVyxtQkFBbUIsR0FBRyxVQUFVLGtDQUFrQyxLQUFLLFVBQVUsZ0NBQWdDLGlCQUFpQixHQUFHLFVBQVUsaUNBQWlDLEtBQUssVUFBVSxnQ0FBZ0Msb0JBQW9CLEdBQUcsVUFBVSxpQ0FBaUMsS0FBSyxVQUFVLDRCQUE0QixNQUFNLGlGQUFpRixxRUFBcUUsK0ZBQStGLGlHQUFpRywrRkFBK0YsaUJBQWlCLFVBQVUseUJBQXlCLG1EQUFtRCxxQkFBcUIsa0JBQWtCLDBCQUEwQix1QkFBdUIsd0JBQXdCLHFCQUFxQiwyQkFBMkIsd0JBQXdCLHdDQUF3QyxNQUFNLHNDQUFzQyxNQUFNLGlFQUFpRSxrQ0FBa0MsZ0JBQWdCLGFBQWEsTUFBTSxzQkFBc0IsYUFBYSxzQkFBc0IsZ0RBQWdELHFDQUFxQywrQkFBK0IsZ0NBQWdDLGdCQUFnQixhQUFhLDBCQUEwQix3Q0FBd0MsMENBQTBDLG1CQUFtQixpQkFBaUIsa0JBQWtCLGdCQUFnQixjQUFjLG1CQUFtQixvRkFBb0Ysa0JBQWtCLGdCQUFnQixjQUFjLG1CQUFtQixNQUFNLHNCQUFzQixpQkFBaUIsOEJBQThCLG1CQUFtQjs7QUFFMS9EO0FBQ0E7QUFDQTtBQUNBLElBQUkscURBQWdCO0FBQ3BCLGlDQUFpQyxxREFBVztBQUM1QztBQUNBLHVDQUF1QyxvREFBSSxHQUFHO0FBQzlDLHFCQUFxQixVQUFVO0FBQy9CLDJCQUEyQixVQUFVO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsb0NBQW9DO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxtREFBYTtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxlQUFlO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsbURBQXNCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsMENBQTBDO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLDRCQUE0QjtBQUMxQyxvQkFBb0IsS0FBSyxVQUFVLE1BQU07QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsTUFBTTtBQUNwQixjQUFjLDRDQUE0QztBQUMxRDtBQUNBO0FBQ0E7QUFDQSxVQUFVLG1EQUFlO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxxREFBa0I7QUFDckQ7QUFDQTtBQUNBLG1DQUFtQyxxREFBa0I7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksd0RBQXNCO0FBQzFCO0FBQ0E7QUFDQSxJQUFJLHdEQUFrQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxtREFBc0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSx3REFBZTtBQUN6QixJQUFJLG1EQUFZO0FBQ2hCO0FBQ0E7QUFDQSxZQUFZLHlCQUF5QjtBQUNyQyw0QkFBNEIscURBQUMsV0FBVyxNQUFNLHFEQUFLLDhDQUE4QyxFQUFFLHFEQUFDLHFCQUFxQixPQUFPLHFEQUFHLHVCQUF1QixxREFBSywyRkFBMkY7QUFDMVA7QUFDQTtBQUNBO0FBQ0EsWUFBWSx3SEFBd0g7QUFDcEk7QUFDQTtBQUNBLFlBQVkscURBQUMsc0JBQXNCLDJOQUEyTixFQUFFLHFEQUFDLFVBQVUseUZBQXlGLHFEQUFHLHVGQUF1RixFQUFFLHFEQUFDLFdBQVcsNENBQTRDO0FBQ3hmO0FBQ0E7QUFDQSxZQUFZLHFEQUFDLENBQUMsaURBQVEseURBQXlELHFEQUFDLFdBQVcsTUFBTSxxREFBSyw0Q0FBNEM7QUFDbEo7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLE9BQU8scURBQVU7QUFDOUIsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFNkM7O0FBRTdDOzs7Ozs7Ozs7Ozs7Ozs7QUNwUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVpRDs7QUFFakQ7Ozs7Ozs7Ozs7Ozs7Ozs7QUNaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFc0Y7O0FBRXRGOzs7Ozs7Ozs7Ozs7Ozs7O0FDN0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUU0Qzs7QUFFNUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2JhLWluZm9ncmFwaGljL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2J1c2luZXNzLWFuYWx5c3QtY29tcG9uZW50cy9kaXN0L3N0ZW5jaWwtY29tcG9uZW50cy9kaXN0L2VzbS9hcnJheS0wMzBlYzcwYS5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2JhLWluZm9ncmFwaGljL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2J1c2luZXNzLWFuYWx5c3QtY29tcG9uZW50cy9kaXN0L3N0ZW5jaWwtY29tcG9uZW50cy9kaXN0L2VzbS9jYWxjaXRlLWFjdGlvbi1tZW51LmVudHJ5LmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYmEtaW5mb2dyYXBoaWMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYnVzaW5lc3MtYW5hbHlzdC1jb21wb25lbnRzL2Rpc3Qvc3RlbmNpbC1jb21wb25lbnRzL2Rpc3QvZXNtL2tleS1iNzU0OTFjNC5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2JhLWluZm9ncmFwaGljL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2J1c2luZXNzLWFuYWx5c3QtY29tcG9uZW50cy9kaXN0L3N0ZW5jaWwtY29tcG9uZW50cy9kaXN0L2VzbS9sb2FkYWJsZS1jYzE0ZDcyOC5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2JhLWluZm9ncmFwaGljL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2J1c2luZXNzLWFuYWx5c3QtY29tcG9uZW50cy9kaXN0L3N0ZW5jaWwtY29tcG9uZW50cy9kaXN0L2VzbS9yZXNvdXJjZXMtNWQyNWY5NzYuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtY29tcG9uZW50cy9ibG9iL21hc3Rlci9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxuICogdjEuMC41XG4gKi9cbmZ1bmN0aW9uIGdldFJvdW5kUm9iaW5JbmRleChpbmRleCwgdG90YWwpIHtcbiAgcmV0dXJuIChpbmRleCArIHRvdGFsKSAlIHRvdGFsO1xufVxuXG5leHBvcnQgeyBnZXRSb3VuZFJvYmluSW5kZXggYXMgZyB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcnJheS0wMzBlYzcwYS5qcy5tYXAiLCJpbXBvcnQgeyByIGFzIHJlZ2lzdGVySW5zdGFuY2UsIGMgYXMgY3JlYXRlRXZlbnQsIGgsIEYgYXMgRnJhZ21lbnQsIGcgYXMgZ2V0RWxlbWVudCB9IGZyb20gJy4vaW5kZXgtNGU2NDc0MTEuanMnO1xuaW1wb3J0IHsgZyBhcyBnZXRSb3VuZFJvYmluSW5kZXggfSBmcm9tICcuL2FycmF5LTAzMGVjNzBhLmpzJztcbmltcG9ydCB7IHQgYXMgdG9BcmlhQm9vbGVhbiwgaSBhcyBpc1ByaW1hcnlQb2ludGVyQnV0dG9uLCBoIGFzIGZvY3VzRWxlbWVudCB9IGZyb20gJy4vZG9tLWYxZWU0ZDA0LmpzJztcbmltcG9ydCB7IGcgYXMgZ3VpZCB9IGZyb20gJy4vZ3VpZC04OGEzNzI5Zi5qcyc7XG5pbXBvcnQgeyBpIGFzIGlzQWN0aXZhdGlvbktleSB9IGZyb20gJy4va2V5LWI3NTQ5MWM0LmpzJztcbmltcG9ydCB7IGEgYXMgc2V0VXBMb2FkYWJsZUNvbXBvbmVudCwgcyBhcyBzZXRDb21wb25lbnRMb2FkZWQsIGMgYXMgY29tcG9uZW50TG9hZGVkIH0gZnJvbSAnLi9sb2FkYWJsZS1jYzE0ZDcyOC5qcyc7XG5pbXBvcnQgeyBDIGFzIENTUywgSSBhcyBJQ09OUywgUyBhcyBTTE9UUyB9IGZyb20gJy4vcmVzb3VyY2VzLTVkMjVmOTc2LmpzJztcbmltcG9ydCAnLi9pbmRleC5lc20tMWM2NWQ4YzcuanMnO1xuaW1wb3J0ICcuL3Jlc291cmNlcy00ODQzNmVlYS5qcyc7XG5cbmNvbnN0IGFjdGlvbk1lbnVDc3MgPSBcIkBrZXlmcmFtZXMgaW57MCV7b3BhY2l0eTowfTEwMCV7b3BhY2l0eToxfX1Aa2V5ZnJhbWVzIGluLWRvd257MCV7b3BhY2l0eTowO3RyYW5zZm9ybTp0cmFuc2xhdGUzRCgwLCAtNXB4LCAwKX0xMDAle29wYWNpdHk6MTt0cmFuc2Zvcm06dHJhbnNsYXRlM0QoMCwgMCwgMCl9fUBrZXlmcmFtZXMgaW4tdXB7MCV7b3BhY2l0eTowO3RyYW5zZm9ybTp0cmFuc2xhdGUzRCgwLCA1cHgsIDApfTEwMCV7b3BhY2l0eToxO3RyYW5zZm9ybTp0cmFuc2xhdGUzRCgwLCAwLCAwKX19QGtleWZyYW1lcyBpbi1zY2FsZXswJXtvcGFjaXR5OjA7dHJhbnNmb3JtOnNjYWxlM0QoMC45NSwgMC45NSwgMSl9MTAwJXtvcGFjaXR5OjE7dHJhbnNmb3JtOnNjYWxlM0QoMSwgMSwgMSl9fTpyb290ey0tY2FsY2l0ZS1hbmltYXRpb24tdGltaW5nOmNhbGMoMTUwbXMgKiB2YXIoLS1jYWxjaXRlLWludGVybmFsLWR1cmF0aW9uLWZhY3RvcikpOy0tY2FsY2l0ZS1pbnRlcm5hbC1kdXJhdGlvbi1mYWN0b3I6dmFyKC0tY2FsY2l0ZS1kdXJhdGlvbi1mYWN0b3IsIDEpOy0tY2FsY2l0ZS1pbnRlcm5hbC1hbmltYXRpb24tdGltaW5nLWZhc3Q6Y2FsYygxMDBtcyAqIHZhcigtLWNhbGNpdGUtaW50ZXJuYWwtZHVyYXRpb24tZmFjdG9yKSk7LS1jYWxjaXRlLWludGVybmFsLWFuaW1hdGlvbi10aW1pbmctbWVkaXVtOmNhbGMoMjAwbXMgKiB2YXIoLS1jYWxjaXRlLWludGVybmFsLWR1cmF0aW9uLWZhY3RvcikpOy0tY2FsY2l0ZS1pbnRlcm5hbC1hbmltYXRpb24tdGltaW5nLXNsb3c6Y2FsYygzMDBtcyAqIHZhcigtLWNhbGNpdGUtaW50ZXJuYWwtZHVyYXRpb24tZmFjdG9yKSl9LmNhbGNpdGUtYW5pbWF0ZXtvcGFjaXR5OjA7YW5pbWF0aW9uLWZpbGwtbW9kZTpib3RoO2FuaW1hdGlvbi1kdXJhdGlvbjp2YXIoLS1jYWxjaXRlLWFuaW1hdGlvbi10aW1pbmcpfS5jYWxjaXRlLWFuaW1hdGVfX2lue2FuaW1hdGlvbi1uYW1lOmlufS5jYWxjaXRlLWFuaW1hdGVfX2luLWRvd257YW5pbWF0aW9uLW5hbWU6aW4tZG93bn0uY2FsY2l0ZS1hbmltYXRlX19pbi11cHthbmltYXRpb24tbmFtZTppbi11cH0uY2FsY2l0ZS1hbmltYXRlX19pbi1zY2FsZXthbmltYXRpb24tbmFtZTppbi1zY2FsZX1AbWVkaWEgKHByZWZlcnMtcmVkdWNlZC1tb3Rpb246IHJlZHVjZSl7OnJvb3R7LS1jYWxjaXRlLWludGVybmFsLWR1cmF0aW9uLWZhY3RvcjowfX06cm9vdHstLWNhbGNpdGUtZmxvYXRpbmctdWktdHJhbnNpdGlvbjp2YXIoLS1jYWxjaXRlLWFuaW1hdGlvbi10aW1pbmcpOy0tY2FsY2l0ZS1mbG9hdGluZy11aS16LWluZGV4OjYwMH06aG9zdChbaGlkZGVuXSl7ZGlzcGxheTpub25lfTpob3N0e2JveC1zaXppbmc6Ym9yZGVyLWJveDtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS11aS1mb3JlZ3JvdW5kLTEpO2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0xKTtjb2xvcjp2YXIoLS1jYWxjaXRlLXVpLXRleHQtMil9Lm1lbnUgOjpzbG90dGVkKGNhbGNpdGUtYWN0aW9uKXttYXJnaW46MC4xMjVyZW07ZGlzcGxheTpmbGV4O291dGxpbmUtY29sb3I6dHJhbnNwYXJlbnR9Lm1lbnUgOjpzbG90dGVkKGNhbGNpdGUtYWN0aW9uW2FjdGl2ZV0pe291dGxpbmU6MnB4IHNvbGlkIHZhcigtLWNhbGNpdGUtdWktYnJhbmQpO291dGxpbmUtb2Zmc2V0OjBweH0uZGVmYXVsdC10cmlnZ2Vye3Bvc2l0aW9uOnJlbGF0aXZlO2Jsb2NrLXNpemU6MTAwJTtmbGV4OjAgMSBhdXRvO2FsaWduLXNlbGY6c3RyZXRjaH1zbG90W25hbWU9dHJpZ2dlcl06OnNsb3R0ZWQoY2FsY2l0ZS1hY3Rpb24pLGNhbGNpdGUtYWN0aW9uOjpzbG90dGVkKFtzbG90PXRyaWdnZXJdKXtwb3NpdGlvbjpyZWxhdGl2ZTtibG9jay1zaXplOjEwMCU7ZmxleDowIDEgYXV0bzthbGlnbi1zZWxmOnN0cmV0Y2h9Lm1lbnV7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2ZsZXgtd3JhcDpub3dyYXA7b3V0bGluZToycHggc29saWQgdHJhbnNwYXJlbnQ7b3V0bGluZS1vZmZzZXQ6MnB4fVwiO1xuXG5jb25zdCBTVVBQT1JURURfTUVOVV9OQVZfS0VZUyA9IFtcIkFycm93VXBcIiwgXCJBcnJvd0Rvd25cIiwgXCJFbmRcIiwgXCJIb21lXCJdO1xyXG5jb25zdCBBY3Rpb25NZW51ID0gY2xhc3Mge1xyXG4gIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcclxuICAgIHJlZ2lzdGVySW5zdGFuY2UodGhpcywgaG9zdFJlZik7XHJcbiAgICB0aGlzLmNhbGNpdGVBY3Rpb25NZW51T3BlbiA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiY2FsY2l0ZUFjdGlvbk1lbnVPcGVuXCIsIDYpO1xyXG4gICAgdGhpcy5hY3Rpb25FbGVtZW50cyA9IFtdO1xyXG4gICAgdGhpcy5ndWlkID0gYGNhbGNpdGUtYWN0aW9uLW1lbnUtJHtndWlkKCl9YDtcclxuICAgIHRoaXMubWVudUlkID0gYCR7dGhpcy5ndWlkfS1tZW51YDtcclxuICAgIHRoaXMubWVudUJ1dHRvbklkID0gYCR7dGhpcy5ndWlkfS1tZW51LWJ1dHRvbmA7XHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLy9cclxuICAgIC8vICBDb21wb25lbnQgTWV0aG9kc1xyXG4gICAgLy9cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICB0aGlzLmNvbm5lY3RNZW51QnV0dG9uRWwgPSAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHsgbWVudUJ1dHRvbklkLCBtZW51SWQsIG9wZW4sIGxhYmVsIH0gPSB0aGlzO1xyXG4gICAgICBjb25zdCBtZW51QnV0dG9uRWwgPSB0aGlzLnNsb3R0ZWRNZW51QnV0dG9uRWwgfHwgdGhpcy5kZWZhdWx0TWVudUJ1dHRvbkVsO1xyXG4gICAgICBpZiAodGhpcy5tZW51QnV0dG9uRWwgPT09IG1lbnVCdXR0b25FbCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmRpc2Nvbm5lY3RNZW51QnV0dG9uRWwoKTtcclxuICAgICAgdGhpcy5tZW51QnV0dG9uRWwgPSBtZW51QnV0dG9uRWw7XHJcbiAgICAgIHRoaXMuc2V0VG9vbHRpcFJlZmVyZW5jZUVsZW1lbnQoKTtcclxuICAgICAgaWYgKCFtZW51QnV0dG9uRWwpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgbWVudUJ1dHRvbkVsLmFjdGl2ZSA9IG9wZW47XHJcbiAgICAgIG1lbnVCdXR0b25FbC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWNvbnRyb2xzXCIsIG1lbnVJZCk7XHJcbiAgICAgIG1lbnVCdXR0b25FbC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWV4cGFuZGVkXCIsIHRvQXJpYUJvb2xlYW4ob3BlbikpO1xyXG4gICAgICBtZW51QnV0dG9uRWwuc2V0QXR0cmlidXRlKFwiYXJpYS1oYXNwb3B1cFwiLCBcInRydWVcIik7XHJcbiAgICAgIGlmICghbWVudUJ1dHRvbkVsLmlkKSB7XHJcbiAgICAgICAgbWVudUJ1dHRvbkVsLmlkID0gbWVudUJ1dHRvbklkO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICghbWVudUJ1dHRvbkVsLmxhYmVsKSB7XHJcbiAgICAgICAgbWVudUJ1dHRvbkVsLmxhYmVsID0gbGFiZWw7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKCFtZW51QnV0dG9uRWwudGV4dCkge1xyXG4gICAgICAgIG1lbnVCdXR0b25FbC50ZXh0ID0gbGFiZWw7XHJcbiAgICAgIH1cclxuICAgICAgbWVudUJ1dHRvbkVsLmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVyZG93blwiLCB0aGlzLm1lbnVCdXR0b25DbGljayk7XHJcbiAgICAgIG1lbnVCdXR0b25FbC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLm1lbnVCdXR0b25LZXlEb3duKTtcclxuICAgIH07XHJcbiAgICB0aGlzLmRpc2Nvbm5lY3RNZW51QnV0dG9uRWwgPSAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHsgbWVudUJ1dHRvbkVsIH0gPSB0aGlzO1xyXG4gICAgICBpZiAoIW1lbnVCdXR0b25FbCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBtZW51QnV0dG9uRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIHRoaXMubWVudUJ1dHRvbkNsaWNrKTtcclxuICAgICAgbWVudUJ1dHRvbkVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMubWVudUJ1dHRvbktleURvd24pO1xyXG4gICAgfTtcclxuICAgIHRoaXMuc2V0TWVudUJ1dHRvbkVsID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgIGNvbnN0IGFjdGlvbnMgPSBldmVudC50YXJnZXRcclxuICAgICAgICAuYXNzaWduZWRFbGVtZW50cyh7XHJcbiAgICAgICAgZmxhdHRlbjogdHJ1ZVxyXG4gICAgICB9KVxyXG4gICAgICAgIC5maWx0ZXIoKGVsKSA9PiBlbD8ubWF0Y2hlcyhcImNhbGNpdGUtYWN0aW9uXCIpKTtcclxuICAgICAgdGhpcy5zbG90dGVkTWVudUJ1dHRvbkVsID0gYWN0aW9uc1swXTtcclxuICAgICAgdGhpcy5jb25uZWN0TWVudUJ1dHRvbkVsKCk7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5zZXREZWZhdWx0TWVudUJ1dHRvbkVsID0gKGVsKSA9PiB7XHJcbiAgICAgIHRoaXMuZGVmYXVsdE1lbnVCdXR0b25FbCA9IGVsO1xyXG4gICAgICB0aGlzLmNvbm5lY3RNZW51QnV0dG9uRWwoKTtcclxuICAgIH07XHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLy9cclxuICAgIC8vICBQcml2YXRlIE1ldGhvZHNcclxuICAgIC8vXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgdGhpcy5oYW5kbGVDYWxjaXRlQWN0aW9uQ2xpY2sgPSAoKSA9PiB7XHJcbiAgICAgIHRoaXMub3BlbiA9IGZhbHNlO1xyXG4gICAgICB0aGlzLnNldEZvY3VzKCk7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5tZW51QnV0dG9uQ2xpY2sgPSAoZXZlbnQpID0+IHtcclxuICAgICAgaWYgKCFpc1ByaW1hcnlQb2ludGVyQnV0dG9uKGV2ZW50KSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnRvZ2dsZU9wZW4oKTtcclxuICAgIH07XHJcbiAgICB0aGlzLnVwZGF0ZVRvb2x0aXAgPSAoZXZlbnQpID0+IHtcclxuICAgICAgY29uc3QgdG9vbHRpcHMgPSBldmVudC50YXJnZXRcclxuICAgICAgICAuYXNzaWduZWRFbGVtZW50cyh7XHJcbiAgICAgICAgZmxhdHRlbjogdHJ1ZVxyXG4gICAgICB9KVxyXG4gICAgICAgIC5maWx0ZXIoKGVsKSA9PiBlbD8ubWF0Y2hlcyhcImNhbGNpdGUtdG9vbHRpcFwiKSk7XHJcbiAgICAgIHRoaXMudG9vbHRpcEVsID0gdG9vbHRpcHNbMF07XHJcbiAgICAgIHRoaXMuc2V0VG9vbHRpcFJlZmVyZW5jZUVsZW1lbnQoKTtcclxuICAgIH07XHJcbiAgICB0aGlzLnNldFRvb2x0aXBSZWZlcmVuY2VFbGVtZW50ID0gKCkgPT4ge1xyXG4gICAgICBjb25zdCB7IHRvb2x0aXBFbCwgZXhwYW5kZWQsIG1lbnVCdXR0b25FbCwgb3BlbiB9ID0gdGhpcztcclxuICAgICAgaWYgKHRvb2x0aXBFbCkge1xyXG4gICAgICAgIHRvb2x0aXBFbC5yZWZlcmVuY2VFbGVtZW50ID0gIWV4cGFuZGVkICYmICFvcGVuID8gbWVudUJ1dHRvbkVsIDogbnVsbDtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRoaXMudXBkYXRlQWN0aW9uID0gKGFjdGlvbiwgaW5kZXgpID0+IHtcclxuICAgICAgY29uc3QgeyBndWlkLCBhY3RpdmVNZW51SXRlbUluZGV4IH0gPSB0aGlzO1xyXG4gICAgICBjb25zdCBpZCA9IGAke2d1aWR9LWFjdGlvbi0ke2luZGV4fWA7XHJcbiAgICAgIGFjdGlvbi50YWJJbmRleCA9IC0xO1xyXG4gICAgICBhY3Rpb24uc2V0QXR0cmlidXRlKFwicm9sZVwiLCBcIm1lbnVpdGVtXCIpO1xyXG4gICAgICBpZiAoIWFjdGlvbi5pZCkge1xyXG4gICAgICAgIGFjdGlvbi5pZCA9IGlkO1xyXG4gICAgICB9XHJcbiAgICAgIGFjdGlvbi5hY3RpdmUgPSBpbmRleCA9PT0gYWN0aXZlTWVudUl0ZW1JbmRleDtcclxuICAgIH07XHJcbiAgICB0aGlzLnVwZGF0ZUFjdGlvbnMgPSAoYWN0aW9ucykgPT4ge1xyXG4gICAgICBhY3Rpb25zPy5mb3JFYWNoKHRoaXMudXBkYXRlQWN0aW9uKTtcclxuICAgIH07XHJcbiAgICB0aGlzLmhhbmRsZURlZmF1bHRTbG90Q2hhbmdlID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgIGNvbnN0IGFjdGlvbnMgPSBldmVudC50YXJnZXRcclxuICAgICAgICAuYXNzaWduZWRFbGVtZW50cyh7XHJcbiAgICAgICAgZmxhdHRlbjogdHJ1ZVxyXG4gICAgICB9KVxyXG4gICAgICAgIC5maWx0ZXIoKGVsKSA9PiBlbD8ubWF0Y2hlcyhcImNhbGNpdGUtYWN0aW9uXCIpKTtcclxuICAgICAgdGhpcy5hY3Rpb25FbGVtZW50cyA9IGFjdGlvbnM7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5tZW51QnV0dG9uS2V5RG93biA9IChldmVudCkgPT4ge1xyXG4gICAgICBjb25zdCB7IGtleSB9ID0gZXZlbnQ7XHJcbiAgICAgIGNvbnN0IHsgYWN0aW9uRWxlbWVudHMsIGFjdGl2ZU1lbnVJdGVtSW5kZXgsIG9wZW4gfSA9IHRoaXM7XHJcbiAgICAgIGlmICghYWN0aW9uRWxlbWVudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChpc0FjdGl2YXRpb25LZXkoa2V5KSkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgaWYgKCFvcGVuKSB7XHJcbiAgICAgICAgICB0aGlzLnRvZ2dsZU9wZW4oKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgYWN0aW9uID0gYWN0aW9uRWxlbWVudHNbYWN0aXZlTWVudUl0ZW1JbmRleF07XHJcbiAgICAgICAgYWN0aW9uID8gYWN0aW9uLmNsaWNrKCkgOiB0aGlzLnRvZ2dsZU9wZW4oZmFsc2UpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChrZXkgPT09IFwiVGFiXCIpIHtcclxuICAgICAgICB0aGlzLm9wZW4gPSBmYWxzZTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICAgIHRoaXMudG9nZ2xlT3BlbihmYWxzZSk7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5oYW5kbGVBY3Rpb25OYXZpZ2F0aW9uKGV2ZW50LCBrZXksIGFjdGlvbkVsZW1lbnRzKTtcclxuICAgIH07XHJcbiAgICB0aGlzLmhhbmRsZUFjdGlvbk5hdmlnYXRpb24gPSAoZXZlbnQsIGtleSwgYWN0aW9ucykgPT4ge1xyXG4gICAgICBpZiAoIXRoaXMuaXNWYWxpZEtleShrZXksIFNVUFBPUlRFRF9NRU5VX05BVl9LRVlTKSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBpZiAoIXRoaXMub3Blbikge1xyXG4gICAgICAgIHRoaXMudG9nZ2xlT3BlbigpO1xyXG4gICAgICAgIGlmIChrZXkgPT09IFwiSG9tZVwiIHx8IGtleSA9PT0gXCJBcnJvd0Rvd25cIikge1xyXG4gICAgICAgICAgdGhpcy5hY3RpdmVNZW51SXRlbUluZGV4ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGtleSA9PT0gXCJFbmRcIiB8fCBrZXkgPT09IFwiQXJyb3dVcFwiKSB7XHJcbiAgICAgICAgICB0aGlzLmFjdGl2ZU1lbnVJdGVtSW5kZXggPSBhY3Rpb25zLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBpZiAoa2V5ID09PSBcIkhvbWVcIikge1xyXG4gICAgICAgIHRoaXMuYWN0aXZlTWVudUl0ZW1JbmRleCA9IDA7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGtleSA9PT0gXCJFbmRcIikge1xyXG4gICAgICAgIHRoaXMuYWN0aXZlTWVudUl0ZW1JbmRleCA9IGFjdGlvbnMubGVuZ3RoIC0gMTtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBjdXJyZW50SW5kZXggPSB0aGlzLmFjdGl2ZU1lbnVJdGVtSW5kZXg7XHJcbiAgICAgIGlmIChrZXkgPT09IFwiQXJyb3dVcFwiKSB7XHJcbiAgICAgICAgdGhpcy5hY3RpdmVNZW51SXRlbUluZGV4ID0gZ2V0Um91bmRSb2JpbkluZGV4KE1hdGgubWF4KGN1cnJlbnRJbmRleCAtIDEsIC0xKSwgYWN0aW9ucy5sZW5ndGgpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChrZXkgPT09IFwiQXJyb3dEb3duXCIpIHtcclxuICAgICAgICB0aGlzLmFjdGl2ZU1lbnVJdGVtSW5kZXggPSBnZXRSb3VuZFJvYmluSW5kZXgoY3VycmVudEluZGV4ICsgMSwgYWN0aW9ucy5sZW5ndGgpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhpcy50b2dnbGVPcGVuRW5kID0gKCkgPT4ge1xyXG4gICAgICB0aGlzLnNldEZvY3VzKCk7XHJcbiAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNhbGNpdGVQb3BvdmVyT3BlblwiLCB0aGlzLnRvZ2dsZU9wZW5FbmQpO1xyXG4gICAgfTtcclxuICAgIHRoaXMudG9nZ2xlT3BlbiA9ICh2YWx1ZSA9ICF0aGlzLm9wZW4pID0+IHtcclxuICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKFwiY2FsY2l0ZVBvcG92ZXJPcGVuXCIsIHRoaXMudG9nZ2xlT3BlbkVuZCk7XHJcbiAgICAgIHRoaXMub3BlbiA9IHZhbHVlO1xyXG4gICAgfTtcclxuICAgIHRoaXMuZXhwYW5kZWQgPSBmYWxzZTtcclxuICAgIHRoaXMuZmxpcFBsYWNlbWVudHMgPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLmxhYmVsID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5vcGVuID0gZmFsc2U7XHJcbiAgICB0aGlzLm92ZXJsYXlQb3NpdGlvbmluZyA9IFwiYWJzb2x1dGVcIjtcclxuICAgIHRoaXMucGxhY2VtZW50ID0gXCJhdXRvXCI7XHJcbiAgICB0aGlzLnNjYWxlID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5tZW51QnV0dG9uRWwgPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLmFjdGl2ZU1lbnVJdGVtSW5kZXggPSAtMTtcclxuICB9XHJcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vICBMaWZlY3ljbGVcclxuICAvL1xyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgY29tcG9uZW50V2lsbExvYWQoKSB7XHJcbiAgICBzZXRVcExvYWRhYmxlQ29tcG9uZW50KHRoaXMpO1xyXG4gIH1cclxuICBjb21wb25lbnREaWRMb2FkKCkge1xyXG4gICAgc2V0Q29tcG9uZW50TG9hZGVkKHRoaXMpO1xyXG4gIH1cclxuICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcclxuICAgIHRoaXMuZGlzY29ubmVjdE1lbnVCdXR0b25FbCgpO1xyXG4gIH1cclxuICBleHBhbmRlZEhhbmRsZXIoKSB7XHJcbiAgICB0aGlzLm9wZW4gPSBmYWxzZTtcclxuICAgIHRoaXMuc2V0VG9vbHRpcFJlZmVyZW5jZUVsZW1lbnQoKTtcclxuICB9XHJcbiAgb3BlbkhhbmRsZXIob3Blbikge1xyXG4gICAgdGhpcy5hY3RpdmVNZW51SXRlbUluZGV4ID0gdGhpcy5vcGVuID8gMCA6IC0xO1xyXG4gICAgaWYgKHRoaXMubWVudUJ1dHRvbkVsKSB7XHJcbiAgICAgIHRoaXMubWVudUJ1dHRvbkVsLmFjdGl2ZSA9IG9wZW47XHJcbiAgICB9XHJcbiAgICB0aGlzLmNhbGNpdGVBY3Rpb25NZW51T3Blbi5lbWl0KCk7XHJcbiAgICB0aGlzLnNldFRvb2x0aXBSZWZlcmVuY2VFbGVtZW50KCk7XHJcbiAgfVxyXG4gIGNsb3NlQ2FsY2l0ZUFjdGlvbk1lbnVPbkNsaWNrKGV2ZW50KSB7XHJcbiAgICBpZiAoIWlzUHJpbWFyeVBvaW50ZXJCdXR0b24oZXZlbnQpKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IGNvbXBvc2VkUGF0aCA9IGV2ZW50LmNvbXBvc2VkUGF0aCgpO1xyXG4gICAgaWYgKGNvbXBvc2VkUGF0aC5pbmNsdWRlcyh0aGlzLmVsKSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLm9wZW4gPSBmYWxzZTtcclxuICB9XHJcbiAgYWN0aXZlTWVudUl0ZW1JbmRleEhhbmRsZXIoKSB7XHJcbiAgICB0aGlzLnVwZGF0ZUFjdGlvbnModGhpcy5hY3Rpb25FbGVtZW50cyk7XHJcbiAgfVxyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyAgTWV0aG9kc1xyXG4gIC8vXHJcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvKiogU2V0cyBmb2N1cyBvbiB0aGUgY29tcG9uZW50LiAqL1xyXG4gIGFzeW5jIHNldEZvY3VzKCkge1xyXG4gICAgYXdhaXQgY29tcG9uZW50TG9hZGVkKHRoaXMpO1xyXG4gICAgZm9jdXNFbGVtZW50KHRoaXMubWVudUJ1dHRvbkVsKTtcclxuICB9XHJcbiAgcmVuZGVyTWVudUJ1dHRvbigpIHtcclxuICAgIGNvbnN0IHsgbGFiZWwsIHNjYWxlLCBleHBhbmRlZCB9ID0gdGhpcztcclxuICAgIGNvbnN0IG1lbnVCdXR0b25TbG90ID0gKGgoXCJzbG90XCIsIHsgbmFtZTogU0xPVFMudHJpZ2dlciwgb25TbG90Y2hhbmdlOiB0aGlzLnNldE1lbnVCdXR0b25FbCB9LCBoKFwiY2FsY2l0ZS1hY3Rpb25cIiwgeyBjbGFzczogQ1NTLmRlZmF1bHRUcmlnZ2VyLCBpY29uOiBJQ09OUy5tZW51LCByZWY6IHRoaXMuc2V0RGVmYXVsdE1lbnVCdXR0b25FbCwgc2NhbGU6IHNjYWxlLCB0ZXh0OiBsYWJlbCwgdGV4dEVuYWJsZWQ6IGV4cGFuZGVkIH0pKSk7XHJcbiAgICByZXR1cm4gbWVudUJ1dHRvblNsb3Q7XHJcbiAgfVxyXG4gIHJlbmRlck1lbnVJdGVtcygpIHtcclxuICAgIGNvbnN0IHsgYWN0aW9uRWxlbWVudHMsIGFjdGl2ZU1lbnVJdGVtSW5kZXgsIG9wZW4sIG1lbnVJZCwgbWVudUJ1dHRvbkVsLCBsYWJlbCwgcGxhY2VtZW50LCBvdmVybGF5UG9zaXRpb25pbmcsIGZsaXBQbGFjZW1lbnRzIH0gPSB0aGlzO1xyXG4gICAgY29uc3QgYWN0aXZlQWN0aW9uID0gYWN0aW9uRWxlbWVudHNbYWN0aXZlTWVudUl0ZW1JbmRleF07XHJcbiAgICBjb25zdCBhY3RpdmVEZXNjZW5kYW50SWQgPSBhY3RpdmVBY3Rpb24/LmlkIHx8IG51bGw7XHJcbiAgICByZXR1cm4gKGgoXCJjYWxjaXRlLXBvcG92ZXJcIiwgeyBmbGlwUGxhY2VtZW50czogZmxpcFBsYWNlbWVudHMsIGZvY3VzVHJhcERpc2FibGVkOiB0cnVlLCBsYWJlbDogbGFiZWwsIG9mZnNldERpc3RhbmNlOiAwLCBvcGVuOiBvcGVuLCBvdmVybGF5UG9zaXRpb25pbmc6IG92ZXJsYXlQb3NpdGlvbmluZywgcGxhY2VtZW50OiBwbGFjZW1lbnQsIHBvaW50ZXJEaXNhYmxlZDogdHJ1ZSwgcmVmZXJlbmNlRWxlbWVudDogbWVudUJ1dHRvbkVsIH0sIGgoXCJkaXZcIiwgeyBcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiOiBhY3RpdmVEZXNjZW5kYW50SWQsIFwiYXJpYS1sYWJlbGxlZGJ5XCI6IG1lbnVCdXR0b25FbD8uaWQsIGNsYXNzOiBDU1MubWVudSwgaWQ6IG1lbnVJZCwgb25DbGljazogdGhpcy5oYW5kbGVDYWxjaXRlQWN0aW9uQ2xpY2ssIHJvbGU6IFwibWVudVwiLCB0YWJJbmRleDogLTEgfSwgaChcInNsb3RcIiwgeyBvblNsb3RjaGFuZ2U6IHRoaXMuaGFuZGxlRGVmYXVsdFNsb3RDaGFuZ2UgfSkpKSk7XHJcbiAgfVxyXG4gIHJlbmRlcigpIHtcclxuICAgIHJldHVybiAoaChGcmFnbWVudCwgbnVsbCwgdGhpcy5yZW5kZXJNZW51QnV0dG9uKCksIHRoaXMucmVuZGVyTWVudUl0ZW1zKCksIGgoXCJzbG90XCIsIHsgbmFtZTogU0xPVFMudG9vbHRpcCwgb25TbG90Y2hhbmdlOiB0aGlzLnVwZGF0ZVRvb2x0aXAgfSkpKTtcclxuICB9XHJcbiAgaXNWYWxpZEtleShrZXksIHN1cHBvcnRlZEtleXMpIHtcclxuICAgIHJldHVybiAhIXN1cHBvcnRlZEtleXMuZmluZCgoaykgPT4gayA9PT0ga2V5KTtcclxuICB9XHJcbiAgZ2V0IGVsKCkgeyByZXR1cm4gZ2V0RWxlbWVudCh0aGlzKTsgfVxyXG4gIHN0YXRpYyBnZXQgd2F0Y2hlcnMoKSB7IHJldHVybiB7XHJcbiAgICBcImV4cGFuZGVkXCI6IFtcImV4cGFuZGVkSGFuZGxlclwiXSxcclxuICAgIFwib3BlblwiOiBbXCJvcGVuSGFuZGxlclwiXSxcclxuICAgIFwiYWN0aXZlTWVudUl0ZW1JbmRleFwiOiBbXCJhY3RpdmVNZW51SXRlbUluZGV4SGFuZGxlclwiXVxyXG4gIH07IH1cclxufTtcclxuQWN0aW9uTWVudS5zdHlsZSA9IGFjdGlvbk1lbnVDc3M7XG5cbmV4cG9ydCB7IEFjdGlvbk1lbnUgYXMgY2FsY2l0ZV9hY3Rpb25fbWVudSB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1jYWxjaXRlLWFjdGlvbi1tZW51LmVudHJ5LmpzLm1hcCIsIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvYmxvYi9tYXN0ZXIvTElDRU5TRS5tZCBmb3IgZGV0YWlscy5cbiAqIHYxLjAuNVxuICovXG5mdW5jdGlvbiBpc0FjdGl2YXRpb25LZXkoa2V5KSB7XG4gIHJldHVybiBrZXkgPT09IFwiRW50ZXJcIiB8fCBrZXkgPT09IFwiIFwiO1xufVxuY29uc3QgbnVtYmVyS2V5cyA9IFtcIjBcIiwgXCIxXCIsIFwiMlwiLCBcIjNcIiwgXCI0XCIsIFwiNVwiLCBcIjZcIiwgXCI3XCIsIFwiOFwiLCBcIjlcIl07XG5cbmV4cG9ydCB7IGlzQWN0aXZhdGlvbktleSBhcyBpLCBudW1iZXJLZXlzIGFzIG4gfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9a2V5LWI3NTQ5MWM0LmpzLm1hcCIsIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvYmxvYi9tYXN0ZXIvTElDRU5TRS5tZCBmb3IgZGV0YWlscy5cbiAqIHYxLjAuNVxuICovXG5jb25zdCByZXNvbHZlTWFwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHByb21pc2VNYXAgPSBuZXcgV2Vha01hcCgpO1xuLyoqXG4gKiBUaGlzIGhlbHBlciB1dGlsIHNldHMgdXAgdGhlIGNvbXBvbmVudCBmb3IgdGhlIGFiaWxpdHkgdG8ga25vdyB3aGVuIHRoZSBjb21wb25lbnQgaGFzIGJlZW4gbG9hZGVkLlxuICpcbiAqIFRoaXMgc2hvdWxkIGJlIHVzZWQgaW4gdGhlIGBjb21wb25lbnRXaWxsTG9hZGAgbGlmZWN5Y2xlIGhvb2suXG4gKlxuICogYGBgXG4gKiBjb21wb25lbnRXaWxsTG9hZCgpOiB2b2lkIHtcbiAqICAgc2V0VXBMb2FkYWJsZUNvbXBvbmVudCh0aGlzKTtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBjb21wb25lbnRcbiAqL1xuZnVuY3Rpb24gc2V0VXBMb2FkYWJsZUNvbXBvbmVudChjb21wb25lbnQpIHtcbiAgcHJvbWlzZU1hcC5zZXQoY29tcG9uZW50LCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gcmVzb2x2ZU1hcC5zZXQoY29tcG9uZW50LCByZXNvbHZlKSkpO1xufVxuLyoqXG4gKiBUaGlzIGhlbHBlciB1dGlsIGxldHMgdGhlIGxvYWRhYmxlIGNvbXBvbmVudCBrbm93IHRoYXQgaXQgaXMgbm93IGxvYWRlZC5cbiAqXG4gKiBUaGlzIHNob3VsZCBiZSB1c2VkIGluIHRoZSBgY29tcG9uZW50RGlkTG9hZGAgbGlmZWN5Y2xlIGhvb2suXG4gKlxuICogYGBgXG4gKiBjb21wb25lbnREaWRMb2FkKCk6IHZvaWQge1xuICogICBzZXRDb21wb25lbnRMb2FkZWQodGhpcyk7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gY29tcG9uZW50XG4gKi9cbmZ1bmN0aW9uIHNldENvbXBvbmVudExvYWRlZChjb21wb25lbnQpIHtcbiAgcmVzb2x2ZU1hcC5nZXQoY29tcG9uZW50KSgpO1xufVxuLyoqXG4gKiBUaGlzIGhlbHBlciB1dGlsIGNhbiBiZSB1c2VkIHRvIGVuc3VyZSBhIGNvbXBvbmVudCBoYXMgYmVlbiBsb2FkZWQgKFRoZSBcImNvbXBvbmVudERpZExvYWRcIiBzdGVuY2lsIGxpZmVjeWNsZSBtZXRob2QgaGFzIGJlZW4gY2FsbGVkKS5cbiAqXG4gKiBSZXF1aXJlcyBcInNldFVwTG9hZGFibGVDb21wb25lbnRcIiBhbmQgXCJzZXRDb21wb25lbnRMb2FkZWRcIiB0byBiZSBjYWxsZWQgZmlyc3QuXG4gKlxuICogQSBjb21wb25lbnQgZGV2ZWxvcGVyIGNhbiBhd2FpdCB0aGlzIG1ldGhvZCBiZWZvcmUgcHJvY2VlZGluZyB3aXRoIGFueSBsb2dpYyB0aGF0IHJlcXVpcmVzIGEgY29tcG9uZW50IHRvIGJlIGxvYWRlZCBmaXJzdC5cbiAqXG4gKiBgYGBcbiAqIGFzeW5jIHNldEZvY3VzKCk6IFByb21pc2U8dm9pZD4ge1xuICogICBhd2FpdCBjb21wb25lbnRMb2FkZWQodGhpcyk7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gY29tcG9uZW50XG4gKiBAcmV0dXJucyBQcm9taXNlPHZvaWQ+XG4gKi9cbmZ1bmN0aW9uIGNvbXBvbmVudExvYWRlZChjb21wb25lbnQpIHtcbiAgcmV0dXJuIHByb21pc2VNYXAuZ2V0KGNvbXBvbmVudCk7XG59XG5cbmV4cG9ydCB7IHNldFVwTG9hZGFibGVDb21wb25lbnQgYXMgYSwgY29tcG9uZW50TG9hZGVkIGFzIGMsIHNldENvbXBvbmVudExvYWRlZCBhcyBzIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxvYWRhYmxlLWNjMTRkNzI4LmpzLm1hcCIsIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvYmxvYi9tYXN0ZXIvTElDRU5TRS5tZCBmb3IgZGV0YWlscy5cbiAqIHYxLjAuNVxuICovXG5jb25zdCBDU1MgPSB7XG4gIG1lbnU6IFwibWVudVwiLFxuICBkZWZhdWx0VHJpZ2dlcjogXCJkZWZhdWx0LXRyaWdnZXJcIlxufTtcbmNvbnN0IFNMT1RTID0ge1xuICB0b29sdGlwOiBcInRvb2x0aXBcIixcbiAgdHJpZ2dlcjogXCJ0cmlnZ2VyXCJcbn07XG5jb25zdCBJQ09OUyA9IHtcbiAgbWVudTogXCJlbGxpcHNpc1wiXG59O1xuXG5leHBvcnQgeyBDU1MgYXMgQywgSUNPTlMgYXMgSSwgU0xPVFMgYXMgUyB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZXNvdXJjZXMtNWQyNWY5NzYuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9