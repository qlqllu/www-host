"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_geocod-af2d29"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/geocode-7eb7c0df.js":
/*!*************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/geocode-7eb7c0df.js ***!
  \*************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ getAnalyzedLayerInfo),
/* harmony export */   b: () => (/* binding */ getGeocoderInfo),
/* harmony export */   c: () => (/* binding */ countryCodes),
/* harmony export */   d: () => (/* binding */ getSourceCountry),
/* harmony export */   e: () => (/* binding */ getLocationPublishParameters),
/* harmony export */   f: () => (/* binding */ findGeocoder),
/* harmony export */   g: () => (/* binding */ getAllowedFieldTypes),
/* harmony export */   i: () => (/* binding */ isEsriWorldGeocoder)
/* harmony export */ });
/* harmony import */ var _functional_c82f5ab9_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./functional-c82f5ab9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-c82f5ab9.js");
/* harmony import */ var _privileges_ccd5f37d_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./privileges-ccd5f37d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/privileges-ccd5f37d.js");
/* harmony import */ var _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./add-item-97d577a9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/add-item-97d577a9.js");
/* harmony import */ var _privileges_35590eb4_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./privileges-35590eb4.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/privileges-35590eb4.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */





const countryCodes = {
  WORLD: "World",
  EU: "Europe",
  AD: "Andorra",
  AE: "United Arab Emirates",
  AF: "Afghanistan",
  AG: "Antigua and Barbuda",
  AI: "Anguilla",
  AL: "Albania",
  AM: "Armenia",
  AO: "Angola",
  AQ: "Antarctica",
  AR: "Argentina",
  AS: "American Samoa",
  AT: "Austria",
  AU: "Australia",
  AW: "Aruba",
  AZ: "Azerbaijan",
  BA: "Bosnia and Herzegovina",
  BB: "Barbados",
  BD: "Bangladesh",
  BE: "Belgium",
  BF: "Burkina Faso",
  BG: "Bulgaria",
  BH: "Bahrain",
  BI: "Burundi",
  BJ: "Benin",
  BL: "Saint Barthélemy",
  BM: "Bermuda",
  BN: "Brunei Darussalam",
  BO: "Bolivia, Plurinational State of",
  BQ: "Bonaire, Sint Eustatius and Saba",
  BR: "Brazil",
  BS: "Bahamas",
  BT: "Bhutan",
  BV: "Bouvet Island",
  BW: "Botswana",
  BY: "Belarus",
  BZ: "Belize",
  CA: "Canada",
  CD: "Congo, the Democratic Republic of the",
  CF: "Central African Republic",
  CG: "Congo",
  CH: "Switzerland",
  CI: "Côte d'Ivoire",
  CK: "Cook Islands",
  CL: "Chile",
  CM: "Cameroon",
  CN: "China",
  CO: "Colombia",
  CR: "Costa Rica",
  CU: "Cuba",
  CV: "Cape Verde",
  CW: "Curaçao",
  CY: "Cyprus",
  CZ: "Czech Republic",
  DE: "Germany",
  DJ: "Djibouti",
  DK: "Denmark",
  DM: "Dominica",
  DO: "Dominican Republic",
  DZ: "Algeria",
  EC: "Ecuador",
  EE: "Estonia",
  EG: "Egypt",
  EH: "Western Sahara",
  ER: "Eritrea",
  ES: "Spain",
  ET: "Ethiopia",
  FI: "Finland",
  FJ: "Fiji",
  FK: "Falkland Islands (Malvinas)",
  FM: "Micronesia, Federated States of",
  FO: "Faroe Islands",
  FR: "France",
  GA: "Gabon",
  GB: "United Kingdom",
  GD: "Grenada",
  GE: "Georgia",
  GF: "French Guiana",
  GG: "Guernsey",
  GH: "Ghana",
  GI: "Gibraltar",
  GL: "Greenland",
  GM: "Gambia",
  GN: "Guinea",
  GP: "Guadeloupe",
  GQ: "Equatorial Guinea",
  GR: "Greece",
  GS: "South Georgia and the South Sandwich Islands",
  GT: "Guatemala",
  GW: "Guinea-Bissau",
  GY: "Guyana",
  HK: "Hong Kong",
  HM: "Heard Island and McDonald Islands",
  HN: "Honduras",
  HR: "Croatia",
  HT: "Haiti",
  HU: "Hungary",
  ID: "Indonesia",
  IE: "Ireland",
  IL: "Israel",
  IM: "Isle of Man",
  IN: "India",
  IO: "British Indian Ocean Territory",
  IQ: "Iraq",
  IR: "Iran, Islamic Republic of",
  IS: "Iceland",
  IT: "Italy",
  JE: "Jersey",
  JM: "Jamaica",
  JO: "Jordan",
  JP: "Japan",
  KE: "Kenya",
  KG: "Kyrgyzstan",
  KH: "Cambodia",
  KI: "Kiribati",
  KM: "Comoros",
  KN: "Saint Kitts and Nevis",
  KP: "Korea, Democratic People's Republic of",
  KR: "Korea, Republic of",
  KW: "Kuwait",
  KY: "Cayman Islands",
  KZ: "Kazakhstan",
  LA: "Lao People's Democratic Republic",
  LB: "Lebanon",
  LC: "Saint Lucia",
  LI: "Liechtenstein",
  LK: "Sri Lanka",
  LR: "Liberia",
  LS: "Lesotho",
  LT: "Lithuania",
  LU: "Luxembourg",
  LV: "Latvia",
  LY: "Libya",
  MA: "Morocco",
  MC: "Monaco",
  MD: "Moldova, Republic of",
  ME: "Montenegro",
  MF: "Saint Martin (French part)",
  MG: "Madagascar",
  MH: "Marshall Islands",
  MK: "Macedonia, the former Yugoslav Republic of",
  ML: "Mali",
  MM: "Myanmar",
  MN: "Mongolia",
  MO: "Macao",
  MP: "Northern Mariana Islands",
  MQ: "Martinique",
  MR: "Mauritania",
  MS: "Montserrat",
  MT: "Malta",
  MU: "Mauritius",
  MV: "Maldives",
  MW: "Malawi",
  MX: "Mexico",
  MY: "Malaysia",
  MZ: "Mozambique",
  NA: "Namibia",
  NC: "New Caledonia",
  NE: "Niger",
  NG: "Nigeria",
  NI: "Nicaragua",
  NL: "Netherlands",
  NO: "Norway",
  NP: "Nepal",
  NR: "Nauru",
  NU: "Niue",
  NZ: "New Zealand",
  OM: "Oman",
  PA: "Panama",
  PE: "Peru",
  PF: "French Polynesia",
  PG: "Papua New Guinea",
  PH: "Philippines",
  PK: "Pakistan",
  PL: "Poland",
  PM: "Saint Pierre and Miquelon",
  PN: "Pitcairn",
  PS: "Palestine, State of",
  PT: "Portugal",
  PW: "Palau",
  PY: "Paraguay",
  QA: "Qatar",
  RE: "Réunion",
  RO: "Romania",
  RS: "Serbia",
  RU: "Russian Federation",
  RW: "Rwanda",
  SA: "Saudi Arabia",
  SB: "Solomon Islands",
  SC: "Seychelles",
  SD: "Sudan",
  SE: "Sweden",
  SG: "Singapore",
  SH: "Saint Helena, Ascension and Tristan da Cunha",
  SI: "Slovenia",
  SJ: "Svalbard and Jan Mayen",
  SK: "Slovakia",
  SL: "Sierra Leone",
  SM: "San Marino",
  SN: "Senegal",
  SO: "Somalia",
  SR: "Suriname",
  SS: "South Sudan",
  ST: "Sao Tome and Principe",
  SV: "El Salvador",
  SX: "Sint Maarten (Dutch part)",
  SY: "Syrian Arab Republic",
  SZ: "Swaziland",
  TC: "Turks and Caicos Islands",
  TD: "Chad",
  TF: "French Southern Territories",
  TG: "Togo",
  TH: "Thailand",
  TJ: "Tajikistan",
  TK: "Tokelau",
  TL: "Timor-Leste",
  TM: "Turkmenistan",
  TN: "Tunisia",
  TO: "Tonga",
  TR: "Turkey",
  TT: "Trinidad and Tobago",
  TV: "Tuvalu",
  TW: "Taiwan, Province of China",
  TZ: "Tanzania, United Republic of",
  UA: "Ukraine",
  UG: "Uganda",
  UM: "United States Minor Outlying Islands",
  US: "United States",
  UY: "Uruguay",
  UZ: "Uzbekistan",
  VA: "Holy See (Vatican City State)",
  VC: "Saint Vincent and the Grenadines",
  VE: "Venezuela, Bolivarian Republic of",
  VG: "Virgin Islands, British",
  VN: "Vietnam",
  VU: "Vanuatu",
  WF: "Wallis and Futuna",
  WS: "Samoa",
  XK: "Republic of Kosovo",
  YE: "Yemen",
  YT: "Mayotte",
  ZA: "South Africa",
  ZM: "Zambia",
  ZW: "Zimbabwe"
};

/**
 * Forms publishParameters correctly for publish tasks involving geocoding
 */
function getLocationPublishParameters(addressType, appendWorkflow) {
  const { sourceCountry, locationType, analyzeResults, candidateFieldsType, coordinateFieldType, type, standardizedFieldNames, selectedFields } = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a;
  const layerInfo = getAnalyzedLayerInfo();
  const fields = !appendWorkflow ? Object.values(selectedFields) : _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.backupLayerFields;
  const locationPublishParams = Object.assign(Object.assign({ locationType: locationType || "address", sourceCountry,
    candidateFieldsType }, (locationType === "coordinates" && getCoordinateFields(fields, coordinateFieldType))), (locationType === "address" && { addressFields: getAddressFields(fields, addressType, standardizedFieldNames) }));
  let publishParameters;
  if (!appendWorkflow && type === "Microsoft Excel") {
    publishParameters = Object.assign(Object.assign({}, analyzeResults.publishParameters), { layers: [Object.assign(Object.assign({}, layerInfo), locationPublishParams)], hasStaticData: true, maxRecordCount: 2000, layerInfo: { capabilities: "Query" } });
  }
  else {
    publishParameters = Object.assign(Object.assign({}, analyzeResults.publishParameters), locationPublishParams);
  }
  return publishParameters;
}
function getAddressFields(fields, addressType, standardizedFieldNames) {
  if (addressType === "Single") {
    const singleLineAddressField = Object.keys(standardizedFieldNames)[0] || "Address";
    const addressField = fields.find(({ locationType }) => locationType === singleLineAddressField || (locationType === null || locationType === void 0 ? void 0 : locationType.toLowerCase()) === "address");
    return { [singleLineAddressField]: (addressField === null || addressField === void 0 ? void 0 : addressField.name) || "" };
  }
  return fields.reduce((acc, field) => {
    if (field.locationType !== "unknown") {
      acc[field.locationType] = field.name;
    }
    return acc;
  }, {});
}
/**
 * Fetch the correct layerInfo from the current CSV/Excel analyzeResults
 */
function getAnalyzedLayerInfo(customAnalyzeResults, analyzeSelectedLayer) {
  var _a, _b, _c, _d, _e, _f, _g;
  const { type, analyzeResults = customAnalyzeResults, selectedSheet } = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a; //set selectedSheet
  const publishParameters = analyzeResults === null || analyzeResults === void 0 ? void 0 : analyzeResults.publishParameters;
  if (!!analyzeSelectedLayer) {
    if (type === "CSV") {
      return publishParameters === null || publishParameters === void 0 ? void 0 : publishParameters.layerInfo;
    }
    else {
      return (_b = (_a = publishParameters === null || publishParameters === void 0 ? void 0 : publishParameters.layers) === null || _a === void 0 ? void 0 : _a[selectedSheet]) !== null && _b !== void 0 ? _b : (_c = publishParameters === null || publishParameters === void 0 ? void 0 : publishParameters.layers) === null || _c === void 0 ? void 0 : _c[0];
    }
  }
  else {
    switch (type) {
      case "Microsoft Excel":
        return (_e = (_d = publishParameters === null || publishParameters === void 0 ? void 0 : publishParameters.layers) === null || _d === void 0 ? void 0 : _d[selectedSheet]) !== null && _e !== void 0 ? _e : (_f = publishParameters === null || publishParameters === void 0 ? void 0 : publishParameters.layers) === null || _f === void 0 ? void 0 : _f[0];
      case "GeoJson":
        return (_g = publishParameters === null || publishParameters === void 0 ? void 0 : publishParameters.layers) === null || _g === void 0 ? void 0 : _g[0];
      default:
        return publishParameters === null || publishParameters === void 0 ? void 0 : publishParameters.layerInfo;
    }
  }
}
/**
 * Given a field type, find which other field types can be successfully selected
 * https://devtopia.esri.com/WebGIS/arcgis-portal-app/issues/43974#issuecomment-4067420
 */
function getAllowedFieldTypes(fieldType) {
  switch (fieldType) {
    case "esriFieldTypeBigInteger":
      return ["esriFieldTypeBigInteger", "esriFieldTypeDouble", "esriFieldTypeString"];
    case "esriFieldTypeSmallInteger":
      return [
        "esriFieldTypeSmallInteger",
        "esriFieldTypeInteger",
        "esriFieldTypeSingle",
        "esriFieldTypeDouble",
        "esriFieldTypeString"
      ];
    case "esriFieldTypeInteger":
      return ["esriFieldTypeInteger", "esriFieldTypeSingle", "esriFieldTypeDouble", "esriFieldTypeString"];
    case "esriFieldTypeSingle":
      return ["esriFieldTypeSingle", "esriFieldTypeDouble", "esriFieldTypeString"];
    case "esriFieldTypeDouble":
      return ["esriFieldTypeDouble", "esriFieldTypeString"];
    case "esriFieldTypeDate":
      return ["esriFieldTypeDate", "esriFieldTypeString"];
    case "esriFieldTypeDateOnly":
      return ["esriFieldTypeDateOnly", "esriFieldTypeString"];
    case "esriFieldTypeTimeOnly":
      return ["esriFieldTypeTimeOnly", "esriFieldTypeString"];
    case "esriFieldTypeTimestampOffset":
      return ["esriFieldTypeTimestampOffset", "esriFieldTypeString"];
    case "esriFieldTypeOID":
      return ["esriFieldTypeOID", "esriFieldTypeInteger", "esriFieldTypeString"];
    case "esriFieldTypeString":
    default:
      return ["esriFieldTypeString"];
  }
}
function getCoordinateFields(fields, coordinateFieldType) {
  return fields.reduce((acc, field) => {
    switch (field.locationType) {
      case "latitude":
        acc.latitudeFieldName = field.name;
        if (!coordinateFieldType) {
          acc.coordinateFieldType = "LatitudeAndLongitude";
        }
        break;
      case "longitude":
        acc.longitudeFieldName = field.name;
        if (!coordinateFieldType) {
          acc.coordinateFieldType = "LatitudeAndLongitude";
        }
        break;
      case "mgrs":
        if (coordinateFieldType === "MGRS") {
          acc.coordinateFieldName = field.name;
          if (!coordinateFieldType) {
            acc.coordinateFieldType = "MGRS";
          }
        }
        break;
      case "usng":
        if (coordinateFieldType === "USNG") {
          acc.coordinateFieldName = field.name;
          if (!coordinateFieldType) {
            acc.coordinateFieldType = "USNG";
          }
        }
        break;
    }
    return acc;
  }, { coordinateFieldType });
}
function findGeocoder(geocodeServiceUrl, geocodeServers) {
  const matching = geocodeServers === null || geocodeServers === void 0 ? void 0 : geocodeServers.filter((geocoder) => geocoder.url === geocodeServiceUrl);
  return (matching === null || matching === void 0 ? void 0 : matching.length) ? matching.shift() : null;
}
/**
 * Get a list of geocoders that support batch geocoding
 */
function filterBatchGeocoders(geocoders, cantBatchGeocode, isPortal) {
  // retrieve only the batch geocoders from the list of geocoders
  return geocoders.filter((oldGeocoder) => {
    // Spread to avoid mutating the original array
    const geocoder = Object.assign({}, oldGeocoder);
    const isWorldGeocodeServer = isEsriWorldGeocoderNoProxy(geocoder === null || geocoder === void 0 ? void 0 : geocoder.url);
    const isWorldGeocodeServerProxy = isEsriWorldGeocoderThroughProxy(geocoder === null || geocoder === void 0 ? void 0 : geocoder.url);
    // if name not set and is Esri World Geocoder, set name
    if (isWorldGeocodeServer || isWorldGeocodeServerProxy) {
      if (!(0,_functional_c82f5ab9_js__WEBPACK_IMPORTED_MODULE_0__.i)(geocoder.name)) {
        geocoder.name = "ArcGIS World Geocoding Service"; // always use official Esri geocoder name
      }
      else {
        if (geocoder.name === "Esri World Geocoder") {
          geocoder.name = "ArcGIS World Geocoding Service"; // use official Esri geocoder name
        } // else keep it; might be the translated old name though
      }
    }
    if (isWorldGeocodeServer && (isPortal || cantBatchGeocode)) {
      return false; // AGO World Geocode server (without service proxy) can't be used for batch geocoding in portal
    }
    else if ((0,_functional_c82f5ab9_js__WEBPACK_IMPORTED_MODULE_0__.i)(geocoder.batch)) {
      return !!geocoder.batch;
    }
    else {
      return isWorldGeocodeServer || isWorldGeocodeServerProxy;
    }
  });
}
function isEsriWorldGeocoderThroughProxy(url = "") {
  return !!(url === null || url === void 0 ? void 0 : url.match(/(arcgis\.com.*\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/gi));
}
function isEsriWorldGeocoderNoProxy(url = "") {
  return !!(url === null || url === void 0 ? void 0 : url.match(/(arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi));
}
function isEsriWorldGeocoder(url) {
  return !!url && (isEsriWorldGeocoderNoProxy(url) || isEsriWorldGeocoderThroughProxy(url));
}
/**
 * Update source country in state
 * based on user region and portal country code
 */
function getSourceCountry(region, ipCntryCode, code) {
  let sourceCountry = code || region || ipCntryCode || "";
  sourceCountry = (sourceCountry === null || sourceCountry === void 0 ? void 0 : sourceCountry.toLowerCase()) === "wo" ? "world" : sourceCountry;
  // #35564 - If a user or org-defined country code is not a valid geocode region, default to `world`
  if (!countryCodes[sourceCountry.toUpperCase()]) {
    sourceCountry = "world";
  }
  return sourceCountry;
}
/**
 * Get flags based on user's ability to geocode, etc.
 */
function getGeocoderInfo(geocodingServices, user, isPortal) {
  var _a;
  let roleCanUseGeocode = (0,_privileges_35590eb4_js__WEBPACK_IMPORTED_MODULE_3__.l)(user) && (0,_privileges_35590eb4_js__WEBPACK_IMPORTED_MODULE_3__.m)(user);
  const geocodeServers = filterBatchGeocoders(geocodingServices, !roleCanUseGeocode, isPortal);
  const geocodeServiceUrl = (_a = geocodeServers[0]) === null || _a === void 0 ? void 0 : _a.url;
  if (geocodeServers === null || geocodeServers === void 0 ? void 0 : geocodeServers.length) {
    // we filter out the world geocoder if the user does not have geocode privileges
    // if there was still at least one more geocoder in the list it must be a custom
    // geocoder, so the user can use that one.
    roleCanUseGeocode = true;
    const geocoder = findGeocoder(geocodeServers[0].url, geocodeServers);
    const isAgoWorldGeocodeServer = isEsriWorldGeocoderNoProxy(geocoder === null || geocoder === void 0 ? void 0 : geocoder.url);
    const isServiceProxyAgoWorldGeocodeServer = isEsriWorldGeocoderThroughProxy(geocoder === null || geocoder === void 0 ? void 0 : geocoder.url);
    const isWorldGeocodeServer = isAgoWorldGeocodeServer || isServiceProxyAgoWorldGeocodeServer;
    // ! Note: seems like there is no way `supportsBatch` can be false if the code reaches this point`
    let supportsBatch = isWorldGeocodeServer || !!geocoder.batch;
    const allowGeocode = (!(0,_privileges_ccd5f37d_js__WEBPACK_IMPORTED_MODULE_1__.t)(user) || roleCanUseGeocode) &&
      ((!isPortal && supportsBatch) ||
        (isPortal && (!isAgoWorldGeocodeServer || isServiceProxyAgoWorldGeocodeServer) && supportsBatch));
    return {
      allowGeocode,
      isAgoWorldGeocodeServer,
      isServiceProxyAgoWorldGeocodeServer,
      isWorldGeocodeServer,
      geocodeServers,
      geocodeServiceUrl
    };
  }
  return null;
}




/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXBwLWNvbXBvbmVudHNfZGlzdF9lc21fZ2VvY29kLWFmMmQyOS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUMwRDtBQUNHO0FBQ0Y7QUFDcUI7O0FBRWhGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxzSUFBc0ksRUFBRSxvREFBWTtBQUM5SjtBQUNBLG1FQUFtRSxvREFBWTtBQUMvRSw4REFBOEQ7QUFDOUQseUJBQXlCLDBIQUEwSCw4RUFBOEU7QUFDak87QUFDQTtBQUNBLHNEQUFzRCx1Q0FBdUMsdUNBQXVDLCtGQUErRix5QkFBeUI7QUFDNVA7QUFDQTtBQUNBLHNEQUFzRDtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsY0FBYztBQUN0RCxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyxJQUFJO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSw2REFBNkQsRUFBRSxvREFBWSxFQUFFO0FBQ3ZGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsSUFBSSxxQkFBcUI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVywwREFBUztBQUNwQiwwREFBMEQ7QUFDMUQ7QUFDQTtBQUNBO0FBQ0EsNERBQTREO0FBQzVELFVBQVUsaUJBQWlCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBLGFBQWEsMERBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiwwREFBYyxVQUFVLDBEQUFVO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLDBEQUFZO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVnTiIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FwcC1jb21wb25lbnRzL2Rpc3QvZXNtL2dlb2NvZGUtN2ViN2MwZGYuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogdjMuMC45OVxuICovXG5pbXBvcnQgeyBpIGFzIGlzRGVmaW5lZCB9IGZyb20gJy4vZnVuY3Rpb25hbC1jODJmNWFiOS5qcyc7XG5pbXBvcnQgeyB0IGFzIGlzQ3VzdG9tUm9sZSB9IGZyb20gJy4vcHJpdmlsZWdlcy1jY2Q1ZjM3ZC5qcyc7XG5pbXBvcnQgeyBhIGFzIGFkZEl0ZW1TdGF0ZSB9IGZyb20gJy4vYWRkLWl0ZW0tOTdkNTc3YTkuanMnO1xuaW1wb3J0IHsgbCBhcyBjYW5DcmVhdGVJdGVtcywgbSBhcyBjYW5HZW9jb2RlIH0gZnJvbSAnLi9wcml2aWxlZ2VzLTM1NTkwZWI0LmpzJztcblxuY29uc3QgY291bnRyeUNvZGVzID0ge1xuICBXT1JMRDogXCJXb3JsZFwiLFxuICBFVTogXCJFdXJvcGVcIixcbiAgQUQ6IFwiQW5kb3JyYVwiLFxuICBBRTogXCJVbml0ZWQgQXJhYiBFbWlyYXRlc1wiLFxuICBBRjogXCJBZmdoYW5pc3RhblwiLFxuICBBRzogXCJBbnRpZ3VhIGFuZCBCYXJidWRhXCIsXG4gIEFJOiBcIkFuZ3VpbGxhXCIsXG4gIEFMOiBcIkFsYmFuaWFcIixcbiAgQU06IFwiQXJtZW5pYVwiLFxuICBBTzogXCJBbmdvbGFcIixcbiAgQVE6IFwiQW50YXJjdGljYVwiLFxuICBBUjogXCJBcmdlbnRpbmFcIixcbiAgQVM6IFwiQW1lcmljYW4gU2Ftb2FcIixcbiAgQVQ6IFwiQXVzdHJpYVwiLFxuICBBVTogXCJBdXN0cmFsaWFcIixcbiAgQVc6IFwiQXJ1YmFcIixcbiAgQVo6IFwiQXplcmJhaWphblwiLFxuICBCQTogXCJCb3NuaWEgYW5kIEhlcnplZ292aW5hXCIsXG4gIEJCOiBcIkJhcmJhZG9zXCIsXG4gIEJEOiBcIkJhbmdsYWRlc2hcIixcbiAgQkU6IFwiQmVsZ2l1bVwiLFxuICBCRjogXCJCdXJraW5hIEZhc29cIixcbiAgQkc6IFwiQnVsZ2FyaWFcIixcbiAgQkg6IFwiQmFocmFpblwiLFxuICBCSTogXCJCdXJ1bmRpXCIsXG4gIEJKOiBcIkJlbmluXCIsXG4gIEJMOiBcIlNhaW50IEJhcnRow6lsZW15XCIsXG4gIEJNOiBcIkJlcm11ZGFcIixcbiAgQk46IFwiQnJ1bmVpIERhcnVzc2FsYW1cIixcbiAgQk86IFwiQm9saXZpYSwgUGx1cmluYXRpb25hbCBTdGF0ZSBvZlwiLFxuICBCUTogXCJCb25haXJlLCBTaW50IEV1c3RhdGl1cyBhbmQgU2FiYVwiLFxuICBCUjogXCJCcmF6aWxcIixcbiAgQlM6IFwiQmFoYW1hc1wiLFxuICBCVDogXCJCaHV0YW5cIixcbiAgQlY6IFwiQm91dmV0IElzbGFuZFwiLFxuICBCVzogXCJCb3Rzd2FuYVwiLFxuICBCWTogXCJCZWxhcnVzXCIsXG4gIEJaOiBcIkJlbGl6ZVwiLFxuICBDQTogXCJDYW5hZGFcIixcbiAgQ0Q6IFwiQ29uZ28sIHRoZSBEZW1vY3JhdGljIFJlcHVibGljIG9mIHRoZVwiLFxuICBDRjogXCJDZW50cmFsIEFmcmljYW4gUmVwdWJsaWNcIixcbiAgQ0c6IFwiQ29uZ29cIixcbiAgQ0g6IFwiU3dpdHplcmxhbmRcIixcbiAgQ0k6IFwiQ8O0dGUgZCdJdm9pcmVcIixcbiAgQ0s6IFwiQ29vayBJc2xhbmRzXCIsXG4gIENMOiBcIkNoaWxlXCIsXG4gIENNOiBcIkNhbWVyb29uXCIsXG4gIENOOiBcIkNoaW5hXCIsXG4gIENPOiBcIkNvbG9tYmlhXCIsXG4gIENSOiBcIkNvc3RhIFJpY2FcIixcbiAgQ1U6IFwiQ3ViYVwiLFxuICBDVjogXCJDYXBlIFZlcmRlXCIsXG4gIENXOiBcIkN1cmHDp2FvXCIsXG4gIENZOiBcIkN5cHJ1c1wiLFxuICBDWjogXCJDemVjaCBSZXB1YmxpY1wiLFxuICBERTogXCJHZXJtYW55XCIsXG4gIERKOiBcIkRqaWJvdXRpXCIsXG4gIERLOiBcIkRlbm1hcmtcIixcbiAgRE06IFwiRG9taW5pY2FcIixcbiAgRE86IFwiRG9taW5pY2FuIFJlcHVibGljXCIsXG4gIERaOiBcIkFsZ2VyaWFcIixcbiAgRUM6IFwiRWN1YWRvclwiLFxuICBFRTogXCJFc3RvbmlhXCIsXG4gIEVHOiBcIkVneXB0XCIsXG4gIEVIOiBcIldlc3Rlcm4gU2FoYXJhXCIsXG4gIEVSOiBcIkVyaXRyZWFcIixcbiAgRVM6IFwiU3BhaW5cIixcbiAgRVQ6IFwiRXRoaW9waWFcIixcbiAgRkk6IFwiRmlubGFuZFwiLFxuICBGSjogXCJGaWppXCIsXG4gIEZLOiBcIkZhbGtsYW5kIElzbGFuZHMgKE1hbHZpbmFzKVwiLFxuICBGTTogXCJNaWNyb25lc2lhLCBGZWRlcmF0ZWQgU3RhdGVzIG9mXCIsXG4gIEZPOiBcIkZhcm9lIElzbGFuZHNcIixcbiAgRlI6IFwiRnJhbmNlXCIsXG4gIEdBOiBcIkdhYm9uXCIsXG4gIEdCOiBcIlVuaXRlZCBLaW5nZG9tXCIsXG4gIEdEOiBcIkdyZW5hZGFcIixcbiAgR0U6IFwiR2VvcmdpYVwiLFxuICBHRjogXCJGcmVuY2ggR3VpYW5hXCIsXG4gIEdHOiBcIkd1ZXJuc2V5XCIsXG4gIEdIOiBcIkdoYW5hXCIsXG4gIEdJOiBcIkdpYnJhbHRhclwiLFxuICBHTDogXCJHcmVlbmxhbmRcIixcbiAgR006IFwiR2FtYmlhXCIsXG4gIEdOOiBcIkd1aW5lYVwiLFxuICBHUDogXCJHdWFkZWxvdXBlXCIsXG4gIEdROiBcIkVxdWF0b3JpYWwgR3VpbmVhXCIsXG4gIEdSOiBcIkdyZWVjZVwiLFxuICBHUzogXCJTb3V0aCBHZW9yZ2lhIGFuZCB0aGUgU291dGggU2FuZHdpY2ggSXNsYW5kc1wiLFxuICBHVDogXCJHdWF0ZW1hbGFcIixcbiAgR1c6IFwiR3VpbmVhLUJpc3NhdVwiLFxuICBHWTogXCJHdXlhbmFcIixcbiAgSEs6IFwiSG9uZyBLb25nXCIsXG4gIEhNOiBcIkhlYXJkIElzbGFuZCBhbmQgTWNEb25hbGQgSXNsYW5kc1wiLFxuICBITjogXCJIb25kdXJhc1wiLFxuICBIUjogXCJDcm9hdGlhXCIsXG4gIEhUOiBcIkhhaXRpXCIsXG4gIEhVOiBcIkh1bmdhcnlcIixcbiAgSUQ6IFwiSW5kb25lc2lhXCIsXG4gIElFOiBcIklyZWxhbmRcIixcbiAgSUw6IFwiSXNyYWVsXCIsXG4gIElNOiBcIklzbGUgb2YgTWFuXCIsXG4gIElOOiBcIkluZGlhXCIsXG4gIElPOiBcIkJyaXRpc2ggSW5kaWFuIE9jZWFuIFRlcnJpdG9yeVwiLFxuICBJUTogXCJJcmFxXCIsXG4gIElSOiBcIklyYW4sIElzbGFtaWMgUmVwdWJsaWMgb2ZcIixcbiAgSVM6IFwiSWNlbGFuZFwiLFxuICBJVDogXCJJdGFseVwiLFxuICBKRTogXCJKZXJzZXlcIixcbiAgSk06IFwiSmFtYWljYVwiLFxuICBKTzogXCJKb3JkYW5cIixcbiAgSlA6IFwiSmFwYW5cIixcbiAgS0U6IFwiS2VueWFcIixcbiAgS0c6IFwiS3lyZ3l6c3RhblwiLFxuICBLSDogXCJDYW1ib2RpYVwiLFxuICBLSTogXCJLaXJpYmF0aVwiLFxuICBLTTogXCJDb21vcm9zXCIsXG4gIEtOOiBcIlNhaW50IEtpdHRzIGFuZCBOZXZpc1wiLFxuICBLUDogXCJLb3JlYSwgRGVtb2NyYXRpYyBQZW9wbGUncyBSZXB1YmxpYyBvZlwiLFxuICBLUjogXCJLb3JlYSwgUmVwdWJsaWMgb2ZcIixcbiAgS1c6IFwiS3V3YWl0XCIsXG4gIEtZOiBcIkNheW1hbiBJc2xhbmRzXCIsXG4gIEtaOiBcIkthemFraHN0YW5cIixcbiAgTEE6IFwiTGFvIFBlb3BsZSdzIERlbW9jcmF0aWMgUmVwdWJsaWNcIixcbiAgTEI6IFwiTGViYW5vblwiLFxuICBMQzogXCJTYWludCBMdWNpYVwiLFxuICBMSTogXCJMaWVjaHRlbnN0ZWluXCIsXG4gIExLOiBcIlNyaSBMYW5rYVwiLFxuICBMUjogXCJMaWJlcmlhXCIsXG4gIExTOiBcIkxlc290aG9cIixcbiAgTFQ6IFwiTGl0aHVhbmlhXCIsXG4gIExVOiBcIkx1eGVtYm91cmdcIixcbiAgTFY6IFwiTGF0dmlhXCIsXG4gIExZOiBcIkxpYnlhXCIsXG4gIE1BOiBcIk1vcm9jY29cIixcbiAgTUM6IFwiTW9uYWNvXCIsXG4gIE1EOiBcIk1vbGRvdmEsIFJlcHVibGljIG9mXCIsXG4gIE1FOiBcIk1vbnRlbmVncm9cIixcbiAgTUY6IFwiU2FpbnQgTWFydGluIChGcmVuY2ggcGFydClcIixcbiAgTUc6IFwiTWFkYWdhc2NhclwiLFxuICBNSDogXCJNYXJzaGFsbCBJc2xhbmRzXCIsXG4gIE1LOiBcIk1hY2Vkb25pYSwgdGhlIGZvcm1lciBZdWdvc2xhdiBSZXB1YmxpYyBvZlwiLFxuICBNTDogXCJNYWxpXCIsXG4gIE1NOiBcIk15YW5tYXJcIixcbiAgTU46IFwiTW9uZ29saWFcIixcbiAgTU86IFwiTWFjYW9cIixcbiAgTVA6IFwiTm9ydGhlcm4gTWFyaWFuYSBJc2xhbmRzXCIsXG4gIE1ROiBcIk1hcnRpbmlxdWVcIixcbiAgTVI6IFwiTWF1cml0YW5pYVwiLFxuICBNUzogXCJNb250c2VycmF0XCIsXG4gIE1UOiBcIk1hbHRhXCIsXG4gIE1VOiBcIk1hdXJpdGl1c1wiLFxuICBNVjogXCJNYWxkaXZlc1wiLFxuICBNVzogXCJNYWxhd2lcIixcbiAgTVg6IFwiTWV4aWNvXCIsXG4gIE1ZOiBcIk1hbGF5c2lhXCIsXG4gIE1aOiBcIk1vemFtYmlxdWVcIixcbiAgTkE6IFwiTmFtaWJpYVwiLFxuICBOQzogXCJOZXcgQ2FsZWRvbmlhXCIsXG4gIE5FOiBcIk5pZ2VyXCIsXG4gIE5HOiBcIk5pZ2VyaWFcIixcbiAgTkk6IFwiTmljYXJhZ3VhXCIsXG4gIE5MOiBcIk5ldGhlcmxhbmRzXCIsXG4gIE5POiBcIk5vcndheVwiLFxuICBOUDogXCJOZXBhbFwiLFxuICBOUjogXCJOYXVydVwiLFxuICBOVTogXCJOaXVlXCIsXG4gIE5aOiBcIk5ldyBaZWFsYW5kXCIsXG4gIE9NOiBcIk9tYW5cIixcbiAgUEE6IFwiUGFuYW1hXCIsXG4gIFBFOiBcIlBlcnVcIixcbiAgUEY6IFwiRnJlbmNoIFBvbHluZXNpYVwiLFxuICBQRzogXCJQYXB1YSBOZXcgR3VpbmVhXCIsXG4gIFBIOiBcIlBoaWxpcHBpbmVzXCIsXG4gIFBLOiBcIlBha2lzdGFuXCIsXG4gIFBMOiBcIlBvbGFuZFwiLFxuICBQTTogXCJTYWludCBQaWVycmUgYW5kIE1pcXVlbG9uXCIsXG4gIFBOOiBcIlBpdGNhaXJuXCIsXG4gIFBTOiBcIlBhbGVzdGluZSwgU3RhdGUgb2ZcIixcbiAgUFQ6IFwiUG9ydHVnYWxcIixcbiAgUFc6IFwiUGFsYXVcIixcbiAgUFk6IFwiUGFyYWd1YXlcIixcbiAgUUE6IFwiUWF0YXJcIixcbiAgUkU6IFwiUsOpdW5pb25cIixcbiAgUk86IFwiUm9tYW5pYVwiLFxuICBSUzogXCJTZXJiaWFcIixcbiAgUlU6IFwiUnVzc2lhbiBGZWRlcmF0aW9uXCIsXG4gIFJXOiBcIlJ3YW5kYVwiLFxuICBTQTogXCJTYXVkaSBBcmFiaWFcIixcbiAgU0I6IFwiU29sb21vbiBJc2xhbmRzXCIsXG4gIFNDOiBcIlNleWNoZWxsZXNcIixcbiAgU0Q6IFwiU3VkYW5cIixcbiAgU0U6IFwiU3dlZGVuXCIsXG4gIFNHOiBcIlNpbmdhcG9yZVwiLFxuICBTSDogXCJTYWludCBIZWxlbmEsIEFzY2Vuc2lvbiBhbmQgVHJpc3RhbiBkYSBDdW5oYVwiLFxuICBTSTogXCJTbG92ZW5pYVwiLFxuICBTSjogXCJTdmFsYmFyZCBhbmQgSmFuIE1heWVuXCIsXG4gIFNLOiBcIlNsb3Zha2lhXCIsXG4gIFNMOiBcIlNpZXJyYSBMZW9uZVwiLFxuICBTTTogXCJTYW4gTWFyaW5vXCIsXG4gIFNOOiBcIlNlbmVnYWxcIixcbiAgU086IFwiU29tYWxpYVwiLFxuICBTUjogXCJTdXJpbmFtZVwiLFxuICBTUzogXCJTb3V0aCBTdWRhblwiLFxuICBTVDogXCJTYW8gVG9tZSBhbmQgUHJpbmNpcGVcIixcbiAgU1Y6IFwiRWwgU2FsdmFkb3JcIixcbiAgU1g6IFwiU2ludCBNYWFydGVuIChEdXRjaCBwYXJ0KVwiLFxuICBTWTogXCJTeXJpYW4gQXJhYiBSZXB1YmxpY1wiLFxuICBTWjogXCJTd2F6aWxhbmRcIixcbiAgVEM6IFwiVHVya3MgYW5kIENhaWNvcyBJc2xhbmRzXCIsXG4gIFREOiBcIkNoYWRcIixcbiAgVEY6IFwiRnJlbmNoIFNvdXRoZXJuIFRlcnJpdG9yaWVzXCIsXG4gIFRHOiBcIlRvZ29cIixcbiAgVEg6IFwiVGhhaWxhbmRcIixcbiAgVEo6IFwiVGFqaWtpc3RhblwiLFxuICBUSzogXCJUb2tlbGF1XCIsXG4gIFRMOiBcIlRpbW9yLUxlc3RlXCIsXG4gIFRNOiBcIlR1cmttZW5pc3RhblwiLFxuICBUTjogXCJUdW5pc2lhXCIsXG4gIFRPOiBcIlRvbmdhXCIsXG4gIFRSOiBcIlR1cmtleVwiLFxuICBUVDogXCJUcmluaWRhZCBhbmQgVG9iYWdvXCIsXG4gIFRWOiBcIlR1dmFsdVwiLFxuICBUVzogXCJUYWl3YW4sIFByb3ZpbmNlIG9mIENoaW5hXCIsXG4gIFRaOiBcIlRhbnphbmlhLCBVbml0ZWQgUmVwdWJsaWMgb2ZcIixcbiAgVUE6IFwiVWtyYWluZVwiLFxuICBVRzogXCJVZ2FuZGFcIixcbiAgVU06IFwiVW5pdGVkIFN0YXRlcyBNaW5vciBPdXRseWluZyBJc2xhbmRzXCIsXG4gIFVTOiBcIlVuaXRlZCBTdGF0ZXNcIixcbiAgVVk6IFwiVXJ1Z3VheVwiLFxuICBVWjogXCJVemJla2lzdGFuXCIsXG4gIFZBOiBcIkhvbHkgU2VlIChWYXRpY2FuIENpdHkgU3RhdGUpXCIsXG4gIFZDOiBcIlNhaW50IFZpbmNlbnQgYW5kIHRoZSBHcmVuYWRpbmVzXCIsXG4gIFZFOiBcIlZlbmV6dWVsYSwgQm9saXZhcmlhbiBSZXB1YmxpYyBvZlwiLFxuICBWRzogXCJWaXJnaW4gSXNsYW5kcywgQnJpdGlzaFwiLFxuICBWTjogXCJWaWV0bmFtXCIsXG4gIFZVOiBcIlZhbnVhdHVcIixcbiAgV0Y6IFwiV2FsbGlzIGFuZCBGdXR1bmFcIixcbiAgV1M6IFwiU2Ftb2FcIixcbiAgWEs6IFwiUmVwdWJsaWMgb2YgS29zb3ZvXCIsXG4gIFlFOiBcIlllbWVuXCIsXG4gIFlUOiBcIk1heW90dGVcIixcbiAgWkE6IFwiU291dGggQWZyaWNhXCIsXG4gIFpNOiBcIlphbWJpYVwiLFxuICBaVzogXCJaaW1iYWJ3ZVwiXG59O1xuXG4vKipcbiAqIEZvcm1zIHB1Ymxpc2hQYXJhbWV0ZXJzIGNvcnJlY3RseSBmb3IgcHVibGlzaCB0YXNrcyBpbnZvbHZpbmcgZ2VvY29kaW5nXG4gKi9cbmZ1bmN0aW9uIGdldExvY2F0aW9uUHVibGlzaFBhcmFtZXRlcnMoYWRkcmVzc1R5cGUsIGFwcGVuZFdvcmtmbG93KSB7XG4gIGNvbnN0IHsgc291cmNlQ291bnRyeSwgbG9jYXRpb25UeXBlLCBhbmFseXplUmVzdWx0cywgY2FuZGlkYXRlRmllbGRzVHlwZSwgY29vcmRpbmF0ZUZpZWxkVHlwZSwgdHlwZSwgc3RhbmRhcmRpemVkRmllbGROYW1lcywgc2VsZWN0ZWRGaWVsZHMgfSA9IGFkZEl0ZW1TdGF0ZTtcbiAgY29uc3QgbGF5ZXJJbmZvID0gZ2V0QW5hbHl6ZWRMYXllckluZm8oKTtcbiAgY29uc3QgZmllbGRzID0gIWFwcGVuZFdvcmtmbG93ID8gT2JqZWN0LnZhbHVlcyhzZWxlY3RlZEZpZWxkcykgOiBhZGRJdGVtU3RhdGUuYmFja3VwTGF5ZXJGaWVsZHM7XG4gIGNvbnN0IGxvY2F0aW9uUHVibGlzaFBhcmFtcyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IGxvY2F0aW9uVHlwZTogbG9jYXRpb25UeXBlIHx8IFwiYWRkcmVzc1wiLCBzb3VyY2VDb3VudHJ5LFxuICAgIGNhbmRpZGF0ZUZpZWxkc1R5cGUgfSwgKGxvY2F0aW9uVHlwZSA9PT0gXCJjb29yZGluYXRlc1wiICYmIGdldENvb3JkaW5hdGVGaWVsZHMoZmllbGRzLCBjb29yZGluYXRlRmllbGRUeXBlKSkpLCAobG9jYXRpb25UeXBlID09PSBcImFkZHJlc3NcIiAmJiB7IGFkZHJlc3NGaWVsZHM6IGdldEFkZHJlc3NGaWVsZHMoZmllbGRzLCBhZGRyZXNzVHlwZSwgc3RhbmRhcmRpemVkRmllbGROYW1lcykgfSkpO1xuICBsZXQgcHVibGlzaFBhcmFtZXRlcnM7XG4gIGlmICghYXBwZW5kV29ya2Zsb3cgJiYgdHlwZSA9PT0gXCJNaWNyb3NvZnQgRXhjZWxcIikge1xuICAgIHB1Ymxpc2hQYXJhbWV0ZXJzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBhbmFseXplUmVzdWx0cy5wdWJsaXNoUGFyYW1ldGVycyksIHsgbGF5ZXJzOiBbT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBsYXllckluZm8pLCBsb2NhdGlvblB1Ymxpc2hQYXJhbXMpXSwgaGFzU3RhdGljRGF0YTogdHJ1ZSwgbWF4UmVjb3JkQ291bnQ6IDIwMDAsIGxheWVySW5mbzogeyBjYXBhYmlsaXRpZXM6IFwiUXVlcnlcIiB9IH0pO1xuICB9XG4gIGVsc2Uge1xuICAgIHB1Ymxpc2hQYXJhbWV0ZXJzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBhbmFseXplUmVzdWx0cy5wdWJsaXNoUGFyYW1ldGVycyksIGxvY2F0aW9uUHVibGlzaFBhcmFtcyk7XG4gIH1cbiAgcmV0dXJuIHB1Ymxpc2hQYXJhbWV0ZXJzO1xufVxuZnVuY3Rpb24gZ2V0QWRkcmVzc0ZpZWxkcyhmaWVsZHMsIGFkZHJlc3NUeXBlLCBzdGFuZGFyZGl6ZWRGaWVsZE5hbWVzKSB7XG4gIGlmIChhZGRyZXNzVHlwZSA9PT0gXCJTaW5nbGVcIikge1xuICAgIGNvbnN0IHNpbmdsZUxpbmVBZGRyZXNzRmllbGQgPSBPYmplY3Qua2V5cyhzdGFuZGFyZGl6ZWRGaWVsZE5hbWVzKVswXSB8fCBcIkFkZHJlc3NcIjtcbiAgICBjb25zdCBhZGRyZXNzRmllbGQgPSBmaWVsZHMuZmluZCgoeyBsb2NhdGlvblR5cGUgfSkgPT4gbG9jYXRpb25UeXBlID09PSBzaW5nbGVMaW5lQWRkcmVzc0ZpZWxkIHx8IChsb2NhdGlvblR5cGUgPT09IG51bGwgfHwgbG9jYXRpb25UeXBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBsb2NhdGlvblR5cGUudG9Mb3dlckNhc2UoKSkgPT09IFwiYWRkcmVzc1wiKTtcbiAgICByZXR1cm4geyBbc2luZ2xlTGluZUFkZHJlc3NGaWVsZF06IChhZGRyZXNzRmllbGQgPT09IG51bGwgfHwgYWRkcmVzc0ZpZWxkID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhZGRyZXNzRmllbGQubmFtZSkgfHwgXCJcIiB9O1xuICB9XG4gIHJldHVybiBmaWVsZHMucmVkdWNlKChhY2MsIGZpZWxkKSA9PiB7XG4gICAgaWYgKGZpZWxkLmxvY2F0aW9uVHlwZSAhPT0gXCJ1bmtub3duXCIpIHtcbiAgICAgIGFjY1tmaWVsZC5sb2NhdGlvblR5cGVdID0gZmllbGQubmFtZTtcbiAgICB9XG4gICAgcmV0dXJuIGFjYztcbiAgfSwge30pO1xufVxuLyoqXG4gKiBGZXRjaCB0aGUgY29ycmVjdCBsYXllckluZm8gZnJvbSB0aGUgY3VycmVudCBDU1YvRXhjZWwgYW5hbHl6ZVJlc3VsdHNcbiAqL1xuZnVuY3Rpb24gZ2V0QW5hbHl6ZWRMYXllckluZm8oY3VzdG9tQW5hbHl6ZVJlc3VsdHMsIGFuYWx5emVTZWxlY3RlZExheWVyKSB7XG4gIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZztcbiAgY29uc3QgeyB0eXBlLCBhbmFseXplUmVzdWx0cyA9IGN1c3RvbUFuYWx5emVSZXN1bHRzLCBzZWxlY3RlZFNoZWV0IH0gPSBhZGRJdGVtU3RhdGU7IC8vc2V0IHNlbGVjdGVkU2hlZXRcbiAgY29uc3QgcHVibGlzaFBhcmFtZXRlcnMgPSBhbmFseXplUmVzdWx0cyA9PT0gbnVsbCB8fCBhbmFseXplUmVzdWx0cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogYW5hbHl6ZVJlc3VsdHMucHVibGlzaFBhcmFtZXRlcnM7XG4gIGlmICghIWFuYWx5emVTZWxlY3RlZExheWVyKSB7XG4gICAgaWYgKHR5cGUgPT09IFwiQ1NWXCIpIHtcbiAgICAgIHJldHVybiBwdWJsaXNoUGFyYW1ldGVycyA9PT0gbnVsbCB8fCBwdWJsaXNoUGFyYW1ldGVycyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcHVibGlzaFBhcmFtZXRlcnMubGF5ZXJJbmZvO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHJldHVybiAoX2IgPSAoX2EgPSBwdWJsaXNoUGFyYW1ldGVycyA9PT0gbnVsbCB8fCBwdWJsaXNoUGFyYW1ldGVycyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcHVibGlzaFBhcmFtZXRlcnMubGF5ZXJzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Fbc2VsZWN0ZWRTaGVldF0pICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IChfYyA9IHB1Ymxpc2hQYXJhbWV0ZXJzID09PSBudWxsIHx8IHB1Ymxpc2hQYXJhbWV0ZXJzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwdWJsaXNoUGFyYW1ldGVycy5sYXllcnMpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY1swXTtcbiAgICB9XG4gIH1cbiAgZWxzZSB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlIFwiTWljcm9zb2Z0IEV4Y2VsXCI6XG4gICAgICAgIHJldHVybiAoX2UgPSAoX2QgPSBwdWJsaXNoUGFyYW1ldGVycyA9PT0gbnVsbCB8fCBwdWJsaXNoUGFyYW1ldGVycyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcHVibGlzaFBhcmFtZXRlcnMubGF5ZXJzKSA9PT0gbnVsbCB8fCBfZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Rbc2VsZWN0ZWRTaGVldF0pICE9PSBudWxsICYmIF9lICE9PSB2b2lkIDAgPyBfZSA6IChfZiA9IHB1Ymxpc2hQYXJhbWV0ZXJzID09PSBudWxsIHx8IHB1Ymxpc2hQYXJhbWV0ZXJzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwdWJsaXNoUGFyYW1ldGVycy5sYXllcnMpID09PSBudWxsIHx8IF9mID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZlswXTtcbiAgICAgIGNhc2UgXCJHZW9Kc29uXCI6XG4gICAgICAgIHJldHVybiAoX2cgPSBwdWJsaXNoUGFyYW1ldGVycyA9PT0gbnVsbCB8fCBwdWJsaXNoUGFyYW1ldGVycyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcHVibGlzaFBhcmFtZXRlcnMubGF5ZXJzKSA9PT0gbnVsbCB8fCBfZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2dbMF07XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gcHVibGlzaFBhcmFtZXRlcnMgPT09IG51bGwgfHwgcHVibGlzaFBhcmFtZXRlcnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHB1Ymxpc2hQYXJhbWV0ZXJzLmxheWVySW5mbztcbiAgICB9XG4gIH1cbn1cbi8qKlxuICogR2l2ZW4gYSBmaWVsZCB0eXBlLCBmaW5kIHdoaWNoIG90aGVyIGZpZWxkIHR5cGVzIGNhbiBiZSBzdWNjZXNzZnVsbHkgc2VsZWN0ZWRcbiAqIGh0dHBzOi8vZGV2dG9waWEuZXNyaS5jb20vV2ViR0lTL2FyY2dpcy1wb3J0YWwtYXBwL2lzc3Vlcy80Mzk3NCNpc3N1ZWNvbW1lbnQtNDA2NzQyMFxuICovXG5mdW5jdGlvbiBnZXRBbGxvd2VkRmllbGRUeXBlcyhmaWVsZFR5cGUpIHtcbiAgc3dpdGNoIChmaWVsZFR5cGUpIHtcbiAgICBjYXNlIFwiZXNyaUZpZWxkVHlwZUJpZ0ludGVnZXJcIjpcbiAgICAgIHJldHVybiBbXCJlc3JpRmllbGRUeXBlQmlnSW50ZWdlclwiLCBcImVzcmlGaWVsZFR5cGVEb3VibGVcIiwgXCJlc3JpRmllbGRUeXBlU3RyaW5nXCJdO1xuICAgIGNhc2UgXCJlc3JpRmllbGRUeXBlU21hbGxJbnRlZ2VyXCI6XG4gICAgICByZXR1cm4gW1xuICAgICAgICBcImVzcmlGaWVsZFR5cGVTbWFsbEludGVnZXJcIixcbiAgICAgICAgXCJlc3JpRmllbGRUeXBlSW50ZWdlclwiLFxuICAgICAgICBcImVzcmlGaWVsZFR5cGVTaW5nbGVcIixcbiAgICAgICAgXCJlc3JpRmllbGRUeXBlRG91YmxlXCIsXG4gICAgICAgIFwiZXNyaUZpZWxkVHlwZVN0cmluZ1wiXG4gICAgICBdO1xuICAgIGNhc2UgXCJlc3JpRmllbGRUeXBlSW50ZWdlclwiOlxuICAgICAgcmV0dXJuIFtcImVzcmlGaWVsZFR5cGVJbnRlZ2VyXCIsIFwiZXNyaUZpZWxkVHlwZVNpbmdsZVwiLCBcImVzcmlGaWVsZFR5cGVEb3VibGVcIiwgXCJlc3JpRmllbGRUeXBlU3RyaW5nXCJdO1xuICAgIGNhc2UgXCJlc3JpRmllbGRUeXBlU2luZ2xlXCI6XG4gICAgICByZXR1cm4gW1wiZXNyaUZpZWxkVHlwZVNpbmdsZVwiLCBcImVzcmlGaWVsZFR5cGVEb3VibGVcIiwgXCJlc3JpRmllbGRUeXBlU3RyaW5nXCJdO1xuICAgIGNhc2UgXCJlc3JpRmllbGRUeXBlRG91YmxlXCI6XG4gICAgICByZXR1cm4gW1wiZXNyaUZpZWxkVHlwZURvdWJsZVwiLCBcImVzcmlGaWVsZFR5cGVTdHJpbmdcIl07XG4gICAgY2FzZSBcImVzcmlGaWVsZFR5cGVEYXRlXCI6XG4gICAgICByZXR1cm4gW1wiZXNyaUZpZWxkVHlwZURhdGVcIiwgXCJlc3JpRmllbGRUeXBlU3RyaW5nXCJdO1xuICAgIGNhc2UgXCJlc3JpRmllbGRUeXBlRGF0ZU9ubHlcIjpcbiAgICAgIHJldHVybiBbXCJlc3JpRmllbGRUeXBlRGF0ZU9ubHlcIiwgXCJlc3JpRmllbGRUeXBlU3RyaW5nXCJdO1xuICAgIGNhc2UgXCJlc3JpRmllbGRUeXBlVGltZU9ubHlcIjpcbiAgICAgIHJldHVybiBbXCJlc3JpRmllbGRUeXBlVGltZU9ubHlcIiwgXCJlc3JpRmllbGRUeXBlU3RyaW5nXCJdO1xuICAgIGNhc2UgXCJlc3JpRmllbGRUeXBlVGltZXN0YW1wT2Zmc2V0XCI6XG4gICAgICByZXR1cm4gW1wiZXNyaUZpZWxkVHlwZVRpbWVzdGFtcE9mZnNldFwiLCBcImVzcmlGaWVsZFR5cGVTdHJpbmdcIl07XG4gICAgY2FzZSBcImVzcmlGaWVsZFR5cGVPSURcIjpcbiAgICAgIHJldHVybiBbXCJlc3JpRmllbGRUeXBlT0lEXCIsIFwiZXNyaUZpZWxkVHlwZUludGVnZXJcIiwgXCJlc3JpRmllbGRUeXBlU3RyaW5nXCJdO1xuICAgIGNhc2UgXCJlc3JpRmllbGRUeXBlU3RyaW5nXCI6XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBbXCJlc3JpRmllbGRUeXBlU3RyaW5nXCJdO1xuICB9XG59XG5mdW5jdGlvbiBnZXRDb29yZGluYXRlRmllbGRzKGZpZWxkcywgY29vcmRpbmF0ZUZpZWxkVHlwZSkge1xuICByZXR1cm4gZmllbGRzLnJlZHVjZSgoYWNjLCBmaWVsZCkgPT4ge1xuICAgIHN3aXRjaCAoZmllbGQubG9jYXRpb25UeXBlKSB7XG4gICAgICBjYXNlIFwibGF0aXR1ZGVcIjpcbiAgICAgICAgYWNjLmxhdGl0dWRlRmllbGROYW1lID0gZmllbGQubmFtZTtcbiAgICAgICAgaWYgKCFjb29yZGluYXRlRmllbGRUeXBlKSB7XG4gICAgICAgICAgYWNjLmNvb3JkaW5hdGVGaWVsZFR5cGUgPSBcIkxhdGl0dWRlQW5kTG9uZ2l0dWRlXCI7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwibG9uZ2l0dWRlXCI6XG4gICAgICAgIGFjYy5sb25naXR1ZGVGaWVsZE5hbWUgPSBmaWVsZC5uYW1lO1xuICAgICAgICBpZiAoIWNvb3JkaW5hdGVGaWVsZFR5cGUpIHtcbiAgICAgICAgICBhY2MuY29vcmRpbmF0ZUZpZWxkVHlwZSA9IFwiTGF0aXR1ZGVBbmRMb25naXR1ZGVcIjtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJtZ3JzXCI6XG4gICAgICAgIGlmIChjb29yZGluYXRlRmllbGRUeXBlID09PSBcIk1HUlNcIikge1xuICAgICAgICAgIGFjYy5jb29yZGluYXRlRmllbGROYW1lID0gZmllbGQubmFtZTtcbiAgICAgICAgICBpZiAoIWNvb3JkaW5hdGVGaWVsZFR5cGUpIHtcbiAgICAgICAgICAgIGFjYy5jb29yZGluYXRlRmllbGRUeXBlID0gXCJNR1JTXCI7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcInVzbmdcIjpcbiAgICAgICAgaWYgKGNvb3JkaW5hdGVGaWVsZFR5cGUgPT09IFwiVVNOR1wiKSB7XG4gICAgICAgICAgYWNjLmNvb3JkaW5hdGVGaWVsZE5hbWUgPSBmaWVsZC5uYW1lO1xuICAgICAgICAgIGlmICghY29vcmRpbmF0ZUZpZWxkVHlwZSkge1xuICAgICAgICAgICAgYWNjLmNvb3JkaW5hdGVGaWVsZFR5cGUgPSBcIlVTTkdcIjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiBhY2M7XG4gIH0sIHsgY29vcmRpbmF0ZUZpZWxkVHlwZSB9KTtcbn1cbmZ1bmN0aW9uIGZpbmRHZW9jb2RlcihnZW9jb2RlU2VydmljZVVybCwgZ2VvY29kZVNlcnZlcnMpIHtcbiAgY29uc3QgbWF0Y2hpbmcgPSBnZW9jb2RlU2VydmVycyA9PT0gbnVsbCB8fCBnZW9jb2RlU2VydmVycyA9PT0gdm9pZCAwID8gdm9pZCAwIDogZ2VvY29kZVNlcnZlcnMuZmlsdGVyKChnZW9jb2RlcikgPT4gZ2VvY29kZXIudXJsID09PSBnZW9jb2RlU2VydmljZVVybCk7XG4gIHJldHVybiAobWF0Y2hpbmcgPT09IG51bGwgfHwgbWF0Y2hpbmcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG1hdGNoaW5nLmxlbmd0aCkgPyBtYXRjaGluZy5zaGlmdCgpIDogbnVsbDtcbn1cbi8qKlxuICogR2V0IGEgbGlzdCBvZiBnZW9jb2RlcnMgdGhhdCBzdXBwb3J0IGJhdGNoIGdlb2NvZGluZ1xuICovXG5mdW5jdGlvbiBmaWx0ZXJCYXRjaEdlb2NvZGVycyhnZW9jb2RlcnMsIGNhbnRCYXRjaEdlb2NvZGUsIGlzUG9ydGFsKSB7XG4gIC8vIHJldHJpZXZlIG9ubHkgdGhlIGJhdGNoIGdlb2NvZGVycyBmcm9tIHRoZSBsaXN0IG9mIGdlb2NvZGVyc1xuICByZXR1cm4gZ2VvY29kZXJzLmZpbHRlcigob2xkR2VvY29kZXIpID0+IHtcbiAgICAvLyBTcHJlYWQgdG8gYXZvaWQgbXV0YXRpbmcgdGhlIG9yaWdpbmFsIGFycmF5XG4gICAgY29uc3QgZ2VvY29kZXIgPSBPYmplY3QuYXNzaWduKHt9LCBvbGRHZW9jb2Rlcik7XG4gICAgY29uc3QgaXNXb3JsZEdlb2NvZGVTZXJ2ZXIgPSBpc0VzcmlXb3JsZEdlb2NvZGVyTm9Qcm94eShnZW9jb2RlciA9PT0gbnVsbCB8fCBnZW9jb2RlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogZ2VvY29kZXIudXJsKTtcbiAgICBjb25zdCBpc1dvcmxkR2VvY29kZVNlcnZlclByb3h5ID0gaXNFc3JpV29ybGRHZW9jb2RlclRocm91Z2hQcm94eShnZW9jb2RlciA9PT0gbnVsbCB8fCBnZW9jb2RlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogZ2VvY29kZXIudXJsKTtcbiAgICAvLyBpZiBuYW1lIG5vdCBzZXQgYW5kIGlzIEVzcmkgV29ybGQgR2VvY29kZXIsIHNldCBuYW1lXG4gICAgaWYgKGlzV29ybGRHZW9jb2RlU2VydmVyIHx8IGlzV29ybGRHZW9jb2RlU2VydmVyUHJveHkpIHtcbiAgICAgIGlmICghaXNEZWZpbmVkKGdlb2NvZGVyLm5hbWUpKSB7XG4gICAgICAgIGdlb2NvZGVyLm5hbWUgPSBcIkFyY0dJUyBXb3JsZCBHZW9jb2RpbmcgU2VydmljZVwiOyAvLyBhbHdheXMgdXNlIG9mZmljaWFsIEVzcmkgZ2VvY29kZXIgbmFtZVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGlmIChnZW9jb2Rlci5uYW1lID09PSBcIkVzcmkgV29ybGQgR2VvY29kZXJcIikge1xuICAgICAgICAgIGdlb2NvZGVyLm5hbWUgPSBcIkFyY0dJUyBXb3JsZCBHZW9jb2RpbmcgU2VydmljZVwiOyAvLyB1c2Ugb2ZmaWNpYWwgRXNyaSBnZW9jb2RlciBuYW1lXG4gICAgICAgIH0gLy8gZWxzZSBrZWVwIGl0OyBtaWdodCBiZSB0aGUgdHJhbnNsYXRlZCBvbGQgbmFtZSB0aG91Z2hcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlzV29ybGRHZW9jb2RlU2VydmVyICYmIChpc1BvcnRhbCB8fCBjYW50QmF0Y2hHZW9jb2RlKSkge1xuICAgICAgcmV0dXJuIGZhbHNlOyAvLyBBR08gV29ybGQgR2VvY29kZSBzZXJ2ZXIgKHdpdGhvdXQgc2VydmljZSBwcm94eSkgY2FuJ3QgYmUgdXNlZCBmb3IgYmF0Y2ggZ2VvY29kaW5nIGluIHBvcnRhbFxuICAgIH1cbiAgICBlbHNlIGlmIChpc0RlZmluZWQoZ2VvY29kZXIuYmF0Y2gpKSB7XG4gICAgICByZXR1cm4gISFnZW9jb2Rlci5iYXRjaDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICByZXR1cm4gaXNXb3JsZEdlb2NvZGVTZXJ2ZXIgfHwgaXNXb3JsZEdlb2NvZGVTZXJ2ZXJQcm94eTtcbiAgICB9XG4gIH0pO1xufVxuZnVuY3Rpb24gaXNFc3JpV29ybGRHZW9jb2RlclRocm91Z2hQcm94eSh1cmwgPSBcIlwiKSB7XG4gIHJldHVybiAhISh1cmwgPT09IG51bGwgfHwgdXJsID09PSB2b2lkIDAgPyB2b2lkIDAgOiB1cmwubWF0Y2goLyhhcmNnaXNcXC5jb20uKlxcL3NlcnZlcnNcXC9bXFxkYS16XFwuLV0rXFwvcmVzdFxcL3NlcnZpY2VzXFwvd29ybGRcXC9nZW9jb2Rlc2VydmVyKS4qL2dpKSk7XG59XG5mdW5jdGlvbiBpc0VzcmlXb3JsZEdlb2NvZGVyTm9Qcm94eSh1cmwgPSBcIlwiKSB7XG4gIHJldHVybiAhISh1cmwgPT09IG51bGwgfHwgdXJsID09PSB2b2lkIDAgPyB2b2lkIDAgOiB1cmwubWF0Y2goLyhhcmNnaXNcXC5jb21cXC9hcmNnaXNcXC9yZXN0XFwvc2VydmljZXNcXC93b3JsZFxcL2dlb2NvZGVzZXJ2ZXIpLiovZ2kpKTtcbn1cbmZ1bmN0aW9uIGlzRXNyaVdvcmxkR2VvY29kZXIodXJsKSB7XG4gIHJldHVybiAhIXVybCAmJiAoaXNFc3JpV29ybGRHZW9jb2Rlck5vUHJveHkodXJsKSB8fCBpc0VzcmlXb3JsZEdlb2NvZGVyVGhyb3VnaFByb3h5KHVybCkpO1xufVxuLyoqXG4gKiBVcGRhdGUgc291cmNlIGNvdW50cnkgaW4gc3RhdGVcbiAqIGJhc2VkIG9uIHVzZXIgcmVnaW9uIGFuZCBwb3J0YWwgY291bnRyeSBjb2RlXG4gKi9cbmZ1bmN0aW9uIGdldFNvdXJjZUNvdW50cnkocmVnaW9uLCBpcENudHJ5Q29kZSwgY29kZSkge1xuICBsZXQgc291cmNlQ291bnRyeSA9IGNvZGUgfHwgcmVnaW9uIHx8IGlwQ250cnlDb2RlIHx8IFwiXCI7XG4gIHNvdXJjZUNvdW50cnkgPSAoc291cmNlQ291bnRyeSA9PT0gbnVsbCB8fCBzb3VyY2VDb3VudHJ5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzb3VyY2VDb3VudHJ5LnRvTG93ZXJDYXNlKCkpID09PSBcIndvXCIgPyBcIndvcmxkXCIgOiBzb3VyY2VDb3VudHJ5O1xuICAvLyAjMzU1NjQgLSBJZiBhIHVzZXIgb3Igb3JnLWRlZmluZWQgY291bnRyeSBjb2RlIGlzIG5vdCBhIHZhbGlkIGdlb2NvZGUgcmVnaW9uLCBkZWZhdWx0IHRvIGB3b3JsZGBcbiAgaWYgKCFjb3VudHJ5Q29kZXNbc291cmNlQ291bnRyeS50b1VwcGVyQ2FzZSgpXSkge1xuICAgIHNvdXJjZUNvdW50cnkgPSBcIndvcmxkXCI7XG4gIH1cbiAgcmV0dXJuIHNvdXJjZUNvdW50cnk7XG59XG4vKipcbiAqIEdldCBmbGFncyBiYXNlZCBvbiB1c2VyJ3MgYWJpbGl0eSB0byBnZW9jb2RlLCBldGMuXG4gKi9cbmZ1bmN0aW9uIGdldEdlb2NvZGVySW5mbyhnZW9jb2RpbmdTZXJ2aWNlcywgdXNlciwgaXNQb3J0YWwpIHtcbiAgdmFyIF9hO1xuICBsZXQgcm9sZUNhblVzZUdlb2NvZGUgPSBjYW5DcmVhdGVJdGVtcyh1c2VyKSAmJiBjYW5HZW9jb2RlKHVzZXIpO1xuICBjb25zdCBnZW9jb2RlU2VydmVycyA9IGZpbHRlckJhdGNoR2VvY29kZXJzKGdlb2NvZGluZ1NlcnZpY2VzLCAhcm9sZUNhblVzZUdlb2NvZGUsIGlzUG9ydGFsKTtcbiAgY29uc3QgZ2VvY29kZVNlcnZpY2VVcmwgPSAoX2EgPSBnZW9jb2RlU2VydmVyc1swXSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnVybDtcbiAgaWYgKGdlb2NvZGVTZXJ2ZXJzID09PSBudWxsIHx8IGdlb2NvZGVTZXJ2ZXJzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBnZW9jb2RlU2VydmVycy5sZW5ndGgpIHtcbiAgICAvLyB3ZSBmaWx0ZXIgb3V0IHRoZSB3b3JsZCBnZW9jb2RlciBpZiB0aGUgdXNlciBkb2VzIG5vdCBoYXZlIGdlb2NvZGUgcHJpdmlsZWdlc1xuICAgIC8vIGlmIHRoZXJlIHdhcyBzdGlsbCBhdCBsZWFzdCBvbmUgbW9yZSBnZW9jb2RlciBpbiB0aGUgbGlzdCBpdCBtdXN0IGJlIGEgY3VzdG9tXG4gICAgLy8gZ2VvY29kZXIsIHNvIHRoZSB1c2VyIGNhbiB1c2UgdGhhdCBvbmUuXG4gICAgcm9sZUNhblVzZUdlb2NvZGUgPSB0cnVlO1xuICAgIGNvbnN0IGdlb2NvZGVyID0gZmluZEdlb2NvZGVyKGdlb2NvZGVTZXJ2ZXJzWzBdLnVybCwgZ2VvY29kZVNlcnZlcnMpO1xuICAgIGNvbnN0IGlzQWdvV29ybGRHZW9jb2RlU2VydmVyID0gaXNFc3JpV29ybGRHZW9jb2Rlck5vUHJveHkoZ2VvY29kZXIgPT09IG51bGwgfHwgZ2VvY29kZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGdlb2NvZGVyLnVybCk7XG4gICAgY29uc3QgaXNTZXJ2aWNlUHJveHlBZ29Xb3JsZEdlb2NvZGVTZXJ2ZXIgPSBpc0VzcmlXb3JsZEdlb2NvZGVyVGhyb3VnaFByb3h5KGdlb2NvZGVyID09PSBudWxsIHx8IGdlb2NvZGVyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBnZW9jb2Rlci51cmwpO1xuICAgIGNvbnN0IGlzV29ybGRHZW9jb2RlU2VydmVyID0gaXNBZ29Xb3JsZEdlb2NvZGVTZXJ2ZXIgfHwgaXNTZXJ2aWNlUHJveHlBZ29Xb3JsZEdlb2NvZGVTZXJ2ZXI7XG4gICAgLy8gISBOb3RlOiBzZWVtcyBsaWtlIHRoZXJlIGlzIG5vIHdheSBgc3VwcG9ydHNCYXRjaGAgY2FuIGJlIGZhbHNlIGlmIHRoZSBjb2RlIHJlYWNoZXMgdGhpcyBwb2ludGBcbiAgICBsZXQgc3VwcG9ydHNCYXRjaCA9IGlzV29ybGRHZW9jb2RlU2VydmVyIHx8ICEhZ2VvY29kZXIuYmF0Y2g7XG4gICAgY29uc3QgYWxsb3dHZW9jb2RlID0gKCFpc0N1c3RvbVJvbGUodXNlcikgfHwgcm9sZUNhblVzZUdlb2NvZGUpICYmXG4gICAgICAoKCFpc1BvcnRhbCAmJiBzdXBwb3J0c0JhdGNoKSB8fFxuICAgICAgICAoaXNQb3J0YWwgJiYgKCFpc0Fnb1dvcmxkR2VvY29kZVNlcnZlciB8fCBpc1NlcnZpY2VQcm94eUFnb1dvcmxkR2VvY29kZVNlcnZlcikgJiYgc3VwcG9ydHNCYXRjaCkpO1xuICAgIHJldHVybiB7XG4gICAgICBhbGxvd0dlb2NvZGUsXG4gICAgICBpc0Fnb1dvcmxkR2VvY29kZVNlcnZlcixcbiAgICAgIGlzU2VydmljZVByb3h5QWdvV29ybGRHZW9jb2RlU2VydmVyLFxuICAgICAgaXNXb3JsZEdlb2NvZGVTZXJ2ZXIsXG4gICAgICBnZW9jb2RlU2VydmVycyxcbiAgICAgIGdlb2NvZGVTZXJ2aWNlVXJsXG4gICAgfTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuZXhwb3J0IHsgZ2V0QW5hbHl6ZWRMYXllckluZm8gYXMgYSwgZ2V0R2VvY29kZXJJbmZvIGFzIGIsIGNvdW50cnlDb2RlcyBhcyBjLCBnZXRTb3VyY2VDb3VudHJ5IGFzIGQsIGdldExvY2F0aW9uUHVibGlzaFBhcmFtZXRlcnMgYXMgZSwgZmluZEdlb2NvZGVyIGFzIGYsIGdldEFsbG93ZWRGaWVsZFR5cGVzIGFzIGcsIGlzRXNyaVdvcmxkR2VvY29kZXIgYXMgaSB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9