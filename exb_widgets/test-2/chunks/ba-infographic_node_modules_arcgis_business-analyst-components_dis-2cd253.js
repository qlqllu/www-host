"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_ba-infographic_node_modules_arcgis_business-analyst-components_dis-2cd253"],{

/***/ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/ba-accordion_4.entry.js":
/*!*****************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/ba-accordion_4.entry.js ***!
  \*****************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ba_accordion: () => (/* binding */ BaAccordion),
/* harmony export */   calcite_dropdown: () => (/* binding */ Dropdown),
/* harmony export */   calcite_dropdown_group: () => (/* binding */ DropdownGroup),
/* harmony export */   calcite_dropdown_item: () => (/* binding */ DropdownItem)
/* harmony export */ });
/* harmony import */ var _index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-4e647411.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/index-4e647411.js");
/* harmony import */ var _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ElementIds-a2c40592.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/ElementIds-a2c40592.js");
/* harmony import */ var _dom_f1ee4d04_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./dom-f1ee4d04.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/dom-f1ee4d04.js");
/* harmony import */ var _floating_ui_f29517e7_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./floating-ui-f29517e7.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/floating-ui-f29517e7.js");
/* harmony import */ var _guid_88a3729f_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./guid-88a3729f.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/guid-88a3729f.js");
/* harmony import */ var _interactive_29995522_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./interactive-29995522.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/interactive-29995522.js");
/* harmony import */ var _key_b75491c4_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./key-b75491c4.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/key-b75491c4.js");
/* harmony import */ var _observers_56740e99_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./observers-56740e99.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/observers-56740e99.js");
/* harmony import */ var _openCloseComponent_7d58834c_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./openCloseComponent-7d58834c.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/openCloseComponent-7d58834c.js");
/* harmony import */ var _loadable_cc14d728_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./loadable-cc14d728.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/loadable-cc14d728.js");














const baAccordionCss = "calcite-list-item{margin-block-end:unset !important;--tw-shadow:unset !important;--tw-shadow-colored:unset !important;box-shadow:unset !important}";

const BaAccordion = class {
  constructor(hostRef) {
    (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.accordionOpened = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "accordionOpened", 7);
    this.accordionWillOpen = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "accordionWillOpen", 7);
    this.accordionItemClicked = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "accordionItemClicked", 7);
    this.accordionItemsChecked = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "accordionItemsChecked", 7);
    this.defaultReportSelected = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "defaultReportSelected", 7);
    // debug data
    this.debugContent = [];
    this.ignoreClick = 0;
    this._idPrefix = 'ba-accordion-';
    this._idItemPrefix = 'ba-item-';
    this._idIconPrefix = 'ba-accordion-icon-';
    this._idContentPrefix = 'ba-content-';
    this._isReport = false;
    this._dbg = false;
    /* Props */
    // @Prop() checkboxAlignRight: boolean = false;  // shows checkboxes on the right side of each item
    this.hideOnEmpty = 'true'; // hides accordion when empty
    this.displayCount = true; // shows a count of accordion content items
    this.contentInline = 'true'; // displays accordion content inline or absolute positioned over other elements
    this.stSourceCountry = 'US';
    this.stShowDefault = false;
    this.toggleCheckState = (data, id) => {
      if (data && data.length > 0 && id) {
        for (let i = 0; i < data.length; i++) {
          if (data[i].id === id) {
            const checked = data[i].isChecked;
            data[i].isChecked = !checked;
            return !checked;
          }
        }
      }
      return false;
    };
    this.onCheckAllChanged = (ev) => {
      const self = this;
      const elemChecked = ev.srcElement?.checked;
      const checkState = !elemChecked;
      const _delay = function () {
        self.notifyCheckedItems(checkState);
      };
      setTimeout(_delay, 0);
    };
    this.langCode = 'en-us';
    this.sourceCountry = 'US';
  }
  /* Watches */
  onSourceCountryChanged() {
    this.stSourceCountry = this.sourceCountry;
  }
  onshowDefaultChanged() {
    this.stShowDefault = this.showDefault == 'true';
  }
  onDefaultReportChanged() {
    this.stDefaultReportId = this.defaultReportId;
  }
  onSugliteChanged() {
    this.stSuglite = false;
    if (typeof this.suglite !== undefined && (this.suglite === 'true')) {
      this.stSuglite = true;
    }
  }
  onContentChanged() {
    try {
      if (this.content && _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.A.hasText(this.content))
        this.stContent = JSON.parse(this.content);
    }
    catch (ex) {
      _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.L.show('%e', ex);
    }
  }
  onAccordionTextChanged() {
    this.stDisplayName = this.displayname;
  }
  onSelectedIdChanged() {
    this.stSelectedId = this.selectedId;
  }
  onGroupIdChanged() {
    this.stGroupId = this.groupid;
  }
  onContentInlineChanged() {
    this.stContentInline = (this.contentInline == 'true');
  }
  accordionCheckboxChanged() {
    this.stShowCheckboxes = this.showCheckboxes;
  }
  // Update the Infographic Report when the arcgis-report-list changes
  accordionOpenedEventHandler(event) {
    let groupId = event.detail.groupid;
    let emitId = event.detail.instanceId;
    if (emitId != null && emitId != this._instanceId) {
      if (groupId != null) {
        if (!this.stGroupId && this.groupid)
          this.stGroupId = this.groupid;
        if (this.stGroupId && this.stGroupId == groupId) {
          // received a signal that another accordion just opened,
          // that means we should close this one.
          this.closeAccordion(null);
        }
      }
    }
  }
  // @Method()
  async openAccordion() {
  }
  // @Method()
  async setSelectedId(id) {
    this.selectedId = id;
    this.stSelectedId = id;
  }
  // @Method()
  async setShowCheckbox(flag) {
    this.stShowCheckboxes = flag;
  }
  // @Method()
  async setShowDefault(flag, defaultId) {
    this.stShowDefault = flag;
    this.stDefaultReportId = defaultId;
  }
  async setColorTheme(name) {
    if (name && _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.A.hasText(name) && this.el) {
      this.stColorTheme = name.trim().toLowerCase();
      const n = name.trim().toLowerCase();
      if (n === 'light') {
        this.el.style.setProperty('--calcite-ui-brand', '#007ac2');
        this.el.style.setProperty('--calcite-ui-brand-hover', '#00619b');
        this.el.style.setProperty('--calcite-ui-brand-press', '#004874');
        this.el.style.setProperty('--calcite-ui-background', '#f8f8f8');
        this.el.style.setProperty('--calcite-ui-foreground-1', '#ffffff');
        this.el.style.setProperty('--calcite-ui-foreground-2', '#f3f3f3');
        this.el.style.setProperty('--calcite-ui-foreground-3', '#eaeaea');
        this.el.style.setProperty('--calcite-ui-text-1', '#151515');
        this.el.style.setProperty('--calcite-ui-text-2', '#4a4a4a');
        this.el.style.setProperty('--calcite-ui-text-3', '#6a6a6a');
        this.el.style.setProperty('--calcite-ui-text-inverse', '#ffffff');
        this.el.style.setProperty('--calcite-ui-text-link', '#00619b');
        this.el.style.setProperty('--calcite-ui-border-1', '#cacaca');
        this.el.style.setProperty('--calcite-ui-border-2', '#d4d4d4');
        this.el.style.setProperty('--calcite-ui-border-3', '#dfdfdf');
        this.el.style.setProperty('--calcite-ui-border-input', '#949494');
        this.el.style.setProperty('--calcite-ui-info', '#00619b');
        this.el.style.setProperty('--calcite-ui-success', '#35ac46');
      }
      else if (n === 'dark') {
        this.el.style.setProperty('--calcite-ui-brand', '#009af2');
        this.el.style.setProperty('--calcite-ui-brand-hover', '#007ac2');
        this.el.style.setProperty('--calcite-ui-brand-press', '#00619b');
        this.el.style.setProperty('--calcite-ui-background', '#353535');
        this.el.style.setProperty('--calcite-ui-foreground-1', '#2b2b2b');
        this.el.style.setProperty('--calcite-ui-foreground-2', '#202020');
        this.el.style.setProperty('--calcite-ui-foreground-3', '#151515');
        this.el.style.setProperty('--calcite-ui-text-1', '#ffffff');
        this.el.style.setProperty('--calcite-ui-text-2', '#bfbfbf');
        this.el.style.setProperty('--calcite-ui-text-3', '#9f9f9f');
        this.el.style.setProperty('--calcite-ui-text-inverse', '#151515');
        this.el.style.setProperty('--calcite-ui-text-link', '#00a0ff');
        this.el.style.setProperty('--calcite-ui-border-1', '#555555');
        this.el.style.setProperty('--calcite-ui-border-2', '#4a4a4a');
        this.el.style.setProperty('--calcite-ui-border-3', '#404040');
        this.el.style.setProperty('--calcite-ui-border-input', '#757575');
        this.el.style.setProperty('--calcite-ui-info', '#00a0ff');
        this.el.style.setProperty('--calcite-ui-success', '#36da43');
      }
    }
  }
  componentWillLoad() {
    if (this._dbg) {
      console.log('%c ACCORDION: will load', 'color:orange;font-size:11pt');
    }
    this.stLangCode = this.langCode;
    this.stSourceCountry = this.sourceCountry;
    this.stShowCheckboxes = this.showCheckboxes;
    this.stShowDefault = this.showDefault == 'true';
    this.stDefaultReportId = this.defaultReportId;
    if (!this._instanceId)
      this._instanceId = _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.E.generateId(this._idPrefix).id;
    if (!this._instanceContentId)
      this._instanceContentId = _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.E.generateId(this._idContentPrefix).id;
    if (!this._instanceIconId)
      this._instanceIconId = _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.E.generateId(this._idIconPrefix).id;
    this.stSuglite = false;
    if (typeof this.suglite !== undefined && (this.suglite === 'true')) {
      this.stSuglite = true;
    }
    // const self = this;
    if (!this.stDisplayName || this.stDisplayName.length <= 0) {
      if (this.displayname && this.displayname.length > 0)
        this.stDisplayName = this.displayname;
      else {
        this.stDisplayName = '?';
      }
    }
    if (!this.stGroupId && this.groupid)
      this.stGroupId = this.groupid;
    if (!this.stContentInline && this.contentInline)
      this.stContentInline = (this.contentInline == 'true');
    if (!this.stContent && this.content && _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.A.hasText(this.content)) {
      try {
        this.stContent = JSON.parse(this.content);
      }
      catch (error) {
        this.stContent = {};
      }
    }
    this.stSelectedId = this.selectedId;
  }
  componentDidLoad() {
    const self = this;
    if (this.el) {
      this.el.addEventListener('click', (ev) => {
        self.onClickAccordion.call(self, ev);
      });
    }
    self.applyStyles();
    // const makeDefs = ACLUtils.queryElementAll.call(this, 'calcite-list-item.ba-report-item')
    // if (makeDefs) {
    //   for (let ii = 0; ii < makeDefs.length; ii++) {
    //     const icon = makeDefs[ii]
    //     icon.addEventListener('click', (ev) => {
    //       self.onClickListItemAction.call(self, ev)
    //     })
    //   }
    // }
  }
  componentDidRender() {
    const self = this;
    setTimeout(() => {
      self.applyStyles();
    }, 10);
  }
  applyStyles() {
    if (this._dbg) {
      console.log('%c ACCORDION applyStyles');
    }
    // styling in case we are showing checkboxes
    if (this.stShowCheckboxes) {
      // apply size to calcite-checkbox div inside the shadow dom
      const calciteAcc = _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.A.queryElement.call(this, 'calcite-accordion');
      if (calciteAcc) {
        const calciteAccItem = calciteAcc.querySelector('calcite-accordion-item');
        if (calciteAccItem) {
          const aiShadow = calciteAccItem.shadowRoot;
          if (aiShadow) {
            // adjust accordion main label
            const headerContent = aiShadow.querySelector('div.header-content');
            if (headerContent) {
              headerContent.style.position = 'relative';
              headerContent.style.top = '2px';
              headerContent.style.left = '1px';
              headerContent.style.padding = '8px 12px 10px 12px';
            }
          }
          // adjust accordion main checkbox
          const check = calciteAccItem.querySelector('calcite-checkbox');
          if (check) {
            const boxDiv = _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.A.queryElement.call(check, 'div.toggle');
            if (boxDiv) {
              boxDiv.style.position = 'relative';
              boxDiv.style.left = '-3px';
              boxDiv.style.width = '16px';
              boxDiv.style.height = '14px';
              boxDiv.style.border = 'solid 1px var(--calcite-ui-border-2)';
            }
          }
          // for all list items
          const list = calciteAcc.querySelector('calcite-list');
          if (list) {
            const listItems = list.querySelectorAll('calcite-list-item');
            if (listItems && listItems.length > 0) {
              for (let ii = 0; ii < listItems.length; ii++) {
                const item = listItems[ii];
                // accordion label
                const labelElem = _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.A.queryElement.call(item, 'div.label');
                if (labelElem) {
                  labelElem.style.position = 'relative';
                  labelElem.style.left = '1px';
                  labelElem.style.padding = '0';
                }
                // accordion list item checkbox
                const check = item.querySelector('calcite-checkbox');
                if (check) {
                  const boxDiv = _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.A.queryElement.call(check, 'div.toggle');
                  if (boxDiv) {
                    boxDiv.style.position = 'relative';
                    boxDiv.style.left = '5px';
                    boxDiv.style.width = '15px';
                    boxDiv.style.height = '13px';
                    boxDiv.style.border = 'solid 1px var(--calcite-ui-border-2)';
                  }
                }
              }
            }
          }
          const divActionStart = _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.A.queryElement.call(calciteAccItem, 'div.actions-start');
          if (divActionStart) {
            divActionStart.style.width = '24px';
          }
        }
      }
    }
  }
  onCheckboxChanged(id) {
    if (this._dbg) {
      console.log('%c ACCORDION: onCheckboxChanged', 'color:orange;font-size:11pt;');
    }
    const reportId = id;
    const isChecked = this.toggleCheckState(this.stContent, reportId);
    this.notifyCheckedItems(isChecked, reportId);
    this.updateCheckboxes();
    return false;
  }
  /*
   * closeAccordion
   *
   *    context - internal use only, set to null otherwise
   */
  closeAccordion(context) {
    let accordion = context ? context.elem : _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.A.queryElementById.call(this, this._instanceId);
    let content = context ? context.content : _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.A.queryElementById.call(this, this._instanceContentId);
    let icon = context ? context.icon : _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.A.queryElementById.call(this, this._instanceIconId);
    accordion.classList.remove('accordion__active');
    content.style.maxHeight = null;
    icon.setAttribute('icon-end', 'caret-down');
    // hide content to prevent tab actions
    this.hideContent(content);
  }
  // shows the accordion content div containing all the row items
  showContent(content) {
    if (!content)
      content = _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.A.queryElementById.call(this, this._instanceContentId);
    if (content.classList.contains('ba-content-hidden')) {
      content.classList.remove('ba-content-hidden');
    }
  }
  hideContent(content) {
    if (!content)
      content = _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.A.queryElementById.call(this, this._instanceContentId);
    if (!content.classList.contains('ba-content-hidden')) {
      content.classList.add('ba-content-hidden');
    }
  }
  onClickAccordionItem(e, context, data) {
    if (!data.usesCheckbox) {
      // data = { id:<reportid>, name:<reportName> }
      this.accordionItemClicked.emit({ context: context, item: data });
    }
    e.stopPropagation();
    e.preventDefault();
    return false;
  }
  onClickMakeDefaultAction(ev, reportId) {
    const name = this._getContentItem(reportId).name;
    const isDefault = reportId == this.stDefaultReportId;
    if (isDefault) {
      this.stDefaultReportId = '';
    }
    else {
      // notify listeners of default change
      this.stDefaultReportId = reportId;
      this.defaultReportSelected.emit({ reportId: reportId, name: name });
    }
    // close the menu popover
    const popoverId = reportId + '-pop';
    const popoverElem = _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.A.queryElementById.call(this, _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.A.fixId(popoverId));
    if (popoverElem) {
      popoverElem.setAttribute('open', 'false');
    }
  }
  onClickAccordion(ev) {
    if (ev.target.classList.contains('ba-target-check'))
      return false;
    if (this.ignoreClick > 0) {
      this.ignoreClick--;
      return false;
    }
    // const acc = ACLUtils.queryElementById.call (this, this._instanceId)
    const acc = ev.currentTarget;
    const content = _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.A.queryElementById.call(this, this._instanceContentId);
    const icon = _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.A.queryElementById.call(this, this._instanceIconId);
    if (content) {
      if (content.style.maxHeight) {
        // accordion is currently open
        this.closeAccordion({ elem: acc, content: content, icon: icon });
      }
      else {
        // accordion is closed - open it
        acc.classList.add('accordion__active');
        content.style.maxHeight = '100%'; //content.scrollHeight + 'px';
        // icon.innerText = '-';
        icon.setAttribute('icon-end', 'caret-up');
        this.showContent(content);
        // notify other accordions in our group that this accordion just opened
        this.accordionOpened.emit({ accordion: this, groupid: this.stGroupId, instanceId: this._instanceId });
        function _afterAnimation() {
          content.style.overflow = 'auto';
        }
        setTimeout(_afterAnimation, 500);
      }
    }
    return true;
  }
  _getContent() {
    // Note: stContent is an object, content is a string
    if (!this.stContent) {
      if (this.content) {
        this.stContent = JSON.parse(this.content);
      }
      else {
        if (!this.showDebug) {
          let accElem = _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.A.queryElementById.call(this, this._instanceId);
          if (accElem) {
            let c = accElem.getAttribute('content');
            if (c && c.length > 0) {
              this.content = c;
              this.stContent = JSON.parse(this.content);
            }
          }
        }
      }
    }
    return this.stContent;
  }
  _getContentItem(id) {
    for (let ii = 0; ii < this.stContent.length; ii++) {
      let item = this.stContent[ii];
      if (item.id == id) {
        return item;
      }
    }
    return null;
  }
  _setContentItem(id, prop, val) {
    for (let ii = 0; ii < this.stContent.length; ii++) {
      let item = this.stContent.stContenttent[ii];
      if (item.id == id) {
        this.stContent[ii][prop] = val;
        break;
      }
    }
  }
  _toggleContentItem(id, prop) {
    let item = this._getContentItem(id);
    if (item) {
      const newValue = item[prop] ? false : true;
      this._setContentItem(id, prop, newValue);
    }
  }
  updateCheckboxes() {
    this.stTimestamp = new Date().getTime();
  }
  // emits notification when any/all checkbox changes
  //   list = array of reportIds to set, or (null or empty) to set all
  //   newState = new forced state to notify
  //
  notifyCheckedItems(newState, id) {
    const applyToAll = (!id || !_ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.A.hasText(id));
    const checkboxes = this.el.shadowRoot?.querySelectorAll('calcite-checkbox[data-group]');
    if (checkboxes) {
      const reports = [];
      for (let ii = 0; ii < checkboxes.length; ii++) {
        const box = checkboxes[ii];
        let flag = box.checked;
        const reportId = box.getAttribute('guid');
        if (reportId && _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.A.hasText(reportId)) {
          if (applyToAll || id == reportId) {
            flag = newState;
          }
          const report = { id: reportId, isChecked: flag };
          reports.push(report);
        }
      }
      if (reports.length > 0) {
        // Notify other components
        this.accordionItemsChecked.emit({ accordion: this, reports: reports });
      }
    }
  }
  renderMakeDefaultUI(reportId) {
    const actionStyle = {
      'padding': '4px',
      'position': 'relative',
      'left': '12px'
    };
    // const listItemStyle = {
    //   'min-width': '160px',
    //   'display': 'flex'
    // }
    // const listItemIconStyle = {
    //   'display': 'flex',
    //   'flex': '0 0 auto',
    //   'width': '28px',
    //   'height': '28px',
    //   'transform': 'scale(0.7)'
    // }
    // const listItemTextStyle = {
    //   'display': 'flex',
    //   'flex': '1 1 auto',
    //   'justify-content': 'left',
    //   'text-align': 'left',
    //   'align-items': 'center',
    //   'padding-right': '5px',
    //   'max-width': '200px',
    //   'cursor': 'pointer'
    // }
    // const popoverListItemStyle = {
    //   'display': 'flex',
    //   'align-items': 'center'
    // }
    // Only renders the ellipsis and popup menu if 'showDefault' is true
    if (this.stShowDefault) {
      const makeDefText = _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.B.i18n('make-default');
      const removeDefText = _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.B.i18n('remove-default');
      const actionId = reportId + '-action';
      const popoverId = reportId + '-pop';
      const isDefault = reportId == this.stDefaultReportId;
      const popoverIconName = (isDefault) ? 'x' : 'check';
      const defText = (isDefault) ? removeDefText : makeDefText;
      const popoverActionId = reportId + '-popitem';
      return ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { slot: "actions-end", style: actionStyle }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-action", { id: actionId, icon: "ellipsis", "aria-expanded": "true", alignment: "center", appearance: "transparent", scale: "s" }), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-popover", { id: popoverId, "aria-hidden": "false", "aria-live": "polite", role: "dialog", "auto-close": "", "pointer-disabled": "", "offset-distance": "6", "offset-skidding": "0", "overlay-positioning": "fixed", placement: "left-end", scale: "m", "data-placement": "right-start", "reference-element": actionId, open: "" }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-action", { id: popoverActionId, text: defText, icon: popoverIconName, onClick: (e) => this.onClickMakeDefaultAction(e, reportId), "text-enabled": "true" }))));
    }
    else {
      return ('');
    }
  }
  getAccordion() {
    try {
      const self = this;
      let content = self._getContent();
      if (this._dbg) {
        console.log("%c getAccordion", 'color:orange;font-size:11pt', content, self.stShowDefault);
      }
      const sName = self.stDisplayName;
      const iconName = self.calciteicon || '';
      const listItemTextUnderlined = {
        'text-decoration': 'underline'
      };
      if (self.stShowCheckboxes) {
        let anyChecked = [];
        if (self.stContent?.length > 0) {
          anyChecked = self.stContent.some((obj) => obj.isChecked);
        }
        const mainCheckStyle = {
          'margin': '-2px -4px 0px 5px',
          'width': '16px',
          'height': '16px',
          'position': 'relative',
          'left': '5px',
          'top': '2px'
        };
        const listCheckStyle = {
          'margin': '-4px 0px 0px -4px',
          'width': '15px',
          'height': '13px'
        };
        return ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-accordion", { appearance: "solid", "icon-position": "end" }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-accordion-item", { scale: "s", heading: sName }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-checkbox", { slot: "actions-start", style: mainCheckStyle, name: 'Select All', value: "all", checked: anyChecked, onClick: self.onCheckAllChanged }), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-list", null, content
          ? content.map(({ id, name, subText }) => {
            const accListItemId = id + '-acc-item';
            const isDefault = id == this.stDefaultReportId;
            const defStyle = (isDefault) ? listItemTextUnderlined : '';
            return ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-list-item", { id: accListItemId, label: name, data: id, description: subText || '', style: defStyle }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-checkbox", { style: listCheckStyle, name: name, "data-group": self.reportsGroupId, value: id, id: id, slot: "actions-start", checked: self.stContent && self.stContent.some((obj) => obj.id === id && obj.isChecked), onClick: (e) => self.onCheckboxChanged(e.target.value) }), self.renderMakeDefaultUI(id)));
          })
          : ''))));
      }
      else {
        return ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-accordion", { appearance: "solid", "icon-position": "end" }, content ?
          (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-accordion-item", { "icon-start": iconName, scale: "s", heading: sName, expanded: content.some((obj) => obj['id'] === self.stSelectedId) ? true : false }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-tree", null, content
            ? content.map(({ id, name }) => ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-tree-item", { style: {
                padding: '8px 0',
                whiteSpace: 'wrap',
                overflowX: 'hidden',
                lineHeight: '1.25rem',
              }, data: id, label: name, selected: id === self.stSelectedId ? true : false, onclick: (e) => self.onClickAccordionItem(e, self, { id: id, name: name }) }, name, self.renderMakeDefaultUI(id))))
            : ''))
          : ''));
      }
    }
    catch (error) {
      console.log(error);
    }
  }
  render() {
    const self = this;
    let content = self._getContent();
    if (!content) {
      return;
    }
    this._isReport = self.el.classList.contains('reportList');
    return (this.getAccordion());
  }
  get el() { return (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.g)(this); }
  static get watchers() { return {
    "sourceCountry": ["onSourceCountryChanged"],
    "showDefault": ["onshowDefaultChanged"],
    "defaultReportId": ["onDefaultReportChanged"],
    "suglite": ["onSugliteChanged"],
    "content": ["onContentChanged"],
    "displayname": ["onAccordionTextChanged"],
    "selectedId": ["onSelectedIdChanged"],
    "groupid": ["onGroupIdChanged"],
    "contentInline": ["onContentInlineChanged"],
    "showCheckboxes": ["accordionCheckboxChanged"]
  }; }
};
BaAccordion.style = baAccordionCss;

/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.5
 */
const SLOTS = {
  dropdownTrigger: "trigger"
};

const dropdownCss = "@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host([disabled]){pointer-events:none;cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host{display:inline-flex;flex:0 1 auto}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}:host .calcite-dropdown-wrapper{--calcite-floating-ui-z-index:600;display:block;position:absolute;z-index:var(--calcite-floating-ui-z-index);visibility:hidden}.calcite-dropdown-wrapper .calcite-floating-ui-anim{position:relative;transition:var(--calcite-floating-ui-transition);transition-property:transform, visibility, opacity;opacity:0;box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);z-index:1;border-radius:0.25rem}.calcite-dropdown-wrapper[data-placement^=bottom] .calcite-floating-ui-anim{transform:translateY(-5px)}.calcite-dropdown-wrapper[data-placement^=top] .calcite-floating-ui-anim{transform:translateY(5px)}.calcite-dropdown-wrapper[data-placement^=left] .calcite-floating-ui-anim{transform:translateX(5px)}.calcite-dropdown-wrapper[data-placement^=right] .calcite-floating-ui-anim{transform:translateX(-5px)}.calcite-dropdown-wrapper[data-placement] .calcite-floating-ui-anim--active{opacity:1;transform:translate(0)}:host([open]) .calcite-dropdown-wrapper{visibility:visible}:host .calcite-dropdown-content{max-block-size:45vh;inline-size:auto;overflow-y:auto;overflow-x:hidden;background-color:var(--calcite-ui-foreground-1);inline-size:var(--calcite-dropdown-width)}.calcite-trigger-container{position:relative;display:flex;flex:1 1 auto}@media (forced-colors: active){:host([open]) .calcite-dropdown-wrapper{border:1px solid canvasText}}:host([width=s]){--calcite-dropdown-width:12rem}:host([width=m]){--calcite-dropdown-width:14rem}:host([width=l]){--calcite-dropdown-width:16rem}";

const Dropdown = class {
  constructor(hostRef) {
    (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.calciteDropdownSelect = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteDropdownSelect", 6);
    this.calciteDropdownBeforeClose = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteDropdownBeforeClose", 6);
    this.calciteDropdownClose = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteDropdownClose", 6);
    this.calciteDropdownBeforeOpen = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteDropdownBeforeOpen", 6);
    this.calciteDropdownOpen = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteDropdownOpen", 6);
    this.items = [];
    this.groups = [];
    this.mutationObserver = (0,_observers_56740e99_js__WEBPACK_IMPORTED_MODULE_2__.c)("mutation", () => this.updateItems());
    this.resizeObserver = (0,_observers_56740e99_js__WEBPACK_IMPORTED_MODULE_2__.c)("resize", (entries) => this.resizeObserverCallback(entries));
    this.openTransitionProp = "opacity";
    this.guid = `calcite-dropdown-${(0,_guid_88a3729f_js__WEBPACK_IMPORTED_MODULE_3__.g)()}`;
    this.defaultAssignedElements = [];
    //--------------------------------------------------------------------------
    //
    //  Private Methods
    //
    //--------------------------------------------------------------------------
    this.slotChangeHandler = (event) => {
      this.defaultAssignedElements = event.target.assignedElements({
        flatten: true
      });
      this.updateItems();
    };
    this.setFilteredPlacements = () => {
      const { el, flipPlacements } = this;
      this.filteredFlipPlacements = flipPlacements
        ? (0,_floating_ui_f29517e7_js__WEBPACK_IMPORTED_MODULE_4__.f)(flipPlacements, el)
        : null;
    };
    this.updateTriggers = (event) => {
      this.triggers = event.target.assignedElements({
        flatten: true
      });
      this.reposition(true);
    };
    this.updateItems = () => {
      this.items = this.groups
        .map((group) => Array.from(group?.querySelectorAll("calcite-dropdown-item")))
        .reduce((previousValue, currentValue) => [...previousValue, ...currentValue], []);
      this.updateSelectedItems();
      this.reposition(true);
    };
    this.updateGroups = (event) => {
      const groups = event.target
        .assignedElements({ flatten: true })
        .filter((el) => el?.matches("calcite-dropdown-group"));
      this.groups = groups;
      this.updateItems();
    };
    this.resizeObserverCallback = (entries) => {
      entries.forEach((entry) => {
        const { target } = entry;
        if (target === this.referenceEl) {
          this.setDropdownWidth();
        }
        else if (target === this.scrollerEl) {
          this.setMaxScrollerHeight();
        }
      });
    };
    this.setDropdownWidth = () => {
      const { referenceEl, scrollerEl } = this;
      const referenceElWidth = referenceEl?.clientWidth;
      if (!referenceElWidth || !scrollerEl) {
        return;
      }
      scrollerEl.style.minWidth = `${referenceElWidth}px`;
    };
    this.setMaxScrollerHeight = () => {
      const { scrollerEl } = this;
      if (!scrollerEl) {
        return;
      }
      this.reposition(true);
      const maxScrollerHeight = this.getMaxScrollerHeight();
      scrollerEl.style.maxHeight = maxScrollerHeight > 0 ? `${maxScrollerHeight}px` : "";
      this.reposition(true);
    };
    this.setScrollerAndTransitionEl = (el) => {
      this.resizeObserver.observe(el);
      this.scrollerEl = el;
      this.transitionEl = el;
      (0,_openCloseComponent_7d58834c_js__WEBPACK_IMPORTED_MODULE_5__.c)(this);
    };
    this.setReferenceEl = (el) => {
      this.referenceEl = el;
      (0,_floating_ui_f29517e7_js__WEBPACK_IMPORTED_MODULE_4__.c)(this, this.referenceEl, this.floatingEl);
      this.resizeObserver.observe(el);
    };
    this.setFloatingEl = (el) => {
      this.floatingEl = el;
      (0,_floating_ui_f29517e7_js__WEBPACK_IMPORTED_MODULE_4__.c)(this, this.referenceEl, this.floatingEl);
    };
    this.keyDownHandler = (event) => {
      const target = event.target;
      if (target !== this.referenceEl) {
        return;
      }
      const { defaultPrevented, key } = event;
      if (defaultPrevented) {
        return;
      }
      if (this.open) {
        if (key === "Escape") {
          this.closeCalciteDropdown();
          event.preventDefault();
          return;
        }
        else if (event.shiftKey && key === "Tab") {
          this.closeCalciteDropdown();
          event.preventDefault();
          return;
        }
      }
      if ((0,_key_b75491c4_js__WEBPACK_IMPORTED_MODULE_6__.i)(key)) {
        this.openCalciteDropdown();
        event.preventDefault();
      }
      else if (key === "Escape") {
        this.closeCalciteDropdown();
        event.preventDefault();
      }
    };
    this.focusOnFirstActiveOrFirstItem = () => {
      this.getFocusableElement(this.items.find((item) => item.selected) || this.items[0]);
    };
    this.toggleOpenEnd = () => {
      this.focusOnFirstActiveOrFirstItem();
      this.el.removeEventListener("calciteDropdownOpen", this.toggleOpenEnd);
    };
    this.openCalciteDropdown = () => {
      this.open = !this.open;
      if (this.open) {
        this.el.addEventListener("calciteDropdownOpen", this.toggleOpenEnd);
      }
    };
    this.open = false;
    this.closeOnSelectDisabled = false;
    this.disabled = false;
    this.flipPlacements = undefined;
    this.maxItems = 0;
    this.overlayPositioning = "absolute";
    this.placement = _floating_ui_f29517e7_js__WEBPACK_IMPORTED_MODULE_4__.d;
    this.scale = "m";
    this.selectedItems = [];
    this.type = "click";
    this.width = undefined;
  }
  openHandler(value) {
    if (!this.disabled) {
      if (value) {
        this.reposition(true);
      }
      else {
        (0,_floating_ui_f29517e7_js__WEBPACK_IMPORTED_MODULE_4__.u)(this.floatingEl);
      }
      return;
    }
    if (!value) {
      (0,_floating_ui_f29517e7_js__WEBPACK_IMPORTED_MODULE_4__.u)(this.floatingEl);
    }
    this.open = false;
  }
  handleDisabledChange(value) {
    if (!value) {
      this.open = false;
    }
  }
  flipPlacementsHandler() {
    this.setFilteredPlacements();
    this.reposition(true);
  }
  maxItemsHandler() {
    this.setMaxScrollerHeight();
  }
  overlayPositioningHandler() {
    this.reposition(true);
  }
  placementHandler() {
    this.reposition(true);
  }
  //--------------------------------------------------------------------------
  //
  //  Lifecycle
  //
  //--------------------------------------------------------------------------
  connectedCallback() {
    this.mutationObserver?.observe(this.el, { childList: true, subtree: true });
    this.setFilteredPlacements();
    this.reposition(true);
    if (this.open) {
      this.openHandler(this.open);
    }
    (0,_openCloseComponent_7d58834c_js__WEBPACK_IMPORTED_MODULE_5__.c)(this);
  }
  componentDidLoad() {
    this.reposition(true);
  }
  componentDidRender() {
    (0,_interactive_29995522_js__WEBPACK_IMPORTED_MODULE_7__.u)(this);
  }
  disconnectedCallback() {
    this.mutationObserver?.disconnect();
    (0,_floating_ui_f29517e7_js__WEBPACK_IMPORTED_MODULE_4__.a)(this, this.referenceEl, this.floatingEl);
    this.resizeObserver?.disconnect();
    (0,_openCloseComponent_7d58834c_js__WEBPACK_IMPORTED_MODULE_5__.d)(this);
  }
  render() {
    const { open, guid } = this;
    return ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.H, null, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "calcite-trigger-container", id: `${guid}-menubutton`, onClick: this.openCalciteDropdown, onKeyDown: this.keyDownHandler, ref: this.setReferenceEl }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { "aria-controls": `${guid}-menu`, "aria-expanded": (0,_dom_f1ee4d04_js__WEBPACK_IMPORTED_MODULE_8__.t)(open), "aria-haspopup": "menu", name: SLOTS.dropdownTrigger, onSlotchange: this.updateTriggers })), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { "aria-hidden": (0,_dom_f1ee4d04_js__WEBPACK_IMPORTED_MODULE_8__.t)(!open), class: "calcite-dropdown-wrapper", ref: this.setFloatingEl }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { "aria-labelledby": `${guid}-menubutton`, class: {
        ["calcite-dropdown-content"]: true,
        [_floating_ui_f29517e7_js__WEBPACK_IMPORTED_MODULE_4__.F.animation]: true,
        [_floating_ui_f29517e7_js__WEBPACK_IMPORTED_MODULE_4__.F.animationActive]: open
      }, id: `${guid}-menu`, ref: this.setScrollerAndTransitionEl, role: "menu" }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { onSlotchange: this.updateGroups })))));
  }
  //--------------------------------------------------------------------------
  //
  //  Public Methods
  //
  //--------------------------------------------------------------------------
  /**
   * Updates the position of the component.
   *
   * @param delayed
   */
  async reposition(delayed = false) {
    const { floatingEl, referenceEl, placement, overlayPositioning, filteredFlipPlacements } = this;
    return (0,_floating_ui_f29517e7_js__WEBPACK_IMPORTED_MODULE_4__.r)(this, {
      floatingEl,
      referenceEl,
      overlayPositioning,
      placement,
      flipPlacements: filteredFlipPlacements,
      type: "menu"
    }, delayed);
  }
  closeCalciteDropdownOnClick(event) {
    if (!(0,_dom_f1ee4d04_js__WEBPACK_IMPORTED_MODULE_8__.i)(event) || !this.open || event.composedPath().includes(this.el)) {
      return;
    }
    this.closeCalciteDropdown(false);
  }
  closeCalciteDropdownOnEvent(event) {
    this.closeCalciteDropdown();
    event.stopPropagation();
  }
  closeCalciteDropdownOnOpenEvent(event) {
    if (event.composedPath().includes(this.el)) {
      return;
    }
    this.open = false;
  }
  mouseEnterHandler() {
    if (this.type === "hover") {
      this.openCalciteDropdown();
    }
  }
  mouseLeaveHandler() {
    if (this.type === "hover") {
      this.closeCalciteDropdown();
    }
  }
  calciteInternalDropdownItemKeyEvent(event) {
    const { keyboardEvent } = event.detail;
    const target = keyboardEvent.target;
    switch (keyboardEvent.key) {
      case "Tab":
        if (this.items.indexOf(target) === this.items.length - 1 && !keyboardEvent.shiftKey) {
          this.closeCalciteDropdown();
        }
        else if (this.items.indexOf(target) === 0 && keyboardEvent.shiftKey) {
          this.closeCalciteDropdown();
        }
        break;
      case "ArrowDown":
        (0,_dom_f1ee4d04_js__WEBPACK_IMPORTED_MODULE_8__.p)(this.items, target, "next");
        break;
      case "ArrowUp":
        (0,_dom_f1ee4d04_js__WEBPACK_IMPORTED_MODULE_8__.p)(this.items, target, "previous");
        break;
      case "Home":
        (0,_dom_f1ee4d04_js__WEBPACK_IMPORTED_MODULE_8__.p)(this.items, target, "first");
        break;
      case "End":
        (0,_dom_f1ee4d04_js__WEBPACK_IMPORTED_MODULE_8__.p)(this.items, target, "last");
        break;
    }
    event.stopPropagation();
  }
  handleItemSelect(event) {
    this.updateSelectedItems();
    event.stopPropagation();
    this.calciteDropdownSelect.emit();
    if (!this.closeOnSelectDisabled ||
      event.detail.requestedDropdownGroup.selectionMode === "none") {
      this.closeCalciteDropdown();
    }
    event.stopPropagation();
  }
  onBeforeOpen() {
    this.calciteDropdownBeforeOpen.emit();
  }
  onOpen() {
    this.calciteDropdownOpen.emit();
  }
  onBeforeClose() {
    this.calciteDropdownBeforeClose.emit();
  }
  onClose() {
    this.calciteDropdownClose.emit();
  }
  updateSelectedItems() {
    this.selectedItems = this.items.filter((item) => item.selected);
  }
  getMaxScrollerHeight() {
    const { maxItems, items } = this;
    let itemsToProcess = 0;
    let maxScrollerHeight = 0;
    let groupHeaderHeight;
    this.groups.forEach((group) => {
      if (maxItems > 0 && itemsToProcess < maxItems) {
        Array.from(group.children).forEach((item, index) => {
          if (index === 0) {
            if (isNaN(groupHeaderHeight)) {
              groupHeaderHeight = item.offsetTop;
            }
            maxScrollerHeight += groupHeaderHeight;
          }
          if (itemsToProcess < maxItems) {
            maxScrollerHeight += item.offsetHeight;
            itemsToProcess += 1;
          }
        });
      }
    });
    return items.length > maxItems ? maxScrollerHeight : 0;
  }
  closeCalciteDropdown(focusTrigger = true) {
    this.open = false;
    if (focusTrigger) {
      (0,_dom_f1ee4d04_js__WEBPACK_IMPORTED_MODULE_8__.h)(this.triggers[0]);
    }
  }
  getFocusableElement(item) {
    if (!item) {
      return;
    }
    const target = item.attributes.isLink
      ? item.shadowRoot.querySelector("a")
      : item;
    (0,_dom_f1ee4d04_js__WEBPACK_IMPORTED_MODULE_8__.h)(target);
  }
  static get delegatesFocus() { return true; }
  get el() { return (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.g)(this); }
  static get watchers() { return {
    "open": ["openHandler"],
    "disabled": ["handleDisabledChange"],
    "flipPlacements": ["flipPlacementsHandler"],
    "maxItems": ["maxItemsHandler"],
    "overlayPositioning": ["overlayPositioningHandler"],
    "placement": ["placementHandler"]
  }; }
};
Dropdown.style = dropdownCss;

/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.5
 */
const CSS$1 = {
  containerSmall: "container--s",
  containerMedium: "container--m",
  containerLarge: "container--l"
};

const dropdownGroupCss = "@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{position:relative;display:block}.container{text-align:start}.container--s{font-size:var(--calcite-font-size--2);line-height:1rem}.container--s .dropdown-title{padding:0.5rem}.container--m{font-size:var(--calcite-font-size--1);line-height:1rem}.container--m .dropdown-title{padding:0.75rem}.container--l{font-size:var(--calcite-font-size-0);line-height:1.25rem}.container--l .dropdown-title{padding:1rem}.dropdown-title{margin-block-end:-1px;display:block;cursor:default;overflow-wrap:break-word;border-width:0px;border-block-end-width:1px;border-style:solid;border-color:var(--calcite-ui-border-3);font-weight:var(--calcite-font-weight-bold);color:var(--calcite-ui-text-2)}.dropdown-separator{display:block;block-size:1px;background-color:var(--calcite-ui-border-3)}";

const DropdownGroup = class {
  constructor(hostRef) {
    (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.calciteInternalDropdownItemChange = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteInternalDropdownItemChange", 6);
    this.groupTitle = undefined;
    this.selectionMode = "single";
    this.scale = undefined;
  }
  //--------------------------------------------------------------------------
  //
  //  Lifecycle
  //
  //--------------------------------------------------------------------------
  componentWillLoad() {
    this.groupPosition = this.getGroupPosition();
  }
  render() {
    const scale = this.scale || (0,_dom_f1ee4d04_js__WEBPACK_IMPORTED_MODULE_8__.f)(this.el, "scale", "m");
    const groupTitle = this.groupTitle ? ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-hidden": "true", class: "dropdown-title" }, this.groupTitle)) : null;
    const dropdownSeparator = this.groupPosition > 0 ? (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "dropdown-separator", role: "separator" }) : null;
    return ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.H, { "aria-label": this.groupTitle, role: "group" }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: {
        container: true,
        [CSS$1.containerSmall]: scale === "s",
        [CSS$1.containerMedium]: scale === "m",
        [CSS$1.containerLarge]: scale === "l"
      }, title: this.groupTitle }, dropdownSeparator, groupTitle, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", null))));
  }
  //--------------------------------------------------------------------------
  //
  //  Event Listeners
  //
  //--------------------------------------------------------------------------
  updateActiveItemOnChange(event) {
    this.requestedDropdownGroup = event.detail.requestedDropdownGroup;
    this.requestedDropdownItem = event.detail.requestedDropdownItem;
    this.calciteInternalDropdownItemChange.emit({
      requestedDropdownGroup: this.requestedDropdownGroup,
      requestedDropdownItem: this.requestedDropdownItem
    });
  }
  //--------------------------------------------------------------------------
  //
  //  Private Methods
  //
  //--------------------------------------------------------------------------
  getGroupPosition() {
    return Array.prototype.indexOf.call(this.el.parentElement.querySelectorAll("calcite-dropdown-group"), this.el);
  }
  static get delegatesFocus() { return true; }
  get el() { return (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.g)(this); }
};
DropdownGroup.style = dropdownGroupCss;

/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.5
 */
const CSS = {
  containerLink: "container--link",
  containerSmall: "container--s",
  containerMedium: "container--m",
  containerLarge: "container--l",
  containerMulti: "container--multi-selection",
  containerSingle: "container--single-selection",
  containerNone: "container--none-selection",
  icon: "dropdown-item-icon",
  iconEnd: "dropdown-item-icon-end",
  iconStart: "dropdown-item-icon-start",
  itemContent: "dropdown-item-content",
  link: "dropdown-link"
};

const dropdownItemCss = "@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}.container--s{padding-block:0.25rem;font-size:var(--calcite-font-size--2);line-height:1rem;padding-inline-end:0.5rem;padding-inline-start:1.5rem}.container--m{padding-block:0.5rem;font-size:var(--calcite-font-size--1);line-height:1rem;padding-inline-end:0.75rem;padding-inline-start:2rem}.container--l{padding-block:0.625rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;padding-inline-end:1rem;padding-inline-start:2.5rem}.container--s.container--none-selection{padding-inline-start:0.25rem}.container--s.container--none-selection .dropdown-link{padding-inline-start:0px}.container--m.container--none-selection{padding-inline-start:0.5rem}.container--m.container--none-selection .dropdown-link{padding-inline-start:0px}.container--l.container--none-selection{padding-inline-start:0.75rem}.container--l.container--none-selection .dropdown-link{padding-inline-start:0px}:host{position:relative;display:flex;flex-grow:1;align-items:center}.container{position:relative;display:flex;flex-grow:1;cursor:pointer;align-items:center;color:var(--calcite-ui-text-3);text-decoration-line:none;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);text-align:start}.dropdown-item-content{flex:1 1 auto;padding-block:0.125rem;padding-inline-end:auto;padding-inline-start:0.25rem}:host,.container--link a{outline-color:transparent}:host(:focus){outline:2px solid transparent;outline:2px solid var(--calcite-ui-brand);outline-offset:-2px}.container--link{padding:0px}.container--link a{position:relative;display:flex;flex-grow:1;cursor:pointer;align-items:center;color:var(--calcite-ui-text-3);text-decoration-line:none;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}.container--s .dropdown-link{padding-block:0.25rem;font-size:var(--calcite-font-size--2);line-height:1rem;padding-inline-end:0.5rem;padding-inline-start:1.5rem}.container--m .dropdown-link{padding-block:0.5rem;font-size:var(--calcite-font-size--1);line-height:1rem;padding-inline-end:0.75rem;padding-inline-start:2rem}.container--l .dropdown-link{padding-block:0.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;padding-inline-end:1rem;padding-inline-start:2.5rem}:host(:hover) .container,:host(:active) .container{background-color:var(--calcite-ui-foreground-2);color:var(--calcite-ui-text-1);text-decoration-line:none}:host(:hover) .container--link .dropdown-link,:host(:active) .container--link .dropdown-link{color:var(--calcite-ui-text-1)}:host(:focus) .container{color:var(--calcite-ui-text-1);text-decoration-line:none}:host(:active) .container{background-color:var(--calcite-ui-foreground-3)}:host(:hover) .container:before,:host(:active) .container:before,:host(:focus) .container:before{opacity:1}:host([selected]) .container:not(.container--none-selection),:host([selected]) .container--link .dropdown-link{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-ui-text-1)}:host([selected]) .container:not(.container--none-selection):before,:host([selected]) .container--link .dropdown-link:before{opacity:1;color:var(--calcite-ui-brand)}:host([selected]) .container:not(.container--none-selection) calcite-icon,:host([selected]) .container--link .dropdown-link calcite-icon{color:var(--calcite-ui-brand)}.container--multi-selection:before,.container--none-selection:before{display:none}.container--s:before{inset-inline-start:0.5rem}.container--m:before{inset-inline-start:0.75rem}.container--l:before{inset-inline-start:1rem}.dropdown-item-icon{position:absolute;opacity:0;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transform:scale(0.9)}.container--s .dropdown-item-icon{inset-inline-start:0.25rem}.container--m .dropdown-item-icon{inset-inline-start:0.5rem}.container--l .dropdown-item-icon{inset-inline-start:0.75rem}:host(:hover) .dropdown-item-icon{color:var(--calcite-ui-border-1);opacity:1}:host([selected]) .dropdown-item-icon{color:var(--calcite-ui-brand);opacity:1}.container--s .dropdown-item-icon-start{margin-inline-end:0.5rem;margin-inline-start:0.25rem}.container--s .dropdown-item-icon-end{margin-inline-start:0.5rem}.container--m .dropdown-item-icon-start{margin-inline-end:0.75rem;margin-inline-start:0.25rem}.container--m .dropdown-item-icon-end{margin-inline-start:0.75rem}.container--l .dropdown-item-icon-start{margin-inline-end:1rem;margin-inline-start:0.25rem}.container--l .dropdown-item-icon-end{margin-inline-start:1rem}";

const DropdownItem = class {
  constructor(hostRef) {
    (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.calciteDropdownItemSelect = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteDropdownItemSelect", 6);
    this.calciteInternalDropdownItemSelect = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteInternalDropdownItemSelect", 6);
    this.calciteInternalDropdownItemKeyEvent = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteInternalDropdownItemKeyEvent", 6);
    this.calciteInternalDropdownCloseRequest = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteInternalDropdownCloseRequest", 6);
    /** Specifies the scale of dropdown-item controlled by the parent, defaults to m */
    this.scale = "m";
    this.selected = false;
    this.iconFlipRtl = undefined;
    this.iconStart = undefined;
    this.iconEnd = undefined;
    this.href = undefined;
    this.label = undefined;
    this.rel = undefined;
    this.target = undefined;
  }
  //--------------------------------------------------------------------------
  //
  //  Public Methods
  //
  //--------------------------------------------------------------------------
  /** Sets focus on the component. */
  async setFocus() {
    await (0,_loadable_cc14d728_js__WEBPACK_IMPORTED_MODULE_9__.c)(this);
    this.el?.focus();
  }
  //--------------------------------------------------------------------------
  //
  //  Lifecycle
  //
  //--------------------------------------------------------------------------
  componentWillLoad() {
    (0,_loadable_cc14d728_js__WEBPACK_IMPORTED_MODULE_9__.a)(this);
    this.initialize();
  }
  componentDidLoad() {
    (0,_loadable_cc14d728_js__WEBPACK_IMPORTED_MODULE_9__.s)(this);
  }
  connectedCallback() {
    this.initialize();
  }
  render() {
    const scale = (0,_dom_f1ee4d04_js__WEBPACK_IMPORTED_MODULE_8__.f)(this.el, "scale", this.scale);
    const iconStartEl = ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { class: CSS.iconStart, flipRtl: this.iconFlipRtl === "start" || this.iconFlipRtl === "both", icon: this.iconStart, scale: scale === "l" ? "m" : "s" }));
    const contentNode = ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: CSS.itemContent }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", null)));
    const iconEndEl = ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { class: CSS.iconEnd, flipRtl: this.iconFlipRtl === "end" || this.iconFlipRtl === "both", icon: this.iconEnd, scale: scale === "l" ? "m" : "s" }));
    const slottedContent = this.iconStart && this.iconEnd
      ? [iconStartEl, contentNode, iconEndEl]
      : this.iconStart
        ? [iconStartEl, contentNode]
        : this.iconEnd
          ? [contentNode, iconEndEl]
          : contentNode;
    const contentEl = !this.href ? (slottedContent) : ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("a", { "aria-label": this.label, class: CSS.link, href: this.href, ref: (el) => (this.childLink = el), rel: this.rel, tabIndex: -1, target: this.target }, slottedContent));
    const itemRole = this.href
      ? null
      : this.selectionMode === "single"
        ? "menuitemradio"
        : this.selectionMode === "multiple"
          ? "menuitemcheckbox"
          : "menuitem";
    const itemAria = this.selectionMode !== "none" ? (0,_dom_f1ee4d04_js__WEBPACK_IMPORTED_MODULE_8__.t)(this.selected) : null;
    return ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.H, { "aria-checked": itemAria, role: itemRole, tabindex: "0" }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: {
        container: true,
        [CSS.containerLink]: !!this.href,
        [CSS.containerSmall]: scale === "s",
        [CSS.containerMedium]: scale === "m",
        [CSS.containerLarge]: scale === "l",
        [CSS.containerMulti]: this.selectionMode === "multiple",
        [CSS.containerSingle]: this.selectionMode === "single",
        [CSS.containerNone]: this.selectionMode === "none"
      } }, this.selectionMode !== "none" ? ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { class: CSS.icon, icon: this.selectionMode === "multiple" ? "check" : "bullet-point", scale: scale === "l" ? "m" : "s" })) : null, contentEl)));
  }
  //--------------------------------------------------------------------------
  //
  //  Event Listeners
  //
  //--------------------------------------------------------------------------
  onClick() {
    this.emitRequestedItem();
  }
  keyDownHandler(event) {
    switch (event.key) {
      case " ":
      case "Enter":
        this.emitRequestedItem();
        if (this.href) {
          this.childLink.click();
        }
        event.preventDefault();
        break;
      case "Escape":
        this.calciteInternalDropdownCloseRequest.emit();
        event.preventDefault();
        break;
      case "Tab":
        this.calciteInternalDropdownItemKeyEvent.emit({ keyboardEvent: event });
        break;
      case "ArrowUp":
      case "ArrowDown":
      case "Home":
      case "End":
        event.preventDefault();
        this.calciteInternalDropdownItemKeyEvent.emit({ keyboardEvent: event });
        break;
    }
  }
  updateActiveItemOnChange(event) {
    const parentEmittedChange = event.composedPath().includes(this.parentDropdownGroupEl);
    if (parentEmittedChange) {
      this.requestedDropdownGroup = event.detail.requestedDropdownGroup;
      this.requestedDropdownItem = event.detail.requestedDropdownItem;
      this.determineActiveItem();
    }
    event.stopPropagation();
  }
  //--------------------------------------------------------------------------
  //
  //  Private Methods
  //
  //--------------------------------------------------------------------------
  initialize() {
    this.selectionMode = (0,_dom_f1ee4d04_js__WEBPACK_IMPORTED_MODULE_8__.f)(this.el, "selection-mode", "single");
    this.parentDropdownGroupEl = this.el.closest("calcite-dropdown-group");
    if (this.selectionMode === "none") {
      this.selected = false;
    }
  }
  determineActiveItem() {
    switch (this.selectionMode) {
      case "multiple":
        if (this.el === this.requestedDropdownItem) {
          this.selected = !this.selected;
        }
        break;
      case "single":
        if (this.el === this.requestedDropdownItem) {
          this.selected = true;
        }
        else if (this.requestedDropdownGroup === this.parentDropdownGroupEl) {
          this.selected = false;
        }
        break;
      case "none":
        this.selected = false;
        break;
    }
  }
  emitRequestedItem() {
    this.calciteDropdownItemSelect.emit();
    this.calciteInternalDropdownItemSelect.emit({
      requestedDropdownItem: this.el,
      requestedDropdownGroup: this.parentDropdownGroupEl
    });
  }
  get el() { return (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.g)(this); }
};
DropdownItem.style = dropdownItemCss;



//# sourceMappingURL=ba-accordion_4.entry.js.map

/***/ }),

/***/ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/interactive-29995522.js":
/*!*****************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/interactive-29995522.js ***!
  \*****************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   u: () => (/* binding */ updateHostInteraction)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.5
 */
function noopClick() {
  /** noop */
}
/**
 * This helper updates the host element to prevent keyboard interaction on its subtree and sets the appropriate aria attribute for accessibility.
 *
 * This should be used in the `componentDidRender` lifecycle hook.
 *
 * **Notes**
 *
 * this util is not needed for simple components whose root element or elements are an interactive component (custom element or native control). For those cases, set the `disabled` props on the root components instead.
 * technically, users can override `tabindex` and restore keyboard navigation, but this will be considered user error
 *
 * @param component
 * @param hostIsTabbable
 */
function updateHostInteraction(component, hostIsTabbable = false) {
  if (component.disabled) {
    component.el.setAttribute("tabindex", "-1");
    component.el.setAttribute("aria-disabled", "true");
    if (component.el.contains(document.activeElement)) {
      document.activeElement.blur();
    }
    component.el.click = noopClick;
    return;
  }
  component.el.click = HTMLElement.prototype.click;
  if (typeof hostIsTabbable === "function") {
    component.el.setAttribute("tabindex", hostIsTabbable.call(component) ? "0" : "-1");
  }
  else if (hostIsTabbable === true) {
    component.el.setAttribute("tabindex", "0");
  }
  else if (hostIsTabbable === false) {
    component.el.removeAttribute("tabindex");
  }
  else ;
  component.el.removeAttribute("aria-disabled");
}



//# sourceMappingURL=interactive-29995522.js.map

/***/ }),

/***/ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/key-b75491c4.js":
/*!*********************************************************************************************************************************************!*\
  !*** ./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/key-b75491c4.js ***!
  \*********************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   i: () => (/* binding */ isActivationKey),
/* harmony export */   n: () => (/* binding */ numberKeys)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.5
 */
function isActivationKey(key) {
  return key === "Enter" || key === " ";
}
const numberKeys = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"];



//# sourceMappingURL=key-b75491c4.js.map

/***/ }),

/***/ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/loadable-cc14d728.js":
/*!**************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/loadable-cc14d728.js ***!
  \**************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ setUpLoadableComponent),
/* harmony export */   c: () => (/* binding */ componentLoaded),
/* harmony export */   s: () => (/* binding */ setComponentLoaded)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.5
 */
const resolveMap = new WeakMap();
const promiseMap = new WeakMap();
/**
 * This helper util sets up the component for the ability to know when the component has been loaded.
 *
 * This should be used in the `componentWillLoad` lifecycle hook.
 *
 * ```
 * componentWillLoad(): void {
 *   setUpLoadableComponent(this);
 * }
 * ```
 *
 * @param component
 */
function setUpLoadableComponent(component) {
  promiseMap.set(component, new Promise((resolve) => resolveMap.set(component, resolve)));
}
/**
 * This helper util lets the loadable component know that it is now loaded.
 *
 * This should be used in the `componentDidLoad` lifecycle hook.
 *
 * ```
 * componentDidLoad(): void {
 *   setComponentLoaded(this);
 * }
 * ```
 *
 * @param component
 */
function setComponentLoaded(component) {
  resolveMap.get(component)();
}
/**
 * This helper util can be used to ensure a component has been loaded (The "componentDidLoad" stencil lifecycle method has been called).
 *
 * Requires "setUpLoadableComponent" and "setComponentLoaded" to be called first.
 *
 * A component developer can await this method before proceeding with any logic that requires a component to be loaded first.
 *
 * ```
 * async setFocus(): Promise<void> {
 *   await componentLoaded(this);
 * }
 * ```
 *
 * @param component
 * @returns Promise<void>
 */
function componentLoaded(component) {
  return promiseMap.get(component);
}



//# sourceMappingURL=loadable-cc14d728.js.map

/***/ }),

/***/ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/observers-56740e99.js":
/*!***************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/observers-56740e99.js ***!
  \***************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ createObserver)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.5
 */
/**
 * This utility ensures observers are created only for browser contexts.
 *
 * @param type - the type of observer to create
 * @param callback - the observer callback
 * @param options - the observer options
 */
function createObserver(type, callback, options) {
  const Observer = getObserver(type);
  return new Observer(callback, options);
}
function getObserver(type) {
  // based on https://github.com/whatwg/dom/issues/126#issuecomment-1049814948
  class ExtendedMutationObserver extends window.MutationObserver {
    constructor(callback) {
      super(callback);
      this.observedEntry = [];
      this.callback = callback;
    }
    observe(target, options) {
      this.observedEntry.push({ target, options });
      return super.observe(target, options);
    }
    unobserve(target) {
      const newObservedEntries = this.observedEntry.filter((observed) => observed.target !== target);
      this.observedEntry = [];
      this.callback(super.takeRecords(), this);
      this.disconnect();
      newObservedEntries.forEach((observed) => this.observe(observed.target, observed.options));
    }
  }
  return (function () {
    return (type === "intersection"
      ? window.IntersectionObserver
      : type === "mutation"
        ? ExtendedMutationObserver
        : window.ResizeObserver);
  })();
}



//# sourceMappingURL=observers-56740e99.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYmEtaW5mb2dyYXBoaWNfbm9kZV9tb2R1bGVzX2FyY2dpc19idXNpbmVzcy1hbmFseXN0LWNvbXBvbmVudHNfZGlzLTJjZDI1My5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUE2RztBQUNBO0FBQ3lDO0FBQzREO0FBQ25LO0FBQ3dCO0FBQ2Q7QUFDSztBQUN1RDtBQUNEO0FBQ25GO0FBQ0E7QUFDRDs7QUFFaEMsMENBQTBDLGtDQUFrQyw2QkFBNkIscUNBQXFDLDRCQUE0Qjs7QUFFMUs7QUFDQTtBQUNBLElBQUkscURBQWdCO0FBQ3BCLDJCQUEyQixxREFBVztBQUN0Qyw2QkFBNkIscURBQVc7QUFDeEMsZ0NBQWdDLHFEQUFXO0FBQzNDLGlDQUFpQyxxREFBVztBQUM1QyxpQ0FBaUMscURBQVc7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQ7QUFDckQsK0JBQStCO0FBQy9CLDhCQUE4QjtBQUM5QixpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsaUJBQWlCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixzREFBUTtBQUNsQztBQUNBO0FBQ0E7QUFDQSxNQUFNLHNEQUFJO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVzQzs7QUFFdEM7Ozs7Ozs7Ozs7Ozs7OztBQy9DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRWlEOztBQUVqRDs7Ozs7Ozs7Ozs7Ozs7OztBQ1pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVzRjs7QUFFdEY7Ozs7Ozs7Ozs7Ozs7O0FDN0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLGlCQUFpQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFK0I7O0FBRS9CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9iYS1pbmZvZ3JhcGhpYy9ub2RlX21vZHVsZXMvQGFyY2dpcy9idXNpbmVzcy1hbmFseXN0LWNvbXBvbmVudHMvZGlzdC9zdGVuY2lsLWNvbXBvbmVudHMvZGlzdC9lc20vYmEtYWNjb3JkaW9uXzQuZW50cnkuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9iYS1pbmZvZ3JhcGhpYy9ub2RlX21vZHVsZXMvQGFyY2dpcy9idXNpbmVzcy1hbmFseXN0LWNvbXBvbmVudHMvZGlzdC9zdGVuY2lsLWNvbXBvbmVudHMvZGlzdC9lc20vaW50ZXJhY3RpdmUtMjk5OTU1MjIuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9iYS1pbmZvZ3JhcGhpYy9ub2RlX21vZHVsZXMvQGFyY2dpcy9idXNpbmVzcy1hbmFseXN0LWNvbXBvbmVudHMvZGlzdC9zdGVuY2lsLWNvbXBvbmVudHMvZGlzdC9lc20va2V5LWI3NTQ5MWM0LmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYmEtaW5mb2dyYXBoaWMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYnVzaW5lc3MtYW5hbHlzdC1jb21wb25lbnRzL2Rpc3Qvc3RlbmNpbC1jb21wb25lbnRzL2Rpc3QvZXNtL2xvYWRhYmxlLWNjMTRkNzI4LmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYmEtaW5mb2dyYXBoaWMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYnVzaW5lc3MtYW5hbHlzdC1jb21wb25lbnRzL2Rpc3Qvc3RlbmNpbC1jb21wb25lbnRzL2Rpc3QvZXNtL29ic2VydmVycy01Njc0MGU5OS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByIGFzIHJlZ2lzdGVySW5zdGFuY2UsIGMgYXMgY3JlYXRlRXZlbnQsIGgsIGcgYXMgZ2V0RWxlbWVudCwgSCBhcyBIb3N0IH0gZnJvbSAnLi9pbmRleC00ZTY0NzQxMS5qcyc7XG5pbXBvcnQgeyBBIGFzIEFDTFV0aWxzLCBMIGFzIExvZ3osIEUgYXMgRWxlbWVudElkcywgQiBhcyBCYVJlcG9ydHNMYW5ndWFnZSB9IGZyb20gJy4vRWxlbWVudElkcy1hMmM0MDU5Mi5qcyc7XG5pbXBvcnQgeyB0IGFzIHRvQXJpYUJvb2xlYW4sIGkgYXMgaXNQcmltYXJ5UG9pbnRlckJ1dHRvbiwgcCBhcyBmb2N1c0VsZW1lbnRJbkdyb3VwLCBoIGFzIGZvY3VzRWxlbWVudCwgZiBhcyBnZXRFbGVtZW50UHJvcCB9IGZyb20gJy4vZG9tLWYxZWU0ZDA0LmpzJztcbmltcG9ydCB7IGYgYXMgZmlsdGVyQ29tcHV0ZWRQbGFjZW1lbnRzLCBjIGFzIGNvbm5lY3RGbG9hdGluZ1VJLCBkIGFzIGRlZmF1bHRNZW51UGxhY2VtZW50LCB1IGFzIHVwZGF0ZUFmdGVyQ2xvc2UsIGEgYXMgZGlzY29ubmVjdEZsb2F0aW5nVUksIEYgYXMgRmxvYXRpbmdDU1MsIHIgYXMgcmVwb3NpdGlvbiB9IGZyb20gJy4vZmxvYXRpbmctdWktZjI5NTE3ZTcuanMnO1xuaW1wb3J0IHsgZyBhcyBndWlkIH0gZnJvbSAnLi9ndWlkLTg4YTM3MjlmLmpzJztcbmltcG9ydCB7IHUgYXMgdXBkYXRlSG9zdEludGVyYWN0aW9uIH0gZnJvbSAnLi9pbnRlcmFjdGl2ZS0yOTk5NTUyMi5qcyc7XG5pbXBvcnQgeyBpIGFzIGlzQWN0aXZhdGlvbktleSB9IGZyb20gJy4va2V5LWI3NTQ5MWM0LmpzJztcbmltcG9ydCB7IGMgYXMgY3JlYXRlT2JzZXJ2ZXIgfSBmcm9tICcuL29ic2VydmVycy01Njc0MGU5OS5qcyc7XG5pbXBvcnQgeyBjIGFzIGNvbm5lY3RPcGVuQ2xvc2VDb21wb25lbnQsIGQgYXMgZGlzY29ubmVjdE9wZW5DbG9zZUNvbXBvbmVudCB9IGZyb20gJy4vb3BlbkNsb3NlQ29tcG9uZW50LTdkNTg4MzRjLmpzJztcbmltcG9ydCB7IGMgYXMgY29tcG9uZW50TG9hZGVkLCBhIGFzIHNldFVwTG9hZGFibGVDb21wb25lbnQsIHMgYXMgc2V0Q29tcG9uZW50TG9hZGVkIH0gZnJvbSAnLi9sb2FkYWJsZS1jYzE0ZDcyOC5qcyc7XG5pbXBvcnQgJy4vaW5kZXguZXNtLTFjNjVkOGM3LmpzJztcbmltcG9ydCAnLi9yZXNvdXJjZXMtNDg0MzZlZWEuanMnO1xuaW1wb3J0ICcuL2RlYm91bmNlLTA0N2UwOWY0LmpzJztcblxuY29uc3QgYmFBY2NvcmRpb25Dc3MgPSBcImNhbGNpdGUtbGlzdC1pdGVte21hcmdpbi1ibG9jay1lbmQ6dW5zZXQgIWltcG9ydGFudDstLXR3LXNoYWRvdzp1bnNldCAhaW1wb3J0YW50Oy0tdHctc2hhZG93LWNvbG9yZWQ6dW5zZXQgIWltcG9ydGFudDtib3gtc2hhZG93OnVuc2V0ICFpbXBvcnRhbnR9XCI7XG5cbmNvbnN0IEJhQWNjb3JkaW9uID0gY2xhc3Mge1xyXG4gIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcclxuICAgIHJlZ2lzdGVySW5zdGFuY2UodGhpcywgaG9zdFJlZik7XHJcbiAgICB0aGlzLmFjY29yZGlvbk9wZW5lZCA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiYWNjb3JkaW9uT3BlbmVkXCIsIDcpO1xyXG4gICAgdGhpcy5hY2NvcmRpb25XaWxsT3BlbiA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiYWNjb3JkaW9uV2lsbE9wZW5cIiwgNyk7XHJcbiAgICB0aGlzLmFjY29yZGlvbkl0ZW1DbGlja2VkID0gY3JlYXRlRXZlbnQodGhpcywgXCJhY2NvcmRpb25JdGVtQ2xpY2tlZFwiLCA3KTtcclxuICAgIHRoaXMuYWNjb3JkaW9uSXRlbXNDaGVja2VkID0gY3JlYXRlRXZlbnQodGhpcywgXCJhY2NvcmRpb25JdGVtc0NoZWNrZWRcIiwgNyk7XHJcbiAgICB0aGlzLmRlZmF1bHRSZXBvcnRTZWxlY3RlZCA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiZGVmYXVsdFJlcG9ydFNlbGVjdGVkXCIsIDcpO1xyXG4gICAgLy8gZGVidWcgZGF0YVxyXG4gICAgdGhpcy5kZWJ1Z0NvbnRlbnQgPSBbXTtcclxuICAgIHRoaXMuaWdub3JlQ2xpY2sgPSAwO1xyXG4gICAgdGhpcy5faWRQcmVmaXggPSAnYmEtYWNjb3JkaW9uLSc7XHJcbiAgICB0aGlzLl9pZEl0ZW1QcmVmaXggPSAnYmEtaXRlbS0nO1xyXG4gICAgdGhpcy5faWRJY29uUHJlZml4ID0gJ2JhLWFjY29yZGlvbi1pY29uLSc7XHJcbiAgICB0aGlzLl9pZENvbnRlbnRQcmVmaXggPSAnYmEtY29udGVudC0nO1xyXG4gICAgdGhpcy5faXNSZXBvcnQgPSBmYWxzZTtcclxuICAgIHRoaXMuX2RiZyA9IGZhbHNlO1xyXG4gICAgLyogUHJvcHMgKi9cclxuICAgIC8vIEBQcm9wKCkgY2hlY2tib3hBbGlnblJpZ2h0OiBib29sZWFuID0gZmFsc2U7ICAvLyBzaG93cyBjaGVja2JveGVzIG9uIHRoZSByaWdodCBzaWRlIG9mIGVhY2ggaXRlbVxyXG4gICAgdGhpcy5oaWRlT25FbXB0eSA9ICd0cnVlJzsgLy8gaGlkZXMgYWNjb3JkaW9uIHdoZW4gZW1wdHlcclxuICAgIHRoaXMuZGlzcGxheUNvdW50ID0gdHJ1ZTsgLy8gc2hvd3MgYSBjb3VudCBvZiBhY2NvcmRpb24gY29udGVudCBpdGVtc1xyXG4gICAgdGhpcy5jb250ZW50SW5saW5lID0gJ3RydWUnOyAvLyBkaXNwbGF5cyBhY2NvcmRpb24gY29udGVudCBpbmxpbmUgb3IgYWJzb2x1dGUgcG9zaXRpb25lZCBvdmVyIG90aGVyIGVsZW1lbnRzXHJcbiAgICB0aGlzLnN0U291cmNlQ291bnRyeSA9ICdVUyc7XHJcbiAgICB0aGlzLnN0U2hvd0RlZmF1bHQgPSBmYWxzZTtcclxuICAgIHRoaXMudG9nZ2xlQ2hlY2tTdGF0ZSA9IChkYXRhLCBpZCkgPT4ge1xyXG4gICAgICBpZiAoZGF0YSAmJiBkYXRhLmxlbmd0aCA+IDAgJiYgaWQpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGlmIChkYXRhW2ldLmlkID09PSBpZCkge1xyXG4gICAgICAgICAgICBjb25zdCBjaGVja2VkID0gZGF0YVtpXS5pc0NoZWNrZWQ7XHJcbiAgICAgICAgICAgIGRhdGFbaV0uaXNDaGVja2VkID0gIWNoZWNrZWQ7XHJcbiAgICAgICAgICAgIHJldHVybiAhY2hlY2tlZDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIHRoaXMub25DaGVja0FsbENoYW5nZWQgPSAoZXYpID0+IHtcclxuICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICAgIGNvbnN0IGVsZW1DaGVja2VkID0gZXYuc3JjRWxlbWVudD8uY2hlY2tlZDtcclxuICAgICAgY29uc3QgY2hlY2tTdGF0ZSA9ICFlbGVtQ2hlY2tlZDtcclxuICAgICAgY29uc3QgX2RlbGF5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYubm90aWZ5Q2hlY2tlZEl0ZW1zKGNoZWNrU3RhdGUpO1xyXG4gICAgICB9O1xyXG4gICAgICBzZXRUaW1lb3V0KF9kZWxheSwgMCk7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5sYW5nQ29kZSA9ICdlbi11cyc7XHJcbiAgICB0aGlzLnNvdXJjZUNvdW50cnkgPSAnVVMnO1xyXG4gIH1cclxuICAvKiBXYXRjaGVzICovXHJcbiAgb25Tb3VyY2VDb3VudHJ5Q2hhbmdlZCgpIHtcclxuICAgIHRoaXMuc3RTb3VyY2VDb3VudHJ5ID0gdGhpcy5zb3VyY2VDb3VudHJ5O1xyXG4gIH1cclxuICBvbnNob3dEZWZhdWx0Q2hhbmdlZCgpIHtcclxuICAgIHRoaXMuc3RTaG93RGVmYXVsdCA9IHRoaXMuc2hvd0RlZmF1bHQgPT0gJ3RydWUnO1xyXG4gIH1cclxuICBvbkRlZmF1bHRSZXBvcnRDaGFuZ2VkKCkge1xyXG4gICAgdGhpcy5zdERlZmF1bHRSZXBvcnRJZCA9IHRoaXMuZGVmYXVsdFJlcG9ydElkO1xyXG4gIH1cclxuICBvblN1Z2xpdGVDaGFuZ2VkKCkge1xyXG4gICAgdGhpcy5zdFN1Z2xpdGUgPSBmYWxzZTtcclxuICAgIGlmICh0eXBlb2YgdGhpcy5zdWdsaXRlICE9PSB1bmRlZmluZWQgJiYgKHRoaXMuc3VnbGl0ZSA9PT0gJ3RydWUnKSkge1xyXG4gICAgICB0aGlzLnN0U3VnbGl0ZSA9IHRydWU7XHJcbiAgICB9XHJcbiAgfVxyXG4gIG9uQ29udGVudENoYW5nZWQoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAodGhpcy5jb250ZW50ICYmIEFDTFV0aWxzLmhhc1RleHQodGhpcy5jb250ZW50KSlcclxuICAgICAgICB0aGlzLnN0Q29udGVudCA9IEpTT04ucGFyc2UodGhpcy5jb250ZW50KTtcclxuICAgIH1cclxuICAgIGNhdGNoIChleCkge1xyXG4gICAgICBMb2d6LnNob3coJyVlJywgZXgpO1xyXG4gICAgfVxyXG4gIH1cclxuICBvbkFjY29yZGlvblRleHRDaGFuZ2VkKCkge1xyXG4gICAgdGhpcy5zdERpc3BsYXlOYW1lID0gdGhpcy5kaXNwbGF5bmFtZTtcclxuICB9XHJcbiAgb25TZWxlY3RlZElkQ2hhbmdlZCgpIHtcclxuICAgIHRoaXMuc3RTZWxlY3RlZElkID0gdGhpcy5zZWxlY3RlZElkO1xyXG4gIH1cclxuICBvbkdyb3VwSWRDaGFuZ2VkKCkge1xyXG4gICAgdGhpcy5zdEdyb3VwSWQgPSB0aGlzLmdyb3VwaWQ7XHJcbiAgfVxyXG4gIG9uQ29udGVudElubGluZUNoYW5nZWQoKSB7XHJcbiAgICB0aGlzLnN0Q29udGVudElubGluZSA9ICh0aGlzLmNvbnRlbnRJbmxpbmUgPT0gJ3RydWUnKTtcclxuICB9XHJcbiAgYWNjb3JkaW9uQ2hlY2tib3hDaGFuZ2VkKCkge1xyXG4gICAgdGhpcy5zdFNob3dDaGVja2JveGVzID0gdGhpcy5zaG93Q2hlY2tib3hlcztcclxuICB9XHJcbiAgLy8gVXBkYXRlIHRoZSBJbmZvZ3JhcGhpYyBSZXBvcnQgd2hlbiB0aGUgYXJjZ2lzLXJlcG9ydC1saXN0IGNoYW5nZXNcclxuICBhY2NvcmRpb25PcGVuZWRFdmVudEhhbmRsZXIoZXZlbnQpIHtcclxuICAgIGxldCBncm91cElkID0gZXZlbnQuZGV0YWlsLmdyb3VwaWQ7XHJcbiAgICBsZXQgZW1pdElkID0gZXZlbnQuZGV0YWlsLmluc3RhbmNlSWQ7XHJcbiAgICBpZiAoZW1pdElkICE9IG51bGwgJiYgZW1pdElkICE9IHRoaXMuX2luc3RhbmNlSWQpIHtcclxuICAgICAgaWYgKGdyb3VwSWQgIT0gbnVsbCkge1xyXG4gICAgICAgIGlmICghdGhpcy5zdEdyb3VwSWQgJiYgdGhpcy5ncm91cGlkKVxyXG4gICAgICAgICAgdGhpcy5zdEdyb3VwSWQgPSB0aGlzLmdyb3VwaWQ7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RHcm91cElkICYmIHRoaXMuc3RHcm91cElkID09IGdyb3VwSWQpIHtcclxuICAgICAgICAgIC8vIHJlY2VpdmVkIGEgc2lnbmFsIHRoYXQgYW5vdGhlciBhY2NvcmRpb24ganVzdCBvcGVuZWQsXHJcbiAgICAgICAgICAvLyB0aGF0IG1lYW5zIHdlIHNob3VsZCBjbG9zZSB0aGlzIG9uZS5cclxuICAgICAgICAgIHRoaXMuY2xvc2VBY2NvcmRpb24obnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vIEBNZXRob2QoKVxyXG4gIGFzeW5jIG9wZW5BY2NvcmRpb24oKSB7XHJcbiAgfVxyXG4gIC8vIEBNZXRob2QoKVxyXG4gIGFzeW5jIHNldFNlbGVjdGVkSWQoaWQpIHtcclxuICAgIHRoaXMuc2VsZWN0ZWRJZCA9IGlkO1xyXG4gICAgdGhpcy5zdFNlbGVjdGVkSWQgPSBpZDtcclxuICB9XHJcbiAgLy8gQE1ldGhvZCgpXHJcbiAgYXN5bmMgc2V0U2hvd0NoZWNrYm94KGZsYWcpIHtcclxuICAgIHRoaXMuc3RTaG93Q2hlY2tib3hlcyA9IGZsYWc7XHJcbiAgfVxyXG4gIC8vIEBNZXRob2QoKVxyXG4gIGFzeW5jIHNldFNob3dEZWZhdWx0KGZsYWcsIGRlZmF1bHRJZCkge1xyXG4gICAgdGhpcy5zdFNob3dEZWZhdWx0ID0gZmxhZztcclxuICAgIHRoaXMuc3REZWZhdWx0UmVwb3J0SWQgPSBkZWZhdWx0SWQ7XHJcbiAgfVxyXG4gIGFzeW5jIHNldENvbG9yVGhlbWUobmFtZSkge1xyXG4gICAgaWYgKG5hbWUgJiYgQUNMVXRpbHMuaGFzVGV4dChuYW1lKSAmJiB0aGlzLmVsKSB7XHJcbiAgICAgIHRoaXMuc3RDb2xvclRoZW1lID0gbmFtZS50cmltKCkudG9Mb3dlckNhc2UoKTtcclxuICAgICAgY29uc3QgbiA9IG5hbWUudHJpbSgpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgIGlmIChuID09PSAnbGlnaHQnKSB7XHJcbiAgICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYWxjaXRlLXVpLWJyYW5kJywgJyMwMDdhYzInKTtcclxuICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhbGNpdGUtdWktYnJhbmQtaG92ZXInLCAnIzAwNjE5YicpO1xyXG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS1icmFuZC1wcmVzcycsICcjMDA0ODc0Jyk7XHJcbiAgICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYWxjaXRlLXVpLWJhY2tncm91bmQnLCAnI2Y4ZjhmOCcpO1xyXG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS1mb3JlZ3JvdW5kLTEnLCAnI2ZmZmZmZicpO1xyXG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS1mb3JlZ3JvdW5kLTInLCAnI2YzZjNmMycpO1xyXG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS1mb3JlZ3JvdW5kLTMnLCAnI2VhZWFlYScpO1xyXG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS10ZXh0LTEnLCAnIzE1MTUxNScpO1xyXG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS10ZXh0LTInLCAnIzRhNGE0YScpO1xyXG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS10ZXh0LTMnLCAnIzZhNmE2YScpO1xyXG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS10ZXh0LWludmVyc2UnLCAnI2ZmZmZmZicpO1xyXG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS10ZXh0LWxpbmsnLCAnIzAwNjE5YicpO1xyXG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS1ib3JkZXItMScsICcjY2FjYWNhJyk7XHJcbiAgICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYWxjaXRlLXVpLWJvcmRlci0yJywgJyNkNGQ0ZDQnKTtcclxuICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhbGNpdGUtdWktYm9yZGVyLTMnLCAnI2RmZGZkZicpO1xyXG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS1ib3JkZXItaW5wdXQnLCAnIzk0OTQ5NCcpO1xyXG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS1pbmZvJywgJyMwMDYxOWInKTtcclxuICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhbGNpdGUtdWktc3VjY2VzcycsICcjMzVhYzQ2Jyk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAobiA9PT0gJ2RhcmsnKSB7XHJcbiAgICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYWxjaXRlLXVpLWJyYW5kJywgJyMwMDlhZjInKTtcclxuICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhbGNpdGUtdWktYnJhbmQtaG92ZXInLCAnIzAwN2FjMicpO1xyXG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS1icmFuZC1wcmVzcycsICcjMDA2MTliJyk7XHJcbiAgICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYWxjaXRlLXVpLWJhY2tncm91bmQnLCAnIzM1MzUzNScpO1xyXG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS1mb3JlZ3JvdW5kLTEnLCAnIzJiMmIyYicpO1xyXG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS1mb3JlZ3JvdW5kLTInLCAnIzIwMjAyMCcpO1xyXG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS1mb3JlZ3JvdW5kLTMnLCAnIzE1MTUxNScpO1xyXG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS10ZXh0LTEnLCAnI2ZmZmZmZicpO1xyXG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS10ZXh0LTInLCAnI2JmYmZiZicpO1xyXG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS10ZXh0LTMnLCAnIzlmOWY5ZicpO1xyXG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS10ZXh0LWludmVyc2UnLCAnIzE1MTUxNScpO1xyXG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS10ZXh0LWxpbmsnLCAnIzAwYTBmZicpO1xyXG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS1ib3JkZXItMScsICcjNTU1NTU1Jyk7XHJcbiAgICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYWxjaXRlLXVpLWJvcmRlci0yJywgJyM0YTRhNGEnKTtcclxuICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhbGNpdGUtdWktYm9yZGVyLTMnLCAnIzQwNDA0MCcpO1xyXG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS1ib3JkZXItaW5wdXQnLCAnIzc1NzU3NScpO1xyXG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS1pbmZvJywgJyMwMGEwZmYnKTtcclxuICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhbGNpdGUtdWktc3VjY2VzcycsICcjMzZkYTQzJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgY29tcG9uZW50V2lsbExvYWQoKSB7XHJcbiAgICBpZiAodGhpcy5fZGJnKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCclYyBBQ0NPUkRJT046IHdpbGwgbG9hZCcsICdjb2xvcjpvcmFuZ2U7Zm9udC1zaXplOjExcHQnKTtcclxuICAgIH1cclxuICAgIHRoaXMuc3RMYW5nQ29kZSA9IHRoaXMubGFuZ0NvZGU7XHJcbiAgICB0aGlzLnN0U291cmNlQ291bnRyeSA9IHRoaXMuc291cmNlQ291bnRyeTtcclxuICAgIHRoaXMuc3RTaG93Q2hlY2tib3hlcyA9IHRoaXMuc2hvd0NoZWNrYm94ZXM7XHJcbiAgICB0aGlzLnN0U2hvd0RlZmF1bHQgPSB0aGlzLnNob3dEZWZhdWx0ID09ICd0cnVlJztcclxuICAgIHRoaXMuc3REZWZhdWx0UmVwb3J0SWQgPSB0aGlzLmRlZmF1bHRSZXBvcnRJZDtcclxuICAgIGlmICghdGhpcy5faW5zdGFuY2VJZClcclxuICAgICAgdGhpcy5faW5zdGFuY2VJZCA9IEVsZW1lbnRJZHMuZ2VuZXJhdGVJZCh0aGlzLl9pZFByZWZpeCkuaWQ7XHJcbiAgICBpZiAoIXRoaXMuX2luc3RhbmNlQ29udGVudElkKVxyXG4gICAgICB0aGlzLl9pbnN0YW5jZUNvbnRlbnRJZCA9IEVsZW1lbnRJZHMuZ2VuZXJhdGVJZCh0aGlzLl9pZENvbnRlbnRQcmVmaXgpLmlkO1xyXG4gICAgaWYgKCF0aGlzLl9pbnN0YW5jZUljb25JZClcclxuICAgICAgdGhpcy5faW5zdGFuY2VJY29uSWQgPSBFbGVtZW50SWRzLmdlbmVyYXRlSWQodGhpcy5faWRJY29uUHJlZml4KS5pZDtcclxuICAgIHRoaXMuc3RTdWdsaXRlID0gZmFsc2U7XHJcbiAgICBpZiAodHlwZW9mIHRoaXMuc3VnbGl0ZSAhPT0gdW5kZWZpbmVkICYmICh0aGlzLnN1Z2xpdGUgPT09ICd0cnVlJykpIHtcclxuICAgICAgdGhpcy5zdFN1Z2xpdGUgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgLy8gY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICBpZiAoIXRoaXMuc3REaXNwbGF5TmFtZSB8fCB0aGlzLnN0RGlzcGxheU5hbWUubGVuZ3RoIDw9IDApIHtcclxuICAgICAgaWYgKHRoaXMuZGlzcGxheW5hbWUgJiYgdGhpcy5kaXNwbGF5bmFtZS5sZW5ndGggPiAwKVxyXG4gICAgICAgIHRoaXMuc3REaXNwbGF5TmFtZSA9IHRoaXMuZGlzcGxheW5hbWU7XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHRoaXMuc3REaXNwbGF5TmFtZSA9ICc/JztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKCF0aGlzLnN0R3JvdXBJZCAmJiB0aGlzLmdyb3VwaWQpXHJcbiAgICAgIHRoaXMuc3RHcm91cElkID0gdGhpcy5ncm91cGlkO1xyXG4gICAgaWYgKCF0aGlzLnN0Q29udGVudElubGluZSAmJiB0aGlzLmNvbnRlbnRJbmxpbmUpXHJcbiAgICAgIHRoaXMuc3RDb250ZW50SW5saW5lID0gKHRoaXMuY29udGVudElubGluZSA9PSAndHJ1ZScpO1xyXG4gICAgaWYgKCF0aGlzLnN0Q29udGVudCAmJiB0aGlzLmNvbnRlbnQgJiYgQUNMVXRpbHMuaGFzVGV4dCh0aGlzLmNvbnRlbnQpKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgdGhpcy5zdENvbnRlbnQgPSBKU09OLnBhcnNlKHRoaXMuY29udGVudCk7XHJcbiAgICAgIH1cclxuICAgICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgdGhpcy5zdENvbnRlbnQgPSB7fTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5zdFNlbGVjdGVkSWQgPSB0aGlzLnNlbGVjdGVkSWQ7XHJcbiAgfVxyXG4gIGNvbXBvbmVudERpZExvYWQoKSB7XHJcbiAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgIGlmICh0aGlzLmVsKSB7XHJcbiAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXYpID0+IHtcclxuICAgICAgICBzZWxmLm9uQ2xpY2tBY2NvcmRpb24uY2FsbChzZWxmLCBldik7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgc2VsZi5hcHBseVN0eWxlcygpO1xyXG4gICAgLy8gY29uc3QgbWFrZURlZnMgPSBBQ0xVdGlscy5xdWVyeUVsZW1lbnRBbGwuY2FsbCh0aGlzLCAnY2FsY2l0ZS1saXN0LWl0ZW0uYmEtcmVwb3J0LWl0ZW0nKVxyXG4gICAgLy8gaWYgKG1ha2VEZWZzKSB7XHJcbiAgICAvLyAgIGZvciAobGV0IGlpID0gMDsgaWkgPCBtYWtlRGVmcy5sZW5ndGg7IGlpKyspIHtcclxuICAgIC8vICAgICBjb25zdCBpY29uID0gbWFrZURlZnNbaWldXHJcbiAgICAvLyAgICAgaWNvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldikgPT4ge1xyXG4gICAgLy8gICAgICAgc2VsZi5vbkNsaWNrTGlzdEl0ZW1BY3Rpb24uY2FsbChzZWxmLCBldilcclxuICAgIC8vICAgICB9KVxyXG4gICAgLy8gICB9XHJcbiAgICAvLyB9XHJcbiAgfVxyXG4gIGNvbXBvbmVudERpZFJlbmRlcigpIHtcclxuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHNlbGYuYXBwbHlTdHlsZXMoKTtcclxuICAgIH0sIDEwKTtcclxuICB9XHJcbiAgYXBwbHlTdHlsZXMoKSB7XHJcbiAgICBpZiAodGhpcy5fZGJnKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCclYyBBQ0NPUkRJT04gYXBwbHlTdHlsZXMnKTtcclxuICAgIH1cclxuICAgIC8vIHN0eWxpbmcgaW4gY2FzZSB3ZSBhcmUgc2hvd2luZyBjaGVja2JveGVzXHJcbiAgICBpZiAodGhpcy5zdFNob3dDaGVja2JveGVzKSB7XHJcbiAgICAgIC8vIGFwcGx5IHNpemUgdG8gY2FsY2l0ZS1jaGVja2JveCBkaXYgaW5zaWRlIHRoZSBzaGFkb3cgZG9tXHJcbiAgICAgIGNvbnN0IGNhbGNpdGVBY2MgPSBBQ0xVdGlscy5xdWVyeUVsZW1lbnQuY2FsbCh0aGlzLCAnY2FsY2l0ZS1hY2NvcmRpb24nKTtcclxuICAgICAgaWYgKGNhbGNpdGVBY2MpIHtcclxuICAgICAgICBjb25zdCBjYWxjaXRlQWNjSXRlbSA9IGNhbGNpdGVBY2MucXVlcnlTZWxlY3RvcignY2FsY2l0ZS1hY2NvcmRpb24taXRlbScpO1xyXG4gICAgICAgIGlmIChjYWxjaXRlQWNjSXRlbSkge1xyXG4gICAgICAgICAgY29uc3QgYWlTaGFkb3cgPSBjYWxjaXRlQWNjSXRlbS5zaGFkb3dSb290O1xyXG4gICAgICAgICAgaWYgKGFpU2hhZG93KSB7XHJcbiAgICAgICAgICAgIC8vIGFkanVzdCBhY2NvcmRpb24gbWFpbiBsYWJlbFxyXG4gICAgICAgICAgICBjb25zdCBoZWFkZXJDb250ZW50ID0gYWlTaGFkb3cucXVlcnlTZWxlY3RvcignZGl2LmhlYWRlci1jb250ZW50Jyk7XHJcbiAgICAgICAgICAgIGlmIChoZWFkZXJDb250ZW50KSB7XHJcbiAgICAgICAgICAgICAgaGVhZGVyQ29udGVudC5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XHJcbiAgICAgICAgICAgICAgaGVhZGVyQ29udGVudC5zdHlsZS50b3AgPSAnMnB4JztcclxuICAgICAgICAgICAgICBoZWFkZXJDb250ZW50LnN0eWxlLmxlZnQgPSAnMXB4JztcclxuICAgICAgICAgICAgICBoZWFkZXJDb250ZW50LnN0eWxlLnBhZGRpbmcgPSAnOHB4IDEycHggMTBweCAxMnB4JztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLy8gYWRqdXN0IGFjY29yZGlvbiBtYWluIGNoZWNrYm94XHJcbiAgICAgICAgICBjb25zdCBjaGVjayA9IGNhbGNpdGVBY2NJdGVtLnF1ZXJ5U2VsZWN0b3IoJ2NhbGNpdGUtY2hlY2tib3gnKTtcclxuICAgICAgICAgIGlmIChjaGVjaykge1xyXG4gICAgICAgICAgICBjb25zdCBib3hEaXYgPSBBQ0xVdGlscy5xdWVyeUVsZW1lbnQuY2FsbChjaGVjaywgJ2Rpdi50b2dnbGUnKTtcclxuICAgICAgICAgICAgaWYgKGJveERpdikge1xyXG4gICAgICAgICAgICAgIGJveERpdi5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XHJcbiAgICAgICAgICAgICAgYm94RGl2LnN0eWxlLmxlZnQgPSAnLTNweCc7XHJcbiAgICAgICAgICAgICAgYm94RGl2LnN0eWxlLndpZHRoID0gJzE2cHgnO1xyXG4gICAgICAgICAgICAgIGJveERpdi5zdHlsZS5oZWlnaHQgPSAnMTRweCc7XHJcbiAgICAgICAgICAgICAgYm94RGl2LnN0eWxlLmJvcmRlciA9ICdzb2xpZCAxcHggdmFyKC0tY2FsY2l0ZS11aS1ib3JkZXItMiknO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyBmb3IgYWxsIGxpc3QgaXRlbXNcclxuICAgICAgICAgIGNvbnN0IGxpc3QgPSBjYWxjaXRlQWNjLnF1ZXJ5U2VsZWN0b3IoJ2NhbGNpdGUtbGlzdCcpO1xyXG4gICAgICAgICAgaWYgKGxpc3QpIHtcclxuICAgICAgICAgICAgY29uc3QgbGlzdEl0ZW1zID0gbGlzdC5xdWVyeVNlbGVjdG9yQWxsKCdjYWxjaXRlLWxpc3QtaXRlbScpO1xyXG4gICAgICAgICAgICBpZiAobGlzdEl0ZW1zICYmIGxpc3RJdGVtcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgZm9yIChsZXQgaWkgPSAwOyBpaSA8IGxpc3RJdGVtcy5sZW5ndGg7IGlpKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBsaXN0SXRlbXNbaWldO1xyXG4gICAgICAgICAgICAgICAgLy8gYWNjb3JkaW9uIGxhYmVsXHJcbiAgICAgICAgICAgICAgICBjb25zdCBsYWJlbEVsZW0gPSBBQ0xVdGlscy5xdWVyeUVsZW1lbnQuY2FsbChpdGVtLCAnZGl2LmxhYmVsJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAobGFiZWxFbGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgIGxhYmVsRWxlbS5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XHJcbiAgICAgICAgICAgICAgICAgIGxhYmVsRWxlbS5zdHlsZS5sZWZ0ID0gJzFweCc7XHJcbiAgICAgICAgICAgICAgICAgIGxhYmVsRWxlbS5zdHlsZS5wYWRkaW5nID0gJzAnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gYWNjb3JkaW9uIGxpc3QgaXRlbSBjaGVja2JveFxyXG4gICAgICAgICAgICAgICAgY29uc3QgY2hlY2sgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJ2NhbGNpdGUtY2hlY2tib3gnKTtcclxuICAgICAgICAgICAgICAgIGlmIChjaGVjaykge1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCBib3hEaXYgPSBBQ0xVdGlscy5xdWVyeUVsZW1lbnQuY2FsbChjaGVjaywgJ2Rpdi50b2dnbGUnKTtcclxuICAgICAgICAgICAgICAgICAgaWYgKGJveERpdikge1xyXG4gICAgICAgICAgICAgICAgICAgIGJveERpdi5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgYm94RGl2LnN0eWxlLmxlZnQgPSAnNXB4JztcclxuICAgICAgICAgICAgICAgICAgICBib3hEaXYuc3R5bGUud2lkdGggPSAnMTVweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgYm94RGl2LnN0eWxlLmhlaWdodCA9ICcxM3B4JztcclxuICAgICAgICAgICAgICAgICAgICBib3hEaXYuc3R5bGUuYm9yZGVyID0gJ3NvbGlkIDFweCB2YXIoLS1jYWxjaXRlLXVpLWJvcmRlci0yKSc7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGNvbnN0IGRpdkFjdGlvblN0YXJ0ID0gQUNMVXRpbHMucXVlcnlFbGVtZW50LmNhbGwoY2FsY2l0ZUFjY0l0ZW0sICdkaXYuYWN0aW9ucy1zdGFydCcpO1xyXG4gICAgICAgICAgaWYgKGRpdkFjdGlvblN0YXJ0KSB7XHJcbiAgICAgICAgICAgIGRpdkFjdGlvblN0YXJ0LnN0eWxlLndpZHRoID0gJzI0cHgnO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICBvbkNoZWNrYm94Q2hhbmdlZChpZCkge1xyXG4gICAgaWYgKHRoaXMuX2RiZykge1xyXG4gICAgICBjb25zb2xlLmxvZygnJWMgQUNDT1JESU9OOiBvbkNoZWNrYm94Q2hhbmdlZCcsICdjb2xvcjpvcmFuZ2U7Zm9udC1zaXplOjExcHQ7Jyk7XHJcbiAgICB9XHJcbiAgICBjb25zdCByZXBvcnRJZCA9IGlkO1xyXG4gICAgY29uc3QgaXNDaGVja2VkID0gdGhpcy50b2dnbGVDaGVja1N0YXRlKHRoaXMuc3RDb250ZW50LCByZXBvcnRJZCk7XHJcbiAgICB0aGlzLm5vdGlmeUNoZWNrZWRJdGVtcyhpc0NoZWNrZWQsIHJlcG9ydElkKTtcclxuICAgIHRoaXMudXBkYXRlQ2hlY2tib3hlcygpO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuICAvKlxyXG4gICAqIGNsb3NlQWNjb3JkaW9uXHJcbiAgICpcclxuICAgKiAgICBjb250ZXh0IC0gaW50ZXJuYWwgdXNlIG9ubHksIHNldCB0byBudWxsIG90aGVyd2lzZVxyXG4gICAqL1xyXG4gIGNsb3NlQWNjb3JkaW9uKGNvbnRleHQpIHtcclxuICAgIGxldCBhY2NvcmRpb24gPSBjb250ZXh0ID8gY29udGV4dC5lbGVtIDogQUNMVXRpbHMucXVlcnlFbGVtZW50QnlJZC5jYWxsKHRoaXMsIHRoaXMuX2luc3RhbmNlSWQpO1xyXG4gICAgbGV0IGNvbnRlbnQgPSBjb250ZXh0ID8gY29udGV4dC5jb250ZW50IDogQUNMVXRpbHMucXVlcnlFbGVtZW50QnlJZC5jYWxsKHRoaXMsIHRoaXMuX2luc3RhbmNlQ29udGVudElkKTtcclxuICAgIGxldCBpY29uID0gY29udGV4dCA/IGNvbnRleHQuaWNvbiA6IEFDTFV0aWxzLnF1ZXJ5RWxlbWVudEJ5SWQuY2FsbCh0aGlzLCB0aGlzLl9pbnN0YW5jZUljb25JZCk7XHJcbiAgICBhY2NvcmRpb24uY2xhc3NMaXN0LnJlbW92ZSgnYWNjb3JkaW9uX19hY3RpdmUnKTtcclxuICAgIGNvbnRlbnQuc3R5bGUubWF4SGVpZ2h0ID0gbnVsbDtcclxuICAgIGljb24uc2V0QXR0cmlidXRlKCdpY29uLWVuZCcsICdjYXJldC1kb3duJyk7XHJcbiAgICAvLyBoaWRlIGNvbnRlbnQgdG8gcHJldmVudCB0YWIgYWN0aW9uc1xyXG4gICAgdGhpcy5oaWRlQ29udGVudChjb250ZW50KTtcclxuICB9XHJcbiAgLy8gc2hvd3MgdGhlIGFjY29yZGlvbiBjb250ZW50IGRpdiBjb250YWluaW5nIGFsbCB0aGUgcm93IGl0ZW1zXHJcbiAgc2hvd0NvbnRlbnQoY29udGVudCkge1xyXG4gICAgaWYgKCFjb250ZW50KVxyXG4gICAgICBjb250ZW50ID0gQUNMVXRpbHMucXVlcnlFbGVtZW50QnlJZC5jYWxsKHRoaXMsIHRoaXMuX2luc3RhbmNlQ29udGVudElkKTtcclxuICAgIGlmIChjb250ZW50LmNsYXNzTGlzdC5jb250YWlucygnYmEtY29udGVudC1oaWRkZW4nKSkge1xyXG4gICAgICBjb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2JhLWNvbnRlbnQtaGlkZGVuJyk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGhpZGVDb250ZW50KGNvbnRlbnQpIHtcclxuICAgIGlmICghY29udGVudClcclxuICAgICAgY29udGVudCA9IEFDTFV0aWxzLnF1ZXJ5RWxlbWVudEJ5SWQuY2FsbCh0aGlzLCB0aGlzLl9pbnN0YW5jZUNvbnRlbnRJZCk7XHJcbiAgICBpZiAoIWNvbnRlbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdiYS1jb250ZW50LWhpZGRlbicpKSB7XHJcbiAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LmFkZCgnYmEtY29udGVudC1oaWRkZW4nKTtcclxuICAgIH1cclxuICB9XHJcbiAgb25DbGlja0FjY29yZGlvbkl0ZW0oZSwgY29udGV4dCwgZGF0YSkge1xyXG4gICAgaWYgKCFkYXRhLnVzZXNDaGVja2JveCkge1xyXG4gICAgICAvLyBkYXRhID0geyBpZDo8cmVwb3J0aWQ+LCBuYW1lOjxyZXBvcnROYW1lPiB9XHJcbiAgICAgIHRoaXMuYWNjb3JkaW9uSXRlbUNsaWNrZWQuZW1pdCh7IGNvbnRleHQ6IGNvbnRleHQsIGl0ZW06IGRhdGEgfSk7XHJcbiAgICB9XHJcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuICBvbkNsaWNrTWFrZURlZmF1bHRBY3Rpb24oZXYsIHJlcG9ydElkKSB7XHJcbiAgICBjb25zdCBuYW1lID0gdGhpcy5fZ2V0Q29udGVudEl0ZW0ocmVwb3J0SWQpLm5hbWU7XHJcbiAgICBjb25zdCBpc0RlZmF1bHQgPSByZXBvcnRJZCA9PSB0aGlzLnN0RGVmYXVsdFJlcG9ydElkO1xyXG4gICAgaWYgKGlzRGVmYXVsdCkge1xyXG4gICAgICB0aGlzLnN0RGVmYXVsdFJlcG9ydElkID0gJyc7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgLy8gbm90aWZ5IGxpc3RlbmVycyBvZiBkZWZhdWx0IGNoYW5nZVxyXG4gICAgICB0aGlzLnN0RGVmYXVsdFJlcG9ydElkID0gcmVwb3J0SWQ7XHJcbiAgICAgIHRoaXMuZGVmYXVsdFJlcG9ydFNlbGVjdGVkLmVtaXQoeyByZXBvcnRJZDogcmVwb3J0SWQsIG5hbWU6IG5hbWUgfSk7XHJcbiAgICB9XHJcbiAgICAvLyBjbG9zZSB0aGUgbWVudSBwb3BvdmVyXHJcbiAgICBjb25zdCBwb3BvdmVySWQgPSByZXBvcnRJZCArICctcG9wJztcclxuICAgIGNvbnN0IHBvcG92ZXJFbGVtID0gQUNMVXRpbHMucXVlcnlFbGVtZW50QnlJZC5jYWxsKHRoaXMsIEFDTFV0aWxzLmZpeElkKHBvcG92ZXJJZCkpO1xyXG4gICAgaWYgKHBvcG92ZXJFbGVtKSB7XHJcbiAgICAgIHBvcG92ZXJFbGVtLnNldEF0dHJpYnV0ZSgnb3BlbicsICdmYWxzZScpO1xyXG4gICAgfVxyXG4gIH1cclxuICBvbkNsaWNrQWNjb3JkaW9uKGV2KSB7XHJcbiAgICBpZiAoZXYudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYmEtdGFyZ2V0LWNoZWNrJykpXHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIGlmICh0aGlzLmlnbm9yZUNsaWNrID4gMCkge1xyXG4gICAgICB0aGlzLmlnbm9yZUNsaWNrLS07XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIC8vIGNvbnN0IGFjYyA9IEFDTFV0aWxzLnF1ZXJ5RWxlbWVudEJ5SWQuY2FsbCAodGhpcywgdGhpcy5faW5zdGFuY2VJZClcclxuICAgIGNvbnN0IGFjYyA9IGV2LmN1cnJlbnRUYXJnZXQ7XHJcbiAgICBjb25zdCBjb250ZW50ID0gQUNMVXRpbHMucXVlcnlFbGVtZW50QnlJZC5jYWxsKHRoaXMsIHRoaXMuX2luc3RhbmNlQ29udGVudElkKTtcclxuICAgIGNvbnN0IGljb24gPSBBQ0xVdGlscy5xdWVyeUVsZW1lbnRCeUlkLmNhbGwodGhpcywgdGhpcy5faW5zdGFuY2VJY29uSWQpO1xyXG4gICAgaWYgKGNvbnRlbnQpIHtcclxuICAgICAgaWYgKGNvbnRlbnQuc3R5bGUubWF4SGVpZ2h0KSB7XHJcbiAgICAgICAgLy8gYWNjb3JkaW9uIGlzIGN1cnJlbnRseSBvcGVuXHJcbiAgICAgICAgdGhpcy5jbG9zZUFjY29yZGlvbih7IGVsZW06IGFjYywgY29udGVudDogY29udGVudCwgaWNvbjogaWNvbiB9KTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICAvLyBhY2NvcmRpb24gaXMgY2xvc2VkIC0gb3BlbiBpdFxyXG4gICAgICAgIGFjYy5jbGFzc0xpc3QuYWRkKCdhY2NvcmRpb25fX2FjdGl2ZScpO1xyXG4gICAgICAgIGNvbnRlbnQuc3R5bGUubWF4SGVpZ2h0ID0gJzEwMCUnOyAvL2NvbnRlbnQuc2Nyb2xsSGVpZ2h0ICsgJ3B4JztcclxuICAgICAgICAvLyBpY29uLmlubmVyVGV4dCA9ICctJztcclxuICAgICAgICBpY29uLnNldEF0dHJpYnV0ZSgnaWNvbi1lbmQnLCAnY2FyZXQtdXAnKTtcclxuICAgICAgICB0aGlzLnNob3dDb250ZW50KGNvbnRlbnQpO1xyXG4gICAgICAgIC8vIG5vdGlmeSBvdGhlciBhY2NvcmRpb25zIGluIG91ciBncm91cCB0aGF0IHRoaXMgYWNjb3JkaW9uIGp1c3Qgb3BlbmVkXHJcbiAgICAgICAgdGhpcy5hY2NvcmRpb25PcGVuZWQuZW1pdCh7IGFjY29yZGlvbjogdGhpcywgZ3JvdXBpZDogdGhpcy5zdEdyb3VwSWQsIGluc3RhbmNlSWQ6IHRoaXMuX2luc3RhbmNlSWQgfSk7XHJcbiAgICAgICAgZnVuY3Rpb24gX2FmdGVyQW5pbWF0aW9uKCkge1xyXG4gICAgICAgICAgY29udGVudC5zdHlsZS5vdmVyZmxvdyA9ICdhdXRvJztcclxuICAgICAgICB9XHJcbiAgICAgICAgc2V0VGltZW91dChfYWZ0ZXJBbmltYXRpb24sIDUwMCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuICBfZ2V0Q29udGVudCgpIHtcclxuICAgIC8vIE5vdGU6IHN0Q29udGVudCBpcyBhbiBvYmplY3QsIGNvbnRlbnQgaXMgYSBzdHJpbmdcclxuICAgIGlmICghdGhpcy5zdENvbnRlbnQpIHtcclxuICAgICAgaWYgKHRoaXMuY29udGVudCkge1xyXG4gICAgICAgIHRoaXMuc3RDb250ZW50ID0gSlNPTi5wYXJzZSh0aGlzLmNvbnRlbnQpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIGlmICghdGhpcy5zaG93RGVidWcpIHtcclxuICAgICAgICAgIGxldCBhY2NFbGVtID0gQUNMVXRpbHMucXVlcnlFbGVtZW50QnlJZC5jYWxsKHRoaXMsIHRoaXMuX2luc3RhbmNlSWQpO1xyXG4gICAgICAgICAgaWYgKGFjY0VsZW0pIHtcclxuICAgICAgICAgICAgbGV0IGMgPSBhY2NFbGVtLmdldEF0dHJpYnV0ZSgnY29udGVudCcpO1xyXG4gICAgICAgICAgICBpZiAoYyAmJiBjLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICB0aGlzLmNvbnRlbnQgPSBjO1xyXG4gICAgICAgICAgICAgIHRoaXMuc3RDb250ZW50ID0gSlNPTi5wYXJzZSh0aGlzLmNvbnRlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5zdENvbnRlbnQ7XHJcbiAgfVxyXG4gIF9nZXRDb250ZW50SXRlbShpZCkge1xyXG4gICAgZm9yIChsZXQgaWkgPSAwOyBpaSA8IHRoaXMuc3RDb250ZW50Lmxlbmd0aDsgaWkrKykge1xyXG4gICAgICBsZXQgaXRlbSA9IHRoaXMuc3RDb250ZW50W2lpXTtcclxuICAgICAgaWYgKGl0ZW0uaWQgPT0gaWQpIHtcclxuICAgICAgICByZXR1cm4gaXRlbTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG4gIF9zZXRDb250ZW50SXRlbShpZCwgcHJvcCwgdmFsKSB7XHJcbiAgICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgdGhpcy5zdENvbnRlbnQubGVuZ3RoOyBpaSsrKSB7XHJcbiAgICAgIGxldCBpdGVtID0gdGhpcy5zdENvbnRlbnQuc3RDb250ZW50dGVudFtpaV07XHJcbiAgICAgIGlmIChpdGVtLmlkID09IGlkKSB7XHJcbiAgICAgICAgdGhpcy5zdENvbnRlbnRbaWldW3Byb3BdID0gdmFsO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIF90b2dnbGVDb250ZW50SXRlbShpZCwgcHJvcCkge1xyXG4gICAgbGV0IGl0ZW0gPSB0aGlzLl9nZXRDb250ZW50SXRlbShpZCk7XHJcbiAgICBpZiAoaXRlbSkge1xyXG4gICAgICBjb25zdCBuZXdWYWx1ZSA9IGl0ZW1bcHJvcF0gPyBmYWxzZSA6IHRydWU7XHJcbiAgICAgIHRoaXMuX3NldENvbnRlbnRJdGVtKGlkLCBwcm9wLCBuZXdWYWx1ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHVwZGF0ZUNoZWNrYm94ZXMoKSB7XHJcbiAgICB0aGlzLnN0VGltZXN0YW1wID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcbiAgfVxyXG4gIC8vIGVtaXRzIG5vdGlmaWNhdGlvbiB3aGVuIGFueS9hbGwgY2hlY2tib3ggY2hhbmdlc1xyXG4gIC8vICAgbGlzdCA9IGFycmF5IG9mIHJlcG9ydElkcyB0byBzZXQsIG9yIChudWxsIG9yIGVtcHR5KSB0byBzZXQgYWxsXHJcbiAgLy8gICBuZXdTdGF0ZSA9IG5ldyBmb3JjZWQgc3RhdGUgdG8gbm90aWZ5XHJcbiAgLy9cclxuICBub3RpZnlDaGVja2VkSXRlbXMobmV3U3RhdGUsIGlkKSB7XHJcbiAgICBjb25zdCBhcHBseVRvQWxsID0gKCFpZCB8fCAhQUNMVXRpbHMuaGFzVGV4dChpZCkpO1xyXG4gICAgY29uc3QgY2hlY2tib3hlcyA9IHRoaXMuZWwuc2hhZG93Um9vdD8ucXVlcnlTZWxlY3RvckFsbCgnY2FsY2l0ZS1jaGVja2JveFtkYXRhLWdyb3VwXScpO1xyXG4gICAgaWYgKGNoZWNrYm94ZXMpIHtcclxuICAgICAgY29uc3QgcmVwb3J0cyA9IFtdO1xyXG4gICAgICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgY2hlY2tib3hlcy5sZW5ndGg7IGlpKyspIHtcclxuICAgICAgICBjb25zdCBib3ggPSBjaGVja2JveGVzW2lpXTtcclxuICAgICAgICBsZXQgZmxhZyA9IGJveC5jaGVja2VkO1xyXG4gICAgICAgIGNvbnN0IHJlcG9ydElkID0gYm94LmdldEF0dHJpYnV0ZSgnZ3VpZCcpO1xyXG4gICAgICAgIGlmIChyZXBvcnRJZCAmJiBBQ0xVdGlscy5oYXNUZXh0KHJlcG9ydElkKSkge1xyXG4gICAgICAgICAgaWYgKGFwcGx5VG9BbGwgfHwgaWQgPT0gcmVwb3J0SWQpIHtcclxuICAgICAgICAgICAgZmxhZyA9IG5ld1N0YXRlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgY29uc3QgcmVwb3J0ID0geyBpZDogcmVwb3J0SWQsIGlzQ2hlY2tlZDogZmxhZyB9O1xyXG4gICAgICAgICAgcmVwb3J0cy5wdXNoKHJlcG9ydCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChyZXBvcnRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAvLyBOb3RpZnkgb3RoZXIgY29tcG9uZW50c1xyXG4gICAgICAgIHRoaXMuYWNjb3JkaW9uSXRlbXNDaGVja2VkLmVtaXQoeyBhY2NvcmRpb246IHRoaXMsIHJlcG9ydHM6IHJlcG9ydHMgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgcmVuZGVyTWFrZURlZmF1bHRVSShyZXBvcnRJZCkge1xyXG4gICAgY29uc3QgYWN0aW9uU3R5bGUgPSB7XHJcbiAgICAgICdwYWRkaW5nJzogJzRweCcsXHJcbiAgICAgICdwb3NpdGlvbic6ICdyZWxhdGl2ZScsXHJcbiAgICAgICdsZWZ0JzogJzEycHgnXHJcbiAgICB9O1xyXG4gICAgLy8gY29uc3QgbGlzdEl0ZW1TdHlsZSA9IHtcclxuICAgIC8vICAgJ21pbi13aWR0aCc6ICcxNjBweCcsXHJcbiAgICAvLyAgICdkaXNwbGF5JzogJ2ZsZXgnXHJcbiAgICAvLyB9XHJcbiAgICAvLyBjb25zdCBsaXN0SXRlbUljb25TdHlsZSA9IHtcclxuICAgIC8vICAgJ2Rpc3BsYXknOiAnZmxleCcsXHJcbiAgICAvLyAgICdmbGV4JzogJzAgMCBhdXRvJyxcclxuICAgIC8vICAgJ3dpZHRoJzogJzI4cHgnLFxyXG4gICAgLy8gICAnaGVpZ2h0JzogJzI4cHgnLFxyXG4gICAgLy8gICAndHJhbnNmb3JtJzogJ3NjYWxlKDAuNyknXHJcbiAgICAvLyB9XHJcbiAgICAvLyBjb25zdCBsaXN0SXRlbVRleHRTdHlsZSA9IHtcclxuICAgIC8vICAgJ2Rpc3BsYXknOiAnZmxleCcsXHJcbiAgICAvLyAgICdmbGV4JzogJzEgMSBhdXRvJyxcclxuICAgIC8vICAgJ2p1c3RpZnktY29udGVudCc6ICdsZWZ0JyxcclxuICAgIC8vICAgJ3RleHQtYWxpZ24nOiAnbGVmdCcsXHJcbiAgICAvLyAgICdhbGlnbi1pdGVtcyc6ICdjZW50ZXInLFxyXG4gICAgLy8gICAncGFkZGluZy1yaWdodCc6ICc1cHgnLFxyXG4gICAgLy8gICAnbWF4LXdpZHRoJzogJzIwMHB4JyxcclxuICAgIC8vICAgJ2N1cnNvcic6ICdwb2ludGVyJ1xyXG4gICAgLy8gfVxyXG4gICAgLy8gY29uc3QgcG9wb3Zlckxpc3RJdGVtU3R5bGUgPSB7XHJcbiAgICAvLyAgICdkaXNwbGF5JzogJ2ZsZXgnLFxyXG4gICAgLy8gICAnYWxpZ24taXRlbXMnOiAnY2VudGVyJ1xyXG4gICAgLy8gfVxyXG4gICAgLy8gT25seSByZW5kZXJzIHRoZSBlbGxpcHNpcyBhbmQgcG9wdXAgbWVudSBpZiAnc2hvd0RlZmF1bHQnIGlzIHRydWVcclxuICAgIGlmICh0aGlzLnN0U2hvd0RlZmF1bHQpIHtcclxuICAgICAgY29uc3QgbWFrZURlZlRleHQgPSBCYVJlcG9ydHNMYW5ndWFnZS5pMThuKCdtYWtlLWRlZmF1bHQnKTtcclxuICAgICAgY29uc3QgcmVtb3ZlRGVmVGV4dCA9IEJhUmVwb3J0c0xhbmd1YWdlLmkxOG4oJ3JlbW92ZS1kZWZhdWx0Jyk7XHJcbiAgICAgIGNvbnN0IGFjdGlvbklkID0gcmVwb3J0SWQgKyAnLWFjdGlvbic7XHJcbiAgICAgIGNvbnN0IHBvcG92ZXJJZCA9IHJlcG9ydElkICsgJy1wb3AnO1xyXG4gICAgICBjb25zdCBpc0RlZmF1bHQgPSByZXBvcnRJZCA9PSB0aGlzLnN0RGVmYXVsdFJlcG9ydElkO1xyXG4gICAgICBjb25zdCBwb3BvdmVySWNvbk5hbWUgPSAoaXNEZWZhdWx0KSA/ICd4JyA6ICdjaGVjayc7XHJcbiAgICAgIGNvbnN0IGRlZlRleHQgPSAoaXNEZWZhdWx0KSA/IHJlbW92ZURlZlRleHQgOiBtYWtlRGVmVGV4dDtcclxuICAgICAgY29uc3QgcG9wb3ZlckFjdGlvbklkID0gcmVwb3J0SWQgKyAnLXBvcGl0ZW0nO1xyXG4gICAgICByZXR1cm4gKGgoXCJkaXZcIiwgeyBzbG90OiBcImFjdGlvbnMtZW5kXCIsIHN0eWxlOiBhY3Rpb25TdHlsZSB9LCBoKFwiY2FsY2l0ZS1hY3Rpb25cIiwgeyBpZDogYWN0aW9uSWQsIGljb246IFwiZWxsaXBzaXNcIiwgXCJhcmlhLWV4cGFuZGVkXCI6IFwidHJ1ZVwiLCBhbGlnbm1lbnQ6IFwiY2VudGVyXCIsIGFwcGVhcmFuY2U6IFwidHJhbnNwYXJlbnRcIiwgc2NhbGU6IFwic1wiIH0pLCBoKFwiY2FsY2l0ZS1wb3BvdmVyXCIsIHsgaWQ6IHBvcG92ZXJJZCwgXCJhcmlhLWhpZGRlblwiOiBcImZhbHNlXCIsIFwiYXJpYS1saXZlXCI6IFwicG9saXRlXCIsIHJvbGU6IFwiZGlhbG9nXCIsIFwiYXV0by1jbG9zZVwiOiBcIlwiLCBcInBvaW50ZXItZGlzYWJsZWRcIjogXCJcIiwgXCJvZmZzZXQtZGlzdGFuY2VcIjogXCI2XCIsIFwib2Zmc2V0LXNraWRkaW5nXCI6IFwiMFwiLCBcIm92ZXJsYXktcG9zaXRpb25pbmdcIjogXCJmaXhlZFwiLCBwbGFjZW1lbnQ6IFwibGVmdC1lbmRcIiwgc2NhbGU6IFwibVwiLCBcImRhdGEtcGxhY2VtZW50XCI6IFwicmlnaHQtc3RhcnRcIiwgXCJyZWZlcmVuY2UtZWxlbWVudFwiOiBhY3Rpb25JZCwgb3BlbjogXCJcIiB9LCBoKFwiY2FsY2l0ZS1hY3Rpb25cIiwgeyBpZDogcG9wb3ZlckFjdGlvbklkLCB0ZXh0OiBkZWZUZXh0LCBpY29uOiBwb3BvdmVySWNvbk5hbWUsIG9uQ2xpY2s6IChlKSA9PiB0aGlzLm9uQ2xpY2tNYWtlRGVmYXVsdEFjdGlvbihlLCByZXBvcnRJZCksIFwidGV4dC1lbmFibGVkXCI6IFwidHJ1ZVwiIH0pKSkpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHJldHVybiAoJycpO1xyXG4gICAgfVxyXG4gIH1cclxuICBnZXRBY2NvcmRpb24oKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgICAgbGV0IGNvbnRlbnQgPSBzZWxmLl9nZXRDb250ZW50KCk7XHJcbiAgICAgIGlmICh0aGlzLl9kYmcpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIiVjIGdldEFjY29yZGlvblwiLCAnY29sb3I6b3JhbmdlO2ZvbnQtc2l6ZToxMXB0JywgY29udGVudCwgc2VsZi5zdFNob3dEZWZhdWx0KTtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBzTmFtZSA9IHNlbGYuc3REaXNwbGF5TmFtZTtcclxuICAgICAgY29uc3QgaWNvbk5hbWUgPSBzZWxmLmNhbGNpdGVpY29uIHx8ICcnO1xyXG4gICAgICBjb25zdCBsaXN0SXRlbVRleHRVbmRlcmxpbmVkID0ge1xyXG4gICAgICAgICd0ZXh0LWRlY29yYXRpb24nOiAndW5kZXJsaW5lJ1xyXG4gICAgICB9O1xyXG4gICAgICBpZiAoc2VsZi5zdFNob3dDaGVja2JveGVzKSB7XHJcbiAgICAgICAgbGV0IGFueUNoZWNrZWQgPSBbXTtcclxuICAgICAgICBpZiAoc2VsZi5zdENvbnRlbnQ/Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIGFueUNoZWNrZWQgPSBzZWxmLnN0Q29udGVudC5zb21lKChvYmopID0+IG9iai5pc0NoZWNrZWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBtYWluQ2hlY2tTdHlsZSA9IHtcclxuICAgICAgICAgICdtYXJnaW4nOiAnLTJweCAtNHB4IDBweCA1cHgnLFxyXG4gICAgICAgICAgJ3dpZHRoJzogJzE2cHgnLFxyXG4gICAgICAgICAgJ2hlaWdodCc6ICcxNnB4JyxcclxuICAgICAgICAgICdwb3NpdGlvbic6ICdyZWxhdGl2ZScsXHJcbiAgICAgICAgICAnbGVmdCc6ICc1cHgnLFxyXG4gICAgICAgICAgJ3RvcCc6ICcycHgnXHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCBsaXN0Q2hlY2tTdHlsZSA9IHtcclxuICAgICAgICAgICdtYXJnaW4nOiAnLTRweCAwcHggMHB4IC00cHgnLFxyXG4gICAgICAgICAgJ3dpZHRoJzogJzE1cHgnLFxyXG4gICAgICAgICAgJ2hlaWdodCc6ICcxM3B4J1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIChoKFwiY2FsY2l0ZS1hY2NvcmRpb25cIiwgeyBhcHBlYXJhbmNlOiBcInNvbGlkXCIsIFwiaWNvbi1wb3NpdGlvblwiOiBcImVuZFwiIH0sIGgoXCJjYWxjaXRlLWFjY29yZGlvbi1pdGVtXCIsIHsgc2NhbGU6IFwic1wiLCBoZWFkaW5nOiBzTmFtZSB9LCBoKFwiY2FsY2l0ZS1jaGVja2JveFwiLCB7IHNsb3Q6IFwiYWN0aW9ucy1zdGFydFwiLCBzdHlsZTogbWFpbkNoZWNrU3R5bGUsIG5hbWU6ICdTZWxlY3QgQWxsJywgdmFsdWU6IFwiYWxsXCIsIGNoZWNrZWQ6IGFueUNoZWNrZWQsIG9uQ2xpY2s6IHNlbGYub25DaGVja0FsbENoYW5nZWQgfSksIGgoXCJjYWxjaXRlLWxpc3RcIiwgbnVsbCwgY29udGVudFxyXG4gICAgICAgICAgPyBjb250ZW50Lm1hcCgoeyBpZCwgbmFtZSwgc3ViVGV4dCB9KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFjY0xpc3RJdGVtSWQgPSBpZCArICctYWNjLWl0ZW0nO1xyXG4gICAgICAgICAgICBjb25zdCBpc0RlZmF1bHQgPSBpZCA9PSB0aGlzLnN0RGVmYXVsdFJlcG9ydElkO1xyXG4gICAgICAgICAgICBjb25zdCBkZWZTdHlsZSA9IChpc0RlZmF1bHQpID8gbGlzdEl0ZW1UZXh0VW5kZXJsaW5lZCA6ICcnO1xyXG4gICAgICAgICAgICByZXR1cm4gKGgoXCJjYWxjaXRlLWxpc3QtaXRlbVwiLCB7IGlkOiBhY2NMaXN0SXRlbUlkLCBsYWJlbDogbmFtZSwgZGF0YTogaWQsIGRlc2NyaXB0aW9uOiBzdWJUZXh0IHx8ICcnLCBzdHlsZTogZGVmU3R5bGUgfSwgaChcImNhbGNpdGUtY2hlY2tib3hcIiwgeyBzdHlsZTogbGlzdENoZWNrU3R5bGUsIG5hbWU6IG5hbWUsIFwiZGF0YS1ncm91cFwiOiBzZWxmLnJlcG9ydHNHcm91cElkLCB2YWx1ZTogaWQsIGlkOiBpZCwgc2xvdDogXCJhY3Rpb25zLXN0YXJ0XCIsIGNoZWNrZWQ6IHNlbGYuc3RDb250ZW50ICYmIHNlbGYuc3RDb250ZW50LnNvbWUoKG9iaikgPT4gb2JqLmlkID09PSBpZCAmJiBvYmouaXNDaGVja2VkKSwgb25DbGljazogKGUpID0+IHNlbGYub25DaGVja2JveENoYW5nZWQoZS50YXJnZXQudmFsdWUpIH0pLCBzZWxmLnJlbmRlck1ha2VEZWZhdWx0VUkoaWQpKSk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgOiAnJykpKSk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIChoKFwiY2FsY2l0ZS1hY2NvcmRpb25cIiwgeyBhcHBlYXJhbmNlOiBcInNvbGlkXCIsIFwiaWNvbi1wb3NpdGlvblwiOiBcImVuZFwiIH0sIGNvbnRlbnQgP1xyXG4gICAgICAgICAgaChcImNhbGNpdGUtYWNjb3JkaW9uLWl0ZW1cIiwgeyBcImljb24tc3RhcnRcIjogaWNvbk5hbWUsIHNjYWxlOiBcInNcIiwgaGVhZGluZzogc05hbWUsIGV4cGFuZGVkOiBjb250ZW50LnNvbWUoKG9iaikgPT4gb2JqWydpZCddID09PSBzZWxmLnN0U2VsZWN0ZWRJZCkgPyB0cnVlIDogZmFsc2UgfSwgaChcImNhbGNpdGUtdHJlZVwiLCBudWxsLCBjb250ZW50XHJcbiAgICAgICAgICAgID8gY29udGVudC5tYXAoKHsgaWQsIG5hbWUgfSkgPT4gKGgoXCJjYWxjaXRlLXRyZWUtaXRlbVwiLCB7IHN0eWxlOiB7XHJcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAnOHB4IDAnLFxyXG4gICAgICAgICAgICAgICAgd2hpdGVTcGFjZTogJ3dyYXAnLFxyXG4gICAgICAgICAgICAgICAgb3ZlcmZsb3dYOiAnaGlkZGVuJyxcclxuICAgICAgICAgICAgICAgIGxpbmVIZWlnaHQ6ICcxLjI1cmVtJyxcclxuICAgICAgICAgICAgICB9LCBkYXRhOiBpZCwgbGFiZWw6IG5hbWUsIHNlbGVjdGVkOiBpZCA9PT0gc2VsZi5zdFNlbGVjdGVkSWQgPyB0cnVlIDogZmFsc2UsIG9uY2xpY2s6IChlKSA9PiBzZWxmLm9uQ2xpY2tBY2NvcmRpb25JdGVtKGUsIHNlbGYsIHsgaWQ6IGlkLCBuYW1lOiBuYW1lIH0pIH0sIG5hbWUsIHNlbGYucmVuZGVyTWFrZURlZmF1bHRVSShpZCkpKSlcclxuICAgICAgICAgICAgOiAnJykpXHJcbiAgICAgICAgICA6ICcnKSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgbGV0IGNvbnRlbnQgPSBzZWxmLl9nZXRDb250ZW50KCk7XHJcbiAgICBpZiAoIWNvbnRlbnQpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5faXNSZXBvcnQgPSBzZWxmLmVsLmNsYXNzTGlzdC5jb250YWlucygncmVwb3J0TGlzdCcpO1xyXG4gICAgcmV0dXJuICh0aGlzLmdldEFjY29yZGlvbigpKTtcclxuICB9XHJcbiAgZ2V0IGVsKCkgeyByZXR1cm4gZ2V0RWxlbWVudCh0aGlzKTsgfVxyXG4gIHN0YXRpYyBnZXQgd2F0Y2hlcnMoKSB7IHJldHVybiB7XHJcbiAgICBcInNvdXJjZUNvdW50cnlcIjogW1wib25Tb3VyY2VDb3VudHJ5Q2hhbmdlZFwiXSxcclxuICAgIFwic2hvd0RlZmF1bHRcIjogW1wib25zaG93RGVmYXVsdENoYW5nZWRcIl0sXHJcbiAgICBcImRlZmF1bHRSZXBvcnRJZFwiOiBbXCJvbkRlZmF1bHRSZXBvcnRDaGFuZ2VkXCJdLFxyXG4gICAgXCJzdWdsaXRlXCI6IFtcIm9uU3VnbGl0ZUNoYW5nZWRcIl0sXHJcbiAgICBcImNvbnRlbnRcIjogW1wib25Db250ZW50Q2hhbmdlZFwiXSxcclxuICAgIFwiZGlzcGxheW5hbWVcIjogW1wib25BY2NvcmRpb25UZXh0Q2hhbmdlZFwiXSxcclxuICAgIFwic2VsZWN0ZWRJZFwiOiBbXCJvblNlbGVjdGVkSWRDaGFuZ2VkXCJdLFxyXG4gICAgXCJncm91cGlkXCI6IFtcIm9uR3JvdXBJZENoYW5nZWRcIl0sXHJcbiAgICBcImNvbnRlbnRJbmxpbmVcIjogW1wib25Db250ZW50SW5saW5lQ2hhbmdlZFwiXSxcclxuICAgIFwic2hvd0NoZWNrYm94ZXNcIjogW1wiYWNjb3JkaW9uQ2hlY2tib3hDaGFuZ2VkXCJdXHJcbiAgfTsgfVxyXG59O1xyXG5CYUFjY29yZGlvbi5zdHlsZSA9IGJhQWNjb3JkaW9uQ3NzO1xuXG4vKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1jb21wb25lbnRzL2Jsb2IvbWFzdGVyL0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG4gKiB2MS4wLjVcbiAqL1xuY29uc3QgU0xPVFMgPSB7XG4gIGRyb3Bkb3duVHJpZ2dlcjogXCJ0cmlnZ2VyXCJcbn07XG5cbmNvbnN0IGRyb3Bkb3duQ3NzID0gXCJAa2V5ZnJhbWVzIGluezAle29wYWNpdHk6MH0xMDAle29wYWNpdHk6MX19QGtleWZyYW1lcyBpbi1kb3duezAle29wYWNpdHk6MDt0cmFuc2Zvcm06dHJhbnNsYXRlM0QoMCwgLTVweCwgMCl9MTAwJXtvcGFjaXR5OjE7dHJhbnNmb3JtOnRyYW5zbGF0ZTNEKDAsIDAsIDApfX1Aa2V5ZnJhbWVzIGluLXVwezAle29wYWNpdHk6MDt0cmFuc2Zvcm06dHJhbnNsYXRlM0QoMCwgNXB4LCAwKX0xMDAle29wYWNpdHk6MTt0cmFuc2Zvcm06dHJhbnNsYXRlM0QoMCwgMCwgMCl9fUBrZXlmcmFtZXMgaW4tc2NhbGV7MCV7b3BhY2l0eTowO3RyYW5zZm9ybTpzY2FsZTNEKDAuOTUsIDAuOTUsIDEpfTEwMCV7b3BhY2l0eToxO3RyYW5zZm9ybTpzY2FsZTNEKDEsIDEsIDEpfX06cm9vdHstLWNhbGNpdGUtYW5pbWF0aW9uLXRpbWluZzpjYWxjKDE1MG1zICogdmFyKC0tY2FsY2l0ZS1pbnRlcm5hbC1kdXJhdGlvbi1mYWN0b3IpKTstLWNhbGNpdGUtaW50ZXJuYWwtZHVyYXRpb24tZmFjdG9yOnZhcigtLWNhbGNpdGUtZHVyYXRpb24tZmFjdG9yLCAxKTstLWNhbGNpdGUtaW50ZXJuYWwtYW5pbWF0aW9uLXRpbWluZy1mYXN0OmNhbGMoMTAwbXMgKiB2YXIoLS1jYWxjaXRlLWludGVybmFsLWR1cmF0aW9uLWZhY3RvcikpOy0tY2FsY2l0ZS1pbnRlcm5hbC1hbmltYXRpb24tdGltaW5nLW1lZGl1bTpjYWxjKDIwMG1zICogdmFyKC0tY2FsY2l0ZS1pbnRlcm5hbC1kdXJhdGlvbi1mYWN0b3IpKTstLWNhbGNpdGUtaW50ZXJuYWwtYW5pbWF0aW9uLXRpbWluZy1zbG93OmNhbGMoMzAwbXMgKiB2YXIoLS1jYWxjaXRlLWludGVybmFsLWR1cmF0aW9uLWZhY3RvcikpfS5jYWxjaXRlLWFuaW1hdGV7b3BhY2l0eTowO2FuaW1hdGlvbi1maWxsLW1vZGU6Ym90aDthbmltYXRpb24tZHVyYXRpb246dmFyKC0tY2FsY2l0ZS1hbmltYXRpb24tdGltaW5nKX0uY2FsY2l0ZS1hbmltYXRlX19pbnthbmltYXRpb24tbmFtZTppbn0uY2FsY2l0ZS1hbmltYXRlX19pbi1kb3due2FuaW1hdGlvbi1uYW1lOmluLWRvd259LmNhbGNpdGUtYW5pbWF0ZV9faW4tdXB7YW5pbWF0aW9uLW5hbWU6aW4tdXB9LmNhbGNpdGUtYW5pbWF0ZV9faW4tc2NhbGV7YW5pbWF0aW9uLW5hbWU6aW4tc2NhbGV9QG1lZGlhIChwcmVmZXJzLXJlZHVjZWQtbW90aW9uOiByZWR1Y2Upezpyb290ey0tY2FsY2l0ZS1pbnRlcm5hbC1kdXJhdGlvbi1mYWN0b3I6MH19OnJvb3R7LS1jYWxjaXRlLWZsb2F0aW5nLXVpLXRyYW5zaXRpb246dmFyKC0tY2FsY2l0ZS1hbmltYXRpb24tdGltaW5nKTstLWNhbGNpdGUtZmxvYXRpbmctdWktei1pbmRleDo2MDB9Omhvc3QoW2hpZGRlbl0pe2Rpc3BsYXk6bm9uZX06aG9zdChbZGlzYWJsZWRdKXtwb2ludGVyLWV2ZW50czpub25lO2N1cnNvcjpkZWZhdWx0Oy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lO29wYWNpdHk6dmFyKC0tY2FsY2l0ZS11aS1vcGFjaXR5LWRpc2FibGVkKX06aG9zdHtkaXNwbGF5OmlubGluZS1mbGV4O2ZsZXg6MCAxIGF1dG99Omhvc3QoW2Rpc2FibGVkXSkgOjpzbG90dGVkKFtjYWxjaXRlLWh5ZHJhdGVkXVtkaXNhYmxlZF0pLDpob3N0KFtkaXNhYmxlZF0pIFtjYWxjaXRlLWh5ZHJhdGVkXVtkaXNhYmxlZF17b3BhY2l0eToxfTpob3N0IC5jYWxjaXRlLWRyb3Bkb3duLXdyYXBwZXJ7LS1jYWxjaXRlLWZsb2F0aW5nLXVpLXotaW5kZXg6NjAwO2Rpc3BsYXk6YmxvY2s7cG9zaXRpb246YWJzb2x1dGU7ei1pbmRleDp2YXIoLS1jYWxjaXRlLWZsb2F0aW5nLXVpLXotaW5kZXgpO3Zpc2liaWxpdHk6aGlkZGVufS5jYWxjaXRlLWRyb3Bkb3duLXdyYXBwZXIgLmNhbGNpdGUtZmxvYXRpbmctdWktYW5pbXtwb3NpdGlvbjpyZWxhdGl2ZTt0cmFuc2l0aW9uOnZhcigtLWNhbGNpdGUtZmxvYXRpbmctdWktdHJhbnNpdGlvbik7dHJhbnNpdGlvbi1wcm9wZXJ0eTp0cmFuc2Zvcm0sIHZpc2liaWxpdHksIG9wYWNpdHk7b3BhY2l0eTowO2JveC1zaGFkb3c6MCAwIDE2cHggMCByZ2JhKDAsIDAsIDAsIDAuMTYpO3otaW5kZXg6MTtib3JkZXItcmFkaXVzOjAuMjVyZW19LmNhbGNpdGUtZHJvcGRvd24td3JhcHBlcltkYXRhLXBsYWNlbWVudF49Ym90dG9tXSAuY2FsY2l0ZS1mbG9hdGluZy11aS1hbmlte3RyYW5zZm9ybTp0cmFuc2xhdGVZKC01cHgpfS5jYWxjaXRlLWRyb3Bkb3duLXdyYXBwZXJbZGF0YS1wbGFjZW1lbnRePXRvcF0gLmNhbGNpdGUtZmxvYXRpbmctdWktYW5pbXt0cmFuc2Zvcm06dHJhbnNsYXRlWSg1cHgpfS5jYWxjaXRlLWRyb3Bkb3duLXdyYXBwZXJbZGF0YS1wbGFjZW1lbnRePWxlZnRdIC5jYWxjaXRlLWZsb2F0aW5nLXVpLWFuaW17dHJhbnNmb3JtOnRyYW5zbGF0ZVgoNXB4KX0uY2FsY2l0ZS1kcm9wZG93bi13cmFwcGVyW2RhdGEtcGxhY2VtZW50Xj1yaWdodF0gLmNhbGNpdGUtZmxvYXRpbmctdWktYW5pbXt0cmFuc2Zvcm06dHJhbnNsYXRlWCgtNXB4KX0uY2FsY2l0ZS1kcm9wZG93bi13cmFwcGVyW2RhdGEtcGxhY2VtZW50XSAuY2FsY2l0ZS1mbG9hdGluZy11aS1hbmltLS1hY3RpdmV7b3BhY2l0eToxO3RyYW5zZm9ybTp0cmFuc2xhdGUoMCl9Omhvc3QoW29wZW5dKSAuY2FsY2l0ZS1kcm9wZG93bi13cmFwcGVye3Zpc2liaWxpdHk6dmlzaWJsZX06aG9zdCAuY2FsY2l0ZS1kcm9wZG93bi1jb250ZW50e21heC1ibG9jay1zaXplOjQ1dmg7aW5saW5lLXNpemU6YXV0bztvdmVyZmxvdy15OmF1dG87b3ZlcmZsb3cteDpoaWRkZW47YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWZvcmVncm91bmQtMSk7aW5saW5lLXNpemU6dmFyKC0tY2FsY2l0ZS1kcm9wZG93bi13aWR0aCl9LmNhbGNpdGUtdHJpZ2dlci1jb250YWluZXJ7cG9zaXRpb246cmVsYXRpdmU7ZGlzcGxheTpmbGV4O2ZsZXg6MSAxIGF1dG99QG1lZGlhIChmb3JjZWQtY29sb3JzOiBhY3RpdmUpezpob3N0KFtvcGVuXSkgLmNhbGNpdGUtZHJvcGRvd24td3JhcHBlcntib3JkZXI6MXB4IHNvbGlkIGNhbnZhc1RleHR9fTpob3N0KFt3aWR0aD1zXSl7LS1jYWxjaXRlLWRyb3Bkb3duLXdpZHRoOjEycmVtfTpob3N0KFt3aWR0aD1tXSl7LS1jYWxjaXRlLWRyb3Bkb3duLXdpZHRoOjE0cmVtfTpob3N0KFt3aWR0aD1sXSl7LS1jYWxjaXRlLWRyb3Bkb3duLXdpZHRoOjE2cmVtfVwiO1xuXG5jb25zdCBEcm9wZG93biA9IGNsYXNzIHtcclxuICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XHJcbiAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xyXG4gICAgdGhpcy5jYWxjaXRlRHJvcGRvd25TZWxlY3QgPSBjcmVhdGVFdmVudCh0aGlzLCBcImNhbGNpdGVEcm9wZG93blNlbGVjdFwiLCA2KTtcclxuICAgIHRoaXMuY2FsY2l0ZURyb3Bkb3duQmVmb3JlQ2xvc2UgPSBjcmVhdGVFdmVudCh0aGlzLCBcImNhbGNpdGVEcm9wZG93bkJlZm9yZUNsb3NlXCIsIDYpO1xyXG4gICAgdGhpcy5jYWxjaXRlRHJvcGRvd25DbG9zZSA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiY2FsY2l0ZURyb3Bkb3duQ2xvc2VcIiwgNik7XHJcbiAgICB0aGlzLmNhbGNpdGVEcm9wZG93bkJlZm9yZU9wZW4gPSBjcmVhdGVFdmVudCh0aGlzLCBcImNhbGNpdGVEcm9wZG93bkJlZm9yZU9wZW5cIiwgNik7XHJcbiAgICB0aGlzLmNhbGNpdGVEcm9wZG93bk9wZW4gPSBjcmVhdGVFdmVudCh0aGlzLCBcImNhbGNpdGVEcm9wZG93bk9wZW5cIiwgNik7XHJcbiAgICB0aGlzLml0ZW1zID0gW107XHJcbiAgICB0aGlzLmdyb3VwcyA9IFtdO1xyXG4gICAgdGhpcy5tdXRhdGlvbk9ic2VydmVyID0gY3JlYXRlT2JzZXJ2ZXIoXCJtdXRhdGlvblwiLCAoKSA9PiB0aGlzLnVwZGF0ZUl0ZW1zKCkpO1xyXG4gICAgdGhpcy5yZXNpemVPYnNlcnZlciA9IGNyZWF0ZU9ic2VydmVyKFwicmVzaXplXCIsIChlbnRyaWVzKSA9PiB0aGlzLnJlc2l6ZU9ic2VydmVyQ2FsbGJhY2soZW50cmllcykpO1xyXG4gICAgdGhpcy5vcGVuVHJhbnNpdGlvblByb3AgPSBcIm9wYWNpdHlcIjtcclxuICAgIHRoaXMuZ3VpZCA9IGBjYWxjaXRlLWRyb3Bkb3duLSR7Z3VpZCgpfWA7XHJcbiAgICB0aGlzLmRlZmF1bHRBc3NpZ25lZEVsZW1lbnRzID0gW107XHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAvL1xyXG4gICAgLy8gIFByaXZhdGUgTWV0aG9kc1xyXG4gICAgLy9cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIHRoaXMuc2xvdENoYW5nZUhhbmRsZXIgPSAoZXZlbnQpID0+IHtcclxuICAgICAgdGhpcy5kZWZhdWx0QXNzaWduZWRFbGVtZW50cyA9IGV2ZW50LnRhcmdldC5hc3NpZ25lZEVsZW1lbnRzKHtcclxuICAgICAgICBmbGF0dGVuOiB0cnVlXHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLnVwZGF0ZUl0ZW1zKCk7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5zZXRGaWx0ZXJlZFBsYWNlbWVudHMgPSAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHsgZWwsIGZsaXBQbGFjZW1lbnRzIH0gPSB0aGlzO1xyXG4gICAgICB0aGlzLmZpbHRlcmVkRmxpcFBsYWNlbWVudHMgPSBmbGlwUGxhY2VtZW50c1xyXG4gICAgICAgID8gZmlsdGVyQ29tcHV0ZWRQbGFjZW1lbnRzKGZsaXBQbGFjZW1lbnRzLCBlbClcclxuICAgICAgICA6IG51bGw7XHJcbiAgICB9O1xyXG4gICAgdGhpcy51cGRhdGVUcmlnZ2VycyA9IChldmVudCkgPT4ge1xyXG4gICAgICB0aGlzLnRyaWdnZXJzID0gZXZlbnQudGFyZ2V0LmFzc2lnbmVkRWxlbWVudHMoe1xyXG4gICAgICAgIGZsYXR0ZW46IHRydWVcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMucmVwb3NpdGlvbih0cnVlKTtcclxuICAgIH07XHJcbiAgICB0aGlzLnVwZGF0ZUl0ZW1zID0gKCkgPT4ge1xyXG4gICAgICB0aGlzLml0ZW1zID0gdGhpcy5ncm91cHNcclxuICAgICAgICAubWFwKChncm91cCkgPT4gQXJyYXkuZnJvbShncm91cD8ucXVlcnlTZWxlY3RvckFsbChcImNhbGNpdGUtZHJvcGRvd24taXRlbVwiKSkpXHJcbiAgICAgICAgLnJlZHVjZSgocHJldmlvdXNWYWx1ZSwgY3VycmVudFZhbHVlKSA9PiBbLi4ucHJldmlvdXNWYWx1ZSwgLi4uY3VycmVudFZhbHVlXSwgW10pO1xyXG4gICAgICB0aGlzLnVwZGF0ZVNlbGVjdGVkSXRlbXMoKTtcclxuICAgICAgdGhpcy5yZXBvc2l0aW9uKHRydWUpO1xyXG4gICAgfTtcclxuICAgIHRoaXMudXBkYXRlR3JvdXBzID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgIGNvbnN0IGdyb3VwcyA9IGV2ZW50LnRhcmdldFxyXG4gICAgICAgIC5hc3NpZ25lZEVsZW1lbnRzKHsgZmxhdHRlbjogdHJ1ZSB9KVxyXG4gICAgICAgIC5maWx0ZXIoKGVsKSA9PiBlbD8ubWF0Y2hlcyhcImNhbGNpdGUtZHJvcGRvd24tZ3JvdXBcIikpO1xyXG4gICAgICB0aGlzLmdyb3VwcyA9IGdyb3VwcztcclxuICAgICAgdGhpcy51cGRhdGVJdGVtcygpO1xyXG4gICAgfTtcclxuICAgIHRoaXMucmVzaXplT2JzZXJ2ZXJDYWxsYmFjayA9IChlbnRyaWVzKSA9PiB7XHJcbiAgICAgIGVudHJpZXMuZm9yRWFjaCgoZW50cnkpID0+IHtcclxuICAgICAgICBjb25zdCB7IHRhcmdldCB9ID0gZW50cnk7XHJcbiAgICAgICAgaWYgKHRhcmdldCA9PT0gdGhpcy5yZWZlcmVuY2VFbCkge1xyXG4gICAgICAgICAgdGhpcy5zZXREcm9wZG93bldpZHRoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRhcmdldCA9PT0gdGhpcy5zY3JvbGxlckVsKSB7XHJcbiAgICAgICAgICB0aGlzLnNldE1heFNjcm9sbGVySGVpZ2h0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH07XHJcbiAgICB0aGlzLnNldERyb3Bkb3duV2lkdGggPSAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHsgcmVmZXJlbmNlRWwsIHNjcm9sbGVyRWwgfSA9IHRoaXM7XHJcbiAgICAgIGNvbnN0IHJlZmVyZW5jZUVsV2lkdGggPSByZWZlcmVuY2VFbD8uY2xpZW50V2lkdGg7XHJcbiAgICAgIGlmICghcmVmZXJlbmNlRWxXaWR0aCB8fCAhc2Nyb2xsZXJFbCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBzY3JvbGxlckVsLnN0eWxlLm1pbldpZHRoID0gYCR7cmVmZXJlbmNlRWxXaWR0aH1weGA7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5zZXRNYXhTY3JvbGxlckhlaWdodCA9ICgpID0+IHtcclxuICAgICAgY29uc3QgeyBzY3JvbGxlckVsIH0gPSB0aGlzO1xyXG4gICAgICBpZiAoIXNjcm9sbGVyRWwpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5yZXBvc2l0aW9uKHRydWUpO1xyXG4gICAgICBjb25zdCBtYXhTY3JvbGxlckhlaWdodCA9IHRoaXMuZ2V0TWF4U2Nyb2xsZXJIZWlnaHQoKTtcclxuICAgICAgc2Nyb2xsZXJFbC5zdHlsZS5tYXhIZWlnaHQgPSBtYXhTY3JvbGxlckhlaWdodCA+IDAgPyBgJHttYXhTY3JvbGxlckhlaWdodH1weGAgOiBcIlwiO1xyXG4gICAgICB0aGlzLnJlcG9zaXRpb24odHJ1ZSk7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5zZXRTY3JvbGxlckFuZFRyYW5zaXRpb25FbCA9IChlbCkgPT4ge1xyXG4gICAgICB0aGlzLnJlc2l6ZU9ic2VydmVyLm9ic2VydmUoZWwpO1xyXG4gICAgICB0aGlzLnNjcm9sbGVyRWwgPSBlbDtcclxuICAgICAgdGhpcy50cmFuc2l0aW9uRWwgPSBlbDtcclxuICAgICAgY29ubmVjdE9wZW5DbG9zZUNvbXBvbmVudCh0aGlzKTtcclxuICAgIH07XHJcbiAgICB0aGlzLnNldFJlZmVyZW5jZUVsID0gKGVsKSA9PiB7XHJcbiAgICAgIHRoaXMucmVmZXJlbmNlRWwgPSBlbDtcclxuICAgICAgY29ubmVjdEZsb2F0aW5nVUkodGhpcywgdGhpcy5yZWZlcmVuY2VFbCwgdGhpcy5mbG9hdGluZ0VsKTtcclxuICAgICAgdGhpcy5yZXNpemVPYnNlcnZlci5vYnNlcnZlKGVsKTtcclxuICAgIH07XHJcbiAgICB0aGlzLnNldEZsb2F0aW5nRWwgPSAoZWwpID0+IHtcclxuICAgICAgdGhpcy5mbG9hdGluZ0VsID0gZWw7XHJcbiAgICAgIGNvbm5lY3RGbG9hdGluZ1VJKHRoaXMsIHRoaXMucmVmZXJlbmNlRWwsIHRoaXMuZmxvYXRpbmdFbCk7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5rZXlEb3duSGFuZGxlciA9IChldmVudCkgPT4ge1xyXG4gICAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQ7XHJcbiAgICAgIGlmICh0YXJnZXQgIT09IHRoaXMucmVmZXJlbmNlRWwpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgeyBkZWZhdWx0UHJldmVudGVkLCBrZXkgfSA9IGV2ZW50O1xyXG4gICAgICBpZiAoZGVmYXVsdFByZXZlbnRlZCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5vcGVuKSB7XHJcbiAgICAgICAgaWYgKGtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICAgICAgdGhpcy5jbG9zZUNhbGNpdGVEcm9wZG93bigpO1xyXG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZXZlbnQuc2hpZnRLZXkgJiYga2V5ID09PSBcIlRhYlwiKSB7XHJcbiAgICAgICAgICB0aGlzLmNsb3NlQ2FsY2l0ZURyb3Bkb3duKCk7XHJcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBpZiAoaXNBY3RpdmF0aW9uS2V5KGtleSkpIHtcclxuICAgICAgICB0aGlzLm9wZW5DYWxjaXRlRHJvcGRvd24oKTtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKGtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICAgIHRoaXMuY2xvc2VDYWxjaXRlRHJvcGRvd24oKTtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhpcy5mb2N1c09uRmlyc3RBY3RpdmVPckZpcnN0SXRlbSA9ICgpID0+IHtcclxuICAgICAgdGhpcy5nZXRGb2N1c2FibGVFbGVtZW50KHRoaXMuaXRlbXMuZmluZCgoaXRlbSkgPT4gaXRlbS5zZWxlY3RlZCkgfHwgdGhpcy5pdGVtc1swXSk7XHJcbiAgICB9O1xyXG4gICAgdGhpcy50b2dnbGVPcGVuRW5kID0gKCkgPT4ge1xyXG4gICAgICB0aGlzLmZvY3VzT25GaXJzdEFjdGl2ZU9yRmlyc3RJdGVtKCk7XHJcbiAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNhbGNpdGVEcm9wZG93bk9wZW5cIiwgdGhpcy50b2dnbGVPcGVuRW5kKTtcclxuICAgIH07XHJcbiAgICB0aGlzLm9wZW5DYWxjaXRlRHJvcGRvd24gPSAoKSA9PiB7XHJcbiAgICAgIHRoaXMub3BlbiA9ICF0aGlzLm9wZW47XHJcbiAgICAgIGlmICh0aGlzLm9wZW4pIHtcclxuICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjYWxjaXRlRHJvcGRvd25PcGVuXCIsIHRoaXMudG9nZ2xlT3BlbkVuZCk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aGlzLm9wZW4gPSBmYWxzZTtcclxuICAgIHRoaXMuY2xvc2VPblNlbGVjdERpc2FibGVkID0gZmFsc2U7XHJcbiAgICB0aGlzLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB0aGlzLmZsaXBQbGFjZW1lbnRzID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5tYXhJdGVtcyA9IDA7XHJcbiAgICB0aGlzLm92ZXJsYXlQb3NpdGlvbmluZyA9IFwiYWJzb2x1dGVcIjtcclxuICAgIHRoaXMucGxhY2VtZW50ID0gZGVmYXVsdE1lbnVQbGFjZW1lbnQ7XHJcbiAgICB0aGlzLnNjYWxlID0gXCJtXCI7XHJcbiAgICB0aGlzLnNlbGVjdGVkSXRlbXMgPSBbXTtcclxuICAgIHRoaXMudHlwZSA9IFwiY2xpY2tcIjtcclxuICAgIHRoaXMud2lkdGggPSB1bmRlZmluZWQ7XHJcbiAgfVxyXG4gIG9wZW5IYW5kbGVyKHZhbHVlKSB7XHJcbiAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHtcclxuICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5yZXBvc2l0aW9uKHRydWUpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHVwZGF0ZUFmdGVyQ2xvc2UodGhpcy5mbG9hdGluZ0VsKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAoIXZhbHVlKSB7XHJcbiAgICAgIHVwZGF0ZUFmdGVyQ2xvc2UodGhpcy5mbG9hdGluZ0VsKTtcclxuICAgIH1cclxuICAgIHRoaXMub3BlbiA9IGZhbHNlO1xyXG4gIH1cclxuICBoYW5kbGVEaXNhYmxlZENoYW5nZSh2YWx1ZSkge1xyXG4gICAgaWYgKCF2YWx1ZSkge1xyXG4gICAgICB0aGlzLm9wZW4gPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcbiAgZmxpcFBsYWNlbWVudHNIYW5kbGVyKCkge1xyXG4gICAgdGhpcy5zZXRGaWx0ZXJlZFBsYWNlbWVudHMoKTtcclxuICAgIHRoaXMucmVwb3NpdGlvbih0cnVlKTtcclxuICB9XHJcbiAgbWF4SXRlbXNIYW5kbGVyKCkge1xyXG4gICAgdGhpcy5zZXRNYXhTY3JvbGxlckhlaWdodCgpO1xyXG4gIH1cclxuICBvdmVybGF5UG9zaXRpb25pbmdIYW5kbGVyKCkge1xyXG4gICAgdGhpcy5yZXBvc2l0aW9uKHRydWUpO1xyXG4gIH1cclxuICBwbGFjZW1lbnRIYW5kbGVyKCkge1xyXG4gICAgdGhpcy5yZXBvc2l0aW9uKHRydWUpO1xyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyAgTGlmZWN5Y2xlXHJcbiAgLy9cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XHJcbiAgICB0aGlzLm11dGF0aW9uT2JzZXJ2ZXI/Lm9ic2VydmUodGhpcy5lbCwgeyBjaGlsZExpc3Q6IHRydWUsIHN1YnRyZWU6IHRydWUgfSk7XHJcbiAgICB0aGlzLnNldEZpbHRlcmVkUGxhY2VtZW50cygpO1xyXG4gICAgdGhpcy5yZXBvc2l0aW9uKHRydWUpO1xyXG4gICAgaWYgKHRoaXMub3Blbikge1xyXG4gICAgICB0aGlzLm9wZW5IYW5kbGVyKHRoaXMub3Blbik7XHJcbiAgICB9XHJcbiAgICBjb25uZWN0T3BlbkNsb3NlQ29tcG9uZW50KHRoaXMpO1xyXG4gIH1cclxuICBjb21wb25lbnREaWRMb2FkKCkge1xyXG4gICAgdGhpcy5yZXBvc2l0aW9uKHRydWUpO1xyXG4gIH1cclxuICBjb21wb25lbnREaWRSZW5kZXIoKSB7XHJcbiAgICB1cGRhdGVIb3N0SW50ZXJhY3Rpb24odGhpcyk7XHJcbiAgfVxyXG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xyXG4gICAgdGhpcy5tdXRhdGlvbk9ic2VydmVyPy5kaXNjb25uZWN0KCk7XHJcbiAgICBkaXNjb25uZWN0RmxvYXRpbmdVSSh0aGlzLCB0aGlzLnJlZmVyZW5jZUVsLCB0aGlzLmZsb2F0aW5nRWwpO1xyXG4gICAgdGhpcy5yZXNpemVPYnNlcnZlcj8uZGlzY29ubmVjdCgpO1xyXG4gICAgZGlzY29ubmVjdE9wZW5DbG9zZUNvbXBvbmVudCh0aGlzKTtcclxuICB9XHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3QgeyBvcGVuLCBndWlkIH0gPSB0aGlzO1xyXG4gICAgcmV0dXJuIChoKEhvc3QsIG51bGwsIGgoXCJkaXZcIiwgeyBjbGFzczogXCJjYWxjaXRlLXRyaWdnZXItY29udGFpbmVyXCIsIGlkOiBgJHtndWlkfS1tZW51YnV0dG9uYCwgb25DbGljazogdGhpcy5vcGVuQ2FsY2l0ZURyb3Bkb3duLCBvbktleURvd246IHRoaXMua2V5RG93bkhhbmRsZXIsIHJlZjogdGhpcy5zZXRSZWZlcmVuY2VFbCB9LCBoKFwic2xvdFwiLCB7IFwiYXJpYS1jb250cm9sc1wiOiBgJHtndWlkfS1tZW51YCwgXCJhcmlhLWV4cGFuZGVkXCI6IHRvQXJpYUJvb2xlYW4ob3BlbiksIFwiYXJpYS1oYXNwb3B1cFwiOiBcIm1lbnVcIiwgbmFtZTogU0xPVFMuZHJvcGRvd25UcmlnZ2VyLCBvblNsb3RjaGFuZ2U6IHRoaXMudXBkYXRlVHJpZ2dlcnMgfSkpLCBoKFwiZGl2XCIsIHsgXCJhcmlhLWhpZGRlblwiOiB0b0FyaWFCb29sZWFuKCFvcGVuKSwgY2xhc3M6IFwiY2FsY2l0ZS1kcm9wZG93bi13cmFwcGVyXCIsIHJlZjogdGhpcy5zZXRGbG9hdGluZ0VsIH0sIGgoXCJkaXZcIiwgeyBcImFyaWEtbGFiZWxsZWRieVwiOiBgJHtndWlkfS1tZW51YnV0dG9uYCwgY2xhc3M6IHtcclxuICAgICAgICBbXCJjYWxjaXRlLWRyb3Bkb3duLWNvbnRlbnRcIl06IHRydWUsXHJcbiAgICAgICAgW0Zsb2F0aW5nQ1NTLmFuaW1hdGlvbl06IHRydWUsXHJcbiAgICAgICAgW0Zsb2F0aW5nQ1NTLmFuaW1hdGlvbkFjdGl2ZV06IG9wZW5cclxuICAgICAgfSwgaWQ6IGAke2d1aWR9LW1lbnVgLCByZWY6IHRoaXMuc2V0U2Nyb2xsZXJBbmRUcmFuc2l0aW9uRWwsIHJvbGU6IFwibWVudVwiIH0sIGgoXCJzbG90XCIsIHsgb25TbG90Y2hhbmdlOiB0aGlzLnVwZGF0ZUdyb3VwcyB9KSkpKSk7XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vICBQdWJsaWMgTWV0aG9kc1xyXG4gIC8vXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8qKlxyXG4gICAqIFVwZGF0ZXMgdGhlIHBvc2l0aW9uIG9mIHRoZSBjb21wb25lbnQuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gZGVsYXllZFxyXG4gICAqL1xyXG4gIGFzeW5jIHJlcG9zaXRpb24oZGVsYXllZCA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCB7IGZsb2F0aW5nRWwsIHJlZmVyZW5jZUVsLCBwbGFjZW1lbnQsIG92ZXJsYXlQb3NpdGlvbmluZywgZmlsdGVyZWRGbGlwUGxhY2VtZW50cyB9ID0gdGhpcztcclxuICAgIHJldHVybiByZXBvc2l0aW9uKHRoaXMsIHtcclxuICAgICAgZmxvYXRpbmdFbCxcclxuICAgICAgcmVmZXJlbmNlRWwsXHJcbiAgICAgIG92ZXJsYXlQb3NpdGlvbmluZyxcclxuICAgICAgcGxhY2VtZW50LFxyXG4gICAgICBmbGlwUGxhY2VtZW50czogZmlsdGVyZWRGbGlwUGxhY2VtZW50cyxcclxuICAgICAgdHlwZTogXCJtZW51XCJcclxuICAgIH0sIGRlbGF5ZWQpO1xyXG4gIH1cclxuICBjbG9zZUNhbGNpdGVEcm9wZG93bk9uQ2xpY2soZXZlbnQpIHtcclxuICAgIGlmICghaXNQcmltYXJ5UG9pbnRlckJ1dHRvbihldmVudCkgfHwgIXRoaXMub3BlbiB8fCBldmVudC5jb21wb3NlZFBhdGgoKS5pbmNsdWRlcyh0aGlzLmVsKSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLmNsb3NlQ2FsY2l0ZURyb3Bkb3duKGZhbHNlKTtcclxuICB9XHJcbiAgY2xvc2VDYWxjaXRlRHJvcGRvd25PbkV2ZW50KGV2ZW50KSB7XHJcbiAgICB0aGlzLmNsb3NlQ2FsY2l0ZURyb3Bkb3duKCk7XHJcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICB9XHJcbiAgY2xvc2VDYWxjaXRlRHJvcGRvd25Pbk9wZW5FdmVudChldmVudCkge1xyXG4gICAgaWYgKGV2ZW50LmNvbXBvc2VkUGF0aCgpLmluY2x1ZGVzKHRoaXMuZWwpKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRoaXMub3BlbiA9IGZhbHNlO1xyXG4gIH1cclxuICBtb3VzZUVudGVySGFuZGxlcigpIHtcclxuICAgIGlmICh0aGlzLnR5cGUgPT09IFwiaG92ZXJcIikge1xyXG4gICAgICB0aGlzLm9wZW5DYWxjaXRlRHJvcGRvd24oKTtcclxuICAgIH1cclxuICB9XHJcbiAgbW91c2VMZWF2ZUhhbmRsZXIoKSB7XHJcbiAgICBpZiAodGhpcy50eXBlID09PSBcImhvdmVyXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZUNhbGNpdGVEcm9wZG93bigpO1xyXG4gICAgfVxyXG4gIH1cclxuICBjYWxjaXRlSW50ZXJuYWxEcm9wZG93bkl0ZW1LZXlFdmVudChldmVudCkge1xyXG4gICAgY29uc3QgeyBrZXlib2FyZEV2ZW50IH0gPSBldmVudC5kZXRhaWw7XHJcbiAgICBjb25zdCB0YXJnZXQgPSBrZXlib2FyZEV2ZW50LnRhcmdldDtcclxuICAgIHN3aXRjaCAoa2V5Ym9hcmRFdmVudC5rZXkpIHtcclxuICAgICAgY2FzZSBcIlRhYlwiOlxyXG4gICAgICAgIGlmICh0aGlzLml0ZW1zLmluZGV4T2YodGFyZ2V0KSA9PT0gdGhpcy5pdGVtcy5sZW5ndGggLSAxICYmICFrZXlib2FyZEV2ZW50LnNoaWZ0S2V5KSB7XHJcbiAgICAgICAgICB0aGlzLmNsb3NlQ2FsY2l0ZURyb3Bkb3duKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuaXRlbXMuaW5kZXhPZih0YXJnZXQpID09PSAwICYmIGtleWJvYXJkRXZlbnQuc2hpZnRLZXkpIHtcclxuICAgICAgICAgIHRoaXMuY2xvc2VDYWxjaXRlRHJvcGRvd24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJBcnJvd0Rvd25cIjpcclxuICAgICAgICBmb2N1c0VsZW1lbnRJbkdyb3VwKHRoaXMuaXRlbXMsIHRhcmdldCwgXCJuZXh0XCIpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwiQXJyb3dVcFwiOlxyXG4gICAgICAgIGZvY3VzRWxlbWVudEluR3JvdXAodGhpcy5pdGVtcywgdGFyZ2V0LCBcInByZXZpb3VzXCIpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwiSG9tZVwiOlxyXG4gICAgICAgIGZvY3VzRWxlbWVudEluR3JvdXAodGhpcy5pdGVtcywgdGFyZ2V0LCBcImZpcnN0XCIpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwiRW5kXCI6XHJcbiAgICAgICAgZm9jdXNFbGVtZW50SW5Hcm91cCh0aGlzLml0ZW1zLCB0YXJnZXQsIFwibGFzdFwiKTtcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gIH1cclxuICBoYW5kbGVJdGVtU2VsZWN0KGV2ZW50KSB7XHJcbiAgICB0aGlzLnVwZGF0ZVNlbGVjdGVkSXRlbXMoKTtcclxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgdGhpcy5jYWxjaXRlRHJvcGRvd25TZWxlY3QuZW1pdCgpO1xyXG4gICAgaWYgKCF0aGlzLmNsb3NlT25TZWxlY3REaXNhYmxlZCB8fFxyXG4gICAgICBldmVudC5kZXRhaWwucmVxdWVzdGVkRHJvcGRvd25Hcm91cC5zZWxlY3Rpb25Nb2RlID09PSBcIm5vbmVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlQ2FsY2l0ZURyb3Bkb3duKCk7XHJcbiAgICB9XHJcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICB9XHJcbiAgb25CZWZvcmVPcGVuKCkge1xyXG4gICAgdGhpcy5jYWxjaXRlRHJvcGRvd25CZWZvcmVPcGVuLmVtaXQoKTtcclxuICB9XHJcbiAgb25PcGVuKCkge1xyXG4gICAgdGhpcy5jYWxjaXRlRHJvcGRvd25PcGVuLmVtaXQoKTtcclxuICB9XHJcbiAgb25CZWZvcmVDbG9zZSgpIHtcclxuICAgIHRoaXMuY2FsY2l0ZURyb3Bkb3duQmVmb3JlQ2xvc2UuZW1pdCgpO1xyXG4gIH1cclxuICBvbkNsb3NlKCkge1xyXG4gICAgdGhpcy5jYWxjaXRlRHJvcGRvd25DbG9zZS5lbWl0KCk7XHJcbiAgfVxyXG4gIHVwZGF0ZVNlbGVjdGVkSXRlbXMoKSB7XHJcbiAgICB0aGlzLnNlbGVjdGVkSXRlbXMgPSB0aGlzLml0ZW1zLmZpbHRlcigoaXRlbSkgPT4gaXRlbS5zZWxlY3RlZCk7XHJcbiAgfVxyXG4gIGdldE1heFNjcm9sbGVySGVpZ2h0KCkge1xyXG4gICAgY29uc3QgeyBtYXhJdGVtcywgaXRlbXMgfSA9IHRoaXM7XHJcbiAgICBsZXQgaXRlbXNUb1Byb2Nlc3MgPSAwO1xyXG4gICAgbGV0IG1heFNjcm9sbGVySGVpZ2h0ID0gMDtcclxuICAgIGxldCBncm91cEhlYWRlckhlaWdodDtcclxuICAgIHRoaXMuZ3JvdXBzLmZvckVhY2goKGdyb3VwKSA9PiB7XHJcbiAgICAgIGlmIChtYXhJdGVtcyA+IDAgJiYgaXRlbXNUb1Byb2Nlc3MgPCBtYXhJdGVtcykge1xyXG4gICAgICAgIEFycmF5LmZyb20oZ3JvdXAuY2hpbGRyZW4pLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICBpZiAoaW5kZXggPT09IDApIHtcclxuICAgICAgICAgICAgaWYgKGlzTmFOKGdyb3VwSGVhZGVySGVpZ2h0KSkge1xyXG4gICAgICAgICAgICAgIGdyb3VwSGVhZGVySGVpZ2h0ID0gaXRlbS5vZmZzZXRUb3A7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbWF4U2Nyb2xsZXJIZWlnaHQgKz0gZ3JvdXBIZWFkZXJIZWlnaHQ7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAoaXRlbXNUb1Byb2Nlc3MgPCBtYXhJdGVtcykge1xyXG4gICAgICAgICAgICBtYXhTY3JvbGxlckhlaWdodCArPSBpdGVtLm9mZnNldEhlaWdodDtcclxuICAgICAgICAgICAgaXRlbXNUb1Byb2Nlc3MgKz0gMTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gaXRlbXMubGVuZ3RoID4gbWF4SXRlbXMgPyBtYXhTY3JvbGxlckhlaWdodCA6IDA7XHJcbiAgfVxyXG4gIGNsb3NlQ2FsY2l0ZURyb3Bkb3duKGZvY3VzVHJpZ2dlciA9IHRydWUpIHtcclxuICAgIHRoaXMub3BlbiA9IGZhbHNlO1xyXG4gICAgaWYgKGZvY3VzVHJpZ2dlcikge1xyXG4gICAgICBmb2N1c0VsZW1lbnQodGhpcy50cmlnZ2Vyc1swXSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGdldEZvY3VzYWJsZUVsZW1lbnQoaXRlbSkge1xyXG4gICAgaWYgKCFpdGVtKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IHRhcmdldCA9IGl0ZW0uYXR0cmlidXRlcy5pc0xpbmtcclxuICAgICAgPyBpdGVtLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcihcImFcIilcclxuICAgICAgOiBpdGVtO1xyXG4gICAgZm9jdXNFbGVtZW50KHRhcmdldCk7XHJcbiAgfVxyXG4gIHN0YXRpYyBnZXQgZGVsZWdhdGVzRm9jdXMoKSB7IHJldHVybiB0cnVlOyB9XHJcbiAgZ2V0IGVsKCkgeyByZXR1cm4gZ2V0RWxlbWVudCh0aGlzKTsgfVxyXG4gIHN0YXRpYyBnZXQgd2F0Y2hlcnMoKSB7IHJldHVybiB7XHJcbiAgICBcIm9wZW5cIjogW1wib3BlbkhhbmRsZXJcIl0sXHJcbiAgICBcImRpc2FibGVkXCI6IFtcImhhbmRsZURpc2FibGVkQ2hhbmdlXCJdLFxyXG4gICAgXCJmbGlwUGxhY2VtZW50c1wiOiBbXCJmbGlwUGxhY2VtZW50c0hhbmRsZXJcIl0sXHJcbiAgICBcIm1heEl0ZW1zXCI6IFtcIm1heEl0ZW1zSGFuZGxlclwiXSxcclxuICAgIFwib3ZlcmxheVBvc2l0aW9uaW5nXCI6IFtcIm92ZXJsYXlQb3NpdGlvbmluZ0hhbmRsZXJcIl0sXHJcbiAgICBcInBsYWNlbWVudFwiOiBbXCJwbGFjZW1lbnRIYW5kbGVyXCJdXHJcbiAgfTsgfVxyXG59O1xyXG5Ecm9wZG93bi5zdHlsZSA9IGRyb3Bkb3duQ3NzO1xuXG4vKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1jb21wb25lbnRzL2Jsb2IvbWFzdGVyL0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG4gKiB2MS4wLjVcbiAqL1xuY29uc3QgQ1NTJDEgPSB7XG4gIGNvbnRhaW5lclNtYWxsOiBcImNvbnRhaW5lci0tc1wiLFxuICBjb250YWluZXJNZWRpdW06IFwiY29udGFpbmVyLS1tXCIsXG4gIGNvbnRhaW5lckxhcmdlOiBcImNvbnRhaW5lci0tbFwiXG59O1xuXG5jb25zdCBkcm9wZG93bkdyb3VwQ3NzID0gXCJAa2V5ZnJhbWVzIGluezAle29wYWNpdHk6MH0xMDAle29wYWNpdHk6MX19QGtleWZyYW1lcyBpbi1kb3duezAle29wYWNpdHk6MDt0cmFuc2Zvcm06dHJhbnNsYXRlM0QoMCwgLTVweCwgMCl9MTAwJXtvcGFjaXR5OjE7dHJhbnNmb3JtOnRyYW5zbGF0ZTNEKDAsIDAsIDApfX1Aa2V5ZnJhbWVzIGluLXVwezAle29wYWNpdHk6MDt0cmFuc2Zvcm06dHJhbnNsYXRlM0QoMCwgNXB4LCAwKX0xMDAle29wYWNpdHk6MTt0cmFuc2Zvcm06dHJhbnNsYXRlM0QoMCwgMCwgMCl9fUBrZXlmcmFtZXMgaW4tc2NhbGV7MCV7b3BhY2l0eTowO3RyYW5zZm9ybTpzY2FsZTNEKDAuOTUsIDAuOTUsIDEpfTEwMCV7b3BhY2l0eToxO3RyYW5zZm9ybTpzY2FsZTNEKDEsIDEsIDEpfX06cm9vdHstLWNhbGNpdGUtYW5pbWF0aW9uLXRpbWluZzpjYWxjKDE1MG1zICogdmFyKC0tY2FsY2l0ZS1pbnRlcm5hbC1kdXJhdGlvbi1mYWN0b3IpKTstLWNhbGNpdGUtaW50ZXJuYWwtZHVyYXRpb24tZmFjdG9yOnZhcigtLWNhbGNpdGUtZHVyYXRpb24tZmFjdG9yLCAxKTstLWNhbGNpdGUtaW50ZXJuYWwtYW5pbWF0aW9uLXRpbWluZy1mYXN0OmNhbGMoMTAwbXMgKiB2YXIoLS1jYWxjaXRlLWludGVybmFsLWR1cmF0aW9uLWZhY3RvcikpOy0tY2FsY2l0ZS1pbnRlcm5hbC1hbmltYXRpb24tdGltaW5nLW1lZGl1bTpjYWxjKDIwMG1zICogdmFyKC0tY2FsY2l0ZS1pbnRlcm5hbC1kdXJhdGlvbi1mYWN0b3IpKTstLWNhbGNpdGUtaW50ZXJuYWwtYW5pbWF0aW9uLXRpbWluZy1zbG93OmNhbGMoMzAwbXMgKiB2YXIoLS1jYWxjaXRlLWludGVybmFsLWR1cmF0aW9uLWZhY3RvcikpfS5jYWxjaXRlLWFuaW1hdGV7b3BhY2l0eTowO2FuaW1hdGlvbi1maWxsLW1vZGU6Ym90aDthbmltYXRpb24tZHVyYXRpb246dmFyKC0tY2FsY2l0ZS1hbmltYXRpb24tdGltaW5nKX0uY2FsY2l0ZS1hbmltYXRlX19pbnthbmltYXRpb24tbmFtZTppbn0uY2FsY2l0ZS1hbmltYXRlX19pbi1kb3due2FuaW1hdGlvbi1uYW1lOmluLWRvd259LmNhbGNpdGUtYW5pbWF0ZV9faW4tdXB7YW5pbWF0aW9uLW5hbWU6aW4tdXB9LmNhbGNpdGUtYW5pbWF0ZV9faW4tc2NhbGV7YW5pbWF0aW9uLW5hbWU6aW4tc2NhbGV9QG1lZGlhIChwcmVmZXJzLXJlZHVjZWQtbW90aW9uOiByZWR1Y2Upezpyb290ey0tY2FsY2l0ZS1pbnRlcm5hbC1kdXJhdGlvbi1mYWN0b3I6MH19OnJvb3R7LS1jYWxjaXRlLWZsb2F0aW5nLXVpLXRyYW5zaXRpb246dmFyKC0tY2FsY2l0ZS1hbmltYXRpb24tdGltaW5nKTstLWNhbGNpdGUtZmxvYXRpbmctdWktei1pbmRleDo2MDB9Omhvc3QoW2hpZGRlbl0pe2Rpc3BsYXk6bm9uZX06aG9zdHtwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmJsb2NrfS5jb250YWluZXJ7dGV4dC1hbGlnbjpzdGFydH0uY29udGFpbmVyLS1ze2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0tMik7bGluZS1oZWlnaHQ6MXJlbX0uY29udGFpbmVyLS1zIC5kcm9wZG93bi10aXRsZXtwYWRkaW5nOjAuNXJlbX0uY29udGFpbmVyLS1te2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0tMSk7bGluZS1oZWlnaHQ6MXJlbX0uY29udGFpbmVyLS1tIC5kcm9wZG93bi10aXRsZXtwYWRkaW5nOjAuNzVyZW19LmNvbnRhaW5lci0tbHtmb250LXNpemU6dmFyKC0tY2FsY2l0ZS1mb250LXNpemUtMCk7bGluZS1oZWlnaHQ6MS4yNXJlbX0uY29udGFpbmVyLS1sIC5kcm9wZG93bi10aXRsZXtwYWRkaW5nOjFyZW19LmRyb3Bkb3duLXRpdGxle21hcmdpbi1ibG9jay1lbmQ6LTFweDtkaXNwbGF5OmJsb2NrO2N1cnNvcjpkZWZhdWx0O292ZXJmbG93LXdyYXA6YnJlYWstd29yZDtib3JkZXItd2lkdGg6MHB4O2JvcmRlci1ibG9jay1lbmQtd2lkdGg6MXB4O2JvcmRlci1zdHlsZTpzb2xpZDtib3JkZXItY29sb3I6dmFyKC0tY2FsY2l0ZS11aS1ib3JkZXItMyk7Zm9udC13ZWlnaHQ6dmFyKC0tY2FsY2l0ZS1mb250LXdlaWdodC1ib2xkKTtjb2xvcjp2YXIoLS1jYWxjaXRlLXVpLXRleHQtMil9LmRyb3Bkb3duLXNlcGFyYXRvcntkaXNwbGF5OmJsb2NrO2Jsb2NrLXNpemU6MXB4O2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS11aS1ib3JkZXItMyl9XCI7XG5cbmNvbnN0IERyb3Bkb3duR3JvdXAgPSBjbGFzcyB7XHJcbiAgY29uc3RydWN0b3IoaG9zdFJlZikge1xyXG4gICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcclxuICAgIHRoaXMuY2FsY2l0ZUludGVybmFsRHJvcGRvd25JdGVtQ2hhbmdlID0gY3JlYXRlRXZlbnQodGhpcywgXCJjYWxjaXRlSW50ZXJuYWxEcm9wZG93bkl0ZW1DaGFuZ2VcIiwgNik7XHJcbiAgICB0aGlzLmdyb3VwVGl0bGUgPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLnNlbGVjdGlvbk1vZGUgPSBcInNpbmdsZVwiO1xyXG4gICAgdGhpcy5zY2FsZSA9IHVuZGVmaW5lZDtcclxuICB9XHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vXHJcbiAgLy8gIExpZmVjeWNsZVxyXG4gIC8vXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIGNvbXBvbmVudFdpbGxMb2FkKCkge1xyXG4gICAgdGhpcy5ncm91cFBvc2l0aW9uID0gdGhpcy5nZXRHcm91cFBvc2l0aW9uKCk7XHJcbiAgfVxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHNjYWxlID0gdGhpcy5zY2FsZSB8fCBnZXRFbGVtZW50UHJvcCh0aGlzLmVsLCBcInNjYWxlXCIsIFwibVwiKTtcclxuICAgIGNvbnN0IGdyb3VwVGl0bGUgPSB0aGlzLmdyb3VwVGl0bGUgPyAoaChcInNwYW5cIiwgeyBcImFyaWEtaGlkZGVuXCI6IFwidHJ1ZVwiLCBjbGFzczogXCJkcm9wZG93bi10aXRsZVwiIH0sIHRoaXMuZ3JvdXBUaXRsZSkpIDogbnVsbDtcclxuICAgIGNvbnN0IGRyb3Bkb3duU2VwYXJhdG9yID0gdGhpcy5ncm91cFBvc2l0aW9uID4gMCA/IGgoXCJkaXZcIiwgeyBjbGFzczogXCJkcm9wZG93bi1zZXBhcmF0b3JcIiwgcm9sZTogXCJzZXBhcmF0b3JcIiB9KSA6IG51bGw7XHJcbiAgICByZXR1cm4gKGgoSG9zdCwgeyBcImFyaWEtbGFiZWxcIjogdGhpcy5ncm91cFRpdGxlLCByb2xlOiBcImdyb3VwXCIgfSwgaChcImRpdlwiLCB7IGNsYXNzOiB7XHJcbiAgICAgICAgY29udGFpbmVyOiB0cnVlLFxyXG4gICAgICAgIFtDU1MkMS5jb250YWluZXJTbWFsbF06IHNjYWxlID09PSBcInNcIixcclxuICAgICAgICBbQ1NTJDEuY29udGFpbmVyTWVkaXVtXTogc2NhbGUgPT09IFwibVwiLFxyXG4gICAgICAgIFtDU1MkMS5jb250YWluZXJMYXJnZV06IHNjYWxlID09PSBcImxcIlxyXG4gICAgICB9LCB0aXRsZTogdGhpcy5ncm91cFRpdGxlIH0sIGRyb3Bkb3duU2VwYXJhdG9yLCBncm91cFRpdGxlLCBoKFwic2xvdFwiLCBudWxsKSkpKTtcclxuICB9XHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vXHJcbiAgLy8gIEV2ZW50IExpc3RlbmVyc1xyXG4gIC8vXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIHVwZGF0ZUFjdGl2ZUl0ZW1PbkNoYW5nZShldmVudCkge1xyXG4gICAgdGhpcy5yZXF1ZXN0ZWREcm9wZG93bkdyb3VwID0gZXZlbnQuZGV0YWlsLnJlcXVlc3RlZERyb3Bkb3duR3JvdXA7XHJcbiAgICB0aGlzLnJlcXVlc3RlZERyb3Bkb3duSXRlbSA9IGV2ZW50LmRldGFpbC5yZXF1ZXN0ZWREcm9wZG93bkl0ZW07XHJcbiAgICB0aGlzLmNhbGNpdGVJbnRlcm5hbERyb3Bkb3duSXRlbUNoYW5nZS5lbWl0KHtcclxuICAgICAgcmVxdWVzdGVkRHJvcGRvd25Hcm91cDogdGhpcy5yZXF1ZXN0ZWREcm9wZG93bkdyb3VwLFxyXG4gICAgICByZXF1ZXN0ZWREcm9wZG93bkl0ZW06IHRoaXMucmVxdWVzdGVkRHJvcGRvd25JdGVtXHJcbiAgICB9KTtcclxuICB9XHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vXHJcbiAgLy8gIFByaXZhdGUgTWV0aG9kc1xyXG4gIC8vXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIGdldEdyb3VwUG9zaXRpb24oKSB7XHJcbiAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbCh0aGlzLmVsLnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcImNhbGNpdGUtZHJvcGRvd24tZ3JvdXBcIiksIHRoaXMuZWwpO1xyXG4gIH1cclxuICBzdGF0aWMgZ2V0IGRlbGVnYXRlc0ZvY3VzKCkgeyByZXR1cm4gdHJ1ZTsgfVxyXG4gIGdldCBlbCgpIHsgcmV0dXJuIGdldEVsZW1lbnQodGhpcyk7IH1cclxufTtcclxuRHJvcGRvd25Hcm91cC5zdHlsZSA9IGRyb3Bkb3duR3JvdXBDc3M7XG5cbi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvYmxvYi9tYXN0ZXIvTElDRU5TRS5tZCBmb3IgZGV0YWlscy5cbiAqIHYxLjAuNVxuICovXG5jb25zdCBDU1MgPSB7XG4gIGNvbnRhaW5lckxpbms6IFwiY29udGFpbmVyLS1saW5rXCIsXG4gIGNvbnRhaW5lclNtYWxsOiBcImNvbnRhaW5lci0tc1wiLFxuICBjb250YWluZXJNZWRpdW06IFwiY29udGFpbmVyLS1tXCIsXG4gIGNvbnRhaW5lckxhcmdlOiBcImNvbnRhaW5lci0tbFwiLFxuICBjb250YWluZXJNdWx0aTogXCJjb250YWluZXItLW11bHRpLXNlbGVjdGlvblwiLFxuICBjb250YWluZXJTaW5nbGU6IFwiY29udGFpbmVyLS1zaW5nbGUtc2VsZWN0aW9uXCIsXG4gIGNvbnRhaW5lck5vbmU6IFwiY29udGFpbmVyLS1ub25lLXNlbGVjdGlvblwiLFxuICBpY29uOiBcImRyb3Bkb3duLWl0ZW0taWNvblwiLFxuICBpY29uRW5kOiBcImRyb3Bkb3duLWl0ZW0taWNvbi1lbmRcIixcbiAgaWNvblN0YXJ0OiBcImRyb3Bkb3duLWl0ZW0taWNvbi1zdGFydFwiLFxuICBpdGVtQ29udGVudDogXCJkcm9wZG93bi1pdGVtLWNvbnRlbnRcIixcbiAgbGluazogXCJkcm9wZG93bi1saW5rXCJcbn07XG5cbmNvbnN0IGRyb3Bkb3duSXRlbUNzcyA9IFwiQGtleWZyYW1lcyBpbnswJXtvcGFjaXR5OjB9MTAwJXtvcGFjaXR5OjF9fUBrZXlmcmFtZXMgaW4tZG93bnswJXtvcGFjaXR5OjA7dHJhbnNmb3JtOnRyYW5zbGF0ZTNEKDAsIC01cHgsIDApfTEwMCV7b3BhY2l0eToxO3RyYW5zZm9ybTp0cmFuc2xhdGUzRCgwLCAwLCAwKX19QGtleWZyYW1lcyBpbi11cHswJXtvcGFjaXR5OjA7dHJhbnNmb3JtOnRyYW5zbGF0ZTNEKDAsIDVweCwgMCl9MTAwJXtvcGFjaXR5OjE7dHJhbnNmb3JtOnRyYW5zbGF0ZTNEKDAsIDAsIDApfX1Aa2V5ZnJhbWVzIGluLXNjYWxlezAle29wYWNpdHk6MDt0cmFuc2Zvcm06c2NhbGUzRCgwLjk1LCAwLjk1LCAxKX0xMDAle29wYWNpdHk6MTt0cmFuc2Zvcm06c2NhbGUzRCgxLCAxLCAxKX19OnJvb3R7LS1jYWxjaXRlLWFuaW1hdGlvbi10aW1pbmc6Y2FsYygxNTBtcyAqIHZhcigtLWNhbGNpdGUtaW50ZXJuYWwtZHVyYXRpb24tZmFjdG9yKSk7LS1jYWxjaXRlLWludGVybmFsLWR1cmF0aW9uLWZhY3Rvcjp2YXIoLS1jYWxjaXRlLWR1cmF0aW9uLWZhY3RvciwgMSk7LS1jYWxjaXRlLWludGVybmFsLWFuaW1hdGlvbi10aW1pbmctZmFzdDpjYWxjKDEwMG1zICogdmFyKC0tY2FsY2l0ZS1pbnRlcm5hbC1kdXJhdGlvbi1mYWN0b3IpKTstLWNhbGNpdGUtaW50ZXJuYWwtYW5pbWF0aW9uLXRpbWluZy1tZWRpdW06Y2FsYygyMDBtcyAqIHZhcigtLWNhbGNpdGUtaW50ZXJuYWwtZHVyYXRpb24tZmFjdG9yKSk7LS1jYWxjaXRlLWludGVybmFsLWFuaW1hdGlvbi10aW1pbmctc2xvdzpjYWxjKDMwMG1zICogdmFyKC0tY2FsY2l0ZS1pbnRlcm5hbC1kdXJhdGlvbi1mYWN0b3IpKX0uY2FsY2l0ZS1hbmltYXRle29wYWNpdHk6MDthbmltYXRpb24tZmlsbC1tb2RlOmJvdGg7YW5pbWF0aW9uLWR1cmF0aW9uOnZhcigtLWNhbGNpdGUtYW5pbWF0aW9uLXRpbWluZyl9LmNhbGNpdGUtYW5pbWF0ZV9faW57YW5pbWF0aW9uLW5hbWU6aW59LmNhbGNpdGUtYW5pbWF0ZV9faW4tZG93bnthbmltYXRpb24tbmFtZTppbi1kb3dufS5jYWxjaXRlLWFuaW1hdGVfX2luLXVwe2FuaW1hdGlvbi1uYW1lOmluLXVwfS5jYWxjaXRlLWFuaW1hdGVfX2luLXNjYWxle2FuaW1hdGlvbi1uYW1lOmluLXNjYWxlfUBtZWRpYSAocHJlZmVycy1yZWR1Y2VkLW1vdGlvbjogcmVkdWNlKXs6cm9vdHstLWNhbGNpdGUtaW50ZXJuYWwtZHVyYXRpb24tZmFjdG9yOjB9fTpyb290ey0tY2FsY2l0ZS1mbG9hdGluZy11aS10cmFuc2l0aW9uOnZhcigtLWNhbGNpdGUtYW5pbWF0aW9uLXRpbWluZyk7LS1jYWxjaXRlLWZsb2F0aW5nLXVpLXotaW5kZXg6NjAwfTpob3N0KFtoaWRkZW5dKXtkaXNwbGF5Om5vbmV9LmNvbnRhaW5lci0tc3twYWRkaW5nLWJsb2NrOjAuMjVyZW07Zm9udC1zaXplOnZhcigtLWNhbGNpdGUtZm9udC1zaXplLS0yKTtsaW5lLWhlaWdodDoxcmVtO3BhZGRpbmctaW5saW5lLWVuZDowLjVyZW07cGFkZGluZy1pbmxpbmUtc3RhcnQ6MS41cmVtfS5jb250YWluZXItLW17cGFkZGluZy1ibG9jazowLjVyZW07Zm9udC1zaXplOnZhcigtLWNhbGNpdGUtZm9udC1zaXplLS0xKTtsaW5lLWhlaWdodDoxcmVtO3BhZGRpbmctaW5saW5lLWVuZDowLjc1cmVtO3BhZGRpbmctaW5saW5lLXN0YXJ0OjJyZW19LmNvbnRhaW5lci0tbHtwYWRkaW5nLWJsb2NrOjAuNjI1cmVtO2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0wKTtsaW5lLWhlaWdodDoxLjI1cmVtO3BhZGRpbmctaW5saW5lLWVuZDoxcmVtO3BhZGRpbmctaW5saW5lLXN0YXJ0OjIuNXJlbX0uY29udGFpbmVyLS1zLmNvbnRhaW5lci0tbm9uZS1zZWxlY3Rpb257cGFkZGluZy1pbmxpbmUtc3RhcnQ6MC4yNXJlbX0uY29udGFpbmVyLS1zLmNvbnRhaW5lci0tbm9uZS1zZWxlY3Rpb24gLmRyb3Bkb3duLWxpbmt7cGFkZGluZy1pbmxpbmUtc3RhcnQ6MHB4fS5jb250YWluZXItLW0uY29udGFpbmVyLS1ub25lLXNlbGVjdGlvbntwYWRkaW5nLWlubGluZS1zdGFydDowLjVyZW19LmNvbnRhaW5lci0tbS5jb250YWluZXItLW5vbmUtc2VsZWN0aW9uIC5kcm9wZG93bi1saW5re3BhZGRpbmctaW5saW5lLXN0YXJ0OjBweH0uY29udGFpbmVyLS1sLmNvbnRhaW5lci0tbm9uZS1zZWxlY3Rpb257cGFkZGluZy1pbmxpbmUtc3RhcnQ6MC43NXJlbX0uY29udGFpbmVyLS1sLmNvbnRhaW5lci0tbm9uZS1zZWxlY3Rpb24gLmRyb3Bkb3duLWxpbmt7cGFkZGluZy1pbmxpbmUtc3RhcnQ6MHB4fTpob3N0e3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6ZmxleDtmbGV4LWdyb3c6MTthbGlnbi1pdGVtczpjZW50ZXJ9LmNvbnRhaW5lcntwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmZsZXg7ZmxleC1ncm93OjE7Y3Vyc29yOnBvaW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyO2NvbG9yOnZhcigtLWNhbGNpdGUtdWktdGV4dC0zKTt0ZXh0LWRlY29yYXRpb24tbGluZTpub25lO3RyYW5zaXRpb24tZHVyYXRpb246MTUwbXM7dHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246Y3ViaWMtYmV6aWVyKDAuNCwgMCwgMC4yLCAxKTt0ZXh0LWFsaWduOnN0YXJ0fS5kcm9wZG93bi1pdGVtLWNvbnRlbnR7ZmxleDoxIDEgYXV0bztwYWRkaW5nLWJsb2NrOjAuMTI1cmVtO3BhZGRpbmctaW5saW5lLWVuZDphdXRvO3BhZGRpbmctaW5saW5lLXN0YXJ0OjAuMjVyZW19Omhvc3QsLmNvbnRhaW5lci0tbGluayBhe291dGxpbmUtY29sb3I6dHJhbnNwYXJlbnR9Omhvc3QoOmZvY3VzKXtvdXRsaW5lOjJweCBzb2xpZCB0cmFuc3BhcmVudDtvdXRsaW5lOjJweCBzb2xpZCB2YXIoLS1jYWxjaXRlLXVpLWJyYW5kKTtvdXRsaW5lLW9mZnNldDotMnB4fS5jb250YWluZXItLWxpbmt7cGFkZGluZzowcHh9LmNvbnRhaW5lci0tbGluayBhe3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6ZmxleDtmbGV4LWdyb3c6MTtjdXJzb3I6cG9pbnRlcjthbGlnbi1pdGVtczpjZW50ZXI7Y29sb3I6dmFyKC0tY2FsY2l0ZS11aS10ZXh0LTMpO3RleHQtZGVjb3JhdGlvbi1saW5lOm5vbmU7dHJhbnNpdGlvbi1kdXJhdGlvbjoxNTBtczt0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjpjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpfS5jb250YWluZXItLXMgLmRyb3Bkb3duLWxpbmt7cGFkZGluZy1ibG9jazowLjI1cmVtO2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0tMik7bGluZS1oZWlnaHQ6MXJlbTtwYWRkaW5nLWlubGluZS1lbmQ6MC41cmVtO3BhZGRpbmctaW5saW5lLXN0YXJ0OjEuNXJlbX0uY29udGFpbmVyLS1tIC5kcm9wZG93bi1saW5re3BhZGRpbmctYmxvY2s6MC41cmVtO2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0tMSk7bGluZS1oZWlnaHQ6MXJlbTtwYWRkaW5nLWlubGluZS1lbmQ6MC43NXJlbTtwYWRkaW5nLWlubGluZS1zdGFydDoycmVtfS5jb250YWluZXItLWwgLmRyb3Bkb3duLWxpbmt7cGFkZGluZy1ibG9jazowLjc1cmVtO2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0wKTtsaW5lLWhlaWdodDoxLjI1cmVtO3BhZGRpbmctaW5saW5lLWVuZDoxcmVtO3BhZGRpbmctaW5saW5lLXN0YXJ0OjIuNXJlbX06aG9zdCg6aG92ZXIpIC5jb250YWluZXIsOmhvc3QoOmFjdGl2ZSkgLmNvbnRhaW5lcntiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtdWktZm9yZWdyb3VuZC0yKTtjb2xvcjp2YXIoLS1jYWxjaXRlLXVpLXRleHQtMSk7dGV4dC1kZWNvcmF0aW9uLWxpbmU6bm9uZX06aG9zdCg6aG92ZXIpIC5jb250YWluZXItLWxpbmsgLmRyb3Bkb3duLWxpbmssOmhvc3QoOmFjdGl2ZSkgLmNvbnRhaW5lci0tbGluayAuZHJvcGRvd24tbGlua3tjb2xvcjp2YXIoLS1jYWxjaXRlLXVpLXRleHQtMSl9Omhvc3QoOmZvY3VzKSAuY29udGFpbmVye2NvbG9yOnZhcigtLWNhbGNpdGUtdWktdGV4dC0xKTt0ZXh0LWRlY29yYXRpb24tbGluZTpub25lfTpob3N0KDphY3RpdmUpIC5jb250YWluZXJ7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWZvcmVncm91bmQtMyl9Omhvc3QoOmhvdmVyKSAuY29udGFpbmVyOmJlZm9yZSw6aG9zdCg6YWN0aXZlKSAuY29udGFpbmVyOmJlZm9yZSw6aG9zdCg6Zm9jdXMpIC5jb250YWluZXI6YmVmb3Jle29wYWNpdHk6MX06aG9zdChbc2VsZWN0ZWRdKSAuY29udGFpbmVyOm5vdCguY29udGFpbmVyLS1ub25lLXNlbGVjdGlvbiksOmhvc3QoW3NlbGVjdGVkXSkgLmNvbnRhaW5lci0tbGluayAuZHJvcGRvd24tbGlua3tmb250LXdlaWdodDp2YXIoLS1jYWxjaXRlLWZvbnQtd2VpZ2h0LW1lZGl1bSk7Y29sb3I6dmFyKC0tY2FsY2l0ZS11aS10ZXh0LTEpfTpob3N0KFtzZWxlY3RlZF0pIC5jb250YWluZXI6bm90KC5jb250YWluZXItLW5vbmUtc2VsZWN0aW9uKTpiZWZvcmUsOmhvc3QoW3NlbGVjdGVkXSkgLmNvbnRhaW5lci0tbGluayAuZHJvcGRvd24tbGluazpiZWZvcmV7b3BhY2l0eToxO2NvbG9yOnZhcigtLWNhbGNpdGUtdWktYnJhbmQpfTpob3N0KFtzZWxlY3RlZF0pIC5jb250YWluZXI6bm90KC5jb250YWluZXItLW5vbmUtc2VsZWN0aW9uKSBjYWxjaXRlLWljb24sOmhvc3QoW3NlbGVjdGVkXSkgLmNvbnRhaW5lci0tbGluayAuZHJvcGRvd24tbGluayBjYWxjaXRlLWljb257Y29sb3I6dmFyKC0tY2FsY2l0ZS11aS1icmFuZCl9LmNvbnRhaW5lci0tbXVsdGktc2VsZWN0aW9uOmJlZm9yZSwuY29udGFpbmVyLS1ub25lLXNlbGVjdGlvbjpiZWZvcmV7ZGlzcGxheTpub25lfS5jb250YWluZXItLXM6YmVmb3Jle2luc2V0LWlubGluZS1zdGFydDowLjVyZW19LmNvbnRhaW5lci0tbTpiZWZvcmV7aW5zZXQtaW5saW5lLXN0YXJ0OjAuNzVyZW19LmNvbnRhaW5lci0tbDpiZWZvcmV7aW5zZXQtaW5saW5lLXN0YXJ0OjFyZW19LmRyb3Bkb3duLWl0ZW0taWNvbntwb3NpdGlvbjphYnNvbHV0ZTtvcGFjaXR5OjA7dHJhbnNpdGlvbi1kdXJhdGlvbjoxNTBtczt0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjpjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpO3RyYW5zZm9ybTpzY2FsZSgwLjkpfS5jb250YWluZXItLXMgLmRyb3Bkb3duLWl0ZW0taWNvbntpbnNldC1pbmxpbmUtc3RhcnQ6MC4yNXJlbX0uY29udGFpbmVyLS1tIC5kcm9wZG93bi1pdGVtLWljb257aW5zZXQtaW5saW5lLXN0YXJ0OjAuNXJlbX0uY29udGFpbmVyLS1sIC5kcm9wZG93bi1pdGVtLWljb257aW5zZXQtaW5saW5lLXN0YXJ0OjAuNzVyZW19Omhvc3QoOmhvdmVyKSAuZHJvcGRvd24taXRlbS1pY29ue2NvbG9yOnZhcigtLWNhbGNpdGUtdWktYm9yZGVyLTEpO29wYWNpdHk6MX06aG9zdChbc2VsZWN0ZWRdKSAuZHJvcGRvd24taXRlbS1pY29ue2NvbG9yOnZhcigtLWNhbGNpdGUtdWktYnJhbmQpO29wYWNpdHk6MX0uY29udGFpbmVyLS1zIC5kcm9wZG93bi1pdGVtLWljb24tc3RhcnR7bWFyZ2luLWlubGluZS1lbmQ6MC41cmVtO21hcmdpbi1pbmxpbmUtc3RhcnQ6MC4yNXJlbX0uY29udGFpbmVyLS1zIC5kcm9wZG93bi1pdGVtLWljb24tZW5ke21hcmdpbi1pbmxpbmUtc3RhcnQ6MC41cmVtfS5jb250YWluZXItLW0gLmRyb3Bkb3duLWl0ZW0taWNvbi1zdGFydHttYXJnaW4taW5saW5lLWVuZDowLjc1cmVtO21hcmdpbi1pbmxpbmUtc3RhcnQ6MC4yNXJlbX0uY29udGFpbmVyLS1tIC5kcm9wZG93bi1pdGVtLWljb24tZW5ke21hcmdpbi1pbmxpbmUtc3RhcnQ6MC43NXJlbX0uY29udGFpbmVyLS1sIC5kcm9wZG93bi1pdGVtLWljb24tc3RhcnR7bWFyZ2luLWlubGluZS1lbmQ6MXJlbTttYXJnaW4taW5saW5lLXN0YXJ0OjAuMjVyZW19LmNvbnRhaW5lci0tbCAuZHJvcGRvd24taXRlbS1pY29uLWVuZHttYXJnaW4taW5saW5lLXN0YXJ0OjFyZW19XCI7XG5cbmNvbnN0IERyb3Bkb3duSXRlbSA9IGNsYXNzIHtcclxuICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XHJcbiAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xyXG4gICAgdGhpcy5jYWxjaXRlRHJvcGRvd25JdGVtU2VsZWN0ID0gY3JlYXRlRXZlbnQodGhpcywgXCJjYWxjaXRlRHJvcGRvd25JdGVtU2VsZWN0XCIsIDYpO1xyXG4gICAgdGhpcy5jYWxjaXRlSW50ZXJuYWxEcm9wZG93bkl0ZW1TZWxlY3QgPSBjcmVhdGVFdmVudCh0aGlzLCBcImNhbGNpdGVJbnRlcm5hbERyb3Bkb3duSXRlbVNlbGVjdFwiLCA2KTtcclxuICAgIHRoaXMuY2FsY2l0ZUludGVybmFsRHJvcGRvd25JdGVtS2V5RXZlbnQgPSBjcmVhdGVFdmVudCh0aGlzLCBcImNhbGNpdGVJbnRlcm5hbERyb3Bkb3duSXRlbUtleUV2ZW50XCIsIDYpO1xyXG4gICAgdGhpcy5jYWxjaXRlSW50ZXJuYWxEcm9wZG93bkNsb3NlUmVxdWVzdCA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiY2FsY2l0ZUludGVybmFsRHJvcGRvd25DbG9zZVJlcXVlc3RcIiwgNik7XHJcbiAgICAvKiogU3BlY2lmaWVzIHRoZSBzY2FsZSBvZiBkcm9wZG93bi1pdGVtIGNvbnRyb2xsZWQgYnkgdGhlIHBhcmVudCwgZGVmYXVsdHMgdG8gbSAqL1xyXG4gICAgdGhpcy5zY2FsZSA9IFwibVwiO1xyXG4gICAgdGhpcy5zZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5pY29uRmxpcFJ0bCA9IHVuZGVmaW5lZDtcclxuICAgIHRoaXMuaWNvblN0YXJ0ID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5pY29uRW5kID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5ocmVmID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5sYWJlbCA9IHVuZGVmaW5lZDtcclxuICAgIHRoaXMucmVsID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy50YXJnZXQgPSB1bmRlZmluZWQ7XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vICBQdWJsaWMgTWV0aG9kc1xyXG4gIC8vXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8qKiBTZXRzIGZvY3VzIG9uIHRoZSBjb21wb25lbnQuICovXHJcbiAgYXN5bmMgc2V0Rm9jdXMoKSB7XHJcbiAgICBhd2FpdCBjb21wb25lbnRMb2FkZWQodGhpcyk7XHJcbiAgICB0aGlzLmVsPy5mb2N1cygpO1xyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyAgTGlmZWN5Y2xlXHJcbiAgLy9cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgY29tcG9uZW50V2lsbExvYWQoKSB7XHJcbiAgICBzZXRVcExvYWRhYmxlQ29tcG9uZW50KHRoaXMpO1xyXG4gICAgdGhpcy5pbml0aWFsaXplKCk7XHJcbiAgfVxyXG4gIGNvbXBvbmVudERpZExvYWQoKSB7XHJcbiAgICBzZXRDb21wb25lbnRMb2FkZWQodGhpcyk7XHJcbiAgfVxyXG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xyXG4gICAgdGhpcy5pbml0aWFsaXplKCk7XHJcbiAgfVxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHNjYWxlID0gZ2V0RWxlbWVudFByb3AodGhpcy5lbCwgXCJzY2FsZVwiLCB0aGlzLnNjYWxlKTtcclxuICAgIGNvbnN0IGljb25TdGFydEVsID0gKGgoXCJjYWxjaXRlLWljb25cIiwgeyBjbGFzczogQ1NTLmljb25TdGFydCwgZmxpcFJ0bDogdGhpcy5pY29uRmxpcFJ0bCA9PT0gXCJzdGFydFwiIHx8IHRoaXMuaWNvbkZsaXBSdGwgPT09IFwiYm90aFwiLCBpY29uOiB0aGlzLmljb25TdGFydCwgc2NhbGU6IHNjYWxlID09PSBcImxcIiA/IFwibVwiIDogXCJzXCIgfSkpO1xyXG4gICAgY29uc3QgY29udGVudE5vZGUgPSAoaChcInNwYW5cIiwgeyBjbGFzczogQ1NTLml0ZW1Db250ZW50IH0sIGgoXCJzbG90XCIsIG51bGwpKSk7XHJcbiAgICBjb25zdCBpY29uRW5kRWwgPSAoaChcImNhbGNpdGUtaWNvblwiLCB7IGNsYXNzOiBDU1MuaWNvbkVuZCwgZmxpcFJ0bDogdGhpcy5pY29uRmxpcFJ0bCA9PT0gXCJlbmRcIiB8fCB0aGlzLmljb25GbGlwUnRsID09PSBcImJvdGhcIiwgaWNvbjogdGhpcy5pY29uRW5kLCBzY2FsZTogc2NhbGUgPT09IFwibFwiID8gXCJtXCIgOiBcInNcIiB9KSk7XHJcbiAgICBjb25zdCBzbG90dGVkQ29udGVudCA9IHRoaXMuaWNvblN0YXJ0ICYmIHRoaXMuaWNvbkVuZFxyXG4gICAgICA/IFtpY29uU3RhcnRFbCwgY29udGVudE5vZGUsIGljb25FbmRFbF1cclxuICAgICAgOiB0aGlzLmljb25TdGFydFxyXG4gICAgICAgID8gW2ljb25TdGFydEVsLCBjb250ZW50Tm9kZV1cclxuICAgICAgICA6IHRoaXMuaWNvbkVuZFxyXG4gICAgICAgICAgPyBbY29udGVudE5vZGUsIGljb25FbmRFbF1cclxuICAgICAgICAgIDogY29udGVudE5vZGU7XHJcbiAgICBjb25zdCBjb250ZW50RWwgPSAhdGhpcy5ocmVmID8gKHNsb3R0ZWRDb250ZW50KSA6IChoKFwiYVwiLCB7IFwiYXJpYS1sYWJlbFwiOiB0aGlzLmxhYmVsLCBjbGFzczogQ1NTLmxpbmssIGhyZWY6IHRoaXMuaHJlZiwgcmVmOiAoZWwpID0+ICh0aGlzLmNoaWxkTGluayA9IGVsKSwgcmVsOiB0aGlzLnJlbCwgdGFiSW5kZXg6IC0xLCB0YXJnZXQ6IHRoaXMudGFyZ2V0IH0sIHNsb3R0ZWRDb250ZW50KSk7XHJcbiAgICBjb25zdCBpdGVtUm9sZSA9IHRoaXMuaHJlZlxyXG4gICAgICA/IG51bGxcclxuICAgICAgOiB0aGlzLnNlbGVjdGlvbk1vZGUgPT09IFwic2luZ2xlXCJcclxuICAgICAgICA/IFwibWVudWl0ZW1yYWRpb1wiXHJcbiAgICAgICAgOiB0aGlzLnNlbGVjdGlvbk1vZGUgPT09IFwibXVsdGlwbGVcIlxyXG4gICAgICAgICAgPyBcIm1lbnVpdGVtY2hlY2tib3hcIlxyXG4gICAgICAgICAgOiBcIm1lbnVpdGVtXCI7XHJcbiAgICBjb25zdCBpdGVtQXJpYSA9IHRoaXMuc2VsZWN0aW9uTW9kZSAhPT0gXCJub25lXCIgPyB0b0FyaWFCb29sZWFuKHRoaXMuc2VsZWN0ZWQpIDogbnVsbDtcclxuICAgIHJldHVybiAoaChIb3N0LCB7IFwiYXJpYS1jaGVja2VkXCI6IGl0ZW1BcmlhLCByb2xlOiBpdGVtUm9sZSwgdGFiaW5kZXg6IFwiMFwiIH0sIGgoXCJkaXZcIiwgeyBjbGFzczoge1xyXG4gICAgICAgIGNvbnRhaW5lcjogdHJ1ZSxcclxuICAgICAgICBbQ1NTLmNvbnRhaW5lckxpbmtdOiAhIXRoaXMuaHJlZixcclxuICAgICAgICBbQ1NTLmNvbnRhaW5lclNtYWxsXTogc2NhbGUgPT09IFwic1wiLFxyXG4gICAgICAgIFtDU1MuY29udGFpbmVyTWVkaXVtXTogc2NhbGUgPT09IFwibVwiLFxyXG4gICAgICAgIFtDU1MuY29udGFpbmVyTGFyZ2VdOiBzY2FsZSA9PT0gXCJsXCIsXHJcbiAgICAgICAgW0NTUy5jb250YWluZXJNdWx0aV06IHRoaXMuc2VsZWN0aW9uTW9kZSA9PT0gXCJtdWx0aXBsZVwiLFxyXG4gICAgICAgIFtDU1MuY29udGFpbmVyU2luZ2xlXTogdGhpcy5zZWxlY3Rpb25Nb2RlID09PSBcInNpbmdsZVwiLFxyXG4gICAgICAgIFtDU1MuY29udGFpbmVyTm9uZV06IHRoaXMuc2VsZWN0aW9uTW9kZSA9PT0gXCJub25lXCJcclxuICAgICAgfSB9LCB0aGlzLnNlbGVjdGlvbk1vZGUgIT09IFwibm9uZVwiID8gKGgoXCJjYWxjaXRlLWljb25cIiwgeyBjbGFzczogQ1NTLmljb24sIGljb246IHRoaXMuc2VsZWN0aW9uTW9kZSA9PT0gXCJtdWx0aXBsZVwiID8gXCJjaGVja1wiIDogXCJidWxsZXQtcG9pbnRcIiwgc2NhbGU6IHNjYWxlID09PSBcImxcIiA/IFwibVwiIDogXCJzXCIgfSkpIDogbnVsbCwgY29udGVudEVsKSkpO1xyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyAgRXZlbnQgTGlzdGVuZXJzXHJcbiAgLy9cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgb25DbGljaygpIHtcclxuICAgIHRoaXMuZW1pdFJlcXVlc3RlZEl0ZW0oKTtcclxuICB9XHJcbiAga2V5RG93bkhhbmRsZXIoZXZlbnQpIHtcclxuICAgIHN3aXRjaCAoZXZlbnQua2V5KSB7XHJcbiAgICAgIGNhc2UgXCIgXCI6XHJcbiAgICAgIGNhc2UgXCJFbnRlclwiOlxyXG4gICAgICAgIHRoaXMuZW1pdFJlcXVlc3RlZEl0ZW0oKTtcclxuICAgICAgICBpZiAodGhpcy5ocmVmKSB7XHJcbiAgICAgICAgICB0aGlzLmNoaWxkTGluay5jbGljaygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwiRXNjYXBlXCI6XHJcbiAgICAgICAgdGhpcy5jYWxjaXRlSW50ZXJuYWxEcm9wZG93bkNsb3NlUmVxdWVzdC5lbWl0KCk7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcIlRhYlwiOlxyXG4gICAgICAgIHRoaXMuY2FsY2l0ZUludGVybmFsRHJvcGRvd25JdGVtS2V5RXZlbnQuZW1pdCh7IGtleWJvYXJkRXZlbnQ6IGV2ZW50IH0pO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwiQXJyb3dVcFwiOlxyXG4gICAgICBjYXNlIFwiQXJyb3dEb3duXCI6XHJcbiAgICAgIGNhc2UgXCJIb21lXCI6XHJcbiAgICAgIGNhc2UgXCJFbmRcIjpcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHRoaXMuY2FsY2l0ZUludGVybmFsRHJvcGRvd25JdGVtS2V5RXZlbnQuZW1pdCh7IGtleWJvYXJkRXZlbnQ6IGV2ZW50IH0pO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH1cclxuICB1cGRhdGVBY3RpdmVJdGVtT25DaGFuZ2UoZXZlbnQpIHtcclxuICAgIGNvbnN0IHBhcmVudEVtaXR0ZWRDaGFuZ2UgPSBldmVudC5jb21wb3NlZFBhdGgoKS5pbmNsdWRlcyh0aGlzLnBhcmVudERyb3Bkb3duR3JvdXBFbCk7XHJcbiAgICBpZiAocGFyZW50RW1pdHRlZENoYW5nZSkge1xyXG4gICAgICB0aGlzLnJlcXVlc3RlZERyb3Bkb3duR3JvdXAgPSBldmVudC5kZXRhaWwucmVxdWVzdGVkRHJvcGRvd25Hcm91cDtcclxuICAgICAgdGhpcy5yZXF1ZXN0ZWREcm9wZG93bkl0ZW0gPSBldmVudC5kZXRhaWwucmVxdWVzdGVkRHJvcGRvd25JdGVtO1xyXG4gICAgICB0aGlzLmRldGVybWluZUFjdGl2ZUl0ZW0oKTtcclxuICAgIH1cclxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyAgUHJpdmF0ZSBNZXRob2RzXHJcbiAgLy9cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgaW5pdGlhbGl6ZSgpIHtcclxuICAgIHRoaXMuc2VsZWN0aW9uTW9kZSA9IGdldEVsZW1lbnRQcm9wKHRoaXMuZWwsIFwic2VsZWN0aW9uLW1vZGVcIiwgXCJzaW5nbGVcIik7XHJcbiAgICB0aGlzLnBhcmVudERyb3Bkb3duR3JvdXBFbCA9IHRoaXMuZWwuY2xvc2VzdChcImNhbGNpdGUtZHJvcGRvd24tZ3JvdXBcIik7XHJcbiAgICBpZiAodGhpcy5zZWxlY3Rpb25Nb2RlID09PSBcIm5vbmVcIikge1xyXG4gICAgICB0aGlzLnNlbGVjdGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGRldGVybWluZUFjdGl2ZUl0ZW0oKSB7XHJcbiAgICBzd2l0Y2ggKHRoaXMuc2VsZWN0aW9uTW9kZSkge1xyXG4gICAgICBjYXNlIFwibXVsdGlwbGVcIjpcclxuICAgICAgICBpZiAodGhpcy5lbCA9PT0gdGhpcy5yZXF1ZXN0ZWREcm9wZG93bkl0ZW0pIHtcclxuICAgICAgICAgIHRoaXMuc2VsZWN0ZWQgPSAhdGhpcy5zZWxlY3RlZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJzaW5nbGVcIjpcclxuICAgICAgICBpZiAodGhpcy5lbCA9PT0gdGhpcy5yZXF1ZXN0ZWREcm9wZG93bkl0ZW0pIHtcclxuICAgICAgICAgIHRoaXMuc2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0aGlzLnJlcXVlc3RlZERyb3Bkb3duR3JvdXAgPT09IHRoaXMucGFyZW50RHJvcGRvd25Hcm91cEVsKSB7XHJcbiAgICAgICAgICB0aGlzLnNlbGVjdGVkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwibm9uZVwiOlxyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICB9XHJcbiAgZW1pdFJlcXVlc3RlZEl0ZW0oKSB7XHJcbiAgICB0aGlzLmNhbGNpdGVEcm9wZG93bkl0ZW1TZWxlY3QuZW1pdCgpO1xyXG4gICAgdGhpcy5jYWxjaXRlSW50ZXJuYWxEcm9wZG93bkl0ZW1TZWxlY3QuZW1pdCh7XHJcbiAgICAgIHJlcXVlc3RlZERyb3Bkb3duSXRlbTogdGhpcy5lbCxcclxuICAgICAgcmVxdWVzdGVkRHJvcGRvd25Hcm91cDogdGhpcy5wYXJlbnREcm9wZG93bkdyb3VwRWxcclxuICAgIH0pO1xyXG4gIH1cclxuICBnZXQgZWwoKSB7IHJldHVybiBnZXRFbGVtZW50KHRoaXMpOyB9XHJcbn07XHJcbkRyb3Bkb3duSXRlbS5zdHlsZSA9IGRyb3Bkb3duSXRlbUNzcztcblxuZXhwb3J0IHsgQmFBY2NvcmRpb24gYXMgYmFfYWNjb3JkaW9uLCBEcm9wZG93biBhcyBjYWxjaXRlX2Ryb3Bkb3duLCBEcm9wZG93bkdyb3VwIGFzIGNhbGNpdGVfZHJvcGRvd25fZ3JvdXAsIERyb3Bkb3duSXRlbSBhcyBjYWxjaXRlX2Ryb3Bkb3duX2l0ZW0gfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmEtYWNjb3JkaW9uXzQuZW50cnkuanMubWFwIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtY29tcG9uZW50cy9ibG9iL21hc3Rlci9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxuICogdjEuMC41XG4gKi9cbmZ1bmN0aW9uIG5vb3BDbGljaygpIHtcbiAgLyoqIG5vb3AgKi9cbn1cbi8qKlxuICogVGhpcyBoZWxwZXIgdXBkYXRlcyB0aGUgaG9zdCBlbGVtZW50IHRvIHByZXZlbnQga2V5Ym9hcmQgaW50ZXJhY3Rpb24gb24gaXRzIHN1YnRyZWUgYW5kIHNldHMgdGhlIGFwcHJvcHJpYXRlIGFyaWEgYXR0cmlidXRlIGZvciBhY2Nlc3NpYmlsaXR5LlxuICpcbiAqIFRoaXMgc2hvdWxkIGJlIHVzZWQgaW4gdGhlIGBjb21wb25lbnREaWRSZW5kZXJgIGxpZmVjeWNsZSBob29rLlxuICpcbiAqICoqTm90ZXMqKlxuICpcbiAqIHRoaXMgdXRpbCBpcyBub3QgbmVlZGVkIGZvciBzaW1wbGUgY29tcG9uZW50cyB3aG9zZSByb290IGVsZW1lbnQgb3IgZWxlbWVudHMgYXJlIGFuIGludGVyYWN0aXZlIGNvbXBvbmVudCAoY3VzdG9tIGVsZW1lbnQgb3IgbmF0aXZlIGNvbnRyb2wpLiBGb3IgdGhvc2UgY2FzZXMsIHNldCB0aGUgYGRpc2FibGVkYCBwcm9wcyBvbiB0aGUgcm9vdCBjb21wb25lbnRzIGluc3RlYWQuXG4gKiB0ZWNobmljYWxseSwgdXNlcnMgY2FuIG92ZXJyaWRlIGB0YWJpbmRleGAgYW5kIHJlc3RvcmUga2V5Ym9hcmQgbmF2aWdhdGlvbiwgYnV0IHRoaXMgd2lsbCBiZSBjb25zaWRlcmVkIHVzZXIgZXJyb3JcbiAqXG4gKiBAcGFyYW0gY29tcG9uZW50XG4gKiBAcGFyYW0gaG9zdElzVGFiYmFibGVcbiAqL1xuZnVuY3Rpb24gdXBkYXRlSG9zdEludGVyYWN0aW9uKGNvbXBvbmVudCwgaG9zdElzVGFiYmFibGUgPSBmYWxzZSkge1xuICBpZiAoY29tcG9uZW50LmRpc2FibGVkKSB7XG4gICAgY29tcG9uZW50LmVsLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsIFwiLTFcIik7XG4gICAgY29tcG9uZW50LmVsLnNldEF0dHJpYnV0ZShcImFyaWEtZGlzYWJsZWRcIiwgXCJ0cnVlXCIpO1xuICAgIGlmIChjb21wb25lbnQuZWwuY29udGFpbnMoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkpIHtcbiAgICAgIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuYmx1cigpO1xuICAgIH1cbiAgICBjb21wb25lbnQuZWwuY2xpY2sgPSBub29wQ2xpY2s7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbXBvbmVudC5lbC5jbGljayA9IEhUTUxFbGVtZW50LnByb3RvdHlwZS5jbGljaztcbiAgaWYgKHR5cGVvZiBob3N0SXNUYWJiYWJsZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgY29tcG9uZW50LmVsLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsIGhvc3RJc1RhYmJhYmxlLmNhbGwoY29tcG9uZW50KSA/IFwiMFwiIDogXCItMVwiKTtcbiAgfVxuICBlbHNlIGlmIChob3N0SXNUYWJiYWJsZSA9PT0gdHJ1ZSkge1xuICAgIGNvbXBvbmVudC5lbC5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLCBcIjBcIik7XG4gIH1cbiAgZWxzZSBpZiAoaG9zdElzVGFiYmFibGUgPT09IGZhbHNlKSB7XG4gICAgY29tcG9uZW50LmVsLnJlbW92ZUF0dHJpYnV0ZShcInRhYmluZGV4XCIpO1xuICB9XG4gIGVsc2UgO1xuICBjb21wb25lbnQuZWwucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1kaXNhYmxlZFwiKTtcbn1cblxuZXhwb3J0IHsgdXBkYXRlSG9zdEludGVyYWN0aW9uIGFzIHUgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW50ZXJhY3RpdmUtMjk5OTU1MjIuanMubWFwIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtY29tcG9uZW50cy9ibG9iL21hc3Rlci9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxuICogdjEuMC41XG4gKi9cbmZ1bmN0aW9uIGlzQWN0aXZhdGlvbktleShrZXkpIHtcbiAgcmV0dXJuIGtleSA9PT0gXCJFbnRlclwiIHx8IGtleSA9PT0gXCIgXCI7XG59XG5jb25zdCBudW1iZXJLZXlzID0gW1wiMFwiLCBcIjFcIiwgXCIyXCIsIFwiM1wiLCBcIjRcIiwgXCI1XCIsIFwiNlwiLCBcIjdcIiwgXCI4XCIsIFwiOVwiXTtcblxuZXhwb3J0IHsgaXNBY3RpdmF0aW9uS2V5IGFzIGksIG51bWJlcktleXMgYXMgbiB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1rZXktYjc1NDkxYzQuanMubWFwIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtY29tcG9uZW50cy9ibG9iL21hc3Rlci9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxuICogdjEuMC41XG4gKi9cbmNvbnN0IHJlc29sdmVNYXAgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgcHJvbWlzZU1hcCA9IG5ldyBXZWFrTWFwKCk7XG4vKipcbiAqIFRoaXMgaGVscGVyIHV0aWwgc2V0cyB1cCB0aGUgY29tcG9uZW50IGZvciB0aGUgYWJpbGl0eSB0byBrbm93IHdoZW4gdGhlIGNvbXBvbmVudCBoYXMgYmVlbiBsb2FkZWQuXG4gKlxuICogVGhpcyBzaG91bGQgYmUgdXNlZCBpbiB0aGUgYGNvbXBvbmVudFdpbGxMb2FkYCBsaWZlY3ljbGUgaG9vay5cbiAqXG4gKiBgYGBcbiAqIGNvbXBvbmVudFdpbGxMb2FkKCk6IHZvaWQge1xuICogICBzZXRVcExvYWRhYmxlQ29tcG9uZW50KHRoaXMpO1xuICogfVxuICogYGBgXG4gKlxuICogQHBhcmFtIGNvbXBvbmVudFxuICovXG5mdW5jdGlvbiBzZXRVcExvYWRhYmxlQ29tcG9uZW50KGNvbXBvbmVudCkge1xuICBwcm9taXNlTWFwLnNldChjb21wb25lbnQsIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiByZXNvbHZlTWFwLnNldChjb21wb25lbnQsIHJlc29sdmUpKSk7XG59XG4vKipcbiAqIFRoaXMgaGVscGVyIHV0aWwgbGV0cyB0aGUgbG9hZGFibGUgY29tcG9uZW50IGtub3cgdGhhdCBpdCBpcyBub3cgbG9hZGVkLlxuICpcbiAqIFRoaXMgc2hvdWxkIGJlIHVzZWQgaW4gdGhlIGBjb21wb25lbnREaWRMb2FkYCBsaWZlY3ljbGUgaG9vay5cbiAqXG4gKiBgYGBcbiAqIGNvbXBvbmVudERpZExvYWQoKTogdm9pZCB7XG4gKiAgIHNldENvbXBvbmVudExvYWRlZCh0aGlzKTtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBjb21wb25lbnRcbiAqL1xuZnVuY3Rpb24gc2V0Q29tcG9uZW50TG9hZGVkKGNvbXBvbmVudCkge1xuICByZXNvbHZlTWFwLmdldChjb21wb25lbnQpKCk7XG59XG4vKipcbiAqIFRoaXMgaGVscGVyIHV0aWwgY2FuIGJlIHVzZWQgdG8gZW5zdXJlIGEgY29tcG9uZW50IGhhcyBiZWVuIGxvYWRlZCAoVGhlIFwiY29tcG9uZW50RGlkTG9hZFwiIHN0ZW5jaWwgbGlmZWN5Y2xlIG1ldGhvZCBoYXMgYmVlbiBjYWxsZWQpLlxuICpcbiAqIFJlcXVpcmVzIFwic2V0VXBMb2FkYWJsZUNvbXBvbmVudFwiIGFuZCBcInNldENvbXBvbmVudExvYWRlZFwiIHRvIGJlIGNhbGxlZCBmaXJzdC5cbiAqXG4gKiBBIGNvbXBvbmVudCBkZXZlbG9wZXIgY2FuIGF3YWl0IHRoaXMgbWV0aG9kIGJlZm9yZSBwcm9jZWVkaW5nIHdpdGggYW55IGxvZ2ljIHRoYXQgcmVxdWlyZXMgYSBjb21wb25lbnQgdG8gYmUgbG9hZGVkIGZpcnN0LlxuICpcbiAqIGBgYFxuICogYXN5bmMgc2V0Rm9jdXMoKTogUHJvbWlzZTx2b2lkPiB7XG4gKiAgIGF3YWl0IGNvbXBvbmVudExvYWRlZCh0aGlzKTtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBjb21wb25lbnRcbiAqIEByZXR1cm5zIFByb21pc2U8dm9pZD5cbiAqL1xuZnVuY3Rpb24gY29tcG9uZW50TG9hZGVkKGNvbXBvbmVudCkge1xuICByZXR1cm4gcHJvbWlzZU1hcC5nZXQoY29tcG9uZW50KTtcbn1cblxuZXhwb3J0IHsgc2V0VXBMb2FkYWJsZUNvbXBvbmVudCBhcyBhLCBjb21wb25lbnRMb2FkZWQgYXMgYywgc2V0Q29tcG9uZW50TG9hZGVkIGFzIHMgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bG9hZGFibGUtY2MxNGQ3MjguanMubWFwIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtY29tcG9uZW50cy9ibG9iL21hc3Rlci9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxuICogdjEuMC41XG4gKi9cbi8qKlxuICogVGhpcyB1dGlsaXR5IGVuc3VyZXMgb2JzZXJ2ZXJzIGFyZSBjcmVhdGVkIG9ubHkgZm9yIGJyb3dzZXIgY29udGV4dHMuXG4gKlxuICogQHBhcmFtIHR5cGUgLSB0aGUgdHlwZSBvZiBvYnNlcnZlciB0byBjcmVhdGVcbiAqIEBwYXJhbSBjYWxsYmFjayAtIHRoZSBvYnNlcnZlciBjYWxsYmFja1xuICogQHBhcmFtIG9wdGlvbnMgLSB0aGUgb2JzZXJ2ZXIgb3B0aW9uc1xuICovXG5mdW5jdGlvbiBjcmVhdGVPYnNlcnZlcih0eXBlLCBjYWxsYmFjaywgb3B0aW9ucykge1xuICBjb25zdCBPYnNlcnZlciA9IGdldE9ic2VydmVyKHR5cGUpO1xuICByZXR1cm4gbmV3IE9ic2VydmVyKGNhbGxiYWNrLCBvcHRpb25zKTtcbn1cbmZ1bmN0aW9uIGdldE9ic2VydmVyKHR5cGUpIHtcbiAgLy8gYmFzZWQgb24gaHR0cHM6Ly9naXRodWIuY29tL3doYXR3Zy9kb20vaXNzdWVzLzEyNiNpc3N1ZWNvbW1lbnQtMTA0OTgxNDk0OFxuICBjbGFzcyBFeHRlbmRlZE11dGF0aW9uT2JzZXJ2ZXIgZXh0ZW5kcyB3aW5kb3cuTXV0YXRpb25PYnNlcnZlciB7XG4gICAgY29uc3RydWN0b3IoY2FsbGJhY2spIHtcbiAgICAgIHN1cGVyKGNhbGxiYWNrKTtcbiAgICAgIHRoaXMub2JzZXJ2ZWRFbnRyeSA9IFtdO1xuICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIH1cbiAgICBvYnNlcnZlKHRhcmdldCwgb3B0aW9ucykge1xuICAgICAgdGhpcy5vYnNlcnZlZEVudHJ5LnB1c2goeyB0YXJnZXQsIG9wdGlvbnMgfSk7XG4gICAgICByZXR1cm4gc3VwZXIub2JzZXJ2ZSh0YXJnZXQsIG9wdGlvbnMpO1xuICAgIH1cbiAgICB1bm9ic2VydmUodGFyZ2V0KSB7XG4gICAgICBjb25zdCBuZXdPYnNlcnZlZEVudHJpZXMgPSB0aGlzLm9ic2VydmVkRW50cnkuZmlsdGVyKChvYnNlcnZlZCkgPT4gb2JzZXJ2ZWQudGFyZ2V0ICE9PSB0YXJnZXQpO1xuICAgICAgdGhpcy5vYnNlcnZlZEVudHJ5ID0gW107XG4gICAgICB0aGlzLmNhbGxiYWNrKHN1cGVyLnRha2VSZWNvcmRzKCksIHRoaXMpO1xuICAgICAgdGhpcy5kaXNjb25uZWN0KCk7XG4gICAgICBuZXdPYnNlcnZlZEVudHJpZXMuZm9yRWFjaCgob2JzZXJ2ZWQpID0+IHRoaXMub2JzZXJ2ZShvYnNlcnZlZC50YXJnZXQsIG9ic2VydmVkLm9wdGlvbnMpKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIChmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh0eXBlID09PSBcImludGVyc2VjdGlvblwiXG4gICAgICA/IHdpbmRvdy5JbnRlcnNlY3Rpb25PYnNlcnZlclxuICAgICAgOiB0eXBlID09PSBcIm11dGF0aW9uXCJcbiAgICAgICAgPyBFeHRlbmRlZE11dGF0aW9uT2JzZXJ2ZXJcbiAgICAgICAgOiB3aW5kb3cuUmVzaXplT2JzZXJ2ZXIpO1xuICB9KSgpO1xufVxuXG5leHBvcnQgeyBjcmVhdGVPYnNlcnZlciBhcyBjIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9ic2VydmVycy01Njc0MGU5OS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=