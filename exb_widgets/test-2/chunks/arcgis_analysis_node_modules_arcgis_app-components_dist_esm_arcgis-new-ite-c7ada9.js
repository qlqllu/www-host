"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-new-ite-c7ada9"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/append-58a7e7ab.js":
/*!************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/append-58a7e7ab.js ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ AppendOverwriteCloudPublishTypes),
/* harmony export */   N: () => (/* binding */ NONE_VALUE),
/* harmony export */   a: () => (/* binding */ appendFileTypes),
/* harmony export */   b: () => (/* binding */ AppendOverwritePublishTypes),
/* harmony export */   c: () => (/* binding */ appendExtensionsForEnterprise),
/* harmony export */   d: () => (/* binding */ appendExtensions),
/* harmony export */   u: () => (/* binding */ uidFields)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */
const uidFields = ["esriFieldTypeOID", "esriFieldTypeGlobalID"];
const NONE_VALUE = "<None>";
const AppendOverwritePublishTypes = {
  "file geodatabase": "filegeodatabase",
  shapefile: "shapefile",
  geojson: "geojson",
  csv: "CSV",
  "microsoft excel": "excel",
  geopackage: "geoPackage"
};
const appendFileTypes = {
  Shapefile: "shapefile",
  "File Geodatabase": "fileGeodatabase",
  CSV: "csv",
  "Microsoft Excel": "excel",
  GeoJson: "geojson",
  GeoPackage: "geoPackage"
};
const AppendOverwriteCloudPublishTypes = {
  csv: "CSV",
  excel: "Microsoft Excel",
  shapefile: "Shapefile",
  fgdb: "File Geodatabase",
  geojson: "GeoJson",
  googlesheets: "Microsoft Excel"
};
const appendExtensions = ["zip", "csv", "xls", "xlsx", "geojson", "gpkg", "json"];
const appendExtensionsForEnterprise = ["zip", "csv", "xls", "xlsx"];




/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-data-upload.entry.js":
/*!************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-data-upload.entry.js ***!
  \************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   arcgis_new_item_pages_data_upload: () => (/* binding */ ArcgisNewItemPagesDataUpload)
/* harmony export */ });
/* harmony import */ var _index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-92ebb396.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-92ebb396.js");
/* harmony import */ var _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config-eb5f7dc2.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/config-eb5f7dc2.js");
/* harmony import */ var _file_f36193e9_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./file-f36193e9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/file-f36193e9.js");
/* harmony import */ var _item_properties_e6412a9a_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./item-properties-e6412a9a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-properties-e6412a9a.js");
/* harmony import */ var _overwrite_3049b7af_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./overwrite-3049b7af.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/overwrite-3049b7af.js");
/* harmony import */ var _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./add-item-97d577a9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/add-item-97d577a9.js");
/* harmony import */ var _ui_ecf86bba_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ui-ecf86bba.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ui-ecf86bba.js");
/* harmony import */ var _item_types_054054c6_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./item-types-054054c6.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-types-054054c6.js");
/* harmony import */ var _index_81d548b7_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./index-81d548b7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-81d548b7.js");
/* harmony import */ var _item_types_b4fe86ad_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./item-types-b4fe86ad.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-types-b4fe86ad.js");
/* harmony import */ var _guid_4f4176ba_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./guid-4f4176ba.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/guid-4f4176ba.js");
/* harmony import */ var _feature_layer_38cdae87_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./feature-layer-38cdae87.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-38cdae87.js");
/* harmony import */ var _functional_c82f5ab9_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./functional-c82f5ab9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-c82f5ab9.js");
/* harmony import */ var _privileges_ccd5f37d_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./privileges-ccd5f37d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/privileges-ccd5f37d.js");
/* harmony import */ var _feature_layer_d33ea114_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./feature-layer-d33ea114.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-d33ea114.js");
/* harmony import */ var _thumbnail_0b7adfcd_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./thumbnail-0b7adfcd.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/thumbnail-0b7adfcd.js");
/* harmony import */ var _portal_79caaeff_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./portal-79caaeff.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/portal-79caaeff.js");
/* harmony import */ var _loadModules_aaf30bd6_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./loadModules-aaf30bd6.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/loadModules-aaf30bd6.js");
/* harmony import */ var _query_4f7b7e4d_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./query-4f7b7e4d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/query-4f7b7e4d.js");
/* harmony import */ var _user_e3dedc4a_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./user-e3dedc4a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/user-e3dedc4a.js");
/* harmony import */ var _api_f7934cd7_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./api-f7934cd7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/api-f7934cd7.js");
/* harmony import */ var _server_item_f12153e6_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./server-item-f12153e6.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/server-item-f12153e6.js");
/* harmony import */ var _functional_9f648bee_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./functional-9f648bee.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-9f648bee.js");
/* harmony import */ var _item_d9d70416_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./item-d9d70416.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-d9d70416.js");
/* harmony import */ var _dom_13f5b00c_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./dom-13f5b00c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/dom-13f5b00c.js");
/* harmony import */ var _feature_layer_69305a85_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./feature-layer-69305a85.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-69305a85.js");
/* harmony import */ var _ags_68d4ae20_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./ags-68d4ae20.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ags-68d4ae20.js");
/* harmony import */ var _url_f3b82cc7_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./url-f3b82cc7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/url-f3b82cc7.js");
/* harmony import */ var _storage_d7f5822e_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./storage-d7f5822e.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/storage-d7f5822e.js");
/* harmony import */ var _store_3210b604_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./store-3210b604.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/store-3210b604.js");
/* harmony import */ var _publish_item_82ffa7f8_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./publish-item-82ffa7f8.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/publish-item-82ffa7f8.js");
/* harmony import */ var _tile_layer_90a6b901_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./tile-layer-90a6b901.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/tile-layer-90a6b901.js");
/* harmony import */ var _geocode_7eb7c0df_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./geocode-7eb7c0df.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/geocode-7eb7c0df.js");
/* harmony import */ var _privileges_35590eb4_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./privileges-35590eb4.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/privileges-35590eb4.js");
/* harmony import */ var _append_58a7e7ab_js__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./append-58a7e7ab.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/append-58a7e7ab.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */




































const arcgisNewItemPagesDataUploadCss = ".arcgis-file-browser{display:block;height:95%}";

const ArcgisNewItemPagesDataUpload = class {
  constructor(hostRef) {
    (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.newItemUpdatePage = (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "newItemUpdatePage", 7);
    this.workflowComplete = (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "workflowComplete", 7);
    this.allowedExtensions = null; //TODO: Add specified file extensions for update workflow when known
    this.loading = false;
    this.loaderMessage = undefined;
    this.loaderType = "indeterminate";
    this.error = undefined;
  }
  componentWillLoad() {
    const { existingItem, fileName } = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_5__.a;
    this.i18n = _ui_ecf86bba_js__WEBPACK_IMPORTED_MODULE_6__.u.i18n.appendUpload;
    this.item = existingItem;
    this.header =
      existingItem.type === "Vector Tile Service"
        ? this.i18n.editStyle
        : this.i18n.sameFileNameDescription.replace("${fileName}", fileName);
    if (existingItem.type === "Vector Tile Service") {
      this.allowedExtensions = ["json"]; //Todo: should fix the helpmap number for /updateresources.
    }
  }
  // Triggered when a file is selected (via drop or button)
  async fileSelectHandler(event) {
    var _a;
    this.sourceName = ((_a = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_5__.a.existingItem.sourceData) === null || _a === void 0 ? void 0 : _a.name) || _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_5__.a.existingItem.name;
    const file = event.detail.file;
    const itemType = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_5__.a.existingItem.type;
    const { title, fileName, extension } = (0,_file_f36193e9_js__WEBPACK_IMPORTED_MODULE_2__.s)(file);
    if (itemType === "Vector Tile Service") {
      if (extension !== "json") {
        this.handleError({ code: "invalidExtension" });
        return;
      }
    }
    else if (fileName !== this.sourceName) {
      this.handleError({ code: "useSameFileName" });
      return;
    }
    _item_properties_e6412a9a_js__WEBPACK_IMPORTED_MODULE_3__.i.title = title;
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_5__.a.file = file;
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_5__.a.fileName = fileName;
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_5__.a.newItemMode = "file";
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_5__.a.extension = extension;
    const possibleItemTypes = (0,_item_types_054054c6_js__WEBPACK_IMPORTED_MODULE_7__.f)(extension);
    if (possibleItemTypes.length === 1) {
      const type = possibleItemTypes[0].type;
      _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_5__.a.type = type;
    }
    if (itemType === "Layer Package") {
      this.newItemUpdatePage.emit("appendSelectUpdate");
    }
    else if (itemType === "Vector Tile Service") {
      this.handleUpdateStyle();
    }
    else {
      this.handleUpdate();
    }
  }
  async handleUpdate() {
    this.loading = true;
    this.loaderMessage = _ui_ecf86bba_js__WEBPACK_IMPORTED_MODULE_6__.u.i18n.append.appendLoadingMessages.updating;
    const response = await (0,_overwrite_3049b7af_js__WEBPACK_IMPORTED_MODULE_4__.b)(_add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_5__.a.existingItem, this.item.itemOwner.userContentUrl, // ! Use fetchUser if itemOwner is not available
    {
      file: _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_5__.a.file,
      overwrite: true,
      keepDescription: true
    });
    if (!response.success) {
      this.handleError({ code: "unhandledError" });
    }
    else {
      this.workflowComplete.emit({
        success: response.success
      });
    }
  }
  async handleUpdateStyle() {
    this.loading = true;
    this.loaderMessage = _ui_ecf86bba_js__WEBPACK_IMPORTED_MODULE_6__.u.i18n.append.appendLoadingMessages.updating;
    const { result, error } = await (0,_overwrite_3049b7af_js__WEBPACK_IMPORTED_MODULE_4__.c)(_add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_5__.a.existingItem, this.item.itemOwner.userContentUrl, // ! Use fetchUser if itemOwner is not available
    {
      file: _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_5__.a.file
    });
    if (result.success) {
      this.workflowComplete.emit({
        success: result.success
      });
    }
    if (error) {
      this.handleError({ code: error.code });
    }
  }
  async handleError(error) {
    let errorMessage = this.i18n.errors.errorWhileUpload;
    this.loading = false;
    switch (error.code) {
      case "invalidExtension":
        errorMessage = this.i18n.errors.invalidStyleFileExtension;
      case "useSameFileName":
        errorMessage = this.i18n.errors.sameFileName.replace("${x}", this.sourceName);
        break;
      case "unhandledError":
        errorMessage = this.i18n.errors.errorUpdate;
        break;
    }
    this.error = { title: _ui_ecf86bba_js__WEBPACK_IMPORTED_MODULE_6__.u.i18n.error, description: errorMessage };
    return;
  }
  render() {
    const { header, loaderType, loading, loaderMessage, error, allowedExtensions } = this;
    const { portal, config, user } = _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_1__.c;
    return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.H, null, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-loader", { type: loaderType, active: loading, text: loaderMessage }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-description", { header: header }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-file-browser", { class: "arcgis-file-browser", cloud: false, insideModal: true, fullHeight: true, portal: portal, config: config, user: user, allowedExtensions: allowedExtensions }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-alert", { heading: error === null || error === void 0 ? void 0 : error.title, description: error === null || error === void 0 ? void 0 : error.description, link: { href: error === null || error === void 0 ? void 0 : error.link, title: error === null || error === void 0 ? void 0 : error.linkText }, active: !!error, onAlertDismiss: () => (this.error = null) })));
  }
};
ArcgisNewItemPagesDataUpload.style = arcgisNewItemPagesDataUploadCss;




/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-types-054054c6.js":
/*!****************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-types-054054c6.js ***!
  \****************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ isLargeCSV),
/* harmony export */   f: () => (/* binding */ findPossibleItemTypesByExtension),
/* harmony export */   i: () => (/* binding */ isLargeGeoJSON),
/* harmony export */   m: () => (/* binding */ mapItemTypesToFileExtensions)
/* harmony export */ });
/* harmony import */ var _functional_c82f5ab9_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./functional-c82f5ab9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-c82f5ab9.js");
/* harmony import */ var _item_types_b4fe86ad_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./item-types-b4fe86ad.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-types-b4fe86ad.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */



function findPossibleItemTypesByExtension(extension, validationTypes) {
  // Search item types extensions for the one imported
  let itemTypes;
  if (validationTypes) {
    itemTypes = validationTypes.map((value) => {
      return value.type;
    });
  }
  else {
    itemTypes = Object.keys(_item_types_b4fe86ad_js__WEBPACK_IMPORTED_MODULE_1__.a);
  }
  let possibleItemTypes = [];
  itemTypes.forEach((type) => {
    var _a;
    if (((_a = _item_types_b4fe86ad_js__WEBPACK_IMPORTED_MODULE_1__.a[type].fileExt) === null || _a === void 0 ? void 0 : _a.indexOf(extension)) >= 0) {
      possibleItemTypes.push(_item_types_b4fe86ad_js__WEBPACK_IMPORTED_MODULE_1__.a[type]);
    }
  });
  return possibleItemTypes;
}
function mapItemTypesToFileExtensions(types) {
  if (!types) {
    return null;
  }
  return (0,_functional_c82f5ab9_js__WEBPACK_IMPORTED_MODULE_0__.b)(types.flatMap((type) => { var _a; return (_a = _item_types_b4fe86ad_js__WEBPACK_IMPORTED_MODULE_1__.a[type]) === null || _a === void 0 ? void 0 : _a.fileExt; }).filter((valid) => !!valid));
}
const isLargeGeoJSON = (sizeInBytes) => {
  const sizeInMB = sizeInBytes / 1024 / 1024;
  // https://devtopia.esri.com/WebGIS/arcgis-app-components/issues/2553#issuecomment-3645404
  return sizeInMB > 50; // 50MB
};
const isLargeCSV = (sizeInBytes) => {
  const sizeInMB = sizeInBytes / 1024 / 1024;
  // https://devtopia.esri.com/WebGIS/arcgis-app-components/issues/2875#issuecomment-3748913
  return sizeInMB > 20; // 20MB
};




/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXBwLWNvbXBvbmVudHNfZGlzdF9lc21fYXJjZ2lzLW5ldy1pdGUtYzdhZGE5LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVxTTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNqQ3JNO0FBQ0E7QUFDQTtBQUNBO0FBQzRGO0FBQ3BDO0FBQ0k7QUFDYTtBQUNtQjtBQUNqQztBQUNOO0FBQzRCO0FBQ3BEO0FBQ0s7QUFDTjtBQUNTO0FBQ0g7QUFDQTtBQUNHO0FBQ0o7QUFDSDtBQUNLO0FBQ047QUFDRDtBQUNEO0FBQ1E7QUFDRDtBQUNOO0FBQ0Q7QUFDVTtBQUNWO0FBQ0E7QUFDSTtBQUNGO0FBQ087QUFDRjtBQUNIO0FBQ0c7QUFDSjs7QUFFOUIsOERBQThELGNBQWMsV0FBVzs7QUFFdkY7QUFDQTtBQUNBLElBQUkscURBQWdCO0FBQ3BCLDZCQUE2QixxREFBVztBQUN4Qyw0QkFBNEIscURBQVc7QUFDdkMsbUNBQW1DO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVkseUJBQXlCLEVBQUUsb0RBQVk7QUFDbkQsZ0JBQWdCLDhDQUFZO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQXVELFNBQVM7QUFDaEU7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixvREFBWSwyRUFBMkUsb0RBQVk7QUFDaEk7QUFDQSxxQkFBcUIsb0RBQVk7QUFDakMsWUFBWSw2QkFBNkIsRUFBRSxvREFBaUI7QUFDNUQ7QUFDQTtBQUNBLDJCQUEyQiwwQkFBMEI7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIseUJBQXlCO0FBQ2xEO0FBQ0E7QUFDQSxJQUFJLDJEQUFtQjtBQUN2QixJQUFJLG9EQUFZO0FBQ2hCLElBQUksb0RBQVk7QUFDaEIsSUFBSSxvREFBWTtBQUNoQixJQUFJLG9EQUFZO0FBQ2hCLDhCQUE4QiwwREFBZ0M7QUFDOUQ7QUFDQTtBQUNBLE1BQU0sb0RBQVk7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsOENBQVk7QUFDckMsMkJBQTJCLHlEQUFtQixDQUFDLG9EQUFZO0FBQzNEO0FBQ0EsWUFBWSxvREFBWTtBQUN4QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EseUJBQXlCLHdCQUF3QjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qiw4Q0FBWTtBQUNyQyxZQUFZLGdCQUFnQixRQUFRLHlEQUFrQixDQUFDLG9EQUFZO0FBQ25FO0FBQ0EsWUFBWSxvREFBWTtBQUN4QixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSx5QkFBeUIsa0JBQWtCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdFQUFnRSxFQUFFO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsT0FBTyw4Q0FBWTtBQUN0QztBQUNBO0FBQ0E7QUFDQSxZQUFZLHVFQUF1RTtBQUNuRixZQUFZLHVCQUF1QixFQUFFLGtEQUFXO0FBQ2hELFlBQVkscURBQUMsQ0FBQyxpREFBSSxRQUFRLHFEQUFDLDZCQUE2Qix3REFBd0QsR0FBRyxxREFBQyxrQ0FBa0MsZ0JBQWdCLEdBQUcscURBQUMsMEJBQTBCLG1LQUFtSyxHQUFHLHFEQUFDLDRCQUE0QiwwSkFBMEoscUlBQXFJLDhEQUE4RDtBQUNwdUI7QUFDQTtBQUNBOztBQUU2RTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNoSzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ3VEO0FBQ1k7O0FBRW5FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsNEJBQTRCLHNEQUFrQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsc0RBQWtCO0FBQ2pDLDZCQUE2QixzREFBa0I7QUFDL0M7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUywwREFBTSwyQkFBMkIsUUFBUSxhQUFhLHNEQUFrQiwwREFBMEQ7QUFDM0k7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7O0FBRTBIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYW5hbHlzaXMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYXBwLWNvbXBvbmVudHMvZGlzdC9lc20vYXBwZW5kLTU4YTdlN2FiLmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FwcC1jb21wb25lbnRzL2Rpc3QvZXNtL2FyY2dpcy1uZXctaXRlbS1wYWdlcy1kYXRhLXVwbG9hZC5lbnRyeS5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcHAtY29tcG9uZW50cy9kaXN0L2VzbS9pdGVtLXR5cGVzLTA1NDA1NGM2LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIHYzLjAuOTlcbiAqL1xuY29uc3QgdWlkRmllbGRzID0gW1wiZXNyaUZpZWxkVHlwZU9JRFwiLCBcImVzcmlGaWVsZFR5cGVHbG9iYWxJRFwiXTtcbmNvbnN0IE5PTkVfVkFMVUUgPSBcIjxOb25lPlwiO1xuY29uc3QgQXBwZW5kT3ZlcndyaXRlUHVibGlzaFR5cGVzID0ge1xuICBcImZpbGUgZ2VvZGF0YWJhc2VcIjogXCJmaWxlZ2VvZGF0YWJhc2VcIixcbiAgc2hhcGVmaWxlOiBcInNoYXBlZmlsZVwiLFxuICBnZW9qc29uOiBcImdlb2pzb25cIixcbiAgY3N2OiBcIkNTVlwiLFxuICBcIm1pY3Jvc29mdCBleGNlbFwiOiBcImV4Y2VsXCIsXG4gIGdlb3BhY2thZ2U6IFwiZ2VvUGFja2FnZVwiXG59O1xuY29uc3QgYXBwZW5kRmlsZVR5cGVzID0ge1xuICBTaGFwZWZpbGU6IFwic2hhcGVmaWxlXCIsXG4gIFwiRmlsZSBHZW9kYXRhYmFzZVwiOiBcImZpbGVHZW9kYXRhYmFzZVwiLFxuICBDU1Y6IFwiY3N2XCIsXG4gIFwiTWljcm9zb2Z0IEV4Y2VsXCI6IFwiZXhjZWxcIixcbiAgR2VvSnNvbjogXCJnZW9qc29uXCIsXG4gIEdlb1BhY2thZ2U6IFwiZ2VvUGFja2FnZVwiXG59O1xuY29uc3QgQXBwZW5kT3ZlcndyaXRlQ2xvdWRQdWJsaXNoVHlwZXMgPSB7XG4gIGNzdjogXCJDU1ZcIixcbiAgZXhjZWw6IFwiTWljcm9zb2Z0IEV4Y2VsXCIsXG4gIHNoYXBlZmlsZTogXCJTaGFwZWZpbGVcIixcbiAgZmdkYjogXCJGaWxlIEdlb2RhdGFiYXNlXCIsXG4gIGdlb2pzb246IFwiR2VvSnNvblwiLFxuICBnb29nbGVzaGVldHM6IFwiTWljcm9zb2Z0IEV4Y2VsXCJcbn07XG5jb25zdCBhcHBlbmRFeHRlbnNpb25zID0gW1wiemlwXCIsIFwiY3N2XCIsIFwieGxzXCIsIFwieGxzeFwiLCBcImdlb2pzb25cIiwgXCJncGtnXCIsIFwianNvblwiXTtcbmNvbnN0IGFwcGVuZEV4dGVuc2lvbnNGb3JFbnRlcnByaXNlID0gW1wiemlwXCIsIFwiY3N2XCIsIFwieGxzXCIsIFwieGxzeFwiXTtcblxuZXhwb3J0IHsgQXBwZW5kT3ZlcndyaXRlQ2xvdWRQdWJsaXNoVHlwZXMgYXMgQSwgTk9ORV9WQUxVRSBhcyBOLCBhcHBlbmRGaWxlVHlwZXMgYXMgYSwgQXBwZW5kT3ZlcndyaXRlUHVibGlzaFR5cGVzIGFzIGIsIGFwcGVuZEV4dGVuc2lvbnNGb3JFbnRlcnByaXNlIGFzIGMsIGFwcGVuZEV4dGVuc2lvbnMgYXMgZCwgdWlkRmllbGRzIGFzIHUgfTtcbiIsIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIHYzLjAuOTlcbiAqL1xuaW1wb3J0IHsgciBhcyByZWdpc3Rlckluc3RhbmNlLCBjIGFzIGNyZWF0ZUV2ZW50LCBoLCBIIGFzIEhvc3QgfSBmcm9tICcuL2luZGV4LTkyZWJiMzk2LmpzJztcbmltcG9ydCB7IGMgYXMgY29uZmlnU3RhdGUgfSBmcm9tICcuL2NvbmZpZy1lYjVmN2RjMi5qcyc7XG5pbXBvcnQgeyBzIGFzIHNhbml0aXplRmlsZUlucHV0IH0gZnJvbSAnLi9maWxlLWYzNjE5M2U5LmpzJztcbmltcG9ydCB7IGkgYXMgaXRlbVByb3BlcnRpZXNTdGF0ZSB9IGZyb20gJy4vaXRlbS1wcm9wZXJ0aWVzLWU2NDEyYTlhLmpzJztcbmltcG9ydCB7IGIgYXMgdXBkYXRlSXRlbU92ZXJ3cml0ZSwgYyBhcyB1cGRhdGVJdGVtUmVzb3VyY2UgfSBmcm9tICcuL292ZXJ3cml0ZS0zMDQ5YjdhZi5qcyc7XG5pbXBvcnQgeyBhIGFzIGFkZEl0ZW1TdGF0ZSB9IGZyb20gJy4vYWRkLWl0ZW0tOTdkNTc3YTkuanMnO1xuaW1wb3J0IHsgdSBhcyB1aVN0b3JlU3RhdGUgfSBmcm9tICcuL3VpLWVjZjg2YmJhLmpzJztcbmltcG9ydCB7IGYgYXMgZmluZFBvc3NpYmxlSXRlbVR5cGVzQnlFeHRlbnNpb24gfSBmcm9tICcuL2l0ZW0tdHlwZXMtMDU0MDU0YzYuanMnO1xuaW1wb3J0ICcuL2luZGV4LTgxZDU0OGI3LmpzJztcbmltcG9ydCAnLi9pdGVtLXR5cGVzLWI0ZmU4NmFkLmpzJztcbmltcG9ydCAnLi9ndWlkLTRmNDE3NmJhLmpzJztcbmltcG9ydCAnLi9mZWF0dXJlLWxheWVyLTM4Y2RhZTg3LmpzJztcbmltcG9ydCAnLi9mdW5jdGlvbmFsLWM4MmY1YWI5LmpzJztcbmltcG9ydCAnLi9wcml2aWxlZ2VzLWNjZDVmMzdkLmpzJztcbmltcG9ydCAnLi9mZWF0dXJlLWxheWVyLWQzM2VhMTE0LmpzJztcbmltcG9ydCAnLi90aHVtYm5haWwtMGI3YWRmY2QuanMnO1xuaW1wb3J0ICcuL3BvcnRhbC03OWNhYWVmZi5qcyc7XG5pbXBvcnQgJy4vbG9hZE1vZHVsZXMtYWFmMzBiZDYuanMnO1xuaW1wb3J0ICcuL3F1ZXJ5LTRmN2I3ZTRkLmpzJztcbmltcG9ydCAnLi91c2VyLWUzZGVkYzRhLmpzJztcbmltcG9ydCAnLi9hcGktZjc5MzRjZDcuanMnO1xuaW1wb3J0ICcuL3NlcnZlci1pdGVtLWYxMjE1M2U2LmpzJztcbmltcG9ydCAnLi9mdW5jdGlvbmFsLTlmNjQ4YmVlLmpzJztcbmltcG9ydCAnLi9pdGVtLWQ5ZDcwNDE2LmpzJztcbmltcG9ydCAnLi9kb20tMTNmNWIwMGMuanMnO1xuaW1wb3J0ICcuL2ZlYXR1cmUtbGF5ZXItNjkzMDVhODUuanMnO1xuaW1wb3J0ICcuL2Fncy02OGQ0YWUyMC5qcyc7XG5pbXBvcnQgJy4vdXJsLWYzYjgyY2M3LmpzJztcbmltcG9ydCAnLi9zdG9yYWdlLWQ3ZjU4MjJlLmpzJztcbmltcG9ydCAnLi9zdG9yZS0zMjEwYjYwNC5qcyc7XG5pbXBvcnQgJy4vcHVibGlzaC1pdGVtLTgyZmZhN2Y4LmpzJztcbmltcG9ydCAnLi90aWxlLWxheWVyLTkwYTZiOTAxLmpzJztcbmltcG9ydCAnLi9nZW9jb2RlLTdlYjdjMGRmLmpzJztcbmltcG9ydCAnLi9wcml2aWxlZ2VzLTM1NTkwZWI0LmpzJztcbmltcG9ydCAnLi9hcHBlbmQtNThhN2U3YWIuanMnO1xuXG5jb25zdCBhcmNnaXNOZXdJdGVtUGFnZXNEYXRhVXBsb2FkQ3NzID0gXCIuYXJjZ2lzLWZpbGUtYnJvd3NlcntkaXNwbGF5OmJsb2NrO2hlaWdodDo5NSV9XCI7XG5cbmNvbnN0IEFyY2dpc05ld0l0ZW1QYWdlc0RhdGFVcGxvYWQgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcbiAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgIHRoaXMubmV3SXRlbVVwZGF0ZVBhZ2UgPSBjcmVhdGVFdmVudCh0aGlzLCBcIm5ld0l0ZW1VcGRhdGVQYWdlXCIsIDcpO1xuICAgIHRoaXMud29ya2Zsb3dDb21wbGV0ZSA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwid29ya2Zsb3dDb21wbGV0ZVwiLCA3KTtcbiAgICB0aGlzLmFsbG93ZWRFeHRlbnNpb25zID0gbnVsbDsgLy9UT0RPOiBBZGQgc3BlY2lmaWVkIGZpbGUgZXh0ZW5zaW9ucyBmb3IgdXBkYXRlIHdvcmtmbG93IHdoZW4ga25vd25cbiAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTtcbiAgICB0aGlzLmxvYWRlck1lc3NhZ2UgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5sb2FkZXJUeXBlID0gXCJpbmRldGVybWluYXRlXCI7XG4gICAgdGhpcy5lcnJvciA9IHVuZGVmaW5lZDtcbiAgfVxuICBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICBjb25zdCB7IGV4aXN0aW5nSXRlbSwgZmlsZU5hbWUgfSA9IGFkZEl0ZW1TdGF0ZTtcbiAgICB0aGlzLmkxOG4gPSB1aVN0b3JlU3RhdGUuaTE4bi5hcHBlbmRVcGxvYWQ7XG4gICAgdGhpcy5pdGVtID0gZXhpc3RpbmdJdGVtO1xuICAgIHRoaXMuaGVhZGVyID1cbiAgICAgIGV4aXN0aW5nSXRlbS50eXBlID09PSBcIlZlY3RvciBUaWxlIFNlcnZpY2VcIlxuICAgICAgICA/IHRoaXMuaTE4bi5lZGl0U3R5bGVcbiAgICAgICAgOiB0aGlzLmkxOG4uc2FtZUZpbGVOYW1lRGVzY3JpcHRpb24ucmVwbGFjZShcIiR7ZmlsZU5hbWV9XCIsIGZpbGVOYW1lKTtcbiAgICBpZiAoZXhpc3RpbmdJdGVtLnR5cGUgPT09IFwiVmVjdG9yIFRpbGUgU2VydmljZVwiKSB7XG4gICAgICB0aGlzLmFsbG93ZWRFeHRlbnNpb25zID0gW1wianNvblwiXTsgLy9Ub2RvOiBzaG91bGQgZml4IHRoZSBoZWxwbWFwIG51bWJlciBmb3IgL3VwZGF0ZXJlc291cmNlcy5cbiAgICB9XG4gIH1cbiAgLy8gVHJpZ2dlcmVkIHdoZW4gYSBmaWxlIGlzIHNlbGVjdGVkICh2aWEgZHJvcCBvciBidXR0b24pXG4gIGFzeW5jIGZpbGVTZWxlY3RIYW5kbGVyKGV2ZW50KSB7XG4gICAgdmFyIF9hO1xuICAgIHRoaXMuc291cmNlTmFtZSA9ICgoX2EgPSBhZGRJdGVtU3RhdGUuZXhpc3RpbmdJdGVtLnNvdXJjZURhdGEpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5uYW1lKSB8fCBhZGRJdGVtU3RhdGUuZXhpc3RpbmdJdGVtLm5hbWU7XG4gICAgY29uc3QgZmlsZSA9IGV2ZW50LmRldGFpbC5maWxlO1xuICAgIGNvbnN0IGl0ZW1UeXBlID0gYWRkSXRlbVN0YXRlLmV4aXN0aW5nSXRlbS50eXBlO1xuICAgIGNvbnN0IHsgdGl0bGUsIGZpbGVOYW1lLCBleHRlbnNpb24gfSA9IHNhbml0aXplRmlsZUlucHV0KGZpbGUpO1xuICAgIGlmIChpdGVtVHlwZSA9PT0gXCJWZWN0b3IgVGlsZSBTZXJ2aWNlXCIpIHtcbiAgICAgIGlmIChleHRlbnNpb24gIT09IFwianNvblwiKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoeyBjb2RlOiBcImludmFsaWRFeHRlbnNpb25cIiB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChmaWxlTmFtZSAhPT0gdGhpcy5zb3VyY2VOYW1lKSB7XG4gICAgICB0aGlzLmhhbmRsZUVycm9yKHsgY29kZTogXCJ1c2VTYW1lRmlsZU5hbWVcIiB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaXRlbVByb3BlcnRpZXNTdGF0ZS50aXRsZSA9IHRpdGxlO1xuICAgIGFkZEl0ZW1TdGF0ZS5maWxlID0gZmlsZTtcbiAgICBhZGRJdGVtU3RhdGUuZmlsZU5hbWUgPSBmaWxlTmFtZTtcbiAgICBhZGRJdGVtU3RhdGUubmV3SXRlbU1vZGUgPSBcImZpbGVcIjtcbiAgICBhZGRJdGVtU3RhdGUuZXh0ZW5zaW9uID0gZXh0ZW5zaW9uO1xuICAgIGNvbnN0IHBvc3NpYmxlSXRlbVR5cGVzID0gZmluZFBvc3NpYmxlSXRlbVR5cGVzQnlFeHRlbnNpb24oZXh0ZW5zaW9uKTtcbiAgICBpZiAocG9zc2libGVJdGVtVHlwZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICBjb25zdCB0eXBlID0gcG9zc2libGVJdGVtVHlwZXNbMF0udHlwZTtcbiAgICAgIGFkZEl0ZW1TdGF0ZS50eXBlID0gdHlwZTtcbiAgICB9XG4gICAgaWYgKGl0ZW1UeXBlID09PSBcIkxheWVyIFBhY2thZ2VcIikge1xuICAgICAgdGhpcy5uZXdJdGVtVXBkYXRlUGFnZS5lbWl0KFwiYXBwZW5kU2VsZWN0VXBkYXRlXCIpO1xuICAgIH1cbiAgICBlbHNlIGlmIChpdGVtVHlwZSA9PT0gXCJWZWN0b3IgVGlsZSBTZXJ2aWNlXCIpIHtcbiAgICAgIHRoaXMuaGFuZGxlVXBkYXRlU3R5bGUoKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLmhhbmRsZVVwZGF0ZSgpO1xuICAgIH1cbiAgfVxuICBhc3luYyBoYW5kbGVVcGRhdGUoKSB7XG4gICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTtcbiAgICB0aGlzLmxvYWRlck1lc3NhZ2UgPSB1aVN0b3JlU3RhdGUuaTE4bi5hcHBlbmQuYXBwZW5kTG9hZGluZ01lc3NhZ2VzLnVwZGF0aW5nO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdXBkYXRlSXRlbU92ZXJ3cml0ZShhZGRJdGVtU3RhdGUuZXhpc3RpbmdJdGVtLCB0aGlzLml0ZW0uaXRlbU93bmVyLnVzZXJDb250ZW50VXJsLCAvLyAhIFVzZSBmZXRjaFVzZXIgaWYgaXRlbU93bmVyIGlzIG5vdCBhdmFpbGFibGVcbiAgICB7XG4gICAgICBmaWxlOiBhZGRJdGVtU3RhdGUuZmlsZSxcbiAgICAgIG92ZXJ3cml0ZTogdHJ1ZSxcbiAgICAgIGtlZXBEZXNjcmlwdGlvbjogdHJ1ZVxuICAgIH0pO1xuICAgIGlmICghcmVzcG9uc2Uuc3VjY2Vzcykge1xuICAgICAgdGhpcy5oYW5kbGVFcnJvcih7IGNvZGU6IFwidW5oYW5kbGVkRXJyb3JcIiB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLndvcmtmbG93Q29tcGxldGUuZW1pdCh7XG4gICAgICAgIHN1Y2Nlc3M6IHJlc3BvbnNlLnN1Y2Nlc3NcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBhc3luYyBoYW5kbGVVcGRhdGVTdHlsZSgpIHtcbiAgICB0aGlzLmxvYWRpbmcgPSB0cnVlO1xuICAgIHRoaXMubG9hZGVyTWVzc2FnZSA9IHVpU3RvcmVTdGF0ZS5pMThuLmFwcGVuZC5hcHBlbmRMb2FkaW5nTWVzc2FnZXMudXBkYXRpbmc7XG4gICAgY29uc3QgeyByZXN1bHQsIGVycm9yIH0gPSBhd2FpdCB1cGRhdGVJdGVtUmVzb3VyY2UoYWRkSXRlbVN0YXRlLmV4aXN0aW5nSXRlbSwgdGhpcy5pdGVtLml0ZW1Pd25lci51c2VyQ29udGVudFVybCwgLy8gISBVc2UgZmV0Y2hVc2VyIGlmIGl0ZW1Pd25lciBpcyBub3QgYXZhaWxhYmxlXG4gICAge1xuICAgICAgZmlsZTogYWRkSXRlbVN0YXRlLmZpbGVcbiAgICB9KTtcbiAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgIHRoaXMud29ya2Zsb3dDb21wbGV0ZS5lbWl0KHtcbiAgICAgICAgc3VjY2VzczogcmVzdWx0LnN1Y2Nlc3NcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHRoaXMuaGFuZGxlRXJyb3IoeyBjb2RlOiBlcnJvci5jb2RlIH0pO1xuICAgIH1cbiAgfVxuICBhc3luYyBoYW5kbGVFcnJvcihlcnJvcikge1xuICAgIGxldCBlcnJvck1lc3NhZ2UgPSB0aGlzLmkxOG4uZXJyb3JzLmVycm9yV2hpbGVVcGxvYWQ7XG4gICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgc3dpdGNoIChlcnJvci5jb2RlKSB7XG4gICAgICBjYXNlIFwiaW52YWxpZEV4dGVuc2lvblwiOlxuICAgICAgICBlcnJvck1lc3NhZ2UgPSB0aGlzLmkxOG4uZXJyb3JzLmludmFsaWRTdHlsZUZpbGVFeHRlbnNpb247XG4gICAgICBjYXNlIFwidXNlU2FtZUZpbGVOYW1lXCI6XG4gICAgICAgIGVycm9yTWVzc2FnZSA9IHRoaXMuaTE4bi5lcnJvcnMuc2FtZUZpbGVOYW1lLnJlcGxhY2UoXCIke3h9XCIsIHRoaXMuc291cmNlTmFtZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcInVuaGFuZGxlZEVycm9yXCI6XG4gICAgICAgIGVycm9yTWVzc2FnZSA9IHRoaXMuaTE4bi5lcnJvcnMuZXJyb3JVcGRhdGU7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICB0aGlzLmVycm9yID0geyB0aXRsZTogdWlTdG9yZVN0YXRlLmkxOG4uZXJyb3IsIGRlc2NyaXB0aW9uOiBlcnJvck1lc3NhZ2UgfTtcbiAgICByZXR1cm47XG4gIH1cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgaGVhZGVyLCBsb2FkZXJUeXBlLCBsb2FkaW5nLCBsb2FkZXJNZXNzYWdlLCBlcnJvciwgYWxsb3dlZEV4dGVuc2lvbnMgfSA9IHRoaXM7XG4gICAgY29uc3QgeyBwb3J0YWwsIGNvbmZpZywgdXNlciB9ID0gY29uZmlnU3RhdGU7XG4gICAgcmV0dXJuIChoKEhvc3QsIG51bGwsIGgoXCJhcmNnaXMtbmV3LWl0ZW0tbG9hZGVyXCIsIHsgdHlwZTogbG9hZGVyVHlwZSwgYWN0aXZlOiBsb2FkaW5nLCB0ZXh0OiBsb2FkZXJNZXNzYWdlIH0pLCBoKFwiYXJjZ2lzLW5ldy1pdGVtLWRlc2NyaXB0aW9uXCIsIHsgaGVhZGVyOiBoZWFkZXIgfSksIGgoXCJhcmNnaXMtZmlsZS1icm93c2VyXCIsIHsgY2xhc3M6IFwiYXJjZ2lzLWZpbGUtYnJvd3NlclwiLCBjbG91ZDogZmFsc2UsIGluc2lkZU1vZGFsOiB0cnVlLCBmdWxsSGVpZ2h0OiB0cnVlLCBwb3J0YWw6IHBvcnRhbCwgY29uZmlnOiBjb25maWcsIHVzZXI6IHVzZXIsIGFsbG93ZWRFeHRlbnNpb25zOiBhbGxvd2VkRXh0ZW5zaW9ucyB9KSwgaChcImFyY2dpcy1uZXctaXRlbS1hbGVydFwiLCB7IGhlYWRpbmc6IGVycm9yID09PSBudWxsIHx8IGVycm9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlcnJvci50aXRsZSwgZGVzY3JpcHRpb246IGVycm9yID09PSBudWxsIHx8IGVycm9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlcnJvci5kZXNjcmlwdGlvbiwgbGluazogeyBocmVmOiBlcnJvciA9PT0gbnVsbCB8fCBlcnJvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXJyb3IubGluaywgdGl0bGU6IGVycm9yID09PSBudWxsIHx8IGVycm9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlcnJvci5saW5rVGV4dCB9LCBhY3RpdmU6ICEhZXJyb3IsIG9uQWxlcnREaXNtaXNzOiAoKSA9PiAodGhpcy5lcnJvciA9IG51bGwpIH0pKSk7XG4gIH1cbn07XG5BcmNnaXNOZXdJdGVtUGFnZXNEYXRhVXBsb2FkLnN0eWxlID0gYXJjZ2lzTmV3SXRlbVBhZ2VzRGF0YVVwbG9hZENzcztcblxuZXhwb3J0IHsgQXJjZ2lzTmV3SXRlbVBhZ2VzRGF0YVVwbG9hZCBhcyBhcmNnaXNfbmV3X2l0ZW1fcGFnZXNfZGF0YV91cGxvYWQgfTtcbiIsIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIHYzLjAuOTlcbiAqL1xuaW1wb3J0IHsgYiBhcyB1bmlxdWUgfSBmcm9tICcuL2Z1bmN0aW9uYWwtYzgyZjVhYjkuanMnO1xuaW1wb3J0IHsgYSBhcyBhZGRDcmVhdGVJdGVtVHlwZXMgfSBmcm9tICcuL2l0ZW0tdHlwZXMtYjRmZTg2YWQuanMnO1xuXG5mdW5jdGlvbiBmaW5kUG9zc2libGVJdGVtVHlwZXNCeUV4dGVuc2lvbihleHRlbnNpb24sIHZhbGlkYXRpb25UeXBlcykge1xuICAvLyBTZWFyY2ggaXRlbSB0eXBlcyBleHRlbnNpb25zIGZvciB0aGUgb25lIGltcG9ydGVkXG4gIGxldCBpdGVtVHlwZXM7XG4gIGlmICh2YWxpZGF0aW9uVHlwZXMpIHtcbiAgICBpdGVtVHlwZXMgPSB2YWxpZGF0aW9uVHlwZXMubWFwKCh2YWx1ZSkgPT4ge1xuICAgICAgcmV0dXJuIHZhbHVlLnR5cGU7XG4gICAgfSk7XG4gIH1cbiAgZWxzZSB7XG4gICAgaXRlbVR5cGVzID0gT2JqZWN0LmtleXMoYWRkQ3JlYXRlSXRlbVR5cGVzKTtcbiAgfVxuICBsZXQgcG9zc2libGVJdGVtVHlwZXMgPSBbXTtcbiAgaXRlbVR5cGVzLmZvckVhY2goKHR5cGUpID0+IHtcbiAgICB2YXIgX2E7XG4gICAgaWYgKCgoX2EgPSBhZGRDcmVhdGVJdGVtVHlwZXNbdHlwZV0uZmlsZUV4dCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmluZGV4T2YoZXh0ZW5zaW9uKSkgPj0gMCkge1xuICAgICAgcG9zc2libGVJdGVtVHlwZXMucHVzaChhZGRDcmVhdGVJdGVtVHlwZXNbdHlwZV0pO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBwb3NzaWJsZUl0ZW1UeXBlcztcbn1cbmZ1bmN0aW9uIG1hcEl0ZW1UeXBlc1RvRmlsZUV4dGVuc2lvbnModHlwZXMpIHtcbiAgaWYgKCF0eXBlcykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiB1bmlxdWUodHlwZXMuZmxhdE1hcCgodHlwZSkgPT4geyB2YXIgX2E7IHJldHVybiAoX2EgPSBhZGRDcmVhdGVJdGVtVHlwZXNbdHlwZV0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5maWxlRXh0OyB9KS5maWx0ZXIoKHZhbGlkKSA9PiAhIXZhbGlkKSk7XG59XG5jb25zdCBpc0xhcmdlR2VvSlNPTiA9IChzaXplSW5CeXRlcykgPT4ge1xuICBjb25zdCBzaXplSW5NQiA9IHNpemVJbkJ5dGVzIC8gMTAyNCAvIDEwMjQ7XG4gIC8vIGh0dHBzOi8vZGV2dG9waWEuZXNyaS5jb20vV2ViR0lTL2FyY2dpcy1hcHAtY29tcG9uZW50cy9pc3N1ZXMvMjU1MyNpc3N1ZWNvbW1lbnQtMzY0NTQwNFxuICByZXR1cm4gc2l6ZUluTUIgPiA1MDsgLy8gNTBNQlxufTtcbmNvbnN0IGlzTGFyZ2VDU1YgPSAoc2l6ZUluQnl0ZXMpID0+IHtcbiAgY29uc3Qgc2l6ZUluTUIgPSBzaXplSW5CeXRlcyAvIDEwMjQgLyAxMDI0O1xuICAvLyBodHRwczovL2RldnRvcGlhLmVzcmkuY29tL1dlYkdJUy9hcmNnaXMtYXBwLWNvbXBvbmVudHMvaXNzdWVzLzI4NzUjaXNzdWVjb21tZW50LTM3NDg5MTNcbiAgcmV0dXJuIHNpemVJbk1CID4gMjA7IC8vIDIwTUJcbn07XG5cbmV4cG9ydCB7IGlzTGFyZ2VDU1YgYXMgYSwgZmluZFBvc3NpYmxlSXRlbVR5cGVzQnlFeHRlbnNpb24gYXMgZiwgaXNMYXJnZUdlb0pTT04gYXMgaSwgbWFwSXRlbVR5cGVzVG9GaWxlRXh0ZW5zaW9ucyBhcyBtIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=