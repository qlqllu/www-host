"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-f8c6cb"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-data-store-database-credentials.entry.js":
/*!********************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-data-store-database-credentials.entry.js ***!
  \********************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   arcgis_new_item_pages_data_store_database_credentials: () => (/* binding */ ArcgisNewItemPagesDataStoreDatabaseCredentials)
/* harmony export */ });
/* harmony import */ var _index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-92ebb396.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-92ebb396.js");
/* harmony import */ var _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config-eb5f7dc2.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/config-eb5f7dc2.js");
/* harmony import */ var _file_f36193e9_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./file-f36193e9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/file-f36193e9.js");
/* harmony import */ var _data_store_f509564d_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./data-store-f509564d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/data-store-f509564d.js");
/* harmony import */ var _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./add-item-97d577a9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/add-item-97d577a9.js");
/* harmony import */ var _ui_ecf86bba_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ui-ecf86bba.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ui-ecf86bba.js");
/* harmony import */ var _data_store_e8b5ce2f_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./data-store-e8b5ce2f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/data-store-e8b5ce2f.js");
/* harmony import */ var _item_properties_e6412a9a_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./item-properties-e6412a9a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-properties-e6412a9a.js");
/* harmony import */ var _data_store_7545f471_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./data-store-7545f471.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/data-store-7545f471.js");
/* harmony import */ var _index_81d548b7_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./index-81d548b7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-81d548b7.js");
/* harmony import */ var _item_types_b4fe86ad_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./item-types-b4fe86ad.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-types-b4fe86ad.js");
/* harmony import */ var _guid_4f4176ba_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./guid-4f4176ba.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/guid-4f4176ba.js");
/* harmony import */ var _portal_79caaeff_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./portal-79caaeff.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/portal-79caaeff.js");
/* harmony import */ var _loadModules_aaf30bd6_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./loadModules-aaf30bd6.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/loadModules-aaf30bd6.js");
/* harmony import */ var _privileges_ccd5f37d_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./privileges-ccd5f37d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/privileges-ccd5f37d.js");
/* harmony import */ var _functional_c82f5ab9_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./functional-c82f5ab9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-c82f5ab9.js");
/* harmony import */ var _item_d9d70416_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./item-d9d70416.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-d9d70416.js");
/* harmony import */ var _feature_layer_38cdae87_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./feature-layer-38cdae87.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-38cdae87.js");
/* harmony import */ var _feature_layer_d33ea114_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./feature-layer-d33ea114.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-d33ea114.js");
/* harmony import */ var _thumbnail_0b7adfcd_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./thumbnail-0b7adfcd.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/thumbnail-0b7adfcd.js");
/* harmony import */ var _query_4f7b7e4d_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./query-4f7b7e4d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/query-4f7b7e4d.js");
/* harmony import */ var _user_e3dedc4a_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./user-e3dedc4a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/user-e3dedc4a.js");
/* harmony import */ var _api_f7934cd7_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./api-f7934cd7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/api-f7934cd7.js");
/* harmony import */ var _server_item_f12153e6_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./server-item-f12153e6.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/server-item-f12153e6.js");
/* harmony import */ var _functional_9f648bee_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./functional-9f648bee.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-9f648bee.js");
/* harmony import */ var _dom_13f5b00c_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./dom-13f5b00c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/dom-13f5b00c.js");
/* harmony import */ var _feature_layer_69305a85_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./feature-layer-69305a85.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-69305a85.js");
/* harmony import */ var _ags_68d4ae20_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./ags-68d4ae20.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ags-68d4ae20.js");
/* harmony import */ var _url_f3b82cc7_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./url-f3b82cc7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/url-f3b82cc7.js");
/* harmony import */ var _storage_d7f5822e_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./storage-d7f5822e.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/storage-d7f5822e.js");
/* harmony import */ var _store_3210b604_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./store-3210b604.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/store-3210b604.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */
































const arcgisNewItemPagesDataStoreDatabaseCredentialsCss = ".configure-form{margin-top:1.5rem}.fill-credentials{display:flex}.credentials{flex:1 1 0%}.password{-webkit-margin-start:3rem;margin-inline-start:3rem}.info-icon{color:var(--calcite-ui-brand)}.hidden{display:none}calcite-label{--calcite-label-margin-bottom:1.25rem}.asterisk{color:var(--calcite-ui-danger)}";

const ArcgisNewItemPagesDataStoreDatabaseCredentials = class {
  constructor(hostRef) {
    (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.newItemUpdatePage = (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "newItemUpdatePage", 7);
    this.handleFileInputChange = (event) => {
      this.processFile(event.target.files[0]);
    };
    this.authenticationType = "serviceAuthentication";
    this.loading = false;
    this.loaderType = "indeterminate";
    this.loaderMessage = undefined;
    this.refreshToken = undefined;
    this.keyFileContents = undefined;
    this.projectId = undefined;
    this.defaultDataset = undefined;
    this.server = undefined;
    this.user = undefined;
    this.password = undefined;
    this.role = undefined;
    this.database = undefined;
    this.schema = undefined;
    this.warehouse = undefined;
    this.validJson = true;
    this.invalidLogin = false;
    this.emptyFieldsExist = false;
    this.keyFileName = undefined;
    this.error = undefined;
  }
  async handleNext() {
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.authenticationType = this.authenticationType;
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.refreshToken = this.refreshToken;
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.projectID = this.projectId;
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.defaultDataset = this.defaultDataset;
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.snowflakeServer = this.server;
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.snowflakeUsername = this.user;
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.snowflakePassword = this.password;
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.role = this.role;
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.database = this.database;
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.schema = this.schema;
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.warehouse = this.warehouse;
    if (!this.checkValidFields()) {
      this.handleError({ code: "unhandledError" });
      return;
    }
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.databaseConnectionPath = this.createDatabaseConnectionPath();
    await this.validateConnection();
  }
  async componentWillLoad() {
    this.dataStoreConnectionType = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.databaseProvider;
    this.i18n = _ui_ecf86bba_js__WEBPACK_IMPORTED_MODULE_5__.u.i18n.dataStoreDatabaseCredentials;
    this.populateFields();
  }
  checkValidFields() {
    const { projectId, keyFileName, server, database, schema, warehouse, role, user, password, dataStoreConnectionType } = this;
    const fields = dataStoreConnectionType === "snowflake"
      ? [server, database, schema, warehouse, role, user, password]
      : [keyFileName, projectId];
    this.emptyFieldsExist = fields.some((field) => !field);
    return !this.emptyFieldsExist;
  }
  populateFields() {
    var _a;
    //Save fields if user goes back to this page
    this.server = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.snowflakeServer;
    (_a = this.authenticationType) !== null && _a !== void 0 ? _a : (this.authenticationType = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.authenticationType);
    this.projectId = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.projectID;
    this.defaultDataset = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.defaultDataset;
    this.role = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.role;
    this.database = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.database;
    this.schema = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.schema;
    this.warehouse = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.warehouse;
  }
  createDatabaseConnectionPath() {
    const { dataStoreConnectionType, authenticationType, projectId, defaultDataset, server, user, role, database, schema, warehouse } = this;
    let databaseConnectionPath;
    switch (dataStoreConnectionType) {
      case "bigQuery":
        databaseConnectionPath = `${this.i18n.bigQuery}/${authenticationType === "serviceAuthentication"
          ? this.i18n.serviceAuthentication
          : this.i18n.userAuthentication}/${projectId}/${defaultDataset}`;
        break;
      case "snowflake":
        databaseConnectionPath = `${server}/${user}/${role}/${database}/${schema}/${warehouse}`;
        break;
    }
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.databaseConnectionPath = databaseConnectionPath;
    return databaseConnectionPath;
  }
  async validateConnection() {
    const { dataStoreConnectionType, projectId, defaultDataset, keyFileContents, refreshToken, user, password, database, role, server, warehouse, schema } = this;
    let payload;
    const { orgId } = _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_1__.c.user;
    this.invalidLogin = false; //reset fields without error state
    this.loading = true;
    this.loaderMessage = this.i18n.validating;
    const keyFile = keyFileContents || "";
    const refreshTokenInput = refreshToken || "";
    if (dataStoreConnectionType === "bigQuery") {
      const bigQueryPayload = await (0,_data_store_e8b5ce2f_js__WEBPACK_IMPORTED_MODULE_6__.l)(projectId, defaultDataset, keyFile, refreshTokenInput);
      if (bigQueryPayload === null || bigQueryPayload === void 0 ? void 0 : bigQueryPayload.error) {
        if (bigQueryPayload.error.code === "invalidJSON") {
          this.validJson = false;
        }
        this.handleError({ code: bigQueryPayload.error.code });
        return;
      }
      else {
        payload = bigQueryPayload.result;
        _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.jdbcConnection = Object.assign({}, payload.info.JDBCConnection);
      }
    }
    else {
      payload = (0,_data_store_e8b5ce2f_js__WEBPACK_IMPORTED_MODULE_6__.m)({
        user,
        password,
        database,
        role,
        server,
        warehouse,
        schema
      });
      _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.jdbcConnection = Object.assign({}, payload.info.JDBCConnection);
      _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.typeKeywords = [..._add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.typeKeywords, "CDW", "snowflake"];
    }
    const fieldValue = dataStoreConnectionType === "bigQuery" ? projectId : database;
    _item_properties_e6412a9a_js__WEBPACK_IMPORTED_MODULE_7__.i.title = (0,_data_store_7545f471_js__WEBPACK_IMPORTED_MODULE_8__.f)(dataStoreConnectionType, fieldValue);
    const { result, error } = await (0,_data_store_f509564d_js__WEBPACK_IMPORTED_MODULE_3__.v)(orgId, _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_1__.c.portal, payload);
    if ((result === null || result === void 0 ? void 0 : result.status) === "success") {
      this.newItemUpdatePage.emit("itemProperties");
    }
    else {
      console.error(error);
      this.handleError({ code: error.code });
      return;
    }
  }
  processFile(file) {
    if (!file) {
      return;
    }
    const { extension, fileName } = (0,_file_f36193e9_js__WEBPACK_IMPORTED_MODULE_2__.s)(file);
    this.keyFileName = fileName;
    if (extension !== "json") {
      this.validJson = false;
      return;
    }
    this.validJson = true;
    const reader = new FileReader();
    reader.onload = (event) => {
      this.keyFileContents = String(event.target.result);
    };
    reader.readAsText(file);
  }
  trimInput(input) {
    return input.trim();
  }
  handleError(error) {
    this.loading = false;
    let errorTitle = this.i18n.errors.validationFailedTitle;
    let errorMessage = this.i18n.errors.validationFailedDescription;
    switch (error.code) {
      case "invalidJSON":
        errorTitle = _ui_ecf86bba_js__WEBPACK_IMPORTED_MODULE_5__.u.i18n.itemProperties.invalidJSON.title;
        errorMessage = _ui_ecf86bba_js__WEBPACK_IMPORTED_MODULE_5__.u.i18n.itemProperties.invalidJSON.description;
        break;
      case "invalidUsernameOrPassword":
        this.invalidLogin = true;
        break;
    }
    this.error = {
      title: errorTitle,
      description: errorMessage
    };
  }
  render() {
    const { dataStoreConnectionType, i18n, server, authenticationType, projectId, defaultDataset, role, database, schema, warehouse, validJson, error, invalidLogin } = this;
    return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", null, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-loader", { type: this.loaderType, active: this.loading, text: this.loaderMessage }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-description", { class: "header", header: i18n.dataStoreConnection, content: dataStoreConnectionType === "bigQuery" ? i18n.bigQuery : i18n.snowflake }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "configure-form" }, dataStoreConnectionType === "snowflake" && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { class: "field" }, i18n.server, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { placeholder: "server_name.com", value: server, onInput: (e) => {
        this.server = this.trimInput(e.target.value);
      }, required: true }), !this.server && this.emptyFieldsExist && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input-message", { icon: "exclamation-mark-triangle", status: "invalid" }, i18n.errors.noServer)))), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { class: "field" }, i18n.authenticationType, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-select", { value: authenticationType, label: "authentication-type", disabled: true, onCalciteSelectChange: (e) => {
        this.authenticationType = e.target.selectedOption.value;
      } }, dataStoreConnectionType === "bigQuery" ? ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-option", { value: "serviceAuthentication" }, i18n.serviceAuthentication)) : ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-option", { value: "userAuthentication" }, i18n.userAuthentication)))), dataStoreConnectionType === "bigQuery" && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "configureBigQuery" }, authenticationType === "serviceAuthentication" ? ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { class: "field keyFileInput" }, i18n.keyFile, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { status: !validJson || (!this.keyFileName && this.emptyFieldsExist)
        ? "invalid"
        : "valid", "read-only": true, value: this.keyFileName, required: true }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-button", { "icon-start": "folder", slot: "action", kind: "neutral", appearance: "outline", onClick: () => { var _a; return (_a = this.inputFileElement) === null || _a === void 0 ? void 0 : _a.click(); } }, i18n.selectKeyFile)), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("input", { class: "hidden", type: "file", id: "snowflake-key-file", accept: ".json", onChange: this.handleFileInputChange, ref: (el) => (this.inputFileElement = el) }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input-message", { icon: !validJson || (!this.keyFileName && this.emptyFieldsExist)
        ? "exclamation-mark-triangle"
        : "information", status: !validJson || (!this.keyFileName && this.emptyFieldsExist)
        ? "invalid"
        : "idle" }, !this.keyFileName && this.emptyFieldsExist
      ? i18n.errors.noKeyFile
      : validJson
        ? i18n.jsonOnly
        : i18n.notJson))) : ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { class: "field refreshTokenInput" }, i18n.refreshToken, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { type: "password", status: "valid", onInput: (e) => {
        this.refreshToken = e.target.value;
      } }))), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { class: "field" }, i18n.projectId, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { value: projectId, onInput: (e) => {
        this.projectId = this.trimInput(e.target.value);
      }, required: true }), !this.projectId && this.emptyFieldsExist && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input-message", { icon: "exclamation-mark-triangle", status: "invalid" }, i18n.errors.noProjectId))), authenticationType === "userAuthentication" && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { class: "field" }, i18n.defaultDataset, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { value: defaultDataset, onInput: (e) => {
        this.defaultDataset = this.trimInput(e.target.value);
      } }))))), dataStoreConnectionType === "snowflake" && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "configureSnowflake" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "field fill-credentials" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { class: "credentials" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "username" }, i18n.username, " ", ((!this.user && this.emptyFieldsExist) || invalidLogin) && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: "asterisk" }, "*"))), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { onInput: (e) => {
        this.user = this.trimInput(e.target.value);
      }, required: true }), (((!this.user || !this.password) && this.emptyFieldsExist) || invalidLogin) && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input-message", { icon: "exclamation-mark-triangle", status: "invalid" }, i18n.errors.incorrectLogin))), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { class: "credentials" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "password" }, i18n.password, " ", ((!this.password && this.emptyFieldsExist) || invalidLogin) && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: "asterisk" }, "*"))), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { class: "credentials password", type: "password", onInput: (e) => {
        this.password = this.trimInput(e.target.value);
      }, required: true }))), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { class: "field" }, i18n.database, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { value: database, onInput: (e) => {
        this.database = this.trimInput(e.target.value);
      }, required: true }), !this.database && this.emptyFieldsExist && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input-message", { icon: "exclamation-mark-triangle", status: "invalid" }, i18n.errors.noDatabase))), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { class: "field" }, i18n.schema, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { value: schema, onInput: (e) => {
        this.schema = this.trimInput(e.target.value);
      }, required: true }), !this.schema && this.emptyFieldsExist && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input-message", { icon: "exclamation-mark-triangle", status: "invalid" }, i18n.errors.noSchema))), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { class: "field" }, i18n.warehouse, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { value: warehouse, onInput: (e) => {
        this.warehouse = this.trimInput(e.target.value);
      }, required: true }), !this.warehouse && this.emptyFieldsExist && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input-message", { icon: "exclamation-mark-triangle", status: "invalid" }, i18n.errors.noWarehouse))), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { class: "field" }, i18n.role, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { value: role, onInput: (e) => {
        this.role = this.trimInput(e.target.value);
      }, required: true }), !this.role && this.emptyFieldsExist && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input-message", { icon: "exclamation-mark-triangle", status: "invalid" }, i18n.errors.noRole)))))), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-alert", { heading: error === null || error === void 0 ? void 0 : error.title, description: error === null || error === void 0 ? void 0 : error.description, active: !!error, onAlertDismiss: () => (this.error = null) })));
  }
};
ArcgisNewItemPagesDataStoreDatabaseCredentials.style = arcgisNewItemPagesDataStoreDatabaseCredentialsCss;




/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/data-store-7545f471.js":
/*!****************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/data-store-7545f471.js ***!
  \****************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   f: () => (/* binding */ formatTitleForDataStoreItem)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */
const formatTitleForDataStoreItem = (provider, fieldValue) => {
  let title;
  const initialTitle = fieldValue !== null && fieldValue !== void 0 ? fieldValue : "";
  switch (provider) {
    case "amazon":
      title = `AmazonS3_${initialTitle}`;
      break;
    case "azure":
      title = `Microsoft_Azure_Storage_${initialTitle}`;
      break;
    case "bigQuery":
      title = `BigQuery_${initialTitle}`;
      break;
    case "snowflake":
      title = `Snowflake_${initialTitle}`;
      break;
  }
  return title.replace(/ /g, "_").replace(/-/g, "_");
};




/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXBwLWNvbXBvbmVudHNfZGlzdF9lc21fYXJjZ2lzLWY4YzZjYi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ2lGO0FBQ3pCO0FBQ0k7QUFDZTtBQUNoQjtBQUNOO0FBQ29EO0FBQ2hDO0FBQ0c7QUFDL0M7QUFDSztBQUNOO0FBQ0U7QUFDSztBQUNEO0FBQ0E7QUFDTjtBQUNTO0FBQ0E7QUFDSjtBQUNKO0FBQ0Q7QUFDRDtBQUNRO0FBQ0Q7QUFDUDtBQUNVO0FBQ1Y7QUFDQTtBQUNJO0FBQ0Y7O0FBRTdCLDJFQUEyRSxrQkFBa0Isa0JBQWtCLGFBQWEsYUFBYSxZQUFZLFVBQVUsMEJBQTBCLHlCQUF5QixXQUFXLDhCQUE4QixRQUFRLGFBQWEsY0FBYyxzQ0FBc0MsVUFBVSwrQkFBK0I7O0FBRTdXO0FBQ0E7QUFDQSxJQUFJLHFEQUFnQjtBQUNwQiw2QkFBNkIscURBQVc7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLG9EQUFZO0FBQ2hCLElBQUksb0RBQVk7QUFDaEIsSUFBSSxvREFBWTtBQUNoQixJQUFJLG9EQUFZO0FBQ2hCLElBQUksb0RBQVk7QUFDaEIsSUFBSSxvREFBWTtBQUNoQixJQUFJLG9EQUFZO0FBQ2hCLElBQUksb0RBQVk7QUFDaEIsSUFBSSxvREFBWTtBQUNoQixJQUFJLG9EQUFZO0FBQ2hCLElBQUksb0RBQVk7QUFDaEI7QUFDQSx5QkFBeUIsd0JBQXdCO0FBQ2pEO0FBQ0E7QUFDQSxJQUFJLG9EQUFZO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxv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Ozs7Ozs7O0FDM1BuSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsYUFBYTtBQUN2QztBQUNBO0FBQ0EseUNBQXlDLGFBQWE7QUFDdEQ7QUFDQTtBQUNBLDBCQUEwQixhQUFhO0FBQ3ZDO0FBQ0E7QUFDQSwyQkFBMkIsYUFBYTtBQUN4QztBQUNBO0FBQ0E7QUFDQTs7QUFFNEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcHAtY29tcG9uZW50cy9kaXN0L2VzbS9hcmNnaXMtbmV3LWl0ZW0tcGFnZXMtZGF0YS1zdG9yZS1kYXRhYmFzZS1jcmVkZW50aWFscy5lbnRyeS5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcHAtY29tcG9uZW50cy9kaXN0L2VzbS9kYXRhLXN0b3JlLTc1NDVmNDcxLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIHYzLjAuOTlcbiAqL1xuaW1wb3J0IHsgciBhcyByZWdpc3Rlckluc3RhbmNlLCBjIGFzIGNyZWF0ZUV2ZW50LCBoIH0gZnJvbSAnLi9pbmRleC05MmViYjM5Ni5qcyc7XG5pbXBvcnQgeyBjIGFzIGNvbmZpZ1N0YXRlIH0gZnJvbSAnLi9jb25maWctZWI1ZjdkYzIuanMnO1xuaW1wb3J0IHsgcyBhcyBzYW5pdGl6ZUZpbGVJbnB1dCB9IGZyb20gJy4vZmlsZS1mMzYxOTNlOS5qcyc7XG5pbXBvcnQgeyB2IGFzIHZhbGlkYXRlRGF0YXN0b3JlRm9yT25saW5lIH0gZnJvbSAnLi9kYXRhLXN0b3JlLWY1MDk1NjRkLmpzJztcbmltcG9ydCB7IGEgYXMgYWRkSXRlbVN0YXRlIH0gZnJvbSAnLi9hZGQtaXRlbS05N2Q1NzdhOS5qcyc7XG5pbXBvcnQgeyB1IGFzIHVpU3RvcmVTdGF0ZSB9IGZyb20gJy4vdWktZWNmODZiYmEuanMnO1xuaW1wb3J0IHsgbCBhcyBjcmVhdGVCaWdRdWVyeURhdGFPYmplY3QsIG0gYXMgY3JlYXRlU25vd2ZsYWtlRGF0YU9iamVjdCB9IGZyb20gJy4vZGF0YS1zdG9yZS1lOGI1Y2UyZi5qcyc7XG5pbXBvcnQgeyBpIGFzIGl0ZW1Qcm9wZXJ0aWVzU3RhdGUgfSBmcm9tICcuL2l0ZW0tcHJvcGVydGllcy1lNjQxMmE5YS5qcyc7XG5pbXBvcnQgeyBmIGFzIGZvcm1hdFRpdGxlRm9yRGF0YVN0b3JlSXRlbSB9IGZyb20gJy4vZGF0YS1zdG9yZS03NTQ1ZjQ3MS5qcyc7XG5pbXBvcnQgJy4vaW5kZXgtODFkNTQ4YjcuanMnO1xuaW1wb3J0ICcuL2l0ZW0tdHlwZXMtYjRmZTg2YWQuanMnO1xuaW1wb3J0ICcuL2d1aWQtNGY0MTc2YmEuanMnO1xuaW1wb3J0ICcuL3BvcnRhbC03OWNhYWVmZi5qcyc7XG5pbXBvcnQgJy4vbG9hZE1vZHVsZXMtYWFmMzBiZDYuanMnO1xuaW1wb3J0ICcuL3ByaXZpbGVnZXMtY2NkNWYzN2QuanMnO1xuaW1wb3J0ICcuL2Z1bmN0aW9uYWwtYzgyZjVhYjkuanMnO1xuaW1wb3J0ICcuL2l0ZW0tZDlkNzA0MTYuanMnO1xuaW1wb3J0ICcuL2ZlYXR1cmUtbGF5ZXItMzhjZGFlODcuanMnO1xuaW1wb3J0ICcuL2ZlYXR1cmUtbGF5ZXItZDMzZWExMTQuanMnO1xuaW1wb3J0ICcuL3RodW1ibmFpbC0wYjdhZGZjZC5qcyc7XG5pbXBvcnQgJy4vcXVlcnktNGY3YjdlNGQuanMnO1xuaW1wb3J0ICcuL3VzZXItZTNkZWRjNGEuanMnO1xuaW1wb3J0ICcuL2FwaS1mNzkzNGNkNy5qcyc7XG5pbXBvcnQgJy4vc2VydmVyLWl0ZW0tZjEyMTUzZTYuanMnO1xuaW1wb3J0ICcuL2Z1bmN0aW9uYWwtOWY2NDhiZWUuanMnO1xuaW1wb3J0ICcuL2RvbS0xM2Y1YjAwYy5qcyc7XG5pbXBvcnQgJy4vZmVhdHVyZS1sYXllci02OTMwNWE4NS5qcyc7XG5pbXBvcnQgJy4vYWdzLTY4ZDRhZTIwLmpzJztcbmltcG9ydCAnLi91cmwtZjNiODJjYzcuanMnO1xuaW1wb3J0ICcuL3N0b3JhZ2UtZDdmNTgyMmUuanMnO1xuaW1wb3J0ICcuL3N0b3JlLTMyMTBiNjA0LmpzJztcblxuY29uc3QgYXJjZ2lzTmV3SXRlbVBhZ2VzRGF0YVN0b3JlRGF0YWJhc2VDcmVkZW50aWFsc0NzcyA9IFwiLmNvbmZpZ3VyZS1mb3Jte21hcmdpbi10b3A6MS41cmVtfS5maWxsLWNyZWRlbnRpYWxze2Rpc3BsYXk6ZmxleH0uY3JlZGVudGlhbHN7ZmxleDoxIDEgMCV9LnBhc3N3b3Jkey13ZWJraXQtbWFyZ2luLXN0YXJ0OjNyZW07bWFyZ2luLWlubGluZS1zdGFydDozcmVtfS5pbmZvLWljb257Y29sb3I6dmFyKC0tY2FsY2l0ZS11aS1icmFuZCl9LmhpZGRlbntkaXNwbGF5Om5vbmV9Y2FsY2l0ZS1sYWJlbHstLWNhbGNpdGUtbGFiZWwtbWFyZ2luLWJvdHRvbToxLjI1cmVtfS5hc3Rlcmlza3tjb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWRhbmdlcil9XCI7XG5cbmNvbnN0IEFyY2dpc05ld0l0ZW1QYWdlc0RhdGFTdG9yZURhdGFiYXNlQ3JlZGVudGlhbHMgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcbiAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgIHRoaXMubmV3SXRlbVVwZGF0ZVBhZ2UgPSBjcmVhdGVFdmVudCh0aGlzLCBcIm5ld0l0ZW1VcGRhdGVQYWdlXCIsIDcpO1xuICAgIHRoaXMuaGFuZGxlRmlsZUlucHV0Q2hhbmdlID0gKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLnByb2Nlc3NGaWxlKGV2ZW50LnRhcmdldC5maWxlc1swXSk7XG4gICAgfTtcbiAgICB0aGlzLmF1dGhlbnRpY2F0aW9uVHlwZSA9IFwic2VydmljZUF1dGhlbnRpY2F0aW9uXCI7XG4gICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgdGhpcy5sb2FkZXJUeXBlID0gXCJpbmRldGVybWluYXRlXCI7XG4gICAgdGhpcy5sb2FkZXJNZXNzYWdlID0gdW5kZWZpbmVkO1xuICAgIHRoaXMucmVmcmVzaFRva2VuID0gdW5kZWZpbmVkO1xuICAgIHRoaXMua2V5RmlsZUNvbnRlbnRzID0gdW5kZWZpbmVkO1xuICAgIHRoaXMucHJvamVjdElkID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuZGVmYXVsdERhdGFzZXQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5zZXJ2ZXIgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy51c2VyID0gdW5kZWZpbmVkO1xuICAgIHRoaXMucGFzc3dvcmQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5yb2xlID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuZGF0YWJhc2UgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5zY2hlbWEgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy53YXJlaG91c2UgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy52YWxpZEpzb24gPSB0cnVlO1xuICAgIHRoaXMuaW52YWxpZExvZ2luID0gZmFsc2U7XG4gICAgdGhpcy5lbXB0eUZpZWxkc0V4aXN0ID0gZmFsc2U7XG4gICAgdGhpcy5rZXlGaWxlTmFtZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmVycm9yID0gdW5kZWZpbmVkO1xuICB9XG4gIGFzeW5jIGhhbmRsZU5leHQoKSB7XG4gICAgYWRkSXRlbVN0YXRlLmF1dGhlbnRpY2F0aW9uVHlwZSA9IHRoaXMuYXV0aGVudGljYXRpb25UeXBlO1xuICAgIGFkZEl0ZW1TdGF0ZS5yZWZyZXNoVG9rZW4gPSB0aGlzLnJlZnJlc2hUb2tlbjtcbiAgICBhZGRJdGVtU3RhdGUucHJvamVjdElEID0gdGhpcy5wcm9qZWN0SWQ7XG4gICAgYWRkSXRlbVN0YXRlLmRlZmF1bHREYXRhc2V0ID0gdGhpcy5kZWZhdWx0RGF0YXNldDtcbiAgICBhZGRJdGVtU3RhdGUuc25vd2ZsYWtlU2VydmVyID0gdGhpcy5zZXJ2ZXI7XG4gICAgYWRkSXRlbVN0YXRlLnNub3dmbGFrZVVzZXJuYW1lID0gdGhpcy51c2VyO1xuICAgIGFkZEl0ZW1TdGF0ZS5zbm93Zmxha2VQYXNzd29yZCA9IHRoaXMucGFzc3dvcmQ7XG4gICAgYWRkSXRlbVN0YXRlLnJvbGUgPSB0aGlzLnJvbGU7XG4gICAgYWRkSXRlbVN0YXRlLmRhdGFiYXNlID0gdGhpcy5kYXRhYmFzZTtcbiAgICBhZGRJdGVtU3RhdGUuc2NoZW1hID0gdGhpcy5zY2hlbWE7XG4gICAgYWRkSXRlbVN0YXRlLndhcmVob3VzZSA9IHRoaXMud2FyZWhvdXNlO1xuICAgIGlmICghdGhpcy5jaGVja1ZhbGlkRmllbGRzKCkpIHtcbiAgICAgIHRoaXMuaGFuZGxlRXJyb3IoeyBjb2RlOiBcInVuaGFuZGxlZEVycm9yXCIgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGFkZEl0ZW1TdGF0ZS5kYXRhYmFzZUNvbm5lY3Rpb25QYXRoID0gdGhpcy5jcmVhdGVEYXRhYmFzZUNvbm5lY3Rpb25QYXRoKCk7XG4gICAgYXdhaXQgdGhpcy52YWxpZGF0ZUNvbm5lY3Rpb24oKTtcbiAgfVxuICBhc3luYyBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICB0aGlzLmRhdGFTdG9yZUNvbm5lY3Rpb25UeXBlID0gYWRkSXRlbVN0YXRlLmRhdGFiYXNlUHJvdmlkZXI7XG4gICAgdGhpcy5pMThuID0gdWlTdG9yZVN0YXRlLmkxOG4uZGF0YVN0b3JlRGF0YWJhc2VDcmVkZW50aWFscztcbiAgICB0aGlzLnBvcHVsYXRlRmllbGRzKCk7XG4gIH1cbiAgY2hlY2tWYWxpZEZpZWxkcygpIHtcbiAgICBjb25zdCB7IHByb2plY3RJZCwga2V5RmlsZU5hbWUsIHNlcnZlciwgZGF0YWJhc2UsIHNjaGVtYSwgd2FyZWhvdXNlLCByb2xlLCB1c2VyLCBwYXNzd29yZCwgZGF0YVN0b3JlQ29ubmVjdGlvblR5cGUgfSA9IHRoaXM7XG4gICAgY29uc3QgZmllbGRzID0gZGF0YVN0b3JlQ29ubmVjdGlvblR5cGUgPT09IFwic25vd2ZsYWtlXCJcbiAgICAgID8gW3NlcnZlciwgZGF0YWJhc2UsIHNjaGVtYSwgd2FyZWhvdXNlLCByb2xlLCB1c2VyLCBwYXNzd29yZF1cbiAgICAgIDogW2tleUZpbGVOYW1lLCBwcm9qZWN0SWRdO1xuICAgIHRoaXMuZW1wdHlGaWVsZHNFeGlzdCA9IGZpZWxkcy5zb21lKChmaWVsZCkgPT4gIWZpZWxkKTtcbiAgICByZXR1cm4gIXRoaXMuZW1wdHlGaWVsZHNFeGlzdDtcbiAgfVxuICBwb3B1bGF0ZUZpZWxkcygpIHtcbiAgICB2YXIgX2E7XG4gICAgLy9TYXZlIGZpZWxkcyBpZiB1c2VyIGdvZXMgYmFjayB0byB0aGlzIHBhZ2VcbiAgICB0aGlzLnNlcnZlciA9IGFkZEl0ZW1TdGF0ZS5zbm93Zmxha2VTZXJ2ZXI7XG4gICAgKF9hID0gdGhpcy5hdXRoZW50aWNhdGlvblR5cGUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICh0aGlzLmF1dGhlbnRpY2F0aW9uVHlwZSA9IGFkZEl0ZW1TdGF0ZS5hdXRoZW50aWNhdGlvblR5cGUpO1xuICAgIHRoaXMucHJvamVjdElkID0gYWRkSXRlbVN0YXRlLnByb2plY3RJRDtcbiAgICB0aGlzLmRlZmF1bHREYXRhc2V0ID0gYWRkSXRlbVN0YXRlLmRlZmF1bHREYXRhc2V0O1xuICAgIHRoaXMucm9sZSA9IGFkZEl0ZW1TdGF0ZS5yb2xlO1xuICAgIHRoaXMuZGF0YWJhc2UgPSBhZGRJdGVtU3RhdGUuZGF0YWJhc2U7XG4gICAgdGhpcy5zY2hlbWEgPSBhZGRJdGVtU3RhdGUuc2NoZW1hO1xuICAgIHRoaXMud2FyZWhvdXNlID0gYWRkSXRlbVN0YXRlLndhcmVob3VzZTtcbiAgfVxuICBjcmVhdGVEYXRhYmFzZUNvbm5lY3Rpb25QYXRoKCkge1xuICAgIGNvbnN0IHsgZGF0YVN0b3JlQ29ubmVjdGlvblR5cGUsIGF1dGhlbnRpY2F0aW9uVHlwZSwgcHJvamVjdElkLCBkZWZhdWx0RGF0YXNldCwgc2VydmVyLCB1c2VyLCByb2xlLCBkYXRhYmFzZSwgc2NoZW1hLCB3YXJlaG91c2UgfSA9IHRoaXM7XG4gICAgbGV0IGRhdGFiYXNlQ29ubmVjdGlvblBhdGg7XG4gICAgc3dpdGNoIChkYXRhU3RvcmVDb25uZWN0aW9uVHlwZSkge1xuICAgICAgY2FzZSBcImJpZ1F1ZXJ5XCI6XG4gICAgICAgIGRhdGFiYXNlQ29ubmVjdGlvblBhdGggPSBgJHt0aGlzLmkxOG4uYmlnUXVlcnl9LyR7YXV0aGVudGljYXRpb25UeXBlID09PSBcInNlcnZpY2VBdXRoZW50aWNhdGlvblwiXG4gICAgICAgICAgPyB0aGlzLmkxOG4uc2VydmljZUF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgOiB0aGlzLmkxOG4udXNlckF1dGhlbnRpY2F0aW9ufS8ke3Byb2plY3RJZH0vJHtkZWZhdWx0RGF0YXNldH1gO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJzbm93Zmxha2VcIjpcbiAgICAgICAgZGF0YWJhc2VDb25uZWN0aW9uUGF0aCA9IGAke3NlcnZlcn0vJHt1c2VyfS8ke3JvbGV9LyR7ZGF0YWJhc2V9LyR7c2NoZW1hfS8ke3dhcmVob3VzZX1gO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgYWRkSXRlbVN0YXRlLmRhdGFiYXNlQ29ubmVjdGlvblBhdGggPSBkYXRhYmFzZUNvbm5lY3Rpb25QYXRoO1xuICAgIHJldHVybiBkYXRhYmFzZUNvbm5lY3Rpb25QYXRoO1xuICB9XG4gIGFzeW5jIHZhbGlkYXRlQ29ubmVjdGlvbigpIHtcbiAgICBjb25zdCB7IGRhdGFTdG9yZUNvbm5lY3Rpb25UeXBlLCBwcm9qZWN0SWQsIGRlZmF1bHREYXRhc2V0LCBrZXlGaWxlQ29udGVudHMsIHJlZnJlc2hUb2tlbiwgdXNlciwgcGFzc3dvcmQsIGRhdGFiYXNlLCByb2xlLCBzZXJ2ZXIsIHdhcmVob3VzZSwgc2NoZW1hIH0gPSB0aGlzO1xuICAgIGxldCBwYXlsb2FkO1xuICAgIGNvbnN0IHsgb3JnSWQgfSA9IGNvbmZpZ1N0YXRlLnVzZXI7XG4gICAgdGhpcy5pbnZhbGlkTG9naW4gPSBmYWxzZTsgLy9yZXNldCBmaWVsZHMgd2l0aG91dCBlcnJvciBzdGF0ZVxuICAgIHRoaXMubG9hZGluZyA9IHRydWU7XG4gICAgdGhpcy5sb2FkZXJNZXNzYWdlID0gdGhpcy5pMThuLnZhbGlkYXRpbmc7XG4gICAgY29uc3Qga2V5RmlsZSA9IGtleUZpbGVDb250ZW50cyB8fCBcIlwiO1xuICAgIGNvbnN0IHJlZnJlc2hUb2tlbklucHV0ID0gcmVmcmVzaFRva2VuIHx8IFwiXCI7XG4gICAgaWYgKGRhdGFTdG9yZUNvbm5lY3Rpb25UeXBlID09PSBcImJpZ1F1ZXJ5XCIpIHtcbiAgICAgIGNvbnN0IGJpZ1F1ZXJ5UGF5bG9hZCA9IGF3YWl0IGNyZWF0ZUJpZ1F1ZXJ5RGF0YU9iamVjdChwcm9qZWN0SWQsIGRlZmF1bHREYXRhc2V0LCBrZXlGaWxlLCByZWZyZXNoVG9rZW5JbnB1dCk7XG4gICAgICBpZiAoYmlnUXVlcnlQYXlsb2FkID09PSBudWxsIHx8IGJpZ1F1ZXJ5UGF5bG9hZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogYmlnUXVlcnlQYXlsb2FkLmVycm9yKSB7XG4gICAgICAgIGlmIChiaWdRdWVyeVBheWxvYWQuZXJyb3IuY29kZSA9PT0gXCJpbnZhbGlkSlNPTlwiKSB7XG4gICAgICAgICAgdGhpcy52YWxpZEpzb24gPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmhhbmRsZUVycm9yKHsgY29kZTogYmlnUXVlcnlQYXlsb2FkLmVycm9yLmNvZGUgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBwYXlsb2FkID0gYmlnUXVlcnlQYXlsb2FkLnJlc3VsdDtcbiAgICAgICAgYWRkSXRlbVN0YXRlLmpkYmNDb25uZWN0aW9uID0gT2JqZWN0LmFzc2lnbih7fSwgcGF5bG9hZC5pbmZvLkpEQkNDb25uZWN0aW9uKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBwYXlsb2FkID0gY3JlYXRlU25vd2ZsYWtlRGF0YU9iamVjdCh7XG4gICAgICAgIHVzZXIsXG4gICAgICAgIHBhc3N3b3JkLFxuICAgICAgICBkYXRhYmFzZSxcbiAgICAgICAgcm9sZSxcbiAgICAgICAgc2VydmVyLFxuICAgICAgICB3YXJlaG91c2UsXG4gICAgICAgIHNjaGVtYVxuICAgICAgfSk7XG4gICAgICBhZGRJdGVtU3RhdGUuamRiY0Nvbm5lY3Rpb24gPSBPYmplY3QuYXNzaWduKHt9LCBwYXlsb2FkLmluZm8uSkRCQ0Nvbm5lY3Rpb24pO1xuICAgICAgYWRkSXRlbVN0YXRlLnR5cGVLZXl3b3JkcyA9IFsuLi5hZGRJdGVtU3RhdGUudHlwZUtleXdvcmRzLCBcIkNEV1wiLCBcInNub3dmbGFrZVwiXTtcbiAgICB9XG4gICAgY29uc3QgZmllbGRWYWx1ZSA9IGRhdGFTdG9yZUNvbm5lY3Rpb25UeXBlID09PSBcImJpZ1F1ZXJ5XCIgPyBwcm9qZWN0SWQgOiBkYXRhYmFzZTtcbiAgICBpdGVtUHJvcGVydGllc1N0YXRlLnRpdGxlID0gZm9ybWF0VGl0bGVGb3JEYXRhU3RvcmVJdGVtKGRhdGFTdG9yZUNvbm5lY3Rpb25UeXBlLCBmaWVsZFZhbHVlKTtcbiAgICBjb25zdCB7IHJlc3VsdCwgZXJyb3IgfSA9IGF3YWl0IHZhbGlkYXRlRGF0YXN0b3JlRm9yT25saW5lKG9yZ0lkLCBjb25maWdTdGF0ZS5wb3J0YWwsIHBheWxvYWQpO1xuICAgIGlmICgocmVzdWx0ID09PSBudWxsIHx8IHJlc3VsdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVzdWx0LnN0YXR1cykgPT09IFwic3VjY2Vzc1wiKSB7XG4gICAgICB0aGlzLm5ld0l0ZW1VcGRhdGVQYWdlLmVtaXQoXCJpdGVtUHJvcGVydGllc1wiKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgIHRoaXMuaGFuZGxlRXJyb3IoeyBjb2RlOiBlcnJvci5jb2RlIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuICBwcm9jZXNzRmlsZShmaWxlKSB7XG4gICAgaWYgKCFmaWxlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHsgZXh0ZW5zaW9uLCBmaWxlTmFtZSB9ID0gc2FuaXRpemVGaWxlSW5wdXQoZmlsZSk7XG4gICAgdGhpcy5rZXlGaWxlTmFtZSA9IGZpbGVOYW1lO1xuICAgIGlmIChleHRlbnNpb24gIT09IFwianNvblwiKSB7XG4gICAgICB0aGlzLnZhbGlkSnNvbiA9IGZhbHNlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnZhbGlkSnNvbiA9IHRydWU7XG4gICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICByZWFkZXIub25sb2FkID0gKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLmtleUZpbGVDb250ZW50cyA9IFN0cmluZyhldmVudC50YXJnZXQucmVzdWx0KTtcbiAgICB9O1xuICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGUpO1xuICB9XG4gIHRyaW1JbnB1dChpbnB1dCkge1xuICAgIHJldHVybiBpbnB1dC50cmltKCk7XG4gIH1cbiAgaGFuZGxlRXJyb3IoZXJyb3IpIHtcbiAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTtcbiAgICBsZXQgZXJyb3JUaXRsZSA9IHRoaXMuaTE4bi5lcnJvcnMudmFsaWRhdGlvbkZhaWxlZFRpdGxlO1xuICAgIGxldCBlcnJvck1lc3NhZ2UgPSB0aGlzLmkxOG4uZXJyb3JzLnZhbGlkYXRpb25GYWlsZWREZXNjcmlwdGlvbjtcbiAgICBzd2l0Y2ggKGVycm9yLmNvZGUpIHtcbiAgICAgIGNhc2UgXCJpbnZhbGlkSlNPTlwiOlxuICAgICAgICBlcnJvclRpdGxlID0gdWlTdG9yZVN0YXRlLmkxOG4uaXRlbVByb3BlcnRpZXMuaW52YWxpZEpTT04udGl0bGU7XG4gICAgICAgIGVycm9yTWVzc2FnZSA9IHVpU3RvcmVTdGF0ZS5pMThuLml0ZW1Qcm9wZXJ0aWVzLmludmFsaWRKU09OLmRlc2NyaXB0aW9uO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJpbnZhbGlkVXNlcm5hbWVPclBhc3N3b3JkXCI6XG4gICAgICAgIHRoaXMuaW52YWxpZExvZ2luID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHRoaXMuZXJyb3IgPSB7XG4gICAgICB0aXRsZTogZXJyb3JUaXRsZSxcbiAgICAgIGRlc2NyaXB0aW9uOiBlcnJvck1lc3NhZ2VcbiAgICB9O1xuICB9XG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IGRhdGFTdG9yZUNvbm5lY3Rpb25UeXBlLCBpMThuLCBzZXJ2ZXIsIGF1dGhlbnRpY2F0aW9uVHlwZSwgcHJvamVjdElkLCBkZWZhdWx0RGF0YXNldCwgcm9sZSwgZGF0YWJhc2UsIHNjaGVtYSwgd2FyZWhvdXNlLCB2YWxpZEpzb24sIGVycm9yLCBpbnZhbGlkTG9naW4gfSA9IHRoaXM7XG4gICAgcmV0dXJuIChoKFwiZGl2XCIsIG51bGwsIGgoXCJhcmNnaXMtbmV3LWl0ZW0tbG9hZGVyXCIsIHsgdHlwZTogdGhpcy5sb2FkZXJUeXBlLCBhY3RpdmU6IHRoaXMubG9hZGluZywgdGV4dDogdGhpcy5sb2FkZXJNZXNzYWdlIH0pLCBoKFwiYXJjZ2lzLW5ldy1pdGVtLWRlc2NyaXB0aW9uXCIsIHsgY2xhc3M6IFwiaGVhZGVyXCIsIGhlYWRlcjogaTE4bi5kYXRhU3RvcmVDb25uZWN0aW9uLCBjb250ZW50OiBkYXRhU3RvcmVDb25uZWN0aW9uVHlwZSA9PT0gXCJiaWdRdWVyeVwiID8gaTE4bi5iaWdRdWVyeSA6IGkxOG4uc25vd2ZsYWtlIH0pLCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwiY29uZmlndXJlLWZvcm1cIiB9LCBkYXRhU3RvcmVDb25uZWN0aW9uVHlwZSA9PT0gXCJzbm93Zmxha2VcIiAmJiAoaChcImNhbGNpdGUtbGFiZWxcIiwgeyBjbGFzczogXCJmaWVsZFwiIH0sIGkxOG4uc2VydmVyLCBoKFwiY2FsY2l0ZS1pbnB1dFwiLCB7IHBsYWNlaG9sZGVyOiBcInNlcnZlcl9uYW1lLmNvbVwiLCB2YWx1ZTogc2VydmVyLCBvbklucHV0OiAoZSkgPT4ge1xuICAgICAgICB0aGlzLnNlcnZlciA9IHRoaXMudHJpbUlucHV0KGUudGFyZ2V0LnZhbHVlKTtcbiAgICAgIH0sIHJlcXVpcmVkOiB0cnVlIH0pLCAhdGhpcy5zZXJ2ZXIgJiYgdGhpcy5lbXB0eUZpZWxkc0V4aXN0ICYmIChoKFwiY2FsY2l0ZS1pbnB1dC1tZXNzYWdlXCIsIHsgaWNvbjogXCJleGNsYW1hdGlvbi1tYXJrLXRyaWFuZ2xlXCIsIHN0YXR1czogXCJpbnZhbGlkXCIgfSwgaTE4bi5lcnJvcnMubm9TZXJ2ZXIpKSkpLCBoKFwiY2FsY2l0ZS1sYWJlbFwiLCB7IGNsYXNzOiBcImZpZWxkXCIgfSwgaTE4bi5hdXRoZW50aWNhdGlvblR5cGUsIGgoXCJjYWxjaXRlLXNlbGVjdFwiLCB7IHZhbHVlOiBhdXRoZW50aWNhdGlvblR5cGUsIGxhYmVsOiBcImF1dGhlbnRpY2F0aW9uLXR5cGVcIiwgZGlzYWJsZWQ6IHRydWUsIG9uQ2FsY2l0ZVNlbGVjdENoYW5nZTogKGUpID0+IHtcbiAgICAgICAgdGhpcy5hdXRoZW50aWNhdGlvblR5cGUgPSBlLnRhcmdldC5zZWxlY3RlZE9wdGlvbi52YWx1ZTtcbiAgICAgIH0gfSwgZGF0YVN0b3JlQ29ubmVjdGlvblR5cGUgPT09IFwiYmlnUXVlcnlcIiA/IChoKFwiY2FsY2l0ZS1vcHRpb25cIiwgeyB2YWx1ZTogXCJzZXJ2aWNlQXV0aGVudGljYXRpb25cIiB9LCBpMThuLnNlcnZpY2VBdXRoZW50aWNhdGlvbikpIDogKGgoXCJjYWxjaXRlLW9wdGlvblwiLCB7IHZhbHVlOiBcInVzZXJBdXRoZW50aWNhdGlvblwiIH0sIGkxOG4udXNlckF1dGhlbnRpY2F0aW9uKSkpKSwgZGF0YVN0b3JlQ29ubmVjdGlvblR5cGUgPT09IFwiYmlnUXVlcnlcIiAmJiAoaChcImRpdlwiLCB7IGNsYXNzOiBcImNvbmZpZ3VyZUJpZ1F1ZXJ5XCIgfSwgYXV0aGVudGljYXRpb25UeXBlID09PSBcInNlcnZpY2VBdXRoZW50aWNhdGlvblwiID8gKGgoXCJjYWxjaXRlLWxhYmVsXCIsIHsgY2xhc3M6IFwiZmllbGQga2V5RmlsZUlucHV0XCIgfSwgaTE4bi5rZXlGaWxlLCBoKFwiY2FsY2l0ZS1pbnB1dFwiLCB7IHN0YXR1czogIXZhbGlkSnNvbiB8fCAoIXRoaXMua2V5RmlsZU5hbWUgJiYgdGhpcy5lbXB0eUZpZWxkc0V4aXN0KVxuICAgICAgICA/IFwiaW52YWxpZFwiXG4gICAgICAgIDogXCJ2YWxpZFwiLCBcInJlYWQtb25seVwiOiB0cnVlLCB2YWx1ZTogdGhpcy5rZXlGaWxlTmFtZSwgcmVxdWlyZWQ6IHRydWUgfSwgaChcImNhbGNpdGUtYnV0dG9uXCIsIHsgXCJpY29uLXN0YXJ0XCI6IFwiZm9sZGVyXCIsIHNsb3Q6IFwiYWN0aW9uXCIsIGtpbmQ6IFwibmV1dHJhbFwiLCBhcHBlYXJhbmNlOiBcIm91dGxpbmVcIiwgb25DbGljazogKCkgPT4geyB2YXIgX2E7IHJldHVybiAoX2EgPSB0aGlzLmlucHV0RmlsZUVsZW1lbnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jbGljaygpOyB9IH0sIGkxOG4uc2VsZWN0S2V5RmlsZSkpLCBoKFwiaW5wdXRcIiwgeyBjbGFzczogXCJoaWRkZW5cIiwgdHlwZTogXCJmaWxlXCIsIGlkOiBcInNub3dmbGFrZS1rZXktZmlsZVwiLCBhY2NlcHQ6IFwiLmpzb25cIiwgb25DaGFuZ2U6IHRoaXMuaGFuZGxlRmlsZUlucHV0Q2hhbmdlLCByZWY6IChlbCkgPT4gKHRoaXMuaW5wdXRGaWxlRWxlbWVudCA9IGVsKSB9KSwgaChcImNhbGNpdGUtaW5wdXQtbWVzc2FnZVwiLCB7IGljb246ICF2YWxpZEpzb24gfHwgKCF0aGlzLmtleUZpbGVOYW1lICYmIHRoaXMuZW1wdHlGaWVsZHNFeGlzdClcbiAgICAgICAgPyBcImV4Y2xhbWF0aW9uLW1hcmstdHJpYW5nbGVcIlxuICAgICAgICA6IFwiaW5mb3JtYXRpb25cIiwgc3RhdHVzOiAhdmFsaWRKc29uIHx8ICghdGhpcy5rZXlGaWxlTmFtZSAmJiB0aGlzLmVtcHR5RmllbGRzRXhpc3QpXG4gICAgICAgID8gXCJpbnZhbGlkXCJcbiAgICAgICAgOiBcImlkbGVcIiB9LCAhdGhpcy5rZXlGaWxlTmFtZSAmJiB0aGlzLmVtcHR5RmllbGRzRXhpc3RcbiAgICAgID8gaTE4bi5lcnJvcnMubm9LZXlGaWxlXG4gICAgICA6IHZhbGlkSnNvblxuICAgICAgICA/IGkxOG4uanNvbk9ubHlcbiAgICAgICAgOiBpMThuLm5vdEpzb24pKSkgOiAoaChcImNhbGNpdGUtbGFiZWxcIiwgeyBjbGFzczogXCJmaWVsZCByZWZyZXNoVG9rZW5JbnB1dFwiIH0sIGkxOG4ucmVmcmVzaFRva2VuLCBoKFwiY2FsY2l0ZS1pbnB1dFwiLCB7IHR5cGU6IFwicGFzc3dvcmRcIiwgc3RhdHVzOiBcInZhbGlkXCIsIG9uSW5wdXQ6IChlKSA9PiB7XG4gICAgICAgIHRoaXMucmVmcmVzaFRva2VuID0gZS50YXJnZXQudmFsdWU7XG4gICAgICB9IH0pKSksIGgoXCJjYWxjaXRlLWxhYmVsXCIsIHsgY2xhc3M6IFwiZmllbGRcIiB9LCBpMThuLnByb2plY3RJZCwgaChcImNhbGNpdGUtaW5wdXRcIiwgeyB2YWx1ZTogcHJvamVjdElkLCBvbklucHV0OiAoZSkgPT4ge1xuICAgICAgICB0aGlzLnByb2plY3RJZCA9IHRoaXMudHJpbUlucHV0KGUudGFyZ2V0LnZhbHVlKTtcbiAgICAgIH0sIHJlcXVpcmVkOiB0cnVlIH0pLCAhdGhpcy5wcm9qZWN0SWQgJiYgdGhpcy5lbXB0eUZpZWxkc0V4aXN0ICYmIChoKFwiY2FsY2l0ZS1pbnB1dC1tZXNzYWdlXCIsIHsgaWNvbjogXCJleGNsYW1hdGlvbi1tYXJrLXRyaWFuZ2xlXCIsIHN0YXR1czogXCJpbnZhbGlkXCIgfSwgaTE4bi5lcnJvcnMubm9Qcm9qZWN0SWQpKSksIGF1dGhlbnRpY2F0aW9uVHlwZSA9PT0gXCJ1c2VyQXV0aGVudGljYXRpb25cIiAmJiAoaChcImNhbGNpdGUtbGFiZWxcIiwgeyBjbGFzczogXCJmaWVsZFwiIH0sIGkxOG4uZGVmYXVsdERhdGFzZXQsIGgoXCJjYWxjaXRlLWlucHV0XCIsIHsgdmFsdWU6IGRlZmF1bHREYXRhc2V0LCBvbklucHV0OiAoZSkgPT4ge1xuICAgICAgICB0aGlzLmRlZmF1bHREYXRhc2V0ID0gdGhpcy50cmltSW5wdXQoZS50YXJnZXQudmFsdWUpO1xuICAgICAgfSB9KSkpKSksIGRhdGFTdG9yZUNvbm5lY3Rpb25UeXBlID09PSBcInNub3dmbGFrZVwiICYmIChoKFwiZGl2XCIsIHsgY2xhc3M6IFwiY29uZmlndXJlU25vd2ZsYWtlXCIgfSwgaChcImRpdlwiLCB7IGNsYXNzOiBcImZpZWxkIGZpbGwtY3JlZGVudGlhbHNcIiB9LCBoKFwiY2FsY2l0ZS1sYWJlbFwiLCB7IGNsYXNzOiBcImNyZWRlbnRpYWxzXCIgfSwgaChcImRpdlwiLCB7IGNsYXNzOiBcInVzZXJuYW1lXCIgfSwgaTE4bi51c2VybmFtZSwgXCIgXCIsICgoIXRoaXMudXNlciAmJiB0aGlzLmVtcHR5RmllbGRzRXhpc3QpIHx8IGludmFsaWRMb2dpbikgJiYgKGgoXCJzcGFuXCIsIHsgY2xhc3M6IFwiYXN0ZXJpc2tcIiB9LCBcIipcIikpKSwgaChcImNhbGNpdGUtaW5wdXRcIiwgeyBvbklucHV0OiAoZSkgPT4ge1xuICAgICAgICB0aGlzLnVzZXIgPSB0aGlzLnRyaW1JbnB1dChlLnRhcmdldC52YWx1ZSk7XG4gICAgICB9LCByZXF1aXJlZDogdHJ1ZSB9KSwgKCgoIXRoaXMudXNlciB8fCAhdGhpcy5wYXNzd29yZCkgJiYgdGhpcy5lbXB0eUZpZWxkc0V4aXN0KSB8fCBpbnZhbGlkTG9naW4pICYmIChoKFwiY2FsY2l0ZS1pbnB1dC1tZXNzYWdlXCIsIHsgaWNvbjogXCJleGNsYW1hdGlvbi1tYXJrLXRyaWFuZ2xlXCIsIHN0YXR1czogXCJpbnZhbGlkXCIgfSwgaTE4bi5lcnJvcnMuaW5jb3JyZWN0TG9naW4pKSksIGgoXCJjYWxjaXRlLWxhYmVsXCIsIHsgY2xhc3M6IFwiY3JlZGVudGlhbHNcIiB9LCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwicGFzc3dvcmRcIiB9LCBpMThuLnBhc3N3b3JkLCBcIiBcIiwgKCghdGhpcy5wYXNzd29yZCAmJiB0aGlzLmVtcHR5RmllbGRzRXhpc3QpIHx8IGludmFsaWRMb2dpbikgJiYgKGgoXCJzcGFuXCIsIHsgY2xhc3M6IFwiYXN0ZXJpc2tcIiB9LCBcIipcIikpKSwgaChcImNhbGNpdGUtaW5wdXRcIiwgeyBjbGFzczogXCJjcmVkZW50aWFscyBwYXNzd29yZFwiLCB0eXBlOiBcInBhc3N3b3JkXCIsIG9uSW5wdXQ6IChlKSA9PiB7XG4gICAgICAgIHRoaXMucGFzc3dvcmQgPSB0aGlzLnRyaW1JbnB1dChlLnRhcmdldC52YWx1ZSk7XG4gICAgICB9LCByZXF1aXJlZDogdHJ1ZSB9KSkpLCBoKFwiY2FsY2l0ZS1sYWJlbFwiLCB7IGNsYXNzOiBcImZpZWxkXCIgfSwgaTE4bi5kYXRhYmFzZSwgaChcImNhbGNpdGUtaW5wdXRcIiwgeyB2YWx1ZTogZGF0YWJhc2UsIG9uSW5wdXQ6IChlKSA9PiB7XG4gICAgICAgIHRoaXMuZGF0YWJhc2UgPSB0aGlzLnRyaW1JbnB1dChlLnRhcmdldC52YWx1ZSk7XG4gICAgICB9LCByZXF1aXJlZDogdHJ1ZSB9KSwgIXRoaXMuZGF0YWJhc2UgJiYgdGhpcy5lbXB0eUZpZWxkc0V4aXN0ICYmIChoKFwiY2FsY2l0ZS1pbnB1dC1tZXNzYWdlXCIsIHsgaWNvbjogXCJleGNsYW1hdGlvbi1tYXJrLXRyaWFuZ2xlXCIsIHN0YXR1czogXCJpbnZhbGlkXCIgfSwgaTE4bi5lcnJvcnMubm9EYXRhYmFzZSkpKSwgaChcImNhbGNpdGUtbGFiZWxcIiwgeyBjbGFzczogXCJmaWVsZFwiIH0sIGkxOG4uc2NoZW1hLCBoKFwiY2FsY2l0ZS1pbnB1dFwiLCB7IHZhbHVlOiBzY2hlbWEsIG9uSW5wdXQ6IChlKSA9PiB7XG4gICAgICAgIHRoaXMuc2NoZW1hID0gdGhpcy50cmltSW5wdXQoZS50YXJnZXQudmFsdWUpO1xuICAgICAgfSwgcmVxdWlyZWQ6IHRydWUgfSksICF0aGlzLnNjaGVtYSAmJiB0aGlzLmVtcHR5RmllbGRzRXhpc3QgJiYgKGgoXCJjYWxjaXRlLWlucHV0LW1lc3NhZ2VcIiwgeyBpY29uOiBcImV4Y2xhbWF0aW9uLW1hcmstdHJpYW5nbGVcIiwgc3RhdHVzOiBcImludmFsaWRcIiB9LCBpMThuLmVycm9ycy5ub1NjaGVtYSkpKSwgaChcImNhbGNpdGUtbGFiZWxcIiwgeyBjbGFzczogXCJmaWVsZFwiIH0sIGkxOG4ud2FyZWhvdXNlLCBoKFwiY2FsY2l0ZS1pbnB1dFwiLCB7IHZhbHVlOiB3YXJlaG91c2UsIG9uSW5wdXQ6IChlKSA9PiB7XG4gICAgICAgIHRoaXMud2FyZWhvdXNlID0gdGhpcy50cmltSW5wdXQoZS50YXJnZXQudmFsdWUpO1xuICAgICAgfSwgcmVxdWlyZWQ6IHRydWUgfSksICF0aGlzLndhcmVob3VzZSAmJiB0aGlzLmVtcHR5RmllbGRzRXhpc3QgJiYgKGgoXCJjYWxjaXRlLWlucHV0LW1lc3NhZ2VcIiwgeyBpY29uOiBcImV4Y2xhbWF0aW9uLW1hcmstdHJpYW5nbGVcIiwgc3RhdHVzOiBcImludmFsaWRcIiB9LCBpMThuLmVycm9ycy5ub1dhcmVob3VzZSkpKSwgaChcImNhbGNpdGUtbGFiZWxcIiwgeyBjbGFzczogXCJmaWVsZFwiIH0sIGkxOG4ucm9sZSwgaChcImNhbGNpdGUtaW5wdXRcIiwgeyB2YWx1ZTogcm9sZSwgb25JbnB1dDogKGUpID0+IHtcbiAgICAgICAgdGhpcy5yb2xlID0gdGhpcy50cmltSW5wdXQoZS50YXJnZXQudmFsdWUpO1xuICAgICAgfSwgcmVxdWlyZWQ6IHRydWUgfSksICF0aGlzLnJvbGUgJiYgdGhpcy5lbXB0eUZpZWxkc0V4aXN0ICYmIChoKFwiY2FsY2l0ZS1pbnB1dC1tZXNzYWdlXCIsIHsgaWNvbjogXCJleGNsYW1hdGlvbi1tYXJrLXRyaWFuZ2xlXCIsIHN0YXR1czogXCJpbnZhbGlkXCIgfSwgaTE4bi5lcnJvcnMubm9Sb2xlKSkpKSkpLCBoKFwiYXJjZ2lzLW5ldy1pdGVtLWFsZXJ0XCIsIHsgaGVhZGluZzogZXJyb3IgPT09IG51bGwgfHwgZXJyb3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVycm9yLnRpdGxlLCBkZXNjcmlwdGlvbjogZXJyb3IgPT09IG51bGwgfHwgZXJyb3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVycm9yLmRlc2NyaXB0aW9uLCBhY3RpdmU6ICEhZXJyb3IsIG9uQWxlcnREaXNtaXNzOiAoKSA9PiAodGhpcy5lcnJvciA9IG51bGwpIH0pKSk7XG4gIH1cbn07XG5BcmNnaXNOZXdJdGVtUGFnZXNEYXRhU3RvcmVEYXRhYmFzZUNyZWRlbnRpYWxzLnN0eWxlID0gYXJjZ2lzTmV3SXRlbVBhZ2VzRGF0YVN0b3JlRGF0YWJhc2VDcmVkZW50aWFsc0NzcztcblxuZXhwb3J0IHsgQXJjZ2lzTmV3SXRlbVBhZ2VzRGF0YVN0b3JlRGF0YWJhc2VDcmVkZW50aWFscyBhcyBhcmNnaXNfbmV3X2l0ZW1fcGFnZXNfZGF0YV9zdG9yZV9kYXRhYmFzZV9jcmVkZW50aWFscyB9O1xuIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogdjMuMC45OVxuICovXG5jb25zdCBmb3JtYXRUaXRsZUZvckRhdGFTdG9yZUl0ZW0gPSAocHJvdmlkZXIsIGZpZWxkVmFsdWUpID0+IHtcbiAgbGV0IHRpdGxlO1xuICBjb25zdCBpbml0aWFsVGl0bGUgPSBmaWVsZFZhbHVlICE9PSBudWxsICYmIGZpZWxkVmFsdWUgIT09IHZvaWQgMCA/IGZpZWxkVmFsdWUgOiBcIlwiO1xuICBzd2l0Y2ggKHByb3ZpZGVyKSB7XG4gICAgY2FzZSBcImFtYXpvblwiOlxuICAgICAgdGl0bGUgPSBgQW1hem9uUzNfJHtpbml0aWFsVGl0bGV9YDtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJhenVyZVwiOlxuICAgICAgdGl0bGUgPSBgTWljcm9zb2Z0X0F6dXJlX1N0b3JhZ2VfJHtpbml0aWFsVGl0bGV9YDtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJiaWdRdWVyeVwiOlxuICAgICAgdGl0bGUgPSBgQmlnUXVlcnlfJHtpbml0aWFsVGl0bGV9YDtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJzbm93Zmxha2VcIjpcbiAgICAgIHRpdGxlID0gYFNub3dmbGFrZV8ke2luaXRpYWxUaXRsZX1gO1xuICAgICAgYnJlYWs7XG4gIH1cbiAgcmV0dXJuIHRpdGxlLnJlcGxhY2UoLyAvZywgXCJfXCIpLnJlcGxhY2UoLy0vZywgXCJfXCIpO1xufTtcblxuZXhwb3J0IHsgZm9ybWF0VGl0bGVGb3JEYXRhU3RvcmVJdGVtIGFzIGYgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==