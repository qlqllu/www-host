"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_ba-infographic_node_modules_arcgis_business-analyst-components_dis-be199a"],{

/***/ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/calcite-input-time-picker.entry.js":
/*!****************************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/calcite-input-time-picker.entry.js ***!
  \****************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   calcite_input_time_picker: () => (/* binding */ InputTimePicker)
/* harmony export */ });
/* harmony import */ var _index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-4e647411.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/index-4e647411.js");
/* harmony import */ var _form_98fe0e7c_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./form-98fe0e7c.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/form-98fe0e7c.js");
/* harmony import */ var _guid_88a3729f_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./guid-88a3729f.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/guid-88a3729f.js");
/* harmony import */ var _interactive_29995522_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./interactive-29995522.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/interactive-29995522.js");
/* harmony import */ var _key_b75491c4_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./key-b75491c4.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/key-b75491c4.js");
/* harmony import */ var _label_6d1e3168_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./label-6d1e3168.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/label-6d1e3168.js");
/* harmony import */ var _loadable_cc14d728_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./loadable-cc14d728.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/loadable-cc14d728.js");
/* harmony import */ var _locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./locale-f7b2fbb0.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/locale-f7b2fbb0.js");
/* harmony import */ var _time_0dbb0f96_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./time-0dbb0f96.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/time-0dbb0f96.js");














const inputTimePickerCss = "@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host([disabled]){pointer-events:none;cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host{display:inline-block;-webkit-user-select:none;user-select:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}::slotted(input[slot=hidden-form-input]){margin:0 !important;opacity:0 !important;outline:none !important;padding:0 !important;position:absolute !important;inset:0 !important;transform:none !important;-webkit-appearance:none !important;z-index:-1 !important}";

const InputTimePicker = class {
  constructor(hostRef) {
    (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.calciteInputTimePickerChange = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteInputTimePickerChange", 7);
    /** whether the value of the input was changed as a result of user typing or not */
    this.internalValueChange = false;
    this.previousValidValue = null;
    this.referenceElementId = `input-time-picker-${(0,_guid_88a3729f_js__WEBPACK_IMPORTED_MODULE_1__.g)()}`;
    //--------------------------------------------------------------------------
    //
    //  Event Listeners
    //
    //--------------------------------------------------------------------------
    this.calciteInternalInputBlurHandler = () => {
      this.open = false;
      const shouldIncludeSeconds = this.shouldIncludeSeconds();
      const { effectiveLocale: locale, numberingSystem, value, calciteInputEl } = this;
      _locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_2__.n.numberFormatOptions = {
        locale,
        numberingSystem,
        useGrouping: false
      };
      const delocalizedValue = _locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_2__.n.delocalize(calciteInputEl.value);
      const localizedInputValue = (0,_time_0dbb0f96_js__WEBPACK_IMPORTED_MODULE_3__.l)({
        value: delocalizedValue,
        includeSeconds: shouldIncludeSeconds,
        locale,
        numberingSystem
      });
      this.setInputValue(localizedInputValue ||
        (0,_time_0dbb0f96_js__WEBPACK_IMPORTED_MODULE_3__.l)({ value, locale, numberingSystem, includeSeconds: shouldIncludeSeconds }));
    };
    this.calciteInternalInputFocusHandler = (event) => {
      if (!this.readOnly) {
        this.open = true;
        event.stopPropagation();
      }
    };
    this.calciteInputInputHandler = (event) => {
      const target = event.target;
      _locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_2__.n.numberFormatOptions = {
        locale: this.effectiveLocale,
        numberingSystem: this.numberingSystem,
        useGrouping: false
      };
      const delocalizedValue = _locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_2__.n.delocalize(target.value);
      this.setValue({ value: delocalizedValue });
      // only translate the numerals until blur
      const localizedValue = delocalizedValue
        .split("")
        .map((char) => _key_b75491c4_js__WEBPACK_IMPORTED_MODULE_4__.n.includes(char)
        ? _locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_2__.n.numberFormatter.format(Number(char))
        : char)
        .join("");
      this.setInputValue(localizedValue);
    };
    this.timePickerChangeHandler = (event) => {
      event.stopPropagation();
      const target = event.target;
      const value = target.value;
      this.setValue({ value, origin: "time-picker" });
    };
    // --------------------------------------------------------------------------
    //
    //  Private Methods
    //
    // --------------------------------------------------------------------------
    this.keyDownHandler = (event) => {
      const { defaultPrevented, key } = event;
      if (defaultPrevented) {
        return;
      }
      if (key === "Enter") {
        if ((0,_form_98fe0e7c_js__WEBPACK_IMPORTED_MODULE_5__.s)(this)) {
          event.preventDefault();
        }
      }
      if (key === "Escape" && this.open) {
        this.open = false;
        event.preventDefault();
      }
    };
    this.setCalcitePopoverEl = (el) => {
      this.popoverEl = el;
    };
    this.setCalciteInputEl = (el) => {
      this.calciteInputEl = el;
    };
    this.setCalciteTimePickerEl = (el) => {
      this.calciteTimePickerEl = el;
    };
    this.setInputValue = (newInputValue) => {
      if (!this.calciteInputEl) {
        return;
      }
      this.calciteInputEl.value = newInputValue;
    };
    this.setValue = ({ value, origin = "input" }) => {
      const previousValue = this.value;
      const newValue = (0,_time_0dbb0f96_js__WEBPACK_IMPORTED_MODULE_3__.f)(value);
      const newLocalizedValue = (0,_time_0dbb0f96_js__WEBPACK_IMPORTED_MODULE_3__.l)({
        value: newValue,
        locale: this.effectiveLocale,
        numberingSystem: this.numberingSystem,
        includeSeconds: this.shouldIncludeSeconds()
      });
      this.internalValueChange = origin !== "external" && origin !== "loading";
      const shouldEmit = origin !== "loading" &&
        origin !== "external" &&
        ((value !== this.previousValidValue && !value) ||
          !!(!this.previousValidValue && newValue) ||
          (newValue !== this.previousValidValue && newValue));
      if (value) {
        if (shouldEmit) {
          this.previousValidValue = newValue;
        }
        if (newValue && newValue !== this.value) {
          this.value = newValue;
        }
        this.localizedValue = newLocalizedValue;
      }
      else {
        this.value = value;
        this.localizedValue = null;
      }
      if (origin === "time-picker" || origin === "external") {
        this.setInputValue(newLocalizedValue);
      }
      if (shouldEmit) {
        const changeEvent = this.calciteInputTimePickerChange.emit();
        if (changeEvent.defaultPrevented) {
          this.internalValueChange = false;
          this.value = previousValue;
          this.setInputValue(previousValue);
          this.previousValidValue = previousValue;
        }
        else {
          this.previousValidValue = newValue;
        }
      }
    };
    this.open = false;
    this.disabled = false;
    this.readOnly = false;
    this.messagesOverrides = undefined;
    this.name = undefined;
    this.numberingSystem = undefined;
    this.required = false;
    this.scale = "m";
    this.overlayPositioning = "absolute";
    this.placement = "auto";
    this.step = 60;
    this.value = null;
    this.effectiveLocale = "";
    this.localizedValue = undefined;
  }
  openHandler(value) {
    if (this.disabled || this.readOnly) {
      this.open = false;
      return;
    }
    if (value) {
      this.reposition(true);
    }
  }
  handleDisabledAndReadOnlyChange(value) {
    if (!value) {
      this.open = false;
    }
  }
  valueWatcher(newValue) {
    if (!this.internalValueChange) {
      this.setValue({ value: newValue, origin: "external" });
    }
    this.internalValueChange = false;
  }
  effectiveLocaleWatcher() {
    this.setInputValue((0,_time_0dbb0f96_js__WEBPACK_IMPORTED_MODULE_3__.l)({
      value: this.value,
      locale: this.effectiveLocale,
      numberingSystem: this.numberingSystem,
      includeSeconds: this.shouldIncludeSeconds()
    }));
  }
  clickHandler(event) {
    if (event.composedPath().includes(this.calciteTimePickerEl)) {
      return;
    }
    this.setFocus();
  }
  timePickerBlurHandler(event) {
    event.preventDefault();
    event.stopPropagation();
    this.open = false;
  }
  timePickerFocusHandler(event) {
    event.preventDefault();
    event.stopPropagation();
    if (!this.readOnly) {
      this.open = true;
    }
  }
  // --------------------------------------------------------------------------
  //
  //  Public Methods
  //
  // --------------------------------------------------------------------------
  /** Sets focus on the component. */
  async setFocus() {
    await (0,_loadable_cc14d728_js__WEBPACK_IMPORTED_MODULE_6__.c)(this);
    this.el.focus();
  }
  /**
   * Updates the position of the component.
   *
   * @param delayed
   */
  async reposition(delayed = false) {
    this.popoverEl?.reposition(delayed);
  }
  onLabelClick() {
    this.setFocus();
  }
  shouldIncludeSeconds() {
    return this.step < 60;
  }
  //--------------------------------------------------------------------------
  //
  //  Lifecycle
  //
  //--------------------------------------------------------------------------
  connectedCallback() {
    (0,_locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_2__.c)(this);
    if (this.value) {
      this.setValue({ value: (0,_time_0dbb0f96_js__WEBPACK_IMPORTED_MODULE_3__.i)(this.value) ? this.value : undefined, origin: "loading" });
    }
    (0,_label_6d1e3168_js__WEBPACK_IMPORTED_MODULE_7__.c)(this);
    (0,_form_98fe0e7c_js__WEBPACK_IMPORTED_MODULE_5__.c)(this);
  }
  componentWillLoad() {
    (0,_loadable_cc14d728_js__WEBPACK_IMPORTED_MODULE_6__.a)(this);
  }
  componentDidLoad() {
    (0,_loadable_cc14d728_js__WEBPACK_IMPORTED_MODULE_6__.s)(this);
    this.setInputValue(this.localizedValue);
  }
  disconnectedCallback() {
    (0,_label_6d1e3168_js__WEBPACK_IMPORTED_MODULE_7__.d)(this);
    (0,_form_98fe0e7c_js__WEBPACK_IMPORTED_MODULE_5__.d)(this);
    (0,_locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_2__.d)(this);
  }
  componentDidRender() {
    (0,_interactive_29995522_js__WEBPACK_IMPORTED_MODULE_8__.u)(this);
  }
  // --------------------------------------------------------------------------
  //
  //  Render Methods
  //
  // --------------------------------------------------------------------------
  render() {
    const popoverId = `${this.referenceElementId}-popover`;
    return ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.H, { onKeyDown: this.keyDownHandler }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { "aria-controls": popoverId, "aria-haspopup": "dialog", "aria-label": this.name, "aria-owns": popoverId, id: this.referenceElementId, role: "combobox" }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { disabled: this.disabled, icon: "clock", label: (0,_label_6d1e3168_js__WEBPACK_IMPORTED_MODULE_7__.g)(this), onCalciteInputInput: this.calciteInputInputHandler, onCalciteInternalInputBlur: this.calciteInternalInputBlurHandler, onCalciteInternalInputFocus: this.calciteInternalInputFocusHandler, readOnly: this.readOnly, ref: this.setCalciteInputEl, scale: this.scale, step: this.step })), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-popover", { focusTrapDisabled: true, id: popoverId, label: "Time Picker", open: this.open, overlayPositioning: this.overlayPositioning, placement: this.placement, ref: this.setCalcitePopoverEl, referenceElement: this.referenceElementId, triggerDisabled: true }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-time-picker", { lang: this.effectiveLocale, messageOverrides: this.messagesOverrides, numberingSystem: this.numberingSystem, onCalciteInternalTimePickerChange: this.timePickerChangeHandler, ref: this.setCalciteTimePickerEl, scale: this.scale, step: this.step, value: this.value })), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)(_form_98fe0e7c_js__WEBPACK_IMPORTED_MODULE_5__.H, { component: this })));
  }
  static get delegatesFocus() { return true; }
  get el() { return (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.g)(this); }
  static get watchers() { return {
    "open": ["openHandler"],
    "disabled": ["handleDisabledAndReadOnlyChange"],
    "readOnly": ["handleDisabledAndReadOnlyChange"],
    "value": ["valueWatcher"],
    "effectiveLocale": ["effectiveLocaleWatcher"]
  }; }
};
InputTimePicker.style = inputTimePickerCss;



//# sourceMappingURL=calcite-input-time-picker.entry.js.map

/***/ }),

/***/ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/time-0dbb0f96.js":
/*!**********************************************************************************************************************************************!*\
  !*** ./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/time-0dbb0f96.js ***!
  \**********************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ localizeTimeStringToParts),
/* harmony export */   b: () => (/* binding */ getTimeParts),
/* harmony export */   c: () => (/* binding */ formatTimePart),
/* harmony export */   d: () => (/* binding */ localizeTimePart),
/* harmony export */   e: () => (/* binding */ getLocaleHourCycle),
/* harmony export */   f: () => (/* binding */ formatTimeString),
/* harmony export */   g: () => (/* binding */ getMeridiem),
/* harmony export */   i: () => (/* binding */ isValidTime),
/* harmony export */   l: () => (/* binding */ localizeTimeString),
/* harmony export */   m: () => (/* binding */ maxTenthForMinuteAndSecond),
/* harmony export */   p: () => (/* binding */ parseTimeString)
/* harmony export */ });
/* harmony import */ var _locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./locale-f7b2fbb0.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/locale-f7b2fbb0.js");


/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.5
 */
const maxTenthForMinuteAndSecond = 5;
function createLocaleDateTimeFormatter(locale, numberingSystem, includeSeconds = true) {
  try {
    const options = {
      hour: "2-digit",
      minute: "2-digit",
      timeZone: "UTC",
      numberingSystem: (0,_locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_0__.a)(numberingSystem)
    };
    if (includeSeconds) {
      options.second = "2-digit";
    }
    return new Intl.DateTimeFormat((0,_locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_0__.g)(locale), options);
  }
  catch (error) {
    throw new Error(`Invalid locale supplied while attempting to create a DateTime formatter: ${locale}`);
  }
}
function formatTimePart(number) {
  const numberAsString = number.toString();
  return number >= 0 && number <= 9 ? numberAsString.padStart(2, "0") : numberAsString;
}
function formatTimeString(value) {
  if (!isValidTime(value)) {
    return null;
  }
  const [hourString, minuteString, secondString] = value.split(":");
  const hour = formatTimePart(parseInt(hourString));
  const minute = formatTimePart(parseInt(minuteString));
  if (secondString) {
    const second = formatTimePart(parseInt(secondString));
    return `${hour}:${minute}:${second}`;
  }
  return `${hour}:${minute}`;
}
function getLocaleHourCycle(locale, numberingSystem) {
  const formatter = createLocaleDateTimeFormatter(locale, numberingSystem);
  const parts = formatter.formatToParts(new Date(Date.UTC(0, 0, 0, 0, 0, 0)));
  return getLocalizedTimePart("meridiem", parts) ? "12" : "24";
}
function getLocalizedTimePart(part, parts) {
  if (!part || !parts) {
    return null;
  }
  if (part === "hourSuffix") {
    const hourIndex = parts.indexOf(parts.find(({ type }) => type === "hour"));
    const minuteIndex = parts.indexOf(parts.find(({ type }) => type === "minute"));
    const hourSuffix = parts[hourIndex + 1];
    return hourSuffix && hourSuffix.type === "literal" && minuteIndex - hourIndex === 2
      ? hourSuffix.value?.trim() || null
      : null;
  }
  if (part === "minuteSuffix") {
    const minuteIndex = parts.indexOf(parts.find(({ type }) => type === "minute"));
    const secondIndex = parts.indexOf(parts.find(({ type }) => type === "second"));
    const minuteSuffix = parts[minuteIndex + 1];
    return minuteSuffix && minuteSuffix.type === "literal" && secondIndex - minuteIndex === 2
      ? minuteSuffix.value?.trim() || null
      : null;
  }
  if (part === "secondSuffix") {
    const secondIndex = parts.indexOf(parts.find(({ type }) => type === "second"));
    const secondSuffix = parts[secondIndex + 1];
    return secondSuffix && secondSuffix.type === "literal" ? secondSuffix.value?.trim() || null : null;
  }
  return parts.find(({ type }) => (part == "meridiem" ? type === "dayPeriod" : type === part))?.value || null;
}
function getMeridiem(hour) {
  if (!(0,_locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_0__.i)(hour)) {
    return null;
  }
  const hourAsNumber = parseInt(hour);
  return hourAsNumber >= 0 && hourAsNumber <= 11 ? "AM" : "PM";
}
function isValidTime(value) {
  if (!value || value.startsWith(":") || value.endsWith(":")) {
    return false;
  }
  const splitValue = value.split(":");
  const validLength = splitValue.length > 1 && splitValue.length < 4;
  if (!validLength) {
    return false;
  }
  const [hour, minute, second] = splitValue;
  const hourAsNumber = parseInt(splitValue[0]);
  const minuteAsNumber = parseInt(splitValue[1]);
  const secondAsNumber = parseInt(splitValue[2]);
  const hourValid = (0,_locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_0__.i)(hour) && hourAsNumber >= 0 && hourAsNumber < 24;
  const minuteValid = (0,_locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_0__.i)(minute) && minuteAsNumber >= 0 && minuteAsNumber < 60;
  const secondValid = (0,_locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_0__.i)(second) && secondAsNumber >= 0 && secondAsNumber < 60;
  if ((hourValid && minuteValid && !second) || (hourValid && minuteValid && secondValid)) {
    return true;
  }
}
function isValidTimePart(value, part) {
  if (part === "meridiem") {
    return value === "AM" || value === "PM";
  }
  if (!(0,_locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_0__.i)(value)) {
    return false;
  }
  const valueAsNumber = Number(value);
  return part === "hour" ? valueAsNumber >= 0 && valueAsNumber < 24 : valueAsNumber >= 0 && valueAsNumber < 60;
}
function localizeTimePart({ value, part, locale, numberingSystem }) {
  if (!isValidTimePart(value, part)) {
    return;
  }
  const valueAsNumber = parseInt(value);
  const date = new Date(Date.UTC(0, 0, 0, part === "hour" ? valueAsNumber : part === "meridiem" ? (value === "AM" ? 0 : 12) : 0, part === "minute" ? valueAsNumber : 0, part === "second" ? valueAsNumber : 0));
  if (!date) {
    return;
  }
  const formatter = createLocaleDateTimeFormatter(locale, numberingSystem);
  const parts = formatter.formatToParts(date);
  return getLocalizedTimePart(part, parts);
}
function localizeTimeString({ value, locale, numberingSystem, includeSeconds = true }) {
  if (!isValidTime(value)) {
    return null;
  }
  const { hour, minute, second = "0" } = parseTimeString(value);
  const dateFromTimeString = new Date(Date.UTC(0, 0, 0, parseInt(hour), parseInt(minute), parseInt(second)));
  const formatter = createLocaleDateTimeFormatter(locale, numberingSystem, includeSeconds);
  return formatter?.format(dateFromTimeString) || null;
}
function localizeTimeStringToParts({ value, locale, numberingSystem }) {
  if (!isValidTime(value)) {
    return null;
  }
  const { hour, minute, second = "0" } = parseTimeString(value);
  const dateFromTimeString = new Date(Date.UTC(0, 0, 0, parseInt(hour), parseInt(minute), parseInt(second)));
  if (dateFromTimeString) {
    const formatter = createLocaleDateTimeFormatter(locale, numberingSystem);
    const parts = formatter.formatToParts(dateFromTimeString);
    return {
      localizedHour: getLocalizedTimePart("hour", parts),
      localizedHourSuffix: getLocalizedTimePart("hourSuffix", parts),
      localizedMinute: getLocalizedTimePart("minute", parts),
      localizedMinuteSuffix: getLocalizedTimePart("minuteSuffix", parts),
      localizedSecond: getLocalizedTimePart("second", parts),
      localizedSecondSuffix: getLocalizedTimePart("secondSuffix", parts),
      localizedMeridiem: getLocalizedTimePart("meridiem", parts)
    };
  }
  return null;
}
function getTimeParts({ value, locale, numberingSystem }) {
  if (!isValidTime(value)) {
    return null;
  }
  const { hour, minute, second = "0" } = parseTimeString(value);
  const dateFromTimeString = new Date(Date.UTC(0, 0, 0, parseInt(hour), parseInt(minute), parseInt(second)));
  if (dateFromTimeString) {
    const formatter = createLocaleDateTimeFormatter(locale, numberingSystem);
    const parts = formatter.formatToParts(dateFromTimeString);
    return parts;
  }
  return null;
}
function parseTimeString(value) {
  if (isValidTime(value)) {
    const [hour, minute, second] = value.split(":");
    return {
      hour,
      minute,
      second
    };
  }
  return {
    hour: null,
    minute: null,
    second: null
  };
}



//# sourceMappingURL=time-0dbb0f96.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYmEtaW5mb2dyYXBoaWNfbm9kZV9tb2R1bGVzX2FyY2dpc19idXNpbmVzcy1hbmFseXN0LWNvbXBvbmVudHNfZGlzLWJlMTk5YS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTZHO0FBQ1M7QUFDdkU7QUFDd0I7QUFDbkI7QUFDNkM7QUFDbUI7QUFDRDtBQUNiO0FBQzNFO0FBQ007QUFDQTtBQUNBOztBQUVqQywwQ0FBMEMsR0FBRyxVQUFVLEtBQUssV0FBVyxtQkFBbUIsR0FBRyxVQUFVLGtDQUFrQyxLQUFLLFVBQVUsZ0NBQWdDLGlCQUFpQixHQUFHLFVBQVUsaUNBQWlDLEtBQUssVUFBVSxnQ0FBZ0Msb0JBQW9CLEdBQUcsVUFBVSxpQ0FBaUMsS0FBSyxVQUFVLDRCQUE0QixNQUFNLGlGQUFpRixxRUFBcUUsK0ZBQStGLGlHQUFpRywrRkFBK0YsaUJBQWlCLFVBQVUseUJBQXlCLG1EQUFtRCxxQkFBcUIsa0JBQWtCLDBCQUEwQix1QkFBdUIsd0JBQXdCLHFCQUFxQiwyQkFBMkIsd0JBQXdCLHdDQUF3QyxNQUFNLHNDQUFzQyxNQUFNLGlFQUFpRSxrQ0FBa0MsZ0JBQWdCLGFBQWEsa0JBQWtCLG9CQUFvQixlQUFlLHlCQUF5QixpQkFBaUIsMkNBQTJDLE1BQU0scUJBQXFCLHlCQUF5QixpQkFBaUIseUdBQXlHLFVBQVUseUNBQXlDLG9CQUFvQixxQkFBcUIsd0JBQXdCLHFCQUFxQiw2QkFBNkIsbUJBQW1CLDBCQUEwQixtQ0FBbUMsc0JBQXNCOztBQUUzNEQ7QUFDQTtBQUNBLElBQUkscURBQWdCO0FBQ3BCLHdDQUF3QyxxREFBVztBQUNuRDtBQUNBO0FBQ0E7QUFDQSxtREFBbUQsb0RBQUksR0FBRztBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxrRUFBa0U7QUFDaEYsTUFBTSxrREFBcUI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0Isa0RBQXFC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Q0E7QUFDQTtBQUNBLDRCQUE0QixzQ0FBc0M7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLHVEQUF1RDtBQUNyRjtBQUNBO0FBQ0E7QUFDQSxVQUFVLDZCQUE2QjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxnQ0FBZ0M7QUFDckU7QUFDQTtBQUNBO0FBQ0EsVUFBVSw2QkFBNkI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0NBQWdDO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBLFVBQVUsNkJBQTZCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRTZROztBQUU3USIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYmEtaW5mb2dyYXBoaWMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYnVzaW5lc3MtYW5hbHlzdC1jb21wb25lbnRzL2Rpc3Qvc3RlbmNpbC1jb21wb25lbnRzL2Rpc3QvZXNtL2NhbGNpdGUtaW5wdXQtdGltZS1waWNrZXIuZW50cnkuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9iYS1pbmZvZ3JhcGhpYy9ub2RlX21vZHVsZXMvQGFyY2dpcy9idXNpbmVzcy1hbmFseXN0LWNvbXBvbmVudHMvZGlzdC9zdGVuY2lsLWNvbXBvbmVudHMvZGlzdC9lc20vdGltZS0wZGJiMGY5Ni5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByIGFzIHJlZ2lzdGVySW5zdGFuY2UsIGMgYXMgY3JlYXRlRXZlbnQsIGgsIEggYXMgSG9zdCwgZyBhcyBnZXRFbGVtZW50IH0gZnJvbSAnLi9pbmRleC00ZTY0NzQxMS5qcyc7XG5pbXBvcnQgeyBzIGFzIHN1Ym1pdEZvcm0sIGMgYXMgY29ubmVjdEZvcm0sIGQgYXMgZGlzY29ubmVjdEZvcm0sIEggYXMgSGlkZGVuRm9ybUlucHV0U2xvdCB9IGZyb20gJy4vZm9ybS05OGZlMGU3Yy5qcyc7XG5pbXBvcnQgeyBnIGFzIGd1aWQgfSBmcm9tICcuL2d1aWQtODhhMzcyOWYuanMnO1xuaW1wb3J0IHsgdSBhcyB1cGRhdGVIb3N0SW50ZXJhY3Rpb24gfSBmcm9tICcuL2ludGVyYWN0aXZlLTI5OTk1NTIyLmpzJztcbmltcG9ydCB7IG4gYXMgbnVtYmVyS2V5cyB9IGZyb20gJy4va2V5LWI3NTQ5MWM0LmpzJztcbmltcG9ydCB7IGMgYXMgY29ubmVjdExhYmVsLCBkIGFzIGRpc2Nvbm5lY3RMYWJlbCwgZyBhcyBnZXRMYWJlbFRleHQgfSBmcm9tICcuL2xhYmVsLTZkMWUzMTY4LmpzJztcbmltcG9ydCB7IGMgYXMgY29tcG9uZW50TG9hZGVkLCBhIGFzIHNldFVwTG9hZGFibGVDb21wb25lbnQsIHMgYXMgc2V0Q29tcG9uZW50TG9hZGVkIH0gZnJvbSAnLi9sb2FkYWJsZS1jYzE0ZDcyOC5qcyc7XG5pbXBvcnQgeyBuIGFzIG51bWJlclN0cmluZ0Zvcm1hdHRlciwgYyBhcyBjb25uZWN0TG9jYWxpemVkLCBkIGFzIGRpc2Nvbm5lY3RMb2NhbGl6ZWQgfSBmcm9tICcuL2xvY2FsZS1mN2IyZmJiMC5qcyc7XG5pbXBvcnQgeyBsIGFzIGxvY2FsaXplVGltZVN0cmluZywgZiBhcyBmb3JtYXRUaW1lU3RyaW5nLCBpIGFzIGlzVmFsaWRUaW1lIH0gZnJvbSAnLi90aW1lLTBkYmIwZjk2LmpzJztcbmltcG9ydCAnLi9kb20tZjFlZTRkMDQuanMnO1xuaW1wb3J0ICcuL2luZGV4LmVzbS0xYzY1ZDhjNy5qcyc7XG5pbXBvcnQgJy4vcmVzb3VyY2VzLTQ4NDM2ZWVhLmpzJztcbmltcG9ydCAnLi9vYnNlcnZlcnMtNTY3NDBlOTkuanMnO1xuXG5jb25zdCBpbnB1dFRpbWVQaWNrZXJDc3MgPSBcIkBrZXlmcmFtZXMgaW57MCV7b3BhY2l0eTowfTEwMCV7b3BhY2l0eToxfX1Aa2V5ZnJhbWVzIGluLWRvd257MCV7b3BhY2l0eTowO3RyYW5zZm9ybTp0cmFuc2xhdGUzRCgwLCAtNXB4LCAwKX0xMDAle29wYWNpdHk6MTt0cmFuc2Zvcm06dHJhbnNsYXRlM0QoMCwgMCwgMCl9fUBrZXlmcmFtZXMgaW4tdXB7MCV7b3BhY2l0eTowO3RyYW5zZm9ybTp0cmFuc2xhdGUzRCgwLCA1cHgsIDApfTEwMCV7b3BhY2l0eToxO3RyYW5zZm9ybTp0cmFuc2xhdGUzRCgwLCAwLCAwKX19QGtleWZyYW1lcyBpbi1zY2FsZXswJXtvcGFjaXR5OjA7dHJhbnNmb3JtOnNjYWxlM0QoMC45NSwgMC45NSwgMSl9MTAwJXtvcGFjaXR5OjE7dHJhbnNmb3JtOnNjYWxlM0QoMSwgMSwgMSl9fTpyb290ey0tY2FsY2l0ZS1hbmltYXRpb24tdGltaW5nOmNhbGMoMTUwbXMgKiB2YXIoLS1jYWxjaXRlLWludGVybmFsLWR1cmF0aW9uLWZhY3RvcikpOy0tY2FsY2l0ZS1pbnRlcm5hbC1kdXJhdGlvbi1mYWN0b3I6dmFyKC0tY2FsY2l0ZS1kdXJhdGlvbi1mYWN0b3IsIDEpOy0tY2FsY2l0ZS1pbnRlcm5hbC1hbmltYXRpb24tdGltaW5nLWZhc3Q6Y2FsYygxMDBtcyAqIHZhcigtLWNhbGNpdGUtaW50ZXJuYWwtZHVyYXRpb24tZmFjdG9yKSk7LS1jYWxjaXRlLWludGVybmFsLWFuaW1hdGlvbi10aW1pbmctbWVkaXVtOmNhbGMoMjAwbXMgKiB2YXIoLS1jYWxjaXRlLWludGVybmFsLWR1cmF0aW9uLWZhY3RvcikpOy0tY2FsY2l0ZS1pbnRlcm5hbC1hbmltYXRpb24tdGltaW5nLXNsb3c6Y2FsYygzMDBtcyAqIHZhcigtLWNhbGNpdGUtaW50ZXJuYWwtZHVyYXRpb24tZmFjdG9yKSl9LmNhbGNpdGUtYW5pbWF0ZXtvcGFjaXR5OjA7YW5pbWF0aW9uLWZpbGwtbW9kZTpib3RoO2FuaW1hdGlvbi1kdXJhdGlvbjp2YXIoLS1jYWxjaXRlLWFuaW1hdGlvbi10aW1pbmcpfS5jYWxjaXRlLWFuaW1hdGVfX2lue2FuaW1hdGlvbi1uYW1lOmlufS5jYWxjaXRlLWFuaW1hdGVfX2luLWRvd257YW5pbWF0aW9uLW5hbWU6aW4tZG93bn0uY2FsY2l0ZS1hbmltYXRlX19pbi11cHthbmltYXRpb24tbmFtZTppbi11cH0uY2FsY2l0ZS1hbmltYXRlX19pbi1zY2FsZXthbmltYXRpb24tbmFtZTppbi1zY2FsZX1AbWVkaWEgKHByZWZlcnMtcmVkdWNlZC1tb3Rpb246IHJlZHVjZSl7OnJvb3R7LS1jYWxjaXRlLWludGVybmFsLWR1cmF0aW9uLWZhY3RvcjowfX06cm9vdHstLWNhbGNpdGUtZmxvYXRpbmctdWktdHJhbnNpdGlvbjp2YXIoLS1jYWxjaXRlLWFuaW1hdGlvbi10aW1pbmcpOy0tY2FsY2l0ZS1mbG9hdGluZy11aS16LWluZGV4OjYwMH06aG9zdChbaGlkZGVuXSl7ZGlzcGxheTpub25lfTpob3N0KFtkaXNhYmxlZF0pe3BvaW50ZXItZXZlbnRzOm5vbmU7Y3Vyc29yOmRlZmF1bHQ7LXdlYmtpdC11c2VyLXNlbGVjdDpub25lO3VzZXItc2VsZWN0Om5vbmU7b3BhY2l0eTp2YXIoLS1jYWxjaXRlLXVpLW9wYWNpdHktZGlzYWJsZWQpfTpob3N0e2Rpc3BsYXk6aW5saW5lLWJsb2NrOy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lfTpob3N0KFtkaXNhYmxlZF0pIDo6c2xvdHRlZChbY2FsY2l0ZS1oeWRyYXRlZF1bZGlzYWJsZWRdKSw6aG9zdChbZGlzYWJsZWRdKSBbY2FsY2l0ZS1oeWRyYXRlZF1bZGlzYWJsZWRde29wYWNpdHk6MX06OnNsb3R0ZWQoaW5wdXRbc2xvdD1oaWRkZW4tZm9ybS1pbnB1dF0pe21hcmdpbjowICFpbXBvcnRhbnQ7b3BhY2l0eTowICFpbXBvcnRhbnQ7b3V0bGluZTpub25lICFpbXBvcnRhbnQ7cGFkZGluZzowICFpbXBvcnRhbnQ7cG9zaXRpb246YWJzb2x1dGUgIWltcG9ydGFudDtpbnNldDowICFpbXBvcnRhbnQ7dHJhbnNmb3JtOm5vbmUgIWltcG9ydGFudDstd2Via2l0LWFwcGVhcmFuY2U6bm9uZSAhaW1wb3J0YW50O3otaW5kZXg6LTEgIWltcG9ydGFudH1cIjtcblxuY29uc3QgSW5wdXRUaW1lUGlja2VyID0gY2xhc3Mge1xyXG4gIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcclxuICAgIHJlZ2lzdGVySW5zdGFuY2UodGhpcywgaG9zdFJlZik7XHJcbiAgICB0aGlzLmNhbGNpdGVJbnB1dFRpbWVQaWNrZXJDaGFuZ2UgPSBjcmVhdGVFdmVudCh0aGlzLCBcImNhbGNpdGVJbnB1dFRpbWVQaWNrZXJDaGFuZ2VcIiwgNyk7XHJcbiAgICAvKiogd2hldGhlciB0aGUgdmFsdWUgb2YgdGhlIGlucHV0IHdhcyBjaGFuZ2VkIGFzIGEgcmVzdWx0IG9mIHVzZXIgdHlwaW5nIG9yIG5vdCAqL1xyXG4gICAgdGhpcy5pbnRlcm5hbFZhbHVlQ2hhbmdlID0gZmFsc2U7XHJcbiAgICB0aGlzLnByZXZpb3VzVmFsaWRWYWx1ZSA9IG51bGw7XHJcbiAgICB0aGlzLnJlZmVyZW5jZUVsZW1lbnRJZCA9IGBpbnB1dC10aW1lLXBpY2tlci0ke2d1aWQoKX1gO1xyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLy9cclxuICAgIC8vICBFdmVudCBMaXN0ZW5lcnNcclxuICAgIC8vXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICB0aGlzLmNhbGNpdGVJbnRlcm5hbElucHV0Qmx1ckhhbmRsZXIgPSAoKSA9PiB7XHJcbiAgICAgIHRoaXMub3BlbiA9IGZhbHNlO1xyXG4gICAgICBjb25zdCBzaG91bGRJbmNsdWRlU2Vjb25kcyA9IHRoaXMuc2hvdWxkSW5jbHVkZVNlY29uZHMoKTtcclxuICAgICAgY29uc3QgeyBlZmZlY3RpdmVMb2NhbGU6IGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCB2YWx1ZSwgY2FsY2l0ZUlucHV0RWwgfSA9IHRoaXM7XHJcbiAgICAgIG51bWJlclN0cmluZ0Zvcm1hdHRlci5udW1iZXJGb3JtYXRPcHRpb25zID0ge1xyXG4gICAgICAgIGxvY2FsZSxcclxuICAgICAgICBudW1iZXJpbmdTeXN0ZW0sXHJcbiAgICAgICAgdXNlR3JvdXBpbmc6IGZhbHNlXHJcbiAgICAgIH07XHJcbiAgICAgIGNvbnN0IGRlbG9jYWxpemVkVmFsdWUgPSBudW1iZXJTdHJpbmdGb3JtYXR0ZXIuZGVsb2NhbGl6ZShjYWxjaXRlSW5wdXRFbC52YWx1ZSk7XHJcbiAgICAgIGNvbnN0IGxvY2FsaXplZElucHV0VmFsdWUgPSBsb2NhbGl6ZVRpbWVTdHJpbmcoe1xyXG4gICAgICAgIHZhbHVlOiBkZWxvY2FsaXplZFZhbHVlLFxyXG4gICAgICAgIGluY2x1ZGVTZWNvbmRzOiBzaG91bGRJbmNsdWRlU2Vjb25kcyxcclxuICAgICAgICBsb2NhbGUsXHJcbiAgICAgICAgbnVtYmVyaW5nU3lzdGVtXHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLnNldElucHV0VmFsdWUobG9jYWxpemVkSW5wdXRWYWx1ZSB8fFxyXG4gICAgICAgIGxvY2FsaXplVGltZVN0cmluZyh7IHZhbHVlLCBsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSwgaW5jbHVkZVNlY29uZHM6IHNob3VsZEluY2x1ZGVTZWNvbmRzIH0pKTtcclxuICAgIH07XHJcbiAgICB0aGlzLmNhbGNpdGVJbnRlcm5hbElucHV0Rm9jdXNIYW5kbGVyID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgIGlmICghdGhpcy5yZWFkT25seSkge1xyXG4gICAgICAgIHRoaXMub3BlbiA9IHRydWU7XHJcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aGlzLmNhbGNpdGVJbnB1dElucHV0SGFuZGxlciA9IChldmVudCkgPT4ge1xyXG4gICAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQ7XHJcbiAgICAgIG51bWJlclN0cmluZ0Zvcm1hdHRlci5udW1iZXJGb3JtYXRPcHRpb25zID0ge1xyXG4gICAgICAgIGxvY2FsZTogdGhpcy5lZmZlY3RpdmVMb2NhbGUsXHJcbiAgICAgICAgbnVtYmVyaW5nU3lzdGVtOiB0aGlzLm51bWJlcmluZ1N5c3RlbSxcclxuICAgICAgICB1c2VHcm91cGluZzogZmFsc2VcclxuICAgICAgfTtcclxuICAgICAgY29uc3QgZGVsb2NhbGl6ZWRWYWx1ZSA9IG51bWJlclN0cmluZ0Zvcm1hdHRlci5kZWxvY2FsaXplKHRhcmdldC52YWx1ZSk7XHJcbiAgICAgIHRoaXMuc2V0VmFsdWUoeyB2YWx1ZTogZGVsb2NhbGl6ZWRWYWx1ZSB9KTtcclxuICAgICAgLy8gb25seSB0cmFuc2xhdGUgdGhlIG51bWVyYWxzIHVudGlsIGJsdXJcclxuICAgICAgY29uc3QgbG9jYWxpemVkVmFsdWUgPSBkZWxvY2FsaXplZFZhbHVlXHJcbiAgICAgICAgLnNwbGl0KFwiXCIpXHJcbiAgICAgICAgLm1hcCgoY2hhcikgPT4gbnVtYmVyS2V5cy5pbmNsdWRlcyhjaGFyKVxyXG4gICAgICAgID8gbnVtYmVyU3RyaW5nRm9ybWF0dGVyLm51bWJlckZvcm1hdHRlci5mb3JtYXQoTnVtYmVyKGNoYXIpKVxyXG4gICAgICAgIDogY2hhcilcclxuICAgICAgICAuam9pbihcIlwiKTtcclxuICAgICAgdGhpcy5zZXRJbnB1dFZhbHVlKGxvY2FsaXplZFZhbHVlKTtcclxuICAgIH07XHJcbiAgICB0aGlzLnRpbWVQaWNrZXJDaGFuZ2VIYW5kbGVyID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQ7XHJcbiAgICAgIGNvbnN0IHZhbHVlID0gdGFyZ2V0LnZhbHVlO1xyXG4gICAgICB0aGlzLnNldFZhbHVlKHsgdmFsdWUsIG9yaWdpbjogXCJ0aW1lLXBpY2tlclwiIH0pO1xyXG4gICAgfTtcclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAvL1xyXG4gICAgLy8gIFByaXZhdGUgTWV0aG9kc1xyXG4gICAgLy9cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICB0aGlzLmtleURvd25IYW5kbGVyID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgIGNvbnN0IHsgZGVmYXVsdFByZXZlbnRlZCwga2V5IH0gPSBldmVudDtcclxuICAgICAgaWYgKGRlZmF1bHRQcmV2ZW50ZWQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGtleSA9PT0gXCJFbnRlclwiKSB7XHJcbiAgICAgICAgaWYgKHN1Ym1pdEZvcm0odGhpcykpIHtcclxuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChrZXkgPT09IFwiRXNjYXBlXCIgJiYgdGhpcy5vcGVuKSB7XHJcbiAgICAgICAgdGhpcy5vcGVuID0gZmFsc2U7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRoaXMuc2V0Q2FsY2l0ZVBvcG92ZXJFbCA9IChlbCkgPT4ge1xyXG4gICAgICB0aGlzLnBvcG92ZXJFbCA9IGVsO1xyXG4gICAgfTtcclxuICAgIHRoaXMuc2V0Q2FsY2l0ZUlucHV0RWwgPSAoZWwpID0+IHtcclxuICAgICAgdGhpcy5jYWxjaXRlSW5wdXRFbCA9IGVsO1xyXG4gICAgfTtcclxuICAgIHRoaXMuc2V0Q2FsY2l0ZVRpbWVQaWNrZXJFbCA9IChlbCkgPT4ge1xyXG4gICAgICB0aGlzLmNhbGNpdGVUaW1lUGlja2VyRWwgPSBlbDtcclxuICAgIH07XHJcbiAgICB0aGlzLnNldElucHV0VmFsdWUgPSAobmV3SW5wdXRWYWx1ZSkgPT4ge1xyXG4gICAgICBpZiAoIXRoaXMuY2FsY2l0ZUlucHV0RWwpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5jYWxjaXRlSW5wdXRFbC52YWx1ZSA9IG5ld0lucHV0VmFsdWU7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5zZXRWYWx1ZSA9ICh7IHZhbHVlLCBvcmlnaW4gPSBcImlucHV0XCIgfSkgPT4ge1xyXG4gICAgICBjb25zdCBwcmV2aW91c1ZhbHVlID0gdGhpcy52YWx1ZTtcclxuICAgICAgY29uc3QgbmV3VmFsdWUgPSBmb3JtYXRUaW1lU3RyaW5nKHZhbHVlKTtcclxuICAgICAgY29uc3QgbmV3TG9jYWxpemVkVmFsdWUgPSBsb2NhbGl6ZVRpbWVTdHJpbmcoe1xyXG4gICAgICAgIHZhbHVlOiBuZXdWYWx1ZSxcclxuICAgICAgICBsb2NhbGU6IHRoaXMuZWZmZWN0aXZlTG9jYWxlLFxyXG4gICAgICAgIG51bWJlcmluZ1N5c3RlbTogdGhpcy5udW1iZXJpbmdTeXN0ZW0sXHJcbiAgICAgICAgaW5jbHVkZVNlY29uZHM6IHRoaXMuc2hvdWxkSW5jbHVkZVNlY29uZHMoKVxyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5pbnRlcm5hbFZhbHVlQ2hhbmdlID0gb3JpZ2luICE9PSBcImV4dGVybmFsXCIgJiYgb3JpZ2luICE9PSBcImxvYWRpbmdcIjtcclxuICAgICAgY29uc3Qgc2hvdWxkRW1pdCA9IG9yaWdpbiAhPT0gXCJsb2FkaW5nXCIgJiZcclxuICAgICAgICBvcmlnaW4gIT09IFwiZXh0ZXJuYWxcIiAmJlxyXG4gICAgICAgICgodmFsdWUgIT09IHRoaXMucHJldmlvdXNWYWxpZFZhbHVlICYmICF2YWx1ZSkgfHxcclxuICAgICAgICAgICEhKCF0aGlzLnByZXZpb3VzVmFsaWRWYWx1ZSAmJiBuZXdWYWx1ZSkgfHxcclxuICAgICAgICAgIChuZXdWYWx1ZSAhPT0gdGhpcy5wcmV2aW91c1ZhbGlkVmFsdWUgJiYgbmV3VmFsdWUpKTtcclxuICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKHNob3VsZEVtaXQpIHtcclxuICAgICAgICAgIHRoaXMucHJldmlvdXNWYWxpZFZhbHVlID0gbmV3VmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChuZXdWYWx1ZSAmJiBuZXdWYWx1ZSAhPT0gdGhpcy52YWx1ZSkge1xyXG4gICAgICAgICAgdGhpcy52YWx1ZSA9IG5ld1ZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmxvY2FsaXplZFZhbHVlID0gbmV3TG9jYWxpemVkVmFsdWU7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIHRoaXMubG9jYWxpemVkVmFsdWUgPSBudWxsO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChvcmlnaW4gPT09IFwidGltZS1waWNrZXJcIiB8fCBvcmlnaW4gPT09IFwiZXh0ZXJuYWxcIikge1xyXG4gICAgICAgIHRoaXMuc2V0SW5wdXRWYWx1ZShuZXdMb2NhbGl6ZWRWYWx1ZSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHNob3VsZEVtaXQpIHtcclxuICAgICAgICBjb25zdCBjaGFuZ2VFdmVudCA9IHRoaXMuY2FsY2l0ZUlucHV0VGltZVBpY2tlckNoYW5nZS5lbWl0KCk7XHJcbiAgICAgICAgaWYgKGNoYW5nZUV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHtcclxuICAgICAgICAgIHRoaXMuaW50ZXJuYWxWYWx1ZUNoYW5nZSA9IGZhbHNlO1xyXG4gICAgICAgICAgdGhpcy52YWx1ZSA9IHByZXZpb3VzVmFsdWU7XHJcbiAgICAgICAgICB0aGlzLnNldElucHV0VmFsdWUocHJldmlvdXNWYWx1ZSk7XHJcbiAgICAgICAgICB0aGlzLnByZXZpb3VzVmFsaWRWYWx1ZSA9IHByZXZpb3VzVmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5wcmV2aW91c1ZhbGlkVmFsdWUgPSBuZXdWYWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aGlzLm9wZW4gPSBmYWxzZTtcclxuICAgIHRoaXMuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIHRoaXMucmVhZE9ubHkgPSBmYWxzZTtcclxuICAgIHRoaXMubWVzc2FnZXNPdmVycmlkZXMgPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLm5hbWUgPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLm51bWJlcmluZ1N5c3RlbSA9IHVuZGVmaW5lZDtcclxuICAgIHRoaXMucmVxdWlyZWQgPSBmYWxzZTtcclxuICAgIHRoaXMuc2NhbGUgPSBcIm1cIjtcclxuICAgIHRoaXMub3ZlcmxheVBvc2l0aW9uaW5nID0gXCJhYnNvbHV0ZVwiO1xyXG4gICAgdGhpcy5wbGFjZW1lbnQgPSBcImF1dG9cIjtcclxuICAgIHRoaXMuc3RlcCA9IDYwO1xyXG4gICAgdGhpcy52YWx1ZSA9IG51bGw7XHJcbiAgICB0aGlzLmVmZmVjdGl2ZUxvY2FsZSA9IFwiXCI7XHJcbiAgICB0aGlzLmxvY2FsaXplZFZhbHVlID0gdW5kZWZpbmVkO1xyXG4gIH1cclxuICBvcGVuSGFuZGxlcih2YWx1ZSkge1xyXG4gICAgaWYgKHRoaXMuZGlzYWJsZWQgfHwgdGhpcy5yZWFkT25seSkge1xyXG4gICAgICB0aGlzLm9wZW4gPSBmYWxzZTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgIHRoaXMucmVwb3NpdGlvbih0cnVlKTtcclxuICAgIH1cclxuICB9XHJcbiAgaGFuZGxlRGlzYWJsZWRBbmRSZWFkT25seUNoYW5nZSh2YWx1ZSkge1xyXG4gICAgaWYgKCF2YWx1ZSkge1xyXG4gICAgICB0aGlzLm9wZW4gPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcbiAgdmFsdWVXYXRjaGVyKG5ld1ZhbHVlKSB7XHJcbiAgICBpZiAoIXRoaXMuaW50ZXJuYWxWYWx1ZUNoYW5nZSkge1xyXG4gICAgICB0aGlzLnNldFZhbHVlKHsgdmFsdWU6IG5ld1ZhbHVlLCBvcmlnaW46IFwiZXh0ZXJuYWxcIiB9KTtcclxuICAgIH1cclxuICAgIHRoaXMuaW50ZXJuYWxWYWx1ZUNoYW5nZSA9IGZhbHNlO1xyXG4gIH1cclxuICBlZmZlY3RpdmVMb2NhbGVXYXRjaGVyKCkge1xyXG4gICAgdGhpcy5zZXRJbnB1dFZhbHVlKGxvY2FsaXplVGltZVN0cmluZyh7XHJcbiAgICAgIHZhbHVlOiB0aGlzLnZhbHVlLFxyXG4gICAgICBsb2NhbGU6IHRoaXMuZWZmZWN0aXZlTG9jYWxlLFxyXG4gICAgICBudW1iZXJpbmdTeXN0ZW06IHRoaXMubnVtYmVyaW5nU3lzdGVtLFxyXG4gICAgICBpbmNsdWRlU2Vjb25kczogdGhpcy5zaG91bGRJbmNsdWRlU2Vjb25kcygpXHJcbiAgICB9KSk7XHJcbiAgfVxyXG4gIGNsaWNrSGFuZGxlcihldmVudCkge1xyXG4gICAgaWYgKGV2ZW50LmNvbXBvc2VkUGF0aCgpLmluY2x1ZGVzKHRoaXMuY2FsY2l0ZVRpbWVQaWNrZXJFbCkpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5zZXRGb2N1cygpO1xyXG4gIH1cclxuICB0aW1lUGlja2VyQmx1ckhhbmRsZXIoZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIHRoaXMub3BlbiA9IGZhbHNlO1xyXG4gIH1cclxuICB0aW1lUGlja2VyRm9jdXNIYW5kbGVyKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICBpZiAoIXRoaXMucmVhZE9ubHkpIHtcclxuICAgICAgdGhpcy5vcGVuID0gdHJ1ZTtcclxuICAgIH1cclxuICB9XHJcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vICBQdWJsaWMgTWV0aG9kc1xyXG4gIC8vXHJcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvKiogU2V0cyBmb2N1cyBvbiB0aGUgY29tcG9uZW50LiAqL1xyXG4gIGFzeW5jIHNldEZvY3VzKCkge1xyXG4gICAgYXdhaXQgY29tcG9uZW50TG9hZGVkKHRoaXMpO1xyXG4gICAgdGhpcy5lbC5mb2N1cygpO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBVcGRhdGVzIHRoZSBwb3NpdGlvbiBvZiB0aGUgY29tcG9uZW50LlxyXG4gICAqXHJcbiAgICogQHBhcmFtIGRlbGF5ZWRcclxuICAgKi9cclxuICBhc3luYyByZXBvc2l0aW9uKGRlbGF5ZWQgPSBmYWxzZSkge1xyXG4gICAgdGhpcy5wb3BvdmVyRWw/LnJlcG9zaXRpb24oZGVsYXllZCk7XHJcbiAgfVxyXG4gIG9uTGFiZWxDbGljaygpIHtcclxuICAgIHRoaXMuc2V0Rm9jdXMoKTtcclxuICB9XHJcbiAgc2hvdWxkSW5jbHVkZVNlY29uZHMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5zdGVwIDwgNjA7XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vICBMaWZlY3ljbGVcclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcclxuICAgIGNvbm5lY3RMb2NhbGl6ZWQodGhpcyk7XHJcbiAgICBpZiAodGhpcy52YWx1ZSkge1xyXG4gICAgICB0aGlzLnNldFZhbHVlKHsgdmFsdWU6IGlzVmFsaWRUaW1lKHRoaXMudmFsdWUpID8gdGhpcy52YWx1ZSA6IHVuZGVmaW5lZCwgb3JpZ2luOiBcImxvYWRpbmdcIiB9KTtcclxuICAgIH1cclxuICAgIGNvbm5lY3RMYWJlbCh0aGlzKTtcclxuICAgIGNvbm5lY3RGb3JtKHRoaXMpO1xyXG4gIH1cclxuICBjb21wb25lbnRXaWxsTG9hZCgpIHtcclxuICAgIHNldFVwTG9hZGFibGVDb21wb25lbnQodGhpcyk7XHJcbiAgfVxyXG4gIGNvbXBvbmVudERpZExvYWQoKSB7XHJcbiAgICBzZXRDb21wb25lbnRMb2FkZWQodGhpcyk7XHJcbiAgICB0aGlzLnNldElucHV0VmFsdWUodGhpcy5sb2NhbGl6ZWRWYWx1ZSk7XHJcbiAgfVxyXG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xyXG4gICAgZGlzY29ubmVjdExhYmVsKHRoaXMpO1xyXG4gICAgZGlzY29ubmVjdEZvcm0odGhpcyk7XHJcbiAgICBkaXNjb25uZWN0TG9jYWxpemVkKHRoaXMpO1xyXG4gIH1cclxuICBjb21wb25lbnREaWRSZW5kZXIoKSB7XHJcbiAgICB1cGRhdGVIb3N0SW50ZXJhY3Rpb24odGhpcyk7XHJcbiAgfVxyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyAgUmVuZGVyIE1ldGhvZHNcclxuICAvL1xyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3QgcG9wb3ZlcklkID0gYCR7dGhpcy5yZWZlcmVuY2VFbGVtZW50SWR9LXBvcG92ZXJgO1xyXG4gICAgcmV0dXJuIChoKEhvc3QsIHsgb25LZXlEb3duOiB0aGlzLmtleURvd25IYW5kbGVyIH0sIGgoXCJkaXZcIiwgeyBcImFyaWEtY29udHJvbHNcIjogcG9wb3ZlcklkLCBcImFyaWEtaGFzcG9wdXBcIjogXCJkaWFsb2dcIiwgXCJhcmlhLWxhYmVsXCI6IHRoaXMubmFtZSwgXCJhcmlhLW93bnNcIjogcG9wb3ZlcklkLCBpZDogdGhpcy5yZWZlcmVuY2VFbGVtZW50SWQsIHJvbGU6IFwiY29tYm9ib3hcIiB9LCBoKFwiY2FsY2l0ZS1pbnB1dFwiLCB7IGRpc2FibGVkOiB0aGlzLmRpc2FibGVkLCBpY29uOiBcImNsb2NrXCIsIGxhYmVsOiBnZXRMYWJlbFRleHQodGhpcyksIG9uQ2FsY2l0ZUlucHV0SW5wdXQ6IHRoaXMuY2FsY2l0ZUlucHV0SW5wdXRIYW5kbGVyLCBvbkNhbGNpdGVJbnRlcm5hbElucHV0Qmx1cjogdGhpcy5jYWxjaXRlSW50ZXJuYWxJbnB1dEJsdXJIYW5kbGVyLCBvbkNhbGNpdGVJbnRlcm5hbElucHV0Rm9jdXM6IHRoaXMuY2FsY2l0ZUludGVybmFsSW5wdXRGb2N1c0hhbmRsZXIsIHJlYWRPbmx5OiB0aGlzLnJlYWRPbmx5LCByZWY6IHRoaXMuc2V0Q2FsY2l0ZUlucHV0RWwsIHNjYWxlOiB0aGlzLnNjYWxlLCBzdGVwOiB0aGlzLnN0ZXAgfSkpLCBoKFwiY2FsY2l0ZS1wb3BvdmVyXCIsIHsgZm9jdXNUcmFwRGlzYWJsZWQ6IHRydWUsIGlkOiBwb3BvdmVySWQsIGxhYmVsOiBcIlRpbWUgUGlja2VyXCIsIG9wZW46IHRoaXMub3Blbiwgb3ZlcmxheVBvc2l0aW9uaW5nOiB0aGlzLm92ZXJsYXlQb3NpdGlvbmluZywgcGxhY2VtZW50OiB0aGlzLnBsYWNlbWVudCwgcmVmOiB0aGlzLnNldENhbGNpdGVQb3BvdmVyRWwsIHJlZmVyZW5jZUVsZW1lbnQ6IHRoaXMucmVmZXJlbmNlRWxlbWVudElkLCB0cmlnZ2VyRGlzYWJsZWQ6IHRydWUgfSwgaChcImNhbGNpdGUtdGltZS1waWNrZXJcIiwgeyBsYW5nOiB0aGlzLmVmZmVjdGl2ZUxvY2FsZSwgbWVzc2FnZU92ZXJyaWRlczogdGhpcy5tZXNzYWdlc092ZXJyaWRlcywgbnVtYmVyaW5nU3lzdGVtOiB0aGlzLm51bWJlcmluZ1N5c3RlbSwgb25DYWxjaXRlSW50ZXJuYWxUaW1lUGlja2VyQ2hhbmdlOiB0aGlzLnRpbWVQaWNrZXJDaGFuZ2VIYW5kbGVyLCByZWY6IHRoaXMuc2V0Q2FsY2l0ZVRpbWVQaWNrZXJFbCwgc2NhbGU6IHRoaXMuc2NhbGUsIHN0ZXA6IHRoaXMuc3RlcCwgdmFsdWU6IHRoaXMudmFsdWUgfSkpLCBoKEhpZGRlbkZvcm1JbnB1dFNsb3QsIHsgY29tcG9uZW50OiB0aGlzIH0pKSk7XHJcbiAgfVxyXG4gIHN0YXRpYyBnZXQgZGVsZWdhdGVzRm9jdXMoKSB7IHJldHVybiB0cnVlOyB9XHJcbiAgZ2V0IGVsKCkgeyByZXR1cm4gZ2V0RWxlbWVudCh0aGlzKTsgfVxyXG4gIHN0YXRpYyBnZXQgd2F0Y2hlcnMoKSB7IHJldHVybiB7XHJcbiAgICBcIm9wZW5cIjogW1wib3BlbkhhbmRsZXJcIl0sXHJcbiAgICBcImRpc2FibGVkXCI6IFtcImhhbmRsZURpc2FibGVkQW5kUmVhZE9ubHlDaGFuZ2VcIl0sXHJcbiAgICBcInJlYWRPbmx5XCI6IFtcImhhbmRsZURpc2FibGVkQW5kUmVhZE9ubHlDaGFuZ2VcIl0sXHJcbiAgICBcInZhbHVlXCI6IFtcInZhbHVlV2F0Y2hlclwiXSxcclxuICAgIFwiZWZmZWN0aXZlTG9jYWxlXCI6IFtcImVmZmVjdGl2ZUxvY2FsZVdhdGNoZXJcIl1cclxuICB9OyB9XHJcbn07XHJcbklucHV0VGltZVBpY2tlci5zdHlsZSA9IGlucHV0VGltZVBpY2tlckNzcztcblxuZXhwb3J0IHsgSW5wdXRUaW1lUGlja2VyIGFzIGNhbGNpdGVfaW5wdXRfdGltZV9waWNrZXIgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2FsY2l0ZS1pbnB1dC10aW1lLXBpY2tlci5lbnRyeS5qcy5tYXAiLCJpbXBvcnQgeyBpIGFzIGlzVmFsaWROdW1iZXIsIGcgYXMgZ2V0U3VwcG9ydGVkTG9jYWxlLCBhIGFzIGdldFN1cHBvcnRlZE51bWJlcmluZ1N5c3RlbSB9IGZyb20gJy4vbG9jYWxlLWY3YjJmYmIwLmpzJztcblxuLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtY29tcG9uZW50cy9ibG9iL21hc3Rlci9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxuICogdjEuMC41XG4gKi9cbmNvbnN0IG1heFRlbnRoRm9yTWludXRlQW5kU2Vjb25kID0gNTtcbmZ1bmN0aW9uIGNyZWF0ZUxvY2FsZURhdGVUaW1lRm9ybWF0dGVyKGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBpbmNsdWRlU2Vjb25kcyA9IHRydWUpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgaG91cjogXCIyLWRpZ2l0XCIsXG4gICAgICBtaW51dGU6IFwiMi1kaWdpdFwiLFxuICAgICAgdGltZVpvbmU6IFwiVVRDXCIsXG4gICAgICBudW1iZXJpbmdTeXN0ZW06IGdldFN1cHBvcnRlZE51bWJlcmluZ1N5c3RlbShudW1iZXJpbmdTeXN0ZW0pXG4gICAgfTtcbiAgICBpZiAoaW5jbHVkZVNlY29uZHMpIHtcbiAgICAgIG9wdGlvbnMuc2Vjb25kID0gXCIyLWRpZ2l0XCI7XG4gICAgfVxuICAgIHJldHVybiBuZXcgSW50bC5EYXRlVGltZUZvcm1hdChnZXRTdXBwb3J0ZWRMb2NhbGUobG9jYWxlKSwgb3B0aW9ucyk7XG4gIH1cbiAgY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGxvY2FsZSBzdXBwbGllZCB3aGlsZSBhdHRlbXB0aW5nIHRvIGNyZWF0ZSBhIERhdGVUaW1lIGZvcm1hdHRlcjogJHtsb2NhbGV9YCk7XG4gIH1cbn1cbmZ1bmN0aW9uIGZvcm1hdFRpbWVQYXJ0KG51bWJlcikge1xuICBjb25zdCBudW1iZXJBc1N0cmluZyA9IG51bWJlci50b1N0cmluZygpO1xuICByZXR1cm4gbnVtYmVyID49IDAgJiYgbnVtYmVyIDw9IDkgPyBudW1iZXJBc1N0cmluZy5wYWRTdGFydCgyLCBcIjBcIikgOiBudW1iZXJBc1N0cmluZztcbn1cbmZ1bmN0aW9uIGZvcm1hdFRpbWVTdHJpbmcodmFsdWUpIHtcbiAgaWYgKCFpc1ZhbGlkVGltZSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCBbaG91clN0cmluZywgbWludXRlU3RyaW5nLCBzZWNvbmRTdHJpbmddID0gdmFsdWUuc3BsaXQoXCI6XCIpO1xuICBjb25zdCBob3VyID0gZm9ybWF0VGltZVBhcnQocGFyc2VJbnQoaG91clN0cmluZykpO1xuICBjb25zdCBtaW51dGUgPSBmb3JtYXRUaW1lUGFydChwYXJzZUludChtaW51dGVTdHJpbmcpKTtcbiAgaWYgKHNlY29uZFN0cmluZykge1xuICAgIGNvbnN0IHNlY29uZCA9IGZvcm1hdFRpbWVQYXJ0KHBhcnNlSW50KHNlY29uZFN0cmluZykpO1xuICAgIHJldHVybiBgJHtob3VyfToke21pbnV0ZX06JHtzZWNvbmR9YDtcbiAgfVxuICByZXR1cm4gYCR7aG91cn06JHttaW51dGV9YDtcbn1cbmZ1bmN0aW9uIGdldExvY2FsZUhvdXJDeWNsZShsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSkge1xuICBjb25zdCBmb3JtYXR0ZXIgPSBjcmVhdGVMb2NhbGVEYXRlVGltZUZvcm1hdHRlcihsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSk7XG4gIGNvbnN0IHBhcnRzID0gZm9ybWF0dGVyLmZvcm1hdFRvUGFydHMobmV3IERhdGUoRGF0ZS5VVEMoMCwgMCwgMCwgMCwgMCwgMCkpKTtcbiAgcmV0dXJuIGdldExvY2FsaXplZFRpbWVQYXJ0KFwibWVyaWRpZW1cIiwgcGFydHMpID8gXCIxMlwiIDogXCIyNFwiO1xufVxuZnVuY3Rpb24gZ2V0TG9jYWxpemVkVGltZVBhcnQocGFydCwgcGFydHMpIHtcbiAgaWYgKCFwYXJ0IHx8ICFwYXJ0cykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGlmIChwYXJ0ID09PSBcImhvdXJTdWZmaXhcIikge1xuICAgIGNvbnN0IGhvdXJJbmRleCA9IHBhcnRzLmluZGV4T2YocGFydHMuZmluZCgoeyB0eXBlIH0pID0+IHR5cGUgPT09IFwiaG91clwiKSk7XG4gICAgY29uc3QgbWludXRlSW5kZXggPSBwYXJ0cy5pbmRleE9mKHBhcnRzLmZpbmQoKHsgdHlwZSB9KSA9PiB0eXBlID09PSBcIm1pbnV0ZVwiKSk7XG4gICAgY29uc3QgaG91clN1ZmZpeCA9IHBhcnRzW2hvdXJJbmRleCArIDFdO1xuICAgIHJldHVybiBob3VyU3VmZml4ICYmIGhvdXJTdWZmaXgudHlwZSA9PT0gXCJsaXRlcmFsXCIgJiYgbWludXRlSW5kZXggLSBob3VySW5kZXggPT09IDJcbiAgICAgID8gaG91clN1ZmZpeC52YWx1ZT8udHJpbSgpIHx8IG51bGxcbiAgICAgIDogbnVsbDtcbiAgfVxuICBpZiAocGFydCA9PT0gXCJtaW51dGVTdWZmaXhcIikge1xuICAgIGNvbnN0IG1pbnV0ZUluZGV4ID0gcGFydHMuaW5kZXhPZihwYXJ0cy5maW5kKCh7IHR5cGUgfSkgPT4gdHlwZSA9PT0gXCJtaW51dGVcIikpO1xuICAgIGNvbnN0IHNlY29uZEluZGV4ID0gcGFydHMuaW5kZXhPZihwYXJ0cy5maW5kKCh7IHR5cGUgfSkgPT4gdHlwZSA9PT0gXCJzZWNvbmRcIikpO1xuICAgIGNvbnN0IG1pbnV0ZVN1ZmZpeCA9IHBhcnRzW21pbnV0ZUluZGV4ICsgMV07XG4gICAgcmV0dXJuIG1pbnV0ZVN1ZmZpeCAmJiBtaW51dGVTdWZmaXgudHlwZSA9PT0gXCJsaXRlcmFsXCIgJiYgc2Vjb25kSW5kZXggLSBtaW51dGVJbmRleCA9PT0gMlxuICAgICAgPyBtaW51dGVTdWZmaXgudmFsdWU/LnRyaW0oKSB8fCBudWxsXG4gICAgICA6IG51bGw7XG4gIH1cbiAgaWYgKHBhcnQgPT09IFwic2Vjb25kU3VmZml4XCIpIHtcbiAgICBjb25zdCBzZWNvbmRJbmRleCA9IHBhcnRzLmluZGV4T2YocGFydHMuZmluZCgoeyB0eXBlIH0pID0+IHR5cGUgPT09IFwic2Vjb25kXCIpKTtcbiAgICBjb25zdCBzZWNvbmRTdWZmaXggPSBwYXJ0c1tzZWNvbmRJbmRleCArIDFdO1xuICAgIHJldHVybiBzZWNvbmRTdWZmaXggJiYgc2Vjb25kU3VmZml4LnR5cGUgPT09IFwibGl0ZXJhbFwiID8gc2Vjb25kU3VmZml4LnZhbHVlPy50cmltKCkgfHwgbnVsbCA6IG51bGw7XG4gIH1cbiAgcmV0dXJuIHBhcnRzLmZpbmQoKHsgdHlwZSB9KSA9PiAocGFydCA9PSBcIm1lcmlkaWVtXCIgPyB0eXBlID09PSBcImRheVBlcmlvZFwiIDogdHlwZSA9PT0gcGFydCkpPy52YWx1ZSB8fCBudWxsO1xufVxuZnVuY3Rpb24gZ2V0TWVyaWRpZW0oaG91cikge1xuICBpZiAoIWlzVmFsaWROdW1iZXIoaG91cikpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCBob3VyQXNOdW1iZXIgPSBwYXJzZUludChob3VyKTtcbiAgcmV0dXJuIGhvdXJBc051bWJlciA+PSAwICYmIGhvdXJBc051bWJlciA8PSAxMSA/IFwiQU1cIiA6IFwiUE1cIjtcbn1cbmZ1bmN0aW9uIGlzVmFsaWRUaW1lKHZhbHVlKSB7XG4gIGlmICghdmFsdWUgfHwgdmFsdWUuc3RhcnRzV2l0aChcIjpcIikgfHwgdmFsdWUuZW5kc1dpdGgoXCI6XCIpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGNvbnN0IHNwbGl0VmFsdWUgPSB2YWx1ZS5zcGxpdChcIjpcIik7XG4gIGNvbnN0IHZhbGlkTGVuZ3RoID0gc3BsaXRWYWx1ZS5sZW5ndGggPiAxICYmIHNwbGl0VmFsdWUubGVuZ3RoIDwgNDtcbiAgaWYgKCF2YWxpZExlbmd0aCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBjb25zdCBbaG91ciwgbWludXRlLCBzZWNvbmRdID0gc3BsaXRWYWx1ZTtcbiAgY29uc3QgaG91ckFzTnVtYmVyID0gcGFyc2VJbnQoc3BsaXRWYWx1ZVswXSk7XG4gIGNvbnN0IG1pbnV0ZUFzTnVtYmVyID0gcGFyc2VJbnQoc3BsaXRWYWx1ZVsxXSk7XG4gIGNvbnN0IHNlY29uZEFzTnVtYmVyID0gcGFyc2VJbnQoc3BsaXRWYWx1ZVsyXSk7XG4gIGNvbnN0IGhvdXJWYWxpZCA9IGlzVmFsaWROdW1iZXIoaG91cikgJiYgaG91ckFzTnVtYmVyID49IDAgJiYgaG91ckFzTnVtYmVyIDwgMjQ7XG4gIGNvbnN0IG1pbnV0ZVZhbGlkID0gaXNWYWxpZE51bWJlcihtaW51dGUpICYmIG1pbnV0ZUFzTnVtYmVyID49IDAgJiYgbWludXRlQXNOdW1iZXIgPCA2MDtcbiAgY29uc3Qgc2Vjb25kVmFsaWQgPSBpc1ZhbGlkTnVtYmVyKHNlY29uZCkgJiYgc2Vjb25kQXNOdW1iZXIgPj0gMCAmJiBzZWNvbmRBc051bWJlciA8IDYwO1xuICBpZiAoKGhvdXJWYWxpZCAmJiBtaW51dGVWYWxpZCAmJiAhc2Vjb25kKSB8fCAoaG91clZhbGlkICYmIG1pbnV0ZVZhbGlkICYmIHNlY29uZFZhbGlkKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59XG5mdW5jdGlvbiBpc1ZhbGlkVGltZVBhcnQodmFsdWUsIHBhcnQpIHtcbiAgaWYgKHBhcnQgPT09IFwibWVyaWRpZW1cIikge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gXCJBTVwiIHx8IHZhbHVlID09PSBcIlBNXCI7XG4gIH1cbiAgaWYgKCFpc1ZhbGlkTnVtYmVyKHZhbHVlKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBjb25zdCB2YWx1ZUFzTnVtYmVyID0gTnVtYmVyKHZhbHVlKTtcbiAgcmV0dXJuIHBhcnQgPT09IFwiaG91clwiID8gdmFsdWVBc051bWJlciA+PSAwICYmIHZhbHVlQXNOdW1iZXIgPCAyNCA6IHZhbHVlQXNOdW1iZXIgPj0gMCAmJiB2YWx1ZUFzTnVtYmVyIDwgNjA7XG59XG5mdW5jdGlvbiBsb2NhbGl6ZVRpbWVQYXJ0KHsgdmFsdWUsIHBhcnQsIGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtIH0pIHtcbiAgaWYgKCFpc1ZhbGlkVGltZVBhcnQodmFsdWUsIHBhcnQpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHZhbHVlQXNOdW1iZXIgPSBwYXJzZUludCh2YWx1ZSk7XG4gIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShEYXRlLlVUQygwLCAwLCAwLCBwYXJ0ID09PSBcImhvdXJcIiA/IHZhbHVlQXNOdW1iZXIgOiBwYXJ0ID09PSBcIm1lcmlkaWVtXCIgPyAodmFsdWUgPT09IFwiQU1cIiA/IDAgOiAxMikgOiAwLCBwYXJ0ID09PSBcIm1pbnV0ZVwiID8gdmFsdWVBc051bWJlciA6IDAsIHBhcnQgPT09IFwic2Vjb25kXCIgPyB2YWx1ZUFzTnVtYmVyIDogMCkpO1xuICBpZiAoIWRhdGUpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgZm9ybWF0dGVyID0gY3JlYXRlTG9jYWxlRGF0ZVRpbWVGb3JtYXR0ZXIobG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0pO1xuICBjb25zdCBwYXJ0cyA9IGZvcm1hdHRlci5mb3JtYXRUb1BhcnRzKGRhdGUpO1xuICByZXR1cm4gZ2V0TG9jYWxpemVkVGltZVBhcnQocGFydCwgcGFydHMpO1xufVxuZnVuY3Rpb24gbG9jYWxpemVUaW1lU3RyaW5nKHsgdmFsdWUsIGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBpbmNsdWRlU2Vjb25kcyA9IHRydWUgfSkge1xuICBpZiAoIWlzVmFsaWRUaW1lKHZhbHVlKSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IHsgaG91ciwgbWludXRlLCBzZWNvbmQgPSBcIjBcIiB9ID0gcGFyc2VUaW1lU3RyaW5nKHZhbHVlKTtcbiAgY29uc3QgZGF0ZUZyb21UaW1lU3RyaW5nID0gbmV3IERhdGUoRGF0ZS5VVEMoMCwgMCwgMCwgcGFyc2VJbnQoaG91ciksIHBhcnNlSW50KG1pbnV0ZSksIHBhcnNlSW50KHNlY29uZCkpKTtcbiAgY29uc3QgZm9ybWF0dGVyID0gY3JlYXRlTG9jYWxlRGF0ZVRpbWVGb3JtYXR0ZXIobG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0sIGluY2x1ZGVTZWNvbmRzKTtcbiAgcmV0dXJuIGZvcm1hdHRlcj8uZm9ybWF0KGRhdGVGcm9tVGltZVN0cmluZykgfHwgbnVsbDtcbn1cbmZ1bmN0aW9uIGxvY2FsaXplVGltZVN0cmluZ1RvUGFydHMoeyB2YWx1ZSwgbG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0gfSkge1xuICBpZiAoIWlzVmFsaWRUaW1lKHZhbHVlKSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IHsgaG91ciwgbWludXRlLCBzZWNvbmQgPSBcIjBcIiB9ID0gcGFyc2VUaW1lU3RyaW5nKHZhbHVlKTtcbiAgY29uc3QgZGF0ZUZyb21UaW1lU3RyaW5nID0gbmV3IERhdGUoRGF0ZS5VVEMoMCwgMCwgMCwgcGFyc2VJbnQoaG91ciksIHBhcnNlSW50KG1pbnV0ZSksIHBhcnNlSW50KHNlY29uZCkpKTtcbiAgaWYgKGRhdGVGcm9tVGltZVN0cmluZykge1xuICAgIGNvbnN0IGZvcm1hdHRlciA9IGNyZWF0ZUxvY2FsZURhdGVUaW1lRm9ybWF0dGVyKGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtKTtcbiAgICBjb25zdCBwYXJ0cyA9IGZvcm1hdHRlci5mb3JtYXRUb1BhcnRzKGRhdGVGcm9tVGltZVN0cmluZyk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxvY2FsaXplZEhvdXI6IGdldExvY2FsaXplZFRpbWVQYXJ0KFwiaG91clwiLCBwYXJ0cyksXG4gICAgICBsb2NhbGl6ZWRIb3VyU3VmZml4OiBnZXRMb2NhbGl6ZWRUaW1lUGFydChcImhvdXJTdWZmaXhcIiwgcGFydHMpLFxuICAgICAgbG9jYWxpemVkTWludXRlOiBnZXRMb2NhbGl6ZWRUaW1lUGFydChcIm1pbnV0ZVwiLCBwYXJ0cyksXG4gICAgICBsb2NhbGl6ZWRNaW51dGVTdWZmaXg6IGdldExvY2FsaXplZFRpbWVQYXJ0KFwibWludXRlU3VmZml4XCIsIHBhcnRzKSxcbiAgICAgIGxvY2FsaXplZFNlY29uZDogZ2V0TG9jYWxpemVkVGltZVBhcnQoXCJzZWNvbmRcIiwgcGFydHMpLFxuICAgICAgbG9jYWxpemVkU2Vjb25kU3VmZml4OiBnZXRMb2NhbGl6ZWRUaW1lUGFydChcInNlY29uZFN1ZmZpeFwiLCBwYXJ0cyksXG4gICAgICBsb2NhbGl6ZWRNZXJpZGllbTogZ2V0TG9jYWxpemVkVGltZVBhcnQoXCJtZXJpZGllbVwiLCBwYXJ0cylcbiAgICB9O1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gZ2V0VGltZVBhcnRzKHsgdmFsdWUsIGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtIH0pIHtcbiAgaWYgKCFpc1ZhbGlkVGltZSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCB7IGhvdXIsIG1pbnV0ZSwgc2Vjb25kID0gXCIwXCIgfSA9IHBhcnNlVGltZVN0cmluZyh2YWx1ZSk7XG4gIGNvbnN0IGRhdGVGcm9tVGltZVN0cmluZyA9IG5ldyBEYXRlKERhdGUuVVRDKDAsIDAsIDAsIHBhcnNlSW50KGhvdXIpLCBwYXJzZUludChtaW51dGUpLCBwYXJzZUludChzZWNvbmQpKSk7XG4gIGlmIChkYXRlRnJvbVRpbWVTdHJpbmcpIHtcbiAgICBjb25zdCBmb3JtYXR0ZXIgPSBjcmVhdGVMb2NhbGVEYXRlVGltZUZvcm1hdHRlcihsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSk7XG4gICAgY29uc3QgcGFydHMgPSBmb3JtYXR0ZXIuZm9ybWF0VG9QYXJ0cyhkYXRlRnJvbVRpbWVTdHJpbmcpO1xuICAgIHJldHVybiBwYXJ0cztcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIHBhcnNlVGltZVN0cmluZyh2YWx1ZSkge1xuICBpZiAoaXNWYWxpZFRpbWUodmFsdWUpKSB7XG4gICAgY29uc3QgW2hvdXIsIG1pbnV0ZSwgc2Vjb25kXSA9IHZhbHVlLnNwbGl0KFwiOlwiKTtcbiAgICByZXR1cm4ge1xuICAgICAgaG91cixcbiAgICAgIG1pbnV0ZSxcbiAgICAgIHNlY29uZFxuICAgIH07XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBob3VyOiBudWxsLFxuICAgIG1pbnV0ZTogbnVsbCxcbiAgICBzZWNvbmQ6IG51bGxcbiAgfTtcbn1cblxuZXhwb3J0IHsgbG9jYWxpemVUaW1lU3RyaW5nVG9QYXJ0cyBhcyBhLCBnZXRUaW1lUGFydHMgYXMgYiwgZm9ybWF0VGltZVBhcnQgYXMgYywgbG9jYWxpemVUaW1lUGFydCBhcyBkLCBnZXRMb2NhbGVIb3VyQ3ljbGUgYXMgZSwgZm9ybWF0VGltZVN0cmluZyBhcyBmLCBnZXRNZXJpZGllbSBhcyBnLCBpc1ZhbGlkVGltZSBhcyBpLCBsb2NhbGl6ZVRpbWVTdHJpbmcgYXMgbCwgbWF4VGVudGhGb3JNaW51dGVBbmRTZWNvbmQgYXMgbSwgcGFyc2VUaW1lU3RyaW5nIGFzIHAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGltZS0wZGJiMGY5Ni5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=