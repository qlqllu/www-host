"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_ba-infographic_node_modules_arcgis_business-analyst-components_dis-3ff411"],{

/***/ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/calcite-slider.entry.js":
/*!*****************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/calcite-slider.entry.js ***!
  \*****************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   calcite_slider: () => (/* binding */ Slider)
/* harmony export */ });
/* harmony import */ var _index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-4e647411.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/index-4e647411.js");
/* harmony import */ var _guid_88a3729f_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./guid-88a3729f.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/guid-88a3729f.js");
/* harmony import */ var _dom_f1ee4d04_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./dom-f1ee4d04.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/dom-f1ee4d04.js");
/* harmony import */ var _form_98fe0e7c_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./form-98fe0e7c.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/form-98fe0e7c.js");
/* harmony import */ var _interactive_29995522_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./interactive-29995522.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/interactive-29995522.js");
/* harmony import */ var _key_b75491c4_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./key-b75491c4.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/key-b75491c4.js");
/* harmony import */ var _label_6d1e3168_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./label-6d1e3168.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/label-6d1e3168.js");
/* harmony import */ var _loadable_cc14d728_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./loadable-cc14d728.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/loadable-cc14d728.js");
/* harmony import */ var _locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./locale-f7b2fbb0.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/locale-f7b2fbb0.js");
/* harmony import */ var _math_7efd987a_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./math-7efd987a.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/math-7efd987a.js");














/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.5
 */
const CSS = {
  handleLabel: "handle__label",
  handleLabelMinValue: "handle__label--minValue",
  handleLabelValue: "handle__label--value",
  tickMin: "tick__label--min",
  tickMax: "tick__label--max"
};

const sliderCss = "@charset \"UTF-8\";@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host([disabled]){pointer-events:none;cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}.scale--s{--calcite-slider-handle-size:10px;--calcite-slider-handle-extension-height:6.5px;--calcite-slider-container-font-size:var(--calcite-font-size--3)}.scale--s .handle__label,.scale--s .tick__label{line-height:.75rem}.scale--m{--calcite-slider-handle-size:14px;--calcite-slider-handle-extension-height:8px;--calcite-slider-container-font-size:var(--calcite-font-size--2)}.scale--m .handle__label,.scale--m .tick__label{line-height:1rem}.scale--l{--calcite-slider-handle-size:16px;--calcite-slider-handle-extension-height:10.5px;--calcite-slider-container-font-size:var(--calcite-font-size--1)}.scale--l .handle__label,.scale--l .tick__label{line-height:1rem}.handle__label,.tick__label{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-ui-text-2);font-size:var(--calcite-slider-container-font-size)}:host{display:block}.container{position:relative;display:block;overflow-wrap:normal;word-break:normal;padding-inline:calc(var(--calcite-slider-handle-size) * 0.5);padding-block:calc(var(--calcite-slider-handle-size) * 0.5);margin-block:calc(var(--calcite-slider-handle-size) * 0.5);margin-inline:0;--calcite-slider-full-handle-height:calc(\n    var(--calcite-slider-handle-size) + var(--calcite-slider-handle-extension-height)\n  )}:host([disabled]) .track__range,:host([disabled]) .tick--active{background-color:var(--calcite-ui-text-3)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.scale--s .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset:-6px}.scale--m .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset:-8px}.scale--l .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset:-9px}:host([precise]:not([has-histogram])) .container .thumb--value{--calcite-slider-thumb-y-offset:calc(var(--calcite-slider-full-handle-height) * -1)}.thumb-container{position:relative;max-inline-size:100%}.thumb{--calcite-slider-thumb-x-offset:calc(var(--calcite-slider-handle-size) * 0.5);position:absolute;margin:0px;display:flex;cursor:pointer;flex-direction:column;align-items:center;border-style:none;background-color:transparent;padding:0px;font-family:inherit;outline:2px solid transparent;outline-offset:2px;transform:translate(var(--calcite-slider-thumb-x-offset), var(--calcite-slider-thumb-y-offset))}.thumb .handle__label.static,.thumb .handle__label.transformed{position:absolute;inset-block:0px;opacity:0}.thumb .handle__label.hyphen::after{content:\"â€”\";display:inline-block;inline-size:1em}.thumb .handle__label.hyphen--wrap{display:flex}.thumb .handle{box-sizing:border-box;border-radius:9999px;background-color:var(--calcite-ui-foreground-1);outline-color:transparent;block-size:var(--calcite-slider-handle-size);inline-size:var(--calcite-slider-handle-size);box-shadow:0 0 0 2px var(--calcite-ui-text-3) inset;transition:border var(--calcite-internal-animation-timing-medium) ease, background-color var(--calcite-internal-animation-timing-medium) ease, box-shadow var(--calcite-animation-timing) ease}.thumb .handle-extension{inline-size:0.125rem;block-size:var(--calcite-slider-handle-extension-height);background-color:var(--calcite-ui-text-3)}.thumb:hover .handle{box-shadow:0 0 0 3px var(--calcite-ui-brand) inset}.thumb:hover .handle-extension{background-color:var(--calcite-ui-brand)}.thumb:focus .handle{outline:2px solid var(--calcite-ui-brand);outline-offset:2px}.thumb:focus .handle-extension{background-color:var(--calcite-ui-brand)}.thumb.thumb--minValue{transform:translate(calc(var(--calcite-slider-thumb-x-offset) * -1), var(--calcite-slider-thumb-y-offset))}.thumb.thumb--precise{--calcite-slider-thumb-y-offset:-2px}:host([label-handles]) .thumb{--calcite-slider-thumb-x-offset:50%}:host([label-handles]):host(:not([has-histogram])) .scale--s .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset:-23px}:host([label-handles]):host(:not([has-histogram])) .scale--m .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset:-30px}:host([label-handles]):host(:not([has-histogram])) .scale--l .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset:-32px}:host([has-histogram][label-handles]) .handle__label,:host([label-handles]:not([has-histogram])) .thumb--minValue.thumb--precise .handle__label{margin-block-start:0.5em}:host(:not([has-histogram]):not([precise])) .handle__label,:host([label-handles]:not([has-histogram])) .thumb--value .handle__label{margin-block-end:0.5em}:host([label-handles][precise]):host(:not([has-histogram])) .scale--s .thumb--value{--calcite-slider-thumb-y-offset:-33px}:host([label-handles][precise]):host(:not([has-histogram])) .scale--m .thumb--value{--calcite-slider-thumb-y-offset:-44px}:host([label-handles][precise]):host(:not([has-histogram])) .scale--l .thumb--value{--calcite-slider-thumb-y-offset:-49px}.thumb:focus .handle,.thumb--active .handle{background-color:var(--calcite-ui-brand);box-shadow:0 0 8px 0 rgba(0, 0, 0, 0.16)}.thumb:hover.thumb--precise:after,.thumb:focus.thumb--precise:after,.thumb--active.thumb--precise:after{background-color:var(--calcite-ui-brand)}.track{position:relative;block-size:0.125rem;border-radius:0px;background-color:var(--calcite-ui-border-2);transition:all var(--calcite-internal-animation-timing-medium) ease-in}.track__range{position:absolute;inset-block-start:0px;block-size:0.125rem;background-color:var(--calcite-ui-brand)}.container--range .track__range:hover{cursor:ew-resize}.container--range .track__range:after{position:absolute;inline-size:100%;content:\"\";inset-block-start:calc(var(--calcite-slider-full-handle-height) * 0.5 * -1);block-size:calc(var(--calcite-slider-handle-size) + var(--calcite-slider-handle-extension-height))}@media (forced-colors: active){.thumb{outline-width:0;outline-offset:0}.handle{outline:2px solid transparent;outline-offset:2px}.thumb:focus .handle,.thumb .handle-extension,.thumb:hover .handle-extension,.thumb:focus .handle-extension,.thumb:active .handle-extension{background-color:canvasText}.track{background-color:canvasText}.track__range{background-color:highlight}}.tick{position:absolute;block-size:0.25rem;inline-size:0.125rem;border-width:1px;border-style:solid;background-color:var(--calcite-ui-border-input);border-color:var(--calcite-ui-foreground-1);inset-block-start:-2px;pointer-events:none;margin-inline-start:calc(-1 * 0.125rem)}.tick--active{background-color:var(--calcite-ui-brand)}.tick__label{pointer-events:none;margin-block-start:0.875rem;display:flex;justify-content:center}.tick__label--min{transition:opacity var(--calcite-animation-timing)}.tick__label--max{transition:opacity var(--calcite-internal-animation-timing-fast)}:host([has-histogram][label-handles]) .tick__label--min,:host([has-histogram][label-handles]) .tick__label--max,:host([has-histogram][precise]) .tick__label--min,:host([has-histogram][precise]) .tick__label--max{font-weight:var(--calcite-font-weight-normal);color:var(--calcite-ui-text-3)}.graph{color:var(--calcite-ui-foreground-3);block-size:48px}:host([label-ticks][ticks]) .container{padding-block-end:calc(0.875rem + var(--calcite-slider-container-font-size))}:host([has-histogram]):host([precise][label-handles]) .container{padding-block-end:calc(var(--calcite-slider-full-handle-height) + 1em)}:host([has-histogram]):host([label-handles]:not([precise])) .container{padding-block-end:calc(var(--calcite-slider-handle-size) * 0.5 + 1em)}:host([has-histogram]):host([precise]:not([label-handles])) .container{padding-block-end:var(--calcite-slider-full-handle-height)}:host(:not([has-histogram])):host([precise]:not([label-handles])) .container{padding-block-start:var(--calcite-slider-full-handle-height)}:host(:not([has-histogram])):host([precise]:not([label-handles])) .container--range{padding-block-end:var(--calcite-slider-full-handle-height)}:host(:not([has-histogram])):host([label-handles]:not([precise])) .container{padding-block-start:calc(var(--calcite-slider-full-handle-height) + 4px)}:host(:not([has-histogram])):host([label-handles][precise]) .container{padding-block-start:calc(var(--calcite-slider-full-handle-height) + var(--calcite-slider-container-font-size) + 4px)}:host(:not([has-histogram])):host([label-handles][precise]) .container--range{padding-block-end:calc(var(--calcite-slider-full-handle-height) + var(--calcite-slider-container-font-size) + 4px)}::slotted(input[slot=hidden-form-input]){margin:0 !important;opacity:0 !important;outline:none !important;padding:0 !important;position:absolute !important;inset:0 !important;transform:none !important;-webkit-appearance:none !important;z-index:-1 !important}";

function isRange(value) {
  return Array.isArray(value);
}
const Slider = class {
  constructor(hostRef) {
    (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.calciteSliderInput = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteSliderInput", 6);
    this.calciteSliderChange = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteSliderChange", 6);
    this.activeProp = "value";
    this.guid = `calcite-slider-${(0,_guid_88a3729f_js__WEBPACK_IMPORTED_MODULE_1__.g)()}`;
    this.dragUpdate = (event) => {
      event.preventDefault();
      if (this.dragProp) {
        const value = this.translate(event.clientX || event.pageX);
        if (isRange(this.value) && this.dragProp === "minMaxValue") {
          if (this.minValueDragRange && this.maxValueDragRange && this.minMaxValueRange) {
            const newMinValue = value - this.minValueDragRange;
            const newMaxValue = value + this.maxValueDragRange;
            if (newMaxValue <= this.max &&
              newMinValue >= this.min &&
              newMaxValue - newMinValue === this.minMaxValueRange) {
              this.setValue({
                minValue: this.clamp(newMinValue, "minValue"),
                maxValue: this.clamp(newMaxValue, "maxValue")
              });
            }
          }
          else {
            this.minValueDragRange = value - this.minValue;
            this.maxValueDragRange = this.maxValue - value;
            this.minMaxValueRange = this.maxValue - this.minValue;
          }
        }
        else {
          this.setValue({ [this.dragProp]: this.clamp(value, this.dragProp) });
        }
      }
    };
    this.pointerUpDragEnd = (event) => {
      if (!(0,_dom_f1ee4d04_js__WEBPACK_IMPORTED_MODULE_2__.i)(event)) {
        return;
      }
      this.dragEnd(event);
    };
    this.dragEnd = (event) => {
      this.removeDragListeners();
      this.focusActiveHandle(event.clientX);
      if (this.lastDragPropValue != this[this.dragProp]) {
        this.emitChange();
      }
      this.dragProp = null;
      this.lastDragPropValue = null;
      this.minValueDragRange = null;
      this.maxValueDragRange = null;
      this.minMaxValueRange = null;
    };
    /**
     * Set the reference of the track Element
     *
     * @internal
     * @param node
     */
    this.storeTrackRef = (node) => {
      this.trackEl = node;
    };
    /**
     * Returns a string representing the localized label value based if the groupSeparator prop is parsed.
     *
     * @param value
     */
    this.determineGroupSeparator = (value) => {
      if (typeof value === "number") {
        _locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_3__.n.numberFormatOptions = {
          locale: this.effectiveLocale,
          numberingSystem: this.numberingSystem,
          useGrouping: this.groupSeparator
        };
        return _locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_3__.n.localize(value.toString());
      }
    };
    this.disabled = false;
    this.groupSeparator = false;
    this.hasHistogram = false;
    this.histogram = undefined;
    this.histogramStops = undefined;
    this.labelHandles = false;
    this.labelTicks = false;
    this.max = 100;
    this.maxLabel = undefined;
    this.maxValue = undefined;
    this.min = 0;
    this.minLabel = undefined;
    this.minValue = undefined;
    this.mirrored = false;
    this.name = undefined;
    this.numberingSystem = undefined;
    this.pageStep = undefined;
    this.precise = false;
    this.required = false;
    this.snap = false;
    this.step = 1;
    this.ticks = undefined;
    this.value = 0;
    this.scale = "m";
    this.effectiveLocale = "";
    this.minMaxValueRange = null;
    this.minValueDragRange = null;
    this.maxValueDragRange = null;
    this.tickValues = [];
  }
  histogramWatcher(newHistogram) {
    this.hasHistogram = !!newHistogram;
  }
  valueHandler() {
    this.setMinMaxFromValue();
  }
  minMaxValueHandler() {
    this.setValueFromMinMax();
  }
  //--------------------------------------------------------------------------
  //
  //  Lifecycle
  //
  //--------------------------------------------------------------------------
  connectedCallback() {
    (0,_locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_3__.c)(this);
    this.setMinMaxFromValue();
    this.setValueFromMinMax();
    (0,_label_6d1e3168_js__WEBPACK_IMPORTED_MODULE_4__.c)(this);
    (0,_form_98fe0e7c_js__WEBPACK_IMPORTED_MODULE_5__.c)(this);
  }
  disconnectedCallback() {
    (0,_label_6d1e3168_js__WEBPACK_IMPORTED_MODULE_4__.d)(this);
    (0,_form_98fe0e7c_js__WEBPACK_IMPORTED_MODULE_5__.d)(this);
    (0,_locale_f7b2fbb0_js__WEBPACK_IMPORTED_MODULE_3__.d)(this);
    this.removeDragListeners();
  }
  componentWillLoad() {
    (0,_loadable_cc14d728_js__WEBPACK_IMPORTED_MODULE_6__.a)(this);
    this.tickValues = this.generateTickValues();
    if (!isRange(this.value)) {
      this.value = this.clamp(this.value);
    }
    (0,_form_98fe0e7c_js__WEBPACK_IMPORTED_MODULE_5__.a)(this, this.value);
    if (this.snap && !isRange(this.value)) {
      this.value = this.getClosestStep(this.value);
    }
    if (this.histogram) {
      this.hasHistogram = true;
    }
  }
  componentDidLoad() {
    (0,_loadable_cc14d728_js__WEBPACK_IMPORTED_MODULE_6__.s)(this);
  }
  componentDidRender() {
    if (this.labelHandles) {
      this.adjustHostObscuredHandleLabel("value");
      if (isRange(this.value)) {
        this.adjustHostObscuredHandleLabel("minValue");
        if (!(this.precise && !this.hasHistogram)) {
          this.hyphenateCollidingRangeHandleLabels();
        }
      }
    }
    this.hideObscuredBoundingTickLabels();
    (0,_interactive_29995522_js__WEBPACK_IMPORTED_MODULE_7__.u)(this);
  }
  render() {
    const id = this.el.id || this.guid;
    const maxProp = isRange(this.value) ? "maxValue" : "value";
    const value = isRange(this.value) ? this.maxValue : this.value;
    const displayedValue = this.determineGroupSeparator(value);
    const displayedMinValue = this.determineGroupSeparator(this.minValue);
    const min = this.minValue || this.min;
    const useMinValue = this.shouldUseMinValue();
    const minInterval = this.getUnitInterval(useMinValue ? this.minValue : min) * 100;
    const maxInterval = this.getUnitInterval(value) * 100;
    const mirror = this.shouldMirror();
    const leftThumbOffset = `${mirror ? 100 - minInterval : minInterval}%`;
    const rightThumbOffset = `${mirror ? maxInterval : 100 - maxInterval}%`;
    const valueIsRange = isRange(this.value);
    const handleLabelMinValueClasses = `${CSS.handleLabel} ${CSS.handleLabelMinValue}`;
    const handleLabelValueClasses = `${CSS.handleLabel} ${CSS.handleLabelValue}`;
    const handle = ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { "aria-disabled": this.disabled, "aria-label": valueIsRange ? this.maxLabel : this.minLabel, "aria-orientation": "horizontal", "aria-valuemax": this.max, "aria-valuemin": this.min, "aria-valuenow": value, class: {
        thumb: true,
        "thumb--value": true,
        "thumb--active": this.lastDragProp !== "minMaxValue" && this.dragProp === maxProp
      }, onBlur: () => (this.activeProp = null), onFocus: () => (this.activeProp = maxProp), onPointerDown: (event) => this.pointerDownDragStart(event, maxProp), ref: (el) => (this.maxHandle = el), role: "slider", style: { right: rightThumbOffset }, tabIndex: 0 }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "handle" })));
    const labeledHandle = ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { "aria-disabled": this.disabled, "aria-label": valueIsRange ? this.maxLabel : this.minLabel, "aria-orientation": "horizontal", "aria-valuemax": this.max, "aria-valuemin": this.min, "aria-valuenow": value, class: {
        thumb: true,
        "thumb--value": true,
        "thumb--active": this.lastDragProp !== "minMaxValue" && this.dragProp === maxProp
      }, onBlur: () => (this.activeProp = null), onFocus: () => (this.activeProp = maxProp), onPointerDown: (event) => this.pointerDownDragStart(event, maxProp), ref: (el) => (this.maxHandle = el), role: "slider", style: { right: rightThumbOffset }, tabIndex: 0 }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-hidden": "true", class: handleLabelValueClasses }, displayedValue), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-hidden": "true", class: `${handleLabelValueClasses} static` }, displayedValue), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-hidden": "true", class: `${handleLabelValueClasses} transformed` }, displayedValue), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "handle" })));
    const histogramLabeledHandle = ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { "aria-disabled": this.disabled, "aria-label": valueIsRange ? this.maxLabel : this.minLabel, "aria-orientation": "horizontal", "aria-valuemax": this.max, "aria-valuemin": this.min, "aria-valuenow": value, class: {
        thumb: true,
        "thumb--value": true,
        "thumb--active": this.lastDragProp !== "minMaxValue" && this.dragProp === maxProp
      }, onBlur: () => (this.activeProp = null), onFocus: () => (this.activeProp = maxProp), onPointerDown: (event) => this.pointerDownDragStart(event, maxProp), ref: (el) => (this.maxHandle = el), role: "slider", style: { right: rightThumbOffset }, tabIndex: 0 }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "handle" }), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-hidden": "true", class: handleLabelValueClasses }, displayedValue), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-hidden": "true", class: `${handleLabelValueClasses} static` }, displayedValue), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-hidden": "true", class: `${handleLabelValueClasses} transformed` }, displayedValue)));
    const preciseHandle = ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { "aria-disabled": this.disabled, "aria-label": valueIsRange ? this.maxLabel : this.minLabel, "aria-orientation": "horizontal", "aria-valuemax": this.max, "aria-valuemin": this.min, "aria-valuenow": value, class: {
        thumb: true,
        "thumb--value": true,
        "thumb--active": this.lastDragProp !== "minMaxValue" && this.dragProp === maxProp,
        "thumb--precise": true
      }, onBlur: () => (this.activeProp = null), onFocus: () => (this.activeProp = maxProp), onPointerDown: (event) => this.pointerDownDragStart(event, maxProp), ref: (el) => (this.maxHandle = el), role: "slider", style: { right: rightThumbOffset }, tabIndex: 0 }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "handle" }), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "handle-extension" })));
    const histogramPreciseHandle = ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { "aria-disabled": this.disabled, "aria-label": valueIsRange ? this.maxLabel : this.minLabel, "aria-orientation": "horizontal", "aria-valuemax": this.max, "aria-valuemin": this.min, "aria-valuenow": value, class: {
        thumb: true,
        "thumb--value": true,
        "thumb--active": this.lastDragProp !== "minMaxValue" && this.dragProp === maxProp,
        "thumb--precise": true
      }, onBlur: () => (this.activeProp = null), onFocus: () => (this.activeProp = maxProp), onPointerDown: (event) => this.pointerDownDragStart(event, maxProp), ref: (el) => (this.maxHandle = el), role: "slider", style: { right: rightThumbOffset }, tabIndex: 0 }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "handle-extension" }), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "handle" })));
    const labeledPreciseHandle = ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { "aria-disabled": this.disabled, "aria-label": valueIsRange ? this.maxLabel : this.minLabel, "aria-orientation": "horizontal", "aria-valuemax": this.max, "aria-valuemin": this.min, "aria-valuenow": value, class: {
        thumb: true,
        "thumb--value": true,
        "thumb--active": this.lastDragProp !== "minMaxValue" && this.dragProp === maxProp,
        "thumb--precise": true
      }, onBlur: () => (this.activeProp = null), onFocus: () => (this.activeProp = maxProp), onPointerDown: (event) => this.pointerDownDragStart(event, maxProp), ref: (el) => (this.maxHandle = el), role: "slider", style: { right: rightThumbOffset }, tabIndex: 0 }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-hidden": "true", class: handleLabelValueClasses }, displayedValue), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-hidden": "true", class: `${handleLabelValueClasses} static` }, displayedValue), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-hidden": "true", class: `${handleLabelValueClasses} transformed` }, displayedValue), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "handle" }), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "handle-extension" })));
    const histogramLabeledPreciseHandle = ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { "aria-disabled": this.disabled, "aria-label": valueIsRange ? this.maxLabel : this.minLabel, "aria-orientation": "horizontal", "aria-valuemax": this.max, "aria-valuemin": this.min, "aria-valuenow": value, class: {
        thumb: true,
        "thumb--value": true,
        "thumb--active": this.lastDragProp !== "minMaxValue" && this.dragProp === maxProp,
        "thumb--precise": true
      }, onBlur: () => (this.activeProp = null), onFocus: () => (this.activeProp = maxProp), onPointerDown: (event) => this.pointerDownDragStart(event, maxProp), ref: (el) => (this.maxHandle = el), role: "slider", style: { right: rightThumbOffset }, tabIndex: 0 }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "handle-extension" }), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "handle" }), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-hidden": "true", class: handleLabelValueClasses }, displayedValue), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-hidden": "true", class: `${handleLabelValueClasses} static` }, displayedValue), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-hidden": "true", class: `${handleLabelValueClasses} transformed` }, displayedValue)));
    const minHandle = ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { "aria-disabled": this.disabled, "aria-label": this.minLabel, "aria-orientation": "horizontal", "aria-valuemax": this.max, "aria-valuemin": this.min, "aria-valuenow": this.minValue, class: {
        thumb: true,
        "thumb--minValue": true,
        "thumb--active": this.dragProp === "minValue"
      }, onBlur: () => (this.activeProp = null), onFocus: () => (this.activeProp = "minValue"), onPointerDown: (event) => this.pointerDownDragStart(event, "minValue"), ref: (el) => (this.minHandle = el), role: "slider", style: { left: leftThumbOffset }, tabIndex: 0 }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "handle" })));
    const minLabeledHandle = ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { "aria-disabled": this.disabled, "aria-label": this.minLabel, "aria-orientation": "horizontal", "aria-valuemax": this.max, "aria-valuemin": this.min, "aria-valuenow": this.minValue, class: {
        thumb: true,
        "thumb--minValue": true,
        "thumb--active": this.dragProp === "minValue"
      }, onBlur: () => (this.activeProp = null), onFocus: () => (this.activeProp = "minValue"), onPointerDown: (event) => this.pointerDownDragStart(event, "minValue"), ref: (el) => (this.minHandle = el), role: "slider", style: { left: leftThumbOffset }, tabIndex: 0 }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-hidden": "true", class: handleLabelMinValueClasses }, displayedMinValue), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-hidden": "true", class: `${handleLabelMinValueClasses} static` }, displayedMinValue), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-hidden": "true", class: `${handleLabelMinValueClasses} transformed` }, displayedMinValue), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "handle" })));
    const minHistogramLabeledHandle = ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { "aria-disabled": this.disabled, "aria-label": this.minLabel, "aria-orientation": "horizontal", "aria-valuemax": this.max, "aria-valuemin": this.min, "aria-valuenow": this.minValue, class: {
        thumb: true,
        "thumb--minValue": true,
        "thumb--active": this.dragProp === "minValue"
      }, onBlur: () => (this.activeProp = null), onFocus: () => (this.activeProp = "minValue"), onPointerDown: (event) => this.pointerDownDragStart(event, "minValue"), ref: (el) => (this.minHandle = el), role: "slider", style: { left: leftThumbOffset }, tabIndex: 0 }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "handle" }), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-hidden": "true", class: handleLabelMinValueClasses }, displayedMinValue), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-hidden": "true", class: `${handleLabelMinValueClasses} static` }, displayedMinValue), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-hidden": "true", class: `${handleLabelMinValueClasses} transformed` }, displayedMinValue)));
    const minPreciseHandle = ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { "aria-disabled": this.disabled, "aria-label": this.minLabel, "aria-orientation": "horizontal", "aria-valuemax": this.max, "aria-valuemin": this.min, "aria-valuenow": this.minValue, class: {
        thumb: true,
        "thumb--minValue": true,
        "thumb--active": this.dragProp === "minValue",
        "thumb--precise": true
      }, onBlur: () => (this.activeProp = null), onFocus: () => (this.activeProp = "minValue"), onPointerDown: (event) => this.pointerDownDragStart(event, "minValue"), ref: (el) => (this.minHandle = el), role: "slider", style: { left: leftThumbOffset }, tabIndex: 0 }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "handle-extension" }), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "handle" })));
    const minLabeledPreciseHandle = ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { "aria-disabled": this.disabled, "aria-label": this.minLabel, "aria-orientation": "horizontal", "aria-valuemax": this.max, "aria-valuemin": this.min, "aria-valuenow": this.minValue, class: {
        thumb: true,
        "thumb--minValue": true,
        "thumb--active": this.dragProp === "minValue",
        "thumb--precise": true
      }, onBlur: () => (this.activeProp = null), onFocus: () => (this.activeProp = "minValue"), onPointerDown: (event) => this.pointerDownDragStart(event, "minValue"), ref: (el) => (this.minHandle = el), role: "slider", style: { left: leftThumbOffset }, tabIndex: 0 }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "handle-extension" }), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "handle" }), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-hidden": "true", class: handleLabelMinValueClasses }, displayedMinValue), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-hidden": "true", class: `${handleLabelMinValueClasses} static` }, displayedMinValue), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-hidden": "true", class: `${handleLabelMinValueClasses} transformed` }, displayedMinValue)));
    return ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.H, { id: id, onTouchStart: this.handleTouchStart }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: {
        ["container"]: true,
        ["container--range"]: valueIsRange,
        [`scale--${this.scale}`]: true
      } }, this.renderGraph(), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "track", ref: this.storeTrackRef }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "track__range", onPointerDown: (event) => this.pointerDownDragStart(event, "minMaxValue"), style: {
        left: `${mirror ? 100 - maxInterval : minInterval}%`,
        right: `${mirror ? minInterval : 100 - maxInterval}%`
      } }), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "ticks" }, this.tickValues.map((tick) => {
      const tickOffset = `${this.getUnitInterval(tick) * 100}%`;
      let activeTicks = tick >= min && tick <= value;
      if (useMinValue) {
        activeTicks = tick >= this.minValue && tick <= this.maxValue;
      }
      return ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: {
          tick: true,
          "tick--active": activeTicks
        }, style: {
          left: mirror ? "" : tickOffset,
          right: mirror ? tickOffset : ""
        } }, this.renderTickLabel(tick)));
    }))), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "thumb-container" }, !this.precise && !this.labelHandles && valueIsRange && minHandle, !this.hasHistogram &&
      !this.precise &&
      this.labelHandles &&
      valueIsRange &&
      minLabeledHandle, this.precise && !this.labelHandles && valueIsRange && minPreciseHandle, this.precise && this.labelHandles && valueIsRange && minLabeledPreciseHandle, this.hasHistogram &&
      !this.precise &&
      this.labelHandles &&
      valueIsRange &&
      minHistogramLabeledHandle, !this.precise && !this.labelHandles && handle, !this.hasHistogram && !this.precise && this.labelHandles && labeledHandle, !this.hasHistogram && this.precise && !this.labelHandles && preciseHandle, this.hasHistogram && this.precise && !this.labelHandles && histogramPreciseHandle, !this.hasHistogram && this.precise && this.labelHandles && labeledPreciseHandle, this.hasHistogram && !this.precise && this.labelHandles && histogramLabeledHandle, this.hasHistogram &&
      this.precise &&
      this.labelHandles &&
      histogramLabeledPreciseHandle, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)(_form_98fe0e7c_js__WEBPACK_IMPORTED_MODULE_5__.H, { component: this })))));
  }
  renderGraph() {
    return this.histogram ? ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-graph", { class: "graph", colorStops: this.histogramStops, data: this.histogram, highlightMax: isRange(this.value) ? this.maxValue : this.value, highlightMin: isRange(this.value) ? this.minValue : this.min, max: this.max, min: this.min })) : null;
  }
  renderTickLabel(tick) {
    const valueIsRange = isRange(this.value);
    const isMinTickLabel = tick === this.min;
    const isMaxTickLabel = tick === this.max;
    const displayedTickValue = this.determineGroupSeparator(tick);
    const tickLabel = ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: {
        tick__label: true,
        [CSS.tickMin]: isMinTickLabel,
        [CSS.tickMax]: isMaxTickLabel
      } }, displayedTickValue));
    if (this.labelTicks && !this.hasHistogram && !valueIsRange) {
      return tickLabel;
    }
    if (this.labelTicks &&
      !this.hasHistogram &&
      valueIsRange &&
      !this.precise &&
      !this.labelHandles) {
      return tickLabel;
    }
    if (this.labelTicks &&
      !this.hasHistogram &&
      valueIsRange &&
      !this.precise &&
      this.labelHandles) {
      return tickLabel;
    }
    if (this.labelTicks &&
      !this.hasHistogram &&
      valueIsRange &&
      this.precise &&
      (isMinTickLabel || isMaxTickLabel)) {
      return tickLabel;
    }
    if (this.labelTicks && this.hasHistogram && !this.precise && !this.labelHandles) {
      return tickLabel;
    }
    if (this.labelTicks &&
      this.hasHistogram &&
      this.precise &&
      !this.labelHandles &&
      (isMinTickLabel || isMaxTickLabel)) {
      return tickLabel;
    }
    if (this.labelTicks &&
      this.hasHistogram &&
      !this.precise &&
      this.labelHandles &&
      (isMinTickLabel || isMaxTickLabel)) {
      return tickLabel;
    }
    if (this.labelTicks &&
      this.hasHistogram &&
      this.precise &&
      this.labelHandles &&
      (isMinTickLabel || isMaxTickLabel)) {
      return tickLabel;
    }
    return null;
  }
  //--------------------------------------------------------------------------
  //
  //  Event Listeners
  //
  //--------------------------------------------------------------------------
  keyDownHandler(event) {
    const mirror = this.shouldMirror();
    const { activeProp, max, min, pageStep, step } = this;
    const value = this[activeProp];
    const { key } = event;
    if ((0,_key_b75491c4_js__WEBPACK_IMPORTED_MODULE_8__.i)(key)) {
      event.preventDefault();
      return;
    }
    let adjustment;
    if (key === "ArrowUp" || key === "ArrowRight") {
      const directionFactor = mirror && key === "ArrowRight" ? -1 : 1;
      adjustment = value + step * directionFactor;
    }
    else if (key === "ArrowDown" || key === "ArrowLeft") {
      const directionFactor = mirror && key === "ArrowLeft" ? -1 : 1;
      adjustment = value - step * directionFactor;
    }
    else if (key === "PageUp") {
      if (pageStep) {
        adjustment = value + pageStep;
      }
    }
    else if (key === "PageDown") {
      if (pageStep) {
        adjustment = value - pageStep;
      }
    }
    else if (key === "Home") {
      adjustment = min;
    }
    else if (key === "End") {
      adjustment = max;
    }
    if (isNaN(adjustment)) {
      return;
    }
    event.preventDefault();
    const fixedDecimalAdjustment = Number(adjustment.toFixed((0,_math_7efd987a_js__WEBPACK_IMPORTED_MODULE_9__.d)(step)));
    this.setValue({
      [activeProp]: this.clamp(fixedDecimalAdjustment, activeProp)
    });
  }
  pointerDownHandler(event) {
    if (!(0,_dom_f1ee4d04_js__WEBPACK_IMPORTED_MODULE_2__.i)(event)) {
      return;
    }
    const x = event.clientX || event.pageX;
    const position = this.translate(x);
    let prop = "value";
    if (isRange(this.value)) {
      const inRange = position >= this.minValue && position <= this.maxValue;
      if (inRange && this.lastDragProp === "minMaxValue") {
        prop = "minMaxValue";
      }
      else {
        const closerToMax = Math.abs(this.maxValue - position) < Math.abs(this.minValue - position);
        prop = closerToMax || position > this.maxValue ? "maxValue" : "minValue";
      }
    }
    this.lastDragPropValue = this[prop];
    this.dragStart(prop);
    const isThumbActive = this.el.shadowRoot.querySelector(".thumb:active");
    if (!isThumbActive) {
      this.setValue({ [prop]: this.clamp(position, prop) });
    }
    this.focusActiveHandle(x);
  }
  handleTouchStart(event) {
    // needed to prevent extra click at the end of a handle drag
    event.preventDefault();
  }
  //--------------------------------------------------------------------------
  //
  //  Public Methods
  //
  //--------------------------------------------------------------------------
  /** Sets focus on the component. */
  async setFocus() {
    await (0,_loadable_cc14d728_js__WEBPACK_IMPORTED_MODULE_6__.c)(this);
    const handle = this.minHandle ? this.minHandle : this.maxHandle;
    handle?.focus();
  }
  //--------------------------------------------------------------------------
  //
  //  Private Methods
  //
  //--------------------------------------------------------------------------
  setValueFromMinMax() {
    const { minValue, maxValue } = this;
    if (typeof minValue === "number" && typeof maxValue === "number") {
      this.value = [minValue, maxValue];
    }
  }
  setMinMaxFromValue() {
    const { value } = this;
    if (isRange(value)) {
      this.minValue = value[0];
      this.maxValue = value[1];
    }
  }
  onLabelClick() {
    this.setFocus();
  }
  shouldMirror() {
    return this.mirrored && !this.hasHistogram;
  }
  shouldUseMinValue() {
    if (!isRange(this.value)) {
      return false;
    }
    return ((this.hasHistogram && this.maxValue === 0) || (!this.hasHistogram && this.minValue === 0));
  }
  generateTickValues() {
    const ticks = [];
    let current = this.min;
    while (this.ticks && current < this.max + this.ticks) {
      ticks.push(Math.min(current, this.max));
      current = current + this.ticks;
    }
    return ticks;
  }
  pointerDownDragStart(event, prop) {
    if (!(0,_dom_f1ee4d04_js__WEBPACK_IMPORTED_MODULE_2__.i)(event)) {
      return;
    }
    this.dragStart(prop);
  }
  dragStart(prop) {
    this.dragProp = prop;
    this.lastDragProp = this.dragProp;
    this.activeProp = prop;
    document.addEventListener("pointermove", this.dragUpdate);
    document.addEventListener("pointerup", this.pointerUpDragEnd);
    document.addEventListener("pointercancel", this.dragEnd);
  }
  focusActiveHandle(valueX) {
    switch (this.dragProp) {
      case "minValue":
        this.minHandle.focus();
        break;
      case "maxValue":
      case "value":
        this.maxHandle.focus();
        break;
      case "minMaxValue":
        this.getClosestHandle(valueX).focus();
        break;
    }
  }
  emitInput() {
    this.calciteSliderInput.emit();
  }
  emitChange() {
    this.calciteSliderChange.emit();
  }
  removeDragListeners() {
    document.removeEventListener("pointermove", this.dragUpdate);
    document.removeEventListener("pointerup", this.pointerUpDragEnd);
    document.removeEventListener("pointercancel", this.dragEnd);
  }
  /**
   * Set prop value(s) if changed at the component level
   *
   * @param {object} values - a set of key/value pairs delineating what properties in the component to update
   */
  setValue(values) {
    let valueChanged;
    Object.keys(values).forEach((propName) => {
      const newValue = values[propName];
      if (!valueChanged) {
        const oldValue = this[propName];
        valueChanged = oldValue !== newValue;
      }
      this[propName] = newValue;
    });
    if (!valueChanged) {
      return;
    }
    const dragging = this.dragProp;
    if (!dragging) {
      this.emitChange();
    }
    this.emitInput();
  }
  /**
   * If number is outside range, constrain to min or max
   *
   * @param value
   * @param prop
   * @internal
   */
  clamp(value, prop) {
    value = (0,_math_7efd987a_js__WEBPACK_IMPORTED_MODULE_9__.c)(value, this.min, this.max);
    // ensure that maxValue and minValue don't swap positions
    if (prop === "maxValue") {
      value = Math.max(value, this.minValue);
    }
    if (prop === "minValue") {
      value = Math.min(value, this.maxValue);
    }
    return value;
  }
  /**
   * Translate a pixel position to value along the range
   *
   * @param x
   * @internal
   */
  translate(x) {
    const range = this.max - this.min;
    const { left, width } = this.trackEl.getBoundingClientRect();
    const percent = (x - left) / width;
    const mirror = this.shouldMirror();
    const clampedValue = this.clamp(this.min + range * (mirror ? 1 - percent : percent));
    let value = Number(clampedValue.toFixed((0,_math_7efd987a_js__WEBPACK_IMPORTED_MODULE_9__.d)(this.step)));
    if (this.snap && this.step) {
      value = this.getClosestStep(value);
    }
    return value;
  }
  /**
   * Get closest allowed value along stepped values
   *
   * @param num
   * @internal
   */
  getClosestStep(num) {
    num = Number(this.clamp(num).toFixed((0,_math_7efd987a_js__WEBPACK_IMPORTED_MODULE_9__.d)(this.step)));
    if (this.step) {
      const step = Math.round(num / this.step) * this.step;
      num = Number(this.clamp(step).toFixed((0,_math_7efd987a_js__WEBPACK_IMPORTED_MODULE_9__.d)(this.step)));
    }
    return num;
  }
  getClosestHandle(valueX) {
    return this.getDistanceX(this.maxHandle, valueX) > this.getDistanceX(this.minHandle, valueX)
      ? this.minHandle
      : this.maxHandle;
  }
  getDistanceX(el, valueX) {
    return Math.abs(el.getBoundingClientRect().left - valueX);
  }
  getFontSizeForElement(element) {
    return Number(window.getComputedStyle(element).getPropertyValue("font-size").match(/\d+/)[0]);
  }
  /**
   * Get position of value along range as fractional value
   *
   * @param num
   * @return {number} number in the unit interval [0,1]
   * @internal
   */
  getUnitInterval(num) {
    num = this.clamp(num);
    const range = this.max - this.min;
    return (num - this.min) / range;
  }
  adjustHostObscuredHandleLabel(name) {
    const label = this.el.shadowRoot.querySelector(`.handle__label--${name}`);
    const labelStatic = this.el.shadowRoot.querySelector(`.handle__label--${name}.static`);
    const labelTransformed = this.el.shadowRoot.querySelector(`.handle__label--${name}.transformed`);
    const labelStaticBounds = labelStatic.getBoundingClientRect();
    const labelStaticOffset = this.getHostOffset(labelStaticBounds.left, labelStaticBounds.right);
    label.style.transform = `translateX(${labelStaticOffset}px)`;
    labelTransformed.style.transform = `translateX(${labelStaticOffset}px)`;
  }
  hyphenateCollidingRangeHandleLabels() {
    const { shadowRoot } = this.el;
    const mirror = this.shouldMirror();
    const leftModifier = mirror ? "value" : "minValue";
    const rightModifier = mirror ? "minValue" : "value";
    const leftValueLabel = shadowRoot.querySelector(`.handle__label--${leftModifier}`);
    const leftValueLabelStatic = shadowRoot.querySelector(`.handle__label--${leftModifier}.static`);
    const leftValueLabelTransformed = shadowRoot.querySelector(`.handle__label--${leftModifier}.transformed`);
    const leftValueLabelStaticHostOffset = this.getHostOffset(leftValueLabelStatic.getBoundingClientRect().left, leftValueLabelStatic.getBoundingClientRect().right);
    const rightValueLabel = shadowRoot.querySelector(`.handle__label--${rightModifier}`);
    const rightValueLabelStatic = shadowRoot.querySelector(`.handle__label--${rightModifier}.static`);
    const rightValueLabelTransformed = shadowRoot.querySelector(`.handle__label--${rightModifier}.transformed`);
    const rightValueLabelStaticHostOffset = this.getHostOffset(rightValueLabelStatic.getBoundingClientRect().left, rightValueLabelStatic.getBoundingClientRect().right);
    const labelFontSize = this.getFontSizeForElement(leftValueLabel);
    const labelTransformedOverlap = this.getRangeLabelOverlap(leftValueLabelTransformed, rightValueLabelTransformed);
    const hyphenLabel = leftValueLabel;
    const labelOffset = labelFontSize / 2;
    if (labelTransformedOverlap > 0) {
      hyphenLabel.classList.add("hyphen", "hyphen--wrap");
      if (rightValueLabelStaticHostOffset === 0 && leftValueLabelStaticHostOffset === 0) {
        // Neither handle overlaps the host boundary
        let leftValueLabelTranslate = labelTransformedOverlap / 2 - labelOffset;
        leftValueLabelTranslate =
          Math.sign(leftValueLabelTranslate) === -1
            ? Math.abs(leftValueLabelTranslate)
            : -leftValueLabelTranslate;
        const leftValueLabelTransformedHostOffset = this.getHostOffset(leftValueLabelTransformed.getBoundingClientRect().left +
          leftValueLabelTranslate -
          labelOffset, leftValueLabelTransformed.getBoundingClientRect().right +
          leftValueLabelTranslate -
          labelOffset);
        let rightValueLabelTranslate = labelTransformedOverlap / 2;
        const rightValueLabelTransformedHostOffset = this.getHostOffset(rightValueLabelTransformed.getBoundingClientRect().left + rightValueLabelTranslate, rightValueLabelTransformed.getBoundingClientRect().right + rightValueLabelTranslate);
        if (leftValueLabelTransformedHostOffset !== 0) {
          leftValueLabelTranslate += leftValueLabelTransformedHostOffset;
          rightValueLabelTranslate += leftValueLabelTransformedHostOffset;
        }
        if (rightValueLabelTransformedHostOffset !== 0) {
          leftValueLabelTranslate += rightValueLabelTransformedHostOffset;
          rightValueLabelTranslate += rightValueLabelTransformedHostOffset;
        }
        leftValueLabel.style.transform = `translateX(${leftValueLabelTranslate}px)`;
        leftValueLabelTransformed.style.transform = `translateX(${leftValueLabelTranslate - labelOffset}px)`;
        rightValueLabel.style.transform = `translateX(${rightValueLabelTranslate}px)`;
        rightValueLabelTransformed.style.transform = `translateX(${rightValueLabelTranslate}px)`;
      }
      else if (leftValueLabelStaticHostOffset > 0 || rightValueLabelStaticHostOffset > 0) {
        // labels overlap host boundary on the left side
        leftValueLabel.style.transform = `translateX(${leftValueLabelStaticHostOffset + labelOffset}px)`;
        rightValueLabel.style.transform = `translateX(${labelTransformedOverlap + rightValueLabelStaticHostOffset}px)`;
        rightValueLabelTransformed.style.transform = `translateX(${labelTransformedOverlap + rightValueLabelStaticHostOffset}px)`;
      }
      else if (leftValueLabelStaticHostOffset < 0 || rightValueLabelStaticHostOffset < 0) {
        // labels overlap host boundary on the right side
        let leftValueLabelTranslate = Math.abs(leftValueLabelStaticHostOffset) + labelTransformedOverlap - labelOffset;
        leftValueLabelTranslate =
          Math.sign(leftValueLabelTranslate) === -1
            ? Math.abs(leftValueLabelTranslate)
            : -leftValueLabelTranslate;
        leftValueLabel.style.transform = `translateX(${leftValueLabelTranslate}px)`;
        leftValueLabelTransformed.style.transform = `translateX(${leftValueLabelTranslate - labelOffset}px)`;
      }
    }
    else {
      hyphenLabel.classList.remove("hyphen", "hyphen--wrap");
      leftValueLabel.style.transform = `translateX(${leftValueLabelStaticHostOffset}px)`;
      leftValueLabelTransformed.style.transform = `translateX(${leftValueLabelStaticHostOffset}px)`;
      rightValueLabel.style.transform = `translateX(${rightValueLabelStaticHostOffset}px)`;
      rightValueLabelTransformed.style.transform = `translateX(${rightValueLabelStaticHostOffset}px)`;
    }
  }
  /**
   * Hides bounding tick labels that are obscured by either handle.
   */
  hideObscuredBoundingTickLabels() {
    const valueIsRange = isRange(this.value);
    if (!this.hasHistogram && !valueIsRange && !this.labelHandles && !this.precise) {
      return;
    }
    if (!this.hasHistogram && !valueIsRange && this.labelHandles && !this.precise) {
      return;
    }
    if (!this.hasHistogram && !valueIsRange && !this.labelHandles && this.precise) {
      return;
    }
    if (!this.hasHistogram && !valueIsRange && this.labelHandles && this.precise) {
      return;
    }
    if (!this.hasHistogram && valueIsRange && !this.precise) {
      return;
    }
    if (this.hasHistogram && !this.precise && !this.labelHandles) {
      return;
    }
    const minHandle = this.el.shadowRoot.querySelector(".thumb--minValue");
    const maxHandle = this.el.shadowRoot.querySelector(".thumb--value");
    const minTickLabel = this.el.shadowRoot.querySelector(".tick__label--min");
    const maxTickLabel = this.el.shadowRoot.querySelector(".tick__label--max");
    if (!minHandle && maxHandle && minTickLabel && maxTickLabel) {
      minTickLabel.style.opacity = this.isMinTickLabelObscured(minTickLabel, maxHandle) ? "0" : "1";
      maxTickLabel.style.opacity = this.isMaxTickLabelObscured(maxTickLabel, maxHandle) ? "0" : "1";
    }
    if (minHandle && maxHandle && minTickLabel && maxTickLabel) {
      minTickLabel.style.opacity =
        this.isMinTickLabelObscured(minTickLabel, minHandle) ||
          this.isMinTickLabelObscured(minTickLabel, maxHandle)
          ? "0"
          : "1";
      maxTickLabel.style.opacity =
        this.isMaxTickLabelObscured(maxTickLabel, minHandle) ||
          (this.isMaxTickLabelObscured(maxTickLabel, maxHandle) && this.hasHistogram)
          ? "0"
          : "1";
    }
  }
  /**
   * Returns an integer representing the number of pixels to offset on the left or right side based on desired position behavior.
   *
   * @param leftBounds
   * @param rightBounds
   * @internal
   */
  getHostOffset(leftBounds, rightBounds) {
    const hostBounds = this.el.getBoundingClientRect();
    const buffer = 7;
    if (leftBounds + buffer < hostBounds.left) {
      return hostBounds.left - leftBounds - buffer;
    }
    if (rightBounds - buffer > hostBounds.right) {
      return -(rightBounds - hostBounds.right) + buffer;
    }
    return 0;
  }
  /**
   * Returns an integer representing the number of pixels that the two given span elements are overlapping, taking into account
   * a space in between the two spans equal to the font-size set on them to account for the space needed to render a hyphen.
   *
   * @param leftLabel
   * @param rightLabel
   */
  getRangeLabelOverlap(leftLabel, rightLabel) {
    const leftLabelBounds = leftLabel.getBoundingClientRect();
    const rightLabelBounds = rightLabel.getBoundingClientRect();
    const leftLabelFontSize = this.getFontSizeForElement(leftLabel);
    const rangeLabelOverlap = leftLabelBounds.right + leftLabelFontSize - rightLabelBounds.left;
    return Math.max(rangeLabelOverlap, 0);
  }
  /**
   * Returns a boolean value representing if the minLabel span element is obscured (being overlapped) by the given handle div element.
   *
   * @param minLabel
   * @param handle
   */
  isMinTickLabelObscured(minLabel, handle) {
    const minLabelBounds = minLabel.getBoundingClientRect();
    const handleBounds = handle.getBoundingClientRect();
    return (0,_dom_f1ee4d04_js__WEBPACK_IMPORTED_MODULE_2__.o)(minLabelBounds, handleBounds);
  }
  /**
   * Returns a boolean value representing if the maxLabel span element is obscured (being overlapped) by the given handle div element.
   *
   * @param maxLabel
   * @param handle
   */
  isMaxTickLabelObscured(maxLabel, handle) {
    const maxLabelBounds = maxLabel.getBoundingClientRect();
    const handleBounds = handle.getBoundingClientRect();
    return (0,_dom_f1ee4d04_js__WEBPACK_IMPORTED_MODULE_2__.o)(maxLabelBounds, handleBounds);
  }
  static get delegatesFocus() { return true; }
  get el() { return (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.g)(this); }
  static get watchers() { return {
    "histogram": ["histogramWatcher"],
    "value": ["valueHandler"],
    "minValue": ["minMaxValueHandler"],
    "maxValue": ["minMaxValueHandler"]
  }; }
};
Slider.style = sliderCss;



//# sourceMappingURL=calcite-slider.entry.js.map

/***/ }),

/***/ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/math-7efd987a.js":
/*!**********************************************************************************************************************************************!*\
  !*** ./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/math-7efd987a.js ***!
  \**********************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ clamp),
/* harmony export */   d: () => (/* binding */ decimalPlaces)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.5
 */
const clamp = (value, min, max) => Math.max(min, Math.min(value, max));
const decimalPlaces = (value) => {
  const match = ("" + value).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);
  if (!match) {
    return 0;
  }
  return Math.max(0, 
  // Number of digits right of decimal point.
  (match[1] ? match[1].length : 0) -
    // Adjust for scientific notation.
    (match[2] ? +match[2] : 0));
};



//# sourceMappingURL=math-7efd987a.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYmEtaW5mb2dyYXBoaWNfbm9kZV9tb2R1bGVzX2FyY2dpc19idXNpbmVzcy1hbmFseXN0LWNvbXBvbmVudHNfZGlzLTNmZjQxMS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUE2RztBQUM5RDtBQUNrQztBQUNzRDtBQUNoRTtBQUNkO0FBQ3FCO0FBQ3NDO0FBQ0Q7QUFDL0M7QUFDbkM7QUFDQTtBQUNBOztBQUVqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsc0NBQXNDLGNBQWMsR0FBRyxVQUFVLEtBQUssV0FBVyxtQkFBbUIsR0FBRyxVQUFVLGtDQUFrQyxLQUFLLFVBQVUsZ0NBQWdDLGlCQUFpQixHQUFHLFVBQVUsaUNBQWlDLEtBQUssVUFBVSxnQ0FBZ0Msb0JBQW9CLEdBQUcsVUFBVSxpQ0FBaUMsS0FBSyxVQUFVLDRCQUE0QixNQUFNLGlGQUFpRixxRUFBcUUsK0ZBQStGLGlHQUFpRywrRkFBK0YsaUJBQWlCLFVBQVUseUJBQXlCLG1EQUFtRCxxQkFBcUIsa0JBQWtCLDBCQUEwQix1QkFBdUIsd0JBQXdCLHFCQUFxQiwyQkFBMkIsd0JBQXdCLHdDQUF3QyxNQUFNLHNDQUFzQyxNQUFNLGlFQUFpRSxrQ0FBa0MsZ0JBQWdCLGFBQWEsa0JBQWtCLG9CQUFvQixlQUFlLHlCQUF5QixpQkFBaUIsMkNBQTJDLFVBQVUsa0NBQWtDLCtDQUErQyxpRUFBaUUsZ0RBQWdELG1CQUFtQixVQUFVLGtDQUFrQyw2Q0FBNkMsaUVBQWlFLGdEQUFnRCxpQkFBaUIsVUFBVSxrQ0FBa0MsZ0RBQWdELGlFQUFpRSxnREFBZ0QsaUJBQWlCLDRCQUE0Qiw4Q0FBOEMsK0JBQStCLG9EQUFvRCxNQUFNLGNBQWMsV0FBVyxrQkFBa0IsY0FBYyxxQkFBcUIsa0JBQWtCLDZEQUE2RCw0REFBNEQsMkRBQTJELGdCQUFnQixzSUFBc0ksZ0VBQWdFLDBDQUEwQyx5R0FB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Ozs7Ozs7Ozs7Ozs7Ozs7QUM1ekJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRTBDOztBQUUxQyIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYmEtaW5mb2dyYXBoaWMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYnVzaW5lc3MtYW5hbHlzdC1jb21wb25lbnRzL2Rpc3Qvc3RlbmNpbC1jb21wb25lbnRzL2Rpc3QvZXNtL2NhbGNpdGUtc2xpZGVyLmVudHJ5LmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYmEtaW5mb2dyYXBoaWMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYnVzaW5lc3MtYW5hbHlzdC1jb21wb25lbnRzL2Rpc3Qvc3RlbmNpbC1jb21wb25lbnRzL2Rpc3QvZXNtL21hdGgtN2VmZDk4N2EuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgciBhcyByZWdpc3Rlckluc3RhbmNlLCBjIGFzIGNyZWF0ZUV2ZW50LCBoLCBIIGFzIEhvc3QsIGcgYXMgZ2V0RWxlbWVudCB9IGZyb20gJy4vaW5kZXgtNGU2NDc0MTEuanMnO1xuaW1wb3J0IHsgZyBhcyBndWlkIH0gZnJvbSAnLi9ndWlkLTg4YTM3MjlmLmpzJztcbmltcG9ydCB7IGkgYXMgaXNQcmltYXJ5UG9pbnRlckJ1dHRvbiwgbyBhcyBpbnRlcnNlY3RzIH0gZnJvbSAnLi9kb20tZjFlZTRkMDQuanMnO1xuaW1wb3J0IHsgYyBhcyBjb25uZWN0Rm9ybSwgZCBhcyBkaXNjb25uZWN0Rm9ybSwgYSBhcyBhZnRlckNvbm5lY3REZWZhdWx0VmFsdWVTZXQsIEggYXMgSGlkZGVuRm9ybUlucHV0U2xvdCB9IGZyb20gJy4vZm9ybS05OGZlMGU3Yy5qcyc7XG5pbXBvcnQgeyB1IGFzIHVwZGF0ZUhvc3RJbnRlcmFjdGlvbiB9IGZyb20gJy4vaW50ZXJhY3RpdmUtMjk5OTU1MjIuanMnO1xuaW1wb3J0IHsgaSBhcyBpc0FjdGl2YXRpb25LZXkgfSBmcm9tICcuL2tleS1iNzU0OTFjNC5qcyc7XG5pbXBvcnQgeyBjIGFzIGNvbm5lY3RMYWJlbCwgZCBhcyBkaXNjb25uZWN0TGFiZWwgfSBmcm9tICcuL2xhYmVsLTZkMWUzMTY4LmpzJztcbmltcG9ydCB7IGEgYXMgc2V0VXBMb2FkYWJsZUNvbXBvbmVudCwgcyBhcyBzZXRDb21wb25lbnRMb2FkZWQsIGMgYXMgY29tcG9uZW50TG9hZGVkIH0gZnJvbSAnLi9sb2FkYWJsZS1jYzE0ZDcyOC5qcyc7XG5pbXBvcnQgeyBuIGFzIG51bWJlclN0cmluZ0Zvcm1hdHRlciwgYyBhcyBjb25uZWN0TG9jYWxpemVkLCBkIGFzIGRpc2Nvbm5lY3RMb2NhbGl6ZWQgfSBmcm9tICcuL2xvY2FsZS1mN2IyZmJiMC5qcyc7XG5pbXBvcnQgeyBkIGFzIGRlY2ltYWxQbGFjZXMsIGMgYXMgY2xhbXAgfSBmcm9tICcuL21hdGgtN2VmZDk4N2EuanMnO1xuaW1wb3J0ICcuL2luZGV4LmVzbS0xYzY1ZDhjNy5qcyc7XG5pbXBvcnQgJy4vcmVzb3VyY2VzLTQ4NDM2ZWVhLmpzJztcbmltcG9ydCAnLi9vYnNlcnZlcnMtNTY3NDBlOTkuanMnO1xuXG4vKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1jb21wb25lbnRzL2Jsb2IvbWFzdGVyL0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG4gKiB2MS4wLjVcbiAqL1xuY29uc3QgQ1NTID0ge1xuICBoYW5kbGVMYWJlbDogXCJoYW5kbGVfX2xhYmVsXCIsXG4gIGhhbmRsZUxhYmVsTWluVmFsdWU6IFwiaGFuZGxlX19sYWJlbC0tbWluVmFsdWVcIixcbiAgaGFuZGxlTGFiZWxWYWx1ZTogXCJoYW5kbGVfX2xhYmVsLS12YWx1ZVwiLFxuICB0aWNrTWluOiBcInRpY2tfX2xhYmVsLS1taW5cIixcbiAgdGlja01heDogXCJ0aWNrX19sYWJlbC0tbWF4XCJcbn07XG5cbmNvbnN0IHNsaWRlckNzcyA9IFwiQGNoYXJzZXQgXFxcIlVURi04XFxcIjtAa2V5ZnJhbWVzIGluezAle29wYWNpdHk6MH0xMDAle29wYWNpdHk6MX19QGtleWZyYW1lcyBpbi1kb3duezAle29wYWNpdHk6MDt0cmFuc2Zvcm06dHJhbnNsYXRlM0QoMCwgLTVweCwgMCl9MTAwJXtvcGFjaXR5OjE7dHJhbnNmb3JtOnRyYW5zbGF0ZTNEKDAsIDAsIDApfX1Aa2V5ZnJhbWVzIGluLXVwezAle29wYWNpdHk6MDt0cmFuc2Zvcm06dHJhbnNsYXRlM0QoMCwgNXB4LCAwKX0xMDAle29wYWNpdHk6MTt0cmFuc2Zvcm06dHJhbnNsYXRlM0QoMCwgMCwgMCl9fUBrZXlmcmFtZXMgaW4tc2NhbGV7MCV7b3BhY2l0eTowO3RyYW5zZm9ybTpzY2FsZTNEKDAuOTUsIDAuOTUsIDEpfTEwMCV7b3BhY2l0eToxO3RyYW5zZm9ybTpzY2FsZTNEKDEsIDEsIDEpfX06cm9vdHstLWNhbGNpdGUtYW5pbWF0aW9uLXRpbWluZzpjYWxjKDE1MG1zICogdmFyKC0tY2FsY2l0ZS1pbnRlcm5hbC1kdXJhdGlvbi1mYWN0b3IpKTstLWNhbGNpdGUtaW50ZXJuYWwtZHVyYXRpb24tZmFjdG9yOnZhcigtLWNhbGNpdGUtZHVyYXRpb24tZmFjdG9yLCAxKTstLWNhbGNpdGUtaW50ZXJuYWwtYW5pbWF0aW9uLXRpbWluZy1mYXN0OmNhbGMoMTAwbXMgKiB2YXIoLS1jYWxjaXRlLWludGVybmFsLWR1cmF0aW9uLWZhY3RvcikpOy0tY2FsY2l0ZS1pbnRlcm5hbC1hbmltYXRpb24tdGltaW5nLW1lZGl1bTpjYWxjKDIwMG1zICogdmFyKC0tY2FsY2l0ZS1pbnRlcm5hbC1kdXJhdGlvbi1mYWN0b3IpKTstLWNhbGNpdGUtaW50ZXJuYWwtYW5pbWF0aW9uLXRpbWluZy1zbG93OmNhbGMoMzAwbXMgKiB2YXIoLS1jYWxjaXRlLWludGVybmFsLWR1cmF0aW9uLWZhY3RvcikpfS5jYWxjaXRlLWFuaW1hdGV7b3BhY2l0eTowO2FuaW1hdGlvbi1maWxsLW1vZGU6Ym90aDthbmltYXRpb24tZHVyYXRpb246dmFyKC0tY2FsY2l0ZS1hbmltYXRpb24tdGltaW5nKX0uY2FsY2l0ZS1hbmltYXRlX19pbnthbmltYXRpb24tbmFtZTppbn0uY2FsY2l0ZS1hbmltYXRlX19pbi1kb3due2FuaW1hdGlvbi1uYW1lOmluLWRvd259LmNhbGNpdGUtYW5pbWF0ZV9faW4tdXB7YW5pbWF0aW9uLW5hbWU6aW4tdXB9LmNhbGNpdGUtYW5pbWF0ZV9faW4tc2NhbGV7YW5pbWF0aW9uLW5hbWU6aW4tc2NhbGV9QG1lZGlhIChwcmVmZXJzLXJlZHVjZWQtbW90aW9uOiByZWR1Y2Upezpyb290ey0tY2FsY2l0ZS1pbnRlcm5hbC1kdXJhdGlvbi1mYWN0b3I6MH19OnJvb3R7LS1jYWxjaXRlLWZsb2F0aW5nLXVpLXRyYW5zaXRpb246dmFyKC0tY2FsY2l0ZS1hbmltYXRpb24tdGltaW5nKTstLWNhbGNpdGUtZmxvYXRpbmctdWktei1pbmRleDo2MDB9Omhvc3QoW2hpZGRlbl0pe2Rpc3BsYXk6bm9uZX06aG9zdChbZGlzYWJsZWRdKXtwb2ludGVyLWV2ZW50czpub25lO2N1cnNvcjpkZWZhdWx0Oy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lO29wYWNpdHk6dmFyKC0tY2FsY2l0ZS11aS1vcGFjaXR5LWRpc2FibGVkKX0uc2NhbGUtLXN7LS1jYWxjaXRlLXNsaWRlci1oYW5kbGUtc2l6ZToxMHB4Oy0tY2FsY2l0ZS1zbGlkZXItaGFuZGxlLWV4dGVuc2lvbi1oZWlnaHQ6Ni41cHg7LS1jYWxjaXRlLXNsaWRlci1jb250YWluZXItZm9udC1zaXplOnZhcigtLWNhbGNpdGUtZm9udC1zaXplLS0zKX0uc2NhbGUtLXMgLmhhbmRsZV9fbGFiZWwsLnNjYWxlLS1zIC50aWNrX19sYWJlbHtsaW5lLWhlaWdodDouNzVyZW19LnNjYWxlLS1tey0tY2FsY2l0ZS1zbGlkZXItaGFuZGxlLXNpemU6MTRweDstLWNhbGNpdGUtc2xpZGVyLWhhbmRsZS1leHRlbnNpb24taGVpZ2h0OjhweDstLWNhbGNpdGUtc2xpZGVyLWNvbnRhaW5lci1mb250LXNpemU6dmFyKC0tY2FsY2l0ZS1mb250LXNpemUtLTIpfS5zY2FsZS0tbSAuaGFuZGxlX19sYWJlbCwuc2NhbGUtLW0gLnRpY2tfX2xhYmVse2xpbmUtaGVpZ2h0OjFyZW19LnNjYWxlLS1sey0tY2FsY2l0ZS1zbGlkZXItaGFuZGxlLXNpemU6MTZweDstLWNhbGNpdGUtc2xpZGVyLWhhbmRsZS1leHRlbnNpb24taGVpZ2h0OjEwLjVweDstLWNhbGNpdGUtc2xpZGVyLWNvbnRhaW5lci1mb250LXNpemU6dmFyKC0tY2FsY2l0ZS1mb250LXNpemUtLTEpfS5zY2FsZS0tbCAuaGFuZGxlX19sYWJlbCwuc2NhbGUtLWwgLnRpY2tfX2xhYmVse2xpbmUtaGVpZ2h0OjFyZW19LmhhbmRsZV9fbGFiZWwsLnRpY2tfX2xhYmVse2ZvbnQtd2VpZ2h0OnZhcigtLWNhbGNpdGUtZm9udC13ZWlnaHQtbWVkaXVtKTtjb2xvcjp2YXIoLS1jYWxjaXRlLXVpLXRleHQtMik7Zm9udC1zaXplOnZhcigtLWNhbGNpdGUtc2xpZGVyLWNvbnRhaW5lci1mb250LXNpemUpfTpob3N0e2Rpc3BsYXk6YmxvY2t9LmNvbnRhaW5lcntwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmJsb2NrO292ZXJmbG93LXdyYXA6bm9ybWFsO3dvcmQtYnJlYWs6bm9ybWFsO3BhZGRpbmctaW5saW5lOmNhbGModmFyKC0tY2FsY2l0ZS1zbGlkZXItaGFuZGxlLXNpemUpICogMC41KTtwYWRkaW5nLWJsb2NrOmNhbGModmFyKC0tY2FsY2l0ZS1zbGlkZXItaGFuZGxlLXNpemUpICogMC41KTttYXJnaW4tYmxvY2s6Y2FsYyh2YXIoLS1jYWxjaXRlLXNsaWRlci1oYW5kbGUtc2l6ZSkgKiAwLjUpO21hcmdpbi1pbmxpbmU6MDstLWNhbGNpdGUtc2xpZGVyLWZ1bGwtaGFuZGxlLWhlaWdodDpjYWxjKFxcbiAgICB2YXIoLS1jYWxjaXRlLXNsaWRlci1oYW5kbGUtc2l6ZSkgKyB2YXIoLS1jYWxjaXRlLXNsaWRlci1oYW5kbGUtZXh0ZW5zaW9uLWhlaWdodClcXG4gICl9Omhvc3QoW2Rpc2FibGVkXSkgLnRyYWNrX19yYW5nZSw6aG9zdChbZGlzYWJsZWRdKSAudGljay0tYWN0aXZle2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS11aS10ZXh0LTMpfTpob3N0KFtkaXNhYmxlZF0pIDo6c2xvdHRlZChbY2FsY2l0ZS1oeWRyYXRlZF1bZGlzYWJsZWRdKSw6aG9zdChbZGlzYWJsZWRdKSBbY2FsY2l0ZS1oeWRyYXRlZF1bZGlzYWJsZWRde29wYWNpdHk6MX0uc2NhbGUtLXMgLnRodW1iOm5vdCgudGh1bWItLXByZWNpc2Upey0tY2FsY2l0ZS1zbGlkZXItdGh1bWIteS1vZmZzZXQ6LTZweH0uc2NhbGUtLW0gLnRodW1iOm5vdCgudGh1bWItLXByZWNpc2Upey0tY2FsY2l0ZS1zbGlkZXItdGh1bWIteS1vZmZzZXQ6LThweH0uc2NhbGUtLWwgLnRodW1iOm5vdCgudGh1bWItLXByZWNpc2Upey0tY2FsY2l0ZS1zbGlkZXItdGh1bWIteS1vZmZzZXQ6LTlweH06aG9zdChbcHJlY2lzZV06bm90KFtoYXMtaGlzdG9ncmFtXSkpIC5jb250YWluZXIgLnRodW1iLS12YWx1ZXstLWNhbGNpdGUtc2xpZGVyLXRodW1iLXktb2Zmc2V0OmNhbGModmFyKC0tY2FsY2l0ZS1zbGlkZXItZnVsbC1oYW5kbGUtaGVpZ2h0KSAqIC0xKX0udGh1bWItY29udGFpbmVye3Bvc2l0aW9uOnJlbGF0aXZlO21heC1pbmxpbmUtc2l6ZToxMDAlfS50aHVtYnstLWNhbGNpdGUtc2xpZGVyLXRodW1iLXgtb2Zmc2V0OmNhbGModmFyKC0tY2FsY2l0ZS1zbGlkZXItaGFuZGxlLXNpemUpICogMC41KTtwb3NpdGlvbjphYnNvbHV0ZTttYXJnaW46MHB4O2Rpc3BsYXk6ZmxleDtjdXJzb3I6cG9pbnRlcjtmbGV4LWRpcmVjdGlvbjpjb2x1bW47YWxpZ24taXRlbXM6Y2VudGVyO2JvcmRlci1zdHlsZTpub25lO2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnQ7cGFkZGluZzowcHg7Zm9udC1mYW1pbHk6aW5oZXJpdDtvdXRsaW5lOjJweCBzb2xpZCB0cmFuc3BhcmVudDtvdXRsaW5lLW9mZnNldDoycHg7dHJhbnNmb3JtOnRyYW5zbGF0ZSh2YXIoLS1jYWxjaXRlLXNsaWRlci10aHVtYi14LW9mZnNldCksIHZhcigtLWNhbGNpdGUtc2xpZGVyLXRodW1iLXktb2Zmc2V0KSl9LnRodW1iIC5oYW5kbGVfX2xhYmVsLnN0YXRpYywudGh1bWIgLmhhbmRsZV9fbGFiZWwudHJhbnNmb3JtZWR7cG9zaXRpb246YWJzb2x1dGU7aW5zZXQtYmxvY2s6MHB4O29wYWNpdHk6MH0udGh1bWIgLmhhbmRsZV9fbGFiZWwuaHlwaGVuOjphZnRlcntjb250ZW50OlxcXCLigJRcXFwiO2Rpc3BsYXk6aW5saW5lLWJsb2NrO2lubGluZS1zaXplOjFlbX0udGh1bWIgLmhhbmRsZV9fbGFiZWwuaHlwaGVuLS13cmFwe2Rpc3BsYXk6ZmxleH0udGh1bWIgLmhhbmRsZXtib3gtc2l6aW5nOmJvcmRlci1ib3g7Ym9yZGVyLXJhZGl1czo5OTk5cHg7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWZvcmVncm91bmQtMSk7b3V0bGluZS1jb2xvcjp0cmFuc3BhcmVudDtibG9jay1zaXplOnZhcigtLWNhbGNpdGUtc2xpZGVyLWhhbmRsZS1zaXplKTtpbmxpbmUtc2l6ZTp2YXIoLS1jYWxjaXRlLXNsaWRlci1oYW5kbGUtc2l6ZSk7Ym94LXNoYWRvdzowIDAgMCAycHggdmFyKC0tY2FsY2l0ZS11aS10ZXh0LTMpIGluc2V0O3RyYW5zaXRpb246Ym9yZGVyIHZhcigtLWNhbGNpdGUtaW50ZXJuYWwtYW5pbWF0aW9uLXRpbWluZy1tZWRpdW0pIGVhc2UsIGJhY2tncm91bmQtY29sb3IgdmFyKC0tY2FsY2l0ZS1pbnRlcm5hbC1hbmltYXRpb24tdGltaW5nLW1lZGl1bSkgZWFzZSwgYm94LXNoYWRvdyB2YXIoLS1jYWxjaXRlLWFuaW1hdGlvbi10aW1pbmcpIGVhc2V9LnRodW1iIC5oYW5kbGUtZXh0ZW5zaW9ue2lubGluZS1zaXplOjAuMTI1cmVtO2Jsb2NrLXNpemU6dmFyKC0tY2FsY2l0ZS1zbGlkZXItaGFuZGxlLWV4dGVuc2lvbi1oZWlnaHQpO2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS11aS10ZXh0LTMpfS50aHVtYjpob3ZlciAuaGFuZGxle2JveC1zaGFkb3c6MCAwIDAgM3B4IHZhcigtLWNhbGNpdGUtdWktYnJhbmQpIGluc2V0fS50aHVtYjpob3ZlciAuaGFuZGxlLWV4dGVuc2lvbntiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtdWktYnJhbmQpfS50aHVtYjpmb2N1cyAuaGFuZGxle291dGxpbmU6MnB4IHNvbGlkIHZhcigtLWNhbGNpdGUtdWktYnJhbmQpO291dGxpbmUtb2Zmc2V0OjJweH0udGh1bWI6Zm9jdXMgLmhhbmRsZS1leHRlbnNpb257YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWJyYW5kKX0udGh1bWIudGh1bWItLW1pblZhbHVle3RyYW5zZm9ybTp0cmFuc2xhdGUoY2FsYyh2YXIoLS1jYWxjaXRlLXNsaWRlci10aHVtYi14LW9mZnNldCkgKiAtMSksIHZhcigtLWNhbGNpdGUtc2xpZGVyLXRodW1iLXktb2Zmc2V0KSl9LnRodW1iLnRodW1iLS1wcmVjaXNley0tY2FsY2l0ZS1zbGlkZXItdGh1bWIteS1vZmZzZXQ6LTJweH06aG9zdChbbGFiZWwtaGFuZGxlc10pIC50aHVtYnstLWNhbGNpdGUtc2xpZGVyLXRodW1iLXgtb2Zmc2V0OjUwJX06aG9zdChbbGFiZWwtaGFuZGxlc10pOmhvc3QoOm5vdChbaGFzLWhpc3RvZ3JhbV0pKSAuc2NhbGUtLXMgLnRodW1iOm5vdCgudGh1bWItLXByZWNpc2Upey0tY2FsY2l0ZS1zbGlkZXItdGh1bWIteS1vZmZzZXQ6LTIzcHh9Omhvc3QoW2xhYmVsLWhhbmRsZXNdKTpob3N0KDpub3QoW2hhcy1oaXN0b2dyYW1dKSkgLnNjYWxlLS1tIC50aHVtYjpub3QoLnRodW1iLS1wcmVjaXNlKXstLWNhbGNpdGUtc2xpZGVyLXRodW1iLXktb2Zmc2V0Oi0zMHB4fTpob3N0KFtsYWJlbC1oYW5kbGVzXSk6aG9zdCg6bm90KFtoYXMtaGlzdG9ncmFtXSkpIC5zY2FsZS0tbCAudGh1bWI6bm90KC50aHVtYi0tcHJlY2lzZSl7LS1jYWxjaXRlLXNsaWRlci10aHVtYi15LW9mZnNldDotMzJweH06aG9zdChbaGFzLWhpc3RvZ3JhbV1bbGFiZWwtaGFuZGxlc10pIC5oYW5kbGVfX2xhYmVsLDpob3N0KFtsYWJlbC1oYW5kbGVzXTpub3QoW2hhcy1oaXN0b2dyYW1dKSkgLnRodW1iLS1taW5WYWx1ZS50aHVtYi0tcHJlY2lzZSAuaGFuZGxlX19sYWJlbHttYXJnaW4tYmxvY2stc3RhcnQ6MC41ZW19Omhvc3QoOm5vdChbaGFzLWhpc3RvZ3JhbV0pOm5vdChbcHJlY2lzZV0pKSAuaGFuZGxlX19sYWJlbCw6aG9zdChbbGFiZWwtaGFuZGxlc106bm90KFtoYXMtaGlzdG9ncmFtXSkpIC50aHVtYi0tdmFsdWUgLmhhbmRsZV9fbGFiZWx7bWFyZ2luLWJsb2NrLWVuZDowLjVlbX06aG9zdChbbGFiZWwtaGFuZGxlc11bcHJlY2lzZV0pOmhvc3QoOm5vdChbaGFzLWhpc3RvZ3JhbV0pKSAuc2NhbGUtLXMgLnRodW1iLS12YWx1ZXstLWNhbGNpdGUtc2xpZGVyLXRodW1iLXktb2Zmc2V0Oi0zM3B4fTpob3N0KFtsYWJlbC1oYW5kbGVzXVtwcmVjaXNlXSk6aG9zdCg6bm90KFtoYXMtaGlzdG9ncmFtXSkpIC5zY2FsZS0tbSAudGh1bWItLXZhbHVley0tY2FsY2l0ZS1zbGlkZXItdGh1bWIteS1vZmZzZXQ6LTQ0cHh9Omhvc3QoW2xhYmVsLWhhbmRsZXNdW3ByZWNpc2VdKTpob3N0KDpub3QoW2hhcy1oaXN0b2dyYW1dKSkgLnNjYWxlLS1sIC50aHVtYi0tdmFsdWV7LS1jYWxjaXRlLXNsaWRlci10aHVtYi15LW9mZnNldDotNDlweH0udGh1bWI6Zm9jdXMgLmhhbmRsZSwudGh1bWItLWFjdGl2ZSAuaGFuZGxle2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS11aS1icmFuZCk7Ym94LXNoYWRvdzowIDAgOHB4IDAgcmdiYSgwLCAwLCAwLCAwLjE2KX0udGh1bWI6aG92ZXIudGh1bWItLXByZWNpc2U6YWZ0ZXIsLnRodW1iOmZvY3VzLnRodW1iLS1wcmVjaXNlOmFmdGVyLC50aHVtYi0tYWN0aXZlLnRodW1iLS1wcmVjaXNlOmFmdGVye2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS11aS1icmFuZCl9LnRyYWNre3Bvc2l0aW9uOnJlbGF0aXZlO2Jsb2NrLXNpemU6MC4xMjVyZW07Ym9yZGVyLXJhZGl1czowcHg7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWJvcmRlci0yKTt0cmFuc2l0aW9uOmFsbCB2YXIoLS1jYWxjaXRlLWludGVybmFsLWFuaW1hdGlvbi10aW1pbmctbWVkaXVtKSBlYXNlLWlufS50cmFja19fcmFuZ2V7cG9zaXRpb246YWJzb2x1dGU7aW5zZXQtYmxvY2stc3RhcnQ6MHB4O2Jsb2NrLXNpemU6MC4xMjVyZW07YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWJyYW5kKX0uY29udGFpbmVyLS1yYW5nZSAudHJhY2tfX3JhbmdlOmhvdmVye2N1cnNvcjpldy1yZXNpemV9LmNvbnRhaW5lci0tcmFuZ2UgLnRyYWNrX19yYW5nZTphZnRlcntwb3NpdGlvbjphYnNvbHV0ZTtpbmxpbmUtc2l6ZToxMDAlO2NvbnRlbnQ6XFxcIlxcXCI7aW5zZXQtYmxvY2stc3RhcnQ6Y2FsYyh2YXIoLS1jYWxjaXRlLXNsaWRlci1mdWxsLWhhbmRsZS1oZWlnaHQpICogMC41ICogLTEpO2Jsb2NrLXNpemU6Y2FsYyh2YXIoLS1jYWxjaXRlLXNsaWRlci1oYW5kbGUtc2l6ZSkgKyB2YXIoLS1jYWxjaXRlLXNsaWRlci1oYW5kbGUtZXh0ZW5zaW9uLWhlaWdodCkpfUBtZWRpYSAoZm9yY2VkLWNvbG9yczogYWN0aXZlKXsudGh1bWJ7b3V0bGluZS13aWR0aDowO291dGxpbmUtb2Zmc2V0OjB9LmhhbmRsZXtvdXRsaW5lOjJweCBzb2xpZCB0cmFuc3BhcmVudDtvdXRsaW5lLW9mZnNldDoycHh9LnRodW1iOmZvY3VzIC5oYW5kbGUsLnRodW1iIC5oYW5kbGUtZXh0ZW5zaW9uLC50aHVtYjpob3ZlciAuaGFuZGxlLWV4dGVuc2lvbiwudGh1bWI6Zm9jdXMgLmhhbmRsZS1leHRlbnNpb24sLnRodW1iOmFjdGl2ZSAuaGFuZGxlLWV4dGVuc2lvbntiYWNrZ3JvdW5kLWNvbG9yOmNhbnZhc1RleHR9LnRyYWNre2JhY2tncm91bmQtY29sb3I6Y2FudmFzVGV4dH0udHJhY2tfX3Jhbmdle2JhY2tncm91bmQtY29sb3I6aGlnaGxpZ2h0fX0udGlja3twb3NpdGlvbjphYnNvbHV0ZTtibG9jay1zaXplOjAuMjVyZW07aW5saW5lLXNpemU6MC4xMjVyZW07Ym9yZGVyLXdpZHRoOjFweDtib3JkZXItc3R5bGU6c29saWQ7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWJvcmRlci1pbnB1dCk7Ym9yZGVyLWNvbG9yOnZhcigtLWNhbGNpdGUtdWktZm9yZWdyb3VuZC0xKTtpbnNldC1ibG9jay1zdGFydDotMnB4O3BvaW50ZXItZXZlbnRzOm5vbmU7bWFyZ2luLWlubGluZS1zdGFydDpjYWxjKC0xICogMC4xMjVyZW0pfS50aWNrLS1hY3RpdmV7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWJyYW5kKX0udGlja19fbGFiZWx7cG9pbnRlci1ldmVudHM6bm9uZTttYXJnaW4tYmxvY2stc3RhcnQ6MC44NzVyZW07ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpjZW50ZXJ9LnRpY2tfX2xhYmVsLS1taW57dHJhbnNpdGlvbjpvcGFjaXR5IHZhcigtLWNhbGNpdGUtYW5pbWF0aW9uLXRpbWluZyl9LnRpY2tfX2xhYmVsLS1tYXh7dHJhbnNpdGlvbjpvcGFjaXR5IHZhcigtLWNhbGNpdGUtaW50ZXJuYWwtYW5pbWF0aW9uLXRpbWluZy1mYXN0KX06aG9zdChbaGFzLWhpc3RvZ3JhbV1bbGFiZWwtaGFuZGxlc10pIC50aWNrX19sYWJlbC0tbWluLDpob3N0KFtoYXMtaGlzdG9ncmFtXVtsYWJlbC1oYW5kbGVzXSkgLnRpY2tfX2xhYmVsLS1tYXgsOmhvc3QoW2hhcy1oaXN0b2dyYW1dW3ByZWNpc2VdKSAudGlja19fbGFiZWwtLW1pbiw6aG9zdChbaGFzLWhpc3RvZ3JhbV1bcHJlY2lzZV0pIC50aWNrX19sYWJlbC0tbWF4e2ZvbnQtd2VpZ2h0OnZhcigtLWNhbGNpdGUtZm9udC13ZWlnaHQtbm9ybWFsKTtjb2xvcjp2YXIoLS1jYWxjaXRlLXVpLXRleHQtMyl9LmdyYXBoe2NvbG9yOnZhcigtLWNhbGNpdGUtdWktZm9yZWdyb3VuZC0zKTtibG9jay1zaXplOjQ4cHh9Omhvc3QoW2xhYmVsLXRpY2tzXVt0aWNrc10pIC5jb250YWluZXJ7cGFkZGluZy1ibG9jay1lbmQ6Y2FsYygwLjg3NXJlbSArIHZhcigtLWNhbGNpdGUtc2xpZGVyLWNvbnRhaW5lci1mb250LXNpemUpKX06aG9zdChbaGFzLWhpc3RvZ3JhbV0pOmhvc3QoW3ByZWNpc2VdW2xhYmVsLWhhbmRsZXNdKSAuY29udGFpbmVye3BhZGRpbmctYmxvY2stZW5kOmNhbGModmFyKC0tY2FsY2l0ZS1zbGlkZXItZnVsbC1oYW5kbGUtaGVpZ2h0KSArIDFlbSl9Omhvc3QoW2hhcy1oaXN0b2dyYW1dKTpob3N0KFtsYWJlbC1oYW5kbGVzXTpub3QoW3ByZWNpc2VdKSkgLmNvbnRhaW5lcntwYWRkaW5nLWJsb2NrLWVuZDpjYWxjKHZhcigtLWNhbGNpdGUtc2xpZGVyLWhhbmRsZS1zaXplKSAqIDAuNSArIDFlbSl9Omhvc3QoW2hhcy1oaXN0b2dyYW1dKTpob3N0KFtwcmVjaXNlXTpub3QoW2xhYmVsLWhhbmRsZXNdKSkgLmNvbnRhaW5lcntwYWRkaW5nLWJsb2NrLWVuZDp2YXIoLS1jYWxjaXRlLXNsaWRlci1mdWxsLWhhbmRsZS1oZWlnaHQpfTpob3N0KDpub3QoW2hhcy1oaXN0b2dyYW1dKSk6aG9zdChbcHJlY2lzZV06bm90KFtsYWJlbC1oYW5kbGVzXSkpIC5jb250YWluZXJ7cGFkZGluZy1ibG9jay1zdGFydDp2YXIoLS1jYWxjaXRlLXNsaWRlci1mdWxsLWhhbmRsZS1oZWlnaHQpfTpob3N0KDpub3QoW2hhcy1oaXN0b2dyYW1dKSk6aG9zdChbcHJlY2lzZV06bm90KFtsYWJlbC1oYW5kbGVzXSkpIC5jb250YWluZXItLXJhbmdle3BhZGRpbmctYmxvY2stZW5kOnZhcigtLWNhbGNpdGUtc2xpZGVyLWZ1bGwtaGFuZGxlLWhlaWdodCl9Omhvc3QoOm5vdChbaGFzLWhpc3RvZ3JhbV0pKTpob3N0KFtsYWJlbC1oYW5kbGVzXTpub3QoW3ByZWNpc2VdKSkgLmNvbnRhaW5lcntwYWRkaW5nLWJsb2NrLXN0YXJ0OmNhbGModmFyKC0tY2FsY2l0ZS1zbGlkZXItZnVsbC1oYW5kbGUtaGVpZ2h0KSArIDRweCl9Omhvc3QoOm5vdChbaGFzLWhpc3RvZ3JhbV0pKTpob3N0KFtsYWJlbC1oYW5kbGVzXVtwcmVjaXNlXSkgLmNvbnRhaW5lcntwYWRkaW5nLWJsb2NrLXN0YXJ0OmNhbGModmFyKC0tY2FsY2l0ZS1zbGlkZXItZnVsbC1oYW5kbGUtaGVpZ2h0KSArIHZhcigtLWNhbGNpdGUtc2xpZGVyLWNvbnRhaW5lci1mb250LXNpemUpICsgNHB4KX06aG9zdCg6bm90KFtoYXMtaGlzdG9ncmFtXSkpOmhvc3QoW2xhYmVsLWhhbmRsZXNdW3ByZWNpc2VdKSAuY29udGFpbmVyLS1yYW5nZXtwYWRkaW5nLWJsb2NrLWVuZDpjYWxjKHZhcigtLWNhbGNpdGUtc2xpZGVyLWZ1bGwtaGFuZGxlLWhlaWdodCkgKyB2YXIoLS1jYWxjaXRlLXNsaWRlci1jb250YWluZXItZm9udC1zaXplKSArIDRweCl9OjpzbG90dGVkKGlucHV0W3Nsb3Q9aGlkZGVuLWZvcm0taW5wdXRdKXttYXJnaW46MCAhaW1wb3J0YW50O29wYWNpdHk6MCAhaW1wb3J0YW50O291dGxpbmU6bm9uZSAhaW1wb3J0YW50O3BhZGRpbmc6MCAhaW1wb3J0YW50O3Bvc2l0aW9uOmFic29sdXRlICFpbXBvcnRhbnQ7aW5zZXQ6MCAhaW1wb3J0YW50O3RyYW5zZm9ybTpub25lICFpbXBvcnRhbnQ7LXdlYmtpdC1hcHBlYXJhbmNlOm5vbmUgIWltcG9ydGFudDt6LWluZGV4Oi0xICFpbXBvcnRhbnR9XCI7XG5cbmZ1bmN0aW9uIGlzUmFuZ2UodmFsdWUpIHtcclxuICByZXR1cm4gQXJyYXkuaXNBcnJheSh2YWx1ZSk7XHJcbn1cclxuY29uc3QgU2xpZGVyID0gY2xhc3Mge1xyXG4gIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcclxuICAgIHJlZ2lzdGVySW5zdGFuY2UodGhpcywgaG9zdFJlZik7XHJcbiAgICB0aGlzLmNhbGNpdGVTbGlkZXJJbnB1dCA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiY2FsY2l0ZVNsaWRlcklucHV0XCIsIDYpO1xyXG4gICAgdGhpcy5jYWxjaXRlU2xpZGVyQ2hhbmdlID0gY3JlYXRlRXZlbnQodGhpcywgXCJjYWxjaXRlU2xpZGVyQ2hhbmdlXCIsIDYpO1xyXG4gICAgdGhpcy5hY3RpdmVQcm9wID0gXCJ2YWx1ZVwiO1xyXG4gICAgdGhpcy5ndWlkID0gYGNhbGNpdGUtc2xpZGVyLSR7Z3VpZCgpfWA7XHJcbiAgICB0aGlzLmRyYWdVcGRhdGUgPSAoZXZlbnQpID0+IHtcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgaWYgKHRoaXMuZHJhZ1Byb3ApIHtcclxuICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMudHJhbnNsYXRlKGV2ZW50LmNsaWVudFggfHwgZXZlbnQucGFnZVgpO1xyXG4gICAgICAgIGlmIChpc1JhbmdlKHRoaXMudmFsdWUpICYmIHRoaXMuZHJhZ1Byb3AgPT09IFwibWluTWF4VmFsdWVcIikge1xyXG4gICAgICAgICAgaWYgKHRoaXMubWluVmFsdWVEcmFnUmFuZ2UgJiYgdGhpcy5tYXhWYWx1ZURyYWdSYW5nZSAmJiB0aGlzLm1pbk1heFZhbHVlUmFuZ2UpIHtcclxuICAgICAgICAgICAgY29uc3QgbmV3TWluVmFsdWUgPSB2YWx1ZSAtIHRoaXMubWluVmFsdWVEcmFnUmFuZ2U7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld01heFZhbHVlID0gdmFsdWUgKyB0aGlzLm1heFZhbHVlRHJhZ1JhbmdlO1xyXG4gICAgICAgICAgICBpZiAobmV3TWF4VmFsdWUgPD0gdGhpcy5tYXggJiZcclxuICAgICAgICAgICAgICBuZXdNaW5WYWx1ZSA+PSB0aGlzLm1pbiAmJlxyXG4gICAgICAgICAgICAgIG5ld01heFZhbHVlIC0gbmV3TWluVmFsdWUgPT09IHRoaXMubWluTWF4VmFsdWVSYW5nZSkge1xyXG4gICAgICAgICAgICAgIHRoaXMuc2V0VmFsdWUoe1xyXG4gICAgICAgICAgICAgICAgbWluVmFsdWU6IHRoaXMuY2xhbXAobmV3TWluVmFsdWUsIFwibWluVmFsdWVcIiksXHJcbiAgICAgICAgICAgICAgICBtYXhWYWx1ZTogdGhpcy5jbGFtcChuZXdNYXhWYWx1ZSwgXCJtYXhWYWx1ZVwiKVxyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5taW5WYWx1ZURyYWdSYW5nZSA9IHZhbHVlIC0gdGhpcy5taW5WYWx1ZTtcclxuICAgICAgICAgICAgdGhpcy5tYXhWYWx1ZURyYWdSYW5nZSA9IHRoaXMubWF4VmFsdWUgLSB2YWx1ZTtcclxuICAgICAgICAgICAgdGhpcy5taW5NYXhWYWx1ZVJhbmdlID0gdGhpcy5tYXhWYWx1ZSAtIHRoaXMubWluVmFsdWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5zZXRWYWx1ZSh7IFt0aGlzLmRyYWdQcm9wXTogdGhpcy5jbGFtcCh2YWx1ZSwgdGhpcy5kcmFnUHJvcCkgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhpcy5wb2ludGVyVXBEcmFnRW5kID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgIGlmICghaXNQcmltYXJ5UG9pbnRlckJ1dHRvbihldmVudCkpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5kcmFnRW5kKGV2ZW50KTtcclxuICAgIH07XHJcbiAgICB0aGlzLmRyYWdFbmQgPSAoZXZlbnQpID0+IHtcclxuICAgICAgdGhpcy5yZW1vdmVEcmFnTGlzdGVuZXJzKCk7XHJcbiAgICAgIHRoaXMuZm9jdXNBY3RpdmVIYW5kbGUoZXZlbnQuY2xpZW50WCk7XHJcbiAgICAgIGlmICh0aGlzLmxhc3REcmFnUHJvcFZhbHVlICE9IHRoaXNbdGhpcy5kcmFnUHJvcF0pIHtcclxuICAgICAgICB0aGlzLmVtaXRDaGFuZ2UoKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmRyYWdQcm9wID0gbnVsbDtcclxuICAgICAgdGhpcy5sYXN0RHJhZ1Byb3BWYWx1ZSA9IG51bGw7XHJcbiAgICAgIHRoaXMubWluVmFsdWVEcmFnUmFuZ2UgPSBudWxsO1xyXG4gICAgICB0aGlzLm1heFZhbHVlRHJhZ1JhbmdlID0gbnVsbDtcclxuICAgICAgdGhpcy5taW5NYXhWYWx1ZVJhbmdlID0gbnVsbDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFNldCB0aGUgcmVmZXJlbmNlIG9mIHRoZSB0cmFjayBFbGVtZW50XHJcbiAgICAgKlxyXG4gICAgICogQGludGVybmFsXHJcbiAgICAgKiBAcGFyYW0gbm9kZVxyXG4gICAgICovXHJcbiAgICB0aGlzLnN0b3JlVHJhY2tSZWYgPSAobm9kZSkgPT4ge1xyXG4gICAgICB0aGlzLnRyYWNrRWwgPSBub2RlO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIGxvY2FsaXplZCBsYWJlbCB2YWx1ZSBiYXNlZCBpZiB0aGUgZ3JvdXBTZXBhcmF0b3IgcHJvcCBpcyBwYXJzZWQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHZhbHVlXHJcbiAgICAgKi9cclxuICAgIHRoaXMuZGV0ZXJtaW5lR3JvdXBTZXBhcmF0b3IgPSAodmFsdWUpID0+IHtcclxuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIikge1xyXG4gICAgICAgIG51bWJlclN0cmluZ0Zvcm1hdHRlci5udW1iZXJGb3JtYXRPcHRpb25zID0ge1xyXG4gICAgICAgICAgbG9jYWxlOiB0aGlzLmVmZmVjdGl2ZUxvY2FsZSxcclxuICAgICAgICAgIG51bWJlcmluZ1N5c3RlbTogdGhpcy5udW1iZXJpbmdTeXN0ZW0sXHJcbiAgICAgICAgICB1c2VHcm91cGluZzogdGhpcy5ncm91cFNlcGFyYXRvclxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIG51bWJlclN0cmluZ0Zvcm1hdHRlci5sb2NhbGl6ZSh2YWx1ZS50b1N0cmluZygpKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRoaXMuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIHRoaXMuZ3JvdXBTZXBhcmF0b3IgPSBmYWxzZTtcclxuICAgIHRoaXMuaGFzSGlzdG9ncmFtID0gZmFsc2U7XHJcbiAgICB0aGlzLmhpc3RvZ3JhbSA9IHVuZGVmaW5lZDtcclxuICAgIHRoaXMuaGlzdG9ncmFtU3RvcHMgPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLmxhYmVsSGFuZGxlcyA9IGZhbHNlO1xyXG4gICAgdGhpcy5sYWJlbFRpY2tzID0gZmFsc2U7XHJcbiAgICB0aGlzLm1heCA9IDEwMDtcclxuICAgIHRoaXMubWF4TGFiZWwgPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLm1heFZhbHVlID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5taW4gPSAwO1xyXG4gICAgdGhpcy5taW5MYWJlbCA9IHVuZGVmaW5lZDtcclxuICAgIHRoaXMubWluVmFsdWUgPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLm1pcnJvcmVkID0gZmFsc2U7XHJcbiAgICB0aGlzLm5hbWUgPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLm51bWJlcmluZ1N5c3RlbSA9IHVuZGVmaW5lZDtcclxuICAgIHRoaXMucGFnZVN0ZXAgPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLnByZWNpc2UgPSBmYWxzZTtcclxuICAgIHRoaXMucmVxdWlyZWQgPSBmYWxzZTtcclxuICAgIHRoaXMuc25hcCA9IGZhbHNlO1xyXG4gICAgdGhpcy5zdGVwID0gMTtcclxuICAgIHRoaXMudGlja3MgPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLnZhbHVlID0gMDtcclxuICAgIHRoaXMuc2NhbGUgPSBcIm1cIjtcclxuICAgIHRoaXMuZWZmZWN0aXZlTG9jYWxlID0gXCJcIjtcclxuICAgIHRoaXMubWluTWF4VmFsdWVSYW5nZSA9IG51bGw7XHJcbiAgICB0aGlzLm1pblZhbHVlRHJhZ1JhbmdlID0gbnVsbDtcclxuICAgIHRoaXMubWF4VmFsdWVEcmFnUmFuZ2UgPSBudWxsO1xyXG4gICAgdGhpcy50aWNrVmFsdWVzID0gW107XHJcbiAgfVxyXG4gIGhpc3RvZ3JhbVdhdGNoZXIobmV3SGlzdG9ncmFtKSB7XHJcbiAgICB0aGlzLmhhc0hpc3RvZ3JhbSA9ICEhbmV3SGlzdG9ncmFtO1xyXG4gIH1cclxuICB2YWx1ZUhhbmRsZXIoKSB7XHJcbiAgICB0aGlzLnNldE1pbk1heEZyb21WYWx1ZSgpO1xyXG4gIH1cclxuICBtaW5NYXhWYWx1ZUhhbmRsZXIoKSB7XHJcbiAgICB0aGlzLnNldFZhbHVlRnJvbU1pbk1heCgpO1xyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyAgTGlmZWN5Y2xlXHJcbiAgLy9cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XHJcbiAgICBjb25uZWN0TG9jYWxpemVkKHRoaXMpO1xyXG4gICAgdGhpcy5zZXRNaW5NYXhGcm9tVmFsdWUoKTtcclxuICAgIHRoaXMuc2V0VmFsdWVGcm9tTWluTWF4KCk7XHJcbiAgICBjb25uZWN0TGFiZWwodGhpcyk7XHJcbiAgICBjb25uZWN0Rm9ybSh0aGlzKTtcclxuICB9XHJcbiAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XHJcbiAgICBkaXNjb25uZWN0TGFiZWwodGhpcyk7XHJcbiAgICBkaXNjb25uZWN0Rm9ybSh0aGlzKTtcclxuICAgIGRpc2Nvbm5lY3RMb2NhbGl6ZWQodGhpcyk7XHJcbiAgICB0aGlzLnJlbW92ZURyYWdMaXN0ZW5lcnMoKTtcclxuICB9XHJcbiAgY29tcG9uZW50V2lsbExvYWQoKSB7XHJcbiAgICBzZXRVcExvYWRhYmxlQ29tcG9uZW50KHRoaXMpO1xyXG4gICAgdGhpcy50aWNrVmFsdWVzID0gdGhpcy5nZW5lcmF0ZVRpY2tWYWx1ZXMoKTtcclxuICAgIGlmICghaXNSYW5nZSh0aGlzLnZhbHVlKSkge1xyXG4gICAgICB0aGlzLnZhbHVlID0gdGhpcy5jbGFtcCh0aGlzLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGFmdGVyQ29ubmVjdERlZmF1bHRWYWx1ZVNldCh0aGlzLCB0aGlzLnZhbHVlKTtcclxuICAgIGlmICh0aGlzLnNuYXAgJiYgIWlzUmFuZ2UodGhpcy52YWx1ZSkpIHtcclxuICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuZ2V0Q2xvc2VzdFN0ZXAodGhpcy52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5oaXN0b2dyYW0pIHtcclxuICAgICAgdGhpcy5oYXNIaXN0b2dyYW0gPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuICBjb21wb25lbnREaWRMb2FkKCkge1xyXG4gICAgc2V0Q29tcG9uZW50TG9hZGVkKHRoaXMpO1xyXG4gIH1cclxuICBjb21wb25lbnREaWRSZW5kZXIoKSB7XHJcbiAgICBpZiAodGhpcy5sYWJlbEhhbmRsZXMpIHtcclxuICAgICAgdGhpcy5hZGp1c3RIb3N0T2JzY3VyZWRIYW5kbGVMYWJlbChcInZhbHVlXCIpO1xyXG4gICAgICBpZiAoaXNSYW5nZSh0aGlzLnZhbHVlKSkge1xyXG4gICAgICAgIHRoaXMuYWRqdXN0SG9zdE9ic2N1cmVkSGFuZGxlTGFiZWwoXCJtaW5WYWx1ZVwiKTtcclxuICAgICAgICBpZiAoISh0aGlzLnByZWNpc2UgJiYgIXRoaXMuaGFzSGlzdG9ncmFtKSkge1xyXG4gICAgICAgICAgdGhpcy5oeXBoZW5hdGVDb2xsaWRpbmdSYW5nZUhhbmRsZUxhYmVscygpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5oaWRlT2JzY3VyZWRCb3VuZGluZ1RpY2tMYWJlbHMoKTtcclxuICAgIHVwZGF0ZUhvc3RJbnRlcmFjdGlvbih0aGlzKTtcclxuICB9XHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3QgaWQgPSB0aGlzLmVsLmlkIHx8IHRoaXMuZ3VpZDtcclxuICAgIGNvbnN0IG1heFByb3AgPSBpc1JhbmdlKHRoaXMudmFsdWUpID8gXCJtYXhWYWx1ZVwiIDogXCJ2YWx1ZVwiO1xyXG4gICAgY29uc3QgdmFsdWUgPSBpc1JhbmdlKHRoaXMudmFsdWUpID8gdGhpcy5tYXhWYWx1ZSA6IHRoaXMudmFsdWU7XHJcbiAgICBjb25zdCBkaXNwbGF5ZWRWYWx1ZSA9IHRoaXMuZGV0ZXJtaW5lR3JvdXBTZXBhcmF0b3IodmFsdWUpO1xyXG4gICAgY29uc3QgZGlzcGxheWVkTWluVmFsdWUgPSB0aGlzLmRldGVybWluZUdyb3VwU2VwYXJhdG9yKHRoaXMubWluVmFsdWUpO1xyXG4gICAgY29uc3QgbWluID0gdGhpcy5taW5WYWx1ZSB8fCB0aGlzLm1pbjtcclxuICAgIGNvbnN0IHVzZU1pblZhbHVlID0gdGhpcy5zaG91bGRVc2VNaW5WYWx1ZSgpO1xyXG4gICAgY29uc3QgbWluSW50ZXJ2YWwgPSB0aGlzLmdldFVuaXRJbnRlcnZhbCh1c2VNaW5WYWx1ZSA/IHRoaXMubWluVmFsdWUgOiBtaW4pICogMTAwO1xyXG4gICAgY29uc3QgbWF4SW50ZXJ2YWwgPSB0aGlzLmdldFVuaXRJbnRlcnZhbCh2YWx1ZSkgKiAxMDA7XHJcbiAgICBjb25zdCBtaXJyb3IgPSB0aGlzLnNob3VsZE1pcnJvcigpO1xyXG4gICAgY29uc3QgbGVmdFRodW1iT2Zmc2V0ID0gYCR7bWlycm9yID8gMTAwIC0gbWluSW50ZXJ2YWwgOiBtaW5JbnRlcnZhbH0lYDtcclxuICAgIGNvbnN0IHJpZ2h0VGh1bWJPZmZzZXQgPSBgJHttaXJyb3IgPyBtYXhJbnRlcnZhbCA6IDEwMCAtIG1heEludGVydmFsfSVgO1xyXG4gICAgY29uc3QgdmFsdWVJc1JhbmdlID0gaXNSYW5nZSh0aGlzLnZhbHVlKTtcclxuICAgIGNvbnN0IGhhbmRsZUxhYmVsTWluVmFsdWVDbGFzc2VzID0gYCR7Q1NTLmhhbmRsZUxhYmVsfSAke0NTUy5oYW5kbGVMYWJlbE1pblZhbHVlfWA7XHJcbiAgICBjb25zdCBoYW5kbGVMYWJlbFZhbHVlQ2xhc3NlcyA9IGAke0NTUy5oYW5kbGVMYWJlbH0gJHtDU1MuaGFuZGxlTGFiZWxWYWx1ZX1gO1xyXG4gICAgY29uc3QgaGFuZGxlID0gKGgoXCJkaXZcIiwgeyBcImFyaWEtZGlzYWJsZWRcIjogdGhpcy5kaXNhYmxlZCwgXCJhcmlhLWxhYmVsXCI6IHZhbHVlSXNSYW5nZSA/IHRoaXMubWF4TGFiZWwgOiB0aGlzLm1pbkxhYmVsLCBcImFyaWEtb3JpZW50YXRpb25cIjogXCJob3Jpem9udGFsXCIsIFwiYXJpYS12YWx1ZW1heFwiOiB0aGlzLm1heCwgXCJhcmlhLXZhbHVlbWluXCI6IHRoaXMubWluLCBcImFyaWEtdmFsdWVub3dcIjogdmFsdWUsIGNsYXNzOiB7XHJcbiAgICAgICAgdGh1bWI6IHRydWUsXHJcbiAgICAgICAgXCJ0aHVtYi0tdmFsdWVcIjogdHJ1ZSxcclxuICAgICAgICBcInRodW1iLS1hY3RpdmVcIjogdGhpcy5sYXN0RHJhZ1Byb3AgIT09IFwibWluTWF4VmFsdWVcIiAmJiB0aGlzLmRyYWdQcm9wID09PSBtYXhQcm9wXHJcbiAgICAgIH0sIG9uQmx1cjogKCkgPT4gKHRoaXMuYWN0aXZlUHJvcCA9IG51bGwpLCBvbkZvY3VzOiAoKSA9PiAodGhpcy5hY3RpdmVQcm9wID0gbWF4UHJvcCksIG9uUG9pbnRlckRvd246IChldmVudCkgPT4gdGhpcy5wb2ludGVyRG93bkRyYWdTdGFydChldmVudCwgbWF4UHJvcCksIHJlZjogKGVsKSA9PiAodGhpcy5tYXhIYW5kbGUgPSBlbCksIHJvbGU6IFwic2xpZGVyXCIsIHN0eWxlOiB7IHJpZ2h0OiByaWdodFRodW1iT2Zmc2V0IH0sIHRhYkluZGV4OiAwIH0sIGgoXCJkaXZcIiwgeyBjbGFzczogXCJoYW5kbGVcIiB9KSkpO1xyXG4gICAgY29uc3QgbGFiZWxlZEhhbmRsZSA9IChoKFwiZGl2XCIsIHsgXCJhcmlhLWRpc2FibGVkXCI6IHRoaXMuZGlzYWJsZWQsIFwiYXJpYS1sYWJlbFwiOiB2YWx1ZUlzUmFuZ2UgPyB0aGlzLm1heExhYmVsIDogdGhpcy5taW5MYWJlbCwgXCJhcmlhLW9yaWVudGF0aW9uXCI6IFwiaG9yaXpvbnRhbFwiLCBcImFyaWEtdmFsdWVtYXhcIjogdGhpcy5tYXgsIFwiYXJpYS12YWx1ZW1pblwiOiB0aGlzLm1pbiwgXCJhcmlhLXZhbHVlbm93XCI6IHZhbHVlLCBjbGFzczoge1xyXG4gICAgICAgIHRodW1iOiB0cnVlLFxyXG4gICAgICAgIFwidGh1bWItLXZhbHVlXCI6IHRydWUsXHJcbiAgICAgICAgXCJ0aHVtYi0tYWN0aXZlXCI6IHRoaXMubGFzdERyYWdQcm9wICE9PSBcIm1pbk1heFZhbHVlXCIgJiYgdGhpcy5kcmFnUHJvcCA9PT0gbWF4UHJvcFxyXG4gICAgICB9LCBvbkJsdXI6ICgpID0+ICh0aGlzLmFjdGl2ZVByb3AgPSBudWxsKSwgb25Gb2N1czogKCkgPT4gKHRoaXMuYWN0aXZlUHJvcCA9IG1heFByb3ApLCBvblBvaW50ZXJEb3duOiAoZXZlbnQpID0+IHRoaXMucG9pbnRlckRvd25EcmFnU3RhcnQoZXZlbnQsIG1heFByb3ApLCByZWY6IChlbCkgPT4gKHRoaXMubWF4SGFuZGxlID0gZWwpLCByb2xlOiBcInNsaWRlclwiLCBzdHlsZTogeyByaWdodDogcmlnaHRUaHVtYk9mZnNldCB9LCB0YWJJbmRleDogMCB9LCBoKFwic3BhblwiLCB7IFwiYXJpYS1oaWRkZW5cIjogXCJ0cnVlXCIsIGNsYXNzOiBoYW5kbGVMYWJlbFZhbHVlQ2xhc3NlcyB9LCBkaXNwbGF5ZWRWYWx1ZSksIGgoXCJzcGFuXCIsIHsgXCJhcmlhLWhpZGRlblwiOiBcInRydWVcIiwgY2xhc3M6IGAke2hhbmRsZUxhYmVsVmFsdWVDbGFzc2VzfSBzdGF0aWNgIH0sIGRpc3BsYXllZFZhbHVlKSwgaChcInNwYW5cIiwgeyBcImFyaWEtaGlkZGVuXCI6IFwidHJ1ZVwiLCBjbGFzczogYCR7aGFuZGxlTGFiZWxWYWx1ZUNsYXNzZXN9IHRyYW5zZm9ybWVkYCB9LCBkaXNwbGF5ZWRWYWx1ZSksIGgoXCJkaXZcIiwgeyBjbGFzczogXCJoYW5kbGVcIiB9KSkpO1xyXG4gICAgY29uc3QgaGlzdG9ncmFtTGFiZWxlZEhhbmRsZSA9IChoKFwiZGl2XCIsIHsgXCJhcmlhLWRpc2FibGVkXCI6IHRoaXMuZGlzYWJsZWQsIFwiYXJpYS1sYWJlbFwiOiB2YWx1ZUlzUmFuZ2UgPyB0aGlzLm1heExhYmVsIDogdGhpcy5taW5MYWJlbCwgXCJhcmlhLW9yaWVudGF0aW9uXCI6IFwiaG9yaXpvbnRhbFwiLCBcImFyaWEtdmFsdWVtYXhcIjogdGhpcy5tYXgsIFwiYXJpYS12YWx1ZW1pblwiOiB0aGlzLm1pbiwgXCJhcmlhLXZhbHVlbm93XCI6IHZhbHVlLCBjbGFzczoge1xyXG4gICAgICAgIHRodW1iOiB0cnVlLFxyXG4gICAgICAgIFwidGh1bWItLXZhbHVlXCI6IHRydWUsXHJcbiAgICAgICAgXCJ0aHVtYi0tYWN0aXZlXCI6IHRoaXMubGFzdERyYWdQcm9wICE9PSBcIm1pbk1heFZhbHVlXCIgJiYgdGhpcy5kcmFnUHJvcCA9PT0gbWF4UHJvcFxyXG4gICAgICB9LCBvbkJsdXI6ICgpID0+ICh0aGlzLmFjdGl2ZVByb3AgPSBudWxsKSwgb25Gb2N1czogKCkgPT4gKHRoaXMuYWN0aXZlUHJvcCA9IG1heFByb3ApLCBvblBvaW50ZXJEb3duOiAoZXZlbnQpID0+IHRoaXMucG9pbnRlckRvd25EcmFnU3RhcnQoZXZlbnQsIG1heFByb3ApLCByZWY6IChlbCkgPT4gKHRoaXMubWF4SGFuZGxlID0gZWwpLCByb2xlOiBcInNsaWRlclwiLCBzdHlsZTogeyByaWdodDogcmlnaHRUaHVtYk9mZnNldCB9LCB0YWJJbmRleDogMCB9LCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwiaGFuZGxlXCIgfSksIGgoXCJzcGFuXCIsIHsgXCJhcmlhLWhpZGRlblwiOiBcInRydWVcIiwgY2xhc3M6IGhhbmRsZUxhYmVsVmFsdWVDbGFzc2VzIH0sIGRpc3BsYXllZFZhbHVlKSwgaChcInNwYW5cIiwgeyBcImFyaWEtaGlkZGVuXCI6IFwidHJ1ZVwiLCBjbGFzczogYCR7aGFuZGxlTGFiZWxWYWx1ZUNsYXNzZXN9IHN0YXRpY2AgfSwgZGlzcGxheWVkVmFsdWUpLCBoKFwic3BhblwiLCB7IFwiYXJpYS1oaWRkZW5cIjogXCJ0cnVlXCIsIGNsYXNzOiBgJHtoYW5kbGVMYWJlbFZhbHVlQ2xhc3Nlc30gdHJhbnNmb3JtZWRgIH0sIGRpc3BsYXllZFZhbHVlKSkpO1xyXG4gICAgY29uc3QgcHJlY2lzZUhhbmRsZSA9IChoKFwiZGl2XCIsIHsgXCJhcmlhLWRpc2FibGVkXCI6IHRoaXMuZGlzYWJsZWQsIFwiYXJpYS1sYWJlbFwiOiB2YWx1ZUlzUmFuZ2UgPyB0aGlzLm1heExhYmVsIDogdGhpcy5taW5MYWJlbCwgXCJhcmlhLW9yaWVudGF0aW9uXCI6IFwiaG9yaXpvbnRhbFwiLCBcImFyaWEtdmFsdWVtYXhcIjogdGhpcy5tYXgsIFwiYXJpYS12YWx1ZW1pblwiOiB0aGlzLm1pbiwgXCJhcmlhLXZhbHVlbm93XCI6IHZhbHVlLCBjbGFzczoge1xyXG4gICAgICAgIHRodW1iOiB0cnVlLFxyXG4gICAgICAgIFwidGh1bWItLXZhbHVlXCI6IHRydWUsXHJcbiAgICAgICAgXCJ0aHVtYi0tYWN0aXZlXCI6IHRoaXMubGFzdERyYWdQcm9wICE9PSBcIm1pbk1heFZhbHVlXCIgJiYgdGhpcy5kcmFnUHJvcCA9PT0gbWF4UHJvcCxcclxuICAgICAgICBcInRodW1iLS1wcmVjaXNlXCI6IHRydWVcclxuICAgICAgfSwgb25CbHVyOiAoKSA9PiAodGhpcy5hY3RpdmVQcm9wID0gbnVsbCksIG9uRm9jdXM6ICgpID0+ICh0aGlzLmFjdGl2ZVByb3AgPSBtYXhQcm9wKSwgb25Qb2ludGVyRG93bjogKGV2ZW50KSA9PiB0aGlzLnBvaW50ZXJEb3duRHJhZ1N0YXJ0KGV2ZW50LCBtYXhQcm9wKSwgcmVmOiAoZWwpID0+ICh0aGlzLm1heEhhbmRsZSA9IGVsKSwgcm9sZTogXCJzbGlkZXJcIiwgc3R5bGU6IHsgcmlnaHQ6IHJpZ2h0VGh1bWJPZmZzZXQgfSwgdGFiSW5kZXg6IDAgfSwgaChcImRpdlwiLCB7IGNsYXNzOiBcImhhbmRsZVwiIH0pLCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwiaGFuZGxlLWV4dGVuc2lvblwiIH0pKSk7XHJcbiAgICBjb25zdCBoaXN0b2dyYW1QcmVjaXNlSGFuZGxlID0gKGgoXCJkaXZcIiwgeyBcImFyaWEtZGlzYWJsZWRcIjogdGhpcy5kaXNhYmxlZCwgXCJhcmlhLWxhYmVsXCI6IHZhbHVlSXNSYW5nZSA/IHRoaXMubWF4TGFiZWwgOiB0aGlzLm1pbkxhYmVsLCBcImFyaWEtb3JpZW50YXRpb25cIjogXCJob3Jpem9udGFsXCIsIFwiYXJpYS12YWx1ZW1heFwiOiB0aGlzLm1heCwgXCJhcmlhLXZhbHVlbWluXCI6IHRoaXMubWluLCBcImFyaWEtdmFsdWVub3dcIjogdmFsdWUsIGNsYXNzOiB7XHJcbiAgICAgICAgdGh1bWI6IHRydWUsXHJcbiAgICAgICAgXCJ0aHVtYi0tdmFsdWVcIjogdHJ1ZSxcclxuICAgICAgICBcInRodW1iLS1hY3RpdmVcIjogdGhpcy5sYXN0RHJhZ1Byb3AgIT09IFwibWluTWF4VmFsdWVcIiAmJiB0aGlzLmRyYWdQcm9wID09PSBtYXhQcm9wLFxyXG4gICAgICAgIFwidGh1bWItLXByZWNpc2VcIjogdHJ1ZVxyXG4gICAgICB9LCBvbkJsdXI6ICgpID0+ICh0aGlzLmFjdGl2ZVByb3AgPSBudWxsKSwgb25Gb2N1czogKCkgPT4gKHRoaXMuYWN0aXZlUHJvcCA9IG1heFByb3ApLCBvblBvaW50ZXJEb3duOiAoZXZlbnQpID0+IHRoaXMucG9pbnRlckRvd25EcmFnU3RhcnQoZXZlbnQsIG1heFByb3ApLCByZWY6IChlbCkgPT4gKHRoaXMubWF4SGFuZGxlID0gZWwpLCByb2xlOiBcInNsaWRlclwiLCBzdHlsZTogeyByaWdodDogcmlnaHRUaHVtYk9mZnNldCB9LCB0YWJJbmRleDogMCB9LCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwiaGFuZGxlLWV4dGVuc2lvblwiIH0pLCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwiaGFuZGxlXCIgfSkpKTtcclxuICAgIGNvbnN0IGxhYmVsZWRQcmVjaXNlSGFuZGxlID0gKGgoXCJkaXZcIiwgeyBcImFyaWEtZGlzYWJsZWRcIjogdGhpcy5kaXNhYmxlZCwgXCJhcmlhLWxhYmVsXCI6IHZhbHVlSXNSYW5nZSA/IHRoaXMubWF4TGFiZWwgOiB0aGlzLm1pbkxhYmVsLCBcImFyaWEtb3JpZW50YXRpb25cIjogXCJob3Jpem9udGFsXCIsIFwiYXJpYS12YWx1ZW1heFwiOiB0aGlzLm1heCwgXCJhcmlhLXZhbHVlbWluXCI6IHRoaXMubWluLCBcImFyaWEtdmFsdWVub3dcIjogdmFsdWUsIGNsYXNzOiB7XHJcbiAgICAgICAgdGh1bWI6IHRydWUsXHJcbiAgICAgICAgXCJ0aHVtYi0tdmFsdWVcIjogdHJ1ZSxcclxuICAgICAgICBcInRodW1iLS1hY3RpdmVcIjogdGhpcy5sYXN0RHJhZ1Byb3AgIT09IFwibWluTWF4VmFsdWVcIiAmJiB0aGlzLmRyYWdQcm9wID09PSBtYXhQcm9wLFxyXG4gICAgICAgIFwidGh1bWItLXByZWNpc2VcIjogdHJ1ZVxyXG4gICAgICB9LCBvbkJsdXI6ICgpID0+ICh0aGlzLmFjdGl2ZVByb3AgPSBudWxsKSwgb25Gb2N1czogKCkgPT4gKHRoaXMuYWN0aXZlUHJvcCA9IG1heFByb3ApLCBvblBvaW50ZXJEb3duOiAoZXZlbnQpID0+IHRoaXMucG9pbnRlckRvd25EcmFnU3RhcnQoZXZlbnQsIG1heFByb3ApLCByZWY6IChlbCkgPT4gKHRoaXMubWF4SGFuZGxlID0gZWwpLCByb2xlOiBcInNsaWRlclwiLCBzdHlsZTogeyByaWdodDogcmlnaHRUaHVtYk9mZnNldCB9LCB0YWJJbmRleDogMCB9LCBoKFwic3BhblwiLCB7IFwiYXJpYS1oaWRkZW5cIjogXCJ0cnVlXCIsIGNsYXNzOiBoYW5kbGVMYWJlbFZhbHVlQ2xhc3NlcyB9LCBkaXNwbGF5ZWRWYWx1ZSksIGgoXCJzcGFuXCIsIHsgXCJhcmlhLWhpZGRlblwiOiBcInRydWVcIiwgY2xhc3M6IGAke2hhbmRsZUxhYmVsVmFsdWVDbGFzc2VzfSBzdGF0aWNgIH0sIGRpc3BsYXllZFZhbHVlKSwgaChcInNwYW5cIiwgeyBcImFyaWEtaGlkZGVuXCI6IFwidHJ1ZVwiLCBjbGFzczogYCR7aGFuZGxlTGFiZWxWYWx1ZUNsYXNzZXN9IHRyYW5zZm9ybWVkYCB9LCBkaXNwbGF5ZWRWYWx1ZSksIGgoXCJkaXZcIiwgeyBjbGFzczogXCJoYW5kbGVcIiB9KSwgaChcImRpdlwiLCB7IGNsYXNzOiBcImhhbmRsZS1leHRlbnNpb25cIiB9KSkpO1xyXG4gICAgY29uc3QgaGlzdG9ncmFtTGFiZWxlZFByZWNpc2VIYW5kbGUgPSAoaChcImRpdlwiLCB7IFwiYXJpYS1kaXNhYmxlZFwiOiB0aGlzLmRpc2FibGVkLCBcImFyaWEtbGFiZWxcIjogdmFsdWVJc1JhbmdlID8gdGhpcy5tYXhMYWJlbCA6IHRoaXMubWluTGFiZWwsIFwiYXJpYS1vcmllbnRhdGlvblwiOiBcImhvcml6b250YWxcIiwgXCJhcmlhLXZhbHVlbWF4XCI6IHRoaXMubWF4LCBcImFyaWEtdmFsdWVtaW5cIjogdGhpcy5taW4sIFwiYXJpYS12YWx1ZW5vd1wiOiB2YWx1ZSwgY2xhc3M6IHtcclxuICAgICAgICB0aHVtYjogdHJ1ZSxcclxuICAgICAgICBcInRodW1iLS12YWx1ZVwiOiB0cnVlLFxyXG4gICAgICAgIFwidGh1bWItLWFjdGl2ZVwiOiB0aGlzLmxhc3REcmFnUHJvcCAhPT0gXCJtaW5NYXhWYWx1ZVwiICYmIHRoaXMuZHJhZ1Byb3AgPT09IG1heFByb3AsXHJcbiAgICAgICAgXCJ0aHVtYi0tcHJlY2lzZVwiOiB0cnVlXHJcbiAgICAgIH0sIG9uQmx1cjogKCkgPT4gKHRoaXMuYWN0aXZlUHJvcCA9IG51bGwpLCBvbkZvY3VzOiAoKSA9PiAodGhpcy5hY3RpdmVQcm9wID0gbWF4UHJvcCksIG9uUG9pbnRlckRvd246IChldmVudCkgPT4gdGhpcy5wb2ludGVyRG93bkRyYWdTdGFydChldmVudCwgbWF4UHJvcCksIHJlZjogKGVsKSA9PiAodGhpcy5tYXhIYW5kbGUgPSBlbCksIHJvbGU6IFwic2xpZGVyXCIsIHN0eWxlOiB7IHJpZ2h0OiByaWdodFRodW1iT2Zmc2V0IH0sIHRhYkluZGV4OiAwIH0sIGgoXCJkaXZcIiwgeyBjbGFzczogXCJoYW5kbGUtZXh0ZW5zaW9uXCIgfSksIGgoXCJkaXZcIiwgeyBjbGFzczogXCJoYW5kbGVcIiB9KSwgaChcInNwYW5cIiwgeyBcImFyaWEtaGlkZGVuXCI6IFwidHJ1ZVwiLCBjbGFzczogaGFuZGxlTGFiZWxWYWx1ZUNsYXNzZXMgfSwgZGlzcGxheWVkVmFsdWUpLCBoKFwic3BhblwiLCB7IFwiYXJpYS1oaWRkZW5cIjogXCJ0cnVlXCIsIGNsYXNzOiBgJHtoYW5kbGVMYWJlbFZhbHVlQ2xhc3Nlc30gc3RhdGljYCB9LCBkaXNwbGF5ZWRWYWx1ZSksIGgoXCJzcGFuXCIsIHsgXCJhcmlhLWhpZGRlblwiOiBcInRydWVcIiwgY2xhc3M6IGAke2hhbmRsZUxhYmVsVmFsdWVDbGFzc2VzfSB0cmFuc2Zvcm1lZGAgfSwgZGlzcGxheWVkVmFsdWUpKSk7XHJcbiAgICBjb25zdCBtaW5IYW5kbGUgPSAoaChcImRpdlwiLCB7IFwiYXJpYS1kaXNhYmxlZFwiOiB0aGlzLmRpc2FibGVkLCBcImFyaWEtbGFiZWxcIjogdGhpcy5taW5MYWJlbCwgXCJhcmlhLW9yaWVudGF0aW9uXCI6IFwiaG9yaXpvbnRhbFwiLCBcImFyaWEtdmFsdWVtYXhcIjogdGhpcy5tYXgsIFwiYXJpYS12YWx1ZW1pblwiOiB0aGlzLm1pbiwgXCJhcmlhLXZhbHVlbm93XCI6IHRoaXMubWluVmFsdWUsIGNsYXNzOiB7XHJcbiAgICAgICAgdGh1bWI6IHRydWUsXHJcbiAgICAgICAgXCJ0aHVtYi0tbWluVmFsdWVcIjogdHJ1ZSxcclxuICAgICAgICBcInRodW1iLS1hY3RpdmVcIjogdGhpcy5kcmFnUHJvcCA9PT0gXCJtaW5WYWx1ZVwiXHJcbiAgICAgIH0sIG9uQmx1cjogKCkgPT4gKHRoaXMuYWN0aXZlUHJvcCA9IG51bGwpLCBvbkZvY3VzOiAoKSA9PiAodGhpcy5hY3RpdmVQcm9wID0gXCJtaW5WYWx1ZVwiKSwgb25Qb2ludGVyRG93bjogKGV2ZW50KSA9PiB0aGlzLnBvaW50ZXJEb3duRHJhZ1N0YXJ0KGV2ZW50LCBcIm1pblZhbHVlXCIpLCByZWY6IChlbCkgPT4gKHRoaXMubWluSGFuZGxlID0gZWwpLCByb2xlOiBcInNsaWRlclwiLCBzdHlsZTogeyBsZWZ0OiBsZWZ0VGh1bWJPZmZzZXQgfSwgdGFiSW5kZXg6IDAgfSwgaChcImRpdlwiLCB7IGNsYXNzOiBcImhhbmRsZVwiIH0pKSk7XHJcbiAgICBjb25zdCBtaW5MYWJlbGVkSGFuZGxlID0gKGgoXCJkaXZcIiwgeyBcImFyaWEtZGlzYWJsZWRcIjogdGhpcy5kaXNhYmxlZCwgXCJhcmlhLWxhYmVsXCI6IHRoaXMubWluTGFiZWwsIFwiYXJpYS1vcmllbnRhdGlvblwiOiBcImhvcml6b250YWxcIiwgXCJhcmlhLXZhbHVlbWF4XCI6IHRoaXMubWF4LCBcImFyaWEtdmFsdWVtaW5cIjogdGhpcy5taW4sIFwiYXJpYS12YWx1ZW5vd1wiOiB0aGlzLm1pblZhbHVlLCBjbGFzczoge1xyXG4gICAgICAgIHRodW1iOiB0cnVlLFxyXG4gICAgICAgIFwidGh1bWItLW1pblZhbHVlXCI6IHRydWUsXHJcbiAgICAgICAgXCJ0aHVtYi0tYWN0aXZlXCI6IHRoaXMuZHJhZ1Byb3AgPT09IFwibWluVmFsdWVcIlxyXG4gICAgICB9LCBvbkJsdXI6ICgpID0+ICh0aGlzLmFjdGl2ZVByb3AgPSBudWxsKSwgb25Gb2N1czogKCkgPT4gKHRoaXMuYWN0aXZlUHJvcCA9IFwibWluVmFsdWVcIiksIG9uUG9pbnRlckRvd246IChldmVudCkgPT4gdGhpcy5wb2ludGVyRG93bkRyYWdTdGFydChldmVudCwgXCJtaW5WYWx1ZVwiKSwgcmVmOiAoZWwpID0+ICh0aGlzLm1pbkhhbmRsZSA9IGVsKSwgcm9sZTogXCJzbGlkZXJcIiwgc3R5bGU6IHsgbGVmdDogbGVmdFRodW1iT2Zmc2V0IH0sIHRhYkluZGV4OiAwIH0sIGgoXCJzcGFuXCIsIHsgXCJhcmlhLWhpZGRlblwiOiBcInRydWVcIiwgY2xhc3M6IGhhbmRsZUxhYmVsTWluVmFsdWVDbGFzc2VzIH0sIGRpc3BsYXllZE1pblZhbHVlKSwgaChcInNwYW5cIiwgeyBcImFyaWEtaGlkZGVuXCI6IFwidHJ1ZVwiLCBjbGFzczogYCR7aGFuZGxlTGFiZWxNaW5WYWx1ZUNsYXNzZXN9IHN0YXRpY2AgfSwgZGlzcGxheWVkTWluVmFsdWUpLCBoKFwic3BhblwiLCB7IFwiYXJpYS1oaWRkZW5cIjogXCJ0cnVlXCIsIGNsYXNzOiBgJHtoYW5kbGVMYWJlbE1pblZhbHVlQ2xhc3Nlc30gdHJhbnNmb3JtZWRgIH0sIGRpc3BsYXllZE1pblZhbHVlKSwgaChcImRpdlwiLCB7IGNsYXNzOiBcImhhbmRsZVwiIH0pKSk7XHJcbiAgICBjb25zdCBtaW5IaXN0b2dyYW1MYWJlbGVkSGFuZGxlID0gKGgoXCJkaXZcIiwgeyBcImFyaWEtZGlzYWJsZWRcIjogdGhpcy5kaXNhYmxlZCwgXCJhcmlhLWxhYmVsXCI6IHRoaXMubWluTGFiZWwsIFwiYXJpYS1vcmllbnRhdGlvblwiOiBcImhvcml6b250YWxcIiwgXCJhcmlhLXZhbHVlbWF4XCI6IHRoaXMubWF4LCBcImFyaWEtdmFsdWVtaW5cIjogdGhpcy5taW4sIFwiYXJpYS12YWx1ZW5vd1wiOiB0aGlzLm1pblZhbHVlLCBjbGFzczoge1xyXG4gICAgICAgIHRodW1iOiB0cnVlLFxyXG4gICAgICAgIFwidGh1bWItLW1pblZhbHVlXCI6IHRydWUsXHJcbiAgICAgICAgXCJ0aHVtYi0tYWN0aXZlXCI6IHRoaXMuZHJhZ1Byb3AgPT09IFwibWluVmFsdWVcIlxyXG4gICAgICB9LCBvbkJsdXI6ICgpID0+ICh0aGlzLmFjdGl2ZVByb3AgPSBudWxsKSwgb25Gb2N1czogKCkgPT4gKHRoaXMuYWN0aXZlUHJvcCA9IFwibWluVmFsdWVcIiksIG9uUG9pbnRlckRvd246IChldmVudCkgPT4gdGhpcy5wb2ludGVyRG93bkRyYWdTdGFydChldmVudCwgXCJtaW5WYWx1ZVwiKSwgcmVmOiAoZWwpID0+ICh0aGlzLm1pbkhhbmRsZSA9IGVsKSwgcm9sZTogXCJzbGlkZXJcIiwgc3R5bGU6IHsgbGVmdDogbGVmdFRodW1iT2Zmc2V0IH0sIHRhYkluZGV4OiAwIH0sIGgoXCJkaXZcIiwgeyBjbGFzczogXCJoYW5kbGVcIiB9KSwgaChcInNwYW5cIiwgeyBcImFyaWEtaGlkZGVuXCI6IFwidHJ1ZVwiLCBjbGFzczogaGFuZGxlTGFiZWxNaW5WYWx1ZUNsYXNzZXMgfSwgZGlzcGxheWVkTWluVmFsdWUpLCBoKFwic3BhblwiLCB7IFwiYXJpYS1oaWRkZW5cIjogXCJ0cnVlXCIsIGNsYXNzOiBgJHtoYW5kbGVMYWJlbE1pblZhbHVlQ2xhc3Nlc30gc3RhdGljYCB9LCBkaXNwbGF5ZWRNaW5WYWx1ZSksIGgoXCJzcGFuXCIsIHsgXCJhcmlhLWhpZGRlblwiOiBcInRydWVcIiwgY2xhc3M6IGAke2hhbmRsZUxhYmVsTWluVmFsdWVDbGFzc2VzfSB0cmFuc2Zvcm1lZGAgfSwgZGlzcGxheWVkTWluVmFsdWUpKSk7XHJcbiAgICBjb25zdCBtaW5QcmVjaXNlSGFuZGxlID0gKGgoXCJkaXZcIiwgeyBcImFyaWEtZGlzYWJsZWRcIjogdGhpcy5kaXNhYmxlZCwgXCJhcmlhLWxhYmVsXCI6IHRoaXMubWluTGFiZWwsIFwiYXJpYS1vcmllbnRhdGlvblwiOiBcImhvcml6b250YWxcIiwgXCJhcmlhLXZhbHVlbWF4XCI6IHRoaXMubWF4LCBcImFyaWEtdmFsdWVtaW5cIjogdGhpcy5taW4sIFwiYXJpYS12YWx1ZW5vd1wiOiB0aGlzLm1pblZhbHVlLCBjbGFzczoge1xyXG4gICAgICAgIHRodW1iOiB0cnVlLFxyXG4gICAgICAgIFwidGh1bWItLW1pblZhbHVlXCI6IHRydWUsXHJcbiAgICAgICAgXCJ0aHVtYi0tYWN0aXZlXCI6IHRoaXMuZHJhZ1Byb3AgPT09IFwibWluVmFsdWVcIixcclxuICAgICAgICBcInRodW1iLS1wcmVjaXNlXCI6IHRydWVcclxuICAgICAgfSwgb25CbHVyOiAoKSA9PiAodGhpcy5hY3RpdmVQcm9wID0gbnVsbCksIG9uRm9jdXM6ICgpID0+ICh0aGlzLmFjdGl2ZVByb3AgPSBcIm1pblZhbHVlXCIpLCBvblBvaW50ZXJEb3duOiAoZXZlbnQpID0+IHRoaXMucG9pbnRlckRvd25EcmFnU3RhcnQoZXZlbnQsIFwibWluVmFsdWVcIiksIHJlZjogKGVsKSA9PiAodGhpcy5taW5IYW5kbGUgPSBlbCksIHJvbGU6IFwic2xpZGVyXCIsIHN0eWxlOiB7IGxlZnQ6IGxlZnRUaHVtYk9mZnNldCB9LCB0YWJJbmRleDogMCB9LCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwiaGFuZGxlLWV4dGVuc2lvblwiIH0pLCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwiaGFuZGxlXCIgfSkpKTtcclxuICAgIGNvbnN0IG1pbkxhYmVsZWRQcmVjaXNlSGFuZGxlID0gKGgoXCJkaXZcIiwgeyBcImFyaWEtZGlzYWJsZWRcIjogdGhpcy5kaXNhYmxlZCwgXCJhcmlhLWxhYmVsXCI6IHRoaXMubWluTGFiZWwsIFwiYXJpYS1vcmllbnRhdGlvblwiOiBcImhvcml6b250YWxcIiwgXCJhcmlhLXZhbHVlbWF4XCI6IHRoaXMubWF4LCBcImFyaWEtdmFsdWVtaW5cIjogdGhpcy5taW4sIFwiYXJpYS12YWx1ZW5vd1wiOiB0aGlzLm1pblZhbHVlLCBjbGFzczoge1xyXG4gICAgICAgIHRodW1iOiB0cnVlLFxyXG4gICAgICAgIFwidGh1bWItLW1pblZhbHVlXCI6IHRydWUsXHJcbiAgICAgICAgXCJ0aHVtYi0tYWN0aXZlXCI6IHRoaXMuZHJhZ1Byb3AgPT09IFwibWluVmFsdWVcIixcclxuICAgICAgICBcInRodW1iLS1wcmVjaXNlXCI6IHRydWVcclxuICAgICAgfSwgb25CbHVyOiAoKSA9PiAodGhpcy5hY3RpdmVQcm9wID0gbnVsbCksIG9uRm9jdXM6ICgpID0+ICh0aGlzLmFjdGl2ZVByb3AgPSBcIm1pblZhbHVlXCIpLCBvblBvaW50ZXJEb3duOiAoZXZlbnQpID0+IHRoaXMucG9pbnRlckRvd25EcmFnU3RhcnQoZXZlbnQsIFwibWluVmFsdWVcIiksIHJlZjogKGVsKSA9PiAodGhpcy5taW5IYW5kbGUgPSBlbCksIHJvbGU6IFwic2xpZGVyXCIsIHN0eWxlOiB7IGxlZnQ6IGxlZnRUaHVtYk9mZnNldCB9LCB0YWJJbmRleDogMCB9LCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwiaGFuZGxlLWV4dGVuc2lvblwiIH0pLCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwiaGFuZGxlXCIgfSksIGgoXCJzcGFuXCIsIHsgXCJhcmlhLWhpZGRlblwiOiBcInRydWVcIiwgY2xhc3M6IGhhbmRsZUxhYmVsTWluVmFsdWVDbGFzc2VzIH0sIGRpc3BsYXllZE1pblZhbHVlKSwgaChcInNwYW5cIiwgeyBcImFyaWEtaGlkZGVuXCI6IFwidHJ1ZVwiLCBjbGFzczogYCR7aGFuZGxlTGFiZWxNaW5WYWx1ZUNsYXNzZXN9IHN0YXRpY2AgfSwgZGlzcGxheWVkTWluVmFsdWUpLCBoKFwic3BhblwiLCB7IFwiYXJpYS1oaWRkZW5cIjogXCJ0cnVlXCIsIGNsYXNzOiBgJHtoYW5kbGVMYWJlbE1pblZhbHVlQ2xhc3Nlc30gdHJhbnNmb3JtZWRgIH0sIGRpc3BsYXllZE1pblZhbHVlKSkpO1xyXG4gICAgcmV0dXJuIChoKEhvc3QsIHsgaWQ6IGlkLCBvblRvdWNoU3RhcnQ6IHRoaXMuaGFuZGxlVG91Y2hTdGFydCB9LCBoKFwiZGl2XCIsIHsgY2xhc3M6IHtcclxuICAgICAgICBbXCJjb250YWluZXJcIl06IHRydWUsXHJcbiAgICAgICAgW1wiY29udGFpbmVyLS1yYW5nZVwiXTogdmFsdWVJc1JhbmdlLFxyXG4gICAgICAgIFtgc2NhbGUtLSR7dGhpcy5zY2FsZX1gXTogdHJ1ZVxyXG4gICAgICB9IH0sIHRoaXMucmVuZGVyR3JhcGgoKSwgaChcImRpdlwiLCB7IGNsYXNzOiBcInRyYWNrXCIsIHJlZjogdGhpcy5zdG9yZVRyYWNrUmVmIH0sIGgoXCJkaXZcIiwgeyBjbGFzczogXCJ0cmFja19fcmFuZ2VcIiwgb25Qb2ludGVyRG93bjogKGV2ZW50KSA9PiB0aGlzLnBvaW50ZXJEb3duRHJhZ1N0YXJ0KGV2ZW50LCBcIm1pbk1heFZhbHVlXCIpLCBzdHlsZToge1xyXG4gICAgICAgIGxlZnQ6IGAke21pcnJvciA/IDEwMCAtIG1heEludGVydmFsIDogbWluSW50ZXJ2YWx9JWAsXHJcbiAgICAgICAgcmlnaHQ6IGAke21pcnJvciA/IG1pbkludGVydmFsIDogMTAwIC0gbWF4SW50ZXJ2YWx9JWBcclxuICAgICAgfSB9KSwgaChcImRpdlwiLCB7IGNsYXNzOiBcInRpY2tzXCIgfSwgdGhpcy50aWNrVmFsdWVzLm1hcCgodGljaykgPT4ge1xyXG4gICAgICBjb25zdCB0aWNrT2Zmc2V0ID0gYCR7dGhpcy5nZXRVbml0SW50ZXJ2YWwodGljaykgKiAxMDB9JWA7XHJcbiAgICAgIGxldCBhY3RpdmVUaWNrcyA9IHRpY2sgPj0gbWluICYmIHRpY2sgPD0gdmFsdWU7XHJcbiAgICAgIGlmICh1c2VNaW5WYWx1ZSkge1xyXG4gICAgICAgIGFjdGl2ZVRpY2tzID0gdGljayA+PSB0aGlzLm1pblZhbHVlICYmIHRpY2sgPD0gdGhpcy5tYXhWYWx1ZTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gKGgoXCJzcGFuXCIsIHsgY2xhc3M6IHtcclxuICAgICAgICAgIHRpY2s6IHRydWUsXHJcbiAgICAgICAgICBcInRpY2stLWFjdGl2ZVwiOiBhY3RpdmVUaWNrc1xyXG4gICAgICAgIH0sIHN0eWxlOiB7XHJcbiAgICAgICAgICBsZWZ0OiBtaXJyb3IgPyBcIlwiIDogdGlja09mZnNldCxcclxuICAgICAgICAgIHJpZ2h0OiBtaXJyb3IgPyB0aWNrT2Zmc2V0IDogXCJcIlxyXG4gICAgICAgIH0gfSwgdGhpcy5yZW5kZXJUaWNrTGFiZWwodGljaykpKTtcclxuICAgIH0pKSksIGgoXCJkaXZcIiwgeyBjbGFzczogXCJ0aHVtYi1jb250YWluZXJcIiB9LCAhdGhpcy5wcmVjaXNlICYmICF0aGlzLmxhYmVsSGFuZGxlcyAmJiB2YWx1ZUlzUmFuZ2UgJiYgbWluSGFuZGxlLCAhdGhpcy5oYXNIaXN0b2dyYW0gJiZcclxuICAgICAgIXRoaXMucHJlY2lzZSAmJlxyXG4gICAgICB0aGlzLmxhYmVsSGFuZGxlcyAmJlxyXG4gICAgICB2YWx1ZUlzUmFuZ2UgJiZcclxuICAgICAgbWluTGFiZWxlZEhhbmRsZSwgdGhpcy5wcmVjaXNlICYmICF0aGlzLmxhYmVsSGFuZGxlcyAmJiB2YWx1ZUlzUmFuZ2UgJiYgbWluUHJlY2lzZUhhbmRsZSwgdGhpcy5wcmVjaXNlICYmIHRoaXMubGFiZWxIYW5kbGVzICYmIHZhbHVlSXNSYW5nZSAmJiBtaW5MYWJlbGVkUHJlY2lzZUhhbmRsZSwgdGhpcy5oYXNIaXN0b2dyYW0gJiZcclxuICAgICAgIXRoaXMucHJlY2lzZSAmJlxyXG4gICAgICB0aGlzLmxhYmVsSGFuZGxlcyAmJlxyXG4gICAgICB2YWx1ZUlzUmFuZ2UgJiZcclxuICAgICAgbWluSGlzdG9ncmFtTGFiZWxlZEhhbmRsZSwgIXRoaXMucHJlY2lzZSAmJiAhdGhpcy5sYWJlbEhhbmRsZXMgJiYgaGFuZGxlLCAhdGhpcy5oYXNIaXN0b2dyYW0gJiYgIXRoaXMucHJlY2lzZSAmJiB0aGlzLmxhYmVsSGFuZGxlcyAmJiBsYWJlbGVkSGFuZGxlLCAhdGhpcy5oYXNIaXN0b2dyYW0gJiYgdGhpcy5wcmVjaXNlICYmICF0aGlzLmxhYmVsSGFuZGxlcyAmJiBwcmVjaXNlSGFuZGxlLCB0aGlzLmhhc0hpc3RvZ3JhbSAmJiB0aGlzLnByZWNpc2UgJiYgIXRoaXMubGFiZWxIYW5kbGVzICYmIGhpc3RvZ3JhbVByZWNpc2VIYW5kbGUsICF0aGlzLmhhc0hpc3RvZ3JhbSAmJiB0aGlzLnByZWNpc2UgJiYgdGhpcy5sYWJlbEhhbmRsZXMgJiYgbGFiZWxlZFByZWNpc2VIYW5kbGUsIHRoaXMuaGFzSGlzdG9ncmFtICYmICF0aGlzLnByZWNpc2UgJiYgdGhpcy5sYWJlbEhhbmRsZXMgJiYgaGlzdG9ncmFtTGFiZWxlZEhhbmRsZSwgdGhpcy5oYXNIaXN0b2dyYW0gJiZcclxuICAgICAgdGhpcy5wcmVjaXNlICYmXHJcbiAgICAgIHRoaXMubGFiZWxIYW5kbGVzICYmXHJcbiAgICAgIGhpc3RvZ3JhbUxhYmVsZWRQcmVjaXNlSGFuZGxlLCBoKEhpZGRlbkZvcm1JbnB1dFNsb3QsIHsgY29tcG9uZW50OiB0aGlzIH0pKSkpKTtcclxuICB9XHJcbiAgcmVuZGVyR3JhcGgoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5oaXN0b2dyYW0gPyAoaChcImNhbGNpdGUtZ3JhcGhcIiwgeyBjbGFzczogXCJncmFwaFwiLCBjb2xvclN0b3BzOiB0aGlzLmhpc3RvZ3JhbVN0b3BzLCBkYXRhOiB0aGlzLmhpc3RvZ3JhbSwgaGlnaGxpZ2h0TWF4OiBpc1JhbmdlKHRoaXMudmFsdWUpID8gdGhpcy5tYXhWYWx1ZSA6IHRoaXMudmFsdWUsIGhpZ2hsaWdodE1pbjogaXNSYW5nZSh0aGlzLnZhbHVlKSA/IHRoaXMubWluVmFsdWUgOiB0aGlzLm1pbiwgbWF4OiB0aGlzLm1heCwgbWluOiB0aGlzLm1pbiB9KSkgOiBudWxsO1xyXG4gIH1cclxuICByZW5kZXJUaWNrTGFiZWwodGljaykge1xyXG4gICAgY29uc3QgdmFsdWVJc1JhbmdlID0gaXNSYW5nZSh0aGlzLnZhbHVlKTtcclxuICAgIGNvbnN0IGlzTWluVGlja0xhYmVsID0gdGljayA9PT0gdGhpcy5taW47XHJcbiAgICBjb25zdCBpc01heFRpY2tMYWJlbCA9IHRpY2sgPT09IHRoaXMubWF4O1xyXG4gICAgY29uc3QgZGlzcGxheWVkVGlja1ZhbHVlID0gdGhpcy5kZXRlcm1pbmVHcm91cFNlcGFyYXRvcih0aWNrKTtcclxuICAgIGNvbnN0IHRpY2tMYWJlbCA9IChoKFwic3BhblwiLCB7IGNsYXNzOiB7XHJcbiAgICAgICAgdGlja19fbGFiZWw6IHRydWUsXHJcbiAgICAgICAgW0NTUy50aWNrTWluXTogaXNNaW5UaWNrTGFiZWwsXHJcbiAgICAgICAgW0NTUy50aWNrTWF4XTogaXNNYXhUaWNrTGFiZWxcclxuICAgICAgfSB9LCBkaXNwbGF5ZWRUaWNrVmFsdWUpKTtcclxuICAgIGlmICh0aGlzLmxhYmVsVGlja3MgJiYgIXRoaXMuaGFzSGlzdG9ncmFtICYmICF2YWx1ZUlzUmFuZ2UpIHtcclxuICAgICAgcmV0dXJuIHRpY2tMYWJlbDtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmxhYmVsVGlja3MgJiZcclxuICAgICAgIXRoaXMuaGFzSGlzdG9ncmFtICYmXHJcbiAgICAgIHZhbHVlSXNSYW5nZSAmJlxyXG4gICAgICAhdGhpcy5wcmVjaXNlICYmXHJcbiAgICAgICF0aGlzLmxhYmVsSGFuZGxlcykge1xyXG4gICAgICByZXR1cm4gdGlja0xhYmVsO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMubGFiZWxUaWNrcyAmJlxyXG4gICAgICAhdGhpcy5oYXNIaXN0b2dyYW0gJiZcclxuICAgICAgdmFsdWVJc1JhbmdlICYmXHJcbiAgICAgICF0aGlzLnByZWNpc2UgJiZcclxuICAgICAgdGhpcy5sYWJlbEhhbmRsZXMpIHtcclxuICAgICAgcmV0dXJuIHRpY2tMYWJlbDtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmxhYmVsVGlja3MgJiZcclxuICAgICAgIXRoaXMuaGFzSGlzdG9ncmFtICYmXHJcbiAgICAgIHZhbHVlSXNSYW5nZSAmJlxyXG4gICAgICB0aGlzLnByZWNpc2UgJiZcclxuICAgICAgKGlzTWluVGlja0xhYmVsIHx8IGlzTWF4VGlja0xhYmVsKSkge1xyXG4gICAgICByZXR1cm4gdGlja0xhYmVsO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMubGFiZWxUaWNrcyAmJiB0aGlzLmhhc0hpc3RvZ3JhbSAmJiAhdGhpcy5wcmVjaXNlICYmICF0aGlzLmxhYmVsSGFuZGxlcykge1xyXG4gICAgICByZXR1cm4gdGlja0xhYmVsO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMubGFiZWxUaWNrcyAmJlxyXG4gICAgICB0aGlzLmhhc0hpc3RvZ3JhbSAmJlxyXG4gICAgICB0aGlzLnByZWNpc2UgJiZcclxuICAgICAgIXRoaXMubGFiZWxIYW5kbGVzICYmXHJcbiAgICAgIChpc01pblRpY2tMYWJlbCB8fCBpc01heFRpY2tMYWJlbCkpIHtcclxuICAgICAgcmV0dXJuIHRpY2tMYWJlbDtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmxhYmVsVGlja3MgJiZcclxuICAgICAgdGhpcy5oYXNIaXN0b2dyYW0gJiZcclxuICAgICAgIXRoaXMucHJlY2lzZSAmJlxyXG4gICAgICB0aGlzLmxhYmVsSGFuZGxlcyAmJlxyXG4gICAgICAoaXNNaW5UaWNrTGFiZWwgfHwgaXNNYXhUaWNrTGFiZWwpKSB7XHJcbiAgICAgIHJldHVybiB0aWNrTGFiZWw7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5sYWJlbFRpY2tzICYmXHJcbiAgICAgIHRoaXMuaGFzSGlzdG9ncmFtICYmXHJcbiAgICAgIHRoaXMucHJlY2lzZSAmJlxyXG4gICAgICB0aGlzLmxhYmVsSGFuZGxlcyAmJlxyXG4gICAgICAoaXNNaW5UaWNrTGFiZWwgfHwgaXNNYXhUaWNrTGFiZWwpKSB7XHJcbiAgICAgIHJldHVybiB0aWNrTGFiZWw7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vXHJcbiAgLy8gIEV2ZW50IExpc3RlbmVyc1xyXG4gIC8vXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIGtleURvd25IYW5kbGVyKGV2ZW50KSB7XHJcbiAgICBjb25zdCBtaXJyb3IgPSB0aGlzLnNob3VsZE1pcnJvcigpO1xyXG4gICAgY29uc3QgeyBhY3RpdmVQcm9wLCBtYXgsIG1pbiwgcGFnZVN0ZXAsIHN0ZXAgfSA9IHRoaXM7XHJcbiAgICBjb25zdCB2YWx1ZSA9IHRoaXNbYWN0aXZlUHJvcF07XHJcbiAgICBjb25zdCB7IGtleSB9ID0gZXZlbnQ7XHJcbiAgICBpZiAoaXNBY3RpdmF0aW9uS2V5KGtleSkpIHtcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgbGV0IGFkanVzdG1lbnQ7XHJcbiAgICBpZiAoa2V5ID09PSBcIkFycm93VXBcIiB8fCBrZXkgPT09IFwiQXJyb3dSaWdodFwiKSB7XHJcbiAgICAgIGNvbnN0IGRpcmVjdGlvbkZhY3RvciA9IG1pcnJvciAmJiBrZXkgPT09IFwiQXJyb3dSaWdodFwiID8gLTEgOiAxO1xyXG4gICAgICBhZGp1c3RtZW50ID0gdmFsdWUgKyBzdGVwICogZGlyZWN0aW9uRmFjdG9yO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoa2V5ID09PSBcIkFycm93RG93blwiIHx8IGtleSA9PT0gXCJBcnJvd0xlZnRcIikge1xyXG4gICAgICBjb25zdCBkaXJlY3Rpb25GYWN0b3IgPSBtaXJyb3IgJiYga2V5ID09PSBcIkFycm93TGVmdFwiID8gLTEgOiAxO1xyXG4gICAgICBhZGp1c3RtZW50ID0gdmFsdWUgLSBzdGVwICogZGlyZWN0aW9uRmFjdG9yO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoa2V5ID09PSBcIlBhZ2VVcFwiKSB7XHJcbiAgICAgIGlmIChwYWdlU3RlcCkge1xyXG4gICAgICAgIGFkanVzdG1lbnQgPSB2YWx1ZSArIHBhZ2VTdGVwO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChrZXkgPT09IFwiUGFnZURvd25cIikge1xyXG4gICAgICBpZiAocGFnZVN0ZXApIHtcclxuICAgICAgICBhZGp1c3RtZW50ID0gdmFsdWUgLSBwYWdlU3RlcDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoa2V5ID09PSBcIkhvbWVcIikge1xyXG4gICAgICBhZGp1c3RtZW50ID0gbWluO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoa2V5ID09PSBcIkVuZFwiKSB7XHJcbiAgICAgIGFkanVzdG1lbnQgPSBtYXg7XHJcbiAgICB9XHJcbiAgICBpZiAoaXNOYU4oYWRqdXN0bWVudCkpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIGNvbnN0IGZpeGVkRGVjaW1hbEFkanVzdG1lbnQgPSBOdW1iZXIoYWRqdXN0bWVudC50b0ZpeGVkKGRlY2ltYWxQbGFjZXMoc3RlcCkpKTtcclxuICAgIHRoaXMuc2V0VmFsdWUoe1xyXG4gICAgICBbYWN0aXZlUHJvcF06IHRoaXMuY2xhbXAoZml4ZWREZWNpbWFsQWRqdXN0bWVudCwgYWN0aXZlUHJvcClcclxuICAgIH0pO1xyXG4gIH1cclxuICBwb2ludGVyRG93bkhhbmRsZXIoZXZlbnQpIHtcclxuICAgIGlmICghaXNQcmltYXJ5UG9pbnRlckJ1dHRvbihldmVudCkpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgeCA9IGV2ZW50LmNsaWVudFggfHwgZXZlbnQucGFnZVg7XHJcbiAgICBjb25zdCBwb3NpdGlvbiA9IHRoaXMudHJhbnNsYXRlKHgpO1xyXG4gICAgbGV0IHByb3AgPSBcInZhbHVlXCI7XHJcbiAgICBpZiAoaXNSYW5nZSh0aGlzLnZhbHVlKSkge1xyXG4gICAgICBjb25zdCBpblJhbmdlID0gcG9zaXRpb24gPj0gdGhpcy5taW5WYWx1ZSAmJiBwb3NpdGlvbiA8PSB0aGlzLm1heFZhbHVlO1xyXG4gICAgICBpZiAoaW5SYW5nZSAmJiB0aGlzLmxhc3REcmFnUHJvcCA9PT0gXCJtaW5NYXhWYWx1ZVwiKSB7XHJcbiAgICAgICAgcHJvcCA9IFwibWluTWF4VmFsdWVcIjtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBjb25zdCBjbG9zZXJUb01heCA9IE1hdGguYWJzKHRoaXMubWF4VmFsdWUgLSBwb3NpdGlvbikgPCBNYXRoLmFicyh0aGlzLm1pblZhbHVlIC0gcG9zaXRpb24pO1xyXG4gICAgICAgIHByb3AgPSBjbG9zZXJUb01heCB8fCBwb3NpdGlvbiA+IHRoaXMubWF4VmFsdWUgPyBcIm1heFZhbHVlXCIgOiBcIm1pblZhbHVlXCI7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMubGFzdERyYWdQcm9wVmFsdWUgPSB0aGlzW3Byb3BdO1xyXG4gICAgdGhpcy5kcmFnU3RhcnQocHJvcCk7XHJcbiAgICBjb25zdCBpc1RodW1iQWN0aXZlID0gdGhpcy5lbC5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoXCIudGh1bWI6YWN0aXZlXCIpO1xyXG4gICAgaWYgKCFpc1RodW1iQWN0aXZlKSB7XHJcbiAgICAgIHRoaXMuc2V0VmFsdWUoeyBbcHJvcF06IHRoaXMuY2xhbXAocG9zaXRpb24sIHByb3ApIH0pO1xyXG4gICAgfVxyXG4gICAgdGhpcy5mb2N1c0FjdGl2ZUhhbmRsZSh4KTtcclxuICB9XHJcbiAgaGFuZGxlVG91Y2hTdGFydChldmVudCkge1xyXG4gICAgLy8gbmVlZGVkIHRvIHByZXZlbnQgZXh0cmEgY2xpY2sgYXQgdGhlIGVuZCBvZiBhIGhhbmRsZSBkcmFnXHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyAgUHVibGljIE1ldGhvZHNcclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvKiogU2V0cyBmb2N1cyBvbiB0aGUgY29tcG9uZW50LiAqL1xyXG4gIGFzeW5jIHNldEZvY3VzKCkge1xyXG4gICAgYXdhaXQgY29tcG9uZW50TG9hZGVkKHRoaXMpO1xyXG4gICAgY29uc3QgaGFuZGxlID0gdGhpcy5taW5IYW5kbGUgPyB0aGlzLm1pbkhhbmRsZSA6IHRoaXMubWF4SGFuZGxlO1xyXG4gICAgaGFuZGxlPy5mb2N1cygpO1xyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyAgUHJpdmF0ZSBNZXRob2RzXHJcbiAgLy9cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgc2V0VmFsdWVGcm9tTWluTWF4KCkge1xyXG4gICAgY29uc3QgeyBtaW5WYWx1ZSwgbWF4VmFsdWUgfSA9IHRoaXM7XHJcbiAgICBpZiAodHlwZW9mIG1pblZhbHVlID09PSBcIm51bWJlclwiICYmIHR5cGVvZiBtYXhWYWx1ZSA9PT0gXCJudW1iZXJcIikge1xyXG4gICAgICB0aGlzLnZhbHVlID0gW21pblZhbHVlLCBtYXhWYWx1ZV07XHJcbiAgICB9XHJcbiAgfVxyXG4gIHNldE1pbk1heEZyb21WYWx1ZSgpIHtcclxuICAgIGNvbnN0IHsgdmFsdWUgfSA9IHRoaXM7XHJcbiAgICBpZiAoaXNSYW5nZSh2YWx1ZSkpIHtcclxuICAgICAgdGhpcy5taW5WYWx1ZSA9IHZhbHVlWzBdO1xyXG4gICAgICB0aGlzLm1heFZhbHVlID0gdmFsdWVbMV07XHJcbiAgICB9XHJcbiAgfVxyXG4gIG9uTGFiZWxDbGljaygpIHtcclxuICAgIHRoaXMuc2V0Rm9jdXMoKTtcclxuICB9XHJcbiAgc2hvdWxkTWlycm9yKCkge1xyXG4gICAgcmV0dXJuIHRoaXMubWlycm9yZWQgJiYgIXRoaXMuaGFzSGlzdG9ncmFtO1xyXG4gIH1cclxuICBzaG91bGRVc2VNaW5WYWx1ZSgpIHtcclxuICAgIGlmICghaXNSYW5nZSh0aGlzLnZhbHVlKSkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gKCh0aGlzLmhhc0hpc3RvZ3JhbSAmJiB0aGlzLm1heFZhbHVlID09PSAwKSB8fCAoIXRoaXMuaGFzSGlzdG9ncmFtICYmIHRoaXMubWluVmFsdWUgPT09IDApKTtcclxuICB9XHJcbiAgZ2VuZXJhdGVUaWNrVmFsdWVzKCkge1xyXG4gICAgY29uc3QgdGlja3MgPSBbXTtcclxuICAgIGxldCBjdXJyZW50ID0gdGhpcy5taW47XHJcbiAgICB3aGlsZSAodGhpcy50aWNrcyAmJiBjdXJyZW50IDwgdGhpcy5tYXggKyB0aGlzLnRpY2tzKSB7XHJcbiAgICAgIHRpY2tzLnB1c2goTWF0aC5taW4oY3VycmVudCwgdGhpcy5tYXgpKTtcclxuICAgICAgY3VycmVudCA9IGN1cnJlbnQgKyB0aGlzLnRpY2tzO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRpY2tzO1xyXG4gIH1cclxuICBwb2ludGVyRG93bkRyYWdTdGFydChldmVudCwgcHJvcCkge1xyXG4gICAgaWYgKCFpc1ByaW1hcnlQb2ludGVyQnV0dG9uKGV2ZW50KSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLmRyYWdTdGFydChwcm9wKTtcclxuICB9XHJcbiAgZHJhZ1N0YXJ0KHByb3ApIHtcclxuICAgIHRoaXMuZHJhZ1Byb3AgPSBwcm9wO1xyXG4gICAgdGhpcy5sYXN0RHJhZ1Byb3AgPSB0aGlzLmRyYWdQcm9wO1xyXG4gICAgdGhpcy5hY3RpdmVQcm9wID0gcHJvcDtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVybW92ZVwiLCB0aGlzLmRyYWdVcGRhdGUpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJ1cFwiLCB0aGlzLnBvaW50ZXJVcERyYWdFbmQpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJjYW5jZWxcIiwgdGhpcy5kcmFnRW5kKTtcclxuICB9XHJcbiAgZm9jdXNBY3RpdmVIYW5kbGUodmFsdWVYKSB7XHJcbiAgICBzd2l0Y2ggKHRoaXMuZHJhZ1Byb3ApIHtcclxuICAgICAgY2FzZSBcIm1pblZhbHVlXCI6XHJcbiAgICAgICAgdGhpcy5taW5IYW5kbGUuZm9jdXMoKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcIm1heFZhbHVlXCI6XHJcbiAgICAgIGNhc2UgXCJ2YWx1ZVwiOlxyXG4gICAgICAgIHRoaXMubWF4SGFuZGxlLmZvY3VzKCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJtaW5NYXhWYWx1ZVwiOlxyXG4gICAgICAgIHRoaXMuZ2V0Q2xvc2VzdEhhbmRsZSh2YWx1ZVgpLmZvY3VzKCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGVtaXRJbnB1dCgpIHtcclxuICAgIHRoaXMuY2FsY2l0ZVNsaWRlcklucHV0LmVtaXQoKTtcclxuICB9XHJcbiAgZW1pdENoYW5nZSgpIHtcclxuICAgIHRoaXMuY2FsY2l0ZVNsaWRlckNoYW5nZS5lbWl0KCk7XHJcbiAgfVxyXG4gIHJlbW92ZURyYWdMaXN0ZW5lcnMoKSB7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIiwgdGhpcy5kcmFnVXBkYXRlKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVydXBcIiwgdGhpcy5wb2ludGVyVXBEcmFnRW5kKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVyY2FuY2VsXCIsIHRoaXMuZHJhZ0VuZCk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFNldCBwcm9wIHZhbHVlKHMpIGlmIGNoYW5nZWQgYXQgdGhlIGNvbXBvbmVudCBsZXZlbFxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtvYmplY3R9IHZhbHVlcyAtIGEgc2V0IG9mIGtleS92YWx1ZSBwYWlycyBkZWxpbmVhdGluZyB3aGF0IHByb3BlcnRpZXMgaW4gdGhlIGNvbXBvbmVudCB0byB1cGRhdGVcclxuICAgKi9cclxuICBzZXRWYWx1ZSh2YWx1ZXMpIHtcclxuICAgIGxldCB2YWx1ZUNoYW5nZWQ7XHJcbiAgICBPYmplY3Qua2V5cyh2YWx1ZXMpLmZvckVhY2goKHByb3BOYW1lKSA9PiB7XHJcbiAgICAgIGNvbnN0IG5ld1ZhbHVlID0gdmFsdWVzW3Byb3BOYW1lXTtcclxuICAgICAgaWYgKCF2YWx1ZUNoYW5nZWQpIHtcclxuICAgICAgICBjb25zdCBvbGRWYWx1ZSA9IHRoaXNbcHJvcE5hbWVdO1xyXG4gICAgICAgIHZhbHVlQ2hhbmdlZCA9IG9sZFZhbHVlICE9PSBuZXdWYWx1ZTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzW3Byb3BOYW1lXSA9IG5ld1ZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICBpZiAoIXZhbHVlQ2hhbmdlZCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBkcmFnZ2luZyA9IHRoaXMuZHJhZ1Byb3A7XHJcbiAgICBpZiAoIWRyYWdnaW5nKSB7XHJcbiAgICAgIHRoaXMuZW1pdENoYW5nZSgpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5lbWl0SW5wdXQoKTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogSWYgbnVtYmVyIGlzIG91dHNpZGUgcmFuZ2UsIGNvbnN0cmFpbiB0byBtaW4gb3IgbWF4XHJcbiAgICpcclxuICAgKiBAcGFyYW0gdmFsdWVcclxuICAgKiBAcGFyYW0gcHJvcFxyXG4gICAqIEBpbnRlcm5hbFxyXG4gICAqL1xyXG4gIGNsYW1wKHZhbHVlLCBwcm9wKSB7XHJcbiAgICB2YWx1ZSA9IGNsYW1wKHZhbHVlLCB0aGlzLm1pbiwgdGhpcy5tYXgpO1xyXG4gICAgLy8gZW5zdXJlIHRoYXQgbWF4VmFsdWUgYW5kIG1pblZhbHVlIGRvbid0IHN3YXAgcG9zaXRpb25zXHJcbiAgICBpZiAocHJvcCA9PT0gXCJtYXhWYWx1ZVwiKSB7XHJcbiAgICAgIHZhbHVlID0gTWF0aC5tYXgodmFsdWUsIHRoaXMubWluVmFsdWUpO1xyXG4gICAgfVxyXG4gICAgaWYgKHByb3AgPT09IFwibWluVmFsdWVcIikge1xyXG4gICAgICB2YWx1ZSA9IE1hdGgubWluKHZhbHVlLCB0aGlzLm1heFZhbHVlKTtcclxuICAgIH1cclxuICAgIHJldHVybiB2YWx1ZTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogVHJhbnNsYXRlIGEgcGl4ZWwgcG9zaXRpb24gdG8gdmFsdWUgYWxvbmcgdGhlIHJhbmdlXHJcbiAgICpcclxuICAgKiBAcGFyYW0geFxyXG4gICAqIEBpbnRlcm5hbFxyXG4gICAqL1xyXG4gIHRyYW5zbGF0ZSh4KSB7XHJcbiAgICBjb25zdCByYW5nZSA9IHRoaXMubWF4IC0gdGhpcy5taW47XHJcbiAgICBjb25zdCB7IGxlZnQsIHdpZHRoIH0gPSB0aGlzLnRyYWNrRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICBjb25zdCBwZXJjZW50ID0gKHggLSBsZWZ0KSAvIHdpZHRoO1xyXG4gICAgY29uc3QgbWlycm9yID0gdGhpcy5zaG91bGRNaXJyb3IoKTtcclxuICAgIGNvbnN0IGNsYW1wZWRWYWx1ZSA9IHRoaXMuY2xhbXAodGhpcy5taW4gKyByYW5nZSAqIChtaXJyb3IgPyAxIC0gcGVyY2VudCA6IHBlcmNlbnQpKTtcclxuICAgIGxldCB2YWx1ZSA9IE51bWJlcihjbGFtcGVkVmFsdWUudG9GaXhlZChkZWNpbWFsUGxhY2VzKHRoaXMuc3RlcCkpKTtcclxuICAgIGlmICh0aGlzLnNuYXAgJiYgdGhpcy5zdGVwKSB7XHJcbiAgICAgIHZhbHVlID0gdGhpcy5nZXRDbG9zZXN0U3RlcCh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEdldCBjbG9zZXN0IGFsbG93ZWQgdmFsdWUgYWxvbmcgc3RlcHBlZCB2YWx1ZXNcclxuICAgKlxyXG4gICAqIEBwYXJhbSBudW1cclxuICAgKiBAaW50ZXJuYWxcclxuICAgKi9cclxuICBnZXRDbG9zZXN0U3RlcChudW0pIHtcclxuICAgIG51bSA9IE51bWJlcih0aGlzLmNsYW1wKG51bSkudG9GaXhlZChkZWNpbWFsUGxhY2VzKHRoaXMuc3RlcCkpKTtcclxuICAgIGlmICh0aGlzLnN0ZXApIHtcclxuICAgICAgY29uc3Qgc3RlcCA9IE1hdGgucm91bmQobnVtIC8gdGhpcy5zdGVwKSAqIHRoaXMuc3RlcDtcclxuICAgICAgbnVtID0gTnVtYmVyKHRoaXMuY2xhbXAoc3RlcCkudG9GaXhlZChkZWNpbWFsUGxhY2VzKHRoaXMuc3RlcCkpKTtcclxuICAgIH1cclxuICAgIHJldHVybiBudW07XHJcbiAgfVxyXG4gIGdldENsb3Nlc3RIYW5kbGUodmFsdWVYKSB7XHJcbiAgICByZXR1cm4gdGhpcy5nZXREaXN0YW5jZVgodGhpcy5tYXhIYW5kbGUsIHZhbHVlWCkgPiB0aGlzLmdldERpc3RhbmNlWCh0aGlzLm1pbkhhbmRsZSwgdmFsdWVYKVxyXG4gICAgICA/IHRoaXMubWluSGFuZGxlXHJcbiAgICAgIDogdGhpcy5tYXhIYW5kbGU7XHJcbiAgfVxyXG4gIGdldERpc3RhbmNlWChlbCwgdmFsdWVYKSB7XHJcbiAgICByZXR1cm4gTWF0aC5hYnMoZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCAtIHZhbHVlWCk7XHJcbiAgfVxyXG4gIGdldEZvbnRTaXplRm9yRWxlbWVudChlbGVtZW50KSB7XHJcbiAgICByZXR1cm4gTnVtYmVyKHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpLmdldFByb3BlcnR5VmFsdWUoXCJmb250LXNpemVcIikubWF0Y2goL1xcZCsvKVswXSk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEdldCBwb3NpdGlvbiBvZiB2YWx1ZSBhbG9uZyByYW5nZSBhcyBmcmFjdGlvbmFsIHZhbHVlXHJcbiAgICpcclxuICAgKiBAcGFyYW0gbnVtXHJcbiAgICogQHJldHVybiB7bnVtYmVyfSBudW1iZXIgaW4gdGhlIHVuaXQgaW50ZXJ2YWwgWzAsMV1cclxuICAgKiBAaW50ZXJuYWxcclxuICAgKi9cclxuICBnZXRVbml0SW50ZXJ2YWwobnVtKSB7XHJcbiAgICBudW0gPSB0aGlzLmNsYW1wKG51bSk7XHJcbiAgICBjb25zdCByYW5nZSA9IHRoaXMubWF4IC0gdGhpcy5taW47XHJcbiAgICByZXR1cm4gKG51bSAtIHRoaXMubWluKSAvIHJhbmdlO1xyXG4gIH1cclxuICBhZGp1c3RIb3N0T2JzY3VyZWRIYW5kbGVMYWJlbChuYW1lKSB7XHJcbiAgICBjb25zdCBsYWJlbCA9IHRoaXMuZWwuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKGAuaGFuZGxlX19sYWJlbC0tJHtuYW1lfWApO1xyXG4gICAgY29uc3QgbGFiZWxTdGF0aWMgPSB0aGlzLmVsLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcihgLmhhbmRsZV9fbGFiZWwtLSR7bmFtZX0uc3RhdGljYCk7XHJcbiAgICBjb25zdCBsYWJlbFRyYW5zZm9ybWVkID0gdGhpcy5lbC5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoYC5oYW5kbGVfX2xhYmVsLS0ke25hbWV9LnRyYW5zZm9ybWVkYCk7XHJcbiAgICBjb25zdCBsYWJlbFN0YXRpY0JvdW5kcyA9IGxhYmVsU3RhdGljLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgY29uc3QgbGFiZWxTdGF0aWNPZmZzZXQgPSB0aGlzLmdldEhvc3RPZmZzZXQobGFiZWxTdGF0aWNCb3VuZHMubGVmdCwgbGFiZWxTdGF0aWNCb3VuZHMucmlnaHQpO1xyXG4gICAgbGFiZWwuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoJHtsYWJlbFN0YXRpY09mZnNldH1weClgO1xyXG4gICAgbGFiZWxUcmFuc2Zvcm1lZC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgke2xhYmVsU3RhdGljT2Zmc2V0fXB4KWA7XHJcbiAgfVxyXG4gIGh5cGhlbmF0ZUNvbGxpZGluZ1JhbmdlSGFuZGxlTGFiZWxzKCkge1xyXG4gICAgY29uc3QgeyBzaGFkb3dSb290IH0gPSB0aGlzLmVsO1xyXG4gICAgY29uc3QgbWlycm9yID0gdGhpcy5zaG91bGRNaXJyb3IoKTtcclxuICAgIGNvbnN0IGxlZnRNb2RpZmllciA9IG1pcnJvciA/IFwidmFsdWVcIiA6IFwibWluVmFsdWVcIjtcclxuICAgIGNvbnN0IHJpZ2h0TW9kaWZpZXIgPSBtaXJyb3IgPyBcIm1pblZhbHVlXCIgOiBcInZhbHVlXCI7XHJcbiAgICBjb25zdCBsZWZ0VmFsdWVMYWJlbCA9IHNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcihgLmhhbmRsZV9fbGFiZWwtLSR7bGVmdE1vZGlmaWVyfWApO1xyXG4gICAgY29uc3QgbGVmdFZhbHVlTGFiZWxTdGF0aWMgPSBzaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoYC5oYW5kbGVfX2xhYmVsLS0ke2xlZnRNb2RpZmllcn0uc3RhdGljYCk7XHJcbiAgICBjb25zdCBsZWZ0VmFsdWVMYWJlbFRyYW5zZm9ybWVkID0gc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKGAuaGFuZGxlX19sYWJlbC0tJHtsZWZ0TW9kaWZpZXJ9LnRyYW5zZm9ybWVkYCk7XHJcbiAgICBjb25zdCBsZWZ0VmFsdWVMYWJlbFN0YXRpY0hvc3RPZmZzZXQgPSB0aGlzLmdldEhvc3RPZmZzZXQobGVmdFZhbHVlTGFiZWxTdGF0aWMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCwgbGVmdFZhbHVlTGFiZWxTdGF0aWMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkucmlnaHQpO1xyXG4gICAgY29uc3QgcmlnaHRWYWx1ZUxhYmVsID0gc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKGAuaGFuZGxlX19sYWJlbC0tJHtyaWdodE1vZGlmaWVyfWApO1xyXG4gICAgY29uc3QgcmlnaHRWYWx1ZUxhYmVsU3RhdGljID0gc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKGAuaGFuZGxlX19sYWJlbC0tJHtyaWdodE1vZGlmaWVyfS5zdGF0aWNgKTtcclxuICAgIGNvbnN0IHJpZ2h0VmFsdWVMYWJlbFRyYW5zZm9ybWVkID0gc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKGAuaGFuZGxlX19sYWJlbC0tJHtyaWdodE1vZGlmaWVyfS50cmFuc2Zvcm1lZGApO1xyXG4gICAgY29uc3QgcmlnaHRWYWx1ZUxhYmVsU3RhdGljSG9zdE9mZnNldCA9IHRoaXMuZ2V0SG9zdE9mZnNldChyaWdodFZhbHVlTGFiZWxTdGF0aWMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCwgcmlnaHRWYWx1ZUxhYmVsU3RhdGljLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnJpZ2h0KTtcclxuICAgIGNvbnN0IGxhYmVsRm9udFNpemUgPSB0aGlzLmdldEZvbnRTaXplRm9yRWxlbWVudChsZWZ0VmFsdWVMYWJlbCk7XHJcbiAgICBjb25zdCBsYWJlbFRyYW5zZm9ybWVkT3ZlcmxhcCA9IHRoaXMuZ2V0UmFuZ2VMYWJlbE92ZXJsYXAobGVmdFZhbHVlTGFiZWxUcmFuc2Zvcm1lZCwgcmlnaHRWYWx1ZUxhYmVsVHJhbnNmb3JtZWQpO1xyXG4gICAgY29uc3QgaHlwaGVuTGFiZWwgPSBsZWZ0VmFsdWVMYWJlbDtcclxuICAgIGNvbnN0IGxhYmVsT2Zmc2V0ID0gbGFiZWxGb250U2l6ZSAvIDI7XHJcbiAgICBpZiAobGFiZWxUcmFuc2Zvcm1lZE92ZXJsYXAgPiAwKSB7XHJcbiAgICAgIGh5cGhlbkxhYmVsLmNsYXNzTGlzdC5hZGQoXCJoeXBoZW5cIiwgXCJoeXBoZW4tLXdyYXBcIik7XHJcbiAgICAgIGlmIChyaWdodFZhbHVlTGFiZWxTdGF0aWNIb3N0T2Zmc2V0ID09PSAwICYmIGxlZnRWYWx1ZUxhYmVsU3RhdGljSG9zdE9mZnNldCA9PT0gMCkge1xyXG4gICAgICAgIC8vIE5laXRoZXIgaGFuZGxlIG92ZXJsYXBzIHRoZSBob3N0IGJvdW5kYXJ5XHJcbiAgICAgICAgbGV0IGxlZnRWYWx1ZUxhYmVsVHJhbnNsYXRlID0gbGFiZWxUcmFuc2Zvcm1lZE92ZXJsYXAgLyAyIC0gbGFiZWxPZmZzZXQ7XHJcbiAgICAgICAgbGVmdFZhbHVlTGFiZWxUcmFuc2xhdGUgPVxyXG4gICAgICAgICAgTWF0aC5zaWduKGxlZnRWYWx1ZUxhYmVsVHJhbnNsYXRlKSA9PT0gLTFcclxuICAgICAgICAgICAgPyBNYXRoLmFicyhsZWZ0VmFsdWVMYWJlbFRyYW5zbGF0ZSlcclxuICAgICAgICAgICAgOiAtbGVmdFZhbHVlTGFiZWxUcmFuc2xhdGU7XHJcbiAgICAgICAgY29uc3QgbGVmdFZhbHVlTGFiZWxUcmFuc2Zvcm1lZEhvc3RPZmZzZXQgPSB0aGlzLmdldEhvc3RPZmZzZXQobGVmdFZhbHVlTGFiZWxUcmFuc2Zvcm1lZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0ICtcclxuICAgICAgICAgIGxlZnRWYWx1ZUxhYmVsVHJhbnNsYXRlIC1cclxuICAgICAgICAgIGxhYmVsT2Zmc2V0LCBsZWZ0VmFsdWVMYWJlbFRyYW5zZm9ybWVkLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnJpZ2h0ICtcclxuICAgICAgICAgIGxlZnRWYWx1ZUxhYmVsVHJhbnNsYXRlIC1cclxuICAgICAgICAgIGxhYmVsT2Zmc2V0KTtcclxuICAgICAgICBsZXQgcmlnaHRWYWx1ZUxhYmVsVHJhbnNsYXRlID0gbGFiZWxUcmFuc2Zvcm1lZE92ZXJsYXAgLyAyO1xyXG4gICAgICAgIGNvbnN0IHJpZ2h0VmFsdWVMYWJlbFRyYW5zZm9ybWVkSG9zdE9mZnNldCA9IHRoaXMuZ2V0SG9zdE9mZnNldChyaWdodFZhbHVlTGFiZWxUcmFuc2Zvcm1lZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0ICsgcmlnaHRWYWx1ZUxhYmVsVHJhbnNsYXRlLCByaWdodFZhbHVlTGFiZWxUcmFuc2Zvcm1lZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5yaWdodCArIHJpZ2h0VmFsdWVMYWJlbFRyYW5zbGF0ZSk7XHJcbiAgICAgICAgaWYgKGxlZnRWYWx1ZUxhYmVsVHJhbnNmb3JtZWRIb3N0T2Zmc2V0ICE9PSAwKSB7XHJcbiAgICAgICAgICBsZWZ0VmFsdWVMYWJlbFRyYW5zbGF0ZSArPSBsZWZ0VmFsdWVMYWJlbFRyYW5zZm9ybWVkSG9zdE9mZnNldDtcclxuICAgICAgICAgIHJpZ2h0VmFsdWVMYWJlbFRyYW5zbGF0ZSArPSBsZWZ0VmFsdWVMYWJlbFRyYW5zZm9ybWVkSG9zdE9mZnNldDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJpZ2h0VmFsdWVMYWJlbFRyYW5zZm9ybWVkSG9zdE9mZnNldCAhPT0gMCkge1xyXG4gICAgICAgICAgbGVmdFZhbHVlTGFiZWxUcmFuc2xhdGUgKz0gcmlnaHRWYWx1ZUxhYmVsVHJhbnNmb3JtZWRIb3N0T2Zmc2V0O1xyXG4gICAgICAgICAgcmlnaHRWYWx1ZUxhYmVsVHJhbnNsYXRlICs9IHJpZ2h0VmFsdWVMYWJlbFRyYW5zZm9ybWVkSG9zdE9mZnNldDtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGVmdFZhbHVlTGFiZWwuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoJHtsZWZ0VmFsdWVMYWJlbFRyYW5zbGF0ZX1weClgO1xyXG4gICAgICAgIGxlZnRWYWx1ZUxhYmVsVHJhbnNmb3JtZWQuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoJHtsZWZ0VmFsdWVMYWJlbFRyYW5zbGF0ZSAtIGxhYmVsT2Zmc2V0fXB4KWA7XHJcbiAgICAgICAgcmlnaHRWYWx1ZUxhYmVsLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKCR7cmlnaHRWYWx1ZUxhYmVsVHJhbnNsYXRlfXB4KWA7XHJcbiAgICAgICAgcmlnaHRWYWx1ZUxhYmVsVHJhbnNmb3JtZWQuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoJHtyaWdodFZhbHVlTGFiZWxUcmFuc2xhdGV9cHgpYDtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmIChsZWZ0VmFsdWVMYWJlbFN0YXRpY0hvc3RPZmZzZXQgPiAwIHx8IHJpZ2h0VmFsdWVMYWJlbFN0YXRpY0hvc3RPZmZzZXQgPiAwKSB7XHJcbiAgICAgICAgLy8gbGFiZWxzIG92ZXJsYXAgaG9zdCBib3VuZGFyeSBvbiB0aGUgbGVmdCBzaWRlXHJcbiAgICAgICAgbGVmdFZhbHVlTGFiZWwuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoJHtsZWZ0VmFsdWVMYWJlbFN0YXRpY0hvc3RPZmZzZXQgKyBsYWJlbE9mZnNldH1weClgO1xyXG4gICAgICAgIHJpZ2h0VmFsdWVMYWJlbC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgke2xhYmVsVHJhbnNmb3JtZWRPdmVybGFwICsgcmlnaHRWYWx1ZUxhYmVsU3RhdGljSG9zdE9mZnNldH1weClgO1xyXG4gICAgICAgIHJpZ2h0VmFsdWVMYWJlbFRyYW5zZm9ybWVkLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKCR7bGFiZWxUcmFuc2Zvcm1lZE92ZXJsYXAgKyByaWdodFZhbHVlTGFiZWxTdGF0aWNIb3N0T2Zmc2V0fXB4KWA7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAobGVmdFZhbHVlTGFiZWxTdGF0aWNIb3N0T2Zmc2V0IDwgMCB8fCByaWdodFZhbHVlTGFiZWxTdGF0aWNIb3N0T2Zmc2V0IDwgMCkge1xyXG4gICAgICAgIC8vIGxhYmVscyBvdmVybGFwIGhvc3QgYm91bmRhcnkgb24gdGhlIHJpZ2h0IHNpZGVcclxuICAgICAgICBsZXQgbGVmdFZhbHVlTGFiZWxUcmFuc2xhdGUgPSBNYXRoLmFicyhsZWZ0VmFsdWVMYWJlbFN0YXRpY0hvc3RPZmZzZXQpICsgbGFiZWxUcmFuc2Zvcm1lZE92ZXJsYXAgLSBsYWJlbE9mZnNldDtcclxuICAgICAgICBsZWZ0VmFsdWVMYWJlbFRyYW5zbGF0ZSA9XHJcbiAgICAgICAgICBNYXRoLnNpZ24obGVmdFZhbHVlTGFiZWxUcmFuc2xhdGUpID09PSAtMVxyXG4gICAgICAgICAgICA/IE1hdGguYWJzKGxlZnRWYWx1ZUxhYmVsVHJhbnNsYXRlKVxyXG4gICAgICAgICAgICA6IC1sZWZ0VmFsdWVMYWJlbFRyYW5zbGF0ZTtcclxuICAgICAgICBsZWZ0VmFsdWVMYWJlbC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgke2xlZnRWYWx1ZUxhYmVsVHJhbnNsYXRlfXB4KWA7XHJcbiAgICAgICAgbGVmdFZhbHVlTGFiZWxUcmFuc2Zvcm1lZC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgke2xlZnRWYWx1ZUxhYmVsVHJhbnNsYXRlIC0gbGFiZWxPZmZzZXR9cHgpYDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIGh5cGhlbkxhYmVsLmNsYXNzTGlzdC5yZW1vdmUoXCJoeXBoZW5cIiwgXCJoeXBoZW4tLXdyYXBcIik7XHJcbiAgICAgIGxlZnRWYWx1ZUxhYmVsLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKCR7bGVmdFZhbHVlTGFiZWxTdGF0aWNIb3N0T2Zmc2V0fXB4KWA7XHJcbiAgICAgIGxlZnRWYWx1ZUxhYmVsVHJhbnNmb3JtZWQuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoJHtsZWZ0VmFsdWVMYWJlbFN0YXRpY0hvc3RPZmZzZXR9cHgpYDtcclxuICAgICAgcmlnaHRWYWx1ZUxhYmVsLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKCR7cmlnaHRWYWx1ZUxhYmVsU3RhdGljSG9zdE9mZnNldH1weClgO1xyXG4gICAgICByaWdodFZhbHVlTGFiZWxUcmFuc2Zvcm1lZC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgke3JpZ2h0VmFsdWVMYWJlbFN0YXRpY0hvc3RPZmZzZXR9cHgpYDtcclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogSGlkZXMgYm91bmRpbmcgdGljayBsYWJlbHMgdGhhdCBhcmUgb2JzY3VyZWQgYnkgZWl0aGVyIGhhbmRsZS5cclxuICAgKi9cclxuICBoaWRlT2JzY3VyZWRCb3VuZGluZ1RpY2tMYWJlbHMoKSB7XHJcbiAgICBjb25zdCB2YWx1ZUlzUmFuZ2UgPSBpc1JhbmdlKHRoaXMudmFsdWUpO1xyXG4gICAgaWYgKCF0aGlzLmhhc0hpc3RvZ3JhbSAmJiAhdmFsdWVJc1JhbmdlICYmICF0aGlzLmxhYmVsSGFuZGxlcyAmJiAhdGhpcy5wcmVjaXNlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICghdGhpcy5oYXNIaXN0b2dyYW0gJiYgIXZhbHVlSXNSYW5nZSAmJiB0aGlzLmxhYmVsSGFuZGxlcyAmJiAhdGhpcy5wcmVjaXNlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICghdGhpcy5oYXNIaXN0b2dyYW0gJiYgIXZhbHVlSXNSYW5nZSAmJiAhdGhpcy5sYWJlbEhhbmRsZXMgJiYgdGhpcy5wcmVjaXNlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICghdGhpcy5oYXNIaXN0b2dyYW0gJiYgIXZhbHVlSXNSYW5nZSAmJiB0aGlzLmxhYmVsSGFuZGxlcyAmJiB0aGlzLnByZWNpc2UpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKCF0aGlzLmhhc0hpc3RvZ3JhbSAmJiB2YWx1ZUlzUmFuZ2UgJiYgIXRoaXMucHJlY2lzZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5oYXNIaXN0b2dyYW0gJiYgIXRoaXMucHJlY2lzZSAmJiAhdGhpcy5sYWJlbEhhbmRsZXMpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbWluSGFuZGxlID0gdGhpcy5lbC5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoXCIudGh1bWItLW1pblZhbHVlXCIpO1xyXG4gICAgY29uc3QgbWF4SGFuZGxlID0gdGhpcy5lbC5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoXCIudGh1bWItLXZhbHVlXCIpO1xyXG4gICAgY29uc3QgbWluVGlja0xhYmVsID0gdGhpcy5lbC5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoXCIudGlja19fbGFiZWwtLW1pblwiKTtcclxuICAgIGNvbnN0IG1heFRpY2tMYWJlbCA9IHRoaXMuZWwuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKFwiLnRpY2tfX2xhYmVsLS1tYXhcIik7XHJcbiAgICBpZiAoIW1pbkhhbmRsZSAmJiBtYXhIYW5kbGUgJiYgbWluVGlja0xhYmVsICYmIG1heFRpY2tMYWJlbCkge1xyXG4gICAgICBtaW5UaWNrTGFiZWwuc3R5bGUub3BhY2l0eSA9IHRoaXMuaXNNaW5UaWNrTGFiZWxPYnNjdXJlZChtaW5UaWNrTGFiZWwsIG1heEhhbmRsZSkgPyBcIjBcIiA6IFwiMVwiO1xyXG4gICAgICBtYXhUaWNrTGFiZWwuc3R5bGUub3BhY2l0eSA9IHRoaXMuaXNNYXhUaWNrTGFiZWxPYnNjdXJlZChtYXhUaWNrTGFiZWwsIG1heEhhbmRsZSkgPyBcIjBcIiA6IFwiMVwiO1xyXG4gICAgfVxyXG4gICAgaWYgKG1pbkhhbmRsZSAmJiBtYXhIYW5kbGUgJiYgbWluVGlja0xhYmVsICYmIG1heFRpY2tMYWJlbCkge1xyXG4gICAgICBtaW5UaWNrTGFiZWwuc3R5bGUub3BhY2l0eSA9XHJcbiAgICAgICAgdGhpcy5pc01pblRpY2tMYWJlbE9ic2N1cmVkKG1pblRpY2tMYWJlbCwgbWluSGFuZGxlKSB8fFxyXG4gICAgICAgICAgdGhpcy5pc01pblRpY2tMYWJlbE9ic2N1cmVkKG1pblRpY2tMYWJlbCwgbWF4SGFuZGxlKVxyXG4gICAgICAgICAgPyBcIjBcIlxyXG4gICAgICAgICAgOiBcIjFcIjtcclxuICAgICAgbWF4VGlja0xhYmVsLnN0eWxlLm9wYWNpdHkgPVxyXG4gICAgICAgIHRoaXMuaXNNYXhUaWNrTGFiZWxPYnNjdXJlZChtYXhUaWNrTGFiZWwsIG1pbkhhbmRsZSkgfHxcclxuICAgICAgICAgICh0aGlzLmlzTWF4VGlja0xhYmVsT2JzY3VyZWQobWF4VGlja0xhYmVsLCBtYXhIYW5kbGUpICYmIHRoaXMuaGFzSGlzdG9ncmFtKVxyXG4gICAgICAgICAgPyBcIjBcIlxyXG4gICAgICAgICAgOiBcIjFcIjtcclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyBhbiBpbnRlZ2VyIHJlcHJlc2VudGluZyB0aGUgbnVtYmVyIG9mIHBpeGVscyB0byBvZmZzZXQgb24gdGhlIGxlZnQgb3IgcmlnaHQgc2lkZSBiYXNlZCBvbiBkZXNpcmVkIHBvc2l0aW9uIGJlaGF2aW9yLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIGxlZnRCb3VuZHNcclxuICAgKiBAcGFyYW0gcmlnaHRCb3VuZHNcclxuICAgKiBAaW50ZXJuYWxcclxuICAgKi9cclxuICBnZXRIb3N0T2Zmc2V0KGxlZnRCb3VuZHMsIHJpZ2h0Qm91bmRzKSB7XHJcbiAgICBjb25zdCBob3N0Qm91bmRzID0gdGhpcy5lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIGNvbnN0IGJ1ZmZlciA9IDc7XHJcbiAgICBpZiAobGVmdEJvdW5kcyArIGJ1ZmZlciA8IGhvc3RCb3VuZHMubGVmdCkge1xyXG4gICAgICByZXR1cm4gaG9zdEJvdW5kcy5sZWZ0IC0gbGVmdEJvdW5kcyAtIGJ1ZmZlcjtcclxuICAgIH1cclxuICAgIGlmIChyaWdodEJvdW5kcyAtIGJ1ZmZlciA+IGhvc3RCb3VuZHMucmlnaHQpIHtcclxuICAgICAgcmV0dXJuIC0ocmlnaHRCb3VuZHMgLSBob3N0Qm91bmRzLnJpZ2h0KSArIGJ1ZmZlcjtcclxuICAgIH1cclxuICAgIHJldHVybiAwO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBSZXR1cm5zIGFuIGludGVnZXIgcmVwcmVzZW50aW5nIHRoZSBudW1iZXIgb2YgcGl4ZWxzIHRoYXQgdGhlIHR3byBnaXZlbiBzcGFuIGVsZW1lbnRzIGFyZSBvdmVybGFwcGluZywgdGFraW5nIGludG8gYWNjb3VudFxyXG4gICAqIGEgc3BhY2UgaW4gYmV0d2VlbiB0aGUgdHdvIHNwYW5zIGVxdWFsIHRvIHRoZSBmb250LXNpemUgc2V0IG9uIHRoZW0gdG8gYWNjb3VudCBmb3IgdGhlIHNwYWNlIG5lZWRlZCB0byByZW5kZXIgYSBoeXBoZW4uXHJcbiAgICpcclxuICAgKiBAcGFyYW0gbGVmdExhYmVsXHJcbiAgICogQHBhcmFtIHJpZ2h0TGFiZWxcclxuICAgKi9cclxuICBnZXRSYW5nZUxhYmVsT3ZlcmxhcChsZWZ0TGFiZWwsIHJpZ2h0TGFiZWwpIHtcclxuICAgIGNvbnN0IGxlZnRMYWJlbEJvdW5kcyA9IGxlZnRMYWJlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIGNvbnN0IHJpZ2h0TGFiZWxCb3VuZHMgPSByaWdodExhYmVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgY29uc3QgbGVmdExhYmVsRm9udFNpemUgPSB0aGlzLmdldEZvbnRTaXplRm9yRWxlbWVudChsZWZ0TGFiZWwpO1xyXG4gICAgY29uc3QgcmFuZ2VMYWJlbE92ZXJsYXAgPSBsZWZ0TGFiZWxCb3VuZHMucmlnaHQgKyBsZWZ0TGFiZWxGb250U2l6ZSAtIHJpZ2h0TGFiZWxCb3VuZHMubGVmdDtcclxuICAgIHJldHVybiBNYXRoLm1heChyYW5nZUxhYmVsT3ZlcmxhcCwgMCk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgYSBib29sZWFuIHZhbHVlIHJlcHJlc2VudGluZyBpZiB0aGUgbWluTGFiZWwgc3BhbiBlbGVtZW50IGlzIG9ic2N1cmVkIChiZWluZyBvdmVybGFwcGVkKSBieSB0aGUgZ2l2ZW4gaGFuZGxlIGRpdiBlbGVtZW50LlxyXG4gICAqXHJcbiAgICogQHBhcmFtIG1pbkxhYmVsXHJcbiAgICogQHBhcmFtIGhhbmRsZVxyXG4gICAqL1xyXG4gIGlzTWluVGlja0xhYmVsT2JzY3VyZWQobWluTGFiZWwsIGhhbmRsZSkge1xyXG4gICAgY29uc3QgbWluTGFiZWxCb3VuZHMgPSBtaW5MYWJlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIGNvbnN0IGhhbmRsZUJvdW5kcyA9IGhhbmRsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIHJldHVybiBpbnRlcnNlY3RzKG1pbkxhYmVsQm91bmRzLCBoYW5kbGVCb3VuZHMpO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBSZXR1cm5zIGEgYm9vbGVhbiB2YWx1ZSByZXByZXNlbnRpbmcgaWYgdGhlIG1heExhYmVsIHNwYW4gZWxlbWVudCBpcyBvYnNjdXJlZCAoYmVpbmcgb3ZlcmxhcHBlZCkgYnkgdGhlIGdpdmVuIGhhbmRsZSBkaXYgZWxlbWVudC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSBtYXhMYWJlbFxyXG4gICAqIEBwYXJhbSBoYW5kbGVcclxuICAgKi9cclxuICBpc01heFRpY2tMYWJlbE9ic2N1cmVkKG1heExhYmVsLCBoYW5kbGUpIHtcclxuICAgIGNvbnN0IG1heExhYmVsQm91bmRzID0gbWF4TGFiZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICBjb25zdCBoYW5kbGVCb3VuZHMgPSBoYW5kbGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICByZXR1cm4gaW50ZXJzZWN0cyhtYXhMYWJlbEJvdW5kcywgaGFuZGxlQm91bmRzKTtcclxuICB9XHJcbiAgc3RhdGljIGdldCBkZWxlZ2F0ZXNGb2N1cygpIHsgcmV0dXJuIHRydWU7IH1cclxuICBnZXQgZWwoKSB7IHJldHVybiBnZXRFbGVtZW50KHRoaXMpOyB9XHJcbiAgc3RhdGljIGdldCB3YXRjaGVycygpIHsgcmV0dXJuIHtcclxuICAgIFwiaGlzdG9ncmFtXCI6IFtcImhpc3RvZ3JhbVdhdGNoZXJcIl0sXHJcbiAgICBcInZhbHVlXCI6IFtcInZhbHVlSGFuZGxlclwiXSxcclxuICAgIFwibWluVmFsdWVcIjogW1wibWluTWF4VmFsdWVIYW5kbGVyXCJdLFxyXG4gICAgXCJtYXhWYWx1ZVwiOiBbXCJtaW5NYXhWYWx1ZUhhbmRsZXJcIl1cclxuICB9OyB9XHJcbn07XHJcblNsaWRlci5zdHlsZSA9IHNsaWRlckNzcztcblxuZXhwb3J0IHsgU2xpZGVyIGFzIGNhbGNpdGVfc2xpZGVyIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhbGNpdGUtc2xpZGVyLmVudHJ5LmpzLm1hcCIsIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvYmxvYi9tYXN0ZXIvTElDRU5TRS5tZCBmb3IgZGV0YWlscy5cbiAqIHYxLjAuNVxuICovXG5jb25zdCBjbGFtcCA9ICh2YWx1ZSwgbWluLCBtYXgpID0+IE1hdGgubWF4KG1pbiwgTWF0aC5taW4odmFsdWUsIG1heCkpO1xuY29uc3QgZGVjaW1hbFBsYWNlcyA9ICh2YWx1ZSkgPT4ge1xuICBjb25zdCBtYXRjaCA9IChcIlwiICsgdmFsdWUpLm1hdGNoKC8oPzpcXC4oXFxkKykpPyg/OltlRV0oWystXT9cXGQrKSk/JC8pO1xuICBpZiAoIW1hdGNoKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cbiAgcmV0dXJuIE1hdGgubWF4KDAsIFxuICAvLyBOdW1iZXIgb2YgZGlnaXRzIHJpZ2h0IG9mIGRlY2ltYWwgcG9pbnQuXG4gIChtYXRjaFsxXSA/IG1hdGNoWzFdLmxlbmd0aCA6IDApIC1cbiAgICAvLyBBZGp1c3QgZm9yIHNjaWVudGlmaWMgbm90YXRpb24uXG4gICAgKG1hdGNoWzJdID8gK21hdGNoWzJdIDogMCkpO1xufTtcblxuZXhwb3J0IHsgY2xhbXAgYXMgYywgZGVjaW1hbFBsYWNlcyBhcyBkIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hdGgtN2VmZDk4N2EuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9