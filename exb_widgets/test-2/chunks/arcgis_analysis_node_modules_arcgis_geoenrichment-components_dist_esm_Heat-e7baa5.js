"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_geoenrichment-components_dist_esm_Heat-e7baa5"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/BaseProcessor-497cf7f9.js":
/*!*****************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/BaseProcessor-497cf7f9.js ***!
  \*****************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   l: () => (/* binding */ l),
/* harmony export */   p: () => (/* binding */ p)
/* harmony export */ });
/* harmony import */ var _DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./DataBrowser-5ce2ade9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/DataBrowser-5ce2ade9.js");
/* harmony import */ var _arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./arcgis-geoenrichment-databrowser-6ca8ea14.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/arcgis-geoenrichment-databrowser-6ca8ea14.js");
/* harmony import */ var _Query_39c34b93_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Query-39c34b93.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/Query-39c34b93.js");
/* harmony import */ var _TileKey_9a222b43_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./TileKey-9a222b43.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/TileKey-9a222b43.js");
/* harmony import */ var _HandleOwner_cd6ca1f5_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./HandleOwner-cd6ca1f5.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/HandleOwner-cd6ca1f5.js");






/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function l(o,e,l,n){const r=o.clone(),t=1<<r.level,i=r.col+e,c=r.row+l;return n&&i<0?(r.col=i+t,r.world-=1):i>=t?(r.col=i-t,r.world+=1):r.col=i,r.row=c,r}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
let s=class extends _HandleOwner_cd6ca1f5_js__WEBPACK_IMPORTED_MODULE_4__.d{initialize(){}destroy(){}get supportsTileUpdates(){return !1}get spatialReference(){const e=this.get("tileStore.tileScheme.spatialReference");return e&&e.toJSON()||null}};(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.Z)([(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__._)({readOnly:!0})],s.prototype,"supportsTileUpdates",null),(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.Z)([(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__._)({constructOnly:!0})],s.prototype,"remoteClient",void 0),(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.Z)([(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__._)({constructOnly:!0})],s.prototype,"service",void 0),(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.Z)([(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__._)()],s.prototype,"spatialReference",null),(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.Z)([(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__._)({constructOnly:!0})],s.prototype,"tileInfo",void 0),(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.Z)([(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__._)({constructOnly:!0})],s.prototype,"tileStore",void 0),s=(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.Z)([(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.a0)("esri.views.2d.layers.features.processors.BaseProcessor")],s);var p=s;



//# sourceMappingURL=BaseProcessor-497cf7f9.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/HeatmapProcessor-1363c34e.js":
/*!********************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/HeatmapProcessor-1363c34e.js ***!
  \********************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./DataBrowser-5ce2ade9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/DataBrowser-5ce2ade9.js");
/* harmony import */ var _arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./arcgis-geoenrichment-databrowser-6ca8ea14.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/arcgis-geoenrichment-databrowser-6ca8ea14.js");
/* harmony import */ var _diffUtils_d9afbcb3_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./diffUtils-d9afbcb3.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/diffUtils-d9afbcb3.js");
/* harmony import */ var _definitions_e63f4fe2_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./definitions-e63f4fe2.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/definitions-e63f4fe2.js");
/* harmony import */ var _BaseProcessor_497cf7f9_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./BaseProcessor-497cf7f9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/BaseProcessor-497cf7f9.js");
/* harmony import */ var _index_4a62c63d_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./index-4a62c63d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/index-4a62c63d.js");
/* harmony import */ var _Query_39c34b93_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Query-39c34b93.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/Query-39c34b93.js");
/* harmony import */ var _TimeExtent_7f857a39_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./TimeExtent-7f857a39.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/TimeExtent-7f857a39.js");
/* harmony import */ var _TileKey_9a222b43_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./TileKey-9a222b43.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/TileKey-9a222b43.js");
/* harmony import */ var _HandleOwner_cd6ca1f5_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./HandleOwner-cd6ca1f5.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/HandleOwner-cd6ca1f5.js");











/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
(()=>{if(!("document" in _arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_1__.e))return ()=>null;const e$1=document.createElement("canvas"),n=e$1.getContext("2d"),r=512;return e$1.height=r,e$1.width=1,t=>{n.clearRect(0,0,1,e$1.height);const r=n.createLinearGradient(0,0,0,e$1.height);for(const{ratio:e,color:n}of t.colorStops)r.addColorStop(Math.max(e,.001),`rgba(${n[0]}, ${n[1]}, ${n[2]}, ${n[3]})`);return n.fillStyle=r,n.fillRect(0,0,1,e$1.height),n.getImageData(0,0,1,e$1.height).data}})();function o(t,e,n,r){const{blurRadius:o,fieldOffset:a,field:i}=e,c=new Float64Array(n*r),l=f(o),s=Math.round(3*o);let h,d=Number.NEGATIVE_INFINITY;const m=u(i,a),g=new Set;for(const f of t){const t=f.getCursor();for(;t.next();){const e=t.getObjectId();if(g.has(e))continue;g.add(e);const o=t.readLegacyPointGeometry(),a=128;if(o.x<-a||o.x>=n+a||o.y<-a||o.y>r+a)continue;const i=+m(t),f=Math.round(o.x)-s,u=Math.round(o.y)-s,y=Math.max(0,f),M=Math.max(0,u),x=Math.min(r,Math.round(o.y)+s),b=Math.min(n,Math.round(o.x)+s);for(let t=M;t<x;t++){const e=l[t-u];for(let r=y;r<b;r++){const o=l[r-f];h=c[t*n+r]+=e*o*i,h>d&&(d=h);}}}}return {matrix:c.buffer,max:d}}function f(t){const e=Math.round(3*t),n=2*t*t,r=new Float64Array(2*e+1);for(let o=0;o<=r.length;o++)r[o]=Math.exp(-((o-e)**2)/n)/Math.sqrt(2*Math.PI)*(t/2);return r}function u(t,e){return null!=t?"string"==typeof e?e=>-1*+e.readAttribute(t):n=>+n.readAttribute(t)+e:t=>1}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
class d{constructor(e,t){this.offset=e,this.extent=t;}}function c(e){const t=e.key,s=new Map,r=256,i=_definitions_e63f4fe2_js__WEBPACK_IMPORTED_MODULE_3__.o,a=e.tileInfoView.tileInfo.isWrappable;return s.set((0,_BaseProcessor_497cf7f9_js__WEBPACK_IMPORTED_MODULE_4__.l)(t,-1,-1,a).id,new d([-i,-i],[i-r,i-r,i,i])),s.set((0,_BaseProcessor_497cf7f9_js__WEBPACK_IMPORTED_MODULE_4__.l)(t,0,-1,a).id,new d([0,-i],[0,i-r,i,i])),s.set((0,_BaseProcessor_497cf7f9_js__WEBPACK_IMPORTED_MODULE_4__.l)(t,1,-1,a).id,new d([i,-i],[0,i-r,r,i])),s.set((0,_BaseProcessor_497cf7f9_js__WEBPACK_IMPORTED_MODULE_4__.l)(t,-1,0,a).id,new d([-i,0],[i-r,0,i,i])),s.set((0,_BaseProcessor_497cf7f9_js__WEBPACK_IMPORTED_MODULE_4__.l)(t,1,0,a).id,new d([i,0],[0,0,r,i])),s.set((0,_BaseProcessor_497cf7f9_js__WEBPACK_IMPORTED_MODULE_4__.l)(t,-1,1,a).id,new d([-i,i],[i-r,0,i,r])),s.set((0,_BaseProcessor_497cf7f9_js__WEBPACK_IMPORTED_MODULE_4__.l)(t,0,1,a).id,new d([0,i],[0,0,i,r])),s.set((0,_BaseProcessor_497cf7f9_js__WEBPACK_IMPORTED_MODULE_4__.l)(t,1,1,a).id,new d([i,i],[0,0,r,r])),s}let l=class extends _BaseProcessor_497cf7f9_js__WEBPACK_IMPORTED_MODULE_4__.p{constructor(){super(...arguments),this.type="heatmap",this._tileKeyToFeatureSets=new Map;}initialize(){this.handles.add([this.tileStore.on("update",this.onTileUpdate.bind(this))]);}async update(e,t){const s=t.schema.processors[0];if("heatmap"!==s.type)return;(0,_diffUtils_d9afbcb3_js__WEBPACK_IMPORTED_MODULE_2__.m)(this._schema,s)&&(e.mesh=!0,this._schema=s);}onTileUpdate(e){for(const t of e.removed)this._tileKeyToFeatureSets.delete(t.key.id);}onTileClear(e){const t={clear:!0};return this._tileKeyToFeatureSets.delete(e.key.id),this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:e.id,data:t})}async onTileMessage(e,r$1,i){this._tileKeyToFeatureSets.has(e.key.id)||this._tileKeyToFeatureSets.set(e.key.id,new Map);const o$1=this._tileKeyToFeatureSets.get(e.key.id);if((0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.H)(r$1.addOrUpdate)&&r$1.addOrUpdate.hasFeatures&&o$1.set(r$1.addOrUpdate.instance,r$1),r$1.end){const t=[],r=c(e);this._tileKeyToFeatureSets.forEach(((i,o)=>{if(o===e.key.id)i.forEach((e=>(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.cW)(e.addOrUpdate,(e=>t.push(e)))));else if(r.has(o)){const e=r.get(o),[a,n]=e.offset;i.forEach((e=>(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.cW)(e.addOrUpdate,(e=>{const s=e.transform(a,n,1,1);t.push(s);}))));}}));const o$1=o(t,this._schema.mesh,512,512),n={tileKey:e.key.id,intensityInfo:o$1},p=[o$1.matrix];return this.remoteClient.invoke("tileRenderer.onTileData",n,{...i,transferList:p})}}onTileError(e,t,s){return this.remoteClient.invoke("tileRenderer.onTileError",{tileKey:e.id,error:t},s)}};l=(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.Z)([(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.a0)("esri.views.2d.layers.features.processors.HeatmapProcessor")],l);var h=l;

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (h);

//# sourceMappingURL=HeatmapProcessor-1363c34e.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfZ2VvZW5yaWNobWVudC1jb21wb25lbnRzX2Rpc3RfZXNtX0hlYXQtZTdiYWE1LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBb0U7QUFDWjtBQUMzQjtBQUNFO0FBQ2U7O0FBRTlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLG1EQUFtRDs7QUFFdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsdURBQUMsQ0FBQyxjQUFjLFdBQVcsMEJBQTBCLFVBQVUsdUJBQXVCLDBEQUEwRCw2QkFBNkIsMkRBQUMsRUFBRSwyREFBQyxFQUFFLFlBQVksMkNBQTJDLDJEQUFDLEVBQUUsMkRBQUMsRUFBRSxpQkFBaUIsc0NBQXNDLDJEQUFDLEVBQUUsMkRBQUMsRUFBRSxpQkFBaUIsaUNBQWlDLDJEQUFDLEVBQUUsMkRBQUMseUNBQXlDLDJEQUFDLEVBQUUsMkRBQUMsRUFBRSxpQkFBaUIsa0NBQWtDLDJEQUFDLEVBQUUsMkRBQUMsRUFBRSxpQkFBaUIscUNBQXFDLDJEQUFDLEVBQUUsNERBQUMsK0RBQStEOztBQUV4a0I7O0FBRWhCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNwQitFO0FBQ1o7QUFDdkI7QUFDUztBQUNLO0FBQzdCO0FBQ0E7QUFDSztBQUNIO0FBQ0k7O0FBRW5DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxLQUFLLDBGQUFjLGtCQUFrQix3RUFBd0Usb0NBQW9DLDhCQUE4QixpREFBaUQsVUFBVSxnQkFBZ0Isd0RBQXdELEtBQUssSUFBSSxLQUFLLElBQUksS0FBSyxJQUFJLEtBQUssSUFBSSx5RkFBeUYsSUFBSSxvQkFBb0IsTUFBTSxtQ0FBbUMsb0RBQW9ELGlDQUFpQyx5QkFBeUIsa0JBQWtCLHNCQUFzQixLQUFLLFNBQVMsRUFBRSx3QkFBd0IscUJBQXFCLFNBQVMsMENBQTBDLDhDQUE4QyxzSkFBc0osWUFBWSxJQUFJLEtBQUssZUFBZSxZQUFZLElBQUksS0FBSyxlQUFlLGlDQUFpQyxRQUFRLHVCQUF1QixjQUFjLDBEQUEwRCxZQUFZLFlBQVksNERBQTRELFNBQVMsZ0JBQWdCOztBQUU3dkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlCQUFpQiw4QkFBOEIsY0FBYyxnQ0FBZ0MsdURBQUcsdUNBQXVDLGFBQWEsNkRBQUcsbURBQW1ELDZEQUFHLCtDQUErQyw2REFBRywrQ0FBK0MsNkRBQUcsK0NBQStDLDZEQUFHLDJDQUEyQyw2REFBRywrQ0FBK0MsNkRBQUcsMkNBQTJDLDZEQUFHLHVDQUF1QyxvQkFBb0IseURBQUMsQ0FBQyxjQUFjLDRFQUE0RSxhQUFhLDhFQUE4RSxrQkFBa0IsK0JBQStCLDZCQUE2Qix5REFBQyw4Q0FBOEMsZ0JBQWdCLHNFQUFzRSxlQUFlLFNBQVMsVUFBVSx1R0FBdUcsb0JBQW9CLEVBQUUsNkJBQTZCLDJGQUEyRixtREFBbUQsR0FBRywyREFBQywrRkFBK0Ysa0JBQWtCLDRDQUE0Qyw4QkFBOEIsNERBQUMsaUNBQWlDLGtCQUFrQixnQ0FBZ0MsY0FBYyw0REFBQyxvQkFBb0IsNkJBQTZCLFdBQVcsT0FBTyxHQUFHLDRDQUE0QyxtQ0FBbUMsZ0JBQWdCLDZEQUE2RCxvQkFBb0IsR0FBRyxtQkFBbUIsNERBQTRELHFCQUFxQixNQUFNLEVBQUUsMkRBQUcsRUFBRSw0REFBQyxrRUFBa0U7O0FBRXY5RCxpRUFBZSxDQUFDLEVBQUM7O0FBRWpCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYW5hbHlzaXMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvZ2VvZW5yaWNobWVudC1jb21wb25lbnRzL2Rpc3QvZXNtL0Jhc2VQcm9jZXNzb3ItNDk3Y2Y3ZjkuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYW5hbHlzaXMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvZ2VvZW5yaWNobWVudC1jb21wb25lbnRzL2Rpc3QvZXNtL0hlYXRtYXBQcm9jZXNzb3ItMTM2M2MzNGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgWiBhcyBlLCBfIGFzIHksIGEwIGFzIGkgfSBmcm9tICcuL0RhdGFCcm93c2VyLTVjZTJhZGU5LmpzJztcbmltcG9ydCAnLi9hcmNnaXMtZ2VvZW5yaWNobWVudC1kYXRhYnJvd3Nlci02Y2E4ZWExNC5qcyc7XG5pbXBvcnQgJy4vUXVlcnktMzljMzRiOTMuanMnO1xuaW1wb3J0ICcuL1RpbGVLZXktOWEyMjJiNDMuanMnO1xuaW1wb3J0IHsgZCB9IGZyb20gJy4vSGFuZGxlT3duZXItY2Q2Y2ExZjUuanMnO1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuZnVuY3Rpb24gbChvLGUsbCxuKXtjb25zdCByPW8uY2xvbmUoKSx0PTE8PHIubGV2ZWwsaT1yLmNvbCtlLGM9ci5yb3crbDtyZXR1cm4gbiYmaTwwPyhyLmNvbD1pK3Qsci53b3JsZC09MSk6aT49dD8oci5jb2w9aS10LHIud29ybGQrPTEpOnIuY29sPWksci5yb3c9YyxyfVxuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xubGV0IHM9Y2xhc3MgZXh0ZW5kcyBke2luaXRpYWxpemUoKXt9ZGVzdHJveSgpe31nZXQgc3VwcG9ydHNUaWxlVXBkYXRlcygpe3JldHVybiAhMX1nZXQgc3BhdGlhbFJlZmVyZW5jZSgpe2NvbnN0IGU9dGhpcy5nZXQoXCJ0aWxlU3RvcmUudGlsZVNjaGVtZS5zcGF0aWFsUmVmZXJlbmNlXCIpO3JldHVybiBlJiZlLnRvSlNPTigpfHxudWxsfX07ZShbeSh7cmVhZE9ubHk6ITB9KV0scy5wcm90b3R5cGUsXCJzdXBwb3J0c1RpbGVVcGRhdGVzXCIsbnVsbCksZShbeSh7Y29uc3RydWN0T25seTohMH0pXSxzLnByb3RvdHlwZSxcInJlbW90ZUNsaWVudFwiLHZvaWQgMCksZShbeSh7Y29uc3RydWN0T25seTohMH0pXSxzLnByb3RvdHlwZSxcInNlcnZpY2VcIix2b2lkIDApLGUoW3koKV0scy5wcm90b3R5cGUsXCJzcGF0aWFsUmVmZXJlbmNlXCIsbnVsbCksZShbeSh7Y29uc3RydWN0T25seTohMH0pXSxzLnByb3RvdHlwZSxcInRpbGVJbmZvXCIsdm9pZCAwKSxlKFt5KHtjb25zdHJ1Y3RPbmx5OiEwfSldLHMucHJvdG90eXBlLFwidGlsZVN0b3JlXCIsdm9pZCAwKSxzPWUoW2koXCJlc3JpLnZpZXdzLjJkLmxheWVycy5mZWF0dXJlcy5wcm9jZXNzb3JzLkJhc2VQcm9jZXNzb3JcIildLHMpO3ZhciBwPXM7XG5cbmV4cG9ydCB7IGwsIHAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QmFzZVByb2Nlc3Nvci00OTdjZjdmOS5qcy5tYXAiLCJpbXBvcnQgeyBaIGFzIGUkMSwgYTAgYXMgaSwgSCBhcyByLCBjVyBhcyBBIH0gZnJvbSAnLi9EYXRhQnJvd3Nlci01Y2UyYWRlOS5qcyc7XG5pbXBvcnQgeyBlIH0gZnJvbSAnLi9hcmNnaXMtZ2VvZW5yaWNobWVudC1kYXRhYnJvd3Nlci02Y2E4ZWExNC5qcyc7XG5pbXBvcnQgeyBtIH0gZnJvbSAnLi9kaWZmVXRpbHMtZDlhZmJjYjMuanMnO1xuaW1wb3J0IHsgbyBhcyBvJDEgfSBmcm9tICcuL2RlZmluaXRpb25zLWU2M2Y0ZmUyLmpzJztcbmltcG9ydCB7IHAsIGwgYXMgbCQxIH0gZnJvbSAnLi9CYXNlUHJvY2Vzc29yLTQ5N2NmN2Y5LmpzJztcbmltcG9ydCAnLi9pbmRleC00YTYyYzYzZC5qcyc7XG5pbXBvcnQgJy4vUXVlcnktMzljMzRiOTMuanMnO1xuaW1wb3J0ICcuL1RpbWVFeHRlbnQtN2Y4NTdhMzkuanMnO1xuaW1wb3J0ICcuL1RpbGVLZXktOWEyMjJiNDMuanMnO1xuaW1wb3J0ICcuL0hhbmRsZU93bmVyLWNkNmNhMWY1LmpzJztcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbigoKT0+e2lmKCEoXCJkb2N1bWVudFwiaW4gZSkpcmV0dXJuICgpPT5udWxsO2NvbnN0IGUkMT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLG49ZSQxLmdldENvbnRleHQoXCIyZFwiKSxyPTUxMjtyZXR1cm4gZSQxLmhlaWdodD1yLGUkMS53aWR0aD0xLHQ9PntuLmNsZWFyUmVjdCgwLDAsMSxlJDEuaGVpZ2h0KTtjb25zdCByPW4uY3JlYXRlTGluZWFyR3JhZGllbnQoMCwwLDAsZSQxLmhlaWdodCk7Zm9yKGNvbnN0e3JhdGlvOmUsY29sb3I6bn1vZiB0LmNvbG9yU3RvcHMpci5hZGRDb2xvclN0b3AoTWF0aC5tYXgoZSwuMDAxKSxgcmdiYSgke25bMF19LCAke25bMV19LCAke25bMl19LCAke25bM119KWApO3JldHVybiBuLmZpbGxTdHlsZT1yLG4uZmlsbFJlY3QoMCwwLDEsZSQxLmhlaWdodCksbi5nZXRJbWFnZURhdGEoMCwwLDEsZSQxLmhlaWdodCkuZGF0YX19KSgpO2Z1bmN0aW9uIG8odCxlLG4scil7Y29uc3R7Ymx1clJhZGl1czpvLGZpZWxkT2Zmc2V0OmEsZmllbGQ6aX09ZSxjPW5ldyBGbG9hdDY0QXJyYXkobipyKSxsPWYobykscz1NYXRoLnJvdW5kKDMqbyk7bGV0IGgsZD1OdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7Y29uc3QgbT11KGksYSksZz1uZXcgU2V0O2Zvcihjb25zdCBmIG9mIHQpe2NvbnN0IHQ9Zi5nZXRDdXJzb3IoKTtmb3IoO3QubmV4dCgpOyl7Y29uc3QgZT10LmdldE9iamVjdElkKCk7aWYoZy5oYXMoZSkpY29udGludWU7Zy5hZGQoZSk7Y29uc3Qgbz10LnJlYWRMZWdhY3lQb2ludEdlb21ldHJ5KCksYT0xMjg7aWYoby54PC1hfHxvLng+PW4rYXx8by55PC1hfHxvLnk+cithKWNvbnRpbnVlO2NvbnN0IGk9K20odCksZj1NYXRoLnJvdW5kKG8ueCktcyx1PU1hdGgucm91bmQoby55KS1zLHk9TWF0aC5tYXgoMCxmKSxNPU1hdGgubWF4KDAsdSkseD1NYXRoLm1pbihyLE1hdGgucm91bmQoby55KStzKSxiPU1hdGgubWluKG4sTWF0aC5yb3VuZChvLngpK3MpO2ZvcihsZXQgdD1NO3Q8eDt0Kyspe2NvbnN0IGU9bFt0LXVdO2ZvcihsZXQgcj15O3I8YjtyKyspe2NvbnN0IG89bFtyLWZdO2g9Y1t0Km4rcl0rPWUqbyppLGg+ZCYmKGQ9aCk7fX19fXJldHVybiB7bWF0cml4OmMuYnVmZmVyLG1heDpkfX1mdW5jdGlvbiBmKHQpe2NvbnN0IGU9TWF0aC5yb3VuZCgzKnQpLG49Mip0KnQscj1uZXcgRmxvYXQ2NEFycmF5KDIqZSsxKTtmb3IobGV0IG89MDtvPD1yLmxlbmd0aDtvKyspcltvXT1NYXRoLmV4cCgtKChvLWUpKioyKS9uKS9NYXRoLnNxcnQoMipNYXRoLlBJKSoodC8yKTtyZXR1cm4gcn1mdW5jdGlvbiB1KHQsZSl7cmV0dXJuIG51bGwhPXQ/XCJzdHJpbmdcIj09dHlwZW9mIGU/ZT0+LTEqK2UucmVhZEF0dHJpYnV0ZSh0KTpuPT4rbi5yZWFkQXR0cmlidXRlKHQpK2U6dD0+MX1cblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmNsYXNzIGR7Y29uc3RydWN0b3IoZSx0KXt0aGlzLm9mZnNldD1lLHRoaXMuZXh0ZW50PXQ7fX1mdW5jdGlvbiBjKGUpe2NvbnN0IHQ9ZS5rZXkscz1uZXcgTWFwLHI9MjU2LGk9byQxLGE9ZS50aWxlSW5mb1ZpZXcudGlsZUluZm8uaXNXcmFwcGFibGU7cmV0dXJuIHMuc2V0KGwkMSh0LC0xLC0xLGEpLmlkLG5ldyBkKFstaSwtaV0sW2ktcixpLXIsaSxpXSkpLHMuc2V0KGwkMSh0LDAsLTEsYSkuaWQsbmV3IGQoWzAsLWldLFswLGktcixpLGldKSkscy5zZXQobCQxKHQsMSwtMSxhKS5pZCxuZXcgZChbaSwtaV0sWzAsaS1yLHIsaV0pKSxzLnNldChsJDEodCwtMSwwLGEpLmlkLG5ldyBkKFstaSwwXSxbaS1yLDAsaSxpXSkpLHMuc2V0KGwkMSh0LDEsMCxhKS5pZCxuZXcgZChbaSwwXSxbMCwwLHIsaV0pKSxzLnNldChsJDEodCwtMSwxLGEpLmlkLG5ldyBkKFstaSxpXSxbaS1yLDAsaSxyXSkpLHMuc2V0KGwkMSh0LDAsMSxhKS5pZCxuZXcgZChbMCxpXSxbMCwwLGkscl0pKSxzLnNldChsJDEodCwxLDEsYSkuaWQsbmV3IGQoW2ksaV0sWzAsMCxyLHJdKSksc31sZXQgbD1jbGFzcyBleHRlbmRzIHB7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMudHlwZT1cImhlYXRtYXBcIix0aGlzLl90aWxlS2V5VG9GZWF0dXJlU2V0cz1uZXcgTWFwO31pbml0aWFsaXplKCl7dGhpcy5oYW5kbGVzLmFkZChbdGhpcy50aWxlU3RvcmUub24oXCJ1cGRhdGVcIix0aGlzLm9uVGlsZVVwZGF0ZS5iaW5kKHRoaXMpKV0pO31hc3luYyB1cGRhdGUoZSx0KXtjb25zdCBzPXQuc2NoZW1hLnByb2Nlc3NvcnNbMF07aWYoXCJoZWF0bWFwXCIhPT1zLnR5cGUpcmV0dXJuO20odGhpcy5fc2NoZW1hLHMpJiYoZS5tZXNoPSEwLHRoaXMuX3NjaGVtYT1zKTt9b25UaWxlVXBkYXRlKGUpe2Zvcihjb25zdCB0IG9mIGUucmVtb3ZlZCl0aGlzLl90aWxlS2V5VG9GZWF0dXJlU2V0cy5kZWxldGUodC5rZXkuaWQpO31vblRpbGVDbGVhcihlKXtjb25zdCB0PXtjbGVhcjohMH07cmV0dXJuIHRoaXMuX3RpbGVLZXlUb0ZlYXR1cmVTZXRzLmRlbGV0ZShlLmtleS5pZCksdGhpcy5yZW1vdGVDbGllbnQuaW52b2tlKFwidGlsZVJlbmRlcmVyLm9uVGlsZURhdGFcIix7dGlsZUtleTplLmlkLGRhdGE6dH0pfWFzeW5jIG9uVGlsZU1lc3NhZ2UoZSxyJDEsaSl7dGhpcy5fdGlsZUtleVRvRmVhdHVyZVNldHMuaGFzKGUua2V5LmlkKXx8dGhpcy5fdGlsZUtleVRvRmVhdHVyZVNldHMuc2V0KGUua2V5LmlkLG5ldyBNYXApO2NvbnN0IG8kMT10aGlzLl90aWxlS2V5VG9GZWF0dXJlU2V0cy5nZXQoZS5rZXkuaWQpO2lmKHIociQxLmFkZE9yVXBkYXRlKSYmciQxLmFkZE9yVXBkYXRlLmhhc0ZlYXR1cmVzJiZvJDEuc2V0KHIkMS5hZGRPclVwZGF0ZS5pbnN0YW5jZSxyJDEpLHIkMS5lbmQpe2NvbnN0IHQ9W10scj1jKGUpO3RoaXMuX3RpbGVLZXlUb0ZlYXR1cmVTZXRzLmZvckVhY2goKChpLG8pPT57aWYobz09PWUua2V5LmlkKWkuZm9yRWFjaCgoZT0+QShlLmFkZE9yVXBkYXRlLChlPT50LnB1c2goZSkpKSkpO2Vsc2UgaWYoci5oYXMobykpe2NvbnN0IGU9ci5nZXQobyksW2Esbl09ZS5vZmZzZXQ7aS5mb3JFYWNoKChlPT5BKGUuYWRkT3JVcGRhdGUsKGU9Pntjb25zdCBzPWUudHJhbnNmb3JtKGEsbiwxLDEpO3QucHVzaChzKTt9KSkpKTt9fSkpO2NvbnN0IG8kMT1vKHQsdGhpcy5fc2NoZW1hLm1lc2gsNTEyLDUxMiksbj17dGlsZUtleTplLmtleS5pZCxpbnRlbnNpdHlJbmZvOm8kMX0scD1bbyQxLm1hdHJpeF07cmV0dXJuIHRoaXMucmVtb3RlQ2xpZW50Lmludm9rZShcInRpbGVSZW5kZXJlci5vblRpbGVEYXRhXCIsbix7Li4uaSx0cmFuc2Zlckxpc3Q6cH0pfX1vblRpbGVFcnJvcihlLHQscyl7cmV0dXJuIHRoaXMucmVtb3RlQ2xpZW50Lmludm9rZShcInRpbGVSZW5kZXJlci5vblRpbGVFcnJvclwiLHt0aWxlS2V5OmUuaWQsZXJyb3I6dH0scyl9fTtsPWUkMShbaShcImVzcmkudmlld3MuMmQubGF5ZXJzLmZlYXR1cmVzLnByb2Nlc3NvcnMuSGVhdG1hcFByb2Nlc3NvclwiKV0sbCk7dmFyIGg9bDtcblxuZXhwb3J0IGRlZmF1bHQgaDtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SGVhdG1hcFByb2Nlc3Nvci0xMzYzYzM0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=