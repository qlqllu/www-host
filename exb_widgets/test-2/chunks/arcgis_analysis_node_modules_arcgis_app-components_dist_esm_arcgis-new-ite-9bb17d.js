"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-new-ite-9bb17d"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-feature-layer-preference.entry.js":
/*!*************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-feature-layer-preference.entry.js ***!
  \*************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   arcgis_new_item_pages_feature_layer_preference: () => (/* binding */ ArcgisNewItemPagesFeatureLayerPreference)
/* harmony export */ });
/* harmony import */ var _index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-92ebb396.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-92ebb396.js");
/* harmony import */ var _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./add-item-97d577a9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/add-item-97d577a9.js");
/* harmony import */ var _ui_ecf86bba_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ui-ecf86bba.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ui-ecf86bba.js");
/* harmony import */ var _feature_layer_d33ea114_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./feature-layer-d33ea114.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-d33ea114.js");
/* harmony import */ var _feature_layer_d0f64b81_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./feature-layer-d0f64b81.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-d0f64b81.js");
/* harmony import */ var _index_81d548b7_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./index-81d548b7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-81d548b7.js");
/* harmony import */ var _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./config-eb5f7dc2.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/config-eb5f7dc2.js");
/* harmony import */ var _functional_c82f5ab9_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./functional-c82f5ab9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-c82f5ab9.js");
/* harmony import */ var _guid_4f4176ba_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./guid-4f4176ba.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/guid-4f4176ba.js");
/* harmony import */ var _privileges_ccd5f37d_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./privileges-ccd5f37d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/privileges-ccd5f37d.js");
/* harmony import */ var _thumbnail_0b7adfcd_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./thumbnail-0b7adfcd.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/thumbnail-0b7adfcd.js");
/* harmony import */ var _portal_79caaeff_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./portal-79caaeff.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/portal-79caaeff.js");
/* harmony import */ var _loadModules_aaf30bd6_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./loadModules-aaf30bd6.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/loadModules-aaf30bd6.js");
/* harmony import */ var _query_4f7b7e4d_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./query-4f7b7e4d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/query-4f7b7e4d.js");
/* harmony import */ var _user_e3dedc4a_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./user-e3dedc4a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/user-e3dedc4a.js");
/* harmony import */ var _api_f7934cd7_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./api-f7934cd7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/api-f7934cd7.js");
/* harmony import */ var _server_item_f12153e6_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./server-item-f12153e6.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/server-item-f12153e6.js");
/* harmony import */ var _item_properties_e6412a9a_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./item-properties-e6412a9a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-properties-e6412a9a.js");
/* harmony import */ var _functional_9f648bee_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./functional-9f648bee.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-9f648bee.js");
/* harmony import */ var _item_types_b4fe86ad_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./item-types-b4fe86ad.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-types-b4fe86ad.js");
/* harmony import */ var _item_d9d70416_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./item-d9d70416.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-d9d70416.js");
/* harmony import */ var _dom_13f5b00c_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./dom-13f5b00c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/dom-13f5b00c.js");
/* harmony import */ var _feature_layer_69305a85_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./feature-layer-69305a85.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-69305a85.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */
























const ArcgisNewItemPagesFeatureLayerPreference = class {
  constructor(hostRef) {
    (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.newItemUpdatePage = (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "newItemUpdatePage", 7);
    this.featureLayerInfos = [];
    this.showCaptureGPS = true;
    this.layerPreference = {
      captureGPS: false,
      enableZDefaults: false,
      enableMDefaults: false
    };
  }
  handleNext() {
    const { featureLayerInfos, layerPreference } = this;
    const newLayerInfos = (0,_feature_layer_d33ea114_js__WEBPACK_IMPORTED_MODULE_3__.m)(featureLayerInfos, layerPreference);
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_1__.a.serviceInfo = Object.assign(Object.assign({}, _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_1__.a.serviceInfo), { enableZDefaults: layerPreference.enableZDefaults, enableMDefaults: layerPreference.enableMDefaults, layers: newLayerInfos.filter((info) => info.type === "Feature Layer"), tables: newLayerInfos.filter((info) => info.type === "Table") });
    this.newItemUpdatePage.emit("itemProperties");
  }
  async componentWillLoad() {
    var _a, _b;
    const { i18n } = _ui_ecf86bba_js__WEBPACK_IMPORTED_MODULE_2__.u;
    this.i18n = i18n.featureLayerFromScratch;
    const { serviceInfo } = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_1__.a;
    const featureServiceInfo = serviceInfo;
    this.featureLayerInfos = [...featureServiceInfo.layers, ...featureServiceInfo.tables].sort((infoA, infoB) => infoA.id - infoB.id);
    this.layerPreference = {
      captureGPS: this.featureLayerInfos.some(_feature_layer_d33ea114_js__WEBPACK_IMPORTED_MODULE_3__.l),
      enableZDefaults: (_a = featureServiceInfo.enableZDefaults) !== null && _a !== void 0 ? _a : this.featureLayerInfos.some(_feature_layer_d33ea114_js__WEBPACK_IMPORTED_MODULE_3__.d),
      enableMDefaults: (_b = featureServiceInfo.enableMDefaults) !== null && _b !== void 0 ? _b : this.featureLayerInfos.some(_feature_layer_d33ea114_js__WEBPACK_IMPORTED_MODULE_3__.e)
    };
    this.showCaptureGPS = this.featureLayerInfos.some((info) => info.type === "Feature Layer" &&
      ["esriGeometryPoint", "esriGeometryPolygon", "esriGeometryPolyline"].includes(info.geometryType));
  }
  render() {
    const { i18n, layerPreference, showCaptureGPS } = this;
    return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.H, null, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-layer-preference", { i18n: i18n, defaultPreference: layerPreference, showCaptureGPS: showCaptureGPS, onLayerPreferenceChange: (event) => {
        const { layerPreference } = this;
        const detail = event.detail;
        if (!layerPreference.captureGPS && detail.captureGPS) {
          (0,_feature_layer_d0f64b81_js__WEBPACK_IMPORTED_MODULE_4__.e)("captureGPS");
        }
        if (!layerPreference.enableZDefaults && detail.enableZDefaults) {
          (0,_feature_layer_d0f64b81_js__WEBPACK_IMPORTED_MODULE_4__.e)("enableZDefaults");
        }
        if (!layerPreference.enableMDefaults && detail.enableMDefaults) {
          (0,_feature_layer_d0f64b81_js__WEBPACK_IMPORTED_MODULE_4__.e)("enableMDefaults");
        }
        this.layerPreference = detail;
      } })));
  }
};




/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-d0f64b81.js":
/*!*******************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-d0f64b81.js ***!
  \*******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ featureServiceEndTelemetry),
/* harmony export */   b: () => (/* binding */ filterChangeTelemetry),
/* harmony export */   c: () => (/* binding */ featureLayerTypeTelemetry),
/* harmony export */   e: () => (/* binding */ enableLayerPreferenceTelemetry),
/* harmony export */   f: () => (/* binding */ featureLayerErrorTelemetry),
/* harmony export */   i: () => (/* binding */ itemExpandedTelemetry)
/* harmony export */ });
/* harmony import */ var _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config-eb5f7dc2.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/config-eb5f7dc2.js");
/* harmony import */ var _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./add-item-97d577a9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/add-item-97d577a9.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */



const TELEMETRY_ID = "create feature layer";
const TELEMETRY_PAGE_NAME = "my content";
const addFeatureLayerTypeToTelemetry = (type) => {
  switch (type) {
    case "build":
      return "blank";
    case "existing":
      return "fs";
    case "template":
      return "template";
    case "link":
      return "url";
  }
};
const enableLayerPreferenceTelemetry = (type) => {
  const telemetry = _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_0__.c.telemetry;
  telemetry === null || telemetry === void 0 ? void 0 : telemetry.stepWorkflow(TELEMETRY_ID, `enable ${type === "captureGPS" ? "gps" : type === "enableZDefaults" ? "z" : "m"}`, {
    category: TELEMETRY_ID,
    attribute: addFeatureLayerTypeToTelemetry(_add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_1__.a.addFeatureLayerType),
    pageName: TELEMETRY_PAGE_NAME
  });
};
const itemExpandedTelemetry = (type) => {
  const telemetry = _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_0__.c.telemetry;
  telemetry === null || telemetry === void 0 ? void 0 : telemetry.stepWorkflow(TELEMETRY_ID, `expand ${type} details`, {
    category: TELEMETRY_ID,
    attribute: addFeatureLayerTypeToTelemetry(_add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_1__.a.addFeatureLayerType),
    pageName: TELEMETRY_PAGE_NAME
  });
};
const filterChangeTelemetry = () => {
  const telemetry = _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_0__.c.telemetry;
  telemetry === null || telemetry === void 0 ? void 0 : telemetry.stepWorkflow(TELEMETRY_ID, "filter", {
    category: TELEMETRY_ID,
    attribute: addFeatureLayerTypeToTelemetry(_add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_1__.a.addFeatureLayerType),
    pageName: TELEMETRY_PAGE_NAME
  });
};
const featureLayerTypeTelemetry = (type) => {
  const telemetryType = addFeatureLayerTypeToTelemetry(type);
  const telemetry = _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_0__.c.telemetry;
  telemetry === null || telemetry === void 0 ? void 0 : telemetry.stepWorkflow(TELEMETRY_ID, "from option", {
    category: TELEMETRY_ID,
    attribute: telemetryType,
    pageName: TELEMETRY_PAGE_NAME
  });
};
const featureServiceEndTelemetry = () => {
  const { addFeatureLayerType, serviceInfo } = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_1__.a;
  const featureLayerServiceInfo = serviceInfo;
  const telemetry = _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_0__.c.telemetry;
  telemetry === null || telemetry === void 0 ? void 0 : telemetry.endWorkflow(TELEMETRY_ID, {
    category: TELEMETRY_ID,
    attribute: addFeatureLayerTypeToTelemetry(addFeatureLayerType),
    pageName: TELEMETRY_PAGE_NAME,
    count: featureLayerServiceInfo.layers.length,
    number: featureLayerServiceInfo.tables.length
  });
};
const featureLayerErrorTelemetry = (errString) => {
  var _a;
  (_a = _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_0__.c.telemetry) === null || _a === void 0 ? void 0 : _a.logError({
    category: TELEMETRY_ID,
    error: errString
  });
};




/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXBwLWNvbXBvbmVudHNfZGlzdF9lc21fYXJjZ2lzLW5ldy1pdGUtOWJiMTdkLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQzRGO0FBQ2pDO0FBQ047QUFDcUY7QUFDeEQ7QUFDckQ7QUFDQztBQUNJO0FBQ047QUFDTTtBQUNEO0FBQ0g7QUFDSztBQUNOO0FBQ0Q7QUFDRDtBQUNRO0FBQ0k7QUFDTDtBQUNBO0FBQ047QUFDRDtBQUNVOztBQUVyQztBQUNBO0FBQ0EsSUFBSSxxREFBZ0I7QUFDcEIsNkJBQTZCLHFEQUFXO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVkscUNBQXFDO0FBQ2pELDBCQUEwQiw2REFBb0I7QUFDOUMsSUFBSSxvREFBWSw2Q0FBNkMsRUFBRSxvREFBWSxpQkFBaUIsME9BQTBPO0FBQ3RVO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxPQUFPLEVBQUUsOENBQVk7QUFDakM7QUFDQSxZQUFZLGNBQWMsRUFBRSxvREFBWTtBQUN4QztBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMseURBQWU7QUFDN0QsOEhBQThILHlEQUFlO0FBQzdJLDhIQUE4SCx5REFBZTtBQUM3STtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSx3Q0FBd0M7QUFDcEQsWUFBWSxxREFBQyxDQUFDLGlEQUFJLFFBQVEscURBQUMsdUNBQXVDO0FBQ2xFLGdCQUFnQixrQkFBa0I7QUFDbEM7QUFDQTtBQUNBLFVBQVUsNkRBQThCO0FBQ3hDO0FBQ0E7QUFDQSxVQUFVLDZEQUE4QjtBQUN4QztBQUNBO0FBQ0EsVUFBVSw2REFBOEI7QUFDeEM7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVzRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2hGdEc7QUFDQTtBQUNBO0FBQ0E7QUFDd0Q7QUFDRzs7QUFFM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGtEQUFXO0FBQy9CLHVHQUF1Ryx1RUFBdUU7QUFDOUs7QUFDQSw4Q0FBOEMsb0RBQVk7QUFDMUQ7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLG9CQUFvQixrREFBVztBQUMvQix1R0FBdUcsTUFBTTtBQUM3RztBQUNBLDhDQUE4QyxvREFBWTtBQUMxRDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0Esb0JBQW9CLGtEQUFXO0FBQy9CO0FBQ0E7QUFDQSw4Q0FBOEMsb0RBQVk7QUFDMUQ7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGtEQUFXO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxVQUFVLG1DQUFtQyxFQUFFLG9EQUFZO0FBQzNEO0FBQ0Esb0JBQW9CLGtEQUFXO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGtEQUFXO0FBQ25CO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRXlNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYW5hbHlzaXMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYXBwLWNvbXBvbmVudHMvZGlzdC9lc20vYXJjZ2lzLW5ldy1pdGVtLXBhZ2VzLWZlYXR1cmUtbGF5ZXItcHJlZmVyZW5jZS5lbnRyeS5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcHAtY29tcG9uZW50cy9kaXN0L2VzbS9mZWF0dXJlLWxheWVyLWQwZjY0YjgxLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIHYzLjAuOTlcbiAqL1xuaW1wb3J0IHsgciBhcyByZWdpc3Rlckluc3RhbmNlLCBjIGFzIGNyZWF0ZUV2ZW50LCBoLCBIIGFzIEhvc3QgfSBmcm9tICcuL2luZGV4LTkyZWJiMzk2LmpzJztcbmltcG9ydCB7IGEgYXMgYWRkSXRlbVN0YXRlIH0gZnJvbSAnLi9hZGQtaXRlbS05N2Q1NzdhOS5qcyc7XG5pbXBvcnQgeyB1IGFzIHVpU3RvcmVTdGF0ZSB9IGZyb20gJy4vdWktZWNmODZiYmEuanMnO1xuaW1wb3J0IHsgbSBhcyBtZXJnZUxheWVyUHJlZmVyZW5jZSwgbCBhcyBsYXllckNhcHR1cmVHUFMsIGQgYXMgbGF5ZXJVc2VaVmFsdWVzLCBlIGFzIGxheWVyVXNlTVZhbHVlcyB9IGZyb20gJy4vZmVhdHVyZS1sYXllci1kMzNlYTExNC5qcyc7XG5pbXBvcnQgeyBlIGFzIGVuYWJsZUxheWVyUHJlZmVyZW5jZVRlbGVtZXRyeSB9IGZyb20gJy4vZmVhdHVyZS1sYXllci1kMGY2NGI4MS5qcyc7XG5pbXBvcnQgJy4vaW5kZXgtODFkNTQ4YjcuanMnO1xuaW1wb3J0ICcuL2NvbmZpZy1lYjVmN2RjMi5qcyc7XG5pbXBvcnQgJy4vZnVuY3Rpb25hbC1jODJmNWFiOS5qcyc7XG5pbXBvcnQgJy4vZ3VpZC00ZjQxNzZiYS5qcyc7XG5pbXBvcnQgJy4vcHJpdmlsZWdlcy1jY2Q1ZjM3ZC5qcyc7XG5pbXBvcnQgJy4vdGh1bWJuYWlsLTBiN2FkZmNkLmpzJztcbmltcG9ydCAnLi9wb3J0YWwtNzljYWFlZmYuanMnO1xuaW1wb3J0ICcuL2xvYWRNb2R1bGVzLWFhZjMwYmQ2LmpzJztcbmltcG9ydCAnLi9xdWVyeS00ZjdiN2U0ZC5qcyc7XG5pbXBvcnQgJy4vdXNlci1lM2RlZGM0YS5qcyc7XG5pbXBvcnQgJy4vYXBpLWY3OTM0Y2Q3LmpzJztcbmltcG9ydCAnLi9zZXJ2ZXItaXRlbS1mMTIxNTNlNi5qcyc7XG5pbXBvcnQgJy4vaXRlbS1wcm9wZXJ0aWVzLWU2NDEyYTlhLmpzJztcbmltcG9ydCAnLi9mdW5jdGlvbmFsLTlmNjQ4YmVlLmpzJztcbmltcG9ydCAnLi9pdGVtLXR5cGVzLWI0ZmU4NmFkLmpzJztcbmltcG9ydCAnLi9pdGVtLWQ5ZDcwNDE2LmpzJztcbmltcG9ydCAnLi9kb20tMTNmNWIwMGMuanMnO1xuaW1wb3J0ICcuL2ZlYXR1cmUtbGF5ZXItNjkzMDVhODUuanMnO1xuXG5jb25zdCBBcmNnaXNOZXdJdGVtUGFnZXNGZWF0dXJlTGF5ZXJQcmVmZXJlbmNlID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XG4gICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICB0aGlzLm5ld0l0ZW1VcGRhdGVQYWdlID0gY3JlYXRlRXZlbnQodGhpcywgXCJuZXdJdGVtVXBkYXRlUGFnZVwiLCA3KTtcbiAgICB0aGlzLmZlYXR1cmVMYXllckluZm9zID0gW107XG4gICAgdGhpcy5zaG93Q2FwdHVyZUdQUyA9IHRydWU7XG4gICAgdGhpcy5sYXllclByZWZlcmVuY2UgPSB7XG4gICAgICBjYXB0dXJlR1BTOiBmYWxzZSxcbiAgICAgIGVuYWJsZVpEZWZhdWx0czogZmFsc2UsXG4gICAgICBlbmFibGVNRGVmYXVsdHM6IGZhbHNlXG4gICAgfTtcbiAgfVxuICBoYW5kbGVOZXh0KCkge1xuICAgIGNvbnN0IHsgZmVhdHVyZUxheWVySW5mb3MsIGxheWVyUHJlZmVyZW5jZSB9ID0gdGhpcztcbiAgICBjb25zdCBuZXdMYXllckluZm9zID0gbWVyZ2VMYXllclByZWZlcmVuY2UoZmVhdHVyZUxheWVySW5mb3MsIGxheWVyUHJlZmVyZW5jZSk7XG4gICAgYWRkSXRlbVN0YXRlLnNlcnZpY2VJbmZvID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBhZGRJdGVtU3RhdGUuc2VydmljZUluZm8pLCB7IGVuYWJsZVpEZWZhdWx0czogbGF5ZXJQcmVmZXJlbmNlLmVuYWJsZVpEZWZhdWx0cywgZW5hYmxlTURlZmF1bHRzOiBsYXllclByZWZlcmVuY2UuZW5hYmxlTURlZmF1bHRzLCBsYXllcnM6IG5ld0xheWVySW5mb3MuZmlsdGVyKChpbmZvKSA9PiBpbmZvLnR5cGUgPT09IFwiRmVhdHVyZSBMYXllclwiKSwgdGFibGVzOiBuZXdMYXllckluZm9zLmZpbHRlcigoaW5mbykgPT4gaW5mby50eXBlID09PSBcIlRhYmxlXCIpIH0pO1xuICAgIHRoaXMubmV3SXRlbVVwZGF0ZVBhZ2UuZW1pdChcIml0ZW1Qcm9wZXJ0aWVzXCIpO1xuICB9XG4gIGFzeW5jIGNvbXBvbmVudFdpbGxMb2FkKCkge1xuICAgIHZhciBfYSwgX2I7XG4gICAgY29uc3QgeyBpMThuIH0gPSB1aVN0b3JlU3RhdGU7XG4gICAgdGhpcy5pMThuID0gaTE4bi5mZWF0dXJlTGF5ZXJGcm9tU2NyYXRjaDtcbiAgICBjb25zdCB7IHNlcnZpY2VJbmZvIH0gPSBhZGRJdGVtU3RhdGU7XG4gICAgY29uc3QgZmVhdHVyZVNlcnZpY2VJbmZvID0gc2VydmljZUluZm87XG4gICAgdGhpcy5mZWF0dXJlTGF5ZXJJbmZvcyA9IFsuLi5mZWF0dXJlU2VydmljZUluZm8ubGF5ZXJzLCAuLi5mZWF0dXJlU2VydmljZUluZm8udGFibGVzXS5zb3J0KChpbmZvQSwgaW5mb0IpID0+IGluZm9BLmlkIC0gaW5mb0IuaWQpO1xuICAgIHRoaXMubGF5ZXJQcmVmZXJlbmNlID0ge1xuICAgICAgY2FwdHVyZUdQUzogdGhpcy5mZWF0dXJlTGF5ZXJJbmZvcy5zb21lKGxheWVyQ2FwdHVyZUdQUyksXG4gICAgICBlbmFibGVaRGVmYXVsdHM6IChfYSA9IGZlYXR1cmVTZXJ2aWNlSW5mby5lbmFibGVaRGVmYXVsdHMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHRoaXMuZmVhdHVyZUxheWVySW5mb3Muc29tZShsYXllclVzZVpWYWx1ZXMpLFxuICAgICAgZW5hYmxlTURlZmF1bHRzOiAoX2IgPSBmZWF0dXJlU2VydmljZUluZm8uZW5hYmxlTURlZmF1bHRzKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiB0aGlzLmZlYXR1cmVMYXllckluZm9zLnNvbWUobGF5ZXJVc2VNVmFsdWVzKVxuICAgIH07XG4gICAgdGhpcy5zaG93Q2FwdHVyZUdQUyA9IHRoaXMuZmVhdHVyZUxheWVySW5mb3Muc29tZSgoaW5mbykgPT4gaW5mby50eXBlID09PSBcIkZlYXR1cmUgTGF5ZXJcIiAmJlxuICAgICAgW1wiZXNyaUdlb21ldHJ5UG9pbnRcIiwgXCJlc3JpR2VvbWV0cnlQb2x5Z29uXCIsIFwiZXNyaUdlb21ldHJ5UG9seWxpbmVcIl0uaW5jbHVkZXMoaW5mby5nZW9tZXRyeVR5cGUpKTtcbiAgfVxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBpMThuLCBsYXllclByZWZlcmVuY2UsIHNob3dDYXB0dXJlR1BTIH0gPSB0aGlzO1xuICAgIHJldHVybiAoaChIb3N0LCBudWxsLCBoKFwiYXJjZ2lzLW5ldy1pdGVtLWxheWVyLXByZWZlcmVuY2VcIiwgeyBpMThuOiBpMThuLCBkZWZhdWx0UHJlZmVyZW5jZTogbGF5ZXJQcmVmZXJlbmNlLCBzaG93Q2FwdHVyZUdQUzogc2hvd0NhcHR1cmVHUFMsIG9uTGF5ZXJQcmVmZXJlbmNlQ2hhbmdlOiAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgeyBsYXllclByZWZlcmVuY2UgfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IGRldGFpbCA9IGV2ZW50LmRldGFpbDtcbiAgICAgICAgaWYgKCFsYXllclByZWZlcmVuY2UuY2FwdHVyZUdQUyAmJiBkZXRhaWwuY2FwdHVyZUdQUykge1xuICAgICAgICAgIGVuYWJsZUxheWVyUHJlZmVyZW5jZVRlbGVtZXRyeShcImNhcHR1cmVHUFNcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFsYXllclByZWZlcmVuY2UuZW5hYmxlWkRlZmF1bHRzICYmIGRldGFpbC5lbmFibGVaRGVmYXVsdHMpIHtcbiAgICAgICAgICBlbmFibGVMYXllclByZWZlcmVuY2VUZWxlbWV0cnkoXCJlbmFibGVaRGVmYXVsdHNcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFsYXllclByZWZlcmVuY2UuZW5hYmxlTURlZmF1bHRzICYmIGRldGFpbC5lbmFibGVNRGVmYXVsdHMpIHtcbiAgICAgICAgICBlbmFibGVMYXllclByZWZlcmVuY2VUZWxlbWV0cnkoXCJlbmFibGVNRGVmYXVsdHNcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sYXllclByZWZlcmVuY2UgPSBkZXRhaWw7XG4gICAgICB9IH0pKSk7XG4gIH1cbn07XG5cbmV4cG9ydCB7IEFyY2dpc05ld0l0ZW1QYWdlc0ZlYXR1cmVMYXllclByZWZlcmVuY2UgYXMgYXJjZ2lzX25ld19pdGVtX3BhZ2VzX2ZlYXR1cmVfbGF5ZXJfcHJlZmVyZW5jZSB9O1xuIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogdjMuMC45OVxuICovXG5pbXBvcnQgeyBjIGFzIGNvbmZpZ1N0YXRlIH0gZnJvbSAnLi9jb25maWctZWI1ZjdkYzIuanMnO1xuaW1wb3J0IHsgYSBhcyBhZGRJdGVtU3RhdGUgfSBmcm9tICcuL2FkZC1pdGVtLTk3ZDU3N2E5LmpzJztcblxuY29uc3QgVEVMRU1FVFJZX0lEID0gXCJjcmVhdGUgZmVhdHVyZSBsYXllclwiO1xuY29uc3QgVEVMRU1FVFJZX1BBR0VfTkFNRSA9IFwibXkgY29udGVudFwiO1xuY29uc3QgYWRkRmVhdHVyZUxheWVyVHlwZVRvVGVsZW1ldHJ5ID0gKHR5cGUpID0+IHtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSBcImJ1aWxkXCI6XG4gICAgICByZXR1cm4gXCJibGFua1wiO1xuICAgIGNhc2UgXCJleGlzdGluZ1wiOlxuICAgICAgcmV0dXJuIFwiZnNcIjtcbiAgICBjYXNlIFwidGVtcGxhdGVcIjpcbiAgICAgIHJldHVybiBcInRlbXBsYXRlXCI7XG4gICAgY2FzZSBcImxpbmtcIjpcbiAgICAgIHJldHVybiBcInVybFwiO1xuICB9XG59O1xuY29uc3QgZW5hYmxlTGF5ZXJQcmVmZXJlbmNlVGVsZW1ldHJ5ID0gKHR5cGUpID0+IHtcbiAgY29uc3QgdGVsZW1ldHJ5ID0gY29uZmlnU3RhdGUudGVsZW1ldHJ5O1xuICB0ZWxlbWV0cnkgPT09IG51bGwgfHwgdGVsZW1ldHJ5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0ZWxlbWV0cnkuc3RlcFdvcmtmbG93KFRFTEVNRVRSWV9JRCwgYGVuYWJsZSAke3R5cGUgPT09IFwiY2FwdHVyZUdQU1wiID8gXCJncHNcIiA6IHR5cGUgPT09IFwiZW5hYmxlWkRlZmF1bHRzXCIgPyBcInpcIiA6IFwibVwifWAsIHtcbiAgICBjYXRlZ29yeTogVEVMRU1FVFJZX0lELFxuICAgIGF0dHJpYnV0ZTogYWRkRmVhdHVyZUxheWVyVHlwZVRvVGVsZW1ldHJ5KGFkZEl0ZW1TdGF0ZS5hZGRGZWF0dXJlTGF5ZXJUeXBlKSxcbiAgICBwYWdlTmFtZTogVEVMRU1FVFJZX1BBR0VfTkFNRVxuICB9KTtcbn07XG5jb25zdCBpdGVtRXhwYW5kZWRUZWxlbWV0cnkgPSAodHlwZSkgPT4ge1xuICBjb25zdCB0ZWxlbWV0cnkgPSBjb25maWdTdGF0ZS50ZWxlbWV0cnk7XG4gIHRlbGVtZXRyeSA9PT0gbnVsbCB8fCB0ZWxlbWV0cnkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHRlbGVtZXRyeS5zdGVwV29ya2Zsb3coVEVMRU1FVFJZX0lELCBgZXhwYW5kICR7dHlwZX0gZGV0YWlsc2AsIHtcbiAgICBjYXRlZ29yeTogVEVMRU1FVFJZX0lELFxuICAgIGF0dHJpYnV0ZTogYWRkRmVhdHVyZUxheWVyVHlwZVRvVGVsZW1ldHJ5KGFkZEl0ZW1TdGF0ZS5hZGRGZWF0dXJlTGF5ZXJUeXBlKSxcbiAgICBwYWdlTmFtZTogVEVMRU1FVFJZX1BBR0VfTkFNRVxuICB9KTtcbn07XG5jb25zdCBmaWx0ZXJDaGFuZ2VUZWxlbWV0cnkgPSAoKSA9PiB7XG4gIGNvbnN0IHRlbGVtZXRyeSA9IGNvbmZpZ1N0YXRlLnRlbGVtZXRyeTtcbiAgdGVsZW1ldHJ5ID09PSBudWxsIHx8IHRlbGVtZXRyeSA9PT0gdm9pZCAwID8gdm9pZCAwIDogdGVsZW1ldHJ5LnN0ZXBXb3JrZmxvdyhURUxFTUVUUllfSUQsIFwiZmlsdGVyXCIsIHtcbiAgICBjYXRlZ29yeTogVEVMRU1FVFJZX0lELFxuICAgIGF0dHJpYnV0ZTogYWRkRmVhdHVyZUxheWVyVHlwZVRvVGVsZW1ldHJ5KGFkZEl0ZW1TdGF0ZS5hZGRGZWF0dXJlTGF5ZXJUeXBlKSxcbiAgICBwYWdlTmFtZTogVEVMRU1FVFJZX1BBR0VfTkFNRVxuICB9KTtcbn07XG5jb25zdCBmZWF0dXJlTGF5ZXJUeXBlVGVsZW1ldHJ5ID0gKHR5cGUpID0+IHtcbiAgY29uc3QgdGVsZW1ldHJ5VHlwZSA9IGFkZEZlYXR1cmVMYXllclR5cGVUb1RlbGVtZXRyeSh0eXBlKTtcbiAgY29uc3QgdGVsZW1ldHJ5ID0gY29uZmlnU3RhdGUudGVsZW1ldHJ5O1xuICB0ZWxlbWV0cnkgPT09IG51bGwgfHwgdGVsZW1ldHJ5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0ZWxlbWV0cnkuc3RlcFdvcmtmbG93KFRFTEVNRVRSWV9JRCwgXCJmcm9tIG9wdGlvblwiLCB7XG4gICAgY2F0ZWdvcnk6IFRFTEVNRVRSWV9JRCxcbiAgICBhdHRyaWJ1dGU6IHRlbGVtZXRyeVR5cGUsXG4gICAgcGFnZU5hbWU6IFRFTEVNRVRSWV9QQUdFX05BTUVcbiAgfSk7XG59O1xuY29uc3QgZmVhdHVyZVNlcnZpY2VFbmRUZWxlbWV0cnkgPSAoKSA9PiB7XG4gIGNvbnN0IHsgYWRkRmVhdHVyZUxheWVyVHlwZSwgc2VydmljZUluZm8gfSA9IGFkZEl0ZW1TdGF0ZTtcbiAgY29uc3QgZmVhdHVyZUxheWVyU2VydmljZUluZm8gPSBzZXJ2aWNlSW5mbztcbiAgY29uc3QgdGVsZW1ldHJ5ID0gY29uZmlnU3RhdGUudGVsZW1ldHJ5O1xuICB0ZWxlbWV0cnkgPT09IG51bGwgfHwgdGVsZW1ldHJ5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0ZWxlbWV0cnkuZW5kV29ya2Zsb3coVEVMRU1FVFJZX0lELCB7XG4gICAgY2F0ZWdvcnk6IFRFTEVNRVRSWV9JRCxcbiAgICBhdHRyaWJ1dGU6IGFkZEZlYXR1cmVMYXllclR5cGVUb1RlbGVtZXRyeShhZGRGZWF0dXJlTGF5ZXJUeXBlKSxcbiAgICBwYWdlTmFtZTogVEVMRU1FVFJZX1BBR0VfTkFNRSxcbiAgICBjb3VudDogZmVhdHVyZUxheWVyU2VydmljZUluZm8ubGF5ZXJzLmxlbmd0aCxcbiAgICBudW1iZXI6IGZlYXR1cmVMYXllclNlcnZpY2VJbmZvLnRhYmxlcy5sZW5ndGhcbiAgfSk7XG59O1xuY29uc3QgZmVhdHVyZUxheWVyRXJyb3JUZWxlbWV0cnkgPSAoZXJyU3RyaW5nKSA9PiB7XG4gIHZhciBfYTtcbiAgKF9hID0gY29uZmlnU3RhdGUudGVsZW1ldHJ5KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubG9nRXJyb3Ioe1xuICAgIGNhdGVnb3J5OiBURUxFTUVUUllfSUQsXG4gICAgZXJyb3I6IGVyclN0cmluZ1xuICB9KTtcbn07XG5cbmV4cG9ydCB7IGZlYXR1cmVTZXJ2aWNlRW5kVGVsZW1ldHJ5IGFzIGEsIGZpbHRlckNoYW5nZVRlbGVtZXRyeSBhcyBiLCBmZWF0dXJlTGF5ZXJUeXBlVGVsZW1ldHJ5IGFzIGMsIGVuYWJsZUxheWVyUHJlZmVyZW5jZVRlbGVtZXRyeSBhcyBlLCBmZWF0dXJlTGF5ZXJFcnJvclRlbGVtZXRyeSBhcyBmLCBpdGVtRXhwYW5kZWRUZWxlbWV0cnkgYXMgaSB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9