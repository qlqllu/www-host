"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-new-ite-6df218"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-data-store-select-bdfs-cloud.entry.js":
/*!*****************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-data-store-select-bdfs-cloud.entry.js ***!
  \*****************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   arcgis_new_item_pages_data_store_select_bdfs_cloud: () => (/* binding */ ArcgisNewItemPagesDataStoreSelectBdfsCloud)
/* harmony export */ });
/* harmony import */ var _index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-92ebb396.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-92ebb396.js");
/* harmony import */ var _ui_ecf86bba_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ui-ecf86bba.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ui-ecf86bba.js");
/* harmony import */ var _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./add-item-97d577a9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/add-item-97d577a9.js");
/* harmony import */ var _data_store_f509564d_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./data-store-f509564d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/data-store-f509564d.js");
/* harmony import */ var _index_81d548b7_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./index-81d548b7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-81d548b7.js");
/* harmony import */ var _portal_79caaeff_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./portal-79caaeff.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/portal-79caaeff.js");
/* harmony import */ var _loadModules_aaf30bd6_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./loadModules-aaf30bd6.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/loadModules-aaf30bd6.js");
/* harmony import */ var _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./config-eb5f7dc2.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/config-eb5f7dc2.js");
/* harmony import */ var _privileges_ccd5f37d_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./privileges-ccd5f37d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/privileges-ccd5f37d.js");
/* harmony import */ var _functional_c82f5ab9_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./functional-c82f5ab9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-c82f5ab9.js");
/* harmony import */ var _item_d9d70416_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./item-d9d70416.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-d9d70416.js");
/* harmony import */ var _data_store_e8b5ce2f_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./data-store-e8b5ce2f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/data-store-e8b5ce2f.js");
/* harmony import */ var _feature_layer_38cdae87_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./feature-layer-38cdae87.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-38cdae87.js");
/* harmony import */ var _item_properties_e6412a9a_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./item-properties-e6412a9a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-properties-e6412a9a.js");
/* harmony import */ var _feature_layer_d33ea114_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./feature-layer-d33ea114.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-d33ea114.js");
/* harmony import */ var _guid_4f4176ba_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./guid-4f4176ba.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/guid-4f4176ba.js");
/* harmony import */ var _thumbnail_0b7adfcd_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./thumbnail-0b7adfcd.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/thumbnail-0b7adfcd.js");
/* harmony import */ var _query_4f7b7e4d_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./query-4f7b7e4d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/query-4f7b7e4d.js");
/* harmony import */ var _user_e3dedc4a_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./user-e3dedc4a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/user-e3dedc4a.js");
/* harmony import */ var _api_f7934cd7_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./api-f7934cd7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/api-f7934cd7.js");
/* harmony import */ var _server_item_f12153e6_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./server-item-f12153e6.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/server-item-f12153e6.js");
/* harmony import */ var _functional_9f648bee_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./functional-9f648bee.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-9f648bee.js");
/* harmony import */ var _item_types_b4fe86ad_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./item-types-b4fe86ad.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-types-b4fe86ad.js");
/* harmony import */ var _dom_13f5b00c_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./dom-13f5b00c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/dom-13f5b00c.js");
/* harmony import */ var _feature_layer_69305a85_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./feature-layer-69305a85.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-69305a85.js");
/* harmony import */ var _ags_68d4ae20_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./ags-68d4ae20.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ags-68d4ae20.js");
/* harmony import */ var _url_f3b82cc7_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./url-f3b82cc7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/url-f3b82cc7.js");
/* harmony import */ var _storage_d7f5822e_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./storage-d7f5822e.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/storage-d7f5822e.js");
/* harmony import */ var _file_f36193e9_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./file-f36193e9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/file-f36193e9.js");
/* harmony import */ var _store_3210b604_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./store-3210b604.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/store-3210b604.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */































const arcgisNewItemPagesDataStoreSelectBdfsCloudCss = ".input-label{margin-top:1.25rem}.tile-select-group{margin-top:1.25rem}.tile-select{margin-bottom:0.125rem}";

const ArcgisNewItemPagesDataStoreSelectBdfsCloud = class {
  constructor(hostRef) {
    (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.newItemUpdatePage = (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "newItemUpdatePage", 7);
    this.cloudTypes = ["new", "existing"];
    this.cloudProviders = [
      "amazon",
      "azure",
      "azuredatalakegen2store"
    ];
    this.handleSelectCloudStore = async (e) => {
      const datastoreName = e.target.value;
      // if a data store is unselected
      if (!datastoreName) {
        this.selectedExistingCloudStore = null;
        return;
      }
      const cloudStoreList = this.existingCloudStoreList;
      let selectedCloudStore = cloudStoreList.find((existingCloudStoreItem) => {
        return existingCloudStoreItem.title === datastoreName;
      });
      const selectedCloudStoreId = selectedCloudStore === null || selectedCloudStore === void 0 ? void 0 : selectedCloudStore.id;
      const result = await (0,_data_store_f509564d_js__WEBPACK_IMPORTED_MODULE_3__.r)(selectedCloudStoreId);
      this.selectedExistingCloudStore = {
        id: result.id,
        path: result.path,
        provider: result.provider
      };
    };
    this.selectedCloudProvider = null;
    this.selectedCloudType = "new";
    this.selectedExistingCloudStore = null;
    this.existingCloudStoreList = undefined;
    this.error = null;
  }
  async componentWillLoad() {
    this.existingCloudStoreList = (await (0,_data_store_f509564d_js__WEBPACK_IMPORTED_MODULE_3__.b)()).result;
    this.i18n = _ui_ecf86bba_js__WEBPACK_IMPORTED_MODULE_1__.u.i18n.dataStoreSelectBdfs;
    this.selectedCloudType = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.bdfsCloudType || null;
    if (_add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.bdfsCloudType === "new") {
      this.selectedCloudProvider = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.bdfsCloudProvider;
    }
    else if (_add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.bdfsCloudType === "existing") {
      this.selectedExistingCloudStore = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.bdfsExistingDatastore;
    }
  }
  handleNext() {
    const { selectedCloudProvider, selectedCloudType, selectedExistingCloudStore } = this;
    if (selectedCloudType === "existing" && !selectedExistingCloudStore) {
      this.error = "noDataStoreSelected";
      return;
    }
    if (selectedCloudType === "new" && !selectedCloudProvider) {
      this.error = "noCloudSelected";
      return;
    }
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.bdfsCloudType = selectedCloudType;
    if (selectedCloudType === "new") {
      _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.bdfsCloudProvider = selectedCloudProvider;
      this.newItemUpdatePage.emit("dataStoreSelectCloudCredentials");
    }
    else if (selectedCloudType === "existing") {
      _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_2__.a.bdfsExistingDatastore = selectedExistingCloudStore;
      this.newItemUpdatePage.emit("dataStoreSelectServerList");
    }
  }
  createCloudStoreListForDisplay() {
    const { existingCloudStoreList, selectedExistingCloudStore } = this;
    return existingCloudStoreList.map((item) => {
      return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-combobox-item", { key: item.id, id: item.id, textLabel: item.title, value: item.title, selected: item.id === (selectedExistingCloudStore === null || selectedExistingCloudStore === void 0 ? void 0 : selectedExistingCloudStore.id) }, item.title));
    });
  }
  render() {
    const { i18n, cloudTypes, cloudProviders, selectedCloudProvider, selectedCloudType, error } = this;
    return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", null, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "input-label" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", null, i18n.cloudSelectType, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-tile-select-group", { layout: "vertical", class: "tile-select-group" }, cloudTypes.map((key) => {
      return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-tile-select", { key: key, class: "tile-select", checked: selectedCloudType === key, heading: i18n.cloudTypes[key], name: "cloud-type-selection", "input-enabled": true, width: "full", type: "radio", value: key, onCalciteTileSelectChange: (e) => {
          this.selectedCloudType = e.target.value;
        } }));
    })))), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "input-label" }, selectedCloudType === "new" && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", null, i18n.cloudSelectProvider, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-tile-select-group", { layout: "vertical", class: "tile-select-group" }, cloudProviders.map((key) => {
      return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-tile-select", { key: key, class: "tile-select", checked: selectedCloudProvider === key, heading: i18n.bdfsCloudProviders[key], name: "cloud-provider-selection", "input-enabled": true, width: "full", type: "radio", value: key, onCalciteTileSelectChange: (e) => {
          this.selectedCloudProvider = e.target.value;
        } }));
    })))), selectedCloudType === "existing" && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", null, i18n.cloudSearch, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-combobox", { id: "existing-data-store", scale: "m", label: "Single selection-mode combobox", selectionMode: "single", onCalciteComboboxChange: this.handleSelectCloudStore, placeholder: i18n.cloudSearchPlaceholder }, this.createCloudStoreListForDisplay())))), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-alert", { heading: error && i18n.errors[error].heading, description: error && i18n.errors[error].description, active: error !== null, onAlertDismiss: () => {
        this.error = null;
      } })));
  }
};
ArcgisNewItemPagesDataStoreSelectBdfsCloud.style = arcgisNewItemPagesDataStoreSelectBdfsCloudCss;




/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXBwLWNvbXBvbmVudHNfZGlzdF9lc21fYXJjZ2lzLW5ldy1pdGUtNmRmMjE4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNpRjtBQUM1QjtBQUNNO0FBQ3VDO0FBQ3JFO0FBQ0M7QUFDSztBQUNMO0FBQ0k7QUFDQTtBQUNOO0FBQ007QUFDRztBQUNFO0FBQ0Y7QUFDVDtBQUNLO0FBQ0o7QUFDRDtBQUNEO0FBQ1E7QUFDRDtBQUNBO0FBQ1A7QUFDVTtBQUNWO0FBQ0E7QUFDSTtBQUNIO0FBQ0M7O0FBRTdCLG9FQUFvRSxtQkFBbUIsbUJBQW1CLG1CQUFtQixhQUFhLHVCQUF1Qjs7QUFFaks7QUFDQTtBQUNBLElBQUkscURBQWdCO0FBQ3BCLDZCQUE2QixxREFBVztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLDJCQUEyQiwwREFBcUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsMERBQXFCO0FBQzlELGdCQUFnQiw4Q0FBWTtBQUM1Qiw2QkFBNkIsb0RBQVk7QUFDekMsUUFBUSxvREFBWTtBQUNwQixtQ0FBbUMsb0RBQVk7QUFDL0M7QUFDQSxhQUFhLG9EQUFZO0FBQ3pCLHdDQUF3QyxvREFBWTtBQUNwRDtBQUNBO0FBQ0E7QUFDQSxZQUFZLHVFQUF1RTtBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxvREFBWTtBQUNoQjtBQUNBLE1BQU0sb0RBQVk7QUFDbEI7QUFDQTtBQUNBO0FBQ0EsTUFBTSxvREFBWTtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVkscURBQXFEO0FBQ2pFO0FBQ0EsY0FBYyxxREFBQyw0QkFBNEIsb05BQW9OO0FBQy9QLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWSxvRkFBb0Y7QUFDaEcsWUFBWSxxREFBQyxjQUFjLHFEQUFDLFVBQVUsc0JBQXNCLEVBQUUscURBQUMsOENBQThDLHFEQUFDLGdDQUFnQyxnREFBZ0Q7QUFDOUwsY0FBYyxxREFBQywwQkFBMEI7QUFDekM7QUFDQSxXQUFXO0FBQ1gsS0FBSyxNQUFNLHFEQUFDLFVBQVUsc0JBQXNCLGtDQUFrQyxxREFBQyxrREFBa0QscURBQUMsZ0NBQWdDLGdEQUFnRDtBQUNsTixjQUFjLHFEQUFDLDBCQUEwQjtBQUN6QztBQUNBLFdBQVc7QUFDWCxLQUFLLDJDQUEyQyxxREFBQywwQ0FBMEMscURBQUMsdUJBQXVCLHlNQUF5TSw2Q0FBNkMscURBQUMsNEJBQTRCO0FBQ3RZO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFNEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcHAtY29tcG9uZW50cy9kaXN0L2VzbS9hcmNnaXMtbmV3LWl0ZW0tcGFnZXMtZGF0YS1zdG9yZS1zZWxlY3QtYmRmcy1jbG91ZC5lbnRyeS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiB2My4wLjk5XG4gKi9cbmltcG9ydCB7IHIgYXMgcmVnaXN0ZXJJbnN0YW5jZSwgYyBhcyBjcmVhdGVFdmVudCwgaCB9IGZyb20gJy4vaW5kZXgtOTJlYmIzOTYuanMnO1xuaW1wb3J0IHsgdSBhcyB1aVN0b3JlU3RhdGUgfSBmcm9tICcuL3VpLWVjZjg2YmJhLmpzJztcbmltcG9ydCB7IGEgYXMgYWRkSXRlbVN0YXRlIH0gZnJvbSAnLi9hZGQtaXRlbS05N2Q1NzdhOS5qcyc7XG5pbXBvcnQgeyByIGFzIHJlcXVlc3RDbG91ZFN0b3JlSW5mbywgYiBhcyByZXF1ZXN0Q2xvdWRTdG9yZUxpc3QgfSBmcm9tICcuL2RhdGEtc3RvcmUtZjUwOTU2NGQuanMnO1xuaW1wb3J0ICcuL2luZGV4LTgxZDU0OGI3LmpzJztcbmltcG9ydCAnLi9wb3J0YWwtNzljYWFlZmYuanMnO1xuaW1wb3J0ICcuL2xvYWRNb2R1bGVzLWFhZjMwYmQ2LmpzJztcbmltcG9ydCAnLi9jb25maWctZWI1ZjdkYzIuanMnO1xuaW1wb3J0ICcuL3ByaXZpbGVnZXMtY2NkNWYzN2QuanMnO1xuaW1wb3J0ICcuL2Z1bmN0aW9uYWwtYzgyZjVhYjkuanMnO1xuaW1wb3J0ICcuL2l0ZW0tZDlkNzA0MTYuanMnO1xuaW1wb3J0ICcuL2RhdGEtc3RvcmUtZThiNWNlMmYuanMnO1xuaW1wb3J0ICcuL2ZlYXR1cmUtbGF5ZXItMzhjZGFlODcuanMnO1xuaW1wb3J0ICcuL2l0ZW0tcHJvcGVydGllcy1lNjQxMmE5YS5qcyc7XG5pbXBvcnQgJy4vZmVhdHVyZS1sYXllci1kMzNlYTExNC5qcyc7XG5pbXBvcnQgJy4vZ3VpZC00ZjQxNzZiYS5qcyc7XG5pbXBvcnQgJy4vdGh1bWJuYWlsLTBiN2FkZmNkLmpzJztcbmltcG9ydCAnLi9xdWVyeS00ZjdiN2U0ZC5qcyc7XG5pbXBvcnQgJy4vdXNlci1lM2RlZGM0YS5qcyc7XG5pbXBvcnQgJy4vYXBpLWY3OTM0Y2Q3LmpzJztcbmltcG9ydCAnLi9zZXJ2ZXItaXRlbS1mMTIxNTNlNi5qcyc7XG5pbXBvcnQgJy4vZnVuY3Rpb25hbC05ZjY0OGJlZS5qcyc7XG5pbXBvcnQgJy4vaXRlbS10eXBlcy1iNGZlODZhZC5qcyc7XG5pbXBvcnQgJy4vZG9tLTEzZjViMDBjLmpzJztcbmltcG9ydCAnLi9mZWF0dXJlLWxheWVyLTY5MzA1YTg1LmpzJztcbmltcG9ydCAnLi9hZ3MtNjhkNGFlMjAuanMnO1xuaW1wb3J0ICcuL3VybC1mM2I4MmNjNy5qcyc7XG5pbXBvcnQgJy4vc3RvcmFnZS1kN2Y1ODIyZS5qcyc7XG5pbXBvcnQgJy4vZmlsZS1mMzYxOTNlOS5qcyc7XG5pbXBvcnQgJy4vc3RvcmUtMzIxMGI2MDQuanMnO1xuXG5jb25zdCBhcmNnaXNOZXdJdGVtUGFnZXNEYXRhU3RvcmVTZWxlY3RCZGZzQ2xvdWRDc3MgPSBcIi5pbnB1dC1sYWJlbHttYXJnaW4tdG9wOjEuMjVyZW19LnRpbGUtc2VsZWN0LWdyb3Vwe21hcmdpbi10b3A6MS4yNXJlbX0udGlsZS1zZWxlY3R7bWFyZ2luLWJvdHRvbTowLjEyNXJlbX1cIjtcblxuY29uc3QgQXJjZ2lzTmV3SXRlbVBhZ2VzRGF0YVN0b3JlU2VsZWN0QmRmc0Nsb3VkID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XG4gICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICB0aGlzLm5ld0l0ZW1VcGRhdGVQYWdlID0gY3JlYXRlRXZlbnQodGhpcywgXCJuZXdJdGVtVXBkYXRlUGFnZVwiLCA3KTtcbiAgICB0aGlzLmNsb3VkVHlwZXMgPSBbXCJuZXdcIiwgXCJleGlzdGluZ1wiXTtcbiAgICB0aGlzLmNsb3VkUHJvdmlkZXJzID0gW1xuICAgICAgXCJhbWF6b25cIixcbiAgICAgIFwiYXp1cmVcIixcbiAgICAgIFwiYXp1cmVkYXRhbGFrZWdlbjJzdG9yZVwiXG4gICAgXTtcbiAgICB0aGlzLmhhbmRsZVNlbGVjdENsb3VkU3RvcmUgPSBhc3luYyAoZSkgPT4ge1xuICAgICAgY29uc3QgZGF0YXN0b3JlTmFtZSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgLy8gaWYgYSBkYXRhIHN0b3JlIGlzIHVuc2VsZWN0ZWRcbiAgICAgIGlmICghZGF0YXN0b3JlTmFtZSkge1xuICAgICAgICB0aGlzLnNlbGVjdGVkRXhpc3RpbmdDbG91ZFN0b3JlID0gbnVsbDtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgY2xvdWRTdG9yZUxpc3QgPSB0aGlzLmV4aXN0aW5nQ2xvdWRTdG9yZUxpc3Q7XG4gICAgICBsZXQgc2VsZWN0ZWRDbG91ZFN0b3JlID0gY2xvdWRTdG9yZUxpc3QuZmluZCgoZXhpc3RpbmdDbG91ZFN0b3JlSXRlbSkgPT4ge1xuICAgICAgICByZXR1cm4gZXhpc3RpbmdDbG91ZFN0b3JlSXRlbS50aXRsZSA9PT0gZGF0YXN0b3JlTmFtZTtcbiAgICAgIH0pO1xuICAgICAgY29uc3Qgc2VsZWN0ZWRDbG91ZFN0b3JlSWQgPSBzZWxlY3RlZENsb3VkU3RvcmUgPT09IG51bGwgfHwgc2VsZWN0ZWRDbG91ZFN0b3JlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZWxlY3RlZENsb3VkU3RvcmUuaWQ7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXF1ZXN0Q2xvdWRTdG9yZUluZm8oc2VsZWN0ZWRDbG91ZFN0b3JlSWQpO1xuICAgICAgdGhpcy5zZWxlY3RlZEV4aXN0aW5nQ2xvdWRTdG9yZSA9IHtcbiAgICAgICAgaWQ6IHJlc3VsdC5pZCxcbiAgICAgICAgcGF0aDogcmVzdWx0LnBhdGgsXG4gICAgICAgIHByb3ZpZGVyOiByZXN1bHQucHJvdmlkZXJcbiAgICAgIH07XG4gICAgfTtcbiAgICB0aGlzLnNlbGVjdGVkQ2xvdWRQcm92aWRlciA9IG51bGw7XG4gICAgdGhpcy5zZWxlY3RlZENsb3VkVHlwZSA9IFwibmV3XCI7XG4gICAgdGhpcy5zZWxlY3RlZEV4aXN0aW5nQ2xvdWRTdG9yZSA9IG51bGw7XG4gICAgdGhpcy5leGlzdGluZ0Nsb3VkU3RvcmVMaXN0ID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuZXJyb3IgPSBudWxsO1xuICB9XG4gIGFzeW5jIGNvbXBvbmVudFdpbGxMb2FkKCkge1xuICAgIHRoaXMuZXhpc3RpbmdDbG91ZFN0b3JlTGlzdCA9IChhd2FpdCByZXF1ZXN0Q2xvdWRTdG9yZUxpc3QoKSkucmVzdWx0O1xuICAgIHRoaXMuaTE4biA9IHVpU3RvcmVTdGF0ZS5pMThuLmRhdGFTdG9yZVNlbGVjdEJkZnM7XG4gICAgdGhpcy5zZWxlY3RlZENsb3VkVHlwZSA9IGFkZEl0ZW1TdGF0ZS5iZGZzQ2xvdWRUeXBlIHx8IG51bGw7XG4gICAgaWYgKGFkZEl0ZW1TdGF0ZS5iZGZzQ2xvdWRUeXBlID09PSBcIm5ld1wiKSB7XG4gICAgICB0aGlzLnNlbGVjdGVkQ2xvdWRQcm92aWRlciA9IGFkZEl0ZW1TdGF0ZS5iZGZzQ2xvdWRQcm92aWRlcjtcbiAgICB9XG4gICAgZWxzZSBpZiAoYWRkSXRlbVN0YXRlLmJkZnNDbG91ZFR5cGUgPT09IFwiZXhpc3RpbmdcIikge1xuICAgICAgdGhpcy5zZWxlY3RlZEV4aXN0aW5nQ2xvdWRTdG9yZSA9IGFkZEl0ZW1TdGF0ZS5iZGZzRXhpc3RpbmdEYXRhc3RvcmU7XG4gICAgfVxuICB9XG4gIGhhbmRsZU5leHQoKSB7XG4gICAgY29uc3QgeyBzZWxlY3RlZENsb3VkUHJvdmlkZXIsIHNlbGVjdGVkQ2xvdWRUeXBlLCBzZWxlY3RlZEV4aXN0aW5nQ2xvdWRTdG9yZSB9ID0gdGhpcztcbiAgICBpZiAoc2VsZWN0ZWRDbG91ZFR5cGUgPT09IFwiZXhpc3RpbmdcIiAmJiAhc2VsZWN0ZWRFeGlzdGluZ0Nsb3VkU3RvcmUpIHtcbiAgICAgIHRoaXMuZXJyb3IgPSBcIm5vRGF0YVN0b3JlU2VsZWN0ZWRcIjtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHNlbGVjdGVkQ2xvdWRUeXBlID09PSBcIm5ld1wiICYmICFzZWxlY3RlZENsb3VkUHJvdmlkZXIpIHtcbiAgICAgIHRoaXMuZXJyb3IgPSBcIm5vQ2xvdWRTZWxlY3RlZFwiO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhZGRJdGVtU3RhdGUuYmRmc0Nsb3VkVHlwZSA9IHNlbGVjdGVkQ2xvdWRUeXBlO1xuICAgIGlmIChzZWxlY3RlZENsb3VkVHlwZSA9PT0gXCJuZXdcIikge1xuICAgICAgYWRkSXRlbVN0YXRlLmJkZnNDbG91ZFByb3ZpZGVyID0gc2VsZWN0ZWRDbG91ZFByb3ZpZGVyO1xuICAgICAgdGhpcy5uZXdJdGVtVXBkYXRlUGFnZS5lbWl0KFwiZGF0YVN0b3JlU2VsZWN0Q2xvdWRDcmVkZW50aWFsc1wiKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2VsZWN0ZWRDbG91ZFR5cGUgPT09IFwiZXhpc3RpbmdcIikge1xuICAgICAgYWRkSXRlbVN0YXRlLmJkZnNFeGlzdGluZ0RhdGFzdG9yZSA9IHNlbGVjdGVkRXhpc3RpbmdDbG91ZFN0b3JlO1xuICAgICAgdGhpcy5uZXdJdGVtVXBkYXRlUGFnZS5lbWl0KFwiZGF0YVN0b3JlU2VsZWN0U2VydmVyTGlzdFwiKTtcbiAgICB9XG4gIH1cbiAgY3JlYXRlQ2xvdWRTdG9yZUxpc3RGb3JEaXNwbGF5KCkge1xuICAgIGNvbnN0IHsgZXhpc3RpbmdDbG91ZFN0b3JlTGlzdCwgc2VsZWN0ZWRFeGlzdGluZ0Nsb3VkU3RvcmUgfSA9IHRoaXM7XG4gICAgcmV0dXJuIGV4aXN0aW5nQ2xvdWRTdG9yZUxpc3QubWFwKChpdGVtKSA9PiB7XG4gICAgICByZXR1cm4gKGgoXCJjYWxjaXRlLWNvbWJvYm94LWl0ZW1cIiwgeyBrZXk6IGl0ZW0uaWQsIGlkOiBpdGVtLmlkLCB0ZXh0TGFiZWw6IGl0ZW0udGl0bGUsIHZhbHVlOiBpdGVtLnRpdGxlLCBzZWxlY3RlZDogaXRlbS5pZCA9PT0gKHNlbGVjdGVkRXhpc3RpbmdDbG91ZFN0b3JlID09PSBudWxsIHx8IHNlbGVjdGVkRXhpc3RpbmdDbG91ZFN0b3JlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZWxlY3RlZEV4aXN0aW5nQ2xvdWRTdG9yZS5pZCkgfSwgaXRlbS50aXRsZSkpO1xuICAgIH0pO1xuICB9XG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IGkxOG4sIGNsb3VkVHlwZXMsIGNsb3VkUHJvdmlkZXJzLCBzZWxlY3RlZENsb3VkUHJvdmlkZXIsIHNlbGVjdGVkQ2xvdWRUeXBlLCBlcnJvciB9ID0gdGhpcztcbiAgICByZXR1cm4gKGgoXCJkaXZcIiwgbnVsbCwgaChcImRpdlwiLCB7IGNsYXNzOiBcImlucHV0LWxhYmVsXCIgfSwgaChcImNhbGNpdGUtbGFiZWxcIiwgbnVsbCwgaTE4bi5jbG91ZFNlbGVjdFR5cGUsIGgoXCJjYWxjaXRlLXRpbGUtc2VsZWN0LWdyb3VwXCIsIHsgbGF5b3V0OiBcInZlcnRpY2FsXCIsIGNsYXNzOiBcInRpbGUtc2VsZWN0LWdyb3VwXCIgfSwgY2xvdWRUeXBlcy5tYXAoKGtleSkgPT4ge1xuICAgICAgcmV0dXJuIChoKFwiY2FsY2l0ZS10aWxlLXNlbGVjdFwiLCB7IGtleToga2V5LCBjbGFzczogXCJ0aWxlLXNlbGVjdFwiLCBjaGVja2VkOiBzZWxlY3RlZENsb3VkVHlwZSA9PT0ga2V5LCBoZWFkaW5nOiBpMThuLmNsb3VkVHlwZXNba2V5XSwgbmFtZTogXCJjbG91ZC10eXBlLXNlbGVjdGlvblwiLCBcImlucHV0LWVuYWJsZWRcIjogdHJ1ZSwgd2lkdGg6IFwiZnVsbFwiLCB0eXBlOiBcInJhZGlvXCIsIHZhbHVlOiBrZXksIG9uQ2FsY2l0ZVRpbGVTZWxlY3RDaGFuZ2U6IChlKSA9PiB7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZENsb3VkVHlwZSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICB9IH0pKTtcbiAgICB9KSkpKSwgaChcImRpdlwiLCB7IGNsYXNzOiBcImlucHV0LWxhYmVsXCIgfSwgc2VsZWN0ZWRDbG91ZFR5cGUgPT09IFwibmV3XCIgJiYgKGgoXCJjYWxjaXRlLWxhYmVsXCIsIG51bGwsIGkxOG4uY2xvdWRTZWxlY3RQcm92aWRlciwgaChcImNhbGNpdGUtdGlsZS1zZWxlY3QtZ3JvdXBcIiwgeyBsYXlvdXQ6IFwidmVydGljYWxcIiwgY2xhc3M6IFwidGlsZS1zZWxlY3QtZ3JvdXBcIiB9LCBjbG91ZFByb3ZpZGVycy5tYXAoKGtleSkgPT4ge1xuICAgICAgcmV0dXJuIChoKFwiY2FsY2l0ZS10aWxlLXNlbGVjdFwiLCB7IGtleToga2V5LCBjbGFzczogXCJ0aWxlLXNlbGVjdFwiLCBjaGVja2VkOiBzZWxlY3RlZENsb3VkUHJvdmlkZXIgPT09IGtleSwgaGVhZGluZzogaTE4bi5iZGZzQ2xvdWRQcm92aWRlcnNba2V5XSwgbmFtZTogXCJjbG91ZC1wcm92aWRlci1zZWxlY3Rpb25cIiwgXCJpbnB1dC1lbmFibGVkXCI6IHRydWUsIHdpZHRoOiBcImZ1bGxcIiwgdHlwZTogXCJyYWRpb1wiLCB2YWx1ZToga2V5LCBvbkNhbGNpdGVUaWxlU2VsZWN0Q2hhbmdlOiAoZSkgPT4ge1xuICAgICAgICAgIHRoaXMuc2VsZWN0ZWRDbG91ZFByb3ZpZGVyID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgIH0gfSkpO1xuICAgIH0pKSkpLCBzZWxlY3RlZENsb3VkVHlwZSA9PT0gXCJleGlzdGluZ1wiICYmIChoKFwiY2FsY2l0ZS1sYWJlbFwiLCBudWxsLCBpMThuLmNsb3VkU2VhcmNoLCBoKFwiY2FsY2l0ZS1jb21ib2JveFwiLCB7IGlkOiBcImV4aXN0aW5nLWRhdGEtc3RvcmVcIiwgc2NhbGU6IFwibVwiLCBsYWJlbDogXCJTaW5nbGUgc2VsZWN0aW9uLW1vZGUgY29tYm9ib3hcIiwgc2VsZWN0aW9uTW9kZTogXCJzaW5nbGVcIiwgb25DYWxjaXRlQ29tYm9ib3hDaGFuZ2U6IHRoaXMuaGFuZGxlU2VsZWN0Q2xvdWRTdG9yZSwgcGxhY2Vob2xkZXI6IGkxOG4uY2xvdWRTZWFyY2hQbGFjZWhvbGRlciB9LCB0aGlzLmNyZWF0ZUNsb3VkU3RvcmVMaXN0Rm9yRGlzcGxheSgpKSkpKSwgaChcImFyY2dpcy1uZXctaXRlbS1hbGVydFwiLCB7IGhlYWRpbmc6IGVycm9yICYmIGkxOG4uZXJyb3JzW2Vycm9yXS5oZWFkaW5nLCBkZXNjcmlwdGlvbjogZXJyb3IgJiYgaTE4bi5lcnJvcnNbZXJyb3JdLmRlc2NyaXB0aW9uLCBhY3RpdmU6IGVycm9yICE9PSBudWxsLCBvbkFsZXJ0RGlzbWlzczogKCkgPT4ge1xuICAgICAgICB0aGlzLmVycm9yID0gbnVsbDtcbiAgICAgIH0gfSkpKTtcbiAgfVxufTtcbkFyY2dpc05ld0l0ZW1QYWdlc0RhdGFTdG9yZVNlbGVjdEJkZnNDbG91ZC5zdHlsZSA9IGFyY2dpc05ld0l0ZW1QYWdlc0RhdGFTdG9yZVNlbGVjdEJkZnNDbG91ZENzcztcblxuZXhwb3J0IHsgQXJjZ2lzTmV3SXRlbVBhZ2VzRGF0YVN0b3JlU2VsZWN0QmRmc0Nsb3VkIGFzIGFyY2dpc19uZXdfaXRlbV9wYWdlc19kYXRhX3N0b3JlX3NlbGVjdF9iZGZzX2Nsb3VkIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=