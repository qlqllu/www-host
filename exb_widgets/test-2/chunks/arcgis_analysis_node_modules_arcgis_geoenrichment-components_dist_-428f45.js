"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_geoenrichment-components_dist_-428f45"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/ElevationQuery-04bd30f8.js":
/*!******************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/ElevationQuery-04bd30f8.js ***!
  \******************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ElevationQuery: () => (/* binding */ T),
/* harmony export */   GeometryDescriptor: () => (/* binding */ v),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   getFinestLodIndex: () => (/* binding */ _)
/* harmony export */ });
/* harmony import */ var _DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./DataBrowser-5ce2ade9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/DataBrowser-5ce2ade9.js");
/* harmony import */ var _asyncUtils_af782857_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./asyncUtils-af782857.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/asyncUtils-af782857.js");
/* harmony import */ var _unitUtils_624ceeb6_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./unitUtils-624ceeb6.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/unitUtils-624ceeb6.js");
/* harmony import */ var _aaBoundingRect_61971fe3_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./aaBoundingRect-61971fe3.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/aaBoundingRect-61971fe3.js");
/* harmony import */ var _projection_39da86d7_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./projection-39da86d7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/projection-39da86d7.js");
/* harmony import */ var _arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./arcgis-geoenrichment-databrowser-6ca8ea14.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/arcgis-geoenrichment-databrowser-6ca8ea14.js");
/* harmony import */ var _vec3f64_22c0b6cc_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./vec3f64-22c0b6cc.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/vec3f64-22c0b6cc.js");
/* harmony import */ var _vec3_a7a72382_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./vec3-a7a72382.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/vec3-a7a72382.js");
/* harmony import */ var _mat4_dbd368d4_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./mat4-dbd368d4.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/mat4-dbd368d4.js");
/* harmony import */ var _index_4a62c63d_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./index-4a62c63d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/index-4a62c63d.js");











/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const c=_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.S.getLogger("esri.layers.support.ElevationSampler");class m{queryElevation(e){return h(e.clone(),this)}on(){return g$1}projectIfRequired(e,t){return f(e,t)}}class p extends m{constructor(e,t,n){super(),this.tile=e,this.noDataValue=n,this.extent=(0,_aaBoundingRect_61971fe3_js__WEBPACK_IMPORTED_MODULE_3__.o)(e.tile.extent,t.spatialReference);const s=(0,_unitUtils_624ceeb6_js__WEBPACK_IMPORTED_MODULE_2__.G)(t.spatialReference),i=t.lodAt(e.tile.level).resolution*s;this.demResolution={min:i,max:i};}get spatialReference(){return this.extent.spatialReference}contains(e){const t=this.projectIfRequired(e,this.spatialReference);return (0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.cj)(this.extent,t)}elevationAt(e){const t=this.projectIfRequired(e,this.spatialReference);if(!t)return null;if(!this.contains(e)){const t=this.extent,n=`${t.xmin}, ${t.ymin}, ${t.xmax}, ${t.ymax}`;c.warn("#elevationAt()",`Point used to sample elevation (${e.x}, ${e.y}) is outside of the sampler extent (${n})`);}return this.tile.sample(t.x,t.y)}}class u extends m{constructor(e,t,n){let s;super(),"number"==typeof t?(this.noDataValue=t,s=null):(s=t,this.noDataValue=n),this.samplers=s?e.map((e=>new p(e,s,this.noDataValue))):e;const i$1=this.samplers[0];if(i$1){this.extent=i$1.extent.clone();const{min:e,max:t}=i$1.demResolution;this.demResolution={min:e,max:t};for(let n=1;n<this.samplers.length;n++){const e=this.samplers[n];this.extent.union(e.extent),this.demResolution.min=Math.min(this.demResolution.min,e.demResolution.min),this.demResolution.max=Math.max(this.demResolution.max,e.demResolution.max);}}else this.extent=(0,_aaBoundingRect_61971fe3_js__WEBPACK_IMPORTED_MODULE_3__.o)((0,_aaBoundingRect_61971fe3_js__WEBPACK_IMPORTED_MODULE_3__.i)(),s.spatialReference),this.demResolution={min:0,max:0};}get spatialReference(){return this.extent.spatialReference}elevationAt(e){const t=this.projectIfRequired(e,this.spatialReference);if(!t)return null;for(const n of this.samplers)if(n.contains(t))return n.elevationAt(t);return c.warn("#elevationAt()",`Point used to sample elevation (${e.x}, ${e.y}) is outside of the sampler`),null}}function h(e,t){const n=f(e,t.spatialReference);if(!n)return null;switch(e.type){case"point":x$1(e,n,t);break;case"polyline":R(e,n,t);break;case"multipoint":d(e,n,t);}return e}function f(e,t){const i=e.spatialReference;return i.equals(t)?e:(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.ci)(i,t)?(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.bg)(e,t):(c.error(`Cannot project geometry spatial reference (wkid:${i.wkid}) to elevation sampler spatial reference (wkid:${t.wkid})`),null)}function x$1(t,n,s){t.z=(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.Y)(s.elevationAt(n),0);}function R(t,n,s){y.spatialReference=n.spatialReference;const i=t.hasM&&!t.hasZ;for(let o=0;o<t.paths.length;o++){const r=t.paths[o],a=n.paths[o];for(let t=0;t<r.length;t++){const n=r[t],o=a[t];y.x=o[0],y.y=o[1],i&&(n[3]=n[2]),n[2]=(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.Y)(s.elevationAt(y),0);}}t.hasZ=!0;}function d(t,n,s){y.spatialReference=n.spatialReference;const i=t.hasM&&!t.hasZ;for(let o=0;o<t.points.length;o++){const r=t.points[o],a=n.points[o];y.x=a[0],y.y=a[1],i&&(r[3]=r[2]),r[2]=(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.Y)(s.elevationAt(y),0);}t.hasZ=!0;}const y=new _DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.q,g$1={remove(){}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
class t{constructor(t,a){if(this.tile=t,!a)return void(this.samplerData=null);const e=this.tile.extent;this.samplerData={pixelData:a.values,width:a.width,height:a.height,safeWidth:.99999999*(a.width-1),noDataValue:a.noDataValue,dx:(a.width-1)/(e[2]-e[0]),dy:(a.width-1)/(e[3]-e[1]),x0:e[0],y1:e[3]};}sample(t,e){if(this.samplerData)return a(this.samplerData,t,e)}}function a(t,a,i){const{safeWidth:h,width:s,pixelData:l,noDataValue:r}=t,n=e(t.dy*(t.y1-i),0,h),o=e(t.dx*(a-t.x0),0,h),d=Math.floor(n),u=Math.floor(o),f=d*s+u,p=f+s,x=l[f],D=l[p],c=l[f+1],w=l[p+1];if(x!==r&&D!==r&&c!==r&&w!==r){const t=o-u,a=x+(c-x)*t;return a+(D+(w-D)*t-a)*(n-d)}}function e(t,a,e){return t<a?a:t>e?e:t}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
class T{async queryAll(e,i,o){if(!(e=o&&o.ignoreInvisibleLayers?e.filter((e=>e.visible)):e.slice()).length)throw new _DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.s("elevation-query:invalid-layer","Elevation queries require at least one elevation layer to fetch tiles from");const s$1=v.fromGeometry(i);let l=!1;o&&o.returnSampleInfo||(l=!0);const n={...E,...o,returnSampleInfo:!0},a=await this.query(e[e.length-1],s$1,n),r=await this._queryAllContinue(e,a,n);return r.geometry=r.geometry.export(),l&&delete r.sampleInfo,r}async query(e,i,o){if(!e)throw new _DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.s("elevation-query:invalid-layer","Elevation queries require an elevation layer to fetch tiles from");if(!i||!(i instanceof v)&&"point"!==i.type&&"multipoint"!==i.type&&"polyline"!==i.type)throw new _DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.s("elevation-query:invalid-geometry","Only point, polyline and multipoint geometries can be used to query elevation");const s$1={...E,...o},l=new g(e,i.spatialReference,s$1),n=s$1.signal;return await e.load({signal:n}),await this._createGeometryDescriptor(l,i,n),await this._selectTiles(l,n),await this._populateElevationTiles(l,n),this._sampleGeometryWithElevation(l),this._createQueryResult(l,n)}async createSampler(e,i,o){if(!e)throw new _DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.s("elevation-query:invalid-layer","Elevation queries require an elevation layer to fetch tiles from");if(!i||"extent"!==i.type)throw new _DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.s("elevation-query:invalid-extent","Invalid or undefined extent");const s$1={...E,...o};return this._createSampler(e,i,s$1)}async createSamplerAll(e,i,o){if(!(e=o&&o.ignoreInvisibleLayers?e.filter((e=>e.visible)):e.slice()).length)throw new _DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.s("elevation-query:invalid-layer","Elevation queries require at least one elevation layer to fetch tiles from");if(!i||"extent"!==i.type)throw new _DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.s("elevation-query:invalid-extent","Invalid or undefined extent");const s$1={...E,...o,returnSampleInfo:!0},l=await this._createSampler(e[e.length-1],i,s$1);return this._createSamplerAllContinue(e,i,l,s$1)}async _createSampler(e,t,i,o){const s=i.signal;await e.load({signal:s});const l=t.spatialReference,n=e.tileInfo.spatialReference;l.equals(n)||(await (0,_projection_39da86d7_js__WEBPACK_IMPORTED_MODULE_4__.e)([{source:l,dest:n}],{signal:s}),t=(0,_projection_39da86d7_js__WEBPACK_IMPORTED_MODULE_4__.H)(t,n));const a=new w(e,t,i,o);return await this._selectTiles(a,s),await this._populateElevationTiles(a,s),new u(a.elevationTiles,a.layer.tileInfo,a.options.noDataValue)}async _createSamplerAllContinue(e,t,i,o){if(e.pop(),!e.length)return i;const s=i.samplers.map((e=>(0,_aaBoundingRect_61971fe3_js__WEBPACK_IMPORTED_MODULE_3__.a)(e.extent))),l=await this._createSampler(e[e.length-1],t,o,s);if(0===l.samplers.length)return i;const n=i.samplers.concat(l.samplers),a=new u(n,o.noDataValue);return this._createSamplerAllContinue(e,t,a,o)}async _queryAllContinue(e,t,i){const o=e.pop(),s=t.geometry.coordinates,l=[],n=[];for(let c=0;c<s.length;c++){const i=t.sampleInfo[c];i.demResolution>=0?i.source||(i.source=o):e.length&&(l.push(s[c]),n.push(c));}if(!e.length||0===l.length)return t;const a=t.geometry.clone(l),r=await this.query(e[e.length-1],a,i);return n.forEach(((e,i)=>{s[e].z=r.geometry.coordinates[i].z,t.sampleInfo[e].demResolution=r.sampleInfo[i].demResolution;})),this._queryAllContinue(e,t,i)}async _createQueryResult(e,t){const i={geometry:(await e.geometry.project(e.outSpatialReference,t)).export(),noDataValue:e.options.noDataValue};return e.options.returnSampleInfo&&(i.sampleInfo=this._extractSampleInfo(e)),e.geometry.coordinates.forEach((e=>{e.tile=null,e.elevationTile=null;})),i}async _createGeometryDescriptor(e,i,o){let s$1;const l=e.layer.tileInfo.spatialReference;if(i instanceof v?s$1=await i.project(l,o):(await (0,_projection_39da86d7_js__WEBPACK_IMPORTED_MODULE_4__.e)([{source:i.spatialReference,dest:l}],{signal:o}),s$1=(0,_projection_39da86d7_js__WEBPACK_IMPORTED_MODULE_4__.H)(i,l)),!s$1)throw new _DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.s("elevation-query:spatial-reference-mismatch",`Cannot query elevation in '${i.spatialReference.wkid}' on an elevation service in '${l.wkid}'`);e.geometry=v.fromGeometry(s$1);}async _selectTiles(e,i){const o=e.options.demResolution;if("geometry"===e.type&&this._preselectOutsideLayerExtent(e),"number"==typeof o)this._selectTilesClosestResolution(e);else if("finest-contiguous"===o)await this._selectTilesFinestContiguous(e,i);else {if("auto"!==o)throw new _DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.s("elevation-query:invalid-dem-resolution",`Invalid dem resolution value '${o}', expected a number, "finest-contiguous" or "auto"`);await this._selectTilesAuto(e,i);}}_preselectOutsideLayerExtent(e){const t$1=new t(null);t$1.sample=()=>e.options.noDataValue,e.outsideExtentTile=t$1;const i=e.layer.fullExtent;e.geometry.coordinates.forEach((e=>{const o=e.x,s=e.y;(o<i.xmin||o>i.xmax||s<i.ymin||s>i.ymax)&&(e.elevationTile=t$1);}));}_selectTilesClosestResolution(e){const t=e.layer.tileInfo,i=this._findNearestDemResolutionLODIndex(t,e.options.demResolution);e.selectTilesAtLOD(i);}_findNearestDemResolutionLODIndex(e,t){const i=t/(0,_unitUtils_624ceeb6_js__WEBPACK_IMPORTED_MODULE_2__.G)(e.spatialReference);let o=e.lods[0],s=0;for(let l=1;l<e.lods.length;l++){const t=e.lods[l];Math.abs(t.resolution-i)<Math.abs(o.resolution-i)&&(o=t,s=l);}return s}async _selectTilesFinestContiguous(e,t){const i=_(e.layer.tileInfo,e.options.minDemResolution);await this._selectTilesFinestContiguousAt(e,i,t);}async _selectTilesFinestContiguousAt(e,s$1,l){const n=e.layer;if(e.selectTilesAtLOD(s$1),s$1<0)return;const a=n.tilemapCache,r=e.getTilesToFetch();try{if(a)await (0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.ck)(Promise.all(r.map((e=>a.fetchAvailability(e.level,e.row,e.col,{signal:l})))),l);else if(await this._populateElevationTiles(e,l),!e.allElevationTilesFetched())throw e.clearElevationTiles(),new _DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.s("elevation-query:has-unavailable-tiles")}catch(c){(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.am)(c),await this._selectTilesFinestContiguousAt(e,s$1-1,l);}}async _populateElevationTiles(t$1,o){const l=t$1.getTilesToFetch(),n={},a=t$1.options.cache,r$1=t$1.options.noDataValue,c=l.map((async i=>{const s=`${t$1.layer.uid}:${i.id}:${r$1}`,l=(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.H)(a)?a.get(s):null,c=(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.H)(l)?l:await t$1.layer.fetchTile(i.level,i.row,i.col,{noDataValue:r$1,signal:o});(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.H)(a)&&a.put(s,c),n[i.id]=new t(i,c);}));await (0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.ck)((0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.ai)(c),o),t$1.populateElevationTiles(n);}async _selectTilesAuto(e,t){this._selectTilesAutoFinest(e),this._reduceTilesForMaximumRequests(e);const s=e.layer.tilemapCache;if(!s)return this._selectTilesAutoPrefetchUpsample(e,t);const l=e.getTilesToFetch(),n={},a=l.map((async e=>{const i$1={id:null,level:0,row:0,col:0,extent:(0,_aaBoundingRect_61971fe3_js__WEBPACK_IMPORTED_MODULE_3__.i)()},l=await (0,_asyncUtils_af782857_js__WEBPACK_IMPORTED_MODULE_1__.o)(s.fetchAvailabilityUpsample(e.level,e.row,e.col,i$1,{signal:t}));!1===l.ok?(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.am)(l.error):n[e.id]=i$1;}));await (0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.ck)(Promise.all(a),t),e.remapTiles(n);}_reduceTilesForMaximumRequests(e){const t=e.layer.tileInfo;let i=0;const o={},s=e=>{e.id in o?o[e.id]++:(o[e.id]=1,i++);},l=e=>{const t=o[e.id];1===t?(delete o[e.id],i--):o[e.id]=t-1;};e.forEachTileToFetch(s,l);let n=!0;for(;n&&(n=!1,e.forEachTileToFetch((o=>{i<=e.options.maximumAutoTileRequests||(l(o),t.upsampleTile(o)&&(n=!0),s(o));}),l),n););}_selectTilesAutoFinest(e){const t=_(e.layer.tileInfo,e.options.minDemResolution);e.selectTilesAtLOD(t,e.options.maximumAutoTileRequests);}async _selectTilesAutoPrefetchUpsample(e,t){const i=e.layer.tileInfo;await this._populateElevationTiles(e,t);let o=!1;e.forEachTileToFetch(((e,t)=>{i.upsampleTile(e)?o=!0:t();})),o&&await this._selectTilesAutoPrefetchUpsample(e,t);}_sampleGeometryWithElevation(e){e.geometry.coordinates.forEach((t=>{const i=t.elevationTile;let o=e.options.noDataValue;if(i){const e=i.sample(t.x,t.y);void 0!==e?o=e:t.elevationTile=null;}t.z=o;}));}_extractSampleInfo(e){const t=e.layer.tileInfo,i=(0,_unitUtils_624ceeb6_js__WEBPACK_IMPORTED_MODULE_2__.G)(t.spatialReference);return e.geometry.coordinates.map((o=>{let s=-1;if(o.elevationTile&&o.elevationTile!==e.outsideExtentTile){s=t.lodAt(o.elevationTile.tile.level).resolution*i;}return {demResolution:s}}))}}class v{export(){return this._exporter(this.coordinates,this.spatialReference)}clone(e){const t=new v;return t.geometry=this.geometry,t.spatialReference=this.spatialReference,t.coordinates=e||this.coordinates.map((e=>this._cloneCoordinate(e))),t._exporter=this._exporter,t}async project(e,t){if(this.spatialReference.equals(e))return this.clone();await (0,_projection_39da86d7_js__WEBPACK_IMPORTED_MODULE_4__.e)([{source:this.spatialReference,dest:e}],{signal:t});const i=new _DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.B({spatialReference:this.spatialReference,points:this.coordinates.map((e=>[e.x,e.y]))}),o=(0,_projection_39da86d7_js__WEBPACK_IMPORTED_MODULE_4__.H)(i,e);if(!o)return null;const s=this.coordinates.map(((e,t)=>{const i=this._cloneCoordinate(e),s=o.points[t];return i.x=s[0],i.y=s[1],i})),l=this.clone(s);return l.spatialReference=e,l}_cloneCoordinate(e){return {x:e.x,y:e.y,z:e.z,m:e.m,tile:null,elevationTile:null}}static fromGeometry(e){const t=new v;if(t.geometry=e,t.spatialReference=e.spatialReference,e instanceof v)t.coordinates=e.coordinates.map((e=>t._cloneCoordinate(e))),t._exporter=(t,i)=>{const o=e.clone(t);return o.spatialReference=i,o};else switch(e.type){case"point":{const i=e,{hasZ:o,hasM:s}=i;t.coordinates=o&&s?[{x:i.x,y:i.y,z:i.z,m:i.m}]:o?[{x:i.x,y:i.y,z:i.z}]:s?[{x:i.x,y:i.y,m:i.m}]:[{x:i.x,y:i.y}],t._exporter=(t,i)=>e.hasM?new _DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.q(t[0].x,t[0].y,t[0].z,t[0].m,i):new _DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.q(t[0].x,t[0].y,t[0].z,i);break}case"multipoint":{const i=e,{hasZ:o,hasM:s}=i;t.coordinates=o&&s?i.points.map((e=>({x:e[0],y:e[1],z:e[2],m:e[3]}))):o?i.points.map((e=>({x:e[0],y:e[1],z:e[2]}))):s?i.points.map((e=>({x:e[0],y:e[1],m:e[2]}))):i.points.map((e=>({x:e[0],y:e[1]}))),t._exporter=(t,i)=>e.hasM?new _DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.B({points:t.map((e=>[e.x,e.y,e.z,e.m])),hasZ:!0,hasM:!0,spatiaReference:i}):new _DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.B(t.map((e=>[e.x,e.y,e.z])),i);break}case"polyline":{const i=e,o=[],s=[],{hasZ:l,hasM:n}=e;let r=0;for(const e of i.paths)if(s.push([r,r+e.length]),r+=e.length,l&&n)for(const t of e)o.push({x:t[0],y:t[1],z:t[2],m:t[3]});else if(l)for(const t of e)o.push({x:t[0],y:t[1],z:t[2]});else if(n)for(const t of e)o.push({x:t[0],y:t[1],m:t[2]});else for(const t of e)o.push({x:t[0],y:t[1]});t.coordinates=o,t._exporter=(t,i)=>{const o=e.hasM?t.map((e=>[e.x,e.y,e.z,e.m])):t.map((e=>[e.x,e.y,e.z])),l=s.map((e=>o.slice(e[0],e[1])));return new _DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.v({paths:l,hasM:e.hasM,hasZ:!0,spatialReference:i})};break}}return t}}class x{constructor(e,t){this.layer=e,this.options=t;}}class g extends x{constructor(e,t,i){super(e,i),this.outSpatialReference=t,this.type="geometry";}selectTilesAtLOD(e){if(e<0)this.geometry.coordinates.forEach((e=>e.tile=null));else {const t=this.layer.tileInfo,i=t.lods[e].level;this.geometry.coordinates.forEach((e=>{e.tile=t.tileAt(i,e.x,e.y);}));}}allElevationTilesFetched(){return !this.geometry.coordinates.some((e=>!e.elevationTile))}clearElevationTiles(){for(const e of this.geometry.coordinates)e.elevationTile!==this.outsideExtentTile&&(e.elevationTile=null);}populateElevationTiles(e){for(const t of this.geometry.coordinates)!t.elevationTile&&t.tile&&(t.elevationTile=e[t.tile.id]);}remapTiles(e){for(const t of this.geometry.coordinates)t.tile=e[t.tile.id];}getTilesToFetch(){const e={},t=[];for(const i of this.geometry.coordinates){const o=i.tile;i.elevationTile||!i.tile||e[o.id]||(e[o.id]=o,t.push(o));}return t}forEachTileToFetch(e){for(const t of this.geometry.coordinates)t.tile&&!t.elevationTile&&e(t.tile,(()=>t.tile=null));}}class w extends x{constructor(e,t,i,o){super(e,i),this.type="extent",this.elevationTiles=[],this.candidateTiles=[],this.fetchedCandidates=new Set,this.extent=t.intersection(e.fullExtent),this.maskExtents=o;}selectTilesAtLOD(e,t){const i=this._maximumLodForRequests(t),o=Math.min(i,e);o<0?this.candidateTiles.length=0:this._selectCandidateTilesCoveringExtentAt(o);}_maximumLodForRequests(e){const t=this.layer.tileInfo;if(!e)return t.lods.length-1;const i=this.extent;for(let o=t.lods.length-1;o>=0;o--){const s=t.lods[o],l=s.resolution*t.size[0],n=s.resolution*t.size[1];if(Math.ceil(i.width/l)*Math.ceil(i.height/n)<=e)return o}return -1}allElevationTilesFetched(){return this.candidateTiles.length===this.elevationTiles.length}clearElevationTiles(){this.elevationTiles.length=0,this.fetchedCandidates.clear();}populateElevationTiles(e){for(const t of this.candidateTiles){const i=e[t.id];i&&(this.fetchedCandidates.add(t),this.elevationTiles.push(i));}}remapTiles(e){this.candidateTiles=this._uniqueNonOverlappingTiles(this.candidateTiles.map((t=>e[t.id])));}getTilesToFetch(){return this.candidateTiles}forEachTileToFetch(e,t){const i=this.candidateTiles;this.candidateTiles=[],i.forEach((i=>{if(this.fetchedCandidates.has(i))return void(t&&t(i));let o=!1;e(i,(()=>o=!0)),o?t&&t(i):this.candidateTiles.push(i);})),this.candidateTiles=this._uniqueNonOverlappingTiles(this.candidateTiles,t);}_uniqueNonOverlappingTiles(e,t){const i={},o=[];for(const l of e)i[l.id]?t&&t(l):(i[l.id]=l,o.push(l));const s=o.sort(((e,t)=>e.level-t.level));return s.filter(((e,i)=>{for(let o=0;o<i;o++)if((0,_aaBoundingRect_61971fe3_js__WEBPACK_IMPORTED_MODULE_3__.q)(s[o].extent,e.extent))return t&&t(e),!1;return !0}))}_selectCandidateTilesCoveringExtentAt(e){this.candidateTiles.length=0;const t=this.layer.tileInfo,i=t.lods[e],o=this.extent,s=t.tileAt(i.level,o.xmin,o.ymin),l=i.resolution*t.size[0],n=i.resolution*t.size[1],a=Math.ceil((o.xmax-s.extent[0])/l),r=Math.ceil((o.ymax-s.extent[1])/n);for(let c=0;c<r;c++)for(let e=0;e<a;e++){const i={id:null,level:s.level,row:s.row-c,col:s.col+e};t.updateTileInfo(i),this._tileIsMasked(i)||this.candidateTiles.push(i);}}_tileIsMasked(e){return !!this.maskExtents&&this.maskExtents.some((t=>(0,_aaBoundingRect_61971fe3_js__WEBPACK_IMPORTED_MODULE_3__.q)(t,e.extent)))}}function _(e,t){let i=e.lods.length-1;if(t>0){const o=e.lods.findIndex((e=>e.resolution<t));0===o?i=0:o>0&&(i=o-1);}return i}const E={maximumAutoTileRequests:20,noDataValue:0,returnSampleInfo:!1,demResolution:"auto",minDemResolution:0};

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (T);


//# sourceMappingURL=ElevationQuery-04bd30f8.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/asyncUtils-af782857.js":
/*!**************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/asyncUtils-af782857.js ***!
  \**************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   e: () => (/* binding */ e),
/* harmony export */   n: () => (/* binding */ n),
/* harmony export */   o: () => (/* binding */ o),
/* harmony export */   u: () => (/* binding */ u)
/* harmony export */ });
/* harmony import */ var _DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./DataBrowser-5ce2ade9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/DataBrowser-5ce2ade9.js");


/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function n(t,n,e){return (0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.ai)(t.map(((r,t)=>n.apply(e,[r,t]))))}function e(t,n,e){return (0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.ai)(t.map(((r,t)=>n.apply(e,[r,t])))).then((r=>r.map((r=>r.value))))}function o(r){return r.then((r=>({ok:!0,value:r}))).catch((r=>({ok:!1,error:r})))}function u(r){return r.then((r=>({ok:!0,value:r}))).catch((r=>{(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.am)(r);return {ok:!1,error:r}}))}



//# sourceMappingURL=asyncUtils-af782857.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfZ2VvZW5yaWNobWVudC1jb21wb25lbnRzX2Rpc3RfLTQyOGY0NS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFvSztBQUNoSDtBQUNSO0FBQ3FCO0FBQ1g7QUFDRTtBQUN6QjtBQUNIO0FBQ0E7QUFDQzs7QUFFN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVEQUFDLG1EQUFtRCxRQUFRLGtCQUFrQix5QkFBeUIsS0FBSyxXQUFXLHVCQUF1QixlQUFlLGtCQUFrQixtQkFBbUIsbURBQW1ELDhEQUFDLG1DQUFtQyxRQUFRLHlEQUFDLDBEQUEwRCxvQkFBb0IsY0FBYyx1QkFBdUIsb0NBQW9DLFlBQVksd0RBQXdELE9BQU8sNERBQUcsZ0JBQWdCLGVBQWUsd0RBQXdELGtCQUFrQixzQkFBc0IseUJBQXlCLE9BQU8sSUFBSSxPQUFPLElBQUksT0FBTyxJQUFJLE9BQU8sRUFBRSwyREFBMkQsSUFBSSxJQUFJLElBQUksc0NBQXNDLEVBQUUsS0FBSyxrQ0FBa0Msa0JBQWtCLG1CQUFtQixNQUFNLDBJQUEwSSwyQkFBMkIsUUFBUSwrQkFBK0IsTUFBTSxZQUFZLG1CQUFtQixvQkFBb0IsYUFBYSxZQUFZLHVCQUF1QixLQUFLLHlCQUF5QixzTEFBc0wsaUJBQWlCLDhEQUFDLENBQUMsOERBQUMsMkNBQTJDLGNBQWMsdUJBQXVCLG9DQUFvQyxlQUFlLHdEQUF3RCxrQkFBa0Isc0VBQXNFLGtFQUFrRSxJQUFJLElBQUksSUFBSSxvQ0FBb0MsZ0JBQWdCLGdDQUFnQyxrQkFBa0IsZUFBZSx1QkFBdUIsTUFBTSx3QkFBd0IsTUFBTSwyQkFBMkIsU0FBUyxnQkFBZ0IsMkJBQTJCLHFCQUFxQiw0REFBRyxNQUFNLDREQUFHLGtFQUFrRSxPQUFPLGlEQUFpRCxPQUFPLFVBQVUsb0JBQW9CLElBQUksMkRBQUcsc0JBQXNCLGtCQUFrQixzQ0FBc0Msd0JB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c0JBQXNCLGlHQUFpRyxrQkFBa0IscUJBQXFCLHdLQUF3SyxzQkFBc0IsdURBQXVELGdGQUFnRiwwQkFBMEIsNEJBQTRCLDZCQUE2QixvQkFBb0IsMEJBQTBCLEtBQUssS0FBSyxvRUFBb0UsMERBQTBELFVBQVUsMkJBQTJCLCtEQUErRCxzQkFBc0IsNkRBQTZELDBCQUEwQixvQ0FBb0MsZ0JBQWdCLGlFQUFpRSxjQUFjLDRGQUE0RixrQkFBa0IsMkJBQTJCLHdCQUF3Qiw0QkFBNEIsc0NBQXNDLHNEQUFzRCxTQUFTLHVEQUF1RCwrRUFBK0UsZ0NBQWdDLFVBQVUsTUFBTSx1REFBdUQseUNBQXlDLHlCQUF5QixZQUFZLElBQUksT0FBTyw4REFBQyx5Q0FBeUMsVUFBVSxHQUFHLHlDQUF5Qyw2QkFBNkIsa05BQWtOLFlBQVksSUFBSSxnQkFBZ0IsSUFBSSxLQUFLLFNBQVMsK0NBQStDLHlFQUF5RSxpQkFBaUIscURBQXFELDhEQUFDLGdCQUFnQixnQkFBZ0Isc0JBQXNCLFFBQVEsOENBQThDLHdCQUF3QixTQUFTLFNBQVM7O0FBRWh0WixpRUFBZSxDQUFDLEVBQUM7QUFDK0Q7O0FBRWhGOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNoQzZEOztBQUU3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixPQUFPLDREQUFDLG1DQUFtQyxrQkFBa0IsT0FBTyw0REFBQyxrRUFBa0UsY0FBYyxvQkFBb0IsY0FBYyxnQkFBZ0IsY0FBYyxJQUFJLGNBQWMsb0JBQW9CLGNBQWMsZUFBZSw0REFBQyxJQUFJLFFBQVEsZUFBZTs7QUFFaFQ7O0FBRXRCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYW5hbHlzaXMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvZ2VvZW5yaWNobWVudC1jb21wb25lbnRzL2Rpc3QvZXNtL0VsZXZhdGlvblF1ZXJ5LTA0YmQzMGY4LmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2dlb2VucmljaG1lbnQtY29tcG9uZW50cy9kaXN0L2VzbS9hc3luY1V0aWxzLWFmNzgyODU3LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFMgYXMgbiwgcSBhcyBqLCBjaSBhcyB4JDIsIGJnIGFzIGckMiwgY2ogYXMgdCQxLCBZIGFzIGMkMSwgcywgY2sgYXMgZCQxLCBhbSBhcyB3JDEsIEggYXMgciwgYWkgYXMgQSwgQiBhcyBtJDEsIHYgYXMgbSQyIH0gZnJvbSAnLi9EYXRhQnJvd3Nlci01Y2UyYWRlOS5qcyc7XG5pbXBvcnQgeyBvIGFzIG8kMSB9IGZyb20gJy4vYXN5bmNVdGlscy1hZjc4Mjg1Ny5qcyc7XG5pbXBvcnQgeyBHIH0gZnJvbSAnLi91bml0VXRpbHMtNjI0Y2VlYjYuanMnO1xuaW1wb3J0IHsgbywgaSwgYSBhcyBhJDEsIHEgfSBmcm9tICcuL2FhQm91bmRpbmdSZWN0LTYxOTcxZmUzLmpzJztcbmltcG9ydCB7IGUgYXMgZW4sIEggfSBmcm9tICcuL3Byb2plY3Rpb24tMzlkYTg2ZDcuanMnO1xuaW1wb3J0ICcuL2FyY2dpcy1nZW9lbnJpY2htZW50LWRhdGFicm93c2VyLTZjYThlYTE0LmpzJztcbmltcG9ydCAnLi92ZWMzZjY0LTIyYzBiNmNjLmpzJztcbmltcG9ydCAnLi92ZWMzLWE3YTcyMzgyLmpzJztcbmltcG9ydCAnLi9tYXQ0LWRiZDM2OGQ0LmpzJztcbmltcG9ydCAnLi9pbmRleC00YTYyYzYzZC5qcyc7XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5jb25zdCBjPW4uZ2V0TG9nZ2VyKFwiZXNyaS5sYXllcnMuc3VwcG9ydC5FbGV2YXRpb25TYW1wbGVyXCIpO2NsYXNzIG17cXVlcnlFbGV2YXRpb24oZSl7cmV0dXJuIGgoZS5jbG9uZSgpLHRoaXMpfW9uKCl7cmV0dXJuIGckMX1wcm9qZWN0SWZSZXF1aXJlZChlLHQpe3JldHVybiBmKGUsdCl9fWNsYXNzIHAgZXh0ZW5kcyBte2NvbnN0cnVjdG9yKGUsdCxuKXtzdXBlcigpLHRoaXMudGlsZT1lLHRoaXMubm9EYXRhVmFsdWU9bix0aGlzLmV4dGVudD1vKGUudGlsZS5leHRlbnQsdC5zcGF0aWFsUmVmZXJlbmNlKTtjb25zdCBzPUcodC5zcGF0aWFsUmVmZXJlbmNlKSxpPXQubG9kQXQoZS50aWxlLmxldmVsKS5yZXNvbHV0aW9uKnM7dGhpcy5kZW1SZXNvbHV0aW9uPXttaW46aSxtYXg6aX07fWdldCBzcGF0aWFsUmVmZXJlbmNlKCl7cmV0dXJuIHRoaXMuZXh0ZW50LnNwYXRpYWxSZWZlcmVuY2V9Y29udGFpbnMoZSl7Y29uc3QgdD10aGlzLnByb2plY3RJZlJlcXVpcmVkKGUsdGhpcy5zcGF0aWFsUmVmZXJlbmNlKTtyZXR1cm4gdCQxKHRoaXMuZXh0ZW50LHQpfWVsZXZhdGlvbkF0KGUpe2NvbnN0IHQ9dGhpcy5wcm9qZWN0SWZSZXF1aXJlZChlLHRoaXMuc3BhdGlhbFJlZmVyZW5jZSk7aWYoIXQpcmV0dXJuIG51bGw7aWYoIXRoaXMuY29udGFpbnMoZSkpe2NvbnN0IHQ9dGhpcy5leHRlbnQsbj1gJHt0LnhtaW59LCAke3QueW1pbn0sICR7dC54bWF4fSwgJHt0LnltYXh9YDtjLndhcm4oXCIjZWxldmF0aW9uQXQoKVwiLGBQb2ludCB1c2VkIHRvIHNhbXBsZSBlbGV2YXRpb24gKCR7ZS54fSwgJHtlLnl9KSBpcyBvdXRzaWRlIG9mIHRoZSBzYW1wbGVyIGV4dGVudCAoJHtufSlgKTt9cmV0dXJuIHRoaXMudGlsZS5zYW1wbGUodC54LHQueSl9fWNsYXNzIHUgZXh0ZW5kcyBte2NvbnN0cnVjdG9yKGUsdCxuKXtsZXQgcztzdXBlcigpLFwibnVtYmVyXCI9PXR5cGVvZiB0Pyh0aGlzLm5vRGF0YVZhbHVlPXQscz1udWxsKToocz10LHRoaXMubm9EYXRhVmFsdWU9biksdGhpcy5zYW1wbGVycz1zP2UubWFwKChlPT5uZXcgcChlLHMsdGhpcy5ub0RhdGFWYWx1ZSkpKTplO2NvbnN0IGkkMT10aGlzLnNhbXBsZXJzWzBdO2lmKGkkMSl7dGhpcy5leHRlbnQ9aSQxLmV4dGVudC5jbG9uZSgpO2NvbnN0e21pbjplLG1heDp0fT1pJDEuZGVtUmVzb2x1dGlvbjt0aGlzLmRlbVJlc29sdXRpb249e21pbjplLG1heDp0fTtmb3IobGV0IG49MTtuPHRoaXMuc2FtcGxlcnMubGVuZ3RoO24rKyl7Y29uc3QgZT10aGlzLnNhbXBsZXJzW25dO3RoaXMuZXh0ZW50LnVuaW9uKGUuZXh0ZW50KSx0aGlzLmRlbVJlc29sdXRpb24ubWluPU1hdGgubWluKHRoaXMuZGVtUmVzb2x1dGlvbi5taW4sZS5kZW1SZXNvbHV0aW9uLm1pbiksdGhpcy5kZW1SZXNvbHV0aW9uLm1heD1NYXRoLm1heCh0aGlzLmRlbVJlc29sdXRpb24ubWF4LGUuZGVtUmVzb2x1dGlvbi5tYXgpO319ZWxzZSB0aGlzLmV4dGVudD1vKGkoKSxzLnNwYXRpYWxSZWZlcmVuY2UpLHRoaXMuZGVtUmVzb2x1dGlvbj17bWluOjAsbWF4OjB9O31nZXQgc3BhdGlhbFJlZmVyZW5jZSgpe3JldHVybiB0aGlzLmV4dGVudC5zcGF0aWFsUmVmZXJlbmNlfWVsZXZhdGlvbkF0KGUpe2NvbnN0IHQ9dGhpcy5wcm9qZWN0SWZSZXF1aXJlZChlLHRoaXMuc3BhdGlhbFJlZmVyZW5jZSk7aWYoIXQpcmV0dXJuIG51bGw7Zm9yKGNvbnN0IG4gb2YgdGhpcy5zYW1wbGVycylpZihuLmNvbnRhaW5zKHQpKXJldHVybiBuLmVsZXZhdGlvbkF0KHQpO3JldHVybiBjLndhcm4oXCIjZWxldmF0aW9uQXQoKVwiLGBQb2ludCB1c2VkIHRvIHNhbXBsZSBlbGV2YXRpb24gKCR7ZS54fSwgJHtlLnl9KSBpcyBvdXRzaWRlIG9mIHRoZSBzYW1wbGVyYCksbnVsbH19ZnVuY3Rpb24gaChlLHQpe2NvbnN0IG49ZihlLHQuc3BhdGlhbFJlZmVyZW5jZSk7aWYoIW4pcmV0dXJuIG51bGw7c3dpdGNoKGUudHlwZSl7Y2FzZVwicG9pbnRcIjp4JDEoZSxuLHQpO2JyZWFrO2Nhc2VcInBvbHlsaW5lXCI6UihlLG4sdCk7YnJlYWs7Y2FzZVwibXVsdGlwb2ludFwiOmQoZSxuLHQpO31yZXR1cm4gZX1mdW5jdGlvbiBmKGUsdCl7Y29uc3QgaT1lLnNwYXRpYWxSZWZlcmVuY2U7cmV0dXJuIGkuZXF1YWxzKHQpP2U6eCQyKGksdCk/ZyQyKGUsdCk6KGMuZXJyb3IoYENhbm5vdCBwcm9qZWN0IGdlb21ldHJ5IHNwYXRpYWwgcmVmZXJlbmNlICh3a2lkOiR7aS53a2lkfSkgdG8gZWxldmF0aW9uIHNhbXBsZXIgc3BhdGlhbCByZWZlcmVuY2UgKHdraWQ6JHt0LndraWR9KWApLG51bGwpfWZ1bmN0aW9uIHgkMSh0LG4scyl7dC56PWMkMShzLmVsZXZhdGlvbkF0KG4pLDApO31mdW5jdGlvbiBSKHQsbixzKXt5LnNwYXRpYWxSZWZlcmVuY2U9bi5zcGF0aWFsUmVmZXJlbmNlO2NvbnN0IGk9dC5oYXNNJiYhdC5oYXNaO2ZvcihsZXQgbz0wO288dC5wYXRocy5sZW5ndGg7bysrKXtjb25zdCByPXQucGF0aHNbb10sYT1uLnBhdGhzW29dO2ZvcihsZXQgdD0wO3Q8ci5sZW5ndGg7dCsrKXtjb25zdCBuPXJbdF0sbz1hW3RdO3kueD1vWzBdLHkueT1vWzFdLGkmJihuWzNdPW5bMl0pLG5bMl09YyQxKHMuZWxldmF0aW9uQXQoeSksMCk7fX10Lmhhc1o9ITA7fWZ1bmN0aW9uIGQodCxuLHMpe3kuc3BhdGlhbFJlZmVyZW5jZT1uLnNwYXRpYWxSZWZlcmVuY2U7Y29uc3QgaT10Lmhhc00mJiF0Lmhhc1o7Zm9yKGxldCBvPTA7bzx0LnBvaW50cy5sZW5ndGg7bysrKXtjb25zdCByPXQucG9pbnRzW29dLGE9bi5wb2ludHNbb107eS54PWFbMF0seS55PWFbMV0saSYmKHJbM109clsyXSksclsyXT1jJDEocy5lbGV2YXRpb25BdCh5KSwwKTt9dC5oYXNaPSEwO31jb25zdCB5PW5ldyBqLGckMT17cmVtb3ZlKCl7fX07XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5jbGFzcyB0e2NvbnN0cnVjdG9yKHQsYSl7aWYodGhpcy50aWxlPXQsIWEpcmV0dXJuIHZvaWQodGhpcy5zYW1wbGVyRGF0YT1udWxsKTtjb25zdCBlPXRoaXMudGlsZS5leHRlbnQ7dGhpcy5zYW1wbGVyRGF0YT17cGl4ZWxEYXRhOmEudmFsdWVzLHdpZHRoOmEud2lkdGgsaGVpZ2h0OmEuaGVpZ2h0LHNhZmVXaWR0aDouOTk5OTk5OTkqKGEud2lkdGgtMSksbm9EYXRhVmFsdWU6YS5ub0RhdGFWYWx1ZSxkeDooYS53aWR0aC0xKS8oZVsyXS1lWzBdKSxkeTooYS53aWR0aC0xKS8oZVszXS1lWzFdKSx4MDplWzBdLHkxOmVbM119O31zYW1wbGUodCxlKXtpZih0aGlzLnNhbXBsZXJEYXRhKXJldHVybiBhKHRoaXMuc2FtcGxlckRhdGEsdCxlKX19ZnVuY3Rpb24gYSh0LGEsaSl7Y29uc3R7c2FmZVdpZHRoOmgsd2lkdGg6cyxwaXhlbERhdGE6bCxub0RhdGFWYWx1ZTpyfT10LG49ZSh0LmR5Kih0LnkxLWkpLDAsaCksbz1lKHQuZHgqKGEtdC54MCksMCxoKSxkPU1hdGguZmxvb3IobiksdT1NYXRoLmZsb29yKG8pLGY9ZCpzK3UscD1mK3MseD1sW2ZdLEQ9bFtwXSxjPWxbZisxXSx3PWxbcCsxXTtpZih4IT09ciYmRCE9PXImJmMhPT1yJiZ3IT09cil7Y29uc3QgdD1vLXUsYT14KyhjLXgpKnQ7cmV0dXJuIGErKEQrKHctRCkqdC1hKSoobi1kKX19ZnVuY3Rpb24gZSh0LGEsZSl7cmV0dXJuIHQ8YT9hOnQ+ZT9lOnR9XG5cbi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjE5L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5jbGFzcyBUe2FzeW5jIHF1ZXJ5QWxsKGUsaSxvKXtpZighKGU9byYmby5pZ25vcmVJbnZpc2libGVMYXllcnM/ZS5maWx0ZXIoKGU9PmUudmlzaWJsZSkpOmUuc2xpY2UoKSkubGVuZ3RoKXRocm93IG5ldyBzKFwiZWxldmF0aW9uLXF1ZXJ5OmludmFsaWQtbGF5ZXJcIixcIkVsZXZhdGlvbiBxdWVyaWVzIHJlcXVpcmUgYXQgbGVhc3Qgb25lIGVsZXZhdGlvbiBsYXllciB0byBmZXRjaCB0aWxlcyBmcm9tXCIpO2NvbnN0IHMkMT12LmZyb21HZW9tZXRyeShpKTtsZXQgbD0hMTtvJiZvLnJldHVyblNhbXBsZUluZm98fChsPSEwKTtjb25zdCBuPXsuLi5FLC4uLm8scmV0dXJuU2FtcGxlSW5mbzohMH0sYT1hd2FpdCB0aGlzLnF1ZXJ5KGVbZS5sZW5ndGgtMV0scyQxLG4pLHI9YXdhaXQgdGhpcy5fcXVlcnlBbGxDb250aW51ZShlLGEsbik7cmV0dXJuIHIuZ2VvbWV0cnk9ci5nZW9tZXRyeS5leHBvcnQoKSxsJiZkZWxldGUgci5zYW1wbGVJbmZvLHJ9YXN5bmMgcXVlcnkoZSxpLG8pe2lmKCFlKXRocm93IG5ldyBzKFwiZWxldmF0aW9uLXF1ZXJ5OmludmFsaWQtbGF5ZXJcIixcIkVsZXZhdGlvbiBxdWVyaWVzIHJlcXVpcmUgYW4gZWxldmF0aW9uIGxheWVyIHRvIGZldGNoIHRpbGVzIGZyb21cIik7aWYoIWl8fCEoaSBpbnN0YW5jZW9mIHYpJiZcInBvaW50XCIhPT1pLnR5cGUmJlwibXVsdGlwb2ludFwiIT09aS50eXBlJiZcInBvbHlsaW5lXCIhPT1pLnR5cGUpdGhyb3cgbmV3IHMoXCJlbGV2YXRpb24tcXVlcnk6aW52YWxpZC1nZW9tZXRyeVwiLFwiT25seSBwb2ludCwgcG9seWxpbmUgYW5kIG11bHRpcG9pbnQgZ2VvbWV0cmllcyBjYW4gYmUgdXNlZCB0byBxdWVyeSBlbGV2YXRpb25cIik7Y29uc3QgcyQxPXsuLi5FLC4uLm99LGw9bmV3IGcoZSxpLnNwYXRpYWxSZWZlcmVuY2UscyQxKSxuPXMkMS5zaWduYWw7cmV0dXJuIGF3YWl0IGUubG9hZCh7c2lnbmFsOm59KSxhd2FpdCB0aGlzLl9jcmVhdGVHZW9tZXRyeURlc2NyaXB0b3IobCxpLG4pLGF3YWl0IHRoaXMuX3NlbGVjdFRpbGVzKGwsbiksYXdhaXQgdGhpcy5fcG9wdWxhdGVFbGV2YXRpb25UaWxlcyhsLG4pLHRoaXMuX3NhbXBsZUdlb21ldHJ5V2l0aEVsZXZhdGlvbihsKSx0aGlzLl9jcmVhdGVRdWVyeVJlc3VsdChsLG4pfWFzeW5jIGNyZWF0ZVNhbXBsZXIoZSxpLG8pe2lmKCFlKXRocm93IG5ldyBzKFwiZWxldmF0aW9uLXF1ZXJ5OmludmFsaWQtbGF5ZXJcIixcIkVsZXZhdGlvbiBxdWVyaWVzIHJlcXVpcmUgYW4gZWxldmF0aW9uIGxheWVyIHRvIGZldGNoIHRpbGVzIGZyb21cIik7aWYoIWl8fFwiZXh0ZW50XCIhPT1pLnR5cGUpdGhyb3cgbmV3IHMoXCJlbGV2YXRpb24tcXVlcnk6aW52YWxpZC1leHRlbnRcIixcIkludmFsaWQgb3IgdW5kZWZpbmVkIGV4dGVudFwiKTtjb25zdCBzJDE9ey4uLkUsLi4ub307cmV0dXJuIHRoaXMuX2NyZWF0ZVNhbXBsZXIoZSxpLHMkMSl9YXN5bmMgY3JlYXRlU2FtcGxlckFsbChlLGksbyl7aWYoIShlPW8mJm8uaWdub3JlSW52aXNpYmxlTGF5ZXJzP2UuZmlsdGVyKChlPT5lLnZpc2libGUpKTplLnNsaWNlKCkpLmxlbmd0aCl0aHJvdyBuZXcgcyhcImVsZXZhdGlvbi1xdWVyeTppbnZhbGlkLWxheWVyXCIsXCJFbGV2YXRpb24gcXVlcmllcyByZXF1aXJlIGF0IGxlYXN0IG9uZSBlbGV2YXRpb24gbGF5ZXIgdG8gZmV0Y2ggdGlsZXMgZnJvbVwiKTtpZighaXx8XCJleHRlbnRcIiE9PWkudHlwZSl0aHJvdyBuZXcgcyhcImVsZXZhdGlvbi1xdWVyeTppbnZhbGlkLWV4dGVudFwiLFwiSW52YWxpZCBvciB1bmRlZmluZWQgZXh0ZW50XCIpO2NvbnN0IHMkMT17Li4uRSwuLi5vLHJldHVyblNhbXBsZUluZm86ITB9LGw9YXdhaXQgdGhpcy5fY3JlYXRlU2FtcGxlcihlW2UubGVuZ3RoLTFdLGkscyQxKTtyZXR1cm4gdGhpcy5fY3JlYXRlU2FtcGxlckFsbENvbnRpbnVlKGUsaSxsLHMkMSl9YXN5bmMgX2NyZWF0ZVNhbXBsZXIoZSx0LGksbyl7Y29uc3Qgcz1pLnNpZ25hbDthd2FpdCBlLmxvYWQoe3NpZ25hbDpzfSk7Y29uc3QgbD10LnNwYXRpYWxSZWZlcmVuY2Usbj1lLnRpbGVJbmZvLnNwYXRpYWxSZWZlcmVuY2U7bC5lcXVhbHMobil8fChhd2FpdCBlbihbe3NvdXJjZTpsLGRlc3Q6bn1dLHtzaWduYWw6c30pLHQ9SCh0LG4pKTtjb25zdCBhPW5ldyB3KGUsdCxpLG8pO3JldHVybiBhd2FpdCB0aGlzLl9zZWxlY3RUaWxlcyhhLHMpLGF3YWl0IHRoaXMuX3BvcHVsYXRlRWxldmF0aW9uVGlsZXMoYSxzKSxuZXcgdShhLmVsZXZhdGlvblRpbGVzLGEubGF5ZXIudGlsZUluZm8sYS5vcHRpb25zLm5vRGF0YVZhbHVlKX1hc3luYyBfY3JlYXRlU2FtcGxlckFsbENvbnRpbnVlKGUsdCxpLG8pe2lmKGUucG9wKCksIWUubGVuZ3RoKXJldHVybiBpO2NvbnN0IHM9aS5zYW1wbGVycy5tYXAoKGU9PmEkMShlLmV4dGVudCkpKSxsPWF3YWl0IHRoaXMuX2NyZWF0ZVNhbXBsZXIoZVtlLmxlbmd0aC0xXSx0LG8scyk7aWYoMD09PWwuc2FtcGxlcnMubGVuZ3RoKXJldHVybiBpO2NvbnN0IG49aS5zYW1wbGVycy5jb25jYXQobC5zYW1wbGVycyksYT1uZXcgdShuLG8ubm9EYXRhVmFsdWUpO3JldHVybiB0aGlzLl9jcmVhdGVTYW1wbGVyQWxsQ29udGludWUoZSx0LGEsbyl9YXN5bmMgX3F1ZXJ5QWxsQ29udGludWUoZSx0LGkpe2NvbnN0IG89ZS5wb3AoKSxzPXQuZ2VvbWV0cnkuY29vcmRpbmF0ZXMsbD1bXSxuPVtdO2ZvcihsZXQgYz0wO2M8cy5sZW5ndGg7YysrKXtjb25zdCBpPXQuc2FtcGxlSW5mb1tjXTtpLmRlbVJlc29sdXRpb24+PTA/aS5zb3VyY2V8fChpLnNvdXJjZT1vKTplLmxlbmd0aCYmKGwucHVzaChzW2NdKSxuLnB1c2goYykpO31pZighZS5sZW5ndGh8fDA9PT1sLmxlbmd0aClyZXR1cm4gdDtjb25zdCBhPXQuZ2VvbWV0cnkuY2xvbmUobCkscj1hd2FpdCB0aGlzLnF1ZXJ5KGVbZS5sZW5ndGgtMV0sYSxpKTtyZXR1cm4gbi5mb3JFYWNoKCgoZSxpKT0+e3NbZV0uej1yLmdlb21ldHJ5LmNvb3JkaW5hdGVzW2ldLnosdC5zYW1wbGVJbmZvW2VdLmRlbVJlc29sdXRpb249ci5zYW1wbGVJbmZvW2ldLmRlbVJlc29sdXRpb247fSkpLHRoaXMuX3F1ZXJ5QWxsQ29udGludWUoZSx0LGkpfWFzeW5jIF9jcmVhdGVRdWVyeVJlc3VsdChlLHQpe2NvbnN0IGk9e2dlb21ldHJ5Oihhd2FpdCBlLmdlb21ldHJ5LnByb2plY3QoZS5vdXRTcGF0aWFsUmVmZXJlbmNlLHQpKS5leHBvcnQoKSxub0RhdGFWYWx1ZTplLm9wdGlvbnMubm9EYXRhVmFsdWV9O3JldHVybiBlLm9wdGlvbnMucmV0dXJuU2FtcGxlSW5mbyYmKGkuc2FtcGxlSW5mbz10aGlzLl9leHRyYWN0U2FtcGxlSW5mbyhlKSksZS5nZW9tZXRyeS5jb29yZGluYXRlcy5mb3JFYWNoKChlPT57ZS50aWxlPW51bGwsZS5lbGV2YXRpb25UaWxlPW51bGw7fSkpLGl9YXN5bmMgX2NyZWF0ZUdlb21ldHJ5RGVzY3JpcHRvcihlLGksbyl7bGV0IHMkMTtjb25zdCBsPWUubGF5ZXIudGlsZUluZm8uc3BhdGlhbFJlZmVyZW5jZTtpZihpIGluc3RhbmNlb2Ygdj9zJDE9YXdhaXQgaS5wcm9qZWN0KGwsbyk6KGF3YWl0IGVuKFt7c291cmNlOmkuc3BhdGlhbFJlZmVyZW5jZSxkZXN0Omx9XSx7c2lnbmFsOm99KSxzJDE9SChpLGwpKSwhcyQxKXRocm93IG5ldyBzKFwiZWxldmF0aW9uLXF1ZXJ5OnNwYXRpYWwtcmVmZXJlbmNlLW1pc21hdGNoXCIsYENhbm5vdCBxdWVyeSBlbGV2YXRpb24gaW4gJyR7aS5zcGF0aWFsUmVmZXJlbmNlLndraWR9JyBvbiBhbiBlbGV2YXRpb24gc2VydmljZSBpbiAnJHtsLndraWR9J2ApO2UuZ2VvbWV0cnk9di5mcm9tR2VvbWV0cnkocyQxKTt9YXN5bmMgX3NlbGVjdFRpbGVzKGUsaSl7Y29uc3Qgbz1lLm9wdGlvbnMuZGVtUmVzb2x1dGlvbjtpZihcImdlb21ldHJ5XCI9PT1lLnR5cGUmJnRoaXMuX3ByZXNlbGVjdE91dHNpZGVMYXllckV4dGVudChlKSxcIm51bWJlclwiPT10eXBlb2Ygbyl0aGlzLl9zZWxlY3RUaWxlc0Nsb3Nlc3RSZXNvbHV0aW9uKGUpO2Vsc2UgaWYoXCJmaW5lc3QtY29udGlndW91c1wiPT09bylhd2FpdCB0aGlzLl9zZWxlY3RUaWxlc0ZpbmVzdENvbnRpZ3VvdXMoZSxpKTtlbHNlIHtpZihcImF1dG9cIiE9PW8pdGhyb3cgbmV3IHMoXCJlbGV2YXRpb24tcXVlcnk6aW52YWxpZC1kZW0tcmVzb2x1dGlvblwiLGBJbnZhbGlkIGRlbSByZXNvbHV0aW9uIHZhbHVlICcke299JywgZXhwZWN0ZWQgYSBudW1iZXIsIFwiZmluZXN0LWNvbnRpZ3VvdXNcIiBvciBcImF1dG9cImApO2F3YWl0IHRoaXMuX3NlbGVjdFRpbGVzQXV0byhlLGkpO319X3ByZXNlbGVjdE91dHNpZGVMYXllckV4dGVudChlKXtjb25zdCB0JDE9bmV3IHQobnVsbCk7dCQxLnNhbXBsZT0oKT0+ZS5vcHRpb25zLm5vRGF0YVZhbHVlLGUub3V0c2lkZUV4dGVudFRpbGU9dCQxO2NvbnN0IGk9ZS5sYXllci5mdWxsRXh0ZW50O2UuZ2VvbWV0cnkuY29vcmRpbmF0ZXMuZm9yRWFjaCgoZT0+e2NvbnN0IG89ZS54LHM9ZS55OyhvPGkueG1pbnx8bz5pLnhtYXh8fHM8aS55bWlufHxzPmkueW1heCkmJihlLmVsZXZhdGlvblRpbGU9dCQxKTt9KSk7fV9zZWxlY3RUaWxlc0Nsb3Nlc3RSZXNvbHV0aW9uKGUpe2NvbnN0IHQ9ZS5sYXllci50aWxlSW5mbyxpPXRoaXMuX2ZpbmROZWFyZXN0RGVtUmVzb2x1dGlvbkxPREluZGV4KHQsZS5vcHRpb25zLmRlbVJlc29sdXRpb24pO2Uuc2VsZWN0VGlsZXNBdExPRChpKTt9X2ZpbmROZWFyZXN0RGVtUmVzb2x1dGlvbkxPREluZGV4KGUsdCl7Y29uc3QgaT10L0coZS5zcGF0aWFsUmVmZXJlbmNlKTtsZXQgbz1lLmxvZHNbMF0scz0wO2ZvcihsZXQgbD0xO2w8ZS5sb2RzLmxlbmd0aDtsKyspe2NvbnN0IHQ9ZS5sb2RzW2xdO01hdGguYWJzKHQucmVzb2x1dGlvbi1pKTxNYXRoLmFicyhvLnJlc29sdXRpb24taSkmJihvPXQscz1sKTt9cmV0dXJuIHN9YXN5bmMgX3NlbGVjdFRpbGVzRmluZXN0Q29udGlndW91cyhlLHQpe2NvbnN0IGk9XyhlLmxheWVyLnRpbGVJbmZvLGUub3B0aW9ucy5taW5EZW1SZXNvbHV0aW9uKTthd2FpdCB0aGlzLl9zZWxlY3RUaWxlc0ZpbmVzdENvbnRpZ3VvdXNBdChlLGksdCk7fWFzeW5jIF9zZWxlY3RUaWxlc0ZpbmVzdENvbnRpZ3VvdXNBdChlLHMkMSxsKXtjb25zdCBuPWUubGF5ZXI7aWYoZS5zZWxlY3RUaWxlc0F0TE9EKHMkMSkscyQxPDApcmV0dXJuO2NvbnN0IGE9bi50aWxlbWFwQ2FjaGUscj1lLmdldFRpbGVzVG9GZXRjaCgpO3RyeXtpZihhKWF3YWl0IGQkMShQcm9taXNlLmFsbChyLm1hcCgoZT0+YS5mZXRjaEF2YWlsYWJpbGl0eShlLmxldmVsLGUucm93LGUuY29sLHtzaWduYWw6bH0pKSkpLGwpO2Vsc2UgaWYoYXdhaXQgdGhpcy5fcG9wdWxhdGVFbGV2YXRpb25UaWxlcyhlLGwpLCFlLmFsbEVsZXZhdGlvblRpbGVzRmV0Y2hlZCgpKXRocm93IGUuY2xlYXJFbGV2YXRpb25UaWxlcygpLG5ldyBzKFwiZWxldmF0aW9uLXF1ZXJ5Omhhcy11bmF2YWlsYWJsZS10aWxlc1wiKX1jYXRjaChjKXt3JDEoYyksYXdhaXQgdGhpcy5fc2VsZWN0VGlsZXNGaW5lc3RDb250aWd1b3VzQXQoZSxzJDEtMSxsKTt9fWFzeW5jIF9wb3B1bGF0ZUVsZXZhdGlvblRpbGVzKHQkMSxvKXtjb25zdCBsPXQkMS5nZXRUaWxlc1RvRmV0Y2goKSxuPXt9LGE9dCQxLm9wdGlvbnMuY2FjaGUsciQxPXQkMS5vcHRpb25zLm5vRGF0YVZhbHVlLGM9bC5tYXAoKGFzeW5jIGk9Pntjb25zdCBzPWAke3QkMS5sYXllci51aWR9OiR7aS5pZH06JHtyJDF9YCxsPXIoYSk/YS5nZXQocyk6bnVsbCxjPXIobCk/bDphd2FpdCB0JDEubGF5ZXIuZmV0Y2hUaWxlKGkubGV2ZWwsaS5yb3csaS5jb2wse25vRGF0YVZhbHVlOnIkMSxzaWduYWw6b30pO3IoYSkmJmEucHV0KHMsYyksbltpLmlkXT1uZXcgdChpLGMpO30pKTthd2FpdCBkJDEoQShjKSxvKSx0JDEucG9wdWxhdGVFbGV2YXRpb25UaWxlcyhuKTt9YXN5bmMgX3NlbGVjdFRpbGVzQXV0byhlLHQpe3RoaXMuX3NlbGVjdFRpbGVzQXV0b0ZpbmVzdChlKSx0aGlzLl9yZWR1Y2VUaWxlc0Zvck1heGltdW1SZXF1ZXN0cyhlKTtjb25zdCBzPWUubGF5ZXIudGlsZW1hcENhY2hlO2lmKCFzKXJldHVybiB0aGlzLl9zZWxlY3RUaWxlc0F1dG9QcmVmZXRjaFVwc2FtcGxlKGUsdCk7Y29uc3QgbD1lLmdldFRpbGVzVG9GZXRjaCgpLG49e30sYT1sLm1hcCgoYXN5bmMgZT0+e2NvbnN0IGkkMT17aWQ6bnVsbCxsZXZlbDowLHJvdzowLGNvbDowLGV4dGVudDppKCl9LGw9YXdhaXQgbyQxKHMuZmV0Y2hBdmFpbGFiaWxpdHlVcHNhbXBsZShlLmxldmVsLGUucm93LGUuY29sLGkkMSx7c2lnbmFsOnR9KSk7ITE9PT1sLm9rP3ckMShsLmVycm9yKTpuW2UuaWRdPWkkMTt9KSk7YXdhaXQgZCQxKFByb21pc2UuYWxsKGEpLHQpLGUucmVtYXBUaWxlcyhuKTt9X3JlZHVjZVRpbGVzRm9yTWF4aW11bVJlcXVlc3RzKGUpe2NvbnN0IHQ9ZS5sYXllci50aWxlSW5mbztsZXQgaT0wO2NvbnN0IG89e30scz1lPT57ZS5pZCBpbiBvP29bZS5pZF0rKzoob1tlLmlkXT0xLGkrKyk7fSxsPWU9Pntjb25zdCB0PW9bZS5pZF07MT09PXQ/KGRlbGV0ZSBvW2UuaWRdLGktLSk6b1tlLmlkXT10LTE7fTtlLmZvckVhY2hUaWxlVG9GZXRjaChzLGwpO2xldCBuPSEwO2Zvcig7biYmKG49ITEsZS5mb3JFYWNoVGlsZVRvRmV0Y2goKG89PntpPD1lLm9wdGlvbnMubWF4aW11bUF1dG9UaWxlUmVxdWVzdHN8fChsKG8pLHQudXBzYW1wbGVUaWxlKG8pJiYobj0hMCkscyhvKSk7fSksbCksbik7KTt9X3NlbGVjdFRpbGVzQXV0b0ZpbmVzdChlKXtjb25zdCB0PV8oZS5sYXllci50aWxlSW5mbyxlLm9wdGlvbnMubWluRGVtUmVzb2x1dGlvbik7ZS5zZWxlY3RUaWxlc0F0TE9EKHQsZS5vcHRpb25zLm1heGltdW1BdXRvVGlsZVJlcXVlc3RzKTt9YXN5bmMgX3NlbGVjdFRpbGVzQXV0b1ByZWZldGNoVXBzYW1wbGUoZSx0KXtjb25zdCBpPWUubGF5ZXIudGlsZUluZm87YXdhaXQgdGhpcy5fcG9wdWxhdGVFbGV2YXRpb25UaWxlcyhlLHQpO2xldCBvPSExO2UuZm9yRWFjaFRpbGVUb0ZldGNoKCgoZSx0KT0+e2kudXBzYW1wbGVUaWxlKGUpP289ITA6dCgpO30pKSxvJiZhd2FpdCB0aGlzLl9zZWxlY3RUaWxlc0F1dG9QcmVmZXRjaFVwc2FtcGxlKGUsdCk7fV9zYW1wbGVHZW9tZXRyeVdpdGhFbGV2YXRpb24oZSl7ZS5nZW9tZXRyeS5jb29yZGluYXRlcy5mb3JFYWNoKCh0PT57Y29uc3QgaT10LmVsZXZhdGlvblRpbGU7bGV0IG89ZS5vcHRpb25zLm5vRGF0YVZhbHVlO2lmKGkpe2NvbnN0IGU9aS5zYW1wbGUodC54LHQueSk7dm9pZCAwIT09ZT9vPWU6dC5lbGV2YXRpb25UaWxlPW51bGw7fXQuej1vO30pKTt9X2V4dHJhY3RTYW1wbGVJbmZvKGUpe2NvbnN0IHQ9ZS5sYXllci50aWxlSW5mbyxpPUcodC5zcGF0aWFsUmVmZXJlbmNlKTtyZXR1cm4gZS5nZW9tZXRyeS5jb29yZGluYXRlcy5tYXAoKG89PntsZXQgcz0tMTtpZihvLmVsZXZhdGlvblRpbGUmJm8uZWxldmF0aW9uVGlsZSE9PWUub3V0c2lkZUV4dGVudFRpbGUpe3M9dC5sb2RBdChvLmVsZXZhdGlvblRpbGUudGlsZS5sZXZlbCkucmVzb2x1dGlvbippO31yZXR1cm4ge2RlbVJlc29sdXRpb246c319KSl9fWNsYXNzIHZ7ZXhwb3J0KCl7cmV0dXJuIHRoaXMuX2V4cG9ydGVyKHRoaXMuY29vcmRpbmF0ZXMsdGhpcy5zcGF0aWFsUmVmZXJlbmNlKX1jbG9uZShlKXtjb25zdCB0PW5ldyB2O3JldHVybiB0Lmdlb21ldHJ5PXRoaXMuZ2VvbWV0cnksdC5zcGF0aWFsUmVmZXJlbmNlPXRoaXMuc3BhdGlhbFJlZmVyZW5jZSx0LmNvb3JkaW5hdGVzPWV8fHRoaXMuY29vcmRpbmF0ZXMubWFwKChlPT50aGlzLl9jbG9uZUNvb3JkaW5hdGUoZSkpKSx0Ll9leHBvcnRlcj10aGlzLl9leHBvcnRlcix0fWFzeW5jIHByb2plY3QoZSx0KXtpZih0aGlzLnNwYXRpYWxSZWZlcmVuY2UuZXF1YWxzKGUpKXJldHVybiB0aGlzLmNsb25lKCk7YXdhaXQgZW4oW3tzb3VyY2U6dGhpcy5zcGF0aWFsUmVmZXJlbmNlLGRlc3Q6ZX1dLHtzaWduYWw6dH0pO2NvbnN0IGk9bmV3IG0kMSh7c3BhdGlhbFJlZmVyZW5jZTp0aGlzLnNwYXRpYWxSZWZlcmVuY2UscG9pbnRzOnRoaXMuY29vcmRpbmF0ZXMubWFwKChlPT5bZS54LGUueV0pKX0pLG89SChpLGUpO2lmKCFvKXJldHVybiBudWxsO2NvbnN0IHM9dGhpcy5jb29yZGluYXRlcy5tYXAoKChlLHQpPT57Y29uc3QgaT10aGlzLl9jbG9uZUNvb3JkaW5hdGUoZSkscz1vLnBvaW50c1t0XTtyZXR1cm4gaS54PXNbMF0saS55PXNbMV0saX0pKSxsPXRoaXMuY2xvbmUocyk7cmV0dXJuIGwuc3BhdGlhbFJlZmVyZW5jZT1lLGx9X2Nsb25lQ29vcmRpbmF0ZShlKXtyZXR1cm4ge3g6ZS54LHk6ZS55LHo6ZS56LG06ZS5tLHRpbGU6bnVsbCxlbGV2YXRpb25UaWxlOm51bGx9fXN0YXRpYyBmcm9tR2VvbWV0cnkoZSl7Y29uc3QgdD1uZXcgdjtpZih0Lmdlb21ldHJ5PWUsdC5zcGF0aWFsUmVmZXJlbmNlPWUuc3BhdGlhbFJlZmVyZW5jZSxlIGluc3RhbmNlb2Ygdil0LmNvb3JkaW5hdGVzPWUuY29vcmRpbmF0ZXMubWFwKChlPT50Ll9jbG9uZUNvb3JkaW5hdGUoZSkpKSx0Ll9leHBvcnRlcj0odCxpKT0+e2NvbnN0IG89ZS5jbG9uZSh0KTtyZXR1cm4gby5zcGF0aWFsUmVmZXJlbmNlPWksb307ZWxzZSBzd2l0Y2goZS50eXBlKXtjYXNlXCJwb2ludFwiOntjb25zdCBpPWUse2hhc1o6byxoYXNNOnN9PWk7dC5jb29yZGluYXRlcz1vJiZzP1t7eDppLngseTppLnksejppLnosbTppLm19XTpvP1t7eDppLngseTppLnksejppLnp9XTpzP1t7eDppLngseTppLnksbTppLm19XTpbe3g6aS54LHk6aS55fV0sdC5fZXhwb3J0ZXI9KHQsaSk9PmUuaGFzTT9uZXcgaih0WzBdLngsdFswXS55LHRbMF0ueix0WzBdLm0saSk6bmV3IGoodFswXS54LHRbMF0ueSx0WzBdLnosaSk7YnJlYWt9Y2FzZVwibXVsdGlwb2ludFwiOntjb25zdCBpPWUse2hhc1o6byxoYXNNOnN9PWk7dC5jb29yZGluYXRlcz1vJiZzP2kucG9pbnRzLm1hcCgoZT0+KHt4OmVbMF0seTplWzFdLHo6ZVsyXSxtOmVbM119KSkpOm8/aS5wb2ludHMubWFwKChlPT4oe3g6ZVswXSx5OmVbMV0sejplWzJdfSkpKTpzP2kucG9pbnRzLm1hcCgoZT0+KHt4OmVbMF0seTplWzFdLG06ZVsyXX0pKSk6aS5wb2ludHMubWFwKChlPT4oe3g6ZVswXSx5OmVbMV19KSkpLHQuX2V4cG9ydGVyPSh0LGkpPT5lLmhhc00/bmV3IG0kMSh7cG9pbnRzOnQubWFwKChlPT5bZS54LGUueSxlLnosZS5tXSkpLGhhc1o6ITAsaGFzTTohMCxzcGF0aWFSZWZlcmVuY2U6aX0pOm5ldyBtJDEodC5tYXAoKGU9PltlLngsZS55LGUuel0pKSxpKTticmVha31jYXNlXCJwb2x5bGluZVwiOntjb25zdCBpPWUsbz1bXSxzPVtdLHtoYXNaOmwsaGFzTTpufT1lO2xldCByPTA7Zm9yKGNvbnN0IGUgb2YgaS5wYXRocylpZihzLnB1c2goW3IscitlLmxlbmd0aF0pLHIrPWUubGVuZ3RoLGwmJm4pZm9yKGNvbnN0IHQgb2YgZSlvLnB1c2goe3g6dFswXSx5OnRbMV0sejp0WzJdLG06dFszXX0pO2Vsc2UgaWYobClmb3IoY29uc3QgdCBvZiBlKW8ucHVzaCh7eDp0WzBdLHk6dFsxXSx6OnRbMl19KTtlbHNlIGlmKG4pZm9yKGNvbnN0IHQgb2YgZSlvLnB1c2goe3g6dFswXSx5OnRbMV0sbTp0WzJdfSk7ZWxzZSBmb3IoY29uc3QgdCBvZiBlKW8ucHVzaCh7eDp0WzBdLHk6dFsxXX0pO3QuY29vcmRpbmF0ZXM9byx0Ll9leHBvcnRlcj0odCxpKT0+e2NvbnN0IG89ZS5oYXNNP3QubWFwKChlPT5bZS54LGUueSxlLnosZS5tXSkpOnQubWFwKChlPT5bZS54LGUueSxlLnpdKSksbD1zLm1hcCgoZT0+by5zbGljZShlWzBdLGVbMV0pKSk7cmV0dXJuIG5ldyBtJDIoe3BhdGhzOmwsaGFzTTplLmhhc00saGFzWjohMCxzcGF0aWFsUmVmZXJlbmNlOml9KX07YnJlYWt9fXJldHVybiB0fX1jbGFzcyB4e2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5sYXllcj1lLHRoaXMub3B0aW9ucz10O319Y2xhc3MgZyBleHRlbmRzIHh7Y29uc3RydWN0b3IoZSx0LGkpe3N1cGVyKGUsaSksdGhpcy5vdXRTcGF0aWFsUmVmZXJlbmNlPXQsdGhpcy50eXBlPVwiZ2VvbWV0cnlcIjt9c2VsZWN0VGlsZXNBdExPRChlKXtpZihlPDApdGhpcy5nZW9tZXRyeS5jb29yZGluYXRlcy5mb3JFYWNoKChlPT5lLnRpbGU9bnVsbCkpO2Vsc2Uge2NvbnN0IHQ9dGhpcy5sYXllci50aWxlSW5mbyxpPXQubG9kc1tlXS5sZXZlbDt0aGlzLmdlb21ldHJ5LmNvb3JkaW5hdGVzLmZvckVhY2goKGU9PntlLnRpbGU9dC50aWxlQXQoaSxlLngsZS55KTt9KSk7fX1hbGxFbGV2YXRpb25UaWxlc0ZldGNoZWQoKXtyZXR1cm4gIXRoaXMuZ2VvbWV0cnkuY29vcmRpbmF0ZXMuc29tZSgoZT0+IWUuZWxldmF0aW9uVGlsZSkpfWNsZWFyRWxldmF0aW9uVGlsZXMoKXtmb3IoY29uc3QgZSBvZiB0aGlzLmdlb21ldHJ5LmNvb3JkaW5hdGVzKWUuZWxldmF0aW9uVGlsZSE9PXRoaXMub3V0c2lkZUV4dGVudFRpbGUmJihlLmVsZXZhdGlvblRpbGU9bnVsbCk7fXBvcHVsYXRlRWxldmF0aW9uVGlsZXMoZSl7Zm9yKGNvbnN0IHQgb2YgdGhpcy5nZW9tZXRyeS5jb29yZGluYXRlcykhdC5lbGV2YXRpb25UaWxlJiZ0LnRpbGUmJih0LmVsZXZhdGlvblRpbGU9ZVt0LnRpbGUuaWRdKTt9cmVtYXBUaWxlcyhlKXtmb3IoY29uc3QgdCBvZiB0aGlzLmdlb21ldHJ5LmNvb3JkaW5hdGVzKXQudGlsZT1lW3QudGlsZS5pZF07fWdldFRpbGVzVG9GZXRjaCgpe2NvbnN0IGU9e30sdD1bXTtmb3IoY29uc3QgaSBvZiB0aGlzLmdlb21ldHJ5LmNvb3JkaW5hdGVzKXtjb25zdCBvPWkudGlsZTtpLmVsZXZhdGlvblRpbGV8fCFpLnRpbGV8fGVbby5pZF18fChlW28uaWRdPW8sdC5wdXNoKG8pKTt9cmV0dXJuIHR9Zm9yRWFjaFRpbGVUb0ZldGNoKGUpe2Zvcihjb25zdCB0IG9mIHRoaXMuZ2VvbWV0cnkuY29vcmRpbmF0ZXMpdC50aWxlJiYhdC5lbGV2YXRpb25UaWxlJiZlKHQudGlsZSwoKCk9PnQudGlsZT1udWxsKSk7fX1jbGFzcyB3IGV4dGVuZHMgeHtjb25zdHJ1Y3RvcihlLHQsaSxvKXtzdXBlcihlLGkpLHRoaXMudHlwZT1cImV4dGVudFwiLHRoaXMuZWxldmF0aW9uVGlsZXM9W10sdGhpcy5jYW5kaWRhdGVUaWxlcz1bXSx0aGlzLmZldGNoZWRDYW5kaWRhdGVzPW5ldyBTZXQsdGhpcy5leHRlbnQ9dC5pbnRlcnNlY3Rpb24oZS5mdWxsRXh0ZW50KSx0aGlzLm1hc2tFeHRlbnRzPW87fXNlbGVjdFRpbGVzQXRMT0QoZSx0KXtjb25zdCBpPXRoaXMuX21heGltdW1Mb2RGb3JSZXF1ZXN0cyh0KSxvPU1hdGgubWluKGksZSk7bzwwP3RoaXMuY2FuZGlkYXRlVGlsZXMubGVuZ3RoPTA6dGhpcy5fc2VsZWN0Q2FuZGlkYXRlVGlsZXNDb3ZlcmluZ0V4dGVudEF0KG8pO31fbWF4aW11bUxvZEZvclJlcXVlc3RzKGUpe2NvbnN0IHQ9dGhpcy5sYXllci50aWxlSW5mbztpZighZSlyZXR1cm4gdC5sb2RzLmxlbmd0aC0xO2NvbnN0IGk9dGhpcy5leHRlbnQ7Zm9yKGxldCBvPXQubG9kcy5sZW5ndGgtMTtvPj0wO28tLSl7Y29uc3Qgcz10LmxvZHNbb10sbD1zLnJlc29sdXRpb24qdC5zaXplWzBdLG49cy5yZXNvbHV0aW9uKnQuc2l6ZVsxXTtpZihNYXRoLmNlaWwoaS53aWR0aC9sKSpNYXRoLmNlaWwoaS5oZWlnaHQvbik8PWUpcmV0dXJuIG99cmV0dXJuIC0xfWFsbEVsZXZhdGlvblRpbGVzRmV0Y2hlZCgpe3JldHVybiB0aGlzLmNhbmRpZGF0ZVRpbGVzLmxlbmd0aD09PXRoaXMuZWxldmF0aW9uVGlsZXMubGVuZ3RofWNsZWFyRWxldmF0aW9uVGlsZXMoKXt0aGlzLmVsZXZhdGlvblRpbGVzLmxlbmd0aD0wLHRoaXMuZmV0Y2hlZENhbmRpZGF0ZXMuY2xlYXIoKTt9cG9wdWxhdGVFbGV2YXRpb25UaWxlcyhlKXtmb3IoY29uc3QgdCBvZiB0aGlzLmNhbmRpZGF0ZVRpbGVzKXtjb25zdCBpPWVbdC5pZF07aSYmKHRoaXMuZmV0Y2hlZENhbmRpZGF0ZXMuYWRkKHQpLHRoaXMuZWxldmF0aW9uVGlsZXMucHVzaChpKSk7fX1yZW1hcFRpbGVzKGUpe3RoaXMuY2FuZGlkYXRlVGlsZXM9dGhpcy5fdW5pcXVlTm9uT3ZlcmxhcHBpbmdUaWxlcyh0aGlzLmNhbmRpZGF0ZVRpbGVzLm1hcCgodD0+ZVt0LmlkXSkpKTt9Z2V0VGlsZXNUb0ZldGNoKCl7cmV0dXJuIHRoaXMuY2FuZGlkYXRlVGlsZXN9Zm9yRWFjaFRpbGVUb0ZldGNoKGUsdCl7Y29uc3QgaT10aGlzLmNhbmRpZGF0ZVRpbGVzO3RoaXMuY2FuZGlkYXRlVGlsZXM9W10saS5mb3JFYWNoKChpPT57aWYodGhpcy5mZXRjaGVkQ2FuZGlkYXRlcy5oYXMoaSkpcmV0dXJuIHZvaWQodCYmdChpKSk7bGV0IG89ITE7ZShpLCgoKT0+bz0hMCkpLG8/dCYmdChpKTp0aGlzLmNhbmRpZGF0ZVRpbGVzLnB1c2goaSk7fSkpLHRoaXMuY2FuZGlkYXRlVGlsZXM9dGhpcy5fdW5pcXVlTm9uT3ZlcmxhcHBpbmdUaWxlcyh0aGlzLmNhbmRpZGF0ZVRpbGVzLHQpO31fdW5pcXVlTm9uT3ZlcmxhcHBpbmdUaWxlcyhlLHQpe2NvbnN0IGk9e30sbz1bXTtmb3IoY29uc3QgbCBvZiBlKWlbbC5pZF0/dCYmdChsKTooaVtsLmlkXT1sLG8ucHVzaChsKSk7Y29uc3Qgcz1vLnNvcnQoKChlLHQpPT5lLmxldmVsLXQubGV2ZWwpKTtyZXR1cm4gcy5maWx0ZXIoKChlLGkpPT57Zm9yKGxldCBvPTA7bzxpO28rKylpZihxKHNbb10uZXh0ZW50LGUuZXh0ZW50KSlyZXR1cm4gdCYmdChlKSwhMTtyZXR1cm4gITB9KSl9X3NlbGVjdENhbmRpZGF0ZVRpbGVzQ292ZXJpbmdFeHRlbnRBdChlKXt0aGlzLmNhbmRpZGF0ZVRpbGVzLmxlbmd0aD0wO2NvbnN0IHQ9dGhpcy5sYXllci50aWxlSW5mbyxpPXQubG9kc1tlXSxvPXRoaXMuZXh0ZW50LHM9dC50aWxlQXQoaS5sZXZlbCxvLnhtaW4sby55bWluKSxsPWkucmVzb2x1dGlvbip0LnNpemVbMF0sbj1pLnJlc29sdXRpb24qdC5zaXplWzFdLGE9TWF0aC5jZWlsKChvLnhtYXgtcy5leHRlbnRbMF0pL2wpLHI9TWF0aC5jZWlsKChvLnltYXgtcy5leHRlbnRbMV0pL24pO2ZvcihsZXQgYz0wO2M8cjtjKyspZm9yKGxldCBlPTA7ZTxhO2UrKyl7Y29uc3QgaT17aWQ6bnVsbCxsZXZlbDpzLmxldmVsLHJvdzpzLnJvdy1jLGNvbDpzLmNvbCtlfTt0LnVwZGF0ZVRpbGVJbmZvKGkpLHRoaXMuX3RpbGVJc01hc2tlZChpKXx8dGhpcy5jYW5kaWRhdGVUaWxlcy5wdXNoKGkpO319X3RpbGVJc01hc2tlZChlKXtyZXR1cm4gISF0aGlzLm1hc2tFeHRlbnRzJiZ0aGlzLm1hc2tFeHRlbnRzLnNvbWUoKHQ9PnEodCxlLmV4dGVudCkpKX19ZnVuY3Rpb24gXyhlLHQpe2xldCBpPWUubG9kcy5sZW5ndGgtMTtpZih0PjApe2NvbnN0IG89ZS5sb2RzLmZpbmRJbmRleCgoZT0+ZS5yZXNvbHV0aW9uPHQpKTswPT09bz9pPTA6bz4wJiYoaT1vLTEpO31yZXR1cm4gaX1jb25zdCBFPXttYXhpbXVtQXV0b1RpbGVSZXF1ZXN0czoyMCxub0RhdGFWYWx1ZTowLHJldHVyblNhbXBsZUluZm86ITEsZGVtUmVzb2x1dGlvbjpcImF1dG9cIixtaW5EZW1SZXNvbHV0aW9uOjB9O1xuXG5leHBvcnQgZGVmYXVsdCBUO1xuZXhwb3J0IHsgVCBhcyBFbGV2YXRpb25RdWVyeSwgdiBhcyBHZW9tZXRyeURlc2NyaXB0b3IsIF8gYXMgZ2V0RmluZXN0TG9kSW5kZXggfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RWxldmF0aW9uUXVlcnktMDRiZDMwZjguanMubWFwIiwiaW1wb3J0IHsgYWkgYXMgQSwgYW0gYXMgdyB9IGZyb20gJy4vRGF0YUJyb3dzZXItNWNlMmFkZTkuanMnO1xuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuZnVuY3Rpb24gbih0LG4sZSl7cmV0dXJuIEEodC5tYXAoKChyLHQpPT5uLmFwcGx5KGUsW3IsdF0pKSkpfWZ1bmN0aW9uIGUodCxuLGUpe3JldHVybiBBKHQubWFwKCgocix0KT0+bi5hcHBseShlLFtyLHRdKSkpKS50aGVuKChyPT5yLm1hcCgocj0+ci52YWx1ZSkpKSl9ZnVuY3Rpb24gbyhyKXtyZXR1cm4gci50aGVuKChyPT4oe29rOiEwLHZhbHVlOnJ9KSkpLmNhdGNoKChyPT4oe29rOiExLGVycm9yOnJ9KSkpfWZ1bmN0aW9uIHUocil7cmV0dXJuIHIudGhlbigocj0+KHtvazohMCx2YWx1ZTpyfSkpKS5jYXRjaCgocj0+e3cocik7cmV0dXJuIHtvazohMSxlcnJvcjpyfX0pKX1cblxuZXhwb3J0IHsgZSwgbiwgbywgdSB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hc3luY1V0aWxzLWFmNzgyODU3LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==