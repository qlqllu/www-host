"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-node_modules_esri_calcite-components-react_node_modules_esri_calcite-components_dist_-166e7f"],{

/***/ "./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/calcite-list-item.js":
/*!********************************************************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/calcite-list-item.js ***!
  \********************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CalciteListItem: () => (/* binding */ CalciteListItem),
/* harmony export */   defineCustomElement: () => (/* binding */ defineCustomElement)
/* harmony export */ });
/* harmony import */ var _stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @stencil/core/internal/client/index.js */ "./node_modules/@esri/calcite-components-react/node_modules/@stencil/core/internal/client/index.js");
/* harmony import */ var _dom_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dom.js */ "./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/dom.js");
/* harmony import */ var _interactive_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./interactive.js */ "./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/interactive.js");
/* harmony import */ var _utils3_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils3.js */ "./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/utils3.js");
/* harmony import */ var _locale_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./locale.js */ "./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/locale.js");
/* harmony import */ var _t9n_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./t9n.js */ "./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/t9n.js");
/* harmony import */ var _loadable_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./loadable.js */ "./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/loadable.js");
/* harmony import */ var _action_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./action.js */ "./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/action.js");
/* harmony import */ var _handle_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./handle.js */ "./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/handle.js");
/* harmony import */ var _icon_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./icon.js */ "./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/icon.js");
/* harmony import */ var _loader_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./loader.js */ "./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/loader.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.11.0
 */












const listItemCss = ":host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;flex-direction:column;--calcite-list-item-icon-color:var(--calcite-ui-brand);--calcite-list-item-spacing-indent:1rem}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.container{box-sizing:border-box;display:flex;flex:1 1 0%;background-color:var(--calcite-ui-foreground-1);font-family:var(--calcite-sans-family);padding-inline-start:calc(var(--calcite-list-item-spacing-indent) * var(--calcite-list-item-spacing-indent-multiplier))}.container *{box-sizing:border-box}.container:hover{cursor:pointer;background-color:var(--calcite-ui-foreground-2)}.container:active{background-color:var(--calcite-ui-foreground-1)}.container--border-selected{border-inline-start:4px solid var(--calcite-ui-brand)}.container--border-unselected{border-inline-start:4px solid transparent}.nested-container{display:flex;flex-direction:column;background-color:var(--calcite-ui-foreground-1)}.nested-container--hidden{display:none}.content-container{display:flex;flex:1 1 auto;align-items:stretch;padding:0px;font-family:var(--calcite-sans-family);font-weight:var(--calcite-font-weight-normal);color:var(--calcite-ui-text-2)}tr,td{outline-color:transparent}tr:focus,td:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-ui-brand));outline-offset:calc(\n            -2px *\n            calc(\n              1 -\n              2 * clamp(\n                0,\n                var(--calcite-ui-focus-offset-invert),\n                1\n              )\n            )\n          )}.content,.custom-content{display:flex;flex:1 1 auto;flex-direction:column;justify-content:center;padding-inline:0.75rem;padding-block:0.5rem;font-size:var(--calcite-font-size--2);line-height:1.375}.label,.description,.content-bottom{font-family:var(--calcite-sans-family);font-size:var(--calcite-font-size--2);font-weight:var(--calcite-font-weight-normal);word-wrap:break-word;word-break:break-word}.label:only-child,.description:only-child,.content-bottom:only-child{margin:0px;padding-block:0.25rem}.label{color:var(--calcite-ui-text-1)}.description{margin-block-start:0.125rem;color:var(--calcite-ui-text-3)}.content-start{justify-content:flex-start}.content-end{justify-content:flex-end}.content-start,.content-end{flex:1 1 auto}.content-bottom{display:flex;flex-direction:column;background-color:var(--calcite-ui-foreground-1);padding-inline-start:calc(var(--calcite-list-item-spacing-indent) * var(--calcite-list-item-spacing-indent-multiplier))}.content-container--has-center-content .content-start,.content-container--has-center-content .content-end{flex:0 1 auto}.selection-container{display:flex;padding-inline:0.75rem;color:var(--calcite-list-item-icon-color)}.actions-start,.actions-end,.content-start,.content-end,.selection-container,.drag-container,.open-container{display:flex;align-items:center}.open-container,.selection-container{cursor:pointer}.content-start ::slotted(calcite-icon),.content-end ::slotted(calcite-icon){margin-inline:0.75rem;align-self:center}.actions-start ::slotted(calcite-action),.actions-start ::slotted(calcite-action-menu),.actions-start ::slotted(calcite-handle),.actions-start ::slotted(calcite-dropdown),.actions-end ::slotted(calcite-action),.actions-end ::slotted(calcite-action-menu),.actions-end ::slotted(calcite-handle),.actions-end ::slotted(calcite-dropdown){align-self:stretch;color:inherit}::slotted(calcite-list-item){border-width:0px;border-block-start-width:1px;border-style:solid;border-color:var(--calcite-ui-border-3)}:host([hidden]){display:none}[hidden]{display:none}";

const focusMap = new Map();
const listSelector = "calcite-list";
const ListItem = /*@__PURE__*/ (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_10__.proxyCustomElement)(class extends _stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_10__.HTMLElement {
  constructor() {
    super();
    this.__registerHost();
    this.__attachShadow();
    this.calciteListItemSelect = (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_10__.createEvent)(this, "calciteListItemSelect", 6);
    this.calciteListItemClose = (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_10__.createEvent)(this, "calciteListItemClose", 6);
    this.calciteInternalListItemSelect = (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_10__.createEvent)(this, "calciteInternalListItemSelect", 6);
    this.calciteInternalListItemActive = (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_10__.createEvent)(this, "calciteInternalListItemActive", 6);
    this.calciteInternalFocusPreviousItem = (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_10__.createEvent)(this, "calciteInternalFocusPreviousItem", 6);
    this.calciteInternalListItemChange = (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_10__.createEvent)(this, "calciteInternalListItemChange", 6);
    this.closeClickHandler = () => {
      this.closed = true;
      this.calciteListItemClose.emit();
    };
    this.handleContentSlotChange = (event) => {
      this.hasCustomContent = (0,_dom_js__WEBPACK_IMPORTED_MODULE_0__.e)(event);
    };
    this.handleActionsStartSlotChange = (event) => {
      this.hasActionsStart = (0,_dom_js__WEBPACK_IMPORTED_MODULE_0__.e)(event);
    };
    this.handleActionsEndSlotChange = (event) => {
      this.hasActionsEnd = (0,_dom_js__WEBPACK_IMPORTED_MODULE_0__.e)(event);
    };
    this.handleContentStartSlotChange = (event) => {
      this.hasContentStart = (0,_dom_js__WEBPACK_IMPORTED_MODULE_0__.e)(event);
    };
    this.handleContentEndSlotChange = (event) => {
      this.hasContentEnd = (0,_dom_js__WEBPACK_IMPORTED_MODULE_0__.e)(event);
    };
    this.handleContentBottomSlotChange = (event) => {
      this.hasContentBottom = (0,_dom_js__WEBPACK_IMPORTED_MODULE_0__.e)(event);
    };
    this.handleDefaultSlotChange = (event) => {
      this.handleOpenableChange(event.target);
    };
    this.toggleOpen = () => {
      this.open = !this.open;
    };
    this.itemClicked = (event) => {
      if (event.defaultPrevented) {
        return;
      }
      this.toggleSelected();
      this.calciteInternalListItemActive.emit();
    };
    this.toggleSelected = () => {
      const { selectionMode, selected } = this;
      if (this.disabled) {
        return;
      }
      if (selectionMode === "multiple" || selectionMode === "single") {
        this.selected = !selected;
      }
      else if (selectionMode === "single-persist") {
        this.selected = true;
      }
      this.calciteListItemSelect.emit();
    };
    this.handleItemKeyDown = (event) => {
      if (event.defaultPrevented) {
        return;
      }
      const { key } = event;
      const composedPath = event.composedPath();
      const { containerEl, contentEl, actionsStartEl, actionsEndEl, open, openable } = this;
      const cells = [actionsStartEl, contentEl, actionsEndEl].filter(Boolean);
      const currentIndex = cells.findIndex((cell) => composedPath.includes(cell));
      if (key === "Enter" &&
        !composedPath.includes(actionsStartEl) &&
        !composedPath.includes(actionsEndEl)) {
        event.preventDefault();
        this.toggleSelected();
      }
      else if (key === "ArrowRight") {
        event.preventDefault();
        const nextIndex = currentIndex + 1;
        if (currentIndex === -1) {
          if (!open && openable) {
            this.open = true;
            this.focusCell(null);
          }
          else if (cells[0]) {
            this.focusCell(cells[0]);
          }
        }
        else if (cells[currentIndex] && cells[nextIndex]) {
          this.focusCell(cells[nextIndex]);
        }
      }
      else if (key === "ArrowLeft") {
        event.preventDefault();
        const prevIndex = currentIndex - 1;
        if (currentIndex === -1) {
          this.focusCell(null);
          if (open && openable) {
            this.open = false;
          }
          else {
            this.calciteInternalFocusPreviousItem.emit();
          }
        }
        else if (currentIndex === 0) {
          this.focusCell(null);
          containerEl.focus();
        }
        else if (cells[currentIndex] && cells[prevIndex]) {
          this.focusCell(cells[prevIndex]);
        }
      }
    };
    this.focusCellNull = () => {
      this.focusCell(null);
    };
    this.focusCell = (focusEl, saveFocusIndex = true) => {
      const { contentEl, actionsStartEl, actionsEndEl, parentListEl } = this;
      if (saveFocusIndex) {
        focusMap.set(parentListEl, null);
      }
      [actionsStartEl, contentEl, actionsEndEl].filter(Boolean).forEach((tableCell, cellIndex) => {
        const tabIndexAttr = "tabindex";
        if (tableCell === focusEl) {
          tableCell.setAttribute(tabIndexAttr, "0");
          saveFocusIndex && focusMap.set(parentListEl, cellIndex);
        }
        else {
          tableCell.removeAttribute(tabIndexAttr);
        }
      });
      focusEl?.focus();
    };
    this.active = false;
    this.closable = false;
    this.closed = false;
    this.description = undefined;
    this.disabled = false;
    this.dragHandle = false;
    this.label = undefined;
    this.metadata = undefined;
    this.open = false;
    this.setSize = null;
    this.setPosition = null;
    this.selected = false;
    this.value = undefined;
    this.selectionMode = null;
    this.selectionAppearance = null;
    this.messageOverrides = undefined;
    this.messages = undefined;
    this.effectiveLocale = "";
    this.defaultMessages = undefined;
    this.level = null;
    this.visualLevel = null;
    this.parentListEl = undefined;
    this.openable = false;
    this.hasActionsStart = false;
    this.hasActionsEnd = false;
    this.hasCustomContent = false;
    this.hasContentStart = false;
    this.hasContentEnd = false;
    this.hasContentBottom = false;
  }
  activeHandler(active) {
    if (!active) {
      this.focusCell(null, false);
    }
  }
  handleClosedChange() {
    this.emitCalciteInternalListItemChange();
  }
  handleDisabledChange() {
    this.emitCalciteInternalListItemChange();
  }
  handleSelectedChange() {
    this.calciteInternalListItemSelect.emit();
  }
  onMessagesChange() {
    /* wired up by t9n util */
  }
  handleCalciteInternalListDefaultSlotChanges(event) {
    event.stopPropagation();
    this.handleOpenableChange(this.defaultSlotEl);
  }
  effectiveLocaleChange() {
    (0,_t9n_js__WEBPACK_IMPORTED_MODULE_4__.u)(this, this.effectiveLocale);
  }
  // --------------------------------------------------------------------------
  //
  //  Lifecycle
  //
  // --------------------------------------------------------------------------
  connectedCallback() {
    (0,_interactive_js__WEBPACK_IMPORTED_MODULE_1__.c)(this);
    (0,_locale_js__WEBPACK_IMPORTED_MODULE_3__.c)(this);
    (0,_t9n_js__WEBPACK_IMPORTED_MODULE_4__.c)(this);
    const { el } = this;
    this.parentListEl = el.closest(listSelector);
    this.level = (0,_utils3_js__WEBPACK_IMPORTED_MODULE_2__.a)(el) + 1;
    this.visualLevel = (0,_utils3_js__WEBPACK_IMPORTED_MODULE_2__.a)(el, true);
    this.setSelectionDefaults();
  }
  async componentWillLoad() {
    (0,_loadable_js__WEBPACK_IMPORTED_MODULE_5__.a)(this);
    await (0,_t9n_js__WEBPACK_IMPORTED_MODULE_4__.s)(this);
  }
  componentDidLoad() {
    (0,_loadable_js__WEBPACK_IMPORTED_MODULE_5__.s)(this);
  }
  componentDidRender() {
    (0,_interactive_js__WEBPACK_IMPORTED_MODULE_1__.u)(this);
  }
  disconnectedCallback() {
    (0,_interactive_js__WEBPACK_IMPORTED_MODULE_1__.d)(this);
    (0,_locale_js__WEBPACK_IMPORTED_MODULE_3__.d)(this);
    (0,_t9n_js__WEBPACK_IMPORTED_MODULE_4__.d)(this);
  }
  // --------------------------------------------------------------------------
  //
  //  Public Methods
  //
  // --------------------------------------------------------------------------
  /** Sets focus on the component. */
  async setFocus() {
    await (0,_loadable_js__WEBPACK_IMPORTED_MODULE_5__.c)(this);
    const { containerEl, contentEl, actionsStartEl, actionsEndEl, parentListEl } = this;
    const focusIndex = focusMap.get(parentListEl);
    if (typeof focusIndex === "number") {
      const cells = [actionsStartEl, contentEl, actionsEndEl].filter(Boolean);
      if (cells[focusIndex]) {
        this.focusCell(cells[focusIndex]);
      }
      else {
        containerEl?.focus();
      }
      return;
    }
    containerEl?.focus();
  }
  // --------------------------------------------------------------------------
  //
  //  Render Methods
  //
  // --------------------------------------------------------------------------
  renderSelected() {
    const { selected, selectionMode, selectionAppearance } = this;
    if (selectionMode === "none" || selectionAppearance === "border") {
      return null;
    }
    return ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_10__.h)("td", { class: _utils3_js__WEBPACK_IMPORTED_MODULE_2__.C.selectionContainer, key: "selection-container", onClick: this.itemClicked }, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_10__.h)("calcite-icon", { icon: selected
        ? selectionMode === "multiple"
          ? _utils3_js__WEBPACK_IMPORTED_MODULE_2__.I.selectedMultiple
          : _utils3_js__WEBPACK_IMPORTED_MODULE_2__.I.selectedSingle
        : _utils3_js__WEBPACK_IMPORTED_MODULE_2__.I.unselected, scale: "s" })));
  }
  renderDragHandle() {
    return this.dragHandle ? ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_10__.h)("td", { class: _utils3_js__WEBPACK_IMPORTED_MODULE_2__.C.dragContainer, key: "drag-handle-container" }, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_10__.h)("calcite-handle", { label: this.label, setPosition: this.setPosition, setSize: this.setSize }))) : null;
  }
  renderOpen() {
    const { el, open, openable, parentListEl } = this;
    const dir = (0,_dom_js__WEBPACK_IMPORTED_MODULE_0__.b)(el);
    const icon = openable
      ? open
        ? _utils3_js__WEBPACK_IMPORTED_MODULE_2__.I.open
        : dir === "rtl"
          ? _utils3_js__WEBPACK_IMPORTED_MODULE_2__.I.closedRTL
          : _utils3_js__WEBPACK_IMPORTED_MODULE_2__.I.closedLTR
      : _utils3_js__WEBPACK_IMPORTED_MODULE_2__.I.blank;
    const clickHandler = openable ? this.toggleOpen : this.itemClicked;
    return openable || parentListEl?.openable ? ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_10__.h)("td", { class: _utils3_js__WEBPACK_IMPORTED_MODULE_2__.C.openContainer, key: "open-container", onClick: clickHandler }, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_10__.h)("calcite-icon", { icon: icon, key: icon, scale: "s" }))) : null;
  }
  renderActionsStart() {
    const { label, hasActionsStart } = this;
    return ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_10__.h)("td", { "aria-label": label, class: _utils3_js__WEBPACK_IMPORTED_MODULE_2__.C.actionsStart, hidden: !hasActionsStart, key: "actions-start-container", role: "gridcell",
      // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)
      ref: (el) => (this.actionsStartEl = el) }, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_10__.h)("slot", { name: _utils3_js__WEBPACK_IMPORTED_MODULE_2__.S.actionsStart, onSlotchange: this.handleActionsStartSlotChange })));
  }
  renderActionsEnd() {
    const { label, hasActionsEnd, closable, messages } = this;
    return ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_10__.h)("td", { "aria-label": label, class: _utils3_js__WEBPACK_IMPORTED_MODULE_2__.C.actionsEnd, hidden: !(hasActionsEnd || closable), key: "actions-end-container", role: "gridcell",
      // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)
      ref: (el) => (this.actionsEndEl = el) }, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_10__.h)("slot", { name: _utils3_js__WEBPACK_IMPORTED_MODULE_2__.S.actionsEnd, onSlotchange: this.handleActionsEndSlotChange }), closable ? ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_10__.h)("calcite-action", { appearance: "transparent", icon: _utils3_js__WEBPACK_IMPORTED_MODULE_2__.I.close, key: "close-action", label: messages.close, onClick: this.closeClickHandler, text: messages.close })) : null));
  }
  renderContentStart() {
    const { hasContentStart } = this;
    return ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_10__.h)("div", { class: _utils3_js__WEBPACK_IMPORTED_MODULE_2__.C.contentStart, hidden: !hasContentStart }, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_10__.h)("slot", { name: _utils3_js__WEBPACK_IMPORTED_MODULE_2__.S.contentStart, onSlotchange: this.handleContentStartSlotChange })));
  }
  renderCustomContent() {
    const { hasCustomContent } = this;
    return ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_10__.h)("div", { class: _utils3_js__WEBPACK_IMPORTED_MODULE_2__.C.customContent, hidden: !hasCustomContent }, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_10__.h)("slot", { name: _utils3_js__WEBPACK_IMPORTED_MODULE_2__.S.content, onSlotchange: this.handleContentSlotChange })));
  }
  renderContentEnd() {
    const { hasContentEnd } = this;
    return ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_10__.h)("div", { class: _utils3_js__WEBPACK_IMPORTED_MODULE_2__.C.contentEnd, hidden: !hasContentEnd }, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_10__.h)("slot", { name: _utils3_js__WEBPACK_IMPORTED_MODULE_2__.S.contentEnd, onSlotchange: this.handleContentEndSlotChange })));
  }
  renderContentBottom() {
    const { hasContentBottom, visualLevel } = this;
    return ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_10__.h)("div", { class: _utils3_js__WEBPACK_IMPORTED_MODULE_2__.C.contentBottom, hidden: !hasContentBottom, style: { "--calcite-list-item-spacing-indent-multiplier": `${visualLevel}` } }, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_10__.h)("slot", { name: _utils3_js__WEBPACK_IMPORTED_MODULE_2__.S.contentBottom, onSlotchange: this.handleContentBottomSlotChange })));
  }
  renderDefaultContainer() {
    return ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_10__.h)("div", { class: {
        [_utils3_js__WEBPACK_IMPORTED_MODULE_2__.C.nestedContainer]: true,
        [_utils3_js__WEBPACK_IMPORTED_MODULE_2__.C.nestedContainerHidden]: this.openable && !this.open,
      } }, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_10__.h)("slot", { onSlotchange: this.handleDefaultSlotChange, ref: (el) => (this.defaultSlotEl = el) })));
  }
  renderContentProperties() {
    const { label, description, hasCustomContent } = this;
    return !hasCustomContent && (!!label || !!description) ? ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_10__.h)("div", { class: _utils3_js__WEBPACK_IMPORTED_MODULE_2__.C.content, key: "content" }, label ? ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_10__.h)("div", { class: _utils3_js__WEBPACK_IMPORTED_MODULE_2__.C.label, key: "label" }, label)) : null, description ? ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_10__.h)("div", { class: _utils3_js__WEBPACK_IMPORTED_MODULE_2__.C.description, key: "description" }, description)) : null)) : null;
  }
  renderContentContainer() {
    const { description, label, selectionMode, hasCustomContent } = this;
    const hasCenterContent = hasCustomContent || !!label || !!description;
    const content = [
      this.renderContentStart(),
      this.renderCustomContent(),
      this.renderContentProperties(),
      this.renderContentEnd(),
    ];
    return ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_10__.h)("td", { "aria-label": label, class: {
        [_utils3_js__WEBPACK_IMPORTED_MODULE_2__.C.contentContainer]: true,
        [_utils3_js__WEBPACK_IMPORTED_MODULE_2__.C.contentContainerSelectable]: selectionMode !== "none",
        [_utils3_js__WEBPACK_IMPORTED_MODULE_2__.C.contentContainerHasCenterContent]: hasCenterContent,
      }, key: "content-container", onClick: this.itemClicked, role: "gridcell",
      // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)
      ref: (el) => (this.contentEl = el) }, content));
  }
  render() {
    const { openable, open, level, setPosition, setSize, active, label, selected, selectionAppearance, selectionMode, closed, visualLevel, } = this;
    const showBorder = selectionMode !== "none" && selectionAppearance === "border";
    const borderSelected = showBorder && selected;
    const borderUnselected = showBorder && !selected;
    return ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_10__.h)(_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_10__.Host, null, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_10__.h)("tr", { "aria-expanded": openable ? (0,_dom_js__WEBPACK_IMPORTED_MODULE_0__.t)(open) : null, "aria-label": label, "aria-level": level, "aria-posinset": setPosition, "aria-selected": (0,_dom_js__WEBPACK_IMPORTED_MODULE_0__.t)(selected), "aria-setsize": setSize, class: {
        [_utils3_js__WEBPACK_IMPORTED_MODULE_2__.C.container]: true,
        [_utils3_js__WEBPACK_IMPORTED_MODULE_2__.C.containerBorderSelected]: borderSelected,
        [_utils3_js__WEBPACK_IMPORTED_MODULE_2__.C.containerBorderUnselected]: borderUnselected,
      }, hidden: closed, onFocus: this.focusCellNull, onKeyDown: this.handleItemKeyDown, role: "row", style: { "--calcite-list-item-spacing-indent-multiplier": `${visualLevel}` }, tabIndex: active ? 0 : -1,
      // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)
      ref: (el) => (this.containerEl = el) }, this.renderDragHandle(), this.renderSelected(), this.renderOpen(), this.renderActionsStart(), this.renderContentContainer(), this.renderActionsEnd()), this.renderContentBottom(), this.renderDefaultContainer()));
  }
  // --------------------------------------------------------------------------
  //
  //  Private Methods
  //
  // --------------------------------------------------------------------------
  emitCalciteInternalListItemChange() {
    this.calciteInternalListItemChange.emit();
  }
  setSelectionDefaults() {
    const { parentListEl, selectionMode, selectionAppearance } = this;
    if (!parentListEl) {
      return;
    }
    if (!selectionMode) {
      this.selectionMode = parentListEl.selectionMode;
    }
    if (!selectionAppearance) {
      this.selectionAppearance = parentListEl.selectionAppearance;
    }
  }
  handleOpenableChange(slotEl) {
    if (!slotEl) {
      return;
    }
    const { parentListEl } = this;
    const listItemChildren = (0,_utils3_js__WEBPACK_IMPORTED_MODULE_2__.g)(slotEl);
    (0,_utils3_js__WEBPACK_IMPORTED_MODULE_2__.u)(listItemChildren);
    const openable = !!listItemChildren.length;
    if (openable && parentListEl && !parentListEl.openable) {
      parentListEl.openable = true;
    }
    this.openable = openable;
    if (!openable) {
      this.open = false;
    }
  }
  static get assetsDirs() { return ["assets"]; }
  get el() { return this; }
  static get watchers() { return {
    "active": ["activeHandler"],
    "closed": ["handleClosedChange"],
    "disabled": ["handleDisabledChange"],
    "selected": ["handleSelectedChange"],
    "messageOverrides": ["onMessagesChange"],
    "effectiveLocale": ["effectiveLocaleChange"]
  }; }
  static get style() { return listItemCss; }
}, [1, "calcite-list-item", {
    "active": [4],
    "closable": [516],
    "closed": [1540],
    "description": [1],
    "disabled": [516],
    "dragHandle": [4, "drag-handle"],
    "label": [1],
    "metadata": [16],
    "open": [1540],
    "setSize": [2, "set-size"],
    "setPosition": [2, "set-position"],
    "selected": [1540],
    "value": [8],
    "selectionMode": [1025, "selection-mode"],
    "selectionAppearance": [1025, "selection-appearance"],
    "messageOverrides": [1040],
    "messages": [1040],
    "effectiveLocale": [32],
    "defaultMessages": [32],
    "level": [32],
    "visualLevel": [32],
    "parentListEl": [32],
    "openable": [32],
    "hasActionsStart": [32],
    "hasActionsEnd": [32],
    "hasCustomContent": [32],
    "hasContentStart": [32],
    "hasContentEnd": [32],
    "hasContentBottom": [32],
    "setFocus": [64]
  }, [[0, "calciteInternalListItemGroupDefaultSlotChange", "handleCalciteInternalListDefaultSlotChanges"], [0, "calciteInternalListDefaultSlotChange", "handleCalciteInternalListDefaultSlotChanges"]]]);
function defineCustomElement$1() {
  if (typeof customElements === "undefined") {
    return;
  }
  const components = ["calcite-list-item", "calcite-action", "calcite-handle", "calcite-icon", "calcite-loader"];
  components.forEach(tagName => { switch (tagName) {
    case "calcite-list-item":
      if (!customElements.get(tagName)) {
        customElements.define(tagName, ListItem);
      }
      break;
    case "calcite-action":
      if (!customElements.get(tagName)) {
        (0,_action_js__WEBPACK_IMPORTED_MODULE_6__.d)();
      }
      break;
    case "calcite-handle":
      if (!customElements.get(tagName)) {
        (0,_handle_js__WEBPACK_IMPORTED_MODULE_7__.d)();
      }
      break;
    case "calcite-icon":
      if (!customElements.get(tagName)) {
        (0,_icon_js__WEBPACK_IMPORTED_MODULE_8__.d)();
      }
      break;
    case "calcite-loader":
      if (!customElements.get(tagName)) {
        (0,_loader_js__WEBPACK_IMPORTED_MODULE_9__.d)();
      }
      break;
  } });
}
defineCustomElement$1();

const CalciteListItem = ListItem;
const defineCustomElement = defineCustomElement$1;




/***/ }),

/***/ "./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/handle.js":
/*!*********************************************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/handle.js ***!
  \*********************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   H: () => (/* binding */ Handle),
/* harmony export */   d: () => (/* binding */ defineCustomElement)
/* harmony export */ });
/* harmony import */ var _stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @stencil/core/internal/client/index.js */ "./node_modules/@esri/calcite-components-react/node_modules/@stencil/core/internal/client/index.js");
/* harmony import */ var _dom_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dom.js */ "./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/dom.js");
/* harmony import */ var _loadable_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./loadable.js */ "./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/loadable.js");
/* harmony import */ var _locale_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./locale.js */ "./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/locale.js");
/* harmony import */ var _t9n_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./t9n.js */ "./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/t9n.js");
/* harmony import */ var _icon_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./icon.js */ "./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/icon.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.11.0
 */







const CSS = {
  handle: "handle",
  handleActivated: "handle--activated",
};
const ICONS = {
  drag: "drag",
};

const handleCss = ":host{display:flex}.handle{display:flex;cursor:move;align-items:center;justify-content:center;align-self:stretch;border-style:none;background-color:transparent;outline-color:transparent;color:var(--calcite-ui-border-input);padding-block:0.75rem;padding-inline:0.25rem;line-height:0}.handle:hover{background-color:var(--calcite-ui-foreground-2);color:var(--calcite-ui-text-1)}.handle:focus{color:var(--calcite-ui-text-1);outline:2px solid var(--calcite-ui-focus-color, var(--calcite-ui-brand));outline-offset:calc(\n            -2px *\n            calc(\n              1 -\n              2 * clamp(\n                0,\n                var(--calcite-ui-focus-offset-invert),\n                1\n              )\n            )\n          )}.handle--activated{background-color:var(--calcite-ui-foreground-3);color:var(--calcite-ui-text-1)}.handle calcite-icon{color:inherit}:host([hidden]){display:none}[hidden]{display:none}";

const Handle = /*@__PURE__*/ (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_5__.proxyCustomElement)(class extends _stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_5__.HTMLElement {
  constructor() {
    super();
    this.__registerHost();
    this.__attachShadow();
    this.calciteHandleNudge = (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_5__.createEvent)(this, "calciteHandleNudge", 6);
    this.calciteInternalHandleChange = (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_5__.createEvent)(this, "calciteInternalHandleChange", 6);
    this.handleKeyDown = (event) => {
      switch (event.key) {
        case " ":
          this.activated = !this.activated;
          event.preventDefault();
          break;
        case "ArrowUp":
          if (!this.activated) {
            return;
          }
          event.preventDefault();
          this.calciteHandleNudge.emit({ direction: "up" });
          break;
        case "ArrowDown":
          if (!this.activated) {
            return;
          }
          event.preventDefault();
          this.calciteHandleNudge.emit({ direction: "down" });
          break;
      }
    };
    this.handleBlur = () => {
      this.activated = false;
    };
    this.activated = false;
    this.dragHandle = undefined;
    this.messages = undefined;
    this.setPosition = undefined;
    this.setSize = undefined;
    this.label = undefined;
    this.messageOverrides = undefined;
    this.effectiveLocale = undefined;
    this.defaultMessages = undefined;
  }
  handleAriaTextChange() {
    const message = this.getAriaText("live");
    if (message) {
      this.calciteInternalHandleChange.emit({
        message,
      });
    }
  }
  onMessagesChange() {
    /* wired up by t9n util */
  }
  //--------------------------------------------------------------------------
  //
  //  Lifecycle
  //
  //--------------------------------------------------------------------------
  connectedCallback() {
    (0,_t9n_js__WEBPACK_IMPORTED_MODULE_3__.c)(this);
    (0,_locale_js__WEBPACK_IMPORTED_MODULE_2__.c)(this);
  }
  async componentWillLoad() {
    (0,_loadable_js__WEBPACK_IMPORTED_MODULE_1__.a)(this);
    await (0,_t9n_js__WEBPACK_IMPORTED_MODULE_3__.s)(this);
  }
  componentDidLoad() {
    (0,_loadable_js__WEBPACK_IMPORTED_MODULE_1__.s)(this);
  }
  disconnectedCallback() {
    (0,_t9n_js__WEBPACK_IMPORTED_MODULE_3__.d)(this);
    (0,_locale_js__WEBPACK_IMPORTED_MODULE_2__.d)(this);
  }
  effectiveLocaleChange() {
    (0,_t9n_js__WEBPACK_IMPORTED_MODULE_3__.u)(this, this.effectiveLocale);
  }
  // --------------------------------------------------------------------------
  //
  //  Methods
  //
  // --------------------------------------------------------------------------
  /** Sets focus on the component. */
  async setFocus() {
    await (0,_loadable_js__WEBPACK_IMPORTED_MODULE_1__.c)(this);
    this.handleButton?.focus();
  }
  // --------------------------------------------------------------------------
  //
  //  Private Methods
  //
  // --------------------------------------------------------------------------
  getAriaText(type) {
    const { setPosition, setSize, label, messages, activated } = this;
    if (!messages || !label || typeof setSize !== "number" || typeof setPosition !== "number") {
      return null;
    }
    const text = type === "label"
      ? activated
        ? messages.dragHandleChange
        : messages.dragHandleIdle
      : activated
        ? messages.dragHandleActive
        : messages.dragHandleCommit;
    const replacePosition = text.replace("{position}", setPosition.toString());
    const replaceLabel = replacePosition.replace("{itemLabel}", label);
    return replaceLabel.replace("{total}", setSize.toString());
  }
  // --------------------------------------------------------------------------
  //
  //  Render Methods
  //
  // --------------------------------------------------------------------------
  render() {
    return (
    // Needs to be a span because of https://github.com/SortableJS/Sortable/issues/1486
    (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_5__.h)("span", { "aria-label": this.getAriaText("label"), "aria-pressed": (0,_dom_js__WEBPACK_IMPORTED_MODULE_0__.t)(this.activated), class: { [CSS.handle]: true, [CSS.handleActivated]: this.activated }, onBlur: this.handleBlur, onKeyDown: this.handleKeyDown, role: "button", tabindex: "0", title: this.messages?.dragHandle,
      // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)
      ref: (el) => {
        this.handleButton = el;
      } }, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_5__.h)("calcite-icon", { icon: ICONS.drag, scale: "s" })));
  }
  static get assetsDirs() { return ["assets"]; }
  get el() { return this; }
  static get watchers() { return {
    "messages": ["handleAriaTextChange"],
    "label": ["handleAriaTextChange"],
    "activated": ["handleAriaTextChange"],
    "setPosition": ["handleAriaTextChange"],
    "setSize": ["handleAriaTextChange"],
    "messageOverrides": ["onMessagesChange"],
    "effectiveLocale": ["effectiveLocaleChange"]
  }; }
  static get style() { return handleCss; }
}, [1, "calcite-handle", {
    "activated": [1540],
    "dragHandle": [513, "drag-handle"],
    "messages": [16],
    "setPosition": [2, "set-position"],
    "setSize": [2, "set-size"],
    "label": [1],
    "messageOverrides": [16],
    "effectiveLocale": [32],
    "defaultMessages": [32],
    "setFocus": [64]
  }]);
function defineCustomElement() {
  if (typeof customElements === "undefined") {
    return;
  }
  const components = ["calcite-handle", "calcite-icon"];
  components.forEach(tagName => { switch (tagName) {
    case "calcite-handle":
      if (!customElements.get(tagName)) {
        customElements.define(tagName, Handle);
      }
      break;
    case "calcite-icon":
      if (!customElements.get(tagName)) {
        (0,_icon_js__WEBPACK_IMPORTED_MODULE_4__.d)();
      }
      break;
  } });
}
defineCustomElement();




/***/ }),

/***/ "./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/loadable.js":
/*!***********************************************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/loadable.js ***!
  \***********************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ setUpLoadableComponent),
/* harmony export */   b: () => (/* binding */ componentLoaded),
/* harmony export */   c: () => (/* binding */ componentFocusable),
/* harmony export */   s: () => (/* binding */ setComponentLoaded)
/* harmony export */ });
/* harmony import */ var _stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @stencil/core/internal/client/index.js */ "./node_modules/@esri/calcite-components-react/node_modules/@stencil/core/internal/client/index.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.11.0
 */


const resolveMap = new WeakMap();
const promiseMap = new WeakMap();
/**
 * This helper util sets up the component for the ability to know when the component has been loaded.
 *
 * This should be used in the `componentWillLoad` lifecycle hook.
 *
 * ```
 * componentWillLoad(): void {
 *   setUpLoadableComponent(this);
 * }
 * ```
 *
 * @param component
 */
function setUpLoadableComponent(component) {
  promiseMap.set(component, new Promise((resolve) => resolveMap.set(component, resolve)));
}
/**
 * This helper util lets the loadable component know that it is now loaded.
 *
 * This should be used in the `componentDidLoad` lifecycle hook.
 *
 * ```
 * componentDidLoad(): void {
 *   setComponentLoaded(this);
 * }
 * ```
 *
 * @param component
 */
function setComponentLoaded(component) {
  resolveMap.get(component)();
}
/**
 * This helper util can be used to ensure a component has been loaded (The "componentDidLoad" Stencil lifecycle method has been called).
 *
 * Requires requires `LoadableComponent` to be implemented.
 *
 * A component developer can await this method before proceeding with any logic that requires a component to be loaded first.
 *
 * ```
 * async myMethod(): Promise<void> {
 *   await componentLoaded(this);
 * }
 * ```
 *
 * @param component
 * @returns Promise<void>
 */
function componentLoaded(component) {
  return promiseMap.get(component);
}
/**
 * This helper util can be used to ensuring the component is loaded and rendered by the browser (The "componentDidLoad" Stencil lifecycle method has been called and any internal elements are focusable).
 *
 * Requires requires `LoadableComponent` to be implemented.
 *
 * A component developer can await this method before proceeding with any logic that requires a component to be loaded first and then an internal element be focused.
 *
 * ```
 * async setFocus(): Promise<void> {
 *   await componentFocusable(this);
 *   this.internalElement?.focus();
 * }
 * ```
 *
 * @param component
 * @returns Promise<void>
 */
async function componentFocusable(component) {
  await componentLoaded(component);
  if (!_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_0__.Build.isBrowser) {
    return;
  }
  (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_0__.forceUpdate)(component);
  return new Promise((resolve) => requestAnimationFrame(() => resolve()));
}




/***/ }),

/***/ "./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/utils3.js":
/*!*********************************************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/utils3.js ***!
  \*********************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   C: () => (/* binding */ CSS),
/* harmony export */   I: () => (/* binding */ ICONS),
/* harmony export */   M: () => (/* binding */ MAX_COLUMNS),
/* harmony export */   S: () => (/* binding */ SLOTS),
/* harmony export */   a: () => (/* binding */ getDepth),
/* harmony export */   g: () => (/* binding */ getListItemChildren),
/* harmony export */   u: () => (/* binding */ updateListItemChildren)
/* harmony export */ });
/* harmony import */ var _stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @stencil/core/internal/client/index.js */ "./node_modules/@esri/calcite-components-react/node_modules/@stencil/core/internal/client/index.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.11.0
 */


const CSS = {
  container: "container",
  containerBorderSelected: "container--border-selected",
  containerBorderUnselected: "container--border-unselected",
  contentContainer: "content-container",
  contentContainerSelectable: "content-container--selectable",
  contentContainerHasCenterContent: "content-container--has-center-content",
  nestedContainer: "nested-container",
  nestedContainerHidden: "nested-container--hidden",
  content: "content",
  customContent: "custom-content",
  actionsStart: "actions-start",
  contentStart: "content-start",
  label: "label",
  description: "description",
  contentEnd: "content-end",
  contentBottom: "content-bottom",
  actionsEnd: "actions-end",
  selectionContainer: "selection-container",
  openContainer: "open-container",
  dragContainer: "drag-container",
};
const SLOTS = {
  actionsStart: "actions-start",
  contentStart: "content-start",
  content: "content",
  contentBottom: "content-bottom",
  contentEnd: "content-end",
  actionsEnd: "actions-end",
};
// Set to zero to extend until the end of the table section.
const MAX_COLUMNS = 0;
const ICONS = {
  selectedMultiple: "check-circle-f",
  selectedSingle: "circle-f",
  unselected: "blank",
  closedLTR: "caret-right",
  closedRTL: "caret-left",
  open: "caret-down",
  blank: "blank",
  close: "x",
};

const listSelector = "calcite-list";
const listItemGroupSelector = "calcite-list-item-group";
const listItemSelector = "calcite-list-item";
function getListItemChildren(slotEl) {
  const assignedElements = slotEl.assignedElements({ flatten: true });
  const listItemGroupChildren = assignedElements.filter((el) => el?.matches(listItemGroupSelector))
    .map((group) => Array.from(group.querySelectorAll(listItemSelector)))
    .reduce((previousValue, currentValue) => [...previousValue, ...currentValue], []);
  const listItemChildren = assignedElements.filter((el) => el?.matches(listItemSelector));
  const listItemListChildren = assignedElements.filter((el) => el?.matches(listSelector))
    .map((list) => Array.from(list.querySelectorAll(listItemSelector)))
    .reduce((previousValue, currentValue) => [...previousValue, ...currentValue], []);
  return [...listItemListChildren, ...listItemGroupChildren, ...listItemChildren];
}
function updateListItemChildren(listItemChildren) {
  listItemChildren.forEach((listItem) => {
    listItem.setPosition = listItemChildren.indexOf(listItem) + 1;
    listItem.setSize = listItemChildren.length;
  });
}
function getDepth(element, includeGroup = false) {
  if (!_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_0__.Build.isBrowser) {
    return 0;
  }
  const expression = includeGroup
    ? "ancestor::calcite-list-item | ancestor::calcite-list-item-group"
    : "ancestor::calcite-list-item";
  const result = document.evaluate(expression, element, null, XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE, null);
  return result.snapshotLength;
}




/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvdmVuZG9ycy1ub2RlX21vZHVsZXNfZXNyaV9jYWxjaXRlLWNvbXBvbmVudHMtcmVhY3Rfbm9kZV9tb2R1bGVzX2VzcmlfY2FsY2l0ZS1jb21wb25lbnRzX2Rpc3RfLTE2NmU3Zi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUMrRztBQUNWO0FBQ2M7QUFDa0I7QUFDdkQ7QUFDb0M7QUFDSjtBQUNyRDtBQUNBO0FBQ0Y7QUFDRTs7QUFFekQsdUNBQXVDLGVBQWUseUJBQXlCLGlCQUFpQiwyQ0FBMkMsbURBQW1ELG9CQUFvQixNQUFNLGFBQWEsc0JBQXNCLHVEQUF1RCx3Q0FBd0MseUdBQXlHLFVBQVUsV0FBVyxzQkFBc0IsYUFBYSxZQUFZLGdEQUFnRCx1Q0FBdUMsd0hBQXdILGFBQWEsc0JBQXNCLGlCQUFpQixlQUFlLGdEQUFnRCxrQkFBa0IsZ0RBQWdELDRCQUE0QixzREFBc0QsOEJBQThCLDBDQUEwQyxrQkFBa0IsYUFBYSxzQkFBc0IsZ0RBQWdELDBCQUEwQixhQUFhLG1CQUFtQixhQUFhLGNBQWMsb0JBQW9CLFlBQVksdUNBQXVDLDhDQUE4QywrQkFBK0IsTUFBTSwwQkFBMEIsa0JBQWtCLHlFQUF5RSxxUEFBcVAseUJBQXlCLGFBQWEsY0FBYyxzQkFBc0IsdUJBQXVCLHVCQUF1QixxQkFBcUIsc0NBQXNDLGtCQUFrQixvQ0FBb0MsdUNBQXVDLHNDQUFzQyw4Q0FBOEMscUJBQXFCLHNCQUFzQixxRUFBcUUsV0FBVyxzQkFBc0IsT0FBTywrQkFBK0IsYUFBYSw0QkFBNEIsK0JBQStCLGVBQWUsMkJBQTJCLGFBQWEseUJBQXlCLDRCQUE0QixjQUFjLGdCQUFnQixhQUFhLHNCQUFzQixnREFBZ0Qsd0hBQXdILDBHQUEwRyxjQUFjLHFCQUFxQixhQUFhLHVCQUF1QiwwQ0FBMEMsNkdBQTZHLGFBQWEsbUJBQW1CLHFDQUFxQyxlQUFlLDRFQUE0RSxzQkFBc0Is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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQytEOztBQUUvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQsZUFBZTtBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsT0FBTyx5RUFBSztBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRW9JIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AZXNyaS9jYWxjaXRlLWNvbXBvbmVudHMtcmVhY3Qvbm9kZV9tb2R1bGVzL0Blc3JpL2NhbGNpdGUtY29tcG9uZW50cy9kaXN0L2NvbXBvbmVudHMvY2FsY2l0ZS1saXN0LWl0ZW0uanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AZXNyaS9jYWxjaXRlLWNvbXBvbmVudHMtcmVhY3Qvbm9kZV9tb2R1bGVzL0Blc3JpL2NhbGNpdGUtY29tcG9uZW50cy9kaXN0L2NvbXBvbmVudHMvaGFuZGxlLmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvQGVzcmkvY2FsY2l0ZS1jb21wb25lbnRzLXJlYWN0L25vZGVfbW9kdWxlcy9AZXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvZGlzdC9jb21wb25lbnRzL2xvYWRhYmxlLmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvQGVzcmkvY2FsY2l0ZS1jb21wb25lbnRzLXJlYWN0L25vZGVfbW9kdWxlcy9AZXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvZGlzdC9jb21wb25lbnRzL3V0aWxzMy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL2Jsb2IvbWFpbi9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxuICogdjEuMTEuMFxuICovXG5pbXBvcnQgeyBwcm94eUN1c3RvbUVsZW1lbnQsIEhUTUxFbGVtZW50LCBjcmVhdGVFdmVudCwgaCwgSG9zdCB9IGZyb20gJ0BzdGVuY2lsL2NvcmUvaW50ZXJuYWwvY2xpZW50L2luZGV4LmpzJztcbmltcG9ydCB7IGUgYXMgc2xvdENoYW5nZUhhc0Fzc2lnbmVkRWxlbWVudCwgYiBhcyBnZXRFbGVtZW50RGlyLCB0IGFzIHRvQXJpYUJvb2xlYW4gfSBmcm9tICcuL2RvbS5qcyc7XG5pbXBvcnQgeyBjIGFzIGNvbm5lY3RJbnRlcmFjdGl2ZSwgdSBhcyB1cGRhdGVIb3N0SW50ZXJhY3Rpb24sIGQgYXMgZGlzY29ubmVjdEludGVyYWN0aXZlIH0gZnJvbSAnLi9pbnRlcmFjdGl2ZS5qcyc7XG5pbXBvcnQgeyBhIGFzIGdldERlcHRoLCBDIGFzIENTUywgSSBhcyBJQ09OUywgUyBhcyBTTE9UUywgZyBhcyBnZXRMaXN0SXRlbUNoaWxkcmVuLCB1IGFzIHVwZGF0ZUxpc3RJdGVtQ2hpbGRyZW4gfSBmcm9tICcuL3V0aWxzMy5qcyc7XG5pbXBvcnQgeyBjIGFzIGNvbm5lY3RMb2NhbGl6ZWQsIGQgYXMgZGlzY29ubmVjdExvY2FsaXplZCB9IGZyb20gJy4vbG9jYWxlLmpzJztcbmltcG9ydCB7IHUgYXMgdXBkYXRlTWVzc2FnZXMsIGMgYXMgY29ubmVjdE1lc3NhZ2VzLCBzIGFzIHNldFVwTWVzc2FnZXMsIGQgYXMgZGlzY29ubmVjdE1lc3NhZ2VzIH0gZnJvbSAnLi90OW4uanMnO1xuaW1wb3J0IHsgYSBhcyBzZXRVcExvYWRhYmxlQ29tcG9uZW50LCBzIGFzIHNldENvbXBvbmVudExvYWRlZCwgYyBhcyBjb21wb25lbnRGb2N1c2FibGUgfSBmcm9tICcuL2xvYWRhYmxlLmpzJztcbmltcG9ydCB7IGQgYXMgZGVmaW5lQ3VzdG9tRWxlbWVudCQ1IH0gZnJvbSAnLi9hY3Rpb24uanMnO1xuaW1wb3J0IHsgZCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JDQgfSBmcm9tICcuL2hhbmRsZS5qcyc7XG5pbXBvcnQgeyBkIGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkMyB9IGZyb20gJy4vaWNvbi5qcyc7XG5pbXBvcnQgeyBkIGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkMiB9IGZyb20gJy4vbG9hZGVyLmpzJztcblxuY29uc3QgbGlzdEl0ZW1Dc3MgPSBcIjpob3N0KFtkaXNhYmxlZF0pe2N1cnNvcjpkZWZhdWx0Oy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lO29wYWNpdHk6dmFyKC0tY2FsY2l0ZS11aS1vcGFjaXR5LWRpc2FibGVkKX06aG9zdChbZGlzYWJsZWRdKSAqLDpob3N0KFtkaXNhYmxlZF0pIDo6c2xvdHRlZCgqKXtwb2ludGVyLWV2ZW50czpub25lfTpob3N0e2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47LS1jYWxjaXRlLWxpc3QtaXRlbS1pY29uLWNvbG9yOnZhcigtLWNhbGNpdGUtdWktYnJhbmQpOy0tY2FsY2l0ZS1saXN0LWl0ZW0tc3BhY2luZy1pbmRlbnQ6MXJlbX06aG9zdChbZGlzYWJsZWRdKSA6OnNsb3R0ZWQoW2NhbGNpdGUtaHlkcmF0ZWRdW2Rpc2FibGVkXSksOmhvc3QoW2Rpc2FibGVkXSkgW2NhbGNpdGUtaHlkcmF0ZWRdW2Rpc2FibGVkXXtvcGFjaXR5OjF9LmNvbnRhaW5lcntib3gtc2l6aW5nOmJvcmRlci1ib3g7ZGlzcGxheTpmbGV4O2ZsZXg6MSAxIDAlO2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS11aS1mb3JlZ3JvdW5kLTEpO2ZvbnQtZmFtaWx5OnZhcigtLWNhbGNpdGUtc2Fucy1mYW1pbHkpO3BhZGRpbmctaW5saW5lLXN0YXJ0OmNhbGModmFyKC0tY2FsY2l0ZS1saXN0LWl0ZW0tc3BhY2luZy1pbmRlbnQpICogdmFyKC0tY2FsY2l0ZS1saXN0LWl0ZW0tc3BhY2luZy1pbmRlbnQtbXVsdGlwbGllcikpfS5jb250YWluZXIgKntib3gtc2l6aW5nOmJvcmRlci1ib3h9LmNvbnRhaW5lcjpob3ZlcntjdXJzb3I6cG9pbnRlcjtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtdWktZm9yZWdyb3VuZC0yKX0uY29udGFpbmVyOmFjdGl2ZXtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtdWktZm9yZWdyb3VuZC0xKX0uY29udGFpbmVyLS1ib3JkZXItc2VsZWN0ZWR7Ym9yZGVyLWlubGluZS1zdGFydDo0cHggc29saWQgdmFyKC0tY2FsY2l0ZS11aS1icmFuZCl9LmNvbnRhaW5lci0tYm9yZGVyLXVuc2VsZWN0ZWR7Ym9yZGVyLWlubGluZS1zdGFydDo0cHggc29saWQgdHJhbnNwYXJlbnR9Lm5lc3RlZC1jb250YWluZXJ7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtdWktZm9yZWdyb3VuZC0xKX0ubmVzdGVkLWNvbnRhaW5lci0taGlkZGVue2Rpc3BsYXk6bm9uZX0uY29udGVudC1jb250YWluZXJ7ZGlzcGxheTpmbGV4O2ZsZXg6MSAxIGF1dG87YWxpZ24taXRlbXM6c3RyZXRjaDtwYWRkaW5nOjBweDtmb250LWZhbWlseTp2YXIoLS1jYWxjaXRlLXNhbnMtZmFtaWx5KTtmb250LXdlaWdodDp2YXIoLS1jYWxjaXRlLWZvbnQtd2VpZ2h0LW5vcm1hbCk7Y29sb3I6dmFyKC0tY2FsY2l0ZS11aS10ZXh0LTIpfXRyLHRke291dGxpbmUtY29sb3I6dHJhbnNwYXJlbnR9dHI6Zm9jdXMsdGQ6Zm9jdXN7b3V0bGluZToycHggc29saWQgdmFyKC0tY2FsY2l0ZS11aS1mb2N1cy1jb2xvciwgdmFyKC0tY2FsY2l0ZS11aS1icmFuZCkpO291dGxpbmUtb2Zmc2V0OmNhbGMoXFxuICAgICAgICAgICAgLTJweCAqXFxuICAgICAgICAgICAgY2FsYyhcXG4gICAgICAgICAgICAgIDEgLVxcbiAgICAgICAgICAgICAgMiAqIGNsYW1wKFxcbiAgICAgICAgICAgICAgICAwLFxcbiAgICAgICAgICAgICAgICB2YXIoLS1jYWxjaXRlLXVpLWZvY3VzLW9mZnNldC1pbnZlcnQpLFxcbiAgICAgICAgICAgICAgICAxXFxuICAgICAgICAgICAgICApXFxuICAgICAgICAgICAgKVxcbiAgICAgICAgICApfS5jb250ZW50LC5jdXN0b20tY29udGVudHtkaXNwbGF5OmZsZXg7ZmxleDoxIDEgYXV0bztmbGV4LWRpcmVjdGlvbjpjb2x1bW47anVzdGlmeS1jb250ZW50OmNlbnRlcjtwYWRkaW5nLWlubGluZTowLjc1cmVtO3BhZGRpbmctYmxvY2s6MC41cmVtO2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0tMik7bGluZS1oZWlnaHQ6MS4zNzV9LmxhYmVsLC5kZXNjcmlwdGlvbiwuY29udGVudC1ib3R0b217Zm9udC1mYW1pbHk6dmFyKC0tY2FsY2l0ZS1zYW5zLWZhbWlseSk7Zm9udC1zaXplOnZhcigtLWNhbGNpdGUtZm9udC1zaXplLS0yKTtmb250LXdlaWdodDp2YXIoLS1jYWxjaXRlLWZvbnQtd2VpZ2h0LW5vcm1hbCk7d29yZC13cmFwOmJyZWFrLXdvcmQ7d29yZC1icmVhazpicmVhay13b3JkfS5sYWJlbDpvbmx5LWNoaWxkLC5kZXNjcmlwdGlvbjpvbmx5LWNoaWxkLC5jb250ZW50LWJvdHRvbTpvbmx5LWNoaWxke21hcmdpbjowcHg7cGFkZGluZy1ibG9jazowLjI1cmVtfS5sYWJlbHtjb2xvcjp2YXIoLS1jYWxjaXRlLXVpLXRleHQtMSl9LmRlc2NyaXB0aW9ue21hcmdpbi1ibG9jay1zdGFydDowLjEyNXJlbTtjb2xvcjp2YXIoLS1jYWxjaXRlLXVpLXRleHQtMyl9LmNvbnRlbnQtc3RhcnR7anVzdGlmeS1jb250ZW50OmZsZXgtc3RhcnR9LmNvbnRlbnQtZW5ke2p1c3RpZnktY29udGVudDpmbGV4LWVuZH0uY29udGVudC1zdGFydCwuY29udGVudC1lbmR7ZmxleDoxIDEgYXV0b30uY29udGVudC1ib3R0b217ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtdWktZm9yZWdyb3VuZC0xKTtwYWRkaW5nLWlubGluZS1zdGFydDpjYWxjKHZhcigtLWNhbGNpdGUtbGlzdC1pdGVtLXNwYWNpbmctaW5kZW50KSAqIHZhcigtLWNhbGNpdGUtbGlzdC1pdGVtLXNwYWNpbmctaW5kZW50LW11bHRpcGxpZXIpKX0uY29udGVudC1jb250YWluZXItLWhhcy1jZW50ZXItY29udGVudCAuY29udGVudC1zdGFydCwuY29udGVudC1jb250YWluZXItLWhhcy1jZW50ZXItY29udGVudCAuY29udGVudC1lbmR7ZmxleDowIDEgYXV0b30uc2VsZWN0aW9uLWNvbnRhaW5lcntkaXNwbGF5OmZsZXg7cGFkZGluZy1pbmxpbmU6MC43NXJlbTtjb2xvcjp2YXIoLS1jYWxjaXRlLWxpc3QtaXRlbS1pY29uLWNvbG9yKX0uYWN0aW9ucy1zdGFydCwuYWN0aW9ucy1lbmQsLmNvbnRlbnQtc3RhcnQsLmNvbnRlbnQtZW5kLC5zZWxlY3Rpb24tY29udGFpbmVyLC5kcmFnLWNvbnRhaW5lciwub3Blbi1jb250YWluZXJ7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcn0ub3Blbi1jb250YWluZXIsLnNlbGVjdGlvbi1jb250YWluZXJ7Y3Vyc29yOnBvaW50ZXJ9LmNvbnRlbnQtc3RhcnQgOjpzbG90dGVkKGNhbGNpdGUtaWNvbiksLmNvbnRlbnQtZW5kIDo6c2xvdHRlZChjYWxjaXRlLWljb24pe21hcmdpbi1pbmxpbmU6MC43NXJlbTthbGlnbi1zZWxmOmNlbnRlcn0uYWN0aW9ucy1zdGFydCA6OnNsb3R0ZWQoY2FsY2l0ZS1hY3Rpb24pLC5hY3Rpb25zLXN0YXJ0IDo6c2xvdHRlZChjYWxjaXRlLWFjdGlvbi1tZW51KSwuYWN0aW9ucy1zdGFydCA6OnNsb3R0ZWQoY2FsY2l0ZS1oYW5kbGUpLC5hY3Rpb25zLXN0YXJ0IDo6c2xvdHRlZChjYWxjaXRlLWRyb3Bkb3duKSwuYWN0aW9ucy1lbmQgOjpzbG90dGVkKGNhbGNpdGUtYWN0aW9uKSwuYWN0aW9ucy1lbmQgOjpzbG90dGVkKGNhbGNpdGUtYWN0aW9uLW1lbnUpLC5hY3Rpb25zLWVuZCA6OnNsb3R0ZWQoY2FsY2l0ZS1oYW5kbGUpLC5hY3Rpb25zLWVuZCA6OnNsb3R0ZWQoY2FsY2l0ZS1kcm9wZG93bil7YWxpZ24tc2VsZjpzdHJldGNoO2NvbG9yOmluaGVyaXR9OjpzbG90dGVkKGNhbGNpdGUtbGlzdC1pdGVtKXtib3JkZXItd2lkdGg6MHB4O2JvcmRlci1ibG9jay1zdGFydC13aWR0aDoxcHg7Ym9yZGVyLXN0eWxlOnNvbGlkO2JvcmRlci1jb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWJvcmRlci0zKX06aG9zdChbaGlkZGVuXSl7ZGlzcGxheTpub25lfVtoaWRkZW5de2Rpc3BsYXk6bm9uZX1cIjtcblxuY29uc3QgZm9jdXNNYXAgPSBuZXcgTWFwKCk7XG5jb25zdCBsaXN0U2VsZWN0b3IgPSBcImNhbGNpdGUtbGlzdFwiO1xuY29uc3QgTGlzdEl0ZW0gPSAvKkBfX1BVUkVfXyovIHByb3h5Q3VzdG9tRWxlbWVudChjbGFzcyBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl9fcmVnaXN0ZXJIb3N0KCk7XG4gICAgdGhpcy5fX2F0dGFjaFNoYWRvdygpO1xuICAgIHRoaXMuY2FsY2l0ZUxpc3RJdGVtU2VsZWN0ID0gY3JlYXRlRXZlbnQodGhpcywgXCJjYWxjaXRlTGlzdEl0ZW1TZWxlY3RcIiwgNik7XG4gICAgdGhpcy5jYWxjaXRlTGlzdEl0ZW1DbG9zZSA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiY2FsY2l0ZUxpc3RJdGVtQ2xvc2VcIiwgNik7XG4gICAgdGhpcy5jYWxjaXRlSW50ZXJuYWxMaXN0SXRlbVNlbGVjdCA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiY2FsY2l0ZUludGVybmFsTGlzdEl0ZW1TZWxlY3RcIiwgNik7XG4gICAgdGhpcy5jYWxjaXRlSW50ZXJuYWxMaXN0SXRlbUFjdGl2ZSA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiY2FsY2l0ZUludGVybmFsTGlzdEl0ZW1BY3RpdmVcIiwgNik7XG4gICAgdGhpcy5jYWxjaXRlSW50ZXJuYWxGb2N1c1ByZXZpb3VzSXRlbSA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiY2FsY2l0ZUludGVybmFsRm9jdXNQcmV2aW91c0l0ZW1cIiwgNik7XG4gICAgdGhpcy5jYWxjaXRlSW50ZXJuYWxMaXN0SXRlbUNoYW5nZSA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiY2FsY2l0ZUludGVybmFsTGlzdEl0ZW1DaGFuZ2VcIiwgNik7XG4gICAgdGhpcy5jbG9zZUNsaWNrSGFuZGxlciA9ICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2VkID0gdHJ1ZTtcbiAgICAgIHRoaXMuY2FsY2l0ZUxpc3RJdGVtQ2xvc2UuZW1pdCgpO1xuICAgIH07XG4gICAgdGhpcy5oYW5kbGVDb250ZW50U2xvdENoYW5nZSA9IChldmVudCkgPT4ge1xuICAgICAgdGhpcy5oYXNDdXN0b21Db250ZW50ID0gc2xvdENoYW5nZUhhc0Fzc2lnbmVkRWxlbWVudChldmVudCk7XG4gICAgfTtcbiAgICB0aGlzLmhhbmRsZUFjdGlvbnNTdGFydFNsb3RDaGFuZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMuaGFzQWN0aW9uc1N0YXJ0ID0gc2xvdENoYW5nZUhhc0Fzc2lnbmVkRWxlbWVudChldmVudCk7XG4gICAgfTtcbiAgICB0aGlzLmhhbmRsZUFjdGlvbnNFbmRTbG90Q2hhbmdlID0gKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLmhhc0FjdGlvbnNFbmQgPSBzbG90Q2hhbmdlSGFzQXNzaWduZWRFbGVtZW50KGV2ZW50KTtcbiAgICB9O1xuICAgIHRoaXMuaGFuZGxlQ29udGVudFN0YXJ0U2xvdENoYW5nZSA9IChldmVudCkgPT4ge1xuICAgICAgdGhpcy5oYXNDb250ZW50U3RhcnQgPSBzbG90Q2hhbmdlSGFzQXNzaWduZWRFbGVtZW50KGV2ZW50KTtcbiAgICB9O1xuICAgIHRoaXMuaGFuZGxlQ29udGVudEVuZFNsb3RDaGFuZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMuaGFzQ29udGVudEVuZCA9IHNsb3RDaGFuZ2VIYXNBc3NpZ25lZEVsZW1lbnQoZXZlbnQpO1xuICAgIH07XG4gICAgdGhpcy5oYW5kbGVDb250ZW50Qm90dG9tU2xvdENoYW5nZSA9IChldmVudCkgPT4ge1xuICAgICAgdGhpcy5oYXNDb250ZW50Qm90dG9tID0gc2xvdENoYW5nZUhhc0Fzc2lnbmVkRWxlbWVudChldmVudCk7XG4gICAgfTtcbiAgICB0aGlzLmhhbmRsZURlZmF1bHRTbG90Q2hhbmdlID0gKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLmhhbmRsZU9wZW5hYmxlQ2hhbmdlKGV2ZW50LnRhcmdldCk7XG4gICAgfTtcbiAgICB0aGlzLnRvZ2dsZU9wZW4gPSAoKSA9PiB7XG4gICAgICB0aGlzLm9wZW4gPSAhdGhpcy5vcGVuO1xuICAgIH07XG4gICAgdGhpcy5pdGVtQ2xpY2tlZCA9IChldmVudCkgPT4ge1xuICAgICAgaWYgKGV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy50b2dnbGVTZWxlY3RlZCgpO1xuICAgICAgdGhpcy5jYWxjaXRlSW50ZXJuYWxMaXN0SXRlbUFjdGl2ZS5lbWl0KCk7XG4gICAgfTtcbiAgICB0aGlzLnRvZ2dsZVNlbGVjdGVkID0gKCkgPT4ge1xuICAgICAgY29uc3QgeyBzZWxlY3Rpb25Nb2RlLCBzZWxlY3RlZCB9ID0gdGhpcztcbiAgICAgIGlmICh0aGlzLmRpc2FibGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChzZWxlY3Rpb25Nb2RlID09PSBcIm11bHRpcGxlXCIgfHwgc2VsZWN0aW9uTW9kZSA9PT0gXCJzaW5nbGVcIikge1xuICAgICAgICB0aGlzLnNlbGVjdGVkID0gIXNlbGVjdGVkO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoc2VsZWN0aW9uTW9kZSA9PT0gXCJzaW5nbGUtcGVyc2lzdFwiKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgdGhpcy5jYWxjaXRlTGlzdEl0ZW1TZWxlY3QuZW1pdCgpO1xuICAgIH07XG4gICAgdGhpcy5oYW5kbGVJdGVtS2V5RG93biA9IChldmVudCkgPT4ge1xuICAgICAgaWYgKGV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgeyBrZXkgfSA9IGV2ZW50O1xuICAgICAgY29uc3QgY29tcG9zZWRQYXRoID0gZXZlbnQuY29tcG9zZWRQYXRoKCk7XG4gICAgICBjb25zdCB7IGNvbnRhaW5lckVsLCBjb250ZW50RWwsIGFjdGlvbnNTdGFydEVsLCBhY3Rpb25zRW5kRWwsIG9wZW4sIG9wZW5hYmxlIH0gPSB0aGlzO1xuICAgICAgY29uc3QgY2VsbHMgPSBbYWN0aW9uc1N0YXJ0RWwsIGNvbnRlbnRFbCwgYWN0aW9uc0VuZEVsXS5maWx0ZXIoQm9vbGVhbik7XG4gICAgICBjb25zdCBjdXJyZW50SW5kZXggPSBjZWxscy5maW5kSW5kZXgoKGNlbGwpID0+IGNvbXBvc2VkUGF0aC5pbmNsdWRlcyhjZWxsKSk7XG4gICAgICBpZiAoa2V5ID09PSBcIkVudGVyXCIgJiZcbiAgICAgICAgIWNvbXBvc2VkUGF0aC5pbmNsdWRlcyhhY3Rpb25zU3RhcnRFbCkgJiZcbiAgICAgICAgIWNvbXBvc2VkUGF0aC5pbmNsdWRlcyhhY3Rpb25zRW5kRWwpKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMudG9nZ2xlU2VsZWN0ZWQoKTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGtleSA9PT0gXCJBcnJvd1JpZ2h0XCIpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgY29uc3QgbmV4dEluZGV4ID0gY3VycmVudEluZGV4ICsgMTtcbiAgICAgICAgaWYgKGN1cnJlbnRJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICBpZiAoIW9wZW4gJiYgb3BlbmFibGUpIHtcbiAgICAgICAgICAgIHRoaXMub3BlbiA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmZvY3VzQ2VsbChudWxsKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZiAoY2VsbHNbMF0pIHtcbiAgICAgICAgICAgIHRoaXMuZm9jdXNDZWxsKGNlbGxzWzBdKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY2VsbHNbY3VycmVudEluZGV4XSAmJiBjZWxsc1tuZXh0SW5kZXhdKSB7XG4gICAgICAgICAgdGhpcy5mb2N1c0NlbGwoY2VsbHNbbmV4dEluZGV4XSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGtleSA9PT0gXCJBcnJvd0xlZnRcIikge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBjb25zdCBwcmV2SW5kZXggPSBjdXJyZW50SW5kZXggLSAxO1xuICAgICAgICBpZiAoY3VycmVudEluZGV4ID09PSAtMSkge1xuICAgICAgICAgIHRoaXMuZm9jdXNDZWxsKG51bGwpO1xuICAgICAgICAgIGlmIChvcGVuICYmIG9wZW5hYmxlKSB7XG4gICAgICAgICAgICB0aGlzLm9wZW4gPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNhbGNpdGVJbnRlcm5hbEZvY3VzUHJldmlvdXNJdGVtLmVtaXQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY3VycmVudEluZGV4ID09PSAwKSB7XG4gICAgICAgICAgdGhpcy5mb2N1c0NlbGwobnVsbCk7XG4gICAgICAgICAgY29udGFpbmVyRWwuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjZWxsc1tjdXJyZW50SW5kZXhdICYmIGNlbGxzW3ByZXZJbmRleF0pIHtcbiAgICAgICAgICB0aGlzLmZvY3VzQ2VsbChjZWxsc1twcmV2SW5kZXhdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5mb2N1c0NlbGxOdWxsID0gKCkgPT4ge1xuICAgICAgdGhpcy5mb2N1c0NlbGwobnVsbCk7XG4gICAgfTtcbiAgICB0aGlzLmZvY3VzQ2VsbCA9IChmb2N1c0VsLCBzYXZlRm9jdXNJbmRleCA9IHRydWUpID0+IHtcbiAgICAgIGNvbnN0IHsgY29udGVudEVsLCBhY3Rpb25zU3RhcnRFbCwgYWN0aW9uc0VuZEVsLCBwYXJlbnRMaXN0RWwgfSA9IHRoaXM7XG4gICAgICBpZiAoc2F2ZUZvY3VzSW5kZXgpIHtcbiAgICAgICAgZm9jdXNNYXAuc2V0KHBhcmVudExpc3RFbCwgbnVsbCk7XG4gICAgICB9XG4gICAgICBbYWN0aW9uc1N0YXJ0RWwsIGNvbnRlbnRFbCwgYWN0aW9uc0VuZEVsXS5maWx0ZXIoQm9vbGVhbikuZm9yRWFjaCgodGFibGVDZWxsLCBjZWxsSW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgdGFiSW5kZXhBdHRyID0gXCJ0YWJpbmRleFwiO1xuICAgICAgICBpZiAodGFibGVDZWxsID09PSBmb2N1c0VsKSB7XG4gICAgICAgICAgdGFibGVDZWxsLnNldEF0dHJpYnV0ZSh0YWJJbmRleEF0dHIsIFwiMFwiKTtcbiAgICAgICAgICBzYXZlRm9jdXNJbmRleCAmJiBmb2N1c01hcC5zZXQocGFyZW50TGlzdEVsLCBjZWxsSW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHRhYmxlQ2VsbC5yZW1vdmVBdHRyaWJ1dGUodGFiSW5kZXhBdHRyKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBmb2N1c0VsPy5mb2N1cygpO1xuICAgIH07XG4gICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICB0aGlzLmNsb3NhYmxlID0gZmFsc2U7XG4gICAgdGhpcy5jbG9zZWQgPSBmYWxzZTtcbiAgICB0aGlzLmRlc2NyaXB0aW9uID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB0aGlzLmRyYWdIYW5kbGUgPSBmYWxzZTtcbiAgICB0aGlzLmxhYmVsID0gdW5kZWZpbmVkO1xuICAgIHRoaXMubWV0YWRhdGEgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5vcGVuID0gZmFsc2U7XG4gICAgdGhpcy5zZXRTaXplID0gbnVsbDtcbiAgICB0aGlzLnNldFBvc2l0aW9uID0gbnVsbDtcbiAgICB0aGlzLnNlbGVjdGVkID0gZmFsc2U7XG4gICAgdGhpcy52YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnNlbGVjdGlvbk1vZGUgPSBudWxsO1xuICAgIHRoaXMuc2VsZWN0aW9uQXBwZWFyYW5jZSA9IG51bGw7XG4gICAgdGhpcy5tZXNzYWdlT3ZlcnJpZGVzID0gdW5kZWZpbmVkO1xuICAgIHRoaXMubWVzc2FnZXMgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5lZmZlY3RpdmVMb2NhbGUgPSBcIlwiO1xuICAgIHRoaXMuZGVmYXVsdE1lc3NhZ2VzID0gdW5kZWZpbmVkO1xuICAgIHRoaXMubGV2ZWwgPSBudWxsO1xuICAgIHRoaXMudmlzdWFsTGV2ZWwgPSBudWxsO1xuICAgIHRoaXMucGFyZW50TGlzdEVsID0gdW5kZWZpbmVkO1xuICAgIHRoaXMub3BlbmFibGUgPSBmYWxzZTtcbiAgICB0aGlzLmhhc0FjdGlvbnNTdGFydCA9IGZhbHNlO1xuICAgIHRoaXMuaGFzQWN0aW9uc0VuZCA9IGZhbHNlO1xuICAgIHRoaXMuaGFzQ3VzdG9tQ29udGVudCA9IGZhbHNlO1xuICAgIHRoaXMuaGFzQ29udGVudFN0YXJ0ID0gZmFsc2U7XG4gICAgdGhpcy5oYXNDb250ZW50RW5kID0gZmFsc2U7XG4gICAgdGhpcy5oYXNDb250ZW50Qm90dG9tID0gZmFsc2U7XG4gIH1cbiAgYWN0aXZlSGFuZGxlcihhY3RpdmUpIHtcbiAgICBpZiAoIWFjdGl2ZSkge1xuICAgICAgdGhpcy5mb2N1c0NlbGwobnVsbCwgZmFsc2UpO1xuICAgIH1cbiAgfVxuICBoYW5kbGVDbG9zZWRDaGFuZ2UoKSB7XG4gICAgdGhpcy5lbWl0Q2FsY2l0ZUludGVybmFsTGlzdEl0ZW1DaGFuZ2UoKTtcbiAgfVxuICBoYW5kbGVEaXNhYmxlZENoYW5nZSgpIHtcbiAgICB0aGlzLmVtaXRDYWxjaXRlSW50ZXJuYWxMaXN0SXRlbUNoYW5nZSgpO1xuICB9XG4gIGhhbmRsZVNlbGVjdGVkQ2hhbmdlKCkge1xuICAgIHRoaXMuY2FsY2l0ZUludGVybmFsTGlzdEl0ZW1TZWxlY3QuZW1pdCgpO1xuICB9XG4gIG9uTWVzc2FnZXNDaGFuZ2UoKSB7XG4gICAgLyogd2lyZWQgdXAgYnkgdDluIHV0aWwgKi9cbiAgfVxuICBoYW5kbGVDYWxjaXRlSW50ZXJuYWxMaXN0RGVmYXVsdFNsb3RDaGFuZ2VzKGV2ZW50KSB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgdGhpcy5oYW5kbGVPcGVuYWJsZUNoYW5nZSh0aGlzLmRlZmF1bHRTbG90RWwpO1xuICB9XG4gIGVmZmVjdGl2ZUxvY2FsZUNoYW5nZSgpIHtcbiAgICB1cGRhdGVNZXNzYWdlcyh0aGlzLCB0aGlzLmVmZmVjdGl2ZUxvY2FsZSk7XG4gIH1cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy9cbiAgLy8gIExpZmVjeWNsZVxuICAvL1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBjb25uZWN0SW50ZXJhY3RpdmUodGhpcyk7XG4gICAgY29ubmVjdExvY2FsaXplZCh0aGlzKTtcbiAgICBjb25uZWN0TWVzc2FnZXModGhpcyk7XG4gICAgY29uc3QgeyBlbCB9ID0gdGhpcztcbiAgICB0aGlzLnBhcmVudExpc3RFbCA9IGVsLmNsb3Nlc3QobGlzdFNlbGVjdG9yKTtcbiAgICB0aGlzLmxldmVsID0gZ2V0RGVwdGgoZWwpICsgMTtcbiAgICB0aGlzLnZpc3VhbExldmVsID0gZ2V0RGVwdGgoZWwsIHRydWUpO1xuICAgIHRoaXMuc2V0U2VsZWN0aW9uRGVmYXVsdHMoKTtcbiAgfVxuICBhc3luYyBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICBzZXRVcExvYWRhYmxlQ29tcG9uZW50KHRoaXMpO1xuICAgIGF3YWl0IHNldFVwTWVzc2FnZXModGhpcyk7XG4gIH1cbiAgY29tcG9uZW50RGlkTG9hZCgpIHtcbiAgICBzZXRDb21wb25lbnRMb2FkZWQodGhpcyk7XG4gIH1cbiAgY29tcG9uZW50RGlkUmVuZGVyKCkge1xuICAgIHVwZGF0ZUhvc3RJbnRlcmFjdGlvbih0aGlzKTtcbiAgfVxuICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBkaXNjb25uZWN0SW50ZXJhY3RpdmUodGhpcyk7XG4gICAgZGlzY29ubmVjdExvY2FsaXplZCh0aGlzKTtcbiAgICBkaXNjb25uZWN0TWVzc2FnZXModGhpcyk7XG4gIH1cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy9cbiAgLy8gIFB1YmxpYyBNZXRob2RzXG4gIC8vXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8qKiBTZXRzIGZvY3VzIG9uIHRoZSBjb21wb25lbnQuICovXG4gIGFzeW5jIHNldEZvY3VzKCkge1xuICAgIGF3YWl0IGNvbXBvbmVudEZvY3VzYWJsZSh0aGlzKTtcbiAgICBjb25zdCB7IGNvbnRhaW5lckVsLCBjb250ZW50RWwsIGFjdGlvbnNTdGFydEVsLCBhY3Rpb25zRW5kRWwsIHBhcmVudExpc3RFbCB9ID0gdGhpcztcbiAgICBjb25zdCBmb2N1c0luZGV4ID0gZm9jdXNNYXAuZ2V0KHBhcmVudExpc3RFbCk7XG4gICAgaWYgKHR5cGVvZiBmb2N1c0luZGV4ID09PSBcIm51bWJlclwiKSB7XG4gICAgICBjb25zdCBjZWxscyA9IFthY3Rpb25zU3RhcnRFbCwgY29udGVudEVsLCBhY3Rpb25zRW5kRWxdLmZpbHRlcihCb29sZWFuKTtcbiAgICAgIGlmIChjZWxsc1tmb2N1c0luZGV4XSkge1xuICAgICAgICB0aGlzLmZvY3VzQ2VsbChjZWxsc1tmb2N1c0luZGV4XSk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgY29udGFpbmVyRWw/LmZvY3VzKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnRhaW5lckVsPy5mb2N1cygpO1xuICB9XG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vXG4gIC8vICBSZW5kZXIgTWV0aG9kc1xuICAvL1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICByZW5kZXJTZWxlY3RlZCgpIHtcbiAgICBjb25zdCB7IHNlbGVjdGVkLCBzZWxlY3Rpb25Nb2RlLCBzZWxlY3Rpb25BcHBlYXJhbmNlIH0gPSB0aGlzO1xuICAgIGlmIChzZWxlY3Rpb25Nb2RlID09PSBcIm5vbmVcIiB8fCBzZWxlY3Rpb25BcHBlYXJhbmNlID09PSBcImJvcmRlclwiKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIChoKFwidGRcIiwgeyBjbGFzczogQ1NTLnNlbGVjdGlvbkNvbnRhaW5lciwga2V5OiBcInNlbGVjdGlvbi1jb250YWluZXJcIiwgb25DbGljazogdGhpcy5pdGVtQ2xpY2tlZCB9LCBoKFwiY2FsY2l0ZS1pY29uXCIsIHsgaWNvbjogc2VsZWN0ZWRcbiAgICAgICAgPyBzZWxlY3Rpb25Nb2RlID09PSBcIm11bHRpcGxlXCJcbiAgICAgICAgICA/IElDT05TLnNlbGVjdGVkTXVsdGlwbGVcbiAgICAgICAgICA6IElDT05TLnNlbGVjdGVkU2luZ2xlXG4gICAgICAgIDogSUNPTlMudW5zZWxlY3RlZCwgc2NhbGU6IFwic1wiIH0pKSk7XG4gIH1cbiAgcmVuZGVyRHJhZ0hhbmRsZSgpIHtcbiAgICByZXR1cm4gdGhpcy5kcmFnSGFuZGxlID8gKGgoXCJ0ZFwiLCB7IGNsYXNzOiBDU1MuZHJhZ0NvbnRhaW5lciwga2V5OiBcImRyYWctaGFuZGxlLWNvbnRhaW5lclwiIH0sIGgoXCJjYWxjaXRlLWhhbmRsZVwiLCB7IGxhYmVsOiB0aGlzLmxhYmVsLCBzZXRQb3NpdGlvbjogdGhpcy5zZXRQb3NpdGlvbiwgc2V0U2l6ZTogdGhpcy5zZXRTaXplIH0pKSkgOiBudWxsO1xuICB9XG4gIHJlbmRlck9wZW4oKSB7XG4gICAgY29uc3QgeyBlbCwgb3Blbiwgb3BlbmFibGUsIHBhcmVudExpc3RFbCB9ID0gdGhpcztcbiAgICBjb25zdCBkaXIgPSBnZXRFbGVtZW50RGlyKGVsKTtcbiAgICBjb25zdCBpY29uID0gb3BlbmFibGVcbiAgICAgID8gb3BlblxuICAgICAgICA/IElDT05TLm9wZW5cbiAgICAgICAgOiBkaXIgPT09IFwicnRsXCJcbiAgICAgICAgICA/IElDT05TLmNsb3NlZFJUTFxuICAgICAgICAgIDogSUNPTlMuY2xvc2VkTFRSXG4gICAgICA6IElDT05TLmJsYW5rO1xuICAgIGNvbnN0IGNsaWNrSGFuZGxlciA9IG9wZW5hYmxlID8gdGhpcy50b2dnbGVPcGVuIDogdGhpcy5pdGVtQ2xpY2tlZDtcbiAgICByZXR1cm4gb3BlbmFibGUgfHwgcGFyZW50TGlzdEVsPy5vcGVuYWJsZSA/IChoKFwidGRcIiwgeyBjbGFzczogQ1NTLm9wZW5Db250YWluZXIsIGtleTogXCJvcGVuLWNvbnRhaW5lclwiLCBvbkNsaWNrOiBjbGlja0hhbmRsZXIgfSwgaChcImNhbGNpdGUtaWNvblwiLCB7IGljb246IGljb24sIGtleTogaWNvbiwgc2NhbGU6IFwic1wiIH0pKSkgOiBudWxsO1xuICB9XG4gIHJlbmRlckFjdGlvbnNTdGFydCgpIHtcbiAgICBjb25zdCB7IGxhYmVsLCBoYXNBY3Rpb25zU3RhcnQgfSA9IHRoaXM7XG4gICAgcmV0dXJuIChoKFwidGRcIiwgeyBcImFyaWEtbGFiZWxcIjogbGFiZWwsIGNsYXNzOiBDU1MuYWN0aW9uc1N0YXJ0LCBoaWRkZW46ICFoYXNBY3Rpb25zU3RhcnQsIGtleTogXCJhY3Rpb25zLXN0YXJ0LWNvbnRhaW5lclwiLCByb2xlOiBcImdyaWRjZWxsXCIsXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QvanN4LXNvcnQtcHJvcHMgLS0gcmVmIHNob3VsZCBiZSBsYXN0IHNvIG5vZGUgYXR0cnMvcHJvcHMgYXJlIGluIHN5bmMgKHNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWRlc2lnbi1zeXN0ZW0vcHVsbC82NTMwKVxuICAgICAgcmVmOiAoZWwpID0+ICh0aGlzLmFjdGlvbnNTdGFydEVsID0gZWwpIH0sIGgoXCJzbG90XCIsIHsgbmFtZTogU0xPVFMuYWN0aW9uc1N0YXJ0LCBvblNsb3RjaGFuZ2U6IHRoaXMuaGFuZGxlQWN0aW9uc1N0YXJ0U2xvdENoYW5nZSB9KSkpO1xuICB9XG4gIHJlbmRlckFjdGlvbnNFbmQoKSB7XG4gICAgY29uc3QgeyBsYWJlbCwgaGFzQWN0aW9uc0VuZCwgY2xvc2FibGUsIG1lc3NhZ2VzIH0gPSB0aGlzO1xuICAgIHJldHVybiAoaChcInRkXCIsIHsgXCJhcmlhLWxhYmVsXCI6IGxhYmVsLCBjbGFzczogQ1NTLmFjdGlvbnNFbmQsIGhpZGRlbjogIShoYXNBY3Rpb25zRW5kIHx8IGNsb3NhYmxlKSwga2V5OiBcImFjdGlvbnMtZW5kLWNvbnRhaW5lclwiLCByb2xlOiBcImdyaWRjZWxsXCIsXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QvanN4LXNvcnQtcHJvcHMgLS0gcmVmIHNob3VsZCBiZSBsYXN0IHNvIG5vZGUgYXR0cnMvcHJvcHMgYXJlIGluIHN5bmMgKHNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWRlc2lnbi1zeXN0ZW0vcHVsbC82NTMwKVxuICAgICAgcmVmOiAoZWwpID0+ICh0aGlzLmFjdGlvbnNFbmRFbCA9IGVsKSB9LCBoKFwic2xvdFwiLCB7IG5hbWU6IFNMT1RTLmFjdGlvbnNFbmQsIG9uU2xvdGNoYW5nZTogdGhpcy5oYW5kbGVBY3Rpb25zRW5kU2xvdENoYW5nZSB9KSwgY2xvc2FibGUgPyAoaChcImNhbGNpdGUtYWN0aW9uXCIsIHsgYXBwZWFyYW5jZTogXCJ0cmFuc3BhcmVudFwiLCBpY29uOiBJQ09OUy5jbG9zZSwga2V5OiBcImNsb3NlLWFjdGlvblwiLCBsYWJlbDogbWVzc2FnZXMuY2xvc2UsIG9uQ2xpY2s6IHRoaXMuY2xvc2VDbGlja0hhbmRsZXIsIHRleHQ6IG1lc3NhZ2VzLmNsb3NlIH0pKSA6IG51bGwpKTtcbiAgfVxuICByZW5kZXJDb250ZW50U3RhcnQoKSB7XG4gICAgY29uc3QgeyBoYXNDb250ZW50U3RhcnQgfSA9IHRoaXM7XG4gICAgcmV0dXJuIChoKFwiZGl2XCIsIHsgY2xhc3M6IENTUy5jb250ZW50U3RhcnQsIGhpZGRlbjogIWhhc0NvbnRlbnRTdGFydCB9LCBoKFwic2xvdFwiLCB7IG5hbWU6IFNMT1RTLmNvbnRlbnRTdGFydCwgb25TbG90Y2hhbmdlOiB0aGlzLmhhbmRsZUNvbnRlbnRTdGFydFNsb3RDaGFuZ2UgfSkpKTtcbiAgfVxuICByZW5kZXJDdXN0b21Db250ZW50KCkge1xuICAgIGNvbnN0IHsgaGFzQ3VzdG9tQ29udGVudCB9ID0gdGhpcztcbiAgICByZXR1cm4gKGgoXCJkaXZcIiwgeyBjbGFzczogQ1NTLmN1c3RvbUNvbnRlbnQsIGhpZGRlbjogIWhhc0N1c3RvbUNvbnRlbnQgfSwgaChcInNsb3RcIiwgeyBuYW1lOiBTTE9UUy5jb250ZW50LCBvblNsb3RjaGFuZ2U6IHRoaXMuaGFuZGxlQ29udGVudFNsb3RDaGFuZ2UgfSkpKTtcbiAgfVxuICByZW5kZXJDb250ZW50RW5kKCkge1xuICAgIGNvbnN0IHsgaGFzQ29udGVudEVuZCB9ID0gdGhpcztcbiAgICByZXR1cm4gKGgoXCJkaXZcIiwgeyBjbGFzczogQ1NTLmNvbnRlbnRFbmQsIGhpZGRlbjogIWhhc0NvbnRlbnRFbmQgfSwgaChcInNsb3RcIiwgeyBuYW1lOiBTTE9UUy5jb250ZW50RW5kLCBvblNsb3RjaGFuZ2U6IHRoaXMuaGFuZGxlQ29udGVudEVuZFNsb3RDaGFuZ2UgfSkpKTtcbiAgfVxuICByZW5kZXJDb250ZW50Qm90dG9tKCkge1xuICAgIGNvbnN0IHsgaGFzQ29udGVudEJvdHRvbSwgdmlzdWFsTGV2ZWwgfSA9IHRoaXM7XG4gICAgcmV0dXJuIChoKFwiZGl2XCIsIHsgY2xhc3M6IENTUy5jb250ZW50Qm90dG9tLCBoaWRkZW46ICFoYXNDb250ZW50Qm90dG9tLCBzdHlsZTogeyBcIi0tY2FsY2l0ZS1saXN0LWl0ZW0tc3BhY2luZy1pbmRlbnQtbXVsdGlwbGllclwiOiBgJHt2aXN1YWxMZXZlbH1gIH0gfSwgaChcInNsb3RcIiwgeyBuYW1lOiBTTE9UUy5jb250ZW50Qm90dG9tLCBvblNsb3RjaGFuZ2U6IHRoaXMuaGFuZGxlQ29udGVudEJvdHRvbVNsb3RDaGFuZ2UgfSkpKTtcbiAgfVxuICByZW5kZXJEZWZhdWx0Q29udGFpbmVyKCkge1xuICAgIHJldHVybiAoaChcImRpdlwiLCB7IGNsYXNzOiB7XG4gICAgICAgIFtDU1MubmVzdGVkQ29udGFpbmVyXTogdHJ1ZSxcbiAgICAgICAgW0NTUy5uZXN0ZWRDb250YWluZXJIaWRkZW5dOiB0aGlzLm9wZW5hYmxlICYmICF0aGlzLm9wZW4sXG4gICAgICB9IH0sIGgoXCJzbG90XCIsIHsgb25TbG90Y2hhbmdlOiB0aGlzLmhhbmRsZURlZmF1bHRTbG90Q2hhbmdlLCByZWY6IChlbCkgPT4gKHRoaXMuZGVmYXVsdFNsb3RFbCA9IGVsKSB9KSkpO1xuICB9XG4gIHJlbmRlckNvbnRlbnRQcm9wZXJ0aWVzKCkge1xuICAgIGNvbnN0IHsgbGFiZWwsIGRlc2NyaXB0aW9uLCBoYXNDdXN0b21Db250ZW50IH0gPSB0aGlzO1xuICAgIHJldHVybiAhaGFzQ3VzdG9tQ29udGVudCAmJiAoISFsYWJlbCB8fCAhIWRlc2NyaXB0aW9uKSA/IChoKFwiZGl2XCIsIHsgY2xhc3M6IENTUy5jb250ZW50LCBrZXk6IFwiY29udGVudFwiIH0sIGxhYmVsID8gKGgoXCJkaXZcIiwgeyBjbGFzczogQ1NTLmxhYmVsLCBrZXk6IFwibGFiZWxcIiB9LCBsYWJlbCkpIDogbnVsbCwgZGVzY3JpcHRpb24gPyAoaChcImRpdlwiLCB7IGNsYXNzOiBDU1MuZGVzY3JpcHRpb24sIGtleTogXCJkZXNjcmlwdGlvblwiIH0sIGRlc2NyaXB0aW9uKSkgOiBudWxsKSkgOiBudWxsO1xuICB9XG4gIHJlbmRlckNvbnRlbnRDb250YWluZXIoKSB7XG4gICAgY29uc3QgeyBkZXNjcmlwdGlvbiwgbGFiZWwsIHNlbGVjdGlvbk1vZGUsIGhhc0N1c3RvbUNvbnRlbnQgfSA9IHRoaXM7XG4gICAgY29uc3QgaGFzQ2VudGVyQ29udGVudCA9IGhhc0N1c3RvbUNvbnRlbnQgfHwgISFsYWJlbCB8fCAhIWRlc2NyaXB0aW9uO1xuICAgIGNvbnN0IGNvbnRlbnQgPSBbXG4gICAgICB0aGlzLnJlbmRlckNvbnRlbnRTdGFydCgpLFxuICAgICAgdGhpcy5yZW5kZXJDdXN0b21Db250ZW50KCksXG4gICAgICB0aGlzLnJlbmRlckNvbnRlbnRQcm9wZXJ0aWVzKCksXG4gICAgICB0aGlzLnJlbmRlckNvbnRlbnRFbmQoKSxcbiAgICBdO1xuICAgIHJldHVybiAoaChcInRkXCIsIHsgXCJhcmlhLWxhYmVsXCI6IGxhYmVsLCBjbGFzczoge1xuICAgICAgICBbQ1NTLmNvbnRlbnRDb250YWluZXJdOiB0cnVlLFxuICAgICAgICBbQ1NTLmNvbnRlbnRDb250YWluZXJTZWxlY3RhYmxlXTogc2VsZWN0aW9uTW9kZSAhPT0gXCJub25lXCIsXG4gICAgICAgIFtDU1MuY29udGVudENvbnRhaW5lckhhc0NlbnRlckNvbnRlbnRdOiBoYXNDZW50ZXJDb250ZW50LFxuICAgICAgfSwga2V5OiBcImNvbnRlbnQtY29udGFpbmVyXCIsIG9uQ2xpY2s6IHRoaXMuaXRlbUNsaWNrZWQsIHJvbGU6IFwiZ3JpZGNlbGxcIixcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC9qc3gtc29ydC1wcm9wcyAtLSByZWYgc2hvdWxkIGJlIGxhc3Qgc28gbm9kZSBhdHRycy9wcm9wcyBhcmUgaW4gc3luYyAoc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtZGVzaWduLXN5c3RlbS9wdWxsLzY1MzApXG4gICAgICByZWY6IChlbCkgPT4gKHRoaXMuY29udGVudEVsID0gZWwpIH0sIGNvbnRlbnQpKTtcbiAgfVxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBvcGVuYWJsZSwgb3BlbiwgbGV2ZWwsIHNldFBvc2l0aW9uLCBzZXRTaXplLCBhY3RpdmUsIGxhYmVsLCBzZWxlY3RlZCwgc2VsZWN0aW9uQXBwZWFyYW5jZSwgc2VsZWN0aW9uTW9kZSwgY2xvc2VkLCB2aXN1YWxMZXZlbCwgfSA9IHRoaXM7XG4gICAgY29uc3Qgc2hvd0JvcmRlciA9IHNlbGVjdGlvbk1vZGUgIT09IFwibm9uZVwiICYmIHNlbGVjdGlvbkFwcGVhcmFuY2UgPT09IFwiYm9yZGVyXCI7XG4gICAgY29uc3QgYm9yZGVyU2VsZWN0ZWQgPSBzaG93Qm9yZGVyICYmIHNlbGVjdGVkO1xuICAgIGNvbnN0IGJvcmRlclVuc2VsZWN0ZWQgPSBzaG93Qm9yZGVyICYmICFzZWxlY3RlZDtcbiAgICByZXR1cm4gKGgoSG9zdCwgbnVsbCwgaChcInRyXCIsIHsgXCJhcmlhLWV4cGFuZGVkXCI6IG9wZW5hYmxlID8gdG9BcmlhQm9vbGVhbihvcGVuKSA6IG51bGwsIFwiYXJpYS1sYWJlbFwiOiBsYWJlbCwgXCJhcmlhLWxldmVsXCI6IGxldmVsLCBcImFyaWEtcG9zaW5zZXRcIjogc2V0UG9zaXRpb24sIFwiYXJpYS1zZWxlY3RlZFwiOiB0b0FyaWFCb29sZWFuKHNlbGVjdGVkKSwgXCJhcmlhLXNldHNpemVcIjogc2V0U2l6ZSwgY2xhc3M6IHtcbiAgICAgICAgW0NTUy5jb250YWluZXJdOiB0cnVlLFxuICAgICAgICBbQ1NTLmNvbnRhaW5lckJvcmRlclNlbGVjdGVkXTogYm9yZGVyU2VsZWN0ZWQsXG4gICAgICAgIFtDU1MuY29udGFpbmVyQm9yZGVyVW5zZWxlY3RlZF06IGJvcmRlclVuc2VsZWN0ZWQsXG4gICAgICB9LCBoaWRkZW46IGNsb3NlZCwgb25Gb2N1czogdGhpcy5mb2N1c0NlbGxOdWxsLCBvbktleURvd246IHRoaXMuaGFuZGxlSXRlbUtleURvd24sIHJvbGU6IFwicm93XCIsIHN0eWxlOiB7IFwiLS1jYWxjaXRlLWxpc3QtaXRlbS1zcGFjaW5nLWluZGVudC1tdWx0aXBsaWVyXCI6IGAke3Zpc3VhbExldmVsfWAgfSwgdGFiSW5kZXg6IGFjdGl2ZSA/IDAgOiAtMSxcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC9qc3gtc29ydC1wcm9wcyAtLSByZWYgc2hvdWxkIGJlIGxhc3Qgc28gbm9kZSBhdHRycy9wcm9wcyBhcmUgaW4gc3luYyAoc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtZGVzaWduLXN5c3RlbS9wdWxsLzY1MzApXG4gICAgICByZWY6IChlbCkgPT4gKHRoaXMuY29udGFpbmVyRWwgPSBlbCkgfSwgdGhpcy5yZW5kZXJEcmFnSGFuZGxlKCksIHRoaXMucmVuZGVyU2VsZWN0ZWQoKSwgdGhpcy5yZW5kZXJPcGVuKCksIHRoaXMucmVuZGVyQWN0aW9uc1N0YXJ0KCksIHRoaXMucmVuZGVyQ29udGVudENvbnRhaW5lcigpLCB0aGlzLnJlbmRlckFjdGlvbnNFbmQoKSksIHRoaXMucmVuZGVyQ29udGVudEJvdHRvbSgpLCB0aGlzLnJlbmRlckRlZmF1bHRDb250YWluZXIoKSkpO1xuICB9XG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vXG4gIC8vICBQcml2YXRlIE1ldGhvZHNcbiAgLy9cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgZW1pdENhbGNpdGVJbnRlcm5hbExpc3RJdGVtQ2hhbmdlKCkge1xuICAgIHRoaXMuY2FsY2l0ZUludGVybmFsTGlzdEl0ZW1DaGFuZ2UuZW1pdCgpO1xuICB9XG4gIHNldFNlbGVjdGlvbkRlZmF1bHRzKCkge1xuICAgIGNvbnN0IHsgcGFyZW50TGlzdEVsLCBzZWxlY3Rpb25Nb2RlLCBzZWxlY3Rpb25BcHBlYXJhbmNlIH0gPSB0aGlzO1xuICAgIGlmICghcGFyZW50TGlzdEVsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghc2VsZWN0aW9uTW9kZSkge1xuICAgICAgdGhpcy5zZWxlY3Rpb25Nb2RlID0gcGFyZW50TGlzdEVsLnNlbGVjdGlvbk1vZGU7XG4gICAgfVxuICAgIGlmICghc2VsZWN0aW9uQXBwZWFyYW5jZSkge1xuICAgICAgdGhpcy5zZWxlY3Rpb25BcHBlYXJhbmNlID0gcGFyZW50TGlzdEVsLnNlbGVjdGlvbkFwcGVhcmFuY2U7XG4gICAgfVxuICB9XG4gIGhhbmRsZU9wZW5hYmxlQ2hhbmdlKHNsb3RFbCkge1xuICAgIGlmICghc2xvdEVsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHsgcGFyZW50TGlzdEVsIH0gPSB0aGlzO1xuICAgIGNvbnN0IGxpc3RJdGVtQ2hpbGRyZW4gPSBnZXRMaXN0SXRlbUNoaWxkcmVuKHNsb3RFbCk7XG4gICAgdXBkYXRlTGlzdEl0ZW1DaGlsZHJlbihsaXN0SXRlbUNoaWxkcmVuKTtcbiAgICBjb25zdCBvcGVuYWJsZSA9ICEhbGlzdEl0ZW1DaGlsZHJlbi5sZW5ndGg7XG4gICAgaWYgKG9wZW5hYmxlICYmIHBhcmVudExpc3RFbCAmJiAhcGFyZW50TGlzdEVsLm9wZW5hYmxlKSB7XG4gICAgICBwYXJlbnRMaXN0RWwub3BlbmFibGUgPSB0cnVlO1xuICAgIH1cbiAgICB0aGlzLm9wZW5hYmxlID0gb3BlbmFibGU7XG4gICAgaWYgKCFvcGVuYWJsZSkge1xuICAgICAgdGhpcy5vcGVuID0gZmFsc2U7XG4gICAgfVxuICB9XG4gIHN0YXRpYyBnZXQgYXNzZXRzRGlycygpIHsgcmV0dXJuIFtcImFzc2V0c1wiXTsgfVxuICBnZXQgZWwoKSB7IHJldHVybiB0aGlzOyB9XG4gIHN0YXRpYyBnZXQgd2F0Y2hlcnMoKSB7IHJldHVybiB7XG4gICAgXCJhY3RpdmVcIjogW1wiYWN0aXZlSGFuZGxlclwiXSxcbiAgICBcImNsb3NlZFwiOiBbXCJoYW5kbGVDbG9zZWRDaGFuZ2VcIl0sXG4gICAgXCJkaXNhYmxlZFwiOiBbXCJoYW5kbGVEaXNhYmxlZENoYW5nZVwiXSxcbiAgICBcInNlbGVjdGVkXCI6IFtcImhhbmRsZVNlbGVjdGVkQ2hhbmdlXCJdLFxuICAgIFwibWVzc2FnZU92ZXJyaWRlc1wiOiBbXCJvbk1lc3NhZ2VzQ2hhbmdlXCJdLFxuICAgIFwiZWZmZWN0aXZlTG9jYWxlXCI6IFtcImVmZmVjdGl2ZUxvY2FsZUNoYW5nZVwiXVxuICB9OyB9XG4gIHN0YXRpYyBnZXQgc3R5bGUoKSB7IHJldHVybiBsaXN0SXRlbUNzczsgfVxufSwgWzEsIFwiY2FsY2l0ZS1saXN0LWl0ZW1cIiwge1xuICAgIFwiYWN0aXZlXCI6IFs0XSxcbiAgICBcImNsb3NhYmxlXCI6IFs1MTZdLFxuICAgIFwiY2xvc2VkXCI6IFsxNTQwXSxcbiAgICBcImRlc2NyaXB0aW9uXCI6IFsxXSxcbiAgICBcImRpc2FibGVkXCI6IFs1MTZdLFxuICAgIFwiZHJhZ0hhbmRsZVwiOiBbNCwgXCJkcmFnLWhhbmRsZVwiXSxcbiAgICBcImxhYmVsXCI6IFsxXSxcbiAgICBcIm1ldGFkYXRhXCI6IFsxNl0sXG4gICAgXCJvcGVuXCI6IFsxNTQwXSxcbiAgICBcInNldFNpemVcIjogWzIsIFwic2V0LXNpemVcIl0sXG4gICAgXCJzZXRQb3NpdGlvblwiOiBbMiwgXCJzZXQtcG9zaXRpb25cIl0sXG4gICAgXCJzZWxlY3RlZFwiOiBbMTU0MF0sXG4gICAgXCJ2YWx1ZVwiOiBbOF0sXG4gICAgXCJzZWxlY3Rpb25Nb2RlXCI6IFsxMDI1LCBcInNlbGVjdGlvbi1tb2RlXCJdLFxuICAgIFwic2VsZWN0aW9uQXBwZWFyYW5jZVwiOiBbMTAyNSwgXCJzZWxlY3Rpb24tYXBwZWFyYW5jZVwiXSxcbiAgICBcIm1lc3NhZ2VPdmVycmlkZXNcIjogWzEwNDBdLFxuICAgIFwibWVzc2FnZXNcIjogWzEwNDBdLFxuICAgIFwiZWZmZWN0aXZlTG9jYWxlXCI6IFszMl0sXG4gICAgXCJkZWZhdWx0TWVzc2FnZXNcIjogWzMyXSxcbiAgICBcImxldmVsXCI6IFszMl0sXG4gICAgXCJ2aXN1YWxMZXZlbFwiOiBbMzJdLFxuICAgIFwicGFyZW50TGlzdEVsXCI6IFszMl0sXG4gICAgXCJvcGVuYWJsZVwiOiBbMzJdLFxuICAgIFwiaGFzQWN0aW9uc1N0YXJ0XCI6IFszMl0sXG4gICAgXCJoYXNBY3Rpb25zRW5kXCI6IFszMl0sXG4gICAgXCJoYXNDdXN0b21Db250ZW50XCI6IFszMl0sXG4gICAgXCJoYXNDb250ZW50U3RhcnRcIjogWzMyXSxcbiAgICBcImhhc0NvbnRlbnRFbmRcIjogWzMyXSxcbiAgICBcImhhc0NvbnRlbnRCb3R0b21cIjogWzMyXSxcbiAgICBcInNldEZvY3VzXCI6IFs2NF1cbiAgfSwgW1swLCBcImNhbGNpdGVJbnRlcm5hbExpc3RJdGVtR3JvdXBEZWZhdWx0U2xvdENoYW5nZVwiLCBcImhhbmRsZUNhbGNpdGVJbnRlcm5hbExpc3REZWZhdWx0U2xvdENoYW5nZXNcIl0sIFswLCBcImNhbGNpdGVJbnRlcm5hbExpc3REZWZhdWx0U2xvdENoYW5nZVwiLCBcImhhbmRsZUNhbGNpdGVJbnRlcm5hbExpc3REZWZhdWx0U2xvdENoYW5nZXNcIl1dXSk7XG5mdW5jdGlvbiBkZWZpbmVDdXN0b21FbGVtZW50JDEoKSB7XG4gIGlmICh0eXBlb2YgY3VzdG9tRWxlbWVudHMgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgY29tcG9uZW50cyA9IFtcImNhbGNpdGUtbGlzdC1pdGVtXCIsIFwiY2FsY2l0ZS1hY3Rpb25cIiwgXCJjYWxjaXRlLWhhbmRsZVwiLCBcImNhbGNpdGUtaWNvblwiLCBcImNhbGNpdGUtbG9hZGVyXCJdO1xuICBjb21wb25lbnRzLmZvckVhY2godGFnTmFtZSA9PiB7IHN3aXRjaCAodGFnTmFtZSkge1xuICAgIGNhc2UgXCJjYWxjaXRlLWxpc3QtaXRlbVwiOlxuICAgICAgaWYgKCFjdXN0b21FbGVtZW50cy5nZXQodGFnTmFtZSkpIHtcbiAgICAgICAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKHRhZ05hbWUsIExpc3RJdGVtKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJjYWxjaXRlLWFjdGlvblwiOlxuICAgICAgaWYgKCFjdXN0b21FbGVtZW50cy5nZXQodGFnTmFtZSkpIHtcbiAgICAgICAgZGVmaW5lQ3VzdG9tRWxlbWVudCQ1KCk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwiY2FsY2l0ZS1oYW5kbGVcIjpcbiAgICAgIGlmICghY3VzdG9tRWxlbWVudHMuZ2V0KHRhZ05hbWUpKSB7XG4gICAgICAgIGRlZmluZUN1c3RvbUVsZW1lbnQkNCgpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcImNhbGNpdGUtaWNvblwiOlxuICAgICAgaWYgKCFjdXN0b21FbGVtZW50cy5nZXQodGFnTmFtZSkpIHtcbiAgICAgICAgZGVmaW5lQ3VzdG9tRWxlbWVudCQzKCk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwiY2FsY2l0ZS1sb2FkZXJcIjpcbiAgICAgIGlmICghY3VzdG9tRWxlbWVudHMuZ2V0KHRhZ05hbWUpKSB7XG4gICAgICAgIGRlZmluZUN1c3RvbUVsZW1lbnQkMigpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gIH0gfSk7XG59XG5kZWZpbmVDdXN0b21FbGVtZW50JDEoKTtcblxuY29uc3QgQ2FsY2l0ZUxpc3RJdGVtID0gTGlzdEl0ZW07XG5jb25zdCBkZWZpbmVDdXN0b21FbGVtZW50ID0gZGVmaW5lQ3VzdG9tRWxlbWVudCQxO1xuXG5leHBvcnQgeyBDYWxjaXRlTGlzdEl0ZW0sIGRlZmluZUN1c3RvbUVsZW1lbnQgfTtcbiIsIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWRlc2lnbi1zeXN0ZW0vYmxvYi9tYWluL0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG4gKiB2MS4xMS4wXG4gKi9cbmltcG9ydCB7IHByb3h5Q3VzdG9tRWxlbWVudCwgSFRNTEVsZW1lbnQsIGNyZWF0ZUV2ZW50LCBoIH0gZnJvbSAnQHN0ZW5jaWwvY29yZS9pbnRlcm5hbC9jbGllbnQvaW5kZXguanMnO1xuaW1wb3J0IHsgdCBhcyB0b0FyaWFCb29sZWFuIH0gZnJvbSAnLi9kb20uanMnO1xuaW1wb3J0IHsgYSBhcyBzZXRVcExvYWRhYmxlQ29tcG9uZW50LCBzIGFzIHNldENvbXBvbmVudExvYWRlZCwgYyBhcyBjb21wb25lbnRGb2N1c2FibGUgfSBmcm9tICcuL2xvYWRhYmxlLmpzJztcbmltcG9ydCB7IGMgYXMgY29ubmVjdExvY2FsaXplZCwgZCBhcyBkaXNjb25uZWN0TG9jYWxpemVkIH0gZnJvbSAnLi9sb2NhbGUuanMnO1xuaW1wb3J0IHsgYyBhcyBjb25uZWN0TWVzc2FnZXMsIHMgYXMgc2V0VXBNZXNzYWdlcywgZCBhcyBkaXNjb25uZWN0TWVzc2FnZXMsIHUgYXMgdXBkYXRlTWVzc2FnZXMgfSBmcm9tICcuL3Q5bi5qcyc7XG5pbXBvcnQgeyBkIGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkMSB9IGZyb20gJy4vaWNvbi5qcyc7XG5cbmNvbnN0IENTUyA9IHtcbiAgaGFuZGxlOiBcImhhbmRsZVwiLFxuICBoYW5kbGVBY3RpdmF0ZWQ6IFwiaGFuZGxlLS1hY3RpdmF0ZWRcIixcbn07XG5jb25zdCBJQ09OUyA9IHtcbiAgZHJhZzogXCJkcmFnXCIsXG59O1xuXG5jb25zdCBoYW5kbGVDc3MgPSBcIjpob3N0e2Rpc3BsYXk6ZmxleH0uaGFuZGxle2Rpc3BsYXk6ZmxleDtjdXJzb3I6bW92ZTthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjthbGlnbi1zZWxmOnN0cmV0Y2g7Ym9yZGVyLXN0eWxlOm5vbmU7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudDtvdXRsaW5lLWNvbG9yOnRyYW5zcGFyZW50O2NvbG9yOnZhcigtLWNhbGNpdGUtdWktYm9yZGVyLWlucHV0KTtwYWRkaW5nLWJsb2NrOjAuNzVyZW07cGFkZGluZy1pbmxpbmU6MC4yNXJlbTtsaW5lLWhlaWdodDowfS5oYW5kbGU6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWZvcmVncm91bmQtMik7Y29sb3I6dmFyKC0tY2FsY2l0ZS11aS10ZXh0LTEpfS5oYW5kbGU6Zm9jdXN7Y29sb3I6dmFyKC0tY2FsY2l0ZS11aS10ZXh0LTEpO291dGxpbmU6MnB4IHNvbGlkIHZhcigtLWNhbGNpdGUtdWktZm9jdXMtY29sb3IsIHZhcigtLWNhbGNpdGUtdWktYnJhbmQpKTtvdXRsaW5lLW9mZnNldDpjYWxjKFxcbiAgICAgICAgICAgIC0ycHggKlxcbiAgICAgICAgICAgIGNhbGMoXFxuICAgICAgICAgICAgICAxIC1cXG4gICAgICAgICAgICAgIDIgKiBjbGFtcChcXG4gICAgICAgICAgICAgICAgMCxcXG4gICAgICAgICAgICAgICAgdmFyKC0tY2FsY2l0ZS11aS1mb2N1cy1vZmZzZXQtaW52ZXJ0KSxcXG4gICAgICAgICAgICAgICAgMVxcbiAgICAgICAgICAgICAgKVxcbiAgICAgICAgICAgIClcXG4gICAgICAgICAgKX0uaGFuZGxlLS1hY3RpdmF0ZWR7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWZvcmVncm91bmQtMyk7Y29sb3I6dmFyKC0tY2FsY2l0ZS11aS10ZXh0LTEpfS5oYW5kbGUgY2FsY2l0ZS1pY29ue2NvbG9yOmluaGVyaXR9Omhvc3QoW2hpZGRlbl0pe2Rpc3BsYXk6bm9uZX1baGlkZGVuXXtkaXNwbGF5Om5vbmV9XCI7XG5cbmNvbnN0IEhhbmRsZSA9IC8qQF9fUFVSRV9fKi8gcHJveHlDdXN0b21FbGVtZW50KGNsYXNzIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX19yZWdpc3Rlckhvc3QoKTtcbiAgICB0aGlzLl9fYXR0YWNoU2hhZG93KCk7XG4gICAgdGhpcy5jYWxjaXRlSGFuZGxlTnVkZ2UgPSBjcmVhdGVFdmVudCh0aGlzLCBcImNhbGNpdGVIYW5kbGVOdWRnZVwiLCA2KTtcbiAgICB0aGlzLmNhbGNpdGVJbnRlcm5hbEhhbmRsZUNoYW5nZSA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiY2FsY2l0ZUludGVybmFsSGFuZGxlQ2hhbmdlXCIsIDYpO1xuICAgIHRoaXMuaGFuZGxlS2V5RG93biA9IChldmVudCkgPT4ge1xuICAgICAgc3dpdGNoIChldmVudC5rZXkpIHtcbiAgICAgICAgY2FzZSBcIiBcIjpcbiAgICAgICAgICB0aGlzLmFjdGl2YXRlZCA9ICF0aGlzLmFjdGl2YXRlZDtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiQXJyb3dVcFwiOlxuICAgICAgICAgIGlmICghdGhpcy5hY3RpdmF0ZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB0aGlzLmNhbGNpdGVIYW5kbGVOdWRnZS5lbWl0KHsgZGlyZWN0aW9uOiBcInVwXCIgfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJBcnJvd0Rvd25cIjpcbiAgICAgICAgICBpZiAoIXRoaXMuYWN0aXZhdGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgdGhpcy5jYWxjaXRlSGFuZGxlTnVkZ2UuZW1pdCh7IGRpcmVjdGlvbjogXCJkb3duXCIgfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLmhhbmRsZUJsdXIgPSAoKSA9PiB7XG4gICAgICB0aGlzLmFjdGl2YXRlZCA9IGZhbHNlO1xuICAgIH07XG4gICAgdGhpcy5hY3RpdmF0ZWQgPSBmYWxzZTtcbiAgICB0aGlzLmRyYWdIYW5kbGUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5tZXNzYWdlcyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnNldFBvc2l0aW9uID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuc2V0U2l6ZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmxhYmVsID0gdW5kZWZpbmVkO1xuICAgIHRoaXMubWVzc2FnZU92ZXJyaWRlcyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmVmZmVjdGl2ZUxvY2FsZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmRlZmF1bHRNZXNzYWdlcyA9IHVuZGVmaW5lZDtcbiAgfVxuICBoYW5kbGVBcmlhVGV4dENoYW5nZSgpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gdGhpcy5nZXRBcmlhVGV4dChcImxpdmVcIik7XG4gICAgaWYgKG1lc3NhZ2UpIHtcbiAgICAgIHRoaXMuY2FsY2l0ZUludGVybmFsSGFuZGxlQ2hhbmdlLmVtaXQoe1xuICAgICAgICBtZXNzYWdlLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIG9uTWVzc2FnZXNDaGFuZ2UoKSB7XG4gICAgLyogd2lyZWQgdXAgYnkgdDluIHV0aWwgKi9cbiAgfVxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vXG4gIC8vICBMaWZlY3ljbGVcbiAgLy9cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBjb25uZWN0TWVzc2FnZXModGhpcyk7XG4gICAgY29ubmVjdExvY2FsaXplZCh0aGlzKTtcbiAgfVxuICBhc3luYyBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICBzZXRVcExvYWRhYmxlQ29tcG9uZW50KHRoaXMpO1xuICAgIGF3YWl0IHNldFVwTWVzc2FnZXModGhpcyk7XG4gIH1cbiAgY29tcG9uZW50RGlkTG9hZCgpIHtcbiAgICBzZXRDb21wb25lbnRMb2FkZWQodGhpcyk7XG4gIH1cbiAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgZGlzY29ubmVjdE1lc3NhZ2VzKHRoaXMpO1xuICAgIGRpc2Nvbm5lY3RMb2NhbGl6ZWQodGhpcyk7XG4gIH1cbiAgZWZmZWN0aXZlTG9jYWxlQ2hhbmdlKCkge1xuICAgIHVwZGF0ZU1lc3NhZ2VzKHRoaXMsIHRoaXMuZWZmZWN0aXZlTG9jYWxlKTtcbiAgfVxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvL1xuICAvLyAgTWV0aG9kc1xuICAvL1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvKiogU2V0cyBmb2N1cyBvbiB0aGUgY29tcG9uZW50LiAqL1xuICBhc3luYyBzZXRGb2N1cygpIHtcbiAgICBhd2FpdCBjb21wb25lbnRGb2N1c2FibGUodGhpcyk7XG4gICAgdGhpcy5oYW5kbGVCdXR0b24/LmZvY3VzKCk7XG4gIH1cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy9cbiAgLy8gIFByaXZhdGUgTWV0aG9kc1xuICAvL1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBnZXRBcmlhVGV4dCh0eXBlKSB7XG4gICAgY29uc3QgeyBzZXRQb3NpdGlvbiwgc2V0U2l6ZSwgbGFiZWwsIG1lc3NhZ2VzLCBhY3RpdmF0ZWQgfSA9IHRoaXM7XG4gICAgaWYgKCFtZXNzYWdlcyB8fCAhbGFiZWwgfHwgdHlwZW9mIHNldFNpemUgIT09IFwibnVtYmVyXCIgfHwgdHlwZW9mIHNldFBvc2l0aW9uICE9PSBcIm51bWJlclwiKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgdGV4dCA9IHR5cGUgPT09IFwibGFiZWxcIlxuICAgICAgPyBhY3RpdmF0ZWRcbiAgICAgICAgPyBtZXNzYWdlcy5kcmFnSGFuZGxlQ2hhbmdlXG4gICAgICAgIDogbWVzc2FnZXMuZHJhZ0hhbmRsZUlkbGVcbiAgICAgIDogYWN0aXZhdGVkXG4gICAgICAgID8gbWVzc2FnZXMuZHJhZ0hhbmRsZUFjdGl2ZVxuICAgICAgICA6IG1lc3NhZ2VzLmRyYWdIYW5kbGVDb21taXQ7XG4gICAgY29uc3QgcmVwbGFjZVBvc2l0aW9uID0gdGV4dC5yZXBsYWNlKFwie3Bvc2l0aW9ufVwiLCBzZXRQb3NpdGlvbi50b1N0cmluZygpKTtcbiAgICBjb25zdCByZXBsYWNlTGFiZWwgPSByZXBsYWNlUG9zaXRpb24ucmVwbGFjZShcIntpdGVtTGFiZWx9XCIsIGxhYmVsKTtcbiAgICByZXR1cm4gcmVwbGFjZUxhYmVsLnJlcGxhY2UoXCJ7dG90YWx9XCIsIHNldFNpemUudG9TdHJpbmcoKSk7XG4gIH1cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy9cbiAgLy8gIFJlbmRlciBNZXRob2RzXG4gIC8vXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKFxuICAgIC8vIE5lZWRzIHRvIGJlIGEgc3BhbiBiZWNhdXNlIG9mIGh0dHBzOi8vZ2l0aHViLmNvbS9Tb3J0YWJsZUpTL1NvcnRhYmxlL2lzc3Vlcy8xNDg2XG4gICAgaChcInNwYW5cIiwgeyBcImFyaWEtbGFiZWxcIjogdGhpcy5nZXRBcmlhVGV4dChcImxhYmVsXCIpLCBcImFyaWEtcHJlc3NlZFwiOiB0b0FyaWFCb29sZWFuKHRoaXMuYWN0aXZhdGVkKSwgY2xhc3M6IHsgW0NTUy5oYW5kbGVdOiB0cnVlLCBbQ1NTLmhhbmRsZUFjdGl2YXRlZF06IHRoaXMuYWN0aXZhdGVkIH0sIG9uQmx1cjogdGhpcy5oYW5kbGVCbHVyLCBvbktleURvd246IHRoaXMuaGFuZGxlS2V5RG93biwgcm9sZTogXCJidXR0b25cIiwgdGFiaW5kZXg6IFwiMFwiLCB0aXRsZTogdGhpcy5tZXNzYWdlcz8uZHJhZ0hhbmRsZSxcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC9qc3gtc29ydC1wcm9wcyAtLSByZWYgc2hvdWxkIGJlIGxhc3Qgc28gbm9kZSBhdHRycy9wcm9wcyBhcmUgaW4gc3luYyAoc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtZGVzaWduLXN5c3RlbS9wdWxsLzY1MzApXG4gICAgICByZWY6IChlbCkgPT4ge1xuICAgICAgICB0aGlzLmhhbmRsZUJ1dHRvbiA9IGVsO1xuICAgICAgfSB9LCBoKFwiY2FsY2l0ZS1pY29uXCIsIHsgaWNvbjogSUNPTlMuZHJhZywgc2NhbGU6IFwic1wiIH0pKSk7XG4gIH1cbiAgc3RhdGljIGdldCBhc3NldHNEaXJzKCkgeyByZXR1cm4gW1wiYXNzZXRzXCJdOyB9XG4gIGdldCBlbCgpIHsgcmV0dXJuIHRoaXM7IH1cbiAgc3RhdGljIGdldCB3YXRjaGVycygpIHsgcmV0dXJuIHtcbiAgICBcIm1lc3NhZ2VzXCI6IFtcImhhbmRsZUFyaWFUZXh0Q2hhbmdlXCJdLFxuICAgIFwibGFiZWxcIjogW1wiaGFuZGxlQXJpYVRleHRDaGFuZ2VcIl0sXG4gICAgXCJhY3RpdmF0ZWRcIjogW1wiaGFuZGxlQXJpYVRleHRDaGFuZ2VcIl0sXG4gICAgXCJzZXRQb3NpdGlvblwiOiBbXCJoYW5kbGVBcmlhVGV4dENoYW5nZVwiXSxcbiAgICBcInNldFNpemVcIjogW1wiaGFuZGxlQXJpYVRleHRDaGFuZ2VcIl0sXG4gICAgXCJtZXNzYWdlT3ZlcnJpZGVzXCI6IFtcIm9uTWVzc2FnZXNDaGFuZ2VcIl0sXG4gICAgXCJlZmZlY3RpdmVMb2NhbGVcIjogW1wiZWZmZWN0aXZlTG9jYWxlQ2hhbmdlXCJdXG4gIH07IH1cbiAgc3RhdGljIGdldCBzdHlsZSgpIHsgcmV0dXJuIGhhbmRsZUNzczsgfVxufSwgWzEsIFwiY2FsY2l0ZS1oYW5kbGVcIiwge1xuICAgIFwiYWN0aXZhdGVkXCI6IFsxNTQwXSxcbiAgICBcImRyYWdIYW5kbGVcIjogWzUxMywgXCJkcmFnLWhhbmRsZVwiXSxcbiAgICBcIm1lc3NhZ2VzXCI6IFsxNl0sXG4gICAgXCJzZXRQb3NpdGlvblwiOiBbMiwgXCJzZXQtcG9zaXRpb25cIl0sXG4gICAgXCJzZXRTaXplXCI6IFsyLCBcInNldC1zaXplXCJdLFxuICAgIFwibGFiZWxcIjogWzFdLFxuICAgIFwibWVzc2FnZU92ZXJyaWRlc1wiOiBbMTZdLFxuICAgIFwiZWZmZWN0aXZlTG9jYWxlXCI6IFszMl0sXG4gICAgXCJkZWZhdWx0TWVzc2FnZXNcIjogWzMyXSxcbiAgICBcInNldEZvY3VzXCI6IFs2NF1cbiAgfV0pO1xuZnVuY3Rpb24gZGVmaW5lQ3VzdG9tRWxlbWVudCgpIHtcbiAgaWYgKHR5cGVvZiBjdXN0b21FbGVtZW50cyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBjb21wb25lbnRzID0gW1wiY2FsY2l0ZS1oYW5kbGVcIiwgXCJjYWxjaXRlLWljb25cIl07XG4gIGNvbXBvbmVudHMuZm9yRWFjaCh0YWdOYW1lID0+IHsgc3dpdGNoICh0YWdOYW1lKSB7XG4gICAgY2FzZSBcImNhbGNpdGUtaGFuZGxlXCI6XG4gICAgICBpZiAoIWN1c3RvbUVsZW1lbnRzLmdldCh0YWdOYW1lKSkge1xuICAgICAgICBjdXN0b21FbGVtZW50cy5kZWZpbmUodGFnTmFtZSwgSGFuZGxlKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJjYWxjaXRlLWljb25cIjpcbiAgICAgIGlmICghY3VzdG9tRWxlbWVudHMuZ2V0KHRhZ05hbWUpKSB7XG4gICAgICAgIGRlZmluZUN1c3RvbUVsZW1lbnQkMSgpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gIH0gfSk7XG59XG5kZWZpbmVDdXN0b21FbGVtZW50KCk7XG5cbmV4cG9ydCB7IEhhbmRsZSBhcyBILCBkZWZpbmVDdXN0b21FbGVtZW50IGFzIGQgfTtcbiIsIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWRlc2lnbi1zeXN0ZW0vYmxvYi9tYWluL0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG4gKiB2MS4xMS4wXG4gKi9cbmltcG9ydCB7IEJ1aWxkLCBmb3JjZVVwZGF0ZSB9IGZyb20gJ0BzdGVuY2lsL2NvcmUvaW50ZXJuYWwvY2xpZW50L2luZGV4LmpzJztcblxuY29uc3QgcmVzb2x2ZU1hcCA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCBwcm9taXNlTWFwID0gbmV3IFdlYWtNYXAoKTtcbi8qKlxuICogVGhpcyBoZWxwZXIgdXRpbCBzZXRzIHVwIHRoZSBjb21wb25lbnQgZm9yIHRoZSBhYmlsaXR5IHRvIGtub3cgd2hlbiB0aGUgY29tcG9uZW50IGhhcyBiZWVuIGxvYWRlZC5cbiAqXG4gKiBUaGlzIHNob3VsZCBiZSB1c2VkIGluIHRoZSBgY29tcG9uZW50V2lsbExvYWRgIGxpZmVjeWNsZSBob29rLlxuICpcbiAqIGBgYFxuICogY29tcG9uZW50V2lsbExvYWQoKTogdm9pZCB7XG4gKiAgIHNldFVwTG9hZGFibGVDb21wb25lbnQodGhpcyk7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gY29tcG9uZW50XG4gKi9cbmZ1bmN0aW9uIHNldFVwTG9hZGFibGVDb21wb25lbnQoY29tcG9uZW50KSB7XG4gIHByb21pc2VNYXAuc2V0KGNvbXBvbmVudCwgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHJlc29sdmVNYXAuc2V0KGNvbXBvbmVudCwgcmVzb2x2ZSkpKTtcbn1cbi8qKlxuICogVGhpcyBoZWxwZXIgdXRpbCBsZXRzIHRoZSBsb2FkYWJsZSBjb21wb25lbnQga25vdyB0aGF0IGl0IGlzIG5vdyBsb2FkZWQuXG4gKlxuICogVGhpcyBzaG91bGQgYmUgdXNlZCBpbiB0aGUgYGNvbXBvbmVudERpZExvYWRgIGxpZmVjeWNsZSBob29rLlxuICpcbiAqIGBgYFxuICogY29tcG9uZW50RGlkTG9hZCgpOiB2b2lkIHtcbiAqICAgc2V0Q29tcG9uZW50TG9hZGVkKHRoaXMpO1xuICogfVxuICogYGBgXG4gKlxuICogQHBhcmFtIGNvbXBvbmVudFxuICovXG5mdW5jdGlvbiBzZXRDb21wb25lbnRMb2FkZWQoY29tcG9uZW50KSB7XG4gIHJlc29sdmVNYXAuZ2V0KGNvbXBvbmVudCkoKTtcbn1cbi8qKlxuICogVGhpcyBoZWxwZXIgdXRpbCBjYW4gYmUgdXNlZCB0byBlbnN1cmUgYSBjb21wb25lbnQgaGFzIGJlZW4gbG9hZGVkIChUaGUgXCJjb21wb25lbnREaWRMb2FkXCIgU3RlbmNpbCBsaWZlY3ljbGUgbWV0aG9kIGhhcyBiZWVuIGNhbGxlZCkuXG4gKlxuICogUmVxdWlyZXMgcmVxdWlyZXMgYExvYWRhYmxlQ29tcG9uZW50YCB0byBiZSBpbXBsZW1lbnRlZC5cbiAqXG4gKiBBIGNvbXBvbmVudCBkZXZlbG9wZXIgY2FuIGF3YWl0IHRoaXMgbWV0aG9kIGJlZm9yZSBwcm9jZWVkaW5nIHdpdGggYW55IGxvZ2ljIHRoYXQgcmVxdWlyZXMgYSBjb21wb25lbnQgdG8gYmUgbG9hZGVkIGZpcnN0LlxuICpcbiAqIGBgYFxuICogYXN5bmMgbXlNZXRob2QoKTogUHJvbWlzZTx2b2lkPiB7XG4gKiAgIGF3YWl0IGNvbXBvbmVudExvYWRlZCh0aGlzKTtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBjb21wb25lbnRcbiAqIEByZXR1cm5zIFByb21pc2U8dm9pZD5cbiAqL1xuZnVuY3Rpb24gY29tcG9uZW50TG9hZGVkKGNvbXBvbmVudCkge1xuICByZXR1cm4gcHJvbWlzZU1hcC5nZXQoY29tcG9uZW50KTtcbn1cbi8qKlxuICogVGhpcyBoZWxwZXIgdXRpbCBjYW4gYmUgdXNlZCB0byBlbnN1cmluZyB0aGUgY29tcG9uZW50IGlzIGxvYWRlZCBhbmQgcmVuZGVyZWQgYnkgdGhlIGJyb3dzZXIgKFRoZSBcImNvbXBvbmVudERpZExvYWRcIiBTdGVuY2lsIGxpZmVjeWNsZSBtZXRob2QgaGFzIGJlZW4gY2FsbGVkIGFuZCBhbnkgaW50ZXJuYWwgZWxlbWVudHMgYXJlIGZvY3VzYWJsZSkuXG4gKlxuICogUmVxdWlyZXMgcmVxdWlyZXMgYExvYWRhYmxlQ29tcG9uZW50YCB0byBiZSBpbXBsZW1lbnRlZC5cbiAqXG4gKiBBIGNvbXBvbmVudCBkZXZlbG9wZXIgY2FuIGF3YWl0IHRoaXMgbWV0aG9kIGJlZm9yZSBwcm9jZWVkaW5nIHdpdGggYW55IGxvZ2ljIHRoYXQgcmVxdWlyZXMgYSBjb21wb25lbnQgdG8gYmUgbG9hZGVkIGZpcnN0IGFuZCB0aGVuIGFuIGludGVybmFsIGVsZW1lbnQgYmUgZm9jdXNlZC5cbiAqXG4gKiBgYGBcbiAqIGFzeW5jIHNldEZvY3VzKCk6IFByb21pc2U8dm9pZD4ge1xuICogICBhd2FpdCBjb21wb25lbnRGb2N1c2FibGUodGhpcyk7XG4gKiAgIHRoaXMuaW50ZXJuYWxFbGVtZW50Py5mb2N1cygpO1xuICogfVxuICogYGBgXG4gKlxuICogQHBhcmFtIGNvbXBvbmVudFxuICogQHJldHVybnMgUHJvbWlzZTx2b2lkPlxuICovXG5hc3luYyBmdW5jdGlvbiBjb21wb25lbnRGb2N1c2FibGUoY29tcG9uZW50KSB7XG4gIGF3YWl0IGNvbXBvbmVudExvYWRlZChjb21wb25lbnQpO1xuICBpZiAoIUJ1aWxkLmlzQnJvd3Nlcikge1xuICAgIHJldHVybjtcbiAgfVxuICBmb3JjZVVwZGF0ZShjb21wb25lbnQpO1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiByZXNvbHZlKCkpKTtcbn1cblxuZXhwb3J0IHsgc2V0VXBMb2FkYWJsZUNvbXBvbmVudCBhcyBhLCBjb21wb25lbnRMb2FkZWQgYXMgYiwgY29tcG9uZW50Rm9jdXNhYmxlIGFzIGMsIHNldENvbXBvbmVudExvYWRlZCBhcyBzIH07XG4iLCIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL2Jsb2IvbWFpbi9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxuICogdjEuMTEuMFxuICovXG5pbXBvcnQgeyBCdWlsZCB9IGZyb20gJ0BzdGVuY2lsL2NvcmUvaW50ZXJuYWwvY2xpZW50L2luZGV4LmpzJztcblxuY29uc3QgQ1NTID0ge1xuICBjb250YWluZXI6IFwiY29udGFpbmVyXCIsXG4gIGNvbnRhaW5lckJvcmRlclNlbGVjdGVkOiBcImNvbnRhaW5lci0tYm9yZGVyLXNlbGVjdGVkXCIsXG4gIGNvbnRhaW5lckJvcmRlclVuc2VsZWN0ZWQ6IFwiY29udGFpbmVyLS1ib3JkZXItdW5zZWxlY3RlZFwiLFxuICBjb250ZW50Q29udGFpbmVyOiBcImNvbnRlbnQtY29udGFpbmVyXCIsXG4gIGNvbnRlbnRDb250YWluZXJTZWxlY3RhYmxlOiBcImNvbnRlbnQtY29udGFpbmVyLS1zZWxlY3RhYmxlXCIsXG4gIGNvbnRlbnRDb250YWluZXJIYXNDZW50ZXJDb250ZW50OiBcImNvbnRlbnQtY29udGFpbmVyLS1oYXMtY2VudGVyLWNvbnRlbnRcIixcbiAgbmVzdGVkQ29udGFpbmVyOiBcIm5lc3RlZC1jb250YWluZXJcIixcbiAgbmVzdGVkQ29udGFpbmVySGlkZGVuOiBcIm5lc3RlZC1jb250YWluZXItLWhpZGRlblwiLFxuICBjb250ZW50OiBcImNvbnRlbnRcIixcbiAgY3VzdG9tQ29udGVudDogXCJjdXN0b20tY29udGVudFwiLFxuICBhY3Rpb25zU3RhcnQ6IFwiYWN0aW9ucy1zdGFydFwiLFxuICBjb250ZW50U3RhcnQ6IFwiY29udGVudC1zdGFydFwiLFxuICBsYWJlbDogXCJsYWJlbFwiLFxuICBkZXNjcmlwdGlvbjogXCJkZXNjcmlwdGlvblwiLFxuICBjb250ZW50RW5kOiBcImNvbnRlbnQtZW5kXCIsXG4gIGNvbnRlbnRCb3R0b206IFwiY29udGVudC1ib3R0b21cIixcbiAgYWN0aW9uc0VuZDogXCJhY3Rpb25zLWVuZFwiLFxuICBzZWxlY3Rpb25Db250YWluZXI6IFwic2VsZWN0aW9uLWNvbnRhaW5lclwiLFxuICBvcGVuQ29udGFpbmVyOiBcIm9wZW4tY29udGFpbmVyXCIsXG4gIGRyYWdDb250YWluZXI6IFwiZHJhZy1jb250YWluZXJcIixcbn07XG5jb25zdCBTTE9UUyA9IHtcbiAgYWN0aW9uc1N0YXJ0OiBcImFjdGlvbnMtc3RhcnRcIixcbiAgY29udGVudFN0YXJ0OiBcImNvbnRlbnQtc3RhcnRcIixcbiAgY29udGVudDogXCJjb250ZW50XCIsXG4gIGNvbnRlbnRCb3R0b206IFwiY29udGVudC1ib3R0b21cIixcbiAgY29udGVudEVuZDogXCJjb250ZW50LWVuZFwiLFxuICBhY3Rpb25zRW5kOiBcImFjdGlvbnMtZW5kXCIsXG59O1xuLy8gU2V0IHRvIHplcm8gdG8gZXh0ZW5kIHVudGlsIHRoZSBlbmQgb2YgdGhlIHRhYmxlIHNlY3Rpb24uXG5jb25zdCBNQVhfQ09MVU1OUyA9IDA7XG5jb25zdCBJQ09OUyA9IHtcbiAgc2VsZWN0ZWRNdWx0aXBsZTogXCJjaGVjay1jaXJjbGUtZlwiLFxuICBzZWxlY3RlZFNpbmdsZTogXCJjaXJjbGUtZlwiLFxuICB1bnNlbGVjdGVkOiBcImJsYW5rXCIsXG4gIGNsb3NlZExUUjogXCJjYXJldC1yaWdodFwiLFxuICBjbG9zZWRSVEw6IFwiY2FyZXQtbGVmdFwiLFxuICBvcGVuOiBcImNhcmV0LWRvd25cIixcbiAgYmxhbms6IFwiYmxhbmtcIixcbiAgY2xvc2U6IFwieFwiLFxufTtcblxuY29uc3QgbGlzdFNlbGVjdG9yID0gXCJjYWxjaXRlLWxpc3RcIjtcbmNvbnN0IGxpc3RJdGVtR3JvdXBTZWxlY3RvciA9IFwiY2FsY2l0ZS1saXN0LWl0ZW0tZ3JvdXBcIjtcbmNvbnN0IGxpc3RJdGVtU2VsZWN0b3IgPSBcImNhbGNpdGUtbGlzdC1pdGVtXCI7XG5mdW5jdGlvbiBnZXRMaXN0SXRlbUNoaWxkcmVuKHNsb3RFbCkge1xuICBjb25zdCBhc3NpZ25lZEVsZW1lbnRzID0gc2xvdEVsLmFzc2lnbmVkRWxlbWVudHMoeyBmbGF0dGVuOiB0cnVlIH0pO1xuICBjb25zdCBsaXN0SXRlbUdyb3VwQ2hpbGRyZW4gPSBhc3NpZ25lZEVsZW1lbnRzLmZpbHRlcigoZWwpID0+IGVsPy5tYXRjaGVzKGxpc3RJdGVtR3JvdXBTZWxlY3RvcikpXG4gICAgLm1hcCgoZ3JvdXApID0+IEFycmF5LmZyb20oZ3JvdXAucXVlcnlTZWxlY3RvckFsbChsaXN0SXRlbVNlbGVjdG9yKSkpXG4gICAgLnJlZHVjZSgocHJldmlvdXNWYWx1ZSwgY3VycmVudFZhbHVlKSA9PiBbLi4ucHJldmlvdXNWYWx1ZSwgLi4uY3VycmVudFZhbHVlXSwgW10pO1xuICBjb25zdCBsaXN0SXRlbUNoaWxkcmVuID0gYXNzaWduZWRFbGVtZW50cy5maWx0ZXIoKGVsKSA9PiBlbD8ubWF0Y2hlcyhsaXN0SXRlbVNlbGVjdG9yKSk7XG4gIGNvbnN0IGxpc3RJdGVtTGlzdENoaWxkcmVuID0gYXNzaWduZWRFbGVtZW50cy5maWx0ZXIoKGVsKSA9PiBlbD8ubWF0Y2hlcyhsaXN0U2VsZWN0b3IpKVxuICAgIC5tYXAoKGxpc3QpID0+IEFycmF5LmZyb20obGlzdC5xdWVyeVNlbGVjdG9yQWxsKGxpc3RJdGVtU2VsZWN0b3IpKSlcbiAgICAucmVkdWNlKChwcmV2aW91c1ZhbHVlLCBjdXJyZW50VmFsdWUpID0+IFsuLi5wcmV2aW91c1ZhbHVlLCAuLi5jdXJyZW50VmFsdWVdLCBbXSk7XG4gIHJldHVybiBbLi4ubGlzdEl0ZW1MaXN0Q2hpbGRyZW4sIC4uLmxpc3RJdGVtR3JvdXBDaGlsZHJlbiwgLi4ubGlzdEl0ZW1DaGlsZHJlbl07XG59XG5mdW5jdGlvbiB1cGRhdGVMaXN0SXRlbUNoaWxkcmVuKGxpc3RJdGVtQ2hpbGRyZW4pIHtcbiAgbGlzdEl0ZW1DaGlsZHJlbi5mb3JFYWNoKChsaXN0SXRlbSkgPT4ge1xuICAgIGxpc3RJdGVtLnNldFBvc2l0aW9uID0gbGlzdEl0ZW1DaGlsZHJlbi5pbmRleE9mKGxpc3RJdGVtKSArIDE7XG4gICAgbGlzdEl0ZW0uc2V0U2l6ZSA9IGxpc3RJdGVtQ2hpbGRyZW4ubGVuZ3RoO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGdldERlcHRoKGVsZW1lbnQsIGluY2x1ZGVHcm91cCA9IGZhbHNlKSB7XG4gIGlmICghQnVpbGQuaXNCcm93c2VyKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cbiAgY29uc3QgZXhwcmVzc2lvbiA9IGluY2x1ZGVHcm91cFxuICAgID8gXCJhbmNlc3Rvcjo6Y2FsY2l0ZS1saXN0LWl0ZW0gfCBhbmNlc3Rvcjo6Y2FsY2l0ZS1saXN0LWl0ZW0tZ3JvdXBcIlxuICAgIDogXCJhbmNlc3Rvcjo6Y2FsY2l0ZS1saXN0LWl0ZW1cIjtcbiAgY29uc3QgcmVzdWx0ID0gZG9jdW1lbnQuZXZhbHVhdGUoZXhwcmVzc2lvbiwgZWxlbWVudCwgbnVsbCwgWFBhdGhSZXN1bHQuVU5PUkRFUkVEX05PREVfU05BUFNIT1RfVFlQRSwgbnVsbCk7XG4gIHJldHVybiByZXN1bHQuc25hcHNob3RMZW5ndGg7XG59XG5cbmV4cG9ydCB7IENTUyBhcyBDLCBJQ09OUyBhcyBJLCBNQVhfQ09MVU1OUyBhcyBNLCBTTE9UUyBhcyBTLCBnZXREZXB0aCBhcyBhLCBnZXRMaXN0SXRlbUNoaWxkcmVuIGFzIGcsIHVwZGF0ZUxpc3RJdGVtQ2hpbGRyZW4gYXMgdSB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9