"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-c0311a"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-feature-layer-from-scratch.entry.js":
/*!***************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-feature-layer-from-scratch.entry.js ***!
  \***************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   arcgis_new_item_pages_feature_layer_from_scratch: () => (/* binding */ ArcgisNewItemPagesFeatureLayerFromScratch)
/* harmony export */ });
/* harmony import */ var _index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-92ebb396.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-92ebb396.js");
/* harmony import */ var _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config-eb5f7dc2.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/config-eb5f7dc2.js");
/* harmony import */ var _functional_c82f5ab9_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./functional-c82f5ab9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-c82f5ab9.js");
/* harmony import */ var _guid_4f4176ba_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./guid-4f4176ba.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/guid-4f4176ba.js");
/* harmony import */ var _item_properties_e6412a9a_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./item-properties-e6412a9a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-properties-e6412a9a.js");
/* harmony import */ var _ui_ecf86bba_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ui-ecf86bba.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ui-ecf86bba.js");
/* harmony import */ var _feature_layer_69305a85_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./feature-layer-69305a85.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-69305a85.js");
/* harmony import */ var _feature_layer_d33ea114_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./feature-layer-d33ea114.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-d33ea114.js");
/* harmony import */ var _feature_layer_d0f64b81_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./feature-layer-d0f64b81.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-d0f64b81.js");
/* harmony import */ var _type_to_icon_5b71edbc_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./type-to-icon-5b71edbc.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/type-to-icon-5b71edbc.js");
/* harmony import */ var _index_81d548b7_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./index-81d548b7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-81d548b7.js");
/* harmony import */ var _privileges_ccd5f37d_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./privileges-ccd5f37d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/privileges-ccd5f37d.js");
/* harmony import */ var _thumbnail_0b7adfcd_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./thumbnail-0b7adfcd.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/thumbnail-0b7adfcd.js");
/* harmony import */ var _portal_79caaeff_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./portal-79caaeff.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/portal-79caaeff.js");
/* harmony import */ var _loadModules_aaf30bd6_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./loadModules-aaf30bd6.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/loadModules-aaf30bd6.js");
/* harmony import */ var _query_4f7b7e4d_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./query-4f7b7e4d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/query-4f7b7e4d.js");
/* harmony import */ var _user_e3dedc4a_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./user-e3dedc4a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/user-e3dedc4a.js");
/* harmony import */ var _api_f7934cd7_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./api-f7934cd7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/api-f7934cd7.js");
/* harmony import */ var _server_item_f12153e6_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./server-item-f12153e6.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/server-item-f12153e6.js");
/* harmony import */ var _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./add-item-97d577a9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/add-item-97d577a9.js");
/* harmony import */ var _functional_9f648bee_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./functional-9f648bee.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-9f648bee.js");
/* harmony import */ var _item_types_b4fe86ad_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./item-types-b4fe86ad.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-types-b4fe86ad.js");
/* harmony import */ var _item_d9d70416_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./item-d9d70416.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-d9d70416.js");
/* harmony import */ var _dom_13f5b00c_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./dom-13f5b00c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/dom-13f5b00c.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */

























const arcgisNewItemPagesFeatureLayerFromScratchCss = "p{margin-top:0;margin-bottom:0}button{cursor:pointer;transition-duration:200ms;border:none;box-shadow:none;background:transparent;line-height:16px}label{margin-bottom:0}.add-new-container{padding:1.5rem;padding-bottom:2.5rem;margin-top:1rem;margin-bottom:1.5rem;background-color:var(--calcite-ui-background)}.add-layer{margin-top:1rem;width:-moz-fit-content;width:fit-content}.info-card{--calcite-font-size--2:0.875rem;display:flex;align-items:center;flex-grow:1;border-style:solid;border-width:1px;background-color:var(--calcite-ui-foreground-1);border-color:var(--calcite-ui-border-1);padding:1rem}.info-card:not(:last-of-type){border-bottom-width:0}.info-card:first-child{border-top-left-radius:var(--calcite-border-radius);border-top-right-radius:var(--calcite-border-radius)}.info-card:last-child{border-bottom-right-radius:var(--calcite-border-radius);border-bottom-left-radius:var(--calcite-border-radius)}.layer-icon{-webkit-margin-end:1rem;margin-inline-end:1rem}.layer-name-input,.layer-type{flex-grow:1;flex-basis:100%;-webkit-margin-end:1rem;margin-inline-end:1rem}.layer-type:last-child{-webkit-margin-end:0;margin-inline-end:0}";

const ArcgisNewItemPagesFeatureLayerFromScratch = class {
  constructor(hostRef) {
    (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.newItemUpdatePage = (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "newItemUpdatePage", 7);
    /** Used to focus on the correct input when name is missing */
    this.layerNameInputRefs = {};
    /**
     * Used to determine if a layer/table's name field has been changed by the user or not
     *
     * `Record<layer's id, boolean>`
     * */
    this.nameFieldChangedByUser = {};
    this.getDuplicateLayerNameId = () => {
      const { layerInfos } = this;
      const lookupMap = {};
      for (let index = 0; index < layerInfos.length; index++) {
        const { name, id } = layerInfos[index];
        if (lookupMap[name]) {
          return id;
        }
        lookupMap[name] = true;
      }
      return null;
    };
    this.getDefaultName = (prefix) => {
      const { layerInfos } = this;
      const getLayerNameFromIndex = (index) => `${prefix}_${index}`;
      const getIndexFromLayerName = (layerName) => parseInt(layerName.split("_")[1]);
      const latestLayerIndex = layerInfos.reduce((acc, curr) => {
        const index = getIndexFromLayerName(curr.name);
        if (!curr.name.startsWith(prefix) || isNaN(index)) {
          return acc;
        }
        if (acc <= index) {
          return index + 1;
        }
        return acc;
      }, 1);
      return getLayerNameFromIndex(latestLayerIndex);
    };
    this.addLayer = () => {
      const { i18n, layerInfos, getDefaultName, layerNameInputRefs } = this;
      const layerPrefix = i18n.layer;
      const id = (0,_guid_4f4176ba_js__WEBPACK_IMPORTED_MODULE_3__.g)();
      const name = getDefaultName(layerPrefix);
      this.layerInfos = [...layerInfos, { id, type: "point", name }];
      (0,_functional_c82f5ab9_js__WEBPACK_IMPORTED_MODULE_2__.t)(100).then(() => {
        var _a;
        (_a = layerNameInputRefs[id]) === null || _a === void 0 ? void 0 : _a.setFocus();
      });
    };
    this.deleteLayer = (id, index) => {
      const { layerNameInputRefs, layerInfos, nameFieldChangedByUser } = this;
      if (layerInfos.length === 1) {
        return;
      }
      function removeItemFromList(itemList, index) {
        const newArr = [...itemList];
        newArr.splice(index, 1);
        return newArr;
      }
      this.layerInfos = removeItemFromList(layerInfos, index);
      delete layerNameInputRefs[id];
      delete nameFieldChangedByUser[id];
    };
    this.changeLayerName = (index, newName) => {
      const { layerInfos, nameFieldChangedByUser } = this;
      const layer = layerInfos[index];
      layer.name = newName;
      nameFieldChangedByUser[layer.id] = true;
    };
    this.changeLayerType = (index, oldType, newType) => {
      const { layerInfos, nameFieldChangedByUser, i18n, getDefaultName } = this;
      const layer = Object.assign({}, layerInfos[index]);
      // --- Change layer name to another default name if the user has NOT changed the name field
      if (!nameFieldChangedByUser[layer.id]) {
        // https://devtopia.esri.com/WebGIS/arcgis-portal-app/issues/37189
        if (oldType === "table" && newType !== "table") {
          // Switching from table to point/polygon/polyline
          layer.name = getDefaultName(i18n.layer);
        }
        else if (oldType !== "table" && newType === "table") {
          // Switching from point/polygon/polyline to table
          layer.name = getDefaultName(i18n.table);
        }
      }
      layer.type = newType;
      this.layerInfos = [...layerInfos.slice(0, index), layer, ...layerInfos.slice(index + 1)];
    };
    this.setAlertMessage = (type) => {
      this.alertInfo = this.i18n.error[type];
    };
    this.alertInfo = undefined;
    this.layerInfos = [];
    this.layerPreference = {
      captureGPS: false,
      enableZDefaults: false,
      enableMDefaults: false
    };
  }
  async componentWillLoad() {
    this.addCreateI18n = _ui_ecf86bba_js__WEBPACK_IMPORTED_MODULE_5__.u.i18n;
    this.i18n = this.addCreateI18n.featureLayerFromScratch;
    const { layerPreference, newLayerInfos } = (0,_feature_layer_d33ea114_js__WEBPACK_IMPORTED_MODULE_7__.a)();
    this.layerPreference = layerPreference;
    if (newLayerInfos.length <= 0) {
      this.addLayer();
    }
    else {
      this.layerInfos = [...newLayerInfos];
    }
  }
  async handleNext() {
    var _a, _b, _c;
    const { layerInfos, layerNameInputRefs, setAlertMessage, getDuplicateLayerNameId, newItemUpdatePage, layerPreference } = this;
    const { portal } = _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_1__.c;
    const missingNameId = (_a = layerInfos.find((info) => !info.name.trim())) === null || _a === void 0 ? void 0 : _a.id;
    if (missingNameId) {
      (0,_feature_layer_d0f64b81_js__WEBPACK_IMPORTED_MODULE_8__.f)("Missing layer name");
      (_b = layerNameInputRefs[missingNameId]) === null || _b === void 0 ? void 0 : _b.setFocus();
      setAlertMessage("emptyName");
      return;
    }
    const duplicateId = getDuplicateLayerNameId();
    if (duplicateId) {
      (0,_feature_layer_d0f64b81_js__WEBPACK_IMPORTED_MODULE_8__.f)("Layer names must be unique");
      (_c = layerNameInputRefs[duplicateId]) === null || _c === void 0 ? void 0 : _c.setFocus();
      setAlertMessage("duplicateTitle");
      return;
    }
    // https://devtopia.esri.com/WebGIS/arcgis-portal-app/issues/37048
    if (this.layerInfos.length === 1) {
      _item_properties_e6412a9a_js__WEBPACK_IMPORTED_MODULE_4__.i.title = this.layerInfos[0].name;
    }
    (0,_feature_layer_d33ea114_js__WEBPACK_IMPORTED_MODULE_7__.b)(this.layerInfos, layerPreference, portal);
    newItemUpdatePage.emit("itemProperties");
  }
  render() {
    const { i18n, alertInfo, addCreateI18n, addLayer, layerInfos, layerNameInputRefs, deleteLayer, layerPreference, changeLayerName, changeLayerType } = this;
    return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.H, null, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-description", { header: i18n.header }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "add-new-container" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "layer-container" }, layerInfos.map(({ id, name, type: layerType }, index) => {
      const curLayer = layerInfos[index];
      return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("li", { class: "info-card", key: id, value: id }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { value: name, class: "layer-name-input", placeholder: addCreateI18n.featureLayer.placeholders[layerType], onCalciteInputInput: (event) => {
          const node = event.target;
          changeLayerName(index, node.value);
        }, ref: (ele) => (layerNameInputRefs[id] = ele) }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-combobox", { label: addCreateI18n.featureLayer.type[curLayer.type], class: "layer-type", selectionMode: "single", clearDisabled: true, onCalciteComboboxChange: (event) => {
          const node = event.target;
          changeLayerType(index, curLayer.type, node.selectedItems[0].value);
        } }, _feature_layer_69305a85_js__WEBPACK_IMPORTED_MODULE_6__.f
        .filter((type) => type !== "multipatch")
        .map((type) => ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-combobox-item", { textLabel: addCreateI18n.featureLayer.type[type], icon: _type_to_icon_5b71edbc_js__WEBPACK_IMPORTED_MODULE_9__.a[type], selected: curLayer.type === type, value: type })))), layerInfos.length > 1 && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-button", { appearance: "transparent", kind: "danger", scale: "m", href: "", "icon-start": "trash", onClick: () => deleteLayer(id, index) }))));
    })), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-button", { appearance: "transparent", scale: "m", "icon-start": "plus", class: "add-layer", onClick: addLayer }, i18n.add)), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-layer-preference", { i18n: i18n, defaultPreference: layerPreference, onLayerPreferenceChange: (event) => {
        const { layerPreference } = this;
        const detail = event.detail;
        if (!layerPreference.captureGPS && detail.captureGPS) {
          (0,_feature_layer_d0f64b81_js__WEBPACK_IMPORTED_MODULE_8__.e)("captureGPS");
        }
        if (!layerPreference.enableZDefaults && detail.enableZDefaults) {
          (0,_feature_layer_d0f64b81_js__WEBPACK_IMPORTED_MODULE_8__.e)("enableZDefaults");
        }
        if (!layerPreference.enableMDefaults && detail.enableMDefaults) {
          (0,_feature_layer_d0f64b81_js__WEBPACK_IMPORTED_MODULE_8__.e)("enableMDefaults");
        }
        this.layerPreference = event.detail;
      } }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-alert", { heading: alertInfo === null || alertInfo === void 0 ? void 0 : alertInfo.title, description: alertInfo === null || alertInfo === void 0 ? void 0 : alertInfo.description, active: !!alertInfo, onAlertDismiss: () => (this.alertInfo = null) })));
  }
  get el() { return (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.d)(this); }
};
ArcgisNewItemPagesFeatureLayerFromScratch.style = arcgisNewItemPagesFeatureLayerFromScratchCss;




/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-d0f64b81.js":
/*!*******************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-d0f64b81.js ***!
  \*******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ featureServiceEndTelemetry),
/* harmony export */   b: () => (/* binding */ filterChangeTelemetry),
/* harmony export */   c: () => (/* binding */ featureLayerTypeTelemetry),
/* harmony export */   e: () => (/* binding */ enableLayerPreferenceTelemetry),
/* harmony export */   f: () => (/* binding */ featureLayerErrorTelemetry),
/* harmony export */   i: () => (/* binding */ itemExpandedTelemetry)
/* harmony export */ });
/* harmony import */ var _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config-eb5f7dc2.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/config-eb5f7dc2.js");
/* harmony import */ var _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./add-item-97d577a9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/add-item-97d577a9.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */



const TELEMETRY_ID = "create feature layer";
const TELEMETRY_PAGE_NAME = "my content";
const addFeatureLayerTypeToTelemetry = (type) => {
  switch (type) {
    case "build":
      return "blank";
    case "existing":
      return "fs";
    case "template":
      return "template";
    case "link":
      return "url";
  }
};
const enableLayerPreferenceTelemetry = (type) => {
  const telemetry = _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_0__.c.telemetry;
  telemetry === null || telemetry === void 0 ? void 0 : telemetry.stepWorkflow(TELEMETRY_ID, `enable ${type === "captureGPS" ? "gps" : type === "enableZDefaults" ? "z" : "m"}`, {
    category: TELEMETRY_ID,
    attribute: addFeatureLayerTypeToTelemetry(_add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_1__.a.addFeatureLayerType),
    pageName: TELEMETRY_PAGE_NAME
  });
};
const itemExpandedTelemetry = (type) => {
  const telemetry = _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_0__.c.telemetry;
  telemetry === null || telemetry === void 0 ? void 0 : telemetry.stepWorkflow(TELEMETRY_ID, `expand ${type} details`, {
    category: TELEMETRY_ID,
    attribute: addFeatureLayerTypeToTelemetry(_add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_1__.a.addFeatureLayerType),
    pageName: TELEMETRY_PAGE_NAME
  });
};
const filterChangeTelemetry = () => {
  const telemetry = _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_0__.c.telemetry;
  telemetry === null || telemetry === void 0 ? void 0 : telemetry.stepWorkflow(TELEMETRY_ID, "filter", {
    category: TELEMETRY_ID,
    attribute: addFeatureLayerTypeToTelemetry(_add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_1__.a.addFeatureLayerType),
    pageName: TELEMETRY_PAGE_NAME
  });
};
const featureLayerTypeTelemetry = (type) => {
  const telemetryType = addFeatureLayerTypeToTelemetry(type);
  const telemetry = _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_0__.c.telemetry;
  telemetry === null || telemetry === void 0 ? void 0 : telemetry.stepWorkflow(TELEMETRY_ID, "from option", {
    category: TELEMETRY_ID,
    attribute: telemetryType,
    pageName: TELEMETRY_PAGE_NAME
  });
};
const featureServiceEndTelemetry = () => {
  const { addFeatureLayerType, serviceInfo } = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_1__.a;
  const featureLayerServiceInfo = serviceInfo;
  const telemetry = _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_0__.c.telemetry;
  telemetry === null || telemetry === void 0 ? void 0 : telemetry.endWorkflow(TELEMETRY_ID, {
    category: TELEMETRY_ID,
    attribute: addFeatureLayerTypeToTelemetry(addFeatureLayerType),
    pageName: TELEMETRY_PAGE_NAME,
    count: featureLayerServiceInfo.layers.length,
    number: featureLayerServiceInfo.tables.length
  });
};
const featureLayerErrorTelemetry = (errString) => {
  var _a;
  (_a = _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_0__.c.telemetry) === null || _a === void 0 ? void 0 : _a.logError({
    category: TELEMETRY_ID,
    error: errString
  });
};




/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/type-to-icon-5b71edbc.js":
/*!******************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/type-to-icon-5b71edbc.js ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ featureLayerIconInfo),
/* harmony export */   e: () => (/* binding */ esriGeometryIcons),
/* harmony export */   f: () => (/* binding */ fieldTypeIcons)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */
const featureLayerIconInfo = {
  point: "point",
  line: "line",
  polygon: "polygon",
  multipatch: "cube",
  table: "table",
  multipoint: "layer-points"
};
const esriGeometryIcons = {
  esriGeometryPoint: "point",
  esriGeometryPolyline: "line",
  esriGeometryPolygon: "polygon",
  esriGeometryMultiPatch: "cube",
  esriGeometryMultipoint: "point",
  none: "table"
};
const fieldTypeIcons = {
  esriFieldTypeOID: "key",
  esriFieldTypeBoolean: "boolean",
  esriFieldTypeString: "string",
  esriFieldTypeSingle: "number",
  esriFieldTypeDouble: "number",
  esriFieldTypeInteger: "integer",
  esriFieldTypeSmallInteger: "integer",
  esriFieldTypeGlobalID: "key",
  esriFieldTypeDate: "date-time",
  esriFieldTypeBigInteger: "integer",
  esriFieldTypeDateOnly: "calendar",
  esriFieldTypeTimeOnly: "clock",
  esriFieldTypeTimestampOffset: "time-zone"
};




/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXBwLWNvbXBvbmVudHNfZGlzdF9lc21fYXJjZ2lzLWMwMzExYS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDNkc7QUFDckQ7QUFDQTtBQUNUO0FBQzBCO0FBQ3BCO0FBQ2dCO0FBQzJCO0FBQ21CO0FBQzVDO0FBQzFDO0FBQ0s7QUFDRDtBQUNIO0FBQ0s7QUFDTjtBQUNEO0FBQ0Q7QUFDUTtBQUNIO0FBQ0U7QUFDQTtBQUNOO0FBQ0Q7O0FBRTNCLHdEQUF3RCxhQUFhLGdCQUFnQixPQUFPLGVBQWUsMEJBQTBCLFlBQVksZ0JBQWdCLHVCQUF1QixpQkFBaUIsTUFBTSxnQkFBZ0IsbUJBQW1CLGVBQWUsc0JBQXNCLGdCQUFnQixxQkFBcUIsOENBQThDLFdBQVcsZ0JBQWdCLHVCQUF1QixrQkFBa0IsV0FBVyxnQ0FBZ0MsYUFBYSxtQkFBbUIsWUFBWSxtQkFBbUIsaUJBQWlCLGdEQUFnRCx3Q0FBd0MsYUFBYSw4QkFBOEIsc0JBQXNCLHVCQUF1QixvREFBb0QscURBQXFELHNCQUFzQix3REFBd0QsdURBQXVELFlBQVksd0JBQXdCLHVCQUF1Qiw4QkFBOEIsWUFBWSxnQkFBZ0Isd0JBQXdCLHVCQUF1Qix1QkFBdUIscUJBQXFCLG9CQUFvQjs7QUFFM3FDO0FBQ0E7QUFDQSxJQUFJLHFEQUFnQjtBQUNwQiw2QkFBNkIscURBQVc7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxhQUFhO0FBQzNCO0FBQ0EsMEJBQTBCLDJCQUEyQjtBQUNyRCxnQkFBZ0IsV0FBVztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxhQUFhO0FBQzNCLGtEQUFrRCxPQUFPLEdBQUcsTUFBTTtBQUNsRTtBQUNBO0FB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QUFDSDtBQUNBO0FBQ0EsVUFBVSxtQ0FBbUMsRUFBRSxvREFBWTtBQUMzRDtBQUNBLG9CQUFvQixrREFBVztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsUUFBUSxrREFBVztBQUNuQjtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUV5TTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMxRXpNO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRWtGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYW5hbHlzaXMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYXBwLWNvbXBvbmVudHMvZGlzdC9lc20vYXJjZ2lzLW5ldy1pdGVtLXBhZ2VzLWZlYXR1cmUtbGF5ZXItZnJvbS1zY3JhdGNoLmVudHJ5LmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FwcC1jb21wb25lbnRzL2Rpc3QvZXNtL2ZlYXR1cmUtbGF5ZXItZDBmNjRiODEuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYW5hbHlzaXMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYXBwLWNvbXBvbmVudHMvZGlzdC9lc20vdHlwZS10by1pY29uLTViNzFlZGJjLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIHYzLjAuOTlcbiAqL1xuaW1wb3J0IHsgciBhcyByZWdpc3Rlckluc3RhbmNlLCBjIGFzIGNyZWF0ZUV2ZW50LCBoLCBIIGFzIEhvc3QsIGQgYXMgZ2V0RWxlbWVudCB9IGZyb20gJy4vaW5kZXgtOTJlYmIzOTYuanMnO1xuaW1wb3J0IHsgYyBhcyBjb25maWdTdGF0ZSB9IGZyb20gJy4vY29uZmlnLWViNWY3ZGMyLmpzJztcbmltcG9ydCB7IHQgYXMgdGltZW91dCB9IGZyb20gJy4vZnVuY3Rpb25hbC1jODJmNWFiOS5qcyc7XG5pbXBvcnQgeyBnIGFzIGd1aWQgfSBmcm9tICcuL2d1aWQtNGY0MTc2YmEuanMnO1xuaW1wb3J0IHsgaSBhcyBpdGVtUHJvcGVydGllc1N0YXRlIH0gZnJvbSAnLi9pdGVtLXByb3BlcnRpZXMtZTY0MTJhOWEuanMnO1xuaW1wb3J0IHsgdSBhcyB1aVN0b3JlU3RhdGUgfSBmcm9tICcuL3VpLWVjZjg2YmJhLmpzJztcbmltcG9ydCB7IGYgYXMgZmVhdHVyZUxheWVyVHlwZXMgfSBmcm9tICcuL2ZlYXR1cmUtbGF5ZXItNjkzMDVhODUuanMnO1xuaW1wb3J0IHsgYSBhcyBnZXROZXdJbmZvRnJvbVN0b3JlLCBiIGFzIHNhdmVOZXdJbmZvVG9TdG9yZSB9IGZyb20gJy4vZmVhdHVyZS1sYXllci1kMzNlYTExNC5qcyc7XG5pbXBvcnQgeyBmIGFzIGZlYXR1cmVMYXllckVycm9yVGVsZW1ldHJ5LCBlIGFzIGVuYWJsZUxheWVyUHJlZmVyZW5jZVRlbGVtZXRyeSB9IGZyb20gJy4vZmVhdHVyZS1sYXllci1kMGY2NGI4MS5qcyc7XG5pbXBvcnQgeyBhIGFzIGZlYXR1cmVMYXllckljb25JbmZvIH0gZnJvbSAnLi90eXBlLXRvLWljb24tNWI3MWVkYmMuanMnO1xuaW1wb3J0ICcuL2luZGV4LTgxZDU0OGI3LmpzJztcbmltcG9ydCAnLi9wcml2aWxlZ2VzLWNjZDVmMzdkLmpzJztcbmltcG9ydCAnLi90aHVtYm5haWwtMGI3YWRmY2QuanMnO1xuaW1wb3J0ICcuL3BvcnRhbC03OWNhYWVmZi5qcyc7XG5pbXBvcnQgJy4vbG9hZE1vZHVsZXMtYWFmMzBiZDYuanMnO1xuaW1wb3J0ICcuL3F1ZXJ5LTRmN2I3ZTRkLmpzJztcbmltcG9ydCAnLi91c2VyLWUzZGVkYzRhLmpzJztcbmltcG9ydCAnLi9hcGktZjc5MzRjZDcuanMnO1xuaW1wb3J0ICcuL3NlcnZlci1pdGVtLWYxMjE1M2U2LmpzJztcbmltcG9ydCAnLi9hZGQtaXRlbS05N2Q1NzdhOS5qcyc7XG5pbXBvcnQgJy4vZnVuY3Rpb25hbC05ZjY0OGJlZS5qcyc7XG5pbXBvcnQgJy4vaXRlbS10eXBlcy1iNGZlODZhZC5qcyc7XG5pbXBvcnQgJy4vaXRlbS1kOWQ3MDQxNi5qcyc7XG5pbXBvcnQgJy4vZG9tLTEzZjViMDBjLmpzJztcblxuY29uc3QgYXJjZ2lzTmV3SXRlbVBhZ2VzRmVhdHVyZUxheWVyRnJvbVNjcmF0Y2hDc3MgPSBcInB7bWFyZ2luLXRvcDowO21hcmdpbi1ib3R0b206MH1idXR0b257Y3Vyc29yOnBvaW50ZXI7dHJhbnNpdGlvbi1kdXJhdGlvbjoyMDBtcztib3JkZXI6bm9uZTtib3gtc2hhZG93Om5vbmU7YmFja2dyb3VuZDp0cmFuc3BhcmVudDtsaW5lLWhlaWdodDoxNnB4fWxhYmVse21hcmdpbi1ib3R0b206MH0uYWRkLW5ldy1jb250YWluZXJ7cGFkZGluZzoxLjVyZW07cGFkZGluZy1ib3R0b206Mi41cmVtO21hcmdpbi10b3A6MXJlbTttYXJnaW4tYm90dG9tOjEuNXJlbTtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtdWktYmFja2dyb3VuZCl9LmFkZC1sYXllcnttYXJnaW4tdG9wOjFyZW07d2lkdGg6LW1vei1maXQtY29udGVudDt3aWR0aDpmaXQtY29udGVudH0uaW5mby1jYXJkey0tY2FsY2l0ZS1mb250LXNpemUtLTI6MC44NzVyZW07ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtmbGV4LWdyb3c6MTtib3JkZXItc3R5bGU6c29saWQ7Ym9yZGVyLXdpZHRoOjFweDtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtdWktZm9yZWdyb3VuZC0xKTtib3JkZXItY29sb3I6dmFyKC0tY2FsY2l0ZS11aS1ib3JkZXItMSk7cGFkZGluZzoxcmVtfS5pbmZvLWNhcmQ6bm90KDpsYXN0LW9mLXR5cGUpe2JvcmRlci1ib3R0b20td2lkdGg6MH0uaW5mby1jYXJkOmZpcnN0LWNoaWxke2JvcmRlci10b3AtbGVmdC1yYWRpdXM6dmFyKC0tY2FsY2l0ZS1ib3JkZXItcmFkaXVzKTtib3JkZXItdG9wLXJpZ2h0LXJhZGl1czp2YXIoLS1jYWxjaXRlLWJvcmRlci1yYWRpdXMpfS5pbmZvLWNhcmQ6bGFzdC1jaGlsZHtib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czp2YXIoLS1jYWxjaXRlLWJvcmRlci1yYWRpdXMpO2JvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6dmFyKC0tY2FsY2l0ZS1ib3JkZXItcmFkaXVzKX0ubGF5ZXItaWNvbnstd2Via2l0LW1hcmdpbi1lbmQ6MXJlbTttYXJnaW4taW5saW5lLWVuZDoxcmVtfS5sYXllci1uYW1lLWlucHV0LC5sYXllci10eXBle2ZsZXgtZ3JvdzoxO2ZsZXgtYmFzaXM6MTAwJTstd2Via2l0LW1hcmdpbi1lbmQ6MXJlbTttYXJnaW4taW5saW5lLWVuZDoxcmVtfS5sYXllci10eXBlOmxhc3QtY2hpbGR7LXdlYmtpdC1tYXJnaW4tZW5kOjA7bWFyZ2luLWlubGluZS1lbmQ6MH1cIjtcblxuY29uc3QgQXJjZ2lzTmV3SXRlbVBhZ2VzRmVhdHVyZUxheWVyRnJvbVNjcmF0Y2ggPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcbiAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgIHRoaXMubmV3SXRlbVVwZGF0ZVBhZ2UgPSBjcmVhdGVFdmVudCh0aGlzLCBcIm5ld0l0ZW1VcGRhdGVQYWdlXCIsIDcpO1xuICAgIC8qKiBVc2VkIHRvIGZvY3VzIG9uIHRoZSBjb3JyZWN0IGlucHV0IHdoZW4gbmFtZSBpcyBtaXNzaW5nICovXG4gICAgdGhpcy5sYXllck5hbWVJbnB1dFJlZnMgPSB7fTtcbiAgICAvKipcbiAgICAgKiBVc2VkIHRvIGRldGVybWluZSBpZiBhIGxheWVyL3RhYmxlJ3MgbmFtZSBmaWVsZCBoYXMgYmVlbiBjaGFuZ2VkIGJ5IHRoZSB1c2VyIG9yIG5vdFxuICAgICAqXG4gICAgICogYFJlY29yZDxsYXllcidzIGlkLCBib29sZWFuPmBcbiAgICAgKiAqL1xuICAgIHRoaXMubmFtZUZpZWxkQ2hhbmdlZEJ5VXNlciA9IHt9O1xuICAgIHRoaXMuZ2V0RHVwbGljYXRlTGF5ZXJOYW1lSWQgPSAoKSA9PiB7XG4gICAgICBjb25zdCB7IGxheWVySW5mb3MgfSA9IHRoaXM7XG4gICAgICBjb25zdCBsb29rdXBNYXAgPSB7fTtcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBsYXllckluZm9zLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICBjb25zdCB7IG5hbWUsIGlkIH0gPSBsYXllckluZm9zW2luZGV4XTtcbiAgICAgICAgaWYgKGxvb2t1cE1hcFtuYW1lXSkge1xuICAgICAgICAgIHJldHVybiBpZDtcbiAgICAgICAgfVxuICAgICAgICBsb29rdXBNYXBbbmFtZV0gPSB0cnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbiAgICB0aGlzLmdldERlZmF1bHROYW1lID0gKHByZWZpeCkgPT4ge1xuICAgICAgY29uc3QgeyBsYXllckluZm9zIH0gPSB0aGlzO1xuICAgICAgY29uc3QgZ2V0TGF5ZXJOYW1lRnJvbUluZGV4ID0gKGluZGV4KSA9PiBgJHtwcmVmaXh9XyR7aW5kZXh9YDtcbiAgICAgIGNvbnN0IGdldEluZGV4RnJvbUxheWVyTmFtZSA9IChsYXllck5hbWUpID0+IHBhcnNlSW50KGxheWVyTmFtZS5zcGxpdChcIl9cIilbMV0pO1xuICAgICAgY29uc3QgbGF0ZXN0TGF5ZXJJbmRleCA9IGxheWVySW5mb3MucmVkdWNlKChhY2MsIGN1cnIpID0+IHtcbiAgICAgICAgY29uc3QgaW5kZXggPSBnZXRJbmRleEZyb21MYXllck5hbWUoY3Vyci5uYW1lKTtcbiAgICAgICAgaWYgKCFjdXJyLm5hbWUuc3RhcnRzV2l0aChwcmVmaXgpIHx8IGlzTmFOKGluZGV4KSkge1xuICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFjYyA8PSBpbmRleCkge1xuICAgICAgICAgIHJldHVybiBpbmRleCArIDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgIH0sIDEpO1xuICAgICAgcmV0dXJuIGdldExheWVyTmFtZUZyb21JbmRleChsYXRlc3RMYXllckluZGV4KTtcbiAgICB9O1xuICAgIHRoaXMuYWRkTGF5ZXIgPSAoKSA9PiB7XG4gICAgICBjb25zdCB7IGkxOG4sIGxheWVySW5mb3MsIGdldERlZmF1bHROYW1lLCBsYXllck5hbWVJbnB1dFJlZnMgfSA9IHRoaXM7XG4gICAgICBjb25zdCBsYXllclByZWZpeCA9IGkxOG4ubGF5ZXI7XG4gICAgICBjb25zdCBpZCA9IGd1aWQoKTtcbiAgICAgIGNvbnN0IG5hbWUgPSBnZXREZWZhdWx0TmFtZShsYXllclByZWZpeCk7XG4gICAgICB0aGlzLmxheWVySW5mb3MgPSBbLi4ubGF5ZXJJbmZvcywgeyBpZCwgdHlwZTogXCJwb2ludFwiLCBuYW1lIH1dO1xuICAgICAgdGltZW91dCgxMDApLnRoZW4oKCkgPT4ge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIChfYSA9IGxheWVyTmFtZUlucHV0UmVmc1tpZF0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zZXRGb2N1cygpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgICB0aGlzLmRlbGV0ZUxheWVyID0gKGlkLCBpbmRleCkgPT4ge1xuICAgICAgY29uc3QgeyBsYXllck5hbWVJbnB1dFJlZnMsIGxheWVySW5mb3MsIG5hbWVGaWVsZENoYW5nZWRCeVVzZXIgfSA9IHRoaXM7XG4gICAgICBpZiAobGF5ZXJJbmZvcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gcmVtb3ZlSXRlbUZyb21MaXN0KGl0ZW1MaXN0LCBpbmRleCkge1xuICAgICAgICBjb25zdCBuZXdBcnIgPSBbLi4uaXRlbUxpc3RdO1xuICAgICAgICBuZXdBcnIuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgcmV0dXJuIG5ld0FycjtcbiAgICAgIH1cbiAgICAgIHRoaXMubGF5ZXJJbmZvcyA9IHJlbW92ZUl0ZW1Gcm9tTGlzdChsYXllckluZm9zLCBpbmRleCk7XG4gICAgICBkZWxldGUgbGF5ZXJOYW1lSW5wdXRSZWZzW2lkXTtcbiAgICAgIGRlbGV0ZSBuYW1lRmllbGRDaGFuZ2VkQnlVc2VyW2lkXTtcbiAgICB9O1xuICAgIHRoaXMuY2hhbmdlTGF5ZXJOYW1lID0gKGluZGV4LCBuZXdOYW1lKSA9PiB7XG4gICAgICBjb25zdCB7IGxheWVySW5mb3MsIG5hbWVGaWVsZENoYW5nZWRCeVVzZXIgfSA9IHRoaXM7XG4gICAgICBjb25zdCBsYXllciA9IGxheWVySW5mb3NbaW5kZXhdO1xuICAgICAgbGF5ZXIubmFtZSA9IG5ld05hbWU7XG4gICAgICBuYW1lRmllbGRDaGFuZ2VkQnlVc2VyW2xheWVyLmlkXSA9IHRydWU7XG4gICAgfTtcbiAgICB0aGlzLmNoYW5nZUxheWVyVHlwZSA9IChpbmRleCwgb2xkVHlwZSwgbmV3VHlwZSkgPT4ge1xuICAgICAgY29uc3QgeyBsYXllckluZm9zLCBuYW1lRmllbGRDaGFuZ2VkQnlVc2VyLCBpMThuLCBnZXREZWZhdWx0TmFtZSB9ID0gdGhpcztcbiAgICAgIGNvbnN0IGxheWVyID0gT2JqZWN0LmFzc2lnbih7fSwgbGF5ZXJJbmZvc1tpbmRleF0pO1xuICAgICAgLy8gLS0tIENoYW5nZSBsYXllciBuYW1lIHRvIGFub3RoZXIgZGVmYXVsdCBuYW1lIGlmIHRoZSB1c2VyIGhhcyBOT1QgY2hhbmdlZCB0aGUgbmFtZSBmaWVsZFxuICAgICAgaWYgKCFuYW1lRmllbGRDaGFuZ2VkQnlVc2VyW2xheWVyLmlkXSkge1xuICAgICAgICAvLyBodHRwczovL2RldnRvcGlhLmVzcmkuY29tL1dlYkdJUy9hcmNnaXMtcG9ydGFsLWFwcC9pc3N1ZXMvMzcxODlcbiAgICAgICAgaWYgKG9sZFR5cGUgPT09IFwidGFibGVcIiAmJiBuZXdUeXBlICE9PSBcInRhYmxlXCIpIHtcbiAgICAgICAgICAvLyBTd2l0Y2hpbmcgZnJvbSB0YWJsZSB0byBwb2ludC9wb2x5Z29uL3BvbHlsaW5lXG4gICAgICAgICAgbGF5ZXIubmFtZSA9IGdldERlZmF1bHROYW1lKGkxOG4ubGF5ZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9sZFR5cGUgIT09IFwidGFibGVcIiAmJiBuZXdUeXBlID09PSBcInRhYmxlXCIpIHtcbiAgICAgICAgICAvLyBTd2l0Y2hpbmcgZnJvbSBwb2ludC9wb2x5Z29uL3BvbHlsaW5lIHRvIHRhYmxlXG4gICAgICAgICAgbGF5ZXIubmFtZSA9IGdldERlZmF1bHROYW1lKGkxOG4udGFibGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsYXllci50eXBlID0gbmV3VHlwZTtcbiAgICAgIHRoaXMubGF5ZXJJbmZvcyA9IFsuLi5sYXllckluZm9zLnNsaWNlKDAsIGluZGV4KSwgbGF5ZXIsIC4uLmxheWVySW5mb3Muc2xpY2UoaW5kZXggKyAxKV07XG4gICAgfTtcbiAgICB0aGlzLnNldEFsZXJ0TWVzc2FnZSA9ICh0eXBlKSA9PiB7XG4gICAgICB0aGlzLmFsZXJ0SW5mbyA9IHRoaXMuaTE4bi5lcnJvclt0eXBlXTtcbiAgICB9O1xuICAgIHRoaXMuYWxlcnRJbmZvID0gdW5kZWZpbmVkO1xuICAgIHRoaXMubGF5ZXJJbmZvcyA9IFtdO1xuICAgIHRoaXMubGF5ZXJQcmVmZXJlbmNlID0ge1xuICAgICAgY2FwdHVyZUdQUzogZmFsc2UsXG4gICAgICBlbmFibGVaRGVmYXVsdHM6IGZhbHNlLFxuICAgICAgZW5hYmxlTURlZmF1bHRzOiBmYWxzZVxuICAgIH07XG4gIH1cbiAgYXN5bmMgY29tcG9uZW50V2lsbExvYWQoKSB7XG4gICAgdGhpcy5hZGRDcmVhdGVJMThuID0gdWlTdG9yZVN0YXRlLmkxOG47XG4gICAgdGhpcy5pMThuID0gdGhpcy5hZGRDcmVhdGVJMThuLmZlYXR1cmVMYXllckZyb21TY3JhdGNoO1xuICAgIGNvbnN0IHsgbGF5ZXJQcmVmZXJlbmNlLCBuZXdMYXllckluZm9zIH0gPSBnZXROZXdJbmZvRnJvbVN0b3JlKCk7XG4gICAgdGhpcy5sYXllclByZWZlcmVuY2UgPSBsYXllclByZWZlcmVuY2U7XG4gICAgaWYgKG5ld0xheWVySW5mb3MubGVuZ3RoIDw9IDApIHtcbiAgICAgIHRoaXMuYWRkTGF5ZXIoKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLmxheWVySW5mb3MgPSBbLi4ubmV3TGF5ZXJJbmZvc107XG4gICAgfVxuICB9XG4gIGFzeW5jIGhhbmRsZU5leHQoKSB7XG4gICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgY29uc3QgeyBsYXllckluZm9zLCBsYXllck5hbWVJbnB1dFJlZnMsIHNldEFsZXJ0TWVzc2FnZSwgZ2V0RHVwbGljYXRlTGF5ZXJOYW1lSWQsIG5ld0l0ZW1VcGRhdGVQYWdlLCBsYXllclByZWZlcmVuY2UgfSA9IHRoaXM7XG4gICAgY29uc3QgeyBwb3J0YWwgfSA9IGNvbmZpZ1N0YXRlO1xuICAgIGNvbnN0IG1pc3NpbmdOYW1lSWQgPSAoX2EgPSBsYXllckluZm9zLmZpbmQoKGluZm8pID0+ICFpbmZvLm5hbWUudHJpbSgpKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmlkO1xuICAgIGlmIChtaXNzaW5nTmFtZUlkKSB7XG4gICAgICBmZWF0dXJlTGF5ZXJFcnJvclRlbGVtZXRyeShcIk1pc3NpbmcgbGF5ZXIgbmFtZVwiKTtcbiAgICAgIChfYiA9IGxheWVyTmFtZUlucHV0UmVmc1ttaXNzaW5nTmFtZUlkXSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnNldEZvY3VzKCk7XG4gICAgICBzZXRBbGVydE1lc3NhZ2UoXCJlbXB0eU5hbWVcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGR1cGxpY2F0ZUlkID0gZ2V0RHVwbGljYXRlTGF5ZXJOYW1lSWQoKTtcbiAgICBpZiAoZHVwbGljYXRlSWQpIHtcbiAgICAgIGZlYXR1cmVMYXllckVycm9yVGVsZW1ldHJ5KFwiTGF5ZXIgbmFtZXMgbXVzdCBiZSB1bmlxdWVcIik7XG4gICAgICAoX2MgPSBsYXllck5hbWVJbnB1dFJlZnNbZHVwbGljYXRlSWRdKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Muc2V0Rm9jdXMoKTtcbiAgICAgIHNldEFsZXJ0TWVzc2FnZShcImR1cGxpY2F0ZVRpdGxlXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBodHRwczovL2RldnRvcGlhLmVzcmkuY29tL1dlYkdJUy9hcmNnaXMtcG9ydGFsLWFwcC9pc3N1ZXMvMzcwNDhcbiAgICBpZiAodGhpcy5sYXllckluZm9zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgaXRlbVByb3BlcnRpZXNTdGF0ZS50aXRsZSA9IHRoaXMubGF5ZXJJbmZvc1swXS5uYW1lO1xuICAgIH1cbiAgICBzYXZlTmV3SW5mb1RvU3RvcmUodGhpcy5sYXllckluZm9zLCBsYXllclByZWZlcmVuY2UsIHBvcnRhbCk7XG4gICAgbmV3SXRlbVVwZGF0ZVBhZ2UuZW1pdChcIml0ZW1Qcm9wZXJ0aWVzXCIpO1xuICB9XG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IGkxOG4sIGFsZXJ0SW5mbywgYWRkQ3JlYXRlSTE4biwgYWRkTGF5ZXIsIGxheWVySW5mb3MsIGxheWVyTmFtZUlucHV0UmVmcywgZGVsZXRlTGF5ZXIsIGxheWVyUHJlZmVyZW5jZSwgY2hhbmdlTGF5ZXJOYW1lLCBjaGFuZ2VMYXllclR5cGUgfSA9IHRoaXM7XG4gICAgcmV0dXJuIChoKEhvc3QsIG51bGwsIGgoXCJhcmNnaXMtbmV3LWl0ZW0tZGVzY3JpcHRpb25cIiwgeyBoZWFkZXI6IGkxOG4uaGVhZGVyIH0pLCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwiYWRkLW5ldy1jb250YWluZXJcIiB9LCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwibGF5ZXItY29udGFpbmVyXCIgfSwgbGF5ZXJJbmZvcy5tYXAoKHsgaWQsIG5hbWUsIHR5cGU6IGxheWVyVHlwZSB9LCBpbmRleCkgPT4ge1xuICAgICAgY29uc3QgY3VyTGF5ZXIgPSBsYXllckluZm9zW2luZGV4XTtcbiAgICAgIHJldHVybiAoaChcImxpXCIsIHsgY2xhc3M6IFwiaW5mby1jYXJkXCIsIGtleTogaWQsIHZhbHVlOiBpZCB9LCBoKFwiY2FsY2l0ZS1pbnB1dFwiLCB7IHZhbHVlOiBuYW1lLCBjbGFzczogXCJsYXllci1uYW1lLWlucHV0XCIsIHBsYWNlaG9sZGVyOiBhZGRDcmVhdGVJMThuLmZlYXR1cmVMYXllci5wbGFjZWhvbGRlcnNbbGF5ZXJUeXBlXSwgb25DYWxjaXRlSW5wdXRJbnB1dDogKGV2ZW50KSA9PiB7XG4gICAgICAgICAgY29uc3Qgbm9kZSA9IGV2ZW50LnRhcmdldDtcbiAgICAgICAgICBjaGFuZ2VMYXllck5hbWUoaW5kZXgsIG5vZGUudmFsdWUpO1xuICAgICAgICB9LCByZWY6IChlbGUpID0+IChsYXllck5hbWVJbnB1dFJlZnNbaWRdID0gZWxlKSB9KSwgaChcImNhbGNpdGUtY29tYm9ib3hcIiwgeyBsYWJlbDogYWRkQ3JlYXRlSTE4bi5mZWF0dXJlTGF5ZXIudHlwZVtjdXJMYXllci50eXBlXSwgY2xhc3M6IFwibGF5ZXItdHlwZVwiLCBzZWxlY3Rpb25Nb2RlOiBcInNpbmdsZVwiLCBjbGVhckRpc2FibGVkOiB0cnVlLCBvbkNhbGNpdGVDb21ib2JveENoYW5nZTogKGV2ZW50KSA9PiB7XG4gICAgICAgICAgY29uc3Qgbm9kZSA9IGV2ZW50LnRhcmdldDtcbiAgICAgICAgICBjaGFuZ2VMYXllclR5cGUoaW5kZXgsIGN1ckxheWVyLnR5cGUsIG5vZGUuc2VsZWN0ZWRJdGVtc1swXS52YWx1ZSk7XG4gICAgICAgIH0gfSwgZmVhdHVyZUxheWVyVHlwZXNcbiAgICAgICAgLmZpbHRlcigodHlwZSkgPT4gdHlwZSAhPT0gXCJtdWx0aXBhdGNoXCIpXG4gICAgICAgIC5tYXAoKHR5cGUpID0+IChoKFwiY2FsY2l0ZS1jb21ib2JveC1pdGVtXCIsIHsgdGV4dExhYmVsOiBhZGRDcmVhdGVJMThuLmZlYXR1cmVMYXllci50eXBlW3R5cGVdLCBpY29uOiBmZWF0dXJlTGF5ZXJJY29uSW5mb1t0eXBlXSwgc2VsZWN0ZWQ6IGN1ckxheWVyLnR5cGUgPT09IHR5cGUsIHZhbHVlOiB0eXBlIH0pKSkpLCBsYXllckluZm9zLmxlbmd0aCA+IDEgJiYgKGgoXCJjYWxjaXRlLWJ1dHRvblwiLCB7IGFwcGVhcmFuY2U6IFwidHJhbnNwYXJlbnRcIiwga2luZDogXCJkYW5nZXJcIiwgc2NhbGU6IFwibVwiLCBocmVmOiBcIlwiLCBcImljb24tc3RhcnRcIjogXCJ0cmFzaFwiLCBvbkNsaWNrOiAoKSA9PiBkZWxldGVMYXllcihpZCwgaW5kZXgpIH0pKSkpO1xuICAgIH0pKSwgaChcImNhbGNpdGUtYnV0dG9uXCIsIHsgYXBwZWFyYW5jZTogXCJ0cmFuc3BhcmVudFwiLCBzY2FsZTogXCJtXCIsIFwiaWNvbi1zdGFydFwiOiBcInBsdXNcIiwgY2xhc3M6IFwiYWRkLWxheWVyXCIsIG9uQ2xpY2s6IGFkZExheWVyIH0sIGkxOG4uYWRkKSksIGgoXCJhcmNnaXMtbmV3LWl0ZW0tbGF5ZXItcHJlZmVyZW5jZVwiLCB7IGkxOG46IGkxOG4sIGRlZmF1bHRQcmVmZXJlbmNlOiBsYXllclByZWZlcmVuY2UsIG9uTGF5ZXJQcmVmZXJlbmNlQ2hhbmdlOiAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgeyBsYXllclByZWZlcmVuY2UgfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IGRldGFpbCA9IGV2ZW50LmRldGFpbDtcbiAgICAgICAgaWYgKCFsYXllclByZWZlcmVuY2UuY2FwdHVyZUdQUyAmJiBkZXRhaWwuY2FwdHVyZUdQUykge1xuICAgICAgICAgIGVuYWJsZUxheWVyUHJlZmVyZW5jZVRlbGVtZXRyeShcImNhcHR1cmVHUFNcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFsYXllclByZWZlcmVuY2UuZW5hYmxlWkRlZmF1bHRzICYmIGRldGFpbC5lbmFibGVaRGVmYXVsdHMpIHtcbiAgICAgICAgICBlbmFibGVMYXllclByZWZlcmVuY2VUZWxlbWV0cnkoXCJlbmFibGVaRGVmYXVsdHNcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFsYXllclByZWZlcmVuY2UuZW5hYmxlTURlZmF1bHRzICYmIGRldGFpbC5lbmFibGVNRGVmYXVsdHMpIHtcbiAgICAgICAgICBlbmFibGVMYXllclByZWZlcmVuY2VUZWxlbWV0cnkoXCJlbmFibGVNRGVmYXVsdHNcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sYXllclByZWZlcmVuY2UgPSBldmVudC5kZXRhaWw7XG4gICAgICB9IH0pLCBoKFwiYXJjZ2lzLW5ldy1pdGVtLWFsZXJ0XCIsIHsgaGVhZGluZzogYWxlcnRJbmZvID09PSBudWxsIHx8IGFsZXJ0SW5mbyA9PT0gdm9pZCAwID8gdm9pZCAwIDogYWxlcnRJbmZvLnRpdGxlLCBkZXNjcmlwdGlvbjogYWxlcnRJbmZvID09PSBudWxsIHx8IGFsZXJ0SW5mbyA9PT0gdm9pZCAwID8gdm9pZCAwIDogYWxlcnRJbmZvLmRlc2NyaXB0aW9uLCBhY3RpdmU6ICEhYWxlcnRJbmZvLCBvbkFsZXJ0RGlzbWlzczogKCkgPT4gKHRoaXMuYWxlcnRJbmZvID0gbnVsbCkgfSkpKTtcbiAgfVxuICBnZXQgZWwoKSB7IHJldHVybiBnZXRFbGVtZW50KHRoaXMpOyB9XG59O1xuQXJjZ2lzTmV3SXRlbVBhZ2VzRmVhdHVyZUxheWVyRnJvbVNjcmF0Y2guc3R5bGUgPSBhcmNnaXNOZXdJdGVtUGFnZXNGZWF0dXJlTGF5ZXJGcm9tU2NyYXRjaENzcztcblxuZXhwb3J0IHsgQXJjZ2lzTmV3SXRlbVBhZ2VzRmVhdHVyZUxheWVyRnJvbVNjcmF0Y2ggYXMgYXJjZ2lzX25ld19pdGVtX3BhZ2VzX2ZlYXR1cmVfbGF5ZXJfZnJvbV9zY3JhdGNoIH07XG4iLCIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiB2My4wLjk5XG4gKi9cbmltcG9ydCB7IGMgYXMgY29uZmlnU3RhdGUgfSBmcm9tICcuL2NvbmZpZy1lYjVmN2RjMi5qcyc7XG5pbXBvcnQgeyBhIGFzIGFkZEl0ZW1TdGF0ZSB9IGZyb20gJy4vYWRkLWl0ZW0tOTdkNTc3YTkuanMnO1xuXG5jb25zdCBURUxFTUVUUllfSUQgPSBcImNyZWF0ZSBmZWF0dXJlIGxheWVyXCI7XG5jb25zdCBURUxFTUVUUllfUEFHRV9OQU1FID0gXCJteSBjb250ZW50XCI7XG5jb25zdCBhZGRGZWF0dXJlTGF5ZXJUeXBlVG9UZWxlbWV0cnkgPSAodHlwZSkgPT4ge1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlIFwiYnVpbGRcIjpcbiAgICAgIHJldHVybiBcImJsYW5rXCI7XG4gICAgY2FzZSBcImV4aXN0aW5nXCI6XG4gICAgICByZXR1cm4gXCJmc1wiO1xuICAgIGNhc2UgXCJ0ZW1wbGF0ZVwiOlxuICAgICAgcmV0dXJuIFwidGVtcGxhdGVcIjtcbiAgICBjYXNlIFwibGlua1wiOlxuICAgICAgcmV0dXJuIFwidXJsXCI7XG4gIH1cbn07XG5jb25zdCBlbmFibGVMYXllclByZWZlcmVuY2VUZWxlbWV0cnkgPSAodHlwZSkgPT4ge1xuICBjb25zdCB0ZWxlbWV0cnkgPSBjb25maWdTdGF0ZS50ZWxlbWV0cnk7XG4gIHRlbGVtZXRyeSA9PT0gbnVsbCB8fCB0ZWxlbWV0cnkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHRlbGVtZXRyeS5zdGVwV29ya2Zsb3coVEVMRU1FVFJZX0lELCBgZW5hYmxlICR7dHlwZSA9PT0gXCJjYXB0dXJlR1BTXCIgPyBcImdwc1wiIDogdHlwZSA9PT0gXCJlbmFibGVaRGVmYXVsdHNcIiA/IFwielwiIDogXCJtXCJ9YCwge1xuICAgIGNhdGVnb3J5OiBURUxFTUVUUllfSUQsXG4gICAgYXR0cmlidXRlOiBhZGRGZWF0dXJlTGF5ZXJUeXBlVG9UZWxlbWV0cnkoYWRkSXRlbVN0YXRlLmFkZEZlYXR1cmVMYXllclR5cGUpLFxuICAgIHBhZ2VOYW1lOiBURUxFTUVUUllfUEFHRV9OQU1FXG4gIH0pO1xufTtcbmNvbnN0IGl0ZW1FeHBhbmRlZFRlbGVtZXRyeSA9ICh0eXBlKSA9PiB7XG4gIGNvbnN0IHRlbGVtZXRyeSA9IGNvbmZpZ1N0YXRlLnRlbGVtZXRyeTtcbiAgdGVsZW1ldHJ5ID09PSBudWxsIHx8IHRlbGVtZXRyeSA9PT0gdm9pZCAwID8gdm9pZCAwIDogdGVsZW1ldHJ5LnN0ZXBXb3JrZmxvdyhURUxFTUVUUllfSUQsIGBleHBhbmQgJHt0eXBlfSBkZXRhaWxzYCwge1xuICAgIGNhdGVnb3J5OiBURUxFTUVUUllfSUQsXG4gICAgYXR0cmlidXRlOiBhZGRGZWF0dXJlTGF5ZXJUeXBlVG9UZWxlbWV0cnkoYWRkSXRlbVN0YXRlLmFkZEZlYXR1cmVMYXllclR5cGUpLFxuICAgIHBhZ2VOYW1lOiBURUxFTUVUUllfUEFHRV9OQU1FXG4gIH0pO1xufTtcbmNvbnN0IGZpbHRlckNoYW5nZVRlbGVtZXRyeSA9ICgpID0+IHtcbiAgY29uc3QgdGVsZW1ldHJ5ID0gY29uZmlnU3RhdGUudGVsZW1ldHJ5O1xuICB0ZWxlbWV0cnkgPT09IG51bGwgfHwgdGVsZW1ldHJ5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0ZWxlbWV0cnkuc3RlcFdvcmtmbG93KFRFTEVNRVRSWV9JRCwgXCJmaWx0ZXJcIiwge1xuICAgIGNhdGVnb3J5OiBURUxFTUVUUllfSUQsXG4gICAgYXR0cmlidXRlOiBhZGRGZWF0dXJlTGF5ZXJUeXBlVG9UZWxlbWV0cnkoYWRkSXRlbVN0YXRlLmFkZEZlYXR1cmVMYXllclR5cGUpLFxuICAgIHBhZ2VOYW1lOiBURUxFTUVUUllfUEFHRV9OQU1FXG4gIH0pO1xufTtcbmNvbnN0IGZlYXR1cmVMYXllclR5cGVUZWxlbWV0cnkgPSAodHlwZSkgPT4ge1xuICBjb25zdCB0ZWxlbWV0cnlUeXBlID0gYWRkRmVhdHVyZUxheWVyVHlwZVRvVGVsZW1ldHJ5KHR5cGUpO1xuICBjb25zdCB0ZWxlbWV0cnkgPSBjb25maWdTdGF0ZS50ZWxlbWV0cnk7XG4gIHRlbGVtZXRyeSA9PT0gbnVsbCB8fCB0ZWxlbWV0cnkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHRlbGVtZXRyeS5zdGVwV29ya2Zsb3coVEVMRU1FVFJZX0lELCBcImZyb20gb3B0aW9uXCIsIHtcbiAgICBjYXRlZ29yeTogVEVMRU1FVFJZX0lELFxuICAgIGF0dHJpYnV0ZTogdGVsZW1ldHJ5VHlwZSxcbiAgICBwYWdlTmFtZTogVEVMRU1FVFJZX1BBR0VfTkFNRVxuICB9KTtcbn07XG5jb25zdCBmZWF0dXJlU2VydmljZUVuZFRlbGVtZXRyeSA9ICgpID0+IHtcbiAgY29uc3QgeyBhZGRGZWF0dXJlTGF5ZXJUeXBlLCBzZXJ2aWNlSW5mbyB9ID0gYWRkSXRlbVN0YXRlO1xuICBjb25zdCBmZWF0dXJlTGF5ZXJTZXJ2aWNlSW5mbyA9IHNlcnZpY2VJbmZvO1xuICBjb25zdCB0ZWxlbWV0cnkgPSBjb25maWdTdGF0ZS50ZWxlbWV0cnk7XG4gIHRlbGVtZXRyeSA9PT0gbnVsbCB8fCB0ZWxlbWV0cnkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHRlbGVtZXRyeS5lbmRXb3JrZmxvdyhURUxFTUVUUllfSUQsIHtcbiAgICBjYXRlZ29yeTogVEVMRU1FVFJZX0lELFxuICAgIGF0dHJpYnV0ZTogYWRkRmVhdHVyZUxheWVyVHlwZVRvVGVsZW1ldHJ5KGFkZEZlYXR1cmVMYXllclR5cGUpLFxuICAgIHBhZ2VOYW1lOiBURUxFTUVUUllfUEFHRV9OQU1FLFxuICAgIGNvdW50OiBmZWF0dXJlTGF5ZXJTZXJ2aWNlSW5mby5sYXllcnMubGVuZ3RoLFxuICAgIG51bWJlcjogZmVhdHVyZUxheWVyU2VydmljZUluZm8udGFibGVzLmxlbmd0aFxuICB9KTtcbn07XG5jb25zdCBmZWF0dXJlTGF5ZXJFcnJvclRlbGVtZXRyeSA9IChlcnJTdHJpbmcpID0+IHtcbiAgdmFyIF9hO1xuICAoX2EgPSBjb25maWdTdGF0ZS50ZWxlbWV0cnkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5sb2dFcnJvcih7XG4gICAgY2F0ZWdvcnk6IFRFTEVNRVRSWV9JRCxcbiAgICBlcnJvcjogZXJyU3RyaW5nXG4gIH0pO1xufTtcblxuZXhwb3J0IHsgZmVhdHVyZVNlcnZpY2VFbmRUZWxlbWV0cnkgYXMgYSwgZmlsdGVyQ2hhbmdlVGVsZW1ldHJ5IGFzIGIsIGZlYXR1cmVMYXllclR5cGVUZWxlbWV0cnkgYXMgYywgZW5hYmxlTGF5ZXJQcmVmZXJlbmNlVGVsZW1ldHJ5IGFzIGUsIGZlYXR1cmVMYXllckVycm9yVGVsZW1ldHJ5IGFzIGYsIGl0ZW1FeHBhbmRlZFRlbGVtZXRyeSBhcyBpIH07XG4iLCIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiB2My4wLjk5XG4gKi9cbmNvbnN0IGZlYXR1cmVMYXllckljb25JbmZvID0ge1xuICBwb2ludDogXCJwb2ludFwiLFxuICBsaW5lOiBcImxpbmVcIixcbiAgcG9seWdvbjogXCJwb2x5Z29uXCIsXG4gIG11bHRpcGF0Y2g6IFwiY3ViZVwiLFxuICB0YWJsZTogXCJ0YWJsZVwiLFxuICBtdWx0aXBvaW50OiBcImxheWVyLXBvaW50c1wiXG59O1xuY29uc3QgZXNyaUdlb21ldHJ5SWNvbnMgPSB7XG4gIGVzcmlHZW9tZXRyeVBvaW50OiBcInBvaW50XCIsXG4gIGVzcmlHZW9tZXRyeVBvbHlsaW5lOiBcImxpbmVcIixcbiAgZXNyaUdlb21ldHJ5UG9seWdvbjogXCJwb2x5Z29uXCIsXG4gIGVzcmlHZW9tZXRyeU11bHRpUGF0Y2g6IFwiY3ViZVwiLFxuICBlc3JpR2VvbWV0cnlNdWx0aXBvaW50OiBcInBvaW50XCIsXG4gIG5vbmU6IFwidGFibGVcIlxufTtcbmNvbnN0IGZpZWxkVHlwZUljb25zID0ge1xuICBlc3JpRmllbGRUeXBlT0lEOiBcImtleVwiLFxuICBlc3JpRmllbGRUeXBlQm9vbGVhbjogXCJib29sZWFuXCIsXG4gIGVzcmlGaWVsZFR5cGVTdHJpbmc6IFwic3RyaW5nXCIsXG4gIGVzcmlGaWVsZFR5cGVTaW5nbGU6IFwibnVtYmVyXCIsXG4gIGVzcmlGaWVsZFR5cGVEb3VibGU6IFwibnVtYmVyXCIsXG4gIGVzcmlGaWVsZFR5cGVJbnRlZ2VyOiBcImludGVnZXJcIixcbiAgZXNyaUZpZWxkVHlwZVNtYWxsSW50ZWdlcjogXCJpbnRlZ2VyXCIsXG4gIGVzcmlGaWVsZFR5cGVHbG9iYWxJRDogXCJrZXlcIixcbiAgZXNyaUZpZWxkVHlwZURhdGU6IFwiZGF0ZS10aW1lXCIsXG4gIGVzcmlGaWVsZFR5cGVCaWdJbnRlZ2VyOiBcImludGVnZXJcIixcbiAgZXNyaUZpZWxkVHlwZURhdGVPbmx5OiBcImNhbGVuZGFyXCIsXG4gIGVzcmlGaWVsZFR5cGVUaW1lT25seTogXCJjbG9ja1wiLFxuICBlc3JpRmllbGRUeXBlVGltZXN0YW1wT2Zmc2V0OiBcInRpbWUtem9uZVwiXG59O1xuXG5leHBvcnQgeyBmZWF0dXJlTGF5ZXJJY29uSW5mbyBhcyBhLCBlc3JpR2VvbWV0cnlJY29ucyBhcyBlLCBmaWVsZFR5cGVJY29ucyBhcyBmIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=