"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-new-ite-a245d0"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-feature-layer-from-template.entry.js":
/*!****************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-feature-layer-from-template.entry.js ***!
  \****************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   arcgis_new_item_pages_feature_layer_from_template: () => (/* binding */ ArcgisNewItemPagesFeatureLayerFromTemplate)
/* harmony export */ });
/* harmony import */ var _index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-92ebb396.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-92ebb396.js");
/* harmony import */ var _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config-eb5f7dc2.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/config-eb5f7dc2.js");
/* harmony import */ var _portal_79caaeff_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./portal-79caaeff.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/portal-79caaeff.js");
/* harmony import */ var _feature_layer_38cdae87_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./feature-layer-38cdae87.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-38cdae87.js");
/* harmony import */ var _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./add-item-97d577a9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/add-item-97d577a9.js");
/* harmony import */ var _ui_ecf86bba_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ui-ecf86bba.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ui-ecf86bba.js");
/* harmony import */ var _feature_layer_d33ea114_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./feature-layer-d33ea114.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-d33ea114.js");
/* harmony import */ var _feature_layer_d0f64b81_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./feature-layer-d0f64b81.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-d0f64b81.js");
/* harmony import */ var _index_81d548b7_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./index-81d548b7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-81d548b7.js");
/* harmony import */ var _loadModules_aaf30bd6_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./loadModules-aaf30bd6.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/loadModules-aaf30bd6.js");
/* harmony import */ var _privileges_ccd5f37d_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./privileges-ccd5f37d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/privileges-ccd5f37d.js");
/* harmony import */ var _functional_c82f5ab9_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./functional-c82f5ab9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-c82f5ab9.js");
/* harmony import */ var _item_properties_e6412a9a_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./item-properties-e6412a9a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-properties-e6412a9a.js");
/* harmony import */ var _functional_9f648bee_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./functional-9f648bee.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-9f648bee.js");
/* harmony import */ var _server_item_f12153e6_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./server-item-f12153e6.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/server-item-f12153e6.js");
/* harmony import */ var _item_types_b4fe86ad_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./item-types-b4fe86ad.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-types-b4fe86ad.js");
/* harmony import */ var _ags_68d4ae20_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./ags-68d4ae20.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ags-68d4ae20.js");
/* harmony import */ var _url_f3b82cc7_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./url-f3b82cc7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/url-f3b82cc7.js");
/* harmony import */ var _storage_d7f5822e_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./storage-d7f5822e.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/storage-d7f5822e.js");
/* harmony import */ var _file_f36193e9_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./file-f36193e9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/file-f36193e9.js");
/* harmony import */ var _guid_4f4176ba_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./guid-4f4176ba.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/guid-4f4176ba.js");
/* harmony import */ var _store_3210b604_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./store-3210b604.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/store-3210b604.js");
/* harmony import */ var _thumbnail_0b7adfcd_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./thumbnail-0b7adfcd.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/thumbnail-0b7adfcd.js");
/* harmony import */ var _query_4f7b7e4d_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./query-4f7b7e4d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/query-4f7b7e4d.js");
/* harmony import */ var _user_e3dedc4a_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./user-e3dedc4a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/user-e3dedc4a.js");
/* harmony import */ var _api_f7934cd7_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./api-f7934cd7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/api-f7934cd7.js");
/* harmony import */ var _item_d9d70416_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./item-d9d70416.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-d9d70416.js");
/* harmony import */ var _dom_13f5b00c_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./dom-13f5b00c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/dom-13f5b00c.js");
/* harmony import */ var _feature_layer_69305a85_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./feature-layer-69305a85.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-69305a85.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */






























const esriLocaleMap = {
  "de-ch": "esri_de",
  "de-de": "esri_de",
  "en-au": "esri_en",
  "en-ca": "esri_en",
  "en-gb": "esri_en",
  "en-us": "esri_en",
  "es-es": "esri_es",
  "es-mx": "esri_es",
  "fr-ch": "esri_fr",
  "fr-fr": "esri_fr",
  id: "esri_ind",
  "it-ch": "esri_it",
  "it-it": "esri_it",
  "pt-br": "esri_pt",
  "pt-pt": "esri_po",
  uk: "esri_ukr",
  "zh-hk": "esri_hk",
  "zh-tw": "esri_tw",
  "zh-cn": "esri_zh"
};
/**
 * Return the esri_x owner for the given locale.
 */
function getEsriUserForLocale(locale) {
  var _a;
  const lang = (locale === null || locale === void 0 ? void 0 : locale.toLowerCase()) || "en";
  return (_a = esriLocaleMap[lang]) !== null && _a !== void 0 ? _a : `esri_${lang}`;
}

/**
 * Find the ID of the group which stores template feature layers
 */
async function fetchTemplatesGroup(lang) {
  var _a, _b;
  const esriUser = getEsriUserForLocale(lang);
  const response = await (0,_portal_79caaeff_js__WEBPACK_IMPORTED_MODULE_2__.q)({ q: `title: "Esri Layer Templates" AND owner: ${esriUser}`, num: 1 });
  return ((_b = (_a = response.results) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.id) || "";
}

const ArcgisNewItemPagesFeatureLayerFromTemplate = class {
  constructor(hostRef) {
    (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.newItemUpdatePage = (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "newItemUpdatePage", 7);
    this.blacklist = `"sourceId#PointsLinesPolygons" OR "sourceId#Points" OR "sourceId#Lines" OR "sourceId#Polygons"`;
    this.selectedTemplate = undefined;
    this.error = undefined;
  }
  async componentWillLoad() {
    this.i18n = _ui_ecf86bba_js__WEBPACK_IMPORTED_MODULE_5__.u.i18n.featureLayerFromTemplate;
    this.templateGroupID = this.templateGroupID || (await fetchTemplatesGroup(_config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_1__.c.lang));
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.serviceInfo = null;
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.selectedServiceInfoLayersNames = null;
  }
  async handleNext() {
    const { selectedTemplate } = this;
    if (!selectedTemplate) {
      (0,_feature_layer_d0f64b81_js__WEBPACK_IMPORTED_MODULE_7__.f)("No template selected");
      this.error = true;
      return;
    }
    const { portal } = _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_1__.c;
    const serviceInfo = await (0,_feature_layer_38cdae87_js__WEBPACK_IMPORTED_MODULE_3__.z)(selectedTemplate, portal);
    // https://devtopia.esri.com/WebGIS/arcgis-portal-app/issues/39179#issuecomment-3448405
    serviceInfo.enableZDefaults = serviceInfo.serviceItemId === "19a4cead1af64f579d664f1dfdb50574";
    const typeKeywords = selectedTemplate.typeKeywords;
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.serviceInfo = serviceInfo;
    if (_config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_1__.c.portal.isPortal) {
      typeKeywords.push("providerSDS");
    }
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.typeKeywords = selectedTemplate.typeKeywords;
    _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_4__.a.sourceTitle = selectedTemplate.title;
    (0,_feature_layer_d33ea114_js__WEBPACK_IMPORTED_MODULE_6__.s)(selectedTemplate);
    this.newItemUpdatePage.emit("featureLayerSummary");
  }
  filterHandler() {
    (0,_feature_layer_d0f64b81_js__WEBPACK_IMPORTED_MODULE_7__.b)();
  }
  render() {
    const { templateGroupID, i18n, error, blacklist } = this;
    return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.H, null, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-feature-layer-browser", { query: `group:${templateGroupID} type:"Layer Template" typekeywords: "Service Template" -typekeywords:(${blacklist}) -type:"Attachment"`, sortDropdownOptions: ["title", "relevance", "modified"], hideBucketSelect: true, filterSlot: (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-item-browser-filters", { slot: "filters" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-item-browser-filter-industry", { expanded: true })), onItemSelected: ({ detail }) => {
        this.selectedTemplate = detail;
        this.error = false;
      }, showOwner: false, showDateUpdated: false, showItemType: false, showSummary: true, showThumbnail: false }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-alert", { heading: i18n.errorHeading, description: i18n.errorDescription, active: error, onAlertDismiss: () => {
        this.error = false;
      } })));
  }
  get el() { return (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.d)(this); }
};




/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-d0f64b81.js":
/*!*******************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-d0f64b81.js ***!
  \*******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ featureServiceEndTelemetry),
/* harmony export */   b: () => (/* binding */ filterChangeTelemetry),
/* harmony export */   c: () => (/* binding */ featureLayerTypeTelemetry),
/* harmony export */   e: () => (/* binding */ enableLayerPreferenceTelemetry),
/* harmony export */   f: () => (/* binding */ featureLayerErrorTelemetry),
/* harmony export */   i: () => (/* binding */ itemExpandedTelemetry)
/* harmony export */ });
/* harmony import */ var _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config-eb5f7dc2.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/config-eb5f7dc2.js");
/* harmony import */ var _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./add-item-97d577a9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/add-item-97d577a9.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */



const TELEMETRY_ID = "create feature layer";
const TELEMETRY_PAGE_NAME = "my content";
const addFeatureLayerTypeToTelemetry = (type) => {
  switch (type) {
    case "build":
      return "blank";
    case "existing":
      return "fs";
    case "template":
      return "template";
    case "link":
      return "url";
  }
};
const enableLayerPreferenceTelemetry = (type) => {
  const telemetry = _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_0__.c.telemetry;
  telemetry === null || telemetry === void 0 ? void 0 : telemetry.stepWorkflow(TELEMETRY_ID, `enable ${type === "captureGPS" ? "gps" : type === "enableZDefaults" ? "z" : "m"}`, {
    category: TELEMETRY_ID,
    attribute: addFeatureLayerTypeToTelemetry(_add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_1__.a.addFeatureLayerType),
    pageName: TELEMETRY_PAGE_NAME
  });
};
const itemExpandedTelemetry = (type) => {
  const telemetry = _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_0__.c.telemetry;
  telemetry === null || telemetry === void 0 ? void 0 : telemetry.stepWorkflow(TELEMETRY_ID, `expand ${type} details`, {
    category: TELEMETRY_ID,
    attribute: addFeatureLayerTypeToTelemetry(_add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_1__.a.addFeatureLayerType),
    pageName: TELEMETRY_PAGE_NAME
  });
};
const filterChangeTelemetry = () => {
  const telemetry = _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_0__.c.telemetry;
  telemetry === null || telemetry === void 0 ? void 0 : telemetry.stepWorkflow(TELEMETRY_ID, "filter", {
    category: TELEMETRY_ID,
    attribute: addFeatureLayerTypeToTelemetry(_add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_1__.a.addFeatureLayerType),
    pageName: TELEMETRY_PAGE_NAME
  });
};
const featureLayerTypeTelemetry = (type) => {
  const telemetryType = addFeatureLayerTypeToTelemetry(type);
  const telemetry = _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_0__.c.telemetry;
  telemetry === null || telemetry === void 0 ? void 0 : telemetry.stepWorkflow(TELEMETRY_ID, "from option", {
    category: TELEMETRY_ID,
    attribute: telemetryType,
    pageName: TELEMETRY_PAGE_NAME
  });
};
const featureServiceEndTelemetry = () => {
  const { addFeatureLayerType, serviceInfo } = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_1__.a;
  const featureLayerServiceInfo = serviceInfo;
  const telemetry = _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_0__.c.telemetry;
  telemetry === null || telemetry === void 0 ? void 0 : telemetry.endWorkflow(TELEMETRY_ID, {
    category: TELEMETRY_ID,
    attribute: addFeatureLayerTypeToTelemetry(addFeatureLayerType),
    pageName: TELEMETRY_PAGE_NAME,
    count: featureLayerServiceInfo.layers.length,
    number: featureLayerServiceInfo.tables.length
  });
};
const featureLayerErrorTelemetry = (errString) => {
  var _a;
  (_a = _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_0__.c.telemetry) === null || _a === void 0 ? void 0 : _a.logError({
    category: TELEMETRY_ID,
    error: errString
  });
};




/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXBwLWNvbXBvbmVudHNfZGlzdF9lc21fYXJjZ2lzLW5ldy1pdGUtYTI0NWQwLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQzZHO0FBQ3JEO0FBQ0E7QUFDWTtBQUNUO0FBQ047QUFDMkI7QUFDMEI7QUFDN0U7QUFDTTtBQUNEO0FBQ0E7QUFDSztBQUNMO0FBQ0M7QUFDRDtBQUNQO0FBQ0E7QUFDSTtBQUNIO0FBQ0E7QUFDQztBQUNJO0FBQ0o7QUFDRDtBQUNEO0FBQ0M7QUFDRDtBQUNVOztBQUVyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2RUFBNkUsS0FBSztBQUNsRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsc0RBQVcsR0FBRywrQ0FBK0MsU0FBUyxXQUFXO0FBQzFHO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUkscURBQWdCO0FBQ3BCLDZCQUE2QixxREFBVztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDhDQUFZO0FBQzVCLDhFQUE4RSxrREFBVztBQUN6RixJQUFJLG9EQUFZO0FBQ2hCLElBQUksb0RBQVk7QUFDaEI7QUFDQTtBQUNBLFlBQVksbUJBQW1CO0FBQy9CO0FBQ0EsTUFBTSw2REFBMEI7QUFDaEM7QUFDQTtBQUNBO0FBQ0EsWUFBWSxTQUFTLEVBQUUsa0RBQVc7QUFDbEMsOEJBQThCLDZEQUFnQjtBQUM5QztBQUNBO0FBQ0E7QUFDQSxJQUFJLG9EQUFZO0FBQ2hCLFFBQVEsa0RBQVc7QUFDbkI7QUFDQTtBQUNBLElBQUksb0RBQVk7QUFDaEIsSUFBSSxvREFBWTtBQUNoQixJQUFJLDZEQUE0QjtBQUNoQztBQUNBO0FBQ0E7QUFDQSxJQUFJLDZEQUFxQjtBQUN6QjtBQUNBO0FBQ0EsWUFBWSwwQ0FBMEM7QUFDdEQsWUFBWSxxREFBQyxDQUFDLGlEQUFJLFFBQVEscURBQUMsNENBQTRDLGdCQUFnQixpQkFBaUIsd0VBQXdFLFVBQVUsb0hBQW9ILHFEQUFDLGtDQUFrQyxpQkFBaUIsRUFBRSxxREFBQywwQ0FBMEMsZ0JBQWdCLHVCQUF1QixRQUFRO0FBQzliO0FBQ0E7QUFDQSxPQUFPLDBHQUEwRyxHQUFHLHFEQUFDLDRCQUE0QjtBQUNqSjtBQUNBLFNBQVM7QUFDVDtBQUNBLGFBQWEsT0FBTyxxREFBVTtBQUM5Qjs7QUFFMkc7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM1SDNHO0FBQ0E7QUFDQTtBQUNBO0FBQ3dEO0FBQ0c7O0FBRTNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixrREFBVztBQUMvQix1R0FBdUcsdUVBQXVFO0FBQzlLO0FBQ0EsOENBQThDLG9EQUFZO0FBQzFEO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxvQkFBb0Isa0RBQVc7QUFDL0IsdUdBQXVHLE1BQU07QUFDN0c7QUFDQSw4Q0FBOEMsb0RBQVk7QUFDMUQ7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLG9CQUFvQixrREFBVztBQUMvQjtBQUNBO0FBQ0EsOENBQThDLG9EQUFZO0FBQzFEO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixrREFBVztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsVUFBVSxtQ0FBbUMsRUFBRSxvREFBWTtBQUMzRDtBQUNBLG9CQUFvQixrREFBVztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsUUFBUSxrREFBVztBQUNuQjtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUV5TSIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FwcC1jb21wb25lbnRzL2Rpc3QvZXNtL2FyY2dpcy1uZXctaXRlbS1wYWdlcy1mZWF0dXJlLWxheWVyLWZyb20tdGVtcGxhdGUuZW50cnkuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYW5hbHlzaXMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYXBwLWNvbXBvbmVudHMvZGlzdC9lc20vZmVhdHVyZS1sYXllci1kMGY2NGI4MS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiB2My4wLjk5XG4gKi9cbmltcG9ydCB7IHIgYXMgcmVnaXN0ZXJJbnN0YW5jZSwgYyBhcyBjcmVhdGVFdmVudCwgaCwgSCBhcyBIb3N0LCBkIGFzIGdldEVsZW1lbnQgfSBmcm9tICcuL2luZGV4LTkyZWJiMzk2LmpzJztcbmltcG9ydCB7IGMgYXMgY29uZmlnU3RhdGUgfSBmcm9tICcuL2NvbmZpZy1lYjVmN2RjMi5qcyc7XG5pbXBvcnQgeyBxIGFzIHF1ZXJ5R3JvdXBzIH0gZnJvbSAnLi9wb3J0YWwtNzljYWFlZmYuanMnO1xuaW1wb3J0IHsgeiBhcyBnZXRMYXllckl0ZW1EYXRhIH0gZnJvbSAnLi9mZWF0dXJlLWxheWVyLTM4Y2RhZTg3LmpzJztcbmltcG9ydCB7IGEgYXMgYWRkSXRlbVN0YXRlIH0gZnJvbSAnLi9hZGQtaXRlbS05N2Q1NzdhOS5qcyc7XG5pbXBvcnQgeyB1IGFzIHVpU3RvcmVTdGF0ZSB9IGZyb20gJy4vdWktZWNmODZiYmEuanMnO1xuaW1wb3J0IHsgcyBhcyBzYXZlRmVhdHVyZUxheWVyU2VhcmNoUmVzdWx0IH0gZnJvbSAnLi9mZWF0dXJlLWxheWVyLWQzM2VhMTE0LmpzJztcbmltcG9ydCB7IGYgYXMgZmVhdHVyZUxheWVyRXJyb3JUZWxlbWV0cnksIGIgYXMgZmlsdGVyQ2hhbmdlVGVsZW1ldHJ5IH0gZnJvbSAnLi9mZWF0dXJlLWxheWVyLWQwZjY0YjgxLmpzJztcbmltcG9ydCAnLi9pbmRleC04MWQ1NDhiNy5qcyc7XG5pbXBvcnQgJy4vbG9hZE1vZHVsZXMtYWFmMzBiZDYuanMnO1xuaW1wb3J0ICcuL3ByaXZpbGVnZXMtY2NkNWYzN2QuanMnO1xuaW1wb3J0ICcuL2Z1bmN0aW9uYWwtYzgyZjVhYjkuanMnO1xuaW1wb3J0ICcuL2l0ZW0tcHJvcGVydGllcy1lNjQxMmE5YS5qcyc7XG5pbXBvcnQgJy4vZnVuY3Rpb25hbC05ZjY0OGJlZS5qcyc7XG5pbXBvcnQgJy4vc2VydmVyLWl0ZW0tZjEyMTUzZTYuanMnO1xuaW1wb3J0ICcuL2l0ZW0tdHlwZXMtYjRmZTg2YWQuanMnO1xuaW1wb3J0ICcuL2Fncy02OGQ0YWUyMC5qcyc7XG5pbXBvcnQgJy4vdXJsLWYzYjgyY2M3LmpzJztcbmltcG9ydCAnLi9zdG9yYWdlLWQ3ZjU4MjJlLmpzJztcbmltcG9ydCAnLi9maWxlLWYzNjE5M2U5LmpzJztcbmltcG9ydCAnLi9ndWlkLTRmNDE3NmJhLmpzJztcbmltcG9ydCAnLi9zdG9yZS0zMjEwYjYwNC5qcyc7XG5pbXBvcnQgJy4vdGh1bWJuYWlsLTBiN2FkZmNkLmpzJztcbmltcG9ydCAnLi9xdWVyeS00ZjdiN2U0ZC5qcyc7XG5pbXBvcnQgJy4vdXNlci1lM2RlZGM0YS5qcyc7XG5pbXBvcnQgJy4vYXBpLWY3OTM0Y2Q3LmpzJztcbmltcG9ydCAnLi9pdGVtLWQ5ZDcwNDE2LmpzJztcbmltcG9ydCAnLi9kb20tMTNmNWIwMGMuanMnO1xuaW1wb3J0ICcuL2ZlYXR1cmUtbGF5ZXItNjkzMDVhODUuanMnO1xuXG5jb25zdCBlc3JpTG9jYWxlTWFwID0ge1xuICBcImRlLWNoXCI6IFwiZXNyaV9kZVwiLFxuICBcImRlLWRlXCI6IFwiZXNyaV9kZVwiLFxuICBcImVuLWF1XCI6IFwiZXNyaV9lblwiLFxuICBcImVuLWNhXCI6IFwiZXNyaV9lblwiLFxuICBcImVuLWdiXCI6IFwiZXNyaV9lblwiLFxuICBcImVuLXVzXCI6IFwiZXNyaV9lblwiLFxuICBcImVzLWVzXCI6IFwiZXNyaV9lc1wiLFxuICBcImVzLW14XCI6IFwiZXNyaV9lc1wiLFxuICBcImZyLWNoXCI6IFwiZXNyaV9mclwiLFxuICBcImZyLWZyXCI6IFwiZXNyaV9mclwiLFxuICBpZDogXCJlc3JpX2luZFwiLFxuICBcIml0LWNoXCI6IFwiZXNyaV9pdFwiLFxuICBcIml0LWl0XCI6IFwiZXNyaV9pdFwiLFxuICBcInB0LWJyXCI6IFwiZXNyaV9wdFwiLFxuICBcInB0LXB0XCI6IFwiZXNyaV9wb1wiLFxuICB1azogXCJlc3JpX3VrclwiLFxuICBcInpoLWhrXCI6IFwiZXNyaV9oa1wiLFxuICBcInpoLXR3XCI6IFwiZXNyaV90d1wiLFxuICBcInpoLWNuXCI6IFwiZXNyaV96aFwiXG59O1xuLyoqXG4gKiBSZXR1cm4gdGhlIGVzcmlfeCBvd25lciBmb3IgdGhlIGdpdmVuIGxvY2FsZS5cbiAqL1xuZnVuY3Rpb24gZ2V0RXNyaVVzZXJGb3JMb2NhbGUobG9jYWxlKSB7XG4gIHZhciBfYTtcbiAgY29uc3QgbGFuZyA9IChsb2NhbGUgPT09IG51bGwgfHwgbG9jYWxlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBsb2NhbGUudG9Mb3dlckNhc2UoKSkgfHwgXCJlblwiO1xuICByZXR1cm4gKF9hID0gZXNyaUxvY2FsZU1hcFtsYW5nXSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogYGVzcmlfJHtsYW5nfWA7XG59XG5cbi8qKlxuICogRmluZCB0aGUgSUQgb2YgdGhlIGdyb3VwIHdoaWNoIHN0b3JlcyB0ZW1wbGF0ZSBmZWF0dXJlIGxheWVyc1xuICovXG5hc3luYyBmdW5jdGlvbiBmZXRjaFRlbXBsYXRlc0dyb3VwKGxhbmcpIHtcbiAgdmFyIF9hLCBfYjtcbiAgY29uc3QgZXNyaVVzZXIgPSBnZXRFc3JpVXNlckZvckxvY2FsZShsYW5nKTtcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBxdWVyeUdyb3Vwcyh7IHE6IGB0aXRsZTogXCJFc3JpIExheWVyIFRlbXBsYXRlc1wiIEFORCBvd25lcjogJHtlc3JpVXNlcn1gLCBudW06IDEgfSk7XG4gIHJldHVybiAoKF9iID0gKF9hID0gcmVzcG9uc2UucmVzdWx0cykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hWzBdKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuaWQpIHx8IFwiXCI7XG59XG5cbmNvbnN0IEFyY2dpc05ld0l0ZW1QYWdlc0ZlYXR1cmVMYXllckZyb21UZW1wbGF0ZSA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IoaG9zdFJlZikge1xuICAgIHJlZ2lzdGVySW5zdGFuY2UodGhpcywgaG9zdFJlZik7XG4gICAgdGhpcy5uZXdJdGVtVXBkYXRlUGFnZSA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwibmV3SXRlbVVwZGF0ZVBhZ2VcIiwgNyk7XG4gICAgdGhpcy5ibGFja2xpc3QgPSBgXCJzb3VyY2VJZCNQb2ludHNMaW5lc1BvbHlnb25zXCIgT1IgXCJzb3VyY2VJZCNQb2ludHNcIiBPUiBcInNvdXJjZUlkI0xpbmVzXCIgT1IgXCJzb3VyY2VJZCNQb2x5Z29uc1wiYDtcbiAgICB0aGlzLnNlbGVjdGVkVGVtcGxhdGUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5lcnJvciA9IHVuZGVmaW5lZDtcbiAgfVxuICBhc3luYyBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICB0aGlzLmkxOG4gPSB1aVN0b3JlU3RhdGUuaTE4bi5mZWF0dXJlTGF5ZXJGcm9tVGVtcGxhdGU7XG4gICAgdGhpcy50ZW1wbGF0ZUdyb3VwSUQgPSB0aGlzLnRlbXBsYXRlR3JvdXBJRCB8fCAoYXdhaXQgZmV0Y2hUZW1wbGF0ZXNHcm91cChjb25maWdTdGF0ZS5sYW5nKSk7XG4gICAgYWRkSXRlbVN0YXRlLnNlcnZpY2VJbmZvID0gbnVsbDtcbiAgICBhZGRJdGVtU3RhdGUuc2VsZWN0ZWRTZXJ2aWNlSW5mb0xheWVyc05hbWVzID0gbnVsbDtcbiAgfVxuICBhc3luYyBoYW5kbGVOZXh0KCkge1xuICAgIGNvbnN0IHsgc2VsZWN0ZWRUZW1wbGF0ZSB9ID0gdGhpcztcbiAgICBpZiAoIXNlbGVjdGVkVGVtcGxhdGUpIHtcbiAgICAgIGZlYXR1cmVMYXllckVycm9yVGVsZW1ldHJ5KFwiTm8gdGVtcGxhdGUgc2VsZWN0ZWRcIik7XG4gICAgICB0aGlzLmVycm9yID0gdHJ1ZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgeyBwb3J0YWwgfSA9IGNvbmZpZ1N0YXRlO1xuICAgIGNvbnN0IHNlcnZpY2VJbmZvID0gYXdhaXQgZ2V0TGF5ZXJJdGVtRGF0YShzZWxlY3RlZFRlbXBsYXRlLCBwb3J0YWwpO1xuICAgIC8vIGh0dHBzOi8vZGV2dG9waWEuZXNyaS5jb20vV2ViR0lTL2FyY2dpcy1wb3J0YWwtYXBwL2lzc3Vlcy8zOTE3OSNpc3N1ZWNvbW1lbnQtMzQ0ODQwNVxuICAgIHNlcnZpY2VJbmZvLmVuYWJsZVpEZWZhdWx0cyA9IHNlcnZpY2VJbmZvLnNlcnZpY2VJdGVtSWQgPT09IFwiMTlhNGNlYWQxYWY2NGY1NzlkNjY0ZjFkZmRiNTA1NzRcIjtcbiAgICBjb25zdCB0eXBlS2V5d29yZHMgPSBzZWxlY3RlZFRlbXBsYXRlLnR5cGVLZXl3b3JkcztcbiAgICBhZGRJdGVtU3RhdGUuc2VydmljZUluZm8gPSBzZXJ2aWNlSW5mbztcbiAgICBpZiAoY29uZmlnU3RhdGUucG9ydGFsLmlzUG9ydGFsKSB7XG4gICAgICB0eXBlS2V5d29yZHMucHVzaChcInByb3ZpZGVyU0RTXCIpO1xuICAgIH1cbiAgICBhZGRJdGVtU3RhdGUudHlwZUtleXdvcmRzID0gc2VsZWN0ZWRUZW1wbGF0ZS50eXBlS2V5d29yZHM7XG4gICAgYWRkSXRlbVN0YXRlLnNvdXJjZVRpdGxlID0gc2VsZWN0ZWRUZW1wbGF0ZS50aXRsZTtcbiAgICBzYXZlRmVhdHVyZUxheWVyU2VhcmNoUmVzdWx0KHNlbGVjdGVkVGVtcGxhdGUpO1xuICAgIHRoaXMubmV3SXRlbVVwZGF0ZVBhZ2UuZW1pdChcImZlYXR1cmVMYXllclN1bW1hcnlcIik7XG4gIH1cbiAgZmlsdGVySGFuZGxlcigpIHtcbiAgICBmaWx0ZXJDaGFuZ2VUZWxlbWV0cnkoKTtcbiAgfVxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyB0ZW1wbGF0ZUdyb3VwSUQsIGkxOG4sIGVycm9yLCBibGFja2xpc3QgfSA9IHRoaXM7XG4gICAgcmV0dXJuIChoKEhvc3QsIG51bGwsIGgoXCJhcmNnaXMtbmV3LWl0ZW0tZmVhdHVyZS1sYXllci1icm93c2VyXCIsIHsgcXVlcnk6IGBncm91cDoke3RlbXBsYXRlR3JvdXBJRH0gdHlwZTpcIkxheWVyIFRlbXBsYXRlXCIgdHlwZWtleXdvcmRzOiBcIlNlcnZpY2UgVGVtcGxhdGVcIiAtdHlwZWtleXdvcmRzOigke2JsYWNrbGlzdH0pIC10eXBlOlwiQXR0YWNobWVudFwiYCwgc29ydERyb3Bkb3duT3B0aW9uczogW1widGl0bGVcIiwgXCJyZWxldmFuY2VcIiwgXCJtb2RpZmllZFwiXSwgaGlkZUJ1Y2tldFNlbGVjdDogdHJ1ZSwgZmlsdGVyU2xvdDogaChcImFyY2dpcy1pdGVtLWJyb3dzZXItZmlsdGVyc1wiLCB7IHNsb3Q6IFwiZmlsdGVyc1wiIH0sIGgoXCJhcmNnaXMtaXRlbS1icm93c2VyLWZpbHRlci1pbmR1c3RyeVwiLCB7IGV4cGFuZGVkOiB0cnVlIH0pKSwgb25JdGVtU2VsZWN0ZWQ6ICh7IGRldGFpbCB9KSA9PiB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRUZW1wbGF0ZSA9IGRldGFpbDtcbiAgICAgICAgdGhpcy5lcnJvciA9IGZhbHNlO1xuICAgICAgfSwgc2hvd093bmVyOiBmYWxzZSwgc2hvd0RhdGVVcGRhdGVkOiBmYWxzZSwgc2hvd0l0ZW1UeXBlOiBmYWxzZSwgc2hvd1N1bW1hcnk6IHRydWUsIHNob3dUaHVtYm5haWw6IGZhbHNlIH0pLCBoKFwiYXJjZ2lzLW5ldy1pdGVtLWFsZXJ0XCIsIHsgaGVhZGluZzogaTE4bi5lcnJvckhlYWRpbmcsIGRlc2NyaXB0aW9uOiBpMThuLmVycm9yRGVzY3JpcHRpb24sIGFjdGl2ZTogZXJyb3IsIG9uQWxlcnREaXNtaXNzOiAoKSA9PiB7XG4gICAgICAgIHRoaXMuZXJyb3IgPSBmYWxzZTtcbiAgICAgIH0gfSkpKTtcbiAgfVxuICBnZXQgZWwoKSB7IHJldHVybiBnZXRFbGVtZW50KHRoaXMpOyB9XG59O1xuXG5leHBvcnQgeyBBcmNnaXNOZXdJdGVtUGFnZXNGZWF0dXJlTGF5ZXJGcm9tVGVtcGxhdGUgYXMgYXJjZ2lzX25ld19pdGVtX3BhZ2VzX2ZlYXR1cmVfbGF5ZXJfZnJvbV90ZW1wbGF0ZSB9O1xuIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogdjMuMC45OVxuICovXG5pbXBvcnQgeyBjIGFzIGNvbmZpZ1N0YXRlIH0gZnJvbSAnLi9jb25maWctZWI1ZjdkYzIuanMnO1xuaW1wb3J0IHsgYSBhcyBhZGRJdGVtU3RhdGUgfSBmcm9tICcuL2FkZC1pdGVtLTk3ZDU3N2E5LmpzJztcblxuY29uc3QgVEVMRU1FVFJZX0lEID0gXCJjcmVhdGUgZmVhdHVyZSBsYXllclwiO1xuY29uc3QgVEVMRU1FVFJZX1BBR0VfTkFNRSA9IFwibXkgY29udGVudFwiO1xuY29uc3QgYWRkRmVhdHVyZUxheWVyVHlwZVRvVGVsZW1ldHJ5ID0gKHR5cGUpID0+IHtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSBcImJ1aWxkXCI6XG4gICAgICByZXR1cm4gXCJibGFua1wiO1xuICAgIGNhc2UgXCJleGlzdGluZ1wiOlxuICAgICAgcmV0dXJuIFwiZnNcIjtcbiAgICBjYXNlIFwidGVtcGxhdGVcIjpcbiAgICAgIHJldHVybiBcInRlbXBsYXRlXCI7XG4gICAgY2FzZSBcImxpbmtcIjpcbiAgICAgIHJldHVybiBcInVybFwiO1xuICB9XG59O1xuY29uc3QgZW5hYmxlTGF5ZXJQcmVmZXJlbmNlVGVsZW1ldHJ5ID0gKHR5cGUpID0+IHtcbiAgY29uc3QgdGVsZW1ldHJ5ID0gY29uZmlnU3RhdGUudGVsZW1ldHJ5O1xuICB0ZWxlbWV0cnkgPT09IG51bGwgfHwgdGVsZW1ldHJ5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0ZWxlbWV0cnkuc3RlcFdvcmtmbG93KFRFTEVNRVRSWV9JRCwgYGVuYWJsZSAke3R5cGUgPT09IFwiY2FwdHVyZUdQU1wiID8gXCJncHNcIiA6IHR5cGUgPT09IFwiZW5hYmxlWkRlZmF1bHRzXCIgPyBcInpcIiA6IFwibVwifWAsIHtcbiAgICBjYXRlZ29yeTogVEVMRU1FVFJZX0lELFxuICAgIGF0dHJpYnV0ZTogYWRkRmVhdHVyZUxheWVyVHlwZVRvVGVsZW1ldHJ5KGFkZEl0ZW1TdGF0ZS5hZGRGZWF0dXJlTGF5ZXJUeXBlKSxcbiAgICBwYWdlTmFtZTogVEVMRU1FVFJZX1BBR0VfTkFNRVxuICB9KTtcbn07XG5jb25zdCBpdGVtRXhwYW5kZWRUZWxlbWV0cnkgPSAodHlwZSkgPT4ge1xuICBjb25zdCB0ZWxlbWV0cnkgPSBjb25maWdTdGF0ZS50ZWxlbWV0cnk7XG4gIHRlbGVtZXRyeSA9PT0gbnVsbCB8fCB0ZWxlbWV0cnkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHRlbGVtZXRyeS5zdGVwV29ya2Zsb3coVEVMRU1FVFJZX0lELCBgZXhwYW5kICR7dHlwZX0gZGV0YWlsc2AsIHtcbiAgICBjYXRlZ29yeTogVEVMRU1FVFJZX0lELFxuICAgIGF0dHJpYnV0ZTogYWRkRmVhdHVyZUxheWVyVHlwZVRvVGVsZW1ldHJ5KGFkZEl0ZW1TdGF0ZS5hZGRGZWF0dXJlTGF5ZXJUeXBlKSxcbiAgICBwYWdlTmFtZTogVEVMRU1FVFJZX1BBR0VfTkFNRVxuICB9KTtcbn07XG5jb25zdCBmaWx0ZXJDaGFuZ2VUZWxlbWV0cnkgPSAoKSA9PiB7XG4gIGNvbnN0IHRlbGVtZXRyeSA9IGNvbmZpZ1N0YXRlLnRlbGVtZXRyeTtcbiAgdGVsZW1ldHJ5ID09PSBudWxsIHx8IHRlbGVtZXRyeSA9PT0gdm9pZCAwID8gdm9pZCAwIDogdGVsZW1ldHJ5LnN0ZXBXb3JrZmxvdyhURUxFTUVUUllfSUQsIFwiZmlsdGVyXCIsIHtcbiAgICBjYXRlZ29yeTogVEVMRU1FVFJZX0lELFxuICAgIGF0dHJpYnV0ZTogYWRkRmVhdHVyZUxheWVyVHlwZVRvVGVsZW1ldHJ5KGFkZEl0ZW1TdGF0ZS5hZGRGZWF0dXJlTGF5ZXJUeXBlKSxcbiAgICBwYWdlTmFtZTogVEVMRU1FVFJZX1BBR0VfTkFNRVxuICB9KTtcbn07XG5jb25zdCBmZWF0dXJlTGF5ZXJUeXBlVGVsZW1ldHJ5ID0gKHR5cGUpID0+IHtcbiAgY29uc3QgdGVsZW1ldHJ5VHlwZSA9IGFkZEZlYXR1cmVMYXllclR5cGVUb1RlbGVtZXRyeSh0eXBlKTtcbiAgY29uc3QgdGVsZW1ldHJ5ID0gY29uZmlnU3RhdGUudGVsZW1ldHJ5O1xuICB0ZWxlbWV0cnkgPT09IG51bGwgfHwgdGVsZW1ldHJ5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0ZWxlbWV0cnkuc3RlcFdvcmtmbG93KFRFTEVNRVRSWV9JRCwgXCJmcm9tIG9wdGlvblwiLCB7XG4gICAgY2F0ZWdvcnk6IFRFTEVNRVRSWV9JRCxcbiAgICBhdHRyaWJ1dGU6IHRlbGVtZXRyeVR5cGUsXG4gICAgcGFnZU5hbWU6IFRFTEVNRVRSWV9QQUdFX05BTUVcbiAgfSk7XG59O1xuY29uc3QgZmVhdHVyZVNlcnZpY2VFbmRUZWxlbWV0cnkgPSAoKSA9PiB7XG4gIGNvbnN0IHsgYWRkRmVhdHVyZUxheWVyVHlwZSwgc2VydmljZUluZm8gfSA9IGFkZEl0ZW1TdGF0ZTtcbiAgY29uc3QgZmVhdHVyZUxheWVyU2VydmljZUluZm8gPSBzZXJ2aWNlSW5mbztcbiAgY29uc3QgdGVsZW1ldHJ5ID0gY29uZmlnU3RhdGUudGVsZW1ldHJ5O1xuICB0ZWxlbWV0cnkgPT09IG51bGwgfHwgdGVsZW1ldHJ5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0ZWxlbWV0cnkuZW5kV29ya2Zsb3coVEVMRU1FVFJZX0lELCB7XG4gICAgY2F0ZWdvcnk6IFRFTEVNRVRSWV9JRCxcbiAgICBhdHRyaWJ1dGU6IGFkZEZlYXR1cmVMYXllclR5cGVUb1RlbGVtZXRyeShhZGRGZWF0dXJlTGF5ZXJUeXBlKSxcbiAgICBwYWdlTmFtZTogVEVMRU1FVFJZX1BBR0VfTkFNRSxcbiAgICBjb3VudDogZmVhdHVyZUxheWVyU2VydmljZUluZm8ubGF5ZXJzLmxlbmd0aCxcbiAgICBudW1iZXI6IGZlYXR1cmVMYXllclNlcnZpY2VJbmZvLnRhYmxlcy5sZW5ndGhcbiAgfSk7XG59O1xuY29uc3QgZmVhdHVyZUxheWVyRXJyb3JUZWxlbWV0cnkgPSAoZXJyU3RyaW5nKSA9PiB7XG4gIHZhciBfYTtcbiAgKF9hID0gY29uZmlnU3RhdGUudGVsZW1ldHJ5KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubG9nRXJyb3Ioe1xuICAgIGNhdGVnb3J5OiBURUxFTUVUUllfSUQsXG4gICAgZXJyb3I6IGVyclN0cmluZ1xuICB9KTtcbn07XG5cbmV4cG9ydCB7IGZlYXR1cmVTZXJ2aWNlRW5kVGVsZW1ldHJ5IGFzIGEsIGZpbHRlckNoYW5nZVRlbGVtZXRyeSBhcyBiLCBmZWF0dXJlTGF5ZXJUeXBlVGVsZW1ldHJ5IGFzIGMsIGVuYWJsZUxheWVyUHJlZmVyZW5jZVRlbGVtZXRyeSBhcyBlLCBmZWF0dXJlTGF5ZXJFcnJvclRlbGVtZXRyeSBhcyBmLCBpdGVtRXhwYW5kZWRUZWxlbWV0cnkgYXMgaSB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9