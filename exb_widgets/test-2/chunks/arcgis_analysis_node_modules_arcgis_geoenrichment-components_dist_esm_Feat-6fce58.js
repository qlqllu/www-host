"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_geoenrichment-components_dist_esm_Feat-6fce58"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/FeatureFilter-05c50d5a.js":
/*!*****************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/FeatureFilter-05c50d5a.js ***!
  \*****************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./DataBrowser-5ce2ade9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/DataBrowser-5ce2ade9.js");
/* harmony import */ var _aaBoundingRect_61971fe3_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./aaBoundingRect-61971fe3.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/aaBoundingRect-61971fe3.js");
/* harmony import */ var _Query_39c34b93_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Query-39c34b93.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/Query-39c34b93.js");
/* harmony import */ var _QueryEngine_5d92bf09_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./QueryEngine-5d92bf09.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/QueryEngine-5d92bf09.js");
/* harmony import */ var _Pipeline_2d0b1c75_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Pipeline-2d0b1c75.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/Pipeline-2d0b1c75.js");
/* harmony import */ var _arcgis_geoenrichment_databrowser_6ca8ea14_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./arcgis-geoenrichment-databrowser-6ca8ea14.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/arcgis-geoenrichment-databrowser-6ca8ea14.js");
/* harmony import */ var _index_4a62c63d_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./index-4a62c63d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/index-4a62c63d.js");
/* harmony import */ var _TimeExtent_7f857a39_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./TimeExtent-7f857a39.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/TimeExtent-7f857a39.js");
/* harmony import */ var _unitUtils_624ceeb6_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./unitUtils-624ceeb6.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/unitUtils-624ceeb6.js");
/* harmony import */ var _workers_e0859213_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./workers-e0859213.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/workers-e0859213.js");
/* harmony import */ var _normalizeUtils_69f83c05_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./normalizeUtils-69f83c05.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/normalizeUtils-69f83c05.js");
/* harmony import */ var _MemCache_54630689_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./MemCache-54630689.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/MemCache-54630689.js");
/* harmony import */ var _FieldsIndex_da237492_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./FieldsIndex-da237492.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/FieldsIndex-da237492.js");
/* harmony import */ var _QueryEngineCapabilities_877e953f_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./QueryEngineCapabilities-877e953f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/QueryEngineCapabilities-877e953f.js");
/* harmony import */ var _aaBoundingBox_376a2b6e_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./aaBoundingBox-376a2b6e.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/aaBoundingBox-376a2b6e.js");
/* harmony import */ var _projection_39da86d7_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./projection-39da86d7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/projection-39da86d7.js");
/* harmony import */ var _vec3f64_22c0b6cc_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./vec3f64-22c0b6cc.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/vec3f64-22c0b6cc.js");
/* harmony import */ var _vec3_a7a72382_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./vec3-a7a72382.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/vec3-a7a72382.js");
/* harmony import */ var _mat4_dbd368d4_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./mat4-dbd368d4.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/mat4-dbd368d4.js");
/* harmony import */ var _json_e6aa8c99_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./json-e6aa8c99.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/json-e6aa8c99.js");
/* harmony import */ var _ItemCache_fcdda33e_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./ItemCache-fcdda33e.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/ItemCache-fcdda33e.js");
/* harmony import */ var _WhereClause_63375e5b_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./WhereClause-63375e5b.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/WhereClause-63375e5b.js");
/* harmony import */ var _commonjsHelpers_9577ff78_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./_commonjsHelpers-9577ff78.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/_commonjsHelpers-9577ff78.js");
/* harmony import */ var _OptimizedGeometry_8812e4f6_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./OptimizedGeometry-8812e4f6.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/OptimizedGeometry-8812e4f6.js");
/* harmony import */ var _featureConversionUtils_87d39ccb_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./featureConversionUtils-87d39ccb.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/featureConversionUtils-87d39ccb.js");
/* harmony import */ var _HandleOwner_cd6ca1f5_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./HandleOwner-cd6ca1f5.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/HandleOwner-cd6ca1f5.js");
/* harmony import */ var _TileInfo_639e5038_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./TileInfo-639e5038.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/TileInfo-639e5038.js");
/* harmony import */ var _TileKey_9a222b43_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./TileKey-9a222b43.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/TileKey-9a222b43.js");
/* harmony import */ var _quickselect_1279128f_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./quickselect-1279128f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/quickselect-1279128f.js");
/* harmony import */ var _FeatureSetReader_32450e35_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./FeatureSetReader-32450e35.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/FeatureSetReader-32450e35.js");
/* harmony import */ var _centroid_f5130435_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./centroid-f5130435.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/centroid-f5130435.js");
/* harmony import */ var _diffUtils_d9afbcb3_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./diffUtils-d9afbcb3.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/diffUtils-d9afbcb3.js");
/* harmony import */ var _definitions_e63f4fe2_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./definitions-e63f4fe2.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/definitions-e63f4fe2.js");
/* harmony import */ var _FramebufferObject_ce56921b_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./FramebufferObject-ce56921b.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/FramebufferObject-ce56921b.js");
/* harmony import */ var _arcgisLayerUrl_36b3c3ab_js__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./arcgisLayerUrl-36b3c3ab.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/arcgisLayerUrl-36b3c3ab.js");
/* harmony import */ var _query_3d91522a_js__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./query-3d91522a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/query-3d91522a.js");
/* harmony import */ var _queryZScale_8fd5a160_js__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./queryZScale-8fd5a160.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/queryZScale-8fd5a160.js");
/* harmony import */ var _zscale_37987104_js__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ./zscale-37987104.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/zscale-37987104.js");
/* harmony import */ var _pbfQueryUtils_8a9fc87d_js__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ./pbfQueryUtils-8a9fc87d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/pbfQueryUtils-8a9fc87d.js");
/* harmony import */ var _pbf_777d666d_js__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ./pbf-777d666d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/pbf-777d666d.js");
/* harmony import */ var _geojson_c6c2d2cf_js__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ./geojson-c6c2d2cf.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/geojson-c6c2d2cf.js");










































/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const t=_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.S.getLogger("esri.views.2d.layers.features.support.whereUtils"),a={getAttribute:(e,r)=>e.field(r)};async function s(e,s){const n=await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ./WhereClause-63375e5b.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/geoenrichment-components/dist/esm/WhereClause-63375e5b.js"));try{const o=n.WhereClause.create(e,s);if(!o.isStandardized){const e=new _DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.s("mapview - bad input","Unable to apply filter's definition expression, as expression is not standardized.",o);t.error(e);}return e=>{const r=e.readArcadeFeature();return o.testFeature(r,a)}}catch(o){return t.warn("mapview-bad-where-clause","Encountered an error when evaluating where clause",e),e=>!0}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const m=_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.S.getLogger("esri.views.2d.layers.features.controllers.FeatureFilter"),_=1,u=2;class p{constructor(t){this._geometryBounds=(0,_aaBoundingRect_61971fe3_js__WEBPACK_IMPORTED_MODULE_1__.i)(),this._idToVisibility=new Map,this._serviceInfo=t;}get hash(){return this._hash}check(t){return this._applyFilter(t)}clear(){const t=this._resetAllHiddenIds();return this.update(),{show:t,hide:[]}}invalidate(){this._idToVisibility.forEach(((t,e)=>{this._idToVisibility.set(e,0);}));}setKnownIds(t){for(const e of t)this._idToVisibility.set(e,_);}setTrue(t){const e=[],i=[],s=new Set(t);return this._idToVisibility.forEach(((t,r)=>{const o=!!(this._idToVisibility.get(r)&_),h=s.has(r);!o&&h?e.push(r):o&&!h&&i.push(r),this._idToVisibility.set(r,h?_|u:0);})),{show:e,hide:i}}createQuery(){const{geometry:t,spatialRel:e,where:i,timeExtent:s,objectIds:r}=this;return _Query_39c34b93_js__WEBPACK_IMPORTED_MODULE_2__.R.fromJSON({geometry:t,spatialRel:e,where:i,timeExtent:s,objectIds:r})}async update(t,e){this._hash=JSON.stringify(t);const i=await (0,_QueryEngine_5d92bf09_js__WEBPACK_IMPORTED_MODULE_3__.a)(t,null,e);await Promise.all([this._setGeometryFilter(i),this._setIdFilter(i),this._setAttributeFilter(i),this._setTimeFilter(i)]);}async _setAttributeFilter(t){if(!t||!t.where)return this._clause=null,void(this.where=null);this._clause=await s(t.where,this._serviceInfo.fieldsIndex),this.where=t.where;}_setIdFilter(t){this._idsToShow=t&&t.objectIds&&new Set(t.objectIds),this._idsToHide=t&&t.hiddenIds&&new Set(t.hiddenIds),this.objectIds=t&&t.objectIds;}async _setGeometryFilter(t){if(!t||!t.geometry)return this._spatialQueryOperator=null,this.geometry=null,void(this.spatialRel=null);const e=t.geometry,i=t.spatialRel||"esriSpatialRelIntersects",r=await (0,_QueryEngine_5d92bf09_js__WEBPACK_IMPORTED_MODULE_3__.b)(i,e,this._serviceInfo.geometryType,this._serviceInfo.hasZ,this._serviceInfo.hasM);(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.cA)(this._geometryBounds,e),this._spatialQueryOperator=r,this.geometry=e,this.spatialRel=i;}_setTimeFilter(t){if(this.timeExtent=this._timeOperator=null,t&&t.timeExtent)if(this._serviceInfo.timeInfo)this.timeExtent=t.timeExtent,this._timeOperator=(0,_QueryEngine_5d92bf09_js__WEBPACK_IMPORTED_MODULE_3__.n)(this._serviceInfo.timeInfo,t.timeExtent,_Pipeline_2d0b1c75_js__WEBPACK_IMPORTED_MODULE_4__.u);else {const e=new _DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.s("feature-layer-view:time-filter-not-available","Unable to apply time filter, as layer doesn't have time metadata.",t.timeExtent);m.error(e);}}_applyFilter(t){return this._filterByGeometry(t)&&this._filterById(t)&&this._filterByTime(t)&&this._filterByExpression(t)}_filterByExpression(t){return !this.where||this._clause(t)}_filterById(t){return (!this._idsToHide||!this._idsToHide.size||!this._idsToHide.has(t.getObjectId()))&&(!this._idsToShow||!this._idsToShow.size||this._idsToShow.has(t.getObjectId()))}_filterByGeometry(t){if(!this.geometry)return !0;const e=t.readHydratedGeometry();return !!e&&this._spatialQueryOperator(e)}_filterByTime(e){return !(0,_DataBrowser_5ce2ade9_js__WEBPACK_IMPORTED_MODULE_0__.H)(this._timeOperator)||this._timeOperator(e)}_resetAllHiddenIds(){const t=[];return this._idToVisibility.forEach(((e,i)=>{e&_||(this._idToVisibility.set(i,_),t.push(i));})),t}}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (p);

//# sourceMappingURL=FeatureFilter-05c50d5a.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfZ2VvZW5yaWNobWVudC1jb21wb25lbnRzX2Rpc3RfZXNtX0ZlYXQtNmZjZTU4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUE4RTtBQUM3QjtBQUNUO0FBQytCO0FBQ3JCO0FBQ007QUFDM0I7QUFDSztBQUNEO0FBQ0Y7QUFDTztBQUNOO0FBQ0c7QUFDWTtBQUNWO0FBQ0g7QUFDSDtBQUNIO0FBQ0E7QUFDQTtBQUNLO0FBQ0U7QUFDSztBQUNDO0FBQ0s7QUFDWDtBQUNIO0FBQ0Q7QUFDSTtBQUNLO0FBQ1I7QUFDQztBQUNFO0FBQ007QUFDSDtBQUNUO0FBQ007QUFDTDtBQUNPO0FBQ1Y7QUFDSTs7QUFFL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVEQUFDLGtFQUFrRSxnQ0FBZ0Msc0JBQXNCLGNBQWMsNE9BQW1DLENBQUMsSUFBSSxrQ0FBa0Msc0JBQXNCLFlBQVksdURBQUcsK0dBQStHLFlBQVksV0FBVyw4QkFBOEIsMkJBQTJCLFNBQVM7O0FBRXRjO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1REFBQyw4RUFBOEUsUUFBUSxlQUFlLHFCQUFxQiw4REFBQyxxREFBcUQsV0FBVyxrQkFBa0IsU0FBUyw0QkFBNEIsUUFBUSxrQ0FBa0Msc0JBQXNCLGdCQUFnQixhQUFhLHNDQUFzQywrQkFBK0IsSUFBSSxlQUFlLGdEQUFnRCxXQUFXLDZCQUE2Qiw2Q0FBNkMscURBQXFELHNFQUFzRSxJQUFJLGVBQWUsY0FBYyxNQUFNLHlEQUF5RCxNQUFNLE9BQU8saURBQUMsV0FBVyx5REFBeUQsRUFBRSxrQkFBa0IsNkJBQTZCLGNBQWMsMkRBQUMsV0FBVyx5SEFBeUgsNkJBQTZCLCtEQUErRCxnRkFBZ0YsZ0JBQWdCLHlJQUF5SSw0QkFBNEIsd0dBQXdHLHNFQUFzRSwyREFBRyxtRkFBbUYsNERBQUMseUZBQXlGLGtCQUFrQix5SUFBeUksMkRBQUcseUNBQXlDLG9EQUFHLEVBQUUsTUFBTSxZQUFZLHVEQUFHLGtJQUFrSSxhQUFhLGdCQUFnQiwwR0FBMEcsdUJBQXVCLG9DQUFvQyxlQUFlLHlLQUF5SyxxQkFBcUIsNEJBQTRCLGlDQUFpQywwQ0FBMEMsaUJBQWlCLFFBQVEsMkRBQUMsNENBQTRDLHFCQUFxQixXQUFXLDZDQUE2QyxnREFBZ0Q7O0FBRWp3RixpRUFBZSxDQUFDLEVBQUM7O0FBRWpCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYW5hbHlzaXMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvZ2VvZW5yaWNobWVudC1jb21wb25lbnRzL2Rpc3QvZXNtL0ZlYXR1cmVGaWx0ZXItMDVjNTBkNWEuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUyBhcyBuLCBzIGFzIHMkMSwgY0EgYXMgYywgSCBhcyByIH0gZnJvbSAnLi9EYXRhQnJvd3Nlci01Y2UyYWRlOS5qcyc7XG5pbXBvcnQgeyBpIH0gZnJvbSAnLi9hYUJvdW5kaW5nUmVjdC02MTk3MWZlMy5qcyc7XG5pbXBvcnQgeyBSIH0gZnJvbSAnLi9RdWVyeS0zOWMzNGI5My5qcyc7XG5pbXBvcnQgeyBhIGFzIHYsIGIgYXMgdiQxLCBuIGFzIG4kMSB9IGZyb20gJy4vUXVlcnlFbmdpbmUtNWQ5MmJmMDkuanMnO1xuaW1wb3J0IHsgdSBhcyB1JDEgfSBmcm9tICcuL1BpcGVsaW5lLTJkMGIxYzc1LmpzJztcbmltcG9ydCAnLi9hcmNnaXMtZ2VvZW5yaWNobWVudC1kYXRhYnJvd3Nlci02Y2E4ZWExNC5qcyc7XG5pbXBvcnQgJy4vaW5kZXgtNGE2MmM2M2QuanMnO1xuaW1wb3J0ICcuL1RpbWVFeHRlbnQtN2Y4NTdhMzkuanMnO1xuaW1wb3J0ICcuL3VuaXRVdGlscy02MjRjZWViNi5qcyc7XG5pbXBvcnQgJy4vd29ya2Vycy1lMDg1OTIxMy5qcyc7XG5pbXBvcnQgJy4vbm9ybWFsaXplVXRpbHMtNjlmODNjMDUuanMnO1xuaW1wb3J0ICcuL01lbUNhY2hlLTU0NjMwNjg5LmpzJztcbmltcG9ydCAnLi9GaWVsZHNJbmRleC1kYTIzNzQ5Mi5qcyc7XG5pbXBvcnQgJy4vUXVlcnlFbmdpbmVDYXBhYmlsaXRpZXMtODc3ZTk1M2YuanMnO1xuaW1wb3J0ICcuL2FhQm91bmRpbmdCb3gtMzc2YTJiNmUuanMnO1xuaW1wb3J0ICcuL3Byb2plY3Rpb24tMzlkYTg2ZDcuanMnO1xuaW1wb3J0ICcuL3ZlYzNmNjQtMjJjMGI2Y2MuanMnO1xuaW1wb3J0ICcuL3ZlYzMtYTdhNzIzODIuanMnO1xuaW1wb3J0ICcuL21hdDQtZGJkMzY4ZDQuanMnO1xuaW1wb3J0ICcuL2pzb24tZTZhYThjOTkuanMnO1xuaW1wb3J0ICcuL0l0ZW1DYWNoZS1mY2RkYTMzZS5qcyc7XG5pbXBvcnQgJy4vV2hlcmVDbGF1c2UtNjMzNzVlNWIuanMnO1xuaW1wb3J0ICcuL19jb21tb25qc0hlbHBlcnMtOTU3N2ZmNzguanMnO1xuaW1wb3J0ICcuL09wdGltaXplZEdlb21ldHJ5LTg4MTJlNGY2LmpzJztcbmltcG9ydCAnLi9mZWF0dXJlQ29udmVyc2lvblV0aWxzLTg3ZDM5Y2NiLmpzJztcbmltcG9ydCAnLi9IYW5kbGVPd25lci1jZDZjYTFmNS5qcyc7XG5pbXBvcnQgJy4vVGlsZUluZm8tNjM5ZTUwMzguanMnO1xuaW1wb3J0ICcuL1RpbGVLZXktOWEyMjJiNDMuanMnO1xuaW1wb3J0ICcuL3F1aWNrc2VsZWN0LTEyNzkxMjhmLmpzJztcbmltcG9ydCAnLi9GZWF0dXJlU2V0UmVhZGVyLTMyNDUwZTM1LmpzJztcbmltcG9ydCAnLi9jZW50cm9pZC1mNTEzMDQzNS5qcyc7XG5pbXBvcnQgJy4vZGlmZlV0aWxzLWQ5YWZiY2IzLmpzJztcbmltcG9ydCAnLi9kZWZpbml0aW9ucy1lNjNmNGZlMi5qcyc7XG5pbXBvcnQgJy4vRnJhbWVidWZmZXJPYmplY3QtY2U1NjkyMWIuanMnO1xuaW1wb3J0ICcuL2FyY2dpc0xheWVyVXJsLTM2YjNjM2FiLmpzJztcbmltcG9ydCAnLi9xdWVyeS0zZDkxNTIyYS5qcyc7XG5pbXBvcnQgJy4vcXVlcnlaU2NhbGUtOGZkNWExNjAuanMnO1xuaW1wb3J0ICcuL3pzY2FsZS0zNzk4NzEwNC5qcyc7XG5pbXBvcnQgJy4vcGJmUXVlcnlVdGlscy04YTlmYzg3ZC5qcyc7XG5pbXBvcnQgJy4vcGJmLTc3N2Q2NjZkLmpzJztcbmltcG9ydCAnLi9nZW9qc29uLWM2YzJkMmNmLmpzJztcblxuLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMTkvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmNvbnN0IHQ9bi5nZXRMb2dnZXIoXCJlc3JpLnZpZXdzLjJkLmxheWVycy5mZWF0dXJlcy5zdXBwb3J0LndoZXJlVXRpbHNcIiksYT17Z2V0QXR0cmlidXRlOihlLHIpPT5lLmZpZWxkKHIpfTthc3luYyBmdW5jdGlvbiBzKGUscyl7Y29uc3Qgbj1hd2FpdCBpbXBvcnQoJy4vV2hlcmVDbGF1c2UtNjMzNzVlNWIuanMnKTt0cnl7Y29uc3Qgbz1uLldoZXJlQ2xhdXNlLmNyZWF0ZShlLHMpO2lmKCFvLmlzU3RhbmRhcmRpemVkKXtjb25zdCBlPW5ldyBzJDEoXCJtYXB2aWV3IC0gYmFkIGlucHV0XCIsXCJVbmFibGUgdG8gYXBwbHkgZmlsdGVyJ3MgZGVmaW5pdGlvbiBleHByZXNzaW9uLCBhcyBleHByZXNzaW9uIGlzIG5vdCBzdGFuZGFyZGl6ZWQuXCIsbyk7dC5lcnJvcihlKTt9cmV0dXJuIGU9Pntjb25zdCByPWUucmVhZEFyY2FkZUZlYXR1cmUoKTtyZXR1cm4gby50ZXN0RmVhdHVyZShyLGEpfX1jYXRjaChvKXtyZXR1cm4gdC53YXJuKFwibWFwdmlldy1iYWQtd2hlcmUtY2xhdXNlXCIsXCJFbmNvdW50ZXJlZCBhbiBlcnJvciB3aGVuIGV2YWx1YXRpbmcgd2hlcmUgY2xhdXNlXCIsZSksZT0+ITB9fVxuXG4vKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4xOS9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuY29uc3QgbT1uLmdldExvZ2dlcihcImVzcmkudmlld3MuMmQubGF5ZXJzLmZlYXR1cmVzLmNvbnRyb2xsZXJzLkZlYXR1cmVGaWx0ZXJcIiksXz0xLHU9MjtjbGFzcyBwe2NvbnN0cnVjdG9yKHQpe3RoaXMuX2dlb21ldHJ5Qm91bmRzPWkoKSx0aGlzLl9pZFRvVmlzaWJpbGl0eT1uZXcgTWFwLHRoaXMuX3NlcnZpY2VJbmZvPXQ7fWdldCBoYXNoKCl7cmV0dXJuIHRoaXMuX2hhc2h9Y2hlY2sodCl7cmV0dXJuIHRoaXMuX2FwcGx5RmlsdGVyKHQpfWNsZWFyKCl7Y29uc3QgdD10aGlzLl9yZXNldEFsbEhpZGRlbklkcygpO3JldHVybiB0aGlzLnVwZGF0ZSgpLHtzaG93OnQsaGlkZTpbXX19aW52YWxpZGF0ZSgpe3RoaXMuX2lkVG9WaXNpYmlsaXR5LmZvckVhY2goKCh0LGUpPT57dGhpcy5faWRUb1Zpc2liaWxpdHkuc2V0KGUsMCk7fSkpO31zZXRLbm93bklkcyh0KXtmb3IoY29uc3QgZSBvZiB0KXRoaXMuX2lkVG9WaXNpYmlsaXR5LnNldChlLF8pO31zZXRUcnVlKHQpe2NvbnN0IGU9W10saT1bXSxzPW5ldyBTZXQodCk7cmV0dXJuIHRoaXMuX2lkVG9WaXNpYmlsaXR5LmZvckVhY2goKCh0LHIpPT57Y29uc3Qgbz0hISh0aGlzLl9pZFRvVmlzaWJpbGl0eS5nZXQocikmXyksaD1zLmhhcyhyKTshbyYmaD9lLnB1c2gocik6byYmIWgmJmkucHVzaChyKSx0aGlzLl9pZFRvVmlzaWJpbGl0eS5zZXQocixoP198dTowKTt9KSkse3Nob3c6ZSxoaWRlOml9fWNyZWF0ZVF1ZXJ5KCl7Y29uc3R7Z2VvbWV0cnk6dCxzcGF0aWFsUmVsOmUsd2hlcmU6aSx0aW1lRXh0ZW50OnMsb2JqZWN0SWRzOnJ9PXRoaXM7cmV0dXJuIFIuZnJvbUpTT04oe2dlb21ldHJ5OnQsc3BhdGlhbFJlbDplLHdoZXJlOmksdGltZUV4dGVudDpzLG9iamVjdElkczpyfSl9YXN5bmMgdXBkYXRlKHQsZSl7dGhpcy5faGFzaD1KU09OLnN0cmluZ2lmeSh0KTtjb25zdCBpPWF3YWl0IHYodCxudWxsLGUpO2F3YWl0IFByb21pc2UuYWxsKFt0aGlzLl9zZXRHZW9tZXRyeUZpbHRlcihpKSx0aGlzLl9zZXRJZEZpbHRlcihpKSx0aGlzLl9zZXRBdHRyaWJ1dGVGaWx0ZXIoaSksdGhpcy5fc2V0VGltZUZpbHRlcihpKV0pO31hc3luYyBfc2V0QXR0cmlidXRlRmlsdGVyKHQpe2lmKCF0fHwhdC53aGVyZSlyZXR1cm4gdGhpcy5fY2xhdXNlPW51bGwsdm9pZCh0aGlzLndoZXJlPW51bGwpO3RoaXMuX2NsYXVzZT1hd2FpdCBzKHQud2hlcmUsdGhpcy5fc2VydmljZUluZm8uZmllbGRzSW5kZXgpLHRoaXMud2hlcmU9dC53aGVyZTt9X3NldElkRmlsdGVyKHQpe3RoaXMuX2lkc1RvU2hvdz10JiZ0Lm9iamVjdElkcyYmbmV3IFNldCh0Lm9iamVjdElkcyksdGhpcy5faWRzVG9IaWRlPXQmJnQuaGlkZGVuSWRzJiZuZXcgU2V0KHQuaGlkZGVuSWRzKSx0aGlzLm9iamVjdElkcz10JiZ0Lm9iamVjdElkczt9YXN5bmMgX3NldEdlb21ldHJ5RmlsdGVyKHQpe2lmKCF0fHwhdC5nZW9tZXRyeSlyZXR1cm4gdGhpcy5fc3BhdGlhbFF1ZXJ5T3BlcmF0b3I9bnVsbCx0aGlzLmdlb21ldHJ5PW51bGwsdm9pZCh0aGlzLnNwYXRpYWxSZWw9bnVsbCk7Y29uc3QgZT10Lmdlb21ldHJ5LGk9dC5zcGF0aWFsUmVsfHxcImVzcmlTcGF0aWFsUmVsSW50ZXJzZWN0c1wiLHI9YXdhaXQgdiQxKGksZSx0aGlzLl9zZXJ2aWNlSW5mby5nZW9tZXRyeVR5cGUsdGhpcy5fc2VydmljZUluZm8uaGFzWix0aGlzLl9zZXJ2aWNlSW5mby5oYXNNKTtjKHRoaXMuX2dlb21ldHJ5Qm91bmRzLGUpLHRoaXMuX3NwYXRpYWxRdWVyeU9wZXJhdG9yPXIsdGhpcy5nZW9tZXRyeT1lLHRoaXMuc3BhdGlhbFJlbD1pO31fc2V0VGltZUZpbHRlcih0KXtpZih0aGlzLnRpbWVFeHRlbnQ9dGhpcy5fdGltZU9wZXJhdG9yPW51bGwsdCYmdC50aW1lRXh0ZW50KWlmKHRoaXMuX3NlcnZpY2VJbmZvLnRpbWVJbmZvKXRoaXMudGltZUV4dGVudD10LnRpbWVFeHRlbnQsdGhpcy5fdGltZU9wZXJhdG9yPW4kMSh0aGlzLl9zZXJ2aWNlSW5mby50aW1lSW5mbyx0LnRpbWVFeHRlbnQsdSQxKTtlbHNlIHtjb25zdCBlPW5ldyBzJDEoXCJmZWF0dXJlLWxheWVyLXZpZXc6dGltZS1maWx0ZXItbm90LWF2YWlsYWJsZVwiLFwiVW5hYmxlIHRvIGFwcGx5IHRpbWUgZmlsdGVyLCBhcyBsYXllciBkb2Vzbid0IGhhdmUgdGltZSBtZXRhZGF0YS5cIix0LnRpbWVFeHRlbnQpO20uZXJyb3IoZSk7fX1fYXBwbHlGaWx0ZXIodCl7cmV0dXJuIHRoaXMuX2ZpbHRlckJ5R2VvbWV0cnkodCkmJnRoaXMuX2ZpbHRlckJ5SWQodCkmJnRoaXMuX2ZpbHRlckJ5VGltZSh0KSYmdGhpcy5fZmlsdGVyQnlFeHByZXNzaW9uKHQpfV9maWx0ZXJCeUV4cHJlc3Npb24odCl7cmV0dXJuICF0aGlzLndoZXJlfHx0aGlzLl9jbGF1c2UodCl9X2ZpbHRlckJ5SWQodCl7cmV0dXJuICghdGhpcy5faWRzVG9IaWRlfHwhdGhpcy5faWRzVG9IaWRlLnNpemV8fCF0aGlzLl9pZHNUb0hpZGUuaGFzKHQuZ2V0T2JqZWN0SWQoKSkpJiYoIXRoaXMuX2lkc1RvU2hvd3x8IXRoaXMuX2lkc1RvU2hvdy5zaXplfHx0aGlzLl9pZHNUb1Nob3cuaGFzKHQuZ2V0T2JqZWN0SWQoKSkpfV9maWx0ZXJCeUdlb21ldHJ5KHQpe2lmKCF0aGlzLmdlb21ldHJ5KXJldHVybiAhMDtjb25zdCBlPXQucmVhZEh5ZHJhdGVkR2VvbWV0cnkoKTtyZXR1cm4gISFlJiZ0aGlzLl9zcGF0aWFsUXVlcnlPcGVyYXRvcihlKX1fZmlsdGVyQnlUaW1lKGUpe3JldHVybiAhcih0aGlzLl90aW1lT3BlcmF0b3IpfHx0aGlzLl90aW1lT3BlcmF0b3IoZSl9X3Jlc2V0QWxsSGlkZGVuSWRzKCl7Y29uc3QgdD1bXTtyZXR1cm4gdGhpcy5faWRUb1Zpc2liaWxpdHkuZm9yRWFjaCgoKGUsaSk9PntlJl98fCh0aGlzLl9pZFRvVmlzaWJpbGl0eS5zZXQoaSxfKSx0LnB1c2goaSkpO30pKSx0fX1cblxuZXhwb3J0IGRlZmF1bHQgcDtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RmVhdHVyZUZpbHRlci0wNWM1MGQ1YS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=