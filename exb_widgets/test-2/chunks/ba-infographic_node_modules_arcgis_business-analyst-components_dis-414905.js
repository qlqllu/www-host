"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_ba-infographic_node_modules_arcgis_business-analyst-components_dis-414905"],{

/***/ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/calcite-color-picker-hex-input.entry.js":
/*!*********************************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/calcite-color-picker-hex-input.entry.js ***!
  \*********************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   calcite_color_picker_hex_input: () => (/* binding */ ColorPickerHexInput)
/* harmony export */ });
/* harmony import */ var _index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index-4e647411.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/index-4e647411.js");
/* harmony import */ var _index_56dd1c42_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-56dd1c42.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/index-56dd1c42.js");
/* harmony import */ var _dom_f1ee4d04_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./dom-f1ee4d04.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/dom-f1ee4d04.js");
/* harmony import */ var _loadable_cc14d728_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./loadable-cc14d728.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/loadable-cc14d728.js");
/* harmony import */ var _utils_a71d8ee9_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils-a71d8ee9.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/utils-a71d8ee9.js");









/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.5
 */
const CSS = {
  container: "container",
  preview: "preview",
  input: "input"
};

const colorPickerHexInputCss = "@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{display:block}.container{display:inline-grid;inline-size:100%;align-items:center;grid-template-columns:1fr auto}.preview{grid-column:2/3;pointer-events:none;margin-block:0px;margin-inline:0.25rem;display:flex;align-items:center}.preview,.input{grid-row:1}.input{grid-column:1/3;inline-size:100%;text-transform:uppercase}";

const DEFAULT_COLOR = (0,_index_56dd1c42_js__WEBPACK_IMPORTED_MODULE_0__.c)();
const ColorPickerHexInput = class {
  constructor(hostRef) {
    (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__.r)(this, hostRef);
    this.calciteColorPickerHexInputChange = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__.c)(this, "calciteColorPickerHexInputChange", 6);
    this.onCalciteInternalInputBlur = () => {
      const node = this.inputNode;
      const inputValue = node.value;
      const hex = `#${inputValue}`;
      const willClearValue = this.allowEmpty && !inputValue;
      if (willClearValue || ((0,_utils_a71d8ee9_js__WEBPACK_IMPORTED_MODULE_2__.i)(hex) && (0,_utils_a71d8ee9_js__WEBPACK_IMPORTED_MODULE_2__.a)(hex))) {
        return;
      }
      // manipulating DOM directly since rerender doesn't update input value
      node.value =
        this.allowEmpty && !this.internalColor
          ? ""
          : this.formatForInternalInput((0,_utils_a71d8ee9_js__WEBPACK_IMPORTED_MODULE_2__.r)(this.internalColor.object()));
    };
    this.onInputChange = () => {
      this.internalSetValue(this.inputNode.value, this.value);
    };
    this.previousNonNullValue = this.value;
    this.storeInputRef = (node) => {
      this.inputNode = node;
    };
    this.hexLabel = "Hex";
    this.allowEmpty = false;
    this.scale = "m";
    this.value = (0,_utils_a71d8ee9_js__WEBPACK_IMPORTED_MODULE_2__.n)(DEFAULT_COLOR.hex());
    this.numberingSystem = undefined;
    this.internalColor = DEFAULT_COLOR;
  }
  //--------------------------------------------------------------------------
  //
  //  Lifecycle
  //
  //--------------------------------------------------------------------------
  connectedCallback() {
    const { allowEmpty, value } = this;
    if (value) {
      const normalized = (0,_utils_a71d8ee9_js__WEBPACK_IMPORTED_MODULE_2__.n)(value);
      if ((0,_utils_a71d8ee9_js__WEBPACK_IMPORTED_MODULE_2__.i)(normalized)) {
        this.internalSetValue(normalized, normalized, false);
      }
      return;
    }
    if (allowEmpty) {
      this.internalSetValue(null, null, false);
    }
  }
  componentWillLoad() {
    (0,_loadable_cc14d728_js__WEBPACK_IMPORTED_MODULE_3__.a)(this);
  }
  componentDidLoad() {
    (0,_loadable_cc14d728_js__WEBPACK_IMPORTED_MODULE_3__.s)(this);
  }
  handleValueChange(value, oldValue) {
    this.internalSetValue(value, oldValue, false);
  }
  // using @Listen as a workaround for VDOM listener not firing
  onInputKeyDown(event) {
    const { altKey, ctrlKey, metaKey, shiftKey } = event;
    const { internalColor, value } = this;
    const { key } = event;
    if (key === "Tab" || key === "Enter") {
      this.onInputChange();
      return;
    }
    const isNudgeKey = key === "ArrowDown" || key === "ArrowUp";
    const oldValue = this.value;
    if (isNudgeKey) {
      if (!value) {
        this.internalSetValue(this.previousNonNullValue, oldValue);
        event.preventDefault();
        return;
      }
      const direction = key === "ArrowUp" ? 1 : -1;
      const bump = shiftKey ? 10 : 1;
      this.internalSetValue((0,_utils_a71d8ee9_js__WEBPACK_IMPORTED_MODULE_2__.n)(this.nudgeRGBChannels(internalColor, bump * direction).hex()), oldValue);
      event.preventDefault();
      return;
    }
    const withModifiers = altKey || ctrlKey || metaKey;
    const singleChar = key.length === 1;
    const validHexChar = _utils_a71d8ee9_js__WEBPACK_IMPORTED_MODULE_2__.b.test(key);
    if (singleChar && !withModifiers && !validHexChar) {
      event.preventDefault();
    }
  }
  onPaste(event) {
    const hex = event.clipboardData.getData("text");
    if ((0,_utils_a71d8ee9_js__WEBPACK_IMPORTED_MODULE_2__.i)(hex)) {
      event.preventDefault();
      this.inputNode.value = hex.slice(1);
    }
  }
  //--------------------------------------------------------------------------
  //
  //  Lifecycle
  //
  //--------------------------------------------------------------------------
  render() {
    const { value } = this;
    const hexInputValue = this.formatForInternalInput(value);
    return ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__.h)("div", { class: CSS.container }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__.h)("calcite-input", { class: CSS.input, label: this.hexLabel, maxLength: 6, numberingSystem: this.numberingSystem, onCalciteInputChange: this.onInputChange, onCalciteInternalInputBlur: this.onCalciteInternalInputBlur, onKeyDown: this.handleKeyDown, onPaste: this.onPaste, prefixText: "#", ref: this.storeInputRef, scale: this.scale, value: hexInputValue }), hexInputValue ? ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__.h)("calcite-color-picker-swatch", { active: true, class: CSS.preview, color: `#${hexInputValue}`, scale: this.scale })) : null));
  }
  //--------------------------------------------------------------------------
  //
  //  Public Methods
  //
  //--------------------------------------------------------------------------
  /** Sets focus on the component. */
  async setFocus() {
    await (0,_loadable_cc14d728_js__WEBPACK_IMPORTED_MODULE_3__.c)(this);
    (0,_dom_f1ee4d04_js__WEBPACK_IMPORTED_MODULE_4__.h)(this.inputNode);
  }
  //--------------------------------------------------------------------------
  //
  //  Private Methods
  //
  //--------------------------------------------------------------------------
  internalSetValue(value, oldValue, emit = true) {
    if (value) {
      const normalized = (0,_utils_a71d8ee9_js__WEBPACK_IMPORTED_MODULE_2__.n)(value);
      if ((0,_utils_a71d8ee9_js__WEBPACK_IMPORTED_MODULE_2__.i)(normalized)) {
        const { internalColor } = this;
        const changed = !internalColor || normalized !== (0,_utils_a71d8ee9_js__WEBPACK_IMPORTED_MODULE_2__.n)(internalColor.hex());
        this.internalColor = (0,_index_56dd1c42_js__WEBPACK_IMPORTED_MODULE_0__.c)(normalized);
        this.previousNonNullValue = normalized;
        this.value = normalized;
        if (changed && emit) {
          this.calciteColorPickerHexInputChange.emit();
        }
        return;
      }
    }
    else if (this.allowEmpty) {
      this.internalColor = null;
      this.value = null;
      if (emit) {
        this.calciteColorPickerHexInputChange.emit();
      }
      return;
    }
    this.value = oldValue;
  }
  formatForInternalInput(hex) {
    return hex ? hex.replace("#", "") : "";
  }
  nudgeRGBChannels(color$1, amount) {
    return _index_56dd1c42_js__WEBPACK_IMPORTED_MODULE_0__.c.rgb(color$1.array().map((channel) => channel + amount));
  }
  handleKeyDown(event) {
    if (event.key === "Enter") {
      event.preventDefault();
    }
  }
  get el() { return (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__.g)(this); }
  static get watchers() { return {
    "value": ["handleValueChange"]
  }; }
};
ColorPickerHexInput.style = colorPickerHexInputCss;



//# sourceMappingURL=calcite-color-picker-hex-input.entry.js.map

/***/ }),

/***/ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/loadable-cc14d728.js":
/*!**************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/loadable-cc14d728.js ***!
  \**************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ setUpLoadableComponent),
/* harmony export */   c: () => (/* binding */ componentLoaded),
/* harmony export */   s: () => (/* binding */ setComponentLoaded)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.5
 */
const resolveMap = new WeakMap();
const promiseMap = new WeakMap();
/**
 * This helper util sets up the component for the ability to know when the component has been loaded.
 *
 * This should be used in the `componentWillLoad` lifecycle hook.
 *
 * ```
 * componentWillLoad(): void {
 *   setUpLoadableComponent(this);
 * }
 * ```
 *
 * @param component
 */
function setUpLoadableComponent(component) {
  promiseMap.set(component, new Promise((resolve) => resolveMap.set(component, resolve)));
}
/**
 * This helper util lets the loadable component know that it is now loaded.
 *
 * This should be used in the `componentDidLoad` lifecycle hook.
 *
 * ```
 * componentDidLoad(): void {
 *   setComponentLoaded(this);
 * }
 * ```
 *
 * @param component
 */
function setComponentLoaded(component) {
  resolveMap.get(component)();
}
/**
 * This helper util can be used to ensure a component has been loaded (The "componentDidLoad" stencil lifecycle method has been called).
 *
 * Requires "setUpLoadableComponent" and "setComponentLoaded" to be called first.
 *
 * A component developer can await this method before proceeding with any logic that requires a component to be loaded first.
 *
 * ```
 * async setFocus(): Promise<void> {
 *   await componentLoaded(this);
 * }
 * ```
 *
 * @param component
 * @returns Promise<void>
 */
function componentLoaded(component) {
  return promiseMap.get(component);
}



//# sourceMappingURL=loadable-cc14d728.js.map

/***/ }),

/***/ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/utils-a71d8ee9.js":
/*!***********************************************************************************************************************************************!*\
  !*** ./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/utils-a71d8ee9.js ***!
  \***********************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   C: () => (/* binding */ CSSColorMode),
/* harmony export */   a: () => (/* binding */ isLonghandHex),
/* harmony export */   b: () => (/* binding */ hexChar),
/* harmony export */   c: () => (/* binding */ colorEqual),
/* harmony export */   h: () => (/* binding */ hexToRGB),
/* harmony export */   i: () => (/* binding */ isValidHex),
/* harmony export */   n: () => (/* binding */ normalizeHex),
/* harmony export */   p: () => (/* binding */ parseMode),
/* harmony export */   r: () => (/* binding */ rgbToHex)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.5
 */
function rgbToHex(color) {
  const { r, g, b } = color;
  return `#${r.toString(16).padStart(2, "0")}${g.toString(16).padStart(2, "0")}${b
    .toString(16)
    .padStart(2, "0")}`.toLowerCase();
}
const hexChar = /^[0-9A-F]$/i;
const shortHandHex = /^#[0-9A-F]{3}$/i;
const longhandHex = /^#[0-9A-F]{6}$/i;
function isValidHex(hex) {
  return isShorthandHex(hex) || isLonghandHex(hex);
}
function isShorthandHex(hex) {
  return hex && hex.length === 4 && shortHandHex.test(hex);
}
function isLonghandHex(hex) {
  return hex && hex.length === 7 && longhandHex.test(hex);
}
function normalizeHex(hex) {
  hex = hex.toLowerCase();
  if (!hex.startsWith("#")) {
    hex = `#${hex}`;
  }
  if (isShorthandHex(hex)) {
    return rgbToHex(hexToRGB(hex));
  }
  return hex;
}
function hexToRGB(hex) {
  if (!isValidHex(hex)) {
    return null;
  }
  hex = hex.replace("#", "");
  if (hex.length === 3) {
    const [first, second, third] = hex.split("");
    const r = parseInt(`${first}${first}`, 16);
    const g = parseInt(`${second}${second}`, 16);
    const b = parseInt(`${third}${third}`, 16);
    return { r, g, b };
  }
  const r = parseInt(hex.slice(0, 2), 16);
  const g = parseInt(hex.slice(2, 4), 16);
  const b = parseInt(hex.slice(4, 6), 16);
  return { r, g, b };
}
// these utils allow users to pass enum values as strings without having to access the enum
// based on the approach suggested by https://github.com/microsoft/TypeScript/issues/17690#issuecomment-321365759,
const enumify = (x) => x;
const CSSColorMode = enumify({
  HEX: "hex",
  HEXA: "hexa",
  RGB_CSS: "rgb-css",
  RGBA_CSS: "rgba-css",
  HSL_CSS: "hsl-css",
  HSLA_CSS: "hsla-css"
});
const ObjectColorMode = enumify({
  RGB: "rgb",
  RGBA: "rgba",
  HSL: "hsl",
  HSLA: "hsla",
  HSV: "hsv",
  HSVA: "hsva"
});
function parseMode(colorValue) {
  if (typeof colorValue === "string") {
    if (colorValue.startsWith("#")) {
      const { length } = colorValue;
      if (length === 4 || length === 7) {
        return CSSColorMode.HEX;
      }
      if (length === 5 || length === 9) {
        return CSSColorMode.HEXA;
      }
    }
    if (colorValue.startsWith("rgba(")) {
      return CSSColorMode.RGBA_CSS;
    }
    if (colorValue.startsWith("rgb(")) {
      return CSSColorMode.RGB_CSS;
    }
    if (colorValue.startsWith("hsl(")) {
      return CSSColorMode.HSL_CSS;
    }
    if (colorValue.startsWith("hsla(")) {
      return CSSColorMode.HSLA_CSS;
    }
  }
  if (typeof colorValue === "object") {
    if (hasChannels(colorValue, "r", "g", "b")) {
      return hasChannels(colorValue, "a") ? ObjectColorMode.RGBA : ObjectColorMode.RGB;
    }
    if (hasChannels(colorValue, "h", "s", "l")) {
      return hasChannels(colorValue, "a") ? ObjectColorMode.HSLA : ObjectColorMode.HSL;
    }
    if (hasChannels(colorValue, "h", "s", "v")) {
      return hasChannels(colorValue, "a") ? ObjectColorMode.HSVA : ObjectColorMode.HSV;
    }
  }
  return null;
}
function hasChannels(colorObject, ...channels) {
  return channels.every((channel) => channel && colorObject && `${channel}` in colorObject);
}
function colorEqual(value1, value2) {
  return value1?.rgbNumber() === value2?.rgbNumber();
}



//# sourceMappingURL=utils-a71d8ee9.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYmEtaW5mb2dyYXBoaWNfbm9kZV9tb2R1bGVzX2FyY2dpc19idXNpbmVzcy1hbmFseXN0LWNvbXBvbmVudHNfZGlzLTQxNDkwNS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBa0c7QUFDakQ7QUFDSztBQUM4RDtBQUNNO0FBQ3pGO0FBQ0w7QUFDSzs7QUFFakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsOENBQThDLEdBQUcsVUFBVSxLQUFLLFdBQVcsbUJBQW1CLEdBQUcsVUFBVSxrQ0FBa0MsS0FBSyxVQUFVLGdDQUFnQyxpQkFBaUIsR0FBRyxVQUFVLGlDQUFpQyxLQUFLLFVBQVUsZ0NBQWdDLG9CQUFvQixHQUFHLFVBQVUsaUNBQWlDLEtBQUssVUFBVSw0QkFBNEIsTUFBTSxpRkFBaUYscUVBQXFFLCtGQUErRixpR0FBaUcsK0ZBQStGLGlCQUFpQixVQUFVLHlCQUF5QixtREFBbUQscUJBQXFCLGtCQUFrQiwwQkFBMEIsdUJBQXVCLHdCQUF3QixxQkFBcUIsMkJBQTJCLHdCQUF3Qix3Q0FBd0MsTUFBTSxzQ0FBc0MsTUFBTSxpRUFBaUUsa0NBQWtDLGdCQUFnQixhQUFhLE1BQU0sY0FBYyxXQUFXLG9CQUFvQixpQkFBaUIsbUJBQW1CLCtCQUErQixTQUFTLGdCQUFnQixvQkFBb0IsaUJBQWlCLHNCQUFzQixhQUFhLG1CQUFtQixnQkFBZ0IsV0FBVyxPQUFPLGdCQUFnQixpQkFBaUIseUJBQXlCOztBQUVqcEQsc0JBQXNCLHFEQUFLO0FBQzNCO0FBQ0E7QUFDQSxJQUFJLHFEQUFnQjtBQUNwQiw0Q0FBNEMscURBQVc7QUFDdkQ7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLFdBQVc7QUFDakM7QUFDQSw2QkFBNkIscURBQVUsU0FBUyxxREFBYTtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MscURBQVE7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7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QkFBMEIsTUFBTSxFQUFFLE1BQU07QUFDeEMsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsY0FBYyxTQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0VBQWtFLFFBQVE7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7O0FBRWtLOztBQUVsSyIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYmEtaW5mb2dyYXBoaWMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYnVzaW5lc3MtYW5hbHlzdC1jb21wb25lbnRzL2Rpc3Qvc3RlbmNpbC1jb21wb25lbnRzL2Rpc3QvZXNtL2NhbGNpdGUtY29sb3ItcGlja2VyLWhleC1pbnB1dC5lbnRyeS5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2JhLWluZm9ncmFwaGljL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2J1c2luZXNzLWFuYWx5c3QtY29tcG9uZW50cy9kaXN0L3N0ZW5jaWwtY29tcG9uZW50cy9kaXN0L2VzbS9sb2FkYWJsZS1jYzE0ZDcyOC5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2JhLWluZm9ncmFwaGljL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2J1c2luZXNzLWFuYWx5c3QtY29tcG9uZW50cy9kaXN0L3N0ZW5jaWwtY29tcG9uZW50cy9kaXN0L2VzbS91dGlscy1hNzFkOGVlOS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByIGFzIHJlZ2lzdGVySW5zdGFuY2UsIGMgYXMgY3JlYXRlRXZlbnQsIGgsIGcgYXMgZ2V0RWxlbWVudCB9IGZyb20gJy4vaW5kZXgtNGU2NDc0MTEuanMnO1xuaW1wb3J0IHsgYyBhcyBjb2xvciB9IGZyb20gJy4vaW5kZXgtNTZkZDFjNDIuanMnO1xuaW1wb3J0IHsgaCBhcyBmb2N1c0VsZW1lbnQgfSBmcm9tICcuL2RvbS1mMWVlNGQwNC5qcyc7XG5pbXBvcnQgeyBhIGFzIHNldFVwTG9hZGFibGVDb21wb25lbnQsIHMgYXMgc2V0Q29tcG9uZW50TG9hZGVkLCBjIGFzIGNvbXBvbmVudExvYWRlZCB9IGZyb20gJy4vbG9hZGFibGUtY2MxNGQ3MjguanMnO1xuaW1wb3J0IHsgaSBhcyBpc1ZhbGlkSGV4LCBhIGFzIGlzTG9uZ2hhbmRIZXgsIHIgYXMgcmdiVG9IZXgsIG4gYXMgbm9ybWFsaXplSGV4LCBiIGFzIGhleENoYXIgfSBmcm9tICcuL3V0aWxzLWE3MWQ4ZWU5LmpzJztcbmltcG9ydCAnLi9pbmRleC5lc20tMWM2NWQ4YzcuanMnO1xuaW1wb3J0ICcuL2d1aWQtODhhMzcyOWYuanMnO1xuaW1wb3J0ICcuL3Jlc291cmNlcy00ODQzNmVlYS5qcyc7XG5cbi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvYmxvYi9tYXN0ZXIvTElDRU5TRS5tZCBmb3IgZGV0YWlscy5cbiAqIHYxLjAuNVxuICovXG5jb25zdCBDU1MgPSB7XG4gIGNvbnRhaW5lcjogXCJjb250YWluZXJcIixcbiAgcHJldmlldzogXCJwcmV2aWV3XCIsXG4gIGlucHV0OiBcImlucHV0XCJcbn07XG5cbmNvbnN0IGNvbG9yUGlja2VySGV4SW5wdXRDc3MgPSBcIkBrZXlmcmFtZXMgaW57MCV7b3BhY2l0eTowfTEwMCV7b3BhY2l0eToxfX1Aa2V5ZnJhbWVzIGluLWRvd257MCV7b3BhY2l0eTowO3RyYW5zZm9ybTp0cmFuc2xhdGUzRCgwLCAtNXB4LCAwKX0xMDAle29wYWNpdHk6MTt0cmFuc2Zvcm06dHJhbnNsYXRlM0QoMCwgMCwgMCl9fUBrZXlmcmFtZXMgaW4tdXB7MCV7b3BhY2l0eTowO3RyYW5zZm9ybTp0cmFuc2xhdGUzRCgwLCA1cHgsIDApfTEwMCV7b3BhY2l0eToxO3RyYW5zZm9ybTp0cmFuc2xhdGUzRCgwLCAwLCAwKX19QGtleWZyYW1lcyBpbi1zY2FsZXswJXtvcGFjaXR5OjA7dHJhbnNmb3JtOnNjYWxlM0QoMC45NSwgMC45NSwgMSl9MTAwJXtvcGFjaXR5OjE7dHJhbnNmb3JtOnNjYWxlM0QoMSwgMSwgMSl9fTpyb290ey0tY2FsY2l0ZS1hbmltYXRpb24tdGltaW5nOmNhbGMoMTUwbXMgKiB2YXIoLS1jYWxjaXRlLWludGVybmFsLWR1cmF0aW9uLWZhY3RvcikpOy0tY2FsY2l0ZS1pbnRlcm5hbC1kdXJhdGlvbi1mYWN0b3I6dmFyKC0tY2FsY2l0ZS1kdXJhdGlvbi1mYWN0b3IsIDEpOy0tY2FsY2l0ZS1pbnRlcm5hbC1hbmltYXRpb24tdGltaW5nLWZhc3Q6Y2FsYygxMDBtcyAqIHZhcigtLWNhbGNpdGUtaW50ZXJuYWwtZHVyYXRpb24tZmFjdG9yKSk7LS1jYWxjaXRlLWludGVybmFsLWFuaW1hdGlvbi10aW1pbmctbWVkaXVtOmNhbGMoMjAwbXMgKiB2YXIoLS1jYWxjaXRlLWludGVybmFsLWR1cmF0aW9uLWZhY3RvcikpOy0tY2FsY2l0ZS1pbnRlcm5hbC1hbmltYXRpb24tdGltaW5nLXNsb3c6Y2FsYygzMDBtcyAqIHZhcigtLWNhbGNpdGUtaW50ZXJuYWwtZHVyYXRpb24tZmFjdG9yKSl9LmNhbGNpdGUtYW5pbWF0ZXtvcGFjaXR5OjA7YW5pbWF0aW9uLWZpbGwtbW9kZTpib3RoO2FuaW1hdGlvbi1kdXJhdGlvbjp2YXIoLS1jYWxjaXRlLWFuaW1hdGlvbi10aW1pbmcpfS5jYWxjaXRlLWFuaW1hdGVfX2lue2FuaW1hdGlvbi1uYW1lOmlufS5jYWxjaXRlLWFuaW1hdGVfX2luLWRvd257YW5pbWF0aW9uLW5hbWU6aW4tZG93bn0uY2FsY2l0ZS1hbmltYXRlX19pbi11cHthbmltYXRpb24tbmFtZTppbi11cH0uY2FsY2l0ZS1hbmltYXRlX19pbi1zY2FsZXthbmltYXRpb24tbmFtZTppbi1zY2FsZX1AbWVkaWEgKHByZWZlcnMtcmVkdWNlZC1tb3Rpb246IHJlZHVjZSl7OnJvb3R7LS1jYWxjaXRlLWludGVybmFsLWR1cmF0aW9uLWZhY3RvcjowfX06cm9vdHstLWNhbGNpdGUtZmxvYXRpbmctdWktdHJhbnNpdGlvbjp2YXIoLS1jYWxjaXRlLWFuaW1hdGlvbi10aW1pbmcpOy0tY2FsY2l0ZS1mbG9hdGluZy11aS16LWluZGV4OjYwMH06aG9zdChbaGlkZGVuXSl7ZGlzcGxheTpub25lfTpob3N0e2Rpc3BsYXk6YmxvY2t9LmNvbnRhaW5lcntkaXNwbGF5OmlubGluZS1ncmlkO2lubGluZS1zaXplOjEwMCU7YWxpZ24taXRlbXM6Y2VudGVyO2dyaWQtdGVtcGxhdGUtY29sdW1uczoxZnIgYXV0b30ucHJldmlld3tncmlkLWNvbHVtbjoyLzM7cG9pbnRlci1ldmVudHM6bm9uZTttYXJnaW4tYmxvY2s6MHB4O21hcmdpbi1pbmxpbmU6MC4yNXJlbTtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyfS5wcmV2aWV3LC5pbnB1dHtncmlkLXJvdzoxfS5pbnB1dHtncmlkLWNvbHVtbjoxLzM7aW5saW5lLXNpemU6MTAwJTt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2V9XCI7XG5cbmNvbnN0IERFRkFVTFRfQ09MT1IgPSBjb2xvcigpO1xyXG5jb25zdCBDb2xvclBpY2tlckhleElucHV0ID0gY2xhc3Mge1xyXG4gIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcclxuICAgIHJlZ2lzdGVySW5zdGFuY2UodGhpcywgaG9zdFJlZik7XHJcbiAgICB0aGlzLmNhbGNpdGVDb2xvclBpY2tlckhleElucHV0Q2hhbmdlID0gY3JlYXRlRXZlbnQodGhpcywgXCJjYWxjaXRlQ29sb3JQaWNrZXJIZXhJbnB1dENoYW5nZVwiLCA2KTtcclxuICAgIHRoaXMub25DYWxjaXRlSW50ZXJuYWxJbnB1dEJsdXIgPSAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLmlucHV0Tm9kZTtcclxuICAgICAgY29uc3QgaW5wdXRWYWx1ZSA9IG5vZGUudmFsdWU7XHJcbiAgICAgIGNvbnN0IGhleCA9IGAjJHtpbnB1dFZhbHVlfWA7XHJcbiAgICAgIGNvbnN0IHdpbGxDbGVhclZhbHVlID0gdGhpcy5hbGxvd0VtcHR5ICYmICFpbnB1dFZhbHVlO1xyXG4gICAgICBpZiAod2lsbENsZWFyVmFsdWUgfHwgKGlzVmFsaWRIZXgoaGV4KSAmJiBpc0xvbmdoYW5kSGV4KGhleCkpKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIG1hbmlwdWxhdGluZyBET00gZGlyZWN0bHkgc2luY2UgcmVyZW5kZXIgZG9lc24ndCB1cGRhdGUgaW5wdXQgdmFsdWVcclxuICAgICAgbm9kZS52YWx1ZSA9XHJcbiAgICAgICAgdGhpcy5hbGxvd0VtcHR5ICYmICF0aGlzLmludGVybmFsQ29sb3JcclxuICAgICAgICAgID8gXCJcIlxyXG4gICAgICAgICAgOiB0aGlzLmZvcm1hdEZvckludGVybmFsSW5wdXQocmdiVG9IZXgodGhpcy5pbnRlcm5hbENvbG9yLm9iamVjdCgpKSk7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5vbklucHV0Q2hhbmdlID0gKCkgPT4ge1xyXG4gICAgICB0aGlzLmludGVybmFsU2V0VmFsdWUodGhpcy5pbnB1dE5vZGUudmFsdWUsIHRoaXMudmFsdWUpO1xyXG4gICAgfTtcclxuICAgIHRoaXMucHJldmlvdXNOb25OdWxsVmFsdWUgPSB0aGlzLnZhbHVlO1xyXG4gICAgdGhpcy5zdG9yZUlucHV0UmVmID0gKG5vZGUpID0+IHtcclxuICAgICAgdGhpcy5pbnB1dE5vZGUgPSBub2RlO1xyXG4gICAgfTtcclxuICAgIHRoaXMuaGV4TGFiZWwgPSBcIkhleFwiO1xyXG4gICAgdGhpcy5hbGxvd0VtcHR5ID0gZmFsc2U7XHJcbiAgICB0aGlzLnNjYWxlID0gXCJtXCI7XHJcbiAgICB0aGlzLnZhbHVlID0gbm9ybWFsaXplSGV4KERFRkFVTFRfQ09MT1IuaGV4KCkpO1xyXG4gICAgdGhpcy5udW1iZXJpbmdTeXN0ZW0gPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLmludGVybmFsQ29sb3IgPSBERUZBVUxUX0NPTE9SO1xyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyAgTGlmZWN5Y2xlXHJcbiAgLy9cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XHJcbiAgICBjb25zdCB7IGFsbG93RW1wdHksIHZhbHVlIH0gPSB0aGlzO1xyXG4gICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBub3JtYWxpemVIZXgodmFsdWUpO1xyXG4gICAgICBpZiAoaXNWYWxpZEhleChub3JtYWxpemVkKSkge1xyXG4gICAgICAgIHRoaXMuaW50ZXJuYWxTZXRWYWx1ZShub3JtYWxpemVkLCBub3JtYWxpemVkLCBmYWxzZSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKGFsbG93RW1wdHkpIHtcclxuICAgICAgdGhpcy5pbnRlcm5hbFNldFZhbHVlKG51bGwsIG51bGwsIGZhbHNlKTtcclxuICAgIH1cclxuICB9XHJcbiAgY29tcG9uZW50V2lsbExvYWQoKSB7XHJcbiAgICBzZXRVcExvYWRhYmxlQ29tcG9uZW50KHRoaXMpO1xyXG4gIH1cclxuICBjb21wb25lbnREaWRMb2FkKCkge1xyXG4gICAgc2V0Q29tcG9uZW50TG9hZGVkKHRoaXMpO1xyXG4gIH1cclxuICBoYW5kbGVWYWx1ZUNoYW5nZSh2YWx1ZSwgb2xkVmFsdWUpIHtcclxuICAgIHRoaXMuaW50ZXJuYWxTZXRWYWx1ZSh2YWx1ZSwgb2xkVmFsdWUsIGZhbHNlKTtcclxuICB9XHJcbiAgLy8gdXNpbmcgQExpc3RlbiBhcyBhIHdvcmthcm91bmQgZm9yIFZET00gbGlzdGVuZXIgbm90IGZpcmluZ1xyXG4gIG9uSW5wdXRLZXlEb3duKGV2ZW50KSB7XHJcbiAgICBjb25zdCB7IGFsdEtleSwgY3RybEtleSwgbWV0YUtleSwgc2hpZnRLZXkgfSA9IGV2ZW50O1xyXG4gICAgY29uc3QgeyBpbnRlcm5hbENvbG9yLCB2YWx1ZSB9ID0gdGhpcztcclxuICAgIGNvbnN0IHsga2V5IH0gPSBldmVudDtcclxuICAgIGlmIChrZXkgPT09IFwiVGFiXCIgfHwga2V5ID09PSBcIkVudGVyXCIpIHtcclxuICAgICAgdGhpcy5vbklucHV0Q2hhbmdlKCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IGlzTnVkZ2VLZXkgPSBrZXkgPT09IFwiQXJyb3dEb3duXCIgfHwga2V5ID09PSBcIkFycm93VXBcIjtcclxuICAgIGNvbnN0IG9sZFZhbHVlID0gdGhpcy52YWx1ZTtcclxuICAgIGlmIChpc051ZGdlS2V5KSB7XHJcbiAgICAgIGlmICghdmFsdWUpIHtcclxuICAgICAgICB0aGlzLmludGVybmFsU2V0VmFsdWUodGhpcy5wcmV2aW91c05vbk51bGxWYWx1ZSwgb2xkVmFsdWUpO1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IGtleSA9PT0gXCJBcnJvd1VwXCIgPyAxIDogLTE7XHJcbiAgICAgIGNvbnN0IGJ1bXAgPSBzaGlmdEtleSA/IDEwIDogMTtcclxuICAgICAgdGhpcy5pbnRlcm5hbFNldFZhbHVlKG5vcm1hbGl6ZUhleCh0aGlzLm51ZGdlUkdCQ2hhbm5lbHMoaW50ZXJuYWxDb2xvciwgYnVtcCAqIGRpcmVjdGlvbikuaGV4KCkpLCBvbGRWYWx1ZSk7XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IHdpdGhNb2RpZmllcnMgPSBhbHRLZXkgfHwgY3RybEtleSB8fCBtZXRhS2V5O1xyXG4gICAgY29uc3Qgc2luZ2xlQ2hhciA9IGtleS5sZW5ndGggPT09IDE7XHJcbiAgICBjb25zdCB2YWxpZEhleENoYXIgPSBoZXhDaGFyLnRlc3Qoa2V5KTtcclxuICAgIGlmIChzaW5nbGVDaGFyICYmICF3aXRoTW9kaWZpZXJzICYmICF2YWxpZEhleENoYXIpIHtcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH1cclxuICB9XHJcbiAgb25QYXN0ZShldmVudCkge1xyXG4gICAgY29uc3QgaGV4ID0gZXZlbnQuY2xpcGJvYXJkRGF0YS5nZXREYXRhKFwidGV4dFwiKTtcclxuICAgIGlmIChpc1ZhbGlkSGV4KGhleCkpIHtcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5pbnB1dE5vZGUudmFsdWUgPSBoZXguc2xpY2UoMSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vICBMaWZlY3ljbGVcclxuICAvL1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCB7IHZhbHVlIH0gPSB0aGlzO1xyXG4gICAgY29uc3QgaGV4SW5wdXRWYWx1ZSA9IHRoaXMuZm9ybWF0Rm9ySW50ZXJuYWxJbnB1dCh2YWx1ZSk7XHJcbiAgICByZXR1cm4gKGgoXCJkaXZcIiwgeyBjbGFzczogQ1NTLmNvbnRhaW5lciB9LCBoKFwiY2FsY2l0ZS1pbnB1dFwiLCB7IGNsYXNzOiBDU1MuaW5wdXQsIGxhYmVsOiB0aGlzLmhleExhYmVsLCBtYXhMZW5ndGg6IDYsIG51bWJlcmluZ1N5c3RlbTogdGhpcy5udW1iZXJpbmdTeXN0ZW0sIG9uQ2FsY2l0ZUlucHV0Q2hhbmdlOiB0aGlzLm9uSW5wdXRDaGFuZ2UsIG9uQ2FsY2l0ZUludGVybmFsSW5wdXRCbHVyOiB0aGlzLm9uQ2FsY2l0ZUludGVybmFsSW5wdXRCbHVyLCBvbktleURvd246IHRoaXMuaGFuZGxlS2V5RG93biwgb25QYXN0ZTogdGhpcy5vblBhc3RlLCBwcmVmaXhUZXh0OiBcIiNcIiwgcmVmOiB0aGlzLnN0b3JlSW5wdXRSZWYsIHNjYWxlOiB0aGlzLnNjYWxlLCB2YWx1ZTogaGV4SW5wdXRWYWx1ZSB9KSwgaGV4SW5wdXRWYWx1ZSA/IChoKFwiY2FsY2l0ZS1jb2xvci1waWNrZXItc3dhdGNoXCIsIHsgYWN0aXZlOiB0cnVlLCBjbGFzczogQ1NTLnByZXZpZXcsIGNvbG9yOiBgIyR7aGV4SW5wdXRWYWx1ZX1gLCBzY2FsZTogdGhpcy5zY2FsZSB9KSkgOiBudWxsKSk7XHJcbiAgfVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvL1xyXG4gIC8vICBQdWJsaWMgTWV0aG9kc1xyXG4gIC8vXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8qKiBTZXRzIGZvY3VzIG9uIHRoZSBjb21wb25lbnQuICovXHJcbiAgYXN5bmMgc2V0Rm9jdXMoKSB7XHJcbiAgICBhd2FpdCBjb21wb25lbnRMb2FkZWQodGhpcyk7XHJcbiAgICBmb2N1c0VsZW1lbnQodGhpcy5pbnB1dE5vZGUpO1xyXG4gIH1cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy9cclxuICAvLyAgUHJpdmF0ZSBNZXRob2RzXHJcbiAgLy9cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgaW50ZXJuYWxTZXRWYWx1ZSh2YWx1ZSwgb2xkVmFsdWUsIGVtaXQgPSB0cnVlKSB7XHJcbiAgICBpZiAodmFsdWUpIHtcclxuICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZUhleCh2YWx1ZSk7XHJcbiAgICAgIGlmIChpc1ZhbGlkSGV4KG5vcm1hbGl6ZWQpKSB7XHJcbiAgICAgICAgY29uc3QgeyBpbnRlcm5hbENvbG9yIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnN0IGNoYW5nZWQgPSAhaW50ZXJuYWxDb2xvciB8fCBub3JtYWxpemVkICE9PSBub3JtYWxpemVIZXgoaW50ZXJuYWxDb2xvci5oZXgoKSk7XHJcbiAgICAgICAgdGhpcy5pbnRlcm5hbENvbG9yID0gY29sb3Iobm9ybWFsaXplZCk7XHJcbiAgICAgICAgdGhpcy5wcmV2aW91c05vbk51bGxWYWx1ZSA9IG5vcm1hbGl6ZWQ7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IG5vcm1hbGl6ZWQ7XHJcbiAgICAgICAgaWYgKGNoYW5nZWQgJiYgZW1pdCkge1xyXG4gICAgICAgICAgdGhpcy5jYWxjaXRlQ29sb3JQaWNrZXJIZXhJbnB1dENoYW5nZS5lbWl0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodGhpcy5hbGxvd0VtcHR5KSB7XHJcbiAgICAgIHRoaXMuaW50ZXJuYWxDb2xvciA9IG51bGw7XHJcbiAgICAgIHRoaXMudmFsdWUgPSBudWxsO1xyXG4gICAgICBpZiAoZW1pdCkge1xyXG4gICAgICAgIHRoaXMuY2FsY2l0ZUNvbG9yUGlja2VySGV4SW5wdXRDaGFuZ2UuZW1pdCgpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRoaXMudmFsdWUgPSBvbGRWYWx1ZTtcclxuICB9XHJcbiAgZm9ybWF0Rm9ySW50ZXJuYWxJbnB1dChoZXgpIHtcclxuICAgIHJldHVybiBoZXggPyBoZXgucmVwbGFjZShcIiNcIiwgXCJcIikgOiBcIlwiO1xyXG4gIH1cclxuICBudWRnZVJHQkNoYW5uZWxzKGNvbG9yJDEsIGFtb3VudCkge1xyXG4gICAgcmV0dXJuIGNvbG9yLnJnYihjb2xvciQxLmFycmF5KCkubWFwKChjaGFubmVsKSA9PiBjaGFubmVsICsgYW1vdW50KSk7XHJcbiAgfVxyXG4gIGhhbmRsZUtleURvd24oZXZlbnQpIHtcclxuICAgIGlmIChldmVudC5rZXkgPT09IFwiRW50ZXJcIikge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfVxyXG4gIH1cclxuICBnZXQgZWwoKSB7IHJldHVybiBnZXRFbGVtZW50KHRoaXMpOyB9XHJcbiAgc3RhdGljIGdldCB3YXRjaGVycygpIHsgcmV0dXJuIHtcclxuICAgIFwidmFsdWVcIjogW1wiaGFuZGxlVmFsdWVDaGFuZ2VcIl1cclxuICB9OyB9XHJcbn07XHJcbkNvbG9yUGlja2VySGV4SW5wdXQuc3R5bGUgPSBjb2xvclBpY2tlckhleElucHV0Q3NzO1xuXG5leHBvcnQgeyBDb2xvclBpY2tlckhleElucHV0IGFzIGNhbGNpdGVfY29sb3JfcGlja2VyX2hleF9pbnB1dCB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1jYWxjaXRlLWNvbG9yLXBpY2tlci1oZXgtaW5wdXQuZW50cnkuanMubWFwIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtY29tcG9uZW50cy9ibG9iL21hc3Rlci9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxuICogdjEuMC41XG4gKi9cbmNvbnN0IHJlc29sdmVNYXAgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgcHJvbWlzZU1hcCA9IG5ldyBXZWFrTWFwKCk7XG4vKipcbiAqIFRoaXMgaGVscGVyIHV0aWwgc2V0cyB1cCB0aGUgY29tcG9uZW50IGZvciB0aGUgYWJpbGl0eSB0byBrbm93IHdoZW4gdGhlIGNvbXBvbmVudCBoYXMgYmVlbiBsb2FkZWQuXG4gKlxuICogVGhpcyBzaG91bGQgYmUgdXNlZCBpbiB0aGUgYGNvbXBvbmVudFdpbGxMb2FkYCBsaWZlY3ljbGUgaG9vay5cbiAqXG4gKiBgYGBcbiAqIGNvbXBvbmVudFdpbGxMb2FkKCk6IHZvaWQge1xuICogICBzZXRVcExvYWRhYmxlQ29tcG9uZW50KHRoaXMpO1xuICogfVxuICogYGBgXG4gKlxuICogQHBhcmFtIGNvbXBvbmVudFxuICovXG5mdW5jdGlvbiBzZXRVcExvYWRhYmxlQ29tcG9uZW50KGNvbXBvbmVudCkge1xuICBwcm9taXNlTWFwLnNldChjb21wb25lbnQsIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiByZXNvbHZlTWFwLnNldChjb21wb25lbnQsIHJlc29sdmUpKSk7XG59XG4vKipcbiAqIFRoaXMgaGVscGVyIHV0aWwgbGV0cyB0aGUgbG9hZGFibGUgY29tcG9uZW50IGtub3cgdGhhdCBpdCBpcyBub3cgbG9hZGVkLlxuICpcbiAqIFRoaXMgc2hvdWxkIGJlIHVzZWQgaW4gdGhlIGBjb21wb25lbnREaWRMb2FkYCBsaWZlY3ljbGUgaG9vay5cbiAqXG4gKiBgYGBcbiAqIGNvbXBvbmVudERpZExvYWQoKTogdm9pZCB7XG4gKiAgIHNldENvbXBvbmVudExvYWRlZCh0aGlzKTtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBjb21wb25lbnRcbiAqL1xuZnVuY3Rpb24gc2V0Q29tcG9uZW50TG9hZGVkKGNvbXBvbmVudCkge1xuICByZXNvbHZlTWFwLmdldChjb21wb25lbnQpKCk7XG59XG4vKipcbiAqIFRoaXMgaGVscGVyIHV0aWwgY2FuIGJlIHVzZWQgdG8gZW5zdXJlIGEgY29tcG9uZW50IGhhcyBiZWVuIGxvYWRlZCAoVGhlIFwiY29tcG9uZW50RGlkTG9hZFwiIHN0ZW5jaWwgbGlmZWN5Y2xlIG1ldGhvZCBoYXMgYmVlbiBjYWxsZWQpLlxuICpcbiAqIFJlcXVpcmVzIFwic2V0VXBMb2FkYWJsZUNvbXBvbmVudFwiIGFuZCBcInNldENvbXBvbmVudExvYWRlZFwiIHRvIGJlIGNhbGxlZCBmaXJzdC5cbiAqXG4gKiBBIGNvbXBvbmVudCBkZXZlbG9wZXIgY2FuIGF3YWl0IHRoaXMgbWV0aG9kIGJlZm9yZSBwcm9jZWVkaW5nIHdpdGggYW55IGxvZ2ljIHRoYXQgcmVxdWlyZXMgYSBjb21wb25lbnQgdG8gYmUgbG9hZGVkIGZpcnN0LlxuICpcbiAqIGBgYFxuICogYXN5bmMgc2V0Rm9jdXMoKTogUHJvbWlzZTx2b2lkPiB7XG4gKiAgIGF3YWl0IGNvbXBvbmVudExvYWRlZCh0aGlzKTtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBjb21wb25lbnRcbiAqIEByZXR1cm5zIFByb21pc2U8dm9pZD5cbiAqL1xuZnVuY3Rpb24gY29tcG9uZW50TG9hZGVkKGNvbXBvbmVudCkge1xuICByZXR1cm4gcHJvbWlzZU1hcC5nZXQoY29tcG9uZW50KTtcbn1cblxuZXhwb3J0IHsgc2V0VXBMb2FkYWJsZUNvbXBvbmVudCBhcyBhLCBjb21wb25lbnRMb2FkZWQgYXMgYywgc2V0Q29tcG9uZW50TG9hZGVkIGFzIHMgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bG9hZGFibGUtY2MxNGQ3MjguanMubWFwIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtY29tcG9uZW50cy9ibG9iL21hc3Rlci9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxuICogdjEuMC41XG4gKi9cbmZ1bmN0aW9uIHJnYlRvSGV4KGNvbG9yKSB7XG4gIGNvbnN0IHsgciwgZywgYiB9ID0gY29sb3I7XG4gIHJldHVybiBgIyR7ci50b1N0cmluZygxNikucGFkU3RhcnQoMiwgXCIwXCIpfSR7Zy50b1N0cmluZygxNikucGFkU3RhcnQoMiwgXCIwXCIpfSR7YlxuICAgIC50b1N0cmluZygxNilcbiAgICAucGFkU3RhcnQoMiwgXCIwXCIpfWAudG9Mb3dlckNhc2UoKTtcbn1cbmNvbnN0IGhleENoYXIgPSAvXlswLTlBLUZdJC9pO1xuY29uc3Qgc2hvcnRIYW5kSGV4ID0gL14jWzAtOUEtRl17M30kL2k7XG5jb25zdCBsb25naGFuZEhleCA9IC9eI1swLTlBLUZdezZ9JC9pO1xuZnVuY3Rpb24gaXNWYWxpZEhleChoZXgpIHtcbiAgcmV0dXJuIGlzU2hvcnRoYW5kSGV4KGhleCkgfHwgaXNMb25naGFuZEhleChoZXgpO1xufVxuZnVuY3Rpb24gaXNTaG9ydGhhbmRIZXgoaGV4KSB7XG4gIHJldHVybiBoZXggJiYgaGV4Lmxlbmd0aCA9PT0gNCAmJiBzaG9ydEhhbmRIZXgudGVzdChoZXgpO1xufVxuZnVuY3Rpb24gaXNMb25naGFuZEhleChoZXgpIHtcbiAgcmV0dXJuIGhleCAmJiBoZXgubGVuZ3RoID09PSA3ICYmIGxvbmdoYW5kSGV4LnRlc3QoaGV4KTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUhleChoZXgpIHtcbiAgaGV4ID0gaGV4LnRvTG93ZXJDYXNlKCk7XG4gIGlmICghaGV4LnN0YXJ0c1dpdGgoXCIjXCIpKSB7XG4gICAgaGV4ID0gYCMke2hleH1gO1xuICB9XG4gIGlmIChpc1Nob3J0aGFuZEhleChoZXgpKSB7XG4gICAgcmV0dXJuIHJnYlRvSGV4KGhleFRvUkdCKGhleCkpO1xuICB9XG4gIHJldHVybiBoZXg7XG59XG5mdW5jdGlvbiBoZXhUb1JHQihoZXgpIHtcbiAgaWYgKCFpc1ZhbGlkSGV4KGhleCkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBoZXggPSBoZXgucmVwbGFjZShcIiNcIiwgXCJcIik7XG4gIGlmIChoZXgubGVuZ3RoID09PSAzKSB7XG4gICAgY29uc3QgW2ZpcnN0LCBzZWNvbmQsIHRoaXJkXSA9IGhleC5zcGxpdChcIlwiKTtcbiAgICBjb25zdCByID0gcGFyc2VJbnQoYCR7Zmlyc3R9JHtmaXJzdH1gLCAxNik7XG4gICAgY29uc3QgZyA9IHBhcnNlSW50KGAke3NlY29uZH0ke3NlY29uZH1gLCAxNik7XG4gICAgY29uc3QgYiA9IHBhcnNlSW50KGAke3RoaXJkfSR7dGhpcmR9YCwgMTYpO1xuICAgIHJldHVybiB7IHIsIGcsIGIgfTtcbiAgfVxuICBjb25zdCByID0gcGFyc2VJbnQoaGV4LnNsaWNlKDAsIDIpLCAxNik7XG4gIGNvbnN0IGcgPSBwYXJzZUludChoZXguc2xpY2UoMiwgNCksIDE2KTtcbiAgY29uc3QgYiA9IHBhcnNlSW50KGhleC5zbGljZSg0LCA2KSwgMTYpO1xuICByZXR1cm4geyByLCBnLCBiIH07XG59XG4vLyB0aGVzZSB1dGlscyBhbGxvdyB1c2VycyB0byBwYXNzIGVudW0gdmFsdWVzIGFzIHN0cmluZ3Mgd2l0aG91dCBoYXZpbmcgdG8gYWNjZXNzIHRoZSBlbnVtXG4vLyBiYXNlZCBvbiB0aGUgYXBwcm9hY2ggc3VnZ2VzdGVkIGJ5IGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvVHlwZVNjcmlwdC9pc3N1ZXMvMTc2OTAjaXNzdWVjb21tZW50LTMyMTM2NTc1OSxcbmNvbnN0IGVudW1pZnkgPSAoeCkgPT4geDtcbmNvbnN0IENTU0NvbG9yTW9kZSA9IGVudW1pZnkoe1xuICBIRVg6IFwiaGV4XCIsXG4gIEhFWEE6IFwiaGV4YVwiLFxuICBSR0JfQ1NTOiBcInJnYi1jc3NcIixcbiAgUkdCQV9DU1M6IFwicmdiYS1jc3NcIixcbiAgSFNMX0NTUzogXCJoc2wtY3NzXCIsXG4gIEhTTEFfQ1NTOiBcImhzbGEtY3NzXCJcbn0pO1xuY29uc3QgT2JqZWN0Q29sb3JNb2RlID0gZW51bWlmeSh7XG4gIFJHQjogXCJyZ2JcIixcbiAgUkdCQTogXCJyZ2JhXCIsXG4gIEhTTDogXCJoc2xcIixcbiAgSFNMQTogXCJoc2xhXCIsXG4gIEhTVjogXCJoc3ZcIixcbiAgSFNWQTogXCJoc3ZhXCJcbn0pO1xuZnVuY3Rpb24gcGFyc2VNb2RlKGNvbG9yVmFsdWUpIHtcbiAgaWYgKHR5cGVvZiBjb2xvclZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgaWYgKGNvbG9yVmFsdWUuc3RhcnRzV2l0aChcIiNcIikpIHtcbiAgICAgIGNvbnN0IHsgbGVuZ3RoIH0gPSBjb2xvclZhbHVlO1xuICAgICAgaWYgKGxlbmd0aCA9PT0gNCB8fCBsZW5ndGggPT09IDcpIHtcbiAgICAgICAgcmV0dXJuIENTU0NvbG9yTW9kZS5IRVg7XG4gICAgICB9XG4gICAgICBpZiAobGVuZ3RoID09PSA1IHx8IGxlbmd0aCA9PT0gOSkge1xuICAgICAgICByZXR1cm4gQ1NTQ29sb3JNb2RlLkhFWEE7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChjb2xvclZhbHVlLnN0YXJ0c1dpdGgoXCJyZ2JhKFwiKSkge1xuICAgICAgcmV0dXJuIENTU0NvbG9yTW9kZS5SR0JBX0NTUztcbiAgICB9XG4gICAgaWYgKGNvbG9yVmFsdWUuc3RhcnRzV2l0aChcInJnYihcIikpIHtcbiAgICAgIHJldHVybiBDU1NDb2xvck1vZGUuUkdCX0NTUztcbiAgICB9XG4gICAgaWYgKGNvbG9yVmFsdWUuc3RhcnRzV2l0aChcImhzbChcIikpIHtcbiAgICAgIHJldHVybiBDU1NDb2xvck1vZGUuSFNMX0NTUztcbiAgICB9XG4gICAgaWYgKGNvbG9yVmFsdWUuc3RhcnRzV2l0aChcImhzbGEoXCIpKSB7XG4gICAgICByZXR1cm4gQ1NTQ29sb3JNb2RlLkhTTEFfQ1NTO1xuICAgIH1cbiAgfVxuICBpZiAodHlwZW9mIGNvbG9yVmFsdWUgPT09IFwib2JqZWN0XCIpIHtcbiAgICBpZiAoaGFzQ2hhbm5lbHMoY29sb3JWYWx1ZSwgXCJyXCIsIFwiZ1wiLCBcImJcIikpIHtcbiAgICAgIHJldHVybiBoYXNDaGFubmVscyhjb2xvclZhbHVlLCBcImFcIikgPyBPYmplY3RDb2xvck1vZGUuUkdCQSA6IE9iamVjdENvbG9yTW9kZS5SR0I7XG4gICAgfVxuICAgIGlmIChoYXNDaGFubmVscyhjb2xvclZhbHVlLCBcImhcIiwgXCJzXCIsIFwibFwiKSkge1xuICAgICAgcmV0dXJuIGhhc0NoYW5uZWxzKGNvbG9yVmFsdWUsIFwiYVwiKSA/IE9iamVjdENvbG9yTW9kZS5IU0xBIDogT2JqZWN0Q29sb3JNb2RlLkhTTDtcbiAgICB9XG4gICAgaWYgKGhhc0NoYW5uZWxzKGNvbG9yVmFsdWUsIFwiaFwiLCBcInNcIiwgXCJ2XCIpKSB7XG4gICAgICByZXR1cm4gaGFzQ2hhbm5lbHMoY29sb3JWYWx1ZSwgXCJhXCIpID8gT2JqZWN0Q29sb3JNb2RlLkhTVkEgOiBPYmplY3RDb2xvck1vZGUuSFNWO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIGhhc0NoYW5uZWxzKGNvbG9yT2JqZWN0LCAuLi5jaGFubmVscykge1xuICByZXR1cm4gY2hhbm5lbHMuZXZlcnkoKGNoYW5uZWwpID0+IGNoYW5uZWwgJiYgY29sb3JPYmplY3QgJiYgYCR7Y2hhbm5lbH1gIGluIGNvbG9yT2JqZWN0KTtcbn1cbmZ1bmN0aW9uIGNvbG9yRXF1YWwodmFsdWUxLCB2YWx1ZTIpIHtcbiAgcmV0dXJuIHZhbHVlMT8ucmdiTnVtYmVyKCkgPT09IHZhbHVlMj8ucmdiTnVtYmVyKCk7XG59XG5cbmV4cG9ydCB7IENTU0NvbG9yTW9kZSBhcyBDLCBpc0xvbmdoYW5kSGV4IGFzIGEsIGhleENoYXIgYXMgYiwgY29sb3JFcXVhbCBhcyBjLCBoZXhUb1JHQiBhcyBoLCBpc1ZhbGlkSGV4IGFzIGksIG5vcm1hbGl6ZUhleCBhcyBuLCBwYXJzZU1vZGUgYXMgcCwgcmdiVG9IZXggYXMgciB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlscy1hNzFkOGVlOS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=