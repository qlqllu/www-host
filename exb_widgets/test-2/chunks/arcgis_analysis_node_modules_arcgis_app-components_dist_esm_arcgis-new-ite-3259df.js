"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-new-ite-3259df"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-feature-layer-from-url.entry.js":
/*!***********************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-feature-layer-from-url.entry.js ***!
  \***********************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   arcgis_new_item_pages_feature_layer_from_url: () => (/* binding */ ArcgisNewItemPagesFeatureLayerFromUrl)
/* harmony export */ });
/* harmony import */ var _index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-92ebb396.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-92ebb396.js");
/* harmony import */ var _portal_79caaeff_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./portal-79caaeff.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/portal-79caaeff.js");
/* harmony import */ var _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./config-eb5f7dc2.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/config-eb5f7dc2.js");
/* harmony import */ var _item_properties_e6412a9a_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./item-properties-e6412a9a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-properties-e6412a9a.js");
/* harmony import */ var _feature_layer_38cdae87_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./feature-layer-38cdae87.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-38cdae87.js");
/* harmony import */ var _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./add-item-97d577a9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/add-item-97d577a9.js");
/* harmony import */ var _ui_ecf86bba_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ui-ecf86bba.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ui-ecf86bba.js");
/* harmony import */ var _feature_layer_d33ea114_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./feature-layer-d33ea114.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-d33ea114.js");
/* harmony import */ var _feature_layer_d0f64b81_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./feature-layer-d0f64b81.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-d0f64b81.js");
/* harmony import */ var _loadModules_aaf30bd6_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./loadModules-aaf30bd6.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/loadModules-aaf30bd6.js");
/* harmony import */ var _privileges_ccd5f37d_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./privileges-ccd5f37d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/privileges-ccd5f37d.js");
/* harmony import */ var _functional_c82f5ab9_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./functional-c82f5ab9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-c82f5ab9.js");
/* harmony import */ var _index_81d548b7_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./index-81d548b7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-81d548b7.js");
/* harmony import */ var _functional_9f648bee_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./functional-9f648bee.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-9f648bee.js");
/* harmony import */ var _server_item_f12153e6_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./server-item-f12153e6.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/server-item-f12153e6.js");
/* harmony import */ var _item_types_b4fe86ad_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./item-types-b4fe86ad.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-types-b4fe86ad.js");
/* harmony import */ var _ags_68d4ae20_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./ags-68d4ae20.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ags-68d4ae20.js");
/* harmony import */ var _url_f3b82cc7_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./url-f3b82cc7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/url-f3b82cc7.js");
/* harmony import */ var _storage_d7f5822e_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./storage-d7f5822e.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/storage-d7f5822e.js");
/* harmony import */ var _file_f36193e9_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./file-f36193e9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/file-f36193e9.js");
/* harmony import */ var _guid_4f4176ba_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./guid-4f4176ba.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/guid-4f4176ba.js");
/* harmony import */ var _store_3210b604_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./store-3210b604.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/store-3210b604.js");
/* harmony import */ var _thumbnail_0b7adfcd_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./thumbnail-0b7adfcd.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/thumbnail-0b7adfcd.js");
/* harmony import */ var _query_4f7b7e4d_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./query-4f7b7e4d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/query-4f7b7e4d.js");
/* harmony import */ var _user_e3dedc4a_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./user-e3dedc4a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/user-e3dedc4a.js");
/* harmony import */ var _api_f7934cd7_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./api-f7934cd7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/api-f7934cd7.js");
/* harmony import */ var _item_d9d70416_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./item-d9d70416.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-d9d70416.js");
/* harmony import */ var _dom_13f5b00c_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./dom-13f5b00c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/dom-13f5b00c.js");
/* harmony import */ var _feature_layer_69305a85_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./feature-layer-69305a85.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-69305a85.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */






























const arcgisNewItemPagesFeatureLayerFromUrlCss = ".input{margin-top:1rem}.label{display:block;margin-top:1rem}";

const ArcgisNewItemPagesFeatureLayerFromUrl = class {
  constructor(hostRef) {
    (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.newItemUpdatePage = (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "newItemUpdatePage", 7);
    this.url = undefined;
    this.error = undefined;
    this.loading = undefined;
  }
  async componentWillLoad() {
    this.i18n = _ui_ecf86bba_js__WEBPACK_IMPORTED_MODULE_6__.u.i18n.featureLayerFromUrl;
    this.commonI18n = _ui_ecf86bba_js__WEBPACK_IMPORTED_MODULE_6__.u.i18n.common;
    this.url = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_5__.a.serviceInfoUrl;
  }
  async handleNext() {
    var _a, _b, _c, _d, _e;
    const { url } = this;
    if (!url) {
      (0,_feature_layer_d0f64b81_js__WEBPACK_IMPORTED_MODULE_8__.f)("Empty URL");
      this.inputRef.setFocus();
      this.error = "missingUrl";
      return;
    }
    const { error: urlError } = (0,_feature_layer_d33ea114_js__WEBPACK_IMPORTED_MODULE_7__.g)(url);
    if (urlError) {
      (0,_feature_layer_d0f64b81_js__WEBPACK_IMPORTED_MODULE_8__.f)("Invalid URL");
      this.inputRef.setFocus();
      this.error = urlError.code;
      return;
    }
    this.loading = true;
    // https://devtopia.esri.com/WebGIS/arcgis-portal-app/blob/master/src/js/arcgisonline/sharing/dijit/dialog/PublishWizard.js#L390
    const featureLayerTermIndex = url.toLowerCase().indexOf("/featureserver");
    const serviceUrl = url.substring(0, featureLayerTermIndex) + "/FeatureServer";
    try {
      const { result } = await (0,_feature_layer_38cdae87_js__WEBPACK_IMPORTED_MODULE_4__.A)({ url: serviceUrl });
      if (!!(result === null || result === void 0 ? void 0 : result.isSecured)) {
        _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_5__.a.checkAuth = true;
      }
      const { layers, serviceInfo, tables } = await (0,_feature_layer_38cdae87_js__WEBPACK_IMPORTED_MODULE_4__.g)(url, (0,_portal_79caaeff_js__WEBPACK_IMPORTED_MODULE_1__.g)(_config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_2__.c.portal), false, result === null || result === void 0 ? void 0 : result.isSecured);
      _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_5__.a.serviceInfo = Object.assign(Object.assign({}, serviceInfo), { layers,
        tables });
      let title = (_a = serviceInfo.documentInfo) === null || _a === void 0 ? void 0 : _a.title;
      const serviceInfoLayers = (_b = serviceInfo.layers) !== null && _b !== void 0 ? _b : [];
      const serviceInfoTables = (_c = serviceInfo.tables) !== null && _c !== void 0 ? _c : [];
      if (!title) {
        if (serviceInfoLayers.length === 1 && serviceInfoTables.length === 0) {
          title = serviceInfoLayers[0].name;
        }
        else if (serviceInfoTables.length === 1 && serviceInfoLayers.length === 0) {
          title = serviceInfoTables[0].name;
        }
      }
      _item_properties_e6412a9a_js__WEBPACK_IMPORTED_MODULE_3__.i.title = title;
      _item_properties_e6412a9a_js__WEBPACK_IMPORTED_MODULE_3__.i.snippet = (_d = serviceInfo.serviceDescription) !== null && _d !== void 0 ? _d : "";
      _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_5__.a.description = (_e = serviceInfo.description) !== null && _e !== void 0 ? _e : "";
      _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_5__.a.serviceInfoUrl = url;
      this.loading = false;
      this.newItemUpdatePage.emit("featureLayerSummary");
    }
    catch (error) {
      (0,_feature_layer_d0f64b81_js__WEBPACK_IMPORTED_MODULE_8__.f)("Service doesn't exist");
      this.error = "serviceNotExist";
    }
  }
  handleInputChange(e) {
    this.url = e.target.value;
  }
  render() {
    const { loading, i18n, commonI18n, error, url } = this;
    const { title, description } = i18n.error[error] || {};
    const { portal } = _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_2__.c;
    return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.H, null, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-loader", { active: loading, text: _ui_ecf86bba_js__WEBPACK_IMPORTED_MODULE_6__.u.i18n.urlType.getServiceInfo }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { class: "label" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-description", { header: commonI18n.url, content: i18n.description }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { placeholder: portal.isPortal
        ? "https://webadaptorhost.domain.com/webadaptorname/rest/services/service/servicetype"
        : "https://myserver.com/arcgis/rest/services/folder/service/FeatureServer", onCalciteInputInput: (e) => this.handleInputChange(e), class: "input", scale: "l", ref: (ele) => (this.inputRef = ele), value: url })), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-alert", { heading: title, description: description, active: !!error, onAlertDismiss: () => (this.error = null) })));
  }
  get el() { return (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.d)(this); }
};
ArcgisNewItemPagesFeatureLayerFromUrl.style = arcgisNewItemPagesFeatureLayerFromUrlCss;




/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-d0f64b81.js":
/*!*******************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-d0f64b81.js ***!
  \*******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ featureServiceEndTelemetry),
/* harmony export */   b: () => (/* binding */ filterChangeTelemetry),
/* harmony export */   c: () => (/* binding */ featureLayerTypeTelemetry),
/* harmony export */   e: () => (/* binding */ enableLayerPreferenceTelemetry),
/* harmony export */   f: () => (/* binding */ featureLayerErrorTelemetry),
/* harmony export */   i: () => (/* binding */ itemExpandedTelemetry)
/* harmony export */ });
/* harmony import */ var _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config-eb5f7dc2.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/config-eb5f7dc2.js");
/* harmony import */ var _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./add-item-97d577a9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/add-item-97d577a9.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */



const TELEMETRY_ID = "create feature layer";
const TELEMETRY_PAGE_NAME = "my content";
const addFeatureLayerTypeToTelemetry = (type) => {
  switch (type) {
    case "build":
      return "blank";
    case "existing":
      return "fs";
    case "template":
      return "template";
    case "link":
      return "url";
  }
};
const enableLayerPreferenceTelemetry = (type) => {
  const telemetry = _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_0__.c.telemetry;
  telemetry === null || telemetry === void 0 ? void 0 : telemetry.stepWorkflow(TELEMETRY_ID, `enable ${type === "captureGPS" ? "gps" : type === "enableZDefaults" ? "z" : "m"}`, {
    category: TELEMETRY_ID,
    attribute: addFeatureLayerTypeToTelemetry(_add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_1__.a.addFeatureLayerType),
    pageName: TELEMETRY_PAGE_NAME
  });
};
const itemExpandedTelemetry = (type) => {
  const telemetry = _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_0__.c.telemetry;
  telemetry === null || telemetry === void 0 ? void 0 : telemetry.stepWorkflow(TELEMETRY_ID, `expand ${type} details`, {
    category: TELEMETRY_ID,
    attribute: addFeatureLayerTypeToTelemetry(_add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_1__.a.addFeatureLayerType),
    pageName: TELEMETRY_PAGE_NAME
  });
};
const filterChangeTelemetry = () => {
  const telemetry = _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_0__.c.telemetry;
  telemetry === null || telemetry === void 0 ? void 0 : telemetry.stepWorkflow(TELEMETRY_ID, "filter", {
    category: TELEMETRY_ID,
    attribute: addFeatureLayerTypeToTelemetry(_add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_1__.a.addFeatureLayerType),
    pageName: TELEMETRY_PAGE_NAME
  });
};
const featureLayerTypeTelemetry = (type) => {
  const telemetryType = addFeatureLayerTypeToTelemetry(type);
  const telemetry = _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_0__.c.telemetry;
  telemetry === null || telemetry === void 0 ? void 0 : telemetry.stepWorkflow(TELEMETRY_ID, "from option", {
    category: TELEMETRY_ID,
    attribute: telemetryType,
    pageName: TELEMETRY_PAGE_NAME
  });
};
const featureServiceEndTelemetry = () => {
  const { addFeatureLayerType, serviceInfo } = _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_1__.a;
  const featureLayerServiceInfo = serviceInfo;
  const telemetry = _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_0__.c.telemetry;
  telemetry === null || telemetry === void 0 ? void 0 : telemetry.endWorkflow(TELEMETRY_ID, {
    category: TELEMETRY_ID,
    attribute: addFeatureLayerTypeToTelemetry(addFeatureLayerType),
    pageName: TELEMETRY_PAGE_NAME,
    count: featureLayerServiceInfo.layers.length,
    number: featureLayerServiceInfo.tables.length
  });
};
const featureLayerErrorTelemetry = (errString) => {
  var _a;
  (_a = _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_0__.c.telemetry) === null || _a === void 0 ? void 0 : _a.logError({
    category: TELEMETRY_ID,
    error: errString
  });
};




/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXBwLWNvbXBvbmVudHNfZGlzdF9lc21fYXJjZ2lzLW5ldy1pdGUtMzI1OWRmLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQzZHO0FBQ2xEO0FBQ0g7QUFDaUI7QUFDZ0M7QUFDOUM7QUFDTjtBQUMwQjtBQUNEO0FBQzNDO0FBQ0Q7QUFDQTtBQUNMO0FBQ0s7QUFDQztBQUNEO0FBQ1A7QUFDQTtBQUNJO0FBQ0g7QUFDQTtBQUNDO0FBQ0k7QUFDSjtBQUNEO0FBQ0Q7QUFDQztBQUNEO0FBQ1U7O0FBRXJDLHlEQUF5RCxnQkFBZ0IsT0FBTyxjQUFjLGdCQUFnQjs7QUFFOUc7QUFDQTtBQUNBLElBQUkscURBQWdCO0FBQ3BCLDZCQUE2QixxREFBVztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDhDQUFZO0FBQzVCLHNCQUFzQiw4Q0FBWTtBQUNsQyxlQUFlLG9EQUFZO0FBQzNCO0FBQ0E7QUFDQTtBQUNBLFlBQVksTUFBTTtBQUNsQjtBQUNBLE1BQU0sNkRBQTBCO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxrQkFBa0IsRUFBRSw2REFBMkI7QUFDM0Q7QUFDQSxNQUFNLDZEQUEwQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLFNBQVMsUUFBUSw2REFBd0IsR0FBRyxpQkFBaUI7QUFDM0U7QUFDQSxRQUFRLG9EQUFZO0FBQ3BCO0FBQ0EsY0FBYyw4QkFBOEIsUUFBUSw2REFBc0IsTUFBTSxzREFBYyxDQUFDLGtEQUFXO0FBQzFHLE1BQU0sb0RBQVksNkNBQTZDLGtCQUFrQjtBQUNqRixnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sMkRBQW1CO0FBQ3pCLE1BQU0sMkRBQW1CO0FBQ3pCLE1BQU0sb0RBQVk7QUFDbEIsTUFBTSxvREFBWTtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sNkRBQTBCO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSx3Q0FBd0M7QUFDcEQsWUFBWSxxQkFBcUI7QUFDakMsWUFBWSxTQUFTLEVBQUUsa0RBQVc7QUFDbEMsWUFBWSxxREFBQyxDQUFDLGlEQUFJLFFBQVEscURBQUMsNkJBQTZCLHVCQUF1Qiw4Q0FBWSw4QkFBOEIsR0FBRyxxREFBQyxvQkFBb0IsZ0JBQWdCLEVBQUUscURBQUMsa0NBQWtDLG1EQUFtRCxHQUFHLHFEQUFDLG9CQUFvQjtBQUNqUjtBQUNBLHdOQUF3TixJQUFJLHFEQUFDLDRCQUE0QixzR0FBc0c7QUFDL1Y7QUFDQSxhQUFhLE9BQU8scURBQVU7QUFDOUI7QUFDQTs7QUFFaUc7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNuSGpHO0FBQ0E7QUFDQTtBQUNBO0FBQ3dEO0FBQ0c7O0FBRTNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixrREFBVztBQUMvQix1R0FBdUcsdUVBQXVFO0FBQzlLO0FBQ0EsOENBQThDLG9EQUFZO0FBQzFEO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxvQkFBb0Isa0RBQVc7QUFDL0IsdUdBQXVHLE1BQU07QUFDN0c7QUFDQSw4Q0FBOEMsb0RBQVk7QUFDMUQ7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLG9CQUFvQixrREFBVztBQUMvQjtBQUNBO0FBQ0EsOENBQThDLG9EQUFZO0FBQzFEO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixrREFBVztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsVUFBVSxtQ0FBbUMsRUFBRSxvREFBWTtBQUMzRDtBQUNBLG9CQUFvQixrREFBVztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsUUFBUSxrREFBVztBQUNuQjtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUV5TSIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FwcC1jb21wb25lbnRzL2Rpc3QvZXNtL2FyY2dpcy1uZXctaXRlbS1wYWdlcy1mZWF0dXJlLWxheWVyLWZyb20tdXJsLmVudHJ5LmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FwcC1jb21wb25lbnRzL2Rpc3QvZXNtL2ZlYXR1cmUtbGF5ZXItZDBmNjRiODEuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogdjMuMC45OVxuICovXG5pbXBvcnQgeyByIGFzIHJlZ2lzdGVySW5zdGFuY2UsIGMgYXMgY3JlYXRlRXZlbnQsIGgsIEggYXMgSG9zdCwgZCBhcyBnZXRFbGVtZW50IH0gZnJvbSAnLi9pbmRleC05MmViYjM5Ni5qcyc7XG5pbXBvcnQgeyBnIGFzIGdldFJlc3RCYXNlVXJsIH0gZnJvbSAnLi9wb3J0YWwtNzljYWFlZmYuanMnO1xuaW1wb3J0IHsgYyBhcyBjb25maWdTdGF0ZSB9IGZyb20gJy4vY29uZmlnLWViNWY3ZGMyLmpzJztcbmltcG9ydCB7IGkgYXMgaXRlbVByb3BlcnRpZXNTdGF0ZSB9IGZyb20gJy4vaXRlbS1wcm9wZXJ0aWVzLWU2NDEyYTlhLmpzJztcbmltcG9ydCB7IEEgYXMgZ2V0U2VjdXJlZEFHU1NlcnZpY2VJbmZvLCBnIGFzIGdldFNlcnZpY2VBbmRMYXllckluZm8gfSBmcm9tICcuL2ZlYXR1cmUtbGF5ZXItMzhjZGFlODcuanMnO1xuaW1wb3J0IHsgYSBhcyBhZGRJdGVtU3RhdGUgfSBmcm9tICcuL2FkZC1pdGVtLTk3ZDU3N2E5LmpzJztcbmltcG9ydCB7IHUgYXMgdWlTdG9yZVN0YXRlIH0gZnJvbSAnLi91aS1lY2Y4NmJiYS5qcyc7XG5pbXBvcnQgeyBnIGFzIGdldEZlYXR1cmVMYXllckluZGV4RnJvbVVybCB9IGZyb20gJy4vZmVhdHVyZS1sYXllci1kMzNlYTExNC5qcyc7XG5pbXBvcnQgeyBmIGFzIGZlYXR1cmVMYXllckVycm9yVGVsZW1ldHJ5IH0gZnJvbSAnLi9mZWF0dXJlLWxheWVyLWQwZjY0YjgxLmpzJztcbmltcG9ydCAnLi9sb2FkTW9kdWxlcy1hYWYzMGJkNi5qcyc7XG5pbXBvcnQgJy4vcHJpdmlsZWdlcy1jY2Q1ZjM3ZC5qcyc7XG5pbXBvcnQgJy4vZnVuY3Rpb25hbC1jODJmNWFiOS5qcyc7XG5pbXBvcnQgJy4vaW5kZXgtODFkNTQ4YjcuanMnO1xuaW1wb3J0ICcuL2Z1bmN0aW9uYWwtOWY2NDhiZWUuanMnO1xuaW1wb3J0ICcuL3NlcnZlci1pdGVtLWYxMjE1M2U2LmpzJztcbmltcG9ydCAnLi9pdGVtLXR5cGVzLWI0ZmU4NmFkLmpzJztcbmltcG9ydCAnLi9hZ3MtNjhkNGFlMjAuanMnO1xuaW1wb3J0ICcuL3VybC1mM2I4MmNjNy5qcyc7XG5pbXBvcnQgJy4vc3RvcmFnZS1kN2Y1ODIyZS5qcyc7XG5pbXBvcnQgJy4vZmlsZS1mMzYxOTNlOS5qcyc7XG5pbXBvcnQgJy4vZ3VpZC00ZjQxNzZiYS5qcyc7XG5pbXBvcnQgJy4vc3RvcmUtMzIxMGI2MDQuanMnO1xuaW1wb3J0ICcuL3RodW1ibmFpbC0wYjdhZGZjZC5qcyc7XG5pbXBvcnQgJy4vcXVlcnktNGY3YjdlNGQuanMnO1xuaW1wb3J0ICcuL3VzZXItZTNkZWRjNGEuanMnO1xuaW1wb3J0ICcuL2FwaS1mNzkzNGNkNy5qcyc7XG5pbXBvcnQgJy4vaXRlbS1kOWQ3MDQxNi5qcyc7XG5pbXBvcnQgJy4vZG9tLTEzZjViMDBjLmpzJztcbmltcG9ydCAnLi9mZWF0dXJlLWxheWVyLTY5MzA1YTg1LmpzJztcblxuY29uc3QgYXJjZ2lzTmV3SXRlbVBhZ2VzRmVhdHVyZUxheWVyRnJvbVVybENzcyA9IFwiLmlucHV0e21hcmdpbi10b3A6MXJlbX0ubGFiZWx7ZGlzcGxheTpibG9jazttYXJnaW4tdG9wOjFyZW19XCI7XG5cbmNvbnN0IEFyY2dpc05ld0l0ZW1QYWdlc0ZlYXR1cmVMYXllckZyb21VcmwgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcbiAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgIHRoaXMubmV3SXRlbVVwZGF0ZVBhZ2UgPSBjcmVhdGVFdmVudCh0aGlzLCBcIm5ld0l0ZW1VcGRhdGVQYWdlXCIsIDcpO1xuICAgIHRoaXMudXJsID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuZXJyb3IgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5sb2FkaW5nID0gdW5kZWZpbmVkO1xuICB9XG4gIGFzeW5jIGNvbXBvbmVudFdpbGxMb2FkKCkge1xuICAgIHRoaXMuaTE4biA9IHVpU3RvcmVTdGF0ZS5pMThuLmZlYXR1cmVMYXllckZyb21Vcmw7XG4gICAgdGhpcy5jb21tb25JMThuID0gdWlTdG9yZVN0YXRlLmkxOG4uY29tbW9uO1xuICAgIHRoaXMudXJsID0gYWRkSXRlbVN0YXRlLnNlcnZpY2VJbmZvVXJsO1xuICB9XG4gIGFzeW5jIGhhbmRsZU5leHQoKSB7XG4gICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZTtcbiAgICBjb25zdCB7IHVybCB9ID0gdGhpcztcbiAgICBpZiAoIXVybCkge1xuICAgICAgZmVhdHVyZUxheWVyRXJyb3JUZWxlbWV0cnkoXCJFbXB0eSBVUkxcIik7XG4gICAgICB0aGlzLmlucHV0UmVmLnNldEZvY3VzKCk7XG4gICAgICB0aGlzLmVycm9yID0gXCJtaXNzaW5nVXJsXCI7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHsgZXJyb3I6IHVybEVycm9yIH0gPSBnZXRGZWF0dXJlTGF5ZXJJbmRleEZyb21VcmwodXJsKTtcbiAgICBpZiAodXJsRXJyb3IpIHtcbiAgICAgIGZlYXR1cmVMYXllckVycm9yVGVsZW1ldHJ5KFwiSW52YWxpZCBVUkxcIik7XG4gICAgICB0aGlzLmlucHV0UmVmLnNldEZvY3VzKCk7XG4gICAgICB0aGlzLmVycm9yID0gdXJsRXJyb3IuY29kZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTtcbiAgICAvLyBodHRwczovL2RldnRvcGlhLmVzcmkuY29tL1dlYkdJUy9hcmNnaXMtcG9ydGFsLWFwcC9ibG9iL21hc3Rlci9zcmMvanMvYXJjZ2lzb25saW5lL3NoYXJpbmcvZGlqaXQvZGlhbG9nL1B1Ymxpc2hXaXphcmQuanMjTDM5MFxuICAgIGNvbnN0IGZlYXR1cmVMYXllclRlcm1JbmRleCA9IHVybC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCIvZmVhdHVyZXNlcnZlclwiKTtcbiAgICBjb25zdCBzZXJ2aWNlVXJsID0gdXJsLnN1YnN0cmluZygwLCBmZWF0dXJlTGF5ZXJUZXJtSW5kZXgpICsgXCIvRmVhdHVyZVNlcnZlclwiO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gYXdhaXQgZ2V0U2VjdXJlZEFHU1NlcnZpY2VJbmZvKHsgdXJsOiBzZXJ2aWNlVXJsIH0pO1xuICAgICAgaWYgKCEhKHJlc3VsdCA9PT0gbnVsbCB8fCByZXN1bHQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlc3VsdC5pc1NlY3VyZWQpKSB7XG4gICAgICAgIGFkZEl0ZW1TdGF0ZS5jaGVja0F1dGggPSB0cnVlO1xuICAgICAgfVxuICAgICAgY29uc3QgeyBsYXllcnMsIHNlcnZpY2VJbmZvLCB0YWJsZXMgfSA9IGF3YWl0IGdldFNlcnZpY2VBbmRMYXllckluZm8odXJsLCBnZXRSZXN0QmFzZVVybChjb25maWdTdGF0ZS5wb3J0YWwpLCBmYWxzZSwgcmVzdWx0ID09PSBudWxsIHx8IHJlc3VsdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVzdWx0LmlzU2VjdXJlZCk7XG4gICAgICBhZGRJdGVtU3RhdGUuc2VydmljZUluZm8gPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHNlcnZpY2VJbmZvKSwgeyBsYXllcnMsXG4gICAgICAgIHRhYmxlcyB9KTtcbiAgICAgIGxldCB0aXRsZSA9IChfYSA9IHNlcnZpY2VJbmZvLmRvY3VtZW50SW5mbykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnRpdGxlO1xuICAgICAgY29uc3Qgc2VydmljZUluZm9MYXllcnMgPSAoX2IgPSBzZXJ2aWNlSW5mby5sYXllcnMpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFtdO1xuICAgICAgY29uc3Qgc2VydmljZUluZm9UYWJsZXMgPSAoX2MgPSBzZXJ2aWNlSW5mby50YWJsZXMpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IFtdO1xuICAgICAgaWYgKCF0aXRsZSkge1xuICAgICAgICBpZiAoc2VydmljZUluZm9MYXllcnMubGVuZ3RoID09PSAxICYmIHNlcnZpY2VJbmZvVGFibGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRpdGxlID0gc2VydmljZUluZm9MYXllcnNbMF0ubmFtZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzZXJ2aWNlSW5mb1RhYmxlcy5sZW5ndGggPT09IDEgJiYgc2VydmljZUluZm9MYXllcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgdGl0bGUgPSBzZXJ2aWNlSW5mb1RhYmxlc1swXS5uYW1lO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpdGVtUHJvcGVydGllc1N0YXRlLnRpdGxlID0gdGl0bGU7XG4gICAgICBpdGVtUHJvcGVydGllc1N0YXRlLnNuaXBwZXQgPSAoX2QgPSBzZXJ2aWNlSW5mby5zZXJ2aWNlRGVzY3JpcHRpb24pICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IFwiXCI7XG4gICAgICBhZGRJdGVtU3RhdGUuZGVzY3JpcHRpb24gPSAoX2UgPSBzZXJ2aWNlSW5mby5kZXNjcmlwdGlvbikgIT09IG51bGwgJiYgX2UgIT09IHZvaWQgMCA/IF9lIDogXCJcIjtcbiAgICAgIGFkZEl0ZW1TdGF0ZS5zZXJ2aWNlSW5mb1VybCA9IHVybDtcbiAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgICAgdGhpcy5uZXdJdGVtVXBkYXRlUGFnZS5lbWl0KFwiZmVhdHVyZUxheWVyU3VtbWFyeVwiKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICBmZWF0dXJlTGF5ZXJFcnJvclRlbGVtZXRyeShcIlNlcnZpY2UgZG9lc24ndCBleGlzdFwiKTtcbiAgICAgIHRoaXMuZXJyb3IgPSBcInNlcnZpY2VOb3RFeGlzdFwiO1xuICAgIH1cbiAgfVxuICBoYW5kbGVJbnB1dENoYW5nZShlKSB7XG4gICAgdGhpcy51cmwgPSBlLnRhcmdldC52YWx1ZTtcbiAgfVxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBsb2FkaW5nLCBpMThuLCBjb21tb25JMThuLCBlcnJvciwgdXJsIH0gPSB0aGlzO1xuICAgIGNvbnN0IHsgdGl0bGUsIGRlc2NyaXB0aW9uIH0gPSBpMThuLmVycm9yW2Vycm9yXSB8fCB7fTtcbiAgICBjb25zdCB7IHBvcnRhbCB9ID0gY29uZmlnU3RhdGU7XG4gICAgcmV0dXJuIChoKEhvc3QsIG51bGwsIGgoXCJhcmNnaXMtbmV3LWl0ZW0tbG9hZGVyXCIsIHsgYWN0aXZlOiBsb2FkaW5nLCB0ZXh0OiB1aVN0b3JlU3RhdGUuaTE4bi51cmxUeXBlLmdldFNlcnZpY2VJbmZvIH0pLCBoKFwiY2FsY2l0ZS1sYWJlbFwiLCB7IGNsYXNzOiBcImxhYmVsXCIgfSwgaChcImFyY2dpcy1uZXctaXRlbS1kZXNjcmlwdGlvblwiLCB7IGhlYWRlcjogY29tbW9uSTE4bi51cmwsIGNvbnRlbnQ6IGkxOG4uZGVzY3JpcHRpb24gfSksIGgoXCJjYWxjaXRlLWlucHV0XCIsIHsgcGxhY2Vob2xkZXI6IHBvcnRhbC5pc1BvcnRhbFxuICAgICAgICA/IFwiaHR0cHM6Ly93ZWJhZGFwdG9yaG9zdC5kb21haW4uY29tL3dlYmFkYXB0b3JuYW1lL3Jlc3Qvc2VydmljZXMvc2VydmljZS9zZXJ2aWNldHlwZVwiXG4gICAgICAgIDogXCJodHRwczovL215c2VydmVyLmNvbS9hcmNnaXMvcmVzdC9zZXJ2aWNlcy9mb2xkZXIvc2VydmljZS9GZWF0dXJlU2VydmVyXCIsIG9uQ2FsY2l0ZUlucHV0SW5wdXQ6IChlKSA9PiB0aGlzLmhhbmRsZUlucHV0Q2hhbmdlKGUpLCBjbGFzczogXCJpbnB1dFwiLCBzY2FsZTogXCJsXCIsIHJlZjogKGVsZSkgPT4gKHRoaXMuaW5wdXRSZWYgPSBlbGUpLCB2YWx1ZTogdXJsIH0pKSwgaChcImFyY2dpcy1uZXctaXRlbS1hbGVydFwiLCB7IGhlYWRpbmc6IHRpdGxlLCBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sIGFjdGl2ZTogISFlcnJvciwgb25BbGVydERpc21pc3M6ICgpID0+ICh0aGlzLmVycm9yID0gbnVsbCkgfSkpKTtcbiAgfVxuICBnZXQgZWwoKSB7IHJldHVybiBnZXRFbGVtZW50KHRoaXMpOyB9XG59O1xuQXJjZ2lzTmV3SXRlbVBhZ2VzRmVhdHVyZUxheWVyRnJvbVVybC5zdHlsZSA9IGFyY2dpc05ld0l0ZW1QYWdlc0ZlYXR1cmVMYXllckZyb21VcmxDc3M7XG5cbmV4cG9ydCB7IEFyY2dpc05ld0l0ZW1QYWdlc0ZlYXR1cmVMYXllckZyb21VcmwgYXMgYXJjZ2lzX25ld19pdGVtX3BhZ2VzX2ZlYXR1cmVfbGF5ZXJfZnJvbV91cmwgfTtcbiIsIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIHYzLjAuOTlcbiAqL1xuaW1wb3J0IHsgYyBhcyBjb25maWdTdGF0ZSB9IGZyb20gJy4vY29uZmlnLWViNWY3ZGMyLmpzJztcbmltcG9ydCB7IGEgYXMgYWRkSXRlbVN0YXRlIH0gZnJvbSAnLi9hZGQtaXRlbS05N2Q1NzdhOS5qcyc7XG5cbmNvbnN0IFRFTEVNRVRSWV9JRCA9IFwiY3JlYXRlIGZlYXR1cmUgbGF5ZXJcIjtcbmNvbnN0IFRFTEVNRVRSWV9QQUdFX05BTUUgPSBcIm15IGNvbnRlbnRcIjtcbmNvbnN0IGFkZEZlYXR1cmVMYXllclR5cGVUb1RlbGVtZXRyeSA9ICh0eXBlKSA9PiB7XG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgXCJidWlsZFwiOlxuICAgICAgcmV0dXJuIFwiYmxhbmtcIjtcbiAgICBjYXNlIFwiZXhpc3RpbmdcIjpcbiAgICAgIHJldHVybiBcImZzXCI7XG4gICAgY2FzZSBcInRlbXBsYXRlXCI6XG4gICAgICByZXR1cm4gXCJ0ZW1wbGF0ZVwiO1xuICAgIGNhc2UgXCJsaW5rXCI6XG4gICAgICByZXR1cm4gXCJ1cmxcIjtcbiAgfVxufTtcbmNvbnN0IGVuYWJsZUxheWVyUHJlZmVyZW5jZVRlbGVtZXRyeSA9ICh0eXBlKSA9PiB7XG4gIGNvbnN0IHRlbGVtZXRyeSA9IGNvbmZpZ1N0YXRlLnRlbGVtZXRyeTtcbiAgdGVsZW1ldHJ5ID09PSBudWxsIHx8IHRlbGVtZXRyeSA9PT0gdm9pZCAwID8gdm9pZCAwIDogdGVsZW1ldHJ5LnN0ZXBXb3JrZmxvdyhURUxFTUVUUllfSUQsIGBlbmFibGUgJHt0eXBlID09PSBcImNhcHR1cmVHUFNcIiA/IFwiZ3BzXCIgOiB0eXBlID09PSBcImVuYWJsZVpEZWZhdWx0c1wiID8gXCJ6XCIgOiBcIm1cIn1gLCB7XG4gICAgY2F0ZWdvcnk6IFRFTEVNRVRSWV9JRCxcbiAgICBhdHRyaWJ1dGU6IGFkZEZlYXR1cmVMYXllclR5cGVUb1RlbGVtZXRyeShhZGRJdGVtU3RhdGUuYWRkRmVhdHVyZUxheWVyVHlwZSksXG4gICAgcGFnZU5hbWU6IFRFTEVNRVRSWV9QQUdFX05BTUVcbiAgfSk7XG59O1xuY29uc3QgaXRlbUV4cGFuZGVkVGVsZW1ldHJ5ID0gKHR5cGUpID0+IHtcbiAgY29uc3QgdGVsZW1ldHJ5ID0gY29uZmlnU3RhdGUudGVsZW1ldHJ5O1xuICB0ZWxlbWV0cnkgPT09IG51bGwgfHwgdGVsZW1ldHJ5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0ZWxlbWV0cnkuc3RlcFdvcmtmbG93KFRFTEVNRVRSWV9JRCwgYGV4cGFuZCAke3R5cGV9IGRldGFpbHNgLCB7XG4gICAgY2F0ZWdvcnk6IFRFTEVNRVRSWV9JRCxcbiAgICBhdHRyaWJ1dGU6IGFkZEZlYXR1cmVMYXllclR5cGVUb1RlbGVtZXRyeShhZGRJdGVtU3RhdGUuYWRkRmVhdHVyZUxheWVyVHlwZSksXG4gICAgcGFnZU5hbWU6IFRFTEVNRVRSWV9QQUdFX05BTUVcbiAgfSk7XG59O1xuY29uc3QgZmlsdGVyQ2hhbmdlVGVsZW1ldHJ5ID0gKCkgPT4ge1xuICBjb25zdCB0ZWxlbWV0cnkgPSBjb25maWdTdGF0ZS50ZWxlbWV0cnk7XG4gIHRlbGVtZXRyeSA9PT0gbnVsbCB8fCB0ZWxlbWV0cnkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHRlbGVtZXRyeS5zdGVwV29ya2Zsb3coVEVMRU1FVFJZX0lELCBcImZpbHRlclwiLCB7XG4gICAgY2F0ZWdvcnk6IFRFTEVNRVRSWV9JRCxcbiAgICBhdHRyaWJ1dGU6IGFkZEZlYXR1cmVMYXllclR5cGVUb1RlbGVtZXRyeShhZGRJdGVtU3RhdGUuYWRkRmVhdHVyZUxheWVyVHlwZSksXG4gICAgcGFnZU5hbWU6IFRFTEVNRVRSWV9QQUdFX05BTUVcbiAgfSk7XG59O1xuY29uc3QgZmVhdHVyZUxheWVyVHlwZVRlbGVtZXRyeSA9ICh0eXBlKSA9PiB7XG4gIGNvbnN0IHRlbGVtZXRyeVR5cGUgPSBhZGRGZWF0dXJlTGF5ZXJUeXBlVG9UZWxlbWV0cnkodHlwZSk7XG4gIGNvbnN0IHRlbGVtZXRyeSA9IGNvbmZpZ1N0YXRlLnRlbGVtZXRyeTtcbiAgdGVsZW1ldHJ5ID09PSBudWxsIHx8IHRlbGVtZXRyeSA9PT0gdm9pZCAwID8gdm9pZCAwIDogdGVsZW1ldHJ5LnN0ZXBXb3JrZmxvdyhURUxFTUVUUllfSUQsIFwiZnJvbSBvcHRpb25cIiwge1xuICAgIGNhdGVnb3J5OiBURUxFTUVUUllfSUQsXG4gICAgYXR0cmlidXRlOiB0ZWxlbWV0cnlUeXBlLFxuICAgIHBhZ2VOYW1lOiBURUxFTUVUUllfUEFHRV9OQU1FXG4gIH0pO1xufTtcbmNvbnN0IGZlYXR1cmVTZXJ2aWNlRW5kVGVsZW1ldHJ5ID0gKCkgPT4ge1xuICBjb25zdCB7IGFkZEZlYXR1cmVMYXllclR5cGUsIHNlcnZpY2VJbmZvIH0gPSBhZGRJdGVtU3RhdGU7XG4gIGNvbnN0IGZlYXR1cmVMYXllclNlcnZpY2VJbmZvID0gc2VydmljZUluZm87XG4gIGNvbnN0IHRlbGVtZXRyeSA9IGNvbmZpZ1N0YXRlLnRlbGVtZXRyeTtcbiAgdGVsZW1ldHJ5ID09PSBudWxsIHx8IHRlbGVtZXRyeSA9PT0gdm9pZCAwID8gdm9pZCAwIDogdGVsZW1ldHJ5LmVuZFdvcmtmbG93KFRFTEVNRVRSWV9JRCwge1xuICAgIGNhdGVnb3J5OiBURUxFTUVUUllfSUQsXG4gICAgYXR0cmlidXRlOiBhZGRGZWF0dXJlTGF5ZXJUeXBlVG9UZWxlbWV0cnkoYWRkRmVhdHVyZUxheWVyVHlwZSksXG4gICAgcGFnZU5hbWU6IFRFTEVNRVRSWV9QQUdFX05BTUUsXG4gICAgY291bnQ6IGZlYXR1cmVMYXllclNlcnZpY2VJbmZvLmxheWVycy5sZW5ndGgsXG4gICAgbnVtYmVyOiBmZWF0dXJlTGF5ZXJTZXJ2aWNlSW5mby50YWJsZXMubGVuZ3RoXG4gIH0pO1xufTtcbmNvbnN0IGZlYXR1cmVMYXllckVycm9yVGVsZW1ldHJ5ID0gKGVyclN0cmluZykgPT4ge1xuICB2YXIgX2E7XG4gIChfYSA9IGNvbmZpZ1N0YXRlLnRlbGVtZXRyeSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmxvZ0Vycm9yKHtcbiAgICBjYXRlZ29yeTogVEVMRU1FVFJZX0lELFxuICAgIGVycm9yOiBlcnJTdHJpbmdcbiAgfSk7XG59O1xuXG5leHBvcnQgeyBmZWF0dXJlU2VydmljZUVuZFRlbGVtZXRyeSBhcyBhLCBmaWx0ZXJDaGFuZ2VUZWxlbWV0cnkgYXMgYiwgZmVhdHVyZUxheWVyVHlwZVRlbGVtZXRyeSBhcyBjLCBlbmFibGVMYXllclByZWZlcmVuY2VUZWxlbWV0cnkgYXMgZSwgZmVhdHVyZUxheWVyRXJyb3JUZWxlbWV0cnkgYXMgZiwgaXRlbUV4cGFuZGVkVGVsZW1ldHJ5IGFzIGkgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==