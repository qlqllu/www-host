"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-node_modules_esri_calcite-components-react_node_modules_esri_calcite-components_dist_-2b8ed8"],{

/***/ "./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/calcite-shell-panel.js":
/*!**********************************************************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/calcite-shell-panel.js ***!
  \**********************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CalciteShellPanel: () => (/* binding */ CalciteShellPanel),
/* harmony export */   defineCustomElement: () => (/* binding */ defineCustomElement)
/* harmony export */ });
/* harmony import */ var _stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @stencil/core/internal/client/index.js */ "./node_modules/@esri/calcite-components-react/node_modules/@stencil/core/internal/client/index.js");
/* harmony import */ var _conditionalSlot_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./conditionalSlot.js */ "./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/conditionalSlot.js");
/* harmony import */ var _dom_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./dom.js */ "./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/dom.js");
/* harmony import */ var _locale_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./locale.js */ "./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/locale.js");
/* harmony import */ var _math_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./math.js */ "./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/math.js");
/* harmony import */ var _t9n_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./t9n.js */ "./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/t9n.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.11.0
 */







const CSS = {
  container: "container",
  content: "content",
  contentHeader: "content__header",
  contentBody: "content__body",
  contentFloat: "content--float",
  contentOverlay: "content--overlay",
  separator: "separator",
};
const SLOTS = {
  actionBar: "action-bar",
  header: "header",
};

const shellPanelCss = ":host{pointer-events:none;position:relative;display:flex;flex:0 1 auto;align-items:stretch;z-index:var(--calcite-shell-panel-z-index, var(--calcite-app-z-index));--calcite-shell-panel-detached-max-height:unset;--calcite-shell-panel-max-height:unset;--calcite-shell-panel-shadow-block-start-internal:0 4px 8px -1px rgba(0, 0, 0, 0.08),\n    0 2px 4px -1px rgba(0, 0, 0, 0.04);--calcite-shell-panel-shadow-block-end-internal:0 -4px 8px -1px rgba(0, 0, 0, 0.08),\n    0 -2px 4px -1px rgba(0, 0, 0, 0.04);--calcite-shell-panel-shadow-inline-start-internal:4px 0 8px -1px rgba(0, 0, 0, 0.08),\n    2px 0 4px -1px rgba(0, 0, 0, 0.04);--calcite-shell-panel-shadow-inline-end-internal:-4px 0 8px -1px rgba(0, 0, 0, 0.08),\n    -2px 0 4px -1px rgba(0, 0, 0, 0.04)}.calcite--rtl.content--overlay{--calcite-shell-panel-shadow-inline-start-internal:-4px 0 8px -1px rgba(0, 0, 0, 0.08),\n    -2px 0 4px -1px rgba(0, 0, 0, 0.04);--calcite-shell-panel-shadow-inline-end-internal:4px 0 8px -1px rgba(0, 0, 0, 0.08),\n    2px 0 4px -1px rgba(0, 0, 0, 0.04)}:host([layout=vertical]){z-index:var(--calcite-shell-panel-z-index, calc(var(--calcite-app-z-index) + 1))}:host([layout=vertical][display-mode=overlay]){z-index:var(--calcite-shell-panel-z-index, calc(var(--calcite-app-z-index-header) + 1))}:host([layout=vertical][width-scale=s]) .content{--calcite-shell-panel-width-internal:var(--calcite-shell-panel-width, 12vw);--calcite-shell-panel-max-width-internal:var(--calcite-shell-panel-max-width, 300px);--calcite-shell-panel-min-width-internal:var(--calcite-shell-panel-min-width, 150px)}:host([layout=vertical][width-scale=m]) .content{--calcite-shell-panel-width-internal:var(--calcite-shell-panel-width, 20vw);--calcite-shell-panel-max-width-internal:var(--calcite-shell-panel-max-width, 420px);--calcite-shell-panel-min-width-internal:var(--calcite-shell-panel-min-width, 240px)}:host([layout=vertical][width-scale=l]) .content{--calcite-shell-panel-width-internal:var(--calcite-shell-panel-width, 45vw);--calcite-shell-panel-max-width-internal:var(--calcite-shell-panel-max-width, 680px);--calcite-shell-panel-min-width-internal:var(--calcite-shell-panel-min-width, 340px)}:host([layout=horizontal][height-scale=s]) .content{--calcite-shell-panel-max-height-internal:var(\n    --calcite-shell-panel-max-height,\n    var(--calcite-shell-panel-detached-max-height, 20vh)\n  )}:host([layout=horizontal]) .content{--calcite-shell-panel-min-height-internal:var(--calcite-shell-panel-min-height, 5vh);--calcite-shell-panel-max-height-internal:var(\n    --calcite-shell-panel-max-height,\n    var(--calcite-shell-panel-detached-max-height, 30vh)\n  )}:host([layout=horizontal][height-scale=l]) .content{--calcite-shell-panel-max-height-internal:var(\n    --calcite-shell-panel-max-height,\n    var(--calcite-shell-panel-detached-max-height, 40vh)\n  )}.container{pointer-events:none;box-sizing:border-box;display:flex;flex:1 1 auto;align-items:stretch;background-color:transparent;font-size:var(--calcite-font-size--1);color:var(--calcite-ui-text-2)}.container *{box-sizing:border-box}:host([layout=horizontal]) .container{flex-direction:column}:host(:hover) .separator:not(:hover):not(:focus),:host(:focus-within) .separator:not(:hover):not(:focus){opacity:1;background-color:var(--calcite-ui-border-3)}.separator{pointer-events:auto;position:absolute;display:flex;background-color:transparent;opacity:0;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;cursor:col-resize;outline:none}.separator:hover{opacity:1;background-color:var(--calcite-ui-border-2)}.separator:focus{background-color:var(--calcite-ui-brand);opacity:1}:host([layout=vertical]) .separator{inset-block:0px;block-size:100%;inline-size:0.125rem;cursor:col-resize}:host([layout=horizontal][position=start]) .separator{inset-block-end:0px}:host([layout=horizontal][position=end]) .separator{inset-block-start:0px}:host([layout=horizontal]) .separator{inset-inline-end:0px;block-size:0.125rem;inline-size:100%;cursor:row-resize}:host([layout=vertical][position=start]) .separator{inset-inline-end:-2px}:host([layout=horizontal][position=start]) .separator{inset-block-end:-2px}:host([layout=vertical][position=end]) .separator{inset-inline-start:-2px}:host([layout=horizontal][position=end]) .separator{inset-block-start:-2px}::slotted(calcite-panel),::slotted(calcite-flow){block-size:100%;inline-size:100%;flex:1 1 auto;max-block-size:unset;max-inline-size:unset}::slotted(.calcite-match-height){display:flex;flex:1 1 auto;overflow:hidden}.content{pointer-events:auto;display:flex;flex-direction:column;flex-wrap:nowrap;align-items:stretch;align-self:stretch;background-color:var(--calcite-ui-background);padding:0px;transition:max-block-size var(--calcite-animation-timing), max-inline-size var(--calcite-animation-timing)}:host([layout=vertical]) .content{inline-size:var(--calcite-shell-panel-width-internal);max-inline-size:var(--calcite-shell-panel-max-width-internal);min-inline-size:var(--calcite-shell-panel-min-width-internal)}:host([layout=horizontal]) .content{block-size:var(--calcite-shell-panel-height-internal);max-block-size:var(--calcite-shell-panel-max-height-internal);min-block-size:var(--calcite-shell-panel-min-height-internal)}.content__header{display:flex;flex:0 1 auto;flex-direction:column;flex-wrap:nowrap;align-items:stretch}.content__body{display:flex;flex:1 1 auto;flex-direction:column;overflow:hidden}.content--overlay{position:absolute;--tw-shadow:0 4px 8px -1px rgba(0, 0, 0, 0.08), 0 2px 4px -1px rgba(0, 0, 0, 0.04);--tw-shadow-colored:0 4px 8px -1px var(--tw-shadow-color), 0 2px 4px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}:host([layout=vertical]) .content--overlay{inset-block-start:0px;block-size:100%}:host([layout=horizontal]) .content--overlay{inset-inline-start:0px;inline-size:100%}:host([layout=vertical][position=start]) .content--overlay{inset-inline-start:100%;box-shadow:var(--calcite-shell-panel-shadow-inline-start-internal)}:host([layout=vertical][position=end]) .content--overlay{inset-inline-end:100%;box-shadow:var(--calcite-shell-panel-shadow-inline-end-internal)}:host([layout=horizontal][position=start]) .content--overlay{inset-block-start:100%;box-shadow:var(--calcite-shell-panel-shadow-block-start-internal)}:host([layout=horizontal][position=end]) .content--overlay{inset-block-end:100%;box-shadow:var(--calcite-shell-panel-shadow-block-end-internal)}.content--float{margin-inline:0.5rem;margin-block:0.5rem auto;block-size:auto;overflow:hidden;border-radius:0.25rem;--tw-shadow:0 4px 8px -1px rgba(0, 0, 0, 0.08), 0 2px 4px -1px rgba(0, 0, 0, 0.04);--tw-shadow-colored:0 4px 8px -1px var(--tw-shadow-color), 0 2px 4px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);max-block-size:var(--calcite-shell-panel-max-height-internal, calc(100% - 1rem))}.content--float ::slotted(calcite-panel),.content--float ::slotted(calcite-flow){max-block-size:unset}:host([layout=horizontal]) .content--float{margin-block:0.5rem}:host([position=start]) .content--float ::slotted(calcite-panel),:host([position=start]) .content--float ::slotted(calcite-flow),:host([position=end]) .content--float ::slotted(calcite-panel),:host([position=end]) .content--float ::slotted(calcite-flow){border-style:none}.content[hidden]{display:none}slot[name=action-bar]::slotted(calcite-action-bar),.content ::slotted(calcite-flow),.content ::slotted(calcite-panel:not([closed])){border-width:1px;border-style:solid;border-color:var(--calcite-ui-border-3)}:host([position=start]) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=start]) .content ::slotted(calcite-flow),:host([position=start]) .content ::slotted(calcite-panel){border-inline-start:none}:host([position=end]) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=end]) .content ::slotted(calcite-flow),:host([position=end]) .content ::slotted(calcite-panel){border-inline-end:none}:host([layout=horizontal]) slot[name=action-bar]::slotted(calcite-action-bar){border-inline:0}:host([layout=horizontal][position=start]) .content ::slotted(calcite-flow),:host([layout=horizontal][position=start]) .content ::slotted(calcite-panel){border-inline:0;border-block-start:0}:host([layout=horizontal][position=end]) .content ::slotted(calcite-flow),:host([layout=horizontal][position=end]) .content ::slotted(calcite-panel){border-inline:0;border-block-end:0}:host([hidden]){display:none}[hidden]{display:none}";

const ShellPanel = /*@__PURE__*/ (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_5__.proxyCustomElement)(class extends _stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_5__.HTMLElement {
  constructor() {
    super();
    this.__registerHost();
    this.__attachShadow();
    this.initialContentWidth = null;
    this.initialContentHeight = null;
    this.initialClientX = null;
    this.initialClientY = null;
    this.contentWidthMax = null;
    this.contentWidthMin = null;
    this.contentHeightMax = null;
    this.contentHeightMin = null;
    this.step = 1;
    this.stepMultiplier = 10;
    this.actionBars = [];
    this.storeContentEl = (contentEl) => {
      this.contentEl = contentEl;
    };
    this.getKeyAdjustedSize = (event) => {
      const { key } = event;
      const { el, step, stepMultiplier, layout, contentWidthMin, contentWidthMax, initialContentWidth, initialContentHeight, contentHeightMin, contentHeightMax, position, } = this;
      const multipliedStep = step * stepMultiplier;
      const MOVEMENT_KEYS = [
        "ArrowUp",
        "ArrowDown",
        "ArrowLeft",
        "ArrowRight",
        "Home",
        "End",
        "PageUp",
        "PageDown",
      ];
      if (MOVEMENT_KEYS.indexOf(key) > -1) {
        event.preventDefault();
      }
      const dir = (0,_dom_js__WEBPACK_IMPORTED_MODULE_1__.b)(el);
      const horizontalKeys = ["ArrowLeft", "ArrowRight"];
      const verticalKeys = ["ArrowDown", "ArrowUp"];
      const directionFactor = dir === "rtl" && horizontalKeys.includes(key) ? -1 : 1;
      const increaseKeys = layout === "horizontal"
        ? position === "end"
          ? key === verticalKeys[1] || key === horizontalKeys[0]
          : key === verticalKeys[0] || key === horizontalKeys[1]
        : key === verticalKeys[1] ||
          (position === "end" ? key === horizontalKeys[0] : key === horizontalKeys[1]);
      if (increaseKeys) {
        const stepValue = event.shiftKey ? multipliedStep : step;
        return layout === "horizontal"
          ? initialContentHeight + directionFactor * stepValue
          : initialContentWidth + directionFactor * stepValue;
      }
      const decreaseKeys = layout === "horizontal"
        ? position === "end"
          ? key === verticalKeys[0] || key === horizontalKeys[0]
          : key === verticalKeys[1] || key === horizontalKeys[1]
        : key === verticalKeys[0] ||
          (position === "end" ? key === horizontalKeys[1] : key === horizontalKeys[0]);
      if (decreaseKeys) {
        const stepValue = event.shiftKey ? multipliedStep : step;
        return layout === "horizontal"
          ? initialContentHeight - directionFactor * stepValue
          : initialContentWidth - directionFactor * stepValue;
      }
      if (key === "Home" && layout === "horizontal" && typeof contentHeightMin === "number") {
        return contentHeightMin;
      }
      if (key === "Home" && layout === "vertical" && typeof contentWidthMin === "number") {
        return contentWidthMin;
      }
      if (key === "End" && layout === "horizontal" && typeof contentHeightMax === "number") {
        return contentHeightMax;
      }
      if (key === "End" && layout === "vertical" && typeof contentWidthMax === "number") {
        return contentWidthMax;
      }
      if (key === "PageDown") {
        return layout === "horizontal"
          ? initialContentHeight - multipliedStep
          : initialContentWidth - multipliedStep;
      }
      if (key === "PageUp") {
        return layout === "horizontal"
          ? initialContentHeight + multipliedStep
          : initialContentWidth + multipliedStep;
      }
      return null;
    };
    this.initialKeydownWidth = (event) => {
      this.setInitialContentWidth();
      const width = this.getKeyAdjustedSize(event);
      if (typeof width === "number") {
        this.setContentWidth(width);
      }
    };
    this.initialKeydownHeight = (event) => {
      this.setInitialContentHeight();
      const height = this.getKeyAdjustedSize(event);
      if (typeof height === "number") {
        this.setContentHeight(height);
      }
    };
    this.separatorKeyDown = (event) => {
      this.layout === "horizontal"
        ? this.initialKeydownHeight(event)
        : this.initialKeydownWidth(event);
    };
    this.separatorPointerMove = (event) => {
      event.preventDefault();
      const { el, layout, initialContentWidth, initialContentHeight, position, initialClientX, initialClientY, } = this;
      const offset = layout === "horizontal" ? event.clientY - initialClientY : event.clientX - initialClientX;
      const adjustmentDirection = layout === "vertical" && (0,_dom_js__WEBPACK_IMPORTED_MODULE_1__.b)(el) === "rtl" ? -1 : 1;
      const adjustedOffset = layout === "horizontal"
        ? position === "end"
          ? -adjustmentDirection * offset
          : adjustmentDirection * offset
        : position === "end"
          ? -adjustmentDirection * offset
          : adjustmentDirection * offset;
      layout === "horizontal"
        ? this.setContentHeight(initialContentHeight + adjustedOffset)
        : this.setContentWidth(initialContentWidth + adjustedOffset);
    };
    this.separatorPointerUp = (event) => {
      if (!(0,_dom_js__WEBPACK_IMPORTED_MODULE_1__.j)(event)) {
        return;
      }
      event.preventDefault();
      document.removeEventListener("pointerup", this.separatorPointerUp);
      document.removeEventListener("pointermove", this.separatorPointerMove);
    };
    this.setInitialContentHeight = () => {
      this.initialContentHeight = this.contentEl?.getBoundingClientRect().height;
    };
    this.setInitialContentWidth = () => {
      this.initialContentWidth = this.contentEl?.getBoundingClientRect().width;
    };
    this.separatorPointerDown = (event) => {
      if (!(0,_dom_js__WEBPACK_IMPORTED_MODULE_1__.j)(event)) {
        return;
      }
      event.preventDefault();
      const { separatorEl } = this;
      separatorEl && document.activeElement !== separatorEl && separatorEl.focus();
      if (this.layout === "horizontal") {
        this.setInitialContentHeight();
        this.initialClientY = event.clientY;
      }
      else {
        this.setInitialContentWidth();
        this.initialClientX = event.clientX;
      }
      document.addEventListener("pointerup", this.separatorPointerUp);
      document.addEventListener("pointermove", this.separatorPointerMove);
    };
    this.connectSeparator = (separatorEl) => {
      this.disconnectSeparator();
      this.separatorEl = separatorEl;
      separatorEl?.addEventListener("pointerdown", this.separatorPointerDown);
    };
    this.disconnectSeparator = () => {
      this.separatorEl?.removeEventListener("pointerdown", this.separatorPointerDown);
    };
    this.setActionBarsLayout = (actionBars) => {
      actionBars.forEach((actionBar) => (actionBar.layout = this.layout));
    };
    this.handleActionBarSlotChange = (event) => {
      const actionBars = (0,_dom_js__WEBPACK_IMPORTED_MODULE_1__.s)(event).filter((el) => el?.matches("calcite-action-bar"));
      this.actionBars = actionBars;
      this.setActionBarsLayout(actionBars);
    };
    this.handleHeaderSlotChange = (event) => {
      this.hasHeader = (0,_dom_js__WEBPACK_IMPORTED_MODULE_1__.e)(event);
    };
    this.collapsed = false;
    this.detached = false;
    this.displayMode = "dock";
    this.detachedHeightScale = undefined;
    this.heightScale = undefined;
    this.widthScale = "m";
    this.layout = "vertical";
    this.position = "start";
    this.resizable = false;
    this.messages = undefined;
    this.messageOverrides = undefined;
    this.contentWidth = null;
    this.contentHeight = null;
    this.defaultMessages = undefined;
    this.effectiveLocale = "";
    this.hasHeader = false;
  }
  handleDetached(value) {
    if (value) {
      this.displayMode = "float";
    }
    else if (this.displayMode === "float") {
      this.displayMode = "dock";
    }
  }
  handleDisplayMode(value) {
    this.detached = value === "float";
  }
  handleDetachedHeightScale(value) {
    this.heightScale = value;
  }
  handleHeightScale(value) {
    this.detachedHeightScale = value;
  }
  layoutHandler() {
    this.setActionBarsLayout(this.actionBars);
  }
  onMessagesChange() {
    /* wired up by t9n util */
  }
  //--------------------------------------------------------------------------
  //
  //  Lifecycle
  //
  //--------------------------------------------------------------------------
  connectedCallback() {
    (0,_conditionalSlot_js__WEBPACK_IMPORTED_MODULE_0__.c)(this);
    (0,_locale_js__WEBPACK_IMPORTED_MODULE_2__.c)(this);
    (0,_t9n_js__WEBPACK_IMPORTED_MODULE_4__.c)(this);
  }
  async componentWillLoad() {
    await (0,_t9n_js__WEBPACK_IMPORTED_MODULE_4__.s)(this);
  }
  disconnectedCallback() {
    (0,_conditionalSlot_js__WEBPACK_IMPORTED_MODULE_0__.d)(this);
    this.disconnectSeparator();
    (0,_locale_js__WEBPACK_IMPORTED_MODULE_2__.d)(this);
    (0,_t9n_js__WEBPACK_IMPORTED_MODULE_4__.d)(this);
  }
  componentDidLoad() {
    this.updateAriaValues();
  }
  effectiveLocaleChange() {
    (0,_t9n_js__WEBPACK_IMPORTED_MODULE_4__.u)(this, this.effectiveLocale);
  }
  // --------------------------------------------------------------------------
  //
  //  Render Methods
  //
  // --------------------------------------------------------------------------
  renderHeader() {
    return ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_5__.h)("div", { class: CSS.contentHeader, hidden: !this.hasHeader, key: "header" }, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_5__.h)("slot", { name: SLOTS.header, onSlotchange: this.handleHeaderSlotChange })));
  }
  render() {
    const { collapsed, position, initialContentWidth, initialContentHeight, contentWidth, contentWidthMax, contentWidthMin, contentHeight, contentHeightMax, contentHeightMin, resizable, layout, displayMode, } = this;
    const dir = (0,_dom_js__WEBPACK_IMPORTED_MODULE_1__.b)(this.el);
    const allowResizing = displayMode !== "float" && resizable;
    const style = allowResizing
      ? layout === "horizontal"
        ? contentHeight
          ? { height: `${contentHeight}px` }
          : null
        : contentWidth
          ? { width: `${contentWidth}px` }
          : null
      : null;
    const separatorNode = !collapsed && allowResizing ? ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_5__.h)("div", { "aria-label": this.messages.resize, "aria-orientation": layout === "horizontal" ? "vertical" : "horizontal", "aria-valuemax": layout == "horizontal" ? contentHeightMax : contentWidthMax, "aria-valuemin": layout == "horizontal" ? contentHeightMin : contentWidthMin, "aria-valuenow": layout == "horizontal"
        ? contentHeight ?? initialContentHeight
        : contentWidth ?? initialContentWidth, class: CSS.separator, key: "separator", onKeyDown: this.separatorKeyDown, role: "separator", tabIndex: 0, "touch-action": "none",
      // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)
      ref: this.connectSeparator })) : null;
    const getAnimationDir = () => {
      if (layout === "horizontal") {
        return position === "start"
          ? _dom_js__WEBPACK_IMPORTED_MODULE_1__.C.calciteAnimateInDown
          : _dom_js__WEBPACK_IMPORTED_MODULE_1__.C.calciteAnimateInUp;
      }
      else {
        const isStart = (dir === "ltr" && position === "end") || (dir === "rtl" && position === "start");
        return isStart ? _dom_js__WEBPACK_IMPORTED_MODULE_1__.C.calciteAnimateInLeft : _dom_js__WEBPACK_IMPORTED_MODULE_1__.C.calciteAnimateInRight;
      }
    };
    const contentNode = ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_5__.h)("div", { class: {
        [_dom_js__WEBPACK_IMPORTED_MODULE_1__.C.rtl]: dir === "rtl",
        [CSS.content]: true,
        [CSS.contentOverlay]: displayMode === "overlay",
        [CSS.contentFloat]: displayMode === "float",
        [_dom_js__WEBPACK_IMPORTED_MODULE_1__.C.calciteAnimate]: displayMode === "overlay",
        [getAnimationDir()]: displayMode === "overlay",
      }, hidden: collapsed, key: "content", style: style,
      // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)
      ref: this.storeContentEl }, this.renderHeader(), (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_5__.h)("div", { class: CSS.contentBody }, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_5__.h)("slot", null)), separatorNode));
    const actionBarNode = ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_5__.h)("slot", { key: "action-bar", name: SLOTS.actionBar, onSlotchange: this.handleActionBarSlotChange }));
    const mainNodes = [actionBarNode, contentNode];
    if (position === "end") {
      mainNodes.reverse();
    }
    return (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_5__.h)("div", { class: { [CSS.container]: true } }, mainNodes);
  }
  // --------------------------------------------------------------------------
  //
  //  private Methods
  //
  // --------------------------------------------------------------------------
  setContentWidth(width) {
    const { contentWidthMax, contentWidthMin } = this;
    const roundedWidth = Math.round(width);
    this.contentWidth =
      typeof contentWidthMax === "number" && typeof contentWidthMin === "number"
        ? (0,_math_js__WEBPACK_IMPORTED_MODULE_3__.c)(roundedWidth, contentWidthMin, contentWidthMax)
        : roundedWidth;
  }
  updateAriaValues() {
    const { contentEl } = this;
    const computedStyle = contentEl && getComputedStyle(contentEl);
    if (!computedStyle) {
      return;
    }
    this.layout === "horizontal"
      ? this.updateHeights(computedStyle)
      : this.updateWidths(computedStyle);
    (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_5__.forceUpdate)(this);
  }
  setContentHeight(height) {
    const { contentHeightMax, contentHeightMin } = this;
    const roundedWidth = Math.round(height);
    this.contentHeight =
      typeof contentHeightMax === "number" && typeof contentHeightMin === "number"
        ? (0,_math_js__WEBPACK_IMPORTED_MODULE_3__.c)(roundedWidth, contentHeightMin, contentHeightMax)
        : roundedWidth;
  }
  updateWidths(computedStyle) {
    const max = parseInt(computedStyle.getPropertyValue("max-width"), 10);
    const min = parseInt(computedStyle.getPropertyValue("min-width"), 10);
    const valueNow = parseInt(computedStyle.getPropertyValue("width"), 10);
    if (typeof valueNow === "number" && !isNaN(valueNow)) {
      this.initialContentWidth = valueNow;
    }
    if (typeof max === "number" && !isNaN(max)) {
      this.contentWidthMax = max;
    }
    if (typeof min === "number" && !isNaN(min)) {
      this.contentWidthMin = min;
    }
  }
  updateHeights(computedStyle) {
    const max = parseInt(computedStyle.getPropertyValue("max-height"), 10);
    const min = parseInt(computedStyle.getPropertyValue("min-height"), 10);
    const valueNow = parseInt(computedStyle.getPropertyValue("height"), 10);
    if (typeof valueNow === "number" && !isNaN(valueNow)) {
      this.initialContentHeight = valueNow;
    }
    if (typeof max === "number" && !isNaN(max)) {
      this.contentHeightMax = max;
    }
    if (typeof min === "number" && !isNaN(min)) {
      this.contentHeightMin = min;
    }
  }
  static get assetsDirs() { return ["assets"]; }
  get el() { return this; }
  static get watchers() { return {
    "detached": ["handleDetached"],
    "displayMode": ["handleDisplayMode"],
    "detachedHeightScale": ["handleDetachedHeightScale"],
    "heightScale": ["handleHeightScale"],
    "layout": ["layoutHandler"],
    "messageOverrides": ["onMessagesChange"],
    "effectiveLocale": ["effectiveLocaleChange"]
  }; }
  static get style() { return shellPanelCss; }
}, [1, "calcite-shell-panel", {
    "collapsed": [516],
    "detached": [516],
    "displayMode": [513, "display-mode"],
    "detachedHeightScale": [513, "detached-height-scale"],
    "heightScale": [513, "height-scale"],
    "widthScale": [513, "width-scale"],
    "layout": [513],
    "position": [513],
    "resizable": [516],
    "messages": [1040],
    "messageOverrides": [1040],
    "contentWidth": [32],
    "contentHeight": [32],
    "defaultMessages": [32],
    "effectiveLocale": [32],
    "hasHeader": [32]
  }]);
function defineCustomElement$1() {
  if (typeof customElements === "undefined") {
    return;
  }
  const components = ["calcite-shell-panel"];
  components.forEach(tagName => { switch (tagName) {
    case "calcite-shell-panel":
      if (!customElements.get(tagName)) {
        customElements.define(tagName, ShellPanel);
      }
      break;
  } });
}
defineCustomElement$1();

const CalciteShellPanel = ShellPanel;
const defineCustomElement = defineCustomElement$1;




/***/ }),

/***/ "./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/conditionalSlot.js":
/*!******************************************************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/conditionalSlot.js ***!
  \******************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ connectConditionalSlotComponent),
/* harmony export */   d: () => (/* binding */ disconnectConditionalSlotComponent)
/* harmony export */ });
/* harmony import */ var _stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @stencil/core/internal/client/index.js */ "./node_modules/@esri/calcite-components-react/node_modules/@stencil/core/internal/client/index.js");
/* harmony import */ var _observers_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./observers.js */ "./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/observers.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.11.0
 */



const observed = new Set();
let mutationObserver;
const observerOptions = { childList: true };
/**
 * Helper to set up a conditional slot component on connectedCallback.
 *
 * @param component
 * @deprecated Use `onSlotchange` event with `slotChangeHasAssignedElement` DOM utility instead.
 *
 * ```
 * <slot onSlotchange={(event) => this.mySlotHasElement = slotChangeHasAssignedElement(event)} />}
 * ```
 */
function connectConditionalSlotComponent(component) {
  if (!mutationObserver) {
    mutationObserver = (0,_observers_js__WEBPACK_IMPORTED_MODULE_0__.c)("mutation", processMutations);
  }
  mutationObserver.observe(component.el, observerOptions);
}
/**
 * Helper to tear down a conditional slot component on disconnectedCallback.
 *
 * @param component
 * @deprecated Use `onSlotchange` event with `slotChangeHasAssignedElement` DOM utility instead.
 *
 * ```
 * <slot onSlotchange={(event) => this.mySlotHasElement = slotChangeHasAssignedElement(event)} />}
 * ```
 */
function disconnectConditionalSlotComponent(component) {
  observed.delete(component.el);
  // we explicitly process queued mutations and disconnect and reconnect
  // the observer until MutationObserver gets an `unobserve` method
  // see https://github.com/whatwg/dom/issues/126
  processMutations(mutationObserver.takeRecords());
  mutationObserver.disconnect();
  for (const [element] of observed.entries()) {
    mutationObserver.observe(element, observerOptions);
  }
}
function processMutations(mutations) {
  mutations.forEach(({ target }) => {
    (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_1__.forceUpdate)(target);
  });
}




/***/ }),

/***/ "./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/math.js":
/*!*******************************************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/math.js ***!
  \*******************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ closeToRangeEdge),
/* harmony export */   c: () => (/* binding */ clamp),
/* harmony export */   d: () => (/* binding */ decimalPlaces),
/* harmony export */   g: () => (/* binding */ getDecimals),
/* harmony export */   r: () => (/* binding */ remap)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.11.0
 */
const clamp = (value, min, max) => Math.max(min, Math.min(value, max));
const decimalNumberRegex = new RegExp(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);
/**
 * Returns the quantity of real decimal places for a number, which excludes trailing zeros.
 *
 * Adapted from {@link https://stackoverflow.com/questions/10454518/javascript-how-to-retrieve-the-number-of-decimals-of-a-string-number}.
 *
 * @param decimal - decimal value
 * @param value
 * @returns {number} the amount of decimal places in a number
 */
const decimalPlaces = (value) => {
  const match = ("" + value).match(decimalNumberRegex);
  if (!match || parseInt(match[1]) === 0) {
    return 0;
  }
  return Math.max(0, 
  // Number of digits right of decimal point.
  (match[1] ? match[1].length : 0) -
    // Adjust for scientific notation.
    (match[2] ? +match[2] : 0));
};
function getDecimals(value) {
  if (decimalPlaces(value) > 0 && value > 0) {
    return parseFloat(`0.${value.toString().split(".")[1]}`);
  }
  return value;
}
function remap(value, fromMin, fromMax, toMin, toMax) {
  return ((value - fromMin) * (toMax - toMin)) / (fromMax - fromMin) + toMin;
}
/**
 * Helper to determine if a value is close to the edge of a range within a threshold.
 *
 * @param value
 * @param range
 * @param threshold
 * @returns -1 if close to lower edge, 1 if close to upper edge, 0 otherwise.
 */
function closeToRangeEdge(value, range, threshold) {
  return value < threshold ? -1 : value > range - threshold ? 1 : 0;
}




/***/ }),

/***/ "./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/t9n.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/t9n.js ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ connectMessages),
/* harmony export */   d: () => (/* binding */ disconnectMessages),
/* harmony export */   s: () => (/* binding */ setUpMessages),
/* harmony export */   u: () => (/* binding */ updateMessages)
/* harmony export */ });
/* harmony import */ var _stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @stencil/core/internal/client/index.js */ "./node_modules/@esri/calcite-components-react/node_modules/@stencil/core/internal/client/index.js");
/* harmony import */ var _locale_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./locale.js */ "./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/locale.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.11.0
 */



const componentLangToMessageBundleCache = {};
async function getMessageBundle(lang, component) {
  const key = `${component}_${lang}`;
  if (componentLangToMessageBundleCache[key]) {
    return componentLangToMessageBundleCache[key];
  }
  componentLangToMessageBundleCache[key] = fetch((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_1__.getAssetPath)(`./assets/${component}/t9n/messages_${lang}.json`))
    .then((resp) => {
    if (!resp.ok) {
      throwMessageFetchError();
    }
    return resp.json();
  })
    .catch(() => throwMessageFetchError());
  return componentLangToMessageBundleCache[key];
}
function throwMessageFetchError() {
  throw new Error("could not fetch component message bundle");
}
function mergeMessages(component) {
  component.messages = {
    ...component.defaultMessages,
    ...component.messageOverrides,
  };
}
/**
 * This utility sets up the messages used by the component. It should be awaited in the `componentWillLoad` lifecycle hook.
 *
 * @param component
 */
async function setUpMessages(component) {
  component.defaultMessages = await fetchMessages(component, component.effectiveLocale);
  mergeMessages(component);
}
async function fetchMessages(component, lang) {
  if (!_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_1__.Build.isBrowser) {
    return {};
  }
  const { el } = component;
  const tag = el.tagName.toLowerCase();
  const componentName = tag.replace("calcite-", "");
  return getMessageBundle((0,_locale_js__WEBPACK_IMPORTED_MODULE_0__.g)(lang, "t9n"), componentName);
}
/**
 * This utility must be set up for the component to update its default message bundle if the locale changes.
 *
 * It can be set up in **either** of the following ways:
 *
 * 1. called from `LocalizedComponent`'s `onLocaleChange` method or
 * 2. called from a watcher configured to watch `LocalizedComponent`'s `effectiveLocale` prop
 *
 * @param component
 * @param lang
 */
async function updateMessages(component, lang) {
  component.defaultMessages = await fetchMessages(component, lang);
  mergeMessages(component);
}
/**
 * This utility sets up internals for messages support.
 *
 * It needs to be called in `connectedCallback`
 *
 * **Note**: this must be called after `LocalizedComponent`'s `connectLocalized` method.
 *
 * @param component
 */
function connectMessages(component) {
  component.onMessagesChange = defaultOnMessagesChange;
}
/**
 * This utility tears down internals for messages support.
 *
 * It needs to be called in `disconnectedCallback`
 *
 * @param component
 */
function disconnectMessages(component) {
  component.onMessagesChange = undefined;
}
function defaultOnMessagesChange() {
  mergeMessages(this);
}




/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvdmVuZG9ycy1ub2RlX21vZHVsZXNfZXNyaV9jYWxjaXRlLWNvbXBvbmVudHMtcmVhY3Rfbm9kZV9tb2R1bGVzX2VzcmlfY2FsY2l0ZS1jb21wb25lbnRzX2Rpc3RfLTJiOGVkOC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDeUc7QUFDWTtBQUMrQztBQUN0RjtBQUN2QztBQUMyRTs7QUFFbEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsNkJBQTZCLG9CQUFvQixrQkFBa0IsYUFBYSxjQUFjLG9CQUFvQix1RUFBdUUsZ0RBQWdELHVDQUF1Qyw4SEFBOEgsOEhBQThILCtIQUErSCwrSEFBK0gsK0JBQStCLGlJQUFpSSw2SEFBNkgseUJBQXlCLGlGQUFpRiwrQ0FBK0Msd0ZBQXdGLGlEQUFpRCw0RUFBNEUscUZBQXFGLHFGQUFxRixpREFBaUQsNEVBQTRFLHFGQUFxRixxRkFBcUYsaURBQWlELDRFQUE0RSxxRkFBcUYscUZBQXFGLG9EQUFvRCxxSkFBcUosb0NBQW9DLHFGQUFxRixxSkFBcUosb0RBQW9ELHFKQUFxSixXQUFXLG9CQUFvQixzQkFBc0IsYUFBYSxjQUFjLG9CQUFvQiw2QkFBNkIsc0NBQXNDLCtCQUErQixhQUFhLHNCQUFzQixzQ0FBc0Msc0JBQXNCLHlHQUF5RyxVQUFVLDRDQUE0QyxXQUFXLG9CQUFvQixrQkFBa0IsYUFBYSw2QkFBNkIsVUFBVSw2RkFBNkYsa0JBQWtCLGFBQWEsaUJBQWlCLFVBQVUsNENBQTRDLGlCQUFpQix5Q0FBeUMsVUFBVSxvQ0FBb0MsZ0JBQWdCLGdCQUFnQixxQkFBcUIsa0JBQWtCLHNEQUFzRCxvQkFBb0Isb0RBQW9ELHNCQUFzQixzQ0FBc0MscUJBQXFCLG9CQUFvQixpQkFBaUIsa0JBQWtCLG9EQUFvRCxzQkFBc0Isc0RBQXNELHFCQUFxQixrREFB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFa0ciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0Blc3JpL2NhbGNpdGUtY29tcG9uZW50cy1yZWFjdC9ub2RlX21vZHVsZXMvQGVzcmkvY2FsY2l0ZS1jb21wb25lbnRzL2Rpc3QvY29tcG9uZW50cy9jYWxjaXRlLXNoZWxsLXBhbmVsLmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvQGVzcmkvY2FsY2l0ZS1jb21wb25lbnRzLXJlYWN0L25vZGVfbW9kdWxlcy9AZXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvZGlzdC9jb21wb25lbnRzL2NvbmRpdGlvbmFsU2xvdC5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0Blc3JpL2NhbGNpdGUtY29tcG9uZW50cy1yZWFjdC9ub2RlX21vZHVsZXMvQGVzcmkvY2FsY2l0ZS1jb21wb25lbnRzL2Rpc3QvY29tcG9uZW50cy9tYXRoLmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvQGVzcmkvY2FsY2l0ZS1jb21wb25lbnRzLXJlYWN0L25vZGVfbW9kdWxlcy9AZXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvZGlzdC9jb21wb25lbnRzL3Q5bi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL2Jsb2IvbWFpbi9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxuICogdjEuMTEuMFxuICovXG5pbXBvcnQgeyBwcm94eUN1c3RvbUVsZW1lbnQsIEhUTUxFbGVtZW50LCBoLCBmb3JjZVVwZGF0ZSB9IGZyb20gJ0BzdGVuY2lsL2NvcmUvaW50ZXJuYWwvY2xpZW50L2luZGV4LmpzJztcbmltcG9ydCB7IGMgYXMgY29ubmVjdENvbmRpdGlvbmFsU2xvdENvbXBvbmVudCwgZCBhcyBkaXNjb25uZWN0Q29uZGl0aW9uYWxTbG90Q29tcG9uZW50IH0gZnJvbSAnLi9jb25kaXRpb25hbFNsb3QuanMnO1xuaW1wb3J0IHsgYiBhcyBnZXRFbGVtZW50RGlyLCBqIGFzIGlzUHJpbWFyeVBvaW50ZXJCdXR0b24sIHMgYXMgc2xvdENoYW5nZUdldEFzc2lnbmVkRWxlbWVudHMsIGUgYXMgc2xvdENoYW5nZUhhc0Fzc2lnbmVkRWxlbWVudCwgQyBhcyBDU1NfVVRJTElUWSB9IGZyb20gJy4vZG9tLmpzJztcbmltcG9ydCB7IGMgYXMgY29ubmVjdExvY2FsaXplZCwgZCBhcyBkaXNjb25uZWN0TG9jYWxpemVkIH0gZnJvbSAnLi9sb2NhbGUuanMnO1xuaW1wb3J0IHsgYyBhcyBjbGFtcCB9IGZyb20gJy4vbWF0aC5qcyc7XG5pbXBvcnQgeyBjIGFzIGNvbm5lY3RNZXNzYWdlcywgcyBhcyBzZXRVcE1lc3NhZ2VzLCBkIGFzIGRpc2Nvbm5lY3RNZXNzYWdlcywgdSBhcyB1cGRhdGVNZXNzYWdlcyB9IGZyb20gJy4vdDluLmpzJztcblxuY29uc3QgQ1NTID0ge1xuICBjb250YWluZXI6IFwiY29udGFpbmVyXCIsXG4gIGNvbnRlbnQ6IFwiY29udGVudFwiLFxuICBjb250ZW50SGVhZGVyOiBcImNvbnRlbnRfX2hlYWRlclwiLFxuICBjb250ZW50Qm9keTogXCJjb250ZW50X19ib2R5XCIsXG4gIGNvbnRlbnRGbG9hdDogXCJjb250ZW50LS1mbG9hdFwiLFxuICBjb250ZW50T3ZlcmxheTogXCJjb250ZW50LS1vdmVybGF5XCIsXG4gIHNlcGFyYXRvcjogXCJzZXBhcmF0b3JcIixcbn07XG5jb25zdCBTTE9UUyA9IHtcbiAgYWN0aW9uQmFyOiBcImFjdGlvbi1iYXJcIixcbiAgaGVhZGVyOiBcImhlYWRlclwiLFxufTtcblxuY29uc3Qgc2hlbGxQYW5lbENzcyA9IFwiOmhvc3R7cG9pbnRlci1ldmVudHM6bm9uZTtwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmZsZXg7ZmxleDowIDEgYXV0bzthbGlnbi1pdGVtczpzdHJldGNoO3otaW5kZXg6dmFyKC0tY2FsY2l0ZS1zaGVsbC1wYW5lbC16LWluZGV4LCB2YXIoLS1jYWxjaXRlLWFwcC16LWluZGV4KSk7LS1jYWxjaXRlLXNoZWxsLXBhbmVsLWRldGFjaGVkLW1heC1oZWlnaHQ6dW5zZXQ7LS1jYWxjaXRlLXNoZWxsLXBhbmVsLW1heC1oZWlnaHQ6dW5zZXQ7LS1jYWxjaXRlLXNoZWxsLXBhbmVsLXNoYWRvdy1ibG9jay1zdGFydC1pbnRlcm5hbDowIDRweCA4cHggLTFweCByZ2JhKDAsIDAsIDAsIDAuMDgpLFxcbiAgICAwIDJweCA0cHggLTFweCByZ2JhKDAsIDAsIDAsIDAuMDQpOy0tY2FsY2l0ZS1zaGVsbC1wYW5lbC1zaGFkb3ctYmxvY2stZW5kLWludGVybmFsOjAgLTRweCA4cHggLTFweCByZ2JhKDAsIDAsIDAsIDAuMDgpLFxcbiAgICAwIC0ycHggNHB4IC0xcHggcmdiYSgwLCAwLCAwLCAwLjA0KTstLWNhbGNpdGUtc2hlbGwtcGFuZWwtc2hhZG93LWlubGluZS1zdGFydC1pbnRlcm5hbDo0cHggMCA4cHggLTFweCByZ2JhKDAsIDAsIDAsIDAuMDgpLFxcbiAgICAycHggMCA0cHggLTFweCByZ2JhKDAsIDAsIDAsIDAuMDQpOy0tY2FsY2l0ZS1zaGVsbC1wYW5lbC1zaGFkb3ctaW5saW5lLWVuZC1pbnRlcm5hbDotNHB4IDAgOHB4IC0xcHggcmdiYSgwLCAwLCAwLCAwLjA4KSxcXG4gICAgLTJweCAwIDRweCAtMXB4IHJnYmEoMCwgMCwgMCwgMC4wNCl9LmNhbGNpdGUtLXJ0bC5jb250ZW50LS1vdmVybGF5ey0tY2FsY2l0ZS1zaGVsbC1wYW5lbC1zaGFkb3ctaW5saW5lLXN0YXJ0LWludGVybmFsOi00cHggMCA4cHggLTFweCByZ2JhKDAsIDAsIDAsIDAuMDgpLFxcbiAgICAtMnB4IDAgNHB4IC0xcHggcmdiYSgwLCAwLCAwLCAwLjA0KTstLWNhbGNpdGUtc2hlbGwtcGFuZWwtc2hhZG93LWlubGluZS1lbmQtaW50ZXJuYWw6NHB4IDAgOHB4IC0xcHggcmdiYSgwLCAwLCAwLCAwLjA4KSxcXG4gICAgMnB4IDAgNHB4IC0xcHggcmdiYSgwLCAwLCAwLCAwLjA0KX06aG9zdChbbGF5b3V0PXZlcnRpY2FsXSl7ei1pbmRleDp2YXIoLS1jYWxjaXRlLXNoZWxsLXBhbmVsLXotaW5kZXgsIGNhbGModmFyKC0tY2FsY2l0ZS1hcHAtei1pbmRleCkgKyAxKSl9Omhvc3QoW2xheW91dD12ZXJ0aWNhbF1bZGlzcGxheS1tb2RlPW92ZXJsYXldKXt6LWluZGV4OnZhcigtLWNhbGNpdGUtc2hlbGwtcGFuZWwtei1pbmRleCwgY2FsYyh2YXIoLS1jYWxjaXRlLWFwcC16LWluZGV4LWhlYWRlcikgKyAxKSl9Omhvc3QoW2xheW91dD12ZXJ0aWNhbF1bd2lkdGgtc2NhbGU9c10pIC5jb250ZW50ey0tY2FsY2l0ZS1zaGVsbC1wYW5lbC13aWR0aC1pbnRlcm5hbDp2YXIoLS1jYWxjaXRlLXNoZWxsLXBhbmVsLXdpZHRoLCAxMnZ3KTstLWNhbGNpdGUtc2hlbGwtcGFuZWwtbWF4LXdpZHRoLWludGVybmFsOnZhcigtLWNhbGNpdGUtc2hlbGwtcGFuZWwtbWF4LXdpZHRoLCAzMDBweCk7LS1jYWxjaXRlLXNoZWxsLXBhbmVsLW1pbi13aWR0aC1pbnRlcm5hbDp2YXIoLS1jYWxjaXRlLXNoZWxsLXBhbmVsLW1pbi13aWR0aCwgMTUwcHgpfTpob3N0KFtsYXlvdXQ9dmVydGljYWxdW3dpZHRoLXNjYWxlPW1dKSAuY29udGVudHstLWNhbGNpdGUtc2hlbGwtcGFuZWwtd2lkdGgtaW50ZXJuYWw6dmFyKC0tY2FsY2l0ZS1zaGVsbC1wYW5lbC13aWR0aCwgMjB2dyk7LS1jYWxjaXRlLXNoZWxsLXBhbmVsLW1heC13aWR0aC1pbnRlcm5hbDp2YXIoLS1jYWxjaXRlLXNoZWxsLXBhbmVsLW1heC13aWR0aCwgNDIwcHgpOy0tY2FsY2l0ZS1zaGVsbC1wYW5lbC1taW4td2lkdGgtaW50ZXJuYWw6dmFyKC0tY2FsY2l0ZS1zaGVsbC1wYW5lbC1taW4td2lkdGgsIDI0MHB4KX06aG9zdChbbGF5b3V0PXZlcnRpY2FsXVt3aWR0aC1zY2FsZT1sXSkgLmNvbnRlbnR7LS1jYWxjaXRlLXNoZWxsLXBhbmVsLXdpZHRoLWludGVybmFsOnZhcigtLWNhbGNpdGUtc2hlbGwtcGFuZWwtd2lkdGgsIDQ1dncpOy0tY2FsY2l0ZS1zaGVsbC1wYW5lbC1tYXgtd2lkdGgtaW50ZXJuYWw6dmFyKC0tY2FsY2l0ZS1zaGVsbC1wYW5lbC1tYXgtd2lkdGgsIDY4MHB4KTstLWNhbGNpdGUtc2hlbGwtcGFuZWwtbWluLXdpZHRoLWludGVybmFsOnZhcigtLWNhbGNpdGUtc2hlbGwtcGFuZWwtbWluLXdpZHRoLCAzNDBweCl9Omhvc3QoW2xheW91dD1ob3Jpem9udGFsXVtoZWlnaHQtc2NhbGU9c10pIC5jb250ZW50ey0tY2FsY2l0ZS1zaGVsbC1wYW5lbC1tYXgtaGVpZ2h0LWludGVybmFsOnZhcihcXG4gICAgLS1jYWxjaXRlLXNoZWxsLXBhbmVsLW1heC1oZWlnaHQsXFxuICAgIHZhcigtLWNhbGNpdGUtc2hlbGwtcGFuZWwtZGV0YWNoZWQtbWF4LWhlaWdodCwgMjB2aClcXG4gICl9Omhvc3QoW2xheW91dD1ob3Jpem9udGFsXSkgLmNvbnRlbnR7LS1jYWxjaXRlLXNoZWxsLXBhbmVsLW1pbi1oZWlnaHQtaW50ZXJuYWw6dmFyKC0tY2FsY2l0ZS1zaGVsbC1wYW5lbC1taW4taGVpZ2h0LCA1dmgpOy0tY2FsY2l0ZS1zaGVsbC1wYW5lbC1tYXgtaGVpZ2h0LWludGVybmFsOnZhcihcXG4gICAgLS1jYWxjaXRlLXNoZWxsLXBhbmVsLW1heC1oZWlnaHQsXFxuICAgIHZhcigtLWNhbGNpdGUtc2hlbGwtcGFuZWwtZGV0YWNoZWQtbWF4LWhlaWdodCwgMzB2aClcXG4gICl9Omhvc3QoW2xheW91dD1ob3Jpem9udGFsXVtoZWlnaHQtc2NhbGU9bF0pIC5jb250ZW50ey0tY2FsY2l0ZS1zaGVsbC1wYW5lbC1tYXgtaGVpZ2h0LWludGVybmFsOnZhcihcXG4gICAgLS1jYWxjaXRlLXNoZWxsLXBhbmVsLW1heC1oZWlnaHQsXFxuICAgIHZhcigtLWNhbGNpdGUtc2hlbGwtcGFuZWwtZGV0YWNoZWQtbWF4LWhlaWdodCwgNDB2aClcXG4gICl9LmNvbnRhaW5lcntwb2ludGVyLWV2ZW50czpub25lO2JveC1zaXppbmc6Ym9yZGVyLWJveDtkaXNwbGF5OmZsZXg7ZmxleDoxIDEgYXV0bzthbGlnbi1pdGVtczpzdHJldGNoO2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnQ7Zm9udC1zaXplOnZhcigtLWNhbGNpdGUtZm9udC1zaXplLS0xKTtjb2xvcjp2YXIoLS1jYWxjaXRlLXVpLXRleHQtMil9LmNvbnRhaW5lciAqe2JveC1zaXppbmc6Ym9yZGVyLWJveH06aG9zdChbbGF5b3V0PWhvcml6b250YWxdKSAuY29udGFpbmVye2ZsZXgtZGlyZWN0aW9uOmNvbHVtbn06aG9zdCg6aG92ZXIpIC5zZXBhcmF0b3I6bm90KDpob3Zlcik6bm90KDpmb2N1cyksOmhvc3QoOmZvY3VzLXdpdGhpbikgLnNlcGFyYXRvcjpub3QoOmhvdmVyKTpub3QoOmZvY3VzKXtvcGFjaXR5OjE7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWJvcmRlci0zKX0uc2VwYXJhdG9ye3BvaW50ZXItZXZlbnRzOmF1dG87cG9zaXRpb246YWJzb2x1dGU7ZGlzcGxheTpmbGV4O2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnQ7b3BhY2l0eTowO3RyYW5zaXRpb246YWxsIHZhcigtLWNhbGNpdGUtYW5pbWF0aW9uLXRpbWluZykgZWFzZS1pbi1vdXQgMHMsIG91dGxpbmUgMHMsIG91dGxpbmUtb2Zmc2V0IDBzO2N1cnNvcjpjb2wtcmVzaXplO291dGxpbmU6bm9uZX0uc2VwYXJhdG9yOmhvdmVye29wYWNpdHk6MTtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtdWktYm9yZGVyLTIpfS5zZXBhcmF0b3I6Zm9jdXN7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWJyYW5kKTtvcGFjaXR5OjF9Omhvc3QoW2xheW91dD12ZXJ0aWNhbF0pIC5zZXBhcmF0b3J7aW5zZXQtYmxvY2s6MHB4O2Jsb2NrLXNpemU6MTAwJTtpbmxpbmUtc2l6ZTowLjEyNXJlbTtjdXJzb3I6Y29sLXJlc2l6ZX06aG9zdChbbGF5b3V0PWhvcml6b250YWxdW3Bvc2l0aW9uPXN0YXJ0XSkgLnNlcGFyYXRvcntpbnNldC1ibG9jay1lbmQ6MHB4fTpob3N0KFtsYXlvdXQ9aG9yaXpvbnRhbF1bcG9zaXRpb249ZW5kXSkgLnNlcGFyYXRvcntpbnNldC1ibG9jay1zdGFydDowcHh9Omhvc3QoW2xheW91dD1ob3Jpem9udGFsXSkgLnNlcGFyYXRvcntpbnNldC1pbmxpbmUtZW5kOjBweDtibG9jay1zaXplOjAuMTI1cmVtO2lubGluZS1zaXplOjEwMCU7Y3Vyc29yOnJvdy1yZXNpemV9Omhvc3QoW2xheW91dD12ZXJ0aWNhbF1bcG9zaXRpb249c3RhcnRdKSAuc2VwYXJhdG9ye2luc2V0LWlubGluZS1lbmQ6LTJweH06aG9zdChbbGF5b3V0PWhvcml6b250YWxdW3Bvc2l0aW9uPXN0YXJ0XSkgLnNlcGFyYXRvcntpbnNldC1ibG9jay1lbmQ6LTJweH06aG9zdChbbGF5b3V0PXZlcnRpY2FsXVtwb3NpdGlvbj1lbmRdKSAuc2VwYXJhdG9ye2luc2V0LWlubGluZS1zdGFydDotMnB4fTpob3N0KFtsYXlvdXQ9aG9yaXpvbnRhbF1bcG9zaXRpb249ZW5kXSkgLnNlcGFyYXRvcntpbnNldC1ibG9jay1zdGFydDotMnB4fTo6c2xvdHRlZChjYWxjaXRlLXBhbmVsKSw6OnNsb3R0ZWQoY2FsY2l0ZS1mbG93KXtibG9jay1zaXplOjEwMCU7aW5saW5lLXNpemU6MTAwJTtmbGV4OjEgMSBhdXRvO21heC1ibG9jay1zaXplOnVuc2V0O21heC1pbmxpbmUtc2l6ZTp1bnNldH06OnNsb3R0ZWQoLmNhbGNpdGUtbWF0Y2gtaGVpZ2h0KXtkaXNwbGF5OmZsZXg7ZmxleDoxIDEgYXV0bztvdmVyZmxvdzpoaWRkZW59LmNvbnRlbnR7cG9pbnRlci1ldmVudHM6YXV0bztkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2ZsZXgtd3JhcDpub3dyYXA7YWxpZ24taXRlbXM6c3RyZXRjaDthbGlnbi1zZWxmOnN0cmV0Y2g7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWJhY2tncm91bmQpO3BhZGRpbmc6MHB4O3RyYW5zaXRpb246bWF4LWJsb2NrLXNpemUgdmFyKC0tY2FsY2l0ZS1hbmltYXRpb24tdGltaW5nKSwgbWF4LWlubGluZS1zaXplIHZhcigtLWNhbGNpdGUtYW5pbWF0aW9uLXRpbWluZyl9Omhvc3QoW2xheW91dD12ZXJ0aWNhbF0pIC5jb250ZW50e2lubGluZS1zaXplOnZhcigtLWNhbGNpdGUtc2hlbGwtcGFuZWwtd2lkdGgtaW50ZXJuYWwpO21heC1pbmxpbmUtc2l6ZTp2YXIoLS1jYWxjaXRlLXNoZWxsLXBhbmVsLW1heC13aWR0aC1pbnRlcm5hbCk7bWluLWlubGluZS1zaXplOnZhcigtLWNhbGNpdGUtc2hlbGwtcGFuZWwtbWluLXdpZHRoLWludGVybmFsKX06aG9zdChbbGF5b3V0PWhvcml6b250YWxdKSAuY29udGVudHtibG9jay1zaXplOnZhcigtLWNhbGNpdGUtc2hlbGwtcGFuZWwtaGVpZ2h0LWludGVybmFsKTttYXgtYmxvY2stc2l6ZTp2YXIoLS1jYWxjaXRlLXNoZWxsLXBhbmVsLW1heC1oZWlnaHQtaW50ZXJuYWwpO21pbi1ibG9jay1zaXplOnZhcigtLWNhbGNpdGUtc2hlbGwtcGFuZWwtbWluLWhlaWdodC1pbnRlcm5hbCl9LmNvbnRlbnRfX2hlYWRlcntkaXNwbGF5OmZsZXg7ZmxleDowIDEgYXV0bztmbGV4LWRpcmVjdGlvbjpjb2x1bW47ZmxleC13cmFwOm5vd3JhcDthbGlnbi1pdGVtczpzdHJldGNofS5jb250ZW50X19ib2R5e2Rpc3BsYXk6ZmxleDtmbGV4OjEgMSBhdXRvO2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtvdmVyZmxvdzpoaWRkZW59LmNvbnRlbnQtLW92ZXJsYXl7cG9zaXRpb246YWJzb2x1dGU7LS10dy1zaGFkb3c6MCA0cHggOHB4IC0xcHggcmdiYSgwLCAwLCAwLCAwLjA4KSwgMCAycHggNHB4IC0xcHggcmdiYSgwLCAwLCAwLCAwLjA0KTstLXR3LXNoYWRvdy1jb2xvcmVkOjAgNHB4IDhweCAtMXB4IHZhcigtLXR3LXNoYWRvdy1jb2xvciksIDAgMnB4IDRweCAtMXB4IHZhcigtLXR3LXNoYWRvdy1jb2xvcik7Ym94LXNoYWRvdzp2YXIoLS10dy1yaW5nLW9mZnNldC1zaGFkb3csIDAgMCAjMDAwMCksIHZhcigtLXR3LXJpbmctc2hhZG93LCAwIDAgIzAwMDApLCB2YXIoLS10dy1zaGFkb3cpfTpob3N0KFtsYXlvdXQ9dmVydGljYWxdKSAuY29udGVudC0tb3ZlcmxheXtpbnNldC1ibG9jay1zdGFydDowcHg7YmxvY2stc2l6ZToxMDAlfTpob3N0KFtsYXlvdXQ9aG9yaXpvbnRhbF0pIC5jb250ZW50LS1vdmVybGF5e2luc2V0LWlubGluZS1zdGFydDowcHg7aW5saW5lLXNpemU6MTAwJX06aG9zdChbbGF5b3V0PXZlcnRpY2FsXVtwb3NpdGlvbj1zdGFydF0pIC5jb250ZW50LS1vdmVybGF5e2luc2V0LWlubGluZS1zdGFydDoxMDAlO2JveC1zaGFkb3c6dmFyKC0tY2FsY2l0ZS1zaGVsbC1wYW5lbC1zaGFkb3ctaW5saW5lLXN0YXJ0LWludGVybmFsKX06aG9zdChbbGF5b3V0PXZlcnRpY2FsXVtwb3NpdGlvbj1lbmRdKSAuY29udGVudC0tb3ZlcmxheXtpbnNldC1pbmxpbmUtZW5kOjEwMCU7Ym94LXNoYWRvdzp2YXIoLS1jYWxjaXRlLXNoZWxsLXBhbmVsLXNoYWRvdy1pbmxpbmUtZW5kLWludGVybmFsKX06aG9zdChbbGF5b3V0PWhvcml6b250YWxdW3Bvc2l0aW9uPXN0YXJ0XSkgLmNvbnRlbnQtLW92ZXJsYXl7aW5zZXQtYmxvY2stc3RhcnQ6MTAwJTtib3gtc2hhZG93OnZhcigtLWNhbGNpdGUtc2hlbGwtcGFuZWwtc2hhZG93LWJsb2NrLXN0YXJ0LWludGVybmFsKX06aG9zdChbbGF5b3V0PWhvcml6b250YWxdW3Bvc2l0aW9uPWVuZF0pIC5jb250ZW50LS1vdmVybGF5e2luc2V0LWJsb2NrLWVuZDoxMDAlO2JveC1zaGFkb3c6dmFyKC0tY2FsY2l0ZS1zaGVsbC1wYW5lbC1zaGFkb3ctYmxvY2stZW5kLWludGVybmFsKX0uY29udGVudC0tZmxvYXR7bWFyZ2luLWlubGluZTowLjVyZW07bWFyZ2luLWJsb2NrOjAuNXJlbSBhdXRvO2Jsb2NrLXNpemU6YXV0bztvdmVyZmxvdzpoaWRkZW47Ym9yZGVyLXJhZGl1czowLjI1cmVtOy0tdHctc2hhZG93OjAgNHB4IDhweCAtMXB4IHJnYmEoMCwgMCwgMCwgMC4wOCksIDAgMnB4IDRweCAtMXB4IHJnYmEoMCwgMCwgMCwgMC4wNCk7LS10dy1zaGFkb3ctY29sb3JlZDowIDRweCA4cHggLTFweCB2YXIoLS10dy1zaGFkb3ctY29sb3IpLCAwIDJweCA0cHggLTFweCB2YXIoLS10dy1zaGFkb3ctY29sb3IpO2JveC1zaGFkb3c6dmFyKC0tdHctcmluZy1vZmZzZXQtc2hhZG93LCAwIDAgIzAwMDApLCB2YXIoLS10dy1yaW5nLXNoYWRvdywgMCAwICMwMDAwKSwgdmFyKC0tdHctc2hhZG93KTttYXgtYmxvY2stc2l6ZTp2YXIoLS1jYWxjaXRlLXNoZWxsLXBhbmVsLW1heC1oZWlnaHQtaW50ZXJuYWwsIGNhbGMoMTAwJSAtIDFyZW0pKX0uY29udGVudC0tZmxvYXQgOjpzbG90dGVkKGNhbGNpdGUtcGFuZWwpLC5jb250ZW50LS1mbG9hdCA6OnNsb3R0ZWQoY2FsY2l0ZS1mbG93KXttYXgtYmxvY2stc2l6ZTp1bnNldH06aG9zdChbbGF5b3V0PWhvcml6b250YWxdKSAuY29udGVudC0tZmxvYXR7bWFyZ2luLWJsb2NrOjAuNXJlbX06aG9zdChbcG9zaXRpb249c3RhcnRdKSAuY29udGVudC0tZmxvYXQgOjpzbG90dGVkKGNhbGNpdGUtcGFuZWwpLDpob3N0KFtwb3NpdGlvbj1zdGFydF0pIC5jb250ZW50LS1mbG9hdCA6OnNsb3R0ZWQoY2FsY2l0ZS1mbG93KSw6aG9zdChbcG9zaXRpb249ZW5kXSkgLmNvbnRlbnQtLWZsb2F0IDo6c2xvdHRlZChjYWxjaXRlLXBhbmVsKSw6aG9zdChbcG9zaXRpb249ZW5kXSkgLmNvbnRlbnQtLWZsb2F0IDo6c2xvdHRlZChjYWxjaXRlLWZsb3cpe2JvcmRlci1zdHlsZTpub25lfS5jb250ZW50W2hpZGRlbl17ZGlzcGxheTpub25lfXNsb3RbbmFtZT1hY3Rpb24tYmFyXTo6c2xvdHRlZChjYWxjaXRlLWFjdGlvbi1iYXIpLC5jb250ZW50IDo6c2xvdHRlZChjYWxjaXRlLWZsb3cpLC5jb250ZW50IDo6c2xvdHRlZChjYWxjaXRlLXBhbmVsOm5vdChbY2xvc2VkXSkpe2JvcmRlci13aWR0aDoxcHg7Ym9yZGVyLXN0eWxlOnNvbGlkO2JvcmRlci1jb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWJvcmRlci0zKX06aG9zdChbcG9zaXRpb249c3RhcnRdKSBzbG90W25hbWU9YWN0aW9uLWJhcl06OnNsb3R0ZWQoY2FsY2l0ZS1hY3Rpb24tYmFyKSw6aG9zdChbcG9zaXRpb249c3RhcnRdKSAuY29udGVudCA6OnNsb3R0ZWQoY2FsY2l0ZS1mbG93KSw6aG9zdChbcG9zaXRpb249c3RhcnRdKSAuY29udGVudCA6OnNsb3R0ZWQoY2FsY2l0ZS1wYW5lbCl7Ym9yZGVyLWlubGluZS1zdGFydDpub25lfTpob3N0KFtwb3NpdGlvbj1lbmRdKSBzbG90W25hbWU9YWN0aW9uLWJhcl06OnNsb3R0ZWQoY2FsY2l0ZS1hY3Rpb24tYmFyKSw6aG9zdChbcG9zaXRpb249ZW5kXSkgLmNvbnRlbnQgOjpzbG90dGVkKGNhbGNpdGUtZmxvdyksOmhvc3QoW3Bvc2l0aW9uPWVuZF0pIC5jb250ZW50IDo6c2xvdHRlZChjYWxjaXRlLXBhbmVsKXtib3JkZXItaW5saW5lLWVuZDpub25lfTpob3N0KFtsYXlvdXQ9aG9yaXpvbnRhbF0pIHNsb3RbbmFtZT1hY3Rpb24tYmFyXTo6c2xvdHRlZChjYWxjaXRlLWFjdGlvbi1iYXIpe2JvcmRlci1pbmxpbmU6MH06aG9zdChbbGF5b3V0PWhvcml6b250YWxdW3Bvc2l0aW9uPXN0YXJ0XSkgLmNvbnRlbnQgOjpzbG90dGVkKGNhbGNpdGUtZmxvdyksOmhvc3QoW2xheW91dD1ob3Jpem9udGFsXVtwb3NpdGlvbj1zdGFydF0pIC5jb250ZW50IDo6c2xvdHRlZChjYWxjaXRlLXBhbmVsKXtib3JkZXItaW5saW5lOjA7Ym9yZGVyLWJsb2NrLXN0YXJ0OjB9Omhvc3QoW2xheW91dD1ob3Jpem9udGFsXVtwb3NpdGlvbj1lbmRdKSAuY29udGVudCA6OnNsb3R0ZWQoY2FsY2l0ZS1mbG93KSw6aG9zdChbbGF5b3V0PWhvcml6b250YWxdW3Bvc2l0aW9uPWVuZF0pIC5jb250ZW50IDo6c2xvdHRlZChjYWxjaXRlLXBhbmVsKXtib3JkZXItaW5saW5lOjA7Ym9yZGVyLWJsb2NrLWVuZDowfTpob3N0KFtoaWRkZW5dKXtkaXNwbGF5Om5vbmV9W2hpZGRlbl17ZGlzcGxheTpub25lfVwiO1xuXG5jb25zdCBTaGVsbFBhbmVsID0gLypAX19QVVJFX18qLyBwcm94eUN1c3RvbUVsZW1lbnQoY2xhc3MgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fX3JlZ2lzdGVySG9zdCgpO1xuICAgIHRoaXMuX19hdHRhY2hTaGFkb3coKTtcbiAgICB0aGlzLmluaXRpYWxDb250ZW50V2lkdGggPSBudWxsO1xuICAgIHRoaXMuaW5pdGlhbENvbnRlbnRIZWlnaHQgPSBudWxsO1xuICAgIHRoaXMuaW5pdGlhbENsaWVudFggPSBudWxsO1xuICAgIHRoaXMuaW5pdGlhbENsaWVudFkgPSBudWxsO1xuICAgIHRoaXMuY29udGVudFdpZHRoTWF4ID0gbnVsbDtcbiAgICB0aGlzLmNvbnRlbnRXaWR0aE1pbiA9IG51bGw7XG4gICAgdGhpcy5jb250ZW50SGVpZ2h0TWF4ID0gbnVsbDtcbiAgICB0aGlzLmNvbnRlbnRIZWlnaHRNaW4gPSBudWxsO1xuICAgIHRoaXMuc3RlcCA9IDE7XG4gICAgdGhpcy5zdGVwTXVsdGlwbGllciA9IDEwO1xuICAgIHRoaXMuYWN0aW9uQmFycyA9IFtdO1xuICAgIHRoaXMuc3RvcmVDb250ZW50RWwgPSAoY29udGVudEVsKSA9PiB7XG4gICAgICB0aGlzLmNvbnRlbnRFbCA9IGNvbnRlbnRFbDtcbiAgICB9O1xuICAgIHRoaXMuZ2V0S2V5QWRqdXN0ZWRTaXplID0gKGV2ZW50KSA9PiB7XG4gICAgICBjb25zdCB7IGtleSB9ID0gZXZlbnQ7XG4gICAgICBjb25zdCB7IGVsLCBzdGVwLCBzdGVwTXVsdGlwbGllciwgbGF5b3V0LCBjb250ZW50V2lkdGhNaW4sIGNvbnRlbnRXaWR0aE1heCwgaW5pdGlhbENvbnRlbnRXaWR0aCwgaW5pdGlhbENvbnRlbnRIZWlnaHQsIGNvbnRlbnRIZWlnaHRNaW4sIGNvbnRlbnRIZWlnaHRNYXgsIHBvc2l0aW9uLCB9ID0gdGhpcztcbiAgICAgIGNvbnN0IG11bHRpcGxpZWRTdGVwID0gc3RlcCAqIHN0ZXBNdWx0aXBsaWVyO1xuICAgICAgY29uc3QgTU9WRU1FTlRfS0VZUyA9IFtcbiAgICAgICAgXCJBcnJvd1VwXCIsXG4gICAgICAgIFwiQXJyb3dEb3duXCIsXG4gICAgICAgIFwiQXJyb3dMZWZ0XCIsXG4gICAgICAgIFwiQXJyb3dSaWdodFwiLFxuICAgICAgICBcIkhvbWVcIixcbiAgICAgICAgXCJFbmRcIixcbiAgICAgICAgXCJQYWdlVXBcIixcbiAgICAgICAgXCJQYWdlRG93blwiLFxuICAgICAgXTtcbiAgICAgIGlmIChNT1ZFTUVOVF9LRVlTLmluZGV4T2Yoa2V5KSA+IC0xKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG4gICAgICBjb25zdCBkaXIgPSBnZXRFbGVtZW50RGlyKGVsKTtcbiAgICAgIGNvbnN0IGhvcml6b250YWxLZXlzID0gW1wiQXJyb3dMZWZ0XCIsIFwiQXJyb3dSaWdodFwiXTtcbiAgICAgIGNvbnN0IHZlcnRpY2FsS2V5cyA9IFtcIkFycm93RG93blwiLCBcIkFycm93VXBcIl07XG4gICAgICBjb25zdCBkaXJlY3Rpb25GYWN0b3IgPSBkaXIgPT09IFwicnRsXCIgJiYgaG9yaXpvbnRhbEtleXMuaW5jbHVkZXMoa2V5KSA/IC0xIDogMTtcbiAgICAgIGNvbnN0IGluY3JlYXNlS2V5cyA9IGxheW91dCA9PT0gXCJob3Jpem9udGFsXCJcbiAgICAgICAgPyBwb3NpdGlvbiA9PT0gXCJlbmRcIlxuICAgICAgICAgID8ga2V5ID09PSB2ZXJ0aWNhbEtleXNbMV0gfHwga2V5ID09PSBob3Jpem9udGFsS2V5c1swXVxuICAgICAgICAgIDoga2V5ID09PSB2ZXJ0aWNhbEtleXNbMF0gfHwga2V5ID09PSBob3Jpem9udGFsS2V5c1sxXVxuICAgICAgICA6IGtleSA9PT0gdmVydGljYWxLZXlzWzFdIHx8XG4gICAgICAgICAgKHBvc2l0aW9uID09PSBcImVuZFwiID8ga2V5ID09PSBob3Jpem9udGFsS2V5c1swXSA6IGtleSA9PT0gaG9yaXpvbnRhbEtleXNbMV0pO1xuICAgICAgaWYgKGluY3JlYXNlS2V5cykge1xuICAgICAgICBjb25zdCBzdGVwVmFsdWUgPSBldmVudC5zaGlmdEtleSA/IG11bHRpcGxpZWRTdGVwIDogc3RlcDtcbiAgICAgICAgcmV0dXJuIGxheW91dCA9PT0gXCJob3Jpem9udGFsXCJcbiAgICAgICAgICA/IGluaXRpYWxDb250ZW50SGVpZ2h0ICsgZGlyZWN0aW9uRmFjdG9yICogc3RlcFZhbHVlXG4gICAgICAgICAgOiBpbml0aWFsQ29udGVudFdpZHRoICsgZGlyZWN0aW9uRmFjdG9yICogc3RlcFZhbHVlO1xuICAgICAgfVxuICAgICAgY29uc3QgZGVjcmVhc2VLZXlzID0gbGF5b3V0ID09PSBcImhvcml6b250YWxcIlxuICAgICAgICA/IHBvc2l0aW9uID09PSBcImVuZFwiXG4gICAgICAgICAgPyBrZXkgPT09IHZlcnRpY2FsS2V5c1swXSB8fCBrZXkgPT09IGhvcml6b250YWxLZXlzWzBdXG4gICAgICAgICAgOiBrZXkgPT09IHZlcnRpY2FsS2V5c1sxXSB8fCBrZXkgPT09IGhvcml6b250YWxLZXlzWzFdXG4gICAgICAgIDoga2V5ID09PSB2ZXJ0aWNhbEtleXNbMF0gfHxcbiAgICAgICAgICAocG9zaXRpb24gPT09IFwiZW5kXCIgPyBrZXkgPT09IGhvcml6b250YWxLZXlzWzFdIDoga2V5ID09PSBob3Jpem9udGFsS2V5c1swXSk7XG4gICAgICBpZiAoZGVjcmVhc2VLZXlzKSB7XG4gICAgICAgIGNvbnN0IHN0ZXBWYWx1ZSA9IGV2ZW50LnNoaWZ0S2V5ID8gbXVsdGlwbGllZFN0ZXAgOiBzdGVwO1xuICAgICAgICByZXR1cm4gbGF5b3V0ID09PSBcImhvcml6b250YWxcIlxuICAgICAgICAgID8gaW5pdGlhbENvbnRlbnRIZWlnaHQgLSBkaXJlY3Rpb25GYWN0b3IgKiBzdGVwVmFsdWVcbiAgICAgICAgICA6IGluaXRpYWxDb250ZW50V2lkdGggLSBkaXJlY3Rpb25GYWN0b3IgKiBzdGVwVmFsdWU7XG4gICAgICB9XG4gICAgICBpZiAoa2V5ID09PSBcIkhvbWVcIiAmJiBsYXlvdXQgPT09IFwiaG9yaXpvbnRhbFwiICYmIHR5cGVvZiBjb250ZW50SGVpZ2h0TWluID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgIHJldHVybiBjb250ZW50SGVpZ2h0TWluO1xuICAgICAgfVxuICAgICAgaWYgKGtleSA9PT0gXCJIb21lXCIgJiYgbGF5b3V0ID09PSBcInZlcnRpY2FsXCIgJiYgdHlwZW9mIGNvbnRlbnRXaWR0aE1pbiA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICByZXR1cm4gY29udGVudFdpZHRoTWluO1xuICAgICAgfVxuICAgICAgaWYgKGtleSA9PT0gXCJFbmRcIiAmJiBsYXlvdXQgPT09IFwiaG9yaXpvbnRhbFwiICYmIHR5cGVvZiBjb250ZW50SGVpZ2h0TWF4ID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgIHJldHVybiBjb250ZW50SGVpZ2h0TWF4O1xuICAgICAgfVxuICAgICAgaWYgKGtleSA9PT0gXCJFbmRcIiAmJiBsYXlvdXQgPT09IFwidmVydGljYWxcIiAmJiB0eXBlb2YgY29udGVudFdpZHRoTWF4ID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgIHJldHVybiBjb250ZW50V2lkdGhNYXg7XG4gICAgICB9XG4gICAgICBpZiAoa2V5ID09PSBcIlBhZ2VEb3duXCIpIHtcbiAgICAgICAgcmV0dXJuIGxheW91dCA9PT0gXCJob3Jpem9udGFsXCJcbiAgICAgICAgICA/IGluaXRpYWxDb250ZW50SGVpZ2h0IC0gbXVsdGlwbGllZFN0ZXBcbiAgICAgICAgICA6IGluaXRpYWxDb250ZW50V2lkdGggLSBtdWx0aXBsaWVkU3RlcDtcbiAgICAgIH1cbiAgICAgIGlmIChrZXkgPT09IFwiUGFnZVVwXCIpIHtcbiAgICAgICAgcmV0dXJuIGxheW91dCA9PT0gXCJob3Jpem9udGFsXCJcbiAgICAgICAgICA/IGluaXRpYWxDb250ZW50SGVpZ2h0ICsgbXVsdGlwbGllZFN0ZXBcbiAgICAgICAgICA6IGluaXRpYWxDb250ZW50V2lkdGggKyBtdWx0aXBsaWVkU3RlcDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gICAgdGhpcy5pbml0aWFsS2V5ZG93bldpZHRoID0gKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLnNldEluaXRpYWxDb250ZW50V2lkdGgoKTtcbiAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy5nZXRLZXlBZGp1c3RlZFNpemUoZXZlbnQpO1xuICAgICAgaWYgKHR5cGVvZiB3aWR0aCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICB0aGlzLnNldENvbnRlbnRXaWR0aCh3aWR0aCk7XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLmluaXRpYWxLZXlkb3duSGVpZ2h0ID0gKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLnNldEluaXRpYWxDb250ZW50SGVpZ2h0KCk7XG4gICAgICBjb25zdCBoZWlnaHQgPSB0aGlzLmdldEtleUFkanVzdGVkU2l6ZShldmVudCk7XG4gICAgICBpZiAodHlwZW9mIGhlaWdodCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICB0aGlzLnNldENvbnRlbnRIZWlnaHQoaGVpZ2h0KTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMuc2VwYXJhdG9yS2V5RG93biA9IChldmVudCkgPT4ge1xuICAgICAgdGhpcy5sYXlvdXQgPT09IFwiaG9yaXpvbnRhbFwiXG4gICAgICAgID8gdGhpcy5pbml0aWFsS2V5ZG93bkhlaWdodChldmVudClcbiAgICAgICAgOiB0aGlzLmluaXRpYWxLZXlkb3duV2lkdGgoZXZlbnQpO1xuICAgIH07XG4gICAgdGhpcy5zZXBhcmF0b3JQb2ludGVyTW92ZSA9IChldmVudCkgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNvbnN0IHsgZWwsIGxheW91dCwgaW5pdGlhbENvbnRlbnRXaWR0aCwgaW5pdGlhbENvbnRlbnRIZWlnaHQsIHBvc2l0aW9uLCBpbml0aWFsQ2xpZW50WCwgaW5pdGlhbENsaWVudFksIH0gPSB0aGlzO1xuICAgICAgY29uc3Qgb2Zmc2V0ID0gbGF5b3V0ID09PSBcImhvcml6b250YWxcIiA/IGV2ZW50LmNsaWVudFkgLSBpbml0aWFsQ2xpZW50WSA6IGV2ZW50LmNsaWVudFggLSBpbml0aWFsQ2xpZW50WDtcbiAgICAgIGNvbnN0IGFkanVzdG1lbnREaXJlY3Rpb24gPSBsYXlvdXQgPT09IFwidmVydGljYWxcIiAmJiBnZXRFbGVtZW50RGlyKGVsKSA9PT0gXCJydGxcIiA/IC0xIDogMTtcbiAgICAgIGNvbnN0IGFkanVzdGVkT2Zmc2V0ID0gbGF5b3V0ID09PSBcImhvcml6b250YWxcIlxuICAgICAgICA/IHBvc2l0aW9uID09PSBcImVuZFwiXG4gICAgICAgICAgPyAtYWRqdXN0bWVudERpcmVjdGlvbiAqIG9mZnNldFxuICAgICAgICAgIDogYWRqdXN0bWVudERpcmVjdGlvbiAqIG9mZnNldFxuICAgICAgICA6IHBvc2l0aW9uID09PSBcImVuZFwiXG4gICAgICAgICAgPyAtYWRqdXN0bWVudERpcmVjdGlvbiAqIG9mZnNldFxuICAgICAgICAgIDogYWRqdXN0bWVudERpcmVjdGlvbiAqIG9mZnNldDtcbiAgICAgIGxheW91dCA9PT0gXCJob3Jpem9udGFsXCJcbiAgICAgICAgPyB0aGlzLnNldENvbnRlbnRIZWlnaHQoaW5pdGlhbENvbnRlbnRIZWlnaHQgKyBhZGp1c3RlZE9mZnNldClcbiAgICAgICAgOiB0aGlzLnNldENvbnRlbnRXaWR0aChpbml0aWFsQ29udGVudFdpZHRoICsgYWRqdXN0ZWRPZmZzZXQpO1xuICAgIH07XG4gICAgdGhpcy5zZXBhcmF0b3JQb2ludGVyVXAgPSAoZXZlbnQpID0+IHtcbiAgICAgIGlmICghaXNQcmltYXJ5UG9pbnRlckJ1dHRvbihldmVudCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVydXBcIiwgdGhpcy5zZXBhcmF0b3JQb2ludGVyVXApO1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJtb3ZlXCIsIHRoaXMuc2VwYXJhdG9yUG9pbnRlck1vdmUpO1xuICAgIH07XG4gICAgdGhpcy5zZXRJbml0aWFsQ29udGVudEhlaWdodCA9ICgpID0+IHtcbiAgICAgIHRoaXMuaW5pdGlhbENvbnRlbnRIZWlnaHQgPSB0aGlzLmNvbnRlbnRFbD8uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xuICAgIH07XG4gICAgdGhpcy5zZXRJbml0aWFsQ29udGVudFdpZHRoID0gKCkgPT4ge1xuICAgICAgdGhpcy5pbml0aWFsQ29udGVudFdpZHRoID0gdGhpcy5jb250ZW50RWw/LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuICAgIH07XG4gICAgdGhpcy5zZXBhcmF0b3JQb2ludGVyRG93biA9IChldmVudCkgPT4ge1xuICAgICAgaWYgKCFpc1ByaW1hcnlQb2ludGVyQnV0dG9uKGV2ZW50KSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY29uc3QgeyBzZXBhcmF0b3JFbCB9ID0gdGhpcztcbiAgICAgIHNlcGFyYXRvckVsICYmIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgIT09IHNlcGFyYXRvckVsICYmIHNlcGFyYXRvckVsLmZvY3VzKCk7XG4gICAgICBpZiAodGhpcy5sYXlvdXQgPT09IFwiaG9yaXpvbnRhbFwiKSB7XG4gICAgICAgIHRoaXMuc2V0SW5pdGlhbENvbnRlbnRIZWlnaHQoKTtcbiAgICAgICAgdGhpcy5pbml0aWFsQ2xpZW50WSA9IGV2ZW50LmNsaWVudFk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgdGhpcy5zZXRJbml0aWFsQ29udGVudFdpZHRoKCk7XG4gICAgICAgIHRoaXMuaW5pdGlhbENsaWVudFggPSBldmVudC5jbGllbnRYO1xuICAgICAgfVxuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJ1cFwiLCB0aGlzLnNlcGFyYXRvclBvaW50ZXJVcCk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIiwgdGhpcy5zZXBhcmF0b3JQb2ludGVyTW92ZSk7XG4gICAgfTtcbiAgICB0aGlzLmNvbm5lY3RTZXBhcmF0b3IgPSAoc2VwYXJhdG9yRWwpID0+IHtcbiAgICAgIHRoaXMuZGlzY29ubmVjdFNlcGFyYXRvcigpO1xuICAgICAgdGhpcy5zZXBhcmF0b3JFbCA9IHNlcGFyYXRvckVsO1xuICAgICAgc2VwYXJhdG9yRWw/LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVyZG93blwiLCB0aGlzLnNlcGFyYXRvclBvaW50ZXJEb3duKTtcbiAgICB9O1xuICAgIHRoaXMuZGlzY29ubmVjdFNlcGFyYXRvciA9ICgpID0+IHtcbiAgICAgIHRoaXMuc2VwYXJhdG9yRWw/LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVyZG93blwiLCB0aGlzLnNlcGFyYXRvclBvaW50ZXJEb3duKTtcbiAgICB9O1xuICAgIHRoaXMuc2V0QWN0aW9uQmFyc0xheW91dCA9IChhY3Rpb25CYXJzKSA9PiB7XG4gICAgICBhY3Rpb25CYXJzLmZvckVhY2goKGFjdGlvbkJhcikgPT4gKGFjdGlvbkJhci5sYXlvdXQgPSB0aGlzLmxheW91dCkpO1xuICAgIH07XG4gICAgdGhpcy5oYW5kbGVBY3Rpb25CYXJTbG90Q2hhbmdlID0gKGV2ZW50KSA9PiB7XG4gICAgICBjb25zdCBhY3Rpb25CYXJzID0gc2xvdENoYW5nZUdldEFzc2lnbmVkRWxlbWVudHMoZXZlbnQpLmZpbHRlcigoZWwpID0+IGVsPy5tYXRjaGVzKFwiY2FsY2l0ZS1hY3Rpb24tYmFyXCIpKTtcbiAgICAgIHRoaXMuYWN0aW9uQmFycyA9IGFjdGlvbkJhcnM7XG4gICAgICB0aGlzLnNldEFjdGlvbkJhcnNMYXlvdXQoYWN0aW9uQmFycyk7XG4gICAgfTtcbiAgICB0aGlzLmhhbmRsZUhlYWRlclNsb3RDaGFuZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMuaGFzSGVhZGVyID0gc2xvdENoYW5nZUhhc0Fzc2lnbmVkRWxlbWVudChldmVudCk7XG4gICAgfTtcbiAgICB0aGlzLmNvbGxhcHNlZCA9IGZhbHNlO1xuICAgIHRoaXMuZGV0YWNoZWQgPSBmYWxzZTtcbiAgICB0aGlzLmRpc3BsYXlNb2RlID0gXCJkb2NrXCI7XG4gICAgdGhpcy5kZXRhY2hlZEhlaWdodFNjYWxlID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuaGVpZ2h0U2NhbGUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy53aWR0aFNjYWxlID0gXCJtXCI7XG4gICAgdGhpcy5sYXlvdXQgPSBcInZlcnRpY2FsXCI7XG4gICAgdGhpcy5wb3NpdGlvbiA9IFwic3RhcnRcIjtcbiAgICB0aGlzLnJlc2l6YWJsZSA9IGZhbHNlO1xuICAgIHRoaXMubWVzc2FnZXMgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5tZXNzYWdlT3ZlcnJpZGVzID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuY29udGVudFdpZHRoID0gbnVsbDtcbiAgICB0aGlzLmNvbnRlbnRIZWlnaHQgPSBudWxsO1xuICAgIHRoaXMuZGVmYXVsdE1lc3NhZ2VzID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuZWZmZWN0aXZlTG9jYWxlID0gXCJcIjtcbiAgICB0aGlzLmhhc0hlYWRlciA9IGZhbHNlO1xuICB9XG4gIGhhbmRsZURldGFjaGVkKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICB0aGlzLmRpc3BsYXlNb2RlID0gXCJmbG9hdFwiO1xuICAgIH1cbiAgICBlbHNlIGlmICh0aGlzLmRpc3BsYXlNb2RlID09PSBcImZsb2F0XCIpIHtcbiAgICAgIHRoaXMuZGlzcGxheU1vZGUgPSBcImRvY2tcIjtcbiAgICB9XG4gIH1cbiAgaGFuZGxlRGlzcGxheU1vZGUodmFsdWUpIHtcbiAgICB0aGlzLmRldGFjaGVkID0gdmFsdWUgPT09IFwiZmxvYXRcIjtcbiAgfVxuICBoYW5kbGVEZXRhY2hlZEhlaWdodFNjYWxlKHZhbHVlKSB7XG4gICAgdGhpcy5oZWlnaHRTY2FsZSA9IHZhbHVlO1xuICB9XG4gIGhhbmRsZUhlaWdodFNjYWxlKHZhbHVlKSB7XG4gICAgdGhpcy5kZXRhY2hlZEhlaWdodFNjYWxlID0gdmFsdWU7XG4gIH1cbiAgbGF5b3V0SGFuZGxlcigpIHtcbiAgICB0aGlzLnNldEFjdGlvbkJhcnNMYXlvdXQodGhpcy5hY3Rpb25CYXJzKTtcbiAgfVxuICBvbk1lc3NhZ2VzQ2hhbmdlKCkge1xuICAgIC8qIHdpcmVkIHVwIGJ5IHQ5biB1dGlsICovXG4gIH1cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvL1xuICAvLyAgTGlmZWN5Y2xlXG4gIC8vXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgY29ubmVjdENvbmRpdGlvbmFsU2xvdENvbXBvbmVudCh0aGlzKTtcbiAgICBjb25uZWN0TG9jYWxpemVkKHRoaXMpO1xuICAgIGNvbm5lY3RNZXNzYWdlcyh0aGlzKTtcbiAgfVxuICBhc3luYyBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICBhd2FpdCBzZXRVcE1lc3NhZ2VzKHRoaXMpO1xuICB9XG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIGRpc2Nvbm5lY3RDb25kaXRpb25hbFNsb3RDb21wb25lbnQodGhpcyk7XG4gICAgdGhpcy5kaXNjb25uZWN0U2VwYXJhdG9yKCk7XG4gICAgZGlzY29ubmVjdExvY2FsaXplZCh0aGlzKTtcbiAgICBkaXNjb25uZWN0TWVzc2FnZXModGhpcyk7XG4gIH1cbiAgY29tcG9uZW50RGlkTG9hZCgpIHtcbiAgICB0aGlzLnVwZGF0ZUFyaWFWYWx1ZXMoKTtcbiAgfVxuICBlZmZlY3RpdmVMb2NhbGVDaGFuZ2UoKSB7XG4gICAgdXBkYXRlTWVzc2FnZXModGhpcywgdGhpcy5lZmZlY3RpdmVMb2NhbGUpO1xuICB9XG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vXG4gIC8vICBSZW5kZXIgTWV0aG9kc1xuICAvL1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICByZW5kZXJIZWFkZXIoKSB7XG4gICAgcmV0dXJuIChoKFwiZGl2XCIsIHsgY2xhc3M6IENTUy5jb250ZW50SGVhZGVyLCBoaWRkZW46ICF0aGlzLmhhc0hlYWRlciwga2V5OiBcImhlYWRlclwiIH0sIGgoXCJzbG90XCIsIHsgbmFtZTogU0xPVFMuaGVhZGVyLCBvblNsb3RjaGFuZ2U6IHRoaXMuaGFuZGxlSGVhZGVyU2xvdENoYW5nZSB9KSkpO1xuICB9XG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IGNvbGxhcHNlZCwgcG9zaXRpb24sIGluaXRpYWxDb250ZW50V2lkdGgsIGluaXRpYWxDb250ZW50SGVpZ2h0LCBjb250ZW50V2lkdGgsIGNvbnRlbnRXaWR0aE1heCwgY29udGVudFdpZHRoTWluLCBjb250ZW50SGVpZ2h0LCBjb250ZW50SGVpZ2h0TWF4LCBjb250ZW50SGVpZ2h0TWluLCByZXNpemFibGUsIGxheW91dCwgZGlzcGxheU1vZGUsIH0gPSB0aGlzO1xuICAgIGNvbnN0IGRpciA9IGdldEVsZW1lbnREaXIodGhpcy5lbCk7XG4gICAgY29uc3QgYWxsb3dSZXNpemluZyA9IGRpc3BsYXlNb2RlICE9PSBcImZsb2F0XCIgJiYgcmVzaXphYmxlO1xuICAgIGNvbnN0IHN0eWxlID0gYWxsb3dSZXNpemluZ1xuICAgICAgPyBsYXlvdXQgPT09IFwiaG9yaXpvbnRhbFwiXG4gICAgICAgID8gY29udGVudEhlaWdodFxuICAgICAgICAgID8geyBoZWlnaHQ6IGAke2NvbnRlbnRIZWlnaHR9cHhgIH1cbiAgICAgICAgICA6IG51bGxcbiAgICAgICAgOiBjb250ZW50V2lkdGhcbiAgICAgICAgICA/IHsgd2lkdGg6IGAke2NvbnRlbnRXaWR0aH1weGAgfVxuICAgICAgICAgIDogbnVsbFxuICAgICAgOiBudWxsO1xuICAgIGNvbnN0IHNlcGFyYXRvck5vZGUgPSAhY29sbGFwc2VkICYmIGFsbG93UmVzaXppbmcgPyAoaChcImRpdlwiLCB7IFwiYXJpYS1sYWJlbFwiOiB0aGlzLm1lc3NhZ2VzLnJlc2l6ZSwgXCJhcmlhLW9yaWVudGF0aW9uXCI6IGxheW91dCA9PT0gXCJob3Jpem9udGFsXCIgPyBcInZlcnRpY2FsXCIgOiBcImhvcml6b250YWxcIiwgXCJhcmlhLXZhbHVlbWF4XCI6IGxheW91dCA9PSBcImhvcml6b250YWxcIiA/IGNvbnRlbnRIZWlnaHRNYXggOiBjb250ZW50V2lkdGhNYXgsIFwiYXJpYS12YWx1ZW1pblwiOiBsYXlvdXQgPT0gXCJob3Jpem9udGFsXCIgPyBjb250ZW50SGVpZ2h0TWluIDogY29udGVudFdpZHRoTWluLCBcImFyaWEtdmFsdWVub3dcIjogbGF5b3V0ID09IFwiaG9yaXpvbnRhbFwiXG4gICAgICAgID8gY29udGVudEhlaWdodCA/PyBpbml0aWFsQ29udGVudEhlaWdodFxuICAgICAgICA6IGNvbnRlbnRXaWR0aCA/PyBpbml0aWFsQ29udGVudFdpZHRoLCBjbGFzczogQ1NTLnNlcGFyYXRvciwga2V5OiBcInNlcGFyYXRvclwiLCBvbktleURvd246IHRoaXMuc2VwYXJhdG9yS2V5RG93biwgcm9sZTogXCJzZXBhcmF0b3JcIiwgdGFiSW5kZXg6IDAsIFwidG91Y2gtYWN0aW9uXCI6IFwibm9uZVwiLFxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0L2pzeC1zb3J0LXByb3BzIC0tIHJlZiBzaG91bGQgYmUgbGFzdCBzbyBub2RlIGF0dHJzL3Byb3BzIGFyZSBpbiBzeW5jIChzZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL3B1bGwvNjUzMClcbiAgICAgIHJlZjogdGhpcy5jb25uZWN0U2VwYXJhdG9yIH0pKSA6IG51bGw7XG4gICAgY29uc3QgZ2V0QW5pbWF0aW9uRGlyID0gKCkgPT4ge1xuICAgICAgaWYgKGxheW91dCA9PT0gXCJob3Jpem9udGFsXCIpIHtcbiAgICAgICAgcmV0dXJuIHBvc2l0aW9uID09PSBcInN0YXJ0XCJcbiAgICAgICAgICA/IENTU19VVElMSVRZLmNhbGNpdGVBbmltYXRlSW5Eb3duXG4gICAgICAgICAgOiBDU1NfVVRJTElUWS5jYWxjaXRlQW5pbWF0ZUluVXA7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgaXNTdGFydCA9IChkaXIgPT09IFwibHRyXCIgJiYgcG9zaXRpb24gPT09IFwiZW5kXCIpIHx8IChkaXIgPT09IFwicnRsXCIgJiYgcG9zaXRpb24gPT09IFwic3RhcnRcIik7XG4gICAgICAgIHJldHVybiBpc1N0YXJ0ID8gQ1NTX1VUSUxJVFkuY2FsY2l0ZUFuaW1hdGVJbkxlZnQgOiBDU1NfVVRJTElUWS5jYWxjaXRlQW5pbWF0ZUluUmlnaHQ7XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBjb250ZW50Tm9kZSA9IChoKFwiZGl2XCIsIHsgY2xhc3M6IHtcbiAgICAgICAgW0NTU19VVElMSVRZLnJ0bF06IGRpciA9PT0gXCJydGxcIixcbiAgICAgICAgW0NTUy5jb250ZW50XTogdHJ1ZSxcbiAgICAgICAgW0NTUy5jb250ZW50T3ZlcmxheV06IGRpc3BsYXlNb2RlID09PSBcIm92ZXJsYXlcIixcbiAgICAgICAgW0NTUy5jb250ZW50RmxvYXRdOiBkaXNwbGF5TW9kZSA9PT0gXCJmbG9hdFwiLFxuICAgICAgICBbQ1NTX1VUSUxJVFkuY2FsY2l0ZUFuaW1hdGVdOiBkaXNwbGF5TW9kZSA9PT0gXCJvdmVybGF5XCIsXG4gICAgICAgIFtnZXRBbmltYXRpb25EaXIoKV06IGRpc3BsYXlNb2RlID09PSBcIm92ZXJsYXlcIixcbiAgICAgIH0sIGhpZGRlbjogY29sbGFwc2VkLCBrZXk6IFwiY29udGVudFwiLCBzdHlsZTogc3R5bGUsXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QvanN4LXNvcnQtcHJvcHMgLS0gcmVmIHNob3VsZCBiZSBsYXN0IHNvIG5vZGUgYXR0cnMvcHJvcHMgYXJlIGluIHN5bmMgKHNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWRlc2lnbi1zeXN0ZW0vcHVsbC82NTMwKVxuICAgICAgcmVmOiB0aGlzLnN0b3JlQ29udGVudEVsIH0sIHRoaXMucmVuZGVySGVhZGVyKCksIGgoXCJkaXZcIiwgeyBjbGFzczogQ1NTLmNvbnRlbnRCb2R5IH0sIGgoXCJzbG90XCIsIG51bGwpKSwgc2VwYXJhdG9yTm9kZSkpO1xuICAgIGNvbnN0IGFjdGlvbkJhck5vZGUgPSAoaChcInNsb3RcIiwgeyBrZXk6IFwiYWN0aW9uLWJhclwiLCBuYW1lOiBTTE9UUy5hY3Rpb25CYXIsIG9uU2xvdGNoYW5nZTogdGhpcy5oYW5kbGVBY3Rpb25CYXJTbG90Q2hhbmdlIH0pKTtcbiAgICBjb25zdCBtYWluTm9kZXMgPSBbYWN0aW9uQmFyTm9kZSwgY29udGVudE5vZGVdO1xuICAgIGlmIChwb3NpdGlvbiA9PT0gXCJlbmRcIikge1xuICAgICAgbWFpbk5vZGVzLnJldmVyc2UoKTtcbiAgICB9XG4gICAgcmV0dXJuIGgoXCJkaXZcIiwgeyBjbGFzczogeyBbQ1NTLmNvbnRhaW5lcl06IHRydWUgfSB9LCBtYWluTm9kZXMpO1xuICB9XG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vXG4gIC8vICBwcml2YXRlIE1ldGhvZHNcbiAgLy9cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgc2V0Q29udGVudFdpZHRoKHdpZHRoKSB7XG4gICAgY29uc3QgeyBjb250ZW50V2lkdGhNYXgsIGNvbnRlbnRXaWR0aE1pbiB9ID0gdGhpcztcbiAgICBjb25zdCByb3VuZGVkV2lkdGggPSBNYXRoLnJvdW5kKHdpZHRoKTtcbiAgICB0aGlzLmNvbnRlbnRXaWR0aCA9XG4gICAgICB0eXBlb2YgY29udGVudFdpZHRoTWF4ID09PSBcIm51bWJlclwiICYmIHR5cGVvZiBjb250ZW50V2lkdGhNaW4gPT09IFwibnVtYmVyXCJcbiAgICAgICAgPyBjbGFtcChyb3VuZGVkV2lkdGgsIGNvbnRlbnRXaWR0aE1pbiwgY29udGVudFdpZHRoTWF4KVxuICAgICAgICA6IHJvdW5kZWRXaWR0aDtcbiAgfVxuICB1cGRhdGVBcmlhVmFsdWVzKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnN0IGNvbXB1dGVkU3R5bGUgPSBjb250ZW50RWwgJiYgZ2V0Q29tcHV0ZWRTdHlsZShjb250ZW50RWwpO1xuICAgIGlmICghY29tcHV0ZWRTdHlsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmxheW91dCA9PT0gXCJob3Jpem9udGFsXCJcbiAgICAgID8gdGhpcy51cGRhdGVIZWlnaHRzKGNvbXB1dGVkU3R5bGUpXG4gICAgICA6IHRoaXMudXBkYXRlV2lkdGhzKGNvbXB1dGVkU3R5bGUpO1xuICAgIGZvcmNlVXBkYXRlKHRoaXMpO1xuICB9XG4gIHNldENvbnRlbnRIZWlnaHQoaGVpZ2h0KSB7XG4gICAgY29uc3QgeyBjb250ZW50SGVpZ2h0TWF4LCBjb250ZW50SGVpZ2h0TWluIH0gPSB0aGlzO1xuICAgIGNvbnN0IHJvdW5kZWRXaWR0aCA9IE1hdGgucm91bmQoaGVpZ2h0KTtcbiAgICB0aGlzLmNvbnRlbnRIZWlnaHQgPVxuICAgICAgdHlwZW9mIGNvbnRlbnRIZWlnaHRNYXggPT09IFwibnVtYmVyXCIgJiYgdHlwZW9mIGNvbnRlbnRIZWlnaHRNaW4gPT09IFwibnVtYmVyXCJcbiAgICAgICAgPyBjbGFtcChyb3VuZGVkV2lkdGgsIGNvbnRlbnRIZWlnaHRNaW4sIGNvbnRlbnRIZWlnaHRNYXgpXG4gICAgICAgIDogcm91bmRlZFdpZHRoO1xuICB9XG4gIHVwZGF0ZVdpZHRocyhjb21wdXRlZFN0eWxlKSB7XG4gICAgY29uc3QgbWF4ID0gcGFyc2VJbnQoY29tcHV0ZWRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKFwibWF4LXdpZHRoXCIpLCAxMCk7XG4gICAgY29uc3QgbWluID0gcGFyc2VJbnQoY29tcHV0ZWRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKFwibWluLXdpZHRoXCIpLCAxMCk7XG4gICAgY29uc3QgdmFsdWVOb3cgPSBwYXJzZUludChjb21wdXRlZFN0eWxlLmdldFByb3BlcnR5VmFsdWUoXCJ3aWR0aFwiKSwgMTApO1xuICAgIGlmICh0eXBlb2YgdmFsdWVOb3cgPT09IFwibnVtYmVyXCIgJiYgIWlzTmFOKHZhbHVlTm93KSkge1xuICAgICAgdGhpcy5pbml0aWFsQ29udGVudFdpZHRoID0gdmFsdWVOb3c7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgbWF4ID09PSBcIm51bWJlclwiICYmICFpc05hTihtYXgpKSB7XG4gICAgICB0aGlzLmNvbnRlbnRXaWR0aE1heCA9IG1heDtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBtaW4gPT09IFwibnVtYmVyXCIgJiYgIWlzTmFOKG1pbikpIHtcbiAgICAgIHRoaXMuY29udGVudFdpZHRoTWluID0gbWluO1xuICAgIH1cbiAgfVxuICB1cGRhdGVIZWlnaHRzKGNvbXB1dGVkU3R5bGUpIHtcbiAgICBjb25zdCBtYXggPSBwYXJzZUludChjb21wdXRlZFN0eWxlLmdldFByb3BlcnR5VmFsdWUoXCJtYXgtaGVpZ2h0XCIpLCAxMCk7XG4gICAgY29uc3QgbWluID0gcGFyc2VJbnQoY29tcHV0ZWRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKFwibWluLWhlaWdodFwiKSwgMTApO1xuICAgIGNvbnN0IHZhbHVlTm93ID0gcGFyc2VJbnQoY29tcHV0ZWRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKFwiaGVpZ2h0XCIpLCAxMCk7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZU5vdyA9PT0gXCJudW1iZXJcIiAmJiAhaXNOYU4odmFsdWVOb3cpKSB7XG4gICAgICB0aGlzLmluaXRpYWxDb250ZW50SGVpZ2h0ID0gdmFsdWVOb3c7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgbWF4ID09PSBcIm51bWJlclwiICYmICFpc05hTihtYXgpKSB7XG4gICAgICB0aGlzLmNvbnRlbnRIZWlnaHRNYXggPSBtYXg7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgbWluID09PSBcIm51bWJlclwiICYmICFpc05hTihtaW4pKSB7XG4gICAgICB0aGlzLmNvbnRlbnRIZWlnaHRNaW4gPSBtaW47XG4gICAgfVxuICB9XG4gIHN0YXRpYyBnZXQgYXNzZXRzRGlycygpIHsgcmV0dXJuIFtcImFzc2V0c1wiXTsgfVxuICBnZXQgZWwoKSB7IHJldHVybiB0aGlzOyB9XG4gIHN0YXRpYyBnZXQgd2F0Y2hlcnMoKSB7IHJldHVybiB7XG4gICAgXCJkZXRhY2hlZFwiOiBbXCJoYW5kbGVEZXRhY2hlZFwiXSxcbiAgICBcImRpc3BsYXlNb2RlXCI6IFtcImhhbmRsZURpc3BsYXlNb2RlXCJdLFxuICAgIFwiZGV0YWNoZWRIZWlnaHRTY2FsZVwiOiBbXCJoYW5kbGVEZXRhY2hlZEhlaWdodFNjYWxlXCJdLFxuICAgIFwiaGVpZ2h0U2NhbGVcIjogW1wiaGFuZGxlSGVpZ2h0U2NhbGVcIl0sXG4gICAgXCJsYXlvdXRcIjogW1wibGF5b3V0SGFuZGxlclwiXSxcbiAgICBcIm1lc3NhZ2VPdmVycmlkZXNcIjogW1wib25NZXNzYWdlc0NoYW5nZVwiXSxcbiAgICBcImVmZmVjdGl2ZUxvY2FsZVwiOiBbXCJlZmZlY3RpdmVMb2NhbGVDaGFuZ2VcIl1cbiAgfTsgfVxuICBzdGF0aWMgZ2V0IHN0eWxlKCkgeyByZXR1cm4gc2hlbGxQYW5lbENzczsgfVxufSwgWzEsIFwiY2FsY2l0ZS1zaGVsbC1wYW5lbFwiLCB7XG4gICAgXCJjb2xsYXBzZWRcIjogWzUxNl0sXG4gICAgXCJkZXRhY2hlZFwiOiBbNTE2XSxcbiAgICBcImRpc3BsYXlNb2RlXCI6IFs1MTMsIFwiZGlzcGxheS1tb2RlXCJdLFxuICAgIFwiZGV0YWNoZWRIZWlnaHRTY2FsZVwiOiBbNTEzLCBcImRldGFjaGVkLWhlaWdodC1zY2FsZVwiXSxcbiAgICBcImhlaWdodFNjYWxlXCI6IFs1MTMsIFwiaGVpZ2h0LXNjYWxlXCJdLFxuICAgIFwid2lkdGhTY2FsZVwiOiBbNTEzLCBcIndpZHRoLXNjYWxlXCJdLFxuICAgIFwibGF5b3V0XCI6IFs1MTNdLFxuICAgIFwicG9zaXRpb25cIjogWzUxM10sXG4gICAgXCJyZXNpemFibGVcIjogWzUxNl0sXG4gICAgXCJtZXNzYWdlc1wiOiBbMTA0MF0sXG4gICAgXCJtZXNzYWdlT3ZlcnJpZGVzXCI6IFsxMDQwXSxcbiAgICBcImNvbnRlbnRXaWR0aFwiOiBbMzJdLFxuICAgIFwiY29udGVudEhlaWdodFwiOiBbMzJdLFxuICAgIFwiZGVmYXVsdE1lc3NhZ2VzXCI6IFszMl0sXG4gICAgXCJlZmZlY3RpdmVMb2NhbGVcIjogWzMyXSxcbiAgICBcImhhc0hlYWRlclwiOiBbMzJdXG4gIH1dKTtcbmZ1bmN0aW9uIGRlZmluZUN1c3RvbUVsZW1lbnQkMSgpIHtcbiAgaWYgKHR5cGVvZiBjdXN0b21FbGVtZW50cyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBjb21wb25lbnRzID0gW1wiY2FsY2l0ZS1zaGVsbC1wYW5lbFwiXTtcbiAgY29tcG9uZW50cy5mb3JFYWNoKHRhZ05hbWUgPT4geyBzd2l0Y2ggKHRhZ05hbWUpIHtcbiAgICBjYXNlIFwiY2FsY2l0ZS1zaGVsbC1wYW5lbFwiOlxuICAgICAgaWYgKCFjdXN0b21FbGVtZW50cy5nZXQodGFnTmFtZSkpIHtcbiAgICAgICAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKHRhZ05hbWUsIFNoZWxsUGFuZWwpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gIH0gfSk7XG59XG5kZWZpbmVDdXN0b21FbGVtZW50JDEoKTtcblxuY29uc3QgQ2FsY2l0ZVNoZWxsUGFuZWwgPSBTaGVsbFBhbmVsO1xuY29uc3QgZGVmaW5lQ3VzdG9tRWxlbWVudCA9IGRlZmluZUN1c3RvbUVsZW1lbnQkMTtcblxuZXhwb3J0IHsgQ2FsY2l0ZVNoZWxsUGFuZWwsIGRlZmluZUN1c3RvbUVsZW1lbnQgfTtcbiIsIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWRlc2lnbi1zeXN0ZW0vYmxvYi9tYWluL0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG4gKiB2MS4xMS4wXG4gKi9cbmltcG9ydCB7IGZvcmNlVXBkYXRlIH0gZnJvbSAnQHN0ZW5jaWwvY29yZS9pbnRlcm5hbC9jbGllbnQvaW5kZXguanMnO1xuaW1wb3J0IHsgYyBhcyBjcmVhdGVPYnNlcnZlciB9IGZyb20gJy4vb2JzZXJ2ZXJzLmpzJztcblxuY29uc3Qgb2JzZXJ2ZWQgPSBuZXcgU2V0KCk7XG5sZXQgbXV0YXRpb25PYnNlcnZlcjtcbmNvbnN0IG9ic2VydmVyT3B0aW9ucyA9IHsgY2hpbGRMaXN0OiB0cnVlIH07XG4vKipcbiAqIEhlbHBlciB0byBzZXQgdXAgYSBjb25kaXRpb25hbCBzbG90IGNvbXBvbmVudCBvbiBjb25uZWN0ZWRDYWxsYmFjay5cbiAqXG4gKiBAcGFyYW0gY29tcG9uZW50XG4gKiBAZGVwcmVjYXRlZCBVc2UgYG9uU2xvdGNoYW5nZWAgZXZlbnQgd2l0aCBgc2xvdENoYW5nZUhhc0Fzc2lnbmVkRWxlbWVudGAgRE9NIHV0aWxpdHkgaW5zdGVhZC5cbiAqXG4gKiBgYGBcbiAqIDxzbG90IG9uU2xvdGNoYW5nZT17KGV2ZW50KSA9PiB0aGlzLm15U2xvdEhhc0VsZW1lbnQgPSBzbG90Q2hhbmdlSGFzQXNzaWduZWRFbGVtZW50KGV2ZW50KX0gLz59XG4gKiBgYGBcbiAqL1xuZnVuY3Rpb24gY29ubmVjdENvbmRpdGlvbmFsU2xvdENvbXBvbmVudChjb21wb25lbnQpIHtcbiAgaWYgKCFtdXRhdGlvbk9ic2VydmVyKSB7XG4gICAgbXV0YXRpb25PYnNlcnZlciA9IGNyZWF0ZU9ic2VydmVyKFwibXV0YXRpb25cIiwgcHJvY2Vzc011dGF0aW9ucyk7XG4gIH1cbiAgbXV0YXRpb25PYnNlcnZlci5vYnNlcnZlKGNvbXBvbmVudC5lbCwgb2JzZXJ2ZXJPcHRpb25zKTtcbn1cbi8qKlxuICogSGVscGVyIHRvIHRlYXIgZG93biBhIGNvbmRpdGlvbmFsIHNsb3QgY29tcG9uZW50IG9uIGRpc2Nvbm5lY3RlZENhbGxiYWNrLlxuICpcbiAqIEBwYXJhbSBjb21wb25lbnRcbiAqIEBkZXByZWNhdGVkIFVzZSBgb25TbG90Y2hhbmdlYCBldmVudCB3aXRoIGBzbG90Q2hhbmdlSGFzQXNzaWduZWRFbGVtZW50YCBET00gdXRpbGl0eSBpbnN0ZWFkLlxuICpcbiAqIGBgYFxuICogPHNsb3Qgb25TbG90Y2hhbmdlPXsoZXZlbnQpID0+IHRoaXMubXlTbG90SGFzRWxlbWVudCA9IHNsb3RDaGFuZ2VIYXNBc3NpZ25lZEVsZW1lbnQoZXZlbnQpfSAvPn1cbiAqIGBgYFxuICovXG5mdW5jdGlvbiBkaXNjb25uZWN0Q29uZGl0aW9uYWxTbG90Q29tcG9uZW50KGNvbXBvbmVudCkge1xuICBvYnNlcnZlZC5kZWxldGUoY29tcG9uZW50LmVsKTtcbiAgLy8gd2UgZXhwbGljaXRseSBwcm9jZXNzIHF1ZXVlZCBtdXRhdGlvbnMgYW5kIGRpc2Nvbm5lY3QgYW5kIHJlY29ubmVjdFxuICAvLyB0aGUgb2JzZXJ2ZXIgdW50aWwgTXV0YXRpb25PYnNlcnZlciBnZXRzIGFuIGB1bm9ic2VydmVgIG1ldGhvZFxuICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3doYXR3Zy9kb20vaXNzdWVzLzEyNlxuICBwcm9jZXNzTXV0YXRpb25zKG11dGF0aW9uT2JzZXJ2ZXIudGFrZVJlY29yZHMoKSk7XG4gIG11dGF0aW9uT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICBmb3IgKGNvbnN0IFtlbGVtZW50XSBvZiBvYnNlcnZlZC5lbnRyaWVzKCkpIHtcbiAgICBtdXRhdGlvbk9ic2VydmVyLm9ic2VydmUoZWxlbWVudCwgb2JzZXJ2ZXJPcHRpb25zKTtcbiAgfVxufVxuZnVuY3Rpb24gcHJvY2Vzc011dGF0aW9ucyhtdXRhdGlvbnMpIHtcbiAgbXV0YXRpb25zLmZvckVhY2goKHsgdGFyZ2V0IH0pID0+IHtcbiAgICBmb3JjZVVwZGF0ZSh0YXJnZXQpO1xuICB9KTtcbn1cblxuZXhwb3J0IHsgY29ubmVjdENvbmRpdGlvbmFsU2xvdENvbXBvbmVudCBhcyBjLCBkaXNjb25uZWN0Q29uZGl0aW9uYWxTbG90Q29tcG9uZW50IGFzIGQgfTtcbiIsIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWRlc2lnbi1zeXN0ZW0vYmxvYi9tYWluL0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG4gKiB2MS4xMS4wXG4gKi9cbmNvbnN0IGNsYW1wID0gKHZhbHVlLCBtaW4sIG1heCkgPT4gTWF0aC5tYXgobWluLCBNYXRoLm1pbih2YWx1ZSwgbWF4KSk7XG5jb25zdCBkZWNpbWFsTnVtYmVyUmVnZXggPSBuZXcgUmVnRXhwKC8oPzpcXC4oXFxkKykpPyg/OltlRV0oWystXT9cXGQrKSk/JC8pO1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBxdWFudGl0eSBvZiByZWFsIGRlY2ltYWwgcGxhY2VzIGZvciBhIG51bWJlciwgd2hpY2ggZXhjbHVkZXMgdHJhaWxpbmcgemVyb3MuXG4gKlxuICogQWRhcHRlZCBmcm9tIHtAbGluayBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMDQ1NDUxOC9qYXZhc2NyaXB0LWhvdy10by1yZXRyaWV2ZS10aGUtbnVtYmVyLW9mLWRlY2ltYWxzLW9mLWEtc3RyaW5nLW51bWJlcn0uXG4gKlxuICogQHBhcmFtIGRlY2ltYWwgLSBkZWNpbWFsIHZhbHVlXG4gKiBAcGFyYW0gdmFsdWVcbiAqIEByZXR1cm5zIHtudW1iZXJ9IHRoZSBhbW91bnQgb2YgZGVjaW1hbCBwbGFjZXMgaW4gYSBudW1iZXJcbiAqL1xuY29uc3QgZGVjaW1hbFBsYWNlcyA9ICh2YWx1ZSkgPT4ge1xuICBjb25zdCBtYXRjaCA9IChcIlwiICsgdmFsdWUpLm1hdGNoKGRlY2ltYWxOdW1iZXJSZWdleCk7XG4gIGlmICghbWF0Y2ggfHwgcGFyc2VJbnQobWF0Y2hbMV0pID09PSAwKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cbiAgcmV0dXJuIE1hdGgubWF4KDAsIFxuICAvLyBOdW1iZXIgb2YgZGlnaXRzIHJpZ2h0IG9mIGRlY2ltYWwgcG9pbnQuXG4gIChtYXRjaFsxXSA/IG1hdGNoWzFdLmxlbmd0aCA6IDApIC1cbiAgICAvLyBBZGp1c3QgZm9yIHNjaWVudGlmaWMgbm90YXRpb24uXG4gICAgKG1hdGNoWzJdID8gK21hdGNoWzJdIDogMCkpO1xufTtcbmZ1bmN0aW9uIGdldERlY2ltYWxzKHZhbHVlKSB7XG4gIGlmIChkZWNpbWFsUGxhY2VzKHZhbHVlKSA+IDAgJiYgdmFsdWUgPiAwKSB7XG4gICAgcmV0dXJuIHBhcnNlRmxvYXQoYDAuJHt2YWx1ZS50b1N0cmluZygpLnNwbGl0KFwiLlwiKVsxXX1gKTtcbiAgfVxuICByZXR1cm4gdmFsdWU7XG59XG5mdW5jdGlvbiByZW1hcCh2YWx1ZSwgZnJvbU1pbiwgZnJvbU1heCwgdG9NaW4sIHRvTWF4KSB7XG4gIHJldHVybiAoKHZhbHVlIC0gZnJvbU1pbikgKiAodG9NYXggLSB0b01pbikpIC8gKGZyb21NYXggLSBmcm9tTWluKSArIHRvTWluO1xufVxuLyoqXG4gKiBIZWxwZXIgdG8gZGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgY2xvc2UgdG8gdGhlIGVkZ2Ugb2YgYSByYW5nZSB3aXRoaW4gYSB0aHJlc2hvbGQuXG4gKlxuICogQHBhcmFtIHZhbHVlXG4gKiBAcGFyYW0gcmFuZ2VcbiAqIEBwYXJhbSB0aHJlc2hvbGRcbiAqIEByZXR1cm5zIC0xIGlmIGNsb3NlIHRvIGxvd2VyIGVkZ2UsIDEgaWYgY2xvc2UgdG8gdXBwZXIgZWRnZSwgMCBvdGhlcndpc2UuXG4gKi9cbmZ1bmN0aW9uIGNsb3NlVG9SYW5nZUVkZ2UodmFsdWUsIHJhbmdlLCB0aHJlc2hvbGQpIHtcbiAgcmV0dXJuIHZhbHVlIDwgdGhyZXNob2xkID8gLTEgOiB2YWx1ZSA+IHJhbmdlIC0gdGhyZXNob2xkID8gMSA6IDA7XG59XG5cbmV4cG9ydCB7IGNsb3NlVG9SYW5nZUVkZ2UgYXMgYSwgY2xhbXAgYXMgYywgZGVjaW1hbFBsYWNlcyBhcyBkLCBnZXREZWNpbWFscyBhcyBnLCByZW1hcCBhcyByIH07XG4iLCIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL2Jsb2IvbWFpbi9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxuICogdjEuMTEuMFxuICovXG5pbXBvcnQgeyBCdWlsZCwgZ2V0QXNzZXRQYXRoIH0gZnJvbSAnQHN0ZW5jaWwvY29yZS9pbnRlcm5hbC9jbGllbnQvaW5kZXguanMnO1xuaW1wb3J0IHsgZyBhcyBnZXRTdXBwb3J0ZWRMb2NhbGUgfSBmcm9tICcuL2xvY2FsZS5qcyc7XG5cbmNvbnN0IGNvbXBvbmVudExhbmdUb01lc3NhZ2VCdW5kbGVDYWNoZSA9IHt9O1xuYXN5bmMgZnVuY3Rpb24gZ2V0TWVzc2FnZUJ1bmRsZShsYW5nLCBjb21wb25lbnQpIHtcbiAgY29uc3Qga2V5ID0gYCR7Y29tcG9uZW50fV8ke2xhbmd9YDtcbiAgaWYgKGNvbXBvbmVudExhbmdUb01lc3NhZ2VCdW5kbGVDYWNoZVtrZXldKSB7XG4gICAgcmV0dXJuIGNvbXBvbmVudExhbmdUb01lc3NhZ2VCdW5kbGVDYWNoZVtrZXldO1xuICB9XG4gIGNvbXBvbmVudExhbmdUb01lc3NhZ2VCdW5kbGVDYWNoZVtrZXldID0gZmV0Y2goZ2V0QXNzZXRQYXRoKGAuL2Fzc2V0cy8ke2NvbXBvbmVudH0vdDluL21lc3NhZ2VzXyR7bGFuZ30uanNvbmApKVxuICAgIC50aGVuKChyZXNwKSA9PiB7XG4gICAgaWYgKCFyZXNwLm9rKSB7XG4gICAgICB0aHJvd01lc3NhZ2VGZXRjaEVycm9yKCk7XG4gICAgfVxuICAgIHJldHVybiByZXNwLmpzb24oKTtcbiAgfSlcbiAgICAuY2F0Y2goKCkgPT4gdGhyb3dNZXNzYWdlRmV0Y2hFcnJvcigpKTtcbiAgcmV0dXJuIGNvbXBvbmVudExhbmdUb01lc3NhZ2VCdW5kbGVDYWNoZVtrZXldO1xufVxuZnVuY3Rpb24gdGhyb3dNZXNzYWdlRmV0Y2hFcnJvcigpIHtcbiAgdGhyb3cgbmV3IEVycm9yKFwiY291bGQgbm90IGZldGNoIGNvbXBvbmVudCBtZXNzYWdlIGJ1bmRsZVwiKTtcbn1cbmZ1bmN0aW9uIG1lcmdlTWVzc2FnZXMoY29tcG9uZW50KSB7XG4gIGNvbXBvbmVudC5tZXNzYWdlcyA9IHtcbiAgICAuLi5jb21wb25lbnQuZGVmYXVsdE1lc3NhZ2VzLFxuICAgIC4uLmNvbXBvbmVudC5tZXNzYWdlT3ZlcnJpZGVzLFxuICB9O1xufVxuLyoqXG4gKiBUaGlzIHV0aWxpdHkgc2V0cyB1cCB0aGUgbWVzc2FnZXMgdXNlZCBieSB0aGUgY29tcG9uZW50LiBJdCBzaG91bGQgYmUgYXdhaXRlZCBpbiB0aGUgYGNvbXBvbmVudFdpbGxMb2FkYCBsaWZlY3ljbGUgaG9vay5cbiAqXG4gKiBAcGFyYW0gY29tcG9uZW50XG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHNldFVwTWVzc2FnZXMoY29tcG9uZW50KSB7XG4gIGNvbXBvbmVudC5kZWZhdWx0TWVzc2FnZXMgPSBhd2FpdCBmZXRjaE1lc3NhZ2VzKGNvbXBvbmVudCwgY29tcG9uZW50LmVmZmVjdGl2ZUxvY2FsZSk7XG4gIG1lcmdlTWVzc2FnZXMoY29tcG9uZW50KTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGZldGNoTWVzc2FnZXMoY29tcG9uZW50LCBsYW5nKSB7XG4gIGlmICghQnVpbGQuaXNCcm93c2VyKSB7XG4gICAgcmV0dXJuIHt9O1xuICB9XG4gIGNvbnN0IHsgZWwgfSA9IGNvbXBvbmVudDtcbiAgY29uc3QgdGFnID0gZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuICBjb25zdCBjb21wb25lbnROYW1lID0gdGFnLnJlcGxhY2UoXCJjYWxjaXRlLVwiLCBcIlwiKTtcbiAgcmV0dXJuIGdldE1lc3NhZ2VCdW5kbGUoZ2V0U3VwcG9ydGVkTG9jYWxlKGxhbmcsIFwidDluXCIpLCBjb21wb25lbnROYW1lKTtcbn1cbi8qKlxuICogVGhpcyB1dGlsaXR5IG11c3QgYmUgc2V0IHVwIGZvciB0aGUgY29tcG9uZW50IHRvIHVwZGF0ZSBpdHMgZGVmYXVsdCBtZXNzYWdlIGJ1bmRsZSBpZiB0aGUgbG9jYWxlIGNoYW5nZXMuXG4gKlxuICogSXQgY2FuIGJlIHNldCB1cCBpbiAqKmVpdGhlcioqIG9mIHRoZSBmb2xsb3dpbmcgd2F5czpcbiAqXG4gKiAxLiBjYWxsZWQgZnJvbSBgTG9jYWxpemVkQ29tcG9uZW50YCdzIGBvbkxvY2FsZUNoYW5nZWAgbWV0aG9kIG9yXG4gKiAyLiBjYWxsZWQgZnJvbSBhIHdhdGNoZXIgY29uZmlndXJlZCB0byB3YXRjaCBgTG9jYWxpemVkQ29tcG9uZW50YCdzIGBlZmZlY3RpdmVMb2NhbGVgIHByb3BcbiAqXG4gKiBAcGFyYW0gY29tcG9uZW50XG4gKiBAcGFyYW0gbGFuZ1xuICovXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVNZXNzYWdlcyhjb21wb25lbnQsIGxhbmcpIHtcbiAgY29tcG9uZW50LmRlZmF1bHRNZXNzYWdlcyA9IGF3YWl0IGZldGNoTWVzc2FnZXMoY29tcG9uZW50LCBsYW5nKTtcbiAgbWVyZ2VNZXNzYWdlcyhjb21wb25lbnQpO1xufVxuLyoqXG4gKiBUaGlzIHV0aWxpdHkgc2V0cyB1cCBpbnRlcm5hbHMgZm9yIG1lc3NhZ2VzIHN1cHBvcnQuXG4gKlxuICogSXQgbmVlZHMgdG8gYmUgY2FsbGVkIGluIGBjb25uZWN0ZWRDYWxsYmFja2BcbiAqXG4gKiAqKk5vdGUqKjogdGhpcyBtdXN0IGJlIGNhbGxlZCBhZnRlciBgTG9jYWxpemVkQ29tcG9uZW50YCdzIGBjb25uZWN0TG9jYWxpemVkYCBtZXRob2QuXG4gKlxuICogQHBhcmFtIGNvbXBvbmVudFxuICovXG5mdW5jdGlvbiBjb25uZWN0TWVzc2FnZXMoY29tcG9uZW50KSB7XG4gIGNvbXBvbmVudC5vbk1lc3NhZ2VzQ2hhbmdlID0gZGVmYXVsdE9uTWVzc2FnZXNDaGFuZ2U7XG59XG4vKipcbiAqIFRoaXMgdXRpbGl0eSB0ZWFycyBkb3duIGludGVybmFscyBmb3IgbWVzc2FnZXMgc3VwcG9ydC5cbiAqXG4gKiBJdCBuZWVkcyB0byBiZSBjYWxsZWQgaW4gYGRpc2Nvbm5lY3RlZENhbGxiYWNrYFxuICpcbiAqIEBwYXJhbSBjb21wb25lbnRcbiAqL1xuZnVuY3Rpb24gZGlzY29ubmVjdE1lc3NhZ2VzKGNvbXBvbmVudCkge1xuICBjb21wb25lbnQub25NZXNzYWdlc0NoYW5nZSA9IHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRPbk1lc3NhZ2VzQ2hhbmdlKCkge1xuICBtZXJnZU1lc3NhZ2VzKHRoaXMpO1xufVxuXG5leHBvcnQgeyBjb25uZWN0TWVzc2FnZXMgYXMgYywgZGlzY29ubmVjdE1lc3NhZ2VzIGFzIGQsIHNldFVwTWVzc2FnZXMgYXMgcywgdXBkYXRlTWVzc2FnZXMgYXMgdSB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9