"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-1c1d2f"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-group-badges_2.entry.js":
/*!************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-group-badges_2.entry.js ***!
  \************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   arcgis_group_badges: () => (/* binding */ ArcgisItemBadges),
/* harmony export */   arcgis_group_card: () => (/* binding */ ArcgisGroupCard)
/* harmony export */ });
/* harmony import */ var _index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-92ebb396.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-92ebb396.js");
/* harmony import */ var _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config-eb5f7dc2.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/config-eb5f7dc2.js");
/* harmony import */ var _functional_c82f5ab9_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./functional-c82f5ab9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-c82f5ab9.js");
/* harmony import */ var _languageUtil_22258c90_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./languageUtil-22258c90.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/languageUtil-22258c90.js");
/* harmony import */ var _locale_13e00a75_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./locale-13e00a75.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/locale-13e00a75.js");
/* harmony import */ var _store_6ec1e1e1_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./store-6ec1e1e1.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/store-6ec1e1e1.js");
/* harmony import */ var _index_81d548b7_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./index-81d548b7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-81d548b7.js");
/* harmony import */ var _resize_55d3c55c_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./resize-55d3c55c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/resize-55d3c55c.js");
/* harmony import */ var _loadModules_aaf30bd6_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./loadModules-aaf30bd6.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/loadModules-aaf30bd6.js");
/* harmony import */ var _dom_13f5b00c_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./dom-13f5b00c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/dom-13f5b00c.js");
/* harmony import */ var _store_ff04ba0a_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./store-ff04ba0a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/store-ff04ba0a.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */












function getBadges(group, portal) {
  const badges = [];
  if (portal.id) {
    if (group.capabilities && group.capabilities.includes("updateitemcontrol")) {
      badges.push("SharedUpdate");
    }
    if (group.isOpenData && group.orgId === portal.id) {
      badges.push("OpenData");
    }
    if (portal.featuredItemsGroupQuery && portal.featuredItemsGroupQuery === `id:${group.id}`) {
      badges.push("Gallery");
    }
  }
  if ((group.collaborationInfo && group.collaborationInfo.collaborationId) ||
    (group.capabilities && group.capabilities.includes("distributed"))) {
    badges.push("Collaboration");
  }
  if (!group.membershipAccess && !portal.isPortal && group.orgId !== "none") {
    badges.push("AnyOrg");
  }
  if (group.membershipAccess === "collaboration") {
    badges.push("Partnered");
  }
  // if shared update with no collaboration OR distributed collaboration, only show when group is in the user's org
  if (badges.includes("SharedUpdate") && !badges.includes("Partnered") && group.orgId !== portal.id) {
    badges.splice(badges.indexOf("SharedUpdate"), 1);
  }
  return badges;
}

const arcgisGroupBadgesCss = ":host{display:flex}.badge{display:inline-block;-webkit-margin-end:0.25rem;margin-inline-end:0.25rem}";

const ArcgisItemBadges = class {
  constructor(hostRef) {
    (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.group = undefined;
    this.portal = undefined;
    this.width = "full";
    this.appearance = undefined;
    this.empty = false;
    this.showTooltips = false;
    this.scale = "m";
    this.badges = [];
  }
  componentWillLoad() {
    if (this.group) {
      this.updateBadges(this.group);
    }
  }
  updateBadges(group) {
    var _a;
    this.badges = getBadges(group, this.portal);
    if (!((_a = this.badges) === null || _a === void 0 ? void 0 : _a.length)) {
      this.empty = true;
    }
  }
  render() {
    const { width, scale, badges, showTooltips, appearance } = this;
    return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.H, null, badges.map((badge) => ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-group-badge", { appearance: appearance, key: badge, class: "badge", badgeType: badge, width: width, scale: scale, showTooltip: showTooltips })))));
  }
  get el() { return (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.d)(this); }
  static get watchers() { return {
    "group": ["updateBadges"]
  }; }
};
ArcgisItemBadges.style = arcgisGroupBadgesCss;

const arcgisGroupCardCss = ":host{display:block;min-width:0}.group-card{box-shadow:none;transition-duration:150ms;color:var(--calcite-ui-text-1);background-color:var(--calcite-ui-foreground-1);position:relative;opacity:0;height:100%;display:flex;flex-direction:column;outline-color:transparent;background-color:var(--calcite-ui-foreground-1);transition-property:background-color, outline, outline-offset, opacity;border:1px solid var(--calcite-ui-border-3)}.group-card:focus{outline:2px solid var(--calcite-ui-brand);outline-offset:-2px;z-index:10}.group-card--loaded{opacity:1}.group-card--selected{border-color:var(--calcite-ui-brand)}.group-card--hoverable{cursor:pointer}.group-card__top{padding:1rem}.group-card__hover-text{opacity:0;font-weight:500;font-size:1rem;text-align:center;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;position:absolute;top:0;right:0;bottom:0;left:0;display:flex;justify-content:center;align-items:center;background-color:rgba(21, 21, 21, 0.7);color:white}.group-card__upper{flex:1 1 0%;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;background-color:var(--calcite-ui-foreground-1)}.group-card__upper:hover{background-color:var(--calcite-ui-background)}.group-card__upper:hover .group-card__hover-text,.group-card:focus .group-card__hover-text{opacity:1}.group-card__upper--compact{display:flex;align-items:center;padding-top:0.5rem;padding-bottom:0.5rem;padding-left:0.75rem;padding-right:0.75rem}.group-card__upper--link{text-decoration:none;color:var(--calcite-ui-text-1);outline-color:transparent}.group-card__upper--link:focus{outline:2px solid var(--calcite-ui-brand);outline-offset:2px;z-index:10}.group-card__title__span{transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;position:relative;display:inline;border-style:none;background-color:transparent;padding:0;background-image:linear-gradient(transparent, transparent);background-position-x:0%, 100%;background-position-y:min(1.25em, 100%);background-repeat:no-repeat, no-repeat;background-size:100% 1px, 100% 1px}.group-card--previewed .group-card__title__span{background-image:linear-gradient(var(--calcite-ui-text-3), var(--calcite-ui-text-3))}.group-card__content{display:flex;flex:1 1 0%;flex-direction:column;min-width:0}.group-card__details{display:flex;flex-direction:row;flex-wrap:wrap}.group-card__details--stacked{flex-direction:column}.group-card__detail{font-size:0.875rem;color:var(--calcite-ui-text-2)}.group-card__detail__icon{-webkit-margin-end:0.5rem;margin-inline-end:0.5rem}.group-card__calendar-icon{color:var(--calcite-ui-text-3);-webkit-margin-end:0.5rem;margin-inline-end:0.5rem}.group-card__footer{background-color:var(--calcite-ui-foreground-1);padding-left:1rem;padding-right:1rem;padding-top:0.5rem;padding-bottom:0.5rem;display:flex;align-items:center;margin-top:auto;border-top:1px solid var(--calcite-ui-border-3)}.group-card__footer__start{flex:1 1 0%;display:flex;flex-direction:row;align-items:center;min-width:0;overflow:hidden;-webkit-margin-end:0.75rem;margin-inline-end:0.75rem}.group-card__footer__start--selectable{-webkit-margin-start:1.5rem;margin-inline-start:1.5rem}.group-card__profile-wrap{max-width:100%;padding:0.25rem}.group-card__updated{font-size:0.875rem;color:var(--calcite-ui-text-2)}.group-card__updated--xs{margin-top:0.5rem}.group-card__divider{display:flex;align-items:center;flex:0 0 auto}.group-card__divider:not([empty]):before{content:\"\";height:1.25rem;width:1px;background-color:var(--calcite-ui-border-1);margin-inline:0.75rem}.group-card__details--stacked .group-card__divider:before{display:none}.group-card__divider:first-child:before{display:none}.group-card-flex{display:flex}.group-card-flex-1{flex:1 1 0%;min-width:0}.screen-readers-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.group-card__input{-webkit-margin-end:1rem;margin-inline-end:1rem;margin-top:0.125rem}.group-card__title{font-size:1rem;margin-top:0;margin-bottom:0;padding-top:0;padding-bottom:0;word-wrap:break-word;overflow-wrap:break-word;font-weight:500;line-height:1.375}.group-card__title--compact{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;-webkit-margin-end:1rem;margin-inline-end:1rem}.group-card__summary{font-size:0.875rem;margin:0;margin-top:0.25rem;margin-bottom:0.25rem;padding:0;flex:1 1 0%;line-height:1.25}.group-card__thumbnail{-webkit-margin-end:1rem;margin-inline-end:1rem}.group-card__thumbnail--compact{width:2.75rem;height:2.75rem}.group-card__badges{margin-top:0.25rem}.group-card__owner{min-width:0}.group-card--panel{margin-bottom:0;cursor:pointer;border-bottom:1px solid var(--calcite-ui-border-1);outline:1px solid rgba(0, 0, 0, 0)}.group-card--panel:hover{background-color:var(--calcite-ui-foreground-2)}.group-card--border-top{border-top:1px solid var(--calcite-ui-border-1)}.group-card--border-top:hover{box-shadow:none}.group-card--xs .group-card__top,.group-card--xxs .group-card__top{padding:0.75rem}.group-card--xs .group-card__title--padded,.group-card--xxs .group-card__title--padded{margin-bottom:0.25rem}.group-card--xs .group-card__footer,.group-card--xxs .group-card__footer{padding-top:0.25rem;padding-bottom:0.25rem;padding-left:0.75rem;padding-right:0.75rem}.group-card--xs .group-card__detail,.group-card--xxs .group-card__detail{font-size:0.75rem;margin-top:0.25rem;margin-bottom:0.25rem;line-height:1.35}.group-card--xs .group-card__title,.group-card--xxs .group-card__title{font-size:0.875rem}.group-card--xxs .group-card__thumbnail{width:4.25rem;-webkit-padding-start:0.75rem;padding-inline-start:0.75rem}.group-card--xs .group-card__thumbnail{width:5rem;-webkit-padding-start:0.5rem;padding-inline-start:0.5rem}";

const ArcgisGroupCard = class {
  constructor(hostRef) {
    (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.arcgisGroupCardSelect = (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "arcgisGroupCardSelect", 7);
    this.arcgisGroupBrowserCardPreview = (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "arcgisGroupBrowserCardPreview", 7);
    this.arcgisGroupBrowserInternalUIAction = (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "arcgisGroupBrowserInternalUIAction", 7);
    var _a;
    this.handleResizeEvent = ({ detail }) => {
      this.resize(detail.width);
    };
    this.handleCardClick = () => {
      const { group, preview } = this;
      if (this.link) {
        return;
      }
      if (preview === "top") {
        this.arcgisGroupBrowserCardPreview.emit(group);
        return;
      }
      if (this.radioButton) {
        this.radioButton.checked = true;
        this.arcgisGroupCardSelect.emit({ group, selected: true });
      }
      else if (this.checkbox) {
        this.selected = !this.selected;
        this.arcgisGroupCardSelect.emit({ group, selected: this.selected });
      }
    };
    this.group = undefined;
    this.user = undefined;
    this.portal = undefined;
    this.api = 4;
    this.baseUrl = (_a = _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_1__.c === null || _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_1__.c === void 0 ? void 0 : _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_1__.c.config) === null || _a === void 0 ? void 0 : _a.baseUrl;
    this.selected = undefined;
    this.indeterminate = undefined;
    this.view = "list";
    this.selection = "none";
    this.preview = undefined;
    this.name = undefined;
    this.showOwner = true;
    this.showDateUpdated = true;
    this.showDateCreated = false;
    this.showViewableBy = true;
    this.showSummary = false;
    this.showBadges = true;
    this.link = undefined;
    this.newTab = undefined;
    this.hover = undefined;
    this.formFactor = undefined;
    this.updatedText = "";
    this.createdText = "";
    this.loaded = undefined;
    this.width = undefined;
  }
  /* Calling this setFocus causes calcite to focus here when the user popup is closed... */
  async restoreFocus() {
    if (this.link && this.linkEl) {
      this.linkEl.focus();
      return;
    }
    if (this.preview === "top" && this.sectionEl) {
      this.sectionEl.focus();
      return;
    }
  }
  async componentWillLoad() {
    var _a, _b;
    const { el } = this;
    const locale = await (0,_locale_13e00a75_js__WEBPACK_IMPORTED_MODULE_4__.g)(el);
    this.i18n = locale[0];
    // if we're inside a group browser, use that store, otherwise create one just for this card
    this.store = (0,_store_6ec1e1e1_js__WEBPACK_IMPORTED_MODULE_5__.g)(this.el) || (0,_index_81d548b7_js__WEBPACK_IMPORTED_MODULE_6__.c)({ filters: {} });
    (_a = this.formFactor) !== null && _a !== void 0 ? _a : (this.formFactor = ((_b = this.store) === null || _b === void 0 ? void 0 : _b.state.panel) ? "xs" : "lg");
    (0,_resize_55d3c55c_js__WEBPACK_IMPORTED_MODULE_7__.s)(this.store).observe(this.el);
    this.el.addEventListener("arcgisBrowserResize", this.handleResizeEvent);
    this.updatedText = this.i18n.lastUpdated.replace("${date}", (0,_languageUtil_22258c90_js__WEBPACK_IMPORTED_MODULE_3__.a)(this.group.modified));
    this.createdText = this.i18n.created.replace("${date}", (0,_languageUtil_22258c90_js__WEBPACK_IMPORTED_MODULE_3__.a)(this.group.created));
  }
  async componentDidLoad() {
    await (0,_functional_c82f5ab9_js__WEBPACK_IMPORTED_MODULE_2__.t)(100);
    this.loaded = true;
  }
  disconnectedCallback() {
    var _a, _b, _c, _d;
    (_c = (_b = (_a = this.store) === null || _a === void 0 ? void 0 : _a.state) === null || _b === void 0 ? void 0 : _b.resizeObserver) === null || _c === void 0 ? void 0 : _c.unobserve(this.el);
    (_d = this.el) === null || _d === void 0 ? void 0 : _d.removeEventListener("arcgisBrowserResize", this.handleResizeEvent);
  }
  resize(width) {
    switch (true) {
      case width > _resize_55d3c55c_js__WEBPACK_IMPORTED_MODULE_7__.b.md:
        this.formFactor = "lg";
        break;
      case width > _resize_55d3c55c_js__WEBPACK_IMPORTED_MODULE_7__.b.sm:
        this.formFactor = "md";
        break;
      case width > _resize_55d3c55c_js__WEBPACK_IMPORTED_MODULE_7__.b.xs:
        this.formFactor = "sm";
        break;
      case width > _resize_55d3c55c_js__WEBPACK_IMPORTED_MODULE_7__.b.xxs:
        this.formFactor = "xs";
        break;
      default:
        this.formFactor = "xxs";
        break;
    }
    this.width = width;
  }
  getAccessInfo(access) {
    const info = {
      public: {
        text: this.i18n.everyone,
        icon: "globe"
      },
      private: {
        text: this.i18n.groupMembers,
        icon: "lock"
      },
      org: {
        text: this.i18n.organization,
        icon: "organization"
      }
    };
    return info[access] || info.private;
  }
  renderCompactView() {
    const { group, portal, selection, selected, formFactor, i18n, link, loaded, newTab, showBadges } = this;
    const CardTag = this.link ? "a" : "div";
    const linkAttributes = Object.assign({ href: link }, (newTab ? { target: "_blank", rel: "noopener noreferrer" } : {}));
    return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("section", Object.assign({ class: {
        "group-card": true,
        "group-card--hoverable": selection !== "none",
        [`group-card--${formFactor}`]: true,
        "group-card--loaded": loaded
      }, onMouseOver: () => (this.hover = true), onMouseOut: () => (this.hover = false) }, (link ? {} : { onClick: this.handleCardClick }), { ref: (el) => (this.sectionEl = el) }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)(CardTag, Object.assign({ class: {
        "group-card__upper": true,
        "group-card__upper--link": !!link,
        "group-card__upper--compact": true
      } }, (link ? linkAttributes : {}), { ref: (el) => (this.linkEl = el) }), selection === "single" && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-radio-button", { class: "group-card__input", checked: selected, value: group.title, name: this.name, ref: (el) => (this.radioButton = el), onClick: (e) => {
        e.stopPropagation();
      }, onCalciteRadioButtonChange: () => {
        this.arcgisGroupCardSelect.emit({ group, selected: !selected });
      } }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: "screen-readers-only" }, i18n.select.replace("${title}", group.title)))), selection === "multiple" && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-checkbox", { class: "group-card__input", checked: selected, indeterminate: this.indeterminate, onClick: (e) => {
        e.stopPropagation();
      }, onCalciteCheckboxChange: () => {
        this.arcgisGroupCardSelect.emit({ group, selected: !this.selected });
      }, value: group.id, ref: (el) => (this.checkbox = el) }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: "screen-readers-only" }, group.title))), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "flex-0 group-card__thumbnail group-card__thumbnail--compact" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-group-thumbnail", { group: group, portal: portal, scale: "l" })), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "group-card-flex-1" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("h3", { class: "group-card__title group-card__title--compact" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: "group-card__title__span" }, group.title))), showBadges && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-group-badges", { group: group, portal: portal, class: "group-card__badges--compact", scale: "s", showTooltips: true, width: "narrow" })), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { name: "content-end" }))));
  }
  render() {
    var _a, _b;
    const { group, portal, selection, selected, formFactor, api, i18n, link, loaded, newTab, showDateCreated, showDateUpdated, showOwner, showBadges, showSummary } = this;
    const baseUrl = (_a = this.baseUrl) !== null && _a !== void 0 ? _a : (_b = _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_1__.c.config) === null || _b === void 0 ? void 0 : _b.baseUrl;
    const current = _store_6ec1e1e1_js__WEBPACK_IMPORTED_MODULE_5__.a.preview === this.group.id;
    const topPreview = this.preview === "top";
    const CardTag = this.link ? "a" : "div";
    const linkAttributes = Object.assign({ href: link }, (newTab ? { target: "_blank", rel: "noopener noreferrer" } : {}));
    const topPreviewAttributes = {
      tabIndex: 0,
      role: "button",
      "aria-haspopup": "dialog",
      "aria-labelledby": "open-details",
      onKeyPress: (e) => {
        if (e.key === "Enter" || e.key == " ") {
          e.preventDefault();
          this.handleCardClick();
        }
      }
    };
    const accessInfo = this.getAccessInfo(group.access);
    return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.H, null, this.view === "compact" ? (this.renderCompactView()) : ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("section", Object.assign({ class: {
        "group-card": true,
        "group-card--hoverable": selection !== "none",
        [`group-card--${formFactor}`]: true,
        "group-card--loaded": loaded
      } }, (link ? {} : { onClick: this.handleCardClick }), (topPreview && !link ? topPreviewAttributes : {}), { ref: (el) => (this.sectionEl = el) }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { name: "content-top" }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)(CardTag, Object.assign({ class: { "group-card__upper": true, "group-card__upper--link": !!link } }, (link ? linkAttributes : {}), { onMouseOver: () => (this.hover = true), onMouseOut: () => (this.hover = false) }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "group-card-flex group-card__top" }, selection === "single" && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-radio-button", { class: "group-card__input", checked: selected, value: group.title, name: this.name, ref: (el) => (this.radioButton = el), onClick: (e) => {
        e.stopPropagation();
      }, onCalciteRadioButtonChange: () => {
        this.arcgisGroupCardSelect.emit({ group, selected: !selected });
      } }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: "screen-readers-only" }, i18n.select.replace("${title}", group.title)))), selection === "multiple" && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-checkbox", { class: "group-card__input", checked: selected, indeterminate: this.indeterminate, onClick: (e) => {
        e.stopPropagation();
      }, onCalciteCheckboxChange: () => {
        this.arcgisGroupCardSelect.emit({ group, selected: !this.selected });
      }, value: group.id, ref: (el) => (this.checkbox = el) }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: "screen-readers-only" }, group.title))), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "flex-0 group-card__thumbnail" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-group-thumbnail", { group: group, portal: portal, scale: "xl" })), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "group-card-flex-1" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "group-card-flex" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "group-card__content" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("h3", { class: {
        "group-card__title": true,
        "group-card__title--padded": showSummary && !!group.snippet
      } }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: "group-card__title__span" }, group.title)), showSummary && group.snippet && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("p", { class: "group-card__summary" }, group.snippet.length > 250
      ? `${group.snippet.substring(0, 250)}â€¦`
      : group.snippet)), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: {
        "group-card__details": true,
        "group-card__details--stacked": this.width < 580
      } }, showDateCreated && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: "group-card__detail group-card__divider" }, this.createdText)), showDateUpdated && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: "group-card__detail group-card__divider" }, this.updatedText)), this.showViewableBy && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: "group-card__detail group-card__divider" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { icon: accessInfo.icon, scale: "s", class: "group-card__detail__icon" }), " ", i18n.viewableBy.replace("${level}", accessInfo.text))), showBadges && this.width >= _resize_55d3c55c_js__WEBPACK_IMPORTED_MODULE_7__.b.sm && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-group-badges", { appearance: this.hover ? "outline-fill" : "solid", group: group, portal: portal, width: this.width < 840 ? "narrow" : "full", class: "group-card__badges group-card__detail group-card__divider", scale: "s", showTooltips: true }))), showBadges && this.width < _resize_55d3c55c_js__WEBPACK_IMPORTED_MODULE_7__.b.sm && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-group-badges", { appearance: this.hover ? "outline-fill" : "solid", group: group, portal: portal, width: this.width < _resize_55d3c55c_js__WEBPACK_IMPORTED_MODULE_7__.b.xxs ? "narrow" : "full", class: "group-card__badges", scale: "s", showTooltips: true })))), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { name: "content-end" })))), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "group-card__footer", onClick: (e) => {
        e.stopPropagation();
      } }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "group-card__footer__start" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { name: "actions-start" }), showOwner && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "group-card__profile-wrap", onClick: (e) => {
        e.preventDefault();
        e.stopPropagation();
      } }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-user-popup", { underline: true, username: group.owner, api: api, portal: portal, baseUrl: baseUrl, class: "group-card__owner", onArcgisUserPopupInternalUIAction: (e) => {
        e.stopPropagation();
        this.arcgisGroupBrowserInternalUIAction.emit(e.detail);
      } })))), this.preview === "action" && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-button", { scale: "s", appearance: current ? "solid" : "outline-fill", kind: "neutral", onClick: (e) => {
        e.preventDefault();
        e.stopPropagation();
        this.arcgisGroupBrowserCardPreview.emit(this.group);
      } }, current ? i18n.hidePreview : i18n.preview)), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { name: "actions-end" }))))));
  }
  get el() { return (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.d)(this); }
};
ArcgisGroupCard.style = arcgisGroupCardCss;




/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/config-eb5f7dc2.js":
/*!************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/config-eb5f7dc2.js ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ configState),
/* harmony export */   o: () => (/* binding */ onConfigChange)
/* harmony export */ });
/* harmony import */ var _index_81d548b7_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-81d548b7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-81d548b7.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */


const configStore = (0,_index_81d548b7_js__WEBPACK_IMPORTED_MODULE_0__.c)({
  portal: null,
  user: null,
  api: 4,
  scale: "m"
});
const configState = configStore.state;
const onConfigChange = configStore.onChange;




/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-c82f5ab9.js":
/*!****************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-c82f5ab9.js ***!
  \****************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ arrayToLookupMap),
/* harmony export */   b: () => (/* binding */ unique),
/* harmony export */   c: () => (/* binding */ throttle),
/* harmony export */   d: () => (/* binding */ debounce),
/* harmony export */   e: () => (/* binding */ escapeRegExp),
/* harmony export */   f: () => (/* binding */ arraysAreEquivalent),
/* harmony export */   g: () => (/* binding */ chunk),
/* harmony export */   i: () => (/* binding */ isDefined),
/* harmony export */   m: () => (/* binding */ minDelay),
/* harmony export */   t: () => (/* binding */ timeout),
/* harmony export */   u: () => (/* binding */ uniqueBy)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */
/**
 * Call a function only after it has not been called for n milliseconds
 * @param fn    - function to call
 * @param delay - delay in milliseconds
 */
const debounce = (fn, delay) => {
  let timeout;
  let status = "idle";
  function flush(...args) {
    status = "flushed";
    return debounced(...args);
  }
  function invoke(...args) {
    status = "invoked";
    return debounced(...args);
  }
  function cancel(...args) {
    status = "cancelled";
    return debounced(...args);
  }
  function getStatus() {
    return status;
  }
  const debounced = (...args) => new Promise((resolve) => {
    switch (status) {
      case "flushed":
        status = "idle";
        if (timeout) {
          clearTimeout(timeout);
          resolve(fn(...args));
        }
        else {
          resolve(null);
        }
        break;
      case "invoked":
        clearTimeout(timeout);
        status = "idle";
        resolve(fn(...args));
        break;
      case "cancelled":
        clearTimeout(timeout);
        status = "idle";
        resolve(null);
        break;
      default:
        if (timeout) {
          clearTimeout(timeout);
        }
        status = "pending";
        timeout = setTimeout(() => {
          status = "idle";
          return resolve(fn(...args));
        }, delay);
        break;
    }
  });
  debounced.flush = flush;
  debounced.invoke = invoke;
  debounced.cancel = cancel;
  debounced.getStatus = getStatus;
  return debounced;
};
/**
 * Call a function only after n milliseconds have elapsed
 * @param fn    - function to call
 * @param delay - delay in milliseconds
 */
const throttle = (fn, delay) => {
  let timeout;
  return (...args) => new Promise((resolve) => {
    if (timeout) {
      return;
    }
    timeout = setTimeout(() => {
      clearTimeout(timeout);
      timeout = undefined;
      resolve(fn(...args));
    }, delay);
  });
};
function escapeRegExp(str) {
  return str.replace(/[.*+?^${}()|[\]\\]/g, "\\$&"); // $& means the whole matched string
}
function isDefined(value) {
  return value !== undefined && value !== null;
}
/**
 * Set a minimum time for a promise to resolve (useful for preventing flash of loaders)
 */
async function minDelay(promise, minDelay) {
  await Promise.all([promise, timeout(minDelay)]);
  return promise;
}
/**
 * Helper method to inline setTimeout as an await in async functions
 */
function timeout(ms) {
  return new Promise((resolve) => setTimeout(resolve, ms));
}
const arrayToLookupMap = (dataArr, getKeyAndItem) => Object.fromEntries((dataArr || []).map((item) => {
  const { key, data } = getKeyAndItem(item);
  return [key, data];
}));
/**
 * Check whether two arrays have the same number of elements
 * and whether they contain the same elements
 * regardless of order
 */
const arraysAreEquivalent = (arr1, arr2) => arr1.length === arr2.length && arr1.reduce((memo, str) => memo && arr2.indexOf(str) > -1, true);
function uniqueBy(myArr, getItemId) {
  const resultArr = [];
  const lookupMap = {};
  myArr.forEach((item) => {
    const id = getItemId(item);
    if (lookupMap[id] == null) {
      lookupMap[id] = item;
      resultArr.push(item);
    }
  });
  return resultArr;
}
function unique(myArr) {
  const primitives = { boolean: {}, number: {}, string: {} };
  const objs = [];
  return myArr.filter((item) => {
    let type = typeof item;
    if (type in primitives) {
      return primitives[type].hasOwnProperty(item) ? false : (primitives[type][item] = true);
    }
    else {
      return objs.indexOf(item) >= 0 ? false : objs.push(item);
    }
  });
}
const chunk = (arr, size) => [...Array(Math.ceil(arr.length / size))].map((_, i) => arr.slice(size * i, size + size * i));




/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-81d548b7.js":
/*!***********************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-81d548b7.js ***!
  \***********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ createStore)
/* harmony export */ });
/* harmony import */ var _index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-92ebb396.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-92ebb396.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */


const appendToMap = (map, propName, value) => {
    const items = map.get(propName);
    if (!items) {
        map.set(propName, [value]);
    }
    else if (!items.includes(value)) {
        items.push(value);
    }
};
const debounce = (fn, ms) => {
    let timeoutId;
    return (...args) => {
        if (timeoutId) {
            clearTimeout(timeoutId);
        }
        timeoutId = setTimeout(() => {
            timeoutId = 0;
            fn(...args);
        }, ms);
    };
};

/**
 * Check if a possible element isConnected.
 * The property might not be there, so we check for it.
 *
 * We want it to return true if isConnected is not a property,
 * otherwise we would remove these elements and would not update.
 *
 * Better leak in Edge than to be useless.
 */
const isConnected = (maybeElement) => !('isConnected' in maybeElement) || maybeElement.isConnected;
const cleanupElements = debounce((map) => {
    for (let key of map.keys()) {
        map.set(key, map.get(key).filter(isConnected));
    }
}, 2000);
const stencilSubscription = () => {
    if (typeof _index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.g !== 'function') {
        // If we are not in a stencil project, we do nothing.
        // This function is not really exported by @stencil/core.
        return {};
    }
    const elmsToUpdate = new Map();
    return {
        dispose: () => elmsToUpdate.clear(),
        get: (propName) => {
            const elm = (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.g)();
            if (elm) {
                appendToMap(elmsToUpdate, propName, elm);
            }
        },
        set: (propName) => {
            const elements = elmsToUpdate.get(propName);
            if (elements) {
                elmsToUpdate.set(propName, elements.filter(_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.f));
            }
            cleanupElements(elmsToUpdate);
        },
        reset: () => {
            elmsToUpdate.forEach((elms) => elms.forEach(_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.f));
            cleanupElements(elmsToUpdate);
        },
    };
};

const unwrap = (val) => (typeof val === 'function' ? val() : val);
const createObservableMap = (defaultState, shouldUpdate = (a, b) => a !== b) => {
    const unwrappedState = unwrap(defaultState);
    let states = new Map(Object.entries(unwrappedState !== null && unwrappedState !== void 0 ? unwrappedState : {}));
    const handlers = {
        dispose: [],
        get: [],
        set: [],
        reset: [],
    };
    const reset = () => {
        var _a;
        // When resetting the state, the default state may be a function - unwrap it to invoke it.
        // otherwise, the state won't be properly reset
        states = new Map(Object.entries((_a = unwrap(defaultState)) !== null && _a !== void 0 ? _a : {}));
        handlers.reset.forEach((cb) => cb());
    };
    const dispose = () => {
        // Call first dispose as resetting the state would
        // cause less updates ;)
        handlers.dispose.forEach((cb) => cb());
        reset();
    };
    const get = (propName) => {
        handlers.get.forEach((cb) => cb(propName));
        return states.get(propName);
    };
    const set = (propName, value) => {
        const oldValue = states.get(propName);
        if (shouldUpdate(value, oldValue, propName)) {
            states.set(propName, value);
            handlers.set.forEach((cb) => cb(propName, value, oldValue));
        }
    };
    const state = (typeof Proxy === 'undefined'
        ? {}
        : new Proxy(unwrappedState, {
            get(_, propName) {
                return get(propName);
            },
            ownKeys(_) {
                return Array.from(states.keys());
            },
            getOwnPropertyDescriptor() {
                return {
                    enumerable: true,
                    configurable: true,
                };
            },
            has(_, propName) {
                return states.has(propName);
            },
            set(_, propName, value) {
                set(propName, value);
                return true;
            },
        }));
    const on = (eventName, callback) => {
        handlers[eventName].push(callback);
        return () => {
            removeFromArray(handlers[eventName], callback);
        };
    };
    const onChange = (propName, cb) => {
        const unSet = on('set', (key, newValue) => {
            if (key === propName) {
                cb(newValue);
            }
        });
        // We need to unwrap the defaultState because it might be a function.
        // Otherwise we might not be sending the right reset value.
        const unReset = on('reset', () => cb(unwrap(defaultState)[propName]));
        return () => {
            unSet();
            unReset();
        };
    };
    const use = (...subscriptions) => {
        const unsubs = subscriptions.reduce((unsubs, subscription) => {
            if (subscription.set) {
                unsubs.push(on('set', subscription.set));
            }
            if (subscription.get) {
                unsubs.push(on('get', subscription.get));
            }
            if (subscription.reset) {
                unsubs.push(on('reset', subscription.reset));
            }
            if (subscription.dispose) {
                unsubs.push(on('dispose', subscription.dispose));
            }
            return unsubs;
        }, []);
        return () => unsubs.forEach((unsub) => unsub());
    };
    const forceUpdate = (key) => {
        const oldValue = states.get(key);
        handlers.set.forEach((cb) => cb(key, oldValue, oldValue));
    };
    return {
        state,
        get,
        set,
        on,
        onChange,
        use,
        dispose,
        reset,
        forceUpdate,
    };
};
const removeFromArray = (array, item) => {
    const index = array.indexOf(item);
    if (index >= 0) {
        array[index] = array[array.length - 1];
        array.length--;
    }
};

const createStore = (defaultState, shouldUpdate) => {
    const map = createObservableMap(defaultState, shouldUpdate);
    map.use(stencilSubscription());
    return map;
};




/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/languageUtil-22258c90.js":
/*!******************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/languageUtil-22258c90.js ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   C: () => (/* binding */ CSS_UTILITY),
/* harmony export */   a: () => (/* binding */ formatDate),
/* harmony export */   f: () => (/* binding */ formatNumber),
/* harmony export */   g: () => (/* binding */ getElementDir),
/* harmony export */   l: () => (/* binding */ languageMap)
/* harmony export */ });
/* harmony import */ var _loadModules_aaf30bd6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./loadModules-aaf30bd6.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/loadModules-aaf30bd6.js");
/* harmony import */ var _dom_13f5b00c_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./dom-13f5b00c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/dom-13f5b00c.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */



const languageMap = new Map([
  ["ar", "ar"],
  ["bg", "bg"],
  ["bs", "bs"],
  ["ca", "ca"],
  ["cs", "cs"],
  ["da", "da"],
  ["de", "de"],
  ["el", "el"],
  ["en", "en"],
  ["es", "es"],
  ["et", "et"],
  ["fi", "fi"],
  ["fr", "fr"],
  ["he", "he"],
  ["hr", "hr"],
  ["hu", "hu"],
  ["id", "id"],
  ["it", "it"],
  ["ja", "ja"],
  ["ko", "ko"],
  ["lt", "lt"],
  ["lv", "lv"],
  ["nb", "nb"],
  ["nl", "nl"],
  ["pl", "pl"],
  ["pt-br", "pt-BR"],
  ["pt-pt", "pt-PT"],
  ["ro", "ro"],
  ["ru", "ru"],
  ["sk", "sk"],
  ["sl", "sl"],
  ["sr", "sr"],
  ["sv", "sv"],
  ["th", "th"],
  ["tr", "tr"],
  ["uk", "uk"],
  ["vi", "vi"],
  ["zh-cn", "zh-CN"],
  ["zh-hk", "zh-HK"],
  ["zh-tw", "zh-TW"]
]);
// rtl
function getElementDir(el) {
  return getElementProp(el, "dir", "ltr");
}
function getElementProp(el, prop, value) {
  const closestWithProp = (0,_dom_13f5b00c_js__WEBPACK_IMPORTED_MODULE_1__.c)(el, `[${prop}]`);
  return closestWithProp ? closestWithProp.getAttribute(prop) : value;
}
// css
const CSS_UTILITY = {
  rtl: "arcgis--rtl"
};
async function formatNumber(number, options) {
  const { api, type, places } = options || {};
  if (api === 4) {
    const [intl] = await (0,_loadModules_aaf30bd6_js__WEBPACK_IMPORTED_MODULE_0__.l)(["esri/intl"]);
    const numberFormatIntlOptions = intl.convertNumberFormatToIntlOptions({
      places,
      style: type,
      digitSeparator: true
    });
    return intl.formatNumber(number, Object.assign(Object.assign({}, numberFormatIntlOptions), { style: type }));
  }
  const [dojoNumber] = await (0,_loadModules_aaf30bd6_js__WEBPACK_IMPORTED_MODULE_0__.l)(["dojo/number"]);
  return dojoNumber.format(number, {
    type,
    places,
    pattern: options === null || options === void 0 ? void 0 : options.pattern
  });
}
const cache = {};
function formatDate(date) {
  const lang = document.documentElement.lang;
  const dayShortMonthYear = {
    year: "numeric",
    month: "short",
    day: "numeric"
  };
  if (!cache[lang]) {
    cache[lang] = new Intl.DateTimeFormat(document.documentElement.lang, dayShortMonthYear);
  }
  return cache[lang].format(date);
}




/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/locale-13e00a75.js":
/*!************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/locale-13e00a75.js ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ getComponentClosestLanguage),
/* harmony export */   g: () => (/* binding */ getLocaleComponentStrings)
/* harmony export */ });
/* harmony import */ var _dom_13f5b00c_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dom-13f5b00c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/dom-13f5b00c.js");
/* harmony import */ var _languageUtil_22258c90_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./languageUtil-22258c90.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/languageUtil-22258c90.js");
/* harmony import */ var _index_92ebb396_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./index-92ebb396.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-92ebb396.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */




// https://medium.com/stencil-tricks/implementing-internationalisation-i18n-with-stencil-5e6559554117
function getComponentClosestLanguage(element) {
  var _a, _b, _c;
  const closestElement = (_a = (0,_dom_13f5b00c_js__WEBPACK_IMPORTED_MODULE_0__.c)(element, "[lang]")) !== null && _a !== void 0 ? _a : (_c = (_b = element.shadowRoot) === null || _b === void 0 ? void 0 : _b.ownerDocument) === null || _c === void 0 ? void 0 : _c.documentElement;
  // language set by the calling application or browser. defaults to english.
  const lang = ((closestElement === null || closestElement === void 0 ? void 0 : closestElement.lang) || (navigator === null || navigator === void 0 ? void 0 : navigator.language) || "en").toLowerCase();
  if (_languageUtil_22258c90_js__WEBPACK_IMPORTED_MODULE_1__.l.has(lang)) {
    return _languageUtil_22258c90_js__WEBPACK_IMPORTED_MODULE_1__.l.get(lang);
  }
  else {
    // "ru-RU" maps to "ru" use case
    if (_languageUtil_22258c90_js__WEBPACK_IMPORTED_MODULE_1__.l.has(lang.slice(0, 2))) {
      return _languageUtil_22258c90_js__WEBPACK_IMPORTED_MODULE_1__.l.get(lang.slice(0, 2));
    }
    else {
      return "en";
    }
  }
}
function getComponentClosestLanguageIntl(element) {
  var _a, _b, _c;
  // it's OK if we don't have the 4 letter language file for it
  // 4 letter language code needed for formatting numbers
  const closestElement = (_a = (0,_dom_13f5b00c_js__WEBPACK_IMPORTED_MODULE_0__.c)(element, "[lang]")) !== null && _a !== void 0 ? _a : (_c = (_b = element.shadowRoot) === null || _b === void 0 ? void 0 : _b.ownerDocument) === null || _c === void 0 ? void 0 : _c.documentElement;
  // language set by the calling application or browser. defaults to english.
  const lang = ((closestElement === null || closestElement === void 0 ? void 0 : closestElement.lang) || (navigator === null || navigator === void 0 ? void 0 : navigator.language) || "en").toLowerCase();
  if (_languageUtil_22258c90_js__WEBPACK_IMPORTED_MODULE_1__.l.has(lang)) {
    return _languageUtil_22258c90_js__WEBPACK_IMPORTED_MODULE_1__.l.get(lang);
  }
  else {
    if (_languageUtil_22258c90_js__WEBPACK_IMPORTED_MODULE_1__.l.has(lang.slice(0, 2))) {
      // we support the 2 letter coded language
      // e.g. it-CH vs it
      return lang;
    }
    else {
      return "en";
    }
  }
}
function fetchLocaleStringsForComponent(componentName, locale) {
  return new Promise((resolve, reject) => {
    fetch((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_2__.a)(`../arcgis-app-assets/i18n/${componentName}.i18n.${locale}.json`)).then((result) => {
      if (result.ok)
        resolve(result.json());
      else
        reject();
    }, () => reject());
  });
}
const stringCache = {};
function fetchLocaleStringsFromCache(componentName, locale) {
  const id = `${componentName}${locale}`;
  if (!stringCache[id]) {
    stringCache[id] = fetchLocaleStringsForComponent(componentName, locale);
  }
  return stringCache[id];
}
/**
 * Get strings and language codes.
 * This method returns 2 language codes.
 * The first one returns a code that's also supported as a language file.
 * The second one returns a code where there is support for the first 2 letters of the code as part of a language file,
 * but will return the original 4 letter code from the page.
 * E.g. For "it-ch" it will return "it" as the first language code and "it-ch" as the second.
 * The second one is required for esri.intl.setLocale() to get the correct formatting.
 *
 * If a tagName is provided it will overwite the element's tagName
 *
 *  @return [ strings, first language code, second language code]
 */
async function getLocaleComponentStrings(element, tagName) {
  const componentName = tagName || element.tagName.toLowerCase();
  const componentLanguage = getComponentClosestLanguage(element);
  const componentLanguageIntl = getComponentClosestLanguageIntl(element);
  let strings;
  try {
    strings = await fetchLocaleStringsFromCache(componentName, componentLanguage);
  }
  catch (e) {
    console.warn(`no locale for ${componentName} (${componentLanguage}) loading default locale en.`);
    strings = await fetchLocaleStringsFromCache(componentName, "en");
  }
  return [strings, componentLanguage, componentLanguageIntl];
}




/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/resize-55d3c55c.js":
/*!************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/resize-55d3c55c.js ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   b: () => (/* binding */ breakpoints),
/* harmony export */   s: () => (/* binding */ setupResizeObserver)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */
const breakpoints = {
  xxs: 320,
  xs: 480,
  sm: 640,
  md: 768,
  lg: 1024,
  xl: 1280
};
function setupResizeObserver(store) {
  var _a;
  var _b;
  (_a = (_b = store.state).resizeObserver) !== null && _a !== void 0 ? _a : (_b.resizeObserver = new ResizeObserver(resizeHandler));
  return store.state.resizeObserver;
}
/**
 * resize handler will be called when items get resized
 * an event is dispatched on each element, passing the new width and height
 */
function resizeHandler(entries) {
  entries.forEach((entry) => {
    if (entry.contentRect.width > 0) {
      const event = new CustomEvent("arcgisBrowserResize", {
        detail: { width: entry.contentRect.width, height: entry.contentRect.height }
      });
      entry.target.dispatchEvent(event);
    }
  });
}




/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/store-6ec1e1e1.js":
/*!***********************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/store-6ec1e1e1.js ***!
  \***********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ groupBrowserState),
/* harmony export */   g: () => (/* binding */ getGroupBrowserStore)
/* harmony export */ });
/* harmony import */ var _index_81d548b7_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-81d548b7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-81d548b7.js");
/* harmony import */ var _store_ff04ba0a_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./store-ff04ba0a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/store-ff04ba0a.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */



function getGroupBrowserStore(el) {
  return (0,_store_ff04ba0a_js__WEBPACK_IMPORTED_MODULE_1__.g)(el, "arcgis-group-browser");
}
const GroupBrowserStore = (0,_index_81d548b7_js__WEBPACK_IMPORTED_MODULE_0__.c)({ filters: {} });
const groupBrowserState = GroupBrowserStore.state;




/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/store-ff04ba0a.js":
/*!***********************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/store-ff04ba0a.js ***!
  \***********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ onBrowserFilterRemove),
/* harmony export */   g: () => (/* binding */ getStore),
/* harmony export */   o: () => (/* binding */ onPreviewChange)
/* harmony export */ });
/* harmony import */ var _dom_13f5b00c_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dom-13f5b00c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/dom-13f5b00c.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */


const onBrowserFilterRemove = (id, store, callback) => {
  // @ts-ignore
  store.onChange("filters", (filters) => {
    if (!filters[id] || !filters[id].value) {
      callback();
    }
  });
};
const onPreviewChange = (store, callback) => {
  // @ts-ignore
  store.onChange("preview", (preview) => {
    callback();
  });
};
const STORE_LOOKUP = new Map();
function getStore(el, browserTag) {
  const existingStore = STORE_LOOKUP.get(el);
  if (existingStore) {
    return existingStore;
  }
  const browser = (0,_dom_13f5b00c_js__WEBPACK_IMPORTED_MODULE_0__.c)(el, browserTag);
  if (browser) {
    STORE_LOOKUP.set(el, browser.store);
    return browser.store;
  }
  return null;
}




/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXBwLWNvbXBvbmVudHNfZGlzdF9lc21fYXJjZ2lzLTFjMWQyZi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDNkc7QUFDckQ7QUFDQTtBQUNLO0FBQ1M7QUFDa0I7QUFDakM7QUFDMkI7QUFDL0M7QUFDUjtBQUNFOztBQUU3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtRkFBbUYsU0FBUztBQUM1RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxvQ0FBb0MsYUFBYSxPQUFPLHFCQUFxQiwyQkFBMkIsMEJBQTBCOztBQUVsSTtBQUNBO0FBQ0EsSUFBSSxxREFBZ0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGlEQUFpRDtBQUM3RCxZQUFZLHFEQUFDLENBQUMsaURBQUksK0JBQStCLHFEQUFDLHlCQUF5Qiw2SEFBNkg7QUFDeE07QUFDQSxhQUFhLE9BQU8scURBQVU7QUFDOUIsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGtDQUFrQyxjQUFjLFlBQVksWUFBWSxnQkFBZ0IsMEJBQTBCLCtCQUErQixnREFBZ0Qsa0JBQWtCLFVBQVUsWUFBWSxhQUFhLHNCQUFzQiwwQkFBMEIsZ0RBQWdELHVFQUF1RSw0Q0FBNEMsa0JBQWtCLDBDQUEwQyxvQkFBb0IsV0FBVyxvQkFBb0IsVUFBVSxzQkFBc0IscUNBQXFDLHVCQUF1QixlQUFlLGlCQUFpQixhQUFhLHdC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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0EsK0JBQStCLHNCQUFzQjtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLFlBQVk7QUFDdEI7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixXQUFXLFlBQVk7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRWlNOzs7Ozs7Ozs7Ozs7Ozs7O0FDN0lqTTtBQUNBO0FBQ0E7QUFDQTtBQUM2RTs7QUFFN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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REFBaUM7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUUyRSIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FwcC1jb21wb25lbnRzL2Rpc3QvZXNtL2FyY2dpcy1ncm91cC1iYWRnZXNfMi5lbnRyeS5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcHAtY29tcG9uZW50cy9kaXN0L2VzbS9jb25maWctZWI1ZjdkYzIuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYW5hbHlzaXMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYXBwLWNvbXBvbmVudHMvZGlzdC9lc20vZnVuY3Rpb25hbC1jODJmNWFiOS5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcHAtY29tcG9uZW50cy9kaXN0L2VzbS9pbmRleC04MWQ1NDhiNy5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcHAtY29tcG9uZW50cy9kaXN0L2VzbS9sYW5ndWFnZVV0aWwtMjIyNThjOTAuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYW5hbHlzaXMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYXBwLWNvbXBvbmVudHMvZGlzdC9lc20vbG9jYWxlLTEzZTAwYTc1LmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FwcC1jb21wb25lbnRzL2Rpc3QvZXNtL3Jlc2l6ZS01NWQzYzU1Yy5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcHAtY29tcG9uZW50cy9kaXN0L2VzbS9zdG9yZS02ZWMxZTFlMS5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcHAtY29tcG9uZW50cy9kaXN0L2VzbS9zdG9yZS1mZjA0YmEwYS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiB2My4wLjk5XG4gKi9cbmltcG9ydCB7IHIgYXMgcmVnaXN0ZXJJbnN0YW5jZSwgaCwgSCBhcyBIb3N0LCBkIGFzIGdldEVsZW1lbnQsIGMgYXMgY3JlYXRlRXZlbnQgfSBmcm9tICcuL2luZGV4LTkyZWJiMzk2LmpzJztcbmltcG9ydCB7IGMgYXMgY29uZmlnU3RhdGUgfSBmcm9tICcuL2NvbmZpZy1lYjVmN2RjMi5qcyc7XG5pbXBvcnQgeyB0IGFzIHRpbWVvdXQgfSBmcm9tICcuL2Z1bmN0aW9uYWwtYzgyZjVhYjkuanMnO1xuaW1wb3J0IHsgYSBhcyBmb3JtYXREYXRlIH0gZnJvbSAnLi9sYW5ndWFnZVV0aWwtMjIyNThjOTAuanMnO1xuaW1wb3J0IHsgZyBhcyBnZXRMb2NhbGVDb21wb25lbnRTdHJpbmdzIH0gZnJvbSAnLi9sb2NhbGUtMTNlMDBhNzUuanMnO1xuaW1wb3J0IHsgZyBhcyBnZXRHcm91cEJyb3dzZXJTdG9yZSwgYSBhcyBncm91cEJyb3dzZXJTdGF0ZSB9IGZyb20gJy4vc3RvcmUtNmVjMWUxZTEuanMnO1xuaW1wb3J0IHsgYyBhcyBjcmVhdGVTdG9yZSB9IGZyb20gJy4vaW5kZXgtODFkNTQ4YjcuanMnO1xuaW1wb3J0IHsgcyBhcyBzZXR1cFJlc2l6ZU9ic2VydmVyLCBiIGFzIGJyZWFrcG9pbnRzIH0gZnJvbSAnLi9yZXNpemUtNTVkM2M1NWMuanMnO1xuaW1wb3J0ICcuL2xvYWRNb2R1bGVzLWFhZjMwYmQ2LmpzJztcbmltcG9ydCAnLi9kb20tMTNmNWIwMGMuanMnO1xuaW1wb3J0ICcuL3N0b3JlLWZmMDRiYTBhLmpzJztcblxuZnVuY3Rpb24gZ2V0QmFkZ2VzKGdyb3VwLCBwb3J0YWwpIHtcbiAgY29uc3QgYmFkZ2VzID0gW107XG4gIGlmIChwb3J0YWwuaWQpIHtcbiAgICBpZiAoZ3JvdXAuY2FwYWJpbGl0aWVzICYmIGdyb3VwLmNhcGFiaWxpdGllcy5pbmNsdWRlcyhcInVwZGF0ZWl0ZW1jb250cm9sXCIpKSB7XG4gICAgICBiYWRnZXMucHVzaChcIlNoYXJlZFVwZGF0ZVwiKTtcbiAgICB9XG4gICAgaWYgKGdyb3VwLmlzT3BlbkRhdGEgJiYgZ3JvdXAub3JnSWQgPT09IHBvcnRhbC5pZCkge1xuICAgICAgYmFkZ2VzLnB1c2goXCJPcGVuRGF0YVwiKTtcbiAgICB9XG4gICAgaWYgKHBvcnRhbC5mZWF0dXJlZEl0ZW1zR3JvdXBRdWVyeSAmJiBwb3J0YWwuZmVhdHVyZWRJdGVtc0dyb3VwUXVlcnkgPT09IGBpZDoke2dyb3VwLmlkfWApIHtcbiAgICAgIGJhZGdlcy5wdXNoKFwiR2FsbGVyeVwiKTtcbiAgICB9XG4gIH1cbiAgaWYgKChncm91cC5jb2xsYWJvcmF0aW9uSW5mbyAmJiBncm91cC5jb2xsYWJvcmF0aW9uSW5mby5jb2xsYWJvcmF0aW9uSWQpIHx8XG4gICAgKGdyb3VwLmNhcGFiaWxpdGllcyAmJiBncm91cC5jYXBhYmlsaXRpZXMuaW5jbHVkZXMoXCJkaXN0cmlidXRlZFwiKSkpIHtcbiAgICBiYWRnZXMucHVzaChcIkNvbGxhYm9yYXRpb25cIik7XG4gIH1cbiAgaWYgKCFncm91cC5tZW1iZXJzaGlwQWNjZXNzICYmICFwb3J0YWwuaXNQb3J0YWwgJiYgZ3JvdXAub3JnSWQgIT09IFwibm9uZVwiKSB7XG4gICAgYmFkZ2VzLnB1c2goXCJBbnlPcmdcIik7XG4gIH1cbiAgaWYgKGdyb3VwLm1lbWJlcnNoaXBBY2Nlc3MgPT09IFwiY29sbGFib3JhdGlvblwiKSB7XG4gICAgYmFkZ2VzLnB1c2goXCJQYXJ0bmVyZWRcIik7XG4gIH1cbiAgLy8gaWYgc2hhcmVkIHVwZGF0ZSB3aXRoIG5vIGNvbGxhYm9yYXRpb24gT1IgZGlzdHJpYnV0ZWQgY29sbGFib3JhdGlvbiwgb25seSBzaG93IHdoZW4gZ3JvdXAgaXMgaW4gdGhlIHVzZXIncyBvcmdcbiAgaWYgKGJhZGdlcy5pbmNsdWRlcyhcIlNoYXJlZFVwZGF0ZVwiKSAmJiAhYmFkZ2VzLmluY2x1ZGVzKFwiUGFydG5lcmVkXCIpICYmIGdyb3VwLm9yZ0lkICE9PSBwb3J0YWwuaWQpIHtcbiAgICBiYWRnZXMuc3BsaWNlKGJhZGdlcy5pbmRleE9mKFwiU2hhcmVkVXBkYXRlXCIpLCAxKTtcbiAgfVxuICByZXR1cm4gYmFkZ2VzO1xufVxuXG5jb25zdCBhcmNnaXNHcm91cEJhZGdlc0NzcyA9IFwiOmhvc3R7ZGlzcGxheTpmbGV4fS5iYWRnZXtkaXNwbGF5OmlubGluZS1ibG9jazstd2Via2l0LW1hcmdpbi1lbmQ6MC4yNXJlbTttYXJnaW4taW5saW5lLWVuZDowLjI1cmVtfVwiO1xuXG5jb25zdCBBcmNnaXNJdGVtQmFkZ2VzID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XG4gICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICB0aGlzLmdyb3VwID0gdW5kZWZpbmVkO1xuICAgIHRoaXMucG9ydGFsID0gdW5kZWZpbmVkO1xuICAgIHRoaXMud2lkdGggPSBcImZ1bGxcIjtcbiAgICB0aGlzLmFwcGVhcmFuY2UgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5lbXB0eSA9IGZhbHNlO1xuICAgIHRoaXMuc2hvd1Rvb2x0aXBzID0gZmFsc2U7XG4gICAgdGhpcy5zY2FsZSA9IFwibVwiO1xuICAgIHRoaXMuYmFkZ2VzID0gW107XG4gIH1cbiAgY29tcG9uZW50V2lsbExvYWQoKSB7XG4gICAgaWYgKHRoaXMuZ3JvdXApIHtcbiAgICAgIHRoaXMudXBkYXRlQmFkZ2VzKHRoaXMuZ3JvdXApO1xuICAgIH1cbiAgfVxuICB1cGRhdGVCYWRnZXMoZ3JvdXApIHtcbiAgICB2YXIgX2E7XG4gICAgdGhpcy5iYWRnZXMgPSBnZXRCYWRnZXMoZ3JvdXAsIHRoaXMucG9ydGFsKTtcbiAgICBpZiAoISgoX2EgPSB0aGlzLmJhZGdlcykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmxlbmd0aCkpIHtcbiAgICAgIHRoaXMuZW1wdHkgPSB0cnVlO1xuICAgIH1cbiAgfVxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyB3aWR0aCwgc2NhbGUsIGJhZGdlcywgc2hvd1Rvb2x0aXBzLCBhcHBlYXJhbmNlIH0gPSB0aGlzO1xuICAgIHJldHVybiAoaChIb3N0LCBudWxsLCBiYWRnZXMubWFwKChiYWRnZSkgPT4gKGgoXCJhcmNnaXMtZ3JvdXAtYmFkZ2VcIiwgeyBhcHBlYXJhbmNlOiBhcHBlYXJhbmNlLCBrZXk6IGJhZGdlLCBjbGFzczogXCJiYWRnZVwiLCBiYWRnZVR5cGU6IGJhZGdlLCB3aWR0aDogd2lkdGgsIHNjYWxlOiBzY2FsZSwgc2hvd1Rvb2x0aXA6IHNob3dUb29sdGlwcyB9KSkpKSk7XG4gIH1cbiAgZ2V0IGVsKCkgeyByZXR1cm4gZ2V0RWxlbWVudCh0aGlzKTsgfVxuICBzdGF0aWMgZ2V0IHdhdGNoZXJzKCkgeyByZXR1cm4ge1xuICAgIFwiZ3JvdXBcIjogW1widXBkYXRlQmFkZ2VzXCJdXG4gIH07IH1cbn07XG5BcmNnaXNJdGVtQmFkZ2VzLnN0eWxlID0gYXJjZ2lzR3JvdXBCYWRnZXNDc3M7XG5cbmNvbnN0IGFyY2dpc0dyb3VwQ2FyZENzcyA9IFwiOmhvc3R7ZGlzcGxheTpibG9jazttaW4td2lkdGg6MH0uZ3JvdXAtY2FyZHtib3gtc2hhZG93Om5vbmU7dHJhbnNpdGlvbi1kdXJhdGlvbjoxNTBtcztjb2xvcjp2YXIoLS1jYWxjaXRlLXVpLXRleHQtMSk7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWZvcmVncm91bmQtMSk7cG9zaXRpb246cmVsYXRpdmU7b3BhY2l0eTowO2hlaWdodDoxMDAlO2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47b3V0bGluZS1jb2xvcjp0cmFuc3BhcmVudDtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtdWktZm9yZWdyb3VuZC0xKTt0cmFuc2l0aW9uLXByb3BlcnR5OmJhY2tncm91bmQtY29sb3IsIG91dGxpbmUsIG91dGxpbmUtb2Zmc2V0LCBvcGFjaXR5O2JvcmRlcjoxcHggc29saWQgdmFyKC0tY2FsY2l0ZS11aS1ib3JkZXItMyl9Lmdyb3VwLWNhcmQ6Zm9jdXN7b3V0bGluZToycHggc29saWQgdmFyKC0tY2FsY2l0ZS11aS1icmFuZCk7b3V0bGluZS1vZmZzZXQ6LTJweDt6LWluZGV4OjEwfS5ncm91cC1jYXJkLS1sb2FkZWR7b3BhY2l0eToxfS5ncm91cC1jYXJkLS1zZWxlY3RlZHtib3JkZXItY29sb3I6dmFyKC0tY2FsY2l0ZS11aS1icmFuZCl9Lmdyb3VwLWNhcmQtLWhvdmVyYWJsZXtjdXJzb3I6cG9pbnRlcn0uZ3JvdXAtY2FyZF9fdG9we3BhZGRpbmc6MXJlbX0uZ3JvdXAtY2FyZF9faG92ZXItdGV4dHtvcGFjaXR5OjA7Zm9udC13ZWlnaHQ6NTAwO2ZvbnQtc2l6ZToxcmVtO3RleHQtYWxpZ246Y2VudGVyO3RyYW5zaXRpb246YWxsIHZhcigtLWNhbGNpdGUtYW5pbWF0aW9uLXRpbWluZykgZWFzZS1pbi1vdXQgMHMsIG91dGxpbmUgMHMsIG91dGxpbmUtb2Zmc2V0IDBzO3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO3JpZ2h0OjA7Ym90dG9tOjA7bGVmdDowO2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2FsaWduLWl0ZW1zOmNlbnRlcjtiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMjEsIDIxLCAyMSwgMC43KTtjb2xvcjp3aGl0ZX0uZ3JvdXAtY2FyZF9fdXBwZXJ7ZmxleDoxIDEgMCU7dHJhbnNpdGlvbjphbGwgdmFyKC0tY2FsY2l0ZS1hbmltYXRpb24tdGltaW5nKSBlYXNlLWluLW91dCAwcywgb3V0bGluZSAwcywgb3V0bGluZS1vZmZzZXQgMHM7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWZvcmVncm91bmQtMSl9Lmdyb3VwLWNhcmRfX3VwcGVyOmhvdmVye2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS11aS1iYWNrZ3JvdW5kKX0uZ3JvdXAtY2FyZF9fdXBwZXI6aG92ZXIgLmdyb3VwLWNhcmRfX2hvdmVyLXRleHQsLmdyb3VwLWNhcmQ6Zm9jdXMgLmdyb3VwLWNhcmRfX2hvdmVyLXRleHR7b3BhY2l0eToxfS5ncm91cC1jYXJkX191cHBlci0tY29tcGFjdHtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO3BhZGRpbmctdG9wOjAuNXJlbTtwYWRkaW5nLWJvdHRvbTowLjVyZW07cGFkZGluZy1sZWZ0OjAuNzVyZW07cGFkZGluZy1yaWdodDowLjc1cmVtfS5ncm91cC1jYXJkX191cHBlci0tbGlua3t0ZXh0LWRlY29yYXRpb246bm9uZTtjb2xvcjp2YXIoLS1jYWxjaXRlLXVpLXRleHQtMSk7b3V0bGluZS1jb2xvcjp0cmFuc3BhcmVudH0uZ3JvdXAtY2FyZF9fdXBwZXItLWxpbms6Zm9jdXN7b3V0bGluZToycHggc29saWQgdmFyKC0tY2FsY2l0ZS11aS1icmFuZCk7b3V0bGluZS1vZmZzZXQ6MnB4O3otaW5kZXg6MTB9Lmdyb3VwLWNhcmRfX3RpdGxlX19zcGFue3RyYW5zaXRpb246YWxsIHZhcigtLWNhbGNpdGUtYW5pbWF0aW9uLXRpbWluZykgZWFzZS1pbi1vdXQgMHMsIG91dGxpbmUgMHMsIG91dGxpbmUtb2Zmc2V0IDBzO3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6aW5saW5lO2JvcmRlci1zdHlsZTpub25lO2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnQ7cGFkZGluZzowO2JhY2tncm91bmQtaW1hZ2U6bGluZWFyLWdyYWRpZW50KHRyYW5zcGFyZW50LCB0cmFuc3BhcmVudCk7YmFja2dyb3VuZC1wb3NpdGlvbi14OjAlLCAxMDAlO2JhY2tncm91bmQtcG9zaXRpb24teTptaW4oMS4yNWVtLCAxMDAlKTtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQsIG5vLXJlcGVhdDtiYWNrZ3JvdW5kLXNpemU6MTAwJSAxcHgsIDEwMCUgMXB4fS5ncm91cC1jYXJkLS1wcmV2aWV3ZWQgLmdyb3VwLWNhcmRfX3RpdGxlX19zcGFue2JhY2tncm91bmQtaW1hZ2U6bGluZWFyLWdyYWRpZW50KHZhcigtLWNhbGNpdGUtdWktdGV4dC0zKSwgdmFyKC0tY2FsY2l0ZS11aS10ZXh0LTMpKX0uZ3JvdXAtY2FyZF9fY29udGVudHtkaXNwbGF5OmZsZXg7ZmxleDoxIDEgMCU7ZmxleC1kaXJlY3Rpb246Y29sdW1uO21pbi13aWR0aDowfS5ncm91cC1jYXJkX19kZXRhaWxze2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpyb3c7ZmxleC13cmFwOndyYXB9Lmdyb3VwLWNhcmRfX2RldGFpbHMtLXN0YWNrZWR7ZmxleC1kaXJlY3Rpb246Y29sdW1ufS5ncm91cC1jYXJkX19kZXRhaWx7Zm9udC1zaXplOjAuODc1cmVtO2NvbG9yOnZhcigtLWNhbGNpdGUtdWktdGV4dC0yKX0uZ3JvdXAtY2FyZF9fZGV0YWlsX19pY29uey13ZWJraXQtbWFyZ2luLWVuZDowLjVyZW07bWFyZ2luLWlubGluZS1lbmQ6MC41cmVtfS5ncm91cC1jYXJkX19jYWxlbmRhci1pY29ue2NvbG9yOnZhcigtLWNhbGNpdGUtdWktdGV4dC0zKTstd2Via2l0LW1hcmdpbi1lbmQ6MC41cmVtO21hcmdpbi1pbmxpbmUtZW5kOjAuNXJlbX0uZ3JvdXAtY2FyZF9fZm9vdGVye2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS11aS1mb3JlZ3JvdW5kLTEpO3BhZGRpbmctbGVmdDoxcmVtO3BhZGRpbmctcmlnaHQ6MXJlbTtwYWRkaW5nLXRvcDowLjVyZW07cGFkZGluZy1ib3R0b206MC41cmVtO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7bWFyZ2luLXRvcDphdXRvO2JvcmRlci10b3A6MXB4IHNvbGlkIHZhcigtLWNhbGNpdGUtdWktYm9yZGVyLTMpfS5ncm91cC1jYXJkX19mb290ZXJfX3N0YXJ0e2ZsZXg6MSAxIDAlO2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpyb3c7YWxpZ24taXRlbXM6Y2VudGVyO21pbi13aWR0aDowO292ZXJmbG93OmhpZGRlbjstd2Via2l0LW1hcmdpbi1lbmQ6MC43NXJlbTttYXJnaW4taW5saW5lLWVuZDowLjc1cmVtfS5ncm91cC1jYXJkX19mb290ZXJfX3N0YXJ0LS1zZWxlY3RhYmxley13ZWJraXQtbWFyZ2luLXN0YXJ0OjEuNXJlbTttYXJnaW4taW5saW5lLXN0YXJ0OjEuNXJlbX0uZ3JvdXAtY2FyZF9fcHJvZmlsZS13cmFwe21heC13aWR0aDoxMDAlO3BhZGRpbmc6MC4yNXJlbX0uZ3JvdXAtY2FyZF9fdXBkYXRlZHtmb250LXNpemU6MC44NzVyZW07Y29sb3I6dmFyKC0tY2FsY2l0ZS11aS10ZXh0LTIpfS5ncm91cC1jYXJkX191cGRhdGVkLS14c3ttYXJnaW4tdG9wOjAuNXJlbX0uZ3JvdXAtY2FyZF9fZGl2aWRlcntkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2ZsZXg6MCAwIGF1dG99Lmdyb3VwLWNhcmRfX2RpdmlkZXI6bm90KFtlbXB0eV0pOmJlZm9yZXtjb250ZW50OlxcXCJcXFwiO2hlaWdodDoxLjI1cmVtO3dpZHRoOjFweDtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtdWktYm9yZGVyLTEpO21hcmdpbi1pbmxpbmU6MC43NXJlbX0uZ3JvdXAtY2FyZF9fZGV0YWlscy0tc3RhY2tlZCAuZ3JvdXAtY2FyZF9fZGl2aWRlcjpiZWZvcmV7ZGlzcGxheTpub25lfS5ncm91cC1jYXJkX19kaXZpZGVyOmZpcnN0LWNoaWxkOmJlZm9yZXtkaXNwbGF5Om5vbmV9Lmdyb3VwLWNhcmQtZmxleHtkaXNwbGF5OmZsZXh9Lmdyb3VwLWNhcmQtZmxleC0xe2ZsZXg6MSAxIDAlO21pbi13aWR0aDowfS5zY3JlZW4tcmVhZGVycy1vbmx5e3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOjFweDtoZWlnaHQ6MXB4O3BhZGRpbmc6MDttYXJnaW46LTFweDtvdmVyZmxvdzpoaWRkZW47Y2xpcDpyZWN0KDAsIDAsIDAsIDApO3doaXRlLXNwYWNlOm5vd3JhcDtib3JkZXItd2lkdGg6MH0uZ3JvdXAtY2FyZF9faW5wdXR7LXdlYmtpdC1tYXJnaW4tZW5kOjFyZW07bWFyZ2luLWlubGluZS1lbmQ6MXJlbTttYXJnaW4tdG9wOjAuMTI1cmVtfS5ncm91cC1jYXJkX190aXRsZXtmb250LXNpemU6MXJlbTttYXJnaW4tdG9wOjA7bWFyZ2luLWJvdHRvbTowO3BhZGRpbmctdG9wOjA7cGFkZGluZy1ib3R0b206MDt3b3JkLXdyYXA6YnJlYWstd29yZDtvdmVyZmxvdy13cmFwOmJyZWFrLXdvcmQ7Zm9udC13ZWlnaHQ6NTAwO2xpbmUtaGVpZ2h0OjEuMzc1fS5ncm91cC1jYXJkX190aXRsZS0tY29tcGFjdHtvdmVyZmxvdzpoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpczt3aGl0ZS1zcGFjZTpub3dyYXA7LXdlYmtpdC1tYXJnaW4tZW5kOjFyZW07bWFyZ2luLWlubGluZS1lbmQ6MXJlbX0uZ3JvdXAtY2FyZF9fc3VtbWFyeXtmb250LXNpemU6MC44NzVyZW07bWFyZ2luOjA7bWFyZ2luLXRvcDowLjI1cmVtO21hcmdpbi1ib3R0b206MC4yNXJlbTtwYWRkaW5nOjA7ZmxleDoxIDEgMCU7bGluZS1oZWlnaHQ6MS4yNX0uZ3JvdXAtY2FyZF9fdGh1bWJuYWlsey13ZWJraXQtbWFyZ2luLWVuZDoxcmVtO21hcmdpbi1pbmxpbmUtZW5kOjFyZW19Lmdyb3VwLWNhcmRfX3RodW1ibmFpbC0tY29tcGFjdHt3aWR0aDoyLjc1cmVtO2hlaWdodDoyLjc1cmVtfS5ncm91cC1jYXJkX19iYWRnZXN7bWFyZ2luLXRvcDowLjI1cmVtfS5ncm91cC1jYXJkX19vd25lcnttaW4td2lkdGg6MH0uZ3JvdXAtY2FyZC0tcGFuZWx7bWFyZ2luLWJvdHRvbTowO2N1cnNvcjpwb2ludGVyO2JvcmRlci1ib3R0b206MXB4IHNvbGlkIHZhcigtLWNhbGNpdGUtdWktYm9yZGVyLTEpO291dGxpbmU6MXB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMCl9Lmdyb3VwLWNhcmQtLXBhbmVsOmhvdmVye2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS11aS1mb3JlZ3JvdW5kLTIpfS5ncm91cC1jYXJkLS1ib3JkZXItdG9we2JvcmRlci10b3A6MXB4IHNvbGlkIHZhcigtLWNhbGNpdGUtdWktYm9yZGVyLTEpfS5ncm91cC1jYXJkLS1ib3JkZXItdG9wOmhvdmVye2JveC1zaGFkb3c6bm9uZX0uZ3JvdXAtY2FyZC0teHMgLmdyb3VwLWNhcmRfX3RvcCwuZ3JvdXAtY2FyZC0teHhzIC5ncm91cC1jYXJkX190b3B7cGFkZGluZzowLjc1cmVtfS5ncm91cC1jYXJkLS14cyAuZ3JvdXAtY2FyZF9fdGl0bGUtLXBhZGRlZCwuZ3JvdXAtY2FyZC0teHhzIC5ncm91cC1jYXJkX190aXRsZS0tcGFkZGVke21hcmdpbi1ib3R0b206MC4yNXJlbX0uZ3JvdXAtY2FyZC0teHMgLmdyb3VwLWNhcmRfX2Zvb3RlciwuZ3JvdXAtY2FyZC0teHhzIC5ncm91cC1jYXJkX19mb290ZXJ7cGFkZGluZy10b3A6MC4yNXJlbTtwYWRkaW5nLWJvdHRvbTowLjI1cmVtO3BhZGRpbmctbGVmdDowLjc1cmVtO3BhZGRpbmctcmlnaHQ6MC43NXJlbX0uZ3JvdXAtY2FyZC0teHMgLmdyb3VwLWNhcmRfX2RldGFpbCwuZ3JvdXAtY2FyZC0teHhzIC5ncm91cC1jYXJkX19kZXRhaWx7Zm9udC1zaXplOjAuNzVyZW07bWFyZ2luLXRvcDowLjI1cmVtO21hcmdpbi1ib3R0b206MC4yNXJlbTtsaW5lLWhlaWdodDoxLjM1fS5ncm91cC1jYXJkLS14cyAuZ3JvdXAtY2FyZF9fdGl0bGUsLmdyb3VwLWNhcmQtLXh4cyAuZ3JvdXAtY2FyZF9fdGl0bGV7Zm9udC1zaXplOjAuODc1cmVtfS5ncm91cC1jYXJkLS14eHMgLmdyb3VwLWNhcmRfX3RodW1ibmFpbHt3aWR0aDo0LjI1cmVtOy13ZWJraXQtcGFkZGluZy1zdGFydDowLjc1cmVtO3BhZGRpbmctaW5saW5lLXN0YXJ0OjAuNzVyZW19Lmdyb3VwLWNhcmQtLXhzIC5ncm91cC1jYXJkX190aHVtYm5haWx7d2lkdGg6NXJlbTstd2Via2l0LXBhZGRpbmctc3RhcnQ6MC41cmVtO3BhZGRpbmctaW5saW5lLXN0YXJ0OjAuNXJlbX1cIjtcblxuY29uc3QgQXJjZ2lzR3JvdXBDYXJkID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XG4gICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICB0aGlzLmFyY2dpc0dyb3VwQ2FyZFNlbGVjdCA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiYXJjZ2lzR3JvdXBDYXJkU2VsZWN0XCIsIDcpO1xuICAgIHRoaXMuYXJjZ2lzR3JvdXBCcm93c2VyQ2FyZFByZXZpZXcgPSBjcmVhdGVFdmVudCh0aGlzLCBcImFyY2dpc0dyb3VwQnJvd3NlckNhcmRQcmV2aWV3XCIsIDcpO1xuICAgIHRoaXMuYXJjZ2lzR3JvdXBCcm93c2VySW50ZXJuYWxVSUFjdGlvbiA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiYXJjZ2lzR3JvdXBCcm93c2VySW50ZXJuYWxVSUFjdGlvblwiLCA3KTtcbiAgICB2YXIgX2E7XG4gICAgdGhpcy5oYW5kbGVSZXNpemVFdmVudCA9ICh7IGRldGFpbCB9KSA9PiB7XG4gICAgICB0aGlzLnJlc2l6ZShkZXRhaWwud2lkdGgpO1xuICAgIH07XG4gICAgdGhpcy5oYW5kbGVDYXJkQ2xpY2sgPSAoKSA9PiB7XG4gICAgICBjb25zdCB7IGdyb3VwLCBwcmV2aWV3IH0gPSB0aGlzO1xuICAgICAgaWYgKHRoaXMubGluaykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAocHJldmlldyA9PT0gXCJ0b3BcIikge1xuICAgICAgICB0aGlzLmFyY2dpc0dyb3VwQnJvd3NlckNhcmRQcmV2aWV3LmVtaXQoZ3JvdXApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5yYWRpb0J1dHRvbikge1xuICAgICAgICB0aGlzLnJhZGlvQnV0dG9uLmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmFyY2dpc0dyb3VwQ2FyZFNlbGVjdC5lbWl0KHsgZ3JvdXAsIHNlbGVjdGVkOiB0cnVlIH0pO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAodGhpcy5jaGVja2JveCkge1xuICAgICAgICB0aGlzLnNlbGVjdGVkID0gIXRoaXMuc2VsZWN0ZWQ7XG4gICAgICAgIHRoaXMuYXJjZ2lzR3JvdXBDYXJkU2VsZWN0LmVtaXQoeyBncm91cCwgc2VsZWN0ZWQ6IHRoaXMuc2VsZWN0ZWQgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLmdyb3VwID0gdW5kZWZpbmVkO1xuICAgIHRoaXMudXNlciA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnBvcnRhbCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmFwaSA9IDQ7XG4gICAgdGhpcy5iYXNlVXJsID0gKF9hID0gY29uZmlnU3RhdGUgPT09IG51bGwgfHwgY29uZmlnU3RhdGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNvbmZpZ1N0YXRlLmNvbmZpZykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmJhc2VVcmw7XG4gICAgdGhpcy5zZWxlY3RlZCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmluZGV0ZXJtaW5hdGUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy52aWV3ID0gXCJsaXN0XCI7XG4gICAgdGhpcy5zZWxlY3Rpb24gPSBcIm5vbmVcIjtcbiAgICB0aGlzLnByZXZpZXcgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5uYW1lID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuc2hvd093bmVyID0gdHJ1ZTtcbiAgICB0aGlzLnNob3dEYXRlVXBkYXRlZCA9IHRydWU7XG4gICAgdGhpcy5zaG93RGF0ZUNyZWF0ZWQgPSBmYWxzZTtcbiAgICB0aGlzLnNob3dWaWV3YWJsZUJ5ID0gdHJ1ZTtcbiAgICB0aGlzLnNob3dTdW1tYXJ5ID0gZmFsc2U7XG4gICAgdGhpcy5zaG93QmFkZ2VzID0gdHJ1ZTtcbiAgICB0aGlzLmxpbmsgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5uZXdUYWIgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5ob3ZlciA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmZvcm1GYWN0b3IgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy51cGRhdGVkVGV4dCA9IFwiXCI7XG4gICAgdGhpcy5jcmVhdGVkVGV4dCA9IFwiXCI7XG4gICAgdGhpcy5sb2FkZWQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy53aWR0aCA9IHVuZGVmaW5lZDtcbiAgfVxuICAvKiBDYWxsaW5nIHRoaXMgc2V0Rm9jdXMgY2F1c2VzIGNhbGNpdGUgdG8gZm9jdXMgaGVyZSB3aGVuIHRoZSB1c2VyIHBvcHVwIGlzIGNsb3NlZC4uLiAqL1xuICBhc3luYyByZXN0b3JlRm9jdXMoKSB7XG4gICAgaWYgKHRoaXMubGluayAmJiB0aGlzLmxpbmtFbCkge1xuICAgICAgdGhpcy5saW5rRWwuZm9jdXMoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMucHJldmlldyA9PT0gXCJ0b3BcIiAmJiB0aGlzLnNlY3Rpb25FbCkge1xuICAgICAgdGhpcy5zZWN0aW9uRWwuZm9jdXMoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cbiAgYXN5bmMgY29tcG9uZW50V2lsbExvYWQoKSB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICBjb25zdCB7IGVsIH0gPSB0aGlzO1xuICAgIGNvbnN0IGxvY2FsZSA9IGF3YWl0IGdldExvY2FsZUNvbXBvbmVudFN0cmluZ3MoZWwpO1xuICAgIHRoaXMuaTE4biA9IGxvY2FsZVswXTtcbiAgICAvLyBpZiB3ZSdyZSBpbnNpZGUgYSBncm91cCBicm93c2VyLCB1c2UgdGhhdCBzdG9yZSwgb3RoZXJ3aXNlIGNyZWF0ZSBvbmUganVzdCBmb3IgdGhpcyBjYXJkXG4gICAgdGhpcy5zdG9yZSA9IGdldEdyb3VwQnJvd3NlclN0b3JlKHRoaXMuZWwpIHx8IGNyZWF0ZVN0b3JlKHsgZmlsdGVyczoge30gfSk7XG4gICAgKF9hID0gdGhpcy5mb3JtRmFjdG9yKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAodGhpcy5mb3JtRmFjdG9yID0gKChfYiA9IHRoaXMuc3RvcmUpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5zdGF0ZS5wYW5lbCkgPyBcInhzXCIgOiBcImxnXCIpO1xuICAgIHNldHVwUmVzaXplT2JzZXJ2ZXIodGhpcy5zdG9yZSkub2JzZXJ2ZSh0aGlzLmVsKTtcbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoXCJhcmNnaXNCcm93c2VyUmVzaXplXCIsIHRoaXMuaGFuZGxlUmVzaXplRXZlbnQpO1xuICAgIHRoaXMudXBkYXRlZFRleHQgPSB0aGlzLmkxOG4ubGFzdFVwZGF0ZWQucmVwbGFjZShcIiR7ZGF0ZX1cIiwgZm9ybWF0RGF0ZSh0aGlzLmdyb3VwLm1vZGlmaWVkKSk7XG4gICAgdGhpcy5jcmVhdGVkVGV4dCA9IHRoaXMuaTE4bi5jcmVhdGVkLnJlcGxhY2UoXCIke2RhdGV9XCIsIGZvcm1hdERhdGUodGhpcy5ncm91cC5jcmVhdGVkKSk7XG4gIH1cbiAgYXN5bmMgY29tcG9uZW50RGlkTG9hZCgpIHtcbiAgICBhd2FpdCB0aW1lb3V0KDEwMCk7XG4gICAgdGhpcy5sb2FkZWQgPSB0cnVlO1xuICB9XG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHZhciBfYSwgX2IsIF9jLCBfZDtcbiAgICAoX2MgPSAoX2IgPSAoX2EgPSB0aGlzLnN0b3JlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc3RhdGUpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5yZXNpemVPYnNlcnZlcikgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLnVub2JzZXJ2ZSh0aGlzLmVsKTtcbiAgICAoX2QgPSB0aGlzLmVsKSA9PT0gbnVsbCB8fCBfZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2QucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImFyY2dpc0Jyb3dzZXJSZXNpemVcIiwgdGhpcy5oYW5kbGVSZXNpemVFdmVudCk7XG4gIH1cbiAgcmVzaXplKHdpZHRoKSB7XG4gICAgc3dpdGNoICh0cnVlKSB7XG4gICAgICBjYXNlIHdpZHRoID4gYnJlYWtwb2ludHMubWQ6XG4gICAgICAgIHRoaXMuZm9ybUZhY3RvciA9IFwibGdcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIHdpZHRoID4gYnJlYWtwb2ludHMuc206XG4gICAgICAgIHRoaXMuZm9ybUZhY3RvciA9IFwibWRcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIHdpZHRoID4gYnJlYWtwb2ludHMueHM6XG4gICAgICAgIHRoaXMuZm9ybUZhY3RvciA9IFwic21cIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIHdpZHRoID4gYnJlYWtwb2ludHMueHhzOlxuICAgICAgICB0aGlzLmZvcm1GYWN0b3IgPSBcInhzXCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhpcy5mb3JtRmFjdG9yID0gXCJ4eHNcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHRoaXMud2lkdGggPSB3aWR0aDtcbiAgfVxuICBnZXRBY2Nlc3NJbmZvKGFjY2Vzcykge1xuICAgIGNvbnN0IGluZm8gPSB7XG4gICAgICBwdWJsaWM6IHtcbiAgICAgICAgdGV4dDogdGhpcy5pMThuLmV2ZXJ5b25lLFxuICAgICAgICBpY29uOiBcImdsb2JlXCJcbiAgICAgIH0sXG4gICAgICBwcml2YXRlOiB7XG4gICAgICAgIHRleHQ6IHRoaXMuaTE4bi5ncm91cE1lbWJlcnMsXG4gICAgICAgIGljb246IFwibG9ja1wiXG4gICAgICB9LFxuICAgICAgb3JnOiB7XG4gICAgICAgIHRleHQ6IHRoaXMuaTE4bi5vcmdhbml6YXRpb24sXG4gICAgICAgIGljb246IFwib3JnYW5pemF0aW9uXCJcbiAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBpbmZvW2FjY2Vzc10gfHwgaW5mby5wcml2YXRlO1xuICB9XG4gIHJlbmRlckNvbXBhY3RWaWV3KCkge1xuICAgIGNvbnN0IHsgZ3JvdXAsIHBvcnRhbCwgc2VsZWN0aW9uLCBzZWxlY3RlZCwgZm9ybUZhY3RvciwgaTE4biwgbGluaywgbG9hZGVkLCBuZXdUYWIsIHNob3dCYWRnZXMgfSA9IHRoaXM7XG4gICAgY29uc3QgQ2FyZFRhZyA9IHRoaXMubGluayA/IFwiYVwiIDogXCJkaXZcIjtcbiAgICBjb25zdCBsaW5rQXR0cmlidXRlcyA9IE9iamVjdC5hc3NpZ24oeyBocmVmOiBsaW5rIH0sIChuZXdUYWIgPyB7IHRhcmdldDogXCJfYmxhbmtcIiwgcmVsOiBcIm5vb3BlbmVyIG5vcmVmZXJyZXJcIiB9IDoge30pKTtcbiAgICByZXR1cm4gKGgoXCJzZWN0aW9uXCIsIE9iamVjdC5hc3NpZ24oeyBjbGFzczoge1xuICAgICAgICBcImdyb3VwLWNhcmRcIjogdHJ1ZSxcbiAgICAgICAgXCJncm91cC1jYXJkLS1ob3ZlcmFibGVcIjogc2VsZWN0aW9uICE9PSBcIm5vbmVcIixcbiAgICAgICAgW2Bncm91cC1jYXJkLS0ke2Zvcm1GYWN0b3J9YF06IHRydWUsXG4gICAgICAgIFwiZ3JvdXAtY2FyZC0tbG9hZGVkXCI6IGxvYWRlZFxuICAgICAgfSwgb25Nb3VzZU92ZXI6ICgpID0+ICh0aGlzLmhvdmVyID0gdHJ1ZSksIG9uTW91c2VPdXQ6ICgpID0+ICh0aGlzLmhvdmVyID0gZmFsc2UpIH0sIChsaW5rID8ge30gOiB7IG9uQ2xpY2s6IHRoaXMuaGFuZGxlQ2FyZENsaWNrIH0pLCB7IHJlZjogKGVsKSA9PiAodGhpcy5zZWN0aW9uRWwgPSBlbCkgfSksIGgoQ2FyZFRhZywgT2JqZWN0LmFzc2lnbih7IGNsYXNzOiB7XG4gICAgICAgIFwiZ3JvdXAtY2FyZF9fdXBwZXJcIjogdHJ1ZSxcbiAgICAgICAgXCJncm91cC1jYXJkX191cHBlci0tbGlua1wiOiAhIWxpbmssXG4gICAgICAgIFwiZ3JvdXAtY2FyZF9fdXBwZXItLWNvbXBhY3RcIjogdHJ1ZVxuICAgICAgfSB9LCAobGluayA/IGxpbmtBdHRyaWJ1dGVzIDoge30pLCB7IHJlZjogKGVsKSA9PiAodGhpcy5saW5rRWwgPSBlbCkgfSksIHNlbGVjdGlvbiA9PT0gXCJzaW5nbGVcIiAmJiAoaChcImNhbGNpdGUtcmFkaW8tYnV0dG9uXCIsIHsgY2xhc3M6IFwiZ3JvdXAtY2FyZF9faW5wdXRcIiwgY2hlY2tlZDogc2VsZWN0ZWQsIHZhbHVlOiBncm91cC50aXRsZSwgbmFtZTogdGhpcy5uYW1lLCByZWY6IChlbCkgPT4gKHRoaXMucmFkaW9CdXR0b24gPSBlbCksIG9uQ2xpY2s6IChlKSA9PiB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB9LCBvbkNhbGNpdGVSYWRpb0J1dHRvbkNoYW5nZTogKCkgPT4ge1xuICAgICAgICB0aGlzLmFyY2dpc0dyb3VwQ2FyZFNlbGVjdC5lbWl0KHsgZ3JvdXAsIHNlbGVjdGVkOiAhc2VsZWN0ZWQgfSk7XG4gICAgICB9IH0sIGgoXCJzcGFuXCIsIHsgY2xhc3M6IFwic2NyZWVuLXJlYWRlcnMtb25seVwiIH0sIGkxOG4uc2VsZWN0LnJlcGxhY2UoXCIke3RpdGxlfVwiLCBncm91cC50aXRsZSkpKSksIHNlbGVjdGlvbiA9PT0gXCJtdWx0aXBsZVwiICYmIChoKFwiY2FsY2l0ZS1jaGVja2JveFwiLCB7IGNsYXNzOiBcImdyb3VwLWNhcmRfX2lucHV0XCIsIGNoZWNrZWQ6IHNlbGVjdGVkLCBpbmRldGVybWluYXRlOiB0aGlzLmluZGV0ZXJtaW5hdGUsIG9uQ2xpY2s6IChlKSA9PiB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB9LCBvbkNhbGNpdGVDaGVja2JveENoYW5nZTogKCkgPT4ge1xuICAgICAgICB0aGlzLmFyY2dpc0dyb3VwQ2FyZFNlbGVjdC5lbWl0KHsgZ3JvdXAsIHNlbGVjdGVkOiAhdGhpcy5zZWxlY3RlZCB9KTtcbiAgICAgIH0sIHZhbHVlOiBncm91cC5pZCwgcmVmOiAoZWwpID0+ICh0aGlzLmNoZWNrYm94ID0gZWwpIH0sIGgoXCJzcGFuXCIsIHsgY2xhc3M6IFwic2NyZWVuLXJlYWRlcnMtb25seVwiIH0sIGdyb3VwLnRpdGxlKSkpLCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwiZmxleC0wIGdyb3VwLWNhcmRfX3RodW1ibmFpbCBncm91cC1jYXJkX190aHVtYm5haWwtLWNvbXBhY3RcIiB9LCBoKFwiYXJjZ2lzLWdyb3VwLXRodW1ibmFpbFwiLCB7IGdyb3VwOiBncm91cCwgcG9ydGFsOiBwb3J0YWwsIHNjYWxlOiBcImxcIiB9KSksIGgoXCJkaXZcIiwgeyBjbGFzczogXCJncm91cC1jYXJkLWZsZXgtMVwiIH0sIGgoXCJoM1wiLCB7IGNsYXNzOiBcImdyb3VwLWNhcmRfX3RpdGxlIGdyb3VwLWNhcmRfX3RpdGxlLS1jb21wYWN0XCIgfSwgaChcInNwYW5cIiwgeyBjbGFzczogXCJncm91cC1jYXJkX190aXRsZV9fc3BhblwiIH0sIGdyb3VwLnRpdGxlKSkpLCBzaG93QmFkZ2VzICYmIChoKFwiYXJjZ2lzLWdyb3VwLWJhZGdlc1wiLCB7IGdyb3VwOiBncm91cCwgcG9ydGFsOiBwb3J0YWwsIGNsYXNzOiBcImdyb3VwLWNhcmRfX2JhZGdlcy0tY29tcGFjdFwiLCBzY2FsZTogXCJzXCIsIHNob3dUb29sdGlwczogdHJ1ZSwgd2lkdGg6IFwibmFycm93XCIgfSkpLCBoKFwic2xvdFwiLCB7IG5hbWU6IFwiY29udGVudC1lbmRcIiB9KSkpKTtcbiAgfVxuICByZW5kZXIoKSB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICBjb25zdCB7IGdyb3VwLCBwb3J0YWwsIHNlbGVjdGlvbiwgc2VsZWN0ZWQsIGZvcm1GYWN0b3IsIGFwaSwgaTE4biwgbGluaywgbG9hZGVkLCBuZXdUYWIsIHNob3dEYXRlQ3JlYXRlZCwgc2hvd0RhdGVVcGRhdGVkLCBzaG93T3duZXIsIHNob3dCYWRnZXMsIHNob3dTdW1tYXJ5IH0gPSB0aGlzO1xuICAgIGNvbnN0IGJhc2VVcmwgPSAoX2EgPSB0aGlzLmJhc2VVcmwpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IChfYiA9IGNvbmZpZ1N0YXRlLmNvbmZpZykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmJhc2VVcmw7XG4gICAgY29uc3QgY3VycmVudCA9IGdyb3VwQnJvd3NlclN0YXRlLnByZXZpZXcgPT09IHRoaXMuZ3JvdXAuaWQ7XG4gICAgY29uc3QgdG9wUHJldmlldyA9IHRoaXMucHJldmlldyA9PT0gXCJ0b3BcIjtcbiAgICBjb25zdCBDYXJkVGFnID0gdGhpcy5saW5rID8gXCJhXCIgOiBcImRpdlwiO1xuICAgIGNvbnN0IGxpbmtBdHRyaWJ1dGVzID0gT2JqZWN0LmFzc2lnbih7IGhyZWY6IGxpbmsgfSwgKG5ld1RhYiA/IHsgdGFyZ2V0OiBcIl9ibGFua1wiLCByZWw6IFwibm9vcGVuZXIgbm9yZWZlcnJlclwiIH0gOiB7fSkpO1xuICAgIGNvbnN0IHRvcFByZXZpZXdBdHRyaWJ1dGVzID0ge1xuICAgICAgdGFiSW5kZXg6IDAsXG4gICAgICByb2xlOiBcImJ1dHRvblwiLFxuICAgICAgXCJhcmlhLWhhc3BvcHVwXCI6IFwiZGlhbG9nXCIsXG4gICAgICBcImFyaWEtbGFiZWxsZWRieVwiOiBcIm9wZW4tZGV0YWlsc1wiLFxuICAgICAgb25LZXlQcmVzczogKGUpID0+IHtcbiAgICAgICAgaWYgKGUua2V5ID09PSBcIkVudGVyXCIgfHwgZS5rZXkgPT0gXCIgXCIpIHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgdGhpcy5oYW5kbGVDYXJkQ2xpY2soKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgYWNjZXNzSW5mbyA9IHRoaXMuZ2V0QWNjZXNzSW5mbyhncm91cC5hY2Nlc3MpO1xuICAgIHJldHVybiAoaChIb3N0LCBudWxsLCB0aGlzLnZpZXcgPT09IFwiY29tcGFjdFwiID8gKHRoaXMucmVuZGVyQ29tcGFjdFZpZXcoKSkgOiAoaChcInNlY3Rpb25cIiwgT2JqZWN0LmFzc2lnbih7IGNsYXNzOiB7XG4gICAgICAgIFwiZ3JvdXAtY2FyZFwiOiB0cnVlLFxuICAgICAgICBcImdyb3VwLWNhcmQtLWhvdmVyYWJsZVwiOiBzZWxlY3Rpb24gIT09IFwibm9uZVwiLFxuICAgICAgICBbYGdyb3VwLWNhcmQtLSR7Zm9ybUZhY3Rvcn1gXTogdHJ1ZSxcbiAgICAgICAgXCJncm91cC1jYXJkLS1sb2FkZWRcIjogbG9hZGVkXG4gICAgICB9IH0sIChsaW5rID8ge30gOiB7IG9uQ2xpY2s6IHRoaXMuaGFuZGxlQ2FyZENsaWNrIH0pLCAodG9wUHJldmlldyAmJiAhbGluayA/IHRvcFByZXZpZXdBdHRyaWJ1dGVzIDoge30pLCB7IHJlZjogKGVsKSA9PiAodGhpcy5zZWN0aW9uRWwgPSBlbCkgfSksIGgoXCJzbG90XCIsIHsgbmFtZTogXCJjb250ZW50LXRvcFwiIH0pLCBoKENhcmRUYWcsIE9iamVjdC5hc3NpZ24oeyBjbGFzczogeyBcImdyb3VwLWNhcmRfX3VwcGVyXCI6IHRydWUsIFwiZ3JvdXAtY2FyZF9fdXBwZXItLWxpbmtcIjogISFsaW5rIH0gfSwgKGxpbmsgPyBsaW5rQXR0cmlidXRlcyA6IHt9KSwgeyBvbk1vdXNlT3ZlcjogKCkgPT4gKHRoaXMuaG92ZXIgPSB0cnVlKSwgb25Nb3VzZU91dDogKCkgPT4gKHRoaXMuaG92ZXIgPSBmYWxzZSkgfSksIGgoXCJkaXZcIiwgeyBjbGFzczogXCJncm91cC1jYXJkLWZsZXggZ3JvdXAtY2FyZF9fdG9wXCIgfSwgc2VsZWN0aW9uID09PSBcInNpbmdsZVwiICYmIChoKFwiY2FsY2l0ZS1yYWRpby1idXR0b25cIiwgeyBjbGFzczogXCJncm91cC1jYXJkX19pbnB1dFwiLCBjaGVja2VkOiBzZWxlY3RlZCwgdmFsdWU6IGdyb3VwLnRpdGxlLCBuYW1lOiB0aGlzLm5hbWUsIHJlZjogKGVsKSA9PiAodGhpcy5yYWRpb0J1dHRvbiA9IGVsKSwgb25DbGljazogKGUpID0+IHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIH0sIG9uQ2FsY2l0ZVJhZGlvQnV0dG9uQ2hhbmdlOiAoKSA9PiB7XG4gICAgICAgIHRoaXMuYXJjZ2lzR3JvdXBDYXJkU2VsZWN0LmVtaXQoeyBncm91cCwgc2VsZWN0ZWQ6ICFzZWxlY3RlZCB9KTtcbiAgICAgIH0gfSwgaChcInNwYW5cIiwgeyBjbGFzczogXCJzY3JlZW4tcmVhZGVycy1vbmx5XCIgfSwgaTE4bi5zZWxlY3QucmVwbGFjZShcIiR7dGl0bGV9XCIsIGdyb3VwLnRpdGxlKSkpKSwgc2VsZWN0aW9uID09PSBcIm11bHRpcGxlXCIgJiYgKGgoXCJjYWxjaXRlLWNoZWNrYm94XCIsIHsgY2xhc3M6IFwiZ3JvdXAtY2FyZF9faW5wdXRcIiwgY2hlY2tlZDogc2VsZWN0ZWQsIGluZGV0ZXJtaW5hdGU6IHRoaXMuaW5kZXRlcm1pbmF0ZSwgb25DbGljazogKGUpID0+IHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIH0sIG9uQ2FsY2l0ZUNoZWNrYm94Q2hhbmdlOiAoKSA9PiB7XG4gICAgICAgIHRoaXMuYXJjZ2lzR3JvdXBDYXJkU2VsZWN0LmVtaXQoeyBncm91cCwgc2VsZWN0ZWQ6ICF0aGlzLnNlbGVjdGVkIH0pO1xuICAgICAgfSwgdmFsdWU6IGdyb3VwLmlkLCByZWY6IChlbCkgPT4gKHRoaXMuY2hlY2tib3ggPSBlbCkgfSwgaChcInNwYW5cIiwgeyBjbGFzczogXCJzY3JlZW4tcmVhZGVycy1vbmx5XCIgfSwgZ3JvdXAudGl0bGUpKSksIGgoXCJkaXZcIiwgeyBjbGFzczogXCJmbGV4LTAgZ3JvdXAtY2FyZF9fdGh1bWJuYWlsXCIgfSwgaChcImFyY2dpcy1ncm91cC10aHVtYm5haWxcIiwgeyBncm91cDogZ3JvdXAsIHBvcnRhbDogcG9ydGFsLCBzY2FsZTogXCJ4bFwiIH0pKSwgaChcImRpdlwiLCB7IGNsYXNzOiBcImdyb3VwLWNhcmQtZmxleC0xXCIgfSwgaChcImRpdlwiLCB7IGNsYXNzOiBcImdyb3VwLWNhcmQtZmxleFwiIH0sIGgoXCJkaXZcIiwgeyBjbGFzczogXCJncm91cC1jYXJkX19jb250ZW50XCIgfSwgaChcImgzXCIsIHsgY2xhc3M6IHtcbiAgICAgICAgXCJncm91cC1jYXJkX190aXRsZVwiOiB0cnVlLFxuICAgICAgICBcImdyb3VwLWNhcmRfX3RpdGxlLS1wYWRkZWRcIjogc2hvd1N1bW1hcnkgJiYgISFncm91cC5zbmlwcGV0XG4gICAgICB9IH0sIGgoXCJzcGFuXCIsIHsgY2xhc3M6IFwiZ3JvdXAtY2FyZF9fdGl0bGVfX3NwYW5cIiB9LCBncm91cC50aXRsZSkpLCBzaG93U3VtbWFyeSAmJiBncm91cC5zbmlwcGV0ICYmIChoKFwicFwiLCB7IGNsYXNzOiBcImdyb3VwLWNhcmRfX3N1bW1hcnlcIiB9LCBncm91cC5zbmlwcGV0Lmxlbmd0aCA+IDI1MFxuICAgICAgPyBgJHtncm91cC5zbmlwcGV0LnN1YnN0cmluZygwLCAyNTApfeKApmBcbiAgICAgIDogZ3JvdXAuc25pcHBldCkpLCBoKFwiZGl2XCIsIHsgY2xhc3M6IHtcbiAgICAgICAgXCJncm91cC1jYXJkX19kZXRhaWxzXCI6IHRydWUsXG4gICAgICAgIFwiZ3JvdXAtY2FyZF9fZGV0YWlscy0tc3RhY2tlZFwiOiB0aGlzLndpZHRoIDwgNTgwXG4gICAgICB9IH0sIHNob3dEYXRlQ3JlYXRlZCAmJiAoaChcInNwYW5cIiwgeyBjbGFzczogXCJncm91cC1jYXJkX19kZXRhaWwgZ3JvdXAtY2FyZF9fZGl2aWRlclwiIH0sIHRoaXMuY3JlYXRlZFRleHQpKSwgc2hvd0RhdGVVcGRhdGVkICYmIChoKFwic3BhblwiLCB7IGNsYXNzOiBcImdyb3VwLWNhcmRfX2RldGFpbCBncm91cC1jYXJkX19kaXZpZGVyXCIgfSwgdGhpcy51cGRhdGVkVGV4dCkpLCB0aGlzLnNob3dWaWV3YWJsZUJ5ICYmIChoKFwic3BhblwiLCB7IGNsYXNzOiBcImdyb3VwLWNhcmRfX2RldGFpbCBncm91cC1jYXJkX19kaXZpZGVyXCIgfSwgaChcImNhbGNpdGUtaWNvblwiLCB7IGljb246IGFjY2Vzc0luZm8uaWNvbiwgc2NhbGU6IFwic1wiLCBjbGFzczogXCJncm91cC1jYXJkX19kZXRhaWxfX2ljb25cIiB9KSwgXCIgXCIsIGkxOG4udmlld2FibGVCeS5yZXBsYWNlKFwiJHtsZXZlbH1cIiwgYWNjZXNzSW5mby50ZXh0KSkpLCBzaG93QmFkZ2VzICYmIHRoaXMud2lkdGggPj0gYnJlYWtwb2ludHMuc20gJiYgKGgoXCJhcmNnaXMtZ3JvdXAtYmFkZ2VzXCIsIHsgYXBwZWFyYW5jZTogdGhpcy5ob3ZlciA/IFwib3V0bGluZS1maWxsXCIgOiBcInNvbGlkXCIsIGdyb3VwOiBncm91cCwgcG9ydGFsOiBwb3J0YWwsIHdpZHRoOiB0aGlzLndpZHRoIDwgODQwID8gXCJuYXJyb3dcIiA6IFwiZnVsbFwiLCBjbGFzczogXCJncm91cC1jYXJkX19iYWRnZXMgZ3JvdXAtY2FyZF9fZGV0YWlsIGdyb3VwLWNhcmRfX2RpdmlkZXJcIiwgc2NhbGU6IFwic1wiLCBzaG93VG9vbHRpcHM6IHRydWUgfSkpKSwgc2hvd0JhZGdlcyAmJiB0aGlzLndpZHRoIDwgYnJlYWtwb2ludHMuc20gJiYgKGgoXCJhcmNnaXMtZ3JvdXAtYmFkZ2VzXCIsIHsgYXBwZWFyYW5jZTogdGhpcy5ob3ZlciA/IFwib3V0bGluZS1maWxsXCIgOiBcInNvbGlkXCIsIGdyb3VwOiBncm91cCwgcG9ydGFsOiBwb3J0YWwsIHdpZHRoOiB0aGlzLndpZHRoIDwgYnJlYWtwb2ludHMueHhzID8gXCJuYXJyb3dcIiA6IFwiZnVsbFwiLCBjbGFzczogXCJncm91cC1jYXJkX19iYWRnZXNcIiwgc2NhbGU6IFwic1wiLCBzaG93VG9vbHRpcHM6IHRydWUgfSkpKSksIGgoXCJzbG90XCIsIHsgbmFtZTogXCJjb250ZW50LWVuZFwiIH0pKSkpLCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwiZ3JvdXAtY2FyZF9fZm9vdGVyXCIsIG9uQ2xpY2s6IChlKSA9PiB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB9IH0sIGgoXCJkaXZcIiwgeyBjbGFzczogXCJncm91cC1jYXJkX19mb290ZXJfX3N0YXJ0XCIgfSwgaChcInNsb3RcIiwgeyBuYW1lOiBcImFjdGlvbnMtc3RhcnRcIiB9KSwgc2hvd093bmVyICYmIChoKFwiZGl2XCIsIHsgY2xhc3M6IFwiZ3JvdXAtY2FyZF9fcHJvZmlsZS13cmFwXCIsIG9uQ2xpY2s6IChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIH0gfSwgaChcImFyY2dpcy11c2VyLXBvcHVwXCIsIHsgdW5kZXJsaW5lOiB0cnVlLCB1c2VybmFtZTogZ3JvdXAub3duZXIsIGFwaTogYXBpLCBwb3J0YWw6IHBvcnRhbCwgYmFzZVVybDogYmFzZVVybCwgY2xhc3M6IFwiZ3JvdXAtY2FyZF9fb3duZXJcIiwgb25BcmNnaXNVc2VyUG9wdXBJbnRlcm5hbFVJQWN0aW9uOiAoZSkgPT4ge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB0aGlzLmFyY2dpc0dyb3VwQnJvd3NlckludGVybmFsVUlBY3Rpb24uZW1pdChlLmRldGFpbCk7XG4gICAgICB9IH0pKSkpLCB0aGlzLnByZXZpZXcgPT09IFwiYWN0aW9uXCIgJiYgKGgoXCJjYWxjaXRlLWJ1dHRvblwiLCB7IHNjYWxlOiBcInNcIiwgYXBwZWFyYW5jZTogY3VycmVudCA/IFwic29saWRcIiA6IFwib3V0bGluZS1maWxsXCIsIGtpbmQ6IFwibmV1dHJhbFwiLCBvbkNsaWNrOiAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHRoaXMuYXJjZ2lzR3JvdXBCcm93c2VyQ2FyZFByZXZpZXcuZW1pdCh0aGlzLmdyb3VwKTtcbiAgICAgIH0gfSwgY3VycmVudCA/IGkxOG4uaGlkZVByZXZpZXcgOiBpMThuLnByZXZpZXcpKSwgaChcInNsb3RcIiwgeyBuYW1lOiBcImFjdGlvbnMtZW5kXCIgfSkpKSkpKTtcbiAgfVxuICBnZXQgZWwoKSB7IHJldHVybiBnZXRFbGVtZW50KHRoaXMpOyB9XG59O1xuQXJjZ2lzR3JvdXBDYXJkLnN0eWxlID0gYXJjZ2lzR3JvdXBDYXJkQ3NzO1xuXG5leHBvcnQgeyBBcmNnaXNJdGVtQmFkZ2VzIGFzIGFyY2dpc19ncm91cF9iYWRnZXMsIEFyY2dpc0dyb3VwQ2FyZCBhcyBhcmNnaXNfZ3JvdXBfY2FyZCB9O1xuIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogdjMuMC45OVxuICovXG5pbXBvcnQgeyBjIGFzIGNyZWF0ZVN0b3JlIH0gZnJvbSAnLi9pbmRleC04MWQ1NDhiNy5qcyc7XG5cbmNvbnN0IGNvbmZpZ1N0b3JlID0gY3JlYXRlU3RvcmUoe1xuICBwb3J0YWw6IG51bGwsXG4gIHVzZXI6IG51bGwsXG4gIGFwaTogNCxcbiAgc2NhbGU6IFwibVwiXG59KTtcbmNvbnN0IGNvbmZpZ1N0YXRlID0gY29uZmlnU3RvcmUuc3RhdGU7XG5jb25zdCBvbkNvbmZpZ0NoYW5nZSA9IGNvbmZpZ1N0b3JlLm9uQ2hhbmdlO1xuXG5leHBvcnQgeyBjb25maWdTdGF0ZSBhcyBjLCBvbkNvbmZpZ0NoYW5nZSBhcyBvIH07XG4iLCIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiB2My4wLjk5XG4gKi9cbi8qKlxuICogQ2FsbCBhIGZ1bmN0aW9uIG9ubHkgYWZ0ZXIgaXQgaGFzIG5vdCBiZWVuIGNhbGxlZCBmb3IgbiBtaWxsaXNlY29uZHNcbiAqIEBwYXJhbSBmbiAgICAtIGZ1bmN0aW9uIHRvIGNhbGxcbiAqIEBwYXJhbSBkZWxheSAtIGRlbGF5IGluIG1pbGxpc2Vjb25kc1xuICovXG5jb25zdCBkZWJvdW5jZSA9IChmbiwgZGVsYXkpID0+IHtcbiAgbGV0IHRpbWVvdXQ7XG4gIGxldCBzdGF0dXMgPSBcImlkbGVcIjtcbiAgZnVuY3Rpb24gZmx1c2goLi4uYXJncykge1xuICAgIHN0YXR1cyA9IFwiZmx1c2hlZFwiO1xuICAgIHJldHVybiBkZWJvdW5jZWQoLi4uYXJncyk7XG4gIH1cbiAgZnVuY3Rpb24gaW52b2tlKC4uLmFyZ3MpIHtcbiAgICBzdGF0dXMgPSBcImludm9rZWRcIjtcbiAgICByZXR1cm4gZGVib3VuY2VkKC4uLmFyZ3MpO1xuICB9XG4gIGZ1bmN0aW9uIGNhbmNlbCguLi5hcmdzKSB7XG4gICAgc3RhdHVzID0gXCJjYW5jZWxsZWRcIjtcbiAgICByZXR1cm4gZGVib3VuY2VkKC4uLmFyZ3MpO1xuICB9XG4gIGZ1bmN0aW9uIGdldFN0YXR1cygpIHtcbiAgICByZXR1cm4gc3RhdHVzO1xuICB9XG4gIGNvbnN0IGRlYm91bmNlZCA9ICguLi5hcmdzKSA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgIHN3aXRjaCAoc3RhdHVzKSB7XG4gICAgICBjYXNlIFwiZmx1c2hlZFwiOlxuICAgICAgICBzdGF0dXMgPSBcImlkbGVcIjtcbiAgICAgICAgaWYgKHRpbWVvdXQpIHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgICAgcmVzb2x2ZShmbiguLi5hcmdzKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgcmVzb2x2ZShudWxsKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJpbnZva2VkXCI6XG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgc3RhdHVzID0gXCJpZGxlXCI7XG4gICAgICAgIHJlc29sdmUoZm4oLi4uYXJncykpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJjYW5jZWxsZWRcIjpcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICBzdGF0dXMgPSBcImlkbGVcIjtcbiAgICAgICAgcmVzb2x2ZShudWxsKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAodGltZW91dCkge1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0dXMgPSBcInBlbmRpbmdcIjtcbiAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIHN0YXR1cyA9IFwiaWRsZVwiO1xuICAgICAgICAgIHJldHVybiByZXNvbHZlKGZuKC4uLmFyZ3MpKTtcbiAgICAgICAgfSwgZGVsYXkpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH0pO1xuICBkZWJvdW5jZWQuZmx1c2ggPSBmbHVzaDtcbiAgZGVib3VuY2VkLmludm9rZSA9IGludm9rZTtcbiAgZGVib3VuY2VkLmNhbmNlbCA9IGNhbmNlbDtcbiAgZGVib3VuY2VkLmdldFN0YXR1cyA9IGdldFN0YXR1cztcbiAgcmV0dXJuIGRlYm91bmNlZDtcbn07XG4vKipcbiAqIENhbGwgYSBmdW5jdGlvbiBvbmx5IGFmdGVyIG4gbWlsbGlzZWNvbmRzIGhhdmUgZWxhcHNlZFxuICogQHBhcmFtIGZuICAgIC0gZnVuY3Rpb24gdG8gY2FsbFxuICogQHBhcmFtIGRlbGF5IC0gZGVsYXkgaW4gbWlsbGlzZWNvbmRzXG4gKi9cbmNvbnN0IHRocm90dGxlID0gKGZuLCBkZWxheSkgPT4ge1xuICBsZXQgdGltZW91dDtcbiAgcmV0dXJuICguLi5hcmdzKSA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgIGlmICh0aW1lb3V0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgIHRpbWVvdXQgPSB1bmRlZmluZWQ7XG4gICAgICByZXNvbHZlKGZuKC4uLmFyZ3MpKTtcbiAgICB9LCBkZWxheSk7XG4gIH0pO1xufTtcbmZ1bmN0aW9uIGVzY2FwZVJlZ0V4cChzdHIpIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKC9bLiorP14ke30oKXxbXFxdXFxcXF0vZywgXCJcXFxcJCZcIik7IC8vICQmIG1lYW5zIHRoZSB3aG9sZSBtYXRjaGVkIHN0cmluZ1xufVxuZnVuY3Rpb24gaXNEZWZpbmVkKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlICE9PSBudWxsO1xufVxuLyoqXG4gKiBTZXQgYSBtaW5pbXVtIHRpbWUgZm9yIGEgcHJvbWlzZSB0byByZXNvbHZlICh1c2VmdWwgZm9yIHByZXZlbnRpbmcgZmxhc2ggb2YgbG9hZGVycylcbiAqL1xuYXN5bmMgZnVuY3Rpb24gbWluRGVsYXkocHJvbWlzZSwgbWluRGVsYXkpIHtcbiAgYXdhaXQgUHJvbWlzZS5hbGwoW3Byb21pc2UsIHRpbWVvdXQobWluRGVsYXkpXSk7XG4gIHJldHVybiBwcm9taXNlO1xufVxuLyoqXG4gKiBIZWxwZXIgbWV0aG9kIHRvIGlubGluZSBzZXRUaW1lb3V0IGFzIGFuIGF3YWl0IGluIGFzeW5jIGZ1bmN0aW9uc1xuICovXG5mdW5jdGlvbiB0aW1lb3V0KG1zKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xufVxuY29uc3QgYXJyYXlUb0xvb2t1cE1hcCA9IChkYXRhQXJyLCBnZXRLZXlBbmRJdGVtKSA9PiBPYmplY3QuZnJvbUVudHJpZXMoKGRhdGFBcnIgfHwgW10pLm1hcCgoaXRlbSkgPT4ge1xuICBjb25zdCB7IGtleSwgZGF0YSB9ID0gZ2V0S2V5QW5kSXRlbShpdGVtKTtcbiAgcmV0dXJuIFtrZXksIGRhdGFdO1xufSkpO1xuLyoqXG4gKiBDaGVjayB3aGV0aGVyIHR3byBhcnJheXMgaGF2ZSB0aGUgc2FtZSBudW1iZXIgb2YgZWxlbWVudHNcbiAqIGFuZCB3aGV0aGVyIHRoZXkgY29udGFpbiB0aGUgc2FtZSBlbGVtZW50c1xuICogcmVnYXJkbGVzcyBvZiBvcmRlclxuICovXG5jb25zdCBhcnJheXNBcmVFcXVpdmFsZW50ID0gKGFycjEsIGFycjIpID0+IGFycjEubGVuZ3RoID09PSBhcnIyLmxlbmd0aCAmJiBhcnIxLnJlZHVjZSgobWVtbywgc3RyKSA9PiBtZW1vICYmIGFycjIuaW5kZXhPZihzdHIpID4gLTEsIHRydWUpO1xuZnVuY3Rpb24gdW5pcXVlQnkobXlBcnIsIGdldEl0ZW1JZCkge1xuICBjb25zdCByZXN1bHRBcnIgPSBbXTtcbiAgY29uc3QgbG9va3VwTWFwID0ge307XG4gIG15QXJyLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICBjb25zdCBpZCA9IGdldEl0ZW1JZChpdGVtKTtcbiAgICBpZiAobG9va3VwTWFwW2lkXSA9PSBudWxsKSB7XG4gICAgICBsb29rdXBNYXBbaWRdID0gaXRlbTtcbiAgICAgIHJlc3VsdEFyci5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiByZXN1bHRBcnI7XG59XG5mdW5jdGlvbiB1bmlxdWUobXlBcnIpIHtcbiAgY29uc3QgcHJpbWl0aXZlcyA9IHsgYm9vbGVhbjoge30sIG51bWJlcjoge30sIHN0cmluZzoge30gfTtcbiAgY29uc3Qgb2JqcyA9IFtdO1xuICByZXR1cm4gbXlBcnIuZmlsdGVyKChpdGVtKSA9PiB7XG4gICAgbGV0IHR5cGUgPSB0eXBlb2YgaXRlbTtcbiAgICBpZiAodHlwZSBpbiBwcmltaXRpdmVzKSB7XG4gICAgICByZXR1cm4gcHJpbWl0aXZlc1t0eXBlXS5oYXNPd25Qcm9wZXJ0eShpdGVtKSA/IGZhbHNlIDogKHByaW1pdGl2ZXNbdHlwZV1baXRlbV0gPSB0cnVlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICByZXR1cm4gb2Jqcy5pbmRleE9mKGl0ZW0pID49IDAgPyBmYWxzZSA6IG9ianMucHVzaChpdGVtKTtcbiAgICB9XG4gIH0pO1xufVxuY29uc3QgY2h1bmsgPSAoYXJyLCBzaXplKSA9PiBbLi4uQXJyYXkoTWF0aC5jZWlsKGFyci5sZW5ndGggLyBzaXplKSldLm1hcCgoXywgaSkgPT4gYXJyLnNsaWNlKHNpemUgKiBpLCBzaXplICsgc2l6ZSAqIGkpKTtcblxuZXhwb3J0IHsgYXJyYXlUb0xvb2t1cE1hcCBhcyBhLCB1bmlxdWUgYXMgYiwgdGhyb3R0bGUgYXMgYywgZGVib3VuY2UgYXMgZCwgZXNjYXBlUmVnRXhwIGFzIGUsIGFycmF5c0FyZUVxdWl2YWxlbnQgYXMgZiwgY2h1bmsgYXMgZywgaXNEZWZpbmVkIGFzIGksIG1pbkRlbGF5IGFzIG0sIHRpbWVvdXQgYXMgdCwgdW5pcXVlQnkgYXMgdSB9O1xuIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogdjMuMC45OVxuICovXG5pbXBvcnQgeyBnIGFzIGdldFJlbmRlcmluZ1JlZiwgZiBhcyBmb3JjZVVwZGF0ZSB9IGZyb20gJy4vaW5kZXgtOTJlYmIzOTYuanMnO1xuXG5jb25zdCBhcHBlbmRUb01hcCA9IChtYXAsIHByb3BOYW1lLCB2YWx1ZSkgPT4ge1xuICAgIGNvbnN0IGl0ZW1zID0gbWFwLmdldChwcm9wTmFtZSk7XG4gICAgaWYgKCFpdGVtcykge1xuICAgICAgICBtYXAuc2V0KHByb3BOYW1lLCBbdmFsdWVdKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoIWl0ZW1zLmluY2x1ZGVzKHZhbHVlKSkge1xuICAgICAgICBpdGVtcy5wdXNoKHZhbHVlKTtcbiAgICB9XG59O1xuY29uc3QgZGVib3VuY2UgPSAoZm4sIG1zKSA9PiB7XG4gICAgbGV0IHRpbWVvdXRJZDtcbiAgICByZXR1cm4gKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgaWYgKHRpbWVvdXRJZCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aW1lb3V0SWQgPSAwO1xuICAgICAgICAgICAgZm4oLi4uYXJncyk7XG4gICAgICAgIH0sIG1zKTtcbiAgICB9O1xufTtcblxuLyoqXG4gKiBDaGVjayBpZiBhIHBvc3NpYmxlIGVsZW1lbnQgaXNDb25uZWN0ZWQuXG4gKiBUaGUgcHJvcGVydHkgbWlnaHQgbm90IGJlIHRoZXJlLCBzbyB3ZSBjaGVjayBmb3IgaXQuXG4gKlxuICogV2Ugd2FudCBpdCB0byByZXR1cm4gdHJ1ZSBpZiBpc0Nvbm5lY3RlZCBpcyBub3QgYSBwcm9wZXJ0eSxcbiAqIG90aGVyd2lzZSB3ZSB3b3VsZCByZW1vdmUgdGhlc2UgZWxlbWVudHMgYW5kIHdvdWxkIG5vdCB1cGRhdGUuXG4gKlxuICogQmV0dGVyIGxlYWsgaW4gRWRnZSB0aGFuIHRvIGJlIHVzZWxlc3MuXG4gKi9cbmNvbnN0IGlzQ29ubmVjdGVkID0gKG1heWJlRWxlbWVudCkgPT4gISgnaXNDb25uZWN0ZWQnIGluIG1heWJlRWxlbWVudCkgfHwgbWF5YmVFbGVtZW50LmlzQ29ubmVjdGVkO1xuY29uc3QgY2xlYW51cEVsZW1lbnRzID0gZGVib3VuY2UoKG1hcCkgPT4ge1xuICAgIGZvciAobGV0IGtleSBvZiBtYXAua2V5cygpKSB7XG4gICAgICAgIG1hcC5zZXQoa2V5LCBtYXAuZ2V0KGtleSkuZmlsdGVyKGlzQ29ubmVjdGVkKSk7XG4gICAgfVxufSwgMjAwMCk7XG5jb25zdCBzdGVuY2lsU3Vic2NyaXB0aW9uID0gKCkgPT4ge1xuICAgIGlmICh0eXBlb2YgZ2V0UmVuZGVyaW5nUmVmICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIC8vIElmIHdlIGFyZSBub3QgaW4gYSBzdGVuY2lsIHByb2plY3QsIHdlIGRvIG5vdGhpbmcuXG4gICAgICAgIC8vIFRoaXMgZnVuY3Rpb24gaXMgbm90IHJlYWxseSBleHBvcnRlZCBieSBAc3RlbmNpbC9jb3JlLlxuICAgICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIGNvbnN0IGVsbXNUb1VwZGF0ZSA9IG5ldyBNYXAoKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBkaXNwb3NlOiAoKSA9PiBlbG1zVG9VcGRhdGUuY2xlYXIoKSxcbiAgICAgICAgZ2V0OiAocHJvcE5hbWUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVsbSA9IGdldFJlbmRlcmluZ1JlZigpO1xuICAgICAgICAgICAgaWYgKGVsbSkge1xuICAgICAgICAgICAgICAgIGFwcGVuZFRvTWFwKGVsbXNUb1VwZGF0ZSwgcHJvcE5hbWUsIGVsbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogKHByb3BOYW1lKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlbGVtZW50cyA9IGVsbXNUb1VwZGF0ZS5nZXQocHJvcE5hbWUpO1xuICAgICAgICAgICAgaWYgKGVsZW1lbnRzKSB7XG4gICAgICAgICAgICAgICAgZWxtc1RvVXBkYXRlLnNldChwcm9wTmFtZSwgZWxlbWVudHMuZmlsdGVyKGZvcmNlVXBkYXRlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjbGVhbnVwRWxlbWVudHMoZWxtc1RvVXBkYXRlKTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVzZXQ6ICgpID0+IHtcbiAgICAgICAgICAgIGVsbXNUb1VwZGF0ZS5mb3JFYWNoKChlbG1zKSA9PiBlbG1zLmZvckVhY2goZm9yY2VVcGRhdGUpKTtcbiAgICAgICAgICAgIGNsZWFudXBFbGVtZW50cyhlbG1zVG9VcGRhdGUpO1xuICAgICAgICB9LFxuICAgIH07XG59O1xuXG5jb25zdCB1bndyYXAgPSAodmFsKSA9PiAodHlwZW9mIHZhbCA9PT0gJ2Z1bmN0aW9uJyA/IHZhbCgpIDogdmFsKTtcbmNvbnN0IGNyZWF0ZU9ic2VydmFibGVNYXAgPSAoZGVmYXVsdFN0YXRlLCBzaG91bGRVcGRhdGUgPSAoYSwgYikgPT4gYSAhPT0gYikgPT4ge1xuICAgIGNvbnN0IHVud3JhcHBlZFN0YXRlID0gdW53cmFwKGRlZmF1bHRTdGF0ZSk7XG4gICAgbGV0IHN0YXRlcyA9IG5ldyBNYXAoT2JqZWN0LmVudHJpZXModW53cmFwcGVkU3RhdGUgIT09IG51bGwgJiYgdW53cmFwcGVkU3RhdGUgIT09IHZvaWQgMCA/IHVud3JhcHBlZFN0YXRlIDoge30pKTtcbiAgICBjb25zdCBoYW5kbGVycyA9IHtcbiAgICAgICAgZGlzcG9zZTogW10sXG4gICAgICAgIGdldDogW10sXG4gICAgICAgIHNldDogW10sXG4gICAgICAgIHJlc2V0OiBbXSxcbiAgICB9O1xuICAgIGNvbnN0IHJlc2V0ID0gKCkgPT4ge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIC8vIFdoZW4gcmVzZXR0aW5nIHRoZSBzdGF0ZSwgdGhlIGRlZmF1bHQgc3RhdGUgbWF5IGJlIGEgZnVuY3Rpb24gLSB1bndyYXAgaXQgdG8gaW52b2tlIGl0LlxuICAgICAgICAvLyBvdGhlcndpc2UsIHRoZSBzdGF0ZSB3b24ndCBiZSBwcm9wZXJseSByZXNldFxuICAgICAgICBzdGF0ZXMgPSBuZXcgTWFwKE9iamVjdC5lbnRyaWVzKChfYSA9IHVud3JhcChkZWZhdWx0U3RhdGUpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB7fSkpO1xuICAgICAgICBoYW5kbGVycy5yZXNldC5mb3JFYWNoKChjYikgPT4gY2IoKSk7XG4gICAgfTtcbiAgICBjb25zdCBkaXNwb3NlID0gKCkgPT4ge1xuICAgICAgICAvLyBDYWxsIGZpcnN0IGRpc3Bvc2UgYXMgcmVzZXR0aW5nIHRoZSBzdGF0ZSB3b3VsZFxuICAgICAgICAvLyBjYXVzZSBsZXNzIHVwZGF0ZXMgOylcbiAgICAgICAgaGFuZGxlcnMuZGlzcG9zZS5mb3JFYWNoKChjYikgPT4gY2IoKSk7XG4gICAgICAgIHJlc2V0KCk7XG4gICAgfTtcbiAgICBjb25zdCBnZXQgPSAocHJvcE5hbWUpID0+IHtcbiAgICAgICAgaGFuZGxlcnMuZ2V0LmZvckVhY2goKGNiKSA9PiBjYihwcm9wTmFtZSkpO1xuICAgICAgICByZXR1cm4gc3RhdGVzLmdldChwcm9wTmFtZSk7XG4gICAgfTtcbiAgICBjb25zdCBzZXQgPSAocHJvcE5hbWUsIHZhbHVlKSA9PiB7XG4gICAgICAgIGNvbnN0IG9sZFZhbHVlID0gc3RhdGVzLmdldChwcm9wTmFtZSk7XG4gICAgICAgIGlmIChzaG91bGRVcGRhdGUodmFsdWUsIG9sZFZhbHVlLCBwcm9wTmFtZSkpIHtcbiAgICAgICAgICAgIHN0YXRlcy5zZXQocHJvcE5hbWUsIHZhbHVlKTtcbiAgICAgICAgICAgIGhhbmRsZXJzLnNldC5mb3JFYWNoKChjYikgPT4gY2IocHJvcE5hbWUsIHZhbHVlLCBvbGRWYWx1ZSkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBzdGF0ZSA9ICh0eXBlb2YgUHJveHkgPT09ICd1bmRlZmluZWQnXG4gICAgICAgID8ge31cbiAgICAgICAgOiBuZXcgUHJveHkodW53cmFwcGVkU3RhdGUsIHtcbiAgICAgICAgICAgIGdldChfLCBwcm9wTmFtZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBnZXQocHJvcE5hbWUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG93bktleXMoXykge1xuICAgICAgICAgICAgICAgIHJldHVybiBBcnJheS5mcm9tKHN0YXRlcy5rZXlzKCkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldE93blByb3BlcnR5RGVzY3JpcHRvcigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBoYXMoXywgcHJvcE5hbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RhdGVzLmhhcyhwcm9wTmFtZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0KF8sIHByb3BOYW1lLCB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHNldChwcm9wTmFtZSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSkpO1xuICAgIGNvbnN0IG9uID0gKGV2ZW50TmFtZSwgY2FsbGJhY2spID0+IHtcbiAgICAgICAgaGFuZGxlcnNbZXZlbnROYW1lXS5wdXNoKGNhbGxiYWNrKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIHJlbW92ZUZyb21BcnJheShoYW5kbGVyc1tldmVudE5hbWVdLCBjYWxsYmFjayk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCBvbkNoYW5nZSA9IChwcm9wTmFtZSwgY2IpID0+IHtcbiAgICAgICAgY29uc3QgdW5TZXQgPSBvbignc2V0JywgKGtleSwgbmV3VmFsdWUpID0+IHtcbiAgICAgICAgICAgIGlmIChrZXkgPT09IHByb3BOYW1lKSB7XG4gICAgICAgICAgICAgICAgY2IobmV3VmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gV2UgbmVlZCB0byB1bndyYXAgdGhlIGRlZmF1bHRTdGF0ZSBiZWNhdXNlIGl0IG1pZ2h0IGJlIGEgZnVuY3Rpb24uXG4gICAgICAgIC8vIE90aGVyd2lzZSB3ZSBtaWdodCBub3QgYmUgc2VuZGluZyB0aGUgcmlnaHQgcmVzZXQgdmFsdWUuXG4gICAgICAgIGNvbnN0IHVuUmVzZXQgPSBvbigncmVzZXQnLCAoKSA9PiBjYih1bndyYXAoZGVmYXVsdFN0YXRlKVtwcm9wTmFtZV0pKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIHVuU2V0KCk7XG4gICAgICAgICAgICB1blJlc2V0KCk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCB1c2UgPSAoLi4uc3Vic2NyaXB0aW9ucykgPT4ge1xuICAgICAgICBjb25zdCB1bnN1YnMgPSBzdWJzY3JpcHRpb25zLnJlZHVjZSgodW5zdWJzLCBzdWJzY3JpcHRpb24pID0+IHtcbiAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb24uc2V0KSB7XG4gICAgICAgICAgICAgICAgdW5zdWJzLnB1c2gob24oJ3NldCcsIHN1YnNjcmlwdGlvbi5zZXQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb24uZ2V0KSB7XG4gICAgICAgICAgICAgICAgdW5zdWJzLnB1c2gob24oJ2dldCcsIHN1YnNjcmlwdGlvbi5nZXQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb24ucmVzZXQpIHtcbiAgICAgICAgICAgICAgICB1bnN1YnMucHVzaChvbigncmVzZXQnLCBzdWJzY3JpcHRpb24ucmVzZXQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb24uZGlzcG9zZSkge1xuICAgICAgICAgICAgICAgIHVuc3Vicy5wdXNoKG9uKCdkaXNwb3NlJywgc3Vic2NyaXB0aW9uLmRpc3Bvc2UpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB1bnN1YnM7XG4gICAgICAgIH0sIFtdKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHVuc3Vicy5mb3JFYWNoKCh1bnN1YikgPT4gdW5zdWIoKSk7XG4gICAgfTtcbiAgICBjb25zdCBmb3JjZVVwZGF0ZSA9IChrZXkpID0+IHtcbiAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSBzdGF0ZXMuZ2V0KGtleSk7XG4gICAgICAgIGhhbmRsZXJzLnNldC5mb3JFYWNoKChjYikgPT4gY2Ioa2V5LCBvbGRWYWx1ZSwgb2xkVmFsdWUpKTtcbiAgICB9O1xuICAgIHJldHVybiB7XG4gICAgICAgIHN0YXRlLFxuICAgICAgICBnZXQsXG4gICAgICAgIHNldCxcbiAgICAgICAgb24sXG4gICAgICAgIG9uQ2hhbmdlLFxuICAgICAgICB1c2UsXG4gICAgICAgIGRpc3Bvc2UsXG4gICAgICAgIHJlc2V0LFxuICAgICAgICBmb3JjZVVwZGF0ZSxcbiAgICB9O1xufTtcbmNvbnN0IHJlbW92ZUZyb21BcnJheSA9IChhcnJheSwgaXRlbSkgPT4ge1xuICAgIGNvbnN0IGluZGV4ID0gYXJyYXkuaW5kZXhPZihpdGVtKTtcbiAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICBhcnJheVtpbmRleF0gPSBhcnJheVthcnJheS5sZW5ndGggLSAxXTtcbiAgICAgICAgYXJyYXkubGVuZ3RoLS07XG4gICAgfVxufTtcblxuY29uc3QgY3JlYXRlU3RvcmUgPSAoZGVmYXVsdFN0YXRlLCBzaG91bGRVcGRhdGUpID0+IHtcbiAgICBjb25zdCBtYXAgPSBjcmVhdGVPYnNlcnZhYmxlTWFwKGRlZmF1bHRTdGF0ZSwgc2hvdWxkVXBkYXRlKTtcbiAgICBtYXAudXNlKHN0ZW5jaWxTdWJzY3JpcHRpb24oKSk7XG4gICAgcmV0dXJuIG1hcDtcbn07XG5cbmV4cG9ydCB7IGNyZWF0ZVN0b3JlIGFzIGMgfTtcbiIsIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIHYzLjAuOTlcbiAqL1xuaW1wb3J0IHsgbCBhcyBsb2FkTW9kdWxlcyB9IGZyb20gJy4vbG9hZE1vZHVsZXMtYWFmMzBiZDYuanMnO1xuaW1wb3J0IHsgYyBhcyBjbG9zZXN0RWxlbWVudENyb3NzU2hhZG93Qm91bmRhcnkgfSBmcm9tICcuL2RvbS0xM2Y1YjAwYy5qcyc7XG5cbmNvbnN0IGxhbmd1YWdlTWFwID0gbmV3IE1hcChbXG4gIFtcImFyXCIsIFwiYXJcIl0sXG4gIFtcImJnXCIsIFwiYmdcIl0sXG4gIFtcImJzXCIsIFwiYnNcIl0sXG4gIFtcImNhXCIsIFwiY2FcIl0sXG4gIFtcImNzXCIsIFwiY3NcIl0sXG4gIFtcImRhXCIsIFwiZGFcIl0sXG4gIFtcImRlXCIsIFwiZGVcIl0sXG4gIFtcImVsXCIsIFwiZWxcIl0sXG4gIFtcImVuXCIsIFwiZW5cIl0sXG4gIFtcImVzXCIsIFwiZXNcIl0sXG4gIFtcImV0XCIsIFwiZXRcIl0sXG4gIFtcImZpXCIsIFwiZmlcIl0sXG4gIFtcImZyXCIsIFwiZnJcIl0sXG4gIFtcImhlXCIsIFwiaGVcIl0sXG4gIFtcImhyXCIsIFwiaHJcIl0sXG4gIFtcImh1XCIsIFwiaHVcIl0sXG4gIFtcImlkXCIsIFwiaWRcIl0sXG4gIFtcIml0XCIsIFwiaXRcIl0sXG4gIFtcImphXCIsIFwiamFcIl0sXG4gIFtcImtvXCIsIFwia29cIl0sXG4gIFtcImx0XCIsIFwibHRcIl0sXG4gIFtcImx2XCIsIFwibHZcIl0sXG4gIFtcIm5iXCIsIFwibmJcIl0sXG4gIFtcIm5sXCIsIFwibmxcIl0sXG4gIFtcInBsXCIsIFwicGxcIl0sXG4gIFtcInB0LWJyXCIsIFwicHQtQlJcIl0sXG4gIFtcInB0LXB0XCIsIFwicHQtUFRcIl0sXG4gIFtcInJvXCIsIFwicm9cIl0sXG4gIFtcInJ1XCIsIFwicnVcIl0sXG4gIFtcInNrXCIsIFwic2tcIl0sXG4gIFtcInNsXCIsIFwic2xcIl0sXG4gIFtcInNyXCIsIFwic3JcIl0sXG4gIFtcInN2XCIsIFwic3ZcIl0sXG4gIFtcInRoXCIsIFwidGhcIl0sXG4gIFtcInRyXCIsIFwidHJcIl0sXG4gIFtcInVrXCIsIFwidWtcIl0sXG4gIFtcInZpXCIsIFwidmlcIl0sXG4gIFtcInpoLWNuXCIsIFwiemgtQ05cIl0sXG4gIFtcInpoLWhrXCIsIFwiemgtSEtcIl0sXG4gIFtcInpoLXR3XCIsIFwiemgtVFdcIl1cbl0pO1xuLy8gcnRsXG5mdW5jdGlvbiBnZXRFbGVtZW50RGlyKGVsKSB7XG4gIHJldHVybiBnZXRFbGVtZW50UHJvcChlbCwgXCJkaXJcIiwgXCJsdHJcIik7XG59XG5mdW5jdGlvbiBnZXRFbGVtZW50UHJvcChlbCwgcHJvcCwgdmFsdWUpIHtcbiAgY29uc3QgY2xvc2VzdFdpdGhQcm9wID0gY2xvc2VzdEVsZW1lbnRDcm9zc1NoYWRvd0JvdW5kYXJ5KGVsLCBgWyR7cHJvcH1dYCk7XG4gIHJldHVybiBjbG9zZXN0V2l0aFByb3AgPyBjbG9zZXN0V2l0aFByb3AuZ2V0QXR0cmlidXRlKHByb3ApIDogdmFsdWU7XG59XG4vLyBjc3NcbmNvbnN0IENTU19VVElMSVRZID0ge1xuICBydGw6IFwiYXJjZ2lzLS1ydGxcIlxufTtcbmFzeW5jIGZ1bmN0aW9uIGZvcm1hdE51bWJlcihudW1iZXIsIG9wdGlvbnMpIHtcbiAgY29uc3QgeyBhcGksIHR5cGUsIHBsYWNlcyB9ID0gb3B0aW9ucyB8fCB7fTtcbiAgaWYgKGFwaSA9PT0gNCkge1xuICAgIGNvbnN0IFtpbnRsXSA9IGF3YWl0IGxvYWRNb2R1bGVzKFtcImVzcmkvaW50bFwiXSk7XG4gICAgY29uc3QgbnVtYmVyRm9ybWF0SW50bE9wdGlvbnMgPSBpbnRsLmNvbnZlcnROdW1iZXJGb3JtYXRUb0ludGxPcHRpb25zKHtcbiAgICAgIHBsYWNlcyxcbiAgICAgIHN0eWxlOiB0eXBlLFxuICAgICAgZGlnaXRTZXBhcmF0b3I6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gaW50bC5mb3JtYXROdW1iZXIobnVtYmVyLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG51bWJlckZvcm1hdEludGxPcHRpb25zKSwgeyBzdHlsZTogdHlwZSB9KSk7XG4gIH1cbiAgY29uc3QgW2Rvam9OdW1iZXJdID0gYXdhaXQgbG9hZE1vZHVsZXMoW1wiZG9qby9udW1iZXJcIl0pO1xuICByZXR1cm4gZG9qb051bWJlci5mb3JtYXQobnVtYmVyLCB7XG4gICAgdHlwZSxcbiAgICBwbGFjZXMsXG4gICAgcGF0dGVybjogb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLnBhdHRlcm5cbiAgfSk7XG59XG5jb25zdCBjYWNoZSA9IHt9O1xuZnVuY3Rpb24gZm9ybWF0RGF0ZShkYXRlKSB7XG4gIGNvbnN0IGxhbmcgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQubGFuZztcbiAgY29uc3QgZGF5U2hvcnRNb250aFllYXIgPSB7XG4gICAgeWVhcjogXCJudW1lcmljXCIsXG4gICAgbW9udGg6IFwic2hvcnRcIixcbiAgICBkYXk6IFwibnVtZXJpY1wiXG4gIH07XG4gIGlmICghY2FjaGVbbGFuZ10pIHtcbiAgICBjYWNoZVtsYW5nXSA9IG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5sYW5nLCBkYXlTaG9ydE1vbnRoWWVhcik7XG4gIH1cbiAgcmV0dXJuIGNhY2hlW2xhbmddLmZvcm1hdChkYXRlKTtcbn1cblxuZXhwb3J0IHsgQ1NTX1VUSUxJVFkgYXMgQywgZm9ybWF0RGF0ZSBhcyBhLCBmb3JtYXROdW1iZXIgYXMgZiwgZ2V0RWxlbWVudERpciBhcyBnLCBsYW5ndWFnZU1hcCBhcyBsIH07XG4iLCIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiB2My4wLjk5XG4gKi9cbmltcG9ydCB7IGMgYXMgY2xvc2VzdEVsZW1lbnRDcm9zc1NoYWRvd0JvdW5kYXJ5IH0gZnJvbSAnLi9kb20tMTNmNWIwMGMuanMnO1xuaW1wb3J0IHsgbCBhcyBsYW5ndWFnZU1hcCB9IGZyb20gJy4vbGFuZ3VhZ2VVdGlsLTIyMjU4YzkwLmpzJztcbmltcG9ydCB7IGEgYXMgZ2V0QXNzZXRQYXRoIH0gZnJvbSAnLi9pbmRleC05MmViYjM5Ni5qcyc7XG5cbi8vIGh0dHBzOi8vbWVkaXVtLmNvbS9zdGVuY2lsLXRyaWNrcy9pbXBsZW1lbnRpbmctaW50ZXJuYXRpb25hbGlzYXRpb24taTE4bi13aXRoLXN0ZW5jaWwtNWU2NTU5NTU0MTE3XG5mdW5jdGlvbiBnZXRDb21wb25lbnRDbG9zZXN0TGFuZ3VhZ2UoZWxlbWVudCkge1xuICB2YXIgX2EsIF9iLCBfYztcbiAgY29uc3QgY2xvc2VzdEVsZW1lbnQgPSAoX2EgPSBjbG9zZXN0RWxlbWVudENyb3NzU2hhZG93Qm91bmRhcnkoZWxlbWVudCwgXCJbbGFuZ11cIikpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IChfYyA9IChfYiA9IGVsZW1lbnQuc2hhZG93Um9vdCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLm93bmVyRG9jdW1lbnQpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5kb2N1bWVudEVsZW1lbnQ7XG4gIC8vIGxhbmd1YWdlIHNldCBieSB0aGUgY2FsbGluZyBhcHBsaWNhdGlvbiBvciBicm93c2VyLiBkZWZhdWx0cyB0byBlbmdsaXNoLlxuICBjb25zdCBsYW5nID0gKChjbG9zZXN0RWxlbWVudCA9PT0gbnVsbCB8fCBjbG9zZXN0RWxlbWVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY2xvc2VzdEVsZW1lbnQubGFuZykgfHwgKG5hdmlnYXRvciA9PT0gbnVsbCB8fCBuYXZpZ2F0b3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG5hdmlnYXRvci5sYW5ndWFnZSkgfHwgXCJlblwiKS50b0xvd2VyQ2FzZSgpO1xuICBpZiAobGFuZ3VhZ2VNYXAuaGFzKGxhbmcpKSB7XG4gICAgcmV0dXJuIGxhbmd1YWdlTWFwLmdldChsYW5nKTtcbiAgfVxuICBlbHNlIHtcbiAgICAvLyBcInJ1LVJVXCIgbWFwcyB0byBcInJ1XCIgdXNlIGNhc2VcbiAgICBpZiAobGFuZ3VhZ2VNYXAuaGFzKGxhbmcuc2xpY2UoMCwgMikpKSB7XG4gICAgICByZXR1cm4gbGFuZ3VhZ2VNYXAuZ2V0KGxhbmcuc2xpY2UoMCwgMikpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHJldHVybiBcImVuXCI7XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiBnZXRDb21wb25lbnRDbG9zZXN0TGFuZ3VhZ2VJbnRsKGVsZW1lbnQpIHtcbiAgdmFyIF9hLCBfYiwgX2M7XG4gIC8vIGl0J3MgT0sgaWYgd2UgZG9uJ3QgaGF2ZSB0aGUgNCBsZXR0ZXIgbGFuZ3VhZ2UgZmlsZSBmb3IgaXRcbiAgLy8gNCBsZXR0ZXIgbGFuZ3VhZ2UgY29kZSBuZWVkZWQgZm9yIGZvcm1hdHRpbmcgbnVtYmVyc1xuICBjb25zdCBjbG9zZXN0RWxlbWVudCA9IChfYSA9IGNsb3Nlc3RFbGVtZW50Q3Jvc3NTaGFkb3dCb3VuZGFyeShlbGVtZW50LCBcIltsYW5nXVwiKSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogKF9jID0gKF9iID0gZWxlbWVudC5zaGFkb3dSb290KSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Iub3duZXJEb2N1bWVudCkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLmRvY3VtZW50RWxlbWVudDtcbiAgLy8gbGFuZ3VhZ2Ugc2V0IGJ5IHRoZSBjYWxsaW5nIGFwcGxpY2F0aW9uIG9yIGJyb3dzZXIuIGRlZmF1bHRzIHRvIGVuZ2xpc2guXG4gIGNvbnN0IGxhbmcgPSAoKGNsb3Nlc3RFbGVtZW50ID09PSBudWxsIHx8IGNsb3Nlc3RFbGVtZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjbG9zZXN0RWxlbWVudC5sYW5nKSB8fCAobmF2aWdhdG9yID09PSBudWxsIHx8IG5hdmlnYXRvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogbmF2aWdhdG9yLmxhbmd1YWdlKSB8fCBcImVuXCIpLnRvTG93ZXJDYXNlKCk7XG4gIGlmIChsYW5ndWFnZU1hcC5oYXMobGFuZykpIHtcbiAgICByZXR1cm4gbGFuZ3VhZ2VNYXAuZ2V0KGxhbmcpO1xuICB9XG4gIGVsc2Uge1xuICAgIGlmIChsYW5ndWFnZU1hcC5oYXMobGFuZy5zbGljZSgwLCAyKSkpIHtcbiAgICAgIC8vIHdlIHN1cHBvcnQgdGhlIDIgbGV0dGVyIGNvZGVkIGxhbmd1YWdlXG4gICAgICAvLyBlLmcuIGl0LUNIIHZzIGl0XG4gICAgICByZXR1cm4gbGFuZztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICByZXR1cm4gXCJlblwiO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gZmV0Y2hMb2NhbGVTdHJpbmdzRm9yQ29tcG9uZW50KGNvbXBvbmVudE5hbWUsIGxvY2FsZSkge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGZldGNoKGdldEFzc2V0UGF0aChgLi4vYXJjZ2lzLWFwcC1hc3NldHMvaTE4bi8ke2NvbXBvbmVudE5hbWV9LmkxOG4uJHtsb2NhbGV9Lmpzb25gKSkudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICBpZiAocmVzdWx0Lm9rKVxuICAgICAgICByZXNvbHZlKHJlc3VsdC5qc29uKCkpO1xuICAgICAgZWxzZVxuICAgICAgICByZWplY3QoKTtcbiAgICB9LCAoKSA9PiByZWplY3QoKSk7XG4gIH0pO1xufVxuY29uc3Qgc3RyaW5nQ2FjaGUgPSB7fTtcbmZ1bmN0aW9uIGZldGNoTG9jYWxlU3RyaW5nc0Zyb21DYWNoZShjb21wb25lbnROYW1lLCBsb2NhbGUpIHtcbiAgY29uc3QgaWQgPSBgJHtjb21wb25lbnROYW1lfSR7bG9jYWxlfWA7XG4gIGlmICghc3RyaW5nQ2FjaGVbaWRdKSB7XG4gICAgc3RyaW5nQ2FjaGVbaWRdID0gZmV0Y2hMb2NhbGVTdHJpbmdzRm9yQ29tcG9uZW50KGNvbXBvbmVudE5hbWUsIGxvY2FsZSk7XG4gIH1cbiAgcmV0dXJuIHN0cmluZ0NhY2hlW2lkXTtcbn1cbi8qKlxuICogR2V0IHN0cmluZ3MgYW5kIGxhbmd1YWdlIGNvZGVzLlxuICogVGhpcyBtZXRob2QgcmV0dXJucyAyIGxhbmd1YWdlIGNvZGVzLlxuICogVGhlIGZpcnN0IG9uZSByZXR1cm5zIGEgY29kZSB0aGF0J3MgYWxzbyBzdXBwb3J0ZWQgYXMgYSBsYW5ndWFnZSBmaWxlLlxuICogVGhlIHNlY29uZCBvbmUgcmV0dXJucyBhIGNvZGUgd2hlcmUgdGhlcmUgaXMgc3VwcG9ydCBmb3IgdGhlIGZpcnN0IDIgbGV0dGVycyBvZiB0aGUgY29kZSBhcyBwYXJ0IG9mIGEgbGFuZ3VhZ2UgZmlsZSxcbiAqIGJ1dCB3aWxsIHJldHVybiB0aGUgb3JpZ2luYWwgNCBsZXR0ZXIgY29kZSBmcm9tIHRoZSBwYWdlLlxuICogRS5nLiBGb3IgXCJpdC1jaFwiIGl0IHdpbGwgcmV0dXJuIFwiaXRcIiBhcyB0aGUgZmlyc3QgbGFuZ3VhZ2UgY29kZSBhbmQgXCJpdC1jaFwiIGFzIHRoZSBzZWNvbmQuXG4gKiBUaGUgc2Vjb25kIG9uZSBpcyByZXF1aXJlZCBmb3IgZXNyaS5pbnRsLnNldExvY2FsZSgpIHRvIGdldCB0aGUgY29ycmVjdCBmb3JtYXR0aW5nLlxuICpcbiAqIElmIGEgdGFnTmFtZSBpcyBwcm92aWRlZCBpdCB3aWxsIG92ZXJ3aXRlIHRoZSBlbGVtZW50J3MgdGFnTmFtZVxuICpcbiAqICBAcmV0dXJuIFsgc3RyaW5ncywgZmlyc3QgbGFuZ3VhZ2UgY29kZSwgc2Vjb25kIGxhbmd1YWdlIGNvZGVdXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdldExvY2FsZUNvbXBvbmVudFN0cmluZ3MoZWxlbWVudCwgdGFnTmFtZSkge1xuICBjb25zdCBjb21wb25lbnROYW1lID0gdGFnTmFtZSB8fCBlbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcbiAgY29uc3QgY29tcG9uZW50TGFuZ3VhZ2UgPSBnZXRDb21wb25lbnRDbG9zZXN0TGFuZ3VhZ2UoZWxlbWVudCk7XG4gIGNvbnN0IGNvbXBvbmVudExhbmd1YWdlSW50bCA9IGdldENvbXBvbmVudENsb3Nlc3RMYW5ndWFnZUludGwoZWxlbWVudCk7XG4gIGxldCBzdHJpbmdzO1xuICB0cnkge1xuICAgIHN0cmluZ3MgPSBhd2FpdCBmZXRjaExvY2FsZVN0cmluZ3NGcm9tQ2FjaGUoY29tcG9uZW50TmFtZSwgY29tcG9uZW50TGFuZ3VhZ2UpO1xuICB9XG4gIGNhdGNoIChlKSB7XG4gICAgY29uc29sZS53YXJuKGBubyBsb2NhbGUgZm9yICR7Y29tcG9uZW50TmFtZX0gKCR7Y29tcG9uZW50TGFuZ3VhZ2V9KSBsb2FkaW5nIGRlZmF1bHQgbG9jYWxlIGVuLmApO1xuICAgIHN0cmluZ3MgPSBhd2FpdCBmZXRjaExvY2FsZVN0cmluZ3NGcm9tQ2FjaGUoY29tcG9uZW50TmFtZSwgXCJlblwiKTtcbiAgfVxuICByZXR1cm4gW3N0cmluZ3MsIGNvbXBvbmVudExhbmd1YWdlLCBjb21wb25lbnRMYW5ndWFnZUludGxdO1xufVxuXG5leHBvcnQgeyBnZXRDb21wb25lbnRDbG9zZXN0TGFuZ3VhZ2UgYXMgYSwgZ2V0TG9jYWxlQ29tcG9uZW50U3RyaW5ncyBhcyBnIH07XG4iLCIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiB2My4wLjk5XG4gKi9cbmNvbnN0IGJyZWFrcG9pbnRzID0ge1xuICB4eHM6IDMyMCxcbiAgeHM6IDQ4MCxcbiAgc206IDY0MCxcbiAgbWQ6IDc2OCxcbiAgbGc6IDEwMjQsXG4gIHhsOiAxMjgwXG59O1xuZnVuY3Rpb24gc2V0dXBSZXNpemVPYnNlcnZlcihzdG9yZSkge1xuICB2YXIgX2E7XG4gIHZhciBfYjtcbiAgKF9hID0gKF9iID0gc3RvcmUuc3RhdGUpLnJlc2l6ZU9ic2VydmVyKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAoX2IucmVzaXplT2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIocmVzaXplSGFuZGxlcikpO1xuICByZXR1cm4gc3RvcmUuc3RhdGUucmVzaXplT2JzZXJ2ZXI7XG59XG4vKipcbiAqIHJlc2l6ZSBoYW5kbGVyIHdpbGwgYmUgY2FsbGVkIHdoZW4gaXRlbXMgZ2V0IHJlc2l6ZWRcbiAqIGFuIGV2ZW50IGlzIGRpc3BhdGNoZWQgb24gZWFjaCBlbGVtZW50LCBwYXNzaW5nIHRoZSBuZXcgd2lkdGggYW5kIGhlaWdodFxuICovXG5mdW5jdGlvbiByZXNpemVIYW5kbGVyKGVudHJpZXMpIHtcbiAgZW50cmllcy5mb3JFYWNoKChlbnRyeSkgPT4ge1xuICAgIGlmIChlbnRyeS5jb250ZW50UmVjdC53aWR0aCA+IDApIHtcbiAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFwiYXJjZ2lzQnJvd3NlclJlc2l6ZVwiLCB7XG4gICAgICAgIGRldGFpbDogeyB3aWR0aDogZW50cnkuY29udGVudFJlY3Qud2lkdGgsIGhlaWdodDogZW50cnkuY29udGVudFJlY3QuaGVpZ2h0IH1cbiAgICAgIH0pO1xuICAgICAgZW50cnkudGFyZ2V0LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgIH1cbiAgfSk7XG59XG5cbmV4cG9ydCB7IGJyZWFrcG9pbnRzIGFzIGIsIHNldHVwUmVzaXplT2JzZXJ2ZXIgYXMgcyB9O1xuIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogdjMuMC45OVxuICovXG5pbXBvcnQgeyBjIGFzIGNyZWF0ZVN0b3JlIH0gZnJvbSAnLi9pbmRleC04MWQ1NDhiNy5qcyc7XG5pbXBvcnQgeyBnIGFzIGdldFN0b3JlIH0gZnJvbSAnLi9zdG9yZS1mZjA0YmEwYS5qcyc7XG5cbmZ1bmN0aW9uIGdldEdyb3VwQnJvd3NlclN0b3JlKGVsKSB7XG4gIHJldHVybiBnZXRTdG9yZShlbCwgXCJhcmNnaXMtZ3JvdXAtYnJvd3NlclwiKTtcbn1cbmNvbnN0IEdyb3VwQnJvd3NlclN0b3JlID0gY3JlYXRlU3RvcmUoeyBmaWx0ZXJzOiB7fSB9KTtcbmNvbnN0IGdyb3VwQnJvd3NlclN0YXRlID0gR3JvdXBCcm93c2VyU3RvcmUuc3RhdGU7XG5cbmV4cG9ydCB7IGdyb3VwQnJvd3NlclN0YXRlIGFzIGEsIGdldEdyb3VwQnJvd3NlclN0b3JlIGFzIGcgfTtcbiIsIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIHYzLjAuOTlcbiAqL1xuaW1wb3J0IHsgYyBhcyBjbG9zZXN0RWxlbWVudENyb3NzU2hhZG93Qm91bmRhcnkgfSBmcm9tICcuL2RvbS0xM2Y1YjAwYy5qcyc7XG5cbmNvbnN0IG9uQnJvd3NlckZpbHRlclJlbW92ZSA9IChpZCwgc3RvcmUsIGNhbGxiYWNrKSA9PiB7XG4gIC8vIEB0cy1pZ25vcmVcbiAgc3RvcmUub25DaGFuZ2UoXCJmaWx0ZXJzXCIsIChmaWx0ZXJzKSA9PiB7XG4gICAgaWYgKCFmaWx0ZXJzW2lkXSB8fCAhZmlsdGVyc1tpZF0udmFsdWUpIHtcbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgfVxuICB9KTtcbn07XG5jb25zdCBvblByZXZpZXdDaGFuZ2UgPSAoc3RvcmUsIGNhbGxiYWNrKSA9PiB7XG4gIC8vIEB0cy1pZ25vcmVcbiAgc3RvcmUub25DaGFuZ2UoXCJwcmV2aWV3XCIsIChwcmV2aWV3KSA9PiB7XG4gICAgY2FsbGJhY2soKTtcbiAgfSk7XG59O1xuY29uc3QgU1RPUkVfTE9PS1VQID0gbmV3IE1hcCgpO1xuZnVuY3Rpb24gZ2V0U3RvcmUoZWwsIGJyb3dzZXJUYWcpIHtcbiAgY29uc3QgZXhpc3RpbmdTdG9yZSA9IFNUT1JFX0xPT0tVUC5nZXQoZWwpO1xuICBpZiAoZXhpc3RpbmdTdG9yZSkge1xuICAgIHJldHVybiBleGlzdGluZ1N0b3JlO1xuICB9XG4gIGNvbnN0IGJyb3dzZXIgPSBjbG9zZXN0RWxlbWVudENyb3NzU2hhZG93Qm91bmRhcnkoZWwsIGJyb3dzZXJUYWcpO1xuICBpZiAoYnJvd3Nlcikge1xuICAgIFNUT1JFX0xPT0tVUC5zZXQoZWwsIGJyb3dzZXIuc3RvcmUpO1xuICAgIHJldHVybiBicm93c2VyLnN0b3JlO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG5leHBvcnQgeyBvbkJyb3dzZXJGaWx0ZXJSZW1vdmUgYXMgYSwgZ2V0U3RvcmUgYXMgZywgb25QcmV2aWV3Q2hhbmdlIGFzIG8gfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==