"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-b5021c"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-item-badge_11.entry.js":
/*!***********************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-item-badge_11.entry.js ***!
  \***********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   arcgis_item_badge: () => (/* binding */ ArcgisItemBadge),
/* harmony export */   arcgis_item_badges: () => (/* binding */ ArcgisItemBadges),
/* harmony export */   arcgis_item_favorite: () => (/* binding */ ArcgisItemFavorite),
/* harmony export */   arcgis_item_share_summary: () => (/* binding */ ArcgisItemShareSummary),
/* harmony export */   arcgis_item_type: () => (/* binding */ ArcgisItemType),
/* harmony export */   arcgis_selected: () => (/* binding */ ArcgisSelectedItem$1),
/* harmony export */   arcgis_selected_item: () => (/* binding */ ArcgisSelectedItem),
/* harmony export */   arcgis_sublayer_type: () => (/* binding */ ArcgisSublayerTypeIcon),
/* harmony export */   arcgis_user_avatar: () => (/* binding */ ArcgisUserAvatar),
/* harmony export */   arcgis_user_popup: () => (/* binding */ ArcgisUserPopup),
/* harmony export */   arcgis_user_popup_popover: () => (/* binding */ ArcgisUserPopupPopover)
/* harmony export */ });
/* harmony import */ var _index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-92ebb396.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-92ebb396.js");
/* harmony import */ var _locale_13e00a75_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./locale-13e00a75.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/locale-13e00a75.js");
/* harmony import */ var _badges_c3f03cc3_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./badges-c3f03cc3.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/badges-c3f03cc3.js");
/* harmony import */ var _functional_c82f5ab9_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./functional-c82f5ab9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-c82f5ab9.js");
/* harmony import */ var _portal_79caaeff_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./portal-79caaeff.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/portal-79caaeff.js");
/* harmony import */ var _utils_69e56978_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils-69e56978.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/utils-69e56978.js");
/* harmony import */ var _user_ba12ebd6_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./user-ba12ebd6.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/user-ba12ebd6.js");
/* harmony import */ var _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./config-eb5f7dc2.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/config-eb5f7dc2.js");
/* harmony import */ var _languageUtil_22258c90_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./languageUtil-22258c90.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/languageUtil-22258c90.js");
/* harmony import */ var _privileges_ccd5f37d_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./privileges-ccd5f37d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/privileges-ccd5f37d.js");
/* harmony import */ var _privileges_35590eb4_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./privileges-35590eb4.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/privileges-35590eb4.js");
/* harmony import */ var _url_f3b82cc7_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./url-f3b82cc7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/url-f3b82cc7.js");
/* harmony import */ var _dom_13f5b00c_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./dom-13f5b00c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/dom-13f5b00c.js");
/* harmony import */ var _item_types_b4fe86ad_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./item-types-b4fe86ad.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-types-b4fe86ad.js");
/* harmony import */ var _ui_ecf86bba_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./ui-ecf86bba.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ui-ecf86bba.js");
/* harmony import */ var _index_81d548b7_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./index-81d548b7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-81d548b7.js");
/* harmony import */ var _loadModules_aaf30bd6_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./loadModules-aaf30bd6.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/loadModules-aaf30bd6.js");
/* harmony import */ var _query_4f7b7e4d_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./query-4f7b7e4d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/query-4f7b7e4d.js");
/* harmony import */ var _user_e3dedc4a_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./user-e3dedc4a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/user-e3dedc4a.js");
/* harmony import */ var _api_f7934cd7_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./api-f7934cd7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/api-f7934cd7.js");
/* harmony import */ var _server_item_f12153e6_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./server-item-f12153e6.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/server-item-f12153e6.js");
/* harmony import */ var _item_properties_e6412a9a_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./item-properties-e6412a9a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-properties-e6412a9a.js");
/* harmony import */ var _add_item_97d577a9_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./add-item-97d577a9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/add-item-97d577a9.js");
/* harmony import */ var _functional_9f648bee_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./functional-9f648bee.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-9f648bee.js");
/* harmony import */ var _item_d9d70416_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./item-d9d70416.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-d9d70416.js");
/* harmony import */ var _storage_d7f5822e_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./storage-d7f5822e.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/storage-d7f5822e.js");
/* harmony import */ var _ags_68d4ae20_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./ags-68d4ae20.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ags-68d4ae20.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */




























function getIcon$2() {
  return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("svg", { viewBox: "0 0 16 16", fill: "currentColor" },
    (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "M2.7 9c-.4-1.3-.2-2.8.4-4s1.7-2.2 3-2.6c.4.4.8.9 1.1 1.2h.2l.1-.1v-.1C7.2 2.4 6.8.2 6.3 0c-.1 0-.2-.1-.4-.1-.1.1-.2.1-.4.2-.1 0-.2.1-.3.2 0 .2-.1.3-.1.4 0 .2.1.5.4.8-1.4.6-2.6 1.7-3.3 3-.7 1.4-.9 3-.5 4.5h1z" }),
    (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "M14 5c-.5-1.2-1.3-2.2-2.4-2.9S9.3 1 8 1h-.1c.1.3.2.6.3 1 1.2 0 2.4.5 3.3 1.2.9.8 1.5 1.8 1.8 3-3.4 4-10.1 4-12.2 3.9H1v.2l1.2.3c.5 1 1.3 1.8 2.2 2.4.9.6 2 .9 3 1v1h-2v1h5v-1h-2v-1c.9-.1 1.7-.3 2.5-.7.8-.4 1.5-1 2-1.6.6-.7 1-1.5 1.2-2.3.2-.8.3-1.7.2-2.6.7-.8.8-1.5-.3-1.8zm-6 8c-.9 0-1.7-.2-2.5-.6-.8-.4-1.4-.9-1.9-1.6 1.8.2 3.6 0 5.3-.5 1.7-.5 3.3-1.4 4.6-2.5-.1 1.4-.7 2.8-1.7 3.7-1 .9-2.4 1.5-3.8 1.5z" })));
}

function getIcon$1() {
  return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("svg", { width: "12", height: "15", viewBox: "0 0 12 15", fill: "none", xmlns: "http://www.w3.org/2000/svg" },
    (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "M6 0C2.58 0 0 1.29 0 3C0 4.71 2.58 6 6 6C7.76001 6.08843 9.5049 5.6358 11 4.703V10.037C11 10.1696 11.0527 10.2968 11.1464 10.3906C11.2402 10.4843 11.3674 10.537 11.5 10.537C11.6326 10.537 11.7598 10.4843 11.8536 10.3906C11.9473 10.2968 12 10.1696 12 10.037V3C12 1.29 9.42 0 6 0ZM6 5C3.138 5 1 3.944 1 3C1 2.056 3.138 1 6 1C8.862 1 11 2.056 11 3C11 3.944 8.862 5 6 5ZM11.5 11.5C11.3674 11.5 11.2402 11.5527 11.1464 11.6464C11.0527 11.7402 11 11.8674 11 12V12.064C11 12.96 8.816 14 6 14C3.184 14 1 12.96 1 12.064V7.85C2.5767 8.53314 4.28202 8.86875 6 8.834C6.13261 8.834 6.25979 8.78132 6.35355 8.68755C6.44732 8.59379 6.5 8.46661 6.5 8.334C6.5 8.20139 6.44732 8.07421 6.35355 7.98045C6.25979 7.88668 6.13261 7.834 6 7.834C4.1944 7.89821 2.40441 7.4791 0.815 6.62C0.749152 6.56222 0.668856 6.5234 0.582675 6.50767C0.496494 6.49194 0.40766 6.4999 0.325646 6.53069C0.243632 6.56148 0.171514 6.61396 0.116982 6.68252C0.0624495 6.75108 0.0275483 6.83316 0.016 6.92C0.014 6.933 0.0100001 6.945 0.00900006 6.957C0.00700006 6.972 0 6.985 0 7V12.064C0 13.902 3.05 15 6 15C8.95 15 12 13.902 12 12.064V12C12 11.8674 11.9473 11.7402 11.8536 11.6464C11.7598 11.5527 11.6326 11.5 11.5 11.5Z", fill: "currentColor" })));
}

function getIcon() {
  return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("svg", { width: "15", height: "14", viewBox: "0 0 15 14", fill: "none", xmlns: "http://www.w3.org/2000/svg" },
    (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "M14.9815 2.83602C14.9814 2.62597 14.8979 2.42454 14.7494 2.27596C14.6009 2.12738 14.3996 2.04379 14.1895 2.04352H11.5525C11.5402 2.04359 11.528 2.04122 11.5166 2.03655C11.5052 2.03188 11.4948 2.025 11.4861 2.01632C11.4773 2.00763 11.4704 1.9973 11.4657 1.98592C11.461 1.97454 11.4585 1.96234 11.4585 1.95002V0.988524C11.4571 0.85421 11.4287 0.721556 11.3749 0.598477C11.3211 0.475399 11.243 0.364419 11.1454 0.272161C11.0478 0.179903 10.9326 0.108259 10.8067 0.0615025C10.6807 0.0147464 10.5467 -0.00616255 10.4125 2.35228e-05H5.57652C5.29905 0.000288282 5.03302 0.110629 4.83682 0.306829C4.64062 0.503028 4.53028 0.769056 4.53002 1.04652V1.95002C4.53002 1.97482 4.52017 1.9986 4.50263 2.01614C4.4851 2.03367 4.46132 2.04352 4.43652 2.04352H1.79902C1.58896 2.04379 1.38759 2.12738 1.23911 2.27596C1.09062 2.42454 1.00715 2.62597 1.00702 2.83602V4.84402C1.00715 4.8812 1.02201 4.91681 1.04835 4.94305C1.07468 4.96929 1.11034 4.98402 1.14752 4.98402H2.45002L2.45702 4.97752V3.57652C2.45702 3.55305 2.46634 3.53054 2.48294 3.51394C2.49954 3.49735 2.52205 3.48802 2.54552 3.48802H13.2755C13.3349 3.48893 13.3915 3.51294 13.4334 3.55496C13.4754 3.59697 13.4992 3.65368 13.5 3.71302V10.584C13.5 10.7043 13.4763 10.8234 13.4303 10.9346C13.3843 11.0457 13.3168 11.1467 13.2317 11.2317C13.1467 11.3168 13.0457 11.3843 12.9346 11.4303C12.8234 11.4763 12.7043 11.5 12.584 11.5H8.13802C8.07976 11.5001 8.02289 11.4822 7.97513 11.4488C7.92737 11.4155 7.89102 11.3682 7.87102 11.3135C7.72621 10.9132 7.45683 10.5698 7.10244 10.3339C6.74805 10.0979 6.32734 9.98189 5.90211 10.0028C5.47688 10.0236 5.06956 10.1803 4.73997 10.4498C4.41039 10.7193 4.17592 11.0874 4.07102 11.5H2.82852C2.72813 11.5 2.63186 11.4601 2.56088 11.3892C2.4899 11.3182 2.45002 11.2219 2.45002 11.1215V9.59402C2.45002 9.56927 2.44025 9.54551 2.42284 9.52791C2.40543 9.51031 2.38178 9.50029 2.35702 9.50002H1.01402L1.00702 9.50702V11.797C1.00755 12.108 1.13137 12.4062 1.35134 12.6261C1.57132 12.8459 1.8695 12.9696 2.18052 12.97H4.26102C4.42562 13.2708 4.66545 13.5237 4.95706 13.704C5.24867 13.8844 5.58208 13.9859 5.9247 13.9988C6.26732 14.0117 6.60742 13.9355 6.91176 13.7776C7.21611 13.6197 7.47427 13.3856 7.66102 13.098C7.68692 13.0587 7.72218 13.0264 7.76363 13.0041C7.80508 12.9817 7.85143 12.97 7.89852 12.97H13.931C14.2096 12.9699 14.4767 12.8592 14.6737 12.6622C14.8707 12.4652 14.9814 12.1981 14.9815 11.9195V2.83602ZM10.5 1.81252C10.5 1.86225 10.4803 1.90994 10.4451 1.94511C10.4099 1.98027 10.3622 2.00002 10.3125 2.00002H5.68752C5.63779 2.00002 5.5901 1.98027 5.55494 1.94511C5.51977 1.90994 5.50002 1.86225 5.50002 1.81252V1.22502C5.5008 1.16559 5.52475 1.10881 5.56678 1.06678C5.60881 1.02476 5.66559 1.0008 5.72502 1.00002H10.275C10.3345 1.0008 10.3912 1.02476 10.4333 1.06678C10.4753 1.10881 10.4992 1.16559 10.5 1.22502V1.81252ZM6.00002 13C5.80224 13 5.6089 12.9414 5.44445 12.8315C5.28 12.7216 5.15183 12.5654 5.07614 12.3827C5.00045 12.2 4.98065 11.9989 5.01923 11.8049C5.05782 11.611 5.15306 11.4328 5.29291 11.2929C5.43277 11.1531 5.61095 11.0578 5.80493 11.0192C5.99891 10.9807 6.19998 11.0005 6.3827 11.0761C6.56543 11.1518 6.72161 11.28 6.83149 11.4445C6.94137 11.6089 7.00002 11.8022 7.00002 12C7.00002 12.2652 6.89466 12.5196 6.70713 12.7071C6.51959 12.8947 6.26524 13 6.00002 13Z", fill: "currentColor" }),
    (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "M6.6365 7.99698C6.68419 7.99703 6.73111 8.00905 6.77295 8.03194C6.8148 8.05483 6.85023 8.08785 6.876 8.12798C7.04796 8.40157 7.28805 8.62578 7.57274 8.77864C7.85743 8.93151 8.17696 9.00778 8.5 8.99998C8.84896 9.00826 9.19327 8.91871 9.49397 8.74145C9.79468 8.56419 10.0398 8.30631 10.2015 7.99698H11.9065C11.9313 7.99685 11.9551 7.98689 11.9726 7.96927C11.9902 7.95166 12 7.92783 12 7.90298V6.60848C12.0001 6.59612 11.9977 6.58387 11.993 6.57243C11.9883 6.561 11.9814 6.55061 11.9726 6.54187C11.9639 6.53312 11.9535 6.5262 11.9421 6.5215C11.9306 6.5168 11.9184 6.51442 11.906 6.51448H10.4C10.31 6.07987 10.0708 5.69047 9.72373 5.41383C9.37667 5.13719 8.94373 4.99077 8.5 4.99998C8.09556 5.01149 7.70379 5.14365 7.37503 5.37948C7.04627 5.61532 6.79552 5.94406 6.655 6.32348C6.63575 6.37938 6.59953 6.42787 6.55139 6.4622C6.50326 6.49653 6.44562 6.51498 6.3865 6.51498H0.5465C0.534208 6.51511 0.522456 6.52005 0.513763 6.52875C0.505071 6.53744 0.50013 6.54919 0.5 6.56148V7.94998C0.5 7.96245 0.504952 7.9744 0.513766 7.98322C0.52258 7.99203 0.534535 7.99698 0.547 7.99698H6.6365ZM8.5 5.94998C8.70767 5.94998 8.91068 6.01156 9.08335 6.12694C9.25602 6.24231 9.3906 6.4063 9.47007 6.59816C9.54955 6.79003 9.57034 7.00115 9.52982 7.20483C9.48931 7.40851 9.38931 7.5956 9.24246 7.74244C9.09562 7.88929 8.90852 7.98929 8.70484 8.02981C8.50116 8.07032 8.29005 8.04953 8.09818 7.97006C7.90632 7.89058 7.74233 7.756 7.62696 7.58333C7.51158 7.41066 7.45 7.20765 7.45 6.99998C7.45 6.72151 7.56062 6.45443 7.75754 6.25752C7.95445 6.06061 8.22152 5.94998 8.5 5.94998Z", fill: "currentColor" })));
}

const badgeIcons = {
  Authoritative: {
    icon: "check-circle"
  },
  Deprecated: {
    icon: "circle-disallowed"
  },
  Marketplace: {
    icon: "marketplace"
  },
  Retired: {
    icon: "exclamation-mark-triangle"
  },
  "Public Data Collection": {
    icon: "pencil"
  },
  Subscriber: { icon: "security" },
  Premium: { icon: "shield-coin" },
  Collaboration: { icon: "collaboration-distributed" },
  Registered: { icon: "key" },
  "Living Atlas": { image: getIcon$2 },
  "Open Data": { image: getIcon$1 },
  Solution: { image: getIcon }
};

const arcgisItemBadgeCss = ".badge{--calcite-ui-foreground-2:var(--arcgis-item-badge-info-background);--calcite-ui-text-1:var(--arcgis-item-badge-info-foreground);--calcite-ui-icon-color:var(--arcgis-item-badge-info-foreground);display:inline-block;border-width:0}.authoritative{--calcite-ui-foreground-2:var(--arcgis-item-badge-success-background);--calcite-ui-text-1:var(--arcgis-item-badge-success-foreground);--calcite-ui-icon-color:var(--arcgis-item-badge-success-foreground)}.deprecated{--calcite-ui-foreground-2:var(--arcgis-item-badge-danger-background);--calcite-ui-text-1:var(--arcgis-item-badge-danger-foreground);--calcite-ui-icon-color:var(--arcgis-item-badge-danger-foreground)}.image{border-radius:0;align-items:center;justify-content:flex-end}.narrow{width:2rem;box-sizing:border-box;--calcite-chip-spacing-unit-l:0}.narrow .image{justify-content:center}.wrapper{display:flex;align-items:center}.icon{margin-top:0.25rem;-webkit-margin-start:0.375rem;margin-inline-start:0.375rem}.image svg{width:1rem;height:1rem;color:var(--calcite-ui-icon-color)}.image-l svg{width:1.5rem;height:1.5rem}.narrow--s{width:1.5rem}.narrow--s .icon{margin:0.25rem}.narrow--s .image{-webkit-margin-start:0;margin-inline-start:0}.narrow--m .icon{margin:0.3125rem 0.5rem}.narrow--m .image{-webkit-margin-start:0;margin-inline-start:0}.narrow--l{width:2.75rem}.narrow--l .icon{margin:0.5rem 0.8rem}.narrow--l .image{-webkit-margin-end:0.25rem;margin-inline-end:0.25rem}";

const ArcgisItemBadge = class {
  constructor(hostRef) {
    (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.openTooltip = () => {
      this.tooltipOpen = true;
    };
    this.closeTooltip = async () => {
      await (0,_functional_c82f5ab9_js__WEBPACK_IMPORTED_MODULE_3__.t)(200);
      this.tooltipOpen = false;
      this.tooltip = null;
    };
    this.item = undefined;
    this.user = undefined;
    this.width = "full";
    this.scale = "m";
    this.badgeType = undefined;
    this.showTooltip = true;
    this.loading = true;
    this.tooltipText = "";
    this.tooltipOpen = undefined;
  }
  async componentWillLoad() {
    const { el } = this;
    const locale = await (0,_locale_13e00a75_js__WEBPACK_IMPORTED_MODULE_1__.g)(el);
    this.i18n = locale[0];
    this.lang = locale[1];
    this.updateTooltipText();
  }
  async updateTooltipText() {
    const { badgeType, item, i18n, lang, user } = this;
    this.tooltipText = await (0,_badges_c3f03cc3_js__WEBPACK_IMPORTED_MODULE_2__.a)(badgeType, item, user, i18n, lang);
    this.loading = false;
  }
  renderImage(image) {
    if (!image) {
      return null;
    }
    return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { slot: "image", class: { image: true, [`image-${this.scale}`]: true } }, image()));
  }
  render() {
    const { badgeType, width, loading, tooltipText, scale, showTooltip } = this;
    const i18n = this.i18n[badgeType];
    const { icon, image } = badgeIcons[this.badgeType];
    const narrow = width === "narrow";
    const classes = {
      badge: true,
      authoritative: badgeType === "Authoritative",
      deprecated: badgeType === "Deprecated",
      narrow,
      [`narrow--${scale}`]: narrow
    };
    return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.H, null, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", Object.assign({ class: "wrapper" }, (showTooltip
      ? {
        onMouseLeave: this.closeTooltip,
        onMouseEnter: this.openTooltip,
        onFocusout: this.closeTooltip,
        onFocusin: this.openTooltip
      }
      : {})), narrow ? ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-chip", Object.assign({ class: classes, value: badgeType }, (icon ? { icon } : {}), (showTooltip ? { tabIndex: 0 } : {}), { ref: (el) => (this.chip = el), scale: scale }), image && this.renderImage(image))) : ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-chip", Object.assign({ class: classes, value: badgeType }, (icon ? { icon } : {}), (showTooltip ? { tabIndex: 0 } : {}), { ref: (el) => (this.chip = el), scale: scale }), image && this.renderImage(image), i18n.title)), this.tooltipOpen && this.showTooltip && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-tunnel", { reference: this.el }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-tooltip", { ref: (el) => {
        if (!el) {
          return;
        }
        el.referenceElement = this.chip;
        if (!this.tooltip) {
          this.tooltip = el;
          this.tooltip.open = true;
        }
      }, closeOnClick: true, label: i18n.title, placement: "bottom-start", offsetDistance: 6, offsetSkidding: 0, style: { pointerEvents: "none" } }, narrow && !loading && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("h3", { class: "tooltip__title", style: {
        fontSize: "var(--calcite-font-size--1)",
        color: "var(--calcite-ui-text-1)",
        margin: "0 0 .25rem 0",
        padding: "0"
      } }, i18n.title)), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("p", { class: "tooltip__text", style: {
        fontSize: "var(--calcite-font-size--2)",
        color: "var(--calcite-ui-text-1)",
        margin: "0",
        padding: "0"
      } }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-loader", { hidden: !loading, label: this.i18n.loading, inline: true, scale: "s" }), loading ? this.i18n.loading : tooltipText)))))));
  }
  get el() { return (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.d)(this); }
};
ArcgisItemBadge.style = arcgisItemBadgeCss;

const arcgisItemBadgesCss = ":host{display:flex;align-items:center}.badge{display:inline-block;-webkit-margin-end:0.25rem;margin-inline-end:0.25rem}";

const ArcgisItemBadges = class {
  constructor(hostRef) {
    (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.item = undefined;
    this.portal = undefined;
    this.user = undefined;
    this.width = "full";
    this.showTooltips = false;
    this.empty = false;
    this.scale = "m";
    this.badges = [];
  }
  componentWillLoad() {
    if (this.item) {
      this.updateBadges(this.item);
    }
  }
  updateBadges(item) {
    var _a;
    this.badges = (0,_badges_c3f03cc3_js__WEBPACK_IMPORTED_MODULE_2__.g)(item, this.portal, this.user);
    if (!((_a = this.badges) === null || _a === void 0 ? void 0 : _a.length)) {
      this.empty = true;
    }
  }
  render() {
    const { item, width, scale, badges, user, showTooltips } = this;
    return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.H, null, badges.map((badge) => ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-item-badge", { class: "badge", item: item, user: user, badgeType: badge, width: width, scale: scale, showTooltip: showTooltips })))));
  }
  get el() { return (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.d)(this); }
  static get watchers() { return {
    "item": ["updateBadges"]
  }; }
};
ArcgisItemBadges.style = arcgisItemBadgesCss;

let QUEUE = [];
let PROMISES = [];
const fetchFavorites = (0,_functional_c82f5ab9_js__WEBPACK_IMPORTED_MODULE_3__.d)(async (portal, user) => {
  var _a;
  // empty the queues and save the current state locally so that further calls can be staged in the queue
  const ids = [...QUEUE];
  const promises = [...PROMISES];
  QUEUE = [];
  PROMISES = [];
  const q = `(group:${user.favGroupId} AND id:(${ids.join(" OR ")}))`;
  const response = await (0,_portal_79caaeff_js__WEBPACK_IMPORTED_MODULE_4__.r)(`${(0,_portal_79caaeff_js__WEBPACK_IMPORTED_MODULE_4__.g)(portal)}search`, { num: 100, q });
  const favorites = (_a = response === null || response === void 0 ? void 0 : response.results) === null || _a === void 0 ? void 0 : _a.map((item) => item.id);
  promises.forEach(({ id, resolve }) => {
    resolve(favorites.includes(id));
  });
  return;
}, 300);
async function isItemInFavorites(id, portal, user) {
  if (!user) {
    return false;
  }
  const promise = new Promise((resolve) => {
    PROMISES.push({ id, resolve });
  });
  if (!QUEUE.includes(id)) {
    QUEUE.push(id);
  }
  fetchFavorites(portal, user);
  return promise;
}
function addToFavorites(options) {
  return updateFavoriteStatus(options, true);
}
function removeFromFavorites(options) {
  return updateFavoriteStatus(options, false);
}
function updateFavoriteStatus({ item, portal, user }, favorite) {
  const { access, id } = item;
  const url = `${(0,_portal_79caaeff_js__WEBPACK_IMPORTED_MODULE_4__.g)(portal)}content/items/${id}/${favorite ? "share" : "unshare"}`;
  const content = {
    everyone: access === "public",
    org: access === "org",
    groups: user.favGroupId,
    items: id
  };
  return (0,_portal_79caaeff_js__WEBPACK_IMPORTED_MODULE_4__.r)(url, content, {}, "post");
}

const ArcgisItemFavorite = class {
  constructor(hostRef) {
    (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.arcgisItemFavoriteUpdate = (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "arcgisItemFavoriteUpdate", 7);
    this.item = undefined;
    this.portal = undefined;
    this.user = undefined;
    this.width = "full";
    this.iconOnly = false;
    this.scale = "m";
    this.isFavorite = undefined;
  }
  /** Set focus on the component */
  async setFocus() {
    var _a;
    (_a = this.button) === null || _a === void 0 ? void 0 : _a.setFocus();
  }
  /** When favorite is updated, sync different favorite components for the same item */
  updateFavorite(e) {
    const { id, favorite } = e.detail;
    if (id === this.item.id) {
      this.isFavorite = favorite;
    }
  }
  async componentWillLoad() {
    const { el, item, portal, user } = this;
    const locale = await (0,_locale_13e00a75_js__WEBPACK_IMPORTED_MODULE_1__.g)(el);
    this.i18n = locale[0];
    this.isFavorite = await isItemInFavorites(item.id, portal, user);
  }
  async toggleFavorite() {
    const { user, portal, item, isFavorite } = this;
    this.isFavorite = !isFavorite;
    const options = { user, portal, item };
    await (isFavorite ? removeFromFavorites(options) : addToFavorites(options));
    this.arcgisItemFavoriteUpdate.emit({
      id: item.id,
      favorite: this.isFavorite
    });
  }
  render() {
    const { i18n, isFavorite, width, scale, iconOnly } = this;
    const text = isFavorite ? i18n.remove : i18n.add;
    return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.H, null, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-button", Object.assign({ width: iconOnly ? "auto" : width, scale: scale, appearance: iconOnly ? "transparent" : "outline-fill", kind: "neutral", iconStart: isFavorite ? "star-f" : "star", onClick: () => {
        this.toggleFavorite();
      }, ref: (el) => (this.button = el) }, (iconOnly ? { ariaLabel: text } : {})), !iconOnly && text)));
  }
  get el() { return (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.d)(this); }
};

const arcgisItemShareSummaryCss = ":host{display:inline-flex;align-items:center;background-color:var(--calcite-ui-foreground-1);justify-content:center;border:1px solid var(--calcite-ui-border-1);border-radius:calc(var(--arcgis-item-share-summary-spacing) + 0.25rem);padding:0.25rem 0.5rem;min-width:calc(var(--arcgis-item-share-summary-spacing))}:host([scale=s]){font-size:0.875rem;--arcgis-item-share-summary-spacing:1rem}:host([scale=m]){font-size:1rem;--arcgis-item-share-summary-spacing:1.5rem}:host([scale=l]){font-size:1.125rem;--arcgis-item-share-summary-spacing:2rem}.icon{display:block;flex-grow:0;flex-shrink:0;width:var(--arcgis-item-share-summary-spacing);height:var(--arcgis-item-share-summary-spacing)}.text{color:var(--calcite-ui-text-1);font-weight:400;-webkit-margin-start:calc(var(--arcgis-item-share-summary-spacing) / 2);margin-inline-start:calc(var(--arcgis-item-share-summary-spacing) / 2)}";

const ArcgisItemShareSummary = class {
  constructor(hostRef) {
    (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.item = undefined;
    this.groups = undefined;
    this.showText = true;
    this.scale = undefined;
  }
  async componentWillLoad() {
    const { el } = this;
    const locale = await (0,_locale_13e00a75_js__WEBPACK_IMPORTED_MODULE_1__.g)(el);
    this.i18n = locale[0];
  }
  getIcon(access) {
    const lookup = {
      private: "user",
      shared: "user",
      org: "organization",
      public: "globe"
    };
    return lookup[access] || "globe";
  }
  render() {
    const { item, i18n, scale, showText } = this;
    return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.H, null, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { class: "icon", icon: this.getIcon(item.access), scale: scale }), item.access === "shared" && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.F, null, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { class: "icon", icon: "plus", scale: scale }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { class: "icon", icon: "group", scale: scale }))), showText && (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: "text" }, i18n[item.access])));
  }
  get el() { return (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.d)(this); }
};
ArcgisItemShareSummary.style = arcgisItemShareSummaryCss;

function getItemDisplayInformation({ item }) {
  const icon = getItemIcon(item);
  return {
    displayName: getDisplayName(item),
    iconPath: (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.a)(`./assets/arcgis-item-type/${icon}16.svg`)
  };
}
// TODO: portal is no longer needed for this calculation, consider removing
function getDisplayName(item) {
  var _a;
  const keywords = item.typeKeywords || [];
  switch (item.type) {
    case "Feature Service":
    case "Feature Collection":
    case "Stream Service":
      if (keywords.includes("ArcgisWorkflowManager")) {
        if (keywords.includes("View Service")) {
          return "Workflow View";
        }
        return "Workflow Layer";
      }
      if (keywords.includes("ArcgisWorkflowJobLocation") && keywords.includes("View Service")) {
        return "Workflow Job Location View";
      }
      if (keywords.includes("Table")) {
        return "Table";
      }
      if (keywords.includes("Route Layer")) {
        return "Route Layer";
      }
      if (keywords.includes("Markup")) {
        return "Markup";
      }
      return "Feature Layer";
    case "Image Service":
      if (keywords.includes("Elevation 3D Layer")) {
        return "Elevation Layer";
      }
      if (keywords.includes("Tiled Imagery")) {
        return "Tiled Imagery Layer";
      }
      return "Imagery Layer";
    case "Scene Service":
      return "Scene Layer";
    case "Video Service":
      return "Video Layer";
    case "Scene Package":
      return "Scene Layer Package";
    case "Geoprocessing Service":
      if (keywords.includes("Web Tool")) {
        return "Tool";
      }
      return "Geoprocessing Service";
    case "StoryMap":
      if (keywords.includes("storymapcollection")) {
        return "StoryMap Collection";
      }
      if (keywords.includes("storymapbriefing")) {
        return "StoryMap Briefing";
      }
      return "StoryMap";
    case "Geocoding Service":
      return "Locator";
    case "Geoenrichment Service":
      return "GeoEnrichment Service";
    case "Microsoft Powerpoint":
      return "Microsoft PowerPoint";
    case "GeoJson":
      return "GeoJSON";
    case "Globe Service":
      return "Globe Layer";
    case "Vector Tile Service":
      return "Tile Layer";
    case "netCDF":
      return "NetCDF";
    case "Map Service":
      if (!keywords.includes("Spatiotemporal") &&
        (keywords.includes("Hosted Service") || keywords.includes("Tiled")) &&
        !keywords.includes("Relational")) {
        return "Tile Layer";
      }
      return "Map Image Layer";
    case "datastore catalog service":
      return "Big Data File Share";
    case "Compact Tile Package":
      return "Tile Package (tpkx)";
    case "OGCFeatureServer":
      return "OGC Feature Layer";
    case "Web Mapping Application":
    case "Application":
    case "Mobile Application":
    case "Operation View":
    case "Desktop Application":
      if (keywords.includes("configurableApp")) {
        return "Instant App";
      }
  }
  if ((_a = item.type) === null || _a === void 0 ? void 0 : _a.toLowerCase().includes("add in")) {
    return item.type.replace(/(add in)/gi, "Add-In");
  }
  return item.type;
}
function getItemIcon(item) {
  var _a;
  const type = ((_a = item === null || item === void 0 ? void 0 : item.type) === null || _a === void 0 ? void 0 : _a.toLowerCase()) || "";
  const keywords = (item === null || item === void 0 ? void 0 : item.typeKeywords) || [];
  const hosted = keywords.includes("Hosted Service");
  switch (type.trim()) {
    case "360 vr experience":
      return "360vr";
    case "feature service":
    case "feature collection":
    case "kml":
    case "wfs":
      const isSpatiotemporal = keywords.includes("Spatiotemporal");
      if (keywords.includes("Table")) {
        return isSpatiotemporal ? "spatiotemporaltable" : "table";
      }
      if (keywords.includes("Route Layer")) {
        return "routelayer";
      }
      if (keywords.includes("Markup")) {
        return "markup";
      }
      if (isSpatiotemporal) {
        return "spatiotemporal";
      }
      if (keywords.includes("UtilityNetwork")) {
        return "utilitynetwork";
      }
      return hosted ? "featureshosted" : "features";
    case "group layer":
      if (keywords.includes("Map")) {
        return "layergroup2d";
      }
      if (keywords.includes("Scene")) {
        return "layergroup3d";
      }
      return "layergroup";
    case "wmts":
      return "maptiles";
    case "map service":
    case "wms":
      return hosted || keywords.includes("Tiled") ? "maptiles" : "mapimages";
    case "scene service":
      if (keywords.includes("Line")) {
        return "sceneweblayerline";
      }
      if (keywords.includes("3DObject")) {
        return "sceneweblayermultipatch";
      }
      if (keywords.includes("Point")) {
        return "sceneweblayerpoint";
      }
      if (keywords.includes("IntegratedMesh")) {
        return "sceneweblayermesh";
      }
      if (keywords.includes("PointCloud")) {
        return "sceneweblayerpointcloud";
      }
      if (keywords.includes("Polygon")) {
        return "sceneweblayerpolygon";
      }
      if (keywords.includes("Building")) {
        return "sceneweblayerbuilding";
      }
      if (keywords.includes("Voxel")) {
        return "sceneweblayervoxel";
      }
      return "sceneweblayer";
    case "image service":
      if (keywords.includes("Elevation 3D Layer")) {
        return "elevationlayer";
      }
      if (keywords.includes("Tiled Imagery")) {
        return "tiledimagerylayer";
      }
      return "imagery";
    case "stream service":
      return "streamlayer";
    case "video service":
      return "mediaservice";
    case "vector tile service":
      return "vectortile";
    case "datastore catalog service":
      return "datastorecollection";
    case "geocoding service":
      return "geocodeservice";
    case "geoprocessing service":
      return keywords.includes("Web Tool") ? "tool" : "layers";
    case "geodata service":
      return "geodataservice";
    case "web map":
    case "cityengine web scene":
      return "maps";
    case "web scene":
      return keywords.includes("ViewingMode-Local") ? "webscenelocal" : "websceneglobal";
    case "application":
    case "web mapping application":
    case "mobile application":
    case "operation view":
    case "desktop application":
      return keywords.includes("configurableApp") ? "instantapps" : "apps";
    case "map document":
    case "map package":
    case "published map":
    case "scene document":
    case "globe document":
    case "basemap package":
    case "mobile basemap package":
    case "mobile map package":
    case "project package":
    case "project template":
    case "pro map":
    case "layout":
      return "mapsgray";
    case "layer":
      if (keywords.includes("ArcGIS Pro")) {
        return "mapsgray";
      }
    case "explorer map":
      if (keywords.indexOf("Explorer Document")) {
        return "mapsgray";
      }
      if (keywords.includes("Explorer Mapping Application")) {
        return "datafilesgray";
      }
    case "api key":
      return "key";
    case "csv":
      return "csv";
    case "shapefile":
      return "shapefile";
    case "csv collection":
      return "csvcollection";
    case "media layer":
      return "medialayer";
    case "microsoft excel":
      return "excel";
    case "microsoft powerpoint":
      return "powerpoint";
    case "microsoft word":
      return "word";
    case "pdf":
      return "pdf";
    case "sqlite geodatabase":
      return "sqlite";
    case "administrative report":
      return "report";
    case "image":
      return "image";
    case "cad drawing":
      return "cad";
    case "service definition":
    case "geojson":
    case "360 vr experience":
    case "netcdf":
      return "data";
    case "explorer add in":
    case "desktop add in":
    case "windows viewer add in":
    case "windows viewer configuration":
      return "appsgray";
    case "arcgis pro add in":
    case "arcgis pro configuration":
      return "addindesktop";
    case "rule package":
    case "file geodatabase":
    case "kml collection":
    case "windows mobile package":
    case "map template":
    case "desktop application template":
    case "gml":
    case "arcpad package":
    case "code sample":
    case "document link":
    case "earth configuration":
    case "operations dashboard add in":
    case "rules package":
    case "workflow manager package":
      return "datafilesgray";
    case "form":
      if (keywords.includes("Survey123")) {
        return "survey";
      }
      return "datafilesgray";
    case "network analysis service":
    case "geoprocessing service":
    case "geodata service":
    case "geometry service":
    case "geoprocessing package":
    case "locator package":
    case "geoprocessing sample":
    case "workflow manager service":
      return "toolsgray";
    case "layer":
    case "layer package":
    case "explorer layer":
      return "layersgray";
    case "scene package":
      return "scenepackage";
    case "mobile scene package":
      return "mobilescenepackage";
    case "tile package":
    case "compact tile package":
      return "tilepackage";
    case "task file":
      return "taskfile";
    case "report template":
      return "reporttemplate";
    case "statistical data collection":
      return "statisticaldatacollection";
    case "insights workbook":
      return "workbook";
    case "insights model":
      return "insightsmodel";
    case "insights page":
      return "insightspage";
    case "insights theme":
      return "insightstheme";
    case "hub initiative":
      return "hubinitiative";
    case "hub page":
      return "hubpage";
    case "hub event":
      return "hubevent";
    case "hub site application":
      return "hubsite";
    case "hub project":
      return "hubproject";
    case "relational database connection":
      return "relationaldatabaseconnection";
    case "big data file share":
      return "datastorecollection";
    case "image":
      return "image";
    case "image collection":
      return "imagecollection";
    case "style":
      return "style";
    case "desktop style":
      return "desktopstyle";
    case "dashboard":
      return "dashboard";
    case "raster function template":
      return "rasterprocessingtemplate";
    case "vector tile package":
      return "vectortilepackage";
    case "ortho mapping project":
      return "orthomappingproject";
    case "ortho mapping template":
      return "orthomappingtemplate";
    case "solution":
      return "solutions";
    case "geopackage":
      return "geopackage";
    case "deep learning package":
      return "deeplearningpackage";
    case "real time analytic":
      return "realtimeanalytics";
    case "big data analytic":
      return "bigdataanalytics";
    case "feed":
      return "feed";
    case "excalibur imagery project":
      return "excaliburimageryproject";
    case "notebook":
      return "notebook";
    case "storymap":
      if (keywords.includes("storymapcollection")) {
        return "storymapcollection";
      }
      if (keywords.includes("storymapbriefing")) {
        return "storymapbriefing";
      }
      return "storymap";
    case "survey123 add in":
      return "survey123addin";
    case "mission":
      return "mission";
    case "mission report":
      return "missionreport";
    case "quickcapture project":
      return "quickcaptureproject";
    case "pro report":
      return "proreport";
    case "urban model":
      return "urbanmodel";
    case "web experience":
      return "experiencebuilder";
    case "web experience template":
      return "webexperiencetemplate";
    case "experience builder widget":
      return "experiencebuilderwidget";
    case "experience builder widget package":
      return "experiencebuilderwidgetpackage";
    case "workflow":
      return "workflow";
    case "insights script":
      return "insightsscript";
    case "kernel gateway connection":
      return "kernelgatewayconnection";
    case "hub initiative template":
      return "hubinitiativetemplate";
    case "storymap theme":
      return "storymaptheme";
    case "knowledge graph":
      return "knowledgegraph";
    case "native application":
      return "nativeapp";
    case "native application installer":
      return "nativeappinstaller";
    case "link chart":
      return "linkchart";
    case "investigation":
      return "investigation";
    case "ogcfeatureserver":
      return "features";
    case "pro project":
      return "proproject";
    case "insights workbook package":
      return "insightsworkbookpackage";
    case "apache parquet":
      return "apacheparquet";
    case "notebook code snippets":
    case "notebook code snippet library":
      return "notebookcodesnippets";
    case "suitability model":
      return "suitabilitymodel";
    case "esri classifier definition":
      return "classifierdefinition";
    case "esri classification schema":
      return "classificationschema";
    case "insights data engineering workbook":
      return "dataengineeringworkbook";
    case "insights data engineering model":
      return "dataengineeringmodel";
    case "deep learning studio project":
      return "deeplearningproject";
    case "data store":
      return "datastore";
    case "data pipeline":
      return "datapipeline";
    default:
      if (keywords.includes("Document")) {
        return "datafilesgray";
      }
      return type.includes("service") ? "layers" : "maps";
  }
}

const arcgisItemTypeCss = ":host{display:inline-flex;align-items:center}:host([scale=s]){font-size:0.75rem;--arcgis-item-type-spacing:1rem}:host([scale=m]){font-size:0.875rem;--arcgis-item-type-spacing:1rem}:host([scale=l]){font-size:1rem;--arcgis-item-type-spacing:1.5rem}.icon{display:block;flex-grow:0;flex-shrink:0;width:var(--arcgis-item-type-spacing);height:var(--arcgis-item-type-spacing)}.text{color:var(--calcite-ui-text-2);line-height:1.25;-webkit-margin-start:calc(var(--arcgis-item-type-spacing) / 2);margin-inline-start:calc(var(--arcgis-item-type-spacing) / 2)}";

const ArcgisItemType = class {
  constructor(hostRef) {
    (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.item = undefined;
    this.portal = undefined;
    this.scale = "s";
    this.showText = true;
    this.showIcon = true;
    this.iconPath = "";
    this.displayName = "";
  }
  async componentWillLoad() {
    const { item } = this;
    if (item) {
      this.getItemDisplayInformation(item);
    }
  }
  getItemDisplayInformation(item) {
    const { displayName, iconPath } = getItemDisplayInformation({ item });
    this.displayName = displayName;
    this.iconPath = iconPath;
  }
  updateTypeInformation(item) {
    if (!this.displayName || !this.iconPath) {
      const { displayName, iconPath } = getItemDisplayInformation({ item });
      this.displayName = displayName;
      this.iconPath = iconPath;
    }
  }
  render() {
    return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.H, null, this.showIcon && (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("img", { src: this.iconPath, class: `icon icon--${this.scale}` }), this.showText && (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: "text" }, this.displayName)));
  }
  static get assetsDirs() { return ["assets"]; }
  get el() { return (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.d)(this); }
  static get watchers() { return {
    "item": ["updateTypeInformation"]
  }; }
};
ArcgisItemType.style = arcgisItemTypeCss;

const arcgisSelectedCss = ".hide{display:none}.wrapper{display:flex;opacity:1;transition-property:opacity}.empty{font-size:0.75rem;color:var(--calcite-ui-text-3);padding:0.75rem;display:block}.loading{opacity:0}.button{-webkit-margin-end:0.5rem;margin-inline-end:0.5rem}.white-button{border:1px solid var(--calcite-ui-foreground-3);font-family:inherit;background-color:var(--calcite-ui-foreground-1);transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;padding-left:0.75rem;padding-right:0.75rem;padding-top:0.5rem;padding-bottom:0.5rem;outline-color:transparent;height:2rem;box-sizing:border-box;cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:flex;align-items:center;-webkit-margin-end:0.25rem;margin-inline-end:0.25rem}.white-button:hover{box-shadow:inset 0 0 0 1px var(--calcite-ui-foreground-3)}.white-button:focus{outline:2px solid var(--calcite-ui-brand);outline-offset:2px}.white-button--disabled{pointer-events:none;opacity:0.25}.white-button__icon{-webkit-margin-start:0.75rem;margin-inline-start:0.75rem}calcite-dropdown[open] .white-button{border-bottom-color:var(--calcite-ui-brand)}.page-range{font-weight:400;font-size:0.875rem;color:var(--calcite-ui-text-2);line-height:2rem}.screen-readers-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.checkbox{margin-top:0.75rem}";

const ArcgisSelectedItem$1 = class {
  constructor(hostRef) {
    (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.arcgisSelectedDeselectAll = (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "arcgisSelectedDeselectAll", 7);
    this.arcgisSelectedSelectPage = (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "arcgisSelectedSelectPage", 7);
    this.checked = undefined;
    this.indeterminate = undefined;
    this.heading = undefined;
    this.emptyText = undefined;
    this.total = undefined;
    this.totalSelected = undefined;
    this.hideCheckbox = false;
    this.loading = undefined;
  }
  async componentWillLoad() {
    const { element } = this;
    const locale = await (0,_locale_13e00a75_js__WEBPACK_IMPORTED_MODULE_1__.g)(element);
    this.i18n = locale[0];
  }
  render() {
    const { i18n, checked, indeterminate, heading, totalSelected } = this;
    return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.H, null, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: {
        wrapper: true
      } }, !this.hideCheckbox && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { for: "selected-checkbox", class: "white-button" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: "screen-readers-only" }, checked ? i18n.deselect : i18n.selectPage), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-checkbox", { class: "checkbox", id: "selected-checkbox", disabled: !this.total, checked: checked, indeterminate: indeterminate, onCalciteCheckboxChange: (e) => {
        e.stopPropagation();
        const checked = e.currentTarget.checked;
        if (checked) {
          this.arcgisSelectedSelectPage.emit();
        }
        else {
          this.arcgisSelectedDeselectAll.emit();
        }
      } }))), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-dropdown", { width: "l", closeOnSelectDisabled: true }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-button", { class: "button", slot: "trigger", kind: "neutral", appearance: "outline-fill", iconEnd: !!this.totalSelected ? "caret-down" : null }, i18n.selected.replace("${number}", `${totalSelected || 0}`)), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-dropdown-group", { selectionMode: "none", groupTitle: heading }, totalSelected < 1 && (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: "empty" }, this.emptyText), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", null))))));
  }
  get element() { return (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.d)(this); }
};
ArcgisSelectedItem$1.style = arcgisSelectedCss;

const arcgisSelectedItemCss = ".selected-item__wrapper{display:flex;align-items:center}.selected-item__content{flex:1 1 0%;box-sizing:border-box;-webkit-padding-start:0.5em;padding-inline-start:0.5em;max-width:12rem}.selected-item__title{padding:0;margin:0;font-weight:500;color:var(--calcite-ui-text-1);font-size:0.875rem;margin-top:0.25rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.selected-item__description{padding:0;margin:0;font-weight:400;color:var(--calcite-ui-text-1);font-size:0.75rem;margin-top:0.25rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}";

const ArcgisSelectedItem = class {
  constructor(hostRef) {
    (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.arcgisSelectedItemRemove = (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "arcgisSelectedItemRemove", 7);
    this.heading = undefined;
    this.description = undefined;
  }
  render() {
    return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.H, null, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-dropdown-item", { "selection-mode": "none", onClick: (e) => {
        // there is an error with dropdown-items looking across shadow dom, so prevent default and manage this ourselves
        e.preventDefault();
        e.stopPropagation();
        this.arcgisSelectedItemRemove.emit();
      } }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "selected-item__wrapper" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { name: "content-start" }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "selected-item__content" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("h4", { class: "selected-item__title" }, this.heading), this.description && (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("p", { class: "selected-item__description" }, this.description)), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { name: "content-end" }), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { icon: "x", scale: "s" })))));
  }
  get element() { return (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.d)(this); }
};
ArcgisSelectedItem.style = arcgisSelectedItemCss;

const arcgisSublayerTypeCss = ":host{display:flex;align-items:center;line-height:1.35;--sublayer-type-font-size:var(--calcite-font-size--1)}.text{flex:1 1 0%;color:inherit;-webkit-margin-start:0.5rem;margin-inline-start:0.5rem}.name{font-weight:500;font-size:var(--sublayer-type-font-size)}.type{font-weight:400;font-size:var(--sublayer-type-font-size)}";

const ArcgisSublayerTypeIcon = class {
  constructor(hostRef) {
    (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.geometry = undefined;
    this.type = undefined;
    this.scale = undefined;
    this.name = undefined;
    this.showName = true;
    this.showIcon = true;
    this.showType = true;
    this.renderer = undefined;
  }
  async componentWillLoad() {
    const locale = await (0,_locale_13e00a75_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.el);
    this.i18n = locale[0];
  }
  render() {
    const { geometry, name, type, showName, showIcon, showType, renderer, i18n } = this;
    const info = (0,_utils_69e56978_js__WEBPACK_IMPORTED_MODULE_5__.g)({ type, geometry });
    if (renderer) {
      return renderer(Object.assign(Object.assign({}, info), { name }));
    }
    return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.H, null, showIcon && (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { icon: info.icon, class: "icon", scale: this.scale }), (showType || showName) && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "text" }, showName && (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "name" }, name), showType && (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "type" }, i18n[info.type])))));
  }
  get el() { return (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.d)(this); }
};
ArcgisSublayerTypeIcon.style = arcgisSublayerTypeCss;

const arcgisUserAvatarCss = ":host{max-width:100%}.skeleton{animation:pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;display:flex;align-items:center}.skeleton-avatar{border-radius:100%;background-color:var(--calcite-ui-foreground-3);width:var(--arcgis-user-avatar-size);height:var(--arcgis-user-avatar-size)}.skeleton-name{background-color:var(--calcite-ui-foreground-3);border-radius:var(--calcite-border-radius);width:var(--arcgis-user-avatar-skeleton-width);border-radius:var(--arcgis-user-avatar-spacing);height:var(--arcgis-user-avatar-spacing);-webkit-margin-start:var(--arcgis-user-avatar-spacing);margin-inline-start:var(--arcgis-user-avatar-spacing)}@keyframes pulse{0%,100%{opacity:1}50%{opacity:0.5}}.avatar{display:block;flex-grow:0;flex-shrink:0;border-radius:100%;background-color:var(--calcite-ui-foreground-3);width:var(--arcgis-user-avatar-size);height:var(--arcgis-user-avatar-size)}.text{color:var(--calcite-ui-text-2);display:flex;flex-direction:column;justify-content:center;min-width:0;text-align:start;-webkit-margin-start:var(--arcgis-user-avatar-spacing);margin-inline-start:var(--arcgis-user-avatar-spacing);line-height:calc(var(--arcgis-user-avatar-size) / 2)}.text--no-avatar{-webkit-margin-start:0;margin-inline-start:0}.text--underline .title{text-decoration:underline}.title,.description{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.has-description{font-weight:500}.description{font-weight:400;color:var(--calcite-ui-text-2)}:host{display:inline-flex;align-items:center;min-width:0}:host([scale=xs]){font-size:0.75rem;--arcgis-user-avatar-size:18px;--arcgis-user-avatar-spacing:0.25rem}:host([scale=xs]) .description{font-size:0.625rem;margin-top:-0.125rem}:host([scale=xs]) .text{line-height:1.35}:host([scale=s]){font-size:0.75rem;--arcgis-user-avatar-size:1.5rem;--arcgis-user-avatar-spacing:0.5rem;--arcgis-user-avatar-skeleton-width:4rem}:host([scale=s]) .description{font-size:0.625rem}:host([scale=m]){font-size:0.875rem;--arcgis-user-avatar-size:2rem;--arcgis-user-avatar-spacing:0.75rem;--arcgis-user-avatar-skeleton-width:5rem}:host([scale=m]) .description{font-size:0.75rem}:host([scale=l]){font-size:1rem;--arcgis-user-avatar-size:2.5rem;--arcgis-user-avatar-spacing:1rem;--arcgis-user-avatar-skeleton-width:6rem}:host([scale=l]) .description{font-size:0.875rem}";

const ArcgisUserAvatar = class {
  constructor(hostRef) {
    (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.user = undefined;
    this.portal = undefined;
    this.scale = "m";
    this.showName = undefined;
    this.showAvatar = true;
    this.heading = undefined;
    this.description = undefined;
    this.underline = undefined;
    this.username = undefined;
    this.checkOnline = undefined;
  }
  async componentWillLoad() {
    const { el, portal, username } = this;
    this.lang = await (0,_locale_13e00a75_js__WEBPACK_IMPORTED_MODULE_1__.a)(el);
    if (username) {
      this.user = await (0,_user_ba12ebd6_js__WEBPACK_IMPORTED_MODULE_6__.f)(username, portal);
    }
  }
  renderSkeleton() {
    return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "skeleton" }, this.showAvatar && (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "skeleton-avatar" }), this.showName && (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "skeleton-name" })));
  }
  renderUser() {
    const { user, lang, portal, showAvatar, showName, description, scale, underline, heading } = this;
    const { fullName, username, id } = user;
    const showDescription = !!description;
    const name = ((fullName === null || fullName === void 0 ? void 0 : fullName.split(" ")) || []).slice(0, 2).join(" ");
    return [
      showAvatar && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-avatar", { class: "avatar", scale: scale === "xs" ? "s" : scale, fullName: name, username: username, userId: id, thumbnail: (0,_user_ba12ebd6_js__WEBPACK_IMPORTED_MODULE_6__.c)(user, portal, this.checkOnline) })),
      (showName || showDescription) && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: { text: true, "text--underline": underline, "text--no-avatar": !showAvatar } }, showName && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: { title: true, "has-description": showDescription } }, heading || (0,_user_ba12ebd6_js__WEBPACK_IMPORTED_MODULE_6__.g)(user, lang))), showDescription && (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: "description" }, description)))
    ];
  }
  render() {
    return (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.H, null, this.user && this.lang ? this.renderUser() : this.renderSkeleton());
  }
  get el() { return (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.d)(this); }
};
ArcgisUserAvatar.style = arcgisUserAvatarCss;

const arcgisUserPopupCss = ":host{display:flex}.button{display:flex;align-items:center;font-size:0.75rem;transition-property:all;padding:0;outline:2px solid transparent;outline-offset:2px;border-style:none;cursor:pointer;max-width:100%;color:var(--calcite-ui-text-2);outline-color:transparent;background:transparent;font-family:inherit;line-height:1.5}.button:focus{outline:2px solid var(--calcite-ui-brand);outline-offset:2px}.name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;-webkit-margin-start:0.5rem;margin-inline-start:0.5rem}";

const ArcgisUserPopup = class {
  constructor(hostRef) {
    (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.arcgisUserPopupInternalUIAction = (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "arcgisUserPopupInternalUIAction", 7);
    this.user = undefined;
    this.username = undefined;
    this.item = undefined;
    this.api = undefined;
    this.scale = "m";
    this.portal = undefined;
    this.baseUrl = undefined;
    this.underline = undefined;
    this.showAvatar = true;
    this.checkOnline = undefined;
    this.itemUserInfo = undefined;
    this.groups = undefined;
    this.total = undefined;
    this.showPopover = undefined;
    this.privateUser = undefined;
  }
  async componentWillLoad() {
    const { el, item, username, portal } = this;
    const locale = await (0,_locale_13e00a75_js__WEBPACK_IMPORTED_MODULE_1__.g)(el);
    this.i18n = locale[0];
    this.lang = locale[1];
    if (item) {
      this.fetchItemUserInfo();
    }
    else if (username) {
      try {
        const userInfo = await (0,_user_ba12ebd6_js__WEBPACK_IMPORTED_MODULE_6__.f)(username, portal);
        this.itemUserInfo = userInfo;
      }
      catch (_a) {
        this.privateUser = true;
      }
    }
  }
  async setFocus() {
    var _a;
    (_a = this.button) === null || _a === void 0 ? void 0 : _a.focus();
  }
  async fetchItemUserInfo() {
    const { portal, item, lang, checkOnline } = this;
    this.itemUserInfo = await (0,_user_ba12ebd6_js__WEBPACK_IMPORTED_MODULE_6__.a)(item, portal, lang, checkOnline);
  }
  async fetchItemsAndGroups() {
    const { user, itemUserInfo, item, portal, total, username: propUsername, checkOnline } = this;
    const username = propUsername || (user === null || user === void 0 ? void 0 : user.username) || (item === null || item === void 0 ? void 0 : item.owner);
    if ((item === null || item === void 0 ? void 0 : item.contentStatus) !== "public_authoritative") {
      if (!this.groups) {
        this.groups = await (0,_portal_79caaeff_js__WEBPACK_IMPORTED_MODULE_4__.f)(() => (0,_user_ba12ebd6_js__WEBPACK_IMPORTED_MODULE_6__.d)(username, portal, checkOnline), "userGroups", username);
      }
      if (isNaN(total)) {
        this.total = await (0,_portal_79caaeff_js__WEBPACK_IMPORTED_MODULE_4__.f)(() => (0,_user_ba12ebd6_js__WEBPACK_IMPORTED_MODULE_6__.e)(user || itemUserInfo, portal, checkOnline), "userItemsTotal", username);
      }
    }
  }
  render() {
    const { user, itemUserInfo, portal, item, baseUrl, button, i18n, scale } = this;
    const userInfo = user || itemUserInfo;
    if (!userInfo) {
      return (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-user-avatar", { scale: "s", showName: true, checkOnline: this.checkOnline });
    }
    return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.H, null, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("button", { class: "button", ref: (el) => (this.button = el), onClick: async () => {
        if (!this.showPopover) {
          this.showPopover = true;
        }
        this.fetchItemsAndGroups();
      } }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", null, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-user-avatar", { user: userInfo, scale: scale === "m" ? "m" : "s", portal: portal, showName: true, showAvatar: this.showAvatar, underline: this.underline, checkOnline: this.checkOnline }))), this.showPopover && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-tunnel", { reference: this.el }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-user-popup-popover", { onArcgisUserPopupInternalUIAction: (e) => {
        e.stopPropagation();
        this.arcgisUserPopupInternalUIAction.emit(e.detail);
      }, onArcgisUserPopupPopoverClose: () => {
        this.showPopover = false;
        this.popoverNode = null;
      }, onArcgisUserPopupPopoverKeyDown: (e) => {
        if (e.detail.key === "Escape") {
          // ! Has to be focused after the popover is completely closed
          const POPOVER_CLOSE_TIME = 200;
          setTimeout(() => {
            this.button.focus();
          }, POPOVER_CLOSE_TIME);
        }
      }, user: user, item: item, portal: portal, baseUrl: baseUrl, itemUserInfo: itemUserInfo, i18n: i18n, groups: this.groups, total: this.total, checkOnline: this.checkOnline, ref: (el) => {
        if (!el) {
          return;
        }
        el.referenceElement = button;
        // open when first added
        if (!this.popoverNode) {
          this.popoverNode = el;
          el.open();
        }
      } })))));
  }
  get el() { return (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.d)(this); }
  static get watchers() { return {
    "item": ["fetchItemUserInfo"]
  }; }
};
ArcgisUserPopup.style = arcgisUserPopupCss;

function addHyperlinks(text) {
  const urlRegex = /(https?:\/\/[^\s]+)/g;
  return text === null || text === void 0 ? void 0 : text.replace(urlRegex, (url) => `<a href="${url}" target="_blank">${url}</a>`);
}
function escapeNewlines(text) {
  return text === null || text === void 0 ? void 0 : text.replace(/(?:\r)/g, "&#10;").replace(/(?:\n)/g, "&#13;");
}
function restoreNewlines(text) {
  return text === null || text === void 0 ? void 0 : text.replace(/(?:&#10;)/g, "\r").replace(/(?:&#13;)/g, "\n");
}
function insertHtmlLineBreaks(text) {
  return text === null || text === void 0 ? void 0 : text.replace(/&#10;&#13;|&#10;|&#13;|\r\n|\r|\n/g, "<br>");
}
function getHtmlFromText(text) {
  return insertHtmlLineBreaks(escapeNewlines(addHyperlinks(restoreNewlines(text))));
}

function getUserLink({ baseUrl, portal, user, type }) {
  var _a, _b;
  const base = (0,_url_f3b82cc7_js__WEBPACK_IMPORTED_MODULE_11__.r)(baseUrl);
  const { username, orgId } = user;
  const name = encodeURIComponent(username);
  const isSelf = ((_a = portal.user) === null || _a === void 0 ? void 0 : _a.username) === user.username;
  const canView = (type === "groups" && (0,_privileges_35590eb4_js__WEBPACK_IMPORTED_MODULE_10__.t)(portal.user)) || (type === "content" && (0,_privileges_35590eb4_js__WEBPACK_IMPORTED_MODULE_10__.u)(portal.user));
  if ((canView || (0,_privileges_ccd5f37d_js__WEBPACK_IMPORTED_MODULE_9__.e)(portal.user) || isSelf) && orgId === ((_b = portal.user) === null || _b === void 0 ? void 0 : _b.orgId)) {
    return `${base}/${type}.html${!isSelf ? `?user=${name}` : ""}`;
  }
  else {
    return `${base}/search.html?q=owner:%22${name}%22&restrict=false#${type}`;
  }
}

const arcgisUserPopupPopoverCss = ".wrapper{background-color:var(--calcite-ui-foreground-1);width:20rem}.header{padding-left:1rem;padding-right:1rem;padding-top:1.25rem;padding-bottom:1.25rem}.user-avatar{max-width:100%}.content{padding-top:0.5rem;padding-left:1rem;padding-right:1rem;padding-bottom:1.25rem}.content__description{color:var(--calcite-ui-text-2);font-size:0.875rem;padding:0;padding-bottom:0.25rem;margin:0;overflow:auto;max-height:15.5rem}.content__description--expanded:after{content:\"\";display:block;height:1rem}.content__fade{display:block;height:1rem;width:100%;z-index:10;position:relative;margin-bottom:0.25rem;background:linear-gradient(to bottom, transparent, var(--calcite-ui-foreground-1) 74%);margin-top:-1rem}.content__link{font-size:0.875rem}.buttons{display:grid;grid-auto-flow:column;padding-top:1rem;grid-gap:0.5rem}.button{min-width:0}.loader{--calcite-loader-padding:0}";

const ArcgisUserPopupPopover = class {
  constructor(hostRef) {
    (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.arcgisUserPopupPopoverClose = (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "arcgisUserPopupPopoverClose", 7);
    this.arcgisUserPopupPopoverKeyDown = (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "arcgisUserPopupPopoverKeyDown", 7);
    this.arcgisUserPopupInternalUIAction = (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "arcgisUserPopupInternalUIAction", 7);
    this.numberFormatOptions = {
      api: _config_eb5f7dc2_js__WEBPACK_IMPORTED_MODULE_7__.c.api,
      places: 0,
      type: "decimal"
    };
    this.user = undefined;
    this.item = undefined;
    this.portal = undefined;
    this.baseUrl = undefined;
    this.referenceElement = undefined;
    this.itemUserInfo = undefined;
    this.groups = undefined;
    this.total = undefined;
    this.i18n = undefined;
    this.checkOnline = undefined;
    this.groupsText = "";
    this.itemsText = "";
    this.expanded = undefined;
  }
  async close() {
    this.togglePopover(false);
  }
  async open() {
    this.togglePopover(true);
  }
  async updateGroupsText(groups) {
    const number = await (0,_languageUtil_22258c90_js__WEBPACK_IMPORTED_MODULE_8__.f)(groups.total, this.numberFormatOptions);
    this.groupsText = this.i18n.groups.replace("${number}", number);
  }
  async updateItemsText(total) {
    const number = await (0,_languageUtil_22258c90_js__WEBPACK_IMPORTED_MODULE_8__.f)(total, this.numberFormatOptions);
    this.itemsText = this.i18n.items.replace("${number}", number);
  }
  componentWillLoad() {
    // when the component is reopened, set groups/total text again as the watcher doesn't fire
    if (this.groups) {
      this.updateGroupsText(this.groups);
    }
    if (!isNaN(this.total)) {
      this.updateItemsText(this.total);
    }
  }
  async togglePopover(open) {
    if (this.popoverNode) {
      this.popoverNode.open = open;
      await (0,_functional_c82f5ab9_js__WEBPACK_IMPORTED_MODULE_3__.t)(150);
      return;
    }
  }
  openLink(e) {
    var _a;
    // not totally sure why, but if you just link to the page, you'll be signed out
    // if we use window.open, it retains your current signed in status
    e.preventDefault();
    const href = (_a = e.target) === null || _a === void 0 ? void 0 : _a.href;
    window.open(href, "_blank");
  }
  renderOrgButtons() {
    const { i18n, baseUrl, itemUserInfo } = this;
    const url = (0,_url_f3b82cc7_js__WEBPACK_IMPORTED_MODULE_11__.r)((itemUserInfo === null || itemUserInfo === void 0 ? void 0 : itemUserInfo.url) || baseUrl);
    return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.F, null, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-button", { appearance: "outline-fill", kind: "neutral", href: url, target: "_blank", onClick: (e) => this.openLink(e) }, i18n.homepage), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-button", { appearance: "outline-fill", kind: "neutral", href: `${url}/gallery.html`, target: "_blank", onClick: (e) => this.openLink(e) }, i18n.gallery)));
  }
  renderUserButtons(userInfo) {
    const { i18n, baseUrl, portal, total, groups } = this;
    const loading = !this.groupsText || !this.itemsText;
    const { username } = userInfo;
    if (loading) {
      return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-loader", { label: i18n.loadingUserInformation, scale: "s", class: "loader" }));
    }
    return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.F, null, !!(groups === null || groups === void 0 ? void 0 : groups.total) && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-button", { class: "button", appearance: "outline-fill", kind: "neutral", href: `${getUserLink({ baseUrl, portal, user: userInfo, type: "groups" })}`, target: "_blank", onClick: (e) => {
        this.openLink(e);
        this.arcgisUserPopupInternalUIAction.emit({
          category: "profile popup",
          action: "view all groups"
        });
      } }, this.groupsText)), !!total && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-button", { class: "button", appearance: "outline-fill", kind: "neutral", href: `${getUserLink({
        baseUrl,
        portal,
        user: userInfo,
        type: "content"
      })}`, target: "_blank", onClick: (e) => {
        this.openLink(e);
        this.arcgisUserPopupInternalUIAction.emit({
          category: "profile popup",
          action: "view all content"
        });
      } }, this.itemsText)), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-button", { class: "button", appearance: "outline-fill", kind: "neutral", href: `${(0,_url_f3b82cc7_js__WEBPACK_IMPORTED_MODULE_11__.r)(baseUrl)}/user.html?user=${encodeURIComponent(username)}`, target: "_blank", onClick: (e) => {
        this.openLink(e);
        this.arcgisUserPopupInternalUIAction.emit({
          category: "profile popup",
          action: "view profile"
        });
      } }, i18n.profile)));
  }
  render() {
    const { i18n, user, item, itemUserInfo, lang, portal, expanded, referenceElement } = this;
    const userInfo = user || itemUserInfo;
    const isAuthoritative = (item === null || item === void 0 ? void 0 : item.contentStatus) === "public_authoritative";
    const { username, description } = userInfo;
    const name = (0,_user_ba12ebd6_js__WEBPACK_IMPORTED_MODULE_6__.g)(userInfo, lang);
    const decodedDescription = getHtmlFromText(description) || "";
    //each line break is approximately 40 chars long
    const tempDescription = decodedDescription.replace(/<br>/g, " ".repeat(40));
    const shortenDescription = !expanded && tempDescription.length >= 240;
    const shortDescription = shortenDescription
      ? // Trim at 240 chars, then add back the line breaks assuming 5-40 consecutive spaces is a line break
        `${tempDescription
          .substring(0, 240)
          .trim()
          .replace(/\s{5,40}/g, "<br>")}...`
      : decodedDescription;
    const managedBy = isAuthoritative
      ? this.i18n.itemManagedBy.replace("${username}", username)
      : username;
    return ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.H, null, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-popover", { class: "popover", label: name, pointerDisabled: true, referenceElement: referenceElement, placement: "bottom-start", id: `${username}-popover`, ref: (el) => (this.popoverNode = el), autoClose: true, onCalcitePopoverOpen: (0,_functional_c82f5ab9_js__WEBPACK_IMPORTED_MODULE_3__.d)(() => {
        this.arcgisUserPopupInternalUIAction.emit({
          category: "profile popup",
          action: "open profile popup"
        });
      }, 100), onCalcitePopoverClose: () => this.arcgisUserPopupPopoverClose.emit(), onKeyDown: (e) => this.arcgisUserPopupPopoverKeyDown.emit(e) }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "wrapper" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "header" }, (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-user-avatar", { class: "user-avatar", user: userInfo, scale: "l", portal: portal, showName: true, description: managedBy, checkOnline: this.checkOnline })), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "content" }, shortDescription && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("p", { class: { content__description: true, "content__description--expanded": expanded }, innerHTML: shortDescription })), expanded && (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "content__fade" }), shortenDescription && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-link", { class: "content__link", onClick: () => (this.expanded = true) }, i18n.expand)), expanded && ((0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-link", { class: "content__link", onClick: () => (this.expanded = false) }, i18n.showLess)), (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "buttons" }, isAuthoritative ? this.renderOrgButtons() : this.renderUserButtons(userInfo)))))));
  }
  get el() { return (0,_index_92ebb396_js__WEBPACK_IMPORTED_MODULE_0__.d)(this); }
  static get watchers() { return {
    "groups": ["updateGroupsText"],
    "total": ["updateItemsText"]
  }; }
};
ArcgisUserPopupPopover.style = arcgisUserPopupPopoverCss;




/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/badges-c3f03cc3.js":
/*!************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/badges-c3f03cc3.js ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ getTooltip),
/* harmony export */   g: () => (/* binding */ getBadges)
/* harmony export */ });
/* harmony import */ var _privileges_ccd5f37d_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./privileges-ccd5f37d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/privileges-ccd5f37d.js");
/* harmony import */ var _item_types_b4fe86ad_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./item-types-b4fe86ad.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-types-b4fe86ad.js");
/* harmony import */ var _user_ba12ebd6_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./user-ba12ebd6.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/user-ba12ebd6.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */




const retiredUrlParts = [
  "3DInsetMap",
  "3DScene",
  "3DViz",
  "AttachmentViewer",
  "CapacityAnalysis",
  "Compare/storytelling_compare",
  "Compare/storytelling_tabbed",
  "Compare/storytelling_sidepanel",
  "Compare/Multiviewer",
  "Compare/Search",
  "Compare/Configure",
  "Compare/SideBySideViewer_Configure",
  "Compare3d",
  "CompareAnalysis",
  "CompareMaps",
  "Directions",
  "Edit",
  "Editor",
  "Elevations",
  "ElevationsProfile",
  "Embed",
  "Filter",
  "FilterGallery",
  "GeoList",
  "GeoTour",
  "HeaderFooter",
  "Identify",
  "ImageInterpretation",
  "ImageryViewer",
  "ImpactSummary",
  "InformationLookup",
  "InteractiveFilter",
  "InteractiveLegend",
  "LayerShowcase",
  "Legend",
  "LiveMaps",
  "LocalPerspective",
  "MapAndAppGallery",
  "MapCarousel",
  "MapTools",
  "Media",
  "MinimalGallery",
  "Minimalist",
  "Nearby",
  "OnePane",
  "Panels",
  "PanelsLegend",
  "Profile",
  "PublicGallery",
  "PublicInformation",
  "ServiceLookup",
  "SimpleMapViewer",
  "SimpleViewer",
  "SocialMedia",
  "Solutions/s2.html?app=apps2/FindEditFilter",
  "Solutions/s2.html?app=apps2/Finder",
  "StorytellingTextLegend",
  "StoryMapBasic",
  "Styler",
  "SummaryViewer",
  "Time",
  "TimeAware",
  "TwoPane",
  "Viewer",
  "ZoneLookup"
];

function isRetiredItemType(type) {
  return _item_types_b4fe86ad_js__WEBPACK_IMPORTED_MODULE_1__.r.includes(type);
}
function isRetiredStoryMap(item) {
  var _a, _b;
  return ((_a = item.portal) === null || _a === void 0 ? void 0 : _a.isPortal) && item.type === "Web Mapping Application" && ((_b = item.typeKeywords) === null || _b === void 0 ? void 0 : _b.includes("Story Map"));
}
function isCityEngineWebScene(item) {
  return item.type === "CityEngine Web Scene";
}
function isRetiredApp(item) {
  var _a;
  const isRetiredUrl = retiredUrlParts.some((urlPart) => {
    var _a;
    const containsHtml = urlPart.includes(".html");
    const fullRetiredPath = `/apps/${urlPart}${!containsHtml ? "/" : ""}`;
    return (_a = item.url) === null || _a === void 0 ? void 0 : _a.includes(fullRetiredPath);
  });
  return ((_a = item.portal) === null || _a === void 0 ? void 0 : _a.isPortal) && item.type === "Web Mapping Application" && item.url && isRetiredUrl;
}
function isOrgAuthoritative(item) {
  return item.contentStatus === "org_authoritative";
}
function isPublicAuthoritative(item) {
  return item.contentStatus === "public_authoritative";
}
function getBadges(item, portal, user) {
  var _a, _b, _c;
  const badges = [];
  const groupDesignations = item.groupDesignations && item.groupDesignations.split(", ");
  if (isOrgAuthoritative(item) || isPublicAuthoritative(item)) {
    badges.push("Authoritative");
  }
  if (item.contentStatus === "deprecated") {
    badges.push("Deprecated");
  }
  if (item.type === "Solution" && ((_a = item.typeKeywords) === null || _a === void 0 ? void 0 : _a.includes("ArcGIS Solution"))) {
    badges.push("Solution");
  }
  if (((_b = item.typeKeywords) === null || _b === void 0 ? void 0 : _b.includes("Public Data Collection")) && user) {
    badges.push("Public Data Collection");
  }
  if (isRetiredItemType(item.type) || isRetiredStoryMap(item) || isRetiredApp(item)) {
    badges.push("Retired");
  }
  if (groupDesignations === null || groupDesignations === void 0 ? void 0 : groupDesignations.includes("livingatlas")) {
    badges.push("Living Atlas");
  }
  if (groupDesignations && groupDesignations.includes("opendata")) {
    badges.push("Open Data");
  }
  if ((0,_privileges_ccd5f37d_js__WEBPACK_IMPORTED_MODULE_0__.b)(item)) {
    badges.push("Premium");
  }
  if ((0,_privileges_ccd5f37d_js__WEBPACK_IMPORTED_MODULE_0__.a)(item)) {
    badges.push("Subscriber");
  }
  if (item.origin) {
    badges.push("Collaboration");
  }
  if (item.listed && !(portal === null || portal === void 0 ? void 0 : portal.isPortal)) {
    badges.push("Marketplace");
  }
  if (((_c = item.typeKeywords) === null || _c === void 0 ? void 0 : _c.includes("Registered App")) &&
    item.type !== "API Key" &&
    (!(portal === null || portal === void 0 ? void 0 : portal.isPortal) || item.owner !== "esri_apps")) {
    badges.push("Registered");
  }
  return badges;
}
async function getTooltip(badgeType, item, user, i18n, locale) {
  var _a, _b;
  const publicUser = !user || (0,_privileges_ccd5f37d_js__WEBPACK_IMPORTED_MODULE_0__.n)(user);
  switch (badgeType) {
    case "Authoritative":
      if (item.contentStatus === "public_authoritative") {
        const verified = await (0,_user_ba12ebd6_js__WEBPACK_IMPORTED_MODULE_2__.b)(item, locale);
        const name = ((_a = item.portal) === null || _a === void 0 ? void 0 : _a.isPortal) ? (_b = item.portal) === null || _b === void 0 ? void 0 : _b.name : verified === null || verified === void 0 ? void 0 : verified.name;
        return i18n.Authoritative.tooltip.public.replace("${name}", name);
      }
      else {
        return i18n.Authoritative.tooltip.org;
      }
    case "Retired":
      const retired = i18n.Retired.tooltip;
      if (isRetiredStoryMap(item)) {
        return retired.storyMap;
      }
      else if (isCityEngineWebScene(item)) {
        return retired.cityEngine;
      }
      else if (isRetiredApp(item)) {
        return retired.app;
      }
      else {
        return retired.general;
      }
    case "Subscriber":
      return publicUser ? i18n.Subscriber.tooltip.public : i18n.Subscriber.tooltip.org;
    case "Premium":
      return publicUser ? i18n.Premium.tooltip.public : i18n.Premium.tooltip.org;
    case "Registered":
      return i18n.Registered.tooltip;
    default:
      return i18n[badgeType].tooltip;
  }
}




/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/utils-69e56978.js":
/*!***********************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/utils-69e56978.js ***!
  \***********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   g: () => (/* binding */ getSublayerTypeInfo)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v3.0.99
 */
/** Get the correct geometry icon based on layer/table type and geometry type
 * will handles types used by the jsapi, the esri types used on the server,
 * and the types returned by the Search API
 */
function getSublayerTypeInfo({ geometry, type }) {
  switch (type) {
    case "Catalog Layer":
      return {
        icon: "catalog-dataset",
        type: "catalog",
        isGeometry: false
      };
    case "Parcel Layer":
      return {
        icon: "parcel-layer",
        type: "parcel",
        isGeometry: false
      };
    case "Oriented Imagery Layer":
      return {
        icon: "oriented-imagery-layer",
        type: "oriented imagery",
        isGeometry: false
      };
    case "Table":
      return {
        icon: "table",
        type: "table",
        isGeometry: true
      };
  }
  switch (geometry) {
    case "point":
    case "esriGeometryPoint":
      return {
        type: "point",
        icon: "point",
        isGeometry: true
      };
    case "esriGeometryMultipoint":
    case "multipoint":
      return {
        type: "multipoint",
        icon: "layer-points",
        isGeometry: true
      };
    case "line":
    case "polyline":
    case "esriGeometryPolyline":
      return {
        type: "line",
        icon: "line",
        isGeometry: true
      };
    case "polygon":
    case "esriGeometryPolygon":
      return {
        type: "polygon",
        icon: "polygon",
        isGeometry: true
      };
    case "multipatch":
    case "esriGeometryMultiPatch":
      return {
        type: "multipatch",
        icon: "cube",
        isGeometry: true
      };
    default:
      return {
        type: "table",
        icon: "table",
        isGeometry: true
      };
  }
}




/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXBwLWNvbXBvbmVudHNfZGlzdF9lc21fYXJjZ2lzLWI1MDIxYy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQytJO0FBQ3ZDO0FBQ2pDO0FBQ0E7QUFDa0I7QUFDMUI7QUFDeUc7QUFDaEg7QUFDTztBQUNKO0FBQzJCO0FBQ3pCO0FBQ2xDO0FBQ087QUFDUjtBQUNHO0FBQ007QUFDTjtBQUNEO0FBQ0Q7QUFDUTtBQUNJO0FBQ1A7QUFDRTtBQUNOO0FBQ0c7QUFDSjs7QUFFM0I7QUFDQSxVQUFVLHFEQUFDLFVBQVUsNENBQTRDO0FBQ2pFLElBQUkscURBQUMsV0FBVyxzTkFBc047QUFDdE8sSUFBSSxxREFBQyxXQUFXLDBaQUEwWjtBQUMxYTs7QUFFQTtBQUNBLFVBQVUscURBQUMsVUFBVSxvR0FBb0c7QUFDekgsSUFBSSxxREFBQyxXQUFXLG9yQ0FBb3JDO0FBQ3BzQzs7QUFFQTtBQUNBLFVBQVUscURBQUMsVUFBVSxvR0FBb0c7QUFDekgsSUFBSSxxREFBQyxXQUFXLCt0R0FBK3RHO0FBQy91RyxJQUFJLHFEQUFDLFdBQVcsNmlEQUE2aUQ7QUFDN2pEOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNILGdCQUFnQixrQkFBa0I7QUFDbEMsYUFBYSxxQkFBcUI7QUFDbEMsbUJBQW1CLG1DQUFtQztBQUN0RCxnQkFBZ0IsYUFBYTtBQUM3QixvQkFBb0Isa0JBQWtCO0FBQ3RDLGlCQUFpQixrQkFBa0I7QUFDbkMsY0FBYztBQUNkOztBQUVBLG1DQUFtQyxtRUFBbUUsNkRBQTZELGlFQUFpRSxxQkFBcUIsZUFBZSxl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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaUNBQWlDLG9CQUFvQixtQkFBbUIsaUJBQWlCLGtCQUFrQixnQ0FBZ0MsaUJBQWlCLG1CQUFtQixnQ0FBZ0MsaUJBQWlCLGVBQWUsa0NBQWtDLE1BQU0s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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVvQyIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FwcC1jb21wb25lbnRzL2Rpc3QvZXNtL2FyY2dpcy1pdGVtLWJhZGdlXzExLmVudHJ5LmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FwcC1jb21wb25lbnRzL2Rpc3QvZXNtL2JhZGdlcy1jM2YwM2NjMy5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcHAtY29tcG9uZW50cy9kaXN0L2VzbS91dGlscy02OWU1Njk3OC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiB2My4wLjk5XG4gKi9cbmltcG9ydCB7IGgsIHIgYXMgcmVnaXN0ZXJJbnN0YW5jZSwgSCBhcyBIb3N0LCBkIGFzIGdldEVsZW1lbnQsIGMgYXMgY3JlYXRlRXZlbnQsIEYgYXMgRnJhZ21lbnQsIGEgYXMgZ2V0QXNzZXRQYXRoIH0gZnJvbSAnLi9pbmRleC05MmViYjM5Ni5qcyc7XG5pbXBvcnQgeyBnIGFzIGdldExvY2FsZUNvbXBvbmVudFN0cmluZ3MsIGEgYXMgZ2V0Q29tcG9uZW50Q2xvc2VzdExhbmd1YWdlIH0gZnJvbSAnLi9sb2NhbGUtMTNlMDBhNzUuanMnO1xuaW1wb3J0IHsgYSBhcyBnZXRUb29sdGlwLCBnIGFzIGdldEJhZGdlcyB9IGZyb20gJy4vYmFkZ2VzLWMzZjAzY2MzLmpzJztcbmltcG9ydCB7IHQgYXMgdGltZW91dCwgZCBhcyBkZWJvdW5jZSB9IGZyb20gJy4vZnVuY3Rpb25hbC1jODJmNWFiOS5qcyc7XG5pbXBvcnQgeyByIGFzIHJlcXVlc3QsIGcgYXMgZ2V0UmVzdEJhc2VVcmwsIGYgYXMgZnJvbUNhY2hlIH0gZnJvbSAnLi9wb3J0YWwtNzljYWFlZmYuanMnO1xuaW1wb3J0IHsgZyBhcyBnZXRTdWJsYXllclR5cGVJbmZvIH0gZnJvbSAnLi91dGlscy02OWU1Njk3OC5qcyc7XG5pbXBvcnQgeyBmIGFzIGZldGNoVXNlciwgYyBhcyBnZXRVc2VyVGh1bWJuYWlsVVJJLCBnIGFzIGdldEZ1bGxOYW1lLCBhIGFzIGZldGNoSXRlbVVzZXJJbmZvLCBkIGFzIGZldGNoVXNlckdyb3VwcywgZSBhcyBmZXRjaFVzZXJJdGVtc1RvdGFsIH0gZnJvbSAnLi91c2VyLWJhMTJlYmQ2LmpzJztcbmltcG9ydCB7IGMgYXMgY29uZmlnU3RhdGUgfSBmcm9tICcuL2NvbmZpZy1lYjVmN2RjMi5qcyc7XG5pbXBvcnQgeyBmIGFzIGZvcm1hdE51bWJlciB9IGZyb20gJy4vbGFuZ3VhZ2VVdGlsLTIyMjU4YzkwLmpzJztcbmltcG9ydCB7IGUgYXMgaXNPcmdBZG1pbiB9IGZyb20gJy4vcHJpdmlsZWdlcy1jY2Q1ZjM3ZC5qcyc7XG5pbXBvcnQgeyB0IGFzIGNhblZpZXdPcmdHcm91cHMsIHUgYXMgY2FuTWFuYWdlSXRlbXMgfSBmcm9tICcuL3ByaXZpbGVnZXMtMzU1OTBlYjQuanMnO1xuaW1wb3J0IHsgciBhcyByZW1vdmVUcmFpbGluZ1NsYXNoIH0gZnJvbSAnLi91cmwtZjNiODJjYzcuanMnO1xuaW1wb3J0ICcuL2RvbS0xM2Y1YjAwYy5qcyc7XG5pbXBvcnQgJy4vaXRlbS10eXBlcy1iNGZlODZhZC5qcyc7XG5pbXBvcnQgJy4vdWktZWNmODZiYmEuanMnO1xuaW1wb3J0ICcuL2luZGV4LTgxZDU0OGI3LmpzJztcbmltcG9ydCAnLi9sb2FkTW9kdWxlcy1hYWYzMGJkNi5qcyc7XG5pbXBvcnQgJy4vcXVlcnktNGY3YjdlNGQuanMnO1xuaW1wb3J0ICcuL3VzZXItZTNkZWRjNGEuanMnO1xuaW1wb3J0ICcuL2FwaS1mNzkzNGNkNy5qcyc7XG5pbXBvcnQgJy4vc2VydmVyLWl0ZW0tZjEyMTUzZTYuanMnO1xuaW1wb3J0ICcuL2l0ZW0tcHJvcGVydGllcy1lNjQxMmE5YS5qcyc7XG5pbXBvcnQgJy4vYWRkLWl0ZW0tOTdkNTc3YTkuanMnO1xuaW1wb3J0ICcuL2Z1bmN0aW9uYWwtOWY2NDhiZWUuanMnO1xuaW1wb3J0ICcuL2l0ZW0tZDlkNzA0MTYuanMnO1xuaW1wb3J0ICcuL3N0b3JhZ2UtZDdmNTgyMmUuanMnO1xuaW1wb3J0ICcuL2Fncy02OGQ0YWUyMC5qcyc7XG5cbmZ1bmN0aW9uIGdldEljb24kMigpIHtcbiAgcmV0dXJuIChoKFwic3ZnXCIsIHsgdmlld0JveDogXCIwIDAgMTYgMTZcIiwgZmlsbDogXCJjdXJyZW50Q29sb3JcIiB9LFxuICAgIGgoXCJwYXRoXCIsIHsgZDogXCJNMi43IDljLS40LTEuMy0uMi0yLjguNC00czEuNy0yLjIgMy0yLjZjLjQuNC44LjkgMS4xIDEuMmguMmwuMS0uMXYtLjFDNy4yIDIuNCA2LjguMiA2LjMgMGMtLjEgMC0uMi0uMS0uNC0uMS0uMS4xLS4yLjEtLjQuMi0uMSAwLS4yLjEtLjMuMiAwIC4yLS4xLjMtLjEuNCAwIC4yLjEuNS40LjgtMS40LjYtMi42IDEuNy0zLjMgMy0uNyAxLjQtLjkgMy0uNSA0LjVoMXpcIiB9KSxcbiAgICBoKFwicGF0aFwiLCB7IGQ6IFwiTTE0IDVjLS41LTEuMi0xLjMtMi4yLTIuNC0yLjlTOS4zIDEgOCAxaC0uMWMuMS4zLjIuNi4zIDEgMS4yIDAgMi40LjUgMy4zIDEuMi45LjggMS41IDEuOCAxLjggMy0zLjQgNC0xMC4xIDQtMTIuMiAzLjlIMXYuMmwxLjIuM2MuNSAxIDEuMyAxLjggMi4yIDIuNC45LjYgMiAuOSAzIDF2MWgtMnYxaDV2LTFoLTJ2LTFjLjktLjEgMS43LS4zIDIuNS0uNy44LS40IDEuNS0xIDItMS42LjYtLjcgMS0xLjUgMS4yLTIuMy4yLS44LjMtMS43LjItMi42LjctLjguOC0xLjUtLjMtMS44em0tNiA4Yy0uOSAwLTEuNy0uMi0yLjUtLjYtLjgtLjQtMS40LS45LTEuOS0xLjYgMS44LjIgMy42IDAgNS4zLS41IDEuNy0uNSAzLjMtMS40IDQuNi0yLjUtLjEgMS40LS43IDIuOC0xLjcgMy43LTEgLjktMi40IDEuNS0zLjggMS41elwiIH0pKSk7XG59XG5cbmZ1bmN0aW9uIGdldEljb24kMSgpIHtcbiAgcmV0dXJuIChoKFwic3ZnXCIsIHsgd2lkdGg6IFwiMTJcIiwgaGVpZ2h0OiBcIjE1XCIsIHZpZXdCb3g6IFwiMCAwIDEyIDE1XCIsIGZpbGw6IFwibm9uZVwiLCB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIH0sXG4gICAgaChcInBhdGhcIiwgeyBkOiBcIk02IDBDMi41OCAwIDAgMS4yOSAwIDNDMCA0LjcxIDIuNTggNiA2IDZDNy43NjAwMSA2LjA4ODQzIDkuNTA0OSA1LjYzNTggMTEgNC43MDNWMTAuMDM3QzExIDEwLjE2OTYgMTEuMDUyNyAxMC4yOTY4IDExLjE0NjQgMTAuMzkwNkMxMS4yNDAyIDEwLjQ4NDMgMTEuMzY3NCAxMC41MzcgMTEuNSAxMC41MzdDMTEuNjMyNiAxMC41MzcgMTEuNzU5OCAxMC40ODQzIDExLjg1MzYgMTAuMzkwNkMxMS45NDczIDEwLjI5NjggMTIgMTAuMTY5NiAxMiAxMC4wMzdWM0MxMiAxLjI5IDkuNDIgMCA2IDBaTTYgNUMzLjEzOCA1IDEgMy45NDQgMSAzQzEgMi4wNTYgMy4xMzggMSA2IDFDOC44NjIgMSAxMSAyLjA1NiAxMSAzQzExIDMuOTQ0IDguODYyIDUgNiA1Wk0xMS41IDExLjVDMTEuMzY3NCAxMS41IDExLjI0MDIgMTEuNTUyNyAxMS4xNDY0IDExLjY0NjRDMTEuMDUyNyAxMS43NDAyIDExIDExLjg2NzQgMTEgMTJWMTIuMDY0QzExIDEyLjk2IDguODE2IDE0IDYgMTRDMy4xODQgMTQgMSAxMi45NiAxIDEyLjA2NFY3Ljg1QzIuNTc2NyA4LjUzMzE0IDQuMjgyMDIgOC44Njg3NSA2IDguODM0QzYuMTMyNjEgOC44MzQgNi4yNTk3OSA4Ljc4MTMyIDYuMzUzNTUgOC42ODc1NUM2LjQ0NzMyIDguNTkzNzkgNi41IDguNDY2NjEgNi41IDguMzM0QzYuNSA4LjIwMTM5IDYuNDQ3MzIgOC4wNzQyMSA2LjM1MzU1IDcuOTgwNDVDNi4yNTk3OSA3Ljg4NjY4IDYuMTMyNjEgNy44MzQgNiA3LjgzNEM0LjE5NDQgNy44OTgyMSAyLjQwNDQxIDcuNDc5MSAwLjgxNSA2LjYyQzAuNzQ5MTUyIDYuNTYyMjIgMC42Njg4NTYgNi41MjM0IDAuNTgyNjc1IDYuNTA3NjdDMC40OTY0OTQgNi40OTE5NCAwLjQwNzY2IDYuNDk5OSAwLjMyNTY0NiA2LjUzMDY5QzAuMjQzNjMyIDYuNTYxNDggMC4xNzE1MTQgNi42MTM5NiAwLjExNjk4MiA2LjY4MjUyQzAuMDYyNDQ5NSA2Ljc1MTA4IDAuMDI3NTQ4MyA2LjgzMzE2IDAuMDE2IDYuOTJDMC4wMTQgNi45MzMgMC4wMTAwMDAxIDYuOTQ1IDAuMDA5MDAwMDYgNi45NTdDMC4wMDcwMDAwNiA2Ljk3MiAwIDYuOTg1IDAgN1YxMi4wNjRDMCAxMy45MDIgMy4wNSAxNSA2IDE1QzguOTUgMTUgMTIgMTMuOTAyIDEyIDEyLjA2NFYxMkMxMiAxMS44Njc0IDExLjk0NzMgMTEuNzQwMiAxMS44NTM2IDExLjY0NjRDMTEuNzU5OCAxMS41NTI3IDExLjYzMjYgMTEuNSAxMS41IDExLjVaXCIsIGZpbGw6IFwiY3VycmVudENvbG9yXCIgfSkpKTtcbn1cblxuZnVuY3Rpb24gZ2V0SWNvbigpIHtcbiAgcmV0dXJuIChoKFwic3ZnXCIsIHsgd2lkdGg6IFwiMTVcIiwgaGVpZ2h0OiBcIjE0XCIsIHZpZXdCb3g6IFwiMCAwIDE1IDE0XCIsIGZpbGw6IFwibm9uZVwiLCB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIH0sXG4gICAgaChcInBhdGhcIiwgeyBkOiBcIk0xNC45ODE1IDIuODM2MDJDMTQuOTgxNCAyLjYyNTk3IDE0Ljg5NzkgMi40MjQ1NCAxNC43NDk0IDIuMjc1OTZDMTQuNjAwOSAyLjEyNzM4IDE0LjM5OTYgMi4wNDM3OSAxNC4xODk1IDIuMDQzNTJIMTEuNTUyNUMxMS41NDAyIDIuMDQzNTkgMTEuNTI4IDIuMDQxMjIgMTEuNTE2NiAyLjAzNjU1QzExLjUwNTIgMi4wMzE4OCAxMS40OTQ4IDIuMDI1IDExLjQ4NjEgMi4wMTYzMkMxMS40NzczIDIuMDA3NjMgMTEuNDcwNCAxLjk5NzMgMTEuNDY1NyAxLjk4NTkyQzExLjQ2MSAxLjk3NDU0IDExLjQ1ODUgMS45NjIzNCAxMS40NTg1IDEuOTUwMDJWMC45ODg1MjRDMTEuNDU3MSAwLjg1NDIxIDExLjQyODcgMC43MjE1NTYgMTEuMzc0OSAwLjU5ODQ3N0MxMS4zMjExIDAuNDc1Mzk5IDExLjI0MyAwLjM2NDQxOSAxMS4xNDU0IDAuMjcyMTYxQzExLjA0NzggMC4xNzk5MDMgMTAuOTMyNiAwLjEwODI1OSAxMC44MDY3IDAuMDYxNTAyNUMxMC42ODA3IDAuMDE0NzQ2NCAxMC41NDY3IC0wLjAwNjE2MjU1IDEwLjQxMjUgMi4zNTIyOGUtMDVINS41NzY1MkM1LjI5OTA1IDAuMDAwMjg4MjgyIDUuMDMzMDIgMC4xMTA2MjkgNC44MzY4MiAwLjMwNjgyOUM0LjY0MDYyIDAuNTAzMDI4IDQuNTMwMjggMC43NjkwNTYgNC41MzAwMiAxLjA0NjUyVjEuOTUwMDJDNC41MzAwMiAxLjk3NDgyIDQuNTIwMTcgMS45OTg2IDQuNTAyNjMgMi4wMTYxNEM0LjQ4NTEgMi4wMzM2NyA0LjQ2MTMyIDIuMDQzNTIgNC40MzY1MiAyLjA0MzUySDEuNzk5MDJDMS41ODg5NiAyLjA0Mzc5IDEuMzg3NTkgMi4xMjczOCAxLjIzOTExIDIuMjc1OTZDMS4wOTA2MiAyLjQyNDU0IDEuMDA3MTUgMi42MjU5NyAxLjAwNzAyIDIuODM2MDJWNC44NDQwMkMxLjAwNzE1IDQuODgxMiAxLjAyMjAxIDQuOTE2ODEgMS4wNDgzNSA0Ljk0MzA1QzEuMDc0NjggNC45NjkyOSAxLjExMDM0IDQuOTg0MDIgMS4xNDc1MiA0Ljk4NDAySDIuNDUwMDJMMi40NTcwMiA0Ljk3NzUyVjMuNTc2NTJDMi40NTcwMiAzLjU1MzA1IDIuNDY2MzQgMy41MzA1NCAyLjQ4Mjk0IDMuNTEzOTRDMi40OTk1NCAzLjQ5NzM1IDIuNTIyMDUgMy40ODgwMiAyLjU0NTUyIDMuNDg4MDJIMTMuMjc1NUMxMy4zMzQ5IDMuNDg4OTMgMTMuMzkxNSAzLjUxMjk0IDEzLjQzMzQgMy41NTQ5NkMxMy40NzU0IDMuNTk2OTcgMTMuNDk5MiAzLjY1MzY4IDEzLjUgMy43MTMwMlYxMC41ODRDMTMuNSAxMC43MDQzIDEzLjQ3NjMgMTAuODIzNCAxMy40MzAzIDEwLjkzNDZDMTMuMzg0MyAxMS4wNDU3IDEzLjMxNjggMTEuMTQ2NyAxMy4yMzE3IDExLjIzMTdDMTMuMTQ2NyAxMS4zMTY4IDEzLjA0NTcgMTEuMzg0MyAxMi45MzQ2IDExLjQzMDNDMTIuODIzNCAxMS40NzYzIDEyLjcwNDMgMTEuNSAxMi41ODQgMTEuNUg4LjEzODAyQzguMDc5NzYgMTEuNTAwMSA4LjAyMjg5IDExLjQ4MjIgNy45NzUxMyAxMS40NDg4QzcuOTI3MzcgMTEuNDE1NSA3Ljg5MTAyIDExLjM2ODIgNy44NzEwMiAxMS4zMTM1QzcuNzI2MjEgMTAuOTEzMiA3LjQ1NjgzIDEwLjU2OTggNy4xMDI0NCAxMC4zMzM5QzYuNzQ4MDUgMTAuMDk3OSA2LjMyNzM0IDkuOTgxODkgNS45MDIxMSAxMC4wMDI4QzUuNDc2ODggMTAuMDIzNiA1LjA2OTU2IDEwLjE4MDMgNC43Mzk5NyAxMC40NDk4QzQuNDEwMzkgMTAuNzE5MyA0LjE3NTkyIDExLjA4NzQgNC4wNzEwMiAxMS41SDIuODI4NTJDMi43MjgxMyAxMS41IDIuNjMxODYgMTEuNDYwMSAyLjU2MDg4IDExLjM4OTJDMi40ODk5IDExLjMxODIgMi40NTAwMiAxMS4yMjE5IDIuNDUwMDIgMTEuMTIxNVY5LjU5NDAyQzIuNDUwMDIgOS41NjkyNyAyLjQ0MDI1IDkuNTQ1NTEgMi40MjI4NCA5LjUyNzkxQzIuNDA1NDMgOS41MTAzMSAyLjM4MTc4IDkuNTAwMjkgMi4zNTcwMiA5LjUwMDAySDEuMDE0MDJMMS4wMDcwMiA5LjUwNzAyVjExLjc5N0MxLjAwNzU1IDEyLjEwOCAxLjEzMTM3IDEyLjQwNjIgMS4zNTEzNCAxMi42MjYxQzEuNTcxMzIgMTIuODQ1OSAxLjg2OTUgMTIuOTY5NiAyLjE4MDUyIDEyLjk3SDQuMjYxMDJDNC40MjU2MiAxMy4yNzA4IDQuNjY1NDUgMTMuNTIzNyA0Ljk1NzA2IDEzLjcwNEM1LjI0ODY3IDEzLjg4NDQgNS41ODIwOCAxMy45ODU5IDUuOTI0NyAxMy45OTg4QzYuMjY3MzIgMTQuMDExNyA2LjYwNzQyIDEzLjkzNTUgNi45MTE3NiAxMy43Nzc2QzcuMjE2MTEgMTMuNjE5NyA3LjQ3NDI3IDEzLjM4NTYgNy42NjEwMiAxMy4wOThDNy42ODY5MiAxMy4wNTg3IDcuNzIyMTggMTMuMDI2NCA3Ljc2MzYzIDEzLjAwNDFDNy44MDUwOCAxMi45ODE3IDcuODUxNDMgMTIuOTcgNy44OTg1MiAxMi45N0gxMy45MzFDMTQuMjA5NiAxMi45Njk5IDE0LjQ3NjcgMTIuODU5MiAxNC42NzM3IDEyLjY2MjJDMTQuODcwNyAxMi40NjUyIDE0Ljk4MTQgMTIuMTk4MSAxNC45ODE1IDExLjkxOTVWMi44MzYwMlpNMTAuNSAxLjgxMjUyQzEwLjUgMS44NjIyNSAxMC40ODAzIDEuOTA5OTQgMTAuNDQ1MSAxLjk0NTExQzEwLjQwOTkgMS45ODAyNyAxMC4zNjIyIDIuMDAwMDIgMTAuMzEyNSAyLjAwMDAySDUuNjg3NTJDNS42Mzc3OSAyLjAwMDAyIDUuNTkwMSAxLjk4MDI3IDUuNTU0OTQgMS45NDUxMUM1LjUxOTc3IDEuOTA5OTQgNS41MDAwMiAxLjg2MjI1IDUuNTAwMDIgMS44MTI1MlYxLjIyNTAyQzUuNTAwOCAxLjE2NTU5IDUuNTI0NzUgMS4xMDg4MSA1LjU2Njc4IDEuMDY2NzhDNS42MDg4MSAxLjAyNDc2IDUuNjY1NTkgMS4wMDA4IDUuNzI1MDIgMS4wMDAwMkgxMC4yNzVDMTAuMzM0NSAxLjAwMDggMTAuMzkxMiAxLjAyNDc2IDEwLjQzMzMgMS4wNjY3OEMxMC40NzUzIDEuMTA4ODEgMTAuNDk5MiAxLjE2NTU5IDEwLjUgMS4yMjUwMlYxLjgxMjUyWk02LjAwMDAyIDEzQzUuODAyMjQgMTMgNS42MDg5IDEyLjk0MTQgNS40NDQ0NSAxMi44MzE1QzUuMjggMTIuNzIxNiA1LjE1MTgzIDEyLjU2NTQgNS4wNzYxNCAxMi4zODI3QzUuMDAwNDUgMTIuMiA0Ljk4MDY1IDExLjk5ODkgNS4wMTkyMyAxMS44MDQ5QzUuMDU3ODIgMTEuNjExIDUuMTUzMDYgMTEuNDMyOCA1LjI5MjkxIDExLjI5MjlDNS40MzI3NyAxMS4xNTMxIDUuNjEwOTUgMTEuMDU3OCA1LjgwNDkzIDExLjAxOTJDNS45OTg5MSAxMC45ODA3IDYuMTk5OTggMTEuMDAwNSA2LjM4MjcgMTEuMDc2MUM2LjU2NTQzIDExLjE1MTggNi43MjE2MSAxMS4yOCA2LjgzMTQ5IDExLjQ0NDVDNi45NDEzNyAxMS42MDg5IDcuMDAwMDIgMTEuODAyMiA3LjAwMDAyIDEyQzcuMDAwMDIgMTIuMjY1MiA2Ljg5NDY2IDEyLjUxOTYgNi43MDcxMyAxMi43MDcxQzYuNTE5NTkgMTIuODk0NyA2LjI2NTI0IDEzIDYuMDAwMDIgMTNaXCIsIGZpbGw6IFwiY3VycmVudENvbG9yXCIgfSksXG4gICAgaChcInBhdGhcIiwgeyBkOiBcIk02LjYzNjUgNy45OTY5OEM2LjY4NDE5IDcuOTk3MDMgNi43MzExMSA4LjAwOTA1IDYuNzcyOTUgOC4wMzE5NEM2LjgxNDggOC4wNTQ4MyA2Ljg1MDIzIDguMDg3ODUgNi44NzYgOC4xMjc5OEM3LjA0Nzk2IDguNDAxNTcgNy4yODgwNSA4LjYyNTc4IDcuNTcyNzQgOC43Nzg2NEM3Ljg1NzQzIDguOTMxNTEgOC4xNzY5NiA5LjAwNzc4IDguNSA4Ljk5OTk4QzguODQ4OTYgOS4wMDgyNiA5LjE5MzI3IDguOTE4NzEgOS40OTM5NyA4Ljc0MTQ1QzkuNzk0NjggOC41NjQxOSAxMC4wMzk4IDguMzA2MzEgMTAuMjAxNSA3Ljk5Njk4SDExLjkwNjVDMTEuOTMxMyA3Ljk5Njg1IDExLjk1NTEgNy45ODY4OSAxMS45NzI2IDcuOTY5MjdDMTEuOTkwMiA3Ljk1MTY2IDEyIDcuOTI3ODMgMTIgNy45MDI5OFY2LjYwODQ4QzEyLjAwMDEgNi41OTYxMiAxMS45OTc3IDYuNTgzODcgMTEuOTkzIDYuNTcyNDNDMTEuOTg4MyA2LjU2MSAxMS45ODE0IDYuNTUwNjEgMTEuOTcyNiA2LjU0MTg3QzExLjk2MzkgNi41MzMxMiAxMS45NTM1IDYuNTI2MiAxMS45NDIxIDYuNTIxNUMxMS45MzA2IDYuNTE2OCAxMS45MTg0IDYuNTE0NDIgMTEuOTA2IDYuNTE0NDhIMTAuNEMxMC4zMSA2LjA3OTg3IDEwLjA3MDggNS42OTA0NyA5LjcyMzczIDUuNDEzODNDOS4zNzY2NyA1LjEzNzE5IDguOTQzNzMgNC45OTA3NyA4LjUgNC45OTk5OEM4LjA5NTU2IDUuMDExNDkgNy43MDM3OSA1LjE0MzY1IDcuMzc1MDMgNS4zNzk0OEM3LjA0NjI3IDUuNjE1MzIgNi43OTU1MiA1Ljk0NDA2IDYuNjU1IDYuMzIzNDhDNi42MzU3NSA2LjM3OTM4IDYuNTk5NTMgNi40Mjc4NyA2LjU1MTM5IDYuNDYyMkM2LjUwMzI2IDYuNDk2NTMgNi40NDU2MiA2LjUxNDk4IDYuMzg2NSA2LjUxNDk4SDAuNTQ2NUMwLjUzNDIwOCA2LjUxNTExIDAuNTIyNDU2IDYuNTIwMDUgMC41MTM3NjMgNi41Mjg3NUMwLjUwNTA3MSA2LjUzNzQ0IDAuNTAwMTMgNi41NDkxOSAwLjUgNi41NjE0OFY3Ljk0OTk4QzAuNSA3Ljk2MjQ1IDAuNTA0OTUyIDcuOTc0NCAwLjUxMzc2NiA3Ljk4MzIyQzAuNTIyNTggNy45OTIwMyAwLjUzNDUzNSA3Ljk5Njk4IDAuNTQ3IDcuOTk2OThINi42MzY1Wk04LjUgNS45NDk5OEM4LjcwNzY3IDUuOTQ5OTggOC45MTA2OCA2LjAxMTU2IDkuMDgzMzUgNi4xMjY5NEM5LjI1NjAyIDYuMjQyMzEgOS4zOTA2IDYuNDA2MyA5LjQ3MDA3IDYuNTk4MTZDOS41NDk1NSA2Ljc5MDAzIDkuNTcwMzQgNy4wMDExNSA5LjUyOTgyIDcuMjA0ODNDOS40ODkzMSA3LjQwODUxIDkuMzg5MzEgNy41OTU2IDkuMjQyNDYgNy43NDI0NEM5LjA5NTYyIDcuODg5MjkgOC45MDg1MiA3Ljk4OTI5IDguNzA0ODQgOC4wMjk4MUM4LjUwMTE2IDguMDcwMzIgOC4yOTAwNSA4LjA0OTUzIDguMDk4MTggNy45NzAwNkM3LjkwNjMyIDcuODkwNTggNy43NDIzMyA3Ljc1NiA3LjYyNjk2IDcuNTgzMzNDNy41MTE1OCA3LjQxMDY2IDcuNDUgNy4yMDc2NSA3LjQ1IDYuOTk5OThDNy40NSA2LjcyMTUxIDcuNTYwNjIgNi40NTQ0MyA3Ljc1NzU0IDYuMjU3NTJDNy45NTQ0NSA2LjA2MDYxIDguMjIxNTIgNS45NDk5OCA4LjUgNS45NDk5OFpcIiwgZmlsbDogXCJjdXJyZW50Q29sb3JcIiB9KSkpO1xufVxuXG5jb25zdCBiYWRnZUljb25zID0ge1xuICBBdXRob3JpdGF0aXZlOiB7XG4gICAgaWNvbjogXCJjaGVjay1jaXJjbGVcIlxuICB9LFxuICBEZXByZWNhdGVkOiB7XG4gICAgaWNvbjogXCJjaXJjbGUtZGlzYWxsb3dlZFwiXG4gIH0sXG4gIE1hcmtldHBsYWNlOiB7XG4gICAgaWNvbjogXCJtYXJrZXRwbGFjZVwiXG4gIH0sXG4gIFJldGlyZWQ6IHtcbiAgICBpY29uOiBcImV4Y2xhbWF0aW9uLW1hcmstdHJpYW5nbGVcIlxuICB9LFxuICBcIlB1YmxpYyBEYXRhIENvbGxlY3Rpb25cIjoge1xuICAgIGljb246IFwicGVuY2lsXCJcbiAgfSxcbiAgU3Vic2NyaWJlcjogeyBpY29uOiBcInNlY3VyaXR5XCIgfSxcbiAgUHJlbWl1bTogeyBpY29uOiBcInNoaWVsZC1jb2luXCIgfSxcbiAgQ29sbGFib3JhdGlvbjogeyBpY29uOiBcImNvbGxhYm9yYXRpb24tZGlzdHJpYnV0ZWRcIiB9LFxuICBSZWdpc3RlcmVkOiB7IGljb246IFwia2V5XCIgfSxcbiAgXCJMaXZpbmcgQXRsYXNcIjogeyBpbWFnZTogZ2V0SWNvbiQyIH0sXG4gIFwiT3BlbiBEYXRhXCI6IHsgaW1hZ2U6IGdldEljb24kMSB9LFxuICBTb2x1dGlvbjogeyBpbWFnZTogZ2V0SWNvbiB9XG59O1xuXG5jb25zdCBhcmNnaXNJdGVtQmFkZ2VDc3MgPSBcIi5iYWRnZXstLWNhbGNpdGUtdWktZm9yZWdyb3VuZC0yOnZhcigtLWFyY2dpcy1pdGVtLWJhZGdlLWluZm8tYmFja2dyb3VuZCk7LS1jYWxjaXRlLXVpLXRleHQtMTp2YXIoLS1hcmNnaXMtaXRlbS1iYWRnZS1pbmZvLWZvcmVncm91bmQpOy0tY2FsY2l0ZS11aS1pY29uLWNvbG9yOnZhcigtLWFyY2dpcy1pdGVtLWJhZGdlLWluZm8tZm9yZWdyb3VuZCk7ZGlzcGxheTppbmxpbmUtYmxvY2s7Ym9yZGVyLXdpZHRoOjB9LmF1dGhvcml0YXRpdmV7LS1jYWxjaXRlLXVpLWZvcmVncm91bmQtMjp2YXIoLS1hcmNnaXMtaXRlbS1iYWRnZS1zdWNjZXNzLWJhY2tncm91bmQpOy0tY2FsY2l0ZS11aS10ZXh0LTE6dmFyKC0tYXJjZ2lzLWl0ZW0tYmFkZ2Utc3VjY2Vzcy1mb3JlZ3JvdW5kKTstLWNhbGNpdGUtdWktaWNvbi1jb2xvcjp2YXIoLS1hcmNnaXMtaXRlbS1iYWRnZS1zdWNjZXNzLWZvcmVncm91bmQpfS5kZXByZWNhdGVkey0tY2FsY2l0ZS11aS1mb3JlZ3JvdW5kLTI6dmFyKC0tYXJjZ2lzLWl0ZW0tYmFkZ2UtZGFuZ2VyLWJhY2tncm91bmQpOy0tY2FsY2l0ZS11aS10ZXh0LTE6dmFyKC0tYXJjZ2lzLWl0ZW0tYmFkZ2UtZGFuZ2VyLWZvcmVncm91bmQpOy0tY2FsY2l0ZS11aS1pY29uLWNvbG9yOnZhcigtLWFyY2dpcy1pdGVtLWJhZGdlLWRhbmdlci1mb3JlZ3JvdW5kKX0uaW1hZ2V7Ym9yZGVyLXJhZGl1czowO2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6ZmxleC1lbmR9Lm5hcnJvd3t3aWR0aDoycmVtO2JveC1zaXppbmc6Ym9yZGVyLWJveDstLWNhbGNpdGUtY2hpcC1zcGFjaW5nLXVuaXQtbDowfS5uYXJyb3cgLmltYWdle2p1c3RpZnktY29udGVudDpjZW50ZXJ9LndyYXBwZXJ7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcn0uaWNvbnttYXJnaW4tdG9wOjAuMjVyZW07LXdlYmtpdC1tYXJnaW4tc3RhcnQ6MC4zNzVyZW07bWFyZ2luLWlubGluZS1zdGFydDowLjM3NXJlbX0uaW1hZ2Ugc3Zne3dpZHRoOjFyZW07aGVpZ2h0OjFyZW07Y29sb3I6dmFyKC0tY2FsY2l0ZS11aS1pY29uLWNvbG9yKX0uaW1hZ2UtbCBzdmd7d2lkdGg6MS41cmVtO2hlaWdodDoxLjVyZW19Lm5hcnJvdy0tc3t3aWR0aDoxLjVyZW19Lm5hcnJvdy0tcyAuaWNvbnttYXJnaW46MC4yNXJlbX0ubmFycm93LS1zIC5pbWFnZXstd2Via2l0LW1hcmdpbi1zdGFydDowO21hcmdpbi1pbmxpbmUtc3RhcnQ6MH0ubmFycm93LS1tIC5pY29ue21hcmdpbjowLjMxMjVyZW0gMC41cmVtfS5uYXJyb3ctLW0gLmltYWdley13ZWJraXQtbWFyZ2luLXN0YXJ0OjA7bWFyZ2luLWlubGluZS1zdGFydDowfS5uYXJyb3ctLWx7d2lkdGg6Mi43NXJlbX0ubmFycm93LS1sIC5pY29ue21hcmdpbjowLjVyZW0gMC44cmVtfS5uYXJyb3ctLWwgLmltYWdley13ZWJraXQtbWFyZ2luLWVuZDowLjI1cmVtO21hcmdpbi1pbmxpbmUtZW5kOjAuMjVyZW19XCI7XG5cbmNvbnN0IEFyY2dpc0l0ZW1CYWRnZSA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IoaG9zdFJlZikge1xuICAgIHJlZ2lzdGVySW5zdGFuY2UodGhpcywgaG9zdFJlZik7XG4gICAgdGhpcy5vcGVuVG9vbHRpcCA9ICgpID0+IHtcbiAgICAgIHRoaXMudG9vbHRpcE9wZW4gPSB0cnVlO1xuICAgIH07XG4gICAgdGhpcy5jbG9zZVRvb2x0aXAgPSBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCB0aW1lb3V0KDIwMCk7XG4gICAgICB0aGlzLnRvb2x0aXBPcGVuID0gZmFsc2U7XG4gICAgICB0aGlzLnRvb2x0aXAgPSBudWxsO1xuICAgIH07XG4gICAgdGhpcy5pdGVtID0gdW5kZWZpbmVkO1xuICAgIHRoaXMudXNlciA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLndpZHRoID0gXCJmdWxsXCI7XG4gICAgdGhpcy5zY2FsZSA9IFwibVwiO1xuICAgIHRoaXMuYmFkZ2VUeXBlID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuc2hvd1Rvb2x0aXAgPSB0cnVlO1xuICAgIHRoaXMubG9hZGluZyA9IHRydWU7XG4gICAgdGhpcy50b29sdGlwVGV4dCA9IFwiXCI7XG4gICAgdGhpcy50b29sdGlwT3BlbiA9IHVuZGVmaW5lZDtcbiAgfVxuICBhc3luYyBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICBjb25zdCB7IGVsIH0gPSB0aGlzO1xuICAgIGNvbnN0IGxvY2FsZSA9IGF3YWl0IGdldExvY2FsZUNvbXBvbmVudFN0cmluZ3MoZWwpO1xuICAgIHRoaXMuaTE4biA9IGxvY2FsZVswXTtcbiAgICB0aGlzLmxhbmcgPSBsb2NhbGVbMV07XG4gICAgdGhpcy51cGRhdGVUb29sdGlwVGV4dCgpO1xuICB9XG4gIGFzeW5jIHVwZGF0ZVRvb2x0aXBUZXh0KCkge1xuICAgIGNvbnN0IHsgYmFkZ2VUeXBlLCBpdGVtLCBpMThuLCBsYW5nLCB1c2VyIH0gPSB0aGlzO1xuICAgIHRoaXMudG9vbHRpcFRleHQgPSBhd2FpdCBnZXRUb29sdGlwKGJhZGdlVHlwZSwgaXRlbSwgdXNlciwgaTE4biwgbGFuZyk7XG4gICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gIH1cbiAgcmVuZGVySW1hZ2UoaW1hZ2UpIHtcbiAgICBpZiAoIWltYWdlKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIChoKFwic3BhblwiLCB7IHNsb3Q6IFwiaW1hZ2VcIiwgY2xhc3M6IHsgaW1hZ2U6IHRydWUsIFtgaW1hZ2UtJHt0aGlzLnNjYWxlfWBdOiB0cnVlIH0gfSwgaW1hZ2UoKSkpO1xuICB9XG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IGJhZGdlVHlwZSwgd2lkdGgsIGxvYWRpbmcsIHRvb2x0aXBUZXh0LCBzY2FsZSwgc2hvd1Rvb2x0aXAgfSA9IHRoaXM7XG4gICAgY29uc3QgaTE4biA9IHRoaXMuaTE4bltiYWRnZVR5cGVdO1xuICAgIGNvbnN0IHsgaWNvbiwgaW1hZ2UgfSA9IGJhZGdlSWNvbnNbdGhpcy5iYWRnZVR5cGVdO1xuICAgIGNvbnN0IG5hcnJvdyA9IHdpZHRoID09PSBcIm5hcnJvd1wiO1xuICAgIGNvbnN0IGNsYXNzZXMgPSB7XG4gICAgICBiYWRnZTogdHJ1ZSxcbiAgICAgIGF1dGhvcml0YXRpdmU6IGJhZGdlVHlwZSA9PT0gXCJBdXRob3JpdGF0aXZlXCIsXG4gICAgICBkZXByZWNhdGVkOiBiYWRnZVR5cGUgPT09IFwiRGVwcmVjYXRlZFwiLFxuICAgICAgbmFycm93LFxuICAgICAgW2BuYXJyb3ctLSR7c2NhbGV9YF06IG5hcnJvd1xuICAgIH07XG4gICAgcmV0dXJuIChoKEhvc3QsIG51bGwsIGgoXCJkaXZcIiwgT2JqZWN0LmFzc2lnbih7IGNsYXNzOiBcIndyYXBwZXJcIiB9LCAoc2hvd1Rvb2x0aXBcbiAgICAgID8ge1xuICAgICAgICBvbk1vdXNlTGVhdmU6IHRoaXMuY2xvc2VUb29sdGlwLFxuICAgICAgICBvbk1vdXNlRW50ZXI6IHRoaXMub3BlblRvb2x0aXAsXG4gICAgICAgIG9uRm9jdXNvdXQ6IHRoaXMuY2xvc2VUb29sdGlwLFxuICAgICAgICBvbkZvY3VzaW46IHRoaXMub3BlblRvb2x0aXBcbiAgICAgIH1cbiAgICAgIDoge30pKSwgbmFycm93ID8gKGgoXCJjYWxjaXRlLWNoaXBcIiwgT2JqZWN0LmFzc2lnbih7IGNsYXNzOiBjbGFzc2VzLCB2YWx1ZTogYmFkZ2VUeXBlIH0sIChpY29uID8geyBpY29uIH0gOiB7fSksIChzaG93VG9vbHRpcCA/IHsgdGFiSW5kZXg6IDAgfSA6IHt9KSwgeyByZWY6IChlbCkgPT4gKHRoaXMuY2hpcCA9IGVsKSwgc2NhbGU6IHNjYWxlIH0pLCBpbWFnZSAmJiB0aGlzLnJlbmRlckltYWdlKGltYWdlKSkpIDogKGgoXCJjYWxjaXRlLWNoaXBcIiwgT2JqZWN0LmFzc2lnbih7IGNsYXNzOiBjbGFzc2VzLCB2YWx1ZTogYmFkZ2VUeXBlIH0sIChpY29uID8geyBpY29uIH0gOiB7fSksIChzaG93VG9vbHRpcCA/IHsgdGFiSW5kZXg6IDAgfSA6IHt9KSwgeyByZWY6IChlbCkgPT4gKHRoaXMuY2hpcCA9IGVsKSwgc2NhbGU6IHNjYWxlIH0pLCBpbWFnZSAmJiB0aGlzLnJlbmRlckltYWdlKGltYWdlKSwgaTE4bi50aXRsZSkpLCB0aGlzLnRvb2x0aXBPcGVuICYmIHRoaXMuc2hvd1Rvb2x0aXAgJiYgKGgoXCJhcmNnaXMtdHVubmVsXCIsIHsgcmVmZXJlbmNlOiB0aGlzLmVsIH0sIGgoXCJjYWxjaXRlLXRvb2x0aXBcIiwgeyByZWY6IChlbCkgPT4ge1xuICAgICAgICBpZiAoIWVsKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGVsLnJlZmVyZW5jZUVsZW1lbnQgPSB0aGlzLmNoaXA7XG4gICAgICAgIGlmICghdGhpcy50b29sdGlwKSB7XG4gICAgICAgICAgdGhpcy50b29sdGlwID0gZWw7XG4gICAgICAgICAgdGhpcy50b29sdGlwLm9wZW4gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9LCBjbG9zZU9uQ2xpY2s6IHRydWUsIGxhYmVsOiBpMThuLnRpdGxlLCBwbGFjZW1lbnQ6IFwiYm90dG9tLXN0YXJ0XCIsIG9mZnNldERpc3RhbmNlOiA2LCBvZmZzZXRTa2lkZGluZzogMCwgc3R5bGU6IHsgcG9pbnRlckV2ZW50czogXCJub25lXCIgfSB9LCBuYXJyb3cgJiYgIWxvYWRpbmcgJiYgKGgoXCJoM1wiLCB7IGNsYXNzOiBcInRvb2x0aXBfX3RpdGxlXCIsIHN0eWxlOiB7XG4gICAgICAgIGZvbnRTaXplOiBcInZhcigtLWNhbGNpdGUtZm9udC1zaXplLS0xKVwiLFxuICAgICAgICBjb2xvcjogXCJ2YXIoLS1jYWxjaXRlLXVpLXRleHQtMSlcIixcbiAgICAgICAgbWFyZ2luOiBcIjAgMCAuMjVyZW0gMFwiLFxuICAgICAgICBwYWRkaW5nOiBcIjBcIlxuICAgICAgfSB9LCBpMThuLnRpdGxlKSksIGgoXCJwXCIsIHsgY2xhc3M6IFwidG9vbHRpcF9fdGV4dFwiLCBzdHlsZToge1xuICAgICAgICBmb250U2l6ZTogXCJ2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0tMilcIixcbiAgICAgICAgY29sb3I6IFwidmFyKC0tY2FsY2l0ZS11aS10ZXh0LTEpXCIsXG4gICAgICAgIG1hcmdpbjogXCIwXCIsXG4gICAgICAgIHBhZGRpbmc6IFwiMFwiXG4gICAgICB9IH0sIGgoXCJjYWxjaXRlLWxvYWRlclwiLCB7IGhpZGRlbjogIWxvYWRpbmcsIGxhYmVsOiB0aGlzLmkxOG4ubG9hZGluZywgaW5saW5lOiB0cnVlLCBzY2FsZTogXCJzXCIgfSksIGxvYWRpbmcgPyB0aGlzLmkxOG4ubG9hZGluZyA6IHRvb2x0aXBUZXh0KSkpKSkpKTtcbiAgfVxuICBnZXQgZWwoKSB7IHJldHVybiBnZXRFbGVtZW50KHRoaXMpOyB9XG59O1xuQXJjZ2lzSXRlbUJhZGdlLnN0eWxlID0gYXJjZ2lzSXRlbUJhZGdlQ3NzO1xuXG5jb25zdCBhcmNnaXNJdGVtQmFkZ2VzQ3NzID0gXCI6aG9zdHtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyfS5iYWRnZXtkaXNwbGF5OmlubGluZS1ibG9jazstd2Via2l0LW1hcmdpbi1lbmQ6MC4yNXJlbTttYXJnaW4taW5saW5lLWVuZDowLjI1cmVtfVwiO1xuXG5jb25zdCBBcmNnaXNJdGVtQmFkZ2VzID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XG4gICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICB0aGlzLml0ZW0gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5wb3J0YWwgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy51c2VyID0gdW5kZWZpbmVkO1xuICAgIHRoaXMud2lkdGggPSBcImZ1bGxcIjtcbiAgICB0aGlzLnNob3dUb29sdGlwcyA9IGZhbHNlO1xuICAgIHRoaXMuZW1wdHkgPSBmYWxzZTtcbiAgICB0aGlzLnNjYWxlID0gXCJtXCI7XG4gICAgdGhpcy5iYWRnZXMgPSBbXTtcbiAgfVxuICBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICBpZiAodGhpcy5pdGVtKSB7XG4gICAgICB0aGlzLnVwZGF0ZUJhZGdlcyh0aGlzLml0ZW0pO1xuICAgIH1cbiAgfVxuICB1cGRhdGVCYWRnZXMoaXRlbSkge1xuICAgIHZhciBfYTtcbiAgICB0aGlzLmJhZGdlcyA9IGdldEJhZGdlcyhpdGVtLCB0aGlzLnBvcnRhbCwgdGhpcy51c2VyKTtcbiAgICBpZiAoISgoX2EgPSB0aGlzLmJhZGdlcykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmxlbmd0aCkpIHtcbiAgICAgIHRoaXMuZW1wdHkgPSB0cnVlO1xuICAgIH1cbiAgfVxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBpdGVtLCB3aWR0aCwgc2NhbGUsIGJhZGdlcywgdXNlciwgc2hvd1Rvb2x0aXBzIH0gPSB0aGlzO1xuICAgIHJldHVybiAoaChIb3N0LCBudWxsLCBiYWRnZXMubWFwKChiYWRnZSkgPT4gKGgoXCJhcmNnaXMtaXRlbS1iYWRnZVwiLCB7IGNsYXNzOiBcImJhZGdlXCIsIGl0ZW06IGl0ZW0sIHVzZXI6IHVzZXIsIGJhZGdlVHlwZTogYmFkZ2UsIHdpZHRoOiB3aWR0aCwgc2NhbGU6IHNjYWxlLCBzaG93VG9vbHRpcDogc2hvd1Rvb2x0aXBzIH0pKSkpKTtcbiAgfVxuICBnZXQgZWwoKSB7IHJldHVybiBnZXRFbGVtZW50KHRoaXMpOyB9XG4gIHN0YXRpYyBnZXQgd2F0Y2hlcnMoKSB7IHJldHVybiB7XG4gICAgXCJpdGVtXCI6IFtcInVwZGF0ZUJhZGdlc1wiXVxuICB9OyB9XG59O1xuQXJjZ2lzSXRlbUJhZGdlcy5zdHlsZSA9IGFyY2dpc0l0ZW1CYWRnZXNDc3M7XG5cbmxldCBRVUVVRSA9IFtdO1xubGV0IFBST01JU0VTID0gW107XG5jb25zdCBmZXRjaEZhdm9yaXRlcyA9IGRlYm91bmNlKGFzeW5jIChwb3J0YWwsIHVzZXIpID0+IHtcbiAgdmFyIF9hO1xuICAvLyBlbXB0eSB0aGUgcXVldWVzIGFuZCBzYXZlIHRoZSBjdXJyZW50IHN0YXRlIGxvY2FsbHkgc28gdGhhdCBmdXJ0aGVyIGNhbGxzIGNhbiBiZSBzdGFnZWQgaW4gdGhlIHF1ZXVlXG4gIGNvbnN0IGlkcyA9IFsuLi5RVUVVRV07XG4gIGNvbnN0IHByb21pc2VzID0gWy4uLlBST01JU0VTXTtcbiAgUVVFVUUgPSBbXTtcbiAgUFJPTUlTRVMgPSBbXTtcbiAgY29uc3QgcSA9IGAoZ3JvdXA6JHt1c2VyLmZhdkdyb3VwSWR9IEFORCBpZDooJHtpZHMuam9pbihcIiBPUiBcIil9KSlgO1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYCR7Z2V0UmVzdEJhc2VVcmwocG9ydGFsKX1zZWFyY2hgLCB7IG51bTogMTAwLCBxIH0pO1xuICBjb25zdCBmYXZvcml0ZXMgPSAoX2EgPSByZXNwb25zZSA9PT0gbnVsbCB8fCByZXNwb25zZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVzcG9uc2UucmVzdWx0cykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1hcCgoaXRlbSkgPT4gaXRlbS5pZCk7XG4gIHByb21pc2VzLmZvckVhY2goKHsgaWQsIHJlc29sdmUgfSkgPT4ge1xuICAgIHJlc29sdmUoZmF2b3JpdGVzLmluY2x1ZGVzKGlkKSk7XG4gIH0pO1xuICByZXR1cm47XG59LCAzMDApO1xuYXN5bmMgZnVuY3Rpb24gaXNJdGVtSW5GYXZvcml0ZXMoaWQsIHBvcnRhbCwgdXNlcikge1xuICBpZiAoIXVzZXIpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgUFJPTUlTRVMucHVzaCh7IGlkLCByZXNvbHZlIH0pO1xuICB9KTtcbiAgaWYgKCFRVUVVRS5pbmNsdWRlcyhpZCkpIHtcbiAgICBRVUVVRS5wdXNoKGlkKTtcbiAgfVxuICBmZXRjaEZhdm9yaXRlcyhwb3J0YWwsIHVzZXIpO1xuICByZXR1cm4gcHJvbWlzZTtcbn1cbmZ1bmN0aW9uIGFkZFRvRmF2b3JpdGVzKG9wdGlvbnMpIHtcbiAgcmV0dXJuIHVwZGF0ZUZhdm9yaXRlU3RhdHVzKG9wdGlvbnMsIHRydWUpO1xufVxuZnVuY3Rpb24gcmVtb3ZlRnJvbUZhdm9yaXRlcyhvcHRpb25zKSB7XG4gIHJldHVybiB1cGRhdGVGYXZvcml0ZVN0YXR1cyhvcHRpb25zLCBmYWxzZSk7XG59XG5mdW5jdGlvbiB1cGRhdGVGYXZvcml0ZVN0YXR1cyh7IGl0ZW0sIHBvcnRhbCwgdXNlciB9LCBmYXZvcml0ZSkge1xuICBjb25zdCB7IGFjY2VzcywgaWQgfSA9IGl0ZW07XG4gIGNvbnN0IHVybCA9IGAke2dldFJlc3RCYXNlVXJsKHBvcnRhbCl9Y29udGVudC9pdGVtcy8ke2lkfS8ke2Zhdm9yaXRlID8gXCJzaGFyZVwiIDogXCJ1bnNoYXJlXCJ9YDtcbiAgY29uc3QgY29udGVudCA9IHtcbiAgICBldmVyeW9uZTogYWNjZXNzID09PSBcInB1YmxpY1wiLFxuICAgIG9yZzogYWNjZXNzID09PSBcIm9yZ1wiLFxuICAgIGdyb3VwczogdXNlci5mYXZHcm91cElkLFxuICAgIGl0ZW1zOiBpZFxuICB9O1xuICByZXR1cm4gcmVxdWVzdCh1cmwsIGNvbnRlbnQsIHt9LCBcInBvc3RcIik7XG59XG5cbmNvbnN0IEFyY2dpc0l0ZW1GYXZvcml0ZSA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IoaG9zdFJlZikge1xuICAgIHJlZ2lzdGVySW5zdGFuY2UodGhpcywgaG9zdFJlZik7XG4gICAgdGhpcy5hcmNnaXNJdGVtRmF2b3JpdGVVcGRhdGUgPSBjcmVhdGVFdmVudCh0aGlzLCBcImFyY2dpc0l0ZW1GYXZvcml0ZVVwZGF0ZVwiLCA3KTtcbiAgICB0aGlzLml0ZW0gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5wb3J0YWwgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy51c2VyID0gdW5kZWZpbmVkO1xuICAgIHRoaXMud2lkdGggPSBcImZ1bGxcIjtcbiAgICB0aGlzLmljb25Pbmx5ID0gZmFsc2U7XG4gICAgdGhpcy5zY2FsZSA9IFwibVwiO1xuICAgIHRoaXMuaXNGYXZvcml0ZSA9IHVuZGVmaW5lZDtcbiAgfVxuICAvKiogU2V0IGZvY3VzIG9uIHRoZSBjb21wb25lbnQgKi9cbiAgYXN5bmMgc2V0Rm9jdXMoKSB7XG4gICAgdmFyIF9hO1xuICAgIChfYSA9IHRoaXMuYnV0dG9uKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc2V0Rm9jdXMoKTtcbiAgfVxuICAvKiogV2hlbiBmYXZvcml0ZSBpcyB1cGRhdGVkLCBzeW5jIGRpZmZlcmVudCBmYXZvcml0ZSBjb21wb25lbnRzIGZvciB0aGUgc2FtZSBpdGVtICovXG4gIHVwZGF0ZUZhdm9yaXRlKGUpIHtcbiAgICBjb25zdCB7IGlkLCBmYXZvcml0ZSB9ID0gZS5kZXRhaWw7XG4gICAgaWYgKGlkID09PSB0aGlzLml0ZW0uaWQpIHtcbiAgICAgIHRoaXMuaXNGYXZvcml0ZSA9IGZhdm9yaXRlO1xuICAgIH1cbiAgfVxuICBhc3luYyBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICBjb25zdCB7IGVsLCBpdGVtLCBwb3J0YWwsIHVzZXIgfSA9IHRoaXM7XG4gICAgY29uc3QgbG9jYWxlID0gYXdhaXQgZ2V0TG9jYWxlQ29tcG9uZW50U3RyaW5ncyhlbCk7XG4gICAgdGhpcy5pMThuID0gbG9jYWxlWzBdO1xuICAgIHRoaXMuaXNGYXZvcml0ZSA9IGF3YWl0IGlzSXRlbUluRmF2b3JpdGVzKGl0ZW0uaWQsIHBvcnRhbCwgdXNlcik7XG4gIH1cbiAgYXN5bmMgdG9nZ2xlRmF2b3JpdGUoKSB7XG4gICAgY29uc3QgeyB1c2VyLCBwb3J0YWwsIGl0ZW0sIGlzRmF2b3JpdGUgfSA9IHRoaXM7XG4gICAgdGhpcy5pc0Zhdm9yaXRlID0gIWlzRmF2b3JpdGU7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHsgdXNlciwgcG9ydGFsLCBpdGVtIH07XG4gICAgYXdhaXQgKGlzRmF2b3JpdGUgPyByZW1vdmVGcm9tRmF2b3JpdGVzKG9wdGlvbnMpIDogYWRkVG9GYXZvcml0ZXMob3B0aW9ucykpO1xuICAgIHRoaXMuYXJjZ2lzSXRlbUZhdm9yaXRlVXBkYXRlLmVtaXQoe1xuICAgICAgaWQ6IGl0ZW0uaWQsXG4gICAgICBmYXZvcml0ZTogdGhpcy5pc0Zhdm9yaXRlXG4gICAgfSk7XG4gIH1cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgaTE4biwgaXNGYXZvcml0ZSwgd2lkdGgsIHNjYWxlLCBpY29uT25seSB9ID0gdGhpcztcbiAgICBjb25zdCB0ZXh0ID0gaXNGYXZvcml0ZSA/IGkxOG4ucmVtb3ZlIDogaTE4bi5hZGQ7XG4gICAgcmV0dXJuIChoKEhvc3QsIG51bGwsIGgoXCJjYWxjaXRlLWJ1dHRvblwiLCBPYmplY3QuYXNzaWduKHsgd2lkdGg6IGljb25Pbmx5ID8gXCJhdXRvXCIgOiB3aWR0aCwgc2NhbGU6IHNjYWxlLCBhcHBlYXJhbmNlOiBpY29uT25seSA/IFwidHJhbnNwYXJlbnRcIiA6IFwib3V0bGluZS1maWxsXCIsIGtpbmQ6IFwibmV1dHJhbFwiLCBpY29uU3RhcnQ6IGlzRmF2b3JpdGUgPyBcInN0YXItZlwiIDogXCJzdGFyXCIsIG9uQ2xpY2s6ICgpID0+IHtcbiAgICAgICAgdGhpcy50b2dnbGVGYXZvcml0ZSgpO1xuICAgICAgfSwgcmVmOiAoZWwpID0+ICh0aGlzLmJ1dHRvbiA9IGVsKSB9LCAoaWNvbk9ubHkgPyB7IGFyaWFMYWJlbDogdGV4dCB9IDoge30pKSwgIWljb25Pbmx5ICYmIHRleHQpKSk7XG4gIH1cbiAgZ2V0IGVsKCkgeyByZXR1cm4gZ2V0RWxlbWVudCh0aGlzKTsgfVxufTtcblxuY29uc3QgYXJjZ2lzSXRlbVNoYXJlU3VtbWFyeUNzcyA9IFwiOmhvc3R7ZGlzcGxheTppbmxpbmUtZmxleDthbGlnbi1pdGVtczpjZW50ZXI7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWZvcmVncm91bmQtMSk7anVzdGlmeS1jb250ZW50OmNlbnRlcjtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWNhbGNpdGUtdWktYm9yZGVyLTEpO2JvcmRlci1yYWRpdXM6Y2FsYyh2YXIoLS1hcmNnaXMtaXRlbS1zaGFyZS1zdW1tYXJ5LXNwYWNpbmcpICsgMC4yNXJlbSk7cGFkZGluZzowLjI1cmVtIDAuNXJlbTttaW4td2lkdGg6Y2FsYyh2YXIoLS1hcmNnaXMtaXRlbS1zaGFyZS1zdW1tYXJ5LXNwYWNpbmcpKX06aG9zdChbc2NhbGU9c10pe2ZvbnQtc2l6ZTowLjg3NXJlbTstLWFyY2dpcy1pdGVtLXNoYXJlLXN1bW1hcnktc3BhY2luZzoxcmVtfTpob3N0KFtzY2FsZT1tXSl7Zm9udC1zaXplOjFyZW07LS1hcmNnaXMtaXRlbS1zaGFyZS1zdW1tYXJ5LXNwYWNpbmc6MS41cmVtfTpob3N0KFtzY2FsZT1sXSl7Zm9udC1zaXplOjEuMTI1cmVtOy0tYXJjZ2lzLWl0ZW0tc2hhcmUtc3VtbWFyeS1zcGFjaW5nOjJyZW19Lmljb257ZGlzcGxheTpibG9jaztmbGV4LWdyb3c6MDtmbGV4LXNocmluazowO3dpZHRoOnZhcigtLWFyY2dpcy1pdGVtLXNoYXJlLXN1bW1hcnktc3BhY2luZyk7aGVpZ2h0OnZhcigtLWFyY2dpcy1pdGVtLXNoYXJlLXN1bW1hcnktc3BhY2luZyl9LnRleHR7Y29sb3I6dmFyKC0tY2FsY2l0ZS11aS10ZXh0LTEpO2ZvbnQtd2VpZ2h0OjQwMDstd2Via2l0LW1hcmdpbi1zdGFydDpjYWxjKHZhcigtLWFyY2dpcy1pdGVtLXNoYXJlLXN1bW1hcnktc3BhY2luZykgLyAyKTttYXJnaW4taW5saW5lLXN0YXJ0OmNhbGModmFyKC0tYXJjZ2lzLWl0ZW0tc2hhcmUtc3VtbWFyeS1zcGFjaW5nKSAvIDIpfVwiO1xuXG5jb25zdCBBcmNnaXNJdGVtU2hhcmVTdW1tYXJ5ID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XG4gICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICB0aGlzLml0ZW0gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5ncm91cHMgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5zaG93VGV4dCA9IHRydWU7XG4gICAgdGhpcy5zY2FsZSA9IHVuZGVmaW5lZDtcbiAgfVxuICBhc3luYyBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICBjb25zdCB7IGVsIH0gPSB0aGlzO1xuICAgIGNvbnN0IGxvY2FsZSA9IGF3YWl0IGdldExvY2FsZUNvbXBvbmVudFN0cmluZ3MoZWwpO1xuICAgIHRoaXMuaTE4biA9IGxvY2FsZVswXTtcbiAgfVxuICBnZXRJY29uKGFjY2Vzcykge1xuICAgIGNvbnN0IGxvb2t1cCA9IHtcbiAgICAgIHByaXZhdGU6IFwidXNlclwiLFxuICAgICAgc2hhcmVkOiBcInVzZXJcIixcbiAgICAgIG9yZzogXCJvcmdhbml6YXRpb25cIixcbiAgICAgIHB1YmxpYzogXCJnbG9iZVwiXG4gICAgfTtcbiAgICByZXR1cm4gbG9va3VwW2FjY2Vzc10gfHwgXCJnbG9iZVwiO1xuICB9XG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IGl0ZW0sIGkxOG4sIHNjYWxlLCBzaG93VGV4dCB9ID0gdGhpcztcbiAgICByZXR1cm4gKGgoSG9zdCwgbnVsbCwgaChcImNhbGNpdGUtaWNvblwiLCB7IGNsYXNzOiBcImljb25cIiwgaWNvbjogdGhpcy5nZXRJY29uKGl0ZW0uYWNjZXNzKSwgc2NhbGU6IHNjYWxlIH0pLCBpdGVtLmFjY2VzcyA9PT0gXCJzaGFyZWRcIiAmJiAoaChGcmFnbWVudCwgbnVsbCwgaChcImNhbGNpdGUtaWNvblwiLCB7IGNsYXNzOiBcImljb25cIiwgaWNvbjogXCJwbHVzXCIsIHNjYWxlOiBzY2FsZSB9KSwgaChcImNhbGNpdGUtaWNvblwiLCB7IGNsYXNzOiBcImljb25cIiwgaWNvbjogXCJncm91cFwiLCBzY2FsZTogc2NhbGUgfSkpKSwgc2hvd1RleHQgJiYgaChcInNwYW5cIiwgeyBjbGFzczogXCJ0ZXh0XCIgfSwgaTE4bltpdGVtLmFjY2Vzc10pKSk7XG4gIH1cbiAgZ2V0IGVsKCkgeyByZXR1cm4gZ2V0RWxlbWVudCh0aGlzKTsgfVxufTtcbkFyY2dpc0l0ZW1TaGFyZVN1bW1hcnkuc3R5bGUgPSBhcmNnaXNJdGVtU2hhcmVTdW1tYXJ5Q3NzO1xuXG5mdW5jdGlvbiBnZXRJdGVtRGlzcGxheUluZm9ybWF0aW9uKHsgaXRlbSB9KSB7XG4gIGNvbnN0IGljb24gPSBnZXRJdGVtSWNvbihpdGVtKTtcbiAgcmV0dXJuIHtcbiAgICBkaXNwbGF5TmFtZTogZ2V0RGlzcGxheU5hbWUoaXRlbSksXG4gICAgaWNvblBhdGg6IGdldEFzc2V0UGF0aChgLi9hc3NldHMvYXJjZ2lzLWl0ZW0tdHlwZS8ke2ljb259MTYuc3ZnYClcbiAgfTtcbn1cbi8vIFRPRE86IHBvcnRhbCBpcyBubyBsb25nZXIgbmVlZGVkIGZvciB0aGlzIGNhbGN1bGF0aW9uLCBjb25zaWRlciByZW1vdmluZ1xuZnVuY3Rpb24gZ2V0RGlzcGxheU5hbWUoaXRlbSkge1xuICB2YXIgX2E7XG4gIGNvbnN0IGtleXdvcmRzID0gaXRlbS50eXBlS2V5d29yZHMgfHwgW107XG4gIHN3aXRjaCAoaXRlbS50eXBlKSB7XG4gICAgY2FzZSBcIkZlYXR1cmUgU2VydmljZVwiOlxuICAgIGNhc2UgXCJGZWF0dXJlIENvbGxlY3Rpb25cIjpcbiAgICBjYXNlIFwiU3RyZWFtIFNlcnZpY2VcIjpcbiAgICAgIGlmIChrZXl3b3Jkcy5pbmNsdWRlcyhcIkFyY2dpc1dvcmtmbG93TWFuYWdlclwiKSkge1xuICAgICAgICBpZiAoa2V5d29yZHMuaW5jbHVkZXMoXCJWaWV3IFNlcnZpY2VcIikpIHtcbiAgICAgICAgICByZXR1cm4gXCJXb3JrZmxvdyBWaWV3XCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFwiV29ya2Zsb3cgTGF5ZXJcIjtcbiAgICAgIH1cbiAgICAgIGlmIChrZXl3b3Jkcy5pbmNsdWRlcyhcIkFyY2dpc1dvcmtmbG93Sm9iTG9jYXRpb25cIikgJiYga2V5d29yZHMuaW5jbHVkZXMoXCJWaWV3IFNlcnZpY2VcIikpIHtcbiAgICAgICAgcmV0dXJuIFwiV29ya2Zsb3cgSm9iIExvY2F0aW9uIFZpZXdcIjtcbiAgICAgIH1cbiAgICAgIGlmIChrZXl3b3Jkcy5pbmNsdWRlcyhcIlRhYmxlXCIpKSB7XG4gICAgICAgIHJldHVybiBcIlRhYmxlXCI7XG4gICAgICB9XG4gICAgICBpZiAoa2V5d29yZHMuaW5jbHVkZXMoXCJSb3V0ZSBMYXllclwiKSkge1xuICAgICAgICByZXR1cm4gXCJSb3V0ZSBMYXllclwiO1xuICAgICAgfVxuICAgICAgaWYgKGtleXdvcmRzLmluY2x1ZGVzKFwiTWFya3VwXCIpKSB7XG4gICAgICAgIHJldHVybiBcIk1hcmt1cFwiO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFwiRmVhdHVyZSBMYXllclwiO1xuICAgIGNhc2UgXCJJbWFnZSBTZXJ2aWNlXCI6XG4gICAgICBpZiAoa2V5d29yZHMuaW5jbHVkZXMoXCJFbGV2YXRpb24gM0QgTGF5ZXJcIikpIHtcbiAgICAgICAgcmV0dXJuIFwiRWxldmF0aW9uIExheWVyXCI7XG4gICAgICB9XG4gICAgICBpZiAoa2V5d29yZHMuaW5jbHVkZXMoXCJUaWxlZCBJbWFnZXJ5XCIpKSB7XG4gICAgICAgIHJldHVybiBcIlRpbGVkIEltYWdlcnkgTGF5ZXJcIjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBcIkltYWdlcnkgTGF5ZXJcIjtcbiAgICBjYXNlIFwiU2NlbmUgU2VydmljZVwiOlxuICAgICAgcmV0dXJuIFwiU2NlbmUgTGF5ZXJcIjtcbiAgICBjYXNlIFwiVmlkZW8gU2VydmljZVwiOlxuICAgICAgcmV0dXJuIFwiVmlkZW8gTGF5ZXJcIjtcbiAgICBjYXNlIFwiU2NlbmUgUGFja2FnZVwiOlxuICAgICAgcmV0dXJuIFwiU2NlbmUgTGF5ZXIgUGFja2FnZVwiO1xuICAgIGNhc2UgXCJHZW9wcm9jZXNzaW5nIFNlcnZpY2VcIjpcbiAgICAgIGlmIChrZXl3b3Jkcy5pbmNsdWRlcyhcIldlYiBUb29sXCIpKSB7XG4gICAgICAgIHJldHVybiBcIlRvb2xcIjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBcIkdlb3Byb2Nlc3NpbmcgU2VydmljZVwiO1xuICAgIGNhc2UgXCJTdG9yeU1hcFwiOlxuICAgICAgaWYgKGtleXdvcmRzLmluY2x1ZGVzKFwic3RvcnltYXBjb2xsZWN0aW9uXCIpKSB7XG4gICAgICAgIHJldHVybiBcIlN0b3J5TWFwIENvbGxlY3Rpb25cIjtcbiAgICAgIH1cbiAgICAgIGlmIChrZXl3b3Jkcy5pbmNsdWRlcyhcInN0b3J5bWFwYnJpZWZpbmdcIikpIHtcbiAgICAgICAgcmV0dXJuIFwiU3RvcnlNYXAgQnJpZWZpbmdcIjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBcIlN0b3J5TWFwXCI7XG4gICAgY2FzZSBcIkdlb2NvZGluZyBTZXJ2aWNlXCI6XG4gICAgICByZXR1cm4gXCJMb2NhdG9yXCI7XG4gICAgY2FzZSBcIkdlb2VucmljaG1lbnQgU2VydmljZVwiOlxuICAgICAgcmV0dXJuIFwiR2VvRW5yaWNobWVudCBTZXJ2aWNlXCI7XG4gICAgY2FzZSBcIk1pY3Jvc29mdCBQb3dlcnBvaW50XCI6XG4gICAgICByZXR1cm4gXCJNaWNyb3NvZnQgUG93ZXJQb2ludFwiO1xuICAgIGNhc2UgXCJHZW9Kc29uXCI6XG4gICAgICByZXR1cm4gXCJHZW9KU09OXCI7XG4gICAgY2FzZSBcIkdsb2JlIFNlcnZpY2VcIjpcbiAgICAgIHJldHVybiBcIkdsb2JlIExheWVyXCI7XG4gICAgY2FzZSBcIlZlY3RvciBUaWxlIFNlcnZpY2VcIjpcbiAgICAgIHJldHVybiBcIlRpbGUgTGF5ZXJcIjtcbiAgICBjYXNlIFwibmV0Q0RGXCI6XG4gICAgICByZXR1cm4gXCJOZXRDREZcIjtcbiAgICBjYXNlIFwiTWFwIFNlcnZpY2VcIjpcbiAgICAgIGlmICgha2V5d29yZHMuaW5jbHVkZXMoXCJTcGF0aW90ZW1wb3JhbFwiKSAmJlxuICAgICAgICAoa2V5d29yZHMuaW5jbHVkZXMoXCJIb3N0ZWQgU2VydmljZVwiKSB8fCBrZXl3b3Jkcy5pbmNsdWRlcyhcIlRpbGVkXCIpKSAmJlxuICAgICAgICAha2V5d29yZHMuaW5jbHVkZXMoXCJSZWxhdGlvbmFsXCIpKSB7XG4gICAgICAgIHJldHVybiBcIlRpbGUgTGF5ZXJcIjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBcIk1hcCBJbWFnZSBMYXllclwiO1xuICAgIGNhc2UgXCJkYXRhc3RvcmUgY2F0YWxvZyBzZXJ2aWNlXCI6XG4gICAgICByZXR1cm4gXCJCaWcgRGF0YSBGaWxlIFNoYXJlXCI7XG4gICAgY2FzZSBcIkNvbXBhY3QgVGlsZSBQYWNrYWdlXCI6XG4gICAgICByZXR1cm4gXCJUaWxlIFBhY2thZ2UgKHRwa3gpXCI7XG4gICAgY2FzZSBcIk9HQ0ZlYXR1cmVTZXJ2ZXJcIjpcbiAgICAgIHJldHVybiBcIk9HQyBGZWF0dXJlIExheWVyXCI7XG4gICAgY2FzZSBcIldlYiBNYXBwaW5nIEFwcGxpY2F0aW9uXCI6XG4gICAgY2FzZSBcIkFwcGxpY2F0aW9uXCI6XG4gICAgY2FzZSBcIk1vYmlsZSBBcHBsaWNhdGlvblwiOlxuICAgIGNhc2UgXCJPcGVyYXRpb24gVmlld1wiOlxuICAgIGNhc2UgXCJEZXNrdG9wIEFwcGxpY2F0aW9uXCI6XG4gICAgICBpZiAoa2V5d29yZHMuaW5jbHVkZXMoXCJjb25maWd1cmFibGVBcHBcIikpIHtcbiAgICAgICAgcmV0dXJuIFwiSW5zdGFudCBBcHBcIjtcbiAgICAgIH1cbiAgfVxuICBpZiAoKF9hID0gaXRlbS50eXBlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcImFkZCBpblwiKSkge1xuICAgIHJldHVybiBpdGVtLnR5cGUucmVwbGFjZSgvKGFkZCBpbikvZ2ksIFwiQWRkLUluXCIpO1xuICB9XG4gIHJldHVybiBpdGVtLnR5cGU7XG59XG5mdW5jdGlvbiBnZXRJdGVtSWNvbihpdGVtKSB7XG4gIHZhciBfYTtcbiAgY29uc3QgdHlwZSA9ICgoX2EgPSBpdGVtID09PSBudWxsIHx8IGl0ZW0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGl0ZW0udHlwZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnRvTG93ZXJDYXNlKCkpIHx8IFwiXCI7XG4gIGNvbnN0IGtleXdvcmRzID0gKGl0ZW0gPT09IG51bGwgfHwgaXRlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogaXRlbS50eXBlS2V5d29yZHMpIHx8IFtdO1xuICBjb25zdCBob3N0ZWQgPSBrZXl3b3Jkcy5pbmNsdWRlcyhcIkhvc3RlZCBTZXJ2aWNlXCIpO1xuICBzd2l0Y2ggKHR5cGUudHJpbSgpKSB7XG4gICAgY2FzZSBcIjM2MCB2ciBleHBlcmllbmNlXCI6XG4gICAgICByZXR1cm4gXCIzNjB2clwiO1xuICAgIGNhc2UgXCJmZWF0dXJlIHNlcnZpY2VcIjpcbiAgICBjYXNlIFwiZmVhdHVyZSBjb2xsZWN0aW9uXCI6XG4gICAgY2FzZSBcImttbFwiOlxuICAgIGNhc2UgXCJ3ZnNcIjpcbiAgICAgIGNvbnN0IGlzU3BhdGlvdGVtcG9yYWwgPSBrZXl3b3Jkcy5pbmNsdWRlcyhcIlNwYXRpb3RlbXBvcmFsXCIpO1xuICAgICAgaWYgKGtleXdvcmRzLmluY2x1ZGVzKFwiVGFibGVcIikpIHtcbiAgICAgICAgcmV0dXJuIGlzU3BhdGlvdGVtcG9yYWwgPyBcInNwYXRpb3RlbXBvcmFsdGFibGVcIiA6IFwidGFibGVcIjtcbiAgICAgIH1cbiAgICAgIGlmIChrZXl3b3Jkcy5pbmNsdWRlcyhcIlJvdXRlIExheWVyXCIpKSB7XG4gICAgICAgIHJldHVybiBcInJvdXRlbGF5ZXJcIjtcbiAgICAgIH1cbiAgICAgIGlmIChrZXl3b3Jkcy5pbmNsdWRlcyhcIk1hcmt1cFwiKSkge1xuICAgICAgICByZXR1cm4gXCJtYXJrdXBcIjtcbiAgICAgIH1cbiAgICAgIGlmIChpc1NwYXRpb3RlbXBvcmFsKSB7XG4gICAgICAgIHJldHVybiBcInNwYXRpb3RlbXBvcmFsXCI7XG4gICAgICB9XG4gICAgICBpZiAoa2V5d29yZHMuaW5jbHVkZXMoXCJVdGlsaXR5TmV0d29ya1wiKSkge1xuICAgICAgICByZXR1cm4gXCJ1dGlsaXR5bmV0d29ya1wiO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGhvc3RlZCA/IFwiZmVhdHVyZXNob3N0ZWRcIiA6IFwiZmVhdHVyZXNcIjtcbiAgICBjYXNlIFwiZ3JvdXAgbGF5ZXJcIjpcbiAgICAgIGlmIChrZXl3b3Jkcy5pbmNsdWRlcyhcIk1hcFwiKSkge1xuICAgICAgICByZXR1cm4gXCJsYXllcmdyb3VwMmRcIjtcbiAgICAgIH1cbiAgICAgIGlmIChrZXl3b3Jkcy5pbmNsdWRlcyhcIlNjZW5lXCIpKSB7XG4gICAgICAgIHJldHVybiBcImxheWVyZ3JvdXAzZFwiO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFwibGF5ZXJncm91cFwiO1xuICAgIGNhc2UgXCJ3bXRzXCI6XG4gICAgICByZXR1cm4gXCJtYXB0aWxlc1wiO1xuICAgIGNhc2UgXCJtYXAgc2VydmljZVwiOlxuICAgIGNhc2UgXCJ3bXNcIjpcbiAgICAgIHJldHVybiBob3N0ZWQgfHwga2V5d29yZHMuaW5jbHVkZXMoXCJUaWxlZFwiKSA/IFwibWFwdGlsZXNcIiA6IFwibWFwaW1hZ2VzXCI7XG4gICAgY2FzZSBcInNjZW5lIHNlcnZpY2VcIjpcbiAgICAgIGlmIChrZXl3b3Jkcy5pbmNsdWRlcyhcIkxpbmVcIikpIHtcbiAgICAgICAgcmV0dXJuIFwic2NlbmV3ZWJsYXllcmxpbmVcIjtcbiAgICAgIH1cbiAgICAgIGlmIChrZXl3b3Jkcy5pbmNsdWRlcyhcIjNET2JqZWN0XCIpKSB7XG4gICAgICAgIHJldHVybiBcInNjZW5ld2VibGF5ZXJtdWx0aXBhdGNoXCI7XG4gICAgICB9XG4gICAgICBpZiAoa2V5d29yZHMuaW5jbHVkZXMoXCJQb2ludFwiKSkge1xuICAgICAgICByZXR1cm4gXCJzY2VuZXdlYmxheWVycG9pbnRcIjtcbiAgICAgIH1cbiAgICAgIGlmIChrZXl3b3Jkcy5pbmNsdWRlcyhcIkludGVncmF0ZWRNZXNoXCIpKSB7XG4gICAgICAgIHJldHVybiBcInNjZW5ld2VibGF5ZXJtZXNoXCI7XG4gICAgICB9XG4gICAgICBpZiAoa2V5d29yZHMuaW5jbHVkZXMoXCJQb2ludENsb3VkXCIpKSB7XG4gICAgICAgIHJldHVybiBcInNjZW5ld2VibGF5ZXJwb2ludGNsb3VkXCI7XG4gICAgICB9XG4gICAgICBpZiAoa2V5d29yZHMuaW5jbHVkZXMoXCJQb2x5Z29uXCIpKSB7XG4gICAgICAgIHJldHVybiBcInNjZW5ld2VibGF5ZXJwb2x5Z29uXCI7XG4gICAgICB9XG4gICAgICBpZiAoa2V5d29yZHMuaW5jbHVkZXMoXCJCdWlsZGluZ1wiKSkge1xuICAgICAgICByZXR1cm4gXCJzY2VuZXdlYmxheWVyYnVpbGRpbmdcIjtcbiAgICAgIH1cbiAgICAgIGlmIChrZXl3b3Jkcy5pbmNsdWRlcyhcIlZveGVsXCIpKSB7XG4gICAgICAgIHJldHVybiBcInNjZW5ld2VibGF5ZXJ2b3hlbFwiO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFwic2NlbmV3ZWJsYXllclwiO1xuICAgIGNhc2UgXCJpbWFnZSBzZXJ2aWNlXCI6XG4gICAgICBpZiAoa2V5d29yZHMuaW5jbHVkZXMoXCJFbGV2YXRpb24gM0QgTGF5ZXJcIikpIHtcbiAgICAgICAgcmV0dXJuIFwiZWxldmF0aW9ubGF5ZXJcIjtcbiAgICAgIH1cbiAgICAgIGlmIChrZXl3b3Jkcy5pbmNsdWRlcyhcIlRpbGVkIEltYWdlcnlcIikpIHtcbiAgICAgICAgcmV0dXJuIFwidGlsZWRpbWFnZXJ5bGF5ZXJcIjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBcImltYWdlcnlcIjtcbiAgICBjYXNlIFwic3RyZWFtIHNlcnZpY2VcIjpcbiAgICAgIHJldHVybiBcInN0cmVhbWxheWVyXCI7XG4gICAgY2FzZSBcInZpZGVvIHNlcnZpY2VcIjpcbiAgICAgIHJldHVybiBcIm1lZGlhc2VydmljZVwiO1xuICAgIGNhc2UgXCJ2ZWN0b3IgdGlsZSBzZXJ2aWNlXCI6XG4gICAgICByZXR1cm4gXCJ2ZWN0b3J0aWxlXCI7XG4gICAgY2FzZSBcImRhdGFzdG9yZSBjYXRhbG9nIHNlcnZpY2VcIjpcbiAgICAgIHJldHVybiBcImRhdGFzdG9yZWNvbGxlY3Rpb25cIjtcbiAgICBjYXNlIFwiZ2VvY29kaW5nIHNlcnZpY2VcIjpcbiAgICAgIHJldHVybiBcImdlb2NvZGVzZXJ2aWNlXCI7XG4gICAgY2FzZSBcImdlb3Byb2Nlc3Npbmcgc2VydmljZVwiOlxuICAgICAgcmV0dXJuIGtleXdvcmRzLmluY2x1ZGVzKFwiV2ViIFRvb2xcIikgPyBcInRvb2xcIiA6IFwibGF5ZXJzXCI7XG4gICAgY2FzZSBcImdlb2RhdGEgc2VydmljZVwiOlxuICAgICAgcmV0dXJuIFwiZ2VvZGF0YXNlcnZpY2VcIjtcbiAgICBjYXNlIFwid2ViIG1hcFwiOlxuICAgIGNhc2UgXCJjaXR5ZW5naW5lIHdlYiBzY2VuZVwiOlxuICAgICAgcmV0dXJuIFwibWFwc1wiO1xuICAgIGNhc2UgXCJ3ZWIgc2NlbmVcIjpcbiAgICAgIHJldHVybiBrZXl3b3Jkcy5pbmNsdWRlcyhcIlZpZXdpbmdNb2RlLUxvY2FsXCIpID8gXCJ3ZWJzY2VuZWxvY2FsXCIgOiBcIndlYnNjZW5lZ2xvYmFsXCI7XG4gICAgY2FzZSBcImFwcGxpY2F0aW9uXCI6XG4gICAgY2FzZSBcIndlYiBtYXBwaW5nIGFwcGxpY2F0aW9uXCI6XG4gICAgY2FzZSBcIm1vYmlsZSBhcHBsaWNhdGlvblwiOlxuICAgIGNhc2UgXCJvcGVyYXRpb24gdmlld1wiOlxuICAgIGNhc2UgXCJkZXNrdG9wIGFwcGxpY2F0aW9uXCI6XG4gICAgICByZXR1cm4ga2V5d29yZHMuaW5jbHVkZXMoXCJjb25maWd1cmFibGVBcHBcIikgPyBcImluc3RhbnRhcHBzXCIgOiBcImFwcHNcIjtcbiAgICBjYXNlIFwibWFwIGRvY3VtZW50XCI6XG4gICAgY2FzZSBcIm1hcCBwYWNrYWdlXCI6XG4gICAgY2FzZSBcInB1Ymxpc2hlZCBtYXBcIjpcbiAgICBjYXNlIFwic2NlbmUgZG9jdW1lbnRcIjpcbiAgICBjYXNlIFwiZ2xvYmUgZG9jdW1lbnRcIjpcbiAgICBjYXNlIFwiYmFzZW1hcCBwYWNrYWdlXCI6XG4gICAgY2FzZSBcIm1vYmlsZSBiYXNlbWFwIHBhY2thZ2VcIjpcbiAgICBjYXNlIFwibW9iaWxlIG1hcCBwYWNrYWdlXCI6XG4gICAgY2FzZSBcInByb2plY3QgcGFja2FnZVwiOlxuICAgIGNhc2UgXCJwcm9qZWN0IHRlbXBsYXRlXCI6XG4gICAgY2FzZSBcInBybyBtYXBcIjpcbiAgICBjYXNlIFwibGF5b3V0XCI6XG4gICAgICByZXR1cm4gXCJtYXBzZ3JheVwiO1xuICAgIGNhc2UgXCJsYXllclwiOlxuICAgICAgaWYgKGtleXdvcmRzLmluY2x1ZGVzKFwiQXJjR0lTIFByb1wiKSkge1xuICAgICAgICByZXR1cm4gXCJtYXBzZ3JheVwiO1xuICAgICAgfVxuICAgIGNhc2UgXCJleHBsb3JlciBtYXBcIjpcbiAgICAgIGlmIChrZXl3b3Jkcy5pbmRleE9mKFwiRXhwbG9yZXIgRG9jdW1lbnRcIikpIHtcbiAgICAgICAgcmV0dXJuIFwibWFwc2dyYXlcIjtcbiAgICAgIH1cbiAgICAgIGlmIChrZXl3b3Jkcy5pbmNsdWRlcyhcIkV4cGxvcmVyIE1hcHBpbmcgQXBwbGljYXRpb25cIikpIHtcbiAgICAgICAgcmV0dXJuIFwiZGF0YWZpbGVzZ3JheVwiO1xuICAgICAgfVxuICAgIGNhc2UgXCJhcGkga2V5XCI6XG4gICAgICByZXR1cm4gXCJrZXlcIjtcbiAgICBjYXNlIFwiY3N2XCI6XG4gICAgICByZXR1cm4gXCJjc3ZcIjtcbiAgICBjYXNlIFwic2hhcGVmaWxlXCI6XG4gICAgICByZXR1cm4gXCJzaGFwZWZpbGVcIjtcbiAgICBjYXNlIFwiY3N2IGNvbGxlY3Rpb25cIjpcbiAgICAgIHJldHVybiBcImNzdmNvbGxlY3Rpb25cIjtcbiAgICBjYXNlIFwibWVkaWEgbGF5ZXJcIjpcbiAgICAgIHJldHVybiBcIm1lZGlhbGF5ZXJcIjtcbiAgICBjYXNlIFwibWljcm9zb2Z0IGV4Y2VsXCI6XG4gICAgICByZXR1cm4gXCJleGNlbFwiO1xuICAgIGNhc2UgXCJtaWNyb3NvZnQgcG93ZXJwb2ludFwiOlxuICAgICAgcmV0dXJuIFwicG93ZXJwb2ludFwiO1xuICAgIGNhc2UgXCJtaWNyb3NvZnQgd29yZFwiOlxuICAgICAgcmV0dXJuIFwid29yZFwiO1xuICAgIGNhc2UgXCJwZGZcIjpcbiAgICAgIHJldHVybiBcInBkZlwiO1xuICAgIGNhc2UgXCJzcWxpdGUgZ2VvZGF0YWJhc2VcIjpcbiAgICAgIHJldHVybiBcInNxbGl0ZVwiO1xuICAgIGNhc2UgXCJhZG1pbmlzdHJhdGl2ZSByZXBvcnRcIjpcbiAgICAgIHJldHVybiBcInJlcG9ydFwiO1xuICAgIGNhc2UgXCJpbWFnZVwiOlxuICAgICAgcmV0dXJuIFwiaW1hZ2VcIjtcbiAgICBjYXNlIFwiY2FkIGRyYXdpbmdcIjpcbiAgICAgIHJldHVybiBcImNhZFwiO1xuICAgIGNhc2UgXCJzZXJ2aWNlIGRlZmluaXRpb25cIjpcbiAgICBjYXNlIFwiZ2VvanNvblwiOlxuICAgIGNhc2UgXCIzNjAgdnIgZXhwZXJpZW5jZVwiOlxuICAgIGNhc2UgXCJuZXRjZGZcIjpcbiAgICAgIHJldHVybiBcImRhdGFcIjtcbiAgICBjYXNlIFwiZXhwbG9yZXIgYWRkIGluXCI6XG4gICAgY2FzZSBcImRlc2t0b3AgYWRkIGluXCI6XG4gICAgY2FzZSBcIndpbmRvd3Mgdmlld2VyIGFkZCBpblwiOlxuICAgIGNhc2UgXCJ3aW5kb3dzIHZpZXdlciBjb25maWd1cmF0aW9uXCI6XG4gICAgICByZXR1cm4gXCJhcHBzZ3JheVwiO1xuICAgIGNhc2UgXCJhcmNnaXMgcHJvIGFkZCBpblwiOlxuICAgIGNhc2UgXCJhcmNnaXMgcHJvIGNvbmZpZ3VyYXRpb25cIjpcbiAgICAgIHJldHVybiBcImFkZGluZGVza3RvcFwiO1xuICAgIGNhc2UgXCJydWxlIHBhY2thZ2VcIjpcbiAgICBjYXNlIFwiZmlsZSBnZW9kYXRhYmFzZVwiOlxuICAgIGNhc2UgXCJrbWwgY29sbGVjdGlvblwiOlxuICAgIGNhc2UgXCJ3aW5kb3dzIG1vYmlsZSBwYWNrYWdlXCI6XG4gICAgY2FzZSBcIm1hcCB0ZW1wbGF0ZVwiOlxuICAgIGNhc2UgXCJkZXNrdG9wIGFwcGxpY2F0aW9uIHRlbXBsYXRlXCI6XG4gICAgY2FzZSBcImdtbFwiOlxuICAgIGNhc2UgXCJhcmNwYWQgcGFja2FnZVwiOlxuICAgIGNhc2UgXCJjb2RlIHNhbXBsZVwiOlxuICAgIGNhc2UgXCJkb2N1bWVudCBsaW5rXCI6XG4gICAgY2FzZSBcImVhcnRoIGNvbmZpZ3VyYXRpb25cIjpcbiAgICBjYXNlIFwib3BlcmF0aW9ucyBkYXNoYm9hcmQgYWRkIGluXCI6XG4gICAgY2FzZSBcInJ1bGVzIHBhY2thZ2VcIjpcbiAgICBjYXNlIFwid29ya2Zsb3cgbWFuYWdlciBwYWNrYWdlXCI6XG4gICAgICByZXR1cm4gXCJkYXRhZmlsZXNncmF5XCI7XG4gICAgY2FzZSBcImZvcm1cIjpcbiAgICAgIGlmIChrZXl3b3Jkcy5pbmNsdWRlcyhcIlN1cnZleTEyM1wiKSkge1xuICAgICAgICByZXR1cm4gXCJzdXJ2ZXlcIjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBcImRhdGFmaWxlc2dyYXlcIjtcbiAgICBjYXNlIFwibmV0d29yayBhbmFseXNpcyBzZXJ2aWNlXCI6XG4gICAgY2FzZSBcImdlb3Byb2Nlc3Npbmcgc2VydmljZVwiOlxuICAgIGNhc2UgXCJnZW9kYXRhIHNlcnZpY2VcIjpcbiAgICBjYXNlIFwiZ2VvbWV0cnkgc2VydmljZVwiOlxuICAgIGNhc2UgXCJnZW9wcm9jZXNzaW5nIHBhY2thZ2VcIjpcbiAgICBjYXNlIFwibG9jYXRvciBwYWNrYWdlXCI6XG4gICAgY2FzZSBcImdlb3Byb2Nlc3Npbmcgc2FtcGxlXCI6XG4gICAgY2FzZSBcIndvcmtmbG93IG1hbmFnZXIgc2VydmljZVwiOlxuICAgICAgcmV0dXJuIFwidG9vbHNncmF5XCI7XG4gICAgY2FzZSBcImxheWVyXCI6XG4gICAgY2FzZSBcImxheWVyIHBhY2thZ2VcIjpcbiAgICBjYXNlIFwiZXhwbG9yZXIgbGF5ZXJcIjpcbiAgICAgIHJldHVybiBcImxheWVyc2dyYXlcIjtcbiAgICBjYXNlIFwic2NlbmUgcGFja2FnZVwiOlxuICAgICAgcmV0dXJuIFwic2NlbmVwYWNrYWdlXCI7XG4gICAgY2FzZSBcIm1vYmlsZSBzY2VuZSBwYWNrYWdlXCI6XG4gICAgICByZXR1cm4gXCJtb2JpbGVzY2VuZXBhY2thZ2VcIjtcbiAgICBjYXNlIFwidGlsZSBwYWNrYWdlXCI6XG4gICAgY2FzZSBcImNvbXBhY3QgdGlsZSBwYWNrYWdlXCI6XG4gICAgICByZXR1cm4gXCJ0aWxlcGFja2FnZVwiO1xuICAgIGNhc2UgXCJ0YXNrIGZpbGVcIjpcbiAgICAgIHJldHVybiBcInRhc2tmaWxlXCI7XG4gICAgY2FzZSBcInJlcG9ydCB0ZW1wbGF0ZVwiOlxuICAgICAgcmV0dXJuIFwicmVwb3J0dGVtcGxhdGVcIjtcbiAgICBjYXNlIFwic3RhdGlzdGljYWwgZGF0YSBjb2xsZWN0aW9uXCI6XG4gICAgICByZXR1cm4gXCJzdGF0aXN0aWNhbGRhdGFjb2xsZWN0aW9uXCI7XG4gICAgY2FzZSBcImluc2lnaHRzIHdvcmtib29rXCI6XG4gICAgICByZXR1cm4gXCJ3b3JrYm9va1wiO1xuICAgIGNhc2UgXCJpbnNpZ2h0cyBtb2RlbFwiOlxuICAgICAgcmV0dXJuIFwiaW5zaWdodHNtb2RlbFwiO1xuICAgIGNhc2UgXCJpbnNpZ2h0cyBwYWdlXCI6XG4gICAgICByZXR1cm4gXCJpbnNpZ2h0c3BhZ2VcIjtcbiAgICBjYXNlIFwiaW5zaWdodHMgdGhlbWVcIjpcbiAgICAgIHJldHVybiBcImluc2lnaHRzdGhlbWVcIjtcbiAgICBjYXNlIFwiaHViIGluaXRpYXRpdmVcIjpcbiAgICAgIHJldHVybiBcImh1YmluaXRpYXRpdmVcIjtcbiAgICBjYXNlIFwiaHViIHBhZ2VcIjpcbiAgICAgIHJldHVybiBcImh1YnBhZ2VcIjtcbiAgICBjYXNlIFwiaHViIGV2ZW50XCI6XG4gICAgICByZXR1cm4gXCJodWJldmVudFwiO1xuICAgIGNhc2UgXCJodWIgc2l0ZSBhcHBsaWNhdGlvblwiOlxuICAgICAgcmV0dXJuIFwiaHVic2l0ZVwiO1xuICAgIGNhc2UgXCJodWIgcHJvamVjdFwiOlxuICAgICAgcmV0dXJuIFwiaHVicHJvamVjdFwiO1xuICAgIGNhc2UgXCJyZWxhdGlvbmFsIGRhdGFiYXNlIGNvbm5lY3Rpb25cIjpcbiAgICAgIHJldHVybiBcInJlbGF0aW9uYWxkYXRhYmFzZWNvbm5lY3Rpb25cIjtcbiAgICBjYXNlIFwiYmlnIGRhdGEgZmlsZSBzaGFyZVwiOlxuICAgICAgcmV0dXJuIFwiZGF0YXN0b3JlY29sbGVjdGlvblwiO1xuICAgIGNhc2UgXCJpbWFnZVwiOlxuICAgICAgcmV0dXJuIFwiaW1hZ2VcIjtcbiAgICBjYXNlIFwiaW1hZ2UgY29sbGVjdGlvblwiOlxuICAgICAgcmV0dXJuIFwiaW1hZ2Vjb2xsZWN0aW9uXCI7XG4gICAgY2FzZSBcInN0eWxlXCI6XG4gICAgICByZXR1cm4gXCJzdHlsZVwiO1xuICAgIGNhc2UgXCJkZXNrdG9wIHN0eWxlXCI6XG4gICAgICByZXR1cm4gXCJkZXNrdG9wc3R5bGVcIjtcbiAgICBjYXNlIFwiZGFzaGJvYXJkXCI6XG4gICAgICByZXR1cm4gXCJkYXNoYm9hcmRcIjtcbiAgICBjYXNlIFwicmFzdGVyIGZ1bmN0aW9uIHRlbXBsYXRlXCI6XG4gICAgICByZXR1cm4gXCJyYXN0ZXJwcm9jZXNzaW5ndGVtcGxhdGVcIjtcbiAgICBjYXNlIFwidmVjdG9yIHRpbGUgcGFja2FnZVwiOlxuICAgICAgcmV0dXJuIFwidmVjdG9ydGlsZXBhY2thZ2VcIjtcbiAgICBjYXNlIFwib3J0aG8gbWFwcGluZyBwcm9qZWN0XCI6XG4gICAgICByZXR1cm4gXCJvcnRob21hcHBpbmdwcm9qZWN0XCI7XG4gICAgY2FzZSBcIm9ydGhvIG1hcHBpbmcgdGVtcGxhdGVcIjpcbiAgICAgIHJldHVybiBcIm9ydGhvbWFwcGluZ3RlbXBsYXRlXCI7XG4gICAgY2FzZSBcInNvbHV0aW9uXCI6XG4gICAgICByZXR1cm4gXCJzb2x1dGlvbnNcIjtcbiAgICBjYXNlIFwiZ2VvcGFja2FnZVwiOlxuICAgICAgcmV0dXJuIFwiZ2VvcGFja2FnZVwiO1xuICAgIGNhc2UgXCJkZWVwIGxlYXJuaW5nIHBhY2thZ2VcIjpcbiAgICAgIHJldHVybiBcImRlZXBsZWFybmluZ3BhY2thZ2VcIjtcbiAgICBjYXNlIFwicmVhbCB0aW1lIGFuYWx5dGljXCI6XG4gICAgICByZXR1cm4gXCJyZWFsdGltZWFuYWx5dGljc1wiO1xuICAgIGNhc2UgXCJiaWcgZGF0YSBhbmFseXRpY1wiOlxuICAgICAgcmV0dXJuIFwiYmlnZGF0YWFuYWx5dGljc1wiO1xuICAgIGNhc2UgXCJmZWVkXCI6XG4gICAgICByZXR1cm4gXCJmZWVkXCI7XG4gICAgY2FzZSBcImV4Y2FsaWJ1ciBpbWFnZXJ5IHByb2plY3RcIjpcbiAgICAgIHJldHVybiBcImV4Y2FsaWJ1cmltYWdlcnlwcm9qZWN0XCI7XG4gICAgY2FzZSBcIm5vdGVib29rXCI6XG4gICAgICByZXR1cm4gXCJub3RlYm9va1wiO1xuICAgIGNhc2UgXCJzdG9yeW1hcFwiOlxuICAgICAgaWYgKGtleXdvcmRzLmluY2x1ZGVzKFwic3RvcnltYXBjb2xsZWN0aW9uXCIpKSB7XG4gICAgICAgIHJldHVybiBcInN0b3J5bWFwY29sbGVjdGlvblwiO1xuICAgICAgfVxuICAgICAgaWYgKGtleXdvcmRzLmluY2x1ZGVzKFwic3RvcnltYXBicmllZmluZ1wiKSkge1xuICAgICAgICByZXR1cm4gXCJzdG9yeW1hcGJyaWVmaW5nXCI7XG4gICAgICB9XG4gICAgICByZXR1cm4gXCJzdG9yeW1hcFwiO1xuICAgIGNhc2UgXCJzdXJ2ZXkxMjMgYWRkIGluXCI6XG4gICAgICByZXR1cm4gXCJzdXJ2ZXkxMjNhZGRpblwiO1xuICAgIGNhc2UgXCJtaXNzaW9uXCI6XG4gICAgICByZXR1cm4gXCJtaXNzaW9uXCI7XG4gICAgY2FzZSBcIm1pc3Npb24gcmVwb3J0XCI6XG4gICAgICByZXR1cm4gXCJtaXNzaW9ucmVwb3J0XCI7XG4gICAgY2FzZSBcInF1aWNrY2FwdHVyZSBwcm9qZWN0XCI6XG4gICAgICByZXR1cm4gXCJxdWlja2NhcHR1cmVwcm9qZWN0XCI7XG4gICAgY2FzZSBcInBybyByZXBvcnRcIjpcbiAgICAgIHJldHVybiBcInByb3JlcG9ydFwiO1xuICAgIGNhc2UgXCJ1cmJhbiBtb2RlbFwiOlxuICAgICAgcmV0dXJuIFwidXJiYW5tb2RlbFwiO1xuICAgIGNhc2UgXCJ3ZWIgZXhwZXJpZW5jZVwiOlxuICAgICAgcmV0dXJuIFwiZXhwZXJpZW5jZWJ1aWxkZXJcIjtcbiAgICBjYXNlIFwid2ViIGV4cGVyaWVuY2UgdGVtcGxhdGVcIjpcbiAgICAgIHJldHVybiBcIndlYmV4cGVyaWVuY2V0ZW1wbGF0ZVwiO1xuICAgIGNhc2UgXCJleHBlcmllbmNlIGJ1aWxkZXIgd2lkZ2V0XCI6XG4gICAgICByZXR1cm4gXCJleHBlcmllbmNlYnVpbGRlcndpZGdldFwiO1xuICAgIGNhc2UgXCJleHBlcmllbmNlIGJ1aWxkZXIgd2lkZ2V0IHBhY2thZ2VcIjpcbiAgICAgIHJldHVybiBcImV4cGVyaWVuY2VidWlsZGVyd2lkZ2V0cGFja2FnZVwiO1xuICAgIGNhc2UgXCJ3b3JrZmxvd1wiOlxuICAgICAgcmV0dXJuIFwid29ya2Zsb3dcIjtcbiAgICBjYXNlIFwiaW5zaWdodHMgc2NyaXB0XCI6XG4gICAgICByZXR1cm4gXCJpbnNpZ2h0c3NjcmlwdFwiO1xuICAgIGNhc2UgXCJrZXJuZWwgZ2F0ZXdheSBjb25uZWN0aW9uXCI6XG4gICAgICByZXR1cm4gXCJrZXJuZWxnYXRld2F5Y29ubmVjdGlvblwiO1xuICAgIGNhc2UgXCJodWIgaW5pdGlhdGl2ZSB0ZW1wbGF0ZVwiOlxuICAgICAgcmV0dXJuIFwiaHViaW5pdGlhdGl2ZXRlbXBsYXRlXCI7XG4gICAgY2FzZSBcInN0b3J5bWFwIHRoZW1lXCI6XG4gICAgICByZXR1cm4gXCJzdG9yeW1hcHRoZW1lXCI7XG4gICAgY2FzZSBcImtub3dsZWRnZSBncmFwaFwiOlxuICAgICAgcmV0dXJuIFwia25vd2xlZGdlZ3JhcGhcIjtcbiAgICBjYXNlIFwibmF0aXZlIGFwcGxpY2F0aW9uXCI6XG4gICAgICByZXR1cm4gXCJuYXRpdmVhcHBcIjtcbiAgICBjYXNlIFwibmF0aXZlIGFwcGxpY2F0aW9uIGluc3RhbGxlclwiOlxuICAgICAgcmV0dXJuIFwibmF0aXZlYXBwaW5zdGFsbGVyXCI7XG4gICAgY2FzZSBcImxpbmsgY2hhcnRcIjpcbiAgICAgIHJldHVybiBcImxpbmtjaGFydFwiO1xuICAgIGNhc2UgXCJpbnZlc3RpZ2F0aW9uXCI6XG4gICAgICByZXR1cm4gXCJpbnZlc3RpZ2F0aW9uXCI7XG4gICAgY2FzZSBcIm9nY2ZlYXR1cmVzZXJ2ZXJcIjpcbiAgICAgIHJldHVybiBcImZlYXR1cmVzXCI7XG4gICAgY2FzZSBcInBybyBwcm9qZWN0XCI6XG4gICAgICByZXR1cm4gXCJwcm9wcm9qZWN0XCI7XG4gICAgY2FzZSBcImluc2lnaHRzIHdvcmtib29rIHBhY2thZ2VcIjpcbiAgICAgIHJldHVybiBcImluc2lnaHRzd29ya2Jvb2twYWNrYWdlXCI7XG4gICAgY2FzZSBcImFwYWNoZSBwYXJxdWV0XCI6XG4gICAgICByZXR1cm4gXCJhcGFjaGVwYXJxdWV0XCI7XG4gICAgY2FzZSBcIm5vdGVib29rIGNvZGUgc25pcHBldHNcIjpcbiAgICBjYXNlIFwibm90ZWJvb2sgY29kZSBzbmlwcGV0IGxpYnJhcnlcIjpcbiAgICAgIHJldHVybiBcIm5vdGVib29rY29kZXNuaXBwZXRzXCI7XG4gICAgY2FzZSBcInN1aXRhYmlsaXR5IG1vZGVsXCI6XG4gICAgICByZXR1cm4gXCJzdWl0YWJpbGl0eW1vZGVsXCI7XG4gICAgY2FzZSBcImVzcmkgY2xhc3NpZmllciBkZWZpbml0aW9uXCI6XG4gICAgICByZXR1cm4gXCJjbGFzc2lmaWVyZGVmaW5pdGlvblwiO1xuICAgIGNhc2UgXCJlc3JpIGNsYXNzaWZpY2F0aW9uIHNjaGVtYVwiOlxuICAgICAgcmV0dXJuIFwiY2xhc3NpZmljYXRpb25zY2hlbWFcIjtcbiAgICBjYXNlIFwiaW5zaWdodHMgZGF0YSBlbmdpbmVlcmluZyB3b3JrYm9va1wiOlxuICAgICAgcmV0dXJuIFwiZGF0YWVuZ2luZWVyaW5nd29ya2Jvb2tcIjtcbiAgICBjYXNlIFwiaW5zaWdodHMgZGF0YSBlbmdpbmVlcmluZyBtb2RlbFwiOlxuICAgICAgcmV0dXJuIFwiZGF0YWVuZ2luZWVyaW5nbW9kZWxcIjtcbiAgICBjYXNlIFwiZGVlcCBsZWFybmluZyBzdHVkaW8gcHJvamVjdFwiOlxuICAgICAgcmV0dXJuIFwiZGVlcGxlYXJuaW5ncHJvamVjdFwiO1xuICAgIGNhc2UgXCJkYXRhIHN0b3JlXCI6XG4gICAgICByZXR1cm4gXCJkYXRhc3RvcmVcIjtcbiAgICBjYXNlIFwiZGF0YSBwaXBlbGluZVwiOlxuICAgICAgcmV0dXJuIFwiZGF0YXBpcGVsaW5lXCI7XG4gICAgZGVmYXVsdDpcbiAgICAgIGlmIChrZXl3b3Jkcy5pbmNsdWRlcyhcIkRvY3VtZW50XCIpKSB7XG4gICAgICAgIHJldHVybiBcImRhdGFmaWxlc2dyYXlcIjtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0eXBlLmluY2x1ZGVzKFwic2VydmljZVwiKSA/IFwibGF5ZXJzXCIgOiBcIm1hcHNcIjtcbiAgfVxufVxuXG5jb25zdCBhcmNnaXNJdGVtVHlwZUNzcyA9IFwiOmhvc3R7ZGlzcGxheTppbmxpbmUtZmxleDthbGlnbi1pdGVtczpjZW50ZXJ9Omhvc3QoW3NjYWxlPXNdKXtmb250LXNpemU6MC43NXJlbTstLWFyY2dpcy1pdGVtLXR5cGUtc3BhY2luZzoxcmVtfTpob3N0KFtzY2FsZT1tXSl7Zm9udC1zaXplOjAuODc1cmVtOy0tYXJjZ2lzLWl0ZW0tdHlwZS1zcGFjaW5nOjFyZW19Omhvc3QoW3NjYWxlPWxdKXtmb250LXNpemU6MXJlbTstLWFyY2dpcy1pdGVtLXR5cGUtc3BhY2luZzoxLjVyZW19Lmljb257ZGlzcGxheTpibG9jaztmbGV4LWdyb3c6MDtmbGV4LXNocmluazowO3dpZHRoOnZhcigtLWFyY2dpcy1pdGVtLXR5cGUtc3BhY2luZyk7aGVpZ2h0OnZhcigtLWFyY2dpcy1pdGVtLXR5cGUtc3BhY2luZyl9LnRleHR7Y29sb3I6dmFyKC0tY2FsY2l0ZS11aS10ZXh0LTIpO2xpbmUtaGVpZ2h0OjEuMjU7LXdlYmtpdC1tYXJnaW4tc3RhcnQ6Y2FsYyh2YXIoLS1hcmNnaXMtaXRlbS10eXBlLXNwYWNpbmcpIC8gMik7bWFyZ2luLWlubGluZS1zdGFydDpjYWxjKHZhcigtLWFyY2dpcy1pdGVtLXR5cGUtc3BhY2luZykgLyAyKX1cIjtcblxuY29uc3QgQXJjZ2lzSXRlbVR5cGUgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcbiAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgIHRoaXMuaXRlbSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnBvcnRhbCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnNjYWxlID0gXCJzXCI7XG4gICAgdGhpcy5zaG93VGV4dCA9IHRydWU7XG4gICAgdGhpcy5zaG93SWNvbiA9IHRydWU7XG4gICAgdGhpcy5pY29uUGF0aCA9IFwiXCI7XG4gICAgdGhpcy5kaXNwbGF5TmFtZSA9IFwiXCI7XG4gIH1cbiAgYXN5bmMgY29tcG9uZW50V2lsbExvYWQoKSB7XG4gICAgY29uc3QgeyBpdGVtIH0gPSB0aGlzO1xuICAgIGlmIChpdGVtKSB7XG4gICAgICB0aGlzLmdldEl0ZW1EaXNwbGF5SW5mb3JtYXRpb24oaXRlbSk7XG4gICAgfVxuICB9XG4gIGdldEl0ZW1EaXNwbGF5SW5mb3JtYXRpb24oaXRlbSkge1xuICAgIGNvbnN0IHsgZGlzcGxheU5hbWUsIGljb25QYXRoIH0gPSBnZXRJdGVtRGlzcGxheUluZm9ybWF0aW9uKHsgaXRlbSB9KTtcbiAgICB0aGlzLmRpc3BsYXlOYW1lID0gZGlzcGxheU5hbWU7XG4gICAgdGhpcy5pY29uUGF0aCA9IGljb25QYXRoO1xuICB9XG4gIHVwZGF0ZVR5cGVJbmZvcm1hdGlvbihpdGVtKSB7XG4gICAgaWYgKCF0aGlzLmRpc3BsYXlOYW1lIHx8ICF0aGlzLmljb25QYXRoKSB7XG4gICAgICBjb25zdCB7IGRpc3BsYXlOYW1lLCBpY29uUGF0aCB9ID0gZ2V0SXRlbURpc3BsYXlJbmZvcm1hdGlvbih7IGl0ZW0gfSk7XG4gICAgICB0aGlzLmRpc3BsYXlOYW1lID0gZGlzcGxheU5hbWU7XG4gICAgICB0aGlzLmljb25QYXRoID0gaWNvblBhdGg7XG4gICAgfVxuICB9XG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKGgoSG9zdCwgbnVsbCwgdGhpcy5zaG93SWNvbiAmJiBoKFwiaW1nXCIsIHsgc3JjOiB0aGlzLmljb25QYXRoLCBjbGFzczogYGljb24gaWNvbi0tJHt0aGlzLnNjYWxlfWAgfSksIHRoaXMuc2hvd1RleHQgJiYgaChcInNwYW5cIiwgeyBjbGFzczogXCJ0ZXh0XCIgfSwgdGhpcy5kaXNwbGF5TmFtZSkpKTtcbiAgfVxuICBzdGF0aWMgZ2V0IGFzc2V0c0RpcnMoKSB7IHJldHVybiBbXCJhc3NldHNcIl07IH1cbiAgZ2V0IGVsKCkgeyByZXR1cm4gZ2V0RWxlbWVudCh0aGlzKTsgfVxuICBzdGF0aWMgZ2V0IHdhdGNoZXJzKCkgeyByZXR1cm4ge1xuICAgIFwiaXRlbVwiOiBbXCJ1cGRhdGVUeXBlSW5mb3JtYXRpb25cIl1cbiAgfTsgfVxufTtcbkFyY2dpc0l0ZW1UeXBlLnN0eWxlID0gYXJjZ2lzSXRlbVR5cGVDc3M7XG5cbmNvbnN0IGFyY2dpc1NlbGVjdGVkQ3NzID0gXCIuaGlkZXtkaXNwbGF5Om5vbmV9LndyYXBwZXJ7ZGlzcGxheTpmbGV4O29wYWNpdHk6MTt0cmFuc2l0aW9uLXByb3BlcnR5Om9wYWNpdHl9LmVtcHR5e2ZvbnQtc2l6ZTowLjc1cmVtO2NvbG9yOnZhcigtLWNhbGNpdGUtdWktdGV4dC0zKTtwYWRkaW5nOjAuNzVyZW07ZGlzcGxheTpibG9ja30ubG9hZGluZ3tvcGFjaXR5OjB9LmJ1dHRvbnstd2Via2l0LW1hcmdpbi1lbmQ6MC41cmVtO21hcmdpbi1pbmxpbmUtZW5kOjAuNXJlbX0ud2hpdGUtYnV0dG9ue2JvcmRlcjoxcHggc29saWQgdmFyKC0tY2FsY2l0ZS11aS1mb3JlZ3JvdW5kLTMpO2ZvbnQtZmFtaWx5OmluaGVyaXQ7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWZvcmVncm91bmQtMSk7dHJhbnNpdGlvbjphbGwgdmFyKC0tY2FsY2l0ZS1hbmltYXRpb24tdGltaW5nKSBlYXNlLWluLW91dCAwcywgb3V0bGluZSAwcywgb3V0bGluZS1vZmZzZXQgMHM7cGFkZGluZy1sZWZ0OjAuNzVyZW07cGFkZGluZy1yaWdodDowLjc1cmVtO3BhZGRpbmctdG9wOjAuNXJlbTtwYWRkaW5nLWJvdHRvbTowLjVyZW07b3V0bGluZS1jb2xvcjp0cmFuc3BhcmVudDtoZWlnaHQ6MnJlbTtib3gtc2l6aW5nOmJvcmRlci1ib3g7Y3Vyc29yOnBvaW50ZXI7LXdlYmtpdC1hcHBlYXJhbmNlOm5vbmU7LW1vei1hcHBlYXJhbmNlOm5vbmU7YXBwZWFyYW5jZTpub25lO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7LXdlYmtpdC1tYXJnaW4tZW5kOjAuMjVyZW07bWFyZ2luLWlubGluZS1lbmQ6MC4yNXJlbX0ud2hpdGUtYnV0dG9uOmhvdmVye2JveC1zaGFkb3c6aW5zZXQgMCAwIDAgMXB4IHZhcigtLWNhbGNpdGUtdWktZm9yZWdyb3VuZC0zKX0ud2hpdGUtYnV0dG9uOmZvY3Vze291dGxpbmU6MnB4IHNvbGlkIHZhcigtLWNhbGNpdGUtdWktYnJhbmQpO291dGxpbmUtb2Zmc2V0OjJweH0ud2hpdGUtYnV0dG9uLS1kaXNhYmxlZHtwb2ludGVyLWV2ZW50czpub25lO29wYWNpdHk6MC4yNX0ud2hpdGUtYnV0dG9uX19pY29uey13ZWJraXQtbWFyZ2luLXN0YXJ0OjAuNzVyZW07bWFyZ2luLWlubGluZS1zdGFydDowLjc1cmVtfWNhbGNpdGUtZHJvcGRvd25bb3Blbl0gLndoaXRlLWJ1dHRvbntib3JkZXItYm90dG9tLWNvbG9yOnZhcigtLWNhbGNpdGUtdWktYnJhbmQpfS5wYWdlLXJhbmdle2ZvbnQtd2VpZ2h0OjQwMDtmb250LXNpemU6MC44NzVyZW07Y29sb3I6dmFyKC0tY2FsY2l0ZS11aS10ZXh0LTIpO2xpbmUtaGVpZ2h0OjJyZW19LnNjcmVlbi1yZWFkZXJzLW9ubHl7cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6MXB4O2hlaWdodDoxcHg7cGFkZGluZzowO21hcmdpbjotMXB4O292ZXJmbG93OmhpZGRlbjtjbGlwOnJlY3QoMCwgMCwgMCwgMCk7d2hpdGUtc3BhY2U6bm93cmFwO2JvcmRlci13aWR0aDowfS5jaGVja2JveHttYXJnaW4tdG9wOjAuNzVyZW19XCI7XG5cbmNvbnN0IEFyY2dpc1NlbGVjdGVkSXRlbSQxID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XG4gICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICB0aGlzLmFyY2dpc1NlbGVjdGVkRGVzZWxlY3RBbGwgPSBjcmVhdGVFdmVudCh0aGlzLCBcImFyY2dpc1NlbGVjdGVkRGVzZWxlY3RBbGxcIiwgNyk7XG4gICAgdGhpcy5hcmNnaXNTZWxlY3RlZFNlbGVjdFBhZ2UgPSBjcmVhdGVFdmVudCh0aGlzLCBcImFyY2dpc1NlbGVjdGVkU2VsZWN0UGFnZVwiLCA3KTtcbiAgICB0aGlzLmNoZWNrZWQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5pbmRldGVybWluYXRlID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuaGVhZGluZyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmVtcHR5VGV4dCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnRvdGFsID0gdW5kZWZpbmVkO1xuICAgIHRoaXMudG90YWxTZWxlY3RlZCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmhpZGVDaGVja2JveCA9IGZhbHNlO1xuICAgIHRoaXMubG9hZGluZyA9IHVuZGVmaW5lZDtcbiAgfVxuICBhc3luYyBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICBjb25zdCB7IGVsZW1lbnQgfSA9IHRoaXM7XG4gICAgY29uc3QgbG9jYWxlID0gYXdhaXQgZ2V0TG9jYWxlQ29tcG9uZW50U3RyaW5ncyhlbGVtZW50KTtcbiAgICB0aGlzLmkxOG4gPSBsb2NhbGVbMF07XG4gIH1cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgaTE4biwgY2hlY2tlZCwgaW5kZXRlcm1pbmF0ZSwgaGVhZGluZywgdG90YWxTZWxlY3RlZCB9ID0gdGhpcztcbiAgICByZXR1cm4gKGgoSG9zdCwgbnVsbCwgaChcImRpdlwiLCB7IGNsYXNzOiB7XG4gICAgICAgIHdyYXBwZXI6IHRydWVcbiAgICAgIH0gfSwgIXRoaXMuaGlkZUNoZWNrYm94ICYmIChoKFwiY2FsY2l0ZS1sYWJlbFwiLCB7IGZvcjogXCJzZWxlY3RlZC1jaGVja2JveFwiLCBjbGFzczogXCJ3aGl0ZS1idXR0b25cIiB9LCBoKFwic3BhblwiLCB7IGNsYXNzOiBcInNjcmVlbi1yZWFkZXJzLW9ubHlcIiB9LCBjaGVja2VkID8gaTE4bi5kZXNlbGVjdCA6IGkxOG4uc2VsZWN0UGFnZSksIGgoXCJjYWxjaXRlLWNoZWNrYm94XCIsIHsgY2xhc3M6IFwiY2hlY2tib3hcIiwgaWQ6IFwic2VsZWN0ZWQtY2hlY2tib3hcIiwgZGlzYWJsZWQ6ICF0aGlzLnRvdGFsLCBjaGVja2VkOiBjaGVja2VkLCBpbmRldGVybWluYXRlOiBpbmRldGVybWluYXRlLCBvbkNhbGNpdGVDaGVja2JveENoYW5nZTogKGUpID0+IHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgY29uc3QgY2hlY2tlZCA9IGUuY3VycmVudFRhcmdldC5jaGVja2VkO1xuICAgICAgICBpZiAoY2hlY2tlZCkge1xuICAgICAgICAgIHRoaXMuYXJjZ2lzU2VsZWN0ZWRTZWxlY3RQYWdlLmVtaXQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICB0aGlzLmFyY2dpc1NlbGVjdGVkRGVzZWxlY3RBbGwuZW1pdCgpO1xuICAgICAgICB9XG4gICAgICB9IH0pKSksIGgoXCJjYWxjaXRlLWRyb3Bkb3duXCIsIHsgd2lkdGg6IFwibFwiLCBjbG9zZU9uU2VsZWN0RGlzYWJsZWQ6IHRydWUgfSwgaChcImNhbGNpdGUtYnV0dG9uXCIsIHsgY2xhc3M6IFwiYnV0dG9uXCIsIHNsb3Q6IFwidHJpZ2dlclwiLCBraW5kOiBcIm5ldXRyYWxcIiwgYXBwZWFyYW5jZTogXCJvdXRsaW5lLWZpbGxcIiwgaWNvbkVuZDogISF0aGlzLnRvdGFsU2VsZWN0ZWQgPyBcImNhcmV0LWRvd25cIiA6IG51bGwgfSwgaTE4bi5zZWxlY3RlZC5yZXBsYWNlKFwiJHtudW1iZXJ9XCIsIGAke3RvdGFsU2VsZWN0ZWQgfHwgMH1gKSksIGgoXCJjYWxjaXRlLWRyb3Bkb3duLWdyb3VwXCIsIHsgc2VsZWN0aW9uTW9kZTogXCJub25lXCIsIGdyb3VwVGl0bGU6IGhlYWRpbmcgfSwgdG90YWxTZWxlY3RlZCA8IDEgJiYgaChcInNwYW5cIiwgeyBjbGFzczogXCJlbXB0eVwiIH0sIHRoaXMuZW1wdHlUZXh0KSwgaChcInNsb3RcIiwgbnVsbCkpKSkpKTtcbiAgfVxuICBnZXQgZWxlbWVudCgpIHsgcmV0dXJuIGdldEVsZW1lbnQodGhpcyk7IH1cbn07XG5BcmNnaXNTZWxlY3RlZEl0ZW0kMS5zdHlsZSA9IGFyY2dpc1NlbGVjdGVkQ3NzO1xuXG5jb25zdCBhcmNnaXNTZWxlY3RlZEl0ZW1Dc3MgPSBcIi5zZWxlY3RlZC1pdGVtX193cmFwcGVye2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXJ9LnNlbGVjdGVkLWl0ZW1fX2NvbnRlbnR7ZmxleDoxIDEgMCU7Ym94LXNpemluZzpib3JkZXItYm94Oy13ZWJraXQtcGFkZGluZy1zdGFydDowLjVlbTtwYWRkaW5nLWlubGluZS1zdGFydDowLjVlbTttYXgtd2lkdGg6MTJyZW19LnNlbGVjdGVkLWl0ZW1fX3RpdGxle3BhZGRpbmc6MDttYXJnaW46MDtmb250LXdlaWdodDo1MDA7Y29sb3I6dmFyKC0tY2FsY2l0ZS11aS10ZXh0LTEpO2ZvbnQtc2l6ZTowLjg3NXJlbTttYXJnaW4tdG9wOjAuMjVyZW07b3ZlcmZsb3c6aGlkZGVuO3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXM7d2hpdGUtc3BhY2U6bm93cmFwfS5zZWxlY3RlZC1pdGVtX19kZXNjcmlwdGlvbntwYWRkaW5nOjA7bWFyZ2luOjA7Zm9udC13ZWlnaHQ6NDAwO2NvbG9yOnZhcigtLWNhbGNpdGUtdWktdGV4dC0xKTtmb250LXNpemU6MC43NXJlbTttYXJnaW4tdG9wOjAuMjVyZW07b3ZlcmZsb3c6aGlkZGVuO3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXM7d2hpdGUtc3BhY2U6bm93cmFwfVwiO1xuXG5jb25zdCBBcmNnaXNTZWxlY3RlZEl0ZW0gPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcbiAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgIHRoaXMuYXJjZ2lzU2VsZWN0ZWRJdGVtUmVtb3ZlID0gY3JlYXRlRXZlbnQodGhpcywgXCJhcmNnaXNTZWxlY3RlZEl0ZW1SZW1vdmVcIiwgNyk7XG4gICAgdGhpcy5oZWFkaW5nID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuZGVzY3JpcHRpb24gPSB1bmRlZmluZWQ7XG4gIH1cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiAoaChIb3N0LCBudWxsLCBoKFwiY2FsY2l0ZS1kcm9wZG93bi1pdGVtXCIsIHsgXCJzZWxlY3Rpb24tbW9kZVwiOiBcIm5vbmVcIiwgb25DbGljazogKGUpID0+IHtcbiAgICAgICAgLy8gdGhlcmUgaXMgYW4gZXJyb3Igd2l0aCBkcm9wZG93bi1pdGVtcyBsb29raW5nIGFjcm9zcyBzaGFkb3cgZG9tLCBzbyBwcmV2ZW50IGRlZmF1bHQgYW5kIG1hbmFnZSB0aGlzIG91cnNlbHZlc1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHRoaXMuYXJjZ2lzU2VsZWN0ZWRJdGVtUmVtb3ZlLmVtaXQoKTtcbiAgICAgIH0gfSwgaChcImRpdlwiLCB7IGNsYXNzOiBcInNlbGVjdGVkLWl0ZW1fX3dyYXBwZXJcIiB9LCBoKFwic2xvdFwiLCB7IG5hbWU6IFwiY29udGVudC1zdGFydFwiIH0pLCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwic2VsZWN0ZWQtaXRlbV9fY29udGVudFwiIH0sIGgoXCJoNFwiLCB7IGNsYXNzOiBcInNlbGVjdGVkLWl0ZW1fX3RpdGxlXCIgfSwgdGhpcy5oZWFkaW5nKSwgdGhpcy5kZXNjcmlwdGlvbiAmJiBoKFwicFwiLCB7IGNsYXNzOiBcInNlbGVjdGVkLWl0ZW1fX2Rlc2NyaXB0aW9uXCIgfSwgdGhpcy5kZXNjcmlwdGlvbikpLCBoKFwic2xvdFwiLCB7IG5hbWU6IFwiY29udGVudC1lbmRcIiB9KSwgaChcImNhbGNpdGUtaWNvblwiLCB7IGljb246IFwieFwiLCBzY2FsZTogXCJzXCIgfSkpKSkpO1xuICB9XG4gIGdldCBlbGVtZW50KCkgeyByZXR1cm4gZ2V0RWxlbWVudCh0aGlzKTsgfVxufTtcbkFyY2dpc1NlbGVjdGVkSXRlbS5zdHlsZSA9IGFyY2dpc1NlbGVjdGVkSXRlbUNzcztcblxuY29uc3QgYXJjZ2lzU3VibGF5ZXJUeXBlQ3NzID0gXCI6aG9zdHtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2xpbmUtaGVpZ2h0OjEuMzU7LS1zdWJsYXllci10eXBlLWZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0tMSl9LnRleHR7ZmxleDoxIDEgMCU7Y29sb3I6aW5oZXJpdDstd2Via2l0LW1hcmdpbi1zdGFydDowLjVyZW07bWFyZ2luLWlubGluZS1zdGFydDowLjVyZW19Lm5hbWV7Zm9udC13ZWlnaHQ6NTAwO2ZvbnQtc2l6ZTp2YXIoLS1zdWJsYXllci10eXBlLWZvbnQtc2l6ZSl9LnR5cGV7Zm9udC13ZWlnaHQ6NDAwO2ZvbnQtc2l6ZTp2YXIoLS1zdWJsYXllci10eXBlLWZvbnQtc2l6ZSl9XCI7XG5cbmNvbnN0IEFyY2dpc1N1YmxheWVyVHlwZUljb24gPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcbiAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgIHRoaXMuZ2VvbWV0cnkgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy50eXBlID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuc2NhbGUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5uYW1lID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuc2hvd05hbWUgPSB0cnVlO1xuICAgIHRoaXMuc2hvd0ljb24gPSB0cnVlO1xuICAgIHRoaXMuc2hvd1R5cGUgPSB0cnVlO1xuICAgIHRoaXMucmVuZGVyZXIgPSB1bmRlZmluZWQ7XG4gIH1cbiAgYXN5bmMgY29tcG9uZW50V2lsbExvYWQoKSB7XG4gICAgY29uc3QgbG9jYWxlID0gYXdhaXQgZ2V0TG9jYWxlQ29tcG9uZW50U3RyaW5ncyh0aGlzLmVsKTtcbiAgICB0aGlzLmkxOG4gPSBsb2NhbGVbMF07XG4gIH1cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgZ2VvbWV0cnksIG5hbWUsIHR5cGUsIHNob3dOYW1lLCBzaG93SWNvbiwgc2hvd1R5cGUsIHJlbmRlcmVyLCBpMThuIH0gPSB0aGlzO1xuICAgIGNvbnN0IGluZm8gPSBnZXRTdWJsYXllclR5cGVJbmZvKHsgdHlwZSwgZ2VvbWV0cnkgfSk7XG4gICAgaWYgKHJlbmRlcmVyKSB7XG4gICAgICByZXR1cm4gcmVuZGVyZXIoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBpbmZvKSwgeyBuYW1lIH0pKTtcbiAgICB9XG4gICAgcmV0dXJuIChoKEhvc3QsIG51bGwsIHNob3dJY29uICYmIGgoXCJjYWxjaXRlLWljb25cIiwgeyBpY29uOiBpbmZvLmljb24sIGNsYXNzOiBcImljb25cIiwgc2NhbGU6IHRoaXMuc2NhbGUgfSksIChzaG93VHlwZSB8fCBzaG93TmFtZSkgJiYgKGgoXCJkaXZcIiwgeyBjbGFzczogXCJ0ZXh0XCIgfSwgc2hvd05hbWUgJiYgaChcImRpdlwiLCB7IGNsYXNzOiBcIm5hbWVcIiB9LCBuYW1lKSwgc2hvd1R5cGUgJiYgaChcImRpdlwiLCB7IGNsYXNzOiBcInR5cGVcIiB9LCBpMThuW2luZm8udHlwZV0pKSkpKTtcbiAgfVxuICBnZXQgZWwoKSB7IHJldHVybiBnZXRFbGVtZW50KHRoaXMpOyB9XG59O1xuQXJjZ2lzU3VibGF5ZXJUeXBlSWNvbi5zdHlsZSA9IGFyY2dpc1N1YmxheWVyVHlwZUNzcztcblxuY29uc3QgYXJjZ2lzVXNlckF2YXRhckNzcyA9IFwiOmhvc3R7bWF4LXdpZHRoOjEwMCV9LnNrZWxldG9ue2FuaW1hdGlvbjpwdWxzZSAycyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjYsIDEpIGluZmluaXRlO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXJ9LnNrZWxldG9uLWF2YXRhcntib3JkZXItcmFkaXVzOjEwMCU7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWZvcmVncm91bmQtMyk7d2lkdGg6dmFyKC0tYXJjZ2lzLXVzZXItYXZhdGFyLXNpemUpO2hlaWdodDp2YXIoLS1hcmNnaXMtdXNlci1hdmF0YXItc2l6ZSl9LnNrZWxldG9uLW5hbWV7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWZvcmVncm91bmQtMyk7Ym9yZGVyLXJhZGl1czp2YXIoLS1jYWxjaXRlLWJvcmRlci1yYWRpdXMpO3dpZHRoOnZhcigtLWFyY2dpcy11c2VyLWF2YXRhci1za2VsZXRvbi13aWR0aCk7Ym9yZGVyLXJhZGl1czp2YXIoLS1hcmNnaXMtdXNlci1hdmF0YXItc3BhY2luZyk7aGVpZ2h0OnZhcigtLWFyY2dpcy11c2VyLWF2YXRhci1zcGFjaW5nKTstd2Via2l0LW1hcmdpbi1zdGFydDp2YXIoLS1hcmNnaXMtdXNlci1hdmF0YXItc3BhY2luZyk7bWFyZ2luLWlubGluZS1zdGFydDp2YXIoLS1hcmNnaXMtdXNlci1hdmF0YXItc3BhY2luZyl9QGtleWZyYW1lcyBwdWxzZXswJSwxMDAle29wYWNpdHk6MX01MCV7b3BhY2l0eTowLjV9fS5hdmF0YXJ7ZGlzcGxheTpibG9jaztmbGV4LWdyb3c6MDtmbGV4LXNocmluazowO2JvcmRlci1yYWRpdXM6MTAwJTtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtdWktZm9yZWdyb3VuZC0zKTt3aWR0aDp2YXIoLS1hcmNnaXMtdXNlci1hdmF0YXItc2l6ZSk7aGVpZ2h0OnZhcigtLWFyY2dpcy11c2VyLWF2YXRhci1zaXplKX0udGV4dHtjb2xvcjp2YXIoLS1jYWxjaXRlLXVpLXRleHQtMik7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO21pbi13aWR0aDowO3RleHQtYWxpZ246c3RhcnQ7LXdlYmtpdC1tYXJnaW4tc3RhcnQ6dmFyKC0tYXJjZ2lzLXVzZXItYXZhdGFyLXNwYWNpbmcpO21hcmdpbi1pbmxpbmUtc3RhcnQ6dmFyKC0tYXJjZ2lzLXVzZXItYXZhdGFyLXNwYWNpbmcpO2xpbmUtaGVpZ2h0OmNhbGModmFyKC0tYXJjZ2lzLXVzZXItYXZhdGFyLXNpemUpIC8gMil9LnRleHQtLW5vLWF2YXRhcnstd2Via2l0LW1hcmdpbi1zdGFydDowO21hcmdpbi1pbmxpbmUtc3RhcnQ6MH0udGV4dC0tdW5kZXJsaW5lIC50aXRsZXt0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5lfS50aXRsZSwuZGVzY3JpcHRpb257b3ZlcmZsb3c6aGlkZGVuO3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXM7d2hpdGUtc3BhY2U6bm93cmFwfS5oYXMtZGVzY3JpcHRpb257Zm9udC13ZWlnaHQ6NTAwfS5kZXNjcmlwdGlvbntmb250LXdlaWdodDo0MDA7Y29sb3I6dmFyKC0tY2FsY2l0ZS11aS10ZXh0LTIpfTpob3N0e2Rpc3BsYXk6aW5saW5lLWZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO21pbi13aWR0aDowfTpob3N0KFtzY2FsZT14c10pe2ZvbnQtc2l6ZTowLjc1cmVtOy0tYXJjZ2lzLXVzZXItYXZhdGFyLXNpemU6MThweDstLWFyY2dpcy11c2VyLWF2YXRhci1zcGFjaW5nOjAuMjVyZW19Omhvc3QoW3NjYWxlPXhzXSkgLmRlc2NyaXB0aW9ue2ZvbnQtc2l6ZTowLjYyNXJlbTttYXJnaW4tdG9wOi0wLjEyNXJlbX06aG9zdChbc2NhbGU9eHNdKSAudGV4dHtsaW5lLWhlaWdodDoxLjM1fTpob3N0KFtzY2FsZT1zXSl7Zm9udC1zaXplOjAuNzVyZW07LS1hcmNnaXMtdXNlci1hdmF0YXItc2l6ZToxLjVyZW07LS1hcmNnaXMtdXNlci1hdmF0YXItc3BhY2luZzowLjVyZW07LS1hcmNnaXMtdXNlci1hdmF0YXItc2tlbGV0b24td2lkdGg6NHJlbX06aG9zdChbc2NhbGU9c10pIC5kZXNjcmlwdGlvbntmb250LXNpemU6MC42MjVyZW19Omhvc3QoW3NjYWxlPW1dKXtmb250LXNpemU6MC44NzVyZW07LS1hcmNnaXMtdXNlci1hdmF0YXItc2l6ZToycmVtOy0tYXJjZ2lzLXVzZXItYXZhdGFyLXNwYWNpbmc6MC43NXJlbTstLWFyY2dpcy11c2VyLWF2YXRhci1za2VsZXRvbi13aWR0aDo1cmVtfTpob3N0KFtzY2FsZT1tXSkgLmRlc2NyaXB0aW9ue2ZvbnQtc2l6ZTowLjc1cmVtfTpob3N0KFtzY2FsZT1sXSl7Zm9udC1zaXplOjFyZW07LS1hcmNnaXMtdXNlci1hdmF0YXItc2l6ZToyLjVyZW07LS1hcmNnaXMtdXNlci1hdmF0YXItc3BhY2luZzoxcmVtOy0tYXJjZ2lzLXVzZXItYXZhdGFyLXNrZWxldG9uLXdpZHRoOjZyZW19Omhvc3QoW3NjYWxlPWxdKSAuZGVzY3JpcHRpb257Zm9udC1zaXplOjAuODc1cmVtfVwiO1xuXG5jb25zdCBBcmNnaXNVc2VyQXZhdGFyID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XG4gICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICB0aGlzLnVzZXIgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5wb3J0YWwgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5zY2FsZSA9IFwibVwiO1xuICAgIHRoaXMuc2hvd05hbWUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5zaG93QXZhdGFyID0gdHJ1ZTtcbiAgICB0aGlzLmhlYWRpbmcgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5kZXNjcmlwdGlvbiA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnVuZGVybGluZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnVzZXJuYW1lID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuY2hlY2tPbmxpbmUgPSB1bmRlZmluZWQ7XG4gIH1cbiAgYXN5bmMgY29tcG9uZW50V2lsbExvYWQoKSB7XG4gICAgY29uc3QgeyBlbCwgcG9ydGFsLCB1c2VybmFtZSB9ID0gdGhpcztcbiAgICB0aGlzLmxhbmcgPSBhd2FpdCBnZXRDb21wb25lbnRDbG9zZXN0TGFuZ3VhZ2UoZWwpO1xuICAgIGlmICh1c2VybmFtZSkge1xuICAgICAgdGhpcy51c2VyID0gYXdhaXQgZmV0Y2hVc2VyKHVzZXJuYW1lLCBwb3J0YWwpO1xuICAgIH1cbiAgfVxuICByZW5kZXJTa2VsZXRvbigpIHtcbiAgICByZXR1cm4gKGgoXCJkaXZcIiwgeyBjbGFzczogXCJza2VsZXRvblwiIH0sIHRoaXMuc2hvd0F2YXRhciAmJiBoKFwiZGl2XCIsIHsgY2xhc3M6IFwic2tlbGV0b24tYXZhdGFyXCIgfSksIHRoaXMuc2hvd05hbWUgJiYgaChcImRpdlwiLCB7IGNsYXNzOiBcInNrZWxldG9uLW5hbWVcIiB9KSkpO1xuICB9XG4gIHJlbmRlclVzZXIoKSB7XG4gICAgY29uc3QgeyB1c2VyLCBsYW5nLCBwb3J0YWwsIHNob3dBdmF0YXIsIHNob3dOYW1lLCBkZXNjcmlwdGlvbiwgc2NhbGUsIHVuZGVybGluZSwgaGVhZGluZyB9ID0gdGhpcztcbiAgICBjb25zdCB7IGZ1bGxOYW1lLCB1c2VybmFtZSwgaWQgfSA9IHVzZXI7XG4gICAgY29uc3Qgc2hvd0Rlc2NyaXB0aW9uID0gISFkZXNjcmlwdGlvbjtcbiAgICBjb25zdCBuYW1lID0gKChmdWxsTmFtZSA9PT0gbnVsbCB8fCBmdWxsTmFtZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZnVsbE5hbWUuc3BsaXQoXCIgXCIpKSB8fCBbXSkuc2xpY2UoMCwgMikuam9pbihcIiBcIik7XG4gICAgcmV0dXJuIFtcbiAgICAgIHNob3dBdmF0YXIgJiYgKGgoXCJjYWxjaXRlLWF2YXRhclwiLCB7IGNsYXNzOiBcImF2YXRhclwiLCBzY2FsZTogc2NhbGUgPT09IFwieHNcIiA/IFwic1wiIDogc2NhbGUsIGZ1bGxOYW1lOiBuYW1lLCB1c2VybmFtZTogdXNlcm5hbWUsIHVzZXJJZDogaWQsIHRodW1ibmFpbDogZ2V0VXNlclRodW1ibmFpbFVSSSh1c2VyLCBwb3J0YWwsIHRoaXMuY2hlY2tPbmxpbmUpIH0pKSxcbiAgICAgIChzaG93TmFtZSB8fCBzaG93RGVzY3JpcHRpb24pICYmIChoKFwic3BhblwiLCB7IGNsYXNzOiB7IHRleHQ6IHRydWUsIFwidGV4dC0tdW5kZXJsaW5lXCI6IHVuZGVybGluZSwgXCJ0ZXh0LS1uby1hdmF0YXJcIjogIXNob3dBdmF0YXIgfSB9LCBzaG93TmFtZSAmJiAoaChcInNwYW5cIiwgeyBjbGFzczogeyB0aXRsZTogdHJ1ZSwgXCJoYXMtZGVzY3JpcHRpb25cIjogc2hvd0Rlc2NyaXB0aW9uIH0gfSwgaGVhZGluZyB8fCBnZXRGdWxsTmFtZSh1c2VyLCBsYW5nKSkpLCBzaG93RGVzY3JpcHRpb24gJiYgaChcInNwYW5cIiwgeyBjbGFzczogXCJkZXNjcmlwdGlvblwiIH0sIGRlc2NyaXB0aW9uKSkpXG4gICAgXTtcbiAgfVxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIGgoSG9zdCwgbnVsbCwgdGhpcy51c2VyICYmIHRoaXMubGFuZyA/IHRoaXMucmVuZGVyVXNlcigpIDogdGhpcy5yZW5kZXJTa2VsZXRvbigpKTtcbiAgfVxuICBnZXQgZWwoKSB7IHJldHVybiBnZXRFbGVtZW50KHRoaXMpOyB9XG59O1xuQXJjZ2lzVXNlckF2YXRhci5zdHlsZSA9IGFyY2dpc1VzZXJBdmF0YXJDc3M7XG5cbmNvbnN0IGFyY2dpc1VzZXJQb3B1cENzcyA9IFwiOmhvc3R7ZGlzcGxheTpmbGV4fS5idXR0b257ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtmb250LXNpemU6MC43NXJlbTt0cmFuc2l0aW9uLXByb3BlcnR5OmFsbDtwYWRkaW5nOjA7b3V0bGluZToycHggc29saWQgdHJhbnNwYXJlbnQ7b3V0bGluZS1vZmZzZXQ6MnB4O2JvcmRlci1zdHlsZTpub25lO2N1cnNvcjpwb2ludGVyO21heC13aWR0aDoxMDAlO2NvbG9yOnZhcigtLWNhbGNpdGUtdWktdGV4dC0yKTtvdXRsaW5lLWNvbG9yOnRyYW5zcGFyZW50O2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7Zm9udC1mYW1pbHk6aW5oZXJpdDtsaW5lLWhlaWdodDoxLjV9LmJ1dHRvbjpmb2N1c3tvdXRsaW5lOjJweCBzb2xpZCB2YXIoLS1jYWxjaXRlLXVpLWJyYW5kKTtvdXRsaW5lLW9mZnNldDoycHh9Lm5hbWV7d2hpdGUtc3BhY2U6bm93cmFwO292ZXJmbG93OmhpZGRlbjt0ZXh0LW92ZXJmbG93OmVsbGlwc2lzOy13ZWJraXQtbWFyZ2luLXN0YXJ0OjAuNXJlbTttYXJnaW4taW5saW5lLXN0YXJ0OjAuNXJlbX1cIjtcblxuY29uc3QgQXJjZ2lzVXNlclBvcHVwID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XG4gICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICB0aGlzLmFyY2dpc1VzZXJQb3B1cEludGVybmFsVUlBY3Rpb24gPSBjcmVhdGVFdmVudCh0aGlzLCBcImFyY2dpc1VzZXJQb3B1cEludGVybmFsVUlBY3Rpb25cIiwgNyk7XG4gICAgdGhpcy51c2VyID0gdW5kZWZpbmVkO1xuICAgIHRoaXMudXNlcm5hbWUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5pdGVtID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuYXBpID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuc2NhbGUgPSBcIm1cIjtcbiAgICB0aGlzLnBvcnRhbCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmJhc2VVcmwgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy51bmRlcmxpbmUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5zaG93QXZhdGFyID0gdHJ1ZTtcbiAgICB0aGlzLmNoZWNrT25saW5lID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuaXRlbVVzZXJJbmZvID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuZ3JvdXBzID0gdW5kZWZpbmVkO1xuICAgIHRoaXMudG90YWwgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5zaG93UG9wb3ZlciA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnByaXZhdGVVc2VyID0gdW5kZWZpbmVkO1xuICB9XG4gIGFzeW5jIGNvbXBvbmVudFdpbGxMb2FkKCkge1xuICAgIGNvbnN0IHsgZWwsIGl0ZW0sIHVzZXJuYW1lLCBwb3J0YWwgfSA9IHRoaXM7XG4gICAgY29uc3QgbG9jYWxlID0gYXdhaXQgZ2V0TG9jYWxlQ29tcG9uZW50U3RyaW5ncyhlbCk7XG4gICAgdGhpcy5pMThuID0gbG9jYWxlWzBdO1xuICAgIHRoaXMubGFuZyA9IGxvY2FsZVsxXTtcbiAgICBpZiAoaXRlbSkge1xuICAgICAgdGhpcy5mZXRjaEl0ZW1Vc2VySW5mbygpO1xuICAgIH1cbiAgICBlbHNlIGlmICh1c2VybmFtZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXNlckluZm8gPSBhd2FpdCBmZXRjaFVzZXIodXNlcm5hbWUsIHBvcnRhbCk7XG4gICAgICAgIHRoaXMuaXRlbVVzZXJJbmZvID0gdXNlckluZm87XG4gICAgICB9XG4gICAgICBjYXRjaCAoX2EpIHtcbiAgICAgICAgdGhpcy5wcml2YXRlVXNlciA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGFzeW5jIHNldEZvY3VzKCkge1xuICAgIHZhciBfYTtcbiAgICAoX2EgPSB0aGlzLmJ1dHRvbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmZvY3VzKCk7XG4gIH1cbiAgYXN5bmMgZmV0Y2hJdGVtVXNlckluZm8oKSB7XG4gICAgY29uc3QgeyBwb3J0YWwsIGl0ZW0sIGxhbmcsIGNoZWNrT25saW5lIH0gPSB0aGlzO1xuICAgIHRoaXMuaXRlbVVzZXJJbmZvID0gYXdhaXQgZmV0Y2hJdGVtVXNlckluZm8oaXRlbSwgcG9ydGFsLCBsYW5nLCBjaGVja09ubGluZSk7XG4gIH1cbiAgYXN5bmMgZmV0Y2hJdGVtc0FuZEdyb3VwcygpIHtcbiAgICBjb25zdCB7IHVzZXIsIGl0ZW1Vc2VySW5mbywgaXRlbSwgcG9ydGFsLCB0b3RhbCwgdXNlcm5hbWU6IHByb3BVc2VybmFtZSwgY2hlY2tPbmxpbmUgfSA9IHRoaXM7XG4gICAgY29uc3QgdXNlcm5hbWUgPSBwcm9wVXNlcm5hbWUgfHwgKHVzZXIgPT09IG51bGwgfHwgdXNlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogdXNlci51c2VybmFtZSkgfHwgKGl0ZW0gPT09IG51bGwgfHwgaXRlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogaXRlbS5vd25lcik7XG4gICAgaWYgKChpdGVtID09PSBudWxsIHx8IGl0ZW0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGl0ZW0uY29udGVudFN0YXR1cykgIT09IFwicHVibGljX2F1dGhvcml0YXRpdmVcIikge1xuICAgICAgaWYgKCF0aGlzLmdyb3Vwcykge1xuICAgICAgICB0aGlzLmdyb3VwcyA9IGF3YWl0IGZyb21DYWNoZSgoKSA9PiBmZXRjaFVzZXJHcm91cHModXNlcm5hbWUsIHBvcnRhbCwgY2hlY2tPbmxpbmUpLCBcInVzZXJHcm91cHNcIiwgdXNlcm5hbWUpO1xuICAgICAgfVxuICAgICAgaWYgKGlzTmFOKHRvdGFsKSkge1xuICAgICAgICB0aGlzLnRvdGFsID0gYXdhaXQgZnJvbUNhY2hlKCgpID0+IGZldGNoVXNlckl0ZW1zVG90YWwodXNlciB8fCBpdGVtVXNlckluZm8sIHBvcnRhbCwgY2hlY2tPbmxpbmUpLCBcInVzZXJJdGVtc1RvdGFsXCIsIHVzZXJuYW1lKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgdXNlciwgaXRlbVVzZXJJbmZvLCBwb3J0YWwsIGl0ZW0sIGJhc2VVcmwsIGJ1dHRvbiwgaTE4biwgc2NhbGUgfSA9IHRoaXM7XG4gICAgY29uc3QgdXNlckluZm8gPSB1c2VyIHx8IGl0ZW1Vc2VySW5mbztcbiAgICBpZiAoIXVzZXJJbmZvKSB7XG4gICAgICByZXR1cm4gaChcImFyY2dpcy11c2VyLWF2YXRhclwiLCB7IHNjYWxlOiBcInNcIiwgc2hvd05hbWU6IHRydWUsIGNoZWNrT25saW5lOiB0aGlzLmNoZWNrT25saW5lIH0pO1xuICAgIH1cbiAgICByZXR1cm4gKGgoSG9zdCwgbnVsbCwgaChcImJ1dHRvblwiLCB7IGNsYXNzOiBcImJ1dHRvblwiLCByZWY6IChlbCkgPT4gKHRoaXMuYnV0dG9uID0gZWwpLCBvbkNsaWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgIGlmICghdGhpcy5zaG93UG9wb3Zlcikge1xuICAgICAgICAgIHRoaXMuc2hvd1BvcG92ZXIgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZmV0Y2hJdGVtc0FuZEdyb3VwcygpO1xuICAgICAgfSB9LCBoKFwic2xvdFwiLCBudWxsLCBoKFwiYXJjZ2lzLXVzZXItYXZhdGFyXCIsIHsgdXNlcjogdXNlckluZm8sIHNjYWxlOiBzY2FsZSA9PT0gXCJtXCIgPyBcIm1cIiA6IFwic1wiLCBwb3J0YWw6IHBvcnRhbCwgc2hvd05hbWU6IHRydWUsIHNob3dBdmF0YXI6IHRoaXMuc2hvd0F2YXRhciwgdW5kZXJsaW5lOiB0aGlzLnVuZGVybGluZSwgY2hlY2tPbmxpbmU6IHRoaXMuY2hlY2tPbmxpbmUgfSkpKSwgdGhpcy5zaG93UG9wb3ZlciAmJiAoaChcImFyY2dpcy10dW5uZWxcIiwgeyByZWZlcmVuY2U6IHRoaXMuZWwgfSwgaChcImFyY2dpcy11c2VyLXBvcHVwLXBvcG92ZXJcIiwgeyBvbkFyY2dpc1VzZXJQb3B1cEludGVybmFsVUlBY3Rpb246IChlKSA9PiB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHRoaXMuYXJjZ2lzVXNlclBvcHVwSW50ZXJuYWxVSUFjdGlvbi5lbWl0KGUuZGV0YWlsKTtcbiAgICAgIH0sIG9uQXJjZ2lzVXNlclBvcHVwUG9wb3ZlckNsb3NlOiAoKSA9PiB7XG4gICAgICAgIHRoaXMuc2hvd1BvcG92ZXIgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wb3BvdmVyTm9kZSA9IG51bGw7XG4gICAgICB9LCBvbkFyY2dpc1VzZXJQb3B1cFBvcG92ZXJLZXlEb3duOiAoZSkgPT4ge1xuICAgICAgICBpZiAoZS5kZXRhaWwua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICAgICAgLy8gISBIYXMgdG8gYmUgZm9jdXNlZCBhZnRlciB0aGUgcG9wb3ZlciBpcyBjb21wbGV0ZWx5IGNsb3NlZFxuICAgICAgICAgIGNvbnN0IFBPUE9WRVJfQ0xPU0VfVElNRSA9IDIwMDtcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuYnV0dG9uLmZvY3VzKCk7XG4gICAgICAgICAgfSwgUE9QT1ZFUl9DTE9TRV9USU1FKTtcbiAgICAgICAgfVxuICAgICAgfSwgdXNlcjogdXNlciwgaXRlbTogaXRlbSwgcG9ydGFsOiBwb3J0YWwsIGJhc2VVcmw6IGJhc2VVcmwsIGl0ZW1Vc2VySW5mbzogaXRlbVVzZXJJbmZvLCBpMThuOiBpMThuLCBncm91cHM6IHRoaXMuZ3JvdXBzLCB0b3RhbDogdGhpcy50b3RhbCwgY2hlY2tPbmxpbmU6IHRoaXMuY2hlY2tPbmxpbmUsIHJlZjogKGVsKSA9PiB7XG4gICAgICAgIGlmICghZWwpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZWwucmVmZXJlbmNlRWxlbWVudCA9IGJ1dHRvbjtcbiAgICAgICAgLy8gb3BlbiB3aGVuIGZpcnN0IGFkZGVkXG4gICAgICAgIGlmICghdGhpcy5wb3BvdmVyTm9kZSkge1xuICAgICAgICAgIHRoaXMucG9wb3Zlck5vZGUgPSBlbDtcbiAgICAgICAgICBlbC5vcGVuKCk7XG4gICAgICAgIH1cbiAgICAgIH0gfSkpKSkpO1xuICB9XG4gIGdldCBlbCgpIHsgcmV0dXJuIGdldEVsZW1lbnQodGhpcyk7IH1cbiAgc3RhdGljIGdldCB3YXRjaGVycygpIHsgcmV0dXJuIHtcbiAgICBcIml0ZW1cIjogW1wiZmV0Y2hJdGVtVXNlckluZm9cIl1cbiAgfTsgfVxufTtcbkFyY2dpc1VzZXJQb3B1cC5zdHlsZSA9IGFyY2dpc1VzZXJQb3B1cENzcztcblxuZnVuY3Rpb24gYWRkSHlwZXJsaW5rcyh0ZXh0KSB7XG4gIGNvbnN0IHVybFJlZ2V4ID0gLyhodHRwcz86XFwvXFwvW15cXHNdKykvZztcbiAgcmV0dXJuIHRleHQgPT09IG51bGwgfHwgdGV4dCA9PT0gdm9pZCAwID8gdm9pZCAwIDogdGV4dC5yZXBsYWNlKHVybFJlZ2V4LCAodXJsKSA9PiBgPGEgaHJlZj1cIiR7dXJsfVwiIHRhcmdldD1cIl9ibGFua1wiPiR7dXJsfTwvYT5gKTtcbn1cbmZ1bmN0aW9uIGVzY2FwZU5ld2xpbmVzKHRleHQpIHtcbiAgcmV0dXJuIHRleHQgPT09IG51bGwgfHwgdGV4dCA9PT0gdm9pZCAwID8gdm9pZCAwIDogdGV4dC5yZXBsYWNlKC8oPzpcXHIpL2csIFwiJiMxMDtcIikucmVwbGFjZSgvKD86XFxuKS9nLCBcIiYjMTM7XCIpO1xufVxuZnVuY3Rpb24gcmVzdG9yZU5ld2xpbmVzKHRleHQpIHtcbiAgcmV0dXJuIHRleHQgPT09IG51bGwgfHwgdGV4dCA9PT0gdm9pZCAwID8gdm9pZCAwIDogdGV4dC5yZXBsYWNlKC8oPzomIzEwOykvZywgXCJcXHJcIikucmVwbGFjZSgvKD86JiMxMzspL2csIFwiXFxuXCIpO1xufVxuZnVuY3Rpb24gaW5zZXJ0SHRtbExpbmVCcmVha3ModGV4dCkge1xuICByZXR1cm4gdGV4dCA9PT0gbnVsbCB8fCB0ZXh0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0ZXh0LnJlcGxhY2UoLyYjMTA7JiMxMzt8JiMxMDt8JiMxMzt8XFxyXFxufFxccnxcXG4vZywgXCI8YnI+XCIpO1xufVxuZnVuY3Rpb24gZ2V0SHRtbEZyb21UZXh0KHRleHQpIHtcbiAgcmV0dXJuIGluc2VydEh0bWxMaW5lQnJlYWtzKGVzY2FwZU5ld2xpbmVzKGFkZEh5cGVybGlua3MocmVzdG9yZU5ld2xpbmVzKHRleHQpKSkpO1xufVxuXG5mdW5jdGlvbiBnZXRVc2VyTGluayh7IGJhc2VVcmwsIHBvcnRhbCwgdXNlciwgdHlwZSB9KSB7XG4gIHZhciBfYSwgX2I7XG4gIGNvbnN0IGJhc2UgPSByZW1vdmVUcmFpbGluZ1NsYXNoKGJhc2VVcmwpO1xuICBjb25zdCB7IHVzZXJuYW1lLCBvcmdJZCB9ID0gdXNlcjtcbiAgY29uc3QgbmFtZSA9IGVuY29kZVVSSUNvbXBvbmVudCh1c2VybmFtZSk7XG4gIGNvbnN0IGlzU2VsZiA9ICgoX2EgPSBwb3J0YWwudXNlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnVzZXJuYW1lKSA9PT0gdXNlci51c2VybmFtZTtcbiAgY29uc3QgY2FuVmlldyA9ICh0eXBlID09PSBcImdyb3Vwc1wiICYmIGNhblZpZXdPcmdHcm91cHMocG9ydGFsLnVzZXIpKSB8fCAodHlwZSA9PT0gXCJjb250ZW50XCIgJiYgY2FuTWFuYWdlSXRlbXMocG9ydGFsLnVzZXIpKTtcbiAgaWYgKChjYW5WaWV3IHx8IGlzT3JnQWRtaW4ocG9ydGFsLnVzZXIpIHx8IGlzU2VsZikgJiYgb3JnSWQgPT09ICgoX2IgPSBwb3J0YWwudXNlcikgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLm9yZ0lkKSkge1xuICAgIHJldHVybiBgJHtiYXNlfS8ke3R5cGV9Lmh0bWwkeyFpc1NlbGYgPyBgP3VzZXI9JHtuYW1lfWAgOiBcIlwifWA7XG4gIH1cbiAgZWxzZSB7XG4gICAgcmV0dXJuIGAke2Jhc2V9L3NlYXJjaC5odG1sP3E9b3duZXI6JTIyJHtuYW1lfSUyMiZyZXN0cmljdD1mYWxzZSMke3R5cGV9YDtcbiAgfVxufVxuXG5jb25zdCBhcmNnaXNVc2VyUG9wdXBQb3BvdmVyQ3NzID0gXCIud3JhcHBlcntiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtdWktZm9yZWdyb3VuZC0xKTt3aWR0aDoyMHJlbX0uaGVhZGVye3BhZGRpbmctbGVmdDoxcmVtO3BhZGRpbmctcmlnaHQ6MXJlbTtwYWRkaW5nLXRvcDoxLjI1cmVtO3BhZGRpbmctYm90dG9tOjEuMjVyZW19LnVzZXItYXZhdGFye21heC13aWR0aDoxMDAlfS5jb250ZW50e3BhZGRpbmctdG9wOjAuNXJlbTtwYWRkaW5nLWxlZnQ6MXJlbTtwYWRkaW5nLXJpZ2h0OjFyZW07cGFkZGluZy1ib3R0b206MS4yNXJlbX0uY29udGVudF9fZGVzY3JpcHRpb257Y29sb3I6dmFyKC0tY2FsY2l0ZS11aS10ZXh0LTIpO2ZvbnQtc2l6ZTowLjg3NXJlbTtwYWRkaW5nOjA7cGFkZGluZy1ib3R0b206MC4yNXJlbTttYXJnaW46MDtvdmVyZmxvdzphdXRvO21heC1oZWlnaHQ6MTUuNXJlbX0uY29udGVudF9fZGVzY3JpcHRpb24tLWV4cGFuZGVkOmFmdGVye2NvbnRlbnQ6XFxcIlxcXCI7ZGlzcGxheTpibG9jaztoZWlnaHQ6MXJlbX0uY29udGVudF9fZmFkZXtkaXNwbGF5OmJsb2NrO2hlaWdodDoxcmVtO3dpZHRoOjEwMCU7ei1pbmRleDoxMDtwb3NpdGlvbjpyZWxhdGl2ZTttYXJnaW4tYm90dG9tOjAuMjVyZW07YmFja2dyb3VuZDpsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCB0cmFuc3BhcmVudCwgdmFyKC0tY2FsY2l0ZS11aS1mb3JlZ3JvdW5kLTEpIDc0JSk7bWFyZ2luLXRvcDotMXJlbX0uY29udGVudF9fbGlua3tmb250LXNpemU6MC44NzVyZW19LmJ1dHRvbnN7ZGlzcGxheTpncmlkO2dyaWQtYXV0by1mbG93OmNvbHVtbjtwYWRkaW5nLXRvcDoxcmVtO2dyaWQtZ2FwOjAuNXJlbX0uYnV0dG9ue21pbi13aWR0aDowfS5sb2FkZXJ7LS1jYWxjaXRlLWxvYWRlci1wYWRkaW5nOjB9XCI7XG5cbmNvbnN0IEFyY2dpc1VzZXJQb3B1cFBvcG92ZXIgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcbiAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgIHRoaXMuYXJjZ2lzVXNlclBvcHVwUG9wb3ZlckNsb3NlID0gY3JlYXRlRXZlbnQodGhpcywgXCJhcmNnaXNVc2VyUG9wdXBQb3BvdmVyQ2xvc2VcIiwgNyk7XG4gICAgdGhpcy5hcmNnaXNVc2VyUG9wdXBQb3BvdmVyS2V5RG93biA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiYXJjZ2lzVXNlclBvcHVwUG9wb3ZlcktleURvd25cIiwgNyk7XG4gICAgdGhpcy5hcmNnaXNVc2VyUG9wdXBJbnRlcm5hbFVJQWN0aW9uID0gY3JlYXRlRXZlbnQodGhpcywgXCJhcmNnaXNVc2VyUG9wdXBJbnRlcm5hbFVJQWN0aW9uXCIsIDcpO1xuICAgIHRoaXMubnVtYmVyRm9ybWF0T3B0aW9ucyA9IHtcbiAgICAgIGFwaTogY29uZmlnU3RhdGUuYXBpLFxuICAgICAgcGxhY2VzOiAwLFxuICAgICAgdHlwZTogXCJkZWNpbWFsXCJcbiAgICB9O1xuICAgIHRoaXMudXNlciA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLml0ZW0gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5wb3J0YWwgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5iYXNlVXJsID0gdW5kZWZpbmVkO1xuICAgIHRoaXMucmVmZXJlbmNlRWxlbWVudCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLml0ZW1Vc2VySW5mbyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmdyb3VwcyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnRvdGFsID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuaTE4biA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmNoZWNrT25saW5lID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuZ3JvdXBzVGV4dCA9IFwiXCI7XG4gICAgdGhpcy5pdGVtc1RleHQgPSBcIlwiO1xuICAgIHRoaXMuZXhwYW5kZWQgPSB1bmRlZmluZWQ7XG4gIH1cbiAgYXN5bmMgY2xvc2UoKSB7XG4gICAgdGhpcy50b2dnbGVQb3BvdmVyKGZhbHNlKTtcbiAgfVxuICBhc3luYyBvcGVuKCkge1xuICAgIHRoaXMudG9nZ2xlUG9wb3Zlcih0cnVlKTtcbiAgfVxuICBhc3luYyB1cGRhdGVHcm91cHNUZXh0KGdyb3Vwcykge1xuICAgIGNvbnN0IG51bWJlciA9IGF3YWl0IGZvcm1hdE51bWJlcihncm91cHMudG90YWwsIHRoaXMubnVtYmVyRm9ybWF0T3B0aW9ucyk7XG4gICAgdGhpcy5ncm91cHNUZXh0ID0gdGhpcy5pMThuLmdyb3Vwcy5yZXBsYWNlKFwiJHtudW1iZXJ9XCIsIG51bWJlcik7XG4gIH1cbiAgYXN5bmMgdXBkYXRlSXRlbXNUZXh0KHRvdGFsKSB7XG4gICAgY29uc3QgbnVtYmVyID0gYXdhaXQgZm9ybWF0TnVtYmVyKHRvdGFsLCB0aGlzLm51bWJlckZvcm1hdE9wdGlvbnMpO1xuICAgIHRoaXMuaXRlbXNUZXh0ID0gdGhpcy5pMThuLml0ZW1zLnJlcGxhY2UoXCIke251bWJlcn1cIiwgbnVtYmVyKTtcbiAgfVxuICBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICAvLyB3aGVuIHRoZSBjb21wb25lbnQgaXMgcmVvcGVuZWQsIHNldCBncm91cHMvdG90YWwgdGV4dCBhZ2FpbiBhcyB0aGUgd2F0Y2hlciBkb2Vzbid0IGZpcmVcbiAgICBpZiAodGhpcy5ncm91cHMpIHtcbiAgICAgIHRoaXMudXBkYXRlR3JvdXBzVGV4dCh0aGlzLmdyb3Vwcyk7XG4gICAgfVxuICAgIGlmICghaXNOYU4odGhpcy50b3RhbCkpIHtcbiAgICAgIHRoaXMudXBkYXRlSXRlbXNUZXh0KHRoaXMudG90YWwpO1xuICAgIH1cbiAgfVxuICBhc3luYyB0b2dnbGVQb3BvdmVyKG9wZW4pIHtcbiAgICBpZiAodGhpcy5wb3BvdmVyTm9kZSkge1xuICAgICAgdGhpcy5wb3BvdmVyTm9kZS5vcGVuID0gb3BlbjtcbiAgICAgIGF3YWl0IHRpbWVvdXQoMTUwKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cbiAgb3BlbkxpbmsoZSkge1xuICAgIHZhciBfYTtcbiAgICAvLyBub3QgdG90YWxseSBzdXJlIHdoeSwgYnV0IGlmIHlvdSBqdXN0IGxpbmsgdG8gdGhlIHBhZ2UsIHlvdSdsbCBiZSBzaWduZWQgb3V0XG4gICAgLy8gaWYgd2UgdXNlIHdpbmRvdy5vcGVuLCBpdCByZXRhaW5zIHlvdXIgY3VycmVudCBzaWduZWQgaW4gc3RhdHVzXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IGhyZWYgPSAoX2EgPSBlLnRhcmdldCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmhyZWY7XG4gICAgd2luZG93Lm9wZW4oaHJlZiwgXCJfYmxhbmtcIik7XG4gIH1cbiAgcmVuZGVyT3JnQnV0dG9ucygpIHtcbiAgICBjb25zdCB7IGkxOG4sIGJhc2VVcmwsIGl0ZW1Vc2VySW5mbyB9ID0gdGhpcztcbiAgICBjb25zdCB1cmwgPSByZW1vdmVUcmFpbGluZ1NsYXNoKChpdGVtVXNlckluZm8gPT09IG51bGwgfHwgaXRlbVVzZXJJbmZvID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpdGVtVXNlckluZm8udXJsKSB8fCBiYXNlVXJsKTtcbiAgICByZXR1cm4gKGgoRnJhZ21lbnQsIG51bGwsIGgoXCJjYWxjaXRlLWJ1dHRvblwiLCB7IGFwcGVhcmFuY2U6IFwib3V0bGluZS1maWxsXCIsIGtpbmQ6IFwibmV1dHJhbFwiLCBocmVmOiB1cmwsIHRhcmdldDogXCJfYmxhbmtcIiwgb25DbGljazogKGUpID0+IHRoaXMub3BlbkxpbmsoZSkgfSwgaTE4bi5ob21lcGFnZSksIGgoXCJjYWxjaXRlLWJ1dHRvblwiLCB7IGFwcGVhcmFuY2U6IFwib3V0bGluZS1maWxsXCIsIGtpbmQ6IFwibmV1dHJhbFwiLCBocmVmOiBgJHt1cmx9L2dhbGxlcnkuaHRtbGAsIHRhcmdldDogXCJfYmxhbmtcIiwgb25DbGljazogKGUpID0+IHRoaXMub3BlbkxpbmsoZSkgfSwgaTE4bi5nYWxsZXJ5KSkpO1xuICB9XG4gIHJlbmRlclVzZXJCdXR0b25zKHVzZXJJbmZvKSB7XG4gICAgY29uc3QgeyBpMThuLCBiYXNlVXJsLCBwb3J0YWwsIHRvdGFsLCBncm91cHMgfSA9IHRoaXM7XG4gICAgY29uc3QgbG9hZGluZyA9ICF0aGlzLmdyb3Vwc1RleHQgfHwgIXRoaXMuaXRlbXNUZXh0O1xuICAgIGNvbnN0IHsgdXNlcm5hbWUgfSA9IHVzZXJJbmZvO1xuICAgIGlmIChsb2FkaW5nKSB7XG4gICAgICByZXR1cm4gKGgoXCJjYWxjaXRlLWxvYWRlclwiLCB7IGxhYmVsOiBpMThuLmxvYWRpbmdVc2VySW5mb3JtYXRpb24sIHNjYWxlOiBcInNcIiwgY2xhc3M6IFwibG9hZGVyXCIgfSkpO1xuICAgIH1cbiAgICByZXR1cm4gKGgoRnJhZ21lbnQsIG51bGwsICEhKGdyb3VwcyA9PT0gbnVsbCB8fCBncm91cHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGdyb3Vwcy50b3RhbCkgJiYgKGgoXCJjYWxjaXRlLWJ1dHRvblwiLCB7IGNsYXNzOiBcImJ1dHRvblwiLCBhcHBlYXJhbmNlOiBcIm91dGxpbmUtZmlsbFwiLCBraW5kOiBcIm5ldXRyYWxcIiwgaHJlZjogYCR7Z2V0VXNlckxpbmsoeyBiYXNlVXJsLCBwb3J0YWwsIHVzZXI6IHVzZXJJbmZvLCB0eXBlOiBcImdyb3Vwc1wiIH0pfWAsIHRhcmdldDogXCJfYmxhbmtcIiwgb25DbGljazogKGUpID0+IHtcbiAgICAgICAgdGhpcy5vcGVuTGluayhlKTtcbiAgICAgICAgdGhpcy5hcmNnaXNVc2VyUG9wdXBJbnRlcm5hbFVJQWN0aW9uLmVtaXQoe1xuICAgICAgICAgIGNhdGVnb3J5OiBcInByb2ZpbGUgcG9wdXBcIixcbiAgICAgICAgICBhY3Rpb246IFwidmlldyBhbGwgZ3JvdXBzXCJcbiAgICAgICAgfSk7XG4gICAgICB9IH0sIHRoaXMuZ3JvdXBzVGV4dCkpLCAhIXRvdGFsICYmIChoKFwiY2FsY2l0ZS1idXR0b25cIiwgeyBjbGFzczogXCJidXR0b25cIiwgYXBwZWFyYW5jZTogXCJvdXRsaW5lLWZpbGxcIiwga2luZDogXCJuZXV0cmFsXCIsIGhyZWY6IGAke2dldFVzZXJMaW5rKHtcbiAgICAgICAgYmFzZVVybCxcbiAgICAgICAgcG9ydGFsLFxuICAgICAgICB1c2VyOiB1c2VySW5mbyxcbiAgICAgICAgdHlwZTogXCJjb250ZW50XCJcbiAgICAgIH0pfWAsIHRhcmdldDogXCJfYmxhbmtcIiwgb25DbGljazogKGUpID0+IHtcbiAgICAgICAgdGhpcy5vcGVuTGluayhlKTtcbiAgICAgICAgdGhpcy5hcmNnaXNVc2VyUG9wdXBJbnRlcm5hbFVJQWN0aW9uLmVtaXQoe1xuICAgICAgICAgIGNhdGVnb3J5OiBcInByb2ZpbGUgcG9wdXBcIixcbiAgICAgICAgICBhY3Rpb246IFwidmlldyBhbGwgY29udGVudFwiXG4gICAgICAgIH0pO1xuICAgICAgfSB9LCB0aGlzLml0ZW1zVGV4dCkpLCBoKFwiY2FsY2l0ZS1idXR0b25cIiwgeyBjbGFzczogXCJidXR0b25cIiwgYXBwZWFyYW5jZTogXCJvdXRsaW5lLWZpbGxcIiwga2luZDogXCJuZXV0cmFsXCIsIGhyZWY6IGAke3JlbW92ZVRyYWlsaW5nU2xhc2goYmFzZVVybCl9L3VzZXIuaHRtbD91c2VyPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHVzZXJuYW1lKX1gLCB0YXJnZXQ6IFwiX2JsYW5rXCIsIG9uQ2xpY2s6IChlKSA9PiB7XG4gICAgICAgIHRoaXMub3BlbkxpbmsoZSk7XG4gICAgICAgIHRoaXMuYXJjZ2lzVXNlclBvcHVwSW50ZXJuYWxVSUFjdGlvbi5lbWl0KHtcbiAgICAgICAgICBjYXRlZ29yeTogXCJwcm9maWxlIHBvcHVwXCIsXG4gICAgICAgICAgYWN0aW9uOiBcInZpZXcgcHJvZmlsZVwiXG4gICAgICAgIH0pO1xuICAgICAgfSB9LCBpMThuLnByb2ZpbGUpKSk7XG4gIH1cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgaTE4biwgdXNlciwgaXRlbSwgaXRlbVVzZXJJbmZvLCBsYW5nLCBwb3J0YWwsIGV4cGFuZGVkLCByZWZlcmVuY2VFbGVtZW50IH0gPSB0aGlzO1xuICAgIGNvbnN0IHVzZXJJbmZvID0gdXNlciB8fCBpdGVtVXNlckluZm87XG4gICAgY29uc3QgaXNBdXRob3JpdGF0aXZlID0gKGl0ZW0gPT09IG51bGwgfHwgaXRlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogaXRlbS5jb250ZW50U3RhdHVzKSA9PT0gXCJwdWJsaWNfYXV0aG9yaXRhdGl2ZVwiO1xuICAgIGNvbnN0IHsgdXNlcm5hbWUsIGRlc2NyaXB0aW9uIH0gPSB1c2VySW5mbztcbiAgICBjb25zdCBuYW1lID0gZ2V0RnVsbE5hbWUodXNlckluZm8sIGxhbmcpO1xuICAgIGNvbnN0IGRlY29kZWREZXNjcmlwdGlvbiA9IGdldEh0bWxGcm9tVGV4dChkZXNjcmlwdGlvbikgfHwgXCJcIjtcbiAgICAvL2VhY2ggbGluZSBicmVhayBpcyBhcHByb3hpbWF0ZWx5IDQwIGNoYXJzIGxvbmdcbiAgICBjb25zdCB0ZW1wRGVzY3JpcHRpb24gPSBkZWNvZGVkRGVzY3JpcHRpb24ucmVwbGFjZSgvPGJyPi9nLCBcIiBcIi5yZXBlYXQoNDApKTtcbiAgICBjb25zdCBzaG9ydGVuRGVzY3JpcHRpb24gPSAhZXhwYW5kZWQgJiYgdGVtcERlc2NyaXB0aW9uLmxlbmd0aCA+PSAyNDA7XG4gICAgY29uc3Qgc2hvcnREZXNjcmlwdGlvbiA9IHNob3J0ZW5EZXNjcmlwdGlvblxuICAgICAgPyAvLyBUcmltIGF0IDI0MCBjaGFycywgdGhlbiBhZGQgYmFjayB0aGUgbGluZSBicmVha3MgYXNzdW1pbmcgNS00MCBjb25zZWN1dGl2ZSBzcGFjZXMgaXMgYSBsaW5lIGJyZWFrXG4gICAgICAgIGAke3RlbXBEZXNjcmlwdGlvblxuICAgICAgICAgIC5zdWJzdHJpbmcoMCwgMjQwKVxuICAgICAgICAgIC50cmltKClcbiAgICAgICAgICAucmVwbGFjZSgvXFxzezUsNDB9L2csIFwiPGJyPlwiKX0uLi5gXG4gICAgICA6IGRlY29kZWREZXNjcmlwdGlvbjtcbiAgICBjb25zdCBtYW5hZ2VkQnkgPSBpc0F1dGhvcml0YXRpdmVcbiAgICAgID8gdGhpcy5pMThuLml0ZW1NYW5hZ2VkQnkucmVwbGFjZShcIiR7dXNlcm5hbWV9XCIsIHVzZXJuYW1lKVxuICAgICAgOiB1c2VybmFtZTtcbiAgICByZXR1cm4gKGgoSG9zdCwgbnVsbCwgaChcImNhbGNpdGUtcG9wb3ZlclwiLCB7IGNsYXNzOiBcInBvcG92ZXJcIiwgbGFiZWw6IG5hbWUsIHBvaW50ZXJEaXNhYmxlZDogdHJ1ZSwgcmVmZXJlbmNlRWxlbWVudDogcmVmZXJlbmNlRWxlbWVudCwgcGxhY2VtZW50OiBcImJvdHRvbS1zdGFydFwiLCBpZDogYCR7dXNlcm5hbWV9LXBvcG92ZXJgLCByZWY6IChlbCkgPT4gKHRoaXMucG9wb3Zlck5vZGUgPSBlbCksIGF1dG9DbG9zZTogdHJ1ZSwgb25DYWxjaXRlUG9wb3Zlck9wZW46IGRlYm91bmNlKCgpID0+IHtcbiAgICAgICAgdGhpcy5hcmNnaXNVc2VyUG9wdXBJbnRlcm5hbFVJQWN0aW9uLmVtaXQoe1xuICAgICAgICAgIGNhdGVnb3J5OiBcInByb2ZpbGUgcG9wdXBcIixcbiAgICAgICAgICBhY3Rpb246IFwib3BlbiBwcm9maWxlIHBvcHVwXCJcbiAgICAgICAgfSk7XG4gICAgICB9LCAxMDApLCBvbkNhbGNpdGVQb3BvdmVyQ2xvc2U6ICgpID0+IHRoaXMuYXJjZ2lzVXNlclBvcHVwUG9wb3ZlckNsb3NlLmVtaXQoKSwgb25LZXlEb3duOiAoZSkgPT4gdGhpcy5hcmNnaXNVc2VyUG9wdXBQb3BvdmVyS2V5RG93bi5lbWl0KGUpIH0sIGgoXCJkaXZcIiwgeyBjbGFzczogXCJ3cmFwcGVyXCIgfSwgaChcImRpdlwiLCB7IGNsYXNzOiBcImhlYWRlclwiIH0sIGgoXCJhcmNnaXMtdXNlci1hdmF0YXJcIiwgeyBjbGFzczogXCJ1c2VyLWF2YXRhclwiLCB1c2VyOiB1c2VySW5mbywgc2NhbGU6IFwibFwiLCBwb3J0YWw6IHBvcnRhbCwgc2hvd05hbWU6IHRydWUsIGRlc2NyaXB0aW9uOiBtYW5hZ2VkQnksIGNoZWNrT25saW5lOiB0aGlzLmNoZWNrT25saW5lIH0pKSwgaChcImRpdlwiLCB7IGNsYXNzOiBcImNvbnRlbnRcIiB9LCBzaG9ydERlc2NyaXB0aW9uICYmIChoKFwicFwiLCB7IGNsYXNzOiB7IGNvbnRlbnRfX2Rlc2NyaXB0aW9uOiB0cnVlLCBcImNvbnRlbnRfX2Rlc2NyaXB0aW9uLS1leHBhbmRlZFwiOiBleHBhbmRlZCB9LCBpbm5lckhUTUw6IHNob3J0RGVzY3JpcHRpb24gfSkpLCBleHBhbmRlZCAmJiBoKFwiZGl2XCIsIHsgY2xhc3M6IFwiY29udGVudF9fZmFkZVwiIH0pLCBzaG9ydGVuRGVzY3JpcHRpb24gJiYgKGgoXCJjYWxjaXRlLWxpbmtcIiwgeyBjbGFzczogXCJjb250ZW50X19saW5rXCIsIG9uQ2xpY2s6ICgpID0+ICh0aGlzLmV4cGFuZGVkID0gdHJ1ZSkgfSwgaTE4bi5leHBhbmQpKSwgZXhwYW5kZWQgJiYgKGgoXCJjYWxjaXRlLWxpbmtcIiwgeyBjbGFzczogXCJjb250ZW50X19saW5rXCIsIG9uQ2xpY2s6ICgpID0+ICh0aGlzLmV4cGFuZGVkID0gZmFsc2UpIH0sIGkxOG4uc2hvd0xlc3MpKSwgaChcImRpdlwiLCB7IGNsYXNzOiBcImJ1dHRvbnNcIiB9LCBpc0F1dGhvcml0YXRpdmUgPyB0aGlzLnJlbmRlck9yZ0J1dHRvbnMoKSA6IHRoaXMucmVuZGVyVXNlckJ1dHRvbnModXNlckluZm8pKSkpKSkpO1xuICB9XG4gIGdldCBlbCgpIHsgcmV0dXJuIGdldEVsZW1lbnQodGhpcyk7IH1cbiAgc3RhdGljIGdldCB3YXRjaGVycygpIHsgcmV0dXJuIHtcbiAgICBcImdyb3Vwc1wiOiBbXCJ1cGRhdGVHcm91cHNUZXh0XCJdLFxuICAgIFwidG90YWxcIjogW1widXBkYXRlSXRlbXNUZXh0XCJdXG4gIH07IH1cbn07XG5BcmNnaXNVc2VyUG9wdXBQb3BvdmVyLnN0eWxlID0gYXJjZ2lzVXNlclBvcHVwUG9wb3ZlckNzcztcblxuZXhwb3J0IHsgQXJjZ2lzSXRlbUJhZGdlIGFzIGFyY2dpc19pdGVtX2JhZGdlLCBBcmNnaXNJdGVtQmFkZ2VzIGFzIGFyY2dpc19pdGVtX2JhZGdlcywgQXJjZ2lzSXRlbUZhdm9yaXRlIGFzIGFyY2dpc19pdGVtX2Zhdm9yaXRlLCBBcmNnaXNJdGVtU2hhcmVTdW1tYXJ5IGFzIGFyY2dpc19pdGVtX3NoYXJlX3N1bW1hcnksIEFyY2dpc0l0ZW1UeXBlIGFzIGFyY2dpc19pdGVtX3R5cGUsIEFyY2dpc1NlbGVjdGVkSXRlbSQxIGFzIGFyY2dpc19zZWxlY3RlZCwgQXJjZ2lzU2VsZWN0ZWRJdGVtIGFzIGFyY2dpc19zZWxlY3RlZF9pdGVtLCBBcmNnaXNTdWJsYXllclR5cGVJY29uIGFzIGFyY2dpc19zdWJsYXllcl90eXBlLCBBcmNnaXNVc2VyQXZhdGFyIGFzIGFyY2dpc191c2VyX2F2YXRhciwgQXJjZ2lzVXNlclBvcHVwIGFzIGFyY2dpc191c2VyX3BvcHVwLCBBcmNnaXNVc2VyUG9wdXBQb3BvdmVyIGFzIGFyY2dpc191c2VyX3BvcHVwX3BvcG92ZXIgfTtcbiIsIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIHYzLjAuOTlcbiAqL1xuaW1wb3J0IHsgYiBhcyBpc1ByZW1pdW0sIGEgYXMgaXNTdWJzY3JpYmVyLCBuIGFzIGlzUHVibGljVXNlciB9IGZyb20gJy4vcHJpdmlsZWdlcy1jY2Q1ZjM3ZC5qcyc7XG5pbXBvcnQgeyByIGFzIHJldGlyZWRJdGVtVHlwZXMgfSBmcm9tICcuL2l0ZW0tdHlwZXMtYjRmZTg2YWQuanMnO1xuaW1wb3J0IHsgYiBhcyBmZXRjaFZlcmlmaWVkIH0gZnJvbSAnLi91c2VyLWJhMTJlYmQ2LmpzJztcblxuY29uc3QgcmV0aXJlZFVybFBhcnRzID0gW1xuICBcIjNESW5zZXRNYXBcIixcbiAgXCIzRFNjZW5lXCIsXG4gIFwiM0RWaXpcIixcbiAgXCJBdHRhY2htZW50Vmlld2VyXCIsXG4gIFwiQ2FwYWNpdHlBbmFseXNpc1wiLFxuICBcIkNvbXBhcmUvc3Rvcnl0ZWxsaW5nX2NvbXBhcmVcIixcbiAgXCJDb21wYXJlL3N0b3J5dGVsbGluZ190YWJiZWRcIixcbiAgXCJDb21wYXJlL3N0b3J5dGVsbGluZ19zaWRlcGFuZWxcIixcbiAgXCJDb21wYXJlL011bHRpdmlld2VyXCIsXG4gIFwiQ29tcGFyZS9TZWFyY2hcIixcbiAgXCJDb21wYXJlL0NvbmZpZ3VyZVwiLFxuICBcIkNvbXBhcmUvU2lkZUJ5U2lkZVZpZXdlcl9Db25maWd1cmVcIixcbiAgXCJDb21wYXJlM2RcIixcbiAgXCJDb21wYXJlQW5hbHlzaXNcIixcbiAgXCJDb21wYXJlTWFwc1wiLFxuICBcIkRpcmVjdGlvbnNcIixcbiAgXCJFZGl0XCIsXG4gIFwiRWRpdG9yXCIsXG4gIFwiRWxldmF0aW9uc1wiLFxuICBcIkVsZXZhdGlvbnNQcm9maWxlXCIsXG4gIFwiRW1iZWRcIixcbiAgXCJGaWx0ZXJcIixcbiAgXCJGaWx0ZXJHYWxsZXJ5XCIsXG4gIFwiR2VvTGlzdFwiLFxuICBcIkdlb1RvdXJcIixcbiAgXCJIZWFkZXJGb290ZXJcIixcbiAgXCJJZGVudGlmeVwiLFxuICBcIkltYWdlSW50ZXJwcmV0YXRpb25cIixcbiAgXCJJbWFnZXJ5Vmlld2VyXCIsXG4gIFwiSW1wYWN0U3VtbWFyeVwiLFxuICBcIkluZm9ybWF0aW9uTG9va3VwXCIsXG4gIFwiSW50ZXJhY3RpdmVGaWx0ZXJcIixcbiAgXCJJbnRlcmFjdGl2ZUxlZ2VuZFwiLFxuICBcIkxheWVyU2hvd2Nhc2VcIixcbiAgXCJMZWdlbmRcIixcbiAgXCJMaXZlTWFwc1wiLFxuICBcIkxvY2FsUGVyc3BlY3RpdmVcIixcbiAgXCJNYXBBbmRBcHBHYWxsZXJ5XCIsXG4gIFwiTWFwQ2Fyb3VzZWxcIixcbiAgXCJNYXBUb29sc1wiLFxuICBcIk1lZGlhXCIsXG4gIFwiTWluaW1hbEdhbGxlcnlcIixcbiAgXCJNaW5pbWFsaXN0XCIsXG4gIFwiTmVhcmJ5XCIsXG4gIFwiT25lUGFuZVwiLFxuICBcIlBhbmVsc1wiLFxuICBcIlBhbmVsc0xlZ2VuZFwiLFxuICBcIlByb2ZpbGVcIixcbiAgXCJQdWJsaWNHYWxsZXJ5XCIsXG4gIFwiUHVibGljSW5mb3JtYXRpb25cIixcbiAgXCJTZXJ2aWNlTG9va3VwXCIsXG4gIFwiU2ltcGxlTWFwVmlld2VyXCIsXG4gIFwiU2ltcGxlVmlld2VyXCIsXG4gIFwiU29jaWFsTWVkaWFcIixcbiAgXCJTb2x1dGlvbnMvczIuaHRtbD9hcHA9YXBwczIvRmluZEVkaXRGaWx0ZXJcIixcbiAgXCJTb2x1dGlvbnMvczIuaHRtbD9hcHA9YXBwczIvRmluZGVyXCIsXG4gIFwiU3Rvcnl0ZWxsaW5nVGV4dExlZ2VuZFwiLFxuICBcIlN0b3J5TWFwQmFzaWNcIixcbiAgXCJTdHlsZXJcIixcbiAgXCJTdW1tYXJ5Vmlld2VyXCIsXG4gIFwiVGltZVwiLFxuICBcIlRpbWVBd2FyZVwiLFxuICBcIlR3b1BhbmVcIixcbiAgXCJWaWV3ZXJcIixcbiAgXCJab25lTG9va3VwXCJcbl07XG5cbmZ1bmN0aW9uIGlzUmV0aXJlZEl0ZW1UeXBlKHR5cGUpIHtcbiAgcmV0dXJuIHJldGlyZWRJdGVtVHlwZXMuaW5jbHVkZXModHlwZSk7XG59XG5mdW5jdGlvbiBpc1JldGlyZWRTdG9yeU1hcChpdGVtKSB7XG4gIHZhciBfYSwgX2I7XG4gIHJldHVybiAoKF9hID0gaXRlbS5wb3J0YWwpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pc1BvcnRhbCkgJiYgaXRlbS50eXBlID09PSBcIldlYiBNYXBwaW5nIEFwcGxpY2F0aW9uXCIgJiYgKChfYiA9IGl0ZW0udHlwZUtleXdvcmRzKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuaW5jbHVkZXMoXCJTdG9yeSBNYXBcIikpO1xufVxuZnVuY3Rpb24gaXNDaXR5RW5naW5lV2ViU2NlbmUoaXRlbSkge1xuICByZXR1cm4gaXRlbS50eXBlID09PSBcIkNpdHlFbmdpbmUgV2ViIFNjZW5lXCI7XG59XG5mdW5jdGlvbiBpc1JldGlyZWRBcHAoaXRlbSkge1xuICB2YXIgX2E7XG4gIGNvbnN0IGlzUmV0aXJlZFVybCA9IHJldGlyZWRVcmxQYXJ0cy5zb21lKCh1cmxQYXJ0KSA9PiB7XG4gICAgdmFyIF9hO1xuICAgIGNvbnN0IGNvbnRhaW5zSHRtbCA9IHVybFBhcnQuaW5jbHVkZXMoXCIuaHRtbFwiKTtcbiAgICBjb25zdCBmdWxsUmV0aXJlZFBhdGggPSBgL2FwcHMvJHt1cmxQYXJ0fSR7IWNvbnRhaW5zSHRtbCA/IFwiL1wiIDogXCJcIn1gO1xuICAgIHJldHVybiAoX2EgPSBpdGVtLnVybCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmluY2x1ZGVzKGZ1bGxSZXRpcmVkUGF0aCk7XG4gIH0pO1xuICByZXR1cm4gKChfYSA9IGl0ZW0ucG9ydGFsKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaXNQb3J0YWwpICYmIGl0ZW0udHlwZSA9PT0gXCJXZWIgTWFwcGluZyBBcHBsaWNhdGlvblwiICYmIGl0ZW0udXJsICYmIGlzUmV0aXJlZFVybDtcbn1cbmZ1bmN0aW9uIGlzT3JnQXV0aG9yaXRhdGl2ZShpdGVtKSB7XG4gIHJldHVybiBpdGVtLmNvbnRlbnRTdGF0dXMgPT09IFwib3JnX2F1dGhvcml0YXRpdmVcIjtcbn1cbmZ1bmN0aW9uIGlzUHVibGljQXV0aG9yaXRhdGl2ZShpdGVtKSB7XG4gIHJldHVybiBpdGVtLmNvbnRlbnRTdGF0dXMgPT09IFwicHVibGljX2F1dGhvcml0YXRpdmVcIjtcbn1cbmZ1bmN0aW9uIGdldEJhZGdlcyhpdGVtLCBwb3J0YWwsIHVzZXIpIHtcbiAgdmFyIF9hLCBfYiwgX2M7XG4gIGNvbnN0IGJhZGdlcyA9IFtdO1xuICBjb25zdCBncm91cERlc2lnbmF0aW9ucyA9IGl0ZW0uZ3JvdXBEZXNpZ25hdGlvbnMgJiYgaXRlbS5ncm91cERlc2lnbmF0aW9ucy5zcGxpdChcIiwgXCIpO1xuICBpZiAoaXNPcmdBdXRob3JpdGF0aXZlKGl0ZW0pIHx8IGlzUHVibGljQXV0aG9yaXRhdGl2ZShpdGVtKSkge1xuICAgIGJhZGdlcy5wdXNoKFwiQXV0aG9yaXRhdGl2ZVwiKTtcbiAgfVxuICBpZiAoaXRlbS5jb250ZW50U3RhdHVzID09PSBcImRlcHJlY2F0ZWRcIikge1xuICAgIGJhZGdlcy5wdXNoKFwiRGVwcmVjYXRlZFwiKTtcbiAgfVxuICBpZiAoaXRlbS50eXBlID09PSBcIlNvbHV0aW9uXCIgJiYgKChfYSA9IGl0ZW0udHlwZUtleXdvcmRzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaW5jbHVkZXMoXCJBcmNHSVMgU29sdXRpb25cIikpKSB7XG4gICAgYmFkZ2VzLnB1c2goXCJTb2x1dGlvblwiKTtcbiAgfVxuICBpZiAoKChfYiA9IGl0ZW0udHlwZUtleXdvcmRzKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuaW5jbHVkZXMoXCJQdWJsaWMgRGF0YSBDb2xsZWN0aW9uXCIpKSAmJiB1c2VyKSB7XG4gICAgYmFkZ2VzLnB1c2goXCJQdWJsaWMgRGF0YSBDb2xsZWN0aW9uXCIpO1xuICB9XG4gIGlmIChpc1JldGlyZWRJdGVtVHlwZShpdGVtLnR5cGUpIHx8IGlzUmV0aXJlZFN0b3J5TWFwKGl0ZW0pIHx8IGlzUmV0aXJlZEFwcChpdGVtKSkge1xuICAgIGJhZGdlcy5wdXNoKFwiUmV0aXJlZFwiKTtcbiAgfVxuICBpZiAoZ3JvdXBEZXNpZ25hdGlvbnMgPT09IG51bGwgfHwgZ3JvdXBEZXNpZ25hdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGdyb3VwRGVzaWduYXRpb25zLmluY2x1ZGVzKFwibGl2aW5nYXRsYXNcIikpIHtcbiAgICBiYWRnZXMucHVzaChcIkxpdmluZyBBdGxhc1wiKTtcbiAgfVxuICBpZiAoZ3JvdXBEZXNpZ25hdGlvbnMgJiYgZ3JvdXBEZXNpZ25hdGlvbnMuaW5jbHVkZXMoXCJvcGVuZGF0YVwiKSkge1xuICAgIGJhZGdlcy5wdXNoKFwiT3BlbiBEYXRhXCIpO1xuICB9XG4gIGlmIChpc1ByZW1pdW0oaXRlbSkpIHtcbiAgICBiYWRnZXMucHVzaChcIlByZW1pdW1cIik7XG4gIH1cbiAgaWYgKGlzU3Vic2NyaWJlcihpdGVtKSkge1xuICAgIGJhZGdlcy5wdXNoKFwiU3Vic2NyaWJlclwiKTtcbiAgfVxuICBpZiAoaXRlbS5vcmlnaW4pIHtcbiAgICBiYWRnZXMucHVzaChcIkNvbGxhYm9yYXRpb25cIik7XG4gIH1cbiAgaWYgKGl0ZW0ubGlzdGVkICYmICEocG9ydGFsID09PSBudWxsIHx8IHBvcnRhbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcG9ydGFsLmlzUG9ydGFsKSkge1xuICAgIGJhZGdlcy5wdXNoKFwiTWFya2V0cGxhY2VcIik7XG4gIH1cbiAgaWYgKCgoX2MgPSBpdGVtLnR5cGVLZXl3b3JkcykgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLmluY2x1ZGVzKFwiUmVnaXN0ZXJlZCBBcHBcIikpICYmXG4gICAgaXRlbS50eXBlICE9PSBcIkFQSSBLZXlcIiAmJlxuICAgICghKHBvcnRhbCA9PT0gbnVsbCB8fCBwb3J0YWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBvcnRhbC5pc1BvcnRhbCkgfHwgaXRlbS5vd25lciAhPT0gXCJlc3JpX2FwcHNcIikpIHtcbiAgICBiYWRnZXMucHVzaChcIlJlZ2lzdGVyZWRcIik7XG4gIH1cbiAgcmV0dXJuIGJhZGdlcztcbn1cbmFzeW5jIGZ1bmN0aW9uIGdldFRvb2x0aXAoYmFkZ2VUeXBlLCBpdGVtLCB1c2VyLCBpMThuLCBsb2NhbGUpIHtcbiAgdmFyIF9hLCBfYjtcbiAgY29uc3QgcHVibGljVXNlciA9ICF1c2VyIHx8IGlzUHVibGljVXNlcih1c2VyKTtcbiAgc3dpdGNoIChiYWRnZVR5cGUpIHtcbiAgICBjYXNlIFwiQXV0aG9yaXRhdGl2ZVwiOlxuICAgICAgaWYgKGl0ZW0uY29udGVudFN0YXR1cyA9PT0gXCJwdWJsaWNfYXV0aG9yaXRhdGl2ZVwiKSB7XG4gICAgICAgIGNvbnN0IHZlcmlmaWVkID0gYXdhaXQgZmV0Y2hWZXJpZmllZChpdGVtLCBsb2NhbGUpO1xuICAgICAgICBjb25zdCBuYW1lID0gKChfYSA9IGl0ZW0ucG9ydGFsKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaXNQb3J0YWwpID8gKF9iID0gaXRlbS5wb3J0YWwpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5uYW1lIDogdmVyaWZpZWQgPT09IG51bGwgfHwgdmVyaWZpZWQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZlcmlmaWVkLm5hbWU7XG4gICAgICAgIHJldHVybiBpMThuLkF1dGhvcml0YXRpdmUudG9vbHRpcC5wdWJsaWMucmVwbGFjZShcIiR7bmFtZX1cIiwgbmFtZSk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGkxOG4uQXV0aG9yaXRhdGl2ZS50b29sdGlwLm9yZztcbiAgICAgIH1cbiAgICBjYXNlIFwiUmV0aXJlZFwiOlxuICAgICAgY29uc3QgcmV0aXJlZCA9IGkxOG4uUmV0aXJlZC50b29sdGlwO1xuICAgICAgaWYgKGlzUmV0aXJlZFN0b3J5TWFwKGl0ZW0pKSB7XG4gICAgICAgIHJldHVybiByZXRpcmVkLnN0b3J5TWFwO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoaXNDaXR5RW5naW5lV2ViU2NlbmUoaXRlbSkpIHtcbiAgICAgICAgcmV0dXJuIHJldGlyZWQuY2l0eUVuZ2luZTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGlzUmV0aXJlZEFwcChpdGVtKSkge1xuICAgICAgICByZXR1cm4gcmV0aXJlZC5hcHA7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHJldGlyZWQuZ2VuZXJhbDtcbiAgICAgIH1cbiAgICBjYXNlIFwiU3Vic2NyaWJlclwiOlxuICAgICAgcmV0dXJuIHB1YmxpY1VzZXIgPyBpMThuLlN1YnNjcmliZXIudG9vbHRpcC5wdWJsaWMgOiBpMThuLlN1YnNjcmliZXIudG9vbHRpcC5vcmc7XG4gICAgY2FzZSBcIlByZW1pdW1cIjpcbiAgICAgIHJldHVybiBwdWJsaWNVc2VyID8gaTE4bi5QcmVtaXVtLnRvb2x0aXAucHVibGljIDogaTE4bi5QcmVtaXVtLnRvb2x0aXAub3JnO1xuICAgIGNhc2UgXCJSZWdpc3RlcmVkXCI6XG4gICAgICByZXR1cm4gaTE4bi5SZWdpc3RlcmVkLnRvb2x0aXA7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBpMThuW2JhZGdlVHlwZV0udG9vbHRpcDtcbiAgfVxufVxuXG5leHBvcnQgeyBnZXRUb29sdGlwIGFzIGEsIGdldEJhZGdlcyBhcyBnIH07XG4iLCIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiB2My4wLjk5XG4gKi9cbi8qKiBHZXQgdGhlIGNvcnJlY3QgZ2VvbWV0cnkgaWNvbiBiYXNlZCBvbiBsYXllci90YWJsZSB0eXBlIGFuZCBnZW9tZXRyeSB0eXBlXG4gKiB3aWxsIGhhbmRsZXMgdHlwZXMgdXNlZCBieSB0aGUganNhcGksIHRoZSBlc3JpIHR5cGVzIHVzZWQgb24gdGhlIHNlcnZlcixcbiAqIGFuZCB0aGUgdHlwZXMgcmV0dXJuZWQgYnkgdGhlIFNlYXJjaCBBUElcbiAqL1xuZnVuY3Rpb24gZ2V0U3VibGF5ZXJUeXBlSW5mbyh7IGdlb21ldHJ5LCB0eXBlIH0pIHtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSBcIkNhdGFsb2cgTGF5ZXJcIjpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGljb246IFwiY2F0YWxvZy1kYXRhc2V0XCIsXG4gICAgICAgIHR5cGU6IFwiY2F0YWxvZ1wiLFxuICAgICAgICBpc0dlb21ldHJ5OiBmYWxzZVxuICAgICAgfTtcbiAgICBjYXNlIFwiUGFyY2VsIExheWVyXCI6XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpY29uOiBcInBhcmNlbC1sYXllclwiLFxuICAgICAgICB0eXBlOiBcInBhcmNlbFwiLFxuICAgICAgICBpc0dlb21ldHJ5OiBmYWxzZVxuICAgICAgfTtcbiAgICBjYXNlIFwiT3JpZW50ZWQgSW1hZ2VyeSBMYXllclwiOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaWNvbjogXCJvcmllbnRlZC1pbWFnZXJ5LWxheWVyXCIsXG4gICAgICAgIHR5cGU6IFwib3JpZW50ZWQgaW1hZ2VyeVwiLFxuICAgICAgICBpc0dlb21ldHJ5OiBmYWxzZVxuICAgICAgfTtcbiAgICBjYXNlIFwiVGFibGVcIjpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGljb246IFwidGFibGVcIixcbiAgICAgICAgdHlwZTogXCJ0YWJsZVwiLFxuICAgICAgICBpc0dlb21ldHJ5OiB0cnVlXG4gICAgICB9O1xuICB9XG4gIHN3aXRjaCAoZ2VvbWV0cnkpIHtcbiAgICBjYXNlIFwicG9pbnRcIjpcbiAgICBjYXNlIFwiZXNyaUdlb21ldHJ5UG9pbnRcIjpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFwicG9pbnRcIixcbiAgICAgICAgaWNvbjogXCJwb2ludFwiLFxuICAgICAgICBpc0dlb21ldHJ5OiB0cnVlXG4gICAgICB9O1xuICAgIGNhc2UgXCJlc3JpR2VvbWV0cnlNdWx0aXBvaW50XCI6XG4gICAgY2FzZSBcIm11bHRpcG9pbnRcIjpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFwibXVsdGlwb2ludFwiLFxuICAgICAgICBpY29uOiBcImxheWVyLXBvaW50c1wiLFxuICAgICAgICBpc0dlb21ldHJ5OiB0cnVlXG4gICAgICB9O1xuICAgIGNhc2UgXCJsaW5lXCI6XG4gICAgY2FzZSBcInBvbHlsaW5lXCI6XG4gICAgY2FzZSBcImVzcmlHZW9tZXRyeVBvbHlsaW5lXCI6XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBcImxpbmVcIixcbiAgICAgICAgaWNvbjogXCJsaW5lXCIsXG4gICAgICAgIGlzR2VvbWV0cnk6IHRydWVcbiAgICAgIH07XG4gICAgY2FzZSBcInBvbHlnb25cIjpcbiAgICBjYXNlIFwiZXNyaUdlb21ldHJ5UG9seWdvblwiOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogXCJwb2x5Z29uXCIsXG4gICAgICAgIGljb246IFwicG9seWdvblwiLFxuICAgICAgICBpc0dlb21ldHJ5OiB0cnVlXG4gICAgICB9O1xuICAgIGNhc2UgXCJtdWx0aXBhdGNoXCI6XG4gICAgY2FzZSBcImVzcmlHZW9tZXRyeU11bHRpUGF0Y2hcIjpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFwibXVsdGlwYXRjaFwiLFxuICAgICAgICBpY29uOiBcImN1YmVcIixcbiAgICAgICAgaXNHZW9tZXRyeTogdHJ1ZVxuICAgICAgfTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogXCJ0YWJsZVwiLFxuICAgICAgICBpY29uOiBcInRhYmxlXCIsXG4gICAgICAgIGlzR2VvbWV0cnk6IHRydWVcbiAgICAgIH07XG4gIH1cbn1cblxuZXhwb3J0IHsgZ2V0U3VibGF5ZXJUeXBlSW5mbyBhcyBnIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=