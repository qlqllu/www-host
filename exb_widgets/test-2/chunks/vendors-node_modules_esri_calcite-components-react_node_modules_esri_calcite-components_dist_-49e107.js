"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-node_modules_esri_calcite-components-react_node_modules_esri_calcite-components_dist_-49e107"],{

/***/ "./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/calcite-meter.js":
/*!****************************************************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/calcite-meter.js ***!
  \****************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CalciteMeter: () => (/* binding */ CalciteMeter),
/* harmony export */   defineCustomElement: () => (/* binding */ defineCustomElement)
/* harmony export */ });
/* harmony import */ var _stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @stencil/core/internal/client/index.js */ "./node_modules/@esri/calcite-components-react/node_modules/@stencil/core/internal/client/index.js");
/* harmony import */ var _loadable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./loadable.js */ "./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/loadable.js");
/* harmony import */ var _form_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./form.js */ "./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/form.js");
/* harmony import */ var _locale_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./locale.js */ "./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/locale.js");
/* harmony import */ var _dom_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./dom.js */ "./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/dom.js");
/* harmony import */ var _observers_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./observers.js */ "./node_modules/@esri/calcite-components-react/node_modules/@esri/calcite-components/dist/components/observers.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.11.0
 */







const CSS = {
  container: "container",
  fill: "fill",
  stepLine: "step-line",
  label: "label",
  labelHidden: "label-hidden",
  labelRange: "label-range",
  labelValue: "label-value",
  unitLabel: "unit-label",
  stepsVisible: "steps-visible",
  valueVisible: "value-visible",
  success: "fill-success",
  warning: "fill-warning",
  danger: "fill-danger",
};

const meterCss = ":host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}:host{display:flex;--calcite-meter-space-internal:0.125rem;--calcite-meter-height-internal:1rem;--calcite-meter-font-size-internal:var(--calcite-font-size--1)}:host([scale=s]){--calcite-meter-height-internal:0.75rem;--calcite-meter-font-size-internal:var(--calcite-font-size--2)}:host([scale=l]){--calcite-meter-height-internal:1.5rem;--calcite-meter-font-size-internal:var(--calcite-font-size-0)}.container{position:relative;margin:0px;display:flex;inline-size:100%;align-items:center;block-size:var(--calcite-meter-height-internal);background-color:var(--calcite-ui-foreground-2);border:1px solid var(--calcite-ui-border-3);border-radius:var(--calcite-meter-height-internal)}.solid{border:1px solid var(--calcite-ui-foreground-3);background-color:var(--calcite-ui-foreground-3)}.outline{background-color:transparent}.value-visible{margin-block-start:1.5rem}.steps-visible{margin-block-end:1.5rem}.step-line{position:absolute;inset-block:0px;display:block;inline-size:var(--calcite-meter-space-internal);background-color:var(--calcite-ui-border-3)}.label{position:absolute;font-size:var(--calcite-meter-font-size-internal)}.label-hidden{visibility:hidden;opacity:0}.label-value{inset-block-end:calc(100% + 0.5em);font-weight:var(--calcite-font-weight-bold);color:var(--calcite-ui-text-1)}.label-range{color:var(--calcite-ui-text-3);inset-block-start:calc(100% + 0.5em)}.unit-label{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-ui-text-3)}.label-value .unit-label{font-weight:var(--calcite-font-weight-bold);color:var(--calcite-ui-text-2)}.fill{position:absolute;z-index:var(--calcite-app-z-index);display:block;background-color:var(--calcite-ui-brand);transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);inset-inline-start:var(--calcite-meter-space-internal);inset-block:var(--calcite-meter-space-internal);border-radius:var(--calcite-meter-height-internal);max-inline-size:calc(100% - var(--calcite-meter-space-internal) * 2);min-inline-size:calc(var(--calcite-meter-height-internal) - var(--calcite-meter-space-internal) * 2);transition-property:inline-size, background-color, box-shadow}.fill-danger{background-color:var(--calcite-ui-danger)}.fill-success{background-color:var(--calcite-ui-success)}.fill-warning{background-color:var(--calcite-ui-warning)}.solid .fill{inset-block:0;inset-inline-start:0;max-inline-size:100%;min-inline-size:calc(var(--calcite-meter-height-internal));box-shadow:0 0 0 1px var(--calcite-ui-brand)}.solid .fill-danger{box-shadow:0 0 0 1px var(--calcite-ui-danger)}.solid .fill-success{box-shadow:0 0 0 1px var(--calcite-ui-success)}.solid .fill-warning{box-shadow:0 0 0 1px var(--calcite-ui-warning)}";

const Meter = /*@__PURE__*/ (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_5__.proxyCustomElement)(class extends _stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_5__.HTMLElement {
  constructor() {
    super();
    this.__registerHost();
    this.__attachShadow();
    this.labelFlipMax = 0.8;
    this.labelFlipProximity = 0.15;
    this.maxPercent = 100;
    this.minPercent = 0;
    this.resizeObserver = (0,_observers_js__WEBPACK_IMPORTED_MODULE_4__.c)("resize", () => this.resizeHandler());
    this.formatLabel = (value, labelType) => {
      if (labelType === "percent") {
        if (!this.percentFormatting) {
          const locale = (0,_locale_js__WEBPACK_IMPORTED_MODULE_2__.g)(this.effectiveLocale);
          const formatter = new Intl.NumberFormat(locale, {
            useGrouping: this.groupSeparator,
            style: "percent",
          });
          this.percentFormatting = { formatter, locale };
        }
        return this.percentFormatting.formatter.format(value);
      }
      else {
        _locale_js__WEBPACK_IMPORTED_MODULE_2__.n.numberFormatOptions = {
          locale: this.effectiveLocale,
          numberingSystem: this.numberingSystem,
          useGrouping: this.groupSeparator,
        };
        return _locale_js__WEBPACK_IMPORTED_MODULE_2__.n.localize(value.toString());
      }
    };
    this.appearance = "outline-fill";
    this.disabled = false;
    this.fillType = "range";
    this.form = undefined;
    this.groupSeparator = false;
    this.high = undefined;
    this.label = undefined;
    this.low = undefined;
    this.max = 100;
    this.min = 0;
    this.name = undefined;
    this.numberingSystem = undefined;
    this.rangeLabels = false;
    this.rangeLabelType = "percent";
    this.scale = "m";
    this.unitLabel = "";
    this.value = undefined;
    this.valueLabel = false;
    this.valueLabelType = "percent";
    this.currentPercent = undefined;
    this.effectiveLocale = undefined;
    this.highActive = undefined;
    this.highPercent = undefined;
    this.lowActive = undefined;
    this.lowPercent = undefined;
  }
  handleRangeChange() {
    this.calculateValues();
    this.updateLabels();
  }
  handleLabelChange() {
    this.updateLabels();
  }
  //--------------------------------------------------------------------------
  //
  //  Lifecycle
  //
  //--------------------------------------------------------------------------
  async componentWillLoad() {
    (0,_loadable_js__WEBPACK_IMPORTED_MODULE_0__.a)(this);
    this.calculateValues();
    (0,_form_js__WEBPACK_IMPORTED_MODULE_1__.a)(this, this.value);
  }
  componentDidLoad() {
    (0,_loadable_js__WEBPACK_IMPORTED_MODULE_0__.s)(this);
    this.updateLabels();
  }
  connectedCallback() {
    (0,_locale_js__WEBPACK_IMPORTED_MODULE_2__.c)(this);
    (0,_form_js__WEBPACK_IMPORTED_MODULE_1__.c)(this);
    this.resizeObserver?.observe(this.el);
  }
  disconnectedCallback() {
    (0,_locale_js__WEBPACK_IMPORTED_MODULE_2__.d)(this);
    (0,_form_js__WEBPACK_IMPORTED_MODULE_1__.d)(this);
    this.resizeObserver?.disconnect();
  }
  //--------------------------------------------------------------------------
  //
  //  Private Methods
  //
  //--------------------------------------------------------------------------
  resizeHandler() {
    this.updateLabels();
  }
  updateLabels() {
    if (this.valueLabelEl) {
      this.determineValueLabelPosition();
    }
    if (this.rangeLabels) {
      this.determineVisibleLabels();
    }
  }
  calculateValues() {
    const { min, max, low, high, value } = this;
    const lowPercent = (100 * (low - min)) / (max - min);
    const highPercent = (100 * (high - min)) / (max - min);
    const currentPercent = (100 * (value - min)) / (max - min);
    if (!low || low < min || low > high || low > max) {
      this.low = min;
    }
    if (!high || high > max || high < low || high < min) {
      this.high = max;
    }
    if (!value) {
      this.value = min;
    }
    this.lowPercent = lowPercent;
    this.highPercent = highPercent;
    this.currentPercent = value ? currentPercent : 0;
    this.lowActive = !!low && low > min && (!value || low > value) && (!high || low < high);
    this.highActive =
      !!high && min <= high && high < max && (!value || high > value) && (!low || high > low);
  }
  getMeterKindCssClass() {
    const { low, high, min, max, value } = this;
    const lowest = low ? low : min;
    const highest = high ? high : max;
    const aboveLowest = value >= lowest;
    const belowLowest = value < lowest;
    const aboveHighest = value >= highest;
    const belowHighest = value < highest;
    if (!value || (!low && belowHighest) || belowLowest) {
      return CSS.success;
    }
    else if (aboveLowest && belowHighest) {
      return CSS.warning;
    }
    else if (aboveHighest) {
      return CSS.danger;
    }
    else {
      return CSS.success;
    }
  }
  intersects(el1, el2) {
    return el1 && el2 && (0,_dom_js__WEBPACK_IMPORTED_MODULE_3__.l)(el1.getBoundingClientRect(), el2.getBoundingClientRect());
  }
  determineVisibleLabels() {
    const { minLabelEl, lowLabelEl, highLabelEl, maxLabelEl } = this;
    const highMaxOverlap = this.intersects(highLabelEl, maxLabelEl);
    const lowHighOverlap = this.intersects(lowLabelEl, highLabelEl);
    const lowMaxOverlap = this.intersects(lowLabelEl, maxLabelEl);
    const minHighOverlap = this.intersects(minLabelEl, highLabelEl);
    const minLowOverlap = this.intersects(minLabelEl, lowLabelEl);
    const minMaxOverlap = this.intersects(minLabelEl, maxLabelEl);
    const hiddenClass = CSS.labelHidden;
    if (lowLabelEl) {
      if (minLowOverlap || lowMaxOverlap || lowHighOverlap) {
        lowLabelEl.classList.add(hiddenClass);
      }
      else {
        lowLabelEl.classList.remove(hiddenClass);
      }
    }
    if (highLabelEl) {
      if (minHighOverlap || lowMaxOverlap || highMaxOverlap) {
        highLabelEl.classList.add(hiddenClass);
      }
      else {
        highLabelEl.classList.remove(hiddenClass);
      }
    }
    if (minLabelEl && maxLabelEl) {
      if (minMaxOverlap) {
        maxLabelEl.classList.add(hiddenClass);
      }
      else {
        maxLabelEl.classList.remove(hiddenClass);
      }
    }
  }
  determineValueLabelPosition() {
    const { valueLabelEl, meterContainerEl, currentPercent } = this;
    const valuePosition = currentPercent > 100 ? 100 : currentPercent > 0 ? currentPercent : 0;
    const valueLabelWidth = valueLabelEl.getBoundingClientRect().width;
    const containerWidth = meterContainerEl.getBoundingClientRect().width;
    const labelWidthPercent = (100 * (valueLabelWidth - 0)) / (containerWidth - 0);
    if (valuePosition + labelWidthPercent >= 100) {
      valueLabelEl.style.insetInlineEnd = "0%";
      valueLabelEl.style.removeProperty("inset-inline-start");
    }
    else {
      valueLabelEl.style.insetInlineStart = `${valuePosition}% `;
      valueLabelEl.style.removeProperty("inset-inline-end");
    }
  }
  //--------------------------------------------------------------------------
  //
  //  Render Methods
  //
  //--------------------------------------------------------------------------
  renderMeterFill() {
    const { currentPercent, fillType } = this;
    const kindClass = this.getMeterKindCssClass();
    return ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_5__.h)("div", { class: { [CSS.fill]: true, [kindClass]: fillType !== "single" }, style: { width: `${currentPercent}%` } }));
  }
  renderRangeLine(position) {
    const style = { insetInlineStart: `${position}%` };
    return (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_5__.h)("div", { class: CSS.stepLine, style: style });
  }
  renderValueLabel() {
    const { currentPercent, valueLabelType, unitLabel, value } = this;
    const label = this.formatLabel(valueLabelType === "percent" ? currentPercent / 100 : value || 0, valueLabelType);
    return ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_5__.h)("div", { class: { [CSS.label]: true, [CSS.labelValue]: true }, key: "low-label-line",
      // eslint-disable-next-line react/jsx-sort-props
      ref: (el) => (this.valueLabelEl = el) }, label, unitLabel && valueLabelType !== "percent" && ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_5__.h)("span", { class: CSS.unitLabel }, "\u00A0", unitLabel))));
  }
  renderMinLabel() {
    const { rangeLabelType, min, minPercent, unitLabel } = this;
    const style = { insetInlineStart: `${minPercent}%` };
    const labelMin = this.formatLabel(rangeLabelType === "percent" ? minPercent : min, rangeLabelType);
    return ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_5__.h)("div", { class: { [CSS.label]: true, [CSS.labelRange]: true }, key: "min-label-line", style: style,
      // eslint-disable-next-line react/jsx-sort-props
      ref: (el) => (this.minLabelEl = el) }, labelMin, unitLabel && rangeLabelType !== "percent" && ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_5__.h)("span", { class: CSS.unitLabel }, "\u00A0", unitLabel))));
  }
  renderLowLabel() {
    const { rangeLabelType, low, lowPercent, highPercent, labelFlipProximity } = this;
    const label = low
      ? this.formatLabel(rangeLabelType === "percent" ? lowPercent / 100 : low, rangeLabelType)
      : "";
    const styleDefault = { insetInlineStart: `${lowPercent}%` };
    const styleFlipped = { insetInlineEnd: `${100 - lowPercent}%` };
    const style = (highPercent - lowPercent) / 100 < labelFlipProximity ? styleFlipped : styleDefault;
    return ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_5__.h)("div", { class: { [CSS.label]: true, [CSS.labelRange]: true }, key: "low-label-line", style: style,
      // eslint-disable-next-line react/jsx-sort-props
      ref: (el) => (this.lowLabelEl = el) }, label));
  }
  renderHighLabel() {
    const { rangeLabelType, high, highPercent, labelFlipMax } = this;
    const label = high
      ? this.formatLabel(rangeLabelType === "percent" ? highPercent / 100 : high, rangeLabelType)
      : "";
    const styleDefault = { insetInlineStart: `${highPercent}%` };
    const styleFlipped = { insetInlineEnd: `${100 - highPercent}%` };
    const style = highPercent / 100 >= labelFlipMax ? styleFlipped : styleDefault;
    return ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_5__.h)("div", { class: { [CSS.label]: true, [CSS.labelRange]: true }, key: "high-label-line", style: style,
      // eslint-disable-next-line react/jsx-sort-props
      ref: (el) => (this.highLabelEl = el) }, label));
  }
  renderMaxLabel() {
    const { rangeLabelType, max, maxPercent } = this;
    const style = { insetInlineEnd: `${100 - maxPercent}%` };
    const labelMax = this.formatLabel(rangeLabelType === "percent" ? maxPercent / 100 : max, rangeLabelType);
    return ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_5__.h)("div", { class: { [CSS.label]: true, [CSS.labelRange]: true }, key: "max-label-line", style: style,
      // eslint-disable-next-line react/jsx-sort-props
      ref: (el) => (this.maxLabelEl = el) }, labelMax));
  }
  render() {
    const { appearance, currentPercent, highActive, highPercent, label, lowActive, lowPercent, max, maxPercent, min, minPercent, rangeLabels, rangeLabelType, unitLabel, value, valueLabel, valueLabelType, } = this;
    const textPercentLabelWithPercent = this.formatLabel(currentPercent / 100, "percent");
    const textUnitLabel = `${value} ${unitLabel}`;
    const valueText = valueLabelType === "percent"
      ? textPercentLabelWithPercent
      : unitLabel
        ? textUnitLabel
        : undefined;
    return ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_5__.h)(_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_5__.Host, null, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_5__.h)("div", { "aria-label": label, "aria-valuemax": rangeLabelType === "percent" ? maxPercent : max, "aria-valuemin": rangeLabelType === "percent" ? minPercent : min, "aria-valuenow": valueLabelType === "percent" ? currentPercent : value, "aria-valuetext": valueText, class: {
        [CSS.container]: true,
        [CSS.stepsVisible]: rangeLabels,
        [CSS.valueVisible]: valueLabel,
        [appearance]: appearance !== "outline-fill",
      }, role: "meter",
      // eslint-disable-next-line react/jsx-sort-props
      ref: (el) => (this.meterContainerEl = el) }, this.renderMeterFill(), valueLabel && this.renderValueLabel(), lowActive && this.renderRangeLine(lowPercent), highActive && this.renderRangeLine(highPercent), rangeLabels && this.renderMinLabel(), rangeLabels && lowActive && this.renderLowLabel(), rangeLabels && highActive && this.renderHighLabel(), rangeLabels && this.renderMaxLabel())));
  }
  get el() { return this; }
  static get watchers() { return {
    "min": ["handleRangeChange"],
    "max": ["handleRangeChange"],
    "low": ["handleRangeChange"],
    "high": ["handleRangeChange"],
    "value": ["handleRangeChange"],
    "rangeLabels": ["handleLabelChange"],
    "rangeLabelType": ["handleLabelChange"],
    "unitLabel": ["handleLabelChange"],
    "valueLabel": ["handleLabelChange"],
    "valueLabelType": ["handleLabelChange"]
  }; }
  static get style() { return meterCss; }
}, [1, "calcite-meter", {
    "appearance": [513],
    "disabled": [516],
    "fillType": [513, "fill-type"],
    "form": [513],
    "groupSeparator": [516, "group-separator"],
    "high": [1538],
    "label": [1],
    "low": [1538],
    "max": [514],
    "min": [514],
    "name": [513],
    "numberingSystem": [1, "numbering-system"],
    "rangeLabels": [516, "range-labels"],
    "rangeLabelType": [513, "range-label-type"],
    "scale": [513],
    "unitLabel": [1, "unit-label"],
    "value": [1026],
    "valueLabel": [516, "value-label"],
    "valueLabelType": [513, "value-label-type"],
    "currentPercent": [32],
    "effectiveLocale": [32],
    "highActive": [32],
    "highPercent": [32],
    "lowActive": [32],
    "lowPercent": [32]
  }]);
function defineCustomElement$1() {
  if (typeof customElements === "undefined") {
    return;
  }
  const components = ["calcite-meter"];
  components.forEach(tagName => { switch (tagName) {
    case "calcite-meter":
      if (!customElements.get(tagName)) {
        customElements.define(tagName, Meter);
      }
      break;
  } });
}
defineCustomElement$1();

const CalciteMeter = Meter;
const defineCustomElement = defineCustomElement$1;




/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvdmVuZG9ycy1ub2RlX21vZHVsZXNfZXNyaV9jYWxjaXRlLWNvbXBvbmVudHMtcmVhY3Rfbm9kZV9tb2R1bGVzX2VzcmlfY2FsY2l0ZS1jb21wb25lbnRzX2Rpc3RfLTQ5ZTEwNy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDa0c7QUFDYjtBQUNlO0FBQytCO0FBQ3hGO0FBQ1U7O0FBRXJEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxvQ0FBb0MsZUFBZSx5QkFBeUIsaUJBQWlCLDJDQUEyQyxtREFBbUQsb0JBQW9CLGdCQUFnQixhQUFhLFNBQVMsYUFBYSx5R0FBeUcsVUFBVSxNQUFNLGFBQWEsd0NBQXdDLHFDQUFxQywrREFBK0QsaUJBQWlCLHdDQUF3QywrREFBK0QsaUJBQWlCLHVDQUF1Qyw4REFBOEQsV0FBVyxrQkFBa0IsV0FBVyxhQUFhLGlCQUFpQixtQkFBbUIsZ0RBQWdELGdEQUFnRCw0Q0FBNEMsbURBQW1ELE9BQU8sZ0RBQWdELGdEQUFnRCxTQUFTLDZCQUE2QixlQUFlLDBCQUEwQixlQUFlLHdCQUF3QixXQUFXLGtCQUFrQixnQkFBZ0IsY0FBYyxnREFBZ0QsNENBQTRDLE9BQU8sa0JBQWtCLGtEQUFrRCxjQUFjLGtCQUFrQixVQUFVLGFBQWEsbUNBQW1DLDRDQUE0QywrQkFBK0IsYUFBYSwrQkFBK0IscUNBQXFDLFlBQVksOENBQThDLCtCQUErQix5QkFBeUIsNENBQTRDLCtCQUErQixNQUFNLGtCQUFrQixtQ0FBbUMsY0FBYyx5Q0FBeUMsMEJBQTBCLHdEQUF3RCx1REFBdUQsZ0RBQWdELG1EQUFtRCxxRUFBcUUscUdBQXFHLDhEQUE4RCxhQUFhLDBDQUEwQyxjQUFjLDJDQUEyQyxjQUFjLDJDQUEyQyxhQUFhLGNBQWMscUJBQXFCLHFCQUFxQiwyREFBMkQs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bGVzL0Blc3JpL2NhbGNpdGUtY29tcG9uZW50cy1yZWFjdC9ub2RlX21vZHVsZXMvQGVzcmkvY2FsY2l0ZS1jb21wb25lbnRzL2Rpc3QvY29tcG9uZW50cy9jYWxjaXRlLW1ldGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWRlc2lnbi1zeXN0ZW0vYmxvYi9tYWluL0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG4gKiB2MS4xMS4wXG4gKi9cbmltcG9ydCB7IHByb3h5Q3VzdG9tRWxlbWVudCwgSFRNTEVsZW1lbnQsIGgsIEhvc3QgfSBmcm9tICdAc3RlbmNpbC9jb3JlL2ludGVybmFsL2NsaWVudC9pbmRleC5qcyc7XG5pbXBvcnQgeyBhIGFzIHNldFVwTG9hZGFibGVDb21wb25lbnQsIHMgYXMgc2V0Q29tcG9uZW50TG9hZGVkIH0gZnJvbSAnLi9sb2FkYWJsZS5qcyc7XG5pbXBvcnQgeyBhIGFzIGFmdGVyQ29ubmVjdERlZmF1bHRWYWx1ZVNldCwgYyBhcyBjb25uZWN0Rm9ybSwgZCBhcyBkaXNjb25uZWN0Rm9ybSB9IGZyb20gJy4vZm9ybS5qcyc7XG5pbXBvcnQgeyBnIGFzIGdldFN1cHBvcnRlZExvY2FsZSwgbiBhcyBudW1iZXJTdHJpbmdGb3JtYXR0ZXIsIGMgYXMgY29ubmVjdExvY2FsaXplZCwgZCBhcyBkaXNjb25uZWN0TG9jYWxpemVkIH0gZnJvbSAnLi9sb2NhbGUuanMnO1xuaW1wb3J0IHsgbCBhcyBpbnRlcnNlY3RzIH0gZnJvbSAnLi9kb20uanMnO1xuaW1wb3J0IHsgYyBhcyBjcmVhdGVPYnNlcnZlciB9IGZyb20gJy4vb2JzZXJ2ZXJzLmpzJztcblxuY29uc3QgQ1NTID0ge1xuICBjb250YWluZXI6IFwiY29udGFpbmVyXCIsXG4gIGZpbGw6IFwiZmlsbFwiLFxuICBzdGVwTGluZTogXCJzdGVwLWxpbmVcIixcbiAgbGFiZWw6IFwibGFiZWxcIixcbiAgbGFiZWxIaWRkZW46IFwibGFiZWwtaGlkZGVuXCIsXG4gIGxhYmVsUmFuZ2U6IFwibGFiZWwtcmFuZ2VcIixcbiAgbGFiZWxWYWx1ZTogXCJsYWJlbC12YWx1ZVwiLFxuICB1bml0TGFiZWw6IFwidW5pdC1sYWJlbFwiLFxuICBzdGVwc1Zpc2libGU6IFwic3RlcHMtdmlzaWJsZVwiLFxuICB2YWx1ZVZpc2libGU6IFwidmFsdWUtdmlzaWJsZVwiLFxuICBzdWNjZXNzOiBcImZpbGwtc3VjY2Vzc1wiLFxuICB3YXJuaW5nOiBcImZpbGwtd2FybmluZ1wiLFxuICBkYW5nZXI6IFwiZmlsbC1kYW5nZXJcIixcbn07XG5cbmNvbnN0IG1ldGVyQ3NzID0gXCI6aG9zdChbZGlzYWJsZWRdKXtjdXJzb3I6ZGVmYXVsdDstd2Via2l0LXVzZXItc2VsZWN0Om5vbmU7dXNlci1zZWxlY3Q6bm9uZTtvcGFjaXR5OnZhcigtLWNhbGNpdGUtdWktb3BhY2l0eS1kaXNhYmxlZCl9Omhvc3QoW2Rpc2FibGVkXSkgKiw6aG9zdChbZGlzYWJsZWRdKSA6OnNsb3R0ZWQoKil7cG9pbnRlci1ldmVudHM6bm9uZX06aG9zdChbaGlkZGVuXSl7ZGlzcGxheTpub25lfVtoaWRkZW5de2Rpc3BsYXk6bm9uZX06aG9zdChbZGlzYWJsZWRdKSA6OnNsb3R0ZWQoW2NhbGNpdGUtaHlkcmF0ZWRdW2Rpc2FibGVkXSksOmhvc3QoW2Rpc2FibGVkXSkgW2NhbGNpdGUtaHlkcmF0ZWRdW2Rpc2FibGVkXXtvcGFjaXR5OjF9Omhvc3R7ZGlzcGxheTpmbGV4Oy0tY2FsY2l0ZS1tZXRlci1zcGFjZS1pbnRlcm5hbDowLjEyNXJlbTstLWNhbGNpdGUtbWV0ZXItaGVpZ2h0LWludGVybmFsOjFyZW07LS1jYWxjaXRlLW1ldGVyLWZvbnQtc2l6ZS1pbnRlcm5hbDp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0tMSl9Omhvc3QoW3NjYWxlPXNdKXstLWNhbGNpdGUtbWV0ZXItaGVpZ2h0LWludGVybmFsOjAuNzVyZW07LS1jYWxjaXRlLW1ldGVyLWZvbnQtc2l6ZS1pbnRlcm5hbDp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0tMil9Omhvc3QoW3NjYWxlPWxdKXstLWNhbGNpdGUtbWV0ZXItaGVpZ2h0LWludGVybmFsOjEuNXJlbTstLWNhbGNpdGUtbWV0ZXItZm9udC1zaXplLWludGVybmFsOnZhcigtLWNhbGNpdGUtZm9udC1zaXplLTApfS5jb250YWluZXJ7cG9zaXRpb246cmVsYXRpdmU7bWFyZ2luOjBweDtkaXNwbGF5OmZsZXg7aW5saW5lLXNpemU6MTAwJTthbGlnbi1pdGVtczpjZW50ZXI7YmxvY2stc2l6ZTp2YXIoLS1jYWxjaXRlLW1ldGVyLWhlaWdodC1pbnRlcm5hbCk7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWZvcmVncm91bmQtMik7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1jYWxjaXRlLXVpLWJvcmRlci0zKTtib3JkZXItcmFkaXVzOnZhcigtLWNhbGNpdGUtbWV0ZXItaGVpZ2h0LWludGVybmFsKX0uc29saWR7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1jYWxjaXRlLXVpLWZvcmVncm91bmQtMyk7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWZvcmVncm91bmQtMyl9Lm91dGxpbmV7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudH0udmFsdWUtdmlzaWJsZXttYXJnaW4tYmxvY2stc3RhcnQ6MS41cmVtfS5zdGVwcy12aXNpYmxle21hcmdpbi1ibG9jay1lbmQ6MS41cmVtfS5zdGVwLWxpbmV7cG9zaXRpb246YWJzb2x1dGU7aW5zZXQtYmxvY2s6MHB4O2Rpc3BsYXk6YmxvY2s7aW5saW5lLXNpemU6dmFyKC0tY2FsY2l0ZS1tZXRlci1zcGFjZS1pbnRlcm5hbCk7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWJvcmRlci0zKX0ubGFiZWx7cG9zaXRpb246YWJzb2x1dGU7Zm9udC1zaXplOnZhcigtLWNhbGNpdGUtbWV0ZXItZm9udC1zaXplLWludGVybmFsKX0ubGFiZWwtaGlkZGVue3Zpc2liaWxpdHk6aGlkZGVuO29wYWNpdHk6MH0ubGFiZWwtdmFsdWV7aW5zZXQtYmxvY2stZW5kOmNhbGMoMTAwJSArIDAuNWVtKTtmb250LXdlaWdodDp2YXIoLS1jYWxjaXRlLWZvbnQtd2VpZ2h0LWJvbGQpO2NvbG9yOnZhcigtLWNhbGNpdGUtdWktdGV4dC0xKX0ubGFiZWwtcmFuZ2V7Y29sb3I6dmFyKC0tY2FsY2l0ZS11aS10ZXh0LTMpO2luc2V0LWJsb2NrLXN0YXJ0OmNhbGMoMTAwJSArIDAuNWVtKX0udW5pdC1sYWJlbHtmb250LXdlaWdodDp2YXIoLS1jYWxjaXRlLWZvbnQtd2VpZ2h0LW1lZGl1bSk7Y29sb3I6dmFyKC0tY2FsY2l0ZS11aS10ZXh0LTMpfS5sYWJlbC12YWx1ZSAudW5pdC1sYWJlbHtmb250LXdlaWdodDp2YXIoLS1jYWxjaXRlLWZvbnQtd2VpZ2h0LWJvbGQpO2NvbG9yOnZhcigtLWNhbGNpdGUtdWktdGV4dC0yKX0uZmlsbHtwb3NpdGlvbjphYnNvbHV0ZTt6LWluZGV4OnZhcigtLWNhbGNpdGUtYXBwLXotaW5kZXgpO2Rpc3BsYXk6YmxvY2s7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWJyYW5kKTt0cmFuc2l0aW9uLWR1cmF0aW9uOjE1MG1zO3RyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOmN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSk7aW5zZXQtaW5saW5lLXN0YXJ0OnZhcigtLWNhbGNpdGUtbWV0ZXItc3BhY2UtaW50ZXJuYWwpO2luc2V0LWJsb2NrOnZhcigtLWNhbGNpdGUtbWV0ZXItc3BhY2UtaW50ZXJuYWwpO2JvcmRlci1yYWRpdXM6dmFyKC0tY2FsY2l0ZS1tZXRlci1oZWlnaHQtaW50ZXJuYWwpO21heC1pbmxpbmUtc2l6ZTpjYWxjKDEwMCUgLSB2YXIoLS1jYWxjaXRlLW1ldGVyLXNwYWNlLWludGVybmFsKSAqIDIpO21pbi1pbmxpbmUtc2l6ZTpjYWxjKHZhcigtLWNhbGNpdGUtbWV0ZXItaGVpZ2h0LWludGVybmFsKSAtIHZhcigtLWNhbGNpdGUtbWV0ZXItc3BhY2UtaW50ZXJuYWwpICogMik7dHJhbnNpdGlvbi1wcm9wZXJ0eTppbmxpbmUtc2l6ZSwgYmFja2dyb3VuZC1jb2xvciwgYm94LXNoYWRvd30uZmlsbC1kYW5nZXJ7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWRhbmdlcil9LmZpbGwtc3VjY2Vzc3tiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtdWktc3VjY2Vzcyl9LmZpbGwtd2FybmluZ3tiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtdWktd2FybmluZyl9LnNvbGlkIC5maWxse2luc2V0LWJsb2NrOjA7aW5zZXQtaW5saW5lLXN0YXJ0OjA7bWF4LWlubGluZS1zaXplOjEwMCU7bWluLWlubGluZS1zaXplOmNhbGModmFyKC0tY2FsY2l0ZS1tZXRlci1oZWlnaHQtaW50ZXJuYWwpKTtib3gtc2hhZG93OjAgMCAwIDFweCB2YXIoLS1jYWxjaXRlLXVpLWJyYW5kKX0uc29saWQgLmZpbGwtZGFuZ2Vye2JveC1zaGFkb3c6MCAwIDAgMXB4IHZhcigtLWNhbGNpdGUtdWktZGFuZ2VyKX0uc29saWQgLmZpbGwtc3VjY2Vzc3tib3gtc2hhZG93OjAgMCAwIDFweCB2YXIoLS1jYWxjaXRlLXVpLXN1Y2Nlc3MpfS5zb2xpZCAuZmlsbC13YXJuaW5ne2JveC1zaGFkb3c6MCAwIDAgMXB4IHZhcigtLWNhbGNpdGUtdWktd2FybmluZyl9XCI7XG5cbmNvbnN0IE1ldGVyID0gLypAX19QVVJFX18qLyBwcm94eUN1c3RvbUVsZW1lbnQoY2xhc3MgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fX3JlZ2lzdGVySG9zdCgpO1xuICAgIHRoaXMuX19hdHRhY2hTaGFkb3coKTtcbiAgICB0aGlzLmxhYmVsRmxpcE1heCA9IDAuODtcbiAgICB0aGlzLmxhYmVsRmxpcFByb3hpbWl0eSA9IDAuMTU7XG4gICAgdGhpcy5tYXhQZXJjZW50ID0gMTAwO1xuICAgIHRoaXMubWluUGVyY2VudCA9IDA7XG4gICAgdGhpcy5yZXNpemVPYnNlcnZlciA9IGNyZWF0ZU9ic2VydmVyKFwicmVzaXplXCIsICgpID0+IHRoaXMucmVzaXplSGFuZGxlcigpKTtcbiAgICB0aGlzLmZvcm1hdExhYmVsID0gKHZhbHVlLCBsYWJlbFR5cGUpID0+IHtcbiAgICAgIGlmIChsYWJlbFR5cGUgPT09IFwicGVyY2VudFwiKSB7XG4gICAgICAgIGlmICghdGhpcy5wZXJjZW50Rm9ybWF0dGluZykge1xuICAgICAgICAgIGNvbnN0IGxvY2FsZSA9IGdldFN1cHBvcnRlZExvY2FsZSh0aGlzLmVmZmVjdGl2ZUxvY2FsZSk7XG4gICAgICAgICAgY29uc3QgZm9ybWF0dGVyID0gbmV3IEludGwuTnVtYmVyRm9ybWF0KGxvY2FsZSwge1xuICAgICAgICAgICAgdXNlR3JvdXBpbmc6IHRoaXMuZ3JvdXBTZXBhcmF0b3IsXG4gICAgICAgICAgICBzdHlsZTogXCJwZXJjZW50XCIsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdGhpcy5wZXJjZW50Rm9ybWF0dGluZyA9IHsgZm9ybWF0dGVyLCBsb2NhbGUgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5wZXJjZW50Rm9ybWF0dGluZy5mb3JtYXR0ZXIuZm9ybWF0KHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBudW1iZXJTdHJpbmdGb3JtYXR0ZXIubnVtYmVyRm9ybWF0T3B0aW9ucyA9IHtcbiAgICAgICAgICBsb2NhbGU6IHRoaXMuZWZmZWN0aXZlTG9jYWxlLFxuICAgICAgICAgIG51bWJlcmluZ1N5c3RlbTogdGhpcy5udW1iZXJpbmdTeXN0ZW0sXG4gICAgICAgICAgdXNlR3JvdXBpbmc6IHRoaXMuZ3JvdXBTZXBhcmF0b3IsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBudW1iZXJTdHJpbmdGb3JtYXR0ZXIubG9jYWxpemUodmFsdWUudG9TdHJpbmcoKSk7XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLmFwcGVhcmFuY2UgPSBcIm91dGxpbmUtZmlsbFwiO1xuICAgIHRoaXMuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB0aGlzLmZpbGxUeXBlID0gXCJyYW5nZVwiO1xuICAgIHRoaXMuZm9ybSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmdyb3VwU2VwYXJhdG9yID0gZmFsc2U7XG4gICAgdGhpcy5oaWdoID0gdW5kZWZpbmVkO1xuICAgIHRoaXMubGFiZWwgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5sb3cgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5tYXggPSAxMDA7XG4gICAgdGhpcy5taW4gPSAwO1xuICAgIHRoaXMubmFtZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLm51bWJlcmluZ1N5c3RlbSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnJhbmdlTGFiZWxzID0gZmFsc2U7XG4gICAgdGhpcy5yYW5nZUxhYmVsVHlwZSA9IFwicGVyY2VudFwiO1xuICAgIHRoaXMuc2NhbGUgPSBcIm1cIjtcbiAgICB0aGlzLnVuaXRMYWJlbCA9IFwiXCI7XG4gICAgdGhpcy52YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnZhbHVlTGFiZWwgPSBmYWxzZTtcbiAgICB0aGlzLnZhbHVlTGFiZWxUeXBlID0gXCJwZXJjZW50XCI7XG4gICAgdGhpcy5jdXJyZW50UGVyY2VudCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmVmZmVjdGl2ZUxvY2FsZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmhpZ2hBY3RpdmUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5oaWdoUGVyY2VudCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmxvd0FjdGl2ZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmxvd1BlcmNlbnQgPSB1bmRlZmluZWQ7XG4gIH1cbiAgaGFuZGxlUmFuZ2VDaGFuZ2UoKSB7XG4gICAgdGhpcy5jYWxjdWxhdGVWYWx1ZXMoKTtcbiAgICB0aGlzLnVwZGF0ZUxhYmVscygpO1xuICB9XG4gIGhhbmRsZUxhYmVsQ2hhbmdlKCkge1xuICAgIHRoaXMudXBkYXRlTGFiZWxzKCk7XG4gIH1cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvL1xuICAvLyAgTGlmZWN5Y2xlXG4gIC8vXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgYXN5bmMgY29tcG9uZW50V2lsbExvYWQoKSB7XG4gICAgc2V0VXBMb2FkYWJsZUNvbXBvbmVudCh0aGlzKTtcbiAgICB0aGlzLmNhbGN1bGF0ZVZhbHVlcygpO1xuICAgIGFmdGVyQ29ubmVjdERlZmF1bHRWYWx1ZVNldCh0aGlzLCB0aGlzLnZhbHVlKTtcbiAgfVxuICBjb21wb25lbnREaWRMb2FkKCkge1xuICAgIHNldENvbXBvbmVudExvYWRlZCh0aGlzKTtcbiAgICB0aGlzLnVwZGF0ZUxhYmVscygpO1xuICB9XG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIGNvbm5lY3RMb2NhbGl6ZWQodGhpcyk7XG4gICAgY29ubmVjdEZvcm0odGhpcyk7XG4gICAgdGhpcy5yZXNpemVPYnNlcnZlcj8ub2JzZXJ2ZSh0aGlzLmVsKTtcbiAgfVxuICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBkaXNjb25uZWN0TG9jYWxpemVkKHRoaXMpO1xuICAgIGRpc2Nvbm5lY3RGb3JtKHRoaXMpO1xuICAgIHRoaXMucmVzaXplT2JzZXJ2ZXI/LmRpc2Nvbm5lY3QoKTtcbiAgfVxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vXG4gIC8vICBQcml2YXRlIE1ldGhvZHNcbiAgLy9cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICByZXNpemVIYW5kbGVyKCkge1xuICAgIHRoaXMudXBkYXRlTGFiZWxzKCk7XG4gIH1cbiAgdXBkYXRlTGFiZWxzKCkge1xuICAgIGlmICh0aGlzLnZhbHVlTGFiZWxFbCkge1xuICAgICAgdGhpcy5kZXRlcm1pbmVWYWx1ZUxhYmVsUG9zaXRpb24oKTtcbiAgICB9XG4gICAgaWYgKHRoaXMucmFuZ2VMYWJlbHMpIHtcbiAgICAgIHRoaXMuZGV0ZXJtaW5lVmlzaWJsZUxhYmVscygpO1xuICAgIH1cbiAgfVxuICBjYWxjdWxhdGVWYWx1ZXMoKSB7XG4gICAgY29uc3QgeyBtaW4sIG1heCwgbG93LCBoaWdoLCB2YWx1ZSB9ID0gdGhpcztcbiAgICBjb25zdCBsb3dQZXJjZW50ID0gKDEwMCAqIChsb3cgLSBtaW4pKSAvIChtYXggLSBtaW4pO1xuICAgIGNvbnN0IGhpZ2hQZXJjZW50ID0gKDEwMCAqIChoaWdoIC0gbWluKSkgLyAobWF4IC0gbWluKTtcbiAgICBjb25zdCBjdXJyZW50UGVyY2VudCA9ICgxMDAgKiAodmFsdWUgLSBtaW4pKSAvIChtYXggLSBtaW4pO1xuICAgIGlmICghbG93IHx8IGxvdyA8IG1pbiB8fCBsb3cgPiBoaWdoIHx8IGxvdyA+IG1heCkge1xuICAgICAgdGhpcy5sb3cgPSBtaW47XG4gICAgfVxuICAgIGlmICghaGlnaCB8fCBoaWdoID4gbWF4IHx8IGhpZ2ggPCBsb3cgfHwgaGlnaCA8IG1pbikge1xuICAgICAgdGhpcy5oaWdoID0gbWF4O1xuICAgIH1cbiAgICBpZiAoIXZhbHVlKSB7XG4gICAgICB0aGlzLnZhbHVlID0gbWluO1xuICAgIH1cbiAgICB0aGlzLmxvd1BlcmNlbnQgPSBsb3dQZXJjZW50O1xuICAgIHRoaXMuaGlnaFBlcmNlbnQgPSBoaWdoUGVyY2VudDtcbiAgICB0aGlzLmN1cnJlbnRQZXJjZW50ID0gdmFsdWUgPyBjdXJyZW50UGVyY2VudCA6IDA7XG4gICAgdGhpcy5sb3dBY3RpdmUgPSAhIWxvdyAmJiBsb3cgPiBtaW4gJiYgKCF2YWx1ZSB8fCBsb3cgPiB2YWx1ZSkgJiYgKCFoaWdoIHx8IGxvdyA8IGhpZ2gpO1xuICAgIHRoaXMuaGlnaEFjdGl2ZSA9XG4gICAgICAhIWhpZ2ggJiYgbWluIDw9IGhpZ2ggJiYgaGlnaCA8IG1heCAmJiAoIXZhbHVlIHx8IGhpZ2ggPiB2YWx1ZSkgJiYgKCFsb3cgfHwgaGlnaCA+IGxvdyk7XG4gIH1cbiAgZ2V0TWV0ZXJLaW5kQ3NzQ2xhc3MoKSB7XG4gICAgY29uc3QgeyBsb3csIGhpZ2gsIG1pbiwgbWF4LCB2YWx1ZSB9ID0gdGhpcztcbiAgICBjb25zdCBsb3dlc3QgPSBsb3cgPyBsb3cgOiBtaW47XG4gICAgY29uc3QgaGlnaGVzdCA9IGhpZ2ggPyBoaWdoIDogbWF4O1xuICAgIGNvbnN0IGFib3ZlTG93ZXN0ID0gdmFsdWUgPj0gbG93ZXN0O1xuICAgIGNvbnN0IGJlbG93TG93ZXN0ID0gdmFsdWUgPCBsb3dlc3Q7XG4gICAgY29uc3QgYWJvdmVIaWdoZXN0ID0gdmFsdWUgPj0gaGlnaGVzdDtcbiAgICBjb25zdCBiZWxvd0hpZ2hlc3QgPSB2YWx1ZSA8IGhpZ2hlc3Q7XG4gICAgaWYgKCF2YWx1ZSB8fCAoIWxvdyAmJiBiZWxvd0hpZ2hlc3QpIHx8IGJlbG93TG93ZXN0KSB7XG4gICAgICByZXR1cm4gQ1NTLnN1Y2Nlc3M7XG4gICAgfVxuICAgIGVsc2UgaWYgKGFib3ZlTG93ZXN0ICYmIGJlbG93SGlnaGVzdCkge1xuICAgICAgcmV0dXJuIENTUy53YXJuaW5nO1xuICAgIH1cbiAgICBlbHNlIGlmIChhYm92ZUhpZ2hlc3QpIHtcbiAgICAgIHJldHVybiBDU1MuZGFuZ2VyO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHJldHVybiBDU1Muc3VjY2VzcztcbiAgICB9XG4gIH1cbiAgaW50ZXJzZWN0cyhlbDEsIGVsMikge1xuICAgIHJldHVybiBlbDEgJiYgZWwyICYmIGludGVyc2VjdHMoZWwxLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBlbDIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpO1xuICB9XG4gIGRldGVybWluZVZpc2libGVMYWJlbHMoKSB7XG4gICAgY29uc3QgeyBtaW5MYWJlbEVsLCBsb3dMYWJlbEVsLCBoaWdoTGFiZWxFbCwgbWF4TGFiZWxFbCB9ID0gdGhpcztcbiAgICBjb25zdCBoaWdoTWF4T3ZlcmxhcCA9IHRoaXMuaW50ZXJzZWN0cyhoaWdoTGFiZWxFbCwgbWF4TGFiZWxFbCk7XG4gICAgY29uc3QgbG93SGlnaE92ZXJsYXAgPSB0aGlzLmludGVyc2VjdHMobG93TGFiZWxFbCwgaGlnaExhYmVsRWwpO1xuICAgIGNvbnN0IGxvd01heE92ZXJsYXAgPSB0aGlzLmludGVyc2VjdHMobG93TGFiZWxFbCwgbWF4TGFiZWxFbCk7XG4gICAgY29uc3QgbWluSGlnaE92ZXJsYXAgPSB0aGlzLmludGVyc2VjdHMobWluTGFiZWxFbCwgaGlnaExhYmVsRWwpO1xuICAgIGNvbnN0IG1pbkxvd092ZXJsYXAgPSB0aGlzLmludGVyc2VjdHMobWluTGFiZWxFbCwgbG93TGFiZWxFbCk7XG4gICAgY29uc3QgbWluTWF4T3ZlcmxhcCA9IHRoaXMuaW50ZXJzZWN0cyhtaW5MYWJlbEVsLCBtYXhMYWJlbEVsKTtcbiAgICBjb25zdCBoaWRkZW5DbGFzcyA9IENTUy5sYWJlbEhpZGRlbjtcbiAgICBpZiAobG93TGFiZWxFbCkge1xuICAgICAgaWYgKG1pbkxvd092ZXJsYXAgfHwgbG93TWF4T3ZlcmxhcCB8fCBsb3dIaWdoT3ZlcmxhcCkge1xuICAgICAgICBsb3dMYWJlbEVsLmNsYXNzTGlzdC5hZGQoaGlkZGVuQ2xhc3MpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGxvd0xhYmVsRWwuY2xhc3NMaXN0LnJlbW92ZShoaWRkZW5DbGFzcyk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChoaWdoTGFiZWxFbCkge1xuICAgICAgaWYgKG1pbkhpZ2hPdmVybGFwIHx8IGxvd01heE92ZXJsYXAgfHwgaGlnaE1heE92ZXJsYXApIHtcbiAgICAgICAgaGlnaExhYmVsRWwuY2xhc3NMaXN0LmFkZChoaWRkZW5DbGFzcyk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgaGlnaExhYmVsRWwuY2xhc3NMaXN0LnJlbW92ZShoaWRkZW5DbGFzcyk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChtaW5MYWJlbEVsICYmIG1heExhYmVsRWwpIHtcbiAgICAgIGlmIChtaW5NYXhPdmVybGFwKSB7XG4gICAgICAgIG1heExhYmVsRWwuY2xhc3NMaXN0LmFkZChoaWRkZW5DbGFzcyk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgbWF4TGFiZWxFbC5jbGFzc0xpc3QucmVtb3ZlKGhpZGRlbkNsYXNzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgZGV0ZXJtaW5lVmFsdWVMYWJlbFBvc2l0aW9uKCkge1xuICAgIGNvbnN0IHsgdmFsdWVMYWJlbEVsLCBtZXRlckNvbnRhaW5lckVsLCBjdXJyZW50UGVyY2VudCB9ID0gdGhpcztcbiAgICBjb25zdCB2YWx1ZVBvc2l0aW9uID0gY3VycmVudFBlcmNlbnQgPiAxMDAgPyAxMDAgOiBjdXJyZW50UGVyY2VudCA+IDAgPyBjdXJyZW50UGVyY2VudCA6IDA7XG4gICAgY29uc3QgdmFsdWVMYWJlbFdpZHRoID0gdmFsdWVMYWJlbEVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuICAgIGNvbnN0IGNvbnRhaW5lcldpZHRoID0gbWV0ZXJDb250YWluZXJFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbiAgICBjb25zdCBsYWJlbFdpZHRoUGVyY2VudCA9ICgxMDAgKiAodmFsdWVMYWJlbFdpZHRoIC0gMCkpIC8gKGNvbnRhaW5lcldpZHRoIC0gMCk7XG4gICAgaWYgKHZhbHVlUG9zaXRpb24gKyBsYWJlbFdpZHRoUGVyY2VudCA+PSAxMDApIHtcbiAgICAgIHZhbHVlTGFiZWxFbC5zdHlsZS5pbnNldElubGluZUVuZCA9IFwiMCVcIjtcbiAgICAgIHZhbHVlTGFiZWxFbC5zdHlsZS5yZW1vdmVQcm9wZXJ0eShcImluc2V0LWlubGluZS1zdGFydFwiKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB2YWx1ZUxhYmVsRWwuc3R5bGUuaW5zZXRJbmxpbmVTdGFydCA9IGAke3ZhbHVlUG9zaXRpb259JSBgO1xuICAgICAgdmFsdWVMYWJlbEVsLnN0eWxlLnJlbW92ZVByb3BlcnR5KFwiaW5zZXQtaW5saW5lLWVuZFwiKTtcbiAgICB9XG4gIH1cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvL1xuICAvLyAgUmVuZGVyIE1ldGhvZHNcbiAgLy9cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICByZW5kZXJNZXRlckZpbGwoKSB7XG4gICAgY29uc3QgeyBjdXJyZW50UGVyY2VudCwgZmlsbFR5cGUgfSA9IHRoaXM7XG4gICAgY29uc3Qga2luZENsYXNzID0gdGhpcy5nZXRNZXRlcktpbmRDc3NDbGFzcygpO1xuICAgIHJldHVybiAoaChcImRpdlwiLCB7IGNsYXNzOiB7IFtDU1MuZmlsbF06IHRydWUsIFtraW5kQ2xhc3NdOiBmaWxsVHlwZSAhPT0gXCJzaW5nbGVcIiB9LCBzdHlsZTogeyB3aWR0aDogYCR7Y3VycmVudFBlcmNlbnR9JWAgfSB9KSk7XG4gIH1cbiAgcmVuZGVyUmFuZ2VMaW5lKHBvc2l0aW9uKSB7XG4gICAgY29uc3Qgc3R5bGUgPSB7IGluc2V0SW5saW5lU3RhcnQ6IGAke3Bvc2l0aW9ufSVgIH07XG4gICAgcmV0dXJuIGgoXCJkaXZcIiwgeyBjbGFzczogQ1NTLnN0ZXBMaW5lLCBzdHlsZTogc3R5bGUgfSk7XG4gIH1cbiAgcmVuZGVyVmFsdWVMYWJlbCgpIHtcbiAgICBjb25zdCB7IGN1cnJlbnRQZXJjZW50LCB2YWx1ZUxhYmVsVHlwZSwgdW5pdExhYmVsLCB2YWx1ZSB9ID0gdGhpcztcbiAgICBjb25zdCBsYWJlbCA9IHRoaXMuZm9ybWF0TGFiZWwodmFsdWVMYWJlbFR5cGUgPT09IFwicGVyY2VudFwiID8gY3VycmVudFBlcmNlbnQgLyAxMDAgOiB2YWx1ZSB8fCAwLCB2YWx1ZUxhYmVsVHlwZSk7XG4gICAgcmV0dXJuIChoKFwiZGl2XCIsIHsgY2xhc3M6IHsgW0NTUy5sYWJlbF06IHRydWUsIFtDU1MubGFiZWxWYWx1ZV06IHRydWUgfSwga2V5OiBcImxvdy1sYWJlbC1saW5lXCIsXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QvanN4LXNvcnQtcHJvcHNcbiAgICAgIHJlZjogKGVsKSA9PiAodGhpcy52YWx1ZUxhYmVsRWwgPSBlbCkgfSwgbGFiZWwsIHVuaXRMYWJlbCAmJiB2YWx1ZUxhYmVsVHlwZSAhPT0gXCJwZXJjZW50XCIgJiYgKGgoXCJzcGFuXCIsIHsgY2xhc3M6IENTUy51bml0TGFiZWwgfSwgXCJcXHUwMEEwXCIsIHVuaXRMYWJlbCkpKSk7XG4gIH1cbiAgcmVuZGVyTWluTGFiZWwoKSB7XG4gICAgY29uc3QgeyByYW5nZUxhYmVsVHlwZSwgbWluLCBtaW5QZXJjZW50LCB1bml0TGFiZWwgfSA9IHRoaXM7XG4gICAgY29uc3Qgc3R5bGUgPSB7IGluc2V0SW5saW5lU3RhcnQ6IGAke21pblBlcmNlbnR9JWAgfTtcbiAgICBjb25zdCBsYWJlbE1pbiA9IHRoaXMuZm9ybWF0TGFiZWwocmFuZ2VMYWJlbFR5cGUgPT09IFwicGVyY2VudFwiID8gbWluUGVyY2VudCA6IG1pbiwgcmFuZ2VMYWJlbFR5cGUpO1xuICAgIHJldHVybiAoaChcImRpdlwiLCB7IGNsYXNzOiB7IFtDU1MubGFiZWxdOiB0cnVlLCBbQ1NTLmxhYmVsUmFuZ2VdOiB0cnVlIH0sIGtleTogXCJtaW4tbGFiZWwtbGluZVwiLCBzdHlsZTogc3R5bGUsXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QvanN4LXNvcnQtcHJvcHNcbiAgICAgIHJlZjogKGVsKSA9PiAodGhpcy5taW5MYWJlbEVsID0gZWwpIH0sIGxhYmVsTWluLCB1bml0TGFiZWwgJiYgcmFuZ2VMYWJlbFR5cGUgIT09IFwicGVyY2VudFwiICYmIChoKFwic3BhblwiLCB7IGNsYXNzOiBDU1MudW5pdExhYmVsIH0sIFwiXFx1MDBBMFwiLCB1bml0TGFiZWwpKSkpO1xuICB9XG4gIHJlbmRlckxvd0xhYmVsKCkge1xuICAgIGNvbnN0IHsgcmFuZ2VMYWJlbFR5cGUsIGxvdywgbG93UGVyY2VudCwgaGlnaFBlcmNlbnQsIGxhYmVsRmxpcFByb3hpbWl0eSB9ID0gdGhpcztcbiAgICBjb25zdCBsYWJlbCA9IGxvd1xuICAgICAgPyB0aGlzLmZvcm1hdExhYmVsKHJhbmdlTGFiZWxUeXBlID09PSBcInBlcmNlbnRcIiA/IGxvd1BlcmNlbnQgLyAxMDAgOiBsb3csIHJhbmdlTGFiZWxUeXBlKVxuICAgICAgOiBcIlwiO1xuICAgIGNvbnN0IHN0eWxlRGVmYXVsdCA9IHsgaW5zZXRJbmxpbmVTdGFydDogYCR7bG93UGVyY2VudH0lYCB9O1xuICAgIGNvbnN0IHN0eWxlRmxpcHBlZCA9IHsgaW5zZXRJbmxpbmVFbmQ6IGAkezEwMCAtIGxvd1BlcmNlbnR9JWAgfTtcbiAgICBjb25zdCBzdHlsZSA9IChoaWdoUGVyY2VudCAtIGxvd1BlcmNlbnQpIC8gMTAwIDwgbGFiZWxGbGlwUHJveGltaXR5ID8gc3R5bGVGbGlwcGVkIDogc3R5bGVEZWZhdWx0O1xuICAgIHJldHVybiAoaChcImRpdlwiLCB7IGNsYXNzOiB7IFtDU1MubGFiZWxdOiB0cnVlLCBbQ1NTLmxhYmVsUmFuZ2VdOiB0cnVlIH0sIGtleTogXCJsb3ctbGFiZWwtbGluZVwiLCBzdHlsZTogc3R5bGUsXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QvanN4LXNvcnQtcHJvcHNcbiAgICAgIHJlZjogKGVsKSA9PiAodGhpcy5sb3dMYWJlbEVsID0gZWwpIH0sIGxhYmVsKSk7XG4gIH1cbiAgcmVuZGVySGlnaExhYmVsKCkge1xuICAgIGNvbnN0IHsgcmFuZ2VMYWJlbFR5cGUsIGhpZ2gsIGhpZ2hQZXJjZW50LCBsYWJlbEZsaXBNYXggfSA9IHRoaXM7XG4gICAgY29uc3QgbGFiZWwgPSBoaWdoXG4gICAgICA/IHRoaXMuZm9ybWF0TGFiZWwocmFuZ2VMYWJlbFR5cGUgPT09IFwicGVyY2VudFwiID8gaGlnaFBlcmNlbnQgLyAxMDAgOiBoaWdoLCByYW5nZUxhYmVsVHlwZSlcbiAgICAgIDogXCJcIjtcbiAgICBjb25zdCBzdHlsZURlZmF1bHQgPSB7IGluc2V0SW5saW5lU3RhcnQ6IGAke2hpZ2hQZXJjZW50fSVgIH07XG4gICAgY29uc3Qgc3R5bGVGbGlwcGVkID0geyBpbnNldElubGluZUVuZDogYCR7MTAwIC0gaGlnaFBlcmNlbnR9JWAgfTtcbiAgICBjb25zdCBzdHlsZSA9IGhpZ2hQZXJjZW50IC8gMTAwID49IGxhYmVsRmxpcE1heCA/IHN0eWxlRmxpcHBlZCA6IHN0eWxlRGVmYXVsdDtcbiAgICByZXR1cm4gKGgoXCJkaXZcIiwgeyBjbGFzczogeyBbQ1NTLmxhYmVsXTogdHJ1ZSwgW0NTUy5sYWJlbFJhbmdlXTogdHJ1ZSB9LCBrZXk6IFwiaGlnaC1sYWJlbC1saW5lXCIsIHN0eWxlOiBzdHlsZSxcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC9qc3gtc29ydC1wcm9wc1xuICAgICAgcmVmOiAoZWwpID0+ICh0aGlzLmhpZ2hMYWJlbEVsID0gZWwpIH0sIGxhYmVsKSk7XG4gIH1cbiAgcmVuZGVyTWF4TGFiZWwoKSB7XG4gICAgY29uc3QgeyByYW5nZUxhYmVsVHlwZSwgbWF4LCBtYXhQZXJjZW50IH0gPSB0aGlzO1xuICAgIGNvbnN0IHN0eWxlID0geyBpbnNldElubGluZUVuZDogYCR7MTAwIC0gbWF4UGVyY2VudH0lYCB9O1xuICAgIGNvbnN0IGxhYmVsTWF4ID0gdGhpcy5mb3JtYXRMYWJlbChyYW5nZUxhYmVsVHlwZSA9PT0gXCJwZXJjZW50XCIgPyBtYXhQZXJjZW50IC8gMTAwIDogbWF4LCByYW5nZUxhYmVsVHlwZSk7XG4gICAgcmV0dXJuIChoKFwiZGl2XCIsIHsgY2xhc3M6IHsgW0NTUy5sYWJlbF06IHRydWUsIFtDU1MubGFiZWxSYW5nZV06IHRydWUgfSwga2V5OiBcIm1heC1sYWJlbC1saW5lXCIsIHN0eWxlOiBzdHlsZSxcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC9qc3gtc29ydC1wcm9wc1xuICAgICAgcmVmOiAoZWwpID0+ICh0aGlzLm1heExhYmVsRWwgPSBlbCkgfSwgbGFiZWxNYXgpKTtcbiAgfVxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBhcHBlYXJhbmNlLCBjdXJyZW50UGVyY2VudCwgaGlnaEFjdGl2ZSwgaGlnaFBlcmNlbnQsIGxhYmVsLCBsb3dBY3RpdmUsIGxvd1BlcmNlbnQsIG1heCwgbWF4UGVyY2VudCwgbWluLCBtaW5QZXJjZW50LCByYW5nZUxhYmVscywgcmFuZ2VMYWJlbFR5cGUsIHVuaXRMYWJlbCwgdmFsdWUsIHZhbHVlTGFiZWwsIHZhbHVlTGFiZWxUeXBlLCB9ID0gdGhpcztcbiAgICBjb25zdCB0ZXh0UGVyY2VudExhYmVsV2l0aFBlcmNlbnQgPSB0aGlzLmZvcm1hdExhYmVsKGN1cnJlbnRQZXJjZW50IC8gMTAwLCBcInBlcmNlbnRcIik7XG4gICAgY29uc3QgdGV4dFVuaXRMYWJlbCA9IGAke3ZhbHVlfSAke3VuaXRMYWJlbH1gO1xuICAgIGNvbnN0IHZhbHVlVGV4dCA9IHZhbHVlTGFiZWxUeXBlID09PSBcInBlcmNlbnRcIlxuICAgICAgPyB0ZXh0UGVyY2VudExhYmVsV2l0aFBlcmNlbnRcbiAgICAgIDogdW5pdExhYmVsXG4gICAgICAgID8gdGV4dFVuaXRMYWJlbFxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gKGgoSG9zdCwgbnVsbCwgaChcImRpdlwiLCB7IFwiYXJpYS1sYWJlbFwiOiBsYWJlbCwgXCJhcmlhLXZhbHVlbWF4XCI6IHJhbmdlTGFiZWxUeXBlID09PSBcInBlcmNlbnRcIiA/IG1heFBlcmNlbnQgOiBtYXgsIFwiYXJpYS12YWx1ZW1pblwiOiByYW5nZUxhYmVsVHlwZSA9PT0gXCJwZXJjZW50XCIgPyBtaW5QZXJjZW50IDogbWluLCBcImFyaWEtdmFsdWVub3dcIjogdmFsdWVMYWJlbFR5cGUgPT09IFwicGVyY2VudFwiID8gY3VycmVudFBlcmNlbnQgOiB2YWx1ZSwgXCJhcmlhLXZhbHVldGV4dFwiOiB2YWx1ZVRleHQsIGNsYXNzOiB7XG4gICAgICAgIFtDU1MuY29udGFpbmVyXTogdHJ1ZSxcbiAgICAgICAgW0NTUy5zdGVwc1Zpc2libGVdOiByYW5nZUxhYmVscyxcbiAgICAgICAgW0NTUy52YWx1ZVZpc2libGVdOiB2YWx1ZUxhYmVsLFxuICAgICAgICBbYXBwZWFyYW5jZV06IGFwcGVhcmFuY2UgIT09IFwib3V0bGluZS1maWxsXCIsXG4gICAgICB9LCByb2xlOiBcIm1ldGVyXCIsXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QvanN4LXNvcnQtcHJvcHNcbiAgICAgIHJlZjogKGVsKSA9PiAodGhpcy5tZXRlckNvbnRhaW5lckVsID0gZWwpIH0sIHRoaXMucmVuZGVyTWV0ZXJGaWxsKCksIHZhbHVlTGFiZWwgJiYgdGhpcy5yZW5kZXJWYWx1ZUxhYmVsKCksIGxvd0FjdGl2ZSAmJiB0aGlzLnJlbmRlclJhbmdlTGluZShsb3dQZXJjZW50KSwgaGlnaEFjdGl2ZSAmJiB0aGlzLnJlbmRlclJhbmdlTGluZShoaWdoUGVyY2VudCksIHJhbmdlTGFiZWxzICYmIHRoaXMucmVuZGVyTWluTGFiZWwoKSwgcmFuZ2VMYWJlbHMgJiYgbG93QWN0aXZlICYmIHRoaXMucmVuZGVyTG93TGFiZWwoKSwgcmFuZ2VMYWJlbHMgJiYgaGlnaEFjdGl2ZSAmJiB0aGlzLnJlbmRlckhpZ2hMYWJlbCgpLCByYW5nZUxhYmVscyAmJiB0aGlzLnJlbmRlck1heExhYmVsKCkpKSk7XG4gIH1cbiAgZ2V0IGVsKCkgeyByZXR1cm4gdGhpczsgfVxuICBzdGF0aWMgZ2V0IHdhdGNoZXJzKCkgeyByZXR1cm4ge1xuICAgIFwibWluXCI6IFtcImhhbmRsZVJhbmdlQ2hhbmdlXCJdLFxuICAgIFwibWF4XCI6IFtcImhhbmRsZVJhbmdlQ2hhbmdlXCJdLFxuICAgIFwibG93XCI6IFtcImhhbmRsZVJhbmdlQ2hhbmdlXCJdLFxuICAgIFwiaGlnaFwiOiBbXCJoYW5kbGVSYW5nZUNoYW5nZVwiXSxcbiAgICBcInZhbHVlXCI6IFtcImhhbmRsZVJhbmdlQ2hhbmdlXCJdLFxuICAgIFwicmFuZ2VMYWJlbHNcIjogW1wiaGFuZGxlTGFiZWxDaGFuZ2VcIl0sXG4gICAgXCJyYW5nZUxhYmVsVHlwZVwiOiBbXCJoYW5kbGVMYWJlbENoYW5nZVwiXSxcbiAgICBcInVuaXRMYWJlbFwiOiBbXCJoYW5kbGVMYWJlbENoYW5nZVwiXSxcbiAgICBcInZhbHVlTGFiZWxcIjogW1wiaGFuZGxlTGFiZWxDaGFuZ2VcIl0sXG4gICAgXCJ2YWx1ZUxhYmVsVHlwZVwiOiBbXCJoYW5kbGVMYWJlbENoYW5nZVwiXVxuICB9OyB9XG4gIHN0YXRpYyBnZXQgc3R5bGUoKSB7IHJldHVybiBtZXRlckNzczsgfVxufSwgWzEsIFwiY2FsY2l0ZS1tZXRlclwiLCB7XG4gICAgXCJhcHBlYXJhbmNlXCI6IFs1MTNdLFxuICAgIFwiZGlzYWJsZWRcIjogWzUxNl0sXG4gICAgXCJmaWxsVHlwZVwiOiBbNTEzLCBcImZpbGwtdHlwZVwiXSxcbiAgICBcImZvcm1cIjogWzUxM10sXG4gICAgXCJncm91cFNlcGFyYXRvclwiOiBbNTE2LCBcImdyb3VwLXNlcGFyYXRvclwiXSxcbiAgICBcImhpZ2hcIjogWzE1MzhdLFxuICAgIFwibGFiZWxcIjogWzFdLFxuICAgIFwibG93XCI6IFsxNTM4XSxcbiAgICBcIm1heFwiOiBbNTE0XSxcbiAgICBcIm1pblwiOiBbNTE0XSxcbiAgICBcIm5hbWVcIjogWzUxM10sXG4gICAgXCJudW1iZXJpbmdTeXN0ZW1cIjogWzEsIFwibnVtYmVyaW5nLXN5c3RlbVwiXSxcbiAgICBcInJhbmdlTGFiZWxzXCI6IFs1MTYsIFwicmFuZ2UtbGFiZWxzXCJdLFxuICAgIFwicmFuZ2VMYWJlbFR5cGVcIjogWzUxMywgXCJyYW5nZS1sYWJlbC10eXBlXCJdLFxuICAgIFwic2NhbGVcIjogWzUxM10sXG4gICAgXCJ1bml0TGFiZWxcIjogWzEsIFwidW5pdC1sYWJlbFwiXSxcbiAgICBcInZhbHVlXCI6IFsxMDI2XSxcbiAgICBcInZhbHVlTGFiZWxcIjogWzUxNiwgXCJ2YWx1ZS1sYWJlbFwiXSxcbiAgICBcInZhbHVlTGFiZWxUeXBlXCI6IFs1MTMsIFwidmFsdWUtbGFiZWwtdHlwZVwiXSxcbiAgICBcImN1cnJlbnRQZXJjZW50XCI6IFszMl0sXG4gICAgXCJlZmZlY3RpdmVMb2NhbGVcIjogWzMyXSxcbiAgICBcImhpZ2hBY3RpdmVcIjogWzMyXSxcbiAgICBcImhpZ2hQZXJjZW50XCI6IFszMl0sXG4gICAgXCJsb3dBY3RpdmVcIjogWzMyXSxcbiAgICBcImxvd1BlcmNlbnRcIjogWzMyXVxuICB9XSk7XG5mdW5jdGlvbiBkZWZpbmVDdXN0b21FbGVtZW50JDEoKSB7XG4gIGlmICh0eXBlb2YgY3VzdG9tRWxlbWVudHMgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgY29tcG9uZW50cyA9IFtcImNhbGNpdGUtbWV0ZXJcIl07XG4gIGNvbXBvbmVudHMuZm9yRWFjaCh0YWdOYW1lID0+IHsgc3dpdGNoICh0YWdOYW1lKSB7XG4gICAgY2FzZSBcImNhbGNpdGUtbWV0ZXJcIjpcbiAgICAgIGlmICghY3VzdG9tRWxlbWVudHMuZ2V0KHRhZ05hbWUpKSB7XG4gICAgICAgIGN1c3RvbUVsZW1lbnRzLmRlZmluZSh0YWdOYW1lLCBNZXRlcik7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgfSB9KTtcbn1cbmRlZmluZUN1c3RvbUVsZW1lbnQkMSgpO1xuXG5jb25zdCBDYWxjaXRlTWV0ZXIgPSBNZXRlcjtcbmNvbnN0IGRlZmluZUN1c3RvbUVsZW1lbnQgPSBkZWZpbmVDdXN0b21FbGVtZW50JDE7XG5cbmV4cG9ydCB7IENhbGNpdGVNZXRlciwgZGVmaW5lQ3VzdG9tRWxlbWVudCB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9