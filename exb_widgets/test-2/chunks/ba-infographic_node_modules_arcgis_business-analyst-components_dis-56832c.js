"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_ba-infographic_node_modules_arcgis_business-analyst-components_dis-56832c"],{

/***/ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/arcgis-report-list.entry.js":
/*!*********************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/arcgis-report-list.entry.js ***!
  \*********************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   arcgis_report_list: () => (/* binding */ ArcgisReportList)
/* harmony export */ });
/* harmony import */ var _index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-4e647411.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/index-4e647411.js");
/* harmony import */ var _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ElementIds-a2c40592.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/ElementIds-a2c40592.js");
/* harmony import */ var _GEClient_f71049f8_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./GEClient-f71049f8.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/GEClient-f71049f8.js");
/* harmony import */ var _arcgisReports_0c351f0a_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./arcgisReports-0c351f0a.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/arcgisReports-0c351f0a.js");





const arcgisReportListCss = ":host{display:block}calcite-tree-item{font-size:14.5pt;color:#333;font-family:Arial, Helvetica, sans-serif}.notReadyOuter{position:absolute;top:0;left:0;width:100%;height:100%}.notReadyDiv{position:absolute;top:calc(50% - 50px);left:calc(50% - 50px);width:100px;height:100px}.notReadySvg{position:absolute;top:calc(50% - 29px);left:calc(50% - 33px)}.arcgisReportsTreeItem{background-color:white;color:#585859;font-size:13pt;min-height:33px;border-bottom:solid 1px lightgray}.arcgisReportsTreeItemIcon{margin-top:-3px;margin-right:6px}calcite-tree-item[aria-selected=\"true\"]{background-color:#f6f6f6 !important}calcite-tab-title[aria-expanded=\"true\"]{background-color:#4991df;color:whitesmoke;font-size:11.5pt;margin:4px 0 1px 4px;min-width:calc(50% - 17px);border:solid 1px #4991df;border-top-left-radius:4px;border-bottom-left-radius:4px}calcite-tab-title[aria-expanded=\"false\"]{background-color:white;color:#4590e1;font-size:11.5pt;margin:4px 4px 1px 0;min-width:calc(50% - 17px);border:solid 1px #4991df;border-top-right-radius:4px;border-bottom-right-radius:4px}.arcgisReportsTreeDiv{width:100%;max-height:500px;overflow:scroll}.ba-dark{background-color:#2b2b2b !important;color:#fefefe !important}.ba-dark-item{background-color:#464646 !important;color:#fefefe !important}.ba-dark-item-selected{background-color:#363636 !important;color:#fefefe !important}";

const ArcgisReportList = class {
  constructor(hostRef) {
    (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.reportSelected = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "reportSelected", 7);
    this.reportChecked = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "reportChecked", 7);
    this.accordionInit = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "accordionInit", 7);
    this._idPrefix = 'arcgis-report-list-';
    this._containerPrefix = 'arl-container-';
    this._accordionPrefix = 'acc-';
    this._itemPrefix = 'arl-item-';
    this._groupPrefix = 'arl-group-';
    this._hasSetEnv = false;
    this._accList = ['MyInfographics', 'EsriInfographics', 'SharedInfographics', 'GalleryInfographics'];
    this._dbg = false;
    this.stSourceCountry = 'US';
    this._isInitialized = false;
    this.stMultipleChoice = false;
    this.stShowCheckboxes = true;
    this.stShowDefault = false;
    _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.A._verbose = true;
    this._groupId = _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.E.generateId(this._groupPrefix).id;
    this.langCode = 'en-us';
    this.sourceCountry = 'US';
    this.stMultipleChoice = false;
    this.stShowCheckboxes = true;
    this.stReportList = {};
    _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.B._initialize(this.langCode);
    this._instanceId = _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.E.generateId(this._idPrefix).id;
    this._infographics = {
      MyInfographics: {
        dataId: 2,
        tag: 'report-my-infographics',
        data: undefined,
        accordionId: _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.E.generateId(this._instanceId + this._accordionPrefix).id
      },
      EsriInfographics: {
        dataId: 3,
        tag: 'report-esri-infographics',
        data: undefined,
        accordionId: _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.E.generateId(this._instanceId + this._accordionPrefix).id
      },
      SharedInfographics: {
        dataId: 4,
        tag: 'report-shared-infographics',
        data: undefined,
        accordionId: _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.E.generateId(this._instanceId + this._accordionPrefix).id
      },
      GalleryInfographics: {
        dataId: 5,
        tag: 'report-gallery-infographics',
        data: undefined,
        accordionId: _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.E.generateId(this._instanceId + this._accordionPrefix).id
      }
    };
    this._onChangeQueue = {};
  }
  queryElementById(id) {
    const elem = (!this.el || !this.el.shadowRoot) ? null
      : this.el.shadowRoot.querySelector(_ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.A.fixId(id));
    return elem;
  }
  // ---------------------------------------------------------------------------------------------------
  // watches
  onEnvChanged() {
    this.stEnv = this.env;
    _GEClient_f71049f8_js__WEBPACK_IMPORTED_MODULE_2__.E.setEnvironment(this.env);
  }
  onLangCodeChanged() {
    this.stLangCode = this.langCode;
    _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.B._initialize(this.stLangCode);
  }
  onSourceCountryChanged() {
    this.stSourceCountry = this.sourceCountry;
  }
  onColorsChanged() {
    this.stColors = JSON.parse(this.colors);
  }
  onDefaultReportChanged() {
    this.stDefaultReportId = this.defaultReportId;
  }
  onSelectedReportChanged() {
    this.stSelectedReportId = this.selectedReportId;
  }
  onshowCheckboxesChanged() {
    this.stShowCheckboxes = this.showCheckboxes;
  }
  onshowDefaultChanged() {
    // this.stShowDefault = this.showDefault == 'true'
  }
  onreportListChanged() {
    // reportList comes in as {
    //   public: [ {id, title, date, isChecked }, ...]},
    //   shared: [...]
    //   user: [...]
    // }
    this.stReportList = Object.keys(this.reportList).length ? JSON.parse(this.reportList) : {};
    this.initializeTemplatesList();
  }
  async setColors(colors) {
    this.stColors = colors;
  }
  async initialize(username, token, country, language, showCheckboxes, reportList, showDefault) {
    const self = this;
    self.token = token;
    self.username = username;
    self.sourceCountry = country;
    self.langCode = language;
    self.stShowCheckboxes = !showCheckboxes ? false : true;
    self.stReportList = Object.keys(reportList).length ? JSON.parse(reportList) : {};
    if (showDefault) {
      this._tmpIgnoreDefault = true;
    }
    // self.stShowDefault = !showDefault ? false : true
    if (this._dbg) {
      console.log('%c ArcgisBaReports initialize -flags=', 'color:green;font-size:10pt;', self.stShowCheckboxes, self.stShowDefault);
    }
    (0,_arcgisReports_0c351f0a_js__WEBPACK_IMPORTED_MODULE_3__.s)(username, token); // set the ba-reports token
    // Set if GeoenrichmentUrl was optionally passed in
    if (self.geoenrichmentUrl) {
      _GEClient_f71049f8_js__WEBPACK_IMPORTED_MODULE_2__.E.setGeoenrichmentUrl(self.geoenrichmentUrl);
    }
    // Set if PortalUrl was optionally passed in
    if (self.portalUrl) {
      _GEClient_f71049f8_js__WEBPACK_IMPORTED_MODULE_2__.E.setPortalUrl(self.portalUrl);
    }
    try {
      // Fetch infographic templates from server
      let infos = await (0,_arcgisReports_0c351f0a_js__WEBPACK_IMPORTED_MODULE_3__.g)(country, false);
      if (infos) {
        self.initializeTemplatesList(infos);
      }
      else {
        self._infographics.MyInfographics.data = undefined;
        self._infographics.EsriInfographics.data = undefined;
        self._infographics.SharedInfographics.data = undefined;
        self._infographics.GalleryInfographics.data = undefined;
      }
      this._isInitialized = true;
    }
    catch (ex) {
      _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.L.show('%e', 'arcgis-report-list request for esri reports failed', ex);
    }
  }
  initializeTemplatesList(infos) {
    if (this._dbg) {
      console.log('%c REPORT LIST: init list', 'color:orange;font-size:11pt;', infos, this.stReportList);
    }
    let userReports, publicReports, sharedReports, galleryReports;
    if (Object.keys(this.stReportList).length) {
      userReports = this.stReportList.user;
      publicReports = this.stReportList.public;
      sharedReports = this.stReportList.shared;
      galleryReports = this.stReportList.gallery;
    }
    else if (infos) {
      // default list and checked states
      userReports = infos.user.map(report => { return { ...report, isChecked: false }; });
      publicReports = infos.public.map(report => { return { ...report, isChecked: true }; });
      sharedReports = infos.shared.map(report => { return { ...report, isChecked: false }; });
      galleryReports = infos.gallery.map(report => { return { ...report, isChecked: false }; });
    }
    else {
      console.log('ArcgisReportList error initializing infographic templates - no data');
      return;
    }
    this.accordionInit.emit({ user: userReports, public: publicReports, shared: sharedReports, gallery: galleryReports });
    this._infographics.MyInfographics.data = userReports;
    this._infographics.EsriInfographics.data = publicReports;
    this._infographics.SharedInfographics.data = sharedReports;
    this._infographics.GalleryInfographics.data = galleryReports;
    if (this._dbg) {
      console.log('%c REPORT LIST init end', 'color:orange;font-size:11pt;', this._infographics);
    }
  }
  _accordianItemClickHandler(ev) {
    this.onReportClicked.call(this, ev);
  }
  _accordianItemsCheckedHandler(ev) {
    this.reportChecked.emit(ev.detail);
  }
  // @Method()
  async setShowDefault(flag, defaultId) {
    if (flag) {
      this._tmpIgnoreDefault = true;
    }
    if (defaultId) {
      this._tmpIgnoreDefault = true;
    } // tmp remove this
    // this.stShowDefault = flag
    // this.stDefaultReportId = defaultId
  }
  async setMultipleChoice(flag) {
    this.stMultipleChoice = flag;
  }
  /**
   * Sets host callback for property change notifications
   * @param callback  - function supplied by host after component is instantiated
   * @param context   - object reference that is returned in the callback (to the host)
   *
   * Callback data format:
   *    {
   *      <property name>: <value>,
   *      <other prop name: value,
   *      ...
   *    }
   */
  async onPropChange(callback, context) {
    this._onChangeCallback = { fn: callback, ctx: context };
  }
  async setColorTheme(name) {
    if (name && _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.A.hasText(name) && this.el) {
      this.stColorTheme = name.trim().toLowerCase();
      const n = name.trim().toLowerCase();
      if (n === 'light') {
        this._accordionTheme = n;
        this.el.style.setProperty('--calcite-ui-brand', '#007ac2');
        this.el.style.setProperty('--calcite-ui-brand-hover', '#00619b');
        this.el.style.setProperty('--calcite-ui-brand-press', '#004874');
        this.el.style.setProperty('--calcite-ui-background', '#f8f8f8');
        this.el.style.setProperty('--calcite-ui-foreground-1', '#ffffff');
        this.el.style.setProperty('--calcite-ui-foreground-2', '#f3f3f3');
        this.el.style.setProperty('--calcite-ui-foreground-3', '#eaeaea');
        this.el.style.setProperty('--calcite-ui-text-1', '#151515');
        this.el.style.setProperty('--calcite-ui-text-2', '#4a4a4a');
        this.el.style.setProperty('--calcite-ui-text-3', '#6a6a6a');
        this.el.style.setProperty('--calcite-ui-text-inverse', '#ffffff');
        this.el.style.setProperty('--calcite-ui-text-link', '#00619b');
        this.el.style.setProperty('--calcite-ui-border-1', '#cacaca');
        this.el.style.setProperty('--calcite-ui-border-2', '#d4d4d4');
        this.el.style.setProperty('--calcite-ui-border-3', '#dfdfdf');
        this.el.style.setProperty('--calcite-ui-border-input', '#949494');
        this.el.style.setProperty('--calcite-ui-info', '#00619b');
        this.el.style.setProperty('--calcite-ui-success', '#35ac46');
      }
      else if (n === 'dark') {
        this._accordionTheme = n;
        this.el.style.setProperty('--calcite-ui-brand', '#009af2');
        this.el.style.setProperty('--calcite-ui-brand-hover', '#007ac2');
        this.el.style.setProperty('--calcite-ui-brand-press', '#00619b');
        this.el.style.setProperty('--calcite-ui-background', '#353535');
        this.el.style.setProperty('--calcite-ui-foreground-1', '#2b2b2b');
        this.el.style.setProperty('--calcite-ui-foreground-2', '#202020');
        this.el.style.setProperty('--calcite-ui-foreground-3', '#151515');
        this.el.style.setProperty('--calcite-ui-text-1', '#ffffff');
        this.el.style.setProperty('--calcite-ui-text-2', '#bfbfbf');
        this.el.style.setProperty('--calcite-ui-text-3', '#9f9f9f');
        this.el.style.setProperty('--calcite-ui-text-inverse', '#151515');
        this.el.style.setProperty('--calcite-ui-text-link', '#00a0ff');
        this.el.style.setProperty('--calcite-ui-border-1', '#555555');
        this.el.style.setProperty('--calcite-ui-border-2', '#4a4a4a');
        this.el.style.setProperty('--calcite-ui-border-3', '#404040');
        this.el.style.setProperty('--calcite-ui-border-input', '#757575');
        this.el.style.setProperty('--calcite-ui-info', '#00a0ff');
        this.el.style.setProperty('--calcite-ui-success', '#36da43');
      }
      // @ts-ignore
      this._getShadowAccordion('MyInfographics').setColorTheme(n);
      // @ts-ignore
      this._getShadowAccordion('EsriInfographics').setColorTheme(n);
      // @ts-ignore
      this._getShadowAccordion('SharedInfographics').setColorTheme(n);
      // @ts-ignore
      this._getShadowAccordion('GalleryInfographics').setColorTheme(n);
    }
  }
  // @Method()
  async setSelectedId(id) {
    this.stSelectedReportId = id;
    this._setAccordionsReportId();
  }
  async onDefaultReportChange(callback, context) {
    this._onDefaultReportCallback = { fn: callback, ctx: context };
  }
  async onAccordionItemsChecked(callback, context) {
    this._onCheckboxChangeCallback = { fn: callback, ctx: context };
  }
  // infographic tree default report id changed
  reportSelectedEventHandler(e) {
    const result = { reportId: e.detail.reportId, name: e.detail.name };
    if (this._dbg) {
      console.log('REPORT LIST DEFAULT IG CHANGED=', result);
    }
    const cb = this._onDefaultReportCallback;
    if (cb && typeof cb.fn === 'function') {
      cb.fn.call(cb.ctx, result);
    }
  }
  _getShadowAccordion(name) {
    const id = this._infographics[name].accordionId;
    const elem = (this.el?.shadowRoot) ? this.el.shadowRoot.getElementById(id) : null;
    return elem;
  }
  _setAccordionsReportId() {
    const self = this;
    if (this.stSelectedReportId) {
      this._accList.forEach((a) => {
        const accElem = self._getShadowAccordion(a);
        if (accElem) {
          // @ts-ignore
          accElem.setSelectedId(self.stSelectedReportId);
        }
      });
    }
  }
  _setAccordionsCheckbox() {
    const self = this;
    this._accList.forEach((a) => {
      const accElem = self._getShadowAccordion(a);
      if (accElem) {
        // @ts-ignore
        accElem.setShowCheckbox(self.stShowCheckboxes);
      }
    });
  }
  _setAccordionsDefault() {
    // const self = this
    // if (this.stShowDefault) {
    //   const id = this.stDefaultReportId
    //   this._accList.forEach((a) => {
    //     const accElem = self._getShadowAccordion(a)
    //     if (accElem) {
    //       // @ts-ignore
    //       accElem.setShowDefault(true, id)
    //     }
    //   })
    // }
  }
  /**
   * Filters out multiple rapid events of the same type.  The callback
   * function will be called if no new events have happened during the
   * 'wait' time.
   * @param callback - your function to call when the events have settled
   * @param wait     - milliseconds delay (ex: 250)
   */
  _debounce2(callback, wait) {
    const self = this;
    const delayedCall = function () {
      self._debounceTimer = null;
      callback.apply(self);
    };
    // everytime _debounce2 is called we kill the previous timer
    if (self._debounceTimer)
      clearTimeout(self._debounceTimer);
    self._debounceTimer = setTimeout(delayedCall, wait);
  }
  _onFilteredPropChanged() {
    if (this._onChangeCallback)
      this._onChangeCallback.fn(this._onChangeCallback.ctx, this._onChangeQueue);
    // clear queue
    this._onChangeQueue = {};
  }
  /**
   * Function called by this component internally when a Prop changes
   * @param name  - of Prop
   * @param value - value after change
   */
  _onPropChanged(name, value) {
    // Add name/value to queue
    // Subsequent calls with the same name/value just updates
    // the value until the callback clears the queue
    this._onChangeQueue[name] = value;
    this._debounce2(this._onFilteredPropChanged, 250);
  }
  onReportClicked(e) {
    let id = e.detail.item.id;
    this.setReportId(id, e.detail.item.name);
  }
  setReportId(newValue, name) {
    const self = this;
    this.selectedReportId = newValue;
    this.reportSelected.emit({ id: self.selectedReportId, name: name });
    this._onPropChanged('reportId', this.selectedReportId);
  }
  async componentWillLoad() {
    this.stColors = this.colors;
    if (!this._hasSetEnv && this.env) {
      this._hasSetEnv = true;
      this.stEnv = this.env;
      _GEClient_f71049f8_js__WEBPACK_IMPORTED_MODULE_2__.E.setEnvironment(this.env);
    }
    this.stShowCheckboxes = this.showCheckboxes;
    this.stSelectedReportId = this.selectedReportId;
    // this.stShowDefault = this.showDefault == 'true'
    this.stDefaultReportId = this.defaultReportId || 'f9d96323b8cf4be9b052ee33fcdb6675'; // debug only
  }
  componentDidLoad() {
    const self = this;
    if (_ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.A.hasText(this.colors)) {
      this.stColors = _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.A.parseThemeString(this.colors);
    }
    if (self.stColors) {
      self.el.style.setProperty('--calcite-ui-brand', self.stColors.brand);
      self.el.style.setProperty('--calcite-ui-foreground-1', self.stColors.foreground1);
      self.el.style.setProperty('--calcite-ui-foreground-2', self.stColors.foreground2);
      self.el.style.setProperty('--calcite-ui-foreground-3', self.stColors.foreground2);
      self.el.style.setProperty('--calcite-ui-text-1', self.stColors.text1);
      self.el.style.setProperty('--calcite-ui-text-2', self.stColors.text2);
      self.el.style.setProperty('--calcite-ui-text-3', self.stColors.text3);
      self.el.style.setProperty('--calcite-ui-border-2', self.stColors.border2);
      self.el.style.setProperty('--calcite-accordion-item-background', self.stColors.accordionBackground);
      self.el.style.setProperty('--calcite-accordion-item-foreground', self.stColors.accordionForeground);
    }
    // if (self.stShowDefault) {
    //   self._setAccordionsDefault()
    // }
  }
  componentDidUpdate() {
    this._setAccordionsReportId();
    // if (this.stShowDefault) {
    //   this._setAccordionsDefault()
    // }
    if (this.stShowCheckboxes) {
      this._setAccordionsCheckbox();
    }
  }
  render() {
    if (!this._isInitialized)
      return;
    const self = this;
    return ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", null, self.renderList('MyInfographics'), self.renderList('EsriInfographics'), self.renderList('SharedInfographics'), self.renderList('GalleryInfographics')));
  }
  renderList(name) {
    const self = this;
    const multi = self.stMultipleChoice.toString();
    const tags = {
      'MyInfographics': 'report-my-infographics',
      'EsriInfographics': 'report-esri-infographics',
      'SharedInfographics': 'report-shared-infographics',
      'GalleryInfographics': 'report-gallery-infographics'
    };
    const reports = self._infographics[name].data;
    if (this._dbg) {
      console.log('%c REPORT LIST renderList', 'color:orange;font-size:11pt;', name, reports);
    }
    if (reports && reports.length > 0) {
      let arr = [];
      if ((multi == 'true') && reports.length > 4) {
        // Add 'All' row with checkbox
        let a = {
          id: -1,
          name: _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.B.i18n('dropdown-all'),
          icon: 'file-text',
          usesCheckbox: true,
          isChecked: (name == 'EsriInfographics')
        };
        arr.push(a);
      }
      reports.forEach(function (item) {
        let row = {
          id: item.id,
          name: item.title,
          date: item.date,
          isChecked: item.isChecked,
          icon: 'file-text'
        };
        if (multi == 'true') {
          row.usesCheckbox = true;
          //row.isChecked = (name == 'EsriInfographics')
        }
        arr.push(row);
      });
      const content = JSON.stringify(arr);
      const displayName = _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.B.i18n(tags[name]);
      const accId = self._infographics[name].accordionId;
      if (this._dbg) {
        console.log('%c REPORTS render: ', 'color:green;font-size;11pt', this.stShowCheckboxes, this.stShowDefault, content);
      }
      // create an accordion for this level with all records
      return ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("ba-accordion", { id: accId, class: "reportList", displayname: displayName, reportsGroupId: name, content: content, showCheckboxes: this.stShowCheckboxes,
        //  showDefault={this.stShowDefault.toString()}
        //  defaultReportId={this.stDefaultReportId}
        // removing reportList prop, use content only
        //reportList={JSON.stringify(this.stReportList)}
        selectedId: this.stSelectedReportId, onAccordionItemClicked: ev => this._accordianItemClickHandler(ev), onAccordionItemsChecked: (ev) => this._accordianItemsCheckedHandler(ev) }));
    }
    return '';
  }
  get el() { return (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.g)(this); }
  static get watchers() { return {
    "env": ["onEnvChanged"],
    "langCode": ["onLangCodeChanged"],
    "sourceCountry": ["onSourceCountryChanged"],
    "colors": ["onColorsChanged"],
    "defaultReportId": ["onDefaultReportChanged"],
    "selectedReportId": ["onSelectedReportChanged"],
    "showCheckboxes": ["onshowCheckboxesChanged"],
    "showDefault": ["onshowDefaultChanged"],
    "reportList": ["onreportListChanged"]
  }; }
};
ArcgisReportList.style = arcgisReportListCss;



//# sourceMappingURL=arcgis-report-list.entry.js.map

/***/ }),

/***/ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/arcgisReports-0c351f0a.js":
/*!*******************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/arcgisReports-0c351f0a.js ***!
  \*******************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   g: () => (/* binding */ getInfographicTemplatesList),
/* harmony export */   s: () => (/* binding */ setToken)
/* harmony export */ });
/* harmony import */ var _GEClient_f71049f8_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./GEClient-f71049f8.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/GEClient-f71049f8.js");
/* harmony import */ var _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ElementIds-a2c40592.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/ElementIds-a2c40592.js");



function setToken(username, token) {
    try {
        if (username != null && username.length > 0) {
            if (token != null && token.length > 0) {
                _GEClient_f71049f8_js__WEBPACK_IMPORTED_MODULE_0__.T.setToken(username, token);
                return _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.B.i18n('ok');
            }
            else {
                return _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.B.i18n('invalid-token');
            }
        }
        else {
            return _ElementIds_a2c40592_js__WEBPACK_IMPORTED_MODULE_1__.B.i18n('invalid-username');
        }
    }
    catch (ex) {
        return ex;
    }
}
async function getInfographicTemplatesList(countryCode, full = false) {
    return await _GEClient_f71049f8_js__WEBPACK_IMPORTED_MODULE_0__.G.getInfographicTemplatesList(countryCode, full);
}



//# sourceMappingURL=arcgisReports-0c351f0a.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYmEtaW5mb2dyYXBoaWNfbm9kZV9tb2R1bGVzX2FyY2dpc19idXNpbmVzcy1hbmFseXN0LWNvbXBvbmVudHNfZGlzLTU2ODMyYy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFrRztBQUNXO0FBQ2xEO0FBQ21DOztBQUU5RixtQ0FBbUMsY0FBYyxrQkFBa0IsaUJBQWlCLFdBQVcseUNBQXlDLGVBQWUsa0JBQWtCLE1BQU0sT0FBTyxXQUFXLFlBQVksYUFBYSxrQkFBa0IscUJBQXFCLHNCQUFzQixZQUFZLGFBQWEsYUFBYSxrQkFBa0IscUJBQXFCLHNCQUFzQix1QkFBdUIsdUJBQXVCLGNBQWMsZUFBZSxnQkFBZ0Isa0NBQWtDLDJCQUEyQixnQkFBZ0IsaUJBQWlCLDBDQUEwQyxvQ0FBb0MsMENBQTBDLHlCQUF5QixpQkFBaUIsaUJBQWlCLHFCQUFxQiwyQkFBMkIseUJBQXlCLDJCQUEyQiw4QkFBOEIsMkNBQTJDLHVCQUF1QixjQUFjLGlCQUFpQixxQkFBcUIsMkJBQTJCLHlCQUF5Qiw0QkFBNEIsK0JBQStCLHNCQUFzQixXQUFXLGlCQUFpQixnQkFBZ0IsU0FBUyxvQ0FBb0MseUJBQXlCLGNBQWMsb0NBQW9DLHlCQUF5Qix1QkFBdUIsb0NBQW9DLHlCQUF5Qjs7QUFFcDNDO0FBQ0E7QUFDQSxJQUFJLHFEQUFnQjtBQUNwQiwwQkFBMEIscURBQVc7QUFDckMseUJBQXlCLHFEQUFXO0FBQ3BDLHlCQUF5QixxREFBVztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksc0RBQVE7QUFDWixvQkFBb0Isc0RBQVU7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksc0RBQWlCO0FBQ3JCLHVCQUF1QixzREFBVTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHNEQUFVO0FBQy9CLE9BQU87QUFDUDtBQUNB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QUF5QjtBQUN6Qiw2QkFBNkI7QUFDN0I7QUFDQSxzQkFBc0I7QUFDdEIseUxBQXlMO0FBQ3pMO0FBQ0E7QUFDQTtBQUNBLGFBQWEsT0FBTyxxREFBVTtBQUM5QiwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVrRDs7QUFFbEQ7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDcmYyRTtBQUNUOztBQUVsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixvREFBYTtBQUM3Qix1QkFBdUIsc0RBQWlCO0FBQ3hDO0FBQ0E7QUFDQSx1QkFBdUIsc0RBQWlCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixzREFBaUI7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsb0RBQVE7QUFDekI7O0FBRTJEOztBQUUzRCIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYmEtaW5mb2dyYXBoaWMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYnVzaW5lc3MtYW5hbHlzdC1jb21wb25lbnRzL2Rpc3Qvc3RlbmNpbC1jb21wb25lbnRzL2Rpc3QvZXNtL2FyY2dpcy1yZXBvcnQtbGlzdC5lbnRyeS5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2JhLWluZm9ncmFwaGljL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2J1c2luZXNzLWFuYWx5c3QtY29tcG9uZW50cy9kaXN0L3N0ZW5jaWwtY29tcG9uZW50cy9kaXN0L2VzbS9hcmNnaXNSZXBvcnRzLTBjMzUxZjBhLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHIgYXMgcmVnaXN0ZXJJbnN0YW5jZSwgYyBhcyBjcmVhdGVFdmVudCwgaCwgZyBhcyBnZXRFbGVtZW50IH0gZnJvbSAnLi9pbmRleC00ZTY0NzQxMS5qcyc7XG5pbXBvcnQgeyBBIGFzIEFDTFV0aWxzLCBFIGFzIEVsZW1lbnRJZHMsIEIgYXMgQmFSZXBvcnRzTGFuZ3VhZ2UsIEwgYXMgTG9neiB9IGZyb20gJy4vRWxlbWVudElkcy1hMmM0MDU5Mi5qcyc7XG5pbXBvcnQgeyBFIGFzIEVudmlyb25tZW50cyB9IGZyb20gJy4vR0VDbGllbnQtZjcxMDQ5ZjguanMnO1xuaW1wb3J0IHsgcyBhcyBzZXRUb2tlbiwgZyBhcyBnZXRJbmZvZ3JhcGhpY1RlbXBsYXRlc0xpc3QgfSBmcm9tICcuL2FyY2dpc1JlcG9ydHMtMGMzNTFmMGEuanMnO1xuXG5jb25zdCBhcmNnaXNSZXBvcnRMaXN0Q3NzID0gXCI6aG9zdHtkaXNwbGF5OmJsb2NrfWNhbGNpdGUtdHJlZS1pdGVte2ZvbnQtc2l6ZToxNC41cHQ7Y29sb3I6IzMzMztmb250LWZhbWlseTpBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmfS5ub3RSZWFkeU91dGVye3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MDt3aWR0aDoxMDAlO2hlaWdodDoxMDAlfS5ub3RSZWFkeURpdntwb3NpdGlvbjphYnNvbHV0ZTt0b3A6Y2FsYyg1MCUgLSA1MHB4KTtsZWZ0OmNhbGMoNTAlIC0gNTBweCk7d2lkdGg6MTAwcHg7aGVpZ2h0OjEwMHB4fS5ub3RSZWFkeVN2Z3twb3NpdGlvbjphYnNvbHV0ZTt0b3A6Y2FsYyg1MCUgLSAyOXB4KTtsZWZ0OmNhbGMoNTAlIC0gMzNweCl9LmFyY2dpc1JlcG9ydHNUcmVlSXRlbXtiYWNrZ3JvdW5kLWNvbG9yOndoaXRlO2NvbG9yOiM1ODU4NTk7Zm9udC1zaXplOjEzcHQ7bWluLWhlaWdodDozM3B4O2JvcmRlci1ib3R0b206c29saWQgMXB4IGxpZ2h0Z3JheX0uYXJjZ2lzUmVwb3J0c1RyZWVJdGVtSWNvbnttYXJnaW4tdG9wOi0zcHg7bWFyZ2luLXJpZ2h0OjZweH1jYWxjaXRlLXRyZWUtaXRlbVthcmlhLXNlbGVjdGVkPVxcXCJ0cnVlXFxcIl17YmFja2dyb3VuZC1jb2xvcjojZjZmNmY2ICFpbXBvcnRhbnR9Y2FsY2l0ZS10YWItdGl0bGVbYXJpYS1leHBhbmRlZD1cXFwidHJ1ZVxcXCJde2JhY2tncm91bmQtY29sb3I6IzQ5OTFkZjtjb2xvcjp3aGl0ZXNtb2tlO2ZvbnQtc2l6ZToxMS41cHQ7bWFyZ2luOjRweCAwIDFweCA0cHg7bWluLXdpZHRoOmNhbGMoNTAlIC0gMTdweCk7Ym9yZGVyOnNvbGlkIDFweCAjNDk5MWRmO2JvcmRlci10b3AtbGVmdC1yYWRpdXM6NHB4O2JvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6NHB4fWNhbGNpdGUtdGFiLXRpdGxlW2FyaWEtZXhwYW5kZWQ9XFxcImZhbHNlXFxcIl17YmFja2dyb3VuZC1jb2xvcjp3aGl0ZTtjb2xvcjojNDU5MGUxO2ZvbnQtc2l6ZToxMS41cHQ7bWFyZ2luOjRweCA0cHggMXB4IDA7bWluLXdpZHRoOmNhbGMoNTAlIC0gMTdweCk7Ym9yZGVyOnNvbGlkIDFweCAjNDk5MWRmO2JvcmRlci10b3AtcmlnaHQtcmFkaXVzOjRweDtib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czo0cHh9LmFyY2dpc1JlcG9ydHNUcmVlRGl2e3dpZHRoOjEwMCU7bWF4LWhlaWdodDo1MDBweDtvdmVyZmxvdzpzY3JvbGx9LmJhLWRhcmt7YmFja2dyb3VuZC1jb2xvcjojMmIyYjJiICFpbXBvcnRhbnQ7Y29sb3I6I2ZlZmVmZSAhaW1wb3J0YW50fS5iYS1kYXJrLWl0ZW17YmFja2dyb3VuZC1jb2xvcjojNDY0NjQ2ICFpbXBvcnRhbnQ7Y29sb3I6I2ZlZmVmZSAhaW1wb3J0YW50fS5iYS1kYXJrLWl0ZW0tc2VsZWN0ZWR7YmFja2dyb3VuZC1jb2xvcjojMzYzNjM2ICFpbXBvcnRhbnQ7Y29sb3I6I2ZlZmVmZSAhaW1wb3J0YW50fVwiO1xuXG5jb25zdCBBcmNnaXNSZXBvcnRMaXN0ID0gY2xhc3Mge1xyXG4gIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcclxuICAgIHJlZ2lzdGVySW5zdGFuY2UodGhpcywgaG9zdFJlZik7XHJcbiAgICB0aGlzLnJlcG9ydFNlbGVjdGVkID0gY3JlYXRlRXZlbnQodGhpcywgXCJyZXBvcnRTZWxlY3RlZFwiLCA3KTtcclxuICAgIHRoaXMucmVwb3J0Q2hlY2tlZCA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwicmVwb3J0Q2hlY2tlZFwiLCA3KTtcclxuICAgIHRoaXMuYWNjb3JkaW9uSW5pdCA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiYWNjb3JkaW9uSW5pdFwiLCA3KTtcclxuICAgIHRoaXMuX2lkUHJlZml4ID0gJ2FyY2dpcy1yZXBvcnQtbGlzdC0nO1xyXG4gICAgdGhpcy5fY29udGFpbmVyUHJlZml4ID0gJ2FybC1jb250YWluZXItJztcclxuICAgIHRoaXMuX2FjY29yZGlvblByZWZpeCA9ICdhY2MtJztcclxuICAgIHRoaXMuX2l0ZW1QcmVmaXggPSAnYXJsLWl0ZW0tJztcclxuICAgIHRoaXMuX2dyb3VwUHJlZml4ID0gJ2FybC1ncm91cC0nO1xyXG4gICAgdGhpcy5faGFzU2V0RW52ID0gZmFsc2U7XHJcbiAgICB0aGlzLl9hY2NMaXN0ID0gWydNeUluZm9ncmFwaGljcycsICdFc3JpSW5mb2dyYXBoaWNzJywgJ1NoYXJlZEluZm9ncmFwaGljcycsICdHYWxsZXJ5SW5mb2dyYXBoaWNzJ107XHJcbiAgICB0aGlzLl9kYmcgPSBmYWxzZTtcclxuICAgIHRoaXMuc3RTb3VyY2VDb3VudHJ5ID0gJ1VTJztcclxuICAgIHRoaXMuX2lzSW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuICAgIHRoaXMuc3RNdWx0aXBsZUNob2ljZSA9IGZhbHNlO1xyXG4gICAgdGhpcy5zdFNob3dDaGVja2JveGVzID0gdHJ1ZTtcclxuICAgIHRoaXMuc3RTaG93RGVmYXVsdCA9IGZhbHNlO1xyXG4gICAgQUNMVXRpbHMuX3ZlcmJvc2UgPSB0cnVlO1xyXG4gICAgdGhpcy5fZ3JvdXBJZCA9IEVsZW1lbnRJZHMuZ2VuZXJhdGVJZCh0aGlzLl9ncm91cFByZWZpeCkuaWQ7XHJcbiAgICB0aGlzLmxhbmdDb2RlID0gJ2VuLXVzJztcclxuICAgIHRoaXMuc291cmNlQ291bnRyeSA9ICdVUyc7XHJcbiAgICB0aGlzLnN0TXVsdGlwbGVDaG9pY2UgPSBmYWxzZTtcclxuICAgIHRoaXMuc3RTaG93Q2hlY2tib3hlcyA9IHRydWU7XHJcbiAgICB0aGlzLnN0UmVwb3J0TGlzdCA9IHt9O1xyXG4gICAgQmFSZXBvcnRzTGFuZ3VhZ2UuX2luaXRpYWxpemUodGhpcy5sYW5nQ29kZSk7XHJcbiAgICB0aGlzLl9pbnN0YW5jZUlkID0gRWxlbWVudElkcy5nZW5lcmF0ZUlkKHRoaXMuX2lkUHJlZml4KS5pZDtcclxuICAgIHRoaXMuX2luZm9ncmFwaGljcyA9IHtcclxuICAgICAgTXlJbmZvZ3JhcGhpY3M6IHtcclxuICAgICAgICBkYXRhSWQ6IDIsXHJcbiAgICAgICAgdGFnOiAncmVwb3J0LW15LWluZm9ncmFwaGljcycsXHJcbiAgICAgICAgZGF0YTogdW5kZWZpbmVkLFxyXG4gICAgICAgIGFjY29yZGlvbklkOiBFbGVtZW50SWRzLmdlbmVyYXRlSWQodGhpcy5faW5zdGFuY2VJZCArIHRoaXMuX2FjY29yZGlvblByZWZpeCkuaWRcclxuICAgICAgfSxcclxuICAgICAgRXNyaUluZm9ncmFwaGljczoge1xyXG4gICAgICAgIGRhdGFJZDogMyxcclxuICAgICAgICB0YWc6ICdyZXBvcnQtZXNyaS1pbmZvZ3JhcGhpY3MnLFxyXG4gICAgICAgIGRhdGE6IHVuZGVmaW5lZCxcclxuICAgICAgICBhY2NvcmRpb25JZDogRWxlbWVudElkcy5nZW5lcmF0ZUlkKHRoaXMuX2luc3RhbmNlSWQgKyB0aGlzLl9hY2NvcmRpb25QcmVmaXgpLmlkXHJcbiAgICAgIH0sXHJcbiAgICAgIFNoYXJlZEluZm9ncmFwaGljczoge1xyXG4gICAgICAgIGRhdGFJZDogNCxcclxuICAgICAgICB0YWc6ICdyZXBvcnQtc2hhcmVkLWluZm9ncmFwaGljcycsXHJcbiAgICAgICAgZGF0YTogdW5kZWZpbmVkLFxyXG4gICAgICAgIGFjY29yZGlvbklkOiBFbGVtZW50SWRzLmdlbmVyYXRlSWQodGhpcy5faW5zdGFuY2VJZCArIHRoaXMuX2FjY29yZGlvblByZWZpeCkuaWRcclxuICAgICAgfSxcclxuICAgICAgR2FsbGVyeUluZm9ncmFwaGljczoge1xyXG4gICAgICAgIGRhdGFJZDogNSxcclxuICAgICAgICB0YWc6ICdyZXBvcnQtZ2FsbGVyeS1pbmZvZ3JhcGhpY3MnLFxyXG4gICAgICAgIGRhdGE6IHVuZGVmaW5lZCxcclxuICAgICAgICBhY2NvcmRpb25JZDogRWxlbWVudElkcy5nZW5lcmF0ZUlkKHRoaXMuX2luc3RhbmNlSWQgKyB0aGlzLl9hY2NvcmRpb25QcmVmaXgpLmlkXHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aGlzLl9vbkNoYW5nZVF1ZXVlID0ge307XHJcbiAgfVxyXG4gIHF1ZXJ5RWxlbWVudEJ5SWQoaWQpIHtcclxuICAgIGNvbnN0IGVsZW0gPSAoIXRoaXMuZWwgfHwgIXRoaXMuZWwuc2hhZG93Um9vdCkgPyBudWxsXHJcbiAgICAgIDogdGhpcy5lbC5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoQUNMVXRpbHMuZml4SWQoaWQpKTtcclxuICAgIHJldHVybiBlbGVtO1xyXG4gIH1cclxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvLyB3YXRjaGVzXHJcbiAgb25FbnZDaGFuZ2VkKCkge1xyXG4gICAgdGhpcy5zdEVudiA9IHRoaXMuZW52O1xyXG4gICAgRW52aXJvbm1lbnRzLnNldEVudmlyb25tZW50KHRoaXMuZW52KTtcclxuICB9XHJcbiAgb25MYW5nQ29kZUNoYW5nZWQoKSB7XHJcbiAgICB0aGlzLnN0TGFuZ0NvZGUgPSB0aGlzLmxhbmdDb2RlO1xyXG4gICAgQmFSZXBvcnRzTGFuZ3VhZ2UuX2luaXRpYWxpemUodGhpcy5zdExhbmdDb2RlKTtcclxuICB9XHJcbiAgb25Tb3VyY2VDb3VudHJ5Q2hhbmdlZCgpIHtcclxuICAgIHRoaXMuc3RTb3VyY2VDb3VudHJ5ID0gdGhpcy5zb3VyY2VDb3VudHJ5O1xyXG4gIH1cclxuICBvbkNvbG9yc0NoYW5nZWQoKSB7XHJcbiAgICB0aGlzLnN0Q29sb3JzID0gSlNPTi5wYXJzZSh0aGlzLmNvbG9ycyk7XHJcbiAgfVxyXG4gIG9uRGVmYXVsdFJlcG9ydENoYW5nZWQoKSB7XHJcbiAgICB0aGlzLnN0RGVmYXVsdFJlcG9ydElkID0gdGhpcy5kZWZhdWx0UmVwb3J0SWQ7XHJcbiAgfVxyXG4gIG9uU2VsZWN0ZWRSZXBvcnRDaGFuZ2VkKCkge1xyXG4gICAgdGhpcy5zdFNlbGVjdGVkUmVwb3J0SWQgPSB0aGlzLnNlbGVjdGVkUmVwb3J0SWQ7XHJcbiAgfVxyXG4gIG9uc2hvd0NoZWNrYm94ZXNDaGFuZ2VkKCkge1xyXG4gICAgdGhpcy5zdFNob3dDaGVja2JveGVzID0gdGhpcy5zaG93Q2hlY2tib3hlcztcclxuICB9XHJcbiAgb25zaG93RGVmYXVsdENoYW5nZWQoKSB7XHJcbiAgICAvLyB0aGlzLnN0U2hvd0RlZmF1bHQgPSB0aGlzLnNob3dEZWZhdWx0ID09ICd0cnVlJ1xyXG4gIH1cclxuICBvbnJlcG9ydExpc3RDaGFuZ2VkKCkge1xyXG4gICAgLy8gcmVwb3J0TGlzdCBjb21lcyBpbiBhcyB7XHJcbiAgICAvLyAgIHB1YmxpYzogWyB7aWQsIHRpdGxlLCBkYXRlLCBpc0NoZWNrZWQgfSwgLi4uXX0sXHJcbiAgICAvLyAgIHNoYXJlZDogWy4uLl1cclxuICAgIC8vICAgdXNlcjogWy4uLl1cclxuICAgIC8vIH1cclxuICAgIHRoaXMuc3RSZXBvcnRMaXN0ID0gT2JqZWN0LmtleXModGhpcy5yZXBvcnRMaXN0KS5sZW5ndGggPyBKU09OLnBhcnNlKHRoaXMucmVwb3J0TGlzdCkgOiB7fTtcclxuICAgIHRoaXMuaW5pdGlhbGl6ZVRlbXBsYXRlc0xpc3QoKTtcclxuICB9XHJcbiAgYXN5bmMgc2V0Q29sb3JzKGNvbG9ycykge1xyXG4gICAgdGhpcy5zdENvbG9ycyA9IGNvbG9ycztcclxuICB9XHJcbiAgYXN5bmMgaW5pdGlhbGl6ZSh1c2VybmFtZSwgdG9rZW4sIGNvdW50cnksIGxhbmd1YWdlLCBzaG93Q2hlY2tib3hlcywgcmVwb3J0TGlzdCwgc2hvd0RlZmF1bHQpIHtcclxuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi50b2tlbiA9IHRva2VuO1xyXG4gICAgc2VsZi51c2VybmFtZSA9IHVzZXJuYW1lO1xyXG4gICAgc2VsZi5zb3VyY2VDb3VudHJ5ID0gY291bnRyeTtcclxuICAgIHNlbGYubGFuZ0NvZGUgPSBsYW5ndWFnZTtcclxuICAgIHNlbGYuc3RTaG93Q2hlY2tib3hlcyA9ICFzaG93Q2hlY2tib3hlcyA/IGZhbHNlIDogdHJ1ZTtcclxuICAgIHNlbGYuc3RSZXBvcnRMaXN0ID0gT2JqZWN0LmtleXMocmVwb3J0TGlzdCkubGVuZ3RoID8gSlNPTi5wYXJzZShyZXBvcnRMaXN0KSA6IHt9O1xyXG4gICAgaWYgKHNob3dEZWZhdWx0KSB7XHJcbiAgICAgIHRoaXMuX3RtcElnbm9yZURlZmF1bHQgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgLy8gc2VsZi5zdFNob3dEZWZhdWx0ID0gIXNob3dEZWZhdWx0ID8gZmFsc2UgOiB0cnVlXHJcbiAgICBpZiAodGhpcy5fZGJnKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCclYyBBcmNnaXNCYVJlcG9ydHMgaW5pdGlhbGl6ZSAtZmxhZ3M9JywgJ2NvbG9yOmdyZWVuO2ZvbnQtc2l6ZToxMHB0OycsIHNlbGYuc3RTaG93Q2hlY2tib3hlcywgc2VsZi5zdFNob3dEZWZhdWx0KTtcclxuICAgIH1cclxuICAgIHNldFRva2VuKHVzZXJuYW1lLCB0b2tlbik7IC8vIHNldCB0aGUgYmEtcmVwb3J0cyB0b2tlblxyXG4gICAgLy8gU2V0IGlmIEdlb2VucmljaG1lbnRVcmwgd2FzIG9wdGlvbmFsbHkgcGFzc2VkIGluXHJcbiAgICBpZiAoc2VsZi5nZW9lbnJpY2htZW50VXJsKSB7XHJcbiAgICAgIEVudmlyb25tZW50cy5zZXRHZW9lbnJpY2htZW50VXJsKHNlbGYuZ2VvZW5yaWNobWVudFVybCk7XHJcbiAgICB9XHJcbiAgICAvLyBTZXQgaWYgUG9ydGFsVXJsIHdhcyBvcHRpb25hbGx5IHBhc3NlZCBpblxyXG4gICAgaWYgKHNlbGYucG9ydGFsVXJsKSB7XHJcbiAgICAgIEVudmlyb25tZW50cy5zZXRQb3J0YWxVcmwoc2VsZi5wb3J0YWxVcmwpO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gRmV0Y2ggaW5mb2dyYXBoaWMgdGVtcGxhdGVzIGZyb20gc2VydmVyXHJcbiAgICAgIGxldCBpbmZvcyA9IGF3YWl0IGdldEluZm9ncmFwaGljVGVtcGxhdGVzTGlzdChjb3VudHJ5LCBmYWxzZSk7XHJcbiAgICAgIGlmIChpbmZvcykge1xyXG4gICAgICAgIHNlbGYuaW5pdGlhbGl6ZVRlbXBsYXRlc0xpc3QoaW5mb3MpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHNlbGYuX2luZm9ncmFwaGljcy5NeUluZm9ncmFwaGljcy5kYXRhID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHNlbGYuX2luZm9ncmFwaGljcy5Fc3JpSW5mb2dyYXBoaWNzLmRhdGEgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgc2VsZi5faW5mb2dyYXBoaWNzLlNoYXJlZEluZm9ncmFwaGljcy5kYXRhID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHNlbGYuX2luZm9ncmFwaGljcy5HYWxsZXJ5SW5mb2dyYXBoaWNzLmRhdGEgPSB1bmRlZmluZWQ7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5faXNJbml0aWFsaXplZCA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXgpIHtcclxuICAgICAgTG9nei5zaG93KCclZScsICdhcmNnaXMtcmVwb3J0LWxpc3QgcmVxdWVzdCBmb3IgZXNyaSByZXBvcnRzIGZhaWxlZCcsIGV4KTtcclxuICAgIH1cclxuICB9XHJcbiAgaW5pdGlhbGl6ZVRlbXBsYXRlc0xpc3QoaW5mb3MpIHtcclxuICAgIGlmICh0aGlzLl9kYmcpIHtcclxuICAgICAgY29uc29sZS5sb2coJyVjIFJFUE9SVCBMSVNUOiBpbml0IGxpc3QnLCAnY29sb3I6b3JhbmdlO2ZvbnQtc2l6ZToxMXB0OycsIGluZm9zLCB0aGlzLnN0UmVwb3J0TGlzdCk7XHJcbiAgICB9XHJcbiAgICBsZXQgdXNlclJlcG9ydHMsIHB1YmxpY1JlcG9ydHMsIHNoYXJlZFJlcG9ydHMsIGdhbGxlcnlSZXBvcnRzO1xyXG4gICAgaWYgKE9iamVjdC5rZXlzKHRoaXMuc3RSZXBvcnRMaXN0KS5sZW5ndGgpIHtcclxuICAgICAgdXNlclJlcG9ydHMgPSB0aGlzLnN0UmVwb3J0TGlzdC51c2VyO1xyXG4gICAgICBwdWJsaWNSZXBvcnRzID0gdGhpcy5zdFJlcG9ydExpc3QucHVibGljO1xyXG4gICAgICBzaGFyZWRSZXBvcnRzID0gdGhpcy5zdFJlcG9ydExpc3Quc2hhcmVkO1xyXG4gICAgICBnYWxsZXJ5UmVwb3J0cyA9IHRoaXMuc3RSZXBvcnRMaXN0LmdhbGxlcnk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChpbmZvcykge1xyXG4gICAgICAvLyBkZWZhdWx0IGxpc3QgYW5kIGNoZWNrZWQgc3RhdGVzXHJcbiAgICAgIHVzZXJSZXBvcnRzID0gaW5mb3MudXNlci5tYXAocmVwb3J0ID0+IHsgcmV0dXJuIHsgLi4ucmVwb3J0LCBpc0NoZWNrZWQ6IGZhbHNlIH07IH0pO1xyXG4gICAgICBwdWJsaWNSZXBvcnRzID0gaW5mb3MucHVibGljLm1hcChyZXBvcnQgPT4geyByZXR1cm4geyAuLi5yZXBvcnQsIGlzQ2hlY2tlZDogdHJ1ZSB9OyB9KTtcclxuICAgICAgc2hhcmVkUmVwb3J0cyA9IGluZm9zLnNoYXJlZC5tYXAocmVwb3J0ID0+IHsgcmV0dXJuIHsgLi4ucmVwb3J0LCBpc0NoZWNrZWQ6IGZhbHNlIH07IH0pO1xyXG4gICAgICBnYWxsZXJ5UmVwb3J0cyA9IGluZm9zLmdhbGxlcnkubWFwKHJlcG9ydCA9PiB7IHJldHVybiB7IC4uLnJlcG9ydCwgaXNDaGVja2VkOiBmYWxzZSB9OyB9KTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmxvZygnQXJjZ2lzUmVwb3J0TGlzdCBlcnJvciBpbml0aWFsaXppbmcgaW5mb2dyYXBoaWMgdGVtcGxhdGVzIC0gbm8gZGF0YScpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLmFjY29yZGlvbkluaXQuZW1pdCh7IHVzZXI6IHVzZXJSZXBvcnRzLCBwdWJsaWM6IHB1YmxpY1JlcG9ydHMsIHNoYXJlZDogc2hhcmVkUmVwb3J0cywgZ2FsbGVyeTogZ2FsbGVyeVJlcG9ydHMgfSk7XHJcbiAgICB0aGlzLl9pbmZvZ3JhcGhpY3MuTXlJbmZvZ3JhcGhpY3MuZGF0YSA9IHVzZXJSZXBvcnRzO1xyXG4gICAgdGhpcy5faW5mb2dyYXBoaWNzLkVzcmlJbmZvZ3JhcGhpY3MuZGF0YSA9IHB1YmxpY1JlcG9ydHM7XHJcbiAgICB0aGlzLl9pbmZvZ3JhcGhpY3MuU2hhcmVkSW5mb2dyYXBoaWNzLmRhdGEgPSBzaGFyZWRSZXBvcnRzO1xyXG4gICAgdGhpcy5faW5mb2dyYXBoaWNzLkdhbGxlcnlJbmZvZ3JhcGhpY3MuZGF0YSA9IGdhbGxlcnlSZXBvcnRzO1xyXG4gICAgaWYgKHRoaXMuX2RiZykge1xyXG4gICAgICBjb25zb2xlLmxvZygnJWMgUkVQT1JUIExJU1QgaW5pdCBlbmQnLCAnY29sb3I6b3JhbmdlO2ZvbnQtc2l6ZToxMXB0OycsIHRoaXMuX2luZm9ncmFwaGljcyk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9hY2NvcmRpYW5JdGVtQ2xpY2tIYW5kbGVyKGV2KSB7XHJcbiAgICB0aGlzLm9uUmVwb3J0Q2xpY2tlZC5jYWxsKHRoaXMsIGV2KTtcclxuICB9XHJcbiAgX2FjY29yZGlhbkl0ZW1zQ2hlY2tlZEhhbmRsZXIoZXYpIHtcclxuICAgIHRoaXMucmVwb3J0Q2hlY2tlZC5lbWl0KGV2LmRldGFpbCk7XHJcbiAgfVxyXG4gIC8vIEBNZXRob2QoKVxyXG4gIGFzeW5jIHNldFNob3dEZWZhdWx0KGZsYWcsIGRlZmF1bHRJZCkge1xyXG4gICAgaWYgKGZsYWcpIHtcclxuICAgICAgdGhpcy5fdG1wSWdub3JlRGVmYXVsdCA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBpZiAoZGVmYXVsdElkKSB7XHJcbiAgICAgIHRoaXMuX3RtcElnbm9yZURlZmF1bHQgPSB0cnVlO1xyXG4gICAgfSAvLyB0bXAgcmVtb3ZlIHRoaXNcclxuICAgIC8vIHRoaXMuc3RTaG93RGVmYXVsdCA9IGZsYWdcclxuICAgIC8vIHRoaXMuc3REZWZhdWx0UmVwb3J0SWQgPSBkZWZhdWx0SWRcclxuICB9XHJcbiAgYXN5bmMgc2V0TXVsdGlwbGVDaG9pY2UoZmxhZykge1xyXG4gICAgdGhpcy5zdE11bHRpcGxlQ2hvaWNlID0gZmxhZztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogU2V0cyBob3N0IGNhbGxiYWNrIGZvciBwcm9wZXJ0eSBjaGFuZ2Ugbm90aWZpY2F0aW9uc1xyXG4gICAqIEBwYXJhbSBjYWxsYmFjayAgLSBmdW5jdGlvbiBzdXBwbGllZCBieSBob3N0IGFmdGVyIGNvbXBvbmVudCBpcyBpbnN0YW50aWF0ZWRcclxuICAgKiBAcGFyYW0gY29udGV4dCAgIC0gb2JqZWN0IHJlZmVyZW5jZSB0aGF0IGlzIHJldHVybmVkIGluIHRoZSBjYWxsYmFjayAodG8gdGhlIGhvc3QpXHJcbiAgICpcclxuICAgKiBDYWxsYmFjayBkYXRhIGZvcm1hdDpcclxuICAgKiAgICB7XHJcbiAgICogICAgICA8cHJvcGVydHkgbmFtZT46IDx2YWx1ZT4sXHJcbiAgICogICAgICA8b3RoZXIgcHJvcCBuYW1lOiB2YWx1ZSxcclxuICAgKiAgICAgIC4uLlxyXG4gICAqICAgIH1cclxuICAgKi9cclxuICBhc3luYyBvblByb3BDaGFuZ2UoY2FsbGJhY2ssIGNvbnRleHQpIHtcclxuICAgIHRoaXMuX29uQ2hhbmdlQ2FsbGJhY2sgPSB7IGZuOiBjYWxsYmFjaywgY3R4OiBjb250ZXh0IH07XHJcbiAgfVxyXG4gIGFzeW5jIHNldENvbG9yVGhlbWUobmFtZSkge1xyXG4gICAgaWYgKG5hbWUgJiYgQUNMVXRpbHMuaGFzVGV4dChuYW1lKSAmJiB0aGlzLmVsKSB7XHJcbiAgICAgIHRoaXMuc3RDb2xvclRoZW1lID0gbmFtZS50cmltKCkudG9Mb3dlckNhc2UoKTtcclxuICAgICAgY29uc3QgbiA9IG5hbWUudHJpbSgpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgIGlmIChuID09PSAnbGlnaHQnKSB7XHJcbiAgICAgICAgdGhpcy5fYWNjb3JkaW9uVGhlbWUgPSBuO1xyXG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS1icmFuZCcsICcjMDA3YWMyJyk7XHJcbiAgICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYWxjaXRlLXVpLWJyYW5kLWhvdmVyJywgJyMwMDYxOWInKTtcclxuICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhbGNpdGUtdWktYnJhbmQtcHJlc3MnLCAnIzAwNDg3NCcpO1xyXG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS1iYWNrZ3JvdW5kJywgJyNmOGY4ZjgnKTtcclxuICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhbGNpdGUtdWktZm9yZWdyb3VuZC0xJywgJyNmZmZmZmYnKTtcclxuICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhbGNpdGUtdWktZm9yZWdyb3VuZC0yJywgJyNmM2YzZjMnKTtcclxuICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhbGNpdGUtdWktZm9yZWdyb3VuZC0zJywgJyNlYWVhZWEnKTtcclxuICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhbGNpdGUtdWktdGV4dC0xJywgJyMxNTE1MTUnKTtcclxuICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhbGNpdGUtdWktdGV4dC0yJywgJyM0YTRhNGEnKTtcclxuICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhbGNpdGUtdWktdGV4dC0zJywgJyM2YTZhNmEnKTtcclxuICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhbGNpdGUtdWktdGV4dC1pbnZlcnNlJywgJyNmZmZmZmYnKTtcclxuICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhbGNpdGUtdWktdGV4dC1saW5rJywgJyMwMDYxOWInKTtcclxuICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhbGNpdGUtdWktYm9yZGVyLTEnLCAnI2NhY2FjYScpO1xyXG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS1ib3JkZXItMicsICcjZDRkNGQ0Jyk7XHJcbiAgICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYWxjaXRlLXVpLWJvcmRlci0zJywgJyNkZmRmZGYnKTtcclxuICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhbGNpdGUtdWktYm9yZGVyLWlucHV0JywgJyM5NDk0OTQnKTtcclxuICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhbGNpdGUtdWktaW5mbycsICcjMDA2MTliJyk7XHJcbiAgICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYWxjaXRlLXVpLXN1Y2Nlc3MnLCAnIzM1YWM0NicpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKG4gPT09ICdkYXJrJykge1xyXG4gICAgICAgIHRoaXMuX2FjY29yZGlvblRoZW1lID0gbjtcclxuICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhbGNpdGUtdWktYnJhbmQnLCAnIzAwOWFmMicpO1xyXG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS1icmFuZC1ob3ZlcicsICcjMDA3YWMyJyk7XHJcbiAgICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYWxjaXRlLXVpLWJyYW5kLXByZXNzJywgJyMwMDYxOWInKTtcclxuICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhbGNpdGUtdWktYmFja2dyb3VuZCcsICcjMzUzNTM1Jyk7XHJcbiAgICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYWxjaXRlLXVpLWZvcmVncm91bmQtMScsICcjMmIyYjJiJyk7XHJcbiAgICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYWxjaXRlLXVpLWZvcmVncm91bmQtMicsICcjMjAyMDIwJyk7XHJcbiAgICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYWxjaXRlLXVpLWZvcmVncm91bmQtMycsICcjMTUxNTE1Jyk7XHJcbiAgICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYWxjaXRlLXVpLXRleHQtMScsICcjZmZmZmZmJyk7XHJcbiAgICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYWxjaXRlLXVpLXRleHQtMicsICcjYmZiZmJmJyk7XHJcbiAgICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYWxjaXRlLXVpLXRleHQtMycsICcjOWY5ZjlmJyk7XHJcbiAgICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYWxjaXRlLXVpLXRleHQtaW52ZXJzZScsICcjMTUxNTE1Jyk7XHJcbiAgICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYWxjaXRlLXVpLXRleHQtbGluaycsICcjMDBhMGZmJyk7XHJcbiAgICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYWxjaXRlLXVpLWJvcmRlci0xJywgJyM1NTU1NTUnKTtcclxuICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhbGNpdGUtdWktYm9yZGVyLTInLCAnIzRhNGE0YScpO1xyXG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS1ib3JkZXItMycsICcjNDA0MDQwJyk7XHJcbiAgICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYWxjaXRlLXVpLWJvcmRlci1pbnB1dCcsICcjNzU3NTc1Jyk7XHJcbiAgICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYWxjaXRlLXVpLWluZm8nLCAnIzAwYTBmZicpO1xyXG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS1zdWNjZXNzJywgJyMzNmRhNDMnKTtcclxuICAgICAgfVxyXG4gICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgIHRoaXMuX2dldFNoYWRvd0FjY29yZGlvbignTXlJbmZvZ3JhcGhpY3MnKS5zZXRDb2xvclRoZW1lKG4pO1xyXG4gICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgIHRoaXMuX2dldFNoYWRvd0FjY29yZGlvbignRXNyaUluZm9ncmFwaGljcycpLnNldENvbG9yVGhlbWUobik7XHJcbiAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgdGhpcy5fZ2V0U2hhZG93QWNjb3JkaW9uKCdTaGFyZWRJbmZvZ3JhcGhpY3MnKS5zZXRDb2xvclRoZW1lKG4pO1xyXG4gICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgIHRoaXMuX2dldFNoYWRvd0FjY29yZGlvbignR2FsbGVyeUluZm9ncmFwaGljcycpLnNldENvbG9yVGhlbWUobik7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vIEBNZXRob2QoKVxyXG4gIGFzeW5jIHNldFNlbGVjdGVkSWQoaWQpIHtcclxuICAgIHRoaXMuc3RTZWxlY3RlZFJlcG9ydElkID0gaWQ7XHJcbiAgICB0aGlzLl9zZXRBY2NvcmRpb25zUmVwb3J0SWQoKTtcclxuICB9XHJcbiAgYXN5bmMgb25EZWZhdWx0UmVwb3J0Q2hhbmdlKGNhbGxiYWNrLCBjb250ZXh0KSB7XHJcbiAgICB0aGlzLl9vbkRlZmF1bHRSZXBvcnRDYWxsYmFjayA9IHsgZm46IGNhbGxiYWNrLCBjdHg6IGNvbnRleHQgfTtcclxuICB9XHJcbiAgYXN5bmMgb25BY2NvcmRpb25JdGVtc0NoZWNrZWQoY2FsbGJhY2ssIGNvbnRleHQpIHtcclxuICAgIHRoaXMuX29uQ2hlY2tib3hDaGFuZ2VDYWxsYmFjayA9IHsgZm46IGNhbGxiYWNrLCBjdHg6IGNvbnRleHQgfTtcclxuICB9XHJcbiAgLy8gaW5mb2dyYXBoaWMgdHJlZSBkZWZhdWx0IHJlcG9ydCBpZCBjaGFuZ2VkXHJcbiAgcmVwb3J0U2VsZWN0ZWRFdmVudEhhbmRsZXIoZSkge1xyXG4gICAgY29uc3QgcmVzdWx0ID0geyByZXBvcnRJZDogZS5kZXRhaWwucmVwb3J0SWQsIG5hbWU6IGUuZGV0YWlsLm5hbWUgfTtcclxuICAgIGlmICh0aGlzLl9kYmcpIHtcclxuICAgICAgY29uc29sZS5sb2coJ1JFUE9SVCBMSVNUIERFRkFVTFQgSUcgQ0hBTkdFRD0nLCByZXN1bHQpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgY2IgPSB0aGlzLl9vbkRlZmF1bHRSZXBvcnRDYWxsYmFjaztcclxuICAgIGlmIChjYiAmJiB0eXBlb2YgY2IuZm4gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgY2IuZm4uY2FsbChjYi5jdHgsIHJlc3VsdCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9nZXRTaGFkb3dBY2NvcmRpb24obmFtZSkge1xyXG4gICAgY29uc3QgaWQgPSB0aGlzLl9pbmZvZ3JhcGhpY3NbbmFtZV0uYWNjb3JkaW9uSWQ7XHJcbiAgICBjb25zdCBlbGVtID0gKHRoaXMuZWw/LnNoYWRvd1Jvb3QpID8gdGhpcy5lbC5zaGFkb3dSb290LmdldEVsZW1lbnRCeUlkKGlkKSA6IG51bGw7XHJcbiAgICByZXR1cm4gZWxlbTtcclxuICB9XHJcbiAgX3NldEFjY29yZGlvbnNSZXBvcnRJZCgpIHtcclxuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgaWYgKHRoaXMuc3RTZWxlY3RlZFJlcG9ydElkKSB7XHJcbiAgICAgIHRoaXMuX2FjY0xpc3QuZm9yRWFjaCgoYSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGFjY0VsZW0gPSBzZWxmLl9nZXRTaGFkb3dBY2NvcmRpb24oYSk7XHJcbiAgICAgICAgaWYgKGFjY0VsZW0pIHtcclxuICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgIGFjY0VsZW0uc2V0U2VsZWN0ZWRJZChzZWxmLnN0U2VsZWN0ZWRSZXBvcnRJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcbiAgX3NldEFjY29yZGlvbnNDaGVja2JveCgpIHtcclxuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgdGhpcy5fYWNjTGlzdC5mb3JFYWNoKChhKSA9PiB7XHJcbiAgICAgIGNvbnN0IGFjY0VsZW0gPSBzZWxmLl9nZXRTaGFkb3dBY2NvcmRpb24oYSk7XHJcbiAgICAgIGlmIChhY2NFbGVtKSB7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGFjY0VsZW0uc2V0U2hvd0NoZWNrYm94KHNlbGYuc3RTaG93Q2hlY2tib3hlcyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICBfc2V0QWNjb3JkaW9uc0RlZmF1bHQoKSB7XHJcbiAgICAvLyBjb25zdCBzZWxmID0gdGhpc1xyXG4gICAgLy8gaWYgKHRoaXMuc3RTaG93RGVmYXVsdCkge1xyXG4gICAgLy8gICBjb25zdCBpZCA9IHRoaXMuc3REZWZhdWx0UmVwb3J0SWRcclxuICAgIC8vICAgdGhpcy5fYWNjTGlzdC5mb3JFYWNoKChhKSA9PiB7XHJcbiAgICAvLyAgICAgY29uc3QgYWNjRWxlbSA9IHNlbGYuX2dldFNoYWRvd0FjY29yZGlvbihhKVxyXG4gICAgLy8gICAgIGlmIChhY2NFbGVtKSB7XHJcbiAgICAvLyAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAvLyAgICAgICBhY2NFbGVtLnNldFNob3dEZWZhdWx0KHRydWUsIGlkKVxyXG4gICAgLy8gICAgIH1cclxuICAgIC8vICAgfSlcclxuICAgIC8vIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogRmlsdGVycyBvdXQgbXVsdGlwbGUgcmFwaWQgZXZlbnRzIG9mIHRoZSBzYW1lIHR5cGUuICBUaGUgY2FsbGJhY2tcclxuICAgKiBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBpZiBubyBuZXcgZXZlbnRzIGhhdmUgaGFwcGVuZWQgZHVyaW5nIHRoZVxyXG4gICAqICd3YWl0JyB0aW1lLlxyXG4gICAqIEBwYXJhbSBjYWxsYmFjayAtIHlvdXIgZnVuY3Rpb24gdG8gY2FsbCB3aGVuIHRoZSBldmVudHMgaGF2ZSBzZXR0bGVkXHJcbiAgICogQHBhcmFtIHdhaXQgICAgIC0gbWlsbGlzZWNvbmRzIGRlbGF5IChleDogMjUwKVxyXG4gICAqL1xyXG4gIF9kZWJvdW5jZTIoY2FsbGJhY2ssIHdhaXQpIHtcclxuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgY29uc3QgZGVsYXllZENhbGwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHNlbGYuX2RlYm91bmNlVGltZXIgPSBudWxsO1xyXG4gICAgICBjYWxsYmFjay5hcHBseShzZWxmKTtcclxuICAgIH07XHJcbiAgICAvLyBldmVyeXRpbWUgX2RlYm91bmNlMiBpcyBjYWxsZWQgd2Uga2lsbCB0aGUgcHJldmlvdXMgdGltZXJcclxuICAgIGlmIChzZWxmLl9kZWJvdW5jZVRpbWVyKVxyXG4gICAgICBjbGVhclRpbWVvdXQoc2VsZi5fZGVib3VuY2VUaW1lcik7XHJcbiAgICBzZWxmLl9kZWJvdW5jZVRpbWVyID0gc2V0VGltZW91dChkZWxheWVkQ2FsbCwgd2FpdCk7XHJcbiAgfVxyXG4gIF9vbkZpbHRlcmVkUHJvcENoYW5nZWQoKSB7XHJcbiAgICBpZiAodGhpcy5fb25DaGFuZ2VDYWxsYmFjaylcclxuICAgICAgdGhpcy5fb25DaGFuZ2VDYWxsYmFjay5mbih0aGlzLl9vbkNoYW5nZUNhbGxiYWNrLmN0eCwgdGhpcy5fb25DaGFuZ2VRdWV1ZSk7XHJcbiAgICAvLyBjbGVhciBxdWV1ZVxyXG4gICAgdGhpcy5fb25DaGFuZ2VRdWV1ZSA9IHt9O1xyXG4gIH1cclxuICAvKipcclxuICAgKiBGdW5jdGlvbiBjYWxsZWQgYnkgdGhpcyBjb21wb25lbnQgaW50ZXJuYWxseSB3aGVuIGEgUHJvcCBjaGFuZ2VzXHJcbiAgICogQHBhcmFtIG5hbWUgIC0gb2YgUHJvcFxyXG4gICAqIEBwYXJhbSB2YWx1ZSAtIHZhbHVlIGFmdGVyIGNoYW5nZVxyXG4gICAqL1xyXG4gIF9vblByb3BDaGFuZ2VkKG5hbWUsIHZhbHVlKSB7XHJcbiAgICAvLyBBZGQgbmFtZS92YWx1ZSB0byBxdWV1ZVxyXG4gICAgLy8gU3Vic2VxdWVudCBjYWxscyB3aXRoIHRoZSBzYW1lIG5hbWUvdmFsdWUganVzdCB1cGRhdGVzXHJcbiAgICAvLyB0aGUgdmFsdWUgdW50aWwgdGhlIGNhbGxiYWNrIGNsZWFycyB0aGUgcXVldWVcclxuICAgIHRoaXMuX29uQ2hhbmdlUXVldWVbbmFtZV0gPSB2YWx1ZTtcclxuICAgIHRoaXMuX2RlYm91bmNlMih0aGlzLl9vbkZpbHRlcmVkUHJvcENoYW5nZWQsIDI1MCk7XHJcbiAgfVxyXG4gIG9uUmVwb3J0Q2xpY2tlZChlKSB7XHJcbiAgICBsZXQgaWQgPSBlLmRldGFpbC5pdGVtLmlkO1xyXG4gICAgdGhpcy5zZXRSZXBvcnRJZChpZCwgZS5kZXRhaWwuaXRlbS5uYW1lKTtcclxuICB9XHJcbiAgc2V0UmVwb3J0SWQobmV3VmFsdWUsIG5hbWUpIHtcclxuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgdGhpcy5zZWxlY3RlZFJlcG9ydElkID0gbmV3VmFsdWU7XHJcbiAgICB0aGlzLnJlcG9ydFNlbGVjdGVkLmVtaXQoeyBpZDogc2VsZi5zZWxlY3RlZFJlcG9ydElkLCBuYW1lOiBuYW1lIH0pO1xyXG4gICAgdGhpcy5fb25Qcm9wQ2hhbmdlZCgncmVwb3J0SWQnLCB0aGlzLnNlbGVjdGVkUmVwb3J0SWQpO1xyXG4gIH1cclxuICBhc3luYyBjb21wb25lbnRXaWxsTG9hZCgpIHtcclxuICAgIHRoaXMuc3RDb2xvcnMgPSB0aGlzLmNvbG9ycztcclxuICAgIGlmICghdGhpcy5faGFzU2V0RW52ICYmIHRoaXMuZW52KSB7XHJcbiAgICAgIHRoaXMuX2hhc1NldEVudiA9IHRydWU7XHJcbiAgICAgIHRoaXMuc3RFbnYgPSB0aGlzLmVudjtcclxuICAgICAgRW52aXJvbm1lbnRzLnNldEVudmlyb25tZW50KHRoaXMuZW52KTtcclxuICAgIH1cclxuICAgIHRoaXMuc3RTaG93Q2hlY2tib3hlcyA9IHRoaXMuc2hvd0NoZWNrYm94ZXM7XHJcbiAgICB0aGlzLnN0U2VsZWN0ZWRSZXBvcnRJZCA9IHRoaXMuc2VsZWN0ZWRSZXBvcnRJZDtcclxuICAgIC8vIHRoaXMuc3RTaG93RGVmYXVsdCA9IHRoaXMuc2hvd0RlZmF1bHQgPT0gJ3RydWUnXHJcbiAgICB0aGlzLnN0RGVmYXVsdFJlcG9ydElkID0gdGhpcy5kZWZhdWx0UmVwb3J0SWQgfHwgJ2Y5ZDk2MzIzYjhjZjRiZTliMDUyZWUzM2ZjZGI2Njc1JzsgLy8gZGVidWcgb25seVxyXG4gIH1cclxuICBjb21wb25lbnREaWRMb2FkKCkge1xyXG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICBpZiAoQUNMVXRpbHMuaGFzVGV4dCh0aGlzLmNvbG9ycykpIHtcclxuICAgICAgdGhpcy5zdENvbG9ycyA9IEFDTFV0aWxzLnBhcnNlVGhlbWVTdHJpbmcodGhpcy5jb2xvcnMpO1xyXG4gICAgfVxyXG4gICAgaWYgKHNlbGYuc3RDb2xvcnMpIHtcclxuICAgICAgc2VsZi5lbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYWxjaXRlLXVpLWJyYW5kJywgc2VsZi5zdENvbG9ycy5icmFuZCk7XHJcbiAgICAgIHNlbGYuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS1mb3JlZ3JvdW5kLTEnLCBzZWxmLnN0Q29sb3JzLmZvcmVncm91bmQxKTtcclxuICAgICAgc2VsZi5lbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYWxjaXRlLXVpLWZvcmVncm91bmQtMicsIHNlbGYuc3RDb2xvcnMuZm9yZWdyb3VuZDIpO1xyXG4gICAgICBzZWxmLmVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhbGNpdGUtdWktZm9yZWdyb3VuZC0zJywgc2VsZi5zdENvbG9ycy5mb3JlZ3JvdW5kMik7XHJcbiAgICAgIHNlbGYuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS10ZXh0LTEnLCBzZWxmLnN0Q29sb3JzLnRleHQxKTtcclxuICAgICAgc2VsZi5lbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYWxjaXRlLXVpLXRleHQtMicsIHNlbGYuc3RDb2xvcnMudGV4dDIpO1xyXG4gICAgICBzZWxmLmVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhbGNpdGUtdWktdGV4dC0zJywgc2VsZi5zdENvbG9ycy50ZXh0Myk7XHJcbiAgICAgIHNlbGYuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS1ib3JkZXItMicsIHNlbGYuc3RDb2xvcnMuYm9yZGVyMik7XHJcbiAgICAgIHNlbGYuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS1hY2NvcmRpb24taXRlbS1iYWNrZ3JvdW5kJywgc2VsZi5zdENvbG9ycy5hY2NvcmRpb25CYWNrZ3JvdW5kKTtcclxuICAgICAgc2VsZi5lbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYWxjaXRlLWFjY29yZGlvbi1pdGVtLWZvcmVncm91bmQnLCBzZWxmLnN0Q29sb3JzLmFjY29yZGlvbkZvcmVncm91bmQpO1xyXG4gICAgfVxyXG4gICAgLy8gaWYgKHNlbGYuc3RTaG93RGVmYXVsdCkge1xyXG4gICAgLy8gICBzZWxmLl9zZXRBY2NvcmRpb25zRGVmYXVsdCgpXHJcbiAgICAvLyB9XHJcbiAgfVxyXG4gIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcclxuICAgIHRoaXMuX3NldEFjY29yZGlvbnNSZXBvcnRJZCgpO1xyXG4gICAgLy8gaWYgKHRoaXMuc3RTaG93RGVmYXVsdCkge1xyXG4gICAgLy8gICB0aGlzLl9zZXRBY2NvcmRpb25zRGVmYXVsdCgpXHJcbiAgICAvLyB9XHJcbiAgICBpZiAodGhpcy5zdFNob3dDaGVja2JveGVzKSB7XHJcbiAgICAgIHRoaXMuX3NldEFjY29yZGlvbnNDaGVja2JveCgpO1xyXG4gICAgfVxyXG4gIH1cclxuICByZW5kZXIoKSB7XHJcbiAgICBpZiAoIXRoaXMuX2lzSW5pdGlhbGl6ZWQpXHJcbiAgICAgIHJldHVybjtcclxuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgcmV0dXJuIChoKFwiZGl2XCIsIG51bGwsIHNlbGYucmVuZGVyTGlzdCgnTXlJbmZvZ3JhcGhpY3MnKSwgc2VsZi5yZW5kZXJMaXN0KCdFc3JpSW5mb2dyYXBoaWNzJyksIHNlbGYucmVuZGVyTGlzdCgnU2hhcmVkSW5mb2dyYXBoaWNzJyksIHNlbGYucmVuZGVyTGlzdCgnR2FsbGVyeUluZm9ncmFwaGljcycpKSk7XHJcbiAgfVxyXG4gIHJlbmRlckxpc3QobmFtZSkge1xyXG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICBjb25zdCBtdWx0aSA9IHNlbGYuc3RNdWx0aXBsZUNob2ljZS50b1N0cmluZygpO1xyXG4gICAgY29uc3QgdGFncyA9IHtcclxuICAgICAgJ015SW5mb2dyYXBoaWNzJzogJ3JlcG9ydC1teS1pbmZvZ3JhcGhpY3MnLFxyXG4gICAgICAnRXNyaUluZm9ncmFwaGljcyc6ICdyZXBvcnQtZXNyaS1pbmZvZ3JhcGhpY3MnLFxyXG4gICAgICAnU2hhcmVkSW5mb2dyYXBoaWNzJzogJ3JlcG9ydC1zaGFyZWQtaW5mb2dyYXBoaWNzJyxcclxuICAgICAgJ0dhbGxlcnlJbmZvZ3JhcGhpY3MnOiAncmVwb3J0LWdhbGxlcnktaW5mb2dyYXBoaWNzJ1xyXG4gICAgfTtcclxuICAgIGNvbnN0IHJlcG9ydHMgPSBzZWxmLl9pbmZvZ3JhcGhpY3NbbmFtZV0uZGF0YTtcclxuICAgIGlmICh0aGlzLl9kYmcpIHtcclxuICAgICAgY29uc29sZS5sb2coJyVjIFJFUE9SVCBMSVNUIHJlbmRlckxpc3QnLCAnY29sb3I6b3JhbmdlO2ZvbnQtc2l6ZToxMXB0OycsIG5hbWUsIHJlcG9ydHMpO1xyXG4gICAgfVxyXG4gICAgaWYgKHJlcG9ydHMgJiYgcmVwb3J0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGxldCBhcnIgPSBbXTtcclxuICAgICAgaWYgKChtdWx0aSA9PSAndHJ1ZScpICYmIHJlcG9ydHMubGVuZ3RoID4gNCkge1xyXG4gICAgICAgIC8vIEFkZCAnQWxsJyByb3cgd2l0aCBjaGVja2JveFxyXG4gICAgICAgIGxldCBhID0ge1xyXG4gICAgICAgICAgaWQ6IC0xLFxyXG4gICAgICAgICAgbmFtZTogQmFSZXBvcnRzTGFuZ3VhZ2UuaTE4bignZHJvcGRvd24tYWxsJyksXHJcbiAgICAgICAgICBpY29uOiAnZmlsZS10ZXh0JyxcclxuICAgICAgICAgIHVzZXNDaGVja2JveDogdHJ1ZSxcclxuICAgICAgICAgIGlzQ2hlY2tlZDogKG5hbWUgPT0gJ0VzcmlJbmZvZ3JhcGhpY3MnKVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgYXJyLnB1c2goYSk7XHJcbiAgICAgIH1cclxuICAgICAgcmVwb3J0cy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgbGV0IHJvdyA9IHtcclxuICAgICAgICAgIGlkOiBpdGVtLmlkLFxyXG4gICAgICAgICAgbmFtZTogaXRlbS50aXRsZSxcclxuICAgICAgICAgIGRhdGU6IGl0ZW0uZGF0ZSxcclxuICAgICAgICAgIGlzQ2hlY2tlZDogaXRlbS5pc0NoZWNrZWQsXHJcbiAgICAgICAgICBpY29uOiAnZmlsZS10ZXh0J1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKG11bHRpID09ICd0cnVlJykge1xyXG4gICAgICAgICAgcm93LnVzZXNDaGVja2JveCA9IHRydWU7XHJcbiAgICAgICAgICAvL3Jvdy5pc0NoZWNrZWQgPSAobmFtZSA9PSAnRXNyaUluZm9ncmFwaGljcycpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFyci5wdXNoKHJvdyk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBjb25zdCBjb250ZW50ID0gSlNPTi5zdHJpbmdpZnkoYXJyKTtcclxuICAgICAgY29uc3QgZGlzcGxheU5hbWUgPSBCYVJlcG9ydHNMYW5ndWFnZS5pMThuKHRhZ3NbbmFtZV0pO1xyXG4gICAgICBjb25zdCBhY2NJZCA9IHNlbGYuX2luZm9ncmFwaGljc1tuYW1lXS5hY2NvcmRpb25JZDtcclxuICAgICAgaWYgKHRoaXMuX2RiZykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCclYyBSRVBPUlRTIHJlbmRlcjogJywgJ2NvbG9yOmdyZWVuO2ZvbnQtc2l6ZTsxMXB0JywgdGhpcy5zdFNob3dDaGVja2JveGVzLCB0aGlzLnN0U2hvd0RlZmF1bHQsIGNvbnRlbnQpO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIGNyZWF0ZSBhbiBhY2NvcmRpb24gZm9yIHRoaXMgbGV2ZWwgd2l0aCBhbGwgcmVjb3Jkc1xyXG4gICAgICByZXR1cm4gKGgoXCJiYS1hY2NvcmRpb25cIiwgeyBpZDogYWNjSWQsIGNsYXNzOiBcInJlcG9ydExpc3RcIiwgZGlzcGxheW5hbWU6IGRpc3BsYXlOYW1lLCByZXBvcnRzR3JvdXBJZDogbmFtZSwgY29udGVudDogY29udGVudCwgc2hvd0NoZWNrYm94ZXM6IHRoaXMuc3RTaG93Q2hlY2tib3hlcyxcclxuICAgICAgICAvLyAgc2hvd0RlZmF1bHQ9e3RoaXMuc3RTaG93RGVmYXVsdC50b1N0cmluZygpfVxyXG4gICAgICAgIC8vICBkZWZhdWx0UmVwb3J0SWQ9e3RoaXMuc3REZWZhdWx0UmVwb3J0SWR9XHJcbiAgICAgICAgLy8gcmVtb3ZpbmcgcmVwb3J0TGlzdCBwcm9wLCB1c2UgY29udGVudCBvbmx5XHJcbiAgICAgICAgLy9yZXBvcnRMaXN0PXtKU09OLnN0cmluZ2lmeSh0aGlzLnN0UmVwb3J0TGlzdCl9XHJcbiAgICAgICAgc2VsZWN0ZWRJZDogdGhpcy5zdFNlbGVjdGVkUmVwb3J0SWQsIG9uQWNjb3JkaW9uSXRlbUNsaWNrZWQ6IGV2ID0+IHRoaXMuX2FjY29yZGlhbkl0ZW1DbGlja0hhbmRsZXIoZXYpLCBvbkFjY29yZGlvbkl0ZW1zQ2hlY2tlZDogKGV2KSA9PiB0aGlzLl9hY2NvcmRpYW5JdGVtc0NoZWNrZWRIYW5kbGVyKGV2KSB9KSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gJyc7XHJcbiAgfVxyXG4gIGdldCBlbCgpIHsgcmV0dXJuIGdldEVsZW1lbnQodGhpcyk7IH1cclxuICBzdGF0aWMgZ2V0IHdhdGNoZXJzKCkgeyByZXR1cm4ge1xyXG4gICAgXCJlbnZcIjogW1wib25FbnZDaGFuZ2VkXCJdLFxyXG4gICAgXCJsYW5nQ29kZVwiOiBbXCJvbkxhbmdDb2RlQ2hhbmdlZFwiXSxcclxuICAgIFwic291cmNlQ291bnRyeVwiOiBbXCJvblNvdXJjZUNvdW50cnlDaGFuZ2VkXCJdLFxyXG4gICAgXCJjb2xvcnNcIjogW1wib25Db2xvcnNDaGFuZ2VkXCJdLFxyXG4gICAgXCJkZWZhdWx0UmVwb3J0SWRcIjogW1wib25EZWZhdWx0UmVwb3J0Q2hhbmdlZFwiXSxcclxuICAgIFwic2VsZWN0ZWRSZXBvcnRJZFwiOiBbXCJvblNlbGVjdGVkUmVwb3J0Q2hhbmdlZFwiXSxcclxuICAgIFwic2hvd0NoZWNrYm94ZXNcIjogW1wib25zaG93Q2hlY2tib3hlc0NoYW5nZWRcIl0sXHJcbiAgICBcInNob3dEZWZhdWx0XCI6IFtcIm9uc2hvd0RlZmF1bHRDaGFuZ2VkXCJdLFxyXG4gICAgXCJyZXBvcnRMaXN0XCI6IFtcIm9ucmVwb3J0TGlzdENoYW5nZWRcIl1cclxuICB9OyB9XHJcbn07XHJcbkFyY2dpc1JlcG9ydExpc3Quc3R5bGUgPSBhcmNnaXNSZXBvcnRMaXN0Q3NzO1xuXG5leHBvcnQgeyBBcmNnaXNSZXBvcnRMaXN0IGFzIGFyY2dpc19yZXBvcnRfbGlzdCB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcmNnaXMtcmVwb3J0LWxpc3QuZW50cnkuanMubWFwIiwiaW1wb3J0IHsgRyBhcyBHRUNsaWVudCwgVCBhcyBUb2tlblByb3ZpZGVyIH0gZnJvbSAnLi9HRUNsaWVudC1mNzEwNDlmOC5qcyc7XG5pbXBvcnQgeyBCIGFzIEJhUmVwb3J0c0xhbmd1YWdlIH0gZnJvbSAnLi9FbGVtZW50SWRzLWEyYzQwNTkyLmpzJztcblxuZnVuY3Rpb24gc2V0VG9rZW4odXNlcm5hbWUsIHRva2VuKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGlmICh1c2VybmFtZSAhPSBudWxsICYmIHVzZXJuYW1lLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgaWYgKHRva2VuICE9IG51bGwgJiYgdG9rZW4ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgVG9rZW5Qcm92aWRlci5zZXRUb2tlbih1c2VybmFtZSwgdG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEJhUmVwb3J0c0xhbmd1YWdlLmkxOG4oJ29rJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQmFSZXBvcnRzTGFuZ3VhZ2UuaTE4bignaW52YWxpZC10b2tlbicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gQmFSZXBvcnRzTGFuZ3VhZ2UuaTE4bignaW52YWxpZC11c2VybmFtZScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNhdGNoIChleCkge1xyXG4gICAgICAgIHJldHVybiBleDtcclxuICAgIH1cclxufVxyXG5hc3luYyBmdW5jdGlvbiBnZXRJbmZvZ3JhcGhpY1RlbXBsYXRlc0xpc3QoY291bnRyeUNvZGUsIGZ1bGwgPSBmYWxzZSkge1xyXG4gICAgcmV0dXJuIGF3YWl0IEdFQ2xpZW50LmdldEluZm9ncmFwaGljVGVtcGxhdGVzTGlzdChjb3VudHJ5Q29kZSwgZnVsbCk7XHJcbn1cblxuZXhwb3J0IHsgZ2V0SW5mb2dyYXBoaWNUZW1wbGF0ZXNMaXN0IGFzIGcsIHNldFRva2VuIGFzIHMgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXJjZ2lzUmVwb3J0cy0wYzM1MWYwYS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=