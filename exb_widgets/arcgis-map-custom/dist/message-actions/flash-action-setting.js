/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
System.register(["jimu-core","jimu-ui","jimu-ui/advanced/setting-components","jimu-ui/advanced/data-source-selector","jimu-arcgis","jimu-theme","jimu-ui/advanced/sql-expression-builder"], function(__WEBPACK_DYNAMIC_EXPORT__, __system_context__) {
	var __WEBPACK_EXTERNAL_MODULE_jimu_core__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_ui__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_ui_advanced_setting_components__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_ui_advanced_data_source_selector__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_arcgis__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_theme__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_ui_advanced_sql_expression_builder__ = {};
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_core__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_ui__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_ui_advanced_setting_components__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_ui_advanced_data_source_selector__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_arcgis__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_theme__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_ui_advanced_sql_expression_builder__, "__esModule", { value: true });
	return {
		setters: [
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_core__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_ui__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_ui_advanced_setting_components__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_ui_advanced_data_source_selector__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_arcgis__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_theme__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_ui_advanced_sql_expression_builder__[key] = module[key];
				});
			}
		],
		execute: function() {
			__WEBPACK_DYNAMIC_EXPORT__(
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./extensions/widgets/arcgis/arcgis-map/src/message-actions/action-utils.ts":
/*!**********************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/message-actions/action-utils.ts ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"isUseOutputDataSources\": () => (/* binding */ isUseOutputDataSources),\n/* harmony export */   \"getMessageCarryDataByWidgetId\": () => (/* binding */ getMessageCarryDataByWidgetId),\n/* harmony export */   \"checkOutActionConfig\": () => (/* binding */ checkOutActionConfig),\n/* harmony export */   \"getUseDataSourceInfo\": () => (/* binding */ getUseDataSourceInfo),\n/* harmony export */   \"getDsByWidgetId\": () => (/* binding */ getDsByWidgetId),\n/* harmony export */   \"initOutputDataSources\": () => (/* binding */ initOutputDataSources),\n/* harmony export */   \"checkIsOnlyOneDs\": () => (/* binding */ checkIsOnlyOneDs)\n/* harmony export */ });\n/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ \"jimu-core\");\n/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-arcgis */ \"jimu-arcgis\");\n\n\nfunction isUseOutputDataSources(wId, messageType) {\n    const messageCarryData = getMessageCarryDataByWidgetId(wId, messageType);\n    return messageCarryData === jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageCarryData.OutputDataSource;\n}\nfunction getMessageCarryDataByWidgetId(wId, messageType) {\n    var _a, _b, _c, _d;\n    const appConfig = (_b = (_a = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState()) === null || _a === void 0 ? void 0 : _a.appStateInBuilder) === null || _b === void 0 ? void 0 : _b.appConfig;\n    const widgetJson = (_c = appConfig === null || appConfig === void 0 ? void 0 : appConfig.widgets) === null || _c === void 0 ? void 0 : _c[wId];\n    const publishMessages = (_d = widgetJson === null || widgetJson === void 0 ? void 0 : widgetJson.manifest) === null || _d === void 0 ? void 0 : _d.publishMessages;\n    let messageCarryData = jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageCarryData.UseDataSource;\n    publishMessages === null || publishMessages === void 0 ? void 0 : publishMessages.forEach(el => {\n        const publishMessageProperty = el;\n        if ((publishMessageProperty === null || publishMessageProperty === void 0 ? void 0 : publishMessageProperty.messageCarryData) && (publishMessageProperty === null || publishMessageProperty === void 0 ? void 0 : publishMessageProperty.messageType) === messageType) {\n            messageCarryData = publishMessageProperty === null || publishMessageProperty === void 0 ? void 0 : publishMessageProperty.messageCarryData;\n        }\n    });\n    return messageCarryData;\n}\nfunction checkOutActionConfig(actionConfig, messageWidgetId, messageType) {\n    const config = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appStateInBuilder.appConfig;\n    //const messageWidgetJson = config.widgets[messageWidgetId]\n    let useDataSource = null;\n    const useDataSources = [];\n    if (!actionConfig.useDataSource) {\n        const messageWidgetUseDataSources = getDsByWidgetId(messageWidgetId, messageType);\n        //if (messageWidgetJson && messageWidgetJson.useDataSources && messageWidgetJson.useDataSources.length > 0) {\n        if (messageWidgetUseDataSources.length > 0) {\n            messageWidgetUseDataSources.forEach((useDS, index) => {\n                const dsJson = config.dataSources[useDS.dataSourceId];\n                let tempUseDataSource;\n                if (dsJson && ((dsJson.type === jimu_arcgis__WEBPACK_IMPORTED_MODULE_1__.ArcGISDataSourceTypes.WebMap) || (dsJson.type === jimu_arcgis__WEBPACK_IMPORTED_MODULE_1__.ArcGISDataSourceTypes.WebScene))) {\n                    tempUseDataSource = null;\n                }\n                else {\n                    tempUseDataSource = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({\n                        dataSourceId: useDS.dataSourceId,\n                        mainDataSourceId: useDS.mainDataSourceId,\n                        rootDataSourceId: useDS.rootDataSourceId,\n                        dataViewId: useDS.dataViewId\n                    });\n                    if (!useDataSource) {\n                        useDataSource = tempUseDataSource;\n                    }\n                    useDataSources.push(tempUseDataSource);\n                }\n            });\n        }\n    }\n    else {\n        useDataSource = checkOutUseDataSource(messageWidgetId, actionConfig.useDataSource, messageType);\n        if (actionConfig.useDataSources) {\n            actionConfig.useDataSources.forEach(useDS => {\n                const tempUseDataSource = checkOutUseDataSource(messageWidgetId, useDS, messageType);\n                tempUseDataSource && useDataSources.push(tempUseDataSource);\n            });\n        }\n    }\n    return {\n        useDataSource: useDataSource,\n        useDataSources: useDataSources\n    };\n}\nfunction checkOutUseDataSource(messageWidgetId, oldUseDataSource, messageType) {\n    var _a, _b, _c, _d;\n    const config = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appStateInBuilder.appConfig;\n    //const widgetJson = config.widgets[messageWidgetId]\n    const messageWidgetUseDataSources = getDsByWidgetId(messageWidgetId, messageType);\n    let initUseDataSource = null;\n    let isMapDs = false;\n    const dsId = messageWidgetUseDataSources && messageWidgetUseDataSources[0] && messageWidgetUseDataSources[0].dataSourceId;\n    if (!dsId) {\n        return null;\n    }\n    const dsJson = config.dataSources[dsId];\n    if (dsJson && ((dsJson.type === jimu_arcgis__WEBPACK_IMPORTED_MODULE_1__.ArcGISDataSourceTypes.WebMap) || (dsJson.type === jimu_arcgis__WEBPACK_IMPORTED_MODULE_1__.ArcGISDataSourceTypes.WebScene))) {\n        isMapDs = true;\n    }\n    const dsM = jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceManager.getInstance();\n    const isoldUseDataSourceIsOutputDs = (_b = (_a = dsM.getDataSource(oldUseDataSource.dataSourceId)) === null || _a === void 0 ? void 0 : _a.getDataSourceJson()) === null || _b === void 0 ? void 0 : _b.isOutputFromWidget;\n    if (isMapDs) {\n        // webmap or webscene ds\n        let isUseOldDs = false;\n        if (messageWidgetUseDataSources) {\n            for (let i = 0; i < messageWidgetUseDataSources.length; i++) {\n                if (messageWidgetUseDataSources[i].dataSourceId === oldUseDataSource.rootDataSourceId) {\n                    isUseOldDs = true;\n                    break;\n                }\n            }\n        }\n        if (isUseOldDs) {\n            initUseDataSource = oldUseDataSource;\n        }\n        else {\n            initUseDataSource = null;\n        }\n    }\n    else {\n        // featurelayer ds\n        let isUseOldDs = false;\n        if (messageWidgetUseDataSources) {\n            for (let i = 0; i < messageWidgetUseDataSources.length; i++) {\n                const oldUseDataSourceId = isoldUseDataSourceIsOutputDs ? oldUseDataSource === null || oldUseDataSource === void 0 ? void 0 : oldUseDataSource.mainDataSourceId : oldUseDataSource === null || oldUseDataSource === void 0 ? void 0 : oldUseDataSource.dataSourceId;\n                const currentUseDataSourceId = isoldUseDataSourceIsOutputDs ? (_c = messageWidgetUseDataSources[i]) === null || _c === void 0 ? void 0 : _c.mainDataSourceId : (_d = messageWidgetUseDataSources[i]) === null || _d === void 0 ? void 0 : _d.dataSourceId;\n                // support data view\n                if (currentUseDataSourceId === oldUseDataSourceId) {\n                    isUseOldDs = true;\n                    break;\n                }\n            }\n        }\n        if (isUseOldDs) {\n            initUseDataSource = oldUseDataSource;\n        }\n        else {\n            if (messageWidgetUseDataSources && messageWidgetUseDataSources.length === 1) {\n                initUseDataSource = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({\n                    dataSourceId: messageWidgetUseDataSources[0].dataSourceId,\n                    mainDataSourceId: messageWidgetUseDataSources[0].mainDataSourceId,\n                    rootDataSourceId: messageWidgetUseDataSources[0].rootDataSourceId\n                });\n            }\n            else {\n                initUseDataSource = null;\n            }\n        }\n    }\n    return initUseDataSource;\n}\nfunction getUseDataSourceInfo(widgetId, useDataSource, useDataSources, messageType) {\n    var _a, _b, _c;\n    const appConfig = (_b = (_a = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState()) === null || _a === void 0 ? void 0 : _a.appStateInBuilder) === null || _b === void 0 ? void 0 : _b.appConfig;\n    const widgetJson = (_c = appConfig === null || appConfig === void 0 ? void 0 : appConfig.widgets) === null || _c === void 0 ? void 0 : _c[widgetId];\n    let isReadOnly = false;\n    const dsRootIds = getDsRootIdsByWidgetId(widgetId);\n    //if (dsRootIds && dsRootIds.length === 0 && (widgetJson && widgetJson.useDataSources && widgetJson.useDataSources.length === 1)) {\n    //  isReadOnly = true\n    //}\n    //if (!dsRootIds && (widgetJson && widgetJson.useDataSources && widgetJson.useDataSources.length === 1)) {\n    //  isReadOnly = true\n    //}\n    if (!dsRootIds || (dsRootIds === null || dsRootIds === void 0 ? void 0 : dsRootIds.length) === 0) {\n        isReadOnly = checkIsOnlyOneDs(widgetJson, messageType, dsRootIds);\n    }\n    const fromDsIds = dsRootIds ? undefined : getDsIdsByWidgetId(widgetId, messageType);\n    const dsSelectorSource = {\n        isReadOnly: isReadOnly,\n        useDataSource: useDataSource,\n        useDataSources: useDataSources || [],\n        fromRootDsIds: dsRootIds,\n        fromDsIds: fromDsIds\n    };\n    return dsSelectorSource;\n}\nfunction getDsByWidgetId(wId, messageType) {\n    var _a, _b, _c;\n    const messageCarryData = getMessageCarryDataByWidgetId(wId, messageType);\n    const appConfig = (_b = (_a = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState()) === null || _a === void 0 ? void 0 : _a.appStateInBuilder) === null || _b === void 0 ? void 0 : _b.appConfig;\n    const widgetJson = (_c = appConfig === null || appConfig === void 0 ? void 0 : appConfig.widgets) === null || _c === void 0 ? void 0 : _c[wId];\n    const useDataSources = (widgetJson === null || widgetJson === void 0 ? void 0 : widgetJson.useDataSources) || (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)([]);\n    const outputDataSources = initOutputDataSources(widgetJson === null || widgetJson === void 0 ? void 0 : widgetJson.outputDataSources) || (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)([]);\n    const bothDatasource = useDataSources === null || useDataSources === void 0 ? void 0 : useDataSources.asMutable({ deep: true }).concat(outputDataSources === null || outputDataSources === void 0 ? void 0 : outputDataSources.asMutable({ deep: true }));\n    switch (messageCarryData) {\n        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageCarryData.OutputDataSource:\n            return outputDataSources;\n        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageCarryData.UseDataSource:\n            return useDataSources;\n        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageCarryData.BothDataSource:\n            return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)(bothDatasource);\n    }\n}\nfunction initOutputDataSources(outputDataSources) {\n    var _a;\n    const ds = (_a = outputDataSources === null || outputDataSources === void 0 ? void 0 : outputDataSources.map(dsId => {\n        return {\n            dataSourceId: dsId,\n            mainDataSourceId: dsId,\n            rootDataSourceId: null\n        };\n    })) !== null && _a !== void 0 ? _a : [];\n    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)(ds);\n}\nfunction checkIsOnlyOneDs(widgetJson, messageType, dsRootIds) {\n    const messageCarryData = getMessageCarryDataByWidgetId(widgetJson === null || widgetJson === void 0 ? void 0 : widgetJson.id, messageType);\n    const outputDs = (widgetJson === null || widgetJson === void 0 ? void 0 : widgetJson.outputDataSources) || [];\n    const useDs = (widgetJson === null || widgetJson === void 0 ? void 0 : widgetJson.useDataSources) || [];\n    if (dsRootIds) {\n        return false;\n    }\n    switch (messageCarryData) {\n        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageCarryData.OutputDataSource:\n            return (outputDs === null || outputDs === void 0 ? void 0 : outputDs.length) === 1;\n        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageCarryData.UseDataSource:\n            return (useDs === null || useDs === void 0 ? void 0 : useDs.length) === 1;\n        case jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageCarryData.BothDataSource:\n            const dsLength = outputDs.length + useDs.length;\n            return dsLength === 1;\n    }\n}\nfunction getDsRootIdsByWidgetId(wId) {\n    var _a, _b, _c, _d;\n    const appConfig = (_b = (_a = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState()) === null || _a === void 0 ? void 0 : _a.appStateInBuilder) === null || _b === void 0 ? void 0 : _b.appConfig;\n    const widgetJson = (_c = appConfig === null || appConfig === void 0 ? void 0 : appConfig.widgets) === null || _c === void 0 ? void 0 : _c[wId];\n    const rootIds = [];\n    const dsM = jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceManager.getInstance();\n    (_d = widgetJson === null || widgetJson === void 0 ? void 0 : widgetJson.useDataSources) === null || _d === void 0 ? void 0 : _d.forEach((useDS) => {\n        const ds = dsM.getDataSource(useDS.dataSourceId);\n        if ((ds === null || ds === void 0 ? void 0 : ds.type) === jimu_arcgis__WEBPACK_IMPORTED_MODULE_1__.ArcGISDataSourceTypes.WebMap || (ds === null || ds === void 0 ? void 0 : ds.type) === jimu_arcgis__WEBPACK_IMPORTED_MODULE_1__.ArcGISDataSourceTypes.WebScene) { // is root ds\n            rootIds.push(useDS.dataSourceId);\n        }\n    });\n    return rootIds.length > 0 ? (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)(rootIds) : undefined;\n}\nfunction getDsIdsByWidgetId(wId, messageType) {\n    var _a;\n    //const appConfig = getAppStore().getState()?.appStateInBuilder?.appConfig\n    //const widgetJson = appConfig?.widgets?.[wId]\n    const messageWidgetUseDataSources = getDsByWidgetId(wId, messageType);\n    return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)((_a = messageWidgetUseDataSources.map((useDS) => {\n        const dsM = jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceManager.getInstance();\n        const ds = dsM.getDataSource(useDS.dataSourceId);\n        let resultDs;\n        if (ds && ds.isDataView) {\n            // support data view\n            resultDs = ds === null || ds === void 0 ? void 0 : ds.getMainDataSource();\n        }\n        else {\n            resultDs = ds;\n        }\n        return resultDs === null || resultDs === void 0 ? void 0 : resultDs.id;\n    })) !== null && _a !== void 0 ? _a : []);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FyY2dpcy1tYXAvc3JjL21lc3NhZ2UtYWN0aW9ucy9hY3Rpb24tdXRpbHMudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hcmNnaXMtbWFwL3NyYy9tZXNzYWdlLWFjdGlvbnMvYWN0aW9uLXV0aWxzLnRzPzNmMWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0QXBwU3RvcmUsIE1lc3NhZ2VUeXBlLCBNZXNzYWdlQ2FycnlEYXRhLCBVc2VEYXRhU291cmNlLCBJTVVzZURhdGFTb3VyY2UsIEltbXV0YWJsZSwgRGF0YVNvdXJjZU1hbmFnZXIsIEltbXV0YWJsZUFycmF5LCBJTVdpZGdldEpzb24gfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBBcmNHSVNEYXRhU291cmNlVHlwZXMgfSBmcm9tICdqaW11LWFyY2dpcydcblxuZXhwb3J0IGZ1bmN0aW9uIGlzVXNlT3V0cHV0RGF0YVNvdXJjZXMgKHdJZDogc3RyaW5nLCBtZXNzYWdlVHlwZTogTWVzc2FnZVR5cGUpOiBib29sZWFuIHtcbiAgY29uc3QgbWVzc2FnZUNhcnJ5RGF0YSA9IGdldE1lc3NhZ2VDYXJyeURhdGFCeVdpZGdldElkKHdJZCwgbWVzc2FnZVR5cGUpXG4gIHJldHVybiBtZXNzYWdlQ2FycnlEYXRhID09PSBNZXNzYWdlQ2FycnlEYXRhLk91dHB1dERhdGFTb3VyY2Vcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE1lc3NhZ2VDYXJyeURhdGFCeVdpZGdldElkICh3SWQ6IHN0cmluZywgbWVzc2FnZVR5cGU6IE1lc3NhZ2VUeXBlKTogTWVzc2FnZUNhcnJ5RGF0YSB7XG4gIGNvbnN0IGFwcENvbmZpZyA9IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKT8uYXBwU3RhdGVJbkJ1aWxkZXI/LmFwcENvbmZpZ1xuICBjb25zdCB3aWRnZXRKc29uID0gYXBwQ29uZmlnPy53aWRnZXRzPy5bd0lkXVxuICBjb25zdCBwdWJsaXNoTWVzc2FnZXMgPSB3aWRnZXRKc29uPy5tYW5pZmVzdD8ucHVibGlzaE1lc3NhZ2VzXG4gIGxldCBtZXNzYWdlQ2FycnlEYXRhID0gTWVzc2FnZUNhcnJ5RGF0YS5Vc2VEYXRhU291cmNlXG4gIHB1Ymxpc2hNZXNzYWdlcz8uZm9yRWFjaChlbCA9PiB7XG4gICAgY29uc3QgcHVibGlzaE1lc3NhZ2VQcm9wZXJ0eSA9IGVsIGFzIGFueVxuICAgIGlmIChwdWJsaXNoTWVzc2FnZVByb3BlcnR5Py5tZXNzYWdlQ2FycnlEYXRhICYmIHB1Ymxpc2hNZXNzYWdlUHJvcGVydHk/Lm1lc3NhZ2VUeXBlID09PSBtZXNzYWdlVHlwZSkge1xuICAgICAgbWVzc2FnZUNhcnJ5RGF0YSA9IHB1Ymxpc2hNZXNzYWdlUHJvcGVydHk/Lm1lc3NhZ2VDYXJyeURhdGFcbiAgICB9XG4gIH0pXG4gIHJldHVybiBtZXNzYWdlQ2FycnlEYXRhXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWN0aW9uQ29uZmlnIHtcbiAgdXNlRGF0YVNvdXJjZTogVXNlRGF0YVNvdXJjZVxuICB1c2VEYXRhU291cmNlcz86IFVzZURhdGFTb3VyY2VbXVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tPdXRBY3Rpb25Db25maWcgKGFjdGlvbkNvbmZpZzogSW1tdXRhYmxlLkltbXV0YWJsZU9iamVjdDxBY3Rpb25Db25maWc+LCBtZXNzYWdlV2lkZ2V0SWQ6IHN0cmluZywgbWVzc2FnZVR5cGU6IE1lc3NhZ2VUeXBlKSB7XG4gIGNvbnN0IGNvbmZpZyA9IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5hcHBTdGF0ZUluQnVpbGRlci5hcHBDb25maWdcbiAgLy9jb25zdCBtZXNzYWdlV2lkZ2V0SnNvbiA9IGNvbmZpZy53aWRnZXRzW21lc3NhZ2VXaWRnZXRJZF1cblxuICBsZXQgdXNlRGF0YVNvdXJjZTogSU1Vc2VEYXRhU291cmNlID0gbnVsbFxuICBjb25zdCB1c2VEYXRhU291cmNlczogSU1Vc2VEYXRhU291cmNlW10gPSBbXVxuICBpZiAoIWFjdGlvbkNvbmZpZy51c2VEYXRhU291cmNlKSB7XG4gICAgY29uc3QgbWVzc2FnZVdpZGdldFVzZURhdGFTb3VyY2VzID0gZ2V0RHNCeVdpZGdldElkKG1lc3NhZ2VXaWRnZXRJZCwgbWVzc2FnZVR5cGUpXG4gICAgLy9pZiAobWVzc2FnZVdpZGdldEpzb24gJiYgbWVzc2FnZVdpZGdldEpzb24udXNlRGF0YVNvdXJjZXMgJiYgbWVzc2FnZVdpZGdldEpzb24udXNlRGF0YVNvdXJjZXMubGVuZ3RoID4gMCkge1xuICAgIGlmIChtZXNzYWdlV2lkZ2V0VXNlRGF0YVNvdXJjZXMubGVuZ3RoID4gMCkge1xuICAgICAgbWVzc2FnZVdpZGdldFVzZURhdGFTb3VyY2VzLmZvckVhY2goKHVzZURTLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBkc0pzb24gPSBjb25maWcuZGF0YVNvdXJjZXNbdXNlRFMuZGF0YVNvdXJjZUlkXVxuICAgICAgICBsZXQgdGVtcFVzZURhdGFTb3VyY2VcbiAgICAgICAgaWYgKGRzSnNvbiAmJiAoKGRzSnNvbi50eXBlID09PSBBcmNHSVNEYXRhU291cmNlVHlwZXMuV2ViTWFwKSB8fCAoZHNKc29uLnR5cGUgPT09IEFyY0dJU0RhdGFTb3VyY2VUeXBlcy5XZWJTY2VuZSkpKSB7XG4gICAgICAgICAgdGVtcFVzZURhdGFTb3VyY2UgPSBudWxsXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGVtcFVzZURhdGFTb3VyY2UgPSBJbW11dGFibGUoe1xuICAgICAgICAgICAgZGF0YVNvdXJjZUlkOiB1c2VEUy5kYXRhU291cmNlSWQsXG4gICAgICAgICAgICBtYWluRGF0YVNvdXJjZUlkOiB1c2VEUy5tYWluRGF0YVNvdXJjZUlkLFxuICAgICAgICAgICAgcm9vdERhdGFTb3VyY2VJZDogdXNlRFMucm9vdERhdGFTb3VyY2VJZCxcbiAgICAgICAgICAgIGRhdGFWaWV3SWQ6IHVzZURTLmRhdGFWaWV3SWRcbiAgICAgICAgICB9KVxuICAgICAgICAgIGlmICghdXNlRGF0YVNvdXJjZSkge1xuICAgICAgICAgICAgdXNlRGF0YVNvdXJjZSA9IHRlbXBVc2VEYXRhU291cmNlXG4gICAgICAgICAgfVxuICAgICAgICAgIHVzZURhdGFTb3VyY2VzLnB1c2godGVtcFVzZURhdGFTb3VyY2UpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHVzZURhdGFTb3VyY2UgPSBjaGVja091dFVzZURhdGFTb3VyY2UobWVzc2FnZVdpZGdldElkLCBhY3Rpb25Db25maWcudXNlRGF0YVNvdXJjZSwgbWVzc2FnZVR5cGUpXG4gICAgaWYgKGFjdGlvbkNvbmZpZy51c2VEYXRhU291cmNlcykge1xuICAgICAgYWN0aW9uQ29uZmlnLnVzZURhdGFTb3VyY2VzLmZvckVhY2godXNlRFMgPT4ge1xuICAgICAgICBjb25zdCB0ZW1wVXNlRGF0YVNvdXJjZSA9IGNoZWNrT3V0VXNlRGF0YVNvdXJjZShtZXNzYWdlV2lkZ2V0SWQsIHVzZURTLCBtZXNzYWdlVHlwZSlcbiAgICAgICAgdGVtcFVzZURhdGFTb3VyY2UgJiYgdXNlRGF0YVNvdXJjZXMucHVzaCh0ZW1wVXNlRGF0YVNvdXJjZSlcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB1c2VEYXRhU291cmNlOiB1c2VEYXRhU291cmNlLFxuICAgIHVzZURhdGFTb3VyY2VzOiB1c2VEYXRhU291cmNlc1xuICB9XG59XG5cbmZ1bmN0aW9uIGNoZWNrT3V0VXNlRGF0YVNvdXJjZSAobWVzc2FnZVdpZGdldElkOiBzdHJpbmcsIG9sZFVzZURhdGFTb3VyY2U6IEltbXV0YWJsZS5JbW11dGFibGVPYmplY3Q8VXNlRGF0YVNvdXJjZT4sIG1lc3NhZ2VUeXBlOiBNZXNzYWdlVHlwZSkge1xuICBjb25zdCBjb25maWcgPSBnZXRBcHBTdG9yZSgpLmdldFN0YXRlKCkuYXBwU3RhdGVJbkJ1aWxkZXIuYXBwQ29uZmlnXG4gIC8vY29uc3Qgd2lkZ2V0SnNvbiA9IGNvbmZpZy53aWRnZXRzW21lc3NhZ2VXaWRnZXRJZF1cbiAgY29uc3QgbWVzc2FnZVdpZGdldFVzZURhdGFTb3VyY2VzID0gZ2V0RHNCeVdpZGdldElkKG1lc3NhZ2VXaWRnZXRJZCwgbWVzc2FnZVR5cGUpXG4gIGxldCBpbml0VXNlRGF0YVNvdXJjZSA9IG51bGxcbiAgbGV0IGlzTWFwRHMgPSBmYWxzZVxuXG4gIGNvbnN0IGRzSWQgPSBtZXNzYWdlV2lkZ2V0VXNlRGF0YVNvdXJjZXMgJiYgbWVzc2FnZVdpZGdldFVzZURhdGFTb3VyY2VzWzBdICYmIG1lc3NhZ2VXaWRnZXRVc2VEYXRhU291cmNlc1swXS5kYXRhU291cmNlSWRcbiAgaWYgKCFkc0lkKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGNvbnN0IGRzSnNvbiA9IGNvbmZpZy5kYXRhU291cmNlc1tkc0lkXVxuICBpZiAoZHNKc29uICYmICgoZHNKc29uLnR5cGUgPT09IEFyY0dJU0RhdGFTb3VyY2VUeXBlcy5XZWJNYXApIHx8IChkc0pzb24udHlwZSA9PT0gQXJjR0lTRGF0YVNvdXJjZVR5cGVzLldlYlNjZW5lKSkpIHtcbiAgICBpc01hcERzID0gdHJ1ZVxuICB9XG5cbiAgY29uc3QgZHNNID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKVxuICBjb25zdCBpc29sZFVzZURhdGFTb3VyY2VJc091dHB1dERzID0gZHNNLmdldERhdGFTb3VyY2Uob2xkVXNlRGF0YVNvdXJjZS5kYXRhU291cmNlSWQpPy5nZXREYXRhU291cmNlSnNvbigpPy5pc091dHB1dEZyb21XaWRnZXRcblxuICBpZiAoaXNNYXBEcykge1xuICAgIC8vIHdlYm1hcCBvciB3ZWJzY2VuZSBkc1xuICAgIGxldCBpc1VzZU9sZERzID0gZmFsc2VcbiAgICBpZiAobWVzc2FnZVdpZGdldFVzZURhdGFTb3VyY2VzKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1lc3NhZ2VXaWRnZXRVc2VEYXRhU291cmNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAobWVzc2FnZVdpZGdldFVzZURhdGFTb3VyY2VzW2ldLmRhdGFTb3VyY2VJZCA9PT0gb2xkVXNlRGF0YVNvdXJjZS5yb290RGF0YVNvdXJjZUlkKSB7XG4gICAgICAgICAgaXNVc2VPbGREcyA9IHRydWVcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGlzVXNlT2xkRHMpIHtcbiAgICAgIGluaXRVc2VEYXRhU291cmNlID0gb2xkVXNlRGF0YVNvdXJjZVxuICAgIH0gZWxzZSB7XG4gICAgICBpbml0VXNlRGF0YVNvdXJjZSA9IG51bGxcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gZmVhdHVyZWxheWVyIGRzXG4gICAgbGV0IGlzVXNlT2xkRHMgPSBmYWxzZVxuICAgIGlmIChtZXNzYWdlV2lkZ2V0VXNlRGF0YVNvdXJjZXMpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWVzc2FnZVdpZGdldFVzZURhdGFTb3VyY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IG9sZFVzZURhdGFTb3VyY2VJZCA9IGlzb2xkVXNlRGF0YVNvdXJjZUlzT3V0cHV0RHMgPyBvbGRVc2VEYXRhU291cmNlPy5tYWluRGF0YVNvdXJjZUlkIDogb2xkVXNlRGF0YVNvdXJjZT8uZGF0YVNvdXJjZUlkXG4gICAgICAgIGNvbnN0IGN1cnJlbnRVc2VEYXRhU291cmNlSWQgPSBpc29sZFVzZURhdGFTb3VyY2VJc091dHB1dERzID8gbWVzc2FnZVdpZGdldFVzZURhdGFTb3VyY2VzW2ldPy5tYWluRGF0YVNvdXJjZUlkIDogbWVzc2FnZVdpZGdldFVzZURhdGFTb3VyY2VzW2ldPy5kYXRhU291cmNlSWRcbiAgICAgICAgLy8gc3VwcG9ydCBkYXRhIHZpZXdcbiAgICAgICAgaWYgKGN1cnJlbnRVc2VEYXRhU291cmNlSWQgPT09IG9sZFVzZURhdGFTb3VyY2VJZCkge1xuICAgICAgICAgIGlzVXNlT2xkRHMgPSB0cnVlXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChpc1VzZU9sZERzKSB7XG4gICAgICBpbml0VXNlRGF0YVNvdXJjZSA9IG9sZFVzZURhdGFTb3VyY2VcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKG1lc3NhZ2VXaWRnZXRVc2VEYXRhU291cmNlcyAmJiBtZXNzYWdlV2lkZ2V0VXNlRGF0YVNvdXJjZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGluaXRVc2VEYXRhU291cmNlID0gSW1tdXRhYmxlKHtcbiAgICAgICAgICBkYXRhU291cmNlSWQ6IG1lc3NhZ2VXaWRnZXRVc2VEYXRhU291cmNlc1swXS5kYXRhU291cmNlSWQsXG4gICAgICAgICAgbWFpbkRhdGFTb3VyY2VJZDogbWVzc2FnZVdpZGdldFVzZURhdGFTb3VyY2VzWzBdLm1haW5EYXRhU291cmNlSWQsXG4gICAgICAgICAgcm9vdERhdGFTb3VyY2VJZDogbWVzc2FnZVdpZGdldFVzZURhdGFTb3VyY2VzWzBdLnJvb3REYXRhU291cmNlSWRcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGluaXRVc2VEYXRhU291cmNlID0gbnVsbFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBpbml0VXNlRGF0YVNvdXJjZVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VXNlRGF0YVNvdXJjZUluZm8gKHdpZGdldElkOiBzdHJpbmcsIHVzZURhdGFTb3VyY2U6IEltbXV0YWJsZS5JbW11dGFibGVPYmplY3Q8VXNlRGF0YVNvdXJjZT4sIHVzZURhdGFTb3VyY2VzOiBJbW11dGFibGUuSW1tdXRhYmxlQXJyYXk8VXNlRGF0YVNvdXJjZT4sIG1lc3NhZ2VUeXBlOiBNZXNzYWdlVHlwZSkge1xuICBjb25zdCBhcHBDb25maWcgPSBnZXRBcHBTdG9yZSgpLmdldFN0YXRlKCk/LmFwcFN0YXRlSW5CdWlsZGVyPy5hcHBDb25maWdcbiAgY29uc3Qgd2lkZ2V0SnNvbiA9IGFwcENvbmZpZz8ud2lkZ2V0cz8uW3dpZGdldElkXVxuICBsZXQgaXNSZWFkT25seSA9IGZhbHNlXG4gIGNvbnN0IGRzUm9vdElkcyA9IGdldERzUm9vdElkc0J5V2lkZ2V0SWQod2lkZ2V0SWQpXG4gIC8vaWYgKGRzUm9vdElkcyAmJiBkc1Jvb3RJZHMubGVuZ3RoID09PSAwICYmICh3aWRnZXRKc29uICYmIHdpZGdldEpzb24udXNlRGF0YVNvdXJjZXMgJiYgd2lkZ2V0SnNvbi51c2VEYXRhU291cmNlcy5sZW5ndGggPT09IDEpKSB7XG4gIC8vICBpc1JlYWRPbmx5ID0gdHJ1ZVxuICAvL31cblxuICAvL2lmICghZHNSb290SWRzICYmICh3aWRnZXRKc29uICYmIHdpZGdldEpzb24udXNlRGF0YVNvdXJjZXMgJiYgd2lkZ2V0SnNvbi51c2VEYXRhU291cmNlcy5sZW5ndGggPT09IDEpKSB7XG4gIC8vICBpc1JlYWRPbmx5ID0gdHJ1ZVxuICAvL31cblxuICBpZiAoIWRzUm9vdElkcyB8fCBkc1Jvb3RJZHM/Lmxlbmd0aCA9PT0gMCkge1xuICAgIGlzUmVhZE9ubHkgPSBjaGVja0lzT25seU9uZURzKHdpZGdldEpzb24sIG1lc3NhZ2VUeXBlLCBkc1Jvb3RJZHMpXG4gIH1cblxuICBjb25zdCBmcm9tRHNJZHMgPSBkc1Jvb3RJZHMgPyB1bmRlZmluZWQgOiBnZXREc0lkc0J5V2lkZ2V0SWQod2lkZ2V0SWQsIG1lc3NhZ2VUeXBlKVxuICBjb25zdCBkc1NlbGVjdG9yU291cmNlID0ge1xuICAgIGlzUmVhZE9ubHk6IGlzUmVhZE9ubHksXG4gICAgdXNlRGF0YVNvdXJjZTogdXNlRGF0YVNvdXJjZSxcbiAgICB1c2VEYXRhU291cmNlczogdXNlRGF0YVNvdXJjZXMgfHwgW10sXG4gICAgZnJvbVJvb3REc0lkczogZHNSb290SWRzLFxuICAgIGZyb21Ec0lkczogZnJvbURzSWRzXG4gIH1cblxuICByZXR1cm4gZHNTZWxlY3RvclNvdXJjZVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RHNCeVdpZGdldElkICh3SWQ6IHN0cmluZywgbWVzc2FnZVR5cGU6IE1lc3NhZ2VUeXBlKTogSW1tdXRhYmxlQXJyYXk8VXNlRGF0YVNvdXJjZT4ge1xuICBjb25zdCBtZXNzYWdlQ2FycnlEYXRhID0gZ2V0TWVzc2FnZUNhcnJ5RGF0YUJ5V2lkZ2V0SWQod0lkLCBtZXNzYWdlVHlwZSlcbiAgY29uc3QgYXBwQ29uZmlnID0gZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpPy5hcHBTdGF0ZUluQnVpbGRlcj8uYXBwQ29uZmlnXG4gIGNvbnN0IHdpZGdldEpzb24gPSBhcHBDb25maWc/LndpZGdldHM/Llt3SWRdXG4gIGNvbnN0IHVzZURhdGFTb3VyY2VzID0gd2lkZ2V0SnNvbj8udXNlRGF0YVNvdXJjZXMgfHwgSW1tdXRhYmxlKFtdKVxuICBjb25zdCBvdXRwdXREYXRhU291cmNlcyA9IGluaXRPdXRwdXREYXRhU291cmNlcyh3aWRnZXRKc29uPy5vdXRwdXREYXRhU291cmNlcykgfHwgSW1tdXRhYmxlKFtdKVxuICBjb25zdCBib3RoRGF0YXNvdXJjZSA9IHVzZURhdGFTb3VyY2VzPy5hc011dGFibGUoeyBkZWVwOiB0cnVlIH0pLmNvbmNhdChvdXRwdXREYXRhU291cmNlcz8uYXNNdXRhYmxlKHsgZGVlcDogdHJ1ZSB9KSlcbiAgc3dpdGNoIChtZXNzYWdlQ2FycnlEYXRhKSB7XG4gICAgY2FzZSBNZXNzYWdlQ2FycnlEYXRhLk91dHB1dERhdGFTb3VyY2U6XG4gICAgICByZXR1cm4gb3V0cHV0RGF0YVNvdXJjZXNcbiAgICBjYXNlIE1lc3NhZ2VDYXJyeURhdGEuVXNlRGF0YVNvdXJjZTpcbiAgICAgIHJldHVybiB1c2VEYXRhU291cmNlc1xuICAgIGNhc2UgTWVzc2FnZUNhcnJ5RGF0YS5Cb3RoRGF0YVNvdXJjZTpcbiAgICAgIHJldHVybiBJbW11dGFibGUoYm90aERhdGFzb3VyY2UpXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluaXRPdXRwdXREYXRhU291cmNlcyAob3V0cHV0RGF0YVNvdXJjZXMpOiBJbW11dGFibGVBcnJheTxVc2VEYXRhU291cmNlPiB7XG4gIGNvbnN0IGRzID0gb3V0cHV0RGF0YVNvdXJjZXM/Lm1hcChkc0lkID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgZGF0YVNvdXJjZUlkOiBkc0lkLFxuICAgICAgbWFpbkRhdGFTb3VyY2VJZDogZHNJZCxcbiAgICAgIHJvb3REYXRhU291cmNlSWQ6IG51bGxcbiAgICB9XG4gIH0pID8/IFtdXG4gIHJldHVybiBJbW11dGFibGUoZHMpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjaGVja0lzT25seU9uZURzICh3aWRnZXRKc29uOiBJTVdpZGdldEpzb24sIG1lc3NhZ2VUeXBlOiBNZXNzYWdlVHlwZSwgZHNSb290SWRzOiBJbW11dGFibGVBcnJheTxzdHJpbmc+KTogYm9vbGVhbiB7XG4gIGNvbnN0IG1lc3NhZ2VDYXJyeURhdGEgPSBnZXRNZXNzYWdlQ2FycnlEYXRhQnlXaWRnZXRJZCh3aWRnZXRKc29uPy5pZCwgbWVzc2FnZVR5cGUpXG4gIGNvbnN0IG91dHB1dERzID0gd2lkZ2V0SnNvbj8ub3V0cHV0RGF0YVNvdXJjZXMgfHwgW11cbiAgY29uc3QgdXNlRHMgPSB3aWRnZXRKc29uPy51c2VEYXRhU291cmNlcyB8fCBbXVxuICBpZiAoZHNSb290SWRzKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbiAgc3dpdGNoIChtZXNzYWdlQ2FycnlEYXRhKSB7XG4gICAgY2FzZSBNZXNzYWdlQ2FycnlEYXRhLk91dHB1dERhdGFTb3VyY2U6XG4gICAgICByZXR1cm4gb3V0cHV0RHM/Lmxlbmd0aCA9PT0gMVxuICAgIGNhc2UgTWVzc2FnZUNhcnJ5RGF0YS5Vc2VEYXRhU291cmNlOlxuICAgICAgcmV0dXJuIHVzZURzPy5sZW5ndGggPT09IDFcbiAgICBjYXNlIE1lc3NhZ2VDYXJyeURhdGEuQm90aERhdGFTb3VyY2U6XG4gICAgICBjb25zdCBkc0xlbmd0aCA9IG91dHB1dERzLmxlbmd0aCArIHVzZURzLmxlbmd0aFxuICAgICAgcmV0dXJuIGRzTGVuZ3RoID09PSAxXG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0RHNSb290SWRzQnlXaWRnZXRJZCAod0lkOiBzdHJpbmcpIHtcbiAgY29uc3QgYXBwQ29uZmlnID0gZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpPy5hcHBTdGF0ZUluQnVpbGRlcj8uYXBwQ29uZmlnXG4gIGNvbnN0IHdpZGdldEpzb24gPSBhcHBDb25maWc/LndpZGdldHM/Llt3SWRdXG4gIGNvbnN0IHJvb3RJZHMgPSBbXVxuICBjb25zdCBkc00gPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpXG4gIHdpZGdldEpzb24/LnVzZURhdGFTb3VyY2VzPy5mb3JFYWNoKCh1c2VEUzogSW1tdXRhYmxlLkltbXV0YWJsZU9iamVjdDxVc2VEYXRhU291cmNlPikgPT4ge1xuICAgIGNvbnN0IGRzID0gZHNNLmdldERhdGFTb3VyY2UodXNlRFMuZGF0YVNvdXJjZUlkKVxuICAgIGlmIChkcz8udHlwZSA9PT0gQXJjR0lTRGF0YVNvdXJjZVR5cGVzLldlYk1hcCB8fCBkcz8udHlwZSA9PT0gQXJjR0lTRGF0YVNvdXJjZVR5cGVzLldlYlNjZW5lKSB7IC8vIGlzIHJvb3QgZHNcbiAgICAgIHJvb3RJZHMucHVzaCh1c2VEUy5kYXRhU291cmNlSWQpXG4gICAgfVxuICB9KVxuICByZXR1cm4gcm9vdElkcy5sZW5ndGggPiAwID8gSW1tdXRhYmxlKHJvb3RJZHMpIDogdW5kZWZpbmVkXG59XG5cbmZ1bmN0aW9uIGdldERzSWRzQnlXaWRnZXRJZCAod0lkOiBzdHJpbmcsIG1lc3NhZ2VUeXBlOiBNZXNzYWdlVHlwZSkge1xuICAvL2NvbnN0IGFwcENvbmZpZyA9IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKT8uYXBwU3RhdGVJbkJ1aWxkZXI/LmFwcENvbmZpZ1xuICAvL2NvbnN0IHdpZGdldEpzb24gPSBhcHBDb25maWc/LndpZGdldHM/Llt3SWRdXG4gIGNvbnN0IG1lc3NhZ2VXaWRnZXRVc2VEYXRhU291cmNlcyA9IGdldERzQnlXaWRnZXRJZCh3SWQsIG1lc3NhZ2VUeXBlKVxuICByZXR1cm4gSW1tdXRhYmxlKG1lc3NhZ2VXaWRnZXRVc2VEYXRhU291cmNlcy5tYXAoKHVzZURTOiBJbW11dGFibGUuSW1tdXRhYmxlT2JqZWN0PFVzZURhdGFTb3VyY2U+KSA9PiB7XG4gICAgY29uc3QgZHNNID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKVxuICAgIGNvbnN0IGRzID0gZHNNLmdldERhdGFTb3VyY2UodXNlRFMuZGF0YVNvdXJjZUlkKVxuICAgIGxldCByZXN1bHREc1xuICAgIGlmIChkcyAmJiBkcy5pc0RhdGFWaWV3KSB7XG4gICAgICAvLyBzdXBwb3J0IGRhdGEgdmlld1xuICAgICAgcmVzdWx0RHMgPSBkcz8uZ2V0TWFpbkRhdGFTb3VyY2UoKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHREcyA9IGRzXG4gICAgfVxuICAgIHJldHVybiByZXN1bHREcz8uaWRcbiAgfSkgPz8gW10pXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./extensions/widgets/arcgis/arcgis-map/src/message-actions/action-utils.ts\n");

/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/message-actions/flash-action-setting.tsx":
/*!*******************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/message-actions/flash-action-setting.tsx ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ \"jimu-core\");\n/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ \"jimu-ui\");\n/* harmony import */ var jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui/advanced/setting-components */ \"jimu-ui/advanced/setting-components\");\n/* harmony import */ var jimu_ui_advanced_data_source_selector__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui/advanced/data-source-selector */ \"jimu-ui/advanced/data-source-selector\");\n/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-arcgis */ \"jimu-arcgis\");\n/* harmony import */ var jimu_theme__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-theme */ \"jimu-theme\");\n/* harmony import */ var jimu_ui_advanced_sql_expression_builder__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jimu-ui/advanced/sql-expression-builder */ \"jimu-ui/advanced/sql-expression-builder\");\n/* harmony import */ var _setting_translations_default__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../setting/translations/default */ \"./extensions/widgets/arcgis/arcgis-map/src/setting/translations/default.ts\");\n/* harmony import */ var _action_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./action-utils */ \"./extensions/widgets/arcgis/arcgis-map/src/message-actions/action-utils.ts\");\n/** @jsx jsx */\n\n\n\n\n\n\n\n\n\nconst DSSelectorTypes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)([jimu_ui_advanced_data_source_selector__WEBPACK_IMPORTED_MODULE_3__.AllDataSourceTypes.FeatureLayer, jimu_ui_advanced_data_source_selector__WEBPACK_IMPORTED_MODULE_3__.AllDataSourceTypes.SceneLayer]);\nclass _FlashActionSetting extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {\n    constructor(props) {\n        super(props);\n        this.modalStyle = {\n            position: 'absolute',\n            top: '0',\n            bottom: '0',\n            width: '259px',\n            height: 'auto',\n            borderRight: '',\n            borderBottom: '',\n            paddingBottom: '1px'\n        };\n        this.initOutputDataSources = (outputDataSources) => {\n            var _a;\n            const ds = (_a = outputDataSources === null || outputDataSources === void 0 ? void 0 : outputDataSources.map(dsId => {\n                return {\n                    dataSourceId: dsId,\n                    mainDataSourceId: dsId,\n                    rootDataSourceId: null\n                };\n            })) !== null && _a !== void 0 ? _a : [];\n            return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)(ds);\n        };\n        this.getInitConfig = () => {\n            const messageWidgetId = this.props.messageWidgetId;\n            const config = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appStateInBuilder.appConfig;\n            let messageUseDataSource = null;\n            let actionUseDataSource = null;\n            if (!this.props.config.messageUseDataSource) {\n                //if (messageWidgetJson && messageWidgetJson.useDataSources && messageWidgetJson.useDataSources[0] && messageWidgetJson.useDataSources.length === 1) {\n                const useDataSources = _action_utils__WEBPACK_IMPORTED_MODULE_8__.getDsByWidgetId(messageWidgetId, this.props.messageType);\n                if ((useDataSources === null || useDataSources === void 0 ? void 0 : useDataSources[0]) && (useDataSources === null || useDataSources === void 0 ? void 0 : useDataSources.length) === 1) {\n                    const dsJson = config.dataSources[useDataSources === null || useDataSources === void 0 ? void 0 : useDataSources[0].dataSourceId];\n                    if (dsJson && ((dsJson.type === jimu_arcgis__WEBPACK_IMPORTED_MODULE_4__.ArcGISDataSourceTypes.WebMap) || (dsJson.type === jimu_arcgis__WEBPACK_IMPORTED_MODULE_4__.ArcGISDataSourceTypes.WebScene))) {\n                        messageUseDataSource = null;\n                    }\n                    else {\n                        messageUseDataSource = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({\n                            dataSourceId: useDataSources === null || useDataSources === void 0 ? void 0 : useDataSources[0].dataSourceId,\n                            mainDataSourceId: useDataSources === null || useDataSources === void 0 ? void 0 : useDataSources[0].mainDataSourceId,\n                            dataViewId: useDataSources === null || useDataSources === void 0 ? void 0 : useDataSources[0].dataViewId,\n                            rootDataSourceId: useDataSources === null || useDataSources === void 0 ? void 0 : useDataSources[0].rootDataSourceId\n                        });\n                    }\n                }\n            }\n            else {\n                messageUseDataSource = this.checkAndGetInitUseDataSource(this.props.messageWidgetId, this.props.config.messageUseDataSource);\n            }\n            const actionWidgetId = this.props.widgetId;\n            const actionWidgetJson = config.widgets[actionWidgetId];\n            if (!this.props.config.actionUseDataSource) {\n                if (actionWidgetJson && actionWidgetJson.useDataSources && actionWidgetJson.useDataSources[0] && actionWidgetJson.useDataSources.length === 1) {\n                    const dsJson = config.dataSources[actionWidgetJson.useDataSources[0].dataSourceId];\n                    if (dsJson && ((dsJson.type === jimu_arcgis__WEBPACK_IMPORTED_MODULE_4__.ArcGISDataSourceTypes.WebMap) || (dsJson.type === jimu_arcgis__WEBPACK_IMPORTED_MODULE_4__.ArcGISDataSourceTypes.WebScene))) {\n                        actionUseDataSource = null;\n                    }\n                    else {\n                        actionUseDataSource = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({\n                            dataSourceId: actionWidgetJson.useDataSources[0].dataSourceId,\n                            dataViewId: actionWidgetJson.useDataSources[0].dataViewId,\n                            mainDataSourceId: actionWidgetJson.useDataSources[0].mainDataSourceId,\n                            rootDataSourceId: actionWidgetJson.useDataSources[0].rootDataSourceId\n                        });\n                    }\n                }\n            }\n            else {\n                actionUseDataSource = this.checkAndGetInitUseDataSource(this.props.widgetId, this.props.config.actionUseDataSource);\n            }\n            const oldActionUseDataSourceId = this.props.config.actionUseDataSource && this.props.config.actionUseDataSource.dataSourceId;\n            const newActionUseDataSourceId = actionUseDataSource && actionUseDataSource.dataSourceId;\n            if (newActionUseDataSourceId !== oldActionUseDataSourceId) {\n                return {\n                    messageUseDataSource: messageUseDataSource,\n                    actionUseDataSource: actionUseDataSource,\n                    sqlExprObj: null\n                };\n            }\n            else {\n                return {\n                    messageUseDataSource: messageUseDataSource,\n                    actionUseDataSource: actionUseDataSource,\n                    sqlExprObj: this.props.config.sqlExprObj\n                };\n            }\n        };\n        this.checkAndGetInitUseDataSource = (widgetId, oldUseDataSource) => {\n            var _a, _b, _c, _d;\n            const config = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appStateInBuilder.appConfig;\n            let initUseDataSource = null;\n            let isMapDs = false;\n            const dsM = jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceManager.getInstance();\n            const isoldUseDataSourceIsOutputDs = (_b = (_a = dsM.getDataSource(oldUseDataSource.dataSourceId)) === null || _a === void 0 ? void 0 : _a.getDataSourceJson()) === null || _b === void 0 ? void 0 : _b.isOutputFromWidget;\n            const useDataSources = _action_utils__WEBPACK_IMPORTED_MODULE_8__.getDsByWidgetId(widgetId, this.props.messageType);\n            const dsId = useDataSources && useDataSources[0] && useDataSources[0].dataSourceId;\n            if (!dsId) {\n                return null;\n            }\n            const dsJson = config.dataSources[dsId];\n            if (dsJson && ((dsJson.type === jimu_arcgis__WEBPACK_IMPORTED_MODULE_4__.ArcGISDataSourceTypes.WebMap) || (dsJson.type === jimu_arcgis__WEBPACK_IMPORTED_MODULE_4__.ArcGISDataSourceTypes.WebScene))) {\n                isMapDs = true;\n            }\n            if (isMapDs) {\n                // webmap or webscene ds\n                let isUseOldDs = false;\n                if (useDataSources) {\n                    for (let i = 0; i < useDataSources.length; i++) {\n                        if (useDataSources[i].dataSourceId === oldUseDataSource.rootDataSourceId) {\n                            isUseOldDs = true;\n                            break;\n                        }\n                    }\n                }\n                if (isUseOldDs) {\n                    initUseDataSource = oldUseDataSource;\n                }\n                else {\n                    initUseDataSource = null;\n                }\n            }\n            else {\n                // featurelayer ds\n                let isUseOldDs = false;\n                if (useDataSources) {\n                    for (let i = 0; i < useDataSources.length; i++) {\n                        const oldUseDataSourceId = isoldUseDataSourceIsOutputDs ? oldUseDataSource === null || oldUseDataSource === void 0 ? void 0 : oldUseDataSource.mainDataSourceId : oldUseDataSource === null || oldUseDataSource === void 0 ? void 0 : oldUseDataSource.dataSourceId;\n                        const currentUseDataSourceId = isoldUseDataSourceIsOutputDs ? (_c = useDataSources[i]) === null || _c === void 0 ? void 0 : _c.mainDataSourceId : (_d = useDataSources[i]) === null || _d === void 0 ? void 0 : _d.dataSourceId;\n                        if (currentUseDataSourceId === oldUseDataSourceId) {\n                            isUseOldDs = true;\n                            break;\n                        }\n                    }\n                }\n                if (isUseOldDs) {\n                    initUseDataSource = oldUseDataSource;\n                }\n                else {\n                    if ((useDataSources === null || useDataSources === void 0 ? void 0 : useDataSources.length) === 1) {\n                        initUseDataSource = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({\n                            dataSourceId: useDataSources === null || useDataSources === void 0 ? void 0 : useDataSources[0].dataSourceId,\n                            mainDataSourceId: useDataSources === null || useDataSources === void 0 ? void 0 : useDataSources[0].mainDataSourceId,\n                            dataViewId: useDataSources === null || useDataSources === void 0 ? void 0 : useDataSources[0].dataViewId,\n                            rootDataSourceId: useDataSources === null || useDataSources === void 0 ? void 0 : useDataSources[0].rootDataSourceId\n                        });\n                    }\n                    else {\n                        initUseDataSource = null;\n                    }\n                }\n            }\n            return initUseDataSource;\n        };\n        this.handleTriggerLayerChange = (useDataSources) => {\n            if (useDataSources && useDataSources.length > 0) {\n                this.handleTriggerLayerSelected(useDataSources[0]);\n            }\n            else {\n                this.handleRemoveLayerForTriggerLayer();\n            }\n        };\n        this.handleActionLayerChange = (useDataSources) => {\n            if (useDataSources && useDataSources.length > 0) {\n                this.handleActionLayerSelected(useDataSources[0]);\n            }\n            else {\n                this.handleRemoveLayerForActionLayer();\n            }\n        };\n        this.handleTriggerLayerSelected = (currentSelectedDs) => {\n            this.props.onSettingChange({\n                actionId: this.props.actionId,\n                config: this.props.config.set('messageUseDataSource', currentSelectedDs)\n            });\n        };\n        this.handleActionLayerSelected = (currentSelectedDs) => {\n            this.props.onSettingChange({\n                actionId: this.props.actionId,\n                config: this.props.config.set('actionUseDataSource', currentSelectedDs).set('sqlExprObj', null)\n            });\n        };\n        this.handleRemoveLayerForTriggerLayer = () => {\n            this.props.onSettingChange({\n                actionId: this.props.actionId,\n                config: this.props.config.set('messageUseDataSource', null)\n            });\n        };\n        this.handleRemoveLayerForActionLayer = () => {\n            this.props.onSettingChange({\n                actionId: this.props.actionId,\n                config: this.props.config.set('actionUseDataSource', null).set('sqlExprObj', null)\n            });\n        };\n        this.showSqlExprPopup = () => {\n            this.setState({ isSqlExprShow: true });\n        };\n        this.toggleSqlExprPopup = () => {\n            this.setState({ isSqlExprShow: !this.state.isSqlExprShow });\n        };\n        this.onSqlExprBuilderChange = (sqlExprObj) => {\n            this.props.onSettingChange({\n                actionId: this.props.actionId,\n                config: this.props.config.set('sqlExprObj', sqlExprObj)\n            });\n        };\n        this.onMessageFieldSelected = (allSelectedFields, ds) => {\n            this.props.onSettingChange({\n                actionId: this.props.actionId,\n                config: this.props.config.set('messageUseDataSource', {\n                    dataSourceId: this.props.config.messageUseDataSource.dataSourceId,\n                    mainDataSourceId: this.props.config.messageUseDataSource.mainDataSourceId,\n                    dataViewId: this.props.config.messageUseDataSource.dataViewId,\n                    rootDataSourceId: this.props.config.messageUseDataSource.rootDataSourceId,\n                    fields: allSelectedFields.map(f => f.jimuName)\n                })\n            });\n        };\n        this.onActionFieldSelected = (allSelectedFields, ds) => {\n            this.props.onSettingChange({\n                actionId: this.props.actionId,\n                config: this.props.config.set('actionUseDataSource', {\n                    dataSourceId: this.props.config.actionUseDataSource.dataSourceId,\n                    mainDataSourceId: this.props.config.actionUseDataSource.mainDataSourceId,\n                    dataViewId: this.props.config.actionUseDataSource.dataViewId,\n                    rootDataSourceId: this.props.config.actionUseDataSource.rootDataSourceId,\n                    fields: allSelectedFields.map(f => f.jimuName)\n                })\n            });\n        };\n        this.swicthEnabledDataRelationShip = (checked) => {\n            this.props.onSettingChange({\n                actionId: this.props.actionId,\n                config: this.props.config.set('enabledDataRelationShip', checked)\n            });\n        };\n        this.checkTrigerLayerIsSameToActionLayer = () => {\n            if (this.props.config.messageUseDataSource && this.props.config.actionUseDataSource) {\n                if (this.props.config.messageUseDataSource.mainDataSourceId === this.props.config.actionUseDataSource.mainDataSourceId &&\n                    this.props.config.messageUseDataSource.rootDataSourceId === this.props.config.actionUseDataSource.rootDataSourceId) {\n                    return true;\n                }\n                else {\n                    return false;\n                }\n            }\n            else {\n                return false;\n            }\n        };\n        this.getDsRootIdsByWidgetId = (wId) => {\n            var _a, _b, _c, _d;\n            const appConfig = (_b = (_a = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState()) === null || _a === void 0 ? void 0 : _a.appStateInBuilder) === null || _b === void 0 ? void 0 : _b.appConfig;\n            const widgetJson = (_c = appConfig === null || appConfig === void 0 ? void 0 : appConfig.widgets) === null || _c === void 0 ? void 0 : _c[wId];\n            const rootIds = [];\n            const dsM = jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceManager.getInstance();\n            (_d = widgetJson === null || widgetJson === void 0 ? void 0 : widgetJson.useDataSources) === null || _d === void 0 ? void 0 : _d.forEach((useDS) => {\n                const ds = dsM.getDataSource(useDS.dataSourceId);\n                if ((ds === null || ds === void 0 ? void 0 : ds.type) === jimu_arcgis__WEBPACK_IMPORTED_MODULE_4__.ArcGISDataSourceTypes.WebMap || (ds === null || ds === void 0 ? void 0 : ds.type) === jimu_arcgis__WEBPACK_IMPORTED_MODULE_4__.ArcGISDataSourceTypes.WebScene) { // is root ds\n                    rootIds.push(useDS.dataSourceId);\n                }\n            });\n            return rootIds.length > 0 ? (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)(rootIds) : undefined;\n        };\n        this.getDsIdsByWidgetId = (wId) => {\n            var _a;\n            const useDataSources = _action_utils__WEBPACK_IMPORTED_MODULE_8__.getDsByWidgetId(wId, this.props.messageType);\n            return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)((_a = useDataSources === null || useDataSources === void 0 ? void 0 : useDataSources.map((useDS) => useDS === null || useDS === void 0 ? void 0 : useDS.mainDataSourceId)) !== null && _a !== void 0 ? _a : []);\n        };\n        this.getDsSelectorSourceData = (widgetId, useDataSource) => {\n            var _a, _b, _c;\n            const appConfig = (_b = (_a = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState()) === null || _a === void 0 ? void 0 : _a.appStateInBuilder) === null || _b === void 0 ? void 0 : _b.appConfig;\n            const widgetJson = (_c = appConfig === null || appConfig === void 0 ? void 0 : appConfig.widgets) === null || _c === void 0 ? void 0 : _c[widgetId];\n            const dsRootIds = this.getDsRootIdsByWidgetId(widgetId);\n            const isReadOnly = _action_utils__WEBPACK_IMPORTED_MODULE_8__.checkIsOnlyOneDs(widgetJson, this.props.messageType, dsRootIds);\n            const useDataSources = (useDataSource && useDataSource.dataSourceId)\n                ? (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)([useDataSource])\n                : (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)([]);\n            const fromDsIds = dsRootIds ? undefined : this.getDsIdsByWidgetId(widgetId);\n            const dsSelectorSource = {\n                isReadOnly: isReadOnly,\n                useDataSources: useDataSources,\n                fromRootDsIds: dsRootIds,\n                fromDsIds: fromDsIds\n            };\n            return dsSelectorSource;\n        };\n        this.checkIsDisableDataView = (widgetId) => {\n            var _a, _b, _c, _d;\n            if (this.props.messageType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageType.DataRecordsSelectionChange) {\n                return true;\n            }\n            const appConfig = (_b = (_a = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState()) === null || _a === void 0 ? void 0 : _a.appStateInBuilder) === null || _b === void 0 ? void 0 : _b.appConfig;\n            const widgetJson = (_c = appConfig === null || appConfig === void 0 ? void 0 : appConfig.widgets) === null || _c === void 0 ? void 0 : _c[widgetId];\n            if (widgetJson) {\n                const widgetLabel = (_d = widgetJson === null || widgetJson === void 0 ? void 0 : widgetJson.manifest) === null || _d === void 0 ? void 0 : _d.label;\n                if (widgetLabel === 'Map') {\n                    return true;\n                }\n                else {\n                    return false;\n                }\n            }\n            else {\n                return false;\n            }\n        };\n        this.modalStyle.borderRight = '1px solid black';\n        this.modalStyle.borderBottom = '1px solid black';\n        this.state = {\n            isShowLayerList: false,\n            currentLayerType: null,\n            isSqlExprShow: false\n        };\n    }\n    componentDidMount() {\n        const initConfig = this.getInitConfig();\n        this.props.onSettingChange({\n            actionId: this.props.actionId,\n            config: this.props.config.set('messageUseDataSource', initConfig.messageUseDataSource)\n                .set('actionUseDataSource', initConfig.actionUseDataSource).set('sqlExprObj', initConfig.sqlExprObj)\n        });\n    }\n    getStyle(theme) {\n        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.css `\n      .setting-header {\n        padding: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(10)} ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(16)} ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(0)} ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(16)}\n      }\n\n      .deleteIcon {\n        cursor: pointer;\n        opacity: .8;\n      }\n\n      .deleteIcon:hover {\n        opacity: 1;\n      }\n\n      .sql-expr-display {\n        width: 100%;\n        height: auto;\n        min-height: 60px;\n        line-height: 25px;\n        padding: 3px 5px;\n        color: ${theme.colors.palette.dark[300]};\n        border: 1px solid ${theme.colors.palette.light[500]};\n      }\n\n      .relate-panel-left {\n        flex: auto;\n        .action-select-chooser {\n          margin-top: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(12)};\n        }\n      }\n    `;\n    }\n    render() {\n        var _a, _b;\n        const actionUseDataSourceInstance = this.props.config.actionUseDataSource &&\n            jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceManager.getInstance().getDataSource(this.props.config.actionUseDataSource.dataSourceId);\n        const { theme } = this.props;\n        const triggerDsSelectorSourceData = this.getDsSelectorSourceData(this.props.messageWidgetId, this.props.config.messageUseDataSource);\n        const actionDsSelectorSourceData = this.getDsSelectorSourceData(this.props.widgetId, this.props.config.actionUseDataSource);\n        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { css: this.getStyle(this.props.theme) },\n            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.SettingSection, { title: this.props.intl.formatMessage({ id: 'mapAction_TriggerLayer', defaultMessage: _setting_translations_default__WEBPACK_IMPORTED_MODULE_7__[\"default\"].mapAction_TriggerLayer }) },\n                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_data_source_selector__WEBPACK_IMPORTED_MODULE_3__.DataSourceSelector, { types: DSSelectorTypes, useDataSources: triggerDsSelectorSourceData.useDataSources, fromRootDsIds: triggerDsSelectorSourceData.fromRootDsIds, fromDsIds: triggerDsSelectorSourceData.fromDsIds, closeDataSourceListOnChange: true, disableRemove: () => triggerDsSelectorSourceData.isReadOnly, disableDataSourceList: triggerDsSelectorSourceData.isReadOnly, hideAddDataButton: true, hideTypeDropdown: true, mustUseDataSource: true, onChange: this.handleTriggerLayerChange, widgetId: this.props.messageWidgetId, disableDataView: true, hideDataView: this.checkIsDisableDataView(this.props.messageWidgetId), enableToSelectOutputDsFromSelf: true })),\n            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.SettingSection, { title: this.props.intl.formatMessage({ id: 'mapAction_ActionLayer', defaultMessage: _setting_translations_default__WEBPACK_IMPORTED_MODULE_7__[\"default\"].mapAction_ActionLayer }) },\n                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_data_source_selector__WEBPACK_IMPORTED_MODULE_3__.DataSourceSelector, { types: DSSelectorTypes, useDataSources: actionDsSelectorSourceData.useDataSources, fromRootDsIds: actionDsSelectorSourceData.fromRootDsIds, fromDsIds: actionDsSelectorSourceData.fromDsIds, closeDataSourceListOnChange: true, disableRemove: () => actionDsSelectorSourceData.isReadOnly, disableDataSourceList: actionDsSelectorSourceData.isReadOnly, hideAddDataButton: true, hideTypeDropdown: true, mustUseDataSource: true, onChange: this.handleActionLayerChange, widgetId: this.props.widgetId, hideDataView: true, enableToSelectOutputDsFromSelf: true })),\n            this.props.config && this.props.config.messageUseDataSource && this.props.config.actionUseDataSource &&\n                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.SettingSection, { title: this.props.intl.formatMessage({ id: 'mapAction_Conditions', defaultMessage: _setting_translations_default__WEBPACK_IMPORTED_MODULE_7__[\"default\"].mapAction_Conditions }) },\n                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.SettingRow, { label: this.props.intl.formatMessage({ id: 'mapAction_RelateMessage', defaultMessage: _setting_translations_default__WEBPACK_IMPORTED_MODULE_7__[\"default\"].mapAction_RelateMessage }) },\n                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Switch, { checked: this.props.config.enabledDataRelationShip, onChange: evt => { this.swicthEnabledDataRelationShip(evt.target.checked); } })),\n                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.SettingRow, null,\n                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Collapse, { isOpen: this.props.config.enabledDataRelationShip, className: 'w-100' },\n                            this.checkTrigerLayerIsSameToActionLayer() &&\n                                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: 'w-100 border p-1 mr-2' }, this.props.intl.formatMessage({ id: 'mapAction_AutoBind', defaultMessage: _setting_translations_default__WEBPACK_IMPORTED_MODULE_7__[\"default\"].mapAction_AutoBind })),\n                            !this.checkTrigerLayerIsSameToActionLayer() && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: 'w-100 d-flex align-items-center' },\n                                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: 'd-flex flex-column relate-panel-left' },\n                                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_data_source_selector__WEBPACK_IMPORTED_MODULE_3__.FieldSelector, { className: 'w-100', useDataSources: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)([(_a = this.props.config.messageUseDataSource) === null || _a === void 0 ? void 0 : _a.asMutable({ deep: true })]), isDataSourceDropDownHidden: true, placeholder: this.props.intl.formatMessage({ id: 'mapAction_TriggerLayerField', defaultMessage: _setting_translations_default__WEBPACK_IMPORTED_MODULE_7__[\"default\"].mapAction_TriggerLayerField }), onChange: this.onMessageFieldSelected, useDropdown: true, isSearchInputHidden: true, selectedFields: this.props.config.messageUseDataSource && this.props.config.messageUseDataSource.fields\n                                            ? this.props.config.messageUseDataSource.fields\n                                            : (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)([]) }),\n                                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_data_source_selector__WEBPACK_IMPORTED_MODULE_3__.FieldSelector, { className: 'w-100 action-select-chooser', placeholder: this.props.intl.formatMessage({ id: 'mapAction_ActionLayerField', defaultMessage: _setting_translations_default__WEBPACK_IMPORTED_MODULE_7__[\"default\"].mapAction_ActionLayerField }), useDataSources: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)([(_b = this.props.config.actionUseDataSource) === null || _b === void 0 ? void 0 : _b.asMutable({ deep: true })]), isDataSourceDropDownHidden: true, onChange: this.onActionFieldSelected, useDropdown: true, isSearchInputHidden: true, selectedFields: this.props.config.actionUseDataSource && this.props.config.actionUseDataSource.fields\n                                            ? this.props.config.actionUseDataSource.fields\n                                            : (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)([]) })),\n                                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Icon, { className: 'flex-none', width: 12, height: 40, color: theme.colors.dark[400], icon: __webpack_require__(/*! jimu-ui/lib/icons/link-combined.svg */ \"./jimu-ui/lib/icons/link-combined.svg\") })))),\n                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.SettingRow, null,\n                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { type: 'link', disabled: !this.props.config.actionUseDataSource, className: 'w-100 d-flex justify-content-start', onClick: this.showSqlExprPopup },\n                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: 'w-100 text-truncate', style: { textAlign: 'start' } }, this.props.intl.formatMessage({ id: 'mapAction_MoreConditions', defaultMessage: _setting_translations_default__WEBPACK_IMPORTED_MODULE_7__[\"default\"].mapAction_MoreConditions }))),\n                        this.props.config.actionUseDataSource && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceComponent, { useDataSource: this.props.config.actionUseDataSource }, (ds) => {\n                            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_sql_expression_builder__WEBPACK_IMPORTED_MODULE_6__.SqlExpressionBuilderPopup, { dataSource: ds, mode: jimu_core__WEBPACK_IMPORTED_MODULE_0__.SqlExpressionMode.Simple, isOpen: this.state.isSqlExprShow, toggle: this.toggleSqlExprPopup, expression: this.props.config.sqlExprObj, onChange: (sqlExprObj) => { this.onSqlExprBuilderChange(sqlExprObj); } }));\n                        })),\n                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_advanced_setting_components__WEBPACK_IMPORTED_MODULE_2__.SettingRow, null,\n                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: 'sql-expr-display' }, this.props.config.sqlExprObj && actionUseDataSourceInstance\n                            ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.dataSourceUtils.getArcGISSQL(this.props.config.sqlExprObj, actionUseDataSourceInstance).displaySQL\n                            : this.props.intl.formatMessage({ id: 'mapAction_SetExpression', defaultMessage: _setting_translations_default__WEBPACK_IMPORTED_MODULE_7__[\"default\"].mapAction_SetExpression }))))));\n    }\n}\n_FlashActionSetting.defaultProps = {\n    config: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({\n        messageUseDataSource: null,\n        actionUseDataSource: null,\n        sqlExprObj: null,\n        enabledDataRelationShip: true\n    })\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,jimu_theme__WEBPACK_IMPORTED_MODULE_5__.withTheme)(_FlashActionSetting));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FyY2dpcy1tYXAvc3JjL21lc3NhZ2UtYWN0aW9ucy9mbGFzaC1hY3Rpb24tc2V0dGluZy50c3guanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBc0JBO0FBRUE7QUFZQTtBQUNBO0FBWkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF3QkE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQThDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBOztBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQWpYQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBMkpBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOztBQUVBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFrQkE7QUFDQTs7Ozs7O0FBTUE7OztBQUdBO0FBQ0E7QUFzS0E7O0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQWtCQTtBQUNBO0FBbUJBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBRUE7QUFNQTtBQUNBO0FBR0E7QUFJQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBT0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQU1BOztBQXZkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbWRBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYXJjZ2lzLW1hcC9zcmMvbWVzc2FnZS1hY3Rpb25zL2ZsYXNoLWFjdGlvbi1zZXR0aW5nLnRzeD8xOWNkIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsIGNzcywganN4LCBBY3Rpb25TZXR0aW5nUHJvcHMsIFNlcmlhbGl6ZWRTdHlsZXMsIEltbXV0YWJsZU9iamVjdCwgRGF0YVNvdXJjZSxcbiAgVGhlbWVWYXJpYWJsZXMsIHBvbGlzaGVkLCBnZXRBcHBTdG9yZSwgSW1tdXRhYmxlLFxuICBVc2VEYXRhU291cmNlLCBEYXRhU291cmNlQ29tcG9uZW50LCBJTVVzZURhdGFTb3VyY2UsIElNRmllbGRTY2hlbWEsIElNU3FsRXhwcmVzc2lvbixcbiAgZGF0YVNvdXJjZVV0aWxzLCBEYXRhU291cmNlTWFuYWdlciwgTWVzc2FnZVR5cGUsIFNxbEV4cHJlc3Npb25Nb2RlLCBJbW11dGFibGVBcnJheVxufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBCdXR0b24sIEljb24sIFN3aXRjaCwgQ29sbGFwc2UgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgU2V0dGluZ1NlY3Rpb24sIFNldHRpbmdSb3cgfSBmcm9tICdqaW11LXVpL2FkdmFuY2VkL3NldHRpbmctY29tcG9uZW50cydcbmltcG9ydCB7IEZpZWxkU2VsZWN0b3IsIEFsbERhdGFTb3VyY2VUeXBlcywgRGF0YVNvdXJjZVNlbGVjdG9yIH0gZnJvbSAnamltdS11aS9hZHZhbmNlZC9kYXRhLXNvdXJjZS1zZWxlY3RvcidcbmltcG9ydCB7IEFyY0dJU0RhdGFTb3VyY2VUeXBlcyB9IGZyb20gJ2ppbXUtYXJjZ2lzJ1xuaW1wb3J0IHsgd2l0aFRoZW1lIH0gZnJvbSAnamltdS10aGVtZSdcblxuaW1wb3J0IHsgU3FsRXhwcmVzc2lvbkJ1aWxkZXJQb3B1cCB9IGZyb20gJ2ppbXUtdWkvYWR2YW5jZWQvc3FsLWV4cHJlc3Npb24tYnVpbGRlcidcbmltcG9ydCBkZWZhdWx0TWVzc2FnZXMgZnJvbSAnLi4vc2V0dGluZy90cmFuc2xhdGlvbnMvZGVmYXVsdCdcbmltcG9ydCAqIGFzIGFjdGlvblV0aWxzIGZyb20gJy4vYWN0aW9uLXV0aWxzJ1xuXG5pbnRlcmZhY2UgRXh0cmFQcm9wcyB7XG4gIHRoZW1lPzogVGhlbWVWYXJpYWJsZXNcbn1cblxuaW50ZXJmYWNlIFN0YXRlcyB7XG4gIGlzU2hvd0xheWVyTGlzdDogYm9vbGVhblxuICBjdXJyZW50TGF5ZXJUeXBlOiAndHJpZ2dlcicgfCAnYWN0aW9uJ1xuICBpc1NxbEV4cHJTaG93OiBib29sZWFuXG59XG5cbmludGVyZmFjZSBDb25maWcge1xuICBtZXNzYWdlVXNlRGF0YVNvdXJjZTogVXNlRGF0YVNvdXJjZVxuICBhY3Rpb25Vc2VEYXRhU291cmNlOiBVc2VEYXRhU291cmNlXG4gIHNxbEV4cHJPYmo/OiBJTVNxbEV4cHJlc3Npb25cblxuICBlbmFibGVkRGF0YVJlbGF0aW9uU2hpcD86IGJvb2xlYW5cbn1cblxuZXhwb3J0IHR5cGUgSU1Db25maWcgPSBJbW11dGFibGVPYmplY3Q8Q29uZmlnPlxuXG5jb25zdCBEU1NlbGVjdG9yVHlwZXMgPSBJbW11dGFibGUoW0FsbERhdGFTb3VyY2VUeXBlcy5GZWF0dXJlTGF5ZXIsIEFsbERhdGFTb3VyY2VUeXBlcy5TY2VuZUxheWVyXSlcblxuY2xhc3MgX0ZsYXNoQWN0aW9uU2V0dGluZyBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8QWN0aW9uU2V0dGluZ1Byb3BzPElNQ29uZmlnPiAmIEV4dHJhUHJvcHMsIFN0YXRlcz4ge1xuICBtb2RhbFN0eWxlOiBhbnkgPSB7XG4gICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgdG9wOiAnMCcsXG4gICAgYm90dG9tOiAnMCcsXG4gICAgd2lkdGg6ICcyNTlweCcsXG4gICAgaGVpZ2h0OiAnYXV0bycsXG4gICAgYm9yZGVyUmlnaHQ6ICcnLFxuICAgIGJvcmRlckJvdHRvbTogJycsXG4gICAgcGFkZGluZ0JvdHRvbTogJzFweCdcbiAgfVxuXG4gIGNvbnN0cnVjdG9yIChwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKVxuXG4gICAgdGhpcy5tb2RhbFN0eWxlLmJvcmRlclJpZ2h0ID0gJzFweCBzb2xpZCBibGFjaydcbiAgICB0aGlzLm1vZGFsU3R5bGUuYm9yZGVyQm90dG9tID0gJzFweCBzb2xpZCBibGFjaydcblxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBpc1Nob3dMYXllckxpc3Q6IGZhbHNlLFxuICAgICAgY3VycmVudExheWVyVHlwZTogbnVsbCxcbiAgICAgIGlzU3FsRXhwclNob3c6IGZhbHNlXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICBjb25maWc6IEltbXV0YWJsZSh7XG4gICAgICBtZXNzYWdlVXNlRGF0YVNvdXJjZTogbnVsbCxcbiAgICAgIGFjdGlvblVzZURhdGFTb3VyY2U6IG51bGwsXG4gICAgICBzcWxFeHByT2JqOiBudWxsLFxuICAgICAgZW5hYmxlZERhdGFSZWxhdGlvblNoaXA6IHRydWVcbiAgICB9KVxuICB9XG5cbiAgaW5pdE91dHB1dERhdGFTb3VyY2VzID0gKG91dHB1dERhdGFTb3VyY2VzKTogSW1tdXRhYmxlQXJyYXk8VXNlRGF0YVNvdXJjZT4gPT4ge1xuICAgIGNvbnN0IGRzID0gb3V0cHV0RGF0YVNvdXJjZXM/Lm1hcChkc0lkID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRhdGFTb3VyY2VJZDogZHNJZCxcbiAgICAgICAgbWFpbkRhdGFTb3VyY2VJZDogZHNJZCxcbiAgICAgICAgcm9vdERhdGFTb3VyY2VJZDogbnVsbFxuICAgICAgfVxuICAgIH0pID8/IFtdXG4gICAgcmV0dXJuIEltbXV0YWJsZShkcylcbiAgfVxuXG4gIGdldEluaXRDb25maWcgPSAoKSA9PiB7XG4gICAgY29uc3QgbWVzc2FnZVdpZGdldElkID0gdGhpcy5wcm9wcy5tZXNzYWdlV2lkZ2V0SWRcbiAgICBjb25zdCBjb25maWcgPSBnZXRBcHBTdG9yZSgpLmdldFN0YXRlKCkuYXBwU3RhdGVJbkJ1aWxkZXIuYXBwQ29uZmlnXG5cbiAgICBsZXQgbWVzc2FnZVVzZURhdGFTb3VyY2U6IElNVXNlRGF0YVNvdXJjZSA9IG51bGxcbiAgICBsZXQgYWN0aW9uVXNlRGF0YVNvdXJjZTogSU1Vc2VEYXRhU291cmNlID0gbnVsbFxuXG4gICAgaWYgKCF0aGlzLnByb3BzLmNvbmZpZy5tZXNzYWdlVXNlRGF0YVNvdXJjZSkge1xuICAgICAgLy9pZiAobWVzc2FnZVdpZGdldEpzb24gJiYgbWVzc2FnZVdpZGdldEpzb24udXNlRGF0YVNvdXJjZXMgJiYgbWVzc2FnZVdpZGdldEpzb24udXNlRGF0YVNvdXJjZXNbMF0gJiYgbWVzc2FnZVdpZGdldEpzb24udXNlRGF0YVNvdXJjZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICBjb25zdCB1c2VEYXRhU291cmNlcyA9IGFjdGlvblV0aWxzLmdldERzQnlXaWRnZXRJZChtZXNzYWdlV2lkZ2V0SWQsIHRoaXMucHJvcHMubWVzc2FnZVR5cGUpXG4gICAgICBpZiAodXNlRGF0YVNvdXJjZXM/LlswXSAmJiB1c2VEYXRhU291cmNlcz8ubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGNvbnN0IGRzSnNvbiA9IGNvbmZpZy5kYXRhU291cmNlc1t1c2VEYXRhU291cmNlcz8uWzBdLmRhdGFTb3VyY2VJZF1cbiAgICAgICAgaWYgKGRzSnNvbiAmJiAoKGRzSnNvbi50eXBlID09PSBBcmNHSVNEYXRhU291cmNlVHlwZXMuV2ViTWFwKSB8fCAoZHNKc29uLnR5cGUgPT09IEFyY0dJU0RhdGFTb3VyY2VUeXBlcy5XZWJTY2VuZSkpKSB7XG4gICAgICAgICAgbWVzc2FnZVVzZURhdGFTb3VyY2UgPSBudWxsXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWVzc2FnZVVzZURhdGFTb3VyY2UgPSBJbW11dGFibGUoe1xuICAgICAgICAgICAgZGF0YVNvdXJjZUlkOiB1c2VEYXRhU291cmNlcz8uWzBdLmRhdGFTb3VyY2VJZCxcbiAgICAgICAgICAgIG1haW5EYXRhU291cmNlSWQ6IHVzZURhdGFTb3VyY2VzPy5bMF0ubWFpbkRhdGFTb3VyY2VJZCxcbiAgICAgICAgICAgIGRhdGFWaWV3SWQ6IHVzZURhdGFTb3VyY2VzPy5bMF0uZGF0YVZpZXdJZCxcbiAgICAgICAgICAgIHJvb3REYXRhU291cmNlSWQ6IHVzZURhdGFTb3VyY2VzPy5bMF0ucm9vdERhdGFTb3VyY2VJZFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbWVzc2FnZVVzZURhdGFTb3VyY2UgPSB0aGlzLmNoZWNrQW5kR2V0SW5pdFVzZURhdGFTb3VyY2UodGhpcy5wcm9wcy5tZXNzYWdlV2lkZ2V0SWQsIHRoaXMucHJvcHMuY29uZmlnLm1lc3NhZ2VVc2VEYXRhU291cmNlKVxuICAgIH1cblxuICAgIGNvbnN0IGFjdGlvbldpZGdldElkID0gdGhpcy5wcm9wcy53aWRnZXRJZFxuICAgIGNvbnN0IGFjdGlvbldpZGdldEpzb24gPSBjb25maWcud2lkZ2V0c1thY3Rpb25XaWRnZXRJZF1cblxuICAgIGlmICghdGhpcy5wcm9wcy5jb25maWcuYWN0aW9uVXNlRGF0YVNvdXJjZSkge1xuICAgICAgaWYgKGFjdGlvbldpZGdldEpzb24gJiYgYWN0aW9uV2lkZ2V0SnNvbi51c2VEYXRhU291cmNlcyAmJiBhY3Rpb25XaWRnZXRKc29uLnVzZURhdGFTb3VyY2VzWzBdICYmIGFjdGlvbldpZGdldEpzb24udXNlRGF0YVNvdXJjZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGNvbnN0IGRzSnNvbiA9IGNvbmZpZy5kYXRhU291cmNlc1thY3Rpb25XaWRnZXRKc29uLnVzZURhdGFTb3VyY2VzWzBdLmRhdGFTb3VyY2VJZF1cbiAgICAgICAgaWYgKGRzSnNvbiAmJiAoKGRzSnNvbi50eXBlID09PSBBcmNHSVNEYXRhU291cmNlVHlwZXMuV2ViTWFwKSB8fCAoZHNKc29uLnR5cGUgPT09IEFyY0dJU0RhdGFTb3VyY2VUeXBlcy5XZWJTY2VuZSkpKSB7XG4gICAgICAgICAgYWN0aW9uVXNlRGF0YVNvdXJjZSA9IG51bGxcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhY3Rpb25Vc2VEYXRhU291cmNlID0gSW1tdXRhYmxlKHtcbiAgICAgICAgICAgIGRhdGFTb3VyY2VJZDogYWN0aW9uV2lkZ2V0SnNvbi51c2VEYXRhU291cmNlc1swXS5kYXRhU291cmNlSWQsXG4gICAgICAgICAgICBkYXRhVmlld0lkOiBhY3Rpb25XaWRnZXRKc29uLnVzZURhdGFTb3VyY2VzWzBdLmRhdGFWaWV3SWQsXG4gICAgICAgICAgICBtYWluRGF0YVNvdXJjZUlkOiBhY3Rpb25XaWRnZXRKc29uLnVzZURhdGFTb3VyY2VzWzBdLm1haW5EYXRhU291cmNlSWQsXG4gICAgICAgICAgICByb290RGF0YVNvdXJjZUlkOiBhY3Rpb25XaWRnZXRKc29uLnVzZURhdGFTb3VyY2VzWzBdLnJvb3REYXRhU291cmNlSWRcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGFjdGlvblVzZURhdGFTb3VyY2UgPSB0aGlzLmNoZWNrQW5kR2V0SW5pdFVzZURhdGFTb3VyY2UodGhpcy5wcm9wcy53aWRnZXRJZCwgdGhpcy5wcm9wcy5jb25maWcuYWN0aW9uVXNlRGF0YVNvdXJjZSlcbiAgICB9XG5cbiAgICBjb25zdCBvbGRBY3Rpb25Vc2VEYXRhU291cmNlSWQgPSB0aGlzLnByb3BzLmNvbmZpZy5hY3Rpb25Vc2VEYXRhU291cmNlICYmIHRoaXMucHJvcHMuY29uZmlnLmFjdGlvblVzZURhdGFTb3VyY2UuZGF0YVNvdXJjZUlkXG4gICAgY29uc3QgbmV3QWN0aW9uVXNlRGF0YVNvdXJjZUlkID0gYWN0aW9uVXNlRGF0YVNvdXJjZSAmJiBhY3Rpb25Vc2VEYXRhU291cmNlLmRhdGFTb3VyY2VJZFxuICAgIGlmIChuZXdBY3Rpb25Vc2VEYXRhU291cmNlSWQgIT09IG9sZEFjdGlvblVzZURhdGFTb3VyY2VJZCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbWVzc2FnZVVzZURhdGFTb3VyY2U6IG1lc3NhZ2VVc2VEYXRhU291cmNlLFxuICAgICAgICBhY3Rpb25Vc2VEYXRhU291cmNlOiBhY3Rpb25Vc2VEYXRhU291cmNlLFxuICAgICAgICBzcWxFeHByT2JqOiBudWxsXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG1lc3NhZ2VVc2VEYXRhU291cmNlOiBtZXNzYWdlVXNlRGF0YVNvdXJjZSxcbiAgICAgICAgYWN0aW9uVXNlRGF0YVNvdXJjZTogYWN0aW9uVXNlRGF0YVNvdXJjZSxcbiAgICAgICAgc3FsRXhwck9iajogdGhpcy5wcm9wcy5jb25maWcuc3FsRXhwck9ialxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNoZWNrQW5kR2V0SW5pdFVzZURhdGFTb3VyY2UgPSAod2lkZ2V0SWQ6IHN0cmluZywgb2xkVXNlRGF0YVNvdXJjZTogSW1tdXRhYmxlLkltbXV0YWJsZU9iamVjdDxVc2VEYXRhU291cmNlPikgPT4ge1xuICAgIGNvbnN0IGNvbmZpZyA9IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5hcHBTdGF0ZUluQnVpbGRlci5hcHBDb25maWdcbiAgICBsZXQgaW5pdFVzZURhdGFTb3VyY2UgPSBudWxsXG4gICAgbGV0IGlzTWFwRHMgPSBmYWxzZVxuXG4gICAgY29uc3QgZHNNID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKVxuICAgIGNvbnN0IGlzb2xkVXNlRGF0YVNvdXJjZUlzT3V0cHV0RHMgPSBkc00uZ2V0RGF0YVNvdXJjZShvbGRVc2VEYXRhU291cmNlLmRhdGFTb3VyY2VJZCk/LmdldERhdGFTb3VyY2VKc29uKCk/LmlzT3V0cHV0RnJvbVdpZGdldFxuICAgIGNvbnN0IHVzZURhdGFTb3VyY2VzID0gYWN0aW9uVXRpbHMuZ2V0RHNCeVdpZGdldElkKHdpZGdldElkLCB0aGlzLnByb3BzLm1lc3NhZ2VUeXBlKVxuICAgIGNvbnN0IGRzSWQgPSB1c2VEYXRhU291cmNlcyAmJiB1c2VEYXRhU291cmNlc1swXSAmJiB1c2VEYXRhU291cmNlc1swXS5kYXRhU291cmNlSWRcbiAgICBpZiAoIWRzSWQpIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgY29uc3QgZHNKc29uID0gY29uZmlnLmRhdGFTb3VyY2VzW2RzSWRdXG4gICAgaWYgKGRzSnNvbiAmJiAoKGRzSnNvbi50eXBlID09PSBBcmNHSVNEYXRhU291cmNlVHlwZXMuV2ViTWFwKSB8fCAoZHNKc29uLnR5cGUgPT09IEFyY0dJU0RhdGFTb3VyY2VUeXBlcy5XZWJTY2VuZSkpKSB7XG4gICAgICBpc01hcERzID0gdHJ1ZVxuICAgIH1cblxuICAgIGlmIChpc01hcERzKSB7XG4gICAgICAvLyB3ZWJtYXAgb3Igd2Vic2NlbmUgZHNcbiAgICAgIGxldCBpc1VzZU9sZERzID0gZmFsc2VcbiAgICAgIGlmICh1c2VEYXRhU291cmNlcykge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHVzZURhdGFTb3VyY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKHVzZURhdGFTb3VyY2VzW2ldLmRhdGFTb3VyY2VJZCA9PT0gb2xkVXNlRGF0YVNvdXJjZS5yb290RGF0YVNvdXJjZUlkKSB7XG4gICAgICAgICAgICBpc1VzZU9sZERzID0gdHJ1ZVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGlzVXNlT2xkRHMpIHtcbiAgICAgICAgaW5pdFVzZURhdGFTb3VyY2UgPSBvbGRVc2VEYXRhU291cmNlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbml0VXNlRGF0YVNvdXJjZSA9IG51bGxcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gZmVhdHVyZWxheWVyIGRzXG4gICAgICBsZXQgaXNVc2VPbGREcyA9IGZhbHNlXG4gICAgICBpZiAodXNlRGF0YVNvdXJjZXMpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB1c2VEYXRhU291cmNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGNvbnN0IG9sZFVzZURhdGFTb3VyY2VJZCA9IGlzb2xkVXNlRGF0YVNvdXJjZUlzT3V0cHV0RHMgPyBvbGRVc2VEYXRhU291cmNlPy5tYWluRGF0YVNvdXJjZUlkIDogb2xkVXNlRGF0YVNvdXJjZT8uZGF0YVNvdXJjZUlkXG4gICAgICAgICAgY29uc3QgY3VycmVudFVzZURhdGFTb3VyY2VJZCA9IGlzb2xkVXNlRGF0YVNvdXJjZUlzT3V0cHV0RHMgPyB1c2VEYXRhU291cmNlc1tpXT8ubWFpbkRhdGFTb3VyY2VJZCA6IHVzZURhdGFTb3VyY2VzW2ldPy5kYXRhU291cmNlSWRcbiAgICAgICAgICBpZiAoY3VycmVudFVzZURhdGFTb3VyY2VJZCA9PT0gb2xkVXNlRGF0YVNvdXJjZUlkKSB7XG4gICAgICAgICAgICBpc1VzZU9sZERzID0gdHJ1ZVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGlzVXNlT2xkRHMpIHtcbiAgICAgICAgaW5pdFVzZURhdGFTb3VyY2UgPSBvbGRVc2VEYXRhU291cmNlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodXNlRGF0YVNvdXJjZXM/Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIGluaXRVc2VEYXRhU291cmNlID0gSW1tdXRhYmxlKHtcbiAgICAgICAgICAgIGRhdGFTb3VyY2VJZDogdXNlRGF0YVNvdXJjZXM/LlswXS5kYXRhU291cmNlSWQsXG4gICAgICAgICAgICBtYWluRGF0YVNvdXJjZUlkOiB1c2VEYXRhU291cmNlcz8uWzBdLm1haW5EYXRhU291cmNlSWQsXG4gICAgICAgICAgICBkYXRhVmlld0lkOiB1c2VEYXRhU291cmNlcz8uWzBdLmRhdGFWaWV3SWQsXG4gICAgICAgICAgICByb290RGF0YVNvdXJjZUlkOiB1c2VEYXRhU291cmNlcz8uWzBdLnJvb3REYXRhU291cmNlSWRcbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGluaXRVc2VEYXRhU291cmNlID0gbnVsbFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGluaXRVc2VEYXRhU291cmNlXG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCAoKSB7XG4gICAgY29uc3QgaW5pdENvbmZpZyA9IHRoaXMuZ2V0SW5pdENvbmZpZygpXG5cbiAgICB0aGlzLnByb3BzLm9uU2V0dGluZ0NoYW5nZSh7XG4gICAgICBhY3Rpb25JZDogdGhpcy5wcm9wcy5hY3Rpb25JZCxcbiAgICAgIGNvbmZpZzogdGhpcy5wcm9wcy5jb25maWcuc2V0KCdtZXNzYWdlVXNlRGF0YVNvdXJjZScsIGluaXRDb25maWcubWVzc2FnZVVzZURhdGFTb3VyY2UpXG4gICAgICAgIC5zZXQoJ2FjdGlvblVzZURhdGFTb3VyY2UnLCBpbml0Q29uZmlnLmFjdGlvblVzZURhdGFTb3VyY2UpLnNldCgnc3FsRXhwck9iaicsIGluaXRDb25maWcuc3FsRXhwck9iailcbiAgICB9KVxuICB9XG5cbiAgZ2V0U3R5bGUgKHRoZW1lOiBUaGVtZVZhcmlhYmxlcyk6IFNlcmlhbGl6ZWRTdHlsZXMge1xuICAgIHJldHVybiBjc3NgXG4gICAgICAuc2V0dGluZy1oZWFkZXIge1xuICAgICAgICBwYWRkaW5nOiAke3BvbGlzaGVkLnJlbSgxMCl9ICR7cG9saXNoZWQucmVtKDE2KX0gJHtwb2xpc2hlZC5yZW0oMCl9ICR7cG9saXNoZWQucmVtKDE2KX1cbiAgICAgIH1cblxuICAgICAgLmRlbGV0ZUljb24ge1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIG9wYWNpdHk6IC44O1xuICAgICAgfVxuXG4gICAgICAuZGVsZXRlSWNvbjpob3ZlciB7XG4gICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICB9XG5cbiAgICAgIC5zcWwtZXhwci1kaXNwbGF5IHtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIGhlaWdodDogYXV0bztcbiAgICAgICAgbWluLWhlaWdodDogNjBweDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDI1cHg7XG4gICAgICAgIHBhZGRpbmc6IDNweCA1cHg7XG4gICAgICAgIGNvbG9yOiAke3RoZW1lLmNvbG9ycy5wYWxldHRlLmRhcmtbMzAwXX07XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICR7dGhlbWUuY29sb3JzLnBhbGV0dGUubGlnaHRbNTAwXX07XG4gICAgICB9XG5cbiAgICAgIC5yZWxhdGUtcGFuZWwtbGVmdCB7XG4gICAgICAgIGZsZXg6IGF1dG87XG4gICAgICAgIC5hY3Rpb24tc2VsZWN0LWNob29zZXIge1xuICAgICAgICAgIG1hcmdpbi10b3A6ICR7cG9saXNoZWQucmVtKDEyKX07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgXG4gIH1cblxuICBoYW5kbGVUcmlnZ2VyTGF5ZXJDaGFuZ2UgPSAodXNlRGF0YVNvdXJjZXM6IFVzZURhdGFTb3VyY2VbXSkgPT4ge1xuICAgIGlmICh1c2VEYXRhU291cmNlcyAmJiB1c2VEYXRhU291cmNlcy5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLmhhbmRsZVRyaWdnZXJMYXllclNlbGVjdGVkKHVzZURhdGFTb3VyY2VzWzBdKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmhhbmRsZVJlbW92ZUxheWVyRm9yVHJpZ2dlckxheWVyKClcbiAgICB9XG4gIH1cblxuICBoYW5kbGVBY3Rpb25MYXllckNoYW5nZSA9ICh1c2VEYXRhU291cmNlczogVXNlRGF0YVNvdXJjZVtdKSA9PiB7XG4gICAgaWYgKHVzZURhdGFTb3VyY2VzICYmIHVzZURhdGFTb3VyY2VzLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuaGFuZGxlQWN0aW9uTGF5ZXJTZWxlY3RlZCh1c2VEYXRhU291cmNlc1swXSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5oYW5kbGVSZW1vdmVMYXllckZvckFjdGlvbkxheWVyKClcbiAgICB9XG4gIH1cblxuICBoYW5kbGVUcmlnZ2VyTGF5ZXJTZWxlY3RlZCA9IChjdXJyZW50U2VsZWN0ZWREczogVXNlRGF0YVNvdXJjZSkgPT4ge1xuICAgIHRoaXMucHJvcHMub25TZXR0aW5nQ2hhbmdlKHtcbiAgICAgIGFjdGlvbklkOiB0aGlzLnByb3BzLmFjdGlvbklkLFxuICAgICAgY29uZmlnOiB0aGlzLnByb3BzLmNvbmZpZy5zZXQoJ21lc3NhZ2VVc2VEYXRhU291cmNlJywgY3VycmVudFNlbGVjdGVkRHMpXG4gICAgfSlcbiAgfVxuXG4gIGhhbmRsZUFjdGlvbkxheWVyU2VsZWN0ZWQgPSAoY3VycmVudFNlbGVjdGVkRHM6IFVzZURhdGFTb3VyY2UpID0+IHtcbiAgICB0aGlzLnByb3BzLm9uU2V0dGluZ0NoYW5nZSh7XG4gICAgICBhY3Rpb25JZDogdGhpcy5wcm9wcy5hY3Rpb25JZCxcbiAgICAgIGNvbmZpZzogdGhpcy5wcm9wcy5jb25maWcuc2V0KCdhY3Rpb25Vc2VEYXRhU291cmNlJywgY3VycmVudFNlbGVjdGVkRHMpLnNldCgnc3FsRXhwck9iaicsIG51bGwpXG4gICAgfSlcbiAgfVxuXG4gIGhhbmRsZVJlbW92ZUxheWVyRm9yVHJpZ2dlckxheWVyID0gKCkgPT4ge1xuICAgIHRoaXMucHJvcHMub25TZXR0aW5nQ2hhbmdlKHtcbiAgICAgIGFjdGlvbklkOiB0aGlzLnByb3BzLmFjdGlvbklkLFxuICAgICAgY29uZmlnOiB0aGlzLnByb3BzLmNvbmZpZy5zZXQoJ21lc3NhZ2VVc2VEYXRhU291cmNlJywgbnVsbClcbiAgICB9KVxuICB9XG5cbiAgaGFuZGxlUmVtb3ZlTGF5ZXJGb3JBY3Rpb25MYXllciA9ICgpID0+IHtcbiAgICB0aGlzLnByb3BzLm9uU2V0dGluZ0NoYW5nZSh7XG4gICAgICBhY3Rpb25JZDogdGhpcy5wcm9wcy5hY3Rpb25JZCxcbiAgICAgIGNvbmZpZzogdGhpcy5wcm9wcy5jb25maWcuc2V0KCdhY3Rpb25Vc2VEYXRhU291cmNlJywgbnVsbCkuc2V0KCdzcWxFeHByT2JqJywgbnVsbClcbiAgICB9KVxuICB9XG5cbiAgc2hvd1NxbEV4cHJQb3B1cCA9ICgpID0+IHtcbiAgICB0aGlzLnNldFN0YXRlKHsgaXNTcWxFeHByU2hvdzogdHJ1ZSB9KVxuICB9XG5cbiAgdG9nZ2xlU3FsRXhwclBvcHVwID0gKCkgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBpc1NxbEV4cHJTaG93OiAhdGhpcy5zdGF0ZS5pc1NxbEV4cHJTaG93IH0pXG4gIH1cblxuICBvblNxbEV4cHJCdWlsZGVyQ2hhbmdlID0gKHNxbEV4cHJPYmo6IElNU3FsRXhwcmVzc2lvbikgPT4ge1xuICAgIHRoaXMucHJvcHMub25TZXR0aW5nQ2hhbmdlKHtcbiAgICAgIGFjdGlvbklkOiB0aGlzLnByb3BzLmFjdGlvbklkLFxuICAgICAgY29uZmlnOiB0aGlzLnByb3BzLmNvbmZpZy5zZXQoJ3NxbEV4cHJPYmonLCBzcWxFeHByT2JqKVxuICAgIH0pXG4gIH1cblxuICBvbk1lc3NhZ2VGaWVsZFNlbGVjdGVkID0gKGFsbFNlbGVjdGVkRmllbGRzOiBJTUZpZWxkU2NoZW1hW10sIGRzOiBEYXRhU291cmNlKSA9PiB7XG4gICAgdGhpcy5wcm9wcy5vblNldHRpbmdDaGFuZ2Uoe1xuICAgICAgYWN0aW9uSWQ6IHRoaXMucHJvcHMuYWN0aW9uSWQsXG4gICAgICBjb25maWc6IHRoaXMucHJvcHMuY29uZmlnLnNldCgnbWVzc2FnZVVzZURhdGFTb3VyY2UnLCB7XG4gICAgICAgIGRhdGFTb3VyY2VJZDogdGhpcy5wcm9wcy5jb25maWcubWVzc2FnZVVzZURhdGFTb3VyY2UuZGF0YVNvdXJjZUlkLFxuICAgICAgICBtYWluRGF0YVNvdXJjZUlkOiB0aGlzLnByb3BzLmNvbmZpZy5tZXNzYWdlVXNlRGF0YVNvdXJjZS5tYWluRGF0YVNvdXJjZUlkLFxuICAgICAgICBkYXRhVmlld0lkOiB0aGlzLnByb3BzLmNvbmZpZy5tZXNzYWdlVXNlRGF0YVNvdXJjZS5kYXRhVmlld0lkLFxuICAgICAgICByb290RGF0YVNvdXJjZUlkOiB0aGlzLnByb3BzLmNvbmZpZy5tZXNzYWdlVXNlRGF0YVNvdXJjZS5yb290RGF0YVNvdXJjZUlkLFxuICAgICAgICBmaWVsZHM6IGFsbFNlbGVjdGVkRmllbGRzLm1hcChmID0+IGYuamltdU5hbWUpXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICBvbkFjdGlvbkZpZWxkU2VsZWN0ZWQgPSAoYWxsU2VsZWN0ZWRGaWVsZHM6IElNRmllbGRTY2hlbWFbXSwgZHM6IERhdGFTb3VyY2UpID0+IHtcbiAgICB0aGlzLnByb3BzLm9uU2V0dGluZ0NoYW5nZSh7XG4gICAgICBhY3Rpb25JZDogdGhpcy5wcm9wcy5hY3Rpb25JZCxcbiAgICAgIGNvbmZpZzogdGhpcy5wcm9wcy5jb25maWcuc2V0KCdhY3Rpb25Vc2VEYXRhU291cmNlJywge1xuICAgICAgICBkYXRhU291cmNlSWQ6IHRoaXMucHJvcHMuY29uZmlnLmFjdGlvblVzZURhdGFTb3VyY2UuZGF0YVNvdXJjZUlkLFxuICAgICAgICBtYWluRGF0YVNvdXJjZUlkOiB0aGlzLnByb3BzLmNvbmZpZy5hY3Rpb25Vc2VEYXRhU291cmNlLm1haW5EYXRhU291cmNlSWQsXG4gICAgICAgIGRhdGFWaWV3SWQ6IHRoaXMucHJvcHMuY29uZmlnLmFjdGlvblVzZURhdGFTb3VyY2UuZGF0YVZpZXdJZCxcbiAgICAgICAgcm9vdERhdGFTb3VyY2VJZDogdGhpcy5wcm9wcy5jb25maWcuYWN0aW9uVXNlRGF0YVNvdXJjZS5yb290RGF0YVNvdXJjZUlkLFxuICAgICAgICBmaWVsZHM6IGFsbFNlbGVjdGVkRmllbGRzLm1hcChmID0+IGYuamltdU5hbWUpXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICBzd2ljdGhFbmFibGVkRGF0YVJlbGF0aW9uU2hpcCA9IChjaGVja2VkKSA9PiB7XG4gICAgdGhpcy5wcm9wcy5vblNldHRpbmdDaGFuZ2Uoe1xuICAgICAgYWN0aW9uSWQ6IHRoaXMucHJvcHMuYWN0aW9uSWQsXG4gICAgICBjb25maWc6IHRoaXMucHJvcHMuY29uZmlnLnNldCgnZW5hYmxlZERhdGFSZWxhdGlvblNoaXAnLCBjaGVja2VkKVxuICAgIH0pXG4gIH1cblxuICBjaGVja1RyaWdlckxheWVySXNTYW1lVG9BY3Rpb25MYXllciA9ICgpID0+IHtcbiAgICBpZiAodGhpcy5wcm9wcy5jb25maWcubWVzc2FnZVVzZURhdGFTb3VyY2UgJiYgdGhpcy5wcm9wcy5jb25maWcuYWN0aW9uVXNlRGF0YVNvdXJjZSkge1xuICAgICAgaWYgKHRoaXMucHJvcHMuY29uZmlnLm1lc3NhZ2VVc2VEYXRhU291cmNlLm1haW5EYXRhU291cmNlSWQgPT09IHRoaXMucHJvcHMuY29uZmlnLmFjdGlvblVzZURhdGFTb3VyY2UubWFpbkRhdGFTb3VyY2VJZCAmJlxuICAgICAgICB0aGlzLnByb3BzLmNvbmZpZy5tZXNzYWdlVXNlRGF0YVNvdXJjZS5yb290RGF0YVNvdXJjZUlkID09PSB0aGlzLnByb3BzLmNvbmZpZy5hY3Rpb25Vc2VEYXRhU291cmNlLnJvb3REYXRhU291cmNlSWQpIHtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cblxuICBnZXREc1Jvb3RJZHNCeVdpZGdldElkID0gKHdJZDogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgYXBwQ29uZmlnID0gZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpPy5hcHBTdGF0ZUluQnVpbGRlcj8uYXBwQ29uZmlnXG4gICAgY29uc3Qgd2lkZ2V0SnNvbiA9IGFwcENvbmZpZz8ud2lkZ2V0cz8uW3dJZF1cbiAgICBjb25zdCByb290SWRzID0gW11cbiAgICBjb25zdCBkc00gPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpXG4gICAgd2lkZ2V0SnNvbj8udXNlRGF0YVNvdXJjZXM/LmZvckVhY2goKHVzZURTOiBJbW11dGFibGVPYmplY3Q8VXNlRGF0YVNvdXJjZT4pID0+IHtcbiAgICAgIGNvbnN0IGRzID0gZHNNLmdldERhdGFTb3VyY2UodXNlRFMuZGF0YVNvdXJjZUlkKVxuICAgICAgaWYgKGRzPy50eXBlID09PSBBcmNHSVNEYXRhU291cmNlVHlwZXMuV2ViTWFwIHx8IGRzPy50eXBlID09PSBBcmNHSVNEYXRhU291cmNlVHlwZXMuV2ViU2NlbmUpIHsgLy8gaXMgcm9vdCBkc1xuICAgICAgICByb290SWRzLnB1c2godXNlRFMuZGF0YVNvdXJjZUlkKVxuICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuIHJvb3RJZHMubGVuZ3RoID4gMCA/IEltbXV0YWJsZShyb290SWRzKSA6IHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0RHNJZHNCeVdpZGdldElkID0gKHdJZDogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgdXNlRGF0YVNvdXJjZXMgPSBhY3Rpb25VdGlscy5nZXREc0J5V2lkZ2V0SWQod0lkLCB0aGlzLnByb3BzLm1lc3NhZ2VUeXBlKVxuICAgIHJldHVybiBJbW11dGFibGUodXNlRGF0YVNvdXJjZXM/Lm1hcCgodXNlRFM6IEltbXV0YWJsZU9iamVjdDxVc2VEYXRhU291cmNlPikgPT4gdXNlRFM/Lm1haW5EYXRhU291cmNlSWQpID8/IFtdKVxuICB9XG5cbiAgZ2V0RHNTZWxlY3RvclNvdXJjZURhdGEgPSAod2lkZ2V0SWQ6IHN0cmluZywgdXNlRGF0YVNvdXJjZTogSW1tdXRhYmxlLkltbXV0YWJsZU9iamVjdDxVc2VEYXRhU291cmNlPikgPT4ge1xuICAgIGNvbnN0IGFwcENvbmZpZyA9IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKT8uYXBwU3RhdGVJbkJ1aWxkZXI/LmFwcENvbmZpZ1xuICAgIGNvbnN0IHdpZGdldEpzb24gPSBhcHBDb25maWc/LndpZGdldHM/Llt3aWRnZXRJZF1cbiAgICBjb25zdCBkc1Jvb3RJZHMgPSB0aGlzLmdldERzUm9vdElkc0J5V2lkZ2V0SWQod2lkZ2V0SWQpXG4gICAgY29uc3QgaXNSZWFkT25seSA9IGFjdGlvblV0aWxzLmNoZWNrSXNPbmx5T25lRHMod2lkZ2V0SnNvbiwgdGhpcy5wcm9wcy5tZXNzYWdlVHlwZSwgZHNSb290SWRzKVxuXG4gICAgY29uc3QgdXNlRGF0YVNvdXJjZXMgPSAodXNlRGF0YVNvdXJjZSAmJiB1c2VEYXRhU291cmNlLmRhdGFTb3VyY2VJZClcbiAgICAgID8gSW1tdXRhYmxlKFt1c2VEYXRhU291cmNlXSlcbiAgICAgIDogSW1tdXRhYmxlKFtdKVxuXG4gICAgY29uc3QgZnJvbURzSWRzID0gZHNSb290SWRzID8gdW5kZWZpbmVkIDogdGhpcy5nZXREc0lkc0J5V2lkZ2V0SWQod2lkZ2V0SWQpXG4gICAgY29uc3QgZHNTZWxlY3RvclNvdXJjZSA9IHtcbiAgICAgIGlzUmVhZE9ubHk6IGlzUmVhZE9ubHksXG4gICAgICB1c2VEYXRhU291cmNlczogdXNlRGF0YVNvdXJjZXMsXG4gICAgICBmcm9tUm9vdERzSWRzOiBkc1Jvb3RJZHMsXG4gICAgICBmcm9tRHNJZHM6IGZyb21Ec0lkc1xuICAgIH1cblxuICAgIHJldHVybiBkc1NlbGVjdG9yU291cmNlXG4gIH1cblxuICBjaGVja0lzRGlzYWJsZURhdGFWaWV3ID0gKHdpZGdldElkOiBzdHJpbmcpOiBib29sZWFuID0+IHtcbiAgICBpZiAodGhpcy5wcm9wcy5tZXNzYWdlVHlwZSA9PT0gTWVzc2FnZVR5cGUuRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2UpIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuXG4gICAgY29uc3QgYXBwQ29uZmlnID0gZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpPy5hcHBTdGF0ZUluQnVpbGRlcj8uYXBwQ29uZmlnXG4gICAgY29uc3Qgd2lkZ2V0SnNvbiA9IGFwcENvbmZpZz8ud2lkZ2V0cz8uW3dpZGdldElkXVxuICAgIGlmICh3aWRnZXRKc29uKSB7XG4gICAgICBjb25zdCB3aWRnZXRMYWJlbCA9IHdpZGdldEpzb24/Lm1hbmlmZXN0Py5sYWJlbFxuICAgICAgaWYgKHdpZGdldExhYmVsID09PSAnTWFwJykge1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIHJlbmRlciAoKSB7XG4gICAgY29uc3QgYWN0aW9uVXNlRGF0YVNvdXJjZUluc3RhbmNlID0gdGhpcy5wcm9wcy5jb25maWcuYWN0aW9uVXNlRGF0YVNvdXJjZSAmJlxuICAgICAgRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXREYXRhU291cmNlKHRoaXMucHJvcHMuY29uZmlnLmFjdGlvblVzZURhdGFTb3VyY2UuZGF0YVNvdXJjZUlkKVxuXG4gICAgY29uc3QgeyB0aGVtZSB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IHRyaWdnZXJEc1NlbGVjdG9yU291cmNlRGF0YSA9IHRoaXMuZ2V0RHNTZWxlY3RvclNvdXJjZURhdGEodGhpcy5wcm9wcy5tZXNzYWdlV2lkZ2V0SWQsIHRoaXMucHJvcHMuY29uZmlnLm1lc3NhZ2VVc2VEYXRhU291cmNlKVxuICAgIGNvbnN0IGFjdGlvbkRzU2VsZWN0b3JTb3VyY2VEYXRhID0gdGhpcy5nZXREc1NlbGVjdG9yU291cmNlRGF0YSh0aGlzLnByb3BzLndpZGdldElkLCB0aGlzLnByb3BzLmNvbmZpZy5hY3Rpb25Vc2VEYXRhU291cmNlKVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY3NzPXt0aGlzLmdldFN0eWxlKHRoaXMucHJvcHMudGhlbWUpfT5cbiAgICAgICAgPFNldHRpbmdTZWN0aW9uIHRpdGxlPXt0aGlzLnByb3BzLmludGwuZm9ybWF0TWVzc2FnZSh7IGlkOiAnbWFwQWN0aW9uX1RyaWdnZXJMYXllcicsIGRlZmF1bHRNZXNzYWdlOiBkZWZhdWx0TWVzc2FnZXMubWFwQWN0aW9uX1RyaWdnZXJMYXllciB9KX0+XG4gICAgICAgICAgPERhdGFTb3VyY2VTZWxlY3RvclxuICAgICAgICAgICAgdHlwZXM9e0RTU2VsZWN0b3JUeXBlc31cbiAgICAgICAgICAgIHVzZURhdGFTb3VyY2VzPXt0cmlnZ2VyRHNTZWxlY3RvclNvdXJjZURhdGEudXNlRGF0YVNvdXJjZXN9XG4gICAgICAgICAgICBmcm9tUm9vdERzSWRzPXt0cmlnZ2VyRHNTZWxlY3RvclNvdXJjZURhdGEuZnJvbVJvb3REc0lkc31cbiAgICAgICAgICAgIGZyb21Ec0lkcz17dHJpZ2dlckRzU2VsZWN0b3JTb3VyY2VEYXRhLmZyb21Ec0lkc31cbiAgICAgICAgICAgIGNsb3NlRGF0YVNvdXJjZUxpc3RPbkNoYW5nZVxuICAgICAgICAgICAgZGlzYWJsZVJlbW92ZT17KCkgPT4gdHJpZ2dlckRzU2VsZWN0b3JTb3VyY2VEYXRhLmlzUmVhZE9ubHl9XG4gICAgICAgICAgICBkaXNhYmxlRGF0YVNvdXJjZUxpc3Q9e3RyaWdnZXJEc1NlbGVjdG9yU291cmNlRGF0YS5pc1JlYWRPbmx5fVxuICAgICAgICAgICAgaGlkZUFkZERhdGFCdXR0b25cbiAgICAgICAgICAgIGhpZGVUeXBlRHJvcGRvd25cbiAgICAgICAgICAgIG11c3RVc2VEYXRhU291cmNlXG4gICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVUcmlnZ2VyTGF5ZXJDaGFuZ2V9XG4gICAgICAgICAgICB3aWRnZXRJZD17dGhpcy5wcm9wcy5tZXNzYWdlV2lkZ2V0SWR9XG4gICAgICAgICAgICBkaXNhYmxlRGF0YVZpZXdcbiAgICAgICAgICAgIGhpZGVEYXRhVmlldz17dGhpcy5jaGVja0lzRGlzYWJsZURhdGFWaWV3KHRoaXMucHJvcHMubWVzc2FnZVdpZGdldElkKX1cbiAgICAgICAgICAgIGVuYWJsZVRvU2VsZWN0T3V0cHV0RHNGcm9tU2VsZj17dHJ1ZX1cbiAgICAgICAgICAvPlxuICAgICAgICA8L1NldHRpbmdTZWN0aW9uPlxuICAgICAgICA8U2V0dGluZ1NlY3Rpb24gdGl0bGU9e3RoaXMucHJvcHMuaW50bC5mb3JtYXRNZXNzYWdlKHsgaWQ6ICdtYXBBY3Rpb25fQWN0aW9uTGF5ZXInLCBkZWZhdWx0TWVzc2FnZTogZGVmYXVsdE1lc3NhZ2VzLm1hcEFjdGlvbl9BY3Rpb25MYXllciB9KX0+XG4gICAgICAgICAgPERhdGFTb3VyY2VTZWxlY3RvclxuICAgICAgICAgICAgdHlwZXM9e0RTU2VsZWN0b3JUeXBlc31cbiAgICAgICAgICAgIHVzZURhdGFTb3VyY2VzPXthY3Rpb25Ec1NlbGVjdG9yU291cmNlRGF0YS51c2VEYXRhU291cmNlc31cbiAgICAgICAgICAgIGZyb21Sb290RHNJZHM9e2FjdGlvbkRzU2VsZWN0b3JTb3VyY2VEYXRhLmZyb21Sb290RHNJZHN9XG4gICAgICAgICAgICBmcm9tRHNJZHM9e2FjdGlvbkRzU2VsZWN0b3JTb3VyY2VEYXRhLmZyb21Ec0lkc31cbiAgICAgICAgICAgIGNsb3NlRGF0YVNvdXJjZUxpc3RPbkNoYW5nZVxuICAgICAgICAgICAgZGlzYWJsZVJlbW92ZT17KCkgPT4gYWN0aW9uRHNTZWxlY3RvclNvdXJjZURhdGEuaXNSZWFkT25seX1cbiAgICAgICAgICAgIGRpc2FibGVEYXRhU291cmNlTGlzdD17YWN0aW9uRHNTZWxlY3RvclNvdXJjZURhdGEuaXNSZWFkT25seX1cbiAgICAgICAgICAgIGhpZGVBZGREYXRhQnV0dG9uXG4gICAgICAgICAgICBoaWRlVHlwZURyb3Bkb3duXG4gICAgICAgICAgICBtdXN0VXNlRGF0YVNvdXJjZVxuICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlQWN0aW9uTGF5ZXJDaGFuZ2V9XG4gICAgICAgICAgICB3aWRnZXRJZD17dGhpcy5wcm9wcy53aWRnZXRJZH1cbiAgICAgICAgICAgIGhpZGVEYXRhVmlld1xuICAgICAgICAgICAgZW5hYmxlVG9TZWxlY3RPdXRwdXREc0Zyb21TZWxmPXt0cnVlfVxuICAgICAgICAgIC8vIG9uU2VsZWN0PXt0aGlzLmhhbmRsZUFjdGlvbkxheWVyU2VsZWN0ZWR9XG4gICAgICAgICAgLy8gb25SZW1vdmU9e3RoaXMuaGFuZGxlUmVtb3ZlTGF5ZXJGb3JBY3Rpb25MYXllcn1cbiAgICAgICAgICAvPlxuICAgICAgICA8L1NldHRpbmdTZWN0aW9uPlxuICAgICAgICB7dGhpcy5wcm9wcy5jb25maWcgJiYgdGhpcy5wcm9wcy5jb25maWcubWVzc2FnZVVzZURhdGFTb3VyY2UgJiYgdGhpcy5wcm9wcy5jb25maWcuYWN0aW9uVXNlRGF0YVNvdXJjZSAmJlxuICAgICAgICAgIDxTZXR0aW5nU2VjdGlvbiB0aXRsZT17dGhpcy5wcm9wcy5pbnRsLmZvcm1hdE1lc3NhZ2UoeyBpZDogJ21hcEFjdGlvbl9Db25kaXRpb25zJywgZGVmYXVsdE1lc3NhZ2U6IGRlZmF1bHRNZXNzYWdlcy5tYXBBY3Rpb25fQ29uZGl0aW9ucyB9KX0+XG4gICAgICAgICAgICA8U2V0dGluZ1JvdyBsYWJlbD17dGhpcy5wcm9wcy5pbnRsLmZvcm1hdE1lc3NhZ2UoeyBpZDogJ21hcEFjdGlvbl9SZWxhdGVNZXNzYWdlJywgZGVmYXVsdE1lc3NhZ2U6IGRlZmF1bHRNZXNzYWdlcy5tYXBBY3Rpb25fUmVsYXRlTWVzc2FnZSB9KX0+XG4gICAgICAgICAgICAgIDxTd2l0Y2ggY2hlY2tlZD17dGhpcy5wcm9wcy5jb25maWcuZW5hYmxlZERhdGFSZWxhdGlvblNoaXB9IG9uQ2hhbmdlPXtldnQgPT4geyB0aGlzLnN3aWN0aEVuYWJsZWREYXRhUmVsYXRpb25TaGlwKGV2dC50YXJnZXQuY2hlY2tlZCkgfX0gLz5cbiAgICAgICAgICAgIDwvU2V0dGluZ1Jvdz5cbiAgICAgICAgICAgIDxTZXR0aW5nUm93PlxuICAgICAgICAgICAgICA8Q29sbGFwc2UgaXNPcGVuPXt0aGlzLnByb3BzLmNvbmZpZy5lbmFibGVkRGF0YVJlbGF0aW9uU2hpcH0gY2xhc3NOYW1lPSd3LTEwMCc+XG4gICAgICAgICAgICAgICAge3RoaXMuY2hlY2tUcmlnZXJMYXllcklzU2FtZVRvQWN0aW9uTGF5ZXIoKSAmJlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3ctMTAwIGJvcmRlciBwLTEgbXItMic+e3RoaXMucHJvcHMuaW50bC5mb3JtYXRNZXNzYWdlKHsgaWQ6ICdtYXBBY3Rpb25fQXV0b0JpbmQnLCBkZWZhdWx0TWVzc2FnZTogZGVmYXVsdE1lc3NhZ2VzLm1hcEFjdGlvbl9BdXRvQmluZCB9KX08L2Rpdj59XG4gICAgICAgICAgICAgICAgeyF0aGlzLmNoZWNrVHJpZ2VyTGF5ZXJJc1NhbWVUb0FjdGlvbkxheWVyKCkgJiYgPGRpdiBjbGFzc05hbWU9J3ctMTAwIGQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXInPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2QtZmxleCBmbGV4LWNvbHVtbiByZWxhdGUtcGFuZWwtbGVmdCc+XG4gICAgICAgICAgICAgICAgICAgIDxGaWVsZFNlbGVjdG9yXG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSd3LTEwMCdcbiAgICAgICAgICAgICAgICAgICAgICB1c2VEYXRhU291cmNlcz17SW1tdXRhYmxlKFt0aGlzLnByb3BzLmNvbmZpZy5tZXNzYWdlVXNlRGF0YVNvdXJjZT8uYXNNdXRhYmxlKHsgZGVlcDogdHJ1ZSB9KV0pfSBpc0RhdGFTb3VyY2VEcm9wRG93bkhpZGRlblxuICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0aGlzLnByb3BzLmludGwuZm9ybWF0TWVzc2FnZSh7IGlkOiAnbWFwQWN0aW9uX1RyaWdnZXJMYXllckZpZWxkJywgZGVmYXVsdE1lc3NhZ2U6IGRlZmF1bHRNZXNzYWdlcy5tYXBBY3Rpb25fVHJpZ2dlckxheWVyRmllbGQgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMub25NZXNzYWdlRmllbGRTZWxlY3RlZH0gdXNlRHJvcGRvd24gaXNTZWFyY2hJbnB1dEhpZGRlblxuICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkRmllbGRzPXt0aGlzLnByb3BzLmNvbmZpZy5tZXNzYWdlVXNlRGF0YVNvdXJjZSAmJiB0aGlzLnByb3BzLmNvbmZpZy5tZXNzYWdlVXNlRGF0YVNvdXJjZS5maWVsZHNcbiAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5wcm9wcy5jb25maWcubWVzc2FnZVVzZURhdGFTb3VyY2UuZmllbGRzXG4gICAgICAgICAgICAgICAgICAgICAgICA6IEltbXV0YWJsZShbXSl9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDxGaWVsZFNlbGVjdG9yXG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSd3LTEwMCBhY3Rpb24tc2VsZWN0LWNob29zZXInXG4gICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3RoaXMucHJvcHMuaW50bC5mb3JtYXRNZXNzYWdlKHsgaWQ6ICdtYXBBY3Rpb25fQWN0aW9uTGF5ZXJGaWVsZCcsIGRlZmF1bHRNZXNzYWdlOiBkZWZhdWx0TWVzc2FnZXMubWFwQWN0aW9uX0FjdGlvbkxheWVyRmllbGQgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgdXNlRGF0YVNvdXJjZXM9e0ltbXV0YWJsZShbdGhpcy5wcm9wcy5jb25maWcuYWN0aW9uVXNlRGF0YVNvdXJjZT8uYXNNdXRhYmxlKHsgZGVlcDogdHJ1ZSB9KV0pfSBpc0RhdGFTb3VyY2VEcm9wRG93bkhpZGRlblxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uQWN0aW9uRmllbGRTZWxlY3RlZH0gdXNlRHJvcGRvd24gaXNTZWFyY2hJbnB1dEhpZGRlblxuICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkRmllbGRzPXt0aGlzLnByb3BzLmNvbmZpZy5hY3Rpb25Vc2VEYXRhU291cmNlICYmIHRoaXMucHJvcHMuY29uZmlnLmFjdGlvblVzZURhdGFTb3VyY2UuZmllbGRzXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMucHJvcHMuY29uZmlnLmFjdGlvblVzZURhdGFTb3VyY2UuZmllbGRzXG4gICAgICAgICAgICAgICAgICAgICAgICA6IEltbXV0YWJsZShbXSl9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxJY29uIGNsYXNzTmFtZT0nZmxleC1ub25lJyB3aWR0aD17MTJ9IGhlaWdodD17NDB9IGNvbG9yPXt0aGVtZS5jb2xvcnMuZGFya1s0MDBdfSBpY29uPXtyZXF1aXJlKCdqaW11LXVpL2xpYi9pY29ucy9saW5rLWNvbWJpbmVkLnN2ZycpfSAvPlxuICAgICAgICAgICAgICAgIDwvZGl2Pn1cbiAgICAgICAgICAgICAgPC9Db2xsYXBzZT5cbiAgICAgICAgICAgIDwvU2V0dGluZ1Jvdz5cbiAgICAgICAgICAgIDxTZXR0aW5nUm93PlxuICAgICAgICAgICAgICA8QnV0dG9uIHR5cGU9J2xpbmsnIGRpc2FibGVkPXshdGhpcy5wcm9wcy5jb25maWcuYWN0aW9uVXNlRGF0YVNvdXJjZX0gY2xhc3NOYW1lPSd3LTEwMCBkLWZsZXgganVzdGlmeS1jb250ZW50LXN0YXJ0JyBvbkNsaWNrPXt0aGlzLnNob3dTcWxFeHByUG9wdXB9PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd3LTEwMCB0ZXh0LXRydW5jYXRlJyBzdHlsZT17eyB0ZXh0QWxpZ246ICdzdGFydCcgfX0+XG4gICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5pbnRsLmZvcm1hdE1lc3NhZ2UoeyBpZDogJ21hcEFjdGlvbl9Nb3JlQ29uZGl0aW9ucycsIGRlZmF1bHRNZXNzYWdlOiBkZWZhdWx0TWVzc2FnZXMubWFwQWN0aW9uX01vcmVDb25kaXRpb25zIH0pfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAge3RoaXMucHJvcHMuY29uZmlnLmFjdGlvblVzZURhdGFTb3VyY2UgJiYgPERhdGFTb3VyY2VDb21wb25lbnQgdXNlRGF0YVNvdXJjZT17dGhpcy5wcm9wcy5jb25maWcuYWN0aW9uVXNlRGF0YVNvdXJjZX0+eyhkcykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICA8U3FsRXhwcmVzc2lvbkJ1aWxkZXJQb3B1cFxuICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlPXtkc30gbW9kZT17U3FsRXhwcmVzc2lvbk1vZGUuU2ltcGxlfVxuICAgICAgICAgICAgICAgICAgICBpc09wZW49e3RoaXMuc3RhdGUuaXNTcWxFeHByU2hvd30gdG9nZ2xlPXt0aGlzLnRvZ2dsZVNxbEV4cHJQb3B1cH1cbiAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbj17dGhpcy5wcm9wcy5jb25maWcuc3FsRXhwck9ian0gb25DaGFuZ2U9eyhzcWxFeHByT2JqKSA9PiB7IHRoaXMub25TcWxFeHByQnVpbGRlckNoYW5nZShzcWxFeHByT2JqKSB9fVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIDwvRGF0YVNvdXJjZUNvbXBvbmVudD59XG4gICAgICAgICAgICA8L1NldHRpbmdSb3c+XG4gICAgICAgICAgICA8U2V0dGluZ1Jvdz5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NxbC1leHByLWRpc3BsYXknPlxuICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmNvbmZpZy5zcWxFeHByT2JqICYmIGFjdGlvblVzZURhdGFTb3VyY2VJbnN0YW5jZVxuICAgICAgICAgICAgICAgICAgPyBkYXRhU291cmNlVXRpbHMuZ2V0QXJjR0lTU1FMKHRoaXMucHJvcHMuY29uZmlnLnNxbEV4cHJPYmosIGFjdGlvblVzZURhdGFTb3VyY2VJbnN0YW5jZSkuZGlzcGxheVNRTFxuICAgICAgICAgICAgICAgICAgOiB0aGlzLnByb3BzLmludGwuZm9ybWF0TWVzc2FnZSh7IGlkOiAnbWFwQWN0aW9uX1NldEV4cHJlc3Npb24nLCBkZWZhdWx0TWVzc2FnZTogZGVmYXVsdE1lc3NhZ2VzLm1hcEFjdGlvbl9TZXRFeHByZXNzaW9uIH0pfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvU2V0dGluZ1Jvdz5cbiAgICAgICAgICA8L1NldHRpbmdTZWN0aW9uPn1cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCB3aXRoVGhlbWUoX0ZsYXNoQWN0aW9uU2V0dGluZylcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./extensions/widgets/arcgis/arcgis-map/src/message-actions/flash-action-setting.tsx\n");

/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/setting/translations/default.ts":
/*!**********************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/setting/translations/default.ts ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n    sourceLabel: 'Source',\n    sourceDescript: 'A web map or web scene, or any combination of the two.',\n    initialMap: 'Initial map',\n    initialMapView: 'Initial view',\n    selectMap: 'Select map',\n    setMapView: 'Modify initial view',\n    defaultView: 'Default',\n    defaultViewTip: 'Initial position of the map inherited from the web map or web scene',\n    customView: 'Custom',\n    customViewTip: 'Create a new position of the map',\n    customViewSet: 'Modify',\n    toolLabel: 'Tools',\n    options: 'Options',\n    selectionHighlightColor: 'Selection highlight',\n    disableScrollZoom: 'Disable scroll zooming',\n    disablePopUp: 'Disable pop-up',\n    sceneQualityMode: 'Scene quality mode',\n    chooseALayer: 'Select a layer',\n    dataRelationShip: 'Data relationship',\n    mapNone: 'none',\n    messageField: 'Message field',\n    mapLayout: 'Tools layout',\n    mapLayout_LargeAndMedium: 'Large and medium size',\n    mapLayout_Small: 'Small size',\n    mapAction_TriggerLayer: 'Trigger data',\n    mapAction_SetData: 'Select data',\n    mapAction_ActionLayer: 'Action data',\n    mapAction_Conditions: 'Conditions',\n    mapAction_RelateMessage: 'Trigger / action connection',\n    mapAction_TriggerLayerField: 'Select a trigger field',\n    mapAction_None: 'none',\n    mapAction_Equals: 'equals',\n    mapAction_ActionLayerField: 'Select an action field',\n    mapAction_MoreConditions: 'More conditions',\n    mapAction_SetExpression: 'Please set your expression first.',\n    mapAction_ChooseLayer: 'Select data',\n    mapAction_AutoBind: 'Auto bound.',\n    mapAction_NoLayer: 'No data.',\n    mapAction_Point: 'Point',\n    mapAction_Polyline: 'Polyline',\n    mapAction_Polygon: 'Polygon',\n    mapAction_UseLayerDefinedSymbols: 'Use layer defined symbols',\n    mapAction_UseCustomSymbols: 'Use custom symbols',\n    mapZoomToAction_ZoomScale: 'Zoom scale',\n    mapZoomToAction_Automatic: 'Automatic',\n    mapZoomToAction_Custom: 'Custom',\n    mapZoomToAction_TypeScale: 'Type a scale'\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FyY2dpcy1tYXAvc3JjL3NldHRpbmcvdHJhbnNsYXRpb25zL2RlZmF1bHQudHMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYXJjZ2lzLW1hcC9zcmMvc2V0dGluZy90cmFuc2xhdGlvbnMvZGVmYXVsdC50cz9jNDM4Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IHtcbiAgc291cmNlTGFiZWw6ICdTb3VyY2UnLFxuICBzb3VyY2VEZXNjcmlwdDogJ0Egd2ViIG1hcCBvciB3ZWIgc2NlbmUsIG9yIGFueSBjb21iaW5hdGlvbiBvZiB0aGUgdHdvLicsXG4gIGluaXRpYWxNYXA6ICdJbml0aWFsIG1hcCcsXG4gIGluaXRpYWxNYXBWaWV3OiAnSW5pdGlhbCB2aWV3JyxcbiAgc2VsZWN0TWFwOiAnU2VsZWN0IG1hcCcsXG4gIHNldE1hcFZpZXc6ICdNb2RpZnkgaW5pdGlhbCB2aWV3JyxcbiAgZGVmYXVsdFZpZXc6ICdEZWZhdWx0JyxcbiAgZGVmYXVsdFZpZXdUaXA6ICdJbml0aWFsIHBvc2l0aW9uIG9mIHRoZSBtYXAgaW5oZXJpdGVkIGZyb20gdGhlIHdlYiBtYXAgb3Igd2ViIHNjZW5lJyxcbiAgY3VzdG9tVmlldzogJ0N1c3RvbScsXG4gIGN1c3RvbVZpZXdUaXA6ICdDcmVhdGUgYSBuZXcgcG9zaXRpb24gb2YgdGhlIG1hcCcsXG4gIGN1c3RvbVZpZXdTZXQ6ICdNb2RpZnknLFxuICB0b29sTGFiZWw6ICdUb29scycsXG4gIG9wdGlvbnM6ICdPcHRpb25zJyxcbiAgc2VsZWN0aW9uSGlnaGxpZ2h0Q29sb3I6ICdTZWxlY3Rpb24gaGlnaGxpZ2h0JyxcbiAgZGlzYWJsZVNjcm9sbFpvb206ICdEaXNhYmxlIHNjcm9sbCB6b29taW5nJyxcbiAgZGlzYWJsZVBvcFVwOiAnRGlzYWJsZSBwb3AtdXAnLFxuICBzY2VuZVF1YWxpdHlNb2RlOiAnU2NlbmUgcXVhbGl0eSBtb2RlJyxcbiAgY2hvb3NlQUxheWVyOiAnU2VsZWN0IGEgbGF5ZXInLFxuICBkYXRhUmVsYXRpb25TaGlwOiAnRGF0YSByZWxhdGlvbnNoaXAnLFxuICBtYXBOb25lOiAnbm9uZScsXG4gIG1lc3NhZ2VGaWVsZDogJ01lc3NhZ2UgZmllbGQnLFxuICBtYXBMYXlvdXQ6ICdUb29scyBsYXlvdXQnLFxuICBtYXBMYXlvdXRfTGFyZ2VBbmRNZWRpdW06ICdMYXJnZSBhbmQgbWVkaXVtIHNpemUnLFxuICBtYXBMYXlvdXRfU21hbGw6ICdTbWFsbCBzaXplJyxcblxuICBtYXBBY3Rpb25fVHJpZ2dlckxheWVyOiAnVHJpZ2dlciBkYXRhJyxcbiAgbWFwQWN0aW9uX1NldERhdGE6ICdTZWxlY3QgZGF0YScsXG4gIG1hcEFjdGlvbl9BY3Rpb25MYXllcjogJ0FjdGlvbiBkYXRhJyxcbiAgbWFwQWN0aW9uX0NvbmRpdGlvbnM6ICdDb25kaXRpb25zJyxcbiAgbWFwQWN0aW9uX1JlbGF0ZU1lc3NhZ2U6ICdUcmlnZ2VyIC8gYWN0aW9uIGNvbm5lY3Rpb24nLFxuICBtYXBBY3Rpb25fVHJpZ2dlckxheWVyRmllbGQ6ICdTZWxlY3QgYSB0cmlnZ2VyIGZpZWxkJyxcbiAgbWFwQWN0aW9uX05vbmU6ICdub25lJyxcbiAgbWFwQWN0aW9uX0VxdWFsczogJ2VxdWFscycsXG4gIG1hcEFjdGlvbl9BY3Rpb25MYXllckZpZWxkOiAnU2VsZWN0IGFuIGFjdGlvbiBmaWVsZCcsXG4gIG1hcEFjdGlvbl9Nb3JlQ29uZGl0aW9uczogJ01vcmUgY29uZGl0aW9ucycsXG4gIG1hcEFjdGlvbl9TZXRFeHByZXNzaW9uOiAnUGxlYXNlIHNldCB5b3VyIGV4cHJlc3Npb24gZmlyc3QuJyxcbiAgbWFwQWN0aW9uX0Nob29zZUxheWVyOiAnU2VsZWN0IGRhdGEnLFxuICBtYXBBY3Rpb25fQXV0b0JpbmQ6ICdBdXRvIGJvdW5kLicsXG4gIG1hcEFjdGlvbl9Ob0xheWVyOiAnTm8gZGF0YS4nLFxuICBtYXBBY3Rpb25fUG9pbnQ6ICdQb2ludCcsXG4gIG1hcEFjdGlvbl9Qb2x5bGluZTogJ1BvbHlsaW5lJyxcbiAgbWFwQWN0aW9uX1BvbHlnb246ICdQb2x5Z29uJyxcbiAgbWFwQWN0aW9uX1VzZUxheWVyRGVmaW5lZFN5bWJvbHM6ICdVc2UgbGF5ZXIgZGVmaW5lZCBzeW1ib2xzJyxcbiAgbWFwQWN0aW9uX1VzZUN1c3RvbVN5bWJvbHM6ICdVc2UgY3VzdG9tIHN5bWJvbHMnLFxuICBtYXBab29tVG9BY3Rpb25fWm9vbVNjYWxlOiAnWm9vbSBzY2FsZScsXG4gIG1hcFpvb21Ub0FjdGlvbl9BdXRvbWF0aWM6ICdBdXRvbWF0aWMnLFxuICBtYXBab29tVG9BY3Rpb25fQ3VzdG9tOiAnQ3VzdG9tJyxcbiAgbWFwWm9vbVRvQWN0aW9uX1R5cGVTY2FsZTogJ1R5cGUgYSBzY2FsZSdcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./extensions/widgets/arcgis/arcgis-map/src/setting/translations/default.ts\n");

/***/ }),

/***/ "./jimu-ui/lib/icons/link-combined.svg":
/*!*********************************************!*\
  !*** ./jimu-ui/lib/icons/link-combined.svg ***!
  \*********************************************/
/***/ ((module) => {

eval("module.exports = \"<svg viewBox=\\\"0 0 12 40\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M6 30v10H0v-1h5v-9h1ZM3.162 18.582a.5.5 0 0 1 0 .71l-1.416 1.421a2.497 2.497 0 0 0-.003 3.545c.983.983 2.56.98 3.544-.003l1.42-1.42a.504.504 0 0 1 .712.713L6 24.968a3.502 3.502 0 0 1-4.967 0 3.501 3.501 0 0 1 0-4.967l1.416-1.422a.504.504 0 0 1 .713.003Zm4.967-.71a.5.5 0 0 1 0 .71L4.58 22.129a.504.504 0 0 1-.713-.712l3.548-3.548a.504.504 0 0 1 .713.003Zm2.838-2.838a3.501 3.501 0 0 1 0 4.967l-1.42 1.419a.504.504 0 0 1-.713-.712l1.423-1.417a2.5 2.5 0 0 0 0-3.547 2.502 2.502 0 0 0-3.547 0l-1.42 1.419a.504.504 0 0 1-.713-.712l1.42-1.42a3.506 3.506 0 0 1 4.97.003ZM6 0v10H5V1H0V0h6Z\\\" fill=\\\"#A8A8A8\\\" fill-rule=\\\"evenodd\\\"></path></svg>\"//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qaW11LXVpL2xpYi9pY29ucy9saW5rLWNvbWJpbmVkLnN2Zy5qcyIsIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LXVpL2xpYi9pY29ucy9saW5rLWNvbWJpbmVkLnN2Zz8yYjE3Il0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHZpZXdCb3g9XFxcIjAgMCAxMiA0MFxcXCIgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIj48cGF0aCBkPVxcXCJNNiAzMHYxMEgwdi0xaDV2LTloMVpNMy4xNjIgMTguNTgyYS41LjUgMCAwIDEgMCAuNzFsLTEuNDE2IDEuNDIxYTIuNDk3IDIuNDk3IDAgMCAwLS4wMDMgMy41NDVjLjk4My45ODMgMi41Ni45OCAzLjU0NC0uMDAzbDEuNDItMS40MmEuNTA0LjUwNCAwIDAgMSAuNzEyLjcxM0w2IDI0Ljk2OGEzLjUwMiAzLjUwMiAwIDAgMS00Ljk2NyAwIDMuNTAxIDMuNTAxIDAgMCAxIDAtNC45NjdsMS40MTYtMS40MjJhLjUwNC41MDQgMCAwIDEgLjcxMy4wMDNabTQuOTY3LS43MWEuNS41IDAgMCAxIDAgLjcxTDQuNTggMjIuMTI5YS41MDQuNTA0IDAgMCAxLS43MTMtLjcxMmwzLjU0OC0zLjU0OGEuNTA0LjUwNCAwIDAgMSAuNzEzLjAwM1ptMi44MzgtMi44MzhhMy41MDEgMy41MDEgMCAwIDEgMCA0Ljk2N2wtMS40MiAxLjQxOWEuNTA0LjUwNCAwIDAgMS0uNzEzLS43MTJsMS40MjMtMS40MTdhMi41IDIuNSAwIDAgMCAwLTMuNTQ3IDIuNTAyIDIuNTAyIDAgMCAwLTMuNTQ3IDBsLTEuNDIgMS40MTlhLjUwNC41MDQgMCAwIDEtLjcxMy0uNzEybDEuNDItMS40MmEzLjUwNiAzLjUwNiAwIDAgMSA0Ljk3LjAwM1pNNiAwdjEwSDVWMUgwVjBoNlpcXFwiIGZpbGw9XFxcIiNBOEE4QThcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./jimu-ui/lib/icons/link-combined.svg\n");

/***/ }),

/***/ "jimu-arcgis":
/*!******************************!*\
  !*** external "jimu-arcgis" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_arcgis__;

/***/ }),

/***/ "jimu-core":
/*!****************************!*\
  !*** external "jimu-core" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_core__;

/***/ }),

/***/ "jimu-theme":
/*!*****************************!*\
  !*** external "jimu-theme" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_theme__;

/***/ }),

/***/ "jimu-ui":
/*!**************************!*\
  !*** external "jimu-ui" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_ui__;

/***/ }),

/***/ "jimu-ui/advanced/data-source-selector":
/*!********************************************************!*\
  !*** external "jimu-ui/advanced/data-source-selector" ***!
  \********************************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_ui_advanced_data_source_selector__;

/***/ }),

/***/ "jimu-ui/advanced/setting-components":
/*!******************************************************!*\
  !*** external "jimu-ui/advanced/setting-components" ***!
  \******************************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_ui_advanced_setting_components__;

/***/ }),

/***/ "jimu-ui/advanced/sql-expression-builder":
/*!**********************************************************!*\
  !*** external "jimu-ui/advanced/sql-expression-builder" ***!
  \**********************************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_ui_advanced_sql_expression_builder__;

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./extensions/widgets/arcgis/arcgis-map/src/message-actions/flash-action-setting.tsx");
/******/ 	
/******/ 	return __webpack_exports__;
/******/ })()

			);
		}
	};
});