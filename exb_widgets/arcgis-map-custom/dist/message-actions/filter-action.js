/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
System.register(["jimu-core"], function(__WEBPACK_DYNAMIC_EXPORT__, __system_context__) {
	var __WEBPACK_EXTERNAL_MODULE_jimu_core__ = {};
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_core__, "__esModule", { value: true });
	return {
		setters: [
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_core__[key] = module[key];
				});
			}
		],
		execute: function() {
			__WEBPACK_DYNAMIC_EXPORT__(
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./extensions/widgets/arcgis/arcgis-map/src/message-actions/filter-action.ts":
/*!***********************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/message-actions/filter-action.ts ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ FilterAction)\n/* harmony export */ });\n/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ \"jimu-core\");\n\nconst FILTER_ACTION_KEY_PREFIX = 'filterActionValue-';\nconst FILTER_MESSAGE_KEY_PREFIX = 'filterMessageValue-';\nclass FilterAction extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.AbstractMessageAction {\n    constructor() {\n        super(...arguments);\n        this.filterActions = {};\n    }\n    filterMessageType(messageType, messageWidgetId) {\n        return messageType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageType.DataRecordsSelectionChange;\n    }\n    filterMessage(message) {\n        return true;\n    }\n    onRemoveListen(messageType, messageWidgetId) {\n        Object.keys(this.filterActions || {}).forEach(actionKey => {\n            Object.entries(this.filterActions[actionKey] || {}).forEach(entry => {\n                var _a;\n                const messageKey = entry[0];\n                if (((_a = entry[1]) === null || _a === void 0 ? void 0 : _a.messageWidgetId) === messageWidgetId) {\n                    jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.setValue(this.filterActions, `${actionKey}.${messageKey}.querySQL`, '');\n                }\n            });\n            const filterActionValue = {\n                layerDataSourceId: actionKey.slice(FILTER_ACTION_KEY_PREFIX.length),\n                querySQL: this.getUnionAllFilterQuerySQL(actionKey)\n            };\n            jimu_core__WEBPACK_IMPORTED_MODULE_0__.MutableStoreManager.getInstance().updateStateValue(this.widgetId, actionKey, filterActionValue);\n        });\n    }\n    onExecute(message, actionConfig) {\n        switch (message.type) {\n            case jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageType.DataRecordsSelectionChange:\n                let filterActionValue = null;\n                let messageDataSource, actionDataSource;\n                if (actionConfig) {\n                    if (actionConfig.messageUseDataSource && actionConfig.actionUseDataSource) {\n                        if (message.records.length > 0 &&\n                            message.records[0].dataSource.getMainDataSource().id !== actionConfig.messageUseDataSource.mainDataSourceId) {\n                            jimu_core__WEBPACK_IMPORTED_MODULE_0__.MutableStoreManager.getInstance().updateStateValue(this.widgetId, 'filterActionValue', null);\n                            break;\n                        }\n                        messageDataSource = jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceManager.getInstance().getDataSource(actionConfig.messageUseDataSource.mainDataSourceId);\n                        actionDataSource = jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceManager.getInstance().getDataSource(actionConfig.actionUseDataSource.mainDataSourceId);\n                        if (messageDataSource && actionDataSource) {\n                            if (message.records.length <= 0) {\n                                // clear filter\n                                filterActionValue = {\n                                    layerDataSourceId: actionDataSource && actionDataSource.id,\n                                    querySQL: ''\n                                };\n                            }\n                            else if (actionConfig.enabledDataRelationShip) {\n                                // when ds instances exit\n                                // use DataRelationShip\n                                let messageField = null;\n                                let actionField = null;\n                                if (actionConfig.messageUseDataSource.mainDataSourceId === actionConfig.actionUseDataSource.mainDataSourceId &&\n                                    actionConfig.messageUseDataSource.rootDataSourceId === actionConfig.actionUseDataSource.rootDataSourceId) {\n                                    // if trigger ds is same to action ds\n                                    const messageDsSchema = messageDataSource.getSchema();\n                                    const objectIdJimuFieldName = messageDsSchema && messageDsSchema.fields &&\n                                        Object.keys(messageDsSchema.fields).find(jimuFieldName => messageDsSchema.fields[jimuFieldName].esriType === 'esriFieldTypeOID');\n                                    messageField = messageDsSchema && messageDsSchema.fields && messageDsSchema.fields[objectIdJimuFieldName];\n                                    actionField = messageField;\n                                }\n                                else {\n                                    // if trigger ds isn't same to action ds\n                                    const messageJimuFieldName = actionConfig.messageUseDataSource.fields[0];\n                                    const actionJimuFieldName = actionConfig.actionUseDataSource.fields[0];\n                                    messageField = messageDataSource.getSchema().fields[messageJimuFieldName];\n                                    actionField = actionDataSource.getSchema().fields[actionJimuFieldName];\n                                }\n                                let whereSql = '';\n                                if (messageField && actionField) {\n                                    const messageFieldName = messageField.name;\n                                    const messageFieldType = messageField.type;\n                                    const tempMessage = message;\n                                    const messageFieldValues = [];\n                                    for (let i = 0; i < tempMessage.records.length; i++) {\n                                        const tempFieldValue = tempMessage.records[i].getData()[messageFieldName];\n                                        if (messageFieldValues.includes(`${this.formatValue(tempFieldValue, messageFieldType)}`)) {\n                                            continue;\n                                        }\n                                        else {\n                                            messageFieldValues.push(`${this.formatValue(tempMessage.records[i].getData()[messageFieldName], messageFieldType)}`);\n                                        }\n                                    }\n                                    whereSql = `${actionField.name} IN `;\n                                    if (messageFieldValues.length > 0) {\n                                        whereSql = whereSql + `(${messageFieldValues.join(', ')})`;\n                                    }\n                                    else {\n                                        whereSql = '';\n                                    }\n                                }\n                                if (message.records.length > 0) {\n                                    const moreAditionSQL = actionConfig.sqlExprObj ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.dataSourceUtils.getArcGISSQL(actionConfig.sqlExprObj, actionDataSource).sql : null;\n                                    if (moreAditionSQL) {\n                                        if (whereSql) {\n                                            whereSql = whereSql + ' AND ' + moreAditionSQL;\n                                        }\n                                        else {\n                                            whereSql = moreAditionSQL;\n                                        }\n                                    }\n                                }\n                                else {\n                                    whereSql = '';\n                                }\n                                filterActionValue = {\n                                    layerDataSourceId: actionDataSource && actionDataSource.id,\n                                    querySQL: whereSql\n                                };\n                            }\n                            else {\n                                // not use DataRelationShip\n                                let whereSql = '';\n                                if (message.records.length > 0) {\n                                    const moreAditionSQL = actionConfig.sqlExprObj ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.dataSourceUtils.getArcGISSQL(actionConfig.sqlExprObj, actionDataSource).sql : null;\n                                    if (moreAditionSQL) {\n                                        whereSql = moreAditionSQL;\n                                    }\n                                }\n                                else {\n                                    whereSql = '';\n                                }\n                                filterActionValue = {\n                                    layerDataSourceId: actionDataSource && actionDataSource.id,\n                                    querySQL: whereSql\n                                };\n                            }\n                        }\n                        else {\n                            // when ds instances don't exist\n                            filterActionValue = null;\n                        }\n                    }\n                    else {\n                        filterActionValue = null;\n                    }\n                }\n                const messageKey = this.getFilterMessageKey(message.widgetId, messageDataSource === null || messageDataSource === void 0 ? void 0 : messageDataSource.id);\n                const actionKey = this.getFilterActionKey(filterActionValue === null || filterActionValue === void 0 ? void 0 : filterActionValue.layerDataSourceId);\n                if (filterActionValue) {\n                    jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.setValue(this.filterActions, `${actionKey}.${messageKey}`, {\n                        querySQL: filterActionValue === null || filterActionValue === void 0 ? void 0 : filterActionValue.querySQL,\n                        messageWidgetId: message.widgetId\n                    });\n                    filterActionValue.querySQL = this.getUnionAllFilterQuerySQL(actionKey);\n                }\n                jimu_core__WEBPACK_IMPORTED_MODULE_0__.MutableStoreManager.getInstance().updateStateValue(this.widgetId, actionKey, filterActionValue);\n                break;\n        }\n        return true;\n    }\n    getUnionAllFilterQuerySQL(actionKey) {\n        let unionQuerySQL = '';\n        Object.entries(this.filterActions[actionKey] || {}).forEach(entry => {\n            var _a;\n            //const filterMessageKey = entry[0]\n            const querySQL = (_a = entry[1]) === null || _a === void 0 ? void 0 : _a.querySQL;\n            if (unionQuerySQL && querySQL) {\n                unionQuerySQL = ` ${unionQuerySQL} AND ${querySQL} `;\n            }\n            else {\n                unionQuerySQL = querySQL || unionQuerySQL;\n            }\n        });\n        return unionQuerySQL;\n    }\n    getFilterActionKey(actionLayerDataSourceId) {\n        const actionKey = `${FILTER_ACTION_KEY_PREFIX}${actionLayerDataSourceId}`;\n        return actionKey;\n    }\n    getFilterMessageKey(messageWidgetId, messageLayerDataSourceId) {\n        const messageKey = `${FILTER_MESSAGE_KEY_PREFIX}${messageWidgetId}-${messageLayerDataSourceId}`;\n        return messageKey;\n    }\n    getLayerIdFromLayerDs(ds) {\n        if (ds.layerId) {\n            return ds.layerId;\n        }\n        else if (ds.layer) {\n            return ds.layer.id;\n        }\n        else {\n            return null;\n        }\n    }\n    formatValue(value, type) {\n        if (type === 'STRING') {\n            return `'${value}'`;\n        }\n        else if (type === 'NUMBER') {\n            return `${value}`;\n        }\n        else if (type === 'DATE') {\n            return `'${value}'`;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FyY2dpcy1tYXAvc3JjL21lc3NhZ2UtYWN0aW9ucy9maWx0ZXItYWN0aW9uLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFPQTtBQUNBO0FBRUE7QUFBQTs7QUFDQTtBQStNQTtBQXRNQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FyY2dpcy1tYXAvc3JjL21lc3NhZ2UtYWN0aW9ucy9maWx0ZXItYWN0aW9uLnRzP2M0MjgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQWJzdHJhY3RNZXNzYWdlQWN0aW9uLCBNZXNzYWdlVHlwZSwgTWVzc2FnZSwgRmllbGRTY2hlbWEsIGxvZGFzaCxcbiAgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlLCBEYXRhU291cmNlTWFuYWdlciwgRmVhdHVyZVF1ZXJ5RGF0YVNvdXJjZSwgSW1tdXRhYmxlT2JqZWN0LCBkYXRhU291cmNlVXRpbHMsIE11dGFibGVTdG9yZU1hbmFnZXJcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSB9IGZyb20gJ2ppbXUtYXJjZ2lzJ1xuaW1wb3J0IHsgSU1Db25maWcgfSBmcm9tICcuLi9tZXNzYWdlLWFjdGlvbnMvZmlsdGVyLWFjdGlvbi1zZXR0aW5nJ1xuXG5jb25zdCBGSUxURVJfQUNUSU9OX0tFWV9QUkVGSVg6IHN0cmluZyA9ICdmaWx0ZXJBY3Rpb25WYWx1ZS0nXG5jb25zdCBGSUxURVJfTUVTU0FHRV9LRVlfUFJFRklYOiBzdHJpbmcgPSAnZmlsdGVyTWVzc2FnZVZhbHVlLSdcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRmlsdGVyQWN0aW9uIGV4dGVuZHMgQWJzdHJhY3RNZXNzYWdlQWN0aW9uIHtcbiAgcHJpdmF0ZSByZWFkb25seSBmaWx0ZXJBY3Rpb25zOiB7XG4gICAgW2ZpbHRlckFjdGlvbktleTogc3RyaW5nXToge1xuICAgICAgW2ZpbHRlck1lc3NhZ2VLZXk6IHN0cmluZ106IHtcbiAgICAgICAgcXVlcnlTUUw6IHN0cmluZ1xuICAgICAgICBtZXNzYWdlV2lkZ2V0SWQ6IHN0cmluZ1xuICAgICAgfVxuICAgIH1cbiAgfSA9IHt9XG5cbiAgZmlsdGVyTWVzc2FnZVR5cGUgKG1lc3NhZ2VUeXBlOiBNZXNzYWdlVHlwZSwgbWVzc2FnZVdpZGdldElkPzogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIG1lc3NhZ2VUeXBlID09PSBNZXNzYWdlVHlwZS5EYXRhUmVjb3Jkc1NlbGVjdGlvbkNoYW5nZVxuICB9XG5cbiAgZmlsdGVyTWVzc2FnZSAobWVzc2FnZTogTWVzc2FnZSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBvblJlbW92ZUxpc3RlbiAobWVzc2FnZVR5cGU6IE1lc3NhZ2VUeXBlLCBtZXNzYWdlV2lkZ2V0SWQ/OiBzdHJpbmcpIHtcbiAgICBPYmplY3Qua2V5cyh0aGlzLmZpbHRlckFjdGlvbnMgfHwge30pLmZvckVhY2goYWN0aW9uS2V5ID0+IHtcbiAgICAgIE9iamVjdC5lbnRyaWVzKHRoaXMuZmlsdGVyQWN0aW9uc1thY3Rpb25LZXldIHx8IHt9KS5mb3JFYWNoKGVudHJ5ID0+IHtcbiAgICAgICAgY29uc3QgbWVzc2FnZUtleSA9IGVudHJ5WzBdXG4gICAgICAgIGlmIChlbnRyeVsxXT8ubWVzc2FnZVdpZGdldElkID09PSBtZXNzYWdlV2lkZ2V0SWQpIHtcbiAgICAgICAgICBsb2Rhc2guc2V0VmFsdWUodGhpcy5maWx0ZXJBY3Rpb25zLCBgJHthY3Rpb25LZXl9LiR7bWVzc2FnZUtleX0ucXVlcnlTUUxgLCAnJylcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIGNvbnN0IGZpbHRlckFjdGlvblZhbHVlID0ge1xuICAgICAgICBsYXllckRhdGFTb3VyY2VJZDogYWN0aW9uS2V5LnNsaWNlKEZJTFRFUl9BQ1RJT05fS0VZX1BSRUZJWC5sZW5ndGgpLFxuICAgICAgICBxdWVyeVNRTDogdGhpcy5nZXRVbmlvbkFsbEZpbHRlclF1ZXJ5U1FMKGFjdGlvbktleSlcbiAgICAgIH1cbiAgICAgIE11dGFibGVTdG9yZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS51cGRhdGVTdGF0ZVZhbHVlKHRoaXMud2lkZ2V0SWQsIGFjdGlvbktleSwgZmlsdGVyQWN0aW9uVmFsdWUpXG4gICAgfSlcbiAgfVxuXG4gIG9uRXhlY3V0ZSAobWVzc2FnZTogTWVzc2FnZSwgYWN0aW9uQ29uZmlnPzogSU1Db25maWcpOiBQcm9taXNlPGJvb2xlYW4+IHwgYm9vbGVhbiB7XG4gICAgc3dpdGNoIChtZXNzYWdlLnR5cGUpIHtcbiAgICAgIGNhc2UgTWVzc2FnZVR5cGUuRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2U6XG4gICAgICAgIGxldCBmaWx0ZXJBY3Rpb25WYWx1ZToge2xheWVyRGF0YVNvdXJjZUlkOiBzdHJpbmcsIHF1ZXJ5U1FMOiBzdHJpbmd9ID0gbnVsbFxuICAgICAgICBsZXQgbWVzc2FnZURhdGFTb3VyY2UsIGFjdGlvbkRhdGFTb3VyY2VcbiAgICAgICAgaWYgKGFjdGlvbkNvbmZpZykge1xuICAgICAgICAgIGlmIChhY3Rpb25Db25maWcubWVzc2FnZVVzZURhdGFTb3VyY2UgJiYgYWN0aW9uQ29uZmlnLmFjdGlvblVzZURhdGFTb3VyY2UpIHtcbiAgICAgICAgICAgIGlmICgobWVzc2FnZSBhcyBEYXRhUmVjb3Jkc1NlbGVjdGlvbkNoYW5nZU1lc3NhZ2UpLnJlY29yZHMubGVuZ3RoID4gMCAmJlxuICAgICAgICAgICAgICAobWVzc2FnZSBhcyBEYXRhUmVjb3Jkc1NlbGVjdGlvbkNoYW5nZU1lc3NhZ2UpLnJlY29yZHNbMF0uZGF0YVNvdXJjZS5nZXRNYWluRGF0YVNvdXJjZSgpLmlkICE9PSBhY3Rpb25Db25maWcubWVzc2FnZVVzZURhdGFTb3VyY2UubWFpbkRhdGFTb3VyY2VJZCkge1xuICAgICAgICAgICAgICBNdXRhYmxlU3RvcmVNYW5hZ2VyLmdldEluc3RhbmNlKCkudXBkYXRlU3RhdGVWYWx1ZSh0aGlzLndpZGdldElkLCAnZmlsdGVyQWN0aW9uVmFsdWUnLCBudWxsKVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBtZXNzYWdlRGF0YVNvdXJjZSA9IERhdGFTb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0RGF0YVNvdXJjZShhY3Rpb25Db25maWcubWVzc2FnZVVzZURhdGFTb3VyY2UubWFpbkRhdGFTb3VyY2VJZClcbiAgICAgICAgICAgIGFjdGlvbkRhdGFTb3VyY2UgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldERhdGFTb3VyY2UoYWN0aW9uQ29uZmlnLmFjdGlvblVzZURhdGFTb3VyY2UubWFpbkRhdGFTb3VyY2VJZClcblxuICAgICAgICAgICAgaWYgKG1lc3NhZ2VEYXRhU291cmNlICYmIGFjdGlvbkRhdGFTb3VyY2UpIHtcbiAgICAgICAgICAgICAgaWYgKChtZXNzYWdlIGFzIERhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlTWVzc2FnZSkucmVjb3Jkcy5sZW5ndGggPD0gMCkge1xuICAgICAgICAgICAgICAgIC8vIGNsZWFyIGZpbHRlclxuICAgICAgICAgICAgICAgIGZpbHRlckFjdGlvblZhbHVlID0ge1xuICAgICAgICAgICAgICAgICAgbGF5ZXJEYXRhU291cmNlSWQ6IGFjdGlvbkRhdGFTb3VyY2UgJiYgYWN0aW9uRGF0YVNvdXJjZS5pZCxcbiAgICAgICAgICAgICAgICAgIHF1ZXJ5U1FMOiAnJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChhY3Rpb25Db25maWcuZW5hYmxlZERhdGFSZWxhdGlvblNoaXApIHtcbiAgICAgICAgICAgICAgICAvLyB3aGVuIGRzIGluc3RhbmNlcyBleGl0XG4gICAgICAgICAgICAgICAgLy8gdXNlIERhdGFSZWxhdGlvblNoaXBcbiAgICAgICAgICAgICAgICBsZXQgbWVzc2FnZUZpZWxkOiBJbW11dGFibGVPYmplY3Q8RmllbGRTY2hlbWE+ID0gbnVsbFxuICAgICAgICAgICAgICAgIGxldCBhY3Rpb25GaWVsZDogSW1tdXRhYmxlT2JqZWN0PEZpZWxkU2NoZW1hPiA9IG51bGxcblxuICAgICAgICAgICAgICAgIGlmIChhY3Rpb25Db25maWcubWVzc2FnZVVzZURhdGFTb3VyY2UubWFpbkRhdGFTb3VyY2VJZCA9PT0gYWN0aW9uQ29uZmlnLmFjdGlvblVzZURhdGFTb3VyY2UubWFpbkRhdGFTb3VyY2VJZCAmJlxuICAgICAgICAgICAgICAgICAgYWN0aW9uQ29uZmlnLm1lc3NhZ2VVc2VEYXRhU291cmNlLnJvb3REYXRhU291cmNlSWQgPT09IGFjdGlvbkNvbmZpZy5hY3Rpb25Vc2VEYXRhU291cmNlLnJvb3REYXRhU291cmNlSWQpIHtcbiAgICAgICAgICAgICAgICAgIC8vIGlmIHRyaWdnZXIgZHMgaXMgc2FtZSB0byBhY3Rpb24gZHNcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VEc1NjaGVtYSA9IG1lc3NhZ2VEYXRhU291cmNlLmdldFNjaGVtYSgpXG4gICAgICAgICAgICAgICAgICBjb25zdCBvYmplY3RJZEppbXVGaWVsZE5hbWUgPSBtZXNzYWdlRHNTY2hlbWEgJiYgbWVzc2FnZURzU2NoZW1hLmZpZWxkcyAmJlxuICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhtZXNzYWdlRHNTY2hlbWEuZmllbGRzKS5maW5kKGppbXVGaWVsZE5hbWUgPT4gbWVzc2FnZURzU2NoZW1hLmZpZWxkc1tqaW11RmllbGROYW1lXS5lc3JpVHlwZSA9PT0gJ2VzcmlGaWVsZFR5cGVPSUQnKVxuICAgICAgICAgICAgICAgICAgbWVzc2FnZUZpZWxkID0gbWVzc2FnZURzU2NoZW1hICYmIG1lc3NhZ2VEc1NjaGVtYS5maWVsZHMgJiYgbWVzc2FnZURzU2NoZW1hLmZpZWxkc1tvYmplY3RJZEppbXVGaWVsZE5hbWVdXG4gICAgICAgICAgICAgICAgICBhY3Rpb25GaWVsZCA9IG1lc3NhZ2VGaWVsZFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAvLyBpZiB0cmlnZ2VyIGRzIGlzbid0IHNhbWUgdG8gYWN0aW9uIGRzXG4gICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlSmltdUZpZWxkTmFtZSA9IGFjdGlvbkNvbmZpZy5tZXNzYWdlVXNlRGF0YVNvdXJjZS5maWVsZHNbMF1cbiAgICAgICAgICAgICAgICAgIGNvbnN0IGFjdGlvbkppbXVGaWVsZE5hbWUgPSBhY3Rpb25Db25maWcuYWN0aW9uVXNlRGF0YVNvdXJjZS5maWVsZHNbMF1cbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2VGaWVsZCA9IG1lc3NhZ2VEYXRhU291cmNlLmdldFNjaGVtYSgpLmZpZWxkc1ttZXNzYWdlSmltdUZpZWxkTmFtZV1cbiAgICAgICAgICAgICAgICAgIGFjdGlvbkZpZWxkID0gYWN0aW9uRGF0YVNvdXJjZS5nZXRTY2hlbWEoKS5maWVsZHNbYWN0aW9uSmltdUZpZWxkTmFtZV1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBsZXQgd2hlcmVTcWwgPSAnJ1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlRmllbGQgJiYgYWN0aW9uRmllbGQpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VGaWVsZE5hbWUgPSBtZXNzYWdlRmllbGQubmFtZVxuICAgICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZUZpZWxkVHlwZSA9IG1lc3NhZ2VGaWVsZC50eXBlXG5cbiAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBNZXNzYWdlOiBEYXRhUmVjb3Jkc1NlbGVjdGlvbkNoYW5nZU1lc3NhZ2UgPSBtZXNzYWdlIGFzIERhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZUZpZWxkVmFsdWVzID0gW11cblxuICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0ZW1wTWVzc2FnZS5yZWNvcmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBGaWVsZFZhbHVlID0gdGVtcE1lc3NhZ2UucmVjb3Jkc1tpXS5nZXREYXRhKClbbWVzc2FnZUZpZWxkTmFtZV1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2VGaWVsZFZhbHVlcy5pbmNsdWRlcyhgJHt0aGlzLmZvcm1hdFZhbHVlKHRlbXBGaWVsZFZhbHVlLCBtZXNzYWdlRmllbGRUeXBlKX1gKSkge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUZpZWxkVmFsdWVzLnB1c2goYCR7dGhpcy5mb3JtYXRWYWx1ZSh0ZW1wTWVzc2FnZS5yZWNvcmRzW2ldLmdldERhdGEoKVttZXNzYWdlRmllbGROYW1lXSwgbWVzc2FnZUZpZWxkVHlwZSl9YClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICB3aGVyZVNxbCA9IGAke2FjdGlvbkZpZWxkLm5hbWV9IElOIGBcblxuICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2VGaWVsZFZhbHVlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHdoZXJlU3FsID0gd2hlcmVTcWwgKyBgKCR7bWVzc2FnZUZpZWxkVmFsdWVzLmpvaW4oJywgJyl9KWBcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHdoZXJlU3FsID0gJydcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoKG1lc3NhZ2UgYXMgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlKS5yZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG1vcmVBZGl0aW9uU1FMID0gYWN0aW9uQ29uZmlnLnNxbEV4cHJPYmogPyBkYXRhU291cmNlVXRpbHMuZ2V0QXJjR0lTU1FMKGFjdGlvbkNvbmZpZy5zcWxFeHByT2JqLCBhY3Rpb25EYXRhU291cmNlKS5zcWwgOiBudWxsXG4gICAgICAgICAgICAgICAgICBpZiAobW9yZUFkaXRpb25TUUwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHdoZXJlU3FsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgd2hlcmVTcWwgPSB3aGVyZVNxbCArICcgQU5EICcgKyBtb3JlQWRpdGlvblNRTFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIHdoZXJlU3FsID0gbW9yZUFkaXRpb25TUUxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICB3aGVyZVNxbCA9ICcnXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZmlsdGVyQWN0aW9uVmFsdWUgPSB7XG4gICAgICAgICAgICAgICAgICBsYXllckRhdGFTb3VyY2VJZDogYWN0aW9uRGF0YVNvdXJjZSAmJiBhY3Rpb25EYXRhU291cmNlLmlkLFxuICAgICAgICAgICAgICAgICAgcXVlcnlTUUw6IHdoZXJlU3FsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIG5vdCB1c2UgRGF0YVJlbGF0aW9uU2hpcFxuICAgICAgICAgICAgICAgIGxldCB3aGVyZVNxbCA9ICcnXG5cbiAgICAgICAgICAgICAgICBpZiAoKG1lc3NhZ2UgYXMgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlKS5yZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG1vcmVBZGl0aW9uU1FMID0gYWN0aW9uQ29uZmlnLnNxbEV4cHJPYmogPyBkYXRhU291cmNlVXRpbHMuZ2V0QXJjR0lTU1FMKGFjdGlvbkNvbmZpZy5zcWxFeHByT2JqLCBhY3Rpb25EYXRhU291cmNlKS5zcWwgOiBudWxsXG4gICAgICAgICAgICAgICAgICBpZiAobW9yZUFkaXRpb25TUUwpIHtcbiAgICAgICAgICAgICAgICAgICAgd2hlcmVTcWwgPSBtb3JlQWRpdGlvblNRTFxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICB3aGVyZVNxbCA9ICcnXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZmlsdGVyQWN0aW9uVmFsdWUgPSB7XG4gICAgICAgICAgICAgICAgICBsYXllckRhdGFTb3VyY2VJZDogYWN0aW9uRGF0YVNvdXJjZSAmJiBhY3Rpb25EYXRhU291cmNlLmlkLFxuICAgICAgICAgICAgICAgICAgcXVlcnlTUUw6IHdoZXJlU3FsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyB3aGVuIGRzIGluc3RhbmNlcyBkb24ndCBleGlzdFxuICAgICAgICAgICAgICBmaWx0ZXJBY3Rpb25WYWx1ZSA9IG51bGxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZmlsdGVyQWN0aW9uVmFsdWUgPSBudWxsXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbWVzc2FnZUtleSA9IHRoaXMuZ2V0RmlsdGVyTWVzc2FnZUtleShtZXNzYWdlLndpZGdldElkLCBtZXNzYWdlRGF0YVNvdXJjZT8uaWQpXG4gICAgICAgIGNvbnN0IGFjdGlvbktleSA9IHRoaXMuZ2V0RmlsdGVyQWN0aW9uS2V5KGZpbHRlckFjdGlvblZhbHVlPy5sYXllckRhdGFTb3VyY2VJZClcbiAgICAgICAgaWYgKGZpbHRlckFjdGlvblZhbHVlKSB7XG4gICAgICAgICAgbG9kYXNoLnNldFZhbHVlKHRoaXMuZmlsdGVyQWN0aW9ucywgYCR7YWN0aW9uS2V5fS4ke21lc3NhZ2VLZXl9YCwge1xuICAgICAgICAgICAgcXVlcnlTUUw6IGZpbHRlckFjdGlvblZhbHVlPy5xdWVyeVNRTCxcbiAgICAgICAgICAgIG1lc3NhZ2VXaWRnZXRJZDogbWVzc2FnZS53aWRnZXRJZFxuICAgICAgICAgIH0pXG4gICAgICAgICAgZmlsdGVyQWN0aW9uVmFsdWUucXVlcnlTUUwgPSB0aGlzLmdldFVuaW9uQWxsRmlsdGVyUXVlcnlTUUwoYWN0aW9uS2V5KVxuICAgICAgICB9XG4gICAgICAgIE11dGFibGVTdG9yZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS51cGRhdGVTdGF0ZVZhbHVlKHRoaXMud2lkZ2V0SWQsIGFjdGlvbktleSwgZmlsdGVyQWN0aW9uVmFsdWUpXG4gICAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGdldFVuaW9uQWxsRmlsdGVyUXVlcnlTUUwgKGFjdGlvbktleSkge1xuICAgIGxldCB1bmlvblF1ZXJ5U1FMID0gJydcbiAgICBPYmplY3QuZW50cmllcyh0aGlzLmZpbHRlckFjdGlvbnNbYWN0aW9uS2V5XSB8fCB7fSkuZm9yRWFjaChlbnRyeSA9PiB7XG4gICAgICAvL2NvbnN0IGZpbHRlck1lc3NhZ2VLZXkgPSBlbnRyeVswXVxuICAgICAgY29uc3QgcXVlcnlTUUwgPSBlbnRyeVsxXT8ucXVlcnlTUUxcbiAgICAgIGlmICh1bmlvblF1ZXJ5U1FMICYmIHF1ZXJ5U1FMKSB7XG4gICAgICAgIHVuaW9uUXVlcnlTUUwgPSBgICR7dW5pb25RdWVyeVNRTH0gQU5EICR7cXVlcnlTUUx9IGBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVuaW9uUXVlcnlTUUwgPSBxdWVyeVNRTCB8fCB1bmlvblF1ZXJ5U1FMXG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gdW5pb25RdWVyeVNRTFxuICB9XG5cbiAgZ2V0RmlsdGVyQWN0aW9uS2V5IChhY3Rpb25MYXllckRhdGFTb3VyY2VJZCkge1xuICAgIGNvbnN0IGFjdGlvbktleSA9IGAke0ZJTFRFUl9BQ1RJT05fS0VZX1BSRUZJWH0ke2FjdGlvbkxheWVyRGF0YVNvdXJjZUlkfWBcbiAgICByZXR1cm4gYWN0aW9uS2V5XG4gIH1cblxuICBnZXRGaWx0ZXJNZXNzYWdlS2V5IChtZXNzYWdlV2lkZ2V0SWQsIG1lc3NhZ2VMYXllckRhdGFTb3VyY2VJZCkge1xuICAgIGNvbnN0IG1lc3NhZ2VLZXkgPSBgJHtGSUxURVJfTUVTU0FHRV9LRVlfUFJFRklYfSR7bWVzc2FnZVdpZGdldElkfS0ke21lc3NhZ2VMYXllckRhdGFTb3VyY2VJZH1gXG4gICAgcmV0dXJuIG1lc3NhZ2VLZXlcbiAgfVxuXG4gIGdldExheWVySWRGcm9tTGF5ZXJEcyAoZHM6IEZlYXR1cmVMYXllckRhdGFTb3VyY2UgfCBGZWF0dXJlUXVlcnlEYXRhU291cmNlKSB7XG4gICAgaWYgKChkcyBhcyBhbnkpLmxheWVySWQpIHtcbiAgICAgIHJldHVybiAoZHMgYXMgRmVhdHVyZVF1ZXJ5RGF0YVNvdXJjZSkubGF5ZXJJZFxuICAgIH0gZWxzZSBpZiAoKGRzIGFzIGFueSkubGF5ZXIpIHtcbiAgICAgIHJldHVybiAoZHMgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSkubGF5ZXIuaWRcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gIH1cblxuICBmb3JtYXRWYWx1ZSAodmFsdWUsIHR5cGU6IHN0cmluZykge1xuICAgIGlmICh0eXBlID09PSAnU1RSSU5HJykge1xuICAgICAgcmV0dXJuIGAnJHt2YWx1ZX0nYFxuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ05VTUJFUicpIHtcbiAgICAgIHJldHVybiBgJHt2YWx1ZX1gXG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAnREFURScpIHtcbiAgICAgIHJldHVybiBgJyR7dmFsdWV9J2BcbiAgICB9XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./extensions/widgets/arcgis/arcgis-map/src/message-actions/filter-action.ts\n");

/***/ }),

/***/ "jimu-core":
/*!****************************!*\
  !*** external "jimu-core" ***!
  \****************************/
/***/ ((module) => {

module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_core__;

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./extensions/widgets/arcgis/arcgis-map/src/message-actions/filter-action.ts");
/******/ 	
/******/ 	return __webpack_exports__;
/******/ })()

			);
		}
	};
});