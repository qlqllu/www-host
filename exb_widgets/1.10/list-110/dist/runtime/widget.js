System.register(["jimu-core","jimu-ui","jimu-layouts/layout-runtime","jimu-core/react","jimu-ui/basic/sql-expression-runtime"], function(__WEBPACK_DYNAMIC_EXPORT__, __system_context__) {
	var __WEBPACK_EXTERNAL_MODULE_jimu_core__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_ui__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__ = {};
	var __WEBPACK_EXTERNAL_MODULE_react__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__ = {};
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_core__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_ui__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_react__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__, "__esModule", { value: true });
	return {
		setters: [
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_core__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_ui__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_react__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__[key] = module[key];
				});
			}
		],
		execute: function() {
			__WEBPACK_DYNAMIC_EXPORT__(
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/memoize-one/dist/memoize-one.esm.js":
/*!**********************************************************!*\
  !*** ./node_modules/memoize-one/dist/memoize-one.esm.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
var safeIsNaN = Number.isNaN ||
    function ponyfill(value) {
        return typeof value === 'number' && value !== value;
    };
function isEqual(first, second) {
    if (first === second) {
        return true;
    }
    if (safeIsNaN(first) && safeIsNaN(second)) {
        return true;
    }
    return false;
}
function areInputsEqual(newInputs, lastInputs) {
    if (newInputs.length !== lastInputs.length) {
        return false;
    }
    for (var i = 0; i < newInputs.length; i++) {
        if (!isEqual(newInputs[i], lastInputs[i])) {
            return false;
        }
    }
    return true;
}

function memoizeOne(resultFn, isEqual) {
    if (isEqual === void 0) { isEqual = areInputsEqual; }
    var lastThis;
    var lastArgs = [];
    var lastResult;
    var calledOnce = false;
    function memoized() {
        var newArgs = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            newArgs[_i] = arguments[_i];
        }
        if (calledOnce && lastThis === this && isEqual(newArgs, lastArgs)) {
            return lastResult;
        }
        lastResult = resultFn.apply(this, newArgs);
        calledOnce = true;
        lastThis = this;
        lastArgs = newArgs;
        return lastResult;
    }
    return memoized;
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (memoizeOne);


/***/ }),

/***/ "./node_modules/react-window/dist/index.esm.js":
/*!*****************************************************!*\
  !*** ./node_modules/react-window/dist/index.esm.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "FixedSizeGrid": () => (/* binding */ FixedSizeGrid),
/* harmony export */   "FixedSizeList": () => (/* binding */ FixedSizeList),
/* harmony export */   "VariableSizeGrid": () => (/* binding */ VariableSizeGrid),
/* harmony export */   "VariableSizeList": () => (/* binding */ VariableSizeList),
/* harmony export */   "areEqual": () => (/* binding */ areEqual),
/* harmony export */   "shouldComponentUpdate": () => (/* binding */ shouldComponentUpdate)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "./node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var memoize_one__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! memoize-one */ "./node_modules/memoize-one/dist/memoize-one.esm.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var _babel_runtime_helpers_esm_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectWithoutPropertiesLoose */ "./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js");







// Animation frame based implementation of setTimeout.
// Inspired by Joe Lambert, https://gist.github.com/joelambert/1002116#file-requesttimeout-js
var hasNativePerformanceNow = typeof performance === 'object' && typeof performance.now === 'function';
var now = hasNativePerformanceNow ? function () {
  return performance.now();
} : function () {
  return Date.now();
};
function cancelTimeout(timeoutID) {
  cancelAnimationFrame(timeoutID.id);
}
function requestTimeout(callback, delay) {
  var start = now();

  function tick() {
    if (now() - start >= delay) {
      callback.call(null);
    } else {
      timeoutID.id = requestAnimationFrame(tick);
    }
  }

  var timeoutID = {
    id: requestAnimationFrame(tick)
  };
  return timeoutID;
}

var size = -1; // This utility copied from "dom-helpers" package.

function getScrollbarSize(recalculate) {
  if (recalculate === void 0) {
    recalculate = false;
  }

  if (size === -1 || recalculate) {
    var div = document.createElement('div');
    var style = div.style;
    style.width = '50px';
    style.height = '50px';
    style.overflow = 'scroll';
    document.body.appendChild(div);
    size = div.offsetWidth - div.clientWidth;
    document.body.removeChild(div);
  }

  return size;
}
var cachedRTLResult = null; // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.
// Chrome does not seem to adhere; its scrollLeft values are positive (measured relative to the left).
// Safari's elastic bounce makes detecting this even more complicated wrt potential false positives.
// The safest way to check this is to intentionally set a negative offset,
// and then verify that the subsequent "scroll" event matches the negative offset.
// If it does not match, then we can assume a non-standard RTL scroll implementation.

function getRTLOffsetType(recalculate) {
  if (recalculate === void 0) {
    recalculate = false;
  }

  if (cachedRTLResult === null || recalculate) {
    var outerDiv = document.createElement('div');
    var outerStyle = outerDiv.style;
    outerStyle.width = '50px';
    outerStyle.height = '50px';
    outerStyle.overflow = 'scroll';
    outerStyle.direction = 'rtl';
    var innerDiv = document.createElement('div');
    var innerStyle = innerDiv.style;
    innerStyle.width = '100px';
    innerStyle.height = '100px';
    outerDiv.appendChild(innerDiv);
    document.body.appendChild(outerDiv);

    if (outerDiv.scrollLeft > 0) {
      cachedRTLResult = 'positive-descending';
    } else {
      outerDiv.scrollLeft = 1;

      if (outerDiv.scrollLeft === 0) {
        cachedRTLResult = 'negative';
      } else {
        cachedRTLResult = 'positive-ascending';
      }
    }

    document.body.removeChild(outerDiv);
    return cachedRTLResult;
  }

  return cachedRTLResult;
}

var IS_SCROLLING_DEBOUNCE_INTERVAL = 150;

var defaultItemKey = function defaultItemKey(_ref) {
  var columnIndex = _ref.columnIndex,
      data = _ref.data,
      rowIndex = _ref.rowIndex;
  return rowIndex + ":" + columnIndex;
}; // In DEV mode, this Set helps us only log a warning once per component instance.
// This avoids spamming the console every time a render happens.


var devWarningsOverscanCount = null;
var devWarningsOverscanRowsColumnsCount = null;
var devWarningsTagName = null;

if (true) {
  if (typeof window !== 'undefined' && typeof window.WeakSet !== 'undefined') {
    devWarningsOverscanCount = /*#__PURE__*/new WeakSet();
    devWarningsOverscanRowsColumnsCount = /*#__PURE__*/new WeakSet();
    devWarningsTagName = /*#__PURE__*/new WeakSet();
  }
}

function createGridComponent(_ref2) {
  var _class;

  var getColumnOffset = _ref2.getColumnOffset,
      getColumnStartIndexForOffset = _ref2.getColumnStartIndexForOffset,
      getColumnStopIndexForStartIndex = _ref2.getColumnStopIndexForStartIndex,
      getColumnWidth = _ref2.getColumnWidth,
      getEstimatedTotalHeight = _ref2.getEstimatedTotalHeight,
      getEstimatedTotalWidth = _ref2.getEstimatedTotalWidth,
      getOffsetForColumnAndAlignment = _ref2.getOffsetForColumnAndAlignment,
      getOffsetForRowAndAlignment = _ref2.getOffsetForRowAndAlignment,
      getRowHeight = _ref2.getRowHeight,
      getRowOffset = _ref2.getRowOffset,
      getRowStartIndexForOffset = _ref2.getRowStartIndexForOffset,
      getRowStopIndexForStartIndex = _ref2.getRowStopIndexForStartIndex,
      initInstanceProps = _ref2.initInstanceProps,
      shouldResetStyleCacheOnItemSizeChange = _ref2.shouldResetStyleCacheOnItemSizeChange,
      validateProps = _ref2.validateProps;
  return _class = /*#__PURE__*/function (_PureComponent) {
    (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_2__["default"])(Grid, _PureComponent);

    // Always use explicit constructor for React components.
    // It produces less code after transpilation. (#26)
    // eslint-disable-next-line no-useless-constructor
    function Grid(props) {
      var _this;

      _this = _PureComponent.call(this, props) || this;
      _this._instanceProps = initInstanceProps(_this.props, (0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_1__["default"])(_this));
      _this._resetIsScrollingTimeoutId = null;
      _this._outerRef = void 0;
      _this.state = {
        instance: (0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_1__["default"])(_this),
        isScrolling: false,
        horizontalScrollDirection: 'forward',
        scrollLeft: typeof _this.props.initialScrollLeft === 'number' ? _this.props.initialScrollLeft : 0,
        scrollTop: typeof _this.props.initialScrollTop === 'number' ? _this.props.initialScrollTop : 0,
        scrollUpdateWasRequested: false,
        verticalScrollDirection: 'forward'
      };
      _this._callOnItemsRendered = void 0;
      _this._callOnItemsRendered = (0,memoize_one__WEBPACK_IMPORTED_MODULE_5__["default"])(function (overscanColumnStartIndex, overscanColumnStopIndex, overscanRowStartIndex, overscanRowStopIndex, visibleColumnStartIndex, visibleColumnStopIndex, visibleRowStartIndex, visibleRowStopIndex) {
        return _this.props.onItemsRendered({
          overscanColumnStartIndex: overscanColumnStartIndex,
          overscanColumnStopIndex: overscanColumnStopIndex,
          overscanRowStartIndex: overscanRowStartIndex,
          overscanRowStopIndex: overscanRowStopIndex,
          visibleColumnStartIndex: visibleColumnStartIndex,
          visibleColumnStopIndex: visibleColumnStopIndex,
          visibleRowStartIndex: visibleRowStartIndex,
          visibleRowStopIndex: visibleRowStopIndex
        });
      });
      _this._callOnScroll = void 0;
      _this._callOnScroll = (0,memoize_one__WEBPACK_IMPORTED_MODULE_5__["default"])(function (scrollLeft, scrollTop, horizontalScrollDirection, verticalScrollDirection, scrollUpdateWasRequested) {
        return _this.props.onScroll({
          horizontalScrollDirection: horizontalScrollDirection,
          scrollLeft: scrollLeft,
          scrollTop: scrollTop,
          verticalScrollDirection: verticalScrollDirection,
          scrollUpdateWasRequested: scrollUpdateWasRequested
        });
      });
      _this._getItemStyle = void 0;

      _this._getItemStyle = function (rowIndex, columnIndex) {
        var _this$props = _this.props,
            columnWidth = _this$props.columnWidth,
            direction = _this$props.direction,
            rowHeight = _this$props.rowHeight;

        var itemStyleCache = _this._getItemStyleCache(shouldResetStyleCacheOnItemSizeChange && columnWidth, shouldResetStyleCacheOnItemSizeChange && direction, shouldResetStyleCacheOnItemSizeChange && rowHeight);

        var key = rowIndex + ":" + columnIndex;
        var style;

        if (itemStyleCache.hasOwnProperty(key)) {
          style = itemStyleCache[key];
        } else {
          var _offset = getColumnOffset(_this.props, columnIndex, _this._instanceProps);

          var isRtl = direction === 'rtl';
          itemStyleCache[key] = style = {
            position: 'absolute',
            left: isRtl ? undefined : _offset,
            right: isRtl ? _offset : undefined,
            top: getRowOffset(_this.props, rowIndex, _this._instanceProps),
            height: getRowHeight(_this.props, rowIndex, _this._instanceProps),
            width: getColumnWidth(_this.props, columnIndex, _this._instanceProps)
          };
        }

        return style;
      };

      _this._getItemStyleCache = void 0;
      _this._getItemStyleCache = (0,memoize_one__WEBPACK_IMPORTED_MODULE_5__["default"])(function (_, __, ___) {
        return {};
      });

      _this._onScroll = function (event) {
        var _event$currentTarget = event.currentTarget,
            clientHeight = _event$currentTarget.clientHeight,
            clientWidth = _event$currentTarget.clientWidth,
            scrollLeft = _event$currentTarget.scrollLeft,
            scrollTop = _event$currentTarget.scrollTop,
            scrollHeight = _event$currentTarget.scrollHeight,
            scrollWidth = _event$currentTarget.scrollWidth;

        _this.setState(function (prevState) {
          if (prevState.scrollLeft === scrollLeft && prevState.scrollTop === scrollTop) {
            // Scroll position may have been updated by cDM/cDU,
            // In which case we don't need to trigger another render,
            // And we don't want to update state.isScrolling.
            return null;
          }

          var direction = _this.props.direction; // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.
          // This is not the case for all browsers though (e.g. Chrome reports values as positive, measured relative to the left).
          // It's also easier for this component if we convert offsets to the same format as they would be in for ltr.
          // So the simplest solution is to determine which browser behavior we're dealing with, and convert based on it.

          var calculatedScrollLeft = scrollLeft;

          if (direction === 'rtl') {
            switch (getRTLOffsetType()) {
              case 'negative':
                calculatedScrollLeft = -scrollLeft;
                break;

              case 'positive-descending':
                calculatedScrollLeft = scrollWidth - clientWidth - scrollLeft;
                break;
            }
          } // Prevent Safari's elastic scrolling from causing visual shaking when scrolling past bounds.


          calculatedScrollLeft = Math.max(0, Math.min(calculatedScrollLeft, scrollWidth - clientWidth));
          var calculatedScrollTop = Math.max(0, Math.min(scrollTop, scrollHeight - clientHeight));
          return {
            isScrolling: true,
            horizontalScrollDirection: prevState.scrollLeft < scrollLeft ? 'forward' : 'backward',
            scrollLeft: calculatedScrollLeft,
            scrollTop: calculatedScrollTop,
            verticalScrollDirection: prevState.scrollTop < scrollTop ? 'forward' : 'backward',
            scrollUpdateWasRequested: false
          };
        }, _this._resetIsScrollingDebounced);
      };

      _this._outerRefSetter = function (ref) {
        var outerRef = _this.props.outerRef;
        _this._outerRef = ref;

        if (typeof outerRef === 'function') {
          outerRef(ref);
        } else if (outerRef != null && typeof outerRef === 'object' && outerRef.hasOwnProperty('current')) {
          outerRef.current = ref;
        }
      };

      _this._resetIsScrollingDebounced = function () {
        if (_this._resetIsScrollingTimeoutId !== null) {
          cancelTimeout(_this._resetIsScrollingTimeoutId);
        }

        _this._resetIsScrollingTimeoutId = requestTimeout(_this._resetIsScrolling, IS_SCROLLING_DEBOUNCE_INTERVAL);
      };

      _this._resetIsScrolling = function () {
        _this._resetIsScrollingTimeoutId = null;

        _this.setState({
          isScrolling: false
        }, function () {
          // Clear style cache after state update has been committed.
          // This way we don't break pure sCU for items that don't use isScrolling param.
          _this._getItemStyleCache(-1);
        });
      };

      return _this;
    }

    Grid.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {
      validateSharedProps(nextProps, prevState);
      validateProps(nextProps);
      return null;
    };

    var _proto = Grid.prototype;

    _proto.scrollTo = function scrollTo(_ref3) {
      var scrollLeft = _ref3.scrollLeft,
          scrollTop = _ref3.scrollTop;

      if (scrollLeft !== undefined) {
        scrollLeft = Math.max(0, scrollLeft);
      }

      if (scrollTop !== undefined) {
        scrollTop = Math.max(0, scrollTop);
      }

      this.setState(function (prevState) {
        if (scrollLeft === undefined) {
          scrollLeft = prevState.scrollLeft;
        }

        if (scrollTop === undefined) {
          scrollTop = prevState.scrollTop;
        }

        if (prevState.scrollLeft === scrollLeft && prevState.scrollTop === scrollTop) {
          return null;
        }

        return {
          horizontalScrollDirection: prevState.scrollLeft < scrollLeft ? 'forward' : 'backward',
          scrollLeft: scrollLeft,
          scrollTop: scrollTop,
          scrollUpdateWasRequested: true,
          verticalScrollDirection: prevState.scrollTop < scrollTop ? 'forward' : 'backward'
        };
      }, this._resetIsScrollingDebounced);
    };

    _proto.scrollToItem = function scrollToItem(_ref4) {
      var _ref4$align = _ref4.align,
          align = _ref4$align === void 0 ? 'auto' : _ref4$align,
          columnIndex = _ref4.columnIndex,
          rowIndex = _ref4.rowIndex;
      var _this$props2 = this.props,
          columnCount = _this$props2.columnCount,
          height = _this$props2.height,
          rowCount = _this$props2.rowCount,
          width = _this$props2.width;
      var _this$state = this.state,
          scrollLeft = _this$state.scrollLeft,
          scrollTop = _this$state.scrollTop;
      var scrollbarSize = getScrollbarSize();

      if (columnIndex !== undefined) {
        columnIndex = Math.max(0, Math.min(columnIndex, columnCount - 1));
      }

      if (rowIndex !== undefined) {
        rowIndex = Math.max(0, Math.min(rowIndex, rowCount - 1));
      }

      var estimatedTotalHeight = getEstimatedTotalHeight(this.props, this._instanceProps);
      var estimatedTotalWidth = getEstimatedTotalWidth(this.props, this._instanceProps); // The scrollbar size should be considered when scrolling an item into view,
      // to ensure it's fully visible.
      // But we only need to account for its size when it's actually visible.

      var horizontalScrollbarSize = estimatedTotalWidth > width ? scrollbarSize : 0;
      var verticalScrollbarSize = estimatedTotalHeight > height ? scrollbarSize : 0;
      this.scrollTo({
        scrollLeft: columnIndex !== undefined ? getOffsetForColumnAndAlignment(this.props, columnIndex, align, scrollLeft, this._instanceProps, verticalScrollbarSize) : scrollLeft,
        scrollTop: rowIndex !== undefined ? getOffsetForRowAndAlignment(this.props, rowIndex, align, scrollTop, this._instanceProps, horizontalScrollbarSize) : scrollTop
      });
    };

    _proto.componentDidMount = function componentDidMount() {
      var _this$props3 = this.props,
          initialScrollLeft = _this$props3.initialScrollLeft,
          initialScrollTop = _this$props3.initialScrollTop;

      if (this._outerRef != null) {
        var outerRef = this._outerRef;

        if (typeof initialScrollLeft === 'number') {
          outerRef.scrollLeft = initialScrollLeft;
        }

        if (typeof initialScrollTop === 'number') {
          outerRef.scrollTop = initialScrollTop;
        }
      }

      this._callPropsCallbacks();
    };

    _proto.componentDidUpdate = function componentDidUpdate() {
      var direction = this.props.direction;
      var _this$state2 = this.state,
          scrollLeft = _this$state2.scrollLeft,
          scrollTop = _this$state2.scrollTop,
          scrollUpdateWasRequested = _this$state2.scrollUpdateWasRequested;

      if (scrollUpdateWasRequested && this._outerRef != null) {
        // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.
        // This is not the case for all browsers though (e.g. Chrome reports values as positive, measured relative to the left).
        // So we need to determine which browser behavior we're dealing with, and mimic it.
        var outerRef = this._outerRef;

        if (direction === 'rtl') {
          switch (getRTLOffsetType()) {
            case 'negative':
              outerRef.scrollLeft = -scrollLeft;
              break;

            case 'positive-ascending':
              outerRef.scrollLeft = scrollLeft;
              break;

            default:
              var clientWidth = outerRef.clientWidth,
                  scrollWidth = outerRef.scrollWidth;
              outerRef.scrollLeft = scrollWidth - clientWidth - scrollLeft;
              break;
          }
        } else {
          outerRef.scrollLeft = Math.max(0, scrollLeft);
        }

        outerRef.scrollTop = Math.max(0, scrollTop);
      }

      this._callPropsCallbacks();
    };

    _proto.componentWillUnmount = function componentWillUnmount() {
      if (this._resetIsScrollingTimeoutId !== null) {
        cancelTimeout(this._resetIsScrollingTimeoutId);
      }
    };

    _proto.render = function render() {
      var _this$props4 = this.props,
          children = _this$props4.children,
          className = _this$props4.className,
          columnCount = _this$props4.columnCount,
          direction = _this$props4.direction,
          height = _this$props4.height,
          innerRef = _this$props4.innerRef,
          innerElementType = _this$props4.innerElementType,
          innerTagName = _this$props4.innerTagName,
          itemData = _this$props4.itemData,
          _this$props4$itemKey = _this$props4.itemKey,
          itemKey = _this$props4$itemKey === void 0 ? defaultItemKey : _this$props4$itemKey,
          outerElementType = _this$props4.outerElementType,
          outerTagName = _this$props4.outerTagName,
          rowCount = _this$props4.rowCount,
          style = _this$props4.style,
          useIsScrolling = _this$props4.useIsScrolling,
          width = _this$props4.width;
      var isScrolling = this.state.isScrolling;

      var _this$_getHorizontalR = this._getHorizontalRangeToRender(),
          columnStartIndex = _this$_getHorizontalR[0],
          columnStopIndex = _this$_getHorizontalR[1];

      var _this$_getVerticalRan = this._getVerticalRangeToRender(),
          rowStartIndex = _this$_getVerticalRan[0],
          rowStopIndex = _this$_getVerticalRan[1];

      var items = [];

      if (columnCount > 0 && rowCount) {
        for (var _rowIndex = rowStartIndex; _rowIndex <= rowStopIndex; _rowIndex++) {
          for (var _columnIndex = columnStartIndex; _columnIndex <= columnStopIndex; _columnIndex++) {
            items.push((0,react__WEBPACK_IMPORTED_MODULE_3__.createElement)(children, {
              columnIndex: _columnIndex,
              data: itemData,
              isScrolling: useIsScrolling ? isScrolling : undefined,
              key: itemKey({
                columnIndex: _columnIndex,
                data: itemData,
                rowIndex: _rowIndex
              }),
              rowIndex: _rowIndex,
              style: this._getItemStyle(_rowIndex, _columnIndex)
            }));
          }
        }
      } // Read this value AFTER items have been created,
      // So their actual sizes (if variable) are taken into consideration.


      var estimatedTotalHeight = getEstimatedTotalHeight(this.props, this._instanceProps);
      var estimatedTotalWidth = getEstimatedTotalWidth(this.props, this._instanceProps);
      return (0,react__WEBPACK_IMPORTED_MODULE_3__.createElement)(outerElementType || outerTagName || 'div', {
        className: className,
        onScroll: this._onScroll,
        ref: this._outerRefSetter,
        style: (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({
          position: 'relative',
          height: height,
          width: width,
          overflow: 'auto',
          WebkitOverflowScrolling: 'touch',
          willChange: 'transform',
          direction: direction
        }, style)
      }, (0,react__WEBPACK_IMPORTED_MODULE_3__.createElement)(innerElementType || innerTagName || 'div', {
        children: items,
        ref: innerRef,
        style: {
          height: estimatedTotalHeight,
          pointerEvents: isScrolling ? 'none' : undefined,
          width: estimatedTotalWidth
        }
      }));
    };

    _proto._callPropsCallbacks = function _callPropsCallbacks() {
      var _this$props5 = this.props,
          columnCount = _this$props5.columnCount,
          onItemsRendered = _this$props5.onItemsRendered,
          onScroll = _this$props5.onScroll,
          rowCount = _this$props5.rowCount;

      if (typeof onItemsRendered === 'function') {
        if (columnCount > 0 && rowCount > 0) {
          var _this$_getHorizontalR2 = this._getHorizontalRangeToRender(),
              _overscanColumnStartIndex = _this$_getHorizontalR2[0],
              _overscanColumnStopIndex = _this$_getHorizontalR2[1],
              _visibleColumnStartIndex = _this$_getHorizontalR2[2],
              _visibleColumnStopIndex = _this$_getHorizontalR2[3];

          var _this$_getVerticalRan2 = this._getVerticalRangeToRender(),
              _overscanRowStartIndex = _this$_getVerticalRan2[0],
              _overscanRowStopIndex = _this$_getVerticalRan2[1],
              _visibleRowStartIndex = _this$_getVerticalRan2[2],
              _visibleRowStopIndex = _this$_getVerticalRan2[3];

          this._callOnItemsRendered(_overscanColumnStartIndex, _overscanColumnStopIndex, _overscanRowStartIndex, _overscanRowStopIndex, _visibleColumnStartIndex, _visibleColumnStopIndex, _visibleRowStartIndex, _visibleRowStopIndex);
        }
      }

      if (typeof onScroll === 'function') {
        var _this$state3 = this.state,
            _horizontalScrollDirection = _this$state3.horizontalScrollDirection,
            _scrollLeft = _this$state3.scrollLeft,
            _scrollTop = _this$state3.scrollTop,
            _scrollUpdateWasRequested = _this$state3.scrollUpdateWasRequested,
            _verticalScrollDirection = _this$state3.verticalScrollDirection;

        this._callOnScroll(_scrollLeft, _scrollTop, _horizontalScrollDirection, _verticalScrollDirection, _scrollUpdateWasRequested);
      }
    } // Lazily create and cache item styles while scrolling,
    // So that pure component sCU will prevent re-renders.
    // We maintain this cache, and pass a style prop rather than index,
    // So that List can clear cached styles and force item re-render if necessary.
    ;

    _proto._getHorizontalRangeToRender = function _getHorizontalRangeToRender() {
      var _this$props6 = this.props,
          columnCount = _this$props6.columnCount,
          overscanColumnCount = _this$props6.overscanColumnCount,
          overscanColumnsCount = _this$props6.overscanColumnsCount,
          overscanCount = _this$props6.overscanCount,
          rowCount = _this$props6.rowCount;
      var _this$state4 = this.state,
          horizontalScrollDirection = _this$state4.horizontalScrollDirection,
          isScrolling = _this$state4.isScrolling,
          scrollLeft = _this$state4.scrollLeft;
      var overscanCountResolved = overscanColumnCount || overscanColumnsCount || overscanCount || 1;

      if (columnCount === 0 || rowCount === 0) {
        return [0, 0, 0, 0];
      }

      var startIndex = getColumnStartIndexForOffset(this.props, scrollLeft, this._instanceProps);
      var stopIndex = getColumnStopIndexForStartIndex(this.props, startIndex, scrollLeft, this._instanceProps); // Overscan by one item in each direction so that tab/focus works.
      // If there isn't at least one extra item, tab loops back around.

      var overscanBackward = !isScrolling || horizontalScrollDirection === 'backward' ? Math.max(1, overscanCountResolved) : 1;
      var overscanForward = !isScrolling || horizontalScrollDirection === 'forward' ? Math.max(1, overscanCountResolved) : 1;
      return [Math.max(0, startIndex - overscanBackward), Math.max(0, Math.min(columnCount - 1, stopIndex + overscanForward)), startIndex, stopIndex];
    };

    _proto._getVerticalRangeToRender = function _getVerticalRangeToRender() {
      var _this$props7 = this.props,
          columnCount = _this$props7.columnCount,
          overscanCount = _this$props7.overscanCount,
          overscanRowCount = _this$props7.overscanRowCount,
          overscanRowsCount = _this$props7.overscanRowsCount,
          rowCount = _this$props7.rowCount;
      var _this$state5 = this.state,
          isScrolling = _this$state5.isScrolling,
          verticalScrollDirection = _this$state5.verticalScrollDirection,
          scrollTop = _this$state5.scrollTop;
      var overscanCountResolved = overscanRowCount || overscanRowsCount || overscanCount || 1;

      if (columnCount === 0 || rowCount === 0) {
        return [0, 0, 0, 0];
      }

      var startIndex = getRowStartIndexForOffset(this.props, scrollTop, this._instanceProps);
      var stopIndex = getRowStopIndexForStartIndex(this.props, startIndex, scrollTop, this._instanceProps); // Overscan by one item in each direction so that tab/focus works.
      // If there isn't at least one extra item, tab loops back around.

      var overscanBackward = !isScrolling || verticalScrollDirection === 'backward' ? Math.max(1, overscanCountResolved) : 1;
      var overscanForward = !isScrolling || verticalScrollDirection === 'forward' ? Math.max(1, overscanCountResolved) : 1;
      return [Math.max(0, startIndex - overscanBackward), Math.max(0, Math.min(rowCount - 1, stopIndex + overscanForward)), startIndex, stopIndex];
    };

    return Grid;
  }(react__WEBPACK_IMPORTED_MODULE_3__.PureComponent), _class.defaultProps = {
    direction: 'ltr',
    itemData: undefined,
    useIsScrolling: false
  }, _class;
}

var validateSharedProps = function validateSharedProps(_ref5, _ref6) {
  var children = _ref5.children,
      direction = _ref5.direction,
      height = _ref5.height,
      innerTagName = _ref5.innerTagName,
      outerTagName = _ref5.outerTagName,
      overscanColumnsCount = _ref5.overscanColumnsCount,
      overscanCount = _ref5.overscanCount,
      overscanRowsCount = _ref5.overscanRowsCount,
      width = _ref5.width;
  var instance = _ref6.instance;

  if (true) {
    if (typeof overscanCount === 'number') {
      if (devWarningsOverscanCount && !devWarningsOverscanCount.has(instance)) {
        devWarningsOverscanCount.add(instance);
        console.warn('The overscanCount prop has been deprecated. ' + 'Please use the overscanColumnCount and overscanRowCount props instead.');
      }
    }

    if (typeof overscanColumnsCount === 'number' || typeof overscanRowsCount === 'number') {
      if (devWarningsOverscanRowsColumnsCount && !devWarningsOverscanRowsColumnsCount.has(instance)) {
        devWarningsOverscanRowsColumnsCount.add(instance);
        console.warn('The overscanColumnsCount and overscanRowsCount props have been deprecated. ' + 'Please use the overscanColumnCount and overscanRowCount props instead.');
      }
    }

    if (innerTagName != null || outerTagName != null) {
      if (devWarningsTagName && !devWarningsTagName.has(instance)) {
        devWarningsTagName.add(instance);
        console.warn('The innerTagName and outerTagName props have been deprecated. ' + 'Please use the innerElementType and outerElementType props instead.');
      }
    }

    if (children == null) {
      throw Error('An invalid "children" prop has been specified. ' + 'Value should be a React component. ' + ("\"" + (children === null ? 'null' : typeof children) + "\" was specified."));
    }

    switch (direction) {
      case 'ltr':
      case 'rtl':
        // Valid values
        break;

      default:
        throw Error('An invalid "direction" prop has been specified. ' + 'Value should be either "ltr" or "rtl". ' + ("\"" + direction + "\" was specified."));
    }

    if (typeof width !== 'number') {
      throw Error('An invalid "width" prop has been specified. ' + 'Grids must specify a number for width. ' + ("\"" + (width === null ? 'null' : typeof width) + "\" was specified."));
    }

    if (typeof height !== 'number') {
      throw Error('An invalid "height" prop has been specified. ' + 'Grids must specify a number for height. ' + ("\"" + (height === null ? 'null' : typeof height) + "\" was specified."));
    }
  }
};

var DEFAULT_ESTIMATED_ITEM_SIZE = 50;

var getEstimatedTotalHeight = function getEstimatedTotalHeight(_ref, _ref2) {
  var rowCount = _ref.rowCount;
  var rowMetadataMap = _ref2.rowMetadataMap,
      estimatedRowHeight = _ref2.estimatedRowHeight,
      lastMeasuredRowIndex = _ref2.lastMeasuredRowIndex;
  var totalSizeOfMeasuredRows = 0; // Edge case check for when the number of items decreases while a scroll is in progress.
  // https://github.com/bvaughn/react-window/pull/138

  if (lastMeasuredRowIndex >= rowCount) {
    lastMeasuredRowIndex = rowCount - 1;
  }

  if (lastMeasuredRowIndex >= 0) {
    var itemMetadata = rowMetadataMap[lastMeasuredRowIndex];
    totalSizeOfMeasuredRows = itemMetadata.offset + itemMetadata.size;
  }

  var numUnmeasuredItems = rowCount - lastMeasuredRowIndex - 1;
  var totalSizeOfUnmeasuredItems = numUnmeasuredItems * estimatedRowHeight;
  return totalSizeOfMeasuredRows + totalSizeOfUnmeasuredItems;
};

var getEstimatedTotalWidth = function getEstimatedTotalWidth(_ref3, _ref4) {
  var columnCount = _ref3.columnCount;
  var columnMetadataMap = _ref4.columnMetadataMap,
      estimatedColumnWidth = _ref4.estimatedColumnWidth,
      lastMeasuredColumnIndex = _ref4.lastMeasuredColumnIndex;
  var totalSizeOfMeasuredRows = 0; // Edge case check for when the number of items decreases while a scroll is in progress.
  // https://github.com/bvaughn/react-window/pull/138

  if (lastMeasuredColumnIndex >= columnCount) {
    lastMeasuredColumnIndex = columnCount - 1;
  }

  if (lastMeasuredColumnIndex >= 0) {
    var itemMetadata = columnMetadataMap[lastMeasuredColumnIndex];
    totalSizeOfMeasuredRows = itemMetadata.offset + itemMetadata.size;
  }

  var numUnmeasuredItems = columnCount - lastMeasuredColumnIndex - 1;
  var totalSizeOfUnmeasuredItems = numUnmeasuredItems * estimatedColumnWidth;
  return totalSizeOfMeasuredRows + totalSizeOfUnmeasuredItems;
};

var getItemMetadata = function getItemMetadata(itemType, props, index, instanceProps) {
  var itemMetadataMap, itemSize, lastMeasuredIndex;

  if (itemType === 'column') {
    itemMetadataMap = instanceProps.columnMetadataMap;
    itemSize = props.columnWidth;
    lastMeasuredIndex = instanceProps.lastMeasuredColumnIndex;
  } else {
    itemMetadataMap = instanceProps.rowMetadataMap;
    itemSize = props.rowHeight;
    lastMeasuredIndex = instanceProps.lastMeasuredRowIndex;
  }

  if (index > lastMeasuredIndex) {
    var offset = 0;

    if (lastMeasuredIndex >= 0) {
      var itemMetadata = itemMetadataMap[lastMeasuredIndex];
      offset = itemMetadata.offset + itemMetadata.size;
    }

    for (var i = lastMeasuredIndex + 1; i <= index; i++) {
      var size = itemSize(i);
      itemMetadataMap[i] = {
        offset: offset,
        size: size
      };
      offset += size;
    }

    if (itemType === 'column') {
      instanceProps.lastMeasuredColumnIndex = index;
    } else {
      instanceProps.lastMeasuredRowIndex = index;
    }
  }

  return itemMetadataMap[index];
};

var findNearestItem = function findNearestItem(itemType, props, instanceProps, offset) {
  var itemMetadataMap, lastMeasuredIndex;

  if (itemType === 'column') {
    itemMetadataMap = instanceProps.columnMetadataMap;
    lastMeasuredIndex = instanceProps.lastMeasuredColumnIndex;
  } else {
    itemMetadataMap = instanceProps.rowMetadataMap;
    lastMeasuredIndex = instanceProps.lastMeasuredRowIndex;
  }

  var lastMeasuredItemOffset = lastMeasuredIndex > 0 ? itemMetadataMap[lastMeasuredIndex].offset : 0;

  if (lastMeasuredItemOffset >= offset) {
    // If we've already measured items within this range just use a binary search as it's faster.
    return findNearestItemBinarySearch(itemType, props, instanceProps, lastMeasuredIndex, 0, offset);
  } else {
    // If we haven't yet measured this high, fallback to an exponential search with an inner binary search.
    // The exponential search avoids pre-computing sizes for the full set of items as a binary search would.
    // The overall complexity for this approach is O(log n).
    return findNearestItemExponentialSearch(itemType, props, instanceProps, Math.max(0, lastMeasuredIndex), offset);
  }
};

var findNearestItemBinarySearch = function findNearestItemBinarySearch(itemType, props, instanceProps, high, low, offset) {
  while (low <= high) {
    var middle = low + Math.floor((high - low) / 2);
    var currentOffset = getItemMetadata(itemType, props, middle, instanceProps).offset;

    if (currentOffset === offset) {
      return middle;
    } else if (currentOffset < offset) {
      low = middle + 1;
    } else if (currentOffset > offset) {
      high = middle - 1;
    }
  }

  if (low > 0) {
    return low - 1;
  } else {
    return 0;
  }
};

var findNearestItemExponentialSearch = function findNearestItemExponentialSearch(itemType, props, instanceProps, index, offset) {
  var itemCount = itemType === 'column' ? props.columnCount : props.rowCount;
  var interval = 1;

  while (index < itemCount && getItemMetadata(itemType, props, index, instanceProps).offset < offset) {
    index += interval;
    interval *= 2;
  }

  return findNearestItemBinarySearch(itemType, props, instanceProps, Math.min(index, itemCount - 1), Math.floor(index / 2), offset);
};

var getOffsetForIndexAndAlignment = function getOffsetForIndexAndAlignment(itemType, props, index, align, scrollOffset, instanceProps, scrollbarSize) {
  var size = itemType === 'column' ? props.width : props.height;
  var itemMetadata = getItemMetadata(itemType, props, index, instanceProps); // Get estimated total size after ItemMetadata is computed,
  // To ensure it reflects actual measurements instead of just estimates.

  var estimatedTotalSize = itemType === 'column' ? getEstimatedTotalWidth(props, instanceProps) : getEstimatedTotalHeight(props, instanceProps);
  var maxOffset = Math.max(0, Math.min(estimatedTotalSize - size, itemMetadata.offset));
  var minOffset = Math.max(0, itemMetadata.offset - size + scrollbarSize + itemMetadata.size);

  if (align === 'smart') {
    if (scrollOffset >= minOffset - size && scrollOffset <= maxOffset + size) {
      align = 'auto';
    } else {
      align = 'center';
    }
  }

  switch (align) {
    case 'start':
      return maxOffset;

    case 'end':
      return minOffset;

    case 'center':
      return Math.round(minOffset + (maxOffset - minOffset) / 2);

    case 'auto':
    default:
      if (scrollOffset >= minOffset && scrollOffset <= maxOffset) {
        return scrollOffset;
      } else if (minOffset > maxOffset) {
        // Because we only take into account the scrollbar size when calculating minOffset
        // this value can be larger than maxOffset when at the end of the list
        return minOffset;
      } else if (scrollOffset < minOffset) {
        return minOffset;
      } else {
        return maxOffset;
      }

  }
};

var VariableSizeGrid = /*#__PURE__*/createGridComponent({
  getColumnOffset: function getColumnOffset(props, index, instanceProps) {
    return getItemMetadata('column', props, index, instanceProps).offset;
  },
  getColumnStartIndexForOffset: function getColumnStartIndexForOffset(props, scrollLeft, instanceProps) {
    return findNearestItem('column', props, instanceProps, scrollLeft);
  },
  getColumnStopIndexForStartIndex: function getColumnStopIndexForStartIndex(props, startIndex, scrollLeft, instanceProps) {
    var columnCount = props.columnCount,
        width = props.width;
    var itemMetadata = getItemMetadata('column', props, startIndex, instanceProps);
    var maxOffset = scrollLeft + width;
    var offset = itemMetadata.offset + itemMetadata.size;
    var stopIndex = startIndex;

    while (stopIndex < columnCount - 1 && offset < maxOffset) {
      stopIndex++;
      offset += getItemMetadata('column', props, stopIndex, instanceProps).size;
    }

    return stopIndex;
  },
  getColumnWidth: function getColumnWidth(props, index, instanceProps) {
    return instanceProps.columnMetadataMap[index].size;
  },
  getEstimatedTotalHeight: getEstimatedTotalHeight,
  getEstimatedTotalWidth: getEstimatedTotalWidth,
  getOffsetForColumnAndAlignment: function getOffsetForColumnAndAlignment(props, index, align, scrollOffset, instanceProps, scrollbarSize) {
    return getOffsetForIndexAndAlignment('column', props, index, align, scrollOffset, instanceProps, scrollbarSize);
  },
  getOffsetForRowAndAlignment: function getOffsetForRowAndAlignment(props, index, align, scrollOffset, instanceProps, scrollbarSize) {
    return getOffsetForIndexAndAlignment('row', props, index, align, scrollOffset, instanceProps, scrollbarSize);
  },
  getRowOffset: function getRowOffset(props, index, instanceProps) {
    return getItemMetadata('row', props, index, instanceProps).offset;
  },
  getRowHeight: function getRowHeight(props, index, instanceProps) {
    return instanceProps.rowMetadataMap[index].size;
  },
  getRowStartIndexForOffset: function getRowStartIndexForOffset(props, scrollTop, instanceProps) {
    return findNearestItem('row', props, instanceProps, scrollTop);
  },
  getRowStopIndexForStartIndex: function getRowStopIndexForStartIndex(props, startIndex, scrollTop, instanceProps) {
    var rowCount = props.rowCount,
        height = props.height;
    var itemMetadata = getItemMetadata('row', props, startIndex, instanceProps);
    var maxOffset = scrollTop + height;
    var offset = itemMetadata.offset + itemMetadata.size;
    var stopIndex = startIndex;

    while (stopIndex < rowCount - 1 && offset < maxOffset) {
      stopIndex++;
      offset += getItemMetadata('row', props, stopIndex, instanceProps).size;
    }

    return stopIndex;
  },
  initInstanceProps: function initInstanceProps(props, instance) {
    var _ref5 = props,
        estimatedColumnWidth = _ref5.estimatedColumnWidth,
        estimatedRowHeight = _ref5.estimatedRowHeight;
    var instanceProps = {
      columnMetadataMap: {},
      estimatedColumnWidth: estimatedColumnWidth || DEFAULT_ESTIMATED_ITEM_SIZE,
      estimatedRowHeight: estimatedRowHeight || DEFAULT_ESTIMATED_ITEM_SIZE,
      lastMeasuredColumnIndex: -1,
      lastMeasuredRowIndex: -1,
      rowMetadataMap: {}
    };

    instance.resetAfterColumnIndex = function (columnIndex, shouldForceUpdate) {
      if (shouldForceUpdate === void 0) {
        shouldForceUpdate = true;
      }

      instance.resetAfterIndices({
        columnIndex: columnIndex,
        shouldForceUpdate: shouldForceUpdate
      });
    };

    instance.resetAfterRowIndex = function (rowIndex, shouldForceUpdate) {
      if (shouldForceUpdate === void 0) {
        shouldForceUpdate = true;
      }

      instance.resetAfterIndices({
        rowIndex: rowIndex,
        shouldForceUpdate: shouldForceUpdate
      });
    };

    instance.resetAfterIndices = function (_ref6) {
      var columnIndex = _ref6.columnIndex,
          rowIndex = _ref6.rowIndex,
          _ref6$shouldForceUpda = _ref6.shouldForceUpdate,
          shouldForceUpdate = _ref6$shouldForceUpda === void 0 ? true : _ref6$shouldForceUpda;

      if (typeof columnIndex === 'number') {
        instanceProps.lastMeasuredColumnIndex = Math.min(instanceProps.lastMeasuredColumnIndex, columnIndex - 1);
      }

      if (typeof rowIndex === 'number') {
        instanceProps.lastMeasuredRowIndex = Math.min(instanceProps.lastMeasuredRowIndex, rowIndex - 1);
      } // We could potentially optimize further by only evicting styles after this index,
      // But since styles are only cached while scrolling is in progress-
      // It seems an unnecessary optimization.
      // It's unlikely that resetAfterIndex() will be called while a user is scrolling.


      instance._getItemStyleCache(-1);

      if (shouldForceUpdate) {
        instance.forceUpdate();
      }
    };

    return instanceProps;
  },
  shouldResetStyleCacheOnItemSizeChange: false,
  validateProps: function validateProps(_ref7) {
    var columnWidth = _ref7.columnWidth,
        rowHeight = _ref7.rowHeight;

    if (true) {
      if (typeof columnWidth !== 'function') {
        throw Error('An invalid "columnWidth" prop has been specified. ' + 'Value should be a function. ' + ("\"" + (columnWidth === null ? 'null' : typeof columnWidth) + "\" was specified."));
      } else if (typeof rowHeight !== 'function') {
        throw Error('An invalid "rowHeight" prop has been specified. ' + 'Value should be a function. ' + ("\"" + (rowHeight === null ? 'null' : typeof rowHeight) + "\" was specified."));
      }
    }
  }
});

var IS_SCROLLING_DEBOUNCE_INTERVAL$1 = 150;

var defaultItemKey$1 = function defaultItemKey(index, data) {
  return index;
}; // In DEV mode, this Set helps us only log a warning once per component instance.
// This avoids spamming the console every time a render happens.


var devWarningsDirection = null;
var devWarningsTagName$1 = null;

if (true) {
  if (typeof window !== 'undefined' && typeof window.WeakSet !== 'undefined') {
    devWarningsDirection = /*#__PURE__*/new WeakSet();
    devWarningsTagName$1 = /*#__PURE__*/new WeakSet();
  }
}

function createListComponent(_ref) {
  var _class;

  var getItemOffset = _ref.getItemOffset,
      getEstimatedTotalSize = _ref.getEstimatedTotalSize,
      getItemSize = _ref.getItemSize,
      getOffsetForIndexAndAlignment = _ref.getOffsetForIndexAndAlignment,
      getStartIndexForOffset = _ref.getStartIndexForOffset,
      getStopIndexForStartIndex = _ref.getStopIndexForStartIndex,
      initInstanceProps = _ref.initInstanceProps,
      shouldResetStyleCacheOnItemSizeChange = _ref.shouldResetStyleCacheOnItemSizeChange,
      validateProps = _ref.validateProps;
  return _class = /*#__PURE__*/function (_PureComponent) {
    (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_2__["default"])(List, _PureComponent);

    // Always use explicit constructor for React components.
    // It produces less code after transpilation. (#26)
    // eslint-disable-next-line no-useless-constructor
    function List(props) {
      var _this;

      _this = _PureComponent.call(this, props) || this;
      _this._instanceProps = initInstanceProps(_this.props, (0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_1__["default"])(_this));
      _this._outerRef = void 0;
      _this._resetIsScrollingTimeoutId = null;
      _this.state = {
        instance: (0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_1__["default"])(_this),
        isScrolling: false,
        scrollDirection: 'forward',
        scrollOffset: typeof _this.props.initialScrollOffset === 'number' ? _this.props.initialScrollOffset : 0,
        scrollUpdateWasRequested: false
      };
      _this._callOnItemsRendered = void 0;
      _this._callOnItemsRendered = (0,memoize_one__WEBPACK_IMPORTED_MODULE_5__["default"])(function (overscanStartIndex, overscanStopIndex, visibleStartIndex, visibleStopIndex) {
        return _this.props.onItemsRendered({
          overscanStartIndex: overscanStartIndex,
          overscanStopIndex: overscanStopIndex,
          visibleStartIndex: visibleStartIndex,
          visibleStopIndex: visibleStopIndex
        });
      });
      _this._callOnScroll = void 0;
      _this._callOnScroll = (0,memoize_one__WEBPACK_IMPORTED_MODULE_5__["default"])(function (scrollDirection, scrollOffset, scrollUpdateWasRequested) {
        return _this.props.onScroll({
          scrollDirection: scrollDirection,
          scrollOffset: scrollOffset,
          scrollUpdateWasRequested: scrollUpdateWasRequested
        });
      });
      _this._getItemStyle = void 0;

      _this._getItemStyle = function (index) {
        var _this$props = _this.props,
            direction = _this$props.direction,
            itemSize = _this$props.itemSize,
            layout = _this$props.layout;

        var itemStyleCache = _this._getItemStyleCache(shouldResetStyleCacheOnItemSizeChange && itemSize, shouldResetStyleCacheOnItemSizeChange && layout, shouldResetStyleCacheOnItemSizeChange && direction);

        var style;

        if (itemStyleCache.hasOwnProperty(index)) {
          style = itemStyleCache[index];
        } else {
          var _offset = getItemOffset(_this.props, index, _this._instanceProps);

          var size = getItemSize(_this.props, index, _this._instanceProps); // TODO Deprecate direction "horizontal"

          var isHorizontal = direction === 'horizontal' || layout === 'horizontal';
          var isRtl = direction === 'rtl';
          var offsetHorizontal = isHorizontal ? _offset : 0;
          itemStyleCache[index] = style = {
            position: 'absolute',
            left: isRtl ? undefined : offsetHorizontal,
            right: isRtl ? offsetHorizontal : undefined,
            top: !isHorizontal ? _offset : 0,
            height: !isHorizontal ? size : '100%',
            width: isHorizontal ? size : '100%'
          };
        }

        return style;
      };

      _this._getItemStyleCache = void 0;
      _this._getItemStyleCache = (0,memoize_one__WEBPACK_IMPORTED_MODULE_5__["default"])(function (_, __, ___) {
        return {};
      });

      _this._onScrollHorizontal = function (event) {
        var _event$currentTarget = event.currentTarget,
            clientWidth = _event$currentTarget.clientWidth,
            scrollLeft = _event$currentTarget.scrollLeft,
            scrollWidth = _event$currentTarget.scrollWidth;

        _this.setState(function (prevState) {
          if (prevState.scrollOffset === scrollLeft) {
            // Scroll position may have been updated by cDM/cDU,
            // In which case we don't need to trigger another render,
            // And we don't want to update state.isScrolling.
            return null;
          }

          var direction = _this.props.direction;
          var scrollOffset = scrollLeft;

          if (direction === 'rtl') {
            // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.
            // This is not the case for all browsers though (e.g. Chrome reports values as positive, measured relative to the left).
            // It's also easier for this component if we convert offsets to the same format as they would be in for ltr.
            // So the simplest solution is to determine which browser behavior we're dealing with, and convert based on it.
            switch (getRTLOffsetType()) {
              case 'negative':
                scrollOffset = -scrollLeft;
                break;

              case 'positive-descending':
                scrollOffset = scrollWidth - clientWidth - scrollLeft;
                break;
            }
          } // Prevent Safari's elastic scrolling from causing visual shaking when scrolling past bounds.


          scrollOffset = Math.max(0, Math.min(scrollOffset, scrollWidth - clientWidth));
          return {
            isScrolling: true,
            scrollDirection: prevState.scrollOffset < scrollLeft ? 'forward' : 'backward',
            scrollOffset: scrollOffset,
            scrollUpdateWasRequested: false
          };
        }, _this._resetIsScrollingDebounced);
      };

      _this._onScrollVertical = function (event) {
        var _event$currentTarget2 = event.currentTarget,
            clientHeight = _event$currentTarget2.clientHeight,
            scrollHeight = _event$currentTarget2.scrollHeight,
            scrollTop = _event$currentTarget2.scrollTop;

        _this.setState(function (prevState) {
          if (prevState.scrollOffset === scrollTop) {
            // Scroll position may have been updated by cDM/cDU,
            // In which case we don't need to trigger another render,
            // And we don't want to update state.isScrolling.
            return null;
          } // Prevent Safari's elastic scrolling from causing visual shaking when scrolling past bounds.


          var scrollOffset = Math.max(0, Math.min(scrollTop, scrollHeight - clientHeight));
          return {
            isScrolling: true,
            scrollDirection: prevState.scrollOffset < scrollOffset ? 'forward' : 'backward',
            scrollOffset: scrollOffset,
            scrollUpdateWasRequested: false
          };
        }, _this._resetIsScrollingDebounced);
      };

      _this._outerRefSetter = function (ref) {
        var outerRef = _this.props.outerRef;
        _this._outerRef = ref;

        if (typeof outerRef === 'function') {
          outerRef(ref);
        } else if (outerRef != null && typeof outerRef === 'object' && outerRef.hasOwnProperty('current')) {
          outerRef.current = ref;
        }
      };

      _this._resetIsScrollingDebounced = function () {
        if (_this._resetIsScrollingTimeoutId !== null) {
          cancelTimeout(_this._resetIsScrollingTimeoutId);
        }

        _this._resetIsScrollingTimeoutId = requestTimeout(_this._resetIsScrolling, IS_SCROLLING_DEBOUNCE_INTERVAL$1);
      };

      _this._resetIsScrolling = function () {
        _this._resetIsScrollingTimeoutId = null;

        _this.setState({
          isScrolling: false
        }, function () {
          // Clear style cache after state update has been committed.
          // This way we don't break pure sCU for items that don't use isScrolling param.
          _this._getItemStyleCache(-1, null);
        });
      };

      return _this;
    }

    List.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {
      validateSharedProps$1(nextProps, prevState);
      validateProps(nextProps);
      return null;
    };

    var _proto = List.prototype;

    _proto.scrollTo = function scrollTo(scrollOffset) {
      scrollOffset = Math.max(0, scrollOffset);
      this.setState(function (prevState) {
        if (prevState.scrollOffset === scrollOffset) {
          return null;
        }

        return {
          scrollDirection: prevState.scrollOffset < scrollOffset ? 'forward' : 'backward',
          scrollOffset: scrollOffset,
          scrollUpdateWasRequested: true
        };
      }, this._resetIsScrollingDebounced);
    };

    _proto.scrollToItem = function scrollToItem(index, align) {
      if (align === void 0) {
        align = 'auto';
      }

      var itemCount = this.props.itemCount;
      var scrollOffset = this.state.scrollOffset;
      index = Math.max(0, Math.min(index, itemCount - 1));
      this.scrollTo(getOffsetForIndexAndAlignment(this.props, index, align, scrollOffset, this._instanceProps));
    };

    _proto.componentDidMount = function componentDidMount() {
      var _this$props2 = this.props,
          direction = _this$props2.direction,
          initialScrollOffset = _this$props2.initialScrollOffset,
          layout = _this$props2.layout;

      if (typeof initialScrollOffset === 'number' && this._outerRef != null) {
        var outerRef = this._outerRef; // TODO Deprecate direction "horizontal"

        if (direction === 'horizontal' || layout === 'horizontal') {
          outerRef.scrollLeft = initialScrollOffset;
        } else {
          outerRef.scrollTop = initialScrollOffset;
        }
      }

      this._callPropsCallbacks();
    };

    _proto.componentDidUpdate = function componentDidUpdate() {
      var _this$props3 = this.props,
          direction = _this$props3.direction,
          layout = _this$props3.layout;
      var _this$state = this.state,
          scrollOffset = _this$state.scrollOffset,
          scrollUpdateWasRequested = _this$state.scrollUpdateWasRequested;

      if (scrollUpdateWasRequested && this._outerRef != null) {
        var outerRef = this._outerRef; // TODO Deprecate direction "horizontal"

        if (direction === 'horizontal' || layout === 'horizontal') {
          if (direction === 'rtl') {
            // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.
            // This is not the case for all browsers though (e.g. Chrome reports values as positive, measured relative to the left).
            // So we need to determine which browser behavior we're dealing with, and mimic it.
            switch (getRTLOffsetType()) {
              case 'negative':
                outerRef.scrollLeft = -scrollOffset;
                break;

              case 'positive-ascending':
                outerRef.scrollLeft = scrollOffset;
                break;

              default:
                var clientWidth = outerRef.clientWidth,
                    scrollWidth = outerRef.scrollWidth;
                outerRef.scrollLeft = scrollWidth - clientWidth - scrollOffset;
                break;
            }
          } else {
            outerRef.scrollLeft = scrollOffset;
          }
        } else {
          outerRef.scrollTop = scrollOffset;
        }
      }

      this._callPropsCallbacks();
    };

    _proto.componentWillUnmount = function componentWillUnmount() {
      if (this._resetIsScrollingTimeoutId !== null) {
        cancelTimeout(this._resetIsScrollingTimeoutId);
      }
    };

    _proto.render = function render() {
      var _this$props4 = this.props,
          children = _this$props4.children,
          className = _this$props4.className,
          direction = _this$props4.direction,
          height = _this$props4.height,
          innerRef = _this$props4.innerRef,
          innerElementType = _this$props4.innerElementType,
          innerTagName = _this$props4.innerTagName,
          itemCount = _this$props4.itemCount,
          itemData = _this$props4.itemData,
          _this$props4$itemKey = _this$props4.itemKey,
          itemKey = _this$props4$itemKey === void 0 ? defaultItemKey$1 : _this$props4$itemKey,
          layout = _this$props4.layout,
          outerElementType = _this$props4.outerElementType,
          outerTagName = _this$props4.outerTagName,
          style = _this$props4.style,
          useIsScrolling = _this$props4.useIsScrolling,
          width = _this$props4.width;
      var isScrolling = this.state.isScrolling; // TODO Deprecate direction "horizontal"

      var isHorizontal = direction === 'horizontal' || layout === 'horizontal';
      var onScroll = isHorizontal ? this._onScrollHorizontal : this._onScrollVertical;

      var _this$_getRangeToRend = this._getRangeToRender(),
          startIndex = _this$_getRangeToRend[0],
          stopIndex = _this$_getRangeToRend[1];

      var items = [];

      if (itemCount > 0) {
        for (var _index = startIndex; _index <= stopIndex; _index++) {
          items.push((0,react__WEBPACK_IMPORTED_MODULE_3__.createElement)(children, {
            data: itemData,
            key: itemKey(_index, itemData),
            index: _index,
            isScrolling: useIsScrolling ? isScrolling : undefined,
            style: this._getItemStyle(_index)
          }));
        }
      } // Read this value AFTER items have been created,
      // So their actual sizes (if variable) are taken into consideration.


      var estimatedTotalSize = getEstimatedTotalSize(this.props, this._instanceProps);
      return (0,react__WEBPACK_IMPORTED_MODULE_3__.createElement)(outerElementType || outerTagName || 'div', {
        className: className,
        onScroll: onScroll,
        ref: this._outerRefSetter,
        style: (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({
          position: 'relative',
          height: height,
          width: width,
          overflow: 'auto',
          WebkitOverflowScrolling: 'touch',
          willChange: 'transform',
          direction: direction
        }, style)
      }, (0,react__WEBPACK_IMPORTED_MODULE_3__.createElement)(innerElementType || innerTagName || 'div', {
        children: items,
        ref: innerRef,
        style: {
          height: isHorizontal ? '100%' : estimatedTotalSize,
          pointerEvents: isScrolling ? 'none' : undefined,
          width: isHorizontal ? estimatedTotalSize : '100%'
        }
      }));
    };

    _proto._callPropsCallbacks = function _callPropsCallbacks() {
      if (typeof this.props.onItemsRendered === 'function') {
        var itemCount = this.props.itemCount;

        if (itemCount > 0) {
          var _this$_getRangeToRend2 = this._getRangeToRender(),
              _overscanStartIndex = _this$_getRangeToRend2[0],
              _overscanStopIndex = _this$_getRangeToRend2[1],
              _visibleStartIndex = _this$_getRangeToRend2[2],
              _visibleStopIndex = _this$_getRangeToRend2[3];

          this._callOnItemsRendered(_overscanStartIndex, _overscanStopIndex, _visibleStartIndex, _visibleStopIndex);
        }
      }

      if (typeof this.props.onScroll === 'function') {
        var _this$state2 = this.state,
            _scrollDirection = _this$state2.scrollDirection,
            _scrollOffset = _this$state2.scrollOffset,
            _scrollUpdateWasRequested = _this$state2.scrollUpdateWasRequested;

        this._callOnScroll(_scrollDirection, _scrollOffset, _scrollUpdateWasRequested);
      }
    } // Lazily create and cache item styles while scrolling,
    // So that pure component sCU will prevent re-renders.
    // We maintain this cache, and pass a style prop rather than index,
    // So that List can clear cached styles and force item re-render if necessary.
    ;

    _proto._getRangeToRender = function _getRangeToRender() {
      var _this$props5 = this.props,
          itemCount = _this$props5.itemCount,
          overscanCount = _this$props5.overscanCount;
      var _this$state3 = this.state,
          isScrolling = _this$state3.isScrolling,
          scrollDirection = _this$state3.scrollDirection,
          scrollOffset = _this$state3.scrollOffset;

      if (itemCount === 0) {
        return [0, 0, 0, 0];
      }

      var startIndex = getStartIndexForOffset(this.props, scrollOffset, this._instanceProps);
      var stopIndex = getStopIndexForStartIndex(this.props, startIndex, scrollOffset, this._instanceProps); // Overscan by one item in each direction so that tab/focus works.
      // If there isn't at least one extra item, tab loops back around.

      var overscanBackward = !isScrolling || scrollDirection === 'backward' ? Math.max(1, overscanCount) : 1;
      var overscanForward = !isScrolling || scrollDirection === 'forward' ? Math.max(1, overscanCount) : 1;
      return [Math.max(0, startIndex - overscanBackward), Math.max(0, Math.min(itemCount - 1, stopIndex + overscanForward)), startIndex, stopIndex];
    };

    return List;
  }(react__WEBPACK_IMPORTED_MODULE_3__.PureComponent), _class.defaultProps = {
    direction: 'ltr',
    itemData: undefined,
    layout: 'vertical',
    overscanCount: 2,
    useIsScrolling: false
  }, _class;
} // NOTE: I considered further wrapping individual items with a pure ListItem component.
// This would avoid ever calling the render function for the same index more than once,
// But it would also add the overhead of a lot of components/fibers.
// I assume people already do this (render function returning a class component),
// So my doing it would just unnecessarily double the wrappers.

var validateSharedProps$1 = function validateSharedProps(_ref2, _ref3) {
  var children = _ref2.children,
      direction = _ref2.direction,
      height = _ref2.height,
      layout = _ref2.layout,
      innerTagName = _ref2.innerTagName,
      outerTagName = _ref2.outerTagName,
      width = _ref2.width;
  var instance = _ref3.instance;

  if (true) {
    if (innerTagName != null || outerTagName != null) {
      if (devWarningsTagName$1 && !devWarningsTagName$1.has(instance)) {
        devWarningsTagName$1.add(instance);
        console.warn('The innerTagName and outerTagName props have been deprecated. ' + 'Please use the innerElementType and outerElementType props instead.');
      }
    } // TODO Deprecate direction "horizontal"


    var isHorizontal = direction === 'horizontal' || layout === 'horizontal';

    switch (direction) {
      case 'horizontal':
      case 'vertical':
        if (devWarningsDirection && !devWarningsDirection.has(instance)) {
          devWarningsDirection.add(instance);
          console.warn('The direction prop should be either "ltr" (default) or "rtl". ' + 'Please use the layout prop to specify "vertical" (default) or "horizontal" orientation.');
        }

        break;

      case 'ltr':
      case 'rtl':
        // Valid values
        break;

      default:
        throw Error('An invalid "direction" prop has been specified. ' + 'Value should be either "ltr" or "rtl". ' + ("\"" + direction + "\" was specified."));
    }

    switch (layout) {
      case 'horizontal':
      case 'vertical':
        // Valid values
        break;

      default:
        throw Error('An invalid "layout" prop has been specified. ' + 'Value should be either "horizontal" or "vertical". ' + ("\"" + layout + "\" was specified."));
    }

    if (children == null) {
      throw Error('An invalid "children" prop has been specified. ' + 'Value should be a React component. ' + ("\"" + (children === null ? 'null' : typeof children) + "\" was specified."));
    }

    if (isHorizontal && typeof width !== 'number') {
      throw Error('An invalid "width" prop has been specified. ' + 'Horizontal lists must specify a number for width. ' + ("\"" + (width === null ? 'null' : typeof width) + "\" was specified."));
    } else if (!isHorizontal && typeof height !== 'number') {
      throw Error('An invalid "height" prop has been specified. ' + 'Vertical lists must specify a number for height. ' + ("\"" + (height === null ? 'null' : typeof height) + "\" was specified."));
    }
  }
};

var DEFAULT_ESTIMATED_ITEM_SIZE$1 = 50;

var getItemMetadata$1 = function getItemMetadata(props, index, instanceProps) {
  var _ref = props,
      itemSize = _ref.itemSize;
  var itemMetadataMap = instanceProps.itemMetadataMap,
      lastMeasuredIndex = instanceProps.lastMeasuredIndex;

  if (index > lastMeasuredIndex) {
    var offset = 0;

    if (lastMeasuredIndex >= 0) {
      var itemMetadata = itemMetadataMap[lastMeasuredIndex];
      offset = itemMetadata.offset + itemMetadata.size;
    }

    for (var i = lastMeasuredIndex + 1; i <= index; i++) {
      var size = itemSize(i);
      itemMetadataMap[i] = {
        offset: offset,
        size: size
      };
      offset += size;
    }

    instanceProps.lastMeasuredIndex = index;
  }

  return itemMetadataMap[index];
};

var findNearestItem$1 = function findNearestItem(props, instanceProps, offset) {
  var itemMetadataMap = instanceProps.itemMetadataMap,
      lastMeasuredIndex = instanceProps.lastMeasuredIndex;
  var lastMeasuredItemOffset = lastMeasuredIndex > 0 ? itemMetadataMap[lastMeasuredIndex].offset : 0;

  if (lastMeasuredItemOffset >= offset) {
    // If we've already measured items within this range just use a binary search as it's faster.
    return findNearestItemBinarySearch$1(props, instanceProps, lastMeasuredIndex, 0, offset);
  } else {
    // If we haven't yet measured this high, fallback to an exponential search with an inner binary search.
    // The exponential search avoids pre-computing sizes for the full set of items as a binary search would.
    // The overall complexity for this approach is O(log n).
    return findNearestItemExponentialSearch$1(props, instanceProps, Math.max(0, lastMeasuredIndex), offset);
  }
};

var findNearestItemBinarySearch$1 = function findNearestItemBinarySearch(props, instanceProps, high, low, offset) {
  while (low <= high) {
    var middle = low + Math.floor((high - low) / 2);
    var currentOffset = getItemMetadata$1(props, middle, instanceProps).offset;

    if (currentOffset === offset) {
      return middle;
    } else if (currentOffset < offset) {
      low = middle + 1;
    } else if (currentOffset > offset) {
      high = middle - 1;
    }
  }

  if (low > 0) {
    return low - 1;
  } else {
    return 0;
  }
};

var findNearestItemExponentialSearch$1 = function findNearestItemExponentialSearch(props, instanceProps, index, offset) {
  var itemCount = props.itemCount;
  var interval = 1;

  while (index < itemCount && getItemMetadata$1(props, index, instanceProps).offset < offset) {
    index += interval;
    interval *= 2;
  }

  return findNearestItemBinarySearch$1(props, instanceProps, Math.min(index, itemCount - 1), Math.floor(index / 2), offset);
};

var getEstimatedTotalSize = function getEstimatedTotalSize(_ref2, _ref3) {
  var itemCount = _ref2.itemCount;
  var itemMetadataMap = _ref3.itemMetadataMap,
      estimatedItemSize = _ref3.estimatedItemSize,
      lastMeasuredIndex = _ref3.lastMeasuredIndex;
  var totalSizeOfMeasuredItems = 0; // Edge case check for when the number of items decreases while a scroll is in progress.
  // https://github.com/bvaughn/react-window/pull/138

  if (lastMeasuredIndex >= itemCount) {
    lastMeasuredIndex = itemCount - 1;
  }

  if (lastMeasuredIndex >= 0) {
    var itemMetadata = itemMetadataMap[lastMeasuredIndex];
    totalSizeOfMeasuredItems = itemMetadata.offset + itemMetadata.size;
  }

  var numUnmeasuredItems = itemCount - lastMeasuredIndex - 1;
  var totalSizeOfUnmeasuredItems = numUnmeasuredItems * estimatedItemSize;
  return totalSizeOfMeasuredItems + totalSizeOfUnmeasuredItems;
};

var VariableSizeList = /*#__PURE__*/createListComponent({
  getItemOffset: function getItemOffset(props, index, instanceProps) {
    return getItemMetadata$1(props, index, instanceProps).offset;
  },
  getItemSize: function getItemSize(props, index, instanceProps) {
    return instanceProps.itemMetadataMap[index].size;
  },
  getEstimatedTotalSize: getEstimatedTotalSize,
  getOffsetForIndexAndAlignment: function getOffsetForIndexAndAlignment(props, index, align, scrollOffset, instanceProps) {
    var direction = props.direction,
        height = props.height,
        layout = props.layout,
        width = props.width; // TODO Deprecate direction "horizontal"

    var isHorizontal = direction === 'horizontal' || layout === 'horizontal';
    var size = isHorizontal ? width : height;
    var itemMetadata = getItemMetadata$1(props, index, instanceProps); // Get estimated total size after ItemMetadata is computed,
    // To ensure it reflects actual measurements instead of just estimates.

    var estimatedTotalSize = getEstimatedTotalSize(props, instanceProps);
    var maxOffset = Math.max(0, Math.min(estimatedTotalSize - size, itemMetadata.offset));
    var minOffset = Math.max(0, itemMetadata.offset - size + itemMetadata.size);

    if (align === 'smart') {
      if (scrollOffset >= minOffset - size && scrollOffset <= maxOffset + size) {
        align = 'auto';
      } else {
        align = 'center';
      }
    }

    switch (align) {
      case 'start':
        return maxOffset;

      case 'end':
        return minOffset;

      case 'center':
        return Math.round(minOffset + (maxOffset - minOffset) / 2);

      case 'auto':
      default:
        if (scrollOffset >= minOffset && scrollOffset <= maxOffset) {
          return scrollOffset;
        } else if (scrollOffset < minOffset) {
          return minOffset;
        } else {
          return maxOffset;
        }

    }
  },
  getStartIndexForOffset: function getStartIndexForOffset(props, offset, instanceProps) {
    return findNearestItem$1(props, instanceProps, offset);
  },
  getStopIndexForStartIndex: function getStopIndexForStartIndex(props, startIndex, scrollOffset, instanceProps) {
    var direction = props.direction,
        height = props.height,
        itemCount = props.itemCount,
        layout = props.layout,
        width = props.width; // TODO Deprecate direction "horizontal"

    var isHorizontal = direction === 'horizontal' || layout === 'horizontal';
    var size = isHorizontal ? width : height;
    var itemMetadata = getItemMetadata$1(props, startIndex, instanceProps);
    var maxOffset = scrollOffset + size;
    var offset = itemMetadata.offset + itemMetadata.size;
    var stopIndex = startIndex;

    while (stopIndex < itemCount - 1 && offset < maxOffset) {
      stopIndex++;
      offset += getItemMetadata$1(props, stopIndex, instanceProps).size;
    }

    return stopIndex;
  },
  initInstanceProps: function initInstanceProps(props, instance) {
    var _ref4 = props,
        estimatedItemSize = _ref4.estimatedItemSize;
    var instanceProps = {
      itemMetadataMap: {},
      estimatedItemSize: estimatedItemSize || DEFAULT_ESTIMATED_ITEM_SIZE$1,
      lastMeasuredIndex: -1
    };

    instance.resetAfterIndex = function (index, shouldForceUpdate) {
      if (shouldForceUpdate === void 0) {
        shouldForceUpdate = true;
      }

      instanceProps.lastMeasuredIndex = Math.min(instanceProps.lastMeasuredIndex, index - 1); // We could potentially optimize further by only evicting styles after this index,
      // But since styles are only cached while scrolling is in progress-
      // It seems an unnecessary optimization.
      // It's unlikely that resetAfterIndex() will be called while a user is scrolling.

      instance._getItemStyleCache(-1);

      if (shouldForceUpdate) {
        instance.forceUpdate();
      }
    };

    return instanceProps;
  },
  shouldResetStyleCacheOnItemSizeChange: false,
  validateProps: function validateProps(_ref5) {
    var itemSize = _ref5.itemSize;

    if (true) {
      if (typeof itemSize !== 'function') {
        throw Error('An invalid "itemSize" prop has been specified. ' + 'Value should be a function. ' + ("\"" + (itemSize === null ? 'null' : typeof itemSize) + "\" was specified."));
      }
    }
  }
});

var FixedSizeGrid = /*#__PURE__*/createGridComponent({
  getColumnOffset: function getColumnOffset(_ref, index) {
    var columnWidth = _ref.columnWidth;
    return index * columnWidth;
  },
  getColumnWidth: function getColumnWidth(_ref2, index) {
    var columnWidth = _ref2.columnWidth;
    return columnWidth;
  },
  getRowOffset: function getRowOffset(_ref3, index) {
    var rowHeight = _ref3.rowHeight;
    return index * rowHeight;
  },
  getRowHeight: function getRowHeight(_ref4, index) {
    var rowHeight = _ref4.rowHeight;
    return rowHeight;
  },
  getEstimatedTotalHeight: function getEstimatedTotalHeight(_ref5) {
    var rowCount = _ref5.rowCount,
        rowHeight = _ref5.rowHeight;
    return rowHeight * rowCount;
  },
  getEstimatedTotalWidth: function getEstimatedTotalWidth(_ref6) {
    var columnCount = _ref6.columnCount,
        columnWidth = _ref6.columnWidth;
    return columnWidth * columnCount;
  },
  getOffsetForColumnAndAlignment: function getOffsetForColumnAndAlignment(_ref7, columnIndex, align, scrollLeft, instanceProps, scrollbarSize) {
    var columnCount = _ref7.columnCount,
        columnWidth = _ref7.columnWidth,
        width = _ref7.width;
    var lastColumnOffset = Math.max(0, columnCount * columnWidth - width);
    var maxOffset = Math.min(lastColumnOffset, columnIndex * columnWidth);
    var minOffset = Math.max(0, columnIndex * columnWidth - width + scrollbarSize + columnWidth);

    if (align === 'smart') {
      if (scrollLeft >= minOffset - width && scrollLeft <= maxOffset + width) {
        align = 'auto';
      } else {
        align = 'center';
      }
    }

    switch (align) {
      case 'start':
        return maxOffset;

      case 'end':
        return minOffset;

      case 'center':
        // "Centered" offset is usually the average of the min and max.
        // But near the edges of the list, this doesn't hold true.
        var middleOffset = Math.round(minOffset + (maxOffset - minOffset) / 2);

        if (middleOffset < Math.ceil(width / 2)) {
          return 0; // near the beginning
        } else if (middleOffset > lastColumnOffset + Math.floor(width / 2)) {
          return lastColumnOffset; // near the end
        } else {
          return middleOffset;
        }

      case 'auto':
      default:
        if (scrollLeft >= minOffset && scrollLeft <= maxOffset) {
          return scrollLeft;
        } else if (minOffset > maxOffset) {
          // Because we only take into account the scrollbar size when calculating minOffset
          // this value can be larger than maxOffset when at the end of the list
          return minOffset;
        } else if (scrollLeft < minOffset) {
          return minOffset;
        } else {
          return maxOffset;
        }

    }
  },
  getOffsetForRowAndAlignment: function getOffsetForRowAndAlignment(_ref8, rowIndex, align, scrollTop, instanceProps, scrollbarSize) {
    var rowHeight = _ref8.rowHeight,
        height = _ref8.height,
        rowCount = _ref8.rowCount;
    var lastRowOffset = Math.max(0, rowCount * rowHeight - height);
    var maxOffset = Math.min(lastRowOffset, rowIndex * rowHeight);
    var minOffset = Math.max(0, rowIndex * rowHeight - height + scrollbarSize + rowHeight);

    if (align === 'smart') {
      if (scrollTop >= minOffset - height && scrollTop <= maxOffset + height) {
        align = 'auto';
      } else {
        align = 'center';
      }
    }

    switch (align) {
      case 'start':
        return maxOffset;

      case 'end':
        return minOffset;

      case 'center':
        // "Centered" offset is usually the average of the min and max.
        // But near the edges of the list, this doesn't hold true.
        var middleOffset = Math.round(minOffset + (maxOffset - minOffset) / 2);

        if (middleOffset < Math.ceil(height / 2)) {
          return 0; // near the beginning
        } else if (middleOffset > lastRowOffset + Math.floor(height / 2)) {
          return lastRowOffset; // near the end
        } else {
          return middleOffset;
        }

      case 'auto':
      default:
        if (scrollTop >= minOffset && scrollTop <= maxOffset) {
          return scrollTop;
        } else if (minOffset > maxOffset) {
          // Because we only take into account the scrollbar size when calculating minOffset
          // this value can be larger than maxOffset when at the end of the list
          return minOffset;
        } else if (scrollTop < minOffset) {
          return minOffset;
        } else {
          return maxOffset;
        }

    }
  },
  getColumnStartIndexForOffset: function getColumnStartIndexForOffset(_ref9, scrollLeft) {
    var columnWidth = _ref9.columnWidth,
        columnCount = _ref9.columnCount;
    return Math.max(0, Math.min(columnCount - 1, Math.floor(scrollLeft / columnWidth)));
  },
  getColumnStopIndexForStartIndex: function getColumnStopIndexForStartIndex(_ref10, startIndex, scrollLeft) {
    var columnWidth = _ref10.columnWidth,
        columnCount = _ref10.columnCount,
        width = _ref10.width;
    var left = startIndex * columnWidth;
    var numVisibleColumns = Math.ceil((width + scrollLeft - left) / columnWidth);
    return Math.max(0, Math.min(columnCount - 1, startIndex + numVisibleColumns - 1 // -1 is because stop index is inclusive
    ));
  },
  getRowStartIndexForOffset: function getRowStartIndexForOffset(_ref11, scrollTop) {
    var rowHeight = _ref11.rowHeight,
        rowCount = _ref11.rowCount;
    return Math.max(0, Math.min(rowCount - 1, Math.floor(scrollTop / rowHeight)));
  },
  getRowStopIndexForStartIndex: function getRowStopIndexForStartIndex(_ref12, startIndex, scrollTop) {
    var rowHeight = _ref12.rowHeight,
        rowCount = _ref12.rowCount,
        height = _ref12.height;
    var top = startIndex * rowHeight;
    var numVisibleRows = Math.ceil((height + scrollTop - top) / rowHeight);
    return Math.max(0, Math.min(rowCount - 1, startIndex + numVisibleRows - 1 // -1 is because stop index is inclusive
    ));
  },
  initInstanceProps: function initInstanceProps(props) {// Noop
  },
  shouldResetStyleCacheOnItemSizeChange: true,
  validateProps: function validateProps(_ref13) {
    var columnWidth = _ref13.columnWidth,
        rowHeight = _ref13.rowHeight;

    if (true) {
      if (typeof columnWidth !== 'number') {
        throw Error('An invalid "columnWidth" prop has been specified. ' + 'Value should be a number. ' + ("\"" + (columnWidth === null ? 'null' : typeof columnWidth) + "\" was specified."));
      }

      if (typeof rowHeight !== 'number') {
        throw Error('An invalid "rowHeight" prop has been specified. ' + 'Value should be a number. ' + ("\"" + (rowHeight === null ? 'null' : typeof rowHeight) + "\" was specified."));
      }
    }
  }
});

var FixedSizeList = /*#__PURE__*/createListComponent({
  getItemOffset: function getItemOffset(_ref, index) {
    var itemSize = _ref.itemSize;
    return index * itemSize;
  },
  getItemSize: function getItemSize(_ref2, index) {
    var itemSize = _ref2.itemSize;
    return itemSize;
  },
  getEstimatedTotalSize: function getEstimatedTotalSize(_ref3) {
    var itemCount = _ref3.itemCount,
        itemSize = _ref3.itemSize;
    return itemSize * itemCount;
  },
  getOffsetForIndexAndAlignment: function getOffsetForIndexAndAlignment(_ref4, index, align, scrollOffset) {
    var direction = _ref4.direction,
        height = _ref4.height,
        itemCount = _ref4.itemCount,
        itemSize = _ref4.itemSize,
        layout = _ref4.layout,
        width = _ref4.width;
    // TODO Deprecate direction "horizontal"
    var isHorizontal = direction === 'horizontal' || layout === 'horizontal';
    var size = isHorizontal ? width : height;
    var lastItemOffset = Math.max(0, itemCount * itemSize - size);
    var maxOffset = Math.min(lastItemOffset, index * itemSize);
    var minOffset = Math.max(0, index * itemSize - size + itemSize);

    if (align === 'smart') {
      if (scrollOffset >= minOffset - size && scrollOffset <= maxOffset + size) {
        align = 'auto';
      } else {
        align = 'center';
      }
    }

    switch (align) {
      case 'start':
        return maxOffset;

      case 'end':
        return minOffset;

      case 'center':
        {
          // "Centered" offset is usually the average of the min and max.
          // But near the edges of the list, this doesn't hold true.
          var middleOffset = Math.round(minOffset + (maxOffset - minOffset) / 2);

          if (middleOffset < Math.ceil(size / 2)) {
            return 0; // near the beginning
          } else if (middleOffset > lastItemOffset + Math.floor(size / 2)) {
            return lastItemOffset; // near the end
          } else {
            return middleOffset;
          }
        }

      case 'auto':
      default:
        if (scrollOffset >= minOffset && scrollOffset <= maxOffset) {
          return scrollOffset;
        } else if (scrollOffset < minOffset) {
          return minOffset;
        } else {
          return maxOffset;
        }

    }
  },
  getStartIndexForOffset: function getStartIndexForOffset(_ref5, offset) {
    var itemCount = _ref5.itemCount,
        itemSize = _ref5.itemSize;
    return Math.max(0, Math.min(itemCount - 1, Math.floor(offset / itemSize)));
  },
  getStopIndexForStartIndex: function getStopIndexForStartIndex(_ref6, startIndex, scrollOffset) {
    var direction = _ref6.direction,
        height = _ref6.height,
        itemCount = _ref6.itemCount,
        itemSize = _ref6.itemSize,
        layout = _ref6.layout,
        width = _ref6.width;
    // TODO Deprecate direction "horizontal"
    var isHorizontal = direction === 'horizontal' || layout === 'horizontal';
    var offset = startIndex * itemSize;
    var size = isHorizontal ? width : height;
    var numVisibleItems = Math.ceil((size + scrollOffset - offset) / itemSize);
    return Math.max(0, Math.min(itemCount - 1, startIndex + numVisibleItems - 1 // -1 is because stop index is inclusive
    ));
  },
  initInstanceProps: function initInstanceProps(props) {// Noop
  },
  shouldResetStyleCacheOnItemSizeChange: true,
  validateProps: function validateProps(_ref7) {
    var itemSize = _ref7.itemSize;

    if (true) {
      if (typeof itemSize !== 'number') {
        throw Error('An invalid "itemSize" prop has been specified. ' + 'Value should be a number. ' + ("\"" + (itemSize === null ? 'null' : typeof itemSize) + "\" was specified."));
      }
    }
  }
});

// Pulled from react-compat
// https://github.com/developit/preact-compat/blob/7c5de00e7c85e2ffd011bf3af02899b63f699d3a/src/index.js#L349
function shallowDiffers(prev, next) {
  for (var attribute in prev) {
    if (!(attribute in next)) {
      return true;
    }
  }

  for (var _attribute in next) {
    if (prev[_attribute] !== next[_attribute]) {
      return true;
    }
  }

  return false;
}

var _excluded = ["style"],
    _excluded2 = ["style"];
// It knows to compare individual style props and ignore the wrapper object.
// See https://reactjs.org/docs/react-api.html#reactmemo

function areEqual(prevProps, nextProps) {
  var prevStyle = prevProps.style,
      prevRest = (0,_babel_runtime_helpers_esm_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_4__["default"])(prevProps, _excluded);

  var nextStyle = nextProps.style,
      nextRest = (0,_babel_runtime_helpers_esm_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_4__["default"])(nextProps, _excluded2);

  return !shallowDiffers(prevStyle, nextStyle) && !shallowDiffers(prevRest, nextRest);
}

// It knows to compare individual style props and ignore the wrapper object.
// See https://reactjs.org/docs/react-component.html#shouldcomponentupdate

function shouldComponentUpdate(nextProps, nextState) {
  return !areEqual(this.props, nextProps) || shallowDiffers(this.state, nextState);
}


//# sourceMappingURL=index.esm.js.map


/***/ }),

/***/ "./extensions/widgets/common/list/src/runtime/assets/icon.svg":
/*!********************************************************************!*\
  !*** ./extensions/widgets/common/list/src/runtime/assets/icon.svg ***!
  \********************************************************************/
/***/ ((module) => {

module.exports = "<svg viewBox=\"0 0 16 16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M2 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm0 1a2 2 0 1 1 0-4 2 2 0 0 1 0 4Zm5-3a1 1 0 0 0 0 2h7a1 1 0 0 0 0-2H7Zm0-1h7a2 2 0 1 1 0 4H7a2 2 0 1 1 0-4Zm0 7a1 1 0 0 0 0 2h7a1 1 0 0 0 0-2H7Zm0-1h7a2 2 0 1 1 0 4H7a2 2 0 1 1 0-4Zm0 7a1 1 0 0 0 0 2h7a1 1 0 0 0 0-2H7Zm0-1h7a2 2 0 1 1 0 4H7a2 2 0 1 1 0-4ZM2 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm0 1a2 2 0 1 1 0-4 2 2 0 0 1 0 4Zm0 5a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm0 1a2 2 0 1 1 0-4 2 2 0 0 1 0 4Z\" fill=\"#FFF\" fill-rule=\"nonzero\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/brand/widget-filter.svg":
/*!*********************************************************!*\
  !*** ./jimu-icons/svg/outlined/brand/widget-filter.svg ***!
  \*********************************************************/
/***/ ((module) => {

module.exports = "<svg viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M18.5.995c0-.55-.43-.995-.96-.995H2.46a.94.94 0 0 0-.605.223 1.02 1.02 0 0 0-.14 1.4L6.5 7.72c.122.156.196.347.212.548l.835 10.815c.007.092.027.183.058.27a.951.951 0 0 0 1.237.582l2.112-.82a.99.99 0 0 0 .615-.797l1.325-10.062c.025-.193.105-.374.228-.52l5.141-6.087c.154-.181.238-.414.238-.655ZM2.5 1h14.999l-5.141 6.09-.117.153a2.016 2.016 0 0 0-.34.883l-1.325 10.062-2.035.792-.833-10.788-.02-.169a2.012 2.012 0 0 0-.402-.92L2.502 1.006 2.5 1Z\" fill=\"#000\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/arrow-left.svg":
/*!************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/arrow-left.svg ***!
  \************************************************************/
/***/ ((module) => {

module.exports = "<svg viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M15 7.5a.522.522 0 0 1-.516.527H2.976L6.473 11.6a.535.535 0 0 1 0 .746.508.508 0 0 1-.73 0L1 7.5l4.743-4.846a.508.508 0 0 1 .73 0 .535.535 0 0 1 0 .746L2.976 6.973h11.508c.285 0 .516.236.516.527Z\" fill=\"#000\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/down.svg":
/*!******************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/down.svg ***!
  \******************************************************/
/***/ ((module) => {

module.exports = "<svg viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M2.146 4.653a.485.485 0 0 1 .708 0L8 10.24l5.146-5.587a.485.485 0 0 1 .708 0 .538.538 0 0 1 0 .738l-5.5 5.956a.485.485 0 0 1-.708 0l-5.5-5.956a.538.538 0 0 1 0-.738Z\" fill=\"#000\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/left.svg":
/*!******************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/left.svg ***!
  \******************************************************/
/***/ ((module) => {

module.exports = "<svg viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M11.347 2.146a.485.485 0 0 1 0 .708L5.76 8l5.587 5.146a.486.486 0 0 1 0 .708.538.538 0 0 1-.738 0l-5.956-5.5a.485.485 0 0 1 0-.708l5.956-5.5a.538.538 0 0 1 .738 0Z\" fill=\"#000\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/right.svg":
/*!*******************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/right.svg ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = "<svg viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M4.653 13.854a.485.485 0 0 1 0-.708L10.24 8 4.653 2.854a.485.485 0 0 1 0-.708.538.538 0 0 1 .738 0l5.956 5.5a.485.485 0 0 1 0 .708l-5.956 5.5a.538.538 0 0 1-.738 0Z\" fill=\"#000\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/up.svg":
/*!****************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/up.svg ***!
  \****************************************************/
/***/ ((module) => {

module.exports = "<svg viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M13.854 11.347a.486.486 0 0 1-.708 0L8 5.76l-5.146 5.587a.485.485 0 0 1-.708 0 .538.538 0 0 1 0-.738l5.5-5.956a.485.485 0 0 1 .708 0l5.5 5.956a.538.538 0 0 1 0 .738Z\" fill=\"#000\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/close.svg":
/*!**************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/close.svg ***!
  \**************************************************/
/***/ ((module) => {

module.exports = "<svg viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m8.745 8 6.1 6.1a.527.527 0 1 1-.745.746L8 8.746l-6.1 6.1a.527.527 0 1 1-.746-.746l6.1-6.1-6.1-6.1a.527.527 0 0 1 .746-.746l6.1 6.1 6.1-6.1a.527.527 0 0 1 .746.746L8.746 8Z\" fill=\"#000\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/menu.svg":
/*!*************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/menu.svg ***!
  \*************************************************/
/***/ ((module) => {

module.exports = "<svg viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M.438 1C.196 1 0 1.224 0 1.5s.196.5.438.5h15.124c.242 0 .438-.224.438-.5s-.196-.5-.438-.5H.438ZM0 7.5c0-.276.196-.5.438-.5h15.124c.242 0 .438.224.438.5s-.196.5-.438.5H.438C.196 8 0 7.776 0 7.5ZM0 13.5c0-.276.196-.5.438-.5h15.124c.242 0 .438.224.438.5s-.196.5-.438.5H.438C.196 14 0 13.776 0 13.5Z\" fill=\"#000\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/reset.svg":
/*!**************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/reset.svg ***!
  \**************************************************/
/***/ ((module) => {

module.exports = "<svg viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14.938 8A7 7 0 0 1 1.01 9H0a8.001 8.001 0 0 0 15.938-1A8 8 0 0 0 1.02 3.98L1 .702a.5.5 0 1 0-1 .006L.031 5.9l5.128-.826a.5.5 0 0 0-.16-.987L1.819 4.6A7 7 0 0 1 14.938 8Z\" fill=\"#000\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/search.svg":
/*!***************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/search.svg ***!
  \***************************************************/
/***/ ((module) => {

module.exports = "<svg viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0Zm-1.27 4.936a6.5 6.5 0 1 1 .707-.707l4.136 4.137a.5.5 0 1 1-.707.707l-4.137-4.137Z\" fill=\"#000\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/show-selection--rtl.svg":
/*!****************************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/show-selection--rtl.svg ***!
  \****************************************************************/
/***/ ((module) => {

module.exports = "<svg viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M15.88 2.825a.5.5 0 0 0-.759-.65l-2.323 2.71-1.265-1.265a.5.5 0 1 0-.707.707l1.265 1.265a1 1 0 0 0 1.466-.056l2.323-2.71Zm0 8a.5.5 0 0 0-.759-.65l-2.323 2.71-1.265-1.265a.5.5 0 1 0-.707.708l1.265 1.264a1 1 0 0 0 1.466-.056l2.323-2.71ZM9 4.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1 0-1h8a.5.5 0 0 1 .5.5ZM8.5 13a.5.5 0 0 0 0-1h-8a.5.5 0 0 0 0 1h8Z\" fill=\"#000\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/show-selection.svg":
/*!***********************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/show-selection.svg ***!
  \***********************************************************/
/***/ ((module) => {

module.exports = "<svg viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M16 4.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1 0-1h8a.5.5 0 0 1 .5.5ZM16 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1 0-1h8a.5.5 0 0 1 .5.5ZM5.146 2.12a.5.5 0 0 1 .055.705l-2.324 2.71a1 1 0 0 1-1.466.057L.146 4.327a.5.5 0 0 1 .708-.707l1.264 1.265 2.323-2.71a.5.5 0 0 1 .705-.055ZM5.146 10.12a.5.5 0 0 1 .055.705l-2.324 2.71a1 1 0 0 1-1.466.057L.146 12.328a.5.5 0 1 1 .708-.708l1.264 1.265 2.323-2.71a.5.5 0 0 1 .705-.055Z\" fill=\"#000\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/sync-off.svg":
/*!*****************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/sync-off.svg ***!
  \*****************************************************/
/***/ ((module) => {

module.exports = "<svg viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"m2.116 1.5.969 1.678H1.05v3H0l1.5 2 1.5-2h-.951v-2h1.614l4.618 8H2.049v-2H1.05v3h7.809l1.257 2.178.866-.5L2.982 1l-.866.5Zm9.982 8.678h.95v2h-2.611l.576 1h3.036v-3h1.05l-1.501-2-1.5 2Zm.951-4v-2H5.817l-.578-1h8.81v3h-1Z\" fill=\"#000\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/sync-on.svg":
/*!****************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/sync-on.svg ***!
  \****************************************************/
/***/ ((module) => {

module.exports = "<svg viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M1.049 6V3h13v3h-1V4h-11v2H3L1.5 7.999 0 6h1.049Zm12 4h-.952l1.5-2 1.5 2h-1.049v3H1.05v-3h1v2h11v-2Z\" fill=\"#000\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/trash-check.svg":
/*!********************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/trash-check.svg ***!
  \********************************************************/
/***/ ((module) => {

module.exports = "<svg viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m11.366 7.841-.732-.682-3.125 3.349-1.635-1.84-.748.664 2.365 2.66 3.875-4.15Z\" fill=\"#000\"></path><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M4.5 3V1.167C4.5.469 5.204 0 6 0h4c.796 0 1.5.47 1.5 1.167V3h4a.5.5 0 0 1 0 1H14l-.929 11.077a1 1 0 0 1-.997.923H3.926a1 1 0 0 1-.997-.923L2 4H.5a.5.5 0 0 1 0-1h4ZM3.003 4h9.994l-.923 11H3.926L3.003 4ZM10.5 1v2h-5V1c0-.04 5-.04 5 0Z\" fill=\"#000\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/suggested/warning.svg":
/*!*******************************************************!*\
  !*** ./jimu-icons/svg/outlined/suggested/warning.svg ***!
  \*******************************************************/
/***/ ((module) => {

module.exports = "<svg viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8 2.125 14.334 14H1.667L8 2.125Zm-.882-.47a1 1 0 0 1 1.765 0l6.333 11.874A1 1 0 0 1 14.334 15H1.667a1 1 0 0 1-.882-1.47L7.118 1.653ZM8 4.874a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0L8.9 5.87a.905.905 0 0 0-.9-.995Zm1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z\" fill=\"#000\"></path></svg>"

/***/ }),

/***/ "./extensions/widgets/common/list/src/config.ts":
/*!******************************************************!*\
  !*** ./extensions/widgets/common/list/src/config.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AlignType": () => (/* binding */ AlignType),
/* harmony export */   "BOTTOM_TOOL_H": () => (/* binding */ BOTTOM_TOOL_H),
/* harmony export */   "BOTTOM_TOOL_TOP_PADDING": () => (/* binding */ BOTTOM_TOOL_TOP_PADDING),
/* harmony export */   "COMMON_PADDING": () => (/* binding */ COMMON_PADDING),
/* harmony export */   "DEFAULT_CARD_SIZE": () => (/* binding */ DEFAULT_CARD_SIZE),
/* harmony export */   "DEFAULT_SPACE": () => (/* binding */ DEFAULT_SPACE),
/* harmony export */   "DS_TOOL_BOTTOM_PADDING": () => (/* binding */ DS_TOOL_BOTTOM_PADDING),
/* harmony export */   "DS_TOOL_H": () => (/* binding */ DS_TOOL_H),
/* harmony export */   "DirectionType": () => (/* binding */ DirectionType),
/* harmony export */   "HoverType": () => (/* binding */ HoverType),
/* harmony export */   "ItemStyle": () => (/* binding */ ItemStyle),
/* harmony export */   "LIST_CARD_MIN_SIZE": () => (/* binding */ LIST_CARD_MIN_SIZE),
/* harmony export */   "LIST_CARD_PADDING": () => (/* binding */ LIST_CARD_PADDING),
/* harmony export */   "LIST_TOOL_MIN_SIZE_DATA_ACTION": () => (/* binding */ LIST_TOOL_MIN_SIZE_DATA_ACTION),
/* harmony export */   "LIST_TOOL_MIN_SIZE_NO_DATA_ACTION": () => (/* binding */ LIST_TOOL_MIN_SIZE_NO_DATA_ACTION),
/* harmony export */   "ListLayout": () => (/* binding */ ListLayout),
/* harmony export */   "ListLayoutType": () => (/* binding */ ListLayoutType),
/* harmony export */   "PageStyle": () => (/* binding */ PageStyle),
/* harmony export */   "PageTransitonType": () => (/* binding */ PageTransitonType),
/* harmony export */   "SelectedStyle": () => (/* binding */ SelectedStyle),
/* harmony export */   "SelectionModeType": () => (/* binding */ SelectionModeType),
/* harmony export */   "SettingCollapseType": () => (/* binding */ SettingCollapseType),
/* harmony export */   "Status": () => (/* binding */ Status)
/* harmony export */ });
const LIST_CARD_PADDING = 0;
const LIST_CARD_MIN_SIZE = 20;
const DS_TOOL_H = 42;
const BOTTOM_TOOL_H = 40;
const COMMON_PADDING = 0;
const DS_TOOL_BOTTOM_PADDING = 14;
const BOTTOM_TOOL_TOP_PADDING = 14;
const LIST_TOOL_MIN_SIZE_NO_DATA_ACTION = 175;
const LIST_TOOL_MIN_SIZE_DATA_ACTION = 220;
const DEFAULT_CARD_SIZE = 200;
const DEFAULT_SPACE = 10;
var SettingCollapseType;
(function (SettingCollapseType) {
    SettingCollapseType["None"] = "NONE";
    SettingCollapseType["Arrangement"] = "ARRANGEMENT";
    SettingCollapseType["States"] = "STATES";
    SettingCollapseType["Tools"] = "TOOLS";
})(SettingCollapseType || (SettingCollapseType = {}));
var ListLayout;
(function (ListLayout) {
    ListLayout["AUTO"] = "Auto";
    ListLayout["CUSTOM"] = "Custom";
})(ListLayout || (ListLayout = {}));
var SelectionModeType;
(function (SelectionModeType) {
    SelectionModeType["None"] = "NONE";
    SelectionModeType["Single"] = "SINGLE";
    SelectionModeType["Multiple"] = "MULTIPLE";
})(SelectionModeType || (SelectionModeType = {}));
var PageStyle;
(function (PageStyle) {
    PageStyle["Scroll"] = "SCROLL";
    PageStyle["MultiPage"] = "MULTIPAGE";
})(PageStyle || (PageStyle = {}));
var AlignType;
(function (AlignType) {
    AlignType["Start"] = "FLEX-START";
    AlignType["Center"] = "CENTER";
    AlignType["End"] = "FLEX-END";
})(AlignType || (AlignType = {}));
var DirectionType;
(function (DirectionType) {
    DirectionType["Horizon"] = "HORIZON";
    DirectionType["Vertical"] = "VERTICAL";
})(DirectionType || (DirectionType = {}));
var ListLayoutType;
(function (ListLayoutType) {
    ListLayoutType["Row"] = "ROW";
    ListLayoutType["Column"] = "COLUMN";
    ListLayoutType["GRID"] = "GRID";
})(ListLayoutType || (ListLayoutType = {}));
var PageTransitonType;
(function (PageTransitonType) {
    PageTransitonType["Glide"] = "GLIDE";
    PageTransitonType["Fade"] = "FADE";
    PageTransitonType["Float"] = "FLOAT";
})(PageTransitonType || (PageTransitonType = {}));
var HoverType;
(function (HoverType) {
    HoverType["Hover0"] = "HOVER0";
    HoverType["Hover1"] = "HOVER1";
    HoverType["Hover2"] = "HOVER2";
    HoverType["Hover3"] = "HOVER3";
})(HoverType || (HoverType = {}));
var SelectedStyle;
(function (SelectedStyle) {
    SelectedStyle["Style0"] = "STYLE0";
    SelectedStyle["Style1"] = "STYLE1";
    SelectedStyle["Style2"] = "STYLE2";
    SelectedStyle["Style3"] = "STYLE3";
})(SelectedStyle || (SelectedStyle = {}));
var ItemStyle;
(function (ItemStyle) {
    ItemStyle["Style0"] = "STYLE0";
    ItemStyle["Style1"] = "STYLE1";
    ItemStyle["Style2"] = "STYLE2";
    ItemStyle["Style3"] = "STYLE3";
    ItemStyle["Style4"] = "STYLE4";
    ItemStyle["Style5"] = "STYLE5";
    ItemStyle["Style6"] = "STYLE6";
    ItemStyle["Style7"] = "STYLE7";
    ItemStyle["Style8"] = "STYLE8";
    ItemStyle["Style9"] = "STYLE9";
})(ItemStyle || (ItemStyle = {}));
var Status;
(function (Status) {
    Status["Regular"] = "REGULAR";
    Status["Selected"] = "SELECTED";
    Status["Hover"] = "HOVER";
})(Status || (Status = {}));


/***/ }),

/***/ "./extensions/widgets/common/list/src/runtime/components/bottom-tools.tsx":
/*!********************************************************************************!*\
  !*** ./extensions/widgets/common/list/src/runtime/components/bottom-tools.tsx ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ListBottomTools": () => (/* binding */ ListBottomTools)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../config */ "./extensions/widgets/common/list/src/config.ts");
/* harmony import */ var jimu_icons_outlined_directional_left__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/outlined/directional/left */ "./jimu-icons/outlined/directional/left.tsx");
/* harmony import */ var jimu_icons_outlined_directional_up__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/outlined/directional/up */ "./jimu-icons/outlined/directional/up.tsx");
/* harmony import */ var jimu_icons_outlined_directional_right__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/outlined/directional/right */ "./jimu-icons/outlined/directional/right.tsx");
/* harmony import */ var jimu_icons_outlined_directional_down__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jimu-icons/outlined/directional/down */ "./jimu-icons/outlined/directional/down.tsx");







function ListBottomTools(props) {
    const { isRTL, totalPage, pageStyle, currentPage, scrollStatus, isScrollEnd, isEditing, showLoading, layoutType, handleScrollDown, handleScrollUp, handleSwitchPage, formatMessage } = props;
    return (jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", { className: 'bottom-tools w-100 d-flex align-items-center justify-content-center pl-2 pr-2' },
        pageStyle === _config__WEBPACK_IMPORTED_MODULE_2__.PageStyle.MultiPage
            ? (jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Pagination, { size: 'sm', totalPage: totalPage, current: currentPage, onChangePage: handleSwitchPage, disabled: showLoading }))
            : (jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", { className: 'd-flex scroll-navigator' },
                jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { title: formatMessage('previous'), disabled: scrollStatus === 'start', type: 'secondary', size: 'sm', icon: true, onClick: handleScrollUp }, layoutType === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Column ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_icons_outlined_directional_left__WEBPACK_IMPORTED_MODULE_3__.LeftOutlined, { size: 12 }) : jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_icons_outlined_directional_up__WEBPACK_IMPORTED_MODULE_4__.UpOutlined, { size: 12 })),
                jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { title: formatMessage('next'), disabled: scrollStatus === 'end' || isScrollEnd, type: 'secondary', size: 'sm', style: isRTL
                        ? { marginRight: jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(10) }
                        : { marginLeft: jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(10) }, icon: true, onClick: handleScrollDown }, layoutType === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Column ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_icons_outlined_directional_right__WEBPACK_IMPORTED_MODULE_5__.RightOutlined, null) : jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_icons_outlined_directional_down__WEBPACK_IMPORTED_MODULE_6__.DownOutlined, null)))),
        window.jimuConfig.isInBuilder && isEditing && (jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", { className: 'editing-mask-bottom-tool' }))));
}


/***/ }),

/***/ "./extensions/widgets/common/list/src/runtime/components/filter-picker.tsx":
/*!*********************************************************************************!*\
  !*** ./extensions/widgets/common/list/src/runtime/components/filter-picker.tsx ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ FilterPicker)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui/basic/sql-expression-runtime */ "jimu-ui/basic/sql-expression-runtime");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var jimu_icons_outlined_brand_widget_filter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/outlined/brand/widget-filter */ "./jimu-icons/outlined/brand/widget-filter.tsx");
/* harmony import */ var jimu_icons_outlined_editor_reset__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/outlined/editor/reset */ "./jimu-icons/outlined/editor/reset.tsx");
/** @jsx jsx */






const popperOffset = [0, 5];
const popperModifiers = [
    {
        name: 'flip',
        options: {
            boundary: document.body,
            fallbackPlacements: ['bottom-start', 'right-end', 'top-start', 'left-start']
        }
    }
];
class FilterPicker extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.formatMessage = (id, values) => {
            return this.props.formatMessage(id, values);
        };
        this.onPopperToggle = evt => {
            const { filter } = this.props;
            const { isOpen } = this.state;
            if (!isOpen) {
                // will open
                this.setState({
                    currentFilter: filter
                });
            }
            this.setState({ isOpen: !isOpen });
        };
        this.onItemClick = (evt, item) => {
            this.setState({ isOpen: false });
            evt.stopPropagation();
            evt.nativeEvent.stopImmediatePropagation();
        };
        this.handleFilterChange = (sqlExprObj) => {
            this.setState({
                currentFilter: sqlExprObj
            });
        };
        this.handleApplyClick = evt => {
            const { currentFilter } = this.state;
            const { handleFilterApplyChange, handleFilterChange } = this.props;
            handleFilterChange(currentFilter);
            handleFilterApplyChange(true);
            this.setState({
                isOpen: false
            });
        };
        this.handleResetClick = evt => {
            const { handleFilterApplyChange, handleFilterChange } = this.props;
            handleFilterApplyChange(false);
            handleFilterChange(this.props.filterInConfig);
            this.setState({
                currentFilter: this.props.filterInConfig
            });
        };
        this.handleClearClick = evt => {
            const { handleFilterApplyChange } = this.props;
            handleFilterApplyChange(false);
            this.setState({
                isOpen: false
            });
        };
        this.getStyle = () => {
            const { theme } = this.props;
            return jimu_core__WEBPACK_IMPORTED_MODULE_0__.css `
      position: relative;
      .dot {
        position: absolute;
        width: 6px;
        height: 6px;
        right: -2px;
        top: 0px;
        .dot-bottom {
          width: 6px;
          height: 6px;
          background-color: transparent;
          .dot-top {
            width: 4px;
            height: 4px;
            background-color: ${theme.colors.palette.dark[600]};
          }
        }
      }
      :hover {
        .dot-top {
          background-color: ${theme.colors.palette.primary[500]};
        }
      }
      & .active {
        .dot-top {
          background-color: ${theme.colors.white};
        }
        :hover {
          .dot-top {
            background-color: ${theme.colors.white};
          }
        }
      }
    `;
        };
        this.getPopperStyle = () => {
            return jimu_core__WEBPACK_IMPORTED_MODULE_0__.css `
      .filter-button-con  {
        & {
          text-align: right;
        }
        button {
          max-width: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(92)};
          overflow: hidden;
          text-overflow: ellipsis;
        }
        button svg {
          margin-right: 0 !important;
        }
        .reset-button {
          padding-left: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(5)};
          padding-right: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(5)};
        }
      }
      .clear-button, .reset-button {
        margin-left: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(8)};
      }
    `;
        };
        this.toggleRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createRef();
        this.state = {
            isOpen: false,
            currentFilter: props.filter
        };
    }
    componentDidUpdate(preProps) {
        const { filter, appMode } = this.props;
        if (filter !== preProps.filter) {
            this.setState({
                currentFilter: filter
            });
        }
        if (appMode !== preProps.appMode) {
            if (appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design) {
                this.setState({
                    isOpen: false
                });
            }
        }
    }
    render() {
        const { filter, selectedDs, widgetId, title, applied } = this.props;
        const { isOpen, currentFilter } = this.state;
        const isHadApply = applied && (filter === null || filter === void 0 ? void 0 : filter.sql) === (currentFilter === null || currentFilter === void 0 ? void 0 : currentFilter.sql);
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(react__WEBPACK_IMPORTED_MODULE_3__.Fragment, null,
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { css: this.getStyle(), size: 'sm', type: 'tertiary', icon: true, title: title, ref: this.toggleRef, onClick: this.onPopperToggle },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_brand_widget_filter__WEBPACK_IMPORTED_MODULE_4__.WidgetFilterOutlined, { size: 16 }),
                applied && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'dot align-items-center justify-content-center' },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'dot-bottom rounded-circle' },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'dot-top rounded-circle' }))))),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Popper, { placement: 'bottom-start', reference: this.toggleRef.current, offset: popperOffset, toggle: this.onPopperToggle, css: this.getPopperStyle(), open: isOpen, modifiers: popperModifiers },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { style: { padding: jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(20), width: jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(250) } },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", null,
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_2__.SqlExpressionRuntime, { widgetId: widgetId, dataSource: selectedDs, expression: currentFilter, onChange: this.handleFilterChange })),
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'w-100 mt-3 filter-button-con' },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { disabled: isHadApply, onClick: this.handleApplyClick, type: 'primary', title: this.formatMessage('apply'), size: 'sm' }, this.formatMessage('apply')),
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { disabled: !applied, onClick: this.handleClearClick, title: this.formatMessage('commonModalCancel'), className: "clear-button", size: 'sm' }, this.formatMessage('commonModalCancel')),
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { onClick: this.handleResetClick, title: this.formatMessage('resetFilters'), className: "reset-button", size: 'sm' },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_reset__WEBPACK_IMPORTED_MODULE_5__.ResetOutlined, { size: 's' })))))));
    }
}


/***/ }),

/***/ "./extensions/widgets/common/list/src/runtime/components/list-card-base.tsx":
/*!**********************************************************************************!*\
  !*** ./extensions/widgets/common/list/src/runtime/components/list-card-base.tsx ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ListCard)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/** @jsx jsx */

class ListCard extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.Component {
    constructor() {
        super(...arguments);
        this.getNewProviderData = () => {
            const { widgetId, datasourceId, index, record } = this.props;
            return {
                widgetId: widgetId,
                dataSourceId: datasourceId,
                recordIndex: index,
                record: record
            };
        };
        this.shouldComponentUpdateExcept = (nextProps, nextStats, exceptPropKeys, exceptStatKeys = []) => {
            let shouldUpdate = false;
            this.props &&
                Object.keys(this.props).some(key => {
                    if (exceptPropKeys.includes(key))
                        return false;
                    if (this.props[key] !== nextProps[key]) {
                        // console.log(`props has changed: ${key}`)
                        shouldUpdate = true;
                        return true;
                    }
                    else {
                        return false;
                    }
                });
            this.state &&
                Object.keys(this.state).some(key => {
                    if (exceptStatKeys.includes(key))
                        return false;
                    if (this.state[key] !== nextStats[key]) {
                        // console.log(`states has changed: ${key}`)
                        shouldUpdate = true;
                        return true;
                    }
                    else {
                        return false;
                    }
                });
            return shouldUpdate;
        };
        this.isProviderEqual = (providerData, oldProviderData) => {
            let isEqual = true;
            if (providerData) {
                Object.keys(providerData).some(key => {
                    if (!oldProviderData) {
                        isEqual = false;
                        return true;
                    }
                    const data = providerData[key];
                    const oldData = oldProviderData[key];
                    if (data !== oldData) {
                        isEqual = false;
                        return true;
                    }
                    return false;
                });
            }
            else if (oldProviderData) {
                return false;
            }
            return isEqual;
        };
        this.formatMessage = (id, values) => {
            return this.props.formatMessage(id, values);
        };
        this.getStyle = (status) => {
            const { widgetId, selectable, appMode, theme } = this.props;
            const isBackgroundTransparent = this.checkIsBackgroundTransparent(status);
            return jimu_core__WEBPACK_IMPORTED_MODULE_0__.css `
      ${'&.list-card-' + widgetId} {
        padding: 0;
        border: 0;
        background-color: transparent;
        &:focus {
          outline: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(2)} solid ${theme.colors.palette.primary[700]};
          outline-offset: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(2)};
        }
        .list-card-content {
          width: 100%;
          height: 100%;
        }
      }
      &.surface-1 {
        border: none !important;
        background: ${isBackgroundTransparent && 'none !important'};
      }
      .list-clear-background {
        background: transparent !important;
      }
      .list-link {
        position: absolute;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
      }
      .list-item-con {
        overflow: hidden;
      }
      ${'&.list-card-' + widgetId}:hover {
        ${(!window.jimuConfig.isInBuilder || appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Run) &&
                selectable
                ? 'cursor: pointer;'
                : ''}
      }
      .card-editor-mask {
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        z-index: 100;
      }
      .jimu-link {
        text-align: left;
      }
    `;
        };
    }
    checkIsBackgroundTransparent(status) {
        var _a, _b, _c;
        const { cardConfigs } = this.props;
        return ((_c = (_b = (_a = cardConfigs === null || cardConfigs === void 0 ? void 0 : cardConfigs[status]) === null || _a === void 0 ? void 0 : _a.backgroundStyle) === null || _b === void 0 ? void 0 : _b.background) === null || _c === void 0 ? void 0 : _c.color) === 'rgba(0,0,0,0)';
    }
}


/***/ }),

/***/ "./extensions/widgets/common/list/src/runtime/components/list-card-editor.tsx":
/*!************************************************************************************!*\
  !*** ./extensions/widgets/common/list/src/runtime/components/list-card-editor.tsx ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../config */ "./extensions/widgets/common/list/src/config.ts");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _list_card_base__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./list-card-base */ "./extensions/widgets/common/list/src/runtime/components/list-card-base.tsx");
/* harmony import */ var jimu_icons_outlined_editor_sync_on__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-icons/outlined/editor/sync-on */ "./jimu-icons/outlined/editor/sync-on.tsx");
/* harmony import */ var jimu_icons_outlined_editor_sync_off__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jimu-icons/outlined/editor/sync-off */ "./jimu-icons/outlined/editor/sync-off.tsx");
/** @jsx jsx */







const cornerSize = 12;
const cornerPosition = -10;
const sideSize = 16;
const sidePosition = -10;
const zindexHandle = 20;
const statesPopperOffset = [0, 5];
const statesModifiers = [
    {
        name: 'flip',
        options: {
            boundary: document.body,
            fallbackPlacements: ['right-start', 'left-start', 'bottom-start', 'top-end', 'top-start']
        }
    }
];
const applyPopperModifiers = [
    {
        name: 'offset',
        options: {
            offset: [0, 10]
        }
    },
    {
        name: 'arrow',
        enabled: true
    }
];
class _ListCardEditor extends _list_card_base__WEBPACK_IMPORTED_MODULE_4__["default"] {
    constructor(props) {
        super(props);
        this.lastResizeCall = null;
        this.getNewCardSize = (rect, isResizing = false) => {
            const { keepAspectRatio, layoutType, gridItemSizeRatio, horizontalSpace, isWidthPercentage } = this.props;
            let newCardSize;
            let width = rect.right - rect.left;
            if (!isResizing && isWidthPercentage) {
                width = rect.right - rect.left + horizontalSpace;
            }
            if (layoutType === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID && keepAspectRatio) {
                newCardSize = {
                    width: width,
                    height: width * gridItemSizeRatio
                };
            }
            else {
                newCardSize = {
                    width: width,
                    height: rect.bottom - rect.top
                };
            }
            return newCardSize;
        };
        this.handleItemClick = evt => {
            const { selectCard } = this.props;
            if (evt) {
                evt.stopPropagation();
            }
            selectCard();
        };
        this.handleCopyTo = (evt, status, selectedLayoutItem, linked) => {
            if (!selectedLayoutItem)
                return;
            const { layouts, builderSupportModules, browserSizeMode, builderStatus } = this.props;
            const action = builderSupportModules.jimuForBuilderLib.getAppConfigAction();
            const appConfig = action.appConfig;
            const originLayoutId = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.searchUtils.findLayoutId(layouts[builderStatus], browserSizeMode, appConfig.mainSizeMode);
            const desLayoutId = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.searchUtils.findLayoutId(layouts[status], browserSizeMode, appConfig.mainSizeMode);
            if (linked) {
                const searchUtils = builderSupportModules.widgetModules.searchUtils;
                const layoutItem = searchUtils.getContainerLayoutItem(appConfig.layouts[desLayoutId], selectedLayoutItem.widgetId, jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget);
                !!layoutItem &&
                    action.removeLayoutItem({ layoutId: desLayoutId, layoutItemId: layoutItem.id }, false);
            }
            action.duplicateLayoutItem(originLayoutId, desLayoutId, selectedLayoutItem.id, false, linked);
            action.exec();
            evt.stopPropagation();
            evt.nativeEvent.stopImmediatePropagation();
        };
        this.editStatus = (name, value) => {
            const { dispatch, widgetId } = this.props;
            dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.widgetStatePropChange(widgetId, name, value));
        };
        this.handleBreakLink = evt => {
            const { layouts, builderSupportModules, browserSizeMode, selection, builderStatus, dispatch } = this.props;
            const action = builderSupportModules.jimuForBuilderLib.getAppConfigAction();
            const appConfig = action.appConfig;
            const selectedLayoutItem = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.searchUtils.findLayoutItem(appConfig, selection);
            if (!selectedLayoutItem)
                return;
            const currentLayoutId = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.searchUtils.findLayoutId(layouts[builderStatus], browserSizeMode, appConfig.mainSizeMode);
            action.duplicateLayoutItem(currentLayoutId, currentLayoutId, selectedLayoutItem.id, true);
            action.removeLayoutItem({ layoutId: currentLayoutId, layoutItemId: selectedLayoutItem.id }, false);
            action.exec();
            if (selection.layoutId === currentLayoutId &&
                selection.layoutItemId === selectedLayoutItem.id) {
                dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.selectionChanged(null));
            }
            const content = action.appConfig.layouts[currentLayoutId].content;
            const newItemKey = Object.keys(content)[Object.keys(content).length - 1];
            if (newItemKey) {
                const newItem = content[newItemKey];
                dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.selectionChanged({
                    layoutId: currentLayoutId,
                    layoutItemId: newItem.id
                }));
            }
            evt.stopPropagation();
            evt.nativeEvent.stopImmediatePropagation();
        };
        this.getCopyDropdownItems = (showBreak) => {
            var _a, _b;
            const { cardConfigs, layouts, browserSizeMode, selection, builderStatus, builderSupportModules } = this.props;
            const action = builderSupportModules.jimuForBuilderLib.getAppConfigAction();
            const appConfig = action.appConfig;
            const selectedLayoutItem = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.searchUtils.findLayoutItem(appConfig, selection);
            if (!selection || !selectedLayoutItem || !window.jimuConfig.isInBuilder) {
                return {
                    items: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)([]),
                    title: ''
                };
            }
            const items = [];
            let title = '';
            let linkedToRegular = true;
            let linkedToSelect = cardConfigs[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Selected].selectionMode !== _config__WEBPACK_IMPORTED_MODULE_2__.SelectionModeType.None;
            let linkedToHover = !!cardConfigs[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Hover].enable;
            const isWidgetInLayout = (layoutId, widgetId) => {
                const searchUtils = builderSupportModules.widgetModules.searchUtils;
                const widgets = searchUtils.getContentsInLayoutWithRecrusiveLayouts(appConfig, layoutId, jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget, browserSizeMode);
                return widgets.indexOf(widgetId) > -1;
            };
            const isShowApplyToHover = ((_a = cardConfigs[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Hover]) === null || _a === void 0 ? void 0 : _a.listLayout) !== (_config__WEBPACK_IMPORTED_MODULE_2__.ListLayout === null || _config__WEBPACK_IMPORTED_MODULE_2__.ListLayout === void 0 ? void 0 : _config__WEBPACK_IMPORTED_MODULE_2__.ListLayout.AUTO);
            const isShowApplyToSelected = ((_b = cardConfigs[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Selected]) === null || _b === void 0 ? void 0 : _b.listLayout) !== (_config__WEBPACK_IMPORTED_MODULE_2__.ListLayout === null || _config__WEBPACK_IMPORTED_MODULE_2__.ListLayout === void 0 ? void 0 : _config__WEBPACK_IMPORTED_MODULE_2__.ListLayout.AUTO);
            const syncToHover = () => {
                if (cardConfigs[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Hover].enable) {
                    const layoutId = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.searchUtils.findLayoutId(layouts[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Hover], browserSizeMode, appConfig.mainSizeMode);
                    if (!isWidgetInLayout(layoutId, appConfig.layouts[selection.layoutId].content[selection.layoutItemId].widgetId)) {
                        linkedToHover = false;
                    }
                    items.push({
                        label: this.formatMessage('applyTo', {
                            status: this.formatMessage('hover').toLocaleLowerCase()
                        }),
                        event: evt => {
                            this.handleCopyTo(evt, _config__WEBPACK_IMPORTED_MODULE_2__.Status.Hover, selectedLayoutItem, linkedToHover);
                        }
                    });
                }
            };
            const syncToSelected = () => {
                if (cardConfigs[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Selected].selectionMode !== _config__WEBPACK_IMPORTED_MODULE_2__.SelectionModeType.None) {
                    const layoutId = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.searchUtils.findLayoutId(layouts[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Selected], browserSizeMode, appConfig.mainSizeMode);
                    if (!isWidgetInLayout(layoutId, appConfig.layouts[selection.layoutId].content[selection.layoutItemId].widgetId)) {
                        linkedToSelect = false;
                    }
                    items.push({
                        label: this.formatMessage('applyTo', {
                            status: this.formatMessage('selected').toLocaleLowerCase()
                        }),
                        event: evt => {
                            this.handleCopyTo(evt, _config__WEBPACK_IMPORTED_MODULE_2__.Status.Selected, selectedLayoutItem, linkedToSelect);
                        }
                    });
                }
            };
            const syncToRegular = () => {
                const layoutId = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.searchUtils.findLayoutId(layouts[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Regular], browserSizeMode, appConfig.mainSizeMode);
                if (!isWidgetInLayout(layoutId, appConfig.layouts[selection.layoutId].content[selection.layoutItemId]
                    .widgetId)) {
                    linkedToRegular = false;
                }
                items.push({
                    label: this.formatMessage('applyTo', {
                        status: this.formatMessage('regular').toLocaleLowerCase()
                    }),
                    event: evt => {
                        this.handleCopyTo(evt, _config__WEBPACK_IMPORTED_MODULE_2__.Status.Regular, selectedLayoutItem, linkedToRegular);
                    }
                });
            };
            if (builderStatus === _config__WEBPACK_IMPORTED_MODULE_2__.Status.Regular) {
                isShowApplyToHover && syncToHover();
                isShowApplyToSelected && syncToSelected();
                if (linkedToHover && linkedToSelect) {
                    title = this.formatMessage('linkedToAnd', {
                        where1: this.formatMessage('selected').toLocaleLowerCase(),
                        where2: this.formatMessage('hover').toLocaleLowerCase()
                    });
                }
                else if (linkedToHover) {
                    title = this.formatMessage('linkedTo', {
                        where: this.formatMessage('hover').toLocaleLowerCase()
                    });
                }
                else if (linkedToSelect) {
                    title = this.formatMessage('linkedTo', {
                        where: this.formatMessage('selected').toLocaleLowerCase()
                    });
                }
            }
            else if (builderStatus === _config__WEBPACK_IMPORTED_MODULE_2__.Status.Hover) {
                syncToRegular();
                syncToSelected();
                if (linkedToRegular && linkedToSelect) {
                    title = this.formatMessage('linkedToAnd', {
                        where1: this.formatMessage('regular').toLocaleLowerCase(),
                        where2: this.formatMessage('selected').toLocaleLowerCase()
                    });
                }
                else if (linkedToRegular) {
                    title = this.formatMessage('linkedTo', {
                        where: this.formatMessage('regular').toLocaleLowerCase()
                    });
                }
                else if (linkedToSelect) {
                    title = this.formatMessage('linkedTo', {
                        where: this.formatMessage('selected').toLocaleLowerCase()
                    });
                }
            }
            else {
                syncToRegular();
                syncToHover();
                if (linkedToRegular && linkedToHover) {
                    title = this.formatMessage('linkedToAnd', {
                        where1: this.formatMessage('regular').toLocaleLowerCase(),
                        where2: this.formatMessage('hover').toLocaleLowerCase()
                    });
                }
                else if (linkedToRegular) {
                    title = this.formatMessage('linkedTo', {
                        where: this.formatMessage('regular').toLocaleLowerCase()
                    });
                }
                else if (linkedToHover) {
                    title = this.formatMessage('linkedTo', {
                        where: this.formatMessage('hover').toLocaleLowerCase()
                    });
                }
            }
            if (showBreak) {
                items.push({
                    label: this.formatMessage('isolate'),
                    event: this.handleBreakLink
                });
            }
            else {
                title = this.formatMessage('isolate');
            }
            return {
                items: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)(items),
                title: title
            };
        };
        this._renderAction = () => {
            const handlers = [];
            const { theme, layoutType, keepAspectRatio } = this.props;
            const sideHandle = jimu_core__WEBPACK_IMPORTED_MODULE_0__.css `
      box-shadow: none;

      &:after {
        position: absolute;
        content: '';
        width: ${cornerSize}px;
        height: ${cornerSize}px;
        background-color: ${theme.colors.palette.primary[500]};
        border: 2px solid ${theme.colors.white};
        border-radius: 50%;
        z-index: ${zindexHandle};
      }
    `;
            const bottomSideLine = jimu_core__WEBPACK_IMPORTED_MODULE_0__.css `
      box-shadow: none;
      height: ${sideSize}px;
      left: 0px;
      right: 0px;
      bottom: ${-1 * (sideSize / 2)}px;
      &:after {
        position: absolute;
        content: '';
        bottom: 50%;
        left: 0;
        right: 0;
        height: 2px;
        background-color: ${theme.colors.palette.primary[300]};
        z-index: ${zindexHandle};
      }
    `;
            const rightSideLine = jimu_core__WEBPACK_IMPORTED_MODULE_0__.css `
      box-shadow: none;
      width: ${sideSize}px;
      top: 0px;
      bottom: 0px;
      right: ${-1 * (sideSize / 2)}px;
      &:after {
        position: absolute;
        content: '';
        right: 50%;
        top: 0;
        bottom: 0;
        width: 2px;
        background-color: ${theme.colors.palette.primary[300]};
        z-index: ${zindexHandle};
      }
    `;
            const handle = jimu_core__WEBPACK_IMPORTED_MODULE_0__.css `
      position: absolute;
    `;
            const rightSideCursor = jimu_core__WEBPACK_IMPORTED_MODULE_0__.css `
      width: ${sideSize}px;
      top: ${-1 * sidePosition}px;
      bottom: ${-1 * sidePosition}px;
      right: ${-1 * (sideSize / 2)}px;

      &:after {
        top: 50%;
        right: 50%;
        margin-top: ${cornerPosition / 2}px;
        margin-right: ${cornerPosition / 2}px;
      }
    `;
            const bottomSideCursor = jimu_core__WEBPACK_IMPORTED_MODULE_0__.css `
      height: ${sideSize}px;
      left: ${-1 * sidePosition}px;
      right: ${-1 * sidePosition}px;
      bottom: ${-1 * (sideSize / 2)}px;

      &:after {
        left: 50%;
        bottom: 50%;
        margin-left: ${cornerPosition / 2}px;
        margin-bottom: ${cornerPosition / 2}px;
      }
    `;
            switch (layoutType) {
                case _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Column:
                    handlers.push((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { key: '10', className: 'list-card-rnd-resize-left-line', css: [handle, rightSideLine] }));
                    handlers.push((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { key: '4', className: 'list-card-rnd-resize-right', css: [handle, sideHandle, rightSideCursor] }));
                    break;
                case _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Row:
                    handlers.push((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { key: '9', className: 'list-card-rnd-resize-bottom-line', css: [handle, bottomSideLine] }));
                    handlers.push((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { key: '6', className: 'list-card-rnd-resize-bottom', css: [handle, sideHandle, bottomSideCursor] }));
                    break;
                case _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID:
                    handlers.push((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { key: '10', className: 'list-card-rnd-resize-left-line', css: [handle, rightSideLine] }));
                    handlers.push((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { key: '4', className: 'list-card-rnd-resize-right', css: [handle, sideHandle, rightSideCursor] }));
                    if (!keepAspectRatio) {
                        handlers.push((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { key: '9', className: 'list-card-rnd-resize-bottom-line', css: [handle, bottomSideLine] }));
                        handlers.push((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { key: '6', className: 'list-card-rnd-resize-bottom', css: [handle, sideHandle, bottomSideCursor] }));
                    }
                    break;
            }
            return handlers;
        };
        this.getCardToolsStyle = (theme) => {
            return jimu_core__WEBPACK_IMPORTED_MODULE_0__.css `
      width: 100%;
      .btn {
        width: 100%;
      }
      .dropdown-toggle {
        justify-content: center;
      }
    `;
        };
        this.renderCardTools = () => {
            const { index } = this.props;
            const isInBuilder = window.jimuConfig.isInBuilder;
            if (!isInBuilder || index > 0)
                return;
            const { cardConfigs, appMode, builderSupportModules, datasourceId, selectionIsInList, selectionIsList, hideCardTool } = this.props;
            let showTools = true;
            const { BuilderPopper, GLOBAL_RESIZING_CLASS_NAME, GLOBAL_H5_DRAGGING_CLASS_NAME, GLOBAL_DRAGGING_CLASS_NAME } = builderSupportModules.widgetModules;
            const isInList = selectionIsInList;
            const isSelf = selectionIsList;
            if ((!isInList && !isSelf) ||
                appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Run ||
                hideCardTool ||
                !datasourceId) {
                showTools = false;
            }
            return (showTools &&
                this.props.isEditing &&
                (cardConfigs[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Hover].enable ||
                    cardConfigs[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Selected].selectionMode !==
                        _config__WEBPACK_IMPORTED_MODULE_2__.SelectionModeType.None) && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(BuilderPopper, { placement: 'left-start', trapFocus: false, autoFocus: false, css: jimu_core__WEBPACK_IMPORTED_MODULE_0__.css `
            .${GLOBAL_DRAGGING_CLASS_NAME} &,
            .${GLOBAL_RESIZING_CLASS_NAME} &,
            .${GLOBAL_H5_DRAGGING_CLASS_NAME} & {
              &.popper {
                display: none;
              }
            }
          `, reference: this.resizeRef.current, offset: statesPopperOffset, modifiers: statesModifiers, open: showTools }, this.getCardMenuElement())));
        };
        this.getCardMenuElement = () => {
            var _a;
            const { index } = this.props;
            const isInBuilder = window.jimuConfig.isInBuilder;
            if (!isInBuilder || index > 0)
                return;
            const { cardConfigs, selection, widgetId, builderSupportModules, browserSizeMode, builderStatus, selectionIsList } = this.props;
            const action = builderSupportModules.jimuForBuilderLib.getAppConfigAction();
            const appConfig = action.appConfig;
            const { searchUtils, BuilderDropDown, BuilderButton, withBuilderTheme } = builderSupportModules.widgetModules;
            const isSelf = selectionIsList;
            const showBreak = !isSelf &&
                selection &&
                searchUtils &&
                searchUtils.getRelatedLayoutItemsInWidgetByLayoutInfo(appConfig, selection, widgetId, browserSizeMode).length > 1;
            const { items: syncItems, title: syncTitle } = this.getCopyDropdownItems(showBreak);
            const showSync = syncItems && syncItems.length > 0;
            const listLayout = ((_a = cardConfigs[builderStatus]) === null || _a === void 0 ? void 0 : _a.listLayout) || _config__WEBPACK_IMPORTED_MODULE_2__.ListLayout.CUSTOM;
            const isShowSyncOrBreak = showSync || showBreak;
            const isShowCopyPopper = !isSelf && isShowSyncOrBreak && listLayout === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayout.CUSTOM;
            const CardMenu = withBuilderTheme(theme => {
                return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'status-group d-flex flex-column align-items-center p-2', css: this.getCardToolsStyle(theme) },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(BuilderButton, { active: builderStatus === _config__WEBPACK_IMPORTED_MODULE_2__.Status.Regular, onClick: evt => this.handleBuilderStatusChange(evt, _config__WEBPACK_IMPORTED_MODULE_2__.Status.Regular) }, this.formatMessage('regular')),
                    cardConfigs[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Hover].enable && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(BuilderButton, { active: builderStatus === _config__WEBPACK_IMPORTED_MODULE_2__.Status.Hover, className: 'mt-1', onClick: evt => this.handleBuilderStatusChange(evt, _config__WEBPACK_IMPORTED_MODULE_2__.Status.Hover) }, this.formatMessage('hover'))),
                    cardConfigs[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Selected].selectionMode !==
                        _config__WEBPACK_IMPORTED_MODULE_2__.SelectionModeType.None && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(BuilderButton, { active: builderStatus === _config__WEBPACK_IMPORTED_MODULE_2__.Status.Selected, className: 'mt-1', onClick: evt => this.handleBuilderStatusChange(evt, _config__WEBPACK_IMPORTED_MODULE_2__.Status.Selected) }, this.formatMessage('selected'))),
                    isShowCopyPopper && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(BuilderDropDown, { className: 'mt-1 w-100', toggleIsIcon: true, toggleTitle: syncTitle, toggleType: 'default', direction: 'left', toggleContent: theme => (showBreak ? (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_sync_on__WEBPACK_IMPORTED_MODULE_5__.SyncOnOutlined, { size: 16 }) : (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_sync_off__WEBPACK_IMPORTED_MODULE_6__.SyncOffOutlined, { size: 16 })), modifiers: applyPopperModifiers, items: syncItems }))));
            });
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(CardMenu, null));
        };
        this.isItemAccept = (item, isPlaceholder) => {
            var _a, _b;
            if (!item)
                return false;
            const { isEditing } = this.props;
            const supportRepeat = (_b = (_a = item.manifest) === null || _a === void 0 ? void 0 : _a.properties) === null || _b === void 0 ? void 0 : _b.supportRepeat;
            // if(!supportRepeat && item.itemType === LayoutItemType.Widget && !item.id){//support placeholder
            //   supportRepeat = true;
            // }
            const { builderSupportModules, widgetId } = this.props;
            const action = builderSupportModules.jimuForBuilderLib.getAppConfigAction();
            const appConfig = action.appConfig;
            const selectionInList = builderSupportModules.widgetModules.selectionInList;
            return (isEditing &&
                supportRepeat &&
                (!item.layoutInfo ||
                    (item.layoutInfo &&
                        selectionInList(item.layoutInfo, widgetId, appConfig, false))));
        };
        this.getEditorStyle = () => {
            return jimu_core__WEBPACK_IMPORTED_MODULE_0__.css `
      &.list-card-content {
        .fixed-layout {
          border: 0 !important;
        }
      }
    `;
        };
        this.state = {
            didMount: false
        };
        this.resizeRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createRef();
        this.providerData = this.getNewProviderData();
    }
    shouldComponentUpdate(nextProps, nextStats) {
        let shouldUpdate = this.shouldComponentUpdateExcept(nextProps, nextStats, [
            'listStyle',
            'selection'
        ]);
        shouldUpdate =
            shouldUpdate ||
                !jimu_core__WEBPACK_IMPORTED_MODULE_0__.utils.isDeepEqual(this.props.listStyle, nextProps.listStyle);
        if (!shouldUpdate) {
            const { selectionIsInList, selectionIsList } = this.props;
            if (selectionIsList || selectionIsInList) {
                shouldUpdate = !jimu_core__WEBPACK_IMPORTED_MODULE_0__.utils.isDeepEqual(this.props.selection, nextProps.selection);
            }
        }
        return shouldUpdate;
    }
    componentDidUpdate(preProps) {
        const { selectionIsInList, isEditing, layoutType, isRTL, lockItemRatio, keepAspectRatio, index } = this.props;
        if (window.jimuConfig.isInBuilder && index === 0) {
            if (this.interactable) {
                if (isEditing && !selectionIsInList) {
                    if (layoutType === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID) {
                        this.interactable.resizable({
                            edges: {
                                top: false,
                                left: isRTL,
                                bottom: !keepAspectRatio,
                                right: !isRTL
                            }
                        });
                        this.interactable.resizable(true);
                    }
                    else if (!lockItemRatio) {
                        this.interactable.resizable({
                            edges: {
                                top: false,
                                left: layoutType === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Column && isRTL,
                                bottom: layoutType === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Row,
                                right: layoutType === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Column && !isRTL
                            }
                        });
                        this.interactable.resizable(true);
                    }
                }
                else {
                    this.interactable.resizable(false);
                }
            }
        }
    }
    componentDidMount() {
        const { index, layoutType, updateCardToolPosition, keepAspectRatio } = this.props;
        if (index === 0 &&
            window.jimuConfig.isInBuilder &&
            this.resizeRef.current) {
            const { interact, handleResizeCard, isRTL } = this.props;
            this.interactable = interact(this.resizeRef.current).resizable({
                // resize from all edges and corners
                edges: {
                    top: false,
                    left: (layoutType === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Column || layoutType === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID) && isRTL,
                    bottom: (layoutType === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Row || (layoutType === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID && !keepAspectRatio)),
                    right: (layoutType === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Column || layoutType === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID) && !isRTL
                },
                modifiers: [
                    // keep the edges inside the parent
                    interact.modifiers.restrictEdges({
                        endOnly: true
                    }),
                    // minimum size
                    interact.modifiers.restrictSize({
                        min: { width: _config__WEBPACK_IMPORTED_MODULE_2__.LIST_CARD_MIN_SIZE, height: _config__WEBPACK_IMPORTED_MODULE_2__.LIST_CARD_MIN_SIZE }
                    })
                ],
                inertia: false,
                onstart: (event) => {
                    const { changeIsResizingCard } = this.props;
                    if (changeIsResizingCard) {
                        changeIsResizingCard(true);
                    }
                    event.stopPropagation();
                },
                onmove: (event) => {
                    event.stopPropagation();
                    if (this.lastResizeCall) {
                        cancelAnimationFrame(this.lastResizeCall);
                    }
                    const rect = event.rect;
                    const newCardSize = this.getNewCardSize(rect, true);
                    updateCardToolPosition();
                    this.lastResizeCall = requestAnimationFrame(() => {
                        const edges = {}; // event.interaction.edges;
                        handleResizeCard(newCardSize, false, edges.top, edges.left);
                    });
                },
                onend: (event) => {
                    event.stopPropagation();
                    if (this.lastResizeCall) {
                        cancelAnimationFrame(this.lastResizeCall);
                    }
                    this.lastResizeCall = requestAnimationFrame(() => {
                        const rect = event.rect;
                        const newCardSize = this.getNewCardSize(rect);
                        handleResizeCard(newCardSize, true);
                        const { changeIsResizingCard } = this.props;
                        if (changeIsResizingCard) {
                            changeIsResizingCard(false);
                        }
                    });
                }
            });
        }
        this.setState({
            didMount: true
        });
    }
    componentWillUnMount() {
        if (this.lastResizeCall) {
            cancelAnimationFrame(this.lastResizeCall);
        }
        if (this.interactable) {
            this.interactable.unset();
            this.interactable = null;
        }
    }
    handleBuilderStatusChange(evt, status) {
        this.editStatus('showCardSetting', status);
        this.editStatus('builderStatus', status);
        const { selectCard } = this.props;
        selectCard();
        evt.stopPropagation();
        evt.nativeEvent.stopImmediatePropagation();
    }
    render() {
        var _a;
        const { selectable, active, cardConfigs, LayoutEntry, selectionIsInList, isEditing, widgetId, listStyle, lockItemRatio, builderStatus, layouts, layoutType } = this.props;
        const { didMount } = this.state;
        const layout = layouts[builderStatus];
        const listLayout = ((_a = cardConfigs[builderStatus]) === null || _a === void 0 ? void 0 : _a.listLayout) || _config__WEBPACK_IMPORTED_MODULE_2__.ListLayout.CUSTOM;
        const regularLayout = layouts[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Regular];
        const showLayout = listLayout === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayout.AUTO ? regularLayout : layout;
        const bgStyle = cardConfigs[builderStatus].backgroundStyle;
        const isShowMask = listLayout === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayout.AUTO && builderStatus !== _config__WEBPACK_IMPORTED_MODULE_2__.Status.Regular;
        const mergedStyle = Object.assign({}, jimu_ui__WEBPACK_IMPORTED_MODULE_1__.styleUtils.toCSSStyle(bgStyle || {}));
        const cardContentStyle = Object.assign({}, jimu_ui__WEBPACK_IMPORTED_MODULE_1__.styleUtils.toCSSStyle({
            borderRadius: (bgStyle === null || bgStyle === void 0 ? void 0 : bgStyle.borderRadius) || 0
        } || {}));
        const newProviderData = this.getNewProviderData();
        if (!this.isProviderEqual(newProviderData, this.providerData)) {
            this.providerData = newProviderData;
        }
        const isLockItemRatio = layoutType !== _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID && lockItemRatio;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.RepeatedDataSourceProvider, { data: this.providerData },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.ListGroupItem, { active: selectable && active, css: this.getStyle(builderStatus), style: Object.assign(Object.assign({}, cardContentStyle), listStyle), className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('surface-1', `list-card-${widgetId}`), onClick: this.handleItemClick, role: 'listCardEditor' },
                isShowMask && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'card-editor-mask position-absolute' }),
                didMount && this.renderCardTools(),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'list-card-content d-flex', style: mergedStyle, css: this.getEditorStyle(), ref: this.resizeRef },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(LayoutEntry, { isItemAccepted: this.isItemAccept, isRepeat: true, layouts: showLayout, isInWidget: true }),
                    isEditing &&
                        !selectionIsInList &&
                        !isLockItemRatio &&
                        this._renderAction()))));
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.connect((state, props) => {
    var _a;
    const { selectionIsList, builderSupportModules, appMode, widgetId, browserSizeMode } = props;
    if (!window.jimuConfig.isInBuilder || appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Run) {
        return {
            selection: undefined,
            showBreak: false
        };
    }
    const searchUtils = (_a = builderSupportModules === null || builderSupportModules === void 0 ? void 0 : builderSupportModules.widgetModules) === null || _a === void 0 ? void 0 : _a.searchUtils;
    const action = builderSupportModules.jimuForBuilderLib.getAppConfigAction();
    const appConfig = action.appConfig;
    const selection = props.index === 0 &&
        props.selectionIsInList &&
        state &&
        state.appRuntimeInfo &&
        state.appRuntimeInfo.selection;
    const showBreak = !selectionIsList &&
        selection &&
        searchUtils &&
        searchUtils.getRelatedLayoutItemsInWidgetByLayoutInfo(appConfig, selection, widgetId, browserSizeMode).length > 1;
    return {
        selection,
        showBreak
    };
})(_ListCardEditor));


/***/ }),

/***/ "./extensions/widgets/common/list/src/runtime/components/list-card-viewer.tsx":
/*!************************************************************************************!*\
  !*** ./extensions/widgets/common/list/src/runtime/components/list-card-viewer.tsx ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ListCardViewer)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../config */ "./extensions/widgets/common/list/src/config.ts");
/* harmony import */ var _list_card_base__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./list-card-base */ "./extensions/widgets/common/list/src/runtime/components/list-card-base.tsx");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react */ "react");
/** @jsx jsx */






class ListCardViewer extends _list_card_base__WEBPACK_IMPORTED_MODULE_4__["default"] {
    constructor(props) {
        super(props);
        this.updateExpressionRecords = () => {
            var _a, _b;
            this.expressionRecords = {};
            if (((_a = this.providerData) === null || _a === void 0 ? void 0 : _a.dataSourceId) && ((_b = this.providerData) === null || _b === void 0 ? void 0 : _b.record)) {
                this.expressionRecords[this.providerData.dataSourceId] = this.providerData.record;
            }
        };
        this.onUrlExpResolveChange = result => {
            if (result.isSuccessful) {
                this.setState({ url: result.value });
            }
            else {
                const res = '';
                // const errorCode = result.value
                // if (errorCode === ExpressionResolverErrorCode.Failed) {
                // }
                this.setState({ url: res });
            }
        };
        // componentDidUpdate(preProps, preState){
        //   Object.keys(this.props).forEach(key => {
        //     if(this.props[key] !== preProps[key])
        //       console.log(`props has changed: ${key}`)
        //   })
        // }
        this.handleItemClick = evt => {
            const { onChange, active } = this.props;
            const { providerData, linkRef } = this;
            const tagName = (evt.target && evt.target.tagName) || '';
            if (!(tagName.toLowerCase() === 'a' ||
                tagName.toLowerCase() === 'button' ||
                evt.exbEventType === 'linkClick') &&
                !active) {
                if (linkRef.current) {
                    // Must stopPropagation from link click, or this method will be called twice.
                    linkRef.current.click();
                }
            }
            // if click sub widget event, don't un select
            if (active) {
                const tagName = (evt.target && evt.target.tagName) || '';
                if (!(tagName.toLowerCase() === 'a' ||
                    tagName.toLowerCase() === 'button' ||
                    evt.exbEventType === 'linkClick')) {
                    onChange(providerData && providerData.record);
                }
            }
            else {
                onChange(providerData && providerData.record);
            }
            if (evt.exbEventType === 'linkClick') {
                delete evt.exbEventType;
            }
        };
        this.handleLinkClick = evt => {
            evt.stopPropagation();
        };
        this.state = {
            url: ''
        };
        this.providerData = this.getNewProviderData();
        this.updateExpressionRecords();
        this.layoutRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createRef();
        this.linkRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createRef();
    }
    shouldComponentUpdate(nextProps, nextStats) {
        let shouldUpdate = this.shouldComponentUpdateExcept(nextProps, nextStats, [
            'listStyle'
        ]);
        shouldUpdate =
            shouldUpdate ||
                !jimu_core__WEBPACK_IMPORTED_MODULE_0__.utils.isDeepEqual(this.props.listStyle, nextProps.listStyle);
        return shouldUpdate;
    }
    render() {
        var _a;
        const { selectable, active, cardConfigs, widgetId, listStyle, layouts, hoverLayoutOpen, appMode, isHover, linkParam, useDataSources, itemIdex, handleListMouseLeave, handleListMouseMove } = this.props;
        let { queryObject } = this.props;
        const { url } = this.state;
        let currentStatus = _config__WEBPACK_IMPORTED_MODULE_3__.Status.Regular;
        const isInBuilder = window.jimuConfig.isInBuilder;
        let layout;
        let bgStyle;
        let target;
        let linkTo;
        if (isInBuilder && appMode !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Run) {
            bgStyle = cardConfigs[_config__WEBPACK_IMPORTED_MODULE_3__.Status.Regular].backgroundStyle;
            layout = layouts[_config__WEBPACK_IMPORTED_MODULE_3__.Status.Regular];
        }
        else {
            layout = layouts[_config__WEBPACK_IMPORTED_MODULE_3__.Status.Regular];
            bgStyle = cardConfigs[_config__WEBPACK_IMPORTED_MODULE_3__.Status.Regular].backgroundStyle;
            if (linkParam && linkParam.linkType) {
                target = linkParam.openType;
                linkTo = {
                    linkType: linkParam.linkType
                };
                if (linkParam.linkType === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LinkType.WebAddress) {
                    linkTo.value = url;
                    queryObject = undefined;
                }
                else {
                    linkTo.value = linkParam.value;
                }
            }
            if (hoverLayoutOpen && isHover && layouts[_config__WEBPACK_IMPORTED_MODULE_3__.Status.Hover]) {
                currentStatus = _config__WEBPACK_IMPORTED_MODULE_3__.Status.Hover;
                layout = layouts === null || layouts === void 0 ? void 0 : layouts[_config__WEBPACK_IMPORTED_MODULE_3__.Status.Hover];
                bgStyle = cardConfigs[_config__WEBPACK_IMPORTED_MODULE_3__.Status.Hover].backgroundStyle;
            }
            if (selectable && active && layouts[_config__WEBPACK_IMPORTED_MODULE_3__.Status.Selected]) {
                currentStatus = _config__WEBPACK_IMPORTED_MODULE_3__.Status.Selected;
                layout = layouts === null || layouts === void 0 ? void 0 : layouts[_config__WEBPACK_IMPORTED_MODULE_3__.Status.Selected];
                bgStyle = cardConfigs[_config__WEBPACK_IMPORTED_MODULE_3__.Status.Selected].backgroundStyle;
                queryObject = undefined;
                linkTo = undefined;
                target = undefined;
            }
        }
        const currentLayoutType = ((_a = cardConfigs[currentStatus]) === null || _a === void 0 ? void 0 : _a.listLayout) || _config__WEBPACK_IMPORTED_MODULE_3__.ListLayout.CUSTOM;
        const regularLayout = layouts[_config__WEBPACK_IMPORTED_MODULE_3__.Status.Regular];
        const showLayout = currentLayoutType === _config__WEBPACK_IMPORTED_MODULE_3__.ListLayout.AUTO ? regularLayout : layout;
        const mergedStyle = Object.assign({}, jimu_ui__WEBPACK_IMPORTED_MODULE_1__.styleUtils.toCSSStyle(bgStyle || {}));
        const cardContentStyle = Object.assign({}, jimu_ui__WEBPACK_IMPORTED_MODULE_1__.styleUtils.toCSSStyle({
            borderRadius: (bgStyle === null || bgStyle === void 0 ? void 0 : bgStyle.borderRadius) || 0
        } || {}));
        const newProviderData = this.getNewProviderData();
        if (!this.isProviderEqual(newProviderData, this.providerData)) {
            this.providerData = newProviderData;
            this.updateExpressionRecords();
        }
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.RepeatedDataSourceProvider, { data: this.providerData },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.ListGroupItem, { active: selectable && active, css: this.getStyle(currentStatus), style: Object.assign(Object.assign({}, listStyle), cardContentStyle), className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('surface-1', `list-card-${widgetId}`), role: 'listCardViewer', onClick: this.handleItemClick },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'list-card-content d-flex', onMouseLeave: handleListMouseLeave, onMouseMove: () => { handleListMouseMove(itemIdex); }, style: mergedStyle },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'position-relative h-100 w-100' },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(react__WEBPACK_IMPORTED_MODULE_5__.Fragment, null,
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__._Link, { className: 'p-0 w-100 h-100 border-0 list-clear-background list-link', ref: this.linkRef, to: linkTo, target: target, queryObject: queryObject, onClick: this.handleLinkClick }),
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex w-100 h-100 list-item-con', ref: this.layoutRef },
                                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_2__.LayoutEntry, { layouts: showLayout }))))),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.ExpressionResolverComponent, { useDataSources: useDataSources, expression: linkParam === null || linkParam === void 0 ? void 0 : linkParam.expression, 
                    /* records={this.expressionRecords}  */ onChange: this.onUrlExpResolveChange, widgetId: this.props.widgetId }))));
    }
}


/***/ }),

/***/ "./extensions/widgets/common/list/src/runtime/components/my-dropdown.tsx":
/*!*******************************************************************************!*\
  !*** ./extensions/widgets/common/list/src/runtime/components/my-dropdown.tsx ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ MyDropDown)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/** @jsx jsx */


class MyDropDown extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.onDropDownToggle = evt => {
            evt.stopPropagation();
            const { isDropDownOpen, onDropDownOpenChange } = this.props;
            if (isDropDownOpen !== undefined) {
                onDropDownOpenChange && onDropDownOpenChange(!isDropDownOpen);
            }
            else {
                const { isOpen } = this.state;
                this.setState({ isOpen: !isOpen });
            }
        };
        this.onItemClick = (evt, item) => {
            const { isDropDownOpen, onDropDownOpenChange } = this.props;
            if (isDropDownOpen !== undefined) {
                onDropDownOpenChange && onDropDownOpenChange(false);
            }
            else {
                this.setState({ isOpen: false });
            }
            item.event(evt, item);
            evt.stopPropagation();
            evt.nativeEvent.stopImmediatePropagation();
        };
        this.onDropDownMouseClick = evt => {
            evt.stopPropagation();
            evt.nativeEvent.stopImmediatePropagation();
        };
        this.getStyle = () => {
            var _a, _b, _c, _d, _e, _f;
            const { theme } = this.props;
            return jimu_core__WEBPACK_IMPORTED_MODULE_0__.css `
      & button {
        padding: 0;
      }
      .list-toggle-button {
        background: ${(_c = (_b = (_a = theme.colors) === null || _a === void 0 ? void 0 : _a.palette) === null || _b === void 0 ? void 0 : _b.light) === null || _c === void 0 ? void 0 : _c[500]};
        border: none;
        &:hover, &[aria-expanded="true"] {
          background: ${(_f = (_e = (_d = theme.colors) === null || _d === void 0 ? void 0 : _d.palette) === null || _e === void 0 ? void 0 : _e.light) === null || _f === void 0 ? void 0 : _f[800]};
        }
      }
    `;
        };
        this.state = {
            isOpen: false
        };
        const { withBuilderStyle } = props;
        this.MyDropdown = withBuilderStyle ? withBuilderStyle(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Dropdown) : jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Dropdown;
        this.MyDropdownToggle = withBuilderStyle
            ? withBuilderStyle(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.DropdownToggle)
            : jimu_ui__WEBPACK_IMPORTED_MODULE_1__.DropdownToggle;
        this.MyDropdownMenu = withBuilderStyle
            ? withBuilderStyle(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.DropdownMenu)
            : jimu_ui__WEBPACK_IMPORTED_MODULE_1__.DropdownMenu;
        this.MyDropdownItem = withBuilderStyle
            ? withBuilderStyle(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.DropdownItem)
            : jimu_ui__WEBPACK_IMPORTED_MODULE_1__.DropdownItem;
    }
    render() {
        const { items, toggleContent, caret, toggleType, menuContent, appMode, modifiers, toggleIsIcon, theme, isDropDownOpen, size, appendToBody, toggleTitle, direction, menuCss, className, showActive, activeLabel, fluid } = this.props;
        let { isOpen } = this.state;
        isOpen = isDropDownOpen === undefined ? isOpen : isDropDownOpen;
        const { MyDropdown, MyDropdownToggle, MyDropdownMenu, MyDropdownItem } = this;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(MyDropdown, { size: size, toggle: this.onDropDownToggle, direction: direction, fluid: fluid, isOpen: isOpen && appMode !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design, className: `my-dropdown ${className}`, css: this.getStyle() },
            toggleContent && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(MyDropdownToggle, { icon: toggleIsIcon, title: toggleTitle, size: size, type: toggleType, caret: caret, className: 'list-toggle-button' }, toggleContent && toggleContent(theme))),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(MyDropdownMenu, { appendToBody: appendToBody, modifiers: modifiers, css: menuCss && menuCss(theme) }, menuContent
                ? menuContent(theme)
                : items &&
                    items.asMutable().map((item, i) => {
                        return (!item.hide && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(MyDropdownItem, { key: i, className: 'no-user-select', title: item.label, active: showActive && item.label === activeLabel, onClick: evt => this.onItemClick(evt, item) }, item.label)));
                    }))));
    }
}


/***/ }),

/***/ "./extensions/widgets/common/list/src/runtime/components/search-box.tsx":
/*!******************************************************************************!*\
  !*** ./extensions/widgets/common/list/src/runtime/components/search-box.tsx ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ SearchBox)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_icons_outlined_editor_close__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-icons/outlined/editor/close */ "./jimu-icons/outlined/editor/close.tsx");
/* harmony import */ var jimu_icons_outlined_editor_search__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/outlined/editor/search */ "./jimu-icons/outlined/editor/search.tsx");
/* harmony import */ var jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/outlined/directional/arrow-left */ "./jimu-icons/outlined/directional/arrow-left.tsx");
/** @jsx jsx */





const Sanitizer = jimu_core__WEBPACK_IMPORTED_MODULE_0__.esri.Sanitizer;
const sanitizer = new Sanitizer();
class SearchBox extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.handleChange = searchText => {
            this.setState({
                searchText: searchText,
                isShowSuggestion: (searchText === null || searchText === void 0 ? void 0 : searchText.length) > 2
            }, () => {
                const { onSearchTextChange } = this.props;
                if (onSearchTextChange) {
                    onSearchTextChange(searchText);
                }
            });
        };
        this.handleSubmit = (value, isEnter = false) => {
            const { onSubmit } = this.props;
            if (onSubmit) {
                onSubmit(value, isEnter);
            }
        };
        this.onKeyUp = evt => {
            if (!evt || !evt.target)
                return;
            if (evt.key === 'Enter') {
                this.setState({
                    isShowSuggestion: false
                });
                this.handleSubmit(evt.target.value, true);
            }
        };
        this.onSuggestionConfirm = suggestion => {
            this.setState({
                searchText: suggestion,
                isShowSuggestion: false
            }, () => {
                var _a;
                this.handleSubmit(suggestion);
                (_a = this.props) === null || _a === void 0 ? void 0 : _a.toggleSearchBoxVisible(true);
            });
        };
        this.handleClear = evt => {
            this.setState({
                searchText: ''
            });
            evt.stopPropagation();
        };
        this.getStyle = () => {
            var _a, _b, _c, _d, _e, _f, _g, _h, _j;
            const { theme } = this.props;
            return jimu_core__WEBPACK_IMPORTED_MODULE_0__.css `
      position: relative;
      .search-input {
        margin-bottom: -1px;
        padding-left: 3px;
        border: 0;
        // border-bottom-width: 1px;
        // border-bottom-style: solid;
        // border-color: ${theme.colors.primary};
        background: transparent;
        height: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(26)};
        min-width: 0;
        .input-wrapper {
          background: transparent;
          border: none;
          padding: 0;
          height: 100%;
        }
      }
      .search-input:focus {
        background: transparent;
      }
      .search-loading-con {
        @keyframes loading {
          0% {transform: rotate(0deg); };
          100% {transform: rotate(360deg)};
        }
        width: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(13)};
        height: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(13)};
        min-width: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(13)};
        border: 2px solid ${(_c = (_b = (_a = theme === null || theme === void 0 ? void 0 : theme.colors) === null || _a === void 0 ? void 0 : _a.palette) === null || _b === void 0 ? void 0 : _b.secondary) === null || _c === void 0 ? void 0 : _c[300]};
        border-radius: 50%;
        border-top: 2px solid ${(_f = (_e = (_d = theme === null || theme === void 0 ? void 0 : theme.colors) === null || _d === void 0 ? void 0 : _d.palette) === null || _e === void 0 ? void 0 : _e.primary) === null || _f === void 0 ? void 0 : _f[500]};
        box-sizing: border-box;
        animation:loading 2s infinite linear;
        margin-right: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(4)};
      }
      .clear-search, .search-back {
        cursor: pointer;
        padding: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(6)};
        background: none;
        border: none;
        color: ${(_j = (_h = (_g = theme === null || theme === void 0 ? void 0 : theme.colors) === null || _g === void 0 ? void 0 : _g.palette) === null || _h === void 0 ? void 0 : _h.dark) === null || _j === void 0 ? void 0 : _j[800]}
      }
      .search-back {
        margin-left: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(-6)};
      }
      .clear-search:hover {
        background: none;
      }
    `;
        };
        this.getSuggestionListStyle = () => {
            const { suggestionWidth } = this.props;
            return jimu_core__WEBPACK_IMPORTED_MODULE_0__.css `
      & {
        max-height: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(300)};
        min-width: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(suggestionWidth)};
        overflow: auto;
      }
      button {
        display: block;
        width: 100%;
        text-align: left;
        border: none;
        border-radius: 0;
      }
      button:hover {
        border: none;
      }
    `;
        };
        this.clearSearchText = () => {
            const { searchText } = this.state;
            if (searchText) {
                this.handleChange('');
                this.setState({
                    isShowSuggestion: false
                });
            }
        };
        this.getTextInputSuffixElement = () => {
            const { theme, showLoading, formatMessage } = this.props;
            const { searchText } = this.state;
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex align-items-center' },
                showLoading && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'search-loading-con' }),
                searchText && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { color: 'tertiary', className: 'clear-search', icon: true, size: 'sm', onClick: this.clearSearchText, title: formatMessage('clearSearch') },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_close__WEBPACK_IMPORTED_MODULE_2__.CloseOutlined, { size: 14, color: theme.colors.palette.dark[800] })))));
        };
        this.getTextInputPrefixElement = () => {
            const { theme } = this.props;
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { type: 'tertiary', icon: true, size: 'sm', onClick: evt => this.handleSubmit(this.state.searchText) },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_search__WEBPACK_IMPORTED_MODULE_3__.SearchOutlined, { size: 16, color: theme.colors.palette.light[800] })));
        };
        this.state = {
            searchText: props.searchText || '',
            isShowSuggestion: false
        };
    }
    componentDidUpdate(preProps) {
        var _a;
        if (this.props.searchText !== preProps.searchText &&
            this.props.searchText !== this.state.searchText) {
            const { searchText } = this.props;
            this.setState({
                searchText: searchText
            });
        }
        if (((_a = this.props) === null || _a === void 0 ? void 0 : _a.appMode) === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design && this.state.isShowSuggestion) {
            this.setState({
                isShowSuggestion: false,
                searchText: ''
            });
        }
    }
    render() {
        const { placeholder, className, showClear, hideSearchIcon, inputRef, onFocus, onBlur, theme, searchSuggestion, formatMessage, isShowBackButton } = this.props;
        const { searchText, isShowSuggestion } = this.state;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", null,
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: this.getStyle(), className: `d-flex align-items-center ${className}` },
                isShowBackButton && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { color: 'tertiary', className: 'search-back', icon: true, size: 'sm', onClick: evt => {
                        var _a;
                        (_a = this.props) === null || _a === void 0 ? void 0 : _a.toggleSearchBoxVisible(false);
                    }, title: formatMessage('topToolBack') },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_directional_arrow_left__WEBPACK_IMPORTED_MODULE_4__.ArrowLeftOutlined, { size: 20, color: theme.colors.palette.dark[800] }))),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.TextInput, { className: 'search-input flex-grow-1', ref: inputRef, placeholder: placeholder, onChange: e => this.handleChange(e.target.value), onBlur: onBlur, onFocus: onFocus, value: searchText || '', onKeyDown: e => this.onKeyUp(e), prefix: (!hideSearchIcon && !isShowBackButton) && this.getTextInputPrefixElement(), suffix: this.getTextInputSuffixElement() }),
                showClear && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { color: 'tertiary', icon: true, size: 'sm', onClick: this.handleSubmit },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_close__WEBPACK_IMPORTED_MODULE_2__.CloseOutlined, { size: 12, color: theme.colors.palette.dark[800] })))),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { ref: ref => (this.reference = ref) },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Popper, { css: this.getSuggestionListStyle(), placement: 'bottom-start', reference: this.reference, offset: [0, 8], open: isShowSuggestion, trapFocus: false, autoFocus: false, toggle: e => {
                        this.setState({ isShowSuggestion: !isShowSuggestion });
                    } }, searchSuggestion.map((suggestion, index) => {
                    const suggestionHtml = sanitizer.sanitize(suggestion.suggestionHtml);
                    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { key: index, type: 'secondary', size: 'sm', onClick: () => {
                            this.onSuggestionConfirm(suggestion.suggestion);
                        }, dangerouslySetInnerHTML: { __html: suggestionHtml } }));
                })))));
    }
}


/***/ }),

/***/ "./extensions/widgets/common/list/src/runtime/styles/style.tsx":
/*!*********************************************************************!*\
  !*** ./extensions/widgets/common/list/src/runtime/styles/style.tsx ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getSearchToolStyle": () => (/* binding */ getSearchToolStyle),
/* harmony export */   "getStyle": () => (/* binding */ getStyle),
/* harmony export */   "getToolsPopperStyle": () => (/* binding */ getToolsPopperStyle),
/* harmony export */   "getTopToolStyle": () => (/* binding */ getTopToolStyle),
/* harmony export */   "listStyle": () => (/* binding */ listStyle)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../config */ "./extensions/widgets/common/list/src/config.ts");


const listStyle = jimu_core__WEBPACK_IMPORTED_MODULE_0__.utils.memoize(function (options) {
    const { showTopTools, bottomToolH, topRightToolW, hasRecords, currentCardSize, pageStyle, scrollBarOpen, appMode, theme, isHeightAuto, isWidthAuto, listTemplateDefaultCardSize, layoutType, listLeftPadding } = options;
    const topToolsH = showTopTools ? _config__WEBPACK_IMPORTED_MODULE_1__.DS_TOOL_H : 0;
    const direction = layoutType === _config__WEBPACK_IMPORTED_MODULE_1__.ListLayoutType.Column ? _config__WEBPACK_IMPORTED_MODULE_1__.DirectionType.Horizon : _config__WEBPACK_IMPORTED_MODULE_1__.DirectionType.Vertical;
    const isHorizon = layoutType === _config__WEBPACK_IMPORTED_MODULE_1__.ListLayoutType.Column;
    const flexDirection = layoutType === _config__WEBPACK_IMPORTED_MODULE_1__.ListLayoutType.Column ? 'column' : 'row';
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.css `
    &.list-container {
      /* position: ${isHeightAuto ? 'absolute' : 'relative'}; */
      position: relative;
      z-index: 0;
      overflow: hidden;
      .bottom-boundary {
        height: 2px;
        width: 2px;
        position: absolute;
        bottom: 0;
        right: 0;
        opacity: 0;
      }
      ${direction === _config__WEBPACK_IMPORTED_MODULE_1__.DirectionType.Horizon
        ? `
          margin-left: ${_config__WEBPACK_IMPORTED_MODULE_1__.LIST_CARD_PADDING + 'px'};
          height: ${isHeightAuto ? 'auto' : '100%'};
          width: ${isWidthAuto ? 'auto' : `calc(100% - ${_config__WEBPACK_IMPORTED_MODULE_1__.LIST_CARD_PADDING + 'px'})`};
        `
        : `
          margin-top: ${_config__WEBPACK_IMPORTED_MODULE_1__.LIST_CARD_PADDING + 'px'};
          width: ${isWidthAuto ? 'auto' : '100%'};
          height: ${isHeightAuto ? 'auto' : `calc(100% - ${_config__WEBPACK_IMPORTED_MODULE_1__.LIST_CARD_PADDING + 'px'})`};
        `}

      .editing-mask-con {
        &:before {
          content: '';
          position: absolute;
          left: 0;
          top: ${topToolsH}px;
          z-index: 10;
          height: ${currentCardSize.height}px;
          width: ${listLeftPadding}px;
          background-color: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(theme.colors.black, 0.2)};
        }
        .editing-mask-list-grid {
          position: absolute;
          left: ${currentCardSize.width + listLeftPadding}px;
          top: ${topToolsH}px;
          right: 0;
          z-index: 10;
          height: ${currentCardSize.height}px;
          background-color: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(theme.colors.black, 0.2)};
        }
      }
      .editing-mask-list {
        position: absolute;
        top: ${layoutType !== _config__WEBPACK_IMPORTED_MODULE_1__.ListLayoutType.Column && hasRecords
        ? currentCardSize.height + topToolsH
        : topToolsH}px;
        left: ${layoutType === _config__WEBPACK_IMPORTED_MODULE_1__.ListLayoutType.Column && hasRecords
        ? currentCardSize.width
        : 0}px;
        bottom: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(bottomToolH)};
        right: 0;
        z-index: 10;
        background-color: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(theme.colors.black, 0.2)};
      }

      .editing-mask-ds-tool {
        position: absolute;
        z-index: 10;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        background-color: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(theme.colors.black, 0.2)};
      }

      .editing-mask-bottom-tool {
        position: absolute;
        z-index: 10;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        background-color: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(theme.colors.black, 0.2)};
      }

      .empty-con {
        position: absolute;
        top: 50%;
        left: 0;
        right: 0;
        z-index: 10;
        transform: translateY(-50%);
        padding-top: ${topToolsH}px;
        .jimu-icon {
          color: ${theme.colors.palette.warning[900]};
        }
        .discribtion {
          margin: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(9)} 0 ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(8)} 0;
          font-size: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(14)};
          color: ${theme.colors.black}
        }
        .clear-message-action-button {
          width: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(65)};
        }
      }

      .datasource-tools {
        position: relative;
        height: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(topToolsH)};
        padding-bottom: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(_config__WEBPACK_IMPORTED_MODULE_1__.DS_TOOL_BOTTOM_PADDING)};
        .sort-fields-input {
          width: 200px;
          margin-left: 8px;
          margin-right: 16px;
        }

        .tool-row {
          height: ${_config__WEBPACK_IMPORTED_MODULE_1__.DS_TOOL_H - _config__WEBPACK_IMPORTED_MODULE_1__.DS_TOOL_BOTTOM_PADDING}px;
        }
        .ds-tools-line {
          width: 100%;
          height: 1px;
          margin-top: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(6)};
          background-color: ${theme.colors.palette.light[500]};
        }
        .ds-tools-line-blue {
          background-color: ${theme.colors.palette.info[500]};
        }
        .list-search-div {
          width: calc(100% - ${topRightToolW}px);
          .list-search {
            margin-bottom: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(-4)};
            width: 100%;
          }
        }

      }
      .tools-menu {
        color: ${theme.colors.palette.light[800]};
      }
      .tools-menu:hover {
        color: ${theme.colors.palette.info[500]};
      }
      .bottom-tools {
        position: relative;
        padding-top: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(_config__WEBPACK_IMPORTED_MODULE_1__.BOTTOM_TOOL_TOP_PADDING)};
        min-height: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(_config__WEBPACK_IMPORTED_MODULE_1__.BOTTOM_TOOL_H)};
        .scroll-navigator {
          .btn {
            border-radius: ${theme.borderRadiuses.circle};
          }
        }
      }

      .widget-list-list:focus {
        outline: none;
      }
      .widget-list-list {
        & {
          padding: 0;
          position: relative;
          padding-left: ${`${listLeftPadding}px`};
        }
        &>div {
          position: relative;
          flex: 1;
          box-sizing: content-box;
          ${isHorizon && `padding-right: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(15)}`};
          ${!isHorizon && `padding-bottom: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(15)}`};
        }
        /* box-sizing: border-box; */
        ${!window.jimuConfig.isInBuilder || appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Run
        ? `overflow-${isHorizon ? 'y' : 'x'}: hidden !important;`
        : 'overflow: hidden !important;'}
        height: ${isHeightAuto
        ? 'auto'
        : `calc(100% - ${topToolsH}px - ${bottomToolH}px)`} !important;
        width: ${isWidthAuto ? 'auto' : '100%'} !important;
        display: flex;
        ${`flex-direction: ${flexDirection}`};
        ${isHeightAuto && `min-height: ${listTemplateDefaultCardSize.height}px;`};
        ${isWidthAuto && `min-width: ${listTemplateDefaultCardSize.width}px;`};
        ${isHorizon
        ? `
              ${`max-width: ${options.mexSize.maxWidth}px`};
            `
        : `
              ${`max-height: calc(${options.mexSize.maxHeight} - ${topToolsH}px - ${bottomToolH}px)`};
            `}
      }
      ${pageStyle === _config__WEBPACK_IMPORTED_MODULE_1__.PageStyle.Scroll && !scrollBarOpen
        ? `
          .widget-list-list::-webkit-scrollbar {
            display: none; //Safari and Chrome
          }
          .widget-list-list {
              -ms-overflow-style: none; //IE 10+
              overflow: -moz-scrollbars-none; //Firefox
          }
        `
        : ''}
      .placeholder-alert-con {
        position: absolute;
        bottom: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(8)};
        right: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(8)};
        z-index: 11;
      }
    }
  `;
});
function getStyle(props, isEditing, showBottomTool) {
    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;
    const { config, id, appMode, isHeightAuto, isWidthAuto, theme } = props;
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.css `
    ${'&.list-widget-' + id} {
      overflow: visible;
      background-color: transparent;
      border: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(_config__WEBPACK_IMPORTED_MODULE_1__.COMMON_PADDING)} solid ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(theme.colors.black, window.jimuConfig.isInBuilder && isEditing ? 0.2 : 0)};
      height: ${isHeightAuto ? 'auto' : '100%'};
      width: ${isWidthAuto ? 'auto' : '100%'};
      .list-with-mask {
        position: absolute;
        left: 0;
        right: 0;
        bottom: 0;
        top: 0;
        background-color: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(theme.colors.black, 0)};
        z-index: 1;
      }
      .list-toggle-button {
        background: none;
      }
      .list-loading-con {
        min-height: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(120)};
        min-width: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(160)};
      }
      .refresh-loading-con {
        right: 0;
        bottom:${showBottomTool ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(_config__WEBPACK_IMPORTED_MODULE_1__.BOTTOM_TOOL_H) : 0};
        align-items: center;
        height: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(24)};
        .auto-refresh-loading {
          background: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba((_c = (_b = (_a = theme.colors) === null || _a === void 0 ? void 0 : _a.palette) === null || _b === void 0 ? void 0 : _b.dark) === null || _c === void 0 ? void 0 : _c[100], 0.2)};
          color: ${(_d = theme.colors) === null || _d === void 0 ? void 0 : _d.black};
          font-size: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(12)};
          line-height: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(24)};
          padding: 0 ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(7)};
        }
        &.horizon-loading {
          bottom:${showBottomTool ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(_config__WEBPACK_IMPORTED_MODULE_1__.BOTTOM_TOOL_H + 6) : jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(6)};
        }
        &.vertical-loading {
          right: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(6)};
        }
      }
      .loading-con {
        @keyframes loading {
          0% {transform: rotate(0deg); };
          100% {transform: rotate(360deg)};
        }
        width: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(16)};
        height: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(16)};
        border: 1px solid ${(_g = (_f = (_e = theme === null || theme === void 0 ? void 0 : theme.colors) === null || _e === void 0 ? void 0 : _e.palette) === null || _f === void 0 ? void 0 : _f.dark) === null || _g === void 0 ? void 0 : _g[100]};
        border-radius: 50%;
        border-top: 1px solid ${(_k = (_j = (_h = theme === null || theme === void 0 ? void 0 : theme.colors) === null || _h === void 0 ? void 0 : _h.palette) === null || _j === void 0 ? void 0 : _j.dark) === null || _k === void 0 ? void 0 : _k[800]};
        box-sizing: border-box;
        animation:loading 2s infinite linear;
        margin-right: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(4)};
      }
      .widget-list {
        overflow: ${window.jimuConfig.isInBuilder && appMode !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Run
        ? 'hidden'
        : 'auto'};
        height: ${isHeightAuto ? 'auto' : '100%'};
        width: ${isWidthAuto ? 'auto' : '100%'};
        /* align-items: ${config.alignType};
        justify-content: ${config.alignType}; */
        ${config.direction === _config__WEBPACK_IMPORTED_MODULE_1__.DirectionType.Horizon
        ? `
            overflow-y: hidden;
          `
        : `
            overflow-x: hidden;
          `}
      }
    }

  `;
}
function getToolsPopperStyle(props) {
    const { theme } = props;
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.css `
    & {
      padding: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(6)} ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(11)};
      height: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(40)};
    }
    .ds-tools-line {
      width: 100%;
      height: 1px;
      background-color: ${theme.colors.palette.light[500]};
    }
    .ds-tools-line-blue {
      background-color: ${theme.colors.palette.info[500]};
    }
    .close-search {
      margin-top: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(-6)};
    }
  `;
}
function getSearchToolStyle(props) {
    const { theme } = props;
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.css `
    .close-search {
      border: 1px solid ${theme.colors.palette.light[500]};
      box-sizing: border-box;
      background-color: ${theme.colors.white};
    }
    .search-box-content {
      flex-direction: column;
      align-items: flex-start;
    }
  `;
}
function getTopToolStyle(props, showTopTools) {
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.css `
    .list-data-action {
      & {
        padding-left: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(4)};
      }
      &::after {
        content: '';
        position: absolute;
        left: 0;
        top: 50%;
        transform: translateY(-50%);
        height: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(16)};
        border-left: 1px solid ${showTopTools ? 'var(--light-400)' : 'transparent'}
      }
    }
    .m-left {
      margin-left: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(4)};
    }
  `;
}


/***/ }),

/***/ "./extensions/widgets/common/list/src/runtime/translations/default.ts":
/*!****************************************************************************!*\
  !*** ./extensions/widgets/common/list/src/runtime/translations/default.ts ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    _widgetLabel: 'List',
    _widgetDescription: 'A widget to display data in a list view.',
    _action_filter_label: 'Filter',
    _layout_REGULAR_label: 'Regular',
    _layout_HOVER_label: 'Hover',
    _layout_SELECTED_label: 'Selected',
    applyTo: 'Apply to {status}',
    listLoading: 'Loading',
    pleaseSelect: 'Please select',
    listNoData: 'No data',
    selectSortFields: 'Select sorting fields',
    clearFilter: 'Clear filter',
    isolate: 'Isolate',
    linkedToAnd: 'Linked to {where1} and {where2}',
    linkedTo: 'Linked to {where}',
    placeHolderTip: 'Please select a list template.',
    showSelected: 'Show selected',
    clearSelected: 'Clear selected',
    listSorting: 'Sorting',
    listSort: 'Sort',
    // guide
    guideStep2Title: 'Template',
    guideStep2Content: 'Click on a template and click start.',
    guideStep3Title: 'Data',
    guideStep3Content: 'Click on select data to add a data source.',
    guideStep4Title: 'Add new data',
    guideStep4Content: 'Click add new data to select a web map.',
    guideStep5Title: 'Select data',
    guideStep5Content: 'Click the feature layer in the select data panel and close the panel.',
    guideStep6Title: 'Data',
    guideStep6Content: 'Specifies the data source, allows you to filter the data and limit the number of features that appear in the list.',
    guideStep7Title: 'Arrangement',
    guideStep7Content: 'Click the expand icon to explore the Arrangement section. In here, it allows you to define the direction, height, spacing, and paging style for your list.',
    guideStep8Title: 'States',
    guideStep8Content: 'Click the expand icon to explore the available States. In this section, it provides a visual representation to communicate the state of the list items. There are three states: regular, selected, and hover. By default, the selected state is always on.',
    guideStep9Title: 'Tools',
    guideStep9Content: 'Click the expand icon to explore the available Tools. In here, you can include search, sort, filter, and show selected tools in your list.',
    guideStep10Title: 'Select image',
    guideStep10Content: 'Click the image widget to configure it in the content panel.',
    guideStep10Title2: 'Image settings',
    guideStep10Content2: 'Allows you to select the image source and other settings for your widget.',
    guideStep11Title: 'Select text',
    guideStep11Content: 'Click the text widget to add attributes in the widget toolbar.',
    guideStep11Title2: 'Text settings',
    guideStep11Content2: 'Provides the configurations and style, including adding dynamic content from the widget toolbar. ',
    guideStep12Title: 'End of tour',
    guideStep12Content: 'Add other widgets to enhance your experience.',
    clearSearch: 'Clear search',
    minimize: 'Minimize',
    topToolBack: 'Back',
    showAllListRecords: 'Show all records',
    listDataActionLabel: '{layer} list selection',
    searchResult: 'Search result'
});


/***/ }),

/***/ "./extensions/widgets/common/list/src/runtime/utils/list-service.tsx":
/*!***************************************************************************!*\
  !*** ./extensions/widgets/common/list/src/runtime/utils/list-service.tsx ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "compareQueryOptionsExceptPaging": () => (/* binding */ compareQueryOptionsExceptPaging),
/* harmony export */   "fetchSuggestionRecords": () => (/* binding */ fetchSuggestionRecords),
/* harmony export */   "getQueryOptions": () => (/* binding */ getQueryOptions)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

function getQueryOptions(state, props, pageSize) {
    var _a, _b, _c;
    const options = {
        returnGeometry: true
    };
    const { config, stateProps, useDataSources } = props;
    const { sortOptionName, searchText, currentFilter, filterApplied, datasource } = state;
    const useDS = useDataSources && useDataSources[0];
    if (!datasource || !useDS)
        return null;
    if (!datasource.query) {
        // not queryiable data source, return
        return null;
    }
    // sort
    let sortOption;
    if (config.sortOpen && config.sorts) {
        sortOption = config.sorts.find((sort) => sort.ruleOptionName === sortOptionName);
        sortOption = sortOption || config.sorts[0];
        if (!((_b = (_a = sortOption === null || sortOption === void 0 ? void 0 : sortOption.rule) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.jimuFieldName)) {
            sortOption = undefined;
        }
        if (sortOption) {
            const orderBys = [];
            sortOption.rule.forEach(sortData => {
                if (sortData.jimuFieldName) {
                    orderBys.push(`${sortData.jimuFieldName} ${sortData.order}`);
                }
            });
            options.orderByFields = orderBys;
        }
    }
    // filter
    if (config.filterOpen &&
        filterApplied &&
        config.filter &&
        currentFilter &&
        currentFilter.sql) {
        options.where = (options.where || '1=1') + ' AND ';
        options.where += `(${currentFilter.sql})`;
    }
    // action
    if (stateProps) {
        const extentMsg = stateProps === null || stateProps === void 0 ? void 0 : stateProps[jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageType.ExtentChange];
        // action-filter
        if (extentMsg) {
            options.geometry = extentMsg.queryExtent;
            if (extentMsg.querySQL) {
                options.where = (options.where || '1=1') + ' AND ';
                options.where += `(${extentMsg.querySQL})`;
            }
        }
        const selectionMsg = stateProps[jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageType.DataRecordsSelectionChange];
        if (selectionMsg && selectionMsg.querySQL) {
            options.where = (options.where || '1=1') + ' AND ';
            options.where += `(${selectionMsg.querySQL})`;
        }
    }
    if (config.searchOpen && config.searchFields && searchText) {
        options.where = (options.where || '1=1') + ' AND ';
        const searchSQL = (_c = getSQL(searchText, config, datasource)) === null || _c === void 0 ? void 0 : _c.sql;
        options.where += searchSQL;
    }
    // paging
    if (pageSize > 0) {
        options.page = state.page;
        options.pageSize = pageSize;
    }
    // Compare if query changed except paging
    const newQuery = options;
    return newQuery;
}
function fetchSuggestionRecords(searchText, config, datasource) {
    var _a;
    return __awaiter(this, void 0, void 0, function* () {
        const searchFields = config.searchFields.split(',');
        const queryParams = {
            page: 1,
            pageSize: 10,
            outFields: searchFields,
            returnDistinctValues: true
        };
        if (config.searchOpen && config.searchFields) {
            const SQL = (_a = getSQL(searchText, config, datasource, true)) === null || _a === void 0 ? void 0 : _a.sql;
            queryParams.where = SQL;
        }
        const searchReg = new RegExp(`(${searchText})`, 'gi');
        return queryRecords(queryParams, datasource).then((records) => __awaiter(this, void 0, void 0, function* () {
            let searchSuggestion = [];
            searchFields.forEach(attrName => {
                records.forEach(el => {
                    var _a;
                    const suggestionItem = (_a = el === null || el === void 0 ? void 0 : el.feature) === null || _a === void 0 ? void 0 : _a.attributes[attrName];
                    if (suggestionItem &&
                        !searchSuggestion.includes(suggestionItem) &&
                        suggestionItem.match(searchReg)) {
                        const suggestion = {
                            suggestionHtml: getSuggestionItem(suggestionItem, searchText),
                            suggestion: suggestionItem
                        };
                        searchSuggestion.push(suggestion);
                    }
                });
            });
            searchSuggestion = uniqueJson(searchSuggestion, 'suggestion');
            return Promise.resolve(searchSuggestion);
        }));
    });
}
function uniqueJson(jsonArr, key) {
    const result = jsonArr[0] ? [jsonArr[0]] : [];
    for (let i = 1; i < jsonArr.length; i++) {
        const item = jsonArr[i];
        let repeat = false;
        for (let j = 0; j < result.length; j++) {
            if (item[key] === result[j][key]) {
                repeat = true;
                break;
            }
        }
        if (!repeat) {
            result.push(item);
        }
    }
    return result;
}
function getSQL(searchText, config, datasource, fetchSuggestion = false) {
    const searchFields = config.searchFields.split(',');
    const searchExact = fetchSuggestion ? false : config.searchExact;
    const clauseOperator = searchExact ? jimu_core__WEBPACK_IMPORTED_MODULE_0__.ClauseOperator.StringOperatorIs : jimu_core__WEBPACK_IMPORTED_MODULE_0__.ClauseOperator.StringOperatorContains;
    if (config.searchOpen && config.searchFields) {
        const clauses = searchFields.map(field => {
            return jimu_core__WEBPACK_IMPORTED_MODULE_0__.dataSourceUtils.createSQLClause(field, clauseOperator, searchText);
        });
        const sqlExpression = jimu_core__WEBPACK_IMPORTED_MODULE_0__.dataSourceUtils.createSQLExpression(jimu_core__WEBPACK_IMPORTED_MODULE_0__.ClauseLogic.Or, clauses);
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.dataSourceUtils.getArcGISSQL(sqlExpression, datasource);
    }
}
function getSuggestionItem(suggestion, searchText) {
    if (!searchText)
        return suggestion;
    const replaceReg = new RegExp(`(${searchText})`, 'gi');
    return suggestion.replace(replaceReg, '<strong >$1</strong>');
}
function queryRecords(q, ds) {
    return __awaiter(this, void 0, void 0, function* () {
        if (!ds)
            return yield Promise.resolve([]);
        return yield ds
            .query(q, { scope: jimu_core__WEBPACK_IMPORTED_MODULE_0__.QueryScope.InRuntimeView })
            .then((queryResult) => __awaiter(this, void 0, void 0, function* () { return yield queryRecordsResult(q, queryResult); }));
    });
}
function queryRecordsResult(q, queryResult) {
    return __awaiter(this, void 0, void 0, function* () {
        return yield Promise.resolve((queryResult === null || queryResult === void 0 ? void 0 : queryResult.records) || []);
    });
}
function compareQueryOptionsExceptPaging(query1, query2, datasource) {
    // const isEqual = true;
    if (!datasource)
        return false;
    query1 = datasource.getRealQueryParams(query1, 'query');
    query2 = datasource.getRealQueryParams(query2, 'query');
    if (!query1 || !query2) {
        return false;
    }
    delete query1.page;
    delete query1.pageSize;
    delete query1.resultOffset;
    delete query1.resultRecordCount;
    delete query2.page;
    delete query2.pageSize;
    delete query2.resultOffset;
    delete query2.resultRecordCount;
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.utils.isDeepEqual(query1, query2);
}


/***/ }),

/***/ "./extensions/widgets/common/list/src/runtime/utils/utils.tsx":
/*!********************************************************************!*\
  !*** ./extensions/widgets/common/list/src/runtime/utils/utils.tsx ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "checkIsShowDataAction": () => (/* binding */ checkIsShowDataAction),
/* harmony export */   "checkIsShowListToolsOnly": () => (/* binding */ checkIsShowListToolsOnly),
/* harmony export */   "createOutputDs": () => (/* binding */ createOutputDs),
/* harmony export */   "getBottomToolH": () => (/* binding */ getBottomToolH),
/* harmony export */   "getCardSizeConfig": () => (/* binding */ getCardSizeConfig),
/* harmony export */   "getCardSizeNumberInConfig": () => (/* binding */ getCardSizeNumberInConfig),
/* harmony export */   "getCardSizeWidthUnitInConfig": () => (/* binding */ getCardSizeWidthUnitInConfig),
/* harmony export */   "getDefaultMinListSize": () => (/* binding */ getDefaultMinListSize),
/* harmony export */   "getListHeight": () => (/* binding */ getListHeight),
/* harmony export */   "getPageSize": () => (/* binding */ getPageSize),
/* harmony export */   "intersectionObserver": () => (/* binding */ intersectionObserver),
/* harmony export */   "isDsConfigured": () => (/* binding */ isDsConfigured),
/* harmony export */   "isEqualCardSizeByListLayout": () => (/* binding */ isEqualCardSizeByListLayout),
/* harmony export */   "isEqualNumber": () => (/* binding */ isEqualNumber),
/* harmony export */   "isScrollStart": () => (/* binding */ isScrollStart),
/* harmony export */   "showBottomTools": () => (/* binding */ showBottomTools),
/* harmony export */   "showClearSelected": () => (/* binding */ showClearSelected),
/* harmony export */   "showDisplaySelectedOnly": () => (/* binding */ showDisplaySelectedOnly),
/* harmony export */   "showFilter": () => (/* binding */ showFilter),
/* harmony export */   "showSearch": () => (/* binding */ showSearch),
/* harmony export */   "showSort": () => (/* binding */ showSort),
/* harmony export */   "showTopTools": () => (/* binding */ showTopTools)
/* harmony export */ });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../config */ "./extensions/widgets/common/list/src/config.ts");
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");



function isScrollStart(listDiv, lastScrollOffset) {
    if (!listDiv)
        return true;
    const scrollTOrL = lastScrollOffset;
    const isStart = scrollTOrL < 2;
    return isStart;
}
function isEqualCardSizeByListLayout(cardSize1, cardSize2, layoutType) {
    if (layoutType === _config__WEBPACK_IMPORTED_MODULE_0__.ListLayoutType.Column) {
        return isEqualNumber(cardSize1.width, cardSize2.width);
    }
    else if (layoutType === _config__WEBPACK_IMPORTED_MODULE_0__.ListLayoutType.Row) {
        return isEqualNumber(cardSize1.height, cardSize2.height);
    }
    else {
        return isEqualNumber(cardSize1.width, cardSize2.width) && isEqualNumber(cardSize1.height, cardSize2.height);
    }
}
function isEqualNumber(num1, num2) {
    if (Math.abs(num1 - num2) < 0.0001) {
        return true;
    }
    else {
        return false;
    }
}
function createOutputDs(records, outputDsId, useDs) {
    if (!outputDsId || !useDs)
        return;
    const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_1__.DataSourceManager.getInstance();
    if (dsManager.getDataSource(outputDsId)) {
        if (dsManager.getDataSource(outputDsId).getDataSourceJson()
            .originDataSources[0].dataSourceId !== useDs.dataSourceId) {
            dsManager.destroyDataSource(outputDsId);
            dsManager.createDataSource(outputDsId).then(ods => {
                ods.setRecords(records);
            });
        }
        else {
            const ods = dsManager.getDataSource(outputDsId);
            ods.setRecords(records);
        }
    }
    else {
        dsManager.createDataSource(outputDsId).then(ods => {
            ods.setRecords(records);
        });
    }
}
function getCardSizeNumberInConfig(props, widgetRect) {
    const { config } = props;
    const cardSizeInConfig = getCardSizeConfig(props);
    const widthLinearUnit = jimu_ui__WEBPACK_IMPORTED_MODULE_2__.utils.toLinearUnit(cardSizeInConfig.width);
    let width = initCardSize(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.utils.toLinearUnit(cardSizeInConfig.width), widgetRect.width);
    //The width in percentage includes space, the width in px does not include
    if (widthLinearUnit.unit === jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DistanceUnits.PERCENTAGE) {
        width = (width - config.horizontalSpace) > 0 ? width - config.horizontalSpace : _config__WEBPACK_IMPORTED_MODULE_0__.LIST_CARD_MIN_SIZE;
    }
    const cardSize = {
        width: width,
        height: initCardSize(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.utils.toLinearUnit(cardSizeInConfig.height), widgetRect.height)
    };
    return cardSize;
}
function getCardSizeConfig(props) {
    var _a;
    const { config, builderStatus, browserSizeMode } = props;
    let cardConfigs = config === null || config === void 0 ? void 0 : config.asMutable({ deep: true }).cardConfigs[builderStatus];
    if (!cardConfigs || !cardConfigs.cardSize) {
        cardConfigs = config === null || config === void 0 ? void 0 : config.asMutable({ deep: true }).cardConfigs[_config__WEBPACK_IMPORTED_MODULE_0__.Status.Regular];
    }
    let cardSizeInConfig = (_a = cardConfigs === null || cardConfigs === void 0 ? void 0 : cardConfigs.cardSize) === null || _a === void 0 ? void 0 : _a[browserSizeMode];
    if (!cardSizeInConfig) {
        cardSizeInConfig = cardConfigs.cardSize[Object.keys(cardConfigs.cardSize)[0]];
    }
    return cardSizeInConfig;
}
function getDefaultMinListSize(props) {
    const cardSizeInConfig = getCardSizeConfig(props);
    const listMinSize = {
        width: _config__WEBPACK_IMPORTED_MODULE_0__.LIST_CARD_MIN_SIZE,
        height: _config__WEBPACK_IMPORTED_MODULE_0__.LIST_CARD_MIN_SIZE
    };
    const cardSizeUnit = {
        width: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.utils.toLinearUnit(cardSizeInConfig.width),
        height: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.utils.toLinearUnit(cardSizeInConfig.height)
    };
    if (cardSizeUnit.width.unit === jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DistanceUnits.PERCENTAGE) {
        listMinSize.width = (_config__WEBPACK_IMPORTED_MODULE_0__.LIST_CARD_MIN_SIZE + 30) / cardSizeUnit.width.distance * 100;
    }
    if (cardSizeUnit.height.unit === jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DistanceUnits.PERCENTAGE) {
        listMinSize.height = (_config__WEBPACK_IMPORTED_MODULE_0__.LIST_CARD_MIN_SIZE + 30) / cardSizeUnit.height.distance * 100;
    }
    return listMinSize;
}
function getCardSizeWidthUnitInConfig(props) {
    const { config } = props;
    const cardSizeInConfig = getCardSizeConfig(props);
    const width = jimu_ui__WEBPACK_IMPORTED_MODULE_2__.utils.toLinearUnit(cardSizeInConfig.width);
    if (width.unit === jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DistanceUnits.PERCENTAGE) {
        width.distance = (width.distance - config.horizontalSpace) > 0 ? width.distance - config.horizontalSpace : _config__WEBPACK_IMPORTED_MODULE_0__.LIST_CARD_MIN_SIZE;
    }
    const cardSizeWidthUnit = {
        width: width,
        height: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.utils.toLinearUnit(cardSizeInConfig.height)
    };
    return cardSizeWidthUnit;
}
function initCardSize(sizeUnit, widgetSize) {
    if (sizeUnit.unit === jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DistanceUnits.PERCENTAGE) {
        return (sizeUnit.distance / 100) * widgetSize;
    }
    else {
        return sizeUnit.distance;
    }
}
function getPageSize(widgetRect, listHeight, props, columnCount) {
    const cardSize = getCardSizeNumberInConfig(props, widgetRect);
    const { config, isHeightAuto, isWidthAuto } = props;
    let pageSize;
    if (config.pageStyle === _config__WEBPACK_IMPORTED_MODULE_0__.PageStyle.Scroll) {
        if (!widgetRect) {
            return 0;
        }
        switch (config === null || config === void 0 ? void 0 : config.layoutType) {
            case _config__WEBPACK_IMPORTED_MODULE_0__.ListLayoutType.Row:
                if (widgetRect.height === 0)
                    return 0;
                if (isHeightAuto) {
                    listHeight = document.body.scrollHeight;
                }
                pageSize = Math.ceil(listHeight / (cardSize.height + config.space)) + 1;
                break;
            case _config__WEBPACK_IMPORTED_MODULE_0__.ListLayoutType.Column:
                if (widgetRect.width === 0)
                    return 0;
                let listWidth = widgetRect.width;
                if (isWidthAuto) {
                    listWidth = document.body.scrollWidth;
                }
                pageSize = Math.ceil(listWidth / (cardSize.width + config.space)) + 1;
                break;
            case _config__WEBPACK_IMPORTED_MODULE_0__.ListLayoutType.GRID:
                if (widgetRect.height === 0)
                    return 0;
                if (isHeightAuto) {
                    listHeight = document.body.scrollHeight;
                }
                pageSize = Math.ceil(listHeight / (cardSize.height + config.space)) * columnCount;
                break;
        }
        if (config.navigatorOpen) {
            pageSize = Math.max(pageSize, config.scrollStep);
        }
    }
    else {
        pageSize = config.itemsPerPage;
    }
    return pageSize;
}
function getBottomToolH(paginatorDiv, showBottomTools) {
    let bottomToolH = _config__WEBPACK_IMPORTED_MODULE_0__.BOTTOM_TOOL_H;
    if (paginatorDiv) {
        bottomToolH = paginatorDiv.clientHeight;
    }
    bottomToolH = showBottomTools ? bottomToolH : 0;
    return bottomToolH;
}
function getListHeight(widgetRect, bottomToolH, showTopTool) {
    const dsToolH = showTopTool ? _config__WEBPACK_IMPORTED_MODULE_0__.DS_TOOL_H : 0;
    if (!widgetRect)
        return 0;
    const height = widgetRect.height - dsToolH - bottomToolH;
    return height < 0 ? 0 : height;
}
function showBottomTools(props, state) {
    const { config } = props;
    const { datasource } = state;
    return (!!datasource &&
        !(config.pageStyle === _config__WEBPACK_IMPORTED_MODULE_0__.PageStyle.Scroll && !config.navigatorOpen));
}
function showTopTools(props) {
    return (checkIsShowListToolsOnly(props) || checkIsShowDataAction(props));
}
function checkIsShowListToolsOnly(props) {
    return (showSort(props) ||
        showDisplaySelectedOnly(props) ||
        showClearSelected(props) ||
        showFilter(props) ||
        showSearch(props));
}
function isDsConfigured(props) {
    const { useDataSources } = props;
    return !!useDataSources && !!useDataSources[0];
}
function checkIsShowDataAction(props) {
    var _a, _b, _c;
    const { id } = props;
    const appConfig = (_b = (_a = (0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.getAppStore)()) === null || _a === void 0 ? void 0 : _a.getState()) === null || _b === void 0 ? void 0 : _b.appConfig;
    const widgetJson = (_c = appConfig === null || appConfig === void 0 ? void 0 : appConfig.widgets) === null || _c === void 0 ? void 0 : _c[id];
    const enableDataAction = (widgetJson === null || widgetJson === void 0 ? void 0 : widgetJson.enableDataAction) === undefined ? true : widgetJson === null || widgetJson === void 0 ? void 0 : widgetJson.enableDataAction;
    return enableDataAction && isDsConfigured(props);
}
function showSort(props) {
    const { config } = props;
    if (!config.sortOpen || !config.sorts || config.sorts.length < 1)
        return false;
    const sorts = config.sorts;
    let isValid = false;
    sorts.some((sort) => {
        sort.rule &&
            sort.rule.some(sortData => {
                if (sortData && !!sortData.jimuFieldName) {
                    isValid = true;
                }
                return isValid;
            });
        return isValid;
    });
    return isValid;
}
function showSearch(props) {
    const { config } = props;
    return config.searchOpen && config.searchFields && config.searchFields !== '';
}
function showFilter(props) {
    const { config } = props;
    return config.filterOpen && !!config.filter;
}
function showDisplaySelectedOnly(props) {
    const { config } = props;
    return (config.showSelectedOnlyOpen &&
        config.cardConfigs[_config__WEBPACK_IMPORTED_MODULE_0__.Status.Selected].selectionMode !== _config__WEBPACK_IMPORTED_MODULE_0__.SelectionModeType.None);
}
function showClearSelected(props) {
    const { config } = props;
    return (config.showClearSelected &&
        config.cardConfigs[_config__WEBPACK_IMPORTED_MODULE_0__.Status.Selected].selectionMode !== _config__WEBPACK_IMPORTED_MODULE_0__.SelectionModeType.None);
}
function intersectionObserver(ref, rootElement, onChange, options) {
    const option = options || { root: rootElement };
    const callback = function (entries, observer) {
        const isIn = entries[0].intersectionRatio > 0;
        onChange && onChange(isIn);
    };
    const observer = new IntersectionObserver(callback, option);
    observer.observe(ref);
    return observer;
}


/***/ }),

/***/ "./extensions/widgets/common/list/src/version-manager.ts":
/*!***************************************************************!*\
  !*** ./extensions/widgets/common/list/src/version-manager.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "versionManager": () => (/* binding */ versionManager)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui/basic/sql-expression-runtime */ "jimu-ui/basic/sql-expression-runtime");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./config */ "./extensions/widgets/common/list/src/config.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const getDs = function (filter, widgetId) {
    var _a, _b, _c, _d;
    return __awaiter(this, void 0, void 0, function* () {
        let ds;
        const dataSource = (_d = (_c = (_b = (_a = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState()) === null || _a === void 0 ? void 0 : _a.appConfig) === null || _b === void 0 ? void 0 : _b.widgets[widgetId]) === null || _c === void 0 ? void 0 : _c.useDataSources) === null || _d === void 0 ? void 0 : _d[0];
        const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceManager.getInstance();
        if (filter && dataSource) {
            ds = dsManager.createDataSourceByUseDataSource(Object.assign({}, dataSource, {
                mainDataSourceId: dataSource.mainDataSourceId
            }), 'localId');
        }
        return yield Promise.resolve(ds);
    });
};
const checkIsShowAutoRefreshSetting = (datasource) => {
    if (!datasource)
        return false;
    const interval = (datasource === null || datasource === void 0 ? void 0 : datasource.getAutoRefreshInterval()) || 0;
    return interval > 0;
};
class VersionManager extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.BaseVersionManager {
    constructor() {
        super(...arguments);
        this.versions = [
            {
                version: '1.1.0',
                description: '',
                upgrader: (oldConfig, id) => __awaiter(this, void 0, void 0, function* () {
                    const filter = oldConfig.filter;
                    return yield getDs(filter, id).then(ds => {
                        let newConfig = oldConfig;
                        const newFItems = filter
                            ? (0,jimu_ui_basic_sql_expression_runtime__WEBPACK_IMPORTED_MODULE_1__.updateSQLExpressionByVersion)(filter, '1.1.0', ds)
                            : null;
                        newConfig = newConfig.set('filter', newFItems);
                        return newConfig;
                    });
                })
            },
            {
                version: '1.5.0',
                description: '1.5.0',
                upgrader: (oldConfig, id) => __awaiter(this, void 0, void 0, function* () {
                    const filter = oldConfig.filter;
                    return yield getDs(filter, id).then(ds => {
                        let newConfig = oldConfig;
                        if (typeof (oldConfig === null || oldConfig === void 0 ? void 0 : oldConfig.isShowAutoRefresh) !== 'boolean') {
                            const isShowAutoRefresh = checkIsShowAutoRefreshSetting(ds);
                            newConfig = newConfig.set('isShowAutoRefresh', isShowAutoRefresh);
                        }
                        return newConfig;
                    });
                })
            },
            {
                version: '1.8.0',
                description: '1.8.0',
                upgrader: (oldConfig, id) => __awaiter(this, void 0, void 0, function* () {
                    let newConfig = oldConfig;
                    if ((oldConfig === null || oldConfig === void 0 ? void 0 : oldConfig.direction) && !(oldConfig === null || oldConfig === void 0 ? void 0 : oldConfig.layoutType)) {
                        const layoutType = (oldConfig === null || oldConfig === void 0 ? void 0 : oldConfig.direction) === _config__WEBPACK_IMPORTED_MODULE_2__.DirectionType.Horizon ? _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Column : _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Row;
                        newConfig = newConfig.set('layoutType', layoutType).set('keepAspectRatio', false);
                    }
                    return newConfig;
                })
            }
        ];
    }
}
const versionManager = new VersionManager();


/***/ }),

/***/ "./jimu-icons/outlined/brand/widget-filter.tsx":
/*!*****************************************************!*\
  !*** ./jimu-icons/outlined/brand/widget-filter.tsx ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WidgetFilterOutlined": () => (/* binding */ WidgetFilterOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _svg_outlined_brand_widget_filter_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/brand/widget-filter.svg */ "./jimu-icons/svg/outlined/brand/widget-filter.svg");
/* harmony import */ var _svg_outlined_brand_widget_filter_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_brand_widget_filter_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const WidgetFilterOutlined = (props) => {
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.SVG, Object.assign({ className: classes, src: (_svg_outlined_brand_widget_filter_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/arrow-left.tsx":
/*!********************************************************!*\
  !*** ./jimu-icons/outlined/directional/arrow-left.tsx ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ArrowLeftOutlined": () => (/* binding */ ArrowLeftOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/directional/arrow-left.svg */ "./jimu-icons/svg/outlined/directional/arrow-left.svg");
/* harmony import */ var _svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const ArrowLeftOutlined = (props) => {
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_arrow_left_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/down.tsx":
/*!**************************************************!*\
  !*** ./jimu-icons/outlined/directional/down.tsx ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DownOutlined": () => (/* binding */ DownOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _svg_outlined_directional_down_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/directional/down.svg */ "./jimu-icons/svg/outlined/directional/down.svg");
/* harmony import */ var _svg_outlined_directional_down_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_down_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const DownOutlined = (props) => {
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_down_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/left.tsx":
/*!**************************************************!*\
  !*** ./jimu-icons/outlined/directional/left.tsx ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "LeftOutlined": () => (/* binding */ LeftOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _svg_outlined_directional_left_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/directional/left.svg */ "./jimu-icons/svg/outlined/directional/left.svg");
/* harmony import */ var _svg_outlined_directional_left_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_left_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const LeftOutlined = (props) => {
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_left_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/right.tsx":
/*!***************************************************!*\
  !*** ./jimu-icons/outlined/directional/right.tsx ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RightOutlined": () => (/* binding */ RightOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/directional/right.svg */ "./jimu-icons/svg/outlined/directional/right.svg");
/* harmony import */ var _svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const RightOutlined = (props) => {
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_right_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/up.tsx":
/*!************************************************!*\
  !*** ./jimu-icons/outlined/directional/up.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "UpOutlined": () => (/* binding */ UpOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _svg_outlined_directional_up_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/directional/up.svg */ "./jimu-icons/svg/outlined/directional/up.svg");
/* harmony import */ var _svg_outlined_directional_up_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_up_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const UpOutlined = (props) => {
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_up_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/editor/close.tsx":
/*!**********************************************!*\
  !*** ./jimu-icons/outlined/editor/close.tsx ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CloseOutlined": () => (/* binding */ CloseOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _svg_outlined_editor_close_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/editor/close.svg */ "./jimu-icons/svg/outlined/editor/close.svg");
/* harmony import */ var _svg_outlined_editor_close_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_editor_close_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const CloseOutlined = (props) => {
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.SVG, Object.assign({ className: classes, src: (_svg_outlined_editor_close_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/editor/menu.tsx":
/*!*********************************************!*\
  !*** ./jimu-icons/outlined/editor/menu.tsx ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MenuOutlined": () => (/* binding */ MenuOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _svg_outlined_editor_menu_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/editor/menu.svg */ "./jimu-icons/svg/outlined/editor/menu.svg");
/* harmony import */ var _svg_outlined_editor_menu_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_editor_menu_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const MenuOutlined = (props) => {
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.SVG, Object.assign({ className: classes, src: (_svg_outlined_editor_menu_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/editor/reset.tsx":
/*!**********************************************!*\
  !*** ./jimu-icons/outlined/editor/reset.tsx ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ResetOutlined": () => (/* binding */ ResetOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _svg_outlined_editor_reset_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/editor/reset.svg */ "./jimu-icons/svg/outlined/editor/reset.svg");
/* harmony import */ var _svg_outlined_editor_reset_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_editor_reset_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const ResetOutlined = (props) => {
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.SVG, Object.assign({ className: classes, src: (_svg_outlined_editor_reset_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/editor/search.tsx":
/*!***********************************************!*\
  !*** ./jimu-icons/outlined/editor/search.tsx ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SearchOutlined": () => (/* binding */ SearchOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _svg_outlined_editor_search_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/editor/search.svg */ "./jimu-icons/svg/outlined/editor/search.svg");
/* harmony import */ var _svg_outlined_editor_search_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_editor_search_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const SearchOutlined = (props) => {
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.SVG, Object.assign({ className: classes, src: (_svg_outlined_editor_search_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/editor/show-selection.tsx":
/*!*******************************************************!*\
  !*** ./jimu-icons/outlined/editor/show-selection.tsx ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ShowSelectionOutlined": () => (/* binding */ ShowSelectionOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _svg_outlined_editor_show_selection_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/editor/show-selection.svg */ "./jimu-icons/svg/outlined/editor/show-selection.svg");
/* harmony import */ var _svg_outlined_editor_show_selection_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_editor_show_selection_svg__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _svg_outlined_editor_show_selection_rtl_svg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../svg/outlined/editor/show-selection--rtl.svg */ "./jimu-icons/svg/outlined/editor/show-selection--rtl.svg");
/* harmony import */ var _svg_outlined_editor_show_selection_rtl_svg__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_editor_show_selection_rtl_svg__WEBPACK_IMPORTED_MODULE_3__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};




const ShowSelectionOutlined = (props) => {
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component has-rtl-svg', className);
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.SVG, Object.assign({ className: classes, src: (_svg_outlined_editor_show_selection_svg__WEBPACK_IMPORTED_MODULE_2___default()), srcRTL: (_svg_outlined_editor_show_selection_rtl_svg__WEBPACK_IMPORTED_MODULE_3___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/editor/sync-off.tsx":
/*!*************************************************!*\
  !*** ./jimu-icons/outlined/editor/sync-off.tsx ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SyncOffOutlined": () => (/* binding */ SyncOffOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _svg_outlined_editor_sync_off_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/editor/sync-off.svg */ "./jimu-icons/svg/outlined/editor/sync-off.svg");
/* harmony import */ var _svg_outlined_editor_sync_off_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_editor_sync_off_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const SyncOffOutlined = (props) => {
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.SVG, Object.assign({ className: classes, src: (_svg_outlined_editor_sync_off_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/editor/sync-on.tsx":
/*!************************************************!*\
  !*** ./jimu-icons/outlined/editor/sync-on.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SyncOnOutlined": () => (/* binding */ SyncOnOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _svg_outlined_editor_sync_on_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/editor/sync-on.svg */ "./jimu-icons/svg/outlined/editor/sync-on.svg");
/* harmony import */ var _svg_outlined_editor_sync_on_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_editor_sync_on_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const SyncOnOutlined = (props) => {
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.SVG, Object.assign({ className: classes, src: (_svg_outlined_editor_sync_on_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/editor/trash-check.tsx":
/*!****************************************************!*\
  !*** ./jimu-icons/outlined/editor/trash-check.tsx ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TrashCheckOutlined": () => (/* binding */ TrashCheckOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _svg_outlined_editor_trash_check_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/editor/trash-check.svg */ "./jimu-icons/svg/outlined/editor/trash-check.svg");
/* harmony import */ var _svg_outlined_editor_trash_check_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_editor_trash_check_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const TrashCheckOutlined = (props) => {
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.SVG, Object.assign({ className: classes, src: (_svg_outlined_editor_trash_check_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/suggested/warning.tsx":
/*!***************************************************!*\
  !*** ./jimu-icons/outlined/suggested/warning.tsx ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WarningOutlined": () => (/* binding */ WarningOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../svg/outlined/suggested/warning.svg */ "./jimu-icons/svg/outlined/suggested/warning.svg");
/* harmony import */ var _svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_2__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



const WarningOutlined = (props) => {
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.SVG, Object.assign({ className: classes, src: (_svg_outlined_suggested_warning_svg__WEBPACK_IMPORTED_MODULE_2___default()) }, others));
};


/***/ }),

/***/ "jimu-core":
/*!****************************!*\
  !*** external "jimu-core" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_core__;

/***/ }),

/***/ "react":
/*!**********************************!*\
  !*** external "jimu-core/react" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_react__;

/***/ }),

/***/ "jimu-layouts/layout-runtime":
/*!**********************************************!*\
  !*** external "jimu-layouts/layout-runtime" ***!
  \**********************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__;

/***/ }),

/***/ "jimu-ui":
/*!**************************!*\
  !*** external "jimu-ui" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_ui__;

/***/ }),

/***/ "jimu-ui/basic/sql-expression-runtime":
/*!*******************************************************!*\
  !*** external "jimu-ui/basic/sql-expression-runtime" ***!
  \*******************************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_ui_basic_sql_expression_runtime__;

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _assertThisInitialized)
/* harmony export */ });
function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/extends.js":
/*!************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/extends.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _extends)
/* harmony export */ });
function _extends() {
  _extends = Object.assign ? Object.assign.bind() : function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };
  return _extends.apply(this, arguments);
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js":
/*!******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _inheritsLoose)
/* harmony export */ });
/* harmony import */ var _setPrototypeOf_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./setPrototypeOf.js */ "./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js");

function _inheritsLoose(subClass, superClass) {
  subClass.prototype = Object.create(superClass.prototype);
  subClass.prototype.constructor = subClass;
  (0,_setPrototypeOf_js__WEBPACK_IMPORTED_MODULE_0__["default"])(subClass, superClass);
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _objectWithoutPropertiesLoose)
/* harmony export */ });
function _objectWithoutPropertiesLoose(source, excluded) {
  if (source == null) return {};
  var target = {};
  var sourceKeys = Object.keys(source);
  var key, i;

  for (i = 0; i < sourceKeys.length; i++) {
    key = sourceKeys[i];
    if (excluded.indexOf(key) >= 0) continue;
    target[key] = source[key];
  }

  return target;
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _setPrototypeOf)
/* harmony export */ });
function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };
  return _setPrototypeOf(o, p);
}

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/publicPath */
/******/ 	(() => {
/******/ 		__webpack_require__.p = "";
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other entry modules.
(() => {
/*!******************************************!*\
  !*** ./jimu-core/lib/set-public-path.ts ***!
  \******************************************/
/**
 * Webpack will replace __webpack_public_path__ with __webpack_require__.p to set the public path dynamically.
 * The reason why we can't set the publicPath in webpack config is: we change the publicPath when download.
 * */
// eslint-disable-next-line
// @ts-ignore
__webpack_require__.p = window.jimuConfig.baseUrl;

})();

// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";
/*!***************************************************************!*\
  !*** ./extensions/widgets/common/list/src/runtime/widget.tsx ***!
  \***************************************************************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Widget": () => (/* binding */ Widget),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config */ "./extensions/widgets/common/list/src/config.ts");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _utils_list_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utils/list-service */ "./extensions/widgets/common/list/src/runtime/utils/list-service.tsx");
/* harmony import */ var _styles_style__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./styles/style */ "./extensions/widgets/common/list/src/runtime/styles/style.tsx");
/* harmony import */ var _components_list_card_editor__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./components/list-card-editor */ "./extensions/widgets/common/list/src/runtime/components/list-card-editor.tsx");
/* harmony import */ var _components_list_card_viewer__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./components/list-card-viewer */ "./extensions/widgets/common/list/src/runtime/components/list-card-viewer.tsx");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./translations/default */ "./extensions/widgets/common/list/src/runtime/translations/default.ts");
/* harmony import */ var _components_search_box__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./components/search-box */ "./extensions/widgets/common/list/src/runtime/components/search-box.tsx");
/* harmony import */ var react_window__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! react-window */ "./node_modules/react-window/dist/index.esm.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var _components_my_dropdown__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./components/my-dropdown */ "./extensions/widgets/common/list/src/runtime/components/my-dropdown.tsx");
/* harmony import */ var _components_filter_picker__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./components/filter-picker */ "./extensions/widgets/common/list/src/runtime/components/filter-picker.tsx");
/* harmony import */ var _components_bottom_tools__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./components/bottom-tools */ "./extensions/widgets/common/list/src/runtime/components/bottom-tools.tsx");
/* harmony import */ var _version_manager__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../version-manager */ "./extensions/widgets/common/list/src/version-manager.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./utils/utils */ "./extensions/widgets/common/list/src/runtime/utils/utils.tsx");
/* harmony import */ var jimu_icons_outlined_editor_menu__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! jimu-icons/outlined/editor/menu */ "./jimu-icons/outlined/editor/menu.tsx");
/* harmony import */ var jimu_icons_outlined_editor_search__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! jimu-icons/outlined/editor/search */ "./jimu-icons/outlined/editor/search.tsx");
/* harmony import */ var jimu_icons_outlined_editor_show_selection__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! jimu-icons/outlined/editor/show-selection */ "./jimu-icons/outlined/editor/show-selection.tsx");
/* harmony import */ var jimu_icons_outlined_editor_trash_check__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! jimu-icons/outlined/editor/trash-check */ "./jimu-icons/outlined/editor/trash-check.tsx");
/* harmony import */ var jimu_icons_outlined_suggested_warning__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! jimu-icons/outlined/suggested/warning */ "./jimu-icons/outlined/suggested/warning.tsx");
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
/** @jsx jsx */






















const defaultRecordsItem = { fake: true };
const MESSAGES = Object.assign({}, _translations_default__WEBPACK_IMPORTED_MODULE_8__["default"], jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages);
class Widget extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.isFirstLoad = true;
        this.isHasScrolled = false; /* Whether the List has scrolled */
        this.isHasRenderList = false;
        this.isHasPublishMessageAction = false;
        this.isSetlayout = false;
        this.isHasInitCurrentCardSize = false;
        this.updateWidgetRectTimeout = undefined;
        this.resetAfterIndices = () => {
            var _a, _b, _c, _d;
            ((_b = (_a = this.listRef) === null || _a === void 0 ? void 0 : _a.current) === null || _b === void 0 ? void 0 : _b.resetAfterIndices) && ((_d = (_c = this.listRef) === null || _c === void 0 ? void 0 : _c.current) === null || _d === void 0 ? void 0 : _d.resetAfterIndices({
                columnIndex: 0,
                rowIndex: 0,
                shouldForceUpdate: false
            }));
        };
        this.setListLayoutInWidgetState = () => {
            const { layoutId, layoutItemId, id, selectionIsSelf } = this.props;
            if (layoutId && id && layoutItemId && !this.isSetlayout && selectionIsSelf) {
                this.props.dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.widgetStatePropChange(id, 'layoutInfo', {
                    layoutId,
                    layoutItemId
                }));
                this.isSetlayout = true;
            }
        };
        this.setListParentSizeInWidgetState = () => {
            const { browserSizeMode, id, parentSize, layoutId } = this.props;
            const appConfig = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig;
            const viewportSize = jimu_core__WEBPACK_IMPORTED_MODULE_0__.utils.findViewportSize(appConfig, browserSizeMode);
            const selector = `div.layout[data-layoutid=${layoutId}]`;
            const parentElement = document.querySelector(selector);
            const newParentSize = {
                width: (parentElement === null || parentElement === void 0 ? void 0 : parentElement.clientWidth) || viewportSize.width,
                height: (parentElement === null || parentElement === void 0 ? void 0 : parentElement.clientHeight) || viewportSize.height
            };
            if (!parentSize || parentSize.height !== newParentSize.height || parentSize.width !== newParentSize.width) {
                this.props.dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.widgetStatePropChange(id, 'parentSize', newParentSize));
            }
        };
        this.getBodySize = () => {
            this.bodySize = {
                scrollWidth: document.documentElement.scrollWidth,
                scrollHeight: document.documentElement.scrollHeight,
                clientWidth: document.documentElement.clientWidth,
                clientHeight: document.documentElement.clientHeight
            };
        };
        this.updateListInBuilder = (preProps, preState) => {
            var _a;
            const { config } = this.props;
            if (!window.jimuConfig.isInBuilder) {
                return false;
            }
            const currentCardSize = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getCardSizeNumberInConfig(this.props, (_a = this.state) === null || _a === void 0 ? void 0 : _a.widgetRect);
            // listen layout properties change and then update list
            let hideCardTool = this.layoutPropertiesChange(preProps, preState);
            this.updateScrollContentSize(preProps.config);
            // listen paging type change
            this.pageTypeChange(preProps);
            // listen useDatasources change
            this.useDatasourcesChange(preProps);
            // listening listDiv size's change
            hideCardTool = this.listDivSizeChange(preProps, preState, currentCardSize, hideCardTool);
            if (hideCardTool) {
                this.updateCardToolPosition();
            }
            // listen sort change
            this.listSortChange(preProps);
            // listen filter change
            this.listFilterChange(preProps);
            const isSelectionModeChange = config.cardConfigs[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Selected].selectionMode !==
                preProps.config.cardConfigs[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Selected].selectionMode;
            if (isSelectionModeChange) {
                this.selectRecords([]);
            }
        };
        this.layoutPropertiesChange = (preProps, preState) => {
            var _a, _b;
            const { config, top, left } = this.props;
            let hideCardTool = false;
            if (!window.jimuConfig.isInBuilder) {
                return false;
            }
            let refreshList = false;
            // listen layout properties change and then update list
            const currentCardSize = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getCardSizeNumberInConfig(this.props, this.state.widgetRect);
            const oldCardSize = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getCardSizeNumberInConfig(preProps, preState === null || preState === void 0 ? void 0 : preState.widgetRect);
            this.updateScrollContentSize(preProps.config);
            const isWidgetPositionChange = top !== preProps.top || left !== preProps.left;
            const isListLayoutChange = (config === null || config === void 0 ? void 0 : config.layoutType) !== preProps.config.layoutType;
            const isEqualCardSizeByListLayout = !_utils_utils__WEBPACK_IMPORTED_MODULE_15__.isEqualCardSizeByListLayout(oldCardSize, currentCardSize, config.layoutType); // for change template
            if (isListLayoutChange ||
                isEqualCardSizeByListLayout ||
                isWidgetPositionChange) {
                hideCardTool = true;
                if (isEqualCardSizeByListLayout) {
                    const newState = {
                        currentCardSize
                    };
                    refreshList = true;
                    this.setState(newState, () => {
                        if (refreshList)
                            this.refreshList();
                    });
                }
                else if (isListLayoutChange) {
                    this.handleResizeCard(this.state.currentCardSize, true, false, false, true);
                }
            }
            if (!refreshList) {
                const isSpaceNotChange = (config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID
                    ? _utils_utils__WEBPACK_IMPORTED_MODULE_15__.isEqualNumber(config === null || config === void 0 ? void 0 : config.horizontalSpace, (_a = preProps.config) === null || _a === void 0 ? void 0 : _a.horizontalSpace) && _utils_utils__WEBPACK_IMPORTED_MODULE_15__.isEqualNumber(config === null || config === void 0 ? void 0 : config.verticalSpace, (_b = preProps.config) === null || _b === void 0 ? void 0 : _b.verticalSpace)
                    : _utils_utils__WEBPACK_IMPORTED_MODULE_15__.isEqualNumber(config.space, preProps.config.space);
                if (!isSpaceNotChange || config.layoutType !== preProps.config.layoutType) {
                    refreshList = true;
                    this.refreshList();
                }
            }
            return hideCardTool;
        };
        this.listDivSizeChange = (preProps, preState, currentCardSize, hideCardTool) => {
            var _a;
            const { config, isHeightAuto } = this.props;
            const { listDivSize } = this.state;
            const showBT = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.showBottomTools(this.props, this.state);
            const oldShowBT = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.showBottomTools(preProps, preState);
            const showDS = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.showTopTools(this.props);
            const oldShowDS = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.showTopTools(preProps);
            if (showBT !== oldShowBT || showDS !== oldShowDS) {
                if (!isHeightAuto) {
                    if (config.layoutType === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Column) {
                        let cardH = ((_a = this.state.widgetRect) === null || _a === void 0 ? void 0 : _a.height) || (listDivSize === null || listDivSize === void 0 ? void 0 : listDivSize.clientHeight);
                        cardH -=
                            _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getBottomToolH(this.paginatorDiv.current, showBT) +
                                (showDS ? 1 : 0) * _config__WEBPACK_IMPORTED_MODULE_2__.DS_TOOL_H;
                        if (cardH < _config__WEBPACK_IMPORTED_MODULE_2__.LIST_CARD_MIN_SIZE)
                            return;
                        const cardSize = {
                            height: cardH,
                            width: currentCardSize.width
                        };
                        this.handleResizeCard(cardSize, true, false, false, true);
                    }
                }
                else {
                    hideCardTool = true;
                }
            }
            return hideCardTool;
        };
        this.appModeChange = preProps => {
            const { appMode, selectionIsSelf, selectionStatus, builderStatus } = this.props;
            if (preProps.appMode !== appMode) {
                if (appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Run) {
                    this.editBuilderAndSettingStatus(_config__WEBPACK_IMPORTED_MODULE_2__.Status.Regular);
                }
                else {
                    if (selectionStatus !== builderStatus) {
                        // change status by toc
                        if (!selectionStatus) {
                            if (!selectionIsSelf) {
                                this.editBuilderAndSettingStatus(_config__WEBPACK_IMPORTED_MODULE_2__.Status.Regular);
                            }
                        }
                        else {
                            this.editBuilderAndSettingStatus(selectionStatus);
                        }
                    }
                    this.setState({
                        showSelectionOnly: false,
                        searchText: undefined,
                        filterApplied: false,
                        hoverIndex: -1
                    }, () => {
                        this.scrollToIndex(0);
                    });
                }
            }
        };
        this.pageTypeChange = preProps => {
            const { pageStyle } = this.props.config;
            const oldPageStyle = preProps.config.pageStyle;
            if (pageStyle !== oldPageStyle) {
                this.setState({
                    page: 1
                });
            }
        };
        this.useDatasourcesChange = preProps => {
            const { useDataSources } = this.props;
            const oldUseDataSources = preProps.useDataSources;
            if (useDataSources && useDataSources[0]) {
                const oldUseDataSource = oldUseDataSources && oldUseDataSources[0];
                if (!oldUseDataSource ||
                    oldUseDataSource.dataSourceId !== useDataSources[0].dataSourceId) {
                    // reset querysStart
                    this.setState({
                        page: 1
                    });
                }
            }
            else {
                // remove ds maybe
                this.setState({
                    datasource: undefined
                });
            }
        };
        this.listSortChange = preProps => {
            const { config } = this.props;
            if (config.sortOpen) {
                const sorts = config.sorts;
                const oldSorts = preProps.config.sorts;
                if (sorts !== oldSorts) {
                    this.setState({
                        sortOptionName: undefined
                    });
                }
            }
        };
        this.listFilterChange = preProps => {
            const { config } = this.props;
            if (config.filterOpen) {
                const filter = config.filter;
                const oldFilter = preProps.config.filter;
                if (filter !== oldFilter) {
                    this.setState({
                        currentFilter: undefined,
                        filterApplied: false
                    });
                }
            }
        };
        this.setSelectionStatus = () => {
            const { id, selectionIsInSelf } = this.props;
            this.props.dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.widgetStatePropChange(id, 'selectionIsInSelf', selectionIsInSelf));
        };
        this.updateScrollContentSize = preConfig => {
            const { config } = this.props;
            const isSpaceNotChange = (config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID
                ? _utils_utils__WEBPACK_IMPORTED_MODULE_15__.isEqualNumber(config === null || config === void 0 ? void 0 : config.horizontalSpace, preConfig === null || preConfig === void 0 ? void 0 : preConfig.horizontalSpace) && _utils_utils__WEBPACK_IMPORTED_MODULE_15__.isEqualNumber(config === null || config === void 0 ? void 0 : config.verticalSpace, preConfig === null || preConfig === void 0 ? void 0 : preConfig.verticalSpace)
                : _utils_utils__WEBPACK_IMPORTED_MODULE_15__.isEqualNumber(config.space, preConfig.space);
            if (config.layoutType !== preConfig.layoutType || !isSpaceNotChange) {
                this.setScrollContentSize();
            }
        };
        this.scrollToSelectedItems = (datasource) => {
            const selectedRecordIds = datasource.getSelectedRecordIds();
            if (this.isMySelected) {
                this.isMySelected = false;
                this.lastSelectedRecordIds = selectedRecordIds || [];
                return;
            }
            if (selectedRecordIds && selectedRecordIds.length > 0) {
                let isSame = true;
                if (!this.lastSelectedRecordIds ||
                    selectedRecordIds.length !== this.lastSelectedRecordIds.length) {
                    isSame = false;
                }
                else {
                    selectedRecordIds.some(recordId => {
                        const rId = this.lastSelectedRecordIds.find(lastRecordId => lastRecordId === recordId);
                        if (!rId) {
                            isSame = false;
                            return true;
                        }
                        else {
                            return false;
                        }
                    });
                }
                if (!isSame || this.needScroll) {
                    let index = -1;
                    this.records &&
                        this.records.find((record, i) => {
                            var _a;
                            if (((_a = record.getId) === null || _a === void 0 ? void 0 : _a.call(record)) === selectedRecordIds[0]) {
                                index = i;
                                return true;
                            }
                            else {
                                return false;
                            }
                        });
                    if (index === -1) {
                        // Can't find it, need to search in all records again
                        const records = datasource.getRecords();
                        records &&
                            records.find((record, i) => {
                                var _a;
                                if (((_a = record.getId) === null || _a === void 0 ? void 0 : _a.call(record)) === selectedRecordIds[0]) {
                                    index = i;
                                    return true;
                                }
                                else {
                                    return false;
                                }
                            });
                        if (index > -1) {
                            const newPage = Math.ceil((index + 1) / this.getPageSize());
                            this.needScroll = true;
                            this.setState({
                                page: newPage
                            });
                        }
                    }
                    else {
                        this.scrollToIndex(index);
                        this.needScroll = false;
                    }
                }
            }
            this.lastSelectedRecordIds = selectedRecordIds || [];
        };
        this.onDSCreated = (ds) => {
            this.setState({
                datasource: ds
            });
        };
        this.onResize = (width, height) => {
            const newWidgetRect = {
                width,
                height
            };
            const { config } = this.props;
            const { isResizingCard, currentCardSize } = this.state;
            if (isResizingCard) {
                return;
            }
            const showBottomTool = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.showBottomTools(this.props, this.state);
            const bottomToolH = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getBottomToolH(this.paginatorDiv.current, showBottomTool);
            const showTopTool = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.showTopTools(this.props);
            const listH = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getListHeight(newWidgetRect, bottomToolH, showTopTool);
            const oldCardSize = this.getOldCardSizeWhenResize(newWidgetRect);
            const newDefaultCardSize = config.layoutType === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID ? _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getCardSizeNumberInConfig(this.props, newWidgetRect) : currentCardSize;
            const cardSize = {
                width: newDefaultCardSize.width,
                height: newDefaultCardSize.height
            };
            let needRefreshList = !_utils_utils__WEBPACK_IMPORTED_MODULE_15__.isEqualNumber(currentCardSize === null || currentCardSize === void 0 ? void 0 : currentCardSize.width, newDefaultCardSize === null || newDefaultCardSize === void 0 ? void 0 : newDefaultCardSize.width) || !_utils_utils__WEBPACK_IMPORTED_MODULE_15__.isEqualNumber(currentCardSize === null || currentCardSize === void 0 ? void 0 : currentCardSize.height, newDefaultCardSize === null || newDefaultCardSize === void 0 ? void 0 : newDefaultCardSize.height);
            if (config.lockItemRatio && config.layoutType !== _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID) {
                const ratio = cardSize.width / cardSize.height;
                switch (config === null || config === void 0 ? void 0 : config.layoutType) {
                    case _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Column:
                        cardSize.height = listH;
                        cardSize.width = listH * ratio;
                        if (!_utils_utils__WEBPACK_IMPORTED_MODULE_15__.isEqualNumber(cardSize.width, oldCardSize.width)) {
                            needRefreshList = true;
                        }
                        break;
                    case _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Row:
                        cardSize.height = width / ratio;
                        cardSize.width = width;
                        if (!_utils_utils__WEBPACK_IMPORTED_MODULE_15__.isEqualNumber(cardSize.height, oldCardSize.height)) {
                            needRefreshList = true;
                        }
                        break;
                }
            }
            else {
                switch (config === null || config === void 0 ? void 0 : config.layoutType) {
                    case _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Column:
                        cardSize.height = listH;
                        break;
                    case _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Row:
                        cardSize.width = width;
                        break;
                }
            }
            const notResetCardSize = cardSize.width < _config__WEBPACK_IMPORTED_MODULE_2__.LIST_CARD_MIN_SIZE || cardSize.height < _config__WEBPACK_IMPORTED_MODULE_2__.LIST_CARD_MIN_SIZE || newWidgetRect.width === 0 || newWidgetRect.height === 0;
            if (notResetCardSize) {
                return;
            }
            this.setState({
                widgetRect: newWidgetRect,
                currentCardSize: cardSize
            }, () => {
                this.isHasInitCurrentCardSize = true;
                this.editListSizeInRunTime(newWidgetRect);
                if (needRefreshList) {
                    this.refreshList();
                }
            });
            if (this.resizeTimeout) {
                clearTimeout(this.resizeTimeout);
                this.resizeTimeout = undefined;
            }
            if (config.lockItemRatio) {
                this.resizeTimeout = setTimeout(() => {
                    this.handleResizeCard(cardSize, true, false, false, true);
                }, 500);
            }
            this.updateCardToolPosition();
            this.setListDivSize();
        };
        this.getOldCardSizeWhenResize = (newWidgetRect) => {
            //When the width and height are percentages, the Onresize method will be automatically called once when the List is loaded. At this time, the current List size should be used to obtain the oldCardSize
            const { currentCardSize } = this.state;
            if (!this.isHasInitCurrentCardSize) {
                return _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getCardSizeNumberInConfig(this.props, newWidgetRect);
            }
            else {
                return currentCardSize;
            }
        };
        this.updateCardToolPosition = () => {
            const { selectionIsSelf } = this.props;
            const { hideCardTool } = this.state;
            if (!selectionIsSelf || hideCardTool)
                return;
            this.setState({
                hideCardTool: true
            });
            if (this.updateCardToolTimeout) {
                clearTimeout(this.updateCardToolTimeout);
                this.updateCardToolTimeout = undefined;
            }
            this.updateCardToolTimeout = setTimeout(() => {
                this.setState({
                    hideCardTool: false
                });
            }, 500);
        };
        this.refreshList = (shouldForceUpdate = true) => {
            var _a, _b, _c, _d, _e;
            if (this.listRef.current) {
                if (((_a = this.props.config) === null || _a === void 0 ? void 0 : _a.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID) {
                    //VariableSizeGrid caches offsets and measurements for each item for performance purposes.
                    //This method clears that cached data for all items after (and including) the specified indices. It should be called whenever an items size changes.
                    //https://react-window.vercel.app/#/api/VariableSizeGrid
                    this.resetAfterIndices();
                }
                else {
                    //VariableSizeList caches offsets and measurements for each index for performance purposes.
                    //This method clears that cached data for all items after (and including) the specified index. It should be called whenever a item's size changes.
                    ((_c = (_b = this.listRef) === null || _b === void 0 ? void 0 : _b.current) === null || _c === void 0 ? void 0 : _c.resetAfterIndex) && ((_e = (_d = this.listRef) === null || _d === void 0 ? void 0 : _d.current) === null || _e === void 0 ? void 0 : _e.resetAfterIndex(0, shouldForceUpdate));
                }
            }
        };
        this.isDsConfigured = () => {
            const { useDataSources } = this.props;
            return !!useDataSources && !!useDataSources[0];
        };
        this.selectRecords = (records) => {
            const { datasource } = this.state;
            if (datasource) {
                jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(this.props.id, records));
                if (records) {
                    this.isMySelected = true;
                    this.isHasPublishMessageAction = true;
                    datasource.selectRecordsByIds(records.map(record => record.getId()));
                    const outputDs = this.getOutputDs();
                    outputDs &&
                        outputDs.selectRecordsByIds(records.map(record => record.getId()));
                }
                else {
                    this.isHasPublishMessageAction = false;
                }
            }
        };
        this.formatMessage = (id, values) => {
            return this.props.intl.formatMessage({ id: id, defaultMessage: MESSAGES[id] }, values);
        };
        // call exec manuly
        this.editStatus = (name, value) => {
            const { dispatch, id } = this.props;
            dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.widgetStatePropChange(id, name, value));
        };
        this.editWidgetConfig = newConfig => {
            if (!window.jimuConfig.isInBuilder)
                return;
            const appConfigAction = this.props.builderSupportModules.jimuForBuilderLib.getAppConfigAction();
            appConfigAction.editWidgetConfig(this.props.id, newConfig).exec();
        };
        this.scrollToIndex = (index, type = 'start') => {
            const { config } = this.props;
            if (this.listRef.current) {
                if ((config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID) {
                    const columnCount = this.getItemColumnCount();
                    const rowIndex = Math.floor(index / columnCount);
                    this.listRef.current.scrollToItem({
                        columnIndex: index - rowIndex * columnCount,
                        rowIndex: rowIndex,
                        align: type
                    });
                }
                else {
                    this.listRef.current.scrollToItem(index, type);
                }
            }
        };
        this.isEditing = () => {
            const { appMode, config, selectionIsSelf, selectionIsInSelf } = this.props;
            if (!window.jimuConfig.isInBuilder)
                return false;
            return ((selectionIsSelf || selectionIsInSelf) &&
                window.jimuConfig.isInBuilder &&
                appMode !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Run &&
                config.isItemStyleConfirm);
        };
        this.handleItemChange = (itemRecord) => {
            const { config } = this.props;
            const { datasource } = this.state;
            if (!datasource || !itemRecord)
                return;
            let selectedRecords = datasource.getSelectedRecords() || [];
            if (config.cardConfigs[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Selected].selectionMode &&
                config.cardConfigs[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Selected].selectionMode !==
                    _config__WEBPACK_IMPORTED_MODULE_2__.SelectionModeType.None) {
                const recordId = itemRecord === null || itemRecord === void 0 ? void 0 : itemRecord.getId();
                const record = selectedRecords.find(record => record.getId() === recordId);
                if (config.cardConfigs[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Selected].selectionMode ===
                    _config__WEBPACK_IMPORTED_MODULE_2__.SelectionModeType.Single) {
                    if (record) {
                        this.selectRecords([]);
                        this.setState({ showSelectionOnly: false });
                    }
                    else {
                        this.selectRecords([itemRecord]);
                    }
                }
                else {
                    if (record) {
                        selectedRecords = selectedRecords.filter(record => record.getId() !== recordId);
                    }
                    else {
                        selectedRecords = [itemRecord].concat(selectedRecords);
                    }
                    this.selectRecords(selectedRecords);
                }
            }
        };
        this.handleListPointerDown = evt => {
            this.setState({
                forceShowMask: true
            });
            if (this.mouseClickTimeout) {
                clearTimeout(this.mouseClickTimeout);
                this.mouseClickTimeout = undefined;
            }
            this.mouseClickTimeout = setTimeout(() => {
                this.setState({
                    forceShowMask: false
                });
            }, 200);
        };
        this.handleScrollUp = e => {
            const scrollStep = this.getScrollStep();
            const listVisibleStartIndex = this.getListVisibleStartIndex();
            let toIndex = listVisibleStartIndex - scrollStep;
            if (toIndex < 0) {
                toIndex = 0;
            }
            this.scrollToIndex(toIndex, 'start');
        };
        this.handleScrollDown = e => {
            const scrollStep = this.getScrollStep();
            const { listVisibleStopIndex } = this;
            const listVisibleStartIndex = this.getListVisibleStartIndex();
            if (listVisibleStopIndex + scrollStep >= this.records.length - 1 &&
                this.records.length < this.getTotalCount()) {
                this.isSwitchPage = true;
                this.setState({
                    page: this.state.page + 1
                });
            }
            else {
                this.scrollToIndex(listVisibleStartIndex + scrollStep, 'start');
            }
        };
        this.getScrollStep = () => {
            const { scrollStep, layoutType } = this.props.config;
            const columnCount = this.getItemColumnCount();
            return layoutType === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID ? scrollStep * columnCount : scrollStep;
        };
        this.handleSwitchPage = (pageNum) => {
            const totalPages = this.getTotalPage();
            if (pageNum < 1 || pageNum > totalPages)
                return;
            if (pageNum !== this.state.page) {
                this.isSwitchPage = true;
                this.lastQueryStart = this.state.page;
                this.setState({
                    page: pageNum
                });
            }
        };
        this.handleListMouseLeave = () => {
            if (this.isEditing())
                return;
            this.setState({
                hoverIndex: -1
            });
        };
        this.handleListMouseMove = (itemIndex) => {
            if (this.isEditing())
                return;
            if (itemIndex === this.state.hoverIndex)
                return;
            this.setState({
                hoverIndex: itemIndex
            });
        };
        this.lastScrollOffset = 0;
        this.handleListScroll = ({ scrollDirection, scrollOffset, scrollTop, scrollUpdateWasRequested }) => {
            var _a, _b;
            const { appMode, config } = this.props;
            const listDiv = this.listOutDivRef;
            const { datasource, scrollStatus } = this.state;
            this.lastScrollOffset = (config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID ? scrollTop : scrollOffset;
            if (!listDiv || ((_b = (_a = this.records) === null || _a === void 0 ? void 0 : _a.length) !== null && _b !== void 0 ? _b : 0) < 1)
                return;
            if (config.pageStyle === _config__WEBPACK_IMPORTED_MODULE_2__.PageStyle.Scroll &&
                this.queryStatus !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.Loading &&
                datasource &&
                (!window.jimuConfig.isInBuilder || appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Run)) {
                this.isHasScrolled = true;
                if (_utils_utils__WEBPACK_IMPORTED_MODULE_15__.isScrollStart(listDiv, this.lastScrollOffset)) {
                    if (scrollStatus !== 'start') {
                        this.setState({
                            scrollStatus: 'start'
                        });
                    }
                }
                else {
                    if (scrollStatus !== 'mid') {
                        this.setState({
                            scrollStatus: 'mid'
                        });
                    }
                }
            }
        };
        this.getTotalPage = () => {
            const { totalCount } = this;
            const { config } = this.props;
            const total = totalCount;
            const totalPage = Math.floor(total / config.itemsPerPage);
            const mode = total % config.itemsPerPage;
            return mode === 0 ? totalPage : totalPage + 1;
        };
        this.getListVisibleStartIndex = () => {
            const { lastScrollOffset } = this;
            const { config } = this.props;
            const itemSize = this.itemSize(0);
            const base = (lastScrollOffset * 1.0) / itemSize;
            let index = Math.floor(base);
            const mo = (base - index) * itemSize;
            const space = (config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID ? config === null || config === void 0 ? void 0 : config.verticalSpace : config === null || config === void 0 ? void 0 : config.space;
            const columnCount = this.getItemColumnCount();
            index = (config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID ? index * columnCount : index;
            if (mo > itemSize - space) {
                index++;
            }
            return index;
        };
        this.handleSortOptionChange = (evt, item) => {
            this.setState({
                sortOptionName: item.label,
                page: 1
            }, () => {
                // this.selectRecords([])
            });
        };
        this.handleSearchTextChange = searchText => {
            if (searchText === '' || !searchText) {
                this.handleSearchSubmit(undefined);
            }
            this.setState({
                searchSuggestion: []
            });
            clearTimeout(this.suggestionsQueryTimeout);
            this.suggestionsQueryTimeout = setTimeout(() => {
                this.getSearchSuggestions(searchText);
            }, 200);
        };
        this.getSearchSuggestions = searchText => {
            const { config } = this.props;
            const { datasource } = this.state;
            if ((searchText === null || searchText === void 0 ? void 0 : searchText.length) < 3) {
                return false;
            }
            (0,_utils_list_service__WEBPACK_IMPORTED_MODULE_4__.fetchSuggestionRecords)(searchText, config, datasource).then(searchSuggestion => {
                this.setState({
                    searchSuggestion: searchSuggestion
                });
            });
        };
        this.handleSearchSubmit = (searchText, isEnter = false) => {
            const oldSearchText = this.state.searchText;
            if (oldSearchText === searchText && !isEnter) {
                return;
            }
            this.setState({
                searchText: searchText,
                page: 1
            }, () => {
                // this.selectRecords([])
            });
        };
        this.initNewCardSize = (newCardSize) => {
            //If the original width and height are percentages, px will be converted to percentages during resize, and then set to config
            const { widgetRect } = this.state;
            let cardSize = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)(newCardSize);
            const cardSizeWidthUnit = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getCardSizeWidthUnitInConfig(this.props);
            if (cardSizeWidthUnit.width.unit === jimu_ui__WEBPACK_IMPORTED_MODULE_1__.DistanceUnits.PERCENTAGE) {
                cardSize = cardSize.set('width', `${newCardSize.width * 100 / widgetRect.width}%`);
            }
            if (cardSizeWidthUnit.height.unit === jimu_ui__WEBPACK_IMPORTED_MODULE_1__.DistanceUnits.PERCENTAGE) {
                cardSize = cardSize.set('height', `${newCardSize.height * 100 / widgetRect.height}%`);
            }
            return cardSize === null || cardSize === void 0 ? void 0 : cardSize.asMutable({ deep: true });
        };
        this.handleFilterChange = (sqlExprObj) => {
            this.setState({
                currentFilter: sqlExprObj,
                page: 1
            }, () => {
                // this.selectRecords([])
            });
        };
        this.handleFilterApplyChange = (applied) => {
            const alterState = {
                filterApplied: applied,
                queryStart: 0
            };
            if (!applied) {
                // alterState.currentFilter = undefined
            }
            this.setState(alterState, () => {
                // this.selectRecords([])
            });
        };
        this.handleShowSelectionClick = evt => {
            const { showSelectionOnly } = this.state;
            this.setState({ showSelectionOnly: !showSelectionOnly });
        };
        this.handleClearSelectionClick = () => {
            this.setState({ showSelectionOnly: false });
            this.selectRecords([]);
        };
        this.resetShowSelectionStatus = () => {
            const { showSelectionOnly } = this.state;
            if (showSelectionOnly) {
                this.setState({ showSelectionOnly: false });
            }
        };
        this._getCurrentPage = () => {
            return this.state.page;
        };
        this.getTotalCount = () => {
            const total = this.totalCount || 0;
            return total;
        };
        this.selectCard = () => {
            const { selectionIsInSelf } = this.props;
            if (selectionIsInSelf) {
                this.selectSelf();
            }
        };
        this.editBuilderAndSettingStatus = (status) => {
            this.editStatus('showCardSetting', status);
            this.editStatus('builderStatus', status);
        };
        this.editListSizeInRunTime = (widgetRect) => {
            const { id, dispatch } = this.props;
            dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.widgetStatePropChange(id, 'widgetRect', widgetRect));
        };
        this.getSortItems = () => {
            const { config } = this.props;
            const options = [];
            if (config.sorts) {
                config.sorts.forEach(sort => {
                    sort.rule &&
                        sort.rule.forEach(sortData => {
                            if (sortData && !!sortData.jimuFieldName) {
                                options.push({
                                    label: sort.ruleOptionName,
                                    event: this.handleSortOptionChange
                                });
                            }
                        });
                });
            }
            return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)(options);
        };
        this.renderListTopTools = (ds, queryStatus, selectRecords) => {
            const { widgetRect, isSearchBoxVisible, isOpenTopToolsPopper } = this.state;
            const listWidth = (widgetRect === null || widgetRect === void 0 ? void 0 : widgetRect.width) || 620;
            const isShowDataAction = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.checkIsShowDataAction(this.props);
            const isShowListToolsOnly = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.checkIsShowListToolsOnly(this.props);
            const dataName = this.formatMessage('listDataActionLabel', { layer: (ds === null || ds === void 0 ? void 0 : ds.getLabel()) || '' });
            const LIST_TOOL_MIN_SIZE = isShowDataAction ? _config__WEBPACK_IMPORTED_MODULE_2__.LIST_TOOL_MIN_SIZE_DATA_ACTION : _config__WEBPACK_IMPORTED_MODULE_2__.LIST_TOOL_MIN_SIZE_NO_DATA_ACTION;
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'datasource-tools w-100', css: (0,_styles_style__WEBPACK_IMPORTED_MODULE_5__.getTopToolStyle)(this.props, isShowListToolsOnly) },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "d-flex align-items-center" },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "flex-grow-1 tool-row" }, isShowListToolsOnly && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", null,
                        listWidth >= LIST_TOOL_MIN_SIZE && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'tool-row row1 d-flex align-items-center w-100 justify-content-between' },
                            this.renderSearchTools(ds, queryStatus),
                            (!isSearchBoxVisible || listWidth >= 360) &&
                                this.renderTopRightTools(ds, queryStatus))),
                        listWidth < LIST_TOOL_MIN_SIZE && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'float-right', ref: ref => (this.reference = ref) },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { type: 'tertiary', icon: true, size: 'sm', className: 'tools-menu', title: this.formatMessage('guideStep9Title'), onClick: evt => {
                                    this.setState({ isOpenTopToolsPopper: !isOpenTopToolsPopper });
                                } },
                                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_menu__WEBPACK_IMPORTED_MODULE_16__.MenuOutlined, { size: 16 })),
                            this.renderListTopToolsInPoper(ds, queryStatus))))),
                    (ds && isShowDataAction) && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('list-data-action position-relative', { 'm-left': listWidth < LIST_TOOL_MIN_SIZE }), "data-testid": "data-action" },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.DataActionDropDown, { type: 'tertiary', widgetId: this.props.id, dataSet: { dataSource: ds, records: selectRecords, name: dataName }, size: "sm" }))),
                window.jimuConfig.isInBuilder && this.isEditing() && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'editing-mask-ds-tool' }))));
        };
        this.renderListTopToolsInPoper = (ds, queryStatus) => {
            const { widgetRect, isSearchBoxVisible, isOpenTopToolsPopper } = this.state;
            const toolsDisabled = this.isEditing();
            const listWidth = (widgetRect === null || widgetRect === void 0 ? void 0 : widgetRect.width) || 620;
            const LIST_TOOL_MIN_SIZE = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.checkIsShowDataAction(this.props) ? _config__WEBPACK_IMPORTED_MODULE_2__.LIST_TOOL_MIN_SIZE_DATA_ACTION : _config__WEBPACK_IMPORTED_MODULE_2__.LIST_TOOL_MIN_SIZE_NO_DATA_ACTION;
            const isOpen = listWidth < LIST_TOOL_MIN_SIZE && isOpenTopToolsPopper && !toolsDisabled;
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", null,
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Popper, { placement: 'bottom-start', reference: this.reference, offset: [-10, 0], open: isOpen, showArrow: true, toggle: e => {
                        this.setState({ isOpenTopToolsPopper: !isOpen });
                    } },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'tool-row row1 d-flex align-items-end justify-content-between', css: (0,_styles_style__WEBPACK_IMPORTED_MODULE_5__.getToolsPopperStyle)(this.props) },
                        this.renderSearchTools(ds, queryStatus),
                        !isSearchBoxVisible && this.renderTopRightTools(ds, queryStatus)))));
        };
        this.renderSearchTools = (ds, queryStatus) => {
            const toolsDisabled = this.isEditing() || !ds || queryStatus !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.Loaded;
            const { searchText, widgetRect, isSearchBoxVisible, showLoading } = this.state;
            const listWidth = (widgetRect === null || widgetRect === void 0 ? void 0 : widgetRect.width) || 620;
            const { theme, config, appMode } = this.props;
            const toolLineClassName = listWidth < 360 ? 'ds-tools-line-blue' : '';
            const placeholder = (config === null || config === void 0 ? void 0 : config.searchHint) || this.formatMessage('search');
            const isShowBackButton = listWidth < 360 && isSearchBoxVisible;
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'list-search-div flex-grow-1', css: (0,_styles_style__WEBPACK_IMPORTED_MODULE_5__.getSearchToolStyle)(this.props) }, _utils_utils__WEBPACK_IMPORTED_MODULE_15__.showSearch(this.props) && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex search-box-content' },
                (listWidth >= 360 || isSearchBoxVisible) && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'flex-grow-1 w-100' },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_search_box__WEBPACK_IMPORTED_MODULE_9__["default"], { theme: theme, placeholder: placeholder, searchText: searchText, onSearchTextChange: this.handleSearchTextChange, onSubmit: this.handleSearchSubmit, disabled: toolsDisabled, searchSuggestion: this.state.searchSuggestion, suggestionWidth: listWidth, showLoading: showLoading, formatMessage: this.formatMessage, isShowBackButton: isShowBackButton, toggleSearchBoxVisible: this.toggleSearchBoxVisible, className: 'list-search ', appMode: appMode }),
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('ds-tools-line', toolLineClassName) }))),
                listWidth < 360 && !isSearchBoxVisible && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { type: 'tertiary', icon: true, size: 'sm', onClick: evt => {
                        this.toggleSearchBoxVisible(true);
                    }, title: this.formatMessage('search') },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_search__WEBPACK_IMPORTED_MODULE_17__.SearchOutlined, { size: 16, color: theme.colors.palette.light[800] })))))));
        };
        this.toggleSearchBoxVisible = (isVisible = false) => {
            const { widgetRect } = this.state;
            this.setState({
                isSearchBoxVisible: isVisible
            });
            const LIST_TOOL_MIN_SIZE = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.checkIsShowDataAction(this.props) ? _config__WEBPACK_IMPORTED_MODULE_2__.LIST_TOOL_MIN_SIZE_DATA_ACTION : _config__WEBPACK_IMPORTED_MODULE_2__.LIST_TOOL_MIN_SIZE_NO_DATA_ACTION;
            const listWidth = (widgetRect === null || widgetRect === void 0 ? void 0 : widgetRect.width) || 620;
            if (listWidth < LIST_TOOL_MIN_SIZE) {
                clearTimeout(this.showPopperTimeOut);
                this.showPopperTimeOut = setTimeout(() => {
                    this.setState({
                        isOpenTopToolsPopper: true
                    });
                });
            }
        };
        this.getPageSize = () => {
            const { widgetRect } = this.state;
            const { config } = this.props;
            const showBottomTool = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.showBottomTools(this.props, this.state);
            const bottomToolH = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getBottomToolH(this.paginatorDiv.current, showBottomTool);
            const showTopTools = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.showTopTools(this.props);
            const listHeight = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getListHeight(widgetRect, bottomToolH, showTopTools) || 1;
            const columnCount = (config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID ? this.getItemColumnCount() : null;
            const recordSizePerPage = Math.max(_utils_utils__WEBPACK_IMPORTED_MODULE_15__.getPageSize(widgetRect, listHeight, this.props, columnCount), 1);
            return recordSizePerPage;
        };
        this.renderTopRightTools = (ds, queryStatus) => {
            const { sortOptionName, showSelectionOnly, currentFilter, filterApplied } = this.state;
            const { config, theme, id, appMode } = this.props;
            const sortItems = this.getSortItems();
            const selectedRecords = ds && ds.getSelectedRecords();
            const hasSelection = selectedRecords && selectedRecords.length > 0;
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex align-items-center mr-1', ref: this.listTopRightToolsDiv },
                _utils_utils__WEBPACK_IMPORTED_MODULE_15__.showSort(this.props) && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(react__WEBPACK_IMPORTED_MODULE_10__.Fragment, null,
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_my_dropdown__WEBPACK_IMPORTED_MODULE_11__["default"], { theme: theme, items: sortItems, appMode: appMode, toggleType: 'tertiary', toggleContent: theme => sortOptionName || (sortItems && sortItems[0].label), size: 'sm', caret: true, showActive: true, toggleTitle: this.formatMessage('listSort'), activeLabel: sortOptionName || (sortItems && sortItems[0].label) }))),
                _utils_utils__WEBPACK_IMPORTED_MODULE_15__.showFilter(this.props) && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_filter_picker__WEBPACK_IMPORTED_MODULE_12__["default"], { filter: currentFilter || config.filter, filterInConfig: config.filter, appMode: appMode, applied: filterApplied, title: this.formatMessage('filter'), selectedDs: this.state.datasource, handleFilterChange: this.handleFilterChange, handleFilterApplyChange: this.handleFilterApplyChange, formatMessage: this.formatMessage, theme: theme, widgetId: id })),
                _utils_utils__WEBPACK_IMPORTED_MODULE_15__.showDisplaySelectedOnly(this.props) && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { disabled: !hasSelection, type: 'tertiary', title: showSelectionOnly
                        ? this.formatMessage('showAll')
                        : this.formatMessage('showSelection'), icon: true, size: 'sm', onClick: this.handleShowSelectionClick }, showSelectionOnly ? (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_menu__WEBPACK_IMPORTED_MODULE_16__.MenuOutlined, { size: 16 }) : (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_show_selection__WEBPACK_IMPORTED_MODULE_18__.ShowSelectionOutlined, { size: 16 }))),
                _utils_utils__WEBPACK_IMPORTED_MODULE_15__.showClearSelected(this.props) && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { disabled: !hasSelection, type: 'tertiary', title: this.formatMessage('clearSelection'), icon: true, size: 'sm', onClick: this.handleClearSelectionClick },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_editor_trash_check__WEBPACK_IMPORTED_MODULE_19__.TrashCheckOutlined, { size: 16 })))));
        };
        this.renderList = (ds, dsInfo) => {
            const { widgetRect, isMount, currentCardSize } = this.state;
            const { config, isRTL } = this.props;
            const queryStatus = dsInfo === null || dsInfo === void 0 ? void 0 : dsInfo.status;
            this.queryStatus = queryStatus;
            this.isHasRenderList = true;
            if (!isMount) {
                return false;
            }
            //get total count
            if (queryStatus === jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.Unloaded) {
                ds = undefined;
            }
            this.getDsTotalCount(ds, queryStatus);
            //get loading status
            const showLoading = this.getLoadingStatus(ds, queryStatus);
            const interval = (ds === null || ds === void 0 ? void 0 : ds.getAutoRefreshInterval()) || 0;
            //toggle auto refresh loading status
            this.toggleAutoRefreshLoading(ds, showLoading);
            //get list tool`s show status
            const showBottomTool = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.showBottomTools(this.props, this.state);
            const showTopTools = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.showTopTools(this.props);
            //get list bottom tool`s height
            const bottomToolH = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getBottomToolH(this.paginatorDiv.current, showBottomTool);
            //get list size
            const listHeight = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getListHeight(widgetRect, bottomToolH, showTopTools) || 1;
            const listWidth = (widgetRect && widgetRect.width) || _config__WEBPACK_IMPORTED_MODULE_2__.LIST_CARD_MIN_SIZE;
            const overscanCount = this.getOverscanCount(listHeight);
            // get new records
            const selectRecords = this.getDsSelectRecords(ds);
            const records = this.getDsRecords(ds, showLoading, listHeight);
            this.isFirstLoad = false;
            // when record.length == 0, should reset show selection button status in list top tools
            if (records.length === 0) {
                // this.scrollToIndex(0, 'start');
                this.resetShowSelectionStatus();
            }
            this.getlistInnerElementType();
            const listStyles = this.getListStyle();
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { "data-testid": 'listContainer', className: 'list-container animation', css: listStyles },
                showTopTools && this.renderListTopTools(ds, queryStatus, selectRecords),
                ((config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID) &&
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_window__WEBPACK_IMPORTED_MODULE_21__.VariableSizeGrid, { className: 'widget-list-list', ref: this.listRef, useIsScrolling: true, outerRef: this.setListOutDivRef, direction: isRTL ? 'rtl' : 'ltr', itemCount: this.records.length, overscanCount: overscanCount, itemKey: this.gridItemIndex, columnCount: this.getItemColumnCount(), columnWidth: index => this.columnWidth(index, currentCardSize.width, config === null || config === void 0 ? void 0 : config.horizontalSpace), rowCount: this.getItemRowCount(), rowHeight: index => this.rowHeight(index, currentCardSize.height, config === null || config === void 0 ? void 0 : config.verticalSpace), width: listWidth, height: listHeight, onItemsRendered: this.onItemsRendered, itemData: this.getItemsByRecords(this.records), innerElementType: this.innerElementType, onScroll: this.handleListScroll }, this.itemRender),
                ((config === null || config === void 0 ? void 0 : config.layoutType) !== _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID) && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_window__WEBPACK_IMPORTED_MODULE_21__.VariableSizeList, { className: 'widget-list-list', ref: this.listRef, useIsScrolling: true, outerRef: this.setListOutDivRef, direction: isRTL ? 'rtl' : 'ltr', layout: config.layoutType === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Column
                        ? 'horizontal'
                        : 'vertical', itemCount: this.records.length, overscanCount: overscanCount, itemKey: this.itemKey, width: listWidth, height: listHeight, onItemsRendered: this.onItemsRendered, itemData: this.getItemsByRecords(this.records), innerElementType: this.innerElementType, itemSize: this.itemSize, onScroll: this.handleListScroll }, this.itemRender),
                this.checkIsShowListMask(showLoading, records) && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'editing-mask-con' },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'editing-mask-list' }),
                    (config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'editing-mask-list-grid' }))),
                showBottomTool && this.renderBottomTools(showLoading),
                this.renderEmptyElement(showLoading),
                queryStatus === jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.NotReady && this.renderNotReadyTips(ds),
                (showLoading || interval > 0) && this.renderLoading(showLoading, interval)));
        };
        this.renderEmptyElement = (showLoading) => {
            var _a;
            const isNoData = !this.records || this.records.length < 1;
            const noDataMessage = ((_a = this.props.config) === null || _a === void 0 ? void 0 : _a.noDataMessage) || this.formatMessage('noData');
            // const isShowClearActionButton = isNoData && this.isHasPublishMessageAction
            return (!showLoading && isNoData) && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'empty-con text-center' },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_icons_outlined_suggested_warning__WEBPACK_IMPORTED_MODULE_20__.WarningOutlined, { size: 16 }),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "discribtion" }, noDataMessage)));
        };
        this.clearMessageAction = () => {
            this.handleClearSelectionClick();
            jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataRecordsSelectionChangeMessage(this.props.id, []));
        };
        this.renderLoading = (showLoading, interval) => {
            const { autoRefreshLoadingString } = this.state;
            const { config } = this.props;
            let isShowAutoRefresh = config === null || config === void 0 ? void 0 : config.isShowAutoRefresh;
            if (typeof (isShowAutoRefresh) !== 'boolean') {
                isShowAutoRefresh = true;
            }
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('position-absolute refresh-loading-con d-flex align-items-center', this.getRefreshLoadingClass()) },
                showLoading && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'loading-con' }),
                (interval > 0 && isShowAutoRefresh) && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'flex-grow-1 auto-refresh-loading' }, autoRefreshLoadingString))));
        };
        this.renderNotReadyTips = (ds) => {
            var _a, _b, _c, _d, _e;
            const dataSourceLabel = ds === null || ds === void 0 ? void 0 : ds.getLabel();
            const outputDsWidgetId = jimu_core__WEBPACK_IMPORTED_MODULE_0__.appConfigUtils === null || jimu_core__WEBPACK_IMPORTED_MODULE_0__.appConfigUtils === void 0 ? void 0 : jimu_core__WEBPACK_IMPORTED_MODULE_0__.appConfigUtils.getWidgetIdByOutputDataSource((_b = (_a = this.props) === null || _a === void 0 ? void 0 : _a.useDataSources) === null || _b === void 0 ? void 0 : _b[0]);
            const appConfig = (_c = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState()) === null || _c === void 0 ? void 0 : _c.appConfig;
            const widgetLabel = (_e = (_d = appConfig === null || appConfig === void 0 ? void 0 : appConfig.widgets) === null || _d === void 0 ? void 0 : _d[outputDsWidgetId]) === null || _e === void 0 ? void 0 : _e.label;
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'placeholder-alert-con' },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Alert, { form: 'tooltip', size: 'small', type: 'warning', text: this.formatMessage('outputDataIsNotGenerated', { outputDsLabel: dataSourceLabel, sourceWidgetName: widgetLabel }) })));
        };
        this.renderBottomTools = (showLoading) => {
            const { scrollStatus, isScrollEnd } = this.state;
            const { config, isRTL } = this.props;
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { ref: this.paginatorDiv },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_bottom_tools__WEBPACK_IMPORTED_MODULE_13__.ListBottomTools, { isRTL: isRTL, totalPage: this.getTotalPage(), currentPage: this._getCurrentPage(), isEditing: this.isEditing(), isScrollEnd: isScrollEnd, pageStyle: config.pageStyle, layoutType: config === null || config === void 0 ? void 0 : config.layoutType, scrollStatus: scrollStatus, handleScrollUp: this.handleScrollUp, handleScrollDown: this.handleScrollDown, handleSwitchPage: this.handleSwitchPage, formatMessage: this.formatMessage, showLoading: showLoading })));
        };
        this.getDsTotalCount = (ds, queryStatus) => {
            const count = ds === null || ds === void 0 ? void 0 : ds.count;
            this.queryStatus = queryStatus;
            // total count
            if (queryStatus === jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.Loaded && count !== null) {
                if (this.totalCount !== count) {
                    this.setPageTimeout = setTimeout(() => {
                        this.setState({
                            page: 1
                        });
                    }, 1);
                }
                this.totalCount = count;
            }
        };
        this.getLoadingStatus = (ds, queryStatus) => {
            const { LayoutEntry } = this.state;
            const { showLoading: mustLoading } = this.props;
            // loading
            let showLoading = false;
            if (mustLoading ||
                (window.jimuConfig.isInBuilder && !LayoutEntry) ||
                (ds && queryStatus === jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.Loading)) {
                showLoading = true;
            }
            return showLoading;
        };
        this.toggleAutoRefreshLoading = (ds, showLoading) => {
            const interval = (ds === null || ds === void 0 ? void 0 : ds.getAutoRefreshInterval()) || 0;
            this.resetAutoRefreshTimes(interval, showLoading);
            if (interval > 0) {
                this.setRefreshLoadingString(showLoading);
            }
        };
        this.setListOutDivRef = current => {
            if (!current)
                return;
            const bottomBoundaryId = `bottomBoundary${this.props.id}`;
            this.listOutDivRef = current;
            this.setListDivSize();
            const bottomBoundary = document.createElement('div');
            bottomBoundary.id = bottomBoundaryId;
            bottomBoundary.className = 'bottom-boundary';
            const listScrollContent = this.listOutDivRef.getElementsByTagName('div')[0];
            this.setScrollContentSize();
            listScrollContent.appendChild(bottomBoundary);
            _utils_utils__WEBPACK_IMPORTED_MODULE_15__.intersectionObserver(document.getElementById(bottomBoundaryId), this.listOutDivRef, this.intersectionObserverCallback);
        };
        this.getDsRecords = (ds, showLoading, listHeight) => {
            const { showSelectionOnly, widgetRect } = this.state;
            const { config, appMode } = this.props;
            const columnCount = (config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID ? this.getItemColumnCount() : null;
            const recordSizePerPage = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getPageSize(widgetRect, listHeight, this.props, columnCount);
            const defaultRecords = this.getDefaultRecords(recordSizePerPage);
            // get new records
            let records = defaultRecords;
            const selectRecords = this.getDsSelectRecords(ds);
            if (ds && config.isItemStyleConfirm) {
                records =
                    (ds &&
                        (config.pageStyle === _config__WEBPACK_IMPORTED_MODULE_2__.PageStyle.Scroll
                            ? ds.getRecordsByPageWithSelection(1, recordSizePerPage * this.state.page)
                            : ds.getRecordsByPageWithSelection(this.state.page, recordSizePerPage))) ||
                        [];
                if (showSelectionOnly) {
                    records = selectRecords;
                }
            }
            if (window.jimuConfig.isInBuilder &&
                appMode !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Run &&
                !showLoading &&
                records.length < 1) {
                records = defaultRecords;
            }
            if (!showLoading || this.isFirstLoad) {
                this.records = records;
            }
            return records;
        };
        this.getDefaultRecords = (pageSize = 3) => {
            pageSize = (pageSize && pageSize > 1) ? pageSize : 3;
            const defaultRecords = [];
            for (let i = 0; i < pageSize; i++) {
                defaultRecords.push(defaultRecordsItem);
            }
            return defaultRecords;
        };
        this.getDsSelectRecords = (ds) => {
            const { config } = this.props;
            // get select records
            let selectRecords;
            if (ds && config.isItemStyleConfirm) {
                selectRecords = ds.getSelectedRecords();
            }
            return selectRecords;
        };
        this.getlistInnerElementType = () => {
            const { config } = this.props;
            const space = (config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID ? config === null || config === void 0 ? void 0 : config.verticalSpace : config === null || config === void 0 ? void 0 : config.space;
            if (this.lastSpace !== space) {
                this.lastSpace = space;
                this.innerElementType = (0,react__WEBPACK_IMPORTED_MODULE_10__.forwardRef)((_a, ref) => {
                    var { style } = _a, rest = __rest(_a, ["style"]);
                    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", Object.assign({ ref: ref, style: Object.assign(Object.assign({}, style), { height: `${parseFloat(style.height) -
                                (config.layoutType === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Column
                                    ? 0
                                    : space)}px`, width: `${parseFloat(style.width) -
                                (config.layoutType !== _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Column
                                    ? 0
                                    : space)}px` }) }, rest)));
                });
            }
        };
        this.getListStyle = () => {
            var _a, _b;
            const { toolsDivWidth, currentCardSize, widgetRect } = this.state;
            const { config, appMode, theme, isHeightAuto, isWidthAuto } = this.props;
            const showBottomTool = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.showBottomTools(this.props, this.state);
            const bottomToolH = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getBottomToolH(this.paginatorDiv.current, showBottomTool);
            const showTopTools = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.showTopTools(this.props);
            const listTemplateDefaultCardSize = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getCardSizeNumberInConfig(this.props, widgetRect);
            const listStyleOption = {
                pageStyle: config === null || config === void 0 ? void 0 : config.pageStyle,
                scrollBarOpen: config === null || config === void 0 ? void 0 : config.scrollBarOpen,
                direction: config === null || config === void 0 ? void 0 : config.direction,
                appMode: appMode,
                theme: theme,
                isHeightAuto: isHeightAuto,
                isWidthAuto: isWidthAuto,
                currentCardSize: currentCardSize,
                listTemplateDefaultCardSize: listTemplateDefaultCardSize,
                showTopTools: showTopTools,
                bottomToolH: bottomToolH,
                topRightToolW: toolsDivWidth,
                hasRecords: ((_b = (_a = this.records) === null || _a === void 0 ? void 0 : _a.length) !== null && _b !== void 0 ? _b : 0) > 0,
                mexSize: this.getListMaxSize(),
                layoutType: config === null || config === void 0 ? void 0 : config.layoutType,
                listLeftPadding: this.getListContentLeftPadding()
            };
            return (0,_styles_style__WEBPACK_IMPORTED_MODULE_5__.listStyle)(listStyleOption);
        };
        this.checkIsShowListMask = (showLoading, records) => {
            const { isInBuilder } = window.jimuConfig;
            const isEditing = this.isEditing();
            const isNoData = !records || records.length < 1;
            const isDataLoadedAndHasData = !(!showLoading && isNoData);
            return isInBuilder && isEditing && isDataLoadedAndHasData;
        };
        this.getOverscanCount = (listHeight) => {
            const { widgetRect } = this.state;
            const { appMode, config } = this.props;
            const columnCount = (config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID ? this.getItemColumnCount() : null;
            const recordSizePerPage = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getPageSize(widgetRect, listHeight, this.props, columnCount);
            const overscanCount = window.jimuConfig.isInBuilder && appMode !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Run
                ? 0
                : recordSizePerPage;
            return overscanCount;
        };
        this.setScrollContentSize = () => {
            var _a;
            if (!this.listOutDivRef)
                return;
            const { layoutType } = (_a = this.props) === null || _a === void 0 ? void 0 : _a.config;
            const listScrollContent = this.listOutDivRef.getElementsByTagName('div')[0];
            if (layoutType === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Column) {
                listScrollContent.style.height = '100%';
            }
            else {
                listScrollContent.style.width = '100%';
            }
        };
        this.intersectionObserverCallback = (isScrollEnd) => {
            var _a, _b;
            const { appMode, config } = this.props;
            const listDiv = this.listOutDivRef;
            const { datasource } = this.state;
            this.setState({
                isScrollEnd: isScrollEnd
            });
            if (!listDiv || ((_b = (_a = this.records) === null || _a === void 0 ? void 0 : _a.length) !== null && _b !== void 0 ? _b : 0) < 1)
                return;
            if (config.pageStyle === _config__WEBPACK_IMPORTED_MODULE_2__.PageStyle.Scroll &&
                this.queryStatus !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceStatus.Loading &&
                datasource &&
                (!window.jimuConfig.isInBuilder ||
                    (appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Run && isScrollEnd)) &&
                this.isHasScrolled) {
                if (this.records.length < this.getTotalCount()) {
                    this.setState({
                        page: this.state.page + 1,
                        scrollStatus: 'end'
                    });
                    this.isSwitchPage = true;
                }
                else {
                    this.setState({
                        scrollStatus: 'end'
                    });
                }
            }
        };
        this.setListDivSize = () => {
            var _a;
            const listDiv = this.listOutDivRef;
            const clientWidth = (listDiv === null || listDiv === void 0 ? void 0 : listDiv.clientWidth) || null;
            const clientHeight = (listDiv === null || listDiv === void 0 ? void 0 : listDiv.clientHeight) || null;
            const toolsDivWidth = ((_a = this.listTopRightToolsDiv.current) === null || _a === void 0 ? void 0 : _a.clientWidth) || 0;
            const listDivBoundRect = (listDiv === null || listDiv === void 0 ? void 0 : listDiv.getBoundingClientRect()) || null;
            const listDivSize = {
                clientWidth: clientWidth,
                clientHeight: clientHeight
            };
            this.setState({
                listDivSize: listDivSize,
                toolsDivWidth: toolsDivWidth,
                listDivBoundRect: listDivBoundRect
            });
        };
        this.getContentLayout = () => {
            const { layoutId, browserSizeMode } = this.props;
            const appConfig = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig;
            const contentWidgetId = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.searchUtils.getWidgetIdThatUseTheLayoutId(appConfig, layoutId);
            const contentLayoutsInfo = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.searchUtils.getContentLayoutInfosInOneSizeMode(appConfig, contentWidgetId, jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutItemType.Widget, browserSizeMode);
            return contentLayoutsInfo;
        };
        this.getContentLayoutSetting = () => {
            var _a, _b, _c, _d, _e;
            const appConfig = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig;
            const { layouts } = appConfig;
            const contentLayoutsInfo = this.getContentLayout();
            const contentLayoutId = (_a = contentLayoutsInfo === null || contentLayoutsInfo === void 0 ? void 0 : contentLayoutsInfo[0]) === null || _a === void 0 ? void 0 : _a.layoutId;
            const contentLayoutItemId = (_b = contentLayoutsInfo === null || contentLayoutsInfo === void 0 ? void 0 : contentLayoutsInfo[0]) === null || _b === void 0 ? void 0 : _b.layoutItemId;
            const setting = (_e = (_d = (_c = layouts === null || layouts === void 0 ? void 0 : layouts[contentLayoutId]) === null || _c === void 0 ? void 0 : _c.content) === null || _d === void 0 ? void 0 : _d[contentLayoutItemId]) === null || _e === void 0 ? void 0 : _e.setting;
            return setting;
        };
        this.getListMaxSize = () => {
            var _a, _b, _c, _d, _e;
            const { boundingBox, heightLayoutItemSizeModes, layoutId, appMode } = this.props;
            const DESIGN_SIZE = 600;
            const isListHeightCustom = heightLayoutItemSizeModes === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.LayoutItemSizeModes.Custom && (boundingBox === null || boundingBox === void 0 ? void 0 : boundingBox.height);
            const bodyHeight = appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design ? DESIGN_SIZE : this.bodySize.clientHeight;
            const maxheight = isListHeightCustom ? boundingBox === null || boundingBox === void 0 ? void 0 : boundingBox.height : bodyHeight;
            const isListHeightCustomUnitPX = isListHeightCustom && !(((_a = boundingBox === null || boundingBox === void 0 ? void 0 : boundingBox.height) === null || _a === void 0 ? void 0 : _a.includes) && ((_b = boundingBox === null || boundingBox === void 0 ? void 0 : boundingBox.height) === null || _b === void 0 ? void 0 : _b.includes('%')));
            let maxSize = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({
                maxWidth: this.bodySize.scrollWidth,
                maxHeight: maxheight
            });
            const appConfig = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig;
            const { layouts } = appConfig;
            const type = (_c = layouts[layoutId]) === null || _c === void 0 ? void 0 : _c.type;
            const setting = this.getContentLayoutSetting();
            const isContentWidthAuto = ((_d = setting === null || setting === void 0 ? void 0 : setting.autoProps) === null || _d === void 0 ? void 0 : _d.width) === 'auto' || (setting === null || setting === void 0 ? void 0 : setting.widthMode) === 'auto';
            const isContentHeightAuto = ((_e = setting === null || setting === void 0 ? void 0 : setting.autoProps) === null || _e === void 0 ? void 0 : _e.height) === 'auto' || (setting === null || setting === void 0 ? void 0 : setting.heightMode) === 'auto';
            if (type === jimu_core__WEBPACK_IMPORTED_MODULE_0__.LayoutType.ColumnLayout && isContentWidthAuto) {
                maxSize = maxSize.set('maxWidth', this.bodySize.clientWidth);
            }
            if (type === 'ROW' && isContentHeightAuto && !isListHeightCustomUnitPX) {
                const maxHeight = appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design ? DESIGN_SIZE : this.bodySize.clientHeight;
                maxSize = maxSize.set('maxHeight', maxHeight);
            }
            maxSize = maxSize.set('maxHeight', this.initElementSize(maxSize.maxHeight));
            maxSize = maxSize.set('maxWidth', this.initElementSize(maxSize.maxWidth));
            return maxSize;
        };
        this.initElementSize = (size) => {
            if (Number(size)) {
                return `${size}px`;
            }
            else if (typeof (size) === 'string') {
                if ((size === null || size === void 0 ? void 0 : size.includes('px')) || (size === null || size === void 0 ? void 0 : size.includes('rem'))) {
                    return size;
                }
                else if (size === null || size === void 0 ? void 0 : size.includes('%')) {
                    return '100%';
                }
            }
            else {
                return size;
            }
        };
        this.getRefreshLoadingClass = () => {
            const { config, appMode } = this.props;
            const { scrollBarOpen, layoutType } = config;
            const isEditor = window.jimuConfig.isInBuilder && appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design;
            if (!scrollBarOpen || isEditor) {
                return '';
            }
            if (layoutType === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Column) {
                return 'horizon-loading';
            }
            else {
                return 'vertical-loading';
            }
        };
        this.resetAutoRefreshTimes = (interval, showLoading = false) => {
            clearTimeout(this.resetAutoRefreshTime);
            if (interval <= 0) {
                clearInterval(this.autoRefreshLoadingTime);
            }
            this.resetAutoRefreshTime = setTimeout(() => {
                if (showLoading && interval > 0) {
                    this.setState({
                        autoRefreshLoadingString: this.formatMessage('lastUpdateAFewTime')
                    });
                }
                this.setState({
                    showLoading: showLoading
                });
            }, 0);
        };
        this.setRefreshLoadingString = (showLoading = false) => {
            if (!showLoading) {
                return false;
            }
            let time = 0;
            clearInterval(this.autoRefreshLoadingTime);
            this.autoRefreshLoadingTime = setInterval(() => {
                time++;
                this.setState({
                    autoRefreshLoadingString: this.getLoadingString(time)
                });
            }, 60000);
        };
        this.getLoadingString = (time) => {
            let loadingString = this.formatMessage('lastUpdateAFewTime');
            if (time > 1 && time <= 2) {
                loadingString = this.formatMessage('lastUpdateAMinute');
            }
            else if (time > 2) {
                loadingString = this.formatMessage('lastUpdateTime', { updateTime: time });
            }
            return loadingString;
        };
        this.onItemsRendered = ({ overscanStartIndex, overscanStopIndex, visibleStartIndex, visibleStopIndex, visibleColumnStartIndex, visibleColumnStopIndex, visibleRowStartIndex, visibleRowStopIndex }) => {
            const { config } = this.props;
            // All index params are numbers.
            this.listVisibleStartIndex = (config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID ? this.getItemIndexByRowAndColumnIndex(visibleRowStartIndex, visibleColumnStartIndex) : visibleStartIndex;
            this.listVisibleStopIndex = (config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID ? this.getItemIndexByRowAndColumnIndex(visibleRowStopIndex, visibleColumnStopIndex) : visibleStopIndex;
            if (this.needRefreshListOnListRendered) {
                this.needRefreshListOnListRendered = false;
                this.refreshList();
            }
            if (this.isSwitchPage) {
                if (config.pageStyle === _config__WEBPACK_IMPORTED_MODULE_2__.PageStyle.Scroll) {
                    if (this.records.length > this.listVisibleStopIndex + 1) {
                        this.isSwitchPage = false;
                        this.onItemsRenderedTimeout = setTimeout(() => {
                            this.handleScrollDown(null);
                        }, 500);
                    }
                }
                else {
                    this.isSwitchPage = false;
                }
            }
        };
        this.getItemIndexByRowAndColumnIndex = (rowIndex, columnIndex) => {
            const columnCount = this.getItemColumnCount();
            return rowIndex * columnCount + columnIndex;
        };
        this.itemSize = index => {
            const { config } = this.props;
            const { currentCardSize } = this.state;
            const isHorizon = (config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Column;
            const space = (config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID ? config === null || config === void 0 ? void 0 : config.verticalSpace : config === null || config === void 0 ? void 0 : config.space;
            // const recordLength = this.records?.length || 0
            // const isLastItem = recordLength - 1 === index
            // const itemWidth = isLastItem ? currentCardSize.width : currentCardSize.width + space
            // const itemHeight = isLastItem ? currentCardSize.height : currentCardSize.height + space
            const itemWidth = currentCardSize.width + space;
            const itemHeight = currentCardSize.height + space;
            const size = isHorizon ? itemWidth : itemHeight;
            // const size = config.direction === DirectionType.Horizon ?
            // ((index === (this.records.length - 1) && index !== 0) ?
            //   currentCardSize.width : (currentCardSize.width + config.space)) :
            //   ((index === (this.records.length - 1) && index !== 0) ?
            //   currentCardSize.height : (currentCardSize.height + config.space))
            return size;
        };
        this.columnWidth = (index, cardWidth, space = 0) => {
            // const columnCount = this.getItemColumnCount()
            // return columnCount === (index + 1) ? cardWidth : cardWidth + space
            return cardWidth + space;
        };
        this.rowHeight = (rowIndex, cardHeight, space = 0) => {
            // const rowCount = this.getItemRowCount()
            // return rowCount === (rowIndex + 1) ? cardHeight : cardHeight + space
            return cardHeight + space;
        };
        this.getItemsByRecords = records => {
            const { config, selectionIsInSelf, selectionIsSelf, builderStatus, appMode, queryObject, useDataSources } = this.props;
            const { datasource, hoverIndex } = this.state;
            const selectedRecordIds = (!datasource || !config.isItemStyleConfirm
                ? []
                : datasource.getSelectedRecordIds()).map(v => v + '');
            return (records &&
                records.map((record, index) => {
                    const isEditor = index === 0 &&
                        window.jimuConfig.isInBuilder &&
                        appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design;
                    const editProps = isEditor
                        ? {
                            hideCardTool: this.state.hideCardTool,
                            selectionIsList: selectionIsSelf,
                            selectionIsInList: selectionIsInSelf,
                            isEditing: this.isEditing(),
                            builderStatus: builderStatus,
                            lockItemRatio: config.lockItemRatio,
                            changeIsResizingCard: this.changeIsResizingCard
                        }
                        : {
                            linkParam: config.linkParam,
                            queryObject: queryObject,
                            useDataSources
                        };
                    return Object.assign(Object.assign({ index, isHover: hoverIndex === index, record: config.isItemStyleConfirm ? record : undefined, active: !record.fake &&
                            config.isItemStyleConfirm &&
                            datasource &&
                            selectedRecordIds.includes(record.getId()) }, this.getOtherProps()), editProps);
                }));
        };
        this.getOtherProps = () => {
            var _a, _b;
            const { config, theme, id, appMode, builderSupportModules, layouts, browserSizeMode, dispatch, isRTL } = this.props;
            const { datasource } = this.state;
            const isWidthPercentage = ((_b = (_a = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getCardSizeWidthUnitInConfig(this.props)) === null || _a === void 0 ? void 0 : _a.width) === null || _b === void 0 ? void 0 : _b.unit) === jimu_ui__WEBPACK_IMPORTED_MODULE_1__.DistanceUnits.PERCENTAGE;
            return {
                browserSizeMode: browserSizeMode,
                space: config.space,
                isRTL: isRTL,
                builderSupportModules: builderSupportModules,
                formatMessage: this.formatMessage,
                dispatch: dispatch,
                widgetId: id,
                interact: window.jimuConfig.isInBuilder &&
                    builderSupportModules.widgetModules.interact,
                selectCard: this.selectCard,
                handleResizeCard: this.handleResizeCard,
                appMode: appMode,
                onChange: this.handleItemChange,
                hoverLayoutOpen: config.cardConfigs[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Hover].enable,
                selectable: config.cardConfigs[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Selected].selectionMode !==
                    _config__WEBPACK_IMPORTED_MODULE_2__.SelectionModeType.None,
                direction: config.direction,
                theme: theme,
                LayoutEntry: this.state.LayoutEntry,
                layouts: layouts,
                layoutType: config === null || config === void 0 ? void 0 : config.layoutType,
                keepAspectRatio: config === null || config === void 0 ? void 0 : config.keepAspectRatio,
                gridItemSizeRatio: config === null || config === void 0 ? void 0 : config.gridItemSizeRatio,
                cardConfigs: config.cardConfigs,
                datasourceId: datasource && datasource.id,
                updateCardToolPosition: this.updateCardToolPosition,
                isWidthPercentage: isWidthPercentage,
                horizontalSpace: config === null || config === void 0 ? void 0 : config.horizontalSpace
            };
        };
        this.itemRender = props => {
            const { appMode, config } = this.props;
            let style = props.style;
            const columnIndex = (props === null || props === void 0 ? void 0 : props.columnIndex) || 0;
            const rowIndex = (props === null || props === void 0 ? void 0 : props.rowIndex) || 0;
            // const rowCount = this.getItemRowCount()
            // const columnCount = this.getItemColumnCount()
            const index = (config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID ? this.getItemIndexByRowAndColumnIndex(rowIndex, columnIndex) : props.index;
            const items = props.data;
            // const recordLength = this.records?.length || 0
            // const isLastItem = recordLength - 1 === index
            switch (config === null || config === void 0 ? void 0 : config.layoutType) {
                case _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Column:
                    style = Object.assign(Object.assign({}, style), { 
                        // width: isLastItem ? `${parseFloat(style.width)}px` : `${parseFloat(style.width) - config.space}px`
                        width: `${parseFloat(style.width) - config.space}px` });
                    break;
                case _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.Row:
                    style = Object.assign(Object.assign({}, style), { 
                        // height: isLastItem ? `${parseFloat(style.height)}px` : `${parseFloat(style.height) - config.space}px`
                        height: `${parseFloat(style.height) - config.space}px` });
                    break;
                case _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID:
                    style = Object.assign(Object.assign({}, style), { height: `${parseFloat(style.height) - (config === null || config === void 0 ? void 0 : config.verticalSpace)}px`, width: `${parseFloat(style === null || style === void 0 ? void 0 : style.width) - (config === null || config === void 0 ? void 0 : config.horizontalSpace)}px` });
                    break;
            }
            const isEditor = index === 0 && window.jimuConfig.isInBuilder && appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design;
            const ListCard = isEditor ? _components_list_card_editor__WEBPACK_IMPORTED_MODULE_6__["default"] : _components_list_card_viewer__WEBPACK_IMPORTED_MODULE_7__["default"];
            if ((items === null || items === void 0 ? void 0 : items.length) < index + 1)
                return null;
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(ListCard, Object.assign({ listStyle: style, widgetId: this.props.id }, items[index], { handleListMouseMove: this.handleListMouseMove, handleListMouseLeave: this.handleListMouseLeave, itemIdex: index })));
        };
        this.itemKey = index => {
            const item = this.records[index];
            return `${((item === null || item === void 0 ? void 0 : item.getId) && (item === null || item === void 0 ? void 0 : item.getId())) || index}`;
        };
        this.gridItemIndex = indexOption => {
            const { columnIndex, rowIndex } = indexOption;
            const index = this.getItemIndexByRowAndColumnIndex(rowIndex, columnIndex);
            const item = this.records[index];
            return `${((item === null || item === void 0 ? void 0 : item.getId) && (item === null || item === void 0 ? void 0 : item.getId())) || index + 100}`;
        };
        this.getItemColumnCount = () => {
            const { widgetRect, currentCardSize } = this.state;
            const { config } = this.props;
            const listWidth = (widgetRect && widgetRect.width) || _config__WEBPACK_IMPORTED_MODULE_2__.LIST_CARD_MIN_SIZE;
            //The actual width of the last column is currentCardSize.width
            //'listWidth-4' is for the width of the scroll bar
            // return Math.floor(((listWidth - 4) - currentCardSize.width) / (currentCardSize.width + config?.horizontalSpace) + 1) || 1
            return Math.floor((listWidth + (config === null || config === void 0 ? void 0 : config.horizontalSpace)) / (currentCardSize.width + (config === null || config === void 0 ? void 0 : config.horizontalSpace))) || 1;
        };
        this.getItemRowCount = () => {
            return Math.ceil(this.records.length / this.getItemColumnCount()) || 1;
        };
        this.getListContentLeftPadding = () => {
            const { widgetRect, currentCardSize } = this.state;
            const { config } = this.props;
            const listWidth = (widgetRect && widgetRect.width) || _config__WEBPACK_IMPORTED_MODULE_2__.LIST_CARD_MIN_SIZE;
            const rowWidth = this.getItemColumnCount() * (currentCardSize.width + (config === null || config === void 0 ? void 0 : config.horizontalSpace)) - (config === null || config === void 0 ? void 0 : config.horizontalSpace);
            let padding;
            switch (config === null || config === void 0 ? void 0 : config.gridAlignment) {
                case jimu_ui__WEBPACK_IMPORTED_MODULE_1__.TextAlignValue.LEFT:
                    padding = 0;
                    break;
                case jimu_ui__WEBPACK_IMPORTED_MODULE_1__.TextAlignValue.RIGHT:
                    padding = listWidth - rowWidth - 4;
                    break;
                default:
                    padding = (listWidth - rowWidth) / 2;
                    break;
            }
            if ((config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID) {
                return padding > 0 ? padding : 0;
            }
            else {
                return 0;
            }
        };
        const { config } = props;
        this.paginatorDiv = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createRef();
        this.listTopRightToolsDiv = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createRef();
        const stateObj = {
            LayoutEntry: null,
            page: 1,
            sortOptionName: config.sorts && config.sorts[0] && config.sorts[0].ruleOptionName,
            currentCardSize: _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getCardSizeNumberInConfig(props, _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getDefaultMinListSize(props)),
            forceShowMask: false,
            widgetRect: _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getDefaultMinListSize(props),
            showList: true,
            searchText: '',
            currentFilter: undefined,
            filterApplied: false,
            showSelectionOnly: false,
            hideCardTool: false,
            scrollStatus: 'start',
            datasource: undefined,
            hoverIndex: -1,
            isScrolling: false,
            isScrollSpeedOver: false,
            isResizingCard: false,
            searchSuggestion: [],
            isSearchBoxVisible: false,
            isOpenTopToolsPopper: false,
            latestUpdateTime: 0,
            showLoading: false,
            autoRefreshLoadingString: '',
            listDivSize: {
                clientWidth: null,
                clientHeight: null
            },
            toolsDivWidth: null,
            listDivBoundRect: null,
            isScrollEnd: false,
            isMount: false
        };
        this.selectSelf = this.selectSelf.bind(this);
        this.handleResizeCard = this.handleResizeCard.bind(this);
        this.listRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createRef();
        if (window.jimuConfig.isInBuilder) {
            stateObj.LayoutEntry = this.props.builderSupportModules.LayoutEntry;
        }
        else {
            stateObj.LayoutEntry = jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.LayoutEntry;
        }
        this.state = stateObj;
        this.onResize = this.onResize.bind(this);
        this.changeIsResizingCard = this.changeIsResizingCard.bind(this);
        this.setRefreshLoadingString = this.setRefreshLoadingString.bind(this);
        this.resetAutoRefreshTimes = this.resetAutoRefreshTimes.bind(this);
        this.debounceOnResize = jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.debounce((width, height) => this.onResize(width, height), 200);
        this.debounceResetAfterIndices = jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.debounce(() => this.resetAfterIndices(), 200);
    }
    componentDidMount() {
        this.setState({
            isMount: true
        });
        this.getBodySize();
        window.addEventListener('resize', this.getBodySize);
        // const {outputDataSources, useDataSources} = this.props
        // if(this.records != defaultRecords){
        //   listUtils.createOutputDs(this.records, outputDataSources?.[0], useDataSources?.[0]);
        // }
    }
    componentWillUnmount() {
        clearTimeout(this.resizeTimeout);
        clearTimeout(this.updateCardToolTimeout);
        clearTimeout(this.mouseClickTimeout);
        clearTimeout(this.suggestionsQueryTimeout);
        clearTimeout(this.showPopperTimeOut);
        clearTimeout(this.resetAutoRefreshTime);
        clearTimeout(this.setPageTimeout);
        clearTimeout(this.onItemsRenderedTimeout);
        clearInterval(this.autoRefreshLoadingTime);
    }
    componentDidUpdate(preProps, preState) {
        var _a;
        const { config, appMode } = this.props;
        const { datasource } = this.state;
        if (!window.jimuConfig.isInBuilder || appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Run) {
            // Listen selected records change from outside
            if (datasource &&
                config.cardConfigs[_config__WEBPACK_IMPORTED_MODULE_2__.Status.Selected].selectionMode !==
                    _config__WEBPACK_IMPORTED_MODULE_2__.SelectionModeType.None) {
                this.scrollToSelectedItems(datasource);
            }
        }
        // updade list in builder
        this.updateListInBuilder(preProps, preState);
        // listen appMode change
        this.appModeChange(preProps);
        if ((preProps === null || preProps === void 0 ? void 0 : preProps.selectionIsInSelf) !== ((_a = this.props) === null || _a === void 0 ? void 0 : _a.selectionIsInSelf)) {
            this.setSelectionStatus();
        }
        this.setListLayoutInWidgetState();
        this.setListParentSizeInWidgetState();
        // update output ds
        // if(this.records != defaultRecords){
        //   listUtils.createOutputDs(this.records, outputDataSources?.[0], useDataSources?.[0]);
        // }
    }
    changeIsResizingCard(isResizingCard) {
        this.setState({
            isResizingCard: isResizingCard
        });
    }
    handleResizeCard(newCardSize, resizeEnd = false, isTop, isLeft, isReplace = false) {
        if (resizeEnd) {
            const cardSize = this.initNewCardSize(newCardSize);
            window.jimuConfig.isInBuilder &&
                this.props.builderSupportModules.widgetModules.handleResizeCard(this.props, cardSize, isTop, isLeft, resizeEnd, isReplace);
        }
        else {
            this.setState({
                currentCardSize: newCardSize
            }, () => {
                this.refreshList(false);
            });
        }
    }
    selectSelf() {
        window.jimuConfig.isInBuilder &&
            this.props.builderSupportModules.widgetModules.selectSelf(this.props);
    }
    getOutputDs() {
        const outputDsId = this.props.outputDataSources && this.props.outputDataSources[0];
        const useDs = this.props.useDataSources && this.props.useDataSources[0];
        if (!outputDsId || !useDs)
            return;
        const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceManager.getInstance();
        return dsManager.getDataSource(outputDsId);
    }
    render() {
        const { config, id, appMode, browserSizeMode, selectionIsInSelf, selectionIsSelf, useDataSources, builderStatus, layouts } = this.props;
        const appConfig = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig;
        const { forceShowMask, datasource, widgetRect, page } = this.state;
        const isInBuilder = window.jimuConfig.isInBuilder;
        const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-widget', 'widget-list', 'list-widget-' + id);
        if (!config.itemStyle) {
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.WidgetPlaceholder, { widgetId: this.props.id, icon: __webpack_require__(/*! ./assets/icon.svg */ "./extensions/widgets/common/list/src/runtime/assets/icon.svg"), message: this.formatMessage('placeHolderTip') }));
        }
        const showBottomTool = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.showBottomTools(this.props, this.state);
        const bottomToolH = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getBottomToolH(this.paginatorDiv.current, showBottomTool);
        const showTopTools = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.showTopTools(this.props);
        const listHeight = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getListHeight(widgetRect, bottomToolH, showTopTools);
        const columnCount = (config === null || config === void 0 ? void 0 : config.layoutType) === _config__WEBPACK_IMPORTED_MODULE_2__.ListLayoutType.GRID ? this.getItemColumnCount() : null;
        const pageSize = _utils_utils__WEBPACK_IMPORTED_MODULE_15__.getPageSize(widgetRect, listHeight, this.props, columnCount);
        this.pageSize = pageSize;
        const queryPageSize = pageSize;
        let query = (0,_utils_list_service__WEBPACK_IMPORTED_MODULE_4__.getQueryOptions)(this.state, this.props, queryPageSize);
        if (!(0,_utils_list_service__WEBPACK_IMPORTED_MODULE_4__.compareQueryOptionsExceptPaging)(query, this.lastQuery, datasource) && datasource) {
            const temp = query;
            if (page !== 1) {
                query = this.lastQuery;
                this.lastQuery = temp;
                this.setState({
                    page: 1
                });
            }
            else {
                this.lastQuery = temp;
            }
        }
        const currentLayout = appConfig === null || appConfig === void 0 ? void 0 : appConfig.layouts[jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.searchUtils.findLayoutId(layouts[builderStatus], browserSizeMode, appConfig.mainSizeMode)];
        const currentLayoutType = currentLayout && currentLayout.type;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: classes, css: (0,_styles_style__WEBPACK_IMPORTED_MODULE_5__.getStyle)(this.props, this.isEditing(), showBottomTool), onPointerDown: evt => isInBuilder &&
                appMode !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Run &&
                !selectionIsSelf &&
                !selectionIsInSelf &&
                this.handleListPointerDown(evt) },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'widget-list d-flex' },
                this.isDsConfigured()
                    ? ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceComponent, { query: datasource ? query : null, useDataSource: useDataSources && useDataSources[0], onDataSourceCreated: this.onDSCreated, widgetId: this.props.id, queryCount: true }, this.renderList))
                    : (this.renderList()),
                !this.isHasRenderList && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'list-loading-con w-100 h-100' },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'jimu-secondary-loading' })))),
            isInBuilder &&
                appMode !== jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Run &&
                (forceShowMask ||
                    (!selectionIsInSelf && !selectionIsSelf) ||
                    (!config.isItemStyleConfirm && currentLayoutType)) && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'list-with-mask' })),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactResizeDetector, { handleWidth: true, handleHeight: true, onResize: this.debounceOnResize })));
    }
}
Widget.versionManager = _version_manager__WEBPACK_IMPORTED_MODULE_14__.versionManager;
Widget.mapExtraStateProps = (state, props) => {
    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t;
    const appConfig = state && state.appConfig;
    const { layouts, layoutId, layoutItemId, builderSupportModules, id } = props;
    const browserSizeMode = state && state.browserSizeMode;
    const builderStatus = (state &&
        state.widgetsState &&
        state.widgetsState[props.id] &&
        state.widgetsState[props.id].builderStatus) ||
        _config__WEBPACK_IMPORTED_MODULE_2__.Status.Regular;
    let subLayoutType;
    if (appConfig) {
        const subLayout = appConfig &&
            state.appConfig.layouts &&
            state.appConfig.layouts[jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.searchUtils.findLayoutId(layouts[builderStatus], browserSizeMode, appConfig.mainSizeMode)];
        subLayoutType = subLayout && subLayout.type;
    }
    const layout = (_a = appConfig.layouts) === null || _a === void 0 ? void 0 : _a[layoutId];
    const layoutSetting = (_c = (_b = layout === null || layout === void 0 ? void 0 : layout.content) === null || _b === void 0 ? void 0 : _b[layoutItemId]) === null || _c === void 0 ? void 0 : _c.setting;
    const isHeightAuto = ((_d = layoutSetting === null || layoutSetting === void 0 ? void 0 : layoutSetting.autoProps) === null || _d === void 0 ? void 0 : _d.height) === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.LayoutItemSizeModes.Auto ||
        ((_e = layoutSetting === null || layoutSetting === void 0 ? void 0 : layoutSetting.autoProps) === null || _e === void 0 ? void 0 : _e.height) === true;
    const isWidthAuto = ((_f = layoutSetting === null || layoutSetting === void 0 ? void 0 : layoutSetting.autoProps) === null || _f === void 0 ? void 0 : _f.width) === jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.LayoutItemSizeModes.Auto ||
        ((_g = layoutSetting === null || layoutSetting === void 0 ? void 0 : layoutSetting.autoProps) === null || _g === void 0 ? void 0 : _g.width) === true;
    let widgetPosition;
    if (window.jimuConfig.isInBuilder) {
        const bbox = (_l = (_k = (_j = (_h = appConfig.layouts) === null || _h === void 0 ? void 0 : _h[layoutId]) === null || _j === void 0 ? void 0 : _j.content) === null || _k === void 0 ? void 0 : _k[layoutItemId]) === null || _l === void 0 ? void 0 : _l.bbox;
        widgetPosition = bbox && {
            left: bbox.left,
            top: bbox.top
        };
    }
    const selection = state && state.appRuntimeInfo && state.appRuntimeInfo.selection;
    const selectionIsInSelf = selection &&
        builderSupportModules &&
        builderSupportModules.widgetModules &&
        builderSupportModules.widgetModules.selectionInList(selection, id, appConfig, false);
    let selectionStatus;
    if (selectionIsInSelf) {
        selectionStatus = Object.keys(layouts).find(status => jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_3__.searchUtils.findLayoutId(layouts[status], browserSizeMode, appConfig.mainSizeMode) === selection.layoutId);
    }
    const selectionIsSelf = !!(selection &&
        selection.layoutId === layoutId &&
        selection.layoutItemId === layoutItemId);
    return {
        selectionIsSelf: selectionIsSelf,
        selectionIsInSelf: !!selectionIsInSelf,
        selectionStatus,
        appMode: (_m = state === null || state === void 0 ? void 0 : state.appRuntimeInfo) === null || _m === void 0 ? void 0 : _m.appMode,
        browserSizeMode: state && state.browserSizeMode,
        builderStatus: (state &&
            state.widgetsState &&
            state.widgetsState[props.id] &&
            state.widgetsState[props.id].builderStatus) ||
            _config__WEBPACK_IMPORTED_MODULE_2__.Status.Regular,
        showLoading: (_p = (_o = state === null || state === void 0 ? void 0 : state.widgetsState) === null || _o === void 0 ? void 0 : _o[props.id]) === null || _p === void 0 ? void 0 : _p.showLoading,
        isRTL: state && state.appContext && state.appContext.isRTL,
        subLayoutType,
        left: widgetPosition && widgetPosition.left,
        top: widgetPosition && widgetPosition.top,
        isHeightAuto,
        isWidthAuto,
        queryObject: state.queryObject,
        boundingBox: (_r = (_q = layout === null || layout === void 0 ? void 0 : layout.content) === null || _q === void 0 ? void 0 : _q[layoutItemId]) === null || _r === void 0 ? void 0 : _r.bbox,
        heightLayoutItemSizeModes: (_s = layoutSetting === null || layoutSetting === void 0 ? void 0 : layoutSetting.autoProps) === null || _s === void 0 ? void 0 : _s.height,
        parentSize: ((_t = state.widgetsState[props.id]) === null || _t === void 0 ? void 0 : _t.parentSize) || null
    };
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Widget);

})();

/******/ 	return __webpack_exports__;
/******/ })()

			);
		}
	};
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jb21tb24vbGlzdC9kaXN0L3J1bnRpbWUvd2lkZ2V0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHNCQUFzQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxpRUFBZSxVQUFVLEVBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2hEZ0M7QUFDNEI7QUFDaEI7QUFDakM7QUFDZ0I7QUFDK0M7O0FBRXBHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGVBQWU7O0FBRWY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QixtQ0FBbUM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjs7QUFFQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOzs7QUFHQTtBQUNBO0FBQ0E7O0FBRUEsSUFBSSxJQUFxQztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksb0ZBQWM7O0FBRWxCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw0REFBNEQsNEZBQXNCO0FBQ2xGO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiw0RkFBc0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyx1REFBVTtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0EsNEJBQTRCLHVEQUFVO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLGlDQUFpQyx1REFBVTtBQUMzQztBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxpREFBaUQ7QUFDakQ7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZOzs7QUFHWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHlGQUF5RjtBQUN6RjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSw0Q0FBNEMsMkJBQTJCO0FBQ3ZFLG9EQUFvRCxpQ0FBaUM7QUFDckYsdUJBQXVCLG9EQUFhO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLFFBQVE7QUFDUjs7O0FBR0E7QUFDQTtBQUNBLGFBQWEsb0RBQWE7QUFDMUI7QUFDQTtBQUNBO0FBQ0EsZUFBZSw4RUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPLEVBQUUsb0RBQWE7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGdIQUFnSDtBQUNoSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsNEdBQTRHO0FBQzVHOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRyxDQUFDLGdEQUFhO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE1BQU0sSUFBcUM7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkM7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkM7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx3Q0FBd0MsWUFBWTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw2RUFBNkU7QUFDN0U7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxRQUFRO0FBQ1I7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBOzs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxRQUFRLElBQXFDO0FBQzdDO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7OztBQUdBO0FBQ0E7O0FBRUEsSUFBSSxJQUFxQztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLG9GQUFjOztBQUVsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsNERBQTRELDRGQUFzQjtBQUNsRjtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsNEZBQXNCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyx1REFBVTtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBLDRCQUE0Qix1REFBVTtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsVUFBVTtBQUNWOztBQUVBLDRFQUE0RTs7QUFFNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxpQ0FBaUMsdURBQVU7QUFDM0M7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZOzs7QUFHWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7OztBQUdaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHVDQUF1Qzs7QUFFdkM7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHVDQUF1Qzs7QUFFdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdEOztBQUVoRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLHNDQUFzQyxxQkFBcUI7QUFDM0Qs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QUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsd0RBQXdEO0FBQ3hELEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxRQUFRLElBQXFDO0FBQzdDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esc0JBQXNCO0FBQ3RCLFlBQVk7QUFDWixtQ0FBbUM7QUFDbkMsWUFBWTtBQUNaO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLFVBQVU7QUFDVjtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsd0RBQXdEO0FBQ3hELEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUEsUUFBUSxJQUFxQztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FB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ZUFBZTtRQUMvQyxhQUFhLEVBQ1gsQ0FBQyxLQUFLO1lBQ0osS0FBSyxDQUFDLFlBQVk7WUFDbEIsS0FBSyxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDO1lBQzVCLEtBQUssQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDLGFBQWEsQ0FBQztZQUM3QyxtREFBYztRQUNoQixXQUFXLEVBQUUsaUJBQUssYUFBTCxLQUFLLHVCQUFMLEtBQUssQ0FBRSxZQUFZLDBDQUFHLEtBQUssQ0FBQyxFQUFFLENBQUMsMENBQUUsV0FBVztRQUN6RCxLQUFLLEVBQUUsS0FBSyxJQUFJLEtBQUssQ0FBQyxVQUFVLElBQUksS0FBSyxDQUFDLFVBQVUsQ0FBQyxLQUFLO1FBQzFELGFBQWE7UUFDYixJQUFJLEVBQUUsY0FBYyxJQUFJLGNBQWMsQ0FBQyxJQUFJO1FBQzNDLEdBQUcsRUFBRSxjQUFjLElBQUksY0FBYyxDQUFDLEdBQUc7UUFDekMsWUFBWTtRQUNaLFdBQVc7UUFDWCxXQUFXLEVBQUUsS0FBSyxDQUFDLFdBQVc7UUFDOUIsV0FBVyxFQUFFLGtCQUFNLGFBQU4sTUFBTSx1QkFBTixNQUFNLENBQUUsT0FBTywwQ0FBRyxZQUFZLENBQUMsMENBQUUsSUFBSTtRQUNsRCx5QkFBeUIsRUFBRSxtQkFBYSxhQUFiLGFBQWEsdUJBQWIsYUFBYSxDQUFFLFNBQVMsMENBQUUsTUFBTTtRQUMzRCxVQUFVLEVBQUUsWUFBSyxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLDBDQUFFLFVBQVUsS0FBSSxJQUFJO0tBQzdEO0FBQ0gsQ0FBQztBQXUxRUgsaUVBQWUsTUFBTSIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvbWVtb2l6ZS1vbmUvZGlzdC9tZW1vaXplLW9uZS5lc20uanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9yZWFjdC13aW5kb3cvZGlzdC9pbmRleC5lc20uanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9jb21tb24vbGlzdC9zcmMvcnVudGltZS9hc3NldHMvaWNvbi5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2JyYW5kL3dpZGdldC1maWx0ZXIuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9hcnJvdy1sZWZ0LnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvZG93bi5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL2xlZnQuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9yaWdodC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL3VwLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZWRpdG9yL2Nsb3NlLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZWRpdG9yL21lbnUuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9lZGl0b3IvcmVzZXQuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9lZGl0b3Ivc2VhcmNoLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9zdmcvb3V0bGluZWQvZWRpdG9yL3Nob3ctc2VsZWN0aW9uLS1ydGwuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9lZGl0b3Ivc2hvdy1zZWxlY3Rpb24uc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9lZGl0b3Ivc3luYy1vZmYuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9lZGl0b3Ivc3luYy1vbi5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2VkaXRvci90cmFzaC1jaGVjay5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL3N1Z2dlc3RlZC93YXJuaW5nLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2NvbW1vbi9saXN0L3NyYy9jb25maWcudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9jb21tb24vbGlzdC9zcmMvcnVudGltZS9jb21wb25lbnRzL2JvdHRvbS10b29scy50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9jb21tb24vbGlzdC9zcmMvcnVudGltZS9jb21wb25lbnRzL2ZpbHRlci1waWNrZXIudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvY29tbW9uL2xpc3Qvc3JjL3J1bnRpbWUvY29tcG9uZW50cy9saXN0LWNhcmQtYmFzZS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9jb21tb24vbGlzdC9zcmMvcnVudGltZS9jb21wb25lbnRzL2xpc3QtY2FyZC1lZGl0b3IudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvY29tbW9uL2xpc3Qvc3JjL3J1bnRpbWUvY29tcG9uZW50cy9saXN0LWNhcmQtdmlld2VyLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2NvbW1vbi9saXN0L3NyYy9ydW50aW1lL2NvbXBvbmVudHMvbXktZHJvcGRvd24udHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvY29tbW9uL2xpc3Qvc3JjL3J1bnRpbWUvY29tcG9uZW50cy9zZWFyY2gtYm94LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2NvbW1vbi9saXN0L3NyYy9ydW50aW1lL3N0eWxlcy9zdHlsZS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9jb21tb24vbGlzdC9zcmMvcnVudGltZS90cmFuc2xhdGlvbnMvZGVmYXVsdC50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2NvbW1vbi9saXN0L3NyYy9ydW50aW1lL3V0aWxzL2xpc3Qtc2VydmljZS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9jb21tb24vbGlzdC9zcmMvcnVudGltZS91dGlscy91dGlscy50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9jb21tb24vbGlzdC9zcmMvdmVyc2lvbi1tYW5hZ2VyLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL291dGxpbmVkL2JyYW5kL3dpZGdldC1maWx0ZXIudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL291dGxpbmVkL2RpcmVjdGlvbmFsL2Fycm93LWxlZnQudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL291dGxpbmVkL2RpcmVjdGlvbmFsL2Rvd24udHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL291dGxpbmVkL2RpcmVjdGlvbmFsL2xlZnQudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL291dGxpbmVkL2RpcmVjdGlvbmFsL3JpZ2h0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC91cC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvb3V0bGluZWQvZWRpdG9yL2Nsb3NlLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9lZGl0b3IvbWVudS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvb3V0bGluZWQvZWRpdG9yL3Jlc2V0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9lZGl0b3Ivc2VhcmNoLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1pY29ucy9vdXRsaW5lZC9lZGl0b3Ivc2hvdy1zZWxlY3Rpb24udHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL291dGxpbmVkL2VkaXRvci9zeW5jLW9mZi50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvb3V0bGluZWQvZWRpdG9yL3N5bmMtb24udHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL291dGxpbmVkL2VkaXRvci90cmFzaC1jaGVjay50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvb3V0bGluZWQvc3VnZ2VzdGVkL3dhcm5pbmcudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwiamltdS1jb3JlXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LWNvcmUvcmVhY3RcIiIsIndlYnBhY2s6Ly9leGItY2xpZW50L2V4dGVybmFsIHN5c3RlbSBcImppbXUtbGF5b3V0cy9sYXlvdXQtcnVudGltZVwiIiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwiamltdS11aVwiIiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwiamltdS11aS9iYXNpYy9zcWwtZXhwcmVzc2lvbi1ydW50aW1lXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzLmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHNMb29zZS5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zZXRQcm90b3R5cGVPZi5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2V4Yi1jbGllbnQvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2V4Yi1jbGllbnQvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9leGItY2xpZW50L3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWNvcmUvbGliL3NldC1wdWJsaWMtcGF0aC50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2NvbW1vbi9saXN0L3NyYy9ydW50aW1lL3dpZGdldC50c3giXSwic291cmNlc0NvbnRlbnQiOlsidmFyIHNhZmVJc05hTiA9IE51bWJlci5pc05hTiB8fFxuICAgIGZ1bmN0aW9uIHBvbnlmaWxsKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInICYmIHZhbHVlICE9PSB2YWx1ZTtcbiAgICB9O1xuZnVuY3Rpb24gaXNFcXVhbChmaXJzdCwgc2Vjb25kKSB7XG4gICAgaWYgKGZpcnN0ID09PSBzZWNvbmQpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChzYWZlSXNOYU4oZmlyc3QpICYmIHNhZmVJc05hTihzZWNvbmQpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBhcmVJbnB1dHNFcXVhbChuZXdJbnB1dHMsIGxhc3RJbnB1dHMpIHtcbiAgICBpZiAobmV3SW5wdXRzLmxlbmd0aCAhPT0gbGFzdElucHV0cy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5ld0lucHV0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoIWlzRXF1YWwobmV3SW5wdXRzW2ldLCBsYXN0SW5wdXRzW2ldKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBtZW1vaXplT25lKHJlc3VsdEZuLCBpc0VxdWFsKSB7XG4gICAgaWYgKGlzRXF1YWwgPT09IHZvaWQgMCkgeyBpc0VxdWFsID0gYXJlSW5wdXRzRXF1YWw7IH1cbiAgICB2YXIgbGFzdFRoaXM7XG4gICAgdmFyIGxhc3RBcmdzID0gW107XG4gICAgdmFyIGxhc3RSZXN1bHQ7XG4gICAgdmFyIGNhbGxlZE9uY2UgPSBmYWxzZTtcbiAgICBmdW5jdGlvbiBtZW1vaXplZCgpIHtcbiAgICAgICAgdmFyIG5ld0FyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIG5ld0FyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2FsbGVkT25jZSAmJiBsYXN0VGhpcyA9PT0gdGhpcyAmJiBpc0VxdWFsKG5ld0FyZ3MsIGxhc3RBcmdzKSkge1xuICAgICAgICAgICAgcmV0dXJuIGxhc3RSZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgbGFzdFJlc3VsdCA9IHJlc3VsdEZuLmFwcGx5KHRoaXMsIG5ld0FyZ3MpO1xuICAgICAgICBjYWxsZWRPbmNlID0gdHJ1ZTtcbiAgICAgICAgbGFzdFRoaXMgPSB0aGlzO1xuICAgICAgICBsYXN0QXJncyA9IG5ld0FyZ3M7XG4gICAgICAgIHJldHVybiBsYXN0UmVzdWx0O1xuICAgIH1cbiAgICByZXR1cm4gbWVtb2l6ZWQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IG1lbW9pemVPbmU7XG4iLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSAnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZXh0ZW5kcyc7XG5pbXBvcnQgX2Fzc2VydFRoaXNJbml0aWFsaXplZCBmcm9tICdAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQnO1xuaW1wb3J0IF9pbmhlcml0c0xvb3NlIGZyb20gJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzTG9vc2UnO1xuaW1wb3J0IG1lbW9pemVPbmUgZnJvbSAnbWVtb2l6ZS1vbmUnO1xuaW1wb3J0IHsgY3JlYXRlRWxlbWVudCwgUHVyZUNvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZSBmcm9tICdAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlJztcblxuLy8gQW5pbWF0aW9uIGZyYW1lIGJhc2VkIGltcGxlbWVudGF0aW9uIG9mIHNldFRpbWVvdXQuXG4vLyBJbnNwaXJlZCBieSBKb2UgTGFtYmVydCwgaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vam9lbGFtYmVydC8xMDAyMTE2I2ZpbGUtcmVxdWVzdHRpbWVvdXQtanNcbnZhciBoYXNOYXRpdmVQZXJmb3JtYW5jZU5vdyA9IHR5cGVvZiBwZXJmb3JtYW5jZSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHBlcmZvcm1hbmNlLm5vdyA9PT0gJ2Z1bmN0aW9uJztcbnZhciBub3cgPSBoYXNOYXRpdmVQZXJmb3JtYW5jZU5vdyA/IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHBlcmZvcm1hbmNlLm5vdygpO1xufSA6IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIERhdGUubm93KCk7XG59O1xuZnVuY3Rpb24gY2FuY2VsVGltZW91dCh0aW1lb3V0SUQpIHtcbiAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGltZW91dElELmlkKTtcbn1cbmZ1bmN0aW9uIHJlcXVlc3RUaW1lb3V0KGNhbGxiYWNrLCBkZWxheSkge1xuICB2YXIgc3RhcnQgPSBub3coKTtcblxuICBmdW5jdGlvbiB0aWNrKCkge1xuICAgIGlmIChub3coKSAtIHN0YXJ0ID49IGRlbGF5KSB7XG4gICAgICBjYWxsYmFjay5jYWxsKG51bGwpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aW1lb3V0SUQuaWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGljayk7XG4gICAgfVxuICB9XG5cbiAgdmFyIHRpbWVvdXRJRCA9IHtcbiAgICBpZDogcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRpY2spXG4gIH07XG4gIHJldHVybiB0aW1lb3V0SUQ7XG59XG5cbnZhciBzaXplID0gLTE7IC8vIFRoaXMgdXRpbGl0eSBjb3BpZWQgZnJvbSBcImRvbS1oZWxwZXJzXCIgcGFja2FnZS5cblxuZnVuY3Rpb24gZ2V0U2Nyb2xsYmFyU2l6ZShyZWNhbGN1bGF0ZSkge1xuICBpZiAocmVjYWxjdWxhdGUgPT09IHZvaWQgMCkge1xuICAgIHJlY2FsY3VsYXRlID0gZmFsc2U7XG4gIH1cblxuICBpZiAoc2l6ZSA9PT0gLTEgfHwgcmVjYWxjdWxhdGUpIHtcbiAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdmFyIHN0eWxlID0gZGl2LnN0eWxlO1xuICAgIHN0eWxlLndpZHRoID0gJzUwcHgnO1xuICAgIHN0eWxlLmhlaWdodCA9ICc1MHB4JztcbiAgICBzdHlsZS5vdmVyZmxvdyA9ICdzY3JvbGwnO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICBzaXplID0gZGl2Lm9mZnNldFdpZHRoIC0gZGl2LmNsaWVudFdpZHRoO1xuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZGl2KTtcbiAgfVxuXG4gIHJldHVybiBzaXplO1xufVxudmFyIGNhY2hlZFJUTFJlc3VsdCA9IG51bGw7IC8vIFRSSUNLWSBBY2NvcmRpbmcgdG8gdGhlIHNwZWMsIHNjcm9sbExlZnQgc2hvdWxkIGJlIG5lZ2F0aXZlIGZvciBSVEwgYWxpZ25lZCBlbGVtZW50cy5cbi8vIENocm9tZSBkb2VzIG5vdCBzZWVtIHRvIGFkaGVyZTsgaXRzIHNjcm9sbExlZnQgdmFsdWVzIGFyZSBwb3NpdGl2ZSAobWVhc3VyZWQgcmVsYXRpdmUgdG8gdGhlIGxlZnQpLlxuLy8gU2FmYXJpJ3MgZWxhc3RpYyBib3VuY2UgbWFrZXMgZGV0ZWN0aW5nIHRoaXMgZXZlbiBtb3JlIGNvbXBsaWNhdGVkIHdydCBwb3RlbnRpYWwgZmFsc2UgcG9zaXRpdmVzLlxuLy8gVGhlIHNhZmVzdCB3YXkgdG8gY2hlY2sgdGhpcyBpcyB0byBpbnRlbnRpb25hbGx5IHNldCBhIG5lZ2F0aXZlIG9mZnNldCxcbi8vIGFuZCB0aGVuIHZlcmlmeSB0aGF0IHRoZSBzdWJzZXF1ZW50IFwic2Nyb2xsXCIgZXZlbnQgbWF0Y2hlcyB0aGUgbmVnYXRpdmUgb2Zmc2V0LlxuLy8gSWYgaXQgZG9lcyBub3QgbWF0Y2gsIHRoZW4gd2UgY2FuIGFzc3VtZSBhIG5vbi1zdGFuZGFyZCBSVEwgc2Nyb2xsIGltcGxlbWVudGF0aW9uLlxuXG5mdW5jdGlvbiBnZXRSVExPZmZzZXRUeXBlKHJlY2FsY3VsYXRlKSB7XG4gIGlmIChyZWNhbGN1bGF0ZSA9PT0gdm9pZCAwKSB7XG4gICAgcmVjYWxjdWxhdGUgPSBmYWxzZTtcbiAgfVxuXG4gIGlmIChjYWNoZWRSVExSZXN1bHQgPT09IG51bGwgfHwgcmVjYWxjdWxhdGUpIHtcbiAgICB2YXIgb3V0ZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB2YXIgb3V0ZXJTdHlsZSA9IG91dGVyRGl2LnN0eWxlO1xuICAgIG91dGVyU3R5bGUud2lkdGggPSAnNTBweCc7XG4gICAgb3V0ZXJTdHlsZS5oZWlnaHQgPSAnNTBweCc7XG4gICAgb3V0ZXJTdHlsZS5vdmVyZmxvdyA9ICdzY3JvbGwnO1xuICAgIG91dGVyU3R5bGUuZGlyZWN0aW9uID0gJ3J0bCc7XG4gICAgdmFyIGlubmVyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdmFyIGlubmVyU3R5bGUgPSBpbm5lckRpdi5zdHlsZTtcbiAgICBpbm5lclN0eWxlLndpZHRoID0gJzEwMHB4JztcbiAgICBpbm5lclN0eWxlLmhlaWdodCA9ICcxMDBweCc7XG4gICAgb3V0ZXJEaXYuYXBwZW5kQ2hpbGQoaW5uZXJEaXYpO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQob3V0ZXJEaXYpO1xuXG4gICAgaWYgKG91dGVyRGl2LnNjcm9sbExlZnQgPiAwKSB7XG4gICAgICBjYWNoZWRSVExSZXN1bHQgPSAncG9zaXRpdmUtZGVzY2VuZGluZyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIG91dGVyRGl2LnNjcm9sbExlZnQgPSAxO1xuXG4gICAgICBpZiAob3V0ZXJEaXYuc2Nyb2xsTGVmdCA9PT0gMCkge1xuICAgICAgICBjYWNoZWRSVExSZXN1bHQgPSAnbmVnYXRpdmUnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FjaGVkUlRMUmVzdWx0ID0gJ3Bvc2l0aXZlLWFzY2VuZGluZyc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChvdXRlckRpdik7XG4gICAgcmV0dXJuIGNhY2hlZFJUTFJlc3VsdDtcbiAgfVxuXG4gIHJldHVybiBjYWNoZWRSVExSZXN1bHQ7XG59XG5cbnZhciBJU19TQ1JPTExJTkdfREVCT1VOQ0VfSU5URVJWQUwgPSAxNTA7XG5cbnZhciBkZWZhdWx0SXRlbUtleSA9IGZ1bmN0aW9uIGRlZmF1bHRJdGVtS2V5KF9yZWYpIHtcbiAgdmFyIGNvbHVtbkluZGV4ID0gX3JlZi5jb2x1bW5JbmRleCxcbiAgICAgIGRhdGEgPSBfcmVmLmRhdGEsXG4gICAgICByb3dJbmRleCA9IF9yZWYucm93SW5kZXg7XG4gIHJldHVybiByb3dJbmRleCArIFwiOlwiICsgY29sdW1uSW5kZXg7XG59OyAvLyBJbiBERVYgbW9kZSwgdGhpcyBTZXQgaGVscHMgdXMgb25seSBsb2cgYSB3YXJuaW5nIG9uY2UgcGVyIGNvbXBvbmVudCBpbnN0YW5jZS5cbi8vIFRoaXMgYXZvaWRzIHNwYW1taW5nIHRoZSBjb25zb2xlIGV2ZXJ5IHRpbWUgYSByZW5kZXIgaGFwcGVucy5cblxuXG52YXIgZGV2V2FybmluZ3NPdmVyc2NhbkNvdW50ID0gbnVsbDtcbnZhciBkZXZXYXJuaW5nc092ZXJzY2FuUm93c0NvbHVtbnNDb3VudCA9IG51bGw7XG52YXIgZGV2V2FybmluZ3NUYWdOYW1lID0gbnVsbDtcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiB3aW5kb3cuV2Vha1NldCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBkZXZXYXJuaW5nc092ZXJzY2FuQ291bnQgPSAvKiNfX1BVUkVfXyovbmV3IFdlYWtTZXQoKTtcbiAgICBkZXZXYXJuaW5nc092ZXJzY2FuUm93c0NvbHVtbnNDb3VudCA9IC8qI19fUFVSRV9fKi9uZXcgV2Vha1NldCgpO1xuICAgIGRldldhcm5pbmdzVGFnTmFtZSA9IC8qI19fUFVSRV9fKi9uZXcgV2Vha1NldCgpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUdyaWRDb21wb25lbnQoX3JlZjIpIHtcbiAgdmFyIF9jbGFzcztcblxuICB2YXIgZ2V0Q29sdW1uT2Zmc2V0ID0gX3JlZjIuZ2V0Q29sdW1uT2Zmc2V0LFxuICAgICAgZ2V0Q29sdW1uU3RhcnRJbmRleEZvck9mZnNldCA9IF9yZWYyLmdldENvbHVtblN0YXJ0SW5kZXhGb3JPZmZzZXQsXG4gICAgICBnZXRDb2x1bW5TdG9wSW5kZXhGb3JTdGFydEluZGV4ID0gX3JlZjIuZ2V0Q29sdW1uU3RvcEluZGV4Rm9yU3RhcnRJbmRleCxcbiAgICAgIGdldENvbHVtbldpZHRoID0gX3JlZjIuZ2V0Q29sdW1uV2lkdGgsXG4gICAgICBnZXRFc3RpbWF0ZWRUb3RhbEhlaWdodCA9IF9yZWYyLmdldEVzdGltYXRlZFRvdGFsSGVpZ2h0LFxuICAgICAgZ2V0RXN0aW1hdGVkVG90YWxXaWR0aCA9IF9yZWYyLmdldEVzdGltYXRlZFRvdGFsV2lkdGgsXG4gICAgICBnZXRPZmZzZXRGb3JDb2x1bW5BbmRBbGlnbm1lbnQgPSBfcmVmMi5nZXRPZmZzZXRGb3JDb2x1bW5BbmRBbGlnbm1lbnQsXG4gICAgICBnZXRPZmZzZXRGb3JSb3dBbmRBbGlnbm1lbnQgPSBfcmVmMi5nZXRPZmZzZXRGb3JSb3dBbmRBbGlnbm1lbnQsXG4gICAgICBnZXRSb3dIZWlnaHQgPSBfcmVmMi5nZXRSb3dIZWlnaHQsXG4gICAgICBnZXRSb3dPZmZzZXQgPSBfcmVmMi5nZXRSb3dPZmZzZXQsXG4gICAgICBnZXRSb3dTdGFydEluZGV4Rm9yT2Zmc2V0ID0gX3JlZjIuZ2V0Um93U3RhcnRJbmRleEZvck9mZnNldCxcbiAgICAgIGdldFJvd1N0b3BJbmRleEZvclN0YXJ0SW5kZXggPSBfcmVmMi5nZXRSb3dTdG9wSW5kZXhGb3JTdGFydEluZGV4LFxuICAgICAgaW5pdEluc3RhbmNlUHJvcHMgPSBfcmVmMi5pbml0SW5zdGFuY2VQcm9wcyxcbiAgICAgIHNob3VsZFJlc2V0U3R5bGVDYWNoZU9uSXRlbVNpemVDaGFuZ2UgPSBfcmVmMi5zaG91bGRSZXNldFN0eWxlQ2FjaGVPbkl0ZW1TaXplQ2hhbmdlLFxuICAgICAgdmFsaWRhdGVQcm9wcyA9IF9yZWYyLnZhbGlkYXRlUHJvcHM7XG4gIHJldHVybiBfY2xhc3MgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9QdXJlQ29tcG9uZW50KSB7XG4gICAgX2luaGVyaXRzTG9vc2UoR3JpZCwgX1B1cmVDb21wb25lbnQpO1xuXG4gICAgLy8gQWx3YXlzIHVzZSBleHBsaWNpdCBjb25zdHJ1Y3RvciBmb3IgUmVhY3QgY29tcG9uZW50cy5cbiAgICAvLyBJdCBwcm9kdWNlcyBsZXNzIGNvZGUgYWZ0ZXIgdHJhbnNwaWxhdGlvbi4gKCMyNilcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdXNlbGVzcy1jb25zdHJ1Y3RvclxuICAgIGZ1bmN0aW9uIEdyaWQocHJvcHMpIHtcbiAgICAgIHZhciBfdGhpcztcblxuICAgICAgX3RoaXMgPSBfUHVyZUNvbXBvbmVudC5jYWxsKHRoaXMsIHByb3BzKSB8fCB0aGlzO1xuICAgICAgX3RoaXMuX2luc3RhbmNlUHJvcHMgPSBpbml0SW5zdGFuY2VQcm9wcyhfdGhpcy5wcm9wcywgX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgICAgX3RoaXMuX3Jlc2V0SXNTY3JvbGxpbmdUaW1lb3V0SWQgPSBudWxsO1xuICAgICAgX3RoaXMuX291dGVyUmVmID0gdm9pZCAwO1xuICAgICAgX3RoaXMuc3RhdGUgPSB7XG4gICAgICAgIGluc3RhbmNlOiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSxcbiAgICAgICAgaXNTY3JvbGxpbmc6IGZhbHNlLFxuICAgICAgICBob3Jpem9udGFsU2Nyb2xsRGlyZWN0aW9uOiAnZm9yd2FyZCcsXG4gICAgICAgIHNjcm9sbExlZnQ6IHR5cGVvZiBfdGhpcy5wcm9wcy5pbml0aWFsU2Nyb2xsTGVmdCA9PT0gJ251bWJlcicgPyBfdGhpcy5wcm9wcy5pbml0aWFsU2Nyb2xsTGVmdCA6IDAsXG4gICAgICAgIHNjcm9sbFRvcDogdHlwZW9mIF90aGlzLnByb3BzLmluaXRpYWxTY3JvbGxUb3AgPT09ICdudW1iZXInID8gX3RoaXMucHJvcHMuaW5pdGlhbFNjcm9sbFRvcCA6IDAsXG4gICAgICAgIHNjcm9sbFVwZGF0ZVdhc1JlcXVlc3RlZDogZmFsc2UsXG4gICAgICAgIHZlcnRpY2FsU2Nyb2xsRGlyZWN0aW9uOiAnZm9yd2FyZCdcbiAgICAgIH07XG4gICAgICBfdGhpcy5fY2FsbE9uSXRlbXNSZW5kZXJlZCA9IHZvaWQgMDtcbiAgICAgIF90aGlzLl9jYWxsT25JdGVtc1JlbmRlcmVkID0gbWVtb2l6ZU9uZShmdW5jdGlvbiAob3ZlcnNjYW5Db2x1bW5TdGFydEluZGV4LCBvdmVyc2NhbkNvbHVtblN0b3BJbmRleCwgb3ZlcnNjYW5Sb3dTdGFydEluZGV4LCBvdmVyc2NhblJvd1N0b3BJbmRleCwgdmlzaWJsZUNvbHVtblN0YXJ0SW5kZXgsIHZpc2libGVDb2x1bW5TdG9wSW5kZXgsIHZpc2libGVSb3dTdGFydEluZGV4LCB2aXNpYmxlUm93U3RvcEluZGV4KSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5wcm9wcy5vbkl0ZW1zUmVuZGVyZWQoe1xuICAgICAgICAgIG92ZXJzY2FuQ29sdW1uU3RhcnRJbmRleDogb3ZlcnNjYW5Db2x1bW5TdGFydEluZGV4LFxuICAgICAgICAgIG92ZXJzY2FuQ29sdW1uU3RvcEluZGV4OiBvdmVyc2NhbkNvbHVtblN0b3BJbmRleCxcbiAgICAgICAgICBvdmVyc2NhblJvd1N0YXJ0SW5kZXg6IG92ZXJzY2FuUm93U3RhcnRJbmRleCxcbiAgICAgICAgICBvdmVyc2NhblJvd1N0b3BJbmRleDogb3ZlcnNjYW5Sb3dTdG9wSW5kZXgsXG4gICAgICAgICAgdmlzaWJsZUNvbHVtblN0YXJ0SW5kZXg6IHZpc2libGVDb2x1bW5TdGFydEluZGV4LFxuICAgICAgICAgIHZpc2libGVDb2x1bW5TdG9wSW5kZXg6IHZpc2libGVDb2x1bW5TdG9wSW5kZXgsXG4gICAgICAgICAgdmlzaWJsZVJvd1N0YXJ0SW5kZXg6IHZpc2libGVSb3dTdGFydEluZGV4LFxuICAgICAgICAgIHZpc2libGVSb3dTdG9wSW5kZXg6IHZpc2libGVSb3dTdG9wSW5kZXhcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIF90aGlzLl9jYWxsT25TY3JvbGwgPSB2b2lkIDA7XG4gICAgICBfdGhpcy5fY2FsbE9uU2Nyb2xsID0gbWVtb2l6ZU9uZShmdW5jdGlvbiAoc2Nyb2xsTGVmdCwgc2Nyb2xsVG9wLCBob3Jpem9udGFsU2Nyb2xsRGlyZWN0aW9uLCB2ZXJ0aWNhbFNjcm9sbERpcmVjdGlvbiwgc2Nyb2xsVXBkYXRlV2FzUmVxdWVzdGVkKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5wcm9wcy5vblNjcm9sbCh7XG4gICAgICAgICAgaG9yaXpvbnRhbFNjcm9sbERpcmVjdGlvbjogaG9yaXpvbnRhbFNjcm9sbERpcmVjdGlvbixcbiAgICAgICAgICBzY3JvbGxMZWZ0OiBzY3JvbGxMZWZ0LFxuICAgICAgICAgIHNjcm9sbFRvcDogc2Nyb2xsVG9wLFxuICAgICAgICAgIHZlcnRpY2FsU2Nyb2xsRGlyZWN0aW9uOiB2ZXJ0aWNhbFNjcm9sbERpcmVjdGlvbixcbiAgICAgICAgICBzY3JvbGxVcGRhdGVXYXNSZXF1ZXN0ZWQ6IHNjcm9sbFVwZGF0ZVdhc1JlcXVlc3RlZFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgX3RoaXMuX2dldEl0ZW1TdHlsZSA9IHZvaWQgMDtcblxuICAgICAgX3RoaXMuX2dldEl0ZW1TdHlsZSA9IGZ1bmN0aW9uIChyb3dJbmRleCwgY29sdW1uSW5kZXgpIHtcbiAgICAgICAgdmFyIF90aGlzJHByb3BzID0gX3RoaXMucHJvcHMsXG4gICAgICAgICAgICBjb2x1bW5XaWR0aCA9IF90aGlzJHByb3BzLmNvbHVtbldpZHRoLFxuICAgICAgICAgICAgZGlyZWN0aW9uID0gX3RoaXMkcHJvcHMuZGlyZWN0aW9uLFxuICAgICAgICAgICAgcm93SGVpZ2h0ID0gX3RoaXMkcHJvcHMucm93SGVpZ2h0O1xuXG4gICAgICAgIHZhciBpdGVtU3R5bGVDYWNoZSA9IF90aGlzLl9nZXRJdGVtU3R5bGVDYWNoZShzaG91bGRSZXNldFN0eWxlQ2FjaGVPbkl0ZW1TaXplQ2hhbmdlICYmIGNvbHVtbldpZHRoLCBzaG91bGRSZXNldFN0eWxlQ2FjaGVPbkl0ZW1TaXplQ2hhbmdlICYmIGRpcmVjdGlvbiwgc2hvdWxkUmVzZXRTdHlsZUNhY2hlT25JdGVtU2l6ZUNoYW5nZSAmJiByb3dIZWlnaHQpO1xuXG4gICAgICAgIHZhciBrZXkgPSByb3dJbmRleCArIFwiOlwiICsgY29sdW1uSW5kZXg7XG4gICAgICAgIHZhciBzdHlsZTtcblxuICAgICAgICBpZiAoaXRlbVN0eWxlQ2FjaGUuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgIHN0eWxlID0gaXRlbVN0eWxlQ2FjaGVba2V5XTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgX29mZnNldCA9IGdldENvbHVtbk9mZnNldChfdGhpcy5wcm9wcywgY29sdW1uSW5kZXgsIF90aGlzLl9pbnN0YW5jZVByb3BzKTtcblxuICAgICAgICAgIHZhciBpc1J0bCA9IGRpcmVjdGlvbiA9PT0gJ3J0bCc7XG4gICAgICAgICAgaXRlbVN0eWxlQ2FjaGVba2V5XSA9IHN0eWxlID0ge1xuICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgICAgICBsZWZ0OiBpc1J0bCA/IHVuZGVmaW5lZCA6IF9vZmZzZXQsXG4gICAgICAgICAgICByaWdodDogaXNSdGwgPyBfb2Zmc2V0IDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgdG9wOiBnZXRSb3dPZmZzZXQoX3RoaXMucHJvcHMsIHJvd0luZGV4LCBfdGhpcy5faW5zdGFuY2VQcm9wcyksXG4gICAgICAgICAgICBoZWlnaHQ6IGdldFJvd0hlaWdodChfdGhpcy5wcm9wcywgcm93SW5kZXgsIF90aGlzLl9pbnN0YW5jZVByb3BzKSxcbiAgICAgICAgICAgIHdpZHRoOiBnZXRDb2x1bW5XaWR0aChfdGhpcy5wcm9wcywgY29sdW1uSW5kZXgsIF90aGlzLl9pbnN0YW5jZVByb3BzKVxuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3R5bGU7XG4gICAgICB9O1xuXG4gICAgICBfdGhpcy5fZ2V0SXRlbVN0eWxlQ2FjaGUgPSB2b2lkIDA7XG4gICAgICBfdGhpcy5fZ2V0SXRlbVN0eWxlQ2FjaGUgPSBtZW1vaXplT25lKGZ1bmN0aW9uIChfLCBfXywgX19fKSB7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICAgIH0pO1xuXG4gICAgICBfdGhpcy5fb25TY3JvbGwgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIF9ldmVudCRjdXJyZW50VGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldCxcbiAgICAgICAgICAgIGNsaWVudEhlaWdodCA9IF9ldmVudCRjdXJyZW50VGFyZ2V0LmNsaWVudEhlaWdodCxcbiAgICAgICAgICAgIGNsaWVudFdpZHRoID0gX2V2ZW50JGN1cnJlbnRUYXJnZXQuY2xpZW50V2lkdGgsXG4gICAgICAgICAgICBzY3JvbGxMZWZ0ID0gX2V2ZW50JGN1cnJlbnRUYXJnZXQuc2Nyb2xsTGVmdCxcbiAgICAgICAgICAgIHNjcm9sbFRvcCA9IF9ldmVudCRjdXJyZW50VGFyZ2V0LnNjcm9sbFRvcCxcbiAgICAgICAgICAgIHNjcm9sbEhlaWdodCA9IF9ldmVudCRjdXJyZW50VGFyZ2V0LnNjcm9sbEhlaWdodCxcbiAgICAgICAgICAgIHNjcm9sbFdpZHRoID0gX2V2ZW50JGN1cnJlbnRUYXJnZXQuc2Nyb2xsV2lkdGg7XG5cbiAgICAgICAgX3RoaXMuc2V0U3RhdGUoZnVuY3Rpb24gKHByZXZTdGF0ZSkge1xuICAgICAgICAgIGlmIChwcmV2U3RhdGUuc2Nyb2xsTGVmdCA9PT0gc2Nyb2xsTGVmdCAmJiBwcmV2U3RhdGUuc2Nyb2xsVG9wID09PSBzY3JvbGxUb3ApIHtcbiAgICAgICAgICAgIC8vIFNjcm9sbCBwb3NpdGlvbiBtYXkgaGF2ZSBiZWVuIHVwZGF0ZWQgYnkgY0RNL2NEVSxcbiAgICAgICAgICAgIC8vIEluIHdoaWNoIGNhc2Ugd2UgZG9uJ3QgbmVlZCB0byB0cmlnZ2VyIGFub3RoZXIgcmVuZGVyLFxuICAgICAgICAgICAgLy8gQW5kIHdlIGRvbid0IHdhbnQgdG8gdXBkYXRlIHN0YXRlLmlzU2Nyb2xsaW5nLlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIGRpcmVjdGlvbiA9IF90aGlzLnByb3BzLmRpcmVjdGlvbjsgLy8gVFJJQ0tZIEFjY29yZGluZyB0byB0aGUgc3BlYywgc2Nyb2xsTGVmdCBzaG91bGQgYmUgbmVnYXRpdmUgZm9yIFJUTCBhbGlnbmVkIGVsZW1lbnRzLlxuICAgICAgICAgIC8vIFRoaXMgaXMgbm90IHRoZSBjYXNlIGZvciBhbGwgYnJvd3NlcnMgdGhvdWdoIChlLmcuIENocm9tZSByZXBvcnRzIHZhbHVlcyBhcyBwb3NpdGl2ZSwgbWVhc3VyZWQgcmVsYXRpdmUgdG8gdGhlIGxlZnQpLlxuICAgICAgICAgIC8vIEl0J3MgYWxzbyBlYXNpZXIgZm9yIHRoaXMgY29tcG9uZW50IGlmIHdlIGNvbnZlcnQgb2Zmc2V0cyB0byB0aGUgc2FtZSBmb3JtYXQgYXMgdGhleSB3b3VsZCBiZSBpbiBmb3IgbHRyLlxuICAgICAgICAgIC8vIFNvIHRoZSBzaW1wbGVzdCBzb2x1dGlvbiBpcyB0byBkZXRlcm1pbmUgd2hpY2ggYnJvd3NlciBiZWhhdmlvciB3ZSdyZSBkZWFsaW5nIHdpdGgsIGFuZCBjb252ZXJ0IGJhc2VkIG9uIGl0LlxuXG4gICAgICAgICAgdmFyIGNhbGN1bGF0ZWRTY3JvbGxMZWZ0ID0gc2Nyb2xsTGVmdDtcblxuICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdydGwnKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGdldFJUTE9mZnNldFR5cGUoKSkge1xuICAgICAgICAgICAgICBjYXNlICduZWdhdGl2ZSc6XG4gICAgICAgICAgICAgICAgY2FsY3VsYXRlZFNjcm9sbExlZnQgPSAtc2Nyb2xsTGVmdDtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlICdwb3NpdGl2ZS1kZXNjZW5kaW5nJzpcbiAgICAgICAgICAgICAgICBjYWxjdWxhdGVkU2Nyb2xsTGVmdCA9IHNjcm9sbFdpZHRoIC0gY2xpZW50V2lkdGggLSBzY3JvbGxMZWZ0O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gLy8gUHJldmVudCBTYWZhcmkncyBlbGFzdGljIHNjcm9sbGluZyBmcm9tIGNhdXNpbmcgdmlzdWFsIHNoYWtpbmcgd2hlbiBzY3JvbGxpbmcgcGFzdCBib3VuZHMuXG5cblxuICAgICAgICAgIGNhbGN1bGF0ZWRTY3JvbGxMZWZ0ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oY2FsY3VsYXRlZFNjcm9sbExlZnQsIHNjcm9sbFdpZHRoIC0gY2xpZW50V2lkdGgpKTtcbiAgICAgICAgICB2YXIgY2FsY3VsYXRlZFNjcm9sbFRvcCA9IE1hdGgubWF4KDAsIE1hdGgubWluKHNjcm9sbFRvcCwgc2Nyb2xsSGVpZ2h0IC0gY2xpZW50SGVpZ2h0KSk7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlzU2Nyb2xsaW5nOiB0cnVlLFxuICAgICAgICAgICAgaG9yaXpvbnRhbFNjcm9sbERpcmVjdGlvbjogcHJldlN0YXRlLnNjcm9sbExlZnQgPCBzY3JvbGxMZWZ0ID8gJ2ZvcndhcmQnIDogJ2JhY2t3YXJkJyxcbiAgICAgICAgICAgIHNjcm9sbExlZnQ6IGNhbGN1bGF0ZWRTY3JvbGxMZWZ0LFxuICAgICAgICAgICAgc2Nyb2xsVG9wOiBjYWxjdWxhdGVkU2Nyb2xsVG9wLFxuICAgICAgICAgICAgdmVydGljYWxTY3JvbGxEaXJlY3Rpb246IHByZXZTdGF0ZS5zY3JvbGxUb3AgPCBzY3JvbGxUb3AgPyAnZm9yd2FyZCcgOiAnYmFja3dhcmQnLFxuICAgICAgICAgICAgc2Nyb2xsVXBkYXRlV2FzUmVxdWVzdGVkOiBmYWxzZVxuICAgICAgICAgIH07XG4gICAgICAgIH0sIF90aGlzLl9yZXNldElzU2Nyb2xsaW5nRGVib3VuY2VkKTtcbiAgICAgIH07XG5cbiAgICAgIF90aGlzLl9vdXRlclJlZlNldHRlciA9IGZ1bmN0aW9uIChyZWYpIHtcbiAgICAgICAgdmFyIG91dGVyUmVmID0gX3RoaXMucHJvcHMub3V0ZXJSZWY7XG4gICAgICAgIF90aGlzLl9vdXRlclJlZiA9IHJlZjtcblxuICAgICAgICBpZiAodHlwZW9mIG91dGVyUmVmID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgb3V0ZXJSZWYocmVmKTtcbiAgICAgICAgfSBlbHNlIGlmIChvdXRlclJlZiAhPSBudWxsICYmIHR5cGVvZiBvdXRlclJlZiA9PT0gJ29iamVjdCcgJiYgb3V0ZXJSZWYuaGFzT3duUHJvcGVydHkoJ2N1cnJlbnQnKSkge1xuICAgICAgICAgIG91dGVyUmVmLmN1cnJlbnQgPSByZWY7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIF90aGlzLl9yZXNldElzU2Nyb2xsaW5nRGVib3VuY2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoX3RoaXMuX3Jlc2V0SXNTY3JvbGxpbmdUaW1lb3V0SWQgIT09IG51bGwpIHtcbiAgICAgICAgICBjYW5jZWxUaW1lb3V0KF90aGlzLl9yZXNldElzU2Nyb2xsaW5nVGltZW91dElkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIF90aGlzLl9yZXNldElzU2Nyb2xsaW5nVGltZW91dElkID0gcmVxdWVzdFRpbWVvdXQoX3RoaXMuX3Jlc2V0SXNTY3JvbGxpbmcsIElTX1NDUk9MTElOR19ERUJPVU5DRV9JTlRFUlZBTCk7XG4gICAgICB9O1xuXG4gICAgICBfdGhpcy5fcmVzZXRJc1Njcm9sbGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMuX3Jlc2V0SXNTY3JvbGxpbmdUaW1lb3V0SWQgPSBudWxsO1xuXG4gICAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBpc1Njcm9sbGluZzogZmFsc2VcbiAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIC8vIENsZWFyIHN0eWxlIGNhY2hlIGFmdGVyIHN0YXRlIHVwZGF0ZSBoYXMgYmVlbiBjb21taXR0ZWQuXG4gICAgICAgICAgLy8gVGhpcyB3YXkgd2UgZG9uJ3QgYnJlYWsgcHVyZSBzQ1UgZm9yIGl0ZW1zIHRoYXQgZG9uJ3QgdXNlIGlzU2Nyb2xsaW5nIHBhcmFtLlxuICAgICAgICAgIF90aGlzLl9nZXRJdGVtU3R5bGVDYWNoZSgtMSk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cblxuICAgIEdyaWQuZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzID0gZnVuY3Rpb24gZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzKG5leHRQcm9wcywgcHJldlN0YXRlKSB7XG4gICAgICB2YWxpZGF0ZVNoYXJlZFByb3BzKG5leHRQcm9wcywgcHJldlN0YXRlKTtcbiAgICAgIHZhbGlkYXRlUHJvcHMobmV4dFByb3BzKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG5cbiAgICB2YXIgX3Byb3RvID0gR3JpZC5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8uc2Nyb2xsVG8gPSBmdW5jdGlvbiBzY3JvbGxUbyhfcmVmMykge1xuICAgICAgdmFyIHNjcm9sbExlZnQgPSBfcmVmMy5zY3JvbGxMZWZ0LFxuICAgICAgICAgIHNjcm9sbFRvcCA9IF9yZWYzLnNjcm9sbFRvcDtcblxuICAgICAgaWYgKHNjcm9sbExlZnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzY3JvbGxMZWZ0ID0gTWF0aC5tYXgoMCwgc2Nyb2xsTGVmdCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChzY3JvbGxUb3AgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzY3JvbGxUb3AgPSBNYXRoLm1heCgwLCBzY3JvbGxUb3ApO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnNldFN0YXRlKGZ1bmN0aW9uIChwcmV2U3RhdGUpIHtcbiAgICAgICAgaWYgKHNjcm9sbExlZnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHNjcm9sbExlZnQgPSBwcmV2U3RhdGUuc2Nyb2xsTGVmdDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzY3JvbGxUb3AgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHNjcm9sbFRvcCA9IHByZXZTdGF0ZS5zY3JvbGxUb3A7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocHJldlN0YXRlLnNjcm9sbExlZnQgPT09IHNjcm9sbExlZnQgJiYgcHJldlN0YXRlLnNjcm9sbFRvcCA9PT0gc2Nyb2xsVG9wKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGhvcml6b250YWxTY3JvbGxEaXJlY3Rpb246IHByZXZTdGF0ZS5zY3JvbGxMZWZ0IDwgc2Nyb2xsTGVmdCA/ICdmb3J3YXJkJyA6ICdiYWNrd2FyZCcsXG4gICAgICAgICAgc2Nyb2xsTGVmdDogc2Nyb2xsTGVmdCxcbiAgICAgICAgICBzY3JvbGxUb3A6IHNjcm9sbFRvcCxcbiAgICAgICAgICBzY3JvbGxVcGRhdGVXYXNSZXF1ZXN0ZWQ6IHRydWUsXG4gICAgICAgICAgdmVydGljYWxTY3JvbGxEaXJlY3Rpb246IHByZXZTdGF0ZS5zY3JvbGxUb3AgPCBzY3JvbGxUb3AgPyAnZm9yd2FyZCcgOiAnYmFja3dhcmQnXG4gICAgICAgIH07XG4gICAgICB9LCB0aGlzLl9yZXNldElzU2Nyb2xsaW5nRGVib3VuY2VkKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLnNjcm9sbFRvSXRlbSA9IGZ1bmN0aW9uIHNjcm9sbFRvSXRlbShfcmVmNCkge1xuICAgICAgdmFyIF9yZWY0JGFsaWduID0gX3JlZjQuYWxpZ24sXG4gICAgICAgICAgYWxpZ24gPSBfcmVmNCRhbGlnbiA9PT0gdm9pZCAwID8gJ2F1dG8nIDogX3JlZjQkYWxpZ24sXG4gICAgICAgICAgY29sdW1uSW5kZXggPSBfcmVmNC5jb2x1bW5JbmRleCxcbiAgICAgICAgICByb3dJbmRleCA9IF9yZWY0LnJvd0luZGV4O1xuICAgICAgdmFyIF90aGlzJHByb3BzMiA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgY29sdW1uQ291bnQgPSBfdGhpcyRwcm9wczIuY29sdW1uQ291bnQsXG4gICAgICAgICAgaGVpZ2h0ID0gX3RoaXMkcHJvcHMyLmhlaWdodCxcbiAgICAgICAgICByb3dDb3VudCA9IF90aGlzJHByb3BzMi5yb3dDb3VudCxcbiAgICAgICAgICB3aWR0aCA9IF90aGlzJHByb3BzMi53aWR0aDtcbiAgICAgIHZhciBfdGhpcyRzdGF0ZSA9IHRoaXMuc3RhdGUsXG4gICAgICAgICAgc2Nyb2xsTGVmdCA9IF90aGlzJHN0YXRlLnNjcm9sbExlZnQsXG4gICAgICAgICAgc2Nyb2xsVG9wID0gX3RoaXMkc3RhdGUuc2Nyb2xsVG9wO1xuICAgICAgdmFyIHNjcm9sbGJhclNpemUgPSBnZXRTY3JvbGxiYXJTaXplKCk7XG5cbiAgICAgIGlmIChjb2x1bW5JbmRleCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbHVtbkluZGV4ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oY29sdW1uSW5kZXgsIGNvbHVtbkNvdW50IC0gMSkpO1xuICAgICAgfVxuXG4gICAgICBpZiAocm93SW5kZXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByb3dJbmRleCA9IE1hdGgubWF4KDAsIE1hdGgubWluKHJvd0luZGV4LCByb3dDb3VudCAtIDEpKTtcbiAgICAgIH1cblxuICAgICAgdmFyIGVzdGltYXRlZFRvdGFsSGVpZ2h0ID0gZ2V0RXN0aW1hdGVkVG90YWxIZWlnaHQodGhpcy5wcm9wcywgdGhpcy5faW5zdGFuY2VQcm9wcyk7XG4gICAgICB2YXIgZXN0aW1hdGVkVG90YWxXaWR0aCA9IGdldEVzdGltYXRlZFRvdGFsV2lkdGgodGhpcy5wcm9wcywgdGhpcy5faW5zdGFuY2VQcm9wcyk7IC8vIFRoZSBzY3JvbGxiYXIgc2l6ZSBzaG91bGQgYmUgY29uc2lkZXJlZCB3aGVuIHNjcm9sbGluZyBhbiBpdGVtIGludG8gdmlldyxcbiAgICAgIC8vIHRvIGVuc3VyZSBpdCdzIGZ1bGx5IHZpc2libGUuXG4gICAgICAvLyBCdXQgd2Ugb25seSBuZWVkIHRvIGFjY291bnQgZm9yIGl0cyBzaXplIHdoZW4gaXQncyBhY3R1YWxseSB2aXNpYmxlLlxuXG4gICAgICB2YXIgaG9yaXpvbnRhbFNjcm9sbGJhclNpemUgPSBlc3RpbWF0ZWRUb3RhbFdpZHRoID4gd2lkdGggPyBzY3JvbGxiYXJTaXplIDogMDtcbiAgICAgIHZhciB2ZXJ0aWNhbFNjcm9sbGJhclNpemUgPSBlc3RpbWF0ZWRUb3RhbEhlaWdodCA+IGhlaWdodCA/IHNjcm9sbGJhclNpemUgOiAwO1xuICAgICAgdGhpcy5zY3JvbGxUbyh7XG4gICAgICAgIHNjcm9sbExlZnQ6IGNvbHVtbkluZGV4ICE9PSB1bmRlZmluZWQgPyBnZXRPZmZzZXRGb3JDb2x1bW5BbmRBbGlnbm1lbnQodGhpcy5wcm9wcywgY29sdW1uSW5kZXgsIGFsaWduLCBzY3JvbGxMZWZ0LCB0aGlzLl9pbnN0YW5jZVByb3BzLCB2ZXJ0aWNhbFNjcm9sbGJhclNpemUpIDogc2Nyb2xsTGVmdCxcbiAgICAgICAgc2Nyb2xsVG9wOiByb3dJbmRleCAhPT0gdW5kZWZpbmVkID8gZ2V0T2Zmc2V0Rm9yUm93QW5kQWxpZ25tZW50KHRoaXMucHJvcHMsIHJvd0luZGV4LCBhbGlnbiwgc2Nyb2xsVG9wLCB0aGlzLl9pbnN0YW5jZVByb3BzLCBob3Jpem9udGFsU2Nyb2xsYmFyU2l6ZSkgOiBzY3JvbGxUb3BcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBfcHJvdG8uY29tcG9uZW50RGlkTW91bnQgPSBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgIHZhciBfdGhpcyRwcm9wczMgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGluaXRpYWxTY3JvbGxMZWZ0ID0gX3RoaXMkcHJvcHMzLmluaXRpYWxTY3JvbGxMZWZ0LFxuICAgICAgICAgIGluaXRpYWxTY3JvbGxUb3AgPSBfdGhpcyRwcm9wczMuaW5pdGlhbFNjcm9sbFRvcDtcblxuICAgICAgaWYgKHRoaXMuX291dGVyUmVmICE9IG51bGwpIHtcbiAgICAgICAgdmFyIG91dGVyUmVmID0gdGhpcy5fb3V0ZXJSZWY7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBpbml0aWFsU2Nyb2xsTGVmdCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICBvdXRlclJlZi5zY3JvbGxMZWZ0ID0gaW5pdGlhbFNjcm9sbExlZnQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIGluaXRpYWxTY3JvbGxUb3AgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgb3V0ZXJSZWYuc2Nyb2xsVG9wID0gaW5pdGlhbFNjcm9sbFRvcDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLl9jYWxsUHJvcHNDYWxsYmFja3MoKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLmNvbXBvbmVudERpZFVwZGF0ZSA9IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcbiAgICAgIHZhciBkaXJlY3Rpb24gPSB0aGlzLnByb3BzLmRpcmVjdGlvbjtcbiAgICAgIHZhciBfdGhpcyRzdGF0ZTIgPSB0aGlzLnN0YXRlLFxuICAgICAgICAgIHNjcm9sbExlZnQgPSBfdGhpcyRzdGF0ZTIuc2Nyb2xsTGVmdCxcbiAgICAgICAgICBzY3JvbGxUb3AgPSBfdGhpcyRzdGF0ZTIuc2Nyb2xsVG9wLFxuICAgICAgICAgIHNjcm9sbFVwZGF0ZVdhc1JlcXVlc3RlZCA9IF90aGlzJHN0YXRlMi5zY3JvbGxVcGRhdGVXYXNSZXF1ZXN0ZWQ7XG5cbiAgICAgIGlmIChzY3JvbGxVcGRhdGVXYXNSZXF1ZXN0ZWQgJiYgdGhpcy5fb3V0ZXJSZWYgIT0gbnVsbCkge1xuICAgICAgICAvLyBUUklDS1kgQWNjb3JkaW5nIHRvIHRoZSBzcGVjLCBzY3JvbGxMZWZ0IHNob3VsZCBiZSBuZWdhdGl2ZSBmb3IgUlRMIGFsaWduZWQgZWxlbWVudHMuXG4gICAgICAgIC8vIFRoaXMgaXMgbm90IHRoZSBjYXNlIGZvciBhbGwgYnJvd3NlcnMgdGhvdWdoIChlLmcuIENocm9tZSByZXBvcnRzIHZhbHVlcyBhcyBwb3NpdGl2ZSwgbWVhc3VyZWQgcmVsYXRpdmUgdG8gdGhlIGxlZnQpLlxuICAgICAgICAvLyBTbyB3ZSBuZWVkIHRvIGRldGVybWluZSB3aGljaCBicm93c2VyIGJlaGF2aW9yIHdlJ3JlIGRlYWxpbmcgd2l0aCwgYW5kIG1pbWljIGl0LlxuICAgICAgICB2YXIgb3V0ZXJSZWYgPSB0aGlzLl9vdXRlclJlZjtcblxuICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAncnRsJykge1xuICAgICAgICAgIHN3aXRjaCAoZ2V0UlRMT2Zmc2V0VHlwZSgpKSB7XG4gICAgICAgICAgICBjYXNlICduZWdhdGl2ZSc6XG4gICAgICAgICAgICAgIG91dGVyUmVmLnNjcm9sbExlZnQgPSAtc2Nyb2xsTGVmdDtcbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgJ3Bvc2l0aXZlLWFzY2VuZGluZyc6XG4gICAgICAgICAgICAgIG91dGVyUmVmLnNjcm9sbExlZnQgPSBzY3JvbGxMZWZ0O1xuICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgdmFyIGNsaWVudFdpZHRoID0gb3V0ZXJSZWYuY2xpZW50V2lkdGgsXG4gICAgICAgICAgICAgICAgICBzY3JvbGxXaWR0aCA9IG91dGVyUmVmLnNjcm9sbFdpZHRoO1xuICAgICAgICAgICAgICBvdXRlclJlZi5zY3JvbGxMZWZ0ID0gc2Nyb2xsV2lkdGggLSBjbGllbnRXaWR0aCAtIHNjcm9sbExlZnQ7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvdXRlclJlZi5zY3JvbGxMZWZ0ID0gTWF0aC5tYXgoMCwgc2Nyb2xsTGVmdCk7XG4gICAgICAgIH1cblxuICAgICAgICBvdXRlclJlZi5zY3JvbGxUb3AgPSBNYXRoLm1heCgwLCBzY3JvbGxUb3ApO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9jYWxsUHJvcHNDYWxsYmFja3MoKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLmNvbXBvbmVudFdpbGxVbm1vdW50ID0gZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICBpZiAodGhpcy5fcmVzZXRJc1Njcm9sbGluZ1RpbWVvdXRJZCAhPT0gbnVsbCkge1xuICAgICAgICBjYW5jZWxUaW1lb3V0KHRoaXMuX3Jlc2V0SXNTY3JvbGxpbmdUaW1lb3V0SWQpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfcHJvdG8ucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF90aGlzJHByb3BzNCA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgY2hpbGRyZW4gPSBfdGhpcyRwcm9wczQuY2hpbGRyZW4sXG4gICAgICAgICAgY2xhc3NOYW1lID0gX3RoaXMkcHJvcHM0LmNsYXNzTmFtZSxcbiAgICAgICAgICBjb2x1bW5Db3VudCA9IF90aGlzJHByb3BzNC5jb2x1bW5Db3VudCxcbiAgICAgICAgICBkaXJlY3Rpb24gPSBfdGhpcyRwcm9wczQuZGlyZWN0aW9uLFxuICAgICAgICAgIGhlaWdodCA9IF90aGlzJHByb3BzNC5oZWlnaHQsXG4gICAgICAgICAgaW5uZXJSZWYgPSBfdGhpcyRwcm9wczQuaW5uZXJSZWYsXG4gICAgICAgICAgaW5uZXJFbGVtZW50VHlwZSA9IF90aGlzJHByb3BzNC5pbm5lckVsZW1lbnRUeXBlLFxuICAgICAgICAgIGlubmVyVGFnTmFtZSA9IF90aGlzJHByb3BzNC5pbm5lclRhZ05hbWUsXG4gICAgICAgICAgaXRlbURhdGEgPSBfdGhpcyRwcm9wczQuaXRlbURhdGEsXG4gICAgICAgICAgX3RoaXMkcHJvcHM0JGl0ZW1LZXkgPSBfdGhpcyRwcm9wczQuaXRlbUtleSxcbiAgICAgICAgICBpdGVtS2V5ID0gX3RoaXMkcHJvcHM0JGl0ZW1LZXkgPT09IHZvaWQgMCA/IGRlZmF1bHRJdGVtS2V5IDogX3RoaXMkcHJvcHM0JGl0ZW1LZXksXG4gICAgICAgICAgb3V0ZXJFbGVtZW50VHlwZSA9IF90aGlzJHByb3BzNC5vdXRlckVsZW1lbnRUeXBlLFxuICAgICAgICAgIG91dGVyVGFnTmFtZSA9IF90aGlzJHByb3BzNC5vdXRlclRhZ05hbWUsXG4gICAgICAgICAgcm93Q291bnQgPSBfdGhpcyRwcm9wczQucm93Q291bnQsXG4gICAgICAgICAgc3R5bGUgPSBfdGhpcyRwcm9wczQuc3R5bGUsXG4gICAgICAgICAgdXNlSXNTY3JvbGxpbmcgPSBfdGhpcyRwcm9wczQudXNlSXNTY3JvbGxpbmcsXG4gICAgICAgICAgd2lkdGggPSBfdGhpcyRwcm9wczQud2lkdGg7XG4gICAgICB2YXIgaXNTY3JvbGxpbmcgPSB0aGlzLnN0YXRlLmlzU2Nyb2xsaW5nO1xuXG4gICAgICB2YXIgX3RoaXMkX2dldEhvcml6b250YWxSID0gdGhpcy5fZ2V0SG9yaXpvbnRhbFJhbmdlVG9SZW5kZXIoKSxcbiAgICAgICAgICBjb2x1bW5TdGFydEluZGV4ID0gX3RoaXMkX2dldEhvcml6b250YWxSWzBdLFxuICAgICAgICAgIGNvbHVtblN0b3BJbmRleCA9IF90aGlzJF9nZXRIb3Jpem9udGFsUlsxXTtcblxuICAgICAgdmFyIF90aGlzJF9nZXRWZXJ0aWNhbFJhbiA9IHRoaXMuX2dldFZlcnRpY2FsUmFuZ2VUb1JlbmRlcigpLFxuICAgICAgICAgIHJvd1N0YXJ0SW5kZXggPSBfdGhpcyRfZ2V0VmVydGljYWxSYW5bMF0sXG4gICAgICAgICAgcm93U3RvcEluZGV4ID0gX3RoaXMkX2dldFZlcnRpY2FsUmFuWzFdO1xuXG4gICAgICB2YXIgaXRlbXMgPSBbXTtcblxuICAgICAgaWYgKGNvbHVtbkNvdW50ID4gMCAmJiByb3dDb3VudCkge1xuICAgICAgICBmb3IgKHZhciBfcm93SW5kZXggPSByb3dTdGFydEluZGV4OyBfcm93SW5kZXggPD0gcm93U3RvcEluZGV4OyBfcm93SW5kZXgrKykge1xuICAgICAgICAgIGZvciAodmFyIF9jb2x1bW5JbmRleCA9IGNvbHVtblN0YXJ0SW5kZXg7IF9jb2x1bW5JbmRleCA8PSBjb2x1bW5TdG9wSW5kZXg7IF9jb2x1bW5JbmRleCsrKSB7XG4gICAgICAgICAgICBpdGVtcy5wdXNoKGNyZWF0ZUVsZW1lbnQoY2hpbGRyZW4sIHtcbiAgICAgICAgICAgICAgY29sdW1uSW5kZXg6IF9jb2x1bW5JbmRleCxcbiAgICAgICAgICAgICAgZGF0YTogaXRlbURhdGEsXG4gICAgICAgICAgICAgIGlzU2Nyb2xsaW5nOiB1c2VJc1Njcm9sbGluZyA/IGlzU2Nyb2xsaW5nIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICBrZXk6IGl0ZW1LZXkoe1xuICAgICAgICAgICAgICAgIGNvbHVtbkluZGV4OiBfY29sdW1uSW5kZXgsXG4gICAgICAgICAgICAgICAgZGF0YTogaXRlbURhdGEsXG4gICAgICAgICAgICAgICAgcm93SW5kZXg6IF9yb3dJbmRleFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgcm93SW5kZXg6IF9yb3dJbmRleCxcbiAgICAgICAgICAgICAgc3R5bGU6IHRoaXMuX2dldEl0ZW1TdHlsZShfcm93SW5kZXgsIF9jb2x1bW5JbmRleClcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gLy8gUmVhZCB0aGlzIHZhbHVlIEFGVEVSIGl0ZW1zIGhhdmUgYmVlbiBjcmVhdGVkLFxuICAgICAgLy8gU28gdGhlaXIgYWN0dWFsIHNpemVzIChpZiB2YXJpYWJsZSkgYXJlIHRha2VuIGludG8gY29uc2lkZXJhdGlvbi5cblxuXG4gICAgICB2YXIgZXN0aW1hdGVkVG90YWxIZWlnaHQgPSBnZXRFc3RpbWF0ZWRUb3RhbEhlaWdodCh0aGlzLnByb3BzLCB0aGlzLl9pbnN0YW5jZVByb3BzKTtcbiAgICAgIHZhciBlc3RpbWF0ZWRUb3RhbFdpZHRoID0gZ2V0RXN0aW1hdGVkVG90YWxXaWR0aCh0aGlzLnByb3BzLCB0aGlzLl9pbnN0YW5jZVByb3BzKTtcbiAgICAgIHJldHVybiBjcmVhdGVFbGVtZW50KG91dGVyRWxlbWVudFR5cGUgfHwgb3V0ZXJUYWdOYW1lIHx8ICdkaXYnLCB7XG4gICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lLFxuICAgICAgICBvblNjcm9sbDogdGhpcy5fb25TY3JvbGwsXG4gICAgICAgIHJlZjogdGhpcy5fb3V0ZXJSZWZTZXR0ZXIsXG4gICAgICAgIHN0eWxlOiBfZXh0ZW5kcyh7XG4gICAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICAgICAgaGVpZ2h0OiBoZWlnaHQsXG4gICAgICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgICAgIG92ZXJmbG93OiAnYXV0bycsXG4gICAgICAgICAgV2Via2l0T3ZlcmZsb3dTY3JvbGxpbmc6ICd0b3VjaCcsXG4gICAgICAgICAgd2lsbENoYW5nZTogJ3RyYW5zZm9ybScsXG4gICAgICAgICAgZGlyZWN0aW9uOiBkaXJlY3Rpb25cbiAgICAgICAgfSwgc3R5bGUpXG4gICAgICB9LCBjcmVhdGVFbGVtZW50KGlubmVyRWxlbWVudFR5cGUgfHwgaW5uZXJUYWdOYW1lIHx8ICdkaXYnLCB7XG4gICAgICAgIGNoaWxkcmVuOiBpdGVtcyxcbiAgICAgICAgcmVmOiBpbm5lclJlZixcbiAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICBoZWlnaHQ6IGVzdGltYXRlZFRvdGFsSGVpZ2h0LFxuICAgICAgICAgIHBvaW50ZXJFdmVudHM6IGlzU2Nyb2xsaW5nID8gJ25vbmUnIDogdW5kZWZpbmVkLFxuICAgICAgICAgIHdpZHRoOiBlc3RpbWF0ZWRUb3RhbFdpZHRoXG4gICAgICAgIH1cbiAgICAgIH0pKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLl9jYWxsUHJvcHNDYWxsYmFja3MgPSBmdW5jdGlvbiBfY2FsbFByb3BzQ2FsbGJhY2tzKCkge1xuICAgICAgdmFyIF90aGlzJHByb3BzNSA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgY29sdW1uQ291bnQgPSBfdGhpcyRwcm9wczUuY29sdW1uQ291bnQsXG4gICAgICAgICAgb25JdGVtc1JlbmRlcmVkID0gX3RoaXMkcHJvcHM1Lm9uSXRlbXNSZW5kZXJlZCxcbiAgICAgICAgICBvblNjcm9sbCA9IF90aGlzJHByb3BzNS5vblNjcm9sbCxcbiAgICAgICAgICByb3dDb3VudCA9IF90aGlzJHByb3BzNS5yb3dDb3VudDtcblxuICAgICAgaWYgKHR5cGVvZiBvbkl0ZW1zUmVuZGVyZWQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgaWYgKGNvbHVtbkNvdW50ID4gMCAmJiByb3dDb3VudCA+IDApIHtcbiAgICAgICAgICB2YXIgX3RoaXMkX2dldEhvcml6b250YWxSMiA9IHRoaXMuX2dldEhvcml6b250YWxSYW5nZVRvUmVuZGVyKCksXG4gICAgICAgICAgICAgIF9vdmVyc2NhbkNvbHVtblN0YXJ0SW5kZXggPSBfdGhpcyRfZ2V0SG9yaXpvbnRhbFIyWzBdLFxuICAgICAgICAgICAgICBfb3ZlcnNjYW5Db2x1bW5TdG9wSW5kZXggPSBfdGhpcyRfZ2V0SG9yaXpvbnRhbFIyWzFdLFxuICAgICAgICAgICAgICBfdmlzaWJsZUNvbHVtblN0YXJ0SW5kZXggPSBfdGhpcyRfZ2V0SG9yaXpvbnRhbFIyWzJdLFxuICAgICAgICAgICAgICBfdmlzaWJsZUNvbHVtblN0b3BJbmRleCA9IF90aGlzJF9nZXRIb3Jpem9udGFsUjJbM107XG5cbiAgICAgICAgICB2YXIgX3RoaXMkX2dldFZlcnRpY2FsUmFuMiA9IHRoaXMuX2dldFZlcnRpY2FsUmFuZ2VUb1JlbmRlcigpLFxuICAgICAgICAgICAgICBfb3ZlcnNjYW5Sb3dTdGFydEluZGV4ID0gX3RoaXMkX2dldFZlcnRpY2FsUmFuMlswXSxcbiAgICAgICAgICAgICAgX292ZXJzY2FuUm93U3RvcEluZGV4ID0gX3RoaXMkX2dldFZlcnRpY2FsUmFuMlsxXSxcbiAgICAgICAgICAgICAgX3Zpc2libGVSb3dTdGFydEluZGV4ID0gX3RoaXMkX2dldFZlcnRpY2FsUmFuMlsyXSxcbiAgICAgICAgICAgICAgX3Zpc2libGVSb3dTdG9wSW5kZXggPSBfdGhpcyRfZ2V0VmVydGljYWxSYW4yWzNdO1xuXG4gICAgICAgICAgdGhpcy5fY2FsbE9uSXRlbXNSZW5kZXJlZChfb3ZlcnNjYW5Db2x1bW5TdGFydEluZGV4LCBfb3ZlcnNjYW5Db2x1bW5TdG9wSW5kZXgsIF9vdmVyc2NhblJvd1N0YXJ0SW5kZXgsIF9vdmVyc2NhblJvd1N0b3BJbmRleCwgX3Zpc2libGVDb2x1bW5TdGFydEluZGV4LCBfdmlzaWJsZUNvbHVtblN0b3BJbmRleCwgX3Zpc2libGVSb3dTdGFydEluZGV4LCBfdmlzaWJsZVJvd1N0b3BJbmRleCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBvblNjcm9sbCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB2YXIgX3RoaXMkc3RhdGUzID0gdGhpcy5zdGF0ZSxcbiAgICAgICAgICAgIF9ob3Jpem9udGFsU2Nyb2xsRGlyZWN0aW9uID0gX3RoaXMkc3RhdGUzLmhvcml6b250YWxTY3JvbGxEaXJlY3Rpb24sXG4gICAgICAgICAgICBfc2Nyb2xsTGVmdCA9IF90aGlzJHN0YXRlMy5zY3JvbGxMZWZ0LFxuICAgICAgICAgICAgX3Njcm9sbFRvcCA9IF90aGlzJHN0YXRlMy5zY3JvbGxUb3AsXG4gICAgICAgICAgICBfc2Nyb2xsVXBkYXRlV2FzUmVxdWVzdGVkID0gX3RoaXMkc3RhdGUzLnNjcm9sbFVwZGF0ZVdhc1JlcXVlc3RlZCxcbiAgICAgICAgICAgIF92ZXJ0aWNhbFNjcm9sbERpcmVjdGlvbiA9IF90aGlzJHN0YXRlMy52ZXJ0aWNhbFNjcm9sbERpcmVjdGlvbjtcblxuICAgICAgICB0aGlzLl9jYWxsT25TY3JvbGwoX3Njcm9sbExlZnQsIF9zY3JvbGxUb3AsIF9ob3Jpem9udGFsU2Nyb2xsRGlyZWN0aW9uLCBfdmVydGljYWxTY3JvbGxEaXJlY3Rpb24sIF9zY3JvbGxVcGRhdGVXYXNSZXF1ZXN0ZWQpO1xuICAgICAgfVxuICAgIH0gLy8gTGF6aWx5IGNyZWF0ZSBhbmQgY2FjaGUgaXRlbSBzdHlsZXMgd2hpbGUgc2Nyb2xsaW5nLFxuICAgIC8vIFNvIHRoYXQgcHVyZSBjb21wb25lbnQgc0NVIHdpbGwgcHJldmVudCByZS1yZW5kZXJzLlxuICAgIC8vIFdlIG1haW50YWluIHRoaXMgY2FjaGUsIGFuZCBwYXNzIGEgc3R5bGUgcHJvcCByYXRoZXIgdGhhbiBpbmRleCxcbiAgICAvLyBTbyB0aGF0IExpc3QgY2FuIGNsZWFyIGNhY2hlZCBzdHlsZXMgYW5kIGZvcmNlIGl0ZW0gcmUtcmVuZGVyIGlmIG5lY2Vzc2FyeS5cbiAgICA7XG5cbiAgICBfcHJvdG8uX2dldEhvcml6b250YWxSYW5nZVRvUmVuZGVyID0gZnVuY3Rpb24gX2dldEhvcml6b250YWxSYW5nZVRvUmVuZGVyKCkge1xuICAgICAgdmFyIF90aGlzJHByb3BzNiA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgY29sdW1uQ291bnQgPSBfdGhpcyRwcm9wczYuY29sdW1uQ291bnQsXG4gICAgICAgICAgb3ZlcnNjYW5Db2x1bW5Db3VudCA9IF90aGlzJHByb3BzNi5vdmVyc2NhbkNvbHVtbkNvdW50LFxuICAgICAgICAgIG92ZXJzY2FuQ29sdW1uc0NvdW50ID0gX3RoaXMkcHJvcHM2Lm92ZXJzY2FuQ29sdW1uc0NvdW50LFxuICAgICAgICAgIG92ZXJzY2FuQ291bnQgPSBfdGhpcyRwcm9wczYub3ZlcnNjYW5Db3VudCxcbiAgICAgICAgICByb3dDb3VudCA9IF90aGlzJHByb3BzNi5yb3dDb3VudDtcbiAgICAgIHZhciBfdGhpcyRzdGF0ZTQgPSB0aGlzLnN0YXRlLFxuICAgICAgICAgIGhvcml6b250YWxTY3JvbGxEaXJlY3Rpb24gPSBfdGhpcyRzdGF0ZTQuaG9yaXpvbnRhbFNjcm9sbERpcmVjdGlvbixcbiAgICAgICAgICBpc1Njcm9sbGluZyA9IF90aGlzJHN0YXRlNC5pc1Njcm9sbGluZyxcbiAgICAgICAgICBzY3JvbGxMZWZ0ID0gX3RoaXMkc3RhdGU0LnNjcm9sbExlZnQ7XG4gICAgICB2YXIgb3ZlcnNjYW5Db3VudFJlc29sdmVkID0gb3ZlcnNjYW5Db2x1bW5Db3VudCB8fCBvdmVyc2NhbkNvbHVtbnNDb3VudCB8fCBvdmVyc2NhbkNvdW50IHx8IDE7XG5cbiAgICAgIGlmIChjb2x1bW5Db3VudCA9PT0gMCB8fCByb3dDb3VudCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gWzAsIDAsIDAsIDBdO1xuICAgICAgfVxuXG4gICAgICB2YXIgc3RhcnRJbmRleCA9IGdldENvbHVtblN0YXJ0SW5kZXhGb3JPZmZzZXQodGhpcy5wcm9wcywgc2Nyb2xsTGVmdCwgdGhpcy5faW5zdGFuY2VQcm9wcyk7XG4gICAgICB2YXIgc3RvcEluZGV4ID0gZ2V0Q29sdW1uU3RvcEluZGV4Rm9yU3RhcnRJbmRleCh0aGlzLnByb3BzLCBzdGFydEluZGV4LCBzY3JvbGxMZWZ0LCB0aGlzLl9pbnN0YW5jZVByb3BzKTsgLy8gT3ZlcnNjYW4gYnkgb25lIGl0ZW0gaW4gZWFjaCBkaXJlY3Rpb24gc28gdGhhdCB0YWIvZm9jdXMgd29ya3MuXG4gICAgICAvLyBJZiB0aGVyZSBpc24ndCBhdCBsZWFzdCBvbmUgZXh0cmEgaXRlbSwgdGFiIGxvb3BzIGJhY2sgYXJvdW5kLlxuXG4gICAgICB2YXIgb3ZlcnNjYW5CYWNrd2FyZCA9ICFpc1Njcm9sbGluZyB8fCBob3Jpem9udGFsU2Nyb2xsRGlyZWN0aW9uID09PSAnYmFja3dhcmQnID8gTWF0aC5tYXgoMSwgb3ZlcnNjYW5Db3VudFJlc29sdmVkKSA6IDE7XG4gICAgICB2YXIgb3ZlcnNjYW5Gb3J3YXJkID0gIWlzU2Nyb2xsaW5nIHx8IGhvcml6b250YWxTY3JvbGxEaXJlY3Rpb24gPT09ICdmb3J3YXJkJyA/IE1hdGgubWF4KDEsIG92ZXJzY2FuQ291bnRSZXNvbHZlZCkgOiAxO1xuICAgICAgcmV0dXJuIFtNYXRoLm1heCgwLCBzdGFydEluZGV4IC0gb3ZlcnNjYW5CYWNrd2FyZCksIE1hdGgubWF4KDAsIE1hdGgubWluKGNvbHVtbkNvdW50IC0gMSwgc3RvcEluZGV4ICsgb3ZlcnNjYW5Gb3J3YXJkKSksIHN0YXJ0SW5kZXgsIHN0b3BJbmRleF07XG4gICAgfTtcblxuICAgIF9wcm90by5fZ2V0VmVydGljYWxSYW5nZVRvUmVuZGVyID0gZnVuY3Rpb24gX2dldFZlcnRpY2FsUmFuZ2VUb1JlbmRlcigpIHtcbiAgICAgIHZhciBfdGhpcyRwcm9wczcgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGNvbHVtbkNvdW50ID0gX3RoaXMkcHJvcHM3LmNvbHVtbkNvdW50LFxuICAgICAgICAgIG92ZXJzY2FuQ291bnQgPSBfdGhpcyRwcm9wczcub3ZlcnNjYW5Db3VudCxcbiAgICAgICAgICBvdmVyc2NhblJvd0NvdW50ID0gX3RoaXMkcHJvcHM3Lm92ZXJzY2FuUm93Q291bnQsXG4gICAgICAgICAgb3ZlcnNjYW5Sb3dzQ291bnQgPSBfdGhpcyRwcm9wczcub3ZlcnNjYW5Sb3dzQ291bnQsXG4gICAgICAgICAgcm93Q291bnQgPSBfdGhpcyRwcm9wczcucm93Q291bnQ7XG4gICAgICB2YXIgX3RoaXMkc3RhdGU1ID0gdGhpcy5zdGF0ZSxcbiAgICAgICAgICBpc1Njcm9sbGluZyA9IF90aGlzJHN0YXRlNS5pc1Njcm9sbGluZyxcbiAgICAgICAgICB2ZXJ0aWNhbFNjcm9sbERpcmVjdGlvbiA9IF90aGlzJHN0YXRlNS52ZXJ0aWNhbFNjcm9sbERpcmVjdGlvbixcbiAgICAgICAgICBzY3JvbGxUb3AgPSBfdGhpcyRzdGF0ZTUuc2Nyb2xsVG9wO1xuICAgICAgdmFyIG92ZXJzY2FuQ291bnRSZXNvbHZlZCA9IG92ZXJzY2FuUm93Q291bnQgfHwgb3ZlcnNjYW5Sb3dzQ291bnQgfHwgb3ZlcnNjYW5Db3VudCB8fCAxO1xuXG4gICAgICBpZiAoY29sdW1uQ291bnQgPT09IDAgfHwgcm93Q291bnQgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIFswLCAwLCAwLCAwXTtcbiAgICAgIH1cblxuICAgICAgdmFyIHN0YXJ0SW5kZXggPSBnZXRSb3dTdGFydEluZGV4Rm9yT2Zmc2V0KHRoaXMucHJvcHMsIHNjcm9sbFRvcCwgdGhpcy5faW5zdGFuY2VQcm9wcyk7XG4gICAgICB2YXIgc3RvcEluZGV4ID0gZ2V0Um93U3RvcEluZGV4Rm9yU3RhcnRJbmRleCh0aGlzLnByb3BzLCBzdGFydEluZGV4LCBzY3JvbGxUb3AsIHRoaXMuX2luc3RhbmNlUHJvcHMpOyAvLyBPdmVyc2NhbiBieSBvbmUgaXRlbSBpbiBlYWNoIGRpcmVjdGlvbiBzbyB0aGF0IHRhYi9mb2N1cyB3b3Jrcy5cbiAgICAgIC8vIElmIHRoZXJlIGlzbid0IGF0IGxlYXN0IG9uZSBleHRyYSBpdGVtLCB0YWIgbG9vcHMgYmFjayBhcm91bmQuXG5cbiAgICAgIHZhciBvdmVyc2NhbkJhY2t3YXJkID0gIWlzU2Nyb2xsaW5nIHx8IHZlcnRpY2FsU2Nyb2xsRGlyZWN0aW9uID09PSAnYmFja3dhcmQnID8gTWF0aC5tYXgoMSwgb3ZlcnNjYW5Db3VudFJlc29sdmVkKSA6IDE7XG4gICAgICB2YXIgb3ZlcnNjYW5Gb3J3YXJkID0gIWlzU2Nyb2xsaW5nIHx8IHZlcnRpY2FsU2Nyb2xsRGlyZWN0aW9uID09PSAnZm9yd2FyZCcgPyBNYXRoLm1heCgxLCBvdmVyc2NhbkNvdW50UmVzb2x2ZWQpIDogMTtcbiAgICAgIHJldHVybiBbTWF0aC5tYXgoMCwgc3RhcnRJbmRleCAtIG92ZXJzY2FuQmFja3dhcmQpLCBNYXRoLm1heCgwLCBNYXRoLm1pbihyb3dDb3VudCAtIDEsIHN0b3BJbmRleCArIG92ZXJzY2FuRm9yd2FyZCkpLCBzdGFydEluZGV4LCBzdG9wSW5kZXhdO1xuICAgIH07XG5cbiAgICByZXR1cm4gR3JpZDtcbiAgfShQdXJlQ29tcG9uZW50KSwgX2NsYXNzLmRlZmF1bHRQcm9wcyA9IHtcbiAgICBkaXJlY3Rpb246ICdsdHInLFxuICAgIGl0ZW1EYXRhOiB1bmRlZmluZWQsXG4gICAgdXNlSXNTY3JvbGxpbmc6IGZhbHNlXG4gIH0sIF9jbGFzcztcbn1cblxudmFyIHZhbGlkYXRlU2hhcmVkUHJvcHMgPSBmdW5jdGlvbiB2YWxpZGF0ZVNoYXJlZFByb3BzKF9yZWY1LCBfcmVmNikge1xuICB2YXIgY2hpbGRyZW4gPSBfcmVmNS5jaGlsZHJlbixcbiAgICAgIGRpcmVjdGlvbiA9IF9yZWY1LmRpcmVjdGlvbixcbiAgICAgIGhlaWdodCA9IF9yZWY1LmhlaWdodCxcbiAgICAgIGlubmVyVGFnTmFtZSA9IF9yZWY1LmlubmVyVGFnTmFtZSxcbiAgICAgIG91dGVyVGFnTmFtZSA9IF9yZWY1Lm91dGVyVGFnTmFtZSxcbiAgICAgIG92ZXJzY2FuQ29sdW1uc0NvdW50ID0gX3JlZjUub3ZlcnNjYW5Db2x1bW5zQ291bnQsXG4gICAgICBvdmVyc2NhbkNvdW50ID0gX3JlZjUub3ZlcnNjYW5Db3VudCxcbiAgICAgIG92ZXJzY2FuUm93c0NvdW50ID0gX3JlZjUub3ZlcnNjYW5Sb3dzQ291bnQsXG4gICAgICB3aWR0aCA9IF9yZWY1LndpZHRoO1xuICB2YXIgaW5zdGFuY2UgPSBfcmVmNi5pbnN0YW5jZTtcblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGlmICh0eXBlb2Ygb3ZlcnNjYW5Db3VudCA9PT0gJ251bWJlcicpIHtcbiAgICAgIGlmIChkZXZXYXJuaW5nc092ZXJzY2FuQ291bnQgJiYgIWRldldhcm5pbmdzT3ZlcnNjYW5Db3VudC5oYXMoaW5zdGFuY2UpKSB7XG4gICAgICAgIGRldldhcm5pbmdzT3ZlcnNjYW5Db3VudC5hZGQoaW5zdGFuY2UpO1xuICAgICAgICBjb25zb2xlLndhcm4oJ1RoZSBvdmVyc2NhbkNvdW50IHByb3AgaGFzIGJlZW4gZGVwcmVjYXRlZC4gJyArICdQbGVhc2UgdXNlIHRoZSBvdmVyc2NhbkNvbHVtbkNvdW50IGFuZCBvdmVyc2NhblJvd0NvdW50IHByb3BzIGluc3RlYWQuJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBvdmVyc2NhbkNvbHVtbnNDb3VudCA9PT0gJ251bWJlcicgfHwgdHlwZW9mIG92ZXJzY2FuUm93c0NvdW50ID09PSAnbnVtYmVyJykge1xuICAgICAgaWYgKGRldldhcm5pbmdzT3ZlcnNjYW5Sb3dzQ29sdW1uc0NvdW50ICYmICFkZXZXYXJuaW5nc092ZXJzY2FuUm93c0NvbHVtbnNDb3VudC5oYXMoaW5zdGFuY2UpKSB7XG4gICAgICAgIGRldldhcm5pbmdzT3ZlcnNjYW5Sb3dzQ29sdW1uc0NvdW50LmFkZChpbnN0YW5jZSk7XG4gICAgICAgIGNvbnNvbGUud2FybignVGhlIG92ZXJzY2FuQ29sdW1uc0NvdW50IGFuZCBvdmVyc2NhblJvd3NDb3VudCBwcm9wcyBoYXZlIGJlZW4gZGVwcmVjYXRlZC4gJyArICdQbGVhc2UgdXNlIHRoZSBvdmVyc2NhbkNvbHVtbkNvdW50IGFuZCBvdmVyc2NhblJvd0NvdW50IHByb3BzIGluc3RlYWQuJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGlubmVyVGFnTmFtZSAhPSBudWxsIHx8IG91dGVyVGFnTmFtZSAhPSBudWxsKSB7XG4gICAgICBpZiAoZGV2V2FybmluZ3NUYWdOYW1lICYmICFkZXZXYXJuaW5nc1RhZ05hbWUuaGFzKGluc3RhbmNlKSkge1xuICAgICAgICBkZXZXYXJuaW5nc1RhZ05hbWUuYWRkKGluc3RhbmNlKTtcbiAgICAgICAgY29uc29sZS53YXJuKCdUaGUgaW5uZXJUYWdOYW1lIGFuZCBvdXRlclRhZ05hbWUgcHJvcHMgaGF2ZSBiZWVuIGRlcHJlY2F0ZWQuICcgKyAnUGxlYXNlIHVzZSB0aGUgaW5uZXJFbGVtZW50VHlwZSBhbmQgb3V0ZXJFbGVtZW50VHlwZSBwcm9wcyBpbnN0ZWFkLicpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjaGlsZHJlbiA9PSBudWxsKSB7XG4gICAgICB0aHJvdyBFcnJvcignQW4gaW52YWxpZCBcImNoaWxkcmVuXCIgcHJvcCBoYXMgYmVlbiBzcGVjaWZpZWQuICcgKyAnVmFsdWUgc2hvdWxkIGJlIGEgUmVhY3QgY29tcG9uZW50LiAnICsgKFwiXFxcIlwiICsgKGNoaWxkcmVuID09PSBudWxsID8gJ251bGwnIDogdHlwZW9mIGNoaWxkcmVuKSArIFwiXFxcIiB3YXMgc3BlY2lmaWVkLlwiKSk7XG4gICAgfVxuXG4gICAgc3dpdGNoIChkaXJlY3Rpb24pIHtcbiAgICAgIGNhc2UgJ2x0cic6XG4gICAgICBjYXNlICdydGwnOlxuICAgICAgICAvLyBWYWxpZCB2YWx1ZXNcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IEVycm9yKCdBbiBpbnZhbGlkIFwiZGlyZWN0aW9uXCIgcHJvcCBoYXMgYmVlbiBzcGVjaWZpZWQuICcgKyAnVmFsdWUgc2hvdWxkIGJlIGVpdGhlciBcImx0clwiIG9yIFwicnRsXCIuICcgKyAoXCJcXFwiXCIgKyBkaXJlY3Rpb24gKyBcIlxcXCIgd2FzIHNwZWNpZmllZC5cIikpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2Ygd2lkdGggIT09ICdudW1iZXInKSB7XG4gICAgICB0aHJvdyBFcnJvcignQW4gaW52YWxpZCBcIndpZHRoXCIgcHJvcCBoYXMgYmVlbiBzcGVjaWZpZWQuICcgKyAnR3JpZHMgbXVzdCBzcGVjaWZ5IGEgbnVtYmVyIGZvciB3aWR0aC4gJyArIChcIlxcXCJcIiArICh3aWR0aCA9PT0gbnVsbCA/ICdudWxsJyA6IHR5cGVvZiB3aWR0aCkgKyBcIlxcXCIgd2FzIHNwZWNpZmllZC5cIikpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgaGVpZ2h0ICE9PSAnbnVtYmVyJykge1xuICAgICAgdGhyb3cgRXJyb3IoJ0FuIGludmFsaWQgXCJoZWlnaHRcIiBwcm9wIGhhcyBiZWVuIHNwZWNpZmllZC4gJyArICdHcmlkcyBtdXN0IHNwZWNpZnkgYSBudW1iZXIgZm9yIGhlaWdodC4gJyArIChcIlxcXCJcIiArIChoZWlnaHQgPT09IG51bGwgPyAnbnVsbCcgOiB0eXBlb2YgaGVpZ2h0KSArIFwiXFxcIiB3YXMgc3BlY2lmaWVkLlwiKSk7XG4gICAgfVxuICB9XG59O1xuXG52YXIgREVGQVVMVF9FU1RJTUFURURfSVRFTV9TSVpFID0gNTA7XG5cbnZhciBnZXRFc3RpbWF0ZWRUb3RhbEhlaWdodCA9IGZ1bmN0aW9uIGdldEVzdGltYXRlZFRvdGFsSGVpZ2h0KF9yZWYsIF9yZWYyKSB7XG4gIHZhciByb3dDb3VudCA9IF9yZWYucm93Q291bnQ7XG4gIHZhciByb3dNZXRhZGF0YU1hcCA9IF9yZWYyLnJvd01ldGFkYXRhTWFwLFxuICAgICAgZXN0aW1hdGVkUm93SGVpZ2h0ID0gX3JlZjIuZXN0aW1hdGVkUm93SGVpZ2h0LFxuICAgICAgbGFzdE1lYXN1cmVkUm93SW5kZXggPSBfcmVmMi5sYXN0TWVhc3VyZWRSb3dJbmRleDtcbiAgdmFyIHRvdGFsU2l6ZU9mTWVhc3VyZWRSb3dzID0gMDsgLy8gRWRnZSBjYXNlIGNoZWNrIGZvciB3aGVuIHRoZSBudW1iZXIgb2YgaXRlbXMgZGVjcmVhc2VzIHdoaWxlIGEgc2Nyb2xsIGlzIGluIHByb2dyZXNzLlxuICAvLyBodHRwczovL2dpdGh1Yi5jb20vYnZhdWdobi9yZWFjdC13aW5kb3cvcHVsbC8xMzhcblxuICBpZiAobGFzdE1lYXN1cmVkUm93SW5kZXggPj0gcm93Q291bnQpIHtcbiAgICBsYXN0TWVhc3VyZWRSb3dJbmRleCA9IHJvd0NvdW50IC0gMTtcbiAgfVxuXG4gIGlmIChsYXN0TWVhc3VyZWRSb3dJbmRleCA+PSAwKSB7XG4gICAgdmFyIGl0ZW1NZXRhZGF0YSA9IHJvd01ldGFkYXRhTWFwW2xhc3RNZWFzdXJlZFJvd0luZGV4XTtcbiAgICB0b3RhbFNpemVPZk1lYXN1cmVkUm93cyA9IGl0ZW1NZXRhZGF0YS5vZmZzZXQgKyBpdGVtTWV0YWRhdGEuc2l6ZTtcbiAgfVxuXG4gIHZhciBudW1Vbm1lYXN1cmVkSXRlbXMgPSByb3dDb3VudCAtIGxhc3RNZWFzdXJlZFJvd0luZGV4IC0gMTtcbiAgdmFyIHRvdGFsU2l6ZU9mVW5tZWFzdXJlZEl0ZW1zID0gbnVtVW5tZWFzdXJlZEl0ZW1zICogZXN0aW1hdGVkUm93SGVpZ2h0O1xuICByZXR1cm4gdG90YWxTaXplT2ZNZWFzdXJlZFJvd3MgKyB0b3RhbFNpemVPZlVubWVhc3VyZWRJdGVtcztcbn07XG5cbnZhciBnZXRFc3RpbWF0ZWRUb3RhbFdpZHRoID0gZnVuY3Rpb24gZ2V0RXN0aW1hdGVkVG90YWxXaWR0aChfcmVmMywgX3JlZjQpIHtcbiAgdmFyIGNvbHVtbkNvdW50ID0gX3JlZjMuY29sdW1uQ291bnQ7XG4gIHZhciBjb2x1bW5NZXRhZGF0YU1hcCA9IF9yZWY0LmNvbHVtbk1ldGFkYXRhTWFwLFxuICAgICAgZXN0aW1hdGVkQ29sdW1uV2lkdGggPSBfcmVmNC5lc3RpbWF0ZWRDb2x1bW5XaWR0aCxcbiAgICAgIGxhc3RNZWFzdXJlZENvbHVtbkluZGV4ID0gX3JlZjQubGFzdE1lYXN1cmVkQ29sdW1uSW5kZXg7XG4gIHZhciB0b3RhbFNpemVPZk1lYXN1cmVkUm93cyA9IDA7IC8vIEVkZ2UgY2FzZSBjaGVjayBmb3Igd2hlbiB0aGUgbnVtYmVyIG9mIGl0ZW1zIGRlY3JlYXNlcyB3aGlsZSBhIHNjcm9sbCBpcyBpbiBwcm9ncmVzcy5cbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2J2YXVnaG4vcmVhY3Qtd2luZG93L3B1bGwvMTM4XG5cbiAgaWYgKGxhc3RNZWFzdXJlZENvbHVtbkluZGV4ID49IGNvbHVtbkNvdW50KSB7XG4gICAgbGFzdE1lYXN1cmVkQ29sdW1uSW5kZXggPSBjb2x1bW5Db3VudCAtIDE7XG4gIH1cblxuICBpZiAobGFzdE1lYXN1cmVkQ29sdW1uSW5kZXggPj0gMCkge1xuICAgIHZhciBpdGVtTWV0YWRhdGEgPSBjb2x1bW5NZXRhZGF0YU1hcFtsYXN0TWVhc3VyZWRDb2x1bW5JbmRleF07XG4gICAgdG90YWxTaXplT2ZNZWFzdXJlZFJvd3MgPSBpdGVtTWV0YWRhdGEub2Zmc2V0ICsgaXRlbU1ldGFkYXRhLnNpemU7XG4gIH1cblxuICB2YXIgbnVtVW5tZWFzdXJlZEl0ZW1zID0gY29sdW1uQ291bnQgLSBsYXN0TWVhc3VyZWRDb2x1bW5JbmRleCAtIDE7XG4gIHZhciB0b3RhbFNpemVPZlVubWVhc3VyZWRJdGVtcyA9IG51bVVubWVhc3VyZWRJdGVtcyAqIGVzdGltYXRlZENvbHVtbldpZHRoO1xuICByZXR1cm4gdG90YWxTaXplT2ZNZWFzdXJlZFJvd3MgKyB0b3RhbFNpemVPZlVubWVhc3VyZWRJdGVtcztcbn07XG5cbnZhciBnZXRJdGVtTWV0YWRhdGEgPSBmdW5jdGlvbiBnZXRJdGVtTWV0YWRhdGEoaXRlbVR5cGUsIHByb3BzLCBpbmRleCwgaW5zdGFuY2VQcm9wcykge1xuICB2YXIgaXRlbU1ldGFkYXRhTWFwLCBpdGVtU2l6ZSwgbGFzdE1lYXN1cmVkSW5kZXg7XG5cbiAgaWYgKGl0ZW1UeXBlID09PSAnY29sdW1uJykge1xuICAgIGl0ZW1NZXRhZGF0YU1hcCA9IGluc3RhbmNlUHJvcHMuY29sdW1uTWV0YWRhdGFNYXA7XG4gICAgaXRlbVNpemUgPSBwcm9wcy5jb2x1bW5XaWR0aDtcbiAgICBsYXN0TWVhc3VyZWRJbmRleCA9IGluc3RhbmNlUHJvcHMubGFzdE1lYXN1cmVkQ29sdW1uSW5kZXg7XG4gIH0gZWxzZSB7XG4gICAgaXRlbU1ldGFkYXRhTWFwID0gaW5zdGFuY2VQcm9wcy5yb3dNZXRhZGF0YU1hcDtcbiAgICBpdGVtU2l6ZSA9IHByb3BzLnJvd0hlaWdodDtcbiAgICBsYXN0TWVhc3VyZWRJbmRleCA9IGluc3RhbmNlUHJvcHMubGFzdE1lYXN1cmVkUm93SW5kZXg7XG4gIH1cblxuICBpZiAoaW5kZXggPiBsYXN0TWVhc3VyZWRJbmRleCkge1xuICAgIHZhciBvZmZzZXQgPSAwO1xuXG4gICAgaWYgKGxhc3RNZWFzdXJlZEluZGV4ID49IDApIHtcbiAgICAgIHZhciBpdGVtTWV0YWRhdGEgPSBpdGVtTWV0YWRhdGFNYXBbbGFzdE1lYXN1cmVkSW5kZXhdO1xuICAgICAgb2Zmc2V0ID0gaXRlbU1ldGFkYXRhLm9mZnNldCArIGl0ZW1NZXRhZGF0YS5zaXplO1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSBsYXN0TWVhc3VyZWRJbmRleCArIDE7IGkgPD0gaW5kZXg7IGkrKykge1xuICAgICAgdmFyIHNpemUgPSBpdGVtU2l6ZShpKTtcbiAgICAgIGl0ZW1NZXRhZGF0YU1hcFtpXSA9IHtcbiAgICAgICAgb2Zmc2V0OiBvZmZzZXQsXG4gICAgICAgIHNpemU6IHNpemVcbiAgICAgIH07XG4gICAgICBvZmZzZXQgKz0gc2l6ZTtcbiAgICB9XG5cbiAgICBpZiAoaXRlbVR5cGUgPT09ICdjb2x1bW4nKSB7XG4gICAgICBpbnN0YW5jZVByb3BzLmxhc3RNZWFzdXJlZENvbHVtbkluZGV4ID0gaW5kZXg7XG4gICAgfSBlbHNlIHtcbiAgICAgIGluc3RhbmNlUHJvcHMubGFzdE1lYXN1cmVkUm93SW5kZXggPSBpbmRleDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gaXRlbU1ldGFkYXRhTWFwW2luZGV4XTtcbn07XG5cbnZhciBmaW5kTmVhcmVzdEl0ZW0gPSBmdW5jdGlvbiBmaW5kTmVhcmVzdEl0ZW0oaXRlbVR5cGUsIHByb3BzLCBpbnN0YW5jZVByb3BzLCBvZmZzZXQpIHtcbiAgdmFyIGl0ZW1NZXRhZGF0YU1hcCwgbGFzdE1lYXN1cmVkSW5kZXg7XG5cbiAgaWYgKGl0ZW1UeXBlID09PSAnY29sdW1uJykge1xuICAgIGl0ZW1NZXRhZGF0YU1hcCA9IGluc3RhbmNlUHJvcHMuY29sdW1uTWV0YWRhdGFNYXA7XG4gICAgbGFzdE1lYXN1cmVkSW5kZXggPSBpbnN0YW5jZVByb3BzLmxhc3RNZWFzdXJlZENvbHVtbkluZGV4O1xuICB9IGVsc2Uge1xuICAgIGl0ZW1NZXRhZGF0YU1hcCA9IGluc3RhbmNlUHJvcHMucm93TWV0YWRhdGFNYXA7XG4gICAgbGFzdE1lYXN1cmVkSW5kZXggPSBpbnN0YW5jZVByb3BzLmxhc3RNZWFzdXJlZFJvd0luZGV4O1xuICB9XG5cbiAgdmFyIGxhc3RNZWFzdXJlZEl0ZW1PZmZzZXQgPSBsYXN0TWVhc3VyZWRJbmRleCA+IDAgPyBpdGVtTWV0YWRhdGFNYXBbbGFzdE1lYXN1cmVkSW5kZXhdLm9mZnNldCA6IDA7XG5cbiAgaWYgKGxhc3RNZWFzdXJlZEl0ZW1PZmZzZXQgPj0gb2Zmc2V0KSB7XG4gICAgLy8gSWYgd2UndmUgYWxyZWFkeSBtZWFzdXJlZCBpdGVtcyB3aXRoaW4gdGhpcyByYW5nZSBqdXN0IHVzZSBhIGJpbmFyeSBzZWFyY2ggYXMgaXQncyBmYXN0ZXIuXG4gICAgcmV0dXJuIGZpbmROZWFyZXN0SXRlbUJpbmFyeVNlYXJjaChpdGVtVHlwZSwgcHJvcHMsIGluc3RhbmNlUHJvcHMsIGxhc3RNZWFzdXJlZEluZGV4LCAwLCBvZmZzZXQpO1xuICB9IGVsc2Uge1xuICAgIC8vIElmIHdlIGhhdmVuJ3QgeWV0IG1lYXN1cmVkIHRoaXMgaGlnaCwgZmFsbGJhY2sgdG8gYW4gZXhwb25lbnRpYWwgc2VhcmNoIHdpdGggYW4gaW5uZXIgYmluYXJ5IHNlYXJjaC5cbiAgICAvLyBUaGUgZXhwb25lbnRpYWwgc2VhcmNoIGF2b2lkcyBwcmUtY29tcHV0aW5nIHNpemVzIGZvciB0aGUgZnVsbCBzZXQgb2YgaXRlbXMgYXMgYSBiaW5hcnkgc2VhcmNoIHdvdWxkLlxuICAgIC8vIFRoZSBvdmVyYWxsIGNvbXBsZXhpdHkgZm9yIHRoaXMgYXBwcm9hY2ggaXMgTyhsb2cgbikuXG4gICAgcmV0dXJuIGZpbmROZWFyZXN0SXRlbUV4cG9uZW50aWFsU2VhcmNoKGl0ZW1UeXBlLCBwcm9wcywgaW5zdGFuY2VQcm9wcywgTWF0aC5tYXgoMCwgbGFzdE1lYXN1cmVkSW5kZXgpLCBvZmZzZXQpO1xuICB9XG59O1xuXG52YXIgZmluZE5lYXJlc3RJdGVtQmluYXJ5U2VhcmNoID0gZnVuY3Rpb24gZmluZE5lYXJlc3RJdGVtQmluYXJ5U2VhcmNoKGl0ZW1UeXBlLCBwcm9wcywgaW5zdGFuY2VQcm9wcywgaGlnaCwgbG93LCBvZmZzZXQpIHtcbiAgd2hpbGUgKGxvdyA8PSBoaWdoKSB7XG4gICAgdmFyIG1pZGRsZSA9IGxvdyArIE1hdGguZmxvb3IoKGhpZ2ggLSBsb3cpIC8gMik7XG4gICAgdmFyIGN1cnJlbnRPZmZzZXQgPSBnZXRJdGVtTWV0YWRhdGEoaXRlbVR5cGUsIHByb3BzLCBtaWRkbGUsIGluc3RhbmNlUHJvcHMpLm9mZnNldDtcblxuICAgIGlmIChjdXJyZW50T2Zmc2V0ID09PSBvZmZzZXQpIHtcbiAgICAgIHJldHVybiBtaWRkbGU7XG4gICAgfSBlbHNlIGlmIChjdXJyZW50T2Zmc2V0IDwgb2Zmc2V0KSB7XG4gICAgICBsb3cgPSBtaWRkbGUgKyAxO1xuICAgIH0gZWxzZSBpZiAoY3VycmVudE9mZnNldCA+IG9mZnNldCkge1xuICAgICAgaGlnaCA9IG1pZGRsZSAtIDE7XG4gICAgfVxuICB9XG5cbiAgaWYgKGxvdyA+IDApIHtcbiAgICByZXR1cm4gbG93IC0gMTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gMDtcbiAgfVxufTtcblxudmFyIGZpbmROZWFyZXN0SXRlbUV4cG9uZW50aWFsU2VhcmNoID0gZnVuY3Rpb24gZmluZE5lYXJlc3RJdGVtRXhwb25lbnRpYWxTZWFyY2goaXRlbVR5cGUsIHByb3BzLCBpbnN0YW5jZVByb3BzLCBpbmRleCwgb2Zmc2V0KSB7XG4gIHZhciBpdGVtQ291bnQgPSBpdGVtVHlwZSA9PT0gJ2NvbHVtbicgPyBwcm9wcy5jb2x1bW5Db3VudCA6IHByb3BzLnJvd0NvdW50O1xuICB2YXIgaW50ZXJ2YWwgPSAxO1xuXG4gIHdoaWxlIChpbmRleCA8IGl0ZW1Db3VudCAmJiBnZXRJdGVtTWV0YWRhdGEoaXRlbVR5cGUsIHByb3BzLCBpbmRleCwgaW5zdGFuY2VQcm9wcykub2Zmc2V0IDwgb2Zmc2V0KSB7XG4gICAgaW5kZXggKz0gaW50ZXJ2YWw7XG4gICAgaW50ZXJ2YWwgKj0gMjtcbiAgfVxuXG4gIHJldHVybiBmaW5kTmVhcmVzdEl0ZW1CaW5hcnlTZWFyY2goaXRlbVR5cGUsIHByb3BzLCBpbnN0YW5jZVByb3BzLCBNYXRoLm1pbihpbmRleCwgaXRlbUNvdW50IC0gMSksIE1hdGguZmxvb3IoaW5kZXggLyAyKSwgb2Zmc2V0KTtcbn07XG5cbnZhciBnZXRPZmZzZXRGb3JJbmRleEFuZEFsaWdubWVudCA9IGZ1bmN0aW9uIGdldE9mZnNldEZvckluZGV4QW5kQWxpZ25tZW50KGl0ZW1UeXBlLCBwcm9wcywgaW5kZXgsIGFsaWduLCBzY3JvbGxPZmZzZXQsIGluc3RhbmNlUHJvcHMsIHNjcm9sbGJhclNpemUpIHtcbiAgdmFyIHNpemUgPSBpdGVtVHlwZSA9PT0gJ2NvbHVtbicgPyBwcm9wcy53aWR0aCA6IHByb3BzLmhlaWdodDtcbiAgdmFyIGl0ZW1NZXRhZGF0YSA9IGdldEl0ZW1NZXRhZGF0YShpdGVtVHlwZSwgcHJvcHMsIGluZGV4LCBpbnN0YW5jZVByb3BzKTsgLy8gR2V0IGVzdGltYXRlZCB0b3RhbCBzaXplIGFmdGVyIEl0ZW1NZXRhZGF0YSBpcyBjb21wdXRlZCxcbiAgLy8gVG8gZW5zdXJlIGl0IHJlZmxlY3RzIGFjdHVhbCBtZWFzdXJlbWVudHMgaW5zdGVhZCBvZiBqdXN0IGVzdGltYXRlcy5cblxuICB2YXIgZXN0aW1hdGVkVG90YWxTaXplID0gaXRlbVR5cGUgPT09ICdjb2x1bW4nID8gZ2V0RXN0aW1hdGVkVG90YWxXaWR0aChwcm9wcywgaW5zdGFuY2VQcm9wcykgOiBnZXRFc3RpbWF0ZWRUb3RhbEhlaWdodChwcm9wcywgaW5zdGFuY2VQcm9wcyk7XG4gIHZhciBtYXhPZmZzZXQgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihlc3RpbWF0ZWRUb3RhbFNpemUgLSBzaXplLCBpdGVtTWV0YWRhdGEub2Zmc2V0KSk7XG4gIHZhciBtaW5PZmZzZXQgPSBNYXRoLm1heCgwLCBpdGVtTWV0YWRhdGEub2Zmc2V0IC0gc2l6ZSArIHNjcm9sbGJhclNpemUgKyBpdGVtTWV0YWRhdGEuc2l6ZSk7XG5cbiAgaWYgKGFsaWduID09PSAnc21hcnQnKSB7XG4gICAgaWYgKHNjcm9sbE9mZnNldCA+PSBtaW5PZmZzZXQgLSBzaXplICYmIHNjcm9sbE9mZnNldCA8PSBtYXhPZmZzZXQgKyBzaXplKSB7XG4gICAgICBhbGlnbiA9ICdhdXRvJztcbiAgICB9IGVsc2Uge1xuICAgICAgYWxpZ24gPSAnY2VudGVyJztcbiAgICB9XG4gIH1cblxuICBzd2l0Y2ggKGFsaWduKSB7XG4gICAgY2FzZSAnc3RhcnQnOlxuICAgICAgcmV0dXJuIG1heE9mZnNldDtcblxuICAgIGNhc2UgJ2VuZCc6XG4gICAgICByZXR1cm4gbWluT2Zmc2V0O1xuXG4gICAgY2FzZSAnY2VudGVyJzpcbiAgICAgIHJldHVybiBNYXRoLnJvdW5kKG1pbk9mZnNldCArIChtYXhPZmZzZXQgLSBtaW5PZmZzZXQpIC8gMik7XG5cbiAgICBjYXNlICdhdXRvJzpcbiAgICBkZWZhdWx0OlxuICAgICAgaWYgKHNjcm9sbE9mZnNldCA+PSBtaW5PZmZzZXQgJiYgc2Nyb2xsT2Zmc2V0IDw9IG1heE9mZnNldCkge1xuICAgICAgICByZXR1cm4gc2Nyb2xsT2Zmc2V0O1xuICAgICAgfSBlbHNlIGlmIChtaW5PZmZzZXQgPiBtYXhPZmZzZXQpIHtcbiAgICAgICAgLy8gQmVjYXVzZSB3ZSBvbmx5IHRha2UgaW50byBhY2NvdW50IHRoZSBzY3JvbGxiYXIgc2l6ZSB3aGVuIGNhbGN1bGF0aW5nIG1pbk9mZnNldFxuICAgICAgICAvLyB0aGlzIHZhbHVlIGNhbiBiZSBsYXJnZXIgdGhhbiBtYXhPZmZzZXQgd2hlbiBhdCB0aGUgZW5kIG9mIHRoZSBsaXN0XG4gICAgICAgIHJldHVybiBtaW5PZmZzZXQ7XG4gICAgICB9IGVsc2UgaWYgKHNjcm9sbE9mZnNldCA8IG1pbk9mZnNldCkge1xuICAgICAgICByZXR1cm4gbWluT2Zmc2V0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG1heE9mZnNldDtcbiAgICAgIH1cblxuICB9XG59O1xuXG52YXIgVmFyaWFibGVTaXplR3JpZCA9IC8qI19fUFVSRV9fKi9jcmVhdGVHcmlkQ29tcG9uZW50KHtcbiAgZ2V0Q29sdW1uT2Zmc2V0OiBmdW5jdGlvbiBnZXRDb2x1bW5PZmZzZXQocHJvcHMsIGluZGV4LCBpbnN0YW5jZVByb3BzKSB7XG4gICAgcmV0dXJuIGdldEl0ZW1NZXRhZGF0YSgnY29sdW1uJywgcHJvcHMsIGluZGV4LCBpbnN0YW5jZVByb3BzKS5vZmZzZXQ7XG4gIH0sXG4gIGdldENvbHVtblN0YXJ0SW5kZXhGb3JPZmZzZXQ6IGZ1bmN0aW9uIGdldENvbHVtblN0YXJ0SW5kZXhGb3JPZmZzZXQocHJvcHMsIHNjcm9sbExlZnQsIGluc3RhbmNlUHJvcHMpIHtcbiAgICByZXR1cm4gZmluZE5lYXJlc3RJdGVtKCdjb2x1bW4nLCBwcm9wcywgaW5zdGFuY2VQcm9wcywgc2Nyb2xsTGVmdCk7XG4gIH0sXG4gIGdldENvbHVtblN0b3BJbmRleEZvclN0YXJ0SW5kZXg6IGZ1bmN0aW9uIGdldENvbHVtblN0b3BJbmRleEZvclN0YXJ0SW5kZXgocHJvcHMsIHN0YXJ0SW5kZXgsIHNjcm9sbExlZnQsIGluc3RhbmNlUHJvcHMpIHtcbiAgICB2YXIgY29sdW1uQ291bnQgPSBwcm9wcy5jb2x1bW5Db3VudCxcbiAgICAgICAgd2lkdGggPSBwcm9wcy53aWR0aDtcbiAgICB2YXIgaXRlbU1ldGFkYXRhID0gZ2V0SXRlbU1ldGFkYXRhKCdjb2x1bW4nLCBwcm9wcywgc3RhcnRJbmRleCwgaW5zdGFuY2VQcm9wcyk7XG4gICAgdmFyIG1heE9mZnNldCA9IHNjcm9sbExlZnQgKyB3aWR0aDtcbiAgICB2YXIgb2Zmc2V0ID0gaXRlbU1ldGFkYXRhLm9mZnNldCArIGl0ZW1NZXRhZGF0YS5zaXplO1xuICAgIHZhciBzdG9wSW5kZXggPSBzdGFydEluZGV4O1xuXG4gICAgd2hpbGUgKHN0b3BJbmRleCA8IGNvbHVtbkNvdW50IC0gMSAmJiBvZmZzZXQgPCBtYXhPZmZzZXQpIHtcbiAgICAgIHN0b3BJbmRleCsrO1xuICAgICAgb2Zmc2V0ICs9IGdldEl0ZW1NZXRhZGF0YSgnY29sdW1uJywgcHJvcHMsIHN0b3BJbmRleCwgaW5zdGFuY2VQcm9wcykuc2l6ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3RvcEluZGV4O1xuICB9LFxuICBnZXRDb2x1bW5XaWR0aDogZnVuY3Rpb24gZ2V0Q29sdW1uV2lkdGgocHJvcHMsIGluZGV4LCBpbnN0YW5jZVByb3BzKSB7XG4gICAgcmV0dXJuIGluc3RhbmNlUHJvcHMuY29sdW1uTWV0YWRhdGFNYXBbaW5kZXhdLnNpemU7XG4gIH0sXG4gIGdldEVzdGltYXRlZFRvdGFsSGVpZ2h0OiBnZXRFc3RpbWF0ZWRUb3RhbEhlaWdodCxcbiAgZ2V0RXN0aW1hdGVkVG90YWxXaWR0aDogZ2V0RXN0aW1hdGVkVG90YWxXaWR0aCxcbiAgZ2V0T2Zmc2V0Rm9yQ29sdW1uQW5kQWxpZ25tZW50OiBmdW5jdGlvbiBnZXRPZmZzZXRGb3JDb2x1bW5BbmRBbGlnbm1lbnQocHJvcHMsIGluZGV4LCBhbGlnbiwgc2Nyb2xsT2Zmc2V0LCBpbnN0YW5jZVByb3BzLCBzY3JvbGxiYXJTaXplKSB7XG4gICAgcmV0dXJuIGdldE9mZnNldEZvckluZGV4QW5kQWxpZ25tZW50KCdjb2x1bW4nLCBwcm9wcywgaW5kZXgsIGFsaWduLCBzY3JvbGxPZmZzZXQsIGluc3RhbmNlUHJvcHMsIHNjcm9sbGJhclNpemUpO1xuICB9LFxuICBnZXRPZmZzZXRGb3JSb3dBbmRBbGlnbm1lbnQ6IGZ1bmN0aW9uIGdldE9mZnNldEZvclJvd0FuZEFsaWdubWVudChwcm9wcywgaW5kZXgsIGFsaWduLCBzY3JvbGxPZmZzZXQsIGluc3RhbmNlUHJvcHMsIHNjcm9sbGJhclNpemUpIHtcbiAgICByZXR1cm4gZ2V0T2Zmc2V0Rm9ySW5kZXhBbmRBbGlnbm1lbnQoJ3JvdycsIHByb3BzLCBpbmRleCwgYWxpZ24sIHNjcm9sbE9mZnNldCwgaW5zdGFuY2VQcm9wcywgc2Nyb2xsYmFyU2l6ZSk7XG4gIH0sXG4gIGdldFJvd09mZnNldDogZnVuY3Rpb24gZ2V0Um93T2Zmc2V0KHByb3BzLCBpbmRleCwgaW5zdGFuY2VQcm9wcykge1xuICAgIHJldHVybiBnZXRJdGVtTWV0YWRhdGEoJ3JvdycsIHByb3BzLCBpbmRleCwgaW5zdGFuY2VQcm9wcykub2Zmc2V0O1xuICB9LFxuICBnZXRSb3dIZWlnaHQ6IGZ1bmN0aW9uIGdldFJvd0hlaWdodChwcm9wcywgaW5kZXgsIGluc3RhbmNlUHJvcHMpIHtcbiAgICByZXR1cm4gaW5zdGFuY2VQcm9wcy5yb3dNZXRhZGF0YU1hcFtpbmRleF0uc2l6ZTtcbiAgfSxcbiAgZ2V0Um93U3RhcnRJbmRleEZvck9mZnNldDogZnVuY3Rpb24gZ2V0Um93U3RhcnRJbmRleEZvck9mZnNldChwcm9wcywgc2Nyb2xsVG9wLCBpbnN0YW5jZVByb3BzKSB7XG4gICAgcmV0dXJuIGZpbmROZWFyZXN0SXRlbSgncm93JywgcHJvcHMsIGluc3RhbmNlUHJvcHMsIHNjcm9sbFRvcCk7XG4gIH0sXG4gIGdldFJvd1N0b3BJbmRleEZvclN0YXJ0SW5kZXg6IGZ1bmN0aW9uIGdldFJvd1N0b3BJbmRleEZvclN0YXJ0SW5kZXgocHJvcHMsIHN0YXJ0SW5kZXgsIHNjcm9sbFRvcCwgaW5zdGFuY2VQcm9wcykge1xuICAgIHZhciByb3dDb3VudCA9IHByb3BzLnJvd0NvdW50LFxuICAgICAgICBoZWlnaHQgPSBwcm9wcy5oZWlnaHQ7XG4gICAgdmFyIGl0ZW1NZXRhZGF0YSA9IGdldEl0ZW1NZXRhZGF0YSgncm93JywgcHJvcHMsIHN0YXJ0SW5kZXgsIGluc3RhbmNlUHJvcHMpO1xuICAgIHZhciBtYXhPZmZzZXQgPSBzY3JvbGxUb3AgKyBoZWlnaHQ7XG4gICAgdmFyIG9mZnNldCA9IGl0ZW1NZXRhZGF0YS5vZmZzZXQgKyBpdGVtTWV0YWRhdGEuc2l6ZTtcbiAgICB2YXIgc3RvcEluZGV4ID0gc3RhcnRJbmRleDtcblxuICAgIHdoaWxlIChzdG9wSW5kZXggPCByb3dDb3VudCAtIDEgJiYgb2Zmc2V0IDwgbWF4T2Zmc2V0KSB7XG4gICAgICBzdG9wSW5kZXgrKztcbiAgICAgIG9mZnNldCArPSBnZXRJdGVtTWV0YWRhdGEoJ3JvdycsIHByb3BzLCBzdG9wSW5kZXgsIGluc3RhbmNlUHJvcHMpLnNpemU7XG4gICAgfVxuXG4gICAgcmV0dXJuIHN0b3BJbmRleDtcbiAgfSxcbiAgaW5pdEluc3RhbmNlUHJvcHM6IGZ1bmN0aW9uIGluaXRJbnN0YW5jZVByb3BzKHByb3BzLCBpbnN0YW5jZSkge1xuICAgIHZhciBfcmVmNSA9IHByb3BzLFxuICAgICAgICBlc3RpbWF0ZWRDb2x1bW5XaWR0aCA9IF9yZWY1LmVzdGltYXRlZENvbHVtbldpZHRoLFxuICAgICAgICBlc3RpbWF0ZWRSb3dIZWlnaHQgPSBfcmVmNS5lc3RpbWF0ZWRSb3dIZWlnaHQ7XG4gICAgdmFyIGluc3RhbmNlUHJvcHMgPSB7XG4gICAgICBjb2x1bW5NZXRhZGF0YU1hcDoge30sXG4gICAgICBlc3RpbWF0ZWRDb2x1bW5XaWR0aDogZXN0aW1hdGVkQ29sdW1uV2lkdGggfHwgREVGQVVMVF9FU1RJTUFURURfSVRFTV9TSVpFLFxuICAgICAgZXN0aW1hdGVkUm93SGVpZ2h0OiBlc3RpbWF0ZWRSb3dIZWlnaHQgfHwgREVGQVVMVF9FU1RJTUFURURfSVRFTV9TSVpFLFxuICAgICAgbGFzdE1lYXN1cmVkQ29sdW1uSW5kZXg6IC0xLFxuICAgICAgbGFzdE1lYXN1cmVkUm93SW5kZXg6IC0xLFxuICAgICAgcm93TWV0YWRhdGFNYXA6IHt9XG4gICAgfTtcblxuICAgIGluc3RhbmNlLnJlc2V0QWZ0ZXJDb2x1bW5JbmRleCA9IGZ1bmN0aW9uIChjb2x1bW5JbmRleCwgc2hvdWxkRm9yY2VVcGRhdGUpIHtcbiAgICAgIGlmIChzaG91bGRGb3JjZVVwZGF0ZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHNob3VsZEZvcmNlVXBkYXRlID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaW5zdGFuY2UucmVzZXRBZnRlckluZGljZXMoe1xuICAgICAgICBjb2x1bW5JbmRleDogY29sdW1uSW5kZXgsXG4gICAgICAgIHNob3VsZEZvcmNlVXBkYXRlOiBzaG91bGRGb3JjZVVwZGF0ZVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIGluc3RhbmNlLnJlc2V0QWZ0ZXJSb3dJbmRleCA9IGZ1bmN0aW9uIChyb3dJbmRleCwgc2hvdWxkRm9yY2VVcGRhdGUpIHtcbiAgICAgIGlmIChzaG91bGRGb3JjZVVwZGF0ZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHNob3VsZEZvcmNlVXBkYXRlID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaW5zdGFuY2UucmVzZXRBZnRlckluZGljZXMoe1xuICAgICAgICByb3dJbmRleDogcm93SW5kZXgsXG4gICAgICAgIHNob3VsZEZvcmNlVXBkYXRlOiBzaG91bGRGb3JjZVVwZGF0ZVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIGluc3RhbmNlLnJlc2V0QWZ0ZXJJbmRpY2VzID0gZnVuY3Rpb24gKF9yZWY2KSB7XG4gICAgICB2YXIgY29sdW1uSW5kZXggPSBfcmVmNi5jb2x1bW5JbmRleCxcbiAgICAgICAgICByb3dJbmRleCA9IF9yZWY2LnJvd0luZGV4LFxuICAgICAgICAgIF9yZWY2JHNob3VsZEZvcmNlVXBkYSA9IF9yZWY2LnNob3VsZEZvcmNlVXBkYXRlLFxuICAgICAgICAgIHNob3VsZEZvcmNlVXBkYXRlID0gX3JlZjYkc2hvdWxkRm9yY2VVcGRhID09PSB2b2lkIDAgPyB0cnVlIDogX3JlZjYkc2hvdWxkRm9yY2VVcGRhO1xuXG4gICAgICBpZiAodHlwZW9mIGNvbHVtbkluZGV4ID09PSAnbnVtYmVyJykge1xuICAgICAgICBpbnN0YW5jZVByb3BzLmxhc3RNZWFzdXJlZENvbHVtbkluZGV4ID0gTWF0aC5taW4oaW5zdGFuY2VQcm9wcy5sYXN0TWVhc3VyZWRDb2x1bW5JbmRleCwgY29sdW1uSW5kZXggLSAxKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiByb3dJbmRleCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgaW5zdGFuY2VQcm9wcy5sYXN0TWVhc3VyZWRSb3dJbmRleCA9IE1hdGgubWluKGluc3RhbmNlUHJvcHMubGFzdE1lYXN1cmVkUm93SW5kZXgsIHJvd0luZGV4IC0gMSk7XG4gICAgICB9IC8vIFdlIGNvdWxkIHBvdGVudGlhbGx5IG9wdGltaXplIGZ1cnRoZXIgYnkgb25seSBldmljdGluZyBzdHlsZXMgYWZ0ZXIgdGhpcyBpbmRleCxcbiAgICAgIC8vIEJ1dCBzaW5jZSBzdHlsZXMgYXJlIG9ubHkgY2FjaGVkIHdoaWxlIHNjcm9sbGluZyBpcyBpbiBwcm9ncmVzcy1cbiAgICAgIC8vIEl0IHNlZW1zIGFuIHVubmVjZXNzYXJ5IG9wdGltaXphdGlvbi5cbiAgICAgIC8vIEl0J3MgdW5saWtlbHkgdGhhdCByZXNldEFmdGVySW5kZXgoKSB3aWxsIGJlIGNhbGxlZCB3aGlsZSBhIHVzZXIgaXMgc2Nyb2xsaW5nLlxuXG5cbiAgICAgIGluc3RhbmNlLl9nZXRJdGVtU3R5bGVDYWNoZSgtMSk7XG5cbiAgICAgIGlmIChzaG91bGRGb3JjZVVwZGF0ZSkge1xuICAgICAgICBpbnN0YW5jZS5mb3JjZVVwZGF0ZSgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gaW5zdGFuY2VQcm9wcztcbiAgfSxcbiAgc2hvdWxkUmVzZXRTdHlsZUNhY2hlT25JdGVtU2l6ZUNoYW5nZTogZmFsc2UsXG4gIHZhbGlkYXRlUHJvcHM6IGZ1bmN0aW9uIHZhbGlkYXRlUHJvcHMoX3JlZjcpIHtcbiAgICB2YXIgY29sdW1uV2lkdGggPSBfcmVmNy5jb2x1bW5XaWR0aCxcbiAgICAgICAgcm93SGVpZ2h0ID0gX3JlZjcucm93SGVpZ2h0O1xuXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGlmICh0eXBlb2YgY29sdW1uV2lkdGggIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoJ0FuIGludmFsaWQgXCJjb2x1bW5XaWR0aFwiIHByb3AgaGFzIGJlZW4gc3BlY2lmaWVkLiAnICsgJ1ZhbHVlIHNob3VsZCBiZSBhIGZ1bmN0aW9uLiAnICsgKFwiXFxcIlwiICsgKGNvbHVtbldpZHRoID09PSBudWxsID8gJ251bGwnIDogdHlwZW9mIGNvbHVtbldpZHRoKSArIFwiXFxcIiB3YXMgc3BlY2lmaWVkLlwiKSk7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiByb3dIZWlnaHQgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoJ0FuIGludmFsaWQgXCJyb3dIZWlnaHRcIiBwcm9wIGhhcyBiZWVuIHNwZWNpZmllZC4gJyArICdWYWx1ZSBzaG91bGQgYmUgYSBmdW5jdGlvbi4gJyArIChcIlxcXCJcIiArIChyb3dIZWlnaHQgPT09IG51bGwgPyAnbnVsbCcgOiB0eXBlb2Ygcm93SGVpZ2h0KSArIFwiXFxcIiB3YXMgc3BlY2lmaWVkLlwiKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59KTtcblxudmFyIElTX1NDUk9MTElOR19ERUJPVU5DRV9JTlRFUlZBTCQxID0gMTUwO1xuXG52YXIgZGVmYXVsdEl0ZW1LZXkkMSA9IGZ1bmN0aW9uIGRlZmF1bHRJdGVtS2V5KGluZGV4LCBkYXRhKSB7XG4gIHJldHVybiBpbmRleDtcbn07IC8vIEluIERFViBtb2RlLCB0aGlzIFNldCBoZWxwcyB1cyBvbmx5IGxvZyBhIHdhcm5pbmcgb25jZSBwZXIgY29tcG9uZW50IGluc3RhbmNlLlxuLy8gVGhpcyBhdm9pZHMgc3BhbW1pbmcgdGhlIGNvbnNvbGUgZXZlcnkgdGltZSBhIHJlbmRlciBoYXBwZW5zLlxuXG5cbnZhciBkZXZXYXJuaW5nc0RpcmVjdGlvbiA9IG51bGw7XG52YXIgZGV2V2FybmluZ3NUYWdOYW1lJDEgPSBudWxsO1xuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHdpbmRvdy5XZWFrU2V0ICE9PSAndW5kZWZpbmVkJykge1xuICAgIGRldldhcm5pbmdzRGlyZWN0aW9uID0gLyojX19QVVJFX18qL25ldyBXZWFrU2V0KCk7XG4gICAgZGV2V2FybmluZ3NUYWdOYW1lJDEgPSAvKiNfX1BVUkVfXyovbmV3IFdlYWtTZXQoKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVMaXN0Q29tcG9uZW50KF9yZWYpIHtcbiAgdmFyIF9jbGFzcztcblxuICB2YXIgZ2V0SXRlbU9mZnNldCA9IF9yZWYuZ2V0SXRlbU9mZnNldCxcbiAgICAgIGdldEVzdGltYXRlZFRvdGFsU2l6ZSA9IF9yZWYuZ2V0RXN0aW1hdGVkVG90YWxTaXplLFxuICAgICAgZ2V0SXRlbVNpemUgPSBfcmVmLmdldEl0ZW1TaXplLFxuICAgICAgZ2V0T2Zmc2V0Rm9ySW5kZXhBbmRBbGlnbm1lbnQgPSBfcmVmLmdldE9mZnNldEZvckluZGV4QW5kQWxpZ25tZW50LFxuICAgICAgZ2V0U3RhcnRJbmRleEZvck9mZnNldCA9IF9yZWYuZ2V0U3RhcnRJbmRleEZvck9mZnNldCxcbiAgICAgIGdldFN0b3BJbmRleEZvclN0YXJ0SW5kZXggPSBfcmVmLmdldFN0b3BJbmRleEZvclN0YXJ0SW5kZXgsXG4gICAgICBpbml0SW5zdGFuY2VQcm9wcyA9IF9yZWYuaW5pdEluc3RhbmNlUHJvcHMsXG4gICAgICBzaG91bGRSZXNldFN0eWxlQ2FjaGVPbkl0ZW1TaXplQ2hhbmdlID0gX3JlZi5zaG91bGRSZXNldFN0eWxlQ2FjaGVPbkl0ZW1TaXplQ2hhbmdlLFxuICAgICAgdmFsaWRhdGVQcm9wcyA9IF9yZWYudmFsaWRhdGVQcm9wcztcbiAgcmV0dXJuIF9jbGFzcyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1B1cmVDb21wb25lbnQpIHtcbiAgICBfaW5oZXJpdHNMb29zZShMaXN0LCBfUHVyZUNvbXBvbmVudCk7XG5cbiAgICAvLyBBbHdheXMgdXNlIGV4cGxpY2l0IGNvbnN0cnVjdG9yIGZvciBSZWFjdCBjb21wb25lbnRzLlxuICAgIC8vIEl0IHByb2R1Y2VzIGxlc3MgY29kZSBhZnRlciB0cmFuc3BpbGF0aW9uLiAoIzI2KVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11c2VsZXNzLWNvbnN0cnVjdG9yXG4gICAgZnVuY3Rpb24gTGlzdChwcm9wcykge1xuICAgICAgdmFyIF90aGlzO1xuXG4gICAgICBfdGhpcyA9IF9QdXJlQ29tcG9uZW50LmNhbGwodGhpcywgcHJvcHMpIHx8IHRoaXM7XG4gICAgICBfdGhpcy5faW5zdGFuY2VQcm9wcyA9IGluaXRJbnN0YW5jZVByb3BzKF90aGlzLnByb3BzLCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgICBfdGhpcy5fb3V0ZXJSZWYgPSB2b2lkIDA7XG4gICAgICBfdGhpcy5fcmVzZXRJc1Njcm9sbGluZ1RpbWVvdXRJZCA9IG51bGw7XG4gICAgICBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgaW5zdGFuY2U6IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLFxuICAgICAgICBpc1Njcm9sbGluZzogZmFsc2UsXG4gICAgICAgIHNjcm9sbERpcmVjdGlvbjogJ2ZvcndhcmQnLFxuICAgICAgICBzY3JvbGxPZmZzZXQ6IHR5cGVvZiBfdGhpcy5wcm9wcy5pbml0aWFsU2Nyb2xsT2Zmc2V0ID09PSAnbnVtYmVyJyA/IF90aGlzLnByb3BzLmluaXRpYWxTY3JvbGxPZmZzZXQgOiAwLFxuICAgICAgICBzY3JvbGxVcGRhdGVXYXNSZXF1ZXN0ZWQ6IGZhbHNlXG4gICAgICB9O1xuICAgICAgX3RoaXMuX2NhbGxPbkl0ZW1zUmVuZGVyZWQgPSB2b2lkIDA7XG4gICAgICBfdGhpcy5fY2FsbE9uSXRlbXNSZW5kZXJlZCA9IG1lbW9pemVPbmUoZnVuY3Rpb24gKG92ZXJzY2FuU3RhcnRJbmRleCwgb3ZlcnNjYW5TdG9wSW5kZXgsIHZpc2libGVTdGFydEluZGV4LCB2aXNpYmxlU3RvcEluZGV4KSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5wcm9wcy5vbkl0ZW1zUmVuZGVyZWQoe1xuICAgICAgICAgIG92ZXJzY2FuU3RhcnRJbmRleDogb3ZlcnNjYW5TdGFydEluZGV4LFxuICAgICAgICAgIG92ZXJzY2FuU3RvcEluZGV4OiBvdmVyc2NhblN0b3BJbmRleCxcbiAgICAgICAgICB2aXNpYmxlU3RhcnRJbmRleDogdmlzaWJsZVN0YXJ0SW5kZXgsXG4gICAgICAgICAgdmlzaWJsZVN0b3BJbmRleDogdmlzaWJsZVN0b3BJbmRleFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgX3RoaXMuX2NhbGxPblNjcm9sbCA9IHZvaWQgMDtcbiAgICAgIF90aGlzLl9jYWxsT25TY3JvbGwgPSBtZW1vaXplT25lKGZ1bmN0aW9uIChzY3JvbGxEaXJlY3Rpb24sIHNjcm9sbE9mZnNldCwgc2Nyb2xsVXBkYXRlV2FzUmVxdWVzdGVkKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5wcm9wcy5vblNjcm9sbCh7XG4gICAgICAgICAgc2Nyb2xsRGlyZWN0aW9uOiBzY3JvbGxEaXJlY3Rpb24sXG4gICAgICAgICAgc2Nyb2xsT2Zmc2V0OiBzY3JvbGxPZmZzZXQsXG4gICAgICAgICAgc2Nyb2xsVXBkYXRlV2FzUmVxdWVzdGVkOiBzY3JvbGxVcGRhdGVXYXNSZXF1ZXN0ZWRcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIF90aGlzLl9nZXRJdGVtU3R5bGUgPSB2b2lkIDA7XG5cbiAgICAgIF90aGlzLl9nZXRJdGVtU3R5bGUgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgdmFyIF90aGlzJHByb3BzID0gX3RoaXMucHJvcHMsXG4gICAgICAgICAgICBkaXJlY3Rpb24gPSBfdGhpcyRwcm9wcy5kaXJlY3Rpb24sXG4gICAgICAgICAgICBpdGVtU2l6ZSA9IF90aGlzJHByb3BzLml0ZW1TaXplLFxuICAgICAgICAgICAgbGF5b3V0ID0gX3RoaXMkcHJvcHMubGF5b3V0O1xuXG4gICAgICAgIHZhciBpdGVtU3R5bGVDYWNoZSA9IF90aGlzLl9nZXRJdGVtU3R5bGVDYWNoZShzaG91bGRSZXNldFN0eWxlQ2FjaGVPbkl0ZW1TaXplQ2hhbmdlICYmIGl0ZW1TaXplLCBzaG91bGRSZXNldFN0eWxlQ2FjaGVPbkl0ZW1TaXplQ2hhbmdlICYmIGxheW91dCwgc2hvdWxkUmVzZXRTdHlsZUNhY2hlT25JdGVtU2l6ZUNoYW5nZSAmJiBkaXJlY3Rpb24pO1xuXG4gICAgICAgIHZhciBzdHlsZTtcblxuICAgICAgICBpZiAoaXRlbVN0eWxlQ2FjaGUuaGFzT3duUHJvcGVydHkoaW5kZXgpKSB7XG4gICAgICAgICAgc3R5bGUgPSBpdGVtU3R5bGVDYWNoZVtpbmRleF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIF9vZmZzZXQgPSBnZXRJdGVtT2Zmc2V0KF90aGlzLnByb3BzLCBpbmRleCwgX3RoaXMuX2luc3RhbmNlUHJvcHMpO1xuXG4gICAgICAgICAgdmFyIHNpemUgPSBnZXRJdGVtU2l6ZShfdGhpcy5wcm9wcywgaW5kZXgsIF90aGlzLl9pbnN0YW5jZVByb3BzKTsgLy8gVE9ETyBEZXByZWNhdGUgZGlyZWN0aW9uIFwiaG9yaXpvbnRhbFwiXG5cbiAgICAgICAgICB2YXIgaXNIb3Jpem9udGFsID0gZGlyZWN0aW9uID09PSAnaG9yaXpvbnRhbCcgfHwgbGF5b3V0ID09PSAnaG9yaXpvbnRhbCc7XG4gICAgICAgICAgdmFyIGlzUnRsID0gZGlyZWN0aW9uID09PSAncnRsJztcbiAgICAgICAgICB2YXIgb2Zmc2V0SG9yaXpvbnRhbCA9IGlzSG9yaXpvbnRhbCA/IF9vZmZzZXQgOiAwO1xuICAgICAgICAgIGl0ZW1TdHlsZUNhY2hlW2luZGV4XSA9IHN0eWxlID0ge1xuICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgICAgICBsZWZ0OiBpc1J0bCA/IHVuZGVmaW5lZCA6IG9mZnNldEhvcml6b250YWwsXG4gICAgICAgICAgICByaWdodDogaXNSdGwgPyBvZmZzZXRIb3Jpem9udGFsIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgdG9wOiAhaXNIb3Jpem9udGFsID8gX29mZnNldCA6IDAsXG4gICAgICAgICAgICBoZWlnaHQ6ICFpc0hvcml6b250YWwgPyBzaXplIDogJzEwMCUnLFxuICAgICAgICAgICAgd2lkdGg6IGlzSG9yaXpvbnRhbCA/IHNpemUgOiAnMTAwJSdcbiAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN0eWxlO1xuICAgICAgfTtcblxuICAgICAgX3RoaXMuX2dldEl0ZW1TdHlsZUNhY2hlID0gdm9pZCAwO1xuICAgICAgX3RoaXMuX2dldEl0ZW1TdHlsZUNhY2hlID0gbWVtb2l6ZU9uZShmdW5jdGlvbiAoXywgX18sIF9fXykge1xuICAgICAgICByZXR1cm4ge307XG4gICAgICB9KTtcblxuICAgICAgX3RoaXMuX29uU2Nyb2xsSG9yaXpvbnRhbCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgX2V2ZW50JGN1cnJlbnRUYXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0LFxuICAgICAgICAgICAgY2xpZW50V2lkdGggPSBfZXZlbnQkY3VycmVudFRhcmdldC5jbGllbnRXaWR0aCxcbiAgICAgICAgICAgIHNjcm9sbExlZnQgPSBfZXZlbnQkY3VycmVudFRhcmdldC5zY3JvbGxMZWZ0LFxuICAgICAgICAgICAgc2Nyb2xsV2lkdGggPSBfZXZlbnQkY3VycmVudFRhcmdldC5zY3JvbGxXaWR0aDtcblxuICAgICAgICBfdGhpcy5zZXRTdGF0ZShmdW5jdGlvbiAocHJldlN0YXRlKSB7XG4gICAgICAgICAgaWYgKHByZXZTdGF0ZS5zY3JvbGxPZmZzZXQgPT09IHNjcm9sbExlZnQpIHtcbiAgICAgICAgICAgIC8vIFNjcm9sbCBwb3NpdGlvbiBtYXkgaGF2ZSBiZWVuIHVwZGF0ZWQgYnkgY0RNL2NEVSxcbiAgICAgICAgICAgIC8vIEluIHdoaWNoIGNhc2Ugd2UgZG9uJ3QgbmVlZCB0byB0cmlnZ2VyIGFub3RoZXIgcmVuZGVyLFxuICAgICAgICAgICAgLy8gQW5kIHdlIGRvbid0IHdhbnQgdG8gdXBkYXRlIHN0YXRlLmlzU2Nyb2xsaW5nLlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIGRpcmVjdGlvbiA9IF90aGlzLnByb3BzLmRpcmVjdGlvbjtcbiAgICAgICAgICB2YXIgc2Nyb2xsT2Zmc2V0ID0gc2Nyb2xsTGVmdDtcblxuICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdydGwnKSB7XG4gICAgICAgICAgICAvLyBUUklDS1kgQWNjb3JkaW5nIHRvIHRoZSBzcGVjLCBzY3JvbGxMZWZ0IHNob3VsZCBiZSBuZWdhdGl2ZSBmb3IgUlRMIGFsaWduZWQgZWxlbWVudHMuXG4gICAgICAgICAgICAvLyBUaGlzIGlzIG5vdCB0aGUgY2FzZSBmb3IgYWxsIGJyb3dzZXJzIHRob3VnaCAoZS5nLiBDaHJvbWUgcmVwb3J0cyB2YWx1ZXMgYXMgcG9zaXRpdmUsIG1lYXN1cmVkIHJlbGF0aXZlIHRvIHRoZSBsZWZ0KS5cbiAgICAgICAgICAgIC8vIEl0J3MgYWxzbyBlYXNpZXIgZm9yIHRoaXMgY29tcG9uZW50IGlmIHdlIGNvbnZlcnQgb2Zmc2V0cyB0byB0aGUgc2FtZSBmb3JtYXQgYXMgdGhleSB3b3VsZCBiZSBpbiBmb3IgbHRyLlxuICAgICAgICAgICAgLy8gU28gdGhlIHNpbXBsZXN0IHNvbHV0aW9uIGlzIHRvIGRldGVybWluZSB3aGljaCBicm93c2VyIGJlaGF2aW9yIHdlJ3JlIGRlYWxpbmcgd2l0aCwgYW5kIGNvbnZlcnQgYmFzZWQgb24gaXQuXG4gICAgICAgICAgICBzd2l0Y2ggKGdldFJUTE9mZnNldFR5cGUoKSkge1xuICAgICAgICAgICAgICBjYXNlICduZWdhdGl2ZSc6XG4gICAgICAgICAgICAgICAgc2Nyb2xsT2Zmc2V0ID0gLXNjcm9sbExlZnQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAncG9zaXRpdmUtZGVzY2VuZGluZyc6XG4gICAgICAgICAgICAgICAgc2Nyb2xsT2Zmc2V0ID0gc2Nyb2xsV2lkdGggLSBjbGllbnRXaWR0aCAtIHNjcm9sbExlZnQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSAvLyBQcmV2ZW50IFNhZmFyaSdzIGVsYXN0aWMgc2Nyb2xsaW5nIGZyb20gY2F1c2luZyB2aXN1YWwgc2hha2luZyB3aGVuIHNjcm9sbGluZyBwYXN0IGJvdW5kcy5cblxuXG4gICAgICAgICAgc2Nyb2xsT2Zmc2V0ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oc2Nyb2xsT2Zmc2V0LCBzY3JvbGxXaWR0aCAtIGNsaWVudFdpZHRoKSk7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlzU2Nyb2xsaW5nOiB0cnVlLFxuICAgICAgICAgICAgc2Nyb2xsRGlyZWN0aW9uOiBwcmV2U3RhdGUuc2Nyb2xsT2Zmc2V0IDwgc2Nyb2xsTGVmdCA/ICdmb3J3YXJkJyA6ICdiYWNrd2FyZCcsXG4gICAgICAgICAgICBzY3JvbGxPZmZzZXQ6IHNjcm9sbE9mZnNldCxcbiAgICAgICAgICAgIHNjcm9sbFVwZGF0ZVdhc1JlcXVlc3RlZDogZmFsc2VcbiAgICAgICAgICB9O1xuICAgICAgICB9LCBfdGhpcy5fcmVzZXRJc1Njcm9sbGluZ0RlYm91bmNlZCk7XG4gICAgICB9O1xuXG4gICAgICBfdGhpcy5fb25TY3JvbGxWZXJ0aWNhbCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgX2V2ZW50JGN1cnJlbnRUYXJnZXQyID0gZXZlbnQuY3VycmVudFRhcmdldCxcbiAgICAgICAgICAgIGNsaWVudEhlaWdodCA9IF9ldmVudCRjdXJyZW50VGFyZ2V0Mi5jbGllbnRIZWlnaHQsXG4gICAgICAgICAgICBzY3JvbGxIZWlnaHQgPSBfZXZlbnQkY3VycmVudFRhcmdldDIuc2Nyb2xsSGVpZ2h0LFxuICAgICAgICAgICAgc2Nyb2xsVG9wID0gX2V2ZW50JGN1cnJlbnRUYXJnZXQyLnNjcm9sbFRvcDtcblxuICAgICAgICBfdGhpcy5zZXRTdGF0ZShmdW5jdGlvbiAocHJldlN0YXRlKSB7XG4gICAgICAgICAgaWYgKHByZXZTdGF0ZS5zY3JvbGxPZmZzZXQgPT09IHNjcm9sbFRvcCkge1xuICAgICAgICAgICAgLy8gU2Nyb2xsIHBvc2l0aW9uIG1heSBoYXZlIGJlZW4gdXBkYXRlZCBieSBjRE0vY0RVLFxuICAgICAgICAgICAgLy8gSW4gd2hpY2ggY2FzZSB3ZSBkb24ndCBuZWVkIHRvIHRyaWdnZXIgYW5vdGhlciByZW5kZXIsXG4gICAgICAgICAgICAvLyBBbmQgd2UgZG9uJ3Qgd2FudCB0byB1cGRhdGUgc3RhdGUuaXNTY3JvbGxpbmcuXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICB9IC8vIFByZXZlbnQgU2FmYXJpJ3MgZWxhc3RpYyBzY3JvbGxpbmcgZnJvbSBjYXVzaW5nIHZpc3VhbCBzaGFraW5nIHdoZW4gc2Nyb2xsaW5nIHBhc3QgYm91bmRzLlxuXG5cbiAgICAgICAgICB2YXIgc2Nyb2xsT2Zmc2V0ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oc2Nyb2xsVG9wLCBzY3JvbGxIZWlnaHQgLSBjbGllbnRIZWlnaHQpKTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaXNTY3JvbGxpbmc6IHRydWUsXG4gICAgICAgICAgICBzY3JvbGxEaXJlY3Rpb246IHByZXZTdGF0ZS5zY3JvbGxPZmZzZXQgPCBzY3JvbGxPZmZzZXQgPyAnZm9yd2FyZCcgOiAnYmFja3dhcmQnLFxuICAgICAgICAgICAgc2Nyb2xsT2Zmc2V0OiBzY3JvbGxPZmZzZXQsXG4gICAgICAgICAgICBzY3JvbGxVcGRhdGVXYXNSZXF1ZXN0ZWQ6IGZhbHNlXG4gICAgICAgICAgfTtcbiAgICAgICAgfSwgX3RoaXMuX3Jlc2V0SXNTY3JvbGxpbmdEZWJvdW5jZWQpO1xuICAgICAgfTtcblxuICAgICAgX3RoaXMuX291dGVyUmVmU2V0dGVyID0gZnVuY3Rpb24gKHJlZikge1xuICAgICAgICB2YXIgb3V0ZXJSZWYgPSBfdGhpcy5wcm9wcy5vdXRlclJlZjtcbiAgICAgICAgX3RoaXMuX291dGVyUmVmID0gcmVmO1xuXG4gICAgICAgIGlmICh0eXBlb2Ygb3V0ZXJSZWYgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBvdXRlclJlZihyZWYpO1xuICAgICAgICB9IGVsc2UgaWYgKG91dGVyUmVmICE9IG51bGwgJiYgdHlwZW9mIG91dGVyUmVmID09PSAnb2JqZWN0JyAmJiBvdXRlclJlZi5oYXNPd25Qcm9wZXJ0eSgnY3VycmVudCcpKSB7XG4gICAgICAgICAgb3V0ZXJSZWYuY3VycmVudCA9IHJlZjtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgX3RoaXMuX3Jlc2V0SXNTY3JvbGxpbmdEZWJvdW5jZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChfdGhpcy5fcmVzZXRJc1Njcm9sbGluZ1RpbWVvdXRJZCAhPT0gbnVsbCkge1xuICAgICAgICAgIGNhbmNlbFRpbWVvdXQoX3RoaXMuX3Jlc2V0SXNTY3JvbGxpbmdUaW1lb3V0SWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXMuX3Jlc2V0SXNTY3JvbGxpbmdUaW1lb3V0SWQgPSByZXF1ZXN0VGltZW91dChfdGhpcy5fcmVzZXRJc1Njcm9sbGluZywgSVNfU0NST0xMSU5HX0RFQk9VTkNFX0lOVEVSVkFMJDEpO1xuICAgICAgfTtcblxuICAgICAgX3RoaXMuX3Jlc2V0SXNTY3JvbGxpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF90aGlzLl9yZXNldElzU2Nyb2xsaW5nVGltZW91dElkID0gbnVsbDtcblxuICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgaXNTY3JvbGxpbmc6IGZhbHNlXG4gICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAvLyBDbGVhciBzdHlsZSBjYWNoZSBhZnRlciBzdGF0ZSB1cGRhdGUgaGFzIGJlZW4gY29tbWl0dGVkLlxuICAgICAgICAgIC8vIFRoaXMgd2F5IHdlIGRvbid0IGJyZWFrIHB1cmUgc0NVIGZvciBpdGVtcyB0aGF0IGRvbid0IHVzZSBpc1Njcm9sbGluZyBwYXJhbS5cbiAgICAgICAgICBfdGhpcy5fZ2V0SXRlbVN0eWxlQ2FjaGUoLTEsIG51bGwpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG5cbiAgICBMaXN0LmdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyA9IGZ1bmN0aW9uIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyhuZXh0UHJvcHMsIHByZXZTdGF0ZSkge1xuICAgICAgdmFsaWRhdGVTaGFyZWRQcm9wcyQxKG5leHRQcm9wcywgcHJldlN0YXRlKTtcbiAgICAgIHZhbGlkYXRlUHJvcHMobmV4dFByb3BzKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG5cbiAgICB2YXIgX3Byb3RvID0gTGlzdC5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8uc2Nyb2xsVG8gPSBmdW5jdGlvbiBzY3JvbGxUbyhzY3JvbGxPZmZzZXQpIHtcbiAgICAgIHNjcm9sbE9mZnNldCA9IE1hdGgubWF4KDAsIHNjcm9sbE9mZnNldCk7XG4gICAgICB0aGlzLnNldFN0YXRlKGZ1bmN0aW9uIChwcmV2U3RhdGUpIHtcbiAgICAgICAgaWYgKHByZXZTdGF0ZS5zY3JvbGxPZmZzZXQgPT09IHNjcm9sbE9mZnNldCkge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzY3JvbGxEaXJlY3Rpb246IHByZXZTdGF0ZS5zY3JvbGxPZmZzZXQgPCBzY3JvbGxPZmZzZXQgPyAnZm9yd2FyZCcgOiAnYmFja3dhcmQnLFxuICAgICAgICAgIHNjcm9sbE9mZnNldDogc2Nyb2xsT2Zmc2V0LFxuICAgICAgICAgIHNjcm9sbFVwZGF0ZVdhc1JlcXVlc3RlZDogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgfSwgdGhpcy5fcmVzZXRJc1Njcm9sbGluZ0RlYm91bmNlZCk7XG4gICAgfTtcblxuICAgIF9wcm90by5zY3JvbGxUb0l0ZW0gPSBmdW5jdGlvbiBzY3JvbGxUb0l0ZW0oaW5kZXgsIGFsaWduKSB7XG4gICAgICBpZiAoYWxpZ24gPT09IHZvaWQgMCkge1xuICAgICAgICBhbGlnbiA9ICdhdXRvJztcbiAgICAgIH1cblxuICAgICAgdmFyIGl0ZW1Db3VudCA9IHRoaXMucHJvcHMuaXRlbUNvdW50O1xuICAgICAgdmFyIHNjcm9sbE9mZnNldCA9IHRoaXMuc3RhdGUuc2Nyb2xsT2Zmc2V0O1xuICAgICAgaW5kZXggPSBNYXRoLm1heCgwLCBNYXRoLm1pbihpbmRleCwgaXRlbUNvdW50IC0gMSkpO1xuICAgICAgdGhpcy5zY3JvbGxUbyhnZXRPZmZzZXRGb3JJbmRleEFuZEFsaWdubWVudCh0aGlzLnByb3BzLCBpbmRleCwgYWxpZ24sIHNjcm9sbE9mZnNldCwgdGhpcy5faW5zdGFuY2VQcm9wcykpO1xuICAgIH07XG5cbiAgICBfcHJvdG8uY29tcG9uZW50RGlkTW91bnQgPSBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgIHZhciBfdGhpcyRwcm9wczIgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGRpcmVjdGlvbiA9IF90aGlzJHByb3BzMi5kaXJlY3Rpb24sXG4gICAgICAgICAgaW5pdGlhbFNjcm9sbE9mZnNldCA9IF90aGlzJHByb3BzMi5pbml0aWFsU2Nyb2xsT2Zmc2V0LFxuICAgICAgICAgIGxheW91dCA9IF90aGlzJHByb3BzMi5sYXlvdXQ7XG5cbiAgICAgIGlmICh0eXBlb2YgaW5pdGlhbFNjcm9sbE9mZnNldCA9PT0gJ251bWJlcicgJiYgdGhpcy5fb3V0ZXJSZWYgIT0gbnVsbCkge1xuICAgICAgICB2YXIgb3V0ZXJSZWYgPSB0aGlzLl9vdXRlclJlZjsgLy8gVE9ETyBEZXByZWNhdGUgZGlyZWN0aW9uIFwiaG9yaXpvbnRhbFwiXG5cbiAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnIHx8IGxheW91dCA9PT0gJ2hvcml6b250YWwnKSB7XG4gICAgICAgICAgb3V0ZXJSZWYuc2Nyb2xsTGVmdCA9IGluaXRpYWxTY3JvbGxPZmZzZXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb3V0ZXJSZWYuc2Nyb2xsVG9wID0gaW5pdGlhbFNjcm9sbE9mZnNldDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLl9jYWxsUHJvcHNDYWxsYmFja3MoKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLmNvbXBvbmVudERpZFVwZGF0ZSA9IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcbiAgICAgIHZhciBfdGhpcyRwcm9wczMgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGRpcmVjdGlvbiA9IF90aGlzJHByb3BzMy5kaXJlY3Rpb24sXG4gICAgICAgICAgbGF5b3V0ID0gX3RoaXMkcHJvcHMzLmxheW91dDtcbiAgICAgIHZhciBfdGhpcyRzdGF0ZSA9IHRoaXMuc3RhdGUsXG4gICAgICAgICAgc2Nyb2xsT2Zmc2V0ID0gX3RoaXMkc3RhdGUuc2Nyb2xsT2Zmc2V0LFxuICAgICAgICAgIHNjcm9sbFVwZGF0ZVdhc1JlcXVlc3RlZCA9IF90aGlzJHN0YXRlLnNjcm9sbFVwZGF0ZVdhc1JlcXVlc3RlZDtcblxuICAgICAgaWYgKHNjcm9sbFVwZGF0ZVdhc1JlcXVlc3RlZCAmJiB0aGlzLl9vdXRlclJlZiAhPSBudWxsKSB7XG4gICAgICAgIHZhciBvdXRlclJlZiA9IHRoaXMuX291dGVyUmVmOyAvLyBUT0RPIERlcHJlY2F0ZSBkaXJlY3Rpb24gXCJob3Jpem9udGFsXCJcblxuICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAnaG9yaXpvbnRhbCcgfHwgbGF5b3V0ID09PSAnaG9yaXpvbnRhbCcpIHtcbiAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAncnRsJykge1xuICAgICAgICAgICAgLy8gVFJJQ0tZIEFjY29yZGluZyB0byB0aGUgc3BlYywgc2Nyb2xsTGVmdCBzaG91bGQgYmUgbmVnYXRpdmUgZm9yIFJUTCBhbGlnbmVkIGVsZW1lbnRzLlxuICAgICAgICAgICAgLy8gVGhpcyBpcyBub3QgdGhlIGNhc2UgZm9yIGFsbCBicm93c2VycyB0aG91Z2ggKGUuZy4gQ2hyb21lIHJlcG9ydHMgdmFsdWVzIGFzIHBvc2l0aXZlLCBtZWFzdXJlZCByZWxhdGl2ZSB0byB0aGUgbGVmdCkuXG4gICAgICAgICAgICAvLyBTbyB3ZSBuZWVkIHRvIGRldGVybWluZSB3aGljaCBicm93c2VyIGJlaGF2aW9yIHdlJ3JlIGRlYWxpbmcgd2l0aCwgYW5kIG1pbWljIGl0LlxuICAgICAgICAgICAgc3dpdGNoIChnZXRSVExPZmZzZXRUeXBlKCkpIHtcbiAgICAgICAgICAgICAgY2FzZSAnbmVnYXRpdmUnOlxuICAgICAgICAgICAgICAgIG91dGVyUmVmLnNjcm9sbExlZnQgPSAtc2Nyb2xsT2Zmc2V0O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgJ3Bvc2l0aXZlLWFzY2VuZGluZyc6XG4gICAgICAgICAgICAgICAgb3V0ZXJSZWYuc2Nyb2xsTGVmdCA9IHNjcm9sbE9mZnNldDtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHZhciBjbGllbnRXaWR0aCA9IG91dGVyUmVmLmNsaWVudFdpZHRoLFxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxXaWR0aCA9IG91dGVyUmVmLnNjcm9sbFdpZHRoO1xuICAgICAgICAgICAgICAgIG91dGVyUmVmLnNjcm9sbExlZnQgPSBzY3JvbGxXaWR0aCAtIGNsaWVudFdpZHRoIC0gc2Nyb2xsT2Zmc2V0O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvdXRlclJlZi5zY3JvbGxMZWZ0ID0gc2Nyb2xsT2Zmc2V0O1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvdXRlclJlZi5zY3JvbGxUb3AgPSBzY3JvbGxPZmZzZXQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5fY2FsbFByb3BzQ2FsbGJhY2tzKCk7XG4gICAgfTtcblxuICAgIF9wcm90by5jb21wb25lbnRXaWxsVW5tb3VudCA9IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgaWYgKHRoaXMuX3Jlc2V0SXNTY3JvbGxpbmdUaW1lb3V0SWQgIT09IG51bGwpIHtcbiAgICAgICAgY2FuY2VsVGltZW91dCh0aGlzLl9yZXNldElzU2Nyb2xsaW5nVGltZW91dElkKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3Byb3RvLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBfdGhpcyRwcm9wczQgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGNoaWxkcmVuID0gX3RoaXMkcHJvcHM0LmNoaWxkcmVuLFxuICAgICAgICAgIGNsYXNzTmFtZSA9IF90aGlzJHByb3BzNC5jbGFzc05hbWUsXG4gICAgICAgICAgZGlyZWN0aW9uID0gX3RoaXMkcHJvcHM0LmRpcmVjdGlvbixcbiAgICAgICAgICBoZWlnaHQgPSBfdGhpcyRwcm9wczQuaGVpZ2h0LFxuICAgICAgICAgIGlubmVyUmVmID0gX3RoaXMkcHJvcHM0LmlubmVyUmVmLFxuICAgICAgICAgIGlubmVyRWxlbWVudFR5cGUgPSBfdGhpcyRwcm9wczQuaW5uZXJFbGVtZW50VHlwZSxcbiAgICAgICAgICBpbm5lclRhZ05hbWUgPSBfdGhpcyRwcm9wczQuaW5uZXJUYWdOYW1lLFxuICAgICAgICAgIGl0ZW1Db3VudCA9IF90aGlzJHByb3BzNC5pdGVtQ291bnQsXG4gICAgICAgICAgaXRlbURhdGEgPSBfdGhpcyRwcm9wczQuaXRlbURhdGEsXG4gICAgICAgICAgX3RoaXMkcHJvcHM0JGl0ZW1LZXkgPSBfdGhpcyRwcm9wczQuaXRlbUtleSxcbiAgICAgICAgICBpdGVtS2V5ID0gX3RoaXMkcHJvcHM0JGl0ZW1LZXkgPT09IHZvaWQgMCA/IGRlZmF1bHRJdGVtS2V5JDEgOiBfdGhpcyRwcm9wczQkaXRlbUtleSxcbiAgICAgICAgICBsYXlvdXQgPSBfdGhpcyRwcm9wczQubGF5b3V0LFxuICAgICAgICAgIG91dGVyRWxlbWVudFR5cGUgPSBfdGhpcyRwcm9wczQub3V0ZXJFbGVtZW50VHlwZSxcbiAgICAgICAgICBvdXRlclRhZ05hbWUgPSBfdGhpcyRwcm9wczQub3V0ZXJUYWdOYW1lLFxuICAgICAgICAgIHN0eWxlID0gX3RoaXMkcHJvcHM0LnN0eWxlLFxuICAgICAgICAgIHVzZUlzU2Nyb2xsaW5nID0gX3RoaXMkcHJvcHM0LnVzZUlzU2Nyb2xsaW5nLFxuICAgICAgICAgIHdpZHRoID0gX3RoaXMkcHJvcHM0LndpZHRoO1xuICAgICAgdmFyIGlzU2Nyb2xsaW5nID0gdGhpcy5zdGF0ZS5pc1Njcm9sbGluZzsgLy8gVE9ETyBEZXByZWNhdGUgZGlyZWN0aW9uIFwiaG9yaXpvbnRhbFwiXG5cbiAgICAgIHZhciBpc0hvcml6b250YWwgPSBkaXJlY3Rpb24gPT09ICdob3Jpem9udGFsJyB8fCBsYXlvdXQgPT09ICdob3Jpem9udGFsJztcbiAgICAgIHZhciBvblNjcm9sbCA9IGlzSG9yaXpvbnRhbCA/IHRoaXMuX29uU2Nyb2xsSG9yaXpvbnRhbCA6IHRoaXMuX29uU2Nyb2xsVmVydGljYWw7XG5cbiAgICAgIHZhciBfdGhpcyRfZ2V0UmFuZ2VUb1JlbmQgPSB0aGlzLl9nZXRSYW5nZVRvUmVuZGVyKCksXG4gICAgICAgICAgc3RhcnRJbmRleCA9IF90aGlzJF9nZXRSYW5nZVRvUmVuZFswXSxcbiAgICAgICAgICBzdG9wSW5kZXggPSBfdGhpcyRfZ2V0UmFuZ2VUb1JlbmRbMV07XG5cbiAgICAgIHZhciBpdGVtcyA9IFtdO1xuXG4gICAgICBpZiAoaXRlbUNvdW50ID4gMCkge1xuICAgICAgICBmb3IgKHZhciBfaW5kZXggPSBzdGFydEluZGV4OyBfaW5kZXggPD0gc3RvcEluZGV4OyBfaW5kZXgrKykge1xuICAgICAgICAgIGl0ZW1zLnB1c2goY3JlYXRlRWxlbWVudChjaGlsZHJlbiwge1xuICAgICAgICAgICAgZGF0YTogaXRlbURhdGEsXG4gICAgICAgICAgICBrZXk6IGl0ZW1LZXkoX2luZGV4LCBpdGVtRGF0YSksXG4gICAgICAgICAgICBpbmRleDogX2luZGV4LFxuICAgICAgICAgICAgaXNTY3JvbGxpbmc6IHVzZUlzU2Nyb2xsaW5nID8gaXNTY3JvbGxpbmcgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBzdHlsZTogdGhpcy5fZ2V0SXRlbVN0eWxlKF9pbmRleClcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgIH0gLy8gUmVhZCB0aGlzIHZhbHVlIEFGVEVSIGl0ZW1zIGhhdmUgYmVlbiBjcmVhdGVkLFxuICAgICAgLy8gU28gdGhlaXIgYWN0dWFsIHNpemVzIChpZiB2YXJpYWJsZSkgYXJlIHRha2VuIGludG8gY29uc2lkZXJhdGlvbi5cblxuXG4gICAgICB2YXIgZXN0aW1hdGVkVG90YWxTaXplID0gZ2V0RXN0aW1hdGVkVG90YWxTaXplKHRoaXMucHJvcHMsIHRoaXMuX2luc3RhbmNlUHJvcHMpO1xuICAgICAgcmV0dXJuIGNyZWF0ZUVsZW1lbnQob3V0ZXJFbGVtZW50VHlwZSB8fCBvdXRlclRhZ05hbWUgfHwgJ2RpdicsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUsXG4gICAgICAgIG9uU2Nyb2xsOiBvblNjcm9sbCxcbiAgICAgICAgcmVmOiB0aGlzLl9vdXRlclJlZlNldHRlcixcbiAgICAgICAgc3R5bGU6IF9leHRlbmRzKHtcbiAgICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgICAgICBoZWlnaHQ6IGhlaWdodCxcbiAgICAgICAgICB3aWR0aDogd2lkdGgsXG4gICAgICAgICAgb3ZlcmZsb3c6ICdhdXRvJyxcbiAgICAgICAgICBXZWJraXRPdmVyZmxvd1Njcm9sbGluZzogJ3RvdWNoJyxcbiAgICAgICAgICB3aWxsQ2hhbmdlOiAndHJhbnNmb3JtJyxcbiAgICAgICAgICBkaXJlY3Rpb246IGRpcmVjdGlvblxuICAgICAgICB9LCBzdHlsZSlcbiAgICAgIH0sIGNyZWF0ZUVsZW1lbnQoaW5uZXJFbGVtZW50VHlwZSB8fCBpbm5lclRhZ05hbWUgfHwgJ2RpdicsIHtcbiAgICAgICAgY2hpbGRyZW46IGl0ZW1zLFxuICAgICAgICByZWY6IGlubmVyUmVmLFxuICAgICAgICBzdHlsZToge1xuICAgICAgICAgIGhlaWdodDogaXNIb3Jpem9udGFsID8gJzEwMCUnIDogZXN0aW1hdGVkVG90YWxTaXplLFxuICAgICAgICAgIHBvaW50ZXJFdmVudHM6IGlzU2Nyb2xsaW5nID8gJ25vbmUnIDogdW5kZWZpbmVkLFxuICAgICAgICAgIHdpZHRoOiBpc0hvcml6b250YWwgPyBlc3RpbWF0ZWRUb3RhbFNpemUgOiAnMTAwJSdcbiAgICAgICAgfVxuICAgICAgfSkpO1xuICAgIH07XG5cbiAgICBfcHJvdG8uX2NhbGxQcm9wc0NhbGxiYWNrcyA9IGZ1bmN0aW9uIF9jYWxsUHJvcHNDYWxsYmFja3MoKSB7XG4gICAgICBpZiAodHlwZW9mIHRoaXMucHJvcHMub25JdGVtc1JlbmRlcmVkID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHZhciBpdGVtQ291bnQgPSB0aGlzLnByb3BzLml0ZW1Db3VudDtcblxuICAgICAgICBpZiAoaXRlbUNvdW50ID4gMCkge1xuICAgICAgICAgIHZhciBfdGhpcyRfZ2V0UmFuZ2VUb1JlbmQyID0gdGhpcy5fZ2V0UmFuZ2VUb1JlbmRlcigpLFxuICAgICAgICAgICAgICBfb3ZlcnNjYW5TdGFydEluZGV4ID0gX3RoaXMkX2dldFJhbmdlVG9SZW5kMlswXSxcbiAgICAgICAgICAgICAgX292ZXJzY2FuU3RvcEluZGV4ID0gX3RoaXMkX2dldFJhbmdlVG9SZW5kMlsxXSxcbiAgICAgICAgICAgICAgX3Zpc2libGVTdGFydEluZGV4ID0gX3RoaXMkX2dldFJhbmdlVG9SZW5kMlsyXSxcbiAgICAgICAgICAgICAgX3Zpc2libGVTdG9wSW5kZXggPSBfdGhpcyRfZ2V0UmFuZ2VUb1JlbmQyWzNdO1xuXG4gICAgICAgICAgdGhpcy5fY2FsbE9uSXRlbXNSZW5kZXJlZChfb3ZlcnNjYW5TdGFydEluZGV4LCBfb3ZlcnNjYW5TdG9wSW5kZXgsIF92aXNpYmxlU3RhcnRJbmRleCwgX3Zpc2libGVTdG9wSW5kZXgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgdGhpcy5wcm9wcy5vblNjcm9sbCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB2YXIgX3RoaXMkc3RhdGUyID0gdGhpcy5zdGF0ZSxcbiAgICAgICAgICAgIF9zY3JvbGxEaXJlY3Rpb24gPSBfdGhpcyRzdGF0ZTIuc2Nyb2xsRGlyZWN0aW9uLFxuICAgICAgICAgICAgX3Njcm9sbE9mZnNldCA9IF90aGlzJHN0YXRlMi5zY3JvbGxPZmZzZXQsXG4gICAgICAgICAgICBfc2Nyb2xsVXBkYXRlV2FzUmVxdWVzdGVkID0gX3RoaXMkc3RhdGUyLnNjcm9sbFVwZGF0ZVdhc1JlcXVlc3RlZDtcblxuICAgICAgICB0aGlzLl9jYWxsT25TY3JvbGwoX3Njcm9sbERpcmVjdGlvbiwgX3Njcm9sbE9mZnNldCwgX3Njcm9sbFVwZGF0ZVdhc1JlcXVlc3RlZCk7XG4gICAgICB9XG4gICAgfSAvLyBMYXppbHkgY3JlYXRlIGFuZCBjYWNoZSBpdGVtIHN0eWxlcyB3aGlsZSBzY3JvbGxpbmcsXG4gICAgLy8gU28gdGhhdCBwdXJlIGNvbXBvbmVudCBzQ1Ugd2lsbCBwcmV2ZW50IHJlLXJlbmRlcnMuXG4gICAgLy8gV2UgbWFpbnRhaW4gdGhpcyBjYWNoZSwgYW5kIHBhc3MgYSBzdHlsZSBwcm9wIHJhdGhlciB0aGFuIGluZGV4LFxuICAgIC8vIFNvIHRoYXQgTGlzdCBjYW4gY2xlYXIgY2FjaGVkIHN0eWxlcyBhbmQgZm9yY2UgaXRlbSByZS1yZW5kZXIgaWYgbmVjZXNzYXJ5LlxuICAgIDtcblxuICAgIF9wcm90by5fZ2V0UmFuZ2VUb1JlbmRlciA9IGZ1bmN0aW9uIF9nZXRSYW5nZVRvUmVuZGVyKCkge1xuICAgICAgdmFyIF90aGlzJHByb3BzNSA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgaXRlbUNvdW50ID0gX3RoaXMkcHJvcHM1Lml0ZW1Db3VudCxcbiAgICAgICAgICBvdmVyc2NhbkNvdW50ID0gX3RoaXMkcHJvcHM1Lm92ZXJzY2FuQ291bnQ7XG4gICAgICB2YXIgX3RoaXMkc3RhdGUzID0gdGhpcy5zdGF0ZSxcbiAgICAgICAgICBpc1Njcm9sbGluZyA9IF90aGlzJHN0YXRlMy5pc1Njcm9sbGluZyxcbiAgICAgICAgICBzY3JvbGxEaXJlY3Rpb24gPSBfdGhpcyRzdGF0ZTMuc2Nyb2xsRGlyZWN0aW9uLFxuICAgICAgICAgIHNjcm9sbE9mZnNldCA9IF90aGlzJHN0YXRlMy5zY3JvbGxPZmZzZXQ7XG5cbiAgICAgIGlmIChpdGVtQ291bnQgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIFswLCAwLCAwLCAwXTtcbiAgICAgIH1cblxuICAgICAgdmFyIHN0YXJ0SW5kZXggPSBnZXRTdGFydEluZGV4Rm9yT2Zmc2V0KHRoaXMucHJvcHMsIHNjcm9sbE9mZnNldCwgdGhpcy5faW5zdGFuY2VQcm9wcyk7XG4gICAgICB2YXIgc3RvcEluZGV4ID0gZ2V0U3RvcEluZGV4Rm9yU3RhcnRJbmRleCh0aGlzLnByb3BzLCBzdGFydEluZGV4LCBzY3JvbGxPZmZzZXQsIHRoaXMuX2luc3RhbmNlUHJvcHMpOyAvLyBPdmVyc2NhbiBieSBvbmUgaXRlbSBpbiBlYWNoIGRpcmVjdGlvbiBzbyB0aGF0IHRhYi9mb2N1cyB3b3Jrcy5cbiAgICAgIC8vIElmIHRoZXJlIGlzbid0IGF0IGxlYXN0IG9uZSBleHRyYSBpdGVtLCB0YWIgbG9vcHMgYmFjayBhcm91bmQuXG5cbiAgICAgIHZhciBvdmVyc2NhbkJhY2t3YXJkID0gIWlzU2Nyb2xsaW5nIHx8IHNjcm9sbERpcmVjdGlvbiA9PT0gJ2JhY2t3YXJkJyA/IE1hdGgubWF4KDEsIG92ZXJzY2FuQ291bnQpIDogMTtcbiAgICAgIHZhciBvdmVyc2NhbkZvcndhcmQgPSAhaXNTY3JvbGxpbmcgfHwgc2Nyb2xsRGlyZWN0aW9uID09PSAnZm9yd2FyZCcgPyBNYXRoLm1heCgxLCBvdmVyc2NhbkNvdW50KSA6IDE7XG4gICAgICByZXR1cm4gW01hdGgubWF4KDAsIHN0YXJ0SW5kZXggLSBvdmVyc2NhbkJhY2t3YXJkKSwgTWF0aC5tYXgoMCwgTWF0aC5taW4oaXRlbUNvdW50IC0gMSwgc3RvcEluZGV4ICsgb3ZlcnNjYW5Gb3J3YXJkKSksIHN0YXJ0SW5kZXgsIHN0b3BJbmRleF07XG4gICAgfTtcblxuICAgIHJldHVybiBMaXN0O1xuICB9KFB1cmVDb21wb25lbnQpLCBfY2xhc3MuZGVmYXVsdFByb3BzID0ge1xuICAgIGRpcmVjdGlvbjogJ2x0cicsXG4gICAgaXRlbURhdGE6IHVuZGVmaW5lZCxcbiAgICBsYXlvdXQ6ICd2ZXJ0aWNhbCcsXG4gICAgb3ZlcnNjYW5Db3VudDogMixcbiAgICB1c2VJc1Njcm9sbGluZzogZmFsc2VcbiAgfSwgX2NsYXNzO1xufSAvLyBOT1RFOiBJIGNvbnNpZGVyZWQgZnVydGhlciB3cmFwcGluZyBpbmRpdmlkdWFsIGl0ZW1zIHdpdGggYSBwdXJlIExpc3RJdGVtIGNvbXBvbmVudC5cbi8vIFRoaXMgd291bGQgYXZvaWQgZXZlciBjYWxsaW5nIHRoZSByZW5kZXIgZnVuY3Rpb24gZm9yIHRoZSBzYW1lIGluZGV4IG1vcmUgdGhhbiBvbmNlLFxuLy8gQnV0IGl0IHdvdWxkIGFsc28gYWRkIHRoZSBvdmVyaGVhZCBvZiBhIGxvdCBvZiBjb21wb25lbnRzL2ZpYmVycy5cbi8vIEkgYXNzdW1lIHBlb3BsZSBhbHJlYWR5IGRvIHRoaXMgKHJlbmRlciBmdW5jdGlvbiByZXR1cm5pbmcgYSBjbGFzcyBjb21wb25lbnQpLFxuLy8gU28gbXkgZG9pbmcgaXQgd291bGQganVzdCB1bm5lY2Vzc2FyaWx5IGRvdWJsZSB0aGUgd3JhcHBlcnMuXG5cbnZhciB2YWxpZGF0ZVNoYXJlZFByb3BzJDEgPSBmdW5jdGlvbiB2YWxpZGF0ZVNoYXJlZFByb3BzKF9yZWYyLCBfcmVmMykge1xuICB2YXIgY2hpbGRyZW4gPSBfcmVmMi5jaGlsZHJlbixcbiAgICAgIGRpcmVjdGlvbiA9IF9yZWYyLmRpcmVjdGlvbixcbiAgICAgIGhlaWdodCA9IF9yZWYyLmhlaWdodCxcbiAgICAgIGxheW91dCA9IF9yZWYyLmxheW91dCxcbiAgICAgIGlubmVyVGFnTmFtZSA9IF9yZWYyLmlubmVyVGFnTmFtZSxcbiAgICAgIG91dGVyVGFnTmFtZSA9IF9yZWYyLm91dGVyVGFnTmFtZSxcbiAgICAgIHdpZHRoID0gX3JlZjIud2lkdGg7XG4gIHZhciBpbnN0YW5jZSA9IF9yZWYzLmluc3RhbmNlO1xuXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgaWYgKGlubmVyVGFnTmFtZSAhPSBudWxsIHx8IG91dGVyVGFnTmFtZSAhPSBudWxsKSB7XG4gICAgICBpZiAoZGV2V2FybmluZ3NUYWdOYW1lJDEgJiYgIWRldldhcm5pbmdzVGFnTmFtZSQxLmhhcyhpbnN0YW5jZSkpIHtcbiAgICAgICAgZGV2V2FybmluZ3NUYWdOYW1lJDEuYWRkKGluc3RhbmNlKTtcbiAgICAgICAgY29uc29sZS53YXJuKCdUaGUgaW5uZXJUYWdOYW1lIGFuZCBvdXRlclRhZ05hbWUgcHJvcHMgaGF2ZSBiZWVuIGRlcHJlY2F0ZWQuICcgKyAnUGxlYXNlIHVzZSB0aGUgaW5uZXJFbGVtZW50VHlwZSBhbmQgb3V0ZXJFbGVtZW50VHlwZSBwcm9wcyBpbnN0ZWFkLicpO1xuICAgICAgfVxuICAgIH0gLy8gVE9ETyBEZXByZWNhdGUgZGlyZWN0aW9uIFwiaG9yaXpvbnRhbFwiXG5cblxuICAgIHZhciBpc0hvcml6b250YWwgPSBkaXJlY3Rpb24gPT09ICdob3Jpem9udGFsJyB8fCBsYXlvdXQgPT09ICdob3Jpem9udGFsJztcblxuICAgIHN3aXRjaCAoZGlyZWN0aW9uKSB7XG4gICAgICBjYXNlICdob3Jpem9udGFsJzpcbiAgICAgIGNhc2UgJ3ZlcnRpY2FsJzpcbiAgICAgICAgaWYgKGRldldhcm5pbmdzRGlyZWN0aW9uICYmICFkZXZXYXJuaW5nc0RpcmVjdGlvbi5oYXMoaW5zdGFuY2UpKSB7XG4gICAgICAgICAgZGV2V2FybmluZ3NEaXJlY3Rpb24uYWRkKGluc3RhbmNlKTtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ1RoZSBkaXJlY3Rpb24gcHJvcCBzaG91bGQgYmUgZWl0aGVyIFwibHRyXCIgKGRlZmF1bHQpIG9yIFwicnRsXCIuICcgKyAnUGxlYXNlIHVzZSB0aGUgbGF5b3V0IHByb3AgdG8gc3BlY2lmeSBcInZlcnRpY2FsXCIgKGRlZmF1bHQpIG9yIFwiaG9yaXpvbnRhbFwiIG9yaWVudGF0aW9uLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2x0cic6XG4gICAgICBjYXNlICdydGwnOlxuICAgICAgICAvLyBWYWxpZCB2YWx1ZXNcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IEVycm9yKCdBbiBpbnZhbGlkIFwiZGlyZWN0aW9uXCIgcHJvcCBoYXMgYmVlbiBzcGVjaWZpZWQuICcgKyAnVmFsdWUgc2hvdWxkIGJlIGVpdGhlciBcImx0clwiIG9yIFwicnRsXCIuICcgKyAoXCJcXFwiXCIgKyBkaXJlY3Rpb24gKyBcIlxcXCIgd2FzIHNwZWNpZmllZC5cIikpO1xuICAgIH1cblxuICAgIHN3aXRjaCAobGF5b3V0KSB7XG4gICAgICBjYXNlICdob3Jpem9udGFsJzpcbiAgICAgIGNhc2UgJ3ZlcnRpY2FsJzpcbiAgICAgICAgLy8gVmFsaWQgdmFsdWVzXG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBFcnJvcignQW4gaW52YWxpZCBcImxheW91dFwiIHByb3AgaGFzIGJlZW4gc3BlY2lmaWVkLiAnICsgJ1ZhbHVlIHNob3VsZCBiZSBlaXRoZXIgXCJob3Jpem9udGFsXCIgb3IgXCJ2ZXJ0aWNhbFwiLiAnICsgKFwiXFxcIlwiICsgbGF5b3V0ICsgXCJcXFwiIHdhcyBzcGVjaWZpZWQuXCIpKTtcbiAgICB9XG5cbiAgICBpZiAoY2hpbGRyZW4gPT0gbnVsbCkge1xuICAgICAgdGhyb3cgRXJyb3IoJ0FuIGludmFsaWQgXCJjaGlsZHJlblwiIHByb3AgaGFzIGJlZW4gc3BlY2lmaWVkLiAnICsgJ1ZhbHVlIHNob3VsZCBiZSBhIFJlYWN0IGNvbXBvbmVudC4gJyArIChcIlxcXCJcIiArIChjaGlsZHJlbiA9PT0gbnVsbCA/ICdudWxsJyA6IHR5cGVvZiBjaGlsZHJlbikgKyBcIlxcXCIgd2FzIHNwZWNpZmllZC5cIikpO1xuICAgIH1cblxuICAgIGlmIChpc0hvcml6b250YWwgJiYgdHlwZW9mIHdpZHRoICE9PSAnbnVtYmVyJykge1xuICAgICAgdGhyb3cgRXJyb3IoJ0FuIGludmFsaWQgXCJ3aWR0aFwiIHByb3AgaGFzIGJlZW4gc3BlY2lmaWVkLiAnICsgJ0hvcml6b250YWwgbGlzdHMgbXVzdCBzcGVjaWZ5IGEgbnVtYmVyIGZvciB3aWR0aC4gJyArIChcIlxcXCJcIiArICh3aWR0aCA9PT0gbnVsbCA/ICdudWxsJyA6IHR5cGVvZiB3aWR0aCkgKyBcIlxcXCIgd2FzIHNwZWNpZmllZC5cIikpO1xuICAgIH0gZWxzZSBpZiAoIWlzSG9yaXpvbnRhbCAmJiB0eXBlb2YgaGVpZ2h0ICE9PSAnbnVtYmVyJykge1xuICAgICAgdGhyb3cgRXJyb3IoJ0FuIGludmFsaWQgXCJoZWlnaHRcIiBwcm9wIGhhcyBiZWVuIHNwZWNpZmllZC4gJyArICdWZXJ0aWNhbCBsaXN0cyBtdXN0IHNwZWNpZnkgYSBudW1iZXIgZm9yIGhlaWdodC4gJyArIChcIlxcXCJcIiArIChoZWlnaHQgPT09IG51bGwgPyAnbnVsbCcgOiB0eXBlb2YgaGVpZ2h0KSArIFwiXFxcIiB3YXMgc3BlY2lmaWVkLlwiKSk7XG4gICAgfVxuICB9XG59O1xuXG52YXIgREVGQVVMVF9FU1RJTUFURURfSVRFTV9TSVpFJDEgPSA1MDtcblxudmFyIGdldEl0ZW1NZXRhZGF0YSQxID0gZnVuY3Rpb24gZ2V0SXRlbU1ldGFkYXRhKHByb3BzLCBpbmRleCwgaW5zdGFuY2VQcm9wcykge1xuICB2YXIgX3JlZiA9IHByb3BzLFxuICAgICAgaXRlbVNpemUgPSBfcmVmLml0ZW1TaXplO1xuICB2YXIgaXRlbU1ldGFkYXRhTWFwID0gaW5zdGFuY2VQcm9wcy5pdGVtTWV0YWRhdGFNYXAsXG4gICAgICBsYXN0TWVhc3VyZWRJbmRleCA9IGluc3RhbmNlUHJvcHMubGFzdE1lYXN1cmVkSW5kZXg7XG5cbiAgaWYgKGluZGV4ID4gbGFzdE1lYXN1cmVkSW5kZXgpIHtcbiAgICB2YXIgb2Zmc2V0ID0gMDtcblxuICAgIGlmIChsYXN0TWVhc3VyZWRJbmRleCA+PSAwKSB7XG4gICAgICB2YXIgaXRlbU1ldGFkYXRhID0gaXRlbU1ldGFkYXRhTWFwW2xhc3RNZWFzdXJlZEluZGV4XTtcbiAgICAgIG9mZnNldCA9IGl0ZW1NZXRhZGF0YS5vZmZzZXQgKyBpdGVtTWV0YWRhdGEuc2l6ZTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gbGFzdE1lYXN1cmVkSW5kZXggKyAxOyBpIDw9IGluZGV4OyBpKyspIHtcbiAgICAgIHZhciBzaXplID0gaXRlbVNpemUoaSk7XG4gICAgICBpdGVtTWV0YWRhdGFNYXBbaV0gPSB7XG4gICAgICAgIG9mZnNldDogb2Zmc2V0LFxuICAgICAgICBzaXplOiBzaXplXG4gICAgICB9O1xuICAgICAgb2Zmc2V0ICs9IHNpemU7XG4gICAgfVxuXG4gICAgaW5zdGFuY2VQcm9wcy5sYXN0TWVhc3VyZWRJbmRleCA9IGluZGV4O1xuICB9XG5cbiAgcmV0dXJuIGl0ZW1NZXRhZGF0YU1hcFtpbmRleF07XG59O1xuXG52YXIgZmluZE5lYXJlc3RJdGVtJDEgPSBmdW5jdGlvbiBmaW5kTmVhcmVzdEl0ZW0ocHJvcHMsIGluc3RhbmNlUHJvcHMsIG9mZnNldCkge1xuICB2YXIgaXRlbU1ldGFkYXRhTWFwID0gaW5zdGFuY2VQcm9wcy5pdGVtTWV0YWRhdGFNYXAsXG4gICAgICBsYXN0TWVhc3VyZWRJbmRleCA9IGluc3RhbmNlUHJvcHMubGFzdE1lYXN1cmVkSW5kZXg7XG4gIHZhciBsYXN0TWVhc3VyZWRJdGVtT2Zmc2V0ID0gbGFzdE1lYXN1cmVkSW5kZXggPiAwID8gaXRlbU1ldGFkYXRhTWFwW2xhc3RNZWFzdXJlZEluZGV4XS5vZmZzZXQgOiAwO1xuXG4gIGlmIChsYXN0TWVhc3VyZWRJdGVtT2Zmc2V0ID49IG9mZnNldCkge1xuICAgIC8vIElmIHdlJ3ZlIGFscmVhZHkgbWVhc3VyZWQgaXRlbXMgd2l0aGluIHRoaXMgcmFuZ2UganVzdCB1c2UgYSBiaW5hcnkgc2VhcmNoIGFzIGl0J3MgZmFzdGVyLlxuICAgIHJldHVybiBmaW5kTmVhcmVzdEl0ZW1CaW5hcnlTZWFyY2gkMShwcm9wcywgaW5zdGFuY2VQcm9wcywgbGFzdE1lYXN1cmVkSW5kZXgsIDAsIG9mZnNldCk7XG4gIH0gZWxzZSB7XG4gICAgLy8gSWYgd2UgaGF2ZW4ndCB5ZXQgbWVhc3VyZWQgdGhpcyBoaWdoLCBmYWxsYmFjayB0byBhbiBleHBvbmVudGlhbCBzZWFyY2ggd2l0aCBhbiBpbm5lciBiaW5hcnkgc2VhcmNoLlxuICAgIC8vIFRoZSBleHBvbmVudGlhbCBzZWFyY2ggYXZvaWRzIHByZS1jb21wdXRpbmcgc2l6ZXMgZm9yIHRoZSBmdWxsIHNldCBvZiBpdGVtcyBhcyBhIGJpbmFyeSBzZWFyY2ggd291bGQuXG4gICAgLy8gVGhlIG92ZXJhbGwgY29tcGxleGl0eSBmb3IgdGhpcyBhcHByb2FjaCBpcyBPKGxvZyBuKS5cbiAgICByZXR1cm4gZmluZE5lYXJlc3RJdGVtRXhwb25lbnRpYWxTZWFyY2gkMShwcm9wcywgaW5zdGFuY2VQcm9wcywgTWF0aC5tYXgoMCwgbGFzdE1lYXN1cmVkSW5kZXgpLCBvZmZzZXQpO1xuICB9XG59O1xuXG52YXIgZmluZE5lYXJlc3RJdGVtQmluYXJ5U2VhcmNoJDEgPSBmdW5jdGlvbiBmaW5kTmVhcmVzdEl0ZW1CaW5hcnlTZWFyY2gocHJvcHMsIGluc3RhbmNlUHJvcHMsIGhpZ2gsIGxvdywgb2Zmc2V0KSB7XG4gIHdoaWxlIChsb3cgPD0gaGlnaCkge1xuICAgIHZhciBtaWRkbGUgPSBsb3cgKyBNYXRoLmZsb29yKChoaWdoIC0gbG93KSAvIDIpO1xuICAgIHZhciBjdXJyZW50T2Zmc2V0ID0gZ2V0SXRlbU1ldGFkYXRhJDEocHJvcHMsIG1pZGRsZSwgaW5zdGFuY2VQcm9wcykub2Zmc2V0O1xuXG4gICAgaWYgKGN1cnJlbnRPZmZzZXQgPT09IG9mZnNldCkge1xuICAgICAgcmV0dXJuIG1pZGRsZTtcbiAgICB9IGVsc2UgaWYgKGN1cnJlbnRPZmZzZXQgPCBvZmZzZXQpIHtcbiAgICAgIGxvdyA9IG1pZGRsZSArIDE7XG4gICAgfSBlbHNlIGlmIChjdXJyZW50T2Zmc2V0ID4gb2Zmc2V0KSB7XG4gICAgICBoaWdoID0gbWlkZGxlIC0gMTtcbiAgICB9XG4gIH1cblxuICBpZiAobG93ID4gMCkge1xuICAgIHJldHVybiBsb3cgLSAxO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAwO1xuICB9XG59O1xuXG52YXIgZmluZE5lYXJlc3RJdGVtRXhwb25lbnRpYWxTZWFyY2gkMSA9IGZ1bmN0aW9uIGZpbmROZWFyZXN0SXRlbUV4cG9uZW50aWFsU2VhcmNoKHByb3BzLCBpbnN0YW5jZVByb3BzLCBpbmRleCwgb2Zmc2V0KSB7XG4gIHZhciBpdGVtQ291bnQgPSBwcm9wcy5pdGVtQ291bnQ7XG4gIHZhciBpbnRlcnZhbCA9IDE7XG5cbiAgd2hpbGUgKGluZGV4IDwgaXRlbUNvdW50ICYmIGdldEl0ZW1NZXRhZGF0YSQxKHByb3BzLCBpbmRleCwgaW5zdGFuY2VQcm9wcykub2Zmc2V0IDwgb2Zmc2V0KSB7XG4gICAgaW5kZXggKz0gaW50ZXJ2YWw7XG4gICAgaW50ZXJ2YWwgKj0gMjtcbiAgfVxuXG4gIHJldHVybiBmaW5kTmVhcmVzdEl0ZW1CaW5hcnlTZWFyY2gkMShwcm9wcywgaW5zdGFuY2VQcm9wcywgTWF0aC5taW4oaW5kZXgsIGl0ZW1Db3VudCAtIDEpLCBNYXRoLmZsb29yKGluZGV4IC8gMiksIG9mZnNldCk7XG59O1xuXG52YXIgZ2V0RXN0aW1hdGVkVG90YWxTaXplID0gZnVuY3Rpb24gZ2V0RXN0aW1hdGVkVG90YWxTaXplKF9yZWYyLCBfcmVmMykge1xuICB2YXIgaXRlbUNvdW50ID0gX3JlZjIuaXRlbUNvdW50O1xuICB2YXIgaXRlbU1ldGFkYXRhTWFwID0gX3JlZjMuaXRlbU1ldGFkYXRhTWFwLFxuICAgICAgZXN0aW1hdGVkSXRlbVNpemUgPSBfcmVmMy5lc3RpbWF0ZWRJdGVtU2l6ZSxcbiAgICAgIGxhc3RNZWFzdXJlZEluZGV4ID0gX3JlZjMubGFzdE1lYXN1cmVkSW5kZXg7XG4gIHZhciB0b3RhbFNpemVPZk1lYXN1cmVkSXRlbXMgPSAwOyAvLyBFZGdlIGNhc2UgY2hlY2sgZm9yIHdoZW4gdGhlIG51bWJlciBvZiBpdGVtcyBkZWNyZWFzZXMgd2hpbGUgYSBzY3JvbGwgaXMgaW4gcHJvZ3Jlc3MuXG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9idmF1Z2huL3JlYWN0LXdpbmRvdy9wdWxsLzEzOFxuXG4gIGlmIChsYXN0TWVhc3VyZWRJbmRleCA+PSBpdGVtQ291bnQpIHtcbiAgICBsYXN0TWVhc3VyZWRJbmRleCA9IGl0ZW1Db3VudCAtIDE7XG4gIH1cblxuICBpZiAobGFzdE1lYXN1cmVkSW5kZXggPj0gMCkge1xuICAgIHZhciBpdGVtTWV0YWRhdGEgPSBpdGVtTWV0YWRhdGFNYXBbbGFzdE1lYXN1cmVkSW5kZXhdO1xuICAgIHRvdGFsU2l6ZU9mTWVhc3VyZWRJdGVtcyA9IGl0ZW1NZXRhZGF0YS5vZmZzZXQgKyBpdGVtTWV0YWRhdGEuc2l6ZTtcbiAgfVxuXG4gIHZhciBudW1Vbm1lYXN1cmVkSXRlbXMgPSBpdGVtQ291bnQgLSBsYXN0TWVhc3VyZWRJbmRleCAtIDE7XG4gIHZhciB0b3RhbFNpemVPZlVubWVhc3VyZWRJdGVtcyA9IG51bVVubWVhc3VyZWRJdGVtcyAqIGVzdGltYXRlZEl0ZW1TaXplO1xuICByZXR1cm4gdG90YWxTaXplT2ZNZWFzdXJlZEl0ZW1zICsgdG90YWxTaXplT2ZVbm1lYXN1cmVkSXRlbXM7XG59O1xuXG52YXIgVmFyaWFibGVTaXplTGlzdCA9IC8qI19fUFVSRV9fKi9jcmVhdGVMaXN0Q29tcG9uZW50KHtcbiAgZ2V0SXRlbU9mZnNldDogZnVuY3Rpb24gZ2V0SXRlbU9mZnNldChwcm9wcywgaW5kZXgsIGluc3RhbmNlUHJvcHMpIHtcbiAgICByZXR1cm4gZ2V0SXRlbU1ldGFkYXRhJDEocHJvcHMsIGluZGV4LCBpbnN0YW5jZVByb3BzKS5vZmZzZXQ7XG4gIH0sXG4gIGdldEl0ZW1TaXplOiBmdW5jdGlvbiBnZXRJdGVtU2l6ZShwcm9wcywgaW5kZXgsIGluc3RhbmNlUHJvcHMpIHtcbiAgICByZXR1cm4gaW5zdGFuY2VQcm9wcy5pdGVtTWV0YWRhdGFNYXBbaW5kZXhdLnNpemU7XG4gIH0sXG4gIGdldEVzdGltYXRlZFRvdGFsU2l6ZTogZ2V0RXN0aW1hdGVkVG90YWxTaXplLFxuICBnZXRPZmZzZXRGb3JJbmRleEFuZEFsaWdubWVudDogZnVuY3Rpb24gZ2V0T2Zmc2V0Rm9ySW5kZXhBbmRBbGlnbm1lbnQocHJvcHMsIGluZGV4LCBhbGlnbiwgc2Nyb2xsT2Zmc2V0LCBpbnN0YW5jZVByb3BzKSB7XG4gICAgdmFyIGRpcmVjdGlvbiA9IHByb3BzLmRpcmVjdGlvbixcbiAgICAgICAgaGVpZ2h0ID0gcHJvcHMuaGVpZ2h0LFxuICAgICAgICBsYXlvdXQgPSBwcm9wcy5sYXlvdXQsXG4gICAgICAgIHdpZHRoID0gcHJvcHMud2lkdGg7IC8vIFRPRE8gRGVwcmVjYXRlIGRpcmVjdGlvbiBcImhvcml6b250YWxcIlxuXG4gICAgdmFyIGlzSG9yaXpvbnRhbCA9IGRpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnIHx8IGxheW91dCA9PT0gJ2hvcml6b250YWwnO1xuICAgIHZhciBzaXplID0gaXNIb3Jpem9udGFsID8gd2lkdGggOiBoZWlnaHQ7XG4gICAgdmFyIGl0ZW1NZXRhZGF0YSA9IGdldEl0ZW1NZXRhZGF0YSQxKHByb3BzLCBpbmRleCwgaW5zdGFuY2VQcm9wcyk7IC8vIEdldCBlc3RpbWF0ZWQgdG90YWwgc2l6ZSBhZnRlciBJdGVtTWV0YWRhdGEgaXMgY29tcHV0ZWQsXG4gICAgLy8gVG8gZW5zdXJlIGl0IHJlZmxlY3RzIGFjdHVhbCBtZWFzdXJlbWVudHMgaW5zdGVhZCBvZiBqdXN0IGVzdGltYXRlcy5cblxuICAgIHZhciBlc3RpbWF0ZWRUb3RhbFNpemUgPSBnZXRFc3RpbWF0ZWRUb3RhbFNpemUocHJvcHMsIGluc3RhbmNlUHJvcHMpO1xuICAgIHZhciBtYXhPZmZzZXQgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihlc3RpbWF0ZWRUb3RhbFNpemUgLSBzaXplLCBpdGVtTWV0YWRhdGEub2Zmc2V0KSk7XG4gICAgdmFyIG1pbk9mZnNldCA9IE1hdGgubWF4KDAsIGl0ZW1NZXRhZGF0YS5vZmZzZXQgLSBzaXplICsgaXRlbU1ldGFkYXRhLnNpemUpO1xuXG4gICAgaWYgKGFsaWduID09PSAnc21hcnQnKSB7XG4gICAgICBpZiAoc2Nyb2xsT2Zmc2V0ID49IG1pbk9mZnNldCAtIHNpemUgJiYgc2Nyb2xsT2Zmc2V0IDw9IG1heE9mZnNldCArIHNpemUpIHtcbiAgICAgICAgYWxpZ24gPSAnYXV0byc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhbGlnbiA9ICdjZW50ZXInO1xuICAgICAgfVxuICAgIH1cblxuICAgIHN3aXRjaCAoYWxpZ24pIHtcbiAgICAgIGNhc2UgJ3N0YXJ0JzpcbiAgICAgICAgcmV0dXJuIG1heE9mZnNldDtcblxuICAgICAgY2FzZSAnZW5kJzpcbiAgICAgICAgcmV0dXJuIG1pbk9mZnNldDtcblxuICAgICAgY2FzZSAnY2VudGVyJzpcbiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQobWluT2Zmc2V0ICsgKG1heE9mZnNldCAtIG1pbk9mZnNldCkgLyAyKTtcblxuICAgICAgY2FzZSAnYXV0byc6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAoc2Nyb2xsT2Zmc2V0ID49IG1pbk9mZnNldCAmJiBzY3JvbGxPZmZzZXQgPD0gbWF4T2Zmc2V0KSB7XG4gICAgICAgICAgcmV0dXJuIHNjcm9sbE9mZnNldDtcbiAgICAgICAgfSBlbHNlIGlmIChzY3JvbGxPZmZzZXQgPCBtaW5PZmZzZXQpIHtcbiAgICAgICAgICByZXR1cm4gbWluT2Zmc2V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBtYXhPZmZzZXQ7XG4gICAgICAgIH1cblxuICAgIH1cbiAgfSxcbiAgZ2V0U3RhcnRJbmRleEZvck9mZnNldDogZnVuY3Rpb24gZ2V0U3RhcnRJbmRleEZvck9mZnNldChwcm9wcywgb2Zmc2V0LCBpbnN0YW5jZVByb3BzKSB7XG4gICAgcmV0dXJuIGZpbmROZWFyZXN0SXRlbSQxKHByb3BzLCBpbnN0YW5jZVByb3BzLCBvZmZzZXQpO1xuICB9LFxuICBnZXRTdG9wSW5kZXhGb3JTdGFydEluZGV4OiBmdW5jdGlvbiBnZXRTdG9wSW5kZXhGb3JTdGFydEluZGV4KHByb3BzLCBzdGFydEluZGV4LCBzY3JvbGxPZmZzZXQsIGluc3RhbmNlUHJvcHMpIHtcbiAgICB2YXIgZGlyZWN0aW9uID0gcHJvcHMuZGlyZWN0aW9uLFxuICAgICAgICBoZWlnaHQgPSBwcm9wcy5oZWlnaHQsXG4gICAgICAgIGl0ZW1Db3VudCA9IHByb3BzLml0ZW1Db3VudCxcbiAgICAgICAgbGF5b3V0ID0gcHJvcHMubGF5b3V0LFxuICAgICAgICB3aWR0aCA9IHByb3BzLndpZHRoOyAvLyBUT0RPIERlcHJlY2F0ZSBkaXJlY3Rpb24gXCJob3Jpem9udGFsXCJcblxuICAgIHZhciBpc0hvcml6b250YWwgPSBkaXJlY3Rpb24gPT09ICdob3Jpem9udGFsJyB8fCBsYXlvdXQgPT09ICdob3Jpem9udGFsJztcbiAgICB2YXIgc2l6ZSA9IGlzSG9yaXpvbnRhbCA/IHdpZHRoIDogaGVpZ2h0O1xuICAgIHZhciBpdGVtTWV0YWRhdGEgPSBnZXRJdGVtTWV0YWRhdGEkMShwcm9wcywgc3RhcnRJbmRleCwgaW5zdGFuY2VQcm9wcyk7XG4gICAgdmFyIG1heE9mZnNldCA9IHNjcm9sbE9mZnNldCArIHNpemU7XG4gICAgdmFyIG9mZnNldCA9IGl0ZW1NZXRhZGF0YS5vZmZzZXQgKyBpdGVtTWV0YWRhdGEuc2l6ZTtcbiAgICB2YXIgc3RvcEluZGV4ID0gc3RhcnRJbmRleDtcblxuICAgIHdoaWxlIChzdG9wSW5kZXggPCBpdGVtQ291bnQgLSAxICYmIG9mZnNldCA8IG1heE9mZnNldCkge1xuICAgICAgc3RvcEluZGV4Kys7XG4gICAgICBvZmZzZXQgKz0gZ2V0SXRlbU1ldGFkYXRhJDEocHJvcHMsIHN0b3BJbmRleCwgaW5zdGFuY2VQcm9wcykuc2l6ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3RvcEluZGV4O1xuICB9LFxuICBpbml0SW5zdGFuY2VQcm9wczogZnVuY3Rpb24gaW5pdEluc3RhbmNlUHJvcHMocHJvcHMsIGluc3RhbmNlKSB7XG4gICAgdmFyIF9yZWY0ID0gcHJvcHMsXG4gICAgICAgIGVzdGltYXRlZEl0ZW1TaXplID0gX3JlZjQuZXN0aW1hdGVkSXRlbVNpemU7XG4gICAgdmFyIGluc3RhbmNlUHJvcHMgPSB7XG4gICAgICBpdGVtTWV0YWRhdGFNYXA6IHt9LFxuICAgICAgZXN0aW1hdGVkSXRlbVNpemU6IGVzdGltYXRlZEl0ZW1TaXplIHx8IERFRkFVTFRfRVNUSU1BVEVEX0lURU1fU0laRSQxLFxuICAgICAgbGFzdE1lYXN1cmVkSW5kZXg6IC0xXG4gICAgfTtcblxuICAgIGluc3RhbmNlLnJlc2V0QWZ0ZXJJbmRleCA9IGZ1bmN0aW9uIChpbmRleCwgc2hvdWxkRm9yY2VVcGRhdGUpIHtcbiAgICAgIGlmIChzaG91bGRGb3JjZVVwZGF0ZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHNob3VsZEZvcmNlVXBkYXRlID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaW5zdGFuY2VQcm9wcy5sYXN0TWVhc3VyZWRJbmRleCA9IE1hdGgubWluKGluc3RhbmNlUHJvcHMubGFzdE1lYXN1cmVkSW5kZXgsIGluZGV4IC0gMSk7IC8vIFdlIGNvdWxkIHBvdGVudGlhbGx5IG9wdGltaXplIGZ1cnRoZXIgYnkgb25seSBldmljdGluZyBzdHlsZXMgYWZ0ZXIgdGhpcyBpbmRleCxcbiAgICAgIC8vIEJ1dCBzaW5jZSBzdHlsZXMgYXJlIG9ubHkgY2FjaGVkIHdoaWxlIHNjcm9sbGluZyBpcyBpbiBwcm9ncmVzcy1cbiAgICAgIC8vIEl0IHNlZW1zIGFuIHVubmVjZXNzYXJ5IG9wdGltaXphdGlvbi5cbiAgICAgIC8vIEl0J3MgdW5saWtlbHkgdGhhdCByZXNldEFmdGVySW5kZXgoKSB3aWxsIGJlIGNhbGxlZCB3aGlsZSBhIHVzZXIgaXMgc2Nyb2xsaW5nLlxuXG4gICAgICBpbnN0YW5jZS5fZ2V0SXRlbVN0eWxlQ2FjaGUoLTEpO1xuXG4gICAgICBpZiAoc2hvdWxkRm9yY2VVcGRhdGUpIHtcbiAgICAgICAgaW5zdGFuY2UuZm9yY2VVcGRhdGUoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIGluc3RhbmNlUHJvcHM7XG4gIH0sXG4gIHNob3VsZFJlc2V0U3R5bGVDYWNoZU9uSXRlbVNpemVDaGFuZ2U6IGZhbHNlLFxuICB2YWxpZGF0ZVByb3BzOiBmdW5jdGlvbiB2YWxpZGF0ZVByb3BzKF9yZWY1KSB7XG4gICAgdmFyIGl0ZW1TaXplID0gX3JlZjUuaXRlbVNpemU7XG5cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgaWYgKHR5cGVvZiBpdGVtU2l6ZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBFcnJvcignQW4gaW52YWxpZCBcIml0ZW1TaXplXCIgcHJvcCBoYXMgYmVlbiBzcGVjaWZpZWQuICcgKyAnVmFsdWUgc2hvdWxkIGJlIGEgZnVuY3Rpb24uICcgKyAoXCJcXFwiXCIgKyAoaXRlbVNpemUgPT09IG51bGwgPyAnbnVsbCcgOiB0eXBlb2YgaXRlbVNpemUpICsgXCJcXFwiIHdhcyBzcGVjaWZpZWQuXCIpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pO1xuXG52YXIgRml4ZWRTaXplR3JpZCA9IC8qI19fUFVSRV9fKi9jcmVhdGVHcmlkQ29tcG9uZW50KHtcbiAgZ2V0Q29sdW1uT2Zmc2V0OiBmdW5jdGlvbiBnZXRDb2x1bW5PZmZzZXQoX3JlZiwgaW5kZXgpIHtcbiAgICB2YXIgY29sdW1uV2lkdGggPSBfcmVmLmNvbHVtbldpZHRoO1xuICAgIHJldHVybiBpbmRleCAqIGNvbHVtbldpZHRoO1xuICB9LFxuICBnZXRDb2x1bW5XaWR0aDogZnVuY3Rpb24gZ2V0Q29sdW1uV2lkdGgoX3JlZjIsIGluZGV4KSB7XG4gICAgdmFyIGNvbHVtbldpZHRoID0gX3JlZjIuY29sdW1uV2lkdGg7XG4gICAgcmV0dXJuIGNvbHVtbldpZHRoO1xuICB9LFxuICBnZXRSb3dPZmZzZXQ6IGZ1bmN0aW9uIGdldFJvd09mZnNldChfcmVmMywgaW5kZXgpIHtcbiAgICB2YXIgcm93SGVpZ2h0ID0gX3JlZjMucm93SGVpZ2h0O1xuICAgIHJldHVybiBpbmRleCAqIHJvd0hlaWdodDtcbiAgfSxcbiAgZ2V0Um93SGVpZ2h0OiBmdW5jdGlvbiBnZXRSb3dIZWlnaHQoX3JlZjQsIGluZGV4KSB7XG4gICAgdmFyIHJvd0hlaWdodCA9IF9yZWY0LnJvd0hlaWdodDtcbiAgICByZXR1cm4gcm93SGVpZ2h0O1xuICB9LFxuICBnZXRFc3RpbWF0ZWRUb3RhbEhlaWdodDogZnVuY3Rpb24gZ2V0RXN0aW1hdGVkVG90YWxIZWlnaHQoX3JlZjUpIHtcbiAgICB2YXIgcm93Q291bnQgPSBfcmVmNS5yb3dDb3VudCxcbiAgICAgICAgcm93SGVpZ2h0ID0gX3JlZjUucm93SGVpZ2h0O1xuICAgIHJldHVybiByb3dIZWlnaHQgKiByb3dDb3VudDtcbiAgfSxcbiAgZ2V0RXN0aW1hdGVkVG90YWxXaWR0aDogZnVuY3Rpb24gZ2V0RXN0aW1hdGVkVG90YWxXaWR0aChfcmVmNikge1xuICAgIHZhciBjb2x1bW5Db3VudCA9IF9yZWY2LmNvbHVtbkNvdW50LFxuICAgICAgICBjb2x1bW5XaWR0aCA9IF9yZWY2LmNvbHVtbldpZHRoO1xuICAgIHJldHVybiBjb2x1bW5XaWR0aCAqIGNvbHVtbkNvdW50O1xuICB9LFxuICBnZXRPZmZzZXRGb3JDb2x1bW5BbmRBbGlnbm1lbnQ6IGZ1bmN0aW9uIGdldE9mZnNldEZvckNvbHVtbkFuZEFsaWdubWVudChfcmVmNywgY29sdW1uSW5kZXgsIGFsaWduLCBzY3JvbGxMZWZ0LCBpbnN0YW5jZVByb3BzLCBzY3JvbGxiYXJTaXplKSB7XG4gICAgdmFyIGNvbHVtbkNvdW50ID0gX3JlZjcuY29sdW1uQ291bnQsXG4gICAgICAgIGNvbHVtbldpZHRoID0gX3JlZjcuY29sdW1uV2lkdGgsXG4gICAgICAgIHdpZHRoID0gX3JlZjcud2lkdGg7XG4gICAgdmFyIGxhc3RDb2x1bW5PZmZzZXQgPSBNYXRoLm1heCgwLCBjb2x1bW5Db3VudCAqIGNvbHVtbldpZHRoIC0gd2lkdGgpO1xuICAgIHZhciBtYXhPZmZzZXQgPSBNYXRoLm1pbihsYXN0Q29sdW1uT2Zmc2V0LCBjb2x1bW5JbmRleCAqIGNvbHVtbldpZHRoKTtcbiAgICB2YXIgbWluT2Zmc2V0ID0gTWF0aC5tYXgoMCwgY29sdW1uSW5kZXggKiBjb2x1bW5XaWR0aCAtIHdpZHRoICsgc2Nyb2xsYmFyU2l6ZSArIGNvbHVtbldpZHRoKTtcblxuICAgIGlmIChhbGlnbiA9PT0gJ3NtYXJ0Jykge1xuICAgICAgaWYgKHNjcm9sbExlZnQgPj0gbWluT2Zmc2V0IC0gd2lkdGggJiYgc2Nyb2xsTGVmdCA8PSBtYXhPZmZzZXQgKyB3aWR0aCkge1xuICAgICAgICBhbGlnbiA9ICdhdXRvJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFsaWduID0gJ2NlbnRlcic7XG4gICAgICB9XG4gICAgfVxuXG4gICAgc3dpdGNoIChhbGlnbikge1xuICAgICAgY2FzZSAnc3RhcnQnOlxuICAgICAgICByZXR1cm4gbWF4T2Zmc2V0O1xuXG4gICAgICBjYXNlICdlbmQnOlxuICAgICAgICByZXR1cm4gbWluT2Zmc2V0O1xuXG4gICAgICBjYXNlICdjZW50ZXInOlxuICAgICAgICAvLyBcIkNlbnRlcmVkXCIgb2Zmc2V0IGlzIHVzdWFsbHkgdGhlIGF2ZXJhZ2Ugb2YgdGhlIG1pbiBhbmQgbWF4LlxuICAgICAgICAvLyBCdXQgbmVhciB0aGUgZWRnZXMgb2YgdGhlIGxpc3QsIHRoaXMgZG9lc24ndCBob2xkIHRydWUuXG4gICAgICAgIHZhciBtaWRkbGVPZmZzZXQgPSBNYXRoLnJvdW5kKG1pbk9mZnNldCArIChtYXhPZmZzZXQgLSBtaW5PZmZzZXQpIC8gMik7XG5cbiAgICAgICAgaWYgKG1pZGRsZU9mZnNldCA8IE1hdGguY2VpbCh3aWR0aCAvIDIpKSB7XG4gICAgICAgICAgcmV0dXJuIDA7IC8vIG5lYXIgdGhlIGJlZ2lubmluZ1xuICAgICAgICB9IGVsc2UgaWYgKG1pZGRsZU9mZnNldCA+IGxhc3RDb2x1bW5PZmZzZXQgKyBNYXRoLmZsb29yKHdpZHRoIC8gMikpIHtcbiAgICAgICAgICByZXR1cm4gbGFzdENvbHVtbk9mZnNldDsgLy8gbmVhciB0aGUgZW5kXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIG1pZGRsZU9mZnNldDtcbiAgICAgICAgfVxuXG4gICAgICBjYXNlICdhdXRvJzpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChzY3JvbGxMZWZ0ID49IG1pbk9mZnNldCAmJiBzY3JvbGxMZWZ0IDw9IG1heE9mZnNldCkge1xuICAgICAgICAgIHJldHVybiBzY3JvbGxMZWZ0O1xuICAgICAgICB9IGVsc2UgaWYgKG1pbk9mZnNldCA+IG1heE9mZnNldCkge1xuICAgICAgICAgIC8vIEJlY2F1c2Ugd2Ugb25seSB0YWtlIGludG8gYWNjb3VudCB0aGUgc2Nyb2xsYmFyIHNpemUgd2hlbiBjYWxjdWxhdGluZyBtaW5PZmZzZXRcbiAgICAgICAgICAvLyB0aGlzIHZhbHVlIGNhbiBiZSBsYXJnZXIgdGhhbiBtYXhPZmZzZXQgd2hlbiBhdCB0aGUgZW5kIG9mIHRoZSBsaXN0XG4gICAgICAgICAgcmV0dXJuIG1pbk9mZnNldDtcbiAgICAgICAgfSBlbHNlIGlmIChzY3JvbGxMZWZ0IDwgbWluT2Zmc2V0KSB7XG4gICAgICAgICAgcmV0dXJuIG1pbk9mZnNldDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gbWF4T2Zmc2V0O1xuICAgICAgICB9XG5cbiAgICB9XG4gIH0sXG4gIGdldE9mZnNldEZvclJvd0FuZEFsaWdubWVudDogZnVuY3Rpb24gZ2V0T2Zmc2V0Rm9yUm93QW5kQWxpZ25tZW50KF9yZWY4LCByb3dJbmRleCwgYWxpZ24sIHNjcm9sbFRvcCwgaW5zdGFuY2VQcm9wcywgc2Nyb2xsYmFyU2l6ZSkge1xuICAgIHZhciByb3dIZWlnaHQgPSBfcmVmOC5yb3dIZWlnaHQsXG4gICAgICAgIGhlaWdodCA9IF9yZWY4LmhlaWdodCxcbiAgICAgICAgcm93Q291bnQgPSBfcmVmOC5yb3dDb3VudDtcbiAgICB2YXIgbGFzdFJvd09mZnNldCA9IE1hdGgubWF4KDAsIHJvd0NvdW50ICogcm93SGVpZ2h0IC0gaGVpZ2h0KTtcbiAgICB2YXIgbWF4T2Zmc2V0ID0gTWF0aC5taW4obGFzdFJvd09mZnNldCwgcm93SW5kZXggKiByb3dIZWlnaHQpO1xuICAgIHZhciBtaW5PZmZzZXQgPSBNYXRoLm1heCgwLCByb3dJbmRleCAqIHJvd0hlaWdodCAtIGhlaWdodCArIHNjcm9sbGJhclNpemUgKyByb3dIZWlnaHQpO1xuXG4gICAgaWYgKGFsaWduID09PSAnc21hcnQnKSB7XG4gICAgICBpZiAoc2Nyb2xsVG9wID49IG1pbk9mZnNldCAtIGhlaWdodCAmJiBzY3JvbGxUb3AgPD0gbWF4T2Zmc2V0ICsgaGVpZ2h0KSB7XG4gICAgICAgIGFsaWduID0gJ2F1dG8nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWxpZ24gPSAnY2VudGVyJztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzd2l0Y2ggKGFsaWduKSB7XG4gICAgICBjYXNlICdzdGFydCc6XG4gICAgICAgIHJldHVybiBtYXhPZmZzZXQ7XG5cbiAgICAgIGNhc2UgJ2VuZCc6XG4gICAgICAgIHJldHVybiBtaW5PZmZzZXQ7XG5cbiAgICAgIGNhc2UgJ2NlbnRlcic6XG4gICAgICAgIC8vIFwiQ2VudGVyZWRcIiBvZmZzZXQgaXMgdXN1YWxseSB0aGUgYXZlcmFnZSBvZiB0aGUgbWluIGFuZCBtYXguXG4gICAgICAgIC8vIEJ1dCBuZWFyIHRoZSBlZGdlcyBvZiB0aGUgbGlzdCwgdGhpcyBkb2Vzbid0IGhvbGQgdHJ1ZS5cbiAgICAgICAgdmFyIG1pZGRsZU9mZnNldCA9IE1hdGgucm91bmQobWluT2Zmc2V0ICsgKG1heE9mZnNldCAtIG1pbk9mZnNldCkgLyAyKTtcblxuICAgICAgICBpZiAobWlkZGxlT2Zmc2V0IDwgTWF0aC5jZWlsKGhlaWdodCAvIDIpKSB7XG4gICAgICAgICAgcmV0dXJuIDA7IC8vIG5lYXIgdGhlIGJlZ2lubmluZ1xuICAgICAgICB9IGVsc2UgaWYgKG1pZGRsZU9mZnNldCA+IGxhc3RSb3dPZmZzZXQgKyBNYXRoLmZsb29yKGhlaWdodCAvIDIpKSB7XG4gICAgICAgICAgcmV0dXJuIGxhc3RSb3dPZmZzZXQ7IC8vIG5lYXIgdGhlIGVuZFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBtaWRkbGVPZmZzZXQ7XG4gICAgICAgIH1cblxuICAgICAgY2FzZSAnYXV0byc6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAoc2Nyb2xsVG9wID49IG1pbk9mZnNldCAmJiBzY3JvbGxUb3AgPD0gbWF4T2Zmc2V0KSB7XG4gICAgICAgICAgcmV0dXJuIHNjcm9sbFRvcDtcbiAgICAgICAgfSBlbHNlIGlmIChtaW5PZmZzZXQgPiBtYXhPZmZzZXQpIHtcbiAgICAgICAgICAvLyBCZWNhdXNlIHdlIG9ubHkgdGFrZSBpbnRvIGFjY291bnQgdGhlIHNjcm9sbGJhciBzaXplIHdoZW4gY2FsY3VsYXRpbmcgbWluT2Zmc2V0XG4gICAgICAgICAgLy8gdGhpcyB2YWx1ZSBjYW4gYmUgbGFyZ2VyIHRoYW4gbWF4T2Zmc2V0IHdoZW4gYXQgdGhlIGVuZCBvZiB0aGUgbGlzdFxuICAgICAgICAgIHJldHVybiBtaW5PZmZzZXQ7XG4gICAgICAgIH0gZWxzZSBpZiAoc2Nyb2xsVG9wIDwgbWluT2Zmc2V0KSB7XG4gICAgICAgICAgcmV0dXJuIG1pbk9mZnNldDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gbWF4T2Zmc2V0O1xuICAgICAgICB9XG5cbiAgICB9XG4gIH0sXG4gIGdldENvbHVtblN0YXJ0SW5kZXhGb3JPZmZzZXQ6IGZ1bmN0aW9uIGdldENvbHVtblN0YXJ0SW5kZXhGb3JPZmZzZXQoX3JlZjksIHNjcm9sbExlZnQpIHtcbiAgICB2YXIgY29sdW1uV2lkdGggPSBfcmVmOS5jb2x1bW5XaWR0aCxcbiAgICAgICAgY29sdW1uQ291bnQgPSBfcmVmOS5jb2x1bW5Db3VudDtcbiAgICByZXR1cm4gTWF0aC5tYXgoMCwgTWF0aC5taW4oY29sdW1uQ291bnQgLSAxLCBNYXRoLmZsb29yKHNjcm9sbExlZnQgLyBjb2x1bW5XaWR0aCkpKTtcbiAgfSxcbiAgZ2V0Q29sdW1uU3RvcEluZGV4Rm9yU3RhcnRJbmRleDogZnVuY3Rpb24gZ2V0Q29sdW1uU3RvcEluZGV4Rm9yU3RhcnRJbmRleChfcmVmMTAsIHN0YXJ0SW5kZXgsIHNjcm9sbExlZnQpIHtcbiAgICB2YXIgY29sdW1uV2lkdGggPSBfcmVmMTAuY29sdW1uV2lkdGgsXG4gICAgICAgIGNvbHVtbkNvdW50ID0gX3JlZjEwLmNvbHVtbkNvdW50LFxuICAgICAgICB3aWR0aCA9IF9yZWYxMC53aWR0aDtcbiAgICB2YXIgbGVmdCA9IHN0YXJ0SW5kZXggKiBjb2x1bW5XaWR0aDtcbiAgICB2YXIgbnVtVmlzaWJsZUNvbHVtbnMgPSBNYXRoLmNlaWwoKHdpZHRoICsgc2Nyb2xsTGVmdCAtIGxlZnQpIC8gY29sdW1uV2lkdGgpO1xuICAgIHJldHVybiBNYXRoLm1heCgwLCBNYXRoLm1pbihjb2x1bW5Db3VudCAtIDEsIHN0YXJ0SW5kZXggKyBudW1WaXNpYmxlQ29sdW1ucyAtIDEgLy8gLTEgaXMgYmVjYXVzZSBzdG9wIGluZGV4IGlzIGluY2x1c2l2ZVxuICAgICkpO1xuICB9LFxuICBnZXRSb3dTdGFydEluZGV4Rm9yT2Zmc2V0OiBmdW5jdGlvbiBnZXRSb3dTdGFydEluZGV4Rm9yT2Zmc2V0KF9yZWYxMSwgc2Nyb2xsVG9wKSB7XG4gICAgdmFyIHJvd0hlaWdodCA9IF9yZWYxMS5yb3dIZWlnaHQsXG4gICAgICAgIHJvd0NvdW50ID0gX3JlZjExLnJvd0NvdW50O1xuICAgIHJldHVybiBNYXRoLm1heCgwLCBNYXRoLm1pbihyb3dDb3VudCAtIDEsIE1hdGguZmxvb3Ioc2Nyb2xsVG9wIC8gcm93SGVpZ2h0KSkpO1xuICB9LFxuICBnZXRSb3dTdG9wSW5kZXhGb3JTdGFydEluZGV4OiBmdW5jdGlvbiBnZXRSb3dTdG9wSW5kZXhGb3JTdGFydEluZGV4KF9yZWYxMiwgc3RhcnRJbmRleCwgc2Nyb2xsVG9wKSB7XG4gICAgdmFyIHJvd0hlaWdodCA9IF9yZWYxMi5yb3dIZWlnaHQsXG4gICAgICAgIHJvd0NvdW50ID0gX3JlZjEyLnJvd0NvdW50LFxuICAgICAgICBoZWlnaHQgPSBfcmVmMTIuaGVpZ2h0O1xuICAgIHZhciB0b3AgPSBzdGFydEluZGV4ICogcm93SGVpZ2h0O1xuICAgIHZhciBudW1WaXNpYmxlUm93cyA9IE1hdGguY2VpbCgoaGVpZ2h0ICsgc2Nyb2xsVG9wIC0gdG9wKSAvIHJvd0hlaWdodCk7XG4gICAgcmV0dXJuIE1hdGgubWF4KDAsIE1hdGgubWluKHJvd0NvdW50IC0gMSwgc3RhcnRJbmRleCArIG51bVZpc2libGVSb3dzIC0gMSAvLyAtMSBpcyBiZWNhdXNlIHN0b3AgaW5kZXggaXMgaW5jbHVzaXZlXG4gICAgKSk7XG4gIH0sXG4gIGluaXRJbnN0YW5jZVByb3BzOiBmdW5jdGlvbiBpbml0SW5zdGFuY2VQcm9wcyhwcm9wcykgey8vIE5vb3BcbiAgfSxcbiAgc2hvdWxkUmVzZXRTdHlsZUNhY2hlT25JdGVtU2l6ZUNoYW5nZTogdHJ1ZSxcbiAgdmFsaWRhdGVQcm9wczogZnVuY3Rpb24gdmFsaWRhdGVQcm9wcyhfcmVmMTMpIHtcbiAgICB2YXIgY29sdW1uV2lkdGggPSBfcmVmMTMuY29sdW1uV2lkdGgsXG4gICAgICAgIHJvd0hlaWdodCA9IF9yZWYxMy5yb3dIZWlnaHQ7XG5cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgaWYgKHR5cGVvZiBjb2x1bW5XaWR0aCAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoJ0FuIGludmFsaWQgXCJjb2x1bW5XaWR0aFwiIHByb3AgaGFzIGJlZW4gc3BlY2lmaWVkLiAnICsgJ1ZhbHVlIHNob3VsZCBiZSBhIG51bWJlci4gJyArIChcIlxcXCJcIiArIChjb2x1bW5XaWR0aCA9PT0gbnVsbCA/ICdudWxsJyA6IHR5cGVvZiBjb2x1bW5XaWR0aCkgKyBcIlxcXCIgd2FzIHNwZWNpZmllZC5cIikpO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIHJvd0hlaWdodCAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoJ0FuIGludmFsaWQgXCJyb3dIZWlnaHRcIiBwcm9wIGhhcyBiZWVuIHNwZWNpZmllZC4gJyArICdWYWx1ZSBzaG91bGQgYmUgYSBudW1iZXIuICcgKyAoXCJcXFwiXCIgKyAocm93SGVpZ2h0ID09PSBudWxsID8gJ251bGwnIDogdHlwZW9mIHJvd0hlaWdodCkgKyBcIlxcXCIgd2FzIHNwZWNpZmllZC5cIikpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufSk7XG5cbnZhciBGaXhlZFNpemVMaXN0ID0gLyojX19QVVJFX18qL2NyZWF0ZUxpc3RDb21wb25lbnQoe1xuICBnZXRJdGVtT2Zmc2V0OiBmdW5jdGlvbiBnZXRJdGVtT2Zmc2V0KF9yZWYsIGluZGV4KSB7XG4gICAgdmFyIGl0ZW1TaXplID0gX3JlZi5pdGVtU2l6ZTtcbiAgICByZXR1cm4gaW5kZXggKiBpdGVtU2l6ZTtcbiAgfSxcbiAgZ2V0SXRlbVNpemU6IGZ1bmN0aW9uIGdldEl0ZW1TaXplKF9yZWYyLCBpbmRleCkge1xuICAgIHZhciBpdGVtU2l6ZSA9IF9yZWYyLml0ZW1TaXplO1xuICAgIHJldHVybiBpdGVtU2l6ZTtcbiAgfSxcbiAgZ2V0RXN0aW1hdGVkVG90YWxTaXplOiBmdW5jdGlvbiBnZXRFc3RpbWF0ZWRUb3RhbFNpemUoX3JlZjMpIHtcbiAgICB2YXIgaXRlbUNvdW50ID0gX3JlZjMuaXRlbUNvdW50LFxuICAgICAgICBpdGVtU2l6ZSA9IF9yZWYzLml0ZW1TaXplO1xuICAgIHJldHVybiBpdGVtU2l6ZSAqIGl0ZW1Db3VudDtcbiAgfSxcbiAgZ2V0T2Zmc2V0Rm9ySW5kZXhBbmRBbGlnbm1lbnQ6IGZ1bmN0aW9uIGdldE9mZnNldEZvckluZGV4QW5kQWxpZ25tZW50KF9yZWY0LCBpbmRleCwgYWxpZ24sIHNjcm9sbE9mZnNldCkge1xuICAgIHZhciBkaXJlY3Rpb24gPSBfcmVmNC5kaXJlY3Rpb24sXG4gICAgICAgIGhlaWdodCA9IF9yZWY0LmhlaWdodCxcbiAgICAgICAgaXRlbUNvdW50ID0gX3JlZjQuaXRlbUNvdW50LFxuICAgICAgICBpdGVtU2l6ZSA9IF9yZWY0Lml0ZW1TaXplLFxuICAgICAgICBsYXlvdXQgPSBfcmVmNC5sYXlvdXQsXG4gICAgICAgIHdpZHRoID0gX3JlZjQud2lkdGg7XG4gICAgLy8gVE9ETyBEZXByZWNhdGUgZGlyZWN0aW9uIFwiaG9yaXpvbnRhbFwiXG4gICAgdmFyIGlzSG9yaXpvbnRhbCA9IGRpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnIHx8IGxheW91dCA9PT0gJ2hvcml6b250YWwnO1xuICAgIHZhciBzaXplID0gaXNIb3Jpem9udGFsID8gd2lkdGggOiBoZWlnaHQ7XG4gICAgdmFyIGxhc3RJdGVtT2Zmc2V0ID0gTWF0aC5tYXgoMCwgaXRlbUNvdW50ICogaXRlbVNpemUgLSBzaXplKTtcbiAgICB2YXIgbWF4T2Zmc2V0ID0gTWF0aC5taW4obGFzdEl0ZW1PZmZzZXQsIGluZGV4ICogaXRlbVNpemUpO1xuICAgIHZhciBtaW5PZmZzZXQgPSBNYXRoLm1heCgwLCBpbmRleCAqIGl0ZW1TaXplIC0gc2l6ZSArIGl0ZW1TaXplKTtcblxuICAgIGlmIChhbGlnbiA9PT0gJ3NtYXJ0Jykge1xuICAgICAgaWYgKHNjcm9sbE9mZnNldCA+PSBtaW5PZmZzZXQgLSBzaXplICYmIHNjcm9sbE9mZnNldCA8PSBtYXhPZmZzZXQgKyBzaXplKSB7XG4gICAgICAgIGFsaWduID0gJ2F1dG8nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWxpZ24gPSAnY2VudGVyJztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzd2l0Y2ggKGFsaWduKSB7XG4gICAgICBjYXNlICdzdGFydCc6XG4gICAgICAgIHJldHVybiBtYXhPZmZzZXQ7XG5cbiAgICAgIGNhc2UgJ2VuZCc6XG4gICAgICAgIHJldHVybiBtaW5PZmZzZXQ7XG5cbiAgICAgIGNhc2UgJ2NlbnRlcic6XG4gICAgICAgIHtcbiAgICAgICAgICAvLyBcIkNlbnRlcmVkXCIgb2Zmc2V0IGlzIHVzdWFsbHkgdGhlIGF2ZXJhZ2Ugb2YgdGhlIG1pbiBhbmQgbWF4LlxuICAgICAgICAgIC8vIEJ1dCBuZWFyIHRoZSBlZGdlcyBvZiB0aGUgbGlzdCwgdGhpcyBkb2Vzbid0IGhvbGQgdHJ1ZS5cbiAgICAgICAgICB2YXIgbWlkZGxlT2Zmc2V0ID0gTWF0aC5yb3VuZChtaW5PZmZzZXQgKyAobWF4T2Zmc2V0IC0gbWluT2Zmc2V0KSAvIDIpO1xuXG4gICAgICAgICAgaWYgKG1pZGRsZU9mZnNldCA8IE1hdGguY2VpbChzaXplIC8gMikpIHtcbiAgICAgICAgICAgIHJldHVybiAwOyAvLyBuZWFyIHRoZSBiZWdpbm5pbmdcbiAgICAgICAgICB9IGVsc2UgaWYgKG1pZGRsZU9mZnNldCA+IGxhc3RJdGVtT2Zmc2V0ICsgTWF0aC5mbG9vcihzaXplIC8gMikpIHtcbiAgICAgICAgICAgIHJldHVybiBsYXN0SXRlbU9mZnNldDsgLy8gbmVhciB0aGUgZW5kXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBtaWRkbGVPZmZzZXQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgIGNhc2UgJ2F1dG8nOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKHNjcm9sbE9mZnNldCA+PSBtaW5PZmZzZXQgJiYgc2Nyb2xsT2Zmc2V0IDw9IG1heE9mZnNldCkge1xuICAgICAgICAgIHJldHVybiBzY3JvbGxPZmZzZXQ7XG4gICAgICAgIH0gZWxzZSBpZiAoc2Nyb2xsT2Zmc2V0IDwgbWluT2Zmc2V0KSB7XG4gICAgICAgICAgcmV0dXJuIG1pbk9mZnNldDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gbWF4T2Zmc2V0O1xuICAgICAgICB9XG5cbiAgICB9XG4gIH0sXG4gIGdldFN0YXJ0SW5kZXhGb3JPZmZzZXQ6IGZ1bmN0aW9uIGdldFN0YXJ0SW5kZXhGb3JPZmZzZXQoX3JlZjUsIG9mZnNldCkge1xuICAgIHZhciBpdGVtQ291bnQgPSBfcmVmNS5pdGVtQ291bnQsXG4gICAgICAgIGl0ZW1TaXplID0gX3JlZjUuaXRlbVNpemU7XG4gICAgcmV0dXJuIE1hdGgubWF4KDAsIE1hdGgubWluKGl0ZW1Db3VudCAtIDEsIE1hdGguZmxvb3Iob2Zmc2V0IC8gaXRlbVNpemUpKSk7XG4gIH0sXG4gIGdldFN0b3BJbmRleEZvclN0YXJ0SW5kZXg6IGZ1bmN0aW9uIGdldFN0b3BJbmRleEZvclN0YXJ0SW5kZXgoX3JlZjYsIHN0YXJ0SW5kZXgsIHNjcm9sbE9mZnNldCkge1xuICAgIHZhciBkaXJlY3Rpb24gPSBfcmVmNi5kaXJlY3Rpb24sXG4gICAgICAgIGhlaWdodCA9IF9yZWY2LmhlaWdodCxcbiAgICAgICAgaXRlbUNvdW50ID0gX3JlZjYuaXRlbUNvdW50LFxuICAgICAgICBpdGVtU2l6ZSA9IF9yZWY2Lml0ZW1TaXplLFxuICAgICAgICBsYXlvdXQgPSBfcmVmNi5sYXlvdXQsXG4gICAgICAgIHdpZHRoID0gX3JlZjYud2lkdGg7XG4gICAgLy8gVE9ETyBEZXByZWNhdGUgZGlyZWN0aW9uIFwiaG9yaXpvbnRhbFwiXG4gICAgdmFyIGlzSG9yaXpvbnRhbCA9IGRpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnIHx8IGxheW91dCA9PT0gJ2hvcml6b250YWwnO1xuICAgIHZhciBvZmZzZXQgPSBzdGFydEluZGV4ICogaXRlbVNpemU7XG4gICAgdmFyIHNpemUgPSBpc0hvcml6b250YWwgPyB3aWR0aCA6IGhlaWdodDtcbiAgICB2YXIgbnVtVmlzaWJsZUl0ZW1zID0gTWF0aC5jZWlsKChzaXplICsgc2Nyb2xsT2Zmc2V0IC0gb2Zmc2V0KSAvIGl0ZW1TaXplKTtcbiAgICByZXR1cm4gTWF0aC5tYXgoMCwgTWF0aC5taW4oaXRlbUNvdW50IC0gMSwgc3RhcnRJbmRleCArIG51bVZpc2libGVJdGVtcyAtIDEgLy8gLTEgaXMgYmVjYXVzZSBzdG9wIGluZGV4IGlzIGluY2x1c2l2ZVxuICAgICkpO1xuICB9LFxuICBpbml0SW5zdGFuY2VQcm9wczogZnVuY3Rpb24gaW5pdEluc3RhbmNlUHJvcHMocHJvcHMpIHsvLyBOb29wXG4gIH0sXG4gIHNob3VsZFJlc2V0U3R5bGVDYWNoZU9uSXRlbVNpemVDaGFuZ2U6IHRydWUsXG4gIHZhbGlkYXRlUHJvcHM6IGZ1bmN0aW9uIHZhbGlkYXRlUHJvcHMoX3JlZjcpIHtcbiAgICB2YXIgaXRlbVNpemUgPSBfcmVmNy5pdGVtU2l6ZTtcblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBpZiAodHlwZW9mIGl0ZW1TaXplICE9PSAnbnVtYmVyJykge1xuICAgICAgICB0aHJvdyBFcnJvcignQW4gaW52YWxpZCBcIml0ZW1TaXplXCIgcHJvcCBoYXMgYmVlbiBzcGVjaWZpZWQuICcgKyAnVmFsdWUgc2hvdWxkIGJlIGEgbnVtYmVyLiAnICsgKFwiXFxcIlwiICsgKGl0ZW1TaXplID09PSBudWxsID8gJ251bGwnIDogdHlwZW9mIGl0ZW1TaXplKSArIFwiXFxcIiB3YXMgc3BlY2lmaWVkLlwiKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59KTtcblxuLy8gUHVsbGVkIGZyb20gcmVhY3QtY29tcGF0XG4vLyBodHRwczovL2dpdGh1Yi5jb20vZGV2ZWxvcGl0L3ByZWFjdC1jb21wYXQvYmxvYi83YzVkZTAwZTdjODVlMmZmZDAxMWJmM2FmMDI4OTliNjNmNjk5ZDNhL3NyYy9pbmRleC5qcyNMMzQ5XG5mdW5jdGlvbiBzaGFsbG93RGlmZmVycyhwcmV2LCBuZXh0KSB7XG4gIGZvciAodmFyIGF0dHJpYnV0ZSBpbiBwcmV2KSB7XG4gICAgaWYgKCEoYXR0cmlidXRlIGluIG5leHQpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBmb3IgKHZhciBfYXR0cmlidXRlIGluIG5leHQpIHtcbiAgICBpZiAocHJldltfYXR0cmlidXRlXSAhPT0gbmV4dFtfYXR0cmlidXRlXSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG52YXIgX2V4Y2x1ZGVkID0gW1wic3R5bGVcIl0sXG4gICAgX2V4Y2x1ZGVkMiA9IFtcInN0eWxlXCJdO1xuLy8gSXQga25vd3MgdG8gY29tcGFyZSBpbmRpdmlkdWFsIHN0eWxlIHByb3BzIGFuZCBpZ25vcmUgdGhlIHdyYXBwZXIgb2JqZWN0LlxuLy8gU2VlIGh0dHBzOi8vcmVhY3Rqcy5vcmcvZG9jcy9yZWFjdC1hcGkuaHRtbCNyZWFjdG1lbW9cblxuZnVuY3Rpb24gYXJlRXF1YWwocHJldlByb3BzLCBuZXh0UHJvcHMpIHtcbiAgdmFyIHByZXZTdHlsZSA9IHByZXZQcm9wcy5zdHlsZSxcbiAgICAgIHByZXZSZXN0ID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UocHJldlByb3BzLCBfZXhjbHVkZWQpO1xuXG4gIHZhciBuZXh0U3R5bGUgPSBuZXh0UHJvcHMuc3R5bGUsXG4gICAgICBuZXh0UmVzdCA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKG5leHRQcm9wcywgX2V4Y2x1ZGVkMik7XG5cbiAgcmV0dXJuICFzaGFsbG93RGlmZmVycyhwcmV2U3R5bGUsIG5leHRTdHlsZSkgJiYgIXNoYWxsb3dEaWZmZXJzKHByZXZSZXN0LCBuZXh0UmVzdCk7XG59XG5cbi8vIEl0IGtub3dzIHRvIGNvbXBhcmUgaW5kaXZpZHVhbCBzdHlsZSBwcm9wcyBhbmQgaWdub3JlIHRoZSB3cmFwcGVyIG9iamVjdC5cbi8vIFNlZSBodHRwczovL3JlYWN0anMub3JnL2RvY3MvcmVhY3QtY29tcG9uZW50Lmh0bWwjc2hvdWxkY29tcG9uZW50dXBkYXRlXG5cbmZ1bmN0aW9uIHNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHMsIG5leHRTdGF0ZSkge1xuICByZXR1cm4gIWFyZUVxdWFsKHRoaXMucHJvcHMsIG5leHRQcm9wcykgfHwgc2hhbGxvd0RpZmZlcnModGhpcy5zdGF0ZSwgbmV4dFN0YXRlKTtcbn1cblxuZXhwb3J0IHsgRml4ZWRTaXplR3JpZCwgRml4ZWRTaXplTGlzdCwgVmFyaWFibGVTaXplR3JpZCwgVmFyaWFibGVTaXplTGlzdCwgYXJlRXF1YWwsIHNob3VsZENvbXBvbmVudFVwZGF0ZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtLmpzLm1hcFxuIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIiB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiPjxwYXRoIGQ9XFxcIk0yIDNhMSAxIDAgMSAwIDAtMiAxIDEgMCAwIDAgMCAyWm0wIDFhMiAyIDAgMSAxIDAtNCAyIDIgMCAwIDEgMCA0Wm01LTNhMSAxIDAgMCAwIDAgMmg3YTEgMSAwIDAgMCAwLTJIN1ptMC0xaDdhMiAyIDAgMSAxIDAgNEg3YTIgMiAwIDEgMSAwLTRabTAgN2ExIDEgMCAwIDAgMCAyaDdhMSAxIDAgMCAwIDAtMkg3Wm0wLTFoN2EyIDIgMCAxIDEgMCA0SDdhMiAyIDAgMSAxIDAtNFptMCA3YTEgMSAwIDAgMCAwIDJoN2ExIDEgMCAwIDAgMC0ySDdabTAtMWg3YTIgMiAwIDEgMSAwIDRIN2EyIDIgMCAxIDEgMC00Wk0yIDlhMSAxIDAgMSAwIDAtMiAxIDEgMCAwIDAgMCAyWm0wIDFhMiAyIDAgMSAxIDAtNCAyIDIgMCAwIDEgMCA0Wm0wIDVhMSAxIDAgMSAwIDAtMiAxIDEgMCAwIDAgMCAyWm0wIDFhMiAyIDAgMSAxIDAtNCAyIDIgMCAwIDEgMCA0WlxcXCIgZmlsbD1cXFwiI0ZGRlxcXCIgZmlsbC1ydWxlPVxcXCJub256ZXJvXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB2aWV3Qm94PVxcXCIwIDAgMjAgMjBcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCI+PHBhdGggZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk0xOC41Ljk5NWMwLS41NS0uNDMtLjk5NS0uOTYtLjk5NUgyLjQ2YS45NC45NCAwIDAgMC0uNjA1LjIyMyAxLjAyIDEuMDIgMCAwIDAtLjE0IDEuNEw2LjUgNy43MmMuMTIyLjE1Ni4xOTYuMzQ3LjIxMi41NDhsLjgzNSAxMC44MTVjLjAwNy4wOTIuMDI3LjE4My4wNTguMjdhLjk1MS45NTEgMCAwIDAgMS4yMzcuNTgybDIuMTEyLS44MmEuOTkuOTkgMCAwIDAgLjYxNS0uNzk3bDEuMzI1LTEwLjA2MmMuMDI1LS4xOTMuMTA1LS4zNzQuMjI4LS41Mmw1LjE0MS02LjA4N2MuMTU0LS4xODEuMjM4LS40MTQuMjM4LS42NTVaTTIuNSAxaDE0Ljk5OWwtNS4xNDEgNi4wOS0uMTE3LjE1M2EyLjAxNiAyLjAxNiAwIDAgMC0uMzQuODgzbC0xLjMyNSAxMC4wNjItMi4wMzUuNzkyLS44MzMtMTAuNzg4LS4wMi0uMTY5YTIuMDEyIDIuMDEyIDAgMCAwLS40MDItLjkyTDIuNTAyIDEuMDA2IDIuNSAxWlxcXCIgZmlsbD1cXFwiIzAwMFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIiBmaWxsPVxcXCJub25lXFxcIiB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiPjxwYXRoIGQ9XFxcIk0xNSA3LjVhLjUyMi41MjIgMCAwIDEtLjUxNi41MjdIMi45NzZMNi40NzMgMTEuNmEuNTM1LjUzNSAwIDAgMSAwIC43NDYuNTA4LjUwOCAwIDAgMS0uNzMgMEwxIDcuNWw0Ljc0My00Ljg0NmEuNTA4LjUwOCAwIDAgMSAuNzMgMCAuNTM1LjUzNSAwIDAgMSAwIC43NDZMMi45NzYgNi45NzNoMTEuNTA4Yy4yODUgMCAuNTE2LjIzNi41MTYuNTI3WlxcXCIgZmlsbD1cXFwiIzAwMFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIiBmaWxsPVxcXCJub25lXFxcIiB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiPjxwYXRoIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNMi4xNDYgNC42NTNhLjQ4NS40ODUgMCAwIDEgLjcwOCAwTDggMTAuMjRsNS4xNDYtNS41ODdhLjQ4NS40ODUgMCAwIDEgLjcwOCAwIC41MzguNTM4IDAgMCAxIDAgLjczOGwtNS41IDUuOTU2YS40ODUuNDg1IDAgMCAxLS43MDggMGwtNS41LTUuOTU2YS41MzguNTM4IDAgMCAxIDAtLjczOFpcXFwiIGZpbGw9XFxcIiMwMDBcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCIgZmlsbD1cXFwibm9uZVxcXCIgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIj48cGF0aCBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTExLjM0NyAyLjE0NmEuNDg1LjQ4NSAwIDAgMSAwIC43MDhMNS43NiA4bDUuNTg3IDUuMTQ2YS40ODYuNDg2IDAgMCAxIDAgLjcwOC41MzguNTM4IDAgMCAxLS43MzggMGwtNS45NTYtNS41YS40ODUuNDg1IDAgMCAxIDAtLjcwOGw1Ljk1Ni01LjVhLjUzOC41MzggMCAwIDEgLjczOCAwWlxcXCIgZmlsbD1cXFwiIzAwMFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIiBmaWxsPVxcXCJub25lXFxcIiB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiPjxwYXRoIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNNC42NTMgMTMuODU0YS40ODUuNDg1IDAgMCAxIDAtLjcwOEwxMC4yNCA4IDQuNjUzIDIuODU0YS40ODUuNDg1IDAgMCAxIDAtLjcwOC41MzguNTM4IDAgMCAxIC43MzggMGw1Ljk1NiA1LjVhLjQ4NS40ODUgMCAwIDEgMCAuNzA4bC01Ljk1NiA1LjVhLjUzOC41MzggMCAwIDEtLjczOCAwWlxcXCIgZmlsbD1cXFwiIzAwMFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIiBmaWxsPVxcXCJub25lXFxcIiB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiPjxwYXRoIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNMTMuODU0IDExLjM0N2EuNDg2LjQ4NiAwIDAgMS0uNzA4IDBMOCA1Ljc2bC01LjE0NiA1LjU4N2EuNDg1LjQ4NSAwIDAgMS0uNzA4IDAgLjUzOC41MzggMCAwIDEgMC0uNzM4bDUuNS01Ljk1NmEuNDg1LjQ4NSAwIDAgMSAuNzA4IDBsNS41IDUuOTU2YS41MzguNTM4IDAgMCAxIDAgLjczOFpcXFwiIGZpbGw9XFxcIiMwMDBcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCIgZmlsbD1cXFwibm9uZVxcXCIgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIj48cGF0aCBkPVxcXCJtOC43NDUgOCA2LjEgNi4xYS41MjcuNTI3IDAgMSAxLS43NDUuNzQ2TDggOC43NDZsLTYuMSA2LjFhLjUyNy41MjcgMCAxIDEtLjc0Ni0uNzQ2bDYuMS02LjEtNi4xLTYuMWEuNTI3LjUyNyAwIDAgMSAuNzQ2LS43NDZsNi4xIDYuMSA2LjEtNi4xYS41MjcuNTI3IDAgMCAxIC43NDYuNzQ2TDguNzQ2IDhaXFxcIiBmaWxsPVxcXCIjMDAwXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCI+PHBhdGggZD1cXFwiTS40MzggMUMuMTk2IDEgMCAxLjIyNCAwIDEuNXMuMTk2LjUuNDM4LjVoMTUuMTI0Yy4yNDIgMCAuNDM4LS4yMjQuNDM4LS41cy0uMTk2LS41LS40MzgtLjVILjQzOFpNMCA3LjVjMC0uMjc2LjE5Ni0uNS40MzgtLjVoMTUuMTI0Yy4yNDIgMCAuNDM4LjIyNC40MzguNXMtLjE5Ni41LS40MzguNUguNDM4Qy4xOTYgOCAwIDcuNzc2IDAgNy41Wk0wIDEzLjVjMC0uMjc2LjE5Ni0uNS40MzgtLjVoMTUuMTI0Yy4yNDIgMCAuNDM4LjIyNC40MzguNXMtLjE5Ni41LS40MzguNUguNDM4Qy4xOTYgMTQgMCAxMy43NzYgMCAxMy41WlxcXCIgZmlsbD1cXFwiIzAwMFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIiBmaWxsPVxcXCJub25lXFxcIiB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiPjxwYXRoIGQ9XFxcIk0xNC45MzggOEE3IDcgMCAwIDEgMS4wMSA5SDBhOC4wMDEgOC4wMDEgMCAwIDAgMTUuOTM4LTFBOCA4IDAgMCAwIDEuMDIgMy45OEwxIC43MDJhLjUuNSAwIDEgMC0xIC4wMDZMLjAzMSA1LjlsNS4xMjgtLjgyNmEuNS41IDAgMCAwLS4xNi0uOTg3TDEuODE5IDQuNkE3IDcgMCAwIDEgMTQuOTM4IDhaXFxcIiBmaWxsPVxcXCIjMDAwXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCI+PHBhdGggZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk0xMiA2LjVhNS41IDUuNSAwIDEgMS0xMSAwIDUuNSA1LjUgMCAwIDEgMTEgMFptLTEuMjcgNC45MzZhNi41IDYuNSAwIDEgMSAuNzA3LS43MDdsNC4xMzYgNC4xMzdhLjUuNSAwIDEgMS0uNzA3LjcwN2wtNC4xMzctNC4xMzdaXFxcIiBmaWxsPVxcXCIjMDAwXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCI+PHBhdGggZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk0xNS44OCAyLjgyNWEuNS41IDAgMCAwLS43NTktLjY1bC0yLjMyMyAyLjcxLTEuMjY1LTEuMjY1YS41LjUgMCAxIDAtLjcwNy43MDdsMS4yNjUgMS4yNjVhMSAxIDAgMCAwIDEuNDY2LS4wNTZsMi4zMjMtMi43MVptMCA4YS41LjUgMCAwIDAtLjc1OS0uNjVsLTIuMzIzIDIuNzEtMS4yNjUtMS4yNjVhLjUuNSAwIDEgMC0uNzA3LjcwOGwxLjI2NSAxLjI2NGExIDEgMCAwIDAgMS40NjYtLjA1NmwyLjMyMy0yLjcxWk05IDQuNWEuNS41IDAgMCAxLS41LjVoLThhLjUuNSAwIDAgMSAwLTFoOGEuNS41IDAgMCAxIC41LjVaTTguNSAxM2EuNS41IDAgMCAwIDAtMWgtOGEuNS41IDAgMCAwIDAgMWg4WlxcXCIgZmlsbD1cXFwiIzAwMFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIiBmaWxsPVxcXCJub25lXFxcIiB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiPjxwYXRoIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNMTYgNC41YS41LjUgMCAwIDEtLjUuNWgtOGEuNS41IDAgMCAxIDAtMWg4YS41LjUgMCAwIDEgLjUuNVpNMTYgMTIuNWEuNS41IDAgMCAxLS41LjVoLThhLjUuNSAwIDAgMSAwLTFoOGEuNS41IDAgMCAxIC41LjVaTTUuMTQ2IDIuMTJhLjUuNSAwIDAgMSAuMDU1LjcwNWwtMi4zMjQgMi43MWExIDEgMCAwIDEtMS40NjYuMDU3TC4xNDYgNC4zMjdhLjUuNSAwIDAgMSAuNzA4LS43MDdsMS4yNjQgMS4yNjUgMi4zMjMtMi43MWEuNS41IDAgMCAxIC43MDUtLjA1NVpNNS4xNDYgMTAuMTJhLjUuNSAwIDAgMSAuMDU1LjcwNWwtMi4zMjQgMi43MWExIDEgMCAwIDEtMS40NjYuMDU3TC4xNDYgMTIuMzI4YS41LjUgMCAxIDEgLjcwOC0uNzA4bDEuMjY0IDEuMjY1IDIuMzIzLTIuNzFhLjUuNSAwIDAgMSAuNzA1LS4wNTVaXFxcIiBmaWxsPVxcXCIjMDAwXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCI+PHBhdGggZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIm0yLjExNiAxLjUuOTY5IDEuNjc4SDEuMDV2M0gwbDEuNSAyIDEuNS0yaC0uOTUxdi0yaDEuNjE0bDQuNjE4IDhIMi4wNDl2LTJIMS4wNXYzaDcuODA5bDEuMjU3IDIuMTc4Ljg2Ni0uNUwyLjk4MiAxbC0uODY2LjVabTkuOTgyIDguNjc4aC45NXYyaC0yLjYxMWwuNTc2IDFoMy4wMzZ2LTNoMS4wNWwtMS41MDEtMi0xLjUgMlptLjk1MS00di0ySDUuODE3bC0uNTc4LTFoOC44MXYzaC0xWlxcXCIgZmlsbD1cXFwiIzAwMFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIiBmaWxsPVxcXCJub25lXFxcIiB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiPjxwYXRoIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNMS4wNDkgNlYzaDEzdjNoLTFWNGgtMTF2MkgzTDEuNSA3Ljk5OSAwIDZoMS4wNDlabTEyIDRoLS45NTJsMS41LTIgMS41IDJoLTEuMDQ5djNIMS4wNXYtM2gxdjJoMTF2LTJaXFxcIiBmaWxsPVxcXCIjMDAwXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCI+PHBhdGggZD1cXFwibTExLjM2NiA3Ljg0MS0uNzMyLS42ODItMy4xMjUgMy4zNDktMS42MzUtMS44NC0uNzQ4LjY2NCAyLjM2NSAyLjY2IDMuODc1LTQuMTVaXFxcIiBmaWxsPVxcXCIjMDAwXFxcIj48L3BhdGg+PHBhdGggZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBjbGlwLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGQ9XFxcIk00LjUgM1YxLjE2N0M0LjUuNDY5IDUuMjA0IDAgNiAwaDRjLjc5NiAwIDEuNS40NyAxLjUgMS4xNjdWM2g0YS41LjUgMCAwIDEgMCAxSDE0bC0uOTI5IDExLjA3N2ExIDEgMCAwIDEtLjk5Ny45MjNIMy45MjZhMSAxIDAgMCAxLS45OTctLjkyM0wyIDRILjVhLjUuNSAwIDAgMSAwLTFoNFpNMy4wMDMgNGg5Ljk5NGwtLjkyMyAxMUgzLjkyNkwzLjAwMyA0Wk0xMC41IDF2MmgtNVYxYzAtLjA0IDUtLjA0IDUgMFpcXFwiIGZpbGw9XFxcIiMwMDBcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCIgZmlsbD1cXFwibm9uZVxcXCIgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIj48cGF0aCBmaWxsLXJ1bGU9XFxcImV2ZW5vZGRcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTggMi4xMjUgMTQuMzM0IDE0SDEuNjY3TDggMi4xMjVabS0uODgyLS40N2ExIDEgMCAwIDEgMS43NjUgMGw2LjMzMyAxMS44NzRBMSAxIDAgMCAxIDE0LjMzNCAxNUgxLjY2N2ExIDEgMCAwIDEtLjg4Mi0xLjQ3TDcuMTE4IDEuNjUzWk04IDQuODc0YS45MDUuOTA1IDAgMCAwLS45Ljk5NWwuMzUgMy41MDdhLjU1Mi41NTIgMCAwIDAgMS4xIDBMOC45IDUuODdhLjkwNS45MDUgMCAwIDAtLjktLjk5NVptMSA3YTEgMSAwIDEgMS0yIDAgMSAxIDAgMCAxIDIgMFpcXFwiIGZpbGw9XFxcIiMwMDBcXFwiPjwvcGF0aD48L3N2Zz5cIiIsImltcG9ydCB7IEltbXV0YWJsZU9iamVjdCB9IGZyb20gJ3NlYW1sZXNzLWltbXV0YWJsZSdcclxuaW1wb3J0IHtcclxuICBJbWFnZVByb3BzLFxyXG4gIEZpbGxUeXBlLFxyXG4gIEltYWdlUGFyYW0sXHJcbiAgQm9yZGVyU3R5bGUsXHJcbiAgRm91clNpZGVzVW5pdCxcclxuICBCb3hTaGFkb3dTdHlsZSxcclxuICBMaW5lYXJVbml0LFxyXG4gIFRleHRBbGlnblZhbHVlXHJcbn0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHsgU3FsRXhwcmVzc2lvbiB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHtcclxuICBTb3J0U2V0dGluZ09wdGlvbixcclxuICBJTUxpbmtQYXJhbVxyXG59IGZyb20gJ2ppbXUtdWkvYWR2YW5jZWQvc2V0dGluZy1jb21wb25lbnRzJ1xyXG5cclxuLy8gVE9ETzogbW92ZSB0byBjb3JlXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSAgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uXHJcbmV4cG9ydCBpbnRlcmZhY2UgZ290b1Byb3BzIHtcclxuICB2aWV3czogc3RyaW5nW11cclxufVxyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvblxyXG5leHBvcnQgaW50ZXJmYWNlIGdvdG9BY3Rpb24ge1xyXG4gIGdvdG86IGdvdG9Qcm9wc1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFN1Z2dlc3Rpb24ge1xyXG4gIHN1Z2dlc3Rpb25IdG1sOiBzdHJpbmcgfCBFbGVtZW50XHJcbiAgc3VnZ2VzdGlvbjogc3RyaW5nXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBMSVNUX0NBUkRfUEFERElORyA9IDBcclxuZXhwb3J0IGNvbnN0IExJU1RfQ0FSRF9NSU5fU0laRSA9IDIwXHJcbmV4cG9ydCBjb25zdCBEU19UT09MX0ggPSA0MlxyXG5leHBvcnQgY29uc3QgQk9UVE9NX1RPT0xfSCA9IDQwXHJcbmV4cG9ydCBjb25zdCBDT01NT05fUEFERElORyA9IDBcclxuZXhwb3J0IGNvbnN0IERTX1RPT0xfQk9UVE9NX1BBRERJTkcgPSAxNFxyXG5leHBvcnQgY29uc3QgQk9UVE9NX1RPT0xfVE9QX1BBRERJTkcgPSAxNFxyXG5leHBvcnQgY29uc3QgTElTVF9UT09MX01JTl9TSVpFX05PX0RBVEFfQUNUSU9OID0gMTc1XHJcbmV4cG9ydCBjb25zdCBMSVNUX1RPT0xfTUlOX1NJWkVfREFUQV9BQ1RJT04gPSAyMjBcclxuZXhwb3J0IGNvbnN0IERFRkFVTFRfQ0FSRF9TSVpFID0gMjAwXHJcbmV4cG9ydCBjb25zdCBERUZBVUxUX1NQQUNFID0gMTBcclxuXHJcbmV4cG9ydCBlbnVtIFNldHRpbmdDb2xsYXBzZVR5cGUge1xyXG4gIE5vbmUgPSAnTk9ORScsXHJcbiAgQXJyYW5nZW1lbnQgPSAnQVJSQU5HRU1FTlQnLFxyXG4gIFN0YXRlcyA9ICdTVEFURVMnLFxyXG4gIFRvb2xzID0gJ1RPT0xTJ1xyXG59XHJcblxyXG5pbnRlcmZhY2UgV2lkZ2V0SGVhZGVyVGl0bGUge1xyXG4gIHRleHQ6IHN0cmluZ1xyXG4gIC8vIEFkZCBjb2xvciwgc2l6ZSwgYWxpZ25tZW50LCBldGMuXHJcbiAgLy8gQWRkIGFuIG9wdGlvbiB0byBiaW5kIHRleHQgdG8gYSBmaWVsZFxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFdpZGdldEhlYWRlciB7XHJcbiAgdGl0bGU6IEltbXV0YWJsZU9iamVjdDxXaWRnZXRIZWFkZXJUaXRsZT5cclxuICAvLyBUT0RPOlxyXG4gIC8vIEFkZCBcImFjdGlvblwiIHN1Y2ggYXMgZmlsdGVyXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgTGlzdERpdlNpemUge1xyXG4gIGNsaWVudFdpZHRoOiBudW1iZXJcclxuICBjbGllbnRIZWlnaHQ6IG51bWJlclxyXG59XHJcblxyXG5pbnRlcmZhY2UgV2lkZ2V0U3R5bGUge1xyXG4gIGlkOiBzdHJpbmdcclxufVxyXG4vLyBFTkQ6IFRPRE9cclxuXHJcbmludGVyZmFjZSBMaXN0SXRlbUNvbXBvbmVudCB7XHJcbiAgZmllbGQ6IHN0cmluZ1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIExpc3RJdGVtVGl0bGVDb21wb25lbnQgZXh0ZW5kcyBMaXN0SXRlbUNvbXBvbmVudCB7fVxyXG5leHBvcnQgaW50ZXJmYWNlIExpc3RJdGVtRGVzY3JpcHRpb25Db21wb25lbnQgZXh0ZW5kcyBMaXN0SXRlbUNvbXBvbmVudCB7fVxyXG5leHBvcnQgaW50ZXJmYWNlIExpc3RJdGVtU2VsZWN0aW9uTW9kZUNvbXBvbmVudCBleHRlbmRzIExpc3RJdGVtQ29tcG9uZW50IHt9XHJcbmV4cG9ydCBpbnRlcmZhY2UgTGlzdEl0ZW1JbWFnZUNvbXBvbmVudCBleHRlbmRzIExpc3RJdGVtQ29tcG9uZW50LCBJbWFnZVByb3BzIHt9XHJcblxyXG5leHBvcnQgZW51bSBMaXN0TGF5b3V0IHtcclxuICBBVVRPID0gJ0F1dG8nLFxyXG4gIENVU1RPTSA9ICdDdXN0b20nXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFNlbGVjdGlvbk1vZGVUeXBlIHtcclxuICBOb25lID0gJ05PTkUnLFxyXG4gIFNpbmdsZSA9ICdTSU5HTEUnLFxyXG4gIE11bHRpcGxlID0gJ01VTFRJUExFJ1xyXG59XHJcblxyXG5leHBvcnQgZW51bSBQYWdlU3R5bGUge1xyXG4gIFNjcm9sbCA9ICdTQ1JPTEwnLFxyXG4gIE11bHRpUGFnZSA9ICdNVUxUSVBBR0UnXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIEFsaWduVHlwZSB7XHJcbiAgU3RhcnQgPSAnRkxFWC1TVEFSVCcsXHJcbiAgQ2VudGVyID0gJ0NFTlRFUicsXHJcbiAgRW5kID0gJ0ZMRVgtRU5EJ1xyXG59XHJcblxyXG5leHBvcnQgZW51bSBEaXJlY3Rpb25UeXBlIHtcclxuICBIb3Jpem9uID0gJ0hPUklaT04nLFxyXG4gIFZlcnRpY2FsID0gJ1ZFUlRJQ0FMJ1xyXG59XHJcblxyXG5leHBvcnQgZW51bSBMaXN0TGF5b3V0VHlwZSB7XHJcbiAgUm93ID0gJ1JPVycsXHJcbiAgQ29sdW1uID0gJ0NPTFVNTicsXHJcbiAgR1JJRCA9ICdHUklEJ1xyXG59XHJcblxyXG5leHBvcnQgZW51bSBQYWdlVHJhbnNpdG9uVHlwZSB7XHJcbiAgR2xpZGUgPSAnR0xJREUnLFxyXG4gIEZhZGUgPSAnRkFERScsXHJcbiAgRmxvYXQgPSAnRkxPQVQnXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIEhvdmVyVHlwZSB7XHJcbiAgSG92ZXIwID0gJ0hPVkVSMCcsXHJcbiAgSG92ZXIxID0gJ0hPVkVSMScsXHJcbiAgSG92ZXIyID0gJ0hPVkVSMicsXHJcbiAgSG92ZXIzID0gJ0hPVkVSMydcclxufVxyXG5cclxuZXhwb3J0IGVudW0gU2VsZWN0ZWRTdHlsZSB7XHJcbiAgU3R5bGUwID0gJ1NUWUxFMCcsXHJcbiAgU3R5bGUxID0gJ1NUWUxFMScsXHJcbiAgU3R5bGUyID0gJ1NUWUxFMicsXHJcbiAgU3R5bGUzID0gJ1NUWUxFMydcclxufVxyXG5cclxuZXhwb3J0IGVudW0gSXRlbVN0eWxlIHtcclxuICBTdHlsZTAgPSAnU1RZTEUwJyxcclxuICBTdHlsZTEgPSAnU1RZTEUxJyxcclxuICBTdHlsZTIgPSAnU1RZTEUyJyxcclxuICBTdHlsZTMgPSAnU1RZTEUzJyxcclxuICBTdHlsZTQgPSAnU1RZTEU0JyxcclxuICBTdHlsZTUgPSAnU1RZTEU1JyxcclxuICBTdHlsZTYgPSAnU1RZTEU2JyxcclxuICBTdHlsZTcgPSAnU1RZTEU3JyxcclxuICBTdHlsZTggPSAnU1RZTEU4JyxcclxuICBTdHlsZTkgPSAnU1RZTEU5J1xyXG59XHJcblxyXG5leHBvcnQgZW51bSBTdGF0dXMge1xyXG4gIFJlZ3VsYXIgPSAnUkVHVUxBUicsXHJcbiAgU2VsZWN0ZWQgPSAnU0VMRUNURUQnLFxyXG4gIEhvdmVyID0gJ0hPVkVSJ1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENhcmRTaXplIHtcclxuICBoZWlnaHQ6IG51bWJlciB8IHN0cmluZ1xyXG4gIHdpZHRoOiBudW1iZXIgfCBzdHJpbmdcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBFbGVtZW50U2l6ZSB7XHJcbiAgaGVpZ2h0OiBudW1iZXJcclxuICB3aWR0aDogbnVtYmVyXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRWxlbWVudFNpemVVbml0IHtcclxuICBoZWlnaHQ6IExpbmVhclVuaXRcclxuICB3aWR0aDogTGluZWFyVW5pdFxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIERldmljZUNhcmRTaXplIHtcclxuICBbZGV2aWNlTW9kZTogc3RyaW5nXTogQ2FyZFNpemVcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBDYXJkQmFja2dyb3VuZFN0eWxlIHtcclxuICBiYWNrZ3JvdW5kOiB7XHJcbiAgICBjb2xvcjogc3RyaW5nXHJcbiAgICBmaWxsVHlwZTogRmlsbFR5cGVcclxuICAgIGltYWdlOiBJbWFnZVBhcmFtXHJcbiAgfVxyXG4gIGJvcmRlcjogQm9yZGVyU3R5bGVcclxuICBib3JkZXJSYWRpdXM6IEZvdXJTaWRlc1VuaXRcclxuICBib3hTaGFkb3c6IEJveFNoYWRvd1N0eWxlXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZENvbmZpZyB7XHJcbiAgYmFja2dyb3VuZFN0eWxlPzogQ2FyZEJhY2tncm91bmRTdHlsZVxyXG4gIGVuYWJsZT86IGJvb2xlYW5cclxuICBzZWxlY3Rpb25Nb2RlPzogU2VsZWN0aW9uTW9kZVR5cGVcclxuICBjYXJkU2l6ZT86IERldmljZUNhcmRTaXplXHJcbiAgbGlzdExheW91dD86IExpc3RMYXlvdXRcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgSU1DYXJkQ29uZmlnID0gSW1tdXRhYmxlT2JqZWN0PENhcmRDb25maWc+XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENvbmZpZyB7XHJcbiAgcGFnZVRyYW5zaXRpb24/OiBQYWdlVHJhbnNpdG9uVHlwZVxyXG4gIGhvdmVyVHlwZT86IEhvdmVyVHlwZVxyXG4gIHNlbGVjdGVkU3R5bGU/OiBTZWxlY3RlZFN0eWxlXHJcbiAgZGlmZmVyZW50T2RkRXZlbj86IGJvb2xlYW5cclxuICBpdGVtU3R5bGU/OiBJdGVtU3R5bGVcclxuICBpc0NoZWNrRW1wdHlUZW1wbGF0ZT86IGJvb2xlYW5cclxuICBpc0l0ZW1TdHlsZUNvbmZpcm0/OiBib29sZWFuXHJcbiAgZGlyZWN0aW9uPzogRGlyZWN0aW9uVHlwZVxyXG4gIGFsaWduVHlwZT86IEFsaWduVHlwZVxyXG4gIHNwYWNlPzogbnVtYmVyXHJcbiAgaG9yaXpvbnRhbFNwYWNlPzogbnVtYmVyXHJcbiAgdmVydGljYWxTcGFjZT86IG51bWJlclxyXG4gIGl0ZW1zUGVyUGFnZT86IG51bWJlclxyXG4gIHBhZ2VTdHlsZT86IFBhZ2VTdHlsZVxyXG4gIHNjcm9sbEJhck9wZW4/OiBib29sZWFuXHJcbiAgbmF2aWdhdG9yT3Blbj86IGJvb2xlYW5cclxuICBzY3JvbGxTdGVwPzogbnVtYmVyXHJcbiAgc3R5bGU/OiBJbW11dGFibGVPYmplY3Q8V2lkZ2V0U3R5bGU+XHJcbiAgaXNJbml0aWFsZWQ/OiBib29sZWFuXHJcbiAgbG9ja0l0ZW1SYXRpbz86IGJvb2xlYW5cclxuICBzaG93U2VsZWN0ZWRPbmx5T3Blbj86IGJvb2xlYW5cclxuICBzaG93Q2xlYXJTZWxlY3RlZD86IGJvb2xlYW5cclxuICBncmlkQWxpZ25tZW50PzogVGV4dEFsaWduVmFsdWVcclxuXHJcbiAgLy8gbGlua1xyXG4gIGxpbmtQYXJhbT86IElNTGlua1BhcmFtXHJcblxyXG4gIC8vIHNlYXJjaFxyXG4gIHNlYXJjaE9wZW4/OiBib29sZWFuXHJcbiAgc2VhcmNoRmllbGRzPzogc3RyaW5nXHJcbiAgc2VhcmNoRXhhY3Q/OiBib29sZWFuXHJcbiAgLy8gZmlsdGVyXHJcbiAgZmlsdGVyT3Blbj86IGJvb2xlYW5cclxuICBmaWx0ZXI/OiBTcWxFeHByZXNzaW9uXHJcbiAgLy8gc29ydFxyXG4gIHNvcnRPcGVuPzogYm9vbGVhblxyXG4gIHNvcnRzPzogU29ydFNldHRpbmdPcHRpb25bXVxyXG5cclxuICAvLyBjYXJkIGJhY2tncm91bmRcclxuICBjYXJkQ29uZmlncz86IEltbXV0YWJsZU9iamVjdDx7IFtzdGF0dXM6IHN0cmluZ106IENhcmRDb25maWcgfT5cclxuICBzZWFyY2hIaW50Pzogc3RyaW5nXHJcblxyXG4gIGlzU2hvd0F1dG9SZWZyZXNoPzogYm9vbGVhblxyXG4gIG5vRGF0YU1lc3NhZ2U/OiBzdHJpbmdcclxuICBsYXlvdXRUeXBlPzogTGlzdExheW91dFR5cGVcclxuICBrZWVwQXNwZWN0UmF0aW8/OiBib29sZWFuXHJcbiAgZ3JpZEl0ZW1TaXplUmF0aW8/OiBudW1iZXJcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgSU1Db25maWcgPSBJbW11dGFibGVPYmplY3Q8Q29uZmlnPlxyXG4iLCJpbXBvcnQgeyBSZWFjdCwgcG9saXNoZWQgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB7IFBhZ2luYXRpb24sIEJ1dHRvbiB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCB7IFBhZ2VTdHlsZSwgTGlzdExheW91dFR5cGUgfSBmcm9tICcuLi8uLi9jb25maWcnXHJcbmltcG9ydCB7IExlZnRPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZGlyZWN0aW9uYWwvbGVmdCdcclxuaW1wb3J0IHsgVXBPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZGlyZWN0aW9uYWwvdXAnXHJcbmltcG9ydCB7IFJpZ2h0T3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL2RpcmVjdGlvbmFsL3JpZ2h0J1xyXG5pbXBvcnQgeyBEb3duT3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL2RpcmVjdGlvbmFsL2Rvd24nXHJcblxyXG5pbnRlcmZhY2UgTGlzdEJvdHRvbVRvb2xQcm9wcyB7XHJcbiAgaXNSVEw6IGJvb2xlYW5cclxuICB0b3RhbFBhZ2U6IG51bWJlclxyXG4gIGN1cnJlbnRQYWdlOiBudW1iZXJcclxuICBwYWdlU3R5bGU6IFBhZ2VTdHlsZVxyXG4gIHNjcm9sbFN0YXR1czogJ3N0YXJ0JyB8ICdlbmQnIHwgJ21pZCdcclxuICBpc0VkaXRpbmc6IGJvb2xlYW5cclxuICBpc1Njcm9sbEVuZDogYm9vbGVhblxyXG4gIHNob3dMb2FkaW5nOiBib29sZWFuXHJcbiAgbGF5b3V0VHlwZTogTGlzdExheW91dFR5cGVcclxuICBoYW5kbGVTY3JvbGxVcDogKGV2dDogUmVhY3QuTW91c2VFdmVudCkgPT4gdm9pZFxyXG4gIGhhbmRsZVNjcm9sbERvd246IChldnQ6IFJlYWN0Lk1vdXNlRXZlbnQpID0+IHZvaWRcclxuICBoYW5kbGVTd2l0Y2hQYWdlOiAocGFnZU51bTogbnVtYmVyKSA9PiB2b2lkXHJcbiAgZm9ybWF0TWVzc2FnZTogKGlkOiBzdHJpbmcsIHZhbHVlcz86IHsgW2tleTogc3RyaW5nXTogYW55IH0pID0+IHN0cmluZ1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gTGlzdEJvdHRvbVRvb2xzIChwcm9wczogTGlzdEJvdHRvbVRvb2xQcm9wcykge1xyXG4gIGNvbnN0IHtcclxuICAgIGlzUlRMLFxyXG4gICAgdG90YWxQYWdlLFxyXG4gICAgcGFnZVN0eWxlLFxyXG4gICAgY3VycmVudFBhZ2UsXHJcbiAgICBzY3JvbGxTdGF0dXMsXHJcbiAgICBpc1Njcm9sbEVuZCxcclxuICAgIGlzRWRpdGluZyxcclxuICAgIHNob3dMb2FkaW5nLFxyXG4gICAgbGF5b3V0VHlwZSxcclxuICAgIGhhbmRsZVNjcm9sbERvd24sXHJcbiAgICBoYW5kbGVTY3JvbGxVcCxcclxuICAgIGhhbmRsZVN3aXRjaFBhZ2UsXHJcbiAgICBmb3JtYXRNZXNzYWdlXHJcbiAgfSA9IHByb3BzXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXYgY2xhc3NOYW1lPSdib3R0b20tdG9vbHMgdy0xMDAgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyIHBsLTIgcHItMic+XHJcbiAgICAgIHtwYWdlU3R5bGUgPT09IFBhZ2VTdHlsZS5NdWx0aVBhZ2VcclxuICAgICAgICA/IChcclxuICAgICAgICAgIDxQYWdpbmF0aW9uXHJcbiAgICAgICAgICAgIHNpemU9J3NtJ1xyXG4gICAgICAgICAgICB0b3RhbFBhZ2U9e3RvdGFsUGFnZX1cclxuICAgICAgICAgICAgY3VycmVudD17Y3VycmVudFBhZ2V9XHJcbiAgICAgICAgICAgIG9uQ2hhbmdlUGFnZT17aGFuZGxlU3dpdGNoUGFnZX1cclxuICAgICAgICAgICAgZGlzYWJsZWQ9e3Nob3dMb2FkaW5nfVxyXG4gICAgICAgICAgLz5cclxuICAgICAgICAgIClcclxuICAgICAgICA6IChcclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkLWZsZXggc2Nyb2xsLW5hdmlnYXRvcic+XHJcbiAgICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgICB0aXRsZT17Zm9ybWF0TWVzc2FnZSgncHJldmlvdXMnKX1cclxuICAgICAgICAgICAgICBkaXNhYmxlZD17c2Nyb2xsU3RhdHVzID09PSAnc3RhcnQnfVxyXG4gICAgICAgICAgICAgIHR5cGU9J3NlY29uZGFyeSdcclxuICAgICAgICAgICAgICBzaXplPSdzbSdcclxuICAgICAgICAgICAgICBpY29uXHJcbiAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlU2Nyb2xsVXB9XHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICB7bGF5b3V0VHlwZSA9PT0gTGlzdExheW91dFR5cGUuQ29sdW1uID8gPExlZnRPdXRsaW5lZCBzaXplPXsxMn0vPiA6IDxVcE91dGxpbmVkIHNpemU9ezEyfS8+fVxyXG4gICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICAgIHRpdGxlPXtmb3JtYXRNZXNzYWdlKCduZXh0Jyl9XHJcbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e3Njcm9sbFN0YXR1cyA9PT0gJ2VuZCcgfHwgaXNTY3JvbGxFbmR9XHJcbiAgICAgICAgICAgICAgdHlwZT0nc2Vjb25kYXJ5J1xyXG4gICAgICAgICAgICAgIHNpemU9J3NtJ1xyXG4gICAgICAgICAgICAgIHN0eWxlPXtcclxuICAgICAgICAgICAgICAgIGlzUlRMXHJcbiAgICAgICAgICAgICAgICAgID8geyBtYXJnaW5SaWdodDogcG9saXNoZWQucmVtKDEwKSB9XHJcbiAgICAgICAgICAgICAgICAgIDogeyBtYXJnaW5MZWZ0OiBwb2xpc2hlZC5yZW0oMTApIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgaWNvblxyXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVNjcm9sbERvd259XHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICB7bGF5b3V0VHlwZSA9PT0gTGlzdExheW91dFR5cGUuQ29sdW1uID8gPFJpZ2h0T3V0bGluZWQvPiA6IDxEb3duT3V0bGluZWQvPn1cclxuICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICl9XHJcbiAgICAgIHt3aW5kb3cuamltdUNvbmZpZy5pc0luQnVpbGRlciAmJiBpc0VkaXRpbmcgJiYgKFxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdlZGl0aW5nLW1hc2stYm90dG9tLXRvb2wnIC8+XHJcbiAgICAgICl9XHJcbiAgICA8L2Rpdj5cclxuICApXHJcbn1cclxuIiwiLyoqIEBqc3gganN4ICovXHJcbmltcG9ydCB7XHJcbiAgUmVhY3QsXHJcbiAganN4LFxyXG4gIElNU3FsRXhwcmVzc2lvbixcclxuICBEYXRhU291cmNlLFxyXG4gIElNVGhlbWVWYXJpYWJsZXMsXHJcbiAgcG9saXNoZWQsXHJcbiAgY3NzLFxyXG4gIEFwcE1vZGUsXHJcbiAgU2VyaWFsaXplZFN0eWxlc1xyXG59IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHsgQnV0dG9uLCBQb3BwZXIgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgeyBTcWxFeHByZXNzaW9uUnVudGltZSB9IGZyb20gJ2ppbXUtdWkvYmFzaWMvc3FsLWV4cHJlc3Npb24tcnVudGltZSdcclxuaW1wb3J0IHsgRnJhZ21lbnQgfSBmcm9tICdyZWFjdCdcclxuaW1wb3J0IHsgV2lkZ2V0RmlsdGVyT3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL2JyYW5kL3dpZGdldC1maWx0ZXInXHJcbmltcG9ydCB7IFJlc2V0T3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL2VkaXRvci9yZXNldCdcclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBhcHBNb2RlOiBBcHBNb2RlXHJcbiAgZmlsdGVyOiBJTVNxbEV4cHJlc3Npb25cclxuICBmaWx0ZXJJbkNvbmZpZzogSU1TcWxFeHByZXNzaW9uXHJcbiAgc2VsZWN0ZWREczogRGF0YVNvdXJjZVxyXG4gIHdpZGdldElkOiBzdHJpbmdcclxuICB0aXRsZTogc3RyaW5nXHJcbiAgYXBwbGllZDogYm9vbGVhblxyXG4gIGhhbmRsZUZpbHRlckNoYW5nZTogKHNxbEV4cHJPYmo6IElNU3FsRXhwcmVzc2lvbikgPT4gdm9pZFxyXG4gIGhhbmRsZUZpbHRlckFwcGx5Q2hhbmdlOiAoYXBwbHk6IGJvb2xlYW4pID0+IHZvaWRcclxuICBmb3JtYXRNZXNzYWdlOiAoaWQ6IHN0cmluZywgdmFsdWVzPzogeyBba2V5OiBzdHJpbmddOiBhbnkgfSkgPT4gc3RyaW5nXHJcbiAgdGhlbWU6IElNVGhlbWVWYXJpYWJsZXNcclxufVxyXG5cclxuaW50ZXJmYWNlIFN0YXRzIHtcclxuICBpc09wZW46IGJvb2xlYW5cclxuICBjdXJyZW50RmlsdGVyOiBJTVNxbEV4cHJlc3Npb25cclxufVxyXG5cclxuY29uc3QgcG9wcGVyT2Zmc2V0ID0gWzAsIDVdXHJcbmNvbnN0IHBvcHBlck1vZGlmaWVycyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiAnZmxpcCcsXHJcbiAgICBvcHRpb25zOiB7XHJcbiAgICAgIGJvdW5kYXJ5OiBkb2N1bWVudC5ib2R5LFxyXG4gICAgICBmYWxsYmFja1BsYWNlbWVudHM6IFsnYm90dG9tLXN0YXJ0JywgJ3JpZ2h0LWVuZCcsICd0b3Atc3RhcnQnLCAnbGVmdC1zdGFydCddXHJcbiAgICB9XHJcbiAgfVxyXG5dXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZpbHRlclBpY2tlciBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8UHJvcHMsIFN0YXRzPiB7XHJcbiAgdG9nZ2xlUmVmOiBSZWFjdC5SZWZPYmplY3Q8SFRNTEJ1dHRvbkVsZW1lbnQ+XHJcblxyXG4gIGNvbnN0cnVjdG9yIChwcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpXHJcblxyXG4gICAgdGhpcy50b2dnbGVSZWYgPSBSZWFjdC5jcmVhdGVSZWYoKVxyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgaXNPcGVuOiBmYWxzZSxcclxuICAgICAgY3VycmVudEZpbHRlcjogcHJvcHMuZmlsdGVyXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnREaWRVcGRhdGUgKHByZVByb3BzOiBQcm9wcykge1xyXG4gICAgY29uc3QgeyBmaWx0ZXIsIGFwcE1vZGUgfSA9IHRoaXMucHJvcHNcclxuICAgIGlmIChmaWx0ZXIgIT09IHByZVByb3BzLmZpbHRlcikge1xyXG4gICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICBjdXJyZW50RmlsdGVyOiBmaWx0ZXJcclxuICAgICAgfSlcclxuICAgIH1cclxuICAgIGlmIChhcHBNb2RlICE9PSBwcmVQcm9wcy5hcHBNb2RlKSB7XHJcbiAgICAgIGlmIChhcHBNb2RlID09PSBBcHBNb2RlLkRlc2lnbikge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgaXNPcGVuOiBmYWxzZVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZvcm1hdE1lc3NhZ2UgPSAoaWQ6IHN0cmluZywgdmFsdWVzPzogeyBba2V5OiBzdHJpbmddOiBhbnkgfSkgPT4ge1xyXG4gICAgcmV0dXJuIHRoaXMucHJvcHMuZm9ybWF0TWVzc2FnZShpZCwgdmFsdWVzKVxyXG4gIH1cclxuXHJcbiAgb25Qb3BwZXJUb2dnbGUgPSBldnQgPT4ge1xyXG4gICAgY29uc3QgeyBmaWx0ZXIgfSA9IHRoaXMucHJvcHNcclxuICAgIGNvbnN0IHsgaXNPcGVuIH0gPSB0aGlzLnN0YXRlXHJcbiAgICBpZiAoIWlzT3Blbikge1xyXG4gICAgICAvLyB3aWxsIG9wZW5cclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgY3VycmVudEZpbHRlcjogZmlsdGVyXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgICB0aGlzLnNldFN0YXRlKHsgaXNPcGVuOiAhaXNPcGVuIH0pXHJcbiAgfVxyXG5cclxuICBvbkl0ZW1DbGljayA9IChldnQsIGl0ZW0pID0+IHtcclxuICAgIHRoaXMuc2V0U3RhdGUoeyBpc09wZW46IGZhbHNlIH0pXHJcbiAgICBldnQuc3RvcFByb3BhZ2F0aW9uKClcclxuICAgIGV2dC5uYXRpdmVFdmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlRmlsdGVyQ2hhbmdlID0gKHNxbEV4cHJPYmo6IElNU3FsRXhwcmVzc2lvbikgPT4ge1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIGN1cnJlbnRGaWx0ZXI6IHNxbEV4cHJPYmpcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBoYW5kbGVBcHBseUNsaWNrID0gZXZ0ID0+IHtcclxuICAgIGNvbnN0IHsgY3VycmVudEZpbHRlciB9ID0gdGhpcy5zdGF0ZVxyXG4gICAgY29uc3QgeyBoYW5kbGVGaWx0ZXJBcHBseUNoYW5nZSwgaGFuZGxlRmlsdGVyQ2hhbmdlIH0gPSB0aGlzLnByb3BzXHJcbiAgICBoYW5kbGVGaWx0ZXJDaGFuZ2UoY3VycmVudEZpbHRlcilcclxuICAgIGhhbmRsZUZpbHRlckFwcGx5Q2hhbmdlKHRydWUpXHJcbiAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgaXNPcGVuOiBmYWxzZVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGhhbmRsZVJlc2V0Q2xpY2sgPSBldnQgPT4ge1xyXG4gICAgY29uc3QgeyBoYW5kbGVGaWx0ZXJBcHBseUNoYW5nZSwgaGFuZGxlRmlsdGVyQ2hhbmdlIH0gPSB0aGlzLnByb3BzXHJcbiAgICBoYW5kbGVGaWx0ZXJBcHBseUNoYW5nZShmYWxzZSlcclxuICAgIGhhbmRsZUZpbHRlckNoYW5nZSh0aGlzLnByb3BzLmZpbHRlckluQ29uZmlnKVxyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIGN1cnJlbnRGaWx0ZXI6IHRoaXMucHJvcHMuZmlsdGVySW5Db25maWdcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBoYW5kbGVDbGVhckNsaWNrID0gZXZ0ID0+IHtcclxuICAgIGNvbnN0IHsgaGFuZGxlRmlsdGVyQXBwbHlDaGFuZ2UgfSA9IHRoaXMucHJvcHNcclxuICAgIGhhbmRsZUZpbHRlckFwcGx5Q2hhbmdlKGZhbHNlKVxyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIGlzT3BlbjogZmFsc2VcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBnZXRTdHlsZSA9ICgpOiBTZXJpYWxpemVkU3R5bGVzID0+IHtcclxuICAgIGNvbnN0IHsgdGhlbWUgfSA9IHRoaXMucHJvcHNcclxuICAgIHJldHVybiBjc3NgXHJcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgICAgLmRvdCB7XHJcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgIHdpZHRoOiA2cHg7XHJcbiAgICAgICAgaGVpZ2h0OiA2cHg7XHJcbiAgICAgICAgcmlnaHQ6IC0ycHg7XHJcbiAgICAgICAgdG9wOiAwcHg7XHJcbiAgICAgICAgLmRvdC1ib3R0b20ge1xyXG4gICAgICAgICAgd2lkdGg6IDZweDtcclxuICAgICAgICAgIGhlaWdodDogNnB4O1xyXG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XHJcbiAgICAgICAgICAuZG90LXRvcCB7XHJcbiAgICAgICAgICAgIHdpZHRoOiA0cHg7XHJcbiAgICAgICAgICAgIGhlaWdodDogNHB4O1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3RoZW1lLmNvbG9ycy5wYWxldHRlLmRhcmtbNjAwXX07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIDpob3ZlciB7XHJcbiAgICAgICAgLmRvdC10b3Age1xyXG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt0aGVtZS5jb2xvcnMucGFsZXR0ZS5wcmltYXJ5WzUwMF19O1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICAmIC5hY3RpdmUge1xyXG4gICAgICAgIC5kb3QtdG9wIHtcclxuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7dGhlbWUuY29sb3JzLndoaXRlfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgOmhvdmVyIHtcclxuICAgICAgICAgIC5kb3QtdG9wIHtcclxuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt0aGVtZS5jb2xvcnMud2hpdGV9O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgYFxyXG4gIH1cclxuXHJcbiAgZ2V0UG9wcGVyU3R5bGUgPSAoKSA9PiB7XHJcbiAgICByZXR1cm4gY3NzYFxyXG4gICAgICAuZmlsdGVyLWJ1dHRvbi1jb24gIHtcclxuICAgICAgICAmIHtcclxuICAgICAgICAgIHRleHQtYWxpZ246IHJpZ2h0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBidXR0b24ge1xyXG4gICAgICAgICAgbWF4LXdpZHRoOiAke3BvbGlzaGVkLnJlbSg5Mil9O1xyXG4gICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICAgICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBidXR0b24gc3ZnIHtcclxuICAgICAgICAgIG1hcmdpbi1yaWdodDogMCAhaW1wb3J0YW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICAucmVzZXQtYnV0dG9uIHtcclxuICAgICAgICAgIHBhZGRpbmctbGVmdDogJHtwb2xpc2hlZC5yZW0oNSl9O1xyXG4gICAgICAgICAgcGFkZGluZy1yaWdodDogJHtwb2xpc2hlZC5yZW0oNSl9O1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICAuY2xlYXItYnV0dG9uLCAucmVzZXQtYnV0dG9uIHtcclxuICAgICAgICBtYXJnaW4tbGVmdDogJHtwb2xpc2hlZC5yZW0oOCl9O1xyXG4gICAgICB9XHJcbiAgICBgXHJcbiAgfVxyXG5cclxuICByZW5kZXIgKCkge1xyXG4gICAgY29uc3QgeyBmaWx0ZXIsIHNlbGVjdGVkRHMsIHdpZGdldElkLCB0aXRsZSwgYXBwbGllZCB9ID0gdGhpcy5wcm9wc1xyXG4gICAgY29uc3QgeyBpc09wZW4sIGN1cnJlbnRGaWx0ZXIgfSA9IHRoaXMuc3RhdGVcclxuICAgIGNvbnN0IGlzSGFkQXBwbHkgPSBhcHBsaWVkICYmIGZpbHRlcj8uc3FsID09PSBjdXJyZW50RmlsdGVyPy5zcWxcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxGcmFnbWVudD5cclxuICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICBjc3M9e3RoaXMuZ2V0U3R5bGUoKX1cclxuICAgICAgICAgIHNpemU9J3NtJ1xyXG4gICAgICAgICAgdHlwZT0ndGVydGlhcnknXHJcbiAgICAgICAgICBpY29uXHJcbiAgICAgICAgICB0aXRsZT17dGl0bGV9XHJcbiAgICAgICAgICByZWY9e3RoaXMudG9nZ2xlUmVmfVxyXG4gICAgICAgICAgb25DbGljaz17dGhpcy5vblBvcHBlclRvZ2dsZX1cclxuICAgICAgICA+XHJcbiAgICAgICAgICA8V2lkZ2V0RmlsdGVyT3V0bGluZWQgc2l6ZT17MTZ9Lz5cclxuICAgICAgICAgIHthcHBsaWVkICYmIChcclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2RvdCBhbGlnbi1pdGVtcy1jZW50ZXIganVzdGlmeS1jb250ZW50LWNlbnRlcic+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2RvdC1ib3R0b20gcm91bmRlZC1jaXJjbGUnPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2RvdC10b3Agcm91bmRlZC1jaXJjbGUnIC8+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgKX1cclxuICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICA8UG9wcGVyXHJcbiAgICAgICAgICBwbGFjZW1lbnQ9J2JvdHRvbS1zdGFydCdcclxuICAgICAgICAgIHJlZmVyZW5jZT17dGhpcy50b2dnbGVSZWYuY3VycmVudH1cclxuICAgICAgICAgIG9mZnNldD17cG9wcGVyT2Zmc2V0fVxyXG4gICAgICAgICAgdG9nZ2xlPXt0aGlzLm9uUG9wcGVyVG9nZ2xlfVxyXG4gICAgICAgICAgY3NzPXt0aGlzLmdldFBvcHBlclN0eWxlKCl9XHJcbiAgICAgICAgICBvcGVuPXtpc09wZW59XHJcbiAgICAgICAgICBtb2RpZmllcnM9e3BvcHBlck1vZGlmaWVyc31cclxuICAgICAgICA+XHJcbiAgICAgICAgICA8ZGl2IHN0eWxlPXt7IHBhZGRpbmc6IHBvbGlzaGVkLnJlbSgyMCksIHdpZHRoOiBwb2xpc2hlZC5yZW0oMjUwKSB9fT5cclxuICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICA8U3FsRXhwcmVzc2lvblJ1bnRpbWVcclxuICAgICAgICAgICAgICAgIHdpZGdldElkPXt3aWRnZXRJZH1cclxuICAgICAgICAgICAgICAgIGRhdGFTb3VyY2U9e3NlbGVjdGVkRHN9XHJcbiAgICAgICAgICAgICAgICBleHByZXNzaW9uPXtjdXJyZW50RmlsdGVyfVxyXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlRmlsdGVyQ2hhbmdlfVxyXG4gICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndy0xMDAgbXQtMyBmaWx0ZXItYnV0dG9uLWNvbic+XHJcbiAgICAgICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzSGFkQXBwbHl9XHJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmhhbmRsZUFwcGx5Q2xpY2t9XHJcbiAgICAgICAgICAgICAgICB0eXBlPSdwcmltYXJ5J1xyXG4gICAgICAgICAgICAgICAgdGl0bGU9e3RoaXMuZm9ybWF0TWVzc2FnZSgnYXBwbHknKX1cclxuICAgICAgICAgICAgICAgIHNpemU9J3NtJ1xyXG4gICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIHt0aGlzLmZvcm1hdE1lc3NhZ2UoJ2FwcGx5Jyl9XHJcbiAgICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9eyFhcHBsaWVkfVxyXG4gICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5oYW5kbGVDbGVhckNsaWNrfVxyXG4gICAgICAgICAgICAgICAgdGl0bGU9e3RoaXMuZm9ybWF0TWVzc2FnZSgnY29tbW9uTW9kYWxDYW5jZWwnKX1cclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImNsZWFyLWJ1dHRvblwiXHJcbiAgICAgICAgICAgICAgICBzaXplPSdzbSdcclxuICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICB7dGhpcy5mb3JtYXRNZXNzYWdlKCdjb21tb25Nb2RhbENhbmNlbCcpfVxyXG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuaGFuZGxlUmVzZXRDbGlja31cclxuICAgICAgICAgICAgICAgIHRpdGxlPXt0aGlzLmZvcm1hdE1lc3NhZ2UoJ3Jlc2V0RmlsdGVycycpfVxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicmVzZXQtYnV0dG9uXCJcclxuICAgICAgICAgICAgICAgIHNpemU9J3NtJ1xyXG4gICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIDxSZXNldE91dGxpbmVkIHNpemU9J3MnLz5cclxuICAgICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L1BvcHBlcj5cclxuICAgICAgPC9GcmFnbWVudD5cclxuICAgIClcclxuICB9XHJcbn1cclxuIiwiLyoqIEBqc3gganN4ICovXHJcbmltcG9ydCB7XHJcbiAgUmVhY3QsXHJcbiAgY3NzLFxyXG4gIElNVGhlbWVWYXJpYWJsZXMsXHJcbiAgUmVwZWF0ZWREYXRhU291cmNlLFxyXG4gIEFwcE1vZGUsXHJcbiAgQnJvd3NlclNpemVNb2RlLFxyXG4gIERhdGFSZWNvcmQsXHJcbiAgcG9saXNoZWRcclxufSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB7IFN0YXR1cywgTGlzdExheW91dFR5cGUgfSBmcm9tICcuLi8uLi9jb25maWcnXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIExpc3RDYXJkUHJvcHMge1xyXG4gIGlzSG92ZXI6IGJvb2xlYW5cclxuICBpc1Njcm9sbGluZzogYm9vbGVhblxyXG4gIHRoZW1lOiBJTVRoZW1lVmFyaWFibGVzXHJcbiAgaW5kZXg6IG51bWJlclxyXG4gIHdpZGdldElkOiBzdHJpbmdcclxuICByZWNvcmQ6IERhdGFSZWNvcmRcclxuICBkYXRhc291cmNlSWQ6IHN0cmluZ1xyXG4gIGxpc3RTdHlsZTogYW55XHJcbiAgbGF5b3V0czogYW55XHJcbiAgc3BhY2U6IG51bWJlclxyXG4gIGFjdGl2ZTogYm9vbGVhblxyXG4gIHNlbGVjdGFibGU6IGJvb2xlYW5cclxuICBob3ZlckxheW91dE9wZW46IGJvb2xlYW5cclxuICBicm93c2VyU2l6ZU1vZGU6IEJyb3dzZXJTaXplTW9kZVxyXG4gIGxheW91dFR5cGU6IExpc3RMYXlvdXRUeXBlXHJcbiAgZm9ybWF0TWVzc2FnZTogKGlkOiBzdHJpbmcsIHZhbHVlcz86IHsgW2tleTogc3RyaW5nXTogYW55IH0pID0+IHN0cmluZ1xyXG4gIGFwcE1vZGU6IEFwcE1vZGVcclxuICBvbkNoYW5nZTogKGl0ZW1SZWNvcmQ6IERhdGFSZWNvcmQpID0+IHZvaWRcclxuICBjYXJkQ29uZmlncz86IGFueVxyXG4gIGl0ZW1JZGV4OiBudW1iZXJcclxuICBoYW5kbGVMaXN0TW91c2VNb3ZlOiAoaXRlbUluZGV4OiBudW1iZXIpID0+IHZvaWRcclxuICBoYW5kbGVMaXN0TW91c2VMZWF2ZTogKCkgPT4gdm9pZFxyXG4gIHVwZGF0ZUNhcmRUb29sUG9zaXRpb246ICgpID0+IHZvaWRcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBMaXN0Q2FyZFN0YXRlcyB7XHJcbiAgW2tleTogc3RyaW5nXTogYW55XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExpc3RDYXJkPFxyXG4gIFAgZXh0ZW5kcyBMaXN0Q2FyZFByb3BzID0gTGlzdENhcmRQcm9wcyxcclxuICBTIGV4dGVuZHMgTGlzdENhcmRTdGF0ZXMgPSBMaXN0Q2FyZFN0YXRlc1xyXG4+IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFAsIFM+IHtcclxuICBwcm92aWRlckRhdGE6IFJlcGVhdGVkRGF0YVNvdXJjZVxyXG5cclxuICBnZXROZXdQcm92aWRlckRhdGEgPSAoKSA9PiB7XHJcbiAgICBjb25zdCB7IHdpZGdldElkLCBkYXRhc291cmNlSWQsIGluZGV4LCByZWNvcmQgfSA9IHRoaXMucHJvcHNcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHdpZGdldElkOiB3aWRnZXRJZCxcclxuICAgICAgZGF0YVNvdXJjZUlkOiBkYXRhc291cmNlSWQsXHJcbiAgICAgIHJlY29yZEluZGV4OiBpbmRleCxcclxuICAgICAgcmVjb3JkOiByZWNvcmRcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNob3VsZENvbXBvbmVudFVwZGF0ZUV4Y2VwdCA9IChcclxuICAgIG5leHRQcm9wcyxcclxuICAgIG5leHRTdGF0cyxcclxuICAgIGV4Y2VwdFByb3BLZXlzOiBzdHJpbmdbXSxcclxuICAgIGV4Y2VwdFN0YXRLZXlzOiBzdHJpbmdbXSA9IFtdXHJcbiAgKSA9PiB7XHJcbiAgICBsZXQgc2hvdWxkVXBkYXRlID0gZmFsc2VcclxuICAgIHRoaXMucHJvcHMgJiZcclxuICAgICAgT2JqZWN0LmtleXModGhpcy5wcm9wcykuc29tZShrZXkgPT4ge1xyXG4gICAgICAgIGlmIChleGNlcHRQcm9wS2V5cy5pbmNsdWRlcyhrZXkpKSByZXR1cm4gZmFsc2VcclxuICAgICAgICBpZiAodGhpcy5wcm9wc1trZXldICE9PSBuZXh0UHJvcHNba2V5XSkge1xyXG4gICAgICAgICAgLy8gY29uc29sZS5sb2coYHByb3BzIGhhcyBjaGFuZ2VkOiAke2tleX1gKVxyXG4gICAgICAgICAgc2hvdWxkVXBkYXRlID0gdHJ1ZVxyXG4gICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgdGhpcy5zdGF0ZSAmJlxyXG4gICAgICBPYmplY3Qua2V5cyh0aGlzLnN0YXRlKS5zb21lKGtleSA9PiB7XHJcbiAgICAgICAgaWYgKGV4Y2VwdFN0YXRLZXlzLmluY2x1ZGVzKGtleSkpIHJldHVybiBmYWxzZVxyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlW2tleV0gIT09IG5leHRTdGF0c1trZXldKSB7XHJcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgc3RhdGVzIGhhcyBjaGFuZ2VkOiAke2tleX1gKVxyXG4gICAgICAgICAgc2hvdWxkVXBkYXRlID0gdHJ1ZVxyXG4gICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG5cclxuICAgIHJldHVybiBzaG91bGRVcGRhdGVcclxuICB9XHJcblxyXG4gIGlzUHJvdmlkZXJFcXVhbCA9IChcclxuICAgIHByb3ZpZGVyRGF0YTogUmVwZWF0ZWREYXRhU291cmNlLFxyXG4gICAgb2xkUHJvdmlkZXJEYXRhOiBSZXBlYXRlZERhdGFTb3VyY2VcclxuICApOiBib29sZWFuID0+IHtcclxuICAgIGxldCBpc0VxdWFsID0gdHJ1ZVxyXG4gICAgaWYgKHByb3ZpZGVyRGF0YSkge1xyXG4gICAgICBPYmplY3Qua2V5cyhwcm92aWRlckRhdGEpLnNvbWUoa2V5ID0+IHtcclxuICAgICAgICBpZiAoIW9sZFByb3ZpZGVyRGF0YSkge1xyXG4gICAgICAgICAgaXNFcXVhbCA9IGZhbHNlXHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBkYXRhID0gcHJvdmlkZXJEYXRhW2tleV1cclxuICAgICAgICBjb25zdCBvbGREYXRhID0gb2xkUHJvdmlkZXJEYXRhW2tleV1cclxuICAgICAgICBpZiAoZGF0YSAhPT0gb2xkRGF0YSkge1xyXG4gICAgICAgICAgaXNFcXVhbCA9IGZhbHNlXHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgfSlcclxuICAgIH0gZWxzZSBpZiAob2xkUHJvdmlkZXJEYXRhKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBpc0VxdWFsXHJcbiAgfVxyXG5cclxuICBmb3JtYXRNZXNzYWdlID0gKGlkOiBzdHJpbmcsIHZhbHVlcz86IHsgW2tleTogc3RyaW5nXTogYW55IH0pID0+IHtcclxuICAgIHJldHVybiB0aGlzLnByb3BzLmZvcm1hdE1lc3NhZ2UoaWQsIHZhbHVlcylcclxuICB9XHJcblxyXG4gIGNoZWNrSXNCYWNrZ3JvdW5kVHJhbnNwYXJlbnQgKHN0YXR1czogU3RhdHVzKTogYm9vbGVhbiB7XHJcbiAgICBjb25zdCB7IGNhcmRDb25maWdzIH0gPSB0aGlzLnByb3BzXHJcbiAgICByZXR1cm4gY2FyZENvbmZpZ3M/LltzdGF0dXNdPy5iYWNrZ3JvdW5kU3R5bGU/LmJhY2tncm91bmQ/LmNvbG9yID09PSAncmdiYSgwLDAsMCwwKSdcclxuICB9XHJcblxyXG4gIGdldFN0eWxlID0gKHN0YXR1czogU3RhdHVzKSA9PiB7XHJcbiAgICBjb25zdCB7IHdpZGdldElkLCBzZWxlY3RhYmxlLCBhcHBNb2RlLCB0aGVtZSB9ID0gdGhpcy5wcm9wc1xyXG4gICAgY29uc3QgaXNCYWNrZ3JvdW5kVHJhbnNwYXJlbnQgPSB0aGlzLmNoZWNrSXNCYWNrZ3JvdW5kVHJhbnNwYXJlbnQoc3RhdHVzKVxyXG4gICAgcmV0dXJuIGNzc2BcclxuICAgICAgJHsnJi5saXN0LWNhcmQtJyArIHdpZGdldElkfSB7XHJcbiAgICAgICAgcGFkZGluZzogMDtcclxuICAgICAgICBib3JkZXI6IDA7XHJcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XHJcbiAgICAgICAgJjpmb2N1cyB7XHJcbiAgICAgICAgICBvdXRsaW5lOiAke3BvbGlzaGVkLnJlbSgyKX0gc29saWQgJHt0aGVtZS5jb2xvcnMucGFsZXR0ZS5wcmltYXJ5WzcwMF19O1xyXG4gICAgICAgICAgb3V0bGluZS1vZmZzZXQ6ICR7cG9saXNoZWQucmVtKDIpfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLmxpc3QtY2FyZC1jb250ZW50IHtcclxuICAgICAgICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgICAgICAgaGVpZ2h0OiAxMDAlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICAmLnN1cmZhY2UtMSB7XHJcbiAgICAgICAgYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgYmFja2dyb3VuZDogJHtpc0JhY2tncm91bmRUcmFuc3BhcmVudCAmJiAnbm9uZSAhaW1wb3J0YW50J307XHJcbiAgICAgIH1cclxuICAgICAgLmxpc3QtY2xlYXItYmFja2dyb3VuZCB7XHJcbiAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQgIWltcG9ydGFudDtcclxuICAgICAgfVxyXG4gICAgICAubGlzdC1saW5rIHtcclxuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgICAgbGVmdDogMDtcclxuICAgICAgICB0b3A6IDA7XHJcbiAgICAgICAgcmlnaHQ6IDA7XHJcbiAgICAgICAgYm90dG9tOiAwO1xyXG4gICAgICB9XHJcbiAgICAgIC5saXN0LWl0ZW0tY29uIHtcclxuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gICAgICB9XHJcbiAgICAgICR7JyYubGlzdC1jYXJkLScgKyB3aWRnZXRJZH06aG92ZXIge1xyXG4gICAgICAgICR7KCF3aW5kb3cuamltdUNvbmZpZy5pc0luQnVpbGRlciB8fCBhcHBNb2RlID09PSBBcHBNb2RlLlJ1bikgJiZcclxuICAgICAgICBzZWxlY3RhYmxlXHJcbiAgICAgICAgICA/ICdjdXJzb3I6IHBvaW50ZXI7J1xyXG4gICAgICAgICAgOiAnJ31cclxuICAgICAgfVxyXG4gICAgICAuY2FyZC1lZGl0b3ItbWFzayB7XHJcbiAgICAgICAgdG9wOiAwO1xyXG4gICAgICAgIGJvdHRvbTogMDtcclxuICAgICAgICBsZWZ0OiAwO1xyXG4gICAgICAgIHJpZ2h0OiAwO1xyXG4gICAgICAgIHotaW5kZXg6IDEwMDtcclxuICAgICAgfVxyXG4gICAgICAuamltdS1saW5rIHtcclxuICAgICAgICB0ZXh0LWFsaWduOiBsZWZ0O1xyXG4gICAgICB9XHJcbiAgICBgXHJcbiAgfVxyXG59XHJcbiIsIi8qKiBAanN4IGpzeCAqL1xyXG5pbXBvcnQge1xyXG4gIFJlYWN0LFxyXG4gIFJlcGVhdGVkRGF0YVNvdXJjZVByb3ZpZGVyLFxyXG4gIGpzeCxcclxuICBjc3MsXHJcbiAgSU1UaGVtZVZhcmlhYmxlcyxcclxuICBBcHBNb2RlLFxyXG4gIExheW91dEluZm8sXHJcbiAgdXRpbHMsXHJcbiAgTGF5b3V0SXRlbVR5cGUsXHJcbiAgYXBwQWN0aW9ucyxcclxuICBJbW11dGFibGUsXHJcbiAgSW1tdXRhYmxlQXJyYXksXHJcbiAgTGF5b3V0SXRlbUNvbnN0cnVjdG9yUHJvcHMsXHJcbiAgUmVhY3RSZWR1eCxcclxuICBJTVN0YXRlLFxyXG4gIGNsYXNzTmFtZXNcclxufSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB7IExpc3RHcm91cEl0ZW0sIHN0eWxlVXRpbHMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQge1xyXG4gIENhcmRTaXplLFxyXG4gIFN0YXR1cyxcclxuICBTZWxlY3Rpb25Nb2RlVHlwZSxcclxuICBMSVNUX0NBUkRfTUlOX1NJWkUsXHJcbiAgTGlzdExheW91dCxcclxuICBMaXN0TGF5b3V0VHlwZSxcclxuICBJTUNhcmRDb25maWdcclxufSBmcm9tICcuLi8uLi9jb25maWcnXHJcbmltcG9ydCB7IHNlYXJjaFV0aWxzIH0gZnJvbSAnamltdS1sYXlvdXRzL2xheW91dC1ydW50aW1lJ1xyXG5pbXBvcnQgeyBNeURyb3BEb3duSXRlbSB9IGZyb20gJy4vbXktZHJvcGRvd24nXHJcbmltcG9ydCBMaXN0Q2FyZCwgeyBMaXN0Q2FyZFByb3BzLCBMaXN0Q2FyZFN0YXRlcyB9IGZyb20gJy4vbGlzdC1jYXJkLWJhc2UnXHJcblxyXG5pbXBvcnQgeyBTeW5jT25PdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZWRpdG9yL3N5bmMtb24nXHJcbmltcG9ydCB7IFN5bmNPZmZPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZWRpdG9yL3N5bmMtb2ZmJ1xyXG5cclxuY29uc3QgY29ybmVyU2l6ZSA9IDEyXHJcbmNvbnN0IGNvcm5lclBvc2l0aW9uID0gLTEwXHJcbmNvbnN0IHNpZGVTaXplID0gMTZcclxuY29uc3Qgc2lkZVBvc2l0aW9uID0gLTEwXHJcbmNvbnN0IHppbmRleEhhbmRsZSA9IDIwXHJcblxyXG5pbnRlcmZhY2UgRXh0cmFQcm9wcyB7XHJcbiAgc2VsZWN0aW9uOiBMYXlvdXRJbmZvXHJcbiAgc2hvd0JyZWFrOiBib29sZWFuXHJcbiAgaG9yaXpvbnRhbFNwYWNlPzogbnVtYmVyXHJcbiAgaXNXaWR0aFBlcmNlbnRhZ2U/OiBib29sZWFuXHJcbn1cclxuXHJcbmNvbnN0IHN0YXRlc1BvcHBlck9mZnNldCA9IFswLCA1XVxyXG5jb25zdCBzdGF0ZXNNb2RpZmllcnMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogJ2ZsaXAnLFxyXG4gICAgb3B0aW9uczoge1xyXG4gICAgICBib3VuZGFyeTogZG9jdW1lbnQuYm9keSxcclxuICAgICAgZmFsbGJhY2tQbGFjZW1lbnRzOiBbJ3JpZ2h0LXN0YXJ0JywgJ2xlZnQtc3RhcnQnLCAnYm90dG9tLXN0YXJ0JywgJ3RvcC1lbmQnLCAndG9wLXN0YXJ0J11cclxuICAgIH1cclxuICB9XHJcbl1cclxuY29uc3QgYXBwbHlQb3BwZXJNb2RpZmllcnMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogJ29mZnNldCcsXHJcbiAgICBvcHRpb25zOiB7XHJcbiAgICAgIG9mZnNldDogWzAsIDEwXVxyXG4gICAgfVxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogJ2Fycm93JyxcclxuICAgIGVuYWJsZWQ6IHRydWVcclxuICB9XHJcbl1cclxuXHJcbmludGVyZmFjZSBMaXN0Q2FyZEVkaXRvclByb3BzIGV4dGVuZHMgTGlzdENhcmRQcm9wcyB7XHJcbiAgYnVpbGRlclN1cHBvcnRNb2R1bGVzPzogYW55XHJcbiAgaXNFZGl0aW5nPzogYm9vbGVhblxyXG4gIExheW91dEVudHJ5PzogYW55XHJcbiAgc2VsZWN0aW9uSXNMaXN0PzogYm9vbGVhblxyXG4gIHNlbGVjdGlvbklzSW5MaXN0PzogYm9vbGVhblxyXG4gIGJ1aWxkZXJTdGF0dXM/OiBTdGF0dXNcclxuICBpbnRlcmFjdD86IGFueVxyXG4gIGRpc3BhdGNoPzogYW55XHJcbiAgaXNSVEw/OiBib29sZWFuXHJcbiAgbG9ja0l0ZW1SYXRpbz86IGJvb2xlYW5cclxuICBrZWVwQXNwZWN0UmF0aW8/OiBib29sZWFuXHJcbiAgZ3JpZEl0ZW1TaXplUmF0aW8/OiBudW1iZXJcclxuICBoaWRlQ2FyZFRvb2w/OiBib29sZWFuXHJcbiAgY2FyZENvbmZpZ3M/OiBJTUNhcmRDb25maWdcclxuICBjaGFuZ2VJc1Jlc2l6aW5nQ2FyZDogKGlzUmVzaXppbmc6IGJvb2xlYW4pID0+IHZvaWRcclxuICBoYW5kbGVSZXNpemVDYXJkPzogKFxyXG4gICAgbmV3Q2FyZFNpemU6IENhcmRTaXplLFxyXG4gICAgcmVzaXplRW5kPzogYm9vbGVhbixcclxuICAgIGlzTGVmdD86IGJvb2xlYW4sXHJcbiAgICBpc1RvcD86IGJvb2xlYW4sXHJcbiAgICBpc0VuZD86IGJvb2xlYW5cclxuICApID0+IHZvaWRcclxuICBzZWxlY3RDYXJkPzogKCkgPT4gdm9pZFxyXG59XHJcblxyXG5pbnRlcmZhY2UgTGlzdENhcmRFZGl0b3JTdGF0ZXMgZXh0ZW5kcyBMaXN0Q2FyZFN0YXRlcyB7XHJcbiAgZGlkTW91bnQ6IGJvb2xlYW5cclxufVxyXG5cclxuY2xhc3MgX0xpc3RDYXJkRWRpdG9yIGV4dGVuZHMgTGlzdENhcmQ8XHJcbkxpc3RDYXJkRWRpdG9yUHJvcHMgJiBFeHRyYVByb3BzLFxyXG5MaXN0Q2FyZEVkaXRvclN0YXRlc1xyXG4+IHtcclxuICBpbnRlcmFjdGFibGU6IEludGVyYWN0LkludGVyYWN0YWJsZVxyXG4gIHJlc2l6ZVJlZjogUmVhY3QuUmVmT2JqZWN0PEhUTUxEaXZFbGVtZW50PlxyXG4gIGxhc3RSZXNpemVDYWxsID0gbnVsbFxyXG5cclxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKVxyXG5cclxuICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIGRpZE1vdW50OiBmYWxzZVxyXG4gICAgfVxyXG4gICAgdGhpcy5yZXNpemVSZWYgPSBSZWFjdC5jcmVhdGVSZWYoKVxyXG5cclxuICAgIHRoaXMucHJvdmlkZXJEYXRhID0gdGhpcy5nZXROZXdQcm92aWRlckRhdGEoKVxyXG4gIH1cclxuXHJcbiAgc2hvdWxkQ29tcG9uZW50VXBkYXRlIChuZXh0UHJvcHMsIG5leHRTdGF0cykge1xyXG4gICAgbGV0IHNob3VsZFVwZGF0ZSA9IHRoaXMuc2hvdWxkQ29tcG9uZW50VXBkYXRlRXhjZXB0KG5leHRQcm9wcywgbmV4dFN0YXRzLCBbXHJcbiAgICAgICdsaXN0U3R5bGUnLFxyXG4gICAgICAnc2VsZWN0aW9uJ1xyXG4gICAgXSlcclxuICAgIHNob3VsZFVwZGF0ZSA9XHJcbiAgICAgIHNob3VsZFVwZGF0ZSB8fFxyXG4gICAgICAhdXRpbHMuaXNEZWVwRXF1YWwodGhpcy5wcm9wcy5saXN0U3R5bGUsIG5leHRQcm9wcy5saXN0U3R5bGUpXHJcbiAgICBpZiAoIXNob3VsZFVwZGF0ZSkge1xyXG4gICAgICBjb25zdCB7IHNlbGVjdGlvbklzSW5MaXN0LCBzZWxlY3Rpb25Jc0xpc3QgfSA9IHRoaXMucHJvcHNcclxuICAgICAgaWYgKHNlbGVjdGlvbklzTGlzdCB8fCBzZWxlY3Rpb25Jc0luTGlzdCkge1xyXG4gICAgICAgIHNob3VsZFVwZGF0ZSA9ICF1dGlscy5pc0RlZXBFcXVhbChcclxuICAgICAgICAgIHRoaXMucHJvcHMuc2VsZWN0aW9uLFxyXG4gICAgICAgICAgbmV4dFByb3BzLnNlbGVjdGlvblxyXG4gICAgICAgIClcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHNob3VsZFVwZGF0ZVxyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50RGlkVXBkYXRlIChwcmVQcm9wcykge1xyXG4gICAgY29uc3Qge1xyXG4gICAgICBzZWxlY3Rpb25Jc0luTGlzdCxcclxuICAgICAgaXNFZGl0aW5nLFxyXG4gICAgICBsYXlvdXRUeXBlLFxyXG4gICAgICBpc1JUTCxcclxuICAgICAgbG9ja0l0ZW1SYXRpbyxcclxuICAgICAga2VlcEFzcGVjdFJhdGlvLFxyXG4gICAgICBpbmRleFxyXG4gICAgfSA9IHRoaXMucHJvcHNcclxuICAgIGlmICh3aW5kb3cuamltdUNvbmZpZy5pc0luQnVpbGRlciAmJiBpbmRleCA9PT0gMCkge1xyXG4gICAgICBpZiAodGhpcy5pbnRlcmFjdGFibGUpIHtcclxuICAgICAgICBpZiAoaXNFZGl0aW5nICYmICFzZWxlY3Rpb25Jc0luTGlzdCkge1xyXG4gICAgICAgICAgaWYgKGxheW91dFR5cGUgPT09IExpc3RMYXlvdXRUeXBlLkdSSUQpIHtcclxuICAgICAgICAgICAgdGhpcy5pbnRlcmFjdGFibGUucmVzaXphYmxlKHtcclxuICAgICAgICAgICAgICBlZGdlczoge1xyXG4gICAgICAgICAgICAgICAgdG9wOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGxlZnQ6IGlzUlRMLFxyXG4gICAgICAgICAgICAgICAgYm90dG9tOiAha2VlcEFzcGVjdFJhdGlvLFxyXG4gICAgICAgICAgICAgICAgcmlnaHQ6ICFpc1JUTFxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgdGhpcy5pbnRlcmFjdGFibGUucmVzaXphYmxlKHRydWUpXHJcbiAgICAgICAgICB9IGVsc2UgaWYgKCFsb2NrSXRlbVJhdGlvKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW50ZXJhY3RhYmxlLnJlc2l6YWJsZSh7XHJcbiAgICAgICAgICAgICAgZWRnZXM6IHtcclxuICAgICAgICAgICAgICAgIHRvcDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBsZWZ0OiBsYXlvdXRUeXBlID09PSBMaXN0TGF5b3V0VHlwZS5Db2x1bW4gJiYgaXNSVEwsXHJcbiAgICAgICAgICAgICAgICBib3R0b206IGxheW91dFR5cGUgPT09IExpc3RMYXlvdXRUeXBlLlJvdyxcclxuICAgICAgICAgICAgICAgIHJpZ2h0OiBsYXlvdXRUeXBlID09PSBMaXN0TGF5b3V0VHlwZS5Db2x1bW4gJiYgIWlzUlRMXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB0aGlzLmludGVyYWN0YWJsZS5yZXNpemFibGUodHJ1ZSlcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5pbnRlcmFjdGFibGUucmVzaXphYmxlKGZhbHNlKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50RGlkTW91bnQgKCkge1xyXG4gICAgY29uc3QgeyBpbmRleCwgbGF5b3V0VHlwZSwgdXBkYXRlQ2FyZFRvb2xQb3NpdGlvbiwga2VlcEFzcGVjdFJhdGlvIH0gPSB0aGlzLnByb3BzXHJcbiAgICBpZiAoXHJcbiAgICAgIGluZGV4ID09PSAwICYmXHJcbiAgICAgIHdpbmRvdy5qaW11Q29uZmlnLmlzSW5CdWlsZGVyICYmXHJcbiAgICAgIHRoaXMucmVzaXplUmVmLmN1cnJlbnRcclxuICAgICkge1xyXG4gICAgICBjb25zdCB7IGludGVyYWN0LCBoYW5kbGVSZXNpemVDYXJkLCBpc1JUTCB9ID0gdGhpcy5wcm9wc1xyXG4gICAgICB0aGlzLmludGVyYWN0YWJsZSA9IGludGVyYWN0KHRoaXMucmVzaXplUmVmLmN1cnJlbnQpLnJlc2l6YWJsZSh7XHJcbiAgICAgICAgLy8gcmVzaXplIGZyb20gYWxsIGVkZ2VzIGFuZCBjb3JuZXJzXHJcbiAgICAgICAgZWRnZXM6IHtcclxuICAgICAgICAgIHRvcDogZmFsc2UsXHJcbiAgICAgICAgICBsZWZ0OiAobGF5b3V0VHlwZSA9PT0gTGlzdExheW91dFR5cGUuQ29sdW1uIHx8IGxheW91dFR5cGUgPT09IExpc3RMYXlvdXRUeXBlLkdSSUQpICYmIGlzUlRMLFxyXG4gICAgICAgICAgYm90dG9tOiAobGF5b3V0VHlwZSA9PT0gTGlzdExheW91dFR5cGUuUm93IHx8IChsYXlvdXRUeXBlID09PSBMaXN0TGF5b3V0VHlwZS5HUklEICYmICFrZWVwQXNwZWN0UmF0aW8pKSxcclxuICAgICAgICAgIHJpZ2h0OiAobGF5b3V0VHlwZSA9PT0gTGlzdExheW91dFR5cGUuQ29sdW1uIHx8IGxheW91dFR5cGUgPT09IExpc3RMYXlvdXRUeXBlLkdSSUQpICYmICFpc1JUTFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbW9kaWZpZXJzOiBbXHJcbiAgICAgICAgICAvLyBrZWVwIHRoZSBlZGdlcyBpbnNpZGUgdGhlIHBhcmVudFxyXG4gICAgICAgICAgaW50ZXJhY3QubW9kaWZpZXJzLnJlc3RyaWN0RWRnZXMoe1xyXG4gICAgICAgICAgICBlbmRPbmx5OiB0cnVlXHJcbiAgICAgICAgICB9KSxcclxuXHJcbiAgICAgICAgICAvLyBtaW5pbXVtIHNpemVcclxuICAgICAgICAgIGludGVyYWN0Lm1vZGlmaWVycy5yZXN0cmljdFNpemUoe1xyXG4gICAgICAgICAgICBtaW46IHsgd2lkdGg6IExJU1RfQ0FSRF9NSU5fU0laRSwgaGVpZ2h0OiBMSVNUX0NBUkRfTUlOX1NJWkUgfVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICBdLFxyXG4gICAgICAgIGluZXJ0aWE6IGZhbHNlLFxyXG4gICAgICAgIG9uc3RhcnQ6IChldmVudDogSW50ZXJhY3QuSW50ZXJhY3RFdmVudCkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgeyBjaGFuZ2VJc1Jlc2l6aW5nQ2FyZCB9ID0gdGhpcy5wcm9wc1xyXG4gICAgICAgICAgaWYgKGNoYW5nZUlzUmVzaXppbmdDYXJkKSB7XHJcbiAgICAgICAgICAgIGNoYW5nZUlzUmVzaXppbmdDYXJkKHRydWUpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb25tb3ZlOiAoZXZlbnQ6IEludGVyYWN0LlJlc2l6ZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxyXG5cclxuICAgICAgICAgIGlmICh0aGlzLmxhc3RSZXNpemVDYWxsKSB7XHJcbiAgICAgICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMubGFzdFJlc2l6ZUNhbGwpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBjb25zdCByZWN0ID0gZXZlbnQucmVjdFxyXG4gICAgICAgICAgY29uc3QgbmV3Q2FyZFNpemUgPSB0aGlzLmdldE5ld0NhcmRTaXplKHJlY3QsIHRydWUpXHJcbiAgICAgICAgICB1cGRhdGVDYXJkVG9vbFBvc2l0aW9uKClcclxuICAgICAgICAgIHRoaXMubGFzdFJlc2l6ZUNhbGwgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBlZGdlcyA9IHt9IGFzIGFueSAvLyBldmVudC5pbnRlcmFjdGlvbi5lZGdlcztcclxuICAgICAgICAgICAgaGFuZGxlUmVzaXplQ2FyZChuZXdDYXJkU2l6ZSwgZmFsc2UsIGVkZ2VzLnRvcCwgZWRnZXMubGVmdClcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfSxcclxuICAgICAgICBvbmVuZDogKGV2ZW50OiBJbnRlcmFjdC5SZXNpemVFdmVudCkgPT4ge1xyXG4gICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcclxuICAgICAgICAgIGlmICh0aGlzLmxhc3RSZXNpemVDYWxsKSB7XHJcbiAgICAgICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMubGFzdFJlc2l6ZUNhbGwpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aGlzLmxhc3RSZXNpemVDYWxsID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmVjdCA9IGV2ZW50LnJlY3RcclxuICAgICAgICAgICAgY29uc3QgbmV3Q2FyZFNpemUgPSB0aGlzLmdldE5ld0NhcmRTaXplKHJlY3QpXHJcbiAgICAgICAgICAgIGhhbmRsZVJlc2l6ZUNhcmQobmV3Q2FyZFNpemUsIHRydWUpXHJcbiAgICAgICAgICAgIGNvbnN0IHsgY2hhbmdlSXNSZXNpemluZ0NhcmQgfSA9IHRoaXMucHJvcHNcclxuICAgICAgICAgICAgaWYgKGNoYW5nZUlzUmVzaXppbmdDYXJkKSB7XHJcbiAgICAgICAgICAgICAgY2hhbmdlSXNSZXNpemluZ0NhcmQoZmFsc2UpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIGRpZE1vdW50OiB0cnVlXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgZ2V0TmV3Q2FyZFNpemUgPSAocmVjdCwgaXNSZXNpemluZzogYm9vbGVhbiA9IGZhbHNlKSA9PiB7XHJcbiAgICBjb25zdCB7IGtlZXBBc3BlY3RSYXRpbywgbGF5b3V0VHlwZSwgZ3JpZEl0ZW1TaXplUmF0aW8sIGhvcml6b250YWxTcGFjZSwgaXNXaWR0aFBlcmNlbnRhZ2UgfSA9IHRoaXMucHJvcHNcclxuICAgIGxldCBuZXdDYXJkU2l6ZVxyXG4gICAgbGV0IHdpZHRoID0gcmVjdC5yaWdodCAtIHJlY3QubGVmdFxyXG4gICAgaWYgKCFpc1Jlc2l6aW5nICYmIGlzV2lkdGhQZXJjZW50YWdlKSB7XHJcbiAgICAgIHdpZHRoID0gcmVjdC5yaWdodCAtIHJlY3QubGVmdCArIGhvcml6b250YWxTcGFjZVxyXG4gICAgfVxyXG4gICAgaWYgKGxheW91dFR5cGUgPT09IExpc3RMYXlvdXRUeXBlLkdSSUQgJiYga2VlcEFzcGVjdFJhdGlvKSB7XHJcbiAgICAgIG5ld0NhcmRTaXplID0ge1xyXG4gICAgICAgIHdpZHRoOiB3aWR0aCxcclxuICAgICAgICBoZWlnaHQ6IHdpZHRoICogZ3JpZEl0ZW1TaXplUmF0aW9cclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbmV3Q2FyZFNpemUgPSB7XHJcbiAgICAgICAgd2lkdGg6IHdpZHRoLFxyXG4gICAgICAgIGhlaWdodDogcmVjdC5ib3R0b20gLSByZWN0LnRvcFxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3Q2FyZFNpemVcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudFdpbGxVbk1vdW50ICgpIHtcclxuICAgIGlmICh0aGlzLmxhc3RSZXNpemVDYWxsKSB7XHJcbiAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMubGFzdFJlc2l6ZUNhbGwpXHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5pbnRlcmFjdGFibGUpIHtcclxuICAgICAgdGhpcy5pbnRlcmFjdGFibGUudW5zZXQoKVxyXG4gICAgICB0aGlzLmludGVyYWN0YWJsZSA9IG51bGxcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGhhbmRsZUl0ZW1DbGljayA9IGV2dCA9PiB7XHJcbiAgICBjb25zdCB7IHNlbGVjdENhcmQgfSA9IHRoaXMucHJvcHNcclxuICAgIGlmIChldnQpIHtcclxuICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpXHJcbiAgICB9XHJcbiAgICBzZWxlY3RDYXJkKClcclxuICB9XHJcblxyXG4gIGhhbmRsZUNvcHlUbyA9IChldnQsIHN0YXR1czogU3RhdHVzLCBzZWxlY3RlZExheW91dEl0ZW0sIGxpbmtlZDogYm9vbGVhbikgPT4ge1xyXG4gICAgaWYgKCFzZWxlY3RlZExheW91dEl0ZW0pIHJldHVyblxyXG4gICAgY29uc3Qge1xyXG4gICAgICBsYXlvdXRzLFxyXG4gICAgICBidWlsZGVyU3VwcG9ydE1vZHVsZXMsXHJcbiAgICAgIGJyb3dzZXJTaXplTW9kZSxcclxuICAgICAgYnVpbGRlclN0YXR1c1xyXG4gICAgfSA9IHRoaXMucHJvcHNcclxuICAgIGNvbnN0IGFjdGlvbiA9IGJ1aWxkZXJTdXBwb3J0TW9kdWxlcy5qaW11Rm9yQnVpbGRlckxpYi5nZXRBcHBDb25maWdBY3Rpb24oKVxyXG4gICAgY29uc3QgYXBwQ29uZmlnID0gYWN0aW9uLmFwcENvbmZpZ1xyXG4gICAgY29uc3Qgb3JpZ2luTGF5b3V0SWQgPSBzZWFyY2hVdGlscy5maW5kTGF5b3V0SWQoXHJcbiAgICAgIGxheW91dHNbYnVpbGRlclN0YXR1c10sXHJcbiAgICAgIGJyb3dzZXJTaXplTW9kZSxcclxuICAgICAgYXBwQ29uZmlnLm1haW5TaXplTW9kZVxyXG4gICAgKVxyXG4gICAgY29uc3QgZGVzTGF5b3V0SWQgPSBzZWFyY2hVdGlscy5maW5kTGF5b3V0SWQoXHJcbiAgICAgIGxheW91dHNbc3RhdHVzXSxcclxuICAgICAgYnJvd3NlclNpemVNb2RlLFxyXG4gICAgICBhcHBDb25maWcubWFpblNpemVNb2RlXHJcbiAgICApXHJcbiAgICBpZiAobGlua2VkKSB7XHJcbiAgICAgIGNvbnN0IHNlYXJjaFV0aWxzID0gYnVpbGRlclN1cHBvcnRNb2R1bGVzLndpZGdldE1vZHVsZXMuc2VhcmNoVXRpbHNcclxuICAgICAgY29uc3QgbGF5b3V0SXRlbSA9IHNlYXJjaFV0aWxzLmdldENvbnRhaW5lckxheW91dEl0ZW0oXHJcbiAgICAgICAgYXBwQ29uZmlnLmxheW91dHNbZGVzTGF5b3V0SWRdLFxyXG4gICAgICAgIHNlbGVjdGVkTGF5b3V0SXRlbS53aWRnZXRJZCxcclxuICAgICAgICBMYXlvdXRJdGVtVHlwZS5XaWRnZXRcclxuICAgICAgKVxyXG4gICAgICAhIWxheW91dEl0ZW0gJiZcclxuICAgICAgICBhY3Rpb24ucmVtb3ZlTGF5b3V0SXRlbShcclxuICAgICAgICAgIHsgbGF5b3V0SWQ6IGRlc0xheW91dElkLCBsYXlvdXRJdGVtSWQ6IGxheW91dEl0ZW0uaWQgfSxcclxuICAgICAgICAgIGZhbHNlXHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG4gICAgYWN0aW9uLmR1cGxpY2F0ZUxheW91dEl0ZW0oXHJcbiAgICAgIG9yaWdpbkxheW91dElkLFxyXG4gICAgICBkZXNMYXlvdXRJZCxcclxuICAgICAgc2VsZWN0ZWRMYXlvdXRJdGVtLmlkLFxyXG4gICAgICBmYWxzZSxcclxuICAgICAgbGlua2VkXHJcbiAgICApXHJcbiAgICBhY3Rpb24uZXhlYygpXHJcbiAgICBldnQuc3RvcFByb3BhZ2F0aW9uKClcclxuICAgIGV2dC5uYXRpdmVFdmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKVxyXG4gIH1cclxuXHJcbiAgZWRpdFN0YXR1cyA9IChuYW1lLCB2YWx1ZSkgPT4ge1xyXG4gICAgY29uc3QgeyBkaXNwYXRjaCwgd2lkZ2V0SWQgfSA9IHRoaXMucHJvcHNcclxuICAgIGRpc3BhdGNoKGFwcEFjdGlvbnMud2lkZ2V0U3RhdGVQcm9wQ2hhbmdlKHdpZGdldElkLCBuYW1lLCB2YWx1ZSkpXHJcbiAgfVxyXG5cclxuICBoYW5kbGVCdWlsZGVyU3RhdHVzQ2hhbmdlIChldnQsIHN0YXR1cykge1xyXG4gICAgdGhpcy5lZGl0U3RhdHVzKCdzaG93Q2FyZFNldHRpbmcnLCBzdGF0dXMpXHJcbiAgICB0aGlzLmVkaXRTdGF0dXMoJ2J1aWxkZXJTdGF0dXMnLCBzdGF0dXMpXHJcblxyXG4gICAgY29uc3QgeyBzZWxlY3RDYXJkIH0gPSB0aGlzLnByb3BzXHJcbiAgICBzZWxlY3RDYXJkKClcclxuXHJcbiAgICBldnQuc3RvcFByb3BhZ2F0aW9uKClcclxuICAgIGV2dC5uYXRpdmVFdmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlQnJlYWtMaW5rID0gZXZ0ID0+IHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgbGF5b3V0cyxcclxuICAgICAgYnVpbGRlclN1cHBvcnRNb2R1bGVzLFxyXG4gICAgICBicm93c2VyU2l6ZU1vZGUsXHJcbiAgICAgIHNlbGVjdGlvbixcclxuICAgICAgYnVpbGRlclN0YXR1cyxcclxuICAgICAgZGlzcGF0Y2hcclxuICAgIH0gPSB0aGlzLnByb3BzXHJcbiAgICBjb25zdCBhY3Rpb24gPSBidWlsZGVyU3VwcG9ydE1vZHVsZXMuamltdUZvckJ1aWxkZXJMaWIuZ2V0QXBwQ29uZmlnQWN0aW9uKClcclxuICAgIGNvbnN0IGFwcENvbmZpZyA9IGFjdGlvbi5hcHBDb25maWdcclxuICAgIGNvbnN0IHNlbGVjdGVkTGF5b3V0SXRlbSA9IHNlYXJjaFV0aWxzLmZpbmRMYXlvdXRJdGVtKGFwcENvbmZpZywgc2VsZWN0aW9uKVxyXG4gICAgaWYgKCFzZWxlY3RlZExheW91dEl0ZW0pIHJldHVyblxyXG4gICAgY29uc3QgY3VycmVudExheW91dElkID0gc2VhcmNoVXRpbHMuZmluZExheW91dElkKFxyXG4gICAgICBsYXlvdXRzW2J1aWxkZXJTdGF0dXNdLFxyXG4gICAgICBicm93c2VyU2l6ZU1vZGUsXHJcbiAgICAgIGFwcENvbmZpZy5tYWluU2l6ZU1vZGVcclxuICAgIClcclxuICAgIGFjdGlvbi5kdXBsaWNhdGVMYXlvdXRJdGVtKFxyXG4gICAgICBjdXJyZW50TGF5b3V0SWQsXHJcbiAgICAgIGN1cnJlbnRMYXlvdXRJZCxcclxuICAgICAgc2VsZWN0ZWRMYXlvdXRJdGVtLmlkLFxyXG4gICAgICB0cnVlXHJcbiAgICApXHJcbiAgICBhY3Rpb24ucmVtb3ZlTGF5b3V0SXRlbShcclxuICAgICAgeyBsYXlvdXRJZDogY3VycmVudExheW91dElkLCBsYXlvdXRJdGVtSWQ6IHNlbGVjdGVkTGF5b3V0SXRlbS5pZCB9LFxyXG4gICAgICBmYWxzZVxyXG4gICAgKVxyXG4gICAgYWN0aW9uLmV4ZWMoKVxyXG5cclxuICAgIGlmIChcclxuICAgICAgc2VsZWN0aW9uLmxheW91dElkID09PSBjdXJyZW50TGF5b3V0SWQgJiZcclxuICAgICAgc2VsZWN0aW9uLmxheW91dEl0ZW1JZCA9PT0gc2VsZWN0ZWRMYXlvdXRJdGVtLmlkXHJcbiAgICApIHtcclxuICAgICAgZGlzcGF0Y2goYXBwQWN0aW9ucy5zZWxlY3Rpb25DaGFuZ2VkKG51bGwpKVxyXG4gICAgfVxyXG4gICAgY29uc3QgY29udGVudCA9IGFjdGlvbi5hcHBDb25maWcubGF5b3V0c1tjdXJyZW50TGF5b3V0SWRdLmNvbnRlbnRcclxuICAgIGNvbnN0IG5ld0l0ZW1LZXkgPSBPYmplY3Qua2V5cyhjb250ZW50KVtPYmplY3Qua2V5cyhjb250ZW50KS5sZW5ndGggLSAxXVxyXG4gICAgaWYgKG5ld0l0ZW1LZXkpIHtcclxuICAgICAgY29uc3QgbmV3SXRlbSA9IGNvbnRlbnRbbmV3SXRlbUtleV1cclxuICAgICAgZGlzcGF0Y2goXHJcbiAgICAgICAgYXBwQWN0aW9ucy5zZWxlY3Rpb25DaGFuZ2VkKHtcclxuICAgICAgICAgIGxheW91dElkOiBjdXJyZW50TGF5b3V0SWQsXHJcbiAgICAgICAgICBsYXlvdXRJdGVtSWQ6IG5ld0l0ZW0uaWRcclxuICAgICAgICB9KVxyXG4gICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpXHJcbiAgICBldnQubmF0aXZlRXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKClcclxuICB9XHJcblxyXG4gIHByaXZhdGUgcmVhZG9ubHkgZ2V0Q29weURyb3Bkb3duSXRlbXMgPSAoXHJcbiAgICBzaG93QnJlYWs6IGJvb2xlYW5cclxuICApOiB7IGl0ZW1zOiBJbW11dGFibGVBcnJheTxNeURyb3BEb3duSXRlbT4sIHRpdGxlOiBzdHJpbmcgfSA9PiB7XHJcbiAgICBjb25zdCB7XHJcbiAgICAgIGNhcmRDb25maWdzLFxyXG4gICAgICBsYXlvdXRzLFxyXG4gICAgICBicm93c2VyU2l6ZU1vZGUsXHJcbiAgICAgIHNlbGVjdGlvbixcclxuICAgICAgYnVpbGRlclN0YXR1cyxcclxuICAgICAgYnVpbGRlclN1cHBvcnRNb2R1bGVzXHJcbiAgICB9ID0gdGhpcy5wcm9wc1xyXG4gICAgY29uc3QgYWN0aW9uID0gYnVpbGRlclN1cHBvcnRNb2R1bGVzLmppbXVGb3JCdWlsZGVyTGliLmdldEFwcENvbmZpZ0FjdGlvbigpXHJcbiAgICBjb25zdCBhcHBDb25maWcgPSBhY3Rpb24uYXBwQ29uZmlnXHJcbiAgICBjb25zdCBzZWxlY3RlZExheW91dEl0ZW0gPSBzZWFyY2hVdGlscy5maW5kTGF5b3V0SXRlbShhcHBDb25maWcsIHNlbGVjdGlvbilcclxuICAgIGlmICghc2VsZWN0aW9uIHx8ICFzZWxlY3RlZExheW91dEl0ZW0gfHwgIXdpbmRvdy5qaW11Q29uZmlnLmlzSW5CdWlsZGVyKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgaXRlbXM6IEltbXV0YWJsZShbXSksXHJcbiAgICAgICAgdGl0bGU6ICcnXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IGl0ZW1zID0gW10gYXMgYW55XHJcbiAgICBsZXQgdGl0bGUgPSAnJ1xyXG4gICAgbGV0IGxpbmtlZFRvUmVndWxhciA9IHRydWVcclxuICAgIGxldCBsaW5rZWRUb1NlbGVjdCA9XHJcbiAgICAgIGNhcmRDb25maWdzW1N0YXR1cy5TZWxlY3RlZF0uc2VsZWN0aW9uTW9kZSAhPT0gU2VsZWN0aW9uTW9kZVR5cGUuTm9uZVxyXG4gICAgbGV0IGxpbmtlZFRvSG92ZXIgPSAhIWNhcmRDb25maWdzW1N0YXR1cy5Ib3Zlcl0uZW5hYmxlXHJcbiAgICBjb25zdCBpc1dpZGdldEluTGF5b3V0ID0gKGxheW91dElkOiBzdHJpbmcsIHdpZGdldElkOiBzdHJpbmcpOiBib29sZWFuID0+IHtcclxuICAgICAgY29uc3Qgc2VhcmNoVXRpbHMgPSBidWlsZGVyU3VwcG9ydE1vZHVsZXMud2lkZ2V0TW9kdWxlcy5zZWFyY2hVdGlsc1xyXG4gICAgICBjb25zdCB3aWRnZXRzID0gc2VhcmNoVXRpbHMuZ2V0Q29udGVudHNJbkxheW91dFdpdGhSZWNydXNpdmVMYXlvdXRzKFxyXG4gICAgICAgIGFwcENvbmZpZyxcclxuICAgICAgICBsYXlvdXRJZCxcclxuICAgICAgICBMYXlvdXRJdGVtVHlwZS5XaWRnZXQsXHJcbiAgICAgICAgYnJvd3NlclNpemVNb2RlXHJcbiAgICAgIClcclxuICAgICAgcmV0dXJuIHdpZGdldHMuaW5kZXhPZih3aWRnZXRJZCkgPiAtMVxyXG4gICAgfVxyXG4gICAgY29uc3QgaXNTaG93QXBwbHlUb0hvdmVyID0gY2FyZENvbmZpZ3NbU3RhdHVzLkhvdmVyXT8ubGlzdExheW91dCAhPT0gTGlzdExheW91dD8uQVVUT1xyXG4gICAgY29uc3QgaXNTaG93QXBwbHlUb1NlbGVjdGVkID0gY2FyZENvbmZpZ3NbU3RhdHVzLlNlbGVjdGVkXT8ubGlzdExheW91dCAhPT0gTGlzdExheW91dD8uQVVUT1xyXG5cclxuICAgIGNvbnN0IHN5bmNUb0hvdmVyID0gKCkgPT4ge1xyXG4gICAgICBpZiAoY2FyZENvbmZpZ3NbU3RhdHVzLkhvdmVyXS5lbmFibGUpIHtcclxuICAgICAgICBjb25zdCBsYXlvdXRJZCA9IHNlYXJjaFV0aWxzLmZpbmRMYXlvdXRJZChcclxuICAgICAgICAgIGxheW91dHNbU3RhdHVzLkhvdmVyXSxcclxuICAgICAgICAgIGJyb3dzZXJTaXplTW9kZSxcclxuICAgICAgICAgIGFwcENvbmZpZy5tYWluU2l6ZU1vZGVcclxuICAgICAgICApXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgIWlzV2lkZ2V0SW5MYXlvdXQoXHJcbiAgICAgICAgICAgIGxheW91dElkLFxyXG4gICAgICAgICAgICBhcHBDb25maWcubGF5b3V0c1tzZWxlY3Rpb24ubGF5b3V0SWRdLmNvbnRlbnRbXHJcbiAgICAgICAgICAgICAgc2VsZWN0aW9uLmxheW91dEl0ZW1JZFxyXG4gICAgICAgICAgICBdLndpZGdldElkXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICBsaW5rZWRUb0hvdmVyID0gZmFsc2VcclxuICAgICAgICB9XHJcbiAgICAgICAgaXRlbXMucHVzaCh7XHJcbiAgICAgICAgICBsYWJlbDogdGhpcy5mb3JtYXRNZXNzYWdlKCdhcHBseVRvJywge1xyXG4gICAgICAgICAgICBzdGF0dXM6IHRoaXMuZm9ybWF0TWVzc2FnZSgnaG92ZXInKS50b0xvY2FsZUxvd2VyQ2FzZSgpXHJcbiAgICAgICAgICB9KSxcclxuICAgICAgICAgIGV2ZW50OiBldnQgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZUNvcHlUbyhcclxuICAgICAgICAgICAgICBldnQsXHJcbiAgICAgICAgICAgICAgU3RhdHVzLkhvdmVyLFxyXG4gICAgICAgICAgICAgIHNlbGVjdGVkTGF5b3V0SXRlbSxcclxuICAgICAgICAgICAgICBsaW5rZWRUb0hvdmVyXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc3luY1RvU2VsZWN0ZWQgPSAoKSA9PiB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICBjYXJkQ29uZmlnc1tTdGF0dXMuU2VsZWN0ZWRdLnNlbGVjdGlvbk1vZGUgIT09IFNlbGVjdGlvbk1vZGVUeXBlLk5vbmVcclxuICAgICAgKSB7XHJcbiAgICAgICAgY29uc3QgbGF5b3V0SWQgPSBzZWFyY2hVdGlscy5maW5kTGF5b3V0SWQoXHJcbiAgICAgICAgICBsYXlvdXRzW1N0YXR1cy5TZWxlY3RlZF0sXHJcbiAgICAgICAgICBicm93c2VyU2l6ZU1vZGUsXHJcbiAgICAgICAgICBhcHBDb25maWcubWFpblNpemVNb2RlXHJcbiAgICAgICAgKVxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICFpc1dpZGdldEluTGF5b3V0KFxyXG4gICAgICAgICAgICBsYXlvdXRJZCxcclxuICAgICAgICAgICAgYXBwQ29uZmlnLmxheW91dHNbc2VsZWN0aW9uLmxheW91dElkXS5jb250ZW50W1xyXG4gICAgICAgICAgICAgIHNlbGVjdGlvbi5sYXlvdXRJdGVtSWRcclxuICAgICAgICAgICAgXS53aWRnZXRJZFxyXG4gICAgICAgICAgKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgbGlua2VkVG9TZWxlY3QgPSBmYWxzZVxyXG4gICAgICAgIH1cclxuICAgICAgICBpdGVtcy5wdXNoKHtcclxuICAgICAgICAgIGxhYmVsOiB0aGlzLmZvcm1hdE1lc3NhZ2UoJ2FwcGx5VG8nLCB7XHJcbiAgICAgICAgICAgIHN0YXR1czogdGhpcy5mb3JtYXRNZXNzYWdlKCdzZWxlY3RlZCcpLnRvTG9jYWxlTG93ZXJDYXNlKClcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgZXZlbnQ6IGV2dCA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlQ29weVRvKFxyXG4gICAgICAgICAgICAgIGV2dCxcclxuICAgICAgICAgICAgICBTdGF0dXMuU2VsZWN0ZWQsXHJcbiAgICAgICAgICAgICAgc2VsZWN0ZWRMYXlvdXRJdGVtLFxyXG4gICAgICAgICAgICAgIGxpbmtlZFRvU2VsZWN0XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc3luY1RvUmVndWxhciA9ICgpID0+IHtcclxuICAgICAgY29uc3QgbGF5b3V0SWQgPSBzZWFyY2hVdGlscy5maW5kTGF5b3V0SWQoXHJcbiAgICAgICAgbGF5b3V0c1tTdGF0dXMuUmVndWxhcl0sXHJcbiAgICAgICAgYnJvd3NlclNpemVNb2RlLFxyXG4gICAgICAgIGFwcENvbmZpZy5tYWluU2l6ZU1vZGVcclxuICAgICAgKVxyXG4gICAgICBpZiAoXHJcbiAgICAgICAgIWlzV2lkZ2V0SW5MYXlvdXQoXHJcbiAgICAgICAgICBsYXlvdXRJZCxcclxuICAgICAgICAgIGFwcENvbmZpZy5sYXlvdXRzW3NlbGVjdGlvbi5sYXlvdXRJZF0uY29udGVudFtzZWxlY3Rpb24ubGF5b3V0SXRlbUlkXVxyXG4gICAgICAgICAgICAud2lkZ2V0SWRcclxuICAgICAgICApXHJcbiAgICAgICkge1xyXG4gICAgICAgIGxpbmtlZFRvUmVndWxhciA9IGZhbHNlXHJcbiAgICAgIH1cclxuICAgICAgaXRlbXMucHVzaCh7XHJcbiAgICAgICAgbGFiZWw6IHRoaXMuZm9ybWF0TWVzc2FnZSgnYXBwbHlUbycsIHtcclxuICAgICAgICAgIHN0YXR1czogdGhpcy5mb3JtYXRNZXNzYWdlKCdyZWd1bGFyJykudG9Mb2NhbGVMb3dlckNhc2UoKVxyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIGV2ZW50OiBldnQgPT4ge1xyXG4gICAgICAgICAgdGhpcy5oYW5kbGVDb3B5VG8oXHJcbiAgICAgICAgICAgIGV2dCxcclxuICAgICAgICAgICAgU3RhdHVzLlJlZ3VsYXIsXHJcbiAgICAgICAgICAgIHNlbGVjdGVkTGF5b3V0SXRlbSxcclxuICAgICAgICAgICAgbGlua2VkVG9SZWd1bGFyXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChidWlsZGVyU3RhdHVzID09PSBTdGF0dXMuUmVndWxhcikge1xyXG4gICAgICBpc1Nob3dBcHBseVRvSG92ZXIgJiYgc3luY1RvSG92ZXIoKVxyXG4gICAgICBpc1Nob3dBcHBseVRvU2VsZWN0ZWQgJiYgc3luY1RvU2VsZWN0ZWQoKVxyXG4gICAgICBpZiAobGlua2VkVG9Ib3ZlciAmJiBsaW5rZWRUb1NlbGVjdCkge1xyXG4gICAgICAgIHRpdGxlID0gdGhpcy5mb3JtYXRNZXNzYWdlKCdsaW5rZWRUb0FuZCcsIHtcclxuICAgICAgICAgIHdoZXJlMTogdGhpcy5mb3JtYXRNZXNzYWdlKCdzZWxlY3RlZCcpLnRvTG9jYWxlTG93ZXJDYXNlKCksXHJcbiAgICAgICAgICB3aGVyZTI6IHRoaXMuZm9ybWF0TWVzc2FnZSgnaG92ZXInKS50b0xvY2FsZUxvd2VyQ2FzZSgpXHJcbiAgICAgICAgfSlcclxuICAgICAgfSBlbHNlIGlmIChsaW5rZWRUb0hvdmVyKSB7XHJcbiAgICAgICAgdGl0bGUgPSB0aGlzLmZvcm1hdE1lc3NhZ2UoJ2xpbmtlZFRvJywge1xyXG4gICAgICAgICAgd2hlcmU6IHRoaXMuZm9ybWF0TWVzc2FnZSgnaG92ZXInKS50b0xvY2FsZUxvd2VyQ2FzZSgpXHJcbiAgICAgICAgfSlcclxuICAgICAgfSBlbHNlIGlmIChsaW5rZWRUb1NlbGVjdCkge1xyXG4gICAgICAgIHRpdGxlID0gdGhpcy5mb3JtYXRNZXNzYWdlKCdsaW5rZWRUbycsIHtcclxuICAgICAgICAgIHdoZXJlOiB0aGlzLmZvcm1hdE1lc3NhZ2UoJ3NlbGVjdGVkJykudG9Mb2NhbGVMb3dlckNhc2UoKVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoYnVpbGRlclN0YXR1cyA9PT0gU3RhdHVzLkhvdmVyKSB7XHJcbiAgICAgIHN5bmNUb1JlZ3VsYXIoKVxyXG4gICAgICBzeW5jVG9TZWxlY3RlZCgpXHJcbiAgICAgIGlmIChsaW5rZWRUb1JlZ3VsYXIgJiYgbGlua2VkVG9TZWxlY3QpIHtcclxuICAgICAgICB0aXRsZSA9IHRoaXMuZm9ybWF0TWVzc2FnZSgnbGlua2VkVG9BbmQnLCB7XHJcbiAgICAgICAgICB3aGVyZTE6IHRoaXMuZm9ybWF0TWVzc2FnZSgncmVndWxhcicpLnRvTG9jYWxlTG93ZXJDYXNlKCksXHJcbiAgICAgICAgICB3aGVyZTI6IHRoaXMuZm9ybWF0TWVzc2FnZSgnc2VsZWN0ZWQnKS50b0xvY2FsZUxvd2VyQ2FzZSgpXHJcbiAgICAgICAgfSlcclxuICAgICAgfSBlbHNlIGlmIChsaW5rZWRUb1JlZ3VsYXIpIHtcclxuICAgICAgICB0aXRsZSA9IHRoaXMuZm9ybWF0TWVzc2FnZSgnbGlua2VkVG8nLCB7XHJcbiAgICAgICAgICB3aGVyZTogdGhpcy5mb3JtYXRNZXNzYWdlKCdyZWd1bGFyJykudG9Mb2NhbGVMb3dlckNhc2UoKVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0gZWxzZSBpZiAobGlua2VkVG9TZWxlY3QpIHtcclxuICAgICAgICB0aXRsZSA9IHRoaXMuZm9ybWF0TWVzc2FnZSgnbGlua2VkVG8nLCB7XHJcbiAgICAgICAgICB3aGVyZTogdGhpcy5mb3JtYXRNZXNzYWdlKCdzZWxlY3RlZCcpLnRvTG9jYWxlTG93ZXJDYXNlKClcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzeW5jVG9SZWd1bGFyKClcclxuICAgICAgc3luY1RvSG92ZXIoKVxyXG4gICAgICBpZiAobGlua2VkVG9SZWd1bGFyICYmIGxpbmtlZFRvSG92ZXIpIHtcclxuICAgICAgICB0aXRsZSA9IHRoaXMuZm9ybWF0TWVzc2FnZSgnbGlua2VkVG9BbmQnLCB7XHJcbiAgICAgICAgICB3aGVyZTE6IHRoaXMuZm9ybWF0TWVzc2FnZSgncmVndWxhcicpLnRvTG9jYWxlTG93ZXJDYXNlKCksXHJcbiAgICAgICAgICB3aGVyZTI6IHRoaXMuZm9ybWF0TWVzc2FnZSgnaG92ZXInKS50b0xvY2FsZUxvd2VyQ2FzZSgpXHJcbiAgICAgICAgfSlcclxuICAgICAgfSBlbHNlIGlmIChsaW5rZWRUb1JlZ3VsYXIpIHtcclxuICAgICAgICB0aXRsZSA9IHRoaXMuZm9ybWF0TWVzc2FnZSgnbGlua2VkVG8nLCB7XHJcbiAgICAgICAgICB3aGVyZTogdGhpcy5mb3JtYXRNZXNzYWdlKCdyZWd1bGFyJykudG9Mb2NhbGVMb3dlckNhc2UoKVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0gZWxzZSBpZiAobGlua2VkVG9Ib3Zlcikge1xyXG4gICAgICAgIHRpdGxlID0gdGhpcy5mb3JtYXRNZXNzYWdlKCdsaW5rZWRUbycsIHtcclxuICAgICAgICAgIHdoZXJlOiB0aGlzLmZvcm1hdE1lc3NhZ2UoJ2hvdmVyJykudG9Mb2NhbGVMb3dlckNhc2UoKVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChzaG93QnJlYWspIHtcclxuICAgICAgaXRlbXMucHVzaCh7XHJcbiAgICAgICAgbGFiZWw6IHRoaXMuZm9ybWF0TWVzc2FnZSgnaXNvbGF0ZScpLFxyXG4gICAgICAgIGV2ZW50OiB0aGlzLmhhbmRsZUJyZWFrTGlua1xyXG4gICAgICB9KVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGl0bGUgPSB0aGlzLmZvcm1hdE1lc3NhZ2UoJ2lzb2xhdGUnKVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIGl0ZW1zOiBJbW11dGFibGUoaXRlbXMpLFxyXG4gICAgICB0aXRsZTogdGl0bGVcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9yZW5kZXJBY3Rpb24gPSAoKSA9PiB7XHJcbiAgICBjb25zdCBoYW5kbGVycyA9IFtdXHJcbiAgICBjb25zdCB7IHRoZW1lLCBsYXlvdXRUeXBlLCBrZWVwQXNwZWN0UmF0aW8gfSA9IHRoaXMucHJvcHNcclxuICAgIGNvbnN0IHNpZGVIYW5kbGUgPSBjc3NgXHJcbiAgICAgIGJveC1zaGFkb3c6IG5vbmU7XHJcblxyXG4gICAgICAmOmFmdGVyIHtcclxuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgICAgY29udGVudDogJyc7XHJcbiAgICAgICAgd2lkdGg6ICR7Y29ybmVyU2l6ZX1weDtcclxuICAgICAgICBoZWlnaHQ6ICR7Y29ybmVyU2l6ZX1weDtcclxuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3RoZW1lLmNvbG9ycy5wYWxldHRlLnByaW1hcnlbNTAwXX07XHJcbiAgICAgICAgYm9yZGVyOiAycHggc29saWQgJHt0aGVtZS5jb2xvcnMud2hpdGV9O1xyXG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcclxuICAgICAgICB6LWluZGV4OiAke3ppbmRleEhhbmRsZX07XHJcbiAgICAgIH1cclxuICAgIGBcclxuXHJcbiAgICBjb25zdCBib3R0b21TaWRlTGluZSA9IGNzc2BcclxuICAgICAgYm94LXNoYWRvdzogbm9uZTtcclxuICAgICAgaGVpZ2h0OiAke3NpZGVTaXplfXB4O1xyXG4gICAgICBsZWZ0OiAwcHg7XHJcbiAgICAgIHJpZ2h0OiAwcHg7XHJcbiAgICAgIGJvdHRvbTogJHstMSAqIChzaWRlU2l6ZSAvIDIpfXB4O1xyXG4gICAgICAmOmFmdGVyIHtcclxuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgICAgY29udGVudDogJyc7XHJcbiAgICAgICAgYm90dG9tOiA1MCU7XHJcbiAgICAgICAgbGVmdDogMDtcclxuICAgICAgICByaWdodDogMDtcclxuICAgICAgICBoZWlnaHQ6IDJweDtcclxuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3RoZW1lLmNvbG9ycy5wYWxldHRlLnByaW1hcnlbMzAwXX07XHJcbiAgICAgICAgei1pbmRleDogJHt6aW5kZXhIYW5kbGV9O1xyXG4gICAgICB9XHJcbiAgICBgXHJcblxyXG4gICAgY29uc3QgcmlnaHRTaWRlTGluZSA9IGNzc2BcclxuICAgICAgYm94LXNoYWRvdzogbm9uZTtcclxuICAgICAgd2lkdGg6ICR7c2lkZVNpemV9cHg7XHJcbiAgICAgIHRvcDogMHB4O1xyXG4gICAgICBib3R0b206IDBweDtcclxuICAgICAgcmlnaHQ6ICR7LTEgKiAoc2lkZVNpemUgLyAyKX1weDtcclxuICAgICAgJjphZnRlciB7XHJcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgIGNvbnRlbnQ6ICcnO1xyXG4gICAgICAgIHJpZ2h0OiA1MCU7XHJcbiAgICAgICAgdG9wOiAwO1xyXG4gICAgICAgIGJvdHRvbTogMDtcclxuICAgICAgICB3aWR0aDogMnB4O1xyXG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7dGhlbWUuY29sb3JzLnBhbGV0dGUucHJpbWFyeVszMDBdfTtcclxuICAgICAgICB6LWluZGV4OiAke3ppbmRleEhhbmRsZX07XHJcbiAgICAgIH1cclxuICAgIGBcclxuXHJcbiAgICBjb25zdCBoYW5kbGUgPSBjc3NgXHJcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgIGBcclxuXHJcbiAgICBjb25zdCByaWdodFNpZGVDdXJzb3IgPSBjc3NgXHJcbiAgICAgIHdpZHRoOiAke3NpZGVTaXplfXB4O1xyXG4gICAgICB0b3A6ICR7LTEgKiBzaWRlUG9zaXRpb259cHg7XHJcbiAgICAgIGJvdHRvbTogJHstMSAqIHNpZGVQb3NpdGlvbn1weDtcclxuICAgICAgcmlnaHQ6ICR7LTEgKiAoc2lkZVNpemUgLyAyKX1weDtcclxuXHJcbiAgICAgICY6YWZ0ZXIge1xyXG4gICAgICAgIHRvcDogNTAlO1xyXG4gICAgICAgIHJpZ2h0OiA1MCU7XHJcbiAgICAgICAgbWFyZ2luLXRvcDogJHtjb3JuZXJQb3NpdGlvbiAvIDJ9cHg7XHJcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiAke2Nvcm5lclBvc2l0aW9uIC8gMn1weDtcclxuICAgICAgfVxyXG4gICAgYFxyXG4gICAgY29uc3QgYm90dG9tU2lkZUN1cnNvciA9IGNzc2BcclxuICAgICAgaGVpZ2h0OiAke3NpZGVTaXplfXB4O1xyXG4gICAgICBsZWZ0OiAkey0xICogc2lkZVBvc2l0aW9ufXB4O1xyXG4gICAgICByaWdodDogJHstMSAqIHNpZGVQb3NpdGlvbn1weDtcclxuICAgICAgYm90dG9tOiAkey0xICogKHNpZGVTaXplIC8gMil9cHg7XHJcblxyXG4gICAgICAmOmFmdGVyIHtcclxuICAgICAgICBsZWZ0OiA1MCU7XHJcbiAgICAgICAgYm90dG9tOiA1MCU7XHJcbiAgICAgICAgbWFyZ2luLWxlZnQ6ICR7Y29ybmVyUG9zaXRpb24gLyAyfXB4O1xyXG4gICAgICAgIG1hcmdpbi1ib3R0b206ICR7Y29ybmVyUG9zaXRpb24gLyAyfXB4O1xyXG4gICAgICB9XHJcbiAgICBgXHJcbiAgICBzd2l0Y2ggKGxheW91dFR5cGUpIHtcclxuICAgICAgY2FzZSBMaXN0TGF5b3V0VHlwZS5Db2x1bW46XHJcbiAgICAgICAgaGFuZGxlcnMucHVzaChcclxuICAgICAgICAgIDxzcGFuXHJcbiAgICAgICAgICAgIGtleT0nMTAnXHJcbiAgICAgICAgICAgIGNsYXNzTmFtZT0nbGlzdC1jYXJkLXJuZC1yZXNpemUtbGVmdC1saW5lJ1xyXG4gICAgICAgICAgICBjc3M9e1toYW5kbGUsIHJpZ2h0U2lkZUxpbmVdfVxyXG4gICAgICAgICAgLz5cclxuICAgICAgICApXHJcbiAgICAgICAgaGFuZGxlcnMucHVzaChcclxuICAgICAgICAgIDxzcGFuXHJcbiAgICAgICAgICAgIGtleT0nNCdcclxuICAgICAgICAgICAgY2xhc3NOYW1lPSdsaXN0LWNhcmQtcm5kLXJlc2l6ZS1yaWdodCdcclxuICAgICAgICAgICAgY3NzPXtbaGFuZGxlLCBzaWRlSGFuZGxlLCByaWdodFNpZGVDdXJzb3JdfVxyXG4gICAgICAgICAgLz5cclxuICAgICAgICApXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSBMaXN0TGF5b3V0VHlwZS5Sb3c6XHJcbiAgICAgICAgaGFuZGxlcnMucHVzaChcclxuICAgICAgICAgIDxzcGFuXHJcbiAgICAgICAgICAgIGtleT0nOSdcclxuICAgICAgICAgICAgY2xhc3NOYW1lPSdsaXN0LWNhcmQtcm5kLXJlc2l6ZS1ib3R0b20tbGluZSdcclxuICAgICAgICAgICAgY3NzPXtbaGFuZGxlLCBib3R0b21TaWRlTGluZV19XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgIClcclxuICAgICAgICBoYW5kbGVycy5wdXNoKFxyXG4gICAgICAgICAgPHNwYW5cclxuICAgICAgICAgICAga2V5PSc2J1xyXG4gICAgICAgICAgICBjbGFzc05hbWU9J2xpc3QtY2FyZC1ybmQtcmVzaXplLWJvdHRvbSdcclxuICAgICAgICAgICAgY3NzPXtbaGFuZGxlLCBzaWRlSGFuZGxlLCBib3R0b21TaWRlQ3Vyc29yXX1cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgKVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgTGlzdExheW91dFR5cGUuR1JJRDpcclxuICAgICAgICBoYW5kbGVycy5wdXNoKFxyXG4gICAgICAgICAgPHNwYW5cclxuICAgICAgICAgICAga2V5PScxMCdcclxuICAgICAgICAgICAgY2xhc3NOYW1lPSdsaXN0LWNhcmQtcm5kLXJlc2l6ZS1sZWZ0LWxpbmUnXHJcbiAgICAgICAgICAgIGNzcz17W2hhbmRsZSwgcmlnaHRTaWRlTGluZV19XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgIClcclxuICAgICAgICBoYW5kbGVycy5wdXNoKFxyXG4gICAgICAgICAgPHNwYW5cclxuICAgICAgICAgICAga2V5PSc0J1xyXG4gICAgICAgICAgICBjbGFzc05hbWU9J2xpc3QtY2FyZC1ybmQtcmVzaXplLXJpZ2h0J1xyXG4gICAgICAgICAgICBjc3M9e1toYW5kbGUsIHNpZGVIYW5kbGUsIHJpZ2h0U2lkZUN1cnNvcl19XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgIClcclxuICAgICAgICBpZiAoIWtlZXBBc3BlY3RSYXRpbykge1xyXG4gICAgICAgICAgaGFuZGxlcnMucHVzaChcclxuICAgICAgICAgICAgPHNwYW5cclxuICAgICAgICAgICAgICBrZXk9JzknXHJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPSdsaXN0LWNhcmQtcm5kLXJlc2l6ZS1ib3R0b20tbGluZSdcclxuICAgICAgICAgICAgICBjc3M9e1toYW5kbGUsIGJvdHRvbVNpZGVMaW5lXX1cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICAgIClcclxuICAgICAgICAgIGhhbmRsZXJzLnB1c2goXHJcbiAgICAgICAgICAgIDxzcGFuXHJcbiAgICAgICAgICAgICAga2V5PSc2J1xyXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT0nbGlzdC1jYXJkLXJuZC1yZXNpemUtYm90dG9tJ1xyXG4gICAgICAgICAgICAgIGNzcz17W2hhbmRsZSwgc2lkZUhhbmRsZSwgYm90dG9tU2lkZUN1cnNvcl19XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICApXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICB9XHJcbiAgICByZXR1cm4gaGFuZGxlcnNcclxuICB9XHJcblxyXG4gIGdldENhcmRUb29sc1N0eWxlID0gKHRoZW1lOiBJTVRoZW1lVmFyaWFibGVzKSA9PiB7XHJcbiAgICByZXR1cm4gY3NzYFxyXG4gICAgICB3aWR0aDogMTAwJTtcclxuICAgICAgLmJ0biB7XHJcbiAgICAgICAgd2lkdGg6IDEwMCU7XHJcbiAgICAgIH1cclxuICAgICAgLmRyb3Bkb3duLXRvZ2dsZSB7XHJcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgICAgIH1cclxuICAgIGBcclxuICB9XHJcblxyXG4gIHJlbmRlckNhcmRUb29scyA9ICgpID0+IHtcclxuICAgIGNvbnN0IHsgaW5kZXggfSA9IHRoaXMucHJvcHNcclxuICAgIGNvbnN0IGlzSW5CdWlsZGVyID0gd2luZG93LmppbXVDb25maWcuaXNJbkJ1aWxkZXJcclxuICAgIGlmICghaXNJbkJ1aWxkZXIgfHwgaW5kZXggPiAwKSByZXR1cm5cclxuICAgIGNvbnN0IHtcclxuICAgICAgY2FyZENvbmZpZ3MsXHJcbiAgICAgIGFwcE1vZGUsXHJcbiAgICAgIGJ1aWxkZXJTdXBwb3J0TW9kdWxlcyxcclxuICAgICAgZGF0YXNvdXJjZUlkLFxyXG4gICAgICBzZWxlY3Rpb25Jc0luTGlzdCxcclxuICAgICAgc2VsZWN0aW9uSXNMaXN0LFxyXG4gICAgICBoaWRlQ2FyZFRvb2xcclxuICAgIH0gPSB0aGlzLnByb3BzXHJcblxyXG4gICAgbGV0IHNob3dUb29scyA9IHRydWVcclxuICAgIGNvbnN0IHtcclxuICAgICAgQnVpbGRlclBvcHBlcixcclxuICAgICAgR0xPQkFMX1JFU0laSU5HX0NMQVNTX05BTUUsXHJcbiAgICAgIEdMT0JBTF9INV9EUkFHR0lOR19DTEFTU19OQU1FLFxyXG4gICAgICBHTE9CQUxfRFJBR0dJTkdfQ0xBU1NfTkFNRVxyXG4gICAgfSA9IGJ1aWxkZXJTdXBwb3J0TW9kdWxlcy53aWRnZXRNb2R1bGVzXHJcblxyXG4gICAgY29uc3QgaXNJbkxpc3QgPSBzZWxlY3Rpb25Jc0luTGlzdFxyXG4gICAgY29uc3QgaXNTZWxmID0gc2VsZWN0aW9uSXNMaXN0XHJcbiAgICBpZiAoXHJcbiAgICAgICghaXNJbkxpc3QgJiYgIWlzU2VsZikgfHxcclxuICAgICAgYXBwTW9kZSA9PT0gQXBwTW9kZS5SdW4gfHxcclxuICAgICAgaGlkZUNhcmRUb29sIHx8XHJcbiAgICAgICFkYXRhc291cmNlSWRcclxuICAgICkge1xyXG4gICAgICBzaG93VG9vbHMgPSBmYWxzZVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgIHNob3dUb29scyAmJlxyXG4gICAgICB0aGlzLnByb3BzLmlzRWRpdGluZyAmJlxyXG4gICAgICAoY2FyZENvbmZpZ3NbU3RhdHVzLkhvdmVyXS5lbmFibGUgfHxcclxuICAgICAgICBjYXJkQ29uZmlnc1tTdGF0dXMuU2VsZWN0ZWRdLnNlbGVjdGlvbk1vZGUgIT09XHJcbiAgICAgICAgICBTZWxlY3Rpb25Nb2RlVHlwZS5Ob25lKSAmJiAoXHJcbiAgICAgICAgPEJ1aWxkZXJQb3BwZXJcclxuICAgICAgICAgIHBsYWNlbWVudD0nbGVmdC1zdGFydCdcclxuICAgICAgICAgIHRyYXBGb2N1cz17ZmFsc2V9XHJcbiAgICAgICAgICBhdXRvRm9jdXM9e2ZhbHNlfVxyXG4gICAgICAgICAgY3NzPXtjc3NgXHJcbiAgICAgICAgICAgIC4ke0dMT0JBTF9EUkFHR0lOR19DTEFTU19OQU1FfSAmLFxyXG4gICAgICAgICAgICAuJHtHTE9CQUxfUkVTSVpJTkdfQ0xBU1NfTkFNRX0gJixcclxuICAgICAgICAgICAgLiR7R0xPQkFMX0g1X0RSQUdHSU5HX0NMQVNTX05BTUV9ICYge1xyXG4gICAgICAgICAgICAgICYucG9wcGVyIHtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICBgfVxyXG4gICAgICAgICAgcmVmZXJlbmNlPXt0aGlzLnJlc2l6ZVJlZi5jdXJyZW50fVxyXG4gICAgICAgICAgb2Zmc2V0PXtzdGF0ZXNQb3BwZXJPZmZzZXR9XHJcbiAgICAgICAgICBtb2RpZmllcnM9e3N0YXRlc01vZGlmaWVyc31cclxuICAgICAgICAgIG9wZW49e3Nob3dUb29sc31cclxuICAgICAgICA+XHJcbiAgICAgICAgICB7dGhpcy5nZXRDYXJkTWVudUVsZW1lbnQoKX1cclxuICAgICAgICA8L0J1aWxkZXJQb3BwZXI+XHJcbiAgICAgIClcclxuICAgIClcclxuICB9XHJcblxyXG4gIGdldENhcmRNZW51RWxlbWVudCA9ICgpID0+IHtcclxuICAgIGNvbnN0IHsgaW5kZXggfSA9IHRoaXMucHJvcHNcclxuICAgIGNvbnN0IGlzSW5CdWlsZGVyID0gd2luZG93LmppbXVDb25maWcuaXNJbkJ1aWxkZXJcclxuICAgIGlmICghaXNJbkJ1aWxkZXIgfHwgaW5kZXggPiAwKSByZXR1cm5cclxuICAgIGNvbnN0IHtcclxuICAgICAgY2FyZENvbmZpZ3MsXHJcbiAgICAgIHNlbGVjdGlvbixcclxuICAgICAgd2lkZ2V0SWQsXHJcbiAgICAgIGJ1aWxkZXJTdXBwb3J0TW9kdWxlcyxcclxuICAgICAgYnJvd3NlclNpemVNb2RlLFxyXG4gICAgICBidWlsZGVyU3RhdHVzLFxyXG4gICAgICBzZWxlY3Rpb25Jc0xpc3RcclxuICAgIH0gPSB0aGlzLnByb3BzXHJcblxyXG4gICAgY29uc3QgYWN0aW9uID0gYnVpbGRlclN1cHBvcnRNb2R1bGVzLmppbXVGb3JCdWlsZGVyTGliLmdldEFwcENvbmZpZ0FjdGlvbigpXHJcbiAgICBjb25zdCBhcHBDb25maWcgPSBhY3Rpb24uYXBwQ29uZmlnXHJcblxyXG4gICAgY29uc3Qge1xyXG4gICAgICBzZWFyY2hVdGlscyxcclxuICAgICAgQnVpbGRlckRyb3BEb3duLFxyXG4gICAgICBCdWlsZGVyQnV0dG9uLFxyXG4gICAgICB3aXRoQnVpbGRlclRoZW1lXHJcbiAgICB9ID0gYnVpbGRlclN1cHBvcnRNb2R1bGVzLndpZGdldE1vZHVsZXNcclxuXHJcbiAgICBjb25zdCBpc1NlbGYgPSBzZWxlY3Rpb25Jc0xpc3RcclxuXHJcbiAgICBjb25zdCBzaG93QnJlYWsgPVxyXG4gICAgICAhaXNTZWxmICYmXHJcbiAgICAgIHNlbGVjdGlvbiAmJlxyXG4gICAgICBzZWFyY2hVdGlscyAmJlxyXG4gICAgICBzZWFyY2hVdGlscy5nZXRSZWxhdGVkTGF5b3V0SXRlbXNJbldpZGdldEJ5TGF5b3V0SW5mbyhcclxuICAgICAgICBhcHBDb25maWcsXHJcbiAgICAgICAgc2VsZWN0aW9uLFxyXG4gICAgICAgIHdpZGdldElkLFxyXG4gICAgICAgIGJyb3dzZXJTaXplTW9kZVxyXG4gICAgICApLmxlbmd0aCA+IDFcclxuICAgIGNvbnN0IHsgaXRlbXM6IHN5bmNJdGVtcywgdGl0bGU6IHN5bmNUaXRsZSB9ID0gdGhpcy5nZXRDb3B5RHJvcGRvd25JdGVtcyhcclxuICAgICAgc2hvd0JyZWFrXHJcbiAgICApXHJcbiAgICBjb25zdCBzaG93U3luYyA9IHN5bmNJdGVtcyAmJiBzeW5jSXRlbXMubGVuZ3RoID4gMFxyXG4gICAgY29uc3QgbGlzdExheW91dCA9IGNhcmRDb25maWdzW2J1aWxkZXJTdGF0dXNdPy5saXN0TGF5b3V0IHx8IExpc3RMYXlvdXQuQ1VTVE9NXHJcbiAgICBjb25zdCBpc1Nob3dTeW5jT3JCcmVhayA9IHNob3dTeW5jIHx8IHNob3dCcmVha1xyXG4gICAgY29uc3QgaXNTaG93Q29weVBvcHBlciA9ICFpc1NlbGYgJiYgaXNTaG93U3luY09yQnJlYWsgJiYgbGlzdExheW91dCA9PT0gTGlzdExheW91dC5DVVNUT01cclxuICAgIGNvbnN0IENhcmRNZW51ID0gd2l0aEJ1aWxkZXJUaGVtZSh0aGVtZSA9PiB7XHJcbiAgICAgIHJldHVybiAoXHJcbiAgICAgICAgPGRpdlxyXG4gICAgICAgICAgY2xhc3NOYW1lPSdzdGF0dXMtZ3JvdXAgZC1mbGV4IGZsZXgtY29sdW1uIGFsaWduLWl0ZW1zLWNlbnRlciBwLTInXHJcbiAgICAgICAgICBjc3M9e3RoaXMuZ2V0Q2FyZFRvb2xzU3R5bGUodGhlbWUpfVxyXG4gICAgICAgID5cclxuICAgICAgICAgIDxCdWlsZGVyQnV0dG9uXHJcbiAgICAgICAgICAgIGFjdGl2ZT17YnVpbGRlclN0YXR1cyA9PT0gU3RhdHVzLlJlZ3VsYXJ9XHJcbiAgICAgICAgICAgIG9uQ2xpY2s9e2V2dCA9PiB0aGlzLmhhbmRsZUJ1aWxkZXJTdGF0dXNDaGFuZ2UoZXZ0LCBTdGF0dXMuUmVndWxhcil9XHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIHt0aGlzLmZvcm1hdE1lc3NhZ2UoJ3JlZ3VsYXInKX1cclxuICAgICAgICAgIDwvQnVpbGRlckJ1dHRvbj5cclxuICAgICAgICAgIHtjYXJkQ29uZmlnc1tTdGF0dXMuSG92ZXJdLmVuYWJsZSAmJiAoXHJcbiAgICAgICAgICAgIDxCdWlsZGVyQnV0dG9uXHJcbiAgICAgICAgICAgICAgYWN0aXZlPXtidWlsZGVyU3RhdHVzID09PSBTdGF0dXMuSG92ZXJ9XHJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPSdtdC0xJ1xyXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e2V2dCA9PiB0aGlzLmhhbmRsZUJ1aWxkZXJTdGF0dXNDaGFuZ2UoZXZ0LCBTdGF0dXMuSG92ZXIpfVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAge3RoaXMuZm9ybWF0TWVzc2FnZSgnaG92ZXInKX1cclxuICAgICAgICAgICAgPC9CdWlsZGVyQnV0dG9uPlxyXG4gICAgICAgICAgKX1cclxuICAgICAgICAgIHtjYXJkQ29uZmlnc1tTdGF0dXMuU2VsZWN0ZWRdLnNlbGVjdGlvbk1vZGUgIT09XHJcbiAgICAgICAgICAgIFNlbGVjdGlvbk1vZGVUeXBlLk5vbmUgJiYgKFxyXG4gICAgICAgICAgICA8QnVpbGRlckJ1dHRvblxyXG4gICAgICAgICAgICAgIGFjdGl2ZT17YnVpbGRlclN0YXR1cyA9PT0gU3RhdHVzLlNlbGVjdGVkfVxyXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT0nbXQtMSdcclxuICAgICAgICAgICAgICBvbkNsaWNrPXtldnQgPT4gdGhpcy5oYW5kbGVCdWlsZGVyU3RhdHVzQ2hhbmdlKGV2dCwgU3RhdHVzLlNlbGVjdGVkKX1cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgIHt0aGlzLmZvcm1hdE1lc3NhZ2UoJ3NlbGVjdGVkJyl9XHJcbiAgICAgICAgICAgIDwvQnVpbGRlckJ1dHRvbj5cclxuICAgICAgICAgICl9XHJcbiAgICAgICAgICB7aXNTaG93Q29weVBvcHBlciAmJiAoXHJcbiAgICAgICAgICAgIDxCdWlsZGVyRHJvcERvd25cclxuICAgICAgICAgICAgICBjbGFzc05hbWU9J210LTEgdy0xMDAnXHJcbiAgICAgICAgICAgICAgdG9nZ2xlSXNJY29uXHJcbiAgICAgICAgICAgICAgdG9nZ2xlVGl0bGU9e3N5bmNUaXRsZX1cclxuICAgICAgICAgICAgICB0b2dnbGVUeXBlPSdkZWZhdWx0J1xyXG4gICAgICAgICAgICAgIGRpcmVjdGlvbj0nbGVmdCdcclxuICAgICAgICAgICAgICB0b2dnbGVDb250ZW50PXt0aGVtZSA9PiAoXHJcbiAgICAgICAgICAgICAgICBzaG93QnJlYWsgPyA8U3luY09uT3V0bGluZWQgc2l6ZT17MTZ9Lz4gOiA8U3luY09mZk91dGxpbmVkIHNpemU9ezE2fS8+XHJcbiAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICBtb2RpZmllcnM9e2FwcGx5UG9wcGVyTW9kaWZpZXJzfVxyXG4gICAgICAgICAgICAgIGl0ZW1zPXtzeW5jSXRlbXN9XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICApfVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICApXHJcbiAgICB9KVxyXG4gICAgcmV0dXJuICg8Q2FyZE1lbnUvPilcclxuICB9XHJcblxyXG4gIGlzSXRlbUFjY2VwdCA9IChcclxuICAgIGl0ZW06IExheW91dEl0ZW1Db25zdHJ1Y3RvclByb3BzLFxyXG4gICAgaXNQbGFjZWhvbGRlcjogYm9vbGVhblxyXG4gICk6IGJvb2xlYW4gPT4ge1xyXG4gICAgaWYgKCFpdGVtKSByZXR1cm4gZmFsc2VcclxuICAgIGNvbnN0IHsgaXNFZGl0aW5nIH0gPSB0aGlzLnByb3BzXHJcbiAgICBjb25zdCBzdXBwb3J0UmVwZWF0ID0gaXRlbS5tYW5pZmVzdD8ucHJvcGVydGllcz8uc3VwcG9ydFJlcGVhdFxyXG4gICAgLy8gaWYoIXN1cHBvcnRSZXBlYXQgJiYgaXRlbS5pdGVtVHlwZSA9PT0gTGF5b3V0SXRlbVR5cGUuV2lkZ2V0ICYmICFpdGVtLmlkKXsvL3N1cHBvcnQgcGxhY2Vob2xkZXJcclxuICAgIC8vICAgc3VwcG9ydFJlcGVhdCA9IHRydWU7XHJcbiAgICAvLyB9XHJcbiAgICBjb25zdCB7IGJ1aWxkZXJTdXBwb3J0TW9kdWxlcywgd2lkZ2V0SWQgfSA9IHRoaXMucHJvcHNcclxuICAgIGNvbnN0IGFjdGlvbiA9IGJ1aWxkZXJTdXBwb3J0TW9kdWxlcy5qaW11Rm9yQnVpbGRlckxpYi5nZXRBcHBDb25maWdBY3Rpb24oKVxyXG4gICAgY29uc3QgYXBwQ29uZmlnID0gYWN0aW9uLmFwcENvbmZpZ1xyXG4gICAgY29uc3Qgc2VsZWN0aW9uSW5MaXN0ID0gYnVpbGRlclN1cHBvcnRNb2R1bGVzLndpZGdldE1vZHVsZXMuc2VsZWN0aW9uSW5MaXN0XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICBpc0VkaXRpbmcgJiZcclxuICAgICAgc3VwcG9ydFJlcGVhdCAmJlxyXG4gICAgICAoIWl0ZW0ubGF5b3V0SW5mbyB8fFxyXG4gICAgICAgIChpdGVtLmxheW91dEluZm8gJiZcclxuICAgICAgICAgIHNlbGVjdGlvbkluTGlzdChpdGVtLmxheW91dEluZm8sIHdpZGdldElkLCBhcHBDb25maWcsIGZhbHNlKSkpXHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBnZXRFZGl0b3JTdHlsZSA9ICgpID0+IHtcclxuICAgIHJldHVybiBjc3NgXHJcbiAgICAgICYubGlzdC1jYXJkLWNvbnRlbnQge1xyXG4gICAgICAgIC5maXhlZC1sYXlvdXQge1xyXG4gICAgICAgICAgYm9yZGVyOiAwICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICBgXHJcbiAgfVxyXG5cclxuICByZW5kZXIgKCkge1xyXG4gICAgY29uc3Qge1xyXG4gICAgICBzZWxlY3RhYmxlLFxyXG4gICAgICBhY3RpdmUsXHJcbiAgICAgIGNhcmRDb25maWdzLFxyXG4gICAgICBMYXlvdXRFbnRyeSxcclxuICAgICAgc2VsZWN0aW9uSXNJbkxpc3QsXHJcbiAgICAgIGlzRWRpdGluZyxcclxuICAgICAgd2lkZ2V0SWQsXHJcbiAgICAgIGxpc3RTdHlsZSxcclxuICAgICAgbG9ja0l0ZW1SYXRpbyxcclxuICAgICAgYnVpbGRlclN0YXR1cyxcclxuICAgICAgbGF5b3V0cyxcclxuICAgICAgbGF5b3V0VHlwZVxyXG4gICAgfSA9IHRoaXMucHJvcHNcclxuICAgIGNvbnN0IHsgZGlkTW91bnQgfSA9IHRoaXMuc3RhdGVcclxuICAgIGNvbnN0IGxheW91dCA9IGxheW91dHNbYnVpbGRlclN0YXR1c11cclxuICAgIGNvbnN0IGxpc3RMYXlvdXQgPSBjYXJkQ29uZmlnc1tidWlsZGVyU3RhdHVzXT8ubGlzdExheW91dCB8fCBMaXN0TGF5b3V0LkNVU1RPTVxyXG4gICAgY29uc3QgcmVndWxhckxheW91dCA9IGxheW91dHNbU3RhdHVzLlJlZ3VsYXJdXHJcbiAgICBjb25zdCBzaG93TGF5b3V0ID0gbGlzdExheW91dCA9PT0gTGlzdExheW91dC5BVVRPID8gcmVndWxhckxheW91dCA6IGxheW91dFxyXG4gICAgY29uc3QgYmdTdHlsZSA9IGNhcmRDb25maWdzW2J1aWxkZXJTdGF0dXNdLmJhY2tncm91bmRTdHlsZVxyXG4gICAgY29uc3QgaXNTaG93TWFzayA9IGxpc3RMYXlvdXQgPT09IExpc3RMYXlvdXQuQVVUTyAmJiBidWlsZGVyU3RhdHVzICE9PSBTdGF0dXMuUmVndWxhclxyXG4gICAgY29uc3QgbWVyZ2VkU3R5bGU6IGFueSA9IHtcclxuICAgICAgLi4uc3R5bGVVdGlscy50b0NTU1N0eWxlKGJnU3R5bGUgfHwgKHt9IGFzIGFueSkpXHJcbiAgICB9XHJcbiAgICBjb25zdCBjYXJkQ29udGVudFN0eWxlOiBhbnkgPSB7XHJcbiAgICAgIC4uLnN0eWxlVXRpbHMudG9DU1NTdHlsZShcclxuICAgICAgICB7XHJcbiAgICAgICAgICBib3JkZXJSYWRpdXM6IGJnU3R5bGU/LmJvcmRlclJhZGl1cyB8fCAwXHJcbiAgICAgICAgfSB8fCAoe30gYXMgYW55KVxyXG4gICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgbmV3UHJvdmlkZXJEYXRhID0gdGhpcy5nZXROZXdQcm92aWRlckRhdGEoKVxyXG4gICAgaWYgKCF0aGlzLmlzUHJvdmlkZXJFcXVhbChuZXdQcm92aWRlckRhdGEsIHRoaXMucHJvdmlkZXJEYXRhKSkge1xyXG4gICAgICB0aGlzLnByb3ZpZGVyRGF0YSA9IG5ld1Byb3ZpZGVyRGF0YVxyXG4gICAgfVxyXG4gICAgY29uc3QgaXNMb2NrSXRlbVJhdGlvID0gbGF5b3V0VHlwZSAhPT0gTGlzdExheW91dFR5cGUuR1JJRCAmJiBsb2NrSXRlbVJhdGlvXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8UmVwZWF0ZWREYXRhU291cmNlUHJvdmlkZXIgZGF0YT17dGhpcy5wcm92aWRlckRhdGF9PlxyXG4gICAgICAgIDxMaXN0R3JvdXBJdGVtXHJcbiAgICAgICAgICBhY3RpdmU9e3NlbGVjdGFibGUgJiYgYWN0aXZlfVxyXG4gICAgICAgICAgY3NzPXt0aGlzLmdldFN0eWxlKGJ1aWxkZXJTdGF0dXMpfVxyXG4gICAgICAgICAgc3R5bGU9e3sgLi4uY2FyZENvbnRlbnRTdHlsZSwgLi4ubGlzdFN0eWxlIH19XHJcbiAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3N1cmZhY2UtMScsIGBsaXN0LWNhcmQtJHt3aWRnZXRJZH1gKX1cclxuICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuaGFuZGxlSXRlbUNsaWNrfVxyXG4gICAgICAgICAgcm9sZT0nbGlzdENhcmRFZGl0b3InXHJcbiAgICAgICAgPlxyXG4gICAgICAgICAge2lzU2hvd01hc2sgJiYgPGRpdiBjbGFzc05hbWU9J2NhcmQtZWRpdG9yLW1hc2sgcG9zaXRpb24tYWJzb2x1dGUnPjwvZGl2Pn1cclxuICAgICAgICAgIHtkaWRNb3VudCAmJiB0aGlzLnJlbmRlckNhcmRUb29scygpfVxyXG4gICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICBjbGFzc05hbWU9J2xpc3QtY2FyZC1jb250ZW50IGQtZmxleCdcclxuICAgICAgICAgICAgc3R5bGU9e21lcmdlZFN0eWxlfVxyXG4gICAgICAgICAgICBjc3M9e3RoaXMuZ2V0RWRpdG9yU3R5bGUoKX1cclxuICAgICAgICAgICAgcmVmPXt0aGlzLnJlc2l6ZVJlZn1cclxuICAgICAgICAgID5cclxuICAgICAgICAgICAgPExheW91dEVudHJ5XHJcbiAgICAgICAgICAgICAgaXNJdGVtQWNjZXB0ZWQ9e3RoaXMuaXNJdGVtQWNjZXB0fVxyXG4gICAgICAgICAgICAgIGlzUmVwZWF0XHJcbiAgICAgICAgICAgICAgbGF5b3V0cz17c2hvd0xheW91dH1cclxuICAgICAgICAgICAgICBpc0luV2lkZ2V0XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgIHtpc0VkaXRpbmcgJiZcclxuICAgICAgICAgICAgICAhc2VsZWN0aW9uSXNJbkxpc3QgJiZcclxuICAgICAgICAgICAgICAhaXNMb2NrSXRlbVJhdGlvICYmXHJcbiAgICAgICAgICAgICAgdGhpcy5fcmVuZGVyQWN0aW9uKCl9XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L0xpc3RHcm91cEl0ZW0+XHJcbiAgICAgIDwvUmVwZWF0ZWREYXRhU291cmNlUHJvdmlkZXI+XHJcbiAgICApXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBSZWFjdFJlZHV4LmNvbm5lY3Q8RXh0cmFQcm9wcywgdW5rbm93biwgTGlzdENhcmRFZGl0b3JQcm9wcz4oXHJcbiAgKHN0YXRlOiBJTVN0YXRlLCBwcm9wczogTGlzdENhcmRFZGl0b3JQcm9wcykgPT4ge1xyXG4gICAgY29uc3Qge1xyXG4gICAgICBzZWxlY3Rpb25Jc0xpc3QsXHJcbiAgICAgIGJ1aWxkZXJTdXBwb3J0TW9kdWxlcyxcclxuICAgICAgYXBwTW9kZSxcclxuICAgICAgd2lkZ2V0SWQsXHJcbiAgICAgIGJyb3dzZXJTaXplTW9kZVxyXG4gICAgfSA9IHByb3BzXHJcbiAgICBpZiAoIXdpbmRvdy5qaW11Q29uZmlnLmlzSW5CdWlsZGVyIHx8IGFwcE1vZGUgPT09IEFwcE1vZGUuUnVuKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc2VsZWN0aW9uOiB1bmRlZmluZWQsXHJcbiAgICAgICAgc2hvd0JyZWFrOiBmYWxzZVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBzZWFyY2hVdGlscyA9IGJ1aWxkZXJTdXBwb3J0TW9kdWxlcz8ud2lkZ2V0TW9kdWxlcz8uc2VhcmNoVXRpbHNcclxuICAgIGNvbnN0IGFjdGlvbiA9IGJ1aWxkZXJTdXBwb3J0TW9kdWxlcy5qaW11Rm9yQnVpbGRlckxpYi5nZXRBcHBDb25maWdBY3Rpb24oKVxyXG4gICAgY29uc3QgYXBwQ29uZmlnID0gYWN0aW9uLmFwcENvbmZpZ1xyXG4gICAgY29uc3Qgc2VsZWN0aW9uID1cclxuICAgICAgcHJvcHMuaW5kZXggPT09IDAgJiZcclxuICAgICAgcHJvcHMuc2VsZWN0aW9uSXNJbkxpc3QgJiZcclxuICAgICAgc3RhdGUgJiZcclxuICAgICAgc3RhdGUuYXBwUnVudGltZUluZm8gJiZcclxuICAgICAgc3RhdGUuYXBwUnVudGltZUluZm8uc2VsZWN0aW9uXHJcbiAgICBjb25zdCBzaG93QnJlYWsgPVxyXG4gICAgICAhc2VsZWN0aW9uSXNMaXN0ICYmXHJcbiAgICAgIHNlbGVjdGlvbiAmJlxyXG4gICAgICBzZWFyY2hVdGlscyAmJlxyXG4gICAgICBzZWFyY2hVdGlscy5nZXRSZWxhdGVkTGF5b3V0SXRlbXNJbldpZGdldEJ5TGF5b3V0SW5mbyhcclxuICAgICAgICBhcHBDb25maWcsXHJcbiAgICAgICAgc2VsZWN0aW9uLFxyXG4gICAgICAgIHdpZGdldElkLFxyXG4gICAgICAgIGJyb3dzZXJTaXplTW9kZVxyXG4gICAgICApLmxlbmd0aCA+IDFcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHNlbGVjdGlvbixcclxuICAgICAgc2hvd0JyZWFrXHJcbiAgICB9XHJcbiAgfVxyXG4pKF9MaXN0Q2FyZEVkaXRvcilcclxuIiwiLyoqIEBqc3gganN4ICovXHJcbmltcG9ydCB7XHJcbiAgUmVwZWF0ZWREYXRhU291cmNlUHJvdmlkZXIsXHJcbiAganN4LFxyXG4gIEFwcE1vZGUsXHJcbiAgUmVhY3QsXHJcbiAgRXhwcmVzc2lvblJlc29sdmVyQ29tcG9uZW50LFxyXG4gIERhdGFSZWNvcmQsXHJcbiAgSW1tdXRhYmxlQXJyYXksXHJcbiAgVXNlRGF0YVNvdXJjZSxcclxuICBMaW5rVG8sXHJcbiAgTGlua1Jlc3VsdCxcclxuICBMaW5rVHlwZSxcclxuICBJbW11dGFibGVPYmplY3QsXHJcbiAgVXJsUGFyYW1ldGVycyxcclxuICB1dGlscyxcclxuICBjbGFzc05hbWVzXHJcbn0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgeyBMaXN0R3JvdXBJdGVtLCBzdHlsZVV0aWxzLCBfTGluayBhcyBMaW5rLCBMaW5rVGFyZ2V0IH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHsgTGF5b3V0RW50cnkgfSBmcm9tICdqaW11LWxheW91dHMvbGF5b3V0LXJ1bnRpbWUnXHJcbmltcG9ydCB7IFN0YXR1cywgTGlzdExheW91dCB9IGZyb20gJy4uLy4uL2NvbmZpZydcclxuaW1wb3J0IExpc3RDYXJkLCB7IExpc3RDYXJkUHJvcHMsIExpc3RDYXJkU3RhdGVzIH0gZnJvbSAnLi9saXN0LWNhcmQtYmFzZSdcclxuaW1wb3J0IHsgSU1MaW5rUGFyYW0gfSBmcm9tICdqaW11LXVpL2FkdmFuY2VkL3NldHRpbmctY29tcG9uZW50cydcclxuaW1wb3J0IHsgRnJhZ21lbnQgfSBmcm9tICdyZWFjdCdcclxuXHJcbmludGVyZmFjZSBMaXN0Q2FyZFZpZXdlclByb3BzIGV4dGVuZHMgTGlzdENhcmRQcm9wcyB7XHJcbiAgdXNlRGF0YVNvdXJjZXM6IEltbXV0YWJsZUFycmF5PFVzZURhdGFTb3VyY2U+XHJcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xyXG4gIC8qKlxyXG4gICAqIG9uZSBvciBtb3JlIGV4cHJlc3Npb25zXHJcbiAgICovXHJcbiAgbGlua1BhcmFtOiBJTUxpbmtQYXJhbVxyXG4gIHF1ZXJ5T2JqZWN0OiBJbW11dGFibGVPYmplY3Q8VXJsUGFyYW1ldGVycz5cclxufVxyXG5cclxuaW50ZXJmYWNlIExpc3RDYXJkVmlld2VyU3RhdGVzIGV4dGVuZHMgTGlzdENhcmRTdGF0ZXMge1xyXG4gIHVybDogc3RyaW5nXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExpc3RDYXJkVmlld2VyIGV4dGVuZHMgTGlzdENhcmQ8XHJcbkxpc3RDYXJkVmlld2VyUHJvcHMsXHJcbkxpc3RDYXJkVmlld2VyU3RhdGVzXHJcbj4ge1xyXG4gIGxheW91dFJlZjogYW55XHJcbiAgbGlua1JlZjogUmVhY3QuUmVmT2JqZWN0PEhUTUxCdXR0b25FbGVtZW50PlxyXG4gIGV4cHJlc3Npb25SZWNvcmRzOiB7IFtrZXk6IHN0cmluZ106IERhdGFSZWNvcmQgfVxyXG4gIGNvbnN0cnVjdG9yIChwcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpXHJcblxyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgdXJsOiAnJ1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMucHJvdmlkZXJEYXRhID0gdGhpcy5nZXROZXdQcm92aWRlckRhdGEoKVxyXG4gICAgdGhpcy51cGRhdGVFeHByZXNzaW9uUmVjb3JkcygpXHJcbiAgICB0aGlzLmxheW91dFJlZiA9IFJlYWN0LmNyZWF0ZVJlZigpXHJcbiAgICB0aGlzLmxpbmtSZWYgPSBSZWFjdC5jcmVhdGVSZWY8SFRNTEJ1dHRvbkVsZW1lbnQ+KClcclxuICB9XHJcblxyXG4gIHByaXZhdGUgcmVhZG9ubHkgdXBkYXRlRXhwcmVzc2lvblJlY29yZHMgPSAoKSA9PiB7XHJcbiAgICB0aGlzLmV4cHJlc3Npb25SZWNvcmRzID0ge31cclxuICAgIGlmICh0aGlzLnByb3ZpZGVyRGF0YT8uZGF0YVNvdXJjZUlkICYmIHRoaXMucHJvdmlkZXJEYXRhPy5yZWNvcmQpIHtcclxuICAgICAgdGhpcy5leHByZXNzaW9uUmVjb3Jkc1tcclxuICAgICAgICB0aGlzLnByb3ZpZGVyRGF0YS5kYXRhU291cmNlSWRcclxuICAgICAgXSA9IHRoaXMucHJvdmlkZXJEYXRhLnJlY29yZFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25VcmxFeHBSZXNvbHZlQ2hhbmdlID0gcmVzdWx0ID0+IHtcclxuICAgIGlmIChyZXN1bHQuaXNTdWNjZXNzZnVsKSB7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyB1cmw6IHJlc3VsdC52YWx1ZSB9KVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgcmVzOiBzdHJpbmcgPSAnJ1xyXG4gICAgICAvLyBjb25zdCBlcnJvckNvZGUgPSByZXN1bHQudmFsdWVcclxuICAgICAgLy8gaWYgKGVycm9yQ29kZSA9PT0gRXhwcmVzc2lvblJlc29sdmVyRXJyb3JDb2RlLkZhaWxlZCkge1xyXG4gICAgICAvLyB9XHJcblxyXG4gICAgICB0aGlzLnNldFN0YXRlKHsgdXJsOiByZXMgfSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNob3VsZENvbXBvbmVudFVwZGF0ZSAobmV4dFByb3BzLCBuZXh0U3RhdHMpIHtcclxuICAgIGxldCBzaG91bGRVcGRhdGUgPSB0aGlzLnNob3VsZENvbXBvbmVudFVwZGF0ZUV4Y2VwdChuZXh0UHJvcHMsIG5leHRTdGF0cywgW1xyXG4gICAgICAnbGlzdFN0eWxlJ1xyXG4gICAgXSlcclxuICAgIHNob3VsZFVwZGF0ZSA9XHJcbiAgICAgIHNob3VsZFVwZGF0ZSB8fFxyXG4gICAgICAhdXRpbHMuaXNEZWVwRXF1YWwodGhpcy5wcm9wcy5saXN0U3R5bGUsIG5leHRQcm9wcy5saXN0U3R5bGUpXHJcbiAgICByZXR1cm4gc2hvdWxkVXBkYXRlXHJcbiAgfVxyXG5cclxuICAvLyBjb21wb25lbnREaWRVcGRhdGUocHJlUHJvcHMsIHByZVN0YXRlKXtcclxuICAvLyAgIE9iamVjdC5rZXlzKHRoaXMucHJvcHMpLmZvckVhY2goa2V5ID0+IHtcclxuICAvLyAgICAgaWYodGhpcy5wcm9wc1trZXldICE9PSBwcmVQcm9wc1trZXldKVxyXG4gIC8vICAgICAgIGNvbnNvbGUubG9nKGBwcm9wcyBoYXMgY2hhbmdlZDogJHtrZXl9YClcclxuICAvLyAgIH0pXHJcbiAgLy8gfVxyXG5cclxuICBoYW5kbGVJdGVtQ2xpY2sgPSBldnQgPT4ge1xyXG4gICAgY29uc3QgeyBvbkNoYW5nZSwgYWN0aXZlIH0gPSB0aGlzLnByb3BzXHJcbiAgICBjb25zdCB7IHByb3ZpZGVyRGF0YSwgbGlua1JlZiB9ID0gdGhpc1xyXG5cclxuICAgIGNvbnN0IHRhZ05hbWUgPSAoZXZ0LnRhcmdldCAmJiBldnQudGFyZ2V0LnRhZ05hbWUpIHx8ICcnXHJcbiAgICBpZiAoXHJcbiAgICAgICEoXHJcbiAgICAgICAgdGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnYScgfHxcclxuICAgICAgICB0YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdidXR0b24nIHx8XHJcbiAgICAgICAgZXZ0LmV4YkV2ZW50VHlwZSA9PT0gJ2xpbmtDbGljaydcclxuICAgICAgKSAmJlxyXG4gICAgICAhYWN0aXZlXHJcbiAgICApIHtcclxuICAgICAgaWYgKGxpbmtSZWYuY3VycmVudCkge1xyXG4gICAgICAgIC8vIE11c3Qgc3RvcFByb3BhZ2F0aW9uIGZyb20gbGluayBjbGljaywgb3IgdGhpcyBtZXRob2Qgd2lsbCBiZSBjYWxsZWQgdHdpY2UuXHJcbiAgICAgICAgbGlua1JlZi5jdXJyZW50LmNsaWNrKClcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGlmIGNsaWNrIHN1YiB3aWRnZXQgZXZlbnQsIGRvbid0IHVuIHNlbGVjdFxyXG4gICAgaWYgKGFjdGl2ZSkge1xyXG4gICAgICBjb25zdCB0YWdOYW1lID0gKGV2dC50YXJnZXQgJiYgZXZ0LnRhcmdldC50YWdOYW1lKSB8fCAnJ1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgIShcclxuICAgICAgICAgIHRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2EnIHx8XHJcbiAgICAgICAgICB0YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdidXR0b24nIHx8XHJcbiAgICAgICAgICBldnQuZXhiRXZlbnRUeXBlID09PSAnbGlua0NsaWNrJ1xyXG4gICAgICAgIClcclxuICAgICAgKSB7XHJcbiAgICAgICAgb25DaGFuZ2UocHJvdmlkZXJEYXRhICYmIHByb3ZpZGVyRGF0YS5yZWNvcmQpXHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG9uQ2hhbmdlKHByb3ZpZGVyRGF0YSAmJiBwcm92aWRlckRhdGEucmVjb3JkKVxyXG4gICAgfVxyXG4gICAgaWYgKGV2dC5leGJFdmVudFR5cGUgPT09ICdsaW5rQ2xpY2snKSB7XHJcbiAgICAgIGRlbGV0ZSBldnQuZXhiRXZlbnRUeXBlXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBoYW5kbGVMaW5rQ2xpY2sgPSBldnQgPT4ge1xyXG4gICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpXHJcbiAgfVxyXG5cclxuICByZW5kZXIgKCkge1xyXG4gICAgY29uc3Qge1xyXG4gICAgICBzZWxlY3RhYmxlLFxyXG4gICAgICBhY3RpdmUsXHJcbiAgICAgIGNhcmRDb25maWdzLFxyXG4gICAgICB3aWRnZXRJZCxcclxuICAgICAgbGlzdFN0eWxlLFxyXG4gICAgICBsYXlvdXRzLFxyXG4gICAgICBob3ZlckxheW91dE9wZW4sXHJcbiAgICAgIGFwcE1vZGUsXHJcbiAgICAgIGlzSG92ZXIsXHJcbiAgICAgIGxpbmtQYXJhbSxcclxuICAgICAgdXNlRGF0YVNvdXJjZXMsXHJcbiAgICAgIGl0ZW1JZGV4LFxyXG4gICAgICBoYW5kbGVMaXN0TW91c2VMZWF2ZSxcclxuICAgICAgaGFuZGxlTGlzdE1vdXNlTW92ZVxyXG4gICAgfSA9IHRoaXMucHJvcHNcclxuICAgIGxldCB7IHF1ZXJ5T2JqZWN0IH0gPSB0aGlzLnByb3BzXHJcbiAgICBjb25zdCB7IHVybCB9ID0gdGhpcy5zdGF0ZVxyXG4gICAgbGV0IGN1cnJlbnRTdGF0dXM6IFN0YXR1cyA9IFN0YXR1cy5SZWd1bGFyXHJcbiAgICBjb25zdCBpc0luQnVpbGRlciA9IHdpbmRvdy5qaW11Q29uZmlnLmlzSW5CdWlsZGVyXHJcbiAgICBsZXQgbGF5b3V0XHJcbiAgICBsZXQgYmdTdHlsZVxyXG4gICAgbGV0IHRhcmdldDogTGlua1RhcmdldFxyXG4gICAgbGV0IGxpbmtUbzogTGlua1RvXHJcbiAgICBpZiAoaXNJbkJ1aWxkZXIgJiYgYXBwTW9kZSAhPT0gQXBwTW9kZS5SdW4pIHtcclxuICAgICAgYmdTdHlsZSA9IGNhcmRDb25maWdzW1N0YXR1cy5SZWd1bGFyXS5iYWNrZ3JvdW5kU3R5bGVcclxuICAgICAgbGF5b3V0ID0gbGF5b3V0c1tTdGF0dXMuUmVndWxhcl1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGxheW91dCA9IGxheW91dHNbU3RhdHVzLlJlZ3VsYXJdXHJcbiAgICAgIGJnU3R5bGUgPSBjYXJkQ29uZmlnc1tTdGF0dXMuUmVndWxhcl0uYmFja2dyb3VuZFN0eWxlXHJcbiAgICAgIGlmIChsaW5rUGFyYW0gJiYgbGlua1BhcmFtLmxpbmtUeXBlKSB7XHJcbiAgICAgICAgdGFyZ2V0ID0gbGlua1BhcmFtLm9wZW5UeXBlXHJcbiAgICAgICAgbGlua1RvID0ge1xyXG4gICAgICAgICAgbGlua1R5cGU6IGxpbmtQYXJhbS5saW5rVHlwZVxyXG4gICAgICAgIH0gYXMgTGlua1Jlc3VsdFxyXG5cclxuICAgICAgICBpZiAobGlua1BhcmFtLmxpbmtUeXBlID09PSBMaW5rVHlwZS5XZWJBZGRyZXNzKSB7XHJcbiAgICAgICAgICBsaW5rVG8udmFsdWUgPSB1cmxcclxuICAgICAgICAgIHF1ZXJ5T2JqZWN0ID0gdW5kZWZpbmVkXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGxpbmtUby52YWx1ZSA9IGxpbmtQYXJhbS52YWx1ZVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBpZiAoaG92ZXJMYXlvdXRPcGVuICYmIGlzSG92ZXIgJiYgbGF5b3V0c1tTdGF0dXMuSG92ZXJdKSB7XHJcbiAgICAgICAgY3VycmVudFN0YXR1cyA9IFN0YXR1cy5Ib3ZlclxyXG4gICAgICAgIGxheW91dCA9IGxheW91dHM/LltTdGF0dXMuSG92ZXJdXHJcbiAgICAgICAgYmdTdHlsZSA9IGNhcmRDb25maWdzW1N0YXR1cy5Ib3Zlcl0uYmFja2dyb3VuZFN0eWxlXHJcbiAgICAgIH1cclxuICAgICAgaWYgKHNlbGVjdGFibGUgJiYgYWN0aXZlICYmIGxheW91dHNbU3RhdHVzLlNlbGVjdGVkXSkge1xyXG4gICAgICAgIGN1cnJlbnRTdGF0dXMgPSBTdGF0dXMuU2VsZWN0ZWRcclxuICAgICAgICBsYXlvdXQgPSBsYXlvdXRzPy5bU3RhdHVzLlNlbGVjdGVkXVxyXG4gICAgICAgIGJnU3R5bGUgPSBjYXJkQ29uZmlnc1tTdGF0dXMuU2VsZWN0ZWRdLmJhY2tncm91bmRTdHlsZVxyXG4gICAgICAgIHF1ZXJ5T2JqZWN0ID0gdW5kZWZpbmVkXHJcbiAgICAgICAgbGlua1RvID0gdW5kZWZpbmVkXHJcbiAgICAgICAgdGFyZ2V0ID0gdW5kZWZpbmVkXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IGN1cnJlbnRMYXlvdXRUeXBlID0gY2FyZENvbmZpZ3NbY3VycmVudFN0YXR1c10/Lmxpc3RMYXlvdXQgfHwgTGlzdExheW91dC5DVVNUT01cclxuICAgIGNvbnN0IHJlZ3VsYXJMYXlvdXQgPSBsYXlvdXRzW1N0YXR1cy5SZWd1bGFyXVxyXG4gICAgY29uc3Qgc2hvd0xheW91dCA9IGN1cnJlbnRMYXlvdXRUeXBlID09PSBMaXN0TGF5b3V0LkFVVE8gPyByZWd1bGFyTGF5b3V0IDogbGF5b3V0XHJcblxyXG4gICAgY29uc3QgbWVyZ2VkU3R5bGU6IGFueSA9IHtcclxuICAgICAgLi4uc3R5bGVVdGlscy50b0NTU1N0eWxlKGJnU3R5bGUgfHwgKHt9IGFzIGFueSkpXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY2FyZENvbnRlbnRTdHlsZTogYW55ID0ge1xyXG4gICAgICAuLi5zdHlsZVV0aWxzLnRvQ1NTU3R5bGUoXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgYm9yZGVyUmFkaXVzOiBiZ1N0eWxlPy5ib3JkZXJSYWRpdXMgfHwgMFxyXG4gICAgICAgIH0gfHwgKHt9IGFzIGFueSlcclxuICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG5ld1Byb3ZpZGVyRGF0YSA9IHRoaXMuZ2V0TmV3UHJvdmlkZXJEYXRhKClcclxuICAgIGlmICghdGhpcy5pc1Byb3ZpZGVyRXF1YWwobmV3UHJvdmlkZXJEYXRhLCB0aGlzLnByb3ZpZGVyRGF0YSkpIHtcclxuICAgICAgdGhpcy5wcm92aWRlckRhdGEgPSBuZXdQcm92aWRlckRhdGFcclxuICAgICAgdGhpcy51cGRhdGVFeHByZXNzaW9uUmVjb3JkcygpXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgPFJlcGVhdGVkRGF0YVNvdXJjZVByb3ZpZGVyIGRhdGE9e3RoaXMucHJvdmlkZXJEYXRhfT5cclxuICAgICAgICA8TGlzdEdyb3VwSXRlbVxyXG4gICAgICAgICAgYWN0aXZlPXtzZWxlY3RhYmxlICYmIGFjdGl2ZX1cclxuICAgICAgICAgIGNzcz17dGhpcy5nZXRTdHlsZShjdXJyZW50U3RhdHVzKX1cclxuICAgICAgICAgIHN0eWxlPXt7IC4uLmxpc3RTdHlsZSwgLi4uY2FyZENvbnRlbnRTdHlsZSB9fVxyXG4gICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdzdXJmYWNlLTEnLCBgbGlzdC1jYXJkLSR7d2lkZ2V0SWR9YCl9XHJcbiAgICAgICAgICByb2xlPSdsaXN0Q2FyZFZpZXdlcidcclxuICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuaGFuZGxlSXRlbUNsaWNrfVxyXG4gICAgICAgID5cclxuICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgY2xhc3NOYW1lPSdsaXN0LWNhcmQtY29udGVudCBkLWZsZXgnXHJcbiAgICAgICAgICAgIG9uTW91c2VMZWF2ZT17aGFuZGxlTGlzdE1vdXNlTGVhdmV9XHJcbiAgICAgICAgICAgIG9uTW91c2VNb3ZlPXsoKSA9PiB7IGhhbmRsZUxpc3RNb3VzZU1vdmUoaXRlbUlkZXgpIH19XHJcbiAgICAgICAgICAgIHN0eWxlPXttZXJnZWRTdHlsZX0+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwb3NpdGlvbi1yZWxhdGl2ZSBoLTEwMCB3LTEwMCc+XHJcbiAgICAgICAgICAgICAgPEZyYWdtZW50PlxyXG4gICAgICAgICAgICAgICAgPExpbmtcclxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdwLTAgdy0xMDAgaC0xMDAgYm9yZGVyLTAgbGlzdC1jbGVhci1iYWNrZ3JvdW5kIGxpc3QtbGluaydcclxuICAgICAgICAgICAgICAgICAgcmVmPXt0aGlzLmxpbmtSZWZ9XHJcbiAgICAgICAgICAgICAgICAgIHRvPXtsaW5rVG99XHJcbiAgICAgICAgICAgICAgICAgIHRhcmdldD17dGFyZ2V0fVxyXG4gICAgICAgICAgICAgICAgICBxdWVyeU9iamVjdD17cXVlcnlPYmplY3R9XHJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuaGFuZGxlTGlua0NsaWNrfVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkLWZsZXggdy0xMDAgaC0xMDAgbGlzdC1pdGVtLWNvbicgcmVmPXt0aGlzLmxheW91dFJlZn0+XHJcbiAgICAgICAgICAgICAgICAgIDxMYXlvdXRFbnRyeSBsYXlvdXRzPXtzaG93TGF5b3V0fSAvPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgPC9GcmFnbWVudD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDxFeHByZXNzaW9uUmVzb2x2ZXJDb21wb25lbnRcclxuICAgICAgICAgICAgdXNlRGF0YVNvdXJjZXM9e3VzZURhdGFTb3VyY2VzfVxyXG4gICAgICAgICAgICBleHByZXNzaW9uPXtsaW5rUGFyYW0/LmV4cHJlc3Npb259XHJcbiAgICAgICAgICAgIC8qIHJlY29yZHM9e3RoaXMuZXhwcmVzc2lvblJlY29yZHN9ICAqLyBvbkNoYW5nZT17XHJcbiAgICAgICAgICAgICAgdGhpcy5vblVybEV4cFJlc29sdmVDaGFuZ2VcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB3aWRnZXRJZD17dGhpcy5wcm9wcy53aWRnZXRJZH1cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgPC9MaXN0R3JvdXBJdGVtPlxyXG4gICAgICA8L1JlcGVhdGVkRGF0YVNvdXJjZVByb3ZpZGVyPlxyXG4gICAgKVxyXG4gIH1cclxufVxyXG4iLCIvKiogQGpzeCBqc3ggKi9cclxuaW1wb3J0IHtcclxuICBSZWFjdCxcclxuICBqc3gsXHJcbiAgSW1tdXRhYmxlQXJyYXksXHJcbiAgU2VyaWFsaXplZFN0eWxlcyxcclxuICBJTVRoZW1lVmFyaWFibGVzLFxyXG4gIEFwcE1vZGUsXHJcbiAgY3NzXHJcbn0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQge1xyXG4gIERyb3Bkb3duLFxyXG4gIERyb3Bkb3duVG9nZ2xlLFxyXG4gIERyb3Bkb3duTWVudSxcclxuICBEcm9wZG93bkl0ZW0sXHJcbiAgRGlyZWN0aW9uLFxyXG4gIE1vZGlmaWVyc1xyXG59IGZyb20gJ2ppbXUtdWknXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIE15RHJvcERvd25JdGVtIHtcclxuICBsYWJlbDogc3RyaW5nXHJcbiAgZXZlbnQ6IChldnQsIGl0ZW0/OiBNeURyb3BEb3duSXRlbSkgPT4gdm9pZFxyXG4gIGhpZGU/OiBib29sZWFuXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgTXlEcm9wZG93blByb3BzIHtcclxuICBhcHBNb2RlOiBBcHBNb2RlXHJcbiAgdGhlbWU/OiBJTVRoZW1lVmFyaWFibGVzXHJcbiAgdG9nZ2xlVGl0bGU/OiBzdHJpbmdcclxuICB0b2dnbGVJc0ljb24/OiBib29sZWFuXHJcbiAgdG9nZ2xlVHlwZT86IHN0cmluZ1xyXG4gIGl0ZW1zPzogSW1tdXRhYmxlQXJyYXk8TXlEcm9wRG93bkl0ZW0+XHJcbiAgZmx1aWQ/OiBib29sZWFuXHJcbiAgc2l6ZT86IHN0cmluZ1xyXG4gIGFwcGVuZFRvQm9keT86IGJvb2xlYW5cclxuICBjYXJldD86IGJvb2xlYW5cclxuICBtb2RpZmllcnM/OiBNb2RpZmllcnNcclxuICBpc0Ryb3BEb3duT3Blbj86IGJvb2xlYW5cclxuICBkaXJlY3Rpb24/OiBEaXJlY3Rpb25cclxuICBjbGFzc05hbWU/OiBzdHJpbmdcclxuICB3aXRoQnVpbGRlclN0eWxlPzogYW55XHJcbiAgc2hvd0FjdGl2ZT86IGJvb2xlYW5cclxuICBhY3RpdmVMYWJlbD86IHN0cmluZ1xyXG4gIG1lbnVDc3M/OiAodGhlbWU6IElNVGhlbWVWYXJpYWJsZXMpID0+IFNlcmlhbGl6ZWRTdHlsZXNcclxuICBtZW51Q29udGVudD86ICh0aGVtZTogSU1UaGVtZVZhcmlhYmxlcykgPT4gYW55XHJcbiAgdG9nZ2xlQ29udGVudD86ICh0aGVtZTogSU1UaGVtZVZhcmlhYmxlcykgPT4gYW55XHJcbiAgb25Ecm9wRG93bk9wZW5DaGFuZ2U/OiAoaXNPcGVuOiBib29sZWFuKSA9PiB2b2lkXHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTXlEcm9wRG93biBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8XHJcbk15RHJvcGRvd25Qcm9wcyxcclxueyBpc09wZW46IGJvb2xlYW4gfVxyXG4+IHtcclxuICBNeURyb3Bkb3duOiBhbnlcclxuICBNeURyb3Bkb3duVG9nZ2xlOiBhbnlcclxuICBNeURyb3Bkb3duTWVudTogYW55XHJcbiAgTXlEcm9wZG93bkl0ZW06IGFueVxyXG5cclxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKVxyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgaXNPcGVuOiBmYWxzZVxyXG4gICAgfVxyXG4gICAgY29uc3QgeyB3aXRoQnVpbGRlclN0eWxlIH0gPSBwcm9wc1xyXG4gICAgdGhpcy5NeURyb3Bkb3duID0gd2l0aEJ1aWxkZXJTdHlsZSA/IHdpdGhCdWlsZGVyU3R5bGUoRHJvcGRvd24pIDogRHJvcGRvd25cclxuICAgIHRoaXMuTXlEcm9wZG93blRvZ2dsZSA9IHdpdGhCdWlsZGVyU3R5bGVcclxuICAgICAgPyB3aXRoQnVpbGRlclN0eWxlKERyb3Bkb3duVG9nZ2xlKVxyXG4gICAgICA6IERyb3Bkb3duVG9nZ2xlXHJcbiAgICB0aGlzLk15RHJvcGRvd25NZW51ID0gd2l0aEJ1aWxkZXJTdHlsZVxyXG4gICAgICA/IHdpdGhCdWlsZGVyU3R5bGUoRHJvcGRvd25NZW51KVxyXG4gICAgICA6IERyb3Bkb3duTWVudVxyXG4gICAgdGhpcy5NeURyb3Bkb3duSXRlbSA9IHdpdGhCdWlsZGVyU3R5bGVcclxuICAgICAgPyB3aXRoQnVpbGRlclN0eWxlKERyb3Bkb3duSXRlbSlcclxuICAgICAgOiBEcm9wZG93bkl0ZW1cclxuICB9XHJcblxyXG4gIG9uRHJvcERvd25Ub2dnbGUgPSBldnQgPT4ge1xyXG4gICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpXHJcblxyXG4gICAgY29uc3QgeyBpc0Ryb3BEb3duT3Blbiwgb25Ecm9wRG93bk9wZW5DaGFuZ2UgfSA9IHRoaXMucHJvcHNcclxuICAgIGlmIChpc0Ryb3BEb3duT3BlbiAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIG9uRHJvcERvd25PcGVuQ2hhbmdlICYmIG9uRHJvcERvd25PcGVuQ2hhbmdlKCFpc0Ryb3BEb3duT3BlbilcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IHsgaXNPcGVuIH0gPSB0aGlzLnN0YXRlXHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBpc09wZW46ICFpc09wZW4gfSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uSXRlbUNsaWNrID0gKGV2dCwgaXRlbSkgPT4ge1xyXG4gICAgY29uc3QgeyBpc0Ryb3BEb3duT3Blbiwgb25Ecm9wRG93bk9wZW5DaGFuZ2UgfSA9IHRoaXMucHJvcHNcclxuICAgIGlmIChpc0Ryb3BEb3duT3BlbiAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIG9uRHJvcERvd25PcGVuQ2hhbmdlICYmIG9uRHJvcERvd25PcGVuQ2hhbmdlKGZhbHNlKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlzT3BlbjogZmFsc2UgfSlcclxuICAgIH1cclxuICAgIGl0ZW0uZXZlbnQoZXZ0LCBpdGVtKVxyXG4gICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpXHJcbiAgICBldnQubmF0aXZlRXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKClcclxuICB9XHJcblxyXG4gIG9uRHJvcERvd25Nb3VzZUNsaWNrID0gZXZ0ID0+IHtcclxuICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKVxyXG4gICAgZXZ0Lm5hdGl2ZUV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpXHJcbiAgfVxyXG5cclxuICBnZXRTdHlsZSA9ICgpID0+IHtcclxuICAgIGNvbnN0IHsgdGhlbWUgfSA9IHRoaXMucHJvcHNcclxuICAgIHJldHVybiBjc3NgXHJcbiAgICAgICYgYnV0dG9uIHtcclxuICAgICAgICBwYWRkaW5nOiAwO1xyXG4gICAgICB9XHJcbiAgICAgIC5saXN0LXRvZ2dsZS1idXR0b24ge1xyXG4gICAgICAgIGJhY2tncm91bmQ6ICR7dGhlbWUuY29sb3JzPy5wYWxldHRlPy5saWdodD8uWzUwMF19O1xyXG4gICAgICAgIGJvcmRlcjogbm9uZTtcclxuICAgICAgICAmOmhvdmVyLCAmW2FyaWEtZXhwYW5kZWQ9XCJ0cnVlXCJdIHtcclxuICAgICAgICAgIGJhY2tncm91bmQ6ICR7dGhlbWUuY29sb3JzPy5wYWxldHRlPy5saWdodD8uWzgwMF19O1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgYFxyXG4gIH1cclxuXHJcbiAgcmVuZGVyICgpIHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgaXRlbXMsXHJcbiAgICAgIHRvZ2dsZUNvbnRlbnQsXHJcbiAgICAgIGNhcmV0LFxyXG4gICAgICB0b2dnbGVUeXBlLFxyXG4gICAgICBtZW51Q29udGVudCxcclxuICAgICAgYXBwTW9kZSxcclxuICAgICAgbW9kaWZpZXJzLFxyXG4gICAgICB0b2dnbGVJc0ljb24sXHJcbiAgICAgIHRoZW1lLFxyXG4gICAgICBpc0Ryb3BEb3duT3BlbixcclxuICAgICAgc2l6ZSxcclxuICAgICAgYXBwZW5kVG9Cb2R5LFxyXG4gICAgICB0b2dnbGVUaXRsZSxcclxuICAgICAgZGlyZWN0aW9uLFxyXG4gICAgICBtZW51Q3NzLFxyXG4gICAgICBjbGFzc05hbWUsXHJcbiAgICAgIHNob3dBY3RpdmUsXHJcbiAgICAgIGFjdGl2ZUxhYmVsLFxyXG4gICAgICBmbHVpZFxyXG4gICAgfSA9IHRoaXMucHJvcHNcclxuICAgIGxldCB7IGlzT3BlbiB9ID0gdGhpcy5zdGF0ZVxyXG4gICAgaXNPcGVuID0gaXNEcm9wRG93bk9wZW4gPT09IHVuZGVmaW5lZCA/IGlzT3BlbiA6IGlzRHJvcERvd25PcGVuXHJcbiAgICBjb25zdCB7XHJcbiAgICAgIE15RHJvcGRvd24sXHJcbiAgICAgIE15RHJvcGRvd25Ub2dnbGUsXHJcbiAgICAgIE15RHJvcGRvd25NZW51LFxyXG4gICAgICBNeURyb3Bkb3duSXRlbVxyXG4gICAgfSA9IHRoaXNcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxNeURyb3Bkb3duXHJcbiAgICAgICAgc2l6ZT17c2l6ZX1cclxuICAgICAgICB0b2dnbGU9e3RoaXMub25Ecm9wRG93blRvZ2dsZX1cclxuICAgICAgICBkaXJlY3Rpb249e2RpcmVjdGlvbn1cclxuICAgICAgICBmbHVpZD17Zmx1aWR9XHJcbiAgICAgICAgaXNPcGVuPXtpc09wZW4gJiYgYXBwTW9kZSAhPT0gQXBwTW9kZS5EZXNpZ259XHJcbiAgICAgICAgY2xhc3NOYW1lPXtgbXktZHJvcGRvd24gJHtjbGFzc05hbWV9YH1cclxuICAgICAgICBjc3M9e3RoaXMuZ2V0U3R5bGUoKX1cclxuICAgICAgPlxyXG4gICAgICAgIHt0b2dnbGVDb250ZW50ICYmIChcclxuICAgICAgICAgIDxNeURyb3Bkb3duVG9nZ2xlXHJcbiAgICAgICAgICAgIGljb249e3RvZ2dsZUlzSWNvbn1cclxuICAgICAgICAgICAgdGl0bGU9e3RvZ2dsZVRpdGxlfVxyXG4gICAgICAgICAgICBzaXplPXtzaXplfVxyXG4gICAgICAgICAgICB0eXBlPXt0b2dnbGVUeXBlfVxyXG4gICAgICAgICAgICBjYXJldD17Y2FyZXR9XHJcbiAgICAgICAgICAgIGNsYXNzTmFtZT0nbGlzdC10b2dnbGUtYnV0dG9uJ1xyXG4gICAgICAgICAgPlxyXG4gICAgICAgICAgICB7dG9nZ2xlQ29udGVudCAmJiB0b2dnbGVDb250ZW50KHRoZW1lKX1cclxuICAgICAgICAgIDwvTXlEcm9wZG93blRvZ2dsZT5cclxuICAgICAgICApfVxyXG4gICAgICAgIDxNeURyb3Bkb3duTWVudVxyXG4gICAgICAgICAgYXBwZW5kVG9Cb2R5PXthcHBlbmRUb0JvZHl9XHJcbiAgICAgICAgICBtb2RpZmllcnM9e21vZGlmaWVyc31cclxuICAgICAgICAgIGNzcz17bWVudUNzcyAmJiBtZW51Q3NzKHRoZW1lKX1cclxuICAgICAgICA+XHJcbiAgICAgICAgICB7bWVudUNvbnRlbnRcclxuICAgICAgICAgICAgPyBtZW51Q29udGVudCh0aGVtZSlcclxuICAgICAgICAgICAgOiBpdGVtcyAmJlxyXG4gICAgICAgICAgICAgIGl0ZW1zLmFzTXV0YWJsZSgpLm1hcCgoaXRlbTogTXlEcm9wRG93bkl0ZW0sIGk6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgIWl0ZW0uaGlkZSAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPE15RHJvcGRvd25JdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICBrZXk9e2l9XHJcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J25vLXVzZXItc2VsZWN0J1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2l0ZW0ubGFiZWx9XHJcbiAgICAgICAgICAgICAgICAgICAgICBhY3RpdmU9e3Nob3dBY3RpdmUgJiYgaXRlbS5sYWJlbCA9PT0gYWN0aXZlTGFiZWx9XHJcbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtldnQgPT4gdGhpcy5vbkl0ZW1DbGljayhldnQsIGl0ZW0pfVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgIHtpdGVtLmxhYmVsfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvTXlEcm9wZG93bkl0ZW0+XHJcbiAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICB9KX1cclxuICAgICAgICA8L015RHJvcGRvd25NZW51PlxyXG4gICAgICA8L015RHJvcGRvd24+XHJcbiAgICApXHJcbiAgfVxyXG59XHJcbiIsIi8qKiBAanN4IGpzeCAqL1xyXG5pbXBvcnQge1xyXG4gIFJlYWN0LFxyXG4gIFRoZW1lVmFyaWFibGVzLFxyXG4gIFNlcmlhbGl6ZWRTdHlsZXMsXHJcbiAgY3NzLFxyXG4gIGpzeCxcclxuICBwb2xpc2hlZCxcclxuICBlc3JpLFxyXG4gIEFwcE1vZGVcclxufSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB7IFRleHRJbnB1dCwgQnV0dG9uLCBJbnB1dFByb3BzLCBQb3BwZXIgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgeyBTdWdnZXN0aW9uIH0gZnJvbSAnLi4vLi4vY29uZmlnJ1xyXG5pbXBvcnQgeyBDbG9zZU91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9lZGl0b3IvY2xvc2UnXHJcbmltcG9ydCB7IFNlYXJjaE91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9lZGl0b3Ivc2VhcmNoJ1xyXG5pbXBvcnQgeyBBcnJvd0xlZnRPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZGlyZWN0aW9uYWwvYXJyb3ctbGVmdCdcclxuY29uc3QgU2FuaXRpemVyID0gZXNyaS5TYW5pdGl6ZXJcclxuY29uc3Qgc2FuaXRpemVyID0gbmV3IFNhbml0aXplcigpXHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHRoZW1lOiBUaGVtZVZhcmlhYmxlc1xyXG4gIHBsYWNlaG9sZGVyPzogc3RyaW5nXHJcbiAgc2VhcmNoVGV4dD86IHN0cmluZ1xyXG4gIG9uU2VhcmNoVGV4dENoYW5nZT86IChzZWFyY2hUZXh0OiBzdHJpbmcpID0+IHZvaWRcclxuICBmb3JtYXRNZXNzYWdlPzogKGlkOiBzdHJpbmcpID0+IHN0cmluZ1xyXG4gIG9uU3VibWl0PzogKHNlYXJjaFRleHQ6IHN0cmluZywgaXNFbnRlcjogYm9vbGVhbikgPT4gdm9pZFxyXG4gIHNob3dDbGVhcj86IGJvb2xlYW5cclxuICBoaWRlU2VhcmNoSWNvbj86IGJvb2xlYW5cclxuICBpbnB1dFJlZj86IChyZWY6IEhUTUxJbnB1dEVsZW1lbnQpID0+IHZvaWRcclxuICBzZWFyY2hTdWdnZXN0aW9uOiBTdWdnZXN0aW9uW11cclxuICBzdWdnZXN0aW9uV2lkdGg6IG51bWJlclxyXG4gIHNob3dMb2FkaW5nOiBib29sZWFuXHJcbiAgaXNTaG93QmFja0J1dHRvbj86IGJvb2xlYW5cclxuICBhcHBNb2RlOiBBcHBNb2RlXHJcbiAgdG9nZ2xlU2VhcmNoQm94VmlzaWJsZT86IChpc1Zpc2libGU6IGJvb2xlYW4pID0+IHZvaWRcclxufVxyXG5cclxuaW50ZXJmYWNlIFN0YXRzIHtcclxuICBzZWFyY2hUZXh0OiBzdHJpbmdcclxuICBpc1Nob3dTdWdnZXN0aW9uOiBib29sZWFuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlYXJjaEJveCBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8XHJcblByb3BzICYgSW5wdXRQcm9wcyxcclxuU3RhdHNcclxuPiB7XHJcbiAgcmVmZXJlbmNlOiBIVE1MRGl2RWxlbWVudFxyXG4gIHN1Z2dlc3Rpb25SZXF1ZXN0VGltZW91dDogYW55XHJcbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcylcclxuICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIHNlYXJjaFRleHQ6IHByb3BzLnNlYXJjaFRleHQgfHwgJycsXHJcbiAgICAgIGlzU2hvd1N1Z2dlc3Rpb246IGZhbHNlXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnREaWRVcGRhdGUgKHByZVByb3BzKSB7XHJcbiAgICBpZiAoXHJcbiAgICAgIHRoaXMucHJvcHMuc2VhcmNoVGV4dCAhPT0gcHJlUHJvcHMuc2VhcmNoVGV4dCAmJlxyXG4gICAgICB0aGlzLnByb3BzLnNlYXJjaFRleHQgIT09IHRoaXMuc3RhdGUuc2VhcmNoVGV4dFxyXG4gICAgKSB7XHJcbiAgICAgIGNvbnN0IHsgc2VhcmNoVGV4dCB9ID0gdGhpcy5wcm9wc1xyXG4gICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICBzZWFyY2hUZXh0OiBzZWFyY2hUZXh0XHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5wcm9wcz8uYXBwTW9kZSA9PT0gQXBwTW9kZS5EZXNpZ24gJiYgdGhpcy5zdGF0ZS5pc1Nob3dTdWdnZXN0aW9uKSB7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgIGlzU2hvd1N1Z2dlc3Rpb246IGZhbHNlLFxyXG4gICAgICAgIHNlYXJjaFRleHQ6ICcnXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBoYW5kbGVDaGFuZ2UgPSBzZWFyY2hUZXh0ID0+IHtcclxuICAgIHRoaXMuc2V0U3RhdGUoXHJcbiAgICAgIHtcclxuICAgICAgICBzZWFyY2hUZXh0OiBzZWFyY2hUZXh0LFxyXG4gICAgICAgIGlzU2hvd1N1Z2dlc3Rpb246IHNlYXJjaFRleHQ/Lmxlbmd0aCA+IDJcclxuICAgICAgfSxcclxuICAgICAgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgb25TZWFyY2hUZXh0Q2hhbmdlIH0gPSB0aGlzLnByb3BzXHJcbiAgICAgICAgaWYgKG9uU2VhcmNoVGV4dENoYW5nZSkge1xyXG4gICAgICAgICAgb25TZWFyY2hUZXh0Q2hhbmdlKHNlYXJjaFRleHQpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBoYW5kbGVTdWJtaXQgPSAodmFsdWUsIGlzRW50ZXIgPSBmYWxzZSkgPT4ge1xyXG4gICAgY29uc3QgeyBvblN1Ym1pdCB9ID0gdGhpcy5wcm9wc1xyXG4gICAgaWYgKG9uU3VibWl0KSB7XHJcbiAgICAgIG9uU3VibWl0KHZhbHVlLCBpc0VudGVyKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25LZXlVcCA9IGV2dCA9PiB7XHJcbiAgICBpZiAoIWV2dCB8fCAhZXZ0LnRhcmdldCkgcmV0dXJuXHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gJ0VudGVyJykge1xyXG4gICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICBpc1Nob3dTdWdnZXN0aW9uOiBmYWxzZVxyXG4gICAgICB9KVxyXG4gICAgICB0aGlzLmhhbmRsZVN1Ym1pdChldnQudGFyZ2V0LnZhbHVlLCB0cnVlKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25TdWdnZXN0aW9uQ29uZmlybSA9IHN1Z2dlc3Rpb24gPT4ge1xyXG4gICAgdGhpcy5zZXRTdGF0ZShcclxuICAgICAge1xyXG4gICAgICAgIHNlYXJjaFRleHQ6IHN1Z2dlc3Rpb24sXHJcbiAgICAgICAgaXNTaG93U3VnZ2VzdGlvbjogZmFsc2VcclxuICAgICAgfSxcclxuICAgICAgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuaGFuZGxlU3VibWl0KHN1Z2dlc3Rpb24pXHJcbiAgICAgICAgdGhpcy5wcm9wcz8udG9nZ2xlU2VhcmNoQm94VmlzaWJsZSh0cnVlKVxyXG4gICAgICB9XHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBoYW5kbGVDbGVhciA9IGV2dCA9PiB7XHJcbiAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgc2VhcmNoVGV4dDogJydcclxuICAgIH0pXHJcbiAgICBldnQuc3RvcFByb3BhZ2F0aW9uKClcclxuICB9XHJcblxyXG4gIGdldFN0eWxlID0gKCk6IFNlcmlhbGl6ZWRTdHlsZXMgPT4ge1xyXG4gICAgY29uc3QgeyB0aGVtZSB9ID0gdGhpcy5wcm9wc1xyXG5cclxuICAgIHJldHVybiBjc3NgXHJcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgICAgLnNlYXJjaC1pbnB1dCB7XHJcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogLTFweDtcclxuICAgICAgICBwYWRkaW5nLWxlZnQ6IDNweDtcclxuICAgICAgICBib3JkZXI6IDA7XHJcbiAgICAgICAgLy8gYm9yZGVyLWJvdHRvbS13aWR0aDogMXB4O1xyXG4gICAgICAgIC8vIGJvcmRlci1ib3R0b20tc3R5bGU6IHNvbGlkO1xyXG4gICAgICAgIC8vIGJvcmRlci1jb2xvcjogJHt0aGVtZS5jb2xvcnMucHJpbWFyeX07XHJcbiAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XHJcbiAgICAgICAgaGVpZ2h0OiAke3BvbGlzaGVkLnJlbSgyNil9O1xyXG4gICAgICAgIG1pbi13aWR0aDogMDtcclxuICAgICAgICAuaW5wdXQtd3JhcHBlciB7XHJcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcclxuICAgICAgICAgIGJvcmRlcjogbm9uZTtcclxuICAgICAgICAgIHBhZGRpbmc6IDA7XHJcbiAgICAgICAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIC5zZWFyY2gtaW5wdXQ6Zm9jdXMge1xyXG4gICAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xyXG4gICAgICB9XHJcbiAgICAgIC5zZWFyY2gtbG9hZGluZy1jb24ge1xyXG4gICAgICAgIEBrZXlmcmFtZXMgbG9hZGluZyB7XHJcbiAgICAgICAgICAwJSB7dHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7IH07XHJcbiAgICAgICAgICAxMDAlIHt0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgd2lkdGg6ICR7cG9saXNoZWQucmVtKDEzKX07XHJcbiAgICAgICAgaGVpZ2h0OiAke3BvbGlzaGVkLnJlbSgxMyl9O1xyXG4gICAgICAgIG1pbi13aWR0aDogJHtwb2xpc2hlZC5yZW0oMTMpfTtcclxuICAgICAgICBib3JkZXI6IDJweCBzb2xpZCAke3RoZW1lPy5jb2xvcnM/LnBhbGV0dGU/LnNlY29uZGFyeT8uWzMwMF19O1xyXG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcclxuICAgICAgICBib3JkZXItdG9wOiAycHggc29saWQgJHt0aGVtZT8uY29sb3JzPy5wYWxldHRlPy5wcmltYXJ5Py5bNTAwXX07XHJcbiAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICAgICAgICBhbmltYXRpb246bG9hZGluZyAycyBpbmZpbml0ZSBsaW5lYXI7XHJcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiAke3BvbGlzaGVkLnJlbSg0KX07XHJcbiAgICAgIH1cclxuICAgICAgLmNsZWFyLXNlYXJjaCwgLnNlYXJjaC1iYWNrIHtcclxuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgICAgICAgcGFkZGluZzogJHtwb2xpc2hlZC5yZW0oNil9O1xyXG4gICAgICAgIGJhY2tncm91bmQ6IG5vbmU7XHJcbiAgICAgICAgYm9yZGVyOiBub25lO1xyXG4gICAgICAgIGNvbG9yOiAke3RoZW1lPy5jb2xvcnM/LnBhbGV0dGU/LmRhcms/Lls4MDBdfVxyXG4gICAgICB9XHJcbiAgICAgIC5zZWFyY2gtYmFjayB7XHJcbiAgICAgICAgbWFyZ2luLWxlZnQ6ICR7cG9saXNoZWQucmVtKC02KX07XHJcbiAgICAgIH1cclxuICAgICAgLmNsZWFyLXNlYXJjaDpob3ZlciB7XHJcbiAgICAgICAgYmFja2dyb3VuZDogbm9uZTtcclxuICAgICAgfVxyXG4gICAgYFxyXG4gIH1cclxuXHJcbiAgZ2V0U3VnZ2VzdGlvbkxpc3RTdHlsZSA9ICgpOiBTZXJpYWxpemVkU3R5bGVzID0+IHtcclxuICAgIGNvbnN0IHsgc3VnZ2VzdGlvbldpZHRoIH0gPSB0aGlzLnByb3BzXHJcbiAgICByZXR1cm4gY3NzYFxyXG4gICAgICAmIHtcclxuICAgICAgICBtYXgtaGVpZ2h0OiAke3BvbGlzaGVkLnJlbSgzMDApfTtcclxuICAgICAgICBtaW4td2lkdGg6ICR7cG9saXNoZWQucmVtKHN1Z2dlc3Rpb25XaWR0aCl9O1xyXG4gICAgICAgIG92ZXJmbG93OiBhdXRvO1xyXG4gICAgICB9XHJcbiAgICAgIGJ1dHRvbiB7XHJcbiAgICAgICAgZGlzcGxheTogYmxvY2s7XHJcbiAgICAgICAgd2lkdGg6IDEwMCU7XHJcbiAgICAgICAgdGV4dC1hbGlnbjogbGVmdDtcclxuICAgICAgICBib3JkZXI6IG5vbmU7XHJcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMDtcclxuICAgICAgfVxyXG4gICAgICBidXR0b246aG92ZXIge1xyXG4gICAgICAgIGJvcmRlcjogbm9uZTtcclxuICAgICAgfVxyXG4gICAgYFxyXG4gIH1cclxuXHJcbiAgY2xlYXJTZWFyY2hUZXh0ID0gKCkgPT4ge1xyXG4gICAgY29uc3QgeyBzZWFyY2hUZXh0IH0gPSB0aGlzLnN0YXRlXHJcbiAgICBpZiAoc2VhcmNoVGV4dCkge1xyXG4gICAgICB0aGlzLmhhbmRsZUNoYW5nZSgnJylcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgaXNTaG93U3VnZ2VzdGlvbjogZmFsc2VcclxuICAgICAgfSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldFRleHRJbnB1dFN1ZmZpeEVsZW1lbnQgPSAoKSA9PiB7XHJcbiAgICBjb25zdCB7IHRoZW1lLCBzaG93TG9hZGluZywgZm9ybWF0TWVzc2FnZSB9ID0gdGhpcy5wcm9wc1xyXG4gICAgY29uc3QgeyBzZWFyY2hUZXh0IH0gPSB0aGlzLnN0YXRlXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlcic+XHJcbiAgICAgICAge3Nob3dMb2FkaW5nICYmIDxkaXYgY2xhc3NOYW1lPSdzZWFyY2gtbG9hZGluZy1jb24nIC8+fVxyXG4gICAgICAgIHtzZWFyY2hUZXh0ICYmIChcclxuICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgY29sb3I9J3RlcnRpYXJ5J1xyXG4gICAgICAgICAgICBjbGFzc05hbWU9J2NsZWFyLXNlYXJjaCdcclxuICAgICAgICAgICAgaWNvblxyXG4gICAgICAgICAgICBzaXplPSdzbSdcclxuICAgICAgICAgICAgb25DbGljaz17dGhpcy5jbGVhclNlYXJjaFRleHR9XHJcbiAgICAgICAgICAgIHRpdGxlPXtmb3JtYXRNZXNzYWdlKCdjbGVhclNlYXJjaCcpfVxyXG4gICAgICAgICAgPlxyXG4gICAgICAgICAgICA8Q2xvc2VPdXRsaW5lZCBzaXplPXsxNH0gY29sb3I9e3RoZW1lLmNvbG9ycy5wYWxldHRlLmRhcmtbODAwXX0vPlxyXG4gICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgKX1cclxuICAgICAgPC9kaXY+XHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBnZXRUZXh0SW5wdXRQcmVmaXhFbGVtZW50ID0gKCkgPT4ge1xyXG4gICAgY29uc3QgeyB0aGVtZSB9ID0gdGhpcy5wcm9wc1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgPEJ1dHRvblxyXG4gICAgICAgIHR5cGU9J3RlcnRpYXJ5J1xyXG4gICAgICAgIGljb25cclxuICAgICAgICBzaXplPSdzbSdcclxuICAgICAgICBvbkNsaWNrPXtldnQgPT4gdGhpcy5oYW5kbGVTdWJtaXQodGhpcy5zdGF0ZS5zZWFyY2hUZXh0KX1cclxuICAgICAgPlxyXG4gICAgICAgIDxTZWFyY2hPdXRsaW5lZCBzaXplPXsxNn0gY29sb3I9e3RoZW1lLmNvbG9ycy5wYWxldHRlLmxpZ2h0WzgwMF19Lz5cclxuICAgICAgPC9CdXR0b24+XHJcbiAgICApXHJcbiAgfVxyXG5cclxuICByZW5kZXIgKCkge1xyXG4gICAgY29uc3Qge1xyXG4gICAgICBwbGFjZWhvbGRlcixcclxuICAgICAgY2xhc3NOYW1lLFxyXG4gICAgICBzaG93Q2xlYXIsXHJcbiAgICAgIGhpZGVTZWFyY2hJY29uLFxyXG4gICAgICBpbnB1dFJlZixcclxuICAgICAgb25Gb2N1cyxcclxuICAgICAgb25CbHVyLFxyXG4gICAgICB0aGVtZSxcclxuICAgICAgc2VhcmNoU3VnZ2VzdGlvbixcclxuICAgICAgZm9ybWF0TWVzc2FnZSxcclxuICAgICAgaXNTaG93QmFja0J1dHRvblxyXG4gICAgfSA9IHRoaXMucHJvcHNcclxuICAgIGNvbnN0IHsgc2VhcmNoVGV4dCwgaXNTaG93U3VnZ2VzdGlvbiB9ID0gdGhpcy5zdGF0ZVxyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXY+XHJcbiAgICAgICAgPGRpdlxyXG4gICAgICAgICAgY3NzPXt0aGlzLmdldFN0eWxlKCl9XHJcbiAgICAgICAgICBjbGFzc05hbWU9e2BkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyICR7Y2xhc3NOYW1lfWB9XHJcbiAgICAgICAgPlxyXG4gICAgICAgICAge2lzU2hvd0JhY2tCdXR0b24gJiYgKFxyXG4gICAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgICAgY29sb3I9J3RlcnRpYXJ5J1xyXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT0nc2VhcmNoLWJhY2snXHJcbiAgICAgICAgICAgICAgaWNvblxyXG4gICAgICAgICAgICAgIHNpemU9J3NtJ1xyXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e2V2dCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzPy50b2dnbGVTZWFyY2hCb3hWaXNpYmxlKGZhbHNlKVxyXG4gICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgdGl0bGU9e2Zvcm1hdE1lc3NhZ2UoJ3RvcFRvb2xCYWNrJyl9XHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICA8QXJyb3dMZWZ0T3V0bGluZWQgc2l6ZT17MjB9IGNvbG9yPXt0aGVtZS5jb2xvcnMucGFsZXR0ZS5kYXJrWzgwMF19Lz5cclxuICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICApfVxyXG4gICAgICAgICAgPFRleHRJbnB1dFxyXG4gICAgICAgICAgICBjbGFzc05hbWU9J3NlYXJjaC1pbnB1dCBmbGV4LWdyb3ctMSdcclxuICAgICAgICAgICAgcmVmPXtpbnB1dFJlZn1cclxuICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3BsYWNlaG9sZGVyfVxyXG4gICAgICAgICAgICBvbkNoYW5nZT17ZSA9PiB0aGlzLmhhbmRsZUNoYW5nZShlLnRhcmdldC52YWx1ZSl9XHJcbiAgICAgICAgICAgIG9uQmx1cj17b25CbHVyfVxyXG4gICAgICAgICAgICBvbkZvY3VzPXtvbkZvY3VzfVxyXG4gICAgICAgICAgICB2YWx1ZT17c2VhcmNoVGV4dCB8fCAnJ31cclxuICAgICAgICAgICAgb25LZXlEb3duPXtlID0+IHRoaXMub25LZXlVcChlKX1cclxuICAgICAgICAgICAgcHJlZml4PXsoIWhpZGVTZWFyY2hJY29uICYmICFpc1Nob3dCYWNrQnV0dG9uKSAmJiB0aGlzLmdldFRleHRJbnB1dFByZWZpeEVsZW1lbnQoKX1cclxuICAgICAgICAgICAgc3VmZml4PXt0aGlzLmdldFRleHRJbnB1dFN1ZmZpeEVsZW1lbnQoKX1cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgICB7c2hvd0NsZWFyICYmIChcclxuICAgICAgICAgICAgPEJ1dHRvbiBjb2xvcj0ndGVydGlhcnknIGljb24gc2l6ZT0nc20nIG9uQ2xpY2s9e3RoaXMuaGFuZGxlU3VibWl0fT5cclxuICAgICAgICAgICAgICA8Q2xvc2VPdXRsaW5lZCBzaXplPXsxMn0gY29sb3I9e3RoZW1lLmNvbG9ycy5wYWxldHRlLmRhcmtbODAwXX0vPlxyXG4gICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICl9XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiByZWY9e3JlZiA9PiAodGhpcy5yZWZlcmVuY2UgPSByZWYpfT5cclxuICAgICAgICAgIDxQb3BwZXJcclxuICAgICAgICAgICAgY3NzPXt0aGlzLmdldFN1Z2dlc3Rpb25MaXN0U3R5bGUoKX1cclxuICAgICAgICAgICAgcGxhY2VtZW50PSdib3R0b20tc3RhcnQnXHJcbiAgICAgICAgICAgIHJlZmVyZW5jZT17dGhpcy5yZWZlcmVuY2V9XHJcbiAgICAgICAgICAgIG9mZnNldD17WzAsIDhdfVxyXG4gICAgICAgICAgICBvcGVuPXtpc1Nob3dTdWdnZXN0aW9ufVxyXG4gICAgICAgICAgICB0cmFwRm9jdXM9e2ZhbHNlfVxyXG4gICAgICAgICAgICBhdXRvRm9jdXM9e2ZhbHNlfVxyXG4gICAgICAgICAgICB0b2dnbGU9e2UgPT4ge1xyXG4gICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpc1Nob3dTdWdnZXN0aW9uOiAhaXNTaG93U3VnZ2VzdGlvbiB9KVxyXG4gICAgICAgICAgICB9fVxyXG4gICAgICAgICAgPlxyXG4gICAgICAgICAgICB7c2VhcmNoU3VnZ2VzdGlvbi5tYXAoKHN1Z2dlc3Rpb24sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgY29uc3Qgc3VnZ2VzdGlvbkh0bWwgPSBzYW5pdGl6ZXIuc2FuaXRpemUoXHJcbiAgICAgICAgICAgICAgICBzdWdnZXN0aW9uLnN1Z2dlc3Rpb25IdG1sXHJcbiAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgIGtleT17aW5kZXh9XHJcbiAgICAgICAgICAgICAgICAgIHR5cGU9J3NlY29uZGFyeSdcclxuICAgICAgICAgICAgICAgICAgc2l6ZT0nc20nXHJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uU3VnZ2VzdGlvbkNvbmZpcm0oc3VnZ2VzdGlvbi5zdWdnZXN0aW9uKVxyXG4gICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTD17eyBfX2h0bWw6IHN1Z2dlc3Rpb25IdG1sIH19XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICA8L1BvcHBlcj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICApXHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7XHJcbiAgY3NzLFxyXG4gIHBvbGlzaGVkLFxyXG4gIFNlcmlhbGl6ZWRTdHlsZXMsXHJcbiAgQXBwTW9kZSxcclxuICB1dGlscyxcclxuICBJTVRoZW1lVmFyaWFibGVzXHJcbn0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgeyBMaXN0UHJvcHMgfSBmcm9tICcuLi93aWRnZXQnXHJcbmltcG9ydCB7XHJcbiAgRGlyZWN0aW9uVHlwZSxcclxuICBMSVNUX0NBUkRfUEFERElORyxcclxuICBQYWdlU3R5bGUsXHJcbiAgRFNfVE9PTF9CT1RUT01fUEFERElORyxcclxuICBEU19UT09MX0gsXHJcbiAgQk9UVE9NX1RPT0xfVE9QX1BBRERJTkcsXHJcbiAgQk9UVE9NX1RPT0xfSCxcclxuICBDT01NT05fUEFERElORyxcclxuICBFbGVtZW50U2l6ZSxcclxuICBMaXN0TGF5b3V0VHlwZVxyXG59IGZyb20gJy4uLy4uL2NvbmZpZydcclxuXHJcbmludGVyZmFjZSBMaXNTdHlsZU9wdGlvbiB7XHJcbiAgcGFnZVN0eWxlOiBQYWdlU3R5bGVcclxuICBzY3JvbGxCYXJPcGVuOiBib29sZWFuXHJcbiAgZGlyZWN0aW9uOiBEaXJlY3Rpb25UeXBlXHJcbiAgYXBwTW9kZTogQXBwTW9kZVxyXG4gIHRoZW1lOiBJTVRoZW1lVmFyaWFibGVzXHJcbiAgaXNIZWlnaHRBdXRvOiBib29sZWFuXHJcbiAgaXNXaWR0aEF1dG86IGJvb2xlYW5cclxuICBjdXJyZW50Q2FyZFNpemU6IEVsZW1lbnRTaXplXHJcbiAgbGlzdFRlbXBsYXRlRGVmYXVsdENhcmRTaXplOiBFbGVtZW50U2l6ZVxyXG4gIHNob3dUb3BUb29sczogYm9vbGVhblxyXG4gIGJvdHRvbVRvb2xIOiBudW1iZXJcclxuICB0b3BSaWdodFRvb2xXOiBudW1iZXJcclxuICBoYXNSZWNvcmRzOiBib29sZWFuXHJcbiAgbWV4U2l6ZTogTWF4U2l6ZVxyXG4gIGxheW91dFR5cGU6IExpc3RMYXlvdXRUeXBlXHJcbiAgbGlzdExlZnRQYWRkaW5nOiBudW1iZXJcclxufVxyXG5cclxuaW50ZXJmYWNlIE1heFNpemUge1xyXG4gIG1heFdpZHRoOiBudW1iZXJcclxuICBtYXhIZWlnaHQ6IG51bWJlciB8IHN0cmluZ1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgbGlzdFN0eWxlID0gdXRpbHMubWVtb2l6ZShmdW5jdGlvbiAoXHJcbiAgb3B0aW9uczogTGlzU3R5bGVPcHRpb25cclxuKTogU2VyaWFsaXplZFN0eWxlcyB7XHJcbiAgY29uc3Qge1xyXG4gICAgc2hvd1RvcFRvb2xzLFxyXG4gICAgYm90dG9tVG9vbEgsXHJcbiAgICB0b3BSaWdodFRvb2xXLFxyXG4gICAgaGFzUmVjb3JkcyxcclxuICAgIGN1cnJlbnRDYXJkU2l6ZSxcclxuICAgIHBhZ2VTdHlsZSxcclxuICAgIHNjcm9sbEJhck9wZW4sXHJcbiAgICBhcHBNb2RlLFxyXG4gICAgdGhlbWUsXHJcbiAgICBpc0hlaWdodEF1dG8sXHJcbiAgICBpc1dpZHRoQXV0byxcclxuICAgIGxpc3RUZW1wbGF0ZURlZmF1bHRDYXJkU2l6ZSxcclxuICAgIGxheW91dFR5cGUsXHJcbiAgICBsaXN0TGVmdFBhZGRpbmdcclxuICB9ID0gb3B0aW9uc1xyXG4gIGNvbnN0IHRvcFRvb2xzSCA9IHNob3dUb3BUb29scyA/IERTX1RPT0xfSCA6IDBcclxuICBjb25zdCBkaXJlY3Rpb24gPSBsYXlvdXRUeXBlID09PSBMaXN0TGF5b3V0VHlwZS5Db2x1bW4gPyBEaXJlY3Rpb25UeXBlLkhvcml6b24gOiBEaXJlY3Rpb25UeXBlLlZlcnRpY2FsXHJcbiAgY29uc3QgaXNIb3Jpem9uID0gbGF5b3V0VHlwZSA9PT0gTGlzdExheW91dFR5cGUuQ29sdW1uXHJcbiAgY29uc3QgZmxleERpcmVjdGlvbiA9IGxheW91dFR5cGUgPT09IExpc3RMYXlvdXRUeXBlLkNvbHVtbiA/ICdjb2x1bW4nIDogJ3JvdydcclxuICByZXR1cm4gY3NzYFxyXG4gICAgJi5saXN0LWNvbnRhaW5lciB7XHJcbiAgICAgIC8qIHBvc2l0aW9uOiAke2lzSGVpZ2h0QXV0byA/ICdhYnNvbHV0ZScgOiAncmVsYXRpdmUnfTsgKi9cclxuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgICB6LWluZGV4OiAwO1xyXG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gICAgICAuYm90dG9tLWJvdW5kYXJ5IHtcclxuICAgICAgICBoZWlnaHQ6IDJweDtcclxuICAgICAgICB3aWR0aDogMnB4O1xyXG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgICAgICBib3R0b206IDA7XHJcbiAgICAgICAgcmlnaHQ6IDA7XHJcbiAgICAgICAgb3BhY2l0eTogMDtcclxuICAgICAgfVxyXG4gICAgICAke1xyXG4gICAgICAgIGRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uVHlwZS5Ib3Jpem9uXHJcbiAgICAgICAgICA/IGBcclxuICAgICAgICAgIG1hcmdpbi1sZWZ0OiAke0xJU1RfQ0FSRF9QQURESU5HICsgJ3B4J307XHJcbiAgICAgICAgICBoZWlnaHQ6ICR7aXNIZWlnaHRBdXRvID8gJ2F1dG8nIDogJzEwMCUnfTtcclxuICAgICAgICAgIHdpZHRoOiAke1xyXG4gICAgICAgICAgICBpc1dpZHRoQXV0byA/ICdhdXRvJyA6IGBjYWxjKDEwMCUgLSAke0xJU1RfQ0FSRF9QQURESU5HICsgJ3B4J30pYFxyXG4gICAgICAgICAgfTtcclxuICAgICAgICBgXHJcbiAgICAgICAgICA6IGBcclxuICAgICAgICAgIG1hcmdpbi10b3A6ICR7TElTVF9DQVJEX1BBRERJTkcgKyAncHgnfTtcclxuICAgICAgICAgIHdpZHRoOiAke2lzV2lkdGhBdXRvID8gJ2F1dG8nIDogJzEwMCUnfTtcclxuICAgICAgICAgIGhlaWdodDogJHtcclxuICAgICAgICAgICAgaXNIZWlnaHRBdXRvID8gJ2F1dG8nIDogYGNhbGMoMTAwJSAtICR7TElTVF9DQVJEX1BBRERJTkcgKyAncHgnfSlgXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIGBcclxuICAgICAgfVxyXG5cclxuICAgICAgLmVkaXRpbmctbWFzay1jb24ge1xyXG4gICAgICAgICY6YmVmb3JlIHtcclxuICAgICAgICAgIGNvbnRlbnQ6ICcnO1xyXG4gICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgICAgbGVmdDogMDtcclxuICAgICAgICAgIHRvcDogJHt0b3BUb29sc0h9cHg7XHJcbiAgICAgICAgICB6LWluZGV4OiAxMDtcclxuICAgICAgICAgIGhlaWdodDogJHtjdXJyZW50Q2FyZFNpemUuaGVpZ2h0fXB4O1xyXG4gICAgICAgICAgd2lkdGg6ICR7bGlzdExlZnRQYWRkaW5nfXB4O1xyXG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHtwb2xpc2hlZC5yZ2JhKHRoZW1lLmNvbG9ycy5ibGFjaywgMC4yKX07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC5lZGl0aW5nLW1hc2stbGlzdC1ncmlkIHtcclxuICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgICAgICAgIGxlZnQ6ICR7Y3VycmVudENhcmRTaXplLndpZHRoICsgbGlzdExlZnRQYWRkaW5nfXB4O1xyXG4gICAgICAgICAgdG9wOiAke3RvcFRvb2xzSH1weDtcclxuICAgICAgICAgIHJpZ2h0OiAwO1xyXG4gICAgICAgICAgei1pbmRleDogMTA7XHJcbiAgICAgICAgICBoZWlnaHQ6ICR7Y3VycmVudENhcmRTaXplLmhlaWdodH1weDtcclxuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7cG9saXNoZWQucmdiYSh0aGVtZS5jb2xvcnMuYmxhY2ssIDAuMil9O1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICAuZWRpdGluZy1tYXNrLWxpc3Qge1xyXG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgICAgICB0b3A6ICR7XHJcbiAgICAgICAgICBsYXlvdXRUeXBlICE9PSBMaXN0TGF5b3V0VHlwZS5Db2x1bW4gJiYgaGFzUmVjb3Jkc1xyXG4gICAgICAgICAgICA/IGN1cnJlbnRDYXJkU2l6ZS5oZWlnaHQgKyB0b3BUb29sc0hcclxuICAgICAgICAgICAgOiB0b3BUb29sc0hcclxuICAgICAgICB9cHg7XHJcbiAgICAgICAgbGVmdDogJHtcclxuICAgICAgICAgIGxheW91dFR5cGUgPT09IExpc3RMYXlvdXRUeXBlLkNvbHVtbiAmJiBoYXNSZWNvcmRzXHJcbiAgICAgICAgICAgID8gY3VycmVudENhcmRTaXplLndpZHRoXHJcbiAgICAgICAgICAgIDogMFxyXG4gICAgICAgIH1weDtcclxuICAgICAgICBib3R0b206ICR7cG9saXNoZWQucmVtKGJvdHRvbVRvb2xIKX07XHJcbiAgICAgICAgcmlnaHQ6IDA7XHJcbiAgICAgICAgei1pbmRleDogMTA7XHJcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHtwb2xpc2hlZC5yZ2JhKHRoZW1lLmNvbG9ycy5ibGFjaywgMC4yKX07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC5lZGl0aW5nLW1hc2stZHMtdG9vbCB7XHJcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgIHotaW5kZXg6IDEwO1xyXG4gICAgICAgIHRvcDogMDtcclxuICAgICAgICBsZWZ0OiAwO1xyXG4gICAgICAgIGJvdHRvbTogMDtcclxuICAgICAgICByaWdodDogMDtcclxuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3BvbGlzaGVkLnJnYmEodGhlbWUuY29sb3JzLmJsYWNrLCAwLjIpfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLmVkaXRpbmctbWFzay1ib3R0b20tdG9vbCB7XHJcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgIHotaW5kZXg6IDEwO1xyXG4gICAgICAgIHRvcDogMDtcclxuICAgICAgICBsZWZ0OiAwO1xyXG4gICAgICAgIGJvdHRvbTogMDtcclxuICAgICAgICByaWdodDogMDtcclxuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3BvbGlzaGVkLnJnYmEodGhlbWUuY29sb3JzLmJsYWNrLCAwLjIpfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLmVtcHR5LWNvbiB7XHJcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgIHRvcDogNTAlO1xyXG4gICAgICAgIGxlZnQ6IDA7XHJcbiAgICAgICAgcmlnaHQ6IDA7XHJcbiAgICAgICAgei1pbmRleDogMTA7XHJcbiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpO1xyXG4gICAgICAgIHBhZGRpbmctdG9wOiAke3RvcFRvb2xzSH1weDtcclxuICAgICAgICAuamltdS1pY29uIHtcclxuICAgICAgICAgIGNvbG9yOiAke3RoZW1lLmNvbG9ycy5wYWxldHRlLndhcm5pbmdbOTAwXX07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC5kaXNjcmlidGlvbiB7XHJcbiAgICAgICAgICBtYXJnaW46ICR7cG9saXNoZWQucmVtKDkpfSAwICR7cG9saXNoZWQucmVtKDgpfSAwO1xyXG4gICAgICAgICAgZm9udC1zaXplOiAke3BvbGlzaGVkLnJlbSgxNCl9O1xyXG4gICAgICAgICAgY29sb3I6ICR7dGhlbWUuY29sb3JzLmJsYWNrfVxyXG4gICAgICAgIH1cclxuICAgICAgICAuY2xlYXItbWVzc2FnZS1hY3Rpb24tYnV0dG9uIHtcclxuICAgICAgICAgIHdpZHRoOiAke3BvbGlzaGVkLnJlbSg2NSl9O1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLmRhdGFzb3VyY2UtdG9vbHMge1xyXG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgICAgICBoZWlnaHQ6ICR7cG9saXNoZWQucmVtKHRvcFRvb2xzSCl9O1xyXG4gICAgICAgIHBhZGRpbmctYm90dG9tOiAke3BvbGlzaGVkLnJlbShEU19UT09MX0JPVFRPTV9QQURESU5HKX07XHJcbiAgICAgICAgLnNvcnQtZmllbGRzLWlucHV0IHtcclxuICAgICAgICAgIHdpZHRoOiAyMDBweDtcclxuICAgICAgICAgIG1hcmdpbi1sZWZ0OiA4cHg7XHJcbiAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDE2cHg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAudG9vbC1yb3cge1xyXG4gICAgICAgICAgaGVpZ2h0OiAke0RTX1RPT0xfSCAtIERTX1RPT0xfQk9UVE9NX1BBRERJTkd9cHg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC5kcy10b29scy1saW5lIHtcclxuICAgICAgICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgICAgICAgaGVpZ2h0OiAxcHg7XHJcbiAgICAgICAgICBtYXJnaW4tdG9wOiAke3BvbGlzaGVkLnJlbSg2KX07XHJcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3RoZW1lLmNvbG9ycy5wYWxldHRlLmxpZ2h0WzUwMF19O1xyXG4gICAgICAgIH1cclxuICAgICAgICAuZHMtdG9vbHMtbGluZS1ibHVlIHtcclxuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7dGhlbWUuY29sb3JzLnBhbGV0dGUuaW5mb1s1MDBdfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLmxpc3Qtc2VhcmNoLWRpdiB7XHJcbiAgICAgICAgICB3aWR0aDogY2FsYygxMDAlIC0gJHt0b3BSaWdodFRvb2xXfXB4KTtcclxuICAgICAgICAgIC5saXN0LXNlYXJjaCB7XHJcbiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206ICR7cG9saXNoZWQucmVtKC00KX07XHJcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgIH1cclxuICAgICAgLnRvb2xzLW1lbnUge1xyXG4gICAgICAgIGNvbG9yOiAke3RoZW1lLmNvbG9ycy5wYWxldHRlLmxpZ2h0WzgwMF19O1xyXG4gICAgICB9XHJcbiAgICAgIC50b29scy1tZW51OmhvdmVyIHtcclxuICAgICAgICBjb2xvcjogJHt0aGVtZS5jb2xvcnMucGFsZXR0ZS5pbmZvWzUwMF19O1xyXG4gICAgICB9XHJcbiAgICAgIC5ib3R0b20tdG9vbHMge1xyXG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgICAgICBwYWRkaW5nLXRvcDogJHtwb2xpc2hlZC5yZW0oQk9UVE9NX1RPT0xfVE9QX1BBRERJTkcpfTtcclxuICAgICAgICBtaW4taGVpZ2h0OiAke3BvbGlzaGVkLnJlbShCT1RUT01fVE9PTF9IKX07XHJcbiAgICAgICAgLnNjcm9sbC1uYXZpZ2F0b3Ige1xyXG4gICAgICAgICAgLmJ0biB7XHJcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6ICR7dGhlbWUuYm9yZGVyUmFkaXVzZXMuY2lyY2xlfTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC53aWRnZXQtbGlzdC1saXN0OmZvY3VzIHtcclxuICAgICAgICBvdXRsaW5lOiBub25lO1xyXG4gICAgICB9XHJcbiAgICAgIC53aWRnZXQtbGlzdC1saXN0IHtcclxuICAgICAgICAmIHtcclxuICAgICAgICAgIHBhZGRpbmc6IDA7XHJcbiAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgICAgICAgICBwYWRkaW5nLWxlZnQ6ICR7YCR7bGlzdExlZnRQYWRkaW5nfXB4YH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgICY+ZGl2IHtcclxuICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgICAgICAgIGZsZXg6IDE7XHJcbiAgICAgICAgICBib3gtc2l6aW5nOiBjb250ZW50LWJveDtcclxuICAgICAgICAgICR7aXNIb3Jpem9uICYmIGBwYWRkaW5nLXJpZ2h0OiAke3BvbGlzaGVkLnJlbSgxNSl9YH07XHJcbiAgICAgICAgICAkeyFpc0hvcml6b24gJiYgYHBhZGRpbmctYm90dG9tOiAke3BvbGlzaGVkLnJlbSgxNSl9YH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qIGJveC1zaXppbmc6IGJvcmRlci1ib3g7ICovXHJcbiAgICAgICAgJHtcclxuICAgICAgICAgICF3aW5kb3cuamltdUNvbmZpZy5pc0luQnVpbGRlciB8fCBhcHBNb2RlID09PSBBcHBNb2RlLlJ1blxyXG4gICAgICAgICAgICA/IGBvdmVyZmxvdy0ke2lzSG9yaXpvbiA/ICd5JyA6ICd4J306IGhpZGRlbiAhaW1wb3J0YW50O2BcclxuICAgICAgICAgICAgOiAnb3ZlcmZsb3c6IGhpZGRlbiAhaW1wb3J0YW50OydcclxuICAgICAgICB9XHJcbiAgICAgICAgaGVpZ2h0OiAke1xyXG4gICAgICAgICAgaXNIZWlnaHRBdXRvXHJcbiAgICAgICAgICAgID8gJ2F1dG8nXHJcbiAgICAgICAgICAgIDogYGNhbGMoMTAwJSAtICR7dG9wVG9vbHNIfXB4IC0gJHtib3R0b21Ub29sSH1weClgXHJcbiAgICAgICAgfSAhaW1wb3J0YW50O1xyXG4gICAgICAgIHdpZHRoOiAke2lzV2lkdGhBdXRvID8gJ2F1dG8nIDogJzEwMCUnfSAhaW1wb3J0YW50O1xyXG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgJHtgZmxleC1kaXJlY3Rpb246ICR7ZmxleERpcmVjdGlvbn1gfTtcclxuICAgICAgICAke2lzSGVpZ2h0QXV0byAmJiBgbWluLWhlaWdodDogJHtsaXN0VGVtcGxhdGVEZWZhdWx0Q2FyZFNpemUuaGVpZ2h0fXB4O2B9O1xyXG4gICAgICAgICR7aXNXaWR0aEF1dG8gJiYgYG1pbi13aWR0aDogJHtsaXN0VGVtcGxhdGVEZWZhdWx0Q2FyZFNpemUud2lkdGh9cHg7YH07XHJcbiAgICAgICAgJHtcclxuICAgICAgICAgIGlzSG9yaXpvblxyXG4gICAgICAgICAgICA/IGBcclxuICAgICAgICAgICAgICAke2BtYXgtd2lkdGg6ICR7b3B0aW9ucy5tZXhTaXplLm1heFdpZHRofXB4YH07XHJcbiAgICAgICAgICAgIGBcclxuICAgICAgICAgICAgOiBgXHJcbiAgICAgICAgICAgICAgJHtgbWF4LWhlaWdodDogY2FsYygke29wdGlvbnMubWV4U2l6ZS5tYXhIZWlnaHR9IC0gJHt0b3BUb29sc0h9cHggLSAke2JvdHRvbVRvb2xIfXB4KWB9O1xyXG4gICAgICAgICAgICBgXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgICR7XHJcbiAgICAgICAgcGFnZVN0eWxlID09PSBQYWdlU3R5bGUuU2Nyb2xsICYmICFzY3JvbGxCYXJPcGVuXHJcbiAgICAgICAgICA/IGBcclxuICAgICAgICAgIC53aWRnZXQtbGlzdC1saXN0Ojotd2Via2l0LXNjcm9sbGJhciB7XHJcbiAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7IC8vU2FmYXJpIGFuZCBDaHJvbWVcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC53aWRnZXQtbGlzdC1saXN0IHtcclxuICAgICAgICAgICAgICAtbXMtb3ZlcmZsb3ctc3R5bGU6IG5vbmU7IC8vSUUgMTArXHJcbiAgICAgICAgICAgICAgb3ZlcmZsb3c6IC1tb3otc2Nyb2xsYmFycy1ub25lOyAvL0ZpcmVmb3hcclxuICAgICAgICAgIH1cclxuICAgICAgICBgXHJcbiAgICAgICAgICA6ICcnXHJcbiAgICAgIH1cclxuICAgICAgLnBsYWNlaG9sZGVyLWFsZXJ0LWNvbiB7XHJcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgIGJvdHRvbTogJHtwb2xpc2hlZC5yZW0oOCl9O1xyXG4gICAgICAgIHJpZ2h0OiAke3BvbGlzaGVkLnJlbSg4KX07XHJcbiAgICAgICAgei1pbmRleDogMTE7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICBgXHJcbn0pXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3R5bGUgKFxyXG4gIHByb3BzOiBMaXN0UHJvcHMsXHJcbiAgaXNFZGl0aW5nOiBib29sZWFuLFxyXG4gIHNob3dCb3R0b21Ub29sOiBib29sZWFuXHJcbik6IFNlcmlhbGl6ZWRTdHlsZXMge1xyXG4gIGNvbnN0IHsgY29uZmlnLCBpZCwgYXBwTW9kZSwgaXNIZWlnaHRBdXRvLCBpc1dpZHRoQXV0bywgdGhlbWUgfSA9IHByb3BzXHJcbiAgcmV0dXJuIGNzc2BcclxuICAgICR7JyYubGlzdC13aWRnZXQtJyArIGlkfSB7XHJcbiAgICAgIG92ZXJmbG93OiB2aXNpYmxlO1xyXG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcclxuICAgICAgYm9yZGVyOiAke3BvbGlzaGVkLnJlbShDT01NT05fUEFERElORyl9IHNvbGlkICR7cG9saXNoZWQucmdiYShcclxuICAgIHRoZW1lLmNvbG9ycy5ibGFjayxcclxuICAgIHdpbmRvdy5qaW11Q29uZmlnLmlzSW5CdWlsZGVyICYmIGlzRWRpdGluZyA/IDAuMiA6IDBcclxuICApfTtcclxuICAgICAgaGVpZ2h0OiAke2lzSGVpZ2h0QXV0byA/ICdhdXRvJyA6ICcxMDAlJ307XHJcbiAgICAgIHdpZHRoOiAke2lzV2lkdGhBdXRvID8gJ2F1dG8nIDogJzEwMCUnfTtcclxuICAgICAgLmxpc3Qtd2l0aC1tYXNrIHtcclxuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgICAgbGVmdDogMDtcclxuICAgICAgICByaWdodDogMDtcclxuICAgICAgICBib3R0b206IDA7XHJcbiAgICAgICAgdG9wOiAwO1xyXG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7cG9saXNoZWQucmdiYSh0aGVtZS5jb2xvcnMuYmxhY2ssIDApfTtcclxuICAgICAgICB6LWluZGV4OiAxO1xyXG4gICAgICB9XHJcbiAgICAgIC5saXN0LXRvZ2dsZS1idXR0b24ge1xyXG4gICAgICAgIGJhY2tncm91bmQ6IG5vbmU7XHJcbiAgICAgIH1cclxuICAgICAgLmxpc3QtbG9hZGluZy1jb24ge1xyXG4gICAgICAgIG1pbi1oZWlnaHQ6ICR7cG9saXNoZWQucmVtKDEyMCl9O1xyXG4gICAgICAgIG1pbi13aWR0aDogJHtwb2xpc2hlZC5yZW0oMTYwKX07XHJcbiAgICAgIH1cclxuICAgICAgLnJlZnJlc2gtbG9hZGluZy1jb24ge1xyXG4gICAgICAgIHJpZ2h0OiAwO1xyXG4gICAgICAgIGJvdHRvbToke3Nob3dCb3R0b21Ub29sID8gcG9saXNoZWQucmVtKEJPVFRPTV9UT09MX0gpIDogMH07XHJcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgICAgICBoZWlnaHQ6ICR7cG9saXNoZWQucmVtKDI0KX07XHJcbiAgICAgICAgLmF1dG8tcmVmcmVzaC1sb2FkaW5nIHtcclxuICAgICAgICAgIGJhY2tncm91bmQ6ICR7cG9saXNoZWQucmdiYSh0aGVtZS5jb2xvcnM/LnBhbGV0dGU/LmRhcms/LlsxMDBdLCAwLjIpfTtcclxuICAgICAgICAgIGNvbG9yOiAke3RoZW1lLmNvbG9ycz8uYmxhY2t9O1xyXG4gICAgICAgICAgZm9udC1zaXplOiAke3BvbGlzaGVkLnJlbSgxMil9O1xyXG4gICAgICAgICAgbGluZS1oZWlnaHQ6ICR7cG9saXNoZWQucmVtKDI0KX07XHJcbiAgICAgICAgICBwYWRkaW5nOiAwICR7cG9saXNoZWQucmVtKDcpfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJi5ob3Jpem9uLWxvYWRpbmcge1xyXG4gICAgICAgICAgYm90dG9tOiR7XHJcbiAgICAgICAgICAgIHNob3dCb3R0b21Ub29sID8gcG9saXNoZWQucmVtKEJPVFRPTV9UT09MX0ggKyA2KSA6IHBvbGlzaGVkLnJlbSg2KVxyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJi52ZXJ0aWNhbC1sb2FkaW5nIHtcclxuICAgICAgICAgIHJpZ2h0OiAke3BvbGlzaGVkLnJlbSg2KX07XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIC5sb2FkaW5nLWNvbiB7XHJcbiAgICAgICAgQGtleWZyYW1lcyBsb2FkaW5nIHtcclxuICAgICAgICAgIDAlIHt0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsgfTtcclxuICAgICAgICAgIDEwMCUge3RyYW5zZm9ybTogcm90YXRlKDM2MGRlZyl9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB3aWR0aDogJHtwb2xpc2hlZC5yZW0oMTYpfTtcclxuICAgICAgICBoZWlnaHQ6ICR7cG9saXNoZWQucmVtKDE2KX07XHJcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgJHt0aGVtZT8uY29sb3JzPy5wYWxldHRlPy5kYXJrPy5bMTAwXX07XHJcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xyXG4gICAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCAke3RoZW1lPy5jb2xvcnM/LnBhbGV0dGU/LmRhcms/Lls4MDBdfTtcclxuICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gICAgICAgIGFuaW1hdGlvbjpsb2FkaW5nIDJzIGluZmluaXRlIGxpbmVhcjtcclxuICAgICAgICBtYXJnaW4tcmlnaHQ6ICR7cG9saXNoZWQucmVtKDQpfTtcclxuICAgICAgfVxyXG4gICAgICAud2lkZ2V0LWxpc3Qge1xyXG4gICAgICAgIG92ZXJmbG93OiAke1xyXG4gICAgICAgICAgd2luZG93LmppbXVDb25maWcuaXNJbkJ1aWxkZXIgJiYgYXBwTW9kZSAhPT0gQXBwTW9kZS5SdW5cclxuICAgICAgICAgICAgPyAnaGlkZGVuJ1xyXG4gICAgICAgICAgICA6ICdhdXRvJ1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgaGVpZ2h0OiAke2lzSGVpZ2h0QXV0byA/ICdhdXRvJyA6ICcxMDAlJ307XHJcbiAgICAgICAgd2lkdGg6ICR7aXNXaWR0aEF1dG8gPyAnYXV0bycgOiAnMTAwJSd9O1xyXG4gICAgICAgIC8qIGFsaWduLWl0ZW1zOiAke2NvbmZpZy5hbGlnblR5cGV9O1xyXG4gICAgICAgIGp1c3RpZnktY29udGVudDogJHtjb25maWcuYWxpZ25UeXBlfTsgKi9cclxuICAgICAgICAke1xyXG4gICAgICAgICAgY29uZmlnLmRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uVHlwZS5Ib3Jpem9uXHJcbiAgICAgICAgICAgID8gYFxyXG4gICAgICAgICAgICBvdmVyZmxvdy15OiBoaWRkZW47XHJcbiAgICAgICAgICBgXHJcbiAgICAgICAgICAgIDogYFxyXG4gICAgICAgICAgICBvdmVyZmxvdy14OiBoaWRkZW47XHJcbiAgICAgICAgICBgXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gIGBcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFRvb2xzUG9wcGVyU3R5bGUgKHByb3BzOiBMaXN0UHJvcHMpOiBTZXJpYWxpemVkU3R5bGVzIHtcclxuICBjb25zdCB7IHRoZW1lIH0gPSBwcm9wc1xyXG4gIHJldHVybiBjc3NgXHJcbiAgICAmIHtcclxuICAgICAgcGFkZGluZzogJHtwb2xpc2hlZC5yZW0oNil9ICR7cG9saXNoZWQucmVtKDExKX07XHJcbiAgICAgIGhlaWdodDogJHtwb2xpc2hlZC5yZW0oNDApfTtcclxuICAgIH1cclxuICAgIC5kcy10b29scy1saW5lIHtcclxuICAgICAgd2lkdGg6IDEwMCU7XHJcbiAgICAgIGhlaWdodDogMXB4O1xyXG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3RoZW1lLmNvbG9ycy5wYWxldHRlLmxpZ2h0WzUwMF19O1xyXG4gICAgfVxyXG4gICAgLmRzLXRvb2xzLWxpbmUtYmx1ZSB7XHJcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7dGhlbWUuY29sb3JzLnBhbGV0dGUuaW5mb1s1MDBdfTtcclxuICAgIH1cclxuICAgIC5jbG9zZS1zZWFyY2gge1xyXG4gICAgICBtYXJnaW4tdG9wOiAke3BvbGlzaGVkLnJlbSgtNil9O1xyXG4gICAgfVxyXG4gIGBcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFNlYXJjaFRvb2xTdHlsZSAocHJvcHM6IExpc3RQcm9wcyk6IFNlcmlhbGl6ZWRTdHlsZXMge1xyXG4gIGNvbnN0IHsgdGhlbWUgfSA9IHByb3BzXHJcbiAgcmV0dXJuIGNzc2BcclxuICAgIC5jbG9zZS1zZWFyY2gge1xyXG4gICAgICBib3JkZXI6IDFweCBzb2xpZCAke3RoZW1lLmNvbG9ycy5wYWxldHRlLmxpZ2h0WzUwMF19O1xyXG4gICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3RoZW1lLmNvbG9ycy53aGl0ZX07XHJcbiAgICB9XHJcbiAgICAuc2VhcmNoLWJveC1jb250ZW50IHtcclxuICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICAgICAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7XHJcbiAgICB9XHJcbiAgYFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VG9wVG9vbFN0eWxlIChwcm9wczogTGlzdFByb3BzLCBzaG93VG9wVG9vbHM6IGJvb2xlYW4pOiBTZXJpYWxpemVkU3R5bGVzIHtcclxuICByZXR1cm4gY3NzYFxyXG4gICAgLmxpc3QtZGF0YS1hY3Rpb24ge1xyXG4gICAgICAmIHtcclxuICAgICAgICBwYWRkaW5nLWxlZnQ6ICR7cG9saXNoZWQucmVtKDQpfTtcclxuICAgICAgfVxyXG4gICAgICAmOjphZnRlciB7XHJcbiAgICAgICAgY29udGVudDogJyc7XHJcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgIGxlZnQ6IDA7XHJcbiAgICAgICAgdG9wOiA1MCU7XHJcbiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpO1xyXG4gICAgICAgIGhlaWdodDogJHtwb2xpc2hlZC5yZW0oMTYpfTtcclxuICAgICAgICBib3JkZXItbGVmdDogMXB4IHNvbGlkICR7c2hvd1RvcFRvb2xzID8gJ3ZhcigtLWxpZ2h0LTQwMCknIDogJ3RyYW5zcGFyZW50J31cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLm0tbGVmdCB7XHJcbiAgICAgIG1hcmdpbi1sZWZ0OiAke3BvbGlzaGVkLnJlbSg0KX07XHJcbiAgICB9XHJcbiAgYFxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IHtcclxuICBfd2lkZ2V0TGFiZWw6ICdMaXN0JyxcclxuICBfd2lkZ2V0RGVzY3JpcHRpb246ICdBIHdpZGdldCB0byBkaXNwbGF5IGRhdGEgaW4gYSBsaXN0IHZpZXcuJyxcclxuICBfYWN0aW9uX2ZpbHRlcl9sYWJlbDogJ0ZpbHRlcicsXHJcbiAgX2xheW91dF9SRUdVTEFSX2xhYmVsOiAnUmVndWxhcicsXHJcbiAgX2xheW91dF9IT1ZFUl9sYWJlbDogJ0hvdmVyJyxcclxuICBfbGF5b3V0X1NFTEVDVEVEX2xhYmVsOiAnU2VsZWN0ZWQnLFxyXG4gIGFwcGx5VG86ICdBcHBseSB0byB7c3RhdHVzfScsXHJcbiAgbGlzdExvYWRpbmc6ICdMb2FkaW5nJyxcclxuICBwbGVhc2VTZWxlY3Q6ICdQbGVhc2Ugc2VsZWN0JyxcclxuICBsaXN0Tm9EYXRhOiAnTm8gZGF0YScsXHJcbiAgc2VsZWN0U29ydEZpZWxkczogJ1NlbGVjdCBzb3J0aW5nIGZpZWxkcycsXHJcbiAgY2xlYXJGaWx0ZXI6ICdDbGVhciBmaWx0ZXInLFxyXG4gIGlzb2xhdGU6ICdJc29sYXRlJyxcclxuICBsaW5rZWRUb0FuZDogJ0xpbmtlZCB0byB7d2hlcmUxfSBhbmQge3doZXJlMn0nLFxyXG4gIGxpbmtlZFRvOiAnTGlua2VkIHRvIHt3aGVyZX0nLFxyXG4gIHBsYWNlSG9sZGVyVGlwOiAnUGxlYXNlIHNlbGVjdCBhIGxpc3QgdGVtcGxhdGUuJyxcclxuICBzaG93U2VsZWN0ZWQ6ICdTaG93IHNlbGVjdGVkJyxcclxuICBjbGVhclNlbGVjdGVkOiAnQ2xlYXIgc2VsZWN0ZWQnLFxyXG4gIGxpc3RTb3J0aW5nOiAnU29ydGluZycsXHJcbiAgbGlzdFNvcnQ6ICdTb3J0JyxcclxuXHJcbiAgLy8gZ3VpZGVcclxuICBndWlkZVN0ZXAyVGl0bGU6ICdUZW1wbGF0ZScsXHJcbiAgZ3VpZGVTdGVwMkNvbnRlbnQ6ICdDbGljayBvbiBhIHRlbXBsYXRlIGFuZCBjbGljayBzdGFydC4nLFxyXG4gIGd1aWRlU3RlcDNUaXRsZTogJ0RhdGEnLFxyXG4gIGd1aWRlU3RlcDNDb250ZW50OiAnQ2xpY2sgb24gc2VsZWN0IGRhdGEgdG8gYWRkIGEgZGF0YSBzb3VyY2UuJyxcclxuICBndWlkZVN0ZXA0VGl0bGU6ICdBZGQgbmV3IGRhdGEnLFxyXG4gIGd1aWRlU3RlcDRDb250ZW50OiAnQ2xpY2sgYWRkIG5ldyBkYXRhIHRvIHNlbGVjdCBhIHdlYiBtYXAuJyxcclxuICBndWlkZVN0ZXA1VGl0bGU6ICdTZWxlY3QgZGF0YScsXHJcbiAgZ3VpZGVTdGVwNUNvbnRlbnQ6ICdDbGljayB0aGUgZmVhdHVyZSBsYXllciBpbiB0aGUgc2VsZWN0IGRhdGEgcGFuZWwgYW5kIGNsb3NlIHRoZSBwYW5lbC4nLFxyXG4gIGd1aWRlU3RlcDZUaXRsZTogJ0RhdGEnLFxyXG4gIGd1aWRlU3RlcDZDb250ZW50OiAnU3BlY2lmaWVzIHRoZSBkYXRhIHNvdXJjZSwgYWxsb3dzIHlvdSB0byBmaWx0ZXIgdGhlIGRhdGEgYW5kIGxpbWl0IHRoZSBudW1iZXIgb2YgZmVhdHVyZXMgdGhhdCBhcHBlYXIgaW4gdGhlIGxpc3QuJyxcclxuICBndWlkZVN0ZXA3VGl0bGU6ICdBcnJhbmdlbWVudCcsXHJcbiAgZ3VpZGVTdGVwN0NvbnRlbnQ6ICdDbGljayB0aGUgZXhwYW5kIGljb24gdG8gZXhwbG9yZSB0aGUgQXJyYW5nZW1lbnQgc2VjdGlvbi4gSW4gaGVyZSwgaXQgYWxsb3dzIHlvdSB0byBkZWZpbmUgdGhlIGRpcmVjdGlvbiwgaGVpZ2h0LCBzcGFjaW5nLCBhbmQgcGFnaW5nIHN0eWxlIGZvciB5b3VyIGxpc3QuJyxcclxuICBndWlkZVN0ZXA4VGl0bGU6ICdTdGF0ZXMnLFxyXG4gIGd1aWRlU3RlcDhDb250ZW50OiAnQ2xpY2sgdGhlIGV4cGFuZCBpY29uIHRvIGV4cGxvcmUgdGhlIGF2YWlsYWJsZSBTdGF0ZXMuIEluIHRoaXMgc2VjdGlvbiwgaXQgcHJvdmlkZXMgYSB2aXN1YWwgcmVwcmVzZW50YXRpb24gdG8gY29tbXVuaWNhdGUgdGhlIHN0YXRlIG9mIHRoZSBsaXN0IGl0ZW1zLiBUaGVyZSBhcmUgdGhyZWUgc3RhdGVzOiByZWd1bGFyLCBzZWxlY3RlZCwgYW5kIGhvdmVyLiBCeSBkZWZhdWx0LCB0aGUgc2VsZWN0ZWQgc3RhdGUgaXMgYWx3YXlzIG9uLicsXHJcbiAgZ3VpZGVTdGVwOVRpdGxlOiAnVG9vbHMnLFxyXG4gIGd1aWRlU3RlcDlDb250ZW50OiAnQ2xpY2sgdGhlIGV4cGFuZCBpY29uIHRvIGV4cGxvcmUgdGhlIGF2YWlsYWJsZSBUb29scy4gSW4gaGVyZSwgeW91IGNhbiBpbmNsdWRlIHNlYXJjaCwgc29ydCwgZmlsdGVyLCBhbmQgc2hvdyBzZWxlY3RlZCB0b29scyBpbiB5b3VyIGxpc3QuJyxcclxuICBndWlkZVN0ZXAxMFRpdGxlOiAnU2VsZWN0IGltYWdlJyxcclxuICBndWlkZVN0ZXAxMENvbnRlbnQ6ICdDbGljayB0aGUgaW1hZ2Ugd2lkZ2V0IHRvIGNvbmZpZ3VyZSBpdCBpbiB0aGUgY29udGVudCBwYW5lbC4nLFxyXG4gIGd1aWRlU3RlcDEwVGl0bGUyOiAnSW1hZ2Ugc2V0dGluZ3MnLFxyXG4gIGd1aWRlU3RlcDEwQ29udGVudDI6ICdBbGxvd3MgeW91IHRvIHNlbGVjdCB0aGUgaW1hZ2Ugc291cmNlIGFuZCBvdGhlciBzZXR0aW5ncyBmb3IgeW91ciB3aWRnZXQuJyxcclxuICBndWlkZVN0ZXAxMVRpdGxlOiAnU2VsZWN0IHRleHQnLFxyXG4gIGd1aWRlU3RlcDExQ29udGVudDogJ0NsaWNrIHRoZSB0ZXh0IHdpZGdldCB0byBhZGQgYXR0cmlidXRlcyBpbiB0aGUgd2lkZ2V0IHRvb2xiYXIuJyxcclxuICBndWlkZVN0ZXAxMVRpdGxlMjogJ1RleHQgc2V0dGluZ3MnLFxyXG4gIGd1aWRlU3RlcDExQ29udGVudDI6ICdQcm92aWRlcyB0aGUgY29uZmlndXJhdGlvbnMgYW5kIHN0eWxlLCBpbmNsdWRpbmcgYWRkaW5nIGR5bmFtaWMgY29udGVudCBmcm9tIHRoZSB3aWRnZXQgdG9vbGJhci4gJyxcclxuICBndWlkZVN0ZXAxMlRpdGxlOiAnRW5kIG9mIHRvdXInLFxyXG4gIGd1aWRlU3RlcDEyQ29udGVudDogJ0FkZCBvdGhlciB3aWRnZXRzIHRvIGVuaGFuY2UgeW91ciBleHBlcmllbmNlLicsXHJcblxyXG4gIGNsZWFyU2VhcmNoOiAnQ2xlYXIgc2VhcmNoJyxcclxuICBtaW5pbWl6ZTogJ01pbmltaXplJyxcclxuICB0b3BUb29sQmFjazogJ0JhY2snLFxyXG5cclxuICBzaG93QWxsTGlzdFJlY29yZHM6ICdTaG93IGFsbCByZWNvcmRzJyxcclxuICBsaXN0RGF0YUFjdGlvbkxhYmVsOiAne2xheWVyfSBsaXN0IHNlbGVjdGlvbicsXHJcbiAgc2VhcmNoUmVzdWx0OiAnU2VhcmNoIHJlc3VsdCdcclxufVxyXG4iLCJpbXBvcnQgeyBMaXN0U3RhdGVzLCBMaXN0UHJvcHMgfSBmcm9tICcuLi93aWRnZXQnXHJcbmltcG9ydCB7XHJcbiAgUXVlcmlhYmxlRGF0YVNvdXJjZSxcclxuICBNZXNzYWdlVHlwZSxcclxuICB1dGlscyxcclxuICBEYXRhU291cmNlLFxyXG4gIGRhdGFTb3VyY2VVdGlscyxcclxuICBDbGF1c2VPcGVyYXRvcixcclxuICBDbGF1c2VMb2dpYyxcclxuICBRdWVyeVNjb3BlXHJcbn0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgeyBTb3J0U2V0dGluZ09wdGlvbiB9IGZyb20gJ2ppbXUtdWkvYWR2YW5jZWQvc2V0dGluZy1jb21wb25lbnRzJ1xyXG5pbXBvcnQgeyBJTUNvbmZpZywgU3VnZ2VzdGlvbiB9IGZyb20gJy4uLy4uL2NvbmZpZydcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUXVlcnlPcHRpb25zIHtcclxuICByZXR1cm5HZW9tZXRyeT86IGJvb2xlYW5cclxuICBnZW9tZXRyeT86IGFueVxyXG4gIHNvcnRGaWVsZD86IHN0cmluZ1xyXG4gIHNvcnRPcmRlcj86IHN0cmluZ1xyXG4gIG9yZGVyQnlGaWVsZHM/OiBzdHJpbmcgfCBzdHJpbmdbXVxyXG4gIHJlc3VsdE9mZnNldD86IG51bWJlclxyXG4gIHJlc3VsdFJlY29yZENvdW50PzogbnVtYmVyXHJcbiAgcGFnZVNpemU/OiBudW1iZXJcclxuICBwYWdlPzogbnVtYmVyXHJcbiAgd2hlcmU/OiBzdHJpbmdcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFF1ZXJ5T3B0aW9ucyAoXHJcbiAgc3RhdGU6IExpc3RTdGF0ZXMsXHJcbiAgcHJvcHM6IExpc3RQcm9wcyxcclxuICBwYWdlU2l6ZTogbnVtYmVyXHJcbik6IGFueSB7XHJcbiAgY29uc3Qgb3B0aW9uczogUXVlcnlPcHRpb25zID0ge1xyXG4gICAgcmV0dXJuR2VvbWV0cnk6IHRydWVcclxuICB9XHJcbiAgY29uc3QgeyBjb25maWcsIHN0YXRlUHJvcHMsIHVzZURhdGFTb3VyY2VzIH0gPSBwcm9wc1xyXG4gIGNvbnN0IHtcclxuICAgIHNvcnRPcHRpb25OYW1lLFxyXG4gICAgc2VhcmNoVGV4dCxcclxuICAgIGN1cnJlbnRGaWx0ZXIsXHJcbiAgICBmaWx0ZXJBcHBsaWVkLFxyXG4gICAgZGF0YXNvdXJjZVxyXG4gIH0gPSBzdGF0ZVxyXG4gIGNvbnN0IHVzZURTID0gdXNlRGF0YVNvdXJjZXMgJiYgdXNlRGF0YVNvdXJjZXNbMF1cclxuICBpZiAoIWRhdGFzb3VyY2UgfHwgIXVzZURTKSByZXR1cm4gbnVsbFxyXG5cclxuICBpZiAoIShkYXRhc291cmNlIGFzIFF1ZXJpYWJsZURhdGFTb3VyY2UpLnF1ZXJ5KSB7XHJcbiAgICAvLyBub3QgcXVlcnlpYWJsZSBkYXRhIHNvdXJjZSwgcmV0dXJuXHJcbiAgICByZXR1cm4gbnVsbFxyXG4gIH1cclxuICAvLyBzb3J0XHJcbiAgbGV0IHNvcnRPcHRpb246IFNvcnRTZXR0aW5nT3B0aW9uXHJcbiAgaWYgKGNvbmZpZy5zb3J0T3BlbiAmJiBjb25maWcuc29ydHMpIHtcclxuICAgIHNvcnRPcHRpb24gPSBjb25maWcuc29ydHMuZmluZChcclxuICAgICAgKHNvcnQ6IFNvcnRTZXR0aW5nT3B0aW9uKSA9PiBzb3J0LnJ1bGVPcHRpb25OYW1lID09PSBzb3J0T3B0aW9uTmFtZVxyXG4gICAgKVxyXG4gICAgc29ydE9wdGlvbiA9IHNvcnRPcHRpb24gfHwgKGNvbmZpZy5zb3J0c1swXSBhcyBhbnkpXHJcbiAgICBpZiAoIXNvcnRPcHRpb24/LnJ1bGU/LlswXT8uamltdUZpZWxkTmFtZSkge1xyXG4gICAgICBzb3J0T3B0aW9uID0gdW5kZWZpbmVkXHJcbiAgICB9XHJcbiAgICBpZiAoc29ydE9wdGlvbikge1xyXG4gICAgICBjb25zdCBvcmRlckJ5cyA9IFtdXHJcbiAgICAgIHNvcnRPcHRpb24ucnVsZS5mb3JFYWNoKHNvcnREYXRhID0+IHtcclxuICAgICAgICBpZiAoc29ydERhdGEuamltdUZpZWxkTmFtZSkge1xyXG4gICAgICAgICAgb3JkZXJCeXMucHVzaChgJHtzb3J0RGF0YS5qaW11RmllbGROYW1lfSAke3NvcnREYXRhLm9yZGVyfWApXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgICBvcHRpb25zLm9yZGVyQnlGaWVsZHMgPSBvcmRlckJ5c1xyXG4gICAgfVxyXG4gIH1cclxuICAvLyBmaWx0ZXJcclxuICBpZiAoXHJcbiAgICBjb25maWcuZmlsdGVyT3BlbiAmJlxyXG4gICAgZmlsdGVyQXBwbGllZCAmJlxyXG4gICAgY29uZmlnLmZpbHRlciAmJlxyXG4gICAgY3VycmVudEZpbHRlciAmJlxyXG4gICAgY3VycmVudEZpbHRlci5zcWxcclxuICApIHtcclxuICAgIG9wdGlvbnMud2hlcmUgPSAob3B0aW9ucy53aGVyZSB8fCAnMT0xJykgKyAnIEFORCAnXHJcbiAgICBvcHRpb25zLndoZXJlICs9IGAoJHtjdXJyZW50RmlsdGVyLnNxbH0pYFxyXG4gIH1cclxuXHJcbiAgLy8gYWN0aW9uXHJcbiAgaWYgKHN0YXRlUHJvcHMpIHtcclxuICAgIGNvbnN0IGV4dGVudE1zZyA9IHN0YXRlUHJvcHM/LltNZXNzYWdlVHlwZS5FeHRlbnRDaGFuZ2VdXHJcbiAgICAvLyBhY3Rpb24tZmlsdGVyXHJcbiAgICBpZiAoZXh0ZW50TXNnKSB7XHJcbiAgICAgIG9wdGlvbnMuZ2VvbWV0cnkgPSBleHRlbnRNc2cucXVlcnlFeHRlbnRcclxuICAgICAgaWYgKGV4dGVudE1zZy5xdWVyeVNRTCkge1xyXG4gICAgICAgIG9wdGlvbnMud2hlcmUgPSAob3B0aW9ucy53aGVyZSB8fCAnMT0xJykgKyAnIEFORCAnXHJcbiAgICAgICAgb3B0aW9ucy53aGVyZSArPSBgKCR7ZXh0ZW50TXNnLnF1ZXJ5U1FMfSlgXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBzZWxlY3Rpb25Nc2cgPSBzdGF0ZVByb3BzW01lc3NhZ2VUeXBlLkRhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlXVxyXG4gICAgaWYgKHNlbGVjdGlvbk1zZyAmJiBzZWxlY3Rpb25Nc2cucXVlcnlTUUwpIHtcclxuICAgICAgb3B0aW9ucy53aGVyZSA9IChvcHRpb25zLndoZXJlIHx8ICcxPTEnKSArICcgQU5EICdcclxuICAgICAgb3B0aW9ucy53aGVyZSArPSBgKCR7c2VsZWN0aW9uTXNnLnF1ZXJ5U1FMfSlgXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpZiAoY29uZmlnLnNlYXJjaE9wZW4gJiYgY29uZmlnLnNlYXJjaEZpZWxkcyAmJiBzZWFyY2hUZXh0KSB7XHJcbiAgICBvcHRpb25zLndoZXJlID0gKG9wdGlvbnMud2hlcmUgfHwgJzE9MScpICsgJyBBTkQgJ1xyXG4gICAgY29uc3Qgc2VhcmNoU1FMID0gZ2V0U1FMKHNlYXJjaFRleHQsIGNvbmZpZywgZGF0YXNvdXJjZSk/LnNxbFxyXG4gICAgb3B0aW9ucy53aGVyZSArPSBzZWFyY2hTUUxcclxuICB9XHJcbiAgLy8gcGFnaW5nXHJcbiAgaWYgKHBhZ2VTaXplID4gMCkge1xyXG4gICAgb3B0aW9ucy5wYWdlID0gc3RhdGUucGFnZVxyXG4gICAgb3B0aW9ucy5wYWdlU2l6ZSA9IHBhZ2VTaXplXHJcbiAgfVxyXG5cclxuICAvLyBDb21wYXJlIGlmIHF1ZXJ5IGNoYW5nZWQgZXhjZXB0IHBhZ2luZ1xyXG4gIGNvbnN0IG5ld1F1ZXJ5ID0gb3B0aW9uc1xyXG5cclxuICByZXR1cm4gbmV3UXVlcnlcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoU3VnZ2VzdGlvblJlY29yZHMgKFxyXG4gIHNlYXJjaFRleHQ6IHN0cmluZyxcclxuICBjb25maWc6IElNQ29uZmlnLFxyXG4gIGRhdGFzb3VyY2U6IERhdGFTb3VyY2VcclxuKTogUHJvbWlzZTxTdWdnZXN0aW9uW10+IHtcclxuICBjb25zdCBzZWFyY2hGaWVsZHMgPSBjb25maWcuc2VhcmNoRmllbGRzLnNwbGl0KCcsJylcclxuICBjb25zdCBxdWVyeVBhcmFtczogYW55ID0ge1xyXG4gICAgcGFnZTogMSxcclxuICAgIHBhZ2VTaXplOiAxMCxcclxuICAgIG91dEZpZWxkczogc2VhcmNoRmllbGRzLFxyXG4gICAgcmV0dXJuRGlzdGluY3RWYWx1ZXM6IHRydWVcclxuICB9XHJcblxyXG4gIGlmIChjb25maWcuc2VhcmNoT3BlbiAmJiBjb25maWcuc2VhcmNoRmllbGRzKSB7XHJcbiAgICBjb25zdCBTUUwgPSBnZXRTUUwoc2VhcmNoVGV4dCwgY29uZmlnLCBkYXRhc291cmNlLCB0cnVlKT8uc3FsXHJcbiAgICBxdWVyeVBhcmFtcy53aGVyZSA9IFNRTFxyXG4gIH1cclxuICBjb25zdCBzZWFyY2hSZWcgPSBuZXcgUmVnRXhwKGAoJHtzZWFyY2hUZXh0fSlgLCAnZ2knKVxyXG4gIHJldHVybiBxdWVyeVJlY29yZHMocXVlcnlQYXJhbXMsIGRhdGFzb3VyY2UpLnRoZW4oYXN5bmMgcmVjb3JkcyA9PiB7XHJcbiAgICBsZXQgc2VhcmNoU3VnZ2VzdGlvbiA9IFtdXHJcbiAgICBzZWFyY2hGaWVsZHMuZm9yRWFjaChhdHRyTmFtZSA9PiB7XHJcbiAgICAgIHJlY29yZHMuZm9yRWFjaChlbCA9PiB7XHJcbiAgICAgICAgY29uc3Qgc3VnZ2VzdGlvbkl0ZW0gPSBlbD8uZmVhdHVyZT8uYXR0cmlidXRlc1thdHRyTmFtZV1cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICBzdWdnZXN0aW9uSXRlbSAmJlxyXG4gICAgICAgICAgIXNlYXJjaFN1Z2dlc3Rpb24uaW5jbHVkZXMoc3VnZ2VzdGlvbkl0ZW0pICYmXHJcbiAgICAgICAgICBzdWdnZXN0aW9uSXRlbS5tYXRjaChzZWFyY2hSZWcpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICBjb25zdCBzdWdnZXN0aW9uOiBTdWdnZXN0aW9uID0ge1xyXG4gICAgICAgICAgICBzdWdnZXN0aW9uSHRtbDogZ2V0U3VnZ2VzdGlvbkl0ZW0oc3VnZ2VzdGlvbkl0ZW0sIHNlYXJjaFRleHQpLFxyXG4gICAgICAgICAgICBzdWdnZXN0aW9uOiBzdWdnZXN0aW9uSXRlbVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgc2VhcmNoU3VnZ2VzdGlvbi5wdXNoKHN1Z2dlc3Rpb24pXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICAgIHNlYXJjaFN1Z2dlc3Rpb24gPSB1bmlxdWVKc29uKHNlYXJjaFN1Z2dlc3Rpb24sICdzdWdnZXN0aW9uJylcclxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoc2VhcmNoU3VnZ2VzdGlvbilcclxuICB9KVxyXG59XHJcblxyXG5mdW5jdGlvbiB1bmlxdWVKc29uIChqc29uQXJyLCBrZXkpIHtcclxuICBjb25zdCByZXN1bHQgPSBqc29uQXJyWzBdID8gW2pzb25BcnJbMF1dIDogW11cclxuICBmb3IgKGxldCBpID0gMTsgaSA8IGpzb25BcnIubGVuZ3RoOyBpKyspIHtcclxuICAgIGNvbnN0IGl0ZW0gPSBqc29uQXJyW2ldXHJcbiAgICBsZXQgcmVwZWF0ID0gZmFsc2VcclxuICAgIGZvciAobGV0IGogPSAwOyBqIDwgcmVzdWx0Lmxlbmd0aDsgaisrKSB7XHJcbiAgICAgIGlmIChpdGVtW2tleV0gPT09IHJlc3VsdFtqXVtrZXldKSB7XHJcbiAgICAgICAgcmVwZWF0ID0gdHJ1ZVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICghcmVwZWF0KSB7XHJcbiAgICAgIHJlc3VsdC5wdXNoKGl0ZW0pXHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiByZXN1bHRcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0U1FMIChcclxuICBzZWFyY2hUZXh0OiBzdHJpbmcsXHJcbiAgY29uZmlnOiBJTUNvbmZpZyxcclxuICBkYXRhc291cmNlOiBEYXRhU291cmNlLFxyXG4gIGZldGNoU3VnZ2VzdGlvbjogYm9vbGVhbiA9IGZhbHNlXHJcbikge1xyXG4gIGNvbnN0IHNlYXJjaEZpZWxkcyA9IGNvbmZpZy5zZWFyY2hGaWVsZHMuc3BsaXQoJywnKVxyXG4gIGNvbnN0IHNlYXJjaEV4YWN0ID0gZmV0Y2hTdWdnZXN0aW9uID8gZmFsc2UgOiBjb25maWcuc2VhcmNoRXhhY3RcclxuICBjb25zdCBjbGF1c2VPcGVyYXRvciA9IHNlYXJjaEV4YWN0ID8gQ2xhdXNlT3BlcmF0b3IuU3RyaW5nT3BlcmF0b3JJcyA6IENsYXVzZU9wZXJhdG9yLlN0cmluZ09wZXJhdG9yQ29udGFpbnNcclxuICBpZiAoY29uZmlnLnNlYXJjaE9wZW4gJiYgY29uZmlnLnNlYXJjaEZpZWxkcykge1xyXG4gICAgY29uc3QgY2xhdXNlcyA9IHNlYXJjaEZpZWxkcy5tYXAoZmllbGQgPT4ge1xyXG4gICAgICByZXR1cm4gZGF0YVNvdXJjZVV0aWxzLmNyZWF0ZVNRTENsYXVzZShmaWVsZCwgY2xhdXNlT3BlcmF0b3IsIHNlYXJjaFRleHQpXHJcbiAgICB9KVxyXG4gICAgY29uc3Qgc3FsRXhwcmVzc2lvbiA9IGRhdGFTb3VyY2VVdGlscy5jcmVhdGVTUUxFeHByZXNzaW9uKENsYXVzZUxvZ2ljLk9yLCBjbGF1c2VzKVxyXG4gICAgcmV0dXJuIGRhdGFTb3VyY2VVdGlscy5nZXRBcmNHSVNTUUwoc3FsRXhwcmVzc2lvbiwgZGF0YXNvdXJjZSlcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFN1Z2dlc3Rpb25JdGVtIChzdWdnZXN0aW9uOiBzdHJpbmcsIHNlYXJjaFRleHQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgaWYgKCFzZWFyY2hUZXh0KSByZXR1cm4gc3VnZ2VzdGlvblxyXG4gIGNvbnN0IHJlcGxhY2VSZWcgPSBuZXcgUmVnRXhwKGAoJHtzZWFyY2hUZXh0fSlgLCAnZ2knKVxyXG4gIHJldHVybiBzdWdnZXN0aW9uLnJlcGxhY2UocmVwbGFjZVJlZywgJzxzdHJvbmcgPiQxPC9zdHJvbmc+JylcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gcXVlcnlSZWNvcmRzIChxOiBhbnksIGRzOiBEYXRhU291cmNlKTogUHJvbWlzZTxhbnk+IHtcclxuICBpZiAoIWRzKSByZXR1cm4gYXdhaXQgUHJvbWlzZS5yZXNvbHZlKFtdKVxyXG4gIHJldHVybiBhd2FpdCAoZHMgYXMgUXVlcmlhYmxlRGF0YVNvdXJjZSlcclxuICAgIC5xdWVyeShxLCB7IHNjb3BlOiBRdWVyeVNjb3BlLkluUnVudGltZVZpZXcgfSlcclxuICAgIC50aGVuKGFzeW5jIHF1ZXJ5UmVzdWx0ID0+IGF3YWl0IHF1ZXJ5UmVjb3Jkc1Jlc3VsdChxLCBxdWVyeVJlc3VsdCkpXHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHF1ZXJ5UmVjb3Jkc1Jlc3VsdCAocSwgcXVlcnlSZXN1bHQpOiBQcm9taXNlPGFueT4ge1xyXG4gIHJldHVybiBhd2FpdCBQcm9taXNlLnJlc29sdmUocXVlcnlSZXN1bHQ/LnJlY29yZHMgfHwgW10pXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjb21wYXJlUXVlcnlPcHRpb25zRXhjZXB0UGFnaW5nIChcclxuICBxdWVyeTE6IGFueSxcclxuICBxdWVyeTI6IGFueSxcclxuICBkYXRhc291cmNlOiBRdWVyaWFibGVEYXRhU291cmNlXHJcbik6IGJvb2xlYW4ge1xyXG4gIC8vIGNvbnN0IGlzRXF1YWwgPSB0cnVlO1xyXG4gIGlmICghZGF0YXNvdXJjZSkgcmV0dXJuIGZhbHNlXHJcbiAgcXVlcnkxID0gZGF0YXNvdXJjZS5nZXRSZWFsUXVlcnlQYXJhbXMocXVlcnkxLCAncXVlcnknKVxyXG4gIHF1ZXJ5MiA9IGRhdGFzb3VyY2UuZ2V0UmVhbFF1ZXJ5UGFyYW1zKHF1ZXJ5MiwgJ3F1ZXJ5JylcclxuICBpZiAoIXF1ZXJ5MSB8fCAhcXVlcnkyKSB7XHJcbiAgICByZXR1cm4gZmFsc2VcclxuICB9XHJcbiAgZGVsZXRlIHF1ZXJ5MS5wYWdlXHJcbiAgZGVsZXRlIHF1ZXJ5MS5wYWdlU2l6ZVxyXG4gIGRlbGV0ZSBxdWVyeTEucmVzdWx0T2Zmc2V0XHJcbiAgZGVsZXRlIHF1ZXJ5MS5yZXN1bHRSZWNvcmRDb3VudFxyXG5cclxuICBkZWxldGUgcXVlcnkyLnBhZ2VcclxuICBkZWxldGUgcXVlcnkyLnBhZ2VTaXplXHJcbiAgZGVsZXRlIHF1ZXJ5Mi5yZXN1bHRPZmZzZXRcclxuICBkZWxldGUgcXVlcnkyLnJlc3VsdFJlY29yZENvdW50XHJcblxyXG4gIHJldHVybiB1dGlscy5pc0RlZXBFcXVhbChxdWVyeTEsIHF1ZXJ5MilcclxufVxyXG4iLCJpbXBvcnQge1xyXG4gIFN0YXR1cyxcclxuICBQYWdlU3R5bGUsXHJcbiAgRFNfVE9PTF9ILFxyXG4gIEJPVFRPTV9UT09MX0gsXHJcbiAgU2VsZWN0aW9uTW9kZVR5cGUsXHJcbiAgTGlzdExheW91dFR5cGUsXHJcbiAgRWxlbWVudFNpemUsXHJcbiAgRWxlbWVudFNpemVVbml0LFxyXG4gIENhcmRTaXplLFxyXG4gIExJU1RfQ0FSRF9NSU5fU0laRVxyXG59IGZyb20gJy4uLy4uL2NvbmZpZydcclxuaW1wb3J0IHsgRGF0YVJlY29yZCwgRGF0YVNvdXJjZU1hbmFnZXIsIElNVXNlRGF0YVNvdXJjZSwgZ2V0QXBwU3RvcmUgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB7IExpc3RQcm9wcywgTGlzdFN0YXRlcyB9IGZyb20gJy4uL3dpZGdldCdcclxuaW1wb3J0IHsgU29ydFNldHRpbmdPcHRpb24gfSBmcm9tICdqaW11LXVpL2FkdmFuY2VkL3NldHRpbmctY29tcG9uZW50cydcclxuaW1wb3J0IHsgTGluZWFyVW5pdCwgRGlzdGFuY2VVbml0cywgdXRpbHMgYXMgamltdVV0aWxzIH0gZnJvbSAnamltdS11aSdcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1Njcm9sbFN0YXJ0IChcclxuICBsaXN0RGl2OiBIVE1MRGl2RWxlbWVudCxcclxuICBsYXN0U2Nyb2xsT2Zmc2V0OiBudW1iZXJcclxuKTogYm9vbGVhbiB7XHJcbiAgaWYgKCFsaXN0RGl2KSByZXR1cm4gdHJ1ZVxyXG4gIGNvbnN0IHNjcm9sbFRPckwgPSBsYXN0U2Nyb2xsT2Zmc2V0XHJcbiAgY29uc3QgaXNTdGFydCA9IHNjcm9sbFRPckwgPCAyXHJcbiAgcmV0dXJuIGlzU3RhcnRcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzRXF1YWxDYXJkU2l6ZUJ5TGlzdExheW91dCAoXHJcbiAgY2FyZFNpemUxOiBFbGVtZW50U2l6ZSxcclxuICBjYXJkU2l6ZTI6IEVsZW1lbnRTaXplLFxyXG4gIGxheW91dFR5cGU6IExpc3RMYXlvdXRUeXBlXHJcbikge1xyXG4gIGlmIChsYXlvdXRUeXBlID09PSBMaXN0TGF5b3V0VHlwZS5Db2x1bW4pIHtcclxuICAgIHJldHVybiBpc0VxdWFsTnVtYmVyKGNhcmRTaXplMS53aWR0aCwgY2FyZFNpemUyLndpZHRoKVxyXG4gIH0gZWxzZSBpZiAobGF5b3V0VHlwZSA9PT0gTGlzdExheW91dFR5cGUuUm93KSB7XHJcbiAgICByZXR1cm4gaXNFcXVhbE51bWJlcihjYXJkU2l6ZTEuaGVpZ2h0LCBjYXJkU2l6ZTIuaGVpZ2h0KVxyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gaXNFcXVhbE51bWJlcihjYXJkU2l6ZTEud2lkdGgsIGNhcmRTaXplMi53aWR0aCkgJiYgaXNFcXVhbE51bWJlcihjYXJkU2l6ZTEuaGVpZ2h0LCBjYXJkU2l6ZTIuaGVpZ2h0KVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzRXF1YWxOdW1iZXIgKG51bTE6IG51bWJlciwgbnVtMjogbnVtYmVyKTogYm9vbGVhbiB7XHJcbiAgaWYgKE1hdGguYWJzKG51bTEgLSBudW0yKSA8IDAuMDAwMSkge1xyXG4gICAgcmV0dXJuIHRydWVcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIGZhbHNlXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlT3V0cHV0RHMgKFxyXG4gIHJlY29yZHM6IERhdGFSZWNvcmRbXSxcclxuICBvdXRwdXREc0lkOiBzdHJpbmcsXHJcbiAgdXNlRHM6IElNVXNlRGF0YVNvdXJjZVxyXG4pIHtcclxuICBpZiAoIW91dHB1dERzSWQgfHwgIXVzZURzKSByZXR1cm5cclxuICBjb25zdCBkc01hbmFnZXIgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpXHJcbiAgaWYgKGRzTWFuYWdlci5nZXREYXRhU291cmNlKG91dHB1dERzSWQpKSB7XHJcbiAgICBpZiAoXHJcbiAgICAgIGRzTWFuYWdlci5nZXREYXRhU291cmNlKG91dHB1dERzSWQpLmdldERhdGFTb3VyY2VKc29uKClcclxuICAgICAgICAub3JpZ2luRGF0YVNvdXJjZXNbMF0uZGF0YVNvdXJjZUlkICE9PSB1c2VEcy5kYXRhU291cmNlSWRcclxuICAgICkge1xyXG4gICAgICBkc01hbmFnZXIuZGVzdHJveURhdGFTb3VyY2Uob3V0cHV0RHNJZClcclxuXHJcbiAgICAgIGRzTWFuYWdlci5jcmVhdGVEYXRhU291cmNlKG91dHB1dERzSWQpLnRoZW4ob2RzID0+IHtcclxuICAgICAgICBvZHMuc2V0UmVjb3JkcyhyZWNvcmRzKVxyXG4gICAgICB9KVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3Qgb2RzID0gZHNNYW5hZ2VyLmdldERhdGFTb3VyY2Uob3V0cHV0RHNJZClcclxuICAgICAgb2RzLnNldFJlY29yZHMocmVjb3JkcylcclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgZHNNYW5hZ2VyLmNyZWF0ZURhdGFTb3VyY2Uob3V0cHV0RHNJZCkudGhlbihvZHMgPT4ge1xyXG4gICAgICBvZHMuc2V0UmVjb3JkcyhyZWNvcmRzKVxyXG4gICAgfSlcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRDYXJkU2l6ZU51bWJlckluQ29uZmlnIChwcm9wczogTGlzdFByb3BzLCB3aWRnZXRSZWN0OiBFbGVtZW50U2l6ZSk6IEVsZW1lbnRTaXplIHtcclxuICBjb25zdCB7IGNvbmZpZyB9ID0gcHJvcHNcclxuICBjb25zdCBjYXJkU2l6ZUluQ29uZmlnID0gZ2V0Q2FyZFNpemVDb25maWcocHJvcHMpXHJcbiAgY29uc3Qgd2lkdGhMaW5lYXJVbml0ID0gamltdVV0aWxzLnRvTGluZWFyVW5pdChjYXJkU2l6ZUluQ29uZmlnLndpZHRoKVxyXG4gIGxldCB3aWR0aCA9IGluaXRDYXJkU2l6ZShqaW11VXRpbHMudG9MaW5lYXJVbml0KGNhcmRTaXplSW5Db25maWcud2lkdGgpLCB3aWRnZXRSZWN0LndpZHRoKVxyXG4gIC8vVGhlIHdpZHRoIGluIHBlcmNlbnRhZ2UgaW5jbHVkZXMgc3BhY2UsIHRoZSB3aWR0aCBpbiBweCBkb2VzIG5vdCBpbmNsdWRlXHJcbiAgaWYgKHdpZHRoTGluZWFyVW5pdC51bml0ID09PSBEaXN0YW5jZVVuaXRzLlBFUkNFTlRBR0UpIHtcclxuICAgIHdpZHRoID0gKHdpZHRoIC0gY29uZmlnLmhvcml6b250YWxTcGFjZSkgPiAwID8gd2lkdGggLSBjb25maWcuaG9yaXpvbnRhbFNwYWNlIDogTElTVF9DQVJEX01JTl9TSVpFXHJcbiAgfVxyXG4gIGNvbnN0IGNhcmRTaXplID0ge1xyXG4gICAgd2lkdGg6IHdpZHRoLFxyXG4gICAgaGVpZ2h0OiBpbml0Q2FyZFNpemUoamltdVV0aWxzLnRvTGluZWFyVW5pdChjYXJkU2l6ZUluQ29uZmlnLmhlaWdodCksIHdpZGdldFJlY3QuaGVpZ2h0KVxyXG4gIH1cclxuICByZXR1cm4gY2FyZFNpemVcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldENhcmRTaXplQ29uZmlnIChwcm9wczogTGlzdFByb3BzKTogQ2FyZFNpemUge1xyXG4gIGNvbnN0IHsgY29uZmlnLCBidWlsZGVyU3RhdHVzLCBicm93c2VyU2l6ZU1vZGUgfSA9IHByb3BzXHJcbiAgbGV0IGNhcmRDb25maWdzID0gY29uZmlnPy5hc011dGFibGUoeyBkZWVwOiB0cnVlIH0pLmNhcmRDb25maWdzW2J1aWxkZXJTdGF0dXNdXHJcbiAgaWYgKCFjYXJkQ29uZmlncyB8fCAhY2FyZENvbmZpZ3MuY2FyZFNpemUpIHtcclxuICAgIGNhcmRDb25maWdzID0gY29uZmlnPy5hc011dGFibGUoeyBkZWVwOiB0cnVlIH0pLmNhcmRDb25maWdzW1N0YXR1cy5SZWd1bGFyXVxyXG4gIH1cclxuICBsZXQgY2FyZFNpemVJbkNvbmZpZyA9IGNhcmRDb25maWdzPy5jYXJkU2l6ZT8uW2Jyb3dzZXJTaXplTW9kZV1cclxuICBpZiAoIWNhcmRTaXplSW5Db25maWcpIHtcclxuICAgIGNhcmRTaXplSW5Db25maWcgPSBjYXJkQ29uZmlncy5jYXJkU2l6ZVtPYmplY3Qua2V5cyhjYXJkQ29uZmlncy5jYXJkU2l6ZSlbMF1dXHJcbiAgfVxyXG4gIHJldHVybiBjYXJkU2l6ZUluQ29uZmlnXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXREZWZhdWx0TWluTGlzdFNpemUgKHByb3BzOiBMaXN0UHJvcHMpOiBFbGVtZW50U2l6ZSB7XHJcbiAgY29uc3QgY2FyZFNpemVJbkNvbmZpZyA9IGdldENhcmRTaXplQ29uZmlnKHByb3BzKVxyXG4gIGNvbnN0IGxpc3RNaW5TaXplID0ge1xyXG4gICAgd2lkdGg6IExJU1RfQ0FSRF9NSU5fU0laRSxcclxuICAgIGhlaWdodDogTElTVF9DQVJEX01JTl9TSVpFXHJcbiAgfVxyXG4gIGNvbnN0IGNhcmRTaXplVW5pdCA9IHtcclxuICAgIHdpZHRoOiBqaW11VXRpbHMudG9MaW5lYXJVbml0KGNhcmRTaXplSW5Db25maWcud2lkdGgpLFxyXG4gICAgaGVpZ2h0OiBqaW11VXRpbHMudG9MaW5lYXJVbml0KGNhcmRTaXplSW5Db25maWcuaGVpZ2h0KVxyXG4gIH1cclxuICBpZiAoY2FyZFNpemVVbml0LndpZHRoLnVuaXQgPT09IERpc3RhbmNlVW5pdHMuUEVSQ0VOVEFHRSkge1xyXG4gICAgbGlzdE1pblNpemUud2lkdGggPSAoTElTVF9DQVJEX01JTl9TSVpFICsgMzApIC8gY2FyZFNpemVVbml0LndpZHRoLmRpc3RhbmNlICogMTAwXHJcbiAgfVxyXG4gIGlmIChjYXJkU2l6ZVVuaXQuaGVpZ2h0LnVuaXQgPT09IERpc3RhbmNlVW5pdHMuUEVSQ0VOVEFHRSkge1xyXG4gICAgbGlzdE1pblNpemUuaGVpZ2h0ID0gKExJU1RfQ0FSRF9NSU5fU0laRSArIDMwKSAvIGNhcmRTaXplVW5pdC5oZWlnaHQuZGlzdGFuY2UgKiAxMDBcclxuICB9XHJcbiAgcmV0dXJuIGxpc3RNaW5TaXplXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRDYXJkU2l6ZVdpZHRoVW5pdEluQ29uZmlnIChwcm9wczogTGlzdFByb3BzKTogRWxlbWVudFNpemVVbml0IHtcclxuICBjb25zdCB7IGNvbmZpZyB9ID0gcHJvcHNcclxuICBjb25zdCBjYXJkU2l6ZUluQ29uZmlnID0gZ2V0Q2FyZFNpemVDb25maWcocHJvcHMpXHJcbiAgY29uc3Qgd2lkdGggPSBqaW11VXRpbHMudG9MaW5lYXJVbml0KGNhcmRTaXplSW5Db25maWcud2lkdGgpXHJcblxyXG4gIGlmICh3aWR0aC51bml0ID09PSBEaXN0YW5jZVVuaXRzLlBFUkNFTlRBR0UpIHtcclxuICAgIHdpZHRoLmRpc3RhbmNlID0gKHdpZHRoLmRpc3RhbmNlIC0gY29uZmlnLmhvcml6b250YWxTcGFjZSkgPiAwID8gd2lkdGguZGlzdGFuY2UgLSBjb25maWcuaG9yaXpvbnRhbFNwYWNlIDogTElTVF9DQVJEX01JTl9TSVpFXHJcbiAgfVxyXG5cclxuICBjb25zdCBjYXJkU2l6ZVdpZHRoVW5pdCA9IHtcclxuICAgIHdpZHRoOiB3aWR0aCxcclxuICAgIGhlaWdodDogamltdVV0aWxzLnRvTGluZWFyVW5pdChjYXJkU2l6ZUluQ29uZmlnLmhlaWdodClcclxuICB9XHJcbiAgcmV0dXJuIGNhcmRTaXplV2lkdGhVbml0XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGluaXRDYXJkU2l6ZSAoc2l6ZVVuaXQ6IExpbmVhclVuaXQsIHdpZGdldFNpemU6IG51bWJlcik6IG51bWJlciB7XHJcbiAgaWYgKHNpemVVbml0LnVuaXQgPT09IERpc3RhbmNlVW5pdHMuUEVSQ0VOVEFHRSkge1xyXG4gICAgcmV0dXJuIChzaXplVW5pdC5kaXN0YW5jZSAvIDEwMCkgKiB3aWRnZXRTaXplXHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiBzaXplVW5pdC5kaXN0YW5jZVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFBhZ2VTaXplIChcclxuICB3aWRnZXRSZWN0OiBFbGVtZW50U2l6ZSxcclxuICBsaXN0SGVpZ2h0OiBudW1iZXIsXHJcbiAgcHJvcHM6IExpc3RQcm9wcyxcclxuICBjb2x1bW5Db3VudDogbnVtYmVyXHJcbik6IG51bWJlciB7XHJcbiAgY29uc3QgY2FyZFNpemUgPSBnZXRDYXJkU2l6ZU51bWJlckluQ29uZmlnKHByb3BzLCB3aWRnZXRSZWN0KVxyXG4gIGNvbnN0IHsgY29uZmlnLCBpc0hlaWdodEF1dG8sIGlzV2lkdGhBdXRvIH0gPSBwcm9wc1xyXG4gIGxldCBwYWdlU2l6ZVxyXG4gIGlmIChjb25maWcucGFnZVN0eWxlID09PSBQYWdlU3R5bGUuU2Nyb2xsKSB7XHJcbiAgICBpZiAoIXdpZGdldFJlY3QpIHtcclxuICAgICAgcmV0dXJuIDBcclxuICAgIH1cclxuICAgIHN3aXRjaCAoY29uZmlnPy5sYXlvdXRUeXBlKSB7XHJcbiAgICAgIGNhc2UgTGlzdExheW91dFR5cGUuUm93OlxyXG4gICAgICAgIGlmICh3aWRnZXRSZWN0LmhlaWdodCA9PT0gMCkgcmV0dXJuIDBcclxuICAgICAgICBpZiAoaXNIZWlnaHRBdXRvKSB7XHJcbiAgICAgICAgICBsaXN0SGVpZ2h0ID0gZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHRcclxuICAgICAgICB9XHJcbiAgICAgICAgcGFnZVNpemUgPSBNYXRoLmNlaWwobGlzdEhlaWdodCAvIChjYXJkU2l6ZS5oZWlnaHQgKyBjb25maWcuc3BhY2UpKSArIDFcclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlIExpc3RMYXlvdXRUeXBlLkNvbHVtbjpcclxuICAgICAgICBpZiAod2lkZ2V0UmVjdC53aWR0aCA9PT0gMCkgcmV0dXJuIDBcclxuICAgICAgICBsZXQgbGlzdFdpZHRoID0gd2lkZ2V0UmVjdC53aWR0aFxyXG4gICAgICAgIGlmIChpc1dpZHRoQXV0bykge1xyXG4gICAgICAgICAgbGlzdFdpZHRoID0gZG9jdW1lbnQuYm9keS5zY3JvbGxXaWR0aFxyXG4gICAgICAgIH1cclxuICAgICAgICBwYWdlU2l6ZSA9IE1hdGguY2VpbChsaXN0V2lkdGggLyAoY2FyZFNpemUud2lkdGggKyBjb25maWcuc3BhY2UpKSArIDFcclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlIExpc3RMYXlvdXRUeXBlLkdSSUQ6XHJcbiAgICAgICAgaWYgKHdpZGdldFJlY3QuaGVpZ2h0ID09PSAwKSByZXR1cm4gMFxyXG4gICAgICAgIGlmIChpc0hlaWdodEF1dG8pIHtcclxuICAgICAgICAgIGxpc3RIZWlnaHQgPSBkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodFxyXG4gICAgICAgIH1cclxuICAgICAgICBwYWdlU2l6ZSA9IE1hdGguY2VpbChsaXN0SGVpZ2h0IC8gKGNhcmRTaXplLmhlaWdodCArIGNvbmZpZy5zcGFjZSkpICogY29sdW1uQ291bnRcclxuICAgICAgICBicmVha1xyXG4gICAgfVxyXG4gICAgaWYgKGNvbmZpZy5uYXZpZ2F0b3JPcGVuKSB7XHJcbiAgICAgIHBhZ2VTaXplID0gTWF0aC5tYXgocGFnZVNpemUsIGNvbmZpZy5zY3JvbGxTdGVwKVxyXG4gICAgfVxyXG4gIH0gZWxzZSB7XHJcbiAgICBwYWdlU2l6ZSA9IGNvbmZpZy5pdGVtc1BlclBhZ2VcclxuICB9XHJcbiAgcmV0dXJuIHBhZ2VTaXplXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRCb3R0b21Ub29sSCAoXHJcbiAgcGFnaW5hdG9yRGl2OiBIVE1MRGl2RWxlbWVudCxcclxuICBzaG93Qm90dG9tVG9vbHM6IGJvb2xlYW5cclxuKTogbnVtYmVyIHtcclxuICBsZXQgYm90dG9tVG9vbEggPSBCT1RUT01fVE9PTF9IXHJcbiAgaWYgKHBhZ2luYXRvckRpdikge1xyXG4gICAgYm90dG9tVG9vbEggPSBwYWdpbmF0b3JEaXYuY2xpZW50SGVpZ2h0XHJcbiAgfVxyXG4gIGJvdHRvbVRvb2xIID0gc2hvd0JvdHRvbVRvb2xzID8gYm90dG9tVG9vbEggOiAwXHJcbiAgcmV0dXJuIGJvdHRvbVRvb2xIXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRMaXN0SGVpZ2h0IChcclxuICB3aWRnZXRSZWN0LFxyXG4gIGJvdHRvbVRvb2xIOiBudW1iZXIsXHJcbiAgc2hvd1RvcFRvb2w6IGJvb2xlYW5cclxuKTogbnVtYmVyIHtcclxuICBjb25zdCBkc1Rvb2xIID0gc2hvd1RvcFRvb2wgPyBEU19UT09MX0ggOiAwXHJcbiAgaWYgKCF3aWRnZXRSZWN0KSByZXR1cm4gMFxyXG4gIGNvbnN0IGhlaWdodCA9IHdpZGdldFJlY3QuaGVpZ2h0IC0gZHNUb29sSCAtIGJvdHRvbVRvb2xIXHJcbiAgcmV0dXJuIGhlaWdodCA8IDAgPyAwIDogaGVpZ2h0XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzaG93Qm90dG9tVG9vbHMgKHByb3BzOiBMaXN0UHJvcHMsIHN0YXRlOiBMaXN0U3RhdGVzKTogYm9vbGVhbiB7XHJcbiAgY29uc3QgeyBjb25maWcgfSA9IHByb3BzXHJcbiAgY29uc3QgeyBkYXRhc291cmNlIH0gPSBzdGF0ZVxyXG4gIHJldHVybiAoXHJcbiAgICAhIWRhdGFzb3VyY2UgJiZcclxuICAgICEoY29uZmlnLnBhZ2VTdHlsZSA9PT0gUGFnZVN0eWxlLlNjcm9sbCAmJiAhY29uZmlnLm5hdmlnYXRvck9wZW4pXHJcbiAgKVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2hvd1RvcFRvb2xzIChwcm9wczogTGlzdFByb3BzKTogYm9vbGVhbiB7XHJcbiAgcmV0dXJuIChcclxuICAgIGNoZWNrSXNTaG93TGlzdFRvb2xzT25seShwcm9wcykgfHwgY2hlY2tJc1Nob3dEYXRhQWN0aW9uKHByb3BzKVxyXG4gIClcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrSXNTaG93TGlzdFRvb2xzT25seSAocHJvcHM6IExpc3RQcm9wcyk6IGJvb2xlYW4ge1xyXG4gIHJldHVybiAoXHJcbiAgICBzaG93U29ydChwcm9wcykgfHxcclxuICAgIHNob3dEaXNwbGF5U2VsZWN0ZWRPbmx5KHByb3BzKSB8fFxyXG4gICAgc2hvd0NsZWFyU2VsZWN0ZWQocHJvcHMpIHx8XHJcbiAgICBzaG93RmlsdGVyKHByb3BzKSB8fFxyXG4gICAgc2hvd1NlYXJjaChwcm9wcylcclxuICApXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0RzQ29uZmlndXJlZCAocHJvcHM6IExpc3RQcm9wcyk6IGJvb2xlYW4ge1xyXG4gIGNvbnN0IHsgdXNlRGF0YVNvdXJjZXMgfSA9IHByb3BzXHJcbiAgcmV0dXJuICEhdXNlRGF0YVNvdXJjZXMgJiYgISF1c2VEYXRhU291cmNlc1swXVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tJc1Nob3dEYXRhQWN0aW9uIChwcm9wczogTGlzdFByb3BzKTogYm9vbGVhbiB7XHJcbiAgY29uc3QgeyBpZCB9ID0gcHJvcHNcclxuICBjb25zdCBhcHBDb25maWcgPSBnZXRBcHBTdG9yZSgpPy5nZXRTdGF0ZSgpPy5hcHBDb25maWdcclxuICBjb25zdCB3aWRnZXRKc29uID0gYXBwQ29uZmlnPy53aWRnZXRzPy5baWRdXHJcbiAgY29uc3QgZW5hYmxlRGF0YUFjdGlvbiA9IHdpZGdldEpzb24/LmVuYWJsZURhdGFBY3Rpb24gPT09IHVuZGVmaW5lZCA/IHRydWUgOiB3aWRnZXRKc29uPy5lbmFibGVEYXRhQWN0aW9uXHJcbiAgcmV0dXJuIGVuYWJsZURhdGFBY3Rpb24gJiYgaXNEc0NvbmZpZ3VyZWQocHJvcHMpXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzaG93U29ydCAocHJvcHM6IExpc3RQcm9wcyk6IGJvb2xlYW4ge1xyXG4gIGNvbnN0IHsgY29uZmlnIH0gPSBwcm9wc1xyXG4gIGlmICghY29uZmlnLnNvcnRPcGVuIHx8ICFjb25maWcuc29ydHMgfHwgY29uZmlnLnNvcnRzLmxlbmd0aCA8IDEpIHJldHVybiBmYWxzZVxyXG4gIGNvbnN0IHNvcnRzID0gY29uZmlnLnNvcnRzXHJcbiAgbGV0IGlzVmFsaWQgPSBmYWxzZVxyXG4gIHNvcnRzLnNvbWUoKHNvcnQ6IFNvcnRTZXR0aW5nT3B0aW9uKSA9PiB7XHJcbiAgICBzb3J0LnJ1bGUgJiZcclxuICAgICAgc29ydC5ydWxlLnNvbWUoc29ydERhdGEgPT4ge1xyXG4gICAgICAgIGlmIChzb3J0RGF0YSAmJiAhIXNvcnREYXRhLmppbXVGaWVsZE5hbWUpIHtcclxuICAgICAgICAgIGlzVmFsaWQgPSB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpc1ZhbGlkXHJcbiAgICAgIH0pXHJcbiAgICByZXR1cm4gaXNWYWxpZFxyXG4gIH0pXHJcbiAgcmV0dXJuIGlzVmFsaWRcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNob3dTZWFyY2ggKHByb3BzOiBMaXN0UHJvcHMpOiBib29sZWFuIHtcclxuICBjb25zdCB7IGNvbmZpZyB9ID0gcHJvcHNcclxuICByZXR1cm4gY29uZmlnLnNlYXJjaE9wZW4gJiYgY29uZmlnLnNlYXJjaEZpZWxkcyAmJiBjb25maWcuc2VhcmNoRmllbGRzICE9PSAnJ1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2hvd0ZpbHRlciAocHJvcHM6IExpc3RQcm9wcyk6IGJvb2xlYW4ge1xyXG4gIGNvbnN0IHsgY29uZmlnIH0gPSBwcm9wc1xyXG4gIHJldHVybiBjb25maWcuZmlsdGVyT3BlbiAmJiAhIWNvbmZpZy5maWx0ZXJcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNob3dEaXNwbGF5U2VsZWN0ZWRPbmx5IChwcm9wczogTGlzdFByb3BzKTogYm9vbGVhbiB7XHJcbiAgY29uc3QgeyBjb25maWcgfSA9IHByb3BzXHJcbiAgcmV0dXJuIChcclxuICAgIGNvbmZpZy5zaG93U2VsZWN0ZWRPbmx5T3BlbiAmJlxyXG4gICAgY29uZmlnLmNhcmRDb25maWdzW1N0YXR1cy5TZWxlY3RlZF0uc2VsZWN0aW9uTW9kZSAhPT0gU2VsZWN0aW9uTW9kZVR5cGUuTm9uZVxyXG4gIClcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNob3dDbGVhclNlbGVjdGVkIChwcm9wczogTGlzdFByb3BzKTogYm9vbGVhbiB7XHJcbiAgY29uc3QgeyBjb25maWcgfSA9IHByb3BzXHJcbiAgcmV0dXJuIChcclxuICAgIGNvbmZpZy5zaG93Q2xlYXJTZWxlY3RlZCAmJlxyXG4gICAgY29uZmlnLmNhcmRDb25maWdzW1N0YXR1cy5TZWxlY3RlZF0uc2VsZWN0aW9uTW9kZSAhPT0gU2VsZWN0aW9uTW9kZVR5cGUuTm9uZVxyXG4gIClcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGludGVyc2VjdGlvbk9ic2VydmVyIChcclxuICByZWY6IEhUTUxFbGVtZW50LFxyXG4gIHJvb3RFbGVtZW50OiBIVE1MRWxlbWVudCxcclxuICBvbkNoYW5nZT86IChpc0luOiBib29sZWFuKSA9PiB2b2lkLFxyXG4gIG9wdGlvbnM/OiBJbnRlcnNlY3Rpb25PYnNlcnZlckluaXRcclxuKSB7XHJcbiAgY29uc3Qgb3B0aW9uOiBhbnkgPSBvcHRpb25zIHx8IHsgcm9vdDogcm9vdEVsZW1lbnQgfVxyXG4gIGNvbnN0IGNhbGxiYWNrID0gZnVuY3Rpb24gKFxyXG4gICAgZW50cmllczogSW50ZXJzZWN0aW9uT2JzZXJ2ZXJFbnRyeVtdLFxyXG4gICAgb2JzZXJ2ZXI6IEludGVyc2VjdGlvbk9ic2VydmVyXHJcbiAgKSB7XHJcbiAgICBjb25zdCBpc0luID0gZW50cmllc1swXS5pbnRlcnNlY3Rpb25SYXRpbyA+IDBcclxuICAgIG9uQ2hhbmdlICYmIG9uQ2hhbmdlKGlzSW4pXHJcbiAgfVxyXG4gIGNvbnN0IG9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKGNhbGxiYWNrLCBvcHRpb24pXHJcbiAgb2JzZXJ2ZXIub2JzZXJ2ZShyZWYpXHJcbiAgcmV0dXJuIG9ic2VydmVyXHJcbn1cclxuIiwiaW1wb3J0IHsgQmFzZVZlcnNpb25NYW5hZ2VyLCBEYXRhU291cmNlTWFuYWdlciwgZ2V0QXBwU3RvcmUsIFF1ZXJpYWJsZURhdGFTb3VyY2UgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB7IHVwZGF0ZVNRTEV4cHJlc3Npb25CeVZlcnNpb24gfSBmcm9tICdqaW11LXVpL2Jhc2ljL3NxbC1leHByZXNzaW9uLXJ1bnRpbWUnXHJcbmltcG9ydCB7IExpc3RMYXlvdXRUeXBlLCBEaXJlY3Rpb25UeXBlIH0gZnJvbSAnLi9jb25maWcnXHJcblxyXG5jb25zdCBnZXREcyA9IGFzeW5jIGZ1bmN0aW9uIChmaWx0ZXIsIHdpZGdldElkKTogUHJvbWlzZTxhbnk+IHtcclxuICBsZXQgZHNcclxuICBjb25zdCBkYXRhU291cmNlID0gZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpPy5hcHBDb25maWc/LndpZGdldHNbd2lkZ2V0SWRdXHJcbiAgICA/LnVzZURhdGFTb3VyY2VzPy5bMF1cclxuICBjb25zdCBkc01hbmFnZXIgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpXHJcbiAgaWYgKGZpbHRlciAmJiBkYXRhU291cmNlKSB7XHJcbiAgICBkcyA9IGRzTWFuYWdlci5jcmVhdGVEYXRhU291cmNlQnlVc2VEYXRhU291cmNlKFxyXG4gICAgICBPYmplY3QuYXNzaWduKHt9LCBkYXRhU291cmNlLCB7XHJcbiAgICAgICAgbWFpbkRhdGFTb3VyY2VJZDogZGF0YVNvdXJjZS5tYWluRGF0YVNvdXJjZUlkXHJcbiAgICAgIH0pLFxyXG4gICAgICAnbG9jYWxJZCdcclxuICAgIClcclxuICB9XHJcbiAgcmV0dXJuIGF3YWl0IFByb21pc2UucmVzb2x2ZShkcylcclxufVxyXG5cclxuY29uc3QgY2hlY2tJc1Nob3dBdXRvUmVmcmVzaFNldHRpbmcgPSAoZGF0YXNvdXJjZSk6IGJvb2xlYW4gPT4ge1xyXG4gIGlmICghZGF0YXNvdXJjZSkgcmV0dXJuIGZhbHNlXHJcbiAgY29uc3QgaW50ZXJ2YWwgPSAoZGF0YXNvdXJjZSBhcyBRdWVyaWFibGVEYXRhU291cmNlKT8uZ2V0QXV0b1JlZnJlc2hJbnRlcnZhbCgpIHx8IDBcclxuICByZXR1cm4gaW50ZXJ2YWwgPiAwXHJcbn1cclxuXHJcbmNsYXNzIFZlcnNpb25NYW5hZ2VyIGV4dGVuZHMgQmFzZVZlcnNpb25NYW5hZ2VyIHtcclxuICB2ZXJzaW9ucyA9IFtcclxuICAgIHtcclxuICAgICAgdmVyc2lvbjogJzEuMS4wJyxcclxuICAgICAgZGVzY3JpcHRpb246ICcnLFxyXG4gICAgICB1cGdyYWRlcjogYXN5bmMgKG9sZENvbmZpZywgaWQ6IHN0cmluZykgPT4ge1xyXG4gICAgICAgIGNvbnN0IGZpbHRlciA9IG9sZENvbmZpZy5maWx0ZXJcclxuICAgICAgICByZXR1cm4gYXdhaXQgZ2V0RHMoZmlsdGVyLCBpZCkudGhlbihkcyA9PiB7XHJcbiAgICAgICAgICBsZXQgbmV3Q29uZmlnID0gb2xkQ29uZmlnXHJcbiAgICAgICAgICBjb25zdCBuZXdGSXRlbXMgPSBmaWx0ZXJcclxuICAgICAgICAgICAgPyB1cGRhdGVTUUxFeHByZXNzaW9uQnlWZXJzaW9uKGZpbHRlciwgJzEuMS4wJywgZHMpXHJcbiAgICAgICAgICAgIDogbnVsbFxyXG5cclxuICAgICAgICAgIG5ld0NvbmZpZyA9IG5ld0NvbmZpZy5zZXQoJ2ZpbHRlcicsIG5ld0ZJdGVtcylcclxuICAgICAgICAgIHJldHVybiBuZXdDb25maWdcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICB2ZXJzaW9uOiAnMS41LjAnLFxyXG4gICAgICBkZXNjcmlwdGlvbjogJzEuNS4wJyxcclxuICAgICAgdXBncmFkZXI6IGFzeW5jIChvbGRDb25maWcsIGlkOiBzdHJpbmcpID0+IHtcclxuICAgICAgICBjb25zdCBmaWx0ZXIgPSBvbGRDb25maWcuZmlsdGVyXHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IGdldERzKGZpbHRlciwgaWQpLnRoZW4oZHMgPT4ge1xyXG4gICAgICAgICAgbGV0IG5ld0NvbmZpZyA9IG9sZENvbmZpZ1xyXG4gICAgICAgICAgaWYgKHR5cGVvZiAob2xkQ29uZmlnPy5pc1Nob3dBdXRvUmVmcmVzaCkgIT09ICdib29sZWFuJykge1xyXG4gICAgICAgICAgICBjb25zdCBpc1Nob3dBdXRvUmVmcmVzaCA9IGNoZWNrSXNTaG93QXV0b1JlZnJlc2hTZXR0aW5nKGRzKVxyXG4gICAgICAgICAgICBuZXdDb25maWcgPSBuZXdDb25maWcuc2V0KCdpc1Nob3dBdXRvUmVmcmVzaCcsIGlzU2hvd0F1dG9SZWZyZXNoKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIG5ld0NvbmZpZ1xyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIHZlcnNpb246ICcxLjguMCcsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiAnMS44LjAnLFxyXG4gICAgICB1cGdyYWRlcjogYXN5bmMgKG9sZENvbmZpZywgaWQ6IHN0cmluZykgPT4ge1xyXG4gICAgICAgIGxldCBuZXdDb25maWcgPSBvbGRDb25maWdcclxuICAgICAgICBpZiAob2xkQ29uZmlnPy5kaXJlY3Rpb24gJiYgIW9sZENvbmZpZz8ubGF5b3V0VHlwZSkge1xyXG4gICAgICAgICAgY29uc3QgbGF5b3V0VHlwZSA9IG9sZENvbmZpZz8uZGlyZWN0aW9uID09PSBEaXJlY3Rpb25UeXBlLkhvcml6b24gPyBMaXN0TGF5b3V0VHlwZS5Db2x1bW4gOiBMaXN0TGF5b3V0VHlwZS5Sb3dcclxuICAgICAgICAgIG5ld0NvbmZpZyA9IG5ld0NvbmZpZy5zZXQoJ2xheW91dFR5cGUnLCBsYXlvdXRUeXBlKS5zZXQoJ2tlZXBBc3BlY3RSYXRpbycsIGZhbHNlKVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3Q29uZmlnXHJcbiAgICAgIH1cclxuICAgIH1cclxuICBdXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCB2ZXJzaW9uTWFuYWdlciA9IG5ldyBWZXJzaW9uTWFuYWdlcigpXHJcbiIsImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgeyBTVkcsIFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvb3V0bGluZWQvYnJhbmQvd2lkZ2V0LWZpbHRlci5zdmcnXHJcblxyXG5leHBvcnQgY29uc3QgV2lkZ2V0RmlsdGVyT3V0bGluZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XHJcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcclxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXHJcbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cclxufVxyXG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHsgU1ZHLCBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL2Fycm93LWxlZnQuc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IEFycm93TGVmdE91dGxpbmVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xyXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXHJcbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxyXG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XHJcbn1cclxuIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB7IFNWRywgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9kb3duLnN2ZydcclxuXHJcbmV4cG9ydCBjb25zdCBEb3duT3V0bGluZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XHJcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcclxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXHJcbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cclxufVxyXG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHsgU1ZHLCBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL2xlZnQuc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IExlZnRPdXRsaW5lZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcclxuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xyXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcclxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxyXG59XHJcbiIsImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgeyBTVkcsIFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvb3V0bGluZWQvZGlyZWN0aW9uYWwvcmlnaHQuc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IFJpZ2h0T3V0bGluZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XHJcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcclxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXHJcbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cclxufVxyXG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHsgU1ZHLCBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL3VwLnN2ZydcclxuXHJcbmV4cG9ydCBjb25zdCBVcE91dGxpbmVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xyXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXHJcbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxyXG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XHJcbn1cclxuIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB7IFNWRywgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9vdXRsaW5lZC9lZGl0b3IvY2xvc2Uuc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IENsb3NlT3V0bGluZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XHJcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcclxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXHJcbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cclxufVxyXG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHsgU1ZHLCBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL2VkaXRvci9tZW51LnN2ZydcclxuXHJcbmV4cG9ydCBjb25zdCBNZW51T3V0bGluZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XHJcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcclxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXHJcbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cclxufVxyXG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHsgU1ZHLCBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL2VkaXRvci9yZXNldC5zdmcnXHJcblxyXG5leHBvcnQgY29uc3QgUmVzZXRPdXRsaW5lZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcclxuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xyXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcclxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxyXG59XHJcbiIsImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgeyBTVkcsIFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvb3V0bGluZWQvZWRpdG9yL3NlYXJjaC5zdmcnXHJcblxyXG5leHBvcnQgY29uc3QgU2VhcmNoT3V0bGluZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XHJcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcclxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXHJcbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cclxufVxyXG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcclxuaW1wb3J0IHsgU1ZHLCBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL2VkaXRvci9zaG93LXNlbGVjdGlvbi5zdmcnXHJcbmltcG9ydCBzcmNSVEwgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL2VkaXRvci9zaG93LXNlbGVjdGlvbi0tcnRsLnN2ZydcclxuXHJcbmV4cG9ydCBjb25zdCBTaG93U2VsZWN0aW9uT3V0bGluZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XHJcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcclxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQgaGFzLXJ0bC1zdmcnLCBjbGFzc05hbWUpXHJcbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gc3JjUlRMPXtzcmNSVEx9IHsuLi5vdGhlcnN9IC8+XHJcbn1cclxuIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB7IFNWRywgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9vdXRsaW5lZC9lZGl0b3Ivc3luYy1vZmYuc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IFN5bmNPZmZPdXRsaW5lZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcclxuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xyXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcclxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxyXG59XHJcbiIsImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgeyBTVkcsIFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvb3V0bGluZWQvZWRpdG9yL3N5bmMtb24uc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IFN5bmNPbk91dGxpbmVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xyXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXHJcbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxyXG4gIHJldHVybiA8U1ZHIGNsYXNzTmFtZT17Y2xhc3Nlc30gc3JjPXtzcmN9IHsuLi5vdGhlcnN9IC8+XHJcbn1cclxuIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB7IFNWRywgU1ZHQ29tcG9uZW50UHJvcHMgfSBmcm9tICdqaW11LXVpJ1xyXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9vdXRsaW5lZC9lZGl0b3IvdHJhc2gtY2hlY2suc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IFRyYXNoQ2hlY2tPdXRsaW5lZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcclxuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xyXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcclxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxyXG59XHJcbiIsImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xyXG5pbXBvcnQgeyBTVkcsIFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcclxuaW1wb3J0IHNyYyBmcm9tICcuLi8uLi9zdmcvb3V0bGluZWQvc3VnZ2VzdGVkL3dhcm5pbmcuc3ZnJ1xyXG5cclxuZXhwb3J0IGNvbnN0IFdhcm5pbmdPdXRsaW5lZCA9IChwcm9wczogU1ZHQ29tcG9uZW50UHJvcHMpID0+IHtcclxuICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ub3RoZXJzIH0gPSBwcm9wc1xyXG4gIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKCdqaW11LWljb24gamltdS1pY29uLWNvbXBvbmVudCcsIGNsYXNzTmFtZSlcclxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxyXG59XHJcbiIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9qaW11X2NvcmVfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfcmVhY3RfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfamltdV9sYXlvdXRzX2xheW91dF9ydW50aW1lX187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX2ppbXVfdWlfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfamltdV91aV9iYXNpY19zcWxfZXhwcmVzc2lvbl9ydW50aW1lX187IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7XG4gIGlmIChzZWxmID09PSB2b2lkIDApIHtcbiAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7XG4gIH1cblxuICByZXR1cm4gc2VsZjtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfZXh0ZW5kcygpIHtcbiAgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduID8gT2JqZWN0LmFzc2lnbi5iaW5kKCkgOiBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07XG5cbiAgICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcbiAgICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfTtcbiAgcmV0dXJuIF9leHRlbmRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59IiwiaW1wb3J0IHNldFByb3RvdHlwZU9mIGZyb20gXCIuL3NldFByb3RvdHlwZU9mLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfaW5oZXJpdHNMb29zZShzdWJDbGFzcywgc3VwZXJDbGFzcykge1xuICBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MucHJvdG90eXBlKTtcbiAgc3ViQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gc3ViQ2xhc3M7XG4gIHNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShzb3VyY2UsIGV4Y2x1ZGVkKSB7XG4gIGlmIChzb3VyY2UgPT0gbnVsbCkgcmV0dXJuIHt9O1xuICB2YXIgdGFyZ2V0ID0ge307XG4gIHZhciBzb3VyY2VLZXlzID0gT2JqZWN0LmtleXMoc291cmNlKTtcbiAgdmFyIGtleSwgaTtcblxuICBmb3IgKGkgPSAwOyBpIDwgc291cmNlS2V5cy5sZW5ndGg7IGkrKykge1xuICAgIGtleSA9IHNvdXJjZUtleXNbaV07XG4gICAgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTtcbiAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICB9XG5cbiAgcmV0dXJuIHRhcmdldDtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkge1xuICBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2YuYmluZCgpIDogZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHtcbiAgICBvLl9fcHJvdG9fXyA9IHA7XG4gICAgcmV0dXJuIG87XG4gIH07XG4gIHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7XG59IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7IiwiLyoqXHJcbiAqIFdlYnBhY2sgd2lsbCByZXBsYWNlIF9fd2VicGFja19wdWJsaWNfcGF0aF9fIHdpdGggX193ZWJwYWNrX3JlcXVpcmVfXy5wIHRvIHNldCB0aGUgcHVibGljIHBhdGggZHluYW1pY2FsbHkuXHJcbiAqIFRoZSByZWFzb24gd2h5IHdlIGNhbid0IHNldCB0aGUgcHVibGljUGF0aCBpbiB3ZWJwYWNrIGNvbmZpZyBpczogd2UgY2hhbmdlIHRoZSBwdWJsaWNQYXRoIHdoZW4gZG93bmxvYWQuXHJcbiAqICovXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxyXG4vLyBAdHMtaWdub3JlXHJcbl9fd2VicGFja19wdWJsaWNfcGF0aF9fID0gd2luZG93LmppbXVDb25maWcuYmFzZVVybFxyXG4iLCIvKiogQGpzeCBqc3ggKi9cclxuaW1wb3J0IHtcclxuICBJTVN0YXRlLFxyXG4gIGNsYXNzTmFtZXMsXHJcbiAgUmVhY3QsXHJcbiAganN4LFxyXG4gIEFsbFdpZGdldFByb3BzLFxyXG4gIERhdGFSZWNvcmQsXHJcbiAgRGF0YVNvdXJjZVN0YXR1cyxcclxuICBBcHBNb2RlLFxyXG4gIEJyb3dzZXJTaXplTW9kZSxcclxuICBhcHBBY3Rpb25zLFxyXG4gIERhdGFTb3VyY2VDb21wb25lbnQsXHJcbiAgTWVzc2FnZU1hbmFnZXIsXHJcbiAgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlLFxyXG4gIGdldEFwcFN0b3JlLFxyXG4gIFJlYWN0UmVzaXplRGV0ZWN0b3IsXHJcbiAgRGF0YVNvdXJjZU1hbmFnZXIsXHJcbiAgSW1tdXRhYmxlQXJyYXksXHJcbiAgSU1TcWxFeHByZXNzaW9uLFxyXG4gIExheW91dFR5cGUsXHJcbiAgSW1tdXRhYmxlLFxyXG4gIFF1ZXJpYWJsZURhdGFTb3VyY2UsXHJcbiAgSU1EYXRhU291cmNlSW5mbyxcclxuICBEYXRhU291cmNlLFxyXG4gIElNVXJsUGFyYW1ldGVycyxcclxuICBsb2Rhc2gsXHJcbiAgTGF5b3V0SXRlbVR5cGUsXHJcbiAgYXBwQ29uZmlnVXRpbHMsXHJcbiAgdXRpbHMsXHJcbiAgQm91bmRpbmdCb3hcclxufSBmcm9tICdqaW11LWNvcmUnXHJcblxyXG5pbXBvcnQge1xyXG4gIFdpZGdldFBsYWNlaG9sZGVyLFxyXG4gIEJ1dHRvbixcclxuICBQb3BwZXIsXHJcbiAgRGF0YUFjdGlvbkRyb3BEb3duLFxyXG4gIGRlZmF1bHRNZXNzYWdlcyBhcyBqaW11VUlEZWZhdWx0TWVzc2FnZXMsXHJcbiAgQWxlcnQsXHJcbiAgRGlzdGFuY2VVbml0cyxcclxuICBUZXh0QWxpZ25WYWx1ZVxyXG59IGZyb20gJ2ppbXUtdWknXHJcblxyXG5pbXBvcnQge1xyXG4gIElNQ29uZmlnLFxyXG4gIFNlbGVjdGlvbk1vZGVUeXBlLFxyXG4gIFN0YXR1cyxcclxuICBMSVNUX0NBUkRfTUlOX1NJWkUsXHJcbiAgUGFnZVN0eWxlLFxyXG4gIENhcmRTaXplLFxyXG4gIFN1Z2dlc3Rpb24sXHJcbiAgRFNfVE9PTF9ILFxyXG4gIExJU1RfVE9PTF9NSU5fU0laRV9OT19EQVRBX0FDVElPTixcclxuICBMSVNUX1RPT0xfTUlOX1NJWkVfREFUQV9BQ1RJT04sXHJcbiAgTGlzdERpdlNpemUsXHJcbiAgTGlzdExheW91dFR5cGUsXHJcbiAgRWxlbWVudFNpemVcclxufSBmcm9tICcuLi9jb25maWcnXHJcblxyXG5pbXBvcnQge1xyXG4gIExheW91dEVudHJ5LFxyXG4gIHNlYXJjaFV0aWxzLFxyXG4gIExheW91dEl0ZW1TaXplTW9kZXNcclxufSBmcm9tICdqaW11LWxheW91dHMvbGF5b3V0LXJ1bnRpbWUnXHJcblxyXG5pbXBvcnQge1xyXG4gIGdldFF1ZXJ5T3B0aW9ucyxcclxuICBmZXRjaFN1Z2dlc3Rpb25SZWNvcmRzLFxyXG4gIGNvbXBhcmVRdWVyeU9wdGlvbnNFeGNlcHRQYWdpbmdcclxufSBmcm9tICcuL3V0aWxzL2xpc3Qtc2VydmljZSdcclxuXHJcbmltcG9ydCB7XHJcbiAgZ2V0VG9vbHNQb3BwZXJTdHlsZSxcclxuICBnZXRTZWFyY2hUb29sU3R5bGUsXHJcbiAgZ2V0U3R5bGUsXHJcbiAgbGlzdFN0eWxlLFxyXG4gIGdldFRvcFRvb2xTdHlsZVxyXG59IGZyb20gJy4vc3R5bGVzL3N0eWxlJ1xyXG5cclxuaW1wb3J0IExpc3RDYXJkRWRpdG9yIGZyb20gJy4vY29tcG9uZW50cy9saXN0LWNhcmQtZWRpdG9yJ1xyXG5pbXBvcnQgTGlzdENhcmRWaWV3ZXIgZnJvbSAnLi9jb21wb25lbnRzL2xpc3QtY2FyZC12aWV3ZXInXHJcbmltcG9ydCBkZWZhdWx0TWVzc2FnZXMgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcclxuaW1wb3J0IFNlYXJjaEJveCBmcm9tICcuL2NvbXBvbmVudHMvc2VhcmNoLWJveCdcclxuaW1wb3J0IHsgVmFyaWFibGVTaXplTGlzdCBhcyBMaXN0LCBWYXJpYWJsZVNpemVHcmlkIGFzIEdyaWQgfSBmcm9tICdyZWFjdC13aW5kb3cnXHJcbmltcG9ydCB7IEZyYWdtZW50LCBmb3J3YXJkUmVmIH0gZnJvbSAncmVhY3QnXHJcbmltcG9ydCBNeURyb3BEb3duLCB7IE15RHJvcERvd25JdGVtIH0gZnJvbSAnLi9jb21wb25lbnRzL215LWRyb3Bkb3duJ1xyXG5pbXBvcnQgRmlsdGVyUGlja2VyIGZyb20gJy4vY29tcG9uZW50cy9maWx0ZXItcGlja2VyJ1xyXG5pbXBvcnQgeyBMaXN0Qm90dG9tVG9vbHMgfSBmcm9tICcuL2NvbXBvbmVudHMvYm90dG9tLXRvb2xzJ1xyXG5pbXBvcnQgeyB2ZXJzaW9uTWFuYWdlciB9IGZyb20gJy4uL3ZlcnNpb24tbWFuYWdlcidcclxuaW1wb3J0ICogYXMgbGlzdFV0aWxzIGZyb20gJy4vdXRpbHMvdXRpbHMnXHJcbmltcG9ydCB7IE1lbnVPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZWRpdG9yL21lbnUnXHJcbmltcG9ydCB7IFNlYXJjaE91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9lZGl0b3Ivc2VhcmNoJ1xyXG5pbXBvcnQgeyBTaG93U2VsZWN0aW9uT3V0bGluZWQgfSBmcm9tICdqaW11LWljb25zL291dGxpbmVkL2VkaXRvci9zaG93LXNlbGVjdGlvbidcclxuaW1wb3J0IHsgVHJhc2hDaGVja091dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9lZGl0b3IvdHJhc2gtY2hlY2snXHJcbmltcG9ydCB7IFdhcm5pbmdPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvc3VnZ2VzdGVkL3dhcm5pbmcnXHJcblxyXG5jb25zdCBkZWZhdWx0UmVjb3Jkc0l0ZW0gPSB7IGZha2U6IHRydWUgfSBhcyBhbnlcclxuY29uc3QgTUVTU0FHRVMgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0TWVzc2FnZXMsIGppbXVVSURlZmF1bHRNZXNzYWdlcylcclxuLy8gY29uc3Qgb3ZlclNwZWVkID0gMS41O1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBzZWxlY3Rpb25Jc1NlbGY6IGJvb2xlYW5cclxuICBzZWxlY3Rpb25Jc0luU2VsZjogYm9vbGVhblxyXG4gIHNlbGVjdGlvblN0YXR1czogU3RhdHVzXHJcbiAgYXBwTW9kZTogQXBwTW9kZVxyXG4gIGJyb3dzZXJTaXplTW9kZTogQnJvd3NlclNpemVNb2RlXHJcbiAgYnVpbGRlclN0YXR1czogU3RhdHVzXHJcbiAgaXNSVEw6IGJvb2xlYW5cclxuICBzdWJMYXlvdXRUeXBlOiBMYXlvdXRUeXBlXHJcbiAgbGVmdDogbnVtYmVyIHwgc3RyaW5nXHJcbiAgdG9wOiBudW1iZXIgfCBzdHJpbmdcclxuICBpc1dpZHRoQXV0bzogYm9vbGVhblxyXG4gIGlzSGVpZ2h0QXV0bzogYm9vbGVhblxyXG4gIHNob3dMb2FkaW5nOiBib29sZWFuXHJcbiAgcXVlcnlPYmplY3Q6IElNVXJsUGFyYW1ldGVyc1xyXG4gIGJvdW5kaW5nQm94OiBCb3VuZGluZ0JveFxyXG4gIGhlaWdodExheW91dEl0ZW1TaXplTW9kZXM6IExheW91dEl0ZW1TaXplTW9kZXNcclxuICBwYXJlbnRTaXplOiBFbGVtZW50U2l6ZVxyXG59XHJcbmludGVyZmFjZSBCb2R5U2l6ZSB7XHJcbiAgc2Nyb2xsV2lkdGg6IG51bWJlclxyXG4gIHNjcm9sbEhlaWdodDogbnVtYmVyXHJcbiAgY2xpZW50V2lkdGg6IG51bWJlclxyXG4gIGNsaWVudEhlaWdodDogbnVtYmVyXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIExpc3RQcm9wcyA9IEFsbFdpZGdldFByb3BzPElNQ29uZmlnPiAmIFByb3BzXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIExpc3RTdGF0ZXMge1xyXG4gIExheW91dEVudHJ5OiBhbnlcclxuICBwYWdlOiBudW1iZXJcclxuICBzb3J0T3B0aW9uTmFtZT86IHN0cmluZ1xyXG4gIHNlYXJjaFRleHQ6IHN0cmluZ1xyXG4gIGN1cnJlbnRGaWx0ZXI6IElNU3FsRXhwcmVzc2lvblxyXG4gIGZpbHRlckFwcGxpZWQ6IGJvb2xlYW5cclxuICBjdXJyZW50Q2FyZFNpemU6IEVsZW1lbnRTaXplXHJcbiAgZm9yY2VTaG93TWFzazogYm9vbGVhblxyXG4gIHNob3dMaXN0OiBib29sZWFuXHJcbiAgc2hvd1NlbGVjdGlvbk9ubHk6IGJvb2xlYW5cclxuICB3aWRnZXRSZWN0OiB7XHJcbiAgICB3aWR0aDogbnVtYmVyXHJcbiAgICBoZWlnaHQ6IG51bWJlclxyXG4gIH1cclxuICBoaWRlQ2FyZFRvb2w6IGJvb2xlYW5cclxuICBzY3JvbGxTdGF0dXM6ICdzdGFydCcgfCAnZW5kJyB8ICdtaWQnXHJcbiAgZGF0YXNvdXJjZTogRGF0YVNvdXJjZVxyXG4gIGhvdmVySW5kZXg6IG51bWJlclxyXG4gIGlzU2Nyb2xsaW5nOiBib29sZWFuXHJcbiAgaXNTY3JvbGxTcGVlZE92ZXI6IGJvb2xlYW5cclxuICBpc1Jlc2l6aW5nQ2FyZDogYm9vbGVhblxyXG4gIHNlYXJjaFN1Z2dlc3Rpb246IFN1Z2dlc3Rpb25bXVxyXG4gIGlzU2VhcmNoQm94VmlzaWJsZTogYm9vbGVhblxyXG4gIGlzT3BlblRvcFRvb2xzUG9wcGVyOiBib29sZWFuXHJcbiAgbGF0ZXN0VXBkYXRlVGltZTogbnVtYmVyXHJcbiAgYXV0b1JlZnJlc2hMb2FkaW5nU3RyaW5nOiBzdHJpbmdcclxuICBzaG93TG9hZGluZzogYm9vbGVhblxyXG4gIGxpc3REaXZTaXplOiBMaXN0RGl2U2l6ZVxyXG4gIHRvb2xzRGl2V2lkdGg6IG51bWJlclxyXG4gIGxpc3REaXZCb3VuZFJlY3Q6IERPTVJlY3RcclxuICBpc1Njcm9sbEVuZDogYm9vbGVhblxyXG4gIGlzTW91bnQ6IGJvb2xlYW5cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFdpZGdldCBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8TGlzdFByb3BzLCBMaXN0U3RhdGVzPiB7XHJcbiAgc3RhdGljIHZlcnNpb25NYW5hZ2VyID0gdmVyc2lvbk1hbmFnZXJcclxuICBsYXN0U2VsZWN0ZWRJbmRleDogbnVtYmVyXHJcbiAgaXNNeVNlbGVjdGVkOiBib29sZWFuXHJcbiAgbGFzdFNlbGVjdGVkUmVjb3JkSWRzOiBzdHJpbmdbXVxyXG4gIGxpc3RSZWY6IGFueVxyXG4gIGxpc3RPdXREaXZSZWY6IEhUTUxEaXZFbGVtZW50XHJcbiAgcGFnaW5hdG9yRGl2OiBSZWFjdC5SZWZPYmplY3Q8SFRNTERpdkVsZW1lbnQ+XHJcbiAgbGlzdFRvcFJpZ2h0VG9vbHNEaXY6IFJlYWN0LlJlZk9iamVjdDxIVE1MRGl2RWxlbWVudD5cclxuICByZWNvcmRzOiBhbnlbXVxyXG4gIHF1ZXJ5U3RhdHVzOiBEYXRhU291cmNlU3RhdHVzXHJcbiAgdG90YWxDb3VudDogbnVtYmVyXHJcbiAgbGFzdFF1ZXJ5U3RhcnQ6IG51bWJlclxyXG4gIGlzU3dpdGNoUGFnZTogYm9vbGVhblxyXG4gIG5lZWRTY3JvbGw6IGJvb2xlYW5cclxuICBsYXN0UGFnZVNpemU6IG51bWJlclxyXG4gIG5lZWRSZWZyZXNoTGlzdE9uTGlzdFJlbmRlcmVkOiBib29sZWFuXHJcbiAgbGlzdFZpc2libGVTdGFydEluZGV4OiBudW1iZXJcclxuICBsaXN0VmlzaWJsZVN0b3BJbmRleDogbnVtYmVyXHJcbiAgaW5uZXJFbGVtZW50VHlwZTogUmVhY3QuRWxlbWVudFR5cGVcclxuICBsYXN0U3BhY2U6IG51bWJlclxyXG4gIGxhc3RRdWVyeTogYW55XHJcbiAgc3VnZ2VzdGlvbnNRdWVyeVRpbWVvdXQ6IGFueVxyXG4gIHJlZmVyZW5jZTogSFRNTERpdkVsZW1lbnRcclxuICBzaG93UG9wcGVyVGltZU91dDogYW55XHJcbiAgaXNGaXJzdExvYWQ6IGJvb2xlYW4gPSB0cnVlXHJcbiAgYXV0b1JlZnJlc2hMb2FkaW5nVGltZTogYW55XHJcbiAgcmVzZXRBdXRvUmVmcmVzaFRpbWU6IGFueVxyXG4gIHNldFBhZ2VUaW1lb3V0OiBhbnlcclxuICBvbkl0ZW1zUmVuZGVyZWRUaW1lb3V0OiBhbnlcclxuICBpc0hhc1Njcm9sbGVkOiBib29sZWFuID0gZmFsc2UgLyogV2hldGhlciB0aGUgTGlzdCBoYXMgc2Nyb2xsZWQgKi9cclxuICBkZWJvdW5jZU9uUmVzaXplOiAod2lkdGgsIGhlaWdodCkgPT4gdm9pZFxyXG4gIGRlYm91bmNlUmVzZXRBZnRlckluZGljZXM6ICgpID0+IHZvaWRcclxuICBib2R5U2l6ZTogQm9keVNpemVcclxuICBpc0hhc1JlbmRlckxpc3Q6IGJvb2xlYW4gPSBmYWxzZVxyXG4gIGlzSGFzUHVibGlzaE1lc3NhZ2VBY3Rpb246IGJvb2xlYW4gPSBmYWxzZVxyXG4gIHBhZ2VTaXplOiBudW1iZXJcclxuICBpc1NldGxheW91dDogYm9vbGVhbiA9IGZhbHNlXHJcblxyXG4gIGlzSGFzSW5pdEN1cnJlbnRDYXJkU2l6ZTogYm9vbGVhbiA9IGZhbHNlXHJcblxyXG4gIHN0YXRpYyBtYXBFeHRyYVN0YXRlUHJvcHMgPSAoXHJcbiAgICBzdGF0ZTogSU1TdGF0ZSxcclxuICAgIHByb3BzOiBBbGxXaWRnZXRQcm9wczxJTUNvbmZpZz5cclxuICApOiBQcm9wcyA9PiB7XHJcbiAgICBjb25zdCBhcHBDb25maWcgPSBzdGF0ZSAmJiBzdGF0ZS5hcHBDb25maWdcclxuICAgIGNvbnN0IHsgbGF5b3V0cywgbGF5b3V0SWQsIGxheW91dEl0ZW1JZCwgYnVpbGRlclN1cHBvcnRNb2R1bGVzLCBpZCB9ID0gcHJvcHNcclxuICAgIGNvbnN0IGJyb3dzZXJTaXplTW9kZSA9IHN0YXRlICYmIHN0YXRlLmJyb3dzZXJTaXplTW9kZVxyXG4gICAgY29uc3QgYnVpbGRlclN0YXR1cyA9XHJcbiAgICAgIChzdGF0ZSAmJlxyXG4gICAgICAgIHN0YXRlLndpZGdldHNTdGF0ZSAmJlxyXG4gICAgICAgIHN0YXRlLndpZGdldHNTdGF0ZVtwcm9wcy5pZF0gJiZcclxuICAgICAgICBzdGF0ZS53aWRnZXRzU3RhdGVbcHJvcHMuaWRdLmJ1aWxkZXJTdGF0dXMpIHx8XHJcbiAgICAgIFN0YXR1cy5SZWd1bGFyXHJcbiAgICBsZXQgc3ViTGF5b3V0VHlwZVxyXG4gICAgaWYgKGFwcENvbmZpZykge1xyXG4gICAgICBjb25zdCBzdWJMYXlvdXQgPVxyXG4gICAgICAgIGFwcENvbmZpZyAmJlxyXG4gICAgICAgIHN0YXRlLmFwcENvbmZpZy5sYXlvdXRzICYmXHJcbiAgICAgICAgc3RhdGUuYXBwQ29uZmlnLmxheW91dHNbXHJcbiAgICAgICAgICBzZWFyY2hVdGlscy5maW5kTGF5b3V0SWQoXHJcbiAgICAgICAgICAgIGxheW91dHNbYnVpbGRlclN0YXR1c10sXHJcbiAgICAgICAgICAgIGJyb3dzZXJTaXplTW9kZSxcclxuICAgICAgICAgICAgYXBwQ29uZmlnLm1haW5TaXplTW9kZVxyXG4gICAgICAgICAgKVxyXG4gICAgICAgIF1cclxuICAgICAgc3ViTGF5b3V0VHlwZSA9IHN1YkxheW91dCAmJiBzdWJMYXlvdXQudHlwZVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGxheW91dCA9IGFwcENvbmZpZy5sYXlvdXRzPy5bbGF5b3V0SWRdXHJcbiAgICBjb25zdCBsYXlvdXRTZXR0aW5nID0gbGF5b3V0Py5jb250ZW50Py5bbGF5b3V0SXRlbUlkXT8uc2V0dGluZ1xyXG4gICAgY29uc3QgaXNIZWlnaHRBdXRvID1cclxuICAgICAgbGF5b3V0U2V0dGluZz8uYXV0b1Byb3BzPy5oZWlnaHQgPT09IExheW91dEl0ZW1TaXplTW9kZXMuQXV0byB8fFxyXG4gICAgICBsYXlvdXRTZXR0aW5nPy5hdXRvUHJvcHM/LmhlaWdodCA9PT0gdHJ1ZVxyXG4gICAgY29uc3QgaXNXaWR0aEF1dG8gPVxyXG4gICAgICBsYXlvdXRTZXR0aW5nPy5hdXRvUHJvcHM/LndpZHRoID09PSBMYXlvdXRJdGVtU2l6ZU1vZGVzLkF1dG8gfHxcclxuICAgICAgbGF5b3V0U2V0dGluZz8uYXV0b1Byb3BzPy53aWR0aCA9PT0gdHJ1ZVxyXG5cclxuICAgIGxldCB3aWRnZXRQb3NpdGlvblxyXG4gICAgaWYgKHdpbmRvdy5qaW11Q29uZmlnLmlzSW5CdWlsZGVyKSB7XHJcbiAgICAgIGNvbnN0IGJib3ggPSBhcHBDb25maWcubGF5b3V0cz8uW2xheW91dElkXT8uY29udGVudD8uW2xheW91dEl0ZW1JZF0/LmJib3hcclxuICAgICAgd2lkZ2V0UG9zaXRpb24gPSBiYm94ICYmIHtcclxuICAgICAgICBsZWZ0OiBiYm94LmxlZnQsXHJcbiAgICAgICAgdG9wOiBiYm94LnRvcFxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc2VsZWN0aW9uID1cclxuICAgICAgc3RhdGUgJiYgc3RhdGUuYXBwUnVudGltZUluZm8gJiYgc3RhdGUuYXBwUnVudGltZUluZm8uc2VsZWN0aW9uXHJcbiAgICBjb25zdCBzZWxlY3Rpb25Jc0luU2VsZiA9XHJcbiAgICAgIHNlbGVjdGlvbiAmJlxyXG4gICAgICBidWlsZGVyU3VwcG9ydE1vZHVsZXMgJiZcclxuICAgICAgYnVpbGRlclN1cHBvcnRNb2R1bGVzLndpZGdldE1vZHVsZXMgJiZcclxuICAgICAgYnVpbGRlclN1cHBvcnRNb2R1bGVzLndpZGdldE1vZHVsZXMuc2VsZWN0aW9uSW5MaXN0KFxyXG4gICAgICAgIHNlbGVjdGlvbixcclxuICAgICAgICBpZCxcclxuICAgICAgICBhcHBDb25maWcsXHJcbiAgICAgICAgZmFsc2VcclxuICAgICAgKVxyXG4gICAgbGV0IHNlbGVjdGlvblN0YXR1c1xyXG4gICAgaWYgKHNlbGVjdGlvbklzSW5TZWxmKSB7XHJcbiAgICAgIHNlbGVjdGlvblN0YXR1cyA9IE9iamVjdC5rZXlzKGxheW91dHMpLmZpbmQoXHJcbiAgICAgICAgc3RhdHVzID0+XHJcbiAgICAgICAgICBzZWFyY2hVdGlscy5maW5kTGF5b3V0SWQoXHJcbiAgICAgICAgICAgIGxheW91dHNbc3RhdHVzXSxcclxuICAgICAgICAgICAgYnJvd3NlclNpemVNb2RlLFxyXG4gICAgICAgICAgICBhcHBDb25maWcubWFpblNpemVNb2RlXHJcbiAgICAgICAgICApID09PSBzZWxlY3Rpb24ubGF5b3V0SWRcclxuICAgICAgKVxyXG4gICAgfVxyXG4gICAgY29uc3Qgc2VsZWN0aW9uSXNTZWxmID0gISEoXHJcbiAgICAgIHNlbGVjdGlvbiAmJlxyXG4gICAgICBzZWxlY3Rpb24ubGF5b3V0SWQgPT09IGxheW91dElkICYmXHJcbiAgICAgIHNlbGVjdGlvbi5sYXlvdXRJdGVtSWQgPT09IGxheW91dEl0ZW1JZFxyXG4gICAgKVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc2VsZWN0aW9uSXNTZWxmOiBzZWxlY3Rpb25Jc1NlbGYsXHJcbiAgICAgIHNlbGVjdGlvbklzSW5TZWxmOiAhIXNlbGVjdGlvbklzSW5TZWxmLFxyXG4gICAgICBzZWxlY3Rpb25TdGF0dXMsXHJcbiAgICAgIGFwcE1vZGU6IHN0YXRlPy5hcHBSdW50aW1lSW5mbz8uYXBwTW9kZSxcclxuICAgICAgYnJvd3NlclNpemVNb2RlOiBzdGF0ZSAmJiBzdGF0ZS5icm93c2VyU2l6ZU1vZGUsXHJcbiAgICAgIGJ1aWxkZXJTdGF0dXM6XHJcbiAgICAgICAgKHN0YXRlICYmXHJcbiAgICAgICAgICBzdGF0ZS53aWRnZXRzU3RhdGUgJiZcclxuICAgICAgICAgIHN0YXRlLndpZGdldHNTdGF0ZVtwcm9wcy5pZF0gJiZcclxuICAgICAgICAgIHN0YXRlLndpZGdldHNTdGF0ZVtwcm9wcy5pZF0uYnVpbGRlclN0YXR1cykgfHxcclxuICAgICAgICBTdGF0dXMuUmVndWxhcixcclxuICAgICAgc2hvd0xvYWRpbmc6IHN0YXRlPy53aWRnZXRzU3RhdGU/Lltwcm9wcy5pZF0/LnNob3dMb2FkaW5nLFxyXG4gICAgICBpc1JUTDogc3RhdGUgJiYgc3RhdGUuYXBwQ29udGV4dCAmJiBzdGF0ZS5hcHBDb250ZXh0LmlzUlRMLFxyXG4gICAgICBzdWJMYXlvdXRUeXBlLFxyXG4gICAgICBsZWZ0OiB3aWRnZXRQb3NpdGlvbiAmJiB3aWRnZXRQb3NpdGlvbi5sZWZ0LFxyXG4gICAgICB0b3A6IHdpZGdldFBvc2l0aW9uICYmIHdpZGdldFBvc2l0aW9uLnRvcCxcclxuICAgICAgaXNIZWlnaHRBdXRvLFxyXG4gICAgICBpc1dpZHRoQXV0byxcclxuICAgICAgcXVlcnlPYmplY3Q6IHN0YXRlLnF1ZXJ5T2JqZWN0LFxyXG4gICAgICBib3VuZGluZ0JveDogbGF5b3V0Py5jb250ZW50Py5bbGF5b3V0SXRlbUlkXT8uYmJveCxcclxuICAgICAgaGVpZ2h0TGF5b3V0SXRlbVNpemVNb2RlczogbGF5b3V0U2V0dGluZz8uYXV0b1Byb3BzPy5oZWlnaHQsXHJcbiAgICAgIHBhcmVudFNpemU6IHN0YXRlLndpZGdldHNTdGF0ZVtwcm9wcy5pZF0/LnBhcmVudFNpemUgfHwgbnVsbFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcylcclxuICAgIGNvbnN0IHsgY29uZmlnIH0gPSBwcm9wc1xyXG4gICAgdGhpcy5wYWdpbmF0b3JEaXYgPSBSZWFjdC5jcmVhdGVSZWY8SFRNTERpdkVsZW1lbnQ+KClcclxuICAgIHRoaXMubGlzdFRvcFJpZ2h0VG9vbHNEaXYgPSBSZWFjdC5jcmVhdGVSZWY8SFRNTERpdkVsZW1lbnQ+KClcclxuICAgIGNvbnN0IHN0YXRlT2JqOiBMaXN0U3RhdGVzID0ge1xyXG4gICAgICBMYXlvdXRFbnRyeTogbnVsbCxcclxuICAgICAgcGFnZTogMSxcclxuICAgICAgc29ydE9wdGlvbk5hbWU6XHJcbiAgICAgICAgY29uZmlnLnNvcnRzICYmIGNvbmZpZy5zb3J0c1swXSAmJiBjb25maWcuc29ydHNbMF0ucnVsZU9wdGlvbk5hbWUsXHJcbiAgICAgIGN1cnJlbnRDYXJkU2l6ZTogbGlzdFV0aWxzLmdldENhcmRTaXplTnVtYmVySW5Db25maWcocHJvcHMsIGxpc3RVdGlscy5nZXREZWZhdWx0TWluTGlzdFNpemUocHJvcHMpKSxcclxuICAgICAgZm9yY2VTaG93TWFzazogZmFsc2UsXHJcbiAgICAgIHdpZGdldFJlY3Q6IGxpc3RVdGlscy5nZXREZWZhdWx0TWluTGlzdFNpemUocHJvcHMpLFxyXG4gICAgICBzaG93TGlzdDogdHJ1ZSxcclxuICAgICAgc2VhcmNoVGV4dDogJycsXHJcbiAgICAgIGN1cnJlbnRGaWx0ZXI6IHVuZGVmaW5lZCxcclxuICAgICAgZmlsdGVyQXBwbGllZDogZmFsc2UsXHJcbiAgICAgIHNob3dTZWxlY3Rpb25Pbmx5OiBmYWxzZSxcclxuICAgICAgaGlkZUNhcmRUb29sOiBmYWxzZSxcclxuICAgICAgc2Nyb2xsU3RhdHVzOiAnc3RhcnQnLFxyXG4gICAgICBkYXRhc291cmNlOiB1bmRlZmluZWQsXHJcbiAgICAgIGhvdmVySW5kZXg6IC0xLFxyXG4gICAgICBpc1Njcm9sbGluZzogZmFsc2UsXHJcbiAgICAgIGlzU2Nyb2xsU3BlZWRPdmVyOiBmYWxzZSxcclxuICAgICAgaXNSZXNpemluZ0NhcmQ6IGZhbHNlLFxyXG4gICAgICBzZWFyY2hTdWdnZXN0aW9uOiBbXSxcclxuICAgICAgaXNTZWFyY2hCb3hWaXNpYmxlOiBmYWxzZSxcclxuICAgICAgaXNPcGVuVG9wVG9vbHNQb3BwZXI6IGZhbHNlLFxyXG4gICAgICBsYXRlc3RVcGRhdGVUaW1lOiAwLFxyXG4gICAgICBzaG93TG9hZGluZzogZmFsc2UsXHJcbiAgICAgIGF1dG9SZWZyZXNoTG9hZGluZ1N0cmluZzogJycsXHJcbiAgICAgIGxpc3REaXZTaXplOiB7XHJcbiAgICAgICAgY2xpZW50V2lkdGg6IG51bGwsXHJcbiAgICAgICAgY2xpZW50SGVpZ2h0OiBudWxsXHJcbiAgICAgIH0sXHJcbiAgICAgIHRvb2xzRGl2V2lkdGg6IG51bGwsXHJcbiAgICAgIGxpc3REaXZCb3VuZFJlY3Q6IG51bGwsXHJcbiAgICAgIGlzU2Nyb2xsRW5kOiBmYWxzZSxcclxuICAgICAgaXNNb3VudDogZmFsc2VcclxuICAgIH1cclxuICAgIHRoaXMuc2VsZWN0U2VsZiA9IHRoaXMuc2VsZWN0U2VsZi5iaW5kKHRoaXMpXHJcbiAgICB0aGlzLmhhbmRsZVJlc2l6ZUNhcmQgPSB0aGlzLmhhbmRsZVJlc2l6ZUNhcmQuYmluZCh0aGlzKVxyXG4gICAgdGhpcy5saXN0UmVmID0gUmVhY3QuY3JlYXRlUmVmKClcclxuXHJcbiAgICBpZiAod2luZG93LmppbXVDb25maWcuaXNJbkJ1aWxkZXIpIHtcclxuICAgICAgc3RhdGVPYmouTGF5b3V0RW50cnkgPSB0aGlzLnByb3BzLmJ1aWxkZXJTdXBwb3J0TW9kdWxlcy5MYXlvdXRFbnRyeVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc3RhdGVPYmouTGF5b3V0RW50cnkgPSBMYXlvdXRFbnRyeVxyXG4gICAgfVxyXG4gICAgdGhpcy5zdGF0ZSA9IHN0YXRlT2JqXHJcblxyXG4gICAgdGhpcy5vblJlc2l6ZSA9IHRoaXMub25SZXNpemUuYmluZCh0aGlzKVxyXG4gICAgdGhpcy5jaGFuZ2VJc1Jlc2l6aW5nQ2FyZCA9IHRoaXMuY2hhbmdlSXNSZXNpemluZ0NhcmQuYmluZCh0aGlzKVxyXG4gICAgdGhpcy5zZXRSZWZyZXNoTG9hZGluZ1N0cmluZyA9IHRoaXMuc2V0UmVmcmVzaExvYWRpbmdTdHJpbmcuYmluZCh0aGlzKVxyXG4gICAgdGhpcy5yZXNldEF1dG9SZWZyZXNoVGltZXMgPSB0aGlzLnJlc2V0QXV0b1JlZnJlc2hUaW1lcy5iaW5kKHRoaXMpXHJcbiAgICB0aGlzLmRlYm91bmNlT25SZXNpemUgPSBsb2Rhc2guZGVib3VuY2UoXHJcbiAgICAgICh3aWR0aCwgaGVpZ2h0KSA9PiB0aGlzLm9uUmVzaXplKHdpZHRoLCBoZWlnaHQpLFxyXG4gICAgICAyMDBcclxuICAgIClcclxuICAgIHRoaXMuZGVib3VuY2VSZXNldEFmdGVySW5kaWNlcyA9IGxvZGFzaC5kZWJvdW5jZShcclxuICAgICAgKCkgPT4gdGhpcy5yZXNldEFmdGVySW5kaWNlcygpLFxyXG4gICAgICAyMDBcclxuICAgIClcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudERpZE1vdW50ICgpIHtcclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICBpc01vdW50OiB0cnVlXHJcbiAgICB9KVxyXG4gICAgdGhpcy5nZXRCb2R5U2l6ZSgpXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5nZXRCb2R5U2l6ZSlcclxuICAgIC8vIGNvbnN0IHtvdXRwdXREYXRhU291cmNlcywgdXNlRGF0YVNvdXJjZXN9ID0gdGhpcy5wcm9wc1xyXG5cclxuICAgIC8vIGlmKHRoaXMucmVjb3JkcyAhPSBkZWZhdWx0UmVjb3Jkcyl7XHJcbiAgICAvLyAgIGxpc3RVdGlscy5jcmVhdGVPdXRwdXREcyh0aGlzLnJlY29yZHMsIG91dHB1dERhdGFTb3VyY2VzPy5bMF0sIHVzZURhdGFTb3VyY2VzPy5bMF0pO1xyXG4gICAgLy8gfVxyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50V2lsbFVubW91bnQgKCkge1xyXG4gICAgY2xlYXJUaW1lb3V0KHRoaXMucmVzaXplVGltZW91dClcclxuICAgIGNsZWFyVGltZW91dCh0aGlzLnVwZGF0ZUNhcmRUb29sVGltZW91dClcclxuICAgIGNsZWFyVGltZW91dCh0aGlzLm1vdXNlQ2xpY2tUaW1lb3V0KVxyXG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuc3VnZ2VzdGlvbnNRdWVyeVRpbWVvdXQpXHJcbiAgICBjbGVhclRpbWVvdXQodGhpcy5zaG93UG9wcGVyVGltZU91dClcclxuICAgIGNsZWFyVGltZW91dCh0aGlzLnJlc2V0QXV0b1JlZnJlc2hUaW1lKVxyXG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuc2V0UGFnZVRpbWVvdXQpXHJcbiAgICBjbGVhclRpbWVvdXQodGhpcy5vbkl0ZW1zUmVuZGVyZWRUaW1lb3V0KVxyXG4gICAgY2xlYXJJbnRlcnZhbCh0aGlzLmF1dG9SZWZyZXNoTG9hZGluZ1RpbWUpXHJcbiAgfVxyXG5cclxuICB1cGRhdGVXaWRnZXRSZWN0VGltZW91dDogTm9kZUpTLlRpbWVyID0gdW5kZWZpbmVkXHJcbiAgY29tcG9uZW50RGlkVXBkYXRlIChwcmVQcm9wcywgcHJlU3RhdGUpIHtcclxuICAgIGNvbnN0IHsgY29uZmlnLCBhcHBNb2RlIH0gPSB0aGlzLnByb3BzXHJcbiAgICBjb25zdCB7IGRhdGFzb3VyY2UgfSA9IHRoaXMuc3RhdGVcclxuICAgIGlmICghd2luZG93LmppbXVDb25maWcuaXNJbkJ1aWxkZXIgfHwgYXBwTW9kZSA9PT0gQXBwTW9kZS5SdW4pIHtcclxuICAgICAgLy8gTGlzdGVuIHNlbGVjdGVkIHJlY29yZHMgY2hhbmdlIGZyb20gb3V0c2lkZVxyXG4gICAgICBpZiAoXHJcbiAgICAgICAgZGF0YXNvdXJjZSAmJlxyXG4gICAgICAgIGNvbmZpZy5jYXJkQ29uZmlnc1tTdGF0dXMuU2VsZWN0ZWRdLnNlbGVjdGlvbk1vZGUgIT09XHJcbiAgICAgICAgU2VsZWN0aW9uTW9kZVR5cGUuTm9uZVxyXG4gICAgICApIHtcclxuICAgICAgICB0aGlzLnNjcm9sbFRvU2VsZWN0ZWRJdGVtcyhkYXRhc291cmNlKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyB1cGRhZGUgbGlzdCBpbiBidWlsZGVyXHJcbiAgICB0aGlzLnVwZGF0ZUxpc3RJbkJ1aWxkZXIocHJlUHJvcHMsIHByZVN0YXRlKVxyXG5cclxuICAgIC8vIGxpc3RlbiBhcHBNb2RlIGNoYW5nZVxyXG4gICAgdGhpcy5hcHBNb2RlQ2hhbmdlKHByZVByb3BzKVxyXG5cclxuICAgIGlmIChwcmVQcm9wcz8uc2VsZWN0aW9uSXNJblNlbGYgIT09IHRoaXMucHJvcHM/LnNlbGVjdGlvbklzSW5TZWxmKSB7XHJcbiAgICAgIHRoaXMuc2V0U2VsZWN0aW9uU3RhdHVzKClcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNldExpc3RMYXlvdXRJbldpZGdldFN0YXRlKClcclxuICAgIHRoaXMuc2V0TGlzdFBhcmVudFNpemVJbldpZGdldFN0YXRlKClcclxuICAgIC8vIHVwZGF0ZSBvdXRwdXQgZHNcclxuICAgIC8vIGlmKHRoaXMucmVjb3JkcyAhPSBkZWZhdWx0UmVjb3Jkcyl7XHJcbiAgICAvLyAgIGxpc3RVdGlscy5jcmVhdGVPdXRwdXREcyh0aGlzLnJlY29yZHMsIG91dHB1dERhdGFTb3VyY2VzPy5bMF0sIHVzZURhdGFTb3VyY2VzPy5bMF0pO1xyXG4gICAgLy8gfVxyXG4gIH1cclxuXHJcbiAgcmVzZXRBZnRlckluZGljZXMgPSAoKSA9PiB7XHJcbiAgICB0aGlzLmxpc3RSZWY/LmN1cnJlbnQ/LnJlc2V0QWZ0ZXJJbmRpY2VzICYmIHRoaXMubGlzdFJlZj8uY3VycmVudD8ucmVzZXRBZnRlckluZGljZXMoe1xyXG4gICAgICBjb2x1bW5JbmRleDogMCxcclxuICAgICAgcm93SW5kZXg6IDAsXHJcbiAgICAgIHNob3VsZEZvcmNlVXBkYXRlOiBmYWxzZVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIHNldExpc3RMYXlvdXRJbldpZGdldFN0YXRlID0gKCkgPT4ge1xyXG4gICAgY29uc3QgeyBsYXlvdXRJZCwgbGF5b3V0SXRlbUlkLCBpZCwgc2VsZWN0aW9uSXNTZWxmIH0gPSB0aGlzLnByb3BzXHJcbiAgICBpZiAobGF5b3V0SWQgJiYgaWQgJiYgbGF5b3V0SXRlbUlkICYmICF0aGlzLmlzU2V0bGF5b3V0ICYmIHNlbGVjdGlvbklzU2VsZikge1xyXG4gICAgICB0aGlzLnByb3BzLmRpc3BhdGNoKFxyXG4gICAgICAgIGFwcEFjdGlvbnMud2lkZ2V0U3RhdGVQcm9wQ2hhbmdlKGlkLCAnbGF5b3V0SW5mbycsIHtcclxuICAgICAgICAgIGxheW91dElkLFxyXG4gICAgICAgICAgbGF5b3V0SXRlbUlkXHJcbiAgICAgICAgfSlcclxuICAgICAgKVxyXG4gICAgICB0aGlzLmlzU2V0bGF5b3V0ID0gdHJ1ZVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0TGlzdFBhcmVudFNpemVJbldpZGdldFN0YXRlID0gKCkgPT4ge1xyXG4gICAgY29uc3QgeyBicm93c2VyU2l6ZU1vZGUsIGlkLCBwYXJlbnRTaXplLCBsYXlvdXRJZCB9ID0gdGhpcy5wcm9wc1xyXG4gICAgY29uc3QgYXBwQ29uZmlnID0gZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpLmFwcENvbmZpZ1xyXG4gICAgY29uc3Qgdmlld3BvcnRTaXplID0gdXRpbHMuZmluZFZpZXdwb3J0U2l6ZShhcHBDb25maWcsIGJyb3dzZXJTaXplTW9kZSlcclxuXHJcbiAgICBjb25zdCBzZWxlY3RvciA9IGBkaXYubGF5b3V0W2RhdGEtbGF5b3V0aWQ9JHtsYXlvdXRJZH1dYFxyXG4gICAgY29uc3QgcGFyZW50RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpXHJcbiAgICBjb25zdCBuZXdQYXJlbnRTaXplID0ge1xyXG4gICAgICB3aWR0aDogcGFyZW50RWxlbWVudD8uY2xpZW50V2lkdGggfHwgdmlld3BvcnRTaXplLndpZHRoLFxyXG4gICAgICBoZWlnaHQ6IHBhcmVudEVsZW1lbnQ/LmNsaWVudEhlaWdodCB8fCB2aWV3cG9ydFNpemUuaGVpZ2h0XHJcbiAgICB9XHJcbiAgICBpZiAoIXBhcmVudFNpemUgfHwgcGFyZW50U2l6ZS5oZWlnaHQgIT09IG5ld1BhcmVudFNpemUuaGVpZ2h0IHx8IHBhcmVudFNpemUud2lkdGggIT09IG5ld1BhcmVudFNpemUud2lkdGgpIHtcclxuICAgICAgdGhpcy5wcm9wcy5kaXNwYXRjaChhcHBBY3Rpb25zLndpZGdldFN0YXRlUHJvcENoYW5nZShpZCwgJ3BhcmVudFNpemUnLCBuZXdQYXJlbnRTaXplKSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldEJvZHlTaXplID0gKCkgPT4ge1xyXG4gICAgdGhpcy5ib2R5U2l6ZSA9IHtcclxuICAgICAgc2Nyb2xsV2lkdGg6IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxXaWR0aCxcclxuICAgICAgc2Nyb2xsSGVpZ2h0OiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0LFxyXG4gICAgICBjbGllbnRXaWR0aDogZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoLFxyXG4gICAgICBjbGllbnRIZWlnaHQ6IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHRcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHVwZGF0ZUxpc3RJbkJ1aWxkZXIgPSAocHJlUHJvcHMsIHByZVN0YXRlKSA9PiB7XHJcbiAgICBjb25zdCB7IGNvbmZpZyB9ID0gdGhpcy5wcm9wc1xyXG4gICAgaWYgKCF3aW5kb3cuamltdUNvbmZpZy5pc0luQnVpbGRlcikge1xyXG4gICAgICByZXR1cm4gZmFsc2VcclxuICAgIH1cclxuICAgIGNvbnN0IGN1cnJlbnRDYXJkU2l6ZSA9IGxpc3RVdGlscy5nZXRDYXJkU2l6ZU51bWJlckluQ29uZmlnKHRoaXMucHJvcHMsIHRoaXMuc3RhdGU/LndpZGdldFJlY3QpXHJcblxyXG4gICAgLy8gbGlzdGVuIGxheW91dCBwcm9wZXJ0aWVzIGNoYW5nZSBhbmQgdGhlbiB1cGRhdGUgbGlzdFxyXG4gICAgbGV0IGhpZGVDYXJkVG9vbCA9IHRoaXMubGF5b3V0UHJvcGVydGllc0NoYW5nZShwcmVQcm9wcywgcHJlU3RhdGUpXHJcblxyXG4gICAgdGhpcy51cGRhdGVTY3JvbGxDb250ZW50U2l6ZShwcmVQcm9wcy5jb25maWcpXHJcblxyXG4gICAgLy8gbGlzdGVuIHBhZ2luZyB0eXBlIGNoYW5nZVxyXG4gICAgdGhpcy5wYWdlVHlwZUNoYW5nZShwcmVQcm9wcylcclxuXHJcbiAgICAvLyBsaXN0ZW4gdXNlRGF0YXNvdXJjZXMgY2hhbmdlXHJcbiAgICB0aGlzLnVzZURhdGFzb3VyY2VzQ2hhbmdlKHByZVByb3BzKVxyXG5cclxuICAgIC8vIGxpc3RlbmluZyBsaXN0RGl2IHNpemUncyBjaGFuZ2VcclxuICAgIGhpZGVDYXJkVG9vbCA9IHRoaXMubGlzdERpdlNpemVDaGFuZ2UoXHJcbiAgICAgIHByZVByb3BzLFxyXG4gICAgICBwcmVTdGF0ZSxcclxuICAgICAgY3VycmVudENhcmRTaXplLFxyXG4gICAgICBoaWRlQ2FyZFRvb2xcclxuICAgIClcclxuXHJcbiAgICBpZiAoaGlkZUNhcmRUb29sKSB7XHJcbiAgICAgIHRoaXMudXBkYXRlQ2FyZFRvb2xQb3NpdGlvbigpXHJcbiAgICB9XHJcblxyXG4gICAgLy8gbGlzdGVuIHNvcnQgY2hhbmdlXHJcbiAgICB0aGlzLmxpc3RTb3J0Q2hhbmdlKHByZVByb3BzKVxyXG5cclxuICAgIC8vIGxpc3RlbiBmaWx0ZXIgY2hhbmdlXHJcbiAgICB0aGlzLmxpc3RGaWx0ZXJDaGFuZ2UocHJlUHJvcHMpXHJcblxyXG4gICAgY29uc3QgaXNTZWxlY3Rpb25Nb2RlQ2hhbmdlID1cclxuICAgICAgY29uZmlnLmNhcmRDb25maWdzW1N0YXR1cy5TZWxlY3RlZF0uc2VsZWN0aW9uTW9kZSAhPT1cclxuICAgICAgcHJlUHJvcHMuY29uZmlnLmNhcmRDb25maWdzW1N0YXR1cy5TZWxlY3RlZF0uc2VsZWN0aW9uTW9kZVxyXG4gICAgaWYgKGlzU2VsZWN0aW9uTW9kZUNoYW5nZSkge1xyXG4gICAgICB0aGlzLnNlbGVjdFJlY29yZHMoW10pXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBsYXlvdXRQcm9wZXJ0aWVzQ2hhbmdlID0gKHByZVByb3BzLCBwcmVTdGF0ZSk6IGJvb2xlYW4gPT4ge1xyXG4gICAgY29uc3QgeyBjb25maWcsIHRvcCwgbGVmdCB9ID0gdGhpcy5wcm9wc1xyXG4gICAgbGV0IGhpZGVDYXJkVG9vbCA9IGZhbHNlXHJcbiAgICBpZiAoIXdpbmRvdy5qaW11Q29uZmlnLmlzSW5CdWlsZGVyKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG4gICAgbGV0IHJlZnJlc2hMaXN0OiBib29sZWFuID0gZmFsc2VcclxuICAgIC8vIGxpc3RlbiBsYXlvdXQgcHJvcGVydGllcyBjaGFuZ2UgYW5kIHRoZW4gdXBkYXRlIGxpc3RcclxuICAgIGNvbnN0IGN1cnJlbnRDYXJkU2l6ZSA9IGxpc3RVdGlscy5nZXRDYXJkU2l6ZU51bWJlckluQ29uZmlnKHRoaXMucHJvcHMsIHRoaXMuc3RhdGUud2lkZ2V0UmVjdClcclxuICAgIGNvbnN0IG9sZENhcmRTaXplID0gbGlzdFV0aWxzLmdldENhcmRTaXplTnVtYmVySW5Db25maWcocHJlUHJvcHMsIHByZVN0YXRlPy53aWRnZXRSZWN0KVxyXG5cclxuICAgIHRoaXMudXBkYXRlU2Nyb2xsQ29udGVudFNpemUocHJlUHJvcHMuY29uZmlnKVxyXG5cclxuICAgIGNvbnN0IGlzV2lkZ2V0UG9zaXRpb25DaGFuZ2UgPVxyXG4gICAgICB0b3AgIT09IHByZVByb3BzLnRvcCB8fCBsZWZ0ICE9PSBwcmVQcm9wcy5sZWZ0XHJcbiAgICBjb25zdCBpc0xpc3RMYXlvdXRDaGFuZ2UgPSBjb25maWc/LmxheW91dFR5cGUgIT09IHByZVByb3BzLmNvbmZpZy5sYXlvdXRUeXBlXHJcbiAgICBjb25zdCBpc0VxdWFsQ2FyZFNpemVCeUxpc3RMYXlvdXQgPSAhbGlzdFV0aWxzLmlzRXF1YWxDYXJkU2l6ZUJ5TGlzdExheW91dChcclxuICAgICAgb2xkQ2FyZFNpemUsXHJcbiAgICAgIGN1cnJlbnRDYXJkU2l6ZSxcclxuICAgICAgY29uZmlnLmxheW91dFR5cGVcclxuICAgICkgLy8gZm9yIGNoYW5nZSB0ZW1wbGF0ZVxyXG4gICAgaWYgKFxyXG4gICAgICBpc0xpc3RMYXlvdXRDaGFuZ2UgfHxcclxuICAgICAgaXNFcXVhbENhcmRTaXplQnlMaXN0TGF5b3V0IHx8XHJcbiAgICAgIGlzV2lkZ2V0UG9zaXRpb25DaGFuZ2VcclxuICAgICkge1xyXG4gICAgICBoaWRlQ2FyZFRvb2wgPSB0cnVlXHJcbiAgICAgIGlmIChpc0VxdWFsQ2FyZFNpemVCeUxpc3RMYXlvdXQpIHtcclxuICAgICAgICBjb25zdCBuZXdTdGF0ZSA9IHtcclxuICAgICAgICAgIGN1cnJlbnRDYXJkU2l6ZVxyXG4gICAgICAgIH1cclxuICAgICAgICByZWZyZXNoTGlzdCA9IHRydWVcclxuICAgICAgICB0aGlzLnNldFN0YXRlKG5ld1N0YXRlLCAoKSA9PiB7XHJcbiAgICAgICAgICBpZiAocmVmcmVzaExpc3QpIHRoaXMucmVmcmVzaExpc3QoKVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0gZWxzZSBpZiAoaXNMaXN0TGF5b3V0Q2hhbmdlKSB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVSZXNpemVDYXJkKFxyXG4gICAgICAgICAgdGhpcy5zdGF0ZS5jdXJyZW50Q2FyZFNpemUsXHJcbiAgICAgICAgICB0cnVlLFxyXG4gICAgICAgICAgZmFsc2UsXHJcbiAgICAgICAgICBmYWxzZSxcclxuICAgICAgICAgIHRydWVcclxuICAgICAgICApXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXJlZnJlc2hMaXN0KSB7XHJcbiAgICAgIGNvbnN0IGlzU3BhY2VOb3RDaGFuZ2UgPSBjb25maWc/LmxheW91dFR5cGUgPT09IExpc3RMYXlvdXRUeXBlLkdSSURcclxuICAgICAgICA/IGxpc3RVdGlscy5pc0VxdWFsTnVtYmVyKGNvbmZpZz8uaG9yaXpvbnRhbFNwYWNlLCBwcmVQcm9wcy5jb25maWc/Lmhvcml6b250YWxTcGFjZSkgJiYgbGlzdFV0aWxzLmlzRXF1YWxOdW1iZXIoY29uZmlnPy52ZXJ0aWNhbFNwYWNlLCBwcmVQcm9wcy5jb25maWc/LnZlcnRpY2FsU3BhY2UpXHJcbiAgICAgICAgOiBsaXN0VXRpbHMuaXNFcXVhbE51bWJlcihjb25maWcuc3BhY2UsIHByZVByb3BzLmNvbmZpZy5zcGFjZSlcclxuICAgICAgaWYgKCFpc1NwYWNlTm90Q2hhbmdlIHx8IGNvbmZpZy5sYXlvdXRUeXBlICE9PSBwcmVQcm9wcy5jb25maWcubGF5b3V0VHlwZSkge1xyXG4gICAgICAgIHJlZnJlc2hMaXN0ID0gdHJ1ZVxyXG4gICAgICAgIHRoaXMucmVmcmVzaExpc3QoKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaGlkZUNhcmRUb29sXHJcbiAgfVxyXG5cclxuICBsaXN0RGl2U2l6ZUNoYW5nZSA9IChcclxuICAgIHByZVByb3BzLFxyXG4gICAgcHJlU3RhdGUsXHJcbiAgICBjdXJyZW50Q2FyZFNpemU6IENhcmRTaXplLFxyXG4gICAgaGlkZUNhcmRUb29sOiBib29sZWFuXHJcbiAgKTogYm9vbGVhbiA9PiB7XHJcbiAgICBjb25zdCB7IGNvbmZpZywgaXNIZWlnaHRBdXRvIH0gPSB0aGlzLnByb3BzXHJcbiAgICBjb25zdCB7IGxpc3REaXZTaXplIH0gPSB0aGlzLnN0YXRlXHJcbiAgICBjb25zdCBzaG93QlQgPSBsaXN0VXRpbHMuc2hvd0JvdHRvbVRvb2xzKHRoaXMucHJvcHMsIHRoaXMuc3RhdGUpXHJcbiAgICBjb25zdCBvbGRTaG93QlQgPSBsaXN0VXRpbHMuc2hvd0JvdHRvbVRvb2xzKHByZVByb3BzLCBwcmVTdGF0ZSlcclxuICAgIGNvbnN0IHNob3dEUyA9IGxpc3RVdGlscy5zaG93VG9wVG9vbHModGhpcy5wcm9wcylcclxuICAgIGNvbnN0IG9sZFNob3dEUyA9IGxpc3RVdGlscy5zaG93VG9wVG9vbHMocHJlUHJvcHMpXHJcbiAgICBpZiAoc2hvd0JUICE9PSBvbGRTaG93QlQgfHwgc2hvd0RTICE9PSBvbGRTaG93RFMpIHtcclxuICAgICAgaWYgKCFpc0hlaWdodEF1dG8pIHtcclxuICAgICAgICBpZiAoY29uZmlnLmxheW91dFR5cGUgPT09IExpc3RMYXlvdXRUeXBlLkNvbHVtbikge1xyXG4gICAgICAgICAgbGV0IGNhcmRIID0gdGhpcy5zdGF0ZS53aWRnZXRSZWN0Py5oZWlnaHQgfHwgbGlzdERpdlNpemU/LmNsaWVudEhlaWdodFxyXG4gICAgICAgICAgY2FyZEggLT1cclxuICAgICAgICAgICAgbGlzdFV0aWxzLmdldEJvdHRvbVRvb2xIKHRoaXMucGFnaW5hdG9yRGl2LmN1cnJlbnQsIHNob3dCVCkgK1xyXG4gICAgICAgICAgICAoc2hvd0RTID8gMSA6IDApICogRFNfVE9PTF9IXHJcbiAgICAgICAgICBpZiAoY2FyZEggPCBMSVNUX0NBUkRfTUlOX1NJWkUpIHJldHVyblxyXG4gICAgICAgICAgY29uc3QgY2FyZFNpemUgPSB7XHJcbiAgICAgICAgICAgIGhlaWdodDogY2FyZEgsXHJcbiAgICAgICAgICAgIHdpZHRoOiBjdXJyZW50Q2FyZFNpemUud2lkdGhcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRoaXMuaGFuZGxlUmVzaXplQ2FyZChjYXJkU2l6ZSwgdHJ1ZSwgZmFsc2UsIGZhbHNlLCB0cnVlKVxyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBoaWRlQ2FyZFRvb2wgPSB0cnVlXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBoaWRlQ2FyZFRvb2xcclxuICB9XHJcblxyXG4gIGFwcE1vZGVDaGFuZ2UgPSBwcmVQcm9wcyA9PiB7XHJcbiAgICBjb25zdCB7XHJcbiAgICAgIGFwcE1vZGUsXHJcbiAgICAgIHNlbGVjdGlvbklzU2VsZixcclxuICAgICAgc2VsZWN0aW9uU3RhdHVzLFxyXG4gICAgICBidWlsZGVyU3RhdHVzXHJcbiAgICB9ID0gdGhpcy5wcm9wc1xyXG4gICAgaWYgKHByZVByb3BzLmFwcE1vZGUgIT09IGFwcE1vZGUpIHtcclxuICAgICAgaWYgKGFwcE1vZGUgPT09IEFwcE1vZGUuUnVuKSB7XHJcbiAgICAgICAgdGhpcy5lZGl0QnVpbGRlckFuZFNldHRpbmdTdGF0dXMoU3RhdHVzLlJlZ3VsYXIpXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKHNlbGVjdGlvblN0YXR1cyAhPT0gYnVpbGRlclN0YXR1cykge1xyXG4gICAgICAgICAgLy8gY2hhbmdlIHN0YXR1cyBieSB0b2NcclxuICAgICAgICAgIGlmICghc2VsZWN0aW9uU3RhdHVzKSB7XHJcbiAgICAgICAgICAgIGlmICghc2VsZWN0aW9uSXNTZWxmKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5lZGl0QnVpbGRlckFuZFNldHRpbmdTdGF0dXMoU3RhdHVzLlJlZ3VsYXIpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZWRpdEJ1aWxkZXJBbmRTZXR0aW5nU3RhdHVzKHNlbGVjdGlvblN0YXR1cylcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZShcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgc2hvd1NlbGVjdGlvbk9ubHk6IGZhbHNlLFxyXG4gICAgICAgICAgICBzZWFyY2hUZXh0OiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIGZpbHRlckFwcGxpZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICBob3ZlckluZGV4OiAtMVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zY3JvbGxUb0luZGV4KDApXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwYWdlVHlwZUNoYW5nZSA9IHByZVByb3BzID0+IHtcclxuICAgIGNvbnN0IHsgcGFnZVN0eWxlIH0gPSB0aGlzLnByb3BzLmNvbmZpZ1xyXG4gICAgY29uc3Qgb2xkUGFnZVN0eWxlID0gcHJlUHJvcHMuY29uZmlnLnBhZ2VTdHlsZVxyXG4gICAgaWYgKHBhZ2VTdHlsZSAhPT0gb2xkUGFnZVN0eWxlKSB7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgIHBhZ2U6IDFcclxuICAgICAgfSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHVzZURhdGFzb3VyY2VzQ2hhbmdlID0gcHJlUHJvcHMgPT4ge1xyXG4gICAgY29uc3QgeyB1c2VEYXRhU291cmNlcyB9ID0gdGhpcy5wcm9wc1xyXG4gICAgY29uc3Qgb2xkVXNlRGF0YVNvdXJjZXMgPSBwcmVQcm9wcy51c2VEYXRhU291cmNlc1xyXG4gICAgaWYgKHVzZURhdGFTb3VyY2VzICYmIHVzZURhdGFTb3VyY2VzWzBdKSB7XHJcbiAgICAgIGNvbnN0IG9sZFVzZURhdGFTb3VyY2UgPSBvbGRVc2VEYXRhU291cmNlcyAmJiBvbGRVc2VEYXRhU291cmNlc1swXVxyXG4gICAgICBpZiAoXHJcbiAgICAgICAgIW9sZFVzZURhdGFTb3VyY2UgfHxcclxuICAgICAgICBvbGRVc2VEYXRhU291cmNlLmRhdGFTb3VyY2VJZCAhPT0gdXNlRGF0YVNvdXJjZXNbMF0uZGF0YVNvdXJjZUlkXHJcbiAgICAgICkge1xyXG4gICAgICAgIC8vIHJlc2V0IHF1ZXJ5c1N0YXJ0XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICBwYWdlOiAxXHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gcmVtb3ZlIGRzIG1heWJlXHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgIGRhdGFzb3VyY2U6IHVuZGVmaW5lZFxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbGlzdFNvcnRDaGFuZ2UgPSBwcmVQcm9wcyA9PiB7XHJcbiAgICBjb25zdCB7IGNvbmZpZyB9ID0gdGhpcy5wcm9wc1xyXG4gICAgaWYgKGNvbmZpZy5zb3J0T3Blbikge1xyXG4gICAgICBjb25zdCBzb3J0cyA9IGNvbmZpZy5zb3J0c1xyXG4gICAgICBjb25zdCBvbGRTb3J0cyA9IHByZVByb3BzLmNvbmZpZy5zb3J0c1xyXG4gICAgICBpZiAoc29ydHMgIT09IG9sZFNvcnRzKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICBzb3J0T3B0aW9uTmFtZTogdW5kZWZpbmVkXHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbGlzdEZpbHRlckNoYW5nZSA9IHByZVByb3BzID0+IHtcclxuICAgIGNvbnN0IHsgY29uZmlnIH0gPSB0aGlzLnByb3BzXHJcbiAgICBpZiAoY29uZmlnLmZpbHRlck9wZW4pIHtcclxuICAgICAgY29uc3QgZmlsdGVyID0gY29uZmlnLmZpbHRlclxyXG4gICAgICBjb25zdCBvbGRGaWx0ZXIgPSBwcmVQcm9wcy5jb25maWcuZmlsdGVyXHJcbiAgICAgIGlmIChmaWx0ZXIgIT09IG9sZEZpbHRlcikge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgY3VycmVudEZpbHRlcjogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgZmlsdGVyQXBwbGllZDogZmFsc2VcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRTZWxlY3Rpb25TdGF0dXMgPSAoKSA9PiB7XHJcbiAgICBjb25zdCB7IGlkLCBzZWxlY3Rpb25Jc0luU2VsZiB9ID0gdGhpcy5wcm9wc1xyXG4gICAgdGhpcy5wcm9wcy5kaXNwYXRjaChcclxuICAgICAgYXBwQWN0aW9ucy53aWRnZXRTdGF0ZVByb3BDaGFuZ2UoXHJcbiAgICAgICAgaWQsXHJcbiAgICAgICAgJ3NlbGVjdGlvbklzSW5TZWxmJyxcclxuICAgICAgICBzZWxlY3Rpb25Jc0luU2VsZlxyXG4gICAgICApXHJcbiAgICApXHJcbiAgfVxyXG5cclxuICB1cGRhdGVTY3JvbGxDb250ZW50U2l6ZSA9IHByZUNvbmZpZyA9PiB7XHJcbiAgICBjb25zdCB7IGNvbmZpZyB9ID0gdGhpcy5wcm9wc1xyXG4gICAgY29uc3QgaXNTcGFjZU5vdENoYW5nZSA9IGNvbmZpZz8ubGF5b3V0VHlwZSA9PT0gTGlzdExheW91dFR5cGUuR1JJRFxyXG4gICAgICA/IGxpc3RVdGlscy5pc0VxdWFsTnVtYmVyKGNvbmZpZz8uaG9yaXpvbnRhbFNwYWNlLCBwcmVDb25maWc/Lmhvcml6b250YWxTcGFjZSkgJiYgbGlzdFV0aWxzLmlzRXF1YWxOdW1iZXIoY29uZmlnPy52ZXJ0aWNhbFNwYWNlLCBwcmVDb25maWc/LnZlcnRpY2FsU3BhY2UpXHJcbiAgICAgIDogbGlzdFV0aWxzLmlzRXF1YWxOdW1iZXIoY29uZmlnLnNwYWNlLCBwcmVDb25maWcuc3BhY2UpXHJcbiAgICBpZiAoY29uZmlnLmxheW91dFR5cGUgIT09IHByZUNvbmZpZy5sYXlvdXRUeXBlIHx8ICFpc1NwYWNlTm90Q2hhbmdlKSB7XHJcbiAgICAgIHRoaXMuc2V0U2Nyb2xsQ29udGVudFNpemUoKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2Nyb2xsVG9TZWxlY3RlZEl0ZW1zID0gKGRhdGFzb3VyY2U6IERhdGFTb3VyY2UpID0+IHtcclxuICAgIGNvbnN0IHNlbGVjdGVkUmVjb3JkSWRzID0gZGF0YXNvdXJjZS5nZXRTZWxlY3RlZFJlY29yZElkcygpXHJcbiAgICBpZiAodGhpcy5pc015U2VsZWN0ZWQpIHtcclxuICAgICAgdGhpcy5pc015U2VsZWN0ZWQgPSBmYWxzZVxyXG4gICAgICB0aGlzLmxhc3RTZWxlY3RlZFJlY29yZElkcyA9IHNlbGVjdGVkUmVjb3JkSWRzIHx8IFtdXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgaWYgKHNlbGVjdGVkUmVjb3JkSWRzICYmIHNlbGVjdGVkUmVjb3JkSWRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgbGV0IGlzU2FtZSA9IHRydWVcclxuICAgICAgaWYgKFxyXG4gICAgICAgICF0aGlzLmxhc3RTZWxlY3RlZFJlY29yZElkcyB8fFxyXG4gICAgICAgIHNlbGVjdGVkUmVjb3JkSWRzLmxlbmd0aCAhPT0gdGhpcy5sYXN0U2VsZWN0ZWRSZWNvcmRJZHMubGVuZ3RoXHJcbiAgICAgICkge1xyXG4gICAgICAgIGlzU2FtZSA9IGZhbHNlXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2VsZWN0ZWRSZWNvcmRJZHMuc29tZShyZWNvcmRJZCA9PiB7XHJcbiAgICAgICAgICBjb25zdCBySWQgPSB0aGlzLmxhc3RTZWxlY3RlZFJlY29yZElkcy5maW5kKFxyXG4gICAgICAgICAgICBsYXN0UmVjb3JkSWQgPT4gbGFzdFJlY29yZElkID09PSByZWNvcmRJZFxyXG4gICAgICAgICAgKVxyXG4gICAgICAgICAgaWYgKCFySWQpIHtcclxuICAgICAgICAgICAgaXNTYW1lID0gZmFsc2VcclxuICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgICAgaWYgKCFpc1NhbWUgfHwgdGhpcy5uZWVkU2Nyb2xsKSB7XHJcbiAgICAgICAgbGV0IGluZGV4ID0gLTFcclxuICAgICAgICB0aGlzLnJlY29yZHMgJiZcclxuICAgICAgICAgIHRoaXMucmVjb3Jkcy5maW5kKChyZWNvcmQsIGkpID0+IHtcclxuICAgICAgICAgICAgaWYgKHJlY29yZC5nZXRJZD8uKCkgPT09IHNlbGVjdGVkUmVjb3JkSWRzWzBdKSB7XHJcbiAgICAgICAgICAgICAgaW5kZXggPSBpXHJcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICBpZiAoaW5kZXggPT09IC0xKSB7XHJcbiAgICAgICAgICAvLyBDYW4ndCBmaW5kIGl0LCBuZWVkIHRvIHNlYXJjaCBpbiBhbGwgcmVjb3JkcyBhZ2FpblxyXG4gICAgICAgICAgY29uc3QgcmVjb3JkcyA9IGRhdGFzb3VyY2UuZ2V0UmVjb3JkcygpXHJcbiAgICAgICAgICByZWNvcmRzICYmXHJcbiAgICAgICAgICAgIHJlY29yZHMuZmluZCgocmVjb3JkLCBpKSA9PiB7XHJcbiAgICAgICAgICAgICAgaWYgKHJlY29yZC5nZXRJZD8uKCkgPT09IHNlbGVjdGVkUmVjb3JkSWRzWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IGlcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1BhZ2UgPSBNYXRoLmNlaWwoKGluZGV4ICsgMSkgLyB0aGlzLmdldFBhZ2VTaXplKCkpXHJcbiAgICAgICAgICAgIHRoaXMubmVlZFNjcm9sbCA9IHRydWVcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgcGFnZTogbmV3UGFnZVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLnNjcm9sbFRvSW5kZXgoaW5kZXgpXHJcbiAgICAgICAgICB0aGlzLm5lZWRTY3JvbGwgPSBmYWxzZVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5sYXN0U2VsZWN0ZWRSZWNvcmRJZHMgPSBzZWxlY3RlZFJlY29yZElkcyB8fCBbXVxyXG4gIH1cclxuXHJcbiAgb25EU0NyZWF0ZWQgPSAoZHM6IERhdGFTb3VyY2UpID0+IHtcclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICBkYXRhc291cmNlOiBkc1xyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIHJlc2l6ZVRpbWVvdXQ6IE5vZGVKUy5UaW1lclxyXG4gIG9uUmVzaXplID0gKHdpZHRoLCBoZWlnaHQpID0+IHtcclxuICAgIGNvbnN0IG5ld1dpZGdldFJlY3QgPSB7XHJcbiAgICAgIHdpZHRoLFxyXG4gICAgICBoZWlnaHRcclxuICAgIH1cclxuICAgIGNvbnN0IHsgY29uZmlnIH0gPSB0aGlzLnByb3BzXHJcbiAgICBjb25zdCB7IGlzUmVzaXppbmdDYXJkLCBjdXJyZW50Q2FyZFNpemUgfSA9IHRoaXMuc3RhdGVcclxuICAgIGlmIChpc1Jlc2l6aW5nQ2FyZCkge1xyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIGNvbnN0IHNob3dCb3R0b21Ub29sID0gbGlzdFV0aWxzLnNob3dCb3R0b21Ub29scyh0aGlzLnByb3BzLCB0aGlzLnN0YXRlKVxyXG4gICAgY29uc3QgYm90dG9tVG9vbEggPSBsaXN0VXRpbHMuZ2V0Qm90dG9tVG9vbEgoXHJcbiAgICAgIHRoaXMucGFnaW5hdG9yRGl2LmN1cnJlbnQsXHJcbiAgICAgIHNob3dCb3R0b21Ub29sXHJcbiAgICApXHJcbiAgICBjb25zdCBzaG93VG9wVG9vbCA9IGxpc3RVdGlscy5zaG93VG9wVG9vbHModGhpcy5wcm9wcylcclxuICAgIGNvbnN0IGxpc3RIID0gbGlzdFV0aWxzLmdldExpc3RIZWlnaHQoXHJcbiAgICAgIG5ld1dpZGdldFJlY3QsXHJcbiAgICAgIGJvdHRvbVRvb2xILFxyXG4gICAgICBzaG93VG9wVG9vbFxyXG4gICAgKVxyXG4gICAgY29uc3Qgb2xkQ2FyZFNpemUgPSB0aGlzLmdldE9sZENhcmRTaXplV2hlblJlc2l6ZShuZXdXaWRnZXRSZWN0KVxyXG4gICAgY29uc3QgbmV3RGVmYXVsdENhcmRTaXplID0gY29uZmlnLmxheW91dFR5cGUgPT09IExpc3RMYXlvdXRUeXBlLkdSSUQgPyBsaXN0VXRpbHMuZ2V0Q2FyZFNpemVOdW1iZXJJbkNvbmZpZyh0aGlzLnByb3BzLCBuZXdXaWRnZXRSZWN0KSA6IGN1cnJlbnRDYXJkU2l6ZVxyXG4gICAgY29uc3QgY2FyZFNpemUgPSB7XHJcbiAgICAgIHdpZHRoOiBuZXdEZWZhdWx0Q2FyZFNpemUud2lkdGgsXHJcbiAgICAgIGhlaWdodDogbmV3RGVmYXVsdENhcmRTaXplLmhlaWdodFxyXG4gICAgfVxyXG4gICAgbGV0IG5lZWRSZWZyZXNoTGlzdDogYm9vbGVhbiA9ICFsaXN0VXRpbHMuaXNFcXVhbE51bWJlcihjdXJyZW50Q2FyZFNpemU/LndpZHRoLCBuZXdEZWZhdWx0Q2FyZFNpemU/LndpZHRoKSB8fCAhbGlzdFV0aWxzLmlzRXF1YWxOdW1iZXIoY3VycmVudENhcmRTaXplPy5oZWlnaHQsIG5ld0RlZmF1bHRDYXJkU2l6ZT8uaGVpZ2h0KVxyXG4gICAgaWYgKGNvbmZpZy5sb2NrSXRlbVJhdGlvICYmIGNvbmZpZy5sYXlvdXRUeXBlICE9PSBMaXN0TGF5b3V0VHlwZS5HUklEKSB7XHJcbiAgICAgIGNvbnN0IHJhdGlvID0gY2FyZFNpemUud2lkdGggLyBjYXJkU2l6ZS5oZWlnaHRcclxuICAgICAgc3dpdGNoIChjb25maWc/LmxheW91dFR5cGUpIHtcclxuICAgICAgICBjYXNlIExpc3RMYXlvdXRUeXBlLkNvbHVtbjpcclxuICAgICAgICAgIGNhcmRTaXplLmhlaWdodCA9IGxpc3RIXHJcbiAgICAgICAgICBjYXJkU2l6ZS53aWR0aCA9IGxpc3RIICogcmF0aW9cclxuICAgICAgICAgIGlmICghbGlzdFV0aWxzLmlzRXF1YWxOdW1iZXIoY2FyZFNpemUud2lkdGgsIG9sZENhcmRTaXplLndpZHRoKSkge1xyXG4gICAgICAgICAgICBuZWVkUmVmcmVzaExpc3QgPSB0cnVlXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBicmVha1xyXG4gICAgICAgIGNhc2UgTGlzdExheW91dFR5cGUuUm93OlxyXG4gICAgICAgICAgY2FyZFNpemUuaGVpZ2h0ID0gd2lkdGggLyByYXRpb1xyXG4gICAgICAgICAgY2FyZFNpemUud2lkdGggPSB3aWR0aFxyXG4gICAgICAgICAgaWYgKCFsaXN0VXRpbHMuaXNFcXVhbE51bWJlcihjYXJkU2l6ZS5oZWlnaHQsIG9sZENhcmRTaXplLmhlaWdodCkpIHtcclxuICAgICAgICAgICAgbmVlZFJlZnJlc2hMaXN0ID0gdHJ1ZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYnJlYWtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc3dpdGNoIChjb25maWc/LmxheW91dFR5cGUpIHtcclxuICAgICAgICBjYXNlIExpc3RMYXlvdXRUeXBlLkNvbHVtbjpcclxuICAgICAgICAgIGNhcmRTaXplLmhlaWdodCA9IGxpc3RIXHJcbiAgICAgICAgICBicmVha1xyXG4gICAgICAgIGNhc2UgTGlzdExheW91dFR5cGUuUm93OlxyXG4gICAgICAgICAgY2FyZFNpemUud2lkdGggPSB3aWR0aFxyXG4gICAgICAgICAgYnJlYWtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3Qgbm90UmVzZXRDYXJkU2l6ZSA9IGNhcmRTaXplLndpZHRoIDwgTElTVF9DQVJEX01JTl9TSVpFIHx8IGNhcmRTaXplLmhlaWdodCA8IExJU1RfQ0FSRF9NSU5fU0laRSB8fCBuZXdXaWRnZXRSZWN0LndpZHRoID09PSAwIHx8IG5ld1dpZGdldFJlY3QuaGVpZ2h0ID09PSAwXHJcbiAgICBpZiAobm90UmVzZXRDYXJkU2l6ZSkge1xyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIHRoaXMuc2V0U3RhdGUoXHJcbiAgICAgIHtcclxuICAgICAgICB3aWRnZXRSZWN0OiBuZXdXaWRnZXRSZWN0LFxyXG4gICAgICAgIGN1cnJlbnRDYXJkU2l6ZTogY2FyZFNpemVcclxuICAgICAgfSxcclxuICAgICAgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuaXNIYXNJbml0Q3VycmVudENhcmRTaXplID0gdHJ1ZVxyXG4gICAgICAgIHRoaXMuZWRpdExpc3RTaXplSW5SdW5UaW1lKG5ld1dpZGdldFJlY3QpXHJcbiAgICAgICAgaWYgKG5lZWRSZWZyZXNoTGlzdCkge1xyXG4gICAgICAgICAgdGhpcy5yZWZyZXNoTGlzdCgpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICApXHJcbiAgICBpZiAodGhpcy5yZXNpemVUaW1lb3V0KSB7XHJcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnJlc2l6ZVRpbWVvdXQpXHJcbiAgICAgIHRoaXMucmVzaXplVGltZW91dCA9IHVuZGVmaW5lZFxyXG4gICAgfVxyXG4gICAgaWYgKGNvbmZpZy5sb2NrSXRlbVJhdGlvKSB7XHJcbiAgICAgIHRoaXMucmVzaXplVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuaGFuZGxlUmVzaXplQ2FyZChjYXJkU2l6ZSwgdHJ1ZSwgZmFsc2UsIGZhbHNlLCB0cnVlKVxyXG4gICAgICB9LCA1MDApXHJcbiAgICB9XHJcbiAgICB0aGlzLnVwZGF0ZUNhcmRUb29sUG9zaXRpb24oKVxyXG4gICAgdGhpcy5zZXRMaXN0RGl2U2l6ZSgpXHJcbiAgfVxyXG5cclxuICBnZXRPbGRDYXJkU2l6ZVdoZW5SZXNpemUgPSAobmV3V2lkZ2V0UmVjdCk6IEVsZW1lbnRTaXplID0+IHtcclxuICAgIC8vV2hlbiB0aGUgd2lkdGggYW5kIGhlaWdodCBhcmUgcGVyY2VudGFnZXMsIHRoZSBPbnJlc2l6ZSBtZXRob2Qgd2lsbCBiZSBhdXRvbWF0aWNhbGx5IGNhbGxlZCBvbmNlIHdoZW4gdGhlIExpc3QgaXMgbG9hZGVkLiBBdCB0aGlzIHRpbWUsIHRoZSBjdXJyZW50IExpc3Qgc2l6ZSBzaG91bGQgYmUgdXNlZCB0byBvYnRhaW4gdGhlIG9sZENhcmRTaXplXHJcbiAgICBjb25zdCB7IGN1cnJlbnRDYXJkU2l6ZSB9ID0gdGhpcy5zdGF0ZVxyXG4gICAgaWYgKCF0aGlzLmlzSGFzSW5pdEN1cnJlbnRDYXJkU2l6ZSkge1xyXG4gICAgICByZXR1cm4gbGlzdFV0aWxzLmdldENhcmRTaXplTnVtYmVySW5Db25maWcodGhpcy5wcm9wcywgbmV3V2lkZ2V0UmVjdClcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBjdXJyZW50Q2FyZFNpemVcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHVwZGF0ZUNhcmRUb29sVGltZW91dDogTm9kZUpTLlRpbWVyXHJcbiAgcHJpdmF0ZSByZWFkb25seSB1cGRhdGVDYXJkVG9vbFBvc2l0aW9uID0gKCkgPT4ge1xyXG4gICAgY29uc3QgeyBzZWxlY3Rpb25Jc1NlbGYgfSA9IHRoaXMucHJvcHNcclxuICAgIGNvbnN0IHsgaGlkZUNhcmRUb29sIH0gPSB0aGlzLnN0YXRlXHJcbiAgICBpZiAoIXNlbGVjdGlvbklzU2VsZiB8fCBoaWRlQ2FyZFRvb2wpIHJldHVyblxyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIGhpZGVDYXJkVG9vbDogdHJ1ZVxyXG4gICAgfSlcclxuICAgIGlmICh0aGlzLnVwZGF0ZUNhcmRUb29sVGltZW91dCkge1xyXG4gICAgICBjbGVhclRpbWVvdXQodGhpcy51cGRhdGVDYXJkVG9vbFRpbWVvdXQpXHJcbiAgICAgIHRoaXMudXBkYXRlQ2FyZFRvb2xUaW1lb3V0ID0gdW5kZWZpbmVkXHJcbiAgICB9XHJcbiAgICB0aGlzLnVwZGF0ZUNhcmRUb29sVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICBoaWRlQ2FyZFRvb2w6IGZhbHNlXHJcbiAgICAgIH0pXHJcbiAgICB9LCA1MDApXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHJlYWRvbmx5IHJlZnJlc2hMaXN0ID0gKHNob3VsZEZvcmNlVXBkYXRlOiBib29sZWFuID0gdHJ1ZSkgPT4ge1xyXG4gICAgaWYgKHRoaXMubGlzdFJlZi5jdXJyZW50KSB7XHJcbiAgICAgIGlmICh0aGlzLnByb3BzLmNvbmZpZz8ubGF5b3V0VHlwZSA9PT0gTGlzdExheW91dFR5cGUuR1JJRCkge1xyXG4gICAgICAgIC8vVmFyaWFibGVTaXplR3JpZCBjYWNoZXMgb2Zmc2V0cyBhbmQgbWVhc3VyZW1lbnRzIGZvciBlYWNoIGl0ZW0gZm9yIHBlcmZvcm1hbmNlIHB1cnBvc2VzLlxyXG4gICAgICAgIC8vVGhpcyBtZXRob2QgY2xlYXJzIHRoYXQgY2FjaGVkIGRhdGEgZm9yIGFsbCBpdGVtcyBhZnRlciAoYW5kIGluY2x1ZGluZykgdGhlIHNwZWNpZmllZCBpbmRpY2VzLiBJdCBzaG91bGQgYmUgY2FsbGVkIHdoZW5ldmVyIGFuIGl0ZW1zIHNpemUgY2hhbmdlcy5cclxuICAgICAgICAvL2h0dHBzOi8vcmVhY3Qtd2luZG93LnZlcmNlbC5hcHAvIy9hcGkvVmFyaWFibGVTaXplR3JpZFxyXG4gICAgICAgIHRoaXMucmVzZXRBZnRlckluZGljZXMoKVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vVmFyaWFibGVTaXplTGlzdCBjYWNoZXMgb2Zmc2V0cyBhbmQgbWVhc3VyZW1lbnRzIGZvciBlYWNoIGluZGV4IGZvciBwZXJmb3JtYW5jZSBwdXJwb3Nlcy5cclxuICAgICAgICAvL1RoaXMgbWV0aG9kIGNsZWFycyB0aGF0IGNhY2hlZCBkYXRhIGZvciBhbGwgaXRlbXMgYWZ0ZXIgKGFuZCBpbmNsdWRpbmcpIHRoZSBzcGVjaWZpZWQgaW5kZXguIEl0IHNob3VsZCBiZSBjYWxsZWQgd2hlbmV2ZXIgYSBpdGVtJ3Mgc2l6ZSBjaGFuZ2VzLlxyXG4gICAgICAgIHRoaXMubGlzdFJlZj8uY3VycmVudD8ucmVzZXRBZnRlckluZGV4ICYmIHRoaXMubGlzdFJlZj8uY3VycmVudD8ucmVzZXRBZnRlckluZGV4KDAsIHNob3VsZEZvcmNlVXBkYXRlKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHJlYWRvbmx5IGlzRHNDb25maWd1cmVkID0gKCk6IGJvb2xlYW4gPT4ge1xyXG4gICAgY29uc3QgeyB1c2VEYXRhU291cmNlcyB9ID0gdGhpcy5wcm9wc1xyXG4gICAgcmV0dXJuICEhdXNlRGF0YVNvdXJjZXMgJiYgISF1c2VEYXRhU291cmNlc1swXVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByZWFkb25seSBzZWxlY3RSZWNvcmRzID0gKHJlY29yZHM6IERhdGFSZWNvcmRbXSkgPT4ge1xyXG4gICAgY29uc3QgeyBkYXRhc291cmNlIH0gPSB0aGlzLnN0YXRlXHJcblxyXG4gICAgaWYgKGRhdGFzb3VyY2UpIHtcclxuICAgICAgTWVzc2FnZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5wdWJsaXNoTWVzc2FnZShcclxuICAgICAgICBuZXcgRGF0YVJlY29yZHNTZWxlY3Rpb25DaGFuZ2VNZXNzYWdlKHRoaXMucHJvcHMuaWQsIHJlY29yZHMpXHJcbiAgICAgIClcclxuXHJcbiAgICAgIGlmIChyZWNvcmRzKSB7XHJcbiAgICAgICAgdGhpcy5pc015U2VsZWN0ZWQgPSB0cnVlXHJcbiAgICAgICAgdGhpcy5pc0hhc1B1Ymxpc2hNZXNzYWdlQWN0aW9uID0gdHJ1ZVxyXG4gICAgICAgIGRhdGFzb3VyY2Uuc2VsZWN0UmVjb3Jkc0J5SWRzKHJlY29yZHMubWFwKHJlY29yZCA9PiByZWNvcmQuZ2V0SWQoKSkpXHJcbiAgICAgICAgY29uc3Qgb3V0cHV0RHMgPSB0aGlzLmdldE91dHB1dERzKClcclxuICAgICAgICBvdXRwdXREcyAmJlxyXG4gICAgICAgICAgb3V0cHV0RHMuc2VsZWN0UmVjb3Jkc0J5SWRzKHJlY29yZHMubWFwKHJlY29yZCA9PiByZWNvcmQuZ2V0SWQoKSkpXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5pc0hhc1B1Ymxpc2hNZXNzYWdlQWN0aW9uID0gZmFsc2VcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZm9ybWF0TWVzc2FnZSA9IChpZDogc3RyaW5nLCB2YWx1ZXM/OiB7IFtrZXk6IHN0cmluZ106IGFueSB9KSA9PiB7XHJcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5pbnRsLmZvcm1hdE1lc3NhZ2UoXHJcbiAgICAgIHsgaWQ6IGlkLCBkZWZhdWx0TWVzc2FnZTogTUVTU0FHRVNbaWRdIH0sXHJcbiAgICAgIHZhbHVlc1xyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgLy8gY2FsbCBleGVjIG1hbnVseVxyXG4gIGVkaXRTdGF0dXMgPSAobmFtZSwgdmFsdWUpID0+IHtcclxuICAgIGNvbnN0IHsgZGlzcGF0Y2gsIGlkIH0gPSB0aGlzLnByb3BzXHJcbiAgICBkaXNwYXRjaChhcHBBY3Rpb25zLndpZGdldFN0YXRlUHJvcENoYW5nZShpZCwgbmFtZSwgdmFsdWUpKVxyXG4gIH1cclxuXHJcbiAgZWRpdFdpZGdldENvbmZpZyA9IG5ld0NvbmZpZyA9PiB7XHJcbiAgICBpZiAoIXdpbmRvdy5qaW11Q29uZmlnLmlzSW5CdWlsZGVyKSByZXR1cm5cclxuXHJcbiAgICBjb25zdCBhcHBDb25maWdBY3Rpb24gPSB0aGlzLnByb3BzLmJ1aWxkZXJTdXBwb3J0TW9kdWxlcy5qaW11Rm9yQnVpbGRlckxpYi5nZXRBcHBDb25maWdBY3Rpb24oKVxyXG4gICAgYXBwQ29uZmlnQWN0aW9uLmVkaXRXaWRnZXRDb25maWcodGhpcy5wcm9wcy5pZCwgbmV3Q29uZmlnKS5leGVjKClcclxuICB9XHJcblxyXG4gIHNjcm9sbFRvSW5kZXggPSAoaW5kZXg6IG51bWJlciwgdHlwZTogc3RyaW5nID0gJ3N0YXJ0JykgPT4ge1xyXG4gICAgY29uc3QgeyBjb25maWcgfSA9IHRoaXMucHJvcHNcclxuICAgIGlmICh0aGlzLmxpc3RSZWYuY3VycmVudCkge1xyXG4gICAgICBpZiAoY29uZmlnPy5sYXlvdXRUeXBlID09PSBMaXN0TGF5b3V0VHlwZS5HUklEKSB7XHJcbiAgICAgICAgY29uc3QgY29sdW1uQ291bnQgPSB0aGlzLmdldEl0ZW1Db2x1bW5Db3VudCgpXHJcbiAgICAgICAgY29uc3Qgcm93SW5kZXggPSBNYXRoLmZsb29yKGluZGV4IC8gY29sdW1uQ291bnQpXHJcbiAgICAgICAgdGhpcy5saXN0UmVmLmN1cnJlbnQuc2Nyb2xsVG9JdGVtKHtcclxuICAgICAgICAgIGNvbHVtbkluZGV4OiBpbmRleCAtIHJvd0luZGV4ICogY29sdW1uQ291bnQsXHJcbiAgICAgICAgICByb3dJbmRleDogcm93SW5kZXgsXHJcbiAgICAgICAgICBhbGlnbjogdHlwZVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5saXN0UmVmLmN1cnJlbnQuc2Nyb2xsVG9JdGVtKGluZGV4LCB0eXBlKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpc0VkaXRpbmcgPSAoKTogYm9vbGVhbiA9PiB7XHJcbiAgICBjb25zdCB7IGFwcE1vZGUsIGNvbmZpZywgc2VsZWN0aW9uSXNTZWxmLCBzZWxlY3Rpb25Jc0luU2VsZiB9ID0gdGhpcy5wcm9wc1xyXG4gICAgaWYgKCF3aW5kb3cuamltdUNvbmZpZy5pc0luQnVpbGRlcikgcmV0dXJuIGZhbHNlXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAoc2VsZWN0aW9uSXNTZWxmIHx8IHNlbGVjdGlvbklzSW5TZWxmKSAmJlxyXG4gICAgICB3aW5kb3cuamltdUNvbmZpZy5pc0luQnVpbGRlciAmJlxyXG4gICAgICBhcHBNb2RlICE9PSBBcHBNb2RlLlJ1biAmJlxyXG4gICAgICBjb25maWcuaXNJdGVtU3R5bGVDb25maXJtXHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHJlYWRvbmx5IGhhbmRsZUl0ZW1DaGFuZ2UgPSAoaXRlbVJlY29yZDogRGF0YVJlY29yZCkgPT4ge1xyXG4gICAgY29uc3QgeyBjb25maWcgfSA9IHRoaXMucHJvcHNcclxuICAgIGNvbnN0IHsgZGF0YXNvdXJjZSB9ID0gdGhpcy5zdGF0ZVxyXG4gICAgaWYgKCFkYXRhc291cmNlIHx8ICFpdGVtUmVjb3JkKSByZXR1cm5cclxuXHJcbiAgICBsZXQgc2VsZWN0ZWRSZWNvcmRzID0gZGF0YXNvdXJjZS5nZXRTZWxlY3RlZFJlY29yZHMoKSB8fCBbXVxyXG4gICAgaWYgKFxyXG4gICAgICBjb25maWcuY2FyZENvbmZpZ3NbU3RhdHVzLlNlbGVjdGVkXS5zZWxlY3Rpb25Nb2RlICYmXHJcbiAgICAgIGNvbmZpZy5jYXJkQ29uZmlnc1tTdGF0dXMuU2VsZWN0ZWRdLnNlbGVjdGlvbk1vZGUgIT09XHJcbiAgICAgIFNlbGVjdGlvbk1vZGVUeXBlLk5vbmVcclxuICAgICkge1xyXG4gICAgICBjb25zdCByZWNvcmRJZCA9IGl0ZW1SZWNvcmQ/LmdldElkKClcclxuICAgICAgY29uc3QgcmVjb3JkID0gc2VsZWN0ZWRSZWNvcmRzLmZpbmQocmVjb3JkID0+IHJlY29yZC5nZXRJZCgpID09PSByZWNvcmRJZClcclxuICAgICAgaWYgKFxyXG4gICAgICAgIGNvbmZpZy5jYXJkQ29uZmlnc1tTdGF0dXMuU2VsZWN0ZWRdLnNlbGVjdGlvbk1vZGUgPT09XHJcbiAgICAgICAgU2VsZWN0aW9uTW9kZVR5cGUuU2luZ2xlXHJcbiAgICAgICkge1xyXG4gICAgICAgIGlmIChyZWNvcmQpIHtcclxuICAgICAgICAgIHRoaXMuc2VsZWN0UmVjb3JkcyhbXSlcclxuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBzaG93U2VsZWN0aW9uT25seTogZmFsc2UgfSlcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5zZWxlY3RSZWNvcmRzKFtpdGVtUmVjb3JkXSlcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKHJlY29yZCkge1xyXG4gICAgICAgICAgc2VsZWN0ZWRSZWNvcmRzID0gc2VsZWN0ZWRSZWNvcmRzLmZpbHRlcihcclxuICAgICAgICAgICAgcmVjb3JkID0+IHJlY29yZC5nZXRJZCgpICE9PSByZWNvcmRJZFxyXG4gICAgICAgICAgKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBzZWxlY3RlZFJlY29yZHMgPSBbaXRlbVJlY29yZF0uY29uY2F0KHNlbGVjdGVkUmVjb3JkcylcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZWxlY3RSZWNvcmRzKHNlbGVjdGVkUmVjb3JkcylcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbW91c2VDbGlja1RpbWVvdXQ6IE5vZGVKUy5UaW1lclxyXG5cclxuICBoYW5kbGVMaXN0UG9pbnRlckRvd24gPSBldnQgPT4ge1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIGZvcmNlU2hvd01hc2s6IHRydWVcclxuICAgIH0pXHJcbiAgICBpZiAodGhpcy5tb3VzZUNsaWNrVGltZW91dCkge1xyXG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5tb3VzZUNsaWNrVGltZW91dClcclxuICAgICAgdGhpcy5tb3VzZUNsaWNrVGltZW91dCA9IHVuZGVmaW5lZFxyXG4gICAgfVxyXG4gICAgdGhpcy5tb3VzZUNsaWNrVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICBmb3JjZVNob3dNYXNrOiBmYWxzZVxyXG4gICAgICB9KVxyXG4gICAgfSwgMjAwKVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlU2Nyb2xsVXAgPSBlID0+IHtcclxuICAgIGNvbnN0IHNjcm9sbFN0ZXAgPSB0aGlzLmdldFNjcm9sbFN0ZXAoKVxyXG4gICAgY29uc3QgbGlzdFZpc2libGVTdGFydEluZGV4ID0gdGhpcy5nZXRMaXN0VmlzaWJsZVN0YXJ0SW5kZXgoKVxyXG4gICAgbGV0IHRvSW5kZXggPSBsaXN0VmlzaWJsZVN0YXJ0SW5kZXggLSBzY3JvbGxTdGVwXHJcbiAgICBpZiAodG9JbmRleCA8IDApIHtcclxuICAgICAgdG9JbmRleCA9IDBcclxuICAgIH1cclxuICAgIHRoaXMuc2Nyb2xsVG9JbmRleCh0b0luZGV4LCAnc3RhcnQnKVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlU2Nyb2xsRG93biA9IGUgPT4ge1xyXG4gICAgY29uc3Qgc2Nyb2xsU3RlcCA9IHRoaXMuZ2V0U2Nyb2xsU3RlcCgpXHJcbiAgICBjb25zdCB7IGxpc3RWaXNpYmxlU3RvcEluZGV4IH0gPSB0aGlzXHJcbiAgICBjb25zdCBsaXN0VmlzaWJsZVN0YXJ0SW5kZXggPSB0aGlzLmdldExpc3RWaXNpYmxlU3RhcnRJbmRleCgpXHJcbiAgICBpZiAoXHJcbiAgICAgIGxpc3RWaXNpYmxlU3RvcEluZGV4ICsgc2Nyb2xsU3RlcCA+PSB0aGlzLnJlY29yZHMubGVuZ3RoIC0gMSAmJlxyXG4gICAgICB0aGlzLnJlY29yZHMubGVuZ3RoIDwgdGhpcy5nZXRUb3RhbENvdW50KClcclxuICAgICkge1xyXG4gICAgICB0aGlzLmlzU3dpdGNoUGFnZSA9IHRydWVcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgcGFnZTogdGhpcy5zdGF0ZS5wYWdlICsgMVxyXG4gICAgICB9KVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zY3JvbGxUb0luZGV4KGxpc3RWaXNpYmxlU3RhcnRJbmRleCArIHNjcm9sbFN0ZXAsICdzdGFydCcpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRTY3JvbGxTdGVwID0gKCkgPT4ge1xyXG4gICAgY29uc3QgeyBzY3JvbGxTdGVwLCBsYXlvdXRUeXBlIH0gPSB0aGlzLnByb3BzLmNvbmZpZ1xyXG4gICAgY29uc3QgY29sdW1uQ291bnQgPSB0aGlzLmdldEl0ZW1Db2x1bW5Db3VudCgpXHJcbiAgICByZXR1cm4gbGF5b3V0VHlwZSA9PT0gTGlzdExheW91dFR5cGUuR1JJRCA/IHNjcm9sbFN0ZXAgKiBjb2x1bW5Db3VudCA6IHNjcm9sbFN0ZXBcclxuICB9XHJcblxyXG4gIGhhbmRsZVN3aXRjaFBhZ2UgPSAocGFnZU51bTogbnVtYmVyKSA9PiB7XHJcbiAgICBjb25zdCB0b3RhbFBhZ2VzID0gdGhpcy5nZXRUb3RhbFBhZ2UoKVxyXG4gICAgaWYgKHBhZ2VOdW0gPCAxIHx8IHBhZ2VOdW0gPiB0b3RhbFBhZ2VzKSByZXR1cm5cclxuICAgIGlmIChwYWdlTnVtICE9PSB0aGlzLnN0YXRlLnBhZ2UpIHtcclxuICAgICAgdGhpcy5pc1N3aXRjaFBhZ2UgPSB0cnVlXHJcbiAgICAgIHRoaXMubGFzdFF1ZXJ5U3RhcnQgPSB0aGlzLnN0YXRlLnBhZ2VcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgcGFnZTogcGFnZU51bVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlTGlzdE1vdXNlTGVhdmUgPSAoKSA9PiB7XHJcbiAgICBpZiAodGhpcy5pc0VkaXRpbmcoKSkgcmV0dXJuXHJcbiAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgaG92ZXJJbmRleDogLTFcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBoYW5kbGVMaXN0TW91c2VNb3ZlID0gKGl0ZW1JbmRleDogbnVtYmVyKSA9PiB7XHJcbiAgICBpZiAodGhpcy5pc0VkaXRpbmcoKSkgcmV0dXJuXHJcbiAgICBpZiAoaXRlbUluZGV4ID09PSB0aGlzLnN0YXRlLmhvdmVySW5kZXgpIHJldHVyblxyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIGhvdmVySW5kZXg6IGl0ZW1JbmRleFxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGxhc3RTY3JvbGxPZmZzZXQgPSAwXHJcbiAgdGltZVN0YW1wXHJcbiAgaGFuZGxlTGlzdFNjcm9sbCA9ICh7XHJcbiAgICBzY3JvbGxEaXJlY3Rpb24sXHJcbiAgICBzY3JvbGxPZmZzZXQsXHJcbiAgICBzY3JvbGxUb3AsXHJcbiAgICBzY3JvbGxVcGRhdGVXYXNSZXF1ZXN0ZWRcclxuICB9KSA9PiB7XHJcbiAgICBjb25zdCB7IGFwcE1vZGUsIGNvbmZpZyB9ID0gdGhpcy5wcm9wc1xyXG4gICAgY29uc3QgbGlzdERpdiA9IHRoaXMubGlzdE91dERpdlJlZlxyXG4gICAgY29uc3QgeyBkYXRhc291cmNlLCBzY3JvbGxTdGF0dXMgfSA9IHRoaXMuc3RhdGVcclxuICAgIHRoaXMubGFzdFNjcm9sbE9mZnNldCA9IGNvbmZpZz8ubGF5b3V0VHlwZSA9PT0gTGlzdExheW91dFR5cGUuR1JJRCA/IHNjcm9sbFRvcCA6IHNjcm9sbE9mZnNldFxyXG4gICAgaWYgKCFsaXN0RGl2IHx8ICh0aGlzLnJlY29yZHM/Lmxlbmd0aCA/PyAwKSA8IDEpIHJldHVyblxyXG4gICAgaWYgKFxyXG4gICAgICBjb25maWcucGFnZVN0eWxlID09PSBQYWdlU3R5bGUuU2Nyb2xsICYmXHJcbiAgICAgIHRoaXMucXVlcnlTdGF0dXMgIT09IERhdGFTb3VyY2VTdGF0dXMuTG9hZGluZyAmJlxyXG4gICAgICBkYXRhc291cmNlICYmXHJcbiAgICAgICghd2luZG93LmppbXVDb25maWcuaXNJbkJ1aWxkZXIgfHwgYXBwTW9kZSA9PT0gQXBwTW9kZS5SdW4pXHJcbiAgICApIHtcclxuICAgICAgdGhpcy5pc0hhc1Njcm9sbGVkID0gdHJ1ZVxyXG4gICAgICBpZiAobGlzdFV0aWxzLmlzU2Nyb2xsU3RhcnQobGlzdERpdiwgdGhpcy5sYXN0U2Nyb2xsT2Zmc2V0KSkge1xyXG4gICAgICAgIGlmIChzY3JvbGxTdGF0dXMgIT09ICdzdGFydCcpIHtcclxuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBzY3JvbGxTdGF0dXM6ICdzdGFydCdcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmIChzY3JvbGxTdGF0dXMgIT09ICdtaWQnKSB7XHJcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgc2Nyb2xsU3RhdHVzOiAnbWlkJ1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldFRvdGFsUGFnZSA9ICgpID0+IHtcclxuICAgIGNvbnN0IHsgdG90YWxDb3VudCB9ID0gdGhpc1xyXG4gICAgY29uc3QgeyBjb25maWcgfSA9IHRoaXMucHJvcHNcclxuICAgIGNvbnN0IHRvdGFsID0gdG90YWxDb3VudFxyXG4gICAgY29uc3QgdG90YWxQYWdlID0gTWF0aC5mbG9vcih0b3RhbCAvIGNvbmZpZy5pdGVtc1BlclBhZ2UpXHJcbiAgICBjb25zdCBtb2RlID0gdG90YWwgJSBjb25maWcuaXRlbXNQZXJQYWdlXHJcbiAgICByZXR1cm4gbW9kZSA9PT0gMCA/IHRvdGFsUGFnZSA6IHRvdGFsUGFnZSArIDFcclxuICB9XHJcblxyXG4gIGdldExpc3RWaXNpYmxlU3RhcnRJbmRleCA9ICgpID0+IHtcclxuICAgIGNvbnN0IHsgbGFzdFNjcm9sbE9mZnNldCB9ID0gdGhpc1xyXG4gICAgY29uc3QgeyBjb25maWcgfSA9IHRoaXMucHJvcHNcclxuICAgIGNvbnN0IGl0ZW1TaXplID0gdGhpcy5pdGVtU2l6ZSgwKVxyXG4gICAgY29uc3QgYmFzZSA9IChsYXN0U2Nyb2xsT2Zmc2V0ICogMS4wKSAvIGl0ZW1TaXplXHJcbiAgICBsZXQgaW5kZXggPSBNYXRoLmZsb29yKGJhc2UpXHJcbiAgICBjb25zdCBtbyA9IChiYXNlIC0gaW5kZXgpICogaXRlbVNpemVcclxuICAgIGNvbnN0IHNwYWNlID0gY29uZmlnPy5sYXlvdXRUeXBlID09PSBMaXN0TGF5b3V0VHlwZS5HUklEID8gY29uZmlnPy52ZXJ0aWNhbFNwYWNlIDogY29uZmlnPy5zcGFjZVxyXG4gICAgY29uc3QgY29sdW1uQ291bnQgPSB0aGlzLmdldEl0ZW1Db2x1bW5Db3VudCgpXHJcbiAgICBpbmRleCA9IGNvbmZpZz8ubGF5b3V0VHlwZSA9PT0gTGlzdExheW91dFR5cGUuR1JJRCA/IGluZGV4ICogY29sdW1uQ291bnQgOiBpbmRleFxyXG4gICAgaWYgKG1vID4gaXRlbVNpemUgLSBzcGFjZSkge1xyXG4gICAgICBpbmRleCsrXHJcbiAgICB9XHJcbiAgICByZXR1cm4gaW5kZXhcclxuICB9XHJcblxyXG4gIGhhbmRsZVNvcnRPcHRpb25DaGFuZ2UgPSAoZXZ0LCBpdGVtOiBNeURyb3BEb3duSXRlbSkgPT4ge1xyXG4gICAgdGhpcy5zZXRTdGF0ZShcclxuICAgICAge1xyXG4gICAgICAgIHNvcnRPcHRpb25OYW1lOiBpdGVtLmxhYmVsLFxyXG4gICAgICAgIHBhZ2U6IDFcclxuICAgICAgfSxcclxuICAgICAgKCkgPT4ge1xyXG4gICAgICAgIC8vIHRoaXMuc2VsZWN0UmVjb3JkcyhbXSlcclxuICAgICAgfVxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlU2VhcmNoVGV4dENoYW5nZSA9IHNlYXJjaFRleHQgPT4ge1xyXG4gICAgaWYgKHNlYXJjaFRleHQgPT09ICcnIHx8ICFzZWFyY2hUZXh0KSB7XHJcbiAgICAgIHRoaXMuaGFuZGxlU2VhcmNoU3VibWl0KHVuZGVmaW5lZClcclxuICAgIH1cclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICBzZWFyY2hTdWdnZXN0aW9uOiBbXVxyXG4gICAgfSlcclxuICAgIGNsZWFyVGltZW91dCh0aGlzLnN1Z2dlc3Rpb25zUXVlcnlUaW1lb3V0KVxyXG4gICAgdGhpcy5zdWdnZXN0aW9uc1F1ZXJ5VGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICB0aGlzLmdldFNlYXJjaFN1Z2dlc3Rpb25zKHNlYXJjaFRleHQpXHJcbiAgICB9LCAyMDApXHJcbiAgfVxyXG5cclxuICBnZXRTZWFyY2hTdWdnZXN0aW9ucyA9IHNlYXJjaFRleHQgPT4ge1xyXG4gICAgY29uc3QgeyBjb25maWcgfSA9IHRoaXMucHJvcHNcclxuICAgIGNvbnN0IHsgZGF0YXNvdXJjZSB9ID0gdGhpcy5zdGF0ZVxyXG4gICAgaWYgKHNlYXJjaFRleHQ/Lmxlbmd0aCA8IDMpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICB9XHJcbiAgICBmZXRjaFN1Z2dlc3Rpb25SZWNvcmRzKHNlYXJjaFRleHQsIGNvbmZpZywgZGF0YXNvdXJjZSkudGhlbihcclxuICAgICAgc2VhcmNoU3VnZ2VzdGlvbiA9PiB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICBzZWFyY2hTdWdnZXN0aW9uOiBzZWFyY2hTdWdnZXN0aW9uXHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlU2VhcmNoU3VibWl0ID0gKHNlYXJjaFRleHQsIGlzRW50ZXIgPSBmYWxzZSkgPT4ge1xyXG4gICAgY29uc3Qgb2xkU2VhcmNoVGV4dCA9IHRoaXMuc3RhdGUuc2VhcmNoVGV4dFxyXG4gICAgaWYgKG9sZFNlYXJjaFRleHQgPT09IHNlYXJjaFRleHQgJiYgIWlzRW50ZXIpIHtcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICB0aGlzLnNldFN0YXRlKFxyXG4gICAgICB7XHJcbiAgICAgICAgc2VhcmNoVGV4dDogc2VhcmNoVGV4dCxcclxuICAgICAgICBwYWdlOiAxXHJcbiAgICAgIH0sXHJcbiAgICAgICgpID0+IHtcclxuICAgICAgICAvLyB0aGlzLnNlbGVjdFJlY29yZHMoW10pXHJcbiAgICAgIH1cclxuICAgIClcclxuICB9XHJcblxyXG4gIGNoYW5nZUlzUmVzaXppbmdDYXJkIChpc1Jlc2l6aW5nQ2FyZDogYm9vbGVhbikge1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIGlzUmVzaXppbmdDYXJkOiBpc1Jlc2l6aW5nQ2FyZFxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGhhbmRsZVJlc2l6ZUNhcmQgKFxyXG4gICAgbmV3Q2FyZFNpemUsXHJcbiAgICByZXNpemVFbmQ6IGJvb2xlYW4gPSBmYWxzZSxcclxuICAgIGlzVG9wPzogYm9vbGVhbixcclxuICAgIGlzTGVmdD86IGJvb2xlYW4sXHJcbiAgICBpc1JlcGxhY2U6IGJvb2xlYW4gPSBmYWxzZVxyXG4gICkge1xyXG4gICAgaWYgKHJlc2l6ZUVuZCkge1xyXG4gICAgICBjb25zdCBjYXJkU2l6ZSA9IHRoaXMuaW5pdE5ld0NhcmRTaXplKG5ld0NhcmRTaXplKVxyXG4gICAgICB3aW5kb3cuamltdUNvbmZpZy5pc0luQnVpbGRlciAmJlxyXG4gICAgICAgIHRoaXMucHJvcHMuYnVpbGRlclN1cHBvcnRNb2R1bGVzLndpZGdldE1vZHVsZXMuaGFuZGxlUmVzaXplQ2FyZChcclxuICAgICAgICAgIHRoaXMucHJvcHMsXHJcbiAgICAgICAgICBjYXJkU2l6ZSxcclxuICAgICAgICAgIGlzVG9wLFxyXG4gICAgICAgICAgaXNMZWZ0LFxyXG4gICAgICAgICAgcmVzaXplRW5kLFxyXG4gICAgICAgICAgaXNSZXBsYWNlXHJcbiAgICAgICAgKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zZXRTdGF0ZShcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjdXJyZW50Q2FyZFNpemU6IG5ld0NhcmRTaXplXHJcbiAgICAgICAgfSxcclxuICAgICAgICAoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLnJlZnJlc2hMaXN0KGZhbHNlKVxyXG4gICAgICAgIH1cclxuICAgICAgKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaW5pdE5ld0NhcmRTaXplID0gKG5ld0NhcmRTaXplOiBFbGVtZW50U2l6ZSkgPT4ge1xyXG4gICAgLy9JZiB0aGUgb3JpZ2luYWwgd2lkdGggYW5kIGhlaWdodCBhcmUgcGVyY2VudGFnZXMsIHB4IHdpbGwgYmUgY29udmVydGVkIHRvIHBlcmNlbnRhZ2VzIGR1cmluZyByZXNpemUsIGFuZCB0aGVuIHNldCB0byBjb25maWdcclxuICAgIGNvbnN0IHsgd2lkZ2V0UmVjdCB9ID0gdGhpcy5zdGF0ZVxyXG4gICAgbGV0IGNhcmRTaXplID0gSW1tdXRhYmxlKG5ld0NhcmRTaXplKVxyXG4gICAgY29uc3QgY2FyZFNpemVXaWR0aFVuaXQgPSBsaXN0VXRpbHMuZ2V0Q2FyZFNpemVXaWR0aFVuaXRJbkNvbmZpZyh0aGlzLnByb3BzKVxyXG4gICAgaWYgKGNhcmRTaXplV2lkdGhVbml0LndpZHRoLnVuaXQgPT09IERpc3RhbmNlVW5pdHMuUEVSQ0VOVEFHRSkge1xyXG4gICAgICBjYXJkU2l6ZSA9IGNhcmRTaXplLnNldCgnd2lkdGgnLCBgJHtuZXdDYXJkU2l6ZS53aWR0aCAqIDEwMCAvIHdpZGdldFJlY3Qud2lkdGh9JWApXHJcbiAgICB9XHJcbiAgICBpZiAoY2FyZFNpemVXaWR0aFVuaXQuaGVpZ2h0LnVuaXQgPT09IERpc3RhbmNlVW5pdHMuUEVSQ0VOVEFHRSkge1xyXG4gICAgICBjYXJkU2l6ZSA9IGNhcmRTaXplLnNldCgnaGVpZ2h0JywgYCR7bmV3Q2FyZFNpemUuaGVpZ2h0ICogMTAwIC8gd2lkZ2V0UmVjdC5oZWlnaHR9JWApXHJcbiAgICB9XHJcbiAgICByZXR1cm4gY2FyZFNpemU/LmFzTXV0YWJsZSh7IGRlZXA6IHRydWUgfSlcclxuICB9XHJcblxyXG4gIGhhbmRsZUZpbHRlckNoYW5nZSA9IChzcWxFeHByT2JqOiBJTVNxbEV4cHJlc3Npb24pID0+IHtcclxuICAgIHRoaXMuc2V0U3RhdGUoXHJcbiAgICAgIHtcclxuICAgICAgICBjdXJyZW50RmlsdGVyOiBzcWxFeHByT2JqLFxyXG4gICAgICAgIHBhZ2U6IDFcclxuICAgICAgfSxcclxuICAgICAgKCkgPT4ge1xyXG4gICAgICAgIC8vIHRoaXMuc2VsZWN0UmVjb3JkcyhbXSlcclxuICAgICAgfVxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlRmlsdGVyQXBwbHlDaGFuZ2UgPSAoYXBwbGllZDogYm9vbGVhbikgPT4ge1xyXG4gICAgY29uc3QgYWx0ZXJTdGF0ZSA9IHtcclxuICAgICAgZmlsdGVyQXBwbGllZDogYXBwbGllZCxcclxuICAgICAgcXVlcnlTdGFydDogMFxyXG4gICAgfSBhcyBhbnlcclxuXHJcbiAgICBpZiAoIWFwcGxpZWQpIHtcclxuICAgICAgLy8gYWx0ZXJTdGF0ZS5jdXJyZW50RmlsdGVyID0gdW5kZWZpbmVkXHJcbiAgICB9XHJcbiAgICB0aGlzLnNldFN0YXRlKGFsdGVyU3RhdGUsICgpID0+IHtcclxuICAgICAgLy8gdGhpcy5zZWxlY3RSZWNvcmRzKFtdKVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGhhbmRsZVNob3dTZWxlY3Rpb25DbGljayA9IGV2dCA9PiB7XHJcbiAgICBjb25zdCB7IHNob3dTZWxlY3Rpb25Pbmx5IH0gPSB0aGlzLnN0YXRlXHJcbiAgICB0aGlzLnNldFN0YXRlKHsgc2hvd1NlbGVjdGlvbk9ubHk6ICFzaG93U2VsZWN0aW9uT25seSB9KVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlQ2xlYXJTZWxlY3Rpb25DbGljayA9ICgpID0+IHtcclxuICAgIHRoaXMuc2V0U3RhdGUoeyBzaG93U2VsZWN0aW9uT25seTogZmFsc2UgfSlcclxuICAgIHRoaXMuc2VsZWN0UmVjb3JkcyhbXSlcclxuICB9XHJcblxyXG4gIHJlc2V0U2hvd1NlbGVjdGlvblN0YXR1cyA9ICgpID0+IHtcclxuICAgIGNvbnN0IHsgc2hvd1NlbGVjdGlvbk9ubHkgfSA9IHRoaXMuc3RhdGVcclxuICAgIGlmIChzaG93U2VsZWN0aW9uT25seSkge1xyXG4gICAgICB0aGlzLnNldFN0YXRlKHsgc2hvd1NlbGVjdGlvbk9ubHk6IGZhbHNlIH0pXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfZ2V0Q3VycmVudFBhZ2UgPSAoKSA9PiB7XHJcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5wYWdlXHJcbiAgfVxyXG5cclxuICBnZXRUb3RhbENvdW50ID0gKCkgPT4ge1xyXG4gICAgY29uc3QgdG90YWwgPSB0aGlzLnRvdGFsQ291bnQgfHwgMFxyXG4gICAgcmV0dXJuIHRvdGFsXHJcbiAgfVxyXG5cclxuICBzZWxlY3RDYXJkID0gKCkgPT4ge1xyXG4gICAgY29uc3QgeyBzZWxlY3Rpb25Jc0luU2VsZiB9ID0gdGhpcy5wcm9wc1xyXG4gICAgaWYgKHNlbGVjdGlvbklzSW5TZWxmKSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0U2VsZigpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZWxlY3RTZWxmICgpIHtcclxuICAgIHdpbmRvdy5qaW11Q29uZmlnLmlzSW5CdWlsZGVyICYmXHJcbiAgICAgIHRoaXMucHJvcHMuYnVpbGRlclN1cHBvcnRNb2R1bGVzLndpZGdldE1vZHVsZXMuc2VsZWN0U2VsZih0aGlzLnByb3BzKVxyXG4gIH1cclxuXHJcbiAgZWRpdEJ1aWxkZXJBbmRTZXR0aW5nU3RhdHVzID0gKHN0YXR1czogU3RhdHVzKSA9PiB7XHJcbiAgICB0aGlzLmVkaXRTdGF0dXMoJ3Nob3dDYXJkU2V0dGluZycsIHN0YXR1cylcclxuICAgIHRoaXMuZWRpdFN0YXR1cygnYnVpbGRlclN0YXR1cycsIHN0YXR1cylcclxuICB9XHJcblxyXG4gIGVkaXRMaXN0U2l6ZUluUnVuVGltZSA9ICh3aWRnZXRSZWN0OiBFbGVtZW50U2l6ZSkgPT4ge1xyXG4gICAgY29uc3QgeyBpZCwgZGlzcGF0Y2ggfSA9IHRoaXMucHJvcHNcclxuICAgIGRpc3BhdGNoKGFwcEFjdGlvbnMud2lkZ2V0U3RhdGVQcm9wQ2hhbmdlKGlkLCAnd2lkZ2V0UmVjdCcsIHdpZGdldFJlY3QpKVxyXG4gIH1cclxuXHJcbiAgZ2V0U29ydEl0ZW1zID0gKCk6IEltbXV0YWJsZUFycmF5PE15RHJvcERvd25JdGVtPiA9PiB7XHJcbiAgICBjb25zdCB7IGNvbmZpZyB9ID0gdGhpcy5wcm9wc1xyXG4gICAgY29uc3Qgb3B0aW9ucyA9IFtdIGFzIGFueVxyXG4gICAgaWYgKGNvbmZpZy5zb3J0cykge1xyXG4gICAgICBjb25maWcuc29ydHMuZm9yRWFjaChzb3J0ID0+IHtcclxuICAgICAgICBzb3J0LnJ1bGUgJiZcclxuICAgICAgICAgIHNvcnQucnVsZS5mb3JFYWNoKHNvcnREYXRhID0+IHtcclxuICAgICAgICAgICAgaWYgKHNvcnREYXRhICYmICEhc29ydERhdGEuamltdUZpZWxkTmFtZSkge1xyXG4gICAgICAgICAgICAgIG9wdGlvbnMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBsYWJlbDogc29ydC5ydWxlT3B0aW9uTmFtZSxcclxuICAgICAgICAgICAgICAgIGV2ZW50OiB0aGlzLmhhbmRsZVNvcnRPcHRpb25DaGFuZ2VcclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIEltbXV0YWJsZShvcHRpb25zKVxyXG4gIH1cclxuXHJcbiAgZ2V0T3V0cHV0RHMgKCk6IERhdGFTb3VyY2Uge1xyXG4gICAgY29uc3Qgb3V0cHV0RHNJZCA9XHJcbiAgICAgIHRoaXMucHJvcHMub3V0cHV0RGF0YVNvdXJjZXMgJiYgdGhpcy5wcm9wcy5vdXRwdXREYXRhU291cmNlc1swXVxyXG4gICAgY29uc3QgdXNlRHMgPSB0aGlzLnByb3BzLnVzZURhdGFTb3VyY2VzICYmIHRoaXMucHJvcHMudXNlRGF0YVNvdXJjZXNbMF1cclxuICAgIGlmICghb3V0cHV0RHNJZCB8fCAhdXNlRHMpIHJldHVyblxyXG4gICAgY29uc3QgZHNNYW5hZ2VyID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKVxyXG4gICAgcmV0dXJuIGRzTWFuYWdlci5nZXREYXRhU291cmNlKG91dHB1dERzSWQpXHJcbiAgfVxyXG5cclxuICByZW5kZXJMaXN0VG9wVG9vbHMgPSAoZHM6IERhdGFTb3VyY2UsIHF1ZXJ5U3RhdHVzPzogRGF0YVNvdXJjZVN0YXR1cywgc2VsZWN0UmVjb3Jkcz86IERhdGFSZWNvcmRbXSkgPT4ge1xyXG4gICAgY29uc3QgeyB3aWRnZXRSZWN0LCBpc1NlYXJjaEJveFZpc2libGUsIGlzT3BlblRvcFRvb2xzUG9wcGVyIH0gPSB0aGlzLnN0YXRlXHJcbiAgICBjb25zdCBsaXN0V2lkdGggPSB3aWRnZXRSZWN0Py53aWR0aCB8fCA2MjBcclxuICAgIGNvbnN0IGlzU2hvd0RhdGFBY3Rpb24gPSBsaXN0VXRpbHMuY2hlY2tJc1Nob3dEYXRhQWN0aW9uKHRoaXMucHJvcHMpXHJcbiAgICBjb25zdCBpc1Nob3dMaXN0VG9vbHNPbmx5ID0gbGlzdFV0aWxzLmNoZWNrSXNTaG93TGlzdFRvb2xzT25seSh0aGlzLnByb3BzKVxyXG4gICAgY29uc3QgZGF0YU5hbWUgPSB0aGlzLmZvcm1hdE1lc3NhZ2UoJ2xpc3REYXRhQWN0aW9uTGFiZWwnLCB7IGxheWVyOiBkcz8uZ2V0TGFiZWwoKSB8fCAnJyB9KVxyXG4gICAgY29uc3QgTElTVF9UT09MX01JTl9TSVpFID0gaXNTaG93RGF0YUFjdGlvbiA/IExJU1RfVE9PTF9NSU5fU0laRV9EQVRBX0FDVElPTiA6IExJU1RfVE9PTF9NSU5fU0laRV9OT19EQVRBX0FDVElPTlxyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdiBjbGFzc05hbWU9J2RhdGFzb3VyY2UtdG9vbHMgdy0xMDAnIGNzcz17Z2V0VG9wVG9vbFN0eWxlKHRoaXMucHJvcHMsIGlzU2hvd0xpc3RUb29sc09ubHkpfT5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXJcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC1ncm93LTEgdG9vbC1yb3dcIj5cclxuICAgICAgICAgICAge2lzU2hvd0xpc3RUb29sc09ubHkgJiYgPGRpdj5cclxuICAgICAgICAgICAgICB7bGlzdFdpZHRoID49IExJU1RfVE9PTF9NSU5fU0laRSAmJiAoXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndG9vbC1yb3cgcm93MSBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyIHctMTAwIGp1c3RpZnktY29udGVudC1iZXR3ZWVuJz5cclxuICAgICAgICAgICAgICAgICAge3RoaXMucmVuZGVyU2VhcmNoVG9vbHMoZHMsIHF1ZXJ5U3RhdHVzKX1cclxuICAgICAgICAgICAgICAgICAgeyghaXNTZWFyY2hCb3hWaXNpYmxlIHx8IGxpc3RXaWR0aCA+PSAzNjApICYmXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJUb3BSaWdodFRvb2xzKGRzLCBxdWVyeVN0YXR1cyl9XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgIHtsaXN0V2lkdGggPCBMSVNUX1RPT0xfTUlOX1NJWkUgJiYgKFxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2Zsb2F0LXJpZ2h0JyByZWY9e3JlZiA9PiAodGhpcy5yZWZlcmVuY2UgPSByZWYpfT5cclxuICAgICAgICAgICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU9J3RlcnRpYXJ5J1xyXG4gICAgICAgICAgICAgICAgICAgIGljb25cclxuICAgICAgICAgICAgICAgICAgICBzaXplPSdzbSdcclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3Rvb2xzLW1lbnUnXHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9e3RoaXMuZm9ybWF0TWVzc2FnZSgnZ3VpZGVTdGVwOVRpdGxlJyl9XHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17ZXZ0ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpc09wZW5Ub3BUb29sc1BvcHBlcjogIWlzT3BlblRvcFRvb2xzUG9wcGVyIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxNZW51T3V0bGluZWQgc2l6ZT17MTZ9Lz5cclxuICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlckxpc3RUb3BUb29sc0luUG9wZXIoZHMsIHF1ZXJ5U3RhdHVzKX1cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgIDwvZGl2Pn1cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgeyhkcyAmJiBpc1Nob3dEYXRhQWN0aW9uKSAmJiA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnbGlzdC1kYXRhLWFjdGlvbiBwb3NpdGlvbi1yZWxhdGl2ZScsIHsgJ20tbGVmdCc6IGxpc3RXaWR0aCA8IExJU1RfVE9PTF9NSU5fU0laRSB9KX0gZGF0YS10ZXN0aWQ9XCJkYXRhLWFjdGlvblwiPlxyXG4gICAgICAgICAgICA8RGF0YUFjdGlvbkRyb3BEb3duXHJcbiAgICAgICAgICAgICAgdHlwZT0ndGVydGlhcnknXHJcbiAgICAgICAgICAgICAgd2lkZ2V0SWQ9e3RoaXMucHJvcHMuaWR9XHJcbiAgICAgICAgICAgICAgZGF0YVNldD17eyBkYXRhU291cmNlOiBkcywgcmVjb3Jkczogc2VsZWN0UmVjb3JkcywgbmFtZTogZGF0YU5hbWUgfX1cclxuICAgICAgICAgICAgICBzaXplPVwic21cIlxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICAgPC9kaXY+fVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIHt3aW5kb3cuamltdUNvbmZpZy5pc0luQnVpbGRlciAmJiB0aGlzLmlzRWRpdGluZygpICYmIChcclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdlZGl0aW5nLW1hc2stZHMtdG9vbCcgLz5cclxuICAgICAgICApfVxyXG5cclxuICAgICAgPC9kaXY+XHJcbiAgICApXHJcbiAgfVxyXG5cclxuICByZW5kZXJMaXN0VG9wVG9vbHNJblBvcGVyID0gKFxyXG4gICAgZHM6IERhdGFTb3VyY2UsXHJcbiAgICBxdWVyeVN0YXR1cz86IERhdGFTb3VyY2VTdGF0dXNcclxuICApID0+IHtcclxuICAgIGNvbnN0IHsgd2lkZ2V0UmVjdCwgaXNTZWFyY2hCb3hWaXNpYmxlLCBpc09wZW5Ub3BUb29sc1BvcHBlciB9ID0gdGhpcy5zdGF0ZVxyXG4gICAgY29uc3QgdG9vbHNEaXNhYmxlZCA9IHRoaXMuaXNFZGl0aW5nKClcclxuICAgIGNvbnN0IGxpc3RXaWR0aCA9IHdpZGdldFJlY3Q/LndpZHRoIHx8IDYyMFxyXG4gICAgY29uc3QgTElTVF9UT09MX01JTl9TSVpFID0gbGlzdFV0aWxzLmNoZWNrSXNTaG93RGF0YUFjdGlvbih0aGlzLnByb3BzKSA/IExJU1RfVE9PTF9NSU5fU0laRV9EQVRBX0FDVElPTiA6IExJU1RfVE9PTF9NSU5fU0laRV9OT19EQVRBX0FDVElPTlxyXG4gICAgY29uc3QgaXNPcGVuID1cclxuICAgICAgbGlzdFdpZHRoIDwgTElTVF9UT09MX01JTl9TSVpFICYmIGlzT3BlblRvcFRvb2xzUG9wcGVyICYmICF0b29sc0Rpc2FibGVkXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2PlxyXG4gICAgICAgIDxQb3BwZXJcclxuICAgICAgICAgIHBsYWNlbWVudD0nYm90dG9tLXN0YXJ0J1xyXG4gICAgICAgICAgcmVmZXJlbmNlPXt0aGlzLnJlZmVyZW5jZX1cclxuICAgICAgICAgIG9mZnNldD17Wy0xMCwgMF19XHJcbiAgICAgICAgICBvcGVuPXtpc09wZW59XHJcbiAgICAgICAgICBzaG93QXJyb3dcclxuICAgICAgICAgIHRvZ2dsZT17ZSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpc09wZW5Ub3BUb29sc1BvcHBlcjogIWlzT3BlbiB9KVxyXG4gICAgICAgICAgfX1cclxuICAgICAgICA+XHJcbiAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgIGNsYXNzTmFtZT0ndG9vbC1yb3cgcm93MSBkLWZsZXggYWxpZ24taXRlbXMtZW5kIGp1c3RpZnktY29udGVudC1iZXR3ZWVuJ1xyXG4gICAgICAgICAgICBjc3M9e2dldFRvb2xzUG9wcGVyU3R5bGUodGhpcy5wcm9wcyl9XHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIHt0aGlzLnJlbmRlclNlYXJjaFRvb2xzKGRzLCBxdWVyeVN0YXR1cyl9XHJcbiAgICAgICAgICAgIHshaXNTZWFyY2hCb3hWaXNpYmxlICYmIHRoaXMucmVuZGVyVG9wUmlnaHRUb29scyhkcywgcXVlcnlTdGF0dXMpfVxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9Qb3BwZXI+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyU2VhcmNoVG9vbHMgPSAoZHM6IERhdGFTb3VyY2UsIHF1ZXJ5U3RhdHVzPzogRGF0YVNvdXJjZVN0YXR1cykgPT4ge1xyXG4gICAgY29uc3QgdG9vbHNEaXNhYmxlZCA9XHJcbiAgICAgIHRoaXMuaXNFZGl0aW5nKCkgfHwgIWRzIHx8IHF1ZXJ5U3RhdHVzICE9PSBEYXRhU291cmNlU3RhdHVzLkxvYWRlZFxyXG4gICAgY29uc3Qge1xyXG4gICAgICBzZWFyY2hUZXh0LFxyXG4gICAgICB3aWRnZXRSZWN0LFxyXG4gICAgICBpc1NlYXJjaEJveFZpc2libGUsXHJcbiAgICAgIHNob3dMb2FkaW5nXHJcbiAgICB9ID0gdGhpcy5zdGF0ZVxyXG4gICAgY29uc3QgbGlzdFdpZHRoID0gd2lkZ2V0UmVjdD8ud2lkdGggfHwgNjIwXHJcbiAgICBjb25zdCB7IHRoZW1lLCBjb25maWcsIGFwcE1vZGUgfSA9IHRoaXMucHJvcHNcclxuICAgIGNvbnN0IHRvb2xMaW5lQ2xhc3NOYW1lID0gbGlzdFdpZHRoIDwgMzYwID8gJ2RzLXRvb2xzLWxpbmUtYmx1ZScgOiAnJ1xyXG4gICAgY29uc3QgcGxhY2Vob2xkZXIgPSBjb25maWc/LnNlYXJjaEhpbnQgfHwgdGhpcy5mb3JtYXRNZXNzYWdlKCdzZWFyY2gnKVxyXG4gICAgY29uc3QgaXNTaG93QmFja0J1dHRvbiA9IGxpc3RXaWR0aCA8IDM2MCAmJiBpc1NlYXJjaEJveFZpc2libGVcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXZcclxuICAgICAgICBjbGFzc05hbWU9J2xpc3Qtc2VhcmNoLWRpdiBmbGV4LWdyb3ctMSdcclxuICAgICAgICBjc3M9e2dldFNlYXJjaFRvb2xTdHlsZSh0aGlzLnByb3BzKX1cclxuICAgICAgPlxyXG4gICAgICAgIHtsaXN0VXRpbHMuc2hvd1NlYXJjaCh0aGlzLnByb3BzKSAmJiAoXHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZC1mbGV4IHNlYXJjaC1ib3gtY29udGVudCc+XHJcbiAgICAgICAgICAgIHsobGlzdFdpZHRoID49IDM2MCB8fCBpc1NlYXJjaEJveFZpc2libGUpICYmIChcclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleC1ncm93LTEgdy0xMDAnPlxyXG4gICAgICAgICAgICAgICAgPFNlYXJjaEJveFxyXG4gICAgICAgICAgICAgICAgICB0aGVtZT17dGhlbWV9XHJcbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtwbGFjZWhvbGRlcn1cclxuICAgICAgICAgICAgICAgICAgc2VhcmNoVGV4dD17c2VhcmNoVGV4dH1cclxuICAgICAgICAgICAgICAgICAgb25TZWFyY2hUZXh0Q2hhbmdlPXt0aGlzLmhhbmRsZVNlYXJjaFRleHRDaGFuZ2V9XHJcbiAgICAgICAgICAgICAgICAgIG9uU3VibWl0PXt0aGlzLmhhbmRsZVNlYXJjaFN1Ym1pdH1cclxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3Rvb2xzRGlzYWJsZWR9XHJcbiAgICAgICAgICAgICAgICAgIHNlYXJjaFN1Z2dlc3Rpb249e3RoaXMuc3RhdGUuc2VhcmNoU3VnZ2VzdGlvbn1cclxuICAgICAgICAgICAgICAgICAgc3VnZ2VzdGlvbldpZHRoPXtsaXN0V2lkdGh9XHJcbiAgICAgICAgICAgICAgICAgIHNob3dMb2FkaW5nPXtzaG93TG9hZGluZ31cclxuICAgICAgICAgICAgICAgICAgZm9ybWF0TWVzc2FnZT17dGhpcy5mb3JtYXRNZXNzYWdlfVxyXG4gICAgICAgICAgICAgICAgICBpc1Nob3dCYWNrQnV0dG9uPXtpc1Nob3dCYWNrQnV0dG9ufVxyXG4gICAgICAgICAgICAgICAgICB0b2dnbGVTZWFyY2hCb3hWaXNpYmxlPXt0aGlzLnRvZ2dsZVNlYXJjaEJveFZpc2libGV9XHJcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nbGlzdC1zZWFyY2ggJ1xyXG4gICAgICAgICAgICAgICAgICBhcHBNb2RlPXthcHBNb2RlfVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdkcy10b29scy1saW5lJywgdG9vbExpbmVDbGFzc05hbWUpfVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAge2xpc3RXaWR0aCA8IDM2MCAmJiAhaXNTZWFyY2hCb3hWaXNpYmxlICYmIChcclxuICAgICAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgICAgICB0eXBlPSd0ZXJ0aWFyeSdcclxuICAgICAgICAgICAgICAgIGljb25cclxuICAgICAgICAgICAgICAgIHNpemU9J3NtJ1xyXG4gICAgICAgICAgICAgICAgb25DbGljaz17ZXZ0ID0+IHtcclxuICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVTZWFyY2hCb3hWaXNpYmxlKHRydWUpXHJcbiAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgdGl0bGU9e3RoaXMuZm9ybWF0TWVzc2FnZSgnc2VhcmNoJyl9XHJcbiAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPFNlYXJjaE91dGxpbmVkIHNpemU9ezE2fSBjb2xvcj17dGhlbWUuY29sb3JzLnBhbGV0dGUubGlnaHRbODAwXX0vPlxyXG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgICAgICApfVxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKX1cclxuICAgICAgPC9kaXY+XHJcbiAgICApXHJcbiAgfVxyXG5cclxuICB0b2dnbGVTZWFyY2hCb3hWaXNpYmxlID0gKGlzVmlzaWJsZSA9IGZhbHNlKSA9PiB7XHJcbiAgICBjb25zdCB7IHdpZGdldFJlY3QgfSA9IHRoaXMuc3RhdGVcclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICBpc1NlYXJjaEJveFZpc2libGU6IGlzVmlzaWJsZVxyXG4gICAgfSlcclxuICAgIGNvbnN0IExJU1RfVE9PTF9NSU5fU0laRSA9IGxpc3RVdGlscy5jaGVja0lzU2hvd0RhdGFBY3Rpb24odGhpcy5wcm9wcykgPyBMSVNUX1RPT0xfTUlOX1NJWkVfREFUQV9BQ1RJT04gOiBMSVNUX1RPT0xfTUlOX1NJWkVfTk9fREFUQV9BQ1RJT05cclxuICAgIGNvbnN0IGxpc3RXaWR0aCA9IHdpZGdldFJlY3Q/LndpZHRoIHx8IDYyMFxyXG4gICAgaWYgKGxpc3RXaWR0aCA8IExJU1RfVE9PTF9NSU5fU0laRSkge1xyXG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5zaG93UG9wcGVyVGltZU91dClcclxuICAgICAgdGhpcy5zaG93UG9wcGVyVGltZU91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgaXNPcGVuVG9wVG9vbHNQb3BwZXI6IHRydWVcclxuICAgICAgICB9KVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0UGFnZVNpemUgPSAoKSA9PiB7XHJcbiAgICBjb25zdCB7IHdpZGdldFJlY3QgfSA9IHRoaXMuc3RhdGVcclxuICAgIGNvbnN0IHsgY29uZmlnIH0gPSB0aGlzLnByb3BzXHJcbiAgICBjb25zdCBzaG93Qm90dG9tVG9vbCA9IGxpc3RVdGlscy5zaG93Qm90dG9tVG9vbHModGhpcy5wcm9wcywgdGhpcy5zdGF0ZSlcclxuICAgIGNvbnN0IGJvdHRvbVRvb2xIID0gbGlzdFV0aWxzLmdldEJvdHRvbVRvb2xIKFxyXG4gICAgICB0aGlzLnBhZ2luYXRvckRpdi5jdXJyZW50LFxyXG4gICAgICBzaG93Qm90dG9tVG9vbFxyXG4gICAgKVxyXG4gICAgY29uc3Qgc2hvd1RvcFRvb2xzID0gbGlzdFV0aWxzLnNob3dUb3BUb29scyh0aGlzLnByb3BzKVxyXG4gICAgY29uc3QgbGlzdEhlaWdodCA9XHJcbiAgICAgIGxpc3RVdGlscy5nZXRMaXN0SGVpZ2h0KHdpZGdldFJlY3QsIGJvdHRvbVRvb2xILCBzaG93VG9wVG9vbHMpIHx8IDFcclxuICAgIGNvbnN0IGNvbHVtbkNvdW50ID0gY29uZmlnPy5sYXlvdXRUeXBlID09PSBMaXN0TGF5b3V0VHlwZS5HUklEID8gdGhpcy5nZXRJdGVtQ29sdW1uQ291bnQoKSA6IG51bGxcclxuICAgIGNvbnN0IHJlY29yZFNpemVQZXJQYWdlID0gTWF0aC5tYXgoXHJcbiAgICAgIGxpc3RVdGlscy5nZXRQYWdlU2l6ZSh3aWRnZXRSZWN0LCBsaXN0SGVpZ2h0LCB0aGlzLnByb3BzLCBjb2x1bW5Db3VudCksXHJcbiAgICAgIDFcclxuICAgIClcclxuICAgIHJldHVybiByZWNvcmRTaXplUGVyUGFnZVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyVG9wUmlnaHRUb29scyA9IChkczogRGF0YVNvdXJjZSwgcXVlcnlTdGF0dXM/OiBEYXRhU291cmNlU3RhdHVzKSA9PiB7XHJcbiAgICBjb25zdCB7XHJcbiAgICAgIHNvcnRPcHRpb25OYW1lLFxyXG4gICAgICBzaG93U2VsZWN0aW9uT25seSxcclxuICAgICAgY3VycmVudEZpbHRlcixcclxuICAgICAgZmlsdGVyQXBwbGllZFxyXG4gICAgfSA9IHRoaXMuc3RhdGVcclxuICAgIGNvbnN0IHsgY29uZmlnLCB0aGVtZSwgaWQsIGFwcE1vZGUgfSA9IHRoaXMucHJvcHNcclxuICAgIGNvbnN0IHNvcnRJdGVtcyA9IHRoaXMuZ2V0U29ydEl0ZW1zKClcclxuICAgIGNvbnN0IHNlbGVjdGVkUmVjb3JkcyA9IGRzICYmIGRzLmdldFNlbGVjdGVkUmVjb3JkcygpXHJcbiAgICBjb25zdCBoYXNTZWxlY3Rpb24gPSBzZWxlY3RlZFJlY29yZHMgJiYgc2VsZWN0ZWRSZWNvcmRzLmxlbmd0aCA+IDBcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXZcclxuICAgICAgICBjbGFzc05hbWU9J2QtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXIgbXItMSdcclxuICAgICAgICByZWY9e3RoaXMubGlzdFRvcFJpZ2h0VG9vbHNEaXZ9XHJcbiAgICAgID5cclxuICAgICAgICB7bGlzdFV0aWxzLnNob3dTb3J0KHRoaXMucHJvcHMpICYmIChcclxuICAgICAgICAgIDxGcmFnbWVudD5cclxuICAgICAgICAgICAgPE15RHJvcERvd25cclxuICAgICAgICAgICAgICB0aGVtZT17dGhlbWV9XHJcbiAgICAgICAgICAgICAgaXRlbXM9e3NvcnRJdGVtc31cclxuICAgICAgICAgICAgICBhcHBNb2RlPXthcHBNb2RlfVxyXG4gICAgICAgICAgICAgIHRvZ2dsZVR5cGU9J3RlcnRpYXJ5J1xyXG4gICAgICAgICAgICAgIHRvZ2dsZUNvbnRlbnQ9e3RoZW1lID0+XHJcbiAgICAgICAgICAgICAgICBzb3J0T3B0aW9uTmFtZSB8fCAoc29ydEl0ZW1zICYmIHNvcnRJdGVtc1swXS5sYWJlbCl9XHJcbiAgICAgICAgICAgICAgc2l6ZT0nc20nXHJcbiAgICAgICAgICAgICAgY2FyZXRcclxuICAgICAgICAgICAgICBzaG93QWN0aXZlXHJcbiAgICAgICAgICAgICAgdG9nZ2xlVGl0bGU9e3RoaXMuZm9ybWF0TWVzc2FnZSgnbGlzdFNvcnQnKX1cclxuICAgICAgICAgICAgICBhY3RpdmVMYWJlbD17c29ydE9wdGlvbk5hbWUgfHwgKHNvcnRJdGVtcyAmJiBzb3J0SXRlbXNbMF0ubGFiZWwpfVxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICAgPC9GcmFnbWVudD5cclxuICAgICAgICApfVxyXG4gICAgICAgIHtsaXN0VXRpbHMuc2hvd0ZpbHRlcih0aGlzLnByb3BzKSAmJiAoXHJcbiAgICAgICAgICA8RmlsdGVyUGlja2VyXHJcbiAgICAgICAgICAgIGZpbHRlcj17Y3VycmVudEZpbHRlciB8fCBjb25maWcuZmlsdGVyfVxyXG4gICAgICAgICAgICBmaWx0ZXJJbkNvbmZpZz17Y29uZmlnLmZpbHRlcn1cclxuICAgICAgICAgICAgYXBwTW9kZT17YXBwTW9kZX1cclxuICAgICAgICAgICAgYXBwbGllZD17ZmlsdGVyQXBwbGllZH1cclxuICAgICAgICAgICAgdGl0bGU9e3RoaXMuZm9ybWF0TWVzc2FnZSgnZmlsdGVyJyl9XHJcbiAgICAgICAgICAgIHNlbGVjdGVkRHM9e3RoaXMuc3RhdGUuZGF0YXNvdXJjZX1cclxuICAgICAgICAgICAgaGFuZGxlRmlsdGVyQ2hhbmdlPXt0aGlzLmhhbmRsZUZpbHRlckNoYW5nZX1cclxuICAgICAgICAgICAgaGFuZGxlRmlsdGVyQXBwbHlDaGFuZ2U9e3RoaXMuaGFuZGxlRmlsdGVyQXBwbHlDaGFuZ2V9XHJcbiAgICAgICAgICAgIGZvcm1hdE1lc3NhZ2U9e3RoaXMuZm9ybWF0TWVzc2FnZX1cclxuICAgICAgICAgICAgdGhlbWU9e3RoZW1lfVxyXG4gICAgICAgICAgICB3aWRnZXRJZD17aWR9XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgICl9XHJcbiAgICAgICAge2xpc3RVdGlscy5zaG93RGlzcGxheVNlbGVjdGVkT25seSh0aGlzLnByb3BzKSAmJiAoXHJcbiAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgIGRpc2FibGVkPXshaGFzU2VsZWN0aW9ufVxyXG4gICAgICAgICAgICB0eXBlPSd0ZXJ0aWFyeSdcclxuICAgICAgICAgICAgdGl0bGU9e1xyXG4gICAgICAgICAgICAgIHNob3dTZWxlY3Rpb25Pbmx5XHJcbiAgICAgICAgICAgICAgICA/IHRoaXMuZm9ybWF0TWVzc2FnZSgnc2hvd0FsbCcpXHJcbiAgICAgICAgICAgICAgICA6IHRoaXMuZm9ybWF0TWVzc2FnZSgnc2hvd1NlbGVjdGlvbicpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWNvblxyXG4gICAgICAgICAgICBzaXplPSdzbSdcclxuICAgICAgICAgICAgb25DbGljaz17dGhpcy5oYW5kbGVTaG93U2VsZWN0aW9uQ2xpY2t9XHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIHtzaG93U2VsZWN0aW9uT25seSA/IDxNZW51T3V0bGluZWQgc2l6ZT17MTZ9Lz4gOiA8U2hvd1NlbGVjdGlvbk91dGxpbmVkIHNpemU9ezE2fS8+fVxyXG4gICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgKX1cclxuICAgICAgICB7bGlzdFV0aWxzLnNob3dDbGVhclNlbGVjdGVkKHRoaXMucHJvcHMpICYmIChcclxuICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgZGlzYWJsZWQ9eyFoYXNTZWxlY3Rpb259XHJcbiAgICAgICAgICAgIHR5cGU9J3RlcnRpYXJ5J1xyXG4gICAgICAgICAgICB0aXRsZT17dGhpcy5mb3JtYXRNZXNzYWdlKCdjbGVhclNlbGVjdGlvbicpfVxyXG4gICAgICAgICAgICBpY29uXHJcbiAgICAgICAgICAgIHNpemU9J3NtJ1xyXG4gICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmhhbmRsZUNsZWFyU2VsZWN0aW9uQ2xpY2t9XHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIDxUcmFzaENoZWNrT3V0bGluZWQgc2l6ZT17MTZ9Lz5cclxuICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgICl9XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyTGlzdCA9IChkcz86IFF1ZXJpYWJsZURhdGFTb3VyY2UsIGRzSW5mbz86IElNRGF0YVNvdXJjZUluZm8pID0+IHtcclxuICAgIGNvbnN0IHsgd2lkZ2V0UmVjdCwgaXNNb3VudCwgY3VycmVudENhcmRTaXplIH0gPSB0aGlzLnN0YXRlXHJcbiAgICBjb25zdCB7IGNvbmZpZywgaXNSVEwgfSA9IHRoaXMucHJvcHNcclxuICAgIGNvbnN0IHF1ZXJ5U3RhdHVzID0gZHNJbmZvPy5zdGF0dXNcclxuICAgIHRoaXMucXVlcnlTdGF0dXMgPSBxdWVyeVN0YXR1c1xyXG4gICAgdGhpcy5pc0hhc1JlbmRlckxpc3QgPSB0cnVlXHJcblxyXG4gICAgaWYgKCFpc01vdW50KSB7XHJcbiAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG5cclxuICAgIC8vZ2V0IHRvdGFsIGNvdW50XHJcbiAgICBpZiAocXVlcnlTdGF0dXMgPT09IERhdGFTb3VyY2VTdGF0dXMuVW5sb2FkZWQpIHtcclxuICAgICAgZHMgPSB1bmRlZmluZWRcclxuICAgIH1cclxuICAgIHRoaXMuZ2V0RHNUb3RhbENvdW50KGRzLCBxdWVyeVN0YXR1cylcclxuXHJcbiAgICAvL2dldCBsb2FkaW5nIHN0YXR1c1xyXG4gICAgY29uc3Qgc2hvd0xvYWRpbmcgPSB0aGlzLmdldExvYWRpbmdTdGF0dXMoZHMsIHF1ZXJ5U3RhdHVzKVxyXG5cclxuICAgIGNvbnN0IGludGVydmFsID0gZHM/LmdldEF1dG9SZWZyZXNoSW50ZXJ2YWwoKSB8fCAwXHJcbiAgICAvL3RvZ2dsZSBhdXRvIHJlZnJlc2ggbG9hZGluZyBzdGF0dXNcclxuICAgIHRoaXMudG9nZ2xlQXV0b1JlZnJlc2hMb2FkaW5nKGRzLCBzaG93TG9hZGluZylcclxuXHJcbiAgICAvL2dldCBsaXN0IHRvb2xgcyBzaG93IHN0YXR1c1xyXG4gICAgY29uc3Qgc2hvd0JvdHRvbVRvb2wgPSBsaXN0VXRpbHMuc2hvd0JvdHRvbVRvb2xzKHRoaXMucHJvcHMsIHRoaXMuc3RhdGUpXHJcbiAgICBjb25zdCBzaG93VG9wVG9vbHMgPSBsaXN0VXRpbHMuc2hvd1RvcFRvb2xzKHRoaXMucHJvcHMpXHJcblxyXG4gICAgLy9nZXQgbGlzdCBib3R0b20gdG9vbGBzIGhlaWdodFxyXG4gICAgY29uc3QgYm90dG9tVG9vbEggPSBsaXN0VXRpbHMuZ2V0Qm90dG9tVG9vbEgodGhpcy5wYWdpbmF0b3JEaXYuY3VycmVudCwgc2hvd0JvdHRvbVRvb2wpXHJcblxyXG4gICAgLy9nZXQgbGlzdCBzaXplXHJcbiAgICBjb25zdCBsaXN0SGVpZ2h0ID0gbGlzdFV0aWxzLmdldExpc3RIZWlnaHQod2lkZ2V0UmVjdCwgYm90dG9tVG9vbEgsIHNob3dUb3BUb29scykgfHwgMVxyXG4gICAgY29uc3QgbGlzdFdpZHRoID0gKHdpZGdldFJlY3QgJiYgd2lkZ2V0UmVjdC53aWR0aCkgfHwgTElTVF9DQVJEX01JTl9TSVpFXHJcblxyXG4gICAgY29uc3Qgb3ZlcnNjYW5Db3VudCA9IHRoaXMuZ2V0T3ZlcnNjYW5Db3VudChsaXN0SGVpZ2h0KVxyXG5cclxuICAgIC8vIGdldCBuZXcgcmVjb3Jkc1xyXG4gICAgY29uc3Qgc2VsZWN0UmVjb3JkcyA9IHRoaXMuZ2V0RHNTZWxlY3RSZWNvcmRzKGRzKVxyXG4gICAgY29uc3QgcmVjb3JkcyA9IHRoaXMuZ2V0RHNSZWNvcmRzKGRzLCBzaG93TG9hZGluZywgbGlzdEhlaWdodClcclxuXHJcbiAgICB0aGlzLmlzRmlyc3RMb2FkID0gZmFsc2VcclxuXHJcbiAgICAvLyB3aGVuIHJlY29yZC5sZW5ndGggPT0gMCwgc2hvdWxkIHJlc2V0IHNob3cgc2VsZWN0aW9uIGJ1dHRvbiBzdGF0dXMgaW4gbGlzdCB0b3AgdG9vbHNcclxuICAgIGlmIChyZWNvcmRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAvLyB0aGlzLnNjcm9sbFRvSW5kZXgoMCwgJ3N0YXJ0Jyk7XHJcbiAgICAgIHRoaXMucmVzZXRTaG93U2VsZWN0aW9uU3RhdHVzKClcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmdldGxpc3RJbm5lckVsZW1lbnRUeXBlKClcclxuXHJcbiAgICBjb25zdCBsaXN0U3R5bGVzID0gdGhpcy5nZXRMaXN0U3R5bGUoKVxyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdlxyXG4gICAgICAgIGRhdGEtdGVzdGlkPSdsaXN0Q29udGFpbmVyJ1xyXG4gICAgICAgIGNsYXNzTmFtZT0nbGlzdC1jb250YWluZXIgYW5pbWF0aW9uJ1xyXG4gICAgICAgIGNzcz17bGlzdFN0eWxlc31cclxuICAgICAgPlxyXG4gICAgICAgIHsvKiByZW5kZXIgdG9wIHRvb2wgKi99XHJcbiAgICAgICAge3Nob3dUb3BUb29scyAmJiB0aGlzLnJlbmRlckxpc3RUb3BUb29scyhkcywgcXVlcnlTdGF0dXMsIHNlbGVjdFJlY29yZHMpfVxyXG5cclxuICAgICAgICB7LyogcmVuZGVyIEdyaWQgbGlzdCAqL31cclxuICAgICAgICB7KGNvbmZpZz8ubGF5b3V0VHlwZSA9PT0gTGlzdExheW91dFR5cGUuR1JJRCkgJiZcclxuICAgICAgICAgIDxHcmlkXHJcbiAgICAgICAgICAgIGNsYXNzTmFtZT0nd2lkZ2V0LWxpc3QtbGlzdCdcclxuICAgICAgICAgICAgcmVmPXt0aGlzLmxpc3RSZWZ9XHJcbiAgICAgICAgICAgIHVzZUlzU2Nyb2xsaW5nXHJcbiAgICAgICAgICAgIG91dGVyUmVmPXt0aGlzLnNldExpc3RPdXREaXZSZWZ9XHJcbiAgICAgICAgICAgIGRpcmVjdGlvbj17aXNSVEwgPyAncnRsJyA6ICdsdHInfVxyXG4gICAgICAgICAgICBpdGVtQ291bnQ9e3RoaXMucmVjb3Jkcy5sZW5ndGh9XHJcbiAgICAgICAgICAgIG92ZXJzY2FuQ291bnQ9e292ZXJzY2FuQ291bnR9XHJcbiAgICAgICAgICAgIGl0ZW1LZXk9e3RoaXMuZ3JpZEl0ZW1JbmRleH1cclxuICAgICAgICAgICAgY29sdW1uQ291bnQ9e3RoaXMuZ2V0SXRlbUNvbHVtbkNvdW50KCl9XHJcbiAgICAgICAgICAgIGNvbHVtbldpZHRoPXtpbmRleCA9PiB0aGlzLmNvbHVtbldpZHRoKGluZGV4LCBjdXJyZW50Q2FyZFNpemUud2lkdGgsIGNvbmZpZz8uaG9yaXpvbnRhbFNwYWNlKX1cclxuICAgICAgICAgICAgcm93Q291bnQ9e3RoaXMuZ2V0SXRlbVJvd0NvdW50KCl9XHJcbiAgICAgICAgICAgIHJvd0hlaWdodD17aW5kZXggPT4gdGhpcy5yb3dIZWlnaHQoaW5kZXgsIGN1cnJlbnRDYXJkU2l6ZS5oZWlnaHQsIGNvbmZpZz8udmVydGljYWxTcGFjZSl9XHJcbiAgICAgICAgICAgIHdpZHRoPXtsaXN0V2lkdGh9XHJcbiAgICAgICAgICAgIGhlaWdodD17bGlzdEhlaWdodH1cclxuICAgICAgICAgICAgb25JdGVtc1JlbmRlcmVkPXt0aGlzLm9uSXRlbXNSZW5kZXJlZH1cclxuICAgICAgICAgICAgaXRlbURhdGE9e3RoaXMuZ2V0SXRlbXNCeVJlY29yZHModGhpcy5yZWNvcmRzKX1cclxuICAgICAgICAgICAgaW5uZXJFbGVtZW50VHlwZT17dGhpcy5pbm5lckVsZW1lbnRUeXBlfVxyXG4gICAgICAgICAgICBvblNjcm9sbD17dGhpcy5oYW5kbGVMaXN0U2Nyb2xsfVxyXG4gICAgICAgICAgPlxyXG4gICAgICAgICAgICB7dGhpcy5pdGVtUmVuZGVyfVxyXG4gICAgICAgICAgPC9HcmlkPn1cclxuXHJcbiAgICAgICAgICB7LyogcmVuZGVyIFJvdy9jb2x1bW4gbGlzdCAqL31cclxuICAgICAgICAgIHsoY29uZmlnPy5sYXlvdXRUeXBlICE9PSBMaXN0TGF5b3V0VHlwZS5HUklEKSAmJiA8TGlzdFxyXG4gICAgICAgICAgICBjbGFzc05hbWU9J3dpZGdldC1saXN0LWxpc3QnXHJcbiAgICAgICAgICAgIHJlZj17dGhpcy5saXN0UmVmfVxyXG4gICAgICAgICAgICB1c2VJc1Njcm9sbGluZ1xyXG4gICAgICAgICAgICBvdXRlclJlZj17dGhpcy5zZXRMaXN0T3V0RGl2UmVmfVxyXG4gICAgICAgICAgICBkaXJlY3Rpb249e2lzUlRMID8gJ3J0bCcgOiAnbHRyJ31cclxuICAgICAgICAgICAgbGF5b3V0PXtcclxuICAgICAgICAgICAgICBjb25maWcubGF5b3V0VHlwZSA9PT0gTGlzdExheW91dFR5cGUuQ29sdW1uXHJcbiAgICAgICAgICAgICAgICA/ICdob3Jpem9udGFsJ1xyXG4gICAgICAgICAgICAgICAgOiAndmVydGljYWwnXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaXRlbUNvdW50PXt0aGlzLnJlY29yZHMubGVuZ3RofVxyXG4gICAgICAgICAgICBvdmVyc2NhbkNvdW50PXtvdmVyc2NhbkNvdW50fVxyXG4gICAgICAgICAgICBpdGVtS2V5PXt0aGlzLml0ZW1LZXl9XHJcbiAgICAgICAgICAgIHdpZHRoPXtsaXN0V2lkdGh9XHJcbiAgICAgICAgICAgIGhlaWdodD17bGlzdEhlaWdodH1cclxuICAgICAgICAgICAgb25JdGVtc1JlbmRlcmVkPXt0aGlzLm9uSXRlbXNSZW5kZXJlZH1cclxuICAgICAgICAgICAgaXRlbURhdGE9e3RoaXMuZ2V0SXRlbXNCeVJlY29yZHModGhpcy5yZWNvcmRzKX1cclxuICAgICAgICAgICAgaW5uZXJFbGVtZW50VHlwZT17dGhpcy5pbm5lckVsZW1lbnRUeXBlfVxyXG4gICAgICAgICAgICBpdGVtU2l6ZT17dGhpcy5pdGVtU2l6ZX1cclxuICAgICAgICAgICAgb25TY3JvbGw9e3RoaXMuaGFuZGxlTGlzdFNjcm9sbH1cclxuICAgICAgICAgID5cclxuICAgICAgICAgICAge3RoaXMuaXRlbVJlbmRlcn1cclxuICAgICAgICAgIDwvTGlzdD5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHsvKiBtYXNrIHRpcCBhbmQgbG9hZGluZyAqL31cclxuICAgICAgICB7dGhpcy5jaGVja0lzU2hvd0xpc3RNYXNrKHNob3dMb2FkaW5nLCByZWNvcmRzKSAmJiAoXHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZWRpdGluZy1tYXNrLWNvbic+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdlZGl0aW5nLW1hc2stbGlzdCcgLz5cclxuICAgICAgICAgICAge2NvbmZpZz8ubGF5b3V0VHlwZSA9PT0gTGlzdExheW91dFR5cGUuR1JJRCAmJiA8ZGl2IGNsYXNzTmFtZT0nZWRpdGluZy1tYXNrLWxpc3QtZ3JpZCcgLz59XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApfVxyXG5cclxuICAgICAgICB7LyogcmVuZGVyIGJvdHRvbSB0b29scyAqL31cclxuICAgICAgICB7c2hvd0JvdHRvbVRvb2wgJiYgdGhpcy5yZW5kZXJCb3R0b21Ub29scyhzaG93TG9hZGluZyl9XHJcblxyXG4gICAgICAgIHt0aGlzLnJlbmRlckVtcHR5RWxlbWVudChzaG93TG9hZGluZyl9XHJcblxyXG4gICAgICAgIHsvKiByZW5kZXIgbm90IHJlYWR5IHRpcHMgKi99XHJcbiAgICAgICAge3F1ZXJ5U3RhdHVzID09PSBEYXRhU291cmNlU3RhdHVzLk5vdFJlYWR5ICYmIHRoaXMucmVuZGVyTm90UmVhZHlUaXBzKGRzKX1cclxuXHJcbiAgICAgICAgey8qIHJlbmRlciBsb2FkaW5nICovfVxyXG4gICAgICAgIHsoc2hvd0xvYWRpbmcgfHwgaW50ZXJ2YWwgPiAwKSAmJiB0aGlzLnJlbmRlckxvYWRpbmcoc2hvd0xvYWRpbmcsIGludGVydmFsKX1cclxuICAgICAgPC9kaXY+XHJcbiAgICApXHJcbiAgfVxyXG5cclxuICByZW5kZXJFbXB0eUVsZW1lbnQgPSAoc2hvd0xvYWRpbmc6IGJvb2xlYW4pID0+IHtcclxuICAgIGNvbnN0IGlzTm9EYXRhID0gIXRoaXMucmVjb3JkcyB8fCB0aGlzLnJlY29yZHMubGVuZ3RoIDwgMVxyXG4gICAgY29uc3Qgbm9EYXRhTWVzc2FnZSA9IHRoaXMucHJvcHMuY29uZmlnPy5ub0RhdGFNZXNzYWdlIHx8IHRoaXMuZm9ybWF0TWVzc2FnZSgnbm9EYXRhJylcclxuICAgIC8vIGNvbnN0IGlzU2hvd0NsZWFyQWN0aW9uQnV0dG9uID0gaXNOb0RhdGEgJiYgdGhpcy5pc0hhc1B1Ymxpc2hNZXNzYWdlQWN0aW9uXHJcbiAgICByZXR1cm4gKCFzaG93TG9hZGluZyAmJiBpc05vRGF0YSkgJiYgKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nZW1wdHktY29uIHRleHQtY2VudGVyJz5cclxuICAgICAgICA8V2FybmluZ091dGxpbmVkIHNpemU9ezE2fS8+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkaXNjcmlidGlvblwiPntub0RhdGFNZXNzYWdlfTwvZGl2PlxyXG4gICAgICAgIHsvKiB7aXNTaG93Q2xlYXJBY3Rpb25CdXR0b24gJiYgPEJ1dHRvblxyXG4gICAgICAgICAgY2xhc3NOYW1lPVwiY2xlYXItbWVzc2FnZS1hY3Rpb24tYnV0dG9uXCJcclxuICAgICAgICAgIHNpemU9J3NtJ1xyXG4gICAgICAgICAgdGl0bGU9e3RoaXMuZm9ybWF0TWVzc2FnZSgncmVzZXQnKX1cclxuICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuY2xlYXJNZXNzYWdlQWN0aW9ufVxyXG4gICAgICAgID5cclxuICAgICAgICAgIHt0aGlzLmZvcm1hdE1lc3NhZ2UoJ3Jlc2V0Jyl9XHJcbiAgICAgICAgPC9CdXR0b24+fSAqL31cclxuICAgICAgPC9kaXY+XHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBjbGVhck1lc3NhZ2VBY3Rpb24gPSAoKSA9PiB7XHJcbiAgICB0aGlzLmhhbmRsZUNsZWFyU2VsZWN0aW9uQ2xpY2soKVxyXG4gICAgTWVzc2FnZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5wdWJsaXNoTWVzc2FnZShcclxuICAgICAgbmV3IERhdGFSZWNvcmRzU2VsZWN0aW9uQ2hhbmdlTWVzc2FnZSh0aGlzLnByb3BzLmlkLCBbXSlcclxuICAgIClcclxuICB9XHJcblxyXG4gIHJlbmRlckxvYWRpbmcgPSAoc2hvd0xvYWRpbmc6IGJvb2xlYW4sIGludGVydmFsOiBudW1iZXIpID0+IHtcclxuICAgIGNvbnN0IHsgYXV0b1JlZnJlc2hMb2FkaW5nU3RyaW5nIH0gPSB0aGlzLnN0YXRlXHJcbiAgICBjb25zdCB7IGNvbmZpZyB9ID0gdGhpcy5wcm9wc1xyXG4gICAgbGV0IGlzU2hvd0F1dG9SZWZyZXNoID0gY29uZmlnPy5pc1Nob3dBdXRvUmVmcmVzaFxyXG4gICAgaWYgKHR5cGVvZiAoaXNTaG93QXV0b1JlZnJlc2gpICE9PSAnYm9vbGVhbicpIHtcclxuICAgICAgaXNTaG93QXV0b1JlZnJlc2ggPSB0cnVlXHJcbiAgICB9XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2XHJcbiAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKFxyXG4gICAgICAgICAgJ3Bvc2l0aW9uLWFic29sdXRlIHJlZnJlc2gtbG9hZGluZy1jb24gZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlcicsXHJcbiAgICAgICAgICB0aGlzLmdldFJlZnJlc2hMb2FkaW5nQ2xhc3MoKVxyXG4gICAgICAgICl9XHJcbiAgICAgID5cclxuICAgICAgICB7c2hvd0xvYWRpbmcgJiYgPGRpdiBjbGFzc05hbWU9J2xvYWRpbmctY29uJyAvPn1cclxuICAgICAgICB7KGludGVydmFsID4gMCAmJiBpc1Nob3dBdXRvUmVmcmVzaCkgJiYgKFxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXgtZ3Jvdy0xIGF1dG8tcmVmcmVzaC1sb2FkaW5nJz5cclxuICAgICAgICAgICAge2F1dG9SZWZyZXNoTG9hZGluZ1N0cmluZ31cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICl9XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyTm90UmVhZHlUaXBzID0gKGRzPzogUXVlcmlhYmxlRGF0YVNvdXJjZSkgPT4ge1xyXG4gICAgY29uc3QgZGF0YVNvdXJjZUxhYmVsID0gZHM/LmdldExhYmVsKClcclxuICAgIGNvbnN0IG91dHB1dERzV2lkZ2V0SWQgPSBhcHBDb25maWdVdGlscz8uZ2V0V2lkZ2V0SWRCeU91dHB1dERhdGFTb3VyY2UodGhpcy5wcm9wcz8udXNlRGF0YVNvdXJjZXM/LlswXSlcclxuICAgIGNvbnN0IGFwcENvbmZpZyA9IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKT8uYXBwQ29uZmlnXHJcbiAgICBjb25zdCB3aWRnZXRMYWJlbCA9IGFwcENvbmZpZz8ud2lkZ2V0cz8uW291dHB1dERzV2lkZ2V0SWRdPy5sYWJlbFxyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdwbGFjZWhvbGRlci1hbGVydC1jb24nPlxyXG4gICAgICAgIDxBbGVydFxyXG4gICAgICAgICAgZm9ybT0ndG9vbHRpcCdcclxuICAgICAgICAgIHNpemU9J3NtYWxsJ1xyXG4gICAgICAgICAgdHlwZT0nd2FybmluZydcclxuICAgICAgICAgIHRleHQ9e3RoaXMuZm9ybWF0TWVzc2FnZSgnb3V0cHV0RGF0YUlzTm90R2VuZXJhdGVkJywgeyBvdXRwdXREc0xhYmVsOiBkYXRhU291cmNlTGFiZWwsIHNvdXJjZVdpZGdldE5hbWU6IHdpZGdldExhYmVsIH0pfVxyXG4gICAgICAgIC8+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyQm90dG9tVG9vbHMgPSAoc2hvd0xvYWRpbmc6IGJvb2xlYW4pID0+IHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgc2Nyb2xsU3RhdHVzLFxyXG4gICAgICBpc1Njcm9sbEVuZFxyXG4gICAgfSA9IHRoaXMuc3RhdGVcclxuICAgIGNvbnN0IHtcclxuICAgICAgY29uZmlnLFxyXG4gICAgICBpc1JUTFxyXG4gICAgfSA9IHRoaXMucHJvcHNcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXYgcmVmPXt0aGlzLnBhZ2luYXRvckRpdn0+XHJcbiAgICAgICAgPExpc3RCb3R0b21Ub29sc1xyXG4gICAgICAgICAgaXNSVEw9e2lzUlRMfVxyXG4gICAgICAgICAgdG90YWxQYWdlPXt0aGlzLmdldFRvdGFsUGFnZSgpfVxyXG4gICAgICAgICAgY3VycmVudFBhZ2U9e3RoaXMuX2dldEN1cnJlbnRQYWdlKCl9XHJcbiAgICAgICAgICBpc0VkaXRpbmc9e3RoaXMuaXNFZGl0aW5nKCl9XHJcbiAgICAgICAgICBpc1Njcm9sbEVuZD17aXNTY3JvbGxFbmR9XHJcbiAgICAgICAgICBwYWdlU3R5bGU9e2NvbmZpZy5wYWdlU3R5bGV9XHJcbiAgICAgICAgICBsYXlvdXRUeXBlPXtjb25maWc/LmxheW91dFR5cGV9XHJcbiAgICAgICAgICBzY3JvbGxTdGF0dXM9e3Njcm9sbFN0YXR1c31cclxuICAgICAgICAgIGhhbmRsZVNjcm9sbFVwPXt0aGlzLmhhbmRsZVNjcm9sbFVwfVxyXG4gICAgICAgICAgaGFuZGxlU2Nyb2xsRG93bj17dGhpcy5oYW5kbGVTY3JvbGxEb3dufVxyXG4gICAgICAgICAgaGFuZGxlU3dpdGNoUGFnZT17dGhpcy5oYW5kbGVTd2l0Y2hQYWdlfVxyXG4gICAgICAgICAgZm9ybWF0TWVzc2FnZT17dGhpcy5mb3JtYXRNZXNzYWdlfVxyXG4gICAgICAgICAgc2hvd0xvYWRpbmc9e3Nob3dMb2FkaW5nfVxyXG4gICAgICAgIC8+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgZ2V0RHNUb3RhbENvdW50ID0gKGRzPzogUXVlcmlhYmxlRGF0YVNvdXJjZSwgcXVlcnlTdGF0dXM/OiBEYXRhU291cmNlU3RhdHVzKSA9PiB7XHJcbiAgICBjb25zdCBjb3VudCA9IGRzPy5jb3VudFxyXG4gICAgdGhpcy5xdWVyeVN0YXR1cyA9IHF1ZXJ5U3RhdHVzXHJcblxyXG4gICAgLy8gdG90YWwgY291bnRcclxuICAgIGlmIChxdWVyeVN0YXR1cyA9PT0gRGF0YVNvdXJjZVN0YXR1cy5Mb2FkZWQgJiYgY291bnQgIT09IG51bGwpIHtcclxuICAgICAgaWYgKHRoaXMudG90YWxDb3VudCAhPT0gY291bnQpIHtcclxuICAgICAgICB0aGlzLnNldFBhZ2VUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgcGFnZTogMVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9LCAxKVxyXG4gICAgICB9XHJcbiAgICAgIHRoaXMudG90YWxDb3VudCA9IGNvdW50XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRMb2FkaW5nU3RhdHVzID0gKGRzPzogUXVlcmlhYmxlRGF0YVNvdXJjZSwgcXVlcnlTdGF0dXM/OiBEYXRhU291cmNlU3RhdHVzKSA9PiB7XHJcbiAgICBjb25zdCB7IExheW91dEVudHJ5IH0gPSB0aGlzLnN0YXRlXHJcbiAgICBjb25zdCB7IHNob3dMb2FkaW5nOiBtdXN0TG9hZGluZyB9ID0gdGhpcy5wcm9wc1xyXG5cclxuICAgIC8vIGxvYWRpbmdcclxuICAgIGxldCBzaG93TG9hZGluZyA9IGZhbHNlXHJcbiAgICBpZiAoXHJcbiAgICAgIG11c3RMb2FkaW5nIHx8XHJcbiAgICAgICh3aW5kb3cuamltdUNvbmZpZy5pc0luQnVpbGRlciAmJiAhTGF5b3V0RW50cnkpIHx8XHJcbiAgICAgIChkcyAmJiBxdWVyeVN0YXR1cyA9PT0gRGF0YVNvdXJjZVN0YXR1cy5Mb2FkaW5nKVxyXG4gICAgKSB7XHJcbiAgICAgIHNob3dMb2FkaW5nID0gdHJ1ZVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBzaG93TG9hZGluZ1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlQXV0b1JlZnJlc2hMb2FkaW5nID0gKGRzOiBRdWVyaWFibGVEYXRhU291cmNlLCBzaG93TG9hZGluZzogYm9vbGVhbikgPT4ge1xyXG4gICAgY29uc3QgaW50ZXJ2YWwgPSBkcz8uZ2V0QXV0b1JlZnJlc2hJbnRlcnZhbCgpIHx8IDBcclxuICAgIHRoaXMucmVzZXRBdXRvUmVmcmVzaFRpbWVzKGludGVydmFsLCBzaG93TG9hZGluZylcclxuICAgIGlmIChpbnRlcnZhbCA+IDApIHtcclxuICAgICAgdGhpcy5zZXRSZWZyZXNoTG9hZGluZ1N0cmluZyhzaG93TG9hZGluZylcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldExpc3RPdXREaXZSZWYgPSBjdXJyZW50ID0+IHtcclxuICAgIGlmICghY3VycmVudCkgcmV0dXJuXHJcbiAgICBjb25zdCBib3R0b21Cb3VuZGFyeUlkID0gYGJvdHRvbUJvdW5kYXJ5JHt0aGlzLnByb3BzLmlkfWBcclxuICAgIHRoaXMubGlzdE91dERpdlJlZiA9IGN1cnJlbnRcclxuICAgIHRoaXMuc2V0TGlzdERpdlNpemUoKVxyXG4gICAgY29uc3QgYm90dG9tQm91bmRhcnkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgYm90dG9tQm91bmRhcnkuaWQgPSBib3R0b21Cb3VuZGFyeUlkXHJcbiAgICBib3R0b21Cb3VuZGFyeS5jbGFzc05hbWUgPSAnYm90dG9tLWJvdW5kYXJ5J1xyXG4gICAgY29uc3QgbGlzdFNjcm9sbENvbnRlbnQgPSB0aGlzLmxpc3RPdXREaXZSZWYuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2RpdicpWzBdXHJcbiAgICB0aGlzLnNldFNjcm9sbENvbnRlbnRTaXplKClcclxuXHJcbiAgICBsaXN0U2Nyb2xsQ29udGVudC5hcHBlbmRDaGlsZChib3R0b21Cb3VuZGFyeSlcclxuICAgIGxpc3RVdGlscy5pbnRlcnNlY3Rpb25PYnNlcnZlcihcclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYm90dG9tQm91bmRhcnlJZCksXHJcbiAgICAgIHRoaXMubGlzdE91dERpdlJlZixcclxuICAgICAgdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlckNhbGxiYWNrXHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBnZXREc1JlY29yZHMgPSAoZHM6IFF1ZXJpYWJsZURhdGFTb3VyY2UsIHNob3dMb2FkaW5nOiBib29sZWFuLCBsaXN0SGVpZ2h0OiBudW1iZXIpID0+IHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgc2hvd1NlbGVjdGlvbk9ubHksXHJcbiAgICAgIHdpZGdldFJlY3RcclxuICAgIH0gPSB0aGlzLnN0YXRlXHJcbiAgICBjb25zdCB7XHJcbiAgICAgIGNvbmZpZyxcclxuICAgICAgYXBwTW9kZVxyXG4gICAgfSA9IHRoaXMucHJvcHNcclxuICAgIGNvbnN0IGNvbHVtbkNvdW50ID0gY29uZmlnPy5sYXlvdXRUeXBlID09PSBMaXN0TGF5b3V0VHlwZS5HUklEID8gdGhpcy5nZXRJdGVtQ29sdW1uQ291bnQoKSA6IG51bGxcclxuICAgIGNvbnN0IHJlY29yZFNpemVQZXJQYWdlID0gbGlzdFV0aWxzLmdldFBhZ2VTaXplKFxyXG4gICAgICB3aWRnZXRSZWN0LFxyXG4gICAgICBsaXN0SGVpZ2h0LFxyXG4gICAgICB0aGlzLnByb3BzLFxyXG4gICAgICBjb2x1bW5Db3VudFxyXG4gICAgKVxyXG4gICAgY29uc3QgZGVmYXVsdFJlY29yZHMgPSB0aGlzLmdldERlZmF1bHRSZWNvcmRzKHJlY29yZFNpemVQZXJQYWdlKVxyXG4gICAgLy8gZ2V0IG5ldyByZWNvcmRzXHJcbiAgICBsZXQgcmVjb3JkcyA9IGRlZmF1bHRSZWNvcmRzXHJcbiAgICBjb25zdCBzZWxlY3RSZWNvcmRzID0gdGhpcy5nZXREc1NlbGVjdFJlY29yZHMoZHMpXHJcbiAgICBpZiAoZHMgJiYgY29uZmlnLmlzSXRlbVN0eWxlQ29uZmlybSkge1xyXG4gICAgICByZWNvcmRzID1cclxuICAgICAgICAoZHMgJiZcclxuICAgICAgICAgIChjb25maWcucGFnZVN0eWxlID09PSBQYWdlU3R5bGUuU2Nyb2xsXHJcbiAgICAgICAgICAgID8gZHMuZ2V0UmVjb3Jkc0J5UGFnZVdpdGhTZWxlY3Rpb24oMSwgcmVjb3JkU2l6ZVBlclBhZ2UgKiB0aGlzLnN0YXRlLnBhZ2UpXHJcbiAgICAgICAgICAgIDogZHMuZ2V0UmVjb3Jkc0J5UGFnZVdpdGhTZWxlY3Rpb24odGhpcy5zdGF0ZS5wYWdlLCByZWNvcmRTaXplUGVyUGFnZSkpKSB8fFxyXG4gICAgICAgIFtdXHJcbiAgICAgIGlmIChzaG93U2VsZWN0aW9uT25seSkge1xyXG4gICAgICAgIHJlY29yZHMgPSBzZWxlY3RSZWNvcmRzXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChcclxuICAgICAgd2luZG93LmppbXVDb25maWcuaXNJbkJ1aWxkZXIgJiZcclxuICAgICAgYXBwTW9kZSAhPT0gQXBwTW9kZS5SdW4gJiZcclxuICAgICAgIXNob3dMb2FkaW5nICYmXHJcbiAgICAgIHJlY29yZHMubGVuZ3RoIDwgMVxyXG4gICAgKSB7XHJcbiAgICAgIHJlY29yZHMgPSBkZWZhdWx0UmVjb3Jkc1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghc2hvd0xvYWRpbmcgfHwgdGhpcy5pc0ZpcnN0TG9hZCkge1xyXG4gICAgICB0aGlzLnJlY29yZHMgPSByZWNvcmRzXHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVjb3Jkc1xyXG4gIH1cclxuXHJcbiAgZ2V0RGVmYXVsdFJlY29yZHMgPSAocGFnZVNpemU6IG51bWJlciA9IDMpOiBhbnlbXSA9PiB7XHJcbiAgICBwYWdlU2l6ZSA9IChwYWdlU2l6ZSAmJiBwYWdlU2l6ZSA+IDEpID8gcGFnZVNpemUgOiAzXHJcbiAgICBjb25zdCBkZWZhdWx0UmVjb3JkcyA9IFtdXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhZ2VTaXplOyBpKyspIHtcclxuICAgICAgZGVmYXVsdFJlY29yZHMucHVzaChkZWZhdWx0UmVjb3Jkc0l0ZW0pXHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGVmYXVsdFJlY29yZHNcclxuICB9XHJcblxyXG4gIGdldERzU2VsZWN0UmVjb3JkcyA9IChkczogUXVlcmlhYmxlRGF0YVNvdXJjZSkgPT4ge1xyXG4gICAgY29uc3Qge1xyXG4gICAgICBjb25maWdcclxuICAgIH0gPSB0aGlzLnByb3BzXHJcbiAgICAvLyBnZXQgc2VsZWN0IHJlY29yZHNcclxuICAgIGxldCBzZWxlY3RSZWNvcmRzXHJcbiAgICBpZiAoZHMgJiYgY29uZmlnLmlzSXRlbVN0eWxlQ29uZmlybSkge1xyXG4gICAgICBzZWxlY3RSZWNvcmRzID0gZHMuZ2V0U2VsZWN0ZWRSZWNvcmRzKClcclxuICAgIH1cclxuICAgIHJldHVybiBzZWxlY3RSZWNvcmRzXHJcbiAgfVxyXG5cclxuICBnZXRsaXN0SW5uZXJFbGVtZW50VHlwZSA9ICgpID0+IHtcclxuICAgIGNvbnN0IHsgY29uZmlnIH0gPSB0aGlzLnByb3BzXHJcbiAgICBjb25zdCBzcGFjZSA9IGNvbmZpZz8ubGF5b3V0VHlwZSA9PT0gTGlzdExheW91dFR5cGUuR1JJRCA/IGNvbmZpZz8udmVydGljYWxTcGFjZSA6IGNvbmZpZz8uc3BhY2VcclxuICAgIGlmICh0aGlzLmxhc3RTcGFjZSAhPT0gc3BhY2UpIHtcclxuICAgICAgdGhpcy5sYXN0U3BhY2UgPSBzcGFjZVxyXG4gICAgICB0aGlzLmlubmVyRWxlbWVudFR5cGUgPSBmb3J3YXJkUmVmKCh7IHN0eWxlLCAuLi5yZXN0IH0sIHJlZikgPT4gKFxyXG4gICAgICAgIDxkaXZcclxuICAgICAgICAgIHJlZj17cmVmfVxyXG4gICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgLi4uc3R5bGUsXHJcbiAgICAgICAgICAgIGhlaWdodDogYCR7cGFyc2VGbG9hdChzdHlsZS5oZWlnaHQpIC1cclxuICAgICAgICAgICAgICAoY29uZmlnLmxheW91dFR5cGUgPT09IExpc3RMYXlvdXRUeXBlLkNvbHVtblxyXG4gICAgICAgICAgICAgICAgPyAwXHJcbiAgICAgICAgICAgICAgICA6IHNwYWNlKX1weGAsXHJcbiAgICAgICAgICAgIHdpZHRoOiBgJHtwYXJzZUZsb2F0KHN0eWxlLndpZHRoKSAtXHJcbiAgICAgICAgICAgICAgKGNvbmZpZy5sYXlvdXRUeXBlICE9PSBMaXN0TGF5b3V0VHlwZS5Db2x1bW5cclxuICAgICAgICAgICAgICAgID8gMFxyXG4gICAgICAgICAgICAgICAgOiBzcGFjZSl9cHhgXHJcbiAgICAgICAgICB9fVxyXG4gICAgICAgICAgey4uLnJlc3R9XHJcbiAgICAgICAgLz5cclxuICAgICAgKSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldExpc3RTdHlsZSA9ICgpID0+IHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgdG9vbHNEaXZXaWR0aCxcclxuICAgICAgY3VycmVudENhcmRTaXplLFxyXG4gICAgICB3aWRnZXRSZWN0XHJcbiAgICB9ID0gdGhpcy5zdGF0ZVxyXG4gICAgY29uc3Qge1xyXG4gICAgICBjb25maWcsXHJcbiAgICAgIGFwcE1vZGUsXHJcbiAgICAgIHRoZW1lLFxyXG4gICAgICBpc0hlaWdodEF1dG8sXHJcbiAgICAgIGlzV2lkdGhBdXRvXHJcbiAgICB9ID0gdGhpcy5wcm9wc1xyXG5cclxuICAgIGNvbnN0IHNob3dCb3R0b21Ub29sID0gbGlzdFV0aWxzLnNob3dCb3R0b21Ub29scyh0aGlzLnByb3BzLCB0aGlzLnN0YXRlKVxyXG4gICAgY29uc3QgYm90dG9tVG9vbEggPSBsaXN0VXRpbHMuZ2V0Qm90dG9tVG9vbEgoXHJcbiAgICAgIHRoaXMucGFnaW5hdG9yRGl2LmN1cnJlbnQsXHJcbiAgICAgIHNob3dCb3R0b21Ub29sXHJcbiAgICApXHJcbiAgICBjb25zdCBzaG93VG9wVG9vbHMgPSBsaXN0VXRpbHMuc2hvd1RvcFRvb2xzKHRoaXMucHJvcHMpXHJcbiAgICBjb25zdCBsaXN0VGVtcGxhdGVEZWZhdWx0Q2FyZFNpemUgPSBsaXN0VXRpbHMuZ2V0Q2FyZFNpemVOdW1iZXJJbkNvbmZpZyh0aGlzLnByb3BzLCB3aWRnZXRSZWN0KVxyXG4gICAgY29uc3QgbGlzdFN0eWxlT3B0aW9uID0ge1xyXG4gICAgICBwYWdlU3R5bGU6IGNvbmZpZz8ucGFnZVN0eWxlLFxyXG4gICAgICBzY3JvbGxCYXJPcGVuOiBjb25maWc/LnNjcm9sbEJhck9wZW4sXHJcbiAgICAgIGRpcmVjdGlvbjogY29uZmlnPy5kaXJlY3Rpb24sXHJcbiAgICAgIGFwcE1vZGU6IGFwcE1vZGUsXHJcbiAgICAgIHRoZW1lOiB0aGVtZSxcclxuICAgICAgaXNIZWlnaHRBdXRvOiBpc0hlaWdodEF1dG8sXHJcbiAgICAgIGlzV2lkdGhBdXRvOiBpc1dpZHRoQXV0byxcclxuICAgICAgY3VycmVudENhcmRTaXplOiBjdXJyZW50Q2FyZFNpemUsXHJcbiAgICAgIGxpc3RUZW1wbGF0ZURlZmF1bHRDYXJkU2l6ZTogbGlzdFRlbXBsYXRlRGVmYXVsdENhcmRTaXplLFxyXG4gICAgICBzaG93VG9wVG9vbHM6IHNob3dUb3BUb29scyxcclxuICAgICAgYm90dG9tVG9vbEg6IGJvdHRvbVRvb2xILFxyXG4gICAgICB0b3BSaWdodFRvb2xXOiB0b29sc0RpdldpZHRoLFxyXG4gICAgICBoYXNSZWNvcmRzOiAodGhpcy5yZWNvcmRzPy5sZW5ndGggPz8gMCkgPiAwLFxyXG4gICAgICBtZXhTaXplOiB0aGlzLmdldExpc3RNYXhTaXplKCksXHJcbiAgICAgIGxheW91dFR5cGU6IGNvbmZpZz8ubGF5b3V0VHlwZSxcclxuICAgICAgbGlzdExlZnRQYWRkaW5nOiB0aGlzLmdldExpc3RDb250ZW50TGVmdFBhZGRpbmcoKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGxpc3RTdHlsZShsaXN0U3R5bGVPcHRpb24pXHJcbiAgfVxyXG5cclxuICBjaGVja0lzU2hvd0xpc3RNYXNrID0gKHNob3dMb2FkaW5nOiBib29sZWFuLCByZWNvcmRzOiBEYXRhUmVjb3JkW10pID0+IHtcclxuICAgIGNvbnN0IHsgaXNJbkJ1aWxkZXIgfSA9IHdpbmRvdy5qaW11Q29uZmlnXHJcbiAgICBjb25zdCBpc0VkaXRpbmcgPSB0aGlzLmlzRWRpdGluZygpXHJcbiAgICBjb25zdCBpc05vRGF0YSA9ICFyZWNvcmRzIHx8IHJlY29yZHMubGVuZ3RoIDwgMVxyXG4gICAgY29uc3QgaXNEYXRhTG9hZGVkQW5kSGFzRGF0YSA9ICEoIXNob3dMb2FkaW5nICYmIGlzTm9EYXRhKVxyXG4gICAgcmV0dXJuIGlzSW5CdWlsZGVyICYmIGlzRWRpdGluZyAmJiBpc0RhdGFMb2FkZWRBbmRIYXNEYXRhXHJcbiAgfVxyXG5cclxuICBnZXRPdmVyc2NhbkNvdW50ID0gKGxpc3RIZWlnaHQpID0+IHtcclxuICAgIGNvbnN0IHsgd2lkZ2V0UmVjdCB9ID0gdGhpcy5zdGF0ZVxyXG4gICAgY29uc3QgeyBhcHBNb2RlLCBjb25maWcgfSA9IHRoaXMucHJvcHNcclxuICAgIGNvbnN0IGNvbHVtbkNvdW50ID0gY29uZmlnPy5sYXlvdXRUeXBlID09PSBMaXN0TGF5b3V0VHlwZS5HUklEID8gdGhpcy5nZXRJdGVtQ29sdW1uQ291bnQoKSA6IG51bGxcclxuICAgIGNvbnN0IHJlY29yZFNpemVQZXJQYWdlID0gbGlzdFV0aWxzLmdldFBhZ2VTaXplKFxyXG4gICAgICB3aWRnZXRSZWN0LFxyXG4gICAgICBsaXN0SGVpZ2h0LFxyXG4gICAgICB0aGlzLnByb3BzLFxyXG4gICAgICBjb2x1bW5Db3VudFxyXG4gICAgKVxyXG4gICAgY29uc3Qgb3ZlcnNjYW5Db3VudCA9XHJcbiAgICAgIHdpbmRvdy5qaW11Q29uZmlnLmlzSW5CdWlsZGVyICYmIGFwcE1vZGUgIT09IEFwcE1vZGUuUnVuXHJcbiAgICAgICAgPyAwXHJcbiAgICAgICAgOiByZWNvcmRTaXplUGVyUGFnZVxyXG4gICAgcmV0dXJuIG92ZXJzY2FuQ291bnRcclxuICB9XHJcblxyXG4gIHNldFNjcm9sbENvbnRlbnRTaXplID0gKCkgPT4ge1xyXG4gICAgaWYgKCF0aGlzLmxpc3RPdXREaXZSZWYpIHJldHVyblxyXG4gICAgY29uc3QgeyBsYXlvdXRUeXBlIH0gPSB0aGlzLnByb3BzPy5jb25maWdcclxuICAgIGNvbnN0IGxpc3RTY3JvbGxDb250ZW50ID0gdGhpcy5saXN0T3V0RGl2UmVmLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdkaXYnKVswXVxyXG5cclxuICAgIGlmIChsYXlvdXRUeXBlID09PSBMaXN0TGF5b3V0VHlwZS5Db2x1bW4pIHtcclxuICAgICAgbGlzdFNjcm9sbENvbnRlbnQuc3R5bGUuaGVpZ2h0ID0gJzEwMCUnXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBsaXN0U2Nyb2xsQ29udGVudC5zdHlsZS53aWR0aCA9ICcxMDAlJ1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaW50ZXJzZWN0aW9uT2JzZXJ2ZXJDYWxsYmFjayA9IChpc1Njcm9sbEVuZDogYm9vbGVhbikgPT4ge1xyXG4gICAgY29uc3QgeyBhcHBNb2RlLCBjb25maWcgfSA9IHRoaXMucHJvcHNcclxuICAgIGNvbnN0IGxpc3REaXYgPSB0aGlzLmxpc3RPdXREaXZSZWZcclxuICAgIGNvbnN0IHsgZGF0YXNvdXJjZSB9ID0gdGhpcy5zdGF0ZVxyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIGlzU2Nyb2xsRW5kOiBpc1Njcm9sbEVuZFxyXG4gICAgfSlcclxuICAgIGlmICghbGlzdERpdiB8fCAodGhpcy5yZWNvcmRzPy5sZW5ndGggPz8gMCkgPCAxKSByZXR1cm5cclxuICAgIGlmIChcclxuICAgICAgY29uZmlnLnBhZ2VTdHlsZSA9PT0gUGFnZVN0eWxlLlNjcm9sbCAmJlxyXG4gICAgICB0aGlzLnF1ZXJ5U3RhdHVzICE9PSBEYXRhU291cmNlU3RhdHVzLkxvYWRpbmcgJiZcclxuICAgICAgZGF0YXNvdXJjZSAmJlxyXG4gICAgICAoIXdpbmRvdy5qaW11Q29uZmlnLmlzSW5CdWlsZGVyIHx8XHJcbiAgICAgICAgKGFwcE1vZGUgPT09IEFwcE1vZGUuUnVuICYmIGlzU2Nyb2xsRW5kKSkgJiZcclxuICAgICAgdGhpcy5pc0hhc1Njcm9sbGVkXHJcbiAgICApIHtcclxuICAgICAgaWYgKHRoaXMucmVjb3Jkcy5sZW5ndGggPCB0aGlzLmdldFRvdGFsQ291bnQoKSkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgcGFnZTogdGhpcy5zdGF0ZS5wYWdlICsgMSxcclxuICAgICAgICAgIHNjcm9sbFN0YXR1czogJ2VuZCdcclxuICAgICAgICB9KVxyXG4gICAgICAgIHRoaXMuaXNTd2l0Y2hQYWdlID0gdHJ1ZVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgc2Nyb2xsU3RhdHVzOiAnZW5kJ1xyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldExpc3REaXZTaXplID0gKCkgPT4ge1xyXG4gICAgY29uc3QgbGlzdERpdiA9IHRoaXMubGlzdE91dERpdlJlZlxyXG4gICAgY29uc3QgY2xpZW50V2lkdGggPSBsaXN0RGl2Py5jbGllbnRXaWR0aCB8fCBudWxsXHJcbiAgICBjb25zdCBjbGllbnRIZWlnaHQgPSBsaXN0RGl2Py5jbGllbnRIZWlnaHQgfHwgbnVsbFxyXG4gICAgY29uc3QgdG9vbHNEaXZXaWR0aCA9IHRoaXMubGlzdFRvcFJpZ2h0VG9vbHNEaXYuY3VycmVudD8uY2xpZW50V2lkdGggfHwgMFxyXG4gICAgY29uc3QgbGlzdERpdkJvdW5kUmVjdCA9IGxpc3REaXY/LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpIHx8IG51bGxcclxuICAgIGNvbnN0IGxpc3REaXZTaXplID0ge1xyXG4gICAgICBjbGllbnRXaWR0aDogY2xpZW50V2lkdGgsXHJcbiAgICAgIGNsaWVudEhlaWdodDogY2xpZW50SGVpZ2h0XHJcbiAgICB9XHJcbiAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgbGlzdERpdlNpemU6IGxpc3REaXZTaXplLFxyXG4gICAgICB0b29sc0RpdldpZHRoOiB0b29sc0RpdldpZHRoLFxyXG4gICAgICBsaXN0RGl2Qm91bmRSZWN0OiBsaXN0RGl2Qm91bmRSZWN0XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgZ2V0Q29udGVudExheW91dCA9ICgpID0+IHtcclxuICAgIGNvbnN0IHsgbGF5b3V0SWQsIGJyb3dzZXJTaXplTW9kZSB9ID0gdGhpcy5wcm9wc1xyXG4gICAgY29uc3QgYXBwQ29uZmlnID0gZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpLmFwcENvbmZpZ1xyXG4gICAgY29uc3QgY29udGVudFdpZGdldElkID0gc2VhcmNoVXRpbHMuZ2V0V2lkZ2V0SWRUaGF0VXNlVGhlTGF5b3V0SWQoXHJcbiAgICAgIGFwcENvbmZpZyxcclxuICAgICAgbGF5b3V0SWRcclxuICAgIClcclxuICAgIGNvbnN0IGNvbnRlbnRMYXlvdXRzSW5mbyA9IHNlYXJjaFV0aWxzLmdldENvbnRlbnRMYXlvdXRJbmZvc0luT25lU2l6ZU1vZGUoXHJcbiAgICAgIGFwcENvbmZpZyxcclxuICAgICAgY29udGVudFdpZGdldElkLFxyXG4gICAgICBMYXlvdXRJdGVtVHlwZS5XaWRnZXQsXHJcbiAgICAgIGJyb3dzZXJTaXplTW9kZVxyXG4gICAgKVxyXG4gICAgcmV0dXJuIGNvbnRlbnRMYXlvdXRzSW5mb1xyXG4gIH1cclxuXHJcbiAgZ2V0Q29udGVudExheW91dFNldHRpbmcgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBhcHBDb25maWcgPSBnZXRBcHBTdG9yZSgpLmdldFN0YXRlKCkuYXBwQ29uZmlnXHJcbiAgICBjb25zdCB7IGxheW91dHMgfSA9IGFwcENvbmZpZ1xyXG4gICAgY29uc3QgY29udGVudExheW91dHNJbmZvID0gdGhpcy5nZXRDb250ZW50TGF5b3V0KClcclxuICAgIGNvbnN0IGNvbnRlbnRMYXlvdXRJZCA9IGNvbnRlbnRMYXlvdXRzSW5mbz8uWzBdPy5sYXlvdXRJZFxyXG4gICAgY29uc3QgY29udGVudExheW91dEl0ZW1JZCA9IGNvbnRlbnRMYXlvdXRzSW5mbz8uWzBdPy5sYXlvdXRJdGVtSWRcclxuICAgIGNvbnN0IHNldHRpbmcgPVxyXG4gICAgICBsYXlvdXRzPy5bY29udGVudExheW91dElkXT8uY29udGVudD8uW2NvbnRlbnRMYXlvdXRJdGVtSWRdPy5zZXR0aW5nXHJcbiAgICByZXR1cm4gc2V0dGluZ1xyXG4gIH1cclxuXHJcbiAgZ2V0TGlzdE1heFNpemUgPSAoKSA9PiB7XHJcbiAgICBjb25zdCB7IGJvdW5kaW5nQm94LCBoZWlnaHRMYXlvdXRJdGVtU2l6ZU1vZGVzLCBsYXlvdXRJZCwgYXBwTW9kZSB9ID0gdGhpcy5wcm9wc1xyXG4gICAgY29uc3QgREVTSUdOX1NJWkUgPSA2MDBcclxuICAgIGNvbnN0IGlzTGlzdEhlaWdodEN1c3RvbSA9IGhlaWdodExheW91dEl0ZW1TaXplTW9kZXMgPT09IExheW91dEl0ZW1TaXplTW9kZXMuQ3VzdG9tICYmIGJvdW5kaW5nQm94Py5oZWlnaHRcclxuICAgIGNvbnN0IGJvZHlIZWlnaHQgPSBhcHBNb2RlID09PSBBcHBNb2RlLkRlc2lnbiA/IERFU0lHTl9TSVpFIDogdGhpcy5ib2R5U2l6ZS5jbGllbnRIZWlnaHRcclxuICAgIGNvbnN0IG1heGhlaWdodCA9IGlzTGlzdEhlaWdodEN1c3RvbSA/IGJvdW5kaW5nQm94Py5oZWlnaHQgOiBib2R5SGVpZ2h0XHJcbiAgICBjb25zdCBpc0xpc3RIZWlnaHRDdXN0b21Vbml0UFggPSBpc0xpc3RIZWlnaHRDdXN0b20gJiYgIShib3VuZGluZ0JveD8uaGVpZ2h0Py5pbmNsdWRlcyAmJiBib3VuZGluZ0JveD8uaGVpZ2h0Py5pbmNsdWRlcygnJScpKVxyXG4gICAgbGV0IG1heFNpemUgPSBJbW11dGFibGUoe1xyXG4gICAgICBtYXhXaWR0aDogdGhpcy5ib2R5U2l6ZS5zY3JvbGxXaWR0aCxcclxuICAgICAgbWF4SGVpZ2h0OiBtYXhoZWlnaHRcclxuICAgIH0pXHJcbiAgICBjb25zdCBhcHBDb25maWcgPSBnZXRBcHBTdG9yZSgpLmdldFN0YXRlKCkuYXBwQ29uZmlnXHJcbiAgICBjb25zdCB7IGxheW91dHMgfSA9IGFwcENvbmZpZ1xyXG4gICAgY29uc3QgdHlwZSA9IGxheW91dHNbbGF5b3V0SWRdPy50eXBlXHJcbiAgICBjb25zdCBzZXR0aW5nID0gdGhpcy5nZXRDb250ZW50TGF5b3V0U2V0dGluZygpXHJcbiAgICBjb25zdCBpc0NvbnRlbnRXaWR0aEF1dG8gPVxyXG4gICAgICBzZXR0aW5nPy5hdXRvUHJvcHM/LndpZHRoID09PSAnYXV0bycgfHwgc2V0dGluZz8ud2lkdGhNb2RlID09PSAnYXV0bydcclxuICAgIGNvbnN0IGlzQ29udGVudEhlaWdodEF1dG8gPVxyXG4gICAgICBzZXR0aW5nPy5hdXRvUHJvcHM/LmhlaWdodCA9PT0gJ2F1dG8nIHx8IHNldHRpbmc/LmhlaWdodE1vZGUgPT09ICdhdXRvJ1xyXG4gICAgaWYgKHR5cGUgPT09IExheW91dFR5cGUuQ29sdW1uTGF5b3V0ICYmIGlzQ29udGVudFdpZHRoQXV0bykge1xyXG4gICAgICBtYXhTaXplID0gbWF4U2l6ZS5zZXQoJ21heFdpZHRoJywgdGhpcy5ib2R5U2l6ZS5jbGllbnRXaWR0aClcclxuICAgIH1cclxuICAgIGlmICgodHlwZSBhcyBhbnkpID09PSAnUk9XJyAmJiBpc0NvbnRlbnRIZWlnaHRBdXRvICYmICFpc0xpc3RIZWlnaHRDdXN0b21Vbml0UFgpIHtcclxuICAgICAgY29uc3QgbWF4SGVpZ2h0ID0gYXBwTW9kZSA9PT0gQXBwTW9kZS5EZXNpZ24gPyBERVNJR05fU0laRSA6IHRoaXMuYm9keVNpemUuY2xpZW50SGVpZ2h0XHJcbiAgICAgIG1heFNpemUgPSBtYXhTaXplLnNldCgnbWF4SGVpZ2h0JywgbWF4SGVpZ2h0KVxyXG4gICAgfVxyXG4gICAgbWF4U2l6ZSA9IG1heFNpemUuc2V0KCdtYXhIZWlnaHQnLCB0aGlzLmluaXRFbGVtZW50U2l6ZShtYXhTaXplLm1heEhlaWdodCkpXHJcbiAgICBtYXhTaXplID0gbWF4U2l6ZS5zZXQoJ21heFdpZHRoJywgdGhpcy5pbml0RWxlbWVudFNpemUobWF4U2l6ZS5tYXhXaWR0aCkpXHJcbiAgICByZXR1cm4gbWF4U2l6ZVxyXG4gIH1cclxuXHJcbiAgaW5pdEVsZW1lbnRTaXplID0gKHNpemUpID0+IHtcclxuICAgIGlmIChOdW1iZXIoc2l6ZSkpIHtcclxuICAgICAgcmV0dXJuIGAke3NpemV9cHhgXHJcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiAoc2l6ZSkgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIGlmIChzaXplPy5pbmNsdWRlcygncHgnKSB8fCBzaXplPy5pbmNsdWRlcygncmVtJykpIHtcclxuICAgICAgICByZXR1cm4gc2l6ZVxyXG4gICAgICB9IGVsc2UgaWYgKHNpemU/LmluY2x1ZGVzKCclJykpIHtcclxuICAgICAgICByZXR1cm4gJzEwMCUnXHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBzaXplXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRSZWZyZXNoTG9hZGluZ0NsYXNzID0gKCkgPT4ge1xyXG4gICAgY29uc3QgeyBjb25maWcsIGFwcE1vZGUgfSA9IHRoaXMucHJvcHNcclxuICAgIGNvbnN0IHsgc2Nyb2xsQmFyT3BlbiwgbGF5b3V0VHlwZSB9ID0gY29uZmlnXHJcbiAgICBjb25zdCBpc0VkaXRvciA9IHdpbmRvdy5qaW11Q29uZmlnLmlzSW5CdWlsZGVyICYmIGFwcE1vZGUgPT09IEFwcE1vZGUuRGVzaWduXHJcbiAgICBpZiAoIXNjcm9sbEJhck9wZW4gfHwgaXNFZGl0b3IpIHtcclxuICAgICAgcmV0dXJuICcnXHJcbiAgICB9XHJcbiAgICBpZiAobGF5b3V0VHlwZSA9PT0gTGlzdExheW91dFR5cGUuQ29sdW1uKSB7XHJcbiAgICAgIHJldHVybiAnaG9yaXpvbi1sb2FkaW5nJ1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuICd2ZXJ0aWNhbC1sb2FkaW5nJ1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVzZXRBdXRvUmVmcmVzaFRpbWVzID0gKGludGVydmFsOiBudW1iZXIsIHNob3dMb2FkaW5nID0gZmFsc2UpID0+IHtcclxuICAgIGNsZWFyVGltZW91dCh0aGlzLnJlc2V0QXV0b1JlZnJlc2hUaW1lKVxyXG4gICAgaWYgKGludGVydmFsIDw9IDApIHtcclxuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmF1dG9SZWZyZXNoTG9hZGluZ1RpbWUpXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5yZXNldEF1dG9SZWZyZXNoVGltZSA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICBpZiAoc2hvd0xvYWRpbmcgJiYgaW50ZXJ2YWwgPiAwKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICBhdXRvUmVmcmVzaExvYWRpbmdTdHJpbmc6IHRoaXMuZm9ybWF0TWVzc2FnZSgnbGFzdFVwZGF0ZUFGZXdUaW1lJylcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgIHNob3dMb2FkaW5nOiBzaG93TG9hZGluZ1xyXG4gICAgICB9KVxyXG4gICAgfSwgMClcclxuICB9XHJcblxyXG4gIHNldFJlZnJlc2hMb2FkaW5nU3RyaW5nID0gKHNob3dMb2FkaW5nID0gZmFsc2UpID0+IHtcclxuICAgIGlmICghc2hvd0xvYWRpbmcpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHRpbWUgPSAwXHJcbiAgICBjbGVhckludGVydmFsKHRoaXMuYXV0b1JlZnJlc2hMb2FkaW5nVGltZSlcclxuXHJcbiAgICB0aGlzLmF1dG9SZWZyZXNoTG9hZGluZ1RpbWUgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgIHRpbWUrK1xyXG5cclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgYXV0b1JlZnJlc2hMb2FkaW5nU3RyaW5nOiB0aGlzLmdldExvYWRpbmdTdHJpbmcodGltZSlcclxuICAgICAgfSlcclxuICAgIH0sIDYwMDAwKVxyXG4gIH1cclxuXHJcbiAgZ2V0TG9hZGluZ1N0cmluZyA9ICh0aW1lOiBudW1iZXIpOiBzdHJpbmcgPT4ge1xyXG4gICAgbGV0IGxvYWRpbmdTdHJpbmcgPSB0aGlzLmZvcm1hdE1lc3NhZ2UoJ2xhc3RVcGRhdGVBRmV3VGltZScpXHJcbiAgICBpZiAodGltZSA+IDEgJiYgdGltZSA8PSAyKSB7XHJcbiAgICAgIGxvYWRpbmdTdHJpbmcgPSB0aGlzLmZvcm1hdE1lc3NhZ2UoJ2xhc3RVcGRhdGVBTWludXRlJylcclxuICAgIH0gZWxzZSBpZiAodGltZSA+IDIpIHtcclxuICAgICAgbG9hZGluZ1N0cmluZyA9IHRoaXMuZm9ybWF0TWVzc2FnZSgnbGFzdFVwZGF0ZVRpbWUnLCB7IHVwZGF0ZVRpbWU6IHRpbWUgfSlcclxuICAgIH1cclxuICAgIHJldHVybiBsb2FkaW5nU3RyaW5nXHJcbiAgfVxyXG5cclxuICBvbkl0ZW1zUmVuZGVyZWQgPSAoe1xyXG4gICAgb3ZlcnNjYW5TdGFydEluZGV4LFxyXG4gICAgb3ZlcnNjYW5TdG9wSW5kZXgsXHJcbiAgICB2aXNpYmxlU3RhcnRJbmRleCxcclxuICAgIHZpc2libGVTdG9wSW5kZXgsXHJcbiAgICB2aXNpYmxlQ29sdW1uU3RhcnRJbmRleCxcclxuICAgIHZpc2libGVDb2x1bW5TdG9wSW5kZXgsXHJcbiAgICB2aXNpYmxlUm93U3RhcnRJbmRleCxcclxuICAgIHZpc2libGVSb3dTdG9wSW5kZXhcclxuICB9KSA9PiB7XHJcbiAgICBjb25zdCB7IGNvbmZpZyB9ID0gdGhpcy5wcm9wc1xyXG4gICAgLy8gQWxsIGluZGV4IHBhcmFtcyBhcmUgbnVtYmVycy5cclxuICAgIHRoaXMubGlzdFZpc2libGVTdGFydEluZGV4ID0gY29uZmlnPy5sYXlvdXRUeXBlID09PSBMaXN0TGF5b3V0VHlwZS5HUklEID8gdGhpcy5nZXRJdGVtSW5kZXhCeVJvd0FuZENvbHVtbkluZGV4KHZpc2libGVSb3dTdGFydEluZGV4LCB2aXNpYmxlQ29sdW1uU3RhcnRJbmRleCkgOiB2aXNpYmxlU3RhcnRJbmRleFxyXG4gICAgdGhpcy5saXN0VmlzaWJsZVN0b3BJbmRleCA9IGNvbmZpZz8ubGF5b3V0VHlwZSA9PT0gTGlzdExheW91dFR5cGUuR1JJRCA/IHRoaXMuZ2V0SXRlbUluZGV4QnlSb3dBbmRDb2x1bW5JbmRleCh2aXNpYmxlUm93U3RvcEluZGV4LCB2aXNpYmxlQ29sdW1uU3RvcEluZGV4KSA6IHZpc2libGVTdG9wSW5kZXhcclxuICAgIGlmICh0aGlzLm5lZWRSZWZyZXNoTGlzdE9uTGlzdFJlbmRlcmVkKSB7XHJcbiAgICAgIHRoaXMubmVlZFJlZnJlc2hMaXN0T25MaXN0UmVuZGVyZWQgPSBmYWxzZVxyXG4gICAgICB0aGlzLnJlZnJlc2hMaXN0KClcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmlzU3dpdGNoUGFnZSkge1xyXG4gICAgICBpZiAoY29uZmlnLnBhZ2VTdHlsZSA9PT0gUGFnZVN0eWxlLlNjcm9sbCkge1xyXG4gICAgICAgIGlmICh0aGlzLnJlY29yZHMubGVuZ3RoID4gdGhpcy5saXN0VmlzaWJsZVN0b3BJbmRleCArIDEpIHtcclxuICAgICAgICAgIHRoaXMuaXNTd2l0Y2hQYWdlID0gZmFsc2VcclxuICAgICAgICAgIHRoaXMub25JdGVtc1JlbmRlcmVkVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZVNjcm9sbERvd24obnVsbClcclxuICAgICAgICAgIH0sIDUwMClcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5pc1N3aXRjaFBhZ2UgPSBmYWxzZVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRJdGVtSW5kZXhCeVJvd0FuZENvbHVtbkluZGV4ID0gKHJvd0luZGV4LCBjb2x1bW5JbmRleCkgPT4ge1xyXG4gICAgY29uc3QgY29sdW1uQ291bnQgPSB0aGlzLmdldEl0ZW1Db2x1bW5Db3VudCgpXHJcbiAgICByZXR1cm4gcm93SW5kZXggKiBjb2x1bW5Db3VudCArIGNvbHVtbkluZGV4XHJcbiAgfVxyXG5cclxuICBpdGVtU2l6ZSA9IGluZGV4ID0+IHtcclxuICAgIGNvbnN0IHsgY29uZmlnIH0gPSB0aGlzLnByb3BzXHJcbiAgICBjb25zdCB7IGN1cnJlbnRDYXJkU2l6ZSB9ID0gdGhpcy5zdGF0ZVxyXG4gICAgY29uc3QgaXNIb3Jpem9uID0gY29uZmlnPy5sYXlvdXRUeXBlID09PSBMaXN0TGF5b3V0VHlwZS5Db2x1bW5cclxuICAgIGNvbnN0IHNwYWNlID0gY29uZmlnPy5sYXlvdXRUeXBlID09PSBMaXN0TGF5b3V0VHlwZS5HUklEID8gY29uZmlnPy52ZXJ0aWNhbFNwYWNlIDogY29uZmlnPy5zcGFjZVxyXG4gICAgLy8gY29uc3QgcmVjb3JkTGVuZ3RoID0gdGhpcy5yZWNvcmRzPy5sZW5ndGggfHwgMFxyXG4gICAgLy8gY29uc3QgaXNMYXN0SXRlbSA9IHJlY29yZExlbmd0aCAtIDEgPT09IGluZGV4XHJcbiAgICAvLyBjb25zdCBpdGVtV2lkdGggPSBpc0xhc3RJdGVtID8gY3VycmVudENhcmRTaXplLndpZHRoIDogY3VycmVudENhcmRTaXplLndpZHRoICsgc3BhY2VcclxuICAgIC8vIGNvbnN0IGl0ZW1IZWlnaHQgPSBpc0xhc3RJdGVtID8gY3VycmVudENhcmRTaXplLmhlaWdodCA6IGN1cnJlbnRDYXJkU2l6ZS5oZWlnaHQgKyBzcGFjZVxyXG4gICAgY29uc3QgaXRlbVdpZHRoID0gY3VycmVudENhcmRTaXplLndpZHRoICsgc3BhY2VcclxuICAgIGNvbnN0IGl0ZW1IZWlnaHQgPSBjdXJyZW50Q2FyZFNpemUuaGVpZ2h0ICsgc3BhY2VcclxuICAgIGNvbnN0IHNpemUgPSBpc0hvcml6b24gPyBpdGVtV2lkdGggOiBpdGVtSGVpZ2h0XHJcbiAgICAvLyBjb25zdCBzaXplID0gY29uZmlnLmRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uVHlwZS5Ib3Jpem9uID9cclxuICAgIC8vICgoaW5kZXggPT09ICh0aGlzLnJlY29yZHMubGVuZ3RoIC0gMSkgJiYgaW5kZXggIT09IDApID9cclxuICAgIC8vICAgY3VycmVudENhcmRTaXplLndpZHRoIDogKGN1cnJlbnRDYXJkU2l6ZS53aWR0aCArIGNvbmZpZy5zcGFjZSkpIDpcclxuICAgIC8vICAgKChpbmRleCA9PT0gKHRoaXMucmVjb3Jkcy5sZW5ndGggLSAxKSAmJiBpbmRleCAhPT0gMCkgP1xyXG4gICAgLy8gICBjdXJyZW50Q2FyZFNpemUuaGVpZ2h0IDogKGN1cnJlbnRDYXJkU2l6ZS5oZWlnaHQgKyBjb25maWcuc3BhY2UpKVxyXG4gICAgcmV0dXJuIHNpemVcclxuICB9XHJcblxyXG4gIGNvbHVtbldpZHRoID0gKGluZGV4OiBudW1iZXIsIGNhcmRXaWR0aDogbnVtYmVyLCBzcGFjZTogbnVtYmVyID0gMCk6IG51bWJlciA9PiB7XHJcbiAgICAvLyBjb25zdCBjb2x1bW5Db3VudCA9IHRoaXMuZ2V0SXRlbUNvbHVtbkNvdW50KClcclxuICAgIC8vIHJldHVybiBjb2x1bW5Db3VudCA9PT0gKGluZGV4ICsgMSkgPyBjYXJkV2lkdGggOiBjYXJkV2lkdGggKyBzcGFjZVxyXG4gICAgcmV0dXJuIGNhcmRXaWR0aCArIHNwYWNlXHJcbiAgfVxyXG5cclxuICByb3dIZWlnaHQgPSAocm93SW5kZXg6IG51bWJlciwgY2FyZEhlaWdodDogbnVtYmVyLCBzcGFjZTogbnVtYmVyID0gMCk6IG51bWJlciA9PiB7XHJcbiAgICAvLyBjb25zdCByb3dDb3VudCA9IHRoaXMuZ2V0SXRlbVJvd0NvdW50KClcclxuICAgIC8vIHJldHVybiByb3dDb3VudCA9PT0gKHJvd0luZGV4ICsgMSkgPyBjYXJkSGVpZ2h0IDogY2FyZEhlaWdodCArIHNwYWNlXHJcbiAgICByZXR1cm4gY2FyZEhlaWdodCArIHNwYWNlXHJcbiAgfVxyXG5cclxuICBnZXRJdGVtc0J5UmVjb3JkcyA9IHJlY29yZHMgPT4ge1xyXG4gICAgY29uc3Qge1xyXG4gICAgICBjb25maWcsXHJcbiAgICAgIHNlbGVjdGlvbklzSW5TZWxmLFxyXG4gICAgICBzZWxlY3Rpb25Jc1NlbGYsXHJcbiAgICAgIGJ1aWxkZXJTdGF0dXMsXHJcbiAgICAgIGFwcE1vZGUsXHJcbiAgICAgIHF1ZXJ5T2JqZWN0LFxyXG4gICAgICB1c2VEYXRhU291cmNlc1xyXG4gICAgfSA9IHRoaXMucHJvcHNcclxuICAgIGNvbnN0IHsgZGF0YXNvdXJjZSwgaG92ZXJJbmRleCB9ID0gdGhpcy5zdGF0ZVxyXG4gICAgY29uc3Qgc2VsZWN0ZWRSZWNvcmRJZHMgPSAoIWRhdGFzb3VyY2UgfHwgIWNvbmZpZy5pc0l0ZW1TdHlsZUNvbmZpcm1cclxuICAgICAgPyBbXVxyXG4gICAgICA6IGRhdGFzb3VyY2UuZ2V0U2VsZWN0ZWRSZWNvcmRJZHMoKVxyXG4gICAgKS5tYXAodiA9PiB2ICsgJycpXHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgcmVjb3JkcyAmJlxyXG4gICAgICByZWNvcmRzLm1hcCgocmVjb3JkLCBpbmRleCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGlzRWRpdG9yID1cclxuICAgICAgICAgIGluZGV4ID09PSAwICYmXHJcbiAgICAgICAgICB3aW5kb3cuamltdUNvbmZpZy5pc0luQnVpbGRlciAmJlxyXG4gICAgICAgICAgYXBwTW9kZSA9PT0gQXBwTW9kZS5EZXNpZ25cclxuICAgICAgICBjb25zdCBlZGl0UHJvcHMgPSBpc0VkaXRvclxyXG4gICAgICAgICAgPyB7XHJcbiAgICAgICAgICAgICAgaGlkZUNhcmRUb29sOiB0aGlzLnN0YXRlLmhpZGVDYXJkVG9vbCxcclxuICAgICAgICAgICAgICBzZWxlY3Rpb25Jc0xpc3Q6IHNlbGVjdGlvbklzU2VsZixcclxuICAgICAgICAgICAgICBzZWxlY3Rpb25Jc0luTGlzdDogc2VsZWN0aW9uSXNJblNlbGYsXHJcbiAgICAgICAgICAgICAgaXNFZGl0aW5nOiB0aGlzLmlzRWRpdGluZygpLFxyXG4gICAgICAgICAgICAgIGJ1aWxkZXJTdGF0dXM6IGJ1aWxkZXJTdGF0dXMsXHJcbiAgICAgICAgICAgICAgbG9ja0l0ZW1SYXRpbzogY29uZmlnLmxvY2tJdGVtUmF0aW8sXHJcbiAgICAgICAgICAgICAgY2hhbmdlSXNSZXNpemluZ0NhcmQ6IHRoaXMuY2hhbmdlSXNSZXNpemluZ0NhcmRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgOiB7XHJcbiAgICAgICAgICAgICAgbGlua1BhcmFtOiBjb25maWcubGlua1BhcmFtLFxyXG4gICAgICAgICAgICAgIHF1ZXJ5T2JqZWN0OiBxdWVyeU9iamVjdCxcclxuICAgICAgICAgICAgICB1c2VEYXRhU291cmNlc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIGluZGV4LFxyXG4gICAgICAgICAgaXNIb3ZlcjogaG92ZXJJbmRleCA9PT0gaW5kZXgsXHJcbiAgICAgICAgICByZWNvcmQ6IGNvbmZpZy5pc0l0ZW1TdHlsZUNvbmZpcm0gPyByZWNvcmQgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICBhY3RpdmU6XHJcbiAgICAgICAgICAgICFyZWNvcmQuZmFrZSAmJlxyXG4gICAgICAgICAgICBjb25maWcuaXNJdGVtU3R5bGVDb25maXJtICYmXHJcbiAgICAgICAgICAgIGRhdGFzb3VyY2UgJiZcclxuICAgICAgICAgICAgc2VsZWN0ZWRSZWNvcmRJZHMuaW5jbHVkZXMocmVjb3JkLmdldElkKCkpLFxyXG4gICAgICAgICAgLi4udGhpcy5nZXRPdGhlclByb3BzKCksXHJcbiAgICAgICAgICAuLi5lZGl0UHJvcHNcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBnZXRPdGhlclByb3BzID0gKCkgPT4ge1xyXG4gICAgY29uc3Qge1xyXG4gICAgICBjb25maWcsXHJcbiAgICAgIHRoZW1lLFxyXG4gICAgICBpZCxcclxuICAgICAgYXBwTW9kZSxcclxuICAgICAgYnVpbGRlclN1cHBvcnRNb2R1bGVzLFxyXG4gICAgICBsYXlvdXRzLFxyXG4gICAgICBicm93c2VyU2l6ZU1vZGUsXHJcbiAgICAgIGRpc3BhdGNoLFxyXG4gICAgICBpc1JUTFxyXG4gICAgfSA9IHRoaXMucHJvcHNcclxuICAgIGNvbnN0IHsgZGF0YXNvdXJjZSB9ID0gdGhpcy5zdGF0ZVxyXG4gICAgY29uc3QgaXNXaWR0aFBlcmNlbnRhZ2UgPSBsaXN0VXRpbHMuZ2V0Q2FyZFNpemVXaWR0aFVuaXRJbkNvbmZpZyh0aGlzLnByb3BzKT8ud2lkdGg/LnVuaXQgPT09IERpc3RhbmNlVW5pdHMuUEVSQ0VOVEFHRVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgYnJvd3NlclNpemVNb2RlOiBicm93c2VyU2l6ZU1vZGUsXHJcbiAgICAgIHNwYWNlOiBjb25maWcuc3BhY2UsXHJcbiAgICAgIGlzUlRMOiBpc1JUTCxcclxuICAgICAgYnVpbGRlclN1cHBvcnRNb2R1bGVzOiBidWlsZGVyU3VwcG9ydE1vZHVsZXMsXHJcbiAgICAgIGZvcm1hdE1lc3NhZ2U6IHRoaXMuZm9ybWF0TWVzc2FnZSxcclxuICAgICAgZGlzcGF0Y2g6IGRpc3BhdGNoLFxyXG4gICAgICB3aWRnZXRJZDogaWQsXHJcbiAgICAgIGludGVyYWN0OlxyXG4gICAgICAgIHdpbmRvdy5qaW11Q29uZmlnLmlzSW5CdWlsZGVyICYmXHJcbiAgICAgICAgYnVpbGRlclN1cHBvcnRNb2R1bGVzLndpZGdldE1vZHVsZXMuaW50ZXJhY3QsXHJcbiAgICAgIHNlbGVjdENhcmQ6IHRoaXMuc2VsZWN0Q2FyZCxcclxuICAgICAgaGFuZGxlUmVzaXplQ2FyZDogdGhpcy5oYW5kbGVSZXNpemVDYXJkLFxyXG4gICAgICBhcHBNb2RlOiBhcHBNb2RlLFxyXG4gICAgICBvbkNoYW5nZTogdGhpcy5oYW5kbGVJdGVtQ2hhbmdlLFxyXG4gICAgICBob3ZlckxheW91dE9wZW46IGNvbmZpZy5jYXJkQ29uZmlnc1tTdGF0dXMuSG92ZXJdLmVuYWJsZSxcclxuICAgICAgc2VsZWN0YWJsZTpcclxuICAgICAgICBjb25maWcuY2FyZENvbmZpZ3NbU3RhdHVzLlNlbGVjdGVkXS5zZWxlY3Rpb25Nb2RlICE9PVxyXG4gICAgICAgIFNlbGVjdGlvbk1vZGVUeXBlLk5vbmUsXHJcbiAgICAgIGRpcmVjdGlvbjogY29uZmlnLmRpcmVjdGlvbixcclxuICAgICAgdGhlbWU6IHRoZW1lLFxyXG4gICAgICBMYXlvdXRFbnRyeTogdGhpcy5zdGF0ZS5MYXlvdXRFbnRyeSxcclxuICAgICAgbGF5b3V0czogbGF5b3V0cyxcclxuICAgICAgbGF5b3V0VHlwZTogY29uZmlnPy5sYXlvdXRUeXBlLFxyXG4gICAgICBrZWVwQXNwZWN0UmF0aW86IGNvbmZpZz8ua2VlcEFzcGVjdFJhdGlvLFxyXG4gICAgICBncmlkSXRlbVNpemVSYXRpbzogY29uZmlnPy5ncmlkSXRlbVNpemVSYXRpbyxcclxuICAgICAgY2FyZENvbmZpZ3M6IGNvbmZpZy5jYXJkQ29uZmlncyxcclxuICAgICAgZGF0YXNvdXJjZUlkOiBkYXRhc291cmNlICYmIGRhdGFzb3VyY2UuaWQsXHJcbiAgICAgIHVwZGF0ZUNhcmRUb29sUG9zaXRpb246IHRoaXMudXBkYXRlQ2FyZFRvb2xQb3NpdGlvbixcclxuICAgICAgaXNXaWR0aFBlcmNlbnRhZ2U6IGlzV2lkdGhQZXJjZW50YWdlLFxyXG4gICAgICBob3Jpem9udGFsU3BhY2U6IGNvbmZpZz8uaG9yaXpvbnRhbFNwYWNlXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpdGVtUmVuZGVyID0gcHJvcHMgPT4ge1xyXG4gICAgY29uc3QgeyBhcHBNb2RlLCBjb25maWcgfSA9IHRoaXMucHJvcHNcclxuICAgIGxldCBzdHlsZSA9IHByb3BzLnN0eWxlXHJcbiAgICBjb25zdCBjb2x1bW5JbmRleCA9IHByb3BzPy5jb2x1bW5JbmRleCB8fCAwXHJcbiAgICBjb25zdCByb3dJbmRleCA9IHByb3BzPy5yb3dJbmRleCB8fCAwXHJcbiAgICAvLyBjb25zdCByb3dDb3VudCA9IHRoaXMuZ2V0SXRlbVJvd0NvdW50KClcclxuICAgIC8vIGNvbnN0IGNvbHVtbkNvdW50ID0gdGhpcy5nZXRJdGVtQ29sdW1uQ291bnQoKVxyXG4gICAgY29uc3QgaW5kZXggPSBjb25maWc/LmxheW91dFR5cGUgPT09IExpc3RMYXlvdXRUeXBlLkdSSUQgPyB0aGlzLmdldEl0ZW1JbmRleEJ5Um93QW5kQ29sdW1uSW5kZXgocm93SW5kZXgsIGNvbHVtbkluZGV4KSA6IHByb3BzLmluZGV4XHJcbiAgICBjb25zdCBpdGVtcyA9IHByb3BzLmRhdGFcclxuICAgIC8vIGNvbnN0IHJlY29yZExlbmd0aCA9IHRoaXMucmVjb3Jkcz8ubGVuZ3RoIHx8IDBcclxuICAgIC8vIGNvbnN0IGlzTGFzdEl0ZW0gPSByZWNvcmRMZW5ndGggLSAxID09PSBpbmRleFxyXG4gICAgc3dpdGNoIChjb25maWc/LmxheW91dFR5cGUpIHtcclxuICAgICAgY2FzZSBMaXN0TGF5b3V0VHlwZS5Db2x1bW46XHJcbiAgICAgICAgc3R5bGUgPSB7XHJcbiAgICAgICAgICAuLi5zdHlsZSxcclxuICAgICAgICAgIC8vIHdpZHRoOiBpc0xhc3RJdGVtID8gYCR7cGFyc2VGbG9hdChzdHlsZS53aWR0aCl9cHhgIDogYCR7cGFyc2VGbG9hdChzdHlsZS53aWR0aCkgLSBjb25maWcuc3BhY2V9cHhgXHJcbiAgICAgICAgICB3aWR0aDogYCR7cGFyc2VGbG9hdChzdHlsZS53aWR0aCkgLSBjb25maWcuc3BhY2V9cHhgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgTGlzdExheW91dFR5cGUuUm93OlxyXG4gICAgICAgIHN0eWxlID0ge1xyXG4gICAgICAgICAgLi4uc3R5bGUsXHJcbiAgICAgICAgICAvLyBoZWlnaHQ6IGlzTGFzdEl0ZW0gPyBgJHtwYXJzZUZsb2F0KHN0eWxlLmhlaWdodCl9cHhgIDogYCR7cGFyc2VGbG9hdChzdHlsZS5oZWlnaHQpIC0gY29uZmlnLnNwYWNlfXB4YFxyXG4gICAgICAgICAgaGVpZ2h0OiBgJHtwYXJzZUZsb2F0KHN0eWxlLmhlaWdodCkgLSBjb25maWcuc3BhY2V9cHhgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgTGlzdExheW91dFR5cGUuR1JJRDpcclxuICAgICAgICBzdHlsZSA9IHtcclxuICAgICAgICAgIC4uLnN0eWxlLFxyXG4gICAgICAgICAgaGVpZ2h0OiBgJHtwYXJzZUZsb2F0KHN0eWxlLmhlaWdodCkgLSBjb25maWc/LnZlcnRpY2FsU3BhY2V9cHhgLFxyXG4gICAgICAgICAgd2lkdGg6IGAke3BhcnNlRmxvYXQoc3R5bGU/LndpZHRoKSAtIGNvbmZpZz8uaG9yaXpvbnRhbFNwYWNlfXB4YFxyXG4gICAgICAgICAgLy8gaGVpZ2h0OiByb3dDb3VudCA9PT0gKHJvd0luZGV4ICsgMSkgPyBgJHtwYXJzZUZsb2F0KHN0eWxlLmhlaWdodCl9cHhgIDogYCR7cGFyc2VGbG9hdChzdHlsZS5oZWlnaHQpIC0gY29uZmlnPy52ZXJ0aWNhbFNwYWNlfXB4YCxcclxuICAgICAgICAgIC8vIHdpZHRoOiBjb2x1bW5Db3VudCA9PT0gKGNvbHVtbkluZGV4ICsgMSkgPyBgJHtwYXJzZUZsb2F0KHN0eWxlPy53aWR0aCl9cHhgIDogYCR7cGFyc2VGbG9hdChzdHlsZT8ud2lkdGgpIC0gY29uZmlnPy5ob3Jpem9udGFsU3BhY2V9cHhgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICB9XHJcbiAgICBjb25zdCBpc0VkaXRvciA9XHJcbiAgICAgIGluZGV4ID09PSAwICYmIHdpbmRvdy5qaW11Q29uZmlnLmlzSW5CdWlsZGVyICYmIGFwcE1vZGUgPT09IEFwcE1vZGUuRGVzaWduXHJcbiAgICBjb25zdCBMaXN0Q2FyZCA9IGlzRWRpdG9yID8gTGlzdENhcmRFZGl0b3IgOiBMaXN0Q2FyZFZpZXdlclxyXG4gICAgaWYgKGl0ZW1zPy5sZW5ndGggPCBpbmRleCArIDEpIHJldHVybiBudWxsXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8TGlzdENhcmRcclxuICAgICAgICBsaXN0U3R5bGU9e3N0eWxlfVxyXG4gICAgICAgIHdpZGdldElkPXt0aGlzLnByb3BzLmlkfVxyXG4gICAgICAgIHsuLi5pdGVtc1tpbmRleF19XHJcbiAgICAgICAgaGFuZGxlTGlzdE1vdXNlTW92ZT17dGhpcy5oYW5kbGVMaXN0TW91c2VNb3ZlfVxyXG4gICAgICAgIGhhbmRsZUxpc3RNb3VzZUxlYXZlPXt0aGlzLmhhbmRsZUxpc3RNb3VzZUxlYXZlfVxyXG4gICAgICAgIGl0ZW1JZGV4PXtpbmRleH0gLz5cclxuICAgIClcclxuICB9XHJcblxyXG4gIGl0ZW1LZXkgPSBpbmRleCA9PiB7XHJcbiAgICBjb25zdCBpdGVtID0gdGhpcy5yZWNvcmRzW2luZGV4XVxyXG4gICAgcmV0dXJuIGAkeyhpdGVtPy5nZXRJZCAmJiBpdGVtPy5nZXRJZCgpKSB8fCBpbmRleH1gXHJcbiAgfVxyXG5cclxuICBncmlkSXRlbUluZGV4ID0gaW5kZXhPcHRpb24gPT4ge1xyXG4gICAgY29uc3QgeyBjb2x1bW5JbmRleCwgcm93SW5kZXggfSA9IGluZGV4T3B0aW9uXHJcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuZ2V0SXRlbUluZGV4QnlSb3dBbmRDb2x1bW5JbmRleChyb3dJbmRleCwgY29sdW1uSW5kZXgpXHJcbiAgICBjb25zdCBpdGVtID0gdGhpcy5yZWNvcmRzW2luZGV4XVxyXG4gICAgcmV0dXJuIGAkeyhpdGVtPy5nZXRJZCAmJiBpdGVtPy5nZXRJZCgpKSB8fCBpbmRleCArIDEwMH1gXHJcbiAgfVxyXG5cclxuICBnZXRJdGVtQ29sdW1uQ291bnQgPSAoKSA9PiB7XHJcbiAgICBjb25zdCB7IHdpZGdldFJlY3QsIGN1cnJlbnRDYXJkU2l6ZSB9ID0gdGhpcy5zdGF0ZVxyXG4gICAgY29uc3QgeyBjb25maWcgfSA9IHRoaXMucHJvcHNcclxuICAgIGNvbnN0IGxpc3RXaWR0aCA9ICh3aWRnZXRSZWN0ICYmIHdpZGdldFJlY3Qud2lkdGgpIHx8IExJU1RfQ0FSRF9NSU5fU0laRVxyXG4gICAgLy9UaGUgYWN0dWFsIHdpZHRoIG9mIHRoZSBsYXN0IGNvbHVtbiBpcyBjdXJyZW50Q2FyZFNpemUud2lkdGhcclxuICAgIC8vJ2xpc3RXaWR0aC00JyBpcyBmb3IgdGhlIHdpZHRoIG9mIHRoZSBzY3JvbGwgYmFyXHJcbiAgICAvLyByZXR1cm4gTWF0aC5mbG9vcigoKGxpc3RXaWR0aCAtIDQpIC0gY3VycmVudENhcmRTaXplLndpZHRoKSAvIChjdXJyZW50Q2FyZFNpemUud2lkdGggKyBjb25maWc/Lmhvcml6b250YWxTcGFjZSkgKyAxKSB8fCAxXHJcbiAgICByZXR1cm4gTWF0aC5mbG9vcigobGlzdFdpZHRoICsgY29uZmlnPy5ob3Jpem9udGFsU3BhY2UpIC8gKGN1cnJlbnRDYXJkU2l6ZS53aWR0aCArIGNvbmZpZz8uaG9yaXpvbnRhbFNwYWNlKSkgfHwgMVxyXG4gIH1cclxuXHJcbiAgZ2V0SXRlbVJvd0NvdW50ID0gKCkgPT4ge1xyXG4gICAgcmV0dXJuIE1hdGguY2VpbCh0aGlzLnJlY29yZHMubGVuZ3RoIC8gdGhpcy5nZXRJdGVtQ29sdW1uQ291bnQoKSkgfHwgMVxyXG4gIH1cclxuXHJcbiAgZ2V0TGlzdENvbnRlbnRMZWZ0UGFkZGluZyA9ICgpID0+IHtcclxuICAgIGNvbnN0IHsgd2lkZ2V0UmVjdCwgY3VycmVudENhcmRTaXplIH0gPSB0aGlzLnN0YXRlXHJcbiAgICBjb25zdCB7IGNvbmZpZyB9ID0gdGhpcy5wcm9wc1xyXG4gICAgY29uc3QgbGlzdFdpZHRoID0gKHdpZGdldFJlY3QgJiYgd2lkZ2V0UmVjdC53aWR0aCkgfHwgTElTVF9DQVJEX01JTl9TSVpFXHJcbiAgICBjb25zdCByb3dXaWR0aCA9IHRoaXMuZ2V0SXRlbUNvbHVtbkNvdW50KCkgKiAoY3VycmVudENhcmRTaXplLndpZHRoICsgY29uZmlnPy5ob3Jpem9udGFsU3BhY2UpIC0gY29uZmlnPy5ob3Jpem9udGFsU3BhY2VcclxuICAgIGxldCBwYWRkaW5nXHJcbiAgICBzd2l0Y2ggKGNvbmZpZz8uZ3JpZEFsaWdubWVudCkge1xyXG4gICAgICBjYXNlIFRleHRBbGlnblZhbHVlLkxFRlQ6XHJcbiAgICAgICAgcGFkZGluZyA9IDBcclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlIFRleHRBbGlnblZhbHVlLlJJR0hUOlxyXG4gICAgICAgIHBhZGRpbmcgPSBsaXN0V2lkdGggLSByb3dXaWR0aCAtIDRcclxuICAgICAgICBicmVha1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHBhZGRpbmcgPSAobGlzdFdpZHRoIC0gcm93V2lkdGgpIC8gMlxyXG4gICAgICAgIGJyZWFrXHJcbiAgICB9XHJcbiAgICBpZiAoY29uZmlnPy5sYXlvdXRUeXBlID09PSBMaXN0TGF5b3V0VHlwZS5HUklEKSB7XHJcbiAgICAgIHJldHVybiBwYWRkaW5nID4gMCA/IHBhZGRpbmcgOiAwXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gMFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyICgpIHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgY29uZmlnLFxyXG4gICAgICBpZCxcclxuICAgICAgYXBwTW9kZSxcclxuICAgICAgYnJvd3NlclNpemVNb2RlLFxyXG4gICAgICBzZWxlY3Rpb25Jc0luU2VsZixcclxuICAgICAgc2VsZWN0aW9uSXNTZWxmLFxyXG4gICAgICB1c2VEYXRhU291cmNlcyxcclxuICAgICAgYnVpbGRlclN0YXR1cyxcclxuICAgICAgbGF5b3V0c1xyXG4gICAgfSA9IHRoaXMucHJvcHNcclxuICAgIGNvbnN0IGFwcENvbmZpZyA9IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5hcHBDb25maWdcclxuICAgIGNvbnN0IHsgZm9yY2VTaG93TWFzaywgZGF0YXNvdXJjZSwgd2lkZ2V0UmVjdCwgcGFnZSB9ID0gdGhpcy5zdGF0ZVxyXG4gICAgY29uc3QgaXNJbkJ1aWxkZXIgPSB3aW5kb3cuamltdUNvbmZpZy5pc0luQnVpbGRlclxyXG4gICAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoXHJcbiAgICAgICdqaW11LXdpZGdldCcsXHJcbiAgICAgICd3aWRnZXQtbGlzdCcsXHJcbiAgICAgICdsaXN0LXdpZGdldC0nICsgaWRcclxuICAgIClcclxuXHJcbiAgICBpZiAoIWNvbmZpZy5pdGVtU3R5bGUpIHtcclxuICAgICAgcmV0dXJuIChcclxuICAgICAgICA8V2lkZ2V0UGxhY2Vob2xkZXJcclxuICAgICAgICAgIHdpZGdldElkPXt0aGlzLnByb3BzLmlkfVxyXG4gICAgICAgICAgaWNvbj17cmVxdWlyZSgnLi9hc3NldHMvaWNvbi5zdmcnKX1cclxuICAgICAgICAgIG1lc3NhZ2U9e3RoaXMuZm9ybWF0TWVzc2FnZSgncGxhY2VIb2xkZXJUaXAnKX1cclxuICAgICAgICAvPlxyXG4gICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc2hvd0JvdHRvbVRvb2wgPSBsaXN0VXRpbHMuc2hvd0JvdHRvbVRvb2xzKHRoaXMucHJvcHMsIHRoaXMuc3RhdGUpXHJcbiAgICBjb25zdCBib3R0b21Ub29sSCA9IGxpc3RVdGlscy5nZXRCb3R0b21Ub29sSChcclxuICAgICAgdGhpcy5wYWdpbmF0b3JEaXYuY3VycmVudCxcclxuICAgICAgc2hvd0JvdHRvbVRvb2xcclxuICAgIClcclxuICAgIGNvbnN0IHNob3dUb3BUb29scyA9IGxpc3RVdGlscy5zaG93VG9wVG9vbHModGhpcy5wcm9wcylcclxuICAgIGNvbnN0IGxpc3RIZWlnaHQgPSBsaXN0VXRpbHMuZ2V0TGlzdEhlaWdodChcclxuICAgICAgd2lkZ2V0UmVjdCxcclxuICAgICAgYm90dG9tVG9vbEgsXHJcbiAgICAgIHNob3dUb3BUb29sc1xyXG4gICAgKVxyXG4gICAgY29uc3QgY29sdW1uQ291bnQgPSBjb25maWc/LmxheW91dFR5cGUgPT09IExpc3RMYXlvdXRUeXBlLkdSSUQgPyB0aGlzLmdldEl0ZW1Db2x1bW5Db3VudCgpIDogbnVsbFxyXG4gICAgY29uc3QgcGFnZVNpemUgPSBsaXN0VXRpbHMuZ2V0UGFnZVNpemUod2lkZ2V0UmVjdCwgbGlzdEhlaWdodCwgdGhpcy5wcm9wcywgY29sdW1uQ291bnQpXHJcbiAgICB0aGlzLnBhZ2VTaXplID0gcGFnZVNpemVcclxuICAgIGNvbnN0IHF1ZXJ5UGFnZVNpemUgPSBwYWdlU2l6ZVxyXG5cclxuICAgIGxldCBxdWVyeSA9IGdldFF1ZXJ5T3B0aW9ucyh0aGlzLnN0YXRlLCB0aGlzLnByb3BzLCBxdWVyeVBhZ2VTaXplKVxyXG4gICAgaWYgKFxyXG4gICAgICAhY29tcGFyZVF1ZXJ5T3B0aW9uc0V4Y2VwdFBhZ2luZyhcclxuICAgICAgICBxdWVyeSxcclxuICAgICAgICB0aGlzLmxhc3RRdWVyeSxcclxuICAgICAgICBkYXRhc291cmNlIGFzIFF1ZXJpYWJsZURhdGFTb3VyY2VcclxuICAgICAgKSAmJiBkYXRhc291cmNlXHJcbiAgICApIHtcclxuICAgICAgY29uc3QgdGVtcCA9IHF1ZXJ5XHJcbiAgICAgIGlmIChwYWdlICE9PSAxKSB7XHJcbiAgICAgICAgcXVlcnkgPSB0aGlzLmxhc3RRdWVyeVxyXG4gICAgICAgIHRoaXMubGFzdFF1ZXJ5ID0gdGVtcFxyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgcGFnZTogMVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5sYXN0UXVlcnkgPSB0ZW1wXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBjdXJyZW50TGF5b3V0ID1cclxuICAgICAgYXBwQ29uZmlnPy5sYXlvdXRzW1xyXG4gICAgICAgIHNlYXJjaFV0aWxzLmZpbmRMYXlvdXRJZChcclxuICAgICAgICAgIGxheW91dHNbYnVpbGRlclN0YXR1c10sXHJcbiAgICAgICAgICBicm93c2VyU2l6ZU1vZGUsXHJcbiAgICAgICAgICBhcHBDb25maWcubWFpblNpemVNb2RlXHJcbiAgICAgICAgKVxyXG4gICAgICBdXHJcbiAgICBjb25zdCBjdXJyZW50TGF5b3V0VHlwZSA9IGN1cnJlbnRMYXlvdXQgJiYgY3VycmVudExheW91dC50eXBlXHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdlxyXG4gICAgICAgIGNsYXNzTmFtZT17Y2xhc3Nlc31cclxuICAgICAgICBjc3M9e2dldFN0eWxlKHRoaXMucHJvcHMsIHRoaXMuaXNFZGl0aW5nKCksIHNob3dCb3R0b21Ub29sKX1cclxuICAgICAgICBvblBvaW50ZXJEb3duPXtldnQgPT5cclxuICAgICAgICAgIGlzSW5CdWlsZGVyICYmXHJcbiAgICAgICAgICBhcHBNb2RlICE9PSBBcHBNb2RlLlJ1biAmJlxyXG4gICAgICAgICAgIXNlbGVjdGlvbklzU2VsZiAmJlxyXG4gICAgICAgICAgIXNlbGVjdGlvbklzSW5TZWxmICYmXHJcbiAgICAgICAgICB0aGlzLmhhbmRsZUxpc3RQb2ludGVyRG93bihldnQpfVxyXG4gICAgICA+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J3dpZGdldC1saXN0IGQtZmxleCc+XHJcbiAgICAgICAgICB7dGhpcy5pc0RzQ29uZmlndXJlZCgpXHJcbiAgICAgICAgICAgID8gKFxyXG4gICAgICAgICAgICAgIDxEYXRhU291cmNlQ29tcG9uZW50XHJcbiAgICAgICAgICAgICAgICBxdWVyeT17ZGF0YXNvdXJjZSA/IHF1ZXJ5IDogbnVsbH1cclxuICAgICAgICAgICAgICAgIHVzZURhdGFTb3VyY2U9e3VzZURhdGFTb3VyY2VzICYmIHVzZURhdGFTb3VyY2VzWzBdfVxyXG4gICAgICAgICAgICAgICAgb25EYXRhU291cmNlQ3JlYXRlZD17dGhpcy5vbkRTQ3JlYXRlZH1cclxuICAgICAgICAgICAgICAgIHdpZGdldElkPXt0aGlzLnByb3BzLmlkfVxyXG4gICAgICAgICAgICAgICAgcXVlcnlDb3VudFxyXG4gICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlckxpc3R9XHJcbiAgICAgICAgICAgICAgPC9EYXRhU291cmNlQ29tcG9uZW50PlxyXG4gICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgOiAoXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckxpc3QoKVxyXG4gICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICB7IXRoaXMuaXNIYXNSZW5kZXJMaXN0ICYmIChcclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2xpc3QtbG9hZGluZy1jb24gdy0xMDAgaC0xMDAnPlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdqaW11LXNlY29uZGFyeS1sb2FkaW5nJz48L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+KX1cclxuICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAge2lzSW5CdWlsZGVyICYmXHJcbiAgICAgICAgICBhcHBNb2RlICE9PSBBcHBNb2RlLlJ1biAmJlxyXG4gICAgICAgICAgKGZvcmNlU2hvd01hc2sgfHxcclxuICAgICAgICAgICAgKCFzZWxlY3Rpb25Jc0luU2VsZiAmJiAhc2VsZWN0aW9uSXNTZWxmKSB8fFxyXG4gICAgICAgICAgICAoIWNvbmZpZy5pc0l0ZW1TdHlsZUNvbmZpcm0gJiYgY3VycmVudExheW91dFR5cGUpKSAmJiAoXHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbGlzdC13aXRoLW1hc2snIC8+XHJcbiAgICAgICAgKX1cclxuICAgICAgICA8UmVhY3RSZXNpemVEZXRlY3RvclxyXG4gICAgICAgICAgaGFuZGxlV2lkdGhcclxuICAgICAgICAgIGhhbmRsZUhlaWdodFxyXG4gICAgICAgICAgb25SZXNpemU9e3RoaXMuZGVib3VuY2VPblJlc2l6ZX1cclxuICAgICAgICAvPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIClcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFdpZGdldFxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=